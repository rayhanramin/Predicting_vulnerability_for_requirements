<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 27258:1879fcb9f78542071bfbed49837e53c8db1126eb</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 1879fcb9f78542071bfbed49837e53c8db1126eb" />
<meta property="og:url" content="/comm-central/rev/1879fcb9f78542071bfbed49837e53c8db1126eb" />
<meta property="og:description" content="Bug 1512807 - [de-xbl] Migrate modebox and modevbox to custom elements. r=darktrojan,mkmelin" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 1879fcb9f78542071bfbed49837e53c8db1126eb 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/1879fcb9f78542071bfbed49837e53c8db1126eb">shortlog</a> |
<a href="/comm-central/log/1879fcb9f78542071bfbed49837e53c8db1126eb">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/1879fcb9f78542071bfbed49837e53c8db1126eb">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/1879fcb9f78542071bfbed49837e53c8db1126eb">files</a> |
changeset |
<a href="/comm-central/raw-rev/1879fcb9f78542071bfbed49837e53c8db1126eb">raw</a>  | <a href="/comm-central/archive/1879fcb9f78542071bfbed49837e53c8db1126eb.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1512807">Bug 1512807</a> - [de-xbl] Migrate modebox and modevbox to custom elements. r=darktrojan,mkmelin
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#80;&#97;&#117;&#108;&#32;&#77;&#111;&#114;&#114;&#105;&#115;&#32;&#60;&#112;&#97;&#117;&#108;&#64;&#112;&#97;&#117;&#108;&#119;&#109;&#111;&#114;&#114;&#105;&#115;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 23 Jul 2019 10:48:36 -0400</td></tr>

<tr>
 <td>changeset 27258</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/1879fcb9f78542071bfbed49837e53c8db1126eb">1879fcb9f78542071bfbed49837e53c8db1126eb</a></td>
</tr>



<tr>
<td>parent 27257</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/bfe2c75b1668730bcc6e73c60340321dfde16cc6">bfe2c75b1668730bcc6e73c60340321dfde16cc6</a>
</td>
</tr>

<tr>
<td>child 27259</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/0e4007423df0d7710baaff3b4f8952e0be286c82">0e4007423df0d7710baaff3b4f8952e0be286c82</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=1879fcb9f78542071bfbed49837e53c8db1126eb">16256</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Mon, 05 Aug 2019 20:00:24 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@0e4007423df0 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=0e4007423df0d7710baaff3b4f8952e0be286c82">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=0e4007423df0d7710baaff3b4f8952e0be286c82&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=0e4007423df0d7710baaff3b4f8952e0be286c82&newProject=comm-central&newRevision=1879fcb9f78542071bfbed49837e53c8db1126eb&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=0e4007423df0d7710baaff3b4f8952e0be286c82&newProject=comm-central&newRevision=1879fcb9f78542071bfbed49837e53c8db1126eb&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=0e4007423df0d7710baaff3b4f8952e0be286c82&newProject=comm-central&newRevision=1879fcb9f78542071bfbed49837e53c8db1126eb&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28darktrojan%29&revcount=50">darktrojan</a>, <a href="/comm-central/log?rev=reviewer%28mkmelin%29&revcount=50">mkmelin</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1512807">1512807</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1512807">Bug 1512807</a> - [de-xbl] Migrate modebox and modevbox to custom elements. r=darktrojan,mkmelin</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-attendees.xul">calendar/base/content/dialogs/calendar-event-dialog-attendees.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-attendees.xul">file</a> |
<a href="/comm-central/annotate/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-attendees.xul">annotate</a> |
<a href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-attendees.xul">diff</a> |
<a href="/comm-central/comparison/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-attendees.xul">comparison</a> |
<a href="/comm-central/log/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-attendees.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-recurrence.xul">calendar/base/content/dialogs/calendar-event-dialog-recurrence.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-recurrence.xul">file</a> |
<a href="/comm-central/annotate/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-recurrence.xul">annotate</a> |
<a href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-recurrence.xul">diff</a> |
<a href="/comm-central/comparison/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-recurrence.xul">comparison</a> |
<a href="/comm-central/log/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-recurrence.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-reminder.xul">calendar/base/content/dialogs/calendar-event-dialog-reminder.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-reminder.xul">file</a> |
<a href="/comm-central/annotate/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-reminder.xul">annotate</a> |
<a href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-reminder.xul">diff</a> |
<a href="/comm-central/comparison/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-reminder.xul">comparison</a> |
<a href="/comm-central/log/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-reminder.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-timezone.xul">calendar/base/content/dialogs/calendar-event-dialog-timezone.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-timezone.xul">file</a> |
<a href="/comm-central/annotate/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-timezone.xul">annotate</a> |
<a href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-timezone.xul">diff</a> |
<a href="/comm-central/comparison/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-timezone.xul">comparison</a> |
<a href="/comm-central/log/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog-timezone.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog.xul">calendar/base/content/dialogs/calendar-event-dialog.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog.xul">file</a> |
<a href="/comm-central/annotate/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog.xul">annotate</a> |
<a href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog.xul">diff</a> |
<a href="/comm-central/comparison/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog.xul">comparison</a> |
<a href="/comm-central/log/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-event-dialog.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-print-dialog.xul">calendar/base/content/dialogs/calendar-print-dialog.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-print-dialog.xul">file</a> |
<a href="/comm-central/annotate/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-print-dialog.xul">annotate</a> |
<a href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-print-dialog.xul">diff</a> |
<a href="/comm-central/comparison/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-print-dialog.xul">comparison</a> |
<a href="/comm-central/log/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-print-dialog.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-providerUninstall-dialog.xul">calendar/base/content/dialogs/calendar-providerUninstall-dialog.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-providerUninstall-dialog.xul">file</a> |
<a href="/comm-central/annotate/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-providerUninstall-dialog.xul">annotate</a> |
<a href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-providerUninstall-dialog.xul">diff</a> |
<a href="/comm-central/comparison/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-providerUninstall-dialog.xul">comparison</a> |
<a href="/comm-central/log/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/dialogs/calendar-providerUninstall-dialog.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/today-pane.js">calendar/base/content/today-pane.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/today-pane.js">file</a> |
<a href="/comm-central/annotate/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/today-pane.js">annotate</a> |
<a href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/today-pane.js">diff</a> |
<a href="/comm-central/comparison/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/today-pane.js">comparison</a> |
<a href="/comm-central/log/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/today-pane.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/today-pane.xul">calendar/base/content/today-pane.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/today-pane.xul">file</a> |
<a href="/comm-central/annotate/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/today-pane.xul">annotate</a> |
<a href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/today-pane.xul">diff</a> |
<a href="/comm-central/comparison/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/today-pane.xul">comparison</a> |
<a href="/comm-central/log/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/today-pane.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/widgets/calendar-modebox.js">calendar/base/content/widgets/calendar-modebox.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/widgets/calendar-modebox.js">file</a> |
<a href="/comm-central/annotate/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/widgets/calendar-modebox.js">annotate</a> |
<a href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/widgets/calendar-modebox.js">diff</a> |
<a href="/comm-central/comparison/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/widgets/calendar-modebox.js">comparison</a> |
<a href="/comm-central/log/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/widgets/calendar-modebox.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/widgets/calendar-widget-bindings.css">calendar/base/content/widgets/calendar-widget-bindings.css</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/widgets/calendar-widget-bindings.css">diff</a> |
<a href="/comm-central/comparison/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/widgets/calendar-widget-bindings.css">comparison</a> |
<a href="/comm-central/log/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/widgets/calendar-widget-bindings.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/widgets/calendar-widgets.xml">calendar/base/content/widgets/calendar-widgets.xml</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/widgets/calendar-widgets.xml">diff</a> |
<a href="/comm-central/comparison/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/widgets/calendar-widgets.xml">comparison</a> |
<a href="/comm-central/log/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/content/widgets/calendar-widgets.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/jar.mn">calendar/base/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/jar.mn">file</a> |
<a href="/comm-central/annotate/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/jar.mn">annotate</a> |
<a href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/jar.mn">diff</a> |
<a href="/comm-central/comparison/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/jar.mn">comparison</a> |
<a href="/comm-central/log/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/base/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/lightning/content/lightning-item-iframe.xul">calendar/lightning/content/lightning-item-iframe.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/lightning/content/lightning-item-iframe.xul">file</a> |
<a href="/comm-central/annotate/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/lightning/content/lightning-item-iframe.xul">annotate</a> |
<a href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/lightning/content/lightning-item-iframe.xul">diff</a> |
<a href="/comm-central/comparison/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/lightning/content/lightning-item-iframe.xul">comparison</a> |
<a href="/comm-central/log/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/lightning/content/lightning-item-iframe.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/lightning/content/messenger-overlay-sidebar.xul">calendar/lightning/content/messenger-overlay-sidebar.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/lightning/content/messenger-overlay-sidebar.xul">file</a> |
<a href="/comm-central/annotate/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/lightning/content/messenger-overlay-sidebar.xul">annotate</a> |
<a href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/lightning/content/messenger-overlay-sidebar.xul">diff</a> |
<a href="/comm-central/comparison/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/lightning/content/messenger-overlay-sidebar.xul">comparison</a> |
<a href="/comm-central/log/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/lightning/content/messenger-overlay-sidebar.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/providers/gdata/content/gdata-calendar-creation.xul">calendar/providers/gdata/content/gdata-calendar-creation.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/providers/gdata/content/gdata-calendar-creation.xul">file</a> |
<a href="/comm-central/annotate/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/providers/gdata/content/gdata-calendar-creation.xul">annotate</a> |
<a href="/comm-central/diff/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/providers/gdata/content/gdata-calendar-creation.xul">diff</a> |
<a href="/comm-central/comparison/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/providers/gdata/content/gdata-calendar-creation.xul">comparison</a> |
<a href="/comm-central/log/1879fcb9f78542071bfbed49837e53c8db1126eb/calendar/providers/gdata/content/gdata-calendar-creation.xul">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-attendees.xul</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-attendees.xul</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -2,17 +2,16 @@</span>
<a href="#l1.4"></a><span id="l1.4"> &lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l1.5"></a><span id="l1.5">    - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l1.6"></a><span id="l1.6">    - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l1.7"></a><span id="l1.7"> </span>
<a href="#l1.8"></a><span id="l1.8"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://global/skin/global.css&quot;?&gt;</span>
<a href="#l1.9"></a><span id="l1.9"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar-common/skin/calendar-attendees.css&quot;?&gt;</span>
<a href="#l1.10"></a><span id="l1.10"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar-common/skin/widgets/minimonth.css&quot;?&gt;</span>
<a href="#l1.11"></a><span id="l1.11"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/content/calendar-event-dialog.css&quot;?&gt;</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/content/widgets/calendar-widget-bindings.css&quot;?&gt;</span>
<a href="#l1.13"></a><span id="l1.13"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://lightning-common/skin/datetimepickers.css&quot;?&gt;</span>
<a href="#l1.14"></a><span id="l1.14"> </span>
<a href="#l1.15"></a><span id="l1.15"> &lt;!DOCTYPE dialog [</span>
<a href="#l1.16"></a><span id="l1.16">   &lt;!ENTITY % dtd1 SYSTEM &quot;chrome://calendar/locale/calendar.dtd&quot; &gt; %dtd1;</span>
<a href="#l1.17"></a><span id="l1.17">   &lt;!ENTITY % dtd2 SYSTEM &quot;chrome://calendar/locale/calendar-event-dialog.dtd&quot; &gt; %dtd2;</span>
<a href="#l1.18"></a><span id="l1.18"> ]&gt;</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20"> &lt;dialog id=&quot;calendar-event-dialog-attendees-v2&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-recurrence.xul</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-recurrence.xul</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -4,17 +4,16 @@</span>
<a href="#l2.4"></a><span id="l2.4">    - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l2.5"></a><span id="l2.5"> </span>
<a href="#l2.6"></a><span id="l2.6"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://global/skin/global.css&quot;?&gt;</span>
<a href="#l2.7"></a><span id="l2.7"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://messenger/content/bindings.css&quot;?&gt;</span>
<a href="#l2.8"></a><span id="l2.8"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://messenger/skin/messenger.css&quot;?&gt;</span>
<a href="#l2.9"></a><span id="l2.9"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/skin/calendar-daypicker.css&quot;?&gt;</span>
<a href="#l2.10"></a><span id="l2.10"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar-common/skin/widgets/minimonth.css&quot;?&gt;</span>
<a href="#l2.11"></a><span id="l2.11"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/skin/calendar-event-dialog.css&quot;?&gt;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/content/widgets/calendar-widget-bindings.css&quot;?&gt;</span>
<a href="#l2.13"></a><span id="l2.13"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/content/calendar-event-dialog.css&quot;?&gt;</span>
<a href="#l2.14"></a><span id="l2.14"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://lightning-common/skin/datetimepickers.css&quot;?&gt;</span>
<a href="#l2.15"></a><span id="l2.15"> </span>
<a href="#l2.16"></a><span id="l2.16"> &lt;!DOCTYPE dialog [</span>
<a href="#l2.17"></a><span id="l2.17">   &lt;!ENTITY % dialogDTD SYSTEM &quot;chrome://calendar/locale/calendar-event-dialog.dtd&quot;&gt;</span>
<a href="#l2.18"></a><span id="l2.18">   %dialogDTD;</span>
<a href="#l2.19"></a><span id="l2.19"> ]&gt;</span>
<a href="#l2.20"></a><span id="l2.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-reminder.xul</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-reminder.xul</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -4,17 +4,16 @@</span>
<a href="#l3.4"></a><span id="l3.4">    - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l3.5"></a><span id="l3.5"> </span>
<a href="#l3.6"></a><span id="l3.6"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://global/skin/global.css&quot;?&gt;</span>
<a href="#l3.7"></a><span id="l3.7"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://messenger/content/bindings.css&quot;?&gt;</span>
<a href="#l3.8"></a><span id="l3.8"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://messenger/content/notification.css&quot;?&gt;</span>
<a href="#l3.9"></a><span id="l3.9"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar-common/skin/calendar-alarms.css&quot;?&gt;</span>
<a href="#l3.10"></a><span id="l3.10"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar-common/skin/widgets/minimonth.css&quot;?&gt;</span>
<a href="#l3.11"></a><span id="l3.11"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/skin/calendar-event-dialog.css&quot;?&gt;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/content/widgets/calendar-widget-bindings.css&quot;?&gt;</span>
<a href="#l3.13"></a><span id="l3.13"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://lightning-common/skin/datetimepickers.css&quot;?&gt;</span>
<a href="#l3.14"></a><span id="l3.14"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/content/calendar-bindings.css&quot;?&gt;</span>
<a href="#l3.15"></a><span id="l3.15"> </span>
<a href="#l3.16"></a><span id="l3.16"> &lt;!DOCTYPE dialog SYSTEM &quot;chrome://calendar/locale/dialogs/calendar-event-dialog-reminder.dtd&quot; &gt;</span>
<a href="#l3.17"></a><span id="l3.17"> </span>
<a href="#l3.18"></a><span id="l3.18"> &lt;dialog id=&quot;calendar-event-dialog-reminder&quot;</span>
<a href="#l3.19"></a><span id="l3.19">         title=&quot;&amp;reminderdialog.title;&quot;</span>
<a href="#l3.20"></a><span id="l3.20">         windowtype=&quot;Calendar:EventDialog:Reminder&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-timezone.xul</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-timezone.xul</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -2,17 +2,16 @@</span>
<a href="#l4.4"></a><span id="l4.4"> &lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l4.5"></a><span id="l4.5">    - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l4.6"></a><span id="l4.6">    - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l4.7"></a><span id="l4.7"> </span>
<a href="#l4.8"></a><span id="l4.8"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://global/skin/global.css&quot;?&gt;</span>
<a href="#l4.9"></a><span id="l4.9"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/skin/calendar-event-dialog.css&quot;?&gt;</span>
<a href="#l4.10"></a><span id="l4.10"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar-common/skin/calendar-timezone-highlighter.css&quot;?&gt;</span>
<a href="#l4.11"></a><span id="l4.11"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar-common/skin/widgets/minimonth.css&quot;?&gt;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/content/widgets/calendar-widget-bindings.css&quot;?&gt;</span>
<a href="#l4.13"></a><span id="l4.13"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://lightning-common/skin/datetimepickers.css&quot;?&gt;</span>
<a href="#l4.14"></a><span id="l4.14"> </span>
<a href="#l4.15"></a><span id="l4.15"> &lt;!DOCTYPE dialog [</span>
<a href="#l4.16"></a><span id="l4.16">   &lt;!ENTITY % dtd1 SYSTEM &quot;chrome://calendar/locale/global.dtd&quot; &gt; %dtd1;</span>
<a href="#l4.17"></a><span id="l4.17">   &lt;!ENTITY % dtd2 SYSTEM &quot;chrome://calendar/locale/calendar.dtd&quot; &gt; %dtd2;</span>
<a href="#l4.18"></a><span id="l4.18">   &lt;!ENTITY % dtd3 SYSTEM &quot;chrome://calendar/locale/calendar-event-dialog.dtd&quot; &gt; %dtd3;</span>
<a href="#l4.19"></a><span id="l4.19">   &lt;!ENTITY % dtd4 SYSTEM &quot;chrome://calendar/locale/preferences/timezones.dtd&quot; &gt; %dtd4;</span>
<a href="#l4.20"></a><span id="l4.20"> ]&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog.xul</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog.xul</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -3,17 +3,16 @@</span>
<a href="#l5.4"></a><span id="l5.4">    - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l5.5"></a><span id="l5.5">    - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l5.6"></a><span id="l5.6"> </span>
<a href="#l5.7"></a><span id="l5.7"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://global/skin/global.css&quot;?&gt;</span>
<a href="#l5.8"></a><span id="l5.8"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://messenger/content/bindings.css&quot;?&gt;</span>
<a href="#l5.9"></a><span id="l5.9"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar-common/skin/calendar-alarms.css&quot;?&gt;</span>
<a href="#l5.10"></a><span id="l5.10"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar-common/skin/widgets/minimonth.css&quot;?&gt;</span>
<a href="#l5.11"></a><span id="l5.11"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar-common/skin/calendar-attendees.css&quot;?&gt;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/content/widgets/calendar-widget-bindings.css&quot;?&gt;</span>
<a href="#l5.13"></a><span id="l5.13"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/skin/calendar-event-dialog.css&quot;?&gt;</span>
<a href="#l5.14"></a><span id="l5.14"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/content/calendar-event-dialog.css&quot;?&gt;</span>
<a href="#l5.15"></a><span id="l5.15"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://messenger/skin/primaryToolbar.css&quot;?&gt;</span>
<a href="#l5.16"></a><span id="l5.16"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://messenger/skin/messenger.css&quot;?&gt;</span>
<a href="#l5.17"></a><span id="l5.17"> </span>
<a href="#l5.18"></a><span id="l5.18"> &lt;!DOCTYPE dialog [</span>
<a href="#l5.19"></a><span id="l5.19">     &lt;!ENTITY % brandDTD SYSTEM &quot;chrome://branding/locale/brand.dtd&quot;&gt;</span>
<a href="#l5.20"></a><span id="l5.20">     &lt;!ENTITY % globalDTD SYSTEM &quot;chrome://calendar/locale/global.dtd&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-print-dialog.xul</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-print-dialog.xul</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -1,17 +1,16 @@</span>
<a href="#l6.4"></a><span id="l6.4"> &lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l6.5"></a><span id="l6.5"> &lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l6.6"></a><span id="l6.6">    - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l6.7"></a><span id="l6.7">    - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l6.8"></a><span id="l6.8"> </span>
<a href="#l6.9"></a><span id="l6.9"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://global/skin/global.css&quot;?&gt;</span>
<a href="#l6.10"></a><span id="l6.10"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar-common/skin/widgets/minimonth.css&quot;?&gt;</span>
<a href="#l6.11"></a><span id="l6.11"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://messenger/skin/messenger.css&quot;?&gt;</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/content/widgets/calendar-widget-bindings.css&quot;?&gt;</span>
<a href="#l6.13"></a><span id="l6.13"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://lightning-common/skin/datetimepickers.css&quot;?&gt;</span>
<a href="#l6.14"></a><span id="l6.14"> </span>
<a href="#l6.15"></a><span id="l6.15"> &lt;!DOCTYPE dialog [</span>
<a href="#l6.16"></a><span id="l6.16">     &lt;!ENTITY % dtd1 SYSTEM &quot;chrome://calendar/locale/global.dtd&quot; &gt; %dtd1;</span>
<a href="#l6.17"></a><span id="l6.17">     &lt;!ENTITY % dtd2 SYSTEM &quot;chrome://calendar/locale/calendar.dtd&quot; &gt; %dtd2;</span>
<a href="#l6.18"></a><span id="l6.18"> ]&gt;</span>
<a href="#l6.19"></a><span id="l6.19"> </span>
<a href="#l6.20"></a><span id="l6.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-providerUninstall-dialog.xul</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-providerUninstall-dialog.xul</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -1,16 +1,15 @@</span>
<a href="#l7.4"></a><span id="l7.4"> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<a href="#l7.5"></a><span id="l7.5"> &lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l7.6"></a><span id="l7.6">    - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l7.7"></a><span id="l7.7">    - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l7.8"></a><span id="l7.8"> </span>
<a href="#l7.9"></a><span id="l7.9"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://global/skin/global.css&quot;?&gt;</span>
<a href="#l7.10"></a><span id="l7.10"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar-common/skin/calendar-providerUninstall-dialog.css&quot;?&gt;</span>
<a href="#l7.11"></a><span id="l7.11" class="difflineminus">-&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/content/widgets/calendar-widget-bindings.css&quot;?&gt;</span>
<a href="#l7.12"></a><span id="l7.12"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/skin/calendar-management.css&quot;?&gt;</span>
<a href="#l7.13"></a><span id="l7.13"> </span>
<a href="#l7.14"></a><span id="l7.14"> &lt;!DOCTYPE dialog SYSTEM &quot;chrome://calendar/locale/provider-uninstall.dtd&quot; &gt;</span>
<a href="#l7.15"></a><span id="l7.15"> </span>
<a href="#l7.16"></a><span id="l7.16"> &lt;dialog id=&quot;calendar-provider-uninstall-dialog&quot;</span>
<a href="#l7.17"></a><span id="l7.17">         xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot; xmlns:html=&quot;http://www.w3.org/1999/xhtml&quot;</span>
<a href="#l7.18"></a><span id="l7.18">         title=&quot;&amp;providerUninstall.title;&quot;</span>
<a href="#l7.19"></a><span id="l7.19">         windowtype=&quot;Calendar:ProviderUninstall&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/base/content/today-pane.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/base/content/today-pane.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -418,17 +418,17 @@ var TodayPane = {</span>
<a href="#l8.4"></a><span id="l8.4">     onModeModified: function(aEvent) {</span>
<a href="#l8.5"></a><span id="l8.5">         if (aEvent.attrName == &quot;mode&quot;) {</span>
<a href="#l8.6"></a><span id="l8.6">             let todaypane = document.getElementById(&quot;today-pane-panel&quot;);</span>
<a href="#l8.7"></a><span id="l8.7">             // Store the previous mode panel's width.</span>
<a href="#l8.8"></a><span id="l8.8">             todaypane.setModeAttribute(&quot;modewidths&quot;, todaypane.width, TodayPane.previousMode);</span>
<a href="#l8.9"></a><span id="l8.9"> </span>
<a href="#l8.10"></a><span id="l8.10">             TodayPane.updateDisplay();</span>
<a href="#l8.11"></a><span id="l8.11">             TodayPane.updateSplitterState();</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-            todaypane.width = todaypane.getModeAttribute(&quot;modewidths&quot;, &quot;width&quot;);</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+            todaypane.width = todaypane.getModeAttribute(&quot;modewidths&quot;);</span>
<a href="#l8.14"></a><span id="l8.14">             TodayPane.previousMode = document.getElementById(&quot;modeBroadcaster&quot;).getAttribute(&quot;mode&quot;);</span>
<a href="#l8.15"></a><span id="l8.15">         }</span>
<a href="#l8.16"></a><span id="l8.16">     },</span>
<a href="#l8.17"></a><span id="l8.17"> </span>
<a href="#l8.18"></a><span id="l8.18">     get isVisible() {</span>
<a href="#l8.19"></a><span id="l8.19">         return document.getElementById(&quot;today-pane-panel&quot;).isVisible();</span>
<a href="#l8.20"></a><span id="l8.20">     },</span>
<a href="#l8.21"></a><span id="l8.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/base/content/today-pane.xul</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/base/content/today-pane.xul</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -8,82 +8,85 @@</span>
<a href="#l9.4"></a><span id="l9.4">   &lt;!ENTITY % dtd2 SYSTEM &quot;chrome://lightning/locale/lightning.dtd&quot; &gt; %dtd2;</span>
<a href="#l9.5"></a><span id="l9.5">   &lt;!ENTITY % dtd3 SYSTEM &quot;chrome://messenger/locale/messenger.dtd&quot; &gt; %dtd3;</span>
<a href="#l9.6"></a><span id="l9.6">   &lt;!ENTITY % dtd4 SYSTEM &quot;chrome://calendar/locale/calendar.dtd&quot; &gt; %dtd4;</span>
<a href="#l9.7"></a><span id="l9.7">   &lt;!ENTITY % dtd5 SYSTEM &quot;chrome://global/locale/global.dtd&quot; &gt; %dtd5;</span>
<a href="#l9.8"></a><span id="l9.8">   &lt;!ENTITY % dtd6 SYSTEM &quot;chrome://calendar/locale/calendar-event-dialog.dtd&quot;&gt; %dtd6;</span>
<a href="#l9.9"></a><span id="l9.9"> ]&gt;</span>
<a href="#l9.10"></a><span id="l9.10"> </span>
<a href="#l9.11"></a><span id="l9.11"> &lt;?xml-stylesheet href=&quot;chrome://calendar/skin/today-pane.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-&lt;?xml-stylesheet href=&quot;chrome://calendar/content/widgets/calendar-widget-bindings.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l9.13"></a><span id="l9.13"> </span>
<a href="#l9.14"></a><span id="l9.14"> &lt;overlay xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot; xmlns:html=&quot;http://www.w3.org/1999/xhtml&quot;&gt;</span>
<a href="#l9.15"></a><span id="l9.15"> </span>
<a href="#l9.16"></a><span id="l9.16">   &lt;script src=&quot;chrome://calendar/content/agenda-listbox.js&quot;/&gt;</span>
<a href="#l9.17"></a><span id="l9.17">   &lt;script src=&quot;chrome://calendar/content/today-pane.js&quot;/&gt;</span>
<a href="#l9.18"></a><span id="l9.18">   &lt;script src=&quot;chrome://calendar/content/agenda-listbox-utils.js&quot;/&gt;</span>
<a href="#l9.19"></a><span id="l9.19">   &lt;script src=&quot;chrome://calendar/content/calendar-management.js&quot;/&gt;</span>
<a href="#l9.20"></a><span id="l9.20">   &lt;script src=&quot;chrome://calendar/content/calendar-dnd-listener.js&quot;/&gt;</span>
<a href="#l9.21"></a><span id="l9.21">   &lt;script src=&quot;chrome://calendar/content/calendar-item-editing.js&quot;/&gt;</span>
<a href="#l9.22"></a><span id="l9.22"> </span>
<a href="#l9.23"></a><span id="l9.23" class="difflineminus">-  &lt;modevbox id=&quot;today-pane-panel&quot;</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineminus">-            mode=&quot;mail,calendar,task&quot; modewidths=&quot;200,200,200&quot; modesplitterstates=&quot;open,open,open&quot;</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineminus">-            refcontrol=&quot;calendar_toggle_todaypane_command&quot;</span>
<a href="#l9.26"></a><span id="l9.26" class="difflineminus">-            broadcaster=&quot;modeBroadcaster&quot; persist=&quot;modewidths&quot;&gt;</span>
<a href="#l9.27"></a><span id="l9.27" class="difflineplus">+  &lt;calendar-modevbox id=&quot;today-pane-panel&quot;</span>
<a href="#l9.28"></a><span id="l9.28" class="difflineplus">+                     mode=&quot;mail,calendar,task&quot;</span>
<a href="#l9.29"></a><span id="l9.29" class="difflineplus">+                     modewidths=&quot;200,200,200&quot;</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineplus">+                     modesplitterstates=&quot;open,open,open&quot;</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineplus">+                     refcontrol=&quot;calendar_toggle_todaypane_command&quot;</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+                     broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineplus">+                     persist=&quot;modewidths&quot;&gt;</span>
<a href="#l9.34"></a><span id="l9.34">     &lt;sidebarheader align=&quot;center&quot;&gt;</span>
<a href="#l9.35"></a><span id="l9.35">       &lt;label id =&quot;today-pane-header&quot;/&gt;</span>
<a href="#l9.36"></a><span id="l9.36">       &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l9.37"></a><span id="l9.37" class="difflineminus">-      &lt;modebox mode=&quot;mail,calendar&quot; broadcaster=&quot;modeBroadcaster&quot;&gt;</span>
<a href="#l9.38"></a><span id="l9.38" class="difflineplus">+      &lt;calendar-modebox mode=&quot;mail,calendar&quot;</span>
<a href="#l9.39"></a><span id="l9.39" class="difflineplus">+                        broadcaster=&quot;modeBroadcaster&quot;&gt;</span>
<a href="#l9.40"></a><span id="l9.40">         &lt;toolbarbutton id=&quot;today-pane-cycler-prev&quot;</span>
<a href="#l9.41"></a><span id="l9.41">                        dir=&quot;prev&quot;</span>
<a href="#l9.42"></a><span id="l9.42">                        class=&quot;today-pane-cycler&quot;</span>
<a href="#l9.43"></a><span id="l9.43">                        oncommand=&quot;TodayPane.cyclePaneView(-1);&quot;/&gt;</span>
<a href="#l9.44"></a><span id="l9.44">         &lt;toolbarbutton id=&quot;today-pane-cycler-next&quot;</span>
<a href="#l9.45"></a><span id="l9.45">                        dir=&quot;next&quot;</span>
<a href="#l9.46"></a><span id="l9.46">                        class=&quot;today-pane-cycler&quot;</span>
<a href="#l9.47"></a><span id="l9.47">                        oncommand=&quot;TodayPane.cyclePaneView(1);&quot;/&gt;</span>
<a href="#l9.48"></a><span id="l9.48" class="difflineminus">-      &lt;/modebox&gt;</span>
<a href="#l9.49"></a><span id="l9.49" class="difflineplus">+      &lt;/calendar-modebox&gt;</span>
<a href="#l9.50"></a><span id="l9.50">       &lt;spacer id=&quot;buttonspacer&quot;/&gt;</span>
<a href="#l9.51"></a><span id="l9.51">       &lt;toolbarbutton id=&quot;today-closer&quot; class=&quot;today-closebutton close-icon&quot;</span>
<a href="#l9.52"></a><span id="l9.52">                      oncommand=&quot;document.getElementById('today-pane-panel').setVisible(false, true, true);</span>
<a href="#l9.53"></a><span id="l9.53">                                 TodayPane.updateDisplay();</span>
<a href="#l9.54"></a><span id="l9.54">                                 TodayPane.updateSplitterState();&quot;/&gt;</span>
<a href="#l9.55"></a><span id="l9.55">     &lt;/sidebarheader&gt;</span>
<a href="#l9.56"></a><span id="l9.56">     &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l9.57"></a><span id="l9.57" class="difflineminus">-      &lt;modevbox id=&quot;agenda-panel&quot;</span>
<a href="#l9.58"></a><span id="l9.58" class="difflineminus">-                flex=&quot;1&quot;</span>
<a href="#l9.59"></a><span id="l9.59" class="difflineminus">-                mode=&quot;mail,calendar,task&quot;</span>
<a href="#l9.60"></a><span id="l9.60" class="difflineminus">-                collapsedinmodes=&quot;calendar&quot;</span>
<a href="#l9.61"></a><span id="l9.61" class="difflineminus">-                persist=&quot;collapsed height collapsedinmodes&quot;</span>
<a href="#l9.62"></a><span id="l9.62" class="difflineminus">-                broadcaster=&quot;modeBroadcaster&quot;&gt;</span>
<a href="#l9.63"></a><span id="l9.63" class="difflineminus">-        &lt;modebox id=&quot;today-none-box&quot;</span>
<a href="#l9.64"></a><span id="l9.64" class="difflineminus">-                 mode=&quot;mail,calendar,task&quot;</span>
<a href="#l9.65"></a><span id="l9.65" class="difflineminus">-                 collapsedinmodes=&quot;mail,calendar,task&quot;</span>
<a href="#l9.66"></a><span id="l9.66" class="difflineminus">-                 broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l9.67"></a><span id="l9.67" class="difflineminus">-                 refcontrol=&quot;ltnTodayPaneDisplayNone&quot;</span>
<a href="#l9.68"></a><span id="l9.68" class="difflineminus">-                 persist=&quot;collapsedinmodes&quot;/&gt;</span>
<a href="#l9.69"></a><span id="l9.69" class="difflineminus">-        &lt;modebox id=&quot;today-minimonth-box&quot;</span>
<a href="#l9.70"></a><span id="l9.70" class="difflineminus">-                  pack=&quot;center&quot;</span>
<a href="#l9.71"></a><span id="l9.71" class="difflineminus">-                  class=&quot;today-subpane&quot;</span>
<a href="#l9.72"></a><span id="l9.72" class="difflineminus">-                  mode=&quot;mail,calendar,task&quot;</span>
<a href="#l9.73"></a><span id="l9.73" class="difflineminus">-                  broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l9.74"></a><span id="l9.74" class="difflineminus">-                  collapsedinmodes=&quot;mail,calendar,task&quot;</span>
<a href="#l9.75"></a><span id="l9.75" class="difflineminus">-                  refcontrol=&quot;ltnTodayPaneDisplayMinimonth&quot;</span>
<a href="#l9.76"></a><span id="l9.76" class="difflineminus">-                  persist=&quot;collapsedinmodes&quot;&gt;</span>
<a href="#l9.77"></a><span id="l9.77" class="difflineplus">+      &lt;calendar-modevbox id=&quot;agenda-panel&quot;</span>
<a href="#l9.78"></a><span id="l9.78" class="difflineplus">+                         flex=&quot;1&quot;</span>
<a href="#l9.79"></a><span id="l9.79" class="difflineplus">+                         mode=&quot;mail,calendar,task&quot;</span>
<a href="#l9.80"></a><span id="l9.80" class="difflineplus">+                         collapsedinmodes=&quot;calendar&quot;</span>
<a href="#l9.81"></a><span id="l9.81" class="difflineplus">+                         persist=&quot;collapsed height collapsedinmodes&quot;</span>
<a href="#l9.82"></a><span id="l9.82" class="difflineplus">+                         broadcaster=&quot;modeBroadcaster&quot;&gt;</span>
<a href="#l9.83"></a><span id="l9.83" class="difflineplus">+        &lt;calendar-modebox id=&quot;today-none-box&quot;</span>
<a href="#l9.84"></a><span id="l9.84" class="difflineplus">+                          mode=&quot;mail,calendar,task&quot;</span>
<a href="#l9.85"></a><span id="l9.85" class="difflineplus">+                          collapsedinmodes=&quot;mail,calendar,task&quot;</span>
<a href="#l9.86"></a><span id="l9.86" class="difflineplus">+                          broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l9.87"></a><span id="l9.87" class="difflineplus">+                          refcontrol=&quot;ltnTodayPaneDisplayNone&quot;</span>
<a href="#l9.88"></a><span id="l9.88" class="difflineplus">+                          persist=&quot;collapsedinmodes&quot;/&gt;</span>
<a href="#l9.89"></a><span id="l9.89" class="difflineplus">+        &lt;calendar-modebox id=&quot;today-minimonth-box&quot;</span>
<a href="#l9.90"></a><span id="l9.90" class="difflineplus">+                          pack=&quot;center&quot;</span>
<a href="#l9.91"></a><span id="l9.91" class="difflineplus">+                          class=&quot;today-subpane&quot;</span>
<a href="#l9.92"></a><span id="l9.92" class="difflineplus">+                          mode=&quot;mail,calendar,task&quot;</span>
<a href="#l9.93"></a><span id="l9.93" class="difflineplus">+                          broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l9.94"></a><span id="l9.94" class="difflineplus">+                          collapsedinmodes=&quot;mail,calendar,task&quot;</span>
<a href="#l9.95"></a><span id="l9.95" class="difflineplus">+                          refcontrol=&quot;ltnTodayPaneDisplayMinimonth&quot;</span>
<a href="#l9.96"></a><span id="l9.96" class="difflineplus">+                          persist=&quot;collapsedinmodes&quot;&gt;</span>
<a href="#l9.97"></a><span id="l9.97">           &lt;calendar-minimonth id=&quot;today-minimonth&quot;</span>
<a href="#l9.98"></a><span id="l9.98">                               onchange=&quot;TodayPane.setDaywithjsDate(this.value);&quot;/&gt;</span>
<a href="#l9.99"></a><span id="l9.99" class="difflineminus">-        &lt;/modebox&gt;</span>
<a href="#l9.100"></a><span id="l9.100" class="difflineminus">-        &lt;modebox id=&quot;mini-day-box&quot;</span>
<a href="#l9.101"></a><span id="l9.101" class="difflineminus">-                 mode=&quot;mail,calendar,task&quot;</span>
<a href="#l9.102"></a><span id="l9.102" class="difflineminus">-                 class=&quot;today-subpane&quot;</span>
<a href="#l9.103"></a><span id="l9.103" class="difflineminus">-                 refcontrol=&quot;ltnTodayPaneDisplayMiniday&quot;</span>
<a href="#l9.104"></a><span id="l9.104" class="difflineminus">-                 broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l9.105"></a><span id="l9.105" class="difflineminus">-                 collapsedinmodes=&quot;&quot;</span>
<a href="#l9.106"></a><span id="l9.106" class="difflineminus">-                 persist=&quot;collapsedinmodes&quot;</span>
<a href="#l9.107"></a><span id="l9.107" class="difflineminus">-                 onDOMMouseScroll=&quot;TodayPane.advance(event.detail &gt; 0 ? 1 : -1);&quot;&gt;</span>
<a href="#l9.108"></a><span id="l9.108" class="difflineplus">+        &lt;/calendar-modebox&gt;</span>
<a href="#l9.109"></a><span id="l9.109" class="difflineplus">+        &lt;calendar-modebox id=&quot;mini-day-box&quot;</span>
<a href="#l9.110"></a><span id="l9.110" class="difflineplus">+                          mode=&quot;mail,calendar,task&quot;</span>
<a href="#l9.111"></a><span id="l9.111" class="difflineplus">+                          class=&quot;today-subpane&quot;</span>
<a href="#l9.112"></a><span id="l9.112" class="difflineplus">+                          refcontrol=&quot;ltnTodayPaneDisplayMiniday&quot;</span>
<a href="#l9.113"></a><span id="l9.113" class="difflineplus">+                          broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l9.114"></a><span id="l9.114" class="difflineplus">+                          collapsedinmodes=&quot;&quot;</span>
<a href="#l9.115"></a><span id="l9.115" class="difflineplus">+                          persist=&quot;collapsedinmodes&quot;</span>
<a href="#l9.116"></a><span id="l9.116" class="difflineplus">+                          onDOMMouseScroll=&quot;TodayPane.advance(event.detail &gt; 0 ? 1 : -1);&quot;&gt;</span>
<a href="#l9.117"></a><span id="l9.117">           &lt;stack flex=&quot;1&quot;&gt;</span>
<a href="#l9.118"></a><span id="l9.118">             &lt;image id=&quot;mini-day-image&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l9.119"></a><span id="l9.119">             &lt;hbox flex=&quot;1&quot;&gt;</span>
<a href="#l9.120"></a><span id="l9.120">               &lt;stack id=&quot;dateContainer&quot;&gt;</span>
<a href="#l9.121"></a><span id="l9.121">                 &lt;hbox pack=&quot;center&quot;</span>
<a href="#l9.122"></a><span id="l9.122">                       align=&quot;center&quot;&gt;</span>
<a href="#l9.123"></a><span id="l9.123">                   &lt;label id=&quot;datevalue-label&quot; class=&quot;dateValue&quot;</span>
<a href="#l9.124"></a><span id="l9.124">                          ondblclick=&quot;TodayPane.onDoubleClick(event);&quot;</span>
<a href="#l9.125"></a><span id="l9.125" class="difflineat">@@ -139,17 +142,17 @@</span>
<a href="#l9.126"></a><span id="l9.126">                   &lt;calendar-minimonth id=&quot;miniday-dropdown-minimonth&quot;</span>
<a href="#l9.127"></a><span id="l9.127">                                       flex=&quot;1&quot;</span>
<a href="#l9.128"></a><span id="l9.128">                                       onchange=&quot;TodayPane.setDaywithjsDate(this.value);</span>
<a href="#l9.129"></a><span id="l9.129">                                                 document.getElementById('miniday-month-panel').hidePopup();&quot;/&gt;</span>
<a href="#l9.130"></a><span id="l9.130">                 &lt;/panel&gt;</span>
<a href="#l9.131"></a><span id="l9.131">               &lt;/toolbarbutton&gt;</span>
<a href="#l9.132"></a><span id="l9.132">             &lt;/hbox&gt;</span>
<a href="#l9.133"></a><span id="l9.133">           &lt;/stack&gt;</span>
<a href="#l9.134"></a><span id="l9.134" class="difflineminus">-        &lt;/modebox&gt;</span>
<a href="#l9.135"></a><span id="l9.135" class="difflineplus">+        &lt;/calendar-modebox&gt;</span>
<a href="#l9.136"></a><span id="l9.136">         &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l9.137"></a><span id="l9.137">           &lt;hbox id=&quot;agenda-toolbar&quot; iconsize=&quot;small&quot;&gt;</span>
<a href="#l9.138"></a><span id="l9.138">             &lt;toolbarbutton id=&quot;todaypane-new-event-button&quot;</span>
<a href="#l9.139"></a><span id="l9.139">                            mode=&quot;mail&quot;</span>
<a href="#l9.140"></a><span id="l9.140">                            iconsize=&quot;small&quot;</span>
<a href="#l9.141"></a><span id="l9.141">                            orient=&quot;horizontal&quot;</span>
<a href="#l9.142"></a><span id="l9.142">                            label=&quot;&amp;calendar.newevent.button.label;&quot;</span>
<a href="#l9.143"></a><span id="l9.143">                            tooltiptext=&quot;&amp;calendar.newevent.button.tooltip;&quot;</span>
<a href="#l9.144"></a><span id="l9.144" class="difflineat">@@ -364,24 +367,26 @@</span>
<a href="#l9.145"></a><span id="l9.145">                           persist=&quot;checked&quot;/&gt;</span>
<a href="#l9.146"></a><span id="l9.146">             &lt;richlistitem is=&quot;agenda-header-richlist-item&quot; id=&quot;nextweek-header&quot;</span>
<a href="#l9.147"></a><span id="l9.147">                           class=&quot;agenda-header-richlist-item&quot;</span>
<a href="#l9.148"></a><span id="l9.148">                           title=&quot;&amp;calendar.upcoming.button.label;&quot;</span>
<a href="#l9.149"></a><span id="l9.149">                           checked=&quot;false&quot;</span>
<a href="#l9.150"></a><span id="l9.150">                           persist=&quot;checked&quot;/&gt;</span>
<a href="#l9.151"></a><span id="l9.151">           &lt;/richlistbox&gt;</span>
<a href="#l9.152"></a><span id="l9.152">         &lt;/vbox&gt;</span>
<a href="#l9.153"></a><span id="l9.153" class="difflineminus">-      &lt;/modevbox&gt;</span>
<a href="#l9.154"></a><span id="l9.154" class="difflineplus">+      &lt;/calendar-modevbox&gt;</span>
<a href="#l9.155"></a><span id="l9.155">       &lt;splitter id=&quot;today-pane-splitter&quot; persist=&quot;hidden&quot;/&gt;</span>
<a href="#l9.156"></a><span id="l9.156" class="difflineminus">-      &lt;modevbox id=&quot;todo-tab-panel&quot; flex=&quot;1&quot; mode=&quot;mail,calendar&quot;</span>
<a href="#l9.157"></a><span id="l9.157" class="difflineminus">-                collapsedinmodes=&quot;mail,task&quot;</span>
<a href="#l9.158"></a><span id="l9.158" class="difflineminus">-                broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l9.159"></a><span id="l9.159" class="difflineminus">-                persist=&quot;height collapsedinmodes&quot;</span>
<a href="#l9.160"></a><span id="l9.160" class="difflineminus">-                ondragstart=&quot;nsDragAndDrop.startDrag(event, calendarTaskButtonDNDObserver);&quot;</span>
<a href="#l9.161"></a><span id="l9.161" class="difflineminus">-                ondragover=&quot;nsDragAndDrop.dragOver(event, calendarTaskButtonDNDObserver);&quot;</span>
<a href="#l9.162"></a><span id="l9.162" class="difflineminus">-                ondrop=&quot;nsDragAndDrop.drop(event, calendarTaskButtonDNDObserver);&quot;/&gt;</span>
<a href="#l9.163"></a><span id="l9.163" class="difflineplus">+      &lt;calendar-modevbox id=&quot;todo-tab-panel&quot;</span>
<a href="#l9.164"></a><span id="l9.164" class="difflineplus">+                         flex=&quot;1&quot;</span>
<a href="#l9.165"></a><span id="l9.165" class="difflineplus">+                         mode=&quot;mail,calendar&quot;</span>
<a href="#l9.166"></a><span id="l9.166" class="difflineplus">+                         collapsedinmodes=&quot;mail,task&quot;</span>
<a href="#l9.167"></a><span id="l9.167" class="difflineplus">+                         broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l9.168"></a><span id="l9.168" class="difflineplus">+                         persist=&quot;height collapsedinmodes&quot;</span>
<a href="#l9.169"></a><span id="l9.169" class="difflineplus">+                         ondragstart=&quot;nsDragAndDrop.startDrag(event, calendarTaskButtonDNDObserver);&quot;</span>
<a href="#l9.170"></a><span id="l9.170" class="difflineplus">+                         ondragover=&quot;nsDragAndDrop.dragOver(event, calendarTaskButtonDNDObserver);&quot;</span>
<a href="#l9.171"></a><span id="l9.171" class="difflineplus">+                         ondrop=&quot;nsDragAndDrop.drop(event, calendarTaskButtonDNDObserver);&quot;/&gt;</span>
<a href="#l9.172"></a><span id="l9.172">     &lt;/vbox&gt;</span>
<a href="#l9.173"></a><span id="l9.173" class="difflineminus">-  &lt;/modevbox&gt;</span>
<a href="#l9.174"></a><span id="l9.174" class="difflineplus">+  &lt;/calendar-modevbox&gt;</span>
<a href="#l9.175"></a><span id="l9.175"> </span>
<a href="#l9.176"></a><span id="l9.176">   &lt;commandset id=&quot;calendar_commands&quot;&gt;</span>
<a href="#l9.177"></a><span id="l9.177">     &lt;command id=&quot;calendar_toggle_todaypane_command&quot; oncommand=&quot;TodayPane.toggleVisibility(event)&quot;/&gt;</span>
<a href="#l9.178"></a><span id="l9.178">   &lt;/commandset&gt;</span>
<a href="#l9.179"></a><span id="l9.179"> &lt;/overlay&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1">rename from calendar/base/content/widgets/calendar-widgets.xml</span>
<a href="#l10.2"></a><span id="l10.2">rename to calendar/base/content/widgets/calendar-modebox.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineminus">--- a/calendar/base/content/widgets/calendar-widgets.xml</span>
<a href="#l10.4"></a><span id="l10.4" class="difflineplus">+++ b/calendar/base/content/widgets/calendar-modebox.js</span>
<a href="#l10.5"></a><span id="l10.5" class="difflineat">@@ -1,247 +1,292 @@</span>
<a href="#l10.6"></a><span id="l10.6" class="difflineminus">-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<a href="#l10.7"></a><span id="l10.7" class="difflineminus">-&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l10.8"></a><span id="l10.8" class="difflineminus">-   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l10.9"></a><span id="l10.9" class="difflineminus">-   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l10.10"></a><span id="l10.10" class="difflineplus">+/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l10.11"></a><span id="l10.11" class="difflineplus">+  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineplus">+  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l10.13"></a><span id="l10.13"> </span>
<a href="#l10.14"></a><span id="l10.14" class="difflineminus">-&lt;!-- import-globals-from ../calendar-ui-utils.js --&gt;</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineminus">-&lt;!-- import-globals-from ../calendar-views-utils.js --&gt;</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l10.17"></a><span id="l10.17"> </span>
<a href="#l10.18"></a><span id="l10.18" class="difflineminus">-&lt;!DOCTYPE dialog [</span>
<a href="#l10.19"></a><span id="l10.19" class="difflineminus">-  &lt;!ENTITY % dtd1 SYSTEM &quot;chrome://global/locale/global.dtd&quot; &gt; %dtd1;</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineminus">-  &lt;!ENTITY % dtd2 SYSTEM &quot;chrome://calendar/locale/calendar-event-dialog.dtd&quot;&gt; %dtd2;</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineminus">-]&gt;</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineplus">+/* globals MozXULElement setBooleanAttribute */</span>
<a href="#l10.23"></a><span id="l10.23"> </span>
<a href="#l10.24"></a><span id="l10.24" class="difflineminus">-&lt;bindings id=&quot;calendar-widgets&quot;</span>
<a href="#l10.25"></a><span id="l10.25" class="difflineminus">-          xmlns=&quot;http://www.mozilla.org/xbl&quot;</span>
<a href="#l10.26"></a><span id="l10.26" class="difflineminus">-          xmlns:xul=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l10.27"></a><span id="l10.27" class="difflineminus">-          xmlns:xbl=&quot;http://www.mozilla.org/xbl&quot;&gt;</span>
<a href="#l10.28"></a><span id="l10.28" class="difflineplus">+// Wrap in a block to prevent leaking to window scope.</span>
<a href="#l10.29"></a><span id="l10.29" class="difflineplus">+{</span>
<a href="#l10.30"></a><span id="l10.30" class="difflineplus">+    let { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l10.31"></a><span id="l10.31"> </span>
<a href="#l10.32"></a><span id="l10.32" class="difflineminus">-  &lt;!-- this binding directly extends to a xul:box element and enriches this with some functionality: It is designed</span>
<a href="#l10.33"></a><span id="l10.33" class="difflineminus">-      to be displayed only 1) in given application modes (e.g &quot;task&quot; mode, &quot;calendar&quot; mode) and 2) only in relation</span>
<a href="#l10.34"></a><span id="l10.34" class="difflineminus">-      to the &quot;checked&quot; attribute of command or a checkbox control.</span>
<a href="#l10.35"></a><span id="l10.35" class="difflineminus">-    - The attribute &quot;mode&quot; denotes a coma-separated list of all modes that the binding should not be collapsed in,</span>
<a href="#l10.36"></a><span id="l10.36" class="difflineminus">-      e.g. mode=&quot;calendar,task&quot;</span>
<a href="#l10.37"></a><span id="l10.37" class="difflineminus">-    - The attribute &quot;broadcaster&quot; points to the id of a broadcaster that is supposed to be notified (by the application)</span>
<a href="#l10.38"></a><span id="l10.38" class="difflineminus">-      as soon as the mode changes. When this happens the modebox&quot; will be notified and will check if it should</span>
<a href="#l10.39"></a><span id="l10.39" class="difflineminus">-      collapse itself or not.</span>
<a href="#l10.40"></a><span id="l10.40" class="difflineminus">-    - The attribute &quot;refcontrol&quot; points to a control either a &quot;command&quot;, &quot;checkbox&quot; or other</span>
<a href="#l10.41"></a><span id="l10.41" class="difflineminus">-      elements that support a &quot;checked&quot; attribute that is often used to denote whether a modebox is supposed to be</span>
<a href="#l10.42"></a><span id="l10.42" class="difflineminus">-      displayed or not. If &quot;refcontrol&quot; is set to the id of a command you can there set the oncommend attribute like:</span>
<a href="#l10.43"></a><span id="l10.43" class="difflineminus">-      &quot;oncommand='document.getElementById('my-mode-pane').togglePane(event)'. In case it is a checkbox element or derived</span>
<a href="#l10.44"></a><span id="l10.44" class="difflineminus">-      checkbox element this is done automatically by listening to the event &quot;CheckboxChange&quot;;</span>
<a href="#l10.45"></a><span id="l10.45" class="difflineminus">-      So if the current application mode is one of the modes listed in the &quot;mode&quot; attribute it is</span>
<a href="#l10.46"></a><span id="l10.46" class="difflineminus">-      additionally verified if the xul-element denoted by &quot;refcontrol&quot; is checked or not. During runtime an attribute named</span>
<a href="#l10.47"></a><span id="l10.47" class="difflineminus">-      &quot;collapsedinmodes&quot; with the collpsed modes comma-separated e.g. &quot;mail,calendar,task. This attribute is also made</span>
<a href="#l10.48"></a><span id="l10.48" class="difflineminus">-      persistent--&gt;</span>
<a href="#l10.49"></a><span id="l10.49" class="difflineminus">-  &lt;binding id=&quot;modebox&quot;&gt;</span>
<a href="#l10.50"></a><span id="l10.50" class="difflineminus">-    &lt;implementation&gt;</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineminus">-      &lt;field name=&quot;mBroadcaster&quot;&gt;null&lt;/field&gt;;</span>
<a href="#l10.52"></a><span id="l10.52" class="difflineminus">-      &lt;field name=&quot;mModHandler&quot;&gt;null&lt;/field&gt;;</span>
<a href="#l10.53"></a><span id="l10.53" class="difflineminus">-      &lt;field name=&quot;mRefControl&quot;&gt;null&lt;/field&gt;;</span>
<a href="#l10.54"></a><span id="l10.54" class="difflineminus">-      &lt;field name=&quot;mControlHandler&quot;&gt;null&lt;/field&gt;;</span>
<a href="#l10.55"></a><span id="l10.55" class="difflineplus">+    /**</span>
<a href="#l10.56"></a><span id="l10.56" class="difflineplus">+     * A calendar-modebox directly extends to a xul:box element with extra functionality. Like a</span>
<a href="#l10.57"></a><span id="l10.57" class="difflineplus">+     * xul:hbox it has a horizontal orientation. It is designed to be displayed only:</span>
<a href="#l10.58"></a><span id="l10.58" class="difflineplus">+     * 1) in given application modes (e.g &quot;task&quot; mode, &quot;calendar&quot; mode) and</span>
<a href="#l10.59"></a><span id="l10.59" class="difflineplus">+     * 2) only in relation to the &quot;checked&quot; attribute of a control (e.g. a command or checkbox).</span>
<a href="#l10.60"></a><span id="l10.60" class="difflineplus">+     *</span>
<a href="#l10.61"></a><span id="l10.61" class="difflineplus">+     * - The attribute &quot;mode&quot; denotes a comma-separated list of all modes that the modebox should</span>
<a href="#l10.62"></a><span id="l10.62" class="difflineplus">+     *   not be collapsed in, e.g. `mode=&quot;calendar,task&quot;`.</span>
<a href="#l10.63"></a><span id="l10.63" class="difflineplus">+     * - The attribute &quot;broadcaster&quot; points to the id of a broadcaster that is supposed to be</span>
<a href="#l10.64"></a><span id="l10.64" class="difflineplus">+     *   notified (by the application) as soon as the mode changes. When this happens the modebox</span>
<a href="#l10.65"></a><span id="l10.65" class="difflineplus">+     *   will be notified and then either will or won't collapse itself.</span>
<a href="#l10.66"></a><span id="l10.66" class="difflineplus">+     * - The attribute &quot;refcontrol&quot; points to a control, either a &quot;command&quot;, &quot;checkbox&quot; or other</span>
<a href="#l10.67"></a><span id="l10.67" class="difflineplus">+     *   elements that support a &quot;checked&quot; attribute, that is often used to denote whether a</span>
<a href="#l10.68"></a><span id="l10.68" class="difflineplus">+     *   modebox should be displayed or not. If &quot;refcontrol&quot; is set to the id of a command you</span>
<a href="#l10.69"></a><span id="l10.69" class="difflineplus">+     *   can there set the oncommand attribute like:</span>
<a href="#l10.70"></a><span id="l10.70" class="difflineplus">+     *   `oncommand='document.getElementById('my-mode-pane').togglePane(event)`.</span>
<a href="#l10.71"></a><span id="l10.71" class="difflineplus">+     *   In case it is a checkbox element or derived checkbox element this is done automatically</span>
<a href="#l10.72"></a><span id="l10.72" class="difflineplus">+     *   by listening to the event &quot;CheckboxChange&quot;. So if the current application mode is one of</span>
<a href="#l10.73"></a><span id="l10.73" class="difflineplus">+     *   the modes listed in the &quot;mode&quot; attribute it is additionally verified whether the element</span>
<a href="#l10.74"></a><span id="l10.74" class="difflineplus">+     *   denoted by &quot;refcontrol&quot; is checked or not.</span>
<a href="#l10.75"></a><span id="l10.75" class="difflineplus">+     * - The attribute &quot;collapsedinmodes&quot; is a comma-separated list of the modes the modebox</span>
<a href="#l10.76"></a><span id="l10.76" class="difflineplus">+     *   should be collapsed in (e.g. &quot;mail,calendar&quot;).  For example, if the user collapses a</span>
<a href="#l10.77"></a><span id="l10.77" class="difflineplus">+     *   modebox when in a given mode, that mode would be added to &quot;collapsedinmodes&quot;. This</span>
<a href="#l10.78"></a><span id="l10.78" class="difflineplus">+     *   attribute is made persistent across restarts.</span>
<a href="#l10.79"></a><span id="l10.79" class="difflineplus">+     *</span>
<a href="#l10.80"></a><span id="l10.80" class="difflineplus">+     * @extends {MozXULElement}</span>
<a href="#l10.81"></a><span id="l10.81" class="difflineplus">+     */</span>
<a href="#l10.82"></a><span id="l10.82" class="difflineplus">+    class CalendarModebox extends MozXULElement {</span>
<a href="#l10.83"></a><span id="l10.83" class="difflineplus">+        connectedCallback() {</span>
<a href="#l10.84"></a><span id="l10.84" class="difflineplus">+            if (this.delayConnectedCallback()) {</span>
<a href="#l10.85"></a><span id="l10.85" class="difflineplus">+                return;</span>
<a href="#l10.86"></a><span id="l10.86" class="difflineplus">+            }</span>
<a href="#l10.87"></a><span id="l10.87"> </span>
<a href="#l10.88"></a><span id="l10.88" class="difflineminus">-      &lt;constructor&gt;&lt;![CDATA[</span>
<a href="#l10.89"></a><span id="l10.89" class="difflineminus">-          if (this.hasAttribute(&quot;broadcaster&quot;)) {</span>
<a href="#l10.90"></a><span id="l10.90" class="difflineminus">-              this.setAttribute(&quot;broadcaster&quot;, this.getAttribute(&quot;broadcaster&quot;));</span>
<a href="#l10.91"></a><span id="l10.91" class="difflineminus">-          }</span>
<a href="#l10.92"></a><span id="l10.92" class="difflineminus">-          if (this.hasAttribute(&quot;refcontrol&quot;)) {</span>
<a href="#l10.93"></a><span id="l10.93" class="difflineminus">-              this.mRefControl = document.getElementById(this.getAttribute(&quot;refcontrol&quot;));</span>
<a href="#l10.94"></a><span id="l10.94" class="difflineminus">-              if (this.mRefControl &amp;&amp; (this.mRefControl.localName == &quot;checkbox&quot;)) {</span>
<a href="#l10.95"></a><span id="l10.95" class="difflineminus">-                  this.mControlHandler = {</span>
<a href="#l10.96"></a><span id="l10.96" class="difflineminus">-                      binding: this,</span>
<a href="#l10.97"></a><span id="l10.97" class="difflineminus">-                      handleEvent: function(aEvent, aHandled) {</span>
<a href="#l10.98"></a><span id="l10.98" class="difflineminus">-                          return this.binding.onCheckboxStateChange(aEvent, this.binding);</span>
<a href="#l10.99"></a><span id="l10.99" class="difflineminus">-                      }</span>
<a href="#l10.100"></a><span id="l10.100" class="difflineminus">-                  };</span>
<a href="#l10.101"></a><span id="l10.101" class="difflineminus">-                  this.mRefControl.addEventListener(&quot;CheckboxStateChange&quot;, this.mControlHandler, true);</span>
<a href="#l10.102"></a><span id="l10.102" class="difflineminus">-              }</span>
<a href="#l10.103"></a><span id="l10.103" class="difflineminus">-          }</span>
<a href="#l10.104"></a><span id="l10.104" class="difflineplus">+            this.mBroadcaster = null;</span>
<a href="#l10.105"></a><span id="l10.105" class="difflineplus">+            this.mRefControl = null;</span>
<a href="#l10.106"></a><span id="l10.106" class="difflineplus">+</span>
<a href="#l10.107"></a><span id="l10.107" class="difflineplus">+            if (this.hasAttribute(&quot;broadcaster&quot;)) {</span>
<a href="#l10.108"></a><span id="l10.108" class="difflineplus">+                // This sets up an event listener for the broadcaster.</span>
<a href="#l10.109"></a><span id="l10.109" class="difflineplus">+                this.setAttribute(&quot;broadcaster&quot;, this.getAttribute(&quot;broadcaster&quot;));</span>
<a href="#l10.110"></a><span id="l10.110" class="difflineplus">+            }</span>
<a href="#l10.111"></a><span id="l10.111"> </span>
<a href="#l10.112"></a><span id="l10.112" class="difflineminus">-          this.dispatchEvent(new CustomEvent(&quot;bindingattached&quot;, { bubbles: false }));</span>
<a href="#l10.113"></a><span id="l10.113" class="difflineminus">-      ]]&gt;&lt;/constructor&gt;</span>
<a href="#l10.114"></a><span id="l10.114" class="difflineplus">+            if (this.hasAttribute(&quot;refcontrol&quot;)) {</span>
<a href="#l10.115"></a><span id="l10.115" class="difflineplus">+                this.mRefControl = document.getElementById(this.getAttribute(&quot;refcontrol&quot;));</span>
<a href="#l10.116"></a><span id="l10.116" class="difflineplus">+                if (this.mRefControl &amp;&amp; (this.mRefControl.localName == &quot;checkbox&quot;)) {</span>
<a href="#l10.117"></a><span id="l10.117" class="difflineplus">+                    this.mRefControl.addEventListener(&quot;CheckboxStateChange&quot;, this, true);</span>
<a href="#l10.118"></a><span id="l10.118" class="difflineplus">+                }</span>
<a href="#l10.119"></a><span id="l10.119" class="difflineplus">+            }</span>
<a href="#l10.120"></a><span id="l10.120" class="difflineplus">+        }</span>
<a href="#l10.121"></a><span id="l10.121"> </span>
<a href="#l10.122"></a><span id="l10.122" class="difflineminus">-      &lt;destructor&gt;&lt;![CDATA[</span>
<a href="#l10.123"></a><span id="l10.123" class="difflineminus">-          if (this.mBroadcaster) {</span>
<a href="#l10.124"></a><span id="l10.124" class="difflineminus">-              this.mBroadcaster.removeEventListener(&quot;DOMAttrModified&quot;, this.mModHandler, true);</span>
<a href="#l10.125"></a><span id="l10.125" class="difflineminus">-          }</span>
<a href="#l10.126"></a><span id="l10.126" class="difflineminus">-          if (this.mRefControl) {</span>
<a href="#l10.127"></a><span id="l10.127" class="difflineminus">-              this.mRefControl.removeEventListener(&quot;CheckboxStateChange&quot;, this.mControlHandler, true);</span>
<a href="#l10.128"></a><span id="l10.128" class="difflineminus">-          }</span>
<a href="#l10.129"></a><span id="l10.129" class="difflineminus">-      ]]&gt;&lt;/destructor&gt;</span>
<a href="#l10.130"></a><span id="l10.130" class="difflineminus">-</span>
<a href="#l10.131"></a><span id="l10.131" class="difflineminus">-      &lt;property name=&quot;currentMode&quot;&gt;</span>
<a href="#l10.132"></a><span id="l10.132" class="difflineminus">-        &lt;getter&gt;&lt;![CDATA[</span>
<a href="#l10.133"></a><span id="l10.133" class="difflineplus">+        get currentMode() {</span>
<a href="#l10.134"></a><span id="l10.134">             if (this.mBroadcaster &amp;&amp; this.mBroadcaster.hasAttribute(&quot;mode&quot;)) {</span>
<a href="#l10.135"></a><span id="l10.135">                 return this.mBroadcaster.getAttribute(&quot;mode&quot;);</span>
<a href="#l10.136"></a><span id="l10.136" class="difflineminus">-            } else {</span>
<a href="#l10.137"></a><span id="l10.137" class="difflineplus">+            }</span>
<a href="#l10.138"></a><span id="l10.138" class="difflineplus">+            return &quot;&quot;;</span>
<a href="#l10.139"></a><span id="l10.139" class="difflineplus">+        }</span>
<a href="#l10.140"></a><span id="l10.140" class="difflineplus">+</span>
<a href="#l10.141"></a><span id="l10.141" class="difflineplus">+        /**</span>
<a href="#l10.142"></a><span id="l10.142" class="difflineplus">+         * The event handler for various events relevant to CalendarModebox.</span>
<a href="#l10.143"></a><span id="l10.143" class="difflineplus">+         *</span>
<a href="#l10.144"></a><span id="l10.144" class="difflineplus">+         * @param {Event} event  The event.</span>
<a href="#l10.145"></a><span id="l10.145" class="difflineplus">+         */</span>
<a href="#l10.146"></a><span id="l10.146" class="difflineplus">+        handleEvent(event) {</span>
<a href="#l10.147"></a><span id="l10.147" class="difflineplus">+            if (event.type == &quot;CheckboxStateChange&quot;) {</span>
<a href="#l10.148"></a><span id="l10.148" class="difflineplus">+                this.onCheckboxStateChange(event);</span>
<a href="#l10.149"></a><span id="l10.149" class="difflineplus">+            } else if (event.type == &quot;DOMAttrModified&quot;) {</span>
<a href="#l10.150"></a><span id="l10.150" class="difflineplus">+                this.onModeModified(event);</span>
<a href="#l10.151"></a><span id="l10.151" class="difflineplus">+            }</span>
<a href="#l10.152"></a><span id="l10.152" class="difflineplus">+        }</span>
<a href="#l10.153"></a><span id="l10.153" class="difflineplus">+</span>
<a href="#l10.154"></a><span id="l10.154" class="difflineplus">+        /**</span>
<a href="#l10.155"></a><span id="l10.155" class="difflineplus">+         * A &quot;mode attribute&quot; contains comma-separated lists of values, for example:</span>
<a href="#l10.156"></a><span id="l10.156" class="difflineplus">+         * `modewidths=&quot;200,200,200&quot;`. Each of these values corresponds to one of the modes in</span>
<a href="#l10.157"></a><span id="l10.157" class="difflineplus">+         * the &quot;mode&quot; attribute: `mode=&quot;mail,calendar,task&quot;`. This function sets a new value for</span>
<a href="#l10.158"></a><span id="l10.158" class="difflineplus">+         * a given mode in a given &quot;mode attribute&quot;.</span>
<a href="#l10.159"></a><span id="l10.159" class="difflineplus">+         *</span>
<a href="#l10.160"></a><span id="l10.160" class="difflineplus">+         * @param {string} attributeName  A &quot;mode attribute&quot; in which to set a new value.</span>
<a href="#l10.161"></a><span id="l10.161" class="difflineplus">+         * @param {string} value  A new value to set.</span>
<a href="#l10.162"></a><span id="l10.162" class="difflineplus">+         * @param {string} [mode=this.currentMode]  Set the value for this mode.</span>
<a href="#l10.163"></a><span id="l10.163" class="difflineplus">+         */</span>
<a href="#l10.164"></a><span id="l10.164" class="difflineplus">+        setModeAttribute(attributeName, value, mode = this.currentMode) {</span>
<a href="#l10.165"></a><span id="l10.165" class="difflineplus">+            if (!this.hasAttribute(attributeName)) {</span>
<a href="#l10.166"></a><span id="l10.166" class="difflineplus">+                return;</span>
<a href="#l10.167"></a><span id="l10.167" class="difflineplus">+            }</span>
<a href="#l10.168"></a><span id="l10.168" class="difflineplus">+            let attributeValues = this.getAttribute(attributeName).split(&quot;,&quot;);</span>
<a href="#l10.169"></a><span id="l10.169" class="difflineplus">+            let modes = this.getAttribute(&quot;mode&quot;).split(&quot;,&quot;);</span>
<a href="#l10.170"></a><span id="l10.170" class="difflineplus">+            attributeValues[modes.indexOf(mode)] = value;</span>
<a href="#l10.171"></a><span id="l10.171" class="difflineplus">+            this.setAttribute(attributeName, attributeValues.join(&quot;,&quot;));</span>
<a href="#l10.172"></a><span id="l10.172" class="difflineplus">+        }</span>
<a href="#l10.173"></a><span id="l10.173" class="difflineplus">+</span>
<a href="#l10.174"></a><span id="l10.174" class="difflineplus">+        /**</span>
<a href="#l10.175"></a><span id="l10.175" class="difflineplus">+         * A &quot;mode attribute&quot; contains comma-separated lists of values, for example:</span>
<a href="#l10.176"></a><span id="l10.176" class="difflineplus">+         * `modewidths=&quot;200,200,200&quot;`. Each of these values corresponds to one of the modes in</span>
<a href="#l10.177"></a><span id="l10.177" class="difflineplus">+         * the &quot;mode&quot; attribute: `mode=&quot;mail,calendar,task&quot;`. This function returns the value</span>
<a href="#l10.178"></a><span id="l10.178" class="difflineplus">+         * for a given mode in a given &quot;mode attribute&quot;.</span>
<a href="#l10.179"></a><span id="l10.179" class="difflineplus">+         *</span>
<a href="#l10.180"></a><span id="l10.180" class="difflineplus">+         * @param {string} attributeName  A &quot;mode attribute&quot; to get a value from.</span>
<a href="#l10.181"></a><span id="l10.181" class="difflineplus">+         * @param {string} [mode=this.currentMode]  Get the value for this mode.</span>
<a href="#l10.182"></a><span id="l10.182" class="difflineplus">+         * @return {string}  The value found in the mode attribute or an empty string.</span>
<a href="#l10.183"></a><span id="l10.183" class="difflineplus">+         */</span>
<a href="#l10.184"></a><span id="l10.184" class="difflineplus">+        getModeAttribute(attributeName, mode = this.currentMode) {</span>
<a href="#l10.185"></a><span id="l10.185" class="difflineplus">+            if (!this.hasAttribute(attributeName)) {</span>
<a href="#l10.186"></a><span id="l10.186">                 return &quot;&quot;;</span>
<a href="#l10.187"></a><span id="l10.187">             }</span>
<a href="#l10.188"></a><span id="l10.188" class="difflineminus">-        ]]&gt;&lt;/getter&gt;</span>
<a href="#l10.189"></a><span id="l10.189" class="difflineminus">-      &lt;/property&gt;</span>
<a href="#l10.190"></a><span id="l10.190" class="difflineminus">-</span>
<a href="#l10.191"></a><span id="l10.191" class="difflineminus">-      &lt;method name=&quot;isVisible&quot;&gt;</span>
<a href="#l10.192"></a><span id="l10.192" class="difflineminus">-        &lt;parameter name=&quot;aMode&quot;/&gt;</span>
<a href="#l10.193"></a><span id="l10.193" class="difflineminus">-        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l10.194"></a><span id="l10.194" class="difflineminus">-            let lMode = aMode || this.currentMode;</span>
<a href="#l10.195"></a><span id="l10.195" class="difflineminus">-            if (!this.isVisibleInMode(lMode)) {</span>
<a href="#l10.196"></a><span id="l10.196" class="difflineminus">-                return false;</span>
<a href="#l10.197"></a><span id="l10.197" class="difflineminus">-            }</span>
<a href="#l10.198"></a><span id="l10.198" class="difflineminus">-            let collapsedModes = this.getAttribute(&quot;collapsedinmodes&quot;).split(&quot;,&quot;);</span>
<a href="#l10.199"></a><span id="l10.199" class="difflineminus">-            return !collapsedModes.includes(lMode);</span>
<a href="#l10.200"></a><span id="l10.200" class="difflineminus">-        ]]&gt;&lt;/body&gt;</span>
<a href="#l10.201"></a><span id="l10.201" class="difflineminus">-      &lt;/method&gt;</span>
<a href="#l10.202"></a><span id="l10.202" class="difflineplus">+            let attributeValues = this.getAttribute(attributeName).split(&quot;,&quot;);</span>
<a href="#l10.203"></a><span id="l10.203" class="difflineplus">+            let modes = this.getAttribute(&quot;mode&quot;).split(&quot;,&quot;);</span>
<a href="#l10.204"></a><span id="l10.204" class="difflineplus">+            return attributeValues[modes.indexOf(mode)];</span>
<a href="#l10.205"></a><span id="l10.205" class="difflineplus">+        }</span>
<a href="#l10.206"></a><span id="l10.206"> </span>
<a href="#l10.207"></a><span id="l10.207" class="difflineminus">-      &lt;method name=&quot;setModeAttribute&quot;&gt;</span>
<a href="#l10.208"></a><span id="l10.208" class="difflineminus">-        &lt;parameter name=&quot;aModeAttribute&quot;/&gt;</span>
<a href="#l10.209"></a><span id="l10.209" class="difflineminus">-        &lt;parameter name=&quot;aModeValue&quot;/&gt;</span>
<a href="#l10.210"></a><span id="l10.210" class="difflineminus">-        &lt;parameter name=&quot;amode&quot;/&gt;</span>
<a href="#l10.211"></a><span id="l10.211" class="difflineminus">-        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l10.212"></a><span id="l10.212" class="difflineminus">-            if (this.hasAttribute(aModeAttribute)) {</span>
<a href="#l10.213"></a><span id="l10.213" class="difflineminus">-                let lMode = amode || this.currentMode;</span>
<a href="#l10.214"></a><span id="l10.214" class="difflineminus">-                let modeAttributeValues = this.getAttribute(aModeAttribute).split(&quot;,&quot;);</span>
<a href="#l10.215"></a><span id="l10.215" class="difflineminus">-                let modes = this.getAttribute(&quot;mode&quot;).split(&quot;,&quot;);</span>
<a href="#l10.216"></a><span id="l10.216" class="difflineminus">-                modeAttributeValues[modes.indexOf(lMode)] = aModeValue;</span>
<a href="#l10.217"></a><span id="l10.217" class="difflineminus">-                this.setAttribute(aModeAttribute, modeAttributeValues.join(&quot;,&quot;));</span>
<a href="#l10.218"></a><span id="l10.218" class="difflineminus">-            }</span>
<a href="#l10.219"></a><span id="l10.219" class="difflineminus">-        ]]&gt;&lt;/body&gt;</span>
<a href="#l10.220"></a><span id="l10.220" class="difflineminus">-      &lt;/method&gt;</span>
<a href="#l10.221"></a><span id="l10.221" class="difflineplus">+        /**</span>
<a href="#l10.222"></a><span id="l10.222" class="difflineplus">+         * Sets the visiblity (collapsed state) of this modebox and (optionally) updates the</span>
<a href="#l10.223"></a><span id="l10.223" class="difflineplus">+         * `collapsedinmode` attribute and (optionally) notifies the `refcontrol`.</span>
<a href="#l10.224"></a><span id="l10.224" class="difflineplus">+         *</span>
<a href="#l10.225"></a><span id="l10.225" class="difflineplus">+         * @param {boolean} visible  Whether the modebox should become visible or not.</span>
<a href="#l10.226"></a><span id="l10.226" class="difflineplus">+         * @param {boolean} [toPushModeCollapsedAttribute=true]  Whether to push the current mode</span>
<a href="#l10.227"></a><span id="l10.227" class="difflineplus">+         *                                                       to `collapsedinmodes` attribute.</span>
<a href="#l10.228"></a><span id="l10.228" class="difflineplus">+         * @param {boolean} [toNotifyRefControl=true]  Whether to notify the `refcontrol`.</span>
<a href="#l10.229"></a><span id="l10.229" class="difflineplus">+         */</span>
<a href="#l10.230"></a><span id="l10.230" class="difflineplus">+        setVisible(visible, toPushModeCollapsedAttribute = true, toNotifyRefControl = true) {</span>
<a href="#l10.231"></a><span id="l10.231" class="difflineplus">+            let pushModeCollapsedAttribute = toPushModeCollapsedAttribute === true;</span>
<a href="#l10.232"></a><span id="l10.232" class="difflineplus">+            let notifyRefControl = toNotifyRefControl === true;</span>
<a href="#l10.233"></a><span id="l10.233"> </span>
<a href="#l10.234"></a><span id="l10.234" class="difflineminus">-      &lt;method name=&quot;getModeAttribute&quot;&gt;</span>
<a href="#l10.235"></a><span id="l10.235" class="difflineminus">-        &lt;parameter name=&quot;aModeAttribute&quot;/&gt;</span>
<a href="#l10.236"></a><span id="l10.236" class="difflineminus">-        &lt;parameter name=&quot;aAttribute&quot;/&gt;</span>
<a href="#l10.237"></a><span id="l10.237" class="difflineminus">-        &lt;parameter name=&quot;amode&quot;/&gt;</span>
<a href="#l10.238"></a><span id="l10.238" class="difflineminus">-        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l10.239"></a><span id="l10.239" class="difflineminus">-            if (this.hasAttribute(aModeAttribute)) {</span>
<a href="#l10.240"></a><span id="l10.240" class="difflineminus">-                let lMode = amode || this.currentMode;</span>
<a href="#l10.241"></a><span id="l10.241" class="difflineminus">-                let modeAttributeValues = this.getAttribute(aModeAttribute).split(&quot;,&quot;);</span>
<a href="#l10.242"></a><span id="l10.242" class="difflineminus">-                let modes = this.getAttribute(&quot;mode&quot;).split(&quot;,&quot;);</span>
<a href="#l10.243"></a><span id="l10.243" class="difflineminus">-                return modeAttributeValues[modes.indexOf(lMode)];</span>
<a href="#l10.244"></a><span id="l10.244" class="difflineminus">-            } else {</span>
<a href="#l10.245"></a><span id="l10.245" class="difflineminus">-                return &quot;&quot;;</span>
<a href="#l10.246"></a><span id="l10.246" class="difflineminus">-            }</span>
<a href="#l10.247"></a><span id="l10.247" class="difflineminus">-        ]]&gt;&lt;/body&gt;</span>
<a href="#l10.248"></a><span id="l10.248" class="difflineminus">-      &lt;/method&gt;</span>
<a href="#l10.249"></a><span id="l10.249" class="difflineminus">-</span>
<a href="#l10.250"></a><span id="l10.250" class="difflineminus">-      &lt;method name=&quot;setVisible&quot;&gt;</span>
<a href="#l10.251"></a><span id="l10.251" class="difflineminus">-        &lt;parameter name=&quot;aVisible&quot;/&gt;</span>
<a href="#l10.252"></a><span id="l10.252" class="difflineminus">-        &lt;parameter name=&quot;aPushModeCollapsedAttribute&quot;/&gt;</span>
<a href="#l10.253"></a><span id="l10.253" class="difflineminus">-        &lt;parameter name=&quot;aNotifyRefControl&quot;/&gt;</span>
<a href="#l10.254"></a><span id="l10.254" class="difflineminus">-        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l10.255"></a><span id="l10.255" class="difflineminus">-            let notifyRefControl = aNotifyRefControl == null || aNotifyRefControl === true;</span>
<a href="#l10.256"></a><span id="l10.256" class="difflineminus">-            let pushModeCollapsedAttribute = aPushModeCollapsedAttribute == null ||</span>
<a href="#l10.257"></a><span id="l10.257" class="difflineminus">-                                             aPushModeCollapsedAttribute === true;</span>
<a href="#l10.258"></a><span id="l10.258">             let collapsedModes = [];</span>
<a href="#l10.259"></a><span id="l10.259">             let modeIndex = -1;</span>
<a href="#l10.260"></a><span id="l10.260" class="difflineminus">-            let display = aVisible;</span>
<a href="#l10.261"></a><span id="l10.261">             let collapsedInMode = false;</span>
<a href="#l10.262"></a><span id="l10.262" class="difflineplus">+</span>
<a href="#l10.263"></a><span id="l10.263">             if (this.hasAttribute(&quot;collapsedinmodes&quot;)) {</span>
<a href="#l10.264"></a><span id="l10.264">                 collapsedModes = this.getAttribute(&quot;collapsedinmodes&quot;).split(&quot;,&quot;);</span>
<a href="#l10.265"></a><span id="l10.265">                 modeIndex = collapsedModes.indexOf(this.currentMode);</span>
<a href="#l10.266"></a><span id="l10.266">                 collapsedInMode = modeIndex &gt; -1;</span>
<a href="#l10.267"></a><span id="l10.267">             }</span>
<a href="#l10.268"></a><span id="l10.268" class="difflineminus">-            if (aVisible === true &amp;&amp; !pushModeCollapsedAttribute) {</span>
<a href="#l10.269"></a><span id="l10.269" class="difflineminus">-                display = (aVisible === true) &amp;&amp; (!collapsedInMode);</span>
<a href="#l10.270"></a><span id="l10.270" class="difflineplus">+</span>
<a href="#l10.271"></a><span id="l10.271" class="difflineplus">+            let display = visible;</span>
<a href="#l10.272"></a><span id="l10.272" class="difflineplus">+            if (display &amp;&amp; !pushModeCollapsedAttribute) {</span>
<a href="#l10.273"></a><span id="l10.273" class="difflineplus">+                display = !collapsedInMode;</span>
<a href="#l10.274"></a><span id="l10.274">             }</span>
<a href="#l10.275"></a><span id="l10.275"> </span>
<a href="#l10.276"></a><span id="l10.276">             setBooleanAttribute(this, &quot;collapsed&quot;, !display || !this.isVisibleInMode());</span>
<a href="#l10.277"></a><span id="l10.277" class="difflineplus">+</span>
<a href="#l10.278"></a><span id="l10.278">             if (pushModeCollapsedAttribute) {</span>
<a href="#l10.279"></a><span id="l10.279">                 if (!display) {</span>
<a href="#l10.280"></a><span id="l10.280">                     if (modeIndex == -1) {</span>
<a href="#l10.281"></a><span id="l10.281">                         collapsedModes.push(this.currentMode);</span>
<a href="#l10.282"></a><span id="l10.282">                         if (this.getAttribute(&quot;collapsedinmodes&quot;) == &quot;,&quot;) {</span>
<a href="#l10.283"></a><span id="l10.283">                             collapsedModes.splice(0, 2);</span>
<a href="#l10.284"></a><span id="l10.284">                         }</span>
<a href="#l10.285"></a><span id="l10.285">                     }</span>
<a href="#l10.286"></a><span id="l10.286">                 } else if (modeIndex &gt; -1) {</span>
<a href="#l10.287"></a><span id="l10.287">                     collapsedModes.splice(modeIndex, 1);</span>
<a href="#l10.288"></a><span id="l10.288">                     if (collapsedModes.join(&quot;,&quot;) == &quot;&quot;) {</span>
<a href="#l10.289"></a><span id="l10.289">                         collapsedModes[0] = &quot;,&quot;;</span>
<a href="#l10.290"></a><span id="l10.290">                     }</span>
<a href="#l10.291"></a><span id="l10.291">                 }</span>
<a href="#l10.292"></a><span id="l10.292">                 this.setAttribute(&quot;collapsedinmodes&quot;, collapsedModes.join(&quot;,&quot;));</span>
<a href="#l10.293"></a><span id="l10.293"> </span>
<a href="#l10.294"></a><span id="l10.294" class="difflineminus">-                // This binding is used all over the place. We can't guarantee that Services is available.</span>
<a href="#l10.295"></a><span id="l10.295" class="difflineminus">-                var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l10.296"></a><span id="l10.296">                 Services.xulStore.persist(this, &quot;collapsedinmodes&quot;);</span>
<a href="#l10.297"></a><span id="l10.297">             }</span>
<a href="#l10.298"></a><span id="l10.298" class="difflineminus">-            if (notifyRefControl === true) {</span>
<a href="#l10.299"></a><span id="l10.299" class="difflineminus">-                if (this.hasAttribute(&quot;refcontrol&quot;)) {</span>
<a href="#l10.300"></a><span id="l10.300" class="difflineminus">-                    let command = document.getElementById(this.getAttribute(&quot;refcontrol&quot;));</span>
<a href="#l10.301"></a><span id="l10.301" class="difflineminus">-                    if (command) {</span>
<a href="#l10.302"></a><span id="l10.302" class="difflineminus">-                        command.setAttribute(&quot;checked&quot;, display);</span>
<a href="#l10.303"></a><span id="l10.303" class="difflineminus">-                        setBooleanAttribute(command, &quot;disabled&quot;, !this.isVisibleInMode());</span>
<a href="#l10.304"></a><span id="l10.304" class="difflineminus">-                    }</span>
<a href="#l10.305"></a><span id="l10.305" class="difflineplus">+</span>
<a href="#l10.306"></a><span id="l10.306" class="difflineplus">+            if (notifyRefControl &amp;&amp; this.hasAttribute(&quot;refcontrol&quot;)) {</span>
<a href="#l10.307"></a><span id="l10.307" class="difflineplus">+                let command = document.getElementById(this.getAttribute(&quot;refcontrol&quot;));</span>
<a href="#l10.308"></a><span id="l10.308" class="difflineplus">+                if (command) {</span>
<a href="#l10.309"></a><span id="l10.309" class="difflineplus">+                    command.setAttribute(&quot;checked&quot;, display);</span>
<a href="#l10.310"></a><span id="l10.310" class="difflineplus">+                    setBooleanAttribute(command, &quot;disabled&quot;, !this.isVisibleInMode());</span>
<a href="#l10.311"></a><span id="l10.311">                 }</span>
<a href="#l10.312"></a><span id="l10.312">             }</span>
<a href="#l10.313"></a><span id="l10.313" class="difflineminus">-        ]]&gt;&lt;/body&gt;</span>
<a href="#l10.314"></a><span id="l10.314" class="difflineminus">-      &lt;/method&gt;</span>
<a href="#l10.315"></a><span id="l10.315" class="difflineplus">+        }</span>
<a href="#l10.316"></a><span id="l10.316"> </span>
<a href="#l10.317"></a><span id="l10.317" class="difflineminus">-      &lt;method name=&quot;isVisibleInMode&quot;&gt;</span>
<a href="#l10.318"></a><span id="l10.318" class="difflineminus">-        &lt;parameter name=&quot;aMode&quot;/&gt;</span>
<a href="#l10.319"></a><span id="l10.319" class="difflineminus">-        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l10.320"></a><span id="l10.320" class="difflineminus">-            let lMode = aMode || this.currentMode;</span>
<a href="#l10.321"></a><span id="l10.321" class="difflineminus">-            let display = true;</span>
<a href="#l10.322"></a><span id="l10.322" class="difflineminus">-            let lModes = [];</span>
<a href="#l10.323"></a><span id="l10.323" class="difflineminus">-            if (this.hasAttribute(&quot;mode&quot;)) {</span>
<a href="#l10.324"></a><span id="l10.324" class="difflineminus">-                let modeString = this.getAttribute(&quot;mode&quot;);</span>
<a href="#l10.325"></a><span id="l10.325" class="difflineminus">-                lModes = modeString.split(&quot;,&quot;);</span>
<a href="#l10.326"></a><span id="l10.326" class="difflineminus">-            }</span>
<a href="#l10.327"></a><span id="l10.327" class="difflineminus">-            if (lModes &amp;&amp; lModes.length &gt; 0) {</span>
<a href="#l10.328"></a><span id="l10.328" class="difflineminus">-                display = lModes.includes(lMode);</span>
<a href="#l10.329"></a><span id="l10.329" class="difflineplus">+        /**</span>
<a href="#l10.330"></a><span id="l10.330" class="difflineplus">+         * Return whether this modebox is visible for a given mode, according to both its</span>
<a href="#l10.331"></a><span id="l10.331" class="difflineplus">+         * `mode` and `collapsedinmodes` attributes.</span>
<a href="#l10.332"></a><span id="l10.332" class="difflineplus">+         *</span>
<a href="#l10.333"></a><span id="l10.333" class="difflineplus">+         * @param {string} [mode=this.currentMode]  Is the modebox visible for this mode?</span>
<a href="#l10.334"></a><span id="l10.334" class="difflineplus">+         * @return {boolean}  Whether this modebox is visible for the given mode.</span>
<a href="#l10.335"></a><span id="l10.335" class="difflineplus">+         */</span>
<a href="#l10.336"></a><span id="l10.336" class="difflineplus">+        isVisible(mode = this.currentMode) {</span>
<a href="#l10.337"></a><span id="l10.337" class="difflineplus">+            if (!this.isVisibleInMode(mode)) {</span>
<a href="#l10.338"></a><span id="l10.338" class="difflineplus">+                return false;</span>
<a href="#l10.339"></a><span id="l10.339">             }</span>
<a href="#l10.340"></a><span id="l10.340" class="difflineminus">-            return display;</span>
<a href="#l10.341"></a><span id="l10.341" class="difflineminus">-        ]]&gt;&lt;/body&gt;</span>
<a href="#l10.342"></a><span id="l10.342" class="difflineminus">-      &lt;/method&gt;</span>
<a href="#l10.343"></a><span id="l10.343" class="difflineplus">+            let collapsedModes = this.getAttribute(&quot;collapsedinmodes&quot;).split(&quot;,&quot;);</span>
<a href="#l10.344"></a><span id="l10.344" class="difflineplus">+            return !collapsedModes.includes(mode);</span>
<a href="#l10.345"></a><span id="l10.345" class="difflineplus">+        }</span>
<a href="#l10.346"></a><span id="l10.346" class="difflineplus">+</span>
<a href="#l10.347"></a><span id="l10.347" class="difflineplus">+        /**</span>
<a href="#l10.348"></a><span id="l10.348" class="difflineplus">+         * Returns whether this modebox is visible for a given mode, according to its</span>
<a href="#l10.349"></a><span id="l10.349" class="difflineplus">+         * `mode` attribute.</span>
<a href="#l10.350"></a><span id="l10.350" class="difflineplus">+         *</span>
<a href="#l10.351"></a><span id="l10.351" class="difflineplus">+         * @param {string} [mode=this.currentMode]  Is the modebox visible for this mode?</span>
<a href="#l10.352"></a><span id="l10.352" class="difflineplus">+         * @return {boolean}  Whether this modebox is visible for the given mode.</span>
<a href="#l10.353"></a><span id="l10.353" class="difflineplus">+         */</span>
<a href="#l10.354"></a><span id="l10.354" class="difflineplus">+        isVisibleInMode(mode = this.currentMode) {</span>
<a href="#l10.355"></a><span id="l10.355" class="difflineplus">+            return this.hasAttribute(&quot;mode&quot;) ?</span>
<a href="#l10.356"></a><span id="l10.356" class="difflineplus">+                this.getAttribute(&quot;mode&quot;).split(&quot;,&quot;).includes(mode) : true;</span>
<a href="#l10.357"></a><span id="l10.357" class="difflineplus">+        }</span>
<a href="#l10.358"></a><span id="l10.358"> </span>
<a href="#l10.359"></a><span id="l10.359" class="difflineminus">-      &lt;method name=&quot;onModeModified&quot;&gt;</span>
<a href="#l10.360"></a><span id="l10.360" class="difflineminus">-        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l10.361"></a><span id="l10.361" class="difflineminus">-        &lt;parameter name=&quot;aBinding&quot;/&gt;</span>
<a href="#l10.362"></a><span id="l10.362" class="difflineminus">-        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l10.363"></a><span id="l10.363" class="difflineminus">-            if (aEvent.attrName == &quot;mode&quot;) {</span>
<a href="#l10.364"></a><span id="l10.364" class="difflineminus">-                let display = aBinding.isVisibleInMode(aEvent.newValue);</span>
<a href="#l10.365"></a><span id="l10.365" class="difflineminus">-                aBinding.setVisible(display, false, true);</span>
<a href="#l10.366"></a><span id="l10.366" class="difflineplus">+        /**</span>
<a href="#l10.367"></a><span id="l10.367" class="difflineplus">+         * Handles changes to the current mode by making the modebox visible or not.</span>
<a href="#l10.368"></a><span id="l10.368" class="difflineplus">+         *</span>
<a href="#l10.369"></a><span id="l10.369" class="difflineplus">+         * @param {Event} event  An event, e.g. &quot;DOMAttributeModified&quot;.</span>
<a href="#l10.370"></a><span id="l10.370" class="difflineplus">+         */</span>
<a href="#l10.371"></a><span id="l10.371" class="difflineplus">+        onModeModified(event) {</span>
<a href="#l10.372"></a><span id="l10.372" class="difflineplus">+            if (event.attrName == &quot;mode&quot;) {</span>
<a href="#l10.373"></a><span id="l10.373" class="difflineplus">+                let display = this.isVisibleInMode(event.newValue);</span>
<a href="#l10.374"></a><span id="l10.374" class="difflineplus">+                this.setVisible(display, false, true);</span>
<a href="#l10.375"></a><span id="l10.375">             }</span>
<a href="#l10.376"></a><span id="l10.376" class="difflineminus">-        ]]&gt;&lt;/body&gt;</span>
<a href="#l10.377"></a><span id="l10.377" class="difflineminus">-      &lt;/method&gt;</span>
<a href="#l10.378"></a><span id="l10.378" class="difflineplus">+        }</span>
<a href="#l10.379"></a><span id="l10.379"> </span>
<a href="#l10.380"></a><span id="l10.380" class="difflineminus">-      &lt;method name=&quot;togglePane&quot;&gt;</span>
<a href="#l10.381"></a><span id="l10.381" class="difflineminus">-        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l10.382"></a><span id="l10.382" class="difflineminus">-        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l10.383"></a><span id="l10.383" class="difflineminus">-            let command = aEvent.target;</span>
<a href="#l10.384"></a><span id="l10.384" class="difflineminus">-            let newValue = (command.getAttribute(&quot;checked&quot;) == &quot;true&quot; ? &quot;false&quot; : &quot;true&quot;);</span>
<a href="#l10.385"></a><span id="l10.385" class="difflineplus">+        /**</span>
<a href="#l10.386"></a><span id="l10.386" class="difflineplus">+         * Used to toggle the checked state of a command connected to this modebox, and set the</span>
<a href="#l10.387"></a><span id="l10.387" class="difflineplus">+         * visibility of this modebox accordingly.</span>
<a href="#l10.388"></a><span id="l10.388" class="difflineplus">+         *</span>
<a href="#l10.389"></a><span id="l10.389" class="difflineplus">+         * @param {Event} event  An event with a command (with a checked attribute) as its target.</span>
<a href="#l10.390"></a><span id="l10.390" class="difflineplus">+         */</span>
<a href="#l10.391"></a><span id="l10.391" class="difflineplus">+        togglePane(event) {</span>
<a href="#l10.392"></a><span id="l10.392" class="difflineplus">+            let command = event.target;</span>
<a href="#l10.393"></a><span id="l10.393" class="difflineplus">+            let newValue = (command.getAttribute(&quot;checked&quot;) == &quot;true&quot;) ? &quot;false&quot; : &quot;true&quot;;</span>
<a href="#l10.394"></a><span id="l10.394">             command.setAttribute(&quot;checked&quot;, newValue);</span>
<a href="#l10.395"></a><span id="l10.395">             this.setVisible(newValue == &quot;true&quot;, true, true);</span>
<a href="#l10.396"></a><span id="l10.396" class="difflineminus">-        ]]&gt;&lt;/body&gt;</span>
<a href="#l10.397"></a><span id="l10.397" class="difflineminus">-      &lt;/method&gt;</span>
<a href="#l10.398"></a><span id="l10.398" class="difflineplus">+        }</span>
<a href="#l10.399"></a><span id="l10.399"> </span>
<a href="#l10.400"></a><span id="l10.400" class="difflineminus">-      &lt;method name=&quot;onCheckboxStateChange&quot;&gt;</span>
<a href="#l10.401"></a><span id="l10.401" class="difflineminus">-        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l10.402"></a><span id="l10.402" class="difflineminus">-        &lt;parameter name=&quot;aBinding&quot;/&gt;</span>
<a href="#l10.403"></a><span id="l10.403" class="difflineminus">-        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l10.404"></a><span id="l10.404" class="difflineminus">-            let newValue = aEvent.target.checked;</span>
<a href="#l10.405"></a><span id="l10.405" class="difflineplus">+        /**</span>
<a href="#l10.406"></a><span id="l10.406" class="difflineplus">+         * Handles a change in a checkbox state, by making this modebox visible or not.</span>
<a href="#l10.407"></a><span id="l10.407" class="difflineplus">+         *</span>
<a href="#l10.408"></a><span id="l10.408" class="difflineplus">+         * @param {Event} event  An event with a target that has a `checked` attribute.</span>
<a href="#l10.409"></a><span id="l10.409" class="difflineplus">+         */</span>
<a href="#l10.410"></a><span id="l10.410" class="difflineplus">+        onCheckboxStateChange(event) {</span>
<a href="#l10.411"></a><span id="l10.411" class="difflineplus">+            let newValue = event.target.checked;</span>
<a href="#l10.412"></a><span id="l10.412">             this.setVisible(newValue, true, true);</span>
<a href="#l10.413"></a><span id="l10.413" class="difflineminus">-        ]]&gt;&lt;/body&gt;</span>
<a href="#l10.414"></a><span id="l10.414" class="difflineminus">-      &lt;/method&gt;</span>
<a href="#l10.415"></a><span id="l10.415" class="difflineplus">+        }</span>
<a href="#l10.416"></a><span id="l10.416"> </span>
<a href="#l10.417"></a><span id="l10.417" class="difflineminus">-      &lt;method name=&quot;setAttribute&quot;&gt;</span>
<a href="#l10.418"></a><span id="l10.418" class="difflineminus">-        &lt;parameter name=&quot;aAttr&quot;/&gt;</span>
<a href="#l10.419"></a><span id="l10.419" class="difflineminus">-        &lt;parameter name=&quot;aVal&quot;/&gt;</span>
<a href="#l10.420"></a><span id="l10.420" class="difflineminus">-        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l10.421"></a><span id="l10.421" class="difflineminus">-            if (aAttr == &quot;broadcaster&quot;) {</span>
<a href="#l10.422"></a><span id="l10.422" class="difflineminus">-                this.mBroadcaster = document.getElementById(aVal);</span>
<a href="#l10.423"></a><span id="l10.423" class="difflineminus">-                if (this.mBroadcaster) {</span>
<a href="#l10.424"></a><span id="l10.424" class="difflineminus">-                    this.mModHandler = {</span>
<a href="#l10.425"></a><span id="l10.425" class="difflineminus">-                        binding: this,</span>
<a href="#l10.426"></a><span id="l10.426" class="difflineminus">-                        handleEvent: function(aEvent, aHandled) {</span>
<a href="#l10.427"></a><span id="l10.427" class="difflineminus">-                            return this.binding.onModeModified(aEvent, this.binding);</span>
<a href="#l10.428"></a><span id="l10.428" class="difflineminus">-                        }</span>
<a href="#l10.429"></a><span id="l10.429" class="difflineminus">-                    };</span>
<a href="#l10.430"></a><span id="l10.430" class="difflineminus">-                    this.mBroadcaster.addEventListener(&quot;DOMAttrModified&quot;, this.mModHandler, true);</span>
<a href="#l10.431"></a><span id="l10.431" class="difflineplus">+        /**</span>
<a href="#l10.432"></a><span id="l10.432" class="difflineplus">+         * Set an attribute to a value. If the attribute is &quot;broadcaster&quot; then also set up an</span>
<a href="#l10.433"></a><span id="l10.433" class="difflineplus">+         * event listener for the new broadcaster and remove any existing event listener from</span>
<a href="#l10.434"></a><span id="l10.434" class="difflineplus">+         * the previous broadcaster.</span>
<a href="#l10.435"></a><span id="l10.435" class="difflineplus">+         *</span>
<a href="#l10.436"></a><span id="l10.436" class="difflineplus">+         * @param {string} attr  The attribute to set.</span>
<a href="#l10.437"></a><span id="l10.437" class="difflineplus">+         * @param {string} val  The value to set.</span>
<a href="#l10.438"></a><span id="l10.438" class="difflineplus">+         */</span>
<a href="#l10.439"></a><span id="l10.439" class="difflineplus">+        setAttribute(attr, val) {</span>
<a href="#l10.440"></a><span id="l10.440" class="difflineplus">+            if (attr == &quot;broadcaster&quot;) {</span>
<a href="#l10.441"></a><span id="l10.441" class="difflineplus">+                const newBroadcaster = document.getElementById(val);</span>
<a href="#l10.442"></a><span id="l10.442" class="difflineplus">+                if (newBroadcaster) {</span>
<a href="#l10.443"></a><span id="l10.443" class="difflineplus">+                    if (this.mBroadcaster) {</span>
<a href="#l10.444"></a><span id="l10.444" class="difflineplus">+                        this.mBroadcaster.removeEventListener(&quot;DOMAttrModified&quot;, this, true);</span>
<a href="#l10.445"></a><span id="l10.445" class="difflineplus">+                    }</span>
<a href="#l10.446"></a><span id="l10.446" class="difflineplus">+                    this.mBroadcaster = newBroadcaster;</span>
<a href="#l10.447"></a><span id="l10.447" class="difflineplus">+                    this.mBroadcaster.addEventListener(&quot;DOMAttrModified&quot;, this, true);</span>
<a href="#l10.448"></a><span id="l10.448">                 }</span>
<a href="#l10.449"></a><span id="l10.449">             }</span>
<a href="#l10.450"></a><span id="l10.450" class="difflineminus">-            return XULElement.prototype.setAttribute.call(this, aAttr, aVal);</span>
<a href="#l10.451"></a><span id="l10.451" class="difflineminus">-        ]]&gt;&lt;/body&gt;</span>
<a href="#l10.452"></a><span id="l10.452" class="difflineminus">-      &lt;/method&gt;</span>
<a href="#l10.453"></a><span id="l10.453" class="difflineminus">-    &lt;/implementation&gt;</span>
<a href="#l10.454"></a><span id="l10.454" class="difflineminus">-  &lt;/binding&gt;</span>
<a href="#l10.455"></a><span id="l10.455" class="difflineminus">-&lt;/bindings&gt;</span>
<a href="#l10.456"></a><span id="l10.456" class="difflineplus">+            return super.setAttribute(attr, val);</span>
<a href="#l10.457"></a><span id="l10.457" class="difflineplus">+        }</span>
<a href="#l10.458"></a><span id="l10.458" class="difflineplus">+</span>
<a href="#l10.459"></a><span id="l10.459" class="difflineplus">+        disconnectedCallback() {</span>
<a href="#l10.460"></a><span id="l10.460" class="difflineplus">+            if (this.mBroadcaster) {</span>
<a href="#l10.461"></a><span id="l10.461" class="difflineplus">+                this.mBroadcaster.removeEventListener(&quot;DOMAttrModified&quot;, this, true);</span>
<a href="#l10.462"></a><span id="l10.462" class="difflineplus">+            }</span>
<a href="#l10.463"></a><span id="l10.463" class="difflineplus">+            if (this.mRefControl) {</span>
<a href="#l10.464"></a><span id="l10.464" class="difflineplus">+                this.mRefControl.removeEventListener(&quot;CheckboxStateChange&quot;, this, true);</span>
<a href="#l10.465"></a><span id="l10.465" class="difflineplus">+            }</span>
<a href="#l10.466"></a><span id="l10.466" class="difflineplus">+        }</span>
<a href="#l10.467"></a><span id="l10.467" class="difflineplus">+    }</span>
<a href="#l10.468"></a><span id="l10.468" class="difflineplus">+</span>
<a href="#l10.469"></a><span id="l10.469" class="difflineplus">+    customElements.define(&quot;calendar-modebox&quot;, CalendarModebox);</span>
<a href="#l10.470"></a><span id="l10.470" class="difflineplus">+</span>
<a href="#l10.471"></a><span id="l10.471" class="difflineplus">+    /**</span>
<a href="#l10.472"></a><span id="l10.472" class="difflineplus">+     * A `calendar-modebox` but with a vertical orientation like a `vbox`. (Different Custom</span>
<a href="#l10.473"></a><span id="l10.473" class="difflineplus">+     * Elements cannot be defined using the same class, thus we need this subclass.)</span>
<a href="#l10.474"></a><span id="l10.474" class="difflineplus">+     *</span>
<a href="#l10.475"></a><span id="l10.475" class="difflineplus">+     * @extends {CalendarModebox}</span>
<a href="#l10.476"></a><span id="l10.476" class="difflineplus">+     */</span>
<a href="#l10.477"></a><span id="l10.477" class="difflineplus">+    class CalendarModevbox extends CalendarModebox {</span>
<a href="#l10.478"></a><span id="l10.478" class="difflineplus">+        connectedCallback() {</span>
<a href="#l10.479"></a><span id="l10.479" class="difflineplus">+            if (this.delayConnectedCallback()) {</span>
<a href="#l10.480"></a><span id="l10.480" class="difflineplus">+                return;</span>
<a href="#l10.481"></a><span id="l10.481" class="difflineplus">+            }</span>
<a href="#l10.482"></a><span id="l10.482" class="difflineplus">+            super.connectedCallback();</span>
<a href="#l10.483"></a><span id="l10.483" class="difflineplus">+            this.orient = &quot;vertical&quot;;</span>
<a href="#l10.484"></a><span id="l10.484" class="difflineplus">+        }</span>
<a href="#l10.485"></a><span id="l10.485" class="difflineplus">+    }</span>
<a href="#l10.486"></a><span id="l10.486" class="difflineplus">+</span>
<a href="#l10.487"></a><span id="l10.487" class="difflineplus">+    customElements.define(&quot;calendar-modevbox&quot;, CalendarModevbox);</span>
<a href="#l10.488"></a><span id="l10.488" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">deleted file mode 100644</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineminus">--- a/calendar/base/content/widgets/calendar-widget-bindings.css</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineplus">+++ /dev/null</span>
<a href="#l11.4"></a><span id="l11.4" class="difflineat">@@ -1,14 +0,0 @@</span>
<a href="#l11.5"></a><span id="l11.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l11.6"></a><span id="l11.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l11.7"></a><span id="l11.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l11.8"></a><span id="l11.8" class="difflineminus">-</span>
<a href="#l11.9"></a><span id="l11.9" class="difflineminus">-</span>
<a href="#l11.10"></a><span id="l11.10" class="difflineminus">-modebox,</span>
<a href="#l11.11"></a><span id="l11.11" class="difflineminus">-modevbox {</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-  -moz-binding: url(chrome://calendar/content/widgets/calendar-widgets.xml#modebox);</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineminus">-  -moz-user-focus: normal;</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineminus">-}</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineminus">-</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineminus">-modevbox {</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineminus">-  -moz-box-orient: vertical;</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/calendar/base/jar.mn</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/calendar/base/jar.mn</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -91,20 +91,19 @@ calendar.jar:</span>
<a href="#l12.4"></a><span id="l12.4">     content/calendar/preferences/categories.js             (content/preferences/categories.js)</span>
<a href="#l12.5"></a><span id="l12.5">     content/calendar/preferences/editCategory.xul          (content/preferences/editCategory.xul)</span>
<a href="#l12.6"></a><span id="l12.6">     content/calendar/preferences/editCategory.js           (content/preferences/editCategory.js)</span>
<a href="#l12.7"></a><span id="l12.7">     content/calendar/preferences/general.js                (content/preferences/general.js)</span>
<a href="#l12.8"></a><span id="l12.8">     content/calendar/preferences/views.js                  (content/preferences/views.js)</span>
<a href="#l12.9"></a><span id="l12.9">     content/calendar/widgets/calendar-alarm-widget.js      (content/widgets/calendar-alarm-widget.js)</span>
<a href="#l12.10"></a><span id="l12.10">     content/calendar/widgets/calendar-dnd-widgets.js       (content/widgets/calendar-dnd-widgets.js)</span>
<a href="#l12.11"></a><span id="l12.11">     content/calendar/widgets/calendar-minimonth.js         (content/widgets/calendar-minimonth.js)</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-    content/calendar/widgets/calendar-widgets.xml          (content/widgets/calendar-widgets.xml)</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+    content/calendar/widgets/calendar-modebox.js           (content/widgets/calendar-modebox.js)</span>
<a href="#l12.14"></a><span id="l12.14">     content/calendar/widgets/calendar-list-tree.js         (content/widgets/calendar-list-tree.js)</span>
<a href="#l12.15"></a><span id="l12.15">     content/calendar/calendar-subscriptions-list.js        (content/widgets/calendar-subscriptions-list.js)</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineminus">-    content/calendar/widgets/calendar-widget-bindings.css  (content/widgets/calendar-widget-bindings.css)</span>
<a href="#l12.17"></a><span id="l12.17">     content/calendar/calApplicationUtils.js                (src/calApplicationUtils.js)</span>
<a href="#l12.18"></a><span id="l12.18">     content/calendar/calFilter.js                          (src/calFilter.js)</span>
<a href="#l12.19"></a><span id="l12.19">     content/calendar/WindowsNTToZoneInfoTZId.properties    (src/WindowsNTToZoneInfoTZId.properties)</span>
<a href="#l12.20"></a><span id="l12.20"> % skin calendar classic/1.0 chrome/skin/linux/calendar/</span>
<a href="#l12.21"></a><span id="l12.21"> % skin calendar classic/1.0 chrome/skin/osx/calendar/ os=Darwin</span>
<a href="#l12.22"></a><span id="l12.22"> % skin calendar classic/1.0 chrome/skin/windows/calendar/ os=WINNT</span>
<a href="#l12.23"></a><span id="l12.23"> % skin calendar-common classic/1.0 chrome/skin/common/</span>
<a href="#l12.24"></a><span id="l12.24"> % style chrome://messenger/content/customizeToolbar.xul chrome://calendar/skin/calendar-task-view.css</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/calendar/lightning/content/lightning-item-iframe.xul</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/calendar/lightning/content/lightning-item-iframe.xul</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -5,17 +5,16 @@</span>
<a href="#l13.4"></a><span id="l13.4"> </span>
<a href="#l13.5"></a><span id="l13.5"> &lt;!-- XXX some of these css files may not be needed here.</span>
<a href="#l13.6"></a><span id="l13.6">     widget-bindings.css definitely is needed here --&gt;</span>
<a href="#l13.7"></a><span id="l13.7"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://global/skin/global.css&quot;?&gt;</span>
<a href="#l13.8"></a><span id="l13.8"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://messenger/content/bindings.css&quot;?&gt;</span>
<a href="#l13.9"></a><span id="l13.9"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar-common/skin/calendar-alarms.css&quot;?&gt;</span>
<a href="#l13.10"></a><span id="l13.10"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar-common/skin/widgets/minimonth.css&quot;?&gt;</span>
<a href="#l13.11"></a><span id="l13.11"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar-common/skin/calendar-attendees.css&quot;?&gt;</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/content/widgets/calendar-widget-bindings.css&quot;?&gt;</span>
<a href="#l13.13"></a><span id="l13.13"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/skin/calendar-event-dialog.css&quot;?&gt;</span>
<a href="#l13.14"></a><span id="l13.14"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar/content/calendar-event-dialog.css&quot;?&gt;</span>
<a href="#l13.15"></a><span id="l13.15"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://lightning-common/skin/datetimepickers.css&quot;?&gt;</span>
<a href="#l13.16"></a><span id="l13.16"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://messenger/skin/primaryToolbar.css&quot;?&gt;</span>
<a href="#l13.17"></a><span id="l13.17"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://messenger/skin/messenger.css&quot;?&gt;</span>
<a href="#l13.18"></a><span id="l13.18"> &lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;chrome://calendar-common/skin/dialogs/calendar-event-dialog.css&quot;?&gt;</span>
<a href="#l13.19"></a><span id="l13.19"> </span>
<a href="#l13.20"></a><span id="l13.20"> &lt;!DOCTYPE window [</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/calendar/lightning/content/messenger-overlay-sidebar.xul</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/calendar/lightning/content/messenger-overlay-sidebar.xul</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -61,16 +61,17 @@</span>
<a href="#l14.4"></a><span id="l14.4">   &lt;script src=&quot;chrome://calendar/content/calendar-views.js&quot;/&gt;</span>
<a href="#l14.5"></a><span id="l14.5"> </span>
<a href="#l14.6"></a><span id="l14.6">   &lt;script src=&quot;chrome://calendar/content/calendar-creation.js&quot;/&gt;</span>
<a href="#l14.7"></a><span id="l14.7">   &lt;script src=&quot;chrome://calendar/content/calendar-dnd-listener.js&quot;/&gt;</span>
<a href="#l14.8"></a><span id="l14.8">   &lt;script src=&quot;chrome://calendar/content/calendar-statusbar.js&quot;/&gt;</span>
<a href="#l14.9"></a><span id="l14.9">   &lt;script src=&quot;chrome://calendar/content/widgets/calendar-minimonth.js&quot;/&gt;</span>
<a href="#l14.10"></a><span id="l14.10">   &lt;script src=&quot;chrome://global/content/nsDragAndDrop.js&quot;/&gt;</span>
<a href="#l14.11"></a><span id="l14.11">   &lt;script src=&quot;chrome://calendar/content/widgets/calendar-list-tree.js&quot;/&gt;</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineplus">+  &lt;script src=&quot;chrome://calendar/content/widgets/calendar-modebox.js&quot;/&gt;</span>
<a href="#l14.13"></a><span id="l14.13"> </span>
<a href="#l14.14"></a><span id="l14.14">   &lt;!-- NEEDED FOR TASK VIEW/LIST SUPPORT --&gt;</span>
<a href="#l14.15"></a><span id="l14.15">   &lt;script src=&quot;chrome://calendar/content/calendar-task-editing.js&quot;/&gt;</span>
<a href="#l14.16"></a><span id="l14.16"> </span>
<a href="#l14.17"></a><span id="l14.17">   &lt;script src=&quot;chrome://calendar/content/calendar-extract.js&quot;/&gt;</span>
<a href="#l14.18"></a><span id="l14.18"> </span>
<a href="#l14.19"></a><span id="l14.19">   &lt;script src=&quot;chrome://lightning/content/lightning-utils.js&quot;/&gt;</span>
<a href="#l14.20"></a><span id="l14.20">   &lt;script src=&quot;chrome://lightning/content/messenger-overlay-sidebar.js&quot;/&gt;</span>
<a href="#l14.21"></a><span id="l14.21" class="difflineat">@@ -190,77 +191,96 @@</span>
<a href="#l14.22"></a><span id="l14.22">                    command=&quot;new_task_tab&quot;/&gt;</span>
<a href="#l14.23"></a><span id="l14.23">   &lt;/toolbar&gt;</span>
<a href="#l14.24"></a><span id="l14.24"> </span>
<a href="#l14.25"></a><span id="l14.25">   &lt;tabpanels id=&quot;tabpanelcontainer&quot;&gt;</span>
<a href="#l14.26"></a><span id="l14.26">     &lt;vbox id=&quot;calendarTabPanel&quot;&gt;</span>
<a href="#l14.27"></a><span id="l14.27">       &lt;!-- Unfortunately we use the same panel for task and calendar tabs, so</span>
<a href="#l14.28"></a><span id="l14.28">            we need to differ which toolbar is being shown. The actual toolbar</span>
<a href="#l14.29"></a><span id="l14.29">            content will be added via a further overlay --&gt;</span>
<a href="#l14.30"></a><span id="l14.30" class="difflineminus">-      &lt;modevbox id=&quot;calendar-toolbox-container&quot; mode=&quot;calendar&quot; broadcaster=&quot;modeBroadcaster&quot;&gt;</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineplus">+      &lt;calendar-modevbox id=&quot;calendar-toolbox-container&quot;</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineplus">+                         mode=&quot;calendar&quot;</span>
<a href="#l14.33"></a><span id="l14.33" class="difflineplus">+                         broadcaster=&quot;modeBroadcaster&quot;&gt;</span>
<a href="#l14.34"></a><span id="l14.34">         &lt;toolbox id=&quot;calendar-toolbox&quot;/&gt;</span>
<a href="#l14.35"></a><span id="l14.35" class="difflineminus">-      &lt;/modevbox&gt;</span>
<a href="#l14.36"></a><span id="l14.36" class="difflineminus">-      &lt;modevbox id=&quot;task-toolbox-container&quot; mode=&quot;task&quot; broadcaster=&quot;modeBroadcaster&quot;&gt;</span>
<a href="#l14.37"></a><span id="l14.37" class="difflineplus">+      &lt;/calendar-modevbox&gt;</span>
<a href="#l14.38"></a><span id="l14.38" class="difflineplus">+      &lt;calendar-modevbox id=&quot;task-toolbox-container&quot;</span>
<a href="#l14.39"></a><span id="l14.39" class="difflineplus">+                         mode=&quot;task&quot;</span>
<a href="#l14.40"></a><span id="l14.40" class="difflineplus">+                         broadcaster=&quot;modeBroadcaster&quot;&gt;</span>
<a href="#l14.41"></a><span id="l14.41">         &lt;toolbox id=&quot;task-toolbox&quot;/&gt;</span>
<a href="#l14.42"></a><span id="l14.42" class="difflineminus">-      &lt;/modevbox&gt;</span>
<a href="#l14.43"></a><span id="l14.43" class="difflineplus">+      &lt;/calendar-modevbox&gt;</span>
<a href="#l14.44"></a><span id="l14.44">       &lt;hbox id=&quot;calendarContent&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l14.45"></a><span id="l14.45">         &lt;vbox id=&quot;ltnSidebar&quot;</span>
<a href="#l14.46"></a><span id="l14.46">               width=&quot;200&quot;</span>
<a href="#l14.47"></a><span id="l14.47">               persist=&quot;collapsed width&quot;&gt;</span>
<a href="#l14.48"></a><span id="l14.48" class="difflineminus">-          &lt;modevbox id=&quot;minimonth-pane&quot; mode=&quot;calendar,task&quot; broadcaster=&quot;modeBroadcaster&quot; refcontrol=&quot;calendar_toggle_minimonthpane_command&quot;&gt;</span>
<a href="#l14.49"></a><span id="l14.49" class="difflineplus">+          &lt;calendar-modevbox id=&quot;minimonth-pane&quot;</span>
<a href="#l14.50"></a><span id="l14.50" class="difflineplus">+                             mode=&quot;calendar,task&quot;</span>
<a href="#l14.51"></a><span id="l14.51" class="difflineplus">+                             broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l14.52"></a><span id="l14.52" class="difflineplus">+                             refcontrol=&quot;calendar_toggle_minimonthpane_command&quot;&gt;</span>
<a href="#l14.53"></a><span id="l14.53">             &lt;vbox align=&quot;center&quot;&gt;</span>
<a href="#l14.54"></a><span id="l14.54">               &lt;hbox id=&quot;calMinimonthBox&quot; pack=&quot;center&quot;&gt;</span>
<a href="#l14.55"></a><span id="l14.55">                 &lt;calendar-minimonth id=&quot;calMinimonth&quot; onchange=&quot;minimonthPick(this.value);&quot;/&gt;</span>
<a href="#l14.56"></a><span id="l14.56">               &lt;/hbox&gt;</span>
<a href="#l14.57"></a><span id="l14.57">             &lt;/vbox&gt;</span>
<a href="#l14.58"></a><span id="l14.58" class="difflineminus">-          &lt;/modevbox&gt;</span>
<a href="#l14.59"></a><span id="l14.59" class="difflineplus">+          &lt;/calendar-modevbox&gt;</span>
<a href="#l14.60"></a><span id="l14.60">           &lt;separator id=&quot;minimonth-splitter&quot; minwidth=&quot;100&quot;/&gt;</span>
<a href="#l14.61"></a><span id="l14.61">           &lt;vbox id=&quot;calendar-panel&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l14.62"></a><span id="l14.62" class="difflineminus">-            &lt;modevbox id=&quot;task-filter-pane&quot; mode=&quot;task&quot; broadcaster=&quot;modeBroadcaster&quot; refcontrol=&quot;calendar_toggle_filter_command&quot;&gt;</span>
<a href="#l14.63"></a><span id="l14.63" class="difflineplus">+            &lt;calendar-modevbox id=&quot;task-filter-pane&quot;</span>
<a href="#l14.64"></a><span id="l14.64" class="difflineplus">+                               mode=&quot;task&quot;</span>
<a href="#l14.65"></a><span id="l14.65" class="difflineplus">+                               broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l14.66"></a><span id="l14.66" class="difflineplus">+                               refcontrol=&quot;calendar_toggle_filter_command&quot;&gt;</span>
<a href="#l14.67"></a><span id="l14.67">               &lt;checkbox id=&quot;task-tree-filter-header&quot;</span>
<a href="#l14.68"></a><span id="l14.68">                                checked=&quot;true&quot;</span>
<a href="#l14.69"></a><span id="l14.69">                                class=&quot;treenode-checkbox&quot;</span>
<a href="#l14.70"></a><span id="l14.70">                                label=&quot;&amp;calendar.task.filter.title.label;&quot;/&gt;</span>
<a href="#l14.71"></a><span id="l14.71" class="difflineminus">-              &lt;modevbox id=&quot;task-filtertree-pane&quot; flex=&quot;1&quot; mode=&quot;task&quot; broadcaster=&quot;modeBroadcaster&quot; refcontrol=&quot;task-tree-filter-header&quot;&gt;</span>
<a href="#l14.72"></a><span id="l14.72" class="difflineplus">+              &lt;calendar-modevbox id=&quot;task-filtertree-pane&quot;</span>
<a href="#l14.73"></a><span id="l14.73" class="difflineplus">+                                 flex=&quot;1&quot;</span>
<a href="#l14.74"></a><span id="l14.74" class="difflineplus">+                                 mode=&quot;task&quot;</span>
<a href="#l14.75"></a><span id="l14.75" class="difflineplus">+                                 broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l14.76"></a><span id="l14.76" class="difflineplus">+                                 refcontrol=&quot;task-tree-filter-header&quot;&gt;</span>
<a href="#l14.77"></a><span id="l14.77">                 &lt;radiogroup id=&quot;task-tree-filtergroup&quot; class=&quot;task-tree-subpane&quot;</span>
<a href="#l14.78"></a><span id="l14.78">                             persist=&quot;value&quot;&gt;</span>
<a href="#l14.79"></a><span id="l14.79">                   &lt;observes element=&quot;filterBroadcaster&quot;</span>
<a href="#l14.80"></a><span id="l14.80">                             attribute=&quot;value&quot;</span>
<a href="#l14.81"></a><span id="l14.81">                             onbroadcast=&quot;checkRadioControl(this.parentNode, document.getElementById('filterBroadcaster').getAttribute('value'));&quot;/&gt;</span>
<a href="#l14.82"></a><span id="l14.82">                   &lt;radio id=&quot;opt_throughcurrent_filter&quot; label=&quot;&amp;calendar.task.filter.current.label;&quot; value=&quot;throughcurrent&quot; command=&quot;calendar_task_filter_command&quot;/&gt;</span>
<a href="#l14.83"></a><span id="l14.83">                   &lt;radio id=&quot;opt_today_filter&quot; label=&quot;&amp;calendar.task.filter.today.label;&quot; value=&quot;throughtoday&quot; command=&quot;calendar_task_filter_command&quot;/&gt;</span>
<a href="#l14.84"></a><span id="l14.84">                   &lt;radio id=&quot;opt_next7days_filter&quot; label=&quot;&amp;calendar.task.filter.next7days.label;&quot; value=&quot;throughsevendays&quot; command=&quot;calendar_task_filter_command&quot;/&gt;</span>
<a href="#l14.85"></a><span id="l14.85">                   &lt;radio id=&quot;opt_notstarted_filter&quot; label=&quot;&amp;calendar.task.filter.notstarted.label;&quot; value=&quot;notstarted&quot; command=&quot;calendar_task_filter_command&quot;/&gt;</span>
<a href="#l14.86"></a><span id="l14.86">                   &lt;radio id=&quot;opt_overdue_filter&quot; label=&quot;&amp;calendar.task.filter.overdue.label;&quot; value=&quot;overdue&quot; command=&quot;calendar_task_filter_command&quot;/&gt;</span>
<a href="#l14.87"></a><span id="l14.87">                   &lt;radio id=&quot;opt_completed_filter&quot; label=&quot;&amp;calendar.task.filter.completed.label;&quot; value=&quot;completed&quot; command=&quot;calendar_task_filter_command&quot;/&gt;</span>
<a href="#l14.88"></a><span id="l14.88">                   &lt;radio id=&quot;opt_open_filter&quot; label=&quot;&amp;calendar.task.filter.open.label;&quot; value=&quot;open&quot; command=&quot;calendar_task_filter_command&quot;/&gt;</span>
<a href="#l14.89"></a><span id="l14.89">                   &lt;radio id=&quot;opt_all_filter&quot; label=&quot;&amp;calendar.task.filter.all.label;&quot; value=&quot;all&quot; command=&quot;calendar_task_filter_command&quot;/&gt;</span>
<a href="#l14.90"></a><span id="l14.90">                 &lt;/radiogroup&gt;</span>
<a href="#l14.91"></a><span id="l14.91" class="difflineminus">-              &lt;/modevbox&gt;</span>
<a href="#l14.92"></a><span id="l14.92" class="difflineminus">-            &lt;/modevbox&gt;</span>
<a href="#l14.93"></a><span id="l14.93" class="difflineminus">-            &lt;modevbox id=&quot;calendar-list-pane&quot; flex=&quot;1&quot; mode=&quot;calendar,task&quot; broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l14.94"></a><span id="l14.94" class="difflineminus">-                      refcontrol=&quot;calendar_toggle_calendarlist_command&quot;&gt;</span>
<a href="#l14.95"></a><span id="l14.95" class="difflineplus">+              &lt;/calendar-modevbox&gt;</span>
<a href="#l14.96"></a><span id="l14.96" class="difflineplus">+            &lt;/calendar-modevbox&gt;</span>
<a href="#l14.97"></a><span id="l14.97" class="difflineplus">+            &lt;calendar-modevbox id=&quot;calendar-list-pane&quot;</span>
<a href="#l14.98"></a><span id="l14.98" class="difflineplus">+                               flex=&quot;1&quot;</span>
<a href="#l14.99"></a><span id="l14.99" class="difflineplus">+                               mode=&quot;calendar,task&quot;</span>
<a href="#l14.100"></a><span id="l14.100" class="difflineplus">+                               broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l14.101"></a><span id="l14.101" class="difflineplus">+                               refcontrol=&quot;calendar_toggle_calendarlist_command&quot;&gt;</span>
<a href="#l14.102"></a><span id="l14.102">               &lt;checkbox id=&quot;calendar-list-header&quot;</span>
<a href="#l14.103"></a><span id="l14.103">                                checked=&quot;true&quot;</span>
<a href="#l14.104"></a><span id="l14.104">                                class=&quot;treenode-checkbox&quot;</span>
<a href="#l14.105"></a><span id="l14.105">                                ondrop=&quot;return document.getElementById('calendar-list-tree-widget').foreignDrop(event)&quot;</span>
<a href="#l14.106"></a><span id="l14.106">                                ondragenter=&quot;return document.getElementById('calendar-list-tree-widget').foreignCanDrop(event)&quot;</span>
<a href="#l14.107"></a><span id="l14.107">                                ondragover=&quot;return document.getElementById('calendar-list-tree-widget').foreignCanDrop(event)&quot;</span>
<a href="#l14.108"></a><span id="l14.108">                                label=&quot;&amp;calendar.list.header.label;&quot;/&gt;</span>
<a href="#l14.109"></a><span id="l14.109" class="difflineminus">-              &lt;modevbox id=&quot;calendar-listtree-pane&quot; flex=&quot;1&quot; mode=&quot;calendar,task&quot; broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l14.110"></a><span id="l14.110" class="difflineminus">-                        refcontrol=&quot;calendar-list-header&quot;&gt;</span>
<a href="#l14.111"></a><span id="l14.111" class="difflineminus">-</span>
<a href="#l14.112"></a><span id="l14.112" class="difflineplus">+              &lt;calendar-modevbox id=&quot;calendar-listtree-pane&quot;</span>
<a href="#l14.113"></a><span id="l14.113" class="difflineplus">+                                 flex=&quot;1&quot;</span>
<a href="#l14.114"></a><span id="l14.114" class="difflineplus">+                                 mode=&quot;calendar,task&quot;</span>
<a href="#l14.115"></a><span id="l14.115" class="difflineplus">+                                 broadcaster=&quot;modeBroadcaster&quot;</span>
<a href="#l14.116"></a><span id="l14.116" class="difflineplus">+                                 refcontrol=&quot;calendar-list-header&quot;&gt;</span>
<a href="#l14.117"></a><span id="l14.117">                 &lt;tree is=&quot;calendar-list-tree-full&quot; id=&quot;calendar-list-tree-widget&quot;</span>
<a href="#l14.118"></a><span id="l14.118">                       writable=&quot;true&quot;</span>
<a href="#l14.119"></a><span id="l14.119">                       allowdrag=&quot;true&quot;</span>
<a href="#l14.120"></a><span id="l14.120">                       onselect=&quot;document.commandDispatcher.updateCommands('calendar_commands')&quot;</span>
<a href="#l14.121"></a><span id="l14.121">                       childtooltip=&quot;calendar-list-tooltip&quot;</span>
<a href="#l14.122"></a><span id="l14.122">                       childcontext=&quot;list-calendars-context-menu&quot;/&gt;</span>
<a href="#l14.123"></a><span id="l14.123" class="difflineminus">-              &lt;/modevbox&gt;</span>
<a href="#l14.124"></a><span id="l14.124" class="difflineminus">-          &lt;/modevbox&gt;</span>
<a href="#l14.125"></a><span id="l14.125" class="difflineplus">+              &lt;/calendar-modevbox&gt;</span>
<a href="#l14.126"></a><span id="l14.126" class="difflineplus">+            &lt;/calendar-modevbox&gt;</span>
<a href="#l14.127"></a><span id="l14.127">           &lt;/vbox&gt;</span>
<a href="#l14.128"></a><span id="l14.128">         &lt;/vbox&gt;</span>
<a href="#l14.129"></a><span id="l14.129"> </span>
<a href="#l14.130"></a><span id="l14.130">         &lt;splitter id=&quot;calsidebar_splitter&quot;</span>
<a href="#l14.131"></a><span id="l14.131">                   collapse=&quot;before&quot;</span>
<a href="#l14.132"></a><span id="l14.132">                   persist=&quot;state&quot;</span>
<a href="#l14.133"></a><span id="l14.133">                   class=&quot;calendar-sidebar-splitter&quot;/&gt;</span>
<a href="#l14.134"></a><span id="l14.134"> </span>
<a href="#l14.135"></a><span id="l14.135" class="difflineat">@@ -275,17 +295,17 @@</span>
<a href="#l14.136"></a><span id="l14.136">   &lt;hbox id=&quot;tabmail-container&quot;&gt;</span>
<a href="#l14.137"></a><span id="l14.137">     &lt;splitter id=&quot;today-splitter&quot;</span>
<a href="#l14.138"></a><span id="l14.138">               collapse=&quot;after&quot;</span>
<a href="#l14.139"></a><span id="l14.139">               resizebefore=&quot;closest&quot;</span>
<a href="#l14.140"></a><span id="l14.140">               state=&quot;collapsed&quot;</span>
<a href="#l14.141"></a><span id="l14.141">               class=&quot;calendar-sidebar-splitter&quot;</span>
<a href="#l14.142"></a><span id="l14.142">               oncommand=&quot;TodayPane.onCommandTodaySplitter();&quot;&gt;</span>
<a href="#l14.143"></a><span id="l14.143">     &lt;/splitter&gt;</span>
<a href="#l14.144"></a><span id="l14.144" class="difflineminus">-    &lt;modevbox id=&quot;today-pane-panel&quot; /&gt;</span>
<a href="#l14.145"></a><span id="l14.145" class="difflineplus">+    &lt;calendar-modevbox id=&quot;today-pane-panel&quot;/&gt;</span>
<a href="#l14.146"></a><span id="l14.146">   &lt;/hbox&gt;</span>
<a href="#l14.147"></a><span id="l14.147"> </span>
<a href="#l14.148"></a><span id="l14.148">   &lt;hbox id=&quot;status-bar&quot;&gt;</span>
<a href="#l14.149"></a><span id="l14.149">     &lt;!-- event/task in tab statusbarpanels --&gt;</span>
<a href="#l14.150"></a><span id="l14.150">     &lt;hbox id=&quot;status-privacy&quot;</span>
<a href="#l14.151"></a><span id="l14.151">           class=&quot;statusbarpanel event-dialog&quot;</span>
<a href="#l14.152"></a><span id="l14.152">           align=&quot;center&quot;</span>
<a href="#l14.153"></a><span id="l14.153">           flex=&quot;1&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/calendar/providers/gdata/content/gdata-calendar-creation.xul</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/calendar/providers/gdata/content/gdata-calendar-creation.xul</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -4,17 +4,16 @@</span>
<a href="#l15.4"></a><span id="l15.4">    - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l15.5"></a><span id="l15.5"> </span>
<a href="#l15.6"></a><span id="l15.6"> &lt;!DOCTYPE overlay [</span>
<a href="#l15.7"></a><span id="l15.7">   &lt;!ENTITY % gdata SYSTEM &quot;chrome://gdata-provider/locale/gdata.dtd&quot;&gt; %gdata;</span>
<a href="#l15.8"></a><span id="l15.8">   &lt;!ENTITY % calendarCreation SYSTEM &quot;chrome://calendar/locale/calendarCreation.dtd&quot; &gt; %calendarCreation;</span>
<a href="#l15.9"></a><span id="l15.9"> ]&gt;</span>
<a href="#l15.10"></a><span id="l15.10"> </span>
<a href="#l15.11"></a><span id="l15.11"> &lt;?xml-stylesheet href=&quot;chrome://calendar/skin/calendar-management.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-&lt;?xml-stylesheet href=&quot;chrome://calendar/content/widgets/calendar-widget-bindings.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l15.13"></a><span id="l15.13"> &lt;?xml-stylesheet href=&quot;chrome://gdata-provider/skin/gdata-bindings.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l15.14"></a><span id="l15.14"> </span>
<a href="#l15.15"></a><span id="l15.15"> &lt;overlay id=&quot;gdataCalendarCreation&quot;</span>
<a href="#l15.16"></a><span id="l15.16">          xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot; xmlns:html=&quot;http://www.w3.org/1999/xhtml&quot;&gt;</span>
<a href="#l15.17"></a><span id="l15.17"> </span>
<a href="#l15.18"></a><span id="l15.18">   &lt;script src=&quot;chrome://gdata-provider/content/calendar-list-tree.js&quot;/&gt;</span>
<a href="#l15.19"></a><span id="l15.19">   &lt;script src=&quot;chrome://gdata-provider/content/gdata-list-tree.js&quot;/&gt;</span>
<a href="#l15.20"></a><span id="l15.20">   &lt;script src=&quot;chrome://gdata-provider/content/gdata-calendar-creation.js&quot;/&gt;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:31Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

