<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 6770:870a3a0ea428db041c06a3db9c1f30427dc6de11</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 870a3a0ea428db041c06a3db9c1f30427dc6de11" />
<meta property="og:url" content="/comm-central/rev/870a3a0ea428db041c06a3db9c1f30427dc6de11" />
<meta property="og:description" content="Bug 577887 Kill MOZ_LDAP_XPCOM_EXPERIMENTAL. r=Callek and verbal agreement from dmose" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 870a3a0ea428db041c06a3db9c1f30427dc6de11 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/870a3a0ea428db041c06a3db9c1f30427dc6de11">shortlog</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/870a3a0ea428db041c06a3db9c1f30427dc6de11">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11">files</a> |
changeset |
<a href="/comm-central/raw-rev/870a3a0ea428db041c06a3db9c1f30427dc6de11">raw</a>  | <a href="/comm-central/archive/870a3a0ea428db041c06a3db9c1f30427dc6de11.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=577887">Bug 577887</a> Kill MOZ_LDAP_XPCOM_EXPERIMENTAL. r=Callek and verbal agreement from dmose
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#77;&#97;&#114;&#107;&#32;&#66;&#97;&#110;&#110;&#101;&#114;&#32;&#60;&#98;&#117;&#103;&#122;&#105;&#108;&#108;&#97;&#64;&#115;&#116;&#97;&#110;&#100;&#97;&#114;&#100;&#56;&#46;&#112;&#108;&#117;&#115;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 02 Dec 2010 15:07:02 +0000</td></tr>

<tr>
 <td>changeset 6770</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/870a3a0ea428db041c06a3db9c1f30427dc6de11">870a3a0ea428db041c06a3db9c1f30427dc6de11</a></td>
</tr>



<tr>
<td>parent 6769</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/3c698d5b775d6f9b595c4a9fa86805ad15486738">3c698d5b775d6f9b595c4a9fa86805ad15486738</a>
</td>
</tr>

<tr>
<td>child 6771</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/6055a867c7a8dbca2b783a23ed8d4ca5fce07da9">6055a867c7a8dbca2b783a23ed8d4ca5fce07da9</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=870a3a0ea428db041c06a3db9c1f30427dc6de11">5202</a></td></tr>
<tr><td>push user</td><td>bugzilla@standard8.plus.com</td></tr>
<tr><td>push date</td><td class="date age">Thu, 02 Dec 2010 15:10:12 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@954326b49160 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=954326b49160aa51011f7af116ee417c65f2d534">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=954326b49160aa51011f7af116ee417c65f2d534&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=954326b49160aa51011f7af116ee417c65f2d534&newProject=comm-central&newRevision=870a3a0ea428db041c06a3db9c1f30427dc6de11&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=954326b49160aa51011f7af116ee417c65f2d534&newProject=comm-central&newRevision=870a3a0ea428db041c06a3db9c1f30427dc6de11&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=954326b49160aa51011f7af116ee417c65f2d534&newProject=comm-central&newRevision=870a3a0ea428db041c06a3db9c1f30427dc6de11&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Callek%29&revcount=50">Callek</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=577887">577887</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=577887">Bug 577887</a> Kill MOZ_LDAP_XPCOM_EXPERIMENTAL. r=Callek and verbal agreement from dmose</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/config/autoconf.mk.in">config/autoconf.mk.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/config/autoconf.mk.in">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/config/autoconf.mk.in">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/config/autoconf.mk.in">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/config/autoconf.mk.in">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/config/autoconf.mk.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/configure.in">configure.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/configure.in">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/configure.in">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/configure.in">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/configure.in">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/configure.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/makefiles.sh">ldap/makefiles.sh</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/makefiles.sh">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/makefiles.sh">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/makefiles.sh">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/makefiles.sh">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/makefiles.sh">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/Makefile.in">ldap/xpcom/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/Makefile.in">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/Makefile.in">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/Makefile.in">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/Makefile.in">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/Makefile.in">ldap/xpcom/base/Makefile.in</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/Makefile.in">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/Makefile.in">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/Makefile.in">ldap/xpcom/base/public/Makefile.in</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/Makefile.in">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/Makefile.in">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPBERElement.idl">ldap/xpcom/base/public/nsILDAPBERElement.idl</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPBERElement.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPBERElement.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPBERElement.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPBERValue.idl">ldap/xpcom/base/public/nsILDAPBERValue.idl</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPBERValue.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPBERValue.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPBERValue.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPConnection.idl">ldap/xpcom/base/public/nsILDAPConnection.idl</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPConnection.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPConnection.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPConnection.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPControl.idl">ldap/xpcom/base/public/nsILDAPControl.idl</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPControl.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPControl.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPControl.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPErrors.idl">ldap/xpcom/base/public/nsILDAPErrors.idl</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPErrors.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPErrors.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPErrors.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPMessage.idl">ldap/xpcom/base/public/nsILDAPMessage.idl</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPMessage.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPMessage.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPMessage.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPMessageListener.idl">ldap/xpcom/base/public/nsILDAPMessageListener.idl</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPMessageListener.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPMessageListener.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPMessageListener.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPModification.idl">ldap/xpcom/base/public/nsILDAPModification.idl</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPModification.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPModification.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPModification.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPOperation.idl">ldap/xpcom/base/public/nsILDAPOperation.idl</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPOperation.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPOperation.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPOperation.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPServer.idl">ldap/xpcom/base/public/nsILDAPServer.idl</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPServer.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPServer.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPServer.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPService.idl">ldap/xpcom/base/public/nsILDAPService.idl</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPService.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPService.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPService.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPSyncQuery.idl">ldap/xpcom/base/public/nsILDAPSyncQuery.idl</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPSyncQuery.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPSyncQuery.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPSyncQuery.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPURL.idl">ldap/xpcom/base/public/nsILDAPURL.idl</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPURL.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPURL.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/public/nsILDAPURL.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/Makefile.in">ldap/xpcom/base/src/Makefile.in</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/Makefile.in">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/Makefile.in">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/ldapComponents.manifest">ldap/xpcom/base/src/ldapComponents.manifest</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/ldapComponents.manifest">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/ldapComponents.manifest">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/ldapComponents.manifest">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPBERElement.cpp">ldap/xpcom/base/src/nsLDAPBERElement.cpp</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPBERElement.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPBERElement.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPBERElement.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPBERElement.h">ldap/xpcom/base/src/nsLDAPBERElement.h</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPBERElement.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPBERElement.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPBERElement.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPBERValue.cpp">ldap/xpcom/base/src/nsLDAPBERValue.cpp</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPBERValue.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPBERValue.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPBERValue.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPBERValue.h">ldap/xpcom/base/src/nsLDAPBERValue.h</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPBERValue.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPBERValue.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPBERValue.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPChannel.cpp">ldap/xpcom/base/src/nsLDAPChannel.cpp</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPChannel.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPChannel.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPChannel.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPChannel.h">ldap/xpcom/base/src/nsLDAPChannel.h</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPChannel.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPChannel.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPChannel.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPConnection.cpp">ldap/xpcom/base/src/nsLDAPConnection.cpp</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPConnection.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPConnection.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPConnection.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPConnection.h">ldap/xpcom/base/src/nsLDAPConnection.h</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPConnection.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPConnection.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPConnection.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPControl.cpp">ldap/xpcom/base/src/nsLDAPControl.cpp</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPControl.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPControl.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPControl.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPControl.h">ldap/xpcom/base/src/nsLDAPControl.h</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPControl.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPControl.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPControl.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPInternal.h">ldap/xpcom/base/src/nsLDAPInternal.h</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPInternal.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPInternal.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPInternal.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPMessage.cpp">ldap/xpcom/base/src/nsLDAPMessage.cpp</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPMessage.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPMessage.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPMessage.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPMessage.h">ldap/xpcom/base/src/nsLDAPMessage.h</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPMessage.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPMessage.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPMessage.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPModification.cpp">ldap/xpcom/base/src/nsLDAPModification.cpp</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPModification.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPModification.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPModification.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPModification.h">ldap/xpcom/base/src/nsLDAPModification.h</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPModification.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPModification.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPModification.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPOperation.cpp">ldap/xpcom/base/src/nsLDAPOperation.cpp</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPOperation.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPOperation.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPOperation.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPOperation.h">ldap/xpcom/base/src/nsLDAPOperation.h</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPOperation.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPOperation.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPOperation.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPProtocolHandler.js">ldap/xpcom/base/src/nsLDAPProtocolHandler.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPProtocolHandler.js">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPProtocolHandler.js">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPProtocolHandler.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPProtocolModule.cpp">ldap/xpcom/base/src/nsLDAPProtocolModule.cpp</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPProtocolModule.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPProtocolModule.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPProtocolModule.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPSecurityGlue.cpp">ldap/xpcom/base/src/nsLDAPSecurityGlue.cpp</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPSecurityGlue.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPSecurityGlue.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPSecurityGlue.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPServer.cpp">ldap/xpcom/base/src/nsLDAPServer.cpp</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPServer.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPServer.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPServer.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPServer.h">ldap/xpcom/base/src/nsLDAPServer.h</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPServer.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPServer.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPServer.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPService.cpp">ldap/xpcom/base/src/nsLDAPService.cpp</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPService.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPService.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPService.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPService.h">ldap/xpcom/base/src/nsLDAPService.h</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPService.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPService.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPService.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPSyncQuery.cpp">ldap/xpcom/base/src/nsLDAPSyncQuery.cpp</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPSyncQuery.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPSyncQuery.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPSyncQuery.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPSyncQuery.h">ldap/xpcom/base/src/nsLDAPSyncQuery.h</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPSyncQuery.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPSyncQuery.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPSyncQuery.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPURL.cpp">ldap/xpcom/base/src/nsLDAPURL.cpp</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPURL.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPURL.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPURL.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPURL.h">ldap/xpcom/base/src/nsLDAPURL.h</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPURL.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPURL.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/base/src/nsLDAPURL.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/datasource/Makefile.in">ldap/xpcom/datasource/Makefile.in</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/datasource/Makefile.in">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/datasource/Makefile.in">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/datasource/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/datasource/nsLDAPDataSource.js">ldap/xpcom/datasource/nsLDAPDataSource.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/datasource/nsLDAPDataSource.js">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/datasource/nsLDAPDataSource.js">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/datasource/nsLDAPDataSource.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/Makefile.in">ldap/xpcom/public/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/Makefile.in">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/Makefile.in">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/Makefile.in">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/Makefile.in">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPBERElement.idl">ldap/xpcom/public/nsILDAPBERElement.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPBERElement.idl">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPBERElement.idl">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPBERElement.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPBERElement.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPBERElement.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPBERValue.idl">ldap/xpcom/public/nsILDAPBERValue.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPBERValue.idl">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPBERValue.idl">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPBERValue.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPBERValue.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPBERValue.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPConnection.idl">ldap/xpcom/public/nsILDAPConnection.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPConnection.idl">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPConnection.idl">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPConnection.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPConnection.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPConnection.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPControl.idl">ldap/xpcom/public/nsILDAPControl.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPControl.idl">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPControl.idl">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPControl.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPControl.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPControl.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPErrors.idl">ldap/xpcom/public/nsILDAPErrors.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPErrors.idl">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPErrors.idl">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPErrors.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPErrors.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPErrors.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPMessage.idl">ldap/xpcom/public/nsILDAPMessage.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPMessage.idl">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPMessage.idl">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPMessage.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPMessage.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPMessage.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPMessageListener.idl">ldap/xpcom/public/nsILDAPMessageListener.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPMessageListener.idl">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPMessageListener.idl">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPMessageListener.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPMessageListener.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPMessageListener.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPModification.idl">ldap/xpcom/public/nsILDAPModification.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPModification.idl">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPModification.idl">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPModification.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPModification.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPModification.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPOperation.idl">ldap/xpcom/public/nsILDAPOperation.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPOperation.idl">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPOperation.idl">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPOperation.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPOperation.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPOperation.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPServer.idl">ldap/xpcom/public/nsILDAPServer.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPServer.idl">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPServer.idl">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPServer.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPServer.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPServer.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPService.idl">ldap/xpcom/public/nsILDAPService.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPService.idl">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPService.idl">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPService.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPService.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPService.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPSyncQuery.idl">ldap/xpcom/public/nsILDAPSyncQuery.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPSyncQuery.idl">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPSyncQuery.idl">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPSyncQuery.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPSyncQuery.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPSyncQuery.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPURL.idl">ldap/xpcom/public/nsILDAPURL.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPURL.idl">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPURL.idl">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPURL.idl">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPURL.idl">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/public/nsILDAPURL.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/Makefile.in">ldap/xpcom/src/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/Makefile.in">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/Makefile.in">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/Makefile.in">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/Makefile.in">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/ldapComponents.manifest">ldap/xpcom/src/ldapComponents.manifest</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/ldapComponents.manifest">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/ldapComponents.manifest">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/ldapComponents.manifest">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/ldapComponents.manifest">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/ldapComponents.manifest">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERElement.cpp">ldap/xpcom/src/nsLDAPBERElement.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERElement.cpp">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERElement.cpp">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERElement.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERElement.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERElement.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERElement.h">ldap/xpcom/src/nsLDAPBERElement.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERElement.h">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERElement.h">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERElement.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERElement.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERElement.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERValue.cpp">ldap/xpcom/src/nsLDAPBERValue.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERValue.cpp">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERValue.cpp">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERValue.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERValue.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERValue.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERValue.h">ldap/xpcom/src/nsLDAPBERValue.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERValue.h">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERValue.h">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERValue.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERValue.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPBERValue.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPConnection.cpp">ldap/xpcom/src/nsLDAPConnection.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPConnection.cpp">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPConnection.cpp">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPConnection.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPConnection.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPConnection.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPConnection.h">ldap/xpcom/src/nsLDAPConnection.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPConnection.h">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPConnection.h">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPConnection.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPConnection.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPConnection.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPControl.cpp">ldap/xpcom/src/nsLDAPControl.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPControl.cpp">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPControl.cpp">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPControl.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPControl.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPControl.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPControl.h">ldap/xpcom/src/nsLDAPControl.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPControl.h">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPControl.h">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPControl.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPControl.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPControl.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPInternal.h">ldap/xpcom/src/nsLDAPInternal.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPInternal.h">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPInternal.h">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPInternal.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPInternal.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPInternal.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPMessage.cpp">ldap/xpcom/src/nsLDAPMessage.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPMessage.cpp">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPMessage.cpp">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPMessage.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPMessage.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPMessage.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPMessage.h">ldap/xpcom/src/nsLDAPMessage.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPMessage.h">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPMessage.h">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPMessage.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPMessage.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPMessage.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPModification.cpp">ldap/xpcom/src/nsLDAPModification.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPModification.cpp">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPModification.cpp">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPModification.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPModification.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPModification.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPModification.h">ldap/xpcom/src/nsLDAPModification.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPModification.h">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPModification.h">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPModification.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPModification.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPModification.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPOperation.cpp">ldap/xpcom/src/nsLDAPOperation.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPOperation.cpp">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPOperation.cpp">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPOperation.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPOperation.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPOperation.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPOperation.h">ldap/xpcom/src/nsLDAPOperation.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPOperation.h">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPOperation.h">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPOperation.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPOperation.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPOperation.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPProtocolHandler.js">ldap/xpcom/src/nsLDAPProtocolHandler.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPProtocolHandler.js">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPProtocolHandler.js">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPProtocolHandler.js">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPProtocolHandler.js">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPProtocolHandler.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPProtocolModule.cpp">ldap/xpcom/src/nsLDAPProtocolModule.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPProtocolModule.cpp">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPProtocolModule.cpp">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPProtocolModule.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPProtocolModule.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPProtocolModule.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPSecurityGlue.cpp">ldap/xpcom/src/nsLDAPSecurityGlue.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPSecurityGlue.cpp">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPSecurityGlue.cpp">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPSecurityGlue.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPSecurityGlue.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPSecurityGlue.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPServer.cpp">ldap/xpcom/src/nsLDAPServer.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPServer.cpp">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPServer.cpp">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPServer.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPServer.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPServer.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPServer.h">ldap/xpcom/src/nsLDAPServer.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPServer.h">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPServer.h">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPServer.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPServer.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPServer.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPService.cpp">ldap/xpcom/src/nsLDAPService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPService.cpp">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPService.cpp">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPService.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPService.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPService.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPService.h">ldap/xpcom/src/nsLDAPService.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPService.h">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPService.h">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPService.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPService.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPService.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPSyncQuery.cpp">ldap/xpcom/src/nsLDAPSyncQuery.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPSyncQuery.cpp">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPSyncQuery.cpp">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPSyncQuery.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPSyncQuery.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPSyncQuery.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPSyncQuery.h">ldap/xpcom/src/nsLDAPSyncQuery.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPSyncQuery.h">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPSyncQuery.h">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPSyncQuery.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPSyncQuery.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPSyncQuery.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPURL.cpp">ldap/xpcom/src/nsLDAPURL.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPURL.cpp">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPURL.cpp">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPURL.cpp">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPURL.cpp">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPURL.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPURL.h">ldap/xpcom/src/nsLDAPURL.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPURL.h">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPURL.h">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPURL.h">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPURL.h">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/src/nsLDAPURL.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/Makefile.in">ldap/xpcom/tests/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/Makefile.in">file</a> |
<a href="/comm-central/annotate/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/Makefile.in">annotate</a> |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/Makefile.in">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/Makefile.in">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/example.rdf">ldap/xpcom/tests/example.rdf</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/example.rdf">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/example.rdf">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/example.rdf">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/example.xul">ldap/xpcom/tests/example.xul</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/example.xul">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/example.xul">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/example.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/jar.mn">ldap/xpcom/tests/jar.mn</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/jar.mn">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/jar.mn">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/ldapshell.js">ldap/xpcom/tests/ldapshell.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/ldapshell.js">diff</a> |
<a href="/comm-central/comparison/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/ldapshell.js">comparison</a> |
<a href="/comm-central/log/870a3a0ea428db041c06a3db9c1f30427dc6de11/ldap/xpcom/tests/ldapshell.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/config/autoconf.mk.in</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/config/autoconf.mk.in</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -115,17 +115,16 @@ MOZ_COMPOSER = @MOZ_COMPOSER@</span>
<a href="#l1.4"></a><span id="l1.4"> BUILD_STATIC_LIBS = @BUILD_STATIC_LIBS@</span>
<a href="#l1.5"></a><span id="l1.5"> MOZ_ENABLE_LIBXUL = @MOZ_ENABLE_LIBXUL@</span>
<a href="#l1.6"></a><span id="l1.6"> ENABLE_TESTS	= @ENABLE_TESTS@</span>
<a href="#l1.7"></a><span id="l1.7"> IBMBIDI = @IBMBIDI@</span>
<a href="#l1.8"></a><span id="l1.8"> MOZ_UNIVERSALCHARDET = @MOZ_UNIVERSALCHARDET@</span>
<a href="#l1.9"></a><span id="l1.9"> ACCESSIBILITY = @ACCESSIBILITY@</span>
<a href="#l1.10"></a><span id="l1.10"> MOZ_USE_NATIVE_UCONV = @MOZ_USE_NATIVE_UCONV@</span>
<a href="#l1.11"></a><span id="l1.11"> MOZ_LDAP_XPCOM = @MOZ_LDAP_XPCOM@</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-MOZ_LDAP_XPCOM_EXPERIMENTAL = @MOZ_LDAP_XPCOM_EXPERIMENTAL@</span>
<a href="#l1.13"></a><span id="l1.13"> MOZ_BRANDING_DIRECTORY = @MOZ_BRANDING_DIRECTORY@</span>
<a href="#l1.14"></a><span id="l1.14"> MOZ_INSTALLER	= @MOZ_INSTALLER@</span>
<a href="#l1.15"></a><span id="l1.15"> MOZ_UPDATER	= @MOZ_UPDATER@</span>
<a href="#l1.16"></a><span id="l1.16"> MOZ_UPDATE_PACKAGING	= @MOZ_UPDATE_PACKAGING@</span>
<a href="#l1.17"></a><span id="l1.17"> MOZ_NO_ACTIVEX_SUPPORT = @MOZ_NO_ACTIVEX_SUPPORT@</span>
<a href="#l1.18"></a><span id="l1.18"> MOZ_DISABLE_VISTA_SDK_REQUIREMENTS = @MOZ_DISABLE_VISTA_SDK_REQUIREMENTS@</span>
<a href="#l1.19"></a><span id="l1.19"> MOZ_SPELLCHECK = @MOZ_SPELLCHECK@</span>
<a href="#l1.20"></a><span id="l1.20"> MOZ_PROFILELOCKING = @MOZ_PROFILELOCKING@</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/configure.in</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/configure.in</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -5355,26 +5355,16 @@ MOZ_ARG_ENABLE_BOOL(tree-freetype,</span>
<a href="#l2.4"></a><span id="l2.4"> [  --enable-tree-freetype         Enable Tree FreeType],</span>
<a href="#l2.5"></a><span id="l2.5">     MOZ_TREE_FREETYPE=1,</span>
<a href="#l2.6"></a><span id="l2.6">     MOZ_TREE_FREETYPE= )</span>
<a href="#l2.7"></a><span id="l2.7"> if test -n &quot;$MOZ_TREE_FREETYPE&quot;; then</span>
<a href="#l2.8"></a><span id="l2.8">    CAIRO_FT_LIBS='$(call EXPAND_LIBNAME_PATH,freetype2,$(LIBXUL_DIST)/lib)'</span>
<a href="#l2.9"></a><span id="l2.9"> fi</span>
<a href="#l2.10"></a><span id="l2.10"> </span>
<a href="#l2.11"></a><span id="l2.11"> dnl ========================================================</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-dnl experimental ldap features</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-dnl ========================================================</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-MOZ_ARG_ENABLE_BOOL(ldap-experimental,</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineminus">-[  --enable-ldap-experimental</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-                          Enable LDAP experimental features],</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineminus">-    MOZ_LDAP_XPCOM_EXPERIMENTAL=1,</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineminus">-    MOZ_LDAP_XPCOM_EXPERIMENTAL=)</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineminus">-</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineminus">-</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineminus">-dnl ========================================================</span>
<a href="#l2.22"></a><span id="l2.22"> dnl Installer</span>
<a href="#l2.23"></a><span id="l2.23"> dnl ========================================================</span>
<a href="#l2.24"></a><span id="l2.24"> case &quot;$target_os&quot; in</span>
<a href="#l2.25"></a><span id="l2.25">     aix*|solaris*|linux*|msvc*|mks*|cygwin*|mingw*|os2*|wince*|winmo*)</span>
<a href="#l2.26"></a><span id="l2.26">         MOZ_INSTALLER=1</span>
<a href="#l2.27"></a><span id="l2.27">         ;;</span>
<a href="#l2.28"></a><span id="l2.28"> esac</span>
<a href="#l2.29"></a><span id="l2.29"> </span>
<a href="#l2.30"></a><span id="l2.30" class="difflineat">@@ -6819,17 +6809,16 @@ AC_SUBST(MOZ_JSDEBUGGER)</span>
<a href="#l2.31"></a><span id="l2.31"> AC_SUBST(MOZ_PLUGINS)</span>
<a href="#l2.32"></a><span id="l2.32"> AC_SUBST(MOZ_LOG_REFCNT)</span>
<a href="#l2.33"></a><span id="l2.33"> AC_SUBST(MOZ_JPROF)</span>
<a href="#l2.34"></a><span id="l2.34"> AC_SUBST(MOZ_SHARK)</span>
<a href="#l2.35"></a><span id="l2.35"> AC_SUBST(MOZ_PROFILING)</span>
<a href="#l2.36"></a><span id="l2.36"> AC_SUBST(MOZ_USE_NATIVE_UCONV)</span>
<a href="#l2.37"></a><span id="l2.37"> AC_SUBST(MOZ_QUANTIFY)</span>
<a href="#l2.38"></a><span id="l2.38"> AC_SUBST(MOZ_LDAP_XPCOM)</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineminus">-AC_SUBST(MOZ_LDAP_XPCOM_EXPERIMENTAL)</span>
<a href="#l2.40"></a><span id="l2.40"> AC_SUBST(LDAP_CFLAGS)</span>
<a href="#l2.41"></a><span id="l2.41"> AC_SUBST(LDAP_LIBS)</span>
<a href="#l2.42"></a><span id="l2.42"> AC_SUBST(LIBICONV)</span>
<a href="#l2.43"></a><span id="l2.43"> AC_SUBST(MOZ_PLACES_BOOKMARKS)</span>
<a href="#l2.44"></a><span id="l2.44"> AC_SUBST(MOZ_STORAGE)</span>
<a href="#l2.45"></a><span id="l2.45"> AC_SUBST(MOZ_FEEDS)</span>
<a href="#l2.46"></a><span id="l2.46"> AC_SUBST(NS_PRINTING)</span>
<a href="#l2.47"></a><span id="l2.47"> AC_SUBST(MOZ_HELP_VIEWER)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/ldap/makefiles.sh</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/ldap/makefiles.sh</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -33,12 +33,11 @@</span>
<a href="#l3.4"></a><span id="l3.4"> # and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l3.5"></a><span id="l3.5"> # the provisions above, a recipient may use your version of this file under</span>
<a href="#l3.6"></a><span id="l3.6"> # the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l3.7"></a><span id="l3.7"> #</span>
<a href="#l3.8"></a><span id="l3.8"> # ***** END LICENSE BLOCK *****</span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10"> add_makefiles &quot;</span>
<a href="#l3.11"></a><span id="l3.11"> ldap/xpcom/Makefile</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-ldap/xpcom/base/Makefile</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-ldap/xpcom/base/public/Makefile</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineminus">-ldap/xpcom/base/src/Makefile</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+ldap/xpcom/public/Makefile</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+ldap/xpcom/src/Makefile</span>
<a href="#l3.17"></a><span id="l3.17"> &quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/ldap/xpcom/Makefile.in</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/ldap/xpcom/Makefile.in</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -38,24 +38,18 @@</span>
<a href="#l4.4"></a><span id="l4.4"> </span>
<a href="#l4.5"></a><span id="l4.5"> DEPTH		= ../..</span>
<a href="#l4.6"></a><span id="l4.6"> topsrcdir	= @top_srcdir@</span>
<a href="#l4.7"></a><span id="l4.7"> srcdir		= @srcdir@</span>
<a href="#l4.8"></a><span id="l4.8"> VPATH		= @srcdir@</span>
<a href="#l4.9"></a><span id="l4.9"> </span>
<a href="#l4.10"></a><span id="l4.10"> include $(DEPTH)/config/autoconf.mk</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-DIRS		= \</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-		base \</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+PARALLEL_DIRS	= \</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+		public \</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+		src \</span>
<a href="#l4.17"></a><span id="l4.17"> 		$(NULL)</span>
<a href="#l4.18"></a><span id="l4.18"> </span>
<a href="#l4.19"></a><span id="l4.19" class="difflineminus">-ifdef MOZ_LDAP_XPCOM_EXPERIMENTAL</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineminus">-DIRS		+= \</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineminus">-		datasource \</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineminus">-		$(NULL)</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineminus">-endif</span>
<a href="#l4.24"></a><span id="l4.24" class="difflineminus">-</span>
<a href="#l4.25"></a><span id="l4.25"> ifdef ENABLE_TESTS</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineminus">-DIRS		+= \</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineminus">-		tests</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineplus">+TOOL_DIRS += tests</span>
<a href="#l4.29"></a><span id="l4.29"> endif</span>
<a href="#l4.30"></a><span id="l4.30"> </span>
<a href="#l4.31"></a><span id="l4.31"> include $(topsrcdir)/config/rules.mk</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1">deleted file mode 100644</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineminus">--- a/ldap/xpcom/base/Makefile.in</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineplus">+++ /dev/null</span>
<a href="#l5.4"></a><span id="l5.4" class="difflineat">@@ -1,50 +0,0 @@</span>
<a href="#l5.5"></a><span id="l5.5" class="difflineminus">-# </span>
<a href="#l5.6"></a><span id="l5.6" class="difflineminus">-# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l5.7"></a><span id="l5.7" class="difflineminus">-# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l5.8"></a><span id="l5.8" class="difflineminus">-#</span>
<a href="#l5.9"></a><span id="l5.9" class="difflineminus">-# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l5.10"></a><span id="l5.10" class="difflineminus">-# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l5.11"></a><span id="l5.11" class="difflineminus">-# the License. You may obtain a copy of the License at</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-# http://www.mozilla.org/MPL/</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-#</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineminus">-# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineminus">-# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineminus">-# for the specific language governing rights and limitations under the</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineminus">-# License.</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineminus">-#</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineminus">-# The Original Code is the mozilla.org LDAP XPCOM SDK.</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineminus">-#</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineminus">-# The Initial Developer of the Original Code is</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineminus">-# Netscape Communications Corporation.</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineminus">-# Portions created by the Initial Developer are Copyright (C) 2000</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineminus">-# the Initial Developer. All Rights Reserved.</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineminus">-#</span>
<a href="#l5.26"></a><span id="l5.26" class="difflineminus">-# Contributor(s):</span>
<a href="#l5.27"></a><span id="l5.27" class="difflineminus">-#   Dan Mosedale &lt;dmose@mozilla.org&gt;</span>
<a href="#l5.28"></a><span id="l5.28" class="difflineminus">-#</span>
<a href="#l5.29"></a><span id="l5.29" class="difflineminus">-# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l5.30"></a><span id="l5.30" class="difflineminus">-# either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">-# the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineminus">-# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l5.33"></a><span id="l5.33" class="difflineminus">-# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineminus">-# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l5.35"></a><span id="l5.35" class="difflineminus">-# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineminus">-# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineminus">-# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineminus">-# the provisions above, a recipient may use your version of this file under</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineminus">-# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l5.40"></a><span id="l5.40" class="difflineminus">-#</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineminus">-# ***** END LICENSE BLOCK *****</span>
<a href="#l5.42"></a><span id="l5.42" class="difflineminus">-</span>
<a href="#l5.43"></a><span id="l5.43" class="difflineminus">-DEPTH		= ../../..</span>
<a href="#l5.44"></a><span id="l5.44" class="difflineminus">-topsrcdir	= @top_srcdir@</span>
<a href="#l5.45"></a><span id="l5.45" class="difflineminus">-srcdir		= @srcdir@</span>
<a href="#l5.46"></a><span id="l5.46" class="difflineminus">-VPATH		= @srcdir@</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineminus">-</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineminus">-include $(DEPTH)/config/autoconf.mk</span>
<a href="#l5.49"></a><span id="l5.49" class="difflineminus">-</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineminus">-MODULE		= mozldap</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineminus">-DIRS		= public src</span>
<a href="#l5.52"></a><span id="l5.52" class="difflineminus">-</span>
<a href="#l5.53"></a><span id="l5.53" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l5.54"></a><span id="l5.54" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1">deleted file mode 100644</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineminus">--- a/ldap/xpcom/base/src/nsLDAPChannel.cpp</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineplus">+++ /dev/null</span>
<a href="#l6.4"></a><span id="l6.4" class="difflineat">@@ -1,960 +0,0 @@</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineminus">-/* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l6.6"></a><span id="l6.6" class="difflineminus">- *</span>
<a href="#l6.7"></a><span id="l6.7" class="difflineminus">- * ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l6.8"></a><span id="l6.8" class="difflineminus">- * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l6.9"></a><span id="l6.9" class="difflineminus">- *</span>
<a href="#l6.10"></a><span id="l6.10" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l6.11"></a><span id="l6.11" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">- * the License. You may obtain a copy of the License at</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">- * http://www.mozilla.org/MPL/</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineminus">- *</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineminus">- * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineminus">- * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineminus">- * for the specific language governing rights and limitations under the</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineminus">- * License.</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineminus">- *</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineminus">- * The Original Code is the mozilla.org LDAP XPCOM SDK.</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineminus">- *</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineminus">- * The Initial Developer of the Original Code is</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineminus">- * Netscape Communications Corporation.</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineminus">- * Portions created by the Initial Developer are Copyright (C) 2000</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineminus">- * the Initial Developer. All Rights Reserved.</span>
<a href="#l6.26"></a><span id="l6.26" class="difflineminus">- *</span>
<a href="#l6.27"></a><span id="l6.27" class="difflineminus">- * Contributor(s):</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineminus">- *   Dan Mosedale &lt;dmose@mozilla.org&gt;</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineminus">- *   Warren Harris &lt;warren@netscape.com&gt;</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineminus">- *</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">- * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineminus">- * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineminus">- * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineminus">- * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineminus">- * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l6.36"></a><span id="l6.36" class="difflineminus">- * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l6.37"></a><span id="l6.37" class="difflineminus">- * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineminus">- * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l6.39"></a><span id="l6.39" class="difflineminus">- * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l6.40"></a><span id="l6.40" class="difflineminus">- * the provisions above, a recipient may use your version of this file under</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineminus">- * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l6.42"></a><span id="l6.42" class="difflineminus">- *</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineminus">- * ***** END LICENSE BLOCK ***** */</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineminus">-</span>
<a href="#l6.45"></a><span id="l6.45" class="difflineminus">-#include &quot;nsLDAPInternal.h&quot;</span>
<a href="#l6.46"></a><span id="l6.46" class="difflineminus">-#include &quot;nsLDAPConnection.h&quot;</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineminus">-#include &quot;nsLDAPChannel.h&quot;</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineminus">-#include &quot;nsString.h&quot;</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineminus">-#include &quot;nsReadableUtils.h&quot;</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineminus">-#include &quot;nsMimeTypes.h&quot;</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineminus">-#include &quot;nsIPipe.h&quot;</span>
<a href="#l6.52"></a><span id="l6.52" class="difflineminus">-#include &quot;nsXPIDLString.h&quot;</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineminus">-#include &quot;nsILDAPURL.h&quot;</span>
<a href="#l6.54"></a><span id="l6.54" class="difflineminus">-#include &quot;nsIProxyObjectManager.h&quot;</span>
<a href="#l6.55"></a><span id="l6.55" class="difflineminus">-#include &quot;nsIServiceManager.h&quot;</span>
<a href="#l6.56"></a><span id="l6.56" class="difflineminus">-#include &quot;nsIConsoleService.h&quot;</span>
<a href="#l6.57"></a><span id="l6.57" class="difflineminus">-#include &quot;nsILDAPMessage.h&quot;</span>
<a href="#l6.58"></a><span id="l6.58" class="difflineminus">-</span>
<a href="#l6.59"></a><span id="l6.59" class="difflineminus">-#if !INVOKE_LDAP_CALLBACKS_ON_MAIN_THREAD</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineminus">-#include &quot;nsNetUtil.h&quot;</span>
<a href="#l6.61"></a><span id="l6.61" class="difflineminus">-#endif</span>
<a href="#l6.62"></a><span id="l6.62" class="difflineminus">-</span>
<a href="#l6.63"></a><span id="l6.63" class="difflineminus">-static NS_DEFINE_IID(kILDAPMessageListenerIID, NS_ILDAPMESSAGELISTENER_IID);</span>
<a href="#l6.64"></a><span id="l6.64" class="difflineminus">-static NS_DEFINE_IID(kILoadGroupIID, NS_ILOADGROUP_IID);</span>
<a href="#l6.65"></a><span id="l6.65" class="difflineminus">-static NS_DEFINE_IID(kIProgressEventSink, NS_IPROGRESSEVENTSINK_IID);</span>
<a href="#l6.66"></a><span id="l6.66" class="difflineminus">-</span>
<a href="#l6.67"></a><span id="l6.67" class="difflineminus">-NS_IMPL_THREADSAFE_ISUPPORTS3(nsLDAPChannel, </span>
<a href="#l6.68"></a><span id="l6.68" class="difflineminus">-                              nsIChannel, </span>
<a href="#l6.69"></a><span id="l6.69" class="difflineminus">-                              nsIRequest,   </span>
<a href="#l6.70"></a><span id="l6.70" class="difflineminus">-                              nsILDAPMessageListener)</span>
<a href="#l6.71"></a><span id="l6.71" class="difflineminus">-</span>
<a href="#l6.72"></a><span id="l6.72" class="difflineminus">-nsLDAPChannel::nsLDAPChannel()</span>
<a href="#l6.73"></a><span id="l6.73" class="difflineminus">-{</span>
<a href="#l6.74"></a><span id="l6.74" class="difflineminus">-}</span>
<a href="#l6.75"></a><span id="l6.75" class="difflineminus">-</span>
<a href="#l6.76"></a><span id="l6.76" class="difflineminus">-nsLDAPChannel::~nsLDAPChannel()</span>
<a href="#l6.77"></a><span id="l6.77" class="difflineminus">-{</span>
<a href="#l6.78"></a><span id="l6.78" class="difflineminus">-}</span>
<a href="#l6.79"></a><span id="l6.79" class="difflineminus">-</span>
<a href="#l6.80"></a><span id="l6.80" class="difflineminus">-// initialize the channel</span>
<a href="#l6.81"></a><span id="l6.81" class="difflineminus">-//</span>
<a href="#l6.82"></a><span id="l6.82" class="difflineminus">-nsresult</span>
<a href="#l6.83"></a><span id="l6.83" class="difflineminus">-nsLDAPChannel::Init(nsIURI *uri)</span>
<a href="#l6.84"></a><span id="l6.84" class="difflineminus">-{</span>
<a href="#l6.85"></a><span id="l6.85" class="difflineminus">-    nsresult rv;</span>
<a href="#l6.86"></a><span id="l6.86" class="difflineminus">-</span>
<a href="#l6.87"></a><span id="l6.87" class="difflineminus">-    mStatus = NS_OK;</span>
<a href="#l6.88"></a><span id="l6.88" class="difflineminus">-    mURI = uri;</span>
<a href="#l6.89"></a><span id="l6.89" class="difflineminus">-    mLoadFlags = LOAD_NORMAL;</span>
<a href="#l6.90"></a><span id="l6.90" class="difflineminus">-    mReadPipeOffset = 0;</span>
<a href="#l6.91"></a><span id="l6.91" class="difflineminus">-    mReadPipeClosed = PR_FALSE;</span>
<a href="#l6.92"></a><span id="l6.92" class="difflineminus">-</span>
<a href="#l6.93"></a><span id="l6.93" class="difflineminus">-    // create an LDAP connection</span>
<a href="#l6.94"></a><span id="l6.94" class="difflineminus">-    //</span>
<a href="#l6.95"></a><span id="l6.95" class="difflineminus">-    mConnection = do_CreateInstance(&quot;@mozilla.org/network/ldap-connection;1&quot;, </span>
<a href="#l6.96"></a><span id="l6.96" class="difflineminus">-                                    &amp;rv);</span>
<a href="#l6.97"></a><span id="l6.97" class="difflineminus">-    if (NS_FAILED(rv)) {</span>
<a href="#l6.98"></a><span id="l6.98" class="difflineminus">-        NS_ERROR(&quot;nsLDAPChannel::Init(): could not create &quot;</span>
<a href="#l6.99"></a><span id="l6.99" class="difflineminus">-                 &quot;@mozilla.org/network/ldap-connection;1&quot;);</span>
<a href="#l6.100"></a><span id="l6.100" class="difflineminus">-        return NS_ERROR_FAILURE;</span>
<a href="#l6.101"></a><span id="l6.101" class="difflineminus">-    }</span>
<a href="#l6.102"></a><span id="l6.102" class="difflineminus">-</span>
<a href="#l6.103"></a><span id="l6.103" class="difflineminus">-    // i think that in the general case, it will be worthwhile to leave the</span>
<a href="#l6.104"></a><span id="l6.104" class="difflineminus">-    // callbacks for this channel be invoked on the LDAP connection thread.</span>
<a href="#l6.105"></a><span id="l6.105" class="difflineminus">-    // however, for the moment, I want to leave the code that invokes it on</span>
<a href="#l6.106"></a><span id="l6.106" class="difflineminus">-    // the main thread here (though turned off), because it provides a </span>
<a href="#l6.107"></a><span id="l6.107" class="difflineminus">-    // useful demonstration of why PLEvents' lack of priorities hurts us </span>
<a href="#l6.108"></a><span id="l6.108" class="difflineminus">-    // (in this case in ldap: searches that return a lot of results).</span>
<a href="#l6.109"></a><span id="l6.109" class="difflineminus">-    //</span>
<a href="#l6.110"></a><span id="l6.110" class="difflineminus">-#if INVOKE_LDAP_CALLBACKS_ON_MAIN_THREAD</span>
<a href="#l6.111"></a><span id="l6.111" class="difflineminus">-</span>
<a href="#l6.112"></a><span id="l6.112" class="difflineminus">-    // get a proxy for this callback, saving it off in mCallback</span>
<a href="#l6.113"></a><span id="l6.113" class="difflineminus">-    //</span>
<a href="#l6.114"></a><span id="l6.114" class="difflineminus">-    rv = NS_GetProxyForObject(NS_PROXY_TO_MAIN_THREAD,</span>
<a href="#l6.115"></a><span id="l6.115" class="difflineminus">-                              kILDAPMessageListenerIID,</span>
<a href="#l6.116"></a><span id="l6.116" class="difflineminus">-                              static_cast&lt;nsILDAPMessageListener *&gt;(this),</span>
<a href="#l6.117"></a><span id="l6.117" class="difflineminus">-                              NS_PROXY_ASYNC|NS_PROXY_ALWAYS,</span>
<a href="#l6.118"></a><span id="l6.118" class="difflineminus">-                              getter_AddRefs(mCallback));</span>
<a href="#l6.119"></a><span id="l6.119" class="difflineminus">-    if (NS_FAILED(rv)) {</span>
<a href="#l6.120"></a><span id="l6.120" class="difflineminus">-        NS_ERROR(&quot;nsLDAPChannel::Init(): could not create proxy object&quot;);</span>
<a href="#l6.121"></a><span id="l6.121" class="difflineminus">-        return NS_ERROR_FAILURE;</span>
<a href="#l6.122"></a><span id="l6.122" class="difflineminus">-    }</span>
<a href="#l6.123"></a><span id="l6.123" class="difflineminus">-</span>
<a href="#l6.124"></a><span id="l6.124" class="difflineminus">-#else   </span>
<a href="#l6.125"></a><span id="l6.125" class="difflineminus">-    mCallback = this;</span>
<a href="#l6.126"></a><span id="l6.126" class="difflineminus">-#endif</span>
<a href="#l6.127"></a><span id="l6.127" class="difflineminus">-    </span>
<a href="#l6.128"></a><span id="l6.128" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.129"></a><span id="l6.129" class="difflineminus">-}</span>
<a href="#l6.130"></a><span id="l6.130" class="difflineminus">-</span>
<a href="#l6.131"></a><span id="l6.131" class="difflineminus">-// impl code cribbed from nsJARChannel.cpp</span>
<a href="#l6.132"></a><span id="l6.132" class="difflineminus">-//</span>
<a href="#l6.133"></a><span id="l6.133" class="difflineminus">-NS_METHOD</span>
<a href="#l6.134"></a><span id="l6.134" class="difflineminus">-nsLDAPChannel::Create(nsISupports *aOuter, REFNSIID aIID, void **aResult)</span>
<a href="#l6.135"></a><span id="l6.135" class="difflineminus">-{</span>
<a href="#l6.136"></a><span id="l6.136" class="difflineminus">-    nsresult rv;</span>
<a href="#l6.137"></a><span id="l6.137" class="difflineminus">-</span>
<a href="#l6.138"></a><span id="l6.138" class="difflineminus">-    if (aOuter)</span>
<a href="#l6.139"></a><span id="l6.139" class="difflineminus">-        return NS_ERROR_NO_AGGREGATION;</span>
<a href="#l6.140"></a><span id="l6.140" class="difflineminus">-</span>
<a href="#l6.141"></a><span id="l6.141" class="difflineminus">-    nsLDAPChannel* ldapChannel = new nsLDAPChannel();</span>
<a href="#l6.142"></a><span id="l6.142" class="difflineminus">-    if (!ldapChannel)</span>
<a href="#l6.143"></a><span id="l6.143" class="difflineminus">-        return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l6.144"></a><span id="l6.144" class="difflineminus">-</span>
<a href="#l6.145"></a><span id="l6.145" class="difflineminus">-    NS_ADDREF(ldapChannel);</span>
<a href="#l6.146"></a><span id="l6.146" class="difflineminus">-    rv = ldapChannel-&gt;QueryInterface(aIID, aResult);</span>
<a href="#l6.147"></a><span id="l6.147" class="difflineminus">-    NS_RELEASE(ldapChannel);</span>
<a href="#l6.148"></a><span id="l6.148" class="difflineminus">-    return rv;</span>
<a href="#l6.149"></a><span id="l6.149" class="difflineminus">-}</span>
<a href="#l6.150"></a><span id="l6.150" class="difflineminus">-</span>
<a href="#l6.151"></a><span id="l6.151" class="difflineminus">-// nsIRequest methods</span>
<a href="#l6.152"></a><span id="l6.152" class="difflineminus">-</span>
<a href="#l6.153"></a><span id="l6.153" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.154"></a><span id="l6.154" class="difflineminus">-nsLDAPChannel::GetName(nsACString &amp;result)</span>
<a href="#l6.155"></a><span id="l6.155" class="difflineminus">-{</span>
<a href="#l6.156"></a><span id="l6.156" class="difflineminus">-    if (mURI)</span>
<a href="#l6.157"></a><span id="l6.157" class="difflineminus">-        return mURI-&gt;GetSpec(result);</span>
<a href="#l6.158"></a><span id="l6.158" class="difflineminus">-    result.Truncate();</span>
<a href="#l6.159"></a><span id="l6.159" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.160"></a><span id="l6.160" class="difflineminus">-}</span>
<a href="#l6.161"></a><span id="l6.161" class="difflineminus">-</span>
<a href="#l6.162"></a><span id="l6.162" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.163"></a><span id="l6.163" class="difflineminus">-nsLDAPChannel::IsPending(PRBool *result)</span>
<a href="#l6.164"></a><span id="l6.164" class="difflineminus">-{</span>
<a href="#l6.165"></a><span id="l6.165" class="difflineminus">-    NS_NOTYETIMPLEMENTED(&quot;nsLDAPChannel::IsPending&quot;);</span>
<a href="#l6.166"></a><span id="l6.166" class="difflineminus">-    return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l6.167"></a><span id="l6.167" class="difflineminus">-}</span>
<a href="#l6.168"></a><span id="l6.168" class="difflineminus">-</span>
<a href="#l6.169"></a><span id="l6.169" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.170"></a><span id="l6.170" class="difflineminus">-nsLDAPChannel::GetStatus(nsresult *status)</span>
<a href="#l6.171"></a><span id="l6.171" class="difflineminus">-{</span>
<a href="#l6.172"></a><span id="l6.172" class="difflineminus">-    return mStatus;</span>
<a href="#l6.173"></a><span id="l6.173" class="difflineminus">-}</span>
<a href="#l6.174"></a><span id="l6.174" class="difflineminus">-</span>
<a href="#l6.175"></a><span id="l6.175" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.176"></a><span id="l6.176" class="difflineminus">-nsLDAPChannel::Cancel(nsresult aStatus)</span>
<a href="#l6.177"></a><span id="l6.177" class="difflineminus">-{</span>
<a href="#l6.178"></a><span id="l6.178" class="difflineminus">-    nsresult rv;</span>
<a href="#l6.179"></a><span id="l6.179" class="difflineminus">-</span>
<a href="#l6.180"></a><span id="l6.180" class="difflineminus">-    // set the status</span>
<a href="#l6.181"></a><span id="l6.181" class="difflineminus">-    //</span>
<a href="#l6.182"></a><span id="l6.182" class="difflineminus">-    mStatus = aStatus;</span>
<a href="#l6.183"></a><span id="l6.183" class="difflineminus">-</span>
<a href="#l6.184"></a><span id="l6.184" class="difflineminus">-    // if there is an operation running, abandon it and remove it from the </span>
<a href="#l6.185"></a><span id="l6.185" class="difflineminus">-    // queue</span>
<a href="#l6.186"></a><span id="l6.186" class="difflineminus">-    //</span>
<a href="#l6.187"></a><span id="l6.187" class="difflineminus">-    if (mCurrentOperation) {</span>
<a href="#l6.188"></a><span id="l6.188" class="difflineminus">-</span>
<a href="#l6.189"></a><span id="l6.189" class="difflineminus">-        // if this fails in a non-debug build, there's not much we can do</span>
<a href="#l6.190"></a><span id="l6.190" class="difflineminus">-        //</span>
<a href="#l6.191"></a><span id="l6.191" class="difflineminus">-        rv = mCurrentOperation-&gt;AbandonExt();</span>
<a href="#l6.192"></a><span id="l6.192" class="difflineminus">-        NS_ASSERTION(NS_SUCCEEDED(rv), &quot;nsLDAPChannel::Cancel(): &quot;</span>
<a href="#l6.193"></a><span id="l6.193" class="difflineminus">-                     &quot;mCurrentOperation-&gt;Abandon() failed\n&quot;);</span>
<a href="#l6.194"></a><span id="l6.194" class="difflineminus">-        </span>
<a href="#l6.195"></a><span id="l6.195" class="difflineminus">-        // make nsCOMPtr call Release()</span>
<a href="#l6.196"></a><span id="l6.196" class="difflineminus">-        // </span>
<a href="#l6.197"></a><span id="l6.197" class="difflineminus">-        mCurrentOperation = 0;</span>
<a href="#l6.198"></a><span id="l6.198" class="difflineminus">-</span>
<a href="#l6.199"></a><span id="l6.199" class="difflineminus">-    }</span>
<a href="#l6.200"></a><span id="l6.200" class="difflineminus">-</span>
<a href="#l6.201"></a><span id="l6.201" class="difflineminus">-    // if the read pipe exists and hasn't already been closed, close it</span>
<a href="#l6.202"></a><span id="l6.202" class="difflineminus">-    //</span>
<a href="#l6.203"></a><span id="l6.203" class="difflineminus">-    if (mReadPipeOut != 0 &amp;&amp; !mReadPipeClosed) {</span>
<a href="#l6.204"></a><span id="l6.204" class="difflineminus">-        </span>
<a href="#l6.205"></a><span id="l6.205" class="difflineminus">-        // XXX set mReadPipeClosed?</span>
<a href="#l6.206"></a><span id="l6.206" class="difflineminus">-</span>
<a href="#l6.207"></a><span id="l6.207" class="difflineminus">-        // if this fails in a non-debug build, there's not much we can do</span>
<a href="#l6.208"></a><span id="l6.208" class="difflineminus">-        //</span>
<a href="#l6.209"></a><span id="l6.209" class="difflineminus">-        rv = mReadPipeOut-&gt;Close();</span>
<a href="#l6.210"></a><span id="l6.210" class="difflineminus">-        NS_ASSERTION(NS_SUCCEEDED(rv), &quot;nsLDAPChannel::Cancel(): &quot;</span>
<a href="#l6.211"></a><span id="l6.211" class="difflineminus">-                     &quot;mReadPipeOut-&gt;Close() failed&quot;);</span>
<a href="#l6.212"></a><span id="l6.212" class="difflineminus">-    }</span>
<a href="#l6.213"></a><span id="l6.213" class="difflineminus">-</span>
<a href="#l6.214"></a><span id="l6.214" class="difflineminus">-    // remove self from loadgroup to stop the throbber</span>
<a href="#l6.215"></a><span id="l6.215" class="difflineminus">-    //</span>
<a href="#l6.216"></a><span id="l6.216" class="difflineminus">-    if (mLoadGroup) {</span>
<a href="#l6.217"></a><span id="l6.217" class="difflineminus">-        rv = mLoadGroup-&gt;RemoveRequest(static_cast&lt;nsIRequest *&gt;(this), </span>
<a href="#l6.218"></a><span id="l6.218" class="difflineminus">-                                       mResponseContext, aStatus);</span>
<a href="#l6.219"></a><span id="l6.219" class="difflineminus">-        if (NS_FAILED(rv)) </span>
<a href="#l6.220"></a><span id="l6.220" class="difflineminus">-            return rv;</span>
<a href="#l6.221"></a><span id="l6.221" class="difflineminus">-    }</span>
<a href="#l6.222"></a><span id="l6.222" class="difflineminus">-</span>
<a href="#l6.223"></a><span id="l6.223" class="difflineminus">-    // call listener's onstoprequest</span>
<a href="#l6.224"></a><span id="l6.224" class="difflineminus">-    //</span>
<a href="#l6.225"></a><span id="l6.225" class="difflineminus">-    if (mUnproxiedListener) {</span>
<a href="#l6.226"></a><span id="l6.226" class="difflineminus">-        rv = mListener-&gt;OnStopRequest(this, mResponseContext, aStatus);</span>
<a href="#l6.227"></a><span id="l6.227" class="difflineminus">-        if (NS_FAILED(rv)) </span>
<a href="#l6.228"></a><span id="l6.228" class="difflineminus">-            return rv;</span>
<a href="#l6.229"></a><span id="l6.229" class="difflineminus">-    }</span>
<a href="#l6.230"></a><span id="l6.230" class="difflineminus">-</span>
<a href="#l6.231"></a><span id="l6.231" class="difflineminus">-    // Drop notification callbacks to prevent cycles.</span>
<a href="#l6.232"></a><span id="l6.232" class="difflineminus">-    mCallbacks = nsnull;</span>
<a href="#l6.233"></a><span id="l6.233" class="difflineminus">-    mEventSink = nsnull;</span>
<a href="#l6.234"></a><span id="l6.234" class="difflineminus">-</span>
<a href="#l6.235"></a><span id="l6.235" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.236"></a><span id="l6.236" class="difflineminus">-}</span>
<a href="#l6.237"></a><span id="l6.237" class="difflineminus">-</span>
<a href="#l6.238"></a><span id="l6.238" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.239"></a><span id="l6.239" class="difflineminus">-nsLDAPChannel::Suspend(void)</span>
<a href="#l6.240"></a><span id="l6.240" class="difflineminus">-{</span>
<a href="#l6.241"></a><span id="l6.241" class="difflineminus">-    NS_NOTYETIMPLEMENTED(&quot;nsLDAPChannel::Suspend&quot;);</span>
<a href="#l6.242"></a><span id="l6.242" class="difflineminus">-    return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l6.243"></a><span id="l6.243" class="difflineminus">-}</span>
<a href="#l6.244"></a><span id="l6.244" class="difflineminus">-</span>
<a href="#l6.245"></a><span id="l6.245" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.246"></a><span id="l6.246" class="difflineminus">-nsLDAPChannel::Resume(void)</span>
<a href="#l6.247"></a><span id="l6.247" class="difflineminus">-{</span>
<a href="#l6.248"></a><span id="l6.248" class="difflineminus">-    NS_NOTYETIMPLEMENTED(&quot;nsLDAPChannel::Resume&quot;);</span>
<a href="#l6.249"></a><span id="l6.249" class="difflineminus">-    return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l6.250"></a><span id="l6.250" class="difflineminus">-}</span>
<a href="#l6.251"></a><span id="l6.251" class="difflineminus">-</span>
<a href="#l6.252"></a><span id="l6.252" class="difflineminus">-// nsIChannel methods</span>
<a href="#l6.253"></a><span id="l6.253" class="difflineminus">-//</span>
<a href="#l6.254"></a><span id="l6.254" class="difflineminus">-</span>
<a href="#l6.255"></a><span id="l6.255" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.256"></a><span id="l6.256" class="difflineminus">-nsLDAPChannel::SetOriginalURI(nsIURI *aOriginalURI)</span>
<a href="#l6.257"></a><span id="l6.257" class="difflineminus">-{</span>
<a href="#l6.258"></a><span id="l6.258" class="difflineminus">-    mOriginalURI = aOriginalURI;</span>
<a href="#l6.259"></a><span id="l6.259" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.260"></a><span id="l6.260" class="difflineminus">-}</span>
<a href="#l6.261"></a><span id="l6.261" class="difflineminus">-</span>
<a href="#l6.262"></a><span id="l6.262" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.263"></a><span id="l6.263" class="difflineminus">-nsLDAPChannel::GetOriginalURI(nsIURI **aOriginalURI)</span>
<a href="#l6.264"></a><span id="l6.264" class="difflineminus">-{</span>
<a href="#l6.265"></a><span id="l6.265" class="difflineminus">-    *aOriginalURI = mOriginalURI ? mOriginalURI : mURI;</span>
<a href="#l6.266"></a><span id="l6.266" class="difflineminus">-    NS_IF_ADDREF(*aOriginalURI);</span>
<a href="#l6.267"></a><span id="l6.267" class="difflineminus">-</span>
<a href="#l6.268"></a><span id="l6.268" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.269"></a><span id="l6.269" class="difflineminus">-}</span>
<a href="#l6.270"></a><span id="l6.270" class="difflineminus">-</span>
<a href="#l6.271"></a><span id="l6.271" class="difflineminus">-// getter for URI attribute:</span>
<a href="#l6.272"></a><span id="l6.272" class="difflineminus">-//</span>
<a href="#l6.273"></a><span id="l6.273" class="difflineminus">-// Returns the URL to which the channel currently refers. If a redirect</span>
<a href="#l6.274"></a><span id="l6.274" class="difflineminus">-// or URI resolution occurs, this accessor returns the current location</span>
<a href="#l6.275"></a><span id="l6.275" class="difflineminus">-// to which the channel is referring.</span>
<a href="#l6.276"></a><span id="l6.276" class="difflineminus">-//</span>
<a href="#l6.277"></a><span id="l6.277" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.278"></a><span id="l6.278" class="difflineminus">-nsLDAPChannel::GetURI(nsIURI* *aURI)</span>
<a href="#l6.279"></a><span id="l6.279" class="difflineminus">-{</span>
<a href="#l6.280"></a><span id="l6.280" class="difflineminus">-    *aURI = mURI;</span>
<a href="#l6.281"></a><span id="l6.281" class="difflineminus">-    NS_IF_ADDREF(*aURI);</span>
<a href="#l6.282"></a><span id="l6.282" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.283"></a><span id="l6.283" class="difflineminus">-}</span>
<a href="#l6.284"></a><span id="l6.284" class="difflineminus">-</span>
<a href="#l6.285"></a><span id="l6.285" class="difflineminus">-// getter and setter for loadFlags attribute:</span>
<a href="#l6.286"></a><span id="l6.286" class="difflineminus">-//</span>
<a href="#l6.287"></a><span id="l6.287" class="difflineminus">-// The load attributes for the request. E.g. setting the load </span>
<a href="#l6.288"></a><span id="l6.288" class="difflineminus">-// attributes with the LOAD_QUIET bit set causes the loading process to</span>
<a href="#l6.289"></a><span id="l6.289" class="difflineminus">-// not deliver status notifications to the program performing the load,</span>
<a href="#l6.290"></a><span id="l6.290" class="difflineminus">-// and to not contribute to keeping any nsILoadGroup it may be contained</span>
<a href="#l6.291"></a><span id="l6.291" class="difflineminus">-// in from firing its OnLoadComplete notification.</span>
<a href="#l6.292"></a><span id="l6.292" class="difflineminus">-//</span>
<a href="#l6.293"></a><span id="l6.293" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.294"></a><span id="l6.294" class="difflineminus">-nsLDAPChannel::GetLoadFlags(nsLoadFlags *aLoadFlags)</span>
<a href="#l6.295"></a><span id="l6.295" class="difflineminus">-{</span>
<a href="#l6.296"></a><span id="l6.296" class="difflineminus">-    *aLoadFlags = mLoadFlags;</span>
<a href="#l6.297"></a><span id="l6.297" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.298"></a><span id="l6.298" class="difflineminus">-}</span>
<a href="#l6.299"></a><span id="l6.299" class="difflineminus">-</span>
<a href="#l6.300"></a><span id="l6.300" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.301"></a><span id="l6.301" class="difflineminus">-nsLDAPChannel::SetLoadFlags(nsLoadFlags aLoadFlags)</span>
<a href="#l6.302"></a><span id="l6.302" class="difflineminus">-{</span>
<a href="#l6.303"></a><span id="l6.303" class="difflineminus">-    mLoadFlags = aLoadFlags;</span>
<a href="#l6.304"></a><span id="l6.304" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.305"></a><span id="l6.305" class="difflineminus">-}</span>
<a href="#l6.306"></a><span id="l6.306" class="difflineminus">-</span>
<a href="#l6.307"></a><span id="l6.307" class="difflineminus">-// getter and setter for contentType attribute:</span>
<a href="#l6.308"></a><span id="l6.308" class="difflineminus">-//</span>
<a href="#l6.309"></a><span id="l6.309" class="difflineminus">-// The content MIME type of the channel if available. Note that the </span>
<a href="#l6.310"></a><span id="l6.310" class="difflineminus">-// content type can often be wrongly specified (wrong file extension, wrong</span>
<a href="#l6.311"></a><span id="l6.311" class="difflineminus">-// MIME type, wrong document type stored on a server, etc.) and the caller</span>
<a href="#l6.312"></a><span id="l6.312" class="difflineminus">-// most likely wants to verify with the actual data. </span>
<a href="#l6.313"></a><span id="l6.313" class="difflineminus">-//</span>
<a href="#l6.314"></a><span id="l6.314" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.315"></a><span id="l6.315" class="difflineminus">-nsLDAPChannel::GetContentType(nsACString &amp;aContentType)</span>
<a href="#l6.316"></a><span id="l6.316" class="difflineminus">-{</span>
<a href="#l6.317"></a><span id="l6.317" class="difflineminus">-    aContentType.AssignLiteral(TEXT_PLAIN);</span>
<a href="#l6.318"></a><span id="l6.318" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.319"></a><span id="l6.319" class="difflineminus">-}</span>
<a href="#l6.320"></a><span id="l6.320" class="difflineminus">-</span>
<a href="#l6.321"></a><span id="l6.321" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.322"></a><span id="l6.322" class="difflineminus">-nsLDAPChannel::SetContentType(const nsACString &amp;aContentType)</span>
<a href="#l6.323"></a><span id="l6.323" class="difflineminus">-{</span>
<a href="#l6.324"></a><span id="l6.324" class="difflineminus">-    NS_NOTYETIMPLEMENTED(&quot;nsLDAPChannel::SetContentType&quot;);</span>
<a href="#l6.325"></a><span id="l6.325" class="difflineminus">-    return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l6.326"></a><span id="l6.326" class="difflineminus">-}</span>
<a href="#l6.327"></a><span id="l6.327" class="difflineminus">-</span>
<a href="#l6.328"></a><span id="l6.328" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.329"></a><span id="l6.329" class="difflineminus">-nsLDAPChannel::GetContentCharset(nsACString &amp;aContentCharset)</span>
<a href="#l6.330"></a><span id="l6.330" class="difflineminus">-{</span>
<a href="#l6.331"></a><span id="l6.331" class="difflineminus">-    aContentCharset.Truncate();</span>
<a href="#l6.332"></a><span id="l6.332" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.333"></a><span id="l6.333" class="difflineminus">-}</span>
<a href="#l6.334"></a><span id="l6.334" class="difflineminus">-</span>
<a href="#l6.335"></a><span id="l6.335" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.336"></a><span id="l6.336" class="difflineminus">-nsLDAPChannel::SetContentCharset(const nsACString &amp;aContentCharset)</span>
<a href="#l6.337"></a><span id="l6.337" class="difflineminus">-{</span>
<a href="#l6.338"></a><span id="l6.338" class="difflineminus">-    NS_NOTYETIMPLEMENTED(&quot;nsLDAPChannel::SetContentCharset&quot;);</span>
<a href="#l6.339"></a><span id="l6.339" class="difflineminus">-    return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l6.340"></a><span id="l6.340" class="difflineminus">-}</span>
<a href="#l6.341"></a><span id="l6.341" class="difflineminus">-</span>
<a href="#l6.342"></a><span id="l6.342" class="difflineminus">-// getter and setter for contentLength attribute:</span>
<a href="#l6.343"></a><span id="l6.343" class="difflineminus">-//</span>
<a href="#l6.344"></a><span id="l6.344" class="difflineminus">-// Returns the length of the data associated with the channel if available.</span>
<a href="#l6.345"></a><span id="l6.345" class="difflineminus">-// If the length is unknown then -1 is returned.</span>
<a href="#l6.346"></a><span id="l6.346" class="difflineminus">-</span>
<a href="#l6.347"></a><span id="l6.347" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.348"></a><span id="l6.348" class="difflineminus">-nsLDAPChannel::GetContentLength(PRInt32 *)</span>
<a href="#l6.349"></a><span id="l6.349" class="difflineminus">-{</span>
<a href="#l6.350"></a><span id="l6.350" class="difflineminus">-    NS_NOTYETIMPLEMENTED(&quot;nsLDAPChannel::GetContentLength&quot;);</span>
<a href="#l6.351"></a><span id="l6.351" class="difflineminus">-    return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l6.352"></a><span id="l6.352" class="difflineminus">-}</span>
<a href="#l6.353"></a><span id="l6.353" class="difflineminus">-</span>
<a href="#l6.354"></a><span id="l6.354" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.355"></a><span id="l6.355" class="difflineminus">-nsLDAPChannel::SetContentLength(PRInt32)</span>
<a href="#l6.356"></a><span id="l6.356" class="difflineminus">-{</span>
<a href="#l6.357"></a><span id="l6.357" class="difflineminus">-    NS_NOTYETIMPLEMENTED(&quot;nsLDAPChannel::SetContentLength&quot;);</span>
<a href="#l6.358"></a><span id="l6.358" class="difflineminus">-    return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l6.359"></a><span id="l6.359" class="difflineminus">-}</span>
<a href="#l6.360"></a><span id="l6.360" class="difflineminus">-</span>
<a href="#l6.361"></a><span id="l6.361" class="difflineminus">-// getter and setter for the owner attribute:</span>
<a href="#l6.362"></a><span id="l6.362" class="difflineminus">-//</span>
<a href="#l6.363"></a><span id="l6.363" class="difflineminus">-// The owner corresponding to the entity that is responsible for this</span>
<a href="#l6.364"></a><span id="l6.364" class="difflineminus">-// channel. Used by security code to grant or deny privileges to</span>
<a href="#l6.365"></a><span id="l6.365" class="difflineminus">-// mobile code loaded from this channel.</span>
<a href="#l6.366"></a><span id="l6.366" class="difflineminus">-//</span>
<a href="#l6.367"></a><span id="l6.367" class="difflineminus">-// Note: This is a strong reference to the owner, so if the owner is also</span>
<a href="#l6.368"></a><span id="l6.368" class="difflineminus">-// holding a pointer to the channel, care must be taken to explicitly drop</span>
<a href="#l6.369"></a><span id="l6.369" class="difflineminus">-// its reference to the channel -- otherwise a leak will result.</span>
<a href="#l6.370"></a><span id="l6.370" class="difflineminus">-//</span>
<a href="#l6.371"></a><span id="l6.371" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.372"></a><span id="l6.372" class="difflineminus">-nsLDAPChannel::GetOwner(nsISupports* *aOwner)</span>
<a href="#l6.373"></a><span id="l6.373" class="difflineminus">-{</span>
<a href="#l6.374"></a><span id="l6.374" class="difflineminus">-    *aOwner = mOwner;</span>
<a href="#l6.375"></a><span id="l6.375" class="difflineminus">-    NS_IF_ADDREF(*aOwner);</span>
<a href="#l6.376"></a><span id="l6.376" class="difflineminus">-</span>
<a href="#l6.377"></a><span id="l6.377" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.378"></a><span id="l6.378" class="difflineminus">-}</span>
<a href="#l6.379"></a><span id="l6.379" class="difflineminus">-</span>
<a href="#l6.380"></a><span id="l6.380" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.381"></a><span id="l6.381" class="difflineminus">-nsLDAPChannel::SetOwner(nsISupports *aOwner)</span>
<a href="#l6.382"></a><span id="l6.382" class="difflineminus">-{</span>
<a href="#l6.383"></a><span id="l6.383" class="difflineminus">-    mOwner = aOwner;</span>
<a href="#l6.384"></a><span id="l6.384" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.385"></a><span id="l6.385" class="difflineminus">-}</span>
<a href="#l6.386"></a><span id="l6.386" class="difflineminus">-</span>
<a href="#l6.387"></a><span id="l6.387" class="difflineminus">-// getter and setter for the loadGroup attribute:</span>
<a href="#l6.388"></a><span id="l6.388" class="difflineminus">-//</span>
<a href="#l6.389"></a><span id="l6.389" class="difflineminus">-// the load group of which the channel is a currently a member.</span>
<a href="#l6.390"></a><span id="l6.390" class="difflineminus">-//</span>
<a href="#l6.391"></a><span id="l6.391" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.392"></a><span id="l6.392" class="difflineminus">-nsLDAPChannel::GetLoadGroup(nsILoadGroup* *aLoadGroup)</span>
<a href="#l6.393"></a><span id="l6.393" class="difflineminus">-{</span>
<a href="#l6.394"></a><span id="l6.394" class="difflineminus">-    *aLoadGroup = mUnproxiedLoadGroup;</span>
<a href="#l6.395"></a><span id="l6.395" class="difflineminus">-    NS_IF_ADDREF(*aLoadGroup);</span>
<a href="#l6.396"></a><span id="l6.396" class="difflineminus">-  </span>
<a href="#l6.397"></a><span id="l6.397" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.398"></a><span id="l6.398" class="difflineminus">-}</span>
<a href="#l6.399"></a><span id="l6.399" class="difflineminus">-</span>
<a href="#l6.400"></a><span id="l6.400" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.401"></a><span id="l6.401" class="difflineminus">-nsLDAPChannel::SetLoadGroup(nsILoadGroup* aLoadGroup)</span>
<a href="#l6.402"></a><span id="l6.402" class="difflineminus">-{</span>
<a href="#l6.403"></a><span id="l6.403" class="difflineminus">-    mUnproxiedLoadGroup = aLoadGroup;</span>
<a href="#l6.404"></a><span id="l6.404" class="difflineminus">-</span>
<a href="#l6.405"></a><span id="l6.405" class="difflineminus">-    // in the case where the LDAP callbacks happen on the connection thread,</span>
<a href="#l6.406"></a><span id="l6.406" class="difflineminus">-    // we'll need to call into the loadgroup from there</span>
<a href="#l6.407"></a><span id="l6.407" class="difflineminus">-    //</span>
<a href="#l6.408"></a><span id="l6.408" class="difflineminus">-#if INVOKE_LDAP_CALLBACKS_ON_MAIN_THREAD</span>
<a href="#l6.409"></a><span id="l6.409" class="difflineminus">-</span>
<a href="#l6.410"></a><span id="l6.410" class="difflineminus">-    mLoadGroup = mUnproxiedLoadGroup;</span>
<a href="#l6.411"></a><span id="l6.411" class="difflineminus">-</span>
<a href="#l6.412"></a><span id="l6.412" class="difflineminus">-#else</span>
<a href="#l6.413"></a><span id="l6.413" class="difflineminus">-    nsresult rv;</span>
<a href="#l6.414"></a><span id="l6.414" class="difflineminus">-</span>
<a href="#l6.415"></a><span id="l6.415" class="difflineminus">-    // get and save a proxy for the load group</span>
<a href="#l6.416"></a><span id="l6.416" class="difflineminus">-    //</span>
<a href="#l6.417"></a><span id="l6.417" class="difflineminus">-    rv = NS_GetProxyForObject(NS_PROXY_TO_MAIN_THREAD, kILoadGroupIID,</span>
<a href="#l6.418"></a><span id="l6.418" class="difflineminus">-                              mUnproxiedLoadGroup,</span>
<a href="#l6.419"></a><span id="l6.419" class="difflineminus">-                              NS_PROXY_SYNC|NS_PROXY_ALWAYS,</span>
<a href="#l6.420"></a><span id="l6.420" class="difflineminus">-                              getter_AddRefs(mLoadGroup));</span>
<a href="#l6.421"></a><span id="l6.421" class="difflineminus">-    if (NS_FAILED(rv)) {</span>
<a href="#l6.422"></a><span id="l6.422" class="difflineminus">-        NS_ERROR(&quot;nsLDAPChannel::SetLoadGroup(): could not create proxy &quot;</span>
<a href="#l6.423"></a><span id="l6.423" class="difflineminus">-                 &quot;event&quot;);</span>
<a href="#l6.424"></a><span id="l6.424" class="difflineminus">-        return NS_ERROR_FAILURE;</span>
<a href="#l6.425"></a><span id="l6.425" class="difflineminus">-    }</span>
<a href="#l6.426"></a><span id="l6.426" class="difflineminus">-#endif</span>
<a href="#l6.427"></a><span id="l6.427" class="difflineminus">-</span>
<a href="#l6.428"></a><span id="l6.428" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.429"></a><span id="l6.429" class="difflineminus">-}</span>
<a href="#l6.430"></a><span id="l6.430" class="difflineminus">-</span>
<a href="#l6.431"></a><span id="l6.431" class="difflineminus">-// getter and setter for the notificationCallbacks</span>
<a href="#l6.432"></a><span id="l6.432" class="difflineminus">-//</span>
<a href="#l6.433"></a><span id="l6.433" class="difflineminus">-// The capabilities callbacks of the channel. This is set by clients</span>
<a href="#l6.434"></a><span id="l6.434" class="difflineminus">-// who wish to provide a means to receive progress, status and </span>
<a href="#l6.435"></a><span id="l6.435" class="difflineminus">-// protocol-specific notifications.</span>
<a href="#l6.436"></a><span id="l6.436" class="difflineminus">-//</span>
<a href="#l6.437"></a><span id="l6.437" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.438"></a><span id="l6.438" class="difflineminus">-nsLDAPChannel::GetNotificationCallbacks(nsIInterfaceRequestor* </span>
<a href="#l6.439"></a><span id="l6.439" class="difflineminus">-                                        *aNotificationCallbacks)</span>
<a href="#l6.440"></a><span id="l6.440" class="difflineminus">-{</span>
<a href="#l6.441"></a><span id="l6.441" class="difflineminus">-    *aNotificationCallbacks = mCallbacks;</span>
<a href="#l6.442"></a><span id="l6.442" class="difflineminus">-    NS_IF_ADDREF(*aNotificationCallbacks);</span>
<a href="#l6.443"></a><span id="l6.443" class="difflineminus">-</span>
<a href="#l6.444"></a><span id="l6.444" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.445"></a><span id="l6.445" class="difflineminus">-}</span>
<a href="#l6.446"></a><span id="l6.446" class="difflineminus">-</span>
<a href="#l6.447"></a><span id="l6.447" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.448"></a><span id="l6.448" class="difflineminus">-nsLDAPChannel::SetNotificationCallbacks(nsIInterfaceRequestor* </span>
<a href="#l6.449"></a><span id="l6.449" class="difflineminus">-                                        aNotificationCallbacks)</span>
<a href="#l6.450"></a><span id="l6.450" class="difflineminus">-{</span>
<a href="#l6.451"></a><span id="l6.451" class="difflineminus">-    nsresult rv;</span>
<a href="#l6.452"></a><span id="l6.452" class="difflineminus">-</span>
<a href="#l6.453"></a><span id="l6.453" class="difflineminus">-    // save off the callbacks</span>
<a href="#l6.454"></a><span id="l6.454" class="difflineminus">-    //</span>
<a href="#l6.455"></a><span id="l6.455" class="difflineminus">-    mCallbacks = aNotificationCallbacks;</span>
<a href="#l6.456"></a><span id="l6.456" class="difflineminus">-    if (mCallbacks) {</span>
<a href="#l6.457"></a><span id="l6.457" class="difflineminus">-</span>
<a href="#l6.458"></a><span id="l6.458" class="difflineminus">-        // get the (unproxied) event sink interface </span>
<a href="#l6.459"></a><span id="l6.459" class="difflineminus">-        //</span>
<a href="#l6.460"></a><span id="l6.460" class="difflineminus">-        nsCOMPtr&lt;nsIProgressEventSink&gt; eventSink;</span>
<a href="#l6.461"></a><span id="l6.461" class="difflineminus">-        rv = mCallbacks-&gt;GetInterface(NS_GET_IID(nsIProgressEventSink), </span>
<a href="#l6.462"></a><span id="l6.462" class="difflineminus">-                                      getter_AddRefs(eventSink));</span>
<a href="#l6.463"></a><span id="l6.463" class="difflineminus">-        if (NS_FAILED(rv)) {</span>
<a href="#l6.464"></a><span id="l6.464" class="difflineminus">-            NS_ERROR(&quot;nsLDAPChannel::SetNotificationCallbacks(): &quot;</span>
<a href="#l6.465"></a><span id="l6.465" class="difflineminus">-                     &quot;mCallbacks-&gt;GetInterface failed&quot;);</span>
<a href="#l6.466"></a><span id="l6.466" class="difflineminus">-            return NS_ERROR_FAILURE;</span>
<a href="#l6.467"></a><span id="l6.467" class="difflineminus">-        }</span>
<a href="#l6.468"></a><span id="l6.468" class="difflineminus">-</span>
<a href="#l6.469"></a><span id="l6.469" class="difflineminus">-#if INVOKE_LDAP_CALLBACKS_ON_MAIN_THREAD</span>
<a href="#l6.470"></a><span id="l6.470" class="difflineminus">-        mEventSink = eventSink;</span>
<a href="#l6.471"></a><span id="l6.471" class="difflineminus">-#else</span>
<a href="#l6.472"></a><span id="l6.472" class="difflineminus">-        // get a proxy for this callback, saving it off in mEventSink</span>
<a href="#l6.473"></a><span id="l6.473" class="difflineminus">-        //</span>
<a href="#l6.474"></a><span id="l6.474" class="difflineminus">-        rv = NS_GetProxyForObject(NS_PROXY_TO_MAIN_THREAD,</span>
<a href="#l6.475"></a><span id="l6.475" class="difflineminus">-                                  kIProgressEventSink, eventSink,</span>
<a href="#l6.476"></a><span id="l6.476" class="difflineminus">-                                  NS_PROXY_ASYNC | NS_PROXY_ALWAYS,</span>
<a href="#l6.477"></a><span id="l6.477" class="difflineminus">-                                  getter_AddRefs(mEventSink));</span>
<a href="#l6.478"></a><span id="l6.478" class="difflineminus">-        if (NS_FAILED(rv)) {</span>
<a href="#l6.479"></a><span id="l6.479" class="difflineminus">-            NS_ERROR(&quot;nsLDAPChannel::SetNotificationCallbacks(): &quot;</span>
<a href="#l6.480"></a><span id="l6.480" class="difflineminus">-                     &quot;couldn't get proxy for event sink&quot;);</span>
<a href="#l6.481"></a><span id="l6.481" class="difflineminus">-            return NS_ERROR_FAILURE;</span>
<a href="#l6.482"></a><span id="l6.482" class="difflineminus">-        }</span>
<a href="#l6.483"></a><span id="l6.483" class="difflineminus">-#endif</span>
<a href="#l6.484"></a><span id="l6.484" class="difflineminus">-    }</span>
<a href="#l6.485"></a><span id="l6.485" class="difflineminus">-</span>
<a href="#l6.486"></a><span id="l6.486" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.487"></a><span id="l6.487" class="difflineminus">-}</span>
<a href="#l6.488"></a><span id="l6.488" class="difflineminus">-</span>
<a href="#l6.489"></a><span id="l6.489" class="difflineminus">-// getter for securityInfo attribute:</span>
<a href="#l6.490"></a><span id="l6.490" class="difflineminus">-//</span>
<a href="#l6.491"></a><span id="l6.491" class="difflineminus">-// Any security information about this channel.  This can be null.</span>
<a href="#l6.492"></a><span id="l6.492" class="difflineminus">-//</span>
<a href="#l6.493"></a><span id="l6.493" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.494"></a><span id="l6.494" class="difflineminus">-nsLDAPChannel::GetSecurityInfo(nsISupports* *aSecurityInfo)</span>
<a href="#l6.495"></a><span id="l6.495" class="difflineminus">-{</span>
<a href="#l6.496"></a><span id="l6.496" class="difflineminus">-    NS_NOTYETIMPLEMENTED(&quot;nsLDAPChannel::GetSecurityInfo&quot;);</span>
<a href="#l6.497"></a><span id="l6.497" class="difflineminus">-    return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l6.498"></a><span id="l6.498" class="difflineminus">-}</span>
<a href="#l6.499"></a><span id="l6.499" class="difflineminus">-</span>
<a href="#l6.500"></a><span id="l6.500" class="difflineminus">-// nsIChannel operations</span>
<a href="#l6.501"></a><span id="l6.501" class="difflineminus">-</span>
<a href="#l6.502"></a><span id="l6.502" class="difflineminus">-// Opens a blocking input stream to the URL's specified source.</span>
<a href="#l6.503"></a><span id="l6.503" class="difflineminus">-// @param startPosition - The offset from the start of the data</span>
<a href="#l6.504"></a><span id="l6.504" class="difflineminus">-//  from which to read.</span>
<a href="#l6.505"></a><span id="l6.505" class="difflineminus">-// @param readCount - The number of bytes to read. If -1, everything</span>
<a href="#l6.506"></a><span id="l6.506" class="difflineminus">-//  up to the end of the data is read. If greater than the end of </span>
<a href="#l6.507"></a><span id="l6.507" class="difflineminus">-//  the data, the amount available is returned in the stream.</span>
<a href="#l6.508"></a><span id="l6.508" class="difflineminus">-//</span>
<a href="#l6.509"></a><span id="l6.509" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.510"></a><span id="l6.510" class="difflineminus">-nsLDAPChannel::Open(nsIInputStream* *result)</span>
<a href="#l6.511"></a><span id="l6.511" class="difflineminus">-{</span>
<a href="#l6.512"></a><span id="l6.512" class="difflineminus">-    NS_NOTYETIMPLEMENTED(&quot;nsLDAPChannel::OpenInputStream&quot;);</span>
<a href="#l6.513"></a><span id="l6.513" class="difflineminus">-    return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l6.514"></a><span id="l6.514" class="difflineminus">-}</span>
<a href="#l6.515"></a><span id="l6.515" class="difflineminus">-</span>
<a href="#l6.516"></a><span id="l6.516" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.517"></a><span id="l6.517" class="difflineminus">-nsLDAPChannel::AsyncOpen(nsIStreamListener* aListener,</span>
<a href="#l6.518"></a><span id="l6.518" class="difflineminus">-                         nsISupports* aCtxt)</span>
<a href="#l6.519"></a><span id="l6.519" class="difflineminus">-{</span>
<a href="#l6.520"></a><span id="l6.520" class="difflineminus">-    nsresult rv;</span>
<a href="#l6.521"></a><span id="l6.521" class="difflineminus">-    nsCAutoString host;</span>
<a href="#l6.522"></a><span id="l6.522" class="difflineminus">-</span>
<a href="#l6.523"></a><span id="l6.523" class="difflineminus">-    // slurp out relevant pieces of the URL</span>
<a href="#l6.524"></a><span id="l6.524" class="difflineminus">-    //</span>
<a href="#l6.525"></a><span id="l6.525" class="difflineminus">-    rv = mURI-&gt;GetAsciiHost(host);</span>
<a href="#l6.526"></a><span id="l6.526" class="difflineminus">-    if (NS_FAILED(rv)) {</span>
<a href="#l6.527"></a><span id="l6.527" class="difflineminus">-        NS_ERROR(&quot;nsLDAPChannel::AsyncRead(): mURI-&gt;GetAsciiHost failed\n&quot;);</span>
<a href="#l6.528"></a><span id="l6.528" class="difflineminus">-        return NS_ERROR_FAILURE;</span>
<a href="#l6.529"></a><span id="l6.529" class="difflineminus">-    }</span>
<a href="#l6.530"></a><span id="l6.530" class="difflineminus">-</span>
<a href="#l6.531"></a><span id="l6.531" class="difflineminus">-    // we don't currently allow for a default host</span>
<a href="#l6.532"></a><span id="l6.532" class="difflineminus">-    //</span>
<a href="#l6.533"></a><span id="l6.533" class="difflineminus">-    if (host.IsEmpty())</span>
<a href="#l6.534"></a><span id="l6.534" class="difflineminus">-        return NS_ERROR_MALFORMED_URI;</span>
<a href="#l6.535"></a><span id="l6.535" class="difflineminus">-</span>
<a href="#l6.536"></a><span id="l6.536" class="difflineminus">-    // QI to nsILDAPURL so that we can call one of the methods on that iface</span>
<a href="#l6.537"></a><span id="l6.537" class="difflineminus">-    //</span>
<a href="#l6.538"></a><span id="l6.538" class="difflineminus">-    nsCOMPtr&lt;nsILDAPURL&gt; mLDAPURL = do_QueryInterface(mURI, &amp;rv);</span>
<a href="#l6.539"></a><span id="l6.539" class="difflineminus">-    if (NS_FAILED(rv)) {</span>
<a href="#l6.540"></a><span id="l6.540" class="difflineminus">-        NS_ERROR(&quot;nsLDAPChannel::AsyncRead(): QI to nsILDAPURL failed\n&quot;);</span>
<a href="#l6.541"></a><span id="l6.541" class="difflineminus">-        return NS_ERROR_FAILURE;</span>
<a href="#l6.542"></a><span id="l6.542" class="difflineminus">-    }</span>
<a href="#l6.543"></a><span id="l6.543" class="difflineminus">-</span>
<a href="#l6.544"></a><span id="l6.544" class="difflineminus">-    rv = NS_CheckPortSafety(mURI);</span>
<a href="#l6.545"></a><span id="l6.545" class="difflineminus">-    if (NS_FAILED(rv))</span>
<a href="#l6.546"></a><span id="l6.546" class="difflineminus">-        return rv;</span>
<a href="#l6.547"></a><span id="l6.547" class="difflineminus">-</span>
<a href="#l6.548"></a><span id="l6.548" class="difflineminus">-    // save off the args</span>
<a href="#l6.549"></a><span id="l6.549" class="difflineminus">-    //</span>
<a href="#l6.550"></a><span id="l6.550" class="difflineminus">-    mResponseContext = aCtxt;</span>
<a href="#l6.551"></a><span id="l6.551" class="difflineminus">-    mUnproxiedListener = aListener;</span>
<a href="#l6.552"></a><span id="l6.552" class="difflineminus">-</span>
<a href="#l6.553"></a><span id="l6.553" class="difflineminus">-    // add ourselves to the appropriate loadgroup</span>
<a href="#l6.554"></a><span id="l6.554" class="difflineminus">-    //</span>
<a href="#l6.555"></a><span id="l6.555" class="difflineminus">-    if (mLoadGroup) {</span>
<a href="#l6.556"></a><span id="l6.556" class="difflineminus">-        mLoadGroup-&gt;AddRequest(this, mResponseContext);</span>
<a href="#l6.557"></a><span id="l6.557" class="difflineminus">-    }</span>
<a href="#l6.558"></a><span id="l6.558" class="difflineminus">-</span>
<a href="#l6.559"></a><span id="l6.559" class="difflineminus">-    // since the LDAP SDK does all the socket management, we don't have</span>
<a href="#l6.560"></a><span id="l6.560" class="difflineminus">-    // an underlying transport channel to create an nsIInputStream to hand</span>
<a href="#l6.561"></a><span id="l6.561" class="difflineminus">-    // back to the nsIStreamListener.  So we do it ourselves:</span>
<a href="#l6.562"></a><span id="l6.562" class="difflineminus">-    //</span>
<a href="#l6.563"></a><span id="l6.563" class="difflineminus">-    if (!mReadPipeIn) {</span>
<a href="#l6.564"></a><span id="l6.564" class="difflineminus">-    </span>
<a href="#l6.565"></a><span id="l6.565" class="difflineminus">-        // get a new pipe, propagating any error upwards</span>
<a href="#l6.566"></a><span id="l6.566" class="difflineminus">-        //</span>
<a href="#l6.567"></a><span id="l6.567" class="difflineminus">-        rv = NS_NewPipe(getter_AddRefs(mReadPipeIn), </span>
<a href="#l6.568"></a><span id="l6.568" class="difflineminus">-                        getter_AddRefs(mReadPipeOut), </span>
<a href="#l6.569"></a><span id="l6.569" class="difflineminus">-                        0, 0, PR_TRUE, PR_FALSE, 0);</span>
<a href="#l6.570"></a><span id="l6.570" class="difflineminus">-        if (NS_FAILED(rv)) {</span>
<a href="#l6.571"></a><span id="l6.571" class="difflineminus">-            NS_ERROR(&quot;nsLDAPChannel::AsyncRead(): unable to create new pipe&quot;);</span>
<a href="#l6.572"></a><span id="l6.572" class="difflineminus">-            return NS_ERROR_FAILURE;</span>
<a href="#l6.573"></a><span id="l6.573" class="difflineminus">-        }</span>
<a href="#l6.574"></a><span id="l6.574" class="difflineminus">-    } </span>
<a href="#l6.575"></a><span id="l6.575" class="difflineminus">-</span>
<a href="#l6.576"></a><span id="l6.576" class="difflineminus">-    // get an AsyncStreamListener to proxy for mListener, if we're</span>
<a href="#l6.577"></a><span id="l6.577" class="difflineminus">-    // compiled to have the LDAP callbacks happen on the LDAP connection=</span>
<a href="#l6.578"></a><span id="l6.578" class="difflineminus">-    // thread.</span>
<a href="#l6.579"></a><span id="l6.579" class="difflineminus">-    //</span>
<a href="#l6.580"></a><span id="l6.580" class="difflineminus">-#if INVOKE_LDAP_CALLBACKS_ON_MAIN_THREAD</span>
<a href="#l6.581"></a><span id="l6.581" class="difflineminus">-    mListener = aListener;</span>
<a href="#l6.582"></a><span id="l6.582" class="difflineminus">-#else</span>
<a href="#l6.583"></a><span id="l6.583" class="difflineminus">-    rv = NS_GetProxyForObject(NS_PROXY_TO_MAIN_THREAD,</span>
<a href="#l6.584"></a><span id="l6.584" class="difflineminus">-                              NS_GET_IID(nsIStreamListener),</span>
<a href="#l6.585"></a><span id="l6.585" class="difflineminus">-                              mUnproxiedListener,</span>
<a href="#l6.586"></a><span id="l6.586" class="difflineminus">-                              NS_PROXY_ASYNC | NS_PROXY_ALWAYS,</span>
<a href="#l6.587"></a><span id="l6.587" class="difflineminus">-                              getter_AddRefs(mListener));</span>
<a href="#l6.588"></a><span id="l6.588" class="difflineminus">-    if (NS_FAILED(rv)) {</span>
<a href="#l6.589"></a><span id="l6.589" class="difflineminus">-        NS_ERROR(&quot;nsLDAPChannel::AsyncRead(): unable to create new &quot;</span>
<a href="#l6.590"></a><span id="l6.590" class="difflineminus">-                 &quot;AsyncStreamListener&quot;);</span>
<a href="#l6.591"></a><span id="l6.591" class="difflineminus">-        return NS_ERROR_FAILURE;</span>
<a href="#l6.592"></a><span id="l6.592" class="difflineminus">-    }</span>
<a href="#l6.593"></a><span id="l6.593" class="difflineminus">-</span>
<a href="#l6.594"></a><span id="l6.594" class="difflineminus">-#endif</span>
<a href="#l6.595"></a><span id="l6.595" class="difflineminus">-</span>
<a href="#l6.596"></a><span id="l6.596" class="difflineminus">-    // we already know the content type, so we can fire this now</span>
<a href="#l6.597"></a><span id="l6.597" class="difflineminus">-    //</span>
<a href="#l6.598"></a><span id="l6.598" class="difflineminus">-    mUnproxiedListener-&gt;OnStartRequest(this, mResponseContext);</span>
<a href="#l6.599"></a><span id="l6.599" class="difflineminus">-    if (NS_FAILED(rv)) {</span>
<a href="#l6.600"></a><span id="l6.600" class="difflineminus">-        NS_ERROR(&quot;nsLDAPChannel::AsyncRead(): error firing OnStartRequest&quot;);</span>
<a href="#l6.601"></a><span id="l6.601" class="difflineminus">-        return NS_ERROR_FAILURE;</span>
<a href="#l6.602"></a><span id="l6.602" class="difflineminus">-    }</span>
<a href="#l6.603"></a><span id="l6.603" class="difflineminus">-    </span>
<a href="#l6.604"></a><span id="l6.604" class="difflineminus">-    // initialize it with the defaults</span>
<a href="#l6.605"></a><span id="l6.605" class="difflineminus">-    // XXXdmose - need to deal with bind name</span>
<a href="#l6.606"></a><span id="l6.606" class="difflineminus">-    // Need to deal with VERSION2 pref - don't know how to get it from here.</span>
<a href="#l6.607"></a><span id="l6.607" class="difflineminus">-    rv = mConnection-&gt;Init(mLDAPURL, EmptyCString(), this, nsnull, nsILDAPConnection::VERSION3);</span>
<a href="#l6.608"></a><span id="l6.608" class="difflineminus">-    switch (rv) {</span>
<a href="#l6.609"></a><span id="l6.609" class="difflineminus">-    case NS_OK:</span>
<a href="#l6.610"></a><span id="l6.610" class="difflineminus">-        break;</span>
<a href="#l6.611"></a><span id="l6.611" class="difflineminus">-</span>
<a href="#l6.612"></a><span id="l6.612" class="difflineminus">-    case NS_ERROR_OUT_OF_MEMORY:</span>
<a href="#l6.613"></a><span id="l6.613" class="difflineminus">-    case NS_ERROR_NOT_AVAILABLE:</span>
<a href="#l6.614"></a><span id="l6.614" class="difflineminus">-    case NS_ERROR_FAILURE:</span>
<a href="#l6.615"></a><span id="l6.615" class="difflineminus">-        return rv;</span>
<a href="#l6.616"></a><span id="l6.616" class="difflineminus">-</span>
<a href="#l6.617"></a><span id="l6.617" class="difflineminus">-    case NS_ERROR_ILLEGAL_VALUE:</span>
<a href="#l6.618"></a><span id="l6.618" class="difflineminus">-    default:</span>
<a href="#l6.619"></a><span id="l6.619" class="difflineminus">-        return NS_ERROR_UNEXPECTED;</span>
<a href="#l6.620"></a><span id="l6.620" class="difflineminus">-    }</span>
<a href="#l6.621"></a><span id="l6.621" class="difflineminus">-</span>
<a href="#l6.622"></a><span id="l6.622" class="difflineminus">-    // create and initialize an LDAP operation (to be used for the bind)</span>
<a href="#l6.623"></a><span id="l6.623" class="difflineminus">-    //  </span>
<a href="#l6.624"></a><span id="l6.624" class="difflineminus">-    mCurrentOperation = do_CreateInstance(</span>
<a href="#l6.625"></a><span id="l6.625" class="difflineminus">-        &quot;@mozilla.org/network/ldap-operation;1&quot;, &amp;rv);</span>
<a href="#l6.626"></a><span id="l6.626" class="difflineminus">-    if (NS_FAILED(rv)) {</span>
<a href="#l6.627"></a><span id="l6.627" class="difflineminus">-        return NS_ERROR_FAILURE;</span>
<a href="#l6.628"></a><span id="l6.628" class="difflineminus">-    }</span>
<a href="#l6.629"></a><span id="l6.629" class="difflineminus">-</span>
<a href="#l6.630"></a><span id="l6.630" class="difflineminus">-    // our OnLDAPMessage accepts all result callbacks</span>
<a href="#l6.631"></a><span id="l6.631" class="difflineminus">-    //</span>
<a href="#l6.632"></a><span id="l6.632" class="difflineminus">-    rv = mCurrentOperation-&gt;Init(mConnection, mCallback, nsnull);</span>
<a href="#l6.633"></a><span id="l6.633" class="difflineminus">-    if (NS_FAILED(rv))</span>
<a href="#l6.634"></a><span id="l6.634" class="difflineminus">-        return NS_ERROR_UNEXPECTED; // this should never happen</span>
<a href="#l6.635"></a><span id="l6.635" class="difflineminus">-</span>
<a href="#l6.636"></a><span id="l6.636" class="difflineminus">-    // kick off a bind operation </span>
<a href="#l6.637"></a><span id="l6.637" class="difflineminus">-    // </span>
<a href="#l6.638"></a><span id="l6.638" class="difflineminus">-    PR_LOG(gLDAPLogModule, PR_LOG_DEBUG, (&quot;initiating SimpleBind\n&quot;));</span>
<a href="#l6.639"></a><span id="l6.639" class="difflineminus">-    rv = mCurrentOperation-&gt;SimpleBind(EmptyCString());</span>
<a href="#l6.640"></a><span id="l6.640" class="difflineminus">-    if (NS_FAILED(rv)) {</span>
<a href="#l6.641"></a><span id="l6.641" class="difflineminus">-</span>
<a href="#l6.642"></a><span id="l6.642" class="difflineminus">-        // XXXdmose better error handling / passthrough; deal with password</span>
<a href="#l6.643"></a><span id="l6.643" class="difflineminus">-        //</span>
<a href="#l6.644"></a><span id="l6.644" class="difflineminus">-        NS_WARNING(&quot;mCurrentOperation-&gt;SimpleBind failed.&quot;);</span>
<a href="#l6.645"></a><span id="l6.645" class="difflineminus">-        return(rv);</span>
<a href="#l6.646"></a><span id="l6.646" class="difflineminus">-    }</span>
<a href="#l6.647"></a><span id="l6.647" class="difflineminus">-</span>
<a href="#l6.648"></a><span id="l6.648" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.649"></a><span id="l6.649" class="difflineminus">-}</span>
<a href="#l6.650"></a><span id="l6.650" class="difflineminus">-</span>
<a href="#l6.651"></a><span id="l6.651" class="difflineminus">-/**</span>
<a href="#l6.652"></a><span id="l6.652" class="difflineminus">- * Messages received are passed back via this function.</span>
<a href="#l6.653"></a><span id="l6.653" class="difflineminus">- *</span>
<a href="#l6.654"></a><span id="l6.654" class="difflineminus">- * @arg aMessage  The message that was returned, 0 if none was.</span>
<a href="#l6.655"></a><span id="l6.655" class="difflineminus">- *</span>
<a href="#l6.656"></a><span id="l6.656" class="difflineminus">- * void OnLDAPMessage (in nsILDAPMessage aMessage)</span>
<a href="#l6.657"></a><span id="l6.657" class="difflineminus">- */</span>
<a href="#l6.658"></a><span id="l6.658" class="difflineminus">-NS_IMETHODIMP </span>
<a href="#l6.659"></a><span id="l6.659" class="difflineminus">-nsLDAPChannel::OnLDAPMessage(nsILDAPMessage *aMessage)</span>
<a href="#l6.660"></a><span id="l6.660" class="difflineminus">-{</span>
<a href="#l6.661"></a><span id="l6.661" class="difflineminus">-    PRInt32 messageType;</span>
<a href="#l6.662"></a><span id="l6.662" class="difflineminus">-</span>
<a href="#l6.663"></a><span id="l6.663" class="difflineminus">-    // figure out what sort of message was returned</span>
<a href="#l6.664"></a><span id="l6.664" class="difflineminus">-    //</span>
<a href="#l6.665"></a><span id="l6.665" class="difflineminus">-    nsresult rv = aMessage-&gt;GetType(&amp;messageType);</span>
<a href="#l6.666"></a><span id="l6.666" class="difflineminus">-    if (NS_FAILED(rv)) {</span>
<a href="#l6.667"></a><span id="l6.667" class="difflineminus">-        NS_ERROR(&quot;nsLDAPChannel::OnLDAPMessage(): unexpected error in &quot;</span>
<a href="#l6.668"></a><span id="l6.668" class="difflineminus">-                 &quot;nsLDAPChannel::GetType()&quot;);</span>
<a href="#l6.669"></a><span id="l6.669" class="difflineminus">-        return NS_ERROR_UNEXPECTED;</span>
<a href="#l6.670"></a><span id="l6.670" class="difflineminus">-    }</span>
<a href="#l6.671"></a><span id="l6.671" class="difflineminus">-</span>
<a href="#l6.672"></a><span id="l6.672" class="difflineminus">-    switch (messageType) {</span>
<a href="#l6.673"></a><span id="l6.673" class="difflineminus">-</span>
<a href="#l6.674"></a><span id="l6.674" class="difflineminus">-    case LDAP_RES_BIND:</span>
<a href="#l6.675"></a><span id="l6.675" class="difflineminus">-</span>
<a href="#l6.676"></a><span id="l6.676" class="difflineminus">-        // a bind has completed</span>
<a href="#l6.677"></a><span id="l6.677" class="difflineminus">-        //</span>
<a href="#l6.678"></a><span id="l6.678" class="difflineminus">-        return OnLDAPBind(aMessage);</span>
<a href="#l6.679"></a><span id="l6.679" class="difflineminus">-        break;</span>
<a href="#l6.680"></a><span id="l6.680" class="difflineminus">-</span>
<a href="#l6.681"></a><span id="l6.681" class="difflineminus">-    case LDAP_RES_SEARCH_ENTRY:</span>
<a href="#l6.682"></a><span id="l6.682" class="difflineminus">-</span>
<a href="#l6.683"></a><span id="l6.683" class="difflineminus">-        // a search entry has been returned</span>
<a href="#l6.684"></a><span id="l6.684" class="difflineminus">-        //</span>
<a href="#l6.685"></a><span id="l6.685" class="difflineminus">-        return OnLDAPSearchEntry(aMessage);</span>
<a href="#l6.686"></a><span id="l6.686" class="difflineminus">-        break;</span>
<a href="#l6.687"></a><span id="l6.687" class="difflineminus">-</span>
<a href="#l6.688"></a><span id="l6.688" class="difflineminus">-    case LDAP_RES_SEARCH_RESULT:</span>
<a href="#l6.689"></a><span id="l6.689" class="difflineminus">-</span>
<a href="#l6.690"></a><span id="l6.690" class="difflineminus">-        // the search is finished; we're all done</span>
<a href="#l6.691"></a><span id="l6.691" class="difflineminus">-        //  </span>
<a href="#l6.692"></a><span id="l6.692" class="difflineminus">-        return OnLDAPSearchResult(aMessage);</span>
<a href="#l6.693"></a><span id="l6.693" class="difflineminus">-        break;</span>
<a href="#l6.694"></a><span id="l6.694" class="difflineminus">-</span>
<a href="#l6.695"></a><span id="l6.695" class="difflineminus">-    default:</span>
<a href="#l6.696"></a><span id="l6.696" class="difflineminus">-        NS_WARNING(&quot;nsLDAPChannel::OnLDAPMessage(): unexpected LDAP message &quot;</span>
<a href="#l6.697"></a><span id="l6.697" class="difflineminus">-                   &quot;received&quot;);</span>
<a href="#l6.698"></a><span id="l6.698" class="difflineminus">-</span>
<a href="#l6.699"></a><span id="l6.699" class="difflineminus">-        // get the console service so we can log a message</span>
<a href="#l6.700"></a><span id="l6.700" class="difflineminus">-        //</span>
<a href="#l6.701"></a><span id="l6.701" class="difflineminus">-        nsCOMPtr&lt;nsIConsoleService&gt; consoleSvc = </span>
<a href="#l6.702"></a><span id="l6.702" class="difflineminus">-            do_GetService(&quot;@mozilla.org/consoleservice;1&quot;, &amp;rv);</span>
<a href="#l6.703"></a><span id="l6.703" class="difflineminus">-        if (NS_FAILED(rv)) {</span>
<a href="#l6.704"></a><span id="l6.704" class="difflineminus">-            NS_ERROR(&quot;nsLDAPChannel::OnLDAPMessage() couldn't get console &quot;</span>
<a href="#l6.705"></a><span id="l6.705" class="difflineminus">-                     &quot;service&quot;);</span>
<a href="#l6.706"></a><span id="l6.706" class="difflineminus">-            break;</span>
<a href="#l6.707"></a><span id="l6.707" class="difflineminus">-        }</span>
<a href="#l6.708"></a><span id="l6.708" class="difflineminus">-</span>
<a href="#l6.709"></a><span id="l6.709" class="difflineminus">-        // log the message</span>
<a href="#l6.710"></a><span id="l6.710" class="difflineminus">-        //</span>
<a href="#l6.711"></a><span id="l6.711" class="difflineminus">-        rv = consoleSvc-&gt;LogStringMessage(</span>
<a href="#l6.712"></a><span id="l6.712" class="difflineminus">-            NS_LITERAL_STRING(&quot;LDAP: WARNING: nsLDAPChannel::OnLDAPMessage(): Unexpected LDAP message received&quot;).get());</span>
<a href="#l6.713"></a><span id="l6.713" class="difflineminus">-        NS_ASSERTION(NS_SUCCEEDED(rv), &quot;nsLDAPChannel::OnLDAPMessage(): &quot;</span>
<a href="#l6.714"></a><span id="l6.714" class="difflineminus">-                     &quot;consoleSvc-&gt;LogStringMessage() failed&quot;);</span>
<a href="#l6.715"></a><span id="l6.715" class="difflineminus">-        break;</span>
<a href="#l6.716"></a><span id="l6.716" class="difflineminus">-    }</span>
<a href="#l6.717"></a><span id="l6.717" class="difflineminus">-</span>
<a href="#l6.718"></a><span id="l6.718" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.719"></a><span id="l6.719" class="difflineminus">-}</span>
<a href="#l6.720"></a><span id="l6.720" class="difflineminus">-</span>
<a href="#l6.721"></a><span id="l6.721" class="difflineminus">-nsresult</span>
<a href="#l6.722"></a><span id="l6.722" class="difflineminus">-nsLDAPChannel::OnLDAPBind(nsILDAPMessage *aMessage) </span>
<a href="#l6.723"></a><span id="l6.723" class="difflineminus">-{</span>
<a href="#l6.724"></a><span id="l6.724" class="difflineminus">-    nsCOMPtr&lt;nsILDAPURL&gt; url;</span>
<a href="#l6.725"></a><span id="l6.725" class="difflineminus">-    nsCAutoString baseDn;</span>
<a href="#l6.726"></a><span id="l6.726" class="difflineminus">-    nsCAutoString filter;</span>
<a href="#l6.727"></a><span id="l6.727" class="difflineminus">-    PRInt32 scope;</span>
<a href="#l6.728"></a><span id="l6.728" class="difflineminus">-    nsresult rv;</span>
<a href="#l6.729"></a><span id="l6.729" class="difflineminus">-</span>
<a href="#l6.730"></a><span id="l6.730" class="difflineminus">-    // XXX should call ldap_parse_result() here</span>
<a href="#l6.731"></a><span id="l6.731" class="difflineminus">-</span>
<a href="#l6.732"></a><span id="l6.732" class="difflineminus">-    mCurrentOperation = 0;  // done with bind op; make nsCOMPtr release it</span>
<a href="#l6.733"></a><span id="l6.733" class="difflineminus">-</span>
<a href="#l6.734"></a><span id="l6.734" class="difflineminus">-    // create and initialize an LDAP operation (to be used for the search</span>
<a href="#l6.735"></a><span id="l6.735" class="difflineminus">-    //  </span>
<a href="#l6.736"></a><span id="l6.736" class="difflineminus">-    mCurrentOperation = do_CreateInstance(</span>
<a href="#l6.737"></a><span id="l6.737" class="difflineminus">-        &quot;@mozilla.org/network/ldap-operation;1&quot;, &amp;rv);</span>
<a href="#l6.738"></a><span id="l6.738" class="difflineminus">-    if (NS_FAILED(rv)) {</span>
<a href="#l6.739"></a><span id="l6.739" class="difflineminus">-        NS_ERROR(&quot;nsLDAPChannel::OnLDAPBind(): couldn't create &quot;</span>
<a href="#l6.740"></a><span id="l6.740" class="difflineminus">-                 &quot;@mozilla.org/network/ldap-operation;1&quot;);</span>
<a href="#l6.741"></a><span id="l6.741" class="difflineminus">-        // XXX abort entire asyncread</span>
<a href="#l6.742"></a><span id="l6.742" class="difflineminus">-        return NS_ERROR_FAILURE;</span>
<a href="#l6.743"></a><span id="l6.743" class="difflineminus">-    }</span>
<a href="#l6.744"></a><span id="l6.744" class="difflineminus">-</span>
<a href="#l6.745"></a><span id="l6.745" class="difflineminus">-    rv = mCurrentOperation-&gt;Init(mConnection, mCallback, nsnull);</span>
<a href="#l6.746"></a><span id="l6.746" class="difflineminus">-    NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l6.747"></a><span id="l6.747" class="difflineminus">-</span>
<a href="#l6.748"></a><span id="l6.748" class="difflineminus">-    // QI() the URI to an nsILDAPURL so we get can the LDAP specific portions</span>
<a href="#l6.749"></a><span id="l6.749" class="difflineminus">-    //</span>
<a href="#l6.750"></a><span id="l6.750" class="difflineminus">-    url = do_QueryInterface(mURI, &amp;rv);</span>
<a href="#l6.751"></a><span id="l6.751" class="difflineminus">-    NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l6.752"></a><span id="l6.752" class="difflineminus">-</span>
<a href="#l6.753"></a><span id="l6.753" class="difflineminus">-    // get a base DN.  </span>
<a href="#l6.754"></a><span id="l6.754" class="difflineminus">-    // XXXdmose - is it reasonable to barf on an empty dn?</span>
<a href="#l6.755"></a><span id="l6.755" class="difflineminus">-    //</span>
<a href="#l6.756"></a><span id="l6.756" class="difflineminus">-    rv = url-&gt;GetDn(baseDn);</span>
<a href="#l6.757"></a><span id="l6.757" class="difflineminus">-    NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l6.758"></a><span id="l6.758" class="difflineminus">-    if (baseDn.IsEmpty()) {</span>
<a href="#l6.759"></a><span id="l6.759" class="difflineminus">-        return NS_ERROR_MALFORMED_URI;</span>
<a href="#l6.760"></a><span id="l6.760" class="difflineminus">-    }</span>
<a href="#l6.761"></a><span id="l6.761" class="difflineminus">-</span>
<a href="#l6.762"></a><span id="l6.762" class="difflineminus">-    // get the scope</span>
<a href="#l6.763"></a><span id="l6.763" class="difflineminus">-    //</span>
<a href="#l6.764"></a><span id="l6.764" class="difflineminus">-    rv = url-&gt;GetScope(&amp;scope);</span>
<a href="#l6.765"></a><span id="l6.765" class="difflineminus">-    NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l6.766"></a><span id="l6.766" class="difflineminus">-</span>
<a href="#l6.767"></a><span id="l6.767" class="difflineminus">-    // and the filter </span>
<a href="#l6.768"></a><span id="l6.768" class="difflineminus">-    //</span>
<a href="#l6.769"></a><span id="l6.769" class="difflineminus">-    rv = url-&gt;GetFilter(filter);</span>
<a href="#l6.770"></a><span id="l6.770" class="difflineminus">-    NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l6.771"></a><span id="l6.771" class="difflineminus">-</span>
<a href="#l6.772"></a><span id="l6.772" class="difflineminus">-    // time to kick off the search.</span>
<a href="#l6.773"></a><span id="l6.773" class="difflineminus">-    //</span>
<a href="#l6.774"></a><span id="l6.774" class="difflineminus">-    // XXX what about timeouts? </span>
<a href="#l6.775"></a><span id="l6.775" class="difflineminus">-    // XXX failure is a reasonable thing; don't assert</span>
<a href="#l6.776"></a><span id="l6.776" class="difflineminus">-    //</span>
<a href="#l6.777"></a><span id="l6.777" class="difflineminus">-    PR_LOG(gLDAPLogModule, PR_LOG_DEBUG, </span>
<a href="#l6.778"></a><span id="l6.778" class="difflineminus">-           (&quot;bind completed; starting search\n&quot;));</span>
<a href="#l6.779"></a><span id="l6.779" class="difflineminus">-    rv = mCurrentOperation-&gt;SearchExt(baseDn, scope, filter, 0, 0, 0,</span>
<a href="#l6.780"></a><span id="l6.780" class="difflineminus">-                                      LDAP_NO_LIMIT);</span>
<a href="#l6.781"></a><span id="l6.781" class="difflineminus">-    NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l6.782"></a><span id="l6.782" class="difflineminus">-    </span>
<a href="#l6.783"></a><span id="l6.783" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.784"></a><span id="l6.784" class="difflineminus">-}</span>
<a href="#l6.785"></a><span id="l6.785" class="difflineminus">-</span>
<a href="#l6.786"></a><span id="l6.786" class="difflineminus">-// void onLDAPInit (in nsresult aStatus); */</span>
<a href="#l6.787"></a><span id="l6.787" class="difflineminus">-//</span>
<a href="#l6.788"></a><span id="l6.788" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l6.789"></a><span id="l6.789" class="difflineminus">-nsLDAPChannel::OnLDAPInit(nsILDAPConnection *aConnection, nsresult aStatus)</span>
<a href="#l6.790"></a><span id="l6.790" class="difflineminus">-{</span>
<a href="#l6.791"></a><span id="l6.791" class="difflineminus">-    return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l6.792"></a><span id="l6.792" class="difflineminus">-}</span>
<a href="#l6.793"></a><span id="l6.793" class="difflineminus">-</span>
<a href="#l6.794"></a><span id="l6.794" class="difflineminus">-// void OnLDAPSearchResult (in nsILDAPMessage aMessage);</span>
<a href="#l6.795"></a><span id="l6.795" class="difflineminus">-//</span>
<a href="#l6.796"></a><span id="l6.796" class="difflineminus">-nsresult</span>
<a href="#l6.797"></a><span id="l6.797" class="difflineminus">-nsLDAPChannel::OnLDAPSearchResult(nsILDAPMessage *aMessage)</span>
<a href="#l6.798"></a><span id="l6.798" class="difflineminus">-{</span>
<a href="#l6.799"></a><span id="l6.799" class="difflineminus">-    PRInt32 errorCode;  // the LDAP error code</span>
<a href="#l6.800"></a><span id="l6.800" class="difflineminus">-    nsresult rv;</span>
<a href="#l6.801"></a><span id="l6.801" class="difflineminus">-</span>
<a href="#l6.802"></a><span id="l6.802" class="difflineminus">-    PR_LOG(gLDAPLogModule, PR_LOG_DEBUG, (&quot;result returned\n&quot;));</span>
<a href="#l6.803"></a><span id="l6.803" class="difflineminus">-</span>
<a href="#l6.804"></a><span id="l6.804" class="difflineminus">-    // XXX should use GetErrorString here?</span>
<a href="#l6.805"></a><span id="l6.805" class="difflineminus">-    //</span>
<a href="#l6.806"></a><span id="l6.806" class="difflineminus">-    rv = aMessage-&gt;GetErrorCode(&amp;errorCode);</span>
<a href="#l6.807"></a><span id="l6.807" class="difflineminus">-    if ( NS_FAILED(rv) ) {</span>
<a href="#l6.808"></a><span id="l6.808" class="difflineminus">-        NS_ERROR(ldap_err2string(errorCode));</span>
<a href="#l6.809"></a><span id="l6.809" class="difflineminus">-        return NS_ERROR_FAILURE;</span>
<a href="#l6.810"></a><span id="l6.810" class="difflineminus">-    }</span>
<a href="#l6.811"></a><span id="l6.811" class="difflineminus">-</span>
<a href="#l6.812"></a><span id="l6.812" class="difflineminus">-    // we're done with the current operation.  cause nsCOMPtr to Release() it</span>
<a href="#l6.813"></a><span id="l6.813" class="difflineminus">-    // so that if nsLDAPChannel::Cancel gets called, that doesn't try to call </span>
<a href="#l6.814"></a><span id="l6.814" class="difflineminus">-    // mCurrentOperation-&gt;Abandon().</span>
<a href="#l6.815"></a><span id="l6.815" class="difflineminus">-    //</span>
<a href="#l6.816"></a><span id="l6.816" class="difflineminus">-    mCurrentOperation = 0;</span>
<a href="#l6.817"></a><span id="l6.817" class="difflineminus">-</span>
<a href="#l6.818"></a><span id="l6.818" class="difflineminus">-    // if the read pipe exists and hasn't already been closed, close it</span>
<a href="#l6.819"></a><span id="l6.819" class="difflineminus">-    //</span>
<a href="#l6.820"></a><span id="l6.820" class="difflineminus">-    if (mReadPipeOut != 0 &amp;&amp; !mReadPipeClosed) {</span>
<a href="#l6.821"></a><span id="l6.821" class="difflineminus">-</span>
<a href="#l6.822"></a><span id="l6.822" class="difflineminus">-        // if this fails in a non-debug build, there's not much we can do</span>
<a href="#l6.823"></a><span id="l6.823" class="difflineminus">-        //</span>
<a href="#l6.824"></a><span id="l6.824" class="difflineminus">-        rv = mReadPipeOut-&gt;Close();</span>
<a href="#l6.825"></a><span id="l6.825" class="difflineminus">-        NS_ASSERTION(NS_SUCCEEDED(rv), &quot;nsLDAPChannel::OnLDAPSearchResult(): &quot;</span>
<a href="#l6.826"></a><span id="l6.826" class="difflineminus">-                     &quot;mReadPipeOut-&gt;Close() failed&quot;);</span>
<a href="#l6.827"></a><span id="l6.827" class="difflineminus">-    }</span>
<a href="#l6.828"></a><span id="l6.828" class="difflineminus">-</span>
<a href="#l6.829"></a><span id="l6.829" class="difflineminus">-    // remove self from loadgroup to stop the throbber</span>
<a href="#l6.830"></a><span id="l6.830" class="difflineminus">-    //</span>
<a href="#l6.831"></a><span id="l6.831" class="difflineminus">-    if (mLoadGroup) {</span>
<a href="#l6.832"></a><span id="l6.832" class="difflineminus">-        rv = mLoadGroup-&gt;RemoveRequest(static_cast&lt;nsIRequest *&gt;(this), </span>
<a href="#l6.833"></a><span id="l6.833" class="difflineminus">-                                       mResponseContext, NS_OK);</span>
<a href="#l6.834"></a><span id="l6.834" class="difflineminus">-        if (NS_FAILED(rv)) {</span>
<a href="#l6.835"></a><span id="l6.835" class="difflineminus">-            NS_WARNING(&quot;nsLDAPChannel::OnSearchResult(): &quot;</span>
<a href="#l6.836"></a><span id="l6.836" class="difflineminus">-                       &quot;mLoadGroup-&gt;RemoveChannel() failed&quot;);</span>
<a href="#l6.837"></a><span id="l6.837" class="difflineminus">-            return rv;</span>
<a href="#l6.838"></a><span id="l6.838" class="difflineminus">-        }</span>
<a href="#l6.839"></a><span id="l6.839" class="difflineminus">-    }</span>
<a href="#l6.840"></a><span id="l6.840" class="difflineminus">-</span>
<a href="#l6.841"></a><span id="l6.841" class="difflineminus">-    // call listener's onstoprequest</span>
<a href="#l6.842"></a><span id="l6.842" class="difflineminus">-    //</span>
<a href="#l6.843"></a><span id="l6.843" class="difflineminus">-    if (mListener) {</span>
<a href="#l6.844"></a><span id="l6.844" class="difflineminus">-        rv = mListener-&gt;OnStopRequest(this, mResponseContext, NS_OK);</span>
<a href="#l6.845"></a><span id="l6.845" class="difflineminus">-        if (NS_FAILED(rv)) {</span>
<a href="#l6.846"></a><span id="l6.846" class="difflineminus">-            NS_WARNING(&quot;nsLDAPChannel::OnSearchResult(): &quot;</span>
<a href="#l6.847"></a><span id="l6.847" class="difflineminus">-                       &quot;mListener-&gt;OnStopRequest failed\n&quot;);</span>
<a href="#l6.848"></a><span id="l6.848" class="difflineminus">-            return rv;</span>
<a href="#l6.849"></a><span id="l6.849" class="difflineminus">-        }</span>
<a href="#l6.850"></a><span id="l6.850" class="difflineminus">-    }</span>
<a href="#l6.851"></a><span id="l6.851" class="difflineminus">-</span>
<a href="#l6.852"></a><span id="l6.852" class="difflineminus">-    // Drop notification callbacks to prevent cycles.</span>
<a href="#l6.853"></a><span id="l6.853" class="difflineminus">-    mCallbacks = nsnull;</span>
<a href="#l6.854"></a><span id="l6.854" class="difflineminus">-    mEventSink = nsnull;</span>
<a href="#l6.855"></a><span id="l6.855" class="difflineminus">-</span>
<a href="#l6.856"></a><span id="l6.856" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.857"></a><span id="l6.857" class="difflineminus">-}</span>
<a href="#l6.858"></a><span id="l6.858" class="difflineminus">-</span>
<a href="#l6.859"></a><span id="l6.859" class="difflineminus">-// void OnLDAPSearchEntry (in nsILDAPMessage aMessage);</span>
<a href="#l6.860"></a><span id="l6.860" class="difflineminus">-//</span>
<a href="#l6.861"></a><span id="l6.861" class="difflineminus">-// XXXdmose most of this function should live in nsILDAPMessage::toString()</span>
<a href="#l6.862"></a><span id="l6.862" class="difflineminus">-//</span>
<a href="#l6.863"></a><span id="l6.863" class="difflineminus">-nsresult</span>
<a href="#l6.864"></a><span id="l6.864" class="difflineminus">-nsLDAPChannel::OnLDAPSearchEntry(nsILDAPMessage *aMessage)</span>
<a href="#l6.865"></a><span id="l6.865" class="difflineminus">-{</span>
<a href="#l6.866"></a><span id="l6.866" class="difflineminus">-    nsresult rv;</span>
<a href="#l6.867"></a><span id="l6.867" class="difflineminus">-    nsCAutoString dn;</span>
<a href="#l6.868"></a><span id="l6.868" class="difflineminus">-    nsCString entry;</span>
<a href="#l6.869"></a><span id="l6.869" class="difflineminus">-</span>
<a href="#l6.870"></a><span id="l6.870" class="difflineminus">-    PR_LOG(gLDAPLogModule, PR_LOG_DEBUG, (&quot;entry returned!\n&quot;));</span>
<a href="#l6.871"></a><span id="l6.871" class="difflineminus">-</span>
<a href="#l6.872"></a><span id="l6.872" class="difflineminus">-    // get the DN</span>
<a href="#l6.873"></a><span id="l6.873" class="difflineminus">-    // XXX better err handling</span>
<a href="#l6.874"></a><span id="l6.874" class="difflineminus">-    //</span>
<a href="#l6.875"></a><span id="l6.875" class="difflineminus">-    rv = aMessage-&gt;GetDn(dn);</span>
<a href="#l6.876"></a><span id="l6.876" class="difflineminus">-    NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l6.877"></a><span id="l6.877" class="difflineminus">-</span>
<a href="#l6.878"></a><span id="l6.878" class="difflineminus">-    entry.SetCapacity(256);</span>
<a href="#l6.879"></a><span id="l6.879" class="difflineminus">-    entry = NS_LITERAL_CSTRING(&quot;dn: &quot;) + dn + NS_LITERAL_CSTRING(&quot;\n&quot;);</span>
<a href="#l6.880"></a><span id="l6.880" class="difflineminus">-</span>
<a href="#l6.881"></a><span id="l6.881" class="difflineminus">-    char **attrs;</span>
<a href="#l6.882"></a><span id="l6.882" class="difflineminus">-    PRUint32 attrCount;</span>
<a href="#l6.883"></a><span id="l6.883" class="difflineminus">-</span>
<a href="#l6.884"></a><span id="l6.884" class="difflineminus">-    // get an array of all the attribute names</span>
<a href="#l6.885"></a><span id="l6.885" class="difflineminus">-    // XXX better error-handling</span>
<a href="#l6.886"></a><span id="l6.886" class="difflineminus">-    //</span>
<a href="#l6.887"></a><span id="l6.887" class="difflineminus">-    rv = aMessage-&gt;GetAttributes(&amp;attrCount, &amp;attrs);</span>
<a href="#l6.888"></a><span id="l6.888" class="difflineminus">-    NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l6.889"></a><span id="l6.889" class="difflineminus">-</span>
<a href="#l6.890"></a><span id="l6.890" class="difflineminus">-    // XXX is this an error?  should log in non-debug console too?</span>
<a href="#l6.891"></a><span id="l6.891" class="difflineminus">-    //</span>
<a href="#l6.892"></a><span id="l6.892" class="difflineminus">-    if (!attrCount) {</span>
<a href="#l6.893"></a><span id="l6.893" class="difflineminus">-        NS_WARNING(&quot;Warning: entry received with no attributes&quot;);</span>
<a href="#l6.894"></a><span id="l6.894" class="difflineminus">-    }</span>
<a href="#l6.895"></a><span id="l6.895" class="difflineminus">-</span>
<a href="#l6.896"></a><span id="l6.896" class="difflineminus">-    // iterate through the attributes</span>
<a href="#l6.897"></a><span id="l6.897" class="difflineminus">-    //</span>
<a href="#l6.898"></a><span id="l6.898" class="difflineminus">-    for ( PRUint32 i=0 ; i &lt; attrCount ; i++ ) {</span>
<a href="#l6.899"></a><span id="l6.899" class="difflineminus">-</span>
<a href="#l6.900"></a><span id="l6.900" class="difflineminus">-        PRUnichar **vals;</span>
<a href="#l6.901"></a><span id="l6.901" class="difflineminus">-        PRUint32 valueCount;</span>
<a href="#l6.902"></a><span id="l6.902" class="difflineminus">-</span>
<a href="#l6.903"></a><span id="l6.903" class="difflineminus">-        // get the values of this attribute</span>
<a href="#l6.904"></a><span id="l6.904" class="difflineminus">-        // XXX better failure handling</span>
<a href="#l6.905"></a><span id="l6.905" class="difflineminus">-        //</span>
<a href="#l6.906"></a><span id="l6.906" class="difflineminus">-        rv = aMessage-&gt;GetValues(attrs[i], &amp;valueCount, &amp;vals);</span>
<a href="#l6.907"></a><span id="l6.907" class="difflineminus">-        if (NS_FAILED(rv)) {</span>
<a href="#l6.908"></a><span id="l6.908" class="difflineminus">-            NS_WARNING(&quot;nsLDAPChannel:OnLDAPSearchEntry(): &quot;</span>
<a href="#l6.909"></a><span id="l6.909" class="difflineminus">-                       &quot;aMessage-&gt;GetValues() failed\n&quot;);</span>
<a href="#l6.910"></a><span id="l6.910" class="difflineminus">-            NS_FREE_XPCOM_ALLOCATED_POINTER_ARRAY(attrCount, attrs);</span>
<a href="#l6.911"></a><span id="l6.911" class="difflineminus">-            return rv;;</span>
<a href="#l6.912"></a><span id="l6.912" class="difflineminus">-        }</span>
<a href="#l6.913"></a><span id="l6.913" class="difflineminus">-</span>
<a href="#l6.914"></a><span id="l6.914" class="difflineminus">-        // print all values of this attribute</span>
<a href="#l6.915"></a><span id="l6.915" class="difflineminus">-        //</span>
<a href="#l6.916"></a><span id="l6.916" class="difflineminus">-        for ( PRUint32 j=0 ; j &lt; valueCount; j++ ) {</span>
<a href="#l6.917"></a><span id="l6.917" class="difflineminus">-            entry.Append(attrs[i]);</span>
<a href="#l6.918"></a><span id="l6.918" class="difflineminus">-            entry.Append(&quot;: &quot;);</span>
<a href="#l6.919"></a><span id="l6.919" class="difflineminus">-            AppendUTF16toUTF8(vals[j], entry);</span>
<a href="#l6.920"></a><span id="l6.920" class="difflineminus">-            entry.Append('\n');</span>
<a href="#l6.921"></a><span id="l6.921" class="difflineminus">-        }</span>
<a href="#l6.922"></a><span id="l6.922" class="difflineminus">-        NS_FREE_XPCOM_ALLOCATED_POINTER_ARRAY(valueCount, vals);</span>
<a href="#l6.923"></a><span id="l6.923" class="difflineminus">-</span>
<a href="#l6.924"></a><span id="l6.924" class="difflineminus">-    }</span>
<a href="#l6.925"></a><span id="l6.925" class="difflineminus">-    NS_FREE_XPCOM_ALLOCATED_POINTER_ARRAY(attrCount, attrs);</span>
<a href="#l6.926"></a><span id="l6.926" class="difflineminus">-</span>
<a href="#l6.927"></a><span id="l6.927" class="difflineminus">-    // XXXdmose better error handling</span>
<a href="#l6.928"></a><span id="l6.928" class="difflineminus">-    //</span>
<a href="#l6.929"></a><span id="l6.929" class="difflineminus">-    if (NS_FAILED(rv)) {</span>
<a href="#l6.930"></a><span id="l6.930" class="difflineminus">-        PR_LOG(gLDAPLogModule, PR_LOG_ERROR, </span>
<a href="#l6.931"></a><span id="l6.931" class="difflineminus">-               (&quot;aMessage: error getting attribute\n&quot;));</span>
<a href="#l6.932"></a><span id="l6.932" class="difflineminus">-        return rv;</span>
<a href="#l6.933"></a><span id="l6.933" class="difflineminus">-    }</span>
<a href="#l6.934"></a><span id="l6.934" class="difflineminus">-</span>
<a href="#l6.935"></a><span id="l6.935" class="difflineminus">-    // separate this entry from the next</span>
<a href="#l6.936"></a><span id="l6.936" class="difflineminus">-    //</span>
<a href="#l6.937"></a><span id="l6.937" class="difflineminus">-    entry.Append('\n');</span>
<a href="#l6.938"></a><span id="l6.938" class="difflineminus">-</span>
<a href="#l6.939"></a><span id="l6.939" class="difflineminus">-    // do the write</span>
<a href="#l6.940"></a><span id="l6.940" class="difflineminus">-    // XXX better err handling</span>
<a href="#l6.941"></a><span id="l6.941" class="difflineminus">-    //</span>
<a href="#l6.942"></a><span id="l6.942" class="difflineminus">-    PRUint32 bytesWritten = 0;</span>
<a href="#l6.943"></a><span id="l6.943" class="difflineminus">-    PRUint32 entryLength = entry.Length();</span>
<a href="#l6.944"></a><span id="l6.944" class="difflineminus">-</span>
<a href="#l6.945"></a><span id="l6.945" class="difflineminus">-    rv = mReadPipeOut-&gt;Write(entry.get(), entryLength, &amp;bytesWritten);</span>
<a href="#l6.946"></a><span id="l6.946" class="difflineminus">-    NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l6.947"></a><span id="l6.947" class="difflineminus">-</span>
<a href="#l6.948"></a><span id="l6.948" class="difflineminus">-    // short writes shouldn't happen on blocking pipes!</span>
<a href="#l6.949"></a><span id="l6.949" class="difflineminus">-    // XXX runtime error handling too</span>
<a href="#l6.950"></a><span id="l6.950" class="difflineminus">-    //</span>
<a href="#l6.951"></a><span id="l6.951" class="difflineminus">-    NS_ASSERTION(bytesWritten == entryLength, </span>
<a href="#l6.952"></a><span id="l6.952" class="difflineminus">-                 &quot;nsLDAPChannel::OnLDAPSearchEntry(): &quot;</span>
<a href="#l6.953"></a><span id="l6.953" class="difflineminus">-                 &quot;internal error: blocking pipe returned a short write&quot;);</span>
<a href="#l6.954"></a><span id="l6.954" class="difflineminus">-</span>
<a href="#l6.955"></a><span id="l6.955" class="difflineminus">-    // XXXdmose deal more gracefully with an error here</span>
<a href="#l6.956"></a><span id="l6.956" class="difflineminus">-    //</span>
<a href="#l6.957"></a><span id="l6.957" class="difflineminus">-    rv = mListener-&gt;OnDataAvailable(this, mResponseContext, mReadPipeIn, </span>
<a href="#l6.958"></a><span id="l6.958" class="difflineminus">-                                    mReadPipeOffset, entryLength);</span>
<a href="#l6.959"></a><span id="l6.959" class="difflineminus">-    NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l6.960"></a><span id="l6.960" class="difflineminus">-</span>
<a href="#l6.961"></a><span id="l6.961" class="difflineminus">-    mReadPipeOffset += entryLength;</span>
<a href="#l6.962"></a><span id="l6.962" class="difflineminus">-</span>
<a href="#l6.963"></a><span id="l6.963" class="difflineminus">-    return NS_OK;</span>
<a href="#l6.964"></a><span id="l6.964" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1">deleted file mode 100644</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineminus">--- a/ldap/xpcom/base/src/nsLDAPChannel.h</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineplus">+++ /dev/null</span>
<a href="#l7.4"></a><span id="l7.4" class="difflineat">@@ -1,125 +0,0 @@</span>
<a href="#l7.5"></a><span id="l7.5" class="difflineminus">-/* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l7.6"></a><span id="l7.6" class="difflineminus">- * </span>
<a href="#l7.7"></a><span id="l7.7" class="difflineminus">- * ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l7.8"></a><span id="l7.8" class="difflineminus">- * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l7.9"></a><span id="l7.9" class="difflineminus">- *</span>
<a href="#l7.10"></a><span id="l7.10" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l7.11"></a><span id="l7.11" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">- * the License. You may obtain a copy of the License at</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">- * http://www.mozilla.org/MPL/</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineminus">- *</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineminus">- * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineminus">- * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineminus">- * for the specific language governing rights and limitations under the</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineminus">- * License.</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineminus">- *</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineminus">- * The Original Code is the mozilla.org LDAP XPCOM SDK.</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineminus">- *</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineminus">- * The Initial Developer of the Original Code is</span>
<a href="#l7.23"></a><span id="l7.23" class="difflineminus">- * Netscape Communications Corporation.</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineminus">- * Portions created by the Initial Developer are Copyright (C) 2000</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineminus">- * the Initial Developer. All Rights Reserved.</span>
<a href="#l7.26"></a><span id="l7.26" class="difflineminus">- *</span>
<a href="#l7.27"></a><span id="l7.27" class="difflineminus">- * Contributor(s):</span>
<a href="#l7.28"></a><span id="l7.28" class="difflineminus">- *   Dan Mosedale &lt;dmose@mozilla.org&gt;</span>
<a href="#l7.29"></a><span id="l7.29" class="difflineminus">- *</span>
<a href="#l7.30"></a><span id="l7.30" class="difflineminus">- * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">- * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineminus">- * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineminus">- * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineminus">- * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineminus">- * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineminus">- * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineminus">- * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l7.38"></a><span id="l7.38" class="difflineminus">- * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l7.39"></a><span id="l7.39" class="difflineminus">- * the provisions above, a recipient may use your version of this file under</span>
<a href="#l7.40"></a><span id="l7.40" class="difflineminus">- * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l7.41"></a><span id="l7.41" class="difflineminus">- *</span>
<a href="#l7.42"></a><span id="l7.42" class="difflineminus">- * ***** END LICENSE BLOCK ***** */</span>
<a href="#l7.43"></a><span id="l7.43" class="difflineminus">-</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineminus">-#ifndef nsLDAPChannel_h__</span>
<a href="#l7.45"></a><span id="l7.45" class="difflineminus">-#define nsLDAPChannel_h__</span>
<a href="#l7.46"></a><span id="l7.46" class="difflineminus">-</span>
<a href="#l7.47"></a><span id="l7.47" class="difflineminus">-#include &quot;nsCOMPtr.h&quot;</span>
<a href="#l7.48"></a><span id="l7.48" class="difflineminus">-#include &quot;nsIRunnable.h&quot;</span>
<a href="#l7.49"></a><span id="l7.49" class="difflineminus">-#include &quot;nsIThread.h&quot;</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineminus">-#include &quot;nsIChannel.h&quot;</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineminus">-#include &quot;nsILoadGroup.h&quot;</span>
<a href="#l7.52"></a><span id="l7.52" class="difflineminus">-#include &quot;nsIInputStream.h&quot;</span>
<a href="#l7.53"></a><span id="l7.53" class="difflineminus">-#include &quot;nsIOutputStream.h&quot;</span>
<a href="#l7.54"></a><span id="l7.54" class="difflineminus">-#include &quot;nsIInterfaceRequestor.h&quot;</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineminus">-#include &quot;nsIInterfaceRequestorUtils.h&quot;</span>
<a href="#l7.56"></a><span id="l7.56" class="difflineminus">-#include &quot;nsIStreamListener.h&quot;</span>
<a href="#l7.57"></a><span id="l7.57" class="difflineminus">-#include &quot;nsILDAPConnection.h&quot;</span>
<a href="#l7.58"></a><span id="l7.58" class="difflineminus">-#include &quot;nsILDAPOperation.h&quot;</span>
<a href="#l7.59"></a><span id="l7.59" class="difflineminus">-#include &quot;nsILDAPMessageListener.h&quot;</span>
<a href="#l7.60"></a><span id="l7.60" class="difflineminus">-#include &quot;nsIProgressEventSink.h&quot;</span>
<a href="#l7.61"></a><span id="l7.61" class="difflineminus">-#include &quot;nsILDAPURL.h&quot;</span>
<a href="#l7.62"></a><span id="l7.62" class="difflineminus">-</span>
<a href="#l7.63"></a><span id="l7.63" class="difflineminus">-// if the code related to the following #define ever gets removed, also</span>
<a href="#l7.64"></a><span id="l7.64" class="difflineminus">-// be sure to remove mCallback as well as the most (but not all) of the </span>
<a href="#l7.65"></a><span id="l7.65" class="difflineminus">-// various mUnproxied stuff</span>
<a href="#l7.66"></a><span id="l7.66" class="difflineminus">-//</span>
<a href="#l7.67"></a><span id="l7.67" class="difflineminus">-#define INVOKE_LDAP_CALLBACKS_ON_MAIN_THREAD 0</span>
<a href="#l7.68"></a><span id="l7.68" class="difflineminus">-</span>
<a href="#l7.69"></a><span id="l7.69" class="difflineminus">-// {97cce72b-8ce9-466e-b21d-05da7c1e02a6}</span>
<a href="#l7.70"></a><span id="l7.70" class="difflineminus">-#define NS_LDAPCHANNEL_CID \</span>
<a href="#l7.71"></a><span id="l7.71" class="difflineminus">-  { 0x97cce72b, 0x8ce9, 0x466e, \</span>
<a href="#l7.72"></a><span id="l7.72" class="difflineminus">-      { 0xb2, 0x1d, 0x05, 0xda, 0x7c, 0x1e, 0x02, 0xa6 } }</span>
<a href="#l7.73"></a><span id="l7.73" class="difflineminus">-</span>
<a href="#l7.74"></a><span id="l7.74" class="difflineminus">-class nsLDAPChannel : public nsIChannel, public nsILDAPMessageListener</span>
<a href="#l7.75"></a><span id="l7.75" class="difflineminus">-{</span>
<a href="#l7.76"></a><span id="l7.76" class="difflineminus">-  public:</span>
<a href="#l7.77"></a><span id="l7.77" class="difflineminus">-    NS_DECL_ISUPPORTS</span>
<a href="#l7.78"></a><span id="l7.78" class="difflineminus">-    NS_DECL_NSIREQUEST</span>
<a href="#l7.79"></a><span id="l7.79" class="difflineminus">-    NS_DECL_NSICHANNEL</span>
<a href="#l7.80"></a><span id="l7.80" class="difflineminus">-    NS_DECL_NSILDAPMESSAGELISTENER</span>
<a href="#l7.81"></a><span id="l7.81" class="difflineminus">-</span>
<a href="#l7.82"></a><span id="l7.82" class="difflineminus">-    nsLDAPChannel();</span>
<a href="#l7.83"></a><span id="l7.83" class="difflineminus">-    virtual ~nsLDAPChannel();</span>
<a href="#l7.84"></a><span id="l7.84" class="difflineminus">-</span>
<a href="#l7.85"></a><span id="l7.85" class="difflineminus">-    nsresult Init(nsIURI *uri);</span>
<a href="#l7.86"></a><span id="l7.86" class="difflineminus">-</span>
<a href="#l7.87"></a><span id="l7.87" class="difflineminus">-    // this actually only gets called by nsLDAPHandler::NewChannel()</span>
<a href="#l7.88"></a><span id="l7.88" class="difflineminus">-    //</span>
<a href="#l7.89"></a><span id="l7.89" class="difflineminus">-    static NS_METHOD</span>
<a href="#l7.90"></a><span id="l7.90" class="difflineminus">-	Create(nsISupports* aOuter, REFNSIID aIID, void **aResult);</span>
<a href="#l7.91"></a><span id="l7.91" class="difflineminus">-</span>
<a href="#l7.92"></a><span id="l7.92" class="difflineminus">-  protected:</span>
<a href="#l7.93"></a><span id="l7.93" class="difflineminus">-</span>
<a href="#l7.94"></a><span id="l7.94" class="difflineminus">-    // these are internal functions, called by the dispatcher function</span>
<a href="#l7.95"></a><span id="l7.95" class="difflineminus">-    // OnLDAPMessage()</span>
<a href="#l7.96"></a><span id="l7.96" class="difflineminus">-    //</span>
<a href="#l7.97"></a><span id="l7.97" class="difflineminus">-    nsresult OnLDAPSearchResult(nsILDAPMessage *aMessage);</span>
<a href="#l7.98"></a><span id="l7.98" class="difflineminus">-    nsresult OnLDAPSearchEntry(nsILDAPMessage *aMessage);</span>
<a href="#l7.99"></a><span id="l7.99" class="difflineminus">-    nsresult OnLDAPBind(nsILDAPMessage *aMessage);</span>
<a href="#l7.100"></a><span id="l7.100" class="difflineminus">-</span>
<a href="#l7.101"></a><span id="l7.101" class="difflineminus">-    // instance vars for read/write nsIChannel attributes</span>
<a href="#l7.102"></a><span id="l7.102" class="difflineminus">-    //</span>
<a href="#l7.103"></a><span id="l7.103" class="difflineminus">-    nsresult mStatus;</span>
<a href="#l7.104"></a><span id="l7.104" class="difflineminus">-    nsCOMPtr&lt;nsIURI&gt; mURI;         // the URI we're processing</span>
<a href="#l7.105"></a><span id="l7.105" class="difflineminus">-    nsCOMPtr&lt;nsILoadGroup&gt; mUnproxiedLoadGroup; // the load group we belong to</span>
<a href="#l7.106"></a><span id="l7.106" class="difflineminus">-    nsCOMPtr&lt;nsIInterfaceRequestor&gt; mCallbacks; </span>
<a href="#l7.107"></a><span id="l7.107" class="difflineminus">-    nsCOMPtr&lt;nsIURI&gt; mOriginalURI; // the URI we started processing</span>
<a href="#l7.108"></a><span id="l7.108" class="difflineminus">-    nsLoadFlags mLoadFlags;        // load attributes for this channel</span>
<a href="#l7.109"></a><span id="l7.109" class="difflineminus">-    nsCOMPtr&lt;nsISupports&gt; mOwner;  // entity responsible for this channel</span>
<a href="#l7.110"></a><span id="l7.110" class="difflineminus">-</span>
<a href="#l7.111"></a><span id="l7.111" class="difflineminus">-    // various other instance vars</span>
<a href="#l7.112"></a><span id="l7.112" class="difflineminus">-    //</span>
<a href="#l7.113"></a><span id="l7.113" class="difflineminus">-    nsCOMPtr&lt;nsIStreamListener&gt; mUnproxiedListener; // for calls on main thread</span>
<a href="#l7.114"></a><span id="l7.114" class="difflineminus">-    nsCOMPtr&lt;nsILoadGroup&gt; mLoadGroup; // possibly an nsISupports proxy</span>
<a href="#l7.115"></a><span id="l7.115" class="difflineminus">-    nsCOMPtr&lt;nsILDAPConnection&gt; mConnection; // LDAP connection</span>
<a href="#l7.116"></a><span id="l7.116" class="difflineminus">-    nsCOMPtr&lt;nsIStreamListener&gt; mListener; // for calls on LDAP callback thread</span>
<a href="#l7.117"></a><span id="l7.117" class="difflineminus">-    // which _might_ be the main thread</span>
<a href="#l7.118"></a><span id="l7.118" class="difflineminus">-    nsCOMPtr&lt;nsISupports&gt; mResponseContext; </span>
<a href="#l7.119"></a><span id="l7.119" class="difflineminus">-    nsCOMPtr&lt;nsIInputStream&gt; mReadPipeIn; // this end given to the listener</span>
<a href="#l7.120"></a><span id="l7.120" class="difflineminus">-    nsCOMPtr&lt;nsIOutputStream&gt; mReadPipeOut; // for writes from the channel</span>
<a href="#l7.121"></a><span id="l7.121" class="difflineminus">-    nsCOMPtr&lt;nsILDAPOperation&gt; mCurrentOperation; // current ldap operation</span>
<a href="#l7.122"></a><span id="l7.122" class="difflineminus">-    PRUint32 mReadPipeOffset; // how many bytes written so far?</span>
<a href="#l7.123"></a><span id="l7.123" class="difflineminus">-    PRBool mReadPipeClosed; // has the pipe already been closed?</span>
<a href="#l7.124"></a><span id="l7.124" class="difflineminus">-    nsCOMPtr&lt;nsILDAPMessageListener&gt; mCallback; // callback</span>
<a href="#l7.125"></a><span id="l7.125" class="difflineminus">-    nsCOMPtr&lt;nsIProgressEventSink&gt; mEventSink; // fire status against this</span>
<a href="#l7.126"></a><span id="l7.126" class="difflineminus">-</span>
<a href="#l7.127"></a><span id="l7.127" class="difflineminus">-};</span>
<a href="#l7.128"></a><span id="l7.128" class="difflineminus">-</span>
<a href="#l7.129"></a><span id="l7.129" class="difflineminus">-#endif // nsLDAPChannel_h__</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">deleted file mode 100644</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineminus">--- a/ldap/xpcom/datasource/Makefile.in</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineplus">+++ /dev/null</span>
<a href="#l8.4"></a><span id="l8.4" class="difflineat">@@ -1,49 +0,0 @@</span>
<a href="#l8.5"></a><span id="l8.5" class="difflineminus">-# </span>
<a href="#l8.6"></a><span id="l8.6" class="difflineminus">-# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l8.7"></a><span id="l8.7" class="difflineminus">-# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l8.8"></a><span id="l8.8" class="difflineminus">-#</span>
<a href="#l8.9"></a><span id="l8.9" class="difflineminus">-# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l8.10"></a><span id="l8.10" class="difflineminus">-# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l8.11"></a><span id="l8.11" class="difflineminus">-# the License. You may obtain a copy of the License at</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-# http://www.mozilla.org/MPL/</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-#</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineminus">-# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">-# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineminus">-# for the specific language governing rights and limitations under the</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineminus">-# License.</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineminus">-#</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineminus">-# The Original Code is the mozilla.org LDAP XPCOM SDK.</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineminus">-#</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineminus">-# The Initial Developer of the Original Code is</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineminus">-# Netscape Communications Corporation.</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineminus">-# Portions created by the Initial Developer are Copyright (C) 2001</span>
<a href="#l8.24"></a><span id="l8.24" class="difflineminus">-# the Initial Developer. All Rights Reserved.</span>
<a href="#l8.25"></a><span id="l8.25" class="difflineminus">-#</span>
<a href="#l8.26"></a><span id="l8.26" class="difflineminus">-# Contributor(s):</span>
<a href="#l8.27"></a><span id="l8.27" class="difflineminus">-#   Dan Mosedale &lt;dmose@mozilla.org&gt;</span>
<a href="#l8.28"></a><span id="l8.28" class="difflineminus">-#</span>
<a href="#l8.29"></a><span id="l8.29" class="difflineminus">-# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l8.30"></a><span id="l8.30" class="difflineminus">-# either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">-# the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineminus">-# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineminus">-# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineminus">-# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineminus">-# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineminus">-# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l8.37"></a><span id="l8.37" class="difflineminus">-# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l8.38"></a><span id="l8.38" class="difflineminus">-# the provisions above, a recipient may use your version of this file under</span>
<a href="#l8.39"></a><span id="l8.39" class="difflineminus">-# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l8.40"></a><span id="l8.40" class="difflineminus">-#</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineminus">-# ***** END LICENSE BLOCK *****</span>
<a href="#l8.42"></a><span id="l8.42" class="difflineminus">-</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineminus">-DEPTH		= ../../..</span>
<a href="#l8.44"></a><span id="l8.44" class="difflineminus">-topsrcdir	= @top_srcdir@</span>
<a href="#l8.45"></a><span id="l8.45" class="difflineminus">-srcdir		= @srcdir@</span>
<a href="#l8.46"></a><span id="l8.46" class="difflineminus">-VPATH		= @srcdir@</span>
<a href="#l8.47"></a><span id="l8.47" class="difflineminus">-</span>
<a href="#l8.48"></a><span id="l8.48" class="difflineminus">-include $(DEPTH)/config/autoconf.mk</span>
<a href="#l8.49"></a><span id="l8.49" class="difflineminus">-</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineminus">-EXTRA_COMPONENTS = nsLDAPDataSource.manifest nsLDAPDataSource.js</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineminus">-</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineminus">-include $(topsrcdir)/config/rules.mk</span>
<a href="#l8.53"></a><span id="l8.53" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1">deleted file mode 100644</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineminus">--- a/ldap/xpcom/datasource/nsLDAPDataSource.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineplus">+++ /dev/null</span>
<a href="#l9.4"></a><span id="l9.4" class="difflineat">@@ -1,1462 +0,0 @@</span>
<a href="#l9.5"></a><span id="l9.5" class="difflineminus">-/* -*- Mode: Java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l9.6"></a><span id="l9.6" class="difflineminus">- *</span>
<a href="#l9.7"></a><span id="l9.7" class="difflineminus">- * ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l9.8"></a><span id="l9.8" class="difflineminus">- * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l9.9"></a><span id="l9.9" class="difflineminus">- *</span>
<a href="#l9.10"></a><span id="l9.10" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l9.11"></a><span id="l9.11" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">- * the License. You may obtain a copy of the License at</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineminus">- * http://www.mozilla.org/MPL/</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineminus">- *</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineminus">- * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineminus">- * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l9.17"></a><span id="l9.17" class="difflineminus">- * for the specific language governing rights and limitations under the</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineminus">- * License.</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineminus">- *</span>
<a href="#l9.20"></a><span id="l9.20" class="difflineminus">- * The Original Code is the mozilla.org LDAP RDF datasource.</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineminus">- *</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineminus">- * The Initial Developer of the Original Code is</span>
<a href="#l9.23"></a><span id="l9.23" class="difflineminus">- * Netscape Communications Corporation.</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineminus">- * Portions created by the Initial Developer are Copyright (C) 2000</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineminus">- * the Initial Developer. All Rights Reserved.</span>
<a href="#l9.26"></a><span id="l9.26" class="difflineminus">- *</span>
<a href="#l9.27"></a><span id="l9.27" class="difflineminus">- * Contributor(s):</span>
<a href="#l9.28"></a><span id="l9.28" class="difflineminus">- *   Dan Mosedale &lt;dmose@mozilla.org&gt;</span>
<a href="#l9.29"></a><span id="l9.29" class="difflineminus">- *   Brendan Eich &lt;brendan@mozilla.org&gt;</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineminus">- *   Peter Van der Beken &lt;peter.vanderbeken@pandora.be&gt;</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">- *</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineminus">- * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineminus">- * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineminus">- * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l9.35"></a><span id="l9.35" class="difflineminus">- * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l9.36"></a><span id="l9.36" class="difflineminus">- * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l9.37"></a><span id="l9.37" class="difflineminus">- * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l9.38"></a><span id="l9.38" class="difflineminus">- * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l9.39"></a><span id="l9.39" class="difflineminus">- * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l9.40"></a><span id="l9.40" class="difflineminus">- * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l9.41"></a><span id="l9.41" class="difflineminus">- * the provisions above, a recipient may use your version of this file under</span>
<a href="#l9.42"></a><span id="l9.42" class="difflineminus">- * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineminus">- *</span>
<a href="#l9.44"></a><span id="l9.44" class="difflineminus">- * ***** END LICENSE BLOCK ***** */</span>
<a href="#l9.45"></a><span id="l9.45" class="difflineminus">-</span>
<a href="#l9.46"></a><span id="l9.46" class="difflineminus">-const DEBUG = true;</span>
<a href="#l9.47"></a><span id="l9.47" class="difflineminus">-</span>
<a href="#l9.48"></a><span id="l9.48" class="difflineminus">-// core RDF schema</span>
<a href="#l9.49"></a><span id="l9.49" class="difflineminus">-//</span>
<a href="#l9.50"></a><span id="l9.50" class="difflineminus">-const RDF_NAMESPACE_URI = &quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;;</span>
<a href="#l9.51"></a><span id="l9.51" class="difflineminus">-const NC_NAMESPACE_URI = &quot;http://home.netscape.com/NC-rdf#&quot;;</span>
<a href="#l9.52"></a><span id="l9.52" class="difflineminus">-const LDAPATTR_NAMESPACE_URI = &quot;http://www.mozilla.org/LDAPATTR-rdf#&quot;;</span>
<a href="#l9.53"></a><span id="l9.53" class="difflineminus">-</span>
<a href="#l9.54"></a><span id="l9.54" class="difflineminus">-// RDF-specific success nsresults</span>
<a href="#l9.55"></a><span id="l9.55" class="difflineminus">-//</span>
<a href="#l9.56"></a><span id="l9.56" class="difflineminus">-const NS_ERROR_RDF_BASE = 0x804f0000; // XXX is this right?</span>
<a href="#l9.57"></a><span id="l9.57" class="difflineminus">-const NS_RDF_CURSOR_EMPTY = NS_ERROR_RDF_BASE + 1;</span>
<a href="#l9.58"></a><span id="l9.58" class="difflineminus">-const NS_RDF_NO_VALUE = NS_ERROR_RDF_BASE + 2;</span>
<a href="#l9.59"></a><span id="l9.59" class="difflineminus">-const NS_RDF_ASSERTION_ACCEPTED = Components.results.NS_OK;</span>
<a href="#l9.60"></a><span id="l9.60" class="difflineminus">-const NS_RDF_ASSERTION_REJECTED = NS_ERROR_RDF_BASE + 3;</span>
<a href="#l9.61"></a><span id="l9.61" class="difflineminus">-</span>
<a href="#l9.62"></a><span id="l9.62" class="difflineminus">-// Scope constants</span>
<a href="#l9.63"></a><span id="l9.63" class="difflineminus">-//</span>
<a href="#l9.64"></a><span id="l9.64" class="difflineminus">-const SCOPE_BASE = Components.interfaces.nsILDAPURL.SCOPE_BASE;</span>
<a href="#l9.65"></a><span id="l9.65" class="difflineminus">-const SCOPE_ONELEVEL = Components.interfaces.nsILDAPURL.SCOPE_ONELEVEL;</span>
<a href="#l9.66"></a><span id="l9.66" class="difflineminus">-const SCOPE_SUBTREE = Components.interfaces.nsILDAPURL.SCOPE_SUBTREE;</span>
<a href="#l9.67"></a><span id="l9.67" class="difflineminus">-</span>
<a href="#l9.68"></a><span id="l9.68" class="difflineminus">-// Types of delegates</span>
<a href="#l9.69"></a><span id="l9.69" class="difflineminus">-const MESSAGE = 1;</span>
<a href="#l9.70"></a><span id="l9.70" class="difflineminus">-const FLAT_LIST = 2;</span>
<a href="#l9.71"></a><span id="l9.71" class="difflineminus">-const RECURSIVE_LIST = 3;</span>
<a href="#l9.72"></a><span id="l9.72" class="difflineminus">-</span>
<a href="#l9.73"></a><span id="l9.73" class="difflineminus">-// ArrayEnumerator courtesy of Brendan Eich &lt;brendan@mozilla.org&gt;</span>
<a href="#l9.74"></a><span id="l9.74" class="difflineminus">-//</span>
<a href="#l9.75"></a><span id="l9.75" class="difflineminus">-function ArrayEnumerator(array) {</span>
<a href="#l9.76"></a><span id="l9.76" class="difflineminus">-    this.array = array;</span>
<a href="#l9.77"></a><span id="l9.77" class="difflineminus">-    this.index = 0;</span>
<a href="#l9.78"></a><span id="l9.78" class="difflineminus">-}</span>
<a href="#l9.79"></a><span id="l9.79" class="difflineminus">-ArrayEnumerator.prototype = {</span>
<a href="#l9.80"></a><span id="l9.80" class="difflineminus">-    hasMoreElements: function() { return this.index &lt; this.array.length; },</span>
<a href="#l9.81"></a><span id="l9.81" class="difflineminus">-    getNext: function () { return (this.index &lt; this.array.length) ?</span>
<a href="#l9.82"></a><span id="l9.82" class="difflineminus">-                       this.array[this.index++] : null; }</span>
<a href="#l9.83"></a><span id="l9.83" class="difflineminus">-}</span>
<a href="#l9.84"></a><span id="l9.84" class="difflineminus">-</span>
<a href="#l9.85"></a><span id="l9.85" class="difflineminus">-// nsISupportsArrayEnumerator</span>
<a href="#l9.86"></a><span id="l9.86" class="difflineminus">-//</span>
<a href="#l9.87"></a><span id="l9.87" class="difflineminus">-function nsISupportsArrayEnumerator(array) {</span>
<a href="#l9.88"></a><span id="l9.88" class="difflineminus">-    this.array = array;</span>
<a href="#l9.89"></a><span id="l9.89" class="difflineminus">-    this.index = 0;</span>
<a href="#l9.90"></a><span id="l9.90" class="difflineminus">-}</span>
<a href="#l9.91"></a><span id="l9.91" class="difflineminus">-nsISupportsArrayEnumerator.prototype = {</span>
<a href="#l9.92"></a><span id="l9.92" class="difflineminus">-    hasMoreElements: function() { return this.index &lt; this.array.Count(); },</span>
<a href="#l9.93"></a><span id="l9.93" class="difflineminus">-    getNext: function () { return (this.index &lt; this.array.Count()) ?</span>
<a href="#l9.94"></a><span id="l9.94" class="difflineminus">-                       this.array.GetElementAt(this.index++) : null; }</span>
<a href="#l9.95"></a><span id="l9.95" class="difflineminus">-}</span>
<a href="#l9.96"></a><span id="l9.96" class="difflineminus">-</span>
<a href="#l9.97"></a><span id="l9.97" class="difflineminus">-/**</span>
<a href="#l9.98"></a><span id="l9.98" class="difflineminus">- * getProxyOnUIThread returns a proxy to aObject on the main (UI) thread.</span>
<a href="#l9.99"></a><span id="l9.99" class="difflineminus">- * We need this because the RDF service should only be used on the main</span>
<a href="#l9.100"></a><span id="l9.100" class="difflineminus">- * thread. Moreover, the RDF classes aren't (marked as?) thread-safe, so</span>
<a href="#l9.101"></a><span id="l9.101" class="difflineminus">- * any objects we create using the RDF service should only be used on the</span>
<a href="#l9.102"></a><span id="l9.102" class="difflineminus">- * main thread.</span>
<a href="#l9.103"></a><span id="l9.103" class="difflineminus">- */</span>
<a href="#l9.104"></a><span id="l9.104" class="difflineminus">-function getProxyOnUIThread(aObject, aInterface) {</span>
<a href="#l9.105"></a><span id="l9.105" class="difflineminus">-    var eventQSvc = Components.</span>
<a href="#l9.106"></a><span id="l9.106" class="difflineminus">-            classes[&quot;@mozilla.org/event-queue-service;1&quot;].</span>
<a href="#l9.107"></a><span id="l9.107" class="difflineminus">-            getService(Components.interfaces.nsIEventQueueService);</span>
<a href="#l9.108"></a><span id="l9.108" class="difflineminus">-    var uiQueue = eventQSvc.</span>
<a href="#l9.109"></a><span id="l9.109" class="difflineminus">-            getSpecialEventQueue(Components.interfaces.</span>
<a href="#l9.110"></a><span id="l9.110" class="difflineminus">-            nsIEventQueueService.UI_THREAD_EVENT_QUEUE);</span>
<a href="#l9.111"></a><span id="l9.111" class="difflineminus">-    var proxyMgr = Components.</span>
<a href="#l9.112"></a><span id="l9.112" class="difflineminus">-            classes[&quot;@mozilla.org/xpcomproxy;1&quot;].</span>
<a href="#l9.113"></a><span id="l9.113" class="difflineminus">-            getService(Components.interfaces.nsIProxyObjectManager);</span>
<a href="#l9.114"></a><span id="l9.114" class="difflineminus">-</span>
<a href="#l9.115"></a><span id="l9.115" class="difflineminus">-    return proxyMgr.getProxyForObject(uiQueue,</span>
<a href="#l9.116"></a><span id="l9.116" class="difflineminus">-            aInterface, aObject, 5);</span>
<a href="#l9.117"></a><span id="l9.117" class="difflineminus">-    // 5 == PROXY_ALWAYS | PROXY_SYNC</span>
<a href="#l9.118"></a><span id="l9.118" class="difflineminus">-}</span>
<a href="#l9.119"></a><span id="l9.119" class="difflineminus">-</span>
<a href="#l9.120"></a><span id="l9.120" class="difflineminus">-</span>
<a href="#l9.121"></a><span id="l9.121" class="difflineminus">-// the datasource object itself</span>
<a href="#l9.122"></a><span id="l9.122" class="difflineminus">-//</span>
<a href="#l9.123"></a><span id="l9.123" class="difflineminus">-const NS_LDAPDATASOURCE_CONTRACTID =</span>
<a href="#l9.124"></a><span id="l9.124" class="difflineminus">-    '@mozilla.org/rdf/datasource;1?name=ldap';</span>
<a href="#l9.125"></a><span id="l9.125" class="difflineminus">-const NS_LDAPDATASOURCE_CID =</span>
<a href="#l9.126"></a><span id="l9.126" class="difflineminus">-    Components.ID('{8da18684-6486-4a7e-b261-35331f3e7163}');</span>
<a href="#l9.127"></a><span id="l9.127" class="difflineminus">-</span>
<a href="#l9.128"></a><span id="l9.128" class="difflineminus">-function nsLDAPDataSource() {}</span>
<a href="#l9.129"></a><span id="l9.129" class="difflineminus">-</span>
<a href="#l9.130"></a><span id="l9.130" class="difflineminus">-nsLDAPDataSource.prototype = {</span>
<a href="#l9.131"></a><span id="l9.131" class="difflineminus">-</span>
<a href="#l9.132"></a><span id="l9.132" class="difflineminus">-    // who is watching us; XXX ok to use new Array?</span>
<a href="#l9.133"></a><span id="l9.133" class="difflineminus">-    mObserverList: new Array(),</span>
<a href="#l9.134"></a><span id="l9.134" class="difflineminus">-</span>
<a href="#l9.135"></a><span id="l9.135" class="difflineminus">-    // RDF property constants.</span>
<a href="#l9.136"></a><span id="l9.136" class="difflineminus">-    //</span>
<a href="#l9.137"></a><span id="l9.137" class="difflineminus">-    // XXXdmose - can these can actually be statics (ie JS class</span>
<a href="#l9.138"></a><span id="l9.138" class="difflineminus">-    // properties rather than JS instance properties)?  or would that</span>
<a href="#l9.139"></a><span id="l9.139" class="difflineminus">-    // make it hard for the datasource and/or component to be GCed?</span>
<a href="#l9.140"></a><span id="l9.140" class="difflineminus">-    //</span>
<a href="#l9.141"></a><span id="l9.141" class="difflineminus">-    kRDF_instanceOf: {},</span>
<a href="#l9.142"></a><span id="l9.142" class="difflineminus">-    kNC_DN: {},</span>
<a href="#l9.143"></a><span id="l9.143" class="difflineminus">-    kNC_child: {},</span>
<a href="#l9.144"></a><span id="l9.144" class="difflineminus">-    kNC_recursiveChild: {},</span>
<a href="#l9.145"></a><span id="l9.145" class="difflineminus">-</span>
<a href="#l9.146"></a><span id="l9.146" class="difflineminus">-    mRdfSvc: {},</span>
<a href="#l9.147"></a><span id="l9.147" class="difflineminus">-</span>
<a href="#l9.148"></a><span id="l9.148" class="difflineminus">-    // since we implement multiple interfaces, we have to provide QI</span>
<a href="#l9.149"></a><span id="l9.149" class="difflineminus">-    //</span>
<a href="#l9.150"></a><span id="l9.150" class="difflineminus">-    QueryInterface: function(iid) {</span>
<a href="#l9.151"></a><span id="l9.151" class="difflineminus">-      if (iid.equals(Components.interfaces.nsISupports) ||</span>
<a href="#l9.152"></a><span id="l9.152" class="difflineminus">-          iid.equals(Components.interfaces.nsIRDFDataSource) ||</span>
<a href="#l9.153"></a><span id="l9.153" class="difflineminus">-          iid.equals(Components.interfaces.nsIRDFRemoteDataSource) ||</span>
<a href="#l9.154"></a><span id="l9.154" class="difflineminus">-          iid.equals(Components.interfaces.nsIRDFObserver))</span>
<a href="#l9.155"></a><span id="l9.155" class="difflineminus">-          return this;</span>
<a href="#l9.156"></a><span id="l9.156" class="difflineminus">-</span>
<a href="#l9.157"></a><span id="l9.157" class="difflineminus">-      throw Components.results.NS_ERROR_NO_INTERFACE;</span>
<a href="#l9.158"></a><span id="l9.158" class="difflineminus">-    },</span>
<a href="#l9.159"></a><span id="l9.159" class="difflineminus">-</span>
<a href="#l9.160"></a><span id="l9.160" class="difflineminus">-    /**</span>
<a href="#l9.161"></a><span id="l9.161" class="difflineminus">-     * nsIRDFRemoteDataSource</span>
<a href="#l9.162"></a><span id="l9.162" class="difflineminus">-     */</span>
<a href="#l9.163"></a><span id="l9.163" class="difflineminus">-</span>
<a href="#l9.164"></a><span id="l9.164" class="difflineminus">-    /**</span>
<a href="#l9.165"></a><span id="l9.165" class="difflineminus">-     * This value is &lt;code&gt;true&lt;/code&gt; when the datasource has</span>
<a href="#l9.166"></a><span id="l9.166" class="difflineminus">-     * fully loaded itself.</span>
<a href="#l9.167"></a><span id="l9.167" class="difflineminus">-     */</span>
<a href="#l9.168"></a><span id="l9.168" class="difflineminus">-    get loaded() {</span>
<a href="#l9.169"></a><span id="l9.169" class="difflineminus">-        debug(&quot;getter for loaded called\n&quot;);</span>
<a href="#l9.170"></a><span id="l9.170" class="difflineminus">-        // We're never fully loaded</span>
<a href="#l9.171"></a><span id="l9.171" class="difflineminus">-        return false;</span>
<a href="#l9.172"></a><span id="l9.172" class="difflineminus">-    },</span>
<a href="#l9.173"></a><span id="l9.173" class="difflineminus">-</span>
<a href="#l9.174"></a><span id="l9.174" class="difflineminus">-    /**</span>
<a href="#l9.175"></a><span id="l9.175" class="difflineminus">-     * Specify the URI for the data source: this is the prefix</span>
<a href="#l9.176"></a><span id="l9.176" class="difflineminus">-     * that will be used to register the data source in the</span>
<a href="#l9.177"></a><span id="l9.177" class="difflineminus">-     * data source registry.</span>
<a href="#l9.178"></a><span id="l9.178" class="difflineminus">-     * @param aURI the URI to load</span>
<a href="#l9.179"></a><span id="l9.179" class="difflineminus">-     */</span>
<a href="#l9.180"></a><span id="l9.180" class="difflineminus">-    Init: function(aURI)</span>
<a href="#l9.181"></a><span id="l9.181" class="difflineminus">-    {</span>
<a href="#l9.182"></a><span id="l9.182" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.183"></a><span id="l9.183" class="difflineminus">-            dump(&quot;Init() called with args: \n\t&quot; + aURI + &quot;\n\n&quot;);</span>
<a href="#l9.184"></a><span id="l9.184" class="difflineminus">-        }</span>
<a href="#l9.185"></a><span id="l9.185" class="difflineminus">-</span>
<a href="#l9.186"></a><span id="l9.186" class="difflineminus">-        // XXX - if this a &quot;single-connection&quot; datasource</span>
<a href="#l9.187"></a><span id="l9.187" class="difflineminus">-        // (ie non-anonymous to a specific server); we should figure</span>
<a href="#l9.188"></a><span id="l9.188" class="difflineminus">-        // that out here by noticing that there is a ; after &quot;rdf:ldap&quot;, and</span>
<a href="#l9.189"></a><span id="l9.189" class="difflineminus">-        // that after that there is a cookie which happens to be an LDAP URL</span>
<a href="#l9.190"></a><span id="l9.190" class="difflineminus">-        // designating the connection.  for now, we just assume that this will</span>
<a href="#l9.191"></a><span id="l9.191" class="difflineminus">-        // be a &quot;universal&quot; (anonymous to any &amp; all servers) datasource.</span>
<a href="#l9.192"></a><span id="l9.192" class="difflineminus">-        //</span>
<a href="#l9.193"></a><span id="l9.193" class="difflineminus">-        // XXX rayw changed the delimiter char; it's not a ; any more.</span>
<a href="#l9.194"></a><span id="l9.194" class="difflineminus">-        // I think it might be ? now.  He or waterson would know.  The code</span>
<a href="#l9.195"></a><span id="l9.195" class="difflineminus">-        // that knows about this is somewhere in rdf, perhaps in the XUL</span>
<a href="#l9.196"></a><span id="l9.196" class="difflineminus">-        // template builder.</span>
<a href="#l9.197"></a><span id="l9.197" class="difflineminus">-</span>
<a href="#l9.198"></a><span id="l9.198" class="difflineminus">-        // get the RDF service</span>
<a href="#l9.199"></a><span id="l9.199" class="difflineminus">-        //</span>
<a href="#l9.200"></a><span id="l9.200" class="difflineminus">-        this.mRdfSvc = Components.</span>
<a href="#l9.201"></a><span id="l9.201" class="difflineminus">-                classes[&quot;@mozilla.org/rdf/rdf-service;1&quot;].</span>
<a href="#l9.202"></a><span id="l9.202" class="difflineminus">-                getService(Components.interfaces.nsIRDFService);</span>
<a href="#l9.203"></a><span id="l9.203" class="difflineminus">-</span>
<a href="#l9.204"></a><span id="l9.204" class="difflineminus">-        // get some RDF Resources that we'll need</span>
<a href="#l9.205"></a><span id="l9.205" class="difflineminus">-        //</span>
<a href="#l9.206"></a><span id="l9.206" class="difflineminus">-        this.kRDF_instanceOf = this.mRdfSvc.GetResource(RDF_NAMESPACE_URI +</span>
<a href="#l9.207"></a><span id="l9.207" class="difflineminus">-                                                        &quot;instanceOf&quot;);</span>
<a href="#l9.208"></a><span id="l9.208" class="difflineminus">-        this.kNC_DN = this.mRdfSvc.GetResource(NC_NAMESPACE_URI + &quot;DN&quot;);</span>
<a href="#l9.209"></a><span id="l9.209" class="difflineminus">-        this.kNC_child = this.mRdfSvc.GetResource(NC_NAMESPACE_URI + &quot;child&quot;);</span>
<a href="#l9.210"></a><span id="l9.210" class="difflineminus">-        this.kNC_recursiveChild = this.mRdfSvc.GetResource(NC_NAMESPACE_URI +</span>
<a href="#l9.211"></a><span id="l9.211" class="difflineminus">-                                                           &quot;recursiveChild&quot;);</span>
<a href="#l9.212"></a><span id="l9.212" class="difflineminus">-</span>
<a href="#l9.213"></a><span id="l9.213" class="difflineminus">-        return;</span>
<a href="#l9.214"></a><span id="l9.214" class="difflineminus">-    },</span>
<a href="#l9.215"></a><span id="l9.215" class="difflineminus">-</span>
<a href="#l9.216"></a><span id="l9.216" class="difflineminus">-    /**</span>
<a href="#l9.217"></a><span id="l9.217" class="difflineminus">-     * Refresh the remote datasource, re-loading its contents</span>
<a href="#l9.218"></a><span id="l9.218" class="difflineminus">-     * from the URI.</span>
<a href="#l9.219"></a><span id="l9.219" class="difflineminus">-     *</span>
<a href="#l9.220"></a><span id="l9.220" class="difflineminus">-     * @param aBlocking If &lt;code&gt;true&lt;/code&gt;, the call will block</span>
<a href="#l9.221"></a><span id="l9.221" class="difflineminus">-     * until the datasource has completely reloaded.</span>
<a href="#l9.222"></a><span id="l9.222" class="difflineminus">-     */</span>
<a href="#l9.223"></a><span id="l9.223" class="difflineminus">-    Refresh: function(aBlocking)</span>
<a href="#l9.224"></a><span id="l9.224" class="difflineminus">-    {</span>
<a href="#l9.225"></a><span id="l9.225" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.226"></a><span id="l9.226" class="difflineminus">-            dump(&quot;Refresh() called with args: \n\t&quot; + aBlocking + &quot;\n\n&quot;);</span>
<a href="#l9.227"></a><span id="l9.227" class="difflineminus">-        }</span>
<a href="#l9.228"></a><span id="l9.228" class="difflineminus">-        return;</span>
<a href="#l9.229"></a><span id="l9.229" class="difflineminus">-    },</span>
<a href="#l9.230"></a><span id="l9.230" class="difflineminus">-</span>
<a href="#l9.231"></a><span id="l9.231" class="difflineminus">-    /**</span>
<a href="#l9.232"></a><span id="l9.232" class="difflineminus">-     * Request that a data source write it's contents out to</span>
<a href="#l9.233"></a><span id="l9.233" class="difflineminus">-     * permanent storage, if applicable.</span>
<a href="#l9.234"></a><span id="l9.234" class="difflineminus">-     */</span>
<a href="#l9.235"></a><span id="l9.235" class="difflineminus">-    Flush: function()</span>
<a href="#l9.236"></a><span id="l9.236" class="difflineminus">-    {</span>
<a href="#l9.237"></a><span id="l9.237" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.238"></a><span id="l9.238" class="difflineminus">-            dump(&quot;Flush() called\n\n&quot;);</span>
<a href="#l9.239"></a><span id="l9.239" class="difflineminus">-        }</span>
<a href="#l9.240"></a><span id="l9.240" class="difflineminus">-        return;</span>
<a href="#l9.241"></a><span id="l9.241" class="difflineminus">-    },</span>
<a href="#l9.242"></a><span id="l9.242" class="difflineminus">-</span>
<a href="#l9.243"></a><span id="l9.243" class="difflineminus">-    /**</span>
<a href="#l9.244"></a><span id="l9.244" class="difflineminus">-     * nsIRDFDataSource</span>
<a href="#l9.245"></a><span id="l9.245" class="difflineminus">-     */</span>
<a href="#l9.246"></a><span id="l9.246" class="difflineminus">-</span>
<a href="#l9.247"></a><span id="l9.247" class="difflineminus">-    /** Find an RDF resource that points to a given node over the</span>
<a href="#l9.248"></a><span id="l9.248" class="difflineminus">-     * specified arc &amp; truth value</span>
<a href="#l9.249"></a><span id="l9.249" class="difflineminus">-     *</span>
<a href="#l9.250"></a><span id="l9.250" class="difflineminus">-     * @return NS_RDF_NO_VALUE if there is no source that leads</span>
<a href="#l9.251"></a><span id="l9.251" class="difflineminus">-     * to the target with the specified property.</span>
<a href="#l9.252"></a><span id="l9.252" class="difflineminus">-     *</span>
<a href="#l9.253"></a><span id="l9.253" class="difflineminus">-     * nsIRDFResource GetSource (in nsIRDFResource aProperty,</span>
<a href="#l9.254"></a><span id="l9.254" class="difflineminus">-     *                           in nsIRDFNode aTarget,</span>
<a href="#l9.255"></a><span id="l9.255" class="difflineminus">-     *                           in boolean aTruthValue);</span>
<a href="#l9.256"></a><span id="l9.256" class="difflineminus">-     */</span>
<a href="#l9.257"></a><span id="l9.257" class="difflineminus">-    GetSource: function(aProperty, aTarget, aTruthValue) {</span>
<a href="#l9.258"></a><span id="l9.258" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.259"></a><span id="l9.259" class="difflineminus">-            dump(&quot;GetSource() called with args: \n\t&quot; + aProperty.Value +</span>
<a href="#l9.260"></a><span id="l9.260" class="difflineminus">-             &quot;\n\t&quot; + aTarget.Value + &quot;\n\t&quot; + aTruthValue + &quot;\n\n&quot;);</span>
<a href="#l9.261"></a><span id="l9.261" class="difflineminus">-        }</span>
<a href="#l9.262"></a><span id="l9.262" class="difflineminus">-</span>
<a href="#l9.263"></a><span id="l9.263" class="difflineminus">-        Components.returnCode = NS_RDF_NO_VALUE;</span>
<a href="#l9.264"></a><span id="l9.264" class="difflineminus">-        return null;</span>
<a href="#l9.265"></a><span id="l9.265" class="difflineminus">-    },</span>
<a href="#l9.266"></a><span id="l9.266" class="difflineminus">-</span>
<a href="#l9.267"></a><span id="l9.267" class="difflineminus">-    /**</span>
<a href="#l9.268"></a><span id="l9.268" class="difflineminus">-     * Find all RDF resources that point to a given node over the</span>
<a href="#l9.269"></a><span id="l9.269" class="difflineminus">-     * specified arc &amp; truth value</span>
<a href="#l9.270"></a><span id="l9.270" class="difflineminus">-     *</span>
<a href="#l9.271"></a><span id="l9.271" class="difflineminus">-     * @return NS_OK unless a catastrophic error occurs. If the</span>
<a href="#l9.272"></a><span id="l9.272" class="difflineminus">-     * method returns NS_OK, you may assume that nsISimpleEnumerator points</span>
<a href="#l9.273"></a><span id="l9.273" class="difflineminus">-     * to a valid (but possibly empty) cursor.</span>
<a href="#l9.274"></a><span id="l9.274" class="difflineminus">-     *</span>
<a href="#l9.275"></a><span id="l9.275" class="difflineminus">-     * nsISimpleEnumerator GetSources (in nsIRDFResource aProperty,</span>
<a href="#l9.276"></a><span id="l9.276" class="difflineminus">-     *                                 in nsIRDFNode aTarget,</span>
<a href="#l9.277"></a><span id="l9.277" class="difflineminus">-     *                                 in boolean aTruthValue);</span>
<a href="#l9.278"></a><span id="l9.278" class="difflineminus">-     */</span>
<a href="#l9.279"></a><span id="l9.279" class="difflineminus">-    GetSources: function(aProperty, aTarget, aTruthValue) {</span>
<a href="#l9.280"></a><span id="l9.280" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.281"></a><span id="l9.281" class="difflineminus">-            dump(&quot;GetSources() called with args: \n\t&quot; + aProperty.Value +</span>
<a href="#l9.282"></a><span id="l9.282" class="difflineminus">-             &quot;\n\t&quot; + aTarget.Value + &quot;\n\t&quot; + aTruthValue + &quot;\n\n&quot;);</span>
<a href="#l9.283"></a><span id="l9.283" class="difflineminus">-        }</span>
<a href="#l9.284"></a><span id="l9.284" class="difflineminus">-</span>
<a href="#l9.285"></a><span id="l9.285" class="difflineminus">-        return new ArrayEnumerator(new Array());</span>
<a href="#l9.286"></a><span id="l9.286" class="difflineminus">-    },</span>
<a href="#l9.287"></a><span id="l9.287" class="difflineminus">-</span>
<a href="#l9.288"></a><span id="l9.288" class="difflineminus">-    /**</span>
<a href="#l9.289"></a><span id="l9.289" class="difflineminus">-     * Find a child of that is related to the source by the given arc</span>
<a href="#l9.290"></a><span id="l9.290" class="difflineminus">-     * and truth value</span>
<a href="#l9.291"></a><span id="l9.291" class="difflineminus">-     *</span>
<a href="#l9.292"></a><span id="l9.292" class="difflineminus">-     * @return NS_RDF_NO_VALUE if there is no target accessible from the</span>
<a href="#l9.293"></a><span id="l9.293" class="difflineminus">-     * source via the specified property.</span>
<a href="#l9.294"></a><span id="l9.294" class="difflineminus">-     *</span>
<a href="#l9.295"></a><span id="l9.295" class="difflineminus">-     * nsIRDFNode GetTarget (in nsIRDFResource aSource,</span>
<a href="#l9.296"></a><span id="l9.296" class="difflineminus">-     *                       in nsIRDFResource aProperty,</span>
<a href="#l9.297"></a><span id="l9.297" class="difflineminus">-     *                       in boolean aTruthValue);</span>
<a href="#l9.298"></a><span id="l9.298" class="difflineminus">-     */</span>
<a href="#l9.299"></a><span id="l9.299" class="difflineminus">-    GetTarget: function(aSource, aProperty, aTruthValue) {</span>
<a href="#l9.300"></a><span id="l9.300" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.301"></a><span id="l9.301" class="difflineminus">-            dump(&quot;GetTarget() called with args: \n\t&quot; + aSource.Value +</span>
<a href="#l9.302"></a><span id="l9.302" class="difflineminus">-             &quot;\n\t&quot; + aProperty.Value + &quot;\n\t&quot; + aTruthValue + &quot;\n\n&quot;);</span>
<a href="#l9.303"></a><span id="l9.303" class="difflineminus">-        }</span>
<a href="#l9.304"></a><span id="l9.304" class="difflineminus">-</span>
<a href="#l9.305"></a><span id="l9.305" class="difflineminus">-        // We don't handle negative assertions.</span>
<a href="#l9.306"></a><span id="l9.306" class="difflineminus">-        // XXX Should we? Can we?</span>
<a href="#l9.307"></a><span id="l9.307" class="difflineminus">-        if (!aTruthValue) {</span>
<a href="#l9.308"></a><span id="l9.308" class="difflineminus">-            Components.returnCode = NS_RDF_NO_VALUE;</span>
<a href="#l9.309"></a><span id="l9.309" class="difflineminus">-            return null;</span>
<a href="#l9.310"></a><span id="l9.310" class="difflineminus">-        }</span>
<a href="#l9.311"></a><span id="l9.311" class="difflineminus">-</span>
<a href="#l9.312"></a><span id="l9.312" class="difflineminus">-        var delegate;</span>
<a href="#l9.313"></a><span id="l9.313" class="difflineminus">-        var enumerator;</span>
<a href="#l9.314"></a><span id="l9.314" class="difflineminus">-</span>
<a href="#l9.315"></a><span id="l9.315" class="difflineminus">-        if (aProperty.EqualsNode(this.kNC_child)</span>
<a href="#l9.316"></a><span id="l9.316" class="difflineminus">-            || aProperty.EqualsNode(this.kNC_recursiveChild)) {</span>
<a href="#l9.317"></a><span id="l9.317" class="difflineminus">-            // Find a child or recursiveChild. Get the messagelist delegate</span>
<a href="#l9.318"></a><span id="l9.318" class="difflineminus">-            // (flat for child, recursive for recursiveChild) for aSource and</span>
<a href="#l9.319"></a><span id="l9.319" class="difflineminus">-            // return the first element of the list, if available.</span>
<a href="#l9.320"></a><span id="l9.320" class="difflineminus">-            var listType = (aProperty.EqualsNode(this.kNC_child) ?</span>
<a href="#l9.321"></a><span id="l9.321" class="difflineminus">-                            &quot;flat.messagelist.ldap&quot; :</span>
<a href="#l9.322"></a><span id="l9.322" class="difflineminus">-                            &quot;recursive.messagelist.ldap&quot;);</span>
<a href="#l9.323"></a><span id="l9.323" class="difflineminus">-            try {</span>
<a href="#l9.324"></a><span id="l9.324" class="difflineminus">-                delegate = aSource.GetDelegate(listType,</span>
<a href="#l9.325"></a><span id="l9.325" class="difflineminus">-                                       Components.interfaces.nsISupportsArray);</span>
<a href="#l9.326"></a><span id="l9.326" class="difflineminus">-            }</span>
<a href="#l9.327"></a><span id="l9.327" class="difflineminus">-            catch (e) {</span>
<a href="#l9.328"></a><span id="l9.328" class="difflineminus">-            }</span>
<a href="#l9.329"></a><span id="l9.329" class="difflineminus">-            if (delegate != null) {</span>
<a href="#l9.330"></a><span id="l9.330" class="difflineminus">-                try {</span>
<a href="#l9.331"></a><span id="l9.331" class="difflineminus">-                    var target = delegate.QueryElementAt(0,</span>
<a href="#l9.332"></a><span id="l9.332" class="difflineminus">-                                       Components.interfaces.nsIRDFNode);</span>
<a href="#l9.333"></a><span id="l9.333" class="difflineminus">-                    return target;</span>
<a href="#l9.334"></a><span id="l9.334" class="difflineminus">-                }</span>
<a href="#l9.335"></a><span id="l9.335" class="difflineminus">-                catch (e) {</span>
<a href="#l9.336"></a><span id="l9.336" class="difflineminus">-                }</span>
<a href="#l9.337"></a><span id="l9.337" class="difflineminus">-            }</span>
<a href="#l9.338"></a><span id="l9.338" class="difflineminus">-        }</span>
<a href="#l9.339"></a><span id="l9.339" class="difflineminus">-        else if (aProperty.EqualsNode(this.kNC_DN)) {</span>
<a href="#l9.340"></a><span id="l9.340" class="difflineminus">-            // Find the DN arc. Get the message delegate for aSource</span>
<a href="#l9.341"></a><span id="l9.341" class="difflineminus">-            // and return the resource for the dn property of the message,</span>
<a href="#l9.342"></a><span id="l9.342" class="difflineminus">-            // if available.</span>
<a href="#l9.343"></a><span id="l9.343" class="difflineminus">-            try {</span>
<a href="#l9.344"></a><span id="l9.344" class="difflineminus">-                delegate = aSource.GetDelegate(&quot;message.ldap&quot;,</span>
<a href="#l9.345"></a><span id="l9.345" class="difflineminus">-                                       Components.interfaces.nsILDAPMessage);</span>
<a href="#l9.346"></a><span id="l9.346" class="difflineminus">-            }</span>
<a href="#l9.347"></a><span id="l9.347" class="difflineminus">-            catch (e) {</span>
<a href="#l9.348"></a><span id="l9.348" class="difflineminus">-            }</span>
<a href="#l9.349"></a><span id="l9.349" class="difflineminus">-            if (delegate != null) {</span>
<a href="#l9.350"></a><span id="l9.350" class="difflineminus">-                return this.mRdfSvc.GetResource(delegate.dn);</span>
<a href="#l9.351"></a><span id="l9.351" class="difflineminus">-            }</span>
<a href="#l9.352"></a><span id="l9.352" class="difflineminus">-        }</span>
<a href="#l9.353"></a><span id="l9.353" class="difflineminus">-        else {</span>
<a href="#l9.354"></a><span id="l9.354" class="difflineminus">-            // Find a different arc. See if we're looking for an LDAP attribute</span>
<a href="#l9.355"></a><span id="l9.355" class="difflineminus">-            // arc. If so, get the message delegate for aSource, if we find one</span>
<a href="#l9.356"></a><span id="l9.356" class="difflineminus">-            // get the attribute array for the specified LDAP attribute and</span>
<a href="#l9.357"></a><span id="l9.357" class="difflineminus">-            // return the first value if it isn't empty.</span>
<a href="#l9.358"></a><span id="l9.358" class="difflineminus">-            var refStart = aProperty.Value.indexOf(&quot;#&quot;);</span>
<a href="#l9.359"></a><span id="l9.359" class="difflineminus">-            if (aProperty.Value.slice(0, refStart + 1) ==</span>
<a href="#l9.360"></a><span id="l9.360" class="difflineminus">-                LDAPATTR_NAMESPACE_URI) {</span>
<a href="#l9.361"></a><span id="l9.361" class="difflineminus">-</span>
<a href="#l9.362"></a><span id="l9.362" class="difflineminus">-                try {</span>
<a href="#l9.363"></a><span id="l9.363" class="difflineminus">-                    delegate = aSource.GetDelegate(&quot;message.ldap&quot;,</span>
<a href="#l9.364"></a><span id="l9.364" class="difflineminus">-                            Components.interfaces.nsILDAPMessage);</span>
<a href="#l9.365"></a><span id="l9.365" class="difflineminus">-                }</span>
<a href="#l9.366"></a><span id="l9.366" class="difflineminus">-                catch (e) {</span>
<a href="#l9.367"></a><span id="l9.367" class="difflineminus">-                }</span>
<a href="#l9.368"></a><span id="l9.368" class="difflineminus">-                if (delegate != null) {</span>
<a href="#l9.369"></a><span id="l9.369" class="difflineminus">-                    var attributeName = aProperty.Value.slice(refStart + 1);</span>
<a href="#l9.370"></a><span id="l9.370" class="difflineminus">-                    enumerator = new ArrayEnumerator(this.getAttributeArray(</span>
<a href="#l9.371"></a><span id="l9.371" class="difflineminus">-                        delegate, attributeName));</span>
<a href="#l9.372"></a><span id="l9.372" class="difflineminus">-                    if (enumerator.hasMoreElements()) {</span>
<a href="#l9.373"></a><span id="l9.373" class="difflineminus">-                        return enumerator.getNext();</span>
<a href="#l9.374"></a><span id="l9.374" class="difflineminus">-                    }</span>
<a href="#l9.375"></a><span id="l9.375" class="difflineminus">-                }</span>
<a href="#l9.376"></a><span id="l9.376" class="difflineminus">-            }</span>
<a href="#l9.377"></a><span id="l9.377" class="difflineminus">-        }</span>
<a href="#l9.378"></a><span id="l9.378" class="difflineminus">-</span>
<a href="#l9.379"></a><span id="l9.379" class="difflineminus">-        // Found nothing.</span>
<a href="#l9.380"></a><span id="l9.380" class="difflineminus">-        Components.returnCode = NS_RDF_NO_VALUE;</span>
<a href="#l9.381"></a><span id="l9.381" class="difflineminus">-        return null;</span>
<a href="#l9.382"></a><span id="l9.382" class="difflineminus">-    },</span>
<a href="#l9.383"></a><span id="l9.383" class="difflineminus">-</span>
<a href="#l9.384"></a><span id="l9.384" class="difflineminus">-    /**</span>
<a href="#l9.385"></a><span id="l9.385" class="difflineminus">-     * Find all children of that are related to the source by the given arc</span>
<a href="#l9.386"></a><span id="l9.386" class="difflineminus">-     * arc and truth value.</span>
<a href="#l9.387"></a><span id="l9.387" class="difflineminus">-     *</span>
<a href="#l9.388"></a><span id="l9.388" class="difflineminus">-     * @return NS_OK unless a catastrophic error occurs. If the</span>
<a href="#l9.389"></a><span id="l9.389" class="difflineminus">-     * method returns NS_OK, you may assume that nsISimpleEnumerator points</span>
<a href="#l9.390"></a><span id="l9.390" class="difflineminus">-     * to a valid (but possibly empty) cursor.</span>
<a href="#l9.391"></a><span id="l9.391" class="difflineminus">-     *</span>
<a href="#l9.392"></a><span id="l9.392" class="difflineminus">-     * nsISimpleEnumerator GetTargets (in nsIRDFResource aSource,</span>
<a href="#l9.393"></a><span id="l9.393" class="difflineminus">-     *                                 in nsIRDFResource aProperty,</span>
<a href="#l9.394"></a><span id="l9.394" class="difflineminus">-     *                                 in boolean aTruthValue);</span>
<a href="#l9.395"></a><span id="l9.395" class="difflineminus">-     */</span>
<a href="#l9.396"></a><span id="l9.396" class="difflineminus">-    GetTargets: function(aSource, aProperty, aTruthValue) {</span>
<a href="#l9.397"></a><span id="l9.397" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.398"></a><span id="l9.398" class="difflineminus">-            dump(&quot;GetTargets() called with args: \n\t&quot; + aSource.Value +</span>
<a href="#l9.399"></a><span id="l9.399" class="difflineminus">-             &quot;\n\t&quot; + aProperty.Value + &quot;\n\t&quot; + aTruthValue + &quot;\n\n&quot;);</span>
<a href="#l9.400"></a><span id="l9.400" class="difflineminus">-        }</span>
<a href="#l9.401"></a><span id="l9.401" class="difflineminus">-</span>
<a href="#l9.402"></a><span id="l9.402" class="difflineminus">-        // We don't handle negative assertions.</span>
<a href="#l9.403"></a><span id="l9.403" class="difflineminus">-        // XXX Should we? Can we?</span>
<a href="#l9.404"></a><span id="l9.404" class="difflineminus">-        if (!aTruthValue) {</span>
<a href="#l9.405"></a><span id="l9.405" class="difflineminus">-            return new ArrayEnumerator(new Array());</span>
<a href="#l9.406"></a><span id="l9.406" class="difflineminus">-        }</span>
<a href="#l9.407"></a><span id="l9.407" class="difflineminus">-</span>
<a href="#l9.408"></a><span id="l9.408" class="difflineminus">-        var delegate;</span>
<a href="#l9.409"></a><span id="l9.409" class="difflineminus">-</span>
<a href="#l9.410"></a><span id="l9.410" class="difflineminus">-        if (aProperty.EqualsNode(this.kNC_child)</span>
<a href="#l9.411"></a><span id="l9.411" class="difflineminus">-            || aProperty.EqualsNode(this.kNC_recursiveChild)) {</span>
<a href="#l9.412"></a><span id="l9.412" class="difflineminus">-            // Find children or recursiveChildren. Get the messagelist delegate</span>
<a href="#l9.413"></a><span id="l9.413" class="difflineminus">-            // (flat for child, recursive for recursiveChild) for aSource and</span>
<a href="#l9.414"></a><span id="l9.414" class="difflineminus">-            // return an enumerator for the list, if available.</span>
<a href="#l9.415"></a><span id="l9.415" class="difflineminus">-            var listType = (aProperty.EqualsNode(this.kNC_child) ?</span>
<a href="#l9.416"></a><span id="l9.416" class="difflineminus">-                            &quot;flat.messagelist.ldap&quot; :</span>
<a href="#l9.417"></a><span id="l9.417" class="difflineminus">-                            &quot;recursive.messagelist.ldap&quot;);</span>
<a href="#l9.418"></a><span id="l9.418" class="difflineminus">-            try {</span>
<a href="#l9.419"></a><span id="l9.419" class="difflineminus">-                delegate = aSource.GetDelegate(listType,</span>
<a href="#l9.420"></a><span id="l9.420" class="difflineminus">-                                       Components.interfaces.nsISupportsArray);</span>
<a href="#l9.421"></a><span id="l9.421" class="difflineminus">-            }</span>
<a href="#l9.422"></a><span id="l9.422" class="difflineminus">-            catch (e) {</span>
<a href="#l9.423"></a><span id="l9.423" class="difflineminus">-            }</span>
<a href="#l9.424"></a><span id="l9.424" class="difflineminus">-            if (delegate != null) {</span>
<a href="#l9.425"></a><span id="l9.425" class="difflineminus">-                return new nsISupportsArrayEnumerator(delegate);</span>
<a href="#l9.426"></a><span id="l9.426" class="difflineminus">-            }</span>
<a href="#l9.427"></a><span id="l9.427" class="difflineminus">-        }</span>
<a href="#l9.428"></a><span id="l9.428" class="difflineminus">-        else if (aProperty.EqualsNode(this.kNC_DN)) {</span>
<a href="#l9.429"></a><span id="l9.429" class="difflineminus">-            // Find the DN arc. Get the message delegate for aSource</span>
<a href="#l9.430"></a><span id="l9.430" class="difflineminus">-            // and return the resource for the dn property of the message,</span>
<a href="#l9.431"></a><span id="l9.431" class="difflineminus">-            // if available.</span>
<a href="#l9.432"></a><span id="l9.432" class="difflineminus">-            try {</span>
<a href="#l9.433"></a><span id="l9.433" class="difflineminus">-                delegate = aSource.GetDelegate(&quot;message.ldap&quot;,</span>
<a href="#l9.434"></a><span id="l9.434" class="difflineminus">-                                       Components.interfaces.nsILDAPMessage);</span>
<a href="#l9.435"></a><span id="l9.435" class="difflineminus">-            }</span>
<a href="#l9.436"></a><span id="l9.436" class="difflineminus">-            catch (e) {</span>
<a href="#l9.437"></a><span id="l9.437" class="difflineminus">-            }</span>
<a href="#l9.438"></a><span id="l9.438" class="difflineminus">-            if (delegate != null) {</span>
<a href="#l9.439"></a><span id="l9.439" class="difflineminus">-                return this.mRdfSvc.GetResource(delegate.dn);</span>
<a href="#l9.440"></a><span id="l9.440" class="difflineminus">-            }</span>
<a href="#l9.441"></a><span id="l9.441" class="difflineminus">-        }</span>
<a href="#l9.442"></a><span id="l9.442" class="difflineminus">-        else {</span>
<a href="#l9.443"></a><span id="l9.443" class="difflineminus">-            // Find a different arc. See if we're looking for an LDAP attribute</span>
<a href="#l9.444"></a><span id="l9.444" class="difflineminus">-            // arc. If so, get the message delegate for aSource, if we find one</span>
<a href="#l9.445"></a><span id="l9.445" class="difflineminus">-            // get the attribute array for the specified LDAP attribute and</span>
<a href="#l9.446"></a><span id="l9.446" class="difflineminus">-            // an enumerator for the array.</span>
<a href="#l9.447"></a><span id="l9.447" class="difflineminus">-            var refStart = aProperty.Value.indexOf(&quot;#&quot;);</span>
<a href="#l9.448"></a><span id="l9.448" class="difflineminus">-            if (aProperty.Value.slice(0, refStart + 1) ==</span>
<a href="#l9.449"></a><span id="l9.449" class="difflineminus">-                 LDAPATTR_NAMESPACE_URI) {</span>
<a href="#l9.450"></a><span id="l9.450" class="difflineminus">-                try {</span>
<a href="#l9.451"></a><span id="l9.451" class="difflineminus">-                    delegate = aSource.GetDelegate(&quot;message.ldap&quot;,</span>
<a href="#l9.452"></a><span id="l9.452" class="difflineminus">-                                       Components.interfaces.nsILDAPMessage);</span>
<a href="#l9.453"></a><span id="l9.453" class="difflineminus">-                }</span>
<a href="#l9.454"></a><span id="l9.454" class="difflineminus">-                catch (e) {</span>
<a href="#l9.455"></a><span id="l9.455" class="difflineminus">-                }</span>
<a href="#l9.456"></a><span id="l9.456" class="difflineminus">-                if (delegate != null) {</span>
<a href="#l9.457"></a><span id="l9.457" class="difflineminus">-                    var attributeName = aProperty.Value.slice(refStart + 1);</span>
<a href="#l9.458"></a><span id="l9.458" class="difflineminus">-                    return new ArrayEnumerator(</span>
<a href="#l9.459"></a><span id="l9.459" class="difflineminus">-                        this.getAttributeArray(delegate, attributeName));</span>
<a href="#l9.460"></a><span id="l9.460" class="difflineminus">-                }</span>
<a href="#l9.461"></a><span id="l9.461" class="difflineminus">-            }</span>
<a href="#l9.462"></a><span id="l9.462" class="difflineminus">-        }</span>
<a href="#l9.463"></a><span id="l9.463" class="difflineminus">-</span>
<a href="#l9.464"></a><span id="l9.464" class="difflineminus">-        // Found nothing, return enumerator for empty array.</span>
<a href="#l9.465"></a><span id="l9.465" class="difflineminus">-        return new ArrayEnumerator(new Array());</span>
<a href="#l9.466"></a><span id="l9.466" class="difflineminus">-    },</span>
<a href="#l9.467"></a><span id="l9.467" class="difflineminus">-</span>
<a href="#l9.468"></a><span id="l9.468" class="difflineminus">-    /**</span>
<a href="#l9.469"></a><span id="l9.469" class="difflineminus">-     * Add an assertion to the graph.</span>
<a href="#l9.470"></a><span id="l9.470" class="difflineminus">-     *</span>
<a href="#l9.471"></a><span id="l9.471" class="difflineminus">-     * void Assert (in nsIRDFResource aSource,</span>
<a href="#l9.472"></a><span id="l9.472" class="difflineminus">-     *              in nsIRDFResource aProperty,</span>
<a href="#l9.473"></a><span id="l9.473" class="difflineminus">-     *              in nsIRDFNode aTarget,</span>
<a href="#l9.474"></a><span id="l9.474" class="difflineminus">-     *              in boolean aTruthValue);</span>
<a href="#l9.475"></a><span id="l9.475" class="difflineminus">-     */</span>
<a href="#l9.476"></a><span id="l9.476" class="difflineminus">-    Assert: function(aSource, aProperty, aTarget, aTruthValue) {</span>
<a href="#l9.477"></a><span id="l9.477" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.478"></a><span id="l9.478" class="difflineminus">-            dump(&quot;Assert() called with args: \n\t&quot; + aSource.Value +</span>
<a href="#l9.479"></a><span id="l9.479" class="difflineminus">-             &quot;\n\t&quot; + aProperty.Value + &quot;\n\t&quot; + aTarget.Value +</span>
<a href="#l9.480"></a><span id="l9.480" class="difflineminus">-             &quot;\n\t&quot; + aTruthValue + &quot;\n\n&quot;);</span>
<a href="#l9.481"></a><span id="l9.481" class="difflineminus">-        }</span>
<a href="#l9.482"></a><span id="l9.482" class="difflineminus">-    },</span>
<a href="#l9.483"></a><span id="l9.483" class="difflineminus">-</span>
<a href="#l9.484"></a><span id="l9.484" class="difflineminus">-    /**</span>
<a href="#l9.485"></a><span id="l9.485" class="difflineminus">-     * Remove an assertion from the graph.</span>
<a href="#l9.486"></a><span id="l9.486" class="difflineminus">-     *</span>
<a href="#l9.487"></a><span id="l9.487" class="difflineminus">-     * void Unassert (in nsIRDFResource aSource,</span>
<a href="#l9.488"></a><span id="l9.488" class="difflineminus">-     *                in nsIRDFResource aProperty,</span>
<a href="#l9.489"></a><span id="l9.489" class="difflineminus">-     *                in nsIRDFNode aTarget);</span>
<a href="#l9.490"></a><span id="l9.490" class="difflineminus">-     */</span>
<a href="#l9.491"></a><span id="l9.491" class="difflineminus">-    Unassert: function(aSource, aProperty, aTarget) {</span>
<a href="#l9.492"></a><span id="l9.492" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.493"></a><span id="l9.493" class="difflineminus">-            dump(&quot;Unassert() called with args: \n\t&quot; + aSource.Value +</span>
<a href="#l9.494"></a><span id="l9.494" class="difflineminus">-             &quot;\n\t&quot; + aProperty.Value + &quot;\n\t&quot; + aTarget.Value + &quot;\n\n&quot;);</span>
<a href="#l9.495"></a><span id="l9.495" class="difflineminus">-        }</span>
<a href="#l9.496"></a><span id="l9.496" class="difflineminus">-    },</span>
<a href="#l9.497"></a><span id="l9.497" class="difflineminus">-</span>
<a href="#l9.498"></a><span id="l9.498" class="difflineminus">-    /**</span>
<a href="#l9.499"></a><span id="l9.499" class="difflineminus">-     * Change an assertion from</span>
<a href="#l9.500"></a><span id="l9.500" class="difflineminus">-     *</span>
<a href="#l9.501"></a><span id="l9.501" class="difflineminus">-     *   [aSource]--[aProperty]--&gt;[aOldTarget]</span>
<a href="#l9.502"></a><span id="l9.502" class="difflineminus">-     *</span>
<a href="#l9.503"></a><span id="l9.503" class="difflineminus">-     * to</span>
<a href="#l9.504"></a><span id="l9.504" class="difflineminus">-     *</span>
<a href="#l9.505"></a><span id="l9.505" class="difflineminus">-     *   [aSource]--[aProperty]--&gt;[aNewTarget]</span>
<a href="#l9.506"></a><span id="l9.506" class="difflineminus">-     *</span>
<a href="#l9.507"></a><span id="l9.507" class="difflineminus">-     * void Change (in nsIRDFResource aSource,</span>
<a href="#l9.508"></a><span id="l9.508" class="difflineminus">-     *              in nsIRDFResource aProperty,</span>
<a href="#l9.509"></a><span id="l9.509" class="difflineminus">-     *              in nsIRDFNode aOldTarget,</span>
<a href="#l9.510"></a><span id="l9.510" class="difflineminus">-     *              in nsIRDFNode aNewTarget);</span>
<a href="#l9.511"></a><span id="l9.511" class="difflineminus">-     */</span>
<a href="#l9.512"></a><span id="l9.512" class="difflineminus">-    Change: function(aSource, aProperty, aOldTarget, aNewTarget) {</span>
<a href="#l9.513"></a><span id="l9.513" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.514"></a><span id="l9.514" class="difflineminus">-            dump(&quot;Change() called with args: \n\t&quot; + aSource.Value +</span>
<a href="#l9.515"></a><span id="l9.515" class="difflineminus">-             &quot;\n\t&quot; + aProperty.Value + &quot;\n\t&quot; + aOldTarget.Value +</span>
<a href="#l9.516"></a><span id="l9.516" class="difflineminus">-             &quot;\n\t&quot; + aNewTarget.Value + &quot;\n\n&quot;);</span>
<a href="#l9.517"></a><span id="l9.517" class="difflineminus">-        }</span>
<a href="#l9.518"></a><span id="l9.518" class="difflineminus">-    },</span>
<a href="#l9.519"></a><span id="l9.519" class="difflineminus">-</span>
<a href="#l9.520"></a><span id="l9.520" class="difflineminus">-    /**</span>
<a href="#l9.521"></a><span id="l9.521" class="difflineminus">-     * 'Move' an assertion from</span>
<a href="#l9.522"></a><span id="l9.522" class="difflineminus">-     *</span>
<a href="#l9.523"></a><span id="l9.523" class="difflineminus">-     *   [aOldSource]--[aProperty]--&gt;[aTarget]</span>
<a href="#l9.524"></a><span id="l9.524" class="difflineminus">-     *</span>
<a href="#l9.525"></a><span id="l9.525" class="difflineminus">-     * to</span>
<a href="#l9.526"></a><span id="l9.526" class="difflineminus">-     *</span>
<a href="#l9.527"></a><span id="l9.527" class="difflineminus">-     *   [aNewSource]--[aProperty]--&gt;[aTarget]</span>
<a href="#l9.528"></a><span id="l9.528" class="difflineminus">-     *</span>
<a href="#l9.529"></a><span id="l9.529" class="difflineminus">-     * void Move (in nsIRDFResource aOldSource,</span>
<a href="#l9.530"></a><span id="l9.530" class="difflineminus">-     *            in nsIRDFResource aNewSource,</span>
<a href="#l9.531"></a><span id="l9.531" class="difflineminus">-     *            in nsIRDFResource aProperty,</span>
<a href="#l9.532"></a><span id="l9.532" class="difflineminus">-     *            in nsIRDFNode aTarget);</span>
<a href="#l9.533"></a><span id="l9.533" class="difflineminus">-     */</span>
<a href="#l9.534"></a><span id="l9.534" class="difflineminus">-    Move: function(aOldSource, aNewSource, aProperty, aTarget) {</span>
<a href="#l9.535"></a><span id="l9.535" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.536"></a><span id="l9.536" class="difflineminus">-            dump(&quot;Move() called with args: \n\t&quot; + aOldSource.Value +</span>
<a href="#l9.537"></a><span id="l9.537" class="difflineminus">-             &quot;\n\t&quot; + aNewSource.Value + &quot;\n\t&quot; + aProperty.Value +</span>
<a href="#l9.538"></a><span id="l9.538" class="difflineminus">-             &quot;\n\t&quot; + aTarget.Value + &quot;\n\n&quot;);</span>
<a href="#l9.539"></a><span id="l9.539" class="difflineminus">-        }</span>
<a href="#l9.540"></a><span id="l9.540" class="difflineminus">-    },</span>
<a href="#l9.541"></a><span id="l9.541" class="difflineminus">-</span>
<a href="#l9.542"></a><span id="l9.542" class="difflineminus">-    /**</span>
<a href="#l9.543"></a><span id="l9.543" class="difflineminus">-     * Query whether an assertion exists in this graph.</span>
<a href="#l9.544"></a><span id="l9.544" class="difflineminus">-     *</span>
<a href="#l9.545"></a><span id="l9.545" class="difflineminus">-     * boolean HasAssertion(in nsIRDFResource aSource,</span>
<a href="#l9.546"></a><span id="l9.546" class="difflineminus">-     *                      in nsIRDFResource aProperty,</span>
<a href="#l9.547"></a><span id="l9.547" class="difflineminus">-     *                      in nsIRDFNode     aTarget,</span>
<a href="#l9.548"></a><span id="l9.548" class="difflineminus">-     *                      in boolean        aTruthValue);</span>
<a href="#l9.549"></a><span id="l9.549" class="difflineminus">-     */</span>
<a href="#l9.550"></a><span id="l9.550" class="difflineminus">-    HasAssertion: function(aSource, aProperty, aTarget, aTruthValue) {</span>
<a href="#l9.551"></a><span id="l9.551" class="difflineminus">-        // The datasource doesn't currently use any sort of standard</span>
<a href="#l9.552"></a><span id="l9.552" class="difflineminus">-        // RDF containers.</span>
<a href="#l9.553"></a><span id="l9.553" class="difflineminus">-        if (aProperty.EqualsNode(this.kRDF_instanceOf)) {</span>
<a href="#l9.554"></a><span id="l9.554" class="difflineminus">-            return false;</span>
<a href="#l9.555"></a><span id="l9.555" class="difflineminus">-        }</span>
<a href="#l9.556"></a><span id="l9.556" class="difflineminus">-</span>
<a href="#l9.557"></a><span id="l9.557" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.558"></a><span id="l9.558" class="difflineminus">-            dump(&quot;HasAssertion() called with args: \n\t&quot; + aSource.Value +</span>
<a href="#l9.559"></a><span id="l9.559" class="difflineminus">-             &quot;\n\t&quot; + aProperty.Value + &quot;\n\t&quot; + aTarget.Value + &quot;\n\t&quot; +</span>
<a href="#l9.560"></a><span id="l9.560" class="difflineminus">-             aTruthValue + &quot;\n\n&quot;);</span>
<a href="#l9.561"></a><span id="l9.561" class="difflineminus">-        }</span>
<a href="#l9.562"></a><span id="l9.562" class="difflineminus">-</span>
<a href="#l9.563"></a><span id="l9.563" class="difflineminus">-        // We don't handle negative assertions.</span>
<a href="#l9.564"></a><span id="l9.564" class="difflineminus">-        // XXX Should we? Can we?</span>
<a href="#l9.565"></a><span id="l9.565" class="difflineminus">-        if (!aTruthValue) {</span>
<a href="#l9.566"></a><span id="l9.566" class="difflineminus">-            return false;</span>
<a href="#l9.567"></a><span id="l9.567" class="difflineminus">-        }</span>
<a href="#l9.568"></a><span id="l9.568" class="difflineminus">-</span>
<a href="#l9.569"></a><span id="l9.569" class="difflineminus">-        var delegate;</span>
<a href="#l9.570"></a><span id="l9.570" class="difflineminus">-</span>
<a href="#l9.571"></a><span id="l9.571" class="difflineminus">-        if (aProperty.EqualsNode(this.kNC_child)</span>
<a href="#l9.572"></a><span id="l9.572" class="difflineminus">-            || aProperty.EqualsNode(this.kNC_recursiveChild)) {</span>
<a href="#l9.573"></a><span id="l9.573" class="difflineminus">-            // Find out if aTarget is in the children or recursiveChildren of</span>
<a href="#l9.574"></a><span id="l9.574" class="difflineminus">-            // aSource. Get the messagelist delegate (flat for child, recursive</span>
<a href="#l9.575"></a><span id="l9.575" class="difflineminus">-            // for recursiveChild) for aSource.</span>
<a href="#l9.576"></a><span id="l9.576" class="difflineminus">-            var listType = (aProperty.EqualsNode(this.kNC_child) ?</span>
<a href="#l9.577"></a><span id="l9.577" class="difflineminus">-                            &quot;flat.messagelist.ldap&quot; :</span>
<a href="#l9.578"></a><span id="l9.578" class="difflineminus">-                            &quot;recursive.messagelist.ldap&quot;);</span>
<a href="#l9.579"></a><span id="l9.579" class="difflineminus">-            try {</span>
<a href="#l9.580"></a><span id="l9.580" class="difflineminus">-                delegate = aSource.GetDelegate(listType,</span>
<a href="#l9.581"></a><span id="l9.581" class="difflineminus">-                                       Components.interfaces.nsISupportsArray);</span>
<a href="#l9.582"></a><span id="l9.582" class="difflineminus">-            }</span>
<a href="#l9.583"></a><span id="l9.583" class="difflineminus">-            catch (e) {</span>
<a href="#l9.584"></a><span id="l9.584" class="difflineminus">-            }</span>
<a href="#l9.585"></a><span id="l9.585" class="difflineminus">-            if (delegate != null) {</span>
<a href="#l9.586"></a><span id="l9.586" class="difflineminus">-                // We have a delegate message list, loop through it and return</span>
<a href="#l9.587"></a><span id="l9.587" class="difflineminus">-                // true if the target is in the list.</span>
<a href="#l9.588"></a><span id="l9.588" class="difflineminus">-                var enumerator = delegate.Enumerate();</span>
<a href="#l9.589"></a><span id="l9.589" class="difflineminus">-                var done = false;</span>
<a href="#l9.590"></a><span id="l9.590" class="difflineminus">-                try {</span>
<a href="#l9.591"></a><span id="l9.591" class="difflineminus">-                    enumerator.isDone();</span>
<a href="#l9.592"></a><span id="l9.592" class="difflineminus">-                }</span>
<a href="#l9.593"></a><span id="l9.593" class="difflineminus">-                catch (e) {</span>
<a href="#l9.594"></a><span id="l9.594" class="difflineminus">-                    done = true;</span>
<a href="#l9.595"></a><span id="l9.595" class="difflineminus">-                }</span>
<a href="#l9.596"></a><span id="l9.596" class="difflineminus">-                while(!done) {</span>
<a href="#l9.597"></a><span id="l9.597" class="difflineminus">-                    var resource = enumerator.currentItem().QueryInterface(</span>
<a href="#l9.598"></a><span id="l9.598" class="difflineminus">-                            Components.interfaces.nsIRDFResource);</span>
<a href="#l9.599"></a><span id="l9.599" class="difflineminus">-                    if (resource.Value == aTarget.Value) {</span>
<a href="#l9.600"></a><span id="l9.600" class="difflineminus">-                        return true;</span>
<a href="#l9.601"></a><span id="l9.601" class="difflineminus">-                    }</span>
<a href="#l9.602"></a><span id="l9.602" class="difflineminus">-                    try {</span>
<a href="#l9.603"></a><span id="l9.603" class="difflineminus">-                        enumerator.next();</span>
<a href="#l9.604"></a><span id="l9.604" class="difflineminus">-                    }</span>
<a href="#l9.605"></a><span id="l9.605" class="difflineminus">-                    catch (e) {</span>
<a href="#l9.606"></a><span id="l9.606" class="difflineminus">-                        done = true;</span>
<a href="#l9.607"></a><span id="l9.607" class="difflineminus">-                    }</span>
<a href="#l9.608"></a><span id="l9.608" class="difflineminus">-                }</span>
<a href="#l9.609"></a><span id="l9.609" class="difflineminus">-            }</span>
<a href="#l9.610"></a><span id="l9.610" class="difflineminus">-        }</span>
<a href="#l9.611"></a><span id="l9.611" class="difflineminus">-        else if (aProperty.EqualsNode(this.kNC_DN)) {</span>
<a href="#l9.612"></a><span id="l9.612" class="difflineminus">-            // Find the DN arc. Get the message delegate for aSource</span>
<a href="#l9.613"></a><span id="l9.613" class="difflineminus">-            // and return the resource for the dn property of the message,</span>
<a href="#l9.614"></a><span id="l9.614" class="difflineminus">-            // if available.</span>
<a href="#l9.615"></a><span id="l9.615" class="difflineminus">-            try {</span>
<a href="#l9.616"></a><span id="l9.616" class="difflineminus">-                delegate = aSource.GetDelegate(&quot;message.ldap&quot;,</span>
<a href="#l9.617"></a><span id="l9.617" class="difflineminus">-                                       Components.interfaces.nsILDAPMessage);</span>
<a href="#l9.618"></a><span id="l9.618" class="difflineminus">-            }</span>
<a href="#l9.619"></a><span id="l9.619" class="difflineminus">-            catch (e) {</span>
<a href="#l9.620"></a><span id="l9.620" class="difflineminus">-            }</span>
<a href="#l9.621"></a><span id="l9.621" class="difflineminus">-            if (delegate != null) {</span>
<a href="#l9.622"></a><span id="l9.622" class="difflineminus">-                return (delegate.dn == aTarget.Value);</span>
<a href="#l9.623"></a><span id="l9.623" class="difflineminus">-            }</span>
<a href="#l9.624"></a><span id="l9.624" class="difflineminus">-        }</span>
<a href="#l9.625"></a><span id="l9.625" class="difflineminus">-        else {</span>
<a href="#l9.626"></a><span id="l9.626" class="difflineminus">-            // Find a different arc. See if we're looking for an LDAP attribute</span>
<a href="#l9.627"></a><span id="l9.627" class="difflineminus">-            // arc. If so, get the message delegate for aSource, if we find one</span>
<a href="#l9.628"></a><span id="l9.628" class="difflineminus">-            // get the attribute array for the specified LDAP attribute and</span>
<a href="#l9.629"></a><span id="l9.629" class="difflineminus">-            // an enumerator for the array.</span>
<a href="#l9.630"></a><span id="l9.630" class="difflineminus">-            var refStart = aProperty.Value.indexOf(&quot;#&quot;);</span>
<a href="#l9.631"></a><span id="l9.631" class="difflineminus">-            if (aProperty.Value.slice(0, refStart + 1) ==</span>
<a href="#l9.632"></a><span id="l9.632" class="difflineminus">-                LDAPATTR_NAMESPACE_URI) {</span>
<a href="#l9.633"></a><span id="l9.633" class="difflineminus">-                try {</span>
<a href="#l9.634"></a><span id="l9.634" class="difflineminus">-                    delegate = aSource.GetDelegate(&quot;message.ldap&quot;,</span>
<a href="#l9.635"></a><span id="l9.635" class="difflineminus">-                            Components.interfaces.nsILDAPMessage);</span>
<a href="#l9.636"></a><span id="l9.636" class="difflineminus">-                }</span>
<a href="#l9.637"></a><span id="l9.637" class="difflineminus">-                catch (e) {</span>
<a href="#l9.638"></a><span id="l9.638" class="difflineminus">-                }</span>
<a href="#l9.639"></a><span id="l9.639" class="difflineminus">-                if (delegate != null) {</span>
<a href="#l9.640"></a><span id="l9.640" class="difflineminus">-                    var attributeName = aProperty.Value.slice(refStart + 1);</span>
<a href="#l9.641"></a><span id="l9.641" class="difflineminus">-                    var attributeArray = this.getAttributeArray(delegate,</span>
<a href="#l9.642"></a><span id="l9.642" class="difflineminus">-                                                                attributeName);</span>
<a href="#l9.643"></a><span id="l9.643" class="difflineminus">-                    var attributes = new ArrayEnumerator(attributeArray);</span>
<a href="#l9.644"></a><span id="l9.644" class="difflineminus">-                    while (attributes.hasMoreElements()) {</span>
<a href="#l9.645"></a><span id="l9.645" class="difflineminus">-                        var attribute = attributes.getNext();</span>
<a href="#l9.646"></a><span id="l9.646" class="difflineminus">-                        if (attribute.Value == aTarget.Value) {</span>
<a href="#l9.647"></a><span id="l9.647" class="difflineminus">-                            return true;</span>
<a href="#l9.648"></a><span id="l9.648" class="difflineminus">-                        }</span>
<a href="#l9.649"></a><span id="l9.649" class="difflineminus">-                    }</span>
<a href="#l9.650"></a><span id="l9.650" class="difflineminus">-                }</span>
<a href="#l9.651"></a><span id="l9.651" class="difflineminus">-            }</span>
<a href="#l9.652"></a><span id="l9.652" class="difflineminus">-        }</span>
<a href="#l9.653"></a><span id="l9.653" class="difflineminus">-</span>
<a href="#l9.654"></a><span id="l9.654" class="difflineminus">-        // if we haven't returned true yet, there's nothing here</span>
<a href="#l9.655"></a><span id="l9.655" class="difflineminus">-        //</span>
<a href="#l9.656"></a><span id="l9.656" class="difflineminus">-        return false;</span>
<a href="#l9.657"></a><span id="l9.657" class="difflineminus">-    },</span>
<a href="#l9.658"></a><span id="l9.658" class="difflineminus">-</span>
<a href="#l9.659"></a><span id="l9.659" class="difflineminus">-    /**</span>
<a href="#l9.660"></a><span id="l9.660" class="difflineminus">-     * Add an observer to this data source. If the datasource</span>
<a href="#l9.661"></a><span id="l9.661" class="difflineminus">-     * supports observers, the datasource source should hold a strong</span>
<a href="#l9.662"></a><span id="l9.662" class="difflineminus">-     * reference to the observer.</span>
<a href="#l9.663"></a><span id="l9.663" class="difflineminus">-     *</span>
<a href="#l9.664"></a><span id="l9.664" class="difflineminus">-     * void AddObserver(in nsIRDFObserver aObserver);</span>
<a href="#l9.665"></a><span id="l9.665" class="difflineminus">-     */</span>
<a href="#l9.666"></a><span id="l9.666" class="difflineminus">-    AddObserver: function(aObserver) {</span>
<a href="#l9.667"></a><span id="l9.667" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.668"></a><span id="l9.668" class="difflineminus">-            dump(&quot;AddObserver() called\n\n&quot;);</span>
<a href="#l9.669"></a><span id="l9.669" class="difflineminus">-        }</span>
<a href="#l9.670"></a><span id="l9.670" class="difflineminus">-</span>
<a href="#l9.671"></a><span id="l9.671" class="difflineminus">-        // We need to proxy our observers on the main (UI) thread, because</span>
<a href="#l9.672"></a><span id="l9.672" class="difflineminus">-        // the RDF code wants to run on the main thread.</span>
<a href="#l9.673"></a><span id="l9.673" class="difflineminus">-        this.mObserverList.push(getProxyOnUIThread(aObserver,</span>
<a href="#l9.674"></a><span id="l9.674" class="difflineminus">-                Components.interfaces.nsIRDFObserver));</span>
<a href="#l9.675"></a><span id="l9.675" class="difflineminus">-    },</span>
<a href="#l9.676"></a><span id="l9.676" class="difflineminus">-</span>
<a href="#l9.677"></a><span id="l9.677" class="difflineminus">-    /**</span>
<a href="#l9.678"></a><span id="l9.678" class="difflineminus">-     * Remove an observer from this data source.</span>
<a href="#l9.679"></a><span id="l9.679" class="difflineminus">-     *</span>
<a href="#l9.680"></a><span id="l9.680" class="difflineminus">-     * void RemoveObserver (in nsIRDFObserver aObserver);</span>
<a href="#l9.681"></a><span id="l9.681" class="difflineminus">-     */</span>
<a href="#l9.682"></a><span id="l9.682" class="difflineminus">-    RemoveObserver: function(aObserver) {</span>
<a href="#l9.683"></a><span id="l9.683" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.684"></a><span id="l9.684" class="difflineminus">-            dump(&quot;RemoveObserver() called&quot; + &quot;\n\n&quot;);</span>
<a href="#l9.685"></a><span id="l9.685" class="difflineminus">-        }</span>
<a href="#l9.686"></a><span id="l9.686" class="difflineminus">-</span>
<a href="#l9.687"></a><span id="l9.687" class="difflineminus">-        var iter = new ArrayEnumerator(this.mObserverList);</span>
<a href="#l9.688"></a><span id="l9.688" class="difflineminus">-        var nextObserver;</span>
<a href="#l9.689"></a><span id="l9.689" class="difflineminus">-        while ((nextObserver = iter.getNext())) {</span>
<a href="#l9.690"></a><span id="l9.690" class="difflineminus">-            if (nextObserver == aObserver) {</span>
<a href="#l9.691"></a><span id="l9.691" class="difflineminus">-                splice(iter.index, 1);</span>
<a href="#l9.692"></a><span id="l9.692" class="difflineminus">-            }</span>
<a href="#l9.693"></a><span id="l9.693" class="difflineminus">-        }</span>
<a href="#l9.694"></a><span id="l9.694" class="difflineminus">-    },</span>
<a href="#l9.695"></a><span id="l9.695" class="difflineminus">-</span>
<a href="#l9.696"></a><span id="l9.696" class="difflineminus">-    /**</span>
<a href="#l9.697"></a><span id="l9.697" class="difflineminus">-     * Get a cursor to iterate over all the arcs that point into a node.</span>
<a href="#l9.698"></a><span id="l9.698" class="difflineminus">-     *</span>
<a href="#l9.699"></a><span id="l9.699" class="difflineminus">-     * @return NS_OK unless a catastrophic error occurs. If the method</span>
<a href="#l9.700"></a><span id="l9.700" class="difflineminus">-     * returns NS_OK, you may assume that labels points to a valid (but</span>
<a href="#l9.701"></a><span id="l9.701" class="difflineminus">-     * possible empty) nsISimpleEnumerator object.</span>
<a href="#l9.702"></a><span id="l9.702" class="difflineminus">-     *</span>
<a href="#l9.703"></a><span id="l9.703" class="difflineminus">-     * nsISimpleEnumerator ArcLabelsIn (in nsIRDFNode aNode);</span>
<a href="#l9.704"></a><span id="l9.704" class="difflineminus">-     */</span>
<a href="#l9.705"></a><span id="l9.705" class="difflineminus">-    ArcLabelsIn: function(aNode) {</span>
<a href="#l9.706"></a><span id="l9.706" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.707"></a><span id="l9.707" class="difflineminus">-            dump(&quot;ArcLabelsIn() called with args: \n\t&quot; + aNode.Value +</span>
<a href="#l9.708"></a><span id="l9.708" class="difflineminus">-             &quot;\n\n&quot;);</span>
<a href="#l9.709"></a><span id="l9.709" class="difflineminus">-        }</span>
<a href="#l9.710"></a><span id="l9.710" class="difflineminus">-</span>
<a href="#l9.711"></a><span id="l9.711" class="difflineminus">-        return new ArrayEnumerator(new Array());</span>
<a href="#l9.712"></a><span id="l9.712" class="difflineminus">-    },</span>
<a href="#l9.713"></a><span id="l9.713" class="difflineminus">-</span>
<a href="#l9.714"></a><span id="l9.714" class="difflineminus">-    /**</span>
<a href="#l9.715"></a><span id="l9.715" class="difflineminus">-     * Get a cursor to iterate over all the arcs that originate in</span>
<a href="#l9.716"></a><span id="l9.716" class="difflineminus">-     * a resource.</span>
<a href="#l9.717"></a><span id="l9.717" class="difflineminus">-     *</span>
<a href="#l9.718"></a><span id="l9.718" class="difflineminus">-     * @return NS_OK unless a catastrophic error occurs. If the method</span>
<a href="#l9.719"></a><span id="l9.719" class="difflineminus">-     * returns NS_OK, you may assume that labels points to a valid (but</span>
<a href="#l9.720"></a><span id="l9.720" class="difflineminus">-     * possible empty) nsISimpleEnumerator object.</span>
<a href="#l9.721"></a><span id="l9.721" class="difflineminus">-     *</span>
<a href="#l9.722"></a><span id="l9.722" class="difflineminus">-     * nsISimpleEnumerator ArcLabelsOut(in nsIRDFResource aSource);</span>
<a href="#l9.723"></a><span id="l9.723" class="difflineminus">-     */</span>
<a href="#l9.724"></a><span id="l9.724" class="difflineminus">-    ArcLabelsOut: function(aSource)</span>
<a href="#l9.725"></a><span id="l9.725" class="difflineminus">-    {</span>
<a href="#l9.726"></a><span id="l9.726" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.727"></a><span id="l9.727" class="difflineminus">-            dump(&quot;ArcLabelsOut() called with args: \n\t&quot; + aSource.Value +</span>
<a href="#l9.728"></a><span id="l9.728" class="difflineminus">-             &quot;\n\n&quot;);</span>
<a href="#l9.729"></a><span id="l9.729" class="difflineminus">-        }</span>
<a href="#l9.730"></a><span id="l9.730" class="difflineminus">-</span>
<a href="#l9.731"></a><span id="l9.731" class="difflineminus">-        return new ArrayEnumerator(new Array());</span>
<a href="#l9.732"></a><span id="l9.732" class="difflineminus">-    },</span>
<a href="#l9.733"></a><span id="l9.733" class="difflineminus">-</span>
<a href="#l9.734"></a><span id="l9.734" class="difflineminus">-    /**</span>
<a href="#l9.735"></a><span id="l9.735" class="difflineminus">-     * Returns true if the specified node is pointed to by the specified arc.</span>
<a href="#l9.736"></a><span id="l9.736" class="difflineminus">-     * Equivalent to enumerating ArcLabelsIn and comparing for the specified</span>
<a href="#l9.737"></a><span id="l9.737" class="difflineminus">-     * arc.</span>
<a href="#l9.738"></a><span id="l9.738" class="difflineminus">-     *</span>
<a href="#l9.739"></a><span id="l9.739" class="difflineminus">-     * boolean hasArcIn (in nsIRDFNode aNode,</span>
<a href="#l9.740"></a><span id="l9.740" class="difflineminus">-     *                   in nsIRDFResource aArc);</span>
<a href="#l9.741"></a><span id="l9.741" class="difflineminus">-     */</span>
<a href="#l9.742"></a><span id="l9.742" class="difflineminus">-    hasArcIn: function(aNode, aArc)</span>
<a href="#l9.743"></a><span id="l9.743" class="difflineminus">-    {</span>
<a href="#l9.744"></a><span id="l9.744" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.745"></a><span id="l9.745" class="difflineminus">-            dump(&quot;hasArcIn() called with args: \n\t&quot; + aNode.Value +</span>
<a href="#l9.746"></a><span id="l9.746" class="difflineminus">-             &quot;\n\t&quot; + aArc.Value + &quot;\n\n&quot;);</span>
<a href="#l9.747"></a><span id="l9.747" class="difflineminus">-        }</span>
<a href="#l9.748"></a><span id="l9.748" class="difflineminus">-</span>
<a href="#l9.749"></a><span id="l9.749" class="difflineminus">-        return false;</span>
<a href="#l9.750"></a><span id="l9.750" class="difflineminus">-    },</span>
<a href="#l9.751"></a><span id="l9.751" class="difflineminus">-</span>
<a href="#l9.752"></a><span id="l9.752" class="difflineminus">-    /**</span>
<a href="#l9.753"></a><span id="l9.753" class="difflineminus">-     * Returns true if the specified node has the specified outward arc.</span>
<a href="#l9.754"></a><span id="l9.754" class="difflineminus">-     * Equivalent to enumerating ArcLabelsOut and comparing for the specified</span>
<a href="#l9.755"></a><span id="l9.755" class="difflineminus">-     * arc.</span>
<a href="#l9.756"></a><span id="l9.756" class="difflineminus">-     *</span>
<a href="#l9.757"></a><span id="l9.757" class="difflineminus">-     * boolean hasArcOut (in nsIRDFResource aSource,</span>
<a href="#l9.758"></a><span id="l9.758" class="difflineminus">-     *                    in nsIRDFResource aArc);</span>
<a href="#l9.759"></a><span id="l9.759" class="difflineminus">-     */</span>
<a href="#l9.760"></a><span id="l9.760" class="difflineminus">-    hasArcOut: function(aSource, aArc)</span>
<a href="#l9.761"></a><span id="l9.761" class="difflineminus">-    {</span>
<a href="#l9.762"></a><span id="l9.762" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.763"></a><span id="l9.763" class="difflineminus">-            dump(&quot;hasArcOut() called with args: \n\t&quot; + aSource.Value +</span>
<a href="#l9.764"></a><span id="l9.764" class="difflineminus">-             &quot;\n\t&quot; + aArc.Value + &quot;\n\n&quot;);</span>
<a href="#l9.765"></a><span id="l9.765" class="difflineminus">-        }</span>
<a href="#l9.766"></a><span id="l9.766" class="difflineminus">-</span>
<a href="#l9.767"></a><span id="l9.767" class="difflineminus">-        var delegate;</span>
<a href="#l9.768"></a><span id="l9.768" class="difflineminus">-</span>
<a href="#l9.769"></a><span id="l9.769" class="difflineminus">-        if (aArc.EqualsNode(this.kNC_child)</span>
<a href="#l9.770"></a><span id="l9.770" class="difflineminus">-            || aArc.EqualsNode(this.kNC_recursiveChild)) {</span>
<a href="#l9.771"></a><span id="l9.771" class="difflineminus">-            // Find children or recursiveChildren. Get the messagelist delegate</span>
<a href="#l9.772"></a><span id="l9.772" class="difflineminus">-            // (flat for child, recursive for recursiveChild) for aSource and</span>
<a href="#l9.773"></a><span id="l9.773" class="difflineminus">-            // return true if we have one.</span>
<a href="#l9.774"></a><span id="l9.774" class="difflineminus">-            var listType = (aArc.EqualsNode(this.kNC_child) ?</span>
<a href="#l9.775"></a><span id="l9.775" class="difflineminus">-                            &quot;flat.messagelist.ldap&quot; :</span>
<a href="#l9.776"></a><span id="l9.776" class="difflineminus">-                            &quot;recursive.messagelist.ldap&quot;);</span>
<a href="#l9.777"></a><span id="l9.777" class="difflineminus">-            try {</span>
<a href="#l9.778"></a><span id="l9.778" class="difflineminus">-                delegate = aSource.GetDelegate(listType,</span>
<a href="#l9.779"></a><span id="l9.779" class="difflineminus">-                       Components.interfaces.nsISupportsArray);</span>
<a href="#l9.780"></a><span id="l9.780" class="difflineminus">-            }</span>
<a href="#l9.781"></a><span id="l9.781" class="difflineminus">-            catch (e) {</span>
<a href="#l9.782"></a><span id="l9.782" class="difflineminus">-            }</span>
<a href="#l9.783"></a><span id="l9.783" class="difflineminus">-            if (delegate != null) {</span>
<a href="#l9.784"></a><span id="l9.784" class="difflineminus">-                return true;</span>
<a href="#l9.785"></a><span id="l9.785" class="difflineminus">-            }</span>
<a href="#l9.786"></a><span id="l9.786" class="difflineminus">-        }</span>
<a href="#l9.787"></a><span id="l9.787" class="difflineminus">-        else if (aArc.EqualsNode(this.kNC_DN)) {</span>
<a href="#l9.788"></a><span id="l9.788" class="difflineminus">-            // Find the DN arc. Get the message delegate for aSource</span>
<a href="#l9.789"></a><span id="l9.789" class="difflineminus">-            // and return true if we have a delegate and its dn</span>
<a href="#l9.790"></a><span id="l9.790" class="difflineminus">-            // attribute is non-null.</span>
<a href="#l9.791"></a><span id="l9.791" class="difflineminus">-            try {</span>
<a href="#l9.792"></a><span id="l9.792" class="difflineminus">-                delegate = aSource.GetDelegate(&quot;message.ldap&quot;,</span>
<a href="#l9.793"></a><span id="l9.793" class="difflineminus">-                        Components.interfaces.nsILDAPMessage);</span>
<a href="#l9.794"></a><span id="l9.794" class="difflineminus">-            }</span>
<a href="#l9.795"></a><span id="l9.795" class="difflineminus">-            catch (e) {</span>
<a href="#l9.796"></a><span id="l9.796" class="difflineminus">-            }</span>
<a href="#l9.797"></a><span id="l9.797" class="difflineminus">-            return (delegate != null);</span>
<a href="#l9.798"></a><span id="l9.798" class="difflineminus">-        }</span>
<a href="#l9.799"></a><span id="l9.799" class="difflineminus">-</span>
<a href="#l9.800"></a><span id="l9.800" class="difflineminus">-        // Find a different arc. See if we're looking for an LDAP attribute</span>
<a href="#l9.801"></a><span id="l9.801" class="difflineminus">-        // arc. If so, get the message delegate for aSource, if we find one</span>
<a href="#l9.802"></a><span id="l9.802" class="difflineminus">-        // get the attribute array for the specified LDAP attribute and</span>
<a href="#l9.803"></a><span id="l9.803" class="difflineminus">-        // return true if it contains at least one value.</span>
<a href="#l9.804"></a><span id="l9.804" class="difflineminus">-        var refStart = aArc.Value.indexOf(&quot;#&quot;);</span>
<a href="#l9.805"></a><span id="l9.805" class="difflineminus">-        if (aArc.Value.slice(0, refStart + 1) == LDAPATTR_NAMESPACE_URI) {</span>
<a href="#l9.806"></a><span id="l9.806" class="difflineminus">-            try {</span>
<a href="#l9.807"></a><span id="l9.807" class="difflineminus">-                delegate = aSource.GetDelegate(&quot;message.ldap&quot;,</span>
<a href="#l9.808"></a><span id="l9.808" class="difflineminus">-                        Components.interfaces.nsILDAPMessage);</span>
<a href="#l9.809"></a><span id="l9.809" class="difflineminus">-            }</span>
<a href="#l9.810"></a><span id="l9.810" class="difflineminus">-            catch (e) {</span>
<a href="#l9.811"></a><span id="l9.811" class="difflineminus">-            }</span>
<a href="#l9.812"></a><span id="l9.812" class="difflineminus">-            if (delegate != null) {</span>
<a href="#l9.813"></a><span id="l9.813" class="difflineminus">-                var attributeName = aArc.Value.slice(refStart + 1);</span>
<a href="#l9.814"></a><span id="l9.814" class="difflineminus">-                var attributeArray = this.getAttributeArray(delegate,</span>
<a href="#l9.815"></a><span id="l9.815" class="difflineminus">-                                                            attributeName);</span>
<a href="#l9.816"></a><span id="l9.816" class="difflineminus">-                if (attributeArray.length &gt; 0) {</span>
<a href="#l9.817"></a><span id="l9.817" class="difflineminus">-                    return true;</span>
<a href="#l9.818"></a><span id="l9.818" class="difflineminus">-                }</span>
<a href="#l9.819"></a><span id="l9.819" class="difflineminus">-            }</span>
<a href="#l9.820"></a><span id="l9.820" class="difflineminus">-        }</span>
<a href="#l9.821"></a><span id="l9.821" class="difflineminus">-        return false;</span>
<a href="#l9.822"></a><span id="l9.822" class="difflineminus">-    },</span>
<a href="#l9.823"></a><span id="l9.823" class="difflineminus">-</span>
<a href="#l9.824"></a><span id="l9.824" class="difflineminus">-    /**</span>
<a href="#l9.825"></a><span id="l9.825" class="difflineminus">-     * Private functions</span>
<a href="#l9.826"></a><span id="l9.826" class="difflineminus">-     */</span>
<a href="#l9.827"></a><span id="l9.827" class="difflineminus">-</span>
<a href="#l9.828"></a><span id="l9.828" class="difflineminus">-    onAssert: function(aDataSource, aSource, aProperty, aTarget)</span>
<a href="#l9.829"></a><span id="l9.829" class="difflineminus">-    {</span>
<a href="#l9.830"></a><span id="l9.830" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.831"></a><span id="l9.831" class="difflineminus">-            dump(&quot;OnAssert() called with args: \n\t&quot; + aSource.Value +</span>
<a href="#l9.832"></a><span id="l9.832" class="difflineminus">-             &quot;\n\t&quot; + aProperty.Value + &quot;\n\t&quot; + aTarget.Value + &quot;\n\n&quot;);</span>
<a href="#l9.833"></a><span id="l9.833" class="difflineminus">-        }</span>
<a href="#l9.834"></a><span id="l9.834" class="difflineminus">-</span>
<a href="#l9.835"></a><span id="l9.835" class="difflineminus">-        var iter = new ArrayEnumerator(this.mObserverList);</span>
<a href="#l9.836"></a><span id="l9.836" class="difflineminus">-        var nextObserver;</span>
<a href="#l9.837"></a><span id="l9.837" class="difflineminus">-        while ((nextObserver = iter.getNext()) != null) {</span>
<a href="#l9.838"></a><span id="l9.838" class="difflineminus">-            nextObserver.onAssert(this, aSource, aProperty, aTarget);</span>
<a href="#l9.839"></a><span id="l9.839" class="difflineminus">-        }</span>
<a href="#l9.840"></a><span id="l9.840" class="difflineminus">-    },</span>
<a href="#l9.841"></a><span id="l9.841" class="difflineminus">-</span>
<a href="#l9.842"></a><span id="l9.842" class="difflineminus">-    onUnassert: function(aDataSource, aSource, aProperty, aTarget)</span>
<a href="#l9.843"></a><span id="l9.843" class="difflineminus">-    {</span>
<a href="#l9.844"></a><span id="l9.844" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.845"></a><span id="l9.845" class="difflineminus">-            dump(&quot;onUnassert() called with args: \n\t&quot; + aSource.Value +</span>
<a href="#l9.846"></a><span id="l9.846" class="difflineminus">-             &quot;\n\t&quot; + aProperty.Value + &quot;\n\t&quot; + aTarget.Value + &quot;\n\n&quot;);</span>
<a href="#l9.847"></a><span id="l9.847" class="difflineminus">-        }</span>
<a href="#l9.848"></a><span id="l9.848" class="difflineminus">-</span>
<a href="#l9.849"></a><span id="l9.849" class="difflineminus">-        var iter = new ArrayEnumerator(this.mObserverList);</span>
<a href="#l9.850"></a><span id="l9.850" class="difflineminus">-        var nextObserver;</span>
<a href="#l9.851"></a><span id="l9.851" class="difflineminus">-        while ((nextObserver = iter.getNext()) != null) {</span>
<a href="#l9.852"></a><span id="l9.852" class="difflineminus">-            nextObserver.onUnassert(this, aSource, aProperty, aTarget);</span>
<a href="#l9.853"></a><span id="l9.853" class="difflineminus">-        }</span>
<a href="#l9.854"></a><span id="l9.854" class="difflineminus">-    },</span>
<a href="#l9.855"></a><span id="l9.855" class="difflineminus">-</span>
<a href="#l9.856"></a><span id="l9.856" class="difflineminus">-    onChange: function(aDataSource, aSource, aProperty, aOldTarget, aNewTarget)</span>
<a href="#l9.857"></a><span id="l9.857" class="difflineminus">-    {</span>
<a href="#l9.858"></a><span id="l9.858" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.859"></a><span id="l9.859" class="difflineminus">-            dump(&quot;onChange() called with args: \n\t&quot; + aSource.Value +</span>
<a href="#l9.860"></a><span id="l9.860" class="difflineminus">-             &quot;\n\t&quot; + aProperty.Value + &quot;\n\t&quot; + aOldTarget.Value +</span>
<a href="#l9.861"></a><span id="l9.861" class="difflineminus">-             &quot;\n\t&quot; + aNewTarget.Value + &quot;\n\n&quot;);</span>
<a href="#l9.862"></a><span id="l9.862" class="difflineminus">-        }</span>
<a href="#l9.863"></a><span id="l9.863" class="difflineminus">-</span>
<a href="#l9.864"></a><span id="l9.864" class="difflineminus">-        var iter = new ArrayEnumerator(this.mObserverList);</span>
<a href="#l9.865"></a><span id="l9.865" class="difflineminus">-        var nextObserver;</span>
<a href="#l9.866"></a><span id="l9.866" class="difflineminus">-        while ((nextObserver = iter.getNext()) != null) {</span>
<a href="#l9.867"></a><span id="l9.867" class="difflineminus">-            nextObserver.onChange(this, aSource, aProperty, aOldTarget, aNewTarget);</span>
<a href="#l9.868"></a><span id="l9.868" class="difflineminus">-        }</span>
<a href="#l9.869"></a><span id="l9.869" class="difflineminus">-    },</span>
<a href="#l9.870"></a><span id="l9.870" class="difflineminus">-</span>
<a href="#l9.871"></a><span id="l9.871" class="difflineminus">-    onBeginUpdateBatch: function()</span>
<a href="#l9.872"></a><span id="l9.872" class="difflineminus">-    {</span>
<a href="#l9.873"></a><span id="l9.873" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.874"></a><span id="l9.874" class="difflineminus">-            dump(&quot;onBeginUpdateBatch() called\n\n&quot;);</span>
<a href="#l9.875"></a><span id="l9.875" class="difflineminus">-        }</span>
<a href="#l9.876"></a><span id="l9.876" class="difflineminus">-</span>
<a href="#l9.877"></a><span id="l9.877" class="difflineminus">-        var iter = new ArrayEnumerator(this.mObserverList);</span>
<a href="#l9.878"></a><span id="l9.878" class="difflineminus">-        var nextObserver;</span>
<a href="#l9.879"></a><span id="l9.879" class="difflineminus">-        while ((nextObserver = iter.getNext()) != null) {</span>
<a href="#l9.880"></a><span id="l9.880" class="difflineminus">-            nextObserver.onBeginUpdateBatch(this);</span>
<a href="#l9.881"></a><span id="l9.881" class="difflineminus">-        }</span>
<a href="#l9.882"></a><span id="l9.882" class="difflineminus">-    },</span>
<a href="#l9.883"></a><span id="l9.883" class="difflineminus">-</span>
<a href="#l9.884"></a><span id="l9.884" class="difflineminus">-    onEndUpdateBatch: function()</span>
<a href="#l9.885"></a><span id="l9.885" class="difflineminus">-    {</span>
<a href="#l9.886"></a><span id="l9.886" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.887"></a><span id="l9.887" class="difflineminus">-            dump(&quot;onEndUpdateBatch() called\n\n&quot;);</span>
<a href="#l9.888"></a><span id="l9.888" class="difflineminus">-        }</span>
<a href="#l9.889"></a><span id="l9.889" class="difflineminus">-</span>
<a href="#l9.890"></a><span id="l9.890" class="difflineminus">-        var iter = new ArrayEnumerator(this.mObserverList);</span>
<a href="#l9.891"></a><span id="l9.891" class="difflineminus">-        var nextObserver;</span>
<a href="#l9.892"></a><span id="l9.892" class="difflineminus">-        while ((nextObserver = iter.getNext()) != null) {</span>
<a href="#l9.893"></a><span id="l9.893" class="difflineminus">-            nextObserver.onEndUpdateBatch(this);</span>
<a href="#l9.894"></a><span id="l9.894" class="difflineminus">-        }</span>
<a href="#l9.895"></a><span id="l9.895" class="difflineminus">-    },</span>
<a href="#l9.896"></a><span id="l9.896" class="difflineminus">-</span>
<a href="#l9.897"></a><span id="l9.897" class="difflineminus">-    /**</span>
<a href="#l9.898"></a><span id="l9.898" class="difflineminus">-     * Fills an array with the RDF nodes for the values of an attribute</span>
<a href="#l9.899"></a><span id="l9.899" class="difflineminus">-     * out of a nsLDAPMessage.</span>
<a href="#l9.900"></a><span id="l9.900" class="difflineminus">-     */</span>
<a href="#l9.901"></a><span id="l9.901" class="difflineminus">-    getAttributeArray: function(aMessage, aAttributeName) {</span>
<a href="#l9.902"></a><span id="l9.902" class="difflineminus">-        var resultArray = new Array();</span>
<a href="#l9.903"></a><span id="l9.903" class="difflineminus">-        var valuesCount = {};</span>
<a href="#l9.904"></a><span id="l9.904" class="difflineminus">-        try {</span>
<a href="#l9.905"></a><span id="l9.905" class="difflineminus">-            var values =  aMessage.getValues(aAttributeName, valuesCount);</span>
<a href="#l9.906"></a><span id="l9.906" class="difflineminus">-            for (var j = 0; j &lt; valuesCount.value; j++) {</span>
<a href="#l9.907"></a><span id="l9.907" class="difflineminus">-                var attributeValue = this.mRdfSvc.GetLiteral(values[j]);</span>
<a href="#l9.908"></a><span id="l9.908" class="difflineminus">-                resultArray.push(attributeValue);</span>
<a href="#l9.909"></a><span id="l9.909" class="difflineminus">-            }</span>
<a href="#l9.910"></a><span id="l9.910" class="difflineminus">-        }</span>
<a href="#l9.911"></a><span id="l9.911" class="difflineminus">-        catch (e) {</span>
<a href="#l9.912"></a><span id="l9.912" class="difflineminus">-            // Error or the attribute was not there.</span>
<a href="#l9.913"></a><span id="l9.913" class="difflineminus">-            // XXX Do we need to do something about the real errors?</span>
<a href="#l9.914"></a><span id="l9.914" class="difflineminus">-            // XXX Just returning empty array for now.</span>
<a href="#l9.915"></a><span id="l9.915" class="difflineminus">-        }</span>
<a href="#l9.916"></a><span id="l9.916" class="difflineminus">-        return resultArray;</span>
<a href="#l9.917"></a><span id="l9.917" class="difflineminus">-    }</span>
<a href="#l9.918"></a><span id="l9.918" class="difflineminus">-}</span>
<a href="#l9.919"></a><span id="l9.919" class="difflineminus">-</span>
<a href="#l9.920"></a><span id="l9.920" class="difflineminus">-// the nsILDAPMessage associated with a given resource</span>
<a href="#l9.921"></a><span id="l9.921" class="difflineminus">-//</span>
<a href="#l9.922"></a><span id="l9.922" class="difflineminus">-const NS_LDAPMESSAGERDFDELEGATEFACTORY_CONTRACTID =</span>
<a href="#l9.923"></a><span id="l9.923" class="difflineminus">-    '@mozilla.org/rdf/delegate-factory;1?key='+&quot;message.ldap&quot;+'&amp;scheme=ldap'</span>
<a href="#l9.924"></a><span id="l9.924" class="difflineminus">-const NS_LDAPFLATMESSAGELISTRDFDELEGATEFACTORY_CONTRACTID =</span>
<a href="#l9.925"></a><span id="l9.925" class="difflineminus">-    '@mozilla.org/rdf/delegate-factory;1?key=flat.messagelist.ldap&amp;scheme=ldap'</span>
<a href="#l9.926"></a><span id="l9.926" class="difflineminus">-const NS_LDAPRECURSIVEMESSAGELISTRDFDELEGATEFACTORY_CONTRACTID =</span>
<a href="#l9.927"></a><span id="l9.927" class="difflineminus">-    '@mozilla.org/rdf/delegate-factory;1?key=recursive.messagelist.ldap&amp;scheme=ldap'</span>
<a href="#l9.928"></a><span id="l9.928" class="difflineminus">-const NS_LDAPMESSAGERDFDELEGATEFACTORY_CID =</span>
<a href="#l9.929"></a><span id="l9.929" class="difflineminus">-    Components.ID('{4b6fb566-1dd2-11b2-a1a9-889a3f852b0b}');</span>
<a href="#l9.930"></a><span id="l9.930" class="difflineminus">-</span>
<a href="#l9.931"></a><span id="l9.931" class="difflineminus">-function nsLDAPMessageRDFDelegateFactory() {}</span>
<a href="#l9.932"></a><span id="l9.932" class="difflineminus">-</span>
<a href="#l9.933"></a><span id="l9.933" class="difflineminus">-nsLDAPMessageRDFDelegateFactory.prototype =</span>
<a href="#l9.934"></a><span id="l9.934" class="difflineminus">-{</span>
<a href="#l9.935"></a><span id="l9.935" class="difflineminus">-    mRdfSvc: {},</span>
<a href="#l9.936"></a><span id="l9.936" class="difflineminus">-    mLDAPSvc: {},</span>
<a href="#l9.937"></a><span id="l9.937" class="difflineminus">-    mLDAPDataSource: {},</span>
<a href="#l9.938"></a><span id="l9.938" class="difflineminus">-    kNC_child: {},</span>
<a href="#l9.939"></a><span id="l9.939" class="difflineminus">-    kNC_recursiveChild: {},</span>
<a href="#l9.940"></a><span id="l9.940" class="difflineminus">-</span>
<a href="#l9.941"></a><span id="l9.941" class="difflineminus">-    mConnection: {},        // connection to the LDAP server</span>
<a href="#l9.942"></a><span id="l9.942" class="difflineminus">-    mOperation: {},         // current LDAP operation</span>
<a href="#l9.943"></a><span id="l9.943" class="difflineminus">-    mMessagesHash: {},      // hash with the currently known messages</span>
<a href="#l9.944"></a><span id="l9.944" class="difflineminus">-                            // (hashed on URI)</span>
<a href="#l9.945"></a><span id="l9.945" class="difflineminus">-    mMessagesListHash: {},</span>
<a href="#l9.946"></a><span id="l9.946" class="difflineminus">-    mInProgressHash: {},</span>
<a href="#l9.947"></a><span id="l9.947" class="difflineminus">-    kInited: -1,</span>
<a href="#l9.948"></a><span id="l9.948" class="difflineminus">-</span>
<a href="#l9.949"></a><span id="l9.949" class="difflineminus">-    Init: function() {</span>
<a href="#l9.950"></a><span id="l9.950" class="difflineminus">-        if (this.kInited == -1) {</span>
<a href="#l9.951"></a><span id="l9.951" class="difflineminus">-            this.kInited = 0;</span>
<a href="#l9.952"></a><span id="l9.952" class="difflineminus">-</span>
<a href="#l9.953"></a><span id="l9.953" class="difflineminus">-            // get the RDF service</span>
<a href="#l9.954"></a><span id="l9.954" class="difflineminus">-            //</span>
<a href="#l9.955"></a><span id="l9.955" class="difflineminus">-            this.mRdfSvc = Components.</span>
<a href="#l9.956"></a><span id="l9.956" class="difflineminus">-                    classes[&quot;@mozilla.org/rdf/rdf-service;1&quot;].</span>
<a href="#l9.957"></a><span id="l9.957" class="difflineminus">-                    getService(Components.interfaces.nsIRDFService);</span>
<a href="#l9.958"></a><span id="l9.958" class="difflineminus">-            this.mLDAPSvc = Components.</span>
<a href="#l9.959"></a><span id="l9.959" class="difflineminus">-                    classes[&quot;@mozilla.org/network/ldap-service;1&quot;].</span>
<a href="#l9.960"></a><span id="l9.960" class="difflineminus">-                    getService(Components.interfaces.nsILDAPService);</span>
<a href="#l9.961"></a><span id="l9.961" class="difflineminus">-            this.mLDAPDataSource = this.mRdfSvc.GetDataSource(&quot;rdf:ldap&quot;).</span>
<a href="#l9.962"></a><span id="l9.962" class="difflineminus">-                    QueryInterface(Components.interfaces.nsIRDFObserver);</span>
<a href="#l9.963"></a><span id="l9.963" class="difflineminus">-</span>
<a href="#l9.964"></a><span id="l9.964" class="difflineminus">-            // get some RDF Resources that we'll need</span>
<a href="#l9.965"></a><span id="l9.965" class="difflineminus">-            //</span>
<a href="#l9.966"></a><span id="l9.966" class="difflineminus">-            this.kNC_child = this.mRdfSvc.GetResource(NC_NAMESPACE_URI +</span>
<a href="#l9.967"></a><span id="l9.967" class="difflineminus">-                                                       &quot;child&quot;);</span>
<a href="#l9.968"></a><span id="l9.968" class="difflineminus">-            this.kNC_recursiveChild = this.mRdfSvc.GetResource(NC_NAMESPACE_URI +</span>
<a href="#l9.969"></a><span id="l9.969" class="difflineminus">-                                                       &quot;recursiveChild&quot;);</span>
<a href="#l9.970"></a><span id="l9.970" class="difflineminus">-        }</span>
<a href="#l9.971"></a><span id="l9.971" class="difflineminus">-    },</span>
<a href="#l9.972"></a><span id="l9.972" class="difflineminus">-</span>
<a href="#l9.973"></a><span id="l9.973" class="difflineminus">-    QueryInterface: function(iid) {</span>
<a href="#l9.974"></a><span id="l9.974" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.975"></a><span id="l9.975" class="difflineminus">-            dump(&quot;QueryInterface called\n\n&quot;);</span>
<a href="#l9.976"></a><span id="l9.976" class="difflineminus">-        }</span>
<a href="#l9.977"></a><span id="l9.977" class="difflineminus">-        if (iid.equals(Components.interfaces.nsISupports) ||</span>
<a href="#l9.978"></a><span id="l9.978" class="difflineminus">-            iid.equals(Components.interfaces.nsIRDFDelegateFactory))</span>
<a href="#l9.979"></a><span id="l9.979" class="difflineminus">-            return this;</span>
<a href="#l9.980"></a><span id="l9.980" class="difflineminus">-</span>
<a href="#l9.981"></a><span id="l9.981" class="difflineminus">-        throw Components.results.NS_ERROR_NO_INTERFACE;</span>
<a href="#l9.982"></a><span id="l9.982" class="difflineminus">-    },</span>
<a href="#l9.983"></a><span id="l9.983" class="difflineminus">-</span>
<a href="#l9.984"></a><span id="l9.984" class="difflineminus">-    // from nsIRDFDelegateFactory:</span>
<a href="#l9.985"></a><span id="l9.985" class="difflineminus">-    //</span>
<a href="#l9.986"></a><span id="l9.986" class="difflineminus">-    // Create a delegate for the specified RDF resource.</span>
<a href="#l9.987"></a><span id="l9.987" class="difflineminus">-    //</span>
<a href="#l9.988"></a><span id="l9.988" class="difflineminus">-    // The created delegate should forward AddRef() and Release()</span>
<a href="#l9.989"></a><span id="l9.989" class="difflineminus">-    // calls to the aOuter object.</span>
<a href="#l9.990"></a><span id="l9.990" class="difflineminus">-    //</span>
<a href="#l9.991"></a><span id="l9.991" class="difflineminus">-    // void CreateDelegate(in nsIRDFResource aOuter,</span>
<a href="#l9.992"></a><span id="l9.992" class="difflineminus">-    //                     in string aKey,</span>
<a href="#l9.993"></a><span id="l9.993" class="difflineminus">-    //                     in nsIIDRef aIID,</span>
<a href="#l9.994"></a><span id="l9.994" class="difflineminus">-    //                     [retval, iid_is(aIID)] out nsQIResult aResult);</span>
<a href="#l9.995"></a><span id="l9.995" class="difflineminus">-    CreateDelegate: function (aOuter, aKey, aIID) {</span>
<a href="#l9.996"></a><span id="l9.996" class="difflineminus">-</span>
<a href="#l9.997"></a><span id="l9.997" class="difflineminus">-        function generateGetTargetsBoundCallback() {</span>
<a href="#l9.998"></a><span id="l9.998" class="difflineminus">-            function getTargetsBoundCallback() {</span>
<a href="#l9.999"></a><span id="l9.999" class="difflineminus">-            }</span>
<a href="#l9.1000"></a><span id="l9.1000" class="difflineminus">-</span>
<a href="#l9.1001"></a><span id="l9.1001" class="difflineminus">-            getTargetsBoundCallback.prototype.QueryInterface =</span>
<a href="#l9.1002"></a><span id="l9.1002" class="difflineminus">-                function(iid) {</span>
<a href="#l9.1003"></a><span id="l9.1003" class="difflineminus">-                    if (iid.equals(Components.interfaces.nsISupports) ||</span>
<a href="#l9.1004"></a><span id="l9.1004" class="difflineminus">-                        iid.equals(Components.interfaces.nsILDAPMessageListener))</span>
<a href="#l9.1005"></a><span id="l9.1005" class="difflineminus">-                        return this;</span>
<a href="#l9.1006"></a><span id="l9.1006" class="difflineminus">-</span>
<a href="#l9.1007"></a><span id="l9.1007" class="difflineminus">-                    throw Components.results.NS_ERROR_NO_INTERFACE;</span>
<a href="#l9.1008"></a><span id="l9.1008" class="difflineminus">-                }</span>
<a href="#l9.1009"></a><span id="l9.1009" class="difflineminus">-</span>
<a href="#l9.1010"></a><span id="l9.1010" class="difflineminus">-            getTargetsBoundCallback.prototype.onLDAPMessage =</span>
<a href="#l9.1011"></a><span id="l9.1011" class="difflineminus">-                function(aMessage) {</span>
<a href="#l9.1012"></a><span id="l9.1012" class="difflineminus">-                    if (DEBUG) {</span>
<a href="#l9.1013"></a><span id="l9.1013" class="difflineminus">-                        dump(&quot;getTargetsBoundCallback.onLDAPMessage()&quot; +</span>
<a href="#l9.1014"></a><span id="l9.1014" class="difflineminus">-                             &quot;called with scope: \n\t&quot; +</span>
<a href="#l9.1015"></a><span id="l9.1015" class="difflineminus">-                             aOuter.Value + &quot;\n\n&quot;);</span>
<a href="#l9.1016"></a><span id="l9.1016" class="difflineminus">-                    }</span>
<a href="#l9.1017"></a><span id="l9.1017" class="difflineminus">-</span>
<a href="#l9.1018"></a><span id="l9.1018" class="difflineminus">-                    // XXX how do we deal with this in release builds?</span>
<a href="#l9.1019"></a><span id="l9.1019" class="difflineminus">-                    // XXX deal with already bound case</span>
<a href="#l9.1020"></a><span id="l9.1020" class="difflineminus">-                    //</span>
<a href="#l9.1021"></a><span id="l9.1021" class="difflineminus">-                    if (aMessage.type != aMessage.RES_BIND) {</span>
<a href="#l9.1022"></a><span id="l9.1022" class="difflineminus">-                        dump(&quot;bind failed\n&quot;);</span>
<a href="#l9.1023"></a><span id="l9.1023" class="difflineminus">-                        delete callerObject.mInProgressHash[queryURL.spec];</span>
<a href="#l9.1024"></a><span id="l9.1024" class="difflineminus">-                        return;</span>
<a href="#l9.1025"></a><span id="l9.1025" class="difflineminus">-                    }</span>
<a href="#l9.1026"></a><span id="l9.1026" class="difflineminus">-</span>
<a href="#l9.1027"></a><span id="l9.1027" class="difflineminus">-                    // kick off a search</span>
<a href="#l9.1028"></a><span id="l9.1028" class="difflineminus">-                    //</span>
<a href="#l9.1029"></a><span id="l9.1029" class="difflineminus">-                    var searchOp = Components.classes[</span>
<a href="#l9.1030"></a><span id="l9.1030" class="difflineminus">-                            &quot;@mozilla.org/network/ldap-operation;1&quot;].</span>
<a href="#l9.1031"></a><span id="l9.1031" class="difflineminus">-                            createInstance(Components.interfaces.</span>
<a href="#l9.1032"></a><span id="l9.1032" class="difflineminus">-                            nsILDAPOperation);</span>
<a href="#l9.1033"></a><span id="l9.1033" class="difflineminus">-</span>
<a href="#l9.1034"></a><span id="l9.1034" class="difflineminus">-                    // XXX err handling</span>
<a href="#l9.1035"></a><span id="l9.1035" class="difflineminus">-                    searchOp.init(connection,</span>
<a href="#l9.1036"></a><span id="l9.1036" class="difflineminus">-                                  generateGetTargetsSearchCallback());</span>
<a href="#l9.1037"></a><span id="l9.1037" class="difflineminus">-                    // XXX err handling (also for url. accessors)</span>
<a href="#l9.1038"></a><span id="l9.1038" class="difflineminus">-                    // XXX constipate this</span>
<a href="#l9.1039"></a><span id="l9.1039" class="difflineminus">-                    // XXX real timeout</span>
<a href="#l9.1040"></a><span id="l9.1040" class="difflineminus">-                    searchOp.searchExt(queryURL.dn, queryURL.scope,</span>
<a href="#l9.1041"></a><span id="l9.1041" class="difflineminus">-                                       queryURL.filter, 0, new Array(),</span>
<a href="#l9.1042"></a><span id="l9.1042" class="difflineminus">-                                       0, -1);</span>
<a href="#l9.1043"></a><span id="l9.1043" class="difflineminus">-                }</span>
<a href="#l9.1044"></a><span id="l9.1044" class="difflineminus">-</span>
<a href="#l9.1045"></a><span id="l9.1045" class="difflineminus">-            getTargetsBoundCallback.prototype.onLDAPInit =</span>
<a href="#l9.1046"></a><span id="l9.1046" class="difflineminus">-                function(aConn, aStatus) {</span>
<a href="#l9.1047"></a><span id="l9.1047" class="difflineminus">-                    if (DEBUG) {</span>
<a href="#l9.1048"></a><span id="l9.1048" class="difflineminus">-                        dump(&quot;getTargetsBoundCallback.onLDAPInit()&quot; +</span>
<a href="#l9.1049"></a><span id="l9.1049" class="difflineminus">-                             &quot; called with status of &quot; + aStatus + &quot;\n\n&quot;);</span>
<a href="#l9.1050"></a><span id="l9.1050" class="difflineminus">-                    }</span>
<a href="#l9.1051"></a><span id="l9.1051" class="difflineminus">-</span>
<a href="#l9.1052"></a><span id="l9.1052" class="difflineminus">-                    // get and initialize an operation object</span>
<a href="#l9.1053"></a><span id="l9.1053" class="difflineminus">-                    //</span>
<a href="#l9.1054"></a><span id="l9.1054" class="difflineminus">-                    var operation = Components.classes</span>
<a href="#l9.1055"></a><span id="l9.1055" class="difflineminus">-                           [&quot;@mozilla.org/network/ldap-operation;1&quot;].</span>
<a href="#l9.1056"></a><span id="l9.1056" class="difflineminus">-                           createInstance(Components.interfaces.nsILDAPOperation);</span>
<a href="#l9.1057"></a><span id="l9.1057" class="difflineminus">-                    operation.init(connection,</span>
<a href="#l9.1058"></a><span id="l9.1058" class="difflineminus">-                                   getProxyOnUIThread(this, Components.interfaces.</span>
<a href="#l9.1059"></a><span id="l9.1059" class="difflineminus">-                                                            nsILDAPMessageListener));</span>
<a href="#l9.1060"></a><span id="l9.1060" class="difflineminus">-</span>
<a href="#l9.1061"></a><span id="l9.1061" class="difflineminus">-                    caller.mInProgressHash[aOuter.Value] = 1;</span>
<a href="#l9.1062"></a><span id="l9.1062" class="difflineminus">-</span>
<a href="#l9.1063"></a><span id="l9.1063" class="difflineminus">-                    // bind to the server.  we'll get a callback when this</span>
<a href="#l9.1064"></a><span id="l9.1064" class="difflineminus">-                    // finishes. XXX handle a password</span>
<a href="#l9.1065"></a><span id="l9.1065" class="difflineminus">-                    //</span>
<a href="#l9.1066"></a><span id="l9.1066" class="difflineminus">-                    operation.simpleBind(null);</span>
<a href="#l9.1067"></a><span id="l9.1067" class="difflineminus">-                }</span>
<a href="#l9.1068"></a><span id="l9.1068" class="difflineminus">-</span>
<a href="#l9.1069"></a><span id="l9.1069" class="difflineminus">-            return getProxyOnUIThread(new getTargetsBoundCallback(),</span>
<a href="#l9.1070"></a><span id="l9.1070" class="difflineminus">-                                      Components.interfaces.nsILDAPMessageListener);</span>
<a href="#l9.1071"></a><span id="l9.1071" class="difflineminus">-        }</span>
<a href="#l9.1072"></a><span id="l9.1072" class="difflineminus">-</span>
<a href="#l9.1073"></a><span id="l9.1073" class="difflineminus">-        function generateGetTargetsSearchCallback() {</span>
<a href="#l9.1074"></a><span id="l9.1074" class="difflineminus">-            function getTargetsSearchCallback() {</span>
<a href="#l9.1075"></a><span id="l9.1075" class="difflineminus">-            }</span>
<a href="#l9.1076"></a><span id="l9.1076" class="difflineminus">-</span>
<a href="#l9.1077"></a><span id="l9.1077" class="difflineminus">-            getTargetsSearchCallback.prototype.QueryInterface = function(iid) {</span>
<a href="#l9.1078"></a><span id="l9.1078" class="difflineminus">-                if (iid.equals(Components.interfaces.nsISupports) ||</span>
<a href="#l9.1079"></a><span id="l9.1079" class="difflineminus">-                    iid.equals(Components.interfaces.nsILDAPMessageListener))</span>
<a href="#l9.1080"></a><span id="l9.1080" class="difflineminus">-                    return this;</span>
<a href="#l9.1081"></a><span id="l9.1081" class="difflineminus">-</span>
<a href="#l9.1082"></a><span id="l9.1082" class="difflineminus">-                throw Components.results.NS_ERROR_NO_INTERFACE;</span>
<a href="#l9.1083"></a><span id="l9.1083" class="difflineminus">-            };</span>
<a href="#l9.1084"></a><span id="l9.1084" class="difflineminus">-</span>
<a href="#l9.1085"></a><span id="l9.1085" class="difflineminus">-            getTargetsSearchCallback.prototype.onLDAPMessage =</span>
<a href="#l9.1086"></a><span id="l9.1086" class="difflineminus">-                function(aMessage) {</span>
<a href="#l9.1087"></a><span id="l9.1087" class="difflineminus">-                    if (DEBUG) {</span>
<a href="#l9.1088"></a><span id="l9.1088" class="difflineminus">-                        dump(&quot;getTargetsSearchCallback() called with message&quot; +</span>
<a href="#l9.1089"></a><span id="l9.1089" class="difflineminus">-                               &quot; of type &quot; + aMessage.type + &quot;\n\n&quot;);</span>
<a href="#l9.1090"></a><span id="l9.1090" class="difflineminus">-                    }</span>
<a href="#l9.1091"></a><span id="l9.1091" class="difflineminus">-</span>
<a href="#l9.1092"></a><span id="l9.1092" class="difflineminus">-                    var listHash = caller.mMessagesListHash;</span>
<a href="#l9.1093"></a><span id="l9.1093" class="difflineminus">-                    if (aMessage.type == aMessage.RES_SEARCH_ENTRY) {</span>
<a href="#l9.1094"></a><span id="l9.1094" class="difflineminus">-                        if (DEBUG) {</span>
<a href="#l9.1095"></a><span id="l9.1095" class="difflineminus">-                            dump(&quot;getTargetsSearchCallback() called with &quot; +</span>
<a href="#l9.1096"></a><span id="l9.1096" class="difflineminus">-                                 &quot;message &quot; + aMessage.dn + &quot; for &quot; +</span>
<a href="#l9.1097"></a><span id="l9.1097" class="difflineminus">-                                 aOuter.Value + &quot;\n\n&quot;);</span>
<a href="#l9.1098"></a><span id="l9.1098" class="difflineminus">-                        }</span>
<a href="#l9.1099"></a><span id="l9.1099" class="difflineminus">-</span>
<a href="#l9.1100"></a><span id="l9.1100" class="difflineminus">-                        // Create a resource for the message we just got.</span>
<a href="#l9.1101"></a><span id="l9.1101" class="difflineminus">-                        // This is a single entry for which we'll cache the</span>
<a href="#l9.1102"></a><span id="l9.1102" class="difflineminus">-                        // nsILDAPMessage. If we got this as a result of a</span>
<a href="#l9.1103"></a><span id="l9.1103" class="difflineminus">-                        // &quot;list&quot; query we'll also add it to the result array.</span>
<a href="#l9.1104"></a><span id="l9.1104" class="difflineminus">-                        var newURL = Components.classes[&quot;@mozilla.org/network/ldap-url;1&quot;]</span>
<a href="#l9.1105"></a><span id="l9.1105" class="difflineminus">-                              .createInstance(Components.interfaces.nsILDAPURL);</span>
<a href="#l9.1106"></a><span id="l9.1106" class="difflineminus">-                        newURL.spec = queryURL.spec;</span>
<a href="#l9.1107"></a><span id="l9.1107" class="difflineminus">-                        newURL.dn = aMessage.dn;</span>
<a href="#l9.1108"></a><span id="l9.1108" class="difflineminus">-                        newURL.scope = SCOPE_BASE;</span>
<a href="#l9.1109"></a><span id="l9.1109" class="difflineminus">-                        newURL.filter = &quot;(objectClass=*)&quot;;</span>
<a href="#l9.1110"></a><span id="l9.1110" class="difflineminus">-                        var newResource =</span>
<a href="#l9.1111"></a><span id="l9.1111" class="difflineminus">-                            caller.mRdfSvc.GetResource(newURL.spec);</span>
<a href="#l9.1112"></a><span id="l9.1112" class="difflineminus">-</span>
<a href="#l9.1113"></a><span id="l9.1113" class="difflineminus">-                        // Add the LDAP message for the new resource in our</span>
<a href="#l9.1114"></a><span id="l9.1114" class="difflineminus">-                        // messages hashlist. We do this before adding it to</span>
<a href="#l9.1115"></a><span id="l9.1115" class="difflineminus">-                        // a query result array (when applicable), so that</span>
<a href="#l9.1116"></a><span id="l9.1116" class="difflineminus">-                        // when we onAssert this as a result for a query</span>
<a href="#l9.1117"></a><span id="l9.1117" class="difflineminus">-                        // returning multiple results, it is already cached.</span>
<a href="#l9.1118"></a><span id="l9.1118" class="difflineminus">-                        // If we wouldn't do this here, we'd start another</span>
<a href="#l9.1119"></a><span id="l9.1119" class="difflineminus">-                        // query for this resource.</span>
<a href="#l9.1120"></a><span id="l9.1120" class="difflineminus">-                        var messageHash = caller.mMessagesHash;</span>
<a href="#l9.1121"></a><span id="l9.1121" class="difflineminus">-                        if (!messageHash.hasOwnProperty(newURL.spec)) {</span>
<a href="#l9.1122"></a><span id="l9.1122" class="difflineminus">-                            messageHash[newURL.spec] = aMessage;</span>
<a href="#l9.1123"></a><span id="l9.1123" class="difflineminus">-                        }</span>
<a href="#l9.1124"></a><span id="l9.1124" class="difflineminus">-</span>
<a href="#l9.1125"></a><span id="l9.1125" class="difflineminus">-                        if (queryType == MESSAGE) {</span>
<a href="#l9.1126"></a><span id="l9.1126" class="difflineminus">-                            // XXX - we need to onAssert this resource. However,</span>
<a href="#l9.1127"></a><span id="l9.1127" class="difflineminus">-                            // we need to know somehow what the caller wanted</span>
<a href="#l9.1128"></a><span id="l9.1128" class="difflineminus">-                            // to use this delegate for, so that we can limit</span>
<a href="#l9.1129"></a><span id="l9.1129" class="difflineminus">-                            // the onAssert to what was asked for. This might be</span>
<a href="#l9.1130"></a><span id="l9.1130" class="difflineminus">-                            // tricky, as we'd need to keep track of multiple</span>
<a href="#l9.1131"></a><span id="l9.1131" class="difflineminus">-                            // &quot;questions&quot; coming in while the LDAP server</span>
<a href="#l9.1132"></a><span id="l9.1132" class="difflineminus">-                            // hasn't responded yet.</span>
<a href="#l9.1133"></a><span id="l9.1133" class="difflineminus">-                        }</span>
<a href="#l9.1134"></a><span id="l9.1134" class="difflineminus">-                        else {</span>
<a href="#l9.1135"></a><span id="l9.1135" class="difflineminus">-                            // Add the LDAP message to the result array for</span>
<a href="#l9.1136"></a><span id="l9.1136" class="difflineminus">-                            // the query resource and onAssert the result</span>
<a href="#l9.1137"></a><span id="l9.1137" class="difflineminus">-                            // as a child of the query resource.</span>
<a href="#l9.1138"></a><span id="l9.1138" class="difflineminus">-                            var queryResource =</span>
<a href="#l9.1139"></a><span id="l9.1139" class="difflineminus">-                                caller.mRdfSvc.GetResource(queryURL.spec);</span>
<a href="#l9.1140"></a><span id="l9.1140" class="difflineminus">-                            if (!listHash.hasOwnProperty(queryURL.spec)) {</span>
<a href="#l9.1141"></a><span id="l9.1141" class="difflineminus">-                                // No entry for the query resource in the</span>
<a href="#l9.1142"></a><span id="l9.1142" class="difflineminus">-                                // results hashlist, let's create one.</span>
<a href="#l9.1143"></a><span id="l9.1143" class="difflineminus">-                                listHash[queryURL.spec] = Components.classes</span>
<a href="#l9.1144"></a><span id="l9.1144" class="difflineminus">-                                    [&quot;@mozilla.org/supports-array;1&quot;].</span>
<a href="#l9.1145"></a><span id="l9.1145" class="difflineminus">-                                    createInstance(</span>
<a href="#l9.1146"></a><span id="l9.1146" class="difflineminus">-                                       Components.interfaces.nsISupportsArray);</span>
<a href="#l9.1147"></a><span id="l9.1147" class="difflineminus">-                            }</span>
<a href="#l9.1148"></a><span id="l9.1148" class="difflineminus">-                            listHash[queryURL.spec].AppendElement(newResource);</span>
<a href="#l9.1149"></a><span id="l9.1149" class="difflineminus">-                            if (queryType == FLAT_LIST) {</span>
<a href="#l9.1150"></a><span id="l9.1150" class="difflineminus">-                                caller.mLDAPDataSource.onAssert(</span>
<a href="#l9.1151"></a><span id="l9.1151" class="difflineminus">-                                    caller.mLDAPDataSource, aOuter,</span>
<a href="#l9.1152"></a><span id="l9.1152" class="difflineminus">-                                    caller.kNC_child, newResource);</span>
<a href="#l9.1153"></a><span id="l9.1153" class="difflineminus">-                            }</span>
<a href="#l9.1154"></a><span id="l9.1154" class="difflineminus">-                            else if (queryType == RECURSIVE_LIST) {</span>
<a href="#l9.1155"></a><span id="l9.1155" class="difflineminus">-                                caller.mLDAPDataSource.onAssert(</span>
<a href="#l9.1156"></a><span id="l9.1156" class="difflineminus">-                                    caller.mLDAPDataSource, queryResource,</span>
<a href="#l9.1157"></a><span id="l9.1157" class="difflineminus">-                                    caller.kNC_child, newResource);</span>
<a href="#l9.1158"></a><span id="l9.1158" class="difflineminus">-                                caller.mLDAPDataSource.onAssert(</span>
<a href="#l9.1159"></a><span id="l9.1159" class="difflineminus">-                                    caller.mLDAPDataSource, aOuter,</span>
<a href="#l9.1160"></a><span id="l9.1160" class="difflineminus">-                                    caller.kNC_recursiveChild, newResource);</span>
<a href="#l9.1161"></a><span id="l9.1161" class="difflineminus">-                            }</span>
<a href="#l9.1162"></a><span id="l9.1162" class="difflineminus">-                        }</span>
<a href="#l9.1163"></a><span id="l9.1163" class="difflineminus">-                    }</span>
<a href="#l9.1164"></a><span id="l9.1164" class="difflineminus">-                    else if (aMessage.type == aMessage.RES_SEARCH_RESULT) {</span>
<a href="#l9.1165"></a><span id="l9.1165" class="difflineminus">-                        // We got all the results for the query.</span>
<a href="#l9.1166"></a><span id="l9.1166" class="difflineminus">-                        // If we were looking for a list, let's check if we</span>
<a href="#l9.1167"></a><span id="l9.1167" class="difflineminus">-                        // have an entry for the query resource in the result's</span>
<a href="#l9.1168"></a><span id="l9.1168" class="difflineminus">-                        // hashlist. If we don't, add an empty array to help</span>
<a href="#l9.1169"></a><span id="l9.1169" class="difflineminus">-                        // performance, otherwise we'll keep requerying for this</span>
<a href="#l9.1170"></a><span id="l9.1170" class="difflineminus">-                        // query resource.</span>
<a href="#l9.1171"></a><span id="l9.1171" class="difflineminus">-                        if (queryType == FLAT_LIST || queryType == RECURSIVE_LIST) {</span>
<a href="#l9.1172"></a><span id="l9.1172" class="difflineminus">-                            if (!listHash.hasOwnProperty(queryURL.spec)) {</span>
<a href="#l9.1173"></a><span id="l9.1173" class="difflineminus">-                                // No entry for the query resource in the</span>
<a href="#l9.1174"></a><span id="l9.1174" class="difflineminus">-                                // results hashlist, let's create an empty one.</span>
<a href="#l9.1175"></a><span id="l9.1175" class="difflineminus">-                                listHash[queryURL.spec] = Components.classes</span>
<a href="#l9.1176"></a><span id="l9.1176" class="difflineminus">-                                    [&quot;@mozilla.org/supports-array;1&quot;].</span>
<a href="#l9.1177"></a><span id="l9.1177" class="difflineminus">-                                    createInstance(</span>
<a href="#l9.1178"></a><span id="l9.1178" class="difflineminus">-                                       Components.interfaces.nsISupportsArray);</span>
<a href="#l9.1179"></a><span id="l9.1179" class="difflineminus">-                            }</span>
<a href="#l9.1180"></a><span id="l9.1180" class="difflineminus">-                        }</span>
<a href="#l9.1181"></a><span id="l9.1181" class="difflineminus">-                        delete caller.mInProgressHash[queryURL.spec];</span>
<a href="#l9.1182"></a><span id="l9.1182" class="difflineminus">-                    }</span>
<a href="#l9.1183"></a><span id="l9.1183" class="difflineminus">-                }</span>
<a href="#l9.1184"></a><span id="l9.1184" class="difflineminus">-</span>
<a href="#l9.1185"></a><span id="l9.1185" class="difflineminus">-            return getProxyOnUIThread(new getTargetsSearchCallback(),</span>
<a href="#l9.1186"></a><span id="l9.1186" class="difflineminus">-                                      Components.interfaces.nsILDAPMessageListener);</span>
<a href="#l9.1187"></a><span id="l9.1187" class="difflineminus">-        }</span>
<a href="#l9.1188"></a><span id="l9.1188" class="difflineminus">-</span>
<a href="#l9.1189"></a><span id="l9.1189" class="difflineminus">-        // end of closure decls; the CreateDelegate code proper begins below</span>
<a href="#l9.1190"></a><span id="l9.1190" class="difflineminus">-</span>
<a href="#l9.1191"></a><span id="l9.1191" class="difflineminus">-        // XXX - We need to keep track of queries that are in progress for a</span>
<a href="#l9.1192"></a><span id="l9.1192" class="difflineminus">-        // message too (cf. mInProgressHash for messagelist's).</span>
<a href="#l9.1193"></a><span id="l9.1193" class="difflineminus">-        //</span>
<a href="#l9.1194"></a><span id="l9.1194" class="difflineminus">-        if (DEBUG) {</span>
<a href="#l9.1195"></a><span id="l9.1195" class="difflineminus">-            dump(&quot;GetDelegate() called with args: \n\t&quot; + aOuter.Value +</span>
<a href="#l9.1196"></a><span id="l9.1196" class="difflineminus">-             &quot;\n\t&quot; + aKey + &quot;\n\t&quot; + aIID + &quot;\n\n&quot;);</span>
<a href="#l9.1197"></a><span id="l9.1197" class="difflineminus">-        }</span>
<a href="#l9.1198"></a><span id="l9.1198" class="difflineminus">-</span>
<a href="#l9.1199"></a><span id="l9.1199" class="difflineminus">-        var caller = this;</span>
<a href="#l9.1200"></a><span id="l9.1200" class="difflineminus">-        var queryURL;</span>
<a href="#l9.1201"></a><span id="l9.1201" class="difflineminus">-        var queryType;</span>
<a href="#l9.1202"></a><span id="l9.1202" class="difflineminus">-</span>
<a href="#l9.1203"></a><span id="l9.1203" class="difflineminus">-        if (aKey == &quot;message.ldap&quot;) {</span>
<a href="#l9.1204"></a><span id="l9.1204" class="difflineminus">-            queryType = MESSAGE;</span>
<a href="#l9.1205"></a><span id="l9.1205" class="difflineminus">-        }</span>
<a href="#l9.1206"></a><span id="l9.1206" class="difflineminus">-        else if (aKey == &quot;flat.messagelist.ldap&quot;) {</span>
<a href="#l9.1207"></a><span id="l9.1207" class="difflineminus">-            queryType = FLAT_LIST;</span>
<a href="#l9.1208"></a><span id="l9.1208" class="difflineminus">-        }</span>
<a href="#l9.1209"></a><span id="l9.1209" class="difflineminus">-        else if (aKey == &quot;recursive.messagelist.ldap&quot;) {</span>
<a href="#l9.1210"></a><span id="l9.1210" class="difflineminus">-            queryType = RECURSIVE_LIST;</span>
<a href="#l9.1211"></a><span id="l9.1211" class="difflineminus">-        }</span>
<a href="#l9.1212"></a><span id="l9.1212" class="difflineminus">-</span>
<a href="#l9.1213"></a><span id="l9.1213" class="difflineminus">-        switch (queryType) {</span>
<a href="#l9.1214"></a><span id="l9.1214" class="difflineminus">-            case MESSAGE:</span>
<a href="#l9.1215"></a><span id="l9.1215" class="difflineminus">-                if (this.mMessagesHash.hasOwnProperty(aOuter.Value)) {</span>
<a href="#l9.1216"></a><span id="l9.1216" class="difflineminus">-                    return (this.mMessagesHash[aOuter.Value].QueryInterface(aIID));</span>
<a href="#l9.1217"></a><span id="l9.1217" class="difflineminus">-                }</span>
<a href="#l9.1218"></a><span id="l9.1218" class="difflineminus">-                break;</span>
<a href="#l9.1219"></a><span id="l9.1219" class="difflineminus">-            case FLAT_LIST:</span>
<a href="#l9.1220"></a><span id="l9.1220" class="difflineminus">-                if (this.mMessagesListHash.hasOwnProperty(aOuter.Value)) {</span>
<a href="#l9.1221"></a><span id="l9.1221" class="difflineminus">-                    return (this.mMessagesListHash[aOuter.Value].QueryInterface(aIID));</span>
<a href="#l9.1222"></a><span id="l9.1222" class="difflineminus">-                }</span>
<a href="#l9.1223"></a><span id="l9.1223" class="difflineminus">-                break;</span>
<a href="#l9.1224"></a><span id="l9.1224" class="difflineminus">-            case RECURSIVE_LIST:</span>
<a href="#l9.1225"></a><span id="l9.1225" class="difflineminus">-                queryURL = Components.classes[&quot;@mozilla.org/network/ldap-url;1&quot;]</span>
<a href="#l9.1226"></a><span id="l9.1226" class="difflineminus">-                      .createInstance(Components.interfaces.nsILDAPURL);</span>
<a href="#l9.1227"></a><span id="l9.1227" class="difflineminus">-                queryURL.spec = aOuter.Value;</span>
<a href="#l9.1228"></a><span id="l9.1228" class="difflineminus">-                if (queryURL.scope == SCOPE_BASE) {</span>
<a href="#l9.1229"></a><span id="l9.1229" class="difflineminus">-                    // Retarget the URL, asking for recursive children on</span>
<a href="#l9.1230"></a><span id="l9.1230" class="difflineminus">-                    // a base URL should descend, so we do a one-level search.</span>
<a href="#l9.1231"></a><span id="l9.1231" class="difflineminus">-                    queryURL.scope = SCOPE_ONELEVEL;</span>
<a href="#l9.1232"></a><span id="l9.1232" class="difflineminus">-                }</span>
<a href="#l9.1233"></a><span id="l9.1233" class="difflineminus">-                if (this.mMessagesListHash.hasOwnProperty(queryURL.spec)) {</span>
<a href="#l9.1234"></a><span id="l9.1234" class="difflineminus">-                    return (this.mMessagesListHash[queryURL.spec].QueryInterface(aIID));</span>
<a href="#l9.1235"></a><span id="l9.1235" class="difflineminus">-                }</span>
<a href="#l9.1236"></a><span id="l9.1236" class="difflineminus">-                break;</span>
<a href="#l9.1237"></a><span id="l9.1237" class="difflineminus">-        }</span>
<a href="#l9.1238"></a><span id="l9.1238" class="difflineminus">-</span>
<a href="#l9.1239"></a><span id="l9.1239" class="difflineminus">-        if (queryURL == null) {</span>
<a href="#l9.1240"></a><span id="l9.1240" class="difflineminus">-            queryURL = Components.classes[&quot;@mozilla.org/network/ldap-url;1&quot;]</span>
<a href="#l9.1241"></a><span id="l9.1241" class="difflineminus">-                  .createInstance(Components.interfaces.nsILDAPURL);</span>
<a href="#l9.1242"></a><span id="l9.1242" class="difflineminus">-            queryURL.spec = aOuter.Value;</span>
<a href="#l9.1243"></a><span id="l9.1243" class="difflineminus">-        }</span>
<a href="#l9.1244"></a><span id="l9.1244" class="difflineminus">-</span>
<a href="#l9.1245"></a><span id="l9.1245" class="difflineminus">-        // make sure that this if this URL is for a messagelist, it</span>
<a href="#l9.1246"></a><span id="l9.1246" class="difflineminus">-        // represents something other than a base search</span>
<a href="#l9.1247"></a><span id="l9.1247" class="difflineminus">-        //</span>
<a href="#l9.1248"></a><span id="l9.1248" class="difflineminus">-        if ((queryType == FLAT_LIST) &amp;&amp; (queryURL.scope == SCOPE_BASE)) {</span>
<a href="#l9.1249"></a><span id="l9.1249" class="difflineminus">-            if (DEBUG) {</span>
<a href="#l9.1250"></a><span id="l9.1250" class="difflineminus">-                dump(&quot;Early return, asking for a list of children for an &quot; +</span>
<a href="#l9.1251"></a><span id="l9.1251" class="difflineminus">-                     &quot;URL with a BASE scope\n\n&quot;);</span>
<a href="#l9.1252"></a><span id="l9.1252" class="difflineminus">-            }</span>
<a href="#l9.1253"></a><span id="l9.1253" class="difflineminus">-            throw Components.results.NS_ERROR_FAILURE;</span>
<a href="#l9.1254"></a><span id="l9.1254" class="difflineminus">-        }</span>
<a href="#l9.1255"></a><span id="l9.1255" class="difflineminus">-</span>
<a href="#l9.1256"></a><span id="l9.1256" class="difflineminus">-        if (!this.mInProgressHash.hasOwnProperty(queryURL.spec)) {</span>
<a href="#l9.1257"></a><span id="l9.1257" class="difflineminus">-            this.Init();</span>
<a href="#l9.1258"></a><span id="l9.1258" class="difflineminus">-</span>
<a href="#l9.1259"></a><span id="l9.1259" class="difflineminus">-            // XXX - not sure what this should be</span>
<a href="#l9.1260"></a><span id="l9.1260" class="difflineminus">-            var key = queryURL.host + &quot;:&quot; + queryURL.port;</span>
<a href="#l9.1261"></a><span id="l9.1261" class="difflineminus">-</span>
<a href="#l9.1262"></a><span id="l9.1262" class="difflineminus">-            // Get the LDAP service and request a connection to the server from</span>
<a href="#l9.1263"></a><span id="l9.1263" class="difflineminus">-            // the service</span>
<a href="#l9.1264"></a><span id="l9.1264" class="difflineminus">-            var server;</span>
<a href="#l9.1265"></a><span id="l9.1265" class="difflineminus">-            try {</span>
<a href="#l9.1266"></a><span id="l9.1266" class="difflineminus">-                server = this.mLDAPSvc.getServer(key);</span>
<a href="#l9.1267"></a><span id="l9.1267" class="difflineminus">-            }</span>
<a href="#l9.1268"></a><span id="l9.1268" class="difflineminus">-            catch (e) {</span>
<a href="#l9.1269"></a><span id="l9.1269" class="difflineminus">-            }</span>
<a href="#l9.1270"></a><span id="l9.1270" class="difflineminus">-            if (!server) {</span>
<a href="#l9.1271"></a><span id="l9.1271" class="difflineminus">-                // Create a server object and let the service know about it</span>
<a href="#l9.1272"></a><span id="l9.1272" class="difflineminus">-                // XXX - not sure if I initialize enough here</span>
<a href="#l9.1273"></a><span id="l9.1273" class="difflineminus">-                server = Components.classes</span>
<a href="#l9.1274"></a><span id="l9.1274" class="difflineminus">-                        [&quot;@mozilla.org/network/ldap-server;1&quot;].</span>
<a href="#l9.1275"></a><span id="l9.1275" class="difflineminus">-                        createInstance(Components.interfaces.nsILDAPServer);</span>
<a href="#l9.1276"></a><span id="l9.1276" class="difflineminus">-                server.key = key;</span>
<a href="#l9.1277"></a><span id="l9.1277" class="difflineminus">-                server.url = queryURL;</span>
<a href="#l9.1278"></a><span id="l9.1278" class="difflineminus">-                this.mLDAPSvc.addServer(server);</span>
<a href="#l9.1279"></a><span id="l9.1279" class="difflineminus">-            }</span>
<a href="#l9.1280"></a><span id="l9.1280" class="difflineminus">-</span>
<a href="#l9.1281"></a><span id="l9.1281" class="difflineminus">-            // Mark this URL as being in progress, to avoid requerying for the</span>
<a href="#l9.1282"></a><span id="l9.1282" class="difflineminus">-            // same URL</span>
<a href="#l9.1283"></a><span id="l9.1283" class="difflineminus">-            this.mInProgressHash[queryURL.spec] = 1;</span>
<a href="#l9.1284"></a><span id="l9.1284" class="difflineminus">-</span>
<a href="#l9.1285"></a><span id="l9.1285" class="difflineminus">-            // get a connection object</span>
<a href="#l9.1286"></a><span id="l9.1286" class="difflineminus">-            //</span>
<a href="#l9.1287"></a><span id="l9.1287" class="difflineminus">-            var connection = Components.classes</span>
<a href="#l9.1288"></a><span id="l9.1288" class="difflineminus">-                    [&quot;@mozilla.org/network/ldap-connection;1&quot;].</span>
<a href="#l9.1289"></a><span id="l9.1289" class="difflineminus">-                    createInstance(Components.interfaces.nsILDAPConnection);</span>
<a href="#l9.1290"></a><span id="l9.1290" class="difflineminus">-            connection.init(queryURL.host, queryURL.port, null,</span>
<a href="#l9.1291"></a><span id="l9.1291" class="difflineminus">-                            generateGetTargetsBoundCallback(), null,</span>
<a href="#l9.1292"></a><span id="l9.1292" class="difflineminus">-                            Components.interfaces.nsILDAPConnection.VERSION3);</span>
<a href="#l9.1293"></a><span id="l9.1293" class="difflineminus">-</span>
<a href="#l9.1294"></a><span id="l9.1294" class="difflineminus">-            // XXXdmose - in this case, we almost certainly shouldn't be</span>
<a href="#l9.1295"></a><span id="l9.1295" class="difflineminus">-            // falling through to an error case, but instead returning</span>
<a href="#l9.1296"></a><span id="l9.1296" class="difflineminus">-            // something reasonable, since this is actually a success</span>
<a href="#l9.1297"></a><span id="l9.1297" class="difflineminus">-            // condition</span>
<a href="#l9.1298"></a><span id="l9.1298" class="difflineminus">-            //</span>
<a href="#l9.1299"></a><span id="l9.1299" class="difflineminus">-            debug(&quot;falling through!\n&quot;);</span>
<a href="#l9.1300"></a><span id="l9.1300" class="difflineminus">-        }</span>
<a href="#l9.1301"></a><span id="l9.1301" class="difflineminus">-</span>
<a href="#l9.1302"></a><span id="l9.1302" class="difflineminus">-        throw Components.results.NS_ERROR_FAILURE;</span>
<a href="#l9.1303"></a><span id="l9.1303" class="difflineminus">-    }</span>
<a href="#l9.1304"></a><span id="l9.1304" class="difflineminus">-</span>
<a href="#l9.1305"></a><span id="l9.1305" class="difflineminus">-}</span>
<a href="#l9.1306"></a><span id="l9.1306" class="difflineminus">-</span>
<a href="#l9.1307"></a><span id="l9.1307" class="difflineminus">-</span>
<a href="#l9.1308"></a><span id="l9.1308" class="difflineminus">-// the nsILDAPURL associated with a given resource</span>
<a href="#l9.1309"></a><span id="l9.1309" class="difflineminus">-//</span>
<a href="#l9.1310"></a><span id="l9.1310" class="difflineminus">-const NS_LDAPURLRDFDELEGATEFACTORY_CONTRACTID =</span>
<a href="#l9.1311"></a><span id="l9.1311" class="difflineminus">-    '@mozilla.org/rdf/delegate-factory/url.ldap;1';</span>
<a href="#l9.1312"></a><span id="l9.1312" class="difflineminus">-const NS_LDAPURLRDFDELEGATEFACTORY_CID =</span>
<a href="#l9.1313"></a><span id="l9.1313" class="difflineminus">-    Components.ID('b6048700-1dd1-11b2-ae88-a5e18bb1f25e');</span>
<a href="#l9.1314"></a><span id="l9.1314" class="difflineminus">-</span>
<a href="#l9.1315"></a><span id="l9.1315" class="difflineminus">-function nsLDAPURLRDFDelegateFactory() {}</span>
<a href="#l9.1316"></a><span id="l9.1316" class="difflineminus">-</span>
<a href="#l9.1317"></a><span id="l9.1317" class="difflineminus">-nsLDAPURLRDFDelegateFactory.prototype =</span>
<a href="#l9.1318"></a><span id="l9.1318" class="difflineminus">-{</span>
<a href="#l9.1319"></a><span id="l9.1319" class="difflineminus">-    // from nsIRDFDelegateFactory:</span>
<a href="#l9.1320"></a><span id="l9.1320" class="difflineminus">-    //</span>
<a href="#l9.1321"></a><span id="l9.1321" class="difflineminus">-    // Create a delegate for the specified RDF resource.</span>
<a href="#l9.1322"></a><span id="l9.1322" class="difflineminus">-    //</span>
<a href="#l9.1323"></a><span id="l9.1323" class="difflineminus">-    // The created delegate should forward AddRef() and Release()</span>
<a href="#l9.1324"></a><span id="l9.1324" class="difflineminus">-    // calls to the aOuter object.</span>
<a href="#l9.1325"></a><span id="l9.1325" class="difflineminus">-    //</span>
<a href="#l9.1326"></a><span id="l9.1326" class="difflineminus">-    // void CreateDelegate(in nsIRDFResource aOuter,</span>
<a href="#l9.1327"></a><span id="l9.1327" class="difflineminus">-    //                     in string aKey,</span>
<a href="#l9.1328"></a><span id="l9.1328" class="difflineminus">-    //                     in nsIIDRef aIID,</span>
<a href="#l9.1329"></a><span id="l9.1329" class="difflineminus">-    //                     [retval, iid_is(aIID)] out nsQIResult aResult);</span>
<a href="#l9.1330"></a><span id="l9.1330" class="difflineminus">-    CreateDelegate: function (aOuter, aKey, aIID) {</span>
<a href="#l9.1331"></a><span id="l9.1331" class="difflineminus">-    }</span>
<a href="#l9.1332"></a><span id="l9.1332" class="difflineminus">-}</span>
<a href="#l9.1333"></a><span id="l9.1333" class="difflineminus">-</span>
<a href="#l9.1334"></a><span id="l9.1334" class="difflineminus">-// the nsILDAPConnection associated with a given resource</span>
<a href="#l9.1335"></a><span id="l9.1335" class="difflineminus">-//</span>
<a href="#l9.1336"></a><span id="l9.1336" class="difflineminus">-const NS_LDAPCONNECTIONRDFDELEGATEFACTORY_CONTRACTID =</span>
<a href="#l9.1337"></a><span id="l9.1337" class="difflineminus">-    '@mozilla.org/rdf/delegate-factory/connection.ldap;1';</span>
<a href="#l9.1338"></a><span id="l9.1338" class="difflineminus">-const NS_LDAPCONNECTIONRDFDELEGATEFACTORY_CID =</span>
<a href="#l9.1339"></a><span id="l9.1339" class="difflineminus">-    Components.ID('57075fc6-1dd2-11b2-9df5-dbb9111d1b38');</span>
<a href="#l9.1340"></a><span id="l9.1340" class="difflineminus">-</span>
<a href="#l9.1341"></a><span id="l9.1341" class="difflineminus">-function nsLDAPConnectionRDFDelegateFactory() {}</span>
<a href="#l9.1342"></a><span id="l9.1342" class="difflineminus">-</span>
<a href="#l9.1343"></a><span id="l9.1343" class="difflineminus">-nsLDAPConnectionRDFDelegateFactory.prototype =</span>
<a href="#l9.1344"></a><span id="l9.1344" class="difflineminus">-{</span>
<a href="#l9.1345"></a><span id="l9.1345" class="difflineminus">-    // from nsIRDFDelegateFactory:</span>
<a href="#l9.1346"></a><span id="l9.1346" class="difflineminus">-    //</span>
<a href="#l9.1347"></a><span id="l9.1347" class="difflineminus">-    // Create a delegate for the specified RDF resource.</span>
<a href="#l9.1348"></a><span id="l9.1348" class="difflineminus">-    //</span>
<a href="#l9.1349"></a><span id="l9.1349" class="difflineminus">-    // The created delegate should forward AddRef() and Release()</span>
<a href="#l9.1350"></a><span id="l9.1350" class="difflineminus">-    // calls to the aOuter object.</span>
<a href="#l9.1351"></a><span id="l9.1351" class="difflineminus">-    //</span>
<a href="#l9.1352"></a><span id="l9.1352" class="difflineminus">-    // void CreateDelegate(in nsIRDFResource aOuter,</span>
<a href="#l9.1353"></a><span id="l9.1353" class="difflineminus">-    //                     in string aKey,</span>
<a href="#l9.1354"></a><span id="l9.1354" class="difflineminus">-    //                     in nsIIDRef aIID,</span>
<a href="#l9.1355"></a><span id="l9.1355" class="difflineminus">-    //                     [retval, iid_is(aIID)] out nsQIResult aResult);</span>
<a href="#l9.1356"></a><span id="l9.1356" class="difflineminus">-    CreateDelegate: function (aOuter, aKey, aIID) {</span>
<a href="#l9.1357"></a><span id="l9.1357" class="difflineminus">-    }</span>
<a href="#l9.1358"></a><span id="l9.1358" class="difflineminus">-}</span>
<a href="#l9.1359"></a><span id="l9.1359" class="difflineminus">-</span>
<a href="#l9.1360"></a><span id="l9.1360" class="difflineminus">-var Datasource = null;</span>
<a href="#l9.1361"></a><span id="l9.1361" class="difflineminus">-var MessageDelegateFactory = null;</span>
<a href="#l9.1362"></a><span id="l9.1362" class="difflineminus">-</span>
<a href="#l9.1363"></a><span id="l9.1363" class="difflineminus">-// nsLDAPDataSource Module (for XPCOM registration)</span>
<a href="#l9.1364"></a><span id="l9.1364" class="difflineminus">-//</span>
<a href="#l9.1365"></a><span id="l9.1365" class="difflineminus">-var nsLDAPDataSourceModule = {</span>
<a href="#l9.1366"></a><span id="l9.1366" class="difflineminus">-</span>
<a href="#l9.1367"></a><span id="l9.1367" class="difflineminus">-    registerSelf: function (compMgr, fileSpec, location, type) {</span>
<a href="#l9.1368"></a><span id="l9.1368" class="difflineminus">-        debug(&quot;*** Registering LDAP datasource components&quot; +</span>
<a href="#l9.1369"></a><span id="l9.1369" class="difflineminus">-              &quot; (all right -- a JavaScript module!)\n&quot;);</span>
<a href="#l9.1370"></a><span id="l9.1370" class="difflineminus">-</span>
<a href="#l9.1371"></a><span id="l9.1371" class="difflineminus">-        compMgr = compMgr.QueryInterface(Components.interfaces.nsIComponentRegistrar);</span>
<a href="#l9.1372"></a><span id="l9.1372" class="difflineminus">-</span>
<a href="#l9.1373"></a><span id="l9.1373" class="difflineminus">-        compMgr.registerFactoryLocation(</span>
<a href="#l9.1374"></a><span id="l9.1374" class="difflineminus">-                NS_LDAPDATASOURCE_CID,</span>
<a href="#l9.1375"></a><span id="l9.1375" class="difflineminus">-                'LDAP RDF DataSource',</span>
<a href="#l9.1376"></a><span id="l9.1376" class="difflineminus">-                NS_LDAPDATASOURCE_CONTRACTID,</span>
<a href="#l9.1377"></a><span id="l9.1377" class="difflineminus">-                fileSpec, location,</span>
<a href="#l9.1378"></a><span id="l9.1378" class="difflineminus">-                type);</span>
<a href="#l9.1379"></a><span id="l9.1379" class="difflineminus">-</span>
<a href="#l9.1380"></a><span id="l9.1380" class="difflineminus">-        compMgr.registerFactoryLocation(</span>
<a href="#l9.1381"></a><span id="l9.1381" class="difflineminus">-                NS_LDAPMESSAGERDFDELEGATEFACTORY_CID,</span>
<a href="#l9.1382"></a><span id="l9.1382" class="difflineminus">-                'LDAP Message RDF Delegate',</span>
<a href="#l9.1383"></a><span id="l9.1383" class="difflineminus">-                NS_LDAPMESSAGERDFDELEGATEFACTORY_CONTRACTID,</span>
<a href="#l9.1384"></a><span id="l9.1384" class="difflineminus">-                fileSpec, location,</span>
<a href="#l9.1385"></a><span id="l9.1385" class="difflineminus">-                type);</span>
<a href="#l9.1386"></a><span id="l9.1386" class="difflineminus">-</span>
<a href="#l9.1387"></a><span id="l9.1387" class="difflineminus">-        compMgr.registerFactoryLocation(</span>
<a href="#l9.1388"></a><span id="l9.1388" class="difflineminus">-                NS_LDAPMESSAGERDFDELEGATEFACTORY_CID,</span>
<a href="#l9.1389"></a><span id="l9.1389" class="difflineminus">-                'LDAP Flat MessageList RDF Delegate',</span>
<a href="#l9.1390"></a><span id="l9.1390" class="difflineminus">-                NS_LDAPFLATMESSAGELISTRDFDELEGATEFACTORY_CONTRACTID,</span>
<a href="#l9.1391"></a><span id="l9.1391" class="difflineminus">-                fileSpec, location,</span>
<a href="#l9.1392"></a><span id="l9.1392" class="difflineminus">-                type);</span>
<a href="#l9.1393"></a><span id="l9.1393" class="difflineminus">-</span>
<a href="#l9.1394"></a><span id="l9.1394" class="difflineminus">-        compMgr.registerFactoryLocation(</span>
<a href="#l9.1395"></a><span id="l9.1395" class="difflineminus">-                NS_LDAPMESSAGERDFDELEGATEFACTORY_CID,</span>
<a href="#l9.1396"></a><span id="l9.1396" class="difflineminus">-                'LDAP Recursive MessageList RDF Delegate',</span>
<a href="#l9.1397"></a><span id="l9.1397" class="difflineminus">-                NS_LDAPRECURSIVEMESSAGELISTRDFDELEGATEFACTORY_CONTRACTID,</span>
<a href="#l9.1398"></a><span id="l9.1398" class="difflineminus">-                fileSpec, location,</span>
<a href="#l9.1399"></a><span id="l9.1399" class="difflineminus">-                type);</span>
<a href="#l9.1400"></a><span id="l9.1400" class="difflineminus">-</span>
<a href="#l9.1401"></a><span id="l9.1401" class="difflineminus">-        compMgr.registerFactoryLocation(</span>
<a href="#l9.1402"></a><span id="l9.1402" class="difflineminus">-                NS_LDAPURLRDFDELEGATEFACTORY_CID,</span>
<a href="#l9.1403"></a><span id="l9.1403" class="difflineminus">-                'LDAP URL RDF Delegate',</span>
<a href="#l9.1404"></a><span id="l9.1404" class="difflineminus">-                NS_LDAPURLRDFDELEGATEFACTORY_CONTRACTID,</span>
<a href="#l9.1405"></a><span id="l9.1405" class="difflineminus">-                fileSpec, location,</span>
<a href="#l9.1406"></a><span id="l9.1406" class="difflineminus">-                type);</span>
<a href="#l9.1407"></a><span id="l9.1407" class="difflineminus">-    },</span>
<a href="#l9.1408"></a><span id="l9.1408" class="difflineminus">-</span>
<a href="#l9.1409"></a><span id="l9.1409" class="difflineminus">-    getClassObject: function(compMgr, cid, iid) {</span>
<a href="#l9.1410"></a><span id="l9.1410" class="difflineminus">-        if (!iid.equals(Components.interfaces.nsIFactory)) {</span>
<a href="#l9.1411"></a><span id="l9.1411" class="difflineminus">-            throw Components.results.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l9.1412"></a><span id="l9.1412" class="difflineminus">-        }</span>
<a href="#l9.1413"></a><span id="l9.1413" class="difflineminus">-</span>
<a href="#l9.1414"></a><span id="l9.1414" class="difflineminus">-        if (cid.equals(NS_LDAPDATASOURCE_CID))</span>
<a href="#l9.1415"></a><span id="l9.1415" class="difflineminus">-            return this.nsLDAPDataSourceFactory;</span>
<a href="#l9.1416"></a><span id="l9.1416" class="difflineminus">-        else if (cid.equals(NS_LDAPMESSAGERDFDELEGATEFACTORY_CID))</span>
<a href="#l9.1417"></a><span id="l9.1417" class="difflineminus">-            return this.nsLDAPMessageRDFDelegateFactoryFactory;</span>
<a href="#l9.1418"></a><span id="l9.1418" class="difflineminus">-        else if (cid.equals(NS_LDAPURLRDFDELEGATEFACTORY_CID))</span>
<a href="#l9.1419"></a><span id="l9.1419" class="difflineminus">-            return this.nsLDAPURLRDFDelegateFactoryFactory;</span>
<a href="#l9.1420"></a><span id="l9.1420" class="difflineminus">-</span>
<a href="#l9.1421"></a><span id="l9.1421" class="difflineminus">-        throw Components.results.NS_ERROR_NO_INTERFACE;</span>
<a href="#l9.1422"></a><span id="l9.1422" class="difflineminus">-    },</span>
<a href="#l9.1423"></a><span id="l9.1423" class="difflineminus">-</span>
<a href="#l9.1424"></a><span id="l9.1424" class="difflineminus">-    nsLDAPDataSourceFactory: {</span>
<a href="#l9.1425"></a><span id="l9.1425" class="difflineminus">-        createInstance: function(outer, iid) {</span>
<a href="#l9.1426"></a><span id="l9.1426" class="difflineminus">-            if (outer != null)</span>
<a href="#l9.1427"></a><span id="l9.1427" class="difflineminus">-                throw Components.results.NS_ERROR_NO_AGGREGATION;</span>
<a href="#l9.1428"></a><span id="l9.1428" class="difflineminus">-</span>
<a href="#l9.1429"></a><span id="l9.1429" class="difflineminus">-            if (Datasource == null) {</span>
<a href="#l9.1430"></a><span id="l9.1430" class="difflineminus">-                Datasource = new nsLDAPDataSource();</span>
<a href="#l9.1431"></a><span id="l9.1431" class="difflineminus">-            }</span>
<a href="#l9.1432"></a><span id="l9.1432" class="difflineminus">-</span>
<a href="#l9.1433"></a><span id="l9.1433" class="difflineminus">-            return Datasource.QueryInterface(iid);</span>
<a href="#l9.1434"></a><span id="l9.1434" class="difflineminus">-        }</span>
<a href="#l9.1435"></a><span id="l9.1435" class="difflineminus">-    },</span>
<a href="#l9.1436"></a><span id="l9.1436" class="difflineminus">-</span>
<a href="#l9.1437"></a><span id="l9.1437" class="difflineminus">-    nsLDAPMessageRDFDelegateFactoryFactory: {</span>
<a href="#l9.1438"></a><span id="l9.1438" class="difflineminus">-        createInstance: function(outer, iid) {</span>
<a href="#l9.1439"></a><span id="l9.1439" class="difflineminus">-            if (outer != null)</span>
<a href="#l9.1440"></a><span id="l9.1440" class="difflineminus">-                throw Components.results.NS_ERROR_NO_AGGREGATION;</span>
<a href="#l9.1441"></a><span id="l9.1441" class="difflineminus">-</span>
<a href="#l9.1442"></a><span id="l9.1442" class="difflineminus">-            if (MessageDelegateFactory == null) {</span>
<a href="#l9.1443"></a><span id="l9.1443" class="difflineminus">-                MessageDelegateFactory = new nsLDAPMessageRDFDelegateFactory();</span>
<a href="#l9.1444"></a><span id="l9.1444" class="difflineminus">-            }</span>
<a href="#l9.1445"></a><span id="l9.1445" class="difflineminus">-</span>
<a href="#l9.1446"></a><span id="l9.1446" class="difflineminus">-            return MessageDelegateFactory.QueryInterface(iid);</span>
<a href="#l9.1447"></a><span id="l9.1447" class="difflineminus">-        }</span>
<a href="#l9.1448"></a><span id="l9.1448" class="difflineminus">-    },</span>
<a href="#l9.1449"></a><span id="l9.1449" class="difflineminus">-</span>
<a href="#l9.1450"></a><span id="l9.1450" class="difflineminus">-    nsLDAPURLRDFDelegateFactoryFactory: {</span>
<a href="#l9.1451"></a><span id="l9.1451" class="difflineminus">-        createInstance: function(outer, iid) {</span>
<a href="#l9.1452"></a><span id="l9.1452" class="difflineminus">-            if (outer != null)</span>
<a href="#l9.1453"></a><span id="l9.1453" class="difflineminus">-                throw Components.results.NS_ERROR_NO_AGGREGATION;</span>
<a href="#l9.1454"></a><span id="l9.1454" class="difflineminus">-</span>
<a href="#l9.1455"></a><span id="l9.1455" class="difflineminus">-            return (new nsLDAPURLRDFDelegateFactory()).QueryInterface(iid);</span>
<a href="#l9.1456"></a><span id="l9.1456" class="difflineminus">-        }</span>
<a href="#l9.1457"></a><span id="l9.1457" class="difflineminus">-    },</span>
<a href="#l9.1458"></a><span id="l9.1458" class="difflineminus">-</span>
<a href="#l9.1459"></a><span id="l9.1459" class="difflineminus">-    // because of the way JS components work (the JS garbage-collector</span>
<a href="#l9.1460"></a><span id="l9.1460" class="difflineminus">-    // keeps track of all the memory refs and won't unload until appropriate)</span>
<a href="#l9.1461"></a><span id="l9.1461" class="difflineminus">-    // this ends up being a dummy function; it can always return true.</span>
<a href="#l9.1462"></a><span id="l9.1462" class="difflineminus">-    //</span>
<a href="#l9.1463"></a><span id="l9.1463" class="difflineminus">-    canUnload: function(compMgr) { return true; }</span>
<a href="#l9.1464"></a><span id="l9.1464" class="difflineminus">-};</span>
<a href="#l9.1465"></a><span id="l9.1465" class="difflineminus">-</span>
<a href="#l9.1466"></a><span id="l9.1466" class="difflineminus">-function NSGetModule(compMgr, fileSpec) { return nsLDAPDataSourceModule; }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1">rename from ldap/xpcom/base/public/Makefile.in</span>
<a href="#l10.2"></a><span id="l10.2">rename to ldap/xpcom/public/Makefile.in</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineminus">--- a/ldap/xpcom/base/public/Makefile.in</span>
<a href="#l10.4"></a><span id="l10.4" class="difflineplus">+++ b/ldap/xpcom/public/Makefile.in</span>
<a href="#l10.5"></a><span id="l10.5" class="difflineat">@@ -31,17 +31,17 @@</span>
<a href="#l10.6"></a><span id="l10.6"> # use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l10.7"></a><span id="l10.7"> # decision by deleting the provisions above and replace them with the notice</span>
<a href="#l10.8"></a><span id="l10.8"> # and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l10.9"></a><span id="l10.9"> # the provisions above, a recipient may use your version of this file under</span>
<a href="#l10.10"></a><span id="l10.10"> # the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l10.11"></a><span id="l10.11"> #</span>
<a href="#l10.12"></a><span id="l10.12"> # ***** END LICENSE BLOCK *****</span>
<a href="#l10.13"></a><span id="l10.13"> </span>
<a href="#l10.14"></a><span id="l10.14" class="difflineminus">-DEPTH		= ../../../..</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineplus">+DEPTH		= ../../..</span>
<a href="#l10.16"></a><span id="l10.16"> topsrcdir	= @top_srcdir@</span>
<a href="#l10.17"></a><span id="l10.17"> srcdir		= @srcdir@</span>
<a href="#l10.18"></a><span id="l10.18"> VPATH		= @srcdir@</span>
<a href="#l10.19"></a><span id="l10.19"> </span>
<a href="#l10.20"></a><span id="l10.20"> include $(DEPTH)/config/autoconf.mk</span>
<a href="#l10.21"></a><span id="l10.21"> </span>
<a href="#l10.22"></a><span id="l10.22"> MODULE		= mozldap</span>
<a href="#l10.23"></a><span id="l10.23"> XPIDL_MODULE	= mozldap</span>
<a href="#l10.24"></a><span id="l10.24" class="difflineat">@@ -60,15 +60,10 @@ XPIDLSRCS	= 	\</span>
<a href="#l10.25"></a><span id="l10.25"> 			nsILDAPBERElement.idl \</span>
<a href="#l10.26"></a><span id="l10.26"> 			nsILDAPModification.idl \</span>
<a href="#l10.27"></a><span id="l10.27"> 			$(NULL)</span>
<a href="#l10.28"></a><span id="l10.28"> </span>
<a href="#l10.29"></a><span id="l10.29"> ifdef MOZ_PREF_EXTENSIONS</span>
<a href="#l10.30"></a><span id="l10.30"> XPIDLSRCS += nsILDAPSyncQuery.idl</span>
<a href="#l10.31"></a><span id="l10.31"> endif</span>
<a href="#l10.32"></a><span id="l10.32"> </span>
<a href="#l10.33"></a><span id="l10.33" class="difflineminus">-ifdef MOZ_LDAP_XPCOM_EXPERIMENTAL</span>
<a href="#l10.34"></a><span id="l10.34" class="difflineminus">-XPIDLSRCS	+=	\</span>
<a href="#l10.35"></a><span id="l10.35" class="difflineminus">-			$(NULL)</span>
<a href="#l10.36"></a><span id="l10.36" class="difflineminus">-endif</span>
<a href="#l10.37"></a><span id="l10.37" class="difflineminus">-</span>
<a href="#l10.38"></a><span id="l10.38"> include $(topsrcdir)/config/rules.mk</span>
<a href="#l10.39"></a><span id="l10.39"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">rename from ldap/xpcom/base/public/nsILDAPBERElement.idl</span>
<a href="#l11.2"></a><span id="l11.2">rename to ldap/xpcom/public/nsILDAPBERElement.idl</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">rename from ldap/xpcom/base/public/nsILDAPBERValue.idl</span>
<a href="#l12.2"></a><span id="l12.2">rename to ldap/xpcom/public/nsILDAPBERValue.idl</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">rename from ldap/xpcom/base/public/nsILDAPConnection.idl</span>
<a href="#l13.2"></a><span id="l13.2">rename to ldap/xpcom/public/nsILDAPConnection.idl</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1">rename from ldap/xpcom/base/public/nsILDAPControl.idl</span>
<a href="#l14.2"></a><span id="l14.2">rename to ldap/xpcom/public/nsILDAPControl.idl</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1">rename from ldap/xpcom/base/public/nsILDAPErrors.idl</span>
<a href="#l15.2"></a><span id="l15.2">rename to ldap/xpcom/public/nsILDAPErrors.idl</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1">rename from ldap/xpcom/base/public/nsILDAPMessage.idl</span>
<a href="#l16.2"></a><span id="l16.2">rename to ldap/xpcom/public/nsILDAPMessage.idl</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1">rename from ldap/xpcom/base/public/nsILDAPMessageListener.idl</span>
<a href="#l17.2"></a><span id="l17.2">rename to ldap/xpcom/public/nsILDAPMessageListener.idl</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1">rename from ldap/xpcom/base/public/nsILDAPModification.idl</span>
<a href="#l18.2"></a><span id="l18.2">rename to ldap/xpcom/public/nsILDAPModification.idl</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1">rename from ldap/xpcom/base/public/nsILDAPOperation.idl</span>
<a href="#l19.2"></a><span id="l19.2">rename to ldap/xpcom/public/nsILDAPOperation.idl</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1">rename from ldap/xpcom/base/public/nsILDAPServer.idl</span>
<a href="#l20.2"></a><span id="l20.2">rename to ldap/xpcom/public/nsILDAPServer.idl</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1">rename from ldap/xpcom/base/public/nsILDAPService.idl</span>
<a href="#l21.2"></a><span id="l21.2">rename to ldap/xpcom/public/nsILDAPService.idl</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1">rename from ldap/xpcom/base/public/nsILDAPSyncQuery.idl</span>
<a href="#l22.2"></a><span id="l22.2">rename to ldap/xpcom/public/nsILDAPSyncQuery.idl</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1">rename from ldap/xpcom/base/public/nsILDAPURL.idl</span>
<a href="#l23.2"></a><span id="l23.2">rename to ldap/xpcom/public/nsILDAPURL.idl</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1">rename from ldap/xpcom/base/src/Makefile.in</span>
<a href="#l24.2"></a><span id="l24.2">rename to ldap/xpcom/src/Makefile.in</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineminus">--- a/ldap/xpcom/base/src/Makefile.in</span>
<a href="#l24.4"></a><span id="l24.4" class="difflineplus">+++ b/ldap/xpcom/src/Makefile.in</span>
<a href="#l24.5"></a><span id="l24.5" class="difflineat">@@ -31,17 +31,17 @@</span>
<a href="#l24.6"></a><span id="l24.6"> # use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l24.7"></a><span id="l24.7"> # decision by deleting the provisions above and replace them with the notice</span>
<a href="#l24.8"></a><span id="l24.8"> # and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l24.9"></a><span id="l24.9"> # the provisions above, a recipient may use your version of this file under</span>
<a href="#l24.10"></a><span id="l24.10"> # the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l24.11"></a><span id="l24.11"> #</span>
<a href="#l24.12"></a><span id="l24.12"> # ***** END LICENSE BLOCK *****</span>
<a href="#l24.13"></a><span id="l24.13"> </span>
<a href="#l24.14"></a><span id="l24.14" class="difflineminus">-DEPTH		= ../../../..</span>
<a href="#l24.15"></a><span id="l24.15" class="difflineplus">+DEPTH		= ../../..</span>
<a href="#l24.16"></a><span id="l24.16"> topsrcdir	= @top_srcdir@</span>
<a href="#l24.17"></a><span id="l24.17"> srcdir		= @srcdir@</span>
<a href="#l24.18"></a><span id="l24.18"> VPATH		= @srcdir@</span>
<a href="#l24.19"></a><span id="l24.19"> </span>
<a href="#l24.20"></a><span id="l24.20"> include $(DEPTH)/config/autoconf.mk</span>
<a href="#l24.21"></a><span id="l24.21"> </span>
<a href="#l24.22"></a><span id="l24.22"> MODULE		= mozldap</span>
<a href="#l24.23"></a><span id="l24.23"> LIBRARY_NAME	= mozldap</span>
<a href="#l24.24"></a><span id="l24.24" class="difflineat">@@ -71,30 +71,20 @@ CPPSRCS		= \</span>
<a href="#l24.25"></a><span id="l24.25"> 		$(NULL)</span>
<a href="#l24.26"></a><span id="l24.26"> </span>
<a href="#l24.27"></a><span id="l24.27"> ifdef MOZ_PREF_EXTENSIONS</span>
<a href="#l24.28"></a><span id="l24.28"> DEFINES += -DMOZ_PREF_EXTENSIONS</span>
<a href="#l24.29"></a><span id="l24.29"> </span>
<a href="#l24.30"></a><span id="l24.30"> CPPSRCS += nsLDAPSyncQuery.cpp</span>
<a href="#l24.31"></a><span id="l24.31"> endif</span>
<a href="#l24.32"></a><span id="l24.32"> </span>
<a href="#l24.33"></a><span id="l24.33" class="difflineminus">-ifdef MOZ_LDAP_XPCOM_EXPERIMENTAL</span>
<a href="#l24.34"></a><span id="l24.34" class="difflineminus">-DEFINES		+= -DMOZ_LDAP_XPCOM_EXPERIMENTAL</span>
<a href="#l24.35"></a><span id="l24.35" class="difflineminus">-</span>
<a href="#l24.36"></a><span id="l24.36" class="difflineminus">-CPPSRCS		+= \</span>
<a href="#l24.37"></a><span id="l24.37" class="difflineminus">-		nsLDAPChannel.cpp \</span>
<a href="#l24.38"></a><span id="l24.38" class="difflineminus">-		$(NULL)</span>
<a href="#l24.39"></a><span id="l24.39" class="difflineminus">-</span>
<a href="#l24.40"></a><span id="l24.40" class="difflineminus">-endif</span>
<a href="#l24.41"></a><span id="l24.41" class="difflineminus">-</span>
<a href="#l24.42"></a><span id="l24.42"> ifdef MOZ_PSM</span>
<a href="#l24.43"></a><span id="l24.43"> DEFINES		+= -DMOZ_PSM</span>
<a href="#l24.44"></a><span id="l24.44"> CPPSRCS		+= \</span>
<a href="#l24.45"></a><span id="l24.45"> 		nsLDAPSecurityGlue.cpp \</span>
<a href="#l24.46"></a><span id="l24.46"> 		$(NULL)</span>
<a href="#l24.47"></a><span id="l24.47"> endif</span>
<a href="#l24.48"></a><span id="l24.48"> </span>
<a href="#l24.49"></a><span id="l24.49"> EXTRA_DSO_LDOPTS += $(MOZ_COMPONENT_LIBS) $(LDAP_LIBS)</span>
<a href="#l24.50"></a><span id="l24.50"> </span>
<a href="#l24.51"></a><span id="l24.51"> include $(topsrcdir)/config/rules.mk</span>
<a href="#l24.52"></a><span id="l24.52"> </span>
<a href="#l24.53"></a><span id="l24.53"> LOCAL_INCLUDES	= $(LDAP_CFLAGS)</span>
<a href="#l24.54"></a><span id="l24.54" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1">rename from ldap/xpcom/base/src/ldapComponents.manifest</span>
<a href="#l25.2"></a><span id="l25.2">rename to ldap/xpcom/src/ldapComponents.manifest</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1">rename from ldap/xpcom/base/src/nsLDAPBERElement.cpp</span>
<a href="#l26.2"></a><span id="l26.2">rename to ldap/xpcom/src/nsLDAPBERElement.cpp</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1">rename from ldap/xpcom/base/src/nsLDAPBERElement.h</span>
<a href="#l27.2"></a><span id="l27.2">rename to ldap/xpcom/src/nsLDAPBERElement.h</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1">rename from ldap/xpcom/base/src/nsLDAPBERValue.cpp</span>
<a href="#l28.2"></a><span id="l28.2">rename to ldap/xpcom/src/nsLDAPBERValue.cpp</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1">rename from ldap/xpcom/base/src/nsLDAPBERValue.h</span>
<a href="#l29.2"></a><span id="l29.2">rename to ldap/xpcom/src/nsLDAPBERValue.h</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1">rename from ldap/xpcom/base/src/nsLDAPConnection.cpp</span>
<a href="#l30.2"></a><span id="l30.2">rename to ldap/xpcom/src/nsLDAPConnection.cpp</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1">rename from ldap/xpcom/base/src/nsLDAPConnection.h</span>
<a href="#l31.2"></a><span id="l31.2">rename to ldap/xpcom/src/nsLDAPConnection.h</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1">rename from ldap/xpcom/base/src/nsLDAPControl.cpp</span>
<a href="#l32.2"></a><span id="l32.2">rename to ldap/xpcom/src/nsLDAPControl.cpp</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1">rename from ldap/xpcom/base/src/nsLDAPControl.h</span>
<a href="#l33.2"></a><span id="l33.2">rename to ldap/xpcom/src/nsLDAPControl.h</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1">rename from ldap/xpcom/base/src/nsLDAPInternal.h</span>
<a href="#l34.2"></a><span id="l34.2">rename to ldap/xpcom/src/nsLDAPInternal.h</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1">rename from ldap/xpcom/base/src/nsLDAPMessage.cpp</span>
<a href="#l35.2"></a><span id="l35.2">rename to ldap/xpcom/src/nsLDAPMessage.cpp</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1">rename from ldap/xpcom/base/src/nsLDAPMessage.h</span>
<a href="#l36.2"></a><span id="l36.2">rename to ldap/xpcom/src/nsLDAPMessage.h</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1">rename from ldap/xpcom/base/src/nsLDAPModification.cpp</span>
<a href="#l37.2"></a><span id="l37.2">rename to ldap/xpcom/src/nsLDAPModification.cpp</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1">rename from ldap/xpcom/base/src/nsLDAPModification.h</span>
<a href="#l38.2"></a><span id="l38.2">rename to ldap/xpcom/src/nsLDAPModification.h</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1">rename from ldap/xpcom/base/src/nsLDAPOperation.cpp</span>
<a href="#l39.2"></a><span id="l39.2">rename to ldap/xpcom/src/nsLDAPOperation.cpp</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1">rename from ldap/xpcom/base/src/nsLDAPOperation.h</span>
<a href="#l40.2"></a><span id="l40.2">rename to ldap/xpcom/src/nsLDAPOperation.h</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1">rename from ldap/xpcom/base/src/nsLDAPProtocolHandler.js</span>
<a href="#l41.2"></a><span id="l41.2">rename to ldap/xpcom/src/nsLDAPProtocolHandler.js</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1">rename from ldap/xpcom/base/src/nsLDAPProtocolModule.cpp</span>
<a href="#l42.2"></a><span id="l42.2">rename to ldap/xpcom/src/nsLDAPProtocolModule.cpp</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineminus">--- a/ldap/xpcom/base/src/nsLDAPProtocolModule.cpp</span>
<a href="#l42.4"></a><span id="l42.4" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPProtocolModule.cpp</span>
<a href="#l42.5"></a><span id="l42.5" class="difflineat">@@ -52,51 +52,41 @@</span>
<a href="#l42.6"></a><span id="l42.6"> #include &quot;nsLDAPBERValue.h&quot;</span>
<a href="#l42.7"></a><span id="l42.7"> #include &quot;nsLDAPBERElement.h&quot;</span>
<a href="#l42.8"></a><span id="l42.8"> #include &quot;nsLDAPControl.h&quot;</span>
<a href="#l42.9"></a><span id="l42.9"> #ifdef MOZ_PREF_EXTENSIONS</span>
<a href="#l42.10"></a><span id="l42.10"> #include &quot;nsLDAPSyncQuery.h&quot;</span>
<a href="#l42.11"></a><span id="l42.11"> #endif</span>
<a href="#l42.12"></a><span id="l42.12"> #include &quot;ldappr.h&quot;</span>
<a href="#l42.13"></a><span id="l42.13"> </span>
<a href="#l42.14"></a><span id="l42.14" class="difflineminus">-#ifdef MOZ_LDAP_XPCOM_EXPERIMENTAL</span>
<a href="#l42.15"></a><span id="l42.15" class="difflineminus">-#include &quot;nsLDAPChannel.h&quot;</span>
<a href="#l42.16"></a><span id="l42.16" class="difflineminus">-#endif</span>
<a href="#l42.17"></a><span id="l42.17" class="difflineminus">-</span>
<a href="#l42.18"></a><span id="l42.18"> // use the default constructor</span>
<a href="#l42.19"></a><span id="l42.19"> //</span>
<a href="#l42.20"></a><span id="l42.20"> NS_GENERIC_FACTORY_CONSTRUCTOR(nsLDAPConnection)</span>
<a href="#l42.21"></a><span id="l42.21"> NS_GENERIC_FACTORY_CONSTRUCTOR(nsLDAPOperation)</span>
<a href="#l42.22"></a><span id="l42.22"> NS_GENERIC_FACTORY_CONSTRUCTOR(nsLDAPMessage)</span>
<a href="#l42.23"></a><span id="l42.23"> NS_GENERIC_FACTORY_CONSTRUCTOR_INIT(nsLDAPModification, Init)</span>
<a href="#l42.24"></a><span id="l42.24"> NS_GENERIC_FACTORY_CONSTRUCTOR(nsLDAPServer)</span>
<a href="#l42.25"></a><span id="l42.25"> NS_GENERIC_FACTORY_CONSTRUCTOR(nsLDAPURL)</span>
<a href="#l42.26"></a><span id="l42.26"> NS_GENERIC_FACTORY_CONSTRUCTOR_INIT(nsLDAPService, Init)</span>
<a href="#l42.27"></a><span id="l42.27"> NS_GENERIC_FACTORY_CONSTRUCTOR(nsLDAPBERValue)</span>
<a href="#l42.28"></a><span id="l42.28"> NS_GENERIC_FACTORY_CONSTRUCTOR(nsLDAPBERElement)</span>
<a href="#l42.29"></a><span id="l42.29"> NS_GENERIC_FACTORY_CONSTRUCTOR(nsLDAPControl)</span>
<a href="#l42.30"></a><span id="l42.30"> #ifdef MOZ_PREF_EXTENSIONS</span>
<a href="#l42.31"></a><span id="l42.31"> NS_GENERIC_FACTORY_CONSTRUCTOR(nsLDAPSyncQuery)</span>
<a href="#l42.32"></a><span id="l42.32"> #endif</span>
<a href="#l42.33"></a><span id="l42.33" class="difflineminus">-#ifdef MOZ_LDAP_XPCOM_EXPERIMENTAL</span>
<a href="#l42.34"></a><span id="l42.34" class="difflineminus">-NS_GENERIC_FACTORY_CONSTRUCTOR(nsLDAPChannel)</span>
<a href="#l42.35"></a><span id="l42.35" class="difflineminus">-#endif</span>
<a href="#l42.36"></a><span id="l42.36"> </span>
<a href="#l42.37"></a><span id="l42.37"> NS_DEFINE_NAMED_CID(NS_LDAPCONNECTION_CID);</span>
<a href="#l42.38"></a><span id="l42.38"> NS_DEFINE_NAMED_CID(NS_LDAPOPERATION_CID);</span>
<a href="#l42.39"></a><span id="l42.39"> NS_DEFINE_NAMED_CID(NS_LDAPMESSAGE_CID);</span>
<a href="#l42.40"></a><span id="l42.40"> NS_DEFINE_NAMED_CID(NS_LDAPMODIFICATION_CID);</span>
<a href="#l42.41"></a><span id="l42.41"> NS_DEFINE_NAMED_CID(NS_LDAPSERVER_CID);</span>
<a href="#l42.42"></a><span id="l42.42"> NS_DEFINE_NAMED_CID(NS_LDAPSERVICE_CID);</span>
<a href="#l42.43"></a><span id="l42.43"> NS_DEFINE_NAMED_CID(NS_LDAPURL_CID);</span>
<a href="#l42.44"></a><span id="l42.44"> NS_DEFINE_NAMED_CID(NS_LDAPBERVALUE_CID);</span>
<a href="#l42.45"></a><span id="l42.45"> NS_DEFINE_NAMED_CID(NS_LDAPBERELEMENT_CID);</span>
<a href="#l42.46"></a><span id="l42.46" class="difflineminus">-#ifdef MOZ_LDAP_XPCOM_EXPERIMENTAL</span>
<a href="#l42.47"></a><span id="l42.47" class="difflineminus">-NS_DEFINE_NAMED_CID(NS_LDAPCHANNEL_CID);</span>
<a href="#l42.48"></a><span id="l42.48" class="difflineminus">-#endif</span>
<a href="#l42.49"></a><span id="l42.49"> #ifdef MOZ_PREF_EXTENSIONS</span>
<a href="#l42.50"></a><span id="l42.50"> NS_DEFINE_NAMED_CID(NS_LDAPSYNCQUERY_CID);</span>
<a href="#l42.51"></a><span id="l42.51"> #endif</span>
<a href="#l42.52"></a><span id="l42.52"> NS_DEFINE_NAMED_CID(NS_LDAPCONTROL_CID);</span>
<a href="#l42.53"></a><span id="l42.53"> </span>
<a href="#l42.54"></a><span id="l42.54"> // a table of the CIDs implemented by this module</span>
<a href="#l42.55"></a><span id="l42.55"> //</span>
<a href="#l42.56"></a><span id="l42.56"> </span>
<a href="#l42.57"></a><span id="l42.57" class="difflineat">@@ -105,19 +95,16 @@ const mozilla::Module::CIDEntry kLDAPPro</span>
<a href="#l42.58"></a><span id="l42.58">   { &amp;kNS_LDAPOPERATION_CID, false, NULL, nsLDAPOperationConstructor},</span>
<a href="#l42.59"></a><span id="l42.59">   { &amp;kNS_LDAPMESSAGE_CID, false, NULL, nsLDAPMessageConstructor},</span>
<a href="#l42.60"></a><span id="l42.60">   { &amp;kNS_LDAPMODIFICATION_CID, false, NULL, nsLDAPModificationConstructor},</span>
<a href="#l42.61"></a><span id="l42.61">   { &amp;kNS_LDAPSERVER_CID, false, NULL, nsLDAPServerConstructor},</span>
<a href="#l42.62"></a><span id="l42.62">   { &amp;kNS_LDAPSERVICE_CID, false, NULL, nsLDAPServiceConstructor},</span>
<a href="#l42.63"></a><span id="l42.63">   { &amp;kNS_LDAPURL_CID, false, NULL, nsLDAPURLConstructor},</span>
<a href="#l42.64"></a><span id="l42.64">   { &amp;kNS_LDAPBERVALUE_CID, false, NULL, nsLDAPBERValueConstructor},</span>
<a href="#l42.65"></a><span id="l42.65">   { &amp;kNS_LDAPBERELEMENT_CID, false, NULL, nsLDAPBERElementConstructor},</span>
<a href="#l42.66"></a><span id="l42.66" class="difflineminus">-#ifdef MOZ_LDAP_XPCOM_EXPERIMENTAL</span>
<a href="#l42.67"></a><span id="l42.67" class="difflineminus">-  { &amp;kNS_LDAPCHANNEL_CID, false, NULL, nsLDAPChannelConstructor},</span>
<a href="#l42.68"></a><span id="l42.68" class="difflineminus">-#endif</span>
<a href="#l42.69"></a><span id="l42.69"> #ifdef MOZ_PREF_EXTENSIONS</span>
<a href="#l42.70"></a><span id="l42.70">   { &amp;kNS_LDAPSYNCQUERY_CID, false, NULL, nsLDAPSyncQueryConstructor},</span>
<a href="#l42.71"></a><span id="l42.71"> #endif</span>
<a href="#l42.72"></a><span id="l42.72">   { &amp;kNS_LDAPCONTROL_CID, false, NULL, nsLDAPControlConstructor},</span>
<a href="#l42.73"></a><span id="l42.73">   { NULL }</span>
<a href="#l42.74"></a><span id="l42.74"> };</span>
<a href="#l42.75"></a><span id="l42.75"> </span>
<a href="#l42.76"></a><span id="l42.76"> </span>
<a href="#l42.77"></a><span id="l42.77" class="difflineat">@@ -126,19 +113,16 @@ const mozilla::Module::ContractIDEntry k</span>
<a href="#l42.78"></a><span id="l42.78">   { &quot;@mozilla.org/network/ldap-operation;1&quot;, &amp;kNS_LDAPOPERATION_CID},</span>
<a href="#l42.79"></a><span id="l42.79">   { &quot;@mozilla.org/network/ldap-message;1&quot;, &amp;kNS_LDAPMESSAGE_CID},</span>
<a href="#l42.80"></a><span id="l42.80">   { &quot;@mozilla.org/network/ldap-modification;1&quot;, &amp;kNS_LDAPMODIFICATION_CID},</span>
<a href="#l42.81"></a><span id="l42.81">   { &quot;@mozilla.org/network/ldap-server;1&quot;, &amp;kNS_LDAPSERVER_CID},</span>
<a href="#l42.82"></a><span id="l42.82">   { &quot;@mozilla.org/network/ldap-service;1&quot;, &amp;kNS_LDAPSERVICE_CID},</span>
<a href="#l42.83"></a><span id="l42.83">   { &quot;@mozilla.org/network/ldap-url;1&quot;, &amp;kNS_LDAPURL_CID},</span>
<a href="#l42.84"></a><span id="l42.84">   { &quot;@mozilla.org/network/ldap-ber-value;1&quot;, &amp;kNS_LDAPBERVALUE_CID},</span>
<a href="#l42.85"></a><span id="l42.85">   { &quot;@mozilla.org/network/ldap-ber-element;1&quot;, &amp;kNS_LDAPBERELEMENT_CID},</span>
<a href="#l42.86"></a><span id="l42.86" class="difflineminus">-#ifdef MOZ_LDAP_XPCOM_EXPERIMENTAL</span>
<a href="#l42.87"></a><span id="l42.87" class="difflineminus">-  { &quot;@mozilla.org/network/ldap-channel;1&quot;, &amp;kNS_LDAPCHANNEL_CID},</span>
<a href="#l42.88"></a><span id="l42.88" class="difflineminus">-#endif</span>
<a href="#l42.89"></a><span id="l42.89"> #ifdef MOZ_PREF_EXTENSIONS</span>
<a href="#l42.90"></a><span id="l42.90">   { &quot;@mozilla.org/ldapsyncquery;1&quot;, &amp;kNS_LDAPSYNCQUERY_CID},</span>
<a href="#l42.91"></a><span id="l42.91"> #endif</span>
<a href="#l42.92"></a><span id="l42.92">   { &quot;@mozilla.org/network/ldap-control;1&quot;, &amp;kNS_LDAPCONTROL_CID},</span>
<a href="#l42.93"></a><span id="l42.93">   { NULL }</span>
<a href="#l42.94"></a><span id="l42.94"> };</span>
<a href="#l42.95"></a><span id="l42.95"> </span>
<a href="#l42.96"></a><span id="l42.96"> static nsresult</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1">rename from ldap/xpcom/base/src/nsLDAPSecurityGlue.cpp</span>
<a href="#l43.2"></a><span id="l43.2">rename to ldap/xpcom/src/nsLDAPSecurityGlue.cpp</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1">rename from ldap/xpcom/base/src/nsLDAPServer.cpp</span>
<a href="#l44.2"></a><span id="l44.2">rename to ldap/xpcom/src/nsLDAPServer.cpp</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1">rename from ldap/xpcom/base/src/nsLDAPServer.h</span>
<a href="#l45.2"></a><span id="l45.2">rename to ldap/xpcom/src/nsLDAPServer.h</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1">rename from ldap/xpcom/base/src/nsLDAPService.cpp</span>
<a href="#l46.2"></a><span id="l46.2">rename to ldap/xpcom/src/nsLDAPService.cpp</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1">rename from ldap/xpcom/base/src/nsLDAPService.h</span>
<a href="#l47.2"></a><span id="l47.2">rename to ldap/xpcom/src/nsLDAPService.h</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1">rename from ldap/xpcom/base/src/nsLDAPSyncQuery.cpp</span>
<a href="#l48.2"></a><span id="l48.2">rename to ldap/xpcom/src/nsLDAPSyncQuery.cpp</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1">rename from ldap/xpcom/base/src/nsLDAPSyncQuery.h</span>
<a href="#l49.2"></a><span id="l49.2">rename to ldap/xpcom/src/nsLDAPSyncQuery.h</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1">rename from ldap/xpcom/base/src/nsLDAPURL.cpp</span>
<a href="#l50.2"></a><span id="l50.2">rename to ldap/xpcom/src/nsLDAPURL.cpp</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1">rename from ldap/xpcom/base/src/nsLDAPURL.h</span>
<a href="#l51.2"></a><span id="l51.2">rename to ldap/xpcom/src/nsLDAPURL.h</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/ldap/xpcom/tests/Makefile.in</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/ldap/xpcom/tests/Makefile.in</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -35,38 +35,15 @@</span>
<a href="#l52.4"></a><span id="l52.4"> # the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l52.5"></a><span id="l52.5"> #</span>
<a href="#l52.6"></a><span id="l52.6"> # ***** END LICENSE BLOCK *****</span>
<a href="#l52.7"></a><span id="l52.7"> </span>
<a href="#l52.8"></a><span id="l52.8"> DEPTH		= ../../..</span>
<a href="#l52.9"></a><span id="l52.9"> topsrcdir	= @top_srcdir@</span>
<a href="#l52.10"></a><span id="l52.10"> srcdir		= @srcdir@</span>
<a href="#l52.11"></a><span id="l52.11"> VPATH		= @srcdir@</span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-relativesrcdir = directory/xpcom/tests</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineplus">+relativesrcdir  = ldap/xpcom/tests</span>
<a href="#l52.14"></a><span id="l52.14"> </span>
<a href="#l52.15"></a><span id="l52.15"> include $(DEPTH)/config/autoconf.mk</span>
<a href="#l52.16"></a><span id="l52.16"> </span>
<a href="#l52.17"></a><span id="l52.17"> XPCSHELL_TESTS	= unit</span>
<a href="#l52.18"></a><span id="l52.18"> </span>
<a href="#l52.19"></a><span id="l52.19"> include $(topsrcdir)/config/rules.mk</span>
<a href="#l52.20"></a><span id="l52.20" class="difflineminus">-</span>
<a href="#l52.21"></a><span id="l52.21" class="difflineminus">-# Note that for the time being &quot;ldapshell&quot; requires LDAP Experimental</span>
<a href="#l52.22"></a><span id="l52.22" class="difflineminus">-#</span>
<a href="#l52.23"></a><span id="l52.23" class="difflineminus">-</span>
<a href="#l52.24"></a><span id="l52.24" class="difflineminus">-ifdef MOZ_LDAP_XPCOM_EXPERIMENTAL</span>
<a href="#l52.25"></a><span id="l52.25" class="difflineminus">-</span>
<a href="#l52.26"></a><span id="l52.26" class="difflineminus">-DEFINES += -DMOZ_LDAP_XPCOM_EXPERIMENTAL</span>
<a href="#l52.27"></a><span id="l52.27" class="difflineminus">-</span>
<a href="#l52.28"></a><span id="l52.28" class="difflineminus">-ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l52.29"></a><span id="l52.29" class="difflineminus">-# need this because xpcshell built with readline won't work in cygwin shells</span>
<a href="#l52.30"></a><span id="l52.30" class="difflineminus">-RUN		= cmd /c start</span>
<a href="#l52.31"></a><span id="l52.31" class="difflineminus">-else</span>
<a href="#l52.32"></a><span id="l52.32" class="difflineminus">-RUN		= $(DIST)/bin/run-mozilla.sh</span>
<a href="#l52.33"></a><span id="l52.33" class="difflineminus">-endif</span>
<a href="#l52.34"></a><span id="l52.34" class="difflineminus">-</span>
<a href="#l52.35"></a><span id="l52.35" class="difflineminus">-XPCSHELL	= $(DIST)/bin/xpcshell</span>
<a href="#l52.36"></a><span id="l52.36" class="difflineminus">-</span>
<a href="#l52.37"></a><span id="l52.37" class="difflineminus">-.PHONY: ldapshell</span>
<a href="#l52.38"></a><span id="l52.38" class="difflineminus">-ldapshell:</span>
<a href="#l52.39"></a><span id="l52.39" class="difflineminus">-	$(CYGWIN_WRAPPER) $(RUN) $(XPCSHELL) \</span>
<a href="#l52.40"></a><span id="l52.40" class="difflineminus">-		-f $(srcdir)/ldapshell.js \</span>
<a href="#l52.41"></a><span id="l52.41" class="difflineminus">-		-f -</span>
<a href="#l52.42"></a><span id="l52.42" class="difflineminus">-endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1">deleted file mode 100644</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineminus">--- a/ldap/xpcom/tests/example.rdf</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineplus">+++ /dev/null</span>
<a href="#l53.4"></a><span id="l53.4" class="difflineat">@@ -1,30 +0,0 @@</span>
<a href="#l53.5"></a><span id="l53.5" class="difflineminus">-&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l53.6"></a><span id="l53.6" class="difflineminus">-&lt;RDF:RDF</span>
<a href="#l53.7"></a><span id="l53.7" class="difflineminus">-	xmlns:RDF=&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;</span>
<a href="#l53.8"></a><span id="l53.8" class="difflineminus">-        xmlns:NC=&quot;http://home.netscape.com/NC-rdf#&quot;</span>
<a href="#l53.9"></a><span id="l53.9" class="difflineminus">-        xmlns:WEB=&quot;http://home.netscape.com/WEB-rdf#&quot;</span>
<a href="#l53.10"></a><span id="l53.10" class="difflineminus">-        xmlns:LDAPATTR=&quot;http://www.mozilla.org/LDAPATTR-rdf#&quot;&gt;</span>
<a href="#l53.11"></a><span id="l53.11" class="difflineminus">-</span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-&lt;RDF:Description about=&quot;urn:root&quot;&gt;</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineminus">-  &lt;NC:child&gt;</span>
<a href="#l53.14"></a><span id="l53.14" class="difflineminus">-    &lt;RDF:Description about=&quot;ldap://memberdir.netscape.com:389/ou=member_directory,o=netcenter.com??one?(sn=Rasputin)&quot;&gt;</span>
<a href="#l53.15"></a><span id="l53.15" class="difflineminus">-</span>
<a href="#l53.16"></a><span id="l53.16" class="difflineminus">-      &lt;NC:child&gt;</span>
<a href="#l53.17"></a><span id="l53.17" class="difflineminus">-        &lt;RDF:Description about=&quot;ldap://memberdir.netscape.com:389/uid=17680694:SWDv1,ou=member_directory,o=netcenter.com??base&quot;&gt;</span>
<a href="#l53.18"></a><span id="l53.18" class="difflineminus">-          &lt;LDAPATTR:mail&gt;lordrasputin@geocities.com&lt;/LDAPATTR:mail&gt;</span>
<a href="#l53.19"></a><span id="l53.19" class="difflineminus">-          &lt;LDAPATTR:cn&gt;Lord Rasputin&lt;/LDAPATTR:cn&gt;</span>
<a href="#l53.20"></a><span id="l53.20" class="difflineminus">-        &lt;/RDF:Description&gt;</span>
<a href="#l53.21"></a><span id="l53.21" class="difflineminus">-      &lt;/NC:child&gt;</span>
<a href="#l53.22"></a><span id="l53.22" class="difflineminus">-</span>
<a href="#l53.23"></a><span id="l53.23" class="difflineminus">-      &lt;NC:child&gt;</span>
<a href="#l53.24"></a><span id="l53.24" class="difflineminus">-        &lt;RDF:Description about=&quot;ldap://memberdir.netscape.com:389/uid=30653926:PAGEv1,ou=member_directory,o=netcenter.com??base&quot;&gt;</span>
<a href="#l53.25"></a><span id="l53.25" class="difflineminus">-          &lt;LDAPATTR:mail&gt;jesusrasputin@hotmail.com&lt;/LDAPATTR:mail&gt;</span>
<a href="#l53.26"></a><span id="l53.26" class="difflineminus">-          &lt;LDAPATTR:cn&gt;Jesus Rasputin&lt;/LDAPATTR:cn&gt;</span>
<a href="#l53.27"></a><span id="l53.27" class="difflineminus">-        &lt;/RDF:Description&gt;</span>
<a href="#l53.28"></a><span id="l53.28" class="difflineminus">-      &lt;/NC:child&gt;</span>
<a href="#l53.29"></a><span id="l53.29" class="difflineminus">-</span>
<a href="#l53.30"></a><span id="l53.30" class="difflineminus">-    &lt;/RDF:Description&gt;</span>
<a href="#l53.31"></a><span id="l53.31" class="difflineminus">-  &lt;/NC:child&gt;</span>
<a href="#l53.32"></a><span id="l53.32" class="difflineminus">-&lt;/RDF:Description&gt;</span>
<a href="#l53.33"></a><span id="l53.33" class="difflineminus">-</span>
<a href="#l53.34"></a><span id="l53.34" class="difflineminus">-&lt;/RDF:RDF&gt;</span>
<a href="#l53.35"></a><span id="l53.35">\ No newline at end of file</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1">deleted file mode 100644</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineminus">--- a/ldap/xpcom/tests/example.xul</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineplus">+++ /dev/null</span>
<a href="#l54.4"></a><span id="l54.4" class="difflineat">@@ -1,44 +0,0 @@</span>
<a href="#l54.5"></a><span id="l54.5" class="difflineminus">-&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l54.6"></a><span id="l54.6" class="difflineminus">-&lt;?xml-stylesheet href=&quot;chrome://communicator/skin/&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l54.7"></a><span id="l54.7" class="difflineminus">-</span>
<a href="#l54.8"></a><span id="l54.8" class="difflineminus">-&lt;window xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l54.9"></a><span id="l54.9" class="difflineminus">-        orient=&quot;vertical&quot;&gt;</span>
<a href="#l54.10"></a><span id="l54.10" class="difflineminus">-  &lt;tree id=&quot;tree&quot;</span>
<a href="#l54.11"></a><span id="l54.11" class="difflineminus">-            flex=&quot;1&quot;</span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-            datasources=&quot;rdf:ldap&quot;</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineminus">-            ref=&quot;ldap://alpha.dante.org.uk:389/dc=dante,dc=org,dc=uk??one?(objectclass=*)&quot;</span>
<a href="#l54.14"></a><span id="l54.14" class="difflineminus">-            containment=&quot;http://home.netscape.com/NC-rdf#recursiveChild&quot;</span>
<a href="#l54.15"></a><span id="l54.15" class="difflineminus">-            flags=&quot;dont-build-content&quot;&gt;</span>
<a href="#l54.16"></a><span id="l54.16" class="difflineminus">-    &lt;treecols&gt;</span>
<a href="#l54.17"></a><span id="l54.17" class="difflineminus">-      &lt;treecol id=&quot;description&quot;</span>
<a href="#l54.18"></a><span id="l54.18" class="difflineminus">-                   class=&quot;sortDirectionIndicator&quot;</span>
<a href="#l54.19"></a><span id="l54.19" class="difflineminus">-                   flex=&quot;1&quot;</span>
<a href="#l54.20"></a><span id="l54.20" class="difflineminus">-                   label=&quot;Description&quot;</span>
<a href="#l54.21"></a><span id="l54.21" class="difflineminus">-                   sort=&quot;rdf:http://www.mozilla.org/LDAPATTR-rdf#description&quot;</span>
<a href="#l54.22"></a><span id="l54.22" class="difflineminus">-                   sortActive=&quot;true&quot;</span>
<a href="#l54.23"></a><span id="l54.23" class="difflineminus">-                   primary=&quot;true&quot;</span>
<a href="#l54.24"></a><span id="l54.24" class="difflineminus">-                   persist=&quot;width sortActive sortDirection&quot; /&gt;</span>
<a href="#l54.25"></a><span id="l54.25" class="difflineminus">-</span>
<a href="#l54.26"></a><span id="l54.26" class="difflineminus">-      &lt;splitter class=&quot;tree-splitter&quot; /&gt;</span>
<a href="#l54.27"></a><span id="l54.27" class="difflineminus">-</span>
<a href="#l54.28"></a><span id="l54.28" class="difflineminus">-      &lt;treecol id=&quot;cn&quot;</span>
<a href="#l54.29"></a><span id="l54.29" class="difflineminus">-                   class=&quot;sortDirectionIndicator&quot;</span>
<a href="#l54.30"></a><span id="l54.30" class="difflineminus">-                   flex=&quot;1&quot;</span>
<a href="#l54.31"></a><span id="l54.31" class="difflineminus">-                   label=&quot;CN&quot;</span>
<a href="#l54.32"></a><span id="l54.32" class="difflineminus">-                   sort=&quot;rdf:http://www.mozilla.org/LDAPATTR-rdf#cn&quot;</span>
<a href="#l54.33"></a><span id="l54.33" class="difflineminus">-                   persist=&quot;width sortActive sortDirection&quot; /&gt;</span>
<a href="#l54.34"></a><span id="l54.34" class="difflineminus">-    &lt;/treecols&gt;</span>
<a href="#l54.35"></a><span id="l54.35" class="difflineminus">-    &lt;template&gt;</span>
<a href="#l54.36"></a><span id="l54.36" class="difflineminus">-      &lt;treechildren&gt;</span>
<a href="#l54.37"></a><span id="l54.37" class="difflineminus">-        &lt;treeitem uri=&quot;rdf:http://home.netscape.com/NC-rdf#recursiveChild&quot;&gt;</span>
<a href="#l54.38"></a><span id="l54.38" class="difflineminus">-          &lt;treerow&gt;</span>
<a href="#l54.39"></a><span id="l54.39" class="difflineminus">-            &lt;treecell ref=&quot;description&quot;</span>
<a href="#l54.40"></a><span id="l54.40" class="difflineminus">-                          label=&quot;rdf:http://www.mozilla.org/LDAPATTR-rdf#description&quot; /&gt;</span>
<a href="#l54.41"></a><span id="l54.41" class="difflineminus">-            &lt;treecell ref=&quot;cn&quot;</span>
<a href="#l54.42"></a><span id="l54.42" class="difflineminus">-                          label=&quot;rdf:http://www.mozilla.org/LDAPATTR-rdf#cn&quot; /&gt;</span>
<a href="#l54.43"></a><span id="l54.43" class="difflineminus">-          &lt;/treerow&gt;</span>
<a href="#l54.44"></a><span id="l54.44" class="difflineminus">-        &lt;/treeitem&gt;</span>
<a href="#l54.45"></a><span id="l54.45" class="difflineminus">-      &lt;/treechildren&gt;</span>
<a href="#l54.46"></a><span id="l54.46" class="difflineminus">-    &lt;/template&gt;</span>
<a href="#l54.47"></a><span id="l54.47" class="difflineminus">-  &lt;/tree&gt;</span>
<a href="#l54.48"></a><span id="l54.48" class="difflineminus">-&lt;/window&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1">deleted file mode 100644</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineminus">--- a/ldap/xpcom/tests/jar.mn</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineplus">+++ /dev/null</span>
<a href="#l55.4"></a><span id="l55.4" class="difflineat">@@ -1,5 +0,0 @@</span>
<a href="#l55.5"></a><span id="l55.5" class="difflineminus">-#ifdef MOZ_LDAP_XPCOM_EXPERIMENTAL</span>
<a href="#l55.6"></a><span id="l55.6" class="difflineminus">-comm.jar:</span>
<a href="#l55.7"></a><span id="l55.7" class="difflineminus">-    content/communicator/ldapviewer/example.xul</span>
<a href="#l55.8"></a><span id="l55.8" class="difflineminus">-    content/communicator/ldapviewer/example.rdf</span>
<a href="#l55.9"></a><span id="l55.9" class="difflineminus">-#endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l56.1"></a><span id="l56.1">deleted file mode 100644</span>
<a href="#l56.2"></a><span id="l56.2" class="difflineminus">--- a/ldap/xpcom/tests/ldapshell.js</span>
<a href="#l56.3"></a><span id="l56.3" class="difflineplus">+++ /dev/null</span>
<a href="#l56.4"></a><span id="l56.4" class="difflineat">@@ -1,269 +0,0 @@</span>
<a href="#l56.5"></a><span id="l56.5" class="difflineminus">-/* -*- Mode: javascript; tab-width: 20; indent-tabs-mode: nil; c-basic-offset: 4 -*- */</span>
<a href="#l56.6"></a><span id="l56.6" class="difflineminus">-/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l56.7"></a><span id="l56.7" class="difflineminus">- * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l56.8"></a><span id="l56.8" class="difflineminus">- *</span>
<a href="#l56.9"></a><span id="l56.9" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l56.10"></a><span id="l56.10" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l56.11"></a><span id="l56.11" class="difflineminus">- * the License. You may obtain a copy of the License at</span>
<a href="#l56.12"></a><span id="l56.12" class="difflineminus">- * http://www.mozilla.org/MPL/</span>
<a href="#l56.13"></a><span id="l56.13" class="difflineminus">- *</span>
<a href="#l56.14"></a><span id="l56.14" class="difflineminus">- * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l56.15"></a><span id="l56.15" class="difflineminus">- * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l56.16"></a><span id="l56.16" class="difflineminus">- * for the specific language governing rights and limitations under the</span>
<a href="#l56.17"></a><span id="l56.17" class="difflineminus">- * License.</span>
<a href="#l56.18"></a><span id="l56.18" class="difflineminus">- *</span>
<a href="#l56.19"></a><span id="l56.19" class="difflineminus">- * The Original Code is mozilla.org calendar code.</span>
<a href="#l56.20"></a><span id="l56.20" class="difflineminus">- *</span>
<a href="#l56.21"></a><span id="l56.21" class="difflineminus">- * The Initial Developer of the Original Code is Oracle Corporation</span>
<a href="#l56.22"></a><span id="l56.22" class="difflineminus">- * Portions created by the Initial Developer are Copyright (C) 2004, 2005</span>
<a href="#l56.23"></a><span id="l56.23" class="difflineminus">- * the Initial Developer. All Rights Reserved.</span>
<a href="#l56.24"></a><span id="l56.24" class="difflineminus">- *</span>
<a href="#l56.25"></a><span id="l56.25" class="difflineminus">- * Contributor(s): Dan Mosedale &lt;dan.mosedale@oracle.com&gt;</span>
<a href="#l56.26"></a><span id="l56.26" class="difflineminus">- *                 Mike Shaver &lt;mike.x.shaver@oracle.com&gt;</span>
<a href="#l56.27"></a><span id="l56.27" class="difflineminus">- *</span>
<a href="#l56.28"></a><span id="l56.28" class="difflineminus">- * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l56.29"></a><span id="l56.29" class="difflineminus">- * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l56.30"></a><span id="l56.30" class="difflineminus">- * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l56.31"></a><span id="l56.31" class="difflineminus">- * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l56.32"></a><span id="l56.32" class="difflineminus">- * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l56.33"></a><span id="l56.33" class="difflineminus">- * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l56.34"></a><span id="l56.34" class="difflineminus">- * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l56.35"></a><span id="l56.35" class="difflineminus">- * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l56.36"></a><span id="l56.36" class="difflineminus">- * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l56.37"></a><span id="l56.37" class="difflineminus">- * the provisions above, a recipient may use your version of this file under</span>
<a href="#l56.38"></a><span id="l56.38" class="difflineminus">- * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l56.39"></a><span id="l56.39" class="difflineminus">- *</span>
<a href="#l56.40"></a><span id="l56.40" class="difflineminus">- * ***** END LICENSE BLOCK ***** */</span>
<a href="#l56.41"></a><span id="l56.41" class="difflineminus">-</span>
<a href="#l56.42"></a><span id="l56.42" class="difflineminus">-/*</span>
<a href="#l56.43"></a><span id="l56.43" class="difflineminus">- * This file is intended to allow for an easy synchronous interface to </span>
<a href="#l56.44"></a><span id="l56.44" class="difflineminus">- * the LDAP methods, both for writing tests simply, and for typing at</span>
<a href="#l56.45"></a><span id="l56.45" class="difflineminus">- * a shell by hand to experiment with the LDAP XPCOM SDK.  &quot;make ldapshell&quot; in</span>
<a href="#l56.46"></a><span id="l56.46" class="difflineminus">- * mozilla/directory/xpcom/tests (or the equivalent objdir) will start a shell</span>
<a href="#l56.47"></a><span id="l56.47" class="difflineminus">- * with this code pre-loaded.</span>
<a href="#l56.48"></a><span id="l56.48" class="difflineminus">- */</span>
<a href="#l56.49"></a><span id="l56.49" class="difflineminus">-</span>
<a href="#l56.50"></a><span id="l56.50" class="difflineminus">-const C = Components;</span>
<a href="#l56.51"></a><span id="l56.51" class="difflineminus">-const Ci = C.interfaces;</span>
<a href="#l56.52"></a><span id="l56.52" class="difflineminus">-const CC = C.classes;</span>
<a href="#l56.53"></a><span id="l56.53" class="difflineminus">-const evQSvc = getService(&quot;@mozilla.org/event-queue-service;1&quot;,</span>
<a href="#l56.54"></a><span id="l56.54" class="difflineminus">-                          &quot;nsIEventQueueService&quot;);</span>
<a href="#l56.55"></a><span id="l56.55" class="difflineminus">-const evQ = evQSvc.getSpecialEventQueue(Ci.nsIEventQueueService.CURRENT_THREAD_EVENT_QUEUE);</span>
<a href="#l56.56"></a><span id="l56.56" class="difflineminus">-</span>
<a href="#l56.57"></a><span id="l56.57" class="difflineminus">-// this is necessary so that the event pump isn't used with providers which</span>
<a href="#l56.58"></a><span id="l56.58" class="difflineminus">-// call the listener before returning, since it would run forever in that case.</span>
<a href="#l56.59"></a><span id="l56.59" class="difflineminus">-var done = false;</span>
<a href="#l56.60"></a><span id="l56.60" class="difflineminus">-</span>
<a href="#l56.61"></a><span id="l56.61" class="difflineminus">-function runEventPump()</span>
<a href="#l56.62"></a><span id="l56.62" class="difflineminus">-{</span>
<a href="#l56.63"></a><span id="l56.63" class="difflineminus">-    dump(&quot;in runEventPump()\n&quot;);</span>
<a href="#l56.64"></a><span id="l56.64" class="difflineminus">-</span>
<a href="#l56.65"></a><span id="l56.65" class="difflineminus">-    if (done) { // XXX needed?</span>
<a href="#l56.66"></a><span id="l56.66" class="difflineminus">-        done = false;</span>
<a href="#l56.67"></a><span id="l56.67" class="difflineminus">-        return;</span>
<a href="#l56.68"></a><span id="l56.68" class="difflineminus">-    }</span>
<a href="#l56.69"></a><span id="l56.69" class="difflineminus">-    pumpRunning = true;</span>
<a href="#l56.70"></a><span id="l56.70" class="difflineminus">-    while (pumpRunning) {</span>
<a href="#l56.71"></a><span id="l56.71" class="difflineminus">-        evQ.processPendingEvents();</span>
<a href="#l56.72"></a><span id="l56.72" class="difflineminus">-    }</span>
<a href="#l56.73"></a><span id="l56.73" class="difflineminus">-    done = false; // XXX needed?</span>
<a href="#l56.74"></a><span id="l56.74" class="difflineminus">-    return;</span>
<a href="#l56.75"></a><span id="l56.75" class="difflineminus">-}</span>
<a href="#l56.76"></a><span id="l56.76" class="difflineminus">-</span>
<a href="#l56.77"></a><span id="l56.77" class="difflineminus">-function stopEventPump()</span>
<a href="#l56.78"></a><span id="l56.78" class="difflineminus">-{</span>
<a href="#l56.79"></a><span id="l56.79" class="difflineminus">-    pumpRunning = false;</span>
<a href="#l56.80"></a><span id="l56.80" class="difflineminus">-}</span>
<a href="#l56.81"></a><span id="l56.81" class="difflineminus">-</span>
<a href="#l56.82"></a><span id="l56.82" class="difflineminus">-// I wonder how many copies of this are floating around</span>
<a href="#l56.83"></a><span id="l56.83" class="difflineminus">-function findErr(result)</span>
<a href="#l56.84"></a><span id="l56.84" class="difflineminus">-{</span>
<a href="#l56.85"></a><span id="l56.85" class="difflineminus">-    for (var i in C.results) {</span>
<a href="#l56.86"></a><span id="l56.86" class="difflineminus">-        if (C.results[i] == result) {</span>
<a href="#l56.87"></a><span id="l56.87" class="difflineminus">-            return i;</span>
<a href="#l56.88"></a><span id="l56.88" class="difflineminus">-        }</span>
<a href="#l56.89"></a><span id="l56.89" class="difflineminus">-    }</span>
<a href="#l56.90"></a><span id="l56.90" class="difflineminus">-    dump(&quot;No result code found for &quot; + result + &quot;\n&quot;);</span>
<a href="#l56.91"></a><span id="l56.91" class="difflineminus">-}</span>
<a href="#l56.92"></a><span id="l56.92" class="difflineminus">-// I wonder how many copies of this are floating around</span>
<a href="#l56.93"></a><span id="l56.93" class="difflineminus">-function findIface(iface)</span>
<a href="#l56.94"></a><span id="l56.94" class="difflineminus">-{</span>
<a href="#l56.95"></a><span id="l56.95" class="difflineminus">-    for (var i in Ci) {</span>
<a href="#l56.96"></a><span id="l56.96" class="difflineminus">-        if (iface.equals(Ci[i])) {</span>
<a href="#l56.97"></a><span id="l56.97" class="difflineminus">-            return i;</span>
<a href="#l56.98"></a><span id="l56.98" class="difflineminus">-        }</span>
<a href="#l56.99"></a><span id="l56.99" class="difflineminus">-    }</span>
<a href="#l56.100"></a><span id="l56.100" class="difflineminus">-    dump(&quot;No interface found for &quot; + iface + &quot;\n&quot;);</span>
<a href="#l56.101"></a><span id="l56.101" class="difflineminus">-}</span>
<a href="#l56.102"></a><span id="l56.102" class="difflineminus">-</span>
<a href="#l56.103"></a><span id="l56.103" class="difflineminus">-function findMsgTypeName(type)</span>
<a href="#l56.104"></a><span id="l56.104" class="difflineminus">-{</span>
<a href="#l56.105"></a><span id="l56.105" class="difflineminus">-    for (var i in Ci.nsILDAPMessage) {</span>
<a href="#l56.106"></a><span id="l56.106" class="difflineminus">-        if (type == Ci.nsILDAPMessage[i]) {</span>
<a href="#l56.107"></a><span id="l56.107" class="difflineminus">-            return i;</span>
<a href="#l56.108"></a><span id="l56.108" class="difflineminus">-        }</span>
<a href="#l56.109"></a><span id="l56.109" class="difflineminus">-    }</span>
<a href="#l56.110"></a><span id="l56.110" class="difflineminus">-    dump(&quot;message type &quot; + op + &quot;unknown\n&quot;);</span>
<a href="#l56.111"></a><span id="l56.111" class="difflineminus">-}</span>
<a href="#l56.112"></a><span id="l56.112" class="difflineminus">-</span>
<a href="#l56.113"></a><span id="l56.113" class="difflineminus">-function findLDAPErr(err)</span>
<a href="#l56.114"></a><span id="l56.114" class="difflineminus">-{</span>
<a href="#l56.115"></a><span id="l56.115" class="difflineminus">-    for (var i in Ci.nsILDAPErrors) {</span>
<a href="#l56.116"></a><span id="l56.116" class="difflineminus">-        if (err == Ci.nsILDAPErrors[i]) {</span>
<a href="#l56.117"></a><span id="l56.117" class="difflineminus">-            return i;</span>
<a href="#l56.118"></a><span id="l56.118" class="difflineminus">-        }</span>
<a href="#l56.119"></a><span id="l56.119" class="difflineminus">-    }</span>
<a href="#l56.120"></a><span id="l56.120" class="difflineminus">-    dump(&quot;ldap error &quot; + err + &quot;unknown\n&quot;);</span>
<a href="#l56.121"></a><span id="l56.121" class="difflineminus">-}</span>
<a href="#l56.122"></a><span id="l56.122" class="difflineminus">-</span>
<a href="#l56.123"></a><span id="l56.123" class="difflineminus">-function getService(contract, iface)</span>
<a href="#l56.124"></a><span id="l56.124" class="difflineminus">-{</span>
<a href="#l56.125"></a><span id="l56.125" class="difflineminus">-    return C.classes[contract].getService(Ci[iface]);</span>
<a href="#l56.126"></a><span id="l56.126" class="difflineminus">-}</span>
<a href="#l56.127"></a><span id="l56.127" class="difflineminus">-</span>
<a href="#l56.128"></a><span id="l56.128" class="difflineminus">-function createInstance(contract, iface)</span>
<a href="#l56.129"></a><span id="l56.129" class="difflineminus">-{</span>
<a href="#l56.130"></a><span id="l56.130" class="difflineminus">-    return C.classes[contract].createInstance(Ci[iface]);</span>
<a href="#l56.131"></a><span id="l56.131" class="difflineminus">-}</span>
<a href="#l56.132"></a><span id="l56.132" class="difflineminus">-</span>
<a href="#l56.133"></a><span id="l56.133" class="difflineminus">-function ldapMsgListener() {</span>
<a href="#l56.134"></a><span id="l56.134" class="difflineminus">-}</span>
<a href="#l56.135"></a><span id="l56.135" class="difflineminus">-ldapMsgListener.prototype = </span>
<a href="#l56.136"></a><span id="l56.136" class="difflineminus">-{</span>
<a href="#l56.137"></a><span id="l56.137" class="difflineminus">-    mStatus: null,</span>
<a href="#l56.138"></a><span id="l56.138" class="difflineminus">-</span>
<a href="#l56.139"></a><span id="l56.139" class="difflineminus">-    QueryInterface: function QI(iid) {</span>
<a href="#l56.140"></a><span id="l56.140" class="difflineminus">-        if (iid.equals(Components.interfaces.nsISupports) ||</span>
<a href="#l56.141"></a><span id="l56.141" class="difflineminus">-            iid.equals(Components.interfaces.nsILDAPMessageListener))</span>
<a href="#l56.142"></a><span id="l56.142" class="difflineminus">-            return this;</span>
<a href="#l56.143"></a><span id="l56.143" class="difflineminus">-</span>
<a href="#l56.144"></a><span id="l56.144" class="difflineminus">-        throw Components.results.NS_ERROR_NO_INTERFACE;</span>
<a href="#l56.145"></a><span id="l56.145" class="difflineminus">-    },</span>
<a href="#l56.146"></a><span id="l56.146" class="difflineminus">-</span>
<a href="#l56.147"></a><span id="l56.147" class="difflineminus">-    onLDAPInit: function onLDAPInit(aConn, aStatus) {</span>
<a href="#l56.148"></a><span id="l56.148" class="difflineminus">-        stopEventPump();</span>
<a href="#l56.149"></a><span id="l56.149" class="difflineminus">-</span>
<a href="#l56.150"></a><span id="l56.150" class="difflineminus">-        mStatus = aStatus;</span>
<a href="#l56.151"></a><span id="l56.151" class="difflineminus">-        if (!C.isSuccessCode(aStatus)) {</span>
<a href="#l56.152"></a><span id="l56.152" class="difflineminus">-            throw aStatus;</span>
<a href="#l56.153"></a><span id="l56.153" class="difflineminus">-        }</span>
<a href="#l56.154"></a><span id="l56.154" class="difflineminus">-</span>
<a href="#l56.155"></a><span id="l56.155" class="difflineminus">-        dump(&quot;connection initialized successfully!\n&quot;);</span>
<a href="#l56.156"></a><span id="l56.156" class="difflineminus">-        return;</span>
<a href="#l56.157"></a><span id="l56.157" class="difflineminus">-    },</span>
<a href="#l56.158"></a><span id="l56.158" class="difflineminus">-</span>
<a href="#l56.159"></a><span id="l56.159" class="difflineminus">-    onLDAPMessage: function onLDAPMessage(aMsg) {</span>
<a href="#l56.160"></a><span id="l56.160" class="difflineminus">-</span>
<a href="#l56.161"></a><span id="l56.161" class="difflineminus">-        dump(findMsgTypeName(aMsg.type) + &quot; received; &quot;);</span>
<a href="#l56.162"></a><span id="l56.162" class="difflineminus">-</span>
<a href="#l56.163"></a><span id="l56.163" class="difflineminus">-        if (aMsg.type == 0x64) {</span>
<a href="#l56.164"></a><span id="l56.164" class="difflineminus">-            dump(&quot;dn: &quot; + aMsg.dn);</span>
<a href="#l56.165"></a><span id="l56.165" class="difflineminus">-</span>
<a href="#l56.166"></a><span id="l56.166" class="difflineminus">-            // if this is just a search entry, don't stop the pump, since</span>
<a href="#l56.167"></a><span id="l56.167" class="difflineminus">-            // the result won't have arrived yet</span>
<a href="#l56.168"></a><span id="l56.168" class="difflineminus">-</span>
<a href="#l56.169"></a><span id="l56.169" class="difflineminus">-        } else{</span>
<a href="#l56.170"></a><span id="l56.170" class="difflineminus">-            dump(&quot;errorCode: &quot; + findLDAPErr(aMsg.errorCode));</span>
<a href="#l56.171"></a><span id="l56.171" class="difflineminus">-            stopEventPump();</span>
<a href="#l56.172"></a><span id="l56.172" class="difflineminus">-        }</span>
<a href="#l56.173"></a><span id="l56.173" class="difflineminus">-</span>
<a href="#l56.174"></a><span id="l56.174" class="difflineminus">-        dump(&quot;\n&quot;);</span>
<a href="#l56.175"></a><span id="l56.175" class="difflineminus">-</span>
<a href="#l56.176"></a><span id="l56.176" class="difflineminus">-        mMessage = aMsg;</span>
<a href="#l56.177"></a><span id="l56.177" class="difflineminus">-        return;</span>
<a href="#l56.178"></a><span id="l56.178" class="difflineminus">-    }</span>
<a href="#l56.179"></a><span id="l56.179" class="difflineminus">-}</span>
<a href="#l56.180"></a><span id="l56.180" class="difflineminus">-</span>
<a href="#l56.181"></a><span id="l56.181" class="difflineminus">-function createProxiedLdapListener() {</span>
<a href="#l56.182"></a><span id="l56.182" class="difflineminus">-</span>
<a href="#l56.183"></a><span id="l56.183" class="difflineminus">-    var l = new ldapMsgListener();</span>
<a href="#l56.184"></a><span id="l56.184" class="difflineminus">-</span>
<a href="#l56.185"></a><span id="l56.185" class="difflineminus">-    /*</span>
<a href="#l56.186"></a><span id="l56.186" class="difflineminus">-    var uiQueue = evqSvc.getSpecialEventQueue(Components.interfaces.</span>
<a href="#l56.187"></a><span id="l56.187" class="difflineminus">-                                              nsIEventQueueService.</span>
<a href="#l56.188"></a><span id="l56.188" class="difflineminus">-                                              UI_THREAD_EVENT_QUEUE);</span>
<a href="#l56.189"></a><span id="l56.189" class="difflineminus">-    */</span>
<a href="#l56.190"></a><span id="l56.190" class="difflineminus">-    var proxyMgr = getService(&quot;@mozilla.org/xpcomproxy;1&quot;,</span>
<a href="#l56.191"></a><span id="l56.191" class="difflineminus">-                                  &quot;nsIProxyObjectManager&quot;);</span>
<a href="#l56.192"></a><span id="l56.192" class="difflineminus">-</span>
<a href="#l56.193"></a><span id="l56.193" class="difflineminus">-    dump(&quot;about to get proxy\n&quot;);</span>
<a href="#l56.194"></a><span id="l56.194" class="difflineminus">-</span>
<a href="#l56.195"></a><span id="l56.195" class="difflineminus">-    return proxyMgr.getProxyForObject(evQ, Components.interfaces.</span>
<a href="#l56.196"></a><span id="l56.196" class="difflineminus">-                                      nsILDAPMessageListener, l, 5);</span>
<a href="#l56.197"></a><span id="l56.197" class="difflineminus">-    // 5 == PROXY_ALWAYS | PROXY_SYNC</span>
<a href="#l56.198"></a><span id="l56.198" class="difflineminus">-}</span>
<a href="#l56.199"></a><span id="l56.199" class="difflineminus">-</span>
<a href="#l56.200"></a><span id="l56.200" class="difflineminus">-const ioSvc = getService(&quot;@mozilla.org/network/io-service;1&quot;, &quot;nsIIOService&quot;);</span>
<a href="#l56.201"></a><span id="l56.201" class="difflineminus">- </span>
<a href="#l56.202"></a><span id="l56.202" class="difflineminus">-function URLFromSpec(spec)</span>
<a href="#l56.203"></a><span id="l56.203" class="difflineminus">-{</span>
<a href="#l56.204"></a><span id="l56.204" class="difflineminus">-    return ioSvc.newURI(spec, null, null);</span>
<a href="#l56.205"></a><span id="l56.205" class="difflineminus">-}</span>
<a href="#l56.206"></a><span id="l56.206" class="difflineminus">-</span>
<a href="#l56.207"></a><span id="l56.207" class="difflineminus">-/**</span>
<a href="#l56.208"></a><span id="l56.208" class="difflineminus">- * convenience method for setting up the global connection &quot;conn&quot;</span>
<a href="#l56.209"></a><span id="l56.209" class="difflineminus">- */</span>
<a href="#l56.210"></a><span id="l56.210" class="difflineminus">-var conn;</span>
<a href="#l56.211"></a><span id="l56.211" class="difflineminus">-function createConn(host, port, bindname) {</span>
<a href="#l56.212"></a><span id="l56.212" class="difflineminus">-    </span>
<a href="#l56.213"></a><span id="l56.213" class="difflineminus">-    dump(&quot;in createConn\n&quot;);</span>
<a href="#l56.214"></a><span id="l56.214" class="difflineminus">-</span>
<a href="#l56.215"></a><span id="l56.215" class="difflineminus">-    conn = createInstance(&quot;@mozilla.org/network/ldap-connection;1&quot;, </span>
<a href="#l56.216"></a><span id="l56.216" class="difflineminus">-                          &quot;nsILDAPConnection&quot;);</span>
<a href="#l56.217"></a><span id="l56.217" class="difflineminus">-</span>
<a href="#l56.218"></a><span id="l56.218" class="difflineminus">-    try { </span>
<a href="#l56.219"></a><span id="l56.219" class="difflineminus">-        var listener = createProxiedLdapListener();</span>
<a href="#l56.220"></a><span id="l56.220" class="difflineminus">-    } catch (ex) {</span>
<a href="#l56.221"></a><span id="l56.221" class="difflineminus">-        dump(&quot;exception &quot; + ex + &quot;caught\n&quot;);</span>
<a href="#l56.222"></a><span id="l56.222" class="difflineminus">-    }</span>
<a href="#l56.223"></a><span id="l56.223" class="difflineminus">-</span>
<a href="#l56.224"></a><span id="l56.224" class="difflineminus">-    dump(&quot;about to call conn.init\n&quot;);</span>
<a href="#l56.225"></a><span id="l56.225" class="difflineminus">-    conn.init(host, port, false, bindname, listener, null, 3);</span>
<a href="#l56.226"></a><span id="l56.226" class="difflineminus">-</span>
<a href="#l56.227"></a><span id="l56.227" class="difflineminus">-    dump(&quot;about to call runEventPump\n&quot;);</span>
<a href="#l56.228"></a><span id="l56.228" class="difflineminus">-    runEventPump();</span>
<a href="#l56.229"></a><span id="l56.229" class="difflineminus">-}</span>
<a href="#l56.230"></a><span id="l56.230" class="difflineminus">-</span>
<a href="#l56.231"></a><span id="l56.231" class="difflineminus">-function jsArrayToMutableArray(a)</span>
<a href="#l56.232"></a><span id="l56.232" class="difflineminus">-{</span>
<a href="#l56.233"></a><span id="l56.233" class="difflineminus">-    var mArray = createInstance(&quot;@mozilla.org/array;1&quot;, &quot;nsIMutableArray&quot;);</span>
<a href="#l56.234"></a><span id="l56.234" class="difflineminus">-</span>
<a href="#l56.235"></a><span id="l56.235" class="difflineminus">-    for each ( i in a ) {</span>
<a href="#l56.236"></a><span id="l56.236" class="difflineminus">-        mArray.appendElement(i, false);</span>
<a href="#l56.237"></a><span id="l56.237" class="difflineminus">-    }</span>
<a href="#l56.238"></a><span id="l56.238" class="difflineminus">-</span>
<a href="#l56.239"></a><span id="l56.239" class="difflineminus">-    return mArray;</span>
<a href="#l56.240"></a><span id="l56.240" class="difflineminus">-}</span>
<a href="#l56.241"></a><span id="l56.241" class="difflineminus">-</span>
<a href="#l56.242"></a><span id="l56.242" class="difflineminus">-/**</span>
<a href="#l56.243"></a><span id="l56.243" class="difflineminus">- * convenience wrappers around various nsILDAPOperation methods so that shell </span>
<a href="#l56.244"></a><span id="l56.244" class="difflineminus">- * callers don't have to deal with lots of async and objectivity</span>
<a href="#l56.245"></a><span id="l56.245" class="difflineminus">- */</span>
<a href="#l56.246"></a><span id="l56.246" class="difflineminus">-function simpleBind(passwd)</span>
<a href="#l56.247"></a><span id="l56.247" class="difflineminus">-{</span>
<a href="#l56.248"></a><span id="l56.248" class="difflineminus">-    var op = createInstance(&quot;@mozilla.org/network/ldap-operation;1&quot;,</span>
<a href="#l56.249"></a><span id="l56.249" class="difflineminus">-                            &quot;nsILDAPOperation&quot;);</span>
<a href="#l56.250"></a><span id="l56.250" class="difflineminus">-</span>
<a href="#l56.251"></a><span id="l56.251" class="difflineminus">-    var listener = createProxiedLdapListener();</span>
<a href="#l56.252"></a><span id="l56.252" class="difflineminus">-    op.init(conn, listener, null);</span>
<a href="#l56.253"></a><span id="l56.253" class="difflineminus">-</span>
<a href="#l56.254"></a><span id="l56.254" class="difflineminus">-    op.simpleBind(passwd);</span>
<a href="#l56.255"></a><span id="l56.255" class="difflineminus">-    runEventPump();</span>
<a href="#l56.256"></a><span id="l56.256" class="difflineminus">-}</span>
<a href="#l56.257"></a><span id="l56.257" class="difflineminus">-</span>
<a href="#l56.258"></a><span id="l56.258" class="difflineminus">-function searchExt(basedn, scope, filter, serverControls, clientControls)</span>
<a href="#l56.259"></a><span id="l56.259" class="difflineminus">-{</span>
<a href="#l56.260"></a><span id="l56.260" class="difflineminus">-    var op = createInstance(&quot;@mozilla.org/network/ldap-operation;1&quot;,</span>
<a href="#l56.261"></a><span id="l56.261" class="difflineminus">-                            &quot;nsILDAPOperation&quot;);</span>
<a href="#l56.262"></a><span id="l56.262" class="difflineminus">-</span>
<a href="#l56.263"></a><span id="l56.263" class="difflineminus">-    var listener = createProxiedLdapListener();</span>
<a href="#l56.264"></a><span id="l56.264" class="difflineminus">-    op.init(conn, listener, null);</span>
<a href="#l56.265"></a><span id="l56.265" class="difflineminus">-</span>
<a href="#l56.266"></a><span id="l56.266" class="difflineminus">-    op.serverControls = jsArrayToMutableArray(serverControls);</span>
<a href="#l56.267"></a><span id="l56.267" class="difflineminus">-    op.clientControls = jsArrayToMutableArray(clientControls);</span>
<a href="#l56.268"></a><span id="l56.268" class="difflineminus">-    op.searchExt(basedn, scope, filter, null, null, 0, 0);</span>
<a href="#l56.269"></a><span id="l56.269" class="difflineminus">-    dump(&quot;searchExt sent\n&quot;);</span>
<a href="#l56.270"></a><span id="l56.270" class="difflineminus">-    runEventPump();</span>
<a href="#l56.271"></a><span id="l56.271" class="difflineminus">-}</span>
<a href="#l56.272"></a><span id="l56.272" class="difflineminus">-</span>
<a href="#l56.273"></a><span id="l56.273" class="difflineminus">-dump(&quot;ldapshell loaded\n&quot;);</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

