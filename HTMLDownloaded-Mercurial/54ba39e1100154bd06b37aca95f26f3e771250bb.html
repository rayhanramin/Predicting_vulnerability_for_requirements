<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 20083:54ba39e1100154bd06b37aca95f26f3e771250bb</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 54ba39e1100154bd06b37aca95f26f3e771250bb" />
<meta property="og:url" content="/comm-central/rev/54ba39e1100154bd06b37aca95f26f3e771250bb" />
<meta property="og:description" content="Bug 1280898 - Set up eslint for calendar files - enable no-useless-escape rule. r=MakeMyDay" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 54ba39e1100154bd06b37aca95f26f3e771250bb 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/54ba39e1100154bd06b37aca95f26f3e771250bb">shortlog</a> |
<a href="/comm-central/log/54ba39e1100154bd06b37aca95f26f3e771250bb">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/54ba39e1100154bd06b37aca95f26f3e771250bb">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/54ba39e1100154bd06b37aca95f26f3e771250bb">files</a> |
changeset |
<a href="/comm-central/raw-rev/54ba39e1100154bd06b37aca95f26f3e771250bb">raw</a>  | <a href="/comm-central/archive/54ba39e1100154bd06b37aca95f26f3e771250bb.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">Bug 1280898</a> - Set up eslint for calendar files - enable no-useless-escape rule. r=MakeMyDay
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#101;&#115;&#108;&#105;&#110;&#116;&#32;&#60;&#101;&#115;&#108;&#105;&#110;&#116;&#64;&#98;&#117;&#103;&#122;&#105;&#108;&#108;&#97;&#46;&#107;&#101;&#119;&#105;&#115;&#46;&#99;&#104;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 08 Jul 2016 14:10:00 +0200</td></tr>

<tr>
 <td>changeset 20083</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/54ba39e1100154bd06b37aca95f26f3e771250bb">54ba39e1100154bd06b37aca95f26f3e771250bb</a></td>
</tr>



<tr>
<td>parent 20082</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/a67fcf52bf1fc8cb96f811c1fc9e334d0bb7cfb0">a67fcf52bf1fc8cb96f811c1fc9e334d0bb7cfb0</a>
</td>
</tr>

<tr>
<td>child 20084</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/f9a68cf569d341c8eb707d0b9715aeddf893f957">f9a68cf569d341c8eb707d0b9715aeddf893f957</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=54ba39e1100154bd06b37aca95f26f3e771250bb">12310</a></td></tr>
<tr><td>push user</td><td>mozilla@kewis.ch</td></tr>
<tr><td>push date</td><td class="date age">Sat, 17 Sep 2016 23:32:52 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@d0755bd52da8 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=d0755bd52da8189fbed8fa4b7496f29bc1854289">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=d0755bd52da8189fbed8fa4b7496f29bc1854289&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=d0755bd52da8189fbed8fa4b7496f29bc1854289&newProject=comm-central&newRevision=289338a394d31814b30269ba6752035e303e04a3&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=d0755bd52da8189fbed8fa4b7496f29bc1854289&newProject=comm-central&newRevision=289338a394d31814b30269ba6752035e303e04a3&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=d0755bd52da8189fbed8fa4b7496f29bc1854289&newProject=comm-central&newRevision=289338a394d31814b30269ba6752035e303e04a3&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28MakeMyDay%29&revcount=50">MakeMyDay</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">1280898</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">Bug 1280898</a> - Set up eslint for calendar files - enable no-useless-escape rule. r=MakeMyDay

MozReview-Commit-ID: 1yAW42ENqce</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/.eslintrc">calendar/.eslintrc</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/.eslintrc">file</a> |
<a href="/comm-central/annotate/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/.eslintrc">annotate</a> |
<a href="/comm-central/diff/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/.eslintrc">diff</a> |
<a href="/comm-central/comparison/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/.eslintrc">comparison</a> |
<a href="/comm-central/log/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/.eslintrc">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/base/src/calCalendarManager.js">calendar/base/src/calCalendarManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/base/src/calCalendarManager.js">file</a> |
<a href="/comm-central/annotate/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/base/src/calCalendarManager.js">annotate</a> |
<a href="/comm-central/diff/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/base/src/calCalendarManager.js">diff</a> |
<a href="/comm-central/comparison/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/base/src/calCalendarManager.js">comparison</a> |
<a href="/comm-central/log/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/base/src/calCalendarManager.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/providers/wcap/calWcapCalendarItems.js">calendar/providers/wcap/calWcapCalendarItems.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/providers/wcap/calWcapCalendarItems.js">file</a> |
<a href="/comm-central/annotate/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/providers/wcap/calWcapCalendarItems.js">annotate</a> |
<a href="/comm-central/diff/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/providers/wcap/calWcapCalendarItems.js">diff</a> |
<a href="/comm-central/comparison/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/providers/wcap/calWcapCalendarItems.js">comparison</a> |
<a href="/comm-central/log/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/providers/wcap/calWcapCalendarItems.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/providers/wcap/calWcapErrors.js">calendar/providers/wcap/calWcapErrors.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/providers/wcap/calWcapErrors.js">file</a> |
<a href="/comm-central/annotate/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/providers/wcap/calWcapErrors.js">annotate</a> |
<a href="/comm-central/diff/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/providers/wcap/calWcapErrors.js">diff</a> |
<a href="/comm-central/comparison/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/providers/wcap/calWcapErrors.js">comparison</a> |
<a href="/comm-central/log/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/providers/wcap/calWcapErrors.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/test/unit/test_ltninvitationutils.js">calendar/test/unit/test_ltninvitationutils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/test/unit/test_ltninvitationutils.js">file</a> |
<a href="/comm-central/annotate/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/test/unit/test_ltninvitationutils.js">annotate</a> |
<a href="/comm-central/diff/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/test/unit/test_ltninvitationutils.js">diff</a> |
<a href="/comm-central/comparison/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/test/unit/test_ltninvitationutils.js">comparison</a> |
<a href="/comm-central/log/54ba39e1100154bd06b37aca95f26f3e771250bb/calendar/test/unit/test_ltninvitationutils.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/.eslintrc</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/.eslintrc</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -395,13 +395,16 @@</span>
<a href="#l1.4"></a><span id="l1.4">     &quot;object-property-newline&quot;: [2, { &quot;allowMultiplePropertiesPerLine&quot;: true }],</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6">     // Enforce consistent line breaks inside braces</span>
<a href="#l1.7"></a><span id="l1.7">     &quot;object-curly-newline&quot;: [2, { &quot;multiline&quot;: true }],</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9">     // Disallow whitespace before properties</span>
<a href="#l1.10"></a><span id="l1.10">     &quot;no-whitespace-before-property&quot;: 2,</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+    // Disallow unnecessary escape usage</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    &quot;no-useless-escape&quot;: 2,</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+</span>
<a href="#l1.15"></a><span id="l1.15">     // The following rules will not be enabled currently, but are kept here for</span>
<a href="#l1.16"></a><span id="l1.16">     // easier updates in the future.</span>
<a href="#l1.17"></a><span id="l1.17">     &quot;no-else-return&quot;: 0,</span>
<a href="#l1.18"></a><span id="l1.18">   }</span>
<a href="#l1.19"></a><span id="l1.19"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/src/calCalendarManager.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/src/calCalendarManager.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -122,17 +122,17 @@ calCalendarManager.prototype = {</span>
<a href="#l2.4"></a><span id="l2.4">                         let authHeader = channel.getResponseHeader(&quot;WWW-Authenticate&quot;);</span>
<a href="#l2.5"></a><span id="l2.5">                         let calendar = channel.notificationCallbacks</span>
<a href="#l2.6"></a><span id="l2.6">                                               .getInterface(Components.interfaces.calICalendar);</span>
<a href="#l2.7"></a><span id="l2.7">                         if (calendar &amp;&amp; !calendar.getProperty(&quot;capabilities.realmrewrite.disabled&quot;)) {</span>
<a href="#l2.8"></a><span id="l2.8">                             // The provider may choose to explicitly disable the</span>
<a href="#l2.9"></a><span id="l2.9">                             // rewriting, for example if all calendars on a</span>
<a href="#l2.10"></a><span id="l2.10">                             // domain have the same credentials</span>
<a href="#l2.11"></a><span id="l2.11">                             let escapedName = calendar.name.replace(/\\/g, &quot;\\\\&quot;)</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-                                                           .replace(/\&quot;/g, '\\&quot;');</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+                                                           .replace(/&quot;/g, '\\&quot;');</span>
<a href="#l2.14"></a><span id="l2.14">                             authHeader = appendToRealm(authHeader, &quot;(&quot; + escapedName + &quot;)&quot;);</span>
<a href="#l2.15"></a><span id="l2.15">                             channel.setResponseHeader(&quot;WWW-Authenticate&quot;, authHeader, false);</span>
<a href="#l2.16"></a><span id="l2.16">                         }</span>
<a href="#l2.17"></a><span id="l2.17">                     }</span>
<a href="#l2.18"></a><span id="l2.18">                 } catch (e) {</span>
<a href="#l2.19"></a><span id="l2.19">                     if (e.result != Components.results.NS_NOINTERFACE &amp;&amp;</span>
<a href="#l2.20"></a><span id="l2.20">                         e.result != Components.results.NS_ERROR_NOT_AVAILABLE) {</span>
<a href="#l2.21"></a><span id="l2.21">                         throw e;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/providers/wcap/calWcapCalendarItems.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/providers/wcap/calWcapCalendarItems.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -55,17 +55,17 @@ calWcapCalendar.prototype.getRecurrenceP</span>
<a href="#l3.4"></a><span id="l3.4">                 // cs does not accept DATEs here:</span>
<a href="#l3.5"></a><span id="l3.5">                 if (isNeg) {</span>
<a href="#l3.6"></a><span id="l3.6">                     out_exdates.value.push(getIcalUTC(ensureDateTime(rDateInstance.date)));</span>
<a href="#l3.7"></a><span id="l3.7">                 } else {</span>
<a href="#l3.8"></a><span id="l3.8">                     out_rdates.value.push(getIcalUTC(ensureDateTime(rDateInstance.date)));</span>
<a href="#l3.9"></a><span id="l3.9">                 }</span>
<a href="#l3.10"></a><span id="l3.10">             } else {</span>
<a href="#l3.11"></a><span id="l3.11">                 this.notifyError(NS_ERROR_UNEXPECTED,</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-                                 &quot;don\'t know how to handle this recurrence item: &quot; + rItem.valueAsIcalString);</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+                                 &quot;don't know how to handle this recurrence item: &quot; + rItem.valueAsIcalString);</span>
<a href="#l3.14"></a><span id="l3.14">             }</span>
<a href="#l3.15"></a><span id="l3.15">         }</span>
<a href="#l3.16"></a><span id="l3.16">     }</span>
<a href="#l3.17"></a><span id="l3.17"> };</span>
<a href="#l3.18"></a><span id="l3.18"> </span>
<a href="#l3.19"></a><span id="l3.19"> function sameStringSet(list, list_) {</span>
<a href="#l3.20"></a><span id="l3.20">     return list.length == list_.length &amp;&amp;</span>
<a href="#l3.21"></a><span id="l3.21">            list.every(x =&gt; list_.some(y =&gt; x == y));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/providers/wcap/calWcapErrors.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/providers/wcap/calWcapErrors.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -166,38 +166,38 @@ var g_wcapErrorCodes = [</span>
<a href="#l4.4"></a><span id="l4.4">     /* 38 */ calIWcapErrors.WCAP_CALID_NOT_SPECIFIED, &quot;Calendar ID was not specified.&quot;,</span>
<a href="#l4.5"></a><span id="l4.5">     /* 39 */ calIWcapErrors.WCAP_GET_FREEBUSY_FAILED, &quot;WCAP_GET_FREEBUSY_FAILED&quot;,</span>
<a href="#l4.6"></a><span id="l4.6">     /* 40 */ calIWcapErrors.WCAP_STORE_FAILED_DOUBLE_BOOKED, &quot;If double booking is not allowed in this calendar, storeevents.wcap fails with this error when attempting to store an event in a time slot that was already filled.&quot;,</span>
<a href="#l4.7"></a><span id="l4.7">     /* 41 */ calIWcapErrors.WCAP_FETCH_BY_ALARM_RANGE_FAILED, &quot;WCAP_FETCH_BY_ALARM_RANGE_FAILED&quot;,</span>
<a href="#l4.8"></a><span id="l4.8">     /* 42 */ calIWcapErrors.WCAP_FETCH_BY_ATTENDEE_ERROR_FAILED, &quot;WCAP_FETCH_BY_ATTENDEE_ERROR_FAILED&quot;,</span>
<a href="#l4.9"></a><span id="l4.9">     /* 43 */ calIWcapErrors.WCAP_ATTENDEE_GROUP_EXPANSION_CLIPPED, &quot;An LDAP group being expanded was too large and exceeded the maximum number allowed in an expansion. The expansion stopped at the specified maximum limit. The maximum limit defaults to 200. To change the maximum limit, set the server configuration preference calstore.group.attendee.maxsize.&quot;,</span>
<a href="#l4.10"></a><span id="l4.10">     /* 44 */ calIWcapErrors.WCAP_USERPREFS_ACCESS_DENIED, &quot;Either the server does not allow this administrator access to get or modify user preferences, or the requester is not an administrator.&quot;,</span>
<a href="#l4.11"></a><span id="l4.11">     /* 45 */ calIWcapErrors.WCAP_NOT_ALLOWED_TO_REQUEST_PUBLISH, &quot;The requester was not an organizer of the event, and, therefore, is not allowed to edit the component using the PUBLISH or REQUEST method.&quot;,</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-    /* 46 */ calIWcapErrors.WCAP_INSUFFICIENT_PARAMETERS, &quot;The caller tried to invoke verifyevents_by_ids.wcap, or verifytodos_by_ids.wcap with insufficient arguments (mismatched number of uid’s and rid’s).&quot;,</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+    /* 46 */ calIWcapErrors.WCAP_INSUFFICIENT_PARAMETERS, &quot;The caller tried to invoke verifyevents_by_ids.wcap, or verifytodos_by_ids.wcap with insufficient arguments (mismatched number of uid's and rid's).&quot;,</span>
<a href="#l4.14"></a><span id="l4.14">     /* 47 */ calIWcapErrors.WCAP_MUSTBEOWNER_OPERATION, &quot;The user needs to be an owner or co-owner of the calendar in questions to complete this operation. (Probably related to private or confidential component.)&quot;,</span>
<a href="#l4.15"></a><span id="l4.15">     /* 48 */ calIWcapErrors.WCAP_DWP_CONNECTION_FAILED, &quot;GSE scheduling engine failed to make connection to DWP.&quot;,</span>
<a href="#l4.16"></a><span id="l4.16">     /* 49 */ calIWcapErrors.WCAP_DWP_MAX_CONNECTION_REACHED, &quot;Reached the maximum number of connections. When some of the connections are freed, users can successfully connect. Same as error 11001.&quot;,</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineminus">-    /* 50 */ calIWcapErrors.WCAP_DWP_CANNOT_RESOLVE_CALENDAR, &quot;Front end can’t resolve to a particular back end. Same as error 11002.&quot;,</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+    /* 50 */ calIWcapErrors.WCAP_DWP_CANNOT_RESOLVE_CALENDAR, &quot;Front end can't resolve to a particular back end. Same as error 11002.&quot;,</span>
<a href="#l4.19"></a><span id="l4.19">     /* 51 */ calIWcapErrors.WCAP_DWP_BAD_DATA, &quot;Generic response. Check all DWP servers. One might be down. Same as error 11003.&quot;,</span>
<a href="#l4.20"></a><span id="l4.20">     /* 52 */ calIWcapErrors.WCAP_BAD_COMMAND, &quot;The command sent in was not recognized. This is an internal only error code. It should not appear in the error logs.&quot;,</span>
<a href="#l4.21"></a><span id="l4.21">     /* 53 */ calIWcapErrors.WCAP_NOT_FOUND, &quot;Returned for all errors from a write to the Berkeley DB. This is an internal only error code. It should not appear in the error logs.&quot;,</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineminus">-    /* 54 */ calIWcapErrors.WCAP_WRITE_IMPORT_CANT_EXPAND_CALID, &quot;Can’t expand calid when importing file.&quot;,</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineplus">+    /* 54 */ calIWcapErrors.WCAP_WRITE_IMPORT_CANT_EXPAND_CALID, &quot;Can't expand calid when importing file.&quot;,</span>
<a href="#l4.24"></a><span id="l4.24">     /* 55 */ calIWcapErrors.WCAP_GETTIME_FAILED, &quot;Get server time failed.&quot;,</span>
<a href="#l4.25"></a><span id="l4.25">     /* 56 */ calIWcapErrors.WCAP_FETCH_DELETEDCOMPONENTS_FAILED, &quot;fetch_deletedcomponents.wcap failed.&quot;,</span>
<a href="#l4.26"></a><span id="l4.26">     /* 57 */ calIWcapErrors.WCAP_FETCH_DELETEDCOMPONENTS_PARTIAL_RESULT, &quot;Success but partial result.&quot;,</span>
<a href="#l4.27"></a><span id="l4.27">     /* 58 */ calIWcapErrors.WCAP_WCAP_NO_SUCH_FORMAT, &quot;Returned in any of the commands when supplied fmt-out is not a supported format.&quot;,</span>
<a href="#l4.28"></a><span id="l4.28">     /* 59 */ calIWcapErrors.WCAP_COMPONENT_NOT_FOUND, &quot;Returned when a fetch or delete is attempted that does not exist.&quot;,</span>
<a href="#l4.29"></a><span id="l4.29">     /* 60 */ calIWcapErrors.WCAP_BAD_ARGUMENTS, &quot;Currently used when attendee or organizer specified does not have a valid email address.&quot;,</span>
<a href="#l4.30"></a><span id="l4.30">     /* 61 */ calIWcapErrors.WCAP_GET_USERPREFS_FAILED, &quot;get_userprefs.wcap failed. The following error conditions returns error code 61: LDAP access denied, no results found, LDAP limit exceeded, LDAP connection failed.&quot;,</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">-    /* 62 */ calIWcapErrors.WCAP_WCAP_MODIFY_NO_EVENT, &quot;storeevents.wcap issued with storetype set to 2 (WCAP_STORE_TYPE_MODIFY) and the event doesn\’t exist.&quot;,</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+    /* 62 */ calIWcapErrors.WCAP_WCAP_MODIFY_NO_EVENT, &quot;storeevents.wcap issued with storetype set to 2 (WCAP_STORE_TYPE_MODIFY) and the event doesn't exist.&quot;,</span>
<a href="#l4.33"></a><span id="l4.33">     /* 63 */ calIWcapErrors.WCAP_WCAP_CREATE_EXISTS, &quot;storeevents.wcap issued with storetype set to 1 (WCAP_STORE_TYPE_CREATE) and the event already exists.&quot;,</span>
<a href="#l4.34"></a><span id="l4.34">     /* 64 */ calIWcapErrors.WCAP_WCAP_MODIFY_CANT_MAKE_COPY, &quot;storevents.wcap issued and copy of event failed during processing.&quot;,</span>
<a href="#l4.35"></a><span id="l4.35">     /* 65 */ calIWcapErrors.WCAP_STORE_FAILED_RECUR_SKIP, &quot;One instance of a recurring event skips over another.&quot;,</span>
<a href="#l4.36"></a><span id="l4.36" class="difflineminus">-    /* 66 */ calIWcapErrors.WCAP_STORE_FAILED_RECUR_SAMEDAY, &quot;Two instances of a recurring event can’t occur on the same day.&quot;,</span>
<a href="#l4.37"></a><span id="l4.37" class="difflineminus">-    /* 67 */ calIWcapErrors.WCAP_BAD_ORG_ARGUMENTS, &quot;Bad organizer arguments. orgCalid or orgEmail must be passed if any other \&quot;org\&quot; parameter is sent. That is, orgUID can’t be sent alone on a storeevents.wcap or a storetodos.wcao command if it is trying about to \&quot;create\&quot; the event or task. Note, if no \&quot;org\&quot; information is passed, the organizer defaults to the calid being passed with the command.&quot;,</span>
<a href="#l4.38"></a><span id="l4.38" class="difflineplus">+    /* 66 */ calIWcapErrors.WCAP_STORE_FAILED_RECUR_SAMEDAY, &quot;Two instances of a recurring event can't occur on the same day.&quot;,</span>
<a href="#l4.39"></a><span id="l4.39" class="difflineplus">+    /* 67 */ calIWcapErrors.WCAP_BAD_ORG_ARGUMENTS, &quot;Bad organizer arguments. orgCalid or orgEmail must be passed if any other \&quot;org\&quot; parameter is sent. That is, orgUID can't be sent alone on a storeevents.wcap or a storetodos.wcao command if it is trying about to \&quot;create\&quot; the event or task. Note, if no \&quot;org\&quot; information is passed, the organizer defaults to the calid being passed with the command.&quot;,</span>
<a href="#l4.40"></a><span id="l4.40">     /* 68 */ calIWcapErrors.WCAP_STORE_FAILED_RECUR_PRIVACY, &quot;Error returned if you try to change the privacy or transparency of a single instance in a recurring series.&quot;,</span>
<a href="#l4.41"></a><span id="l4.41">     /* 69 */ calIWcapErrors.WCAP_LDAP_ERROR, &quot;For get_calprops.wcap, when there is an error is getting LDAP derived token values (X-S1CS-CALPROPS-FB-INCLUDE, X-S1CS-CALPROPS-COMMON-NAME).&quot;,</span>
<a href="#l4.42"></a><span id="l4.42">     /* 70 */ calIWcapErrors.WCAP_GET_INVITE_COUNT_FAILED, &quot;Error in getting invite count (for get_calprops.wcap and fetchcomponents_by_range.wcap commands).&quot;,</span>
<a href="#l4.43"></a><span id="l4.43">     /* 71 */ calIWcapErrors.WCAP_LIST_FAILED, &quot;list.wcap failed.&quot;,</span>
<a href="#l4.44"></a><span id="l4.44">     /* 72 */ calIWcapErrors.WCAP_LIST_SUBSCRIBED_FAILED, &quot;list_subscribed.wcap failed.&quot;,</span>
<a href="#l4.45"></a><span id="l4.45">     /* 73 */ calIWcapErrors.WCAP_SUBSCRIBE_FAILED, &quot;subscribe.wcap failed.&quot;,</span>
<a href="#l4.46"></a><span id="l4.46">     /* 74 */ calIWcapErrors.WCAP_UNSUBSCRIBE_FAILED, &quot;unsubscribe.wcap failed.&quot;,</span>
<a href="#l4.47"></a><span id="l4.47">     /* 75 */ calIWcapErrors.WCAP_ANONYMOUS_NOT_ALLOWED, &quot;Command cannot be executed as anonymous. Used only for list.wcap, list_subscribed.wcap, subscribe.wcap, and unsubscribe.wcap commands.&quot;,</span>
<a href="#l4.48"></a><span id="l4.48" class="difflineat">@@ -230,19 +230,19 @@ var g_wcapErrorCodes = [</span>
<a href="#l4.49"></a><span id="l4.49">     /* 94 */ NS_ERROR_INVALID_ARG, &quot;No WCAP error code.&quot;,</span>
<a href="#l4.50"></a><span id="l4.50">     /* 95 */ NS_ERROR_INVALID_ARG, &quot;No WCAP error code.&quot;,</span>
<a href="#l4.51"></a><span id="l4.51">     /* 96 */ NS_ERROR_INVALID_ARG, &quot;No WCAP error code.&quot;,</span>
<a href="#l4.52"></a><span id="l4.52">     /* 97 */ NS_ERROR_INVALID_ARG, &quot;No WCAP error code.&quot;,</span>
<a href="#l4.53"></a><span id="l4.53">     /* 98 */ NS_ERROR_INVALID_ARG, &quot;No WCAP error code.&quot;,</span>
<a href="#l4.54"></a><span id="l4.54">     /* 99 */ NS_ERROR_INVALID_ARG, &quot;No WCAP error code.&quot;,</span>
<a href="#l4.55"></a><span id="l4.55">     /* 11000 */ calIWcapErrors.WCAP_CDWP_ERR_MAX_CONNECTION_REACHED, &quot;Maximum connections to back-end database reached. As connections are freed up, users can connect to the back-end.&quot;,</span>
<a href="#l4.56"></a><span id="l4.56">     /* 11001 */ calIWcapErrors.WCAP_CDWP_ERR_CANNOT_CONNECT, &quot;Cannot connect to back-end server. Back-end machine might be down or DWP server is not up and running.&quot;,</span>
<a href="#l4.57"></a><span id="l4.57" class="difflineminus">-    /* 11002 */ calIWcapErrors.WCAP_CDWP_ERR_CANNOT_RESOLVE_CALENDAR, &quot;Front-end can’t resolve calendar to a particular back-end server.&quot;,</span>
<a href="#l4.58"></a><span id="l4.58" class="difflineplus">+    /* 11002 */ calIWcapErrors.WCAP_CDWP_ERR_CANNOT_RESOLVE_CALENDAR, &quot;Front-end can't resolve calendar to a particular back-end server.&quot;,</span>
<a href="#l4.59"></a><span id="l4.59">     /* 11003 */ calIWcapErrors.WCAP_CDWP_ERR_BAD_DATA, &quot;Bad data received from DWP connection. This is a generic formatting error. Check all DWP servers. One might be down.&quot;,</span>
<a href="#l4.60"></a><span id="l4.60" class="difflineminus">-    /* 11004 */ calIWcapErrors.WCAP_CDWP_ERR_DWPHOST_CTX_DOES_NOT_EXIST, &quot;For the back-end host, context doesn\’t exist in the context table.&quot;,</span>
<a href="#l4.61"></a><span id="l4.61" class="difflineplus">+    /* 11004 */ calIWcapErrors.WCAP_CDWP_ERR_DWPHOST_CTX_DOES_NOT_EXIST, &quot;For the back-end host, context doesn't exist in the context table.&quot;,</span>
<a href="#l4.62"></a><span id="l4.62">     /* 11005 */ calIWcapErrors.WCAP_CDWP_ERR_HOSTNAME_NOT_RESOLVABLE, &quot;DNS or NIS files, or hostname resolver is not set up properly or machine does not exist.&quot;,</span>
<a href="#l4.63"></a><span id="l4.63">     /* 11006 */ calIWcapErrors.WCAP_CDWP_ERR_NO_DATA, &quot;No data was received from reading the calendar properties from the DWP connection.&quot;,</span>
<a href="#l4.64"></a><span id="l4.64">     /* 11007 */ calIWcapErrors.WCAP_CDWP_ERR_AUTH_FAILED, &quot;DWP authentication failed.&quot;,</span>
<a href="#l4.65"></a><span id="l4.65">     /* 11008 */ calIWcapErrors.WCAP_CDWP_ERR_CHECKVERSION_FAILED, &quot;DWP version check failed.&quot;</span>
<a href="#l4.66"></a><span id="l4.66">     ];</span>
<a href="#l4.67"></a><span id="l4.67"> </span>
<a href="#l4.68"></a><span id="l4.68"> function wcapErrorToString(rc) {</span>
<a href="#l4.69"></a><span id="l4.69">     if (isNaN(rc)) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/test/unit/test_ltninvitationutils.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/test/unit/test_ltninvitationutils.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -594,24 +594,24 @@ add_task(function* getHeaderSection_test</span>
<a href="#l5.4"></a><span id="l5.4"> </span>
<a href="#l5.5"></a><span id="l5.5">         let composeUtils = Components.classes[&quot;@mozilla.org/messengercompose/computils;1&quot;]</span>
<a href="#l5.6"></a><span id="l5.6">                                      .createInstance(Components.interfaces.nsIMsgCompUtils);</span>
<a href="#l5.7"></a><span id="l5.7">         let messageId = composeUtils.msgGenerateMessageId(identity);</span>
<a href="#l5.8"></a><span id="l5.8"> </span>
<a href="#l5.9"></a><span id="l5.9">         let header = ltn.invitation.getHeaderSection(messageId, identity,</span>
<a href="#l5.10"></a><span id="l5.10">                                                      test.input.toList, test.input.subject);</span>
<a href="#l5.11"></a><span id="l5.11">         // we test Date and Message-ID headers separately to avoid false positives</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-        ok(!!header.match(/Date\:.+(?:\n|\r\n|\r)/),</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+        ok(!!header.match(/Date:.+(?:\n|\r\n|\r)/),</span>
<a href="#l5.14"></a><span id="l5.14">            &quot;(test #&quot; + i + &quot;): date&quot;);</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineminus">-        ok(!!header.match(/Message-ID\:.+(?:\n|\r\n|\r)/),</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+        ok(!!header.match(/Message-ID:.+(?:\n|\r\n|\r)/),</span>
<a href="#l5.17"></a><span id="l5.17">            &quot;(test #&quot; + i + &quot;): message-id&quot;);</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineminus">-        equal(header.replace(/Date\:.+(?:\n|\r\n|\r)/, &quot;&quot;)</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineminus">-                    .replace(/Message-ID\:.+(?:\n|\r\n|\r)/, &quot;&quot;),</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineminus">-              test.expected.replace(/Date\:.+(?:\n|\r\n|\r)/, &quot;&quot;)</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineminus">-                           .replace(/Message-ID\:.+(?:\n|\r\n|\r)/, &quot;&quot;),</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineplus">+        equal(header.replace(/Date:.+(?:\n|\r\n|\r)/, &quot;&quot;)</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineplus">+                    .replace(/Message-ID:.+(?:\n|\r\n|\r)/, &quot;&quot;),</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineplus">+              test.expected.replace(/Date:.+(?:\n|\r\n|\r)/, &quot;&quot;)</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineplus">+                           .replace(/Message-ID:.+(?:\n|\r\n|\r)/, &quot;&quot;),</span>
<a href="#l5.26"></a><span id="l5.26">               &quot;(test #&quot; + i + &quot;): all headers&quot;);</span>
<a href="#l5.27"></a><span id="l5.27">     }</span>
<a href="#l5.28"></a><span id="l5.28"> });</span>
<a href="#l5.29"></a><span id="l5.29"> </span>
<a href="#l5.30"></a><span id="l5.30"> add_task(function* convertFromUnicode_test() {</span>
<a href="#l5.31"></a><span id="l5.31">     let data = [{</span>
<a href="#l5.32"></a><span id="l5.32">         input: {</span>
<a href="#l5.33"></a><span id="l5.33">             charset: &quot;UTF-8&quot;,</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineat">@@ -721,17 +721,17 @@ add_task(function* getRfc5322FormattedDa</span>
<a href="#l5.35"></a><span id="l5.35">             dtz: null</span>
<a href="#l5.36"></a><span id="l5.36">         }, {</span>
<a href="#l5.37"></a><span id="l5.37">             dt: &quot;Sat, 24 Jan 2015 09:24:49&quot;,</span>
<a href="#l5.38"></a><span id="l5.38">             dtz: &quot;UTC&quot;</span>
<a href="#l5.39"></a><span id="l5.39">         }, {</span>
<a href="#l5.40"></a><span id="l5.40">             dt: &quot;Sat, 24 Jan 2015 09:24:49&quot;,</span>
<a href="#l5.41"></a><span id="l5.41">             dtz: &quot;floating&quot;</span>
<a href="#l5.42"></a><span id="l5.42">         }],</span>
<a href="#l5.43"></a><span id="l5.43" class="difflineminus">-        expected: /^\w{3}, \d{2} \w{3} \d{4} \d{2}\:\d{2}\:\d{2} [+-]\d{4}$/</span>
<a href="#l5.44"></a><span id="l5.44" class="difflineplus">+        expected: /^\w{3}, \d{2} \w{3} \d{4} \d{2}:\d{2}:\d{2} [+-]\d{4}$/</span>
<a href="#l5.45"></a><span id="l5.45">     };</span>
<a href="#l5.46"></a><span id="l5.46"> </span>
<a href="#l5.47"></a><span id="l5.47">     let i = 0;</span>
<a href="#l5.48"></a><span id="l5.48">     let dtz = Preferences.get(&quot;calendar.timezone.local&quot;, null);</span>
<a href="#l5.49"></a><span id="l5.49">     for (let test of data.input) {</span>
<a href="#l5.50"></a><span id="l5.50">         i++;</span>
<a href="#l5.51"></a><span id="l5.51">         if (test.dtz) {</span>
<a href="#l5.52"></a><span id="l5.52">             Preferences.set(&quot;calendar.timezone.local&quot;, test.dtz);</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

