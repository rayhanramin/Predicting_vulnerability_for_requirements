<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 23390:c2d11ad71ebac8103be881578ec8e0873921aede</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ c2d11ad71ebac8103be881578ec8e0873921aede" />
<meta property="og:url" content="/comm-central/rev/c2d11ad71ebac8103be881578ec8e0873921aede" />
<meta property="og:description" content="Bug 1418011 - fix URL in JsAccount to set nsIURI things without JS overrides. r=jorgk" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / c2d11ad71ebac8103be881578ec8e0873921aede 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/c2d11ad71ebac8103be881578ec8e0873921aede">shortlog</a> |
<a href="/comm-central/log/c2d11ad71ebac8103be881578ec8e0873921aede">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/c2d11ad71ebac8103be881578ec8e0873921aede">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/c2d11ad71ebac8103be881578ec8e0873921aede">files</a> |
changeset |
<a href="/comm-central/raw-rev/c2d11ad71ebac8103be881578ec8e0873921aede">raw</a>  | <a href="/comm-central/archive/c2d11ad71ebac8103be881578ec8e0873921aede.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1418011">Bug 1418011</a> - fix URL in JsAccount to set nsIURI things without JS overrides. r=jorgk
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#82;&#32;&#75;&#101;&#110;&#116;&#32;&#74;&#97;&#109;&#101;&#115;&#32;&#60;&#114;&#107;&#101;&#110;&#116;&#64;&#99;&#97;&#115;&#112;&#105;&#97;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 28 Feb 2018 22:51:29 +0100</td></tr>

<tr>
 <td>changeset 23390</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/c2d11ad71ebac8103be881578ec8e0873921aede">c2d11ad71ebac8103be881578ec8e0873921aede</a></td>
</tr>



<tr>
<td>parent 23389</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/b4ceffca370cba6684574b9b3d7af8e96439ee9d">b4ceffca370cba6684574b9b3d7af8e96439ee9d</a>
</td>
</tr>

<tr>
<td>child 23391</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/5e07cff9cd9c422239f82edc33e2aec5f00f45b7">5e07cff9cd9c422239f82edc33e2aec5f00f45b7</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=c2d11ad71ebac8103be881578ec8e0873921aede">14135</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Wed, 28 Feb 2018 23:06:17 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@5e07cff9cd9c [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=5e07cff9cd9c422239f82edc33e2aec5f00f45b7">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=5e07cff9cd9c422239f82edc33e2aec5f00f45b7&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=5e07cff9cd9c422239f82edc33e2aec5f00f45b7&newProject=comm-central&newRevision=c2d11ad71ebac8103be881578ec8e0873921aede&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=5e07cff9cd9c422239f82edc33e2aec5f00f45b7&newProject=comm-central&newRevision=c2d11ad71ebac8103be881578ec8e0873921aede&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=5e07cff9cd9c422239f82edc33e2aec5f00f45b7&newProject=comm-central&newRevision=c2d11ad71ebac8103be881578ec8e0873921aede&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28jorgk%29&revcount=50">jorgk</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1418011">1418011</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1416343">1416343</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1418011">Bug 1418011</a> - fix URL in JsAccount to set nsIURI things without JS overrides. r=jorgk
Re-enable failing tests after <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1416343">bug 1416343</a></div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/public/moz.build">mailnews/jsaccount/public/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/public/moz.build">file</a> |
<a href="/comm-central/annotate/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/public/moz.build">annotate</a> |
<a href="/comm-central/diff/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/public/moz.build">diff</a> |
<a href="/comm-central/comparison/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/public/moz.build">comparison</a> |
<a href="/comm-central/log/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/public/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/public/msgIJaUrl.idl">mailnews/jsaccount/public/msgIJaUrl.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/public/msgIJaUrl.idl">file</a> |
<a href="/comm-central/annotate/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/public/msgIJaUrl.idl">annotate</a> |
<a href="/comm-central/diff/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/public/msgIJaUrl.idl">diff</a> |
<a href="/comm-central/comparison/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/public/msgIJaUrl.idl">comparison</a> |
<a href="/comm-central/log/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/public/msgIJaUrl.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/src/JaUrl.cpp">mailnews/jsaccount/src/JaUrl.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/src/JaUrl.cpp">file</a> |
<a href="/comm-central/annotate/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/src/JaUrl.cpp">annotate</a> |
<a href="/comm-central/diff/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/src/JaUrl.cpp">diff</a> |
<a href="/comm-central/comparison/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/src/JaUrl.cpp">comparison</a> |
<a href="/comm-central/log/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/src/JaUrl.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/src/JaUrl.h">mailnews/jsaccount/src/JaUrl.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/src/JaUrl.h">file</a> |
<a href="/comm-central/annotate/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/src/JaUrl.h">annotate</a> |
<a href="/comm-central/diff/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/src/JaUrl.h">diff</a> |
<a href="/comm-central/comparison/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/src/JaUrl.h">comparison</a> |
<a href="/comm-central/log/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/src/JaUrl.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/idl/msgIFooUrl.idl">mailnews/jsaccount/test/idl/msgIFooUrl.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/idl/msgIFooUrl.idl">file</a> |
<a href="/comm-central/annotate/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/idl/msgIFooUrl.idl">annotate</a> |
<a href="/comm-central/diff/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/idl/msgIFooUrl.idl">diff</a> |
<a href="/comm-central/comparison/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/idl/msgIFooUrl.idl">comparison</a> |
<a href="/comm-central/log/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/idl/msgIFooUrl.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/unit/resources/testJaFooUrlComponent.js">mailnews/jsaccount/test/unit/resources/testJaFooUrlComponent.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/unit/resources/testJaFooUrlComponent.js">file</a> |
<a href="/comm-central/annotate/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/unit/resources/testJaFooUrlComponent.js">annotate</a> |
<a href="/comm-central/diff/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/unit/resources/testJaFooUrlComponent.js">diff</a> |
<a href="/comm-central/comparison/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/unit/resources/testJaFooUrlComponent.js">comparison</a> |
<a href="/comm-central/log/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/unit/resources/testJaFooUrlComponent.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/unit/test_fooUrl.js">mailnews/jsaccount/test/unit/test_fooUrl.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/unit/test_fooUrl.js">file</a> |
<a href="/comm-central/annotate/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/unit/test_fooUrl.js">annotate</a> |
<a href="/comm-central/diff/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/unit/test_fooUrl.js">diff</a> |
<a href="/comm-central/comparison/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/unit/test_fooUrl.js">comparison</a> |
<a href="/comm-central/log/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/unit/test_fooUrl.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/unit/xpcshell.ini">mailnews/jsaccount/test/unit/xpcshell.ini</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/unit/xpcshell.ini">file</a> |
<a href="/comm-central/annotate/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/unit/xpcshell.ini">annotate</a> |
<a href="/comm-central/diff/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/unit/xpcshell.ini">diff</a> |
<a href="/comm-central/comparison/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/unit/xpcshell.ini">comparison</a> |
<a href="/comm-central/log/c2d11ad71ebac8103be881578ec8e0873921aede/mailnews/jsaccount/test/unit/xpcshell.ini">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mailnews/jsaccount/public/moz.build</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mailnews/jsaccount/public/moz.build</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -1,16 +1,17 @@</span>
<a href="#l1.4"></a><span id="l1.4"> # -*- Mode: python; c-basic-offset: 4; indent-tabs-mode: nil; tab-width: 40 -*-</span>
<a href="#l1.5"></a><span id="l1.5"> # vim: set filetype=python:</span>
<a href="#l1.6"></a><span id="l1.6"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l1.7"></a><span id="l1.7"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l1.8"></a><span id="l1.8"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l1.9"></a><span id="l1.9"> </span>
<a href="#l1.10"></a><span id="l1.10"> XPIDL_SOURCES += [</span>
<a href="#l1.11"></a><span id="l1.11">     'msgIDelegateList.idl',</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+    'msgIJaUrl.idl',</span>
<a href="#l1.13"></a><span id="l1.13">     'msgIOverride.idl',</span>
<a href="#l1.14"></a><span id="l1.14"> ]</span>
<a href="#l1.15"></a><span id="l1.15"> </span>
<a href="#l1.16"></a><span id="l1.16"> EXPORTS += [</span>
<a href="#l1.17"></a><span id="l1.17">     'msgJsAccountCID.h',</span>
<a href="#l1.18"></a><span id="l1.18"> ]</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20"> XPIDL_MODULE = 'msgjsaccount'</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1">new file mode 100644</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineminus">--- /dev/null</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineplus">+++ b/mailnews/jsaccount/public/msgIJaUrl.idl</span>
<a href="#l2.4"></a><span id="l2.4" class="difflineat">@@ -0,0 +1,27 @@</span>
<a href="#l2.5"></a><span id="l2.5" class="difflineplus">+/* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l2.6"></a><span id="l2.6" class="difflineplus">+/* vim:set ts=2 sw=2 sts=2 et cindent: */</span>
<a href="#l2.7"></a><span id="l2.7" class="difflineplus">+/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l2.8"></a><span id="l2.8" class="difflineplus">+ * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l2.9"></a><span id="l2.9" class="difflineplus">+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l2.10"></a><span id="l2.10" class="difflineplus">+</span>
<a href="#l2.11"></a><span id="l2.11" class="difflineplus">+#include &quot;nsISupports.idl&quot;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+/**</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+ * Additional interface supported by JsBaseUrl to allow setting variables that</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+ * are typically done in C++ by overriding classes, which is not allowed in JS.</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineplus">+ */</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineplus">+</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineplus">+[scriptable, uuid(f9148c17-9b67-43bb-b741-4fdfe1aef935)]</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+interface msgIJaUrl : nsISupports</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineplus">+{</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineplus">+  /**</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineplus">+   * Set the URL type, which will be checked by nsIMsgMailNewsUrl::IsUrlType. See</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineplus">+   * IsUrlType for possible values.</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineplus">+   */</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineplus">+  void setUrlType(in unsigned long type);</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineplus">+</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineplus">+  /**</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineplus">+   * Set the spec on a URL.</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineplus">+   */</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineplus">+  void setSpec(in AUTF8String spec);</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineplus">+};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mailnews/jsaccount/src/JaUrl.cpp</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mailnews/jsaccount/src/JaUrl.cpp</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -15,16 +15,17 @@</span>
<a href="#l3.4"></a><span id="l3.4"> </span>
<a href="#l3.5"></a><span id="l3.5"> // This file contains an implementation of mailnews URLs in JsAccount.</span>
<a href="#l3.6"></a><span id="l3.6"> </span>
<a href="#l3.7"></a><span id="l3.7"> namespace mozilla {</span>
<a href="#l3.8"></a><span id="l3.8"> namespace mailnews {</span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10"> NS_IMPL_ISUPPORTS_INHERITED(JaBaseCppUrl, nsMsgMailNewsUrl,</span>
<a href="#l3.11"></a><span id="l3.11">                             nsIMsgMessageUrl,</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+                            msgIJaUrl,</span>
<a href="#l3.13"></a><span id="l3.13">                             nsIInterfaceRequestor,</span>
<a href="#l3.14"></a><span id="l3.14">                             nsISupportsWeakReference)</span>
<a href="#l3.15"></a><span id="l3.15"> </span>
<a href="#l3.16"></a><span id="l3.16"> // nsIMsgMailNewsUrl overrides</span>
<a href="#l3.17"></a><span id="l3.17"> NS_IMETHODIMP JaBaseCppUrl::GetFolder(nsIMsgFolder **aFolder)</span>
<a href="#l3.18"></a><span id="l3.18"> {</span>
<a href="#l3.19"></a><span id="l3.19">   NS_ENSURE_ARG_POINTER(aFolder);</span>
<a href="#l3.20"></a><span id="l3.20">   NS_IF_ADDREF(*aFolder = mFolder);</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineat">@@ -32,16 +33,31 @@ NS_IMETHODIMP JaBaseCppUrl::GetFolder(ns</span>
<a href="#l3.22"></a><span id="l3.22"> }</span>
<a href="#l3.23"></a><span id="l3.23"> </span>
<a href="#l3.24"></a><span id="l3.24"> NS_IMETHODIMP JaBaseCppUrl::SetFolder(nsIMsgFolder *aFolder)</span>
<a href="#l3.25"></a><span id="l3.25"> {</span>
<a href="#l3.26"></a><span id="l3.26">   mFolder = aFolder;</span>
<a href="#l3.27"></a><span id="l3.27">   return NS_OK;</span>
<a href="#l3.28"></a><span id="l3.28"> }</span>
<a href="#l3.29"></a><span id="l3.29"> </span>
<a href="#l3.30"></a><span id="l3.30" class="difflineplus">+NS_IMETHODIMP JaBaseCppUrl::GetServer(nsIMsgIncomingServer **aIncomingServer)</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineplus">+{</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+  if (mFolder) {</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+    return mFolder-&gt;GetServer(aIncomingServer);</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineplus">+  }</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineplus">+  return NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineplus">+}</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineplus">+</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineplus">+NS_IMETHODIMP JaBaseCppUrl::IsUrlType(uint32_t type, bool *isType)</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineplus">+{</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineplus">+  NS_ENSURE_ARG(isType);</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineplus">+  *isType = (m_urlType == type);</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineplus">+  return NS_OK;</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineplus">+}</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineplus">+</span>
<a href="#l3.45"></a><span id="l3.45"> // nsIMsgMessageUrl implementation</span>
<a href="#l3.46"></a><span id="l3.46"> NS_IMETHODIMP JaBaseCppUrl::GetUri(char **aUri)</span>
<a href="#l3.47"></a><span id="l3.47"> {</span>
<a href="#l3.48"></a><span id="l3.48">   if (!mUri.IsEmpty())</span>
<a href="#l3.49"></a><span id="l3.49">     *aUri = ToNewCString(mUri);</span>
<a href="#l3.50"></a><span id="l3.50">   else</span>
<a href="#l3.51"></a><span id="l3.51">     return NS_ERROR_NOT_INITIALIZED;</span>
<a href="#l3.52"></a><span id="l3.52">   return NS_OK;</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineat">@@ -141,34 +157,49 @@ NS_IMETHODIMP JaBaseCppUrl::GetMessageHe</span>
<a href="#l3.54"></a><span id="l3.54">   return NS_OK;</span>
<a href="#l3.55"></a><span id="l3.55"> }</span>
<a href="#l3.56"></a><span id="l3.56"> </span>
<a href="#l3.57"></a><span id="l3.57"> NS_IMETHODIMP JaBaseCppUrl::SetMessageHeader(nsIMsgDBHdr *aMsgHdr)</span>
<a href="#l3.58"></a><span id="l3.58"> {</span>
<a href="#l3.59"></a><span id="l3.59">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l3.60"></a><span id="l3.60"> }</span>
<a href="#l3.61"></a><span id="l3.61"> </span>
<a href="#l3.62"></a><span id="l3.62" class="difflineplus">+// msgIJaUrl implementation</span>
<a href="#l3.63"></a><span id="l3.63" class="difflineplus">+NS_IMETHODIMP JaBaseCppUrl::SetUrlType(unsigned int type)</span>
<a href="#l3.64"></a><span id="l3.64" class="difflineplus">+{</span>
<a href="#l3.65"></a><span id="l3.65" class="difflineplus">+  m_urlType = type;</span>
<a href="#l3.66"></a><span id="l3.66" class="difflineplus">+  return NS_OK;</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineplus">+}</span>
<a href="#l3.68"></a><span id="l3.68" class="difflineplus">+</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineplus">+NS_IMETHODIMP JaBaseCppUrl::SetSpec(const nsACString&amp; aSpec)</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineplus">+{</span>
<a href="#l3.71"></a><span id="l3.71" class="difflineplus">+  return SetSpecInternal(aSpec);</span>
<a href="#l3.72"></a><span id="l3.72" class="difflineplus">+}</span>
<a href="#l3.73"></a><span id="l3.73" class="difflineplus">+</span>
<a href="#l3.74"></a><span id="l3.74"> // nsIInterfaceRequestor implementation</span>
<a href="#l3.75"></a><span id="l3.75"> NS_IMETHODIMP JaBaseCppUrl::GetInterface(const nsIID &amp; aIID, void **aSink)</span>
<a href="#l3.76"></a><span id="l3.76"> {</span>
<a href="#l3.77"></a><span id="l3.77">   return QueryInterface(aIID, aSink);</span>
<a href="#l3.78"></a><span id="l3.78"> }</span>
<a href="#l3.79"></a><span id="l3.79"> </span>
<a href="#l3.80"></a><span id="l3.80"> // Delegator</span>
<a href="#l3.81"></a><span id="l3.81"> NS_IMPL_ISUPPORTS_INHERITED(JaCppUrlDelegator,</span>
<a href="#l3.82"></a><span id="l3.82">                             JaBaseCppUrl,</span>
<a href="#l3.83"></a><span id="l3.83">                             msgIOverride)</span>
<a href="#l3.84"></a><span id="l3.84"> </span>
<a href="#l3.85"></a><span id="l3.85"> // Delegator object to bypass JS method override.</span>
<a href="#l3.86"></a><span id="l3.86"> NS_IMPL_ISUPPORTS(JaCppUrlDelegator::Super,</span>
<a href="#l3.87"></a><span id="l3.87" class="difflineminus">-                  nsIMsgMailNewsUrl,</span>
<a href="#l3.88"></a><span id="l3.88">                   nsIMsgMessageUrl,</span>
<a href="#l3.89"></a><span id="l3.89">                   nsIURI,</span>
<a href="#l3.90"></a><span id="l3.90">                   nsIURL,</span>
<a href="#l3.91"></a><span id="l3.91" class="difflineminus">-                  nsIInterfaceRequestor)</span>
<a href="#l3.92"></a><span id="l3.92" class="difflineplus">+                  nsIURIWithPrincipal,</span>
<a href="#l3.93"></a><span id="l3.93" class="difflineplus">+                  nsIMsgMailNewsUrl,</span>
<a href="#l3.94"></a><span id="l3.94" class="difflineplus">+                  msgIJaUrl,</span>
<a href="#l3.95"></a><span id="l3.95" class="difflineplus">+                  nsIInterfaceRequestor,</span>
<a href="#l3.96"></a><span id="l3.96" class="difflineplus">+                  nsISupportsWeakReference)</span>
<a href="#l3.97"></a><span id="l3.97"> </span>
<a href="#l3.98"></a><span id="l3.98"> JaCppUrlDelegator::JaCppUrlDelegator() :</span>
<a href="#l3.99"></a><span id="l3.99">   mCppBase(new Super(this)),</span>
<a href="#l3.100"></a><span id="l3.100">   mMethods(nullptr)</span>
<a href="#l3.101"></a><span id="l3.101"> { }</span>
<a href="#l3.102"></a><span id="l3.102"> </span>
<a href="#l3.103"></a><span id="l3.103"> NS_IMETHODIMP JaCppUrlDelegator::SetMethodsToDelegate(msgIDelegateList *aDelegateList)</span>
<a href="#l3.104"></a><span id="l3.104"> {</span>
<a href="#l3.105"></a><span id="l3.105" class="difflineat">@@ -191,19 +222,16 @@ NS_IMETHODIMP JaCppUrlDelegator::GetMeth</span>
<a href="#l3.106"></a><span id="l3.106">   return NS_OK;</span>
<a href="#l3.107"></a><span id="l3.107"> }</span>
<a href="#l3.108"></a><span id="l3.108"> </span>
<a href="#l3.109"></a><span id="l3.109"> NS_IMETHODIMP JaCppUrlDelegator::SetJsDelegate(nsISupports *aJsDelegate)</span>
<a href="#l3.110"></a><span id="l3.110"> {</span>
<a href="#l3.111"></a><span id="l3.111">   // If these QIs fail, then overrides are not provided for methods in that</span>
<a href="#l3.112"></a><span id="l3.112">   // interface, which is OK.</span>
<a href="#l3.113"></a><span id="l3.113">   mJsISupports = aJsDelegate;</span>
<a href="#l3.114"></a><span id="l3.114" class="difflineminus">-  mJsIMsgMailNewsUrl = do_QueryInterface(aJsDelegate);</span>
<a href="#l3.115"></a><span id="l3.115" class="difflineminus">-  mJsIURI = do_QueryInterface(aJsDelegate);</span>
<a href="#l3.116"></a><span id="l3.116" class="difflineminus">-  mJsIURL = do_QueryInterface(aJsDelegate);</span>
<a href="#l3.117"></a><span id="l3.117">   mJsIMsgMessageUrl = do_QueryInterface(aJsDelegate);</span>
<a href="#l3.118"></a><span id="l3.118">   mJsIInterfaceRequestor = do_QueryInterface(aJsDelegate);</span>
<a href="#l3.119"></a><span id="l3.119">   return NS_OK;</span>
<a href="#l3.120"></a><span id="l3.120"> }</span>
<a href="#l3.121"></a><span id="l3.121"> NS_IMETHODIMP JaCppUrlDelegator::GetJsDelegate(nsISupports **aJsDelegate)</span>
<a href="#l3.122"></a><span id="l3.122"> {</span>
<a href="#l3.123"></a><span id="l3.123">   NS_ENSURE_ARG_POINTER(aJsDelegate);</span>
<a href="#l3.124"></a><span id="l3.124">   if (mJsISupports)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mailnews/jsaccount/src/JaUrl.h</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mailnews/jsaccount/src/JaUrl.h</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -14,96 +14,104 @@</span>
<a href="#l4.4"></a><span id="l4.4"> #include &quot;nsCycleCollectionParticipant.h&quot;</span>
<a href="#l4.5"></a><span id="l4.5"> #include &quot;nsDataHashtable.h&quot;</span>
<a href="#l4.6"></a><span id="l4.6"> #include &quot;nsIFile.h&quot;</span>
<a href="#l4.7"></a><span id="l4.7"> #include &quot;nsIInterfaceRequestor.h&quot;</span>
<a href="#l4.8"></a><span id="l4.8"> #include &quot;nsIMsgFolder.h&quot;</span>
<a href="#l4.9"></a><span id="l4.9"> #include &quot;nsISupports.h&quot;</span>
<a href="#l4.10"></a><span id="l4.10"> #include &quot;nsMsgMailNewsUrl.h&quot;</span>
<a href="#l4.11"></a><span id="l4.11"> #include &quot;nsWeakReference.h&quot;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+#include &quot;msgIJaUrl.h&quot;</span>
<a href="#l4.13"></a><span id="l4.13"> </span>
<a href="#l4.14"></a><span id="l4.14"> namespace mozilla {</span>
<a href="#l4.15"></a><span id="l4.15"> namespace mailnews {</span>
<a href="#l4.16"></a><span id="l4.16"> </span>
<a href="#l4.17"></a><span id="l4.17"> /* Header file */</span>
<a href="#l4.18"></a><span id="l4.18"> </span>
<a href="#l4.19"></a><span id="l4.19"> // This class is an XPCOM component, usable in JS, that calls the methods</span>
<a href="#l4.20"></a><span id="l4.20"> // in the C++ base class (bypassing any JS override).</span>
<a href="#l4.21"></a><span id="l4.21"> class JaBaseCppUrl : public nsMsgMailNewsUrl,</span>
<a href="#l4.22"></a><span id="l4.22">                      public nsIMsgMessageUrl,</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineplus">+                     public msgIJaUrl,</span>
<a href="#l4.24"></a><span id="l4.24">                      public nsIInterfaceRequestor,</span>
<a href="#l4.25"></a><span id="l4.25">                      public nsSupportsWeakReference</span>
<a href="#l4.26"></a><span id="l4.26"> </span>
<a href="#l4.27"></a><span id="l4.27"> {</span>
<a href="#l4.28"></a><span id="l4.28"> public:</span>
<a href="#l4.29"></a><span id="l4.29">   NS_DECL_ISUPPORTS_INHERITED</span>
<a href="#l4.30"></a><span id="l4.30">   NS_DECL_NSIMSGMESSAGEURL</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineplus">+  NS_DECL_MSGIJAURL</span>
<a href="#l4.32"></a><span id="l4.32">   NS_DECL_NSIINTERFACEREQUESTOR</span>
<a href="#l4.33"></a><span id="l4.33">   JaBaseCppUrl() { }</span>
<a href="#l4.34"></a><span id="l4.34"> </span>
<a href="#l4.35"></a><span id="l4.35">   // nsIMsgMailNewsUrl overrides</span>
<a href="#l4.36"></a><span id="l4.36">   NS_IMETHOD GetFolder(nsIMsgFolder **aFolder) override;</span>
<a href="#l4.37"></a><span id="l4.37">   NS_IMETHOD SetFolder(nsIMsgFolder *aFolder) override;</span>
<a href="#l4.38"></a><span id="l4.38" class="difflineplus">+  NS_IMETHOD IsUrlType(uint32_t type, bool *isType) override;</span>
<a href="#l4.39"></a><span id="l4.39" class="difflineplus">+  NS_IMETHOD GetServer(nsIMsgIncomingServer **aIncomingServer) override;</span>
<a href="#l4.40"></a><span id="l4.40"> </span>
<a href="#l4.41"></a><span id="l4.41"> protected:</span>
<a href="#l4.42"></a><span id="l4.42">   virtual ~JaBaseCppUrl() { }</span>
<a href="#l4.43"></a><span id="l4.43"> </span>
<a href="#l4.44"></a><span id="l4.44">   // nsIMsgMailUrl variables.</span>
<a href="#l4.45"></a><span id="l4.45"> </span>
<a href="#l4.46"></a><span id="l4.46">   nsCOMPtr&lt;nsIMsgFolder&gt; mFolder;</span>
<a href="#l4.47"></a><span id="l4.47"> </span>
<a href="#l4.48"></a><span id="l4.48">   // nsIMsgMessageUrl variables.</span>
<a href="#l4.49"></a><span id="l4.49"> </span>
<a href="#l4.50"></a><span id="l4.50">   // the uri for the original message, like ews-message://server/folder#123</span>
<a href="#l4.51"></a><span id="l4.51">   nsCString mUri;</span>
<a href="#l4.52"></a><span id="l4.52">   nsCOMPtr&lt;nsIFile&gt; mMessageFile;</span>
<a href="#l4.53"></a><span id="l4.53">   bool mCanonicalLineEnding;</span>
<a href="#l4.54"></a><span id="l4.54">   nsCString mOriginalSpec;</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineplus">+</span>
<a href="#l4.56"></a><span id="l4.56" class="difflineplus">+  // msgIJaUrl variables</span>
<a href="#l4.57"></a><span id="l4.57" class="difflineplus">+  unsigned int m_urlType;</span>
<a href="#l4.58"></a><span id="l4.58"> };</span>
<a href="#l4.59"></a><span id="l4.59"> </span>
<a href="#l4.60"></a><span id="l4.60"> class JaCppUrlDelegator : public JaBaseCppUrl,</span>
<a href="#l4.61"></a><span id="l4.61">                           public msgIOverride</span>
<a href="#l4.62"></a><span id="l4.62"> {</span>
<a href="#l4.63"></a><span id="l4.63"> public:</span>
<a href="#l4.64"></a><span id="l4.64">   NS_DECL_ISUPPORTS_INHERITED</span>
<a href="#l4.65"></a><span id="l4.65">   NS_DECL_MSGIOVERRIDE</span>
<a href="#l4.66"></a><span id="l4.66"> </span>
<a href="#l4.67"></a><span id="l4.67" class="difflineminus">-  NS_FORWARD_NSIMSGMAILNEWSURL(DELEGATE_JS(nsIMsgMailNewsUrl, mJsIMsgMailNewsUrl)-&gt;)</span>
<a href="#l4.68"></a><span id="l4.68" class="difflineminus">-  NS_FORWARD_NSIURI(DELEGATE_JS(nsIURI, mJsIURI)-&gt;)</span>
<a href="#l4.69"></a><span id="l4.69" class="difflineminus">-  NS_FORWARD_NSIURL(DELEGATE_JS(nsIURL, mJsIURL)-&gt;)</span>
<a href="#l4.70"></a><span id="l4.70">   NS_FORWARD_NSIMSGMESSAGEURL(DELEGATE_JS(nsIMsgMessageUrl, mJsIMsgMessageUrl)-&gt;)</span>
<a href="#l4.71"></a><span id="l4.71">   NS_FORWARD_NSIINTERFACEREQUESTOR(DELEGATE_JS(nsIInterfaceRequestor, mJsIInterfaceRequestor)-&gt;)</span>
<a href="#l4.72"></a><span id="l4.72"> </span>
<a href="#l4.73"></a><span id="l4.73">   JaCppUrlDelegator();</span>
<a href="#l4.74"></a><span id="l4.74"> </span>
<a href="#l4.75"></a><span id="l4.75">   class Super : public nsIMsgMailNewsUrl,</span>
<a href="#l4.76"></a><span id="l4.76" class="difflineplus">+                public nsIURIWithPrincipal,</span>
<a href="#l4.77"></a><span id="l4.77">                 public nsIMsgMessageUrl,</span>
<a href="#l4.78"></a><span id="l4.78" class="difflineminus">-                public nsIInterfaceRequestor</span>
<a href="#l4.79"></a><span id="l4.79" class="difflineplus">+                public msgIJaUrl,</span>
<a href="#l4.80"></a><span id="l4.80" class="difflineplus">+                public nsIInterfaceRequestor,</span>
<a href="#l4.81"></a><span id="l4.81" class="difflineplus">+                public nsISupportsWeakReference</span>
<a href="#l4.82"></a><span id="l4.82">   {</span>
<a href="#l4.83"></a><span id="l4.83">     public:</span>
<a href="#l4.84"></a><span id="l4.84">       Super(JaCppUrlDelegator *aFakeThis) {mFakeThis = aFakeThis;}</span>
<a href="#l4.85"></a><span id="l4.85">       NS_DECL_ISUPPORTS</span>
<a href="#l4.86"></a><span id="l4.86">       NS_FORWARD_NSIMSGMAILNEWSURL(mFakeThis-&gt;JaBaseCppUrl::)</span>
<a href="#l4.87"></a><span id="l4.87">       NS_FORWARD_NSIURI(mFakeThis-&gt;JaBaseCppUrl::)</span>
<a href="#l4.88"></a><span id="l4.88">       NS_FORWARD_NSIURL(mFakeThis-&gt;JaBaseCppUrl::)</span>
<a href="#l4.89"></a><span id="l4.89" class="difflineplus">+      NS_FORWARD_NSIURIWITHPRINCIPAL(mFakeThis-&gt;JaBaseCppUrl::)</span>
<a href="#l4.90"></a><span id="l4.90">       NS_FORWARD_NSIMSGMESSAGEURL(mFakeThis-&gt;JaBaseCppUrl::)</span>
<a href="#l4.91"></a><span id="l4.91" class="difflineplus">+      NS_FORWARD_MSGIJAURL(mFakeThis-&gt;JaBaseCppUrl::)</span>
<a href="#l4.92"></a><span id="l4.92">       NS_FORWARD_NSIINTERFACEREQUESTOR(mFakeThis-&gt;JaBaseCppUrl::)</span>
<a href="#l4.93"></a><span id="l4.93" class="difflineplus">+      NS_FORWARD_NSISUPPORTSWEAKREFERENCE(mFakeThis-&gt;JaBaseCppUrl::)</span>
<a href="#l4.94"></a><span id="l4.94">     private:</span>
<a href="#l4.95"></a><span id="l4.95">       virtual ~Super() {}</span>
<a href="#l4.96"></a><span id="l4.96">       JaCppUrlDelegator *mFakeThis;</span>
<a href="#l4.97"></a><span id="l4.97">   };</span>
<a href="#l4.98"></a><span id="l4.98"> </span>
<a href="#l4.99"></a><span id="l4.99"> private:</span>
<a href="#l4.100"></a><span id="l4.100">   virtual ~JaCppUrlDelegator() {</span>
<a href="#l4.101"></a><span id="l4.101">   }</span>
<a href="#l4.102"></a><span id="l4.102"> </span>
<a href="#l4.103"></a><span id="l4.103">   // Interfaces that may be overridden by JS.</span>
<a href="#l4.104"></a><span id="l4.104" class="difflineminus">-  nsCOMPtr&lt;nsIMsgMailNewsUrl&gt; mJsIMsgMailNewsUrl;</span>
<a href="#l4.105"></a><span id="l4.105" class="difflineminus">-  nsCOMPtr&lt;nsIURI&gt; mJsIURI;</span>
<a href="#l4.106"></a><span id="l4.106" class="difflineminus">-  nsCOMPtr&lt;nsIURL&gt; mJsIURL;</span>
<a href="#l4.107"></a><span id="l4.107">   nsCOMPtr&lt;nsIMsgMessageUrl&gt; mJsIMsgMessageUrl;</span>
<a href="#l4.108"></a><span id="l4.108">   nsCOMPtr&lt;nsIInterfaceRequestor&gt; mJsIInterfaceRequestor;</span>
<a href="#l4.109"></a><span id="l4.109"> </span>
<a href="#l4.110"></a><span id="l4.110">   // Owning reference to the JS override.</span>
<a href="#l4.111"></a><span id="l4.111">   nsCOMPtr&lt;nsISupports&gt; mJsISupports;</span>
<a href="#l4.112"></a><span id="l4.112"> </span>
<a href="#l4.113"></a><span id="l4.113">   // Class to bypass JS delegates. nsCOMPtr for when we do cycle collection.</span>
<a href="#l4.114"></a><span id="l4.114">   nsCOMPtr&lt;nsIMsgMailNewsUrl&gt; mCppBase;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mailnews/jsaccount/test/idl/msgIFooUrl.idl</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mailnews/jsaccount/test/idl/msgIFooUrl.idl</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -9,11 +9,9 @@</span>
<a href="#l5.4"></a><span id="l5.4"> </span>
<a href="#l5.5"></a><span id="l5.5"> [scriptable, uuid(12CAD9FC-57FC-4AEE-A800-895A289237DD)]</span>
<a href="#l5.6"></a><span id="l5.6"> interface msgIFooUrl : nsISupports</span>
<a href="#l5.7"></a><span id="l5.7"> {</span>
<a href="#l5.8"></a><span id="l5.8">   /// Foo id for item.</span>
<a href="#l5.9"></a><span id="l5.9">   attribute AString itemId;</span>
<a href="#l5.10"></a><span id="l5.10">   /// Does this url refer to an attachment?</span>
<a href="#l5.11"></a><span id="l5.11">   readonly attribute boolean isAttachment;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-  /// urlType (copy, move, display) from nsIMsgMailNewsUrl</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-  void setUrlType(in unsigned long aType);</span>
<a href="#l5.14"></a><span id="l5.14"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mailnews/jsaccount/test/unit/resources/testJaFooUrlComponent.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mailnews/jsaccount/test/unit/resources/testJaFooUrlComponent.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -69,45 +69,25 @@ FooUrl.prototype = {</span>
<a href="#l6.4"></a><span id="l6.4">   getInterface: function(iid) {</span>
<a href="#l6.5"></a><span id="l6.5">     for (let iface of FooUrlProperties.extraInterfaces) {</span>
<a href="#l6.6"></a><span id="l6.6">       if (iid.equals(iface))</span>
<a href="#l6.7"></a><span id="l6.7">         return this;</span>
<a href="#l6.8"></a><span id="l6.8">     }</span>
<a href="#l6.9"></a><span id="l6.9">     return this.delegator.QueryInterface(iid);</span>
<a href="#l6.10"></a><span id="l6.10">   },</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-    // nsIMsgMailNewsUrl overrides</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineminus">-  // Override cloneInternal() to always make the pathname capitalized. This is useful</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineminus">-  // to test that a method called from C++, but overridden in JS, gets the JS</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineminus">-  // method, since nsMsgMailNewsUrl::CloneIgnoringRef calls CloneInternal().</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineminus">-  cloneInternal: function(aRefHandle, aRef)</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineminus">-  {</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineminus">-    let uriClone = this.cppBase.cloneInternal(aRefHandle, aRef);</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineminus">-    uriClone.pathQueryRef = uriClone.pathQueryRef.toUpperCase();</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineminus">-    return uriClone;</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineminus">-  },</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineminus">-</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineminus">-  // Override to allow setting from a JS variable.</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineminus">-  IsUrlType(aType) { return aType == this._urlType;},</span>
<a href="#l6.26"></a><span id="l6.26" class="difflineminus">-</span>
<a href="#l6.27"></a><span id="l6.27">     // msgIFooUrl implementation</span>
<a href="#l6.28"></a><span id="l6.28"> </span>
<a href="#l6.29"></a><span id="l6.29">   // Foo id for item.</span>
<a href="#l6.30"></a><span id="l6.30">   // attribute AString itemId;</span>
<a href="#l6.31"></a><span id="l6.31">   get itemId() { return this._itemId;},</span>
<a href="#l6.32"></a><span id="l6.32">   set itemId(aVal) {this._itemId = aVal;},</span>
<a href="#l6.33"></a><span id="l6.33"> </span>
<a href="#l6.34"></a><span id="l6.34">   // Does this url refer to an attachment?</span>
<a href="#l6.35"></a><span id="l6.35">   //readonly attribute boolean isAttachment;</span>
<a href="#l6.36"></a><span id="l6.36">   get isAttachment() {</span>
<a href="#l6.37"></a><span id="l6.37">     // We look to see if the URL has an attachment query</span>
<a href="#l6.38"></a><span id="l6.38">     let query = this.QueryInterface(Ci.nsIURL).query;</span>
<a href="#l6.39"></a><span id="l6.39">     return (query &amp;&amp; query.indexOf(ATTACHMENT_QUERY) != -1);</span>
<a href="#l6.40"></a><span id="l6.40">   },</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineminus">-</span>
<a href="#l6.42"></a><span id="l6.42" class="difflineminus">-  /// urlType (copy, move, display) from nsIMsgMailNewsUrl</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineminus">-  //void setUrlType(in unsigned long aType);</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineminus">-  setUrlType: function(aType) { this._urlType = aType;},</span>
<a href="#l6.45"></a><span id="l6.45" class="difflineminus">-</span>
<a href="#l6.46"></a><span id="l6.46"> }</span>
<a href="#l6.47"></a><span id="l6.47"> </span>
<a href="#l6.48"></a><span id="l6.48"> var NSGetFactory = XPCOMUtils.generateNSGetFactory([FooUrlConstructor]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mailnews/jsaccount/test/unit/test_fooUrl.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mailnews/jsaccount/test/unit/test_fooUrl.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -38,127 +38,45 @@ var tests = [</span>
<a href="#l7.4"></a><span id="l7.4"> </span>
<a href="#l7.5"></a><span id="l7.5">     // Access the ._hidden attribute using the XPCOM interface,</span>
<a href="#l7.6"></a><span id="l7.6">     // where it is not defined.</span>
<a href="#l7.7"></a><span id="l7.7">     Assert.equal(typeof url.jsDelegate._hidden, &quot;undefined&quot;);</span>
<a href="#l7.8"></a><span id="l7.8"> </span>
<a href="#l7.9"></a><span id="l7.9">     // Get the JS object, where _hidden IS defined.</span>
<a href="#l7.10"></a><span id="l7.10">     Assert.equal(url.jsDelegate.wrappedJSObject._hidden, &quot;IAmHidden&quot;);</span>
<a href="#l7.11"></a><span id="l7.11">   },</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-  function test_nsIURI() {</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-    let url = newURL().QueryInterface(Ci.nsIURI);</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineminus">-    url instanceof Ci.nsIMsgMailNewsUrl; // so we see cloneInternal</span>
<a href="#l7.15"></a><span id="l7.15"> </span>
<a href="#l7.16"></a><span id="l7.16" class="difflineminus">-    // test methods that mostly use the baseURL in nsMsgMailNewsUrl</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineminus">-    Assert.ok(&quot;spec&quot; in url);</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineminus">-    url.spec = &quot;https://test.invalid/folder?isFoo=true&amp;someBar=theBar&quot;;</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineminus">-    Assert.equal(url.host, &quot;test.invalid&quot;);</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineminus">-</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineminus">-    // test another method from nsMsgMailNewsUrl.</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineminus">-    // url.resolve is overridden in nsMsgMailNewsUrl to only work if starts with &quot;#&quot;</span>
<a href="#l7.23"></a><span id="l7.23" class="difflineminus">-    Assert.equal(&quot;https://test.invalid/folder?isFoo=true&amp;someBar=theBar#modules&quot;,</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineminus">-                 url.resolve(&quot;#modules&quot;));</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineminus">-</span>
<a href="#l7.26"></a><span id="l7.26" class="difflineminus">-    // Test JS override of method called virtually in C++.</span>
<a href="#l7.27"></a><span id="l7.27" class="difflineminus">-    // We overrode cloneInteral in JS to capitalize the path.</span>
<a href="#l7.28"></a><span id="l7.28" class="difflineminus">-    url.spec = &quot;https://test.invalid/folder#modules&quot;;</span>
<a href="#l7.29"></a><span id="l7.29" class="difflineminus">-    // *** Disabled, see bug 1418011.</span>
<a href="#l7.30"></a><span id="l7.30" class="difflineminus">-    // Assert.equal(url.cloneInternal(Ci.nsIMsgMailNewsUrl.HONOR_REF, null).spec,</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-    //              &quot;https://test.invalid/FOLDER#MODULES&quot;);</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineminus">-</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineminus">-    // But then it gets tricky.</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineminus">-    // This is not overridden, so you are calling JaBaseCppUrl::CloneIgnoringRef</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineminus">-    // which inherits from nsMsgMailNewsUrl::CloneIgnoringRef(). So why is the path</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineminus">-    // capitalized? Because nsMsgMailNewsUrl::CloneIgnoringRef calls the virtual</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineminus">-    // method CloneInternal(), which IS overridden to give the capitalized value,</span>
<a href="#l7.38"></a><span id="l7.38" class="difflineminus">-    // showing polymorphic behavior.</span>
<a href="#l7.39"></a><span id="l7.39" class="difflineminus">-    // *** Disabled, see bug 1418011.</span>
<a href="#l7.40"></a><span id="l7.40" class="difflineminus">-    // Assert.equal(url.cloneIgnoringRef().spec, &quot;https://test.invalid/FOLDER&quot;);</span>
<a href="#l7.41"></a><span id="l7.41" class="difflineminus">-</span>
<a href="#l7.42"></a><span id="l7.42" class="difflineminus">-    // Demo of differences between the various versions of the object. The</span>
<a href="#l7.43"></a><span id="l7.43" class="difflineminus">-    // standard XPCOM constructor returns the JS implementation, as was tested</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineminus">-    // above. Try the same tests using the wrapped JS delegate, which should give</span>
<a href="#l7.45"></a><span id="l7.45" class="difflineminus">-    // the same (overridden) results (overridden for cloneInternal, C++ class</span>
<a href="#l7.46"></a><span id="l7.46" class="difflineminus">-    // for cloneIgnoringRef with polymorphic override).</span>
<a href="#l7.47"></a><span id="l7.47" class="difflineminus">-    let jsDelegate = url.QueryInterface(Ci.msgIOverride).jsDelegate.wrappedJSObject;</span>
<a href="#l7.48"></a><span id="l7.48" class="difflineminus">-    Assert.equal(jsDelegate.cloneInternal(Ci.nsIMsgMailNewsUrl.HONOR_REF, null).spec,</span>
<a href="#l7.49"></a><span id="l7.49" class="difflineminus">-                                          &quot;https://test.invalid/FOLDER#MODULES&quot;);</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineminus">-    // *** Disabled, see bug 1418011.</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineminus">-    // Assert.equal(jsDelegate.cloneIgnoringRef().spec, &quot;https://test.invalid/FOLDER&quot;);</span>
<a href="#l7.52"></a><span id="l7.52" class="difflineminus">-</span>
<a href="#l7.53"></a><span id="l7.53" class="difflineminus">-    // The cppBase object will not have the overrides. cppBase is from</span>
<a href="#l7.54"></a><span id="l7.54" class="difflineminus">-    // JaCppUrlDelegator::GetCppBase which returns an instance of the Super()</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineminus">-    // object. This instance will always call the C++ objects and never the</span>
<a href="#l7.56"></a><span id="l7.56" class="difflineminus">-    // JS objects.</span>
<a href="#l7.57"></a><span id="l7.57" class="difflineminus">-    let cppBase = url.QueryInterface(Ci.msgIOverride).cppBase.QueryInterface(Ci.nsIURI);</span>
<a href="#l7.58"></a><span id="l7.58" class="difflineminus">-    cppBase instanceof Ci.nsIMsgMailNewsUrl; // so it sees cloneInternal</span>
<a href="#l7.59"></a><span id="l7.59" class="difflineminus">-</span>
<a href="#l7.60"></a><span id="l7.60" class="difflineminus">-    // nsMsgMailNewsUrl::CloneInternal does gives the normal, lower-case spec.</span>
<a href="#l7.61"></a><span id="l7.61" class="difflineminus">-    Assert.equal(cppBase.cloneInternal(Ci.nsIMsgMailNewsUrl.HONOR_REF, null).spec,</span>
<a href="#l7.62"></a><span id="l7.62" class="difflineminus">-                 &quot;https://test.invalid/folder#modules&quot;);</span>
<a href="#l7.63"></a><span id="l7.63" class="difflineminus">-</span>
<a href="#l7.64"></a><span id="l7.64" class="difflineminus">-    // But again, when calling a C++ class we get the polymorphic behavior.</span>
<a href="#l7.65"></a><span id="l7.65" class="difflineminus">-    // *** Disabled, see bug 1418011.</span>
<a href="#l7.66"></a><span id="l7.66" class="difflineminus">-    // Assert.equal(cppBase.cloneIgnoringRef().spec, &quot;https://test.invalid/FOLDER&quot;);</span>
<a href="#l7.67"></a><span id="l7.67" class="difflineminus">-</span>
<a href="#l7.68"></a><span id="l7.68" class="difflineminus">-    // Not sure why you would want to do this, but you could also call the C++</span>
<a href="#l7.69"></a><span id="l7.69" class="difflineminus">-    // object that does delegation, and get the same result. That is, call</span>
<a href="#l7.70"></a><span id="l7.70" class="difflineminus">-    // JaCppUrlDelegator:: classes using the forwarding macros to either a JS</span>
<a href="#l7.71"></a><span id="l7.71" class="difflineminus">-    // class or a C++ class. This is actually what we expect C++ callers to see,</span>
<a href="#l7.72"></a><span id="l7.72" class="difflineminus">-    // so this matches what we see above.</span>
<a href="#l7.73"></a><span id="l7.73" class="difflineminus">-    let cppDelegator = jsDelegate.delegator.QueryInterface(Ci.nsIURI);</span>
<a href="#l7.74"></a><span id="l7.74" class="difflineminus">-</span>
<a href="#l7.75"></a><span id="l7.75" class="difflineminus">-    // *** Disabled, see bug 1418011.</span>
<a href="#l7.76"></a><span id="l7.76" class="difflineminus">-    // Assert.equal(cppDelegator.cloneInternal(Ci.nsIMsgMailNewsUrl.HONOR_REF, null).spec,</span>
<a href="#l7.77"></a><span id="l7.77" class="difflineminus">-    //                                         &quot;https://test.invalid/FOLDER#MODULES&quot;);</span>
<a href="#l7.78"></a><span id="l7.78" class="difflineminus">-    // Assert.equal(cppDelegator.cloneIgnoringRef().spec, &quot;https://test.invalid/FOLDER&quot;);</span>
<a href="#l7.79"></a><span id="l7.79" class="difflineminus">-  },</span>
<a href="#l7.80"></a><span id="l7.80" class="difflineminus">-  function test_nsIURL() {</span>
<a href="#l7.81"></a><span id="l7.81" class="difflineminus">-    let url = newURL().QueryInterface(Ci.nsIURL);</span>
<a href="#l7.82"></a><span id="l7.82" class="difflineminus">-    Assert.ok(&quot;filePath&quot; in url);</span>
<a href="#l7.83"></a><span id="l7.83" class="difflineminus">-    url.spec = &quot;https://test.invalid/folder?isFoo=true&amp;someBar=theBar&quot;;</span>
<a href="#l7.84"></a><span id="l7.84" class="difflineminus">-    Assert.equal(url.query, &quot;isFoo=true&amp;someBar=theBar&quot;);</span>
<a href="#l7.85"></a><span id="l7.85" class="difflineminus">-    // Note that I tried here to test getCommonSpec, but that does not work</span>
<a href="#l7.86"></a><span id="l7.86" class="difflineminus">-    // because nsStandardURL.cpp makes an assumption that the URL is directly</span>
<a href="#l7.87"></a><span id="l7.87" class="difflineminus">-    // an nsStandardURL.cpp.</span>
<a href="#l7.88"></a><span id="l7.88" class="difflineminus">-  },</span>
<a href="#l7.89"></a><span id="l7.89" class="difflineminus">-  function test_nsIMsgMailNewsUrl() {</span>
<a href="#l7.90"></a><span id="l7.90" class="difflineminus">-    let url = newURL().QueryInterface(Ci.nsIMsgMailNewsUrl);</span>
<a href="#l7.91"></a><span id="l7.91" class="difflineminus">-    Assert.ok(&quot;msgWindow&quot; in url);</span>
<a href="#l7.92"></a><span id="l7.92" class="difflineminus">-    url.maxProgress = 23;</span>
<a href="#l7.93"></a><span id="l7.93" class="difflineminus">-    Assert.equal(url.maxProgress, 23);</span>
<a href="#l7.94"></a><span id="l7.94" class="difflineminus">-  },</span>
<a href="#l7.95"></a><span id="l7.95" class="difflineplus">+  // We used to test nsIURI, nsIURL, and nsIMsgMailNewsUrl overrides, but those</span>
<a href="#l7.96"></a><span id="l7.96" class="difflineplus">+  // can no longer be overridden.</span>
<a href="#l7.97"></a><span id="l7.97">   function test_nsIMsgMessageUrl() {</span>
<a href="#l7.98"></a><span id="l7.98">     let url = newURL().QueryInterface(Ci.nsIMsgMessageUrl);</span>
<a href="#l7.99"></a><span id="l7.99">     Assert.ok(&quot;originalSpec&quot; in url);</span>
<a href="#l7.100"></a><span id="l7.100">     let appDir = Services.dirsvc.get(&quot;GreD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l7.101"></a><span id="l7.101">     Assert.ok(appDir.path);</span>
<a href="#l7.102"></a><span id="l7.102">     // test attributes</span>
<a href="#l7.103"></a><span id="l7.103">     url.messageFile = appDir;</span>
<a href="#l7.104"></a><span id="l7.104">     Assert.equal(url.messageFile.path, appDir.path);</span>
<a href="#l7.105"></a><span id="l7.105">   },</span>
<a href="#l7.106"></a><span id="l7.106" class="difflineplus">+  function test_msgIJaUrl() {</span>
<a href="#l7.107"></a><span id="l7.107" class="difflineplus">+    let url = newURL().QueryInterface(Ci.msgIJaUrl);</span>
<a href="#l7.108"></a><span id="l7.108" class="difflineplus">+    url.setUrlType(Ci.nsIMsgMailNewsUrl.eMove);</span>
<a href="#l7.109"></a><span id="l7.109" class="difflineplus">+    Assert.ok(url.QueryInterface(Ci.nsIMsgMailNewsUrl).IsUrlType(Ci.nsIMsgMailNewsUrl.eMove));</span>
<a href="#l7.110"></a><span id="l7.110" class="difflineplus">+  },</span>
<a href="#l7.111"></a><span id="l7.111">   function test_msgIFooUrl() {</span>
<a href="#l7.112"></a><span id="l7.112">     let url = newURL().QueryInterface(Ci.nsIInterfaceRequestor);</span>
<a href="#l7.113"></a><span id="l7.113">     let fooUrl = url.getInterface(Ci.msgIFooUrl);</span>
<a href="#l7.114"></a><span id="l7.114">     Assert.ok(fooUrl instanceof Ci.msgIFooUrl);</span>
<a href="#l7.115"></a><span id="l7.115"> </span>
<a href="#l7.116"></a><span id="l7.116">     fooUrl.itemId = &quot;theItemId&quot;;</span>
<a href="#l7.117"></a><span id="l7.117">     Assert.equal(fooUrl.itemId, &quot;theItemId&quot;);</span>
<a href="#l7.118"></a><span id="l7.118"> </span>
<a href="#l7.119"></a><span id="l7.119" class="difflineminus">-    url.QueryInterface(Ci.nsIURI).spec = &quot;https://foo.invalid/bar/&quot;;</span>
<a href="#l7.120"></a><span id="l7.120" class="difflineplus">+    url.QueryInterface(Ci.msgIJaUrl).setSpec(&quot;https://foo.invalid/bar/&quot;);</span>
<a href="#l7.121"></a><span id="l7.121">     Assert.ok(!fooUrl.isAttachment);</span>
<a href="#l7.122"></a><span id="l7.122" class="difflineminus">-    url.QueryInterface(Ci.nsIURI).spec = &quot;https://foo.invalid/bar?part=1.4&amp;dummy=stuff&quot;;</span>
<a href="#l7.123"></a><span id="l7.123" class="difflineplus">+    url.QueryInterface(Ci.msgIJaUrl).setSpec(&quot;https://foo.invalid/bar?part=1.4&amp;dummy=stuff&quot;);</span>
<a href="#l7.124"></a><span id="l7.124">     Assert.ok(fooUrl.isAttachment);</span>
<a href="#l7.125"></a><span id="l7.125" class="difflineminus">-</span>
<a href="#l7.126"></a><span id="l7.126" class="difflineminus">-    let msgMailNewsUrl = url.QueryInterface(Ci.nsIMsgMailNewsUrl);</span>
<a href="#l7.127"></a><span id="l7.127" class="difflineminus">-    Assert.ok(!msgMailNewsUrl.IsUrlType(Ci.nsIMsgMailNewsUrl.eMove));</span>
<a href="#l7.128"></a><span id="l7.128" class="difflineminus">-    fooUrl.setUrlType(Ci.nsIMsgMailNewsUrl.eMove);</span>
<a href="#l7.129"></a><span id="l7.129" class="difflineminus">-    // *** Disabled, see bug 1418011.</span>
<a href="#l7.130"></a><span id="l7.130" class="difflineminus">-    // Assert.ok(msgMailNewsUrl.IsUrlType(Ci.nsIMsgMailNewsUrl.eMove));</span>
<a href="#l7.131"></a><span id="l7.131" class="difflineminus">-</span>
<a href="#l7.132"></a><span id="l7.132">   },</span>
<a href="#l7.133"></a><span id="l7.133"> ];</span>
<a href="#l7.134"></a><span id="l7.134"> </span>
<a href="#l7.135"></a><span id="l7.135"> function run_test()</span>
<a href="#l7.136"></a><span id="l7.136"> {</span>
<a href="#l7.137"></a><span id="l7.137">   for (var test of tests)</span>
<a href="#l7.138"></a><span id="l7.138">     test();</span>
<a href="#l7.139"></a><span id="l7.139"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mailnews/jsaccount/test/unit/xpcshell.ini</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mailnews/jsaccount/test/unit/xpcshell.ini</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -2,10 +2,9 @@</span>
<a href="#l8.4"></a><span id="l8.4"> # http://creativecommons.org/publicdomain/zero/1.0/</span>
<a href="#l8.5"></a><span id="l8.5"> </span>
<a href="#l8.6"></a><span id="l8.6"> [DEFAULT]</span>
<a href="#l8.7"></a><span id="l8.7"> head = head_jsaccount.js</span>
<a href="#l8.8"></a><span id="l8.8"> tail =</span>
<a href="#l8.9"></a><span id="l8.9"> support-files = resources/*</span>
<a href="#l8.10"></a><span id="l8.10"> [test_componentsExist.js]</span>
<a href="#l8.11"></a><span id="l8.11"> [test_fooUrl.js]</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-skip-if = true # See bug 1431913.</span>
<a href="#l8.13"></a><span id="l8.13"> [test_jaMsgFolder.js]</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

