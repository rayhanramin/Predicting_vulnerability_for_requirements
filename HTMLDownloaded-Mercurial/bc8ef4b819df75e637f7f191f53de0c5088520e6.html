<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 26887:bc8ef4b819df75e637f7f191f53de0c5088520e6</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ bc8ef4b819df75e637f7f191f53de0c5088520e6" />
<meta property="og:url" content="/comm-central/rev/bc8ef4b819df75e637f7f191f53de0c5088520e6" />
<meta property="og:description" content="Bug 1546309 - [de-xbl] Get rid of splitmenu, and rework the appmenu. r=darktrojan,aceman (in parts), rs=jorgk" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / bc8ef4b819df75e637f7f191f53de0c5088520e6 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/bc8ef4b819df75e637f7f191f53de0c5088520e6">shortlog</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/bc8ef4b819df75e637f7f191f53de0c5088520e6">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6">files</a> |
changeset |
<a href="/comm-central/raw-rev/bc8ef4b819df75e637f7f191f53de0c5088520e6">raw</a>  | <a href="/comm-central/archive/bc8ef4b819df75e637f7f191f53de0c5088520e6.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1546309">Bug 1546309</a> - [de-xbl] Get rid of splitmenu, and rework the appmenu. r=darktrojan,aceman (in parts), rs=jorgk
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#80;&#97;&#117;&#108;&#32;&#77;&#111;&#114;&#114;&#105;&#115;&#32;&#60;&#112;&#97;&#117;&#108;&#64;&#112;&#97;&#117;&#108;&#119;&#109;&#111;&#114;&#114;&#105;&#115;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 11 Jun 2019 22:31:51 -0400</td></tr>

<tr>
 <td>changeset 26887</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/bc8ef4b819df75e637f7f191f53de0c5088520e6">bc8ef4b819df75e637f7f191f53de0c5088520e6</a></td>
</tr>



<tr>
<td>parent 26886</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/fe4c6acd6880bdd9360662e2742dc96c24035c95">fe4c6acd6880bdd9360662e2742dc96c24035c95</a>
</td>
</tr>

<tr>
<td>child 26888</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/c8cac88bbe303a3e81fd15311a18a0eeb459f3d0">c8cac88bbe303a3e81fd15311a18a0eeb459f3d0</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=bc8ef4b819df75e637f7f191f53de0c5088520e6">16045</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Thu, 13 Jun 2019 08:21:30 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@c358a56e279b [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=c358a56e279baa373a1b72cea747322f5ac78a88">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=c358a56e279baa373a1b72cea747322f5ac78a88&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=c358a56e279baa373a1b72cea747322f5ac78a88&newProject=comm-central&newRevision=534295374182843b26aece5515c042d8cf1a6dd0&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=c358a56e279baa373a1b72cea747322f5ac78a88&newProject=comm-central&newRevision=534295374182843b26aece5515c042d8cf1a6dd0&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=c358a56e279baa373a1b72cea747322f5ac78a88&newProject=comm-central&newRevision=534295374182843b26aece5515c042d8cf1a6dd0&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28darktrojan%29&revcount=50">darktrojan</a>, <a href="/comm-central/log?rev=reviewer%28aceman%29&revcount=50">aceman</a>, <a href="/comm-central/log?rev=reviewer%28jorgk%29&revcount=50">jorgk</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1546309">1546309</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1546309">Bug 1546309</a> - [de-xbl] Get rid of splitmenu, and rework the appmenu. r=darktrojan,aceman (in parts), rs=jorgk</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/calendar/base/content/calendar-chrome-startup.js">calendar/base/content/calendar-chrome-startup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/calendar/base/content/calendar-chrome-startup.js">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/calendar/base/content/calendar-chrome-startup.js">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/calendar/base/content/calendar-chrome-startup.js">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/calendar/base/content/calendar-chrome-startup.js">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/calendar/base/content/calendar-chrome-startup.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/calendar/lightning/content/lightning-menus.xul">calendar/lightning/content/lightning-menus.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/calendar/lightning/content/lightning-menus.xul">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/calendar/lightning/content/lightning-menus.xul">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/calendar/lightning/content/lightning-menus.xul">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/calendar/lightning/content/lightning-menus.xul">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/calendar/lightning/content/lightning-menus.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mailCore.js">mail/base/content/mailCore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mailCore.js">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mailCore.js">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mailCore.js">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mailCore.js">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mailCore.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mailWidgets.xml">mail/base/content/mailWidgets.xml</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mailWidgets.xml">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mailWidgets.xml">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mailWidgets.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mailWindowOverlay.js">mail/base/content/mailWindowOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mailWindowOverlay.js">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mailWindowOverlay.js">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mailWindowOverlay.js">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mailWindowOverlay.js">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mailWindowOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mainPopupSet.inc.xul">mail/base/content/mainPopupSet.inc.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mainPopupSet.inc.xul">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mainPopupSet.inc.xul">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mainPopupSet.inc.xul">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mainPopupSet.inc.xul">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/mainPopupSet.inc.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messageWindow.js">mail/base/content/messageWindow.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messageWindow.js">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messageWindow.js">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messageWindow.js">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messageWindow.js">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messageWindow.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messageWindow.xul">mail/base/content/messageWindow.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messageWindow.xul">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messageWindow.xul">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messageWindow.xul">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messageWindow.xul">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messageWindow.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messenger.css">mail/base/content/messenger.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messenger.css">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messenger.css">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messenger.css">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messenger.css">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messenger.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messenger.xul">mail/base/content/messenger.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messenger.xul">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messenger.xul">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messenger.xul">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messenger.xul">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/messenger.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/msgMail3PaneWindow.js">mail/base/content/msgMail3PaneWindow.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/msgMail3PaneWindow.js">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/msgMail3PaneWindow.js">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/msgMail3PaneWindow.js">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/msgMail3PaneWindow.js">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/content/msgMail3PaneWindow.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/jar.mn">mail/base/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/jar.mn">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/jar.mn">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/jar.mn">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/jar.mn">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/base/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/CustomizableUI.jsm">mail/components/customizableui/CustomizableUI.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/CustomizableUI.jsm">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/CustomizableUI.jsm">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/CustomizableUI.jsm">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/CustomizableUI.jsm">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/CustomizableUI.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/CustomizableWidgets.jsm">mail/components/customizableui/CustomizableWidgets.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/CustomizableWidgets.jsm">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/CustomizableWidgets.jsm">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/CustomizableWidgets.jsm">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/CustomizableWidgets.jsm">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/CustomizableWidgets.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/PanelMultiView.jsm">mail/components/customizableui/PanelMultiView.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/PanelMultiView.jsm">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/PanelMultiView.jsm">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/PanelMultiView.jsm">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/PanelMultiView.jsm">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/PanelMultiView.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/content/jar.mn">mail/components/customizableui/content/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/content/jar.mn">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/content/jar.mn">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/content/jar.mn">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/content/jar.mn">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/content/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/content/panelUI.inc.xul">mail/components/customizableui/content/panelUI.inc.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/content/panelUI.inc.xul">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/content/panelUI.inc.xul">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/content/panelUI.inc.xul">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/content/panelUI.inc.xul">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/content/panelUI.inc.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/content/panelUI.js">mail/components/customizableui/content/panelUI.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/content/panelUI.js">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/content/panelUI.js">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/content/panelUI.js">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/content/panelUI.js">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/content/panelUI.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/moz.build">mail/components/customizableui/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/moz.build">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/moz.build">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/moz.build">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/moz.build">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/customizableui/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/moz.build">mail/components/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/moz.build">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/moz.build">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/moz.build">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/moz.build">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/components/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/extensions/mailviews/content/msgViewPickerOverlay.js">mail/extensions/mailviews/content/msgViewPickerOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/extensions/mailviews/content/msgViewPickerOverlay.js">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/extensions/mailviews/content/msgViewPickerOverlay.js">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/extensions/mailviews/content/msgViewPickerOverlay.js">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/extensions/mailviews/content/msgViewPickerOverlay.js">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/extensions/mailviews/content/msgViewPickerOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/composition/test-reply-multipart-charset.js">mail/test/mozmill/composition/test-reply-multipart-charset.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/composition/test-reply-multipart-charset.js">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/composition/test-reply-multipart-charset.js">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/composition/test-reply-multipart-charset.js">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/composition/test-reply-multipart-charset.js">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/composition/test-reply-multipart-charset.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/content-tabs/test-addons-mgr.js">mail/test/mozmill/content-tabs/test-addons-mgr.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/content-tabs/test-addons-mgr.js">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/content-tabs/test-addons-mgr.js">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/content-tabs/test-addons-mgr.js">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/content-tabs/test-addons-mgr.js">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/content-tabs/test-addons-mgr.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-display/test-watch-ignore-thread.js">mail/test/mozmill/folder-display/test-watch-ignore-thread.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-display/test-watch-ignore-thread.js">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-display/test-watch-ignore-thread.js">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-display/test-watch-ignore-thread.js">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-display/test-watch-ignore-thread.js">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-display/test-watch-ignore-thread.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-pane/test-folder-pane-consumers.js">mail/test/mozmill/folder-pane/test-folder-pane-consumers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-pane/test-folder-pane-consumers.js">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-pane/test-folder-pane-consumers.js">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-pane/test-folder-pane-consumers.js">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-pane/test-folder-pane-consumers.js">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-pane/test-folder-pane-consumers.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-tree-modes/test-mode-switching.js">mail/test/mozmill/folder-tree-modes/test-mode-switching.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-tree-modes/test-mode-switching.js">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-tree-modes/test-mode-switching.js">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-tree-modes/test-mode-switching.js">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-tree-modes/test-mode-switching.js">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-tree-modes/test-mode-switching.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-widget/test-message-filters.js">mail/test/mozmill/folder-widget/test-message-filters.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-widget/test-message-filters.js">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-widget/test-message-filters.js">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-widget/test-message-filters.js">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-widget/test-message-filters.js">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/folder-widget/test-message-filters.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/shared-modules/test-window-helpers.js">mail/test/mozmill/shared-modules/test-window-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/shared-modules/test-window-helpers.js">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/shared-modules/test-window-helpers.js">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/shared-modules/test-window-helpers.js">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/shared-modules/test-window-helpers.js">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/test/mozmill/shared-modules/test-window-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/linux/customizableui/panelUI.css">mail/themes/linux/customizableui/panelUI.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/linux/customizableui/panelUI.css">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/linux/customizableui/panelUI.css">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/linux/customizableui/panelUI.css">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/linux/customizableui/panelUI.css">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/linux/customizableui/panelUI.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/linux/jar.mn">mail/themes/linux/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/linux/jar.mn">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/linux/jar.mn">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/linux/jar.mn">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/linux/jar.mn">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/linux/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/linux/mail/primaryToolbar.css">mail/themes/linux/mail/primaryToolbar.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/linux/mail/primaryToolbar.css">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/linux/mail/primaryToolbar.css">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/linux/mail/primaryToolbar.css">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/linux/mail/primaryToolbar.css">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/linux/mail/primaryToolbar.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/osx/customizableui/panelUI.css">mail/themes/osx/customizableui/panelUI.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/osx/customizableui/panelUI.css">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/osx/customizableui/panelUI.css">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/osx/customizableui/panelUI.css">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/osx/customizableui/panelUI.css">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/osx/customizableui/panelUI.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/osx/jar.mn">mail/themes/osx/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/osx/jar.mn">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/osx/jar.mn">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/osx/jar.mn">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/osx/jar.mn">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/osx/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/osx/mail/primaryToolbar.css">mail/themes/osx/mail/primaryToolbar.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/osx/mail/primaryToolbar.css">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/osx/mail/primaryToolbar.css">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/osx/mail/primaryToolbar.css">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/osx/mail/primaryToolbar.css">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/osx/mail/primaryToolbar.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/customizableui/panelUI.css">mail/themes/shared/customizableui/panelUI.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/customizableui/panelUI.css">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/customizableui/panelUI.css">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/customizableui/panelUI.css">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/customizableui/panelUI.css">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/customizableui/panelUI.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/customizableui/panelUI.inc.css">mail/themes/shared/customizableui/panelUI.inc.css</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/customizableui/panelUI.inc.css">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/customizableui/panelUI.inc.css">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/customizableui/panelUI.inc.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/jar.inc.mn">mail/themes/shared/jar.inc.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/jar.inc.mn">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/jar.inc.mn">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/jar.inc.mn">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/jar.inc.mn">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/jar.inc.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/mail/icons/back-12.svg">mail/themes/shared/mail/icons/back-12.svg</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/mail/icons/back-12.svg">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/mail/icons/back-12.svg">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/mail/icons/back-12.svg">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/mail/icons/back-12.svg">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/shared/mail/icons/back-12.svg">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/windows/customizableui/panelUI.css">mail/themes/windows/customizableui/panelUI.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/windows/customizableui/panelUI.css">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/windows/customizableui/panelUI.css">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/windows/customizableui/panelUI.css">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/windows/customizableui/panelUI.css">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/windows/customizableui/panelUI.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/windows/jar.mn">mail/themes/windows/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/windows/jar.mn">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/windows/jar.mn">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/windows/jar.mn">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/windows/jar.mn">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/windows/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/windows/mail/primaryToolbar.css">mail/themes/windows/mail/primaryToolbar.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/windows/mail/primaryToolbar.css">file</a> |
<a href="/comm-central/annotate/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/windows/mail/primaryToolbar.css">annotate</a> |
<a href="/comm-central/diff/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/windows/mail/primaryToolbar.css">diff</a> |
<a href="/comm-central/comparison/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/windows/mail/primaryToolbar.css">comparison</a> |
<a href="/comm-central/log/bc8ef4b819df75e637f7f191f53de0c5088520e6/mail/themes/windows/mail/primaryToolbar.css">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/content/calendar-chrome-startup.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/content/calendar-chrome-startup.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -3,16 +3,17 @@</span>
<a href="#l1.4"></a><span id="l1.4">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6"> /* import-globals-from ../../lightning/content/messenger-overlay-sidebar.js */</span>
<a href="#l1.7"></a><span id="l1.7"> /* import-globals-from calendar-common-sets.js */</span>
<a href="#l1.8"></a><span id="l1.8"> /* import-globals-from calendar-management.js */</span>
<a href="#l1.9"></a><span id="l1.9"> /* import-globals-from calendar-unifinder-todo.js */</span>
<a href="#l1.10"></a><span id="l1.10"> /* import-globals-from calendar-ui-utils.js */</span>
<a href="#l1.11"></a><span id="l1.11"> /* import-globals-from calendar-views-utils.js */</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+/* globals PanelUI */</span>
<a href="#l1.13"></a><span id="l1.13"> </span>
<a href="#l1.14"></a><span id="l1.14"> var { fixIterator } = ChromeUtils.import(&quot;resource:///modules/iteratorUtils.jsm&quot;);</span>
<a href="#l1.15"></a><span id="l1.15"> var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l1.16"></a><span id="l1.16"> var { AppConstants } = ChromeUtils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l1.17"></a><span id="l1.17"> </span>
<a href="#l1.18"></a><span id="l1.18"> /* exported commonInitCalendar, commonFinishCalendar */</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20"> /**</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineat">@@ -32,16 +33,19 @@ async function commonInitCalendar() {</span>
<a href="#l1.22"></a><span id="l1.22">     prepareCalendarToDoUnifinder();</span>
<a href="#l1.23"></a><span id="l1.23"> </span>
<a href="#l1.24"></a><span id="l1.24">     // Make sure we update ourselves if the program stays open over midnight</span>
<a href="#l1.25"></a><span id="l1.25">     scheduleMidnightUpdate(refreshUIBits);</span>
<a href="#l1.26"></a><span id="l1.26"> </span>
<a href="#l1.27"></a><span id="l1.27">     // Set up the command controller from calendar-common-sets.js</span>
<a href="#l1.28"></a><span id="l1.28">     injectCalendarCommandController();</span>
<a href="#l1.29"></a><span id="l1.29"> </span>
<a href="#l1.30"></a><span id="l1.30" class="difflineplus">+    // Set up appmenus.</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineplus">+    setUpCalendarAppMenus();</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+</span>
<a href="#l1.33"></a><span id="l1.33">     // Set up item and day selection listeners</span>
<a href="#l1.34"></a><span id="l1.34">     getViewDeck().addEventListener(&quot;dayselect&quot;, observeViewDaySelect);</span>
<a href="#l1.35"></a><span id="l1.35">     getViewDeck().addEventListener(&quot;itemselect&quot;, calendarController.onSelectionChanged, true);</span>
<a href="#l1.36"></a><span id="l1.36"> </span>
<a href="#l1.37"></a><span id="l1.37">     // Start alarm service</span>
<a href="#l1.38"></a><span id="l1.38">     Cc[&quot;@mozilla.org/calendar/alarm-service;1&quot;].getService(Ci.calIAlarmService).startup();</span>
<a href="#l1.39"></a><span id="l1.39">     document.getElementById(&quot;calsidebar_splitter&quot;).addEventListener(&quot;command&quot;, onCalendarViewResize);</span>
<a href="#l1.40"></a><span id="l1.40">     window.addEventListener(&quot;resize&quot;, onCalendarViewResize, true);</span>
<a href="#l1.41"></a><span id="l1.41" class="difflineat">@@ -80,16 +84,19 @@ function commonFinishCalendar() {</span>
<a href="#l1.42"></a><span id="l1.42">     unloadCalendarManager();</span>
<a href="#l1.43"></a><span id="l1.43"> </span>
<a href="#l1.44"></a><span id="l1.44">     // clean up the unifinder</span>
<a href="#l1.45"></a><span id="l1.45">     finishCalendarToDoUnifinder();</span>
<a href="#l1.46"></a><span id="l1.46"> </span>
<a href="#l1.47"></a><span id="l1.47">     // Remove the command controller</span>
<a href="#l1.48"></a><span id="l1.48">     removeCalendarCommandController();</span>
<a href="#l1.49"></a><span id="l1.49"> </span>
<a href="#l1.50"></a><span id="l1.50" class="difflineplus">+    // Tear down calendar appmenus.</span>
<a href="#l1.51"></a><span id="l1.51" class="difflineplus">+    tearDownCalendarAppMenus();</span>
<a href="#l1.52"></a><span id="l1.52" class="difflineplus">+</span>
<a href="#l1.53"></a><span id="l1.53">     document.getElementById(&quot;calsidebar_splitter&quot;).removeEventListener(&quot;command&quot;, onCalendarViewResize);</span>
<a href="#l1.54"></a><span id="l1.54">     window.removeEventListener(&quot;resize&quot;, onCalendarViewResize, true);</span>
<a href="#l1.55"></a><span id="l1.55"> </span>
<a href="#l1.56"></a><span id="l1.56">     // Clean up the category colors</span>
<a href="#l1.57"></a><span id="l1.57">     categoryManagement.cleanupCategories();</span>
<a href="#l1.58"></a><span id="l1.58"> </span>
<a href="#l1.59"></a><span id="l1.59">     // Clean up window pref observers</span>
<a href="#l1.60"></a><span id="l1.60">     calendarWindowPrefs.cleanup();</span>
<a href="#l1.61"></a><span id="l1.61" class="difflineat">@@ -155,16 +162,43 @@ var calendarWindowPrefs = {</span>
<a href="#l1.62"></a><span id="l1.62">                 let attributeValue = Services.prefs.getBoolPref(&quot;calendar.view.useSystemColors&quot;, false) &amp;&amp; &quot;true&quot;;</span>
<a href="#l1.63"></a><span id="l1.63">                 setElementValue(win.document.documentElement, attributeValue, &quot;systemcolors&quot;);</span>
<a href="#l1.64"></a><span id="l1.64">             });</span>
<a href="#l1.65"></a><span id="l1.65">         }</span>
<a href="#l1.66"></a><span id="l1.66">     }</span>
<a href="#l1.67"></a><span id="l1.67"> };</span>
<a href="#l1.68"></a><span id="l1.68"> </span>
<a href="#l1.69"></a><span id="l1.69"> /**</span>
<a href="#l1.70"></a><span id="l1.70" class="difflineplus">+ * Set up calendar appmenus by adding event listeners to the appmenu buttons.</span>
<a href="#l1.71"></a><span id="l1.71" class="difflineplus">+ * Also used to tear down the appmenus by removing the event listeners.</span>
<a href="#l1.72"></a><span id="l1.72" class="difflineplus">+ *</span>
<a href="#l1.73"></a><span id="l1.73" class="difflineplus">+ * @param {boolean} [remove]  Whether to remove event listeners instead of adding them.</span>
<a href="#l1.74"></a><span id="l1.74" class="difflineplus">+ */</span>
<a href="#l1.75"></a><span id="l1.75" class="difflineplus">+function setUpCalendarAppMenus(remove) {</span>
<a href="#l1.76"></a><span id="l1.76" class="difflineplus">+    const addOrRemoveListener = remove ? &quot;removeEventListener&quot; : &quot;addEventListener&quot;;</span>
<a href="#l1.77"></a><span id="l1.77" class="difflineplus">+    [</span>
<a href="#l1.78"></a><span id="l1.78" class="difflineplus">+        &quot;calendar-appmenu-button&quot;,</span>
<a href="#l1.79"></a><span id="l1.79" class="difflineplus">+        &quot;task-appmenu-button&quot;,</span>
<a href="#l1.80"></a><span id="l1.80" class="difflineplus">+        &quot;calendar-item-appmenu-button&quot;</span>
<a href="#l1.81"></a><span id="l1.81" class="difflineplus">+    ]</span>
<a href="#l1.82"></a><span id="l1.82" class="difflineplus">+    .forEach(id =&gt; {</span>
<a href="#l1.83"></a><span id="l1.83" class="difflineplus">+        const button = document.getElementById(id);</span>
<a href="#l1.84"></a><span id="l1.84" class="difflineplus">+        button[addOrRemoveListener](&quot;mousedown&quot;, PanelUI);</span>
<a href="#l1.85"></a><span id="l1.85" class="difflineplus">+        button[addOrRemoveListener](&quot;keypress&quot;, PanelUI);</span>
<a href="#l1.86"></a><span id="l1.86" class="difflineplus">+    });</span>
<a href="#l1.87"></a><span id="l1.87" class="difflineplus">+}</span>
<a href="#l1.88"></a><span id="l1.88" class="difflineplus">+</span>
<a href="#l1.89"></a><span id="l1.89" class="difflineplus">+/**</span>
<a href="#l1.90"></a><span id="l1.90" class="difflineplus">+ * Tear down calendar appmenus by removing event listeners from the appmenu button.</span>
<a href="#l1.91"></a><span id="l1.91" class="difflineplus">+ */</span>
<a href="#l1.92"></a><span id="l1.92" class="difflineplus">+function tearDownCalendarAppMenus() {</span>
<a href="#l1.93"></a><span id="l1.93" class="difflineplus">+    setUpCalendarAppMenus(true);</span>
<a href="#l1.94"></a><span id="l1.94" class="difflineplus">+}</span>
<a href="#l1.95"></a><span id="l1.95" class="difflineplus">+</span>
<a href="#l1.96"></a><span id="l1.96" class="difflineplus">+/**</span>
<a href="#l1.97"></a><span id="l1.97">  * Migrate calendar UI. This function is called at each startup and can be used</span>
<a href="#l1.98"></a><span id="l1.98">  * to change UI items that require js code intervention</span>
<a href="#l1.99"></a><span id="l1.99">  */</span>
<a href="#l1.100"></a><span id="l1.100"> function migrateCalendarUI() {</span>
<a href="#l1.101"></a><span id="l1.101">     const UI_VERSION = 3;</span>
<a href="#l1.102"></a><span id="l1.102">     let currentUIVersion = Services.prefs.getIntPref(&quot;calendar.ui.version&quot;, 0);</span>
<a href="#l1.103"></a><span id="l1.103">     if (currentUIVersion &gt;= UI_VERSION) {</span>
<a href="#l1.104"></a><span id="l1.104">         return;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/lightning/content/lightning-menus.xul</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/lightning/content/lightning-menus.xul</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -499,20 +499,16 @@</span>
<a href="#l2.4"></a><span id="l2.4">     &lt;menuseparator id=&quot;appmenu_afterltnNewTask&quot;</span>
<a href="#l2.5"></a><span id="l2.5">                    insertbefore=&quot;appmenu_newFolder&quot;</span>
<a href="#l2.6"></a><span id="l2.6">                    observes=&quot;appmenu_newFolder&quot;/&gt;</span>
<a href="#l2.7"></a><span id="l2.7">     &lt;menuitem id=&quot;appmenu_ltnNewCalendar&quot; label=&quot;&amp;lightning.menupopup.new.calendar.label;&quot;</span>
<a href="#l2.8"></a><span id="l2.8">                command=&quot;calendar_new_calendar_command&quot;</span>
<a href="#l2.9"></a><span id="l2.9">                observes=&quot;calendar_new_calendar_command&quot;</span>
<a href="#l2.10"></a><span id="l2.10">                insertafter=&quot;appmenu_newAccountMenuItem&quot;/&gt;</span>
<a href="#l2.11"></a><span id="l2.11">   &lt;/menupopup&gt;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-  &lt;splitmenu id=&quot;appmenu_customize&quot;&gt;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-    &lt;menupopup id=&quot;appmenu_customizeMenu&quot;</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-               onpopupshowing=&quot;onToolbarsPopupShowingForTabType(event, document.getElementById('appmenu_quickFilterBar'));&quot;/&gt;</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineminus">-  &lt;/splitmenu&gt;</span>
<a href="#l2.16"></a><span id="l2.16">   &lt;menupopup id=&quot;appmenu_FilePopup&quot;&gt;</span>
<a href="#l2.17"></a><span id="l2.17">     &lt;menu id=&quot;appmenu_Open&quot;</span>
<a href="#l2.18"></a><span id="l2.18">           mode=&quot;calendar&quot;</span>
<a href="#l2.19"></a><span id="l2.19">           label=&quot;&amp;lightning.menupopup.open.label;&quot;</span>
<a href="#l2.20"></a><span id="l2.20">           accesskey=&quot;&amp;lightning.menupopup.open.accesskey;&quot;</span>
<a href="#l2.21"></a><span id="l2.21">           insertbefore=&quot;appmenu_openMessageFileMenuitem&quot;&gt;</span>
<a href="#l2.22"></a><span id="l2.22">       &lt;menupopup id=&quot;appmenu_OpenPopup&quot;&gt;</span>
<a href="#l2.23"></a><span id="l2.23">         &lt;menuitem id=&quot;appmenu_OpenMessageFileMenuitem&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/base/content/mailCore.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/base/content/mailCore.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -287,79 +287,95 @@ function MailToolboxCustomizeDone(aEvent</span>
<a href="#l3.4"></a><span id="l3.4">             child._teardown();</span>
<a href="#l3.5"></a><span id="l3.5">           child.remove();</span>
<a href="#l3.6"></a><span id="l3.6">         }</span>
<a href="#l3.7"></a><span id="l3.7">       }</span>
<a href="#l3.8"></a><span id="l3.8">     }</span>
<a href="#l3.9"></a><span id="l3.9">   }</span>
<a href="#l3.10"></a><span id="l3.10"> }</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-function onViewToolbarsPopupShowing(aEvent, toolboxIds, aInsertPoint) {</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-  if (!Array.isArray(toolboxIds))</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+/**</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+ * Sets up the menu popup that lets the user hide or display toolbars. For</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+ * example, in the appmenu / Preferences view.  Adds toolbar items to the popup</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+ * and sets their attributes.</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+ *</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+ * @param {Event} event                 Event causing the menu popup to appear.</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+ * @param {string|string[]} toolboxIds  IDs of toolboxes that contain toolbars.</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineplus">+ * @param {Element} insertPoint         Where to insert menu items.</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineplus">+ * @param {string} [elementName]        What kind of menu item element to use.</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineplus">+ *                                      E.g. &quot;toolbarbutton&quot; for the appmenu.</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineplus">+ * @param {string} [classes]            Classes to set on menu items.</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineplus">+ */</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineplus">+function onViewToolbarsPopupShowing(event, toolboxIds, insertPoint,</span>
<a href="#l3.27"></a><span id="l3.27" class="difflineplus">+  elementName = &quot;menuitem&quot;, classes) {</span>
<a href="#l3.28"></a><span id="l3.28" class="difflineplus">+  if (!Array.isArray(toolboxIds)) {</span>
<a href="#l3.29"></a><span id="l3.29">     toolboxIds = [toolboxIds];</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineminus">-</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-  let popup = aEvent.target;</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineminus">-</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineminus">-  // Empty the menu</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineminus">-  for (let i = popup.childNodes.length - 1; i &gt;= 0; --i) {</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineminus">-    let deadItem = popup.childNodes[i];</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineminus">-</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineminus">-    // Remove all of the nodes with the iscollapsible</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineminus">-    // attribute.</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineminus">-    if (deadItem.hasAttribute(&quot;iscollapsible&quot;))</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineminus">-      deadItem.remove();</span>
<a href="#l3.41"></a><span id="l3.41">   }</span>
<a href="#l3.42"></a><span id="l3.42"> </span>
<a href="#l3.43"></a><span id="l3.43" class="difflineminus">-  // We'll insert the menuitems before the first item in the list if no insert</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineminus">-  // point is defined.</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineminus">-  let firstMenuItem = aInsertPoint || popup.firstChild;</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineplus">+  const popup = event.target.querySelector(&quot;.panel-subview-body&quot;) || event.target;</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineplus">+</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineplus">+  // Remove all collapsible nodes from the menu.</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineplus">+  for (let i = popup.childNodes.length - 1; i &gt;= 0; --i) {</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineplus">+    const deadItem = popup.childNodes[i];</span>
<a href="#l3.51"></a><span id="l3.51"> </span>
<a href="#l3.52"></a><span id="l3.52" class="difflineminus">-  for (let toolboxId of toolboxIds) {</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineminus">-    let toolbox = document.getElementById(toolboxId);</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineplus">+    if (deadItem.hasAttribute(&quot;iscollapsible&quot;)) {</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineplus">+      deadItem.remove();</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineplus">+    }</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineplus">+  }</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineplus">+</span>
<a href="#l3.59"></a><span id="l3.59" class="difflineplus">+  // We insert menuitems before the first child if no insert point is given.</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineplus">+  const firstMenuItem = insertPoint || popup.firstChild;</span>
<a href="#l3.61"></a><span id="l3.61"> </span>
<a href="#l3.62"></a><span id="l3.62" class="difflineminus">-    // We'll consider either childnodes that have a toolbarname attribute,</span>
<a href="#l3.63"></a><span id="l3.63" class="difflineminus">-    // or externalToolbars.</span>
<a href="#l3.64"></a><span id="l3.64" class="difflineminus">-    let potentialToolbars = Array.from(</span>
<a href="#l3.65"></a><span id="l3.65" class="difflineminus">-      toolbox.querySelectorAll(&quot;[toolbarname]&quot;)</span>
<a href="#l3.66"></a><span id="l3.66" class="difflineminus">-    );</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineminus">-    for (let externalToolbar of toolbox.externalToolbars) {</span>
<a href="#l3.68"></a><span id="l3.68" class="difflineminus">-      if (externalToolbar.getAttribute(&quot;prependmenuitem&quot;))</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineminus">-        potentialToolbars.unshift(externalToolbar);</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineminus">-      else</span>
<a href="#l3.71"></a><span id="l3.71" class="difflineminus">-        potentialToolbars.push(externalToolbar);</span>
<a href="#l3.72"></a><span id="l3.72" class="difflineplus">+  for (const toolboxId of toolboxIds) {</span>
<a href="#l3.73"></a><span id="l3.73" class="difflineplus">+    const toolbox = document.getElementById(toolboxId);</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineplus">+</span>
<a href="#l3.75"></a><span id="l3.75" class="difflineplus">+    // We consider child nodes that have a toolbarname attribute,</span>
<a href="#l3.76"></a><span id="l3.76" class="difflineplus">+    // externalToolbars.</span>
<a href="#l3.77"></a><span id="l3.77" class="difflineplus">+    const toolbars = Array.from(toolbox.querySelectorAll(&quot;[toolbarname]&quot;));</span>
<a href="#l3.78"></a><span id="l3.78" class="difflineplus">+</span>
<a href="#l3.79"></a><span id="l3.79" class="difflineplus">+    for (const externalToolbar of toolbox.externalToolbars) {</span>
<a href="#l3.80"></a><span id="l3.80" class="difflineplus">+      if (externalToolbar.getAttribute(&quot;prependmenuitem&quot;)) {</span>
<a href="#l3.81"></a><span id="l3.81" class="difflineplus">+        toolbars.unshift(externalToolbar);</span>
<a href="#l3.82"></a><span id="l3.82" class="difflineplus">+      } else {</span>
<a href="#l3.83"></a><span id="l3.83" class="difflineplus">+        toolbars.push(externalToolbar);</span>
<a href="#l3.84"></a><span id="l3.84" class="difflineplus">+      }</span>
<a href="#l3.85"></a><span id="l3.85">     }</span>
<a href="#l3.86"></a><span id="l3.86"> </span>
<a href="#l3.87"></a><span id="l3.87" class="difflineminus">-    for (let toolbarElement of potentialToolbars) {</span>
<a href="#l3.88"></a><span id="l3.88" class="difflineminus">-      // We have to bind to toolbar because Javascript doesn't do fresh</span>
<a href="#l3.89"></a><span id="l3.89" class="difflineminus">-      // let-bindings per Iteration.</span>
<a href="#l3.90"></a><span id="l3.90" class="difflineminus">-      let toolbar = toolbarElement;</span>
<a href="#l3.91"></a><span id="l3.91" class="difflineplus">+    for (const toolbar of toolbars) {</span>
<a href="#l3.92"></a><span id="l3.92" class="difflineplus">+      const toolbarName = toolbar.getAttribute(&quot;toolbarname&quot;);</span>
<a href="#l3.93"></a><span id="l3.93" class="difflineplus">+      if (toolbarName) {</span>
<a href="#l3.94"></a><span id="l3.94" class="difflineplus">+        const menuItem = document.createXULElement(elementName);</span>
<a href="#l3.95"></a><span id="l3.95"> </span>
<a href="#l3.96"></a><span id="l3.96" class="difflineminus">-      let toolbarName = toolbar.getAttribute(&quot;toolbarname&quot;);</span>
<a href="#l3.97"></a><span id="l3.97" class="difflineminus">-      if (toolbarName) {</span>
<a href="#l3.98"></a><span id="l3.98" class="difflineminus">-        let menuItem = document.createXULElement(&quot;menuitem&quot;);</span>
<a href="#l3.99"></a><span id="l3.99" class="difflineminus">-        let hidingAttribute = toolbar.getAttribute(&quot;type&quot;) == &quot;menubar&quot; ?</span>
<a href="#l3.100"></a><span id="l3.100" class="difflineminus">-                              &quot;autohide&quot; : &quot;collapsed&quot;;</span>
<a href="#l3.101"></a><span id="l3.101" class="difflineplus">+        const hidingAttribute = toolbar.getAttribute(&quot;type&quot;) == &quot;menubar&quot; ?</span>
<a href="#l3.102"></a><span id="l3.102" class="difflineplus">+          &quot;autohide&quot; : &quot;collapsed&quot;;</span>
<a href="#l3.103"></a><span id="l3.103" class="difflineplus">+</span>
<a href="#l3.104"></a><span id="l3.104">         menuItem.setAttribute(&quot;type&quot;, &quot;checkbox&quot;);</span>
<a href="#l3.105"></a><span id="l3.105">         // Mark this menuitem with an iscollapsible attribute, so we</span>
<a href="#l3.106"></a><span id="l3.106">         // know we can wipe it out later on.</span>
<a href="#l3.107"></a><span id="l3.107">         menuItem.setAttribute(&quot;iscollapsible&quot;, true);</span>
<a href="#l3.108"></a><span id="l3.108">         menuItem.setAttribute(&quot;toolbarid&quot;, toolbar.id);</span>
<a href="#l3.109"></a><span id="l3.109">         menuItem.setAttribute(&quot;label&quot;, toolbarName);</span>
<a href="#l3.110"></a><span id="l3.110">         menuItem.setAttribute(&quot;accesskey&quot;, toolbar.getAttribute(&quot;accesskey&quot;));</span>
<a href="#l3.111"></a><span id="l3.111">         menuItem.setAttribute(&quot;checked&quot;,</span>
<a href="#l3.112"></a><span id="l3.112">                               toolbar.getAttribute(hidingAttribute) != &quot;true&quot;);</span>
<a href="#l3.113"></a><span id="l3.113" class="difflineplus">+        if (classes) {</span>
<a href="#l3.114"></a><span id="l3.114" class="difflineplus">+          menuItem.setAttribute(&quot;class&quot;, classes);</span>
<a href="#l3.115"></a><span id="l3.115" class="difflineplus">+        }</span>
<a href="#l3.116"></a><span id="l3.116">         popup.insertBefore(menuItem, firstMenuItem);</span>
<a href="#l3.117"></a><span id="l3.117"> </span>
<a href="#l3.118"></a><span id="l3.118" class="difflineminus">-        let onMenuItemCommand = function(aEvent) {</span>
<a href="#l3.119"></a><span id="l3.119" class="difflineminus">-          let hidden = aEvent.originalTarget.getAttribute(&quot;checked&quot;) != &quot;true&quot;;</span>
<a href="#l3.120"></a><span id="l3.120" class="difflineminus">-          toolbar.setAttribute(hidingAttribute, hidden);</span>
<a href="#l3.121"></a><span id="l3.121" class="difflineplus">+        menuItem.addEventListener(&quot;command&quot;, () =&gt; {</span>
<a href="#l3.122"></a><span id="l3.122" class="difflineplus">+          const hidden = toolbar.getAttribute(hidingAttribute) != &quot;true&quot;;</span>
<a href="#l3.123"></a><span id="l3.123" class="difflineplus">+</span>
<a href="#l3.124"></a><span id="l3.124" class="difflineplus">+          if (hidden) {</span>
<a href="#l3.125"></a><span id="l3.125" class="difflineplus">+            toolbar.setAttribute(hidingAttribute, &quot;true&quot;);</span>
<a href="#l3.126"></a><span id="l3.126" class="difflineplus">+          } else {</span>
<a href="#l3.127"></a><span id="l3.127" class="difflineplus">+            toolbar.removeAttribute(hidingAttribute);</span>
<a href="#l3.128"></a><span id="l3.128" class="difflineplus">+          }</span>
<a href="#l3.129"></a><span id="l3.129">           Services.xulStore.persist(toolbar, hidingAttribute);</span>
<a href="#l3.130"></a><span id="l3.130" class="difflineminus">-        };</span>
<a href="#l3.131"></a><span id="l3.131" class="difflineminus">-</span>
<a href="#l3.132"></a><span id="l3.132" class="difflineminus">-        menuItem.addEventListener(&quot;command&quot;, onMenuItemCommand);</span>
<a href="#l3.133"></a><span id="l3.133" class="difflineplus">+        });</span>
<a href="#l3.134"></a><span id="l3.134">       }</span>
<a href="#l3.135"></a><span id="l3.135">     }</span>
<a href="#l3.136"></a><span id="l3.136">   }</span>
<a href="#l3.137"></a><span id="l3.137"> }</span>
<a href="#l3.138"></a><span id="l3.138"> </span>
<a href="#l3.139"></a><span id="l3.139"> function toJavaScriptConsole() {</span>
<a href="#l3.140"></a><span id="l3.140">   HUDService.openBrowserConsoleOrFocus();</span>
<a href="#l3.141"></a><span id="l3.141"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1">deleted file mode 100644</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineminus">--- a/mail/base/content/mailWidgets.xml</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineplus">+++ /dev/null</span>
<a href="#l4.4"></a><span id="l4.4" class="difflineat">@@ -1,134 +0,0 @@</span>
<a href="#l4.5"></a><span id="l4.5" class="difflineminus">-&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l4.6"></a><span id="l4.6" class="difflineminus">-&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l4.7"></a><span id="l4.7" class="difflineminus">-   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l4.8"></a><span id="l4.8" class="difflineminus">-   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l4.9"></a><span id="l4.9" class="difflineminus">-</span>
<a href="#l4.10"></a><span id="l4.10" class="difflineminus">-&lt;!-- import-globals-from ../../../mailnews/base/content/dateFormat.js --&gt;</span>
<a href="#l4.11"></a><span id="l4.11" class="difflineminus">-&lt;!-- import-globals-from mailWindow.js --&gt;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-&lt;!-- import-globals-from SearchDialog.js --&gt;</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-&lt;!DOCTYPE bindings [</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineminus">-&lt;!ENTITY % msgHdrViewOverlayDTD SYSTEM &quot;chrome://messenger/locale/msgHdrViewOverlay.dtd&quot; &gt;</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineminus">-%msgHdrViewOverlayDTD;</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineminus">-&lt;!ENTITY % messengerDTD SYSTEM &quot;chrome://messenger/locale/messenger.dtd&quot; &gt;</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineminus">-%messengerDTD;</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineminus">-]&gt;</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineminus">-</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineminus">-&lt;bindings id=&quot;mailBindings&quot;</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineminus">-          xmlns=&quot;http://www.mozilla.org/xbl&quot;</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineminus">-          xmlns:xul=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l4.24"></a><span id="l4.24" class="difflineminus">-          xmlns:xbl=&quot;http://www.mozilla.org/xbl&quot;&gt;</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineminus">-</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineminus">-  &lt;binding id=&quot;splitmenu&quot;&gt;</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineminus">-    &lt;content&gt;</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineminus">-      &lt;xul:hbox anonid=&quot;menuitem&quot; flex=&quot;1&quot;</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineminus">-                class=&quot;splitmenu-menuitem&quot;</span>
<a href="#l4.30"></a><span id="l4.30" class="difflineminus">-                xbl:inherits=&quot;iconic,label,disabled,onclick=oncommand,_moz-menuactive=active&quot;/&gt;</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">-      &lt;xul:menu anonid=&quot;menu&quot; class=&quot;splitmenu-menu&quot;</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineminus">-                xbl:inherits=&quot;disabled,_moz-menuactive=active&quot;</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineminus">-                oncommand=&quot;event.stopPropagation();&quot;&gt;</span>
<a href="#l4.34"></a><span id="l4.34" class="difflineminus">-        &lt;children includes=&quot;menupopup&quot;/&gt;</span>
<a href="#l4.35"></a><span id="l4.35" class="difflineminus">-      &lt;/xul:menu&gt;</span>
<a href="#l4.36"></a><span id="l4.36" class="difflineminus">-    &lt;/content&gt;</span>
<a href="#l4.37"></a><span id="l4.37" class="difflineminus">-</span>
<a href="#l4.38"></a><span id="l4.38" class="difflineminus">-    &lt;implementation&gt;</span>
<a href="#l4.39"></a><span id="l4.39" class="difflineminus">-      &lt;constructor&gt;&lt;![CDATA[</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineminus">-        this._parentMenupopup.addEventListener(&quot;DOMMenuItemActive&quot;, this);</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineminus">-        this._parentMenupopup.addEventListener(&quot;popuphidden&quot;, this);</span>
<a href="#l4.42"></a><span id="l4.42" class="difflineminus">-      ]]&gt;&lt;/constructor&gt;</span>
<a href="#l4.43"></a><span id="l4.43" class="difflineminus">-</span>
<a href="#l4.44"></a><span id="l4.44" class="difflineminus">-      &lt;destructor&gt;&lt;![CDATA[</span>
<a href="#l4.45"></a><span id="l4.45" class="difflineminus">-        this._parentMenupopup.removeEventListener(&quot;DOMMenuItemActive&quot;, this);</span>
<a href="#l4.46"></a><span id="l4.46" class="difflineminus">-        this._parentMenupopup.removeEventListener(&quot;popuphidden&quot;, this);</span>
<a href="#l4.47"></a><span id="l4.47" class="difflineminus">-      ]]&gt;&lt;/destructor&gt;</span>
<a href="#l4.48"></a><span id="l4.48" class="difflineminus">-</span>
<a href="#l4.49"></a><span id="l4.49" class="difflineminus">-      &lt;field name=&quot;menuitem&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l4.50"></a><span id="l4.50" class="difflineminus">-        document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;menuitem&quot;);</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineminus">-      &lt;/field&gt;</span>
<a href="#l4.52"></a><span id="l4.52" class="difflineminus">-      &lt;field name=&quot;menu&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l4.53"></a><span id="l4.53" class="difflineminus">-        document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;menu&quot;);</span>
<a href="#l4.54"></a><span id="l4.54" class="difflineminus">-      &lt;/field&gt;</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineminus">-</span>
<a href="#l4.56"></a><span id="l4.56" class="difflineminus">-      &lt;field name=&quot;_menuDelay&quot;&gt;600&lt;/field&gt;</span>
<a href="#l4.57"></a><span id="l4.57" class="difflineminus">-</span>
<a href="#l4.58"></a><span id="l4.58" class="difflineminus">-      &lt;field name=&quot;_parentMenupopup&quot;&gt;&lt;![CDATA[</span>
<a href="#l4.59"></a><span id="l4.59" class="difflineminus">-        this._getParentMenupopup(this);</span>
<a href="#l4.60"></a><span id="l4.60" class="difflineminus">-      ]]&gt;&lt;/field&gt;</span>
<a href="#l4.61"></a><span id="l4.61" class="difflineminus">-</span>
<a href="#l4.62"></a><span id="l4.62" class="difflineminus">-      &lt;method name=&quot;_getParentMenupopup&quot;&gt;</span>
<a href="#l4.63"></a><span id="l4.63" class="difflineminus">-        &lt;parameter name=&quot;aNode&quot;/&gt;</span>
<a href="#l4.64"></a><span id="l4.64" class="difflineminus">-        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l4.65"></a><span id="l4.65" class="difflineminus">-          let node = aNode.parentNode;</span>
<a href="#l4.66"></a><span id="l4.66" class="difflineminus">-          while (node) {</span>
<a href="#l4.67"></a><span id="l4.67" class="difflineminus">-            if (node.localName == &quot;menupopup&quot;)</span>
<a href="#l4.68"></a><span id="l4.68" class="difflineminus">-              break;</span>
<a href="#l4.69"></a><span id="l4.69" class="difflineminus">-            node = node.parentNode;</span>
<a href="#l4.70"></a><span id="l4.70" class="difflineminus">-          }</span>
<a href="#l4.71"></a><span id="l4.71" class="difflineminus">-          return node;</span>
<a href="#l4.72"></a><span id="l4.72" class="difflineminus">-        ]]&gt;&lt;/body&gt;</span>
<a href="#l4.73"></a><span id="l4.73" class="difflineminus">-      &lt;/method&gt;</span>
<a href="#l4.74"></a><span id="l4.74" class="difflineminus">-</span>
<a href="#l4.75"></a><span id="l4.75" class="difflineminus">-      &lt;method name=&quot;handleEvent&quot;&gt;</span>
<a href="#l4.76"></a><span id="l4.76" class="difflineminus">-        &lt;parameter name=&quot;event&quot;/&gt;</span>
<a href="#l4.77"></a><span id="l4.77" class="difflineminus">-        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l4.78"></a><span id="l4.78" class="difflineminus">-          switch (event.type) {</span>
<a href="#l4.79"></a><span id="l4.79" class="difflineminus">-            case &quot;DOMMenuItemActive&quot;:</span>
<a href="#l4.80"></a><span id="l4.80" class="difflineminus">-              if (this.getAttribute(&quot;active&quot;) == &quot;true&quot; &amp;&amp;</span>
<a href="#l4.81"></a><span id="l4.81" class="difflineminus">-                  event.target != this &amp;&amp;</span>
<a href="#l4.82"></a><span id="l4.82" class="difflineminus">-                  this._getParentMenupopup(event.target) == this._parentMenupopup)</span>
<a href="#l4.83"></a><span id="l4.83" class="difflineminus">-                this.removeAttribute(&quot;active&quot;);</span>
<a href="#l4.84"></a><span id="l4.84" class="difflineminus">-              break;</span>
<a href="#l4.85"></a><span id="l4.85" class="difflineminus">-            case &quot;popuphidden&quot;:</span>
<a href="#l4.86"></a><span id="l4.86" class="difflineminus">-              if (event.target == this._parentMenupopup)</span>
<a href="#l4.87"></a><span id="l4.87" class="difflineminus">-                this.removeAttribute(&quot;active&quot;);</span>
<a href="#l4.88"></a><span id="l4.88" class="difflineminus">-              break;</span>
<a href="#l4.89"></a><span id="l4.89" class="difflineminus">-          }</span>
<a href="#l4.90"></a><span id="l4.90" class="difflineminus">-        ]]&gt;&lt;/body&gt;</span>
<a href="#l4.91"></a><span id="l4.91" class="difflineminus">-      &lt;/method&gt;</span>
<a href="#l4.92"></a><span id="l4.92" class="difflineminus">-    &lt;/implementation&gt;</span>
<a href="#l4.93"></a><span id="l4.93" class="difflineminus">-</span>
<a href="#l4.94"></a><span id="l4.94" class="difflineminus">-    &lt;handlers&gt;</span>
<a href="#l4.95"></a><span id="l4.95" class="difflineminus">-      &lt;handler event=&quot;mouseover&quot;&gt;&lt;![CDATA[</span>
<a href="#l4.96"></a><span id="l4.96" class="difflineminus">-        if (this.getAttribute(&quot;active&quot;) != &quot;true&quot;) {</span>
<a href="#l4.97"></a><span id="l4.97" class="difflineminus">-          this.setAttribute(&quot;active&quot;, &quot;true&quot;);</span>
<a href="#l4.98"></a><span id="l4.98" class="difflineminus">-</span>
<a href="#l4.99"></a><span id="l4.99" class="difflineminus">-          this.dispatchEvent(new Event(&quot;DOMMenuItemActive&quot;,</span>
<a href="#l4.100"></a><span id="l4.100" class="difflineminus">-                                       { bubbles: true, cancelable: false }));</span>
<a href="#l4.101"></a><span id="l4.101" class="difflineminus">-</span>
<a href="#l4.102"></a><span id="l4.102" class="difflineminus">-          if (this.getAttribute(&quot;disabled&quot;) != &quot;true&quot;) {</span>
<a href="#l4.103"></a><span id="l4.103" class="difflineminus">-            let self = this;</span>
<a href="#l4.104"></a><span id="l4.104" class="difflineminus">-            setTimeout(function() {</span>
<a href="#l4.105"></a><span id="l4.105" class="difflineminus">-              if (self.getAttribute(&quot;active&quot;) == &quot;true&quot;)</span>
<a href="#l4.106"></a><span id="l4.106" class="difflineminus">-                self.menu.open = true;</span>
<a href="#l4.107"></a><span id="l4.107" class="difflineminus">-            }, this._menuDelay);</span>
<a href="#l4.108"></a><span id="l4.108" class="difflineminus">-          }</span>
<a href="#l4.109"></a><span id="l4.109" class="difflineminus">-        }</span>
<a href="#l4.110"></a><span id="l4.110" class="difflineminus">-      ]]&gt;&lt;/handler&gt;</span>
<a href="#l4.111"></a><span id="l4.111" class="difflineminus">-</span>
<a href="#l4.112"></a><span id="l4.112" class="difflineminus">-      &lt;handler event=&quot;popupshowing&quot;&gt;&lt;![CDATA[</span>
<a href="#l4.113"></a><span id="l4.113" class="difflineminus">-        if (event.target == this.firstChild &amp;&amp;</span>
<a href="#l4.114"></a><span id="l4.114" class="difflineminus">-            this._parentMenupopup._currentPopup)</span>
<a href="#l4.115"></a><span id="l4.115" class="difflineminus">-          this._parentMenupopup._currentPopup.hidePopup();</span>
<a href="#l4.116"></a><span id="l4.116" class="difflineminus">-      ]]&gt;&lt;/handler&gt;</span>
<a href="#l4.117"></a><span id="l4.117" class="difflineminus">-</span>
<a href="#l4.118"></a><span id="l4.118" class="difflineminus">-      &lt;handler event=&quot;click&quot; phase=&quot;capturing&quot;&gt;&lt;![CDATA[</span>
<a href="#l4.119"></a><span id="l4.119" class="difflineminus">-        if (this.getAttribute(&quot;disabled&quot;) == &quot;true&quot;) {</span>
<a href="#l4.120"></a><span id="l4.120" class="difflineminus">-          // Prevent the command from being carried out</span>
<a href="#l4.121"></a><span id="l4.121" class="difflineminus">-          event.stopPropagation();</span>
<a href="#l4.122"></a><span id="l4.122" class="difflineminus">-          return;</span>
<a href="#l4.123"></a><span id="l4.123" class="difflineminus">-        }</span>
<a href="#l4.124"></a><span id="l4.124" class="difflineminus">-</span>
<a href="#l4.125"></a><span id="l4.125" class="difflineminus">-        let node = event.originalTarget;</span>
<a href="#l4.126"></a><span id="l4.126" class="difflineminus">-        while (true) {</span>
<a href="#l4.127"></a><span id="l4.127" class="difflineminus">-          if (node == this.menuitem)</span>
<a href="#l4.128"></a><span id="l4.128" class="difflineminus">-            break;</span>
<a href="#l4.129"></a><span id="l4.129" class="difflineminus">-          if (node == this)</span>
<a href="#l4.130"></a><span id="l4.130" class="difflineminus">-            return;</span>
<a href="#l4.131"></a><span id="l4.131" class="difflineminus">-          node = node.parentNode;</span>
<a href="#l4.132"></a><span id="l4.132" class="difflineminus">-        }</span>
<a href="#l4.133"></a><span id="l4.133" class="difflineminus">-</span>
<a href="#l4.134"></a><span id="l4.134" class="difflineminus">-        this._parentMenupopup.hidePopup();</span>
<a href="#l4.135"></a><span id="l4.135" class="difflineminus">-      ]]&gt;&lt;/handler&gt;</span>
<a href="#l4.136"></a><span id="l4.136" class="difflineminus">-    &lt;/handlers&gt;</span>
<a href="#l4.137"></a><span id="l4.137" class="difflineminus">-  &lt;/binding&gt;</span>
<a href="#l4.138"></a><span id="l4.138" class="difflineminus">-&lt;/bindings&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/base/content/mailWindowOverlay.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/base/content/mailWindowOverlay.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -66,19 +66,21 @@ var kAllowRemoteContent = 2;</span>
<a href="#l5.4"></a><span id="l5.4"> var gMarkViewedMessageAsReadTimer = null;</span>
<a href="#l5.5"></a><span id="l5.5"> </span>
<a href="#l5.6"></a><span id="l5.6"> // the user preference,</span>
<a href="#l5.7"></a><span id="l5.7"> // if HTML is not allowed. I assume, that the user could have set this to a</span>
<a href="#l5.8"></a><span id="l5.8"> // value &gt; 1 in his prefs.js or user.js, but that the value will not</span>
<a href="#l5.9"></a><span id="l5.9"> // change during runtime other than through the MsgBody*() functions below.</span>
<a href="#l5.10"></a><span id="l5.10"> var gDisallow_classes_no_html = 1;</span>
<a href="#l5.11"></a><span id="l5.11"> </span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-// Disable the new account menu item if the account preference is locked.</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-// The other affected areas are the account central, the account manager</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineminus">-// dialog, and the account provisioner window.</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineplus">+/**</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+ * Disable the new account menu item if the account preference is locked.</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineplus">+ * The other affected areas are the account central, the account manager</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineplus">+ * dialog, and the account provisioner window.</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineplus">+ */</span>
<a href="#l5.20"></a><span id="l5.20"> function menu_new_init() {</span>
<a href="#l5.21"></a><span id="l5.21">   // If the account provisioner is pref'd off, we shouldn't display the menu</span>
<a href="#l5.22"></a><span id="l5.22">   // item.</span>
<a href="#l5.23"></a><span id="l5.23">   ShowMenuItem(&quot;newCreateEmailAccountMenuItem&quot;,</span>
<a href="#l5.24"></a><span id="l5.24">                Services.prefs.getBoolPref(&quot;mail.provider.enabled&quot;));</span>
<a href="#l5.25"></a><span id="l5.25"> </span>
<a href="#l5.26"></a><span id="l5.26">   // If we don't have a gFolderDisplay, just get out of here and leave the menu</span>
<a href="#l5.27"></a><span id="l5.27">   // as it is.</span>
<a href="#l5.28"></a><span id="l5.28" class="difflineat">@@ -157,17 +159,17 @@ function InitEditMessagesMenu() {</span>
<a href="#l5.29"></a><span id="l5.29">   }</span>
<a href="#l5.30"></a><span id="l5.30"> }</span>
<a href="#l5.31"></a><span id="l5.31"> </span>
<a href="#l5.32"></a><span id="l5.32"> function InitAppFolderViewsMenu() {</span>
<a href="#l5.33"></a><span id="l5.33">   goSetMenuValue(&quot;cmd_delete&quot;, &quot;valueDefault&quot;);</span>
<a href="#l5.34"></a><span id="l5.34">   goSetAccessKey(&quot;cmd_delete&quot;, &quot;valueDefaultAccessKey&quot;);</span>
<a href="#l5.35"></a><span id="l5.35">   document.commandDispatcher.updateCommands(&quot;create-menu-edit&quot;);</span>
<a href="#l5.36"></a><span id="l5.36"> </span>
<a href="#l5.37"></a><span id="l5.37" class="difflineminus">-  // initialize the favorite Folder checkbox in the appmenu menu</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineplus">+  // Initialize the favorite Folder checkbox in the appmenu menu.</span>
<a href="#l5.39"></a><span id="l5.39">   let favoriteAppFolderMenu = document.getElementById(&quot;appmenu_favoriteFolder&quot;);</span>
<a href="#l5.40"></a><span id="l5.40">   if (!favoriteAppFolderMenu.hasAttribute(&quot;disabled&quot;)) {</span>
<a href="#l5.41"></a><span id="l5.41">     let folders = gFolderTreeView.getSelectedFolders();</span>
<a href="#l5.42"></a><span id="l5.42">     if (folders.length == 1 &amp;&amp; !folders[0].isServer) {</span>
<a href="#l5.43"></a><span id="l5.43">       // Adjust the checked state on the menu item.</span>
<a href="#l5.44"></a><span id="l5.44">       favoriteAppFolderMenu.setAttribute(&quot;checked&quot;,</span>
<a href="#l5.45"></a><span id="l5.45">         folders[0].getFlag(Ci.nsMsgFolderFlags.Favorite));</span>
<a href="#l5.46"></a><span id="l5.46">       favoriteAppFolderMenu.hidden = false;</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineat">@@ -288,22 +290,27 @@ function view_init() {</span>
<a href="#l5.48"></a><span id="l5.48">   // Disable the charset item if there's nothing to enable</span>
<a href="#l5.49"></a><span id="l5.49">   document.getElementById(&quot;charsetMenu&quot;)</span>
<a href="#l5.50"></a><span id="l5.50">           .setAttribute(&quot;disabled&quot;, !gMessageDisplay.displayedMessage);</span>
<a href="#l5.51"></a><span id="l5.51">   let appmenuCharset = document.getElementById(&quot;appmenu_charsetMenu&quot;);</span>
<a href="#l5.52"></a><span id="l5.52">   if (appmenuCharset)</span>
<a href="#l5.53"></a><span id="l5.53">     appmenuCharset.setAttribute(&quot;disabled&quot;, !gMessageDisplay.displayedMessage);</span>
<a href="#l5.54"></a><span id="l5.54"> }</span>
<a href="#l5.55"></a><span id="l5.55"> </span>
<a href="#l5.56"></a><span id="l5.56" class="difflineminus">-function InitViewLayoutStyleMenu(event) {</span>
<a href="#l5.57"></a><span id="l5.57" class="difflineplus">+function InitViewLayoutStyleMenu(event, appmenu) {</span>
<a href="#l5.58"></a><span id="l5.58">   // Prevent submenus from unnecessarily triggering onViewToolbarsPopupShowing</span>
<a href="#l5.59"></a><span id="l5.59">   // via bubbling of events.</span>
<a href="#l5.60"></a><span id="l5.60">   event.stopImmediatePropagation();</span>
<a href="#l5.61"></a><span id="l5.61" class="difflineminus">-  var paneConfig = Services.prefs.getIntPref(&quot;mail.pane_config.dynamic&quot;);</span>
<a href="#l5.62"></a><span id="l5.62" class="difflineminus">-  var layoutStyleMenuitem = event.target.childNodes[paneConfig];</span>
<a href="#l5.63"></a><span id="l5.63" class="difflineplus">+  let paneConfig = Services.prefs.getIntPref(&quot;mail.pane_config.dynamic&quot;);</span>
<a href="#l5.64"></a><span id="l5.64" class="difflineplus">+</span>
<a href="#l5.65"></a><span id="l5.65" class="difflineplus">+  let parent = appmenu</span>
<a href="#l5.66"></a><span id="l5.66" class="difflineplus">+    ? event.target.querySelector(&quot;.panel-subview-body&quot;)</span>
<a href="#l5.67"></a><span id="l5.67" class="difflineplus">+    : event.target;</span>
<a href="#l5.68"></a><span id="l5.68" class="difflineplus">+</span>
<a href="#l5.69"></a><span id="l5.69" class="difflineplus">+  let layoutStyleMenuitem = parent.childNodes[paneConfig];</span>
<a href="#l5.70"></a><span id="l5.70">   if (layoutStyleMenuitem)</span>
<a href="#l5.71"></a><span id="l5.71">     layoutStyleMenuitem.setAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l5.72"></a><span id="l5.72"> }</span>
<a href="#l5.73"></a><span id="l5.73"> </span>
<a href="#l5.74"></a><span id="l5.74"> /**</span>
<a href="#l5.75"></a><span id="l5.75">  * Initialize (check) appropriate folder mode under the View | Folder menu.</span>
<a href="#l5.76"></a><span id="l5.76">  */</span>
<a href="#l5.77"></a><span id="l5.77"> function InitViewFolderViewsMenu(event) {</span>
<a href="#l5.78"></a><span id="l5.78" class="difflineat">@@ -563,20 +570,22 @@ function InitAppMessageMenu() {</span>
<a href="#l5.79"></a><span id="l5.79">                              Ci.nsMsgFolderFlags.Templates);</span>
<a href="#l5.80"></a><span id="l5.80"> </span>
<a href="#l5.81"></a><span id="l5.81">   // Initialize the Open Message menuitem</span>
<a href="#l5.82"></a><span id="l5.82">   let winType = document.documentElement.getAttribute(&quot;windowtype&quot;);</span>
<a href="#l5.83"></a><span id="l5.83">   if (winType == &quot;mail:3pane&quot;)</span>
<a href="#l5.84"></a><span id="l5.84">     document.getElementById(&quot;appmenu_openMessageWindowMenuitem&quot;).hidden = isFeed;</span>
<a href="#l5.85"></a><span id="l5.85"> </span>
<a href="#l5.86"></a><span id="l5.86">   // Initialize the Open Feed Message handler menu</span>
<a href="#l5.87"></a><span id="l5.87" class="difflineplus">+  const openFeedView = document.getElementById(&quot;appMenu-messageOpenFeedView&quot;)</span>
<a href="#l5.88"></a><span id="l5.88" class="difflineplus">+    .querySelector(&quot;.panel-subview-body&quot;);</span>
<a href="#l5.89"></a><span id="l5.89" class="difflineplus">+</span>
<a href="#l5.90"></a><span id="l5.90" class="difflineplus">+  openFeedView.childNodes.forEach(node =&gt; node.removeAttribute(&quot;checked&quot;));</span>
<a href="#l5.91"></a><span id="l5.91">   let index = FeedMessageHandler.onOpenPref;</span>
<a href="#l5.92"></a><span id="l5.92" class="difflineminus">-  document.getElementById(&quot;appmenu_openFeedMessagePopup&quot;)</span>
<a href="#l5.93"></a><span id="l5.93" class="difflineminus">-          .childNodes[index]</span>
<a href="#l5.94"></a><span id="l5.94" class="difflineminus">-          .setAttribute(&quot;checked&quot;, true);</span>
<a href="#l5.95"></a><span id="l5.95" class="difflineplus">+  openFeedView.childNodes[index].setAttribute(&quot;checked&quot;, true);</span>
<a href="#l5.96"></a><span id="l5.96"> </span>
<a href="#l5.97"></a><span id="l5.97">   let openRssMenu = document.getElementById(&quot;appmenu_openFeedMessage&quot;);</span>
<a href="#l5.98"></a><span id="l5.98">   openRssMenu.hidden = !isFeed;</span>
<a href="#l5.99"></a><span id="l5.99">   if (winType != &quot;mail:3pane&quot;)</span>
<a href="#l5.100"></a><span id="l5.100">     openRssMenu.hidden = true;</span>
<a href="#l5.101"></a><span id="l5.101"> </span>
<a href="#l5.102"></a><span id="l5.102">   // Disable mark menu when we're not in a folder.</span>
<a href="#l5.103"></a><span id="l5.103">   document.getElementById(&quot;appmenu_markMenu&quot;).disabled = gMessageDisplay.isDummy;</span>
<a href="#l5.104"></a><span id="l5.104" class="difflineat">@@ -725,16 +734,24 @@ function InitAppmenuViewBodyMenu() {</span>
<a href="#l5.105"></a><span id="l5.105">   let Sanitized_menuitem = document.getElementById(menuIDs[1]);</span>
<a href="#l5.106"></a><span id="l5.106">   let AsPlaintext_menuitem = document.getElementById(menuIDs[2]);</span>
<a href="#l5.107"></a><span id="l5.107">   let AllBodyParts_menuitem = menuIDs[3] ? document.getElementById(menuIDs[3])</span>
<a href="#l5.108"></a><span id="l5.108">                                          : null;</span>
<a href="#l5.109"></a><span id="l5.109"> </span>
<a href="#l5.110"></a><span id="l5.110">   document.getElementById(&quot;appmenu_bodyAllParts&quot;).hidden =</span>
<a href="#l5.111"></a><span id="l5.111">     !Services.prefs.getBoolPref(&quot;mailnews.display.show_all_body_parts_menu&quot;);</span>
<a href="#l5.112"></a><span id="l5.112"> </span>
<a href="#l5.113"></a><span id="l5.113" class="difflineplus">+  // Clear all checkmarks.</span>
<a href="#l5.114"></a><span id="l5.114" class="difflineplus">+  AllowHTML_menuitem.removeAttribute(&quot;checked&quot;);</span>
<a href="#l5.115"></a><span id="l5.115" class="difflineplus">+  Sanitized_menuitem.removeAttribute(&quot;checked&quot;);</span>
<a href="#l5.116"></a><span id="l5.116" class="difflineplus">+  AsPlaintext_menuitem.removeAttribute(&quot;checked&quot;);</span>
<a href="#l5.117"></a><span id="l5.117" class="difflineplus">+  if (AllBodyParts_menuitem) {</span>
<a href="#l5.118"></a><span id="l5.118" class="difflineplus">+    AllBodyParts_menuitem.removeAttribute(&quot;checked&quot;);</span>
<a href="#l5.119"></a><span id="l5.119" class="difflineplus">+  }</span>
<a href="#l5.120"></a><span id="l5.120" class="difflineplus">+</span>
<a href="#l5.121"></a><span id="l5.121">   if (!prefer_plaintext &amp;&amp; !html_as &amp;&amp; !disallow_classes &amp;&amp;</span>
<a href="#l5.122"></a><span id="l5.122">       AllowHTML_menuitem)</span>
<a href="#l5.123"></a><span id="l5.123">     AllowHTML_menuitem.setAttribute(&quot;checked&quot;, true);</span>
<a href="#l5.124"></a><span id="l5.124">   else if (!prefer_plaintext &amp;&amp; html_as == 3 &amp;&amp; disallow_classes &gt; 0 &amp;&amp;</span>
<a href="#l5.125"></a><span id="l5.125">            Sanitized_menuitem)</span>
<a href="#l5.126"></a><span id="l5.126">     Sanitized_menuitem.setAttribute(&quot;checked&quot;, true);</span>
<a href="#l5.127"></a><span id="l5.127">   else if (prefer_plaintext &amp;&amp; html_as == 1 &amp;&amp; disallow_classes &gt; 0 &amp;&amp;</span>
<a href="#l5.128"></a><span id="l5.128">            AsPlaintext_menuitem)</span>
<a href="#l5.129"></a><span id="l5.129" class="difflineat">@@ -958,89 +975,127 @@ function SetMessageTagLabel(menuitem, in</span>
<a href="#l5.130"></a><span id="l5.130">     menuitem.setAttribute(&quot;acceltext&quot;, accesskey);</span>
<a href="#l5.131"></a><span id="l5.131">   }</span>
<a href="#l5.132"></a><span id="l5.132">   let label = document.getElementById(&quot;bundle_messenger&quot;)</span>
<a href="#l5.133"></a><span id="l5.133">                       .getFormattedString(&quot;mailnews.tags.format&quot;,</span>
<a href="#l5.134"></a><span id="l5.134">                                           [accesskey, name]);</span>
<a href="#l5.135"></a><span id="l5.135">   menuitem.setAttribute(&quot;label&quot;, label);</span>
<a href="#l5.136"></a><span id="l5.136"> }</span>
<a href="#l5.137"></a><span id="l5.137"> </span>
<a href="#l5.138"></a><span id="l5.138" class="difflineminus">-function InitMessageTags(menuPopup) {</span>
<a href="#l5.139"></a><span id="l5.139" class="difflineminus">-  let tagArray = MailServices.tags.getAllTags({});</span>
<a href="#l5.140"></a><span id="l5.140" class="difflineminus">-  var tagCount = tagArray.length;</span>
<a href="#l5.141"></a><span id="l5.141" class="difflineminus">-</span>
<a href="#l5.142"></a><span id="l5.142" class="difflineminus">-  // Remove any existing non-static entries... (clear tags list before rebuilding it)</span>
<a href="#l5.143"></a><span id="l5.143" class="difflineminus">-  // &quot;5&quot; is the number of menu items (including separators) on the top of the menu</span>
<a href="#l5.144"></a><span id="l5.144" class="difflineminus">-  // that should not be cleared.</span>
<a href="#l5.145"></a><span id="l5.145" class="difflineminus">-  for (let i = menuPopup.childNodes.length; i &gt; 5; --i)</span>
<a href="#l5.146"></a><span id="l5.146" class="difflineminus">-    menuPopup.lastChild.remove();</span>
<a href="#l5.147"></a><span id="l5.147" class="difflineminus">-</span>
<a href="#l5.148"></a><span id="l5.148" class="difflineminus">-  // create label and accesskey for the static remove item</span>
<a href="#l5.149"></a><span id="l5.149" class="difflineminus">-  var tagRemoveLabel = document.getElementById(&quot;bundle_messenger&quot;)</span>
<a href="#l5.150"></a><span id="l5.150" class="difflineminus">-                               .getString(&quot;mailnews.tags.remove&quot;);</span>
<a href="#l5.151"></a><span id="l5.151" class="difflineminus">-  SetMessageTagLabel(menuPopup.lastChild.previousSibling, 0, tagRemoveLabel);</span>
<a href="#l5.152"></a><span id="l5.152" class="difflineminus">-</span>
<a href="#l5.153"></a><span id="l5.153" class="difflineminus">-  // now rebuild the list</span>
<a href="#l5.154"></a><span id="l5.154" class="difflineminus">-  var msgHdr = gFolderDisplay.selectedMessage;</span>
<a href="#l5.155"></a><span id="l5.155" class="difflineminus">-  var curKeys = msgHdr.getStringProperty(&quot;keywords&quot;);</span>
<a href="#l5.156"></a><span id="l5.156" class="difflineminus">-  if (msgHdr.label)</span>
<a href="#l5.157"></a><span id="l5.157" class="difflineminus">-    curKeys += &quot; $label&quot; + msgHdr.label;</span>
<a href="#l5.158"></a><span id="l5.158" class="difflineminus">-</span>
<a href="#l5.159"></a><span id="l5.159" class="difflineminus">-  for (var i = 0; i &lt; tagCount; ++i) {</span>
<a href="#l5.160"></a><span id="l5.160" class="difflineminus">-    var taginfo = tagArray[i];</span>
<a href="#l5.161"></a><span id="l5.161" class="difflineminus">-    let removeKey = (&quot; &quot; + curKeys + &quot; &quot;).includes(&quot; &quot; + taginfo.key + &quot; &quot;);</span>
<a href="#l5.162"></a><span id="l5.162" class="difflineminus">-    if (taginfo.ordinal.includes(&quot;~AUTOTAG&quot;) &amp;&amp; !removeKey)</span>
<a href="#l5.163"></a><span id="l5.163" class="difflineminus">-      continue;</span>
<a href="#l5.164"></a><span id="l5.164" class="difflineminus">-</span>
<a href="#l5.165"></a><span id="l5.165" class="difflineminus">-    // TODO we want to either remove or &quot;check&quot; the tags that already exist</span>
<a href="#l5.166"></a><span id="l5.166" class="difflineminus">-    var newMenuItem = document.createXULElement(&quot;menuitem&quot;);</span>
<a href="#l5.167"></a><span id="l5.167" class="difflineminus">-    SetMessageTagLabel(newMenuItem, i + 1, taginfo.tag);</span>
<a href="#l5.168"></a><span id="l5.168" class="difflineminus">-    newMenuItem.setAttribute(&quot;value&quot;, taginfo.key);</span>
<a href="#l5.169"></a><span id="l5.169" class="difflineminus">-    newMenuItem.setAttribute(&quot;type&quot;, &quot;checkbox&quot;);</span>
<a href="#l5.170"></a><span id="l5.170" class="difflineminus">-    newMenuItem.setAttribute(&quot;checked&quot;, removeKey);</span>
<a href="#l5.171"></a><span id="l5.171" class="difflineminus">-    newMenuItem.setAttribute(&quot;oncommand&quot;, &quot;ToggleMessageTagMenu(event.target);&quot;);</span>
<a href="#l5.172"></a><span id="l5.172" class="difflineminus">-    var color = taginfo.color;</span>
<a href="#l5.173"></a><span id="l5.173" class="difflineminus">-    if (color)</span>
<a href="#l5.174"></a><span id="l5.174" class="difflineminus">-      newMenuItem.setAttribute(&quot;style&quot;, &quot;color: &quot; + color + &quot;;&quot;);</span>
<a href="#l5.175"></a><span id="l5.175" class="difflineminus">-    menuPopup.appendChild(newMenuItem);</span>
<a href="#l5.176"></a><span id="l5.176" class="difflineplus">+/**</span>
<a href="#l5.177"></a><span id="l5.177" class="difflineplus">+ * Refresh the contents of the tag popup menu/panel.</span>
<a href="#l5.178"></a><span id="l5.178" class="difflineplus">+ * Used for example for appmenu/Message/Tag panel.</span>
<a href="#l5.179"></a><span id="l5.179" class="difflineplus">+ *</span>
<a href="#l5.180"></a><span id="l5.180" class="difflineplus">+ * @param {Element} parent          Parent element that will contain the menu items.</span>
<a href="#l5.181"></a><span id="l5.181" class="difflineplus">+ * @param {string} [elementName]    Type of menu item, e.g. &quot;menuitem&quot;, &quot;toolbarbutton&quot;.</span>
<a href="#l5.182"></a><span id="l5.182" class="difflineplus">+ * @param {string} [classes]        Classes to set on the menu items.</span>
<a href="#l5.183"></a><span id="l5.183" class="difflineplus">+ */</span>
<a href="#l5.184"></a><span id="l5.184" class="difflineplus">+function InitMessageTags(parent, elementName = &quot;menuitem&quot;, classes) {</span>
<a href="#l5.185"></a><span id="l5.185" class="difflineplus">+  const tagArray = MailServices.tags.getAllTags({});</span>
<a href="#l5.186"></a><span id="l5.186" class="difflineplus">+  const elementNameUpperCase = elementName.toUpperCase();</span>
<a href="#l5.187"></a><span id="l5.187" class="difflineplus">+</span>
<a href="#l5.188"></a><span id="l5.188" class="difflineplus">+  // Remove any existing non-static items (clear tags list before rebuilding it).</span>
<a href="#l5.189"></a><span id="l5.189" class="difflineplus">+  // There is a separator element above the dynamically added tag elements, so</span>
<a href="#l5.190"></a><span id="l5.190" class="difflineplus">+  // remove dynamically added elements below the separator.</span>
<a href="#l5.191"></a><span id="l5.191" class="difflineplus">+  while (parent.lastChild.tagName.toUpperCase() == elementNameUpperCase) {</span>
<a href="#l5.192"></a><span id="l5.192" class="difflineplus">+    parent.lastChild.remove();</span>
<a href="#l5.193"></a><span id="l5.193">   }</span>
<a href="#l5.194"></a><span id="l5.194" class="difflineplus">+</span>
<a href="#l5.195"></a><span id="l5.195" class="difflineplus">+  // Create label and accesskey for the static &quot;remove all tags&quot; item.</span>
<a href="#l5.196"></a><span id="l5.196" class="difflineplus">+  const tagRemoveLabel = document.getElementById(&quot;bundle_messenger&quot;)</span>
<a href="#l5.197"></a><span id="l5.197" class="difflineplus">+                                 .getString(&quot;mailnews.tags.remove&quot;);</span>
<a href="#l5.198"></a><span id="l5.198" class="difflineplus">+  SetMessageTagLabel(parent.lastChild.previousSibling, 0, tagRemoveLabel);</span>
<a href="#l5.199"></a><span id="l5.199" class="difflineplus">+</span>
<a href="#l5.200"></a><span id="l5.200" class="difflineplus">+  // Rebuild the list.</span>
<a href="#l5.201"></a><span id="l5.201" class="difflineplus">+  const msgHdr = gFolderDisplay.selectedMessage;</span>
<a href="#l5.202"></a><span id="l5.202" class="difflineplus">+  const suffix = msgHdr.label ? (&quot; $label&quot; + msgHdr.label) : &quot;&quot;;</span>
<a href="#l5.203"></a><span id="l5.203" class="difflineplus">+  const curKeys = msgHdr.getStringProperty(&quot;keywords&quot;) + suffix;</span>
<a href="#l5.204"></a><span id="l5.204" class="difflineplus">+</span>
<a href="#l5.205"></a><span id="l5.205" class="difflineplus">+  tagArray.forEach((tagInfo, index) =&gt; {</span>
<a href="#l5.206"></a><span id="l5.206" class="difflineplus">+    const removeKey = (` ${curKeys} `).includes(` ${tagInfo.key} `);</span>
<a href="#l5.207"></a><span id="l5.207" class="difflineplus">+</span>
<a href="#l5.208"></a><span id="l5.208" class="difflineplus">+    if (tagInfo.ordinal.includes(&quot;~AUTOTAG&quot;) &amp;&amp; !removeKey) {</span>
<a href="#l5.209"></a><span id="l5.209" class="difflineplus">+      return;</span>
<a href="#l5.210"></a><span id="l5.210" class="difflineplus">+    }</span>
<a href="#l5.211"></a><span id="l5.211" class="difflineplus">+    // TODO We want to either remove or &quot;check&quot; the tags that already exist.</span>
<a href="#l5.212"></a><span id="l5.212" class="difflineplus">+    let item = document.createXULElement(elementName);</span>
<a href="#l5.213"></a><span id="l5.213" class="difflineplus">+    SetMessageTagLabel(item, index + 1, tagInfo.tag);</span>
<a href="#l5.214"></a><span id="l5.214" class="difflineplus">+</span>
<a href="#l5.215"></a><span id="l5.215" class="difflineplus">+    if (removeKey) {</span>
<a href="#l5.216"></a><span id="l5.216" class="difflineplus">+      item.setAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l5.217"></a><span id="l5.217" class="difflineplus">+    }</span>
<a href="#l5.218"></a><span id="l5.218" class="difflineplus">+    item.setAttribute(&quot;value&quot;, tagInfo.key);</span>
<a href="#l5.219"></a><span id="l5.219" class="difflineplus">+    item.setAttribute(&quot;type&quot;, &quot;checkbox&quot;);</span>
<a href="#l5.220"></a><span id="l5.220" class="difflineplus">+    item.setAttribute(&quot;oncommand&quot;, &quot;ToggleMessageTagMenu(event.target);&quot;);</span>
<a href="#l5.221"></a><span id="l5.221" class="difflineplus">+</span>
<a href="#l5.222"></a><span id="l5.222" class="difflineplus">+    if (tagInfo.color) {</span>
<a href="#l5.223"></a><span id="l5.223" class="difflineplus">+      item.setAttribute(&quot;style&quot;, `color: ${tagInfo.color};`);</span>
<a href="#l5.224"></a><span id="l5.224" class="difflineplus">+    }</span>
<a href="#l5.225"></a><span id="l5.225" class="difflineplus">+    if (classes) {</span>
<a href="#l5.226"></a><span id="l5.226" class="difflineplus">+      item.setAttribute(&quot;class&quot;, classes);</span>
<a href="#l5.227"></a><span id="l5.227" class="difflineplus">+    }</span>
<a href="#l5.228"></a><span id="l5.228" class="difflineplus">+    parent.appendChild(item);</span>
<a href="#l5.229"></a><span id="l5.229" class="difflineplus">+  });</span>
<a href="#l5.230"></a><span id="l5.230"> }</span>
<a href="#l5.231"></a><span id="l5.231"> </span>
<a href="#l5.232"></a><span id="l5.232" class="difflineminus">-function InitRecentlyClosedTabsPopup(menuPopup) {</span>
<a href="#l5.233"></a><span id="l5.233" class="difflineminus">-  let tabs = document.getElementById(&quot;tabmail&quot;).recentlyClosedTabs;</span>
<a href="#l5.234"></a><span id="l5.234" class="difflineminus">-</span>
<a href="#l5.235"></a><span id="l5.235" class="difflineminus">-  // show Popup only when there are restorable tabs.</span>
<a href="#l5.236"></a><span id="l5.236" class="difflineminus">-  if (!tabs.length)</span>
<a href="#l5.237"></a><span id="l5.237" class="difflineplus">+/**</span>
<a href="#l5.238"></a><span id="l5.238" class="difflineplus">+ * Refresh the contents of the recently closed tags popup menu/panel.</span>
<a href="#l5.239"></a><span id="l5.239" class="difflineplus">+ * Used for example for appmenu/Go/Recently_Closed_Tabs panel.</span>
<a href="#l5.240"></a><span id="l5.240" class="difflineplus">+ *</span>
<a href="#l5.241"></a><span id="l5.241" class="difflineplus">+ * @param {Element} parent          Parent element that will contain the menu items.</span>
<a href="#l5.242"></a><span id="l5.242" class="difflineplus">+ * @param {string} [elementName]    Type of menu item, e.g. &quot;menuitem&quot;, &quot;toolbarbutton&quot;.</span>
<a href="#l5.243"></a><span id="l5.243" class="difflineplus">+ * @param {string} [classes]        Classes to set on the menu items.</span>
<a href="#l5.244"></a><span id="l5.244" class="difflineplus">+ * @param {string} [separatorName]  Type of separator, e.g. &quot;menuseparator&quot;, &quot;toolbarseparator&quot;.</span>
<a href="#l5.245"></a><span id="l5.245" class="difflineplus">+ */</span>
<a href="#l5.246"></a><span id="l5.246" class="difflineplus">+function InitRecentlyClosedTabsPopup(</span>
<a href="#l5.247"></a><span id="l5.247" class="difflineplus">+  parent,</span>
<a href="#l5.248"></a><span id="l5.248" class="difflineplus">+  elementName = &quot;menuitem&quot;,</span>
<a href="#l5.249"></a><span id="l5.249" class="difflineplus">+  classes,</span>
<a href="#l5.250"></a><span id="l5.250" class="difflineplus">+  separatorName = &quot;menuseparator&quot;,</span>
<a href="#l5.251"></a><span id="l5.251" class="difflineplus">+) {</span>
<a href="#l5.252"></a><span id="l5.252" class="difflineplus">+  const tabs = document.getElementById(&quot;tabmail&quot;).recentlyClosedTabs;</span>
<a href="#l5.253"></a><span id="l5.253" class="difflineplus">+</span>
<a href="#l5.254"></a><span id="l5.254" class="difflineplus">+  // Show Popup only when there are restorable tabs.</span>
<a href="#l5.255"></a><span id="l5.255" class="difflineplus">+  if (!tabs.length) {</span>
<a href="#l5.256"></a><span id="l5.256">     return false;</span>
<a href="#l5.257"></a><span id="l5.257" class="difflineminus">-</span>
<a href="#l5.258"></a><span id="l5.258" class="difflineminus">-  // Clear the list before rebuilding it.</span>
<a href="#l5.259"></a><span id="l5.259" class="difflineminus">-  while (menuPopup.hasChildNodes())</span>
<a href="#l5.260"></a><span id="l5.260" class="difflineminus">-    menuPopup.lastChild.remove();</span>
<a href="#l5.261"></a><span id="l5.261" class="difflineminus">-</span>
<a href="#l5.262"></a><span id="l5.262" class="difflineminus">-  // Rebuild the recently closed tab list</span>
<a href="#l5.263"></a><span id="l5.263" class="difflineminus">-  for (let i = 0; i &lt; tabs.length; i++) {</span>
<a href="#l5.264"></a><span id="l5.264" class="difflineminus">-    let menuItem = document.createXULElement(&quot;menuitem&quot;);</span>
<a href="#l5.265"></a><span id="l5.265" class="difflineminus">-    menuItem.setAttribute(&quot;label&quot;, tabs[i].title);</span>
<a href="#l5.266"></a><span id="l5.266" class="difflineminus">-    menuItem.setAttribute(&quot;oncommand&quot;, `document.getElementById(&quot;tabmail&quot;).undoCloseTab(${i});`);</span>
<a href="#l5.267"></a><span id="l5.267" class="difflineminus">-</span>
<a href="#l5.268"></a><span id="l5.268" class="difflineminus">-    if (i == 0)</span>
<a href="#l5.269"></a><span id="l5.269" class="difflineminus">-      menuItem.setAttribute(&quot;key&quot;, &quot;key_undoCloseTab&quot;);</span>
<a href="#l5.270"></a><span id="l5.270" class="difflineminus">-</span>
<a href="#l5.271"></a><span id="l5.271" class="difflineminus">-    menuPopup.appendChild(menuItem);</span>
<a href="#l5.272"></a><span id="l5.272" class="difflineplus">+  }</span>
<a href="#l5.273"></a><span id="l5.273" class="difflineplus">+</span>
<a href="#l5.274"></a><span id="l5.274" class="difflineplus">+  // Clear the list.</span>
<a href="#l5.275"></a><span id="l5.275" class="difflineplus">+  while (parent.hasChildNodes()) {</span>
<a href="#l5.276"></a><span id="l5.276" class="difflineplus">+    parent.lastChild.remove();</span>
<a href="#l5.277"></a><span id="l5.277">   }</span>
<a href="#l5.278"></a><span id="l5.278"> </span>
<a href="#l5.279"></a><span id="l5.279" class="difflineminus">-  // &quot;Restore All Tabs&quot; with only one entry does not make sense</span>
<a href="#l5.280"></a><span id="l5.280" class="difflineplus">+  // Insert menu items to rebuild the recently closed tab list.</span>
<a href="#l5.281"></a><span id="l5.281" class="difflineplus">+  tabs.forEach((tab, index) =&gt; {</span>
<a href="#l5.282"></a><span id="l5.282" class="difflineplus">+    const item = document.createXULElement(elementName);</span>
<a href="#l5.283"></a><span id="l5.283" class="difflineplus">+    item.setAttribute(&quot;label&quot;, tab.title);</span>
<a href="#l5.284"></a><span id="l5.284" class="difflineplus">+    item.setAttribute(&quot;oncommand&quot;, `document.getElementById(&quot;tabmail&quot;).undoCloseTab(${index});`);</span>
<a href="#l5.285"></a><span id="l5.285" class="difflineplus">+    if (classes) {</span>
<a href="#l5.286"></a><span id="l5.286" class="difflineplus">+      item.setAttribute(&quot;class&quot;, classes);</span>
<a href="#l5.287"></a><span id="l5.287" class="difflineplus">+    }</span>
<a href="#l5.288"></a><span id="l5.288" class="difflineplus">+</span>
<a href="#l5.289"></a><span id="l5.289" class="difflineplus">+    if (index == 0) {</span>
<a href="#l5.290"></a><span id="l5.290" class="difflineplus">+      item.setAttribute(&quot;key&quot;, &quot;key_undoCloseTab&quot;);</span>
<a href="#l5.291"></a><span id="l5.291" class="difflineplus">+    }</span>
<a href="#l5.292"></a><span id="l5.292" class="difflineplus">+    parent.appendChild(item);</span>
<a href="#l5.293"></a><span id="l5.293" class="difflineplus">+  });</span>
<a href="#l5.294"></a><span id="l5.294" class="difflineplus">+</span>
<a href="#l5.295"></a><span id="l5.295" class="difflineplus">+  // Only show &quot;Restore All Tabs&quot; if there is more than one tab to restore.</span>
<a href="#l5.296"></a><span id="l5.296">   if (tabs.length &gt; 1) {</span>
<a href="#l5.297"></a><span id="l5.297" class="difflineminus">-    menuPopup.appendChild(document.createXULElement(&quot;menuseparator&quot;));</span>
<a href="#l5.298"></a><span id="l5.298" class="difflineminus">-</span>
<a href="#l5.299"></a><span id="l5.299" class="difflineminus">-    let menuItem = document.createXULElement(&quot;menuitem&quot;);</span>
<a href="#l5.300"></a><span id="l5.300" class="difflineminus">-    menuItem.setAttribute(&quot;label&quot;, document.getElementById(&quot;bundle_messenger&quot;)</span>
<a href="#l5.301"></a><span id="l5.301" class="difflineplus">+    parent.appendChild(document.createXULElement(separatorName));</span>
<a href="#l5.302"></a><span id="l5.302" class="difflineplus">+</span>
<a href="#l5.303"></a><span id="l5.303" class="difflineplus">+    const item = document.createXULElement(elementName);</span>
<a href="#l5.304"></a><span id="l5.304" class="difflineplus">+    item.setAttribute(&quot;label&quot;, document.getElementById(&quot;bundle_messenger&quot;)</span>
<a href="#l5.305"></a><span id="l5.305">                                            .getString(&quot;restoreAllTabs&quot;));</span>
<a href="#l5.306"></a><span id="l5.306" class="difflineminus">-    menuItem.setAttribute(&quot;oncommand&quot;, &quot;goRestoreAllTabs();&quot;);</span>
<a href="#l5.307"></a><span id="l5.307" class="difflineminus">-    menuPopup.appendChild(menuItem);</span>
<a href="#l5.308"></a><span id="l5.308" class="difflineplus">+    item.setAttribute(&quot;oncommand&quot;, &quot;goRestoreAllTabs();&quot;);</span>
<a href="#l5.309"></a><span id="l5.309" class="difflineplus">+</span>
<a href="#l5.310"></a><span id="l5.310" class="difflineplus">+    if (classes) {</span>
<a href="#l5.311"></a><span id="l5.311" class="difflineplus">+      item.setAttribute(&quot;class&quot;, classes);</span>
<a href="#l5.312"></a><span id="l5.312" class="difflineplus">+    }</span>
<a href="#l5.313"></a><span id="l5.313" class="difflineplus">+    parent.appendChild(item);</span>
<a href="#l5.314"></a><span id="l5.314">   }</span>
<a href="#l5.315"></a><span id="l5.315"> </span>
<a href="#l5.316"></a><span id="l5.316">   return true;</span>
<a href="#l5.317"></a><span id="l5.317"> }</span>
<a href="#l5.318"></a><span id="l5.318"> </span>
<a href="#l5.319"></a><span id="l5.319"> function goRestoreAllTabs() {</span>
<a href="#l5.320"></a><span id="l5.320">   let tabmail = document.getElementById(&quot;tabmail&quot;);</span>
<a href="#l5.321"></a><span id="l5.321"> </span>
<a href="#l5.322"></a><span id="l5.322" class="difflineat">@@ -3176,45 +3231,45 @@ function OpenOrFocusWindow(args, windowT</span>
<a href="#l5.323"></a><span id="l5.323">     desiredWindow.focus();</span>
<a href="#l5.324"></a><span id="l5.324">     if (&quot;refresh&quot; in args &amp;&amp; args.refresh)</span>
<a href="#l5.325"></a><span id="l5.325">       desiredWindow.refresh(args);</span>
<a href="#l5.326"></a><span id="l5.326">   } else {</span>
<a href="#l5.327"></a><span id="l5.327">     window.openDialog(chromeURL, &quot;&quot;, &quot;chrome,resizable,status,centerscreen,dialog=no&quot;, args);</span>
<a href="#l5.328"></a><span id="l5.328">   }</span>
<a href="#l5.329"></a><span id="l5.329"> }</span>
<a href="#l5.330"></a><span id="l5.330"> </span>
<a href="#l5.331"></a><span id="l5.331" class="difflineminus">-function initAppMenuPopup(aMenuPopup, aEvent) {</span>
<a href="#l5.332"></a><span id="l5.332" class="difflineplus">+function initAppMenuPopup() {</span>
<a href="#l5.333"></a><span id="l5.333">   file_init();</span>
<a href="#l5.334"></a><span id="l5.334">   view_init();</span>
<a href="#l5.335"></a><span id="l5.335">   InitGoMessagesMenu();</span>
<a href="#l5.336"></a><span id="l5.336">   menu_new_init();</span>
<a href="#l5.337"></a><span id="l5.337">   CommandUpdate_UndoRedo();</span>
<a href="#l5.338"></a><span id="l5.338">   InitAppFolderViewsMenu();</span>
<a href="#l5.339"></a><span id="l5.339">   document.commandDispatcher.updateCommands(&quot;create-menu-tasks&quot;);</span>
<a href="#l5.340"></a><span id="l5.340" class="difflineminus">-</span>
<a href="#l5.341"></a><span id="l5.341" class="difflineminus">-  // If the onpopupshowing event's target is on one of the splitmenu</span>
<a href="#l5.342"></a><span id="l5.342" class="difflineminus">-  // menuitem popups, stash that popup in aMenuPopup (the menupopup one</span>
<a href="#l5.343"></a><span id="l5.343" class="difflineminus">-  // level up) so that splitmenu knows which popup to close when it opens</span>
<a href="#l5.344"></a><span id="l5.344" class="difflineminus">-  // up it's popupmenu.</span>
<a href="#l5.345"></a><span id="l5.345" class="difflineminus">-  if (aEvent.target.parentNode.parentNode.parentNode.parentNode == aMenuPopup)</span>
<a href="#l5.346"></a><span id="l5.346" class="difflineminus">-    aMenuPopup._currentPopup = aEvent.target;</span>
<a href="#l5.347"></a><span id="l5.347"> }</span>
<a href="#l5.348"></a><span id="l5.348"> </span>
<a href="#l5.349"></a><span id="l5.349"> /**</span>
<a href="#l5.350"></a><span id="l5.350" class="difflineminus">- *  Generates menu items for opening preferences dialog/tab for each installed addon.</span>
<a href="#l5.351"></a><span id="l5.351" class="difflineplus">+ * Generate menu items that open a preferences dialog/tab for an installed addon,</span>
<a href="#l5.352"></a><span id="l5.352" class="difflineplus">+ * and add them to a menu popup. E.g. in the appmenu or Tools menu &gt; addon prefs.</span>
<a href="#l5.353"></a><span id="l5.353">  *</span>
<a href="#l5.354"></a><span id="l5.354" class="difflineminus">- *  @option aMenupopup  The menupopup element to populate.</span>
<a href="#l5.355"></a><span id="l5.355" class="difflineplus">+ * @param {Element} parent        The element (e.g. menupopup) to populate.</span>
<a href="#l5.356"></a><span id="l5.356" class="difflineplus">+ * @param {string} [elementName]  The kind of menu item elements to create (e.g. &quot;toolbarbutton&quot;).</span>
<a href="#l5.357"></a><span id="l5.357" class="difflineplus">+ * @param {string} [classes]      Classes for menu item elements with no icon.</span>
<a href="#l5.358"></a><span id="l5.358" class="difflineplus">+ * @param {string} [iconClasses]  Classes for menu item elements with an icon.</span>
<a href="#l5.359"></a><span id="l5.359">  */</span>
<a href="#l5.360"></a><span id="l5.360" class="difflineminus">-async function initAddonPrefsMenu(aMenupopup) {</span>
<a href="#l5.361"></a><span id="l5.361" class="difflineplus">+async function initAddonPrefsMenu(parent,</span>
<a href="#l5.362"></a><span id="l5.362" class="difflineplus">+  elementName = &quot;menuitem&quot;,</span>
<a href="#l5.363"></a><span id="l5.363" class="difflineplus">+  classes,</span>
<a href="#l5.364"></a><span id="l5.364" class="difflineplus">+  iconClasses = &quot;menuitem-iconic&quot;) {</span>
<a href="#l5.365"></a><span id="l5.365">   // Starting at the bottom, clear all menu items until we hit</span>
<a href="#l5.366"></a><span id="l5.366">   // &quot;no add-on prefs&quot;, which is the only disabled element. Above this element</span>
<a href="#l5.367"></a><span id="l5.367">   // there may be further items that we want to preserve.</span>
<a href="#l5.368"></a><span id="l5.368" class="difflineminus">-  let noPrefsElem = aMenupopup.querySelector('[disabled=&quot;true&quot;]');</span>
<a href="#l5.369"></a><span id="l5.369" class="difflineminus">-  while (aMenupopup.lastChild != noPrefsElem) {</span>
<a href="#l5.370"></a><span id="l5.370" class="difflineminus">-    aMenupopup.lastChild.remove();</span>
<a href="#l5.371"></a><span id="l5.371" class="difflineplus">+  let noPrefsElem = parent.querySelector('[disabled=&quot;true&quot;]');</span>
<a href="#l5.372"></a><span id="l5.372" class="difflineplus">+  while (parent.lastChild != noPrefsElem) {</span>
<a href="#l5.373"></a><span id="l5.373" class="difflineplus">+    parent.lastChild.remove();</span>
<a href="#l5.374"></a><span id="l5.374">   }</span>
<a href="#l5.375"></a><span id="l5.375"> </span>
<a href="#l5.376"></a><span id="l5.376">   // Enumerate all enabled addons with URL to XUL document with prefs.</span>
<a href="#l5.377"></a><span id="l5.377">   let addonsFound = [];</span>
<a href="#l5.378"></a><span id="l5.378">   for (let addon of await AddonManager.getAddonsByTypes([&quot;extension&quot;])) {</span>
<a href="#l5.379"></a><span id="l5.379">     if (addon.userDisabled || addon.appDisabled || addon.softDisabled) {</span>
<a href="#l5.380"></a><span id="l5.380">       continue;</span>
<a href="#l5.381"></a><span id="l5.381">     }</span>
<a href="#l5.382"></a><span id="l5.382" class="difflineat">@@ -3241,28 +3296,30 @@ async function initAddonPrefsMenu(aMenup</span>
<a href="#l5.383"></a><span id="l5.383">   }</span>
<a href="#l5.384"></a><span id="l5.384"> </span>
<a href="#l5.385"></a><span id="l5.385">   // Populate the menu with addon names and icons.</span>
<a href="#l5.386"></a><span id="l5.386">   // Note: Having the following code in the getAddonsByTypes() async callback</span>
<a href="#l5.387"></a><span id="l5.387">   // above works on Windows and Linux but doesn't work on Mac, see bug 1419145.</span>
<a href="#l5.388"></a><span id="l5.388">   if (addonsFound.length &gt; 0) {</span>
<a href="#l5.389"></a><span id="l5.389">     addonsFound.sort((a, b) =&gt; a.addon.name.localeCompare(b.addon.name));</span>
<a href="#l5.390"></a><span id="l5.390">     for (let { addon, optionsURL, optionsOpenInTab } of addonsFound) {</span>
<a href="#l5.391"></a><span id="l5.391" class="difflineminus">-      let newItem = document.createXULElement(&quot;menuitem&quot;);</span>
<a href="#l5.392"></a><span id="l5.392" class="difflineplus">+      let newItem = document.createXULElement(elementName);</span>
<a href="#l5.393"></a><span id="l5.393">       newItem.setAttribute(&quot;label&quot;, addon.name);</span>
<a href="#l5.394"></a><span id="l5.394">       newItem.setAttribute(&quot;value&quot;, optionsURL);</span>
<a href="#l5.395"></a><span id="l5.395">       if (optionsOpenInTab) {</span>
<a href="#l5.396"></a><span id="l5.396">         newItem.setAttribute(&quot;optionsType&quot;, &quot;tab&quot;);</span>
<a href="#l5.397"></a><span id="l5.397">       }</span>
<a href="#l5.398"></a><span id="l5.398">       let iconURL = addon.iconURL || addon.icon64URL;</span>
<a href="#l5.399"></a><span id="l5.399">       if (iconURL) {</span>
<a href="#l5.400"></a><span id="l5.400" class="difflineminus">-        newItem.setAttribute(&quot;class&quot;, &quot;menuitem-iconic&quot;);</span>
<a href="#l5.401"></a><span id="l5.401" class="difflineplus">+        newItem.setAttribute(&quot;class&quot;, iconClasses);</span>
<a href="#l5.402"></a><span id="l5.402">         newItem.setAttribute(&quot;image&quot;, iconURL);</span>
<a href="#l5.403"></a><span id="l5.403" class="difflineplus">+      } else if (classes) {</span>
<a href="#l5.404"></a><span id="l5.404" class="difflineplus">+        newItem.setAttribute(&quot;class&quot;, classes);</span>
<a href="#l5.405"></a><span id="l5.405">       }</span>
<a href="#l5.406"></a><span id="l5.406" class="difflineminus">-      aMenupopup.appendChild(newItem);</span>
<a href="#l5.407"></a><span id="l5.407" class="difflineplus">+      parent.appendChild(newItem);</span>
<a href="#l5.408"></a><span id="l5.408">     }</span>
<a href="#l5.409"></a><span id="l5.409">     noPrefsElem.setAttribute(&quot;collapsed&quot;, &quot;true&quot;);</span>
<a href="#l5.410"></a><span id="l5.410">   } else {</span>
<a href="#l5.411"></a><span id="l5.411">     // Only show message that there are no addons with prefs.</span>
<a href="#l5.412"></a><span id="l5.412">     noPrefsElem.setAttribute(&quot;collapsed&quot;, &quot;false&quot;);</span>
<a href="#l5.413"></a><span id="l5.413">   }</span>
<a href="#l5.414"></a><span id="l5.414"> }</span>
<a href="#l5.415"></a><span id="l5.415"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/base/content/mainPopupSet.inc.xul</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/base/content/mainPopupSet.inc.xul</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -1,1193 +1,12 @@</span>
<a href="#l6.4"></a><span id="l6.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l6.5"></a><span id="l6.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l6.6"></a><span id="l6.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l6.7"></a><span id="l6.7"> </span>
<a href="#l6.8"></a><span id="l6.8" class="difflineminus">-  &lt;menupopup id=&quot;appmenu-popup&quot;</span>
<a href="#l6.9"></a><span id="l6.9" class="difflineminus">-             onpopupshowing=&quot;initAppMenuPopup(this, event);&quot;&gt;</span>
<a href="#l6.10"></a><span id="l6.10" class="difflineminus">-    &lt;hbox&gt;</span>
<a href="#l6.11"></a><span id="l6.11" class="difflineminus">-      &lt;vbox id=&quot;appmenuPrimaryPane&quot;&gt;</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-        &lt;splitmenu id=&quot;appmenu_newMessage&quot;</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-                   label=&quot;&amp;appmenuNewMsgCmd.label;&quot;</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineminus">-                   command=&quot;cmd_newMessage&quot;&gt;</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineminus">-            &lt;menupopup id=&quot;appmenu_newMenupopup&quot;&gt;</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_newNewMsgCmd&quot;</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineminus">-                        label=&quot;&amp;newNewMsgCmd.label;&quot;</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineminus">-                        key=&quot;key_newMessage2&quot;</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineminus">-                        command=&quot;cmd_newMessage&quot;/&gt;</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_newFolder&quot;</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineminus">-                        label=&quot;&amp;newFolderCmd.label;&quot;</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineminus">-                        command=&quot;cmd_newFolder&quot;/&gt;</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_newVirtualFolder&quot;</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineminus">-                        label=&quot;&amp;newVirtualFolderCmd.label;&quot;</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineminus">-                        command=&quot;cmd_newVirtualFolder&quot;/&gt;</span>
<a href="#l6.26"></a><span id="l6.26" class="difflineminus">-              &lt;menuseparator id=&quot;appmenu_newAccountPopupMenuSeparator&quot;/&gt;</span>
<a href="#l6.27"></a><span id="l6.27" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_newCreateEmailAccountMenuItem&quot;</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineminus">-                        label=&quot;&amp;newCreateEmailAccountCmd.label;&quot;</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineminus">-                        oncommand=&quot;NewMailAccountProvisioner(msgWindow);&quot;/&gt;</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_newMailAccountMenuItem&quot;</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">-                        label=&quot;&amp;newExistingEmailAccountCmd.label;&quot;</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineminus">-                        oncommand=&quot;NewMailAccount(msgWindow);&quot;/&gt;</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_newIMAccountMenuItem&quot;</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineminus">-                        label=&quot;&amp;newIMAccountCmd.label;&quot;</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineminus">-                        oncommand=&quot;openIMAccountWizard();&quot;/&gt;</span>
<a href="#l6.36"></a><span id="l6.36" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_newFeedAccountMenuItem&quot;</span>
<a href="#l6.37"></a><span id="l6.37" class="difflineminus">-                        label=&quot;&amp;newFeedAccountCmd.label;&quot;</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineminus">-                        accesskey=&quot;&amp;newFeedAccountCmd.accesskey;&quot;</span>
<a href="#l6.39"></a><span id="l6.39" class="difflineminus">-                        oncommand=&quot;AddFeedAccount();&quot;/&gt;</span>
<a href="#l6.40"></a><span id="l6.40" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_newAccountMenuItem&quot;</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineminus">-                        label=&quot;&amp;newOtherAccountsCmd.label;&quot;</span>
<a href="#l6.42"></a><span id="l6.42" class="difflineminus">-                        oncommand=&quot;MsgAccountWizard();&quot;/&gt;</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineminus">-              &lt;menuseparator id=&quot;appmenu_newPopupMenuSeparator&quot;/&gt;</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_newCard&quot;</span>
<a href="#l6.45"></a><span id="l6.45" class="difflineminus">-                        label=&quot;&amp;appmenuNewContactCmd.label;&quot;</span>
<a href="#l6.46"></a><span id="l6.46" class="difflineminus">-                        command=&quot;cmd_newCard&quot;/&gt;</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_newIMContactMenuItem&quot;</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineminus">-                        label=&quot;&amp;newIMContactCmd.label;&quot;</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineminus">-                        command=&quot;cmd_addChatBuddy&quot;/&gt;</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineminus">-            &lt;/menupopup&gt;</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineminus">-        &lt;/splitmenu&gt;</span>
<a href="#l6.52"></a><span id="l6.52" class="difflineminus">-        &lt;menu id=&quot;appmenu_msgAttachmentMenu&quot;</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineminus">-              label=&quot;&amp;openAttachmentListCmd.label;&quot;</span>
<a href="#l6.54"></a><span id="l6.54" class="difflineminus">-              disabled=&quot;true&quot;&gt;</span>
<a href="#l6.55"></a><span id="l6.55" class="difflineminus">-          &lt;menupopup id=&quot;appmenu_attachmentMenuList&quot;</span>
<a href="#l6.56"></a><span id="l6.56" class="difflineminus">-                     onpopupshowing=&quot;FillAttachmentListPopup(event, this);&quot;&gt;</span>
<a href="#l6.57"></a><span id="l6.57" class="difflineminus">-            &lt;menuseparator/&gt;</span>
<a href="#l6.58"></a><span id="l6.58" class="difflineminus">-            &lt;menuitem label=&quot;&amp;openAllAttachmentsCmd.label;&quot;</span>
<a href="#l6.59"></a><span id="l6.59" class="difflineminus">-                      accesskey=&quot;&amp;openAllAttachmentsCmd.accesskey;&quot;</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineminus">-                      command=&quot;cmd_openAllAttachments&quot;/&gt;</span>
<a href="#l6.61"></a><span id="l6.61" class="difflineminus">-            &lt;menuitem label=&quot;&amp;saveAllAttachmentsCmd.label;&quot;</span>
<a href="#l6.62"></a><span id="l6.62" class="difflineminus">-                      accesskey=&quot;&amp;saveAllAttachmentsCmd.accesskey;&quot;</span>
<a href="#l6.63"></a><span id="l6.63" class="difflineminus">-                      command=&quot;cmd_saveAllAttachments&quot;/&gt;</span>
<a href="#l6.64"></a><span id="l6.64" class="difflineminus">-            &lt;menuitem label=&quot;&amp;detachAllAttachmentsCmd.label;&quot;</span>
<a href="#l6.65"></a><span id="l6.65" class="difflineminus">-                      accesskey=&quot;&amp;detachAllAttachmentsCmd.accesskey;&quot;</span>
<a href="#l6.66"></a><span id="l6.66" class="difflineminus">-                      command=&quot;cmd_detachAllAttachments&quot;/&gt;</span>
<a href="#l6.67"></a><span id="l6.67" class="difflineminus">-            &lt;menuitem label=&quot;&amp;deleteAllAttachmentsCmd.label;&quot;</span>
<a href="#l6.68"></a><span id="l6.68" class="difflineminus">-                      accesskey=&quot;&amp;deleteAllAttachmentsCmd.accesskey;&quot;</span>
<a href="#l6.69"></a><span id="l6.69" class="difflineminus">-                      command=&quot;cmd_deleteAllAttachments&quot;/&gt;</span>
<a href="#l6.70"></a><span id="l6.70" class="difflineminus">-          &lt;/menupopup&gt;</span>
<a href="#l6.71"></a><span id="l6.71" class="difflineminus">-        &lt;/menu&gt;</span>
<a href="#l6.72"></a><span id="l6.72" class="difflineminus">-        &lt;menuseparator class=&quot;appmenu-menuseparator&quot;/&gt;</span>
<a href="#l6.73"></a><span id="l6.73" class="difflineminus">-        &lt;hbox&gt;</span>
<a href="#l6.74"></a><span id="l6.74" class="difflineminus">-          &lt;menuitem id=&quot;appmenu-edit-label&quot;</span>
<a href="#l6.75"></a><span id="l6.75" class="difflineminus">-                    label=&quot;&amp;appmenuEditMenu.label;&quot;</span>
<a href="#l6.76"></a><span id="l6.76" class="difflineminus">-                    disabled=&quot;true&quot;/&gt;</span>
<a href="#l6.77"></a><span id="l6.77" class="difflineminus">-          &lt;toolbarbutton id=&quot;appmenu-cut&quot;</span>
<a href="#l6.78"></a><span id="l6.78" class="difflineminus">-                         class=&quot;appmenu-edit-button&quot;</span>
<a href="#l6.79"></a><span id="l6.79" class="difflineminus">-                         command=&quot;cmd_cut&quot;</span>
<a href="#l6.80"></a><span id="l6.80" class="difflineminus">-                         onclick=&quot;if (!this.disabled) hidePopup();&quot;</span>
<a href="#l6.81"></a><span id="l6.81" class="difflineminus">-                         tooltiptext=&quot;&amp;cutCmd.label;&quot;/&gt;</span>
<a href="#l6.82"></a><span id="l6.82" class="difflineminus">-          &lt;toolbarbutton id=&quot;appmenu-copy&quot;</span>
<a href="#l6.83"></a><span id="l6.83" class="difflineminus">-                         class=&quot;appmenu-edit-button&quot;</span>
<a href="#l6.84"></a><span id="l6.84" class="difflineminus">-                         command=&quot;cmd_copy&quot;</span>
<a href="#l6.85"></a><span id="l6.85" class="difflineminus">-                         onclick=&quot;if (!this.disabled) hidePopup();&quot;</span>
<a href="#l6.86"></a><span id="l6.86" class="difflineminus">-                         tooltiptext=&quot;&amp;copyCmd.label;&quot;/&gt;</span>
<a href="#l6.87"></a><span id="l6.87" class="difflineminus">-          &lt;toolbarbutton id=&quot;appmenu-paste&quot;</span>
<a href="#l6.88"></a><span id="l6.88" class="difflineminus">-                         class=&quot;appmenu-edit-button&quot;</span>
<a href="#l6.89"></a><span id="l6.89" class="difflineminus">-                         command=&quot;cmd_paste&quot;</span>
<a href="#l6.90"></a><span id="l6.90" class="difflineminus">-                         onclick=&quot;if (!this.disabled) hidePopup();&quot;</span>
<a href="#l6.91"></a><span id="l6.91" class="difflineminus">-                         tooltiptext=&quot;&amp;pasteCmd.label;&quot;/&gt;</span>
<a href="#l6.92"></a><span id="l6.92" class="difflineminus">-          &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l6.93"></a><span id="l6.93" class="difflineminus">-          &lt;menu id=&quot;appmenu-editmenu&quot;&gt;</span>
<a href="#l6.94"></a><span id="l6.94" class="difflineminus">-            &lt;menupopup id=&quot;appmenu-editmenu-menupopup&quot;&gt;</span>
<a href="#l6.95"></a><span id="l6.95" class="difflineminus">-              &lt;menuitem id=&quot;appmenu-editmenu-cut&quot;</span>
<a href="#l6.96"></a><span id="l6.96" class="difflineminus">-                        class=&quot;menuitem-iconic&quot;</span>
<a href="#l6.97"></a><span id="l6.97" class="difflineminus">-                        label=&quot;&amp;cutCmd.label;&quot;</span>
<a href="#l6.98"></a><span id="l6.98" class="difflineminus">-                        key=&quot;key_cut&quot;</span>
<a href="#l6.99"></a><span id="l6.99" class="difflineminus">-                        command=&quot;cmd_cut&quot;/&gt;</span>
<a href="#l6.100"></a><span id="l6.100" class="difflineminus">-              &lt;menuitem id=&quot;appmenu-editmenu-copy&quot;</span>
<a href="#l6.101"></a><span id="l6.101" class="difflineminus">-                        class=&quot;menuitem-iconic&quot;</span>
<a href="#l6.102"></a><span id="l6.102" class="difflineminus">-                        label=&quot;&amp;copyCmd.label;&quot;</span>
<a href="#l6.103"></a><span id="l6.103" class="difflineminus">-                        key=&quot;key_copy&quot;</span>
<a href="#l6.104"></a><span id="l6.104" class="difflineminus">-                        command=&quot;cmd_copy&quot;/&gt;</span>
<a href="#l6.105"></a><span id="l6.105" class="difflineminus">-              &lt;menuitem id=&quot;appmenu-editmenu-paste&quot;</span>
<a href="#l6.106"></a><span id="l6.106" class="difflineminus">-                        class=&quot;menuitem-iconic&quot;</span>
<a href="#l6.107"></a><span id="l6.107" class="difflineminus">-                        label=&quot;&amp;pasteCmd.label;&quot;</span>
<a href="#l6.108"></a><span id="l6.108" class="difflineminus">-                        key=&quot;key_paste&quot;</span>
<a href="#l6.109"></a><span id="l6.109" class="difflineminus">-                        command=&quot;cmd_paste&quot;/&gt;</span>
<a href="#l6.110"></a><span id="l6.110" class="difflineminus">-              &lt;menuseparator/&gt;</span>
<a href="#l6.111"></a><span id="l6.111" class="difflineminus">-              &lt;menuitem id=&quot;appmenu-editmenu-undo&quot;</span>
<a href="#l6.112"></a><span id="l6.112" class="difflineminus">-                        label=&quot;&amp;undoCmd.label;&quot;</span>
<a href="#l6.113"></a><span id="l6.113" class="difflineminus">-                        key=&quot;key_undo&quot;</span>
<a href="#l6.114"></a><span id="l6.114" class="difflineminus">-                        command=&quot;cmd_undo&quot;/&gt;</span>
<a href="#l6.115"></a><span id="l6.115" class="difflineminus">-              &lt;menuitem id=&quot;appmenu-editmenu-redo&quot;</span>
<a href="#l6.116"></a><span id="l6.116" class="difflineminus">-                        label=&quot;&amp;redoCmd.label;&quot;</span>
<a href="#l6.117"></a><span id="l6.117" class="difflineminus">-                        key=&quot;key_redo&quot;</span>
<a href="#l6.118"></a><span id="l6.118" class="difflineminus">-                        command=&quot;cmd_redo&quot;/&gt;</span>
<a href="#l6.119"></a><span id="l6.119" class="difflineminus">-              &lt;menuseparator id=&quot;appmenu_messageAfterRedoEditSeparator&quot;/&gt;</span>
<a href="#l6.120"></a><span id="l6.120" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_delete&quot;</span>
<a href="#l6.121"></a><span id="l6.121" class="difflineminus">-                        label=&quot;&amp;deleteCmd.label;&quot;</span>
<a href="#l6.122"></a><span id="l6.122" class="difflineminus">-#ifdef XP_MACOSX</span>
<a href="#l6.123"></a><span id="l6.123" class="difflineminus">-                        acceltext=&quot;&quot;</span>
<a href="#l6.124"></a><span id="l6.124" class="difflineminus">-#else</span>
<a href="#l6.125"></a><span id="l6.125" class="difflineminus">-                        key=&quot;key_delete&quot;</span>
<a href="#l6.126"></a><span id="l6.126" class="difflineminus">-#endif</span>
<a href="#l6.127"></a><span id="l6.127" class="difflineminus">-                        command=&quot;cmd_delete&quot;/&gt;</span>
<a href="#l6.128"></a><span id="l6.128" class="difflineminus">-              &lt;menuseparator id=&quot;appmenu_messageAfterDeleteEditSeparator&quot;/&gt;</span>
<a href="#l6.129"></a><span id="l6.129" class="difflineminus">-              &lt;menuitem id=&quot;appmenu-editmenu-selectAll&quot;</span>
<a href="#l6.130"></a><span id="l6.130" class="difflineminus">-                        label=&quot;&amp;selectAllCmd.label;&quot;</span>
<a href="#l6.131"></a><span id="l6.131" class="difflineminus">-                        key=&quot;key_selectAll&quot;</span>
<a href="#l6.132"></a><span id="l6.132" class="difflineminus">-                        command=&quot;cmd_selectAll&quot;/&gt;</span>
<a href="#l6.133"></a><span id="l6.133" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_selectThread&quot;</span>
<a href="#l6.134"></a><span id="l6.134" class="difflineminus">-                        label=&quot;&amp;appmenuSelectThread.label;&quot;</span>
<a href="#l6.135"></a><span id="l6.135" class="difflineminus">-                        key=&quot;key_selectThread&quot;</span>
<a href="#l6.136"></a><span id="l6.136" class="difflineminus">-                        command=&quot;cmd_selectThread&quot;/&gt;</span>
<a href="#l6.137"></a><span id="l6.137" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_selectFlagged&quot;</span>
<a href="#l6.138"></a><span id="l6.138" class="difflineminus">-                        label=&quot;&amp;appmenuSelectFlagged.label;&quot;</span>
<a href="#l6.139"></a><span id="l6.139" class="difflineminus">-                        command=&quot;cmd_selectFlagged&quot;/&gt;</span>
<a href="#l6.140"></a><span id="l6.140" class="difflineminus">-            &lt;/menupopup&gt;</span>
<a href="#l6.141"></a><span id="l6.141" class="difflineminus">-          &lt;/menu&gt;</span>
<a href="#l6.142"></a><span id="l6.142" class="difflineminus">-        &lt;/hbox&gt;</span>
<a href="#l6.143"></a><span id="l6.143" class="difflineminus">-        &lt;menu id=&quot;appmenu_find&quot;</span>
<a href="#l6.144"></a><span id="l6.144" class="difflineminus">-              label=&quot;&amp;findMenu.label;&quot;&gt;</span>
<a href="#l6.145"></a><span id="l6.145" class="difflineminus">-          &lt;menupopup id=&quot;appmenu_FindPopup&quot;&gt;</span>
<a href="#l6.146"></a><span id="l6.146" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_findCmd&quot;</span>
<a href="#l6.147"></a><span id="l6.147" class="difflineminus">-                      label=&quot;&amp;findCmd.label;&quot;</span>
<a href="#l6.148"></a><span id="l6.148" class="difflineminus">-                      key=&quot;key_find&quot;</span>
<a href="#l6.149"></a><span id="l6.149" class="difflineminus">-                      command=&quot;cmd_find&quot;/&gt;</span>
<a href="#l6.150"></a><span id="l6.150" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_findAgainCmd&quot;</span>
<a href="#l6.151"></a><span id="l6.151" class="difflineminus">-                      label=&quot;&amp;findAgainCmd.label;&quot;</span>
<a href="#l6.152"></a><span id="l6.152" class="difflineminus">-                      key=&quot;key_findAgain&quot;</span>
<a href="#l6.153"></a><span id="l6.153" class="difflineminus">-                      command=&quot;cmd_findAgain&quot;/&gt;</span>
<a href="#l6.154"></a><span id="l6.154" class="difflineminus">-            &lt;menuseparator id=&quot;appMenuAfterFindSeparator&quot;/&gt;</span>
<a href="#l6.155"></a><span id="l6.155" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_searchMailCmd&quot;</span>
<a href="#l6.156"></a><span id="l6.156" class="difflineminus">-                      label=&quot;&amp;searchMailCmd.label;&quot;</span>
<a href="#l6.157"></a><span id="l6.157" class="difflineminus">-                      key=&quot;key_searchMail&quot;</span>
<a href="#l6.158"></a><span id="l6.158" class="difflineminus">-                      command=&quot;cmd_search&quot;/&gt;</span>
<a href="#l6.159"></a><span id="l6.159" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_searchAddressesCmd&quot;</span>
<a href="#l6.160"></a><span id="l6.160" class="difflineminus">-                      label=&quot;&amp;searchAddressesCmd.label;&quot;</span>
<a href="#l6.161"></a><span id="l6.161" class="difflineminus">-                      oncommand=&quot;MsgSearchAddresses()&quot;/&gt;</span>
<a href="#l6.162"></a><span id="l6.162" class="difflineminus">-          &lt;/menupopup&gt;</span>
<a href="#l6.163"></a><span id="l6.163" class="difflineminus">-        &lt;/menu&gt;</span>
<a href="#l6.164"></a><span id="l6.164" class="difflineminus">-        &lt;splitmenu id=&quot;appmenu_print&quot;</span>
<a href="#l6.165"></a><span id="l6.165" class="difflineminus">-                   iconic=&quot;true&quot;</span>
<a href="#l6.166"></a><span id="l6.166" class="difflineminus">-                   label=&quot;&amp;printCmd.label;&quot;</span>
<a href="#l6.167"></a><span id="l6.167" class="difflineminus">-                   key=&quot;printKb&quot;</span>
<a href="#l6.168"></a><span id="l6.168" class="difflineminus">-                   command=&quot;cmd_print&quot;&gt;</span>
<a href="#l6.169"></a><span id="l6.169" class="difflineminus">-            &lt;menupopup&gt;</span>
<a href="#l6.170"></a><span id="l6.170" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_print_popup&quot;</span>
<a href="#l6.171"></a><span id="l6.171" class="difflineminus">-                        class=&quot;menuitem-iconic&quot;</span>
<a href="#l6.172"></a><span id="l6.172" class="difflineminus">-                        label=&quot;&amp;printCmd.label;&quot;</span>
<a href="#l6.173"></a><span id="l6.173" class="difflineminus">-                        key=&quot;key_print&quot;</span>
<a href="#l6.174"></a><span id="l6.174" class="difflineminus">-                        command=&quot;cmd_print&quot;/&gt;</span>
<a href="#l6.175"></a><span id="l6.175" class="difflineminus">-#ifndef XP_MACOSX</span>
<a href="#l6.176"></a><span id="l6.176" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_printPreview&quot;</span>
<a href="#l6.177"></a><span id="l6.177" class="difflineminus">-                        label=&quot;&amp;printPreviewCmd.label;&quot;</span>
<a href="#l6.178"></a><span id="l6.178" class="difflineminus">-                        command=&quot;cmd_printpreview&quot;/&gt;</span>
<a href="#l6.179"></a><span id="l6.179" class="difflineminus">-#endif</span>
<a href="#l6.180"></a><span id="l6.180" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_printSetup&quot;</span>
<a href="#l6.181"></a><span id="l6.181" class="difflineminus">-                        label=&quot;&amp;printSetupCmd.label;&quot;</span>
<a href="#l6.182"></a><span id="l6.182" class="difflineminus">-                        command=&quot;cmd_printSetup&quot;/&gt;</span>
<a href="#l6.183"></a><span id="l6.183" class="difflineminus">-            &lt;/menupopup&gt;</span>
<a href="#l6.184"></a><span id="l6.184" class="difflineminus">-        &lt;/splitmenu&gt;</span>
<a href="#l6.185"></a><span id="l6.185" class="difflineminus">-        &lt;menuseparator class=&quot;appmenu-menuseparator&quot;/&gt;</span>
<a href="#l6.186"></a><span id="l6.186" class="difflineminus">-        &lt;menu id=&quot;appmenu_saveAs&quot;</span>
<a href="#l6.187"></a><span id="l6.187" class="difflineminus">-              label=&quot;&amp;saveAsMenu.label;&quot;&gt;</span>
<a href="#l6.188"></a><span id="l6.188" class="difflineminus">-          &lt;menupopup id=&quot;menu_SavePopup&quot;&gt;</span>
<a href="#l6.189"></a><span id="l6.189" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_saveAsFile&quot;</span>
<a href="#l6.190"></a><span id="l6.190" class="difflineminus">-                      label=&quot;&amp;saveAsFileCmd.label;&quot;</span>
<a href="#l6.191"></a><span id="l6.191" class="difflineminus">-                      key=&quot;key_saveAsFile&quot;</span>
<a href="#l6.192"></a><span id="l6.192" class="difflineminus">-                      command=&quot;cmd_saveAsFile&quot;/&gt;</span>
<a href="#l6.193"></a><span id="l6.193" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_saveAsTemplate&quot;</span>
<a href="#l6.194"></a><span id="l6.194" class="difflineminus">-                      label=&quot;&amp;saveAsTemplateCmd.label;&quot;</span>
<a href="#l6.195"></a><span id="l6.195" class="difflineminus">-                      command=&quot;cmd_saveAsTemplate&quot;/&gt;</span>
<a href="#l6.196"></a><span id="l6.196" class="difflineminus">-          &lt;/menupopup&gt;</span>
<a href="#l6.197"></a><span id="l6.197" class="difflineminus">-        &lt;/menu&gt;</span>
<a href="#l6.198"></a><span id="l6.198" class="difflineminus">-        &lt;menu id=&quot;appmenu_FolderViews&quot;</span>
<a href="#l6.199"></a><span id="l6.199" class="difflineminus">-              label=&quot;&amp;folderView.label;&quot;&gt;</span>
<a href="#l6.200"></a><span id="l6.200" class="difflineminus">-          &lt;menupopup id=&quot;appmenu_FolderViewsPopup&quot;</span>
<a href="#l6.201"></a><span id="l6.201" class="difflineminus">-                     onpopupshowing=&quot;InitAppFolderViewsMenu();</span>
<a href="#l6.202"></a><span id="l6.202" class="difflineminus">-                                     InitViewFolderViewsMenu(event);&quot;&gt;</span>
<a href="#l6.203"></a><span id="l6.203" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_allFolders&quot;</span>
<a href="#l6.204"></a><span id="l6.204" class="difflineminus">-                      value=&quot;all&quot;</span>
<a href="#l6.205"></a><span id="l6.205" class="difflineminus">-                      label=&quot;&amp;allFolders.label;&quot;</span>
<a href="#l6.206"></a><span id="l6.206" class="difflineminus">-                      type=&quot;radio&quot;</span>
<a href="#l6.207"></a><span id="l6.207" class="difflineminus">-                      name=&quot;viewmessages&quot;</span>
<a href="#l6.208"></a><span id="l6.208" class="difflineminus">-                      oncommand=&quot;gFolderTreeView.toggleMode(this.value);&quot;/&gt;</span>
<a href="#l6.209"></a><span id="l6.209" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_smartFolders&quot;</span>
<a href="#l6.210"></a><span id="l6.210" class="difflineminus">-                      value=&quot;smart&quot;</span>
<a href="#l6.211"></a><span id="l6.211" class="difflineminus">-                      label=&quot;&amp;unifiedFolders.label;&quot;</span>
<a href="#l6.212"></a><span id="l6.212" class="difflineminus">-                      type=&quot;radio&quot;</span>
<a href="#l6.213"></a><span id="l6.213" class="difflineminus">-                      name=&quot;viewmessages&quot;</span>
<a href="#l6.214"></a><span id="l6.214" class="difflineminus">-                      oncommand=&quot;gFolderTreeView.toggleMode(this.value);&quot;/&gt;</span>
<a href="#l6.215"></a><span id="l6.215" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_unreadFolders&quot;</span>
<a href="#l6.216"></a><span id="l6.216" class="difflineminus">-                      value=&quot;unread&quot;</span>
<a href="#l6.217"></a><span id="l6.217" class="difflineminus">-                      label=&quot;&amp;unreadFolders.label;&quot;</span>
<a href="#l6.218"></a><span id="l6.218" class="difflineminus">-                      type=&quot;radio&quot;</span>
<a href="#l6.219"></a><span id="l6.219" class="difflineminus">-                      name=&quot;viewmessages&quot;</span>
<a href="#l6.220"></a><span id="l6.220" class="difflineminus">-                      oncommand=&quot;gFolderTreeView.toggleMode(this.value);&quot;/&gt;</span>
<a href="#l6.221"></a><span id="l6.221" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_favoriteFolders&quot;</span>
<a href="#l6.222"></a><span id="l6.222" class="difflineminus">-                      value=&quot;favorite&quot;</span>
<a href="#l6.223"></a><span id="l6.223" class="difflineminus">-                      label=&quot;&amp;favoriteFolders.label;&quot;</span>
<a href="#l6.224"></a><span id="l6.224" class="difflineminus">-                      type=&quot;radio&quot;</span>
<a href="#l6.225"></a><span id="l6.225" class="difflineminus">-                      name=&quot;viewmessages&quot;</span>
<a href="#l6.226"></a><span id="l6.226" class="difflineminus">-                      oncommand=&quot;gFolderTreeView.toggleMode(this.value);&quot;/&gt;</span>
<a href="#l6.227"></a><span id="l6.227" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_recentFolders&quot;</span>
<a href="#l6.228"></a><span id="l6.228" class="difflineminus">-                      value=&quot;recent&quot;</span>
<a href="#l6.229"></a><span id="l6.229" class="difflineminus">-                      label=&quot;&amp;recentFolders.label;&quot;</span>
<a href="#l6.230"></a><span id="l6.230" class="difflineminus">-                      type=&quot;radio&quot;</span>
<a href="#l6.231"></a><span id="l6.231" class="difflineminus">-                      name=&quot;viewmessages&quot;</span>
<a href="#l6.232"></a><span id="l6.232" class="difflineminus">-                      oncommand=&quot;gFolderTreeView.toggleMode(this.value);&quot;/&gt;</span>
<a href="#l6.233"></a><span id="l6.233" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_compactViewSeparator&quot;/&gt;</span>
<a href="#l6.234"></a><span id="l6.234" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_compactFolderView&quot;</span>
<a href="#l6.235"></a><span id="l6.235" class="difflineminus">-                      label=&quot;&amp;compactVersion.label;&quot;</span>
<a href="#l6.236"></a><span id="l6.236" class="difflineminus">-                      type=&quot;checkbox&quot;</span>
<a href="#l6.237"></a><span id="l6.237" class="difflineminus">-                      oncommand=&quot;gFolderTreeView.toggleCompact(this.getAttribute('checked') == 'true');&quot;/&gt;</span>
<a href="#l6.238"></a><span id="l6.238" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_favoritePropertiesSeparator&quot;/&gt;</span>
<a href="#l6.239"></a><span id="l6.239" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_favoriteFolder&quot;</span>
<a href="#l6.240"></a><span id="l6.240" class="difflineminus">-                      type=&quot;checkbox&quot;</span>
<a href="#l6.241"></a><span id="l6.241" class="difflineminus">-                      label=&quot;&amp;menuFavoriteFolder.label;&quot;</span>
<a href="#l6.242"></a><span id="l6.242" class="difflineminus">-                      checked=&quot;false&quot;</span>
<a href="#l6.243"></a><span id="l6.243" class="difflineminus">-                      oncommand=&quot;ToggleFavoriteFolderFlag();&quot;/&gt;</span>
<a href="#l6.244"></a><span id="l6.244" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_properties&quot;</span>
<a href="#l6.245"></a><span id="l6.245" class="difflineminus">-                      label=&quot;&amp;folderPropsCmd2.label;&quot;</span>
<a href="#l6.246"></a><span id="l6.246" class="difflineminus">-                      command=&quot;cmd_properties&quot;/&gt;</span>
<a href="#l6.247"></a><span id="l6.247" class="difflineminus">-          &lt;/menupopup&gt;</span>
<a href="#l6.248"></a><span id="l6.248" class="difflineminus">-        &lt;/menu&gt;</span>
<a href="#l6.249"></a><span id="l6.249" class="difflineminus">-        &lt;menuitem id=&quot;appmenu_emptyTrash&quot;</span>
<a href="#l6.250"></a><span id="l6.250" class="difflineminus">-                  label=&quot;&amp;emptyTrashCmd.label;&quot;</span>
<a href="#l6.251"></a><span id="l6.251" class="difflineminus">-                  command=&quot;cmd_emptyTrash&quot;/&gt;</span>
<a href="#l6.252"></a><span id="l6.252" class="difflineminus">-        &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l6.253"></a><span id="l6.253" class="difflineminus">-        &lt;menuitem id=&quot;appmenu-quit&quot;</span>
<a href="#l6.254"></a><span id="l6.254" class="difflineminus">-                  class=&quot;menuitem-iconic&quot;</span>
<a href="#l6.255"></a><span id="l6.255" class="difflineminus">-#ifdef XP_WIN</span>
<a href="#l6.256"></a><span id="l6.256" class="difflineminus">-                  label=&quot;&amp;quitApplicationCmd.label;&quot;</span>
<a href="#l6.257"></a><span id="l6.257" class="difflineminus">-#else</span>
<a href="#l6.258"></a><span id="l6.258" class="difflineminus">-                  label=&quot;&amp;quitApplicationCmdUnix.label;&quot;</span>
<a href="#l6.259"></a><span id="l6.259" class="difflineminus">-#endif</span>
<a href="#l6.260"></a><span id="l6.260" class="difflineminus">-                  command=&quot;cmd_quit&quot;/&gt;</span>
<a href="#l6.261"></a><span id="l6.261" class="difflineminus">-      &lt;/vbox&gt;</span>
<a href="#l6.262"></a><span id="l6.262" class="difflineminus">-      &lt;vbox id=&quot;appmenuSecondaryPane&quot;&gt;</span>
<a href="#l6.263"></a><span id="l6.263" class="difflineminus">-        &lt;menuitem id=&quot;appmenu_activityManager&quot;</span>
<a href="#l6.264"></a><span id="l6.264" class="difflineminus">-                  label=&quot;&amp;activitymanager.label;&quot;</span>
<a href="#l6.265"></a><span id="l6.265" class="difflineminus">-                  oncommand=&quot;openActivityMgr();&quot;/&gt;</span>
<a href="#l6.266"></a><span id="l6.266" class="difflineminus">-        &lt;splitmenu id=&quot;appmenu_filters&quot;</span>
<a href="#l6.267"></a><span id="l6.267" class="difflineminus">-                  label=&quot;&amp;filtersCmd2.label;&quot;</span>
<a href="#l6.268"></a><span id="l6.268" class="difflineminus">-                  command=&quot;cmd_displayMsgFilters&quot;&gt;</span>
<a href="#l6.269"></a><span id="l6.269" class="difflineminus">-          &lt;menupopup id=&quot;appmenu_FilterMenu&quot;&gt;</span>
<a href="#l6.270"></a><span id="l6.270" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_filtersCmd&quot;</span>
<a href="#l6.271"></a><span id="l6.271" class="difflineminus">-                      label=&quot;&amp;filtersCmd2.label;&quot;</span>
<a href="#l6.272"></a><span id="l6.272" class="difflineminus">-                      command=&quot;cmd_displayMsgFilters&quot;/&gt;</span>
<a href="#l6.273"></a><span id="l6.273" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_applyFilters&quot;</span>
<a href="#l6.274"></a><span id="l6.274" class="difflineminus">-                      label=&quot;&amp;filtersApply.label;&quot;</span>
<a href="#l6.275"></a><span id="l6.275" class="difflineminus">-                      command=&quot;cmd_applyFilters&quot;/&gt;</span>
<a href="#l6.276"></a><span id="l6.276" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_applyFiltersToSelection&quot;</span>
<a href="#l6.277"></a><span id="l6.277" class="difflineminus">-                      label=&quot;&amp;filtersApplyToMessage.label;&quot;</span>
<a href="#l6.278"></a><span id="l6.278" class="difflineminus">-                      command=&quot;cmd_applyFiltersToSelection&quot;/&gt;</span>
<a href="#l6.279"></a><span id="l6.279" class="difflineminus">-          &lt;/menupopup&gt;</span>
<a href="#l6.280"></a><span id="l6.280" class="difflineminus">-        &lt;/splitmenu&gt;</span>
<a href="#l6.281"></a><span id="l6.281" class="difflineminus">-        &lt;spacer class=&quot;appmenuPane-spacer&quot;/&gt;</span>
<a href="#l6.282"></a><span id="l6.282" class="difflineminus">-        &lt;splitmenu id=&quot;appmenu_addons&quot;</span>
<a href="#l6.283"></a><span id="l6.283" class="difflineminus">-                   class=&quot;menuitem-iconic&quot;</span>
<a href="#l6.284"></a><span id="l6.284" class="difflineminus">-                   label=&quot;&amp;addons.label;&quot;</span>
<a href="#l6.285"></a><span id="l6.285" class="difflineminus">-                   oncommand=&quot;openAddonsMgr();&quot;&gt;</span>
<a href="#l6.286"></a><span id="l6.286" class="difflineminus">-          &lt;menupopup id=&quot;appmenu_addonPrefs&quot;</span>
<a href="#l6.287"></a><span id="l6.287" class="difflineminus">-                     onpopupshowing=&quot;initAddonPrefsMenu(this);&quot;</span>
<a href="#l6.288"></a><span id="l6.288" class="difflineminus">-                     oncommand=&quot;openAddonPrefs(event.target.getAttribute('value'), event.target.getAttribute('optionsType'));&quot;&gt;</span>
<a href="#l6.289"></a><span id="l6.289" class="difflineminus">-            &lt;menuitem label=&quot;&amp;addons.label;&quot; oncommand=&quot;openAddonsMgr(); event.stopPropagation();&quot;/&gt;</span>
<a href="#l6.290"></a><span id="l6.290" class="difflineminus">-            &lt;menuseparator class=&quot;appmenu-menuseparator&quot;/&gt;</span>
<a href="#l6.291"></a><span id="l6.291" class="difflineminus">-            &lt;menuitem label=&quot;&amp;addonNoPrefs.label;&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l6.292"></a><span id="l6.292" class="difflineminus">-          &lt;/menupopup&gt;</span>
<a href="#l6.293"></a><span id="l6.293" class="difflineminus">-        &lt;/splitmenu&gt;</span>
<a href="#l6.294"></a><span id="l6.294" class="difflineminus">-        &lt;splitmenu id=&quot;appmenu_customize&quot;</span>
<a href="#l6.295"></a><span id="l6.295" class="difflineminus">-#ifdef XP_WIN</span>
<a href="#l6.296"></a><span id="l6.296" class="difflineminus">-                   label=&quot;&amp;preferencesCmd2.label;&quot;</span>
<a href="#l6.297"></a><span id="l6.297" class="difflineminus">-#else</span>
<a href="#l6.298"></a><span id="l6.298" class="difflineminus">-                   label=&quot;&amp;preferencesCmdUnix.label;&quot;</span>
<a href="#l6.299"></a><span id="l6.299" class="difflineminus">-#endif</span>
<a href="#l6.300"></a><span id="l6.300" class="difflineminus">-                   oncommand=&quot;openOptionsDialog();&quot;&gt;</span>
<a href="#l6.301"></a><span id="l6.301" class="difflineminus">-          &lt;menupopup id=&quot;appmenu_customizeMenu&quot;</span>
<a href="#l6.302"></a><span id="l6.302" class="difflineminus">-                     onpopupshowing=&quot;onViewToolbarsPopupShowing(event, 'mail-toolbox', document.getElementById('appmenu_quickFilterBar'));&quot;&gt;</span>
<a href="#l6.303"></a><span id="l6.303" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_preferences&quot;</span>
<a href="#l6.304"></a><span id="l6.304" class="difflineminus">-#ifdef XP_WIN</span>
<a href="#l6.305"></a><span id="l6.305" class="difflineminus">-                      label=&quot;&amp;preferencesCmd2.label;&quot;</span>
<a href="#l6.306"></a><span id="l6.306" class="difflineminus">-#else</span>
<a href="#l6.307"></a><span id="l6.307" class="difflineminus">-                      label=&quot;&amp;preferencesCmdUnix.label;&quot;</span>
<a href="#l6.308"></a><span id="l6.308" class="difflineminus">-#endif</span>
<a href="#l6.309"></a><span id="l6.309" class="difflineminus">-                      oncommand=&quot;openOptionsDialog();&quot;/&gt;</span>
<a href="#l6.310"></a><span id="l6.310" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_accountmgr&quot;</span>
<a href="#l6.311"></a><span id="l6.311" class="difflineminus">-                      label=&quot;&amp;accountManagerCmd2.label;&quot;</span>
<a href="#l6.312"></a><span id="l6.312" class="difflineminus">-                      oncommand=&quot;MsgAccountManager(null);&quot;/&gt;</span>
<a href="#l6.313"></a><span id="l6.313" class="difflineminus">-            &lt;menuseparator/&gt;</span>
<a href="#l6.314"></a><span id="l6.314" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_quickFilterBar&quot;</span>
<a href="#l6.315"></a><span id="l6.315" class="difflineminus">-                      type=&quot;checkbox&quot;</span>
<a href="#l6.316"></a><span id="l6.316" class="difflineminus">-                      label=&quot;&amp;quickFilterBar.toggleBarVisibility.appmenu.label;&quot;</span>
<a href="#l6.317"></a><span id="l6.317" class="difflineminus">-                      command=&quot;cmd_toggleQuickFilterBar&quot;&gt;</span>
<a href="#l6.318"></a><span id="l6.318" class="difflineminus">-              &lt;observes element=&quot;view_toolbars_popup_quickFilterBar&quot;</span>
<a href="#l6.319"></a><span id="l6.319" class="difflineminus">-                        attribute=&quot;checked&quot;/&gt;</span>
<a href="#l6.320"></a><span id="l6.320" class="difflineminus">-            &lt;/menuitem&gt;</span>
<a href="#l6.321"></a><span id="l6.321" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_showStatusbar&quot;</span>
<a href="#l6.322"></a><span id="l6.322" class="difflineminus">-                      type=&quot;checkbox&quot;</span>
<a href="#l6.323"></a><span id="l6.323" class="difflineminus">-                      label=&quot;&amp;showTaskbarCmd.label;&quot;</span>
<a href="#l6.324"></a><span id="l6.324" class="difflineminus">-                      oncommand=&quot;goToggleToolbar('status-bar', 'menu_showTaskbar')&quot;</span>
<a href="#l6.325"></a><span id="l6.325" class="difflineminus">-                      checked=&quot;true&quot;</span>
<a href="#l6.326"></a><span id="l6.326" class="difflineminus">-                      observes=&quot;menu_showTaskbar&quot;/&gt;</span>
<a href="#l6.327"></a><span id="l6.327" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_toggleToolbarsSeparator&quot;/&gt;</span>
<a href="#l6.328"></a><span id="l6.328" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_toolbarLayout&quot;</span>
<a href="#l6.329"></a><span id="l6.329" class="difflineminus">-                      label=&quot;&amp;appmenuToolbarLayout.label;&quot;</span>
<a href="#l6.330"></a><span id="l6.330" class="difflineminus">-                      command=&quot;cmd_CustomizeMailToolbar&quot;/&gt;</span>
<a href="#l6.331"></a><span id="l6.331" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_paneViewSeparator&quot;/&gt;</span>
<a href="#l6.332"></a><span id="l6.332" class="difflineminus">-            &lt;menu id=&quot;appmenu_MessagePaneLayout&quot;</span>
<a href="#l6.333"></a><span id="l6.333" class="difflineminus">-                  label=&quot;&amp;messagePaneLayoutStyle.label;&quot;&gt;</span>
<a href="#l6.334"></a><span id="l6.334" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_view_layout_popup&quot;</span>
<a href="#l6.335"></a><span id="l6.335" class="difflineminus">-                         onpopupshowing=&quot;InitViewLayoutStyleMenu(event)&quot;&gt;</span>
<a href="#l6.336"></a><span id="l6.336" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_messagePaneClassic&quot;</span>
<a href="#l6.337"></a><span id="l6.337" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.338"></a><span id="l6.338" class="difflineminus">-                          label=&quot;&amp;messagePaneClassic.label;&quot;</span>
<a href="#l6.339"></a><span id="l6.339" class="difflineminus">-                          name=&quot;viewlayoutgroup&quot;</span>
<a href="#l6.340"></a><span id="l6.340" class="difflineminus">-                          command=&quot;cmd_viewClassicMailLayout&quot;/&gt;</span>
<a href="#l6.341"></a><span id="l6.341" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_messagePaneWide&quot;</span>
<a href="#l6.342"></a><span id="l6.342" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.343"></a><span id="l6.343" class="difflineminus">-                          label=&quot;&amp;messagePaneWide.label;&quot;</span>
<a href="#l6.344"></a><span id="l6.344" class="difflineminus">-                          name=&quot;viewlayoutgroup&quot;</span>
<a href="#l6.345"></a><span id="l6.345" class="difflineminus">-                          command=&quot;cmd_viewWideMailLayout&quot;/&gt;</span>
<a href="#l6.346"></a><span id="l6.346" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_messagePaneVertical&quot;</span>
<a href="#l6.347"></a><span id="l6.347" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.348"></a><span id="l6.348" class="difflineminus">-                          label=&quot;&amp;messagePaneVertical.label;&quot;</span>
<a href="#l6.349"></a><span id="l6.349" class="difflineminus">-                          name=&quot;viewlayoutgroup&quot;</span>
<a href="#l6.350"></a><span id="l6.350" class="difflineminus">-                          command=&quot;cmd_viewVerticalMailLayout&quot;/&gt;</span>
<a href="#l6.351"></a><span id="l6.351" class="difflineminus">-                &lt;menuseparator id=&quot;appmenu_viewMenuAfterPaneVerticalSeparator&quot;/&gt;</span>
<a href="#l6.352"></a><span id="l6.352" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_showFolderPane&quot;</span>
<a href="#l6.353"></a><span id="l6.353" class="difflineminus">-                          type=&quot;checkbox&quot;</span>
<a href="#l6.354"></a><span id="l6.354" class="difflineminus">-                          label=&quot;&amp;showFolderPaneCmd.label;&quot;</span>
<a href="#l6.355"></a><span id="l6.355" class="difflineminus">-                          command=&quot;cmd_toggleFolderPane&quot;/&gt;</span>
<a href="#l6.356"></a><span id="l6.356" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_showFolderPaneCols&quot;</span>
<a href="#l6.357"></a><span id="l6.357" class="difflineminus">-                          type=&quot;checkbox&quot;</span>
<a href="#l6.358"></a><span id="l6.358" class="difflineminus">-                          label=&quot;&amp;showFolderPaneColsCmd.label;&quot;</span>
<a href="#l6.359"></a><span id="l6.359" class="difflineminus">-                          command=&quot;cmd_toggleFolderPaneCols&quot;/&gt;</span>
<a href="#l6.360"></a><span id="l6.360" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_showMessage&quot;</span>
<a href="#l6.361"></a><span id="l6.361" class="difflineminus">-                          type=&quot;checkbox&quot;</span>
<a href="#l6.362"></a><span id="l6.362" class="difflineminus">-                          label=&quot;&amp;showMessageCmd.label;&quot;</span>
<a href="#l6.363"></a><span id="l6.363" class="difflineminus">-                          key=&quot;key_toggleMessagePane&quot;</span>
<a href="#l6.364"></a><span id="l6.364" class="difflineminus">-                          command=&quot;cmd_toggleMessagePane&quot;/&gt;</span>
<a href="#l6.365"></a><span id="l6.365" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l6.366"></a><span id="l6.366" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.367"></a><span id="l6.367" class="difflineminus">-          &lt;/menupopup&gt;</span>
<a href="#l6.368"></a><span id="l6.368" class="difflineminus">-        &lt;/splitmenu&gt;</span>
<a href="#l6.369"></a><span id="l6.369" class="difflineminus">-        &lt;spacer class=&quot;appmenuPane-spacer&quot;/&gt;</span>
<a href="#l6.370"></a><span id="l6.370" class="difflineminus">-        &lt;!-- File menu --&gt;</span>
<a href="#l6.371"></a><span id="l6.371" class="difflineminus">-        &lt;menu id=&quot;appmenu_File&quot;</span>
<a href="#l6.372"></a><span id="l6.372" class="difflineminus">-              label=&quot;&amp;fileMenu.label;&quot;&gt;</span>
<a href="#l6.373"></a><span id="l6.373" class="difflineminus">-          &lt;menupopup id=&quot;appmenu_FilePopup&quot;&gt;</span>
<a href="#l6.374"></a><span id="l6.374" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_openMessageFileMenuitem&quot;</span>
<a href="#l6.375"></a><span id="l6.375" class="difflineminus">-                      label=&quot;&amp;openMessageFileCmd.label;&quot;</span>
<a href="#l6.376"></a><span id="l6.376" class="difflineminus">-                      oncommand=&quot;MsgOpenFromFile();&quot;/&gt;</span>
<a href="#l6.377"></a><span id="l6.377" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_close&quot;</span>
<a href="#l6.378"></a><span id="l6.378" class="difflineminus">-                      label=&quot;&amp;closeCmd.label;&quot;</span>
<a href="#l6.379"></a><span id="l6.379" class="difflineminus">-                      key=&quot;key_close&quot;</span>
<a href="#l6.380"></a><span id="l6.380" class="difflineminus">-                      command=&quot;cmd_close&quot;/&gt;</span>
<a href="#l6.381"></a><span id="l6.381" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_fileMenuAfterCloseSeparator&quot;/&gt;</span>
<a href="#l6.382"></a><span id="l6.382" class="difflineminus">-            &lt;menu id=&quot;appmenu_getNewMsgFor&quot;</span>
<a href="#l6.383"></a><span id="l6.383" class="difflineminus">-                  label=&quot;&amp;getNewMsgForCmd.label;&quot;</span>
<a href="#l6.384"></a><span id="l6.384" class="difflineminus">-                  oncommand=&quot;MsgGetMessagesForAccount();&quot;&gt;</span>
<a href="#l6.385"></a><span id="l6.385" class="difflineminus">-              &lt;menupopup is=&quot;folder-menupopup&quot; id=&quot;appmenu_getAllNewMsgPopup&quot;</span>
<a href="#l6.386"></a><span id="l6.386" class="difflineminus">-                         mode=&quot;getMail&quot;</span>
<a href="#l6.387"></a><span id="l6.387" class="difflineminus">-                         expandFolders=&quot;false&quot;</span>
<a href="#l6.388"></a><span id="l6.388" class="difflineminus">-                         oncommand=&quot;MsgGetMessagesForAccount(event.target._folder); event.stopPropagation();&quot;&gt;</span>
<a href="#l6.389"></a><span id="l6.389" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_getnewmsgs_all_accounts&quot;</span>
<a href="#l6.390"></a><span id="l6.390" class="difflineminus">-                          label=&quot;&amp;getAllNewMsgCmdPopupMenu.label;&quot;</span>
<a href="#l6.391"></a><span id="l6.391" class="difflineminus">-                          key=&quot;key_getAllNewMessages&quot;</span>
<a href="#l6.392"></a><span id="l6.392" class="difflineminus">-                          command=&quot;cmd_getMsgsForAuthAccounts&quot;/&gt;</span>
<a href="#l6.393"></a><span id="l6.393" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_getnewmsgs_current_account&quot;</span>
<a href="#l6.394"></a><span id="l6.394" class="difflineminus">-                          label=&quot;&amp;getNewMsgCurrentAccountCmdPopupMenu.label;&quot;</span>
<a href="#l6.395"></a><span id="l6.395" class="difflineminus">-                          key=&quot;key_getNewMessages&quot;</span>
<a href="#l6.396"></a><span id="l6.396" class="difflineminus">-                          command=&quot;cmd_getNewMessages&quot;/&gt;</span>
<a href="#l6.397"></a><span id="l6.397" class="difflineminus">-                &lt;menuseparator/&gt;</span>
<a href="#l6.398"></a><span id="l6.398" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l6.399"></a><span id="l6.399" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.400"></a><span id="l6.400" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_getNextNMsgs&quot;</span>
<a href="#l6.401"></a><span id="l6.401" class="difflineminus">-                      label=&quot;&amp;getNextNMsgCmd2.label;&quot;</span>
<a href="#l6.402"></a><span id="l6.402" class="difflineminus">-                      command=&quot;cmd_getNextNMessages&quot;/&gt;</span>
<a href="#l6.403"></a><span id="l6.403" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_sendUnsentMsgs&quot;</span>
<a href="#l6.404"></a><span id="l6.404" class="difflineminus">-                      label=&quot;&amp;sendUnsentCmd.label;&quot;</span>
<a href="#l6.405"></a><span id="l6.405" class="difflineminus">-                      command=&quot;cmd_sendUnsentMsgs&quot;/&gt;</span>
<a href="#l6.406"></a><span id="l6.406" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_subscribe&quot;</span>
<a href="#l6.407"></a><span id="l6.407" class="difflineminus">-                      label=&quot;&amp;subscribeCmd.label;&quot;</span>
<a href="#l6.408"></a><span id="l6.408" class="difflineminus">-                      command=&quot;cmd_subscribe&quot;/&gt;</span>
<a href="#l6.409"></a><span id="l6.409" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_fileMenuAfterSubscribeSeparator&quot;/&gt;</span>
<a href="#l6.410"></a><span id="l6.410" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_deleteFolder&quot;</span>
<a href="#l6.411"></a><span id="l6.411" class="difflineminus">-                      label=&quot;&amp;deleteFolder.label;&quot;</span>
<a href="#l6.412"></a><span id="l6.412" class="difflineminus">-                      command=&quot;cmd_deleteFolder&quot;/&gt;</span>
<a href="#l6.413"></a><span id="l6.413" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_renameFolder&quot;</span>
<a href="#l6.414"></a><span id="l6.414" class="difflineminus">-                      label=&quot;&amp;renameFolder.label;&quot;</span>
<a href="#l6.415"></a><span id="l6.415" class="difflineminus">-                      key=&quot;key_renameFolder&quot;</span>
<a href="#l6.416"></a><span id="l6.416" class="difflineminus">-                      command=&quot;cmd_renameFolder&quot;/&gt;</span>
<a href="#l6.417"></a><span id="l6.417" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_fileMenuAfterRenameSeparator&quot;/&gt;</span>
<a href="#l6.418"></a><span id="l6.418" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_compactFolder&quot;</span>
<a href="#l6.419"></a><span id="l6.419" class="difflineminus">-                      label=&quot;&amp;compactFolders.label;&quot;</span>
<a href="#l6.420"></a><span id="l6.420" class="difflineminus">-                      command=&quot;cmd_compactFolder&quot;/&gt;</span>
<a href="#l6.421"></a><span id="l6.421" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_fileMenuAfterCompactSeparator&quot;/&gt;</span>
<a href="#l6.422"></a><span id="l6.422" class="difflineminus">-            &lt;menu id=&quot;appmenu_offline&quot;</span>
<a href="#l6.423"></a><span id="l6.423" class="difflineminus">-                  label=&quot;&amp;offlineMenu.label;&quot;&gt;</span>
<a href="#l6.424"></a><span id="l6.424" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_OfflinePopup&quot;&gt;</span>
<a href="#l6.425"></a><span id="l6.425" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_goOffline&quot;</span>
<a href="#l6.426"></a><span id="l6.426" class="difflineminus">-                          type=&quot;checkbox&quot;</span>
<a href="#l6.427"></a><span id="l6.427" class="difflineminus">-                          label=&quot;&amp;offlineGoOfflineCmd.label;&quot;</span>
<a href="#l6.428"></a><span id="l6.428" class="difflineminus">-                          oncommand=&quot;MailOfflineMgr.toggleOfflineStatus();&quot;/&gt;</span>
<a href="#l6.429"></a><span id="l6.429" class="difflineminus">-                &lt;menuseparator id=&quot;appmenu_offlineMenuAfterGoSeparator&quot;/&gt;</span>
<a href="#l6.430"></a><span id="l6.430" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_synchronizeOffline&quot;</span>
<a href="#l6.431"></a><span id="l6.431" class="difflineminus">-                          label=&quot;&amp;synchronizeOfflineCmd.label;&quot;</span>
<a href="#l6.432"></a><span id="l6.432" class="difflineminus">-                          command=&quot;cmd_synchronizeOffline&quot;/&gt;</span>
<a href="#l6.433"></a><span id="l6.433" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_settingsOffline&quot;</span>
<a href="#l6.434"></a><span id="l6.434" class="difflineminus">-                          label=&quot;&amp;settingsOfflineCmd2.label;&quot;</span>
<a href="#l6.435"></a><span id="l6.435" class="difflineminus">-                          command=&quot;cmd_settingsOffline&quot;/&gt;</span>
<a href="#l6.436"></a><span id="l6.436" class="difflineminus">-                &lt;menuseparator id=&quot;app_offlineMenuAfterSettingsSeparator&quot;/&gt;</span>
<a href="#l6.437"></a><span id="l6.437" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_downloadFlagged&quot;</span>
<a href="#l6.438"></a><span id="l6.438" class="difflineminus">-                          label=&quot;&amp;downloadStarredCmd.label;&quot;</span>
<a href="#l6.439"></a><span id="l6.439" class="difflineminus">-                          command=&quot;cmd_downloadFlagged&quot;/&gt;</span>
<a href="#l6.440"></a><span id="l6.440" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_downloadSelected&quot;</span>
<a href="#l6.441"></a><span id="l6.441" class="difflineminus">-                          label=&quot;&amp;downloadSelectedCmd.label;&quot;</span>
<a href="#l6.442"></a><span id="l6.442" class="difflineminus">-                          command=&quot;cmd_downloadSelected&quot;/&gt;</span>
<a href="#l6.443"></a><span id="l6.443" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l6.444"></a><span id="l6.444" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.445"></a><span id="l6.445" class="difflineminus">-          &lt;/menupopup&gt;</span>
<a href="#l6.446"></a><span id="l6.446" class="difflineminus">-        &lt;/menu&gt;</span>
<a href="#l6.447"></a><span id="l6.447" class="difflineminus">-        &lt;!-- View menu --&gt;</span>
<a href="#l6.448"></a><span id="l6.448" class="difflineminus">-        &lt;menu id=&quot;appmenu_View&quot;</span>
<a href="#l6.449"></a><span id="l6.449" class="difflineminus">-              label=&quot;&amp;viewMenu.label;&quot;&gt;</span>
<a href="#l6.450"></a><span id="l6.450" class="difflineminus">-          &lt;menupopup id=&quot;appmenu_View_Popup&quot;&gt;</span>
<a href="#l6.451"></a><span id="l6.451" class="difflineminus">-            &lt;menu id=&quot;appmenu_viewSortMenu&quot;</span>
<a href="#l6.452"></a><span id="l6.452" class="difflineminus">-                  label=&quot;&amp;sortMenu.label;&quot;&gt;</span>
<a href="#l6.453"></a><span id="l6.453" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_viewSortPopup&quot; onpopupshowing=&quot;InitAppViewSortByMenu()&quot;&gt;</span>
<a href="#l6.454"></a><span id="l6.454" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortByDateMenuitem&quot;</span>
<a href="#l6.455"></a><span id="l6.455" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.456"></a><span id="l6.456" class="difflineminus">-                          name=&quot;sortby&quot;</span>
<a href="#l6.457"></a><span id="l6.457" class="difflineminus">-                          label=&quot;&amp;sortByDateCmd.label;&quot;</span>
<a href="#l6.458"></a><span id="l6.458" class="difflineminus">-                          oncommand=&quot;MsgSortThreadPane('byDate')&quot;/&gt;</span>
<a href="#l6.459"></a><span id="l6.459" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortByReceivedMenuitem&quot;</span>
<a href="#l6.460"></a><span id="l6.460" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.461"></a><span id="l6.461" class="difflineminus">-                          name=&quot;sortby&quot;</span>
<a href="#l6.462"></a><span id="l6.462" class="difflineminus">-                          label=&quot;&amp;sortByReceivedCmd.label;&quot;</span>
<a href="#l6.463"></a><span id="l6.463" class="difflineminus">-                          oncommand=&quot;MsgSortThreadPane('byReceived')&quot;/&gt;</span>
<a href="#l6.464"></a><span id="l6.464" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortByFlagMenuitem&quot;</span>
<a href="#l6.465"></a><span id="l6.465" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.466"></a><span id="l6.466" class="difflineminus">-                          name=&quot;sortby&quot;</span>
<a href="#l6.467"></a><span id="l6.467" class="difflineminus">-                          label=&quot;&amp;sortByStarCmd.label;&quot;</span>
<a href="#l6.468"></a><span id="l6.468" class="difflineminus">-                          oncommand=&quot;MsgSortThreadPane('byFlagged')&quot;/&gt;</span>
<a href="#l6.469"></a><span id="l6.469" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortByOrderReceivedMenuitem&quot;</span>
<a href="#l6.470"></a><span id="l6.470" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.471"></a><span id="l6.471" class="difflineminus">-                          name=&quot;sortby&quot;</span>
<a href="#l6.472"></a><span id="l6.472" class="difflineminus">-                          label=&quot;&amp;sortByOrderReceivedCmd.label;&quot;</span>
<a href="#l6.473"></a><span id="l6.473" class="difflineminus">-                          oncommand=&quot;MsgSortThreadPane('byId')&quot;/&gt;</span>
<a href="#l6.474"></a><span id="l6.474" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortByPriorityMenuitem&quot;</span>
<a href="#l6.475"></a><span id="l6.475" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.476"></a><span id="l6.476" class="difflineminus">-                          name=&quot;sortby&quot;</span>
<a href="#l6.477"></a><span id="l6.477" class="difflineminus">-                          label=&quot;&amp;sortByPriorityCmd.label;&quot;</span>
<a href="#l6.478"></a><span id="l6.478" class="difflineminus">-                          oncommand=&quot;MsgSortThreadPane('byPriority')&quot;/&gt;</span>
<a href="#l6.479"></a><span id="l6.479" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortByFromMenuitem&quot;</span>
<a href="#l6.480"></a><span id="l6.480" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.481"></a><span id="l6.481" class="difflineminus">-                          name=&quot;sortby&quot;</span>
<a href="#l6.482"></a><span id="l6.482" class="difflineminus">-                          label=&quot;&amp;sortByFromCmd.label;&quot;</span>
<a href="#l6.483"></a><span id="l6.483" class="difflineminus">-                          oncommand=&quot;MsgSortThreadPane('byAuthor')&quot;/&gt;</span>
<a href="#l6.484"></a><span id="l6.484" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortByRecipientMenuitem&quot;</span>
<a href="#l6.485"></a><span id="l6.485" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.486"></a><span id="l6.486" class="difflineminus">-                          name=&quot;sortby&quot;</span>
<a href="#l6.487"></a><span id="l6.487" class="difflineminus">-                          label=&quot;&amp;sortByRecipientCmd.label;&quot;</span>
<a href="#l6.488"></a><span id="l6.488" class="difflineminus">-                          oncommand=&quot;MsgSortThreadPane('byRecipient')&quot;/&gt;</span>
<a href="#l6.489"></a><span id="l6.489" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortByCorrespondentMenuitem&quot;</span>
<a href="#l6.490"></a><span id="l6.490" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.491"></a><span id="l6.491" class="difflineminus">-                          name=&quot;sortby&quot;</span>
<a href="#l6.492"></a><span id="l6.492" class="difflineminus">-                          label=&quot;&amp;sortByCorrespondentCmd.label;&quot;</span>
<a href="#l6.493"></a><span id="l6.493" class="difflineminus">-                          oncommand=&quot;MsgSortThreadPane('byCorrespondent')&quot;/&gt;</span>
<a href="#l6.494"></a><span id="l6.494" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortBySizeMenuitem&quot;</span>
<a href="#l6.495"></a><span id="l6.495" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.496"></a><span id="l6.496" class="difflineminus">-                          name=&quot;sortby&quot;</span>
<a href="#l6.497"></a><span id="l6.497" class="difflineminus">-                          label=&quot;&amp;sortBySizeCmd.label;&quot;</span>
<a href="#l6.498"></a><span id="l6.498" class="difflineminus">-                          oncommand=&quot;MsgSortThreadPane('bySize')&quot;/&gt;</span>
<a href="#l6.499"></a><span id="l6.499" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortByStatusMenuitem&quot;</span>
<a href="#l6.500"></a><span id="l6.500" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.501"></a><span id="l6.501" class="difflineminus">-                          name=&quot;sortby&quot;</span>
<a href="#l6.502"></a><span id="l6.502" class="difflineminus">-                          label=&quot;&amp;sortByStatusCmd.label;&quot;</span>
<a href="#l6.503"></a><span id="l6.503" class="difflineminus">-                          oncommand=&quot;MsgSortThreadPane('byStatus')&quot;/&gt;</span>
<a href="#l6.504"></a><span id="l6.504" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortBySubjectMenuitem&quot;</span>
<a href="#l6.505"></a><span id="l6.505" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.506"></a><span id="l6.506" class="difflineminus">-                          name=&quot;sortby&quot;</span>
<a href="#l6.507"></a><span id="l6.507" class="difflineminus">-                          label=&quot;&amp;sortBySubjectCmd.label;&quot;</span>
<a href="#l6.508"></a><span id="l6.508" class="difflineminus">-                          oncommand=&quot;MsgSortThreadPane('bySubject')&quot;/&gt;</span>
<a href="#l6.509"></a><span id="l6.509" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortByUnreadMenuitem&quot;</span>
<a href="#l6.510"></a><span id="l6.510" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.511"></a><span id="l6.511" class="difflineminus">-                          name=&quot;sortby&quot;</span>
<a href="#l6.512"></a><span id="l6.512" class="difflineminus">-                          label=&quot;&amp;sortByUnreadCmd.label;&quot;</span>
<a href="#l6.513"></a><span id="l6.513" class="difflineminus">-                          oncommand=&quot;MsgSortThreadPane('byUnread')&quot;/&gt;</span>
<a href="#l6.514"></a><span id="l6.514" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortByTagsMenuitem&quot;</span>
<a href="#l6.515"></a><span id="l6.515" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.516"></a><span id="l6.516" class="difflineminus">-                          name=&quot;sortby&quot;</span>
<a href="#l6.517"></a><span id="l6.517" class="difflineminus">-                          label=&quot;&amp;sortByTagsCmd.label;&quot;</span>
<a href="#l6.518"></a><span id="l6.518" class="difflineminus">-                          oncommand=&quot;MsgSortThreadPane('byTags')&quot;/&gt;</span>
<a href="#l6.519"></a><span id="l6.519" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortByJunkStatusMenuitem&quot;</span>
<a href="#l6.520"></a><span id="l6.520" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.521"></a><span id="l6.521" class="difflineminus">-                          name=&quot;sortby&quot;</span>
<a href="#l6.522"></a><span id="l6.522" class="difflineminus">-                          label=&quot;&amp;sortByJunkStatusCmd.label;&quot;</span>
<a href="#l6.523"></a><span id="l6.523" class="difflineminus">-                          oncommand=&quot;MsgSortThreadPane('byJunkStatus')&quot;/&gt;</span>
<a href="#l6.524"></a><span id="l6.524" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortByAttachmentsMenuitem&quot;</span>
<a href="#l6.525"></a><span id="l6.525" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.526"></a><span id="l6.526" class="difflineminus">-                          name=&quot;sortby&quot;</span>
<a href="#l6.527"></a><span id="l6.527" class="difflineminus">-                          label=&quot;&amp;sortByAttachmentsCmd.label;&quot;</span>
<a href="#l6.528"></a><span id="l6.528" class="difflineminus">-                          oncommand=&quot;MsgSortThreadPane('byAttachments')&quot;/&gt;</span>
<a href="#l6.529"></a><span id="l6.529" class="difflineminus">-                &lt;menuseparator id=&quot;appmenu_sortAfterAttachmentSeparator&quot;/&gt;</span>
<a href="#l6.530"></a><span id="l6.530" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortAscending&quot;</span>
<a href="#l6.531"></a><span id="l6.531" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.532"></a><span id="l6.532" class="difflineminus">-                          name=&quot;sortdirection&quot;</span>
<a href="#l6.533"></a><span id="l6.533" class="difflineminus">-                          label=&quot;&amp;sortAscending.label;&quot;</span>
<a href="#l6.534"></a><span id="l6.534" class="difflineminus">-                          oncommand=&quot;MsgSortAscending()&quot;/&gt;</span>
<a href="#l6.535"></a><span id="l6.535" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortDescending&quot;</span>
<a href="#l6.536"></a><span id="l6.536" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.537"></a><span id="l6.537" class="difflineminus">-                          name=&quot;sortdirection&quot;</span>
<a href="#l6.538"></a><span id="l6.538" class="difflineminus">-                          label=&quot;&amp;sortDescending.label;&quot;</span>
<a href="#l6.539"></a><span id="l6.539" class="difflineminus">-                          oncommand=&quot;MsgSortDescending()&quot;/&gt;</span>
<a href="#l6.540"></a><span id="l6.540" class="difflineminus">-                &lt;menuseparator id=&quot;appmenu_sortAfterDescendingSeparator&quot;/&gt;</span>
<a href="#l6.541"></a><span id="l6.541" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortThreaded&quot;</span>
<a href="#l6.542"></a><span id="l6.542" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.543"></a><span id="l6.543" class="difflineminus">-                          name=&quot;threaded&quot;</span>
<a href="#l6.544"></a><span id="l6.544" class="difflineminus">-                          label=&quot;&amp;sortThreaded.label;&quot;</span>
<a href="#l6.545"></a><span id="l6.545" class="difflineminus">-                          oncommand=&quot;MsgSortThreaded();&quot;/&gt;</span>
<a href="#l6.546"></a><span id="l6.546" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_sortUnthreaded&quot;</span>
<a href="#l6.547"></a><span id="l6.547" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.548"></a><span id="l6.548" class="difflineminus">-                          name=&quot;threaded&quot;</span>
<a href="#l6.549"></a><span id="l6.549" class="difflineminus">-                          label=&quot;&amp;sortUnthreaded.label;&quot;</span>
<a href="#l6.550"></a><span id="l6.550" class="difflineminus">-                          oncommand=&quot;MsgSortUnthreaded();&quot;/&gt;</span>
<a href="#l6.551"></a><span id="l6.551" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_groupBySort&quot;</span>
<a href="#l6.552"></a><span id="l6.552" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.553"></a><span id="l6.553" class="difflineminus">-                          name=&quot;group&quot;</span>
<a href="#l6.554"></a><span id="l6.554" class="difflineminus">-                          label=&quot;&amp;groupBySort.label;&quot;</span>
<a href="#l6.555"></a><span id="l6.555" class="difflineminus">-                          oncommand=&quot;MsgGroupBySort();&quot;/&gt;</span>
<a href="#l6.556"></a><span id="l6.556" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l6.557"></a><span id="l6.557" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.558"></a><span id="l6.558" class="difflineminus">-            &lt;menu id=&quot;appmenu_viewMessageViewMenu&quot;</span>
<a href="#l6.559"></a><span id="l6.559" class="difflineminus">-                  label=&quot;&amp;msgsMenu.label;&quot;</span>
<a href="#l6.560"></a><span id="l6.560" class="difflineminus">-                  command=&quot;mailHideMenus&quot;</span>
<a href="#l6.561"></a><span id="l6.561" class="difflineminus">-                  oncommand=&quot;ViewChangeByMenuitem(event.target);&quot;&gt;</span>
<a href="#l6.562"></a><span id="l6.562" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_viewMessagePopup&quot;</span>
<a href="#l6.563"></a><span id="l6.563" class="difflineminus">-                         onpopupshowing=&quot;RefreshViewPopup(this);&quot;&gt;</span>
<a href="#l6.564"></a><span id="l6.564" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_viewMessageAll&quot;</span>
<a href="#l6.565"></a><span id="l6.565" class="difflineminus">-                          value=&quot;0&quot;</span>
<a href="#l6.566"></a><span id="l6.566" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.567"></a><span id="l6.567" class="difflineminus">-                          label=&quot;&amp;viewAll.label;&quot;/&gt;</span>
<a href="#l6.568"></a><span id="l6.568" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_viewMessageUnread&quot;</span>
<a href="#l6.569"></a><span id="l6.569" class="difflineminus">-                          value=&quot;1&quot;</span>
<a href="#l6.570"></a><span id="l6.570" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.571"></a><span id="l6.571" class="difflineminus">-                          label=&quot;&amp;viewUnread.label;&quot;/&gt;</span>
<a href="#l6.572"></a><span id="l6.572" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_viewMessageNotDeleted&quot;</span>
<a href="#l6.573"></a><span id="l6.573" class="difflineminus">-                          value=&quot;3&quot;</span>
<a href="#l6.574"></a><span id="l6.574" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.575"></a><span id="l6.575" class="difflineminus">-                          label=&quot;&amp;viewNotDeleted.label;&quot;/&gt;</span>
<a href="#l6.576"></a><span id="l6.576" class="difflineminus">-                &lt;menuseparator id=&quot;appmenu_messageViewAfterUnreadSeparator&quot;/&gt;</span>
<a href="#l6.577"></a><span id="l6.577" class="difflineminus">-                &lt;menu id=&quot;viewMessageTags&quot;</span>
<a href="#l6.578"></a><span id="l6.578" class="difflineminus">-                      label=&quot;&amp;viewTags.label;&quot;&gt;</span>
<a href="#l6.579"></a><span id="l6.579" class="difflineminus">-                  &lt;menupopup id=&quot;appmenu_viewMessageTagsPopup&quot;</span>
<a href="#l6.580"></a><span id="l6.580" class="difflineminus">-                             onpopupshowing=&quot;RefreshTagsPopup(this);&quot;/&gt;</span>
<a href="#l6.581"></a><span id="l6.581" class="difflineminus">-                &lt;/menu&gt;</span>
<a href="#l6.582"></a><span id="l6.582" class="difflineminus">-                &lt;menu id=&quot;appmenu_viewMessageCustomViews&quot;</span>
<a href="#l6.583"></a><span id="l6.583" class="difflineminus">-                      label=&quot;&amp;viewCustomViews.label;&quot;&gt;</span>
<a href="#l6.584"></a><span id="l6.584" class="difflineminus">-                  &lt;menupopup id=&quot;appmenu_viewMessageCustomViewsPopup&quot;</span>
<a href="#l6.585"></a><span id="l6.585" class="difflineminus">-                             onpopupshowing=&quot;RefreshCustomViewsPopup(this);&quot;/&gt;</span>
<a href="#l6.586"></a><span id="l6.586" class="difflineminus">-                &lt;/menu&gt;</span>
<a href="#l6.587"></a><span id="l6.587" class="difflineminus">-                &lt;menuseparator id=&quot;appmenu_messageViewAfterCustomSeparator&quot;/&gt;</span>
<a href="#l6.588"></a><span id="l6.588" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_viewMessageVirtualFolder&quot;</span>
<a href="#l6.589"></a><span id="l6.589" class="difflineminus">-                          value=&quot;7&quot;</span>
<a href="#l6.590"></a><span id="l6.590" class="difflineminus">-                          label=&quot;&amp;viewVirtualFolder.label;&quot;/&gt;</span>
<a href="#l6.591"></a><span id="l6.591" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_viewMessageCustomize&quot;</span>
<a href="#l6.592"></a><span id="l6.592" class="difflineminus">-                          value=&quot;8&quot;</span>
<a href="#l6.593"></a><span id="l6.593" class="difflineminus">-                          label=&quot;&amp;viewCustomizeView.label;&quot;/&gt;</span>
<a href="#l6.594"></a><span id="l6.594" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l6.595"></a><span id="l6.595" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.596"></a><span id="l6.596" class="difflineminus">-            &lt;menu label=&quot;&amp;threads.label;&quot;</span>
<a href="#l6.597"></a><span id="l6.597" class="difflineminus">-                  id=&quot;appmenu_viewMessagesMenu&quot;&gt;</span>
<a href="#l6.598"></a><span id="l6.598" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_ThreadsPopup&quot;</span>
<a href="#l6.599"></a><span id="l6.599" class="difflineminus">-                         onpopupshowing=&quot;InitAppmenuViewMessagesMenu()&quot;&gt;</span>
<a href="#l6.600"></a><span id="l6.600" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_viewAllMessagesMenuItem&quot;</span>
<a href="#l6.601"></a><span id="l6.601" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.602"></a><span id="l6.602" class="difflineminus">-                          name=&quot;viewmessages&quot;</span>
<a href="#l6.603"></a><span id="l6.603" class="difflineminus">-                          label=&quot;&amp;allMsgsCmd.label;&quot;</span>
<a href="#l6.604"></a><span id="l6.604" class="difflineminus">-                          disabled=&quot;true&quot;</span>
<a href="#l6.605"></a><span id="l6.605" class="difflineminus">-                          command=&quot;cmd_viewAllMsgs&quot;/&gt;</span>
<a href="#l6.606"></a><span id="l6.606" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_viewUnreadMessagesMenuItem&quot;</span>
<a href="#l6.607"></a><span id="l6.607" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.608"></a><span id="l6.608" class="difflineminus">-                          name=&quot;viewmessages&quot;</span>
<a href="#l6.609"></a><span id="l6.609" class="difflineminus">-                          label=&quot;&amp;unreadMsgsCmd.label;&quot;</span>
<a href="#l6.610"></a><span id="l6.610" class="difflineminus">-                          disabled=&quot;true&quot;</span>
<a href="#l6.611"></a><span id="l6.611" class="difflineminus">-                          command=&quot;cmd_viewUnreadMsgs&quot;/&gt;</span>
<a href="#l6.612"></a><span id="l6.612" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_viewThreadsWithUnreadMenuItem&quot;</span>
<a href="#l6.613"></a><span id="l6.613" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.614"></a><span id="l6.614" class="difflineminus">-                          name=&quot;viewmessages&quot;</span>
<a href="#l6.615"></a><span id="l6.615" class="difflineminus">-                          label=&quot;&amp;threadsWithUnreadCmd.label;&quot;</span>
<a href="#l6.616"></a><span id="l6.616" class="difflineminus">-                          disabled=&quot;true&quot;</span>
<a href="#l6.617"></a><span id="l6.617" class="difflineminus">-                          command=&quot;cmd_viewThreadsWithUnread&quot;/&gt;</span>
<a href="#l6.618"></a><span id="l6.618" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_viewWatchedThreadsWithUnreadMenuItem&quot;</span>
<a href="#l6.619"></a><span id="l6.619" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.620"></a><span id="l6.620" class="difflineminus">-                          name=&quot;viewmessages&quot;</span>
<a href="#l6.621"></a><span id="l6.621" class="difflineminus">-                          label=&quot;&amp;watchedThreadsWithUnreadCmd.label;&quot;</span>
<a href="#l6.622"></a><span id="l6.622" class="difflineminus">-                          disabled=&quot;true&quot;</span>
<a href="#l6.623"></a><span id="l6.623" class="difflineminus">-                          command=&quot;cmd_viewWatchedThreadsWithUnread&quot;/&gt;</span>
<a href="#l6.624"></a><span id="l6.624" class="difflineminus">-                &lt;menuseparator id=&quot;appmenu_threadsAfterWatchedSeparator&quot;/&gt;</span>
<a href="#l6.625"></a><span id="l6.625" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_viewIgnoredThreadsMenuItem&quot;</span>
<a href="#l6.626"></a><span id="l6.626" class="difflineminus">-                          type=&quot;checkbox&quot;</span>
<a href="#l6.627"></a><span id="l6.627" class="difflineminus">-                          label=&quot;&amp;ignoredThreadsCmd.label;&quot;</span>
<a href="#l6.628"></a><span id="l6.628" class="difflineminus">-                          disabled=&quot;true&quot;</span>
<a href="#l6.629"></a><span id="l6.629" class="difflineminus">-                          command=&quot;cmd_viewIgnoredThreads&quot;/&gt;</span>
<a href="#l6.630"></a><span id="l6.630" class="difflineminus">-                &lt;menuseparator id=&quot;appmenu_threadsAfterIgnoredSeparator&quot;/&gt;</span>
<a href="#l6.631"></a><span id="l6.631" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_expandAllThreads&quot;</span>
<a href="#l6.632"></a><span id="l6.632" class="difflineminus">-                          label=&quot;&amp;expandAllThreadsCmd.label;&quot;</span>
<a href="#l6.633"></a><span id="l6.633" class="difflineminus">-                          key=&quot;key_expandAllThreads&quot;</span>
<a href="#l6.634"></a><span id="l6.634" class="difflineminus">-                          disabled=&quot;true&quot;</span>
<a href="#l6.635"></a><span id="l6.635" class="difflineminus">-                          command=&quot;cmd_expandAllThreads&quot;/&gt;</span>
<a href="#l6.636"></a><span id="l6.636" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_collapseAllThreads&quot;</span>
<a href="#l6.637"></a><span id="l6.637" class="difflineminus">-                          label=&quot;&amp;collapseAllThreadsCmd.label;&quot;</span>
<a href="#l6.638"></a><span id="l6.638" class="difflineminus">-                          key=&quot;key_collapseAllThreads&quot;</span>
<a href="#l6.639"></a><span id="l6.639" class="difflineminus">-                          disabled=&quot;true&quot;</span>
<a href="#l6.640"></a><span id="l6.640" class="difflineminus">-                          command=&quot;cmd_collapseAllThreads&quot;/&gt;</span>
<a href="#l6.641"></a><span id="l6.641" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l6.642"></a><span id="l6.642" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.643"></a><span id="l6.643" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_viewAfterThreadsSeparator&quot;/&gt;</span>
<a href="#l6.644"></a><span id="l6.644" class="difflineminus">-            &lt;menu id=&quot;appmenu_viewHeadersMenu&quot;</span>
<a href="#l6.645"></a><span id="l6.645" class="difflineminus">-                  label=&quot;&amp;headersMenu.label;&quot;&gt;</span>
<a href="#l6.646"></a><span id="l6.646" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_HeadersPopup&quot; onpopupshowing=&quot;InitViewHeadersMenu();&quot;&gt;</span>
<a href="#l6.647"></a><span id="l6.647" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_viewallheaders&quot;</span>
<a href="#l6.648"></a><span id="l6.648" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.649"></a><span id="l6.649" class="difflineminus">-                          name=&quot;viewheadergroup&quot;</span>
<a href="#l6.650"></a><span id="l6.650" class="difflineminus">-                          label=&quot;&amp;headersAllCmd.label;&quot;</span>
<a href="#l6.651"></a><span id="l6.651" class="difflineminus">-                          command=&quot;cmd_viewAllHeader&quot;/&gt;</span>
<a href="#l6.652"></a><span id="l6.652" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_viewnormalheaders&quot;</span>
<a href="#l6.653"></a><span id="l6.653" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.654"></a><span id="l6.654" class="difflineminus">-                          name=&quot;viewheadergroup&quot;</span>
<a href="#l6.655"></a><span id="l6.655" class="difflineminus">-                          label=&quot;&amp;headersNormalCmd.label;&quot;</span>
<a href="#l6.656"></a><span id="l6.656" class="difflineminus">-                          command=&quot;cmd_viewNormalHeader&quot;/&gt;</span>
<a href="#l6.657"></a><span id="l6.657" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l6.658"></a><span id="l6.658" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.659"></a><span id="l6.659" class="difflineminus">-            &lt;menu id=&quot;appmenu_viewBodyMenu&quot;</span>
<a href="#l6.660"></a><span id="l6.660" class="difflineminus">-                  label=&quot;&amp;bodyMenu.label;&quot;&gt;</span>
<a href="#l6.661"></a><span id="l6.661" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_viewBodyPopMenu&quot;</span>
<a href="#l6.662"></a><span id="l6.662" class="difflineminus">-                         onpopupshowing=&quot;InitAppmenuViewBodyMenu()&quot;&gt;</span>
<a href="#l6.663"></a><span id="l6.663" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_bodyAllowHTML&quot;</span>
<a href="#l6.664"></a><span id="l6.664" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.665"></a><span id="l6.665" class="difflineminus">-                          name=&quot;bodyPlaintextVsHTMLPref&quot;</span>
<a href="#l6.666"></a><span id="l6.666" class="difflineminus">-                          label=&quot;&amp;bodyAllowHTML.label;&quot;</span>
<a href="#l6.667"></a><span id="l6.667" class="difflineminus">-                          oncommand=&quot;MsgBodyAllowHTML()&quot;/&gt;</span>
<a href="#l6.668"></a><span id="l6.668" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_bodySanitized&quot;</span>
<a href="#l6.669"></a><span id="l6.669" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.670"></a><span id="l6.670" class="difflineminus">-                          name=&quot;bodyPlaintextVsHTMLPref&quot;</span>
<a href="#l6.671"></a><span id="l6.671" class="difflineminus">-                          label=&quot;&amp;bodySanitized.label;&quot;</span>
<a href="#l6.672"></a><span id="l6.672" class="difflineminus">-                          oncommand=&quot;MsgBodySanitized()&quot;/&gt;</span>
<a href="#l6.673"></a><span id="l6.673" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_bodyAsPlaintext&quot;</span>
<a href="#l6.674"></a><span id="l6.674" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.675"></a><span id="l6.675" class="difflineminus">-                          name=&quot;bodyPlaintextVsHTMLPref&quot;</span>
<a href="#l6.676"></a><span id="l6.676" class="difflineminus">-                          label=&quot;&amp;bodyAsPlaintext.label;&quot;</span>
<a href="#l6.677"></a><span id="l6.677" class="difflineminus">-                          oncommand=&quot;MsgBodyAsPlaintext()&quot;/&gt;</span>
<a href="#l6.678"></a><span id="l6.678" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_bodyAllParts&quot;</span>
<a href="#l6.679"></a><span id="l6.679" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.680"></a><span id="l6.680" class="difflineminus">-                          name=&quot;bodyPlaintextVsHTMLPref&quot;</span>
<a href="#l6.681"></a><span id="l6.681" class="difflineminus">-                          label=&quot;&amp;bodyAllParts.label;&quot;</span>
<a href="#l6.682"></a><span id="l6.682" class="difflineminus">-                          oncommand=&quot;MsgBodyAllParts()&quot;/&gt;</span>
<a href="#l6.683"></a><span id="l6.683" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l6.684"></a><span id="l6.684" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.685"></a><span id="l6.685" class="difflineminus">-            &lt;menu id=&quot;appmenu_viewFeedSummary&quot;</span>
<a href="#l6.686"></a><span id="l6.686" class="difflineminus">-                  label=&quot;&amp;bodyMenuFeed.label;&quot;&gt;</span>
<a href="#l6.687"></a><span id="l6.687" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_viewFeedSummaryPopupMenu&quot;</span>
<a href="#l6.688"></a><span id="l6.688" class="difflineminus">-                         onpopupshowing=&quot;InitAppmenuViewBodyMenu()&quot;&gt;</span>
<a href="#l6.689"></a><span id="l6.689" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_bodyFeedGlobalWebPage&quot;</span>
<a href="#l6.690"></a><span id="l6.690" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.691"></a><span id="l6.691" class="difflineminus">-                          name=&quot;viewFeedSummaryGroup&quot;</span>
<a href="#l6.692"></a><span id="l6.692" class="difflineminus">-                          label=&quot;&amp;viewFeedWebPage.label;&quot;</span>
<a href="#l6.693"></a><span id="l6.693" class="difflineminus">-                          observes=&quot;bodyFeedGlobalWebPage&quot;</span>
<a href="#l6.694"></a><span id="l6.694" class="difflineminus">-                          oncommand=&quot;FeedMessageHandler.onSelectPref = 0&quot;/&gt;</span>
<a href="#l6.695"></a><span id="l6.695" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_bodyFeedGlobalSummary&quot;</span>
<a href="#l6.696"></a><span id="l6.696" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.697"></a><span id="l6.697" class="difflineminus">-                          name=&quot;viewFeedSummaryGroup&quot;</span>
<a href="#l6.698"></a><span id="l6.698" class="difflineminus">-                          label=&quot;&amp;viewFeedSummary.label;&quot;</span>
<a href="#l6.699"></a><span id="l6.699" class="difflineminus">-                          observes=&quot;bodyFeedGlobalSummary&quot;</span>
<a href="#l6.700"></a><span id="l6.700" class="difflineminus">-                          oncommand=&quot;FeedMessageHandler.onSelectPref = 1&quot;/&gt;</span>
<a href="#l6.701"></a><span id="l6.701" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_bodyFeedPerFolderPref&quot;</span>
<a href="#l6.702"></a><span id="l6.702" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.703"></a><span id="l6.703" class="difflineminus">-                          name=&quot;viewFeedSummaryGroup&quot;</span>
<a href="#l6.704"></a><span id="l6.704" class="difflineminus">-                          label=&quot;&amp;viewFeedSummaryFeedPropsPref.label;&quot;</span>
<a href="#l6.705"></a><span id="l6.705" class="difflineminus">-                          observes=&quot;bodyFeedPerFolderPref&quot;</span>
<a href="#l6.706"></a><span id="l6.706" class="difflineminus">-                          oncommand=&quot;FeedMessageHandler.onSelectPref = 2&quot;/&gt;</span>
<a href="#l6.707"></a><span id="l6.707" class="difflineminus">-                &lt;menuseparator id=&quot;appmenu_viewFeedSummarySeparator&quot;/&gt;</span>
<a href="#l6.708"></a><span id="l6.708" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_bodyFeedSummaryAllowHTML&quot;</span>
<a href="#l6.709"></a><span id="l6.709" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.710"></a><span id="l6.710" class="difflineminus">-                          name=&quot;viewFeedBodyHTMLGroup&quot;</span>
<a href="#l6.711"></a><span id="l6.711" class="difflineminus">-                          label=&quot;&amp;bodyAllowHTML.label;&quot;</span>
<a href="#l6.712"></a><span id="l6.712" class="difflineminus">-                          oncommand=&quot;MsgFeedBodyRenderPrefs(false, 0, 0)&quot;/&gt;</span>
<a href="#l6.713"></a><span id="l6.713" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_bodyFeedSummarySanitized&quot;</span>
<a href="#l6.714"></a><span id="l6.714" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.715"></a><span id="l6.715" class="difflineminus">-                          name=&quot;viewFeedBodyHTMLGroup&quot;</span>
<a href="#l6.716"></a><span id="l6.716" class="difflineminus">-                          label=&quot;&amp;bodySanitized.label;&quot;</span>
<a href="#l6.717"></a><span id="l6.717" class="difflineminus">-                          oncommand=&quot;MsgFeedBodyRenderPrefs(false, 3, gDisallow_classes_no_html)&quot;/&gt;</span>
<a href="#l6.718"></a><span id="l6.718" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_bodyFeedSummaryAsPlaintext&quot;</span>
<a href="#l6.719"></a><span id="l6.719" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.720"></a><span id="l6.720" class="difflineminus">-                          name=&quot;viewFeedBodyHTMLGroup&quot;</span>
<a href="#l6.721"></a><span id="l6.721" class="difflineminus">-                          label=&quot;&amp;bodyAsPlaintext.label;&quot;</span>
<a href="#l6.722"></a><span id="l6.722" class="difflineminus">-                          oncommand=&quot;MsgFeedBodyRenderPrefs(true, 1, gDisallow_classes_no_html)&quot;/&gt;</span>
<a href="#l6.723"></a><span id="l6.723" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l6.724"></a><span id="l6.724" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.725"></a><span id="l6.725" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_viewAttachmentsInlineMenuitem&quot;</span>
<a href="#l6.726"></a><span id="l6.726" class="difflineminus">-                      label=&quot;&amp;viewAttachmentsInlineCmd.label;&quot;</span>
<a href="#l6.727"></a><span id="l6.727" class="difflineminus">-                      oncommand=&quot;ToggleInlineAttachment(event.target)&quot;</span>
<a href="#l6.728"></a><span id="l6.728" class="difflineminus">-                      type=&quot;checkbox&quot;</span>
<a href="#l6.729"></a><span id="l6.729" class="difflineminus">-                      checked=&quot;true&quot;/&gt;</span>
<a href="#l6.730"></a><span id="l6.730" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_viewAfterAttachmentsSeparator&quot;/&gt;</span>
<a href="#l6.731"></a><span id="l6.731" class="difflineminus">-            &lt;menu id=&quot;appmenu_viewFullZoomMenu&quot;</span>
<a href="#l6.732"></a><span id="l6.732" class="difflineminus">-                  label=&quot;&amp;fullZoom.label;&quot;</span>
<a href="#l6.733"></a><span id="l6.733" class="difflineminus">-                  onpopupshowing=&quot;UpdateFullZoomMenu()&quot;&gt;</span>
<a href="#l6.734"></a><span id="l6.734" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_viewFullZoomPopupMenu&quot;&gt;</span>
<a href="#l6.735"></a><span id="l6.735" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_fullZoomEnlarge&quot;</span>
<a href="#l6.736"></a><span id="l6.736" class="difflineminus">-                          label=&quot;&amp;fullZoomEnlargeCmd.label;&quot;</span>
<a href="#l6.737"></a><span id="l6.737" class="difflineminus">-                          key=&quot;key_fullZoomEnlarge&quot;</span>
<a href="#l6.738"></a><span id="l6.738" class="difflineminus">-                          command=&quot;cmd_fullZoomEnlarge&quot;/&gt;</span>
<a href="#l6.739"></a><span id="l6.739" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_fullZoomReduce&quot;</span>
<a href="#l6.740"></a><span id="l6.740" class="difflineminus">-                          label=&quot;&amp;fullZoomReduceCmd.label;&quot;</span>
<a href="#l6.741"></a><span id="l6.741" class="difflineminus">-                          key=&quot;key_fullZoomReduce&quot;</span>
<a href="#l6.742"></a><span id="l6.742" class="difflineminus">-                          command=&quot;cmd_fullZoomReduce&quot;/&gt;</span>
<a href="#l6.743"></a><span id="l6.743" class="difflineminus">-                &lt;menuseparator id=&quot;appmenu_fullZoomAfterReduceSeparator&quot;/&gt;</span>
<a href="#l6.744"></a><span id="l6.744" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_fullZoomReset&quot;</span>
<a href="#l6.745"></a><span id="l6.745" class="difflineminus">-                          label=&quot;&amp;fullZoomResetCmd.label;&quot;</span>
<a href="#l6.746"></a><span id="l6.746" class="difflineminus">-                          key=&quot;key_fullZoomReset&quot;</span>
<a href="#l6.747"></a><span id="l6.747" class="difflineminus">-                          command=&quot;cmd_fullZoomReset&quot;/&gt;</span>
<a href="#l6.748"></a><span id="l6.748" class="difflineminus">-                &lt;menuseparator id=&quot;appmenu_fullZoomAfterResetSeparator&quot;/&gt;</span>
<a href="#l6.749"></a><span id="l6.749" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_fullZoomToggle&quot;</span>
<a href="#l6.750"></a><span id="l6.750" class="difflineminus">-                          label=&quot;&amp;fullZoomToggleCmd.label;&quot;</span>
<a href="#l6.751"></a><span id="l6.751" class="difflineminus">-                          type=&quot;checkbox&quot;</span>
<a href="#l6.752"></a><span id="l6.752" class="difflineminus">-                          command=&quot;cmd_fullZoomToggle&quot;</span>
<a href="#l6.753"></a><span id="l6.753" class="difflineminus">-                          checked=&quot;false&quot;/&gt;</span>
<a href="#l6.754"></a><span id="l6.754" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l6.755"></a><span id="l6.755" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.756"></a><span id="l6.756" class="difflineminus">-            &lt;menu id=&quot;appmenu_charsetMenu&quot;</span>
<a href="#l6.757"></a><span id="l6.757" class="difflineminus">-                  onpopupshowing=&quot;UpdateCharsetMenu(msgWindow.mailCharacterSet, this);&quot;</span>
<a href="#l6.758"></a><span id="l6.758" class="difflineminus">-                  oncommand=&quot;MailSetCharacterSet(event)&quot;</span>
<a href="#l6.759"></a><span id="l6.759" class="difflineminus">-                  label=&quot;&amp;charsetMenu2.label;&quot;</span>
<a href="#l6.760"></a><span id="l6.760" class="difflineminus">-                  accesskey=&quot;&amp;charsetMenu2.accesskey;&quot;&gt;</span>
<a href="#l6.761"></a><span id="l6.761" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_charsetPopup&quot;</span>
<a href="#l6.762"></a><span id="l6.762" class="difflineminus">-                         onpopupshowing=&quot;CharsetMenu.build(this, true, this.getAttribute('detectors') != 'false');&quot;/&gt;</span>
<a href="#l6.763"></a><span id="l6.763" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.764"></a><span id="l6.764" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_viewAfterCharsetSeparator&quot;/&gt;</span>
<a href="#l6.765"></a><span id="l6.765" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_pageSourceMenuItem&quot;</span>
<a href="#l6.766"></a><span id="l6.766" class="difflineminus">-                      label=&quot;&amp;pageSourceCmd.label;&quot;</span>
<a href="#l6.767"></a><span id="l6.767" class="difflineminus">-                      key=&quot;key_viewPageSource&quot;</span>
<a href="#l6.768"></a><span id="l6.768" class="difflineminus">-                      command=&quot;cmd_viewPageSource&quot;/&gt;</span>
<a href="#l6.769"></a><span id="l6.769" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_securityStatus&quot;</span>
<a href="#l6.770"></a><span id="l6.770" class="difflineminus">-                      label=&quot;&amp;menu_securityStatus.label;&quot;</span>
<a href="#l6.771"></a><span id="l6.771" class="difflineminus">-                      accesskey=&quot;&amp;menu_securityStatus.accesskey;&quot;</span>
<a href="#l6.772"></a><span id="l6.772" class="difflineminus">-                      command=&quot;cmd_viewSecurityStatus&quot;/&gt;</span>
<a href="#l6.773"></a><span id="l6.773" class="difflineminus">-          &lt;/menupopup&gt;</span>
<a href="#l6.774"></a><span id="l6.774" class="difflineminus">-        &lt;/menu&gt;</span>
<a href="#l6.775"></a><span id="l6.775" class="difflineminus">-        &lt;!-- Go menu --&gt;</span>
<a href="#l6.776"></a><span id="l6.776" class="difflineminus">-        &lt;menu id=&quot;appmenu_Go&quot;</span>
<a href="#l6.777"></a><span id="l6.777" class="difflineminus">-              label=&quot;&amp;goMenu.label;&quot;&gt;</span>
<a href="#l6.778"></a><span id="l6.778" class="difflineminus">-          &lt;menupopup id=&quot;appmenu_GoPopup&quot;&gt;</span>
<a href="#l6.779"></a><span id="l6.779" class="difflineminus">-            &lt;menu id=&quot;appmenu_goNextMenu&quot;</span>
<a href="#l6.780"></a><span id="l6.780" class="difflineminus">-                  label=&quot;&amp;nextMenu.label;&quot;&gt;</span>
<a href="#l6.781"></a><span id="l6.781" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_GoNextPopup&quot;&gt;</span>
<a href="#l6.782"></a><span id="l6.782" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_nextMsg&quot;</span>
<a href="#l6.783"></a><span id="l6.783" class="difflineminus">-                          label=&quot;&amp;nextMsgCmd.label;&quot;</span>
<a href="#l6.784"></a><span id="l6.784" class="difflineminus">-                          key=&quot;key_nextMsg&quot;</span>
<a href="#l6.785"></a><span id="l6.785" class="difflineminus">-                          command=&quot;cmd_nextMsg&quot;/&gt;</span>
<a href="#l6.786"></a><span id="l6.786" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_nextUnreadMsg&quot;</span>
<a href="#l6.787"></a><span id="l6.787" class="difflineminus">-                          label=&quot;&amp;nextUnreadMsgCmd.label;&quot;</span>
<a href="#l6.788"></a><span id="l6.788" class="difflineminus">-                          key=&quot;key_nextUnreadMsg&quot;</span>
<a href="#l6.789"></a><span id="l6.789" class="difflineminus">-                          command=&quot;cmd_nextUnreadMsg&quot;/&gt;</span>
<a href="#l6.790"></a><span id="l6.790" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_nextFlaggedMsg&quot;</span>
<a href="#l6.791"></a><span id="l6.791" class="difflineminus">-                          label=&quot;&amp;nextStarredMsgCmd.label;&quot;</span>
<a href="#l6.792"></a><span id="l6.792" class="difflineminus">-                          command=&quot;cmd_nextFlaggedMsg&quot;/&gt;</span>
<a href="#l6.793"></a><span id="l6.793" class="difflineminus">-                &lt;menuseparator id=&quot;appmenu_goNextAfterFlaggedSeparator&quot;/&gt;</span>
<a href="#l6.794"></a><span id="l6.794" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_nextUnreadThread&quot;</span>
<a href="#l6.795"></a><span id="l6.795" class="difflineminus">-                          label=&quot;&amp;nextUnreadThread.label;&quot;</span>
<a href="#l6.796"></a><span id="l6.796" class="difflineminus">-                          key=&quot;key_nextUnreadThread&quot;</span>
<a href="#l6.797"></a><span id="l6.797" class="difflineminus">-                          command=&quot;cmd_nextUnreadThread&quot;/&gt;</span>
<a href="#l6.798"></a><span id="l6.798" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l6.799"></a><span id="l6.799" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.800"></a><span id="l6.800" class="difflineminus">-            &lt;menu id=&quot;appmenu_goPreviousMenu&quot;</span>
<a href="#l6.801"></a><span id="l6.801" class="difflineminus">-                  label=&quot;&amp;prevMenu.label;&quot;&gt;</span>
<a href="#l6.802"></a><span id="l6.802" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_GoPreviousPopup&quot;&gt;</span>
<a href="#l6.803"></a><span id="l6.803" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_prevMsg&quot;</span>
<a href="#l6.804"></a><span id="l6.804" class="difflineminus">-                          label=&quot;&amp;prevMsgCmd.label;&quot;</span>
<a href="#l6.805"></a><span id="l6.805" class="difflineminus">-                          key=&quot;key_previousMsg&quot;</span>
<a href="#l6.806"></a><span id="l6.806" class="difflineminus">-                          command=&quot;cmd_previousMsg&quot;/&gt;</span>
<a href="#l6.807"></a><span id="l6.807" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_prevUnreadMsg&quot;</span>
<a href="#l6.808"></a><span id="l6.808" class="difflineminus">-                          label=&quot;&amp;prevUnreadMsgCmd.label;&quot;</span>
<a href="#l6.809"></a><span id="l6.809" class="difflineminus">-                          key=&quot;key_previousUnreadMsg&quot;</span>
<a href="#l6.810"></a><span id="l6.810" class="difflineminus">-                          command=&quot;cmd_previousUnreadMsg&quot;/&gt;</span>
<a href="#l6.811"></a><span id="l6.811" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_prevFlaggedMsg&quot;</span>
<a href="#l6.812"></a><span id="l6.812" class="difflineminus">-                          label=&quot;&amp;prevStarredMsgCmd.label;&quot;</span>
<a href="#l6.813"></a><span id="l6.813" class="difflineminus">-                          command=&quot;cmd_previousFlaggedMsg&quot;/&gt;</span>
<a href="#l6.814"></a><span id="l6.814" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l6.815"></a><span id="l6.815" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.816"></a><span id="l6.816" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_goForward&quot;</span>
<a href="#l6.817"></a><span id="l6.817" class="difflineminus">-                      label=&quot;&amp;goForwardCmd.label;&quot;</span>
<a href="#l6.818"></a><span id="l6.818" class="difflineminus">-                      key=&quot;key_goForward&quot;</span>
<a href="#l6.819"></a><span id="l6.819" class="difflineminus">-                      command=&quot;cmd_goForward&quot;/&gt;</span>
<a href="#l6.820"></a><span id="l6.820" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_goBack&quot;</span>
<a href="#l6.821"></a><span id="l6.821" class="difflineminus">-                      label=&quot;&amp;goBackCmd.label;&quot;</span>
<a href="#l6.822"></a><span id="l6.822" class="difflineminus">-                      key=&quot;key_goBack&quot;</span>
<a href="#l6.823"></a><span id="l6.823" class="difflineminus">-                      command=&quot;cmd_goBack&quot;/&gt;</span>
<a href="#l6.824"></a><span id="l6.824" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_goNextSeparator&quot;/&gt;</span>
<a href="#l6.825"></a><span id="l6.825" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_goChat&quot;</span>
<a href="#l6.826"></a><span id="l6.826" class="difflineminus">-                      label=&quot;&amp;goChatCmd.label;&quot;</span>
<a href="#l6.827"></a><span id="l6.827" class="difflineminus">-                      key=&quot;key_goChat&quot;</span>
<a href="#l6.828"></a><span id="l6.828" class="difflineminus">-                      command=&quot;cmd_chat&quot;/&gt;</span>
<a href="#l6.829"></a><span id="l6.829" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_goChatSeparator&quot;/&gt;</span>
<a href="#l6.830"></a><span id="l6.830" class="difflineminus">-            &lt;menu id=&quot;appmenu_goFolderMenu&quot;</span>
<a href="#l6.831"></a><span id="l6.831" class="difflineminus">-                  label=&quot;&amp;folderMenu.label;&quot;</span>
<a href="#l6.832"></a><span id="l6.832" class="difflineminus">-                  command=&quot;cmd_goFolder&quot;&gt;</span>
<a href="#l6.833"></a><span id="l6.833" class="difflineminus">-              &lt;menupopup is=&quot;folder-menupopup&quot; id=&quot;appmenu_GoFolderPopup&quot;</span>
<a href="#l6.834"></a><span id="l6.834" class="difflineminus">-                         showFileHereLabel=&quot;true&quot;</span>
<a href="#l6.835"></a><span id="l6.835" class="difflineminus">-                         showRecent=&quot;true&quot;</span>
<a href="#l6.836"></a><span id="l6.836" class="difflineminus">-                         recentLabel=&quot;&amp;contextMoveCopyMsgRecentMenu.label;&quot;/&gt;</span>
<a href="#l6.837"></a><span id="l6.837" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.838"></a><span id="l6.838" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_goFolderSeparator&quot;/&gt;</span>
<a href="#l6.839"></a><span id="l6.839" class="difflineminus">-            &lt;menu id=&quot;appmenu_goRecentlyClosedTabs&quot;</span>
<a href="#l6.840"></a><span id="l6.840" class="difflineminus">-                  label=&quot;&amp;goRecentlyClosedTabs.label;&quot;</span>
<a href="#l6.841"></a><span id="l6.841" class="difflineminus">-                  observes=&quot;cmd_undoCloseTab&quot;&gt;</span>
<a href="#l6.842"></a><span id="l6.842" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_GoRecentlyClosedTabsPopup&quot;</span>
<a href="#l6.843"></a><span id="l6.843" class="difflineminus">-                         onpopupshowing=&quot;return InitRecentlyClosedTabsPopup(this)&quot; /&gt;</span>
<a href="#l6.844"></a><span id="l6.844" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.845"></a><span id="l6.845" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_goRecentlyClosedTabsSeparator&quot;/&gt;</span>
<a href="#l6.846"></a><span id="l6.846" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_goStartPage&quot;</span>
<a href="#l6.847"></a><span id="l6.847" class="difflineminus">-                      label=&quot;&amp;startPageCmd.label;&quot;</span>
<a href="#l6.848"></a><span id="l6.848" class="difflineminus">-                      key=&quot;key_goStartPage&quot;</span>
<a href="#l6.849"></a><span id="l6.849" class="difflineminus">-                      command=&quot;cmd_goStartPage&quot;/&gt;</span>
<a href="#l6.850"></a><span id="l6.850" class="difflineminus">-          &lt;/menupopup&gt;</span>
<a href="#l6.851"></a><span id="l6.851" class="difflineminus">-        &lt;/menu&gt;</span>
<a href="#l6.852"></a><span id="l6.852" class="difflineminus">-        &lt;!-- Message menu --&gt;</span>
<a href="#l6.853"></a><span id="l6.853" class="difflineminus">-        &lt;menu id=&quot;appmenu_messageMenu&quot;</span>
<a href="#l6.854"></a><span id="l6.854" class="difflineminus">-              label=&quot;&amp;msgMenu.label;&quot;&gt;</span>
<a href="#l6.855"></a><span id="l6.855" class="difflineminus">-          &lt;menupopup id=&quot;appmenu_messageMenuPopup&quot;</span>
<a href="#l6.856"></a><span id="l6.856" class="difflineminus">-                     onpopupshowing=&quot;InitAppMessageMenu();&quot;&gt;</span>
<a href="#l6.857"></a><span id="l6.857" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_newMsgCmd&quot;</span>
<a href="#l6.858"></a><span id="l6.858" class="difflineminus">-                      label=&quot;&amp;newMsgCmd.label;&quot;</span>
<a href="#l6.859"></a><span id="l6.859" class="difflineminus">-                      key=&quot;key_newMessage2&quot;</span>
<a href="#l6.860"></a><span id="l6.860" class="difflineminus">-                      command=&quot;cmd_newMessage&quot;/&gt;</span>
<a href="#l6.861"></a><span id="l6.861" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_replyMainMenu&quot;</span>
<a href="#l6.862"></a><span id="l6.862" class="difflineminus">-                      label=&quot;&amp;replyMsgCmd.label;&quot;</span>
<a href="#l6.863"></a><span id="l6.863" class="difflineminus">-                      key=&quot;key_reply&quot;</span>
<a href="#l6.864"></a><span id="l6.864" class="difflineminus">-                      command=&quot;cmd_reply&quot;/&gt;</span>
<a href="#l6.865"></a><span id="l6.865" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_replyNewsgroupMainMenu&quot;</span>
<a href="#l6.866"></a><span id="l6.866" class="difflineminus">-                      label=&quot;&amp;replyNewsgroupCmd2.label;&quot;</span>
<a href="#l6.867"></a><span id="l6.867" class="difflineminus">-                      key=&quot;key_reply&quot;</span>
<a href="#l6.868"></a><span id="l6.868" class="difflineminus">-                      command=&quot;cmd_replyGroup&quot;/&gt;</span>
<a href="#l6.869"></a><span id="l6.869" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_replySenderMainMenu&quot;</span>
<a href="#l6.870"></a><span id="l6.870" class="difflineminus">-                      label=&quot;&amp;replySenderCmd.label;&quot;</span>
<a href="#l6.871"></a><span id="l6.871" class="difflineminus">-                      command=&quot;cmd_replySender&quot;/&gt;</span>
<a href="#l6.872"></a><span id="l6.872" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_replyToAll&quot;</span>
<a href="#l6.873"></a><span id="l6.873" class="difflineminus">-                      label=&quot;&amp;replyToAllMsgCmd.label;&quot;</span>
<a href="#l6.874"></a><span id="l6.874" class="difflineminus">-                      key=&quot;key_replyall&quot;</span>
<a href="#l6.875"></a><span id="l6.875" class="difflineminus">-                      command=&quot;cmd_replyall&quot;/&gt;</span>
<a href="#l6.876"></a><span id="l6.876" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_replyToList&quot;</span>
<a href="#l6.877"></a><span id="l6.877" class="difflineminus">-                      label=&quot;&amp;replyToListMsgCmd.label;&quot;</span>
<a href="#l6.878"></a><span id="l6.878" class="difflineminus">-                      key=&quot;key_replylist&quot;</span>
<a href="#l6.879"></a><span id="l6.879" class="difflineminus">-                      command=&quot;cmd_replylist&quot;/&gt;</span>
<a href="#l6.880"></a><span id="l6.880" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_forwardMsg&quot;</span>
<a href="#l6.881"></a><span id="l6.881" class="difflineminus">-                      label=&quot;&amp;forwardMsgCmd.label;&quot;</span>
<a href="#l6.882"></a><span id="l6.882" class="difflineminus">-                      key=&quot;key_forward&quot;</span>
<a href="#l6.883"></a><span id="l6.883" class="difflineminus">-                      command=&quot;cmd_forward&quot;/&gt;</span>
<a href="#l6.884"></a><span id="l6.884" class="difflineminus">-            &lt;menu id=&quot;appmenu_forwardAsMenu&quot;</span>
<a href="#l6.885"></a><span id="l6.885" class="difflineminus">-                  label=&quot;&amp;forwardAsMenu.label;&quot;&gt;</span>
<a href="#l6.886"></a><span id="l6.886" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_forwardAsPopup&quot;&gt;</span>
<a href="#l6.887"></a><span id="l6.887" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_forwardAsInline&quot;</span>
<a href="#l6.888"></a><span id="l6.888" class="difflineminus">-                          label=&quot;&amp;forwardAsInline.label;&quot;</span>
<a href="#l6.889"></a><span id="l6.889" class="difflineminus">-                          command=&quot;cmd_forwardInline&quot;/&gt;</span>
<a href="#l6.890"></a><span id="l6.890" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_forwardAsAttachment&quot;</span>
<a href="#l6.891"></a><span id="l6.891" class="difflineminus">-                          label=&quot;&amp;forwardAsAttachmentCmd.label;&quot;</span>
<a href="#l6.892"></a><span id="l6.892" class="difflineminus">-                          command=&quot;cmd_forwardAttachment&quot;/&gt;</span>
<a href="#l6.893"></a><span id="l6.893" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l6.894"></a><span id="l6.894" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.895"></a><span id="l6.895" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_editMsgAsNew&quot;</span>
<a href="#l6.896"></a><span id="l6.896" class="difflineminus">-                      label=&quot;&amp;editAsNewMsgCmd.label;&quot;</span>
<a href="#l6.897"></a><span id="l6.897" class="difflineminus">-                      key=&quot;key_editAsNew&quot;</span>
<a href="#l6.898"></a><span id="l6.898" class="difflineminus">-                      command=&quot;cmd_editAsNew&quot;/&gt;</span>
<a href="#l6.899"></a><span id="l6.899" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_editDraftMsg&quot;</span>
<a href="#l6.900"></a><span id="l6.900" class="difflineminus">-                      label=&quot;&amp;editDraftMsgCmd.label;&quot;</span>
<a href="#l6.901"></a><span id="l6.901" class="difflineminus">-                      command=&quot;cmd_editDraftMsg&quot;/&gt;</span>
<a href="#l6.902"></a><span id="l6.902" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_newMsgFromTemplateCmd&quot;</span>
<a href="#l6.903"></a><span id="l6.903" class="difflineminus">-                      label=&quot;&amp;newMsgFromTemplateCmd.label;&quot;</span>
<a href="#l6.904"></a><span id="l6.904" class="difflineminus">-                      key=&quot;key_newMsgFromTemplate&quot;</span>
<a href="#l6.905"></a><span id="l6.905" class="difflineminus">-                      command=&quot;cmd_newMsgFromTemplate&quot;/&gt;</span>
<a href="#l6.906"></a><span id="l6.906" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_editTemplateMsgCmd&quot;</span>
<a href="#l6.907"></a><span id="l6.907" class="difflineminus">-                      label=&quot;&amp;editTemplateMsgCmd.label;&quot;</span>
<a href="#l6.908"></a><span id="l6.908" class="difflineminus">-                      command=&quot;cmd_editTemplateMsg&quot;/&gt;</span>
<a href="#l6.909"></a><span id="l6.909" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_messageMenuAfterCompositionCommandsSeparator&quot;/&gt;</span>
<a href="#l6.910"></a><span id="l6.910" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_openMessageWindowMenuitem&quot;</span>
<a href="#l6.911"></a><span id="l6.911" class="difflineminus">-                      label=&quot;&amp;openMessageWindowCmd.label;&quot;</span>
<a href="#l6.912"></a><span id="l6.912" class="difflineminus">-                      key=&quot;key_openMessage&quot;</span>
<a href="#l6.913"></a><span id="l6.913" class="difflineminus">-                      command=&quot;cmd_openMessage&quot;/&gt;</span>
<a href="#l6.914"></a><span id="l6.914" class="difflineminus">-#ifdef MAIN_WINDOW</span>
<a href="#l6.915"></a><span id="l6.915" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_openConversationMenuitem&quot;</span>
<a href="#l6.916"></a><span id="l6.916" class="difflineminus">-                      label=&quot;&amp;openInConversationCmd.label;&quot;</span>
<a href="#l6.917"></a><span id="l6.917" class="difflineminus">-                      key=&quot;key_openConversation&quot;</span>
<a href="#l6.918"></a><span id="l6.918" class="difflineminus">-                      command=&quot;cmd_openConversation&quot;/&gt;</span>
<a href="#l6.919"></a><span id="l6.919" class="difflineminus">-#endif</span>
<a href="#l6.920"></a><span id="l6.920" class="difflineminus">-            &lt;menu id=&quot;appmenu_openFeedMessage&quot;</span>
<a href="#l6.921"></a><span id="l6.921" class="difflineminus">-                  label=&quot;&amp;openFeedMessage1.label;&quot;&gt;</span>
<a href="#l6.922"></a><span id="l6.922" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_openFeedMessagePopup&quot;&gt;</span>
<a href="#l6.923"></a><span id="l6.923" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_openFeedWebPage&quot;</span>
<a href="#l6.924"></a><span id="l6.924" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.925"></a><span id="l6.925" class="difflineminus">-                          name=&quot;openFeedGroup&quot;</span>
<a href="#l6.926"></a><span id="l6.926" class="difflineminus">-                          label=&quot;&amp;openFeedWebPage.label;&quot;</span>
<a href="#l6.927"></a><span id="l6.927" class="difflineminus">-                          oncommand=&quot;FeedMessageHandler.onOpenPref = 0&quot;/&gt;</span>
<a href="#l6.928"></a><span id="l6.928" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_openFeedSummary&quot;</span>
<a href="#l6.929"></a><span id="l6.929" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.930"></a><span id="l6.930" class="difflineminus">-                          name=&quot;openFeedGroup&quot;</span>
<a href="#l6.931"></a><span id="l6.931" class="difflineminus">-                          label=&quot;&amp;openFeedSummary.label;&quot;</span>
<a href="#l6.932"></a><span id="l6.932" class="difflineminus">-                          oncommand=&quot;FeedMessageHandler.onOpenPref = 1&quot;/&gt;</span>
<a href="#l6.933"></a><span id="l6.933" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_openFeedWebPageInMessagePane&quot;</span>
<a href="#l6.934"></a><span id="l6.934" class="difflineminus">-                          type=&quot;radio&quot;</span>
<a href="#l6.935"></a><span id="l6.935" class="difflineminus">-                          name=&quot;openFeedGroup&quot;</span>
<a href="#l6.936"></a><span id="l6.936" class="difflineminus">-                          label=&quot;&amp;openFeedWebPageInMP.label;&quot;</span>
<a href="#l6.937"></a><span id="l6.937" class="difflineminus">-                          oncommand=&quot;FeedMessageHandler.onOpenPref = 2&quot;/&gt;</span>
<a href="#l6.938"></a><span id="l6.938" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l6.939"></a><span id="l6.939" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.940"></a><span id="l6.940" class="difflineminus">-#ifdef MAIN_WINDOW</span>
<a href="#l6.941"></a><span id="l6.941" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_messageAfterOpenMsgSeparator&quot;/&gt;</span>
<a href="#l6.942"></a><span id="l6.942" class="difflineminus">-#endif</span>
<a href="#l6.943"></a><span id="l6.943" class="difflineminus">-            &lt;menu id=&quot;appmenu_tagMenu&quot;</span>
<a href="#l6.944"></a><span id="l6.944" class="difflineminus">-                  label=&quot;&amp;tagMenu.label;&quot;</span>
<a href="#l6.945"></a><span id="l6.945" class="difflineminus">-                  command=&quot;cmd_tag&quot;&gt;</span>
<a href="#l6.946"></a><span id="l6.946" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_tagMenu-tagpopup&quot;</span>
<a href="#l6.947"></a><span id="l6.947" class="difflineminus">-                         onpopupshowing=&quot;InitMessageTags(this);&quot;&gt;</span>
<a href="#l6.948"></a><span id="l6.948" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_addNewTag&quot;</span>
<a href="#l6.949"></a><span id="l6.949" class="difflineminus">-                          label=&quot;&amp;addNewTag.label;&quot;</span>
<a href="#l6.950"></a><span id="l6.950" class="difflineminus">-                          command=&quot;cmd_addTag&quot;/&gt;</span>
<a href="#l6.951"></a><span id="l6.951" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_manageTags&quot;</span>
<a href="#l6.952"></a><span id="l6.952" class="difflineminus">-                          label=&quot;&amp;manageTags.label;&quot;</span>
<a href="#l6.953"></a><span id="l6.953" class="difflineminus">-                          command=&quot;cmd_manageTags&quot;/&gt;</span>
<a href="#l6.954"></a><span id="l6.954" class="difflineminus">-                &lt;menuseparator id=&quot;appmenu_tagMenu-sep-afterTagAddNew&quot;/&gt;</span>
<a href="#l6.955"></a><span id="l6.955" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_tagMenu-tagRemoveAll&quot;</span>
<a href="#l6.956"></a><span id="l6.956" class="difflineminus">-                          command=&quot;cmd_removeTags&quot;/&gt;</span>
<a href="#l6.957"></a><span id="l6.957" class="difflineminus">-                &lt;menuseparator id=&quot;appmenu_tagMenuAfterRemoveSeparator&quot;/&gt;</span>
<a href="#l6.958"></a><span id="l6.958" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l6.959"></a><span id="l6.959" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.960"></a><span id="l6.960" class="difflineminus">-            &lt;menu id=&quot;appmenu_markMenu&quot;</span>
<a href="#l6.961"></a><span id="l6.961" class="difflineminus">-                  label=&quot;&amp;markMenu.label;&quot;&gt;</span>
<a href="#l6.962"></a><span id="l6.962" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_MarkPopup&quot;</span>
<a href="#l6.963"></a><span id="l6.963" class="difflineminus">-                         onpopupshowing=&quot;InitMessageMark()&quot;&gt;</span>
<a href="#l6.964"></a><span id="l6.964" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_markReadMenuItem&quot;</span>
<a href="#l6.965"></a><span id="l6.965" class="difflineminus">-                          label=&quot;&amp;markAsReadCmd.label;&quot;</span>
<a href="#l6.966"></a><span id="l6.966" class="difflineminus">-                          command=&quot;cmd_markAsRead&quot;/&gt;</span>
<a href="#l6.967"></a><span id="l6.967" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_markUnreadMenuItem&quot;</span>
<a href="#l6.968"></a><span id="l6.968" class="difflineminus">-                          label=&quot;&amp;markAsUnreadCmd.label;&quot;</span>
<a href="#l6.969"></a><span id="l6.969" class="difflineminus">-                          command=&quot;cmd_markAsUnread&quot;/&gt;</span>
<a href="#l6.970"></a><span id="l6.970" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_markThreadAsRead&quot;</span>
<a href="#l6.971"></a><span id="l6.971" class="difflineminus">-                          label=&quot;&amp;markThreadAsReadCmd.label;&quot;</span>
<a href="#l6.972"></a><span id="l6.972" class="difflineminus">-                          key=&quot;key_markThreadAsRead&quot;</span>
<a href="#l6.973"></a><span id="l6.973" class="difflineminus">-                          command=&quot;cmd_markThreadAsRead&quot;/&gt;</span>
<a href="#l6.974"></a><span id="l6.974" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_markReadByDate&quot;</span>
<a href="#l6.975"></a><span id="l6.975" class="difflineminus">-                          label=&quot;&amp;markReadByDateCmd.label;&quot;</span>
<a href="#l6.976"></a><span id="l6.976" class="difflineminus">-                          key=&quot;key_markReadByDate&quot;</span>
<a href="#l6.977"></a><span id="l6.977" class="difflineminus">-                          command=&quot;cmd_markReadByDate&quot;/&gt;</span>
<a href="#l6.978"></a><span id="l6.978" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_markAllRead&quot;</span>
<a href="#l6.979"></a><span id="l6.979" class="difflineminus">-                          label=&quot;&amp;markAllReadCmd.label;&quot;</span>
<a href="#l6.980"></a><span id="l6.980" class="difflineminus">-                          key=&quot;key_markAllRead&quot;</span>
<a href="#l6.981"></a><span id="l6.981" class="difflineminus">-                          command=&quot;cmd_markAllRead&quot;/&gt;</span>
<a href="#l6.982"></a><span id="l6.982" class="difflineminus">-                &lt;menuseparator id=&quot;markMenuAfterAllReadSeparator&quot;/&gt;</span>
<a href="#l6.983"></a><span id="l6.983" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_markFlaggedMenuItem&quot;</span>
<a href="#l6.984"></a><span id="l6.984" class="difflineminus">-                          type=&quot;checkbox&quot;</span>
<a href="#l6.985"></a><span id="l6.985" class="difflineminus">-                          label=&quot;&amp;markStarredCmd.label;&quot;</span>
<a href="#l6.986"></a><span id="l6.986" class="difflineminus">-                          key=&quot;key_toggleFlagged&quot;</span>
<a href="#l6.987"></a><span id="l6.987" class="difflineminus">-                          command=&quot;cmd_markAsFlagged&quot;/&gt;</span>
<a href="#l6.988"></a><span id="l6.988" class="difflineminus">-                &lt;menuseparator id=&quot;markMenuAfterFlaggedSeparator&quot;/&gt;</span>
<a href="#l6.989"></a><span id="l6.989" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_markAsJunk&quot;</span>
<a href="#l6.990"></a><span id="l6.990" class="difflineminus">-                          label=&quot;&amp;markAsJunkCmd.label;&quot;</span>
<a href="#l6.991"></a><span id="l6.991" class="difflineminus">-                          key=&quot;key_markJunk&quot;</span>
<a href="#l6.992"></a><span id="l6.992" class="difflineminus">-                          command=&quot;cmd_markAsJunk&quot;/&gt;</span>
<a href="#l6.993"></a><span id="l6.993" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_markAsNotJunk&quot;</span>
<a href="#l6.994"></a><span id="l6.994" class="difflineminus">-                          label=&quot;&amp;markAsNotJunkCmd.label;&quot;</span>
<a href="#l6.995"></a><span id="l6.995" class="difflineminus">-                          key=&quot;key_markNotJunk&quot;</span>
<a href="#l6.996"></a><span id="l6.996" class="difflineminus">-                          command=&quot;cmd_markAsNotJunk&quot;/&gt;</span>
<a href="#l6.997"></a><span id="l6.997" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_recalculateJunkScore&quot;</span>
<a href="#l6.998"></a><span id="l6.998" class="difflineminus">-                          label=&quot;&amp;recalculateJunkScoreCmd.label;&quot;</span>
<a href="#l6.999"></a><span id="l6.999" class="difflineminus">-                          command=&quot;cmd_recalculateJunkScore&quot;/&gt;</span>
<a href="#l6.1000"></a><span id="l6.1000" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l6.1001"></a><span id="l6.1001" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.1002"></a><span id="l6.1002" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_messageMenuAfterMarkSeparator&quot;/&gt;</span>
<a href="#l6.1003"></a><span id="l6.1003" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_archiveMainMenu&quot;</span>
<a href="#l6.1004"></a><span id="l6.1004" class="difflineminus">-                      label=&quot;&amp;archiveMsgCmd.label;&quot;</span>
<a href="#l6.1005"></a><span id="l6.1005" class="difflineminus">-                      key=&quot;key_archive&quot;</span>
<a href="#l6.1006"></a><span id="l6.1006" class="difflineminus">-                      command=&quot;cmd_archive&quot;/&gt;</span>
<a href="#l6.1007"></a><span id="l6.1007" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_cancel&quot;</span>
<a href="#l6.1008"></a><span id="l6.1008" class="difflineminus">-                      command=&quot;cmd_cancel&quot;</span>
<a href="#l6.1009"></a><span id="l6.1009" class="difflineminus">-                      label=&quot;&amp;cancelNewsMsgCmd.label;&quot;/&gt;</span>
<a href="#l6.1010"></a><span id="l6.1010" class="difflineminus">-            &lt;menu id=&quot;appmenu_moveMenu&quot;</span>
<a href="#l6.1011"></a><span id="l6.1011" class="difflineminus">-                  label=&quot;&amp;moveMsgToMenu.label;&quot;</span>
<a href="#l6.1012"></a><span id="l6.1012" class="difflineminus">-                  oncommand=&quot;MsgMoveMessage(event.target._folder)&quot;&gt;</span>
<a href="#l6.1013"></a><span id="l6.1013" class="difflineminus">-              &lt;menupopup is=&quot;folder-menupopup&quot;</span>
<a href="#l6.1014"></a><span id="l6.1014" class="difflineminus">-                         mode=&quot;filing&quot;</span>
<a href="#l6.1015"></a><span id="l6.1015" class="difflineminus">-                         showFileHereLabel=&quot;true&quot;</span>
<a href="#l6.1016"></a><span id="l6.1016" class="difflineminus">-                         showRecent=&quot;true&quot;</span>
<a href="#l6.1017"></a><span id="l6.1017" class="difflineminus">-                         recentLabel=&quot;&amp;moveCopyMsgRecentMenu.label;&quot;</span>
<a href="#l6.1018"></a><span id="l6.1018" class="difflineminus">-                         showFavorites=&quot;true&quot;</span>
<a href="#l6.1019"></a><span id="l6.1019" class="difflineminus">-                         favoritesLabel=&quot;&amp;contextMoveCopyMsgFavoritesMenu.label;&quot;</span>
<a href="#l6.1020"></a><span id="l6.1020" class="difflineminus">-                         favoritesAccessKey=&quot;&amp;contextMoveCopyMsgFavoritesMenu.accesskey;&quot;/&gt;</span>
<a href="#l6.1021"></a><span id="l6.1021" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.1022"></a><span id="l6.1022" class="difflineminus">-            &lt;menu id=&quot;appmenu_copyMenu&quot;</span>
<a href="#l6.1023"></a><span id="l6.1023" class="difflineminus">-                  label=&quot;&amp;copyMsgToMenu.label;&quot;</span>
<a href="#l6.1024"></a><span id="l6.1024" class="difflineminus">-                  oncommand=&quot;MsgCopyMessage(event.target._folder)&quot;&gt;</span>
<a href="#l6.1025"></a><span id="l6.1025" class="difflineminus">-              &lt;menupopup is=&quot;folder-menupopup&quot;</span>
<a href="#l6.1026"></a><span id="l6.1026" class="difflineminus">-                         mode=&quot;filing&quot;</span>
<a href="#l6.1027"></a><span id="l6.1027" class="difflineminus">-                         showFileHereLabel=&quot;true&quot;</span>
<a href="#l6.1028"></a><span id="l6.1028" class="difflineminus">-                         showRecent=&quot;true&quot;</span>
<a href="#l6.1029"></a><span id="l6.1029" class="difflineminus">-                         recentLabel=&quot;&amp;moveCopyMsgRecentMenu.label;&quot;</span>
<a href="#l6.1030"></a><span id="l6.1030" class="difflineminus">-                         showFavorites=&quot;true&quot;</span>
<a href="#l6.1031"></a><span id="l6.1031" class="difflineminus">-                         favoritesLabel=&quot;&amp;contextMoveCopyMsgFavoritesMenu.label;&quot;</span>
<a href="#l6.1032"></a><span id="l6.1032" class="difflineminus">-                         favoritesAccessKey=&quot;&amp;contextMoveCopyMsgFavoritesMenu.accesskey;&quot;/&gt;</span>
<a href="#l6.1033"></a><span id="l6.1033" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.1034"></a><span id="l6.1034" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_moveToFolderAgain&quot;</span>
<a href="#l6.1035"></a><span id="l6.1035" class="difflineminus">-                      command=&quot;cmd_moveToFolderAgain&quot;</span>
<a href="#l6.1036"></a><span id="l6.1036" class="difflineminus">-                      key=&quot;key_moveToFolderAgain&quot;</span>
<a href="#l6.1037"></a><span id="l6.1037" class="difflineminus">-                      label=&quot;&amp;moveToFolderAgain.label;&quot;/&gt;</span>
<a href="#l6.1038"></a><span id="l6.1038" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_messageMenuAfterMoveCommandsSeparator&quot;/&gt;</span>
<a href="#l6.1039"></a><span id="l6.1039" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_createFilter&quot;</span>
<a href="#l6.1040"></a><span id="l6.1040" class="difflineminus">-                      label=&quot;&amp;createFilter.label;&quot;</span>
<a href="#l6.1041"></a><span id="l6.1041" class="difflineminus">-                      command=&quot;cmd_createFilterFromMenu&quot;/&gt;</span>
<a href="#l6.1042"></a><span id="l6.1042" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_threadItemsSeparator&quot;/&gt;</span>
<a href="#l6.1043"></a><span id="l6.1043" class="difflineminus">-            &lt;menuitem label=&quot;&amp;killThreadMenu.label;&quot;</span>
<a href="#l6.1044"></a><span id="l6.1044" class="difflineminus">-                      id=&quot;appmenu_killThread&quot;</span>
<a href="#l6.1045"></a><span id="l6.1045" class="difflineminus">-                      key=&quot;key_killThread&quot;</span>
<a href="#l6.1046"></a><span id="l6.1046" class="difflineminus">-                      type=&quot;checkbox&quot;</span>
<a href="#l6.1047"></a><span id="l6.1047" class="difflineminus">-                      command=&quot;cmd_killThread&quot;/&gt;</span>
<a href="#l6.1048"></a><span id="l6.1048" class="difflineminus">-            &lt;menuitem label=&quot;&amp;killSubthreadMenu.label;&quot;</span>
<a href="#l6.1049"></a><span id="l6.1049" class="difflineminus">-                      id=&quot;appmenu_killSubthread&quot;</span>
<a href="#l6.1050"></a><span id="l6.1050" class="difflineminus">-                      key=&quot;key_killSubthread&quot;</span>
<a href="#l6.1051"></a><span id="l6.1051" class="difflineminus">-                      type=&quot;checkbox&quot;</span>
<a href="#l6.1052"></a><span id="l6.1052" class="difflineminus">-                      command=&quot;cmd_killSubthread&quot;/&gt;</span>
<a href="#l6.1053"></a><span id="l6.1053" class="difflineminus">-            &lt;menuitem label=&quot;&amp;watchThreadMenu.label;&quot;</span>
<a href="#l6.1054"></a><span id="l6.1054" class="difflineminus">-                      id=&quot;appmenu_watchThread&quot;</span>
<a href="#l6.1055"></a><span id="l6.1055" class="difflineminus">-                      key=&quot;key_watchThread&quot;</span>
<a href="#l6.1056"></a><span id="l6.1056" class="difflineminus">-                      type=&quot;checkbox&quot;</span>
<a href="#l6.1057"></a><span id="l6.1057" class="difflineminus">-                      command=&quot;cmd_watchThread&quot;/&gt;</span>
<a href="#l6.1058"></a><span id="l6.1058" class="difflineminus">-          &lt;/menupopup&gt;</span>
<a href="#l6.1059"></a><span id="l6.1059" class="difflineminus">-        &lt;/menu&gt;</span>
<a href="#l6.1060"></a><span id="l6.1060" class="difflineminus">-        &lt;!-- Tools menu --&gt;</span>
<a href="#l6.1061"></a><span id="l6.1061" class="difflineminus">-        &lt;menu id=&quot;appmenu_tasksMenu&quot;</span>
<a href="#l6.1062"></a><span id="l6.1062" class="difflineminus">-              label=&quot;&amp;tasksMenu.label;&quot;&gt;</span>
<a href="#l6.1063"></a><span id="l6.1063" class="difflineminus">-          &lt;menupopup id=&quot;appmenu_taskPopup&quot;&gt;</span>
<a href="#l6.1064"></a><span id="l6.1064" class="difflineminus">-            &lt;menuitem hidden=&quot;true&quot;</span>
<a href="#l6.1065"></a><span id="l6.1065" class="difflineminus">-                      id=&quot;appmenu_tasksMenuMail&quot;</span>
<a href="#l6.1066"></a><span id="l6.1066" class="difflineminus">-                      class=&quot;menuitem-iconic menu-iconic&quot;</span>
<a href="#l6.1067"></a><span id="l6.1067" class="difflineminus">-                      label=&quot;&amp;messengerCmd.label;&quot;</span>
<a href="#l6.1068"></a><span id="l6.1068" class="difflineminus">-                      key=&quot;key_mail&quot;</span>
<a href="#l6.1069"></a><span id="l6.1069" class="difflineminus">-                      oncommand=&quot;toMessengerWindow();&quot;/&gt;</span>
<a href="#l6.1070"></a><span id="l6.1070" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_addressBook&quot;</span>
<a href="#l6.1071"></a><span id="l6.1071" class="difflineminus">-                      label=&quot;&amp;addressBookCmd.label;&quot;</span>
<a href="#l6.1072"></a><span id="l6.1072" class="difflineminus">-                      key=&quot;key_addressbook&quot;</span>
<a href="#l6.1073"></a><span id="l6.1073" class="difflineminus">-                      oncommand=&quot;toOpenWindowByType('mail:addressbook', 'chrome://messenger/content/addressbook/addressbook.xul');&quot;/&gt;</span>
<a href="#l6.1074"></a><span id="l6.1074" class="difflineminus">-            &lt;menuseparator id=&quot;devToolsSeparator&quot;/&gt;</span>
<a href="#l6.1075"></a><span id="l6.1075" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_openSavedFilesWnd&quot;</span>
<a href="#l6.1076"></a><span id="l6.1076" class="difflineminus">-                      label=&quot;&amp;savedFiles.label;&quot;</span>
<a href="#l6.1077"></a><span id="l6.1077" class="difflineminus">-                      key=&quot;key_savedFiles&quot;</span>
<a href="#l6.1078"></a><span id="l6.1078" class="difflineminus">-                      oncommand=&quot;openSavedFilesWnd();&quot;/&gt;</span>
<a href="#l6.1079"></a><span id="l6.1079" class="difflineminus">-            &lt;menu id=&quot;appmenu_imAccountsStatus&quot;</span>
<a href="#l6.1080"></a><span id="l6.1080" class="difflineminus">-                  label=&quot;&amp;imAccountsStatus.label;&quot;</span>
<a href="#l6.1081"></a><span id="l6.1081" class="difflineminus">-                  command=&quot;cmd_chatStatus&quot;&gt;</span>
<a href="#l6.1082"></a><span id="l6.1082" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_imStatusMenupopup&quot;&gt;</span>
<a href="#l6.1083"></a><span id="l6.1083" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_imStatusAvailable&quot;</span>
<a href="#l6.1084"></a><span id="l6.1084" class="difflineminus">-                          status=&quot;available&quot;</span>
<a href="#l6.1085"></a><span id="l6.1085" class="difflineminus">-                          label=&quot;&amp;imStatus.available;&quot;</span>
<a href="#l6.1086"></a><span id="l6.1086" class="difflineminus">-                          class=&quot;menuitem-iconic&quot;/&gt;</span>
<a href="#l6.1087"></a><span id="l6.1087" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_imStatusUnavailable&quot;</span>
<a href="#l6.1088"></a><span id="l6.1088" class="difflineminus">-                          status=&quot;unavailable&quot;</span>
<a href="#l6.1089"></a><span id="l6.1089" class="difflineminus">-                          label=&quot;&amp;imStatus.unavailable;&quot;</span>
<a href="#l6.1090"></a><span id="l6.1090" class="difflineminus">-                          class=&quot;menuitem-iconic&quot;/&gt;</span>
<a href="#l6.1091"></a><span id="l6.1091" class="difflineminus">-                &lt;menuseparator id=&quot;appmenu_imStatusOfflineSeparator&quot;/&gt;</span>
<a href="#l6.1092"></a><span id="l6.1092" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_imStatusOffline&quot;</span>
<a href="#l6.1093"></a><span id="l6.1093" class="difflineminus">-                          status=&quot;offline&quot;</span>
<a href="#l6.1094"></a><span id="l6.1094" class="difflineminus">-                          label=&quot;&amp;imStatus.offline;&quot;</span>
<a href="#l6.1095"></a><span id="l6.1095" class="difflineminus">-                          class=&quot;menuitem-iconic&quot;/&gt;</span>
<a href="#l6.1096"></a><span id="l6.1096" class="difflineminus">-                &lt;menuseparator id=&quot;appmenu_imStatusShowAccountsSeparator&quot;/&gt;</span>
<a href="#l6.1097"></a><span id="l6.1097" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_imStatusShowAccounts&quot;</span>
<a href="#l6.1098"></a><span id="l6.1098" class="difflineminus">-                          label=&quot;&amp;imStatus.showAccounts;&quot;/&gt;</span>
<a href="#l6.1099"></a><span id="l6.1099" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l6.1100"></a><span id="l6.1100" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.1101"></a><span id="l6.1101" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_joinChatMenuItem&quot;</span>
<a href="#l6.1102"></a><span id="l6.1102" class="difflineminus">-                      label=&quot;&amp;joinChatCmd.label;&quot;</span>
<a href="#l6.1103"></a><span id="l6.1103" class="difflineminus">-                      command=&quot;cmd_joinChat&quot;/&gt;</span>
<a href="#l6.1104"></a><span id="l6.1104" class="difflineminus">-            &lt;menuseparator id=&quot;appmenu_afterChatSeparator&quot;/&gt;</span>
<a href="#l6.1105"></a><span id="l6.1105" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_runJunkControls&quot;</span>
<a href="#l6.1106"></a><span id="l6.1106" class="difflineminus">-                      label=&quot;&amp;runJunkControls.label;&quot;</span>
<a href="#l6.1107"></a><span id="l6.1107" class="difflineminus">-                      command=&quot;cmd_runJunkControls&quot;/&gt;</span>
<a href="#l6.1108"></a><span id="l6.1108" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_deleteJunk&quot;</span>
<a href="#l6.1109"></a><span id="l6.1109" class="difflineminus">-                      label=&quot;&amp;deleteJunk.label;&quot;</span>
<a href="#l6.1110"></a><span id="l6.1110" class="difflineminus">-                      command=&quot;cmd_deleteJunk&quot;/&gt;</span>
<a href="#l6.1111"></a><span id="l6.1111" class="difflineminus">-            &lt;menuseparator id=&quot;tasksMenuAfterDeleteSeparator&quot;/&gt;</span>
<a href="#l6.1112"></a><span id="l6.1112" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_import&quot;</span>
<a href="#l6.1113"></a><span id="l6.1113" class="difflineminus">-                      label=&quot;&amp;importCmd.label;&quot;</span>
<a href="#l6.1114"></a><span id="l6.1114" class="difflineminus">-                      oncommand=&quot;toImport();&quot;/&gt;</span>
<a href="#l6.1115"></a><span id="l6.1115" class="difflineminus">-            &lt;menu id=&quot;appmenu_devtoolsMenu&quot;</span>
<a href="#l6.1116"></a><span id="l6.1116" class="difflineminus">-                  label=&quot;&amp;devtoolsMenu.label;&quot;</span>
<a href="#l6.1117"></a><span id="l6.1117" class="difflineminus">-                  accesskey=&quot;&amp;devtoolsMenu.accesskey;&quot;&gt;</span>
<a href="#l6.1118"></a><span id="l6.1118" class="difflineminus">-              &lt;menupopup id=&quot;appmenu_devtoolsPopup&quot;&gt;</span>
<a href="#l6.1119"></a><span id="l6.1119" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_devtoolsToolbox&quot;</span>
<a href="#l6.1120"></a><span id="l6.1120" class="difflineminus">-                          label=&quot;&amp;devToolboxCmd.label;&quot;</span>
<a href="#l6.1121"></a><span id="l6.1121" class="difflineminus">-                          accesskey=&quot;&amp;devToolboxCmd.accesskey;&quot;</span>
<a href="#l6.1122"></a><span id="l6.1122" class="difflineminus">-                          key=&quot;key_devtoolsToolbox&quot;</span>
<a href="#l6.1123"></a><span id="l6.1123" class="difflineminus">-                          oncommand=&quot;BrowserToolboxProcess.init();&quot;/&gt;</span>
<a href="#l6.1124"></a><span id="l6.1124" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_addonDebugging&quot;</span>
<a href="#l6.1125"></a><span id="l6.1125" class="difflineminus">-                          label=&quot;&amp;debugAddonsCmd.label;&quot;</span>
<a href="#l6.1126"></a><span id="l6.1126" class="difflineminus">-                          accesskey=&quot;&amp;debugAddonsCmd.accesskey;&quot;</span>
<a href="#l6.1127"></a><span id="l6.1127" class="difflineminus">-                          oncommand=&quot;openAboutDebugging('addons')&quot;/&gt;</span>
<a href="#l6.1128"></a><span id="l6.1128" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_tabsDebugging&quot;</span>
<a href="#l6.1129"></a><span id="l6.1129" class="difflineminus">-                          label=&quot;&amp;tabsDebugCmd.label;&quot;</span>
<a href="#l6.1130"></a><span id="l6.1130" class="difflineminus">-                          accesskey=&quot;&amp;tabsDebugCmd.accesskey;&quot;</span>
<a href="#l6.1131"></a><span id="l6.1131" class="difflineminus">-                          oncommand=&quot;openAboutDebugging('tabs')&quot;/&gt;</span>
<a href="#l6.1132"></a><span id="l6.1132" class="difflineminus">-                &lt;menuseparator id=&quot;appmenu_debuggingSeparator&quot;/&gt;</span>
<a href="#l6.1133"></a><span id="l6.1133" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_javascriptConsole&quot;</span>
<a href="#l6.1134"></a><span id="l6.1134" class="difflineminus">-                          label=&quot;&amp;errorConsoleCmd.label;&quot;</span>
<a href="#l6.1135"></a><span id="l6.1135" class="difflineminus">-                          accesskey=&quot;&amp;errorConsoleCmd.accesskey;&quot;</span>
<a href="#l6.1136"></a><span id="l6.1136" class="difflineminus">-                          key=&quot;key_errorConsole&quot;</span>
<a href="#l6.1137"></a><span id="l6.1137" class="difflineminus">-                          oncommand=&quot;toJavaScriptConsole();&quot;/&gt;</span>
<a href="#l6.1138"></a><span id="l6.1138" class="difflineminus">-                &lt;menuitem id=&quot;appmenu_openScratchpad&quot;</span>
<a href="#l6.1139"></a><span id="l6.1139" class="difflineminus">-                          label=&quot;&amp;scratchpadCmd.label;&quot;</span>
<a href="#l6.1140"></a><span id="l6.1140" class="difflineminus">-                          accesskey=&quot;&amp;scratchpadCmd.accesskey;&quot;</span>
<a href="#l6.1141"></a><span id="l6.1141" class="difflineminus">-                          key=&quot;key_scratchpad&quot;</span>
<a href="#l6.1142"></a><span id="l6.1142" class="difflineminus">-                          oncommand=&quot;ScratchpadManager.openScratchpad({ executionContext: 2 });&quot;/&gt;</span>
<a href="#l6.1143"></a><span id="l6.1143" class="difflineminus">-              &lt;/menupopup&gt;</span>
<a href="#l6.1144"></a><span id="l6.1144" class="difflineminus">-            &lt;/menu&gt;</span>
<a href="#l6.1145"></a><span id="l6.1145" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_sanitizeHistory&quot;</span>
<a href="#l6.1146"></a><span id="l6.1146" class="difflineminus">-                      label=&quot;&amp;clearRecentHistory.label;&quot;</span>
<a href="#l6.1147"></a><span id="l6.1147" class="difflineminus">-                      key=&quot;key_sanitizeHistory&quot;</span>
<a href="#l6.1148"></a><span id="l6.1148" class="difflineminus">-                      oncommand=&quot;toSanitize();&quot;/&gt;</span>
<a href="#l6.1149"></a><span id="l6.1149" class="difflineminus">-          &lt;/menupopup&gt;</span>
<a href="#l6.1150"></a><span id="l6.1150" class="difflineminus">-        &lt;/menu&gt;</span>
<a href="#l6.1151"></a><span id="l6.1151" class="difflineminus">-        &lt;!-- Help menu --&gt;</span>
<a href="#l6.1152"></a><span id="l6.1152" class="difflineminus">-        &lt;splitmenu id=&quot;appmenu_help&quot;</span>
<a href="#l6.1153"></a><span id="l6.1153" class="difflineminus">-                   label=&quot;&amp;helpMenuWin.label;&quot;</span>
<a href="#l6.1154"></a><span id="l6.1154" class="difflineminus">-                   oncommand=&quot;openSupportURL();&quot;&gt;</span>
<a href="#l6.1155"></a><span id="l6.1155" class="difflineminus">-            &lt;menupopup id=&quot;appmenu_helpMenupopup&quot;&gt;</span>
<a href="#l6.1156"></a><span id="l6.1156" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_openHelp&quot;</span>
<a href="#l6.1157"></a><span id="l6.1157" class="difflineminus">-                        label=&quot;&amp;productHelp.label;&quot;</span>
<a href="#l6.1158"></a><span id="l6.1158" class="difflineminus">-                        key=&quot;key_openHelp&quot;</span>
<a href="#l6.1159"></a><span id="l6.1159" class="difflineminus">-                        oncommand=&quot;openSupportURL();&quot;/&gt;</span>
<a href="#l6.1160"></a><span id="l6.1160" class="difflineminus">-              &lt;menuitem id=&quot;menu_keyboardShortcuts&quot;</span>
<a href="#l6.1161"></a><span id="l6.1161" class="difflineminus">-                        label=&quot;&amp;helpKeyboardShortcuts.label;&quot;</span>
<a href="#l6.1162"></a><span id="l6.1162" class="difflineminus">-                        oncommand=&quot;openLinkText(event, 'keyboardShortcutsURL');&quot;/&gt;</span>
<a href="#l6.1163"></a><span id="l6.1163" class="difflineminus">-              &lt;menuitem id=&quot;getInvolved&quot;</span>
<a href="#l6.1164"></a><span id="l6.1164" class="difflineminus">-                        label=&quot;&amp;helpGetInvolvedPage.label;&quot;</span>
<a href="#l6.1165"></a><span id="l6.1165" class="difflineminus">-                        oncommand=&quot;openLinkText(event, 'getInvolvedURL');&quot;/&gt;</span>
<a href="#l6.1166"></a><span id="l6.1166" class="difflineminus">-              &lt;menuitem id=&quot;donationsPage&quot;</span>
<a href="#l6.1167"></a><span id="l6.1167" class="difflineminus">-                        label=&quot;&amp;helpDonationsPage.label;&quot;</span>
<a href="#l6.1168"></a><span id="l6.1168" class="difflineminus">-                        oncommand=&quot;openLinkText(event, 'donateURL');&quot;/&gt;</span>
<a href="#l6.1169"></a><span id="l6.1169" class="difflineminus">-              &lt;menuitem id=&quot;feedbackPage&quot; hidden=&quot;true&quot;</span>
<a href="#l6.1170"></a><span id="l6.1170" class="difflineminus">-                        label=&quot;&amp;helpFeedbackPage.label;&quot;</span>
<a href="#l6.1171"></a><span id="l6.1171" class="difflineminus">-                        oncommand=&quot;openFormattedURL('app.feedback.baseURL');&quot;/&gt;</span>
<a href="#l6.1172"></a><span id="l6.1172" class="difflineminus">-              &lt;menuseparator/&gt;</span>
<a href="#l6.1173"></a><span id="l6.1173" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_troubleshootingInfo&quot;</span>
<a href="#l6.1174"></a><span id="l6.1174" class="difflineminus">-                        label=&quot;&amp;helpTroubleshootingInfo.label;&quot;</span>
<a href="#l6.1175"></a><span id="l6.1175" class="difflineminus">-                        oncommand=&quot;openAboutSupport();&quot;/&gt;</span>
<a href="#l6.1176"></a><span id="l6.1176" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_safeMode&quot;</span>
<a href="#l6.1177"></a><span id="l6.1177" class="difflineminus">-                        label=&quot;&amp;helpSafeMode.label;&quot;</span>
<a href="#l6.1178"></a><span id="l6.1178" class="difflineminus">-                        oncommand=&quot;safeModeRestart();&quot;/&gt;</span>
<a href="#l6.1179"></a><span id="l6.1179" class="difflineminus">-              &lt;menuseparator/&gt;</span>
<a href="#l6.1180"></a><span id="l6.1180" class="difflineminus">-              &lt;menuitem id=&quot;appmenu_about&quot;</span>
<a href="#l6.1181"></a><span id="l6.1181" class="difflineminus">-                        label=&quot;&amp;aboutProduct2.label;&quot;</span>
<a href="#l6.1182"></a><span id="l6.1182" class="difflineminus">-                        oncommand=&quot;openAboutDialog();&quot;/&gt;</span>
<a href="#l6.1183"></a><span id="l6.1183" class="difflineminus">-            &lt;/menupopup&gt;</span>
<a href="#l6.1184"></a><span id="l6.1184" class="difflineminus">-        &lt;/splitmenu&gt;</span>
<a href="#l6.1185"></a><span id="l6.1185" class="difflineminus">-      &lt;/vbox&gt;</span>
<a href="#l6.1186"></a><span id="l6.1186" class="difflineminus">-    &lt;/hbox&gt;</span>
<a href="#l6.1187"></a><span id="l6.1187" class="difflineminus">-  &lt;/menupopup&gt;</span>
<a href="#l6.1188"></a><span id="l6.1188" class="difflineminus">-</span>
<a href="#l6.1189"></a><span id="l6.1189">   &lt;menupopup id=&quot;emailAddressPopup&quot; position=&quot;after_start&quot; class=&quot;emailAddressPopup&quot;</span>
<a href="#l6.1190"></a><span id="l6.1190">              onpopupshowing=&quot;setupEmailAddressPopup(document.popupNode); goUpdateCommand('cmd_createFilterFromPopup')&quot;</span>
<a href="#l6.1191"></a><span id="l6.1191">              onpopuphiding=&quot;hideEmailNewsPopup(document.popupNode);&quot;&gt;</span>
<a href="#l6.1192"></a><span id="l6.1192">     &lt;menuitem id=&quot;emailAddressPlaceHolder&quot;</span>
<a href="#l6.1193"></a><span id="l6.1193">               disabled=&quot;true&quot;/&gt;</span>
<a href="#l6.1194"></a><span id="l6.1194">     &lt;menuseparator/&gt;</span>
<a href="#l6.1195"></a><span id="l6.1195">     &lt;menuitem id=&quot;addToAddressBookItem&quot;</span>
<a href="#l6.1196"></a><span id="l6.1196">               label=&quot;&amp;AddDirectlyToAddressBook.label;&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/base/content/messageWindow.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/base/content/messageWindow.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -17,23 +17,29 @@</span>
<a href="#l7.4"></a><span id="l7.4"> /* import-globals-from mailWindow.js */</span>
<a href="#l7.5"></a><span id="l7.5"> /* import-globals-from mailWindowOverlay.js */</span>
<a href="#l7.6"></a><span id="l7.6"> /* import-globals-from messageDisplay.js */</span>
<a href="#l7.7"></a><span id="l7.7"> /* import-globals-from msgHdrView.js */</span>
<a href="#l7.8"></a><span id="l7.8"> /* import-globals-from msgViewNavigation.js */</span>
<a href="#l7.9"></a><span id="l7.9"> /* import-globals-from nsDragAndDrop.js */</span>
<a href="#l7.10"></a><span id="l7.10"> /* import-globals-from phishingDetector.js */</span>
<a href="#l7.11"></a><span id="l7.11"> /* import-globals-from toolbarIconColor.js */</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+/* globals PanelUI */</span>
<a href="#l7.13"></a><span id="l7.13"> </span>
<a href="#l7.14"></a><span id="l7.14"> var {Services} = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l7.15"></a><span id="l7.15"> var {MailUtils} = ChromeUtils.import(&quot;resource:///modules/MailUtils.jsm&quot;);</span>
<a href="#l7.16"></a><span id="l7.16"> var {AppConstants} = ChromeUtils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l7.17"></a><span id="l7.17"> var {XPCOMUtils} = ChromeUtils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l7.18"></a><span id="l7.18"> var {MsgHdrSyntheticView} = ChromeUtils.import(&quot;resource:///modules/MsgHdrSyntheticView.jsm&quot;);</span>
<a href="#l7.19"></a><span id="l7.19"> </span>
<a href="#l7.20"></a><span id="l7.20" class="difflineplus">+XPCOMUtils.defineLazyModuleGetters(this, {</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineplus">+  CustomizableUI: &quot;resource:///modules/CustomizableUI.jsm&quot;,</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineplus">+  ShortcutUtils: &quot;resource://gre/modules/ShortcutUtils.jsm&quot;,</span>
<a href="#l7.23"></a><span id="l7.23" class="difflineplus">+});</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineplus">+</span>
<a href="#l7.25"></a><span id="l7.25"> // from MailNewsTypes.h</span>
<a href="#l7.26"></a><span id="l7.26"> var nsMsgKey_None = 0xFFFFFFFF;</span>
<a href="#l7.27"></a><span id="l7.27"> var nsMsgViewIndex_None = 0xFFFFFFFF;</span>
<a href="#l7.28"></a><span id="l7.28"> </span>
<a href="#l7.29"></a><span id="l7.29"> /* globals for a particular window */</span>
<a href="#l7.30"></a><span id="l7.30"> </span>
<a href="#l7.31"></a><span id="l7.31"> // we have no tree view; let people know that.</span>
<a href="#l7.32"></a><span id="l7.32"> var gFolderTreeView = null;</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineat">@@ -250,16 +256,19 @@ StandaloneMessageDisplayWidget.prototype</span>
<a href="#l7.34"></a><span id="l7.34">                              .getAttribute(&quot;titlemodifier&quot;);</span>
<a href="#l7.35"></a><span id="l7.35"> </span>
<a href="#l7.36"></a><span id="l7.36">     document.title = docTitle;</span>
<a href="#l7.37"></a><span id="l7.37"> </span>
<a href="#l7.38"></a><span id="l7.38">     this.isDummy = aMsgHdr.folder == null;</span>
<a href="#l7.39"></a><span id="l7.39">     if (!this.isDummy)</span>
<a href="#l7.40"></a><span id="l7.40">       this.displayedUri = null;</span>
<a href="#l7.41"></a><span id="l7.41"> </span>
<a href="#l7.42"></a><span id="l7.42" class="difflineplus">+    // Initialize the appmenu.</span>
<a href="#l7.43"></a><span id="l7.43" class="difflineplus">+    PanelUI.init();</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineplus">+</span>
<a href="#l7.45"></a><span id="l7.45">     // We've loaded a message, so this should be set to false</span>
<a href="#l7.46"></a><span id="l7.46">     this.aboutToLoadMessage = false;</span>
<a href="#l7.47"></a><span id="l7.47">   },</span>
<a href="#l7.48"></a><span id="l7.48"> </span>
<a href="#l7.49"></a><span id="l7.49">   onSelectedMessagesChanged() {</span>
<a href="#l7.50"></a><span id="l7.50">     // When switching folders, we won't have any selection for a while.</span>
<a href="#l7.51"></a><span id="l7.51">     if (!this.folderDisplay.view.dbView)</span>
<a href="#l7.52"></a><span id="l7.52">       return true;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/base/content/messageWindow.xul</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/base/content/messageWindow.xul</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -9,16 +9,17 @@</span>
<a href="#l8.4"></a><span id="l8.4"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/messageWindow.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l8.5"></a><span id="l8.5"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/editContactPanel.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l8.6"></a><span id="l8.6"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/messageHeader.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l8.7"></a><span id="l8.7"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/folderMenus.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l8.8"></a><span id="l8.8"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/attachmentList.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l8.9"></a><span id="l8.9"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/smime/msgHdrViewSMIMEOverlay.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l8.10"></a><span id="l8.10"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/smime/msgReadSMIMEOverlay.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l8.11"></a><span id="l8.11"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/searchBox.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineplus">+&lt;?xml-stylesheet href=&quot;chrome://messenger/skin/customizableui/panelUI.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l8.13"></a><span id="l8.13"> </span>
<a href="#l8.14"></a><span id="l8.14"> &lt;!DOCTYPE window [</span>
<a href="#l8.15"></a><span id="l8.15"> &lt;!ENTITY % brandDTD SYSTEM &quot;chrome://branding/locale/brand.dtd&quot; &gt;</span>
<a href="#l8.16"></a><span id="l8.16"> %brandDTD;</span>
<a href="#l8.17"></a><span id="l8.17"> &lt;!ENTITY % msgHdrViewOverlayDTD SYSTEM &quot;chrome://messenger/locale/msgHdrViewOverlay.dtd&quot;&gt;</span>
<a href="#l8.18"></a><span id="l8.18"> %msgHdrViewOverlayDTD;</span>
<a href="#l8.19"></a><span id="l8.19"> &lt;!ENTITY % messengerDTD SYSTEM &quot;chrome://messenger/locale/messenger.dtd&quot; &gt;</span>
<a href="#l8.20"></a><span id="l8.20"> %messengerDTD;</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineat">@@ -107,16 +108,18 @@</span>
<a href="#l8.22"></a><span id="l8.22">   &lt;script src=&quot;chrome://messenger-newsblog/content/newsblogOverlay.js&quot;/&gt;</span>
<a href="#l8.23"></a><span id="l8.23">   &lt;script src=&quot;chrome://messenger/content/mail-offline.js&quot;/&gt;</span>
<a href="#l8.24"></a><span id="l8.24">   &lt;script src=&quot;chrome://global/content/printUtils.js&quot;/&gt;</span>
<a href="#l8.25"></a><span id="l8.25">   &lt;script src=&quot;chrome://messenger/content/msgViewPickerOverlay.js&quot;/&gt;</span>
<a href="#l8.26"></a><span id="l8.26">   &lt;script src=&quot;chrome://messenger/content/viewZoomOverlay.js&quot;/&gt;</span>
<a href="#l8.27"></a><span id="l8.27">   &lt;script src=&quot;chrome://communicator/content/utilityOverlay.js&quot;/&gt;</span>
<a href="#l8.28"></a><span id="l8.28">   &lt;script src=&quot;chrome://messenger/content/mailCore.js&quot;/&gt;</span>
<a href="#l8.29"></a><span id="l8.29">   &lt;script src=&quot;chrome://messenger/content/quickFilterBar.js&quot;/&gt;</span>
<a href="#l8.30"></a><span id="l8.30" class="difflineplus">+  &lt;!-- panelUI.js is for the appmenus. --&gt;</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineplus">+  &lt;script src=&quot;chrome://messenger/content/customizableui/panelUI.js&quot;/&gt;</span>
<a href="#l8.32"></a><span id="l8.32"> #ifdef XP_MACOSX</span>
<a href="#l8.33"></a><span id="l8.33">   &lt;script src=&quot;chrome://global/content/macWindowMenu.js&quot;/&gt;</span>
<a href="#l8.34"></a><span id="l8.34"> #endif</span>
<a href="#l8.35"></a><span id="l8.35">   &lt;script src=&quot;chrome://messenger/content/newmailaccount/uriListener.js&quot;/&gt;</span>
<a href="#l8.36"></a><span id="l8.36"> </span>
<a href="#l8.37"></a><span id="l8.37">   &lt;commandset id=&quot;mailCommands&quot;&gt;</span>
<a href="#l8.38"></a><span id="l8.38"> #include mainCommandSet.inc.xul</span>
<a href="#l8.39"></a><span id="l8.39">     &lt;commandset id=&quot;mailSearchMenuItems&quot;/&gt;</span>
<a href="#l8.40"></a><span id="l8.40" class="difflineat">@@ -158,16 +161,20 @@</span>
<a href="#l8.41"></a><span id="l8.41">            modifiers=&quot;accel&quot;/&gt;</span>
<a href="#l8.42"></a><span id="l8.42"> #endif</span>
<a href="#l8.43"></a><span id="l8.43">     &lt;/keyset&gt;</span>
<a href="#l8.44"></a><span id="l8.44">   &lt;/keyset&gt;</span>
<a href="#l8.45"></a><span id="l8.45"> </span>
<a href="#l8.46"></a><span id="l8.46">   &lt;!-- Popup menus provided by mailWindowOverlay.xul --&gt;</span>
<a href="#l8.47"></a><span id="l8.47">   &lt;popupset id=&quot;mainPopupSet&quot;&gt;</span>
<a href="#l8.48"></a><span id="l8.48"> #include mainPopupSet.inc.xul</span>
<a href="#l8.49"></a><span id="l8.49" class="difflineplus">+</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineplus">+&lt;!-- The panelUI is for the appmenu. --&gt;</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineplus">+#include ../../components/customizableui/content/panelUI.inc.xul</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineplus">+</span>
<a href="#l8.53"></a><span id="l8.53"> #include msgHdrPopup.inc.xul</span>
<a href="#l8.54"></a><span id="l8.54">   &lt;/popupset&gt;</span>
<a href="#l8.55"></a><span id="l8.55"> #include editContactPanel.inc.xul</span>
<a href="#l8.56"></a><span id="l8.56"> </span>
<a href="#l8.57"></a><span id="l8.57"> #ifdef XP_MACOSX</span>
<a href="#l8.58"></a><span id="l8.58">   &lt;vbox id=&quot;titlebar&quot;&gt;</span>
<a href="#l8.59"></a><span id="l8.59">     &lt;hbox id=&quot;titlebar-content&quot;&gt;</span>
<a href="#l8.60"></a><span id="l8.60">       &lt;spacer id=&quot;titlebar-spacer&quot; flex=&quot;1&quot;/&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/base/content/messenger.css</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/base/content/messenger.css</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -12,16 +12,18 @@</span>
<a href="#l9.4"></a><span id="l9.4"> :root {</span>
<a href="#l9.5"></a><span id="l9.5">   --lwt-additional-images: none;</span>
<a href="#l9.6"></a><span id="l9.6">   --lwt-background-alignment: right top;</span>
<a href="#l9.7"></a><span id="l9.7">   --lwt-background-tiling: no-repeat;</span>
<a href="#l9.8"></a><span id="l9.8"> </span>
<a href="#l9.9"></a><span id="l9.9">   --toolbar-bgcolor: var(--toolbar-non-lwt-bgcolor);</span>
<a href="#l9.10"></a><span id="l9.10">   --toolbar-bgimage: var(--toolbar-non-lwt-bgimage);</span>
<a href="#l9.11"></a><span id="l9.11">   --toolbar-color: var(--toolbar-non-lwt-textcolor);</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+  --panelui-subview-transition-duration: 150ms;</span>
<a href="#l9.14"></a><span id="l9.14"> }</span>
<a href="#l9.15"></a><span id="l9.15"> </span>
<a href="#l9.16"></a><span id="l9.16"> /* message header widgets */</span>
<a href="#l9.17"></a><span id="l9.17"> .emailDisplayButton {</span>
<a href="#l9.18"></a><span id="l9.18">   -moz-user-focus: normal;</span>
<a href="#l9.19"></a><span id="l9.19"> }</span>
<a href="#l9.20"></a><span id="l9.20"> </span>
<a href="#l9.21"></a><span id="l9.21"> .emailStar {</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineat">@@ -39,20 +41,16 @@ mail-tagfield[collapsed=&quot;true&quot;] {</span>
<a href="#l9.23"></a><span id="l9.23"> #searchTermList &gt; richlistitem {</span>
<a href="#l9.24"></a><span id="l9.24">   -moz-binding: url(&quot;chrome://messenger/content/searchWidgets.xml#filterlistitem&quot;);</span>
<a href="#l9.25"></a><span id="l9.25"> }</span>
<a href="#l9.26"></a><span id="l9.26"> </span>
<a href="#l9.27"></a><span id="l9.27"> search-value {</span>
<a href="#l9.28"></a><span id="l9.28">   display: -moz-deck;</span>
<a href="#l9.29"></a><span id="l9.29"> }</span>
<a href="#l9.30"></a><span id="l9.30"> </span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-searchterm {</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineminus">-  -moz-binding: url(&quot;chrome://messenger/content/mailWidgets.xml#searchterm&quot;);</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineminus">-}</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineminus">-</span>
<a href="#l9.35"></a><span id="l9.35"> .ruleaction {</span>
<a href="#l9.36"></a><span id="l9.36">   -moz-binding: url(&quot;chrome://messenger/content/searchWidgets.xml#ruleaction&quot;);</span>
<a href="#l9.37"></a><span id="l9.37"> }</span>
<a href="#l9.38"></a><span id="l9.38"> </span>
<a href="#l9.39"></a><span id="l9.39"> .ruleactiontype {</span>
<a href="#l9.40"></a><span id="l9.40">   -moz-binding: url(&quot;chrome://messenger/content/searchWidgets.xml#ruleactiontype-menulist&quot;);</span>
<a href="#l9.41"></a><span id="l9.41"> }</span>
<a href="#l9.42"></a><span id="l9.42"> </span>
<a href="#l9.43"></a><span id="l9.43" class="difflineat">@@ -126,39 +124,16 @@ tabmail {</span>
<a href="#l9.44"></a><span id="l9.44"> #status-bar:-moz-lwtheme {</span>
<a href="#l9.45"></a><span id="l9.45">   background-repeat: no-repeat, var(--lwt-background-tiling);</span>
<a href="#l9.46"></a><span id="l9.46">   background-position: bottom right, var(--lwt-background-alignment);</span>
<a href="#l9.47"></a><span id="l9.47">   background-color: var(--lwt-accent-color);</span>
<a href="#l9.48"></a><span id="l9.48">   background-image: var(--lwt-header-image), var(--lwt-additional-images);</span>
<a href="#l9.49"></a><span id="l9.49">   color: var(--lwt-text-color);</span>
<a href="#l9.50"></a><span id="l9.50"> }</span>
<a href="#l9.51"></a><span id="l9.51"> </span>
<a href="#l9.52"></a><span id="l9.52" class="difflineminus">-/* AppButton support */</span>
<a href="#l9.53"></a><span id="l9.53" class="difflineminus">-</span>
<a href="#l9.54"></a><span id="l9.54" class="difflineminus">-splitmenu {</span>
<a href="#l9.55"></a><span id="l9.55" class="difflineminus">-  -moz-binding: url(&quot;chrome://messenger/content/mailWidgets.xml#splitmenu&quot;);</span>
<a href="#l9.56"></a><span id="l9.56" class="difflineminus">-}</span>
<a href="#l9.57"></a><span id="l9.57" class="difflineminus">-</span>
<a href="#l9.58"></a><span id="l9.58" class="difflineminus">-.splitmenu-menuitem {</span>
<a href="#l9.59"></a><span id="l9.59" class="difflineminus">-/*  -moz-binding: url(&quot;chrome://global/content/bindings/menu.xml#menuitem&quot;); */</span>
<a href="#l9.60"></a><span id="l9.60" class="difflineminus">-  list-style-image: inherit;</span>
<a href="#l9.61"></a><span id="l9.61" class="difflineminus">-  -moz-image-region: inherit;</span>
<a href="#l9.62"></a><span id="l9.62" class="difflineminus">-}</span>
<a href="#l9.63"></a><span id="l9.63" class="difflineminus">-/*</span>
<a href="#l9.64"></a><span id="l9.64" class="difflineminus">-.splitmenu-menuitem[iconic=&quot;true&quot;] {</span>
<a href="#l9.65"></a><span id="l9.65" class="difflineminus">-  -moz-binding: url(&quot;chrome://global/content/bindings/menu.xml#menuitem-iconic&quot;);</span>
<a href="#l9.66"></a><span id="l9.66" class="difflineminus">-}</span>
<a href="#l9.67"></a><span id="l9.67" class="difflineminus">-*/</span>
<a href="#l9.68"></a><span id="l9.68" class="difflineminus">-.splitmenu-menu &gt; .menu-text,</span>
<a href="#l9.69"></a><span id="l9.69" class="difflineminus">-:-moz-any(.splitmenu-menu, .splitmenu-menuitem) &gt; .menu-accel-container,</span>
<a href="#l9.70"></a><span id="l9.70" class="difflineminus">-#appmenu-editmenu &gt; .menu-text,</span>
<a href="#l9.71"></a><span id="l9.71" class="difflineminus">-#appmenu-editmenu &gt; .menu-accel-container {</span>
<a href="#l9.72"></a><span id="l9.72" class="difflineminus">-  display: none;</span>
<a href="#l9.73"></a><span id="l9.73" class="difflineminus">-}</span>
<a href="#l9.74"></a><span id="l9.74" class="difflineminus">-</span>
<a href="#l9.75"></a><span id="l9.75"> #titlebar {</span>
<a href="#l9.76"></a><span id="l9.76">   -moz-window-dragging: drag;</span>
<a href="#l9.77"></a><span id="l9.77"> }</span>
<a href="#l9.78"></a><span id="l9.78"> </span>
<a href="#l9.79"></a><span id="l9.79"> #messengerWindow:not([chromemargin]) &gt; #titlebar {</span>
<a href="#l9.80"></a><span id="l9.80">   display: none;</span>
<a href="#l9.81"></a><span id="l9.81"> }</span>
<a href="#l9.82"></a><span id="l9.82"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/base/content/messenger.xul</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/base/content/messenger.xul</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -17,16 +17,17 @@</span>
<a href="#l10.4"></a><span id="l10.4"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/chat.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l10.5"></a><span id="l10.5"> &lt;?xml-stylesheet href=&quot;chrome://chat/skin/imtooltip.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l10.6"></a><span id="l10.6"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/messageHeader.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l10.7"></a><span id="l10.7"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/folderMenus.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l10.8"></a><span id="l10.8"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/attachmentList.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l10.9"></a><span id="l10.9"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/smime/msgHdrViewSMIMEOverlay.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l10.10"></a><span id="l10.10"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/smime/msgReadSMIMEOverlay.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l10.11"></a><span id="l10.11"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/searchBox.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineplus">+&lt;?xml-stylesheet href=&quot;chrome://messenger/skin/customizableui/panelUI.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l10.13"></a><span id="l10.13"> </span>
<a href="#l10.14"></a><span id="l10.14"> &lt;!DOCTYPE window [</span>
<a href="#l10.15"></a><span id="l10.15"> &lt;!ENTITY % brandDTD SYSTEM &quot;chrome://branding/locale/brand.dtd&quot; &gt;</span>
<a href="#l10.16"></a><span id="l10.16"> %brandDTD;</span>
<a href="#l10.17"></a><span id="l10.17"> &lt;!ENTITY % chatDTD SYSTEM &quot;chrome://messenger/locale/chat.dtd&quot;&gt;</span>
<a href="#l10.18"></a><span id="l10.18"> %chatDTD;</span>
<a href="#l10.19"></a><span id="l10.19"> &lt;!ENTITY % msgHdrViewOverlayDTD SYSTEM &quot;chrome://messenger/locale/msgHdrViewOverlay.dtd&quot;&gt;</span>
<a href="#l10.20"></a><span id="l10.20"> %msgHdrViewOverlayDTD;</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineat">@@ -149,16 +150,18 @@</span>
<a href="#l10.22"></a><span id="l10.22"> &lt;script src=&quot;chrome://messenger/content/newmailaccount/uriListener.js&quot;/&gt;</span>
<a href="#l10.23"></a><span id="l10.23"> &lt;script src=&quot;chrome://messenger/content/chat/chat-conversation-info.js&quot;/&gt;</span>
<a href="#l10.24"></a><span id="l10.24"> &lt;script src=&quot;chrome://gloda/content/autocomplete-richlistitem.js&quot;/&gt;</span>
<a href="#l10.25"></a><span id="l10.25"> &lt;script src=&quot;chrome://messenger/content/chat/chat-contact.js&quot;/&gt;</span>
<a href="#l10.26"></a><span id="l10.26"> &lt;script src=&quot;chrome://messenger/content/chat/chat-group.js&quot;/&gt;</span>
<a href="#l10.27"></a><span id="l10.27"> &lt;script src=&quot;chrome://messenger/content/chat/chat-imconv.js&quot;/&gt;</span>
<a href="#l10.28"></a><span id="l10.28"> &lt;script src=&quot;chrome://messenger/content/tabbrowser-tab.js&quot;/&gt;</span>
<a href="#l10.29"></a><span id="l10.29"> &lt;script src=&quot;chrome://messenger/content/chat/toolbarbutton-badge-button.js&quot;/&gt;</span>
<a href="#l10.30"></a><span id="l10.30" class="difflineplus">+&lt;!-- panelUI.js is for the appmenus. --&gt;</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineplus">+&lt;script src=&quot;chrome://messenger/content/customizableui/panelUI.js&quot;/&gt;</span>
<a href="#l10.32"></a><span id="l10.32"> #ifdef XP_MACOSX</span>
<a href="#l10.33"></a><span id="l10.33"> &lt;script src=&quot;chrome://messenger/content/macMessengerMenu.js&quot;/&gt;</span>
<a href="#l10.34"></a><span id="l10.34"> &lt;script src=&quot;chrome://global/content/macWindowMenu.js&quot;/&gt;</span>
<a href="#l10.35"></a><span id="l10.35"> #endif</span>
<a href="#l10.36"></a><span id="l10.36"> </span>
<a href="#l10.37"></a><span id="l10.37"> &lt;!-- move needed functions into a single js file --&gt;</span>
<a href="#l10.38"></a><span id="l10.38"> &lt;script src=&quot;chrome://messenger/content/threadPane.js&quot;/&gt;</span>
<a href="#l10.39"></a><span id="l10.39"> </span>
<a href="#l10.40"></a><span id="l10.40" class="difflineat">@@ -222,16 +225,20 @@</span>
<a href="#l10.41"></a><span id="l10.41">          modifiers=&quot;accel&quot;/&gt;</span>
<a href="#l10.42"></a><span id="l10.42"> #endif</span>
<a href="#l10.43"></a><span id="l10.43">   &lt;/keyset&gt;</span>
<a href="#l10.44"></a><span id="l10.44"> &lt;/keyset&gt;</span>
<a href="#l10.45"></a><span id="l10.45"> </span>
<a href="#l10.46"></a><span id="l10.46"> &lt;!-- Popup menus provided by mailWindowOverlay.xul --&gt;</span>
<a href="#l10.47"></a><span id="l10.47"> &lt;popupset id=&quot;mainPopupSet&quot;&gt;</span>
<a href="#l10.48"></a><span id="l10.48"> #include mainPopupSet.inc.xul</span>
<a href="#l10.49"></a><span id="l10.49" class="difflineplus">+</span>
<a href="#l10.50"></a><span id="l10.50" class="difflineplus">+&lt;!-- The panelUI is for the appmenu. --&gt;</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineplus">+#include ../../components/customizableui/content/panelUI.inc.xul</span>
<a href="#l10.52"></a><span id="l10.52" class="difflineplus">+</span>
<a href="#l10.53"></a><span id="l10.53"> #include msgHdrPopup.inc.xul</span>
<a href="#l10.54"></a><span id="l10.54">   &lt;panel type=&quot;glodacomplete-richlistbox&quot;</span>
<a href="#l10.55"></a><span id="l10.55">          id=&quot;PopupGlodaAutocomplete&quot;</span>
<a href="#l10.56"></a><span id="l10.56">          noautofocus=&quot;true&quot; /&gt;</span>
<a href="#l10.57"></a><span id="l10.57">   &lt;panel type=&quot;autocomplete&quot;</span>
<a href="#l10.58"></a><span id="l10.58">          id=&quot;PopupAutoComplete&quot;</span>
<a href="#l10.59"></a><span id="l10.59">          noautofocus=&quot;true&quot;/&gt;</span>
<a href="#l10.60"></a><span id="l10.60"> </span>
<a href="#l10.61"></a><span id="l10.61" class="difflineat">@@ -806,11 +813,10 @@</span>
<a href="#l10.62"></a><span id="l10.62">       &lt;!-- notificationbox will be added here lazily. --&gt;</span>
<a href="#l10.63"></a><span id="l10.63">   &lt;/hbox&gt;</span>
<a href="#l10.64"></a><span id="l10.64">   &lt;statuspanel id=&quot;statusbar-display&quot;/&gt;</span>
<a href="#l10.65"></a><span id="l10.65">   &lt;hbox id=&quot;status-bar&quot; class=&quot;statusbar chromeclass-status&quot;&gt;</span>
<a href="#l10.66"></a><span id="l10.66"> #include mainStatusbar.inc.xul</span>
<a href="#l10.67"></a><span id="l10.67">     &lt;statusbarpanel id=&quot;unreadMessageCount&quot;/&gt;</span>
<a href="#l10.68"></a><span id="l10.68">     &lt;statusbarpanel id=&quot;totalMessageCount&quot;/&gt;</span>
<a href="#l10.69"></a><span id="l10.69">   &lt;/hbox&gt;</span>
<a href="#l10.70"></a><span id="l10.70" class="difflineminus">-</span>
<a href="#l10.71"></a><span id="l10.71"> &lt;/window&gt;</span>
<a href="#l10.72"></a><span id="l10.72"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/base/content/msgMail3PaneWindow.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/base/content/msgMail3PaneWindow.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -14,16 +14,17 @@</span>
<a href="#l11.4"></a><span id="l11.4"> /* import-globals-from glodaFacetTab.js */</span>
<a href="#l11.5"></a><span id="l11.5"> /* import-globals-from mailTabs.js */</span>
<a href="#l11.6"></a><span id="l11.6"> /* import-globals-from mailWindow.js */</span>
<a href="#l11.7"></a><span id="l11.7"> /* import-globals-from quickFilterBar.js */</span>
<a href="#l11.8"></a><span id="l11.8"> /* import-globals-from searchBar.js */</span>
<a href="#l11.9"></a><span id="l11.9"> /* import-globals-from searchBar.js */</span>
<a href="#l11.10"></a><span id="l11.10"> /* import-globals-from specialTabs.js */</span>
<a href="#l11.11"></a><span id="l11.11"> /* import-globals-from toolbarIconColor.js */</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineplus">+/* globals PanelUI */</span>
<a href="#l11.13"></a><span id="l11.13"> </span>
<a href="#l11.14"></a><span id="l11.14"> ChromeUtils.import(&quot;resource:///modules/activity/activityModules.jsm&quot;);</span>
<a href="#l11.15"></a><span id="l11.15"> var { logException } = ChromeUtils.import(&quot;resource:///modules/errUtils.js&quot;);</span>
<a href="#l11.16"></a><span id="l11.16"> var {IOUtils} = ChromeUtils.import(&quot;resource:///modules/IOUtils.js&quot;);</span>
<a href="#l11.17"></a><span id="l11.17"> var { JSTreeSelection } = ChromeUtils.import(&quot;resource:///modules/jsTreeSelection.js&quot;);</span>
<a href="#l11.18"></a><span id="l11.18"> var {MailConsts} = ChromeUtils.import(&quot;resource:///modules/MailConsts.jsm&quot;);</span>
<a href="#l11.19"></a><span id="l11.19"> var {MailInstrumentation} = ChromeUtils.import(&quot;resource:///modules/MailInstrumentation.jsm&quot;);</span>
<a href="#l11.20"></a><span id="l11.20"> var {migrateMailnews} = ChromeUtils.import(&quot;resource:///modules/mailnewsMigrator.js&quot;);</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineat">@@ -35,16 +36,18 @@ var {Services} = ChromeUtils.import(&quot;res</span>
<a href="#l11.22"></a><span id="l11.22"> var {MailUtils} = ChromeUtils.import(&quot;resource:///modules/MailUtils.jsm&quot;);</span>
<a href="#l11.23"></a><span id="l11.23"> var {AppConstants} = ChromeUtils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l11.24"></a><span id="l11.24"> var {Color} = ChromeUtils.import(&quot;resource://gre/modules/Color.jsm&quot;);</span>
<a href="#l11.25"></a><span id="l11.25"> var {TagUtils} = ChromeUtils.import(&quot;resource:///modules/TagUtils.jsm&quot;);</span>
<a href="#l11.26"></a><span id="l11.26"> var {PeriodicFilterManager} = ChromeUtils.import(&quot;resource:///modules/PeriodicFilterManager.jsm&quot;);</span>
<a href="#l11.27"></a><span id="l11.27"> </span>
<a href="#l11.28"></a><span id="l11.28"> XPCOMUtils.defineLazyModuleGetters(this, {</span>
<a href="#l11.29"></a><span id="l11.29">   LightweightThemeManager: &quot;resource://gre/modules/LightweightThemeManager.jsm&quot;,</span>
<a href="#l11.30"></a><span id="l11.30" class="difflineplus">+  CustomizableUI: &quot;resource:///modules/CustomizableUI.jsm&quot;,</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineplus">+  ShortcutUtils: &quot;resource://gre/modules/ShortcutUtils.jsm&quot;,</span>
<a href="#l11.32"></a><span id="l11.32"> });</span>
<a href="#l11.33"></a><span id="l11.33"> </span>
<a href="#l11.34"></a><span id="l11.34"> XPCOMUtils.defineLazyGetter(this, &quot;PopupNotifications&quot;, function() {</span>
<a href="#l11.35"></a><span id="l11.35">   let {PopupNotifications} = ChromeUtils.import(&quot;resource:///modules/GlobalPopupNotifications.jsm&quot;);</span>
<a href="#l11.36"></a><span id="l11.36">   try {</span>
<a href="#l11.37"></a><span id="l11.37">     // Hide all notifications while the URL is being edited and the address bar</span>
<a href="#l11.38"></a><span id="l11.38">     // has focus, including the virtual focus in the results popup.</span>
<a href="#l11.39"></a><span id="l11.39">     // We also have to hide notifications explicitly when the window is</span>
<a href="#l11.40"></a><span id="l11.40" class="difflineat">@@ -529,16 +532,19 @@ function OnLoadMessenger() {</span>
<a href="#l11.41"></a><span id="l11.41"> </span>
<a href="#l11.42"></a><span id="l11.42">   // Set up the summary frame manager to handle loading pages in the</span>
<a href="#l11.43"></a><span id="l11.43">   // multi-message pane</span>
<a href="#l11.44"></a><span id="l11.44">   gSummaryFrameManager = new SummaryFrameManager(</span>
<a href="#l11.45"></a><span id="l11.45">                          document.getElementById(&quot;multimessage&quot;));</span>
<a href="#l11.46"></a><span id="l11.46"> </span>
<a href="#l11.47"></a><span id="l11.47">   window.addEventListener(&quot;AppCommand&quot;, HandleAppCommandEvent, true);</span>
<a href="#l11.48"></a><span id="l11.48"> </span>
<a href="#l11.49"></a><span id="l11.49" class="difflineplus">+  // Set up the appmenus. (This has to happen after the DOM has loaded.)</span>
<a href="#l11.50"></a><span id="l11.50" class="difflineplus">+  PanelUI.init();</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineplus">+</span>
<a href="#l11.52"></a><span id="l11.52">   // Load the periodic filter timer.</span>
<a href="#l11.53"></a><span id="l11.53">   PeriodicFilterManager.setupFiltering();</span>
<a href="#l11.54"></a><span id="l11.54"> }</span>
<a href="#l11.55"></a><span id="l11.55"> </span>
<a href="#l11.56"></a><span id="l11.56"> function LoadPostAccountWizard() {</span>
<a href="#l11.57"></a><span id="l11.57">   InitMsgWindow();</span>
<a href="#l11.58"></a><span id="l11.58">   messenger.setWindow(window, msgWindow);</span>
<a href="#l11.59"></a><span id="l11.59"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/base/jar.mn</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/base/jar.mn</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -21,17 +21,16 @@ messenger.jar:</span>
<a href="#l12.4"></a><span id="l12.4">     content/messenger/messageWindow.js              (content/messageWindow.js)</span>
<a href="#l12.5"></a><span id="l12.5">     content/messenger/mailContextMenus.js           (content/mailContextMenus.js)</span>
<a href="#l12.6"></a><span id="l12.6">     content/messenger/nsContextMenu.js              (content/nsContextMenu.js)</span>
<a href="#l12.7"></a><span id="l12.7"> *   content/messenger/messenger.xul                 (content/messenger.xul)</span>
<a href="#l12.8"></a><span id="l12.8"> *   content/messenger/hiddenWindow.xul              (content/hiddenWindow.xul)</span>
<a href="#l12.9"></a><span id="l12.9">     content/messenger/hiddenWindow.js               (content/hiddenWindow.js)</span>
<a href="#l12.10"></a><span id="l12.10">     content/messenger/msgHdrView.js                 (content/msgHdrView.js)</span>
<a href="#l12.11"></a><span id="l12.11">     content/messenger/msgViewNavigation.js          (content/msgViewNavigation.js)</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-    content/messenger/mailWidgets.xml               (content/mailWidgets.xml)</span>
<a href="#l12.13"></a><span id="l12.13">     content/messenger/mailWidgets.js                (content/mailWidgets.js)</span>
<a href="#l12.14"></a><span id="l12.14">     content/messenger/button-menu-button.js         (content/button-menu-button.js)</span>
<a href="#l12.15"></a><span id="l12.15">     content/messenger/toolbarbutton-menu-button.js  (content/toolbarbutton-menu-button.js)</span>
<a href="#l12.16"></a><span id="l12.16">     content/messenger/toolbarbutton-appmenu.js      (content/toolbarbutton-appmenu.js)</span>
<a href="#l12.17"></a><span id="l12.17">     content/messenger/customElements.js             (content/customElements.js)</span>
<a href="#l12.18"></a><span id="l12.18">     content/messenger/customizeToolbar.css          (../../common/src/customizeToolbar.css)</span>
<a href="#l12.19"></a><span id="l12.19">     content/messenger/customizeToolbar.js           (../../common/src/customizeToolbar.js)</span>
<a href="#l12.20"></a><span id="l12.20"> *   content/messenger/customizeToolbar.xul          (../../common/src/customizeToolbar.xul)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mail/components/customizableui/CustomizableUI.jsm</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mail/components/customizableui/CustomizableUI.jsm</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -816,16 +816,17 @@ var CustomizableUIInternal = {</span>
<a href="#l13.4"></a><span id="l13.4">         kid.id = aSpecialIDs.shift();</span>
<a href="#l13.5"></a><span id="l13.5">       }</span>
<a href="#l13.6"></a><span id="l13.6">       if (!aSpecialIDs.length) {</span>
<a href="#l13.7"></a><span id="l13.7">         return;</span>
<a href="#l13.8"></a><span id="l13.8">       }</span>
<a href="#l13.9"></a><span id="l13.9">     }</span>
<a href="#l13.10"></a><span id="l13.10">   },</span>
<a href="#l13.11"></a><span id="l13.11"> </span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+  // eslint-disable-next-line complexity</span>
<a href="#l13.13"></a><span id="l13.13">   buildArea(aArea, aPlacements, aAreaNode) {</span>
<a href="#l13.14"></a><span id="l13.14">     let document = aAreaNode.ownerDocument;</span>
<a href="#l13.15"></a><span id="l13.15">     let window = document.defaultView;</span>
<a href="#l13.16"></a><span id="l13.16">     let inPrivateWindow = PrivateBrowsingUtils.isWindowPrivate(window);</span>
<a href="#l13.17"></a><span id="l13.17">     let container = this.getCustomizationTarget(aAreaNode);</span>
<a href="#l13.18"></a><span id="l13.18">     let areaIsPanel = gAreas.get(aArea).get(&quot;type&quot;) == CustomizableUI.TYPE_MENU_PANEL;</span>
<a href="#l13.19"></a><span id="l13.19"> </span>
<a href="#l13.20"></a><span id="l13.20">     if (!container) {</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineat">@@ -4047,16 +4048,17 @@ function WidgetGroupWrapper(aWidget) {</span>
<a href="#l13.22"></a><span id="l13.22">   this.__defineSetter__(&quot;disabled&quot;, function(aValue) {</span>
<a href="#l13.23"></a><span id="l13.23">     aValue = !!aValue;</span>
<a href="#l13.24"></a><span id="l13.24">     aWidget.disabled = aValue;</span>
<a href="#l13.25"></a><span id="l13.25">     for (let [, instance] of aWidget.instances) {</span>
<a href="#l13.26"></a><span id="l13.26">       instance.disabled = aValue;</span>
<a href="#l13.27"></a><span id="l13.27">     }</span>
<a href="#l13.28"></a><span id="l13.28">   });</span>
<a href="#l13.29"></a><span id="l13.29"> </span>
<a href="#l13.30"></a><span id="l13.30" class="difflineplus">+  // eslint-disable-next-line func-names</span>
<a href="#l13.31"></a><span id="l13.31">   this.forWindow = function WidgetGroupWrapper_forWindow(aWindow) {</span>
<a href="#l13.32"></a><span id="l13.32">     let wrapperMap;</span>
<a href="#l13.33"></a><span id="l13.33">     if (!gSingleWrapperCache.has(aWindow)) {</span>
<a href="#l13.34"></a><span id="l13.34">       wrapperMap = new Map();</span>
<a href="#l13.35"></a><span id="l13.35">       gSingleWrapperCache.set(aWindow, wrapperMap);</span>
<a href="#l13.36"></a><span id="l13.36">     } else {</span>
<a href="#l13.37"></a><span id="l13.37">       wrapperMap = gSingleWrapperCache.get(aWindow);</span>
<a href="#l13.38"></a><span id="l13.38">     }</span>
<a href="#l13.39"></a><span id="l13.39" class="difflineat">@@ -4157,16 +4159,17 @@ function WidgetSingleWrapper(aWidget, aN</span>
<a href="#l13.40"></a><span id="l13.40">  */</span>
<a href="#l13.41"></a><span id="l13.41"> // XXXunf Going to need to hook this up to some events to keep it all live.</span>
<a href="#l13.42"></a><span id="l13.42"> function XULWidgetGroupWrapper(aWidgetId) {</span>
<a href="#l13.43"></a><span id="l13.43">   this.isGroup = true;</span>
<a href="#l13.44"></a><span id="l13.44">   this.id = aWidgetId;</span>
<a href="#l13.45"></a><span id="l13.45">   this.type = &quot;custom&quot;;</span>
<a href="#l13.46"></a><span id="l13.46">   this.provider = CustomizableUI.PROVIDER_XUL;</span>
<a href="#l13.47"></a><span id="l13.47"> </span>
<a href="#l13.48"></a><span id="l13.48" class="difflineplus">+  // eslint-disable-next-line func-names</span>
<a href="#l13.49"></a><span id="l13.49">   this.forWindow = function XULWidgetGroupWrapper_forWindow(aWindow) {</span>
<a href="#l13.50"></a><span id="l13.50">     let wrapperMap;</span>
<a href="#l13.51"></a><span id="l13.51">     if (!gSingleWrapperCache.has(aWindow)) {</span>
<a href="#l13.52"></a><span id="l13.52">       wrapperMap = new Map();</span>
<a href="#l13.53"></a><span id="l13.53">       gSingleWrapperCache.set(aWindow, wrapperMap);</span>
<a href="#l13.54"></a><span id="l13.54">     } else {</span>
<a href="#l13.55"></a><span id="l13.55">       wrapperMap = gSingleWrapperCache.get(aWindow);</span>
<a href="#l13.56"></a><span id="l13.56">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mail/components/customizableui/CustomizableWidgets.jsm</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mail/components/customizableui/CustomizableWidgets.jsm</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -7,23 +7,25 @@</span>
<a href="#l14.4"></a><span id="l14.4"> var EXPORTED_SYMBOLS = [&quot;CustomizableWidgets&quot;];</span>
<a href="#l14.5"></a><span id="l14.5"> </span>
<a href="#l14.6"></a><span id="l14.6"> const {CustomizableUI} = ChromeUtils.import(&quot;resource:///modules/CustomizableUI.jsm&quot;);</span>
<a href="#l14.7"></a><span id="l14.7"> const {Services} = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l14.8"></a><span id="l14.8"> const {XPCOMUtils} = ChromeUtils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l14.9"></a><span id="l14.9"> const {AppConstants} = ChromeUtils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l14.10"></a><span id="l14.10"> </span>
<a href="#l14.11"></a><span id="l14.11"> XPCOMUtils.defineLazyModuleGetters(this, {</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-  PanelView: &quot;resource:///modules/PanelMultiView.jsm&quot;,</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+  // TODO appmenu - The usage of these commented-out modules is commented out below.</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineplus">+  // Commenting them out here for eslint compliance.</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineplus">+  // PanelView: &quot;resource:///modules/PanelMultiView.jsm&quot;,</span>
<a href="#l14.16"></a><span id="l14.16">   RecentlyClosedTabsAndWindowsMenuUtils: &quot;resource:///modules/sessionstore/RecentlyClosedTabsAndWindowsMenuUtils.jsm&quot;,</span>
<a href="#l14.17"></a><span id="l14.17">   ShortcutUtils: &quot;resource://gre/modules/ShortcutUtils.jsm&quot;,</span>
<a href="#l14.18"></a><span id="l14.18">   CharsetMenu: &quot;resource://gre/modules/CharsetMenu.jsm&quot;,</span>
<a href="#l14.19"></a><span id="l14.19">   PrivateBrowsingUtils: &quot;resource://gre/modules/PrivateBrowsingUtils.jsm&quot;,</span>
<a href="#l14.20"></a><span id="l14.20" class="difflineminus">-  Sanitizer: &quot;resource:///modules/Sanitizer.jsm&quot;,</span>
<a href="#l14.21"></a><span id="l14.21" class="difflineminus">-  SyncedTabs: &quot;resource://services-sync/SyncedTabs.jsm&quot;,</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineplus">+  // Sanitizer: &quot;resource:///modules/Sanitizer.jsm&quot;,</span>
<a href="#l14.23"></a><span id="l14.23" class="difflineplus">+  // SyncedTabs: &quot;resource://services-sync/SyncedTabs.jsm&quot;,</span>
<a href="#l14.24"></a><span id="l14.24"> });</span>
<a href="#l14.25"></a><span id="l14.25"> </span>
<a href="#l14.26"></a><span id="l14.26"> XPCOMUtils.defineLazyGetter(this, &quot;CharsetBundle&quot;, function() {</span>
<a href="#l14.27"></a><span id="l14.27">   const kCharsetBundle = &quot;chrome://global/locale/charsetMenu.properties&quot;;</span>
<a href="#l14.28"></a><span id="l14.28">   return Services.strings.createBundle(kCharsetBundle);</span>
<a href="#l14.29"></a><span id="l14.29"> });</span>
<a href="#l14.30"></a><span id="l14.30"> </span>
<a href="#l14.31"></a><span id="l14.31"> const kPrefCustomizationDebug = &quot;browser.uiCustomization.debug&quot;;</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineat">@@ -499,247 +501,249 @@ const CustomizableWidgets = [</span>
<a href="#l14.33"></a><span id="l14.33">     id: &quot;email-link-button&quot;,</span>
<a href="#l14.34"></a><span id="l14.34">     tooltiptext: &quot;email-link-button.tooltiptext3&quot;,</span>
<a href="#l14.35"></a><span id="l14.35">     onCommand(aEvent) {</span>
<a href="#l14.36"></a><span id="l14.36">       let win = aEvent.view;</span>
<a href="#l14.37"></a><span id="l14.37">       win.MailIntegration.sendLinkForBrowser(win.gBrowser.selectedBrowser);</span>
<a href="#l14.38"></a><span id="l14.38">     },</span>
<a href="#l14.39"></a><span id="l14.39">   }];</span>
<a href="#l14.40"></a><span id="l14.40"> </span>
<a href="#l14.41"></a><span id="l14.41" class="difflineminus">-if (Services.prefs.getBoolPref(&quot;identity.fxaccounts.enabled&quot;)) {</span>
<a href="#l14.42"></a><span id="l14.42" class="difflineminus">-  CustomizableWidgets.push({</span>
<a href="#l14.43"></a><span id="l14.43" class="difflineminus">-    id: &quot;sync-button&quot;,</span>
<a href="#l14.44"></a><span id="l14.44" class="difflineminus">-    label: &quot;remotetabs-panelmenu.label&quot;,</span>
<a href="#l14.45"></a><span id="l14.45" class="difflineminus">-    tooltiptext: &quot;remotetabs-panelmenu.tooltiptext2&quot;,</span>
<a href="#l14.46"></a><span id="l14.46" class="difflineminus">-    type: &quot;view&quot;,</span>
<a href="#l14.47"></a><span id="l14.47" class="difflineminus">-    viewId: &quot;PanelUI-remotetabs&quot;,</span>
<a href="#l14.48"></a><span id="l14.48" class="difflineminus">-    deckIndices: {</span>
<a href="#l14.49"></a><span id="l14.49" class="difflineminus">-      DECKINDEX_TABS: 0,</span>
<a href="#l14.50"></a><span id="l14.50" class="difflineminus">-      DECKINDEX_TABSDISABLED: 1,</span>
<a href="#l14.51"></a><span id="l14.51" class="difflineminus">-      DECKINDEX_FETCHING: 2,</span>
<a href="#l14.52"></a><span id="l14.52" class="difflineminus">-      DECKINDEX_NOCLIENTS: 3,</span>
<a href="#l14.53"></a><span id="l14.53" class="difflineminus">-    },</span>
<a href="#l14.54"></a><span id="l14.54" class="difflineminus">-    TABS_PER_PAGE: 25,</span>
<a href="#l14.55"></a><span id="l14.55" class="difflineminus">-    NEXT_PAGE_MIN_TABS: 5, // Minimum number of tabs displayed when we click &quot;Show All&quot;</span>
<a href="#l14.56"></a><span id="l14.56" class="difflineminus">-    onViewShowing(aEvent) {</span>
<a href="#l14.57"></a><span id="l14.57" class="difflineminus">-      let doc = aEvent.target.ownerDocument;</span>
<a href="#l14.58"></a><span id="l14.58" class="difflineminus">-      this._tabsList = doc.getElementById(&quot;PanelUI-remotetabs-tabslist&quot;);</span>
<a href="#l14.59"></a><span id="l14.59" class="difflineminus">-      Services.obs.addObserver(this, SyncedTabs.TOPIC_TABS_CHANGED);</span>
<a href="#l14.60"></a><span id="l14.60" class="difflineplus">+// TODO appmenu - This errors when _defineBuiltInWidgets runs in</span>
<a href="#l14.61"></a><span id="l14.61" class="difflineplus">+// CustomizableUI.jsm. (We aren't using Firefox accounts, so no problem.)</span>
<a href="#l14.62"></a><span id="l14.62" class="difflineplus">+// if (Services.prefs.getBoolPref(&quot;identity.fxaccounts.enabled&quot;)) {</span>
<a href="#l14.63"></a><span id="l14.63" class="difflineplus">+//   CustomizableWidgets.push({</span>
<a href="#l14.64"></a><span id="l14.64" class="difflineplus">+//     id: &quot;sync-button&quot;,</span>
<a href="#l14.65"></a><span id="l14.65" class="difflineplus">+//     label: &quot;remotetabs-panelmenu.label&quot;,</span>
<a href="#l14.66"></a><span id="l14.66" class="difflineplus">+//     tooltiptext: &quot;remotetabs-panelmenu.tooltiptext2&quot;,</span>
<a href="#l14.67"></a><span id="l14.67" class="difflineplus">+//     type: &quot;view&quot;,</span>
<a href="#l14.68"></a><span id="l14.68" class="difflineplus">+//     viewId: &quot;PanelUI-remotetabs&quot;,</span>
<a href="#l14.69"></a><span id="l14.69" class="difflineplus">+//     deckIndices: {</span>
<a href="#l14.70"></a><span id="l14.70" class="difflineplus">+//       DECKINDEX_TABS: 0,</span>
<a href="#l14.71"></a><span id="l14.71" class="difflineplus">+//       DECKINDEX_TABSDISABLED: 1,</span>
<a href="#l14.72"></a><span id="l14.72" class="difflineplus">+//       DECKINDEX_FETCHING: 2,</span>
<a href="#l14.73"></a><span id="l14.73" class="difflineplus">+//       DECKINDEX_NOCLIENTS: 3,</span>
<a href="#l14.74"></a><span id="l14.74" class="difflineplus">+//     },</span>
<a href="#l14.75"></a><span id="l14.75" class="difflineplus">+//     TABS_PER_PAGE: 25,</span>
<a href="#l14.76"></a><span id="l14.76" class="difflineplus">+//     NEXT_PAGE_MIN_TABS: 5, // Minimum number of tabs displayed when we click &quot;Show All&quot;</span>
<a href="#l14.77"></a><span id="l14.77" class="difflineplus">+//     onViewShowing(aEvent) {</span>
<a href="#l14.78"></a><span id="l14.78" class="difflineplus">+//       let doc = aEvent.target.ownerDocument;</span>
<a href="#l14.79"></a><span id="l14.79" class="difflineplus">+//       this._tabsList = doc.getElementById(&quot;PanelUI-remotetabs-tabslist&quot;);</span>
<a href="#l14.80"></a><span id="l14.80" class="difflineplus">+//       Services.obs.addObserver(this, SyncedTabs.TOPIC_TABS_CHANGED);</span>
<a href="#l14.81"></a><span id="l14.81"> </span>
<a href="#l14.82"></a><span id="l14.82" class="difflineminus">-      if (SyncedTabs.isConfiguredToSyncTabs) {</span>
<a href="#l14.83"></a><span id="l14.83" class="difflineminus">-        if (SyncedTabs.hasSyncedThisSession) {</span>
<a href="#l14.84"></a><span id="l14.84" class="difflineminus">-          this.setDeckIndex(this.deckIndices.DECKINDEX_TABS);</span>
<a href="#l14.85"></a><span id="l14.85" class="difflineminus">-        } else {</span>
<a href="#l14.86"></a><span id="l14.86" class="difflineminus">-          // Sync hasn't synced tabs yet, so show the &quot;fetching&quot; panel.</span>
<a href="#l14.87"></a><span id="l14.87" class="difflineminus">-          this.setDeckIndex(this.deckIndices.DECKINDEX_FETCHING);</span>
<a href="#l14.88"></a><span id="l14.88" class="difflineminus">-        }</span>
<a href="#l14.89"></a><span id="l14.89" class="difflineminus">-        // force a background sync.</span>
<a href="#l14.90"></a><span id="l14.90" class="difflineminus">-        SyncedTabs.syncTabs().catch(ex =&gt; {</span>
<a href="#l14.91"></a><span id="l14.91" class="difflineminus">-          Cu.reportError(ex);</span>
<a href="#l14.92"></a><span id="l14.92" class="difflineminus">-        });</span>
<a href="#l14.93"></a><span id="l14.93" class="difflineminus">-        // show the current list - it will be updated by our observer.</span>
<a href="#l14.94"></a><span id="l14.94" class="difflineminus">-        this._showTabs();</span>
<a href="#l14.95"></a><span id="l14.95" class="difflineminus">-      } else {</span>
<a href="#l14.96"></a><span id="l14.96" class="difflineminus">-        // not configured to sync tabs, so no point updating the list.</span>
<a href="#l14.97"></a><span id="l14.97" class="difflineminus">-        this.setDeckIndex(this.deckIndices.DECKINDEX_TABSDISABLED);</span>
<a href="#l14.98"></a><span id="l14.98" class="difflineminus">-      }</span>
<a href="#l14.99"></a><span id="l14.99" class="difflineminus">-    },</span>
<a href="#l14.100"></a><span id="l14.100" class="difflineminus">-    onViewHiding() {</span>
<a href="#l14.101"></a><span id="l14.101" class="difflineminus">-      Services.obs.removeObserver(this, SyncedTabs.TOPIC_TABS_CHANGED);</span>
<a href="#l14.102"></a><span id="l14.102" class="difflineminus">-      this._tabsList = null;</span>
<a href="#l14.103"></a><span id="l14.103" class="difflineminus">-    },</span>
<a href="#l14.104"></a><span id="l14.104" class="difflineminus">-    _tabsList: null,</span>
<a href="#l14.105"></a><span id="l14.105" class="difflineminus">-    observe(subject, topic, data) {</span>
<a href="#l14.106"></a><span id="l14.106" class="difflineminus">-      switch (topic) {</span>
<a href="#l14.107"></a><span id="l14.107" class="difflineminus">-        case SyncedTabs.TOPIC_TABS_CHANGED:</span>
<a href="#l14.108"></a><span id="l14.108" class="difflineminus">-          this._showTabs();</span>
<a href="#l14.109"></a><span id="l14.109" class="difflineminus">-          break;</span>
<a href="#l14.110"></a><span id="l14.110" class="difflineminus">-        default:</span>
<a href="#l14.111"></a><span id="l14.111" class="difflineminus">-          break;</span>
<a href="#l14.112"></a><span id="l14.112" class="difflineminus">-      }</span>
<a href="#l14.113"></a><span id="l14.113" class="difflineminus">-    },</span>
<a href="#l14.114"></a><span id="l14.114" class="difflineminus">-    setDeckIndex(index) {</span>
<a href="#l14.115"></a><span id="l14.115" class="difflineminus">-      let deck = this._tabsList.ownerDocument.getElementById(&quot;PanelUI-remotetabs-deck&quot;);</span>
<a href="#l14.116"></a><span id="l14.116" class="difflineminus">-      // We call setAttribute instead of relying on the XBL property setter due</span>
<a href="#l14.117"></a><span id="l14.117" class="difflineminus">-      // to things going wrong when we try and set the index before the XBL</span>
<a href="#l14.118"></a><span id="l14.118" class="difflineminus">-      // binding has been created - see bug 1241851 for the gory details.</span>
<a href="#l14.119"></a><span id="l14.119" class="difflineminus">-      deck.setAttribute(&quot;selectedIndex&quot;, index);</span>
<a href="#l14.120"></a><span id="l14.120" class="difflineminus">-    },</span>
<a href="#l14.121"></a><span id="l14.121" class="difflineplus">+//       if (SyncedTabs.isConfiguredToSyncTabs) {</span>
<a href="#l14.122"></a><span id="l14.122" class="difflineplus">+//         if (SyncedTabs.hasSyncedThisSession) {</span>
<a href="#l14.123"></a><span id="l14.123" class="difflineplus">+//           this.setDeckIndex(this.deckIndices.DECKINDEX_TABS);</span>
<a href="#l14.124"></a><span id="l14.124" class="difflineplus">+//         } else {</span>
<a href="#l14.125"></a><span id="l14.125" class="difflineplus">+//           // Sync hasn't synced tabs yet, so show the &quot;fetching&quot; panel.</span>
<a href="#l14.126"></a><span id="l14.126" class="difflineplus">+//           this.setDeckIndex(this.deckIndices.DECKINDEX_FETCHING);</span>
<a href="#l14.127"></a><span id="l14.127" class="difflineplus">+//         }</span>
<a href="#l14.128"></a><span id="l14.128" class="difflineplus">+//         // force a background sync.</span>
<a href="#l14.129"></a><span id="l14.129" class="difflineplus">+//         SyncedTabs.syncTabs().catch(ex =&gt; {</span>
<a href="#l14.130"></a><span id="l14.130" class="difflineplus">+//           Cu.reportError(ex);</span>
<a href="#l14.131"></a><span id="l14.131" class="difflineplus">+//         });</span>
<a href="#l14.132"></a><span id="l14.132" class="difflineplus">+//         // show the current list - it will be updated by our observer.</span>
<a href="#l14.133"></a><span id="l14.133" class="difflineplus">+//         this._showTabs();</span>
<a href="#l14.134"></a><span id="l14.134" class="difflineplus">+//       } else {</span>
<a href="#l14.135"></a><span id="l14.135" class="difflineplus">+//         // not configured to sync tabs, so no point updating the list.</span>
<a href="#l14.136"></a><span id="l14.136" class="difflineplus">+//         this.setDeckIndex(this.deckIndices.DECKINDEX_TABSDISABLED);</span>
<a href="#l14.137"></a><span id="l14.137" class="difflineplus">+//       }</span>
<a href="#l14.138"></a><span id="l14.138" class="difflineplus">+//     },</span>
<a href="#l14.139"></a><span id="l14.139" class="difflineplus">+//     onViewHiding() {</span>
<a href="#l14.140"></a><span id="l14.140" class="difflineplus">+//       Services.obs.removeObserver(this, SyncedTabs.TOPIC_TABS_CHANGED);</span>
<a href="#l14.141"></a><span id="l14.141" class="difflineplus">+//       this._tabsList = null;</span>
<a href="#l14.142"></a><span id="l14.142" class="difflineplus">+//     },</span>
<a href="#l14.143"></a><span id="l14.143" class="difflineplus">+//     _tabsList: null,</span>
<a href="#l14.144"></a><span id="l14.144" class="difflineplus">+//     observe(subject, topic, data) {</span>
<a href="#l14.145"></a><span id="l14.145" class="difflineplus">+//       switch (topic) {</span>
<a href="#l14.146"></a><span id="l14.146" class="difflineplus">+//         case SyncedTabs.TOPIC_TABS_CHANGED:</span>
<a href="#l14.147"></a><span id="l14.147" class="difflineplus">+//           this._showTabs();</span>
<a href="#l14.148"></a><span id="l14.148" class="difflineplus">+//           break;</span>
<a href="#l14.149"></a><span id="l14.149" class="difflineplus">+//         default:</span>
<a href="#l14.150"></a><span id="l14.150" class="difflineplus">+//           break;</span>
<a href="#l14.151"></a><span id="l14.151" class="difflineplus">+//       }</span>
<a href="#l14.152"></a><span id="l14.152" class="difflineplus">+//     },</span>
<a href="#l14.153"></a><span id="l14.153" class="difflineplus">+//     setDeckIndex(index) {</span>
<a href="#l14.154"></a><span id="l14.154" class="difflineplus">+//       let deck = this._tabsList.ownerDocument.getElementById(&quot;PanelUI-remotetabs-deck&quot;);</span>
<a href="#l14.155"></a><span id="l14.155" class="difflineplus">+//       // We call setAttribute instead of relying on the XBL property setter due</span>
<a href="#l14.156"></a><span id="l14.156" class="difflineplus">+//       // to things going wrong when we try and set the index before the XBL</span>
<a href="#l14.157"></a><span id="l14.157" class="difflineplus">+//       // binding has been created - see bug 1241851 for the gory details.</span>
<a href="#l14.158"></a><span id="l14.158" class="difflineplus">+//       deck.setAttribute(&quot;selectedIndex&quot;, index);</span>
<a href="#l14.159"></a><span id="l14.159" class="difflineplus">+//     },</span>
<a href="#l14.160"></a><span id="l14.160"> </span>
<a href="#l14.161"></a><span id="l14.161" class="difflineminus">-    _showTabsPromise: Promise.resolve(),</span>
<a href="#l14.162"></a><span id="l14.162" class="difflineminus">-    // Update the tab list after any existing in-flight updates are complete.</span>
<a href="#l14.163"></a><span id="l14.163" class="difflineminus">-    _showTabs(paginationInfo) {</span>
<a href="#l14.164"></a><span id="l14.164" class="difflineminus">-      this._showTabsPromise = this._showTabsPromise.then(() =&gt; {</span>
<a href="#l14.165"></a><span id="l14.165" class="difflineminus">-        return this.__showTabs(paginationInfo);</span>
<a href="#l14.166"></a><span id="l14.166" class="difflineminus">-      }, e =&gt; {</span>
<a href="#l14.167"></a><span id="l14.167" class="difflineminus">-        Cu.reportError(e);</span>
<a href="#l14.168"></a><span id="l14.168" class="difflineminus">-      });</span>
<a href="#l14.169"></a><span id="l14.169" class="difflineminus">-    },</span>
<a href="#l14.170"></a><span id="l14.170" class="difflineminus">-    // Return a new promise to update the tab list.</span>
<a href="#l14.171"></a><span id="l14.171" class="difflineminus">-    __showTabs(paginationInfo) {</span>
<a href="#l14.172"></a><span id="l14.172" class="difflineminus">-      if (!this._tabsList) {</span>
<a href="#l14.173"></a><span id="l14.173" class="difflineminus">-        // Closed between the previous `this._showTabsPromise`</span>
<a href="#l14.174"></a><span id="l14.174" class="difflineminus">-        // resolving and now.</span>
<a href="#l14.175"></a><span id="l14.175" class="difflineminus">-        return undefined;</span>
<a href="#l14.176"></a><span id="l14.176" class="difflineminus">-      }</span>
<a href="#l14.177"></a><span id="l14.177" class="difflineminus">-      let doc = this._tabsList.ownerDocument;</span>
<a href="#l14.178"></a><span id="l14.178" class="difflineminus">-      return SyncedTabs.getTabClients().then(clients =&gt; {</span>
<a href="#l14.179"></a><span id="l14.179" class="difflineminus">-        // The view may have been hidden while the promise was resolving.</span>
<a href="#l14.180"></a><span id="l14.180" class="difflineminus">-        if (!this._tabsList) {</span>
<a href="#l14.181"></a><span id="l14.181" class="difflineminus">-          return;</span>
<a href="#l14.182"></a><span id="l14.182" class="difflineminus">-        }</span>
<a href="#l14.183"></a><span id="l14.183" class="difflineminus">-        if (clients.length === 0 &amp;&amp; !SyncedTabs.hasSyncedThisSession) {</span>
<a href="#l14.184"></a><span id="l14.184" class="difflineminus">-          // the &quot;fetching tabs&quot; deck is being shown - let's leave it there.</span>
<a href="#l14.185"></a><span id="l14.185" class="difflineminus">-          // When that first sync completes we'll be notified and update.</span>
<a href="#l14.186"></a><span id="l14.186" class="difflineminus">-          return;</span>
<a href="#l14.187"></a><span id="l14.187" class="difflineminus">-        }</span>
<a href="#l14.188"></a><span id="l14.188" class="difflineplus">+//     _showTabsPromise: Promise.resolve(),</span>
<a href="#l14.189"></a><span id="l14.189" class="difflineplus">+//     // Update the tab list after any existing in-flight updates are complete.</span>
<a href="#l14.190"></a><span id="l14.190" class="difflineplus">+//     _showTabs(paginationInfo) {</span>
<a href="#l14.191"></a><span id="l14.191" class="difflineplus">+//       this._showTabsPromise = this._showTabsPromise.then(() =&gt; {</span>
<a href="#l14.192"></a><span id="l14.192" class="difflineplus">+//         return this.__showTabs(paginationInfo);</span>
<a href="#l14.193"></a><span id="l14.193" class="difflineplus">+//       }, e =&gt; {</span>
<a href="#l14.194"></a><span id="l14.194" class="difflineplus">+//         Cu.reportError(e);</span>
<a href="#l14.195"></a><span id="l14.195" class="difflineplus">+//       });</span>
<a href="#l14.196"></a><span id="l14.196" class="difflineplus">+//     },</span>
<a href="#l14.197"></a><span id="l14.197" class="difflineplus">+//     // Return a new promise to update the tab list.</span>
<a href="#l14.198"></a><span id="l14.198" class="difflineplus">+//     __showTabs(paginationInfo) {</span>
<a href="#l14.199"></a><span id="l14.199" class="difflineplus">+//       if (!this._tabsList) {</span>
<a href="#l14.200"></a><span id="l14.200" class="difflineplus">+//         // Closed between the previous `this._showTabsPromise`</span>
<a href="#l14.201"></a><span id="l14.201" class="difflineplus">+//         // resolving and now.</span>
<a href="#l14.202"></a><span id="l14.202" class="difflineplus">+//         return undefined;</span>
<a href="#l14.203"></a><span id="l14.203" class="difflineplus">+//       }</span>
<a href="#l14.204"></a><span id="l14.204" class="difflineplus">+//       let doc = this._tabsList.ownerDocument;</span>
<a href="#l14.205"></a><span id="l14.205" class="difflineplus">+//       return SyncedTabs.getTabClients().then(clients =&gt; {</span>
<a href="#l14.206"></a><span id="l14.206" class="difflineplus">+//         // The view may have been hidden while the promise was resolving.</span>
<a href="#l14.207"></a><span id="l14.207" class="difflineplus">+//         if (!this._tabsList) {</span>
<a href="#l14.208"></a><span id="l14.208" class="difflineplus">+//           return;</span>
<a href="#l14.209"></a><span id="l14.209" class="difflineplus">+//         }</span>
<a href="#l14.210"></a><span id="l14.210" class="difflineplus">+//         if (clients.length === 0 &amp;&amp; !SyncedTabs.hasSyncedThisSession) {</span>
<a href="#l14.211"></a><span id="l14.211" class="difflineplus">+//           // the &quot;fetching tabs&quot; deck is being shown - let's leave it there.</span>
<a href="#l14.212"></a><span id="l14.212" class="difflineplus">+//           // When that first sync completes we'll be notified and update.</span>
<a href="#l14.213"></a><span id="l14.213" class="difflineplus">+//           return;</span>
<a href="#l14.214"></a><span id="l14.214" class="difflineplus">+//         }</span>
<a href="#l14.215"></a><span id="l14.215"> </span>
<a href="#l14.216"></a><span id="l14.216" class="difflineminus">-        if (clients.length === 0) {</span>
<a href="#l14.217"></a><span id="l14.217" class="difflineminus">-          this.setDeckIndex(this.deckIndices.DECKINDEX_NOCLIENTS);</span>
<a href="#l14.218"></a><span id="l14.218" class="difflineminus">-          return;</span>
<a href="#l14.219"></a><span id="l14.219" class="difflineminus">-        }</span>
<a href="#l14.220"></a><span id="l14.220" class="difflineplus">+//         if (clients.length === 0) {</span>
<a href="#l14.221"></a><span id="l14.221" class="difflineplus">+//           this.setDeckIndex(this.deckIndices.DECKINDEX_NOCLIENTS);</span>
<a href="#l14.222"></a><span id="l14.222" class="difflineplus">+//           return;</span>
<a href="#l14.223"></a><span id="l14.223" class="difflineplus">+//         }</span>
<a href="#l14.224"></a><span id="l14.224"> </span>
<a href="#l14.225"></a><span id="l14.225" class="difflineminus">-        this.setDeckIndex(this.deckIndices.DECKINDEX_TABS);</span>
<a href="#l14.226"></a><span id="l14.226" class="difflineminus">-        this._clearTabList();</span>
<a href="#l14.227"></a><span id="l14.227" class="difflineminus">-        SyncedTabs.sortTabClientsByLastUsed(clients);</span>
<a href="#l14.228"></a><span id="l14.228" class="difflineminus">-        let fragment = doc.createDocumentFragment();</span>
<a href="#l14.229"></a><span id="l14.229" class="difflineplus">+//         this.setDeckIndex(this.deckIndices.DECKINDEX_TABS);</span>
<a href="#l14.230"></a><span id="l14.230" class="difflineplus">+//         this._clearTabList();</span>
<a href="#l14.231"></a><span id="l14.231" class="difflineplus">+//         SyncedTabs.sortTabClientsByLastUsed(clients);</span>
<a href="#l14.232"></a><span id="l14.232" class="difflineplus">+//         let fragment = doc.createDocumentFragment();</span>
<a href="#l14.233"></a><span id="l14.233"> </span>
<a href="#l14.234"></a><span id="l14.234" class="difflineminus">-        for (let client of clients) {</span>
<a href="#l14.235"></a><span id="l14.235" class="difflineminus">-          // add a menu separator for all clients other than the first.</span>
<a href="#l14.236"></a><span id="l14.236" class="difflineminus">-          if (fragment.lastElementChild) {</span>
<a href="#l14.237"></a><span id="l14.237" class="difflineminus">-            let separator = doc.createXULElement(&quot;menuseparator&quot;);</span>
<a href="#l14.238"></a><span id="l14.238" class="difflineminus">-            fragment.appendChild(separator);</span>
<a href="#l14.239"></a><span id="l14.239" class="difflineminus">-          }</span>
<a href="#l14.240"></a><span id="l14.240" class="difflineminus">-          if (paginationInfo &amp;&amp; paginationInfo.clientId == client.id) {</span>
<a href="#l14.241"></a><span id="l14.241" class="difflineminus">-            this._appendClient(client, fragment, paginationInfo.maxTabs);</span>
<a href="#l14.242"></a><span id="l14.242" class="difflineminus">-          } else {</span>
<a href="#l14.243"></a><span id="l14.243" class="difflineminus">-            this._appendClient(client, fragment);</span>
<a href="#l14.244"></a><span id="l14.244" class="difflineminus">-          }</span>
<a href="#l14.245"></a><span id="l14.245" class="difflineminus">-        }</span>
<a href="#l14.246"></a><span id="l14.246" class="difflineminus">-        this._tabsList.appendChild(fragment);</span>
<a href="#l14.247"></a><span id="l14.247" class="difflineminus">-        PanelView.forNode(this._tabsList.closest(&quot;panelview&quot;))</span>
<a href="#l14.248"></a><span id="l14.248" class="difflineminus">-                 .descriptionHeightWorkaround();</span>
<a href="#l14.249"></a><span id="l14.249" class="difflineminus">-      }).catch(err =&gt; {</span>
<a href="#l14.250"></a><span id="l14.250" class="difflineminus">-        Cu.reportError(err);</span>
<a href="#l14.251"></a><span id="l14.251" class="difflineminus">-      }).then(() =&gt; {</span>
<a href="#l14.252"></a><span id="l14.252" class="difflineminus">-        // an observer for tests.</span>
<a href="#l14.253"></a><span id="l14.253" class="difflineminus">-        Services.obs.notifyObservers(null, &quot;synced-tabs-menu:test:tabs-updated&quot;);</span>
<a href="#l14.254"></a><span id="l14.254" class="difflineminus">-      });</span>
<a href="#l14.255"></a><span id="l14.255" class="difflineminus">-    },</span>
<a href="#l14.256"></a><span id="l14.256" class="difflineminus">-    _clearTabList() {</span>
<a href="#l14.257"></a><span id="l14.257" class="difflineminus">-      let list = this._tabsList;</span>
<a href="#l14.258"></a><span id="l14.258" class="difflineminus">-      while (list.lastChild) {</span>
<a href="#l14.259"></a><span id="l14.259" class="difflineminus">-        list.lastChild.remove();</span>
<a href="#l14.260"></a><span id="l14.260" class="difflineminus">-      }</span>
<a href="#l14.261"></a><span id="l14.261" class="difflineminus">-    },</span>
<a href="#l14.262"></a><span id="l14.262" class="difflineminus">-    _showNoClientMessage() {</span>
<a href="#l14.263"></a><span id="l14.263" class="difflineminus">-      this._appendMessageLabel(&quot;notabslabel&quot;);</span>
<a href="#l14.264"></a><span id="l14.264" class="difflineminus">-    },</span>
<a href="#l14.265"></a><span id="l14.265" class="difflineminus">-    _appendMessageLabel(messageAttr, appendTo = null) {</span>
<a href="#l14.266"></a><span id="l14.266" class="difflineminus">-      if (!appendTo) {</span>
<a href="#l14.267"></a><span id="l14.267" class="difflineminus">-        appendTo = this._tabsList;</span>
<a href="#l14.268"></a><span id="l14.268" class="difflineminus">-      }</span>
<a href="#l14.269"></a><span id="l14.269" class="difflineminus">-      let message = this._tabsList.getAttribute(messageAttr);</span>
<a href="#l14.270"></a><span id="l14.270" class="difflineminus">-      let doc = this._tabsList.ownerDocument;</span>
<a href="#l14.271"></a><span id="l14.271" class="difflineminus">-      let messageLabel = doc.createXULElement(&quot;label&quot;);</span>
<a href="#l14.272"></a><span id="l14.272" class="difflineminus">-      messageLabel.textContent = message;</span>
<a href="#l14.273"></a><span id="l14.273" class="difflineminus">-      appendTo.appendChild(messageLabel);</span>
<a href="#l14.274"></a><span id="l14.274" class="difflineminus">-      return messageLabel;</span>
<a href="#l14.275"></a><span id="l14.275" class="difflineminus">-    },</span>
<a href="#l14.276"></a><span id="l14.276" class="difflineminus">-    _appendClient(client, attachFragment, maxTabs = this.TABS_PER_PAGE) {</span>
<a href="#l14.277"></a><span id="l14.277" class="difflineminus">-      let doc = attachFragment.ownerDocument;</span>
<a href="#l14.278"></a><span id="l14.278" class="difflineminus">-      // Create the element for the remote client.</span>
<a href="#l14.279"></a><span id="l14.279" class="difflineminus">-      let clientItem = doc.createXULElement(&quot;label&quot;);</span>
<a href="#l14.280"></a><span id="l14.280" class="difflineminus">-      clientItem.setAttribute(&quot;itemtype&quot;, &quot;client&quot;);</span>
<a href="#l14.281"></a><span id="l14.281" class="difflineminus">-      let window = doc.defaultView;</span>
<a href="#l14.282"></a><span id="l14.282" class="difflineminus">-      clientItem.setAttribute(&quot;tooltiptext&quot;,</span>
<a href="#l14.283"></a><span id="l14.283" class="difflineminus">-        window.gSync.formatLastSyncDate(new Date(client.lastModified)));</span>
<a href="#l14.284"></a><span id="l14.284" class="difflineminus">-      clientItem.textContent = client.name;</span>
<a href="#l14.285"></a><span id="l14.285" class="difflineplus">+//         for (let client of clients) {</span>
<a href="#l14.286"></a><span id="l14.286" class="difflineplus">+//           // add a menu separator for all clients other than the first.</span>
<a href="#l14.287"></a><span id="l14.287" class="difflineplus">+//           if (fragment.lastElementChild) {</span>
<a href="#l14.288"></a><span id="l14.288" class="difflineplus">+//             let separator = doc.createXULElement(&quot;menuseparator&quot;);</span>
<a href="#l14.289"></a><span id="l14.289" class="difflineplus">+//             fragment.appendChild(separator);</span>
<a href="#l14.290"></a><span id="l14.290" class="difflineplus">+//           }</span>
<a href="#l14.291"></a><span id="l14.291" class="difflineplus">+//           if (paginationInfo &amp;&amp; paginationInfo.clientId == client.id) {</span>
<a href="#l14.292"></a><span id="l14.292" class="difflineplus">+//             this._appendClient(client, fragment, paginationInfo.maxTabs);</span>
<a href="#l14.293"></a><span id="l14.293" class="difflineplus">+//           } else {</span>
<a href="#l14.294"></a><span id="l14.294" class="difflineplus">+//             this._appendClient(client, fragment);</span>
<a href="#l14.295"></a><span id="l14.295" class="difflineplus">+//           }</span>
<a href="#l14.296"></a><span id="l14.296" class="difflineplus">+//         }</span>
<a href="#l14.297"></a><span id="l14.297" class="difflineplus">+//         this._tabsList.appendChild(fragment);</span>
<a href="#l14.298"></a><span id="l14.298" class="difflineplus">+//         PanelView.forNode(this._tabsList.closest(&quot;panelview&quot;))</span>
<a href="#l14.299"></a><span id="l14.299" class="difflineplus">+//                  .descriptionHeightWorkaround();</span>
<a href="#l14.300"></a><span id="l14.300" class="difflineplus">+//       }).catch(err =&gt; {</span>
<a href="#l14.301"></a><span id="l14.301" class="difflineplus">+//         Cu.reportError(err);</span>
<a href="#l14.302"></a><span id="l14.302" class="difflineplus">+//       }).then(() =&gt; {</span>
<a href="#l14.303"></a><span id="l14.303" class="difflineplus">+//         // an observer for tests.</span>
<a href="#l14.304"></a><span id="l14.304" class="difflineplus">+//         Services.obs.notifyObservers(null, &quot;synced-tabs-menu:test:tabs-updated&quot;);</span>
<a href="#l14.305"></a><span id="l14.305" class="difflineplus">+//       });</span>
<a href="#l14.306"></a><span id="l14.306" class="difflineplus">+//     },</span>
<a href="#l14.307"></a><span id="l14.307" class="difflineplus">+//     _clearTabList() {</span>
<a href="#l14.308"></a><span id="l14.308" class="difflineplus">+//       let list = this._tabsList;</span>
<a href="#l14.309"></a><span id="l14.309" class="difflineplus">+//       while (list.lastChild) {</span>
<a href="#l14.310"></a><span id="l14.310" class="difflineplus">+//         list.lastChild.remove();</span>
<a href="#l14.311"></a><span id="l14.311" class="difflineplus">+//       }</span>
<a href="#l14.312"></a><span id="l14.312" class="difflineplus">+//     },</span>
<a href="#l14.313"></a><span id="l14.313" class="difflineplus">+//     _showNoClientMessage() {</span>
<a href="#l14.314"></a><span id="l14.314" class="difflineplus">+//       this._appendMessageLabel(&quot;notabslabel&quot;);</span>
<a href="#l14.315"></a><span id="l14.315" class="difflineplus">+//     },</span>
<a href="#l14.316"></a><span id="l14.316" class="difflineplus">+//     _appendMessageLabel(messageAttr, appendTo = null) {</span>
<a href="#l14.317"></a><span id="l14.317" class="difflineplus">+//       if (!appendTo) {</span>
<a href="#l14.318"></a><span id="l14.318" class="difflineplus">+//         appendTo = this._tabsList;</span>
<a href="#l14.319"></a><span id="l14.319" class="difflineplus">+//       }</span>
<a href="#l14.320"></a><span id="l14.320" class="difflineplus">+//       let message = this._tabsList.getAttribute(messageAttr);</span>
<a href="#l14.321"></a><span id="l14.321" class="difflineplus">+//       let doc = this._tabsList.ownerDocument;</span>
<a href="#l14.322"></a><span id="l14.322" class="difflineplus">+//       let messageLabel = doc.createXULElement(&quot;label&quot;);</span>
<a href="#l14.323"></a><span id="l14.323" class="difflineplus">+//       messageLabel.textContent = message;</span>
<a href="#l14.324"></a><span id="l14.324" class="difflineplus">+//       appendTo.appendChild(messageLabel);</span>
<a href="#l14.325"></a><span id="l14.325" class="difflineplus">+//       return messageLabel;</span>
<a href="#l14.326"></a><span id="l14.326" class="difflineplus">+//     },</span>
<a href="#l14.327"></a><span id="l14.327" class="difflineplus">+//     _appendClient(client, attachFragment, maxTabs = this.TABS_PER_PAGE) {</span>
<a href="#l14.328"></a><span id="l14.328" class="difflineplus">+//       let doc = attachFragment.ownerDocument;</span>
<a href="#l14.329"></a><span id="l14.329" class="difflineplus">+//       // Create the element for the remote client.</span>
<a href="#l14.330"></a><span id="l14.330" class="difflineplus">+//       let clientItem = doc.createXULElement(&quot;label&quot;);</span>
<a href="#l14.331"></a><span id="l14.331" class="difflineplus">+//       clientItem.setAttribute(&quot;itemtype&quot;, &quot;client&quot;);</span>
<a href="#l14.332"></a><span id="l14.332" class="difflineplus">+//       let window = doc.defaultView;</span>
<a href="#l14.333"></a><span id="l14.333" class="difflineplus">+//       clientItem.setAttribute(&quot;tooltiptext&quot;,</span>
<a href="#l14.334"></a><span id="l14.334" class="difflineplus">+//         window.gSync.formatLastSyncDate(new Date(client.lastModified)));</span>
<a href="#l14.335"></a><span id="l14.335" class="difflineplus">+//       clientItem.textContent = client.name;</span>
<a href="#l14.336"></a><span id="l14.336"> </span>
<a href="#l14.337"></a><span id="l14.337" class="difflineminus">-      attachFragment.appendChild(clientItem);</span>
<a href="#l14.338"></a><span id="l14.338" class="difflineplus">+//       attachFragment.appendChild(clientItem);</span>
<a href="#l14.339"></a><span id="l14.339"> </span>
<a href="#l14.340"></a><span id="l14.340" class="difflineminus">-      if (client.tabs.length == 0) {</span>
<a href="#l14.341"></a><span id="l14.341" class="difflineminus">-        let label = this._appendMessageLabel(&quot;notabsforclientlabel&quot;, attachFragment);</span>
<a href="#l14.342"></a><span id="l14.342" class="difflineminus">-        label.setAttribute(&quot;class&quot;, &quot;PanelUI-remotetabs-notabsforclient-label&quot;);</span>
<a href="#l14.343"></a><span id="l14.343" class="difflineminus">-      } else {</span>
<a href="#l14.344"></a><span id="l14.344" class="difflineminus">-        // If this page will display all tabs, show no additional buttons.</span>
<a href="#l14.345"></a><span id="l14.345" class="difflineminus">-        // If the next page will display all the remaining tabs, show a &quot;Show All&quot; button</span>
<a href="#l14.346"></a><span id="l14.346" class="difflineminus">-        // Otherwise, show a &quot;Shore More&quot; button</span>
<a href="#l14.347"></a><span id="l14.347" class="difflineminus">-        let hasNextPage = client.tabs.length &gt; maxTabs;</span>
<a href="#l14.348"></a><span id="l14.348" class="difflineminus">-        let nextPageIsLastPage = hasNextPage &amp;&amp; maxTabs + this.TABS_PER_PAGE &gt;= client.tabs.length;</span>
<a href="#l14.349"></a><span id="l14.349" class="difflineminus">-        if (nextPageIsLastPage) {</span>
<a href="#l14.350"></a><span id="l14.350" class="difflineminus">-          // When the user clicks &quot;Show All&quot;, try to have at least NEXT_PAGE_MIN_TABS more tabs</span>
<a href="#l14.351"></a><span id="l14.351" class="difflineminus">-          // to display in order to avoid user frustration</span>
<a href="#l14.352"></a><span id="l14.352" class="difflineminus">-          maxTabs = Math.min(client.tabs.length - this.NEXT_PAGE_MIN_TABS, maxTabs);</span>
<a href="#l14.353"></a><span id="l14.353" class="difflineminus">-        }</span>
<a href="#l14.354"></a><span id="l14.354" class="difflineminus">-        if (hasNextPage) {</span>
<a href="#l14.355"></a><span id="l14.355" class="difflineminus">-          client.tabs = client.tabs.slice(0, maxTabs);</span>
<a href="#l14.356"></a><span id="l14.356" class="difflineminus">-        }</span>
<a href="#l14.357"></a><span id="l14.357" class="difflineminus">-        for (let tab of client.tabs) {</span>
<a href="#l14.358"></a><span id="l14.358" class="difflineminus">-          let tabEnt = this._createTabElement(doc, tab);</span>
<a href="#l14.359"></a><span id="l14.359" class="difflineminus">-          attachFragment.appendChild(tabEnt);</span>
<a href="#l14.360"></a><span id="l14.360" class="difflineminus">-        }</span>
<a href="#l14.361"></a><span id="l14.361" class="difflineminus">-        if (hasNextPage) {</span>
<a href="#l14.362"></a><span id="l14.362" class="difflineminus">-          let showAllEnt = this._createShowMoreElement(doc, client.id,</span>
<a href="#l14.363"></a><span id="l14.363" class="difflineminus">-                                                       nextPageIsLastPage ?</span>
<a href="#l14.364"></a><span id="l14.364" class="difflineminus">-                                                       Infinity :</span>
<a href="#l14.365"></a><span id="l14.365" class="difflineminus">-                                                       maxTabs + this.TABS_PER_PAGE);</span>
<a href="#l14.366"></a><span id="l14.366" class="difflineminus">-          attachFragment.appendChild(showAllEnt);</span>
<a href="#l14.367"></a><span id="l14.367" class="difflineminus">-        }</span>
<a href="#l14.368"></a><span id="l14.368" class="difflineminus">-      }</span>
<a href="#l14.369"></a><span id="l14.369" class="difflineminus">-    },</span>
<a href="#l14.370"></a><span id="l14.370" class="difflineminus">-    _createTabElement(doc, tabInfo) {</span>
<a href="#l14.371"></a><span id="l14.371" class="difflineminus">-      let item = doc.createXULElement(&quot;toolbarbutton&quot;);</span>
<a href="#l14.372"></a><span id="l14.372" class="difflineminus">-      let tooltipText = (tabInfo.title ? tabInfo.title + &quot;\n&quot; : &quot;&quot;) + tabInfo.url;</span>
<a href="#l14.373"></a><span id="l14.373" class="difflineminus">-      item.setAttribute(&quot;itemtype&quot;, &quot;tab&quot;);</span>
<a href="#l14.374"></a><span id="l14.374" class="difflineminus">-      item.setAttribute(&quot;class&quot;, &quot;subviewbutton&quot;);</span>
<a href="#l14.375"></a><span id="l14.375" class="difflineminus">-      item.setAttribute(&quot;targetURI&quot;, tabInfo.url);</span>
<a href="#l14.376"></a><span id="l14.376" class="difflineminus">-      item.setAttribute(&quot;label&quot;, tabInfo.title != &quot;&quot; ? tabInfo.title : tabInfo.url);</span>
<a href="#l14.377"></a><span id="l14.377" class="difflineminus">-      item.setAttribute(&quot;image&quot;, tabInfo.icon);</span>
<a href="#l14.378"></a><span id="l14.378" class="difflineminus">-      item.setAttribute(&quot;tooltiptext&quot;, tooltipText);</span>
<a href="#l14.379"></a><span id="l14.379" class="difflineminus">-      // We need to use &quot;click&quot; instead of &quot;command&quot; here so openUILink</span>
<a href="#l14.380"></a><span id="l14.380" class="difflineminus">-      // respects different buttons (eg, to open in a new tab).</span>
<a href="#l14.381"></a><span id="l14.381" class="difflineminus">-      item.addEventListener(&quot;click&quot;, e =&gt; {</span>
<a href="#l14.382"></a><span id="l14.382" class="difflineminus">-        doc.defaultView.openUILink(tabInfo.url, e, {</span>
<a href="#l14.383"></a><span id="l14.383" class="difflineminus">-          triggeringPrincipal: Services.scriptSecurityManager.createNullPrincipal({}),</span>
<a href="#l14.384"></a><span id="l14.384" class="difflineminus">-        });</span>
<a href="#l14.385"></a><span id="l14.385" class="difflineminus">-        if (doc.defaultView.whereToOpenLink(e) != &quot;current&quot;) {</span>
<a href="#l14.386"></a><span id="l14.386" class="difflineminus">-          e.preventDefault();</span>
<a href="#l14.387"></a><span id="l14.387" class="difflineminus">-          e.stopPropagation();</span>
<a href="#l14.388"></a><span id="l14.388" class="difflineminus">-        } else {</span>
<a href="#l14.389"></a><span id="l14.389" class="difflineminus">-          CustomizableUI.hidePanelForNode(item);</span>
<a href="#l14.390"></a><span id="l14.390" class="difflineminus">-        }</span>
<a href="#l14.391"></a><span id="l14.391" class="difflineminus">-      });</span>
<a href="#l14.392"></a><span id="l14.392" class="difflineminus">-      return item;</span>
<a href="#l14.393"></a><span id="l14.393" class="difflineminus">-    },</span>
<a href="#l14.394"></a><span id="l14.394" class="difflineminus">-    _createShowMoreElement(doc, clientId, showCount) {</span>
<a href="#l14.395"></a><span id="l14.395" class="difflineminus">-      let labelAttr, tooltipAttr;</span>
<a href="#l14.396"></a><span id="l14.396" class="difflineminus">-      if (showCount === Infinity) {</span>
<a href="#l14.397"></a><span id="l14.397" class="difflineminus">-        labelAttr = &quot;showAllLabel&quot;;</span>
<a href="#l14.398"></a><span id="l14.398" class="difflineminus">-        tooltipAttr = &quot;showAllTooltipText&quot;;</span>
<a href="#l14.399"></a><span id="l14.399" class="difflineminus">-      } else {</span>
<a href="#l14.400"></a><span id="l14.400" class="difflineminus">-        labelAttr = &quot;showMoreLabel&quot;;</span>
<a href="#l14.401"></a><span id="l14.401" class="difflineminus">-        tooltipAttr = &quot;showMoreTooltipText&quot;;</span>
<a href="#l14.402"></a><span id="l14.402" class="difflineminus">-      }</span>
<a href="#l14.403"></a><span id="l14.403" class="difflineminus">-      let showAllItem = doc.createXULElement(&quot;toolbarbutton&quot;);</span>
<a href="#l14.404"></a><span id="l14.404" class="difflineminus">-      showAllItem.setAttribute(&quot;itemtype&quot;, &quot;showmorebutton&quot;);</span>
<a href="#l14.405"></a><span id="l14.405" class="difflineminus">-      showAllItem.setAttribute(&quot;class&quot;, &quot;subviewbutton&quot;);</span>
<a href="#l14.406"></a><span id="l14.406" class="difflineminus">-      let label = this._tabsList.getAttribute(labelAttr);</span>
<a href="#l14.407"></a><span id="l14.407" class="difflineminus">-      showAllItem.setAttribute(&quot;label&quot;, label);</span>
<a href="#l14.408"></a><span id="l14.408" class="difflineminus">-      let tooltipText = this._tabsList.getAttribute(tooltipAttr);</span>
<a href="#l14.409"></a><span id="l14.409" class="difflineminus">-      showAllItem.setAttribute(&quot;tooltiptext&quot;, tooltipText);</span>
<a href="#l14.410"></a><span id="l14.410" class="difflineminus">-      showAllItem.addEventListener(&quot;click&quot;, e =&gt; {</span>
<a href="#l14.411"></a><span id="l14.411" class="difflineminus">-        e.preventDefault();</span>
<a href="#l14.412"></a><span id="l14.412" class="difflineminus">-        e.stopPropagation();</span>
<a href="#l14.413"></a><span id="l14.413" class="difflineminus">-        this._showTabs({ clientId, maxTabs: showCount });</span>
<a href="#l14.414"></a><span id="l14.414" class="difflineminus">-      });</span>
<a href="#l14.415"></a><span id="l14.415" class="difflineminus">-      return showAllItem;</span>
<a href="#l14.416"></a><span id="l14.416" class="difflineminus">-    },</span>
<a href="#l14.417"></a><span id="l14.417" class="difflineminus">-  });</span>
<a href="#l14.418"></a><span id="l14.418" class="difflineminus">-}</span>
<a href="#l14.419"></a><span id="l14.419" class="difflineplus">+//       if (client.tabs.length == 0) {</span>
<a href="#l14.420"></a><span id="l14.420" class="difflineplus">+//         let label = this._appendMessageLabel(&quot;notabsforclientlabel&quot;, attachFragment);</span>
<a href="#l14.421"></a><span id="l14.421" class="difflineplus">+//         label.setAttribute(&quot;class&quot;, &quot;PanelUI-remotetabs-notabsforclient-label&quot;);</span>
<a href="#l14.422"></a><span id="l14.422" class="difflineplus">+//       } else {</span>
<a href="#l14.423"></a><span id="l14.423" class="difflineplus">+//         // If this page will display all tabs, show no additional buttons.</span>
<a href="#l14.424"></a><span id="l14.424" class="difflineplus">+//         // If the next page will display all the remaining tabs, show a &quot;Show All&quot; button</span>
<a href="#l14.425"></a><span id="l14.425" class="difflineplus">+//         // Otherwise, show a &quot;Shore More&quot; button</span>
<a href="#l14.426"></a><span id="l14.426" class="difflineplus">+//         let hasNextPage = client.tabs.length &gt; maxTabs;</span>
<a href="#l14.427"></a><span id="l14.427" class="difflineplus">+//         let nextPageIsLastPage = hasNextPage &amp;&amp; maxTabs + this.TABS_PER_PAGE &gt;= client.tabs.length;</span>
<a href="#l14.428"></a><span id="l14.428" class="difflineplus">+//         if (nextPageIsLastPage) {</span>
<a href="#l14.429"></a><span id="l14.429" class="difflineplus">+//           // When the user clicks &quot;Show All&quot;, try to have at least NEXT_PAGE_MIN_TABS more tabs</span>
<a href="#l14.430"></a><span id="l14.430" class="difflineplus">+//           // to display in order to avoid user frustration</span>
<a href="#l14.431"></a><span id="l14.431" class="difflineplus">+//           maxTabs = Math.min(client.tabs.length - this.NEXT_PAGE_MIN_TABS, maxTabs);</span>
<a href="#l14.432"></a><span id="l14.432" class="difflineplus">+//         }</span>
<a href="#l14.433"></a><span id="l14.433" class="difflineplus">+//         if (hasNextPage) {</span>
<a href="#l14.434"></a><span id="l14.434" class="difflineplus">+//           client.tabs = client.tabs.slice(0, maxTabs);</span>
<a href="#l14.435"></a><span id="l14.435" class="difflineplus">+//         }</span>
<a href="#l14.436"></a><span id="l14.436" class="difflineplus">+//         for (let tab of client.tabs) {</span>
<a href="#l14.437"></a><span id="l14.437" class="difflineplus">+//           let tabEnt = this._createTabElement(doc, tab);</span>
<a href="#l14.438"></a><span id="l14.438" class="difflineplus">+//           attachFragment.appendChild(tabEnt);</span>
<a href="#l14.439"></a><span id="l14.439" class="difflineplus">+//         }</span>
<a href="#l14.440"></a><span id="l14.440" class="difflineplus">+//         if (hasNextPage) {</span>
<a href="#l14.441"></a><span id="l14.441" class="difflineplus">+//           let showAllEnt = this._createShowMoreElement(doc, client.id,</span>
<a href="#l14.442"></a><span id="l14.442" class="difflineplus">+//                                                        nextPageIsLastPage ?</span>
<a href="#l14.443"></a><span id="l14.443" class="difflineplus">+//                                                        Infinity :</span>
<a href="#l14.444"></a><span id="l14.444" class="difflineplus">+//                                                        maxTabs + this.TABS_PER_PAGE);</span>
<a href="#l14.445"></a><span id="l14.445" class="difflineplus">+//           attachFragment.appendChild(showAllEnt);</span>
<a href="#l14.446"></a><span id="l14.446" class="difflineplus">+//         }</span>
<a href="#l14.447"></a><span id="l14.447" class="difflineplus">+//       }</span>
<a href="#l14.448"></a><span id="l14.448" class="difflineplus">+//     },</span>
<a href="#l14.449"></a><span id="l14.449" class="difflineplus">+//     _createTabElement(doc, tabInfo) {</span>
<a href="#l14.450"></a><span id="l14.450" class="difflineplus">+//       let item = doc.createXULElement(&quot;toolbarbutton&quot;);</span>
<a href="#l14.451"></a><span id="l14.451" class="difflineplus">+//       let tooltipText = (tabInfo.title ? tabInfo.title + &quot;\n&quot; : &quot;&quot;) + tabInfo.url;</span>
<a href="#l14.452"></a><span id="l14.452" class="difflineplus">+//       item.setAttribute(&quot;itemtype&quot;, &quot;tab&quot;);</span>
<a href="#l14.453"></a><span id="l14.453" class="difflineplus">+//       item.setAttribute(&quot;class&quot;, &quot;subviewbutton&quot;);</span>
<a href="#l14.454"></a><span id="l14.454" class="difflineplus">+//       item.setAttribute(&quot;targetURI&quot;, tabInfo.url);</span>
<a href="#l14.455"></a><span id="l14.455" class="difflineplus">+//       item.setAttribute(&quot;label&quot;, tabInfo.title != &quot;&quot; ? tabInfo.title : tabInfo.url);</span>
<a href="#l14.456"></a><span id="l14.456" class="difflineplus">+//       item.setAttribute(&quot;image&quot;, tabInfo.icon);</span>
<a href="#l14.457"></a><span id="l14.457" class="difflineplus">+//       item.setAttribute(&quot;tooltiptext&quot;, tooltipText);</span>
<a href="#l14.458"></a><span id="l14.458" class="difflineplus">+//       // We need to use &quot;click&quot; instead of &quot;command&quot; here so openUILink</span>
<a href="#l14.459"></a><span id="l14.459" class="difflineplus">+//       // respects different buttons (eg, to open in a new tab).</span>
<a href="#l14.460"></a><span id="l14.460" class="difflineplus">+//       item.addEventListener(&quot;click&quot;, e =&gt; {</span>
<a href="#l14.461"></a><span id="l14.461" class="difflineplus">+//         doc.defaultView.openUILink(tabInfo.url, e, {</span>
<a href="#l14.462"></a><span id="l14.462" class="difflineplus">+//           triggeringPrincipal: Services.scriptSecurityManager.createNullPrincipal({}),</span>
<a href="#l14.463"></a><span id="l14.463" class="difflineplus">+//         });</span>
<a href="#l14.464"></a><span id="l14.464" class="difflineplus">+//         if (doc.defaultView.whereToOpenLink(e) != &quot;current&quot;) {</span>
<a href="#l14.465"></a><span id="l14.465" class="difflineplus">+//           e.preventDefault();</span>
<a href="#l14.466"></a><span id="l14.466" class="difflineplus">+//           e.stopPropagation();</span>
<a href="#l14.467"></a><span id="l14.467" class="difflineplus">+//         } else {</span>
<a href="#l14.468"></a><span id="l14.468" class="difflineplus">+//           CustomizableUI.hidePanelForNode(item);</span>
<a href="#l14.469"></a><span id="l14.469" class="difflineplus">+//         }</span>
<a href="#l14.470"></a><span id="l14.470" class="difflineplus">+//       });</span>
<a href="#l14.471"></a><span id="l14.471" class="difflineplus">+//       return item;</span>
<a href="#l14.472"></a><span id="l14.472" class="difflineplus">+//     },</span>
<a href="#l14.473"></a><span id="l14.473" class="difflineplus">+//     _createShowMoreElement(doc, clientId, showCount) {</span>
<a href="#l14.474"></a><span id="l14.474" class="difflineplus">+//       let labelAttr, tooltipAttr;</span>
<a href="#l14.475"></a><span id="l14.475" class="difflineplus">+//       if (showCount === Infinity) {</span>
<a href="#l14.476"></a><span id="l14.476" class="difflineplus">+//         labelAttr = &quot;showAllLabel&quot;;</span>
<a href="#l14.477"></a><span id="l14.477" class="difflineplus">+//         tooltipAttr = &quot;showAllTooltipText&quot;;</span>
<a href="#l14.478"></a><span id="l14.478" class="difflineplus">+//       } else {</span>
<a href="#l14.479"></a><span id="l14.479" class="difflineplus">+//         labelAttr = &quot;showMoreLabel&quot;;</span>
<a href="#l14.480"></a><span id="l14.480" class="difflineplus">+//         tooltipAttr = &quot;showMoreTooltipText&quot;;</span>
<a href="#l14.481"></a><span id="l14.481" class="difflineplus">+//       }</span>
<a href="#l14.482"></a><span id="l14.482" class="difflineplus">+//       let showAllItem = doc.createXULElement(&quot;toolbarbutton&quot;);</span>
<a href="#l14.483"></a><span id="l14.483" class="difflineplus">+//       showAllItem.setAttribute(&quot;itemtype&quot;, &quot;showmorebutton&quot;);</span>
<a href="#l14.484"></a><span id="l14.484" class="difflineplus">+//       showAllItem.setAttribute(&quot;class&quot;, &quot;subviewbutton&quot;);</span>
<a href="#l14.485"></a><span id="l14.485" class="difflineplus">+//       let label = this._tabsList.getAttribute(labelAttr);</span>
<a href="#l14.486"></a><span id="l14.486" class="difflineplus">+//       showAllItem.setAttribute(&quot;label&quot;, label);</span>
<a href="#l14.487"></a><span id="l14.487" class="difflineplus">+//       let tooltipText = this._tabsList.getAttribute(tooltipAttr);</span>
<a href="#l14.488"></a><span id="l14.488" class="difflineplus">+//       showAllItem.setAttribute(&quot;tooltiptext&quot;, tooltipText);</span>
<a href="#l14.489"></a><span id="l14.489" class="difflineplus">+//       showAllItem.addEventListener(&quot;click&quot;, e =&gt; {</span>
<a href="#l14.490"></a><span id="l14.490" class="difflineplus">+//         e.preventDefault();</span>
<a href="#l14.491"></a><span id="l14.491" class="difflineplus">+//         e.stopPropagation();</span>
<a href="#l14.492"></a><span id="l14.492" class="difflineplus">+//         this._showTabs({ clientId, maxTabs: showCount });</span>
<a href="#l14.493"></a><span id="l14.493" class="difflineplus">+//       });</span>
<a href="#l14.494"></a><span id="l14.494" class="difflineplus">+//       return showAllItem;</span>
<a href="#l14.495"></a><span id="l14.495" class="difflineplus">+//     },</span>
<a href="#l14.496"></a><span id="l14.496" class="difflineplus">+//   });</span>
<a href="#l14.497"></a><span id="l14.497" class="difflineplus">+// }</span>
<a href="#l14.498"></a><span id="l14.498"> </span>
<a href="#l14.499"></a><span id="l14.499"> let preferencesButton = {</span>
<a href="#l14.500"></a><span id="l14.500">   id: &quot;preferences-button&quot;,</span>
<a href="#l14.501"></a><span id="l14.501">   onCommand(aEvent) {</span>
<a href="#l14.502"></a><span id="l14.502">     let win = aEvent.target.ownerGlobal;</span>
<a href="#l14.503"></a><span id="l14.503">     win.openPreferences(undefined);</span>
<a href="#l14.504"></a><span id="l14.504">   },</span>
<a href="#l14.505"></a><span id="l14.505"> };</span>
<a href="#l14.506"></a><span id="l14.506" class="difflineat">@@ -749,110 +753,112 @@ if (AppConstants.platform == &quot;win&quot;) {</span>
<a href="#l14.507"></a><span id="l14.507"> } else if (AppConstants.platform == &quot;macosx&quot;) {</span>
<a href="#l14.508"></a><span id="l14.508">   preferencesButton.tooltiptext = &quot;preferences-button.tooltiptext.withshortcut&quot;;</span>
<a href="#l14.509"></a><span id="l14.509">   preferencesButton.shortcutId = &quot;key_preferencesCmdMac&quot;;</span>
<a href="#l14.510"></a><span id="l14.510"> } else {</span>
<a href="#l14.511"></a><span id="l14.511">   preferencesButton.tooltiptext = &quot;preferences-button.tooltiptext2&quot;;</span>
<a href="#l14.512"></a><span id="l14.512"> }</span>
<a href="#l14.513"></a><span id="l14.513"> CustomizableWidgets.push(preferencesButton);</span>
<a href="#l14.514"></a><span id="l14.514"> </span>
<a href="#l14.515"></a><span id="l14.515" class="difflineminus">-if (Services.prefs.getBoolPref(&quot;privacy.panicButton.enabled&quot;)) {</span>
<a href="#l14.516"></a><span id="l14.516" class="difflineminus">-  CustomizableWidgets.push({</span>
<a href="#l14.517"></a><span id="l14.517" class="difflineminus">-    id: &quot;panic-button&quot;,</span>
<a href="#l14.518"></a><span id="l14.518" class="difflineminus">-    type: &quot;view&quot;,</span>
<a href="#l14.519"></a><span id="l14.519" class="difflineminus">-    viewId: &quot;PanelUI-panicView&quot;,</span>
<a href="#l14.520"></a><span id="l14.520" class="difflineplus">+// TODO appmenu - This errors when _defineBuiltInWidgets runs in</span>
<a href="#l14.521"></a><span id="l14.521" class="difflineplus">+// CustomizableUI.jsm.</span>
<a href="#l14.522"></a><span id="l14.522" class="difflineplus">+// if (Services.prefs.getBoolPref(&quot;privacy.panicButton.enabled&quot;)) {</span>
<a href="#l14.523"></a><span id="l14.523" class="difflineplus">+//   CustomizableWidgets.push({</span>
<a href="#l14.524"></a><span id="l14.524" class="difflineplus">+//     id: &quot;panic-button&quot;,</span>
<a href="#l14.525"></a><span id="l14.525" class="difflineplus">+//     type: &quot;view&quot;,</span>
<a href="#l14.526"></a><span id="l14.526" class="difflineplus">+//     viewId: &quot;PanelUI-panicView&quot;,</span>
<a href="#l14.527"></a><span id="l14.527"> </span>
<a href="#l14.528"></a><span id="l14.528" class="difflineminus">-    forgetButtonCalled(aEvent) {</span>
<a href="#l14.529"></a><span id="l14.529" class="difflineminus">-      let doc = aEvent.target.ownerDocument;</span>
<a href="#l14.530"></a><span id="l14.530" class="difflineminus">-      let group = doc.getElementById(&quot;PanelUI-panic-timeSpan&quot;);</span>
<a href="#l14.531"></a><span id="l14.531" class="difflineminus">-      let itemsToClear = [</span>
<a href="#l14.532"></a><span id="l14.532" class="difflineminus">-        &quot;cookies&quot;, &quot;history&quot;, &quot;openWindows&quot;, &quot;formdata&quot;, &quot;sessions&quot;, &quot;cache&quot;, &quot;downloads&quot;, &quot;offlineApps&quot;,</span>
<a href="#l14.533"></a><span id="l14.533" class="difflineminus">-      ];</span>
<a href="#l14.534"></a><span id="l14.534" class="difflineminus">-      let newWindowPrivateState = PrivateBrowsingUtils.isWindowPrivate(doc.defaultView) ?</span>
<a href="#l14.535"></a><span id="l14.535" class="difflineminus">-                                  &quot;private&quot; : &quot;non-private&quot;;</span>
<a href="#l14.536"></a><span id="l14.536" class="difflineminus">-      let promise = Sanitizer.sanitize(itemsToClear, {</span>
<a href="#l14.537"></a><span id="l14.537" class="difflineminus">-        ignoreTimespan: false,</span>
<a href="#l14.538"></a><span id="l14.538" class="difflineminus">-        range: Sanitizer.getClearRange(+group.value),</span>
<a href="#l14.539"></a><span id="l14.539" class="difflineminus">-        privateStateForNewWindow: newWindowPrivateState,</span>
<a href="#l14.540"></a><span id="l14.540" class="difflineminus">-      });</span>
<a href="#l14.541"></a><span id="l14.541" class="difflineminus">-      promise.then(function() {</span>
<a href="#l14.542"></a><span id="l14.542" class="difflineminus">-        let otherWindow = Services.wm.getMostRecentWindow(&quot;navigator:browser&quot;);</span>
<a href="#l14.543"></a><span id="l14.543" class="difflineminus">-        if (otherWindow.closed) {</span>
<a href="#l14.544"></a><span id="l14.544" class="difflineminus">-          Cu.reportError(&quot;Got a closed window!&quot;);</span>
<a href="#l14.545"></a><span id="l14.545" class="difflineminus">-        }</span>
<a href="#l14.546"></a><span id="l14.546" class="difflineminus">-        if (otherWindow.PanicButtonNotifier) {</span>
<a href="#l14.547"></a><span id="l14.547" class="difflineminus">-          otherWindow.PanicButtonNotifier.notify();</span>
<a href="#l14.548"></a><span id="l14.548" class="difflineminus">-        } else {</span>
<a href="#l14.549"></a><span id="l14.549" class="difflineminus">-          otherWindow.PanicButtonNotifierShouldNotify = true;</span>
<a href="#l14.550"></a><span id="l14.550" class="difflineminus">-        }</span>
<a href="#l14.551"></a><span id="l14.551" class="difflineminus">-      });</span>
<a href="#l14.552"></a><span id="l14.552" class="difflineminus">-    },</span>
<a href="#l14.553"></a><span id="l14.553" class="difflineminus">-    handleEvent(aEvent) {</span>
<a href="#l14.554"></a><span id="l14.554" class="difflineminus">-      switch (aEvent.type) {</span>
<a href="#l14.555"></a><span id="l14.555" class="difflineminus">-        case &quot;command&quot;:</span>
<a href="#l14.556"></a><span id="l14.556" class="difflineminus">-          this.forgetButtonCalled(aEvent);</span>
<a href="#l14.557"></a><span id="l14.557" class="difflineminus">-          break;</span>
<a href="#l14.558"></a><span id="l14.558" class="difflineminus">-      }</span>
<a href="#l14.559"></a><span id="l14.559" class="difflineminus">-    },</span>
<a href="#l14.560"></a><span id="l14.560" class="difflineminus">-    onViewShowing(aEvent) {</span>
<a href="#l14.561"></a><span id="l14.561" class="difflineminus">-      let win = aEvent.target.ownerGlobal;</span>
<a href="#l14.562"></a><span id="l14.562" class="difflineminus">-      let doc = win.document;</span>
<a href="#l14.563"></a><span id="l14.563" class="difflineminus">-      let eventBlocker = null;</span>
<a href="#l14.564"></a><span id="l14.564" class="difflineminus">-      if (!doc.querySelector(&quot;#PanelUI-panic-timeframe&quot;)) {</span>
<a href="#l14.565"></a><span id="l14.565" class="difflineminus">-        win.MozXULElement.insertFTLIfNeeded(&quot;browser/panicButton.ftl&quot;);</span>
<a href="#l14.566"></a><span id="l14.566" class="difflineminus">-        let frag = win.MozXULElement.parseXULToFragment(`</span>
<a href="#l14.567"></a><span id="l14.567" class="difflineminus">-          &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l14.568"></a><span id="l14.568" class="difflineminus">-            &lt;hbox id=&quot;PanelUI-panic-timeframe&quot;&gt;</span>
<a href="#l14.569"></a><span id="l14.569" class="difflineminus">-              &lt;image id=&quot;PanelUI-panic-timeframe-icon&quot; alt=&quot;&quot;/&gt;</span>
<a href="#l14.570"></a><span id="l14.570" class="difflineminus">-              &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l14.571"></a><span id="l14.571" class="difflineminus">-                &lt;description data-l10n-id=&quot;panic-main-timeframe-desc&quot; id=&quot;PanelUI-panic-mainDesc&quot;&gt;&lt;/description&gt;</span>
<a href="#l14.572"></a><span id="l14.572" class="difflineminus">-                &lt;radiogroup id=&quot;PanelUI-panic-timeSpan&quot; aria-labelledby=&quot;PanelUI-panic-mainDesc&quot; closemenu=&quot;none&quot;&gt;</span>
<a href="#l14.573"></a><span id="l14.573" class="difflineminus">-                  &lt;radio id=&quot;PanelUI-panic-5min&quot; data-l10n-id=&quot;panic-button-5min&quot; selected=&quot;true&quot;</span>
<a href="#l14.574"></a><span id="l14.574" class="difflineminus">-                        value=&quot;5&quot; class=&quot;subviewradio&quot;/&gt;</span>
<a href="#l14.575"></a><span id="l14.575" class="difflineminus">-                  &lt;radio id=&quot;PanelUI-panic-2hr&quot; data-l10n-id=&quot;panic-button-2hr&quot;</span>
<a href="#l14.576"></a><span id="l14.576" class="difflineminus">-                        value=&quot;2&quot; class=&quot;subviewradio&quot;/&gt;</span>
<a href="#l14.577"></a><span id="l14.577" class="difflineminus">-                  &lt;radio id=&quot;PanelUI-panic-day&quot; data-l10n-id=&quot;panic-button-day&quot;</span>
<a href="#l14.578"></a><span id="l14.578" class="difflineminus">-                        value=&quot;6&quot; class=&quot;subviewradio&quot;/&gt;</span>
<a href="#l14.579"></a><span id="l14.579" class="difflineminus">-                &lt;/radiogroup&gt;</span>
<a href="#l14.580"></a><span id="l14.580" class="difflineminus">-              &lt;/vbox&gt;</span>
<a href="#l14.581"></a><span id="l14.581" class="difflineminus">-            &lt;/hbox&gt;</span>
<a href="#l14.582"></a><span id="l14.582" class="difflineminus">-            &lt;vbox id=&quot;PanelUI-panic-explanations&quot;&gt;</span>
<a href="#l14.583"></a><span id="l14.583" class="difflineminus">-              &lt;label id=&quot;PanelUI-panic-actionlist-main-label&quot; data-l10n-id=&quot;panic-button-action-desc&quot;&gt;&lt;/label&gt;</span>
<a href="#l14.584"></a><span id="l14.584" class="difflineplus">+//     forgetButtonCalled(aEvent) {</span>
<a href="#l14.585"></a><span id="l14.585" class="difflineplus">+//       let doc = aEvent.target.ownerDocument;</span>
<a href="#l14.586"></a><span id="l14.586" class="difflineplus">+//       let group = doc.getElementById(&quot;PanelUI-panic-timeSpan&quot;);</span>
<a href="#l14.587"></a><span id="l14.587" class="difflineplus">+//       let itemsToClear = [</span>
<a href="#l14.588"></a><span id="l14.588" class="difflineplus">+//         &quot;cookies&quot;, &quot;history&quot;, &quot;openWindows&quot;, &quot;formdata&quot;, &quot;sessions&quot;, &quot;cache&quot;, &quot;downloads&quot;, &quot;offlineApps&quot;,</span>
<a href="#l14.589"></a><span id="l14.589" class="difflineplus">+//       ];</span>
<a href="#l14.590"></a><span id="l14.590" class="difflineplus">+//       let newWindowPrivateState = PrivateBrowsingUtils.isWindowPrivate(doc.defaultView) ?</span>
<a href="#l14.591"></a><span id="l14.591" class="difflineplus">+//                                   &quot;private&quot; : &quot;non-private&quot;;</span>
<a href="#l14.592"></a><span id="l14.592" class="difflineplus">+//       let promise = Sanitizer.sanitize(itemsToClear, {</span>
<a href="#l14.593"></a><span id="l14.593" class="difflineplus">+//         ignoreTimespan: false,</span>
<a href="#l14.594"></a><span id="l14.594" class="difflineplus">+//         range: Sanitizer.getClearRange(+group.value),</span>
<a href="#l14.595"></a><span id="l14.595" class="difflineplus">+//         privateStateForNewWindow: newWindowPrivateState,</span>
<a href="#l14.596"></a><span id="l14.596" class="difflineplus">+//       });</span>
<a href="#l14.597"></a><span id="l14.597" class="difflineplus">+//       promise.then(function() {</span>
<a href="#l14.598"></a><span id="l14.598" class="difflineplus">+//         let otherWindow = Services.wm.getMostRecentWindow(&quot;navigator:browser&quot;);</span>
<a href="#l14.599"></a><span id="l14.599" class="difflineplus">+//         if (otherWindow.closed) {</span>
<a href="#l14.600"></a><span id="l14.600" class="difflineplus">+//           Cu.reportError(&quot;Got a closed window!&quot;);</span>
<a href="#l14.601"></a><span id="l14.601" class="difflineplus">+//         }</span>
<a href="#l14.602"></a><span id="l14.602" class="difflineplus">+//         if (otherWindow.PanicButtonNotifier) {</span>
<a href="#l14.603"></a><span id="l14.603" class="difflineplus">+//           otherWindow.PanicButtonNotifier.notify();</span>
<a href="#l14.604"></a><span id="l14.604" class="difflineplus">+//         } else {</span>
<a href="#l14.605"></a><span id="l14.605" class="difflineplus">+//           otherWindow.PanicButtonNotifierShouldNotify = true;</span>
<a href="#l14.606"></a><span id="l14.606" class="difflineplus">+//         }</span>
<a href="#l14.607"></a><span id="l14.607" class="difflineplus">+//       });</span>
<a href="#l14.608"></a><span id="l14.608" class="difflineplus">+//     },</span>
<a href="#l14.609"></a><span id="l14.609" class="difflineplus">+//     handleEvent(aEvent) {</span>
<a href="#l14.610"></a><span id="l14.610" class="difflineplus">+//       switch (aEvent.type) {</span>
<a href="#l14.611"></a><span id="l14.611" class="difflineplus">+//         case &quot;command&quot;:</span>
<a href="#l14.612"></a><span id="l14.612" class="difflineplus">+//           this.forgetButtonCalled(aEvent);</span>
<a href="#l14.613"></a><span id="l14.613" class="difflineplus">+//           break;</span>
<a href="#l14.614"></a><span id="l14.614" class="difflineplus">+//       }</span>
<a href="#l14.615"></a><span id="l14.615" class="difflineplus">+//     },</span>
<a href="#l14.616"></a><span id="l14.616" class="difflineplus">+//     onViewShowing(aEvent) {</span>
<a href="#l14.617"></a><span id="l14.617" class="difflineplus">+//       let win = aEvent.target.ownerGlobal;</span>
<a href="#l14.618"></a><span id="l14.618" class="difflineplus">+//       let doc = win.document;</span>
<a href="#l14.619"></a><span id="l14.619" class="difflineplus">+//       let eventBlocker = null;</span>
<a href="#l14.620"></a><span id="l14.620" class="difflineplus">+//       if (!doc.querySelector(&quot;#PanelUI-panic-timeframe&quot;)) {</span>
<a href="#l14.621"></a><span id="l14.621" class="difflineplus">+//         win.MozXULElement.insertFTLIfNeeded(&quot;browser/panicButton.ftl&quot;);</span>
<a href="#l14.622"></a><span id="l14.622" class="difflineplus">+//         let frag = win.MozXULElement.parseXULToFragment(`</span>
<a href="#l14.623"></a><span id="l14.623" class="difflineplus">+//           &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l14.624"></a><span id="l14.624" class="difflineplus">+//             &lt;hbox id=&quot;PanelUI-panic-timeframe&quot;&gt;</span>
<a href="#l14.625"></a><span id="l14.625" class="difflineplus">+//               &lt;image id=&quot;PanelUI-panic-timeframe-icon&quot; alt=&quot;&quot;/&gt;</span>
<a href="#l14.626"></a><span id="l14.626" class="difflineplus">+//               &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l14.627"></a><span id="l14.627" class="difflineplus">+//                 &lt;description data-l10n-id=&quot;panic-main-timeframe-desc&quot; id=&quot;PanelUI-panic-mainDesc&quot;&gt;&lt;/description&gt;</span>
<a href="#l14.628"></a><span id="l14.628" class="difflineplus">+//                 &lt;radiogroup id=&quot;PanelUI-panic-timeSpan&quot; aria-labelledby=&quot;PanelUI-panic-mainDesc&quot; closemenu=&quot;none&quot;&gt;</span>
<a href="#l14.629"></a><span id="l14.629" class="difflineplus">+//                   &lt;radio id=&quot;PanelUI-panic-5min&quot; data-l10n-id=&quot;panic-button-5min&quot; selected=&quot;true&quot;</span>
<a href="#l14.630"></a><span id="l14.630" class="difflineplus">+//                         value=&quot;5&quot; class=&quot;subviewradio&quot;/&gt;</span>
<a href="#l14.631"></a><span id="l14.631" class="difflineplus">+//                   &lt;radio id=&quot;PanelUI-panic-2hr&quot; data-l10n-id=&quot;panic-button-2hr&quot;</span>
<a href="#l14.632"></a><span id="l14.632" class="difflineplus">+//                         value=&quot;2&quot; class=&quot;subviewradio&quot;/&gt;</span>
<a href="#l14.633"></a><span id="l14.633" class="difflineplus">+//                   &lt;radio id=&quot;PanelUI-panic-day&quot; data-l10n-id=&quot;panic-button-day&quot;</span>
<a href="#l14.634"></a><span id="l14.634" class="difflineplus">+//                         value=&quot;6&quot; class=&quot;subviewradio&quot;/&gt;</span>
<a href="#l14.635"></a><span id="l14.635" class="difflineplus">+//                 &lt;/radiogroup&gt;</span>
<a href="#l14.636"></a><span id="l14.636" class="difflineplus">+//               &lt;/vbox&gt;</span>
<a href="#l14.637"></a><span id="l14.637" class="difflineplus">+//             &lt;/hbox&gt;</span>
<a href="#l14.638"></a><span id="l14.638" class="difflineplus">+//             &lt;vbox id=&quot;PanelUI-panic-explanations&quot;&gt;</span>
<a href="#l14.639"></a><span id="l14.639" class="difflineplus">+//               &lt;label id=&quot;PanelUI-panic-actionlist-main-label&quot; data-l10n-id=&quot;panic-button-action-desc&quot;&gt;&lt;/label&gt;</span>
<a href="#l14.640"></a><span id="l14.640"> </span>
<a href="#l14.641"></a><span id="l14.641" class="difflineminus">-              &lt;label id=&quot;PanelUI-panic-actionlist-windows&quot; class=&quot;PanelUI-panic-actionlist&quot; data-l10n-id=&quot;panic-button-delete-tabs-and-windows&quot;&gt;&lt;/label&gt;</span>
<a href="#l14.642"></a><span id="l14.642" class="difflineminus">-              &lt;label id=&quot;PanelUI-panic-actionlist-cookies&quot; class=&quot;PanelUI-panic-actionlist&quot; data-l10n-id=&quot;panic-button-delete-cookies&quot;&gt;&lt;/label&gt;</span>
<a href="#l14.643"></a><span id="l14.643" class="difflineminus">-              &lt;label id=&quot;PanelUI-panic-actionlist-history&quot; class=&quot;PanelUI-panic-actionlist&quot; data-l10n-id=&quot;panic-button-delete-history&quot;&gt;&lt;/label&gt;</span>
<a href="#l14.644"></a><span id="l14.644" class="difflineminus">-              &lt;label id=&quot;PanelUI-panic-actionlist-newwindow&quot; class=&quot;PanelUI-panic-actionlist&quot; data-l10n-id=&quot;panic-button-open-new-window&quot;&gt;&lt;/label&gt;</span>
<a href="#l14.645"></a><span id="l14.645" class="difflineplus">+//               &lt;label id=&quot;PanelUI-panic-actionlist-windows&quot; class=&quot;PanelUI-panic-actionlist&quot; data-l10n-id=&quot;panic-button-delete-tabs-and-windows&quot;&gt;&lt;/label&gt;</span>
<a href="#l14.646"></a><span id="l14.646" class="difflineplus">+//               &lt;label id=&quot;PanelUI-panic-actionlist-cookies&quot; class=&quot;PanelUI-panic-actionlist&quot; data-l10n-id=&quot;panic-button-delete-cookies&quot;&gt;&lt;/label&gt;</span>
<a href="#l14.647"></a><span id="l14.647" class="difflineplus">+//               &lt;label id=&quot;PanelUI-panic-actionlist-history&quot; class=&quot;PanelUI-panic-actionlist&quot; data-l10n-id=&quot;panic-button-delete-history&quot;&gt;&lt;/label&gt;</span>
<a href="#l14.648"></a><span id="l14.648" class="difflineplus">+//               &lt;label id=&quot;PanelUI-panic-actionlist-newwindow&quot; class=&quot;PanelUI-panic-actionlist&quot; data-l10n-id=&quot;panic-button-open-new-window&quot;&gt;&lt;/label&gt;</span>
<a href="#l14.649"></a><span id="l14.649"> </span>
<a href="#l14.650"></a><span id="l14.650" class="difflineminus">-              &lt;label id=&quot;PanelUI-panic-warning&quot; data-l10n-id=&quot;panic-button-undo-warning&quot;&gt;&lt;/label&gt;</span>
<a href="#l14.651"></a><span id="l14.651" class="difflineminus">-            &lt;/vbox&gt;</span>
<a href="#l14.652"></a><span id="l14.652" class="difflineminus">-            &lt;button id=&quot;PanelUI-panic-view-button&quot;</span>
<a href="#l14.653"></a><span id="l14.653" class="difflineminus">-                    data-l10n-id=&quot;panic-button-forget-button&quot;/&gt;</span>
<a href="#l14.654"></a><span id="l14.654" class="difflineminus">-          &lt;/vbox&gt;</span>
<a href="#l14.655"></a><span id="l14.655" class="difflineminus">-        `);</span>
<a href="#l14.656"></a><span id="l14.656" class="difflineplus">+//               &lt;label id=&quot;PanelUI-panic-warning&quot; data-l10n-id=&quot;panic-button-undo-warning&quot;&gt;&lt;/label&gt;</span>
<a href="#l14.657"></a><span id="l14.657" class="difflineplus">+//             &lt;/vbox&gt;</span>
<a href="#l14.658"></a><span id="l14.658" class="difflineplus">+//             &lt;button id=&quot;PanelUI-panic-view-button&quot;</span>
<a href="#l14.659"></a><span id="l14.659" class="difflineplus">+//                     data-l10n-id=&quot;panic-button-forget-button&quot;/&gt;</span>
<a href="#l14.660"></a><span id="l14.660" class="difflineplus">+//           &lt;/vbox&gt;</span>
<a href="#l14.661"></a><span id="l14.661" class="difflineplus">+//         `);</span>
<a href="#l14.662"></a><span id="l14.662"> </span>
<a href="#l14.663"></a><span id="l14.663" class="difflineminus">-        aEvent.target.appendChild(frag);</span>
<a href="#l14.664"></a><span id="l14.664" class="difflineminus">-        eventBlocker = doc.l10n.translateElements([aEvent.target]);</span>
<a href="#l14.665"></a><span id="l14.665" class="difflineminus">-      }</span>
<a href="#l14.666"></a><span id="l14.666" class="difflineplus">+//         aEvent.target.appendChild(frag);</span>
<a href="#l14.667"></a><span id="l14.667" class="difflineplus">+//         eventBlocker = doc.l10n.translateElements([aEvent.target]);</span>
<a href="#l14.668"></a><span id="l14.668" class="difflineplus">+//       }</span>
<a href="#l14.669"></a><span id="l14.669"> </span>
<a href="#l14.670"></a><span id="l14.670" class="difflineminus">-      let forgetButton = aEvent.target.querySelector(&quot;#PanelUI-panic-view-button&quot;);</span>
<a href="#l14.671"></a><span id="l14.671" class="difflineminus">-      let group = doc.getElementById(&quot;PanelUI-panic-timeSpan&quot;);</span>
<a href="#l14.672"></a><span id="l14.672" class="difflineminus">-      group.selectedItem = doc.getElementById(&quot;PanelUI-panic-5min&quot;);</span>
<a href="#l14.673"></a><span id="l14.673" class="difflineminus">-      forgetButton.addEventListener(&quot;command&quot;, this);</span>
<a href="#l14.674"></a><span id="l14.674" class="difflineplus">+//       let forgetButton = aEvent.target.querySelector(&quot;#PanelUI-panic-view-button&quot;);</span>
<a href="#l14.675"></a><span id="l14.675" class="difflineplus">+//       let group = doc.getElementById(&quot;PanelUI-panic-timeSpan&quot;);</span>
<a href="#l14.676"></a><span id="l14.676" class="difflineplus">+//       group.selectedItem = doc.getElementById(&quot;PanelUI-panic-5min&quot;);</span>
<a href="#l14.677"></a><span id="l14.677" class="difflineplus">+//       forgetButton.addEventListener(&quot;command&quot;, this);</span>
<a href="#l14.678"></a><span id="l14.678"> </span>
<a href="#l14.679"></a><span id="l14.679" class="difflineminus">-      if (eventBlocker) {</span>
<a href="#l14.680"></a><span id="l14.680" class="difflineminus">-        aEvent.detail.addBlocker(eventBlocker);</span>
<a href="#l14.681"></a><span id="l14.681" class="difflineminus">-      }</span>
<a href="#l14.682"></a><span id="l14.682" class="difflineminus">-    },</span>
<a href="#l14.683"></a><span id="l14.683" class="difflineminus">-    onViewHiding(aEvent) {</span>
<a href="#l14.684"></a><span id="l14.684" class="difflineminus">-      let forgetButton = aEvent.target.querySelector(&quot;#PanelUI-panic-view-button&quot;);</span>
<a href="#l14.685"></a><span id="l14.685" class="difflineminus">-      forgetButton.removeEventListener(&quot;command&quot;, this);</span>
<a href="#l14.686"></a><span id="l14.686" class="difflineminus">-    },</span>
<a href="#l14.687"></a><span id="l14.687" class="difflineminus">-  });</span>
<a href="#l14.688"></a><span id="l14.688" class="difflineminus">-}</span>
<a href="#l14.689"></a><span id="l14.689" class="difflineplus">+//       if (eventBlocker) {</span>
<a href="#l14.690"></a><span id="l14.690" class="difflineplus">+//         aEvent.detail.addBlocker(eventBlocker);</span>
<a href="#l14.691"></a><span id="l14.691" class="difflineplus">+//       }</span>
<a href="#l14.692"></a><span id="l14.692" class="difflineplus">+//     },</span>
<a href="#l14.693"></a><span id="l14.693" class="difflineplus">+//     onViewHiding(aEvent) {</span>
<a href="#l14.694"></a><span id="l14.694" class="difflineplus">+//       let forgetButton = aEvent.target.querySelector(&quot;#PanelUI-panic-view-button&quot;);</span>
<a href="#l14.695"></a><span id="l14.695" class="difflineplus">+//       forgetButton.removeEventListener(&quot;command&quot;, this);</span>
<a href="#l14.696"></a><span id="l14.696" class="difflineplus">+//     },</span>
<a href="#l14.697"></a><span id="l14.697" class="difflineplus">+//   });</span>
<a href="#l14.698"></a><span id="l14.698" class="difflineplus">+// }</span>
<a href="#l14.699"></a><span id="l14.699"> </span>
<a href="#l14.700"></a><span id="l14.700"> if (PrivateBrowsingUtils.enabled) {</span>
<a href="#l14.701"></a><span id="l14.701">   CustomizableWidgets.push({</span>
<a href="#l14.702"></a><span id="l14.702">     id: &quot;privatebrowsing-button&quot;,</span>
<a href="#l14.703"></a><span id="l14.703">     shortcutId: &quot;key_privatebrowsing&quot;,</span>
<a href="#l14.704"></a><span id="l14.704">     onCommand(e) {</span>
<a href="#l14.705"></a><span id="l14.705">       let win = e.target.ownerGlobal;</span>
<a href="#l14.706"></a><span id="l14.706">       win.OpenBrowserWindow({private: true});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/components/customizableui/PanelMultiView.jsm</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/components/customizableui/PanelMultiView.jsm</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -99,25 +99,28 @@</span>
<a href="#l15.4"></a><span id="l15.4"> </span>
<a href="#l15.5"></a><span id="l15.5"> &quot;use strict&quot;;</span>
<a href="#l15.6"></a><span id="l15.6"> </span>
<a href="#l15.7"></a><span id="l15.7"> var EXPORTED_SYMBOLS = [</span>
<a href="#l15.8"></a><span id="l15.8">   &quot;PanelMultiView&quot;,</span>
<a href="#l15.9"></a><span id="l15.9">   &quot;PanelView&quot;,</span>
<a href="#l15.10"></a><span id="l15.10"> ];</span>
<a href="#l15.11"></a><span id="l15.11"> </span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-const {XPCOMUtils} = ChromeUtils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+// TODO appmenu - Usage is commented out below.  Keep eslint happy.</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineplus">+// const {XPCOMUtils} = ChromeUtils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l15.15"></a><span id="l15.15"> const {Services} = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineplus">+</span>
<a href="#l15.17"></a><span id="l15.17"> ChromeUtils.defineModuleGetter(this, &quot;CustomizableUI&quot;,</span>
<a href="#l15.18"></a><span id="l15.18">   &quot;resource:///modules/CustomizableUI.jsm&quot;);</span>
<a href="#l15.19"></a><span id="l15.19"> </span>
<a href="#l15.20"></a><span id="l15.20" class="difflineminus">-XPCOMUtils.defineLazyGetter(this, &quot;gBundle&quot;, function() {</span>
<a href="#l15.21"></a><span id="l15.21" class="difflineminus">-  return Services.strings.createBundle(</span>
<a href="#l15.22"></a><span id="l15.22" class="difflineminus">-    &quot;chrome://browser/locale/browser.properties&quot;);</span>
<a href="#l15.23"></a><span id="l15.23" class="difflineminus">-});</span>
<a href="#l15.24"></a><span id="l15.24" class="difflineplus">+// TODO appmenu - Needs updating for Thunderbird. Usage is commented out below.</span>
<a href="#l15.25"></a><span id="l15.25" class="difflineplus">+// XPCOMUtils.defineLazyGetter(this, &quot;gBundle&quot;, function() {</span>
<a href="#l15.26"></a><span id="l15.26" class="difflineplus">+//   return Services.strings.createBundle(</span>
<a href="#l15.27"></a><span id="l15.27" class="difflineplus">+//     &quot;chrome://browser/locale/browser.properties&quot;);</span>
<a href="#l15.28"></a><span id="l15.28" class="difflineplus">+// });</span>
<a href="#l15.29"></a><span id="l15.29"> </span>
<a href="#l15.30"></a><span id="l15.30"> /**</span>
<a href="#l15.31"></a><span id="l15.31">  * Safety timeout after which asynchronous events will be canceled if any of the</span>
<a href="#l15.32"></a><span id="l15.32">  * registered blockers does not return.</span>
<a href="#l15.33"></a><span id="l15.33">  */</span>
<a href="#l15.34"></a><span id="l15.34"> const BLOCKERS_TIMEOUT_MS = 10000;</span>
<a href="#l15.35"></a><span id="l15.35"> </span>
<a href="#l15.36"></a><span id="l15.36"> const TRANSITION_PHASES = Object.freeze({</span>
<a href="#l15.37"></a><span id="l15.37" class="difflineat">@@ -717,19 +720,21 @@ var PanelMultiView = class extends Assoc</span>
<a href="#l15.38"></a><span id="l15.38">     let nextPanelView = this.openViews[this.openViews.length - 2];</span>
<a href="#l15.39"></a><span id="l15.39"> </span>
<a href="#l15.40"></a><span id="l15.40">     // Like in the showSubView method, do not re-enter navigation while it is</span>
<a href="#l15.41"></a><span id="l15.41">     // in progress, and make the view inactive immediately. From this point</span>
<a href="#l15.42"></a><span id="l15.42">     // onwards, &quot;await&quot; statements can be used safely.</span>
<a href="#l15.43"></a><span id="l15.43">     if (!prevPanelView.active) {</span>
<a href="#l15.44"></a><span id="l15.44">       return;</span>
<a href="#l15.45"></a><span id="l15.45">     }</span>
<a href="#l15.46"></a><span id="l15.46" class="difflineplus">+</span>
<a href="#l15.47"></a><span id="l15.47">     prevPanelView.active = false;</span>
<a href="#l15.48"></a><span id="l15.48"> </span>
<a href="#l15.49"></a><span id="l15.49">     prevPanelView.captureKnownSize();</span>
<a href="#l15.50"></a><span id="l15.50" class="difflineplus">+</span>
<a href="#l15.51"></a><span id="l15.51">     await this._transitionViews(prevPanelView.node, nextPanelView.node, true);</span>
<a href="#l15.52"></a><span id="l15.52"> </span>
<a href="#l15.53"></a><span id="l15.53">     this._closeLatestView();</span>
<a href="#l15.54"></a><span id="l15.54"> </span>
<a href="#l15.55"></a><span id="l15.55">     this._activateView(nextPanelView);</span>
<a href="#l15.56"></a><span id="l15.56">   }</span>
<a href="#l15.57"></a><span id="l15.57"> </span>
<a href="#l15.58"></a><span id="l15.58">   /**</span>
<a href="#l15.59"></a><span id="l15.59" class="difflineat">@@ -972,18 +977,21 @@ var PanelMultiView = class extends Assoc</span>
<a href="#l15.60"></a><span id="l15.60">     if (!nextPanelView.isOpenIn(this)) {</span>
<a href="#l15.61"></a><span id="l15.61">       return;</span>
<a href="#l15.62"></a><span id="l15.62">     }</span>
<a href="#l15.63"></a><span id="l15.63"> </span>
<a href="#l15.64"></a><span id="l15.64">     // Now set the viewContainer dimensions to that of the new view, which</span>
<a href="#l15.65"></a><span id="l15.65">     // kicks of the height animation.</span>
<a href="#l15.66"></a><span id="l15.66">     this._viewContainer.style.height = viewRect.height + &quot;px&quot;;</span>
<a href="#l15.67"></a><span id="l15.67">     this._viewContainer.style.width = viewRect.width + &quot;px&quot;;</span>
<a href="#l15.68"></a><span id="l15.68" class="difflineminus">-    this._panel.removeAttribute(&quot;width&quot;);</span>
<a href="#l15.69"></a><span id="l15.69" class="difflineplus">+</span>
<a href="#l15.70"></a><span id="l15.70" class="difflineplus">+    // TODO appmenu - Removing the width here causes a double-wide panel flicker.</span>
<a href="#l15.71"></a><span id="l15.71" class="difflineplus">+    // this._panel.removeAttribute(&quot;width&quot;);</span>
<a href="#l15.72"></a><span id="l15.72">     this._panel.removeAttribute(&quot;height&quot;);</span>
<a href="#l15.73"></a><span id="l15.73" class="difflineplus">+</span>
<a href="#l15.74"></a><span id="l15.74">     // We're setting the width property to prevent flickering during the</span>
<a href="#l15.75"></a><span id="l15.75">     // sliding animation with smaller views.</span>
<a href="#l15.76"></a><span id="l15.76">     viewNode.style.width = viewRect.width + &quot;px&quot;;</span>
<a href="#l15.77"></a><span id="l15.77"> </span>
<a href="#l15.78"></a><span id="l15.78">     // Kick off the transition!</span>
<a href="#l15.79"></a><span id="l15.79">     details.phase = TRANSITION_PHASES.TRANSITION;</span>
<a href="#l15.80"></a><span id="l15.80">     this._viewStack.style.transform = &quot;translateX(&quot; + (moveToLeft ? &quot;&quot; : &quot;-&quot;) + deltaX + &quot;px)&quot;;</span>
<a href="#l15.81"></a><span id="l15.81"> </span>
<a href="#l15.82"></a><span id="l15.82" class="difflineat">@@ -1268,18 +1276,22 @@ var PanelView = class extends Associated</span>
<a href="#l15.83"></a><span id="l15.83">     header = this.document.createXULElement(&quot;box&quot;);</span>
<a href="#l15.84"></a><span id="l15.84">     header.classList.add(&quot;panel-header&quot;);</span>
<a href="#l15.85"></a><span id="l15.85"> </span>
<a href="#l15.86"></a><span id="l15.86">     let backButton = this.document.createXULElement(&quot;toolbarbutton&quot;);</span>
<a href="#l15.87"></a><span id="l15.87">     backButton.className =</span>
<a href="#l15.88"></a><span id="l15.88">       &quot;subviewbutton subviewbutton-iconic subviewbutton-back&quot;;</span>
<a href="#l15.89"></a><span id="l15.89">     backButton.setAttribute(&quot;closemenu&quot;, &quot;none&quot;);</span>
<a href="#l15.90"></a><span id="l15.90">     backButton.setAttribute(&quot;tabindex&quot;, &quot;0&quot;);</span>
<a href="#l15.91"></a><span id="l15.91" class="difflineminus">-    backButton.setAttribute(&quot;aria-label&quot;,</span>
<a href="#l15.92"></a><span id="l15.92" class="difflineminus">-      gBundle.GetStringFromName(&quot;panel.back&quot;));</span>
<a href="#l15.93"></a><span id="l15.93" class="difflineplus">+</span>
<a href="#l15.94"></a><span id="l15.94" class="difflineplus">+    // TODO appmenu gBundle.GetStringFromName is undefined call</span>
<a href="#l15.95"></a><span id="l15.95" class="difflineplus">+    // Possible string addition/change.</span>
<a href="#l15.96"></a><span id="l15.96" class="difflineplus">+    // backButton.setAttribute(&quot;aria-label&quot;,</span>
<a href="#l15.97"></a><span id="l15.97" class="difflineplus">+    //   gBundle.GetStringFromName(&quot;panel.back&quot;));</span>
<a href="#l15.98"></a><span id="l15.98" class="difflineplus">+</span>
<a href="#l15.99"></a><span id="l15.99">     backButton.addEventListener(&quot;command&quot;, () =&gt; {</span>
<a href="#l15.100"></a><span id="l15.100">       // The panelmultiview element may change if the view is reused.</span>
<a href="#l15.101"></a><span id="l15.101">       this.node.panelMultiView.goBack();</span>
<a href="#l15.102"></a><span id="l15.102">       backButton.blur();</span>
<a href="#l15.103"></a><span id="l15.103">     });</span>
<a href="#l15.104"></a><span id="l15.104"> </span>
<a href="#l15.105"></a><span id="l15.105">     let label = this.document.createXULElement(&quot;label&quot;);</span>
<a href="#l15.106"></a><span id="l15.106">     label.setAttribute(&quot;value&quot;, value);</span>
<a href="#l15.107"></a><span id="l15.107" class="difflineat">@@ -1557,16 +1569,17 @@ var PanelView = class extends Associated</span>
<a href="#l15.108"></a><span id="l15.108">    *  - The Right key functions the same as the Enter key, simulating a click</span>
<a href="#l15.109"></a><span id="l15.109">    *  - The Left key triggers a navigation back to the previous view.</span>
<a href="#l15.110"></a><span id="l15.110">    *</span>
<a href="#l15.111"></a><span id="l15.111">    * Key navigation is only enabled while the view is active, meaning that this</span>
<a href="#l15.112"></a><span id="l15.112">    * method will return early if it is invoked during a sliding transition.</span>
<a href="#l15.113"></a><span id="l15.113">    *</span>
<a href="#l15.114"></a><span id="l15.114">    * @param {KeyEvent} event</span>
<a href="#l15.115"></a><span id="l15.115">    */</span>
<a href="#l15.116"></a><span id="l15.116" class="difflineplus">+  /* eslint-disable-next-line complexity */</span>
<a href="#l15.117"></a><span id="l15.117">   keyNavigation(event) {</span>
<a href="#l15.118"></a><span id="l15.118">     if (!this.active) {</span>
<a href="#l15.119"></a><span id="l15.119">       return;</span>
<a href="#l15.120"></a><span id="l15.120">     }</span>
<a href="#l15.121"></a><span id="l15.121"> </span>
<a href="#l15.122"></a><span id="l15.122">     let focus = this.document.activeElement;</span>
<a href="#l15.123"></a><span id="l15.123">     // Make sure the focus is actually inside the panel. (It might not be if</span>
<a href="#l15.124"></a><span id="l15.124">     // the panel was opened with the mouse.) If it isn't, we don't care</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mail/components/customizableui/content/jar.mn</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mail/components/customizableui/content/jar.mn</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -1,6 +1,6 @@</span>
<a href="#l16.4"></a><span id="l16.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l16.5"></a><span id="l16.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l16.6"></a><span id="l16.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l16.7"></a><span id="l16.7"> </span>
<a href="#l16.8"></a><span id="l16.8" class="difflineminus">-browser.jar:</span>
<a href="#l16.9"></a><span id="l16.9" class="difflineminus">-  content/browser/customizableui/panelUI.js</span>
<a href="#l16.10"></a><span id="l16.10" class="difflineplus">+messenger.jar:</span>
<a href="#l16.11"></a><span id="l16.11" class="difflineplus">+  content/messenger/customizableui/panelUI.js</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mail/components/customizableui/content/panelUI.inc.xul</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mail/components/customizableui/content/panelUI.inc.xul</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -14,84 +14,24 @@</span>
<a href="#l17.4"></a><span id="l17.4">                context=&quot;toolbar-context-menu&quot;&gt;</span>
<a href="#l17.5"></a><span id="l17.5">       &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.6"></a><span id="l17.6">         &lt;vbox id=&quot;widget-overflow-list&quot; class=&quot;widget-overflow-list&quot;</span>
<a href="#l17.7"></a><span id="l17.7">               overflowfortoolbar=&quot;nav-bar&quot;/&gt;</span>
<a href="#l17.8"></a><span id="l17.8">         &lt;toolbarseparator id=&quot;widget-overflow-fixed-separator&quot; hidden=&quot;true&quot;/&gt;</span>
<a href="#l17.9"></a><span id="l17.9">         &lt;vbox id=&quot;widget-overflow-fixed-list&quot; class=&quot;widget-overflow-list&quot; hidden=&quot;true&quot; /&gt;</span>
<a href="#l17.10"></a><span id="l17.10">       &lt;/vbox&gt;</span>
<a href="#l17.11"></a><span id="l17.11">       &lt;toolbarbutton command=&quot;cmd_CustomizeToolbars&quot;</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-                      id=&quot;overflowMenu-customize-button&quot;</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineminus">-                      class=&quot;subviewbutton panel-subview-footer&quot;</span>
<a href="#l17.14"></a><span id="l17.14" class="difflineminus">-                      accesskey=&quot;&amp;overflowCustomizeToolbar.accesskey;&quot;</span>
<a href="#l17.15"></a><span id="l17.15" class="difflineminus">-                      label=&quot;&amp;overflowCustomizeToolbar.label;&quot;/&gt;</span>
<a href="#l17.16"></a><span id="l17.16" class="difflineplus">+                     id=&quot;overflowMenu-customize-button&quot;</span>
<a href="#l17.17"></a><span id="l17.17" class="difflineplus">+                     class=&quot;subviewbutton panel-subview-footer&quot;/&gt;</span>
<a href="#l17.18"></a><span id="l17.18" class="difflineplus">+                     &lt;!-- TODO appmenu</span>
<a href="#l17.19"></a><span id="l17.19" class="difflineplus">+                     accesskey=&quot;overflowCustomizeToolbar.accesskey;&quot;</span>
<a href="#l17.20"></a><span id="l17.20" class="difflineplus">+                     label=&quot;overflowCustomizeToolbar.label;&quot;/&gt;</span>
<a href="#l17.21"></a><span id="l17.21" class="difflineplus">+                     --&gt;</span>
<a href="#l17.22"></a><span id="l17.22">     &lt;/panelview&gt;</span>
<a href="#l17.23"></a><span id="l17.23">   &lt;/panelmultiview&gt;</span>
<a href="#l17.24"></a><span id="l17.24" class="difflineminus">-  &lt;!-- This menu is here because not having it in the menu in which it's used flickers</span>
<a href="#l17.25"></a><span id="l17.25" class="difflineminus">-       when hover styles overlap. See https://bugzilla.mozilla.org/show_bug.cgi?id=1378427 .</span>
<a href="#l17.26"></a><span id="l17.26" class="difflineminus">-       --&gt;</span>
<a href="#l17.27"></a><span id="l17.27" class="difflineminus">-  &lt;menupopup id=&quot;customizationPanelItemContextMenu&quot;</span>
<a href="#l17.28"></a><span id="l17.28" class="difflineminus">-             onpopupshowing=&quot;gCustomizeMode.onPanelContextMenuShowing(event); ToolbarContextMenu.updateExtension(this)&quot;&gt;</span>
<a href="#l17.29"></a><span id="l17.29" class="difflineminus">-    &lt;menuitem oncommand=&quot;ToolbarContextMenu.openAboutAddonsForContextAction(this.parentElement)&quot;</span>
<a href="#l17.30"></a><span id="l17.30" class="difflineminus">-              accesskey=&quot;&amp;customizeMenu.manageExtension.accesskey;&quot;</span>
<a href="#l17.31"></a><span id="l17.31" class="difflineminus">-              label=&quot;&amp;customizeMenu.manageExtension.label;&quot;</span>
<a href="#l17.32"></a><span id="l17.32" class="difflineminus">-              contexttype=&quot;toolbaritem&quot;</span>
<a href="#l17.33"></a><span id="l17.33" class="difflineminus">-              class=&quot;customize-context-manageExtension&quot;/&gt;</span>
<a href="#l17.34"></a><span id="l17.34" class="difflineminus">-    &lt;menuitem oncommand=&quot;ToolbarContextMenu.removeExtensionForContextAction(this.parentElement)&quot;</span>
<a href="#l17.35"></a><span id="l17.35" class="difflineminus">-              accesskey=&quot;&amp;customizeMenu.removeExtension.accesskey;&quot;</span>
<a href="#l17.36"></a><span id="l17.36" class="difflineminus">-              label=&quot;&amp;customizeMenu.removeExtension.label;&quot;</span>
<a href="#l17.37"></a><span id="l17.37" class="difflineminus">-              contexttype=&quot;toolbaritem&quot;</span>
<a href="#l17.38"></a><span id="l17.38" class="difflineminus">-              class=&quot;customize-context-removeExtension&quot;/&gt;</span>
<a href="#l17.39"></a><span id="l17.39" class="difflineminus">-    &lt;menuitem oncommand=&quot;ToolbarContextMenu.reportExtensionForContextAction(this.parentElement, 'toolbar_context_menu')&quot;</span>
<a href="#l17.40"></a><span id="l17.40" class="difflineminus">-              accesskey=&quot;&amp;customizeMenu.reportExtension.accesskey;&quot;</span>
<a href="#l17.41"></a><span id="l17.41" class="difflineminus">-              label=&quot;&amp;customizeMenu.reportExtension.label;&quot;</span>
<a href="#l17.42"></a><span id="l17.42" class="difflineminus">-              contexttype=&quot;toolbaritem&quot;</span>
<a href="#l17.43"></a><span id="l17.43" class="difflineminus">-              class=&quot;customize-context-reportExtension&quot;/&gt;</span>
<a href="#l17.44"></a><span id="l17.44" class="difflineminus">-    &lt;menuseparator/&gt;</span>
<a href="#l17.45"></a><span id="l17.45" class="difflineminus">-    &lt;menuitem oncommand=&quot;gCustomizeMode.addToPanel(document.popupNode)&quot;</span>
<a href="#l17.46"></a><span id="l17.46" class="difflineminus">-              id=&quot;customizationPanelItemContextMenuPin&quot;</span>
<a href="#l17.47"></a><span id="l17.47" class="difflineminus">-              accesskey=&quot;&amp;customizeMenu.pinToOverflowMenu.accesskey;&quot;</span>
<a href="#l17.48"></a><span id="l17.48" class="difflineminus">-              label=&quot;&amp;customizeMenu.pinToOverflowMenu.label;&quot;</span>
<a href="#l17.49"></a><span id="l17.49" class="difflineminus">-              closemenu=&quot;single&quot;</span>
<a href="#l17.50"></a><span id="l17.50" class="difflineminus">-              class=&quot;customize-context-moveToPanel&quot;/&gt;</span>
<a href="#l17.51"></a><span id="l17.51" class="difflineminus">-    &lt;menuitem oncommand=&quot;gCustomizeMode.addToToolbar(document.popupNode)&quot;</span>
<a href="#l17.52"></a><span id="l17.52" class="difflineminus">-              id=&quot;customizationPanelItemContextMenuUnpin&quot;</span>
<a href="#l17.53"></a><span id="l17.53" class="difflineminus">-              closemenu=&quot;single&quot;</span>
<a href="#l17.54"></a><span id="l17.54" class="difflineminus">-              class=&quot;customize-context-moveToToolbar&quot;</span>
<a href="#l17.55"></a><span id="l17.55" class="difflineminus">-              accesskey=&quot;&amp;customizeMenu.unpinFromOverflowMenu.accesskey;&quot;</span>
<a href="#l17.56"></a><span id="l17.56" class="difflineminus">-              label=&quot;&amp;customizeMenu.unpinFromOverflowMenu.label;&quot;/&gt;</span>
<a href="#l17.57"></a><span id="l17.57" class="difflineminus">-    &lt;menuitem oncommand=&quot;gCustomizeMode.removeFromArea(document.popupNode)&quot;</span>
<a href="#l17.58"></a><span id="l17.58" class="difflineminus">-              closemenu=&quot;single&quot;</span>
<a href="#l17.59"></a><span id="l17.59" class="difflineminus">-              class=&quot;customize-context-removeFromPanel&quot;</span>
<a href="#l17.60"></a><span id="l17.60" class="difflineminus">-              accesskey=&quot;&amp;customizeMenu.removeFromToolbar.accesskey;&quot;</span>
<a href="#l17.61"></a><span id="l17.61" class="difflineminus">-              label=&quot;&amp;customizeMenu.removeFromToolbar.label;&quot;/&gt;</span>
<a href="#l17.62"></a><span id="l17.62" class="difflineminus">-    &lt;menuseparator/&gt;</span>
<a href="#l17.63"></a><span id="l17.63" class="difflineminus">-    &lt;menuitem command=&quot;cmd_CustomizeToolbars&quot;</span>
<a href="#l17.64"></a><span id="l17.64" class="difflineminus">-              class=&quot;viewCustomizeToolbar&quot;</span>
<a href="#l17.65"></a><span id="l17.65" class="difflineminus">-              accesskey=&quot;&amp;viewCustomizeToolbar.accesskey;&quot;</span>
<a href="#l17.66"></a><span id="l17.66" class="difflineminus">-              label=&quot;&amp;viewCustomizeToolbar.label;&quot;/&gt;</span>
<a href="#l17.67"></a><span id="l17.67" class="difflineminus">-  &lt;/menupopup&gt;</span>
<a href="#l17.68"></a><span id="l17.68" class="difflineminus">-&lt;/panel&gt;</span>
<a href="#l17.69"></a><span id="l17.69" class="difflineminus">-</span>
<a href="#l17.70"></a><span id="l17.70" class="difflineminus">-&lt;panel id=&quot;panic-button-success-notification&quot;</span>
<a href="#l17.71"></a><span id="l17.71" class="difflineminus">-       type=&quot;arrow&quot;</span>
<a href="#l17.72"></a><span id="l17.72" class="difflineminus">-       position=&quot;bottomcenter topright&quot;</span>
<a href="#l17.73"></a><span id="l17.73" class="difflineminus">-       hidden=&quot;true&quot;</span>
<a href="#l17.74"></a><span id="l17.74" class="difflineminus">-       role=&quot;alert&quot;</span>
<a href="#l17.75"></a><span id="l17.75" class="difflineminus">-       orient=&quot;vertical&quot;&gt;</span>
<a href="#l17.76"></a><span id="l17.76" class="difflineminus">-  &lt;hbox id=&quot;panic-button-success-header&quot;&gt;</span>
<a href="#l17.77"></a><span id="l17.77" class="difflineminus">-    &lt;image id=&quot;panic-button-success-icon&quot; alt=&quot;&quot;/&gt;</span>
<a href="#l17.78"></a><span id="l17.78" class="difflineminus">-    &lt;vbox&gt;</span>
<a href="#l17.79"></a><span id="l17.79" class="difflineminus">-      &lt;description&gt;&amp;panicButton.thankyou.msg1;&lt;/description&gt;</span>
<a href="#l17.80"></a><span id="l17.80" class="difflineminus">-      &lt;description&gt;&amp;panicButton.thankyou.msg2;&lt;/description&gt;</span>
<a href="#l17.81"></a><span id="l17.81" class="difflineminus">-    &lt;/vbox&gt;</span>
<a href="#l17.82"></a><span id="l17.82" class="difflineminus">-  &lt;/hbox&gt;</span>
<a href="#l17.83"></a><span id="l17.83" class="difflineminus">-  &lt;button label=&quot;&amp;panicButton.thankyou.buttonlabel;&quot;</span>
<a href="#l17.84"></a><span id="l17.84" class="difflineminus">-          id=&quot;panic-button-success-closebutton&quot;</span>
<a href="#l17.85"></a><span id="l17.85" class="difflineminus">-          oncommand=&quot;PanicButtonNotifier.close()&quot;/&gt;</span>
<a href="#l17.86"></a><span id="l17.86"> &lt;/panel&gt;</span>
<a href="#l17.87"></a><span id="l17.87"> </span>
<a href="#l17.88"></a><span id="l17.88"> &lt;panel id=&quot;appMenu-notification-popup&quot;</span>
<a href="#l17.89"></a><span id="l17.89">        class=&quot;popup-notification-panel&quot;</span>
<a href="#l17.90"></a><span id="l17.90">        type=&quot;arrow&quot;</span>
<a href="#l17.91"></a><span id="l17.91">        position=&quot;after_start&quot;</span>
<a href="#l17.92"></a><span id="l17.92">        hidden=&quot;true&quot;</span>
<a href="#l17.93"></a><span id="l17.93">        flip=&quot;slide&quot;</span>
<a href="#l17.94"></a><span id="l17.94" class="difflineat">@@ -125,30 +65,16 @@</span>
<a href="#l17.95"></a><span id="l17.95">                      buttonhighlight=&quot;true&quot;</span>
<a href="#l17.96"></a><span id="l17.96">                      hidden=&quot;true&quot;&gt;</span>
<a href="#l17.97"></a><span id="l17.97">     &lt;popupnotificationcontent id=&quot;update-manual-notification-content&quot; orient=&quot;vertical&quot;&gt;</span>
<a href="#l17.98"></a><span id="l17.98">       &lt;description id=&quot;update-manual-description&quot; data-lazy-l10n-id=&quot;appmenu-update-manual-message&quot;&gt;&lt;/description&gt;</span>
<a href="#l17.99"></a><span id="l17.99">       &lt;label id=&quot;update-manual-whats-new&quot; is=&quot;text-link&quot;  data-lazy-l10n-id=&quot;appmenu-update-whats-new&quot;/&gt;</span>
<a href="#l17.100"></a><span id="l17.100">     &lt;/popupnotificationcontent&gt;</span>
<a href="#l17.101"></a><span id="l17.101">   &lt;/popupnotification&gt;</span>
<a href="#l17.102"></a><span id="l17.102"> </span>
<a href="#l17.103"></a><span id="l17.103" class="difflineminus">-  &lt;popupnotification id=&quot;appMenu-update-unsupported-notification&quot;</span>
<a href="#l17.104"></a><span id="l17.104" class="difflineminus">-                     popupid=&quot;update-unsupported&quot;</span>
<a href="#l17.105"></a><span id="l17.105" class="difflineminus">-                     data-lazy-l10n-id=&quot;appmenu-update-unsupported&quot;</span>
<a href="#l17.106"></a><span id="l17.106" class="difflineminus">-                     data-l10n-attrs=&quot;buttonlabel, buttonaccesskey, secondarybuttonlabel, secondarybuttonaccesskey&quot;</span>
<a href="#l17.107"></a><span id="l17.107" class="difflineminus">-                     closebuttonhidden=&quot;true&quot;</span>
<a href="#l17.108"></a><span id="l17.108" class="difflineminus">-                     dropmarkerhidden=&quot;true&quot;</span>
<a href="#l17.109"></a><span id="l17.109" class="difflineminus">-                     checkboxhidden=&quot;true&quot;</span>
<a href="#l17.110"></a><span id="l17.110" class="difflineminus">-                     buttonhighlight=&quot;true&quot;</span>
<a href="#l17.111"></a><span id="l17.111" class="difflineminus">-                     hidden=&quot;true&quot;&gt;</span>
<a href="#l17.112"></a><span id="l17.112" class="difflineminus">-    &lt;popupnotificationcontent id=&quot;update-unsupported-notification-content&quot; orient=&quot;vertical&quot;&gt;</span>
<a href="#l17.113"></a><span id="l17.113" class="difflineminus">-      &lt;description id=&quot;update-unsupported-description&quot; data-lazy-l10n-id=&quot;appmenu-update-unsupported-message&quot;&gt;&lt;/description&gt;</span>
<a href="#l17.114"></a><span id="l17.114" class="difflineminus">-    &lt;/popupnotificationcontent&gt;</span>
<a href="#l17.115"></a><span id="l17.115" class="difflineminus">-  &lt;/popupnotification&gt;</span>
<a href="#l17.116"></a><span id="l17.116" class="difflineminus">-</span>
<a href="#l17.117"></a><span id="l17.117">   &lt;popupnotification id=&quot;appMenu-update-restart-notification&quot;</span>
<a href="#l17.118"></a><span id="l17.118">                      popupid=&quot;update-restart&quot;</span>
<a href="#l17.119"></a><span id="l17.119">                      data-lazy-l10n-id=&quot;appmenu-update-restart&quot;</span>
<a href="#l17.120"></a><span id="l17.120">                      data-l10n-attrs=&quot;buttonlabel, buttonaccesskey, secondarybuttonlabel, secondarybuttonaccesskey&quot;</span>
<a href="#l17.121"></a><span id="l17.121">                      closebuttonhidden=&quot;true&quot;</span>
<a href="#l17.122"></a><span id="l17.122">                      dropmarkerhidden=&quot;true&quot;</span>
<a href="#l17.123"></a><span id="l17.123">                      checkboxhidden=&quot;true&quot;</span>
<a href="#l17.124"></a><span id="l17.124">                      buttonhighlight=&quot;true&quot;</span>
<a href="#l17.125"></a><span id="l17.125" class="difflineat">@@ -191,683 +117,1772 @@</span>
<a href="#l17.126"></a><span id="l17.126">     &lt;popupnotificationcontent class=&quot;addon-private-browsing-notification-content&quot; orient=&quot;vertical&quot;&gt;</span>
<a href="#l17.127"></a><span id="l17.127">       &lt;description id=&quot;addon-private-browsing-description&quot; data-lazy-l10n-id=&quot;appmenu-addon-private-browsing-message&quot;&gt;&lt;/description&gt;</span>
<a href="#l17.128"></a><span id="l17.128">       &lt;label id=&quot;addon-private-browsing-learn-more&quot;</span>
<a href="#l17.129"></a><span id="l17.129">              class=&quot;text-link&quot; is=&quot;text-link&quot; data-lazy-l10n-id=&quot;appmenu-addon-private-browsing-learn-more&quot;&gt;&lt;/label&gt;</span>
<a href="#l17.130"></a><span id="l17.130">     &lt;/popupnotificationcontent&gt;</span>
<a href="#l17.131"></a><span id="l17.131">   &lt;/popupnotification&gt;</span>
<a href="#l17.132"></a><span id="l17.132"> &lt;/panel&gt;</span>
<a href="#l17.133"></a><span id="l17.133"> </span>
<a href="#l17.134"></a><span id="l17.134" class="difflineminus">-&lt;menupopup id=&quot;customizationPaletteItemContextMenu&quot;</span>
<a href="#l17.135"></a><span id="l17.135" class="difflineminus">-           onpopupshowing=&quot;gCustomizeMode.onPaletteContextMenuShowing(event)&quot;&gt;</span>
<a href="#l17.136"></a><span id="l17.136" class="difflineminus">-  &lt;menuitem oncommand=&quot;gCustomizeMode.addToToolbar(document.popupNode)&quot;</span>
<a href="#l17.137"></a><span id="l17.137" class="difflineminus">-            class=&quot;customize-context-addToToolbar&quot;</span>
<a href="#l17.138"></a><span id="l17.138" class="difflineminus">-            accesskey=&quot;&amp;customizeMenu.addToToolbar.accesskey;&quot;</span>
<a href="#l17.139"></a><span id="l17.139" class="difflineminus">-            label=&quot;&amp;customizeMenu.addToToolbar.label;&quot;/&gt;</span>
<a href="#l17.140"></a><span id="l17.140" class="difflineminus">-  &lt;menuitem oncommand=&quot;gCustomizeMode.addToPanel(document.popupNode)&quot;</span>
<a href="#l17.141"></a><span id="l17.141" class="difflineminus">-            class=&quot;customize-context-addToPanel&quot;</span>
<a href="#l17.142"></a><span id="l17.142" class="difflineminus">-            accesskey=&quot;&amp;customizeMenu.addToOverflowMenu.accesskey;&quot;</span>
<a href="#l17.143"></a><span id="l17.143" class="difflineminus">-            label=&quot;&amp;customizeMenu.addToOverflowMenu.label;&quot;/&gt;</span>
<a href="#l17.144"></a><span id="l17.144" class="difflineminus">-&lt;/menupopup&gt;</span>
<a href="#l17.145"></a><span id="l17.145" class="difflineminus">-</span>
<a href="#l17.146"></a><span id="l17.146" class="difflineminus">-&lt;menupopup id=&quot;customizationPanelContextMenu&quot;&gt;</span>
<a href="#l17.147"></a><span id="l17.147" class="difflineminus">-  &lt;menuitem command=&quot;cmd_CustomizeToolbars&quot;</span>
<a href="#l17.148"></a><span id="l17.148" class="difflineminus">-            accesskey=&quot;&amp;customizeMenu.addMoreItems.accesskey;&quot;</span>
<a href="#l17.149"></a><span id="l17.149" class="difflineminus">-            label=&quot;&amp;customizeMenu.addMoreItems.label;&quot;/&gt;</span>
<a href="#l17.150"></a><span id="l17.150" class="difflineminus">-&lt;/menupopup&gt;</span>
<a href="#l17.151"></a><span id="l17.151" class="difflineminus">-</span>
<a href="#l17.152"></a><span id="l17.152"> &lt;panel id=&quot;appMenu-popup&quot;</span>
<a href="#l17.153"></a><span id="l17.153">        class=&quot;cui-widget-panel&quot;</span>
<a href="#l17.154"></a><span id="l17.154">        role=&quot;group&quot;</span>
<a href="#l17.155"></a><span id="l17.155">        type=&quot;arrow&quot;</span>
<a href="#l17.156"></a><span id="l17.156">        hidden=&quot;true&quot;</span>
<a href="#l17.157"></a><span id="l17.157">        flip=&quot;slide&quot;</span>
<a href="#l17.158"></a><span id="l17.158">        position=&quot;bottomcenter topright&quot;</span>
<a href="#l17.159"></a><span id="l17.159">        noautofocus=&quot;true&quot;&gt;</span>
<a href="#l17.160"></a><span id="l17.160" class="difflineminus">-  &lt;panelmultiview id=&quot;appMenu-multiView&quot; mainViewId=&quot;appMenu-mainView&quot;</span>
<a href="#l17.161"></a><span id="l17.161" class="difflineplus">+  &lt;panelmultiview id=&quot;appMenu-multiView&quot;</span>
<a href="#l17.162"></a><span id="l17.162" class="difflineplus">+                  mainViewId=&quot;appMenu-mainView&quot;</span>
<a href="#l17.163"></a><span id="l17.163">                   viewCacheId=&quot;appMenu-viewCache&quot;&gt;</span>
<a href="#l17.164"></a><span id="l17.164" class="difflineplus">+</span>
<a href="#l17.165"></a><span id="l17.165" class="difflineplus">+    &lt;!-- Main Appmenu View --&gt;</span>
<a href="#l17.166"></a><span id="l17.166">     &lt;panelview id=&quot;appMenu-mainView&quot; class=&quot;PanelUI-subView&quot;</span>
<a href="#l17.167"></a><span id="l17.167">                descriptionheightworkaround=&quot;true&quot;&gt;</span>
<a href="#l17.168"></a><span id="l17.168">       &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.169"></a><span id="l17.169">         &lt;vbox id=&quot;appMenu-addon-banners&quot;/&gt;</span>
<a href="#l17.170"></a><span id="l17.170" class="difflineminus">-        &lt;toolbarbutton class=&quot;panel-banner-item&quot;</span>
<a href="#l17.171"></a><span id="l17.171" class="difflineminus">-                       label-update-available=&quot;&amp;updateAvailable.panelUI.label;&quot;</span>
<a href="#l17.172"></a><span id="l17.172" class="difflineminus">-                       label-update-manual=&quot;&amp;updateManual.panelUI.label;&quot;</span>
<a href="#l17.173"></a><span id="l17.173" class="difflineminus">-                       label-update-unsupported=&quot;&amp;updateUnsupported.panelUI.label;&quot;</span>
<a href="#l17.174"></a><span id="l17.174" class="difflineminus">-                       label-update-restart=&quot;&amp;updateRestart.panelUI.label2;&quot;</span>
<a href="#l17.175"></a><span id="l17.175" class="difflineminus">-                       oncommand=&quot;PanelUI._onBannerItemSelected(event)&quot;</span>
<a href="#l17.176"></a><span id="l17.176" class="difflineminus">-                       wrap=&quot;true&quot;</span>
<a href="#l17.177"></a><span id="l17.177" class="difflineminus">-                       hidden=&quot;true&quot;/&gt;</span>
<a href="#l17.178"></a><span id="l17.178" class="difflineminus">-        &lt;toolbaritem id=&quot;appMenu-fxa-container&quot; class=&quot;toolbaritem-combined-buttons sync-ui-item&quot;&gt;</span>
<a href="#l17.179"></a><span id="l17.179" class="difflineminus">-          &lt;hbox id=&quot;appMenu-fxa-status&quot;</span>
<a href="#l17.180"></a><span id="l17.180" class="difflineminus">-                flex=&quot;1&quot;</span>
<a href="#l17.181"></a><span id="l17.181" class="difflineminus">-                defaultlabel=&quot;&amp;fxaSignIn.label;&quot;</span>
<a href="#l17.182"></a><span id="l17.182" class="difflineminus">-# Despite the name, the tooltip says &quot;Open Sync Preferences&quot; and it is only used when *not* signed in.</span>
<a href="#l17.183"></a><span id="l17.183" class="difflineminus">-# Bug 1542334 changed the behaviour of the item when signed in so the tooltip was no longer appropriate there.</span>
<a href="#l17.184"></a><span id="l17.184" class="difflineminus">-                tooltiptext=&quot;&amp;fxaSignedIn.tooltip;&quot;</span>
<a href="#l17.185"></a><span id="l17.185" class="difflineminus">-                errorlabel=&quot;&amp;fxaSignInError.label;&quot;</span>
<a href="#l17.186"></a><span id="l17.186" class="difflineminus">-                unverifiedlabel=&quot;&amp;fxaUnverified.label;&quot;</span>
<a href="#l17.187"></a><span id="l17.187" class="difflineminus">-                onclick=&quot;if (event.which == 1) gSync.onMenuPanelCommand();&quot;&gt;</span>
<a href="#l17.188"></a><span id="l17.188" class="difflineminus">-            &lt;image id=&quot;appMenu-fxa-avatar&quot;/&gt;</span>
<a href="#l17.189"></a><span id="l17.189" class="difflineminus">-            &lt;toolbarbutton id=&quot;appMenu-fxa-label&quot;</span>
<a href="#l17.190"></a><span id="l17.190" class="difflineminus">-                class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.191"></a><span id="l17.191" class="difflineminus">-                label=&quot;&amp;fxaSignIn.label;&quot;</span>
<a href="#l17.192"></a><span id="l17.192" class="difflineminus">-                fxabrandname=&quot;&amp;syncBrand.fxAccount.label;&quot;</span>
<a href="#l17.193"></a><span id="l17.193" class="difflineminus">-                closemenu=&quot;none&quot;/&gt;</span>
<a href="#l17.194"></a><span id="l17.194" class="difflineminus">-          &lt;/hbox&gt;</span>
<a href="#l17.195"></a><span id="l17.195" class="difflineminus">-        &lt;/toolbaritem&gt;</span>
<a href="#l17.196"></a><span id="l17.196" class="difflineminus">-        &lt;toolbarseparator class=&quot;sync-ui-item&quot;/&gt;</span>
<a href="#l17.197"></a><span id="l17.197" class="difflineminus">-        &lt;toolbaritem&gt;</span>
<a href="#l17.198"></a><span id="l17.198" class="difflineminus">-          &lt;toolbarbutton id=&quot;appMenu-tp-button&quot;</span>
<a href="#l17.199"></a><span id="l17.199" class="difflineminus">-               class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.200"></a><span id="l17.200" class="difflineminus">-               oncommand=&quot;ContentBlocking.openPreferences('appMenu-trackingprotection');&quot;&gt;</span>
<a href="#l17.201"></a><span id="l17.201" class="difflineminus">-            &lt;image id=&quot;appMenu-tp-icon&quot; class=&quot;toolbarbutton-icon&quot;/&gt;</span>
<a href="#l17.202"></a><span id="l17.202" class="difflineminus">-            &lt;label id=&quot;appMenu-tp-label&quot; class=&quot;toolbarbutton-text&quot;/&gt;</span>
<a href="#l17.203"></a><span id="l17.203" class="difflineminus">-            &lt;label id=&quot;appMenu-tp-category&quot;/&gt;</span>
<a href="#l17.204"></a><span id="l17.204" class="difflineminus">-          &lt;/toolbarbutton&gt;</span>
<a href="#l17.205"></a><span id="l17.205" class="difflineminus">-        &lt;/toolbaritem&gt;</span>
<a href="#l17.206"></a><span id="l17.206" class="difflineminus">-        &lt;toolbarseparator id=&quot;appMenu-tp-separator&quot;/&gt;</span>
<a href="#l17.207"></a><span id="l17.207" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-new-window-button&quot;</span>
<a href="#l17.208"></a><span id="l17.208" class="difflineminus">-                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.209"></a><span id="l17.209" class="difflineminus">-                       label=&quot;&amp;newNavigatorCmd.label;&quot;</span>
<a href="#l17.210"></a><span id="l17.210" class="difflineminus">-                       key=&quot;key_newNavigator&quot;</span>
<a href="#l17.211"></a><span id="l17.211" class="difflineminus">-                       command=&quot;cmd_newNavigator&quot;/&gt;</span>
<a href="#l17.212"></a><span id="l17.212" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-private-window-button&quot;</span>
<a href="#l17.213"></a><span id="l17.213" class="difflineminus">-                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.214"></a><span id="l17.214" class="difflineminus">-                       label=&quot;&amp;newPrivateWindow.label;&quot;</span>
<a href="#l17.215"></a><span id="l17.215" class="difflineminus">-                       key=&quot;key_privatebrowsing&quot;</span>
<a href="#l17.216"></a><span id="l17.216" class="difflineminus">-                       command=&quot;Tools:PrivateBrowsing&quot;/&gt;</span>
<a href="#l17.217"></a><span id="l17.217" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenuRestoreLastSession&quot;</span>
<a href="#l17.218"></a><span id="l17.218" class="difflineminus">-                       label=&quot;&amp;appMenuHistory.restoreSession.label;&quot;</span>
<a href="#l17.219"></a><span id="l17.219" class="difflineminus">-                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.220"></a><span id="l17.220" class="difflineminus">-                       command=&quot;Browser:RestoreLastSession&quot;/&gt;</span>
<a href="#l17.221"></a><span id="l17.221" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_new&quot;</span>
<a href="#l17.222"></a><span id="l17.222" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.223"></a><span id="l17.223" class="difflineplus">+                       label=&quot;&amp;newMenu.label;&quot;</span>
<a href="#l17.224"></a><span id="l17.224" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.225"></a><span id="l17.225" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-newView', this)&quot;/&gt;</span>
<a href="#l17.226"></a><span id="l17.226" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_msgAttachmentMenu&quot;</span>
<a href="#l17.227"></a><span id="l17.227" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.228"></a><span id="l17.228" class="difflineplus">+                       label=&quot;&amp;openAttachmentListCmd.label;&quot;</span>
<a href="#l17.229"></a><span id="l17.229" class="difflineplus">+                       disabled=&quot;true&quot;</span>
<a href="#l17.230"></a><span id="l17.230" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.231"></a><span id="l17.231" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-attachmentsView', this)&quot;/&gt;</span>
<a href="#l17.232"></a><span id="l17.232">         &lt;toolbarseparator/&gt;</span>
<a href="#l17.233"></a><span id="l17.233" class="difflineminus">-        &lt;toolbaritem id=&quot;appMenu-zoom-controls&quot; class=&quot;toolbaritem-combined-buttons&quot; closemenu=&quot;none&quot;&gt;</span>
<a href="#l17.234"></a><span id="l17.234" class="difflineplus">+        &lt;toolbaritem id=&quot;appmenu-edit-controls&quot;</span>
<a href="#l17.235"></a><span id="l17.235" class="difflineplus">+                     class=&quot;toolbaritem-combined-buttons&quot;</span>
<a href="#l17.236"></a><span id="l17.236" class="difflineplus">+                     closemenu=&quot;none&quot;&gt;</span>
<a href="#l17.237"></a><span id="l17.237">           &lt;!-- Use a spacer, because panel sizing code gets confused when using CSS methods. --&gt;</span>
<a href="#l17.238"></a><span id="l17.238">           &lt;spacer class=&quot;before-label&quot;/&gt;</span>
<a href="#l17.239"></a><span id="l17.239" class="difflineminus">-          &lt;label value=&quot;&amp;fullZoom.label;&quot;/&gt;</span>
<a href="#l17.240"></a><span id="l17.240" class="difflineplus">+          &lt;label value=&quot;&amp;appmenuEditMenu.label;&quot;/&gt;</span>
<a href="#l17.241"></a><span id="l17.241">           &lt;!-- This spacer keeps the scrollbar from overlapping the view. --&gt;</span>
<a href="#l17.242"></a><span id="l17.242">           &lt;spacer class=&quot;after-label&quot;/&gt;</span>
<a href="#l17.243"></a><span id="l17.243" class="difflineminus">-          &lt;toolbarbutton id=&quot;appMenu-zoomReduce-button&quot;</span>
<a href="#l17.244"></a><span id="l17.244" class="difflineminus">-                         class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.245"></a><span id="l17.245" class="difflineminus">-                         command=&quot;cmd_fullZoomReduce&quot;</span>
<a href="#l17.246"></a><span id="l17.246" class="difflineminus">-                         tooltip=&quot;dynamic-shortcut-tooltip&quot;/&gt;</span>
<a href="#l17.247"></a><span id="l17.247" class="difflineminus">-          &lt;toolbarbutton id=&quot;appMenu-zoomReset-button&quot;</span>
<a href="#l17.248"></a><span id="l17.248" class="difflineminus">-                         class=&quot;subviewbutton&quot;</span>
<a href="#l17.249"></a><span id="l17.249" class="difflineminus">-                         command=&quot;cmd_fullZoomReset&quot;</span>
<a href="#l17.250"></a><span id="l17.250" class="difflineminus">-                         tooltip=&quot;dynamic-shortcut-tooltip&quot;/&gt;</span>
<a href="#l17.251"></a><span id="l17.251" class="difflineminus">-          &lt;toolbarbutton id=&quot;appMenu-zoomEnlarge-button&quot;</span>
<a href="#l17.252"></a><span id="l17.252" class="difflineminus">-                         class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.253"></a><span id="l17.253" class="difflineminus">-                         command=&quot;cmd_fullZoomEnlarge&quot;</span>
<a href="#l17.254"></a><span id="l17.254" class="difflineminus">-                         tooltip=&quot;dynamic-shortcut-tooltip&quot;/&gt;</span>
<a href="#l17.255"></a><span id="l17.255" class="difflineminus">-          &lt;toolbarseparator orient=&quot;vertical&quot;/&gt;</span>
<a href="#l17.256"></a><span id="l17.256" class="difflineminus">-          &lt;toolbarbutton id=&quot;appMenu-fullscreen-button&quot;</span>
<a href="#l17.257"></a><span id="l17.257" class="difflineminus">-                         class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.258"></a><span id="l17.258" class="difflineminus">-                         observes=&quot;View:FullScreen&quot;</span>
<a href="#l17.259"></a><span id="l17.259" class="difflineminus">-                         type=&quot;checkbox&quot;</span>
<a href="#l17.260"></a><span id="l17.260" class="difflineminus">-                         closemenu=&quot;auto&quot;</span>
<a href="#l17.261"></a><span id="l17.261" class="difflineminus">-                         onclick=&quot;if (event.button == 0) this.closest('panel').hidePopup();&quot;</span>
<a href="#l17.262"></a><span id="l17.262" class="difflineminus">-                         tooltip=&quot;dynamic-shortcut-tooltip&quot;/&gt;</span>
<a href="#l17.263"></a><span id="l17.263" class="difflineminus">-        &lt;/toolbaritem&gt;</span>
<a href="#l17.264"></a><span id="l17.264" class="difflineminus">-        &lt;toolbarseparator/&gt;</span>
<a href="#l17.265"></a><span id="l17.265" class="difflineminus">-        &lt;toolbaritem id=&quot;appMenu-edit-controls&quot; class=&quot;toolbaritem-combined-buttons&quot; closemenu=&quot;none&quot;&gt;</span>
<a href="#l17.266"></a><span id="l17.266" class="difflineminus">-          &lt;!-- Use a spacer, because panel sizing code gets confused when using CSS methods. --&gt;</span>
<a href="#l17.267"></a><span id="l17.267" class="difflineminus">-          &lt;spacer class=&quot;before-label&quot;/&gt;</span>
<a href="#l17.268"></a><span id="l17.268" class="difflineminus">-          &lt;label value=&quot;&amp;editMenu.label;&quot;/&gt;</span>
<a href="#l17.269"></a><span id="l17.269" class="difflineminus">-          &lt;!-- This spacer keeps the scrollbar from overlapping the view. --&gt;</span>
<a href="#l17.270"></a><span id="l17.270" class="difflineminus">-          &lt;spacer class=&quot;after-label&quot;/&gt;</span>
<a href="#l17.271"></a><span id="l17.271" class="difflineminus">-          &lt;toolbarbutton id=&quot;appMenu-cut-button&quot;</span>
<a href="#l17.272"></a><span id="l17.272" class="difflineplus">+</span>
<a href="#l17.273"></a><span id="l17.273" class="difflineplus">+          &lt;toolbarbutton id=&quot;appmenu-cut&quot;</span>
<a href="#l17.274"></a><span id="l17.274">                          class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.275"></a><span id="l17.275">                          command=&quot;cmd_cut&quot;</span>
<a href="#l17.276"></a><span id="l17.276">                          tooltip=&quot;dynamic-shortcut-tooltip&quot;/&gt;</span>
<a href="#l17.277"></a><span id="l17.277" class="difflineminus">-          &lt;toolbarbutton id=&quot;appMenu-copy-button&quot;</span>
<a href="#l17.278"></a><span id="l17.278" class="difflineplus">+          &lt;toolbarbutton id=&quot;appmenu-copy&quot;</span>
<a href="#l17.279"></a><span id="l17.279">                          class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.280"></a><span id="l17.280">                          command=&quot;cmd_copy&quot;</span>
<a href="#l17.281"></a><span id="l17.281">                          tooltip=&quot;dynamic-shortcut-tooltip&quot;/&gt;</span>
<a href="#l17.282"></a><span id="l17.282" class="difflineminus">-          &lt;toolbarbutton id=&quot;appMenu-paste-button&quot;</span>
<a href="#l17.283"></a><span id="l17.283" class="difflineplus">+          &lt;toolbarbutton id=&quot;appmenu-paste&quot;</span>
<a href="#l17.284"></a><span id="l17.284">                          class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.285"></a><span id="l17.285">                          command=&quot;cmd_paste&quot;</span>
<a href="#l17.286"></a><span id="l17.286">                          tooltip=&quot;dynamic-shortcut-tooltip&quot;/&gt;</span>
<a href="#l17.287"></a><span id="l17.287" class="difflineplus">+          &lt;toolbarseparator orient=&quot;vertical&quot;/&gt;</span>
<a href="#l17.288"></a><span id="l17.288" class="difflineplus">+          &lt;toolbarbutton id=&quot;appmenu-edit-button&quot;</span>
<a href="#l17.289"></a><span id="l17.289" class="difflineplus">+                         class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.290"></a><span id="l17.290" class="difflineplus">+                         closemenu=&quot;none&quot;</span>
<a href="#l17.291"></a><span id="l17.291" class="difflineplus">+                         oncommand=&quot;PanelUI.showSubView('appMenu-editView', this)&quot;/&gt;</span>
<a href="#l17.292"></a><span id="l17.292">         &lt;/toolbaritem&gt;</span>
<a href="#l17.293"></a><span id="l17.293">         &lt;toolbarseparator/&gt;</span>
<a href="#l17.294"></a><span id="l17.294" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-library-button&quot;</span>
<a href="#l17.295"></a><span id="l17.295" class="difflineplus">+</span>
<a href="#l17.296"></a><span id="l17.296" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_find&quot;</span>
<a href="#l17.297"></a><span id="l17.297" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav subviewbutton-iconic&quot;</span>
<a href="#l17.298"></a><span id="l17.298" class="difflineplus">+                       label=&quot;&amp;findMenu.label;&quot;</span>
<a href="#l17.299"></a><span id="l17.299" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.300"></a><span id="l17.300" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-findView', this)&quot;/&gt;</span>
<a href="#l17.301"></a><span id="l17.301" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_print&quot;</span>
<a href="#l17.302"></a><span id="l17.302" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav subviewbutton-iconic&quot;</span>
<a href="#l17.303"></a><span id="l17.303" class="difflineplus">+                       label=&quot;&amp;printButton.label;&quot;</span>
<a href="#l17.304"></a><span id="l17.304" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.305"></a><span id="l17.305" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-printView', this)&quot;/&gt;</span>
<a href="#l17.306"></a><span id="l17.306" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_saveAs&quot;</span>
<a href="#l17.307"></a><span id="l17.307" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.308"></a><span id="l17.308" class="difflineplus">+                       label=&quot;&amp;saveAsMenu.label;&quot;</span>
<a href="#l17.309"></a><span id="l17.309" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.310"></a><span id="l17.310" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-saveAsView', this)&quot;/&gt;</span>
<a href="#l17.311"></a><span id="l17.311" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_emptyTrash&quot;</span>
<a href="#l17.312"></a><span id="l17.312" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.313"></a><span id="l17.313" class="difflineplus">+                       label=&quot;&amp;emptyTrashCmd.label;&quot;</span>
<a href="#l17.314"></a><span id="l17.314" class="difflineplus">+                       command=&quot;cmd_emptyTrash&quot;/&gt;</span>
<a href="#l17.315"></a><span id="l17.315" class="difflineplus">+        &lt;toolbarseparator/&gt;</span>
<a href="#l17.316"></a><span id="l17.316" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_activityManager&quot;</span>
<a href="#l17.317"></a><span id="l17.317" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.318"></a><span id="l17.318" class="difflineplus">+                       label=&quot;&amp;activitymanager.label;&quot;</span>
<a href="#l17.319"></a><span id="l17.319" class="difflineplus">+                       oncommand=&quot;openActivityMgr();&quot;/&gt;</span>
<a href="#l17.320"></a><span id="l17.320" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_filters&quot;</span>
<a href="#l17.321"></a><span id="l17.321" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.322"></a><span id="l17.322" class="difflineplus">+                       label=&quot;&amp;filtersCmd2.label;&quot;</span>
<a href="#l17.323"></a><span id="l17.323" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.324"></a><span id="l17.324" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-filtersView', this)&quot;/&gt;</span>
<a href="#l17.325"></a><span id="l17.325" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_addons&quot;</span>
<a href="#l17.326"></a><span id="l17.326">                        class=&quot;subviewbutton subviewbutton-iconic subviewbutton-nav&quot;</span>
<a href="#l17.327"></a><span id="l17.327" class="difflineminus">-                       label=&quot;&amp;places.library.title;&quot;</span>
<a href="#l17.328"></a><span id="l17.328" class="difflineplus">+                       label=&quot;&amp;addons.label;&quot;</span>
<a href="#l17.329"></a><span id="l17.329" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.330"></a><span id="l17.330" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-addonsView', this)&quot;/&gt;</span>
<a href="#l17.331"></a><span id="l17.331" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_customize&quot;</span>
<a href="#l17.332"></a><span id="l17.332" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.333"></a><span id="l17.333" class="difflineplus">+#ifdef XP_WIN</span>
<a href="#l17.334"></a><span id="l17.334" class="difflineplus">+                       label=&quot;&amp;preferencesCmd2.label;&quot;</span>
<a href="#l17.335"></a><span id="l17.335" class="difflineplus">+#else</span>
<a href="#l17.336"></a><span id="l17.336" class="difflineplus">+                       label=&quot;&amp;preferencesCmdUnix.label;&quot;</span>
<a href="#l17.337"></a><span id="l17.337" class="difflineplus">+#endif</span>
<a href="#l17.338"></a><span id="l17.338" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.339"></a><span id="l17.339" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-preferencesView', this)&quot;/&gt;</span>
<a href="#l17.340"></a><span id="l17.340" class="difflineplus">+        &lt;toolbarseparator/&gt;</span>
<a href="#l17.341"></a><span id="l17.341" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_File&quot;</span>
<a href="#l17.342"></a><span id="l17.342" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.343"></a><span id="l17.343" class="difflineplus">+                       label=&quot;&amp;fileMenu.label;&quot;</span>
<a href="#l17.344"></a><span id="l17.344" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.345"></a><span id="l17.345" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-fileView', this)&quot;/&gt;</span>
<a href="#l17.346"></a><span id="l17.346" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_View&quot;</span>
<a href="#l17.347"></a><span id="l17.347" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.348"></a><span id="l17.348" class="difflineplus">+                       label=&quot;&amp;viewMenu.label;&quot;</span>
<a href="#l17.349"></a><span id="l17.349" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.350"></a><span id="l17.350" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-viewView', this)&quot;/&gt;</span>
<a href="#l17.351"></a><span id="l17.351" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_Go&quot;</span>
<a href="#l17.352"></a><span id="l17.352" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.353"></a><span id="l17.353" class="difflineplus">+                       label=&quot;&amp;goMenu.label;&quot;</span>
<a href="#l17.354"></a><span id="l17.354" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.355"></a><span id="l17.355" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-goView', this)&quot;/&gt;</span>
<a href="#l17.356"></a><span id="l17.356" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_messageMenu&quot;</span>
<a href="#l17.357"></a><span id="l17.357" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.358"></a><span id="l17.358" class="difflineplus">+                       label=&quot;&amp;msgMenu.label;&quot;</span>
<a href="#l17.359"></a><span id="l17.359" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.360"></a><span id="l17.360" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-messageView', this)&quot;/&gt;</span>
<a href="#l17.361"></a><span id="l17.361" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_tasksMenu&quot;</span>
<a href="#l17.362"></a><span id="l17.362" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.363"></a><span id="l17.363" class="difflineplus">+                       label=&quot;&amp;tasksMenu.label;&quot;</span>
<a href="#l17.364"></a><span id="l17.364" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.365"></a><span id="l17.365" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-toolsView', this)&quot;/&gt;</span>
<a href="#l17.366"></a><span id="l17.366" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_help&quot;</span>
<a href="#l17.367"></a><span id="l17.367" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.368"></a><span id="l17.368" class="difflineplus">+                       label=&quot;&amp;helpMenuWin.label;&quot;</span>
<a href="#l17.369"></a><span id="l17.369">                        closemenu=&quot;none&quot;</span>
<a href="#l17.370"></a><span id="l17.370" class="difflineminus">-                       oncommand=&quot;PanelUI.showSubView('appMenu-libraryView', this)&quot;/&gt;</span>
<a href="#l17.371"></a><span id="l17.371" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-logins-button&quot;</span>
<a href="#l17.372"></a><span id="l17.372" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-helpView', this)&quot;/&gt;</span>
<a href="#l17.373"></a><span id="l17.373" class="difflineplus">+</span>
<a href="#l17.374"></a><span id="l17.374" class="difflineplus">+        &lt;toolbarseparator/&gt;</span>
<a href="#l17.375"></a><span id="l17.375" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu-quit&quot;</span>
<a href="#l17.376"></a><span id="l17.376" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.377"></a><span id="l17.377" class="difflineplus">+#ifdef XP_WIN</span>
<a href="#l17.378"></a><span id="l17.378" class="difflineplus">+                       label=&quot;&amp;quitApplicationCmd.label;&quot;</span>
<a href="#l17.379"></a><span id="l17.379" class="difflineplus">+#else</span>
<a href="#l17.380"></a><span id="l17.380" class="difflineplus">+                       label=&quot;&amp;quitApplicationCmdUnix.label;&quot;</span>
<a href="#l17.381"></a><span id="l17.381" class="difflineplus">+#endif</span>
<a href="#l17.382"></a><span id="l17.382" class="difflineplus">+                       command=&quot;cmd_quit&quot;/&gt;</span>
<a href="#l17.383"></a><span id="l17.383" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.384"></a><span id="l17.384" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.385"></a><span id="l17.385" class="difflineplus">+</span>
<a href="#l17.386"></a><span id="l17.386" class="difflineplus">+    &lt;!-- New --&gt;</span>
<a href="#l17.387"></a><span id="l17.387" class="difflineplus">+    &lt;panelview id=&quot;appMenu-newView&quot;</span>
<a href="#l17.388"></a><span id="l17.388" class="difflineplus">+               title=&quot;&amp;newMenu.label;&quot;</span>
<a href="#l17.389"></a><span id="l17.389" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.390"></a><span id="l17.390" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.391"></a><span id="l17.391" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_newNewMsgCmd&quot;</span>
<a href="#l17.392"></a><span id="l17.392" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.393"></a><span id="l17.393" class="difflineplus">+                       label=&quot;&amp;newNewMsgCmd.label;&quot;</span>
<a href="#l17.394"></a><span id="l17.394" class="difflineplus">+                       key=&quot;key_newMessage2&quot;</span>
<a href="#l17.395"></a><span id="l17.395" class="difflineplus">+                       command=&quot;cmd_newMessage&quot;/&gt;</span>
<a href="#l17.396"></a><span id="l17.396" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_newFolder&quot;</span>
<a href="#l17.397"></a><span id="l17.397" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.398"></a><span id="l17.398" class="difflineplus">+                       label=&quot;&amp;newFolderCmd.label;&quot;</span>
<a href="#l17.399"></a><span id="l17.399" class="difflineplus">+                       command=&quot;cmd_newFolder&quot;/&gt;</span>
<a href="#l17.400"></a><span id="l17.400" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_newVirtualFolder&quot;</span>
<a href="#l17.401"></a><span id="l17.401" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.402"></a><span id="l17.402" class="difflineplus">+                       label=&quot;&amp;newVirtualFolderCmd.label;&quot;</span>
<a href="#l17.403"></a><span id="l17.403" class="difflineplus">+                       command=&quot;cmd_newVirtualFolder&quot;/&gt;</span>
<a href="#l17.404"></a><span id="l17.404" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_newAccountPopupMenuSeparator&quot;/&gt;</span>
<a href="#l17.405"></a><span id="l17.405" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_newCreateEmailAccountMenuItem&quot;</span>
<a href="#l17.406"></a><span id="l17.406" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.407"></a><span id="l17.407" class="difflineplus">+                       label=&quot;&amp;newCreateEmailAccountCmd.label;&quot;</span>
<a href="#l17.408"></a><span id="l17.408" class="difflineplus">+                       oncommand=&quot;NewMailAccountProvisioner(msgWindow);&quot;/&gt;</span>
<a href="#l17.409"></a><span id="l17.409" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_newMailAccountMenuItem&quot;</span>
<a href="#l17.410"></a><span id="l17.410" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.411"></a><span id="l17.411" class="difflineplus">+                       label=&quot;&amp;newExistingEmailAccountCmd.label;&quot;</span>
<a href="#l17.412"></a><span id="l17.412" class="difflineplus">+                       oncommand=&quot;NewMailAccount(msgWindow);&quot;/&gt;</span>
<a href="#l17.413"></a><span id="l17.413" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_newIMAccountMenuItem&quot;</span>
<a href="#l17.414"></a><span id="l17.414" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.415"></a><span id="l17.415" class="difflineplus">+                       label=&quot;&amp;newIMAccountCmd.label;&quot;</span>
<a href="#l17.416"></a><span id="l17.416" class="difflineplus">+                       oncommand=&quot;openIMAccountWizard();&quot;/&gt;</span>
<a href="#l17.417"></a><span id="l17.417" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_newFeedAccountMenuItem&quot;</span>
<a href="#l17.418"></a><span id="l17.418" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.419"></a><span id="l17.419" class="difflineplus">+                       label=&quot;&amp;newFeedAccountCmd.label;&quot;</span>
<a href="#l17.420"></a><span id="l17.420" class="difflineplus">+                       accesskey=&quot;&amp;newFeedAccountCmd.accesskey;&quot;</span>
<a href="#l17.421"></a><span id="l17.421" class="difflineplus">+                       oncommand=&quot;AddFeedAccount();&quot;/&gt;</span>
<a href="#l17.422"></a><span id="l17.422" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_newAccountMenuItem&quot;</span>
<a href="#l17.423"></a><span id="l17.423" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.424"></a><span id="l17.424" class="difflineplus">+                       label=&quot;&amp;newOtherAccountsCmd.label;&quot;</span>
<a href="#l17.425"></a><span id="l17.425" class="difflineplus">+                       oncommand=&quot;MsgAccountWizard();&quot;/&gt;</span>
<a href="#l17.426"></a><span id="l17.426" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_newPopupMenuSeparator&quot;/&gt;</span>
<a href="#l17.427"></a><span id="l17.427" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_newCard&quot;</span>
<a href="#l17.428"></a><span id="l17.428" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.429"></a><span id="l17.429" class="difflineplus">+                       label=&quot;&amp;appmenuNewContactCmd.label;&quot;</span>
<a href="#l17.430"></a><span id="l17.430" class="difflineplus">+                       command=&quot;cmd_newCard&quot;/&gt;</span>
<a href="#l17.431"></a><span id="l17.431" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_newIMContactMenuItem&quot;</span>
<a href="#l17.432"></a><span id="l17.432" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.433"></a><span id="l17.433" class="difflineplus">+                       label=&quot;&amp;newIMContactCmd.label;&quot;</span>
<a href="#l17.434"></a><span id="l17.434" class="difflineplus">+                       command=&quot;cmd_addChatBuddy&quot;/&gt;</span>
<a href="#l17.435"></a><span id="l17.435" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.436"></a><span id="l17.436" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.437"></a><span id="l17.437" class="difflineplus">+</span>
<a href="#l17.438"></a><span id="l17.438" class="difflineplus">+    &lt;!-- Attachments --&gt;</span>
<a href="#l17.439"></a><span id="l17.439" class="difflineplus">+    &lt;panelview id=&quot;appMenu-attachmentsView&quot;</span>
<a href="#l17.440"></a><span id="l17.440" class="difflineplus">+               title=&quot;&amp;openAttachmentListCmd.label;&quot;</span>
<a href="#l17.441"></a><span id="l17.441" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.442"></a><span id="l17.442" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.443"></a><span id="l17.443" class="difflineplus">+        &lt;!-- A toolbarbutton for each attachment is added here when this view is shown. --&gt;</span>
<a href="#l17.444"></a><span id="l17.444" class="difflineplus">+        &lt;toolbarseparator/&gt;</span>
<a href="#l17.445"></a><span id="l17.445" class="difflineplus">+        &lt;toolbarbutton label=&quot;&amp;openAllAttachmentsCmd.label;&quot;</span>
<a href="#l17.446"></a><span id="l17.446" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.447"></a><span id="l17.447" class="difflineplus">+                       accesskey=&quot;&amp;openAllAttachmentsCmd.accesskey;&quot;</span>
<a href="#l17.448"></a><span id="l17.448" class="difflineplus">+                       command=&quot;cmd_openAllAttachments&quot;/&gt;</span>
<a href="#l17.449"></a><span id="l17.449" class="difflineplus">+        &lt;toolbarbutton label=&quot;&amp;saveAllAttachmentsCmd.label;&quot;</span>
<a href="#l17.450"></a><span id="l17.450" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.451"></a><span id="l17.451" class="difflineplus">+                       accesskey=&quot;&amp;saveAllAttachmentsCmd.accesskey;&quot;</span>
<a href="#l17.452"></a><span id="l17.452" class="difflineplus">+                       command=&quot;cmd_saveAllAttachments&quot;/&gt;</span>
<a href="#l17.453"></a><span id="l17.453" class="difflineplus">+        &lt;toolbarbutton label=&quot;&amp;detachAllAttachmentsCmd.label;&quot;</span>
<a href="#l17.454"></a><span id="l17.454" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.455"></a><span id="l17.455" class="difflineplus">+                       accesskey=&quot;&amp;detachAllAttachmentsCmd.accesskey;&quot;</span>
<a href="#l17.456"></a><span id="l17.456" class="difflineplus">+                       command=&quot;cmd_detachAllAttachments&quot;/&gt;</span>
<a href="#l17.457"></a><span id="l17.457" class="difflineplus">+        &lt;toolbarbutton label=&quot;&amp;deleteAllAttachmentsCmd.label;&quot;</span>
<a href="#l17.458"></a><span id="l17.458">                        class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.459"></a><span id="l17.459" class="difflineminus">-                       label=&quot;&amp;logins.label;&quot;</span>
<a href="#l17.460"></a><span id="l17.460" class="difflineminus">-                       oncommand=&quot;LoginHelper.openPasswordManager(window, { entryPoint: 'mainmenu' })&quot;</span>
<a href="#l17.461"></a><span id="l17.461" class="difflineminus">-                       /&gt;</span>
<a href="#l17.462"></a><span id="l17.462" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-addons-button&quot;</span>
<a href="#l17.463"></a><span id="l17.463" class="difflineplus">+                       accesskey=&quot;&amp;deleteAllAttachmentsCmd.accesskey;&quot;</span>
<a href="#l17.464"></a><span id="l17.464" class="difflineplus">+                       command=&quot;cmd_deleteAllAttachments&quot;/&gt;</span>
<a href="#l17.465"></a><span id="l17.465" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.466"></a><span id="l17.466" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.467"></a><span id="l17.467" class="difflineplus">+</span>
<a href="#l17.468"></a><span id="l17.468" class="difflineplus">+    &lt;!-- Attachment (single attachment view) --&gt;</span>
<a href="#l17.469"></a><span id="l17.469" class="difflineplus">+    &lt;panelview id=&quot;appMenu-attachmentView&quot;</span>
<a href="#l17.470"></a><span id="l17.470" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.471"></a><span id="l17.471" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.472"></a><span id="l17.472" class="difflineplus">+        &lt;!-- toolbarbutton elements are added here when this view is shown (open, save, etc.). --&gt;</span>
<a href="#l17.473"></a><span id="l17.473" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.474"></a><span id="l17.474" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.475"></a><span id="l17.475" class="difflineplus">+</span>
<a href="#l17.476"></a><span id="l17.476" class="difflineplus">+    &lt;!-- Edit --&gt;</span>
<a href="#l17.477"></a><span id="l17.477" class="difflineplus">+    &lt;panelview id=&quot;appMenu-editView&quot;</span>
<a href="#l17.478"></a><span id="l17.478" class="difflineplus">+               title=&quot;&amp;appmenuEditMenu.label;&quot;</span>
<a href="#l17.479"></a><span id="l17.479" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.480"></a><span id="l17.480" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.481"></a><span id="l17.481" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu-editmenu-cut&quot;</span>
<a href="#l17.482"></a><span id="l17.482" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.483"></a><span id="l17.483" class="difflineplus">+                       label=&quot;&amp;cutCmd.label;&quot;</span>
<a href="#l17.484"></a><span id="l17.484" class="difflineplus">+                       key=&quot;key_cut&quot;</span>
<a href="#l17.485"></a><span id="l17.485" class="difflineplus">+                       command=&quot;cmd_cut&quot;/&gt;</span>
<a href="#l17.486"></a><span id="l17.486" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu-editmenu-copy&quot;</span>
<a href="#l17.487"></a><span id="l17.487" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.488"></a><span id="l17.488" class="difflineplus">+                       label=&quot;&amp;copyCmd.label;&quot;</span>
<a href="#l17.489"></a><span id="l17.489" class="difflineplus">+                       key=&quot;key_copy&quot;</span>
<a href="#l17.490"></a><span id="l17.490" class="difflineplus">+                       command=&quot;cmd_copy&quot;/&gt;</span>
<a href="#l17.491"></a><span id="l17.491" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu-editmenu-paste&quot;</span>
<a href="#l17.492"></a><span id="l17.492" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.493"></a><span id="l17.493" class="difflineplus">+                       label=&quot;&amp;pasteCmd.label;&quot;</span>
<a href="#l17.494"></a><span id="l17.494" class="difflineplus">+                       key=&quot;key_paste&quot;</span>
<a href="#l17.495"></a><span id="l17.495" class="difflineplus">+                       command=&quot;cmd_paste&quot;/&gt;</span>
<a href="#l17.496"></a><span id="l17.496" class="difflineplus">+        &lt;toolbarseparator/&gt;</span>
<a href="#l17.497"></a><span id="l17.497" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu-editmenu-undo&quot;</span>
<a href="#l17.498"></a><span id="l17.498" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.499"></a><span id="l17.499" class="difflineplus">+                       label=&quot;&amp;undoCmd.label;&quot;</span>
<a href="#l17.500"></a><span id="l17.500" class="difflineplus">+                       key=&quot;key_undo&quot;</span>
<a href="#l17.501"></a><span id="l17.501" class="difflineplus">+                       command=&quot;cmd_undo&quot;/&gt;</span>
<a href="#l17.502"></a><span id="l17.502" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu-editmenu-redo&quot;</span>
<a href="#l17.503"></a><span id="l17.503" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.504"></a><span id="l17.504" class="difflineplus">+                       label=&quot;&amp;redoCmd.label;&quot;</span>
<a href="#l17.505"></a><span id="l17.505" class="difflineplus">+                       key=&quot;key_redo&quot;</span>
<a href="#l17.506"></a><span id="l17.506" class="difflineplus">+                       command=&quot;cmd_redo&quot;/&gt;</span>
<a href="#l17.507"></a><span id="l17.507" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_messageAfterRedoEditSeparator&quot;/&gt;</span>
<a href="#l17.508"></a><span id="l17.508" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_delete&quot;</span>
<a href="#l17.509"></a><span id="l17.509" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.510"></a><span id="l17.510" class="difflineplus">+                       label=&quot;&amp;deleteCmd.label;&quot;</span>
<a href="#l17.511"></a><span id="l17.511" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l17.512"></a><span id="l17.512" class="difflineplus">+                       acceltext=&quot;&quot;</span>
<a href="#l17.513"></a><span id="l17.513" class="difflineplus">+#else</span>
<a href="#l17.514"></a><span id="l17.514" class="difflineplus">+                       key=&quot;key_delete&quot;</span>
<a href="#l17.515"></a><span id="l17.515" class="difflineplus">+#endif</span>
<a href="#l17.516"></a><span id="l17.516" class="difflineplus">+                       command=&quot;cmd_delete&quot;/&gt;</span>
<a href="#l17.517"></a><span id="l17.517" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_messageAfterDeleteEditSeparator&quot;/&gt;</span>
<a href="#l17.518"></a><span id="l17.518" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu-editmenu-selectAll&quot;</span>
<a href="#l17.519"></a><span id="l17.519" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.520"></a><span id="l17.520" class="difflineplus">+                       label=&quot;&amp;selectAllCmd.label;&quot;</span>
<a href="#l17.521"></a><span id="l17.521" class="difflineplus">+                       key=&quot;key_selectAll&quot;</span>
<a href="#l17.522"></a><span id="l17.522" class="difflineplus">+                       command=&quot;cmd_selectAll&quot;/&gt;</span>
<a href="#l17.523"></a><span id="l17.523" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_selectThread&quot;</span>
<a href="#l17.524"></a><span id="l17.524" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.525"></a><span id="l17.525" class="difflineplus">+                       label=&quot;&amp;appmenuSelectThread.label;&quot;</span>
<a href="#l17.526"></a><span id="l17.526" class="difflineplus">+                       key=&quot;key_selectThread&quot;</span>
<a href="#l17.527"></a><span id="l17.527" class="difflineplus">+                       command=&quot;cmd_selectThread&quot;/&gt;</span>
<a href="#l17.528"></a><span id="l17.528" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_selectFlagged&quot;</span>
<a href="#l17.529"></a><span id="l17.529" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.530"></a><span id="l17.530" class="difflineplus">+                       label=&quot;&amp;appmenuSelectFlagged.label;&quot;</span>
<a href="#l17.531"></a><span id="l17.531" class="difflineplus">+                       command=&quot;cmd_selectFlagged&quot;/&gt;</span>
<a href="#l17.532"></a><span id="l17.532" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.533"></a><span id="l17.533" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.534"></a><span id="l17.534" class="difflineplus">+</span>
<a href="#l17.535"></a><span id="l17.535" class="difflineplus">+    &lt;!-- Find --&gt;</span>
<a href="#l17.536"></a><span id="l17.536" class="difflineplus">+    &lt;panelview id=&quot;appMenu-findView&quot;</span>
<a href="#l17.537"></a><span id="l17.537" class="difflineplus">+               title=&quot;&amp;findMenu.label;&quot;</span>
<a href="#l17.538"></a><span id="l17.538" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.539"></a><span id="l17.539" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.540"></a><span id="l17.540" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_findCmd&quot;</span>
<a href="#l17.541"></a><span id="l17.541" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.542"></a><span id="l17.542" class="difflineplus">+                       label=&quot;&amp;findCmd.label;&quot;</span>
<a href="#l17.543"></a><span id="l17.543" class="difflineplus">+                       key=&quot;key_find&quot;</span>
<a href="#l17.544"></a><span id="l17.544" class="difflineplus">+                       command=&quot;cmd_find&quot;/&gt;</span>
<a href="#l17.545"></a><span id="l17.545" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_findAgainCmd&quot;</span>
<a href="#l17.546"></a><span id="l17.546" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.547"></a><span id="l17.547" class="difflineplus">+                       label=&quot;&amp;findAgainCmd.label;&quot;</span>
<a href="#l17.548"></a><span id="l17.548" class="difflineplus">+                       key=&quot;key_findAgain&quot;</span>
<a href="#l17.549"></a><span id="l17.549" class="difflineplus">+                       command=&quot;cmd_findAgain&quot;/&gt;</span>
<a href="#l17.550"></a><span id="l17.550" class="difflineplus">+        &lt;toolbarseparator id=&quot;appMenuAfterFindSeparator&quot;/&gt;</span>
<a href="#l17.551"></a><span id="l17.551" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_searchMailCmd&quot;</span>
<a href="#l17.552"></a><span id="l17.552" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.553"></a><span id="l17.553" class="difflineplus">+                       label=&quot;&amp;searchMailCmd.label;&quot;</span>
<a href="#l17.554"></a><span id="l17.554" class="difflineplus">+                       key=&quot;key_searchMail&quot;</span>
<a href="#l17.555"></a><span id="l17.555" class="difflineplus">+                       command=&quot;cmd_search&quot;/&gt;</span>
<a href="#l17.556"></a><span id="l17.556" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_searchAddressesCmd&quot;</span>
<a href="#l17.557"></a><span id="l17.557">                        class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.558"></a><span id="l17.558" class="difflineminus">-                       label=&quot;&amp;addons.label;&quot;</span>
<a href="#l17.559"></a><span id="l17.559" class="difflineminus">-                       key=&quot;key_openAddons&quot;</span>
<a href="#l17.560"></a><span id="l17.560" class="difflineminus">-                       command=&quot;Tools:Addons&quot;</span>
<a href="#l17.561"></a><span id="l17.561" class="difflineminus">-                       /&gt;</span>
<a href="#l17.562"></a><span id="l17.562" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-preferences-button&quot;</span>
<a href="#l17.563"></a><span id="l17.563" class="difflineplus">+                       label=&quot;&amp;searchAddressesCmd.label;&quot;</span>
<a href="#l17.564"></a><span id="l17.564" class="difflineplus">+                       oncommand=&quot;MsgSearchAddresses()&quot;/&gt;</span>
<a href="#l17.565"></a><span id="l17.565" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.566"></a><span id="l17.566" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.567"></a><span id="l17.567" class="difflineplus">+</span>
<a href="#l17.568"></a><span id="l17.568" class="difflineplus">+    &lt;!-- Print --&gt;</span>
<a href="#l17.569"></a><span id="l17.569" class="difflineplus">+    &lt;panelview id=&quot;appMenu-printView&quot;</span>
<a href="#l17.570"></a><span id="l17.570" class="difflineplus">+               title=&quot;&amp;printButton.label;&quot;</span>
<a href="#l17.571"></a><span id="l17.571" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.572"></a><span id="l17.572" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.573"></a><span id="l17.573" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_print_popup&quot;</span>
<a href="#l17.574"></a><span id="l17.574" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.575"></a><span id="l17.575" class="difflineplus">+                       label=&quot;&amp;printCmd.label;&quot;</span>
<a href="#l17.576"></a><span id="l17.576" class="difflineplus">+                       key=&quot;key_print&quot;</span>
<a href="#l17.577"></a><span id="l17.577" class="difflineplus">+                       command=&quot;cmd_print&quot;/&gt;</span>
<a href="#l17.578"></a><span id="l17.578" class="difflineplus">+#ifndef XP_MACOSX</span>
<a href="#l17.579"></a><span id="l17.579" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_printPreview&quot;</span>
<a href="#l17.580"></a><span id="l17.580" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.581"></a><span id="l17.581" class="difflineplus">+                       label=&quot;&amp;printPreviewCmd.label;&quot;</span>
<a href="#l17.582"></a><span id="l17.582" class="difflineplus">+                       command=&quot;cmd_printpreview&quot;/&gt;</span>
<a href="#l17.583"></a><span id="l17.583" class="difflineplus">+#endif</span>
<a href="#l17.584"></a><span id="l17.584" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_printSetup&quot;</span>
<a href="#l17.585"></a><span id="l17.585" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.586"></a><span id="l17.586" class="difflineplus">+                       label=&quot;&amp;printSetupCmd.label;&quot;</span>
<a href="#l17.587"></a><span id="l17.587" class="difflineplus">+                       command=&quot;cmd_printSetup&quot;/&gt;</span>
<a href="#l17.588"></a><span id="l17.588" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.589"></a><span id="l17.589" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.590"></a><span id="l17.590" class="difflineplus">+</span>
<a href="#l17.591"></a><span id="l17.591" class="difflineplus">+    &lt;!-- Save As --&gt;</span>
<a href="#l17.592"></a><span id="l17.592" class="difflineplus">+    &lt;panelview id=&quot;appMenu-saveAsView&quot;</span>
<a href="#l17.593"></a><span id="l17.593" class="difflineplus">+               title=&quot;&amp;saveAsMenu.label;&quot;</span>
<a href="#l17.594"></a><span id="l17.594" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.595"></a><span id="l17.595" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.596"></a><span id="l17.596" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_saveAsFile&quot;</span>
<a href="#l17.597"></a><span id="l17.597" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.598"></a><span id="l17.598" class="difflineplus">+                       label=&quot;&amp;saveAsFileCmd.label;&quot;</span>
<a href="#l17.599"></a><span id="l17.599" class="difflineplus">+                       key=&quot;key_saveAsFile&quot;</span>
<a href="#l17.600"></a><span id="l17.600" class="difflineplus">+                       command=&quot;cmd_saveAsFile&quot;/&gt;</span>
<a href="#l17.601"></a><span id="l17.601" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_saveAsTemplate&quot;</span>
<a href="#l17.602"></a><span id="l17.602" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.603"></a><span id="l17.603" class="difflineplus">+                       label=&quot;&amp;saveAsTemplateCmd.label;&quot;</span>
<a href="#l17.604"></a><span id="l17.604" class="difflineplus">+                       command=&quot;cmd_saveAsTemplate&quot;/&gt;</span>
<a href="#l17.605"></a><span id="l17.605" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.606"></a><span id="l17.606" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.607"></a><span id="l17.607" class="difflineplus">+</span>
<a href="#l17.608"></a><span id="l17.608" class="difflineplus">+    &lt;!-- Message Filters --&gt;</span>
<a href="#l17.609"></a><span id="l17.609" class="difflineplus">+    &lt;panelview id=&quot;appMenu-filtersView&quot;</span>
<a href="#l17.610"></a><span id="l17.610" class="difflineplus">+               title=&quot;&amp;filtersCmd2.label;&quot;</span>
<a href="#l17.611"></a><span id="l17.611" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.612"></a><span id="l17.612" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.613"></a><span id="l17.613" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_filtersCmd&quot;</span>
<a href="#l17.614"></a><span id="l17.614" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.615"></a><span id="l17.615" class="difflineplus">+                       label=&quot;&amp;filtersCmd2.label;&quot;</span>
<a href="#l17.616"></a><span id="l17.616" class="difflineplus">+                       command=&quot;cmd_displayMsgFilters&quot;/&gt;</span>
<a href="#l17.617"></a><span id="l17.617" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_applyFilters&quot;</span>
<a href="#l17.618"></a><span id="l17.618" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.619"></a><span id="l17.619" class="difflineplus">+                       label=&quot;&amp;filtersApply.label;&quot;</span>
<a href="#l17.620"></a><span id="l17.620" class="difflineplus">+                       command=&quot;cmd_applyFilters&quot;/&gt;</span>
<a href="#l17.621"></a><span id="l17.621" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_applyFiltersToSelection&quot;</span>
<a href="#l17.622"></a><span id="l17.622" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.623"></a><span id="l17.623" class="difflineplus">+                       label=&quot;&amp;filtersApplyToMessage.label;&quot;</span>
<a href="#l17.624"></a><span id="l17.624" class="difflineplus">+                       command=&quot;cmd_applyFiltersToSelection&quot;/&gt;</span>
<a href="#l17.625"></a><span id="l17.625" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.626"></a><span id="l17.626" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.627"></a><span id="l17.627" class="difflineplus">+</span>
<a href="#l17.628"></a><span id="l17.628" class="difflineplus">+    &lt;!-- Add-ons --&gt;</span>
<a href="#l17.629"></a><span id="l17.629" class="difflineplus">+    &lt;panelview id=&quot;appMenu-addonsView&quot;</span>
<a href="#l17.630"></a><span id="l17.630" class="difflineplus">+               title=&quot;&amp;addons.label;&quot;</span>
<a href="#l17.631"></a><span id="l17.631" class="difflineplus">+               class=&quot;PanelUI-subView&quot;</span>
<a href="#l17.632"></a><span id="l17.632" class="difflineplus">+               oncommand=&quot;openAddonPrefs(event.target.getAttribute('value'), event.target.getAttribute('optionsType'));&quot;&gt;</span>
<a href="#l17.633"></a><span id="l17.633" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.634"></a><span id="l17.634" class="difflineplus">+        &lt;toolbarbutton label=&quot;&amp;addons.label;&quot;</span>
<a href="#l17.635"></a><span id="l17.635" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.636"></a><span id="l17.636" class="difflineplus">+                       oncommand=&quot;openAddonsMgr(); event.stopPropagation();&quot;/&gt;</span>
<a href="#l17.637"></a><span id="l17.637" class="difflineplus">+        &lt;toolbarseparator class=&quot;appmenu-menuseparator&quot;/&gt;</span>
<a href="#l17.638"></a><span id="l17.638" class="difflineplus">+        &lt;label</span>
<a href="#l17.639"></a><span id="l17.639" class="difflineplus">+#ifdef XP_UNIX</span>
<a href="#l17.640"></a><span id="l17.640" class="difflineplus">+               value=&quot;&amp;addonPrefsUnix.label;&quot;</span>
<a href="#l17.641"></a><span id="l17.641" class="difflineplus">+#else</span>
<a href="#l17.642"></a><span id="l17.642" class="difflineplus">+               value=&quot;&amp;addonPrefs.label;&quot;</span>
<a href="#l17.643"></a><span id="l17.643" class="difflineplus">+#endif</span>
<a href="#l17.644"></a><span id="l17.644" class="difflineplus">+               class=&quot;subview-subheader&quot;/&gt;</span>
<a href="#l17.645"></a><span id="l17.645" class="difflineplus">+        &lt;!-- This message is shown when there are no addon items to show. --&gt;</span>
<a href="#l17.646"></a><span id="l17.646" class="difflineplus">+        &lt;toolbarbutton label=&quot;&amp;addonNoPrefs.label;&quot;</span>
<a href="#l17.647"></a><span id="l17.647" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.648"></a><span id="l17.648" class="difflineplus">+                       disabled=&quot;true&quot;/&gt;</span>
<a href="#l17.649"></a><span id="l17.649" class="difflineplus">+        &lt;!-- One toolbarbutton per addon that has prefs is added here when the</span>
<a href="#l17.650"></a><span id="l17.650" class="difflineplus">+             view is shown. --&gt;</span>
<a href="#l17.651"></a><span id="l17.651" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.652"></a><span id="l17.652" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.653"></a><span id="l17.653" class="difflineplus">+</span>
<a href="#l17.654"></a><span id="l17.654" class="difflineplus">+    &lt;!-- Preferences --&gt;</span>
<a href="#l17.655"></a><span id="l17.655" class="difflineplus">+    &lt;panelview id=&quot;appMenu-preferencesView&quot;</span>
<a href="#l17.656"></a><span id="l17.656" class="difflineplus">+#ifdef XP_WIN</span>
<a href="#l17.657"></a><span id="l17.657" class="difflineplus">+               title=&quot;&amp;preferencesCmd2.label;&quot;</span>
<a href="#l17.658"></a><span id="l17.658" class="difflineplus">+#else</span>
<a href="#l17.659"></a><span id="l17.659" class="difflineplus">+               title=&quot;&amp;preferencesCmdUnix.label;&quot;</span>
<a href="#l17.660"></a><span id="l17.660" class="difflineplus">+#endif</span>
<a href="#l17.661"></a><span id="l17.661" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.662"></a><span id="l17.662" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.663"></a><span id="l17.663" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_preferences&quot;</span>
<a href="#l17.664"></a><span id="l17.664">                        class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.665"></a><span id="l17.665"> #ifdef XP_WIN</span>
<a href="#l17.666"></a><span id="l17.666">                        label=&quot;&amp;preferencesCmd2.label;&quot;</span>
<a href="#l17.667"></a><span id="l17.667"> #else</span>
<a href="#l17.668"></a><span id="l17.668">                        label=&quot;&amp;preferencesCmdUnix.label;&quot;</span>
<a href="#l17.669"></a><span id="l17.669" class="difflineminus">-#ifdef XP_MACOSX</span>
<a href="#l17.670"></a><span id="l17.670" class="difflineminus">-                       key=&quot;key_preferencesCmdMac&quot;</span>
<a href="#l17.671"></a><span id="l17.671"> #endif</span>
<a href="#l17.672"></a><span id="l17.672" class="difflineminus">-#endif</span>
<a href="#l17.673"></a><span id="l17.673" class="difflineminus">-                       oncommand=&quot;openPreferences()&quot;</span>
<a href="#l17.674"></a><span id="l17.674" class="difflineminus">-                       /&gt;</span>
<a href="#l17.675"></a><span id="l17.675" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-customize-button&quot;</span>
<a href="#l17.676"></a><span id="l17.676" class="difflineplus">+                       oncommand=&quot;openOptionsDialog();&quot;/&gt;</span>
<a href="#l17.677"></a><span id="l17.677" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_accountmgr&quot;</span>
<a href="#l17.678"></a><span id="l17.678">                        class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.679"></a><span id="l17.679" class="difflineminus">-                       label=&quot;&amp;viewCustomizeToolbar.label;&quot;</span>
<a href="#l17.680"></a><span id="l17.680" class="difflineminus">-                       command=&quot;cmd_CustomizeToolbars&quot;</span>
<a href="#l17.681"></a><span id="l17.681" class="difflineminus">-                       /&gt;</span>
<a href="#l17.682"></a><span id="l17.682" class="difflineplus">+                       label=&quot;&amp;accountManagerCmd2.label;&quot;</span>
<a href="#l17.683"></a><span id="l17.683" class="difflineplus">+                       oncommand=&quot;MsgAccountManager(null);&quot;/&gt;</span>
<a href="#l17.684"></a><span id="l17.684">         &lt;toolbarseparator/&gt;</span>
<a href="#l17.685"></a><span id="l17.685" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-open-file-button&quot;</span>
<a href="#l17.686"></a><span id="l17.686" class="difflineminus">-                       class=&quot;subviewbutton&quot;</span>
<a href="#l17.687"></a><span id="l17.687" class="difflineminus">-                       label=&quot;&amp;openFileCmd.label;&quot;</span>
<a href="#l17.688"></a><span id="l17.688" class="difflineminus">-                       key=&quot;openFileKb&quot;</span>
<a href="#l17.689"></a><span id="l17.689" class="difflineminus">-                       command=&quot;Browser:OpenFile&quot;</span>
<a href="#l17.690"></a><span id="l17.690" class="difflineminus">-                       /&gt;</span>
<a href="#l17.691"></a><span id="l17.691" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-save-file-button&quot;</span>
<a href="#l17.692"></a><span id="l17.692" class="difflineminus">-                       class=&quot;subviewbutton&quot;</span>
<a href="#l17.693"></a><span id="l17.693" class="difflineminus">-                       label=&quot;&amp;savePageCmd.label;&quot;</span>
<a href="#l17.694"></a><span id="l17.694" class="difflineminus">-                       key=&quot;key_savePage&quot;</span>
<a href="#l17.695"></a><span id="l17.695" class="difflineminus">-                       command=&quot;Browser:SavePage&quot;</span>
<a href="#l17.696"></a><span id="l17.696" class="difflineminus">-                       /&gt;</span>
<a href="#l17.697"></a><span id="l17.697" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-print-button&quot;</span>
<a href="#l17.698"></a><span id="l17.698" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_quickFilterBar&quot;</span>
<a href="#l17.699"></a><span id="l17.699" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.700"></a><span id="l17.700" class="difflineplus">+                       type=&quot;checkbox&quot;</span>
<a href="#l17.701"></a><span id="l17.701" class="difflineplus">+                       label=&quot;&amp;quickFilterBar.toggleBarVisibility.appmenu.label;&quot;</span>
<a href="#l17.702"></a><span id="l17.702" class="difflineplus">+                       command=&quot;cmd_toggleQuickFilterBar&quot;&gt;</span>
<a href="#l17.703"></a><span id="l17.703" class="difflineplus">+          &lt;observes element=&quot;view_toolbars_popup_quickFilterBar&quot;</span>
<a href="#l17.704"></a><span id="l17.704" class="difflineplus">+                    attribute=&quot;checked&quot;/&gt;</span>
<a href="#l17.705"></a><span id="l17.705" class="difflineplus">+        &lt;/toolbarbutton&gt;</span>
<a href="#l17.706"></a><span id="l17.706" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_showStatusbar&quot;</span>
<a href="#l17.707"></a><span id="l17.707" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.708"></a><span id="l17.708" class="difflineplus">+                       type=&quot;checkbox&quot;</span>
<a href="#l17.709"></a><span id="l17.709" class="difflineplus">+                       label=&quot;&amp;showTaskbarCmd.label;&quot;</span>
<a href="#l17.710"></a><span id="l17.710" class="difflineplus">+                       oncommand=&quot;goToggleToolbar('status-bar', 'menu_showTaskbar')&quot;</span>
<a href="#l17.711"></a><span id="l17.711" class="difflineplus">+                       checked=&quot;true&quot;</span>
<a href="#l17.712"></a><span id="l17.712" class="difflineplus">+                       observes=&quot;menu_showTaskbar&quot;/&gt;</span>
<a href="#l17.713"></a><span id="l17.713" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_toggleToolbarsSeparator&quot;/&gt;</span>
<a href="#l17.714"></a><span id="l17.714" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_toolbarLayout&quot;</span>
<a href="#l17.715"></a><span id="l17.715" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.716"></a><span id="l17.716" class="difflineplus">+                       label=&quot;&amp;appmenuToolbarLayout.label;&quot;</span>
<a href="#l17.717"></a><span id="l17.717" class="difflineplus">+                       command=&quot;cmd_CustomizeMailToolbar&quot;/&gt;</span>
<a href="#l17.718"></a><span id="l17.718" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_paneViewSeparator&quot;/&gt;</span>
<a href="#l17.719"></a><span id="l17.719" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_MessagePaneLayout&quot;</span>
<a href="#l17.720"></a><span id="l17.720" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.721"></a><span id="l17.721" class="difflineplus">+                       label=&quot;&amp;messagePaneLayoutStyle.label;&quot;</span>
<a href="#l17.722"></a><span id="l17.722" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.723"></a><span id="l17.723" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-preferencesLayoutView', this)&quot;/&gt;</span>
<a href="#l17.724"></a><span id="l17.724" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.725"></a><span id="l17.725" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.726"></a><span id="l17.726" class="difflineplus">+</span>
<a href="#l17.727"></a><span id="l17.727" class="difflineplus">+    &lt;!-- Preferences / Layout --&gt;</span>
<a href="#l17.728"></a><span id="l17.728" class="difflineplus">+    &lt;panelview id=&quot;appMenu-preferencesLayoutView&quot;</span>
<a href="#l17.729"></a><span id="l17.729" class="difflineplus">+               title=&quot;&amp;messagePaneLayoutStyle.label;&quot;</span>
<a href="#l17.730"></a><span id="l17.730" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.731"></a><span id="l17.731" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.732"></a><span id="l17.732" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_messagePaneClassic&quot;</span>
<a href="#l17.733"></a><span id="l17.733" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.734"></a><span id="l17.734" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.735"></a><span id="l17.735" class="difflineplus">+                       label=&quot;&amp;messagePaneClassic.label;&quot;</span>
<a href="#l17.736"></a><span id="l17.736" class="difflineplus">+                       name=&quot;viewlayoutgroup&quot;</span>
<a href="#l17.737"></a><span id="l17.737" class="difflineplus">+                       command=&quot;cmd_viewClassicMailLayout&quot;/&gt;</span>
<a href="#l17.738"></a><span id="l17.738" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_messagePaneWide&quot;</span>
<a href="#l17.739"></a><span id="l17.739" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.740"></a><span id="l17.740" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.741"></a><span id="l17.741" class="difflineplus">+                       label=&quot;&amp;messagePaneWide.label;&quot;</span>
<a href="#l17.742"></a><span id="l17.742" class="difflineplus">+                       name=&quot;viewlayoutgroup&quot;</span>
<a href="#l17.743"></a><span id="l17.743" class="difflineplus">+                       command=&quot;cmd_viewWideMailLayout&quot;/&gt;</span>
<a href="#l17.744"></a><span id="l17.744" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_messagePaneVertical&quot;</span>
<a href="#l17.745"></a><span id="l17.745" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.746"></a><span id="l17.746" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.747"></a><span id="l17.747" class="difflineplus">+                       label=&quot;&amp;messagePaneVertical.label;&quot;</span>
<a href="#l17.748"></a><span id="l17.748" class="difflineplus">+                       name=&quot;viewlayoutgroup&quot;</span>
<a href="#l17.749"></a><span id="l17.749" class="difflineplus">+                       command=&quot;cmd_viewVerticalMailLayout&quot;/&gt;</span>
<a href="#l17.750"></a><span id="l17.750" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_viewMenuAfterPaneVerticalSeparator&quot;/&gt;</span>
<a href="#l17.751"></a><span id="l17.751" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_showFolderPane&quot;</span>
<a href="#l17.752"></a><span id="l17.752" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.753"></a><span id="l17.753" class="difflineplus">+                       type=&quot;checkbox&quot;</span>
<a href="#l17.754"></a><span id="l17.754" class="difflineplus">+                       label=&quot;&amp;showFolderPaneCmd.label;&quot;</span>
<a href="#l17.755"></a><span id="l17.755" class="difflineplus">+                       command=&quot;cmd_toggleFolderPane&quot;/&gt;</span>
<a href="#l17.756"></a><span id="l17.756" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_showFolderPaneCols&quot;</span>
<a href="#l17.757"></a><span id="l17.757" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.758"></a><span id="l17.758" class="difflineplus">+                       type=&quot;checkbox&quot;</span>
<a href="#l17.759"></a><span id="l17.759" class="difflineplus">+                       label=&quot;&amp;showFolderPaneColsCmd.label;&quot;</span>
<a href="#l17.760"></a><span id="l17.760" class="difflineplus">+                       command=&quot;cmd_toggleFolderPaneCols&quot;/&gt;</span>
<a href="#l17.761"></a><span id="l17.761" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_showMessage&quot;</span>
<a href="#l17.762"></a><span id="l17.762" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.763"></a><span id="l17.763" class="difflineplus">+                       type=&quot;checkbox&quot;</span>
<a href="#l17.764"></a><span id="l17.764" class="difflineplus">+                       label=&quot;&amp;showMessageCmd.label;&quot;</span>
<a href="#l17.765"></a><span id="l17.765" class="difflineplus">+                       key=&quot;key_toggleMessagePane&quot;</span>
<a href="#l17.766"></a><span id="l17.766" class="difflineplus">+                       command=&quot;cmd_toggleMessagePane&quot;/&gt;</span>
<a href="#l17.767"></a><span id="l17.767" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.768"></a><span id="l17.768" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.769"></a><span id="l17.769" class="difflineplus">+</span>
<a href="#l17.770"></a><span id="l17.770" class="difflineplus">+    &lt;!-- File --&gt;</span>
<a href="#l17.771"></a><span id="l17.771" class="difflineplus">+    &lt;panelview id=&quot;appMenu-fileView&quot;</span>
<a href="#l17.772"></a><span id="l17.772" class="difflineplus">+               title=&quot;&amp;fileMenu.label;&quot;</span>
<a href="#l17.773"></a><span id="l17.773" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.774"></a><span id="l17.774" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.775"></a><span id="l17.775" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_openMessageFileMenuitem&quot;</span>
<a href="#l17.776"></a><span id="l17.776" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.777"></a><span id="l17.777" class="difflineplus">+                       label=&quot;&amp;openMessageFileCmd.label;&quot;</span>
<a href="#l17.778"></a><span id="l17.778" class="difflineplus">+                       oncommand=&quot;MsgOpenFromFile();&quot;/&gt;</span>
<a href="#l17.779"></a><span id="l17.779" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_close&quot;</span>
<a href="#l17.780"></a><span id="l17.780" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.781"></a><span id="l17.781" class="difflineplus">+                       label=&quot;&amp;closeCmd.label;&quot;</span>
<a href="#l17.782"></a><span id="l17.782" class="difflineplus">+                       key=&quot;key_close&quot;</span>
<a href="#l17.783"></a><span id="l17.783" class="difflineplus">+                       command=&quot;cmd_close&quot;/&gt;</span>
<a href="#l17.784"></a><span id="l17.784" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_fileMenuAfterCloseSeparator&quot;/&gt;</span>
<a href="#l17.785"></a><span id="l17.785" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_getNewMsgFor&quot;</span>
<a href="#l17.786"></a><span id="l17.786" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.787"></a><span id="l17.787" class="difflineplus">+                       label=&quot;&amp;getNewMsgForCmd.label;&quot;</span>
<a href="#l17.788"></a><span id="l17.788" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.789"></a><span id="l17.789" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-fileGetNewMsgForView', this)&quot;/&gt;</span>
<a href="#l17.790"></a><span id="l17.790" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_getNextNMsgs&quot;</span>
<a href="#l17.791"></a><span id="l17.791" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.792"></a><span id="l17.792" class="difflineplus">+                       label=&quot;&amp;getNextNMsgCmd2.label;&quot;</span>
<a href="#l17.793"></a><span id="l17.793" class="difflineplus">+                       command=&quot;cmd_getNextNMessages&quot;/&gt;</span>
<a href="#l17.794"></a><span id="l17.794" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sendUnsentMsgs&quot;</span>
<a href="#l17.795"></a><span id="l17.795" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.796"></a><span id="l17.796" class="difflineplus">+                       label=&quot;&amp;sendUnsentCmd.label;&quot;</span>
<a href="#l17.797"></a><span id="l17.797" class="difflineplus">+                       command=&quot;cmd_sendUnsentMsgs&quot;/&gt;</span>
<a href="#l17.798"></a><span id="l17.798" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_subscribe&quot;</span>
<a href="#l17.799"></a><span id="l17.799" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.800"></a><span id="l17.800" class="difflineplus">+                       label=&quot;&amp;subscribeCmd.label;&quot;</span>
<a href="#l17.801"></a><span id="l17.801" class="difflineplus">+                       command=&quot;cmd_subscribe&quot;/&gt;</span>
<a href="#l17.802"></a><span id="l17.802" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_fileMenuAfterSubscribeSeparator&quot;/&gt;</span>
<a href="#l17.803"></a><span id="l17.803" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_deleteFolder&quot;</span>
<a href="#l17.804"></a><span id="l17.804" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.805"></a><span id="l17.805" class="difflineplus">+                       label=&quot;&amp;deleteFolder.label;&quot;</span>
<a href="#l17.806"></a><span id="l17.806" class="difflineplus">+                       command=&quot;cmd_deleteFolder&quot;/&gt;</span>
<a href="#l17.807"></a><span id="l17.807" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_renameFolder&quot;</span>
<a href="#l17.808"></a><span id="l17.808" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.809"></a><span id="l17.809" class="difflineplus">+                       label=&quot;&amp;renameFolder.label;&quot;</span>
<a href="#l17.810"></a><span id="l17.810" class="difflineplus">+                       key=&quot;key_renameFolder&quot;</span>
<a href="#l17.811"></a><span id="l17.811" class="difflineplus">+                       command=&quot;cmd_renameFolder&quot;/&gt;</span>
<a href="#l17.812"></a><span id="l17.812" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_fileMenuAfterRenameSeparator&quot;/&gt;</span>
<a href="#l17.813"></a><span id="l17.813" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_compactFolder&quot;</span>
<a href="#l17.814"></a><span id="l17.814">                        class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.815"></a><span id="l17.815" class="difflineminus">-                       label=&quot;&amp;printCmd.label;&quot;</span>
<a href="#l17.816"></a><span id="l17.816" class="difflineminus">-#ifdef XP_MACOSX</span>
<a href="#l17.817"></a><span id="l17.817" class="difflineminus">-                       key=&quot;printKb&quot;</span>
<a href="#l17.818"></a><span id="l17.818" class="difflineminus">-                       command=&quot;cmd_print&quot;</span>
<a href="#l17.819"></a><span id="l17.819" class="difflineminus">-#else</span>
<a href="#l17.820"></a><span id="l17.820" class="difflineminus">-                       command=&quot;cmd_printPreview&quot;</span>
<a href="#l17.821"></a><span id="l17.821" class="difflineminus">-#endif</span>
<a href="#l17.822"></a><span id="l17.822" class="difflineminus">-                       /&gt;</span>
<a href="#l17.823"></a><span id="l17.823" class="difflineminus">-        &lt;toolbarseparator/&gt;</span>
<a href="#l17.824"></a><span id="l17.824" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-find-button&quot;</span>
<a href="#l17.825"></a><span id="l17.825" class="difflineminus">-                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.826"></a><span id="l17.826" class="difflineminus">-                       label=&quot;&amp;findOnCmd.label;&quot;</span>
<a href="#l17.827"></a><span id="l17.827" class="difflineminus">-                       key=&quot;key_find&quot;</span>
<a href="#l17.828"></a><span id="l17.828" class="difflineminus">-                       command=&quot;cmd_find&quot;/&gt;</span>
<a href="#l17.829"></a><span id="l17.829" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-more-button&quot;</span>
<a href="#l17.830"></a><span id="l17.830" class="difflineminus">-                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.831"></a><span id="l17.831" class="difflineminus">-                       label=&quot;&amp;moreMenu.label;&quot;</span>
<a href="#l17.832"></a><span id="l17.832" class="difflineminus">-                       closemenu=&quot;none&quot;</span>
<a href="#l17.833"></a><span id="l17.833" class="difflineminus">-                       oncommand=&quot;PanelUI.showSubView('appMenu-moreView', this)&quot;/&gt;</span>
<a href="#l17.834"></a><span id="l17.834" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-developer-button&quot;</span>
<a href="#l17.835"></a><span id="l17.835" class="difflineplus">+                       label=&quot;&amp;compactFolders.label;&quot;</span>
<a href="#l17.836"></a><span id="l17.836" class="difflineplus">+                       command=&quot;cmd_compactFolder&quot;/&gt;</span>
<a href="#l17.837"></a><span id="l17.837" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_fileMenuAfterCompactSeparator&quot;/&gt;</span>
<a href="#l17.838"></a><span id="l17.838" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_offline&quot;</span>
<a href="#l17.839"></a><span id="l17.839">                        class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.840"></a><span id="l17.840" class="difflineminus">-                       label=&quot;&amp;webDeveloperMenu.label;&quot;</span>
<a href="#l17.841"></a><span id="l17.841" class="difflineminus">-                       closemenu=&quot;none&quot;</span>
<a href="#l17.842"></a><span id="l17.842" class="difflineminus">-                       oncommand=&quot;PanelUI.showSubView('PanelUI-developer', this)&quot;/&gt;</span>
<a href="#l17.843"></a><span id="l17.843" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-help-button&quot;</span>
<a href="#l17.844"></a><span id="l17.844" class="difflineminus">-                       class=&quot;subviewbutton subviewbutton-iconic subviewbutton-nav&quot;</span>
<a href="#l17.845"></a><span id="l17.845" class="difflineminus">-                       label=&quot;&amp;appMenuHelp.label;&quot;</span>
<a href="#l17.846"></a><span id="l17.846" class="difflineplus">+                       label=&quot;&amp;offlineMenu.label;&quot;</span>
<a href="#l17.847"></a><span id="l17.847">                        closemenu=&quot;none&quot;</span>
<a href="#l17.848"></a><span id="l17.848" class="difflineminus">-                       oncommand=&quot;PanelUI.showSubView('PanelUI-helpView', this)&quot;/&gt;</span>
<a href="#l17.849"></a><span id="l17.849" class="difflineminus">-#ifndef XP_MACOSX</span>
<a href="#l17.850"></a><span id="l17.850" class="difflineminus">-        &lt;toolbarseparator/&gt;</span>
<a href="#l17.851"></a><span id="l17.851" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-quit-button&quot;</span>
<a href="#l17.852"></a><span id="l17.852" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-fileOfflineView', this)&quot;/&gt;</span>
<a href="#l17.853"></a><span id="l17.853" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.854"></a><span id="l17.854" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.855"></a><span id="l17.855" class="difflineplus">+</span>
<a href="#l17.856"></a><span id="l17.856" class="difflineplus">+    &lt;!-- File / Get New Message For --&gt;</span>
<a href="#l17.857"></a><span id="l17.857" class="difflineplus">+    &lt;panelview id=&quot;appMenu-fileGetNewMsgForView&quot;</span>
<a href="#l17.858"></a><span id="l17.858" class="difflineplus">+               title=&quot;&amp;getNewMsgForCmd.label;&quot;</span>
<a href="#l17.859"></a><span id="l17.859" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.860"></a><span id="l17.860" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.861"></a><span id="l17.861" class="difflineplus">+        &lt;!-- TODO appmenu dynamically populate account items here</span>
<a href="#l17.862"></a><span id="l17.862" class="difflineplus">+             Once dynamic folders subviews work, use these commented</span>
<a href="#l17.863"></a><span id="l17.863" class="difflineplus">+             toolbarbuttons in place of the &lt;menu&gt; below. --&gt;</span>
<a href="#l17.864"></a><span id="l17.864" class="difflineplus">+        &lt;!-- &lt;toolbarbutton id=&quot;appmenu_getnewmsgs_all_accounts&quot;</span>
<a href="#l17.865"></a><span id="l17.865" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.866"></a><span id="l17.866" class="difflineplus">+                       label=&quot;&amp;getAllNewMsgCmdPopupMenu.label;&quot;</span>
<a href="#l17.867"></a><span id="l17.867" class="difflineplus">+                       key=&quot;key_getAllNewMessages&quot;</span>
<a href="#l17.868"></a><span id="l17.868" class="difflineplus">+                       command=&quot;cmd_getMsgsForAuthAccounts&quot;/&gt;</span>
<a href="#l17.869"></a><span id="l17.869" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_getnewmsgs_current_account&quot;</span>
<a href="#l17.870"></a><span id="l17.870" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.871"></a><span id="l17.871" class="difflineplus">+                       label=&quot;&amp;getNewMsgCurrentAccountCmdPopupMenu.label;&quot;</span>
<a href="#l17.872"></a><span id="l17.872" class="difflineplus">+                       key=&quot;key_getNewMessages&quot;</span>
<a href="#l17.873"></a><span id="l17.873" class="difflineplus">+                       command=&quot;cmd_getNewMessages&quot;/&gt;</span>
<a href="#l17.874"></a><span id="l17.874" class="difflineplus">+        &lt;toolbarseparator/&gt; --&gt;</span>
<a href="#l17.875"></a><span id="l17.875" class="difflineplus">+        &lt;menu id=&quot;appmenu_getNewMsgFor&quot;</span>
<a href="#l17.876"></a><span id="l17.876" class="difflineplus">+              label=&quot;&amp;getNewMsgForCmd.label;&quot;</span>
<a href="#l17.877"></a><span id="l17.877" class="difflineplus">+              oncommand=&quot;MsgGetMessagesForAccount();&quot;&gt;</span>
<a href="#l17.878"></a><span id="l17.878" class="difflineplus">+          &lt;menupopup is=&quot;folder-menupopup&quot;</span>
<a href="#l17.879"></a><span id="l17.879" class="difflineplus">+                      mode=&quot;getMail&quot;</span>
<a href="#l17.880"></a><span id="l17.880" class="difflineplus">+                      id=&quot;appmenu_getAllNewMsgPopup&quot;</span>
<a href="#l17.881"></a><span id="l17.881" class="difflineplus">+                      expandFolders=&quot;false&quot;</span>
<a href="#l17.882"></a><span id="l17.882" class="difflineplus">+                      oncommand=&quot;MsgGetMessagesForAccount(event.target._folder); event.stopPropagation();&quot;&gt;</span>
<a href="#l17.883"></a><span id="l17.883" class="difflineplus">+            &lt;menuitem id=&quot;appmenu_getnewmsgs_all_accounts&quot;</span>
<a href="#l17.884"></a><span id="l17.884" class="difflineplus">+                      label=&quot;&amp;getAllNewMsgCmdPopupMenu.label;&quot;</span>
<a href="#l17.885"></a><span id="l17.885" class="difflineplus">+                      key=&quot;key_getAllNewMessages&quot;</span>
<a href="#l17.886"></a><span id="l17.886" class="difflineplus">+                      command=&quot;cmd_getMsgsForAuthAccounts&quot;/&gt;</span>
<a href="#l17.887"></a><span id="l17.887" class="difflineplus">+            &lt;menuitem id=&quot;appmenu_getnewmsgs_current_account&quot;</span>
<a href="#l17.888"></a><span id="l17.888" class="difflineplus">+                      label=&quot;&amp;getNewMsgCurrentAccountCmdPopupMenu.label;&quot;</span>
<a href="#l17.889"></a><span id="l17.889" class="difflineplus">+                      key=&quot;key_getNewMessages&quot;</span>
<a href="#l17.890"></a><span id="l17.890" class="difflineplus">+                      command=&quot;cmd_getNewMessages&quot;/&gt;</span>
<a href="#l17.891"></a><span id="l17.891" class="difflineplus">+            &lt;menuseparator/&gt;</span>
<a href="#l17.892"></a><span id="l17.892" class="difflineplus">+          &lt;/menupopup&gt;</span>
<a href="#l17.893"></a><span id="l17.893" class="difflineplus">+        &lt;/menu&gt;</span>
<a href="#l17.894"></a><span id="l17.894" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.895"></a><span id="l17.895" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.896"></a><span id="l17.896" class="difflineplus">+</span>
<a href="#l17.897"></a><span id="l17.897" class="difflineplus">+    &lt;!-- File / Offline --&gt;</span>
<a href="#l17.898"></a><span id="l17.898" class="difflineplus">+    &lt;panelview id=&quot;appMenu-fileOfflineView&quot;</span>
<a href="#l17.899"></a><span id="l17.899" class="difflineplus">+               title=&quot;&amp;offlineMenu.label;&quot;</span>
<a href="#l17.900"></a><span id="l17.900" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.901"></a><span id="l17.901" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.902"></a><span id="l17.902" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_goOffline&quot;</span>
<a href="#l17.903"></a><span id="l17.903" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.904"></a><span id="l17.904" class="difflineplus">+                       type=&quot;checkbox&quot;</span>
<a href="#l17.905"></a><span id="l17.905" class="difflineplus">+                       label=&quot;&amp;offlineGoOfflineCmd.label;&quot;</span>
<a href="#l17.906"></a><span id="l17.906" class="difflineplus">+                       oncommand=&quot;MailOfflineMgr.toggleOfflineStatus();&quot;/&gt;</span>
<a href="#l17.907"></a><span id="l17.907" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_offlineMenuAfterGoSeparator&quot;/&gt;</span>
<a href="#l17.908"></a><span id="l17.908" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_synchronizeOffline&quot;</span>
<a href="#l17.909"></a><span id="l17.909" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.910"></a><span id="l17.910" class="difflineplus">+                       label=&quot;&amp;synchronizeOfflineCmd.label;&quot;</span>
<a href="#l17.911"></a><span id="l17.911" class="difflineplus">+                       command=&quot;cmd_synchronizeOffline&quot;/&gt;</span>
<a href="#l17.912"></a><span id="l17.912" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_settingsOffline&quot;</span>
<a href="#l17.913"></a><span id="l17.913" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.914"></a><span id="l17.914" class="difflineplus">+                       label=&quot;&amp;settingsOfflineCmd2.label;&quot;</span>
<a href="#l17.915"></a><span id="l17.915" class="difflineplus">+                       command=&quot;cmd_settingsOffline&quot;/&gt;</span>
<a href="#l17.916"></a><span id="l17.916" class="difflineplus">+        &lt;toolbarseparator id=&quot;app_offlineMenuAfterSettingsSeparator&quot;/&gt;</span>
<a href="#l17.917"></a><span id="l17.917" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_downloadFlagged&quot;</span>
<a href="#l17.918"></a><span id="l17.918" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.919"></a><span id="l17.919" class="difflineplus">+                       label=&quot;&amp;downloadStarredCmd.label;&quot;</span>
<a href="#l17.920"></a><span id="l17.920" class="difflineplus">+                       command=&quot;cmd_downloadFlagged&quot;/&gt;</span>
<a href="#l17.921"></a><span id="l17.921" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_downloadSelected&quot;</span>
<a href="#l17.922"></a><span id="l17.922">                        class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.923"></a><span id="l17.923" class="difflineminus">-#ifdef XP_WIN</span>
<a href="#l17.924"></a><span id="l17.924" class="difflineminus">-                       label=&quot;&amp;quitApplicationCmdWin2.label;&quot;</span>
<a href="#l17.925"></a><span id="l17.925" class="difflineminus">-                       tooltiptext=&quot;&amp;quitApplicationCmdWin2.tooltip;&quot;</span>
<a href="#l17.926"></a><span id="l17.926" class="difflineminus">-#else</span>
<a href="#l17.927"></a><span id="l17.927" class="difflineminus">-                       label=&quot;&amp;quitApplicationCmd.label;&quot;</span>
<a href="#l17.928"></a><span id="l17.928" class="difflineminus">-#endif</span>
<a href="#l17.929"></a><span id="l17.929" class="difflineminus">-                       key=&quot;key_quitApplication&quot;</span>
<a href="#l17.930"></a><span id="l17.930" class="difflineminus">-                       command=&quot;cmd_quitApplication&quot;/&gt;</span>
<a href="#l17.931"></a><span id="l17.931" class="difflineminus">-#endif</span>
<a href="#l17.932"></a><span id="l17.932" class="difflineplus">+                       label=&quot;&amp;downloadSelectedCmd.label;&quot;</span>
<a href="#l17.933"></a><span id="l17.933" class="difflineplus">+                       command=&quot;cmd_downloadSelected&quot;/&gt;</span>
<a href="#l17.934"></a><span id="l17.934" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.935"></a><span id="l17.935" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.936"></a><span id="l17.936" class="difflineplus">+</span>
<a href="#l17.937"></a><span id="l17.937" class="difflineplus">+    &lt;!-- View --&gt;</span>
<a href="#l17.938"></a><span id="l17.938" class="difflineplus">+    &lt;panelview id=&quot;appMenu-viewView&quot;</span>
<a href="#l17.939"></a><span id="l17.939" class="difflineplus">+               title=&quot;&amp;viewMenu.label;&quot;</span>
<a href="#l17.940"></a><span id="l17.940" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.941"></a><span id="l17.941" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.942"></a><span id="l17.942" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_FolderViews&quot;</span>
<a href="#l17.943"></a><span id="l17.943" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.944"></a><span id="l17.944" class="difflineplus">+                       label=&quot;&amp;folderView.label;&quot;</span>
<a href="#l17.945"></a><span id="l17.945" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.946"></a><span id="l17.946" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-foldersView', this)&quot;/&gt;</span>
<a href="#l17.947"></a><span id="l17.947" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewSortMenu&quot;</span>
<a href="#l17.948"></a><span id="l17.948" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.949"></a><span id="l17.949" class="difflineplus">+                       label=&quot;&amp;sortMenu.label;&quot;</span>
<a href="#l17.950"></a><span id="l17.950" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.951"></a><span id="l17.951" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-viewSortByView', this)&quot;/&gt;</span>
<a href="#l17.952"></a><span id="l17.952" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewMessageViewMenu&quot;</span>
<a href="#l17.953"></a><span id="l17.953" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.954"></a><span id="l17.954" class="difflineplus">+                       label=&quot;&amp;msgsMenu.label;&quot;</span>
<a href="#l17.955"></a><span id="l17.955" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.956"></a><span id="l17.956" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-viewMessagesView', this)&quot;/&gt;</span>
<a href="#l17.957"></a><span id="l17.957" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewMessagesMenu&quot;</span>
<a href="#l17.958"></a><span id="l17.958" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.959"></a><span id="l17.959" class="difflineplus">+                       label=&quot;&amp;threads.label;&quot;</span>
<a href="#l17.960"></a><span id="l17.960" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.961"></a><span id="l17.961" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-viewThreadsView', this)&quot;/&gt;</span>
<a href="#l17.962"></a><span id="l17.962" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewHeadersMenu&quot;</span>
<a href="#l17.963"></a><span id="l17.963" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.964"></a><span id="l17.964" class="difflineplus">+                       label=&quot;&amp;headersMenu.label;&quot;</span>
<a href="#l17.965"></a><span id="l17.965" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.966"></a><span id="l17.966" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-viewHeadersView', this)&quot;/&gt;</span>
<a href="#l17.967"></a><span id="l17.967" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewBodyMenu&quot;</span>
<a href="#l17.968"></a><span id="l17.968" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.969"></a><span id="l17.969" class="difflineplus">+                       label=&quot;&amp;bodyMenu.label;&quot;</span>
<a href="#l17.970"></a><span id="l17.970" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.971"></a><span id="l17.971" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-viewMessageBodyAsView', this)&quot;/&gt;</span>
<a href="#l17.972"></a><span id="l17.972" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewFeedSummary&quot;</span>
<a href="#l17.973"></a><span id="l17.973" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.974"></a><span id="l17.974" class="difflineplus">+                       label=&quot;&amp;bodyMenuFeed.label;&quot;</span>
<a href="#l17.975"></a><span id="l17.975" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.976"></a><span id="l17.976" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-viewFeedsView', this)&quot;/&gt;</span>
<a href="#l17.977"></a><span id="l17.977" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewAttachmentsInlineMenuitem&quot;</span>
<a href="#l17.978"></a><span id="l17.978" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.979"></a><span id="l17.979" class="difflineplus">+                       label=&quot;&amp;viewAttachmentsInlineCmd.label;&quot;</span>
<a href="#l17.980"></a><span id="l17.980" class="difflineplus">+                       oncommand=&quot;ToggleInlineAttachment(event.target)&quot;</span>
<a href="#l17.981"></a><span id="l17.981" class="difflineplus">+                       type=&quot;checkbox&quot;</span>
<a href="#l17.982"></a><span id="l17.982" class="difflineplus">+                       checked=&quot;true&quot;/&gt;</span>
<a href="#l17.983"></a><span id="l17.983" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_viewAfterAttachmentsSeparator&quot;/&gt;</span>
<a href="#l17.984"></a><span id="l17.984" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewFullZoomMenu&quot;</span>
<a href="#l17.985"></a><span id="l17.985" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.986"></a><span id="l17.986" class="difflineplus">+                       label=&quot;&amp;fullZoom.label;&quot;</span>
<a href="#l17.987"></a><span id="l17.987" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.988"></a><span id="l17.988" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-viewZoomView', this)&quot;/&gt;</span>
<a href="#l17.989"></a><span id="l17.989" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_charsetMenu&quot;</span>
<a href="#l17.990"></a><span id="l17.990" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.991"></a><span id="l17.991" class="difflineplus">+                       label=&quot;&amp;charsetMenu2.label;&quot;</span>
<a href="#l17.992"></a><span id="l17.992" class="difflineplus">+                       accesskey=&quot;&amp;charsetMenu2.accesskey;&quot;</span>
<a href="#l17.993"></a><span id="l17.993" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.994"></a><span id="l17.994" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-viewTextEncodingView', this)&quot;/&gt;</span>
<a href="#l17.995"></a><span id="l17.995" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_viewAfterCharsetSeparator&quot;/&gt;</span>
<a href="#l17.996"></a><span id="l17.996" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_pageSourceMenuItem&quot;</span>
<a href="#l17.997"></a><span id="l17.997" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.998"></a><span id="l17.998" class="difflineplus">+                       label=&quot;&amp;pageSourceCmd.label;&quot;</span>
<a href="#l17.999"></a><span id="l17.999" class="difflineplus">+                       key=&quot;key_viewPageSource&quot;</span>
<a href="#l17.1000"></a><span id="l17.1000" class="difflineplus">+                       command=&quot;cmd_viewPageSource&quot;/&gt;</span>
<a href="#l17.1001"></a><span id="l17.1001" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_securityStatus&quot;</span>
<a href="#l17.1002"></a><span id="l17.1002" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1003"></a><span id="l17.1003" class="difflineplus">+                       label=&quot;&amp;menu_securityStatus.label;&quot;</span>
<a href="#l17.1004"></a><span id="l17.1004" class="difflineplus">+                       accesskey=&quot;&amp;menu_securityStatus.accesskey;&quot;</span>
<a href="#l17.1005"></a><span id="l17.1005" class="difflineplus">+                       command=&quot;cmd_viewSecurityStatus&quot;/&gt;</span>
<a href="#l17.1006"></a><span id="l17.1006">       &lt;/vbox&gt;</span>
<a href="#l17.1007"></a><span id="l17.1007">     &lt;/panelview&gt;</span>
<a href="#l17.1008"></a><span id="l17.1008" class="difflineminus">-    &lt;panelview id=&quot;PanelUI-history&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l17.1009"></a><span id="l17.1009" class="difflineplus">+</span>
<a href="#l17.1010"></a><span id="l17.1010" class="difflineplus">+    &lt;!-- View / Folders --&gt;</span>
<a href="#l17.1011"></a><span id="l17.1011" class="difflineplus">+    &lt;panelview id=&quot;appMenu-foldersView&quot;</span>
<a href="#l17.1012"></a><span id="l17.1012" class="difflineplus">+               title=&quot;&amp;folderView.label;&quot;</span>
<a href="#l17.1013"></a><span id="l17.1013" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1014"></a><span id="l17.1014">       &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.1015"></a><span id="l17.1015" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenuViewHistorySidebar&quot;</span>
<a href="#l17.1016"></a><span id="l17.1016" class="difflineminus">-                       label=&quot;&amp;appMenuHistory.viewSidebar.label;&quot;</span>
<a href="#l17.1017"></a><span id="l17.1017" class="difflineminus">-                       label-checked=&quot;&amp;appMenuHistory.hideSidebar.label;&quot;</span>
<a href="#l17.1018"></a><span id="l17.1018" class="difflineminus">-                       label-unchecked=&quot;&amp;appMenuHistory.viewSidebar.label;&quot;</span>
<a href="#l17.1019"></a><span id="l17.1019" class="difflineminus">-                       type=&quot;checkbox&quot;</span>
<a href="#l17.1020"></a><span id="l17.1020" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_allFolders&quot;</span>
<a href="#l17.1021"></a><span id="l17.1021" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1022"></a><span id="l17.1022" class="difflineplus">+                       value=&quot;all&quot;</span>
<a href="#l17.1023"></a><span id="l17.1023" class="difflineplus">+                       label=&quot;&amp;allFolders.label;&quot;</span>
<a href="#l17.1024"></a><span id="l17.1024" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1025"></a><span id="l17.1025" class="difflineplus">+                       name=&quot;viewmessages&quot;</span>
<a href="#l17.1026"></a><span id="l17.1026" class="difflineplus">+                       oncommand=&quot;gFolderTreeView.toggleMode(this.getAttribute('value'));&quot;/&gt;</span>
<a href="#l17.1027"></a><span id="l17.1027" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_smartFolders&quot;</span>
<a href="#l17.1028"></a><span id="l17.1028">                        class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1029"></a><span id="l17.1029" class="difflineminus">-                       key=&quot;key_gotoHistory&quot;</span>
<a href="#l17.1030"></a><span id="l17.1030" class="difflineminus">-                       oncommand=&quot;SidebarUI.toggle('viewHistorySidebar');&quot;&gt;</span>
<a href="#l17.1031"></a><span id="l17.1031" class="difflineminus">-                       &lt;observes element=&quot;sidebar-box&quot; attribute=&quot;positionend&quot;/&gt;</span>
<a href="#l17.1032"></a><span id="l17.1032" class="difflineminus">-        &lt;/toolbarbutton&gt;</span>
<a href="#l17.1033"></a><span id="l17.1033" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenuClearRecentHistory&quot;</span>
<a href="#l17.1034"></a><span id="l17.1034" class="difflineminus">-                       label=&quot;&amp;appMenuHistory.clearRecent.label;&quot;</span>
<a href="#l17.1035"></a><span id="l17.1035" class="difflineplus">+                       value=&quot;smart&quot;</span>
<a href="#l17.1036"></a><span id="l17.1036" class="difflineplus">+                       label=&quot;&amp;unifiedFolders.label;&quot;</span>
<a href="#l17.1037"></a><span id="l17.1037" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1038"></a><span id="l17.1038" class="difflineplus">+                       name=&quot;viewmessages&quot;</span>
<a href="#l17.1039"></a><span id="l17.1039" class="difflineplus">+                       oncommand=&quot;gFolderTreeView.toggleMode(this.getAttribute('value'));&quot;/&gt;</span>
<a href="#l17.1040"></a><span id="l17.1040" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_unreadFolders&quot;</span>
<a href="#l17.1041"></a><span id="l17.1041" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1042"></a><span id="l17.1042" class="difflineplus">+                       value=&quot;unread&quot;</span>
<a href="#l17.1043"></a><span id="l17.1043" class="difflineplus">+                       label=&quot;&amp;unreadFolders.label;&quot;</span>
<a href="#l17.1044"></a><span id="l17.1044" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1045"></a><span id="l17.1045" class="difflineplus">+                       name=&quot;viewmessages&quot;</span>
<a href="#l17.1046"></a><span id="l17.1046" class="difflineplus">+                       oncommand=&quot;gFolderTreeView.toggleMode(this.getAttribute('value'));&quot;/&gt;</span>
<a href="#l17.1047"></a><span id="l17.1047" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_favoriteFolders&quot;</span>
<a href="#l17.1048"></a><span id="l17.1048">                        class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1049"></a><span id="l17.1049" class="difflineminus">-                       command=&quot;Tools:Sanitize&quot;/&gt;</span>
<a href="#l17.1050"></a><span id="l17.1050" class="difflineminus">-        &lt;toolbarseparator/&gt;</span>
<a href="#l17.1051"></a><span id="l17.1051" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenuRecentlyClosedTabs&quot;</span>
<a href="#l17.1052"></a><span id="l17.1052" class="difflineminus">-                       label=&quot;&amp;historyUndoMenu.label;&quot;</span>
<a href="#l17.1053"></a><span id="l17.1053" class="difflineminus">-                       class=&quot;subviewbutton subviewbutton-iconic subviewbutton-nav&quot;</span>
<a href="#l17.1054"></a><span id="l17.1054" class="difflineminus">-                       closemenu=&quot;none&quot;</span>
<a href="#l17.1055"></a><span id="l17.1055" class="difflineminus">-                       oncommand=&quot;PanelUI.showSubView('appMenu-library-recentlyClosedTabs', this)&quot;/&gt;</span>
<a href="#l17.1056"></a><span id="l17.1056" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenuRecentlyClosedWindows&quot;</span>
<a href="#l17.1057"></a><span id="l17.1057" class="difflineminus">-                       label=&quot;&amp;historyUndoWindowMenu.label;&quot;</span>
<a href="#l17.1058"></a><span id="l17.1058" class="difflineminus">-                       class=&quot;subviewbutton subviewbutton-iconic subviewbutton-nav&quot;</span>
<a href="#l17.1059"></a><span id="l17.1059" class="difflineminus">-                       closemenu=&quot;none&quot;</span>
<a href="#l17.1060"></a><span id="l17.1060" class="difflineminus">-                       oncommand=&quot;PanelUI.showSubView('appMenu-library-recentlyClosedWindows', this)&quot;/&gt;</span>
<a href="#l17.1061"></a><span id="l17.1061" class="difflineminus">-        &lt;toolbarseparator/&gt;</span>
<a href="#l17.1062"></a><span id="l17.1062" class="difflineminus">-        &lt;label value=&quot;&amp;appMenuHistory.recentHistory.label;&quot;</span>
<a href="#l17.1063"></a><span id="l17.1063" class="difflineminus">-               class=&quot;subview-subheader&quot;/&gt;</span>
<a href="#l17.1064"></a><span id="l17.1064" class="difflineminus">-        &lt;toolbaritem id=&quot;appMenu_historyMenu&quot;</span>
<a href="#l17.1065"></a><span id="l17.1065" class="difflineminus">-                     orient=&quot;vertical&quot;</span>
<a href="#l17.1066"></a><span id="l17.1066" class="difflineminus">-                     smoothscroll=&quot;false&quot;</span>
<a href="#l17.1067"></a><span id="l17.1067" class="difflineminus">-                     flatList=&quot;true&quot;</span>
<a href="#l17.1068"></a><span id="l17.1068" class="difflineminus">-                     tooltip=&quot;bhTooltip&quot;&gt;</span>
<a href="#l17.1069"></a><span id="l17.1069" class="difflineminus">-          &lt;!-- history menu items will go here --&gt;</span>
<a href="#l17.1070"></a><span id="l17.1070" class="difflineminus">-        &lt;/toolbaritem&gt;</span>
<a href="#l17.1071"></a><span id="l17.1071" class="difflineplus">+                       value=&quot;favorite&quot;</span>
<a href="#l17.1072"></a><span id="l17.1072" class="difflineplus">+                       label=&quot;&amp;favoriteFolders.label;&quot;</span>
<a href="#l17.1073"></a><span id="l17.1073" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1074"></a><span id="l17.1074" class="difflineplus">+                       name=&quot;viewmessages&quot;</span>
<a href="#l17.1075"></a><span id="l17.1075" class="difflineplus">+                       oncommand=&quot;gFolderTreeView.toggleMode(this.getAttribute('value'));&quot;/&gt;</span>
<a href="#l17.1076"></a><span id="l17.1076" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_recentFolders&quot;</span>
<a href="#l17.1077"></a><span id="l17.1077" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1078"></a><span id="l17.1078" class="difflineplus">+                       value=&quot;recent&quot;</span>
<a href="#l17.1079"></a><span id="l17.1079" class="difflineplus">+                       label=&quot;&amp;recentFolders.label;&quot;</span>
<a href="#l17.1080"></a><span id="l17.1080" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1081"></a><span id="l17.1081" class="difflineplus">+                       name=&quot;viewmessages&quot;</span>
<a href="#l17.1082"></a><span id="l17.1082" class="difflineplus">+                       oncommand=&quot;gFolderTreeView.toggleMode(this.getAttribute('value'));&quot;/&gt;</span>
<a href="#l17.1083"></a><span id="l17.1083" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_compactViewSeparator&quot;/&gt;</span>
<a href="#l17.1084"></a><span id="l17.1084" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_compactFolderView&quot;</span>
<a href="#l17.1085"></a><span id="l17.1085" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1086"></a><span id="l17.1086" class="difflineplus">+                       label=&quot;&amp;compactVersion.label;&quot;</span>
<a href="#l17.1087"></a><span id="l17.1087" class="difflineplus">+                       type=&quot;checkbox&quot;</span>
<a href="#l17.1088"></a><span id="l17.1088" class="difflineplus">+                       oncommand=&quot;gFolderTreeView.toggleCompact(this.getAttribute('checked') == 'true');&quot;/&gt;</span>
<a href="#l17.1089"></a><span id="l17.1089" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_favoritePropertiesSeparator&quot;/&gt;</span>
<a href="#l17.1090"></a><span id="l17.1090" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_favoriteFolder&quot;</span>
<a href="#l17.1091"></a><span id="l17.1091" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1092"></a><span id="l17.1092" class="difflineplus">+                       type=&quot;checkbox&quot;</span>
<a href="#l17.1093"></a><span id="l17.1093" class="difflineplus">+                       label=&quot;&amp;menuFavoriteFolder.label;&quot;</span>
<a href="#l17.1094"></a><span id="l17.1094" class="difflineplus">+                       checked=&quot;false&quot;</span>
<a href="#l17.1095"></a><span id="l17.1095" class="difflineplus">+                       oncommand=&quot;ToggleFavoriteFolderFlag();&quot;/&gt;</span>
<a href="#l17.1096"></a><span id="l17.1096" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_properties&quot;</span>
<a href="#l17.1097"></a><span id="l17.1097" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1098"></a><span id="l17.1098" class="difflineplus">+                       label=&quot;&amp;folderPropsCmd2.label;&quot;</span>
<a href="#l17.1099"></a><span id="l17.1099" class="difflineplus">+                       command=&quot;cmd_properties&quot;/&gt;</span>
<a href="#l17.1100"></a><span id="l17.1100">       &lt;/vbox&gt;</span>
<a href="#l17.1101"></a><span id="l17.1101" class="difflineminus">-      &lt;toolbarbutton id=&quot;PanelUI-historyMore&quot;</span>
<a href="#l17.1102"></a><span id="l17.1102" class="difflineminus">-                     class=&quot;panel-subview-footer subviewbutton&quot;</span>
<a href="#l17.1103"></a><span id="l17.1103" class="difflineminus">-                     label=&quot;&amp;appMenuHistory.showAll.label;&quot;</span>
<a href="#l17.1104"></a><span id="l17.1104" class="difflineminus">-                     oncommand=&quot;PlacesCommandHook.showPlacesOrganizer('History'); CustomizableUI.hidePanelForNode(this);&quot;/&gt;</span>
<a href="#l17.1105"></a><span id="l17.1105">     &lt;/panelview&gt;</span>
<a href="#l17.1106"></a><span id="l17.1106"> </span>
<a href="#l17.1107"></a><span id="l17.1107" class="difflineminus">-    &lt;panelview id=&quot;appMenu-library-recentlyClosedTabs&quot;/&gt;</span>
<a href="#l17.1108"></a><span id="l17.1108" class="difflineminus">-    &lt;panelview id=&quot;appMenu-library-recentlyClosedWindows&quot;/&gt;</span>
<a href="#l17.1109"></a><span id="l17.1109" class="difflineplus">+    &lt;!-- View / Sort by --&gt;</span>
<a href="#l17.1110"></a><span id="l17.1110" class="difflineplus">+    &lt;panelview id=&quot;appMenu-viewSortByView&quot;</span>
<a href="#l17.1111"></a><span id="l17.1111" class="difflineplus">+               title=&quot;&amp;sortMenu.label;&quot;</span>
<a href="#l17.1112"></a><span id="l17.1112" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1113"></a><span id="l17.1113" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.1114"></a><span id="l17.1114" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortByDateMenuitem&quot;</span>
<a href="#l17.1115"></a><span id="l17.1115" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1116"></a><span id="l17.1116" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1117"></a><span id="l17.1117" class="difflineplus">+                       name=&quot;sortby&quot;</span>
<a href="#l17.1118"></a><span id="l17.1118" class="difflineplus">+                       label=&quot;&amp;sortByDateCmd.label;&quot;</span>
<a href="#l17.1119"></a><span id="l17.1119" class="difflineplus">+                       oncommand=&quot;MsgSortThreadPane('byDate')&quot;/&gt;</span>
<a href="#l17.1120"></a><span id="l17.1120" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortByReceivedMenuitem&quot;</span>
<a href="#l17.1121"></a><span id="l17.1121" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1122"></a><span id="l17.1122" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1123"></a><span id="l17.1123" class="difflineplus">+                       name=&quot;sortby&quot;</span>
<a href="#l17.1124"></a><span id="l17.1124" class="difflineplus">+                       label=&quot;&amp;sortByReceivedCmd.label;&quot;</span>
<a href="#l17.1125"></a><span id="l17.1125" class="difflineplus">+                       oncommand=&quot;MsgSortThreadPane('byReceived')&quot;/&gt;</span>
<a href="#l17.1126"></a><span id="l17.1126" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortByFlagMenuitem&quot;</span>
<a href="#l17.1127"></a><span id="l17.1127" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1128"></a><span id="l17.1128" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1129"></a><span id="l17.1129" class="difflineplus">+                       name=&quot;sortby&quot;</span>
<a href="#l17.1130"></a><span id="l17.1130" class="difflineplus">+                       label=&quot;&amp;sortByStarCmd.label;&quot;</span>
<a href="#l17.1131"></a><span id="l17.1131" class="difflineplus">+                       oncommand=&quot;MsgSortThreadPane('byFlagged')&quot;/&gt;</span>
<a href="#l17.1132"></a><span id="l17.1132" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortByOrderReceivedMenuitem&quot;</span>
<a href="#l17.1133"></a><span id="l17.1133" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1134"></a><span id="l17.1134" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1135"></a><span id="l17.1135" class="difflineplus">+                       name=&quot;sortby&quot;</span>
<a href="#l17.1136"></a><span id="l17.1136" class="difflineplus">+                       label=&quot;&amp;sortByOrderReceivedCmd.label;&quot;</span>
<a href="#l17.1137"></a><span id="l17.1137" class="difflineplus">+                       oncommand=&quot;MsgSortThreadPane('byId')&quot;/&gt;</span>
<a href="#l17.1138"></a><span id="l17.1138" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortByPriorityMenuitem&quot;</span>
<a href="#l17.1139"></a><span id="l17.1139" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1140"></a><span id="l17.1140" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1141"></a><span id="l17.1141" class="difflineplus">+                       name=&quot;sortby&quot;</span>
<a href="#l17.1142"></a><span id="l17.1142" class="difflineplus">+                       label=&quot;&amp;sortByPriorityCmd.label;&quot;</span>
<a href="#l17.1143"></a><span id="l17.1143" class="difflineplus">+                       oncommand=&quot;MsgSortThreadPane('byPriority')&quot;/&gt;</span>
<a href="#l17.1144"></a><span id="l17.1144" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortByFromMenuitem&quot;</span>
<a href="#l17.1145"></a><span id="l17.1145" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1146"></a><span id="l17.1146" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1147"></a><span id="l17.1147" class="difflineplus">+                       name=&quot;sortby&quot;</span>
<a href="#l17.1148"></a><span id="l17.1148" class="difflineplus">+                       label=&quot;&amp;sortByFromCmd.label;&quot;</span>
<a href="#l17.1149"></a><span id="l17.1149" class="difflineplus">+                       oncommand=&quot;MsgSortThreadPane('byAuthor')&quot;/&gt;</span>
<a href="#l17.1150"></a><span id="l17.1150" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortByRecipientMenuitem&quot;</span>
<a href="#l17.1151"></a><span id="l17.1151" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1152"></a><span id="l17.1152" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1153"></a><span id="l17.1153" class="difflineplus">+                       name=&quot;sortby&quot;</span>
<a href="#l17.1154"></a><span id="l17.1154" class="difflineplus">+                       label=&quot;&amp;sortByRecipientCmd.label;&quot;</span>
<a href="#l17.1155"></a><span id="l17.1155" class="difflineplus">+                       oncommand=&quot;MsgSortThreadPane('byRecipient')&quot;/&gt;</span>
<a href="#l17.1156"></a><span id="l17.1156" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortByCorrespondentMenuitem&quot;</span>
<a href="#l17.1157"></a><span id="l17.1157" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1158"></a><span id="l17.1158" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1159"></a><span id="l17.1159" class="difflineplus">+                       name=&quot;sortby&quot;</span>
<a href="#l17.1160"></a><span id="l17.1160" class="difflineplus">+                       label=&quot;&amp;sortByCorrespondentCmd.label;&quot;</span>
<a href="#l17.1161"></a><span id="l17.1161" class="difflineplus">+                       oncommand=&quot;MsgSortThreadPane('byCorrespondent')&quot;/&gt;</span>
<a href="#l17.1162"></a><span id="l17.1162" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortBySizeMenuitem&quot;</span>
<a href="#l17.1163"></a><span id="l17.1163" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1164"></a><span id="l17.1164" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1165"></a><span id="l17.1165" class="difflineplus">+                       name=&quot;sortby&quot;</span>
<a href="#l17.1166"></a><span id="l17.1166" class="difflineplus">+                       label=&quot;&amp;sortBySizeCmd.label;&quot;</span>
<a href="#l17.1167"></a><span id="l17.1167" class="difflineplus">+                       oncommand=&quot;MsgSortThreadPane('bySize')&quot;/&gt;</span>
<a href="#l17.1168"></a><span id="l17.1168" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortByStatusMenuitem&quot;</span>
<a href="#l17.1169"></a><span id="l17.1169" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1170"></a><span id="l17.1170" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1171"></a><span id="l17.1171" class="difflineplus">+                       name=&quot;sortby&quot;</span>
<a href="#l17.1172"></a><span id="l17.1172" class="difflineplus">+                       label=&quot;&amp;sortByStatusCmd.label;&quot;</span>
<a href="#l17.1173"></a><span id="l17.1173" class="difflineplus">+                       oncommand=&quot;MsgSortThreadPane('byStatus')&quot;/&gt;</span>
<a href="#l17.1174"></a><span id="l17.1174" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortBySubjectMenuitem&quot;</span>
<a href="#l17.1175"></a><span id="l17.1175" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1176"></a><span id="l17.1176" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1177"></a><span id="l17.1177" class="difflineplus">+                       name=&quot;sortby&quot;</span>
<a href="#l17.1178"></a><span id="l17.1178" class="difflineplus">+                       label=&quot;&amp;sortBySubjectCmd.label;&quot;</span>
<a href="#l17.1179"></a><span id="l17.1179" class="difflineplus">+                       oncommand=&quot;MsgSortThreadPane('bySubject')&quot;/&gt;</span>
<a href="#l17.1180"></a><span id="l17.1180" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortByUnreadMenuitem&quot;</span>
<a href="#l17.1181"></a><span id="l17.1181" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1182"></a><span id="l17.1182" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1183"></a><span id="l17.1183" class="difflineplus">+                       name=&quot;sortby&quot;</span>
<a href="#l17.1184"></a><span id="l17.1184" class="difflineplus">+                       label=&quot;&amp;sortByUnreadCmd.label;&quot;</span>
<a href="#l17.1185"></a><span id="l17.1185" class="difflineplus">+                       oncommand=&quot;MsgSortThreadPane('byUnread')&quot;/&gt;</span>
<a href="#l17.1186"></a><span id="l17.1186" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortByTagsMenuitem&quot;</span>
<a href="#l17.1187"></a><span id="l17.1187" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1188"></a><span id="l17.1188" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1189"></a><span id="l17.1189" class="difflineplus">+                       name=&quot;sortby&quot;</span>
<a href="#l17.1190"></a><span id="l17.1190" class="difflineplus">+                       label=&quot;&amp;sortByTagsCmd.label;&quot;</span>
<a href="#l17.1191"></a><span id="l17.1191" class="difflineplus">+                       oncommand=&quot;MsgSortThreadPane('byTags')&quot;/&gt;</span>
<a href="#l17.1192"></a><span id="l17.1192" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortByJunkStatusMenuitem&quot;</span>
<a href="#l17.1193"></a><span id="l17.1193" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1194"></a><span id="l17.1194" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1195"></a><span id="l17.1195" class="difflineplus">+                       name=&quot;sortby&quot;</span>
<a href="#l17.1196"></a><span id="l17.1196" class="difflineplus">+                       label=&quot;&amp;sortByJunkStatusCmd.label;&quot;</span>
<a href="#l17.1197"></a><span id="l17.1197" class="difflineplus">+                       oncommand=&quot;MsgSortThreadPane('byJunkStatus')&quot;/&gt;</span>
<a href="#l17.1198"></a><span id="l17.1198" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortByAttachmentsMenuitem&quot;</span>
<a href="#l17.1199"></a><span id="l17.1199" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1200"></a><span id="l17.1200" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1201"></a><span id="l17.1201" class="difflineplus">+                       name=&quot;sortby&quot;</span>
<a href="#l17.1202"></a><span id="l17.1202" class="difflineplus">+                       label=&quot;&amp;sortByAttachmentsCmd.label;&quot;</span>
<a href="#l17.1203"></a><span id="l17.1203" class="difflineplus">+                       oncommand=&quot;MsgSortThreadPane('byAttachments')&quot;/&gt;</span>
<a href="#l17.1204"></a><span id="l17.1204" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_sortAfterAttachmentSeparator&quot;/&gt;</span>
<a href="#l17.1205"></a><span id="l17.1205" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortAscending&quot;</span>
<a href="#l17.1206"></a><span id="l17.1206" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1207"></a><span id="l17.1207" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1208"></a><span id="l17.1208" class="difflineplus">+                       name=&quot;sortdirection&quot;</span>
<a href="#l17.1209"></a><span id="l17.1209" class="difflineplus">+                       label=&quot;&amp;sortAscending.label;&quot;</span>
<a href="#l17.1210"></a><span id="l17.1210" class="difflineplus">+                       oncommand=&quot;MsgSortAscending()&quot;/&gt;</span>
<a href="#l17.1211"></a><span id="l17.1211" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortDescending&quot;</span>
<a href="#l17.1212"></a><span id="l17.1212" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1213"></a><span id="l17.1213" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1214"></a><span id="l17.1214" class="difflineplus">+                       name=&quot;sortdirection&quot;</span>
<a href="#l17.1215"></a><span id="l17.1215" class="difflineplus">+                       label=&quot;&amp;sortDescending.label;&quot;</span>
<a href="#l17.1216"></a><span id="l17.1216" class="difflineplus">+                       oncommand=&quot;MsgSortDescending()&quot;/&gt;</span>
<a href="#l17.1217"></a><span id="l17.1217" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_sortAfterDescendingSeparator&quot;/&gt;</span>
<a href="#l17.1218"></a><span id="l17.1218" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortThreaded&quot;</span>
<a href="#l17.1219"></a><span id="l17.1219" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1220"></a><span id="l17.1220" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1221"></a><span id="l17.1221" class="difflineplus">+                       name=&quot;threaded&quot;</span>
<a href="#l17.1222"></a><span id="l17.1222" class="difflineplus">+                       label=&quot;&amp;sortThreaded.label;&quot;</span>
<a href="#l17.1223"></a><span id="l17.1223" class="difflineplus">+                       oncommand=&quot;MsgSortThreaded();&quot;/&gt;</span>
<a href="#l17.1224"></a><span id="l17.1224" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sortUnthreaded&quot;</span>
<a href="#l17.1225"></a><span id="l17.1225" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1226"></a><span id="l17.1226" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1227"></a><span id="l17.1227" class="difflineplus">+                       name=&quot;threaded&quot;</span>
<a href="#l17.1228"></a><span id="l17.1228" class="difflineplus">+                       label=&quot;&amp;sortUnthreaded.label;&quot;</span>
<a href="#l17.1229"></a><span id="l17.1229" class="difflineplus">+                       oncommand=&quot;MsgSortUnthreaded();&quot;/&gt;</span>
<a href="#l17.1230"></a><span id="l17.1230" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_groupBySort&quot;</span>
<a href="#l17.1231"></a><span id="l17.1231" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1232"></a><span id="l17.1232" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1233"></a><span id="l17.1233" class="difflineplus">+                       name=&quot;group&quot;</span>
<a href="#l17.1234"></a><span id="l17.1234" class="difflineplus">+                       label=&quot;&amp;groupBySort.label;&quot;</span>
<a href="#l17.1235"></a><span id="l17.1235" class="difflineplus">+                       oncommand=&quot;MsgGroupBySort();&quot;/&gt;</span>
<a href="#l17.1236"></a><span id="l17.1236" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.1237"></a><span id="l17.1237" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.1238"></a><span id="l17.1238"> </span>
<a href="#l17.1239"></a><span id="l17.1239" class="difflineminus">-    &lt;panelview id=&quot;PanelUI-remotetabs&quot; flex=&quot;1&quot; class=&quot;PanelUI-subView&quot;</span>
<a href="#l17.1240"></a><span id="l17.1240" class="difflineminus">-               descriptionheightworkaround=&quot;true&quot;&gt;</span>
<a href="#l17.1241"></a><span id="l17.1241" class="difflineplus">+    &lt;!-- View / Messages --&gt;</span>
<a href="#l17.1242"></a><span id="l17.1242" class="difflineplus">+    &lt;panelview id=&quot;appMenu-viewMessagesView&quot;</span>
<a href="#l17.1243"></a><span id="l17.1243" class="difflineplus">+               title=&quot;&amp;msgsMenu.label;&quot;</span>
<a href="#l17.1244"></a><span id="l17.1244" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1245"></a><span id="l17.1245">       &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.1246"></a><span id="l17.1246" class="difflineminus">-        &lt;!-- this widget has 3 boxes in the body, but only 1 is ever visible --&gt;</span>
<a href="#l17.1247"></a><span id="l17.1247" class="difflineminus">-        &lt;!-- When Sync is ready to sync --&gt;</span>
<a href="#l17.1248"></a><span id="l17.1248" class="difflineminus">-        &lt;vbox id=&quot;PanelUI-remotetabs-main&quot; hidden=&quot;true&quot;&gt;</span>
<a href="#l17.1249"></a><span id="l17.1249" class="difflineminus">-          &lt;vbox id=&quot;PanelUI-remotetabs-buttons&quot;&gt;</span>
<a href="#l17.1250"></a><span id="l17.1250" class="difflineminus">-            &lt;toolbarbutton id=&quot;PanelUI-remotetabs-view-sidebar&quot;</span>
<a href="#l17.1251"></a><span id="l17.1251" class="difflineminus">-                           class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1252"></a><span id="l17.1252" class="difflineminus">-                           label=&quot;&amp;appMenuRemoteTabs.sidebar.label;&quot;</span>
<a href="#l17.1253"></a><span id="l17.1253" class="difflineminus">-                           label-checked=&quot;&amp;appMenuRemoteTabs.hidesidebar.label;&quot;</span>
<a href="#l17.1254"></a><span id="l17.1254" class="difflineminus">-                           label-unchecked=&quot;&amp;appMenuRemoteTabs.sidebar.label;&quot;</span>
<a href="#l17.1255"></a><span id="l17.1255" class="difflineminus">-                           oncommand=&quot;SidebarUI.toggle('viewTabsSidebar', this);&quot;/&gt;</span>
<a href="#l17.1256"></a><span id="l17.1256" class="difflineminus">-            &lt;toolbarbutton id=&quot;PanelUI-remotetabs-view-managedevices&quot;</span>
<a href="#l17.1257"></a><span id="l17.1257" class="difflineminus">-                           class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1258"></a><span id="l17.1258" class="difflineminus">-                           label=&quot;&amp;appMenuRemoteTabs.managedevices.label;&quot;</span>
<a href="#l17.1259"></a><span id="l17.1259" class="difflineminus">-                           oncommand=&quot;gSync.openDevicesManagementPage('syncedtabs-menupanel');&quot;&gt;</span>
<a href="#l17.1260"></a><span id="l17.1260" class="difflineminus">-                           &lt;observes element=&quot;sidebar-box&quot; attribute=&quot;positionend&quot;/&gt;</span>
<a href="#l17.1261"></a><span id="l17.1261" class="difflineminus">-            &lt;/toolbarbutton&gt;</span>
<a href="#l17.1262"></a><span id="l17.1262" class="difflineminus">-            &lt;toolbarbutton id=&quot;PanelUI-remotetabs-syncnow&quot;</span>
<a href="#l17.1263"></a><span id="l17.1263" class="difflineminus">-                           onmouseover=&quot;gSync.refreshSyncButtonsTooltip();&quot;</span>
<a href="#l17.1264"></a><span id="l17.1264" class="difflineminus">-                           class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1265"></a><span id="l17.1265" class="difflineminus">-                           oncommand=&quot;gSync.doSync();&quot;</span>
<a href="#l17.1266"></a><span id="l17.1266" class="difflineminus">-                           closemenu=&quot;none&quot;/&gt;</span>
<a href="#l17.1267"></a><span id="l17.1267" class="difflineminus">-            &lt;menuseparator id=&quot;PanelUI-remotetabs-separator&quot;/&gt;</span>
<a href="#l17.1268"></a><span id="l17.1268" class="difflineminus">-          &lt;/vbox&gt;</span>
<a href="#l17.1269"></a><span id="l17.1269" class="difflineminus">-          &lt;deck id=&quot;PanelUI-remotetabs-deck&quot;&gt;</span>
<a href="#l17.1270"></a><span id="l17.1270" class="difflineminus">-            &lt;!-- Sync is ready to Sync and the &quot;tabs&quot; engine is enabled --&gt;</span>
<a href="#l17.1271"></a><span id="l17.1271" class="difflineminus">-            &lt;vbox id=&quot;PanelUI-remotetabs-tabspane&quot;&gt;</span>
<a href="#l17.1272"></a><span id="l17.1272" class="difflineminus">-              &lt;vbox id=&quot;PanelUI-remotetabs-tabslist&quot;</span>
<a href="#l17.1273"></a><span id="l17.1273" class="difflineminus">-                    showAllLabel=&quot;&amp;appMenuRemoteTabs.showAll.label;&quot;</span>
<a href="#l17.1274"></a><span id="l17.1274" class="difflineminus">-                    showAllTooltipText=&quot;&amp;appMenuRemoteTabs.showAll.tooltip;&quot;</span>
<a href="#l17.1275"></a><span id="l17.1275" class="difflineminus">-                    showMoreLabel=&quot;&amp;appMenuRemoteTabs.showMore.label;&quot;</span>
<a href="#l17.1276"></a><span id="l17.1276" class="difflineminus">-                    showMoreTooltipText=&quot;&amp;appMenuRemoteTabs.showMore.tooltip;&quot;</span>
<a href="#l17.1277"></a><span id="l17.1277" class="difflineminus">-                    notabsforclientlabel=&quot;&amp;appMenuRemoteTabs.notabs.label;&quot;</span>
<a href="#l17.1278"></a><span id="l17.1278" class="difflineminus">-                    /&gt;</span>
<a href="#l17.1279"></a><span id="l17.1279" class="difflineminus">-            &lt;/vbox&gt;</span>
<a href="#l17.1280"></a><span id="l17.1280" class="difflineminus">-            &lt;!-- Sync is ready to Sync but the &quot;tabs&quot; engine isn't enabled--&gt;</span>
<a href="#l17.1281"></a><span id="l17.1281" class="difflineminus">-            &lt;hbox id=&quot;PanelUI-remotetabs-tabsdisabledpane&quot; pack=&quot;center&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l17.1282"></a><span id="l17.1282" class="difflineminus">-              &lt;vbox class=&quot;PanelUI-remotetabs-instruction-box&quot; align=&quot;center&quot;&gt;</span>
<a href="#l17.1283"></a><span id="l17.1283" class="difflineminus">-                &lt;hbox pack=&quot;center&quot;&gt;</span>
<a href="#l17.1284"></a><span id="l17.1284" class="difflineminus">-                  &lt;image class=&quot;fxaSyncIllustrationIssue&quot;/&gt;</span>
<a href="#l17.1285"></a><span id="l17.1285" class="difflineminus">-                &lt;/hbox&gt;</span>
<a href="#l17.1286"></a><span id="l17.1286" class="difflineminus">-                &lt;label class=&quot;PanelUI-remotetabs-instruction-label&quot;&gt;&amp;appMenuRemoteTabs.tabsnotsyncing.label;&lt;/label&gt;</span>
<a href="#l17.1287"></a><span id="l17.1287" class="difflineminus">-                &lt;hbox pack=&quot;center&quot;&gt;</span>
<a href="#l17.1288"></a><span id="l17.1288" class="difflineminus">-                  &lt;toolbarbutton class=&quot;PanelUI-remotetabs-button&quot;</span>
<a href="#l17.1289"></a><span id="l17.1289" class="difflineminus">-                                 label=&quot;&amp;appMenuRemoteTabs.opensyncprefs.label;&quot;</span>
<a href="#l17.1290"></a><span id="l17.1290" class="difflineminus">-                                 oncommand=&quot;gSync.openPrefs('synced-tabs');&quot;/&gt;</span>
<a href="#l17.1291"></a><span id="l17.1291" class="difflineminus">-                &lt;/hbox&gt;</span>
<a href="#l17.1292"></a><span id="l17.1292" class="difflineminus">-              &lt;/vbox&gt;</span>
<a href="#l17.1293"></a><span id="l17.1293" class="difflineminus">-            &lt;/hbox&gt;</span>
<a href="#l17.1294"></a><span id="l17.1294" class="difflineminus">-            &lt;!-- Sync is ready to Sync but we are still fetching the tabs to show --&gt;</span>
<a href="#l17.1295"></a><span id="l17.1295" class="difflineminus">-            &lt;vbox id=&quot;PanelUI-remotetabs-fetching&quot;&gt;</span>
<a href="#l17.1296"></a><span id="l17.1296" class="difflineminus">-              &lt;!-- Show intentionally blank panel, see bug 1239845 --&gt;</span>
<a href="#l17.1297"></a><span id="l17.1297" class="difflineminus">-            &lt;/vbox&gt;</span>
<a href="#l17.1298"></a><span id="l17.1298" class="difflineminus">-            &lt;!-- Sync has only 1 (ie, this) device connected --&gt;</span>
<a href="#l17.1299"></a><span id="l17.1299" class="difflineminus">-            &lt;hbox id=&quot;PanelUI-remotetabs-nodevicespane&quot; pack=&quot;center&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l17.1300"></a><span id="l17.1300" class="difflineminus">-              &lt;vbox class=&quot;PanelUI-remotetabs-instruction-box&quot; align=&quot;center&quot;&gt;</span>
<a href="#l17.1301"></a><span id="l17.1301" class="difflineminus">-                &lt;hbox pack=&quot;center&quot;&gt;</span>
<a href="#l17.1302"></a><span id="l17.1302" class="difflineminus">-                  &lt;image class=&quot;fxaSyncIllustrationIssue&quot;/&gt;</span>
<a href="#l17.1303"></a><span id="l17.1303" class="difflineminus">-                &lt;/hbox&gt;</span>
<a href="#l17.1304"></a><span id="l17.1304" class="difflineminus">-                &lt;label class=&quot;PanelUI-remotetabs-instruction-label&quot;&gt;&amp;appMenuRemoteTabs.noclients.subtitle;&lt;/label&gt;</span>
<a href="#l17.1305"></a><span id="l17.1305" class="difflineminus">-                &lt;toolbarbutton id=&quot;PanelUI-remotetabs-connect-device-button&quot;</span>
<a href="#l17.1306"></a><span id="l17.1306" class="difflineminus">-                               class=&quot;PanelUI-remotetabs-button&quot;</span>
<a href="#l17.1307"></a><span id="l17.1307" class="difflineminus">-                               label=&quot;&amp;appMenuRemoteTabs.connectdevice.label;&quot;</span>
<a href="#l17.1308"></a><span id="l17.1308" class="difflineminus">-                               oncommand=&quot;gSync.openConnectAnotherDevice('synced-tabs');&quot;/&gt;</span>
<a href="#l17.1309"></a><span id="l17.1309" class="difflineminus">-              &lt;/vbox&gt;</span>
<a href="#l17.1310"></a><span id="l17.1310" class="difflineminus">-            &lt;/hbox&gt;</span>
<a href="#l17.1311"></a><span id="l17.1311" class="difflineminus">-          &lt;/deck&gt;</span>
<a href="#l17.1312"></a><span id="l17.1312" class="difflineminus">-        &lt;/vbox&gt;</span>
<a href="#l17.1313"></a><span id="l17.1313" class="difflineminus">-        &lt;!-- a box to ensure contained boxes are centered horizonally --&gt;</span>
<a href="#l17.1314"></a><span id="l17.1314" class="difflineminus">-        &lt;hbox pack=&quot;center&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l17.1315"></a><span id="l17.1315" class="difflineminus">-          &lt;!-- When Sync is not configured --&gt;</span>
<a href="#l17.1316"></a><span id="l17.1316" class="difflineminus">-          &lt;vbox id=&quot;PanelUI-remotetabs-setupsync&quot;</span>
<a href="#l17.1317"></a><span id="l17.1317" class="difflineminus">-                flex=&quot;1&quot;</span>
<a href="#l17.1318"></a><span id="l17.1318" class="difflineminus">-                align=&quot;center&quot;</span>
<a href="#l17.1319"></a><span id="l17.1319" class="difflineminus">-                class=&quot;PanelUI-remotetabs-instruction-box&quot;</span>
<a href="#l17.1320"></a><span id="l17.1320" class="difflineminus">-                hidden=&quot;true&quot;&gt;</span>
<a href="#l17.1321"></a><span id="l17.1321" class="difflineminus">-            &lt;image class=&quot;fxaSyncIllustration&quot;/&gt;</span>
<a href="#l17.1322"></a><span id="l17.1322" class="difflineminus">-            &lt;label class=&quot;PanelUI-remotetabs-instruction-label&quot;&gt;&amp;appMenuRemoteTabs.notsignedin.label;&lt;/label&gt;</span>
<a href="#l17.1323"></a><span id="l17.1323" class="difflineminus">-            &lt;toolbarbutton class=&quot;PanelUI-remotetabs-button&quot;</span>
<a href="#l17.1324"></a><span id="l17.1324" class="difflineminus">-                           label=&quot;&amp;appMenuRemoteTabs.signin.label;&quot;</span>
<a href="#l17.1325"></a><span id="l17.1325" class="difflineminus">-                           oncommand=&quot;gSync.openPrefs('synced-tabs');&quot;/&gt;</span>
<a href="#l17.1326"></a><span id="l17.1326" class="difflineminus">-          &lt;/vbox&gt;</span>
<a href="#l17.1327"></a><span id="l17.1327" class="difflineminus">-          &lt;!-- When Sync needs re-authentication --&gt;</span>
<a href="#l17.1328"></a><span id="l17.1328" class="difflineminus">-          &lt;vbox id=&quot;PanelUI-remotetabs-reauthsync&quot;</span>
<a href="#l17.1329"></a><span id="l17.1329" class="difflineminus">-                flex=&quot;1&quot;</span>
<a href="#l17.1330"></a><span id="l17.1330" class="difflineminus">-                align=&quot;center&quot;</span>
<a href="#l17.1331"></a><span id="l17.1331" class="difflineminus">-                class=&quot;PanelUI-remotetabs-instruction-box&quot;</span>
<a href="#l17.1332"></a><span id="l17.1332" class="difflineminus">-                hidden=&quot;true&quot;&gt;</span>
<a href="#l17.1333"></a><span id="l17.1333" class="difflineminus">-            &lt;image class=&quot;fxaSyncIllustrationIssue&quot;/&gt;</span>
<a href="#l17.1334"></a><span id="l17.1334" class="difflineminus">-            &lt;label class=&quot;PanelUI-remotetabs-instruction-label&quot;&gt;&amp;appMenuRemoteTabs.notsignedin.label;&lt;/label&gt;</span>
<a href="#l17.1335"></a><span id="l17.1335" class="difflineminus">-            &lt;toolbarbutton class=&quot;PanelUI-remotetabs-button&quot;</span>
<a href="#l17.1336"></a><span id="l17.1336" class="difflineminus">-                           label=&quot;&amp;appMenuRemoteTabs.signin.label;&quot;</span>
<a href="#l17.1337"></a><span id="l17.1337" class="difflineminus">-                           oncommand=&quot;gSync.openPrefs('synced-tabs');&quot;/&gt;</span>
<a href="#l17.1338"></a><span id="l17.1338" class="difflineminus">-          &lt;/vbox&gt;</span>
<a href="#l17.1339"></a><span id="l17.1339" class="difflineminus">-          &lt;!-- When Sync needs verification --&gt;</span>
<a href="#l17.1340"></a><span id="l17.1340" class="difflineminus">-          &lt;vbox id=&quot;PanelUI-remotetabs-unverified&quot;</span>
<a href="#l17.1341"></a><span id="l17.1341" class="difflineminus">-                flex=&quot;1&quot;</span>
<a href="#l17.1342"></a><span id="l17.1342" class="difflineminus">-                align=&quot;center&quot;</span>
<a href="#l17.1343"></a><span id="l17.1343" class="difflineminus">-                class=&quot;PanelUI-remotetabs-instruction-box&quot;</span>
<a href="#l17.1344"></a><span id="l17.1344" class="difflineminus">-                hidden=&quot;true&quot;&gt;</span>
<a href="#l17.1345"></a><span id="l17.1345" class="difflineminus">-            &lt;image class=&quot;fxaSyncIllustrationIssue&quot;/&gt;</span>
<a href="#l17.1346"></a><span id="l17.1346" class="difflineminus">-            &lt;label class=&quot;PanelUI-remotetabs-instruction-label&quot;&gt;&amp;appMenuRemoteTabs.unverified.label;&lt;/label&gt;</span>
<a href="#l17.1347"></a><span id="l17.1347" class="difflineminus">-            &lt;toolbarbutton class=&quot;PanelUI-remotetabs-button&quot;</span>
<a href="#l17.1348"></a><span id="l17.1348" class="difflineminus">-                           label=&quot;&amp;appMenuRemoteTabs.opensyncprefs.label;&quot;</span>
<a href="#l17.1349"></a><span id="l17.1349" class="difflineminus">-                           oncommand=&quot;gSync.openPrefs('synced-tabs');&quot;/&gt;</span>
<a href="#l17.1350"></a><span id="l17.1350" class="difflineminus">-          &lt;/vbox&gt;</span>
<a href="#l17.1351"></a><span id="l17.1351" class="difflineminus">-        &lt;/hbox&gt;</span>
<a href="#l17.1352"></a><span id="l17.1352" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewMessageAll&quot;</span>
<a href="#l17.1353"></a><span id="l17.1353" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1354"></a><span id="l17.1354" class="difflineplus">+                       value=&quot;0&quot;</span>
<a href="#l17.1355"></a><span id="l17.1355" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1356"></a><span id="l17.1356" class="difflineplus">+                       label=&quot;&amp;viewAll.label;&quot;</span>
<a href="#l17.1357"></a><span id="l17.1357" class="difflineplus">+                       oncommand=&quot;ViewChangeByMenuitem(event.target);&quot;/&gt;</span>
<a href="#l17.1358"></a><span id="l17.1358" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewMessageUnread&quot;</span>
<a href="#l17.1359"></a><span id="l17.1359" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1360"></a><span id="l17.1360" class="difflineplus">+                       value=&quot;1&quot;</span>
<a href="#l17.1361"></a><span id="l17.1361" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1362"></a><span id="l17.1362" class="difflineplus">+                       label=&quot;&amp;viewUnread.label;&quot;</span>
<a href="#l17.1363"></a><span id="l17.1363" class="difflineplus">+                       oncommand=&quot;ViewChangeByMenuitem(event.target);&quot;/&gt;</span>
<a href="#l17.1364"></a><span id="l17.1364" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewMessageNotDeleted&quot;</span>
<a href="#l17.1365"></a><span id="l17.1365" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1366"></a><span id="l17.1366" class="difflineplus">+                       value=&quot;3&quot;</span>
<a href="#l17.1367"></a><span id="l17.1367" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1368"></a><span id="l17.1368" class="difflineplus">+                       label=&quot;&amp;viewNotDeleted.label;&quot;</span>
<a href="#l17.1369"></a><span id="l17.1369" class="difflineplus">+                       oncommand=&quot;ViewChangeByMenuitem(event.target);&quot;/&gt;</span>
<a href="#l17.1370"></a><span id="l17.1370" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_messageViewAfterUnreadSeparator&quot;/&gt;</span>
<a href="#l17.1371"></a><span id="l17.1371" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewMessageTags&quot;</span>
<a href="#l17.1372"></a><span id="l17.1372" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.1373"></a><span id="l17.1373" class="difflineplus">+                       label=&quot;&amp;viewTags.label;&quot;</span>
<a href="#l17.1374"></a><span id="l17.1374" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.1375"></a><span id="l17.1375" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-viewMessagesTagsView', this)&quot;/&gt;</span>
<a href="#l17.1376"></a><span id="l17.1376" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewMessageCustomViews&quot;</span>
<a href="#l17.1377"></a><span id="l17.1377" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.1378"></a><span id="l17.1378" class="difflineplus">+                       label=&quot;&amp;viewCustomViews.label;&quot;</span>
<a href="#l17.1379"></a><span id="l17.1379" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.1380"></a><span id="l17.1380" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-viewMessagesCustomViewsView', this)&quot;/&gt;</span>
<a href="#l17.1381"></a><span id="l17.1381" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_messageViewAfterCustomSeparator&quot;/&gt;</span>
<a href="#l17.1382"></a><span id="l17.1382" class="difflineplus">+        &lt;!-- TODO appmenu - broken? broken already? --&gt;</span>
<a href="#l17.1383"></a><span id="l17.1383" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewMessageVirtualFolder&quot;</span>
<a href="#l17.1384"></a><span id="l17.1384" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1385"></a><span id="l17.1385" class="difflineplus">+                       value=&quot;7&quot;</span>
<a href="#l17.1386"></a><span id="l17.1386" class="difflineplus">+                       label=&quot;&amp;viewVirtualFolder.label;&quot;</span>
<a href="#l17.1387"></a><span id="l17.1387" class="difflineplus">+                       oncommand=&quot;ViewChangeByMenuitem(event.target);&quot;/&gt;</span>
<a href="#l17.1388"></a><span id="l17.1388" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewMessageCustomize&quot;</span>
<a href="#l17.1389"></a><span id="l17.1389" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1390"></a><span id="l17.1390" class="difflineplus">+                       value=&quot;8&quot;</span>
<a href="#l17.1391"></a><span id="l17.1391" class="difflineplus">+                       label=&quot;&amp;viewCustomizeView.label;&quot;</span>
<a href="#l17.1392"></a><span id="l17.1392" class="difflineplus">+                       oncommand=&quot;ViewChangeByMenuitem(event.target);&quot;/&gt;</span>
<a href="#l17.1393"></a><span id="l17.1393" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.1394"></a><span id="l17.1394" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.1395"></a><span id="l17.1395" class="difflineplus">+</span>
<a href="#l17.1396"></a><span id="l17.1396" class="difflineplus">+    &lt;!-- View / Messages / Tags --&gt;</span>
<a href="#l17.1397"></a><span id="l17.1397" class="difflineplus">+    &lt;!-- Dynamically populated when shown. --&gt;</span>
<a href="#l17.1398"></a><span id="l17.1398" class="difflineplus">+    &lt;panelview id=&quot;appMenu-viewMessagesTagsView&quot;</span>
<a href="#l17.1399"></a><span id="l17.1399" class="difflineplus">+               title=&quot;&amp;viewTags.label;&quot;</span>
<a href="#l17.1400"></a><span id="l17.1400" class="difflineplus">+               class=&quot;PanelUI-subView&quot;</span>
<a href="#l17.1401"></a><span id="l17.1401" class="difflineplus">+               oncommand=&quot;ViewChangeByMenuitem(event.target);&quot;&gt;</span>
<a href="#l17.1402"></a><span id="l17.1402" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;/&gt;</span>
<a href="#l17.1403"></a><span id="l17.1403" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.1404"></a><span id="l17.1404" class="difflineplus">+</span>
<a href="#l17.1405"></a><span id="l17.1405" class="difflineplus">+    &lt;!-- View / Messages / Custom Views --&gt;</span>
<a href="#l17.1406"></a><span id="l17.1406" class="difflineplus">+    &lt;!-- Dynamically populated when shown. --&gt;</span>
<a href="#l17.1407"></a><span id="l17.1407" class="difflineplus">+    &lt;panelview id=&quot;appMenu-viewMessagesCustomViewsView&quot;</span>
<a href="#l17.1408"></a><span id="l17.1408" class="difflineplus">+               title=&quot;&amp;viewCustomViews.label;&quot;</span>
<a href="#l17.1409"></a><span id="l17.1409" class="difflineplus">+               class=&quot;PanelUI-subView&quot;</span>
<a href="#l17.1410"></a><span id="l17.1410" class="difflineplus">+               oncommand=&quot;ViewChangeByMenuitem(event.target);&quot;&gt;</span>
<a href="#l17.1411"></a><span id="l17.1411" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;/&gt;</span>
<a href="#l17.1412"></a><span id="l17.1412" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.1413"></a><span id="l17.1413" class="difflineplus">+</span>
<a href="#l17.1414"></a><span id="l17.1414" class="difflineplus">+    &lt;!-- View / Threads --&gt;</span>
<a href="#l17.1415"></a><span id="l17.1415" class="difflineplus">+    &lt;panelview id=&quot;appMenu-viewThreadsView&quot;</span>
<a href="#l17.1416"></a><span id="l17.1416" class="difflineplus">+               title=&quot;&amp;threads.label;&quot;</span>
<a href="#l17.1417"></a><span id="l17.1417" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1418"></a><span id="l17.1418" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.1419"></a><span id="l17.1419" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewAllMessagesMenuItem&quot;</span>
<a href="#l17.1420"></a><span id="l17.1420" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1421"></a><span id="l17.1421" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1422"></a><span id="l17.1422" class="difflineplus">+                       name=&quot;viewmessages&quot;</span>
<a href="#l17.1423"></a><span id="l17.1423" class="difflineplus">+                       label=&quot;&amp;allMsgsCmd.label;&quot;</span>
<a href="#l17.1424"></a><span id="l17.1424" class="difflineplus">+                       disabled=&quot;true&quot;</span>
<a href="#l17.1425"></a><span id="l17.1425" class="difflineplus">+                       command=&quot;cmd_viewAllMsgs&quot;/&gt;</span>
<a href="#l17.1426"></a><span id="l17.1426" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewUnreadMessagesMenuItem&quot;</span>
<a href="#l17.1427"></a><span id="l17.1427" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1428"></a><span id="l17.1428" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1429"></a><span id="l17.1429" class="difflineplus">+                       name=&quot;viewmessages&quot;</span>
<a href="#l17.1430"></a><span id="l17.1430" class="difflineplus">+                       label=&quot;&amp;unreadMsgsCmd.label;&quot;</span>
<a href="#l17.1431"></a><span id="l17.1431" class="difflineplus">+                       disabled=&quot;true&quot;</span>
<a href="#l17.1432"></a><span id="l17.1432" class="difflineplus">+                       command=&quot;cmd_viewUnreadMsgs&quot;/&gt;</span>
<a href="#l17.1433"></a><span id="l17.1433" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewThreadsWithUnreadMenuItem&quot;</span>
<a href="#l17.1434"></a><span id="l17.1434" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1435"></a><span id="l17.1435" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1436"></a><span id="l17.1436" class="difflineplus">+                       name=&quot;viewmessages&quot;</span>
<a href="#l17.1437"></a><span id="l17.1437" class="difflineplus">+                       label=&quot;&amp;threadsWithUnreadCmd.label;&quot;</span>
<a href="#l17.1438"></a><span id="l17.1438" class="difflineplus">+                       disabled=&quot;true&quot;</span>
<a href="#l17.1439"></a><span id="l17.1439" class="difflineplus">+                       command=&quot;cmd_viewThreadsWithUnread&quot;/&gt;</span>
<a href="#l17.1440"></a><span id="l17.1440" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewWatchedThreadsWithUnreadMenuItem&quot;</span>
<a href="#l17.1441"></a><span id="l17.1441" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1442"></a><span id="l17.1442" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1443"></a><span id="l17.1443" class="difflineplus">+                       name=&quot;viewmessages&quot;</span>
<a href="#l17.1444"></a><span id="l17.1444" class="difflineplus">+                       label=&quot;&amp;watchedThreadsWithUnreadCmd.label;&quot;</span>
<a href="#l17.1445"></a><span id="l17.1445" class="difflineplus">+                       disabled=&quot;true&quot;</span>
<a href="#l17.1446"></a><span id="l17.1446" class="difflineplus">+                       command=&quot;cmd_viewWatchedThreadsWithUnread&quot;/&gt;</span>
<a href="#l17.1447"></a><span id="l17.1447" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_threadsAfterWatchedSeparator&quot;/&gt;</span>
<a href="#l17.1448"></a><span id="l17.1448" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewIgnoredThreadsMenuItem&quot;</span>
<a href="#l17.1449"></a><span id="l17.1449" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1450"></a><span id="l17.1450" class="difflineplus">+                       type=&quot;checkbox&quot;</span>
<a href="#l17.1451"></a><span id="l17.1451" class="difflineplus">+                       label=&quot;&amp;ignoredThreadsCmd.label;&quot;</span>
<a href="#l17.1452"></a><span id="l17.1452" class="difflineplus">+                       disabled=&quot;true&quot;</span>
<a href="#l17.1453"></a><span id="l17.1453" class="difflineplus">+                       command=&quot;cmd_viewIgnoredThreads&quot;/&gt;</span>
<a href="#l17.1454"></a><span id="l17.1454" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_threadsAfterIgnoredSeparator&quot;/&gt;</span>
<a href="#l17.1455"></a><span id="l17.1455" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_expandAllThreads&quot;</span>
<a href="#l17.1456"></a><span id="l17.1456" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1457"></a><span id="l17.1457" class="difflineplus">+                       label=&quot;&amp;expandAllThreadsCmd.label;&quot;</span>
<a href="#l17.1458"></a><span id="l17.1458" class="difflineplus">+                       key=&quot;key_expandAllThreads&quot;</span>
<a href="#l17.1459"></a><span id="l17.1459" class="difflineplus">+                       disabled=&quot;true&quot;</span>
<a href="#l17.1460"></a><span id="l17.1460" class="difflineplus">+                       command=&quot;cmd_expandAllThreads&quot;/&gt;</span>
<a href="#l17.1461"></a><span id="l17.1461" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_collapseAllThreads&quot;</span>
<a href="#l17.1462"></a><span id="l17.1462" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1463"></a><span id="l17.1463" class="difflineplus">+                       label=&quot;&amp;collapseAllThreadsCmd.label;&quot;</span>
<a href="#l17.1464"></a><span id="l17.1464" class="difflineplus">+                       key=&quot;key_collapseAllThreads&quot;</span>
<a href="#l17.1465"></a><span id="l17.1465" class="difflineplus">+                       disabled=&quot;true&quot;</span>
<a href="#l17.1466"></a><span id="l17.1466" class="difflineplus">+                       command=&quot;cmd_collapseAllThreads&quot;/&gt;</span>
<a href="#l17.1467"></a><span id="l17.1467" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.1468"></a><span id="l17.1468" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.1469"></a><span id="l17.1469" class="difflineplus">+</span>
<a href="#l17.1470"></a><span id="l17.1470" class="difflineplus">+    &lt;!-- View / Headers --&gt;</span>
<a href="#l17.1471"></a><span id="l17.1471" class="difflineplus">+    &lt;panelview id=&quot;appMenu-viewHeadersView&quot;</span>
<a href="#l17.1472"></a><span id="l17.1472" class="difflineplus">+               title=&quot;&amp;headersMenu.label;&quot;</span>
<a href="#l17.1473"></a><span id="l17.1473" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1474"></a><span id="l17.1474" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.1475"></a><span id="l17.1475" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewallheaders&quot;</span>
<a href="#l17.1476"></a><span id="l17.1476" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1477"></a><span id="l17.1477" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1478"></a><span id="l17.1478" class="difflineplus">+                       name=&quot;viewheadergroup&quot;</span>
<a href="#l17.1479"></a><span id="l17.1479" class="difflineplus">+                       label=&quot;&amp;headersAllCmd.label;&quot;</span>
<a href="#l17.1480"></a><span id="l17.1480" class="difflineplus">+                       command=&quot;cmd_viewAllHeader&quot;/&gt;</span>
<a href="#l17.1481"></a><span id="l17.1481" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_viewnormalheaders&quot;</span>
<a href="#l17.1482"></a><span id="l17.1482" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1483"></a><span id="l17.1483" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1484"></a><span id="l17.1484" class="difflineplus">+                       name=&quot;viewheadergroup&quot;</span>
<a href="#l17.1485"></a><span id="l17.1485" class="difflineplus">+                       label=&quot;&amp;headersNormalCmd.label;&quot;</span>
<a href="#l17.1486"></a><span id="l17.1486" class="difflineplus">+                       command=&quot;cmd_viewNormalHeader&quot;/&gt;</span>
<a href="#l17.1487"></a><span id="l17.1487" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.1488"></a><span id="l17.1488" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.1489"></a><span id="l17.1489" class="difflineplus">+</span>
<a href="#l17.1490"></a><span id="l17.1490" class="difflineplus">+    &lt;!-- View / Message Body As --&gt;</span>
<a href="#l17.1491"></a><span id="l17.1491" class="difflineplus">+    &lt;panelview id=&quot;appMenu-viewMessageBodyAsView&quot;</span>
<a href="#l17.1492"></a><span id="l17.1492" class="difflineplus">+               title=&quot;&amp;bodyMenu.label;&quot;</span>
<a href="#l17.1493"></a><span id="l17.1493" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1494"></a><span id="l17.1494" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.1495"></a><span id="l17.1495" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_bodyAllowHTML&quot;</span>
<a href="#l17.1496"></a><span id="l17.1496" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1497"></a><span id="l17.1497" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1498"></a><span id="l17.1498" class="difflineplus">+                       name=&quot;bodyPlaintextVsHTMLPref&quot;</span>
<a href="#l17.1499"></a><span id="l17.1499" class="difflineplus">+                       label=&quot;&amp;bodyAllowHTML.label;&quot;</span>
<a href="#l17.1500"></a><span id="l17.1500" class="difflineplus">+                       oncommand=&quot;MsgBodyAllowHTML()&quot;/&gt;</span>
<a href="#l17.1501"></a><span id="l17.1501" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_bodySanitized&quot;</span>
<a href="#l17.1502"></a><span id="l17.1502" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1503"></a><span id="l17.1503" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1504"></a><span id="l17.1504" class="difflineplus">+                       name=&quot;bodyPlaintextVsHTMLPref&quot;</span>
<a href="#l17.1505"></a><span id="l17.1505" class="difflineplus">+                       label=&quot;&amp;bodySanitized.label;&quot;</span>
<a href="#l17.1506"></a><span id="l17.1506" class="difflineplus">+                       oncommand=&quot;MsgBodySanitized()&quot;/&gt;</span>
<a href="#l17.1507"></a><span id="l17.1507" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_bodyAsPlaintext&quot;</span>
<a href="#l17.1508"></a><span id="l17.1508" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1509"></a><span id="l17.1509" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1510"></a><span id="l17.1510" class="difflineplus">+                       name=&quot;bodyPlaintextVsHTMLPref&quot;</span>
<a href="#l17.1511"></a><span id="l17.1511" class="difflineplus">+                       label=&quot;&amp;bodyAsPlaintext.label;&quot;</span>
<a href="#l17.1512"></a><span id="l17.1512" class="difflineplus">+                       oncommand=&quot;MsgBodyAsPlaintext()&quot;/&gt;</span>
<a href="#l17.1513"></a><span id="l17.1513" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_bodyAllParts&quot;</span>
<a href="#l17.1514"></a><span id="l17.1514" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1515"></a><span id="l17.1515" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1516"></a><span id="l17.1516" class="difflineplus">+                       name=&quot;bodyPlaintextVsHTMLPref&quot;</span>
<a href="#l17.1517"></a><span id="l17.1517" class="difflineplus">+                       label=&quot;&amp;bodyAllParts.label;&quot;</span>
<a href="#l17.1518"></a><span id="l17.1518" class="difflineplus">+                       oncommand=&quot;MsgBodyAllParts()&quot;/&gt;</span>
<a href="#l17.1519"></a><span id="l17.1519">       &lt;/vbox&gt;</span>
<a href="#l17.1520"></a><span id="l17.1520">     &lt;/panelview&gt;</span>
<a href="#l17.1521"></a><span id="l17.1521"> </span>
<a href="#l17.1522"></a><span id="l17.1522" class="difflineminus">-    &lt;panelview id=&quot;PanelUI-bookmarks&quot; flex=&quot;1&quot; class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1523"></a><span id="l17.1523" class="difflineplus">+    &lt;!-- View / Feed Message Body As --&gt;</span>
<a href="#l17.1524"></a><span id="l17.1524" class="difflineplus">+    &lt;panelview id=&quot;appMenu-viewFeedsView&quot;</span>
<a href="#l17.1525"></a><span id="l17.1525" class="difflineplus">+               title=&quot;&amp;bodyMenuFeed.label;&quot;</span>
<a href="#l17.1526"></a><span id="l17.1526" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1527"></a><span id="l17.1527">       &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.1528"></a><span id="l17.1528" class="difflineminus">-        &lt;toolbarbutton id=&quot;panelMenuBookmarkThisPage&quot;</span>
<a href="#l17.1529"></a><span id="l17.1529" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_bodyFeedGlobalWebPage&quot;</span>
<a href="#l17.1530"></a><span id="l17.1530" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1531"></a><span id="l17.1531" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1532"></a><span id="l17.1532" class="difflineplus">+                       name=&quot;viewFeedSummaryGroup&quot;</span>
<a href="#l17.1533"></a><span id="l17.1533" class="difflineplus">+                       label=&quot;&amp;viewFeedWebPage.label;&quot;</span>
<a href="#l17.1534"></a><span id="l17.1534" class="difflineplus">+                       observes=&quot;bodyFeedGlobalWebPage&quot;</span>
<a href="#l17.1535"></a><span id="l17.1535" class="difflineplus">+                       oncommand=&quot;FeedMessageHandler.onSelectPref = 0&quot;/&gt;</span>
<a href="#l17.1536"></a><span id="l17.1536" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_bodyFeedGlobalSummary&quot;</span>
<a href="#l17.1537"></a><span id="l17.1537">                        class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1538"></a><span id="l17.1538" class="difflineminus">-                       command=&quot;Browser:AddBookmarkAs&quot;</span>
<a href="#l17.1539"></a><span id="l17.1539" class="difflineminus">-                       onclick=&quot;PanelUI.hide();&quot;/&gt;</span>
<a href="#l17.1540"></a><span id="l17.1540" class="difflineminus">-        &lt;toolbarbutton id=&quot;panelMenu_bookmarkingTools&quot;</span>
<a href="#l17.1541"></a><span id="l17.1541" class="difflineminus">-                       label=&quot;&amp;bookmarkingTools.label;&quot;</span>
<a href="#l17.1542"></a><span id="l17.1542" class="difflineminus">-                       class=&quot;subviewbutton subviewbutton-iconic subviewbutton-nav&quot;</span>
<a href="#l17.1543"></a><span id="l17.1543" class="difflineminus">-                       closemenu=&quot;none&quot;</span>
<a href="#l17.1544"></a><span id="l17.1544" class="difflineminus">-                       oncommand=&quot;BookmarkingUI.showBookmarkingTools(this);&quot;/&gt;</span>
<a href="#l17.1545"></a><span id="l17.1545" class="difflineminus">-        &lt;toolbarbutton id=&quot;panelMenu_searchBookmarks&quot;</span>
<a href="#l17.1546"></a><span id="l17.1546" class="difflineminus">-                       label=&quot;&amp;searchBookmarks.label;&quot;</span>
<a href="#l17.1547"></a><span id="l17.1547" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1548"></a><span id="l17.1548" class="difflineplus">+                       name=&quot;viewFeedSummaryGroup&quot;</span>
<a href="#l17.1549"></a><span id="l17.1549" class="difflineplus">+                       label=&quot;&amp;viewFeedSummary.label;&quot;</span>
<a href="#l17.1550"></a><span id="l17.1550" class="difflineplus">+                       observes=&quot;bodyFeedGlobalSummary&quot;</span>
<a href="#l17.1551"></a><span id="l17.1551" class="difflineplus">+                       oncommand=&quot;FeedMessageHandler.onSelectPref = 1&quot;/&gt;</span>
<a href="#l17.1552"></a><span id="l17.1552" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_bodyFeedPerFolderPref&quot;</span>
<a href="#l17.1553"></a><span id="l17.1553" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1554"></a><span id="l17.1554" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1555"></a><span id="l17.1555" class="difflineplus">+                       name=&quot;viewFeedSummaryGroup&quot;</span>
<a href="#l17.1556"></a><span id="l17.1556" class="difflineplus">+                       label=&quot;&amp;viewFeedSummaryFeedPropsPref.label;&quot;</span>
<a href="#l17.1557"></a><span id="l17.1557" class="difflineplus">+                       observes=&quot;bodyFeedPerFolderPref&quot;</span>
<a href="#l17.1558"></a><span id="l17.1558" class="difflineplus">+                       oncommand=&quot;FeedMessageHandler.onSelectPref = 2&quot;/&gt;</span>
<a href="#l17.1559"></a><span id="l17.1559" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_viewFeedSummarySeparator&quot;/&gt;</span>
<a href="#l17.1560"></a><span id="l17.1560" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_bodyFeedSummaryAllowHTML&quot;</span>
<a href="#l17.1561"></a><span id="l17.1561" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1562"></a><span id="l17.1562" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1563"></a><span id="l17.1563" class="difflineplus">+                       name=&quot;viewFeedBodyHTMLGroup&quot;</span>
<a href="#l17.1564"></a><span id="l17.1564" class="difflineplus">+                       label=&quot;&amp;bodyAllowHTML.label;&quot;</span>
<a href="#l17.1565"></a><span id="l17.1565" class="difflineplus">+                       oncommand=&quot;MsgFeedBodyRenderPrefs(false, 0, 0)&quot;/&gt;</span>
<a href="#l17.1566"></a><span id="l17.1566" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_bodyFeedSummarySanitized&quot;</span>
<a href="#l17.1567"></a><span id="l17.1567" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1568"></a><span id="l17.1568" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1569"></a><span id="l17.1569" class="difflineplus">+                       name=&quot;viewFeedBodyHTMLGroup&quot;</span>
<a href="#l17.1570"></a><span id="l17.1570" class="difflineplus">+                       label=&quot;&amp;bodySanitized.label;&quot;</span>
<a href="#l17.1571"></a><span id="l17.1571" class="difflineplus">+                       oncommand=&quot;MsgFeedBodyRenderPrefs(false, 3, gDisallow_classes_no_html)&quot;/&gt;</span>
<a href="#l17.1572"></a><span id="l17.1572" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_bodyFeedSummaryAsPlaintext&quot;</span>
<a href="#l17.1573"></a><span id="l17.1573">                        class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1574"></a><span id="l17.1574" class="difflineminus">-                       oncommand=&quot;PlacesCommandHook.searchBookmarks(); PanelUI.hide();&quot;/&gt;</span>
<a href="#l17.1575"></a><span id="l17.1575" class="difflineminus">-        &lt;toolbarseparator/&gt;</span>
<a href="#l17.1576"></a><span id="l17.1576" class="difflineminus">-        &lt;label id=&quot;panelMenu_recentBookmarks&quot;</span>
<a href="#l17.1577"></a><span id="l17.1577" class="difflineminus">-               value=&quot;&amp;recentBookmarks.label;&quot;</span>
<a href="#l17.1578"></a><span id="l17.1578" class="difflineminus">-               class=&quot;subview-subheader&quot;/&gt;</span>
<a href="#l17.1579"></a><span id="l17.1579" class="difflineminus">-        &lt;toolbaritem id=&quot;panelMenu_bookmarksMenu&quot;</span>
<a href="#l17.1580"></a><span id="l17.1580" class="difflineminus">-                     orient=&quot;vertical&quot;</span>
<a href="#l17.1581"></a><span id="l17.1581" class="difflineminus">-                     smoothscroll=&quot;false&quot;</span>
<a href="#l17.1582"></a><span id="l17.1582" class="difflineminus">-                     flatList=&quot;true&quot;</span>
<a href="#l17.1583"></a><span id="l17.1583" class="difflineminus">-                     tooltip=&quot;bhTooltip&quot;&gt;</span>
<a href="#l17.1584"></a><span id="l17.1584" class="difflineminus">-          &lt;!-- bookmarks menu items will go here --&gt;</span>
<a href="#l17.1585"></a><span id="l17.1585" class="difflineminus">-        &lt;/toolbaritem&gt;</span>
<a href="#l17.1586"></a><span id="l17.1586" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1587"></a><span id="l17.1587" class="difflineplus">+                       name=&quot;viewFeedBodyHTMLGroup&quot;</span>
<a href="#l17.1588"></a><span id="l17.1588" class="difflineplus">+                       label=&quot;&amp;bodyAsPlaintext.label;&quot;</span>
<a href="#l17.1589"></a><span id="l17.1589" class="difflineplus">+                       oncommand=&quot;MsgFeedBodyRenderPrefs(true, 1, gDisallow_classes_no_html)&quot;/&gt;</span>
<a href="#l17.1590"></a><span id="l17.1590">       &lt;/vbox&gt;</span>
<a href="#l17.1591"></a><span id="l17.1591" class="difflineminus">-      &lt;toolbarbutton id=&quot;panelMenu_showAllBookmarks&quot;</span>
<a href="#l17.1592"></a><span id="l17.1592" class="difflineminus">-                     label=&quot;&amp;showAllBookmarks2.label;&quot;</span>
<a href="#l17.1593"></a><span id="l17.1593" class="difflineminus">-                     class=&quot;subviewbutton panel-subview-footer&quot;</span>
<a href="#l17.1594"></a><span id="l17.1594" class="difflineminus">-                     command=&quot;Browser:ShowAllBookmarks&quot;</span>
<a href="#l17.1595"></a><span id="l17.1595" class="difflineminus">-                     onclick=&quot;PanelUI.hide();&quot;/&gt;</span>
<a href="#l17.1596"></a><span id="l17.1596" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.1597"></a><span id="l17.1597" class="difflineplus">+</span>
<a href="#l17.1598"></a><span id="l17.1598" class="difflineplus">+    &lt;!-- View / Zoom --&gt;</span>
<a href="#l17.1599"></a><span id="l17.1599" class="difflineplus">+    &lt;panelview id=&quot;appMenu-viewZoomView&quot;</span>
<a href="#l17.1600"></a><span id="l17.1600" class="difflineplus">+               title=&quot;&amp;fullZoom.label;&quot;</span>
<a href="#l17.1601"></a><span id="l17.1601" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1602"></a><span id="l17.1602" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.1603"></a><span id="l17.1603" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_fullZoomEnlarge&quot;</span>
<a href="#l17.1604"></a><span id="l17.1604" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1605"></a><span id="l17.1605" class="difflineplus">+                       label=&quot;&amp;fullZoomEnlargeCmd.label;&quot;</span>
<a href="#l17.1606"></a><span id="l17.1606" class="difflineplus">+                       key=&quot;key_fullZoomEnlarge&quot;</span>
<a href="#l17.1607"></a><span id="l17.1607" class="difflineplus">+                       command=&quot;cmd_fullZoomEnlarge&quot;/&gt;</span>
<a href="#l17.1608"></a><span id="l17.1608" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_fullZoomReduce&quot;</span>
<a href="#l17.1609"></a><span id="l17.1609" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1610"></a><span id="l17.1610" class="difflineplus">+                       label=&quot;&amp;fullZoomReduceCmd.label;&quot;</span>
<a href="#l17.1611"></a><span id="l17.1611" class="difflineplus">+                       key=&quot;key_fullZoomReduce&quot;</span>
<a href="#l17.1612"></a><span id="l17.1612" class="difflineplus">+                       command=&quot;cmd_fullZoomReduce&quot;/&gt;</span>
<a href="#l17.1613"></a><span id="l17.1613" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_fullZoomAfterReduceSeparator&quot;/&gt;</span>
<a href="#l17.1614"></a><span id="l17.1614" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_fullZoomReset&quot;</span>
<a href="#l17.1615"></a><span id="l17.1615" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1616"></a><span id="l17.1616" class="difflineplus">+                       label=&quot;&amp;fullZoomResetCmd.label;&quot;</span>
<a href="#l17.1617"></a><span id="l17.1617" class="difflineplus">+                       key=&quot;key_fullZoomReset&quot;</span>
<a href="#l17.1618"></a><span id="l17.1618" class="difflineplus">+                       command=&quot;cmd_fullZoomReset&quot;/&gt;</span>
<a href="#l17.1619"></a><span id="l17.1619" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_fullZoomAfterResetSeparator&quot;/&gt;</span>
<a href="#l17.1620"></a><span id="l17.1620" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_fullZoomToggle&quot;</span>
<a href="#l17.1621"></a><span id="l17.1621" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1622"></a><span id="l17.1622" class="difflineplus">+                       label=&quot;&amp;fullZoomToggleCmd.label;&quot;</span>
<a href="#l17.1623"></a><span id="l17.1623" class="difflineplus">+                       type=&quot;checkbox&quot;</span>
<a href="#l17.1624"></a><span id="l17.1624" class="difflineplus">+                       command=&quot;cmd_fullZoomToggle&quot;</span>
<a href="#l17.1625"></a><span id="l17.1625" class="difflineplus">+                       checked=&quot;false&quot;/&gt;</span>
<a href="#l17.1626"></a><span id="l17.1626" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.1627"></a><span id="l17.1627" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.1628"></a><span id="l17.1628" class="difflineplus">+</span>
<a href="#l17.1629"></a><span id="l17.1629" class="difflineplus">+    &lt;!-- View / Text Encoding --&gt;</span>
<a href="#l17.1630"></a><span id="l17.1630" class="difflineplus">+    &lt;!-- Populated when shown via event listener. --&gt;</span>
<a href="#l17.1631"></a><span id="l17.1631" class="difflineplus">+    &lt;panelview id=&quot;appMenu-viewTextEncodingView&quot;</span>
<a href="#l17.1632"></a><span id="l17.1632" class="difflineplus">+               title=&quot;&amp;charsetMenu2.label;&quot;</span>
<a href="#l17.1633"></a><span id="l17.1633" class="difflineplus">+               class=&quot;PanelUI-subView&quot;</span>
<a href="#l17.1634"></a><span id="l17.1634" class="difflineplus">+               oncommand=&quot;MailSetCharacterSet(event)&quot;&gt;</span>
<a href="#l17.1635"></a><span id="l17.1635" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;/&gt;</span>
<a href="#l17.1636"></a><span id="l17.1636" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.1637"></a><span id="l17.1637" class="difflineplus">+</span>
<a href="#l17.1638"></a><span id="l17.1638" class="difflineplus">+    &lt;!-- View / Text Encoding / Auto-Detect --&gt;</span>
<a href="#l17.1639"></a><span id="l17.1639" class="difflineplus">+    &lt;!-- Populated when shown via event listener. --&gt;</span>
<a href="#l17.1640"></a><span id="l17.1640" class="difflineplus">+    &lt;panelview id=&quot;appMenu-viewTextEncodingDetectorsView&quot;</span>
<a href="#l17.1641"></a><span id="l17.1641" class="difflineplus">+               class=&quot;PanelUI-subView&quot;</span>
<a href="#l17.1642"></a><span id="l17.1642" class="difflineplus">+               oncommand=&quot;PanelUI.setTextEncodingDetector(event)&quot;&gt;</span>
<a href="#l17.1643"></a><span id="l17.1643" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;/&gt;</span>
<a href="#l17.1644"></a><span id="l17.1644">     &lt;/panelview&gt;</span>
<a href="#l17.1645"></a><span id="l17.1645"> </span>
<a href="#l17.1646"></a><span id="l17.1646" class="difflineminus">-    &lt;panelview id=&quot;PanelUI-containers&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l17.1647"></a><span id="l17.1647" class="difflineminus">-      &lt;vbox id=&quot;PanelUI-containersItems&quot;/&gt;</span>
<a href="#l17.1648"></a><span id="l17.1648" class="difflineminus">-    &lt;/panelview&gt;</span>
<a href="#l17.1649"></a><span id="l17.1649" class="difflineminus">-</span>
<a href="#l17.1650"></a><span id="l17.1650" class="difflineminus">-    &lt;panelview id=&quot;PanelUI-helpView&quot; flex=&quot;1&quot; class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1651"></a><span id="l17.1651" class="difflineminus">-      &lt;vbox id=&quot;PanelUI-helpItems&quot; class=&quot;panel-subview-body&quot;/&gt;</span>
<a href="#l17.1652"></a><span id="l17.1652" class="difflineminus">-    &lt;/panelview&gt;</span>
<a href="#l17.1653"></a><span id="l17.1653" class="difflineminus">-</span>
<a href="#l17.1654"></a><span id="l17.1654" class="difflineminus">-    &lt;panelview id=&quot;PanelUI-developer&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l17.1655"></a><span id="l17.1655" class="difflineminus">-      &lt;vbox id=&quot;PanelUI-developerItems&quot; class=&quot;panel-subview-body&quot;/&gt;</span>
<a href="#l17.1656"></a><span id="l17.1656" class="difflineplus">+    &lt;!-- Go --&gt;</span>
<a href="#l17.1657"></a><span id="l17.1657" class="difflineplus">+    &lt;panelview id=&quot;appMenu-goView&quot;</span>
<a href="#l17.1658"></a><span id="l17.1658" class="difflineplus">+               title=&quot;&amp;goMenu.label;&quot;</span>
<a href="#l17.1659"></a><span id="l17.1659" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1660"></a><span id="l17.1660" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.1661"></a><span id="l17.1661" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_goNextMenu&quot;</span>
<a href="#l17.1662"></a><span id="l17.1662" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.1663"></a><span id="l17.1663" class="difflineplus">+                       label=&quot;&amp;nextMenu.label;&quot;</span>
<a href="#l17.1664"></a><span id="l17.1664" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.1665"></a><span id="l17.1665" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-goNextView', this)&quot;/&gt;</span>
<a href="#l17.1666"></a><span id="l17.1666" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_goPreviousMenu&quot;</span>
<a href="#l17.1667"></a><span id="l17.1667" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.1668"></a><span id="l17.1668" class="difflineplus">+                       label=&quot;&amp;prevMenu.label;&quot;</span>
<a href="#l17.1669"></a><span id="l17.1669" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.1670"></a><span id="l17.1670" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-goPreviousView', this)&quot;/&gt;</span>
<a href="#l17.1671"></a><span id="l17.1671" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_goForward&quot;</span>
<a href="#l17.1672"></a><span id="l17.1672" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1673"></a><span id="l17.1673" class="difflineplus">+                       label=&quot;&amp;goForwardCmd.label;&quot;</span>
<a href="#l17.1674"></a><span id="l17.1674" class="difflineplus">+                       key=&quot;key_goForward&quot;</span>
<a href="#l17.1675"></a><span id="l17.1675" class="difflineplus">+                       command=&quot;cmd_goForward&quot;/&gt;</span>
<a href="#l17.1676"></a><span id="l17.1676" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_goBack&quot;</span>
<a href="#l17.1677"></a><span id="l17.1677" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1678"></a><span id="l17.1678" class="difflineplus">+                       label=&quot;&amp;goBackCmd.label;&quot;</span>
<a href="#l17.1679"></a><span id="l17.1679" class="difflineplus">+                       key=&quot;key_goBack&quot;</span>
<a href="#l17.1680"></a><span id="l17.1680" class="difflineplus">+                       command=&quot;cmd_goBack&quot;/&gt;</span>
<a href="#l17.1681"></a><span id="l17.1681" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_goNextSeparator&quot;/&gt;</span>
<a href="#l17.1682"></a><span id="l17.1682" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_goChat&quot;</span>
<a href="#l17.1683"></a><span id="l17.1683" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1684"></a><span id="l17.1684" class="difflineplus">+                       label=&quot;&amp;goChatCmd.label;&quot;</span>
<a href="#l17.1685"></a><span id="l17.1685" class="difflineplus">+                       key=&quot;key_goChat&quot;</span>
<a href="#l17.1686"></a><span id="l17.1686" class="difflineplus">+                       command=&quot;cmd_chat&quot;/&gt;</span>
<a href="#l17.1687"></a><span id="l17.1687" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_goChatSeparator&quot;/&gt;</span>
<a href="#l17.1688"></a><span id="l17.1688" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_goFolderMenu&quot;</span>
<a href="#l17.1689"></a><span id="l17.1689" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.1690"></a><span id="l17.1690" class="difflineplus">+                       label=&quot;&amp;folderMenu.label;&quot;</span>
<a href="#l17.1691"></a><span id="l17.1691" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.1692"></a><span id="l17.1692" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-goFolderView', this)&quot;/&gt;</span>
<a href="#l17.1693"></a><span id="l17.1693" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_goFolderSeparator&quot;/&gt;</span>
<a href="#l17.1694"></a><span id="l17.1694" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_goRecentlyClosedTabs&quot;</span>
<a href="#l17.1695"></a><span id="l17.1695" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.1696"></a><span id="l17.1696" class="difflineplus">+                       label=&quot;&amp;goRecentlyClosedTabs.label;&quot;</span>
<a href="#l17.1697"></a><span id="l17.1697" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.1698"></a><span id="l17.1698" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-goRecentlyClosedTabsView', this)&quot;/&gt;</span>
<a href="#l17.1699"></a><span id="l17.1699" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_goRecentlyClosedTabsSeparator&quot;/&gt;</span>
<a href="#l17.1700"></a><span id="l17.1700" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_goStartPage&quot;</span>
<a href="#l17.1701"></a><span id="l17.1701" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1702"></a><span id="l17.1702" class="difflineplus">+                       label=&quot;&amp;startPageCmd.label;&quot;</span>
<a href="#l17.1703"></a><span id="l17.1703" class="difflineplus">+                       key=&quot;key_goStartPage&quot;</span>
<a href="#l17.1704"></a><span id="l17.1704" class="difflineplus">+                       command=&quot;cmd_goStartPage&quot;/&gt;</span>
<a href="#l17.1705"></a><span id="l17.1705" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.1706"></a><span id="l17.1706">     &lt;/panelview&gt;</span>
<a href="#l17.1707"></a><span id="l17.1707"> </span>
<a href="#l17.1708"></a><span id="l17.1708" class="difflineminus">-    &lt;panelview id=&quot;PanelUI-characterEncodingView&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l17.1709"></a><span id="l17.1709" class="difflineplus">+    &lt;!-- Go / Next --&gt;</span>
<a href="#l17.1710"></a><span id="l17.1710" class="difflineplus">+    &lt;panelview id=&quot;appMenu-goNextView&quot;</span>
<a href="#l17.1711"></a><span id="l17.1711" class="difflineplus">+               title=&quot;&amp;nextMenu.label;&quot;</span>
<a href="#l17.1712"></a><span id="l17.1712" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1713"></a><span id="l17.1713">       &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.1714"></a><span id="l17.1714" class="difflineminus">-        &lt;vbox id=&quot;PanelUI-characterEncodingView-pinned&quot;</span>
<a href="#l17.1715"></a><span id="l17.1715" class="difflineminus">-              class=&quot;PanelUI-characterEncodingView-list&quot;/&gt;</span>
<a href="#l17.1716"></a><span id="l17.1716" class="difflineminus">-        &lt;toolbarseparator/&gt;</span>
<a href="#l17.1717"></a><span id="l17.1717" class="difflineminus">-        &lt;vbox id=&quot;PanelUI-characterEncodingView-charsets&quot;</span>
<a href="#l17.1718"></a><span id="l17.1718" class="difflineminus">-              class=&quot;PanelUI-characterEncodingView-list&quot;/&gt;</span>
<a href="#l17.1719"></a><span id="l17.1719" class="difflineminus">-        &lt;toolbarseparator/&gt;</span>
<a href="#l17.1720"></a><span id="l17.1720" class="difflineminus">-        &lt;vbox&gt;</span>
<a href="#l17.1721"></a><span id="l17.1721" class="difflineminus">-          &lt;label id=&quot;PanelUI-characterEncodingView-autodetect-label&quot;/&gt;</span>
<a href="#l17.1722"></a><span id="l17.1722" class="difflineminus">-          &lt;vbox id=&quot;PanelUI-characterEncodingView-autodetect&quot;</span>
<a href="#l17.1723"></a><span id="l17.1723" class="difflineminus">-                class=&quot;PanelUI-characterEncodingView-list&quot;/&gt;</span>
<a href="#l17.1724"></a><span id="l17.1724" class="difflineminus">-        &lt;/vbox&gt;</span>
<a href="#l17.1725"></a><span id="l17.1725" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_nextMsg&quot;</span>
<a href="#l17.1726"></a><span id="l17.1726" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1727"></a><span id="l17.1727" class="difflineplus">+                       label=&quot;&amp;nextMsgCmd.label;&quot;</span>
<a href="#l17.1728"></a><span id="l17.1728" class="difflineplus">+                       key=&quot;key_nextMsg&quot;</span>
<a href="#l17.1729"></a><span id="l17.1729" class="difflineplus">+                       command=&quot;cmd_nextMsg&quot;/&gt;</span>
<a href="#l17.1730"></a><span id="l17.1730" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_nextUnreadMsg&quot;</span>
<a href="#l17.1731"></a><span id="l17.1731" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1732"></a><span id="l17.1732" class="difflineplus">+                       label=&quot;&amp;nextUnreadMsgCmd.label;&quot;</span>
<a href="#l17.1733"></a><span id="l17.1733" class="difflineplus">+                       key=&quot;key_nextUnreadMsg&quot;</span>
<a href="#l17.1734"></a><span id="l17.1734" class="difflineplus">+                       command=&quot;cmd_nextUnreadMsg&quot;/&gt;</span>
<a href="#l17.1735"></a><span id="l17.1735" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_nextFlaggedMsg&quot;</span>
<a href="#l17.1736"></a><span id="l17.1736" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1737"></a><span id="l17.1737" class="difflineplus">+                       label=&quot;&amp;nextStarredMsgCmd.label;&quot;</span>
<a href="#l17.1738"></a><span id="l17.1738" class="difflineplus">+                       command=&quot;cmd_nextFlaggedMsg&quot;/&gt;</span>
<a href="#l17.1739"></a><span id="l17.1739" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_goNextAfterFlaggedSeparator&quot;/&gt;</span>
<a href="#l17.1740"></a><span id="l17.1740" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_nextUnreadThread&quot;</span>
<a href="#l17.1741"></a><span id="l17.1741" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1742"></a><span id="l17.1742" class="difflineplus">+                       label=&quot;&amp;nextUnreadThread.label;&quot;</span>
<a href="#l17.1743"></a><span id="l17.1743" class="difflineplus">+                       key=&quot;key_nextUnreadThread&quot;</span>
<a href="#l17.1744"></a><span id="l17.1744" class="difflineplus">+                       command=&quot;cmd_nextUnreadThread&quot;/&gt;</span>
<a href="#l17.1745"></a><span id="l17.1745" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.1746"></a><span id="l17.1746" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.1747"></a><span id="l17.1747" class="difflineplus">+</span>
<a href="#l17.1748"></a><span id="l17.1748" class="difflineplus">+    &lt;!-- Go / Previous --&gt;</span>
<a href="#l17.1749"></a><span id="l17.1749" class="difflineplus">+    &lt;panelview id=&quot;appMenu-goPreviousView&quot;</span>
<a href="#l17.1750"></a><span id="l17.1750" class="difflineplus">+               title=&quot;&amp;prevMenu.label;&quot;</span>
<a href="#l17.1751"></a><span id="l17.1751" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1752"></a><span id="l17.1752" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.1753"></a><span id="l17.1753" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_prevMsg&quot;</span>
<a href="#l17.1754"></a><span id="l17.1754" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1755"></a><span id="l17.1755" class="difflineplus">+                       label=&quot;&amp;prevMsgCmd.label;&quot;</span>
<a href="#l17.1756"></a><span id="l17.1756" class="difflineplus">+                       key=&quot;key_previousMsg&quot;</span>
<a href="#l17.1757"></a><span id="l17.1757" class="difflineplus">+                       command=&quot;cmd_previousMsg&quot;/&gt;</span>
<a href="#l17.1758"></a><span id="l17.1758" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_prevUnreadMsg&quot;</span>
<a href="#l17.1759"></a><span id="l17.1759" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1760"></a><span id="l17.1760" class="difflineplus">+                       label=&quot;&amp;prevUnreadMsgCmd.label;&quot;</span>
<a href="#l17.1761"></a><span id="l17.1761" class="difflineplus">+                       key=&quot;key_previousUnreadMsg&quot;</span>
<a href="#l17.1762"></a><span id="l17.1762" class="difflineplus">+                       command=&quot;cmd_previousUnreadMsg&quot;/&gt;</span>
<a href="#l17.1763"></a><span id="l17.1763" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_prevFlaggedMsg&quot;</span>
<a href="#l17.1764"></a><span id="l17.1764" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1765"></a><span id="l17.1765" class="difflineplus">+                       label=&quot;&amp;prevStarredMsgCmd.label;&quot;</span>
<a href="#l17.1766"></a><span id="l17.1766" class="difflineplus">+                       command=&quot;cmd_previousFlaggedMsg&quot;/&gt;</span>
<a href="#l17.1767"></a><span id="l17.1767" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.1768"></a><span id="l17.1768" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.1769"></a><span id="l17.1769" class="difflineplus">+</span>
<a href="#l17.1770"></a><span id="l17.1770" class="difflineplus">+    &lt;!-- Go / Folder --&gt;</span>
<a href="#l17.1771"></a><span id="l17.1771" class="difflineplus">+    &lt;panelview id=&quot;appMenu-goFolderView&quot;</span>
<a href="#l17.1772"></a><span id="l17.1772" class="difflineplus">+               title=&quot;&amp;folderMenu.label;&quot;</span>
<a href="#l17.1773"></a><span id="l17.1773" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1774"></a><span id="l17.1774" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.1775"></a><span id="l17.1775" class="difflineplus">+        &lt;!-- TODO appmenu dynamically populate --&gt;</span>
<a href="#l17.1776"></a><span id="l17.1776" class="difflineplus">+        &lt;menu id=&quot;appmenu_goFolderMenu&quot;</span>
<a href="#l17.1777"></a><span id="l17.1777" class="difflineplus">+              label=&quot;&amp;folderMenu.label;&quot;</span>
<a href="#l17.1778"></a><span id="l17.1778" class="difflineplus">+              command=&quot;cmd_goFolder&quot;&gt;</span>
<a href="#l17.1779"></a><span id="l17.1779" class="difflineplus">+          &lt;menupopup is=&quot;folder-menupopup&quot; id=&quot;appmenu_GoFolderPopup&quot;</span>
<a href="#l17.1780"></a><span id="l17.1780" class="difflineplus">+                     showFileHereLabel=&quot;true&quot;</span>
<a href="#l17.1781"></a><span id="l17.1781" class="difflineplus">+                     showRecent=&quot;true&quot;</span>
<a href="#l17.1782"></a><span id="l17.1782" class="difflineplus">+                     recentLabel=&quot;&amp;contextMoveCopyMsgRecentMenu.label;&quot;/&gt;</span>
<a href="#l17.1783"></a><span id="l17.1783" class="difflineplus">+        &lt;/menu&gt;</span>
<a href="#l17.1784"></a><span id="l17.1784">       &lt;/vbox&gt;</span>
<a href="#l17.1785"></a><span id="l17.1785">     &lt;/panelview&gt;</span>
<a href="#l17.1786"></a><span id="l17.1786"> </span>
<a href="#l17.1787"></a><span id="l17.1787" class="difflineminus">-    &lt;panelview id=&quot;PanelUI-panicView&quot; flex=&quot;1&quot;</span>
<a href="#l17.1788"></a><span id="l17.1788" class="difflineminus">-               descriptionheightworkaround=&quot;true&quot;&gt;</span>
<a href="#l17.1789"></a><span id="l17.1789" class="difflineminus">-      &lt;!-- This is constructed in CustomizableWidgets.jsm --&gt;</span>
<a href="#l17.1790"></a><span id="l17.1790" class="difflineplus">+    &lt;!-- Go / Recently Closed Tabs --&gt;</span>
<a href="#l17.1791"></a><span id="l17.1791" class="difflineplus">+    &lt;!-- Dynamically populated when shown. --&gt;</span>
<a href="#l17.1792"></a><span id="l17.1792" class="difflineplus">+    &lt;!-- TODO appmenu - what about this 'observes' bit?</span>
<a href="#l17.1793"></a><span id="l17.1793" class="difflineplus">+        &lt;menu id=&quot;appmenu_goRecentlyClosedTabs&quot;</span>
<a href="#l17.1794"></a><span id="l17.1794" class="difflineplus">+                  label=&quot;&amp;goRecentlyClosedTabs.label;&quot;</span>
<a href="#l17.1795"></a><span id="l17.1795" class="difflineplus">+                  observes=&quot;cmd_undoCloseTab&quot;&gt;</span>
<a href="#l17.1796"></a><span id="l17.1796" class="difflineplus">+    --&gt;</span>
<a href="#l17.1797"></a><span id="l17.1797" class="difflineplus">+    &lt;panelview id=&quot;appMenu-goRecentlyClosedTabsView&quot;</span>
<a href="#l17.1798"></a><span id="l17.1798" class="difflineplus">+               title=&quot;&amp;goRecentlyClosedTabs.label;&quot;</span>
<a href="#l17.1799"></a><span id="l17.1799" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1800"></a><span id="l17.1800" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;/&gt;</span>
<a href="#l17.1801"></a><span id="l17.1801">     &lt;/panelview&gt;</span>
<a href="#l17.1802"></a><span id="l17.1802"> </span>
<a href="#l17.1803"></a><span id="l17.1803" class="difflineminus">-    &lt;panelview id=&quot;appMenu-moreView&quot; title=&quot;&amp;moreMenu.label;&quot; class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1804"></a><span id="l17.1804" class="difflineplus">+</span>
<a href="#l17.1805"></a><span id="l17.1805" class="difflineplus">+    &lt;!-- Message --&gt;</span>
<a href="#l17.1806"></a><span id="l17.1806" class="difflineplus">+    &lt;panelview id=&quot;appMenu-messageView&quot;</span>
<a href="#l17.1807"></a><span id="l17.1807" class="difflineplus">+               title=&quot;&amp;msgMenu.label;&quot;</span>
<a href="#l17.1808"></a><span id="l17.1808" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1809"></a><span id="l17.1809">       &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.1810"></a><span id="l17.1810" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-taskmanager-button&quot;</span>
<a href="#l17.1811"></a><span id="l17.1811" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_newMsgCmd&quot;</span>
<a href="#l17.1812"></a><span id="l17.1812" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1813"></a><span id="l17.1813" class="difflineplus">+                       label=&quot;&amp;newMsgCmd.label;&quot;</span>
<a href="#l17.1814"></a><span id="l17.1814" class="difflineplus">+                       key=&quot;key_newMessage2&quot;</span>
<a href="#l17.1815"></a><span id="l17.1815" class="difflineplus">+                       command=&quot;cmd_newMessage&quot;/&gt;</span>
<a href="#l17.1816"></a><span id="l17.1816" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_replyMainMenu&quot;</span>
<a href="#l17.1817"></a><span id="l17.1817" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1818"></a><span id="l17.1818" class="difflineplus">+                       label=&quot;&amp;replyMsgCmd.label;&quot;</span>
<a href="#l17.1819"></a><span id="l17.1819" class="difflineplus">+                       key=&quot;key_reply&quot;</span>
<a href="#l17.1820"></a><span id="l17.1820" class="difflineplus">+                       command=&quot;cmd_reply&quot;/&gt;</span>
<a href="#l17.1821"></a><span id="l17.1821" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_replyNewsgroupMainMenu&quot;</span>
<a href="#l17.1822"></a><span id="l17.1822">                        class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1823"></a><span id="l17.1823" class="difflineminus">-                       label=&quot;&amp;taskManagerCmd.label;&quot;</span>
<a href="#l17.1824"></a><span id="l17.1824" class="difflineminus">-                       oncommand=&quot;switchToTabHavingURI('about:performance', true)&quot;/&gt;</span>
<a href="#l17.1825"></a><span id="l17.1825" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-characterencoding-button&quot;</span>
<a href="#l17.1826"></a><span id="l17.1826" class="difflineplus">+                       label=&quot;&amp;replyNewsgroupCmd2.label;&quot;</span>
<a href="#l17.1827"></a><span id="l17.1827" class="difflineplus">+                       key=&quot;key_reply&quot;</span>
<a href="#l17.1828"></a><span id="l17.1828" class="difflineplus">+                       command=&quot;cmd_replyGroup&quot;/&gt;</span>
<a href="#l17.1829"></a><span id="l17.1829" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_replySenderMainMenu&quot;</span>
<a href="#l17.1830"></a><span id="l17.1830" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1831"></a><span id="l17.1831" class="difflineplus">+                       label=&quot;&amp;replySenderCmd.label;&quot;</span>
<a href="#l17.1832"></a><span id="l17.1832" class="difflineplus">+                       command=&quot;cmd_replySender&quot;/&gt;</span>
<a href="#l17.1833"></a><span id="l17.1833" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_replyToAll&quot;</span>
<a href="#l17.1834"></a><span id="l17.1834" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1835"></a><span id="l17.1835" class="difflineplus">+                       label=&quot;&amp;replyToAllMsgCmd.label;&quot;</span>
<a href="#l17.1836"></a><span id="l17.1836" class="difflineplus">+                       key=&quot;key_replyall&quot;</span>
<a href="#l17.1837"></a><span id="l17.1837" class="difflineplus">+                       command=&quot;cmd_replyall&quot;/&gt;</span>
<a href="#l17.1838"></a><span id="l17.1838" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_replyToList&quot;</span>
<a href="#l17.1839"></a><span id="l17.1839" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1840"></a><span id="l17.1840" class="difflineplus">+                       label=&quot;&amp;replyToListMsgCmd.label;&quot;</span>
<a href="#l17.1841"></a><span id="l17.1841" class="difflineplus">+                       key=&quot;key_replylist&quot;</span>
<a href="#l17.1842"></a><span id="l17.1842" class="difflineplus">+                       command=&quot;cmd_replylist&quot;/&gt;</span>
<a href="#l17.1843"></a><span id="l17.1843" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_forwardMsg&quot;</span>
<a href="#l17.1844"></a><span id="l17.1844" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1845"></a><span id="l17.1845" class="difflineplus">+                       label=&quot;&amp;forwardMsgCmd.label;&quot;</span>
<a href="#l17.1846"></a><span id="l17.1846" class="difflineplus">+                       key=&quot;key_forward&quot;</span>
<a href="#l17.1847"></a><span id="l17.1847" class="difflineplus">+                       command=&quot;cmd_forward&quot;/&gt;</span>
<a href="#l17.1848"></a><span id="l17.1848" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_forwardAsMenu&quot;</span>
<a href="#l17.1849"></a><span id="l17.1849">                        class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.1850"></a><span id="l17.1850" class="difflineminus">-                       label=&quot;&amp;charsetMenu2.label;&quot;</span>
<a href="#l17.1851"></a><span id="l17.1851" class="difflineplus">+                       label=&quot;&amp;forwardAsMenu.label;&quot;</span>
<a href="#l17.1852"></a><span id="l17.1852" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.1853"></a><span id="l17.1853" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-messageForwardAsView', this)&quot;/&gt;</span>
<a href="#l17.1854"></a><span id="l17.1854" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_editMsgAsNew&quot;</span>
<a href="#l17.1855"></a><span id="l17.1855" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1856"></a><span id="l17.1856" class="difflineplus">+                       label=&quot;&amp;editAsNewMsgCmd.label;&quot;</span>
<a href="#l17.1857"></a><span id="l17.1857" class="difflineplus">+                       key=&quot;key_editAsNew&quot;</span>
<a href="#l17.1858"></a><span id="l17.1858" class="difflineplus">+                       command=&quot;cmd_editAsNew&quot;/&gt;</span>
<a href="#l17.1859"></a><span id="l17.1859" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_editDraftMsg&quot;</span>
<a href="#l17.1860"></a><span id="l17.1860" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1861"></a><span id="l17.1861" class="difflineplus">+                       label=&quot;&amp;editDraftMsgCmd.label;&quot;</span>
<a href="#l17.1862"></a><span id="l17.1862" class="difflineplus">+                       command=&quot;cmd_editDraftMsg&quot;/&gt;</span>
<a href="#l17.1863"></a><span id="l17.1863" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_newMsgFromTemplateCmd&quot;</span>
<a href="#l17.1864"></a><span id="l17.1864" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1865"></a><span id="l17.1865" class="difflineplus">+                       label=&quot;&amp;newMsgFromTemplateCmd.label;&quot;</span>
<a href="#l17.1866"></a><span id="l17.1866" class="difflineplus">+                       key=&quot;key_newMsgFromTemplate&quot;</span>
<a href="#l17.1867"></a><span id="l17.1867" class="difflineplus">+                       command=&quot;cmd_newMsgFromTemplate&quot;/&gt;</span>
<a href="#l17.1868"></a><span id="l17.1868" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_editTemplateMsgCmd&quot;</span>
<a href="#l17.1869"></a><span id="l17.1869" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1870"></a><span id="l17.1870" class="difflineplus">+                       label=&quot;&amp;editTemplateMsgCmd.label;&quot;</span>
<a href="#l17.1871"></a><span id="l17.1871" class="difflineplus">+                       command=&quot;cmd_editTemplateMsg&quot;/&gt;</span>
<a href="#l17.1872"></a><span id="l17.1872" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_messageMenuAfterCompositionCommandsSeparator&quot;/&gt;</span>
<a href="#l17.1873"></a><span id="l17.1873" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_openMessageWindowMenuitem&quot;</span>
<a href="#l17.1874"></a><span id="l17.1874" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1875"></a><span id="l17.1875" class="difflineplus">+                       label=&quot;&amp;openMessageWindowCmd.label;&quot;</span>
<a href="#l17.1876"></a><span id="l17.1876" class="difflineplus">+                       key=&quot;key_openMessage&quot;</span>
<a href="#l17.1877"></a><span id="l17.1877" class="difflineplus">+                       command=&quot;cmd_openMessage&quot;/&gt;</span>
<a href="#l17.1878"></a><span id="l17.1878" class="difflineplus">+#ifdef MAIN_WINDOW</span>
<a href="#l17.1879"></a><span id="l17.1879" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_openConversationMenuitem&quot;</span>
<a href="#l17.1880"></a><span id="l17.1880" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1881"></a><span id="l17.1881" class="difflineplus">+                       label=&quot;&amp;openInConversationCmd.label;&quot;</span>
<a href="#l17.1882"></a><span id="l17.1882" class="difflineplus">+                       key=&quot;key_openConversation&quot;</span>
<a href="#l17.1883"></a><span id="l17.1883" class="difflineplus">+                       command=&quot;cmd_openConversation&quot;/&gt;</span>
<a href="#l17.1884"></a><span id="l17.1884" class="difflineplus">+#endif</span>
<a href="#l17.1885"></a><span id="l17.1885" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_openFeedMessage&quot;</span>
<a href="#l17.1886"></a><span id="l17.1886" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.1887"></a><span id="l17.1887" class="difflineplus">+                       label=&quot;&amp;openFeedMessage1.label;&quot;</span>
<a href="#l17.1888"></a><span id="l17.1888" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.1889"></a><span id="l17.1889" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-messageOpenFeedView', this)&quot;/&gt;</span>
<a href="#l17.1890"></a><span id="l17.1890" class="difflineplus">+#ifdef MAIN_WINDOW</span>
<a href="#l17.1891"></a><span id="l17.1891" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_messageAfterOpenMsgSeparator&quot;/&gt;</span>
<a href="#l17.1892"></a><span id="l17.1892" class="difflineplus">+#endif</span>
<a href="#l17.1893"></a><span id="l17.1893" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_tagMenu&quot;</span>
<a href="#l17.1894"></a><span id="l17.1894" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.1895"></a><span id="l17.1895" class="difflineplus">+                       label=&quot;&amp;tagMenu.label;&quot;</span>
<a href="#l17.1896"></a><span id="l17.1896" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.1897"></a><span id="l17.1897" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-messageTagView', this)&quot;/&gt;</span>
<a href="#l17.1898"></a><span id="l17.1898" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_markMenu&quot;</span>
<a href="#l17.1899"></a><span id="l17.1899" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.1900"></a><span id="l17.1900" class="difflineplus">+                       label=&quot;&amp;markMenu.label;&quot;</span>
<a href="#l17.1901"></a><span id="l17.1901">                        closemenu=&quot;none&quot;</span>
<a href="#l17.1902"></a><span id="l17.1902" class="difflineminus">-                       oncommand=&quot;PanelUI.showSubView('PanelUI-characterEncodingView', this)&quot;/&gt;</span>
<a href="#l17.1903"></a><span id="l17.1903" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-workoffline-button&quot;</span>
<a href="#l17.1904"></a><span id="l17.1904" class="difflineminus">-                       class=&quot;subviewbutton&quot;</span>
<a href="#l17.1905"></a><span id="l17.1905" class="difflineminus">-                       label=&quot;&amp;goOfflineCmd.label;&quot;</span>
<a href="#l17.1906"></a><span id="l17.1906" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-messageMarkView', this)&quot;/&gt;</span>
<a href="#l17.1907"></a><span id="l17.1907" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_messageMenuAfterMarkSeparator&quot;/&gt;</span>
<a href="#l17.1908"></a><span id="l17.1908" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_archiveMainMenu&quot;</span>
<a href="#l17.1909"></a><span id="l17.1909" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1910"></a><span id="l17.1910" class="difflineplus">+                       label=&quot;&amp;archiveMsgCmd.label;&quot;</span>
<a href="#l17.1911"></a><span id="l17.1911" class="difflineplus">+                       key=&quot;key_archive&quot;</span>
<a href="#l17.1912"></a><span id="l17.1912" class="difflineplus">+                       command=&quot;cmd_archive&quot;/&gt;</span>
<a href="#l17.1913"></a><span id="l17.1913" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_cancel&quot;</span>
<a href="#l17.1914"></a><span id="l17.1914" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1915"></a><span id="l17.1915" class="difflineplus">+                       command=&quot;cmd_cancel&quot;</span>
<a href="#l17.1916"></a><span id="l17.1916" class="difflineplus">+                       label=&quot;&amp;cancelNewsMsgCmd.label;&quot;/&gt;</span>
<a href="#l17.1917"></a><span id="l17.1917" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_moveMenu&quot;</span>
<a href="#l17.1918"></a><span id="l17.1918" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.1919"></a><span id="l17.1919" class="difflineplus">+                       label=&quot;&amp;moveMsgToMenu.label;&quot;</span>
<a href="#l17.1920"></a><span id="l17.1920" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.1921"></a><span id="l17.1921" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-messageMoveToView', this)&quot;/&gt;</span>
<a href="#l17.1922"></a><span id="l17.1922" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_copyMenu&quot;</span>
<a href="#l17.1923"></a><span id="l17.1923" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.1924"></a><span id="l17.1924" class="difflineplus">+                       label=&quot;&amp;copyMsgToMenu.label;&quot;</span>
<a href="#l17.1925"></a><span id="l17.1925" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.1926"></a><span id="l17.1926" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-messageCopyToView', this)&quot;/&gt;</span>
<a href="#l17.1927"></a><span id="l17.1927" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_moveToFolderAgain&quot;</span>
<a href="#l17.1928"></a><span id="l17.1928" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1929"></a><span id="l17.1929" class="difflineplus">+                       command=&quot;cmd_moveToFolderAgain&quot;</span>
<a href="#l17.1930"></a><span id="l17.1930" class="difflineplus">+                       key=&quot;key_moveToFolderAgain&quot;</span>
<a href="#l17.1931"></a><span id="l17.1931" class="difflineplus">+                       label=&quot;&amp;moveToFolderAgain.label;&quot;/&gt;</span>
<a href="#l17.1932"></a><span id="l17.1932" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_messageMenuAfterMoveCommandsSeparator&quot;/&gt;</span>
<a href="#l17.1933"></a><span id="l17.1933" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_createFilter&quot;</span>
<a href="#l17.1934"></a><span id="l17.1934" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1935"></a><span id="l17.1935" class="difflineplus">+                       label=&quot;&amp;createFilter.label;&quot;</span>
<a href="#l17.1936"></a><span id="l17.1936" class="difflineplus">+                       command=&quot;cmd_createFilterFromMenu&quot;/&gt;</span>
<a href="#l17.1937"></a><span id="l17.1937" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_threadItemsSeparator&quot;/&gt;</span>
<a href="#l17.1938"></a><span id="l17.1938" class="difflineplus">+        &lt;toolbarbutton label=&quot;&amp;killThreadMenu.label;&quot;</span>
<a href="#l17.1939"></a><span id="l17.1939" class="difflineplus">+                       id=&quot;appmenu_killThread&quot;</span>
<a href="#l17.1940"></a><span id="l17.1940" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1941"></a><span id="l17.1941" class="difflineplus">+                       key=&quot;key_killThread&quot;</span>
<a href="#l17.1942"></a><span id="l17.1942">                        type=&quot;checkbox&quot;</span>
<a href="#l17.1943"></a><span id="l17.1943" class="difflineminus">-                       command=&quot;cmd_toggleOfflineStatus&quot;/&gt;</span>
<a href="#l17.1944"></a><span id="l17.1944" class="difflineplus">+                       command=&quot;cmd_killThread&quot;/&gt;</span>
<a href="#l17.1945"></a><span id="l17.1945" class="difflineplus">+        &lt;toolbarbutton label=&quot;&amp;killSubthreadMenu.label;&quot;</span>
<a href="#l17.1946"></a><span id="l17.1946" class="difflineplus">+                       id=&quot;appmenu_killSubthread&quot;</span>
<a href="#l17.1947"></a><span id="l17.1947" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1948"></a><span id="l17.1948" class="difflineplus">+                       key=&quot;key_killSubthread&quot;</span>
<a href="#l17.1949"></a><span id="l17.1949" class="difflineplus">+                       type=&quot;checkbox&quot;</span>
<a href="#l17.1950"></a><span id="l17.1950" class="difflineplus">+                       command=&quot;cmd_killSubthread&quot;/&gt;</span>
<a href="#l17.1951"></a><span id="l17.1951" class="difflineplus">+        &lt;toolbarbutton label=&quot;&amp;watchThreadMenu.label;&quot;</span>
<a href="#l17.1952"></a><span id="l17.1952" class="difflineplus">+                       id=&quot;appmenu_watchThread&quot;</span>
<a href="#l17.1953"></a><span id="l17.1953" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1954"></a><span id="l17.1954" class="difflineplus">+                       key=&quot;key_watchThread&quot;</span>
<a href="#l17.1955"></a><span id="l17.1955" class="difflineplus">+                       type=&quot;checkbox&quot;</span>
<a href="#l17.1956"></a><span id="l17.1956" class="difflineplus">+                       command=&quot;cmd_watchThread&quot;/&gt;</span>
<a href="#l17.1957"></a><span id="l17.1957">       &lt;/vbox&gt;</span>
<a href="#l17.1958"></a><span id="l17.1958">     &lt;/panelview&gt;</span>
<a href="#l17.1959"></a><span id="l17.1959" class="difflineminus">-    &lt;panelview id=&quot;appMenu-libraryView&quot; class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1960"></a><span id="l17.1960" class="difflineplus">+</span>
<a href="#l17.1961"></a><span id="l17.1961" class="difflineplus">+    &lt;!-- Message / Forward As --&gt;</span>
<a href="#l17.1962"></a><span id="l17.1962" class="difflineplus">+    &lt;panelview id=&quot;appMenu-messageForwardAsView&quot;</span>
<a href="#l17.1963"></a><span id="l17.1963" class="difflineplus">+               title=&quot;&amp;forwardAsMenu.label;&quot;</span>
<a href="#l17.1964"></a><span id="l17.1964" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1965"></a><span id="l17.1965">       &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.1966"></a><span id="l17.1966" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-library-bookmarks-button&quot;</span>
<a href="#l17.1967"></a><span id="l17.1967" class="difflineminus">-                       class=&quot;subviewbutton subviewbutton-iconic subviewbutton-nav&quot;</span>
<a href="#l17.1968"></a><span id="l17.1968" class="difflineminus">-                       label=&quot;&amp;bookmarksSubview.label;&quot;</span>
<a href="#l17.1969"></a><span id="l17.1969" class="difflineminus">-                       closemenu=&quot;none&quot;</span>
<a href="#l17.1970"></a><span id="l17.1970" class="difflineminus">-                       oncommand=&quot;BookmarkingUI.showSubView(this);&quot;/&gt;</span>
<a href="#l17.1971"></a><span id="l17.1971" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-library-pocket-button&quot;</span>
<a href="#l17.1972"></a><span id="l17.1972" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_forwardAsInline&quot;</span>
<a href="#l17.1973"></a><span id="l17.1973" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1974"></a><span id="l17.1974" class="difflineplus">+                       label=&quot;&amp;forwardAsInline.label;&quot;</span>
<a href="#l17.1975"></a><span id="l17.1975" class="difflineplus">+                       command=&quot;cmd_forwardInline&quot;/&gt;</span>
<a href="#l17.1976"></a><span id="l17.1976" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_forwardAsAttachment&quot;</span>
<a href="#l17.1977"></a><span id="l17.1977" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1978"></a><span id="l17.1978" class="difflineplus">+                       label=&quot;&amp;forwardAsAttachmentCmd.label;&quot;</span>
<a href="#l17.1979"></a><span id="l17.1979" class="difflineplus">+                       command=&quot;cmd_forwardAttachment&quot;/&gt;</span>
<a href="#l17.1980"></a><span id="l17.1980" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.1981"></a><span id="l17.1981" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.1982"></a><span id="l17.1982" class="difflineplus">+</span>
<a href="#l17.1983"></a><span id="l17.1983" class="difflineplus">+    &lt;!-- Message / When Opening Feed Messages --&gt;</span>
<a href="#l17.1984"></a><span id="l17.1984" class="difflineplus">+    &lt;panelview id=&quot;appMenu-messageOpenFeedView&quot;</span>
<a href="#l17.1985"></a><span id="l17.1985" class="difflineplus">+               title=&quot;&amp;openFeedMessage1.label;&quot;</span>
<a href="#l17.1986"></a><span id="l17.1986" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.1987"></a><span id="l17.1987" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.1988"></a><span id="l17.1988" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_openFeedWebPage&quot;</span>
<a href="#l17.1989"></a><span id="l17.1989" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1990"></a><span id="l17.1990" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.1991"></a><span id="l17.1991" class="difflineplus">+                       name=&quot;openFeedGroup&quot;</span>
<a href="#l17.1992"></a><span id="l17.1992" class="difflineplus">+                       label=&quot;&amp;openFeedWebPage.label;&quot;</span>
<a href="#l17.1993"></a><span id="l17.1993" class="difflineplus">+                       oncommand=&quot;FeedMessageHandler.onOpenPref = 0&quot;/&gt;</span>
<a href="#l17.1994"></a><span id="l17.1994" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_openFeedSummary&quot;</span>
<a href="#l17.1995"></a><span id="l17.1995">                        class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.1996"></a><span id="l17.1996" class="difflineminus">-                       label=&quot;&amp;pocketMenuitem.label;&quot;</span>
<a href="#l17.1997"></a><span id="l17.1997" class="difflineminus">-                       oncommand=&quot;Pocket.openList(event)&quot;/&gt;</span>
<a href="#l17.1998"></a><span id="l17.1998" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-library-history-button&quot;</span>
<a href="#l17.1999"></a><span id="l17.1999" class="difflineminus">-                       class=&quot;subviewbutton subviewbutton-iconic subviewbutton-nav&quot;</span>
<a href="#l17.2000"></a><span id="l17.2000" class="difflineminus">-                       label=&quot;&amp;historyMenu.label;&quot;</span>
<a href="#l17.2001"></a><span id="l17.2001" class="difflineminus">-                       closemenu=&quot;none&quot;</span>
<a href="#l17.2002"></a><span id="l17.2002" class="difflineminus">-                       oncommand=&quot;PanelUI.showSubView('PanelUI-history', this)&quot;/&gt;</span>
<a href="#l17.2003"></a><span id="l17.2003" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-library-downloads-button&quot;</span>
<a href="#l17.2004"></a><span id="l17.2004" class="difflineminus">-                       class=&quot;subviewbutton subviewbutton-iconic subviewbutton-nav&quot;</span>
<a href="#l17.2005"></a><span id="l17.2005" class="difflineminus">-                       label=&quot;&amp;libraryDownloads.label;&quot;</span>
<a href="#l17.2006"></a><span id="l17.2006" class="difflineminus">-                       closemenu=&quot;none&quot;</span>
<a href="#l17.2007"></a><span id="l17.2007" class="difflineminus">-                       oncommand=&quot;DownloadsSubview.show(this);&quot;/&gt;</span>
<a href="#l17.2008"></a><span id="l17.2008" class="difflineminus">-        &lt;toolbarbutton id=&quot;appMenu-library-remotetabs-button&quot;</span>
<a href="#l17.2009"></a><span id="l17.2009" class="difflineminus">-                       class=&quot;subviewbutton subviewbutton-iconic subviewbutton-nav sync-ui-item&quot;</span>
<a href="#l17.2010"></a><span id="l17.2010" class="difflineminus">-                       label=&quot;&amp;appMenuRemoteTabs.label;&quot;</span>
<a href="#l17.2011"></a><span id="l17.2011" class="difflineminus">-                       closemenu=&quot;none&quot;</span>
<a href="#l17.2012"></a><span id="l17.2012" class="difflineminus">-                       oncommand=&quot;PanelUI.showSubView('PanelUI-remotetabs', this)&quot;/&gt;</span>
<a href="#l17.2013"></a><span id="l17.2013" class="difflineminus">-        &lt;toolbarseparator hidden=&quot;true&quot;/&gt;</span>
<a href="#l17.2014"></a><span id="l17.2014" class="difflineminus">-        &lt;label value=&quot;&amp;appMenuRecentHighlights.label;&quot;</span>
<a href="#l17.2015"></a><span id="l17.2015" class="difflineminus">-               hidden=&quot;true&quot;</span>
<a href="#l17.2016"></a><span id="l17.2016" class="difflineminus">-               class=&quot;subview-subheader&quot;/&gt;</span>
<a href="#l17.2017"></a><span id="l17.2017" class="difflineminus">-        &lt;toolbaritem id=&quot;appMenu-library-recentHighlights&quot;</span>
<a href="#l17.2018"></a><span id="l17.2018" class="difflineminus">-                     hidden=&quot;true&quot;</span>
<a href="#l17.2019"></a><span id="l17.2019" class="difflineminus">-                     orient=&quot;vertical&quot;</span>
<a href="#l17.2020"></a><span id="l17.2020" class="difflineminus">-                     smoothscroll=&quot;false&quot;</span>
<a href="#l17.2021"></a><span id="l17.2021" class="difflineminus">-                     flatList=&quot;true&quot;</span>
<a href="#l17.2022"></a><span id="l17.2022" class="difflineminus">-                     tooltip=&quot;bhTooltip&quot;&gt;</span>
<a href="#l17.2023"></a><span id="l17.2023" class="difflineminus">-          &lt;!-- Recent Highlights will go here --&gt;</span>
<a href="#l17.2024"></a><span id="l17.2024" class="difflineminus">-        &lt;/toolbaritem&gt;</span>
<a href="#l17.2025"></a><span id="l17.2025" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.2026"></a><span id="l17.2026" class="difflineplus">+                       name=&quot;openFeedGroup&quot;</span>
<a href="#l17.2027"></a><span id="l17.2027" class="difflineplus">+                       label=&quot;&amp;openFeedSummary.label;&quot;</span>
<a href="#l17.2028"></a><span id="l17.2028" class="difflineplus">+                       oncommand=&quot;FeedMessageHandler.onOpenPref = 1&quot;/&gt;</span>
<a href="#l17.2029"></a><span id="l17.2029" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_openFeedWebPageInMessagePane&quot;</span>
<a href="#l17.2030"></a><span id="l17.2030" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2031"></a><span id="l17.2031" class="difflineplus">+                       type=&quot;radio&quot;</span>
<a href="#l17.2032"></a><span id="l17.2032" class="difflineplus">+                       name=&quot;openFeedGroup&quot;</span>
<a href="#l17.2033"></a><span id="l17.2033" class="difflineplus">+                       label=&quot;&amp;openFeedWebPageInMP.label;&quot;</span>
<a href="#l17.2034"></a><span id="l17.2034" class="difflineplus">+                       oncommand=&quot;FeedMessageHandler.onOpenPref = 2&quot;/&gt;</span>
<a href="#l17.2035"></a><span id="l17.2035" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.2036"></a><span id="l17.2036" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.2037"></a><span id="l17.2037" class="difflineplus">+</span>
<a href="#l17.2038"></a><span id="l17.2038" class="difflineplus">+    &lt;!-- Message / Tag --&gt;</span>
<a href="#l17.2039"></a><span id="l17.2039" class="difflineplus">+    &lt;panelview id=&quot;appMenu-messageTagView&quot;</span>
<a href="#l17.2040"></a><span id="l17.2040" class="difflineplus">+               title=&quot;&amp;tagMenu.label;&quot;</span>
<a href="#l17.2041"></a><span id="l17.2041" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.2042"></a><span id="l17.2042" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.2043"></a><span id="l17.2043" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_addNewTag&quot;</span>
<a href="#l17.2044"></a><span id="l17.2044" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2045"></a><span id="l17.2045" class="difflineplus">+                       label=&quot;&amp;addNewTag.label;&quot;</span>
<a href="#l17.2046"></a><span id="l17.2046" class="difflineplus">+                       command=&quot;cmd_addTag&quot;/&gt;</span>
<a href="#l17.2047"></a><span id="l17.2047" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_manageTags&quot;</span>
<a href="#l17.2048"></a><span id="l17.2048" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2049"></a><span id="l17.2049" class="difflineplus">+                       label=&quot;&amp;manageTags.label;&quot;</span>
<a href="#l17.2050"></a><span id="l17.2050" class="difflineplus">+                       command=&quot;cmd_manageTags&quot;/&gt;</span>
<a href="#l17.2051"></a><span id="l17.2051" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_tagMenu-sep-afterTagAddNew&quot;/&gt;</span>
<a href="#l17.2052"></a><span id="l17.2052" class="difflineplus">+        &lt;!-- Label for remove all tags is dynamically set. --&gt;</span>
<a href="#l17.2053"></a><span id="l17.2053" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_tagMenu-tagRemoveAll&quot;</span>
<a href="#l17.2054"></a><span id="l17.2054" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2055"></a><span id="l17.2055" class="difflineplus">+                       command=&quot;cmd_removeTags&quot;/&gt;</span>
<a href="#l17.2056"></a><span id="l17.2056" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_tagMenuAfterRemoveSeparator&quot;/&gt;</span>
<a href="#l17.2057"></a><span id="l17.2057" class="difflineplus">+        &lt;!-- Tag items are dynamically added here. --&gt;</span>
<a href="#l17.2058"></a><span id="l17.2058">       &lt;/vbox&gt;</span>
<a href="#l17.2059"></a><span id="l17.2059">     &lt;/panelview&gt;</span>
<a href="#l17.2060"></a><span id="l17.2060"> </span>
<a href="#l17.2061"></a><span id="l17.2061" class="difflineminus">-    &lt;panelview id=&quot;PanelUI-fxa&quot; class=&quot;PanelUI-subView&quot; descriptionheightworkaround=&quot;true&quot;&gt;</span>
<a href="#l17.2062"></a><span id="l17.2062" class="difflineplus">+    &lt;!-- Message / Mark --&gt;</span>
<a href="#l17.2063"></a><span id="l17.2063" class="difflineplus">+    &lt;panelview id=&quot;appMenu-messageMarkView&quot;</span>
<a href="#l17.2064"></a><span id="l17.2064" class="difflineplus">+               title=&quot;&amp;markMenu.label;&quot;</span>
<a href="#l17.2065"></a><span id="l17.2065" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.2066"></a><span id="l17.2066">       &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.2067"></a><span id="l17.2067" class="difflineminus">-        &lt;vbox id=&quot;PanelUI-fxa-signin&quot;&gt;</span>
<a href="#l17.2068"></a><span id="l17.2068" class="difflineminus">-          &lt;image class=&quot;fxaChooseWhatToSyncDevices&quot;/&gt;</span>
<a href="#l17.2069"></a><span id="l17.2069" class="difflineminus">-          &lt;label class=&quot;PanelUI-fxa-signin-instruction-callout&quot;&gt;&amp;fxa.signin.callout.label;&lt;/label&gt;</span>
<a href="#l17.2070"></a><span id="l17.2070" class="difflineminus">-          &lt;label class=&quot;PanelUI-fxa-signin-instruction-label&quot;&gt;&amp;fxa.signin.description.label;&lt;/label&gt;</span>
<a href="#l17.2071"></a><span id="l17.2071" class="difflineminus">-          &lt;toolbarbutton class=&quot;PanelUI-fxa-signin-button&quot;</span>
<a href="#l17.2072"></a><span id="l17.2072" class="difflineminus">-                         label=&quot;&amp;fxa.signin.button.label;&quot;</span>
<a href="#l17.2073"></a><span id="l17.2073" class="difflineminus">-                         oncommand=&quot;gSync.openFxAEmailFirstPageFromFxaMenu(this);&quot;/&gt;</span>
<a href="#l17.2074"></a><span id="l17.2074" class="difflineminus">-        &lt;/vbox&gt;</span>
<a href="#l17.2075"></a><span id="l17.2075" class="difflineminus">-        &lt;vbox id=&quot;PanelUI-fxa-unverified&quot; class=&quot;PanelUI-fxa-unverified-instruction-box&quot;&gt;</span>
<a href="#l17.2076"></a><span id="l17.2076" class="difflineminus">-          &lt;image class=&quot;fxaGraphicMail&quot;/&gt;</span>
<a href="#l17.2077"></a><span id="l17.2077" class="difflineminus">-          &lt;label class=&quot;PanelUI-fxa-signin-instruction-callout&quot;&gt;&amp;fxa.unverified.callout.label;&lt;/label&gt;</span>
<a href="#l17.2078"></a><span id="l17.2078" class="difflineminus">-          &lt;label class=&quot;PanelUI-fxa-signin-instruction-label&quot;&gt;&amp;fxa.unverified.description.label;&lt;/label&gt;</span>
<a href="#l17.2079"></a><span id="l17.2079" class="difflineminus">-          &lt;toolbarbutton class=&quot;PanelUI-fxa-signin-button&quot;</span>
<a href="#l17.2080"></a><span id="l17.2080" class="difflineminus">-                         label=&quot;&amp;fxa.unverified.button.label;&quot;</span>
<a href="#l17.2081"></a><span id="l17.2081" class="difflineminus">-                         oncommand=&quot;gSync.openPrefsFromFxaMenu('unver_sync_settings', this);&quot;/&gt;</span>
<a href="#l17.2082"></a><span id="l17.2082" class="difflineminus">-        &lt;/vbox&gt;</span>
<a href="#l17.2083"></a><span id="l17.2083" class="difflineminus">-        &lt;vbox id=&quot;PanelUI-fxa-menu&quot;&gt;</span>
<a href="#l17.2084"></a><span id="l17.2084" class="difflineminus">-          &lt;hbox flex=&quot;1&quot; align=&quot;center&quot; class=&quot;fxa-avatar-subpanel&quot;&gt;</span>
<a href="#l17.2085"></a><span id="l17.2085" class="difflineminus">-            &lt;image role=&quot;presentation&quot; id=&quot;fxa-menu-avatar&quot;/&gt;</span>
<a href="#l17.2086"></a><span id="l17.2086" class="difflineminus">-            &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l17.2087"></a><span id="l17.2087" class="difflineminus">-              &lt;label class=&quot;fxa-avatar-subpanel-description&quot; &gt;&amp;fxa.menu.signedInAs.label;&lt;/label&gt;</span>
<a href="#l17.2088"></a><span id="l17.2088" class="difflineminus">-              &lt;label id=&quot;fxa-menu-email&quot;&gt;&lt;/label&gt;</span>
<a href="#l17.2089"></a><span id="l17.2089" class="difflineminus">-            &lt;/vbox&gt;</span>
<a href="#l17.2090"></a><span id="l17.2090" class="difflineminus">-          &lt;/hbox&gt;</span>
<a href="#l17.2091"></a><span id="l17.2091" class="difflineminus">-          &lt;toolbarseparator/&gt;</span>
<a href="#l17.2092"></a><span id="l17.2092" class="difflineminus">-          &lt;toolbarbutton id=&quot;PanelUI-fxa-menu-sendtab-button&quot;</span>
<a href="#l17.2093"></a><span id="l17.2093" class="difflineminus">-                         class=&quot;subviewbutton subviewbutton-iconic subviewbutton-nav&quot;</span>
<a href="#l17.2094"></a><span id="l17.2094" class="difflineminus">-                         closemenu=&quot;none&quot;</span>
<a href="#l17.2095"></a><span id="l17.2095" class="difflineminus">-                         oncommand=&quot;gSync.showSendToDeviceViewFromFxaMenu(this);&quot;/&gt;</span>
<a href="#l17.2096"></a><span id="l17.2096" class="difflineminus">-          &lt;toolbarbutton id=&quot;PanelUI-fxa-menu-remotetabs-button&quot;</span>
<a href="#l17.2097"></a><span id="l17.2097" class="difflineminus">-                         class=&quot;subviewbutton subviewbutton-iconic subviewbutton-nav&quot;</span>
<a href="#l17.2098"></a><span id="l17.2098" class="difflineminus">-                         label=&quot;&amp;appMenuRemoteTabs.label;&quot;</span>
<a href="#l17.2099"></a><span id="l17.2099" class="difflineminus">-                         closemenu=&quot;none&quot;</span>
<a href="#l17.2100"></a><span id="l17.2100" class="difflineminus">-                         oncommand=&quot;gSync.showRemoteTabsFromFxaMenu(this);&quot;/&gt;</span>
<a href="#l17.2101"></a><span id="l17.2101" class="difflineminus">-          &lt;toolbarbutton id=&quot;PanelUI-fxa-menu-view-sidebar&quot;</span>
<a href="#l17.2102"></a><span id="l17.2102" class="difflineminus">-                         class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2103"></a><span id="l17.2103" class="difflineminus">-                         label=&quot;&amp;appMenuRemoteTabs.sidebar.label;&quot;</span>
<a href="#l17.2104"></a><span id="l17.2104" class="difflineminus">-                         oncommand=&quot;gSync.showSidebarFromFxaMenu(this);&quot;&gt;</span>
<a href="#l17.2105"></a><span id="l17.2105" class="difflineminus">-            &lt;observes element=&quot;sidebar-box&quot; attribute=&quot;positionend&quot;/&gt;</span>
<a href="#l17.2106"></a><span id="l17.2106" class="difflineminus">-          &lt;/toolbarbutton&gt;</span>
<a href="#l17.2107"></a><span id="l17.2107" class="difflineminus">-          &lt;toolbarseparator/&gt;</span>
<a href="#l17.2108"></a><span id="l17.2108" class="difflineminus">-          &lt;toolbarbutton class=&quot;subviewbutton&quot;</span>
<a href="#l17.2109"></a><span id="l17.2109" class="difflineminus">-                         label=&quot;&amp;fxa.menu.connectAnotherDevice2.label;&quot;</span>
<a href="#l17.2110"></a><span id="l17.2110" class="difflineminus">-                         oncommand=&quot;gSync.openConnectAnotherDeviceFromFxaMenu(this);&quot;/&gt;</span>
<a href="#l17.2111"></a><span id="l17.2111" class="difflineminus">-          &lt;toolbarbutton class=&quot;subviewbutton&quot;</span>
<a href="#l17.2112"></a><span id="l17.2112" class="difflineminus">-                         label=&quot;&amp;fxa.menu.manageAccount.label;&quot;</span>
<a href="#l17.2113"></a><span id="l17.2113" class="difflineminus">-                         oncommand=&quot;gSync.openFxAManagePageFromFxaMenu(this);&quot;/&gt;</span>
<a href="#l17.2114"></a><span id="l17.2114" class="difflineminus">-          &lt;toolbarbutton class=&quot;subviewbutton&quot;</span>
<a href="#l17.2115"></a><span id="l17.2115" class="difflineminus">-                         label=&quot;&amp;fxa.menu.syncSettings.label;&quot;</span>
<a href="#l17.2116"></a><span id="l17.2116" class="difflineminus">-                         oncommand=&quot;gSync.openPrefsFromFxaMenu('sync_settings', this);&quot;/&gt;</span>
<a href="#l17.2117"></a><span id="l17.2117" class="difflineminus">-          &lt;toolbarseparator/&gt;</span>
<a href="#l17.2118"></a><span id="l17.2118" class="difflineminus">-          &lt;toolbarbutton id=&quot;PanelUI-fxa-menu-syncnow-button&quot;</span>
<a href="#l17.2119"></a><span id="l17.2119" class="difflineminus">-                         label=&quot;&amp;syncSyncNowItem.label;&quot;</span>
<a href="#l17.2120"></a><span id="l17.2120" class="difflineminus">-                         syncinglabel=&quot;&amp;syncSyncNowItemSyncing.label;&quot;</span>
<a href="#l17.2121"></a><span id="l17.2121" class="difflineminus">-                         class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2122"></a><span id="l17.2122" class="difflineminus">-                         oncommand=&quot;gSync.doSyncFromFxaMenu(this);&quot;</span>
<a href="#l17.2123"></a><span id="l17.2123" class="difflineminus">-                         closemenu=&quot;none&quot;/&gt;</span>
<a href="#l17.2124"></a><span id="l17.2124" class="difflineminus">-        &lt;/vbox&gt;</span>
<a href="#l17.2125"></a><span id="l17.2125" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_markReadMenuItem&quot;</span>
<a href="#l17.2126"></a><span id="l17.2126" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2127"></a><span id="l17.2127" class="difflineplus">+                       label=&quot;&amp;markAsReadCmd.label;&quot;</span>
<a href="#l17.2128"></a><span id="l17.2128" class="difflineplus">+                       command=&quot;cmd_markAsRead&quot;/&gt;</span>
<a href="#l17.2129"></a><span id="l17.2129" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_markUnreadMenuItem&quot;</span>
<a href="#l17.2130"></a><span id="l17.2130" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2131"></a><span id="l17.2131" class="difflineplus">+                       label=&quot;&amp;markAsUnreadCmd.label;&quot;</span>
<a href="#l17.2132"></a><span id="l17.2132" class="difflineplus">+                       command=&quot;cmd_markAsUnread&quot;/&gt;</span>
<a href="#l17.2133"></a><span id="l17.2133" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_markThreadAsRead&quot;</span>
<a href="#l17.2134"></a><span id="l17.2134" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2135"></a><span id="l17.2135" class="difflineplus">+                       label=&quot;&amp;markThreadAsReadCmd.label;&quot;</span>
<a href="#l17.2136"></a><span id="l17.2136" class="difflineplus">+                       key=&quot;key_markThreadAsRead&quot;</span>
<a href="#l17.2137"></a><span id="l17.2137" class="difflineplus">+                       command=&quot;cmd_markThreadAsRead&quot;/&gt;</span>
<a href="#l17.2138"></a><span id="l17.2138" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_markReadByDate&quot;</span>
<a href="#l17.2139"></a><span id="l17.2139" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2140"></a><span id="l17.2140" class="difflineplus">+                       label=&quot;&amp;markReadByDateCmd.label;&quot;</span>
<a href="#l17.2141"></a><span id="l17.2141" class="difflineplus">+                       key=&quot;key_markReadByDate&quot;</span>
<a href="#l17.2142"></a><span id="l17.2142" class="difflineplus">+                       command=&quot;cmd_markReadByDate&quot;/&gt;</span>
<a href="#l17.2143"></a><span id="l17.2143" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_markAllRead&quot;</span>
<a href="#l17.2144"></a><span id="l17.2144" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2145"></a><span id="l17.2145" class="difflineplus">+                       label=&quot;&amp;markAllReadCmd.label;&quot;</span>
<a href="#l17.2146"></a><span id="l17.2146" class="difflineplus">+                       key=&quot;key_markAllRead&quot;</span>
<a href="#l17.2147"></a><span id="l17.2147" class="difflineplus">+                       command=&quot;cmd_markAllRead&quot;/&gt;</span>
<a href="#l17.2148"></a><span id="l17.2148" class="difflineplus">+        &lt;toolbarseparator id=&quot;markMenuAfterAllReadSeparator&quot;/&gt;</span>
<a href="#l17.2149"></a><span id="l17.2149" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_markFlaggedMenuItem&quot;</span>
<a href="#l17.2150"></a><span id="l17.2150" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2151"></a><span id="l17.2151" class="difflineplus">+                       type=&quot;checkbox&quot;</span>
<a href="#l17.2152"></a><span id="l17.2152" class="difflineplus">+                       label=&quot;&amp;markStarredCmd.label;&quot;</span>
<a href="#l17.2153"></a><span id="l17.2153" class="difflineplus">+                       key=&quot;key_toggleFlagged&quot;</span>
<a href="#l17.2154"></a><span id="l17.2154" class="difflineplus">+                       command=&quot;cmd_markAsFlagged&quot;/&gt;</span>
<a href="#l17.2155"></a><span id="l17.2155" class="difflineplus">+        &lt;toolbarseparator id=&quot;markMenuAfterFlaggedSeparator&quot;/&gt;</span>
<a href="#l17.2156"></a><span id="l17.2156" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_markAsJunk&quot;</span>
<a href="#l17.2157"></a><span id="l17.2157" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2158"></a><span id="l17.2158" class="difflineplus">+                       label=&quot;&amp;markAsJunkCmd.label;&quot;</span>
<a href="#l17.2159"></a><span id="l17.2159" class="difflineplus">+                       key=&quot;key_markJunk&quot;</span>
<a href="#l17.2160"></a><span id="l17.2160" class="difflineplus">+                       command=&quot;cmd_markAsJunk&quot;/&gt;</span>
<a href="#l17.2161"></a><span id="l17.2161" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_markAsNotJunk&quot;</span>
<a href="#l17.2162"></a><span id="l17.2162" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2163"></a><span id="l17.2163" class="difflineplus">+                       label=&quot;&amp;markAsNotJunkCmd.label;&quot;</span>
<a href="#l17.2164"></a><span id="l17.2164" class="difflineplus">+                       key=&quot;key_markNotJunk&quot;</span>
<a href="#l17.2165"></a><span id="l17.2165" class="difflineplus">+                       command=&quot;cmd_markAsNotJunk&quot;/&gt;</span>
<a href="#l17.2166"></a><span id="l17.2166" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_recalculateJunkScore&quot;</span>
<a href="#l17.2167"></a><span id="l17.2167" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2168"></a><span id="l17.2168" class="difflineplus">+                       label=&quot;&amp;recalculateJunkScoreCmd.label;&quot;</span>
<a href="#l17.2169"></a><span id="l17.2169" class="difflineplus">+                       command=&quot;cmd_recalculateJunkScore&quot;/&gt;</span>
<a href="#l17.2170"></a><span id="l17.2170">       &lt;/vbox&gt;</span>
<a href="#l17.2171"></a><span id="l17.2171">     &lt;/panelview&gt;</span>
<a href="#l17.2172"></a><span id="l17.2172" class="difflineminus">-    &lt;!-- This panelview is used to contain the dynamically created buttons for send tab to devices --&gt;</span>
<a href="#l17.2173"></a><span id="l17.2173" class="difflineminus">-    &lt;panelview id=&quot;PanelUI-sendTabToDevice&quot; flex=&quot;1&quot; class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.2174"></a><span id="l17.2174" class="difflineplus">+</span>
<a href="#l17.2175"></a><span id="l17.2175" class="difflineplus">+    &lt;!-- Message / Move To --&gt;</span>
<a href="#l17.2176"></a><span id="l17.2176" class="difflineplus">+    &lt;panelview id=&quot;appMenu-messageMoveToView&quot;</span>
<a href="#l17.2177"></a><span id="l17.2177" class="difflineplus">+               title=&quot;&amp;moveMsgToMenu.label;&quot;</span>
<a href="#l17.2178"></a><span id="l17.2178" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.2179"></a><span id="l17.2179">       &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.2180"></a><span id="l17.2180" class="difflineminus">-        &lt;toolbarbutton id=&quot;PanelUI-sendTabToDevice-syncingDevices&quot; class=&quot;subviewbutton subviewbutton-iconic pageAction-sendToDevice-notReady&quot;</span>
<a href="#l17.2181"></a><span id="l17.2181" class="difflineminus">-                       label=&quot;&amp;sendToDevice.syncNotReady.label;&quot;</span>
<a href="#l17.2182"></a><span id="l17.2182" class="difflineminus">-                       disabled=&quot;true&quot;/&gt;</span>
<a href="#l17.2183"></a><span id="l17.2183" class="difflineplus">+        &lt;!-- TODO appmenu dynamic population --&gt;</span>
<a href="#l17.2184"></a><span id="l17.2184" class="difflineplus">+        &lt;menu id=&quot;appmenu_moveMenu&quot;</span>
<a href="#l17.2185"></a><span id="l17.2185" class="difflineplus">+              label=&quot;&amp;moveMsgToMenu.label;&quot;</span>
<a href="#l17.2186"></a><span id="l17.2186" class="difflineplus">+              oncommand=&quot;MsgMoveMessage(event.target._folder)&quot;&gt;</span>
<a href="#l17.2187"></a><span id="l17.2187" class="difflineplus">+          &lt;menupopup is=&quot;folder-menupopup&quot;</span>
<a href="#l17.2188"></a><span id="l17.2188" class="difflineplus">+                     mode=&quot;filing&quot;</span>
<a href="#l17.2189"></a><span id="l17.2189" class="difflineplus">+                     showFileHereLabel=&quot;true&quot;</span>
<a href="#l17.2190"></a><span id="l17.2190" class="difflineplus">+                     showRecent=&quot;true&quot;</span>
<a href="#l17.2191"></a><span id="l17.2191" class="difflineplus">+                     recentLabel=&quot;&amp;moveCopyMsgRecentMenu.label;&quot;</span>
<a href="#l17.2192"></a><span id="l17.2192" class="difflineplus">+                     showFavorites=&quot;true&quot;</span>
<a href="#l17.2193"></a><span id="l17.2193" class="difflineplus">+                     favoritesLabel=&quot;&amp;contextMoveCopyMsgFavoritesMenu.label;&quot;</span>
<a href="#l17.2194"></a><span id="l17.2194" class="difflineplus">+                     favoritesAccessKey=&quot;&amp;contextMoveCopyMsgFavoritesMenu.accesskey;&quot;/&gt;</span>
<a href="#l17.2195"></a><span id="l17.2195" class="difflineplus">+        &lt;/menu&gt;</span>
<a href="#l17.2196"></a><span id="l17.2196" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.2197"></a><span id="l17.2197" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.2198"></a><span id="l17.2198" class="difflineplus">+</span>
<a href="#l17.2199"></a><span id="l17.2199" class="difflineplus">+    &lt;!-- Message / Copy To --&gt;</span>
<a href="#l17.2200"></a><span id="l17.2200" class="difflineplus">+    &lt;panelview id=&quot;appMenu-messageCopyToView&quot;</span>
<a href="#l17.2201"></a><span id="l17.2201" class="difflineplus">+               title=&quot;&amp;copyMsgToMenu.label;&quot;</span>
<a href="#l17.2202"></a><span id="l17.2202" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.2203"></a><span id="l17.2203" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.2204"></a><span id="l17.2204" class="difflineplus">+        &lt;!-- TODO appmenu dynamic population --&gt;</span>
<a href="#l17.2205"></a><span id="l17.2205" class="difflineplus">+        &lt;menu id=&quot;appmenu_copyMenu&quot;</span>
<a href="#l17.2206"></a><span id="l17.2206" class="difflineplus">+              label=&quot;&amp;copyMsgToMenu.label;&quot;</span>
<a href="#l17.2207"></a><span id="l17.2207" class="difflineplus">+              oncommand=&quot;MsgCopyMessage(event.target._folder)&quot;&gt;</span>
<a href="#l17.2208"></a><span id="l17.2208" class="difflineplus">+          &lt;menupopup is=&quot;folder-menupopup&quot;</span>
<a href="#l17.2209"></a><span id="l17.2209" class="difflineplus">+                      mode=&quot;filing&quot;</span>
<a href="#l17.2210"></a><span id="l17.2210" class="difflineplus">+                      showFileHereLabel=&quot;true&quot;</span>
<a href="#l17.2211"></a><span id="l17.2211" class="difflineplus">+                      showRecent=&quot;true&quot;</span>
<a href="#l17.2212"></a><span id="l17.2212" class="difflineplus">+                      recentLabel=&quot;&amp;moveCopyMsgRecentMenu.label;&quot;</span>
<a href="#l17.2213"></a><span id="l17.2213" class="difflineplus">+                      showFavorites=&quot;true&quot;</span>
<a href="#l17.2214"></a><span id="l17.2214" class="difflineplus">+                      favoritesLabel=&quot;&amp;contextMoveCopyMsgFavoritesMenu.label;&quot;</span>
<a href="#l17.2215"></a><span id="l17.2215" class="difflineplus">+                      favoritesAccessKey=&quot;&amp;contextMoveCopyMsgFavoritesMenu.accesskey;&quot;/&gt;</span>
<a href="#l17.2216"></a><span id="l17.2216" class="difflineplus">+        &lt;/menu&gt;</span>
<a href="#l17.2217"></a><span id="l17.2217">       &lt;/vbox&gt;</span>
<a href="#l17.2218"></a><span id="l17.2218">     &lt;/panelview&gt;</span>
<a href="#l17.2219"></a><span id="l17.2219"> </span>
<a href="#l17.2220"></a><span id="l17.2220" class="difflineminus">-    &lt;panelview id=&quot;PanelUI-bookmarkingTools&quot; class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.2221"></a><span id="l17.2221" class="difflineplus">+    &lt;!-- Tools --&gt;</span>
<a href="#l17.2222"></a><span id="l17.2222" class="difflineplus">+    &lt;panelview id=&quot;appMenu-toolsView&quot;</span>
<a href="#l17.2223"></a><span id="l17.2223" class="difflineplus">+               title=&quot;&amp;tasksMenu.label;&quot;</span>
<a href="#l17.2224"></a><span id="l17.2224" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.2225"></a><span id="l17.2225">       &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.2226"></a><span id="l17.2226" class="difflineminus">-        &lt;toolbarbutton id=&quot;panelMenu_toggleBookmarksMenu&quot;</span>
<a href="#l17.2227"></a><span id="l17.2227" class="difflineplus">+        &lt;toolbarbutton hidden=&quot;true&quot;</span>
<a href="#l17.2228"></a><span id="l17.2228" class="difflineplus">+                       id=&quot;appmenu_tasksMenuMail&quot;</span>
<a href="#l17.2229"></a><span id="l17.2229" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2230"></a><span id="l17.2230" class="difflineplus">+                       label=&quot;&amp;messengerCmd.label;&quot;</span>
<a href="#l17.2231"></a><span id="l17.2231" class="difflineplus">+                       key=&quot;key_mail&quot;</span>
<a href="#l17.2232"></a><span id="l17.2232" class="difflineplus">+                       oncommand=&quot;toMessengerWindow();&quot;/&gt;</span>
<a href="#l17.2233"></a><span id="l17.2233" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_addressBook&quot;</span>
<a href="#l17.2234"></a><span id="l17.2234" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2235"></a><span id="l17.2235" class="difflineplus">+                       label=&quot;&amp;addressBookCmd.label;&quot;</span>
<a href="#l17.2236"></a><span id="l17.2236" class="difflineplus">+                       key=&quot;key_addressbook&quot;</span>
<a href="#l17.2237"></a><span id="l17.2237" class="difflineplus">+                       oncommand=&quot;toOpenWindowByType('mail:addressbook', 'chrome://messenger/content/addressbook/addressbook.xul');&quot;/&gt;</span>
<a href="#l17.2238"></a><span id="l17.2238" class="difflineplus">+        &lt;toolbarseparator id=&quot;devToolsSeparator&quot;/&gt;</span>
<a href="#l17.2239"></a><span id="l17.2239" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_openSavedFilesWnd&quot;</span>
<a href="#l17.2240"></a><span id="l17.2240" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2241"></a><span id="l17.2241" class="difflineplus">+                       label=&quot;&amp;savedFiles.label;&quot;</span>
<a href="#l17.2242"></a><span id="l17.2242" class="difflineplus">+                       key=&quot;key_savedFiles&quot;</span>
<a href="#l17.2243"></a><span id="l17.2243" class="difflineplus">+                       oncommand=&quot;openSavedFilesWnd();&quot;/&gt;</span>
<a href="#l17.2244"></a><span id="l17.2244" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_imAccountsStatus&quot;</span>
<a href="#l17.2245"></a><span id="l17.2245" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.2246"></a><span id="l17.2246" class="difflineplus">+                       label=&quot;&amp;imAccountsStatus.label;&quot;</span>
<a href="#l17.2247"></a><span id="l17.2247" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.2248"></a><span id="l17.2248" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-toolsChatStatusView', this)&quot;/&gt;</span>
<a href="#l17.2249"></a><span id="l17.2249" class="difflineplus">+</span>
<a href="#l17.2250"></a><span id="l17.2250" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_joinChatMenuItem&quot;</span>
<a href="#l17.2251"></a><span id="l17.2251" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2252"></a><span id="l17.2252" class="difflineplus">+                       label=&quot;&amp;joinChatCmd.label;&quot;</span>
<a href="#l17.2253"></a><span id="l17.2253" class="difflineplus">+                       command=&quot;cmd_joinChat&quot;/&gt;</span>
<a href="#l17.2254"></a><span id="l17.2254" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_afterChatSeparator&quot;/&gt;</span>
<a href="#l17.2255"></a><span id="l17.2255" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_runJunkControls&quot;</span>
<a href="#l17.2256"></a><span id="l17.2256" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2257"></a><span id="l17.2257" class="difflineplus">+                       label=&quot;&amp;runJunkControls.label;&quot;</span>
<a href="#l17.2258"></a><span id="l17.2258" class="difflineplus">+                       command=&quot;cmd_runJunkControls&quot;/&gt;</span>
<a href="#l17.2259"></a><span id="l17.2259" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_deleteJunk&quot;</span>
<a href="#l17.2260"></a><span id="l17.2260">                        class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2261"></a><span id="l17.2261" class="difflineminus">-                       label-show=&quot;&amp;addBookmarksMenu.label;&quot;</span>
<a href="#l17.2262"></a><span id="l17.2262" class="difflineminus">-                       label-hide=&quot;&amp;removeBookmarksMenu.label;&quot;</span>
<a href="#l17.2263"></a><span id="l17.2263" class="difflineminus">-                       oncommand=&quot;BookmarkingUI.toggleMenuButtonInToolbar(this);&quot;/&gt;</span>
<a href="#l17.2264"></a><span id="l17.2264" class="difflineminus">-        &lt;toolbarbutton id=&quot;panelMenu_viewBookmarksSidebar&quot;</span>
<a href="#l17.2265"></a><span id="l17.2265" class="difflineplus">+                       label=&quot;&amp;deleteJunk.label;&quot;</span>
<a href="#l17.2266"></a><span id="l17.2266" class="difflineplus">+                       command=&quot;cmd_deleteJunk&quot;/&gt;</span>
<a href="#l17.2267"></a><span id="l17.2267" class="difflineplus">+        &lt;toolbarseparator id=&quot;tasksMenuAfterDeleteSeparator&quot;/&gt;</span>
<a href="#l17.2268"></a><span id="l17.2268" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_import&quot;</span>
<a href="#l17.2269"></a><span id="l17.2269" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2270"></a><span id="l17.2270" class="difflineplus">+                       label=&quot;&amp;importCmd.label;&quot;</span>
<a href="#l17.2271"></a><span id="l17.2271" class="difflineplus">+                       oncommand=&quot;toImport();&quot;/&gt;</span>
<a href="#l17.2272"></a><span id="l17.2272" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_devtoolsMenu&quot;</span>
<a href="#l17.2273"></a><span id="l17.2273" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-nav&quot;</span>
<a href="#l17.2274"></a><span id="l17.2274" class="difflineplus">+                       label=&quot;&amp;devtoolsMenu.label;&quot;</span>
<a href="#l17.2275"></a><span id="l17.2275" class="difflineplus">+                       accesskey=&quot;&amp;devtoolsMenu.accesskey;&quot;</span>
<a href="#l17.2276"></a><span id="l17.2276" class="difflineplus">+                       closemenu=&quot;none&quot;</span>
<a href="#l17.2277"></a><span id="l17.2277" class="difflineplus">+                       oncommand=&quot;PanelUI.showSubView('appMenu-toolsDevtoolsView', this)&quot;/&gt;</span>
<a href="#l17.2278"></a><span id="l17.2278" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_sanitizeHistory&quot;</span>
<a href="#l17.2279"></a><span id="l17.2279" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2280"></a><span id="l17.2280" class="difflineplus">+                       label=&quot;&amp;clearRecentHistory.label;&quot;</span>
<a href="#l17.2281"></a><span id="l17.2281" class="difflineplus">+                       key=&quot;key_sanitizeHistory&quot;</span>
<a href="#l17.2282"></a><span id="l17.2282" class="difflineplus">+                       oncommand=&quot;toSanitize();&quot;/&gt;</span>
<a href="#l17.2283"></a><span id="l17.2283" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.2284"></a><span id="l17.2284" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.2285"></a><span id="l17.2285" class="difflineplus">+</span>
<a href="#l17.2286"></a><span id="l17.2286" class="difflineplus">+    &lt;!-- Tools / Chat Status --&gt;</span>
<a href="#l17.2287"></a><span id="l17.2287" class="difflineplus">+    &lt;panelview id=&quot;appMenu-toolsChatStatusView&quot;</span>
<a href="#l17.2288"></a><span id="l17.2288" class="difflineplus">+               title=&quot;&amp;imAccountsStatus.label;&quot;</span>
<a href="#l17.2289"></a><span id="l17.2289" class="difflineplus">+               class=&quot;PanelUI-subView&quot;</span>
<a href="#l17.2290"></a><span id="l17.2290" class="difflineplus">+               command=&quot;cmd_chatStatus&quot;&gt;</span>
<a href="#l17.2291"></a><span id="l17.2291" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.2292"></a><span id="l17.2292" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_imStatusAvailable&quot;</span>
<a href="#l17.2293"></a><span id="l17.2293" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2294"></a><span id="l17.2294" class="difflineplus">+                       status=&quot;available&quot;</span>
<a href="#l17.2295"></a><span id="l17.2295" class="difflineplus">+                       label=&quot;&amp;imStatus.available;&quot;/&gt;</span>
<a href="#l17.2296"></a><span id="l17.2296" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_imStatusUnavailable&quot;</span>
<a href="#l17.2297"></a><span id="l17.2297" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2298"></a><span id="l17.2298" class="difflineplus">+                       status=&quot;unavailable&quot;</span>
<a href="#l17.2299"></a><span id="l17.2299" class="difflineplus">+                       label=&quot;&amp;imStatus.unavailable;&quot;/&gt;</span>
<a href="#l17.2300"></a><span id="l17.2300" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_imStatusOfflineSeparator&quot;/&gt;</span>
<a href="#l17.2301"></a><span id="l17.2301" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_imStatusOffline&quot;</span>
<a href="#l17.2302"></a><span id="l17.2302" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2303"></a><span id="l17.2303" class="difflineplus">+                       status=&quot;offline&quot;</span>
<a href="#l17.2304"></a><span id="l17.2304" class="difflineplus">+                       label=&quot;&amp;imStatus.offline;&quot;/&gt;</span>
<a href="#l17.2305"></a><span id="l17.2305" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_imStatusShowAccountsSeparator&quot;/&gt;</span>
<a href="#l17.2306"></a><span id="l17.2306" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_imStatusShowAccounts&quot;</span>
<a href="#l17.2307"></a><span id="l17.2307">                        class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2308"></a><span id="l17.2308" class="difflineminus">-                       label-show=&quot;&amp;viewBookmarksSidebar2.label;&quot;</span>
<a href="#l17.2309"></a><span id="l17.2309" class="difflineminus">-                       label-hide=&quot;&amp;hideBookmarksSidebar.label;&quot;</span>
<a href="#l17.2310"></a><span id="l17.2310" class="difflineminus">-                       key=&quot;viewBookmarksSidebarKb&quot;</span>
<a href="#l17.2311"></a><span id="l17.2311" class="difflineminus">-                       oncommand=&quot;SidebarUI.toggle('viewBookmarksSidebar', this);&quot;&gt;</span>
<a href="#l17.2312"></a><span id="l17.2312" class="difflineminus">-                       &lt;observes element=&quot;sidebar-box&quot; attribute=&quot;positionend&quot;/&gt;</span>
<a href="#l17.2313"></a><span id="l17.2313" class="difflineminus">-        &lt;/toolbarbutton&gt;</span>
<a href="#l17.2314"></a><span id="l17.2314" class="difflineminus">-        &lt;toolbarbutton id=&quot;panelMenu_viewBookmarksToolbar&quot;</span>
<a href="#l17.2315"></a><span id="l17.2315" class="difflineplus">+                       label=&quot;&amp;imStatus.showAccounts;&quot;/&gt;</span>
<a href="#l17.2316"></a><span id="l17.2316" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.2317"></a><span id="l17.2317" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.2318"></a><span id="l17.2318" class="difflineplus">+</span>
<a href="#l17.2319"></a><span id="l17.2319" class="difflineplus">+    &lt;!-- Tools / Developer Tools --&gt;</span>
<a href="#l17.2320"></a><span id="l17.2320" class="difflineplus">+    &lt;panelview id=&quot;appMenu-toolsDevtoolsView&quot;</span>
<a href="#l17.2321"></a><span id="l17.2321" class="difflineplus">+               title=&quot;&amp;devtoolsMenu.label;&quot;</span>
<a href="#l17.2322"></a><span id="l17.2322" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.2323"></a><span id="l17.2323" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.2324"></a><span id="l17.2324" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_devtoolsToolbox&quot;</span>
<a href="#l17.2325"></a><span id="l17.2325" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2326"></a><span id="l17.2326" class="difflineplus">+                       label=&quot;&amp;devToolboxCmd.label;&quot;</span>
<a href="#l17.2327"></a><span id="l17.2327" class="difflineplus">+                       accesskey=&quot;&amp;devToolboxCmd.accesskey;&quot;</span>
<a href="#l17.2328"></a><span id="l17.2328" class="difflineplus">+                       key=&quot;key_devtoolsToolbox&quot;</span>
<a href="#l17.2329"></a><span id="l17.2329" class="difflineplus">+                       oncommand=&quot;BrowserToolboxProcess.init();&quot;/&gt;</span>
<a href="#l17.2330"></a><span id="l17.2330" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_addonDebugging&quot;</span>
<a href="#l17.2331"></a><span id="l17.2331" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2332"></a><span id="l17.2332" class="difflineplus">+                       label=&quot;&amp;debugAddonsCmd.label;&quot;</span>
<a href="#l17.2333"></a><span id="l17.2333" class="difflineplus">+                       accesskey=&quot;&amp;debugAddonsCmd.accesskey;&quot;</span>
<a href="#l17.2334"></a><span id="l17.2334" class="difflineplus">+                       oncommand=&quot;openAboutDebugging('addons')&quot;/&gt;</span>
<a href="#l17.2335"></a><span id="l17.2335" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_tabsDebugging&quot;</span>
<a href="#l17.2336"></a><span id="l17.2336" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2337"></a><span id="l17.2337" class="difflineplus">+                       label=&quot;&amp;tabsDebugCmd.label;&quot;</span>
<a href="#l17.2338"></a><span id="l17.2338" class="difflineplus">+                       accesskey=&quot;&amp;tabsDebugCmd.accesskey;&quot;</span>
<a href="#l17.2339"></a><span id="l17.2339" class="difflineplus">+                       oncommand=&quot;openAboutDebugging('tabs')&quot;/&gt;</span>
<a href="#l17.2340"></a><span id="l17.2340" class="difflineplus">+        &lt;toolbarseparator id=&quot;appmenu_debuggingSeparator&quot;/&gt;</span>
<a href="#l17.2341"></a><span id="l17.2341" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_javascriptConsole&quot;</span>
<a href="#l17.2342"></a><span id="l17.2342" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2343"></a><span id="l17.2343" class="difflineplus">+                       label=&quot;&amp;errorConsoleCmd.label;&quot;</span>
<a href="#l17.2344"></a><span id="l17.2344" class="difflineplus">+                       accesskey=&quot;&amp;errorConsoleCmd.accesskey;&quot;</span>
<a href="#l17.2345"></a><span id="l17.2345" class="difflineplus">+                       key=&quot;key_errorConsole&quot;</span>
<a href="#l17.2346"></a><span id="l17.2346" class="difflineplus">+                       oncommand=&quot;toJavaScriptConsole();&quot;/&gt;</span>
<a href="#l17.2347"></a><span id="l17.2347" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_openScratchpad&quot;</span>
<a href="#l17.2348"></a><span id="l17.2348">                        class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2349"></a><span id="l17.2349" class="difflineminus">-                       label-show=&quot;&amp;viewBookmarksToolbar.label;&quot;</span>
<a href="#l17.2350"></a><span id="l17.2350" class="difflineminus">-                       label-hide=&quot;&amp;hideBookmarksToolbar.label;&quot;</span>
<a href="#l17.2351"></a><span id="l17.2351" class="difflineminus">-                       oncommand=&quot;BookmarkingUI.toggleBookmarksToolbar();&quot;/&gt;</span>
<a href="#l17.2352"></a><span id="l17.2352" class="difflineplus">+                       label=&quot;&amp;scratchpadCmd.label;&quot;</span>
<a href="#l17.2353"></a><span id="l17.2353" class="difflineplus">+                       accesskey=&quot;&amp;scratchpadCmd.accesskey;&quot;</span>
<a href="#l17.2354"></a><span id="l17.2354" class="difflineplus">+                       key=&quot;key_scratchpad&quot;</span>
<a href="#l17.2355"></a><span id="l17.2355" class="difflineplus">+                       oncommand=&quot;ScratchpadManager.openScratchpad({ executionContext: 2 });&quot;/&gt;</span>
<a href="#l17.2356"></a><span id="l17.2356" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.2357"></a><span id="l17.2357" class="difflineplus">+    &lt;/panelview&gt;</span>
<a href="#l17.2358"></a><span id="l17.2358" class="difflineplus">+</span>
<a href="#l17.2359"></a><span id="l17.2359" class="difflineplus">+    &lt;!-- Help --&gt;</span>
<a href="#l17.2360"></a><span id="l17.2360" class="difflineplus">+    &lt;panelview id=&quot;appMenu-helpView&quot;</span>
<a href="#l17.2361"></a><span id="l17.2361" class="difflineplus">+               title=&quot;&amp;helpMenuWin.label;&quot;</span>
<a href="#l17.2362"></a><span id="l17.2362" class="difflineplus">+               class=&quot;PanelUI-subView&quot;&gt;</span>
<a href="#l17.2363"></a><span id="l17.2363" class="difflineplus">+      &lt;vbox class=&quot;panel-subview-body&quot;&gt;</span>
<a href="#l17.2364"></a><span id="l17.2364" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_openHelp&quot;</span>
<a href="#l17.2365"></a><span id="l17.2365" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2366"></a><span id="l17.2366" class="difflineplus">+                       label=&quot;&amp;productHelp.label;&quot;</span>
<a href="#l17.2367"></a><span id="l17.2367" class="difflineplus">+                       key=&quot;key_openHelp&quot;</span>
<a href="#l17.2368"></a><span id="l17.2368" class="difflineplus">+                       oncommand=&quot;openSupportURL();&quot;/&gt;</span>
<a href="#l17.2369"></a><span id="l17.2369" class="difflineplus">+        &lt;toolbarbutton id=&quot;menu_keyboardShortcuts&quot;</span>
<a href="#l17.2370"></a><span id="l17.2370" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2371"></a><span id="l17.2371" class="difflineplus">+                       label=&quot;&amp;helpKeyboardShortcuts.label;&quot;</span>
<a href="#l17.2372"></a><span id="l17.2372" class="difflineplus">+                       oncommand=&quot;openLinkText(event, 'keyboardShortcutsURL');&quot;/&gt;</span>
<a href="#l17.2373"></a><span id="l17.2373" class="difflineplus">+        &lt;toolbarbutton id=&quot;getInvolved&quot;</span>
<a href="#l17.2374"></a><span id="l17.2374" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2375"></a><span id="l17.2375" class="difflineplus">+                       label=&quot;&amp;helpGetInvolvedPage.label;&quot;</span>
<a href="#l17.2376"></a><span id="l17.2376" class="difflineplus">+                       oncommand=&quot;openLinkText(event, 'getInvolvedURL');&quot;/&gt;</span>
<a href="#l17.2377"></a><span id="l17.2377" class="difflineplus">+        &lt;toolbarbutton id=&quot;donationsPage&quot;</span>
<a href="#l17.2378"></a><span id="l17.2378" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2379"></a><span id="l17.2379" class="difflineplus">+                       label=&quot;&amp;helpDonationsPage.label;&quot;</span>
<a href="#l17.2380"></a><span id="l17.2380" class="difflineplus">+                       oncommand=&quot;openLinkText(event, 'donateURL');&quot;/&gt;</span>
<a href="#l17.2381"></a><span id="l17.2381" class="difflineplus">+        &lt;toolbarbutton id=&quot;feedbackPage&quot; hidden=&quot;true&quot;</span>
<a href="#l17.2382"></a><span id="l17.2382" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2383"></a><span id="l17.2383" class="difflineplus">+                       label=&quot;&amp;helpFeedbackPage.label;&quot;</span>
<a href="#l17.2384"></a><span id="l17.2384" class="difflineplus">+                       oncommand=&quot;openFormattedURL('app.feedback.baseURL');&quot;/&gt;</span>
<a href="#l17.2385"></a><span id="l17.2385" class="difflineplus">+        &lt;toolbarseparator/&gt;</span>
<a href="#l17.2386"></a><span id="l17.2386" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_troubleshootingInfo&quot;</span>
<a href="#l17.2387"></a><span id="l17.2387" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2388"></a><span id="l17.2388" class="difflineplus">+                       label=&quot;&amp;helpTroubleshootingInfo.label;&quot;</span>
<a href="#l17.2389"></a><span id="l17.2389" class="difflineplus">+                       oncommand=&quot;openAboutSupport();&quot;/&gt;</span>
<a href="#l17.2390"></a><span id="l17.2390" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_safeMode&quot;</span>
<a href="#l17.2391"></a><span id="l17.2391" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2392"></a><span id="l17.2392" class="difflineplus">+                       label=&quot;&amp;helpSafeMode.label;&quot;</span>
<a href="#l17.2393"></a><span id="l17.2393" class="difflineplus">+                       oncommand=&quot;safeModeRestart();&quot;/&gt;</span>
<a href="#l17.2394"></a><span id="l17.2394" class="difflineplus">+        &lt;toolbarseparator/&gt;</span>
<a href="#l17.2395"></a><span id="l17.2395" class="difflineplus">+        &lt;toolbarbutton id=&quot;appmenu_about&quot;</span>
<a href="#l17.2396"></a><span id="l17.2396" class="difflineplus">+                       class=&quot;subviewbutton subviewbutton-iconic&quot;</span>
<a href="#l17.2397"></a><span id="l17.2397" class="difflineplus">+                       label=&quot;&amp;aboutProduct2.label;&quot;</span>
<a href="#l17.2398"></a><span id="l17.2398" class="difflineplus">+                       oncommand=&quot;openAboutDialog();&quot;/&gt;</span>
<a href="#l17.2399"></a><span id="l17.2399">       &lt;/vbox&gt;</span>
<a href="#l17.2400"></a><span id="l17.2400">     &lt;/panelview&gt;</span>
<a href="#l17.2401"></a><span id="l17.2401">   &lt;/panelmultiview&gt;</span>
<a href="#l17.2402"></a><span id="l17.2402"> &lt;/panel&gt;</span>
<a href="#l17.2403"></a><span id="l17.2403" class="difflineminus">-</span>
<a href="#l17.2404"></a><span id="l17.2404" class="difflineminus">-&lt;panel id=&quot;downloads-button-autohide-panel&quot;</span>
<a href="#l17.2405"></a><span id="l17.2405" class="difflineminus">-       role=&quot;group&quot;</span>
<a href="#l17.2406"></a><span id="l17.2406" class="difflineminus">-       type=&quot;arrow&quot;</span>
<a href="#l17.2407"></a><span id="l17.2407" class="difflineminus">-       hidden=&quot;true&quot;</span>
<a href="#l17.2408"></a><span id="l17.2408" class="difflineminus">-       onpopupshown=&quot;gCustomizeMode._downloadPanelAutoHideTimeout = setTimeout(() =&gt; event.target.hidePopup(), 4000);&quot;</span>
<a href="#l17.2409"></a><span id="l17.2409" class="difflineminus">-       onmouseover=&quot;clearTimeout(gCustomizeMode._downloadPanelAutoHideTimeout);&quot;</span>
<a href="#l17.2410"></a><span id="l17.2410" class="difflineminus">-       onmouseout=&quot;gCustomizeMode._downloadPanelAutoHideTimeout = setTimeout(() =&gt; event.target.hidePopup(), 2000);&quot;</span>
<a href="#l17.2411"></a><span id="l17.2411" class="difflineminus">-       onpopuphidden=&quot;clearTimeout(gCustomizeMode._downloadPanelAutoHideTimeout);&quot;</span>
<a href="#l17.2412"></a><span id="l17.2412" class="difflineminus">-       &gt;</span>
<a href="#l17.2413"></a><span id="l17.2413" class="difflineminus">-  &lt;checkbox id=&quot;downloads-button-autohide-checkbox&quot;</span>
<a href="#l17.2414"></a><span id="l17.2414" class="difflineminus">-            label=&quot;&amp;customizeMode.autoHideDownloadsButton.label;&quot; checked=&quot;true&quot;</span>
<a href="#l17.2415"></a><span id="l17.2415" class="difflineminus">-            oncommand=&quot;gCustomizeMode.onDownloadsAutoHideChange(event)&quot;/&gt;</span>
<a href="#l17.2416"></a><span id="l17.2416" class="difflineminus">-&lt;/panel&gt;</span>
<a href="#l17.2417"></a><span id="l17.2417" class="difflineminus">-</span>
<a href="#l17.2418"></a><span id="l17.2418" class="difflineminus">-&lt;panel id=&quot;extension-notification-panel&quot;</span>
<a href="#l17.2419"></a><span id="l17.2419" class="difflineminus">-       role=&quot;group&quot;</span>
<a href="#l17.2420"></a><span id="l17.2420" class="difflineminus">-       type=&quot;arrow&quot;</span>
<a href="#l17.2421"></a><span id="l17.2421" class="difflineminus">-       hidden=&quot;true&quot;</span>
<a href="#l17.2422"></a><span id="l17.2422" class="difflineminus">-       flip=&quot;slide&quot;</span>
<a href="#l17.2423"></a><span id="l17.2423" class="difflineminus">-       position=&quot;bottomcenter topright&quot;</span>
<a href="#l17.2424"></a><span id="l17.2424" class="difflineminus">-       tabspecific=&quot;true&quot;&gt;</span>
<a href="#l17.2425"></a><span id="l17.2425" class="difflineminus">-  &lt;popupnotification id=&quot;extension-new-tab-notification&quot;</span>
<a href="#l17.2426"></a><span id="l17.2426" class="difflineminus">-                     class=&quot;extension-controlled-notification&quot;</span>
<a href="#l17.2427"></a><span id="l17.2427" class="difflineminus">-                     popupid=&quot;extension-new-tab&quot;</span>
<a href="#l17.2428"></a><span id="l17.2428" class="difflineminus">-                     hidden=&quot;true&quot;</span>
<a href="#l17.2429"></a><span id="l17.2429" class="difflineminus">-                     label=&quot;&amp;newTabControlled.header.message;&quot;</span>
<a href="#l17.2430"></a><span id="l17.2430" class="difflineminus">-                     buttonlabel=&quot;&amp;newTabControlled.keepButton.label;&quot;</span>
<a href="#l17.2431"></a><span id="l17.2431" class="difflineminus">-                     buttonaccesskey=&quot;&amp;newTabControlled.keepButton.accesskey;&quot;</span>
<a href="#l17.2432"></a><span id="l17.2432" class="difflineminus">-                     secondarybuttonlabel=&quot;&amp;newTabControlled.disableButton.label;&quot;</span>
<a href="#l17.2433"></a><span id="l17.2433" class="difflineminus">-                     secondarybuttonaccesskey=&quot;&amp;newTabControlled.disableButton.accesskey;&quot;</span>
<a href="#l17.2434"></a><span id="l17.2434" class="difflineminus">-                     closebuttonhidden=&quot;true&quot;</span>
<a href="#l17.2435"></a><span id="l17.2435" class="difflineminus">-                     dropmarkerhidden=&quot;true&quot;</span>
<a href="#l17.2436"></a><span id="l17.2436" class="difflineminus">-                     checkboxhidden=&quot;true&quot;&gt;</span>
<a href="#l17.2437"></a><span id="l17.2437" class="difflineminus">-    &lt;popupnotificationcontent orient=&quot;vertical&quot;&gt;</span>
<a href="#l17.2438"></a><span id="l17.2438" class="difflineminus">-      &lt;description id=&quot;extension-new-tab-notification-description&quot;/&gt;</span>
<a href="#l17.2439"></a><span id="l17.2439" class="difflineminus">-    &lt;/popupnotificationcontent&gt;</span>
<a href="#l17.2440"></a><span id="l17.2440" class="difflineminus">-  &lt;/popupnotification&gt;</span>
<a href="#l17.2441"></a><span id="l17.2441" class="difflineminus">-  &lt;popupnotification id=&quot;extension-homepage-notification&quot;</span>
<a href="#l17.2442"></a><span id="l17.2442" class="difflineminus">-                     class=&quot;extension-controlled-notification&quot;</span>
<a href="#l17.2443"></a><span id="l17.2443" class="difflineminus">-                     popupid=&quot;extension-homepage&quot;</span>
<a href="#l17.2444"></a><span id="l17.2444" class="difflineminus">-                     hidden=&quot;true&quot;</span>
<a href="#l17.2445"></a><span id="l17.2445" class="difflineminus">-                     label=&quot;&amp;homepageControlled.header.message;&quot;</span>
<a href="#l17.2446"></a><span id="l17.2446" class="difflineminus">-                     buttonlabel=&quot;&amp;homepageControlled.keepButton.label;&quot;</span>
<a href="#l17.2447"></a><span id="l17.2447" class="difflineminus">-                     buttonaccesskey=&quot;&amp;homepageControlled.keepButton.accesskey;&quot;</span>
<a href="#l17.2448"></a><span id="l17.2448" class="difflineminus">-                     secondarybuttonlabel=&quot;&amp;homepageControlled.disableButton.label;&quot;</span>
<a href="#l17.2449"></a><span id="l17.2449" class="difflineminus">-                     secondarybuttonaccesskey=&quot;&amp;homepageControlled.disableButton.accesskey;&quot;</span>
<a href="#l17.2450"></a><span id="l17.2450" class="difflineminus">-                     closebuttonhidden=&quot;true&quot;</span>
<a href="#l17.2451"></a><span id="l17.2451" class="difflineminus">-                     dropmarkerhidden=&quot;true&quot;</span>
<a href="#l17.2452"></a><span id="l17.2452" class="difflineminus">-                     checkboxhidden=&quot;true&quot;&gt;</span>
<a href="#l17.2453"></a><span id="l17.2453" class="difflineminus">-    &lt;popupnotificationcontent orient=&quot;vertical&quot;&gt;</span>
<a href="#l17.2454"></a><span id="l17.2454" class="difflineminus">-      &lt;description id=&quot;extension-homepage-notification-description&quot;/&gt;</span>
<a href="#l17.2455"></a><span id="l17.2455" class="difflineminus">-    &lt;/popupnotificationcontent&gt;</span>
<a href="#l17.2456"></a><span id="l17.2456" class="difflineminus">-  &lt;/popupnotification&gt;</span>
<a href="#l17.2457"></a><span id="l17.2457" class="difflineminus">-  &lt;popupnotification id=&quot;extension-tab-hide-notification&quot;</span>
<a href="#l17.2458"></a><span id="l17.2458" class="difflineminus">-                     class=&quot;extension-controlled-notification&quot;</span>
<a href="#l17.2459"></a><span id="l17.2459" class="difflineminus">-                     popupid=&quot;extension-tab-hide&quot;</span>
<a href="#l17.2460"></a><span id="l17.2460" class="difflineminus">-                     hidden=&quot;true&quot;</span>
<a href="#l17.2461"></a><span id="l17.2461" class="difflineminus">-                     label=&quot;&amp;tabHideControlled.header.message;&quot;</span>
<a href="#l17.2462"></a><span id="l17.2462" class="difflineminus">-                     buttonlabel=&quot;&amp;tabHideControlled.keepButton.label;&quot;</span>
<a href="#l17.2463"></a><span id="l17.2463" class="difflineminus">-                     buttonaccesskey=&quot;&amp;tabHideControlled.keepButton.accesskey;&quot;</span>
<a href="#l17.2464"></a><span id="l17.2464" class="difflineminus">-                     secondarybuttonlabel=&quot;&amp;tabHideControlled.disableButton.label;&quot;</span>
<a href="#l17.2465"></a><span id="l17.2465" class="difflineminus">-                     secondarybuttonaccesskey=&quot;&amp;tabHideControlled.disableButton.accesskey;&quot;</span>
<a href="#l17.2466"></a><span id="l17.2466" class="difflineminus">-                     closebuttonhidden=&quot;true&quot;</span>
<a href="#l17.2467"></a><span id="l17.2467" class="difflineminus">-                     dropmarkerhidden=&quot;true&quot;</span>
<a href="#l17.2468"></a><span id="l17.2468" class="difflineminus">-                     checkboxhidden=&quot;true&quot;&gt;</span>
<a href="#l17.2469"></a><span id="l17.2469" class="difflineminus">-    &lt;popupnotificationcontent orient=&quot;vertical&quot;&gt;</span>
<a href="#l17.2470"></a><span id="l17.2470" class="difflineminus">-      &lt;description id=&quot;extension-tab-hide-notification-description&quot;/&gt;</span>
<a href="#l17.2471"></a><span id="l17.2471" class="difflineminus">-    &lt;/popupnotificationcontent&gt;</span>
<a href="#l17.2472"></a><span id="l17.2472" class="difflineminus">-  &lt;/popupnotification&gt;</span>
<a href="#l17.2473"></a><span id="l17.2473" class="difflineminus">-&lt;/panel&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mail/components/customizableui/content/panelUI.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mail/components/customizableui/content/panelUI.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -1,57 +1,151 @@</span>
<a href="#l18.4"></a><span id="l18.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l18.5"></a><span id="l18.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this file,</span>
<a href="#l18.6"></a><span id="l18.6">  * You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l18.7"></a><span id="l18.7"> </span>
<a href="#l18.8"></a><span id="l18.8" class="difflineplus">+/* globals AppConstants CanDetachAttachments CharsetMenu</span>
<a href="#l18.9"></a><span id="l18.9" class="difflineplus">+  currentAttachments CustomizableUI ExtensionParent ExtensionSupport FullScreen</span>
<a href="#l18.10"></a><span id="l18.10" class="difflineplus">+  getIconForAttachment goUpdateAttachmentCommands initAddonPrefsMenu</span>
<a href="#l18.11"></a><span id="l18.11" class="difflineplus">+  initAppMenuPopup InitAppmenuViewBodyMenu InitAppMessageMenu</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineplus">+  InitAppmenuViewMessagesMenu InitAppFolderViewsMenu InitAppViewSortByMenu</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+  InitMessageTags InitRecentlyClosedTabsPopup InitViewFolderViewsMenu</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineplus">+  InitViewHeadersMenu InitViewLayoutStyleMenu MozXULElement msgWindow</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineplus">+  onViewToolbarsPopupShowing RefreshCustomViewsPopup RefreshTagsPopup</span>
<a href="#l18.16"></a><span id="l18.16" class="difflineplus">+  RefreshViewPopup SanitizeAttachmentDisplayName Services ShortcutUtils</span>
<a href="#l18.17"></a><span id="l18.17" class="difflineplus">+  UpdateCharsetMenu updateEditUIVisibility UpdateFullZoomMenu XPCOMUtils */</span>
<a href="#l18.18"></a><span id="l18.18" class="difflineplus">+</span>
<a href="#l18.19"></a><span id="l18.19"> ChromeUtils.defineModuleGetter(this, &quot;AppMenuNotifications&quot;,</span>
<a href="#l18.20"></a><span id="l18.20">                                &quot;resource://gre/modules/AppMenuNotifications.jsm&quot;);</span>
<a href="#l18.21"></a><span id="l18.21" class="difflineminus">-ChromeUtils.defineModuleGetter(this, &quot;NewTabUtils&quot;,</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineminus">-                               &quot;resource://gre/modules/NewTabUtils.jsm&quot;);</span>
<a href="#l18.23"></a><span id="l18.23" class="difflineplus">+</span>
<a href="#l18.24"></a><span id="l18.24"> ChromeUtils.defineModuleGetter(this, &quot;PanelMultiView&quot;,</span>
<a href="#l18.25"></a><span id="l18.25">                                &quot;resource:///modules/PanelMultiView.jsm&quot;);</span>
<a href="#l18.26"></a><span id="l18.26"> </span>
<a href="#l18.27"></a><span id="l18.27" class="difflineplus">+// Needed for character encoding subviews.</span>
<a href="#l18.28"></a><span id="l18.28" class="difflineplus">+XPCOMUtils.defineLazyGetter(this, &quot;gBundle&quot;, function() {</span>
<a href="#l18.29"></a><span id="l18.29" class="difflineplus">+  const kUrl = &quot;chrome://global/locale/charsetMenu.properties&quot;;</span>
<a href="#l18.30"></a><span id="l18.30" class="difflineplus">+  return Services.strings.createBundle(kUrl);</span>
<a href="#l18.31"></a><span id="l18.31" class="difflineplus">+});</span>
<a href="#l18.32"></a><span id="l18.32" class="difflineplus">+</span>
<a href="#l18.33"></a><span id="l18.33"> /**</span>
<a href="#l18.34"></a><span id="l18.34">  * Maintains the state and dispatches events for the main menu panel.</span>
<a href="#l18.35"></a><span id="l18.35">  */</span>
<a href="#l18.36"></a><span id="l18.36" class="difflineminus">-</span>
<a href="#l18.37"></a><span id="l18.37"> const PanelUI = {</span>
<a href="#l18.38"></a><span id="l18.38">   /** Panel events that we listen for. **/</span>
<a href="#l18.39"></a><span id="l18.39">   get kEvents() {</span>
<a href="#l18.40"></a><span id="l18.40" class="difflineminus">-    return [&quot;popupshowing&quot;, &quot;popupshown&quot;, &quot;popuphiding&quot;, &quot;popuphidden&quot;];</span>
<a href="#l18.41"></a><span id="l18.41" class="difflineplus">+    return [&quot;popupshowing&quot;, &quot;popupshown&quot;, &quot;popuphiding&quot;, &quot;popuphidden&quot;,</span>
<a href="#l18.42"></a><span id="l18.42" class="difflineplus">+      &quot;ViewShowing&quot;];</span>
<a href="#l18.43"></a><span id="l18.43">   },</span>
<a href="#l18.44"></a><span id="l18.44">   /**</span>
<a href="#l18.45"></a><span id="l18.45">    * Used for lazily getting and memoizing elements from the document. Lazy</span>
<a href="#l18.46"></a><span id="l18.46">    * getters are set in init, and memoizing happens after the first retrieval.</span>
<a href="#l18.47"></a><span id="l18.47">    */</span>
<a href="#l18.48"></a><span id="l18.48">   get kElements() {</span>
<a href="#l18.49"></a><span id="l18.49">     return {</span>
<a href="#l18.50"></a><span id="l18.50">       mainView: &quot;appMenu-mainView&quot;,</span>
<a href="#l18.51"></a><span id="l18.51">       multiView: &quot;appMenu-multiView&quot;,</span>
<a href="#l18.52"></a><span id="l18.52" class="difflineminus">-      helpView: &quot;PanelUI-helpView&quot;,</span>
<a href="#l18.53"></a><span id="l18.53" class="difflineminus">-      libraryView: &quot;appMenu-libraryView&quot;,</span>
<a href="#l18.54"></a><span id="l18.54" class="difflineminus">-      libraryRecentHighlights: &quot;appMenu-library-recentHighlights&quot;,</span>
<a href="#l18.55"></a><span id="l18.55" class="difflineminus">-      menuButton: &quot;PanelUI-menu-button&quot;,</span>
<a href="#l18.56"></a><span id="l18.56" class="difflineplus">+      menuButtonMail: &quot;button-appmenu&quot;,</span>
<a href="#l18.57"></a><span id="l18.57" class="difflineplus">+      menuButtonChat: &quot;button-chat-appmenu&quot;,</span>
<a href="#l18.58"></a><span id="l18.58">       panel: &quot;appMenu-popup&quot;,</span>
<a href="#l18.59"></a><span id="l18.59" class="difflineminus">-      notificationPanel: &quot;appMenu-notification-popup&quot;,</span>
<a href="#l18.60"></a><span id="l18.60" class="difflineminus">-      addonNotificationContainer: &quot;appMenu-addon-banners&quot;,</span>
<a href="#l18.61"></a><span id="l18.61" class="difflineplus">+      navbar: &quot;mail-bar3&quot;,</span>
<a href="#l18.62"></a><span id="l18.62" class="difflineplus">+      // TODO appmenu - do we need all of these?</span>
<a href="#l18.63"></a><span id="l18.63" class="difflineplus">+      // notificationPanel: &quot;appMenu-notification-popup&quot;,</span>
<a href="#l18.64"></a><span id="l18.64" class="difflineplus">+      // addonNotificationContainer: &quot;appMenu-addon-banners&quot;,</span>
<a href="#l18.65"></a><span id="l18.65">       overflowFixedList: &quot;widget-overflow-fixed-list&quot;,</span>
<a href="#l18.66"></a><span id="l18.66" class="difflineminus">-      overflowPanel: &quot;widget-overflow&quot;,</span>
<a href="#l18.67"></a><span id="l18.67" class="difflineminus">-      navbar: &quot;nav-bar&quot;,</span>
<a href="#l18.68"></a><span id="l18.68" class="difflineplus">+      // overflowPanel: &quot;widget-overflow&quot;,</span>
<a href="#l18.69"></a><span id="l18.69">     };</span>
<a href="#l18.70"></a><span id="l18.70">   },</span>
<a href="#l18.71"></a><span id="l18.71"> </span>
<a href="#l18.72"></a><span id="l18.72" class="difflineplus">+  /**</span>
<a href="#l18.73"></a><span id="l18.73" class="difflineplus">+   * Used for the View / Text Encoding view.</span>
<a href="#l18.74"></a><span id="l18.74" class="difflineplus">+   * Not ideal: copied from: mozilla-central/toolkit/modules/CharsetMenu.jsm</span>
<a href="#l18.75"></a><span id="l18.75" class="difflineplus">+   * This set contains encodings that are in the Encoding Standard, except:</span>
<a href="#l18.76"></a><span id="l18.76" class="difflineplus">+   *  - XSS-dangerous encodings (except ISO-2022-JP which is assumed to be</span>
<a href="#l18.77"></a><span id="l18.77" class="difflineplus">+   *    too common not to be included).</span>
<a href="#l18.78"></a><span id="l18.78" class="difflineplus">+   *  - x-user-defined, which practically never makes sense as an end-user-chosen</span>
<a href="#l18.79"></a><span id="l18.79" class="difflineplus">+   *    override.</span>
<a href="#l18.80"></a><span id="l18.80" class="difflineplus">+   *  - Encodings that IE11 doesn't have in its correspoding menu.</span>
<a href="#l18.81"></a><span id="l18.81" class="difflineplus">+   */</span>
<a href="#l18.82"></a><span id="l18.82" class="difflineplus">+  kEncodings: new Set([</span>
<a href="#l18.83"></a><span id="l18.83" class="difflineplus">+    // Globally relevant</span>
<a href="#l18.84"></a><span id="l18.84" class="difflineplus">+    &quot;UTF-8&quot;,</span>
<a href="#l18.85"></a><span id="l18.85" class="difflineplus">+    &quot;windows-1252&quot;,</span>
<a href="#l18.86"></a><span id="l18.86" class="difflineplus">+    // Arabic</span>
<a href="#l18.87"></a><span id="l18.87" class="difflineplus">+    &quot;windows-1256&quot;,</span>
<a href="#l18.88"></a><span id="l18.88" class="difflineplus">+    &quot;ISO-8859-6&quot;,</span>
<a href="#l18.89"></a><span id="l18.89" class="difflineplus">+    // Baltic</span>
<a href="#l18.90"></a><span id="l18.90" class="difflineplus">+    &quot;windows-1257&quot;,</span>
<a href="#l18.91"></a><span id="l18.91" class="difflineplus">+    &quot;ISO-8859-4&quot;,</span>
<a href="#l18.92"></a><span id="l18.92" class="difflineplus">+    // &quot;ISO-8859-13&quot;, // Hidden since not in menu in IE11</span>
<a href="#l18.93"></a><span id="l18.93" class="difflineplus">+    // Central European</span>
<a href="#l18.94"></a><span id="l18.94" class="difflineplus">+    &quot;windows-1250&quot;,</span>
<a href="#l18.95"></a><span id="l18.95" class="difflineplus">+    &quot;ISO-8859-2&quot;,</span>
<a href="#l18.96"></a><span id="l18.96" class="difflineplus">+    // Chinese, Simplified</span>
<a href="#l18.97"></a><span id="l18.97" class="difflineplus">+    &quot;GBK&quot;,</span>
<a href="#l18.98"></a><span id="l18.98" class="difflineplus">+    // Chinese, Traditional</span>
<a href="#l18.99"></a><span id="l18.99" class="difflineplus">+    &quot;Big5&quot;,</span>
<a href="#l18.100"></a><span id="l18.100" class="difflineplus">+    // Cyrillic</span>
<a href="#l18.101"></a><span id="l18.101" class="difflineplus">+    &quot;windows-1251&quot;,</span>
<a href="#l18.102"></a><span id="l18.102" class="difflineplus">+    &quot;ISO-8859-5&quot;,</span>
<a href="#l18.103"></a><span id="l18.103" class="difflineplus">+    &quot;KOI8-R&quot;,</span>
<a href="#l18.104"></a><span id="l18.104" class="difflineplus">+    &quot;KOI8-U&quot;,</span>
<a href="#l18.105"></a><span id="l18.105" class="difflineplus">+    &quot;IBM866&quot;, // Not in menu in Chromium. Maybe drop this?</span>
<a href="#l18.106"></a><span id="l18.106" class="difflineplus">+    // &quot;x-mac-cyrillic&quot;, // Not in menu in IE11 or Chromium.</span>
<a href="#l18.107"></a><span id="l18.107" class="difflineplus">+    // Greek</span>
<a href="#l18.108"></a><span id="l18.108" class="difflineplus">+    &quot;windows-1253&quot;,</span>
<a href="#l18.109"></a><span id="l18.109" class="difflineplus">+    &quot;ISO-8859-7&quot;,</span>
<a href="#l18.110"></a><span id="l18.110" class="difflineplus">+    // Hebrew</span>
<a href="#l18.111"></a><span id="l18.111" class="difflineplus">+    &quot;windows-1255&quot;,</span>
<a href="#l18.112"></a><span id="l18.112" class="difflineplus">+    &quot;ISO-8859-8&quot;,</span>
<a href="#l18.113"></a><span id="l18.113" class="difflineplus">+    // Japanese</span>
<a href="#l18.114"></a><span id="l18.114" class="difflineplus">+    &quot;Shift_JIS&quot;,</span>
<a href="#l18.115"></a><span id="l18.115" class="difflineplus">+    &quot;EUC-JP&quot;,</span>
<a href="#l18.116"></a><span id="l18.116" class="difflineplus">+    &quot;ISO-2022-JP&quot;,</span>
<a href="#l18.117"></a><span id="l18.117" class="difflineplus">+    // Korean</span>
<a href="#l18.118"></a><span id="l18.118" class="difflineplus">+    &quot;EUC-KR&quot;,</span>
<a href="#l18.119"></a><span id="l18.119" class="difflineplus">+    // Thai</span>
<a href="#l18.120"></a><span id="l18.120" class="difflineplus">+    &quot;windows-874&quot;,</span>
<a href="#l18.121"></a><span id="l18.121" class="difflineplus">+    // Turkish</span>
<a href="#l18.122"></a><span id="l18.122" class="difflineplus">+    &quot;windows-1254&quot;,</span>
<a href="#l18.123"></a><span id="l18.123" class="difflineplus">+    // Vietnamese</span>
<a href="#l18.124"></a><span id="l18.124" class="difflineplus">+    &quot;windows-1258&quot;,</span>
<a href="#l18.125"></a><span id="l18.125" class="difflineplus">+    // Hiding rare European encodings that aren't in the menu in IE11 and would</span>
<a href="#l18.126"></a><span id="l18.126" class="difflineplus">+    // make the menu messy by sorting all over the place</span>
<a href="#l18.127"></a><span id="l18.127" class="difflineplus">+    // &quot;ISO-8859-3&quot;,</span>
<a href="#l18.128"></a><span id="l18.128" class="difflineplus">+    // &quot;ISO-8859-10&quot;,</span>
<a href="#l18.129"></a><span id="l18.129" class="difflineplus">+    // &quot;ISO-8859-14&quot;,</span>
<a href="#l18.130"></a><span id="l18.130" class="difflineplus">+    // &quot;ISO-8859-15&quot;,</span>
<a href="#l18.131"></a><span id="l18.131" class="difflineplus">+    // &quot;ISO-8859-16&quot;,</span>
<a href="#l18.132"></a><span id="l18.132" class="difflineplus">+    // &quot;macintosh&quot;</span>
<a href="#l18.133"></a><span id="l18.133" class="difflineplus">+  ]),</span>
<a href="#l18.134"></a><span id="l18.134" class="difflineplus">+</span>
<a href="#l18.135"></a><span id="l18.135" class="difflineplus">+  // Used for the View / Text Encoding view.</span>
<a href="#l18.136"></a><span id="l18.136" class="difflineplus">+  // Not ideal: copied from: mozilla-central/toolkit/modules/CharsetMenu.jsm</span>
<a href="#l18.137"></a><span id="l18.137" class="difflineplus">+  // Always at the start of the text encodings view, in this order, followed by</span>
<a href="#l18.138"></a><span id="l18.138" class="difflineplus">+  // a separator.</span>
<a href="#l18.139"></a><span id="l18.139" class="difflineplus">+  kPinnedEncodings: [</span>
<a href="#l18.140"></a><span id="l18.140" class="difflineplus">+    &quot;UTF-8&quot;,</span>
<a href="#l18.141"></a><span id="l18.141" class="difflineplus">+    &quot;windows-1252&quot;,</span>
<a href="#l18.142"></a><span id="l18.142" class="difflineplus">+  ],</span>
<a href="#l18.143"></a><span id="l18.143" class="difflineplus">+</span>
<a href="#l18.144"></a><span id="l18.144">   _initialized: false,</span>
<a href="#l18.145"></a><span id="l18.145">   _notifications: null,</span>
<a href="#l18.146"></a><span id="l18.146"> </span>
<a href="#l18.147"></a><span id="l18.147">   init() {</span>
<a href="#l18.148"></a><span id="l18.148">     this._initElements();</span>
<a href="#l18.149"></a><span id="l18.149"> </span>
<a href="#l18.150"></a><span id="l18.150" class="difflineminus">-    this.menuButton.addEventListener(&quot;mousedown&quot;, this);</span>
<a href="#l18.151"></a><span id="l18.151" class="difflineminus">-    this.menuButton.addEventListener(&quot;keypress&quot;, this);</span>
<a href="#l18.152"></a><span id="l18.152" class="difflineplus">+    [this.menuButtonMail, this.menuButtonChat].forEach(button =&gt; {</span>
<a href="#l18.153"></a><span id="l18.153" class="difflineplus">+      // There's no chat button in the messageWindow.xul context.</span>
<a href="#l18.154"></a><span id="l18.154" class="difflineplus">+      if (button) {</span>
<a href="#l18.155"></a><span id="l18.155" class="difflineplus">+        button.addEventListener(&quot;mousedown&quot;, this);</span>
<a href="#l18.156"></a><span id="l18.156" class="difflineplus">+        button.addEventListener(&quot;keypress&quot;, this);</span>
<a href="#l18.157"></a><span id="l18.157" class="difflineplus">+      }</span>
<a href="#l18.158"></a><span id="l18.158" class="difflineplus">+    });</span>
<a href="#l18.159"></a><span id="l18.159" class="difflineplus">+</span>
<a href="#l18.160"></a><span id="l18.160" class="difflineplus">+    this.menuButton = this.menuButtonMail;</span>
<a href="#l18.161"></a><span id="l18.161"> </span>
<a href="#l18.162"></a><span id="l18.162">     Services.obs.addObserver(this, &quot;fullscreen-nav-toolbox&quot;);</span>
<a href="#l18.163"></a><span id="l18.163">     Services.obs.addObserver(this, &quot;appMenu-notifications&quot;);</span>
<a href="#l18.164"></a><span id="l18.164"> </span>
<a href="#l18.165"></a><span id="l18.165">     XPCOMUtils.defineLazyPreferenceGetter(this, &quot;autoHideToolbarInFullScreen&quot;,</span>
<a href="#l18.166"></a><span id="l18.166">       &quot;browser.fullscreen.autohide&quot;, false, (pref, previousValue, newValue) =&gt; {</span>
<a href="#l18.167"></a><span id="l18.167">         // On OSX, or with autohide preffed off, MozDOMFullscreen is the only</span>
<a href="#l18.168"></a><span id="l18.168">         // event we care about, since fullscreen should behave just like non</span>
<a href="#l18.169"></a><span id="l18.169" class="difflineat">@@ -73,28 +167,23 @@ const PanelUI = {</span>
<a href="#l18.170"></a><span id="l18.170"> </span>
<a href="#l18.171"></a><span id="l18.171">     if (this.autoHideToolbarInFullScreen) {</span>
<a href="#l18.172"></a><span id="l18.172">       window.addEventListener(&quot;fullscreen&quot;, this);</span>
<a href="#l18.173"></a><span id="l18.173">     } else {</span>
<a href="#l18.174"></a><span id="l18.174">       window.addEventListener(&quot;MozDOMFullscreen:Entered&quot;, this);</span>
<a href="#l18.175"></a><span id="l18.175">       window.addEventListener(&quot;MozDOMFullscreen:Exited&quot;, this);</span>
<a href="#l18.176"></a><span id="l18.176">     }</span>
<a href="#l18.177"></a><span id="l18.177"> </span>
<a href="#l18.178"></a><span id="l18.178" class="difflineminus">-    XPCOMUtils.defineLazyPreferenceGetter(this, &quot;libraryRecentHighlightsEnabled&quot;,</span>
<a href="#l18.179"></a><span id="l18.179" class="difflineminus">-      &quot;browser.library.activity-stream.enabled&quot;, false, (pref, previousValue, newValue) =&gt; {</span>
<a href="#l18.180"></a><span id="l18.180" class="difflineminus">-        if (!newValue)</span>
<a href="#l18.181"></a><span id="l18.181" class="difflineminus">-          this.clearLibraryRecentHighlights();</span>
<a href="#l18.182"></a><span id="l18.182" class="difflineminus">-      });</span>
<a href="#l18.183"></a><span id="l18.183" class="difflineminus">-</span>
<a href="#l18.184"></a><span id="l18.184">     window.addEventListener(&quot;activate&quot;, this);</span>
<a href="#l18.185"></a><span id="l18.185">     CustomizableUI.addListener(this);</span>
<a href="#l18.186"></a><span id="l18.186"> </span>
<a href="#l18.187"></a><span id="l18.187" class="difflineminus">-    for (let event of this.kEvents) {</span>
<a href="#l18.188"></a><span id="l18.188" class="difflineminus">-      this.notificationPanel.addEventListener(event, this);</span>
<a href="#l18.189"></a><span id="l18.189" class="difflineminus">-    }</span>
<a href="#l18.190"></a><span id="l18.190" class="difflineplus">+    // We are not currently using the notificationPanel.</span>
<a href="#l18.191"></a><span id="l18.191" class="difflineplus">+    // for (let event of this.kEvents) {</span>
<a href="#l18.192"></a><span id="l18.192" class="difflineplus">+    //   this.notificationPanel.addEventListener(event, this);</span>
<a href="#l18.193"></a><span id="l18.193" class="difflineplus">+    // }</span>
<a href="#l18.194"></a><span id="l18.194"> </span>
<a href="#l18.195"></a><span id="l18.195">     // We do this sync on init because in order to have the overflow button show up</span>
<a href="#l18.196"></a><span id="l18.196">     // we need to know whether anything is in the permanent panel area.</span>
<a href="#l18.197"></a><span id="l18.197">     this.overflowFixedList.hidden = false;</span>
<a href="#l18.198"></a><span id="l18.198">     // Also unhide the separator. We use CSS to hide/show it based on the panel's content.</span>
<a href="#l18.199"></a><span id="l18.199">     this.overflowFixedList.previousElementSibling.hidden = false;</span>
<a href="#l18.200"></a><span id="l18.200">     CustomizableUI.registerMenuPanel(this.overflowFixedList, CustomizableUI.AREA_FIXED_OVERFLOW_PANEL);</span>
<a href="#l18.201"></a><span id="l18.201">     this.updateOverflowStatus();</span>
<a href="#l18.202"></a><span id="l18.202" class="difflineat">@@ -106,81 +195,93 @@ const PanelUI = {</span>
<a href="#l18.203"></a><span id="l18.203"> </span>
<a href="#l18.204"></a><span id="l18.204">   _initElements() {</span>
<a href="#l18.205"></a><span id="l18.205">     for (let [k, v] of Object.entries(this.kElements)) {</span>
<a href="#l18.206"></a><span id="l18.206">       // Need to do fresh let-bindings per iteration</span>
<a href="#l18.207"></a><span id="l18.207">       let getKey = k;</span>
<a href="#l18.208"></a><span id="l18.208">       let id = v;</span>
<a href="#l18.209"></a><span id="l18.209">       this.__defineGetter__(getKey, function() {</span>
<a href="#l18.210"></a><span id="l18.210">         delete this[getKey];</span>
<a href="#l18.211"></a><span id="l18.211" class="difflineplus">+        // eslint-disable-next-line consistent-return</span>
<a href="#l18.212"></a><span id="l18.212">         return this[getKey] = document.getElementById(id);</span>
<a href="#l18.213"></a><span id="l18.213">       });</span>
<a href="#l18.214"></a><span id="l18.214">     }</span>
<a href="#l18.215"></a><span id="l18.215">   },</span>
<a href="#l18.216"></a><span id="l18.216"> </span>
<a href="#l18.217"></a><span id="l18.217">   _eventListenersAdded: false,</span>
<a href="#l18.218"></a><span id="l18.218">   _ensureEventListenersAdded() {</span>
<a href="#l18.219"></a><span id="l18.219">     if (this._eventListenersAdded)</span>
<a href="#l18.220"></a><span id="l18.220">       return;</span>
<a href="#l18.221"></a><span id="l18.221">     this._addEventListeners();</span>
<a href="#l18.222"></a><span id="l18.222">   },</span>
<a href="#l18.223"></a><span id="l18.223"> </span>
<a href="#l18.224"></a><span id="l18.224">   _addEventListeners() {</span>
<a href="#l18.225"></a><span id="l18.225">     for (let event of this.kEvents) {</span>
<a href="#l18.226"></a><span id="l18.226">       this.panel.addEventListener(event, this);</span>
<a href="#l18.227"></a><span id="l18.227">     }</span>
<a href="#l18.228"></a><span id="l18.228" class="difflineminus">-</span>
<a href="#l18.229"></a><span id="l18.229" class="difflineminus">-    this.helpView.addEventListener(&quot;ViewShowing&quot;, this._onHelpViewShow);</span>
<a href="#l18.230"></a><span id="l18.230">     this._eventListenersAdded = true;</span>
<a href="#l18.231"></a><span id="l18.231">   },</span>
<a href="#l18.232"></a><span id="l18.232"> </span>
<a href="#l18.233"></a><span id="l18.233">   _removeEventListeners() {</span>
<a href="#l18.234"></a><span id="l18.234">     for (let event of this.kEvents) {</span>
<a href="#l18.235"></a><span id="l18.235">       this.panel.removeEventListener(event, this);</span>
<a href="#l18.236"></a><span id="l18.236">     }</span>
<a href="#l18.237"></a><span id="l18.237" class="difflineminus">-    this.helpView.removeEventListener(&quot;ViewShowing&quot;, this._onHelpViewShow);</span>
<a href="#l18.238"></a><span id="l18.238">     this._eventListenersAdded = false;</span>
<a href="#l18.239"></a><span id="l18.239">   },</span>
<a href="#l18.240"></a><span id="l18.240"> </span>
<a href="#l18.241"></a><span id="l18.241">   uninit() {</span>
<a href="#l18.242"></a><span id="l18.242">     this._removeEventListeners();</span>
<a href="#l18.243"></a><span id="l18.243" class="difflineminus">-    for (let event of this.kEvents) {</span>
<a href="#l18.244"></a><span id="l18.244" class="difflineminus">-      this.notificationPanel.removeEventListener(event, this);</span>
<a href="#l18.245"></a><span id="l18.245" class="difflineminus">-    }</span>
<a href="#l18.246"></a><span id="l18.246" class="difflineplus">+</span>
<a href="#l18.247"></a><span id="l18.247" class="difflineplus">+    // We are not currently using the notificationPanel.</span>
<a href="#l18.248"></a><span id="l18.248" class="difflineplus">+    // for (let event of this.kEvents) {</span>
<a href="#l18.249"></a><span id="l18.249" class="difflineplus">+    //   this.notificationPanel.removeEventListener(event, this);</span>
<a href="#l18.250"></a><span id="l18.250" class="difflineplus">+    // }</span>
<a href="#l18.251"></a><span id="l18.251"> </span>
<a href="#l18.252"></a><span id="l18.252">     Services.obs.removeObserver(this, &quot;fullscreen-nav-toolbox&quot;);</span>
<a href="#l18.253"></a><span id="l18.253">     Services.obs.removeObserver(this, &quot;appMenu-notifications&quot;);</span>
<a href="#l18.254"></a><span id="l18.254"> </span>
<a href="#l18.255"></a><span id="l18.255">     window.removeEventListener(&quot;MozDOMFullscreen:Entered&quot;, this);</span>
<a href="#l18.256"></a><span id="l18.256">     window.removeEventListener(&quot;MozDOMFullscreen:Exited&quot;, this);</span>
<a href="#l18.257"></a><span id="l18.257">     window.removeEventListener(&quot;fullscreen&quot;, this);</span>
<a href="#l18.258"></a><span id="l18.258">     window.removeEventListener(&quot;activate&quot;, this);</span>
<a href="#l18.259"></a><span id="l18.259" class="difflineminus">-    this.menuButton.removeEventListener(&quot;mousedown&quot;, this);</span>
<a href="#l18.260"></a><span id="l18.260" class="difflineminus">-    this.menuButton.removeEventListener(&quot;keypress&quot;, this);</span>
<a href="#l18.261"></a><span id="l18.261" class="difflineplus">+</span>
<a href="#l18.262"></a><span id="l18.262" class="difflineplus">+    [this.menuButtonMail, this.menuButtonChat].forEach(button =&gt; {</span>
<a href="#l18.263"></a><span id="l18.263" class="difflineplus">+      // There's no chat button in the messageWindow.xul context.</span>
<a href="#l18.264"></a><span id="l18.264" class="difflineplus">+      if (button) {</span>
<a href="#l18.265"></a><span id="l18.265" class="difflineplus">+        button.removeEventListener(&quot;mousedown&quot;, this);</span>
<a href="#l18.266"></a><span id="l18.266" class="difflineplus">+        button.removeEventListener(&quot;keypress&quot;, this);</span>
<a href="#l18.267"></a><span id="l18.267" class="difflineplus">+      }</span>
<a href="#l18.268"></a><span id="l18.268" class="difflineplus">+    });</span>
<a href="#l18.269"></a><span id="l18.269" class="difflineplus">+</span>
<a href="#l18.270"></a><span id="l18.270">     CustomizableUI.removeListener(this);</span>
<a href="#l18.271"></a><span id="l18.271" class="difflineminus">-    this.libraryView.removeEventListener(&quot;ViewShowing&quot;, this);</span>
<a href="#l18.272"></a><span id="l18.272">   },</span>
<a href="#l18.273"></a><span id="l18.273"> </span>
<a href="#l18.274"></a><span id="l18.274">   /**</span>
<a href="#l18.275"></a><span id="l18.275" class="difflineminus">-   * Opens the menu panel if it's closed, or closes it if it's</span>
<a href="#l18.276"></a><span id="l18.276" class="difflineminus">-   * open.</span>
<a href="#l18.277"></a><span id="l18.277" class="difflineplus">+   * Opens the menu panel if it's closed, or closes it if it's open.</span>
<a href="#l18.278"></a><span id="l18.278">    *</span>
<a href="#l18.279"></a><span id="l18.279" class="difflineminus">-   * @param aEvent the event that triggers the toggle.</span>
<a href="#l18.280"></a><span id="l18.280" class="difflineplus">+   * @param event the event that triggers the toggle.</span>
<a href="#l18.281"></a><span id="l18.281">    */</span>
<a href="#l18.282"></a><span id="l18.282" class="difflineminus">-  toggle(aEvent) {</span>
<a href="#l18.283"></a><span id="l18.283" class="difflineplus">+  toggle(event) {</span>
<a href="#l18.284"></a><span id="l18.284">     // Don't show the panel if the window is in customization mode,</span>
<a href="#l18.285"></a><span id="l18.285">     // since this button doubles as an exit path for the user in this case.</span>
<a href="#l18.286"></a><span id="l18.286">     if (document.documentElement.hasAttribute(&quot;customizing&quot;)) {</span>
<a href="#l18.287"></a><span id="l18.287">       return;</span>
<a href="#l18.288"></a><span id="l18.288">     }</span>
<a href="#l18.289"></a><span id="l18.289" class="difflineplus">+</span>
<a href="#l18.290"></a><span id="l18.290" class="difflineplus">+    // Since we have several menu buttons, make sure the current one is used.</span>
<a href="#l18.291"></a><span id="l18.291" class="difflineplus">+    // This works for now, but in the long run, if we're showing badges etc.</span>
<a href="#l18.292"></a><span id="l18.292" class="difflineplus">+    // then the current menuButton needs to be set when the app's view/tab</span>
<a href="#l18.293"></a><span id="l18.293" class="difflineplus">+    // changes, not just when the menu is toggled.</span>
<a href="#l18.294"></a><span id="l18.294" class="difflineplus">+    this.menuButton = event.target;</span>
<a href="#l18.295"></a><span id="l18.295" class="difflineplus">+</span>
<a href="#l18.296"></a><span id="l18.296">     this._ensureEventListenersAdded();</span>
<a href="#l18.297"></a><span id="l18.297">     if (this.panel.state == &quot;open&quot;) {</span>
<a href="#l18.298"></a><span id="l18.298">       this.hide();</span>
<a href="#l18.299"></a><span id="l18.299">     } else if (this.panel.state == &quot;closed&quot;) {</span>
<a href="#l18.300"></a><span id="l18.300" class="difflineminus">-      this.show(aEvent);</span>
<a href="#l18.301"></a><span id="l18.301" class="difflineplus">+      this.show(event);</span>
<a href="#l18.302"></a><span id="l18.302">     }</span>
<a href="#l18.303"></a><span id="l18.303">   },</span>
<a href="#l18.304"></a><span id="l18.304"> </span>
<a href="#l18.305"></a><span id="l18.305">   /**</span>
<a href="#l18.306"></a><span id="l18.306">    * Opens the menu panel. If the event target has a child with the</span>
<a href="#l18.307"></a><span id="l18.307">    * toolbarbutton-icon attribute, the panel will be anchored on that child.</span>
<a href="#l18.308"></a><span id="l18.308">    * Otherwise, the panel is anchored on the event target itself.</span>
<a href="#l18.309"></a><span id="l18.309">    *</span>
<a href="#l18.310"></a><span id="l18.310" class="difflineat">@@ -232,67 +333,162 @@ const PanelUI = {</span>
<a href="#l18.311"></a><span id="l18.311">           break;</span>
<a href="#l18.312"></a><span id="l18.312">         }</span>
<a href="#l18.313"></a><span id="l18.313">         this._notifications = AppMenuNotifications.notifications;</span>
<a href="#l18.314"></a><span id="l18.314">         this._updateNotifications(true);</span>
<a href="#l18.315"></a><span id="l18.315">         break;</span>
<a href="#l18.316"></a><span id="l18.316">     }</span>
<a href="#l18.317"></a><span id="l18.317">   },</span>
<a href="#l18.318"></a><span id="l18.318"> </span>
<a href="#l18.319"></a><span id="l18.319" class="difflineminus">-  handleEvent(aEvent) {</span>
<a href="#l18.320"></a><span id="l18.320" class="difflineplus">+  handleEvent(event) {</span>
<a href="#l18.321"></a><span id="l18.321">     // Ignore context menus and menu button menus showing and hiding:</span>
<a href="#l18.322"></a><span id="l18.322" class="difflineminus">-    if (aEvent.type.startsWith(&quot;popup&quot;) &amp;&amp;</span>
<a href="#l18.323"></a><span id="l18.323" class="difflineminus">-        aEvent.target != this.panel) {</span>
<a href="#l18.324"></a><span id="l18.324" class="difflineplus">+    if (event.type.startsWith(&quot;popup&quot;) &amp;&amp;</span>
<a href="#l18.325"></a><span id="l18.325" class="difflineplus">+        event.target != this.panel) {</span>
<a href="#l18.326"></a><span id="l18.326">       return;</span>
<a href="#l18.327"></a><span id="l18.327">     }</span>
<a href="#l18.328"></a><span id="l18.328" class="difflineminus">-    switch (aEvent.type) {</span>
<a href="#l18.329"></a><span id="l18.329" class="difflineplus">+    switch (event.type) {</span>
<a href="#l18.330"></a><span id="l18.330">       case &quot;popupshowing&quot;:</span>
<a href="#l18.331"></a><span id="l18.331" class="difflineminus">-        updateEditUIVisibility();</span>
<a href="#l18.332"></a><span id="l18.332" class="difflineplus">+        initAppMenuPopup();</span>
<a href="#l18.333"></a><span id="l18.333">         // Fall through</span>
<a href="#l18.334"></a><span id="l18.334">       case &quot;popupshown&quot;:</span>
<a href="#l18.335"></a><span id="l18.335" class="difflineminus">-        if (aEvent.type == &quot;popupshown&quot;) {</span>
<a href="#l18.336"></a><span id="l18.336" class="difflineplus">+        if (event.type == &quot;popupshown&quot;) {</span>
<a href="#l18.337"></a><span id="l18.337">           CustomizableUI.addPanelCloseListeners(this.panel);</span>
<a href="#l18.338"></a><span id="l18.338">         }</span>
<a href="#l18.339"></a><span id="l18.339">         // Fall through</span>
<a href="#l18.340"></a><span id="l18.340">       case &quot;popuphiding&quot;:</span>
<a href="#l18.341"></a><span id="l18.341" class="difflineminus">-        if (aEvent.type == &quot;popuphiding&quot;) {</span>
<a href="#l18.342"></a><span id="l18.342" class="difflineminus">-          updateEditUIVisibility();</span>
<a href="#l18.343"></a><span id="l18.343" class="difflineminus">-        }</span>
<a href="#l18.344"></a><span id="l18.344">         // Fall through</span>
<a href="#l18.345"></a><span id="l18.345">       case &quot;popuphidden&quot;:</span>
<a href="#l18.346"></a><span id="l18.346">         this._updateNotifications();</span>
<a href="#l18.347"></a><span id="l18.347" class="difflineminus">-        this._updatePanelButton(aEvent.target);</span>
<a href="#l18.348"></a><span id="l18.348" class="difflineminus">-        if (aEvent.type == &quot;popuphidden&quot;) {</span>
<a href="#l18.349"></a><span id="l18.349" class="difflineplus">+        this._updatePanelButton(event.target);</span>
<a href="#l18.350"></a><span id="l18.350" class="difflineplus">+        if (event.type == &quot;popuphidden&quot;) {</span>
<a href="#l18.351"></a><span id="l18.351">           CustomizableUI.removePanelCloseListeners(this.panel);</span>
<a href="#l18.352"></a><span id="l18.352">         }</span>
<a href="#l18.353"></a><span id="l18.353">         break;</span>
<a href="#l18.354"></a><span id="l18.354">       case &quot;mousedown&quot;:</span>
<a href="#l18.355"></a><span id="l18.355" class="difflineminus">-        if (aEvent.button == 0)</span>
<a href="#l18.356"></a><span id="l18.356" class="difflineminus">-          this.toggle(aEvent);</span>
<a href="#l18.357"></a><span id="l18.357" class="difflineplus">+        if (event.button == 0) {</span>
<a href="#l18.358"></a><span id="l18.358" class="difflineplus">+          this.toggle(event);</span>
<a href="#l18.359"></a><span id="l18.359" class="difflineplus">+        }</span>
<a href="#l18.360"></a><span id="l18.360">         break;</span>
<a href="#l18.361"></a><span id="l18.361">       case &quot;keypress&quot;:</span>
<a href="#l18.362"></a><span id="l18.362" class="difflineminus">-        if (aEvent.key == &quot; &quot; || aEvent.key == &quot;Enter&quot;) {</span>
<a href="#l18.363"></a><span id="l18.363" class="difflineminus">-          this.toggle(aEvent);</span>
<a href="#l18.364"></a><span id="l18.364" class="difflineminus">-          aEvent.stopPropagation();</span>
<a href="#l18.365"></a><span id="l18.365" class="difflineplus">+        if (event.key == &quot; &quot; || event.key == &quot;Enter&quot;) {</span>
<a href="#l18.366"></a><span id="l18.366" class="difflineplus">+          this.toggle(event);</span>
<a href="#l18.367"></a><span id="l18.367" class="difflineplus">+          event.stopPropagation();</span>
<a href="#l18.368"></a><span id="l18.368">         }</span>
<a href="#l18.369"></a><span id="l18.369">         break;</span>
<a href="#l18.370"></a><span id="l18.370">       case &quot;MozDOMFullscreen:Entered&quot;:</span>
<a href="#l18.371"></a><span id="l18.371">       case &quot;MozDOMFullscreen:Exited&quot;:</span>
<a href="#l18.372"></a><span id="l18.372">       case &quot;fullscreen&quot;:</span>
<a href="#l18.373"></a><span id="l18.373">       case &quot;activate&quot;:</span>
<a href="#l18.374"></a><span id="l18.374">         this._updateNotifications();</span>
<a href="#l18.375"></a><span id="l18.375">         break;</span>
<a href="#l18.376"></a><span id="l18.376">       case &quot;ViewShowing&quot;:</span>
<a href="#l18.377"></a><span id="l18.377" class="difflineminus">-        if (aEvent.target == this.libraryView) {</span>
<a href="#l18.378"></a><span id="l18.378" class="difflineminus">-          this.onLibraryViewShowing(aEvent.target).catch(Cu.reportError);</span>
<a href="#l18.379"></a><span id="l18.379" class="difflineminus">-        }</span>
<a href="#l18.380"></a><span id="l18.380" class="difflineplus">+        PanelUI._handleViewShowingEvent(event);</span>
<a href="#l18.381"></a><span id="l18.381">         break;</span>
<a href="#l18.382"></a><span id="l18.382">     }</span>
<a href="#l18.383"></a><span id="l18.383">   },</span>
<a href="#l18.384"></a><span id="l18.384"> </span>
<a href="#l18.385"></a><span id="l18.385" class="difflineplus">+  /**</span>
<a href="#l18.386"></a><span id="l18.386" class="difflineplus">+   * When a ViewShowing event happens when a &lt;panelview&gt; element is shown,</span>
<a href="#l18.387"></a><span id="l18.387" class="difflineplus">+   * do any required set up for that particular view.</span>
<a href="#l18.388"></a><span id="l18.388" class="difflineplus">+   *</span>
<a href="#l18.389"></a><span id="l18.389" class="difflineplus">+   * @param {ViewShowingEvent} event  ViewShowing event.</span>
<a href="#l18.390"></a><span id="l18.390" class="difflineplus">+   */</span>
<a href="#l18.391"></a><span id="l18.391" class="difflineplus">+  _handleViewShowingEvent(event) {</span>
<a href="#l18.392"></a><span id="l18.392" class="difflineplus">+    // Typically event.target for &quot;ViewShowing&quot; is a &lt;panelview&gt; element.</span>
<a href="#l18.393"></a><span id="l18.393" class="difflineplus">+    PanelUI._ensureShortcutsShown(event.target);</span>
<a href="#l18.394"></a><span id="l18.394" class="difflineplus">+</span>
<a href="#l18.395"></a><span id="l18.395" class="difflineplus">+    switch (event.target.id) {</span>
<a href="#l18.396"></a><span id="l18.396" class="difflineplus">+      case &quot;appMenu-attachmentsView&quot;:</span>
<a href="#l18.397"></a><span id="l18.397" class="difflineplus">+        this._onAttachmentsViewShow(event);</span>
<a href="#l18.398"></a><span id="l18.398" class="difflineplus">+        break;</span>
<a href="#l18.399"></a><span id="l18.399" class="difflineplus">+      case &quot;appMenu-attachmentView&quot;:</span>
<a href="#l18.400"></a><span id="l18.400" class="difflineplus">+        this._onAttachmentViewShow(event);</span>
<a href="#l18.401"></a><span id="l18.401" class="difflineplus">+        break;</span>
<a href="#l18.402"></a><span id="l18.402" class="difflineplus">+      case &quot;appMenu-foldersView&quot;:</span>
<a href="#l18.403"></a><span id="l18.403" class="difflineplus">+        this._onFoldersViewShow(event);</span>
<a href="#l18.404"></a><span id="l18.404" class="difflineplus">+        break;</span>
<a href="#l18.405"></a><span id="l18.405" class="difflineplus">+      case &quot;appMenu-addonsView&quot;:</span>
<a href="#l18.406"></a><span id="l18.406" class="difflineplus">+        initAddonPrefsMenu(event.target.querySelector(&quot;.panel-subview-body&quot;),</span>
<a href="#l18.407"></a><span id="l18.407" class="difflineplus">+          &quot;toolbarbutton&quot;,</span>
<a href="#l18.408"></a><span id="l18.408" class="difflineplus">+          &quot;subviewbutton subviewbutton-iconic&quot;,</span>
<a href="#l18.409"></a><span id="l18.409" class="difflineplus">+          &quot;subviewbutton subviewbutton-iconic&quot;);</span>
<a href="#l18.410"></a><span id="l18.410" class="difflineplus">+        break;</span>
<a href="#l18.411"></a><span id="l18.411" class="difflineplus">+      case &quot;appMenu-preferencesView&quot;:</span>
<a href="#l18.412"></a><span id="l18.412" class="difflineplus">+        onViewToolbarsPopupShowing(event,</span>
<a href="#l18.413"></a><span id="l18.413" class="difflineplus">+          &quot;mail-toolbox&quot;,</span>
<a href="#l18.414"></a><span id="l18.414" class="difflineplus">+          document.getElementById(&quot;appmenu_quickFilterBar&quot;),</span>
<a href="#l18.415"></a><span id="l18.415" class="difflineplus">+          &quot;toolbarbutton&quot;,</span>
<a href="#l18.416"></a><span id="l18.416" class="difflineplus">+          &quot;subviewbutton subviewbutton-iconic&quot;);</span>
<a href="#l18.417"></a><span id="l18.417" class="difflineplus">+        break;</span>
<a href="#l18.418"></a><span id="l18.418" class="difflineplus">+      case &quot;appMenu-preferencesLayoutView&quot;:</span>
<a href="#l18.419"></a><span id="l18.419" class="difflineplus">+        PanelUI._onPreferencesLayoutViewShow(event);</span>
<a href="#l18.420"></a><span id="l18.420" class="difflineplus">+        break;</span>
<a href="#l18.421"></a><span id="l18.421" class="difflineplus">+      // View</span>
<a href="#l18.422"></a><span id="l18.422" class="difflineplus">+      case &quot;appMenu-viewSortByView&quot;:</span>
<a href="#l18.423"></a><span id="l18.423" class="difflineplus">+        InitAppViewSortByMenu();</span>
<a href="#l18.424"></a><span id="l18.424" class="difflineplus">+        break;</span>
<a href="#l18.425"></a><span id="l18.425" class="difflineplus">+      case &quot;appMenu-viewMessagesView&quot;:</span>
<a href="#l18.426"></a><span id="l18.426" class="difflineplus">+        RefreshViewPopup(event.target);</span>
<a href="#l18.427"></a><span id="l18.427" class="difflineplus">+        break;</span>
<a href="#l18.428"></a><span id="l18.428" class="difflineplus">+      case &quot;appMenu-viewMessagesTagsView&quot;:</span>
<a href="#l18.429"></a><span id="l18.429" class="difflineplus">+        PanelUI._refreshDynamicView(event, RefreshTagsPopup);</span>
<a href="#l18.430"></a><span id="l18.430" class="difflineplus">+        break;</span>
<a href="#l18.431"></a><span id="l18.431" class="difflineplus">+      case &quot;appMenu-viewMessagesCustomViewsView&quot;:</span>
<a href="#l18.432"></a><span id="l18.432" class="difflineplus">+        PanelUI._refreshDynamicView(event, RefreshCustomViewsPopup);</span>
<a href="#l18.433"></a><span id="l18.433" class="difflineplus">+        break;</span>
<a href="#l18.434"></a><span id="l18.434" class="difflineplus">+      case &quot;appMenu-viewThreadsView&quot;:</span>
<a href="#l18.435"></a><span id="l18.435" class="difflineplus">+        InitAppmenuViewMessagesMenu();</span>
<a href="#l18.436"></a><span id="l18.436" class="difflineplus">+        break;</span>
<a href="#l18.437"></a><span id="l18.437" class="difflineplus">+      case &quot;appMenu-viewHeadersView&quot;:</span>
<a href="#l18.438"></a><span id="l18.438" class="difflineplus">+        InitViewHeadersMenu();</span>
<a href="#l18.439"></a><span id="l18.439" class="difflineplus">+        break;</span>
<a href="#l18.440"></a><span id="l18.440" class="difflineplus">+      case &quot;appMenu-viewMessageBodyAsView&quot;:</span>
<a href="#l18.441"></a><span id="l18.441" class="difflineplus">+        InitAppmenuViewBodyMenu();</span>
<a href="#l18.442"></a><span id="l18.442" class="difflineplus">+        break;</span>
<a href="#l18.443"></a><span id="l18.443" class="difflineplus">+      case &quot;appMenu-viewFeedsView&quot;:</span>
<a href="#l18.444"></a><span id="l18.444" class="difflineplus">+        InitAppmenuViewBodyMenu();</span>
<a href="#l18.445"></a><span id="l18.445" class="difflineplus">+        break;</span>
<a href="#l18.446"></a><span id="l18.446" class="difflineplus">+      case &quot;appMenu-viewZoomView&quot;:</span>
<a href="#l18.447"></a><span id="l18.447" class="difflineplus">+        UpdateFullZoomMenu();</span>
<a href="#l18.448"></a><span id="l18.448" class="difflineplus">+        break;</span>
<a href="#l18.449"></a><span id="l18.449" class="difflineplus">+      case &quot;appMenu-viewTextEncodingView&quot;:</span>
<a href="#l18.450"></a><span id="l18.450" class="difflineplus">+        this._onTextEncodingViewShow(event);</span>
<a href="#l18.451"></a><span id="l18.451" class="difflineplus">+        break;</span>
<a href="#l18.452"></a><span id="l18.452" class="difflineplus">+      case &quot;appMenu-viewTextEncodingDetectorsView&quot;:</span>
<a href="#l18.453"></a><span id="l18.453" class="difflineplus">+        this._onTextEncodingDetectorsViewShow(event);</span>
<a href="#l18.454"></a><span id="l18.454" class="difflineplus">+        break;</span>
<a href="#l18.455"></a><span id="l18.455" class="difflineplus">+      // Go</span>
<a href="#l18.456"></a><span id="l18.456" class="difflineplus">+      case &quot;appMenu-goRecentlyClosedTabsView&quot;:</span>
<a href="#l18.457"></a><span id="l18.457" class="difflineplus">+        PanelUI._refreshDynamicView(event, InitRecentlyClosedTabsPopup);</span>
<a href="#l18.458"></a><span id="l18.458" class="difflineplus">+        break;</span>
<a href="#l18.459"></a><span id="l18.459" class="difflineplus">+      // Message</span>
<a href="#l18.460"></a><span id="l18.460" class="difflineplus">+      case &quot;appMenu-messageView&quot;:</span>
<a href="#l18.461"></a><span id="l18.461" class="difflineplus">+        InitAppMessageMenu();</span>
<a href="#l18.462"></a><span id="l18.462" class="difflineplus">+        break;</span>
<a href="#l18.463"></a><span id="l18.463" class="difflineplus">+      case &quot;appMenu-messageTagView&quot;:</span>
<a href="#l18.464"></a><span id="l18.464" class="difflineplus">+        PanelUI._refreshDynamicView(event, InitMessageTags);</span>
<a href="#l18.465"></a><span id="l18.465" class="difflineplus">+        break;</span>
<a href="#l18.466"></a><span id="l18.466" class="difflineplus">+    }</span>
<a href="#l18.467"></a><span id="l18.467" class="difflineplus">+  },</span>
<a href="#l18.468"></a><span id="l18.468" class="difflineplus">+</span>
<a href="#l18.469"></a><span id="l18.469" class="difflineplus">+  /**</span>
<a href="#l18.470"></a><span id="l18.470" class="difflineplus">+   * Refreshes some views that are dynamically populated. Typically called by</span>
<a href="#l18.471"></a><span id="l18.471" class="difflineplus">+   * event listeners responding to a ViewShowing event. It calls a given refresh</span>
<a href="#l18.472"></a><span id="l18.472" class="difflineplus">+   * function (that populates the view), passing appmenu-specific arguments.</span>
<a href="#l18.473"></a><span id="l18.473" class="difflineplus">+   *</span>
<a href="#l18.474"></a><span id="l18.474" class="difflineplus">+   * @param {ViewShowingEvent} event    ViewShowing event.</span>
<a href="#l18.475"></a><span id="l18.475" class="difflineplus">+   * @param {Function} refreshFunction  Function that refreshes a particular view.</span>
<a href="#l18.476"></a><span id="l18.476" class="difflineplus">+   */</span>
<a href="#l18.477"></a><span id="l18.477" class="difflineplus">+  _refreshDynamicView(event, refreshFunction) {</span>
<a href="#l18.478"></a><span id="l18.478" class="difflineplus">+    refreshFunction(event.target.querySelector(&quot;.panel-subview-body&quot;),</span>
<a href="#l18.479"></a><span id="l18.479" class="difflineplus">+      &quot;toolbarbutton&quot;,</span>
<a href="#l18.480"></a><span id="l18.480" class="difflineplus">+      &quot;subviewbutton subviewbutton-iconic&quot;,</span>
<a href="#l18.481"></a><span id="l18.481" class="difflineplus">+      &quot;toolbarseparator&quot;);</span>
<a href="#l18.482"></a><span id="l18.482" class="difflineplus">+  },</span>
<a href="#l18.483"></a><span id="l18.483" class="difflineplus">+</span>
<a href="#l18.484"></a><span id="l18.484">   get isReady() {</span>
<a href="#l18.485"></a><span id="l18.485">     return !!this._isReady;</span>
<a href="#l18.486"></a><span id="l18.486">   },</span>
<a href="#l18.487"></a><span id="l18.487"> </span>
<a href="#l18.488"></a><span id="l18.488">   get isNotificationPanelOpen() {</span>
<a href="#l18.489"></a><span id="l18.489">     let panelState = this.notificationPanel.state;</span>
<a href="#l18.490"></a><span id="l18.490"> </span>
<a href="#l18.491"></a><span id="l18.491">     return panelState == &quot;showing&quot; || panelState == &quot;open&quot;;</span>
<a href="#l18.492"></a><span id="l18.492" class="difflineat">@@ -317,25 +513,16 @@ const PanelUI = {</span>
<a href="#l18.493"></a><span id="l18.493"> </span>
<a href="#l18.494"></a><span id="l18.494">     await window.delayedStartupPromise;</span>
<a href="#l18.495"></a><span id="l18.495">     this._ensureEventListenersAdded();</span>
<a href="#l18.496"></a><span id="l18.496">     this.panel.hidden = false;</span>
<a href="#l18.497"></a><span id="l18.497">     this._isReady = true;</span>
<a href="#l18.498"></a><span id="l18.498">   },</span>
<a href="#l18.499"></a><span id="l18.499"> </span>
<a href="#l18.500"></a><span id="l18.500">   /**</span>
<a href="#l18.501"></a><span id="l18.501" class="difflineminus">-   * Switch the panel to the help view if it's not already</span>
<a href="#l18.502"></a><span id="l18.502" class="difflineminus">-   * in that view.</span>
<a href="#l18.503"></a><span id="l18.503" class="difflineminus">-   */</span>
<a href="#l18.504"></a><span id="l18.504" class="difflineminus">-  showHelpView(aAnchor) {</span>
<a href="#l18.505"></a><span id="l18.505" class="difflineminus">-    this._ensureEventListenersAdded();</span>
<a href="#l18.506"></a><span id="l18.506" class="difflineminus">-    this.multiView.showSubView(&quot;PanelUI-helpView&quot;, aAnchor);</span>
<a href="#l18.507"></a><span id="l18.507" class="difflineminus">-  },</span>
<a href="#l18.508"></a><span id="l18.508" class="difflineminus">-</span>
<a href="#l18.509"></a><span id="l18.509" class="difflineminus">-  /**</span>
<a href="#l18.510"></a><span id="l18.510">    * Shows a subview in the panel with a given ID.</span>
<a href="#l18.511"></a><span id="l18.511">    *</span>
<a href="#l18.512"></a><span id="l18.512">    * @param aViewId the ID of the subview to show.</span>
<a href="#l18.513"></a><span id="l18.513">    * @param aAnchor the element that spawned the subview.</span>
<a href="#l18.514"></a><span id="l18.514">    * @param aEvent the event triggering the view showing.</span>
<a href="#l18.515"></a><span id="l18.515">    */</span>
<a href="#l18.516"></a><span id="l18.516">   async showSubView(aViewId, aAnchor, aEvent) {</span>
<a href="#l18.517"></a><span id="l18.517">     let domEvent = null;</span>
<a href="#l18.518"></a><span id="l18.518" class="difflineat">@@ -364,18 +551,16 @@ const PanelUI = {</span>
<a href="#l18.519"></a><span id="l18.519">       return;</span>
<a href="#l18.520"></a><span id="l18.520">     }</span>
<a href="#l18.521"></a><span id="l18.521"> </span>
<a href="#l18.522"></a><span id="l18.522">     if (!aAnchor) {</span>
<a href="#l18.523"></a><span id="l18.523">       Cu.reportError(&quot;Expected an anchor when opening subview with id: &quot; + aViewId);</span>
<a href="#l18.524"></a><span id="l18.524">       return;</span>
<a href="#l18.525"></a><span id="l18.525">     }</span>
<a href="#l18.526"></a><span id="l18.526"> </span>
<a href="#l18.527"></a><span id="l18.527" class="difflineminus">-    this.ensureLibraryInitialized(viewNode);</span>
<a href="#l18.528"></a><span id="l18.528" class="difflineminus">-</span>
<a href="#l18.529"></a><span id="l18.529">     let container = aAnchor.closest(&quot;panelmultiview&quot;);</span>
<a href="#l18.530"></a><span id="l18.530">     if (container) {</span>
<a href="#l18.531"></a><span id="l18.531">       container.showSubView(aViewId, aAnchor);</span>
<a href="#l18.532"></a><span id="l18.532">     } else if (!aAnchor.open) {</span>
<a href="#l18.533"></a><span id="l18.533">       aAnchor.open = true;</span>
<a href="#l18.534"></a><span id="l18.534"> </span>
<a href="#l18.535"></a><span id="l18.535">       let tempPanel = document.createXULElement(&quot;panel&quot;);</span>
<a href="#l18.536"></a><span id="l18.536">       tempPanel.setAttribute(&quot;type&quot;, &quot;arrow&quot;);</span>
<a href="#l18.537"></a><span id="l18.537" class="difflineat">@@ -438,145 +623,16 @@ const PanelUI = {</span>
<a href="#l18.538"></a><span id="l18.538">         tempPanel.addEventListener(&quot;popuphidden&quot;, panelRemover);</span>
<a href="#l18.539"></a><span id="l18.539">       } else {</span>
<a href="#l18.540"></a><span id="l18.540">         panelRemover();</span>
<a href="#l18.541"></a><span id="l18.541">       }</span>
<a href="#l18.542"></a><span id="l18.542">     }</span>
<a href="#l18.543"></a><span id="l18.543">   },</span>
<a href="#l18.544"></a><span id="l18.544"> </span>
<a href="#l18.545"></a><span id="l18.545">   /**</span>
<a href="#l18.546"></a><span id="l18.546" class="difflineminus">-   * Sets up the event listener for when the Library view is shown.</span>
<a href="#l18.547"></a><span id="l18.547" class="difflineminus">-   *</span>
<a href="#l18.548"></a><span id="l18.548" class="difflineminus">-   * @param {panelview} viewNode The library view.</span>
<a href="#l18.549"></a><span id="l18.549" class="difflineminus">-   */</span>
<a href="#l18.550"></a><span id="l18.550" class="difflineminus">-  ensureLibraryInitialized(viewNode) {</span>
<a href="#l18.551"></a><span id="l18.551" class="difflineminus">-    if (viewNode != this.libraryView || viewNode._initialized)</span>
<a href="#l18.552"></a><span id="l18.552" class="difflineminus">-      return;</span>
<a href="#l18.553"></a><span id="l18.553" class="difflineminus">-</span>
<a href="#l18.554"></a><span id="l18.554" class="difflineminus">-    viewNode._initialized = true;</span>
<a href="#l18.555"></a><span id="l18.555" class="difflineminus">-    viewNode.addEventListener(&quot;ViewShowing&quot;, this);</span>
<a href="#l18.556"></a><span id="l18.556" class="difflineminus">-  },</span>
<a href="#l18.557"></a><span id="l18.557" class="difflineminus">-</span>
<a href="#l18.558"></a><span id="l18.558" class="difflineminus">-  /**</span>
<a href="#l18.559"></a><span id="l18.559" class="difflineminus">-   * When the Library view is showing, we can start fetching and populating the</span>
<a href="#l18.560"></a><span id="l18.560" class="difflineminus">-   * list of Recent Highlights.</span>
<a href="#l18.561"></a><span id="l18.561" class="difflineminus">-   * This is done asynchronously and may finish when the view is already visible.</span>
<a href="#l18.562"></a><span id="l18.562" class="difflineminus">-   *</span>
<a href="#l18.563"></a><span id="l18.563" class="difflineminus">-   * @param {panelview} viewNode The library view.</span>
<a href="#l18.564"></a><span id="l18.564" class="difflineminus">-   */</span>
<a href="#l18.565"></a><span id="l18.565" class="difflineminus">-  async onLibraryViewShowing(viewNode) {</span>
<a href="#l18.566"></a><span id="l18.566" class="difflineminus">-    // Since the library is the first view shown, we don't want to add a blocker</span>
<a href="#l18.567"></a><span id="l18.567" class="difflineminus">-    // to the event, which would make PanelMultiView wait to show it. Instead,</span>
<a href="#l18.568"></a><span id="l18.568" class="difflineminus">-    // we keep the space currently reserved for the items, but we hide them.</span>
<a href="#l18.569"></a><span id="l18.569" class="difflineminus">-    if (this._loadingRecentHighlights || !this.libraryRecentHighlightsEnabled) {</span>
<a href="#l18.570"></a><span id="l18.570" class="difflineminus">-      return;</span>
<a href="#l18.571"></a><span id="l18.571" class="difflineminus">-    }</span>
<a href="#l18.572"></a><span id="l18.572" class="difflineminus">-</span>
<a href="#l18.573"></a><span id="l18.573" class="difflineminus">-    // Make the elements invisible synchronously, before the view is shown.</span>
<a href="#l18.574"></a><span id="l18.574" class="difflineminus">-    this.makeLibraryRecentHighlightsInvisible();</span>
<a href="#l18.575"></a><span id="l18.575" class="difflineminus">-</span>
<a href="#l18.576"></a><span id="l18.576" class="difflineminus">-    // Perform the rest asynchronously while protecting from re-entrancy.</span>
<a href="#l18.577"></a><span id="l18.577" class="difflineminus">-    this._loadingRecentHighlights = true;</span>
<a href="#l18.578"></a><span id="l18.578" class="difflineminus">-    try {</span>
<a href="#l18.579"></a><span id="l18.579" class="difflineminus">-      await this.fetchAndPopulateLibraryRecentHighlights();</span>
<a href="#l18.580"></a><span id="l18.580" class="difflineminus">-    } finally {</span>
<a href="#l18.581"></a><span id="l18.581" class="difflineminus">-      this._loadingRecentHighlights = false;</span>
<a href="#l18.582"></a><span id="l18.582" class="difflineminus">-    }</span>
<a href="#l18.583"></a><span id="l18.583" class="difflineminus">-  },</span>
<a href="#l18.584"></a><span id="l18.584" class="difflineminus">-</span>
<a href="#l18.585"></a><span id="l18.585" class="difflineminus">-  /**</span>
<a href="#l18.586"></a><span id="l18.586" class="difflineminus">-   * Fetches the list of Recent Highlights and replaces the items in the Library</span>
<a href="#l18.587"></a><span id="l18.587" class="difflineminus">-   * view with the results.</span>
<a href="#l18.588"></a><span id="l18.588" class="difflineminus">-   */</span>
<a href="#l18.589"></a><span id="l18.589" class="difflineminus">-  async fetchAndPopulateLibraryRecentHighlights() {</span>
<a href="#l18.590"></a><span id="l18.590" class="difflineminus">-    let highlights = await NewTabUtils.activityStreamLinks.getHighlights({</span>
<a href="#l18.591"></a><span id="l18.591" class="difflineminus">-      // As per bug 1402023, hard-coded limit, until Activity Stream develops a</span>
<a href="#l18.592"></a><span id="l18.592" class="difflineminus">-      // richer list.</span>
<a href="#l18.593"></a><span id="l18.593" class="difflineminus">-      numItems: 6,</span>
<a href="#l18.594"></a><span id="l18.594" class="difflineminus">-      withFavicons: true,</span>
<a href="#l18.595"></a><span id="l18.595" class="difflineminus">-      excludePocket: true,</span>
<a href="#l18.596"></a><span id="l18.596" class="difflineminus">-    }).catch(ex =&gt; {</span>
<a href="#l18.597"></a><span id="l18.597" class="difflineminus">-      // Just hide the section if we can't retrieve the items from the database.</span>
<a href="#l18.598"></a><span id="l18.598" class="difflineminus">-      Cu.reportError(ex);</span>
<a href="#l18.599"></a><span id="l18.599" class="difflineminus">-      return [];</span>
<a href="#l18.600"></a><span id="l18.600" class="difflineminus">-    });</span>
<a href="#l18.601"></a><span id="l18.601" class="difflineminus">-</span>
<a href="#l18.602"></a><span id="l18.602" class="difflineminus">-    // Since the call above is asynchronous, the panel may be already hidden</span>
<a href="#l18.603"></a><span id="l18.603" class="difflineminus">-    // at this point, but we still prepare the items for the next time the</span>
<a href="#l18.604"></a><span id="l18.604" class="difflineminus">-    // panel is shown, so their space is reserved. The part of this function</span>
<a href="#l18.605"></a><span id="l18.605" class="difflineminus">-    // that adds the elements is the least expensive anyways.</span>
<a href="#l18.606"></a><span id="l18.606" class="difflineminus">-    this.clearLibraryRecentHighlights();</span>
<a href="#l18.607"></a><span id="l18.607" class="difflineminus">-    if (!highlights.length) {</span>
<a href="#l18.608"></a><span id="l18.608" class="difflineminus">-      return;</span>
<a href="#l18.609"></a><span id="l18.609" class="difflineminus">-    }</span>
<a href="#l18.610"></a><span id="l18.610" class="difflineminus">-</span>
<a href="#l18.611"></a><span id="l18.611" class="difflineminus">-    let container = this.libraryRecentHighlights;</span>
<a href="#l18.612"></a><span id="l18.612" class="difflineminus">-    container.hidden = container.previousElementSibling.hidden =</span>
<a href="#l18.613"></a><span id="l18.613" class="difflineminus">-      container.previousElementSibling.previousElementSibling.hidden = false;</span>
<a href="#l18.614"></a><span id="l18.614" class="difflineminus">-    let fragment = document.createDocumentFragment();</span>
<a href="#l18.615"></a><span id="l18.615" class="difflineminus">-    for (let highlight of highlights) {</span>
<a href="#l18.616"></a><span id="l18.616" class="difflineminus">-      let button = document.createXULElement(&quot;toolbarbutton&quot;);</span>
<a href="#l18.617"></a><span id="l18.617" class="difflineminus">-      button.classList.add(&quot;subviewbutton&quot;, &quot;highlight&quot;, &quot;subviewbutton-iconic&quot;, &quot;bookmark-item&quot;);</span>
<a href="#l18.618"></a><span id="l18.618" class="difflineminus">-      let title = highlight.title || highlight.url;</span>
<a href="#l18.619"></a><span id="l18.619" class="difflineminus">-      button.setAttribute(&quot;label&quot;, title);</span>
<a href="#l18.620"></a><span id="l18.620" class="difflineminus">-      button.setAttribute(&quot;tooltiptext&quot;, title);</span>
<a href="#l18.621"></a><span id="l18.621" class="difflineminus">-      button.setAttribute(&quot;type&quot;, &quot;highlight-&quot; + highlight.type);</span>
<a href="#l18.622"></a><span id="l18.622" class="difflineminus">-      button.setAttribute(&quot;onclick&quot;, &quot;PanelUI.onLibraryHighlightClick(event)&quot;);</span>
<a href="#l18.623"></a><span id="l18.623" class="difflineminus">-      if (highlight.favicon) {</span>
<a href="#l18.624"></a><span id="l18.624" class="difflineminus">-        button.setAttribute(&quot;image&quot;, highlight.favicon);</span>
<a href="#l18.625"></a><span id="l18.625" class="difflineminus">-      }</span>
<a href="#l18.626"></a><span id="l18.626" class="difflineminus">-      button._highlight = highlight;</span>
<a href="#l18.627"></a><span id="l18.627" class="difflineminus">-      fragment.appendChild(button);</span>
<a href="#l18.628"></a><span id="l18.628" class="difflineminus">-    }</span>
<a href="#l18.629"></a><span id="l18.629" class="difflineminus">-    container.appendChild(fragment);</span>
<a href="#l18.630"></a><span id="l18.630" class="difflineminus">-  },</span>
<a href="#l18.631"></a><span id="l18.631" class="difflineminus">-</span>
<a href="#l18.632"></a><span id="l18.632" class="difflineminus">-  /**</span>
<a href="#l18.633"></a><span id="l18.633" class="difflineminus">-   * Make all nodes from the 'Recent Highlights' section invisible while we</span>
<a href="#l18.634"></a><span id="l18.634" class="difflineminus">-   * refresh its contents. This is done while the Library view is opening to</span>
<a href="#l18.635"></a><span id="l18.635" class="difflineminus">-   * avoid showing potentially stale items, but still keep the space reserved.</span>
<a href="#l18.636"></a><span id="l18.636" class="difflineminus">-   */</span>
<a href="#l18.637"></a><span id="l18.637" class="difflineminus">-  makeLibraryRecentHighlightsInvisible() {</span>
<a href="#l18.638"></a><span id="l18.638" class="difflineminus">-    for (let button of this.libraryRecentHighlights.children) {</span>
<a href="#l18.639"></a><span id="l18.639" class="difflineminus">-      button.style.visibility = &quot;hidden&quot;;</span>
<a href="#l18.640"></a><span id="l18.640" class="difflineminus">-    }</span>
<a href="#l18.641"></a><span id="l18.641" class="difflineminus">-  },</span>
<a href="#l18.642"></a><span id="l18.642" class="difflineminus">-</span>
<a href="#l18.643"></a><span id="l18.643" class="difflineminus">-  /**</span>
<a href="#l18.644"></a><span id="l18.644" class="difflineminus">-   * Remove all the nodes from the 'Recent Highlights' section and hide it as well.</span>
<a href="#l18.645"></a><span id="l18.645" class="difflineminus">-   */</span>
<a href="#l18.646"></a><span id="l18.646" class="difflineminus">-  clearLibraryRecentHighlights() {</span>
<a href="#l18.647"></a><span id="l18.647" class="difflineminus">-    let container = this.libraryRecentHighlights;</span>
<a href="#l18.648"></a><span id="l18.648" class="difflineminus">-    while (container.firstChild) {</span>
<a href="#l18.649"></a><span id="l18.649" class="difflineminus">-      container.firstChild.remove();</span>
<a href="#l18.650"></a><span id="l18.650" class="difflineminus">-    }</span>
<a href="#l18.651"></a><span id="l18.651" class="difflineminus">-    container.hidden = container.previousElementSibling.hidden =</span>
<a href="#l18.652"></a><span id="l18.652" class="difflineminus">-      container.previousElementSibling.previousElementSibling.hidden = true;</span>
<a href="#l18.653"></a><span id="l18.653" class="difflineminus">-  },</span>
<a href="#l18.654"></a><span id="l18.654" class="difflineminus">-</span>
<a href="#l18.655"></a><span id="l18.655" class="difflineminus">-  /**</span>
<a href="#l18.656"></a><span id="l18.656" class="difflineminus">-   * Event handler; invoked when an item of the Recent Highlights is clicked.</span>
<a href="#l18.657"></a><span id="l18.657" class="difflineminus">-   *</span>
<a href="#l18.658"></a><span id="l18.658" class="difflineminus">-   * @param {MouseEvent} event Click event, originating from the Highlight.</span>
<a href="#l18.659"></a><span id="l18.659" class="difflineminus">-   */</span>
<a href="#l18.660"></a><span id="l18.660" class="difflineminus">-  onLibraryHighlightClick(event) {</span>
<a href="#l18.661"></a><span id="l18.661" class="difflineminus">-    let button = event.target;</span>
<a href="#l18.662"></a><span id="l18.662" class="difflineminus">-    if (event.button &gt; 1 || !button._highlight) {</span>
<a href="#l18.663"></a><span id="l18.663" class="difflineminus">-      return;</span>
<a href="#l18.664"></a><span id="l18.664" class="difflineminus">-    }</span>
<a href="#l18.665"></a><span id="l18.665" class="difflineminus">-    if (event.button == 1) {</span>
<a href="#l18.666"></a><span id="l18.666" class="difflineminus">-      // Bug 1402849, close library panel on mid mouse click</span>
<a href="#l18.667"></a><span id="l18.667" class="difflineminus">-      CustomizableUI.hidePanelForNode(button);</span>
<a href="#l18.668"></a><span id="l18.668" class="difflineminus">-    }</span>
<a href="#l18.669"></a><span id="l18.669" class="difflineminus">-    window.openUILink(button._highlight.url, event, {</span>
<a href="#l18.670"></a><span id="l18.670" class="difflineminus">-      triggeringPrincipal: Services.scriptSecurityManager.createNullPrincipal({}),</span>
<a href="#l18.671"></a><span id="l18.671" class="difflineminus">-    });</span>
<a href="#l18.672"></a><span id="l18.672" class="difflineminus">-  },</span>
<a href="#l18.673"></a><span id="l18.673" class="difflineminus">-</span>
<a href="#l18.674"></a><span id="l18.674" class="difflineminus">-  /**</span>
<a href="#l18.675"></a><span id="l18.675">    * NB: The enable- and disableSingleSubviewPanelAnimations methods only</span>
<a href="#l18.676"></a><span id="l18.676">    * affect the hiding/showing animations of single-subview panels (tempPanel</span>
<a href="#l18.677"></a><span id="l18.677">    * in the showSubView method).</span>
<a href="#l18.678"></a><span id="l18.678">    */</span>
<a href="#l18.679"></a><span id="l18.679">   disableSingleSubviewPanelAnimations() {</span>
<a href="#l18.680"></a><span id="l18.680">     this._disableAnimations = true;</span>
<a href="#l18.681"></a><span id="l18.681">   },</span>
<a href="#l18.682"></a><span id="l18.682"> </span>
<a href="#l18.683"></a><span id="l18.683" class="difflineat">@@ -612,46 +668,343 @@ const PanelUI = {</span>
<a href="#l18.684"></a><span id="l18.684">    * Sets the anchor node into the open or closed state, depending</span>
<a href="#l18.685"></a><span id="l18.685">    * on the state of the panel.</span>
<a href="#l18.686"></a><span id="l18.686">    */</span>
<a href="#l18.687"></a><span id="l18.687">   _updatePanelButton() {</span>
<a href="#l18.688"></a><span id="l18.688">     this.menuButton.open = this.panel.state == &quot;open&quot; ||</span>
<a href="#l18.689"></a><span id="l18.689">                            this.panel.state == &quot;showing&quot;;</span>
<a href="#l18.690"></a><span id="l18.690">   },</span>
<a href="#l18.691"></a><span id="l18.691"> </span>
<a href="#l18.692"></a><span id="l18.692" class="difflineminus">-  _onHelpViewShow(aEvent) {</span>
<a href="#l18.693"></a><span id="l18.693" class="difflineminus">-    // Call global menu setup function</span>
<a href="#l18.694"></a><span id="l18.694" class="difflineminus">-    buildHelpMenu();</span>
<a href="#l18.695"></a><span id="l18.695" class="difflineplus">+  /**</span>
<a href="#l18.696"></a><span id="l18.696" class="difflineplus">+   * Event handler for showing the Preferences/Layout view. Removes &quot;checked&quot;</span>
<a href="#l18.697"></a><span id="l18.697" class="difflineplus">+   * from all layout menu items and then checks the current layout menu item.</span>
<a href="#l18.698"></a><span id="l18.698" class="difflineplus">+   *</span>
<a href="#l18.699"></a><span id="l18.699" class="difflineplus">+   * @param {ViewShowingEvent} event  ViewShowing event.</span>
<a href="#l18.700"></a><span id="l18.700" class="difflineplus">+   */</span>
<a href="#l18.701"></a><span id="l18.701" class="difflineplus">+  _onPreferencesLayoutViewShow(event) {</span>
<a href="#l18.702"></a><span id="l18.702" class="difflineplus">+    event.target.querySelectorAll(&quot;[name='viewlayoutgroup']&quot;)</span>
<a href="#l18.703"></a><span id="l18.703" class="difflineplus">+      .forEach(item =&gt; item.removeAttribute(&quot;checked&quot;));</span>
<a href="#l18.704"></a><span id="l18.704" class="difflineplus">+</span>
<a href="#l18.705"></a><span id="l18.705" class="difflineplus">+    InitViewLayoutStyleMenu(event, true);</span>
<a href="#l18.706"></a><span id="l18.706" class="difflineplus">+  },</span>
<a href="#l18.707"></a><span id="l18.707" class="difflineplus">+</span>
<a href="#l18.708"></a><span id="l18.708" class="difflineplus">+  /**</span>
<a href="#l18.709"></a><span id="l18.709" class="difflineplus">+   * Refreshes and populates the attachments view when it is shown, adding attachment items, etc.</span>
<a href="#l18.710"></a><span id="l18.710" class="difflineplus">+   * See similar function FillAttachmentListPopup.</span>
<a href="#l18.711"></a><span id="l18.711" class="difflineplus">+   *</span>
<a href="#l18.712"></a><span id="l18.712" class="difflineplus">+   * @param {ViewShowingEvent} event  The &quot;ViewShowing&quot; event.</span>
<a href="#l18.713"></a><span id="l18.713" class="difflineplus">+   */</span>
<a href="#l18.714"></a><span id="l18.714" class="difflineplus">+  _onAttachmentsViewShow(event) {</span>
<a href="#l18.715"></a><span id="l18.715" class="difflineplus">+    const viewBody = event.target.querySelector(&quot;.panel-subview-body&quot;);</span>
<a href="#l18.716"></a><span id="l18.716" class="difflineplus">+</span>
<a href="#l18.717"></a><span id="l18.717" class="difflineplus">+    // First clear out the old attachment items. They are above the separator.</span>
<a href="#l18.718"></a><span id="l18.718" class="difflineplus">+    while (viewBody.firstChild.localName == &quot;toolbarbutton&quot;) {</span>
<a href="#l18.719"></a><span id="l18.719" class="difflineplus">+      viewBody.firstChild.remove();</span>
<a href="#l18.720"></a><span id="l18.720" class="difflineplus">+    }</span>
<a href="#l18.721"></a><span id="l18.721" class="difflineplus">+</span>
<a href="#l18.722"></a><span id="l18.722" class="difflineplus">+    for (const [attachmentIndex, attachment] of currentAttachments.entries()) {</span>
<a href="#l18.723"></a><span id="l18.723" class="difflineplus">+      PanelUI._addAttachmentToAttachmentsView(viewBody, attachment, attachmentIndex + 1);</span>
<a href="#l18.724"></a><span id="l18.724" class="difflineplus">+    }</span>
<a href="#l18.725"></a><span id="l18.725" class="difflineplus">+</span>
<a href="#l18.726"></a><span id="l18.726" class="difflineplus">+    goUpdateAttachmentCommands();</span>
<a href="#l18.727"></a><span id="l18.727" class="difflineplus">+  },</span>
<a href="#l18.728"></a><span id="l18.728" class="difflineplus">+</span>
<a href="#l18.729"></a><span id="l18.729" class="difflineplus">+  /**</span>
<a href="#l18.730"></a><span id="l18.730" class="difflineplus">+   * Add an attachment button to the attachments view panel.</span>
<a href="#l18.731"></a><span id="l18.731" class="difflineplus">+   * See the similar function addAttachmentToPopup.</span>
<a href="#l18.732"></a><span id="l18.732" class="difflineplus">+   *</span>
<a href="#l18.733"></a><span id="l18.733" class="difflineplus">+   * @param {Element} viewBody         Parent element that will receive the attachment button.</span>
<a href="#l18.734"></a><span id="l18.734" class="difflineplus">+   * @param {Object} attachment        Attachment data.</span>
<a href="#l18.735"></a><span id="l18.735" class="difflineplus">+   * @param {Number} attachmentIndex   1-based index of the attachment.</span>
<a href="#l18.736"></a><span id="l18.736" class="difflineplus">+   */</span>
<a href="#l18.737"></a><span id="l18.737" class="difflineplus">+  _addAttachmentToAttachmentsView(viewBody, attachment, attachmentIndex) {</span>
<a href="#l18.738"></a><span id="l18.738" class="difflineplus">+    if (!viewBody) {</span>
<a href="#l18.739"></a><span id="l18.739" class="difflineplus">+      return;</span>
<a href="#l18.740"></a><span id="l18.740" class="difflineplus">+    }</span>
<a href="#l18.741"></a><span id="l18.741" class="difflineplus">+</span>
<a href="#l18.742"></a><span id="l18.742" class="difflineplus">+    const item = document.createXULElement(&quot;toolbarbutton&quot;);</span>
<a href="#l18.743"></a><span id="l18.743" class="difflineplus">+    if (!item) {</span>
<a href="#l18.744"></a><span id="l18.744" class="difflineplus">+      return;</span>
<a href="#l18.745"></a><span id="l18.745" class="difflineplus">+    }</span>
<a href="#l18.746"></a><span id="l18.746" class="difflineplus">+</span>
<a href="#l18.747"></a><span id="l18.747" class="difflineplus">+    // Insert the item just before the separator.</span>
<a href="#l18.748"></a><span id="l18.748" class="difflineplus">+    item.setAttribute(&quot;class&quot;, &quot;subviewbutton subviewbutton-iconic subviewbutton-nav&quot;);</span>
<a href="#l18.749"></a><span id="l18.749" class="difflineplus">+    item.setAttribute(&quot;image&quot;, getIconForAttachment(attachment));</span>
<a href="#l18.750"></a><span id="l18.750" class="difflineplus">+    item.setAttribute(&quot;closemenu&quot;, &quot;none&quot;);</span>
<a href="#l18.751"></a><span id="l18.751" class="difflineplus">+</span>
<a href="#l18.752"></a><span id="l18.752" class="difflineplus">+    // Find the separator index.</span>
<a href="#l18.753"></a><span id="l18.753" class="difflineplus">+    let separatorIndex = 0;</span>
<a href="#l18.754"></a><span id="l18.754" class="difflineplus">+    while (viewBody.childNodes[separatorIndex].localName != &quot;toolbarseparator&quot;) {</span>
<a href="#l18.755"></a><span id="l18.755" class="difflineplus">+      separatorIndex += 1;</span>
<a href="#l18.756"></a><span id="l18.756" class="difflineplus">+    }</span>
<a href="#l18.757"></a><span id="l18.757"> </span>
<a href="#l18.758"></a><span id="l18.758" class="difflineminus">-    let helpMenu = document.getElementById(&quot;menu_HelpPopup&quot;);</span>
<a href="#l18.759"></a><span id="l18.759" class="difflineminus">-    let items = this.getElementsByTagName(&quot;vbox&quot;)[0];</span>
<a href="#l18.760"></a><span id="l18.760" class="difflineminus">-    let attrs = [&quot;oncommand&quot;, &quot;onclick&quot;, &quot;label&quot;, &quot;key&quot;, &quot;disabled&quot;];</span>
<a href="#l18.761"></a><span id="l18.761" class="difflineplus">+    // The accesskeys for the attachments in the menu start with 1 (not 0).</span>
<a href="#l18.762"></a><span id="l18.762" class="difflineplus">+    const displayName = SanitizeAttachmentDisplayName(attachment);</span>
<a href="#l18.763"></a><span id="l18.763" class="difflineplus">+    const label = document.getElementById(&quot;bundle_messenger&quot;)</span>
<a href="#l18.764"></a><span id="l18.764" class="difflineplus">+                          .getFormattedString(&quot;attachmentDisplayNameFormat&quot;,</span>
<a href="#l18.765"></a><span id="l18.765" class="difflineplus">+                                              [attachmentIndex, displayName]);</span>
<a href="#l18.766"></a><span id="l18.766" class="difflineplus">+    item.setAttribute(&quot;crop&quot;, &quot;center&quot;);</span>
<a href="#l18.767"></a><span id="l18.767" class="difflineplus">+    item.setAttribute(&quot;label&quot;, label);</span>
<a href="#l18.768"></a><span id="l18.768" class="difflineplus">+    item.setAttribute(&quot;accesskey&quot;, attachmentIndex % 10);</span>
<a href="#l18.769"></a><span id="l18.769" class="difflineplus">+</span>
<a href="#l18.770"></a><span id="l18.770" class="difflineplus">+    // Each attachment gets its own subview with options for opening, saving, deleting, etc.</span>
<a href="#l18.771"></a><span id="l18.771" class="difflineplus">+    item.setAttribute(&quot;oncommand&quot;, &quot;PanelUI.showSubView('appMenu-attachmentView', this)&quot;);</span>
<a href="#l18.772"></a><span id="l18.772" class="difflineplus">+</span>
<a href="#l18.773"></a><span id="l18.773" class="difflineplus">+    // Add the attachment data to the item so that when the item is clicked and the subview is</span>
<a href="#l18.774"></a><span id="l18.774" class="difflineplus">+    // shown, we can access the attachment data from the ViewShowing event's explicitOriginalTarget.</span>
<a href="#l18.775"></a><span id="l18.775" class="difflineplus">+    item.attachment = attachment;</span>
<a href="#l18.776"></a><span id="l18.776" class="difflineplus">+</span>
<a href="#l18.777"></a><span id="l18.777" class="difflineplus">+    // TODO appmenu - Test that these classes still work as intended.</span>
<a href="#l18.778"></a><span id="l18.778" class="difflineplus">+    if (attachment.isExternalAttachment) {</span>
<a href="#l18.779"></a><span id="l18.779" class="difflineplus">+      if (!attachment.hasFile) {</span>
<a href="#l18.780"></a><span id="l18.780" class="difflineplus">+        item.classList.add(&quot;notfound&quot;);</span>
<a href="#l18.781"></a><span id="l18.781" class="difflineplus">+      } else {</span>
<a href="#l18.782"></a><span id="l18.782" class="difflineplus">+        // TODO appmenu - Is this still needed?  It's from the old menupopup code.</span>
<a href="#l18.783"></a><span id="l18.783" class="difflineplus">+        //</span>
<a href="#l18.784"></a><span id="l18.784" class="difflineplus">+        // The text-link class must be added to the &lt;label&gt; and have a &lt;menu&gt; hover rule.</span>
<a href="#l18.785"></a><span id="l18.785" class="difflineplus">+        // Adding to &lt;menu&gt; makes hover overflow the underline to the popup items.</span>
<a href="#l18.786"></a><span id="l18.786" class="difflineplus">+        // const label = item.firstChild.nextSibling;</span>
<a href="#l18.787"></a><span id="l18.787" class="difflineplus">+        // label.classList.add(&quot;text-link&quot;);</span>
<a href="#l18.788"></a><span id="l18.788" class="difflineplus">+      }</span>
<a href="#l18.789"></a><span id="l18.789" class="difflineplus">+    }</span>
<a href="#l18.790"></a><span id="l18.790"> </span>
<a href="#l18.791"></a><span id="l18.791" class="difflineminus">-    // Remove all buttons from the view</span>
<a href="#l18.792"></a><span id="l18.792" class="difflineminus">-    while (items.firstChild) {</span>
<a href="#l18.793"></a><span id="l18.793" class="difflineminus">-      items.firstChild.remove();</span>
<a href="#l18.794"></a><span id="l18.794" class="difflineplus">+    if (attachment.isDeleted) {</span>
<a href="#l18.795"></a><span id="l18.795" class="difflineplus">+      item.classList.add(&quot;notfound&quot;);</span>
<a href="#l18.796"></a><span id="l18.796" class="difflineplus">+    }</span>
<a href="#l18.797"></a><span id="l18.797" class="difflineplus">+</span>
<a href="#l18.798"></a><span id="l18.798" class="difflineplus">+    if (!attachment.hasFile) {</span>
<a href="#l18.799"></a><span id="l18.799" class="difflineplus">+      item.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l18.800"></a><span id="l18.800" class="difflineplus">+    }</span>
<a href="#l18.801"></a><span id="l18.801" class="difflineplus">+</span>
<a href="#l18.802"></a><span id="l18.802" class="difflineplus">+    viewBody.insertBefore(item, viewBody.childNodes[separatorIndex]);</span>
<a href="#l18.803"></a><span id="l18.803" class="difflineplus">+  },</span>
<a href="#l18.804"></a><span id="l18.804" class="difflineplus">+</span>
<a href="#l18.805"></a><span id="l18.805" class="difflineplus">+  /**</span>
<a href="#l18.806"></a><span id="l18.806" class="difflineplus">+   * Refreshes and populates the single attachment view (open, save, etc.) when it is shown.</span>
<a href="#l18.807"></a><span id="l18.807" class="difflineplus">+   * See similar function addAttachmentToPopup.</span>
<a href="#l18.808"></a><span id="l18.808" class="difflineplus">+   *</span>
<a href="#l18.809"></a><span id="l18.809" class="difflineplus">+   * @param {ViewShowingEvent} event  The &quot;ViewShowing&quot; event.</span>
<a href="#l18.810"></a><span id="l18.810" class="difflineplus">+   */</span>
<a href="#l18.811"></a><span id="l18.811" class="difflineplus">+  _onAttachmentViewShow(event) {</span>
<a href="#l18.812"></a><span id="l18.812" class="difflineplus">+    const attachment = event.explicitOriginalTarget.attachment;</span>
<a href="#l18.813"></a><span id="l18.813" class="difflineplus">+    const bundle = document.getElementById(&quot;bundle_messenger&quot;);</span>
<a href="#l18.814"></a><span id="l18.814" class="difflineplus">+</span>
<a href="#l18.815"></a><span id="l18.815" class="difflineplus">+    const detached = attachment.isExternalAttachment;</span>
<a href="#l18.816"></a><span id="l18.816" class="difflineplus">+    const deleted  = !attachment.hasFile;</span>
<a href="#l18.817"></a><span id="l18.817" class="difflineplus">+    const canDetach = CanDetachAttachments() &amp;&amp; !deleted &amp;&amp; !detached;</span>
<a href="#l18.818"></a><span id="l18.818" class="difflineplus">+</span>
<a href="#l18.819"></a><span id="l18.819" class="difflineplus">+    const attachmentView = document.getElementById(&quot;appMenu-attachmentView&quot;);</span>
<a href="#l18.820"></a><span id="l18.820" class="difflineplus">+    attachmentView.setAttribute(&quot;title&quot;, attachment.name);</span>
<a href="#l18.821"></a><span id="l18.821" class="difflineplus">+</span>
<a href="#l18.822"></a><span id="l18.822" class="difflineplus">+    const viewBody = attachmentView.querySelector(&quot;.panel-subview-body&quot;);</span>
<a href="#l18.823"></a><span id="l18.823" class="difflineplus">+</span>
<a href="#l18.824"></a><span id="l18.824" class="difflineplus">+    // Clear out old view items.</span>
<a href="#l18.825"></a><span id="l18.825" class="difflineplus">+    while (viewBody.firstChild) {</span>
<a href="#l18.826"></a><span id="l18.826" class="difflineplus">+      viewBody.firstChild.remove();</span>
<a href="#l18.827"></a><span id="l18.827">     }</span>
<a href="#l18.828"></a><span id="l18.828"> </span>
<a href="#l18.829"></a><span id="l18.829" class="difflineminus">-    // Add the current set of menuitems of the Help menu to this view</span>
<a href="#l18.830"></a><span id="l18.830" class="difflineminus">-    let menuItems = Array.prototype.slice.call(helpMenu.getElementsByTagName(&quot;menuitem&quot;));</span>
<a href="#l18.831"></a><span id="l18.831" class="difflineminus">-    let fragment = document.createDocumentFragment();</span>
<a href="#l18.832"></a><span id="l18.832" class="difflineminus">-    for (let node of menuItems) {</span>
<a href="#l18.833"></a><span id="l18.833" class="difflineminus">-      if (node.hidden)</span>
<a href="#l18.834"></a><span id="l18.834" class="difflineminus">-        continue;</span>
<a href="#l18.835"></a><span id="l18.835" class="difflineminus">-      let button = document.createXULElement(&quot;toolbarbutton&quot;);</span>
<a href="#l18.836"></a><span id="l18.836" class="difflineminus">-      // Copy specific attributes from a menuitem of the Help menu</span>
<a href="#l18.837"></a><span id="l18.837" class="difflineminus">-      for (let attrName of attrs) {</span>
<a href="#l18.838"></a><span id="l18.838" class="difflineminus">-        if (!node.hasAttribute(attrName))</span>
<a href="#l18.839"></a><span id="l18.839" class="difflineminus">-          continue;</span>
<a href="#l18.840"></a><span id="l18.840" class="difflineminus">-        button.setAttribute(attrName, node.getAttribute(attrName));</span>
<a href="#l18.841"></a><span id="l18.841" class="difflineplus">+    // Create the &quot;open&quot; item.</span>
<a href="#l18.842"></a><span id="l18.842" class="difflineplus">+    const openButton = document.createXULElement(&quot;toolbarbutton&quot;);</span>
<a href="#l18.843"></a><span id="l18.843" class="difflineplus">+    openButton.attachment = attachment;</span>
<a href="#l18.844"></a><span id="l18.844" class="difflineplus">+    openButton.setAttribute(&quot;class&quot;, &quot;subviewbutton subviewbutton-iconic&quot;);</span>
<a href="#l18.845"></a><span id="l18.845" class="difflineplus">+    openButton.setAttribute(&quot;oncommand&quot;, &quot;this.attachment.open();&quot;);</span>
<a href="#l18.846"></a><span id="l18.846" class="difflineplus">+    openButton.setAttribute(&quot;label&quot;, bundle.getString(&quot;openLabel&quot;));</span>
<a href="#l18.847"></a><span id="l18.847" class="difflineplus">+    openButton.setAttribute(&quot;accesskey&quot;, bundle.getString(&quot;openLabelAccesskey&quot;));</span>
<a href="#l18.848"></a><span id="l18.848" class="difflineplus">+    if (deleted) {</span>
<a href="#l18.849"></a><span id="l18.849" class="difflineplus">+      openButton.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l18.850"></a><span id="l18.850" class="difflineplus">+    }</span>
<a href="#l18.851"></a><span id="l18.851" class="difflineplus">+    viewBody.appendChild(openButton);</span>
<a href="#l18.852"></a><span id="l18.852" class="difflineplus">+</span>
<a href="#l18.853"></a><span id="l18.853" class="difflineplus">+    // Create the &quot;save&quot; item.</span>
<a href="#l18.854"></a><span id="l18.854" class="difflineplus">+    const saveButton = document.createXULElement(&quot;toolbarbutton&quot;);</span>
<a href="#l18.855"></a><span id="l18.855" class="difflineplus">+    saveButton.attachment = attachment;</span>
<a href="#l18.856"></a><span id="l18.856" class="difflineplus">+    saveButton.setAttribute(&quot;class&quot;, &quot;subviewbutton subviewbutton-iconic&quot;);</span>
<a href="#l18.857"></a><span id="l18.857" class="difflineplus">+    saveButton.setAttribute(&quot;oncommand&quot;, &quot;this.attachment.save();&quot;);</span>
<a href="#l18.858"></a><span id="l18.858" class="difflineplus">+    saveButton.setAttribute(&quot;label&quot;, bundle.getString(&quot;saveLabel&quot;));</span>
<a href="#l18.859"></a><span id="l18.859" class="difflineplus">+    saveButton.setAttribute(&quot;accesskey&quot;, bundle.getString(&quot;saveLabelAccesskey&quot;));</span>
<a href="#l18.860"></a><span id="l18.860" class="difflineplus">+    if (deleted) {</span>
<a href="#l18.861"></a><span id="l18.861" class="difflineplus">+      saveButton.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l18.862"></a><span id="l18.862" class="difflineplus">+    }</span>
<a href="#l18.863"></a><span id="l18.863" class="difflineplus">+    viewBody.appendChild(saveButton);</span>
<a href="#l18.864"></a><span id="l18.864" class="difflineplus">+</span>
<a href="#l18.865"></a><span id="l18.865" class="difflineplus">+    // Create the &quot;detach&quot; item.</span>
<a href="#l18.866"></a><span id="l18.866" class="difflineplus">+    const detachButton = document.createXULElement(&quot;toolbarbutton&quot;);</span>
<a href="#l18.867"></a><span id="l18.867" class="difflineplus">+    detachButton.attachment = attachment;</span>
<a href="#l18.868"></a><span id="l18.868" class="difflineplus">+    detachButton.setAttribute(&quot;class&quot;, &quot;subviewbutton subviewbutton-iconic&quot;);</span>
<a href="#l18.869"></a><span id="l18.869" class="difflineplus">+    detachButton.setAttribute(&quot;oncommand&quot;, &quot;this.attachment.detach(true);&quot;);</span>
<a href="#l18.870"></a><span id="l18.870" class="difflineplus">+    detachButton.setAttribute(&quot;label&quot;, bundle.getString(&quot;detachLabel&quot;));</span>
<a href="#l18.871"></a><span id="l18.871" class="difflineplus">+    detachButton.setAttribute(&quot;accesskey&quot;, bundle.getString(&quot;detachLabelAccesskey&quot;));</span>
<a href="#l18.872"></a><span id="l18.872" class="difflineplus">+    if (!canDetach) {</span>
<a href="#l18.873"></a><span id="l18.873" class="difflineplus">+      detachButton.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l18.874"></a><span id="l18.874" class="difflineplus">+    }</span>
<a href="#l18.875"></a><span id="l18.875" class="difflineplus">+    viewBody.appendChild(detachButton);</span>
<a href="#l18.876"></a><span id="l18.876" class="difflineplus">+</span>
<a href="#l18.877"></a><span id="l18.877" class="difflineplus">+    // Create the &quot;delete&quot; item.</span>
<a href="#l18.878"></a><span id="l18.878" class="difflineplus">+    const deleteButton = document.createXULElement(&quot;toolbarbutton&quot;);</span>
<a href="#l18.879"></a><span id="l18.879" class="difflineplus">+    deleteButton.attachment = attachment;</span>
<a href="#l18.880"></a><span id="l18.880" class="difflineplus">+    deleteButton.setAttribute(&quot;class&quot;, &quot;subviewbutton subviewbutton-iconic&quot;);</span>
<a href="#l18.881"></a><span id="l18.881" class="difflineplus">+    deleteButton.setAttribute(&quot;oncommand&quot;, &quot;this.attachment.detach(false);&quot;);</span>
<a href="#l18.882"></a><span id="l18.882" class="difflineplus">+    deleteButton.setAttribute(&quot;label&quot;, bundle.getString(&quot;deleteLabel&quot;));</span>
<a href="#l18.883"></a><span id="l18.883" class="difflineplus">+    deleteButton.setAttribute(&quot;accesskey&quot;, bundle.getString(&quot;deleteLabelAccesskey&quot;));</span>
<a href="#l18.884"></a><span id="l18.884" class="difflineplus">+    if (!canDetach) {</span>
<a href="#l18.885"></a><span id="l18.885" class="difflineplus">+      deleteButton.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l18.886"></a><span id="l18.886" class="difflineplus">+    }</span>
<a href="#l18.887"></a><span id="l18.887" class="difflineplus">+    viewBody.appendChild(deleteButton);</span>
<a href="#l18.888"></a><span id="l18.888" class="difflineplus">+</span>
<a href="#l18.889"></a><span id="l18.889" class="difflineplus">+    // Create the &quot;open containing folder&quot; item, for existing detached only.</span>
<a href="#l18.890"></a><span id="l18.890" class="difflineplus">+    if (attachment.isFileAttachment) {</span>
<a href="#l18.891"></a><span id="l18.891" class="difflineplus">+      const separator = document.createXULElement(&quot;toolbarseparator&quot;);</span>
<a href="#l18.892"></a><span id="l18.892" class="difflineplus">+      viewBody.appendChild(separator);</span>
<a href="#l18.893"></a><span id="l18.893" class="difflineplus">+      const openFolderButton = document.createXULElement(&quot;toolbarbutton&quot;);</span>
<a href="#l18.894"></a><span id="l18.894" class="difflineplus">+      openFolderButton.attachment = attachment;</span>
<a href="#l18.895"></a><span id="l18.895" class="difflineplus">+      openFolderButton.setAttribute(&quot;class&quot;, &quot;subviewbutton subviewbutton-iconic&quot;);</span>
<a href="#l18.896"></a><span id="l18.896" class="difflineplus">+      openFolderButton.setAttribute(&quot;oncommand&quot;, &quot;this.attachment.openFolder();&quot;);</span>
<a href="#l18.897"></a><span id="l18.897" class="difflineplus">+      openFolderButton.setAttribute(&quot;label&quot;, bundle.getString(&quot;openFolderLabel&quot;));</span>
<a href="#l18.898"></a><span id="l18.898" class="difflineplus">+      openFolderButton.setAttribute(&quot;accesskey&quot;, bundle.getString(&quot;openFolderLabelAccesskey&quot;));</span>
<a href="#l18.899"></a><span id="l18.899" class="difflineplus">+      if (deleted) {</span>
<a href="#l18.900"></a><span id="l18.900" class="difflineplus">+        openFolderButton.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l18.901"></a><span id="l18.901">       }</span>
<a href="#l18.902"></a><span id="l18.902" class="difflineminus">-      button.setAttribute(&quot;class&quot;, &quot;subviewbutton&quot;);</span>
<a href="#l18.903"></a><span id="l18.903" class="difflineminus">-      fragment.appendChild(button);</span>
<a href="#l18.904"></a><span id="l18.904" class="difflineplus">+      viewBody.appendChild(openFolderButton);</span>
<a href="#l18.905"></a><span id="l18.905" class="difflineplus">+    }</span>
<a href="#l18.906"></a><span id="l18.906" class="difflineplus">+  },</span>
<a href="#l18.907"></a><span id="l18.907" class="difflineplus">+</span>
<a href="#l18.908"></a><span id="l18.908" class="difflineplus">+  /**</span>
<a href="#l18.909"></a><span id="l18.909" class="difflineplus">+   * Event listener for showing the Folders view.</span>
<a href="#l18.910"></a><span id="l18.910" class="difflineplus">+   *</span>
<a href="#l18.911"></a><span id="l18.911" class="difflineplus">+   * @param {ViewShowingEvent} event  ViewShowing event.</span>
<a href="#l18.912"></a><span id="l18.912" class="difflineplus">+   */</span>
<a href="#l18.913"></a><span id="l18.913" class="difflineplus">+  _onFoldersViewShow(event) {</span>
<a href="#l18.914"></a><span id="l18.914" class="difflineplus">+    event.target.querySelectorAll('[name=&quot;viewmessages&quot;]')</span>
<a href="#l18.915"></a><span id="l18.915" class="difflineplus">+      .forEach(item =&gt; item.removeAttribute(&quot;checked&quot;));</span>
<a href="#l18.916"></a><span id="l18.916" class="difflineplus">+</span>
<a href="#l18.917"></a><span id="l18.917" class="difflineplus">+    InitAppFolderViewsMenu();</span>
<a href="#l18.918"></a><span id="l18.918" class="difflineplus">+    InitViewFolderViewsMenu(event);</span>
<a href="#l18.919"></a><span id="l18.919" class="difflineplus">+  },</span>
<a href="#l18.920"></a><span id="l18.920" class="difflineplus">+</span>
<a href="#l18.921"></a><span id="l18.921" class="difflineplus">+  /**</span>
<a href="#l18.922"></a><span id="l18.922" class="difflineplus">+   * Create a toolbarbutton DOM node for a text encoding menu item.</span>
<a href="#l18.923"></a><span id="l18.923" class="difflineplus">+   * Similar to the CharsetMenu.build function.</span>
<a href="#l18.924"></a><span id="l18.924" class="difflineplus">+   *</span>
<a href="#l18.925"></a><span id="l18.925" class="difflineplus">+   * @param {Document} doc     The document where the node will be created.</span>
<a href="#l18.926"></a><span id="l18.926" class="difflineplus">+   * @param {Object} nodeInfo  Contains attributes to set on the node.</span>
<a href="#l18.927"></a><span id="l18.927" class="difflineplus">+   * @returns {Element}        The DOM node.</span>
<a href="#l18.928"></a><span id="l18.928" class="difflineplus">+   */</span>
<a href="#l18.929"></a><span id="l18.929" class="difflineplus">+  _createTextEncodingNode(doc, nodeInfo) {</span>
<a href="#l18.930"></a><span id="l18.930" class="difflineplus">+    const node = doc.createXULElement(&quot;toolbarbutton&quot;);</span>
<a href="#l18.931"></a><span id="l18.931" class="difflineplus">+    node.setAttribute(&quot;type&quot;, &quot;radio&quot;);</span>
<a href="#l18.932"></a><span id="l18.932" class="difflineplus">+    node.setAttribute(&quot;name&quot;, nodeInfo.name + &quot;Group&quot;);</span>
<a href="#l18.933"></a><span id="l18.933" class="difflineplus">+    node.setAttribute(nodeInfo.name, nodeInfo.value);</span>
<a href="#l18.934"></a><span id="l18.934" class="difflineplus">+    node.setAttribute(&quot;label&quot;, nodeInfo.label);</span>
<a href="#l18.935"></a><span id="l18.935" class="difflineplus">+    if (nodeInfo.accesskey) {</span>
<a href="#l18.936"></a><span id="l18.936" class="difflineplus">+      node.setAttribute(&quot;accesskey&quot;, nodeInfo.accesskey);</span>
<a href="#l18.937"></a><span id="l18.937" class="difflineplus">+    }</span>
<a href="#l18.938"></a><span id="l18.938" class="difflineplus">+    node.setAttribute(&quot;class&quot;, &quot;subviewbutton subviewbutton-iconic&quot;);</span>
<a href="#l18.939"></a><span id="l18.939" class="difflineplus">+    return node;</span>
<a href="#l18.940"></a><span id="l18.940" class="difflineplus">+  },</span>
<a href="#l18.941"></a><span id="l18.941" class="difflineplus">+</span>
<a href="#l18.942"></a><span id="l18.942" class="difflineplus">+  /**</span>
<a href="#l18.943"></a><span id="l18.943" class="difflineplus">+   * Event listener for showing the View/Text_Encoding view.</span>
<a href="#l18.944"></a><span id="l18.944" class="difflineplus">+   * Similar to the CharsetMenu.build function.</span>
<a href="#l18.945"></a><span id="l18.945" class="difflineplus">+   *</span>
<a href="#l18.946"></a><span id="l18.946" class="difflineplus">+   * @param {ViewShowingEvent} event  ViewShowing event.</span>
<a href="#l18.947"></a><span id="l18.947" class="difflineplus">+   */</span>
<a href="#l18.948"></a><span id="l18.948" class="difflineplus">+  _onTextEncodingViewShow(event) {</span>
<a href="#l18.949"></a><span id="l18.949" class="difflineplus">+    const panelView = event.target;</span>
<a href="#l18.950"></a><span id="l18.950" class="difflineplus">+    const doc = panelView.ownerDocument;</span>
<a href="#l18.951"></a><span id="l18.951" class="difflineplus">+    const parent = panelView.querySelector(&quot;.panel-subview-body&quot;);</span>
<a href="#l18.952"></a><span id="l18.952" class="difflineplus">+    const showDetectors = panelView.getAttribute(&quot;detectors&quot;) != &quot;false&quot;;</span>
<a href="#l18.953"></a><span id="l18.953" class="difflineplus">+</span>
<a href="#l18.954"></a><span id="l18.954" class="difflineplus">+    // Clear the view before recreating it.</span>
<a href="#l18.955"></a><span id="l18.955" class="difflineplus">+    while (parent.firstChild) {</span>
<a href="#l18.956"></a><span id="l18.956" class="difflineplus">+      parent.firstChild.remove();</span>
<a href="#l18.957"></a><span id="l18.957">     }</span>
<a href="#l18.958"></a><span id="l18.958" class="difflineminus">-    items.appendChild(fragment);</span>
<a href="#l18.959"></a><span id="l18.959" class="difflineplus">+</span>
<a href="#l18.960"></a><span id="l18.960" class="difflineplus">+    if (showDetectors) {</span>
<a href="#l18.961"></a><span id="l18.961" class="difflineplus">+      // Add toolbarbutton for detectors subview.</span>
<a href="#l18.962"></a><span id="l18.962" class="difflineplus">+      const node = doc.createXULElement(&quot;toolbarbutton&quot;);</span>
<a href="#l18.963"></a><span id="l18.963" class="difflineplus">+      node.setAttribute(&quot;class&quot;, &quot;subviewbutton subviewbutton-nav&quot;);</span>
<a href="#l18.964"></a><span id="l18.964" class="difflineplus">+      node.setAttribute(&quot;closemenu&quot;, &quot;none&quot;);</span>
<a href="#l18.965"></a><span id="l18.965" class="difflineplus">+</span>
<a href="#l18.966"></a><span id="l18.966" class="difflineplus">+      node.setAttribute(&quot;label&quot;,</span>
<a href="#l18.967"></a><span id="l18.967" class="difflineplus">+        gBundle.GetStringFromName(&quot;charsetMenuAutodet&quot;));</span>
<a href="#l18.968"></a><span id="l18.968" class="difflineplus">+</span>
<a href="#l18.969"></a><span id="l18.969" class="difflineplus">+      node.setAttribute(&quot;accesskey&quot;,</span>
<a href="#l18.970"></a><span id="l18.970" class="difflineplus">+        gBundle.GetStringFromName(&quot;charsetMenuAutodet.key&quot;));</span>
<a href="#l18.971"></a><span id="l18.971" class="difflineplus">+</span>
<a href="#l18.972"></a><span id="l18.972" class="difflineplus">+      node.setAttribute(&quot;oncommand&quot;,</span>
<a href="#l18.973"></a><span id="l18.973" class="difflineplus">+        &quot;PanelUI.showSubView('appMenu-viewTextEncodingDetectorsView', this)&quot;);</span>
<a href="#l18.974"></a><span id="l18.974" class="difflineplus">+</span>
<a href="#l18.975"></a><span id="l18.975" class="difflineplus">+      parent.appendChild(node);</span>
<a href="#l18.976"></a><span id="l18.976" class="difflineplus">+      parent.appendChild(doc.createXULElement(&quot;toolbarseparator&quot;));</span>
<a href="#l18.977"></a><span id="l18.977" class="difflineplus">+    }</span>
<a href="#l18.978"></a><span id="l18.978" class="difflineplus">+</span>
<a href="#l18.979"></a><span id="l18.979" class="difflineplus">+    // Add a toolbarbutton for each character encoding.</span>
<a href="#l18.980"></a><span id="l18.980" class="difflineplus">+    const pinnedInfoCache = CharsetMenu.getCharsetInfo(</span>
<a href="#l18.981"></a><span id="l18.981" class="difflineplus">+      PanelUI.kPinnedEncodings, false);</span>
<a href="#l18.982"></a><span id="l18.982" class="difflineplus">+</span>
<a href="#l18.983"></a><span id="l18.983" class="difflineplus">+    const charsetInfoCache = CharsetMenu.getCharsetInfo(PanelUI.kEncodings);</span>
<a href="#l18.984"></a><span id="l18.984" class="difflineplus">+</span>
<a href="#l18.985"></a><span id="l18.985" class="difflineplus">+    pinnedInfoCache.forEach(charsetInfo =&gt; parent.appendChild(</span>
<a href="#l18.986"></a><span id="l18.986" class="difflineplus">+      PanelUI._createTextEncodingNode(doc, charsetInfo)));</span>
<a href="#l18.987"></a><span id="l18.987" class="difflineplus">+</span>
<a href="#l18.988"></a><span id="l18.988" class="difflineplus">+    parent.appendChild(doc.createXULElement(&quot;toolbarseparator&quot;));</span>
<a href="#l18.989"></a><span id="l18.989" class="difflineplus">+</span>
<a href="#l18.990"></a><span id="l18.990" class="difflineplus">+    charsetInfoCache.forEach(charsetInfo =&gt; parent.appendChild(</span>
<a href="#l18.991"></a><span id="l18.991" class="difflineplus">+      PanelUI._createTextEncodingNode(doc, charsetInfo)));</span>
<a href="#l18.992"></a><span id="l18.992" class="difflineplus">+</span>
<a href="#l18.993"></a><span id="l18.993" class="difflineplus">+    UpdateCharsetMenu(msgWindow.mailCharacterSet, parent);</span>
<a href="#l18.994"></a><span id="l18.994" class="difflineplus">+  },</span>
<a href="#l18.995"></a><span id="l18.995" class="difflineplus">+</span>
<a href="#l18.996"></a><span id="l18.996" class="difflineplus">+  /**</span>
<a href="#l18.997"></a><span id="l18.997" class="difflineplus">+   * Event listener for showing the View/Text_Encoding/Auto-Detect view.</span>
<a href="#l18.998"></a><span id="l18.998" class="difflineplus">+   * Similar to the CharsetMenu.build function.</span>
<a href="#l18.999"></a><span id="l18.999" class="difflineplus">+   *</span>
<a href="#l18.1000"></a><span id="l18.1000" class="difflineplus">+   * @param {ViewShowingEvent} event  ViewShowing event.</span>
<a href="#l18.1001"></a><span id="l18.1001" class="difflineplus">+   */</span>
<a href="#l18.1002"></a><span id="l18.1002" class="difflineplus">+  _onTextEncodingDetectorsViewShow(event) {</span>
<a href="#l18.1003"></a><span id="l18.1003" class="difflineplus">+    const panelView = event.target;</span>
<a href="#l18.1004"></a><span id="l18.1004" class="difflineplus">+    const parent = panelView.querySelector(&quot;.panel-subview-body&quot;);</span>
<a href="#l18.1005"></a><span id="l18.1005" class="difflineplus">+    const doc = parent.ownerDocument;</span>
<a href="#l18.1006"></a><span id="l18.1006" class="difflineplus">+</span>
<a href="#l18.1007"></a><span id="l18.1007" class="difflineplus">+    // Clear the view before recreating it.</span>
<a href="#l18.1008"></a><span id="l18.1008" class="difflineplus">+    while (parent.firstChild) {</span>
<a href="#l18.1009"></a><span id="l18.1009" class="difflineplus">+      parent.firstChild.remove();</span>
<a href="#l18.1010"></a><span id="l18.1010" class="difflineplus">+    }</span>
<a href="#l18.1011"></a><span id="l18.1011" class="difflineplus">+</span>
<a href="#l18.1012"></a><span id="l18.1012" class="difflineplus">+    // Populate the view with toolbarbuttons.</span>
<a href="#l18.1013"></a><span id="l18.1013" class="difflineplus">+    panelView.setAttribute(&quot;title&quot;,</span>
<a href="#l18.1014"></a><span id="l18.1014" class="difflineplus">+      gBundle.GetStringFromName(&quot;charsetMenuAutodet&quot;));</span>
<a href="#l18.1015"></a><span id="l18.1015" class="difflineplus">+</span>
<a href="#l18.1016"></a><span id="l18.1016" class="difflineplus">+    const detectorInfoCache = CharsetMenu.getDetectorInfo();</span>
<a href="#l18.1017"></a><span id="l18.1017" class="difflineplus">+</span>
<a href="#l18.1018"></a><span id="l18.1018" class="difflineplus">+    detectorInfoCache.forEach(detectorInfo =&gt; parent.appendChild(</span>
<a href="#l18.1019"></a><span id="l18.1019" class="difflineplus">+        PanelUI._createTextEncodingNode(doc, detectorInfo)));</span>
<a href="#l18.1020"></a><span id="l18.1020" class="difflineplus">+</span>
<a href="#l18.1021"></a><span id="l18.1021" class="difflineplus">+    parent.appendChild(doc.createXULElement(&quot;toolbarseparator&quot;));</span>
<a href="#l18.1022"></a><span id="l18.1022" class="difflineplus">+</span>
<a href="#l18.1023"></a><span id="l18.1023" class="difflineplus">+    // Make the current selection checked. (Like UpdateDetectorMenu function.)</span>
<a href="#l18.1024"></a><span id="l18.1024" class="difflineplus">+    const detector = Services.prefs.getComplexValue(&quot;intl.charset.detector&quot;,</span>
<a href="#l18.1025"></a><span id="l18.1025" class="difflineplus">+      Ci.nsIPrefLocalizedString);</span>
<a href="#l18.1026"></a><span id="l18.1026" class="difflineplus">+</span>
<a href="#l18.1027"></a><span id="l18.1027" class="difflineplus">+    const item = parent.getElementsByAttribute(&quot;detector&quot;, detector).item(0);</span>
<a href="#l18.1028"></a><span id="l18.1028" class="difflineplus">+</span>
<a href="#l18.1029"></a><span id="l18.1029" class="difflineplus">+    if (item) {</span>
<a href="#l18.1030"></a><span id="l18.1030" class="difflineplus">+      item.setAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l18.1031"></a><span id="l18.1031" class="difflineplus">+    }</span>
<a href="#l18.1032"></a><span id="l18.1032" class="difflineplus">+  },</span>
<a href="#l18.1033"></a><span id="l18.1033" class="difflineplus">+</span>
<a href="#l18.1034"></a><span id="l18.1034" class="difflineplus">+  /**</span>
<a href="#l18.1035"></a><span id="l18.1035" class="difflineplus">+   * Set the text encoding detector preference. Used for the</span>
<a href="#l18.1036"></a><span id="l18.1036" class="difflineplus">+   * View / Text Encoding / Auto-Detect view.</span>
<a href="#l18.1037"></a><span id="l18.1037" class="difflineplus">+   *</span>
<a href="#l18.1038"></a><span id="l18.1038" class="difflineplus">+   * @param {Event} event  The 'oncommand' event.</span>
<a href="#l18.1039"></a><span id="l18.1039" class="difflineplus">+   */</span>
<a href="#l18.1040"></a><span id="l18.1040" class="difflineplus">+  setTextEncodingDetector(event) {</span>
<a href="#l18.1041"></a><span id="l18.1041" class="difflineplus">+    Services.prefs.setStringPref(&quot;intl.charset.detector&quot;,</span>
<a href="#l18.1042"></a><span id="l18.1042" class="difflineplus">+      event.target.getAttribute(&quot;detector&quot;));</span>
<a href="#l18.1043"></a><span id="l18.1043">   },</span>
<a href="#l18.1044"></a><span id="l18.1044"> </span>
<a href="#l18.1045"></a><span id="l18.1045">   _updateQuitTooltip() {</span>
<a href="#l18.1046"></a><span id="l18.1046">     if (AppConstants.platform == &quot;win&quot;) {</span>
<a href="#l18.1047"></a><span id="l18.1047">       return;</span>
<a href="#l18.1048"></a><span id="l18.1048">     }</span>
<a href="#l18.1049"></a><span id="l18.1049"> </span>
<a href="#l18.1050"></a><span id="l18.1050">     let tooltipId = AppConstants.platform == &quot;macosx&quot; ?</span>
<a href="#l18.1051"></a><span id="l18.1051" class="difflineat">@@ -869,17 +1222,19 @@ const PanelUI = {</span>
<a href="#l18.1052"></a><span id="l18.1052">     let iconAnchor =</span>
<a href="#l18.1053"></a><span id="l18.1053">       document.getAnonymousElementByAttribute(candidate, &quot;class&quot;,</span>
<a href="#l18.1054"></a><span id="l18.1054">                                               &quot;toolbarbutton-badge-stack&quot;) ||</span>
<a href="#l18.1055"></a><span id="l18.1055">       document.getAnonymousElementByAttribute(candidate, &quot;class&quot;,</span>
<a href="#l18.1056"></a><span id="l18.1056">                                               &quot;toolbarbutton-icon&quot;);</span>
<a href="#l18.1057"></a><span id="l18.1057">     return iconAnchor || candidate;</span>
<a href="#l18.1058"></a><span id="l18.1058">   },</span>
<a href="#l18.1059"></a><span id="l18.1059"> </span>
<a href="#l18.1060"></a><span id="l18.1060" class="difflineminus">-  _addedShortcuts: false,</span>
<a href="#l18.1061"></a><span id="l18.1061" class="difflineplus">+  // This is unused:</span>
<a href="#l18.1062"></a><span id="l18.1062" class="difflineplus">+  // _addedShortcuts: false,</span>
<a href="#l18.1063"></a><span id="l18.1063" class="difflineplus">+</span>
<a href="#l18.1064"></a><span id="l18.1064">   _ensureShortcutsShown(view = this.mainView) {</span>
<a href="#l18.1065"></a><span id="l18.1065">     if (view.hasAttribute(&quot;added-shortcuts&quot;)) {</span>
<a href="#l18.1066"></a><span id="l18.1066">       return;</span>
<a href="#l18.1067"></a><span id="l18.1067">     }</span>
<a href="#l18.1068"></a><span id="l18.1068">     view.setAttribute(&quot;added-shortcuts&quot;, &quot;true&quot;);</span>
<a href="#l18.1069"></a><span id="l18.1069">     for (let button of view.querySelectorAll(&quot;toolbarbutton[key]&quot;)) {</span>
<a href="#l18.1070"></a><span id="l18.1070">       let keyId = button.getAttribute(&quot;key&quot;);</span>
<a href="#l18.1071"></a><span id="l18.1071">       let key = document.getElementById(keyId);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mail/components/customizableui/moz.build</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mail/components/customizableui/moz.build</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -3,21 +3,23 @@</span>
<a href="#l19.4"></a><span id="l19.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l19.5"></a><span id="l19.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l19.6"></a><span id="l19.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l19.7"></a><span id="l19.7"> </span>
<a href="#l19.8"></a><span id="l19.8"> DIRS += [</span>
<a href="#l19.9"></a><span id="l19.9">     'content',</span>
<a href="#l19.10"></a><span id="l19.10"> ]</span>
<a href="#l19.11"></a><span id="l19.11"> </span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-BROWSER_CHROME_MANIFESTS += ['test/browser.ini']</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+# TODO appmenu - Not currently used for Thunderbird.</span>
<a href="#l19.14"></a><span id="l19.14" class="difflineplus">+# BROWSER_CHROME_MANIFESTS += ['test/browser.ini']</span>
<a href="#l19.15"></a><span id="l19.15"> </span>
<a href="#l19.16"></a><span id="l19.16" class="difflineminus">-TESTING_JS_MODULES += [</span>
<a href="#l19.17"></a><span id="l19.17" class="difflineminus">-    'test/CustomizableUITestUtils.jsm',</span>
<a href="#l19.18"></a><span id="l19.18" class="difflineminus">-]</span>
<a href="#l19.19"></a><span id="l19.19" class="difflineplus">+# TODO appmenu - Not currently used for Thunderbird.</span>
<a href="#l19.20"></a><span id="l19.20" class="difflineplus">+# TESTING_JS_MODULES += [</span>
<a href="#l19.21"></a><span id="l19.21" class="difflineplus">+#     'test/CustomizableUITestUtils.jsm',</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineplus">+# ]</span>
<a href="#l19.23"></a><span id="l19.23"> </span>
<a href="#l19.24"></a><span id="l19.24"> EXTRA_JS_MODULES += [</span>
<a href="#l19.25"></a><span id="l19.25">     'CustomizableUI.jsm',</span>
<a href="#l19.26"></a><span id="l19.26">     'CustomizableWidgets.jsm',</span>
<a href="#l19.27"></a><span id="l19.27">     'CustomizeMode.jsm',</span>
<a href="#l19.28"></a><span id="l19.28">     'DragPositionManager.jsm',</span>
<a href="#l19.29"></a><span id="l19.29">     'PanelMultiView.jsm',</span>
<a href="#l19.30"></a><span id="l19.30">     'SearchWidgetTracker.jsm',</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mail/components/moz.build</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mail/components/moz.build</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -7,16 +7,17 @@</span>
<a href="#l20.4"></a><span id="l20.4"> # least one module from search/ on all platforms</span>
<a href="#l20.5"></a><span id="l20.5"> DIRS += [</span>
<a href="#l20.6"></a><span id="l20.6">     'about-support',</span>
<a href="#l20.7"></a><span id="l20.7">     'accountcreation',</span>
<a href="#l20.8"></a><span id="l20.8">     'activity',</span>
<a href="#l20.9"></a><span id="l20.9">     'addrbook',</span>
<a href="#l20.10"></a><span id="l20.10">     'cloudfile',</span>
<a href="#l20.11"></a><span id="l20.11">     'compose',</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineplus">+    'customizableui',</span>
<a href="#l20.13"></a><span id="l20.13">     'devtools',</span>
<a href="#l20.14"></a><span id="l20.14">     'downloads',</span>
<a href="#l20.15"></a><span id="l20.15">     'enterprisepolicies',</span>
<a href="#l20.16"></a><span id="l20.16">     'extensions',</span>
<a href="#l20.17"></a><span id="l20.17">     'im',</span>
<a href="#l20.18"></a><span id="l20.18">     'migration',</span>
<a href="#l20.19"></a><span id="l20.19">     'newmailaccount',</span>
<a href="#l20.20"></a><span id="l20.20">     'preferences',</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mail/extensions/mailviews/content/msgViewPickerOverlay.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mail/extensions/mailviews/content/msgViewPickerOverlay.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -83,18 +83,18 @@ var ViewPickerBinding = {</span>
<a href="#l21.4"></a><span id="l21.4">    *  no way to change it.)</span>
<a href="#l21.5"></a><span id="l21.5">    */</span>
<a href="#l21.6"></a><span id="l21.6">   get isVisible() {</span>
<a href="#l21.7"></a><span id="l21.7">     return document.getElementById(&quot;viewPicker&quot;) != null;</span>
<a href="#l21.8"></a><span id="l21.8">   },</span>
<a href="#l21.9"></a><span id="l21.9"> </span>
<a href="#l21.10"></a><span id="l21.10">   /**</span>
<a href="#l21.11"></a><span id="l21.11">    * Return the string value representing the current mail view value as</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-   *  understood by the view picker widgets.  The value is the index for</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineminus">-   *  everything but tags.  for tags it's the &quot;:&quot;-prefixed tagname.</span>
<a href="#l21.14"></a><span id="l21.14" class="difflineplus">+   * understood by the view picker widgets.  The value is the index for</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineplus">+   * everything but tags.  for tags it's the &quot;:&quot;-prefixed tagname.</span>
<a href="#l21.16"></a><span id="l21.16">    */</span>
<a href="#l21.17"></a><span id="l21.17">   get currentViewValue() {</span>
<a href="#l21.18"></a><span id="l21.18">     if (gFolderDisplay.view.mailViewIndex == kViewItemTags)</span>
<a href="#l21.19"></a><span id="l21.19">       return kViewTagMarker + gFolderDisplay.view.mailViewData;</span>
<a href="#l21.20"></a><span id="l21.20">     return gFolderDisplay.view.mailViewIndex + &quot;&quot;;</span>
<a href="#l21.21"></a><span id="l21.21">   },</span>
<a href="#l21.22"></a><span id="l21.22"> </span>
<a href="#l21.23"></a><span id="l21.23">   /**</span>
<a href="#l21.24"></a><span id="l21.24" class="difflineat">@@ -103,137 +103,176 @@ var ViewPickerBinding = {</span>
<a href="#l21.25"></a><span id="l21.25">   get currentViewLabel() {</span>
<a href="#l21.26"></a><span id="l21.26">     let viewPicker = document.getElementById(&quot;viewPicker&quot;);</span>
<a href="#l21.27"></a><span id="l21.27">     return viewPicker.getAttribute(&quot;label&quot;);</span>
<a href="#l21.28"></a><span id="l21.28">   },</span>
<a href="#l21.29"></a><span id="l21.29"> </span>
<a href="#l21.30"></a><span id="l21.30">   /**</span>
<a href="#l21.31"></a><span id="l21.31">    * The effective view has changed, update the widget.</span>
<a href="#l21.32"></a><span id="l21.32">    */</span>
<a href="#l21.33"></a><span id="l21.33" class="difflineminus">-  updateDisplay(aEvent, aGiveUpIfNotFound) {</span>
<a href="#l21.34"></a><span id="l21.34" class="difflineplus">+  updateDisplay(event) {</span>
<a href="#l21.35"></a><span id="l21.35">     let viewPicker = document.getElementById(&quot;viewPicker&quot;);</span>
<a href="#l21.36"></a><span id="l21.36">     if (viewPicker) {</span>
<a href="#l21.37"></a><span id="l21.37">       let value = this.currentViewValue;</span>
<a href="#l21.38"></a><span id="l21.38"> </span>
<a href="#l21.39"></a><span id="l21.39">       let viewPickerPopup = document.getElementById(&quot;viewPickerPopup&quot;);</span>
<a href="#l21.40"></a><span id="l21.40">       let selectedItem =</span>
<a href="#l21.41"></a><span id="l21.41">         viewPickerPopup.querySelector('[value=&quot;' + value + '&quot;]');</span>
<a href="#l21.42"></a><span id="l21.42">       if (!selectedItem) {</span>
<a href="#l21.43"></a><span id="l21.43" class="difflineminus">-        // we may have a new item, so refresh to make it show up</span>
<a href="#l21.44"></a><span id="l21.44" class="difflineplus">+        // We may have a new item, so refresh to make it show up.</span>
<a href="#l21.45"></a><span id="l21.45">         RefreshAllViewPopups(viewPickerPopup, true);</span>
<a href="#l21.46"></a><span id="l21.46">         selectedItem = viewPickerPopup.querySelector('[value=&quot;' + value + '&quot;]');</span>
<a href="#l21.47"></a><span id="l21.47">       }</span>
<a href="#l21.48"></a><span id="l21.48">       viewPicker.setAttribute(&quot;label&quot;,</span>
<a href="#l21.49"></a><span id="l21.49">                               selectedItem &amp;&amp; selectedItem.getAttribute(&quot;label&quot;));</span>
<a href="#l21.50"></a><span id="l21.50">     }</span>
<a href="#l21.51"></a><span id="l21.51">   },</span>
<a href="#l21.52"></a><span id="l21.52"> };</span>
<a href="#l21.53"></a><span id="l21.53"> ViewPickerBinding._init();</span>
<a href="#l21.54"></a><span id="l21.54"> </span>
<a href="#l21.55"></a><span id="l21.55"> function LaunchCustomizeDialog() {</span>
<a href="#l21.56"></a><span id="l21.56">   OpenOrFocusWindow({}, &quot;mailnews:mailviewlist&quot;, &quot;chrome://messenger/content/mailViewList.xul&quot;);</span>
<a href="#l21.57"></a><span id="l21.57"> }</span>
<a href="#l21.58"></a><span id="l21.58"> </span>
<a href="#l21.59"></a><span id="l21.59"> /**</span>
<a href="#l21.60"></a><span id="l21.60" class="difflineminus">- * All of these Refresh*ViewPopup* methods have to deal with two menu</span>
<a href="#l21.61"></a><span id="l21.61" class="difflineminus">- *  variations.  They are accessible from the &quot;View... Messages&quot; menu as well as</span>
<a href="#l21.62"></a><span id="l21.62" class="difflineminus">- *  the view picker menu list in the toolbar.  aIsMenulist will be false in the</span>
<a href="#l21.63"></a><span id="l21.63" class="difflineminus">- *  former case and true in the latter case.</span>
<a href="#l21.64"></a><span id="l21.64" class="difflineplus">+ * All of these Refresh*ViewPopup* methods have to deal with several menu</span>
<a href="#l21.65"></a><span id="l21.65" class="difflineplus">+ * instances. For example, the &quot;View... Messages&quot; menu, the view picker menu</span>
<a href="#l21.66"></a><span id="l21.66" class="difflineplus">+ * list in the toolbar, in appmenu/View/Messages, etc.</span>
<a href="#l21.67"></a><span id="l21.67" class="difflineplus">+ *</span>
<a href="#l21.68"></a><span id="l21.68" class="difflineplus">+ * @param {Element} viewPopup  A menu popup element.</span>
<a href="#l21.69"></a><span id="l21.69">  */</span>
<a href="#l21.70"></a><span id="l21.70" class="difflineminus">-function RefreshAllViewPopups(aViewPopup) {</span>
<a href="#l21.71"></a><span id="l21.71" class="difflineminus">-  RefreshViewPopup(aViewPopup);</span>
<a href="#l21.72"></a><span id="l21.72" class="difflineminus">-  var menupopups = aViewPopup.getElementsByTagName(&quot;menupopup&quot;);</span>
<a href="#l21.73"></a><span id="l21.73" class="difflineplus">+function RefreshAllViewPopups(viewPopup) {</span>
<a href="#l21.74"></a><span id="l21.74" class="difflineplus">+  RefreshViewPopup(viewPopup);</span>
<a href="#l21.75"></a><span id="l21.75" class="difflineplus">+  let menupopups = viewPopup.getElementsByTagName(&quot;menupopup&quot;);</span>
<a href="#l21.76"></a><span id="l21.76">   if (menupopups.length &gt; 1) {</span>
<a href="#l21.77"></a><span id="l21.77" class="difflineminus">-    // when we have menupopups, we assume both tags and custom views are there</span>
<a href="#l21.78"></a><span id="l21.78" class="difflineplus">+    // When we have menupopups, we assume both tags and custom views are there.</span>
<a href="#l21.79"></a><span id="l21.79">     RefreshTagsPopup(menupopups[0]);</span>
<a href="#l21.80"></a><span id="l21.80">     RefreshCustomViewsPopup(menupopups[1]);</span>
<a href="#l21.81"></a><span id="l21.81">   }</span>
<a href="#l21.82"></a><span id="l21.82"> }</span>
<a href="#l21.83"></a><span id="l21.83"> </span>
<a href="#l21.84"></a><span id="l21.84" class="difflineminus">-</span>
<a href="#l21.85"></a><span id="l21.85" class="difflineminus">-function RefreshViewPopup(aViewPopup) {</span>
<a href="#l21.86"></a><span id="l21.86" class="difflineminus">-  // mark default views if selected</span>
<a href="#l21.87"></a><span id="l21.87" class="difflineplus">+/**</span>
<a href="#l21.88"></a><span id="l21.88" class="difflineplus">+ * Refresh the view messages popup menu/panel. For example set checked and</span>
<a href="#l21.89"></a><span id="l21.89" class="difflineplus">+ * hidden state on menu items. Used for example for appmenu/View/Messages panel.</span>
<a href="#l21.90"></a><span id="l21.90" class="difflineplus">+ *</span>
<a href="#l21.91"></a><span id="l21.91" class="difflineplus">+ * @param {Element} viewPopup  A menu popup element.</span>
<a href="#l21.92"></a><span id="l21.92" class="difflineplus">+ */</span>
<a href="#l21.93"></a><span id="l21.93" class="difflineplus">+function RefreshViewPopup(viewPopup) {</span>
<a href="#l21.94"></a><span id="l21.94" class="difflineplus">+  // Mark default views if selected.</span>
<a href="#l21.95"></a><span id="l21.95">   let currentViewValue = ViewPickerBinding.currentViewValue;</span>
<a href="#l21.96"></a><span id="l21.96"> </span>
<a href="#l21.97"></a><span id="l21.97" class="difflineminus">-  let viewAll = aViewPopup.querySelector('[value=&quot;' + kViewItemAll + '&quot;]');</span>
<a href="#l21.98"></a><span id="l21.98" class="difflineplus">+  let viewAll = viewPopup.querySelector('[value=&quot;' + kViewItemAll + '&quot;]');</span>
<a href="#l21.99"></a><span id="l21.99">   viewAll.setAttribute(&quot;checked&quot;, currentViewValue == kViewItemAll);</span>
<a href="#l21.100"></a><span id="l21.100" class="difflineminus">-  let viewUnread =</span>
<a href="#l21.101"></a><span id="l21.101" class="difflineminus">-    aViewPopup.querySelector('[value=&quot;' + kViewItemUnread + '&quot;]');</span>
<a href="#l21.102"></a><span id="l21.102" class="difflineplus">+</span>
<a href="#l21.103"></a><span id="l21.103" class="difflineplus">+  let viewUnread = viewPopup.querySelector('[value=&quot;' + kViewItemUnread + '&quot;]');</span>
<a href="#l21.104"></a><span id="l21.104">   viewUnread.setAttribute(&quot;checked&quot;, currentViewValue == kViewItemUnread);</span>
<a href="#l21.105"></a><span id="l21.105"> </span>
<a href="#l21.106"></a><span id="l21.106">   let viewNotDeleted =</span>
<a href="#l21.107"></a><span id="l21.107" class="difflineminus">-    aViewPopup.querySelector('[value=&quot;' + kViewItemNotDeleted + '&quot;]');</span>
<a href="#l21.108"></a><span id="l21.108" class="difflineminus">-  var folderArray = GetSelectedMsgFolders();</span>
<a href="#l21.109"></a><span id="l21.109" class="difflineminus">-  if (folderArray.length == 0)</span>
<a href="#l21.110"></a><span id="l21.110" class="difflineplus">+    viewPopup.querySelector('[value=&quot;' + kViewItemNotDeleted + '&quot;]');</span>
<a href="#l21.111"></a><span id="l21.111" class="difflineplus">+</span>
<a href="#l21.112"></a><span id="l21.112" class="difflineplus">+  let folderArray = GetSelectedMsgFolders();</span>
<a href="#l21.113"></a><span id="l21.113" class="difflineplus">+  if (folderArray.length == 0) {</span>
<a href="#l21.114"></a><span id="l21.114">     return;</span>
<a href="#l21.115"></a><span id="l21.115" class="difflineplus">+  }</span>
<a href="#l21.116"></a><span id="l21.116"> </span>
<a href="#l21.117"></a><span id="l21.117" class="difflineminus">-  // only show the &quot;Not Deleted&quot; item for IMAP servers that are using the IMAP</span>
<a href="#l21.118"></a><span id="l21.118" class="difflineminus">-  // delete model</span>
<a href="#l21.119"></a><span id="l21.119" class="difflineplus">+  // Only show the &quot;Not Deleted&quot; item for IMAP servers that are using the IMAP</span>
<a href="#l21.120"></a><span id="l21.120" class="difflineplus">+  // delete model.</span>
<a href="#l21.121"></a><span id="l21.121">   viewNotDeleted.setAttribute(&quot;hidden&quot;, true);</span>
<a href="#l21.122"></a><span id="l21.122">   var msgFolder = folderArray[0];</span>
<a href="#l21.123"></a><span id="l21.123">   var server = msgFolder.server;</span>
<a href="#l21.124"></a><span id="l21.124">   if (server.type == &quot;imap&quot;) {</span>
<a href="#l21.125"></a><span id="l21.125" class="difflineminus">-    let imapServer =</span>
<a href="#l21.126"></a><span id="l21.126" class="difflineminus">-      server.QueryInterface(Ci.nsIImapIncomingServer);</span>
<a href="#l21.127"></a><span id="l21.127" class="difflineplus">+    let imapServer = server.QueryInterface(Ci.nsIImapIncomingServer);</span>
<a href="#l21.128"></a><span id="l21.128" class="difflineplus">+</span>
<a href="#l21.129"></a><span id="l21.129">     if (imapServer.deleteModel == Ci.nsMsgImapDeleteModels.IMAPDelete) {</span>
<a href="#l21.130"></a><span id="l21.130">       viewNotDeleted.setAttribute(&quot;hidden&quot;, false);</span>
<a href="#l21.131"></a><span id="l21.131">       viewNotDeleted.setAttribute(&quot;checked&quot;,</span>
<a href="#l21.132"></a><span id="l21.132" class="difflineminus">-                                  currentViewValue == kViewItemNotDeleted);</span>
<a href="#l21.133"></a><span id="l21.133" class="difflineplus">+        currentViewValue == kViewItemNotDeleted);</span>
<a href="#l21.134"></a><span id="l21.134">     }</span>
<a href="#l21.135"></a><span id="l21.135">   }</span>
<a href="#l21.136"></a><span id="l21.136"> }</span>
<a href="#l21.137"></a><span id="l21.137"> </span>
<a href="#l21.138"></a><span id="l21.138" class="difflineminus">-</span>
<a href="#l21.139"></a><span id="l21.139" class="difflineminus">-function RefreshCustomViewsPopup(aMenupopup) {</span>
<a href="#l21.140"></a><span id="l21.140" class="difflineminus">-  // for each mail view in the msg view list, add an entry in our combo box</span>
<a href="#l21.141"></a><span id="l21.141" class="difflineminus">-  if (!gMailViewList)</span>
<a href="#l21.142"></a><span id="l21.142" class="difflineplus">+/**</span>
<a href="#l21.143"></a><span id="l21.143" class="difflineplus">+ * Refresh the contents of the custom views popup menu/panel.</span>
<a href="#l21.144"></a><span id="l21.144" class="difflineplus">+ * Used for example for appmenu/View/Messages/CustomViews panel.</span>
<a href="#l21.145"></a><span id="l21.145" class="difflineplus">+ *</span>
<a href="#l21.146"></a><span id="l21.146" class="difflineplus">+ * @param {Element} parent        Parent element that will recieve the menu items.</span>
<a href="#l21.147"></a><span id="l21.147" class="difflineplus">+ * @param {string} [elementName]  Type of menu items to create (e.g. &quot;menuitem&quot;, &quot;toolbarbutton&quot;).</span>
<a href="#l21.148"></a><span id="l21.148" class="difflineplus">+ * @param {string} [classes]      Classes to set on the menu items.</span>
<a href="#l21.149"></a><span id="l21.149" class="difflineplus">+ */</span>
<a href="#l21.150"></a><span id="l21.150" class="difflineplus">+function RefreshCustomViewsPopup(parent, elementName = &quot;menuitem&quot;, classes) {</span>
<a href="#l21.151"></a><span id="l21.151" class="difflineplus">+  if (!gMailViewList) {</span>
<a href="#l21.152"></a><span id="l21.152">     gMailViewList = Cc[&quot;@mozilla.org/messenger/mailviewlist;1&quot;]</span>
<a href="#l21.153"></a><span id="l21.153">                       .getService(Ci.nsIMsgMailViewList);</span>
<a href="#l21.154"></a><span id="l21.154" class="difflineminus">-  // remove all menuitems</span>
<a href="#l21.155"></a><span id="l21.155" class="difflineminus">-  while (aMenupopup.hasChildNodes())</span>
<a href="#l21.156"></a><span id="l21.156" class="difflineminus">-    aMenupopup.lastChild.remove();</span>
<a href="#l21.157"></a><span id="l21.157" class="difflineplus">+  }</span>
<a href="#l21.158"></a><span id="l21.158" class="difflineplus">+</span>
<a href="#l21.159"></a><span id="l21.159" class="difflineplus">+  // Remove all menu items.</span>
<a href="#l21.160"></a><span id="l21.160" class="difflineplus">+  while (parent.hasChildNodes()) {</span>
<a href="#l21.161"></a><span id="l21.161" class="difflineplus">+    parent.lastChild.remove();</span>
<a href="#l21.162"></a><span id="l21.162" class="difflineplus">+  }</span>
<a href="#l21.163"></a><span id="l21.163" class="difflineplus">+</span>
<a href="#l21.164"></a><span id="l21.164" class="difflineplus">+  // Rebuild the list.</span>
<a href="#l21.165"></a><span id="l21.165" class="difflineplus">+  const currentView = ViewPickerBinding.currentViewValue;</span>
<a href="#l21.166"></a><span id="l21.166" class="difflineplus">+  const numItems = gMailViewList.mailViewCount;</span>
<a href="#l21.167"></a><span id="l21.167"> </span>
<a href="#l21.168"></a><span id="l21.168" class="difflineminus">-  // now rebuild the list</span>
<a href="#l21.169"></a><span id="l21.169" class="difflineminus">-  var currentView = ViewPickerBinding.currentViewValue;</span>
<a href="#l21.170"></a><span id="l21.170" class="difflineminus">-  var numItems = gMailViewList.mailViewCount;</span>
<a href="#l21.171"></a><span id="l21.171" class="difflineminus">-  for (var i = 0; i &lt; numItems; ++i) {</span>
<a href="#l21.172"></a><span id="l21.172" class="difflineminus">-    var viewInfo = gMailViewList.getMailViewAt(i);</span>
<a href="#l21.173"></a><span id="l21.173" class="difflineminus">-    var menuitem = document.createXULElement(&quot;menuitem&quot;);</span>
<a href="#l21.174"></a><span id="l21.174" class="difflineminus">-    menuitem.setAttribute(&quot;label&quot;, viewInfo.prettyName);</span>
<a href="#l21.175"></a><span id="l21.175" class="difflineminus">-    menuitem.setAttribute(&quot;value&quot;, kViewItemFirstCustom + i);</span>
<a href="#l21.176"></a><span id="l21.176" class="difflineminus">-    menuitem.setAttribute(&quot;type&quot;, &quot;radio&quot;);</span>
<a href="#l21.177"></a><span id="l21.177" class="difflineminus">-    if (kViewItemFirstCustom + i == currentView)</span>
<a href="#l21.178"></a><span id="l21.178" class="difflineminus">-      menuitem.setAttribute(&quot;checked&quot;, true);</span>
<a href="#l21.179"></a><span id="l21.179" class="difflineminus">-    aMenupopup.appendChild(menuitem);</span>
<a href="#l21.180"></a><span id="l21.180" class="difflineplus">+  for (let i = 0; i &lt; numItems; ++i) {</span>
<a href="#l21.181"></a><span id="l21.181" class="difflineplus">+    const viewInfo = gMailViewList.getMailViewAt(i);</span>
<a href="#l21.182"></a><span id="l21.182" class="difflineplus">+    const item = document.createXULElement(elementName);</span>
<a href="#l21.183"></a><span id="l21.183" class="difflineplus">+</span>
<a href="#l21.184"></a><span id="l21.184" class="difflineplus">+    item.setAttribute(&quot;label&quot;, viewInfo.prettyName);</span>
<a href="#l21.185"></a><span id="l21.185" class="difflineplus">+    item.setAttribute(&quot;value&quot;, kViewItemFirstCustom + i);</span>
<a href="#l21.186"></a><span id="l21.186" class="difflineplus">+    item.setAttribute(&quot;type&quot;, &quot;radio&quot;);</span>
<a href="#l21.187"></a><span id="l21.187" class="difflineplus">+</span>
<a href="#l21.188"></a><span id="l21.188" class="difflineplus">+    if (classes) {</span>
<a href="#l21.189"></a><span id="l21.189" class="difflineplus">+      item.setAttribute(&quot;class&quot;, classes);</span>
<a href="#l21.190"></a><span id="l21.190" class="difflineplus">+    }</span>
<a href="#l21.191"></a><span id="l21.191" class="difflineplus">+    if (kViewItemFirstCustom + i == currentView) {</span>
<a href="#l21.192"></a><span id="l21.192" class="difflineplus">+      item.setAttribute(&quot;checked&quot;, true);</span>
<a href="#l21.193"></a><span id="l21.193" class="difflineplus">+    }</span>
<a href="#l21.194"></a><span id="l21.194" class="difflineplus">+    parent.appendChild(item);</span>
<a href="#l21.195"></a><span id="l21.195">   }</span>
<a href="#l21.196"></a><span id="l21.196"> }</span>
<a href="#l21.197"></a><span id="l21.197"> </span>
<a href="#l21.198"></a><span id="l21.198" class="difflineplus">+/**</span>
<a href="#l21.199"></a><span id="l21.199" class="difflineplus">+ * Refresh the contents of the tags popup menu/panel. For example, used for</span>
<a href="#l21.200"></a><span id="l21.200" class="difflineplus">+ * appmenu/View/Messages/Tags.</span>
<a href="#l21.201"></a><span id="l21.201" class="difflineplus">+ *</span>
<a href="#l21.202"></a><span id="l21.202" class="difflineplus">+ * @param {Element} parent        Parent element that will recieve the menu items.</span>
<a href="#l21.203"></a><span id="l21.203" class="difflineplus">+ * @param {string} [elementName]  Type of menu items to create (e.g. &quot;menuitem&quot;, &quot;toolbarbutton&quot;).</span>
<a href="#l21.204"></a><span id="l21.204" class="difflineplus">+ * @param {string} [classes]      Classes to set on the menu items.</span>
<a href="#l21.205"></a><span id="l21.205" class="difflineplus">+ */</span>
<a href="#l21.206"></a><span id="l21.206" class="difflineplus">+function RefreshTagsPopup(parent, elementName = &quot;menuitem&quot;, classes) {</span>
<a href="#l21.207"></a><span id="l21.207" class="difflineplus">+  // Remove all pre-existing menu items.</span>
<a href="#l21.208"></a><span id="l21.208" class="difflineplus">+  while (parent.hasChildNodes()) {</span>
<a href="#l21.209"></a><span id="l21.209" class="difflineplus">+    parent.lastChild.remove();</span>
<a href="#l21.210"></a><span id="l21.210" class="difflineplus">+  }</span>
<a href="#l21.211"></a><span id="l21.211"> </span>
<a href="#l21.212"></a><span id="l21.212" class="difflineminus">-function RefreshTagsPopup(aMenupopup) {</span>
<a href="#l21.213"></a><span id="l21.213" class="difflineminus">-  // remove all menuitems</span>
<a href="#l21.214"></a><span id="l21.214" class="difflineminus">-  while (aMenupopup.hasChildNodes())</span>
<a href="#l21.215"></a><span id="l21.215" class="difflineminus">-    aMenupopup.lastChild.remove();</span>
<a href="#l21.216"></a><span id="l21.216" class="difflineplus">+  // Create tag menu items.</span>
<a href="#l21.217"></a><span id="l21.217" class="difflineplus">+  const currentTagKey = gFolderDisplay.view.mailViewIndex == kViewItemTags ?</span>
<a href="#l21.218"></a><span id="l21.218" class="difflineplus">+    gFolderDisplay.view.mailViewData : &quot;&quot;;</span>
<a href="#l21.219"></a><span id="l21.219"> </span>
<a href="#l21.220"></a><span id="l21.220" class="difflineminus">-  // create tag menuitems</span>
<a href="#l21.221"></a><span id="l21.221" class="difflineminus">-  let currentTagKey = gFolderDisplay.view.mailViewIndex == kViewItemTags ?</span>
<a href="#l21.222"></a><span id="l21.222" class="difflineminus">-                        gFolderDisplay.view.mailViewData : &quot;&quot;;</span>
<a href="#l21.223"></a><span id="l21.223" class="difflineminus">-  let tagArray = MailServices.tags.getAllTags({});</span>
<a href="#l21.224"></a><span id="l21.224" class="difflineminus">-  for (let i = 0; i &lt; tagArray.length; ++i) {</span>
<a href="#l21.225"></a><span id="l21.225" class="difflineminus">-    let tagInfo = tagArray[i];</span>
<a href="#l21.226"></a><span id="l21.226" class="difflineminus">-    let menuitem = document.createXULElement(&quot;menuitem&quot;);</span>
<a href="#l21.227"></a><span id="l21.227" class="difflineminus">-    menuitem.setAttribute(&quot;label&quot;, tagInfo.tag);</span>
<a href="#l21.228"></a><span id="l21.228" class="difflineminus">-    menuitem.setAttribute(&quot;value&quot;, kViewTagMarker + tagInfo.key);</span>
<a href="#l21.229"></a><span id="l21.229" class="difflineminus">-    menuitem.setAttribute(&quot;type&quot;, &quot;radio&quot;);</span>
<a href="#l21.230"></a><span id="l21.230" class="difflineminus">-    if (tagInfo.key == currentTagKey)</span>
<a href="#l21.231"></a><span id="l21.231" class="difflineminus">-      menuitem.setAttribute(&quot;checked&quot;, true);</span>
<a href="#l21.232"></a><span id="l21.232" class="difflineminus">-    let color = tagInfo.color;</span>
<a href="#l21.233"></a><span id="l21.233" class="difflineminus">-    if (color)</span>
<a href="#l21.234"></a><span id="l21.234" class="difflineminus">-      menuitem.setAttribute(&quot;style&quot;, &quot;color: &quot; + color + &quot;;&quot;);</span>
<a href="#l21.235"></a><span id="l21.235" class="difflineminus">-    aMenupopup.appendChild(menuitem);</span>
<a href="#l21.236"></a><span id="l21.236" class="difflineminus">-  }</span>
<a href="#l21.237"></a><span id="l21.237" class="difflineplus">+  const tagArray = MailServices.tags.getAllTags({});</span>
<a href="#l21.238"></a><span id="l21.238" class="difflineplus">+</span>
<a href="#l21.239"></a><span id="l21.239" class="difflineplus">+  tagArray.forEach(tagInfo =&gt; {</span>
<a href="#l21.240"></a><span id="l21.240" class="difflineplus">+    const item = document.createXULElement(elementName);</span>
<a href="#l21.241"></a><span id="l21.241" class="difflineplus">+</span>
<a href="#l21.242"></a><span id="l21.242" class="difflineplus">+    item.setAttribute(&quot;label&quot;, tagInfo.tag);</span>
<a href="#l21.243"></a><span id="l21.243" class="difflineplus">+    item.setAttribute(&quot;value&quot;, kViewTagMarker + tagInfo.key);</span>
<a href="#l21.244"></a><span id="l21.244" class="difflineplus">+    item.setAttribute(&quot;type&quot;, &quot;radio&quot;);</span>
<a href="#l21.245"></a><span id="l21.245" class="difflineplus">+</span>
<a href="#l21.246"></a><span id="l21.246" class="difflineplus">+    if (tagInfo.key == currentTagKey) {</span>
<a href="#l21.247"></a><span id="l21.247" class="difflineplus">+      item.setAttribute(&quot;checked&quot;, true);</span>
<a href="#l21.248"></a><span id="l21.248" class="difflineplus">+    }</span>
<a href="#l21.249"></a><span id="l21.249" class="difflineplus">+    if (tagInfo.color) {</span>
<a href="#l21.250"></a><span id="l21.250" class="difflineplus">+      item.setAttribute(&quot;style&quot;, `color: ${tagInfo.color};`);</span>
<a href="#l21.251"></a><span id="l21.251" class="difflineplus">+    }</span>
<a href="#l21.252"></a><span id="l21.252" class="difflineplus">+    if (classes) {</span>
<a href="#l21.253"></a><span id="l21.253" class="difflineplus">+      item.setAttribute(&quot;class&quot;, classes);</span>
<a href="#l21.254"></a><span id="l21.254" class="difflineplus">+    }</span>
<a href="#l21.255"></a><span id="l21.255" class="difflineplus">+    parent.appendChild(item);</span>
<a href="#l21.256"></a><span id="l21.256" class="difflineplus">+  });</span>
<a href="#l21.257"></a><span id="l21.257"> }</span>
<a href="#l21.258"></a><span id="l21.258"> </span>
<a href="#l21.259"></a><span id="l21.259"> function ViewPickerOnLoad() {</span>
<a href="#l21.260"></a><span id="l21.260">   var viewPickerPopup = document.getElementById(&quot;viewPickerPopup&quot;);</span>
<a href="#l21.261"></a><span id="l21.261">   if (viewPickerPopup)</span>
<a href="#l21.262"></a><span id="l21.262">     RefreshAllViewPopups(viewPickerPopup, true);</span>
<a href="#l21.263"></a><span id="l21.263"> }</span>
<a href="#l21.264"></a><span id="l21.264"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mail/test/mozmill/composition/test-reply-multipart-charset.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mail/test/mozmill/composition/test-reply-multipart-charset.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -70,21 +70,20 @@ function subtest_replyEditAsNewForward_c</span>
<a href="#l22.4"></a><span id="l22.4">     // Only if the preview pane is on, we can check the following.</span>
<a href="#l22.5"></a><span id="l22.5">     assert_selected_and_displayed(mc, msg);</span>
<a href="#l22.6"></a><span id="l22.6">   }</span>
<a href="#l22.7"></a><span id="l22.7"> </span>
<a href="#l22.8"></a><span id="l22.8">   if (aOverride) {</span>
<a href="#l22.9"></a><span id="l22.9">     // Display the message using the override charset.</span>
<a href="#l22.10"></a><span id="l22.10">     // Use the app menu which is also available on Mac.</span>
<a href="#l22.11"></a><span id="l22.11">     mc.click(mc.eid(&quot;button-appmenu&quot;));</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-    mc.click_menus_in_sequence(mc.e(&quot;appmenu-popup&quot;), [</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineminus">-      {label: &quot;View&quot;},</span>
<a href="#l22.14"></a><span id="l22.14" class="difflineminus">-      {label: &quot;Text Encoding&quot;},</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineminus">-      {label: aOverride},</span>
<a href="#l22.16"></a><span id="l22.16" class="difflineminus">-    ]);</span>
<a href="#l22.17"></a><span id="l22.17" class="difflineplus">+    mc.click_appmenu_in_sequence(mc.e(&quot;appMenu-mainView&quot;),</span>
<a href="#l22.18"></a><span id="l22.18" class="difflineplus">+      [ {label: &quot;View&quot;},</span>
<a href="#l22.19"></a><span id="l22.19" class="difflineplus">+        {label: &quot;Text Encoding&quot;} ],</span>
<a href="#l22.20"></a><span id="l22.20" class="difflineplus">+      {label: aOverride});</span>
<a href="#l22.21"></a><span id="l22.21">   }</span>
<a href="#l22.22"></a><span id="l22.22"> </span>
<a href="#l22.23"></a><span id="l22.23">   let fwdWin;</span>
<a href="#l22.24"></a><span id="l22.24">   switch (aAction) {</span>
<a href="#l22.25"></a><span id="l22.25">   case 1: // Reply.</span>
<a href="#l22.26"></a><span id="l22.26">     fwdWin = open_compose_with_reply();</span>
<a href="#l22.27"></a><span id="l22.27">     break;</span>
<a href="#l22.28"></a><span id="l22.28">   case 2: // Edit as new.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mail/test/mozmill/content-tabs/test-addons-mgr.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mail/test/mozmill/content-tabs/test-addons-mgr.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -46,27 +46,29 @@ function test_open_addons_with_url() {</span>
<a href="#l23.4"></a><span id="l23.4">  * Bug 1462923</span>
<a href="#l23.5"></a><span id="l23.5">  * Check if the &quot;Tools-&gt;Add-on Options&quot; menu item works and shows our add-on.</span>
<a href="#l23.6"></a><span id="l23.6">  * This relies on the MozMill extension having optionsURL defined in install.rdf,</span>
<a href="#l23.7"></a><span id="l23.7">  * however simplistic the preferences XUL document may be.</span>
<a href="#l23.8"></a><span id="l23.8">  */</span>
<a href="#l23.9"></a><span id="l23.9"> function test_addon_prefs() {</span>
<a href="#l23.10"></a><span id="l23.10">   // Open Add-on Options.</span>
<a href="#l23.11"></a><span id="l23.11">   mc.click(mc.eid(&quot;button-appmenu&quot;));</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-  let popups = mc.click_menus_in_sequence(mc.e(&quot;appmenu-popup&quot;), [ { id: &quot;appmenu_addons&quot; } ], true);</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+  const subview = mc.click_appmenu_in_sequence(mc.e(&quot;appMenu-mainView&quot;),</span>
<a href="#l23.14"></a><span id="l23.14" class="difflineplus">+    [{id: &quot;appmenu_addons&quot;}]);</span>
<a href="#l23.15"></a><span id="l23.15"> </span>
<a href="#l23.16"></a><span id="l23.16" class="difflineminus">-  let foundAddon = false;</span>
<a href="#l23.17"></a><span id="l23.17">   plan_for_modal_dialog(&quot;mozmill-prefs&quot;, function(controller) {</span>
<a href="#l23.18"></a><span id="l23.18" class="difflineminus">-     // Add |mc.sleep(1000);| here to see the popup dialog.</span>
<a href="#l23.19"></a><span id="l23.19" class="difflineplus">+    // Add |mc.sleep(1000);| here to see the popup dialog.</span>
<a href="#l23.20"></a><span id="l23.20">     controller.window.close();</span>
<a href="#l23.21"></a><span id="l23.21">   });</span>
<a href="#l23.22"></a><span id="l23.22"> </span>
<a href="#l23.23"></a><span id="l23.23">   // MozMill add-on should be somewhere in the list. When found, click it.</span>
<a href="#l23.24"></a><span id="l23.24" class="difflineminus">-  for (let item of popups[popups.length - 1].children) {</span>
<a href="#l23.25"></a><span id="l23.25" class="difflineminus">-    if (item.tagName == &quot;menuitem&quot; &amp;&amp; item.getAttribute(&quot;collapsed&quot;) != &quot;true&quot; &amp;&amp;</span>
<a href="#l23.26"></a><span id="l23.26" class="difflineplus">+  let foundAddon = false;</span>
<a href="#l23.27"></a><span id="l23.27" class="difflineplus">+  for (let item of subview.children) {</span>
<a href="#l23.28"></a><span id="l23.28" class="difflineplus">+    if (item.tagName == &quot;toolbarbutton&quot; &amp;&amp;</span>
<a href="#l23.29"></a><span id="l23.29" class="difflineplus">+        item.getAttribute(&quot;collapsed&quot;) != &quot;true&quot; &amp;&amp;</span>
<a href="#l23.30"></a><span id="l23.30">         item.label == &quot;MozMill&quot;) {</span>
<a href="#l23.31"></a><span id="l23.31">       foundAddon = true;</span>
<a href="#l23.32"></a><span id="l23.32">       mc.click(new elib.Elem(item));</span>
<a href="#l23.33"></a><span id="l23.33">       break;</span>
<a href="#l23.34"></a><span id="l23.34">     }</span>
<a href="#l23.35"></a><span id="l23.35">   }</span>
<a href="#l23.36"></a><span id="l23.36">   assert_true(foundAddon);</span>
<a href="#l23.37"></a><span id="l23.37"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mail/test/mozmill/folder-display/test-watch-ignore-thread.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mail/test/mozmill/folder-display/test-watch-ignore-thread.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -28,27 +28,24 @@ function setupModule(module) {</span>
<a href="#l24.4"></a><span id="l24.4"> </span>
<a href="#l24.5"></a><span id="l24.5">   be_in_folder(folder);</span>
<a href="#l24.6"></a><span id="l24.6">   make_display_threaded();</span>
<a href="#l24.7"></a><span id="l24.7">   expand_all_threads();</span>
<a href="#l24.8"></a><span id="l24.8"> }</span>
<a href="#l24.9"></a><span id="l24.9"> </span>
<a href="#l24.10"></a><span id="l24.10"> /**</span>
<a href="#l24.11"></a><span id="l24.11">  * Click one of the menu items in the appmenu View | Messages menu.</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">- * @param aMenuId the id of the menu item to click.</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+ * @param {string} menuId  The id of the menu item to click.</span>
<a href="#l24.14"></a><span id="l24.14">  */</span>
<a href="#l24.15"></a><span id="l24.15" class="difflineminus">-function clickViewMessagesItem(aMenuId) {</span>
<a href="#l24.16"></a><span id="l24.16" class="difflineplus">+function clickViewMessagesItem(menuId) {</span>
<a href="#l24.17"></a><span id="l24.17">   mc.click(mc.eid(&quot;button-appmenu&quot;));</span>
<a href="#l24.18"></a><span id="l24.18" class="difflineminus">-  mc.click_menus_in_sequence(mc.e(&quot;appmenu-popup&quot;),</span>
<a href="#l24.19"></a><span id="l24.19" class="difflineminus">-    [</span>
<a href="#l24.20"></a><span id="l24.20" class="difflineminus">-      {id: &quot;appmenu_View&quot;},</span>
<a href="#l24.21"></a><span id="l24.21" class="difflineminus">-      {id: &quot;appmenu_viewMessagesMenu&quot;},</span>
<a href="#l24.22"></a><span id="l24.22" class="difflineminus">-      {id: aMenuId},</span>
<a href="#l24.23"></a><span id="l24.23" class="difflineminus">-    ]</span>
<a href="#l24.24"></a><span id="l24.24" class="difflineminus">-  );</span>
<a href="#l24.25"></a><span id="l24.25" class="difflineplus">+  mc.click_appmenu_in_sequence(mc.e(&quot;appMenu-mainView&quot;),</span>
<a href="#l24.26"></a><span id="l24.26" class="difflineplus">+    [ {id: &quot;appmenu_View&quot;},</span>
<a href="#l24.27"></a><span id="l24.27" class="difflineplus">+      {id: &quot;appmenu_viewMessagesMenu&quot;} ],</span>
<a href="#l24.28"></a><span id="l24.28" class="difflineplus">+    {id: menuId});</span>
<a href="#l24.29"></a><span id="l24.29"> }</span>
<a href="#l24.30"></a><span id="l24.30"> </span>
<a href="#l24.31"></a><span id="l24.31"> /**</span>
<a href="#l24.32"></a><span id="l24.32">  * Test that Ignore Thread works as expected.</span>
<a href="#l24.33"></a><span id="l24.33">  */</span>
<a href="#l24.34"></a><span id="l24.34"> function test_ignore_thread() {</span>
<a href="#l24.35"></a><span id="l24.35">   let t1root = thread1.getMsgHdr(0);</span>
<a href="#l24.36"></a><span id="l24.36"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mail/test/mozmill/folder-pane/test-folder-pane-consumers.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mail/test/mozmill/folder-pane/test-folder-pane-consumers.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -28,19 +28,20 @@ function setupModule(module) {</span>
<a href="#l25.4"></a><span id="l25.4">   let server = setupLocalServer(NNTP_PORT);</span>
<a href="#l25.5"></a><span id="l25.5">   nntpAccount = MailServices.accounts.FindAccountForServer(server);</span>
<a href="#l25.6"></a><span id="l25.6"> }</span>
<a href="#l25.7"></a><span id="l25.7"> </span>
<a href="#l25.8"></a><span id="l25.8"> function test_virtual_folder_selection_tree() {</span>
<a href="#l25.9"></a><span id="l25.9">   plan_for_modal_dialog(&quot;mailnews:virtualFolderProperties&quot;,</span>
<a href="#l25.10"></a><span id="l25.10">                         subtest_create_virtual_folder);</span>
<a href="#l25.11"></a><span id="l25.11">   mc.click(mc.eid(&quot;button-appmenu&quot;));</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-  mc.click_menus_in_sequence(mc.e(&quot;appmenu-popup&quot;),</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineminus">-                             [ { id: &quot;appmenu_newMessage&quot; },</span>
<a href="#l25.14"></a><span id="l25.14" class="difflineminus">-                               { id: &quot;appmenu_newVirtualFolder&quot; } ]);</span>
<a href="#l25.15"></a><span id="l25.15" class="difflineplus">+  mc.click_appmenu_in_sequence(mc.e(&quot;appMenu-mainView&quot;),</span>
<a href="#l25.16"></a><span id="l25.16" class="difflineplus">+    [{id: &quot;appmenu_new&quot;}],</span>
<a href="#l25.17"></a><span id="l25.17" class="difflineplus">+    {id: &quot;appmenu_newVirtualFolder&quot;});</span>
<a href="#l25.18"></a><span id="l25.18" class="difflineplus">+</span>
<a href="#l25.19"></a><span id="l25.19">   wait_for_modal_dialog(&quot;mailnews:virtualFolderProperties&quot;);</span>
<a href="#l25.20"></a><span id="l25.20"> }</span>
<a href="#l25.21"></a><span id="l25.21"> </span>
<a href="#l25.22"></a><span id="l25.22"> function subtest_create_virtual_folder(vfc) {</span>
<a href="#l25.23"></a><span id="l25.23">   // Open the folder chooser.</span>
<a href="#l25.24"></a><span id="l25.24">   plan_for_modal_dialog(&quot;mailnews:virtualFolderList&quot;,</span>
<a href="#l25.25"></a><span id="l25.25">                         subtest_check_virtual_folder_list);</span>
<a href="#l25.26"></a><span id="l25.26">   vfc.click(vfc.eid(&quot;folderListPicker&quot;));</span>
<a href="#l25.27"></a><span id="l25.27" class="difflineat">@@ -56,23 +57,24 @@ function subtest_create_virtual_folder(v</span>
<a href="#l25.28"></a><span id="l25.28"> function subtest_check_virtual_folder_list(listc) {</span>
<a href="#l25.29"></a><span id="l25.29">   let tree = listc.e(&quot;folderPickerTree&quot;);</span>
<a href="#l25.30"></a><span id="l25.30">   // We should see the folders from the 2 base local accounts here.</span>
<a href="#l25.31"></a><span id="l25.31">   assert_true(tree.view.rowCount &gt; 0, &quot;Folder tree was empty in virtual folder selection!&quot;);</span>
<a href="#l25.32"></a><span id="l25.32">   listc.window.document.documentElement.cancelDialog();</span>
<a href="#l25.33"></a><span id="l25.33"> }</span>
<a href="#l25.34"></a><span id="l25.34"> </span>
<a href="#l25.35"></a><span id="l25.35"> function test_offline_sync_folder_selection_tree() {</span>
<a href="#l25.36"></a><span id="l25.36" class="difflineminus">-  plan_for_modal_dialog(&quot;mailnews:synchronizeOffline&quot;,</span>
<a href="#l25.37"></a><span id="l25.37" class="difflineminus">-                        subtest_offline_sync);</span>
<a href="#l25.38"></a><span id="l25.38" class="difflineplus">+  plan_for_modal_dialog(&quot;mailnews:synchronizeOffline&quot;, subtest_offline_sync);</span>
<a href="#l25.39"></a><span id="l25.39" class="difflineplus">+</span>
<a href="#l25.40"></a><span id="l25.40">   mc.click(mc.eid(&quot;button-appmenu&quot;));</span>
<a href="#l25.41"></a><span id="l25.41" class="difflineminus">-  mc.click_menus_in_sequence(mc.e(&quot;appmenu-popup&quot;),</span>
<a href="#l25.42"></a><span id="l25.42" class="difflineminus">-                             [ { id: &quot;appmenu_File&quot; },</span>
<a href="#l25.43"></a><span id="l25.43" class="difflineminus">-                               { id: &quot;appmenu_offline&quot; },</span>
<a href="#l25.44"></a><span id="l25.44" class="difflineminus">-                               { id: &quot;appmenu_synchronizeOffline&quot; } ]);</span>
<a href="#l25.45"></a><span id="l25.45" class="difflineplus">+  mc.click_appmenu_in_sequence(mc.e(&quot;appMenu-mainView&quot;),</span>
<a href="#l25.46"></a><span id="l25.46" class="difflineplus">+    [ {id: &quot;appmenu_File&quot;},</span>
<a href="#l25.47"></a><span id="l25.47" class="difflineplus">+      {id: &quot;appmenu_offline&quot;} ],</span>
<a href="#l25.48"></a><span id="l25.48" class="difflineplus">+    {id: &quot;appmenu_synchronizeOffline&quot;});</span>
<a href="#l25.49"></a><span id="l25.49" class="difflineplus">+</span>
<a href="#l25.50"></a><span id="l25.50">   wait_for_modal_dialog(&quot;mailnews:synchronizeOffline&quot;);</span>
<a href="#l25.51"></a><span id="l25.51"> }</span>
<a href="#l25.52"></a><span id="l25.52"> </span>
<a href="#l25.53"></a><span id="l25.53"> function subtest_offline_sync(osc) {</span>
<a href="#l25.54"></a><span id="l25.54">   // Open the folder chooser.</span>
<a href="#l25.55"></a><span id="l25.55">   plan_for_modal_dialog(&quot;mailnews:selectOffline&quot;,</span>
<a href="#l25.56"></a><span id="l25.56">                         subtest_check_offline_folder_list);</span>
<a href="#l25.57"></a><span id="l25.57">   osc.click(osc.eid(&quot;select&quot;));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mail/test/mozmill/folder-tree-modes/test-mode-switching.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mail/test/mozmill/folder-tree-modes/test-mode-switching.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -23,18 +23,18 @@ var unreadFolder;</span>
<a href="#l26.4"></a><span id="l26.4"> var favoriteFolder;</span>
<a href="#l26.5"></a><span id="l26.5"> var toggle_menu;</span>
<a href="#l26.6"></a><span id="l26.6"> var toggle_appmenu;</span>
<a href="#l26.7"></a><span id="l26.7"> var tree;</span>
<a href="#l26.8"></a><span id="l26.8"> var modeList_menu;</span>
<a href="#l26.9"></a><span id="l26.9"> var modeList_appmenu;</span>
<a href="#l26.10"></a><span id="l26.10"> var view_menu;</span>
<a href="#l26.11"></a><span id="l26.11"> var view_menupopup;</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-var appmenu;</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineminus">-var appmenu_popup;</span>
<a href="#l26.14"></a><span id="l26.14" class="difflineplus">+var appmenu_button;</span>
<a href="#l26.15"></a><span id="l26.15" class="difflineplus">+var appmenu_mainView;</span>
<a href="#l26.16"></a><span id="l26.16"> var menu_state;</span>
<a href="#l26.17"></a><span id="l26.17"> </span>
<a href="#l26.18"></a><span id="l26.18"> function setupModule(module) {</span>
<a href="#l26.19"></a><span id="l26.19">   for (let lib of MODULE_REQUIRES) {</span>
<a href="#l26.20"></a><span id="l26.20">     collector.getModule(lib).installInto(module);</span>
<a href="#l26.21"></a><span id="l26.21">   }</span>
<a href="#l26.22"></a><span id="l26.22"> </span>
<a href="#l26.23"></a><span id="l26.23">   rootFolder = inboxFolder.server.rootFolder;</span>
<a href="#l26.24"></a><span id="l26.24" class="difflineat">@@ -48,22 +48,22 @@ function setupModule(module) {</span>
<a href="#l26.25"></a><span id="l26.25"> </span>
<a href="#l26.26"></a><span id="l26.26">   make_new_sets_in_folder(unreadFolder, [{count: 1}]);</span>
<a href="#l26.27"></a><span id="l26.27">   favoriteFolder.setFlag(Ci.nsMsgFolderFlags.Favorite);</span>
<a href="#l26.28"></a><span id="l26.28"> </span>
<a href="#l26.29"></a><span id="l26.29">   toggle_menu = mc.e(&quot;menu_compactFolderView&quot;);</span>
<a href="#l26.30"></a><span id="l26.30">   toggle_appmenu = mc.e(&quot;appmenu_compactFolderView&quot;);</span>
<a href="#l26.31"></a><span id="l26.31"> </span>
<a href="#l26.32"></a><span id="l26.32">   modeList_menu = mc.e(&quot;menu_FolderViewsPopup&quot;);</span>
<a href="#l26.33"></a><span id="l26.33" class="difflineminus">-  modeList_appmenu = mc.e(&quot;appmenu_FolderViewsPopup&quot;);</span>
<a href="#l26.34"></a><span id="l26.34" class="difflineplus">+  modeList_appmenu = mc.e(&quot;appMenu-foldersView&quot;);</span>
<a href="#l26.35"></a><span id="l26.35"> </span>
<a href="#l26.36"></a><span id="l26.36">   view_menu = mc.eid(&quot;menu_View&quot;);</span>
<a href="#l26.37"></a><span id="l26.37">   view_menupopup = mc.e(&quot;menu_View_Popup&quot;);</span>
<a href="#l26.38"></a><span id="l26.38" class="difflineminus">-  appmenu = mc.eid(&quot;button-appmenu&quot;);</span>
<a href="#l26.39"></a><span id="l26.39" class="difflineminus">-  appmenu_popup = mc.e(&quot;appmenu-popup&quot;);</span>
<a href="#l26.40"></a><span id="l26.40" class="difflineplus">+  appmenu_button = mc.eid(&quot;button-appmenu&quot;);</span>
<a href="#l26.41"></a><span id="l26.41" class="difflineplus">+  appmenu_mainView = mc.e(&quot;appMenu-mainView&quot;);</span>
<a href="#l26.42"></a><span id="l26.42"> </span>
<a href="#l26.43"></a><span id="l26.43">   tree = mc.folderTreeView;</span>
<a href="#l26.44"></a><span id="l26.44"> </span>
<a href="#l26.45"></a><span id="l26.45">   select_no_folders();</span>
<a href="#l26.46"></a><span id="l26.46">   // Main menu is needed for this whole test file.</span>
<a href="#l26.47"></a><span id="l26.47">   menu_state = toggle_main_menu(true);</span>
<a href="#l26.48"></a><span id="l26.48"> }</span>
<a href="#l26.49"></a><span id="l26.49"> </span>
<a href="#l26.50"></a><span id="l26.50" class="difflineat">@@ -86,40 +86,44 @@ function assert_compact_state(aChecked, </span>
<a href="#l26.51"></a><span id="l26.51">  * Check whether the expected folder mode is selected in menus and internally.</span>
<a href="#l26.52"></a><span id="l26.52">  *</span>
<a href="#l26.53"></a><span id="l26.53">  * @param aMode  The name of the expected mode.</span>
<a href="#l26.54"></a><span id="l26.54">  */</span>
<a href="#l26.55"></a><span id="l26.55"> function assert_mode_selected(aMode) {</span>
<a href="#l26.56"></a><span id="l26.56">   assert_equals(tree.mode, aMode);</span>
<a href="#l26.57"></a><span id="l26.57">   let baseMode = tree.baseMode();</span>
<a href="#l26.58"></a><span id="l26.58">   assert_compact_state(baseMode != tree.mode);</span>
<a href="#l26.59"></a><span id="l26.59" class="difflineminus">-  let popuplist;</span>
<a href="#l26.60"></a><span id="l26.60">   // We need to open the menu because only then the right mode is set in them.</span>
<a href="#l26.61"></a><span id="l26.61">   if (!mc.mozmillModule.isMac) {</span>
<a href="#l26.62"></a><span id="l26.62">     // On OS X the main menu seems not accessible for clicking from mozmill.</span>
<a href="#l26.63"></a><span id="l26.63">     mc.click(view_menu);</span>
<a href="#l26.64"></a><span id="l26.64" class="difflineminus">-    popuplist = mc.click_menus_in_sequence(view_menupopup, [ { id: modeList_menu.parentNode.id } ], true);</span>
<a href="#l26.65"></a><span id="l26.65" class="difflineplus">+    let popuplist = mc.click_menus_in_sequence(view_menupopup, [ { id: modeList_menu.parentNode.id } ], true);</span>
<a href="#l26.66"></a><span id="l26.66">     assert_true(modeList_menu.querySelector('[value=&quot;' + baseMode + '&quot;]').hasAttribute(&quot;checked&quot;));</span>
<a href="#l26.67"></a><span id="l26.67">     mc.close_popup_sequence(popuplist);</span>
<a href="#l26.68"></a><span id="l26.68">   }</span>
<a href="#l26.69"></a><span id="l26.69" class="difflineminus">-  mc.click(appmenu);</span>
<a href="#l26.70"></a><span id="l26.70" class="difflineminus">-  popuplist = mc.click_menus_in_sequence(appmenu_popup, [ { id: modeList_appmenu.parentNode.id } ], true);</span>
<a href="#l26.71"></a><span id="l26.71" class="difflineminus">-  assert_true(modeList_menu.querySelector('[value=&quot;' + baseMode + '&quot;]').hasAttribute(&quot;checked&quot;));</span>
<a href="#l26.72"></a><span id="l26.72" class="difflineminus">-  mc.close_popup_sequence(popuplist);</span>
<a href="#l26.73"></a><span id="l26.73" class="difflineplus">+  mc.click(appmenu_button);</span>
<a href="#l26.74"></a><span id="l26.74" class="difflineplus">+  mc.click_appmenu_in_sequence(appmenu_mainView,</span>
<a href="#l26.75"></a><span id="l26.75" class="difflineplus">+    [ {id: &quot;appmenu_View&quot;},</span>
<a href="#l26.76"></a><span id="l26.76" class="difflineplus">+      {id: &quot;appmenu_FolderViews&quot;} ]);</span>
<a href="#l26.77"></a><span id="l26.77" class="difflineplus">+  assert_true(modeList_appmenu.querySelector('[value=&quot;' + baseMode + '&quot;]').hasAttribute(&quot;checked&quot;));</span>
<a href="#l26.78"></a><span id="l26.78" class="difflineplus">+  // Close the appmenu by clicking the appmenu button again.</span>
<a href="#l26.79"></a><span id="l26.79" class="difflineplus">+  mc.click(appmenu_button);</span>
<a href="#l26.80"></a><span id="l26.80"> }</span>
<a href="#l26.81"></a><span id="l26.81"> </span>
<a href="#l26.82"></a><span id="l26.82"> /**</span>
<a href="#l26.83"></a><span id="l26.83">  * Toggle the folder mode by clicking in the menu.</span>
<a href="#l26.84"></a><span id="l26.84">  *</span>
<a href="#l26.85"></a><span id="l26.85" class="difflineminus">- * @param aMode  The base name of the mode to select.</span>
<a href="#l26.86"></a><span id="l26.86" class="difflineplus">+ * @param mode  The base name of the mode to select.</span>
<a href="#l26.87"></a><span id="l26.87">  */</span>
<a href="#l26.88"></a><span id="l26.88" class="difflineminus">-function select_mode_in_menu(aMode) {</span>
<a href="#l26.89"></a><span id="l26.89" class="difflineminus">-  mc.click(appmenu);</span>
<a href="#l26.90"></a><span id="l26.90" class="difflineminus">-  mc.click_menus_in_sequence(appmenu_popup, [ { id: modeList_appmenu.parentNode.id },</span>
<a href="#l26.91"></a><span id="l26.91" class="difflineminus">-                                              { value: aMode } ]);</span>
<a href="#l26.92"></a><span id="l26.92" class="difflineplus">+function select_mode_in_menu(mode) {</span>
<a href="#l26.93"></a><span id="l26.93" class="difflineplus">+  mc.click(appmenu_button);</span>
<a href="#l26.94"></a><span id="l26.94" class="difflineplus">+  mc.click_appmenu_in_sequence(appmenu_mainView,</span>
<a href="#l26.95"></a><span id="l26.95" class="difflineplus">+    [ {id: &quot;appmenu_View&quot;},</span>
<a href="#l26.96"></a><span id="l26.96" class="difflineplus">+      {id: &quot;appmenu_FolderViews&quot;} ],</span>
<a href="#l26.97"></a><span id="l26.97" class="difflineplus">+    {value: mode});</span>
<a href="#l26.98"></a><span id="l26.98"> }</span>
<a href="#l26.99"></a><span id="l26.99"> </span>
<a href="#l26.100"></a><span id="l26.100"> /**</span>
<a href="#l26.101"></a><span id="l26.101">  * Toggle the Compact view option by clicking in the menu.</span>
<a href="#l26.102"></a><span id="l26.102">  */</span>
<a href="#l26.103"></a><span id="l26.103"> function toggle_compact_in_menu() {</span>
<a href="#l26.104"></a><span id="l26.104">   // For some reason, clicking the menuitem does not work by any means,</span>
<a href="#l26.105"></a><span id="l26.105">   // therefore we just simulate it here.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mail/test/mozmill/folder-widget/test-message-filters.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mail/test/mozmill/folder-widget/test-message-filters.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -86,25 +86,27 @@ function test_message_filter_shows_newsg</span>
<a href="#l27.4"></a><span id="l27.4"> function test_customize_toolbar_doesnt_double_get_mail_menu() {</span>
<a href="#l27.5"></a><span id="l27.5">   be_in_folder(folderA);</span>
<a href="#l27.6"></a><span id="l27.6"> </span>
<a href="#l27.7"></a><span id="l27.7">   /**</span>
<a href="#l27.8"></a><span id="l27.8">    * Get the getAllNewMessages menu and check the number of items.</span>
<a href="#l27.9"></a><span id="l27.9">    */</span>
<a href="#l27.10"></a><span id="l27.10">   function check_getAllNewMsgMenu() {</span>
<a href="#l27.11"></a><span id="l27.11">     wait_for_window_focused(mc.window);</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-    mc.click(mc.eid(&quot;button-appmenu&quot;), 5, 5);</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineminus">-    let popups = mc.click_menus_in_sequence(mc.e(&quot;appmenu-popup&quot;),</span>
<a href="#l27.14"></a><span id="l27.14" class="difflineminus">-                                            [ { id: &quot;appmenu_File&quot; },</span>
<a href="#l27.15"></a><span id="l27.15" class="difflineminus">-                                              { id: &quot;appmenu_getNewMsgFor&quot; } ], true);</span>
<a href="#l27.16"></a><span id="l27.16"> </span>
<a href="#l27.17"></a><span id="l27.17" class="difflineminus">-    assert_equals(popups[popups.length - 1].children.length, 5,</span>
<a href="#l27.18"></a><span id="l27.18" class="difflineplus">+    mc.click(mc.eid(&quot;button-appmenu&quot;));</span>
<a href="#l27.19"></a><span id="l27.19" class="difflineplus">+    const subview = mc.click_appmenu_in_sequence(mc.e(&quot;appMenu-mainView&quot;),</span>
<a href="#l27.20"></a><span id="l27.20" class="difflineplus">+      [ {id: &quot;appmenu_File&quot;},</span>
<a href="#l27.21"></a><span id="l27.21" class="difflineplus">+        {id: &quot;appmenu_getNewMsgFor&quot;} ]);</span>
<a href="#l27.22"></a><span id="l27.22" class="difflineplus">+</span>
<a href="#l27.23"></a><span id="l27.23" class="difflineplus">+    assert_equals(subview.children.length, 5,</span>
<a href="#l27.24"></a><span id="l27.24">                   &quot;Incorrect number of items for GetNewMessages before customization&quot;);</span>
<a href="#l27.25"></a><span id="l27.25"> </span>
<a href="#l27.26"></a><span id="l27.26" class="difflineminus">-    mc.close_popup_sequence(popups);</span>
<a href="#l27.27"></a><span id="l27.27" class="difflineplus">+    // TODO appmenu - Now click somewhere that causes the appmenu to close.</span>
<a href="#l27.28"></a><span id="l27.28" class="difflineplus">+    // (Once this test is no longer skipped, see below.)</span>
<a href="#l27.29"></a><span id="l27.29">   }</span>
<a href="#l27.30"></a><span id="l27.30"> </span>
<a href="#l27.31"></a><span id="l27.31">   check_getAllNewMsgMenu();</span>
<a href="#l27.32"></a><span id="l27.32"> </span>
<a href="#l27.33"></a><span id="l27.33">   plan_for_new_window(&quot;mailnews:customizeToolbar&quot;);</span>
<a href="#l27.34"></a><span id="l27.34">   // Open the customization dialog.</span>
<a href="#l27.35"></a><span id="l27.35">   mc.rightClick(mc.eid(&quot;mail-bar3&quot;));</span>
<a href="#l27.36"></a><span id="l27.36">   mc.click(mc.eid(&quot;CustomizeMailToolbar&quot;));</span>
<a href="#l27.37"></a><span id="l27.37" class="difflineat">@@ -114,16 +116,20 @@ function test_customize_toolbar_doesnt_d</span>
<a href="#l27.38"></a><span id="l27.38">   wait_for_window_focused(customc.window);</span>
<a href="#l27.39"></a><span id="l27.39">   plan_for_window_close(customc);</span>
<a href="#l27.40"></a><span id="l27.40">   customc.click(customc.eid(&quot;donebutton&quot;));</span>
<a href="#l27.41"></a><span id="l27.41">   wait_for_window_close();</span>
<a href="#l27.42"></a><span id="l27.42"> </span>
<a href="#l27.43"></a><span id="l27.43">   check_getAllNewMsgMenu();</span>
<a href="#l27.44"></a><span id="l27.44"> }</span>
<a href="#l27.45"></a><span id="l27.45"> test_customize_toolbar_doesnt_double_get_mail_menu.EXCLUDED_PLATFORMS = [&quot;darwin&quot;];</span>
<a href="#l27.46"></a><span id="l27.46" class="difflineplus">+// TODO appmenu - Skipped because it depends on the folder-menupopup code being</span>
<a href="#l27.47"></a><span id="l27.47" class="difflineplus">+// adapted for use in the appmenu.  Namely the call to click_appmenu_in_sequence</span>
<a href="#l27.48"></a><span id="l27.48" class="difflineplus">+// won't work because the UI it expects will not be there yet.</span>
<a href="#l27.49"></a><span id="l27.49" class="difflineplus">+test_customize_toolbar_doesnt_double_get_mail_menu.__force_skip__ = true;</span>
<a href="#l27.50"></a><span id="l27.50"> </span>
<a href="#l27.51"></a><span id="l27.51"> /* A helper function that opens up the new filter dialog (assuming that the</span>
<a href="#l27.52"></a><span id="l27.52">  * main filters dialog is already open), creates a simple filter, and then</span>
<a href="#l27.53"></a><span id="l27.53">  * closes the dialog.</span>
<a href="#l27.54"></a><span id="l27.54">  */</span>
<a href="#l27.55"></a><span id="l27.55"> function create_simple_filter() {</span>
<a href="#l27.56"></a><span id="l27.56">   // Open the &quot;Tools  Message Filters&quot; window,</span>
<a href="#l27.57"></a><span id="l27.57">   // a.k.a. &quot;tasksMenu  filtersCmd&quot;.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-window-helpers.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-window-helpers.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -949,16 +949,47 @@ var AugmentEverybodyWith = {</span>
<a href="#l28.4"></a><span id="l28.4">     defer_click: function _augmented_defer_click(aWhatToClick) {</span>
<a href="#l28.5"></a><span id="l28.5">       let dis = this;</span>
<a href="#l28.6"></a><span id="l28.6">       dis.window.setTimeout(function() {</span>
<a href="#l28.7"></a><span id="l28.7">                               dis.click(aWhatToClick);</span>
<a href="#l28.8"></a><span id="l28.8">                             }, 1000);</span>
<a href="#l28.9"></a><span id="l28.9">     },</span>
<a href="#l28.10"></a><span id="l28.10"> </span>
<a href="#l28.11"></a><span id="l28.11">     /**</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineplus">+     * Check if a node's attributes match all those given in actionObj.</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+     * Nodes that are obvious containers are skipped, and their children</span>
<a href="#l28.14"></a><span id="l28.14" class="difflineplus">+     * will be used to recursively find a match instead.</span>
<a href="#l28.15"></a><span id="l28.15" class="difflineplus">+     *</span>
<a href="#l28.16"></a><span id="l28.16" class="difflineplus">+     * @param {Element} node      The node to check.</span>
<a href="#l28.17"></a><span id="l28.17" class="difflineplus">+     * @param {Object} actionObj  Contains attribute-value pairs to match.</span>
<a href="#l28.18"></a><span id="l28.18" class="difflineplus">+     * @return {Element|null}     The matched node or null if no match.</span>
<a href="#l28.19"></a><span id="l28.19" class="difflineplus">+     */</span>
<a href="#l28.20"></a><span id="l28.20" class="difflineplus">+    findMatch(node, actionObj) {</span>
<a href="#l28.21"></a><span id="l28.21" class="difflineplus">+      // Ignore some elements and just use their children instead.</span>
<a href="#l28.22"></a><span id="l28.22" class="difflineplus">+      if (node.localName == &quot;hbox&quot; || node.localName == &quot;vbox&quot;) {</span>
<a href="#l28.23"></a><span id="l28.23" class="difflineplus">+        for (let i = 0; i &lt; node.children.length; i++) {</span>
<a href="#l28.24"></a><span id="l28.24" class="difflineplus">+          let childMatch = this.findMatch(node.children[i]);</span>
<a href="#l28.25"></a><span id="l28.25" class="difflineplus">+          if (childMatch)</span>
<a href="#l28.26"></a><span id="l28.26" class="difflineplus">+            return childMatch;</span>
<a href="#l28.27"></a><span id="l28.27" class="difflineplus">+        }</span>
<a href="#l28.28"></a><span id="l28.28" class="difflineplus">+        return null;</span>
<a href="#l28.29"></a><span id="l28.29" class="difflineplus">+      }</span>
<a href="#l28.30"></a><span id="l28.30" class="difflineplus">+</span>
<a href="#l28.31"></a><span id="l28.31" class="difflineplus">+      let matchedAll = true;</span>
<a href="#l28.32"></a><span id="l28.32" class="difflineplus">+      for (let name in actionObj) {</span>
<a href="#l28.33"></a><span id="l28.33" class="difflineplus">+        let value = actionObj[name];</span>
<a href="#l28.34"></a><span id="l28.34" class="difflineplus">+        if (!node.hasAttribute(name) || node.getAttribute(name) != value) {</span>
<a href="#l28.35"></a><span id="l28.35" class="difflineplus">+          matchedAll = false;</span>
<a href="#l28.36"></a><span id="l28.36" class="difflineplus">+          break;</span>
<a href="#l28.37"></a><span id="l28.37" class="difflineplus">+        }</span>
<a href="#l28.38"></a><span id="l28.38" class="difflineplus">+      }</span>
<a href="#l28.39"></a><span id="l28.39" class="difflineplus">+      return matchedAll ? node : null;</span>
<a href="#l28.40"></a><span id="l28.40" class="difflineplus">+    },</span>
<a href="#l28.41"></a><span id="l28.41" class="difflineplus">+</span>
<a href="#l28.42"></a><span id="l28.42" class="difflineplus">+    /**</span>
<a href="#l28.43"></a><span id="l28.43">      * Dynamically-built/XBL-defined menus can be hard to work with, this makes it</span>
<a href="#l28.44"></a><span id="l28.44">      *  easier.</span>
<a href="#l28.45"></a><span id="l28.45">      *</span>
<a href="#l28.46"></a><span id="l28.46">      * @param aRootPopup  The base popup. The caller is expected to activate it</span>
<a href="#l28.47"></a><span id="l28.47">      *     (by clicking/rightclicking the right widget). We will only wait for it</span>
<a href="#l28.48"></a><span id="l28.48">      *     to open if it is in the process.</span>
<a href="#l28.49"></a><span id="l28.49">      * @param aActions  An array of objects where each object has attributes</span>
<a href="#l28.50"></a><span id="l28.50">      *     with a value defined. We pick the menu item whose DOM node matches</span>
<a href="#l28.51"></a><span id="l28.51" class="difflineat">@@ -976,76 +1007,35 @@ var AugmentEverybodyWith = {</span>
<a href="#l28.52"></a><span id="l28.52">                              &quot;, state=&quot; + aRootPopup.state));</span>
<a href="#l28.53"></a><span id="l28.53">       }</span>
<a href="#l28.54"></a><span id="l28.54">       // These popups sadly do not close themselves, so we need to keep track</span>
<a href="#l28.55"></a><span id="l28.55">       // of them so we can make sure they end up closed.</span>
<a href="#l28.56"></a><span id="l28.56">       let closeStack = [aRootPopup];</span>
<a href="#l28.57"></a><span id="l28.57"> </span>
<a href="#l28.58"></a><span id="l28.58">       let curPopup = aRootPopup;</span>
<a href="#l28.59"></a><span id="l28.59">       for (let [iAction, actionObj] of aActions.entries()) {</span>
<a href="#l28.60"></a><span id="l28.60" class="difflineminus">-        /**</span>
<a href="#l28.61"></a><span id="l28.61" class="difflineminus">-         * Check if aNode attributes match all those given in actionObj.</span>
<a href="#l28.62"></a><span id="l28.62" class="difflineminus">-         * Nodes that are obvious containers are skipped, and their children</span>
<a href="#l28.63"></a><span id="l28.63" class="difflineminus">-         * will be used to recursively find a match instead.</span>
<a href="#l28.64"></a><span id="l28.64" class="difflineminus">-         */</span>
<a href="#l28.65"></a><span id="l28.65" class="difflineminus">-        let findMatch = function(aNode) {</span>
<a href="#l28.66"></a><span id="l28.66" class="difflineminus">-          // Ignore some elements and just use their children instead.</span>
<a href="#l28.67"></a><span id="l28.67" class="difflineminus">-          if (aNode.localName == &quot;hbox&quot; || aNode.localName == &quot;vbox&quot;) {</span>
<a href="#l28.68"></a><span id="l28.68" class="difflineminus">-            for (let i = 0; i &lt; aNode.children.length; i++) {</span>
<a href="#l28.69"></a><span id="l28.69" class="difflineminus">-              let childMatch = findMatch(aNode.children[i]);</span>
<a href="#l28.70"></a><span id="l28.70" class="difflineminus">-              if (childMatch)</span>
<a href="#l28.71"></a><span id="l28.71" class="difflineminus">-                return childMatch;</span>
<a href="#l28.72"></a><span id="l28.72" class="difflineminus">-            }</span>
<a href="#l28.73"></a><span id="l28.73" class="difflineminus">-            return null;</span>
<a href="#l28.74"></a><span id="l28.74" class="difflineminus">-          }</span>
<a href="#l28.75"></a><span id="l28.75" class="difflineminus">-</span>
<a href="#l28.76"></a><span id="l28.76" class="difflineminus">-          let matchedAll = true;</span>
<a href="#l28.77"></a><span id="l28.77" class="difflineminus">-          for (let name in actionObj) {</span>
<a href="#l28.78"></a><span id="l28.78" class="difflineminus">-            let value = actionObj[name];</span>
<a href="#l28.79"></a><span id="l28.79" class="difflineminus">-            if (!aNode.hasAttribute(name) ||</span>
<a href="#l28.80"></a><span id="l28.80" class="difflineminus">-                aNode.getAttribute(name) != value) {</span>
<a href="#l28.81"></a><span id="l28.81" class="difflineminus">-              matchedAll = false;</span>
<a href="#l28.82"></a><span id="l28.82" class="difflineminus">-              break;</span>
<a href="#l28.83"></a><span id="l28.83" class="difflineminus">-            }</span>
<a href="#l28.84"></a><span id="l28.84" class="difflineminus">-          }</span>
<a href="#l28.85"></a><span id="l28.85" class="difflineminus">-          return (matchedAll) ? aNode : null;</span>
<a href="#l28.86"></a><span id="l28.86" class="difflineminus">-        };</span>
<a href="#l28.87"></a><span id="l28.87" class="difflineminus">-</span>
<a href="#l28.88"></a><span id="l28.88">         let matchingNode = null;</span>
<a href="#l28.89"></a><span id="l28.89">         let kids = curPopup.children;</span>
<a href="#l28.90"></a><span id="l28.90">         for (let iKid = 0; iKid &lt; kids.length; iKid++) {</span>
<a href="#l28.91"></a><span id="l28.91">           let node = kids[iKid];</span>
<a href="#l28.92"></a><span id="l28.92" class="difflineminus">-          matchingNode = findMatch(node);</span>
<a href="#l28.93"></a><span id="l28.93" class="difflineplus">+          matchingNode = this.findMatch(node, actionObj);</span>
<a href="#l28.94"></a><span id="l28.94">           if (matchingNode)</span>
<a href="#l28.95"></a><span id="l28.95">             break;</span>
<a href="#l28.96"></a><span id="l28.96">         }</span>
<a href="#l28.97"></a><span id="l28.97"> </span>
<a href="#l28.98"></a><span id="l28.98">         if (!matchingNode) {</span>
<a href="#l28.99"></a><span id="l28.99">           throw new Error(&quot;Did not find matching menu item for action index &quot; +</span>
<a href="#l28.100"></a><span id="l28.100">                           iAction + &quot;: &quot; + JSON.stringify(actionObj));</span>
<a href="#l28.101"></a><span id="l28.101">         }</span>
<a href="#l28.102"></a><span id="l28.102"> </span>
<a href="#l28.103"></a><span id="l28.103" class="difflineminus">-        if ((matchingNode.localName == &quot;splitmenu&quot;) &amp;&amp;</span>
<a href="#l28.104"></a><span id="l28.104" class="difflineminus">-            ((iAction &lt; aActions.length - 1) || aKeepOpen)) {</span>
<a href="#l28.105"></a><span id="l28.105" class="difflineminus">-          // For splitmenus, click the submenu arrow to open its menupopup,</span>
<a href="#l28.106"></a><span id="l28.106" class="difflineminus">-          // unless this is the last item being searched for. In that case,</span>
<a href="#l28.107"></a><span id="l28.107" class="difflineminus">-          // click the main item.</span>
<a href="#l28.108"></a><span id="l28.108" class="difflineminus">-          this.click(new elib.Elem(matchingNode.menu));</span>
<a href="#l28.109"></a><span id="l28.109" class="difflineminus">-        } else {</span>
<a href="#l28.110"></a><span id="l28.110" class="difflineminus">-          this.click(new elib.Elem(matchingNode));</span>
<a href="#l28.111"></a><span id="l28.111" class="difflineminus">-        }</span>
<a href="#l28.112"></a><span id="l28.112" class="difflineplus">+        this.click(new elib.Elem(matchingNode));</span>
<a href="#l28.113"></a><span id="l28.113"> </span>
<a href="#l28.114"></a><span id="l28.114">         let newPopup = null;</span>
<a href="#l28.115"></a><span id="l28.115">         if (&quot;menupopup&quot; in matchingNode) {</span>
<a href="#l28.116"></a><span id="l28.116">           newPopup = matchingNode.menupopup;</span>
<a href="#l28.117"></a><span id="l28.117" class="difflineminus">-        } else if ((matchingNode.localName == &quot;splitmenu&quot;) &amp;&amp;</span>
<a href="#l28.118"></a><span id="l28.118" class="difflineminus">-                   (&quot;menupopup&quot; in matchingNode.menu)) {</span>
<a href="#l28.119"></a><span id="l28.119" class="difflineminus">-          // We should actually fetch matchingNode.menu.menupopup here,</span>
<a href="#l28.120"></a><span id="l28.120" class="difflineminus">-          // but it doesn't seem to work.</span>
<a href="#l28.121"></a><span id="l28.121" class="difflineminus">-          newPopup = matchingNode.querySelector(&quot;menupopup&quot;);</span>
<a href="#l28.122"></a><span id="l28.122">         }</span>
<a href="#l28.123"></a><span id="l28.123">         if (newPopup) {</span>
<a href="#l28.124"></a><span id="l28.124">           curPopup = newPopup;</span>
<a href="#l28.125"></a><span id="l28.125">           closeStack.push(curPopup);</span>
<a href="#l28.126"></a><span id="l28.126">           utils.waitFor(() =&gt; curPopup.state == &quot;open&quot;,</span>
<a href="#l28.127"></a><span id="l28.127">                         () =&gt; (&quot;Popup never opened at action depth &quot; + iAction +</span>
<a href="#l28.128"></a><span id="l28.128">                                &quot;; id=&quot; + curPopup.id + &quot;, state=&quot; + curPopup.state),</span>
<a href="#l28.129"></a><span id="l28.129">                         5000, 50);</span>
<a href="#l28.130"></a><span id="l28.130" class="difflineat">@@ -1073,16 +1063,97 @@ var AugmentEverybodyWith = {</span>
<a href="#l28.131"></a><span id="l28.131">           this.keypress(new elib.Elem(curPopup), &quot;VK_ESCAPE&quot;, {});</span>
<a href="#l28.132"></a><span id="l28.132">         utils.waitFor(() =&gt; curPopup.state == &quot;closed&quot;,</span>
<a href="#l28.133"></a><span id="l28.133">                       () =&gt; (&quot;Popup did not close! id=&quot; + curPopup.id +</span>
<a href="#l28.134"></a><span id="l28.134">                              &quot;, state=&quot; + curPopup.state), 5000, 50);</span>
<a href="#l28.135"></a><span id="l28.135">       }</span>
<a href="#l28.136"></a><span id="l28.136">     },</span>
<a href="#l28.137"></a><span id="l28.137"> </span>
<a href="#l28.138"></a><span id="l28.138">     /**</span>
<a href="#l28.139"></a><span id="l28.139" class="difflineplus">+     * Click through the appmenu. Uses a recursive style approach with a</span>
<a href="#l28.140"></a><span id="l28.140" class="difflineplus">+     * sequence of event listeners handling &quot;ViewShown&quot; events. The `navTargets`</span>
<a href="#l28.141"></a><span id="l28.141" class="difflineplus">+     * parameter specifies items to click to navigate through the menu. The</span>
<a href="#l28.142"></a><span id="l28.142" class="difflineplus">+     * optional `nonNavTarget` parameter specifies a final item to click to</span>
<a href="#l28.143"></a><span id="l28.143" class="difflineplus">+     * perform a command after navigating through the menu. If this argument is</span>
<a href="#l28.144"></a><span id="l28.144" class="difflineplus">+     * omitted, callers can interact with the last view panel that is returned.</span>
<a href="#l28.145"></a><span id="l28.145" class="difflineplus">+     * Callers will then need to close the appmenu when they are done with it.</span>
<a href="#l28.146"></a><span id="l28.146" class="difflineplus">+     *</span>
<a href="#l28.147"></a><span id="l28.147" class="difflineplus">+     * @param {Element} mainView  The initial appmenu panelview, namely</span>
<a href="#l28.148"></a><span id="l28.148" class="difflineplus">+     *     &lt;panelview id=&quot;appMenu-mainView&quot;&gt;. The caller is expected to open it</span>
<a href="#l28.149"></a><span id="l28.149" class="difflineplus">+     *     (e.g. by clicking the appmenu button). We wait for it to open if it</span>
<a href="#l28.150"></a><span id="l28.150" class="difflineplus">+     *     isn't open yet.</span>
<a href="#l28.151"></a><span id="l28.151" class="difflineplus">+     * @param {Object[]} navTargets  Array of objects that contain</span>
<a href="#l28.152"></a><span id="l28.152" class="difflineplus">+     *     attribute-&gt;value pairs. We pick the menu item whose DOM node matches</span>
<a href="#l28.153"></a><span id="l28.153" class="difflineplus">+     *     all the attribute-&gt;value pairs. We click whatever we find. We throw</span>
<a href="#l28.154"></a><span id="l28.154" class="difflineplus">+     *     if the element being asked for is not found.</span>
<a href="#l28.155"></a><span id="l28.155" class="difflineplus">+     * @param {Object} [nonNavTarget]  Contains attribute-&gt;value pairs used</span>
<a href="#l28.156"></a><span id="l28.156" class="difflineplus">+     *                                 to identify a final menu item to click.</span>
<a href="#l28.157"></a><span id="l28.157" class="difflineplus">+     * @return {Element}  The &lt;vbox class=&quot;panel-subview-body&quot;&gt; element inside</span>
<a href="#l28.158"></a><span id="l28.158" class="difflineplus">+     *                    the last shown &lt;panelview&gt;.</span>
<a href="#l28.159"></a><span id="l28.159" class="difflineplus">+     */</span>
<a href="#l28.160"></a><span id="l28.160" class="difflineplus">+    click_appmenu_in_sequence(mainView, navTargets, nonNavTarget) {</span>
<a href="#l28.161"></a><span id="l28.161" class="difflineplus">+      const rootPopup = this.e(&quot;appMenu-popup&quot;);</span>
<a href="#l28.162"></a><span id="l28.162" class="difflineplus">+      const controller = this;</span>
<a href="#l28.163"></a><span id="l28.163" class="difflineplus">+</span>
<a href="#l28.164"></a><span id="l28.164" class="difflineplus">+      function viewShownListener(navTargets, nonNavTarget, allDone, event) {</span>
<a href="#l28.165"></a><span id="l28.165" class="difflineplus">+        // Set up the next listener if there are more navigation targets.</span>
<a href="#l28.166"></a><span id="l28.166" class="difflineplus">+        if (navTargets.length &gt; 0) {</span>
<a href="#l28.167"></a><span id="l28.167" class="difflineplus">+          rootPopup.addEventListener(&quot;ViewShown&quot;,</span>
<a href="#l28.168"></a><span id="l28.168" class="difflineplus">+            viewShownListener.bind(null, navTargets.slice(1), nonNavTarget, allDone),</span>
<a href="#l28.169"></a><span id="l28.169" class="difflineplus">+            {once: true});</span>
<a href="#l28.170"></a><span id="l28.170" class="difflineplus">+        }</span>
<a href="#l28.171"></a><span id="l28.171" class="difflineplus">+</span>
<a href="#l28.172"></a><span id="l28.172" class="difflineplus">+        const subview = event.target.querySelector(&quot;.panel-subview-body&quot;);</span>
<a href="#l28.173"></a><span id="l28.173" class="difflineplus">+</span>
<a href="#l28.174"></a><span id="l28.174" class="difflineplus">+        // Click a target if there is a target left to click.</span>
<a href="#l28.175"></a><span id="l28.175" class="difflineplus">+        const clickTarget = navTargets[0] || nonNavTarget;</span>
<a href="#l28.176"></a><span id="l28.176" class="difflineplus">+</span>
<a href="#l28.177"></a><span id="l28.177" class="difflineplus">+        if (clickTarget) {</span>
<a href="#l28.178"></a><span id="l28.178" class="difflineplus">+          const kids = Array.from(subview.children);</span>
<a href="#l28.179"></a><span id="l28.179" class="difflineplus">+          const findFunction = node =&gt; controller.findMatch(node, clickTarget);</span>
<a href="#l28.180"></a><span id="l28.180" class="difflineplus">+</span>
<a href="#l28.181"></a><span id="l28.181" class="difflineplus">+          // Some views are dynamically populated after ViewShown, so we wait.</span>
<a href="#l28.182"></a><span id="l28.182" class="difflineplus">+          utils.waitFor(</span>
<a href="#l28.183"></a><span id="l28.183" class="difflineplus">+            () =&gt; kids.find(findFunction),</span>
<a href="#l28.184"></a><span id="l28.184" class="difflineplus">+            () =&gt; &quot;Waited but did not find matching menu item for target: &quot; +</span>
<a href="#l28.185"></a><span id="l28.185" class="difflineplus">+                  JSON.stringify(clickTarget));</span>
<a href="#l28.186"></a><span id="l28.186" class="difflineplus">+</span>
<a href="#l28.187"></a><span id="l28.187" class="difflineplus">+          const foundNode = kids.find(findFunction);</span>
<a href="#l28.188"></a><span id="l28.188" class="difflineplus">+</span>
<a href="#l28.189"></a><span id="l28.189" class="difflineplus">+          controller.click(new elib.Elem(foundNode));</span>
<a href="#l28.190"></a><span id="l28.190" class="difflineplus">+        }</span>
<a href="#l28.191"></a><span id="l28.191" class="difflineplus">+</span>
<a href="#l28.192"></a><span id="l28.192" class="difflineplus">+        // We are all done when there are no more navigation targets.</span>
<a href="#l28.193"></a><span id="l28.193" class="difflineplus">+        if (navTargets.length == 0) {</span>
<a href="#l28.194"></a><span id="l28.194" class="difflineplus">+          allDone(subview);</span>
<a href="#l28.195"></a><span id="l28.195" class="difflineplus">+        }</span>
<a href="#l28.196"></a><span id="l28.196" class="difflineplus">+      }</span>
<a href="#l28.197"></a><span id="l28.197" class="difflineplus">+</span>
<a href="#l28.198"></a><span id="l28.198" class="difflineplus">+      let done = false;</span>
<a href="#l28.199"></a><span id="l28.199" class="difflineplus">+      let subviewToReturn;</span>
<a href="#l28.200"></a><span id="l28.200" class="difflineplus">+      const allDone = (subview) =&gt; {</span>
<a href="#l28.201"></a><span id="l28.201" class="difflineplus">+        subviewToReturn = subview;</span>
<a href="#l28.202"></a><span id="l28.202" class="difflineplus">+        done = true;</span>
<a href="#l28.203"></a><span id="l28.203" class="difflineplus">+      };</span>
<a href="#l28.204"></a><span id="l28.204" class="difflineplus">+</span>
<a href="#l28.205"></a><span id="l28.205" class="difflineplus">+      utils.waitFor(() =&gt; rootPopup.getAttribute(&quot;panelopen&quot;) == &quot;true&quot;,</span>
<a href="#l28.206"></a><span id="l28.206" class="difflineplus">+        &quot;Waited for the appmenu to open, but it never opened.&quot;);</span>
<a href="#l28.207"></a><span id="l28.207" class="difflineplus">+</span>
<a href="#l28.208"></a><span id="l28.208" class="difflineplus">+      // Because the appmenu button has already been clicked in the calling</span>
<a href="#l28.209"></a><span id="l28.209" class="difflineplus">+      // code (to match click_menus_in_sequence), we have to call the first</span>
<a href="#l28.210"></a><span id="l28.210" class="difflineplus">+      // viewShownListener manually, using a fake event argument, to start the</span>
<a href="#l28.211"></a><span id="l28.211" class="difflineplus">+      // series of event listener calls.</span>
<a href="#l28.212"></a><span id="l28.212" class="difflineplus">+      const fakeEvent = {target: mainView};</span>
<a href="#l28.213"></a><span id="l28.213" class="difflineplus">+      viewShownListener(navTargets, nonNavTarget, allDone, fakeEvent);</span>
<a href="#l28.214"></a><span id="l28.214" class="difflineplus">+</span>
<a href="#l28.215"></a><span id="l28.215" class="difflineplus">+      utils.waitFor(() =&gt; done, &quot;Timed out in click_appmenu_in_sequence.&quot;);</span>
<a href="#l28.216"></a><span id="l28.216" class="difflineplus">+      return subviewToReturn;</span>
<a href="#l28.217"></a><span id="l28.217" class="difflineplus">+    },</span>
<a href="#l28.218"></a><span id="l28.218" class="difflineplus">+</span>
<a href="#l28.219"></a><span id="l28.219" class="difflineplus">+    /**</span>
<a href="#l28.220"></a><span id="l28.220">      * mark_action helper method that produces something that can be concat()ed</span>
<a href="#l28.221"></a><span id="l28.221">      *  onto a list being passed to mark_action in order to describe the focus</span>
<a href="#l28.222"></a><span id="l28.222">      *  state of the window.  For now this will be a variable-length list but</span>
<a href="#l28.223"></a><span id="l28.223">      *  could be changed to a single object in the future.</span>
<a href="#l28.224"></a><span id="l28.224">      */</span>
<a href="#l28.225"></a><span id="l28.225">     describeFocus() {</span>
<a href="#l28.226"></a><span id="l28.226">       let arr = [</span>
<a href="#l28.227"></a><span id="l28.227">         &quot;in window:&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mail/themes/linux/customizableui/panelUI.css</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mail/themes/linux/customizableui/panelUI.css</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -1,13 +1,13 @@</span>
<a href="#l29.4"></a><span id="l29.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l29.5"></a><span id="l29.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l29.6"></a><span id="l29.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l29.7"></a><span id="l29.7"> </span>
<a href="#l29.8"></a><span id="l29.8" class="difflineminus">-%include ../../shared/customizableui/panelUI.inc.css</span>
<a href="#l29.9"></a><span id="l29.9" class="difflineplus">+@import url(&quot;chrome://messenger/skin/shared/customizableui/panelUI.css&quot;);</span>
<a href="#l29.10"></a><span id="l29.10"> </span>
<a href="#l29.11"></a><span id="l29.11"> #BMB_bookmarksPopup menupopup {</span>
<a href="#l29.12"></a><span id="l29.12">   -moz-appearance: none;</span>
<a href="#l29.13"></a><span id="l29.13">   background: var(--arrowpanel-background);</span>
<a href="#l29.14"></a><span id="l29.14">   color: var(--arrowpanel-color);</span>
<a href="#l29.15"></a><span id="l29.15">   border: 1px solid var(--arrowpanel-border-color);</span>
<a href="#l29.16"></a><span id="l29.16">   margin-top: -6px;</span>
<a href="#l29.17"></a><span id="l29.17">   padding-top: 1px;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mail/themes/linux/jar.mn</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mail/themes/linux/jar.mn</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -82,16 +82,17 @@ classic.jar:</span>
<a href="#l30.4"></a><span id="l30.4">   skin/classic/messenger/addressbook/icons/contact-generic.png             (mail/addrbook/contact-generic.png)</span>
<a href="#l30.5"></a><span id="l30.5">   skin/classic/messenger/addressbook/icons/contact-generic-tiny.png        (mail/addrbook/contact-generic-tiny.png)</span>
<a href="#l30.6"></a><span id="l30.6">   skin/classic/messenger/addressbook/icons/abcard-large.png   (mail/addrbook/abcard-large.png)</span>
<a href="#l30.7"></a><span id="l30.7">   skin/classic/messenger/addressbook/icons/remote-addrbook.png (mail/addrbook/remote-addrbook.png)</span>
<a href="#l30.8"></a><span id="l30.8">   skin/classic/messenger/addressbook/icons/remote-addrbook-error.png      (mail/addrbook/remote-addrbook-error.png)</span>
<a href="#l30.9"></a><span id="l30.9">   skin/classic/messenger/addressbook/icons/secure-remote-addrbook.png     (mail/addrbook/secure-remote-addrbook.png)</span>
<a href="#l30.10"></a><span id="l30.10">   skin/classic/messenger/messengercompose/messengercompose.css (mail/compose/messengercompose.css)</span>
<a href="#l30.11"></a><span id="l30.11">   skin/classic/messenger/downloads/aboutDownloads.css         (mail/downloads/aboutDownloads.css)</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineplus">+  skin/classic/messenger/customizableui/panelUI.css           (customizableui/panelUI.css)</span>
<a href="#l30.13"></a><span id="l30.13"> % skin messenger-newsblog classic/1.0 %skin/classic/messenger-newsblog/</span>
<a href="#l30.14"></a><span id="l30.14">   skin/classic/messenger-newsblog/feed-subscriptions.css      (mail/newsblog/feed-subscriptions.css)</span>
<a href="#l30.15"></a><span id="l30.15">   skin/classic/messenger-newsblog/rss-feed.png                (mail/newsblog/rss-feed.png)</span>
<a href="#l30.16"></a><span id="l30.16">   skin/classic/messenger-newsblog/rss-feed-folder.png         (mail/newsblog/rss-feed-folder.png)</span>
<a href="#l30.17"></a><span id="l30.17">   skin/classic/messenger/preferences/alwaysAsk.png            (mail/preferences/alwaysAsk.png)</span>
<a href="#l30.18"></a><span id="l30.18">   skin/classic/messenger/preferences/preferences.css          (mail/preferences/preferences.css)</span>
<a href="#l30.19"></a><span id="l30.19">   skin/classic/messenger/preferences/applications.css         (mail/preferences/applications.css)</span>
<a href="#l30.20"></a><span id="l30.20">   skin/classic/messenger/preferences/dialog.css               (mail/preferences/dialog.css)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mail/themes/linux/mail/primaryToolbar.css</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mail/themes/linux/mail/primaryToolbar.css</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -211,35 +211,17 @@ toolbar[mode=&quot;text&quot;] .button-appmenu .to</span>
<a href="#l31.4"></a><span id="l31.4"> </span>
<a href="#l31.5"></a><span id="l31.5"> .msgNotificaton-smallText {</span>
<a href="#l31.6"></a><span id="l31.6">   padding-inline-start: 10px;</span>
<a href="#l31.7"></a><span id="l31.7">   font-size: 90%;</span>
<a href="#l31.8"></a><span id="l31.8"> }</span>
<a href="#l31.9"></a><span id="l31.9"> </span>
<a href="#l31.10"></a><span id="l31.10"> /* AppMenu styling */</span>
<a href="#l31.11"></a><span id="l31.11"> </span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-.splitmenu-menuitem {</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineminus">-  -moz-appearance: menuitem;</span>
<a href="#l31.14"></a><span id="l31.14" class="difflineminus">-  -moz-box-align: center;</span>
<a href="#l31.15"></a><span id="l31.15" class="difflineminus">-  max-width: 42em;</span>
<a href="#l31.16"></a><span id="l31.16" class="difflineminus">-  color: MenuText;</span>
<a href="#l31.17"></a><span id="l31.17" class="difflineminus">-  font: menu;</span>
<a href="#l31.18"></a><span id="l31.18" class="difflineminus">-  list-style-image: none;</span>
<a href="#l31.19"></a><span id="l31.19" class="difflineminus">-  margin-inline-end: 1px;</span>
<a href="#l31.20"></a><span id="l31.20" class="difflineminus">-  -moz-image-region: auto;</span>
<a href="#l31.21"></a><span id="l31.21" class="difflineminus">-}</span>
<a href="#l31.22"></a><span id="l31.22" class="difflineminus">-</span>
<a href="#l31.23"></a><span id="l31.23" class="difflineminus">-.splitmenu-menuitem[_moz-menuactive=&quot;true&quot;] {</span>
<a href="#l31.24"></a><span id="l31.24" class="difflineminus">-  color: -moz-menuhovertext;</span>
<a href="#l31.25"></a><span id="l31.25" class="difflineminus">-  background-color: -moz-menuhover;</span>
<a href="#l31.26"></a><span id="l31.26" class="difflineminus">-}</span>
<a href="#l31.27"></a><span id="l31.27" class="difflineminus">-</span>
<a href="#l31.28"></a><span id="l31.28" class="difflineminus">-.splitmenu-menuitem[disabled=&quot;true&quot;] {</span>
<a href="#l31.29"></a><span id="l31.29" class="difflineminus">-  color: GrayText;</span>
<a href="#l31.30"></a><span id="l31.30" class="difflineminus">-}</span>
<a href="#l31.31"></a><span id="l31.31" class="difflineplus">+/* TODO appmenu - remove? needed? */</span>
<a href="#l31.32"></a><span id="l31.32"> </span>
<a href="#l31.33"></a><span id="l31.33"> #appmenuSecondaryPane {</span>
<a href="#l31.34"></a><span id="l31.34">   border-inline-start: 1px solid ThreeDShadow;</span>
<a href="#l31.35"></a><span id="l31.35"> }</span>
<a href="#l31.36"></a><span id="l31.36"> </span>
<a href="#l31.37"></a><span id="l31.37"> .appmenuPane-spacer {</span>
<a href="#l31.38"></a><span id="l31.38">   min-height: 1em;</span>
<a href="#l31.39"></a><span id="l31.39"> }</span>
<a href="#l31.40"></a><span id="l31.40" class="difflineat">@@ -289,21 +271,17 @@ toolbar[mode=&quot;text&quot;] .button-appmenu .to</span>
<a href="#l31.41"></a><span id="l31.41"> </span>
<a href="#l31.42"></a><span id="l31.42"> #appmenu-quit {</span>
<a href="#l31.43"></a><span id="l31.43">   list-style-image: url(&quot;chrome://messenger/skin/icons/quit.svg&quot;);</span>
<a href="#l31.44"></a><span id="l31.44"> }</span>
<a href="#l31.45"></a><span id="l31.45"> </span>
<a href="#l31.46"></a><span id="l31.46"> #appmenu_find {</span>
<a href="#l31.47"></a><span id="l31.47">   list-style-image: url(&quot;chrome://messenger/skin/icons/search-glass.svg&quot;);</span>
<a href="#l31.48"></a><span id="l31.48"> }</span>
<a href="#l31.49"></a><span id="l31.49" class="difflineminus">-/*</span>
<a href="#l31.50"></a><span id="l31.50" class="difflineminus">-#appmenu_find &gt; .splitmenu-menuitem {</span>
<a href="#l31.51"></a><span id="l31.51" class="difflineminus">-  -moz-binding: url(&quot;chrome://global/content/bindings/menu.xml#menuitem-iconic&quot;);</span>
<a href="#l31.52"></a><span id="l31.52" class="difflineminus">-}</span>
<a href="#l31.53"></a><span id="l31.53" class="difflineminus">-*/</span>
<a href="#l31.54"></a><span id="l31.54" class="difflineplus">+</span>
<a href="#l31.55"></a><span id="l31.55"> #appmenu_addons {</span>
<a href="#l31.56"></a><span id="l31.56">   list-style-image: url(&quot;chrome://mozapps/skin/extensions/extensionGeneric-16.svg&quot;);</span>
<a href="#l31.57"></a><span id="l31.57"> }</span>
<a href="#l31.58"></a><span id="l31.58"> </span>
<a href="#l31.59"></a><span id="l31.59"> #appmenu_openHelp {</span>
<a href="#l31.60"></a><span id="l31.60">   list-style-image: url(chrome://global/skin/icons/help.svg);</span>
<a href="#l31.61"></a><span id="l31.61"> }</span>
<a href="#l31.62"></a><span id="l31.62"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/mail/themes/osx/customizableui/panelUI.css</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/mail/themes/osx/customizableui/panelUI.css</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -1,13 +1,13 @@</span>
<a href="#l32.4"></a><span id="l32.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l32.5"></a><span id="l32.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l32.6"></a><span id="l32.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l32.7"></a><span id="l32.7"> </span>
<a href="#l32.8"></a><span id="l32.8" class="difflineminus">-%include ../../shared/customizableui/panelUI.inc.css</span>
<a href="#l32.9"></a><span id="l32.9" class="difflineplus">+@import url(&quot;chrome://messenger/skin/shared/customizableui/panelUI.css&quot;);</span>
<a href="#l32.10"></a><span id="l32.10"> </span>
<a href="#l32.11"></a><span id="l32.11"> .restoreallitem &gt; .toolbarbutton-icon {</span>
<a href="#l32.12"></a><span id="l32.12">   display: none;</span>
<a href="#l32.13"></a><span id="l32.13"> }</span>
<a href="#l32.14"></a><span id="l32.14"> </span>
<a href="#l32.15"></a><span id="l32.15"> .subviewbutton {</span>
<a href="#l32.16"></a><span id="l32.16">   padding-inline-start: 18px;</span>
<a href="#l32.17"></a><span id="l32.17"> }</span>
<a href="#l32.18"></a><span id="l32.18" class="difflineat">@@ -84,19 +84,23 @@ menu.subviewbutton &gt; .menu-right {</span>
<a href="#l32.19"></a><span id="l32.19"> .panel-button {</span>
<a href="#l32.20"></a><span id="l32.20">   -moz-appearance: none;</span>
<a href="#l32.21"></a><span id="l32.21">   border-radius: 2px;</span>
<a href="#l32.22"></a><span id="l32.22">   background-color: var(--arrowpanel-dimmed);</span>
<a href="#l32.23"></a><span id="l32.23">   color: inherit;</span>
<a href="#l32.24"></a><span id="l32.24">   padding: 2px 6px;</span>
<a href="#l32.25"></a><span id="l32.25"> }</span>
<a href="#l32.26"></a><span id="l32.26"> </span>
<a href="#l32.27"></a><span id="l32.27" class="difflineminus">-.panel-button@buttonStateHover@ {</span>
<a href="#l32.28"></a><span id="l32.28" class="difflineplus">+/* With original pre-processor step:</span>
<a href="#l32.29"></a><span id="l32.29" class="difflineplus">+   .panel-button@buttonStateHover@ */</span>
<a href="#l32.30"></a><span id="l32.30" class="difflineplus">+.panel-button:not(:-moz-any([disabled],[open],:active)):-moz-any(:hover,:focus) {</span>
<a href="#l32.31"></a><span id="l32.31">   background-color: var(--arrowpanel-dimmed-further);</span>
<a href="#l32.32"></a><span id="l32.32"> }</span>
<a href="#l32.33"></a><span id="l32.33"> </span>
<a href="#l32.34"></a><span id="l32.34" class="difflineminus">-.panel-button@buttonStateActive@ {</span>
<a href="#l32.35"></a><span id="l32.35" class="difflineminus">-  background-color: var(--arrowpanel-dimmed-even-further);</span>
<a href="#l32.36"></a><span id="l32.36" class="difflineplus">+/* With original pre-processor step:</span>
<a href="#l32.37"></a><span id="l32.37" class="difflineplus">+   .panel-button@buttonStateActive@ */</span>
<a href="#l32.38"></a><span id="l32.38" class="difflineplus">+.panel-button:not([disabled]):-moz-any([open],:hover:active) {</span>
<a href="#l32.39"></a><span id="l32.39" class="difflineplus">+   background-color: var(--arrowpanel-dimmed-even-further);</span>
<a href="#l32.40"></a><span id="l32.40"> }</span>
<a href="#l32.41"></a><span id="l32.41"> </span>
<a href="#l32.42"></a><span id="l32.42"> .panel-button:-moz-focusring {</span>
<a href="#l32.43"></a><span id="l32.43">   box-shadow: var(--focus-ring-box-shadow);</span>
<a href="#l32.44"></a><span id="l32.44"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mail/themes/osx/jar.mn</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mail/themes/osx/jar.mn</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -99,16 +99,17 @@ classic.jar:</span>
<a href="#l33.4"></a><span id="l33.4">   skin/classic/messenger/messengercompose/emoticon_wink.png       (mail/compose/emoticon_wink.png)</span>
<a href="#l33.5"></a><span id="l33.5">   skin/classic/messenger/messengercompose/emoticon_yell.png       (mail/compose/emoticon_yell.png)</span>
<a href="#l33.6"></a><span id="l33.6">   skin/classic/messenger/messengercompose/emotes@2x.png           (mail/compose/emotes@2x.png)</span>
<a href="#l33.7"></a><span id="l33.7">   skin/classic/messenger/messengercompose/format-buttons.png      (mail/compose/format-buttons.png)</span>
<a href="#l33.8"></a><span id="l33.8">   skin/classic/messenger/messengercompose/format-buttons@2x.png   (mail/compose/format-buttons@2x.png)</span>
<a href="#l33.9"></a><span id="l33.9">   skin/classic/messenger/messengercompose/insert-menu.png         (mail/compose/insert-menu.png)</span>
<a href="#l33.10"></a><span id="l33.10">   skin/classic/messenger/messengercompose/insert-menu@2x.png      (mail/compose/insert-menu@2x.png)</span>
<a href="#l33.11"></a><span id="l33.11">   skin/classic/messenger/downloads/aboutDownloads.css             (mail/downloads/aboutDownloads.css)</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineplus">+  skin/classic/messenger/customizableui/panelUI.css               (customizableui/panelUI.css)</span>
<a href="#l33.13"></a><span id="l33.13"> % skin messenger-newsblog classic/1.0 %skin/classic/messenger-newsblog/</span>
<a href="#l33.14"></a><span id="l33.14">   skin/classic/messenger-newsblog/feed-subscriptions.css         (mail/newsblog/feed-subscriptions.css)</span>
<a href="#l33.15"></a><span id="l33.15">   skin/classic/messenger-newsblog/rss-feed.png                   (mail/newsblog/rss-feed.png)</span>
<a href="#l33.16"></a><span id="l33.16">   skin/classic/messenger-newsblog/rss-feed@2x.png                (mail/newsblog/rss-feed@2x.png)</span>
<a href="#l33.17"></a><span id="l33.17">   skin/classic/messenger-newsblog/rss-feed-folder.png            (mail/newsblog/rss-feed-folder.png)</span>
<a href="#l33.18"></a><span id="l33.18">   skin/classic/messenger-newsblog/rss-feed-folder@2x.png         (mail/newsblog/rss-feed-folder@2x.png)</span>
<a href="#l33.19"></a><span id="l33.19">   skin/classic/messenger/preferences/alwaysAsk.png               (mail/preferences/alwaysAsk.png)</span>
<a href="#l33.20"></a><span id="l33.20">   skin/classic/messenger/preferences/application.png             (mail/preferences/application.png)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mail/themes/osx/mail/primaryToolbar.css</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mail/themes/osx/mail/primaryToolbar.css</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -239,53 +239,17 @@ toolbar[mode=&quot;text&quot;] .button-appmenu .to</span>
<a href="#l34.4"></a><span id="l34.4"> </span>
<a href="#l34.5"></a><span id="l34.5"> .msgNotification-smallText {</span>
<a href="#l34.6"></a><span id="l34.6">   padding-inline-start: 10px;</span>
<a href="#l34.7"></a><span id="l34.7">   font-size: 90%;</span>
<a href="#l34.8"></a><span id="l34.8"> }</span>
<a href="#l34.9"></a><span id="l34.9"> </span>
<a href="#l34.10"></a><span id="l34.10"> /* AppMenu styling */</span>
<a href="#l34.11"></a><span id="l34.11"> </span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-.splitmenu-menuitem {</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineminus">-  -moz-appearance: menuitem;</span>
<a href="#l34.14"></a><span id="l34.14" class="difflineminus">-  -moz-box-align: center;</span>
<a href="#l34.15"></a><span id="l34.15" class="difflineminus">-  color: MenuText;</span>
<a href="#l34.16"></a><span id="l34.16" class="difflineminus">-  font: -moz-pull-down-menu;</span>
<a href="#l34.17"></a><span id="l34.17" class="difflineminus">-  list-style-image: none;</span>
<a href="#l34.18"></a><span id="l34.18" class="difflineminus">-  -moz-image-region: auto;</span>
<a href="#l34.19"></a><span id="l34.19" class="difflineminus">-  margin-inline-end: 1px;</span>
<a href="#l34.20"></a><span id="l34.20" class="difflineminus">-  padding-bottom: 2px;</span>
<a href="#l34.21"></a><span id="l34.21" class="difflineminus">-  padding-inline-start: 10px;</span>
<a href="#l34.22"></a><span id="l34.22" class="difflineminus">-  padding-inline-end: 0;</span>
<a href="#l34.23"></a><span id="l34.23" class="difflineminus">-}</span>
<a href="#l34.24"></a><span id="l34.24" class="difflineminus">-</span>
<a href="#l34.25"></a><span id="l34.25" class="difflineminus">-.splitmenu-menuitem[_moz-menuactive=&quot;true&quot;] {</span>
<a href="#l34.26"></a><span id="l34.26" class="difflineminus">-  color: -moz-mac-menutextselect;</span>
<a href="#l34.27"></a><span id="l34.27" class="difflineminus">-  background-color: Highlight;</span>
<a href="#l34.28"></a><span id="l34.28" class="difflineminus">-}</span>
<a href="#l34.29"></a><span id="l34.29" class="difflineminus">-</span>
<a href="#l34.30"></a><span id="l34.30" class="difflineminus">-.splitmenu-menuitem[disabled=&quot;true&quot;],</span>
<a href="#l34.31"></a><span id="l34.31" class="difflineminus">-.splitmenu-menu[_moz-menuactive=&quot;true&quot;][disabled=&quot;true&quot;],</span>
<a href="#l34.32"></a><span id="l34.32" class="difflineminus">-.splitmenu-menuitem[_moz-menuactive=&quot;true&quot;][disabled=&quot;true&quot;] {</span>
<a href="#l34.33"></a><span id="l34.33" class="difflineminus">-  color: -moz-mac-menutextdisable;</span>
<a href="#l34.34"></a><span id="l34.34" class="difflineminus">-  background-color: transparent;</span>
<a href="#l34.35"></a><span id="l34.35" class="difflineminus">-}</span>
<a href="#l34.36"></a><span id="l34.36" class="difflineminus">-</span>
<a href="#l34.37"></a><span id="l34.37" class="difflineminus">-.splitmenu-menuitem[iconic=&quot;true&quot;] {</span>
<a href="#l34.38"></a><span id="l34.38" class="difflineminus">-  /* 2px higher than those without icons */</span>
<a href="#l34.39"></a><span id="l34.39" class="difflineminus">-  padding-top: 1px;</span>
<a href="#l34.40"></a><span id="l34.40" class="difflineminus">-  padding-bottom: 3px;</span>
<a href="#l34.41"></a><span id="l34.41" class="difflineminus">-  list-style-image: inherit;</span>
<a href="#l34.42"></a><span id="l34.42" class="difflineminus">-  -moz-image-region: inherit;</span>
<a href="#l34.43"></a><span id="l34.43" class="difflineminus">-}</span>
<a href="#l34.44"></a><span id="l34.44" class="difflineminus">-</span>
<a href="#l34.45"></a><span id="l34.45" class="difflineminus">-.splitmenu-menuitem[iconic=&quot;true&quot;] &gt; .menu-iconic-left &gt; .menu-iconic-icon {</span>
<a href="#l34.46"></a><span id="l34.46" class="difflineminus">-  margin-inline-start: 0;</span>
<a href="#l34.47"></a><span id="l34.47" class="difflineminus">-  width: 16px;</span>
<a href="#l34.48"></a><span id="l34.48" class="difflineminus">-}</span>
<a href="#l34.49"></a><span id="l34.49" class="difflineplus">+/* TODO appmenu - remove? needed? */</span>
<a href="#l34.50"></a><span id="l34.50"> </span>
<a href="#l34.51"></a><span id="l34.51"> .appmenu-edit-button {</span>
<a href="#l34.52"></a><span id="l34.52">   -moz-appearance: none;</span>
<a href="#l34.53"></a><span id="l34.53">   border-width: 0;</span>
<a href="#l34.54"></a><span id="l34.54">   padding: 0 2px;</span>
<a href="#l34.55"></a><span id="l34.55"> }</span>
<a href="#l34.56"></a><span id="l34.56"> </span>
<a href="#l34.57"></a><span id="l34.57"> .appmenu-edit-button[disabled=&quot;true&quot;] {</span>
<a href="#l34.58"></a><span id="l34.58" class="difflineat">@@ -328,40 +292,20 @@ toolbar[mode=&quot;text&quot;] .button-appmenu .to</span>
<a href="#l34.59"></a><span id="l34.59">   padding-inline-end: 15px;</span>
<a href="#l34.60"></a><span id="l34.60"> }</span>
<a href="#l34.61"></a><span id="l34.61"> </span>
<a href="#l34.62"></a><span id="l34.62"> .appmenuPane-spacer {</span>
<a href="#l34.63"></a><span id="l34.63">   min-height: 1em;</span>
<a href="#l34.64"></a><span id="l34.64"> }</span>
<a href="#l34.65"></a><span id="l34.65"> </span>
<a href="#l34.66"></a><span id="l34.66"> #appmenuSecondaryPane &gt; :-moz-any(menu, menuitem):not([_moz-menuactive]),</span>
<a href="#l34.67"></a><span id="l34.67" class="difflineminus">-#appmenuSecondaryPane &gt; :-moz-any(menu, menuitem)[_moz-menuactive][disabled],</span>
<a href="#l34.68"></a><span id="l34.68" class="difflineminus">-#appmenuSecondaryPane &gt; splitmenu &gt;</span>
<a href="#l34.69"></a><span id="l34.69" class="difflineminus">-  :-moz-any(.splitmenu-menu, .splitmenu-menuitem):not([_moz-menuactive]) {</span>
<a href="#l34.70"></a><span id="l34.70" class="difflineplus">+#appmenuSecondaryPane &gt; :-moz-any(menu, menuitem)[_moz-menuactive][disabled] {</span>
<a href="#l34.71"></a><span id="l34.71">   background-color: transparent;</span>
<a href="#l34.72"></a><span id="l34.72"> }</span>
<a href="#l34.73"></a><span id="l34.73"> </span>
<a href="#l34.74"></a><span id="l34.74" class="difflineminus">-.splitmenu-menu,</span>
<a href="#l34.75"></a><span id="l34.75" class="difflineminus">-#appmenu-editmenu {</span>
<a href="#l34.76"></a><span id="l34.76" class="difflineminus">-  -moz-box-pack: end;</span>
<a href="#l34.77"></a><span id="l34.77" class="difflineminus">-  padding-inline-start: 5px;</span>
<a href="#l34.78"></a><span id="l34.78" class="difflineminus">-  padding-inline-end: 15px;</span>
<a href="#l34.79"></a><span id="l34.79" class="difflineminus">-}</span>
<a href="#l34.80"></a><span id="l34.80" class="difflineminus">-</span>
<a href="#l34.81"></a><span id="l34.81" class="difflineminus">-.splitmenu-menu &gt; .menu-accel-container,</span>
<a href="#l34.82"></a><span id="l34.82" class="difflineminus">-#appmenu-editmenu &gt; .menu-accel-container {</span>
<a href="#l34.83"></a><span id="l34.83" class="difflineminus">-  margin: 0;</span>
<a href="#l34.84"></a><span id="l34.84" class="difflineminus">-}</span>
<a href="#l34.85"></a><span id="l34.85" class="difflineminus">-</span>
<a href="#l34.86"></a><span id="l34.86" class="difflineminus">-.splitmenu-menu &gt; .menu-right,</span>
<a href="#l34.87"></a><span id="l34.87" class="difflineminus">-#appmenu-editmenu &gt; .menu-right {</span>
<a href="#l34.88"></a><span id="l34.88" class="difflineminus">-  margin-inline-start: 5px;</span>
<a href="#l34.89"></a><span id="l34.89" class="difflineminus">-}</span>
<a href="#l34.90"></a><span id="l34.90" class="difflineminus">-</span>
<a href="#l34.91"></a><span id="l34.91" class="difflineminus">-.splitmenu-menuitem &gt; .menu-iconic-left,</span>
<a href="#l34.92"></a><span id="l34.92"> #appmenu-popup</span>
<a href="#l34.93"></a><span id="l34.93">   menuitem:not([type=&quot;radio&quot;]):not([type=&quot;checkbox&quot;]):not(.folderMenuItem) &gt;</span>
<a href="#l34.94"></a><span id="l34.94">   .menu-iconic-left {</span>
<a href="#l34.95"></a><span id="l34.95">   display: none;</span>
<a href="#l34.96"></a><span id="l34.96"> }</span>
<a href="#l34.97"></a><span id="l34.97"> </span>
<a href="#l34.98"></a><span id="l34.98"> .appmenu-edit-button {</span>
<a href="#l34.99"></a><span id="l34.99">   -moz-context-properties: fill, fill-opacity;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1">rename from mail/themes/shared/customizableui/panelUI.inc.css</span>
<a href="#l35.2"></a><span id="l35.2">rename to mail/themes/shared/customizableui/panelUI.css</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineminus">--- a/mail/themes/shared/customizableui/panelUI.inc.css</span>
<a href="#l35.4"></a><span id="l35.4" class="difflineplus">+++ b/mail/themes/shared/customizableui/panelUI.css</span>
<a href="#l35.5"></a><span id="l35.5" class="difflineat">@@ -1,41 +1,39 @@</span>
<a href="#l35.6"></a><span id="l35.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l35.7"></a><span id="l35.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l35.8"></a><span id="l35.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l35.9"></a><span id="l35.9"> </span>
<a href="#l35.10"></a><span id="l35.10" class="difflineminus">-%filter substitution</span>
<a href="#l35.11"></a><span id="l35.11" class="difflineplus">+:root {</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineplus">+  --menu-panel-width: 22.35em;</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+  --wide-menu-panel-width: 29em;</span>
<a href="#l35.14"></a><span id="l35.14" class="difflineplus">+  --standalone-subview-width: 30em;</span>
<a href="#l35.15"></a><span id="l35.15" class="difflineplus">+  --panel-palette-icon-size: 16px;</span>
<a href="#l35.16"></a><span id="l35.16" class="difflineplus">+</span>
<a href="#l35.17"></a><span id="l35.17" class="difflineplus">+  /* XXXgijs This is the ugliest bit of code I think I've ever written for Mozilla.</span>
<a href="#l35.18"></a><span id="l35.18" class="difflineplus">+  Basically, the [extra 0.1px in the 1.1px] is there to avoid CSS rounding errors</span>
<a href="#l35.19"></a><span id="l35.19" class="difflineplus">+  causing buttons to wrap. For gory details, refer to</span>
<a href="#l35.20"></a><span id="l35.20" class="difflineplus">+  https://bugzilla.mozilla.org/show_bug.cgi?id=963365#c11 */</span>
<a href="#l35.21"></a><span id="l35.21" class="difflineplus">+  --menu-panel-button-width: calc(--menu-panel-width / 3 - 1.1px);</span>
<a href="#l35.22"></a><span id="l35.22"> </span>
<a href="#l35.23"></a><span id="l35.23" class="difflineminus">-%define menuPanelWidth 22.35em</span>
<a href="#l35.24"></a><span id="l35.24" class="difflineminus">-%define wideMenuPanelWidth 29em</span>
<a href="#l35.25"></a><span id="l35.25" class="difflineminus">-%define standaloneSubviewWidth 30em</span>
<a href="#l35.26"></a><span id="l35.26" class="difflineminus">-% XXXgijs This is the ugliest bit of code I think I've ever written for Mozilla.</span>
<a href="#l35.27"></a><span id="l35.27" class="difflineminus">-% Basically, the 0.1px is there to avoid CSS rounding errors causing buttons to wrap.</span>
<a href="#l35.28"></a><span id="l35.28" class="difflineminus">-% For gory details, refer to https://bugzilla.mozilla.org/show_bug.cgi?id=963365#c11</span>
<a href="#l35.29"></a><span id="l35.29" class="difflineminus">-% There's no calc() here (and therefore lots of calc() where this is used) because</span>
<a href="#l35.30"></a><span id="l35.30" class="difflineminus">-% we don't support nested calc(): https://bugzilla.mozilla.org/show_bug.cgi?id=968761</span>
<a href="#l35.31"></a><span id="l35.31" class="difflineminus">-%define menuPanelButtonWidth (@menuPanelWidth@ / 3 - 0.1px)</span>
<a href="#l35.32"></a><span id="l35.32" class="difflineminus">-%define buttonStateHover :not(:-moz-any([disabled],[open],:active)):-moz-any(:hover,:focus)</span>
<a href="#l35.33"></a><span id="l35.33" class="difflineminus">-%define menuStateHover :not(:-moz-any([disabled],:active))[_moz-menuactive]</span>
<a href="#l35.34"></a><span id="l35.34" class="difflineminus">-%define buttonStateActive :not([disabled]):-moz-any([open],:hover:active)</span>
<a href="#l35.35"></a><span id="l35.35" class="difflineminus">-%define menuStateActive :not([disabled])[_moz-menuactive]:active</span>
<a href="#l35.36"></a><span id="l35.36" class="difflineminus">-%define menuStateMenuActive :not([disabled])[_moz-menuactive]</span>
<a href="#l35.37"></a><span id="l35.37" class="difflineminus">-%define inAnyPanel :-moz-any(:not([cui-areatype=&quot;toolbar&quot;]), [overflowedItem=true])</span>
<a href="#l35.38"></a><span id="l35.38" class="difflineminus">-%define panelPaletteIconSize 16px</span>
<a href="#l35.39"></a><span id="l35.39" class="difflineplus">+  --appmenu-warning-background-color: #FFEFBF;</span>
<a href="#l35.40"></a><span id="l35.40" class="difflineplus">+  --appmenu-warning-background-color-hover: #FFE8A2;</span>
<a href="#l35.41"></a><span id="l35.41" class="difflineplus">+  --appmenu-warning-background-color-active: #FFE38F;</span>
<a href="#l35.42"></a><span id="l35.42" class="difflineplus">+  --appmenu-warning-color: black;</span>
<a href="#l35.43"></a><span id="l35.43" class="difflineplus">+  --appmenu-warning-border-color: hsl(45,100%,77%);</span>
<a href="#l35.44"></a><span id="l35.44" class="difflineplus">+  --appmenu-warning-background-color-bright-text: hsla(55,100%,50%,.1);</span>
<a href="#l35.45"></a><span id="l35.45" class="difflineplus">+  --appmenu-warning-backgound-color-hover-bright-text: hsla(55,100%,50%,.15);</span>
<a href="#l35.46"></a><span id="l35.46" class="difflineplus">+  --appmenu-warning-background-color-active-bright-text: hsla(55,100%,50%,.2);</span>
<a href="#l35.47"></a><span id="l35.47" class="difflineplus">+  --appmenu-warning-color-bright-text: #F9F9FA;</span>
<a href="#l35.48"></a><span id="l35.48" class="difflineplus">+}</span>
<a href="#l35.49"></a><span id="l35.49"> </span>
<a href="#l35.50"></a><span id="l35.50" class="difflineminus">-%define appmenuWarningBackgroundColor #FFEFBF</span>
<a href="#l35.51"></a><span id="l35.51" class="difflineminus">-%define appmenuWarningBackgroundColorHover #FFE8A2</span>
<a href="#l35.52"></a><span id="l35.52" class="difflineminus">-%define appmenuWarningBackgroundColorActive #FFE38F</span>
<a href="#l35.53"></a><span id="l35.53" class="difflineminus">-%define appmenuWarningColor black</span>
<a href="#l35.54"></a><span id="l35.54" class="difflineminus">-%define appmenuWarningBorderColor hsl(45,100%,77%)</span>
<a href="#l35.55"></a><span id="l35.55" class="difflineminus">-</span>
<a href="#l35.56"></a><span id="l35.56" class="difflineminus">-%define appmenuWarningBackgroundColorBrightText hsla(55,100%,50%,.1)</span>
<a href="#l35.57"></a><span id="l35.57" class="difflineminus">-%define appmenuWarningBackgroundColorHoverBrightText hsla(55,100%,50%,.15)</span>
<a href="#l35.58"></a><span id="l35.58" class="difflineminus">-%define appmenuWarningBackgroundColorActiveBrightText hsla(55,100%,50%,.2)</span>
<a href="#l35.59"></a><span id="l35.59" class="difflineminus">-%define appmenuWarningColorBrightText #F9F9FA</span>
<a href="#l35.60"></a><span id="l35.60" class="difflineplus">+/* In mozilla-central the following variables are defined, but they are simply</span>
<a href="#l35.61"></a><span id="l35.61" class="difflineplus">+   inlined below because we aren't using a pre-processing step. */</span>
<a href="#l35.62"></a><span id="l35.62" class="difflineplus">+/* %define menuStateMenuActive :not([disabled])[_moz-menuactive] */</span>
<a href="#l35.63"></a><span id="l35.63" class="difflineplus">+/* %define inAnyPanel :-moz-any(:not([cui-areatype=&quot;toolbar&quot;]), [overflowedItem=true]) */</span>
<a href="#l35.64"></a><span id="l35.64"> </span>
<a href="#l35.65"></a><span id="l35.65"> :root:not([uidensity=compact]):not([chromehidden~=&quot;toolbar&quot;]) #PanelUI-button {</span>
<a href="#l35.66"></a><span id="l35.66">   margin-inline-start: 3px;</span>
<a href="#l35.67"></a><span id="l35.67">   border-inline-start: 1px solid;</span>
<a href="#l35.68"></a><span id="l35.68">   border-image: linear-gradient(</span>
<a href="#l35.69"></a><span id="l35.69">     transparent 4px,</span>
<a href="#l35.70"></a><span id="l35.70">     var(--lwt-toolbar-vertical-separator, rgba(0,0,0,.1)) 4px,</span>
<a href="#l35.71"></a><span id="l35.71">     var(--lwt-toolbar-vertical-separator, rgba(0,0,0,.1)) calc(100% - 4px),</span>
<a href="#l35.72"></a><span id="l35.72" class="difflineat">@@ -48,16 +46,22 @@</span>
<a href="#l35.73"></a><span id="l35.73">   border-image-source: linear-gradient(</span>
<a href="#l35.74"></a><span id="l35.74">     transparent 4px,</span>
<a href="#l35.75"></a><span id="l35.75">     var(--lwt-toolbar-vertical-separator, rgba(255,255,255,.2)) 4px,</span>
<a href="#l35.76"></a><span id="l35.76">     var(--lwt-toolbar-vertical-separator, rgba(255,255,255,.2)) calc(100% - 4px),</span>
<a href="#l35.77"></a><span id="l35.77">     transparent calc(100% - 4px)</span>
<a href="#l35.78"></a><span id="l35.78">   );</span>
<a href="#l35.79"></a><span id="l35.79"> }</span>
<a href="#l35.80"></a><span id="l35.80"> </span>
<a href="#l35.81"></a><span id="l35.81" class="difflineplus">+/* TODO appmenu - added, more needed? */</span>
<a href="#l35.82"></a><span id="l35.82" class="difflineplus">+panelview:not([visible]) {</span>
<a href="#l35.83"></a><span id="l35.83" class="difflineplus">+  visibility: collapse;</span>
<a href="#l35.84"></a><span id="l35.84" class="difflineplus">+}</span>
<a href="#l35.85"></a><span id="l35.85" class="difflineplus">+</span>
<a href="#l35.86"></a><span id="l35.86" class="difflineplus">+/* TODO appmenu - &quot;PanelUI-menu-button&quot; is not used as an id in Thunderbird.</span>
<a href="#l35.87"></a><span id="l35.87"> #PanelUI-menu-button[badge-status] &gt; .toolbarbutton-badge-stack &gt; .toolbarbutton-badge {</span>
<a href="#l35.88"></a><span id="l35.88">   display: -moz-box;</span>
<a href="#l35.89"></a><span id="l35.89">   height: 10px;</span>
<a href="#l35.90"></a><span id="l35.90">   width: 10px;</span>
<a href="#l35.91"></a><span id="l35.91">   background-size: contain;</span>
<a href="#l35.92"></a><span id="l35.92">   border: none;</span>
<a href="#l35.93"></a><span id="l35.93"> }</span>
<a href="#l35.94"></a><span id="l35.94"> </span>
<a href="#l35.95"></a><span id="l35.95" class="difflineat">@@ -67,22 +71,25 @@</span>
<a href="#l35.96"></a><span id="l35.96"> }</span>
<a href="#l35.97"></a><span id="l35.97"> </span>
<a href="#l35.98"></a><span id="l35.98"> #PanelUI-menu-button[badge-status=&quot;update-available&quot;] &gt; .toolbarbutton-badge-stack &gt; .toolbarbutton-badge,</span>
<a href="#l35.99"></a><span id="l35.99"> #PanelUI-menu-button[badge-status=&quot;update-manual&quot;] &gt; .toolbarbutton-badge-stack &gt; .toolbarbutton-badge,</span>
<a href="#l35.100"></a><span id="l35.100"> #PanelUI-menu-button[badge-status=&quot;update-restart&quot;] &gt; .toolbarbutton-badge-stack &gt; .toolbarbutton-badge,</span>
<a href="#l35.101"></a><span id="l35.101"> #PanelUI-menu-button[badge-status=&quot;update-unsupported&quot;] &gt; .toolbarbutton-badge-stack &gt; .toolbarbutton-badge {</span>
<a href="#l35.102"></a><span id="l35.102">   border-radius: 50%;</span>
<a href="#l35.103"></a><span id="l35.103">   box-shadow: none;</span>
<a href="#l35.104"></a><span id="l35.104" class="difflineplus">+  */</span>
<a href="#l35.105"></a><span id="l35.105">   /* &quot;!important&quot; is necessary to override the rule in toolbarbutton.css */</span>
<a href="#l35.106"></a><span id="l35.106" class="difflineplus">+  /*</span>
<a href="#l35.107"></a><span id="l35.107">   margin: -7px 0 0 !important;</span>
<a href="#l35.108"></a><span id="l35.108">   margin-inline-end: -4px !important;</span>
<a href="#l35.109"></a><span id="l35.109">   min-width: 12px;</span>
<a href="#l35.110"></a><span id="l35.110">   min-height: 12px;</span>
<a href="#l35.111"></a><span id="l35.111"> }</span>
<a href="#l35.112"></a><span id="l35.112" class="difflineplus">+*/</span>
<a href="#l35.113"></a><span id="l35.113"> </span>
<a href="#l35.114"></a><span id="l35.114"> #PanelUI-menu-button[badge-status=&quot;update-available&quot;] &gt; .toolbarbutton-badge-stack &gt; .toolbarbutton-badge,</span>
<a href="#l35.115"></a><span id="l35.115"> #PanelUI-menu-button[badge-status=&quot;update-manual&quot;] &gt; .toolbarbutton-badge-stack &gt; .toolbarbutton-badge,</span>
<a href="#l35.116"></a><span id="l35.116"> #PanelUI-menu-button[badge-status=&quot;update-restart&quot;] &gt; .toolbarbutton-badge-stack &gt; .toolbarbutton-badge {</span>
<a href="#l35.117"></a><span id="l35.117">   background: #74BF43 url(chrome://browser/skin/update-badge.svg) no-repeat center;</span>
<a href="#l35.118"></a><span id="l35.118"> }</span>
<a href="#l35.119"></a><span id="l35.119"> </span>
<a href="#l35.120"></a><span id="l35.120"> #PanelUI-menu-button[badge-status=&quot;update-unsupported&quot;] &gt; .toolbarbutton-badge-stack &gt; .toolbarbutton-badge {</span>
<a href="#l35.121"></a><span id="l35.121" class="difflineat">@@ -100,36 +107,41 @@</span>
<a href="#l35.122"></a><span id="l35.122">   background: #FFE900 url(chrome://browser/skin/update-badge.svg) no-repeat center;</span>
<a href="#l35.123"></a><span id="l35.123">   border-radius: 50%;</span>
<a href="#l35.124"></a><span id="l35.124"> }</span>
<a href="#l35.125"></a><span id="l35.125"> </span>
<a href="#l35.126"></a><span id="l35.126"> .panel-banner-item[notificationid^=update] {</span>
<a href="#l35.127"></a><span id="l35.127">   list-style-image: url(chrome://branding/content/icon16.png);</span>
<a href="#l35.128"></a><span id="l35.128"> }</span>
<a href="#l35.129"></a><span id="l35.129"> </span>
<a href="#l35.130"></a><span id="l35.130" class="difflineplus">+/* TODO appmenu - &quot;PanelUI-menu-button&quot; is not used as an id in Thunderbird.</span>
<a href="#l35.131"></a><span id="l35.131" class="difflineplus">+/*</span>
<a href="#l35.132"></a><span id="l35.132"> #PanelUI-menu-button[badge-status=&quot;addon-alert&quot;] &gt; .toolbarbutton-badge-stack &gt; .toolbarbutton-badge,</span>
<a href="#l35.133"></a><span id="l35.133"> #PanelUI-menu-button[badge-status=&quot;fxa-needs-authentication&quot;] &gt; .toolbarbutton-badge-stack &gt; .toolbarbutton-badge {</span>
<a href="#l35.134"></a><span id="l35.134">   height: 13px;</span>
<a href="#l35.135"></a><span id="l35.135">   background: url(chrome://browser/skin/warning.svg) center / contain no-repeat transparent;</span>
<a href="#l35.136"></a><span id="l35.136">   box-shadow: none;</span>
<a href="#l35.137"></a><span id="l35.137">   border-radius: 0;</span>
<a href="#l35.138"></a><span id="l35.138" class="difflineplus">+  */</span>
<a href="#l35.139"></a><span id="l35.139">   /* Use the included fallbacks defined in the SVG file instead of inheriting from .toolbarbutton-1. */</span>
<a href="#l35.140"></a><span id="l35.140" class="difflineplus">+  /*</span>
<a href="#l35.141"></a><span id="l35.141">   -moz-context-properties: none;</span>
<a href="#l35.142"></a><span id="l35.142"> }</span>
<a href="#l35.143"></a><span id="l35.143"> </span>
<a href="#l35.144"></a><span id="l35.144"> #PanelUI-menu-button[badge-status] &gt; .toolbarbutton-badge-stack &gt; .toolbarbutton-badge:-moz-window-inactive {</span>
<a href="#l35.145"></a><span id="l35.145">   filter: grayscale(100%);</span>
<a href="#l35.146"></a><span id="l35.146"> }</span>
<a href="#l35.147"></a><span id="l35.147"> </span>
<a href="#l35.148"></a><span id="l35.148"> #nav-bar[brighttext] #PanelUI-menu-button[badge-status=&quot;addon-alert&quot;] &gt; .toolbarbutton-badge-stack &gt; .toolbarbutton-badge,</span>
<a href="#l35.149"></a><span id="l35.149"> #nav-bar[brighttext] #PanelUI-menu-button[badge-status=&quot;fxa-needs-authentication&quot;] &gt; .toolbarbutton-badge-stack &gt; .toolbarbutton-badge {</span>
<a href="#l35.150"></a><span id="l35.150">   -moz-context-properties: fill, stroke;</span>
<a href="#l35.151"></a><span id="l35.151">   fill: #FFE900;</span>
<a href="#l35.152"></a><span id="l35.152">   stroke: transparent;</span>
<a href="#l35.153"></a><span id="l35.153"> }</span>
<a href="#l35.154"></a><span id="l35.154" class="difflineplus">+*/</span>
<a href="#l35.155"></a><span id="l35.155"> </span>
<a href="#l35.156"></a><span id="l35.156"> .cui-widget-panel,</span>
<a href="#l35.157"></a><span id="l35.157"> #widget-overflow {</span>
<a href="#l35.158"></a><span id="l35.158">   font: menu;</span>
<a href="#l35.159"></a><span id="l35.159"> }</span>
<a href="#l35.160"></a><span id="l35.160"> </span>
<a href="#l35.161"></a><span id="l35.161"> panelview {</span>
<a href="#l35.162"></a><span id="l35.162">   -moz-box-orient: vertical;</span>
<a href="#l35.163"></a><span id="l35.163" class="difflineat">@@ -232,18 +244,28 @@ panel[photon] &gt; .panel-arrowcontainer &gt; </span>
<a href="#l35.164"></a><span id="l35.164">   padding: 0;</span>
<a href="#l35.165"></a><span id="l35.165"> }</span>
<a href="#l35.166"></a><span id="l35.166"> </span>
<a href="#l35.167"></a><span id="l35.167"> #wrapper-edit-controls:-moz-any([place=&quot;palette&quot;],[place=&quot;menu-panel&quot;]) &gt; #edit-controls,</span>
<a href="#l35.168"></a><span id="l35.168"> #wrapper-zoom-controls:-moz-any([place=&quot;palette&quot;],[place=&quot;menu-panel&quot;]) &gt; #zoom-controls {</span>
<a href="#l35.169"></a><span id="l35.169">   margin-inline-start: 0;</span>
<a href="#l35.170"></a><span id="l35.170"> }</span>
<a href="#l35.171"></a><span id="l35.171"> </span>
<a href="#l35.172"></a><span id="l35.172" class="difflineplus">+#appmenu-edit-button {</span>
<a href="#l35.173"></a><span id="l35.173" class="difflineplus">+  margin-inline-start: 0;</span>
<a href="#l35.174"></a><span id="l35.174" class="difflineplus">+  padding-inline-end: 7px;</span>
<a href="#l35.175"></a><span id="l35.175" class="difflineplus">+  padding-inline-start: 7px;</span>
<a href="#l35.176"></a><span id="l35.176" class="difflineplus">+}</span>
<a href="#l35.177"></a><span id="l35.177" class="difflineplus">+</span>
<a href="#l35.178"></a><span id="l35.178" class="difflineplus">+#appmenu-edit-button::after {</span>
<a href="#l35.179"></a><span id="l35.179" class="difflineplus">+  margin-inline-start: 0;</span>
<a href="#l35.180"></a><span id="l35.180" class="difflineplus">+}</span>
<a href="#l35.181"></a><span id="l35.181" class="difflineplus">+</span>
<a href="#l35.182"></a><span id="l35.182"> #BMB_bookmarksPopup {</span>
<a href="#l35.183"></a><span id="l35.183" class="difflineminus">-  max-width: @standaloneSubviewWidth@;</span>
<a href="#l35.184"></a><span id="l35.184" class="difflineplus">+  max-width: var(--standalone-subview-width);</span>
<a href="#l35.185"></a><span id="l35.185"> }</span>
<a href="#l35.186"></a><span id="l35.186"> </span>
<a href="#l35.187"></a><span id="l35.187"> #confirmation-hint {</span>
<a href="#l35.188"></a><span id="l35.188">   --arrowpanel-background: #0060df;</span>
<a href="#l35.189"></a><span id="l35.189">   --arrowpanel-border-color: #0060df;</span>
<a href="#l35.190"></a><span id="l35.190">   --arrowpanel-color: #fff;</span>
<a href="#l35.191"></a><span id="l35.191"> }</span>
<a href="#l35.192"></a><span id="l35.192"> </span>
<a href="#l35.193"></a><span id="l35.193" class="difflineat">@@ -353,37 +375,37 @@ panelview:not([mainview]) .toolbarbutton</span>
<a href="#l35.194"></a><span id="l35.194"> </span>
<a href="#l35.195"></a><span id="l35.195"> #appMenu-popup &gt; .panel-arrowcontainer &gt; .panel-arrowcontent,</span>
<a href="#l35.196"></a><span id="l35.196"> panel[photon] &gt; .panel-arrowcontainer &gt; .panel-arrowcontent {</span>
<a href="#l35.197"></a><span id="l35.197">   padding: 0;</span>
<a href="#l35.198"></a><span id="l35.198"> }</span>
<a href="#l35.199"></a><span id="l35.199"> </span>
<a href="#l35.200"></a><span id="l35.200"> #appMenu-popup panelview,</span>
<a href="#l35.201"></a><span id="l35.201"> #customizationui-widget-multiview panelview:not([extension]) {</span>
<a href="#l35.202"></a><span id="l35.202" class="difflineminus">-  min-width: @menuPanelWidth@;</span>
<a href="#l35.203"></a><span id="l35.203" class="difflineplus">+  min-width: var(--menu-panel-width);</span>
<a href="#l35.204"></a><span id="l35.204">   max-width: 35em;</span>
<a href="#l35.205"></a><span id="l35.205"> }</span>
<a href="#l35.206"></a><span id="l35.206"> </span>
<a href="#l35.207"></a><span id="l35.207"> #customizationui-widget-multiview #appMenu-libraryView,</span>
<a href="#l35.208"></a><span id="l35.208"> #pageActionPanel panelview,</span>
<a href="#l35.209"></a><span id="l35.209"> #widget-overflow panelview {</span>
<a href="#l35.210"></a><span id="l35.210" class="difflineminus">-  min-width: @wideMenuPanelWidth@;</span>
<a href="#l35.211"></a><span id="l35.211" class="difflineminus">-  max-width: @wideMenuPanelWidth@;</span>
<a href="#l35.212"></a><span id="l35.212" class="difflineplus">+  min-width: var(--wide-menu-panel-width);</span>
<a href="#l35.213"></a><span id="l35.213" class="difflineplus">+  max-width: var(--wide-menu-panel-width);</span>
<a href="#l35.214"></a><span id="l35.214"> }</span>
<a href="#l35.215"></a><span id="l35.215"> </span>
<a href="#l35.216"></a><span id="l35.216"> /* Add 2 * 16px extra width for touch mode button padding. */</span>
<a href="#l35.217"></a><span id="l35.217"> #appMenu-popup[touchmode] panelview {</span>
<a href="#l35.218"></a><span id="l35.218" class="difflineminus">-  min-width: calc(@menuPanelWidth@ + 32px);</span>
<a href="#l35.219"></a><span id="l35.219" class="difflineplus">+  min-width: calc(var(--menu-panel-width) + 32px);</span>
<a href="#l35.220"></a><span id="l35.220"> }</span>
<a href="#l35.221"></a><span id="l35.221"> </span>
<a href="#l35.222"></a><span id="l35.222"> .cui-widget-panel.cui-widget-panelWithFooter &gt; .panel-arrowcontainer &gt; .panel-arrowcontent {</span>
<a href="#l35.223"></a><span id="l35.223">   padding-bottom: 0;</span>
<a href="#l35.224"></a><span id="l35.224"> }</span>
<a href="#l35.225"></a><span id="l35.225"> </span>
<a href="#l35.226"></a><span id="l35.226" class="difflineminus">-.toolbaritem-combined-buttons@inAnyPanel@ &gt; toolbarbutton &gt; .toolbarbutton-icon {</span>
<a href="#l35.227"></a><span id="l35.227" class="difflineplus">+.toolbaritem-combined-buttons:-moz-any(:not([cui-areatype=&quot;toolbar&quot;]), [overflowedItem=true]) &gt; toolbarbutton &gt; .toolbarbutton-icon {</span>
<a href="#l35.228"></a><span id="l35.228">   min-width: 0;</span>
<a href="#l35.229"></a><span id="l35.229">   min-height: 0;</span>
<a href="#l35.230"></a><span id="l35.230">   margin: 0;</span>
<a href="#l35.231"></a><span id="l35.231"> }</span>
<a href="#l35.232"></a><span id="l35.232"> </span>
<a href="#l35.233"></a><span id="l35.233"> .animate-out {</span>
<a href="#l35.234"></a><span id="l35.234">   animation-name: widget-animate-out;</span>
<a href="#l35.235"></a><span id="l35.235">   animation-fill-mode: forwards;</span>
<a href="#l35.236"></a><span id="l35.236" class="difflineat">@@ -406,35 +428,35 @@ toolbarpaletteitem[place=&quot;menu-panel&quot;] &gt;</span>
<a href="#l35.237"></a><span id="l35.237">   -moz-box-flex: 1;</span>
<a href="#l35.238"></a><span id="l35.238"> }</span>
<a href="#l35.239"></a><span id="l35.239"> </span>
<a href="#l35.240"></a><span id="l35.240"> /* Help webextension buttons fit in. */</span>
<a href="#l35.241"></a><span id="l35.241"> toolbarpaletteitem[place=&quot;palette&quot;] &gt; toolbarbutton[constrain-size=&quot;true&quot;] &gt; .toolbarbutton-icon,</span>
<a href="#l35.242"></a><span id="l35.242"> toolbarpaletteitem[place=&quot;palette&quot;] &gt; toolbarbutton[constrain-size=&quot;true&quot;] &gt; .toolbarbutton-badge-stack &gt; .toolbarbutton-icon,</span>
<a href="#l35.243"></a><span id="l35.243"> toolbarbutton[constrain-size=&quot;true&quot;][cui-areatype=&quot;menu-panel&quot;] &gt; .toolbarbutton-icon,</span>
<a href="#l35.244"></a><span id="l35.244"> toolbarbutton[constrain-size=&quot;true&quot;][cui-areatype=&quot;menu-panel&quot;] &gt; .toolbarbutton-badge-stack &gt; .toolbarbutton-icon {</span>
<a href="#l35.245"></a><span id="l35.245" class="difflineminus">-  height: @panelPaletteIconSize@;</span>
<a href="#l35.246"></a><span id="l35.246" class="difflineminus">-  width: @panelPaletteIconSize@;</span>
<a href="#l35.247"></a><span id="l35.247" class="difflineplus">+  height: var(--panel-palette-icon-size);</span>
<a href="#l35.248"></a><span id="l35.248" class="difflineplus">+  width: var(--panel-palette-icon-size);</span>
<a href="#l35.249"></a><span id="l35.249"> }</span>
<a href="#l35.250"></a><span id="l35.250"> </span>
<a href="#l35.251"></a><span id="l35.251"> #customization-palette .toolbarbutton-1 {</span>
<a href="#l35.252"></a><span id="l35.252">   -moz-appearance: none;</span>
<a href="#l35.253"></a><span id="l35.253">   -moz-box-orient: vertical;</span>
<a href="#l35.254"></a><span id="l35.254">   padding: 12px 0 9px;</span>
<a href="#l35.255"></a><span id="l35.255">   margin: 0;</span>
<a href="#l35.256"></a><span id="l35.256"> }</span>
<a href="#l35.257"></a><span id="l35.257"> </span>
<a href="#l35.258"></a><span id="l35.258"> /* above we treat the container as the icon for the margins, that is so the</span>
<a href="#l35.259"></a><span id="l35.259"> /* badge itself is positioned correctly. Here we make sure that the icon itself</span>
<a href="#l35.260"></a><span id="l35.260"> /* has the minimum size we want, but no padding/margin. */</span>
<a href="#l35.261"></a><span id="l35.261"> .customization-palette .toolbarbutton-1 &gt; .toolbarbutton-badge-stack &gt; .toolbarbutton-icon {</span>
<a href="#l35.262"></a><span id="l35.262" class="difflineminus">-  width: @panelPaletteIconSize@;</span>
<a href="#l35.263"></a><span id="l35.263" class="difflineminus">-  height: @panelPaletteIconSize@;</span>
<a href="#l35.264"></a><span id="l35.264" class="difflineminus">-  min-width: @panelPaletteIconSize@;</span>
<a href="#l35.265"></a><span id="l35.265" class="difflineminus">-  min-height: @panelPaletteIconSize@;</span>
<a href="#l35.266"></a><span id="l35.266" class="difflineplus">+  width: var(--panel-palette-icon-size);</span>
<a href="#l35.267"></a><span id="l35.267" class="difflineplus">+  height: var(--panel-palette-icon-size);</span>
<a href="#l35.268"></a><span id="l35.268" class="difflineplus">+  min-width: var(--panel-palette-icon-size);</span>
<a href="#l35.269"></a><span id="l35.269" class="difflineplus">+  min-height: var(--panel-palette-icon-size);</span>
<a href="#l35.270"></a><span id="l35.270">   margin: 0;</span>
<a href="#l35.271"></a><span id="l35.271">   padding: 0;</span>
<a href="#l35.272"></a><span id="l35.272"> }</span>
<a href="#l35.273"></a><span id="l35.273"> </span>
<a href="#l35.274"></a><span id="l35.274"> #zoom-in-button &gt; .toolbarbutton-text,</span>
<a href="#l35.275"></a><span id="l35.275"> #zoom-out-button &gt; .toolbarbutton-text,</span>
<a href="#l35.276"></a><span id="l35.276"> #zoom-reset-button &gt; .toolbarbutton-icon {</span>
<a href="#l35.277"></a><span id="l35.277">   display: none;</span>
<a href="#l35.278"></a><span id="l35.278" class="difflineat">@@ -446,39 +468,39 @@ toolbarbutton[constrain-size=&quot;true&quot;][cui</span>
<a href="#l35.279"></a><span id="l35.279">   width: 16px;</span>
<a href="#l35.280"></a><span id="l35.280">   height: 16px;</span>
<a href="#l35.281"></a><span id="l35.281">   margin-inline-start: 10px;</span>
<a href="#l35.282"></a><span id="l35.282">   margin-inline-end: 12px;</span>
<a href="#l35.283"></a><span id="l35.283">   display: -moz-box;</span>
<a href="#l35.284"></a><span id="l35.284"> }</span>
<a href="#l35.285"></a><span id="l35.285"> </span>
<a href="#l35.286"></a><span id="l35.286"> .addon-banner-item {</span>
<a href="#l35.287"></a><span id="l35.287" class="difflineminus">-  background-color: @appmenuWarningBackgroundColor@;</span>
<a href="#l35.288"></a><span id="l35.288" class="difflineminus">-  color: @appmenuWarningColor@;</span>
<a href="#l35.289"></a><span id="l35.289" class="difflineplus">+  background-color: var(--appmenu-warning-background-color);</span>
<a href="#l35.290"></a><span id="l35.290" class="difflineplus">+  color: var(--appmenu-warning-color);</span>
<a href="#l35.291"></a><span id="l35.291">   /* Force border to override `.addon-banner-item` selector below */</span>
<a href="#l35.292"></a><span id="l35.292" class="difflineminus">-  border-top: 1px solid @appmenuWarningBorderColor@ !important;</span>
<a href="#l35.293"></a><span id="l35.293" class="difflineplus">+  border-top: 1px solid var(--appmenu-warning-border-color) !important;</span>
<a href="#l35.294"></a><span id="l35.294">   display: flex;</span>
<a href="#l35.295"></a><span id="l35.295">   flex: 1 1 0%;</span>
<a href="#l35.296"></a><span id="l35.296" class="difflineminus">-  width: calc(@menuPanelWidth@ + 30px);</span>
<a href="#l35.297"></a><span id="l35.297" class="difflineplus">+  width: calc(var(--menu-panel-width) + 30px);</span>
<a href="#l35.298"></a><span id="l35.298">   padding-inline-start: 15px;</span>
<a href="#l35.299"></a><span id="l35.299">   border-inline-start-style: none;</span>
<a href="#l35.300"></a><span id="l35.300">   -moz-image-region: rect(0, 16px, 16px, 0);</span>
<a href="#l35.301"></a><span id="l35.301"> }</span>
<a href="#l35.302"></a><span id="l35.302"> </span>
<a href="#l35.303"></a><span id="l35.303"> .addon-banner-item:last-child {</span>
<a href="#l35.304"></a><span id="l35.304" class="difflineminus">-  border-bottom: 1px solid @appmenuWarningBorderColor@;</span>
<a href="#l35.305"></a><span id="l35.305" class="difflineplus">+  border-bottom: 1px solid var(--appmenu-warning-border-color);</span>
<a href="#l35.306"></a><span id="l35.306"> }</span>
<a href="#l35.307"></a><span id="l35.307"> </span>
<a href="#l35.308"></a><span id="l35.308"> .addon-banner-item:focus,</span>
<a href="#l35.309"></a><span id="l35.309"> .addon-banner-item:hover {</span>
<a href="#l35.310"></a><span id="l35.310" class="difflineminus">-  background-color: @appmenuWarningBackgroundColorHover@;</span>
<a href="#l35.311"></a><span id="l35.311" class="difflineplus">+  background-color: var(--appmenu-warning-background-color-hover);</span>
<a href="#l35.312"></a><span id="l35.312"> }</span>
<a href="#l35.313"></a><span id="l35.313"> </span>
<a href="#l35.314"></a><span id="l35.314"> .addon-banner-item:hover:active {</span>
<a href="#l35.315"></a><span id="l35.315" class="difflineminus">-  background-color: @appmenuWarningBackgroundColorActive@;</span>
<a href="#l35.316"></a><span id="l35.316" class="difflineplus">+  background-color: var(--appmenu-warning-background-color-active);</span>
<a href="#l35.317"></a><span id="l35.317"> }</span>
<a href="#l35.318"></a><span id="l35.318"> </span>
<a href="#l35.319"></a><span id="l35.319"> .addon-banner-item &gt; .toolbarbutton-icon {</span>
<a href="#l35.320"></a><span id="l35.320">   width: 16px;</span>
<a href="#l35.321"></a><span id="l35.321">   height: 16px;</span>
<a href="#l35.322"></a><span id="l35.322"> }</span>
<a href="#l35.323"></a><span id="l35.323"> </span>
<a href="#l35.324"></a><span id="l35.324"> .addon-banner-item::after {</span>
<a href="#l35.325"></a><span id="l35.325" class="difflineat">@@ -591,30 +613,30 @@ toolbarbutton[constrain-size=&quot;true&quot;][cui</span>
<a href="#l35.326"></a><span id="l35.326"> #appMenu-fxa-container[fxastatus=&quot;unverified&quot;] &gt; #appMenu-fxa-status &gt; #appMenu-fxa-label,</span>
<a href="#l35.327"></a><span id="l35.327"> #appMenu-fxa-container[fxastatus=&quot;login-failed&quot;] &gt; #appMenu-fxa-status &gt; #appMenu-fxa-label {</span>
<a href="#l35.328"></a><span id="l35.328">   list-style-image: url(chrome://browser/skin/warning.svg);</span>
<a href="#l35.329"></a><span id="l35.329">   -moz-image-region: rect(0, 16px, 16px, 0);</span>
<a href="#l35.330"></a><span id="l35.330"> }</span>
<a href="#l35.331"></a><span id="l35.331"> </span>
<a href="#l35.332"></a><span id="l35.332"> #appMenu-fxa-container[fxastatus=&quot;login-failed&quot;],</span>
<a href="#l35.333"></a><span id="l35.333"> #appMenu-fxa-container[fxastatus=&quot;unverified&quot;] {</span>
<a href="#l35.334"></a><span id="l35.334" class="difflineminus">-  background-color: @appmenuWarningBackgroundColor@;</span>
<a href="#l35.335"></a><span id="l35.335" class="difflineminus">-  color: @appmenuWarningColor@;</span>
<a href="#l35.336"></a><span id="l35.336" class="difflineminus">-  border-top: 1px solid @appmenuWarningBorderColor@;</span>
<a href="#l35.337"></a><span id="l35.337" class="difflineminus">-  border-bottom: 1px solid @appmenuWarningBorderColor@;</span>
<a href="#l35.338"></a><span id="l35.338" class="difflineplus">+  background-color: var(--appmenu-warning-background-color);</span>
<a href="#l35.339"></a><span id="l35.339" class="difflineplus">+  color: var(--appmenu-warning-color);</span>
<a href="#l35.340"></a><span id="l35.340" class="difflineplus">+  border-top: 1px solid var(--appmenu-warning-border-color);</span>
<a href="#l35.341"></a><span id="l35.341" class="difflineplus">+  border-bottom: 1px solid var(--appmenu-warning-border-color);</span>
<a href="#l35.342"></a><span id="l35.342"> }</span>
<a href="#l35.343"></a><span id="l35.343"> </span>
<a href="#l35.344"></a><span id="l35.344"> #appMenu-fxa-container[fxastatus=&quot;login-failed&quot;] &gt; #appMenu-fxa-status:hover,</span>
<a href="#l35.345"></a><span id="l35.345"> #appMenu-fxa-container[fxastatus=&quot;unverified&quot;] &gt; #appMenu-fxa-status:hover {</span>
<a href="#l35.346"></a><span id="l35.346" class="difflineminus">-  background-color: @appmenuWarningBackgroundColorHover@;</span>
<a href="#l35.347"></a><span id="l35.347" class="difflineplus">+  background-color: var(--appmenu-warning-background-color-hover);</span>
<a href="#l35.348"></a><span id="l35.348"> }</span>
<a href="#l35.349"></a><span id="l35.349"> </span>
<a href="#l35.350"></a><span id="l35.350"> #appMenu-fxa-container[fxastatus=&quot;login-failed&quot;] &gt; #appMenu-fxa-status:hover:active,</span>
<a href="#l35.351"></a><span id="l35.351"> #appMenu-fxa-container[fxastatus=&quot;unverified&quot;] &gt; #appMenu-fxa-status:hover:active {</span>
<a href="#l35.352"></a><span id="l35.352" class="difflineminus">-  background-color: @appmenuWarningBackgroundColorActive@;</span>
<a href="#l35.353"></a><span id="l35.353" class="difflineplus">+  background-color: var(--appmenu-warning-background-color-active);</span>
<a href="#l35.354"></a><span id="l35.354"> }</span>
<a href="#l35.355"></a><span id="l35.355"> </span>
<a href="#l35.356"></a><span id="l35.356"> /* Tracking Protection Button &amp; Toggle */</span>
<a href="#l35.357"></a><span id="l35.357"> </span>
<a href="#l35.358"></a><span id="l35.358"> #appMenu-tp-label {</span>
<a href="#l35.359"></a><span id="l35.359">   -moz-context-properties: fill;</span>
<a href="#l35.360"></a><span id="l35.360">   fill: currentColor;</span>
<a href="#l35.361"></a><span id="l35.361">   -moz-box-flex: 1;</span>
<a href="#l35.362"></a><span id="l35.362" class="difflineat">@@ -649,46 +671,46 @@ toolbarbutton[constrain-size=&quot;true&quot;][cui</span>
<a href="#l35.363"></a><span id="l35.363"> </span>
<a href="#l35.364"></a><span id="l35.364"> .addon-banner-item {</span>
<a href="#l35.365"></a><span id="l35.365">   flex: 1;</span>
<a href="#l35.366"></a><span id="l35.366">   padding-inline-start: 15px;</span>
<a href="#l35.367"></a><span id="l35.367">   border-inline-start-style: none;</span>
<a href="#l35.368"></a><span id="l35.368"> }</span>
<a href="#l35.369"></a><span id="l35.369"> </span>
<a href="#l35.370"></a><span id="l35.370"> :root[lwt-popup-brighttext] .addon-banner-item {</span>
<a href="#l35.371"></a><span id="l35.371" class="difflineminus">-  color: @appmenuWarningColorBrightText@;</span>
<a href="#l35.372"></a><span id="l35.372" class="difflineminus">-  background: @appmenuWarningBackgroundColorBrightText@;</span>
<a href="#l35.373"></a><span id="l35.373" class="difflineplus">+  color: var(--appmenu-warning-color-bright-text);</span>
<a href="#l35.374"></a><span id="l35.374" class="difflineplus">+  background: var(--appmenu-warning-background-color-bright-text);</span>
<a href="#l35.375"></a><span id="l35.375">   /* override `.addon-banner-item` border-top !important defined above */</span>
<a href="#l35.376"></a><span id="l35.376">   border: 0 !important;</span>
<a href="#l35.377"></a><span id="l35.377"> }</span>
<a href="#l35.378"></a><span id="l35.378"> </span>
<a href="#l35.379"></a><span id="l35.379"> :root[lwt-popup-brighttext] .addon-banner-item:hover,</span>
<a href="#l35.380"></a><span id="l35.380"> :root[lwt-popup-brighttext] .addon-banner-item:focus {</span>
<a href="#l35.381"></a><span id="l35.381" class="difflineminus">-  background: @appmenuWarningBackgroundColorHoverBrightText@;</span>
<a href="#l35.382"></a><span id="l35.382" class="difflineplus">+  background: var(--appmenu-warning-backgound-color-hover-bright-text);</span>
<a href="#l35.383"></a><span id="l35.383"> }</span>
<a href="#l35.384"></a><span id="l35.384"> </span>
<a href="#l35.385"></a><span id="l35.385"> :root[lwt-popup-brighttext] .addon-banner-item:hover:active,</span>
<a href="#l35.386"></a><span id="l35.386"> :root[lwt-popup-brighttext] .addon-banner-item:focus:active {</span>
<a href="#l35.387"></a><span id="l35.387" class="difflineminus">-  background: @appmenuWarningBackgroundColorActiveBrightText@;</span>
<a href="#l35.388"></a><span id="l35.388" class="difflineplus">+  background: var(--appmenu-warning-background-color-active-bright-text);</span>
<a href="#l35.389"></a><span id="l35.389"> }</span>
<a href="#l35.390"></a><span id="l35.390"> </span>
<a href="#l35.391"></a><span id="l35.391"> :root[lwt-popup-brighttext] #appMenu-fxa-container[fxastatus=&quot;login-failed&quot;],</span>
<a href="#l35.392"></a><span id="l35.392"> :root[lwt-popup-brighttext] #appMenu-fxa-container[fxastatus=&quot;unverified&quot;] {</span>
<a href="#l35.393"></a><span id="l35.393" class="difflineminus">-  background-color: @appmenuWarningBackgroundColorBrightText@;</span>
<a href="#l35.394"></a><span id="l35.394" class="difflineminus">-  color: @appmenuWarningColorBrightText@;</span>
<a href="#l35.395"></a><span id="l35.395" class="difflineplus">+  background-color: var(--appmenu-warning-background-color-bright-text);</span>
<a href="#l35.396"></a><span id="l35.396" class="difflineplus">+  color: var(--appmenu-warning-color-bright-text);</span>
<a href="#l35.397"></a><span id="l35.397"> }</span>
<a href="#l35.398"></a><span id="l35.398"> </span>
<a href="#l35.399"></a><span id="l35.399"> :root[lwt-popup-brighttext] #appMenu-fxa-container[fxastatus=&quot;login-failed&quot;] &gt; #appMenu-fxa-status:hover,</span>
<a href="#l35.400"></a><span id="l35.400"> :root[lwt-popup-brighttext] #appMenu-fxa-container[fxastatus=&quot;unverified&quot;] &gt; #appMenu-fxa-status:hover {</span>
<a href="#l35.401"></a><span id="l35.401" class="difflineminus">-  background-color: @appmenuWarningBackgroundColorHoverBrightText@;</span>
<a href="#l35.402"></a><span id="l35.402" class="difflineplus">+  background-color: var(--appmenu-warning-backgound-color-hover-bright-text)</span>
<a href="#l35.403"></a><span id="l35.403"> }</span>
<a href="#l35.404"></a><span id="l35.404"> </span>
<a href="#l35.405"></a><span id="l35.405"> :root[lwt-popup-brighttext] #appMenu-fxa-container[fxastatus=&quot;login-failed&quot;] &gt; #appMenu-fxa-status:hover:active,</span>
<a href="#l35.406"></a><span id="l35.406"> :root[lwt-popup-brighttext] #appMenu-fxa-container[fxastatus=&quot;unverified&quot;] &gt; #appMenu-fxa-status:hover:active {</span>
<a href="#l35.407"></a><span id="l35.407" class="difflineminus">-  background-color: @appmenuWarningBackgroundColorActiveBrightText@;</span>
<a href="#l35.408"></a><span id="l35.408" class="difflineplus">+  background-color: var(--appmenu-warning-background-color-active-bright-text);</span>
<a href="#l35.409"></a><span id="l35.409"> }</span>
<a href="#l35.410"></a><span id="l35.410"> </span>
<a href="#l35.411"></a><span id="l35.411"> /* Firefox Account Toolbar Panel */</span>
<a href="#l35.412"></a><span id="l35.412"> </span>
<a href="#l35.413"></a><span id="l35.413"> #fxa-avatar-image {</span>
<a href="#l35.414"></a><span id="l35.414">   width: 16px;</span>
<a href="#l35.415"></a><span id="l35.415">   height: 16px;</span>
<a href="#l35.416"></a><span id="l35.416"> }</span>
<a href="#l35.417"></a><span id="l35.417" class="difflineat">@@ -744,21 +766,24 @@ toolbarbutton[constrain-size=&quot;true&quot;][cui</span>
<a href="#l35.418"></a><span id="l35.418">   font-weight: normal;</span>
<a href="#l35.419"></a><span id="l35.419">   padding: .6em 0 .6em;</span>
<a href="#l35.420"></a><span id="l35.420"> }</span>
<a href="#l35.421"></a><span id="l35.421"> </span>
<a href="#l35.422"></a><span id="l35.422"> .PanelUI-fxa-signin-instruction-label {</span>
<a href="#l35.423"></a><span id="l35.423">   /* Use 'lighter' font for this to de-emphasize it compared to the title.</span>
<a href="#l35.424"></a><span id="l35.424">    * We use 300 on Linux because 100 is too light (lacks contrast with</span>
<a href="#l35.425"></a><span id="l35.425">    * the background) for some fonts in combination with anti-aliasing. */</span>
<a href="#l35.426"></a><span id="l35.426" class="difflineminus">-%if defined(XP_MACOSX) || defined(XP_WIN)</span>
<a href="#l35.427"></a><span id="l35.427" class="difflineplus">+</span>
<a href="#l35.428"></a><span id="l35.428" class="difflineplus">+/* TODO appmenu */</span>
<a href="#l35.429"></a><span id="l35.429" class="difflineplus">+/* %if defined(XP_MACOSX) || defined(XP_WIN)</span>
<a href="#l35.430"></a><span id="l35.430">   font-weight: lighter;</span>
<a href="#l35.431"></a><span id="l35.431" class="difflineminus">-%else</span>
<a href="#l35.432"></a><span id="l35.432" class="difflineplus">+%else */</span>
<a href="#l35.433"></a><span id="l35.433">   font-weight: 300;</span>
<a href="#l35.434"></a><span id="l35.434" class="difflineminus">-%endif</span>
<a href="#l35.435"></a><span id="l35.435" class="difflineplus">+/* %endif */</span>
<a href="#l35.436"></a><span id="l35.436" class="difflineplus">+</span>
<a href="#l35.437"></a><span id="l35.437"> }</span>
<a href="#l35.438"></a><span id="l35.438"> </span>
<a href="#l35.439"></a><span id="l35.439"> .fxa-avatar-subpanel {</span>
<a href="#l35.440"></a><span id="l35.440">   padding-top: 8px;</span>
<a href="#l35.441"></a><span id="l35.441">   padding-bottom: 4px;</span>
<a href="#l35.442"></a><span id="l35.442"> }</span>
<a href="#l35.443"></a><span id="l35.443"> </span>
<a href="#l35.444"></a><span id="l35.444"> .fxa-avatar-subpanel-description {</span>
<a href="#l35.445"></a><span id="l35.445" class="difflineat">@@ -1103,17 +1128,17 @@ panelview .toolbarbutton-1,</span>
<a href="#l35.446"></a><span id="l35.446"> </span>
<a href="#l35.447"></a><span id="l35.447"> .subviewbutton[shortcut]::after {</span>
<a href="#l35.448"></a><span id="l35.448">   content: attr(shortcut);</span>
<a href="#l35.449"></a><span id="l35.449">   float: right;</span>
<a href="#l35.450"></a><span id="l35.450"> }</span>
<a href="#l35.451"></a><span id="l35.451"> </span>
<a href="#l35.452"></a><span id="l35.452"> .PanelUI-subView .subviewbutton-nav::after {</span>
<a href="#l35.453"></a><span id="l35.453">   -moz-context-properties: fill, fill-opacity;</span>
<a href="#l35.454"></a><span id="l35.454" class="difflineminus">-  content: url(chrome://browser/skin/back-12.svg);</span>
<a href="#l35.455"></a><span id="l35.455" class="difflineplus">+  content: url(&quot;chrome://messenger/skin/icons/back-12.svg&quot;);</span>
<a href="#l35.456"></a><span id="l35.456">   fill: currentColor;</span>
<a href="#l35.457"></a><span id="l35.457">   fill-opacity: 0.6;</span>
<a href="#l35.458"></a><span id="l35.458">   float: right;</span>
<a href="#l35.459"></a><span id="l35.459">   transform: translateY(1px);</span>
<a href="#l35.460"></a><span id="l35.460"> }</span>
<a href="#l35.461"></a><span id="l35.461"> </span>
<a href="#l35.462"></a><span id="l35.462"> #main-window:not([customizing]) .subviewbutton-nav[disabled=true]::after {</span>
<a href="#l35.463"></a><span id="l35.463">   opacity: 0.4;</span>
<a href="#l35.464"></a><span id="l35.464" class="difflineat">@@ -1154,17 +1179,17 @@ panelview .toolbarbutton-1,</span>
<a href="#l35.465"></a><span id="l35.465">   color: inherit;</span>
<a href="#l35.466"></a><span id="l35.466"> }</span>
<a href="#l35.467"></a><span id="l35.467"> </span>
<a href="#l35.468"></a><span id="l35.468"> #appMenu-popup .toolbaritem-combined-buttons {</span>
<a href="#l35.469"></a><span id="l35.469">   -moz-box-align: center;</span>
<a href="#l35.470"></a><span id="l35.470">   -moz-box-orient: horizontal;</span>
<a href="#l35.471"></a><span id="l35.471">   border: 0;</span>
<a href="#l35.472"></a><span id="l35.472">   border-radius: 0;</span>
<a href="#l35.473"></a><span id="l35.473" class="difflineminus">-  margin-inline-end: 8px;</span>
<a href="#l35.474"></a><span id="l35.474" class="difflineplus">+  margin-inline-end: 6px;</span>
<a href="#l35.475"></a><span id="l35.475"> }</span>
<a href="#l35.476"></a><span id="l35.476"> </span>
<a href="#l35.477"></a><span id="l35.477"> panelmultiview .toolbaritem-combined-buttons &gt; label {</span>
<a href="#l35.478"></a><span id="l35.478">   -moz-box-flex: 1;</span>
<a href="#l35.479"></a><span id="l35.479">   margin: 0;</span>
<a href="#l35.480"></a><span id="l35.480">   padding: 4px 0px;</span>
<a href="#l35.481"></a><span id="l35.481"> }</span>
<a href="#l35.482"></a><span id="l35.482"> </span>
<a href="#l35.483"></a><span id="l35.483" class="difflineat">@@ -1193,21 +1218,21 @@ panelmultiview .toolbaritem-combined-but</span>
<a href="#l35.484"></a><span id="l35.484"> #appMenu-zoomReset-button {</span>
<a href="#l35.485"></a><span id="l35.485">   min-height: unset;</span>
<a href="#l35.486"></a><span id="l35.486">   border: 1px solid var(--panel-separator-color);</span>
<a href="#l35.487"></a><span id="l35.487">   border-radius: 10000px;</span>
<a href="#l35.488"></a><span id="l35.488">   padding: 1px 8px;</span>
<a href="#l35.489"></a><span id="l35.489">   background-color: var(--arrowpanel-dimmed);</span>
<a href="#l35.490"></a><span id="l35.490"> }</span>
<a href="#l35.491"></a><span id="l35.491"> </span>
<a href="#l35.492"></a><span id="l35.492" class="difflineminus">-#appMenu-zoomReset-button@buttonStateHover@ {</span>
<a href="#l35.493"></a><span id="l35.493" class="difflineplus">+#appMenu-zoomReset-button:not(:-moz-any([disabled],[open],:active)):-moz-any(:hover,:focus) {</span>
<a href="#l35.494"></a><span id="l35.494">   background-color: var(--arrowpanel-dimmed-further);</span>
<a href="#l35.495"></a><span id="l35.495"> }</span>
<a href="#l35.496"></a><span id="l35.496"> </span>
<a href="#l35.497"></a><span id="l35.497" class="difflineminus">-#appMenu-zoomReset-button@buttonStateActive@ {</span>
<a href="#l35.498"></a><span id="l35.498" class="difflineplus">+#appMenu-zoomReset-button:not([disabled]):-moz-any([open],:hover:active) {</span>
<a href="#l35.499"></a><span id="l35.499">   background-color: var(--arrowpanel-dimmed-even-further);</span>
<a href="#l35.500"></a><span id="l35.500"> }</span>
<a href="#l35.501"></a><span id="l35.501"> </span>
<a href="#l35.502"></a><span id="l35.502"> #appMenu-zoomReset-button &gt; .toolbarbutton-text {</span>
<a href="#l35.503"></a><span id="l35.503">   min-width: calc(3ch + 8px);</span>
<a href="#l35.504"></a><span id="l35.504">   text-align: center;</span>
<a href="#l35.505"></a><span id="l35.505"> }</span>
<a href="#l35.506"></a><span id="l35.506"> </span>
<a href="#l35.507"></a><span id="l35.507" class="difflineat">@@ -1227,53 +1252,53 @@ panelmultiview .toolbaritem-combined-but</span>
<a href="#l35.508"></a><span id="l35.508"> .subview-subheader {</span>
<a href="#l35.509"></a><span id="l35.509">   color: var(--panel-disabled-color);</span>
<a href="#l35.510"></a><span id="l35.510"> }</span>
<a href="#l35.511"></a><span id="l35.511"> </span>
<a href="#l35.512"></a><span id="l35.512"> panelview .toolbarbutton-1 {</span>
<a href="#l35.513"></a><span id="l35.513">   margin-top: 6px;</span>
<a href="#l35.514"></a><span id="l35.514"> }</span>
<a href="#l35.515"></a><span id="l35.515"> </span>
<a href="#l35.516"></a><span id="l35.516" class="difflineminus">-panelview .toolbarbutton-1@buttonStateHover@,</span>
<a href="#l35.517"></a><span id="l35.517" class="difflineminus">-toolbarbutton.subviewbutton@buttonStateHover@,</span>
<a href="#l35.518"></a><span id="l35.518" class="difflineminus">-.navigable.subviewbutton@buttonStateHover@,</span>
<a href="#l35.519"></a><span id="l35.519" class="difflineminus">-menu.subviewbutton@menuStateHover@,</span>
<a href="#l35.520"></a><span id="l35.520" class="difflineminus">-menuitem.subviewbutton@menuStateHover@,</span>
<a href="#l35.521"></a><span id="l35.521" class="difflineminus">-.widget-overflow-list .toolbarbutton-1@buttonStateHover@,</span>
<a href="#l35.522"></a><span id="l35.522" class="difflineminus">-.toolbaritem-combined-buttons@inAnyPanel@ &gt; toolbarbutton@buttonStateHover@ {</span>
<a href="#l35.523"></a><span id="l35.523" class="difflineplus">+panelview .toolbarbutton-1:not(:-moz-any([disabled],[open],:active)):-moz-any(:hover,:focus),</span>
<a href="#l35.524"></a><span id="l35.524" class="difflineplus">+toolbarbutton.subviewbutton:not(:-moz-any([disabled],[open],:active)):-moz-any(:hover,:focus),</span>
<a href="#l35.525"></a><span id="l35.525" class="difflineplus">+.navigable.subviewbutton:not(:-moz-any([disabled],[open],:active)):-moz-any(:hover,:focus),</span>
<a href="#l35.526"></a><span id="l35.526" class="difflineplus">+menu.subviewbutton:not(:-moz-any([disabled],:active))[_moz-menuactive],</span>
<a href="#l35.527"></a><span id="l35.527" class="difflineplus">+menuitem.subviewbutton:not(:-moz-any([disabled],:active))[_moz-menuactive],</span>
<a href="#l35.528"></a><span id="l35.528" class="difflineplus">+.widget-overflow-list .toolbarbutton-1:not(:-moz-any([disabled],[open],:active)):-moz-any(:hover,:focus),</span>
<a href="#l35.529"></a><span id="l35.529" class="difflineplus">+.toolbaritem-combined-buttons:-moz-any(:not([cui-areatype=&quot;toolbar&quot;]), [overflowedItem=true]) &gt; toolbarbutton:not(:-moz-any([disabled],[open],:active)):-moz-any(:hover,:focus) {</span>
<a href="#l35.530"></a><span id="l35.530">   color: inherit;</span>
<a href="#l35.531"></a><span id="l35.531">   background-color: var(--arrowpanel-dimmed);</span>
<a href="#l35.532"></a><span id="l35.532"> }</span>
<a href="#l35.533"></a><span id="l35.533"> </span>
<a href="#l35.534"></a><span id="l35.534" class="difflineminus">-panelview .toolbarbutton-1@buttonStateActive@,</span>
<a href="#l35.535"></a><span id="l35.535" class="difflineminus">-toolbarbutton.subviewbutton@buttonStateActive@,</span>
<a href="#l35.536"></a><span id="l35.536" class="difflineminus">-.navigable.subviewbutton@buttonStateActive@,</span>
<a href="#l35.537"></a><span id="l35.537" class="difflineminus">-menu.subviewbutton@menuStateActive@,</span>
<a href="#l35.538"></a><span id="l35.538" class="difflineminus">-menuitem.subviewbutton@menuStateActive@,</span>
<a href="#l35.539"></a><span id="l35.539" class="difflineminus">-.widget-overflow-list .toolbarbutton-1@buttonStateActive@,</span>
<a href="#l35.540"></a><span id="l35.540" class="difflineminus">-.toolbaritem-combined-buttons@inAnyPanel@ &gt; toolbarbutton@buttonStateActive@ {</span>
<a href="#l35.541"></a><span id="l35.541" class="difflineplus">+panelview .toolbarbutton-1:not([disabled]):-moz-any([open],:hover:active),</span>
<a href="#l35.542"></a><span id="l35.542" class="difflineplus">+toolbarbutton.subviewbutton:not([disabled]):-moz-any([open],:hover:active),</span>
<a href="#l35.543"></a><span id="l35.543" class="difflineplus">+.navigable.subviewbutton:not([disabled]):-moz-any([open],:hover:active),</span>
<a href="#l35.544"></a><span id="l35.544" class="difflineplus">+menu.subviewbutton:not([disabled])[_moz-menuactive]:active,</span>
<a href="#l35.545"></a><span id="l35.545" class="difflineplus">+menuitem.subviewbutton:not([disabled])[_moz-menuactive]:active,</span>
<a href="#l35.546"></a><span id="l35.546" class="difflineplus">+.widget-overflow-list .toolbarbutton-1:not([disabled]):-moz-any([open],:hover:active),</span>
<a href="#l35.547"></a><span id="l35.547" class="difflineplus">+.toolbaritem-combined-buttons:-moz-any(:not([cui-areatype=&quot;toolbar&quot;]), [overflowedItem=true]) &gt; toolbarbutton:not([disabled]):-moz-any([open],:hover:active) {</span>
<a href="#l35.548"></a><span id="l35.548">   color: inherit;</span>
<a href="#l35.549"></a><span id="l35.549">   background-color: var(--arrowpanel-dimmed-further);</span>
<a href="#l35.550"></a><span id="l35.550">   box-shadow: 0 1px 0 hsla(210,4%,10%,.03) inset;</span>
<a href="#l35.551"></a><span id="l35.551"> }</span>
<a href="#l35.552"></a><span id="l35.552"> </span>
<a href="#l35.553"></a><span id="l35.553"> .subviewbutton.panel-subview-footer {</span>
<a href="#l35.554"></a><span id="l35.554">   margin: 0;</span>
<a href="#l35.555"></a><span id="l35.555">   background-color: var(--arrowpanel-dimmed);</span>
<a href="#l35.556"></a><span id="l35.556">   border-top: 1px solid var(--panel-separator-color);</span>
<a href="#l35.557"></a><span id="l35.557">   border-radius: 0;</span>
<a href="#l35.558"></a><span id="l35.558"> }</span>
<a href="#l35.559"></a><span id="l35.559"> </span>
<a href="#l35.560"></a><span id="l35.560" class="difflineminus">-menuitem.panel-subview-footer@menuStateHover@,</span>
<a href="#l35.561"></a><span id="l35.561" class="difflineminus">-.subviewbutton.panel-subview-footer@buttonStateHover@ {</span>
<a href="#l35.562"></a><span id="l35.562" class="difflineplus">+menuitem.panel-subview-footer:not(:-moz-any([disabled],:active))[_moz-menuactive],</span>
<a href="#l35.563"></a><span id="l35.563" class="difflineplus">+.subviewbutton.panel-subview-footer:not(:-moz-any([disabled],[open],:active)):-moz-any(:hover,:focus) {</span>
<a href="#l35.564"></a><span id="l35.564">   background-color: var(--arrowpanel-dimmed-further);</span>
<a href="#l35.565"></a><span id="l35.565"> }</span>
<a href="#l35.566"></a><span id="l35.566"> </span>
<a href="#l35.567"></a><span id="l35.567" class="difflineminus">-menuitem.panel-subview-footer@menuStateActive@,</span>
<a href="#l35.568"></a><span id="l35.568" class="difflineminus">-.subviewbutton.panel-subview-footer@buttonStateActive@ {</span>
<a href="#l35.569"></a><span id="l35.569" class="difflineplus">+menuitem.panel-subview-footer:not([disabled])[_moz-menuactive]:active,</span>
<a href="#l35.570"></a><span id="l35.570" class="difflineplus">+.subviewbutton.panel-subview-footer:not([disabled]):-moz-any([open],:hover:active) {</span>
<a href="#l35.571"></a><span id="l35.571">   background-color: var(--arrowpanel-dimmed-even-further);</span>
<a href="#l35.572"></a><span id="l35.572">   box-shadow: 0 1px 0 hsla(210,4%,10%,.05) inset;</span>
<a href="#l35.573"></a><span id="l35.573"> }</span>
<a href="#l35.574"></a><span id="l35.574"> </span>
<a href="#l35.575"></a><span id="l35.575"> #BMB_bookmarksPopup .subviewbutton:not([disabled=&quot;true&quot;]) {</span>
<a href="#l35.576"></a><span id="l35.576">   color: inherit;</span>
<a href="#l35.577"></a><span id="l35.577"> }</span>
<a href="#l35.578"></a><span id="l35.578"> </span>
<a href="#l35.579"></a><span id="l35.579" class="difflineat">@@ -1397,85 +1422,88 @@ toolbarpaletteitem[place=&quot;palette&quot;] &gt; .t</span>
<a href="#l35.580"></a><span id="l35.580"> </span>
<a href="#l35.581"></a><span id="l35.581"> toolbarpaletteitem[place=&quot;palette&quot;] &gt; #search-container {</span>
<a href="#l35.582"></a><span id="l35.582">   min-width: 7em;</span>
<a href="#l35.583"></a><span id="l35.583">   width: 7em;</span>
<a href="#l35.584"></a><span id="l35.584">   min-height: 37px;</span>
<a href="#l35.585"></a><span id="l35.585">   max-height: 37px;</span>
<a href="#l35.586"></a><span id="l35.586"> }</span>
<a href="#l35.587"></a><span id="l35.587"> </span>
<a href="#l35.588"></a><span id="l35.588" class="difflineminus">-.toolbaritem-combined-buttons@inAnyPanel@ &gt; toolbarbutton {</span>
<a href="#l35.589"></a><span id="l35.589" class="difflineplus">+.toolbaritem-combined-buttons:-moz-any(:not([cui-areatype=&quot;toolbar&quot;]), [overflowedItem=true]) &gt; toolbarbutton {</span>
<a href="#l35.590"></a><span id="l35.590">   border: 0;</span>
<a href="#l35.591"></a><span id="l35.591">   margin: 0;</span>
<a href="#l35.592"></a><span id="l35.592">   -moz-box-flex: 1;</span>
<a href="#l35.593"></a><span id="l35.593">   padding-top: 4px;</span>
<a href="#l35.594"></a><span id="l35.594">   padding-bottom: 4px;</span>
<a href="#l35.595"></a><span id="l35.595">   -moz-box-orient: horizontal;</span>
<a href="#l35.596"></a><span id="l35.596"> }</span>
<a href="#l35.597"></a><span id="l35.597"> </span>
<a href="#l35.598"></a><span id="l35.598"> /* In customize mode, extend the buttons *only* in the panel, just to make them not look stupid */</span>
<a href="#l35.599"></a><span id="l35.599"> toolbarpaletteitem[place=&quot;menu-panel&quot;] &gt; .toolbaritem-combined-buttons &gt; toolbarbutton {</span>
<a href="#l35.600"></a><span id="l35.600" class="difflineminus">-  min-width: calc(@menuPanelButtonWidth@ - 1px);</span>
<a href="#l35.601"></a><span id="l35.601" class="difflineminus">-  max-width: calc(@menuPanelButtonWidth@ - 1px);</span>
<a href="#l35.602"></a><span id="l35.602" class="difflineplus">+  min-width: var(--menu-panel-button-width);</span>
<a href="#l35.603"></a><span id="l35.603" class="difflineplus">+  max-width: var(--menu-panel-button-width);</span>
<a href="#l35.604"></a><span id="l35.604"> }</span>
<a href="#l35.605"></a><span id="l35.605"> </span>
<a href="#l35.606"></a><span id="l35.606" class="difflineminus">-.toolbaritem-combined-buttons@inAnyPanel@ &gt; toolbarbutton:not(.toolbarbutton-1)[disabled] {</span>
<a href="#l35.607"></a><span id="l35.607" class="difflineplus">+.toolbaritem-combined-buttons:-moz-any(:not([cui-areatype=&quot;toolbar&quot;]), [overflowedItem=true]) &gt; toolbarbutton:not(.toolbarbutton-1)[disabled] {</span>
<a href="#l35.608"></a><span id="l35.608">   opacity: 0.4;</span>
<a href="#l35.609"></a><span id="l35.609">   /* Override toolbarbutton.css which sets the color to GrayText */</span>
<a href="#l35.610"></a><span id="l35.610">   color: inherit;</span>
<a href="#l35.611"></a><span id="l35.611"> }</span>
<a href="#l35.612"></a><span id="l35.612"> </span>
<a href="#l35.613"></a><span id="l35.613"> #zoom-controls[cui-areatype=&quot;toolbar&quot;] &gt; #zoom-reset-button &gt; .toolbarbutton-text {</span>
<a href="#l35.614"></a><span id="l35.614" class="difflineminus">-%ifdef XP_MACOSX</span>
<a href="#l35.615"></a><span id="l35.615" class="difflineplus">+</span>
<a href="#l35.616"></a><span id="l35.616" class="difflineplus">+/* TODO appmenu */</span>
<a href="#l35.617"></a><span id="l35.617" class="difflineplus">+/* %ifdef XP_MACOSX</span>
<a href="#l35.618"></a><span id="l35.618">   min-width: 6ch;</span>
<a href="#l35.619"></a><span id="l35.619" class="difflineminus">-%else</span>
<a href="#l35.620"></a><span id="l35.620" class="difflineplus">+%else */</span>
<a href="#l35.621"></a><span id="l35.621">   min-width: 7ch;</span>
<a href="#l35.622"></a><span id="l35.622" class="difflineminus">-%endif</span>
<a href="#l35.623"></a><span id="l35.623" class="difflineplus">+/* %endif */</span>
<a href="#l35.624"></a><span id="l35.624" class="difflineplus">+</span>
<a href="#l35.625"></a><span id="l35.625"> }</span>
<a href="#l35.626"></a><span id="l35.626"> </span>
<a href="#l35.627"></a><span id="l35.627" class="difflineminus">-.toolbaritem-combined-buttons@inAnyPanel@ &gt; separator {</span>
<a href="#l35.628"></a><span id="l35.628" class="difflineplus">+.toolbaritem-combined-buttons:-moz-any(:not([cui-areatype=&quot;toolbar&quot;]), [overflowedItem=true]) &gt; separator {</span>
<a href="#l35.629"></a><span id="l35.629">   -moz-appearance: none;</span>
<a href="#l35.630"></a><span id="l35.630">   -moz-box-align: stretch;</span>
<a href="#l35.631"></a><span id="l35.631">   margin: .5em 0;</span>
<a href="#l35.632"></a><span id="l35.632">   width: 1px;</span>
<a href="#l35.633"></a><span id="l35.633">   height: auto;</span>
<a href="#l35.634"></a><span id="l35.634">   background: var(--panel-separator-color);</span>
<a href="#l35.635"></a><span id="l35.635">   transition-property: margin;</span>
<a href="#l35.636"></a><span id="l35.636">   transition-duration: 10ms;</span>
<a href="#l35.637"></a><span id="l35.637">   transition-timing-function: ease;</span>
<a href="#l35.638"></a><span id="l35.638"> }</span>
<a href="#l35.639"></a><span id="l35.639"> </span>
<a href="#l35.640"></a><span id="l35.640" class="difflineminus">-.toolbaritem-combined-buttons@inAnyPanel@:hover &gt; separator {</span>
<a href="#l35.641"></a><span id="l35.641" class="difflineplus">+.toolbaritem-combined-buttons:-moz-any(:not([cui-areatype=&quot;toolbar&quot;]), [overflowedItem=true]):hover &gt; separator {</span>
<a href="#l35.642"></a><span id="l35.642">   margin: 0;</span>
<a href="#l35.643"></a><span id="l35.643"> }</span>
<a href="#l35.644"></a><span id="l35.644"> </span>
<a href="#l35.645"></a><span id="l35.645"> #widget-overflow &gt; .panel-arrowcontainer &gt; .panel-arrowcontent {</span>
<a href="#l35.646"></a><span id="l35.646">   padding: 0;</span>
<a href="#l35.647"></a><span id="l35.647"> }</span>
<a href="#l35.648"></a><span id="l35.648"> </span>
<a href="#l35.649"></a><span id="l35.649"> #widget-overflow-mainView .panel-subview-body {</span>
<a href="#l35.650"></a><span id="l35.650">   overflow-y: auto;</span>
<a href="#l35.651"></a><span id="l35.651">   overflow-x: hidden;</span>
<a href="#l35.652"></a><span id="l35.652"> }</span>
<a href="#l35.653"></a><span id="l35.653"> </span>
<a href="#l35.654"></a><span id="l35.654"> .widget-overflow-list {</span>
<a href="#l35.655"></a><span id="l35.655" class="difflineminus">-  width: @wideMenuPanelWidth@;</span>
<a href="#l35.656"></a><span id="l35.656" class="difflineplus">+  width: var(--wide-menu-panel-width);</span>
<a href="#l35.657"></a><span id="l35.657"> }</span>
<a href="#l35.658"></a><span id="l35.658"> </span>
<a href="#l35.659"></a><span id="l35.659"> /* In customize mode, the overflow list is constrained by its container,</span>
<a href="#l35.660"></a><span id="l35.660">  * so we set width: auto to avoid the scrollbar not fitting.</span>
<a href="#l35.661"></a><span id="l35.661">  */</span>
<a href="#l35.662"></a><span id="l35.662"> #customization-panelHolder &gt; .widget-overflow-list {</span>
<a href="#l35.663"></a><span id="l35.663">   width: auto;</span>
<a href="#l35.664"></a><span id="l35.664"> }</span>
<a href="#l35.665"></a><span id="l35.665"> </span>
<a href="#l35.666"></a><span id="l35.666"> toolbaritem[overflowedItem=true],</span>
<a href="#l35.667"></a><span id="l35.667"> .widget-overflow-list .toolbarbutton-1 {</span>
<a href="#l35.668"></a><span id="l35.668">   width: 100%;</span>
<a href="#l35.669"></a><span id="l35.669" class="difflineminus">-  max-width: @wideMenuPanelWidth@;</span>
<a href="#l35.670"></a><span id="l35.670" class="difflineplus">+  max-width: var(--wide-menu-panel-width);</span>
<a href="#l35.671"></a><span id="l35.671">   background-repeat: no-repeat;</span>
<a href="#l35.672"></a><span id="l35.672">   background-position: 0 center;</span>
<a href="#l35.673"></a><span id="l35.673"> }</span>
<a href="#l35.674"></a><span id="l35.674"> </span>
<a href="#l35.675"></a><span id="l35.675"> .widget-overflow-list .toolbarbutton-1 {</span>
<a href="#l35.676"></a><span id="l35.676">   -moz-box-align: center;</span>
<a href="#l35.677"></a><span id="l35.677">   -moz-box-orient: horizontal;</span>
<a href="#l35.678"></a><span id="l35.678"> }</span>
<a href="#l35.679"></a><span id="l35.679" class="difflineat">@@ -1548,24 +1576,24 @@ toolbarpaletteitem[place=&quot;menu-panel&quot;] &gt;</span>
<a href="#l35.680"></a><span id="l35.680">   -moz-box-align: center;</span>
<a href="#l35.681"></a><span id="l35.681">   padding: 1px;</span>
<a href="#l35.682"></a><span id="l35.682">   margin: 0 0 2px;</span>
<a href="#l35.683"></a><span id="l35.683">   background-color: transparent;</span>
<a href="#l35.684"></a><span id="l35.684">   border-radius: 2px;</span>
<a href="#l35.685"></a><span id="l35.685">   border: 1px solid transparent;</span>
<a href="#l35.686"></a><span id="l35.686"> }</span>
<a href="#l35.687"></a><span id="l35.687"> </span>
<a href="#l35.688"></a><span id="l35.688" class="difflineminus">-.subviewradio@buttonStateHover@ {</span>
<a href="#l35.689"></a><span id="l35.689" class="difflineplus">+.subviewradio:not(:-moz-any([disabled],[open],:active)):-moz-any(:hover,:focus) {</span>
<a href="#l35.690"></a><span id="l35.690">   background-color: var(--arrowpanel-dimmed);</span>
<a href="#l35.691"></a><span id="l35.691">   border-color: var(--panel-separator-color);</span>
<a href="#l35.692"></a><span id="l35.692"> }</span>
<a href="#l35.693"></a><span id="l35.693"> </span>
<a href="#l35.694"></a><span id="l35.694"> .subviewradio[selected],</span>
<a href="#l35.695"></a><span id="l35.695"> .subviewradio[selected]:hover,</span>
<a href="#l35.696"></a><span id="l35.696" class="difflineminus">-.subviewradio@buttonStateActive@ {</span>
<a href="#l35.697"></a><span id="l35.697" class="difflineplus">+.subviewradio:not([disabled]):-moz-any([open],:hover:active) {</span>
<a href="#l35.698"></a><span id="l35.698">   background-color: var(--arrowpanel-dimmed-further);</span>
<a href="#l35.699"></a><span id="l35.699">   border-color: var(--panel-separator-color);</span>
<a href="#l35.700"></a><span id="l35.700">   box-shadow: 0 1px 0 hsla(210,4%,10%,.03) inset;</span>
<a href="#l35.701"></a><span id="l35.701"> }</span>
<a href="#l35.702"></a><span id="l35.702"> </span>
<a href="#l35.703"></a><span id="l35.703"> .subviewradio &gt; .radio-check {</span>
<a href="#l35.704"></a><span id="l35.704">   -moz-appearance: none;</span>
<a href="#l35.705"></a><span id="l35.705">   width: 16px;</span>
<a href="#l35.706"></a><span id="l35.706" class="difflineat">@@ -1718,17 +1746,17 @@ toolbarpaletteitem[place=&quot;menu-panel&quot;] &gt;</span>
<a href="#l35.707"></a><span id="l35.707"> .panel-header &gt; .subviewbutton-back + label {</span>
<a href="#l35.708"></a><span id="l35.708">   /* Add the size of the back button to center properly. */</span>
<a href="#l35.709"></a><span id="l35.709">   margin-inline-end: 32px;</span>
<a href="#l35.710"></a><span id="l35.710"> }</span>
<a href="#l35.711"></a><span id="l35.711"> </span>
<a href="#l35.712"></a><span id="l35.712"> .panel-header &gt; .subviewbutton-back {</span>
<a href="#l35.713"></a><span id="l35.713">   -moz-context-properties: fill;</span>
<a href="#l35.714"></a><span id="l35.714">   fill: var(--arrowpanel-color);</span>
<a href="#l35.715"></a><span id="l35.715" class="difflineminus">-  list-style-image: url(chrome://browser/skin/arrow-left.svg);</span>
<a href="#l35.716"></a><span id="l35.716" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/arrow-left.svg&quot;);</span>
<a href="#l35.717"></a><span id="l35.717">   padding: 8px;</span>
<a href="#l35.718"></a><span id="l35.718"> }</span>
<a href="#l35.719"></a><span id="l35.719"> </span>
<a href="#l35.720"></a><span id="l35.720"> .subviewbutton-back:-moz-locale-dir(rtl) {</span>
<a href="#l35.721"></a><span id="l35.721">   transform: scaleX(-1);</span>
<a href="#l35.722"></a><span id="l35.722"> }</span>
<a href="#l35.723"></a><span id="l35.723"> </span>
<a href="#l35.724"></a><span id="l35.724"> .subviewbutton-back &gt; .toolbarbutton-text {</span>
<a href="#l35.725"></a><span id="l35.725" class="difflineat">@@ -1758,34 +1786,37 @@ toolbarpaletteitem[place=&quot;menu-panel&quot;] &gt;</span>
<a href="#l35.726"></a><span id="l35.726">   font-size: .9em;</span>
<a href="#l35.727"></a><span id="l35.727"> }</span>
<a href="#l35.728"></a><span id="l35.728"> </span>
<a href="#l35.729"></a><span id="l35.729"> .subviewbutton.download &gt; .action-button {</span>
<a href="#l35.730"></a><span id="l35.730">   -moz-appearance: none; /* To avoid native Windows hover styling */</span>
<a href="#l35.731"></a><span id="l35.731">   -moz-context-properties: fill, fill-opacity;</span>
<a href="#l35.732"></a><span id="l35.732">   fill: currentColor;</span>
<a href="#l35.733"></a><span id="l35.733">   fill-opacity: 1;</span>
<a href="#l35.734"></a><span id="l35.734" class="difflineminus">-%ifdef XP_MACOSX</span>
<a href="#l35.735"></a><span id="l35.735" class="difflineplus">+</span>
<a href="#l35.736"></a><span id="l35.736" class="difflineplus">+/* TODO appmenu */</span>
<a href="#l35.737"></a><span id="l35.737" class="difflineplus">+/* %ifdef XP_MACOSX</span>
<a href="#l35.738"></a><span id="l35.738">   list-style-image: url(&quot;chrome://browser/skin/search-glass.svg&quot;);</span>
<a href="#l35.739"></a><span id="l35.739" class="difflineminus">-%else</span>
<a href="#l35.740"></a><span id="l35.740" class="difflineplus">+%else */</span>
<a href="#l35.741"></a><span id="l35.741">   list-style-image: url(&quot;chrome://browser/skin/folder.svg&quot;);</span>
<a href="#l35.742"></a><span id="l35.742" class="difflineminus">-%endif</span>
<a href="#l35.743"></a><span id="l35.743" class="difflineminus">-  /* Measurement to vertically center this button: 1 line of text minus half of 4px top margin. */</span>
<a href="#l35.744"></a><span id="l35.744" class="difflineplus">+/* %endif */</span>
<a href="#l35.745"></a><span id="l35.745" class="difflineplus">+</span>
<a href="#l35.746"></a><span id="l35.746" class="difflineplus">+/* Measurement to vertically center this button: 1 line of text minus half of 4px top margin. */</span>
<a href="#l35.747"></a><span id="l35.747">   margin: calc(1em - 2px) 0 0;</span>
<a href="#l35.748"></a><span id="l35.748">   padding: 4px;</span>
<a href="#l35.749"></a><span id="l35.749"> }</span>
<a href="#l35.750"></a><span id="l35.750"> </span>
<a href="#l35.751"></a><span id="l35.751"> .subviewbutton.download[canRetry] &gt; .action-button {</span>
<a href="#l35.752"></a><span id="l35.752">   list-style-image: url(&quot;chrome://browser/skin/reload.svg&quot;);</span>
<a href="#l35.753"></a><span id="l35.753"> }</span>
<a href="#l35.754"></a><span id="l35.754"> </span>
<a href="#l35.755"></a><span id="l35.755"> .subviewbutton.download:not([canShow]):not([canRetry]) &gt; .action-button {</span>
<a href="#l35.756"></a><span id="l35.756">   fill: currentColor;</span>
<a href="#l35.757"></a><span id="l35.757">   fill-opacity: 0.4;</span>
<a href="#l35.758"></a><span id="l35.758"> }</span>
<a href="#l35.759"></a><span id="l35.759"> </span>
<a href="#l35.760"></a><span id="l35.760" class="difflineminus">-.subviewbutton.download:-moz-any([canShow],[canRetry]) &gt; .action-button@buttonStateHover@ {</span>
<a href="#l35.761"></a><span id="l35.761" class="difflineplus">+.subviewbutton.download:-moz-any([canShow],[canRetry]) &gt; .action-button:not(:-moz-any([disabled],[open],:active)):-moz-any(:hover,:focus) {</span>
<a href="#l35.762"></a><span id="l35.762">   background-color: var(--arrowpanel-dimmed-further);</span>
<a href="#l35.763"></a><span id="l35.763"> }</span>
<a href="#l35.764"></a><span id="l35.764"> </span>
<a href="#l35.765"></a><span id="l35.765" class="difflineminus">-.subviewbutton.download:-moz-any([canShow],[canRetry]) &gt; .action-button@buttonStateActive@ {</span>
<a href="#l35.766"></a><span id="l35.766" class="difflineplus">+.subviewbutton.download:-moz-any([canShow],[canRetry]) &gt; .action-button:not([disabled]):-moz-any([open],:hover:active) {</span>
<a href="#l35.767"></a><span id="l35.767">   background-color: var(--arrowpanel-dimmed-even-further);</span>
<a href="#l35.768"></a><span id="l35.768"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/mail/themes/shared/jar.inc.mn</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/mail/themes/shared/jar.inc.mn</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -25,16 +25,17 @@</span>
<a href="#l36.4"></a><span id="l36.4"> #ifdef MOZ_UPDATER</span>
<a href="#l36.5"></a><span id="l36.5">   skin/classic/messenger/icons/app-update.svg                 (../shared/mail/icons/app-update.svg)</span>
<a href="#l36.6"></a><span id="l36.6">   skin/classic/messenger/icons/app-update-badge.svg           (../shared/mail/icons/app-update-badge.svg)</span>
<a href="#l36.7"></a><span id="l36.7"> #endif</span>
<a href="#l36.8"></a><span id="l36.8">   skin/classic/messenger/icons/appbutton.svg                  (../shared/mail/icons/appbutton.svg)</span>
<a href="#l36.9"></a><span id="l36.9">   skin/classic/messenger/icons/archive.svg                    (../shared/mail/icons/archive.svg)</span>
<a href="#l36.10"></a><span id="l36.10">   skin/classic/messenger/icons/arrow-dropdown.svg             (../shared/mail/icons/arrow-dropdown.svg)</span>
<a href="#l36.11"></a><span id="l36.11">   skin/classic/messenger/icons/arrow-left.svg                 (../shared/mail/icons/arrow-left.svg)</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineplus">+  skin/classic/messenger/icons/back-12.svg                    (../shared/mail/icons/back-12.svg)</span>
<a href="#l36.13"></a><span id="l36.13">   skin/classic/messenger/icons/attach.svg                     (../shared/mail/icons/attach.svg)</span>
<a href="#l36.14"></a><span id="l36.14">   skin/classic/messenger/icons/attachment-col.svg             (../shared/mail/icons/attachment-col.svg)</span>
<a href="#l36.15"></a><span id="l36.15">   skin/classic/messenger/icons/blacklist.svg                  (../shared/mail/icons/blacklist.svg)</span>
<a href="#l36.16"></a><span id="l36.16">   skin/classic/messenger/icons/cert-error.svg                 (../shared/mail/icons/cert-error.svg)</span>
<a href="#l36.17"></a><span id="l36.17">   skin/classic/messenger/icons/chat.svg                       (../shared/mail/icons/chat.svg)</span>
<a href="#l36.18"></a><span id="l36.18">   skin/classic/messenger/icons/copy.svg                       (../shared/mail/icons/copy.svg)</span>
<a href="#l36.19"></a><span id="l36.19">   skin/classic/messenger/icons/cut.svg                        (../shared/mail/icons/cut.svg)</span>
<a href="#l36.20"></a><span id="l36.20">   skin/classic/messenger/icons/correspondents.svg             (../shared/mail/icons/correspondents.svg)</span>
<a href="#l36.21"></a><span id="l36.21" class="difflineat">@@ -116,16 +117,17 @@</span>
<a href="#l36.22"></a><span id="l36.22">   skin/classic/messenger/shared/mailWindow1.css               (../shared/mail/mailWindow1.css)</span>
<a href="#l36.23"></a><span id="l36.23">   skin/classic/messenger/shared/messageHeader.css             (../shared/mail/messageHeader.css)</span>
<a href="#l36.24"></a><span id="l36.24">   skin/classic/messenger/shared/messenger.css                 (../shared/mail/messenger.css)</span>
<a href="#l36.25"></a><span id="l36.25">   skin/classic/messenger/shared/messengercompose.css          (../shared/mail/messengercompose.css)</span>
<a href="#l36.26"></a><span id="l36.26">   skin/classic/messenger/shared/searchBox.css                 (../shared/mail/searchBox.css)</span>
<a href="#l36.27"></a><span id="l36.27">   skin/classic/messenger/shared/tabmail.css                   (../shared/mail/tabmail.css)</span>
<a href="#l36.28"></a><span id="l36.28">   skin/classic/messenger/tagColors.css                        (../shared/mail/tagColors.css)</span>
<a href="#l36.29"></a><span id="l36.29">   skin/classic/messenger/shared/smime/smime-compose.css       (../shared/mail/smime/smime-compose.css)</span>
<a href="#l36.30"></a><span id="l36.30" class="difflineplus">+  skin/classic/messenger/shared/customizableui/panelUI.css    (../shared/customizableui/panelUI.css)</span>
<a href="#l36.31"></a><span id="l36.31"> #ifndef XP_MACOSX</span>
<a href="#l36.32"></a><span id="l36.32">   skin/classic/messenger/icons/anchor.svg                     (../shared/mail/icons/anchor.svg)</span>
<a href="#l36.33"></a><span id="l36.33">   skin/classic/messenger/icons/bold.svg                       (../shared/mail/icons/bold.svg)</span>
<a href="#l36.34"></a><span id="l36.34">   skin/classic/messenger/icons/bullet-list.svg                (../shared/mail/icons/bullet-list.svg)</span>
<a href="#l36.35"></a><span id="l36.35">   skin/classic/messenger/messengercompose/format-dropmarker.svg (../shared/mail/icons/format-dropmarker.svg)</span>
<a href="#l36.36"></a><span id="l36.36">   skin/classic/messenger/icons/center-align.svg               (../shared/mail/icons/center-align.svg)</span>
<a href="#l36.37"></a><span id="l36.37">   skin/classic/messenger/icons/decrease.svg                   (../shared/mail/icons/decrease.svg)</span>
<a href="#l36.38"></a><span id="l36.38">   skin/classic/messenger/icons/hline.svg                      (../shared/mail/icons/hline.svg)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1">new file mode 100644</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineminus">--- /dev/null</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineplus">+++ b/mail/themes/shared/mail/icons/back-12.svg</span>
<a href="#l37.4"></a><span id="l37.4" class="difflineat">@@ -0,0 +1,6 @@</span>
<a href="#l37.5"></a><span id="l37.5" class="difflineplus">+&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l37.6"></a><span id="l37.6" class="difflineplus">+   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l37.7"></a><span id="l37.7" class="difflineplus">+   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l37.8"></a><span id="l37.8" class="difflineplus">+&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;12&quot; height=&quot;12&quot; viewBox=&quot;0 0 12 12&quot;&gt;</span>
<a href="#l37.9"></a><span id="l37.9" class="difflineplus">+  &lt;path fill=&quot;context-fill&quot; fill-opacity=&quot;context-fill-opacity&quot; d=&quot;M 4.748 6 L 7.966 2.781 C 8.367 2.365 8.169 1.672 7.609 1.532 C 7.358 1.47 7.092 1.54 6.906 1.72 L 3.158 5.47 C 2.865 5.762 2.865 6.237 3.158 6.53 L 6.906 10.279 C 7.321 10.68 8.015 10.481 8.155 9.921 C 8.217 9.67 8.146 9.405 7.966 9.219 Z&quot;/&gt;</span>
<a href="#l37.10"></a><span id="l37.10" class="difflineplus">+&lt;/svg&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/mail/themes/windows/customizableui/panelUI.css</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/mail/themes/windows/customizableui/panelUI.css</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -1,13 +1,13 @@</span>
<a href="#l38.4"></a><span id="l38.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l38.5"></a><span id="l38.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l38.6"></a><span id="l38.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l38.7"></a><span id="l38.7"> </span>
<a href="#l38.8"></a><span id="l38.8" class="difflineminus">-%include ../../shared/customizableui/panelUI.inc.css</span>
<a href="#l38.9"></a><span id="l38.9" class="difflineplus">+@import url(&quot;chrome://messenger/skin/shared/customizableui/panelUI.css&quot;);</span>
<a href="#l38.10"></a><span id="l38.10"> </span>
<a href="#l38.11"></a><span id="l38.11"> /* bookmark panel submenus */</span>
<a href="#l38.12"></a><span id="l38.12"> </span>
<a href="#l38.13"></a><span id="l38.13"> #BMB_bookmarksPopup menupopup[placespopup=true] {</span>
<a href="#l38.14"></a><span id="l38.14">   -moz-appearance: none;</span>
<a href="#l38.15"></a><span id="l38.15">   background: transparent;</span>
<a href="#l38.16"></a><span id="l38.16">   border: none;</span>
<a href="#l38.17"></a><span id="l38.17">   padding: 0;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/mail/themes/windows/jar.mn</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/mail/themes/windows/jar.mn</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -178,16 +178,17 @@ classic.jar:</span>
<a href="#l39.4"></a><span id="l39.4">   skin/classic/messenger/icons/arrow/arrow-right.png          (mail/icons/arrow/arrow-right.png)</span>
<a href="#l39.5"></a><span id="l39.5">   skin/classic/messenger/icons/arrow/arrow-up.png             (mail/icons/arrow/arrow-up.png)</span>
<a href="#l39.6"></a><span id="l39.6">   skin/classic/messenger/icons/arrow/arrow-down.png           (mail/icons/arrow/arrow-down.png)</span>
<a href="#l39.7"></a><span id="l39.7">   skin/classic/messenger/icons/arrow/arrow-left-dim.png       (mail/icons/arrow/arrow-left-dim.png)</span>
<a href="#l39.8"></a><span id="l39.8">   skin/classic/messenger/icons/arrow/arrow-right-dim.png      (mail/icons/arrow/arrow-right-dim.png)</span>
<a href="#l39.9"></a><span id="l39.9">   skin/classic/messenger/icons/arrow/arrow-up-dim.png         (mail/icons/arrow/arrow-up-dim.png)</span>
<a href="#l39.10"></a><span id="l39.10">   skin/classic/messenger/icons/arrow/arrow-down-dim.png       (mail/icons/arrow/arrow-down-dim.png)</span>
<a href="#l39.11"></a><span id="l39.11">   skin/classic/messenger/icons/empty-search-results.png       (mail/icons/empty-search-results.png)</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineplus">+  skin/classic/messenger/customizableui/panelUI.css           (customizableui/panelUI.css)</span>
<a href="#l39.13"></a><span id="l39.13"> % skin messenger-newsblog classic/1.0 %skin/classic/messenger-newsblog/</span>
<a href="#l39.14"></a><span id="l39.14">   skin/classic/messenger-newsblog/feed-subscriptions.css      (mail/newsblog/feed-subscriptions.css)</span>
<a href="#l39.15"></a><span id="l39.15">   skin/classic/messenger-newsblog/rss-feed.png                (mail/newsblog/rss-feed.png)</span>
<a href="#l39.16"></a><span id="l39.16">   skin/classic/messenger-newsblog/rss-feed-folder.png         (mail/newsblog/rss-feed-folder.png)</span>
<a href="#l39.17"></a><span id="l39.17">   skin/classic/messenger/newmailaccount/accountProvisioner.css (mail/newmailaccount/accountProvisioner.css)</span>
<a href="#l39.18"></a><span id="l39.18">   skin/classic/messenger/newmailaccount/search.gif            (mail/newmailaccount/search.gif)</span>
<a href="#l39.19"></a><span id="l39.19">   skin/classic/messenger/newmailaccount/spinner.gif           (mail/newmailaccount/spinner.gif)</span>
<a href="#l39.20"></a><span id="l39.20">   skin/classic/messenger/newmailaccount/success-addons.png    (mail/newmailaccount/success-addons.png)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/mail/themes/windows/mail/primaryToolbar.css</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/mail/themes/windows/mail/primaryToolbar.css</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -205,52 +205,17 @@ toolbar[mode=&quot;text&quot;] .button-appmenu .to</span>
<a href="#l40.4"></a><span id="l40.4"> </span>
<a href="#l40.5"></a><span id="l40.5"> .msgNotificaton-smallText {</span>
<a href="#l40.6"></a><span id="l40.6">   padding-inline-start: 10px;</span>
<a href="#l40.7"></a><span id="l40.7">   font-size: 90%;</span>
<a href="#l40.8"></a><span id="l40.8"> }</span>
<a href="#l40.9"></a><span id="l40.9"> </span>
<a href="#l40.10"></a><span id="l40.10"> /* AppMenu styling */</span>
<a href="#l40.11"></a><span id="l40.11"> </span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-.splitmenu-menuitem {</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineminus">-  -moz-appearance: menuitem;</span>
<a href="#l40.14"></a><span id="l40.14" class="difflineminus">-  -moz-box-align: center;</span>
<a href="#l40.15"></a><span id="l40.15" class="difflineminus">-  color: MenuText;</span>
<a href="#l40.16"></a><span id="l40.16" class="difflineminus">-  font: menu;</span>
<a href="#l40.17"></a><span id="l40.17" class="difflineminus">-  list-style-image: none;</span>
<a href="#l40.18"></a><span id="l40.18" class="difflineminus">-  -moz-image-region: auto;</span>
<a href="#l40.19"></a><span id="l40.19" class="difflineminus">-  margin-inline-end: 1px;</span>
<a href="#l40.20"></a><span id="l40.20" class="difflineminus">-}</span>
<a href="#l40.21"></a><span id="l40.21" class="difflineminus">-</span>
<a href="#l40.22"></a><span id="l40.22" class="difflineminus">-.splitmenu-menuitem[disabled=&quot;true&quot;],</span>
<a href="#l40.23"></a><span id="l40.23" class="difflineminus">-.splitmenu-menuitem[_moz-menuactive=&quot;true&quot;][disabled=&quot;true&quot;] {</span>
<a href="#l40.24"></a><span id="l40.24" class="difflineminus">-  color: GrayText;</span>
<a href="#l40.25"></a><span id="l40.25" class="difflineminus">-  text-shadow: none;</span>
<a href="#l40.26"></a><span id="l40.26" class="difflineminus">-}</span>
<a href="#l40.27"></a><span id="l40.27" class="difflineminus">-</span>
<a href="#l40.28"></a><span id="l40.28" class="difflineminus">-@media (-moz-windows-classic) {</span>
<a href="#l40.29"></a><span id="l40.29" class="difflineminus">-  .splitmenu-menuitem[disabled=&quot;true&quot;] {</span>
<a href="#l40.30"></a><span id="l40.30" class="difflineminus">-    color: ThreeDShadow;</span>
<a href="#l40.31"></a><span id="l40.31" class="difflineminus">-    text-shadow: 1px 1px ThreeDHighlight;</span>
<a href="#l40.32"></a><span id="l40.32" class="difflineminus">-  }</span>
<a href="#l40.33"></a><span id="l40.33" class="difflineminus">-}</span>
<a href="#l40.34"></a><span id="l40.34" class="difflineminus">-</span>
<a href="#l40.35"></a><span id="l40.35" class="difflineminus">-.splitmenu-menuitem[iconic=&quot;true&quot;] &gt; .menu-iconic-left {</span>
<a href="#l40.36"></a><span id="l40.36" class="difflineminus">-  -moz-appearance: menuimage;</span>
<a href="#l40.37"></a><span id="l40.37" class="difflineminus">-  padding-top: 2px;</span>
<a href="#l40.38"></a><span id="l40.38" class="difflineminus">-}</span>
<a href="#l40.39"></a><span id="l40.39" class="difflineminus">-</span>
<a href="#l40.40"></a><span id="l40.40" class="difflineminus">-.splitmenu-menuitem[_moz-menuactive=&quot;true&quot;] {</span>
<a href="#l40.41"></a><span id="l40.41" class="difflineminus">-  background-color: -moz-menuhover;</span>
<a href="#l40.42"></a><span id="l40.42" class="difflineminus">-  color: -moz-menuhovertext;</span>
<a href="#l40.43"></a><span id="l40.43" class="difflineminus">-}</span>
<a href="#l40.44"></a><span id="l40.44" class="difflineminus">-</span>
<a href="#l40.45"></a><span id="l40.45" class="difflineminus">-.splitmenu-menu {</span>
<a href="#l40.46"></a><span id="l40.46" class="difflineminus">-  -moz-box-pack: end;</span>
<a href="#l40.47"></a><span id="l40.47" class="difflineminus">-}</span>
<a href="#l40.48"></a><span id="l40.48" class="difflineplus">+/* TODO appmenu - remove? needed? */</span>
<a href="#l40.49"></a><span id="l40.49"> </span>
<a href="#l40.50"></a><span id="l40.50"> .appmenu-edit-button {</span>
<a href="#l40.51"></a><span id="l40.51">   -moz-appearance: none;</span>
<a href="#l40.52"></a><span id="l40.52">   border: 1px solid transparent;</span>
<a href="#l40.53"></a><span id="l40.53">   padding: 2px;</span>
<a href="#l40.54"></a><span id="l40.54">   background: transparent;</span>
<a href="#l40.55"></a><span id="l40.55">   border-radius: 3px;</span>
<a href="#l40.56"></a><span id="l40.56"> }</span>
<a href="#l40.57"></a><span id="l40.57" class="difflineat">@@ -569,22 +534,16 @@ toolbar:not([mode=&quot;text&quot;]) &gt; toolbarpale</span>
<a href="#l40.58"></a><span id="l40.58">   box-shadow: none;</span>
<a href="#l40.59"></a><span id="l40.59"> }</span>
<a href="#l40.60"></a><span id="l40.60"> </span>
<a href="#l40.61"></a><span id="l40.61"> /* remove the small icons checkbox in Customize window */</span>
<a href="#l40.62"></a><span id="l40.62"> #smallicons {</span>
<a href="#l40.63"></a><span id="l40.63">   display: none;</span>
<a href="#l40.64"></a><span id="l40.64"> }</span>
<a href="#l40.65"></a><span id="l40.65"> </span>
<a href="#l40.66"></a><span id="l40.66" class="difflineminus">-/* AppMenu styling */</span>
<a href="#l40.67"></a><span id="l40.67" class="difflineminus">-</span>
<a href="#l40.68"></a><span id="l40.68" class="difflineminus">-.splitmenu-menuitem {</span>
<a href="#l40.69"></a><span id="l40.69" class="difflineminus">-  padding-inline-end: 0.5em;</span>
<a href="#l40.70"></a><span id="l40.70" class="difflineminus">-}</span>
<a href="#l40.71"></a><span id="l40.71" class="difflineminus">-</span>
<a href="#l40.72"></a><span id="l40.72"> @media (-moz-windows-compositor: 0) {</span>
<a href="#l40.73"></a><span id="l40.73">   #mail-toolbar-menubar2 {</span>
<a href="#l40.74"></a><span id="l40.74">     background-color: transparent !important</span>
<a href="#l40.75"></a><span id="l40.75">   }</span>
<a href="#l40.76"></a><span id="l40.76"> </span>
<a href="#l40.77"></a><span id="l40.77">   #messengerWindow[tabsintitlebar] #titlebar:-moz-lwtheme {</span>
<a href="#l40.78"></a><span id="l40.78">     visibility: hidden;</span>
<a href="#l40.79"></a><span id="l40.79">   }</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:31Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

