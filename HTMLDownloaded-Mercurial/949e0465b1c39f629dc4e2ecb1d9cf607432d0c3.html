<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 16626:949e0465b1c39f629dc4e2ecb1d9cf607432d0c3</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 949e0465b1c39f629dc4e2ecb1d9cf607432d0c3" />
<meta property="og:url" content="/comm-central/rev/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3" />
<meta property="og:description" content="Bug 1035599: Merge the mozilla-central and comm-central objdir, r=Standard8, a=me for CLOSED TREE" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 949e0465b1c39f629dc4e2ecb1d9cf607432d0c3 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3">shortlog</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3">files</a> |
changeset |
<a href="/comm-central/raw-rev/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3">raw</a>  | <a href="/comm-central/archive/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1035599">Bug 1035599</a>: Merge the mozilla-central and comm-central objdir, r=Standard8, a=me for CLOSED TREE
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#74;&#111;&#115;&#104;&#117;&#97;&#32;&#67;&#114;&#97;&#110;&#109;&#101;&#114;&#32;&#60;&#80;&#105;&#100;&#103;&#101;&#111;&#116;&#49;&#56;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Mon, 25 Nov 2013 17:03:48 -0600</td></tr>

<tr>
 <td>changeset 16626</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3">949e0465b1c39f629dc4e2ecb1d9cf607432d0c3</a></td>
</tr>



<tr>
<td>parent 16625</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/1c0a95ffa495895fbfe341148658f1230e3f57da">1c0a95ffa495895fbfe341148658f1230e3f57da</a>
</td>
</tr>

<tr>
<td>child 16627</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/53be54f7311aea3967ef936b2feeaf3106ce9f9a">53be54f7311aea3967ef936b2feeaf3106ce9f9a</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=949e0465b1c39f629dc4e2ecb1d9cf607432d0c3">10346</a></td></tr>
<tr><td>push user</td><td>Pidgeot18@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Fri, 08 Aug 2014 14:59:18 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@949e0465b1c3 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=949e0465b1c39f629dc4e2ecb1d9cf607432d0c3">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=949e0465b1c39f629dc4e2ecb1d9cf607432d0c3&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=949e0465b1c39f629dc4e2ecb1d9cf607432d0c3&newProject=comm-central&newRevision=949e0465b1c39f629dc4e2ecb1d9cf607432d0c3&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=949e0465b1c39f629dc4e2ecb1d9cf607432d0c3&newProject=comm-central&newRevision=949e0465b1c39f629dc4e2ecb1d9cf607432d0c3&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=949e0465b1c39f629dc4e2ecb1d9cf607432d0c3&newProject=comm-central&newRevision=949e0465b1c39f629dc4e2ecb1d9cf607432d0c3&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Standard8%29&revcount=50">Standard8</a>, <a href="/comm-central/log?rev=reviewer%28me%29&revcount=50">me</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1035599">1035599</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1035599">Bug 1035599</a>: Merge the mozilla-central and comm-central objdir, r=Standard8, a=me for CLOSED TREE

This change merges mozilla-central and comm-central into having a single
topobjdir file but retaining two topsrcdirs (and two build systems). This state
is hopefully only the first part of a series of changes that eliminate the
comm-central build system partial clone completely.

In other words:
$(DEPTH) has accessible, addon-sdk, ..., mail, mailnews
$(topsrcdir) has mail, mailnews, ..., mozilla</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/Makefile.in">Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/Makefile.in">file</a> |
<a href="/comm-central/annotate/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/Makefile.in">annotate</a> |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/Makefile.in">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/Makefile.in">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/bridge/bridge.mozbuild">bridge/bridge.mozbuild</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/bridge/bridge.mozbuild">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/bridge/bridge.mozbuild">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/bridge/bridge.mozbuild">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/calendar/lightning/build/universal.mk">calendar/lightning/build/universal.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/calendar/lightning/build/universal.mk">file</a> |
<a href="/comm-central/annotate/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/calendar/lightning/build/universal.mk">annotate</a> |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/calendar/lightning/build/universal.mk">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/calendar/lightning/build/universal.mk">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/calendar/lightning/build/universal.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/config/baseconfig.mk">config/baseconfig.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/config/baseconfig.mk">file</a> |
<a href="/comm-central/annotate/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/config/baseconfig.mk">annotate</a> |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/config/baseconfig.mk">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/config/baseconfig.mk">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/config/baseconfig.mk">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/config/config.mk">config/config.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/config/config.mk">file</a> |
<a href="/comm-central/annotate/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/config/config.mk">annotate</a> |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/config/config.mk">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/config/config.mk">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/config/config.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/configure.in">configure.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/configure.in">file</a> |
<a href="/comm-central/annotate/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/configure.in">annotate</a> |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/configure.in">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/configure.in">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/configure.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/im/app.mozbuild">im/app.mozbuild</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/im/app.mozbuild">file</a> |
<a href="/comm-central/annotate/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/im/app.mozbuild">annotate</a> |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/im/app.mozbuild">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/im/app.mozbuild">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/im/app.mozbuild">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/im/build.mk">im/build.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/im/build.mk">file</a> |
<a href="/comm-central/annotate/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/im/build.mk">annotate</a> |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/im/build.mk">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/im/build.mk">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/im/build.mk">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/im/locales/Makefile.in">im/locales/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/im/locales/Makefile.in">file</a> |
<a href="/comm-central/annotate/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/im/locales/Makefile.in">annotate</a> |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/im/locales/Makefile.in">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/im/locales/Makefile.in">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/im/locales/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/app.mozbuild">mail/app.mozbuild</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/app.mozbuild">file</a> |
<a href="/comm-central/annotate/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/app.mozbuild">annotate</a> |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/app.mozbuild">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/app.mozbuild">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/app.mozbuild">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/build.mk">mail/build.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/build.mk">file</a> |
<a href="/comm-central/annotate/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/build.mk">annotate</a> |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/build.mk">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/build.mk">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/build.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/configure.in">mail/configure.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/configure.in">file</a> |
<a href="/comm-central/annotate/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/configure.in">annotate</a> |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/configure.in">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/configure.in">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/configure.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/locales/Makefile.in">mail/locales/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/locales/Makefile.in">file</a> |
<a href="/comm-central/annotate/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/locales/Makefile.in">annotate</a> |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/locales/Makefile.in">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/locales/Makefile.in">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/locales/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/testsuite-targets.mk">mail/testsuite-targets.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/testsuite-targets.mk">file</a> |
<a href="/comm-central/annotate/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/testsuite-targets.mk">annotate</a> |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/testsuite-targets.mk">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/testsuite-targets.mk">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mail/testsuite-targets.mk">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mailnews/mailnews.mozbuild">mailnews/mailnews.mozbuild</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mailnews/mailnews.mozbuild">file</a> |
<a href="/comm-central/annotate/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mailnews/mailnews.mozbuild">annotate</a> |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mailnews/mailnews.mozbuild">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mailnews/mailnews.mozbuild">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/mailnews/mailnews.mozbuild">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/app.mozbuild">suite/app.mozbuild</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/app.mozbuild">file</a> |
<a href="/comm-central/annotate/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/app.mozbuild">annotate</a> |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/app.mozbuild">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/app.mozbuild">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/app.mozbuild">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/build.mk">suite/build.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/build.mk">file</a> |
<a href="/comm-central/annotate/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/build.mk">annotate</a> |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/build.mk">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/build.mk">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/build.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/configure.in">suite/configure.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/configure.in">file</a> |
<a href="/comm-central/annotate/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/configure.in">annotate</a> |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/configure.in">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/configure.in">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/configure.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/locales/Makefile.in">suite/locales/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/locales/Makefile.in">file</a> |
<a href="/comm-central/annotate/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/locales/Makefile.in">annotate</a> |
<a href="/comm-central/diff/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/locales/Makefile.in">diff</a> |
<a href="/comm-central/comparison/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/locales/Makefile.in">comparison</a> |
<a href="/comm-central/log/949e0465b1c39f629dc4e2ecb1d9cf607432d0c3/suite/locales/Makefile.in">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/Makefile.in</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/Makefile.in</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -36,16 +36,18 @@ libs binaries export tools:: $(topsrcdir</span>
<a href="#l1.4"></a><span id="l1.4"> </span>
<a href="#l1.5"></a><span id="l1.5"> config.status: $(topsrcdir)/configure</span>
<a href="#l1.6"></a><span id="l1.6"> 	@echo 'STOP!  configure has changed and needs to be run in this build directory.'</span>
<a href="#l1.7"></a><span id="l1.7"> 	@echo 'Please rerun configure.'</span>
<a href="#l1.8"></a><span id="l1.8"> 	@echo 'To ignore this message, touch &quot;config.status&quot; in the build directory.'</span>
<a href="#l1.9"></a><span id="l1.9"> 	@exit 1</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11"> default export libs clean realclean distclean alldep \</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+package installer package-compare stage-package install source-package \</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+upload source-upload hg-bundle l10n-check \</span>
<a href="#l1.14"></a><span id="l1.14"> maybe_clobber_profiledbuild uploadsymbols all:: $(SUBMAKEFILES)</span>
<a href="#l1.15"></a><span id="l1.15"> 	$(MAKE) -C mozilla $@</span>
<a href="#l1.16"></a><span id="l1.16"> </span>
<a href="#l1.17"></a><span id="l1.17"> ifdef ENABLE_TESTS</span>
<a href="#l1.18"></a><span id="l1.18"> check mochitest reftest crashtest xpcshell-tests:: $(SUBMAKEFILES)</span>
<a href="#l1.19"></a><span id="l1.19"> 	$(MAKE) -C mozilla $@</span>
<a href="#l1.20"></a><span id="l1.20"> </span>
<a href="#l1.21"></a><span id="l1.21"> mochitest-% :: $(SUBMAKEFILES)</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineat">@@ -54,21 +56,19 @@ mochitest-% :: $(SUBMAKEFILES)</span>
<a href="#l1.23"></a><span id="l1.23"> check-sync-dirs::</span>
<a href="#l1.24"></a><span id="l1.24"> 	@$(PYTHON) $(topsrcdir)/mail/check-sync-dirs.py \</span>
<a href="#l1.25"></a><span id="l1.25"> 	   $(topsrcdir)/build $(topsrcdir)/mozilla/build</span>
<a href="#l1.26"></a><span id="l1.26"> 	@$(PYTHON) $(topsrcdir)/mail/check-sync-dirs.py \</span>
<a href="#l1.27"></a><span id="l1.27"> 	   $(topsrcdir)/config/makefiles $(topsrcdir)/mozilla/config/makefiles</span>
<a href="#l1.28"></a><span id="l1.28"> </span>
<a href="#l1.29"></a><span id="l1.29"> check:: check-sync-dirs</span>
<a href="#l1.30"></a><span id="l1.30"> </span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-ifndef MOZ_THUNDERBIRD</span>
<a href="#l1.32"></a><span id="l1.32"> package-tests:: $(SUBMAKEFILES)</span>
<a href="#l1.33"></a><span id="l1.33"> 	$(MAKE) -C mozilla $@</span>
<a href="#l1.34"></a><span id="l1.34"> endif</span>
<a href="#l1.35"></a><span id="l1.35" class="difflineminus">-endif</span>
<a href="#l1.36"></a><span id="l1.36"> </span>
<a href="#l1.37"></a><span id="l1.37"> # http://bugzilla.mozilla.org/show_bug.cgi?id=450485</span>
<a href="#l1.38"></a><span id="l1.38"> MAKE_SYM_STORE_PATH=dist/bin</span>
<a href="#l1.39"></a><span id="l1.39"> ifeq ($(OS_ARCH),Darwin)</span>
<a href="#l1.40"></a><span id="l1.40"> ifdef UNIVERSAL_BINARY</span>
<a href="#l1.41"></a><span id="l1.41">   MAKE_SYM_STORE_PATH=dist/universal</span>
<a href="#l1.42"></a><span id="l1.42"> endif</span>
<a href="#l1.43"></a><span id="l1.43"> endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/lightning/build/universal.mk</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/lightning/build/universal.mk</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -1,17 +1,17 @@</span>
<a href="#l2.4"></a><span id="l2.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l2.5"></a><span id="l2.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l2.6"></a><span id="l2.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8"> ifndef OBJDIR</span>
<a href="#l2.9"></a><span id="l2.9"> OBJDIR_ARCH_1 = $(MOZ_OBJDIR)/$(firstword $(MOZ_BUILD_PROJECTS))</span>
<a href="#l2.10"></a><span id="l2.10"> OBJDIR_ARCH_2 = $(MOZ_OBJDIR)/$(word 2,$(MOZ_BUILD_PROJECTS))</span>
<a href="#l2.11"></a><span id="l2.11" class="difflineminus">-DIST_ARCH_1 = $(OBJDIR_ARCH_1)/mozilla/dist</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-DIST_ARCH_2 = $(OBJDIR_ARCH_2)/mozilla/dist</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+DIST_ARCH_1 = $(OBJDIR_ARCH_1)/dist</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+DIST_ARCH_2 = $(OBJDIR_ARCH_2)/dist</span>
<a href="#l2.15"></a><span id="l2.15"> DIST_UNI = $(DIST_ARCH_1)/universal</span>
<a href="#l2.16"></a><span id="l2.16"> OBJDIR = $(OBJDIR_ARCH_1)</span>
<a href="#l2.17"></a><span id="l2.17"> endif</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19"> topsrcdir = $(TOPSRCDIR)</span>
<a href="#l2.20"></a><span id="l2.20"> DEPTH = $(OBJDIR)</span>
<a href="#l2.21"></a><span id="l2.21"> </span>
<a href="#l2.22"></a><span id="l2.22"> include $(DEPTH)/config/autoconf.mk</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/config/baseconfig.mk</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/config/baseconfig.mk</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -2,17 +2,17 @@</span>
<a href="#l3.4"></a><span id="l3.4"> # directly in python/mozbuild/mozbuild/base.py for gmake validation.</span>
<a href="#l3.5"></a><span id="l3.5"> # We thus use INCLUDED_AUTOCONF_MK to enable/disable some parts depending</span>
<a href="#l3.6"></a><span id="l3.6"> # whether a normal build is happening or whether the check is running.</span>
<a href="#l3.7"></a><span id="l3.7"> includedir := $(includedir)/$(MOZ_APP_NAME)-$(MOZ_APP_VERSION)</span>
<a href="#l3.8"></a><span id="l3.8"> idldir = $(datadir)/idl/$(MOZ_APP_NAME)-$(MOZ_APP_VERSION)</span>
<a href="#l3.9"></a><span id="l3.9"> installdir = $(libdir)/$(MOZ_APP_NAME)-$(MOZ_APP_VERSION)</span>
<a href="#l3.10"></a><span id="l3.10"> sdkdir = $(libdir)/$(MOZ_APP_NAME)-devel-$(MOZ_APP_VERSION)</span>
<a href="#l3.11"></a><span id="l3.11"> MOZILLA_SRCDIR = $(topsrcdir)/mozilla</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-MOZDEPTH = $(DEPTH)/mozilla</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+MOZDEPTH = $(DEPTH)</span>
<a href="#l3.14"></a><span id="l3.14"> DIST = $(MOZDEPTH)/dist</span>
<a href="#l3.15"></a><span id="l3.15"> </span>
<a href="#l3.16"></a><span id="l3.16"> # We do magic with OBJ_SUFFIX in config.mk, the following ensures we don't</span>
<a href="#l3.17"></a><span id="l3.17"> # manually use it before config.mk inclusion</span>
<a href="#l3.18"></a><span id="l3.18"> _OBJ_SUFFIX := $(OBJ_SUFFIX)</span>
<a href="#l3.19"></a><span id="l3.19"> OBJ_SUFFIX = $(error config/config.mk needs to be included before using OBJ_SUFFIX)</span>
<a href="#l3.20"></a><span id="l3.20"> </span>
<a href="#l3.21"></a><span id="l3.21"> ifeq ($(HOST_OS_ARCH),WINNT)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/config/config.mk</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/config/config.mk</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -181,17 +181,17 @@ VERSION_NUMBER		= 50</span>
<a href="#l4.4"></a><span id="l4.4"> ifeq ($(HOST_OS_ARCH),WINNT)</span>
<a href="#l4.5"></a><span id="l4.5"> win_srcdir      := $(subst $(topsrcdir),$(WIN_TOP_SRC),$(srcdir))</span>
<a href="#l4.6"></a><span id="l4.6"> BUILD_TOOLS     = $(WIN_TOP_SRC)/mozilla/build/unix</span>
<a href="#l4.7"></a><span id="l4.7"> else</span>
<a href="#l4.8"></a><span id="l4.8"> win_srcdir      := $(srcdir)</span>
<a href="#l4.9"></a><span id="l4.9"> BUILD_TOOLS     = $(MOZILLA_SRCDIR)/build/unix</span>
<a href="#l4.10"></a><span id="l4.10"> endif</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-CONFIG_TOOLS	= $(MOZ_BUILD_ROOT)/mozilla/config</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+CONFIG_TOOLS	= $(MOZ_BUILD_ROOT)/config</span>
<a href="#l4.14"></a><span id="l4.14"> AUTOCONF_TOOLS	= $(MOZILLA_SRCDIR)/build/autoconf</span>
<a href="#l4.15"></a><span id="l4.15"> </span>
<a href="#l4.16"></a><span id="l4.16"> #</span>
<a href="#l4.17"></a><span id="l4.17"> # Strip off the excessively long version numbers on these platforms,</span>
<a href="#l4.18"></a><span id="l4.18"> # but save the version to allow multiple versions of the same base</span>
<a href="#l4.19"></a><span id="l4.19"> # platform to be built in the same tree.</span>
<a href="#l4.20"></a><span id="l4.20"> #</span>
<a href="#l4.21"></a><span id="l4.21"> ifneq (,$(filter FreeBSD HP-UX Linux NetBSD OpenBSD SunOS,$(OS_ARCH)))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/configure.in</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/configure.in</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -255,17 +255,17 @@ external_topsrcdir=$_topsrcdir</span>
<a href="#l5.4"></a><span id="l5.4"> </span>
<a href="#l5.5"></a><span id="l5.5"> if test &quot;$msyshost&quot;; then</span>
<a href="#l5.6"></a><span id="l5.6">     external_topsrcdir=`cd $_topsrcdir &amp;&amp; pwd -W $_topsrcdir`</span>
<a href="#l5.7"></a><span id="l5.7"> fi</span>
<a href="#l5.8"></a><span id="l5.8"> </span>
<a href="#l5.9"></a><span id="l5.9"> # --enable-application needs to find confvars.sh, build.mk, etc in the gived dir, so add ../</span>
<a href="#l5.10"></a><span id="l5.10"> # --external-source-dir is so the build system doesn't reject files outside known locations.</span>
<a href="#l5.11"></a><span id="l5.11"> # --disable-official-branding disables all checks for official branding, as we're doing this ourselves in our own repo</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-ac_configure_args=&quot;$_SUBDIR_CONFIG_ARGS --enable-application=../$MOZ_BUILD_APP --with-external-source-dir=$external_topsrcdir --disable-official-branding --with-branding=../$REAL_BRANDING_DIRECTORY&quot;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+ac_configure_args=&quot;$_SUBDIR_CONFIG_ARGS --enable-application=../$MOZ_BUILD_APP --with-external-source-dir=$external_topsrcdir --disable-official-branding --with-branding=$REAL_BRANDING_DIRECTORY&quot;</span>
<a href="#l5.14"></a><span id="l5.14"> if test -n &quot;$L10NBASEDIR&quot;; then</span>
<a href="#l5.15"></a><span id="l5.15">     dnl Override the initial value with the new one which is guaranteed to be an absolute path.</span>
<a href="#l5.16"></a><span id="l5.16">     ac_configure_args=&quot;$ac_configure_args --with-l10n-base=$L10NBASEDIR&quot;</span>
<a href="#l5.17"></a><span id="l5.17"> fi</span>
<a href="#l5.18"></a><span id="l5.18"> </span>
<a href="#l5.19"></a><span id="l5.19"> # for Mac universal builds, we need to call the Mozilla configure with MOZ_BUILD_APP=[i386|x86_64]</span>
<a href="#l5.20"></a><span id="l5.20"> MOZ_BUILD_APP_CACHED=&quot;$MOZ_BUILD_APP&quot;</span>
<a href="#l5.21"></a><span id="l5.21"> if test -n &quot;$MOZ_CURRENT_PROJECT&quot;; then</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/im/app.mozbuild</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/im/app.mozbuild</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -2,15 +2,15 @@</span>
<a href="#l6.4"></a><span id="l6.4"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l6.5"></a><span id="l6.5"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l6.6"></a><span id="l6.6"> </span>
<a href="#l6.7"></a><span id="l6.7"> if not CONFIG['LIBXUL_SDK']:</span>
<a href="#l6.8"></a><span id="l6.8">     include('/toolkit/toolkit.mozbuild')</span>
<a href="#l6.9"></a><span id="l6.9"> </span>
<a href="#l6.10"></a><span id="l6.10"> add_tier_dir('app', CONFIG['MOZ_BRANDING_DIRECTORY'])</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-add_tier_dir('app', '../chat')</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+add_tier_dir('app', 'chat')</span>
<a href="#l6.14"></a><span id="l6.14"> </span>
<a href="#l6.15"></a><span id="l6.15"> # Ensure extensions are built after chat/ so purplexpcom can build.</span>
<a href="#l6.16"></a><span id="l6.16"> if CONFIG['MOZ_EXTENSIONS']:</span>
<a href="#l6.17"></a><span id="l6.17">     add_tier_dir('app', 'extensions')</span>
<a href="#l6.18"></a><span id="l6.18"> </span>
<a href="#l6.19"></a><span id="l6.19" class="difflineminus">-add_tier_dir('app', '../im')</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineplus">+add_tier_dir('app', 'im')</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/im/build.mk</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/im/build.mk</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -1,18 +1,15 @@</span>
<a href="#l7.4"></a><span id="l7.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l7.5"></a><span id="l7.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l7.6"></a><span id="l7.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l7.7"></a><span id="l7.7"> </span>
<a href="#l7.8"></a><span id="l7.8" class="difflineminus">-ifdef COMM_BUILD</span>
<a href="#l7.9"></a><span id="l7.9" class="difflineplus">+ifndef COMM_BUILD</span>
<a href="#l7.10"></a><span id="l7.10"> </span>
<a href="#l7.11"></a><span id="l7.11" class="difflineminus">-ifndef MOZILLA_DIR</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-MOZILLA_DIR = $(MOZILLA_SRCDIR)</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-endif</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineminus">-include $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/package-name.mk</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+include $(topsrcdir)/toolkit/mozapps/installer/package-name.mk</span>
<a href="#l7.16"></a><span id="l7.16"> </span>
<a href="#l7.17"></a><span id="l7.17"> BUILD_YEAR := $(shell echo $(BUILDID) | cut -c 1-4)</span>
<a href="#l7.18"></a><span id="l7.18"> BUILD_MONTH := $(shell echo $(BUILDID) | cut -c 5-6)</span>
<a href="#l7.19"></a><span id="l7.19"> BUILD_DAY := $(shell echo $(BUILDID) | cut -c 7-8)</span>
<a href="#l7.20"></a><span id="l7.20"> BUILD_HOUR := $(shell echo $(BUILDID) | cut -c 9-10)</span>
<a href="#l7.21"></a><span id="l7.21"> </span>
<a href="#l7.22"></a><span id="l7.22"> ifndef PKG_SUFFIX</span>
<a href="#l7.23"></a><span id="l7.23"> ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineat">@@ -94,17 +91,17 @@ ifdef LIST_PREVIOUS_MAR_CMD</span>
<a href="#l7.25"></a><span id="l7.25"> 	touch $(PATCH_FILE)</span>
<a href="#l7.26"></a><span id="l7.26"> 	$(foreach marline,$(shell $(LIST_PREVIOUS_MAR_CMD)),\</span>
<a href="#l7.27"></a><span id="l7.27"> 	  $(foreach MAR_FILE_SRC,$(shell echo $(marline) |cut -d : -f 3),\</span>
<a href="#l7.28"></a><span id="l7.28"> 	    $(foreach AB_CD,$(filter $(shell echo $(marline) |cut -d : -f 2),$(AB_CD) $(SHIPPED_LOCALES)),\</span>
<a href="#l7.29"></a><span id="l7.29"> 	      $(foreach buildid,$(shell echo $(marline) |cut -d : -f 1),\</span>
<a href="#l7.30"></a><span id="l7.30"> 		mkdir -p $(PREVIOUS_MAR_DIR)/$(buildid) ; \</span>
<a href="#l7.31"></a><span id="l7.31"> 	        $(DOWNLOAD_MAR_CMD) ; \</span>
<a href="#l7.32"></a><span id="l7.32"> 		echo &quot;$(MAR_FILE_DEST),$(DIST)/$(COMPLETE_MAR),$(DIST)/$(PKG_UPDATE_PATH)$(PKG_UPDATE_BASENAME).partial.from-$(buildid).mar,$(FORCE_UPDATE)&quot; &gt;&gt; $(PATCH_FILE) ;))))</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineminus">-	PATH=&quot;$(realpath $(LIBXUL_DIST)/host/bin):$(PATH)&quot; $(PYTHON) $(MOZILLA_SRCDIR)/tools/update-packaging/make_incremental_updates.py -f $(PATCH_FILE)</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineplus">+	PATH=&quot;$(realpath $(LIBXUL_DIST)/host/bin):$(PATH)&quot; $(PYTHON) $(topsrcdir)/tools/update-packaging/make_incremental_updates.py -f $(PATCH_FILE)</span>
<a href="#l7.35"></a><span id="l7.35"> endif</span>
<a href="#l7.36"></a><span id="l7.36"> endif</span>
<a href="#l7.37"></a><span id="l7.37"> ifdef SYMBOL_SERVER_HOST</span>
<a href="#l7.38"></a><span id="l7.38"> 	@$(MAKE) uploadsymbols</span>
<a href="#l7.39"></a><span id="l7.39"> endif</span>
<a href="#l7.40"></a><span id="l7.40"> ifdef UPLOAD_CMD</span>
<a href="#l7.41"></a><span id="l7.41"> 	$(MAKE) upload</span>
<a href="#l7.42"></a><span id="l7.42"> endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/im/locales/Makefile.in</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/im/locales/Makefile.in</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -75,20 +75,20 @@ PKG_INST_PATH =</span>
<a href="#l8.4"></a><span id="l8.4"> </span>
<a href="#l8.5"></a><span id="l8.5"> SEARCH_PLUGINS = $(shell cat $(call MERGE_FILE,/searchplugins/list.txt))</span>
<a href="#l8.6"></a><span id="l8.6"> </span>
<a href="#l8.7"></a><span id="l8.7"> libs:: $(addsuffix .xml,$(SEARCH_PLUGINS))</span>
<a href="#l8.8"></a><span id="l8.8"> 	$(SYSINSTALL) $(IFLAGS1) $^ $(FINAL_TARGET)/searchplugins</span>
<a href="#l8.9"></a><span id="l8.9"> </span>
<a href="#l8.10"></a><span id="l8.10"> libs-%:</span>
<a href="#l8.11"></a><span id="l8.11"> 	$(NSINSTALL) -D $(DIST)/install</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-	@$(MAKE) -C ../../mozilla/toolkit/locales libs-$*</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+	@$(MAKE) -C $(DEPTH)/toolkit/locales libs-$*</span>
<a href="#l8.14"></a><span id="l8.14"> 	@$(MAKE) -C ../../chat/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">-	@$(MAKE) -C ../../mozilla/extensions/spellcheck/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineminus">-	@$(MAKE) -C ../../mozilla/intl/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineplus">+	@$(MAKE) -C $(DEPTH)/extensions/spellcheck/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineplus">+	@$(MAKE) -C $(DEPTH)/intl/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l8.19"></a><span id="l8.19"> 	@$(MAKE) libs AB_CD=$* XPI_NAME=locale-$* PREF_DIR=defaults/pref</span>
<a href="#l8.20"></a><span id="l8.20"> 	@$(MAKE) -C $(DEPTH)/$(MOZ_BRANDING_DIRECTORY)/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l8.21"></a><span id="l8.21"> </span>
<a href="#l8.22"></a><span id="l8.22"> </span>
<a href="#l8.23"></a><span id="l8.23"> # Note the funny extra &quot;../&quot; in SFX_HEADER is because the repackage-zip command</span>
<a href="#l8.24"></a><span id="l8.24"> # is actually run effectively from within the mozilla/ part of the objdir, so</span>
<a href="#l8.25"></a><span id="l8.25"> # topsrcdir points to the wrong place and we have to go one directory higher.</span>
<a href="#l8.26"></a><span id="l8.26"> repackage-win32-installer: WIN32_INSTALLER_OUT=&quot;$(_ABS_DIST)/$(PKG_INST_PATH)$(PKG_INST_BASENAME).exe&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/app.mozbuild</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/app.mozbuild</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -1,25 +1,25 @@</span>
<a href="#l9.4"></a><span id="l9.4"> # vim: set filetype=python:</span>
<a href="#l9.5"></a><span id="l9.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l9.6"></a><span id="l9.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l9.7"></a><span id="l9.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l9.8"></a><span id="l9.8"> </span>
<a href="#l9.9"></a><span id="l9.9" class="difflineminus">-include('../bridge/bridge.mozbuild')</span>
<a href="#l9.10"></a><span id="l9.10" class="difflineplus">+include('/mailnews/mailnews.mozbuild')</span>
<a href="#l9.11"></a><span id="l9.11"> </span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-add_tier_dir('app', '../mail/components')</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+add_tier_dir('app', 'mail/components')</span>
<a href="#l9.14"></a><span id="l9.14"> </span>
<a href="#l9.15"></a><span id="l9.15"> if not CONFIG['LIBXUL_SDK']:</span>
<a href="#l9.16"></a><span id="l9.16">     include('/toolkit/toolkit.mozbuild')</span>
<a href="#l9.17"></a><span id="l9.17"> </span>
<a href="#l9.18"></a><span id="l9.18"> if CONFIG['MOZ_EXTENSIONS']:</span>
<a href="#l9.19"></a><span id="l9.19">     add_tier_dir('app', 'extensions')</span>
<a href="#l9.20"></a><span id="l9.20"> </span>
<a href="#l9.21"></a><span id="l9.21"> add_tier_dir('app', CONFIG['MOZ_BRANDING_DIRECTORY'])</span>
<a href="#l9.22"></a><span id="l9.22"> </span>
<a href="#l9.23"></a><span id="l9.23"> if CONFIG['MOZ_COMPOSER']:</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineminus">-    add_tier_dir('app', '../editor/ui')</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineplus">+    add_tier_dir('app', 'editor/ui')</span>
<a href="#l9.26"></a><span id="l9.26"> </span>
<a href="#l9.27"></a><span id="l9.27"> if CONFIG['MOZ_CALENDAR']:</span>
<a href="#l9.28"></a><span id="l9.28" class="difflineminus">-    add_tier_dir('app', '../calendar/lightning')</span>
<a href="#l9.29"></a><span id="l9.29" class="difflineplus">+    add_tier_dir('app', 'calendar/lightning')</span>
<a href="#l9.30"></a><span id="l9.30"> </span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-add_tier_dir('app', '../chat')</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineminus">-add_tier_dir('app', '../mail')</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineplus">+add_tier_dir('app', 'chat')</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineplus">+add_tier_dir('app', 'mail')</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/build.mk</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/build.mk</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -1,18 +1,13 @@</span>
<a href="#l10.4"></a><span id="l10.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l10.5"></a><span id="l10.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l10.6"></a><span id="l10.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l10.7"></a><span id="l10.7"> </span>
<a href="#l10.8"></a><span id="l10.8" class="difflineminus">-ifdef COMM_BUILD</span>
<a href="#l10.9"></a><span id="l10.9" class="difflineminus">-ifndef MOZ_INCOMPLETE_EXTERNAL_LINKAGE</span>
<a href="#l10.10"></a><span id="l10.10" class="difflineminus">-# workaround Bug 599809 by making these makefiles be generated here</span>
<a href="#l10.11"></a><span id="l10.11" class="difflineminus">-SUBMAKEFILES += $(addsuffix /Makefile, $(APP_LIBXUL_DIRS) $(APP_LIBXUL_STATICDIRS))</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-endif</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineplus">+ifndef COMM_BUILD</span>
<a href="#l10.15"></a><span id="l10.15"> installer:</span>
<a href="#l10.16"></a><span id="l10.16"> 	@$(MAKE) -C mail/installer installer</span>
<a href="#l10.17"></a><span id="l10.17"> </span>
<a href="#l10.18"></a><span id="l10.18"> package:</span>
<a href="#l10.19"></a><span id="l10.19"> 	@$(MAKE) -C mail/installer</span>
<a href="#l10.20"></a><span id="l10.20"> </span>
<a href="#l10.21"></a><span id="l10.21"> package-compare:</span>
<a href="#l10.22"></a><span id="l10.22"> 	@$(MAKE) -C mail/installer package-compare</span>
<a href="#l10.23"></a><span id="l10.23" class="difflineat">@@ -38,12 +33,11 @@ source-upload::</span>
<a href="#l10.24"></a><span id="l10.24"> </span>
<a href="#l10.25"></a><span id="l10.25"> hg-bundle::</span>
<a href="#l10.26"></a><span id="l10.26"> 	@$(MAKE) -C mail/installer hg-bundle</span>
<a href="#l10.27"></a><span id="l10.27"> </span>
<a href="#l10.28"></a><span id="l10.28"> l10n-check::</span>
<a href="#l10.29"></a><span id="l10.29"> 	@$(MAKE) -C mail/locales l10n-check</span>
<a href="#l10.30"></a><span id="l10.30"> </span>
<a href="#l10.31"></a><span id="l10.31"> ifdef ENABLE_TESTS</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineminus">-include $(srcdir)/mail/testsuite-targets.mk</span>
<a href="#l10.33"></a><span id="l10.33" class="difflineplus">+include $(topsrcdir)/../mail/testsuite-targets.mk</span>
<a href="#l10.34"></a><span id="l10.34"> endif</span>
<a href="#l10.35"></a><span id="l10.35" class="difflineminus">-</span>
<a href="#l10.36"></a><span id="l10.36" class="difflineminus">-endif # COMM_BUILD</span>
<a href="#l10.37"></a><span id="l10.37" class="difflineplus">+endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/configure.in</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/configure.in</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -19,22 +19,17 @@ fi</span>
<a href="#l11.4"></a><span id="l11.4"> if test &quot;$OS_ARCH&quot; != &quot;WINNT&quot;; then</span>
<a href="#l11.5"></a><span id="l11.5">   MOZ_MOVEMAIL=1</span>
<a href="#l11.6"></a><span id="l11.6">   HAVE_MOVEMAIL=1</span>
<a href="#l11.7"></a><span id="l11.7">   AC_DEFINE(HAVE_MOVEMAIL)</span>
<a href="#l11.8"></a><span id="l11.8"> fi</span>
<a href="#l11.9"></a><span id="l11.9"> AC_SUBST(MOZ_MOVEMAIL)</span>
<a href="#l11.10"></a><span id="l11.10"> </span>
<a href="#l11.11"></a><span id="l11.11"> dnl Get other versions (for the calendar plugin)</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-if test &quot;$COMM_BUILD&quot; = &quot;1&quot;; then</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineminus">-  commdir=$topsrcdir</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineminus">-else</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineminus">-  commdir=$topsrcdir/..</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineminus">-fi</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineminus">-SEAMONKEY_VERSION=`cat $commdir/suite/config/version.txt`</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineplus">+SEAMONKEY_VERSION=`cat $topsrcdir/suite/config/version.txt`</span>
<a href="#l11.19"></a><span id="l11.19"> AC_SUBST(SEAMONKEY_VERSION)</span>
<a href="#l11.20"></a><span id="l11.20"> </span>
<a href="#l11.21"></a><span id="l11.21"> dnl =========================================================</span>
<a href="#l11.22"></a><span id="l11.22"> dnl = Lightning extension</span>
<a href="#l11.23"></a><span id="l11.23"> dnl =========================================================</span>
<a href="#l11.24"></a><span id="l11.24"> MOZ_ARG_ENABLE_BOOL(calendar,</span>
<a href="#l11.25"></a><span id="l11.25"> [  --enable-calendar      Enable building of the Lightning calendar extension],</span>
<a href="#l11.26"></a><span id="l11.26">     MOZ_CALENDAR=1,</span>
<a href="#l11.27"></a><span id="l11.27" class="difflineat">@@ -101,41 +96,26 @@ fi</span>
<a href="#l11.28"></a><span id="l11.28"> </span>
<a href="#l11.29"></a><span id="l11.29"> # if we're building the LDAP XPCOM component, we need to build</span>
<a href="#l11.30"></a><span id="l11.30"> # the c-sdk first.</span>
<a href="#l11.31"></a><span id="l11.31"> if test -n &quot;$COMPILE_ENVIRONMENT&quot; -a -n &quot;$MOZ_LDAP_XPCOM&quot;; then</span>
<a href="#l11.32"></a><span id="l11.32">     # Save configure args so we can restore them after configuring LDAP.</span>
<a href="#l11.33"></a><span id="l11.33">     _save_ac_configure_args=&quot;$ac_configure_args&quot;</span>
<a href="#l11.34"></a><span id="l11.34">     ac_configure_args=&quot;$_SUBDIR_CONFIG_ARGS&quot;</span>
<a href="#l11.35"></a><span id="l11.35"> </span>
<a href="#l11.36"></a><span id="l11.36" class="difflineminus">-    mkdir -p ../ldap/sdks/c-sdk/ldap</span>
<a href="#l11.37"></a><span id="l11.37" class="difflineminus">-    # these subdirs may not yet have been created in the build tree.</span>
<a href="#l11.38"></a><span id="l11.38" class="difflineminus">-    # don't use the &quot;-p&quot; switch to mkdir, since not all platforms have it</span>
<a href="#l11.39"></a><span id="l11.39" class="difflineminus">-    if test ! -d &quot;ldap/sdks/c-sdk/ldap&quot;; then</span>
<a href="#l11.40"></a><span id="l11.40" class="difflineminus">-        if test ! -d &quot;ldap/sdks/c-sdk&quot;; then</span>
<a href="#l11.41"></a><span id="l11.41" class="difflineminus">-            if test ! -d &quot;ldap/sdks&quot;; then</span>
<a href="#l11.42"></a><span id="l11.42" class="difflineminus">-                if test ! -d &quot;ldap&quot;; then</span>
<a href="#l11.43"></a><span id="l11.43" class="difflineminus">-                    mkdir &quot;ldap&quot;</span>
<a href="#l11.44"></a><span id="l11.44" class="difflineminus">-                fi</span>
<a href="#l11.45"></a><span id="l11.45" class="difflineminus">-                mkdir &quot;ldap/sdks&quot;</span>
<a href="#l11.46"></a><span id="l11.46" class="difflineminus">-            fi</span>
<a href="#l11.47"></a><span id="l11.47" class="difflineminus">-            mkdir &quot;ldap/sdks/c-sdk&quot;</span>
<a href="#l11.48"></a><span id="l11.48" class="difflineminus">-        fi</span>
<a href="#l11.49"></a><span id="l11.49" class="difflineminus">-        mkdir &quot;ldap/sdks/c-sdk/ldap&quot;</span>
<a href="#l11.50"></a><span id="l11.50" class="difflineminus">-    fi</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineminus">-</span>
<a href="#l11.52"></a><span id="l11.52" class="difflineplus">+    mkdir -p ldap/sdks/c-sdk/ldap</span>
<a href="#l11.53"></a><span id="l11.53">     ac_configure_args=&quot;$_SUBDIR_CONFIG_ARGS --prefix=$MOZ_BUILD_ROOT/dist --with-dist-prefix=$MOZ_BUILD_ROOT/dist --without-nss --with-mozilla&quot;</span>
<a href="#l11.54"></a><span id="l11.54">     if test -n &quot;$HAVE_64BIT_BUILD&quot;; then</span>
<a href="#l11.55"></a><span id="l11.55">         dnl A 64-bit OS was (auto-)detected: (explicitly) enable 64-bit support.</span>
<a href="#l11.56"></a><span id="l11.56">         ac_configure_args=&quot;$ac_configure_args --enable-64bit&quot;</span>
<a href="#l11.57"></a><span id="l11.57">     fi</span>
<a href="#l11.58"></a><span id="l11.58">     if test -n &quot;$LIBXUL_SDK&quot;; then</span>
<a href="#l11.59"></a><span id="l11.59">         ac_configure_args=&quot;$ac_configure_args --with-nspr=$LIBXUL_DIST&quot;</span>
<a href="#l11.60"></a><span id="l11.60">     fi</span>
<a href="#l11.61"></a><span id="l11.61"> </span>
<a href="#l11.62"></a><span id="l11.62">     dnl The cache file needs to be an absolute path to work properly.</span>
<a href="#l11.63"></a><span id="l11.63">     cache_file_base=`dirname $cache_file`</span>
<a href="#l11.64"></a><span id="l11.64">     cache_file=`cd $cache_file_base &amp;&amp; pwd`/`basename $cache_file`</span>
<a href="#l11.65"></a><span id="l11.65"> </span>
<a href="#l11.66"></a><span id="l11.66" class="difflineminus">-    AC_OUTPUT_SUBDIRS(../ldap/sdks/c-sdk)</span>
<a href="#l11.67"></a><span id="l11.67" class="difflineplus">+    AC_OUTPUT_SUBDIRS(ldap/sdks/c-sdk)</span>
<a href="#l11.68"></a><span id="l11.68">     ac_configure_args=&quot;$_save_ac_configure_args&quot;</span>
<a href="#l11.69"></a><span id="l11.69"> fi # COMPILE_ENVIRONMENT &amp;&amp; MOZ_LDAP_XPCOM</span>
<a href="#l11.70"></a><span id="l11.70"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/locales/Makefile.in</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/locales/Makefile.in</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -70,21 +70,21 @@ include $(topsrcdir)/mozilla/toolkit/loc</span>
<a href="#l12.4"></a><span id="l12.4"> </span>
<a href="#l12.5"></a><span id="l12.5"> SEARCH_PLUGINS = $(shell cat $(call MERGE_FILE,/searchplugins/list.txt))</span>
<a href="#l12.6"></a><span id="l12.6"> </span>
<a href="#l12.7"></a><span id="l12.7"> libs:: $(addsuffix .xml,$(SEARCH_PLUGINS))</span>
<a href="#l12.8"></a><span id="l12.8"> 	$(SYSINSTALL) $(IFLAGS1) $^ $(FINAL_TARGET)/searchplugins</span>
<a href="#l12.9"></a><span id="l12.9"> </span>
<a href="#l12.10"></a><span id="l12.10"> libs-%:</span>
<a href="#l12.11"></a><span id="l12.11"> 	$(NSINSTALL) -D $(DIST)/install</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-	@$(MAKE) -C ../../mozilla/toolkit/locales libs-$*</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+	@$(MAKE) -C $(DEPTH)/toolkit/locales libs-$*</span>
<a href="#l12.14"></a><span id="l12.14"> 	@$(MAKE) -C ../../chat/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l12.15"></a><span id="l12.15"> 	@$(MAKE) -C ../../editor/ui/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineminus">-	@$(MAKE) -C ../../mozilla/extensions/spellcheck/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l12.17"></a><span id="l12.17" class="difflineminus">-	@$(MAKE) -C ../../mozilla/intl/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l12.18"></a><span id="l12.18" class="difflineplus">+	@$(MAKE) -C $(DEPTH)/extensions/spellcheck/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l12.19"></a><span id="l12.19" class="difflineplus">+	@$(MAKE) -C $(DEPTH)/intl/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l12.20"></a><span id="l12.20"> 	@$(MAKE) libs AB_CD=$* XPI_NAME=locale-$* PREF_DIR=defaults/pref</span>
<a href="#l12.21"></a><span id="l12.21"> 	@$(MAKE) -C $(DEPTH)/$(MOZ_BRANDING_DIRECTORY)/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l12.22"></a><span id="l12.22"> </span>
<a href="#l12.23"></a><span id="l12.23"> </span>
<a href="#l12.24"></a><span id="l12.24"> # Note the funny extra '../' in SFX_HEADER is because the repackage-zip command</span>
<a href="#l12.25"></a><span id="l12.25"> # is actually run effectively from within the mozilla/ part of the objdir, so</span>
<a href="#l12.26"></a><span id="l12.26"> # topsrcdir points to the wrong place and we have to go one directory higher.</span>
<a href="#l12.27"></a><span id="l12.27"> repackage-win32-installer: WIN32_INSTALLER_OUT=$(_ABS_DIST)/$(PKG_INST_PATH)$(PKG_INST_BASENAME).exe</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mail/testsuite-targets.mk</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mail/testsuite-targets.mk</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -1,102 +1,64 @@</span>
<a href="#l13.4"></a><span id="l13.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l13.5"></a><span id="l13.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l13.6"></a><span id="l13.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l13.7"></a><span id="l13.7"> </span>
<a href="#l13.8"></a><span id="l13.8" class="difflineminus">-MOZMILLDIR=$(DEPTH)/mozilla/_tests/mozmill</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineplus">+MOZMILLDIR=$(DEPTH)/_tests/mozmill</span>
<a href="#l13.10"></a><span id="l13.10"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l13.11"></a><span id="l13.11"> VIRTUALENV_BIN = $(MOZMILLDIR)/../mozmill-virtualenv/Scripts</span>
<a href="#l13.12"></a><span id="l13.12"> else</span>
<a href="#l13.13"></a><span id="l13.13"> VIRTUALENV_BIN = $(MOZMILLDIR)/../mozmill-virtualenv/bin</span>
<a href="#l13.14"></a><span id="l13.14"> endif</span>
<a href="#l13.15"></a><span id="l13.15"> MOZMILLPYTHON = $(abspath $(VIRTUALENV_BIN)/python$(BIN_SUFFIX))</span>
<a href="#l13.16"></a><span id="l13.16"> </span>
<a href="#l13.17"></a><span id="l13.17"> ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))</span>
<a href="#l13.18"></a><span id="l13.18"> # Mac options</span>
<a href="#l13.19"></a><span id="l13.19"> APP_NAME = $(MOZ_APP_DISPLAYNAME)</span>
<a href="#l13.20"></a><span id="l13.20"> ifdef MOZ_DEBUG</span>
<a href="#l13.21"></a><span id="l13.21"> APP_NAME := $(APP_NAME)Debug</span>
<a href="#l13.22"></a><span id="l13.22"> endif</span>
<a href="#l13.23"></a><span id="l13.23" class="difflineminus">-PROGRAM = ../../../$(DIST)/$(APP_NAME).app/</span>
<a href="#l13.24"></a><span id="l13.24" class="difflineplus">+BINARY = ../../../$(DIST)/$(APP_NAME).app/</span>
<a href="#l13.25"></a><span id="l13.25"> else</span>
<a href="#l13.26"></a><span id="l13.26"> # Non-mac options</span>
<a href="#l13.27"></a><span id="l13.27" class="difflineminus">-PROGRAM = ../../../$(DIST)/bin/thunderbird$(BIN_SUFFIX)</span>
<a href="#l13.28"></a><span id="l13.28" class="difflineplus">+BINARY = ../../../$(DIST)/bin/thunderbird$(BIN_SUFFIX)</span>
<a href="#l13.29"></a><span id="l13.29"> endif</span>
<a href="#l13.30"></a><span id="l13.30"> </span>
<a href="#l13.31"></a><span id="l13.31"> check-no-solo = $(foreach solo,SOLO_TEST SOLO_FILE,$(if $($(solo)),$(error $(subst SOLOVAR,$(solo),$(1)))))</span>
<a href="#l13.32"></a><span id="l13.32"> find-solo-test = $(if $(and $(SOLO_TEST),$(SOLO_FILE)),$(error Both SOLO_TEST and SOLO_FILE are specified. You may only specify one.),$(if $(SOLO_TEST),$(SOLO_TEST),$(if $(SOLO_FILE),$(SOLO_FILE),$(error SOLO_TEST or SOLO_FILE needs to be specified.))))</span>
<a href="#l13.33"></a><span id="l13.33"> </span>
<a href="#l13.34"></a><span id="l13.34"> # PYTHONHOME messes very badly with virtualenv setups, so unset it.</span>
<a href="#l13.35"></a><span id="l13.35"> mozmill:</span>
<a href="#l13.36"></a><span id="l13.36"> 	$(call check-no-solo,SOLOVAR is specified. Perhaps you meant mozmill-one.)</span>
<a href="#l13.37"></a><span id="l13.37"> 	unset PYTHONHOME &amp;&amp; cd $(MOZMILLDIR) &amp;&amp; MACOSX_DEPLOYMENT_TARGET= \</span>
<a href="#l13.38"></a><span id="l13.38"> 	$(MOZMILLPYTHON) runtestlist.py --list=mozmilltests.list \</span>
<a href="#l13.39"></a><span id="l13.39" class="difflineminus">-	--binary=$(PROGRAM) \</span>
<a href="#l13.40"></a><span id="l13.40" class="difflineminus">-	--dir=$(abspath $(topsrcdir))/mail/test/mozmill \</span>
<a href="#l13.41"></a><span id="l13.41" class="difflineplus">+	--binary=$(BINARY) \</span>
<a href="#l13.42"></a><span id="l13.42" class="difflineplus">+	--dir=$(abspath $(topsrcdir))/../mail/test/mozmill \</span>
<a href="#l13.43"></a><span id="l13.43"> 	--symbols-path=$(abspath $(DIST)/crashreporter-symbols) \</span>
<a href="#l13.44"></a><span id="l13.44"> 	--plugins-path=$(abspath $(DIST)/plugins) \</span>
<a href="#l13.45"></a><span id="l13.45"> 	$(MOZMILL_EXTRA)</span>
<a href="#l13.46"></a><span id="l13.46"> </span>
<a href="#l13.47"></a><span id="l13.47"> mozmill-one: solo-test = $(find-solo-test)</span>
<a href="#l13.48"></a><span id="l13.48"> mozmill-one:</span>
<a href="#l13.49"></a><span id="l13.49"> 	unset PYTHONHOME &amp;&amp; cd $(MOZMILLDIR) &amp;&amp; MACOSX_DEPLOYMENT_TARGET= \</span>
<a href="#l13.50"></a><span id="l13.50"> 	$(MOZMILLPYTHON) runtest.py \</span>
<a href="#l13.51"></a><span id="l13.51" class="difflineminus">-	--test=$(abspath $(topsrcdir))/mail/test/mozmill/$(solo-test) \</span>
<a href="#l13.52"></a><span id="l13.52" class="difflineminus">-	--binary=$(PROGRAM) \</span>
<a href="#l13.53"></a><span id="l13.53" class="difflineplus">+	--test=$(abspath $(topsrcdir))/../mail/test/mozmill/$(solo-test) \</span>
<a href="#l13.54"></a><span id="l13.54" class="difflineplus">+	--binary=$(BINARY) \</span>
<a href="#l13.55"></a><span id="l13.55"> 	--symbols-path=$(abspath $(DIST)/crashreporter-symbols) \</span>
<a href="#l13.56"></a><span id="l13.56"> 	--plugins-path=$(abspath $(DIST)/plugins) \</span>
<a href="#l13.57"></a><span id="l13.57"> 	$(MOZMILL_EXTRA)</span>
<a href="#l13.58"></a><span id="l13.58"> </span>
<a href="#l13.59"></a><span id="l13.59" class="difflineminus">-# XXX The mozilla/testing/testsuite-targets.mk doesn't really allow for hooks</span>
<a href="#l13.60"></a><span id="l13.60" class="difflineminus">-# outside of itself. Therefore we replicate the functionality we need here,</span>
<a href="#l13.61"></a><span id="l13.61" class="difflineminus">-# calling into the relevant mozilla dirs when necessary for the core tests.</span>
<a href="#l13.62"></a><span id="l13.62" class="difflineplus">+# We need to add the mozmill tests to the package for tests.</span>
<a href="#l13.63"></a><span id="l13.63"> ifndef UNIVERSAL_BINARY</span>
<a href="#l13.64"></a><span id="l13.64" class="difflineminus">-PKG_STAGE = $(DIST)/test-stage</span>
<a href="#l13.65"></a><span id="l13.65" class="difflineminus">-package-tests:: stage-mozilla-tests stage-mozmill stage-modules</span>
<a href="#l13.66"></a><span id="l13.66" class="difflineminus">-</span>
<a href="#l13.67"></a><span id="l13.67"> # If Lightning is enabled, also stage the lightning extension</span>
<a href="#l13.68"></a><span id="l13.68"> ifdef MOZ_CALENDAR</span>
<a href="#l13.69"></a><span id="l13.69" class="difflineminus">-package-tests:: stage-calendar</span>
<a href="#l13.70"></a><span id="l13.70" class="difflineplus">+package-tests: stage-calendar</span>
<a href="#l13.71"></a><span id="l13.71"> endif</span>
<a href="#l13.72"></a><span id="l13.72" class="difflineminus">-</span>
<a href="#l13.73"></a><span id="l13.73" class="difflineminus">-else</span>
<a href="#l13.74"></a><span id="l13.74" class="difflineminus">-# This staging area has been built for us by universal/flight.mk</span>
<a href="#l13.75"></a><span id="l13.75" class="difflineminus">-PKG_STAGE = $(DIST)/universal/test-stage</span>
<a href="#l13.76"></a><span id="l13.76" class="difflineplus">+package-tests: stage-mozmill</span>
<a href="#l13.77"></a><span id="l13.77"> endif</span>
<a href="#l13.78"></a><span id="l13.78"> </span>
<a href="#l13.79"></a><span id="l13.79" class="difflineminus">-package-tests::</span>
<a href="#l13.80"></a><span id="l13.80" class="difflineminus">-	@rm -f '$(DIST)/$(PKG_PATH)$(TEST_PACKAGE)'</span>
<a href="#l13.81"></a><span id="l13.81" class="difflineminus">-ifndef UNIVERSAL_BINARY</span>
<a href="#l13.82"></a><span id="l13.82" class="difflineminus">-	$(NSINSTALL) -D $(DIST)/$(PKG_PATH)</span>
<a href="#l13.83"></a><span id="l13.83" class="difflineminus">-endif</span>
<a href="#l13.84"></a><span id="l13.84" class="difflineminus">-	cd $(PKG_STAGE) &amp;&amp; \</span>
<a href="#l13.85"></a><span id="l13.85" class="difflineminus">-	  zip -r9D '$(abspath $(DIST))/$(PKG_PATH)$(TEST_PACKAGE)' \</span>
<a href="#l13.86"></a><span id="l13.86" class="difflineminus">-	  * -x \*/.mkdir.done</span>
<a href="#l13.87"></a><span id="l13.87" class="difflineminus">-</span>
<a href="#l13.88"></a><span id="l13.88" class="difflineminus">-make-stage-dir:</span>
<a href="#l13.89"></a><span id="l13.89" class="difflineminus">-	rm -rf $(PKG_STAGE) &amp;&amp; $(NSINSTALL) -D $(PKG_STAGE) &amp;&amp; $(NSINSTALL) -D $(PKG_STAGE)/bin &amp;&amp; $(NSINSTALL) -D $(PKG_STAGE)/bin/components &amp;&amp; $(NSINSTALL) -D $(PKG_STAGE)/certs &amp;&amp; $(NSINSTALL) -D $(PKG_STAGE)/extensions</span>
<a href="#l13.90"></a><span id="l13.90" class="difflineminus">-</span>
<a href="#l13.91"></a><span id="l13.91" class="difflineminus">-# Of the core tests, we only currently support xpcshell. Unfortunately</span>
<a href="#l13.92"></a><span id="l13.92" class="difflineminus">-# some of the required xpcshell bits are packaged by mochitest, so we have to</span>
<a href="#l13.93"></a><span id="l13.93" class="difflineminus">-# package those as well.</span>
<a href="#l13.94"></a><span id="l13.94" class="difflineminus">-stage-mozilla-tests: make-stage-dir</span>
<a href="#l13.95"></a><span id="l13.95" class="difflineminus">-	$(MAKE) -C $(DEPTH)/mozilla/layout/tools/reftest stage-package</span>
<a href="#l13.96"></a><span id="l13.96" class="difflineminus">-	$(MAKE) -C $(DEPTH)/mozilla/testing/mochitest stage-package</span>
<a href="#l13.97"></a><span id="l13.97" class="difflineminus">-	$(MAKE) -C $(DEPTH)/mozilla/testing/xpcshell stage-package</span>
<a href="#l13.98"></a><span id="l13.98" class="difflineminus">-	$(MAKE) -C $(DEPTH)/mozilla/testing/mozbase stage-package</span>
<a href="#l13.99"></a><span id="l13.99" class="difflineminus">-</span>
<a href="#l13.100"></a><span id="l13.100" class="difflineminus">-# Although we should probably depend on make-stage-dir here, we don't as the</span>
<a href="#l13.101"></a><span id="l13.101" class="difflineminus">-# make-stage-dir actually removes the package directory for us. Given that we</span>
<a href="#l13.102"></a><span id="l13.102" class="difflineminus">-# are running stage-mozilla-tests which calls testing/testsuite-targets.mk which</span>
<a href="#l13.103"></a><span id="l13.103" class="difflineminus">-# does do this for some tests, then we're actually fine.</span>
<a href="#l13.104"></a><span id="l13.104"> stage-mozmill: make-stage-dir</span>
<a href="#l13.105"></a><span id="l13.105"> 	$(MAKE) -C $(DEPTH)/mail/test/mozmill stage-package</span>
<a href="#l13.106"></a><span id="l13.106"> </span>
<a href="#l13.107"></a><span id="l13.107" class="difflineminus">-stage-modules: make-stage-dir</span>
<a href="#l13.108"></a><span id="l13.108" class="difflineminus">-	$(NSINSTALL) -D $(PKG_STAGE)/modules</span>
<a href="#l13.109"></a><span id="l13.109" class="difflineminus">-	cp -RL $(DEPTH)/mozilla/_tests/modules $(PKG_STAGE)</span>
<a href="#l13.110"></a><span id="l13.110" class="difflineminus">-</span>
<a href="#l13.111"></a><span id="l13.111"> stage-calendar: make-stage-dir</span>
<a href="#l13.112"></a><span id="l13.112"> 	$(MAKE) -C $(DEPTH)/calendar/lightning stage-package</span>
<a href="#l13.113"></a><span id="l13.113"> </span>
<a href="#l13.114"></a><span id="l13.114" class="difflineminus">-.PHONY: \</span>
<a href="#l13.115"></a><span id="l13.115" class="difflineminus">-  package-tests make-stage-dir stage-mozmill stage-modules stage-calendar</span>
<a href="#l13.116"></a><span id="l13.116" class="difflineplus">+.PHONY: stage-mozmill stage-calendar</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1">rename from bridge/bridge.mozbuild</span>
<a href="#l14.2"></a><span id="l14.2">rename to mailnews/mailnews.mozbuild</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineminus">--- a/bridge/bridge.mozbuild</span>
<a href="#l14.4"></a><span id="l14.4" class="difflineplus">+++ b/mailnews/mailnews.mozbuild</span>
<a href="#l14.5"></a><span id="l14.5" class="difflineat">@@ -1,14 +1,14 @@</span>
<a href="#l14.6"></a><span id="l14.6"> # vim: set filetype=python:</span>
<a href="#l14.7"></a><span id="l14.7"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l14.8"></a><span id="l14.8"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l14.9"></a><span id="l14.9"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l14.10"></a><span id="l14.10"> </span>
<a href="#l14.11"></a><span id="l14.11"> if CONFIG['MOZ_LDAP_XPCOM']:</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-    add_tier_dir('app', '../ldap')</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineminus">-    add_tier_dir('app', '../ldap/xpcom')</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineplus">+    add_tier_dir('app', 'ldap')</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineplus">+    add_tier_dir('app', 'ldap/xpcom')</span>
<a href="#l14.16"></a><span id="l14.16"> </span>
<a href="#l14.17"></a><span id="l14.17"> if CONFIG['MOZ_MORK']:</span>
<a href="#l14.18"></a><span id="l14.18" class="difflineminus">-    add_tier_dir('app', '../db')</span>
<a href="#l14.19"></a><span id="l14.19" class="difflineplus">+    add_tier_dir('app', 'db')</span>
<a href="#l14.20"></a><span id="l14.20"> </span>
<a href="#l14.21"></a><span id="l14.21" class="difflineminus">-add_tier_dir('app', '../mailnews')</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineplus">+add_tier_dir('app', 'mailnews')</span>
<a href="#l14.23"></a><span id="l14.23"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/suite/app.mozbuild</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/suite/app.mozbuild</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -1,22 +1,22 @@</span>
<a href="#l15.4"></a><span id="l15.4"> # vim: set filetype=python:</span>
<a href="#l15.5"></a><span id="l15.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l15.6"></a><span id="l15.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l15.7"></a><span id="l15.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l15.8"></a><span id="l15.8"> </span>
<a href="#l15.9"></a><span id="l15.9" class="difflineminus">-include('../bridge/bridge.mozbuild')</span>
<a href="#l15.10"></a><span id="l15.10" class="difflineplus">+include('/mailnews/mailnews.mozbuild')</span>
<a href="#l15.11"></a><span id="l15.11"> </span>
<a href="#l15.12"></a><span id="l15.12"> if not CONFIG['LIBXUL_SDK']:</span>
<a href="#l15.13"></a><span id="l15.13">     include('/toolkit/toolkit.mozbuild')</span>
<a href="#l15.14"></a><span id="l15.14"> </span>
<a href="#l15.15"></a><span id="l15.15"> if CONFIG['MOZ_EXTENSIONS']:</span>
<a href="#l15.16"></a><span id="l15.16">     add_tier_dir('app', 'extensions')</span>
<a href="#l15.17"></a><span id="l15.17"> </span>
<a href="#l15.18"></a><span id="l15.18"> if CONFIG['MOZ_COMPOSER']:</span>
<a href="#l15.19"></a><span id="l15.19" class="difflineminus">-    add_tier_dir('app', '../editor/ui')</span>
<a href="#l15.20"></a><span id="l15.20" class="difflineplus">+    add_tier_dir('app', 'editor/ui')</span>
<a href="#l15.21"></a><span id="l15.21"> </span>
<a href="#l15.22"></a><span id="l15.22"> add_tier_dir('app', CONFIG['MOZ_BRANDING_DIRECTORY'])</span>
<a href="#l15.23"></a><span id="l15.23"> </span>
<a href="#l15.24"></a><span id="l15.24"> if CONFIG['MOZ_CALENDAR']:</span>
<a href="#l15.25"></a><span id="l15.25" class="difflineminus">-    add_tier_dir('app', '../calendar/lightning')</span>
<a href="#l15.26"></a><span id="l15.26" class="difflineplus">+    add_tier_dir('app', 'calendar/lightning')</span>
<a href="#l15.27"></a><span id="l15.27"> </span>
<a href="#l15.28"></a><span id="l15.28" class="difflineminus">-add_tier_dir('app', ['../mozilla/xpfe/components/autocomplete', '../suite'])</span>
<a href="#l15.29"></a><span id="l15.29" class="difflineplus">+add_tier_dir('app', ['xpfe/components/autocomplete', 'suite'])</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/suite/build.mk</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/suite/build.mk</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -1,19 +1,13 @@</span>
<a href="#l16.4"></a><span id="l16.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l16.5"></a><span id="l16.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l16.6"></a><span id="l16.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l16.7"></a><span id="l16.7"> </span>
<a href="#l16.8"></a><span id="l16.8" class="difflineminus">-ifdef COMM_BUILD # Mozilla Makefile</span>
<a href="#l16.9"></a><span id="l16.9" class="difflineminus">-ifndef MOZ_INCOMPLETE_EXTERNAL_LINKAGE</span>
<a href="#l16.10"></a><span id="l16.10" class="difflineminus">-# workaround Bug 599809 by making these makefiles be generated here</span>
<a href="#l16.11"></a><span id="l16.11" class="difflineminus">-SUBMAKEFILES += $(addsuffix /Makefile, $(APP_LIBXUL_DIRS) $(APP_LIBXUL_STATICDIRS))</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-endif</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">-endif</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineminus">-</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineplus">+ifndef COMM_BUILD</span>
<a href="#l16.16"></a><span id="l16.16"> installer:</span>
<a href="#l16.17"></a><span id="l16.17"> 	@$(MAKE) -C suite/installer installer</span>
<a href="#l16.18"></a><span id="l16.18"> </span>
<a href="#l16.19"></a><span id="l16.19"> package:</span>
<a href="#l16.20"></a><span id="l16.20"> 	@$(MAKE) -C suite/installer</span>
<a href="#l16.21"></a><span id="l16.21"> </span>
<a href="#l16.22"></a><span id="l16.22"> package-compare:</span>
<a href="#l16.23"></a><span id="l16.23"> 	@$(MAKE) -C suite/installer package-compare</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineat">@@ -22,25 +16,22 @@ install::</span>
<a href="#l16.25"></a><span id="l16.25"> 	@$(MAKE) -C suite/installer install</span>
<a href="#l16.26"></a><span id="l16.26"> </span>
<a href="#l16.27"></a><span id="l16.27"> source-package::</span>
<a href="#l16.28"></a><span id="l16.28"> 	@$(MAKE) -C suite/installer source-package</span>
<a href="#l16.29"></a><span id="l16.29"> </span>
<a href="#l16.30"></a><span id="l16.30"> upload::</span>
<a href="#l16.31"></a><span id="l16.31"> 	@$(MAKE) -C suite/installer upload</span>
<a href="#l16.32"></a><span id="l16.32"> </span>
<a href="#l16.33"></a><span id="l16.33" class="difflineminus">-ifndef COMM_BUILD # Mozilla Makefile</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineminus">-</span>
<a href="#l16.35"></a><span id="l16.35"> # mochitests need to be run from the Mozilla build system</span>
<a href="#l16.36"></a><span id="l16.36"> ifdef ENABLE_TESTS</span>
<a href="#l16.37"></a><span id="l16.37"> # Backend is implemented in mozilla/testing/testsuite-targets.mk.</span>
<a href="#l16.38"></a><span id="l16.38"> # This part is copied from mozilla/browser/build.mk.</span>
<a href="#l16.39"></a><span id="l16.39"> </span>
<a href="#l16.40"></a><span id="l16.40"> mochitest-browser-chrome:</span>
<a href="#l16.41"></a><span id="l16.41"> 	$(RUN_MOCHITEST) --browser-chrome</span>
<a href="#l16.42"></a><span id="l16.42"> 	$(CHECK_TEST_ERROR)</span>
<a href="#l16.43"></a><span id="l16.43"> </span>
<a href="#l16.44"></a><span id="l16.44"> mochitest:: mochitest-browser-chrome</span>
<a href="#l16.45"></a><span id="l16.45"> </span>
<a href="#l16.46"></a><span id="l16.46"> .PHONY: mochitest-browser-chrome</span>
<a href="#l16.47"></a><span id="l16.47"> endif</span>
<a href="#l16.48"></a><span id="l16.48" class="difflineminus">-</span>
<a href="#l16.49"></a><span id="l16.49" class="difflineminus">-endif # COMM_BUILD</span>
<a href="#l16.50"></a><span id="l16.50" class="difflineplus">+endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/suite/configure.in</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/suite/configure.in</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -19,22 +19,17 @@ fi</span>
<a href="#l17.4"></a><span id="l17.4"> if test &quot;$OS_ARCH&quot; != &quot;WINNT&quot;; then</span>
<a href="#l17.5"></a><span id="l17.5">   MOZ_MOVEMAIL=1</span>
<a href="#l17.6"></a><span id="l17.6">   HAVE_MOVEMAIL=1</span>
<a href="#l17.7"></a><span id="l17.7">   AC_DEFINE(HAVE_MOVEMAIL)</span>
<a href="#l17.8"></a><span id="l17.8"> fi</span>
<a href="#l17.9"></a><span id="l17.9"> AC_SUBST(MOZ_MOVEMAIL)</span>
<a href="#l17.10"></a><span id="l17.10"> </span>
<a href="#l17.11"></a><span id="l17.11"> dnl Get other versions (for the calendar plugin)</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-if test &quot;$COMM_BUILD&quot; = &quot;1&quot;; then</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineminus">-  commdir=$topsrcdir</span>
<a href="#l17.14"></a><span id="l17.14" class="difflineminus">-else</span>
<a href="#l17.15"></a><span id="l17.15" class="difflineminus">-  commdir=$topsrcdir/..</span>
<a href="#l17.16"></a><span id="l17.16" class="difflineminus">-fi</span>
<a href="#l17.17"></a><span id="l17.17" class="difflineminus">-THUNDERBIRD_VERSION=`cat $commdir/mail/config/version.txt`</span>
<a href="#l17.18"></a><span id="l17.18" class="difflineplus">+THUNDERBIRD_VERSION=`cat $topsrcdir/mail/config/version.txt`</span>
<a href="#l17.19"></a><span id="l17.19"> AC_SUBST(THUNDERBIRD_VERSION)</span>
<a href="#l17.20"></a><span id="l17.20"> </span>
<a href="#l17.21"></a><span id="l17.21"> dnl =========================================================</span>
<a href="#l17.22"></a><span id="l17.22"> dnl = Lightning extension</span>
<a href="#l17.23"></a><span id="l17.23"> dnl =========================================================</span>
<a href="#l17.24"></a><span id="l17.24"> MOZ_ARG_ENABLE_BOOL(calendar,</span>
<a href="#l17.25"></a><span id="l17.25"> [  --enable-calendar      Enable building of the Lightning calendar extension],</span>
<a href="#l17.26"></a><span id="l17.26">     MOZ_CALENDAR=1,</span>
<a href="#l17.27"></a><span id="l17.27" class="difflineat">@@ -101,41 +96,26 @@ fi</span>
<a href="#l17.28"></a><span id="l17.28"> </span>
<a href="#l17.29"></a><span id="l17.29"> # if we're building the LDAP XPCOM component, we need to build</span>
<a href="#l17.30"></a><span id="l17.30"> # the c-sdk first.</span>
<a href="#l17.31"></a><span id="l17.31"> if test -n &quot;$COMPILE_ENVIRONMENT&quot; -a -n &quot;$MOZ_LDAP_XPCOM&quot;; then</span>
<a href="#l17.32"></a><span id="l17.32">     # Save configure args so we can restore them after configuring LDAP.</span>
<a href="#l17.33"></a><span id="l17.33">     _save_ac_configure_args=&quot;$ac_configure_args&quot;</span>
<a href="#l17.34"></a><span id="l17.34">     ac_configure_args=&quot;$_SUBDIR_CONFIG_ARGS&quot;</span>
<a href="#l17.35"></a><span id="l17.35"> </span>
<a href="#l17.36"></a><span id="l17.36" class="difflineminus">-    mkdir -p ../ldap/sdks/c-sdk/ldap</span>
<a href="#l17.37"></a><span id="l17.37" class="difflineminus">-    # these subdirs may not yet have been created in the build tree.</span>
<a href="#l17.38"></a><span id="l17.38" class="difflineminus">-    # don't use the &quot;-p&quot; switch to mkdir, since not all platforms have it</span>
<a href="#l17.39"></a><span id="l17.39" class="difflineminus">-    if test ! -d &quot;ldap/sdks/c-sdk/ldap&quot;; then</span>
<a href="#l17.40"></a><span id="l17.40" class="difflineminus">-        if test ! -d &quot;ldap/sdks/c-sdk&quot;; then</span>
<a href="#l17.41"></a><span id="l17.41" class="difflineminus">-            if test ! -d &quot;ldap/sdks&quot;; then</span>
<a href="#l17.42"></a><span id="l17.42" class="difflineminus">-                if test ! -d &quot;ldap&quot;; then</span>
<a href="#l17.43"></a><span id="l17.43" class="difflineminus">-                    mkdir &quot;ldap&quot;</span>
<a href="#l17.44"></a><span id="l17.44" class="difflineminus">-                fi</span>
<a href="#l17.45"></a><span id="l17.45" class="difflineminus">-                mkdir &quot;ldap/sdks&quot;</span>
<a href="#l17.46"></a><span id="l17.46" class="difflineminus">-            fi</span>
<a href="#l17.47"></a><span id="l17.47" class="difflineminus">-            mkdir &quot;ldap/sdks/c-sdk&quot;</span>
<a href="#l17.48"></a><span id="l17.48" class="difflineminus">-        fi</span>
<a href="#l17.49"></a><span id="l17.49" class="difflineminus">-        mkdir &quot;ldap/sdks/c-sdk/ldap&quot;</span>
<a href="#l17.50"></a><span id="l17.50" class="difflineminus">-    fi</span>
<a href="#l17.51"></a><span id="l17.51" class="difflineminus">-</span>
<a href="#l17.52"></a><span id="l17.52" class="difflineplus">+    mkdir -p ldap/sdks/c-sdk/ldap</span>
<a href="#l17.53"></a><span id="l17.53">     ac_configure_args=&quot;$_SUBDIR_CONFIG_ARGS --prefix=$MOZ_BUILD_ROOT/dist --with-dist-prefix=$MOZ_BUILD_ROOT/dist --without-nss --with-mozilla&quot;</span>
<a href="#l17.54"></a><span id="l17.54">     if test -n &quot;$HAVE_64BIT_BUILD&quot;; then</span>
<a href="#l17.55"></a><span id="l17.55">         dnl A 64-bit OS was (auto-)detected: (explicitly) enable 64-bit support.</span>
<a href="#l17.56"></a><span id="l17.56">         ac_configure_args=&quot;$ac_configure_args --enable-64bit&quot;</span>
<a href="#l17.57"></a><span id="l17.57">     fi</span>
<a href="#l17.58"></a><span id="l17.58">     if test -n &quot;$LIBXUL_SDK&quot;; then</span>
<a href="#l17.59"></a><span id="l17.59">         ac_configure_args=&quot;$ac_configure_args --with-nspr=$LIBXUL_DIST&quot;</span>
<a href="#l17.60"></a><span id="l17.60">     fi</span>
<a href="#l17.61"></a><span id="l17.61"> </span>
<a href="#l17.62"></a><span id="l17.62">     dnl The cache file needs to be an absolute path to work properly.</span>
<a href="#l17.63"></a><span id="l17.63">     cache_file_base=`dirname $cache_file`</span>
<a href="#l17.64"></a><span id="l17.64">     cache_file=`cd $cache_file_base &amp;&amp; pwd`/`basename $cache_file`</span>
<a href="#l17.65"></a><span id="l17.65"> </span>
<a href="#l17.66"></a><span id="l17.66" class="difflineminus">-    AC_OUTPUT_SUBDIRS(../ldap/sdks/c-sdk)</span>
<a href="#l17.67"></a><span id="l17.67" class="difflineplus">+    AC_OUTPUT_SUBDIRS(ldap/sdks/c-sdk)</span>
<a href="#l17.68"></a><span id="l17.68">     ac_configure_args=&quot;$_save_ac_configure_args&quot;</span>
<a href="#l17.69"></a><span id="l17.69"> fi # COMPILE_ENVIRONMENT &amp;&amp; MOZ_LDAP_XPCOM</span>
<a href="#l17.70"></a><span id="l17.70"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/suite/locales/Makefile.in</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/suite/locales/Makefile.in</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -126,24 +126,24 @@ libs:: $(addsuffix .xml,$(SEARCH_PLUGINS</span>
<a href="#l18.4"></a><span id="l18.4"> 	$(SYSINSTALL) $(IFLAGS1) $^ $(FINAL_TARGET)/searchplugins</span>
<a href="#l18.5"></a><span id="l18.5"> </span>
<a href="#l18.6"></a><span id="l18.6"> # Extend l10n.mk clobber-% target for our localised extensions</span>
<a href="#l18.7"></a><span id="l18.7"> clobber-%:</span>
<a href="#l18.8"></a><span id="l18.8"> 	$(RM) -rf $(DIST)/xpi-stage/chatzilla-$* $(DIST)/xpi-stage/chatzilla-*.$*.xpi</span>
<a href="#l18.9"></a><span id="l18.9"> </span>
<a href="#l18.10"></a><span id="l18.10"> libs-%:</span>
<a href="#l18.11"></a><span id="l18.11"> 	$(NSINSTALL) -D $(DIST)/install</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-	@$(MAKE) -C ../../mozilla/toolkit/locales libs-$*</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineminus">-	@$(MAKE) -C ../../mozilla/services/sync/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineplus">+	@$(MAKE) -C $(DEPTH)/toolkit/locales libs-$*</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineplus">+	@$(MAKE) -C $(DEPTH)/services/sync/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l18.16"></a><span id="l18.16"> 	@$(MAKE) -C ../../editor/ui/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l18.17"></a><span id="l18.17" class="difflineminus">-	@if test -d ../../mozilla/extensions/irc; then \</span>
<a href="#l18.18"></a><span id="l18.18" class="difflineminus">-	  $(MAKE) -C ../../mozilla/extensions/irc/locales libs-$*; \</span>
<a href="#l18.19"></a><span id="l18.19" class="difflineplus">+	@if test -d $(DEPTH)/extensions/irc; then \</span>
<a href="#l18.20"></a><span id="l18.20" class="difflineplus">+	  $(MAKE) -C $(DEPTH)/extensions/irc/locales libs-$*; \</span>
<a href="#l18.21"></a><span id="l18.21"> 	fi</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineminus">-	@$(MAKE) -C ../../mozilla/extensions/spellcheck/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l18.23"></a><span id="l18.23" class="difflineminus">-	@$(MAKE) -C ../../mozilla/intl/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l18.24"></a><span id="l18.24" class="difflineplus">+	@$(MAKE) -C $(DEPTH)/extensions/spellcheck/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l18.25"></a><span id="l18.25" class="difflineplus">+	@$(MAKE) -C $(DEPTH)/intl/locales AB_CD=$* XPI_NAME=locale-$*</span>
<a href="#l18.26"></a><span id="l18.26"> 	@$(MAKE) libs AB_CD=$* XPI_NAME=locale-$* PREF_DIR=defaults/pref</span>
<a href="#l18.27"></a><span id="l18.27"> </span>
<a href="#l18.28"></a><span id="l18.28"> repackage-win32-installer: WIN32_INSTALLER_OUT=$(_ABS_DIST)/$(PKG_INST_PATH)$(PKG_INST_BASENAME).exe</span>
<a href="#l18.29"></a><span id="l18.29"> repackage-win32-installer: $(call ESCAPE_WILDCARD,$(WIN32_INSTALLER_IN)) $(SUBMAKEFILES)</span>
<a href="#l18.30"></a><span id="l18.30"> 	@echo &quot;Repackaging $(WIN32_INSTALLER_IN) into $(WIN32_INSTALLER_OUT).&quot;</span>
<a href="#l18.31"></a><span id="l18.31"> 	$(MAKE) -C $(DEPTH)/$(MOZ_BRANDING_DIRECTORY) export</span>
<a href="#l18.32"></a><span id="l18.32"> 	$(MAKE) -C ../installer/windows CONFIG_DIR=l10ngen l10ngen/setup.exe l10ngen/7zSD.sfx</span>
<a href="#l18.33"></a><span id="l18.33"> 	$(MAKE) repackage-zip \</span>
<a href="#l18.34"></a><span id="l18.34" class="difflineat">@@ -179,18 +179,18 @@ clobber-zip:</span>
<a href="#l18.35"></a><span id="l18.35"> 	  $(STAGEDIST)/defaults/profile \</span>
<a href="#l18.36"></a><span id="l18.36"> 	  $(STAGEDIST)/chrome/$(AB_CD) \</span>
<a href="#l18.37"></a><span id="l18.37"> 	  $(STAGEDIST)/extensions/langpack-$(AB_CD)@* \</span>
<a href="#l18.38"></a><span id="l18.38"> 	  $(STAGEDIST)/distribution/extensions/langpack-$(AB_CD)@* \</span>
<a href="#l18.39"></a><span id="l18.39"> </span>
<a href="#l18.40"></a><span id="l18.40"> repackage-zip: repackage-extensions</span>
<a href="#l18.41"></a><span id="l18.41"> </span>
<a href="#l18.42"></a><span id="l18.42"> repackage-extensions: $(STAGEDIST)</span>
<a href="#l18.43"></a><span id="l18.43" class="difflineminus">-	if test -d ../../mozilla/extensions/irc; then \</span>
<a href="#l18.44"></a><span id="l18.44" class="difflineminus">-	  $(MAKE) -C ../../mozilla/extensions/irc/locales repackage-zip-$(AB_CD) STAGEDIST=$(STAGEDIST); \</span>
<a href="#l18.45"></a><span id="l18.45" class="difflineplus">+	if test -d $(DEPTH)/extensions/irc; then \</span>
<a href="#l18.46"></a><span id="l18.46" class="difflineplus">+	  $(MAKE) -C $(DEPTH)/extensions/irc/locales repackage-zip-$(AB_CD) STAGEDIST=$(STAGEDIST); \</span>
<a href="#l18.47"></a><span id="l18.47"> 	fi</span>
<a href="#l18.48"></a><span id="l18.48"> ifdef MOZ_OMNIJAR</span>
<a href="#l18.49"></a><span id="l18.49"> 	$(MAKE) -C ../app pack-ext AB_CD=$(AB_CD) STAGEDIST=$(STAGEDIST);</span>
<a href="#l18.50"></a><span id="l18.50"> endif</span>
<a href="#l18.51"></a><span id="l18.51"> </span>
<a href="#l18.52"></a><span id="l18.52"> repackage-zip-%: $(call ESCAPE_WILDCARD,$(ZIP_IN)) $(STAGEDIST) libs-%</span>
<a href="#l18.53"></a><span id="l18.53"> 	@$(MAKE) repackage-zip AB_CD=$* ZIP_IN=$(ZIP_IN)</span>
<a href="#l18.54"></a><span id="l18.54"> </span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

