<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 12455:41a231cc41617810057e47b615be350aa9ecdf4e</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 41a231cc41617810057e47b615be350aa9ecdf4e" />
<meta property="og:url" content="/comm-central/rev/41a231cc41617810057e47b615be350aa9ecdf4e" />
<meta property="og:description" content="Bug 858238 - Convert localMsgs.properties to use string based identifiers rather than numeric. r=Neil" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 41a231cc41617810057e47b615be350aa9ecdf4e 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/41a231cc41617810057e47b615be350aa9ecdf4e">shortlog</a> |
<a href="/comm-central/log/41a231cc41617810057e47b615be350aa9ecdf4e">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/41a231cc41617810057e47b615be350aa9ecdf4e">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/41a231cc41617810057e47b615be350aa9ecdf4e">files</a> |
changeset |
<a href="/comm-central/raw-rev/41a231cc41617810057e47b615be350aa9ecdf4e">raw</a>  | <a href="/comm-central/archive/41a231cc41617810057e47b615be350aa9ecdf4e.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=858238">Bug 858238</a> - Convert localMsgs.properties to use string based identifiers rather than numeric. r=Neil
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#115;&#115;&#104;&#97;&#103;&#97;&#114;&#119;&#97;&#108;&#32;&#60;&#115;&#121;&#115;&#104;&#97;&#103;&#97;&#114;&#119;&#97;&#108;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 15 May 2013 08:09:49 -0400</td></tr>

<tr>
 <td>changeset 12455</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/41a231cc41617810057e47b615be350aa9ecdf4e">41a231cc41617810057e47b615be350aa9ecdf4e</a></td>
</tr>



<tr>
<td>parent 12454</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/ae206f9f23c99a188d61b7c1b28f087b933e4d43">ae206f9f23c99a188d61b7c1b28f087b933e4d43</a>
</td>
</tr>

<tr>
<td>child 12456</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/04529679ec104e17704a68fdf6fb560c3bebf44e">04529679ec104e17704a68fdf6fb560c3bebf44e</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=41a231cc41617810057e47b615be350aa9ecdf4e">9180</a></td></tr>
<tr><td>push user</td><td>ryanvm@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Wed, 15 May 2013 12:13:32 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@04529679ec10 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=04529679ec104e17704a68fdf6fb560c3bebf44e">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=04529679ec104e17704a68fdf6fb560c3bebf44e&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=04529679ec104e17704a68fdf6fb560c3bebf44e&newProject=comm-central&newRevision=b6566a522eaaea6e30d19a59b724c38ce63db776&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=04529679ec104e17704a68fdf6fb560c3bebf44e&newProject=comm-central&newRevision=b6566a522eaaea6e30d19a59b724c38ce63db776&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=04529679ec104e17704a68fdf6fb560c3bebf44e&newProject=comm-central&newRevision=b6566a522eaaea6e30d19a59b724c38ce63db776&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Neil%29&revcount=50">Neil</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=858238">858238</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=858238">Bug 858238</a> - Convert localMsgs.properties to use string based identifiers rather than numeric. r=Neil</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mail/locales/en-US/chrome/messenger/localMsgs.properties">mail/locales/en-US/chrome/messenger/localMsgs.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/41a231cc41617810057e47b615be350aa9ecdf4e/mail/locales/en-US/chrome/messenger/localMsgs.properties">file</a> |
<a href="/comm-central/annotate/41a231cc41617810057e47b615be350aa9ecdf4e/mail/locales/en-US/chrome/messenger/localMsgs.properties">annotate</a> |
<a href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mail/locales/en-US/chrome/messenger/localMsgs.properties">diff</a> |
<a href="/comm-central/comparison/41a231cc41617810057e47b615be350aa9ecdf4e/mail/locales/en-US/chrome/messenger/localMsgs.properties">comparison</a> |
<a href="/comm-central/log/41a231cc41617810057e47b615be350aa9ecdf4e/mail/locales/en-US/chrome/messenger/localMsgs.properties">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsLocalMailFolder.cpp">mailnews/local/src/nsLocalMailFolder.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsLocalMailFolder.cpp">file</a> |
<a href="/comm-central/annotate/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsLocalMailFolder.cpp">annotate</a> |
<a href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsLocalMailFolder.cpp">diff</a> |
<a href="/comm-central/comparison/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsLocalMailFolder.cpp">comparison</a> |
<a href="/comm-central/log/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsLocalMailFolder.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsLocalStrings.h">mailnews/local/src/nsLocalStrings.h</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsLocalStrings.h">diff</a> |
<a href="/comm-central/comparison/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsLocalStrings.h">comparison</a> |
<a href="/comm-central/log/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsLocalStrings.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsMovemailService.cpp">mailnews/local/src/nsMovemailService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsMovemailService.cpp">file</a> |
<a href="/comm-central/annotate/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsMovemailService.cpp">annotate</a> |
<a href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsMovemailService.cpp">diff</a> |
<a href="/comm-central/comparison/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsMovemailService.cpp">comparison</a> |
<a href="/comm-central/log/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsMovemailService.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsMovemailService.h">mailnews/local/src/nsMovemailService.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsMovemailService.h">file</a> |
<a href="/comm-central/annotate/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsMovemailService.h">annotate</a> |
<a href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsMovemailService.h">diff</a> |
<a href="/comm-central/comparison/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsMovemailService.h">comparison</a> |
<a href="/comm-central/log/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsMovemailService.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsParseMailbox.cpp">mailnews/local/src/nsParseMailbox.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsParseMailbox.cpp">file</a> |
<a href="/comm-central/annotate/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsParseMailbox.cpp">annotate</a> |
<a href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsParseMailbox.cpp">diff</a> |
<a href="/comm-central/comparison/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsParseMailbox.cpp">comparison</a> |
<a href="/comm-central/log/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsParseMailbox.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsParseMailbox.h">mailnews/local/src/nsParseMailbox.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsParseMailbox.h">file</a> |
<a href="/comm-central/annotate/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsParseMailbox.h">annotate</a> |
<a href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsParseMailbox.h">diff</a> |
<a href="/comm-central/comparison/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsParseMailbox.h">comparison</a> |
<a href="/comm-central/log/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsParseMailbox.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Protocol.cpp">mailnews/local/src/nsPop3Protocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Protocol.cpp">file</a> |
<a href="/comm-central/annotate/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Protocol.cpp">annotate</a> |
<a href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Protocol.cpp">diff</a> |
<a href="/comm-central/comparison/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Protocol.cpp">comparison</a> |
<a href="/comm-central/log/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Protocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Protocol.h">mailnews/local/src/nsPop3Protocol.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Protocol.h">file</a> |
<a href="/comm-central/annotate/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Protocol.h">annotate</a> |
<a href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Protocol.h">diff</a> |
<a href="/comm-central/comparison/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Protocol.h">comparison</a> |
<a href="/comm-central/log/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Protocol.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Service.cpp">mailnews/local/src/nsPop3Service.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Service.cpp">file</a> |
<a href="/comm-central/annotate/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Service.cpp">annotate</a> |
<a href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Service.cpp">diff</a> |
<a href="/comm-central/comparison/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Service.cpp">comparison</a> |
<a href="/comm-central/log/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Service.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Sink.cpp">mailnews/local/src/nsPop3Sink.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Sink.cpp">file</a> |
<a href="/comm-central/annotate/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Sink.cpp">annotate</a> |
<a href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Sink.cpp">diff</a> |
<a href="/comm-central/comparison/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Sink.cpp">comparison</a> |
<a href="/comm-central/log/41a231cc41617810057e47b615be350aa9ecdf4e/mailnews/local/src/nsPop3Sink.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/suite/locales/en-US/chrome/mailnews/localMsgs.properties">suite/locales/en-US/chrome/mailnews/localMsgs.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/41a231cc41617810057e47b615be350aa9ecdf4e/suite/locales/en-US/chrome/mailnews/localMsgs.properties">file</a> |
<a href="/comm-central/annotate/41a231cc41617810057e47b615be350aa9ecdf4e/suite/locales/en-US/chrome/mailnews/localMsgs.properties">annotate</a> |
<a href="/comm-central/diff/41a231cc41617810057e47b615be350aa9ecdf4e/suite/locales/en-US/chrome/mailnews/localMsgs.properties">diff</a> |
<a href="/comm-central/comparison/41a231cc41617810057e47b615be350aa9ecdf4e/suite/locales/en-US/chrome/mailnews/localMsgs.properties">comparison</a> |
<a href="/comm-central/log/41a231cc41617810057e47b615be350aa9ecdf4e/suite/locales/en-US/chrome/mailnews/localMsgs.properties">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/localMsgs.properties</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/localMsgs.properties</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -14,211 +14,131 @@ pop3EnterPasswordPromptTitle=Enter your </span>
<a href="#l1.4"></a><span id="l1.4"> pop3EnterPasswordPrompt=Enter your password for %1$S on %2$S:</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6"> # LOCALIZATION NOTE(pop3PreviouslyEnteredPasswordIsInvalidPrompt): Do not</span>
<a href="#l1.7"></a><span id="l1.7"> # translate the words &quot;%1$S&quot; and &quot;%2$S&quot; below. Place the word %1$S where the</span>
<a href="#l1.8"></a><span id="l1.8"> # user name should appear, and %2$S where the host name should appear.</span>
<a href="#l1.9"></a><span id="l1.9"> pop3PreviouslyEnteredPasswordIsInvalidPrompt=Please enter a new password for user %1$S on %2$S:</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11"> # Status - Downloading message n of m to account</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-## @name receivingMsgs</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineminus">-## @loc None</span>
<a href="#l1.14"></a><span id="l1.14"> #LOCALIZATION NOTE (receivingMsgs): Do not translate %1$S, %2$S, or %3$S in the following lines.</span>
<a href="#l1.15"></a><span id="l1.15"> # Place the word %1$S where the number of messages downloaded so far should appear.</span>
<a href="#l1.16"></a><span id="l1.16"> # Place the word %2$S where the total number of messages to receive should appear;</span>
<a href="#l1.17"></a><span id="l1.17"> # Place %3$S where the account name should appear.</span>
<a href="#l1.18"></a><span id="l1.18"> receivingMsgs=Downloading message %1$S of %2$S to %3$S</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20"> # Status - connecting to host</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineminus">-## @name hostContacted</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineminus">-## @loc None</span>
<a href="#l1.23"></a><span id="l1.23"> #LOCALIZATION NOTE : Do not translate %1$S in the following line.</span>
<a href="#l1.24"></a><span id="l1.24"> # Place %1$S where the account name should appear</span>
<a href="#l1.25"></a><span id="l1.25"> hostContacted=Connect: Host for %1$S contacted, sending login information…</span>
<a href="#l1.26"></a><span id="l1.26"> </span>
<a href="#l1.27"></a><span id="l1.27"> # Status - no messages to download </span>
<a href="#l1.28"></a><span id="l1.28" class="difflineminus">-## @name noMessages</span>
<a href="#l1.29"></a><span id="l1.29" class="difflineminus">-## @loc None</span>
<a href="#l1.30"></a><span id="l1.30"> #LOCALIZATION NOTE : Do not translate %1$S in the following line.</span>
<a href="#l1.31"></a><span id="l1.31"> # Place %1$S where the account name should appear</span>
<a href="#l1.32"></a><span id="l1.32"> noMessages=There are no new messages for %1$S.</span>
<a href="#l1.33"></a><span id="l1.33"> </span>
<a href="#l1.34"></a><span id="l1.34"> # Status - messages received after the download</span>
<a href="#l1.35"></a><span id="l1.35" class="difflineminus">-## @name receivedMessages</span>
<a href="#l1.36"></a><span id="l1.36" class="difflineminus">-## @loc None</span>
<a href="#l1.37"></a><span id="l1.37"> #LOCALIZATION NOTE : Do not translate %1$S, %2$S or %3$S in the following line.</span>
<a href="#l1.38"></a><span id="l1.38"> # %1$S will receive the number of messages received</span>
<a href="#l1.39"></a><span id="l1.39"> # %2$S will receive the total number of messages</span>
<a href="#l1.40"></a><span id="l1.40"> # Place %3$S where the account name should appear</span>
<a href="#l1.41"></a><span id="l1.41"> receivedMessages=%3$S Received %1$S of %2$S messages</span>
<a href="#l1.42"></a><span id="l1.42"> </span>
<a href="#l1.43"></a><span id="l1.43" class="difflineminus">-## @name MK_POP3_OUT_OF_DISK_SPACE</span>
<a href="#l1.44"></a><span id="l1.44" class="difflineminus">-## @loc None</span>
<a href="#l1.45"></a><span id="l1.45" class="difflineminus">--321=There is not enough disk space to download new messages. Try deleting old mail, emptying the Trash folder, and compacting your mail folders, and then try again.</span>
<a href="#l1.46"></a><span id="l1.46" class="difflineplus">+pop3OutOfDiskSpace=There is not enough disk space to download new messages. Try deleting old mail, emptying the Trash folder, and compacting your mail folders, and then try again.</span>
<a href="#l1.47"></a><span id="l1.47"> </span>
<a href="#l1.48"></a><span id="l1.48"> # Status - parsing folder</span>
<a href="#l1.49"></a><span id="l1.49" class="difflineminus">-## @name LOCAL_STATUS_SELECTING_MAILBOX</span>
<a href="#l1.50"></a><span id="l1.50" class="difflineminus">-## @loc None</span>
<a href="#l1.51"></a><span id="l1.51" class="difflineminus">-#LOCALIZATION NOTE (4000): Do not translate %s in the following line.</span>
<a href="#l1.52"></a><span id="l1.52" class="difflineminus">-# Place the word %s where the name of the mailbox should appear</span>
<a href="#l1.53"></a><span id="l1.53" class="difflineminus">-4000=Building summary file for %S…</span>
<a href="#l1.54"></a><span id="l1.54" class="difflineplus">+#LOCALIZATION NOTE (buildingSummary): Do not translate %S in the following line.</span>
<a href="#l1.55"></a><span id="l1.55" class="difflineplus">+# Place the word %S where the name of the mailbox should appear</span>
<a href="#l1.56"></a><span id="l1.56" class="difflineplus">+buildingSummary=Building summary file for %S…</span>
<a href="#l1.57"></a><span id="l1.57"> </span>
<a href="#l1.58"></a><span id="l1.58"> # Status - parsing folder</span>
<a href="#l1.59"></a><span id="l1.59" class="difflineminus">-## @name LOCAL_STATUS_DOCUMENT_DONE</span>
<a href="#l1.60"></a><span id="l1.60" class="difflineminus">-## @loc None</span>
<a href="#l1.61"></a><span id="l1.61" class="difflineminus">-4001=Done</span>
<a href="#l1.62"></a><span id="l1.62" class="difflineplus">+localStatusDocumentDone=Done</span>
<a href="#l1.63"></a><span id="l1.63"> </span>
<a href="#l1.64"></a><span id="l1.64"> # Status - pop3 server error</span>
<a href="#l1.65"></a><span id="l1.65" class="difflineminus">-## @name POP3_SERVER_ERROR</span>
<a href="#l1.66"></a><span id="l1.66" class="difflineminus">-## @loc None</span>
<a href="#l1.67"></a><span id="l1.67" class="difflineminus">-#LOCALIZATION NOTE (4003): Do not translate POP3 in the following line.</span>
<a href="#l1.68"></a><span id="l1.68" class="difflineminus">-4003=An error occurred with the POP3 mail server.</span>
<a href="#l1.69"></a><span id="l1.69" class="difflineplus">+#LOCALIZATION NOTE (pop3ServerError): Do not translate POP3 in the following line.</span>
<a href="#l1.70"></a><span id="l1.70" class="difflineplus">+pop3ServerError=An error occurred with the POP3 mail server.</span>
<a href="#l1.71"></a><span id="l1.71"> </span>
<a href="#l1.72"></a><span id="l1.72"> # Status - pop3 user name failed</span>
<a href="#l1.73"></a><span id="l1.73" class="difflineminus">-## @name POP3_USERNAME_FAILURE</span>
<a href="#l1.74"></a><span id="l1.74" class="difflineminus">-## @loc None</span>
<a href="#l1.75"></a><span id="l1.75" class="difflineminus">-4004=Sending of username did not succeed.</span>
<a href="#l1.76"></a><span id="l1.76" class="difflineplus">+pop3UsernameFailure=Sending of username did not succeed.</span>
<a href="#l1.77"></a><span id="l1.77"> </span>
<a href="#l1.78"></a><span id="l1.78"> # Status - password failed</span>
<a href="#l1.79"></a><span id="l1.79" class="difflineminus">-## @name POP3_PASSWORD_FAILURE</span>
<a href="#l1.80"></a><span id="l1.80" class="difflineminus">-## @loc None</span>
<a href="#l1.81"></a><span id="l1.81" class="difflineminus">-4005=Sending of password did not succeed.</span>
<a href="#l1.82"></a><span id="l1.82" class="difflineplus">+pop3PasswordFailure=Sending of password did not succeed.</span>
<a href="#l1.83"></a><span id="l1.83"> </span>
<a href="#l1.84"></a><span id="l1.84"> # Status - write error occurred</span>
<a href="#l1.85"></a><span id="l1.85" class="difflineminus">-## @name POP3_MESSAGE_WRITE_ERROR</span>
<a href="#l1.86"></a><span id="l1.86" class="difflineminus">-## @loc None</span>
<a href="#l1.87"></a><span id="l1.87" class="difflineminus">-4006=Unable to write the email to the mailbox. Make sure the file system allows you write privileges, and you have enough disk space to copy the mailbox.</span>
<a href="#l1.88"></a><span id="l1.88" class="difflineplus">+pop3MessageWriteError=Unable to write the email to the mailbox. Make sure the file system allows you write privileges, and you have enough disk space to copy the mailbox.</span>
<a href="#l1.89"></a><span id="l1.89"> </span>
<a href="#l1.90"></a><span id="l1.90"> # Status - retr failure from the server</span>
<a href="#l1.91"></a><span id="l1.91" class="difflineminus">-## @name POP3_RETR_FAILURE</span>
<a href="#l1.92"></a><span id="l1.92" class="difflineminus">-## @loc None</span>
<a href="#l1.93"></a><span id="l1.93" class="difflineminus">-# LOCALIZATION NOTE(4012): Do not translate the word &quot;POP3&quot; below.</span>
<a href="#l1.94"></a><span id="l1.94" class="difflineminus">-4012=The RETR command did not succeed. Error retrieving a message.</span>
<a href="#l1.95"></a><span id="l1.95" class="difflineplus">+pop3RetrFailure=The RETR command did not succeed. Error retrieving a message.</span>
<a href="#l1.96"></a><span id="l1.96"> </span>
<a href="#l1.97"></a><span id="l1.97"> # Status - password undefined </span>
<a href="#l1.98"></a><span id="l1.98" class="difflineminus">-## @name POP3_PASSWORD_UNDEFINED</span>
<a href="#l1.99"></a><span id="l1.99" class="difflineminus">-## @loc None</span>
<a href="#l1.100"></a><span id="l1.100" class="difflineminus">-4013=Error getting mail password.</span>
<a href="#l1.101"></a><span id="l1.101" class="difflineplus">+pop3PasswordUndefined=Error getting mail password.</span>
<a href="#l1.102"></a><span id="l1.102"> </span>
<a href="#l1.103"></a><span id="l1.103"> # Status - username undefined </span>
<a href="#l1.104"></a><span id="l1.104" class="difflineminus">-## @name POP3_USERNAME_UNDEFINED</span>
<a href="#l1.105"></a><span id="l1.105" class="difflineminus">-## @loc None</span>
<a href="#l1.106"></a><span id="l1.106" class="difflineminus">-4014=You have not supplied a username for this server.  Please provide one in the account setup menu and try again.</span>
<a href="#l1.107"></a><span id="l1.107" class="difflineplus">+pop3UsernameUndefined=You have not supplied a username for this server.  Please provide one in the account setup menu and try again.</span>
<a href="#l1.108"></a><span id="l1.108"> </span>
<a href="#l1.109"></a><span id="l1.109"> # Status - list failure</span>
<a href="#l1.110"></a><span id="l1.110" class="difflineminus">-## @name POP3_LIST_FAILURE</span>
<a href="#l1.111"></a><span id="l1.111" class="difflineminus">-## @loc None</span>
<a href="#l1.112"></a><span id="l1.112" class="difflineminus">-# LOCALIZATION NOTE(4015): Do not translate the word &quot;POP3&quot; below.</span>
<a href="#l1.113"></a><span id="l1.113" class="difflineminus">-4015=The LIST command did not succeed. Error getting the ID and size of a message.</span>
<a href="#l1.114"></a><span id="l1.114" class="difflineplus">+pop3ListFailure=The LIST command did not succeed. Error getting the ID and size of a message.</span>
<a href="#l1.115"></a><span id="l1.115"> </span>
<a href="#l1.116"></a><span id="l1.116"> # Status - delete error </span>
<a href="#l1.117"></a><span id="l1.117" class="difflineminus">-## @name POP3_DELE_FAILURE</span>
<a href="#l1.118"></a><span id="l1.118" class="difflineminus">-## @loc None</span>
<a href="#l1.119"></a><span id="l1.119" class="difflineminus">-# LOCALIZATION NOTE(4016): Do not translate the word &quot;POP3&quot; below.</span>
<a href="#l1.120"></a><span id="l1.120" class="difflineminus">-4016=The DELE command did not succeed. Error marking a message as deleted.</span>
<a href="#l1.121"></a><span id="l1.121" class="difflineplus">+pop3DeleFailure=The DELE command did not succeed. Error marking a message as deleted.</span>
<a href="#l1.122"></a><span id="l1.122"> </span>
<a href="#l1.123"></a><span id="l1.123"> # Status - stat failed</span>
<a href="#l1.124"></a><span id="l1.124" class="difflineminus">-## @name POP3_STAT</span>
<a href="#l1.125"></a><span id="l1.125" class="difflineminus">-## @loc None</span>
<a href="#l1.126"></a><span id="l1.126" class="difflineminus">-4024= The STAT command did not succeed. Error getting message number and sizes.</span>
<a href="#l1.127"></a><span id="l1.127" class="difflineminus">-</span>
<a href="#l1.128"></a><span id="l1.128" class="difflineminus">-## @name POP3_SERVER_SAID</span>
<a href="#l1.129"></a><span id="l1.129" class="difflineminus">-## @loc None</span>
<a href="#l1.130"></a><span id="l1.130" class="difflineminus">-4025= Mail server %S responded: </span>
<a href="#l1.131"></a><span id="l1.131" class="difflineplus">+pop3StatFail=The STAT command did not succeed. Error getting message number and sizes.</span>
<a href="#l1.132"></a><span id="l1.132"> </span>
<a href="#l1.133"></a><span id="l1.133" class="difflineminus">-## @name COPYING_MSGS_STATUS</span>
<a href="#l1.134"></a><span id="l1.134" class="difflineminus">-## @loc None</span>
<a href="#l1.135"></a><span id="l1.135" class="difflineminus">-4027=Copying %S of %S messages to %S</span>
<a href="#l1.136"></a><span id="l1.136" class="difflineplus">+#LOCALIZATION NOTE (pop3ServerSaid): Do not remove the leading space during translation.</span>
<a href="#l1.137"></a><span id="l1.137" class="difflineplus">+pop3ServerSaid= Mail server %S responded: </span>
<a href="#l1.138"></a><span id="l1.138"> </span>
<a href="#l1.139"></a><span id="l1.139" class="difflineminus">-## @name MOVING_MSGS_STATUS</span>
<a href="#l1.140"></a><span id="l1.140" class="difflineminus">-## @loc None</span>
<a href="#l1.141"></a><span id="l1.141" class="difflineminus">-4028=Moving %S of %S messages to %S</span>
<a href="#l1.142"></a><span id="l1.142" class="difflineplus">+copyingMessagesStatus=Copying %S of %S messages to %S</span>
<a href="#l1.143"></a><span id="l1.143" class="difflineplus">+</span>
<a href="#l1.144"></a><span id="l1.144" class="difflineplus">+movingMessagesStatus=Moving %S of %S messages to %S</span>
<a href="#l1.145"></a><span id="l1.145"> </span>
<a href="#l1.146"></a><span id="l1.146"> # Status - write error occurred</span>
<a href="#l1.147"></a><span id="l1.147" class="difflineminus">-## @name POP3_MESSAGE_FOLDER_BUSY</span>
<a href="#l1.148"></a><span id="l1.148" class="difflineminus">-## @loc None</span>
<a href="#l1.149"></a><span id="l1.149" class="difflineminus">-4029=This folder is being processed. Please wait until processing is complete to get messages.</span>
<a href="#l1.150"></a><span id="l1.150" class="difflineplus">+pop3MessageFolderBusy=This folder is being processed. Please wait until processing is complete to get messages.</span>
<a href="#l1.151"></a><span id="l1.151"> </span>
<a href="#l1.152"></a><span id="l1.152" class="difflineminus">-## @name MOVEMAIL_CANT_OPEN_SPOOL_FILE</span>
<a href="#l1.153"></a><span id="l1.153" class="difflineminus">-## @loc None</span>
<a href="#l1.154"></a><span id="l1.154" class="difflineminus">-4033=Unable to open mail spool file %S.</span>
<a href="#l1.155"></a><span id="l1.155" class="difflineplus">+movemailCantOpenSpoolFile=Unable to open mail spool file %S.</span>
<a href="#l1.156"></a><span id="l1.156"> </span>
<a href="#l1.157"></a><span id="l1.157" class="difflineminus">-## @name MOVEMAIL_CANT_CREATE_LOCK</span>
<a href="#l1.158"></a><span id="l1.158" class="difflineminus">-## @loc None</span>
<a href="#l1.159"></a><span id="l1.159" class="difflineminus">-4034=Unable to create lock file %S. For movemail to work, it is necessary to create lock files in the mail spool directory. On many systems, this is best accomplished by making the spool directory be mode 01777.</span>
<a href="#l1.160"></a><span id="l1.160" class="difflineplus">+movemailCantCreateLock=Unable to create lock file %S. For movemail to work, it is necessary to create lock files in the mail spool directory. On many systems, this is best accomplished by making the spool directory be mode 01777.</span>
<a href="#l1.161"></a><span id="l1.161"> </span>
<a href="#l1.162"></a><span id="l1.162" class="difflineminus">-## @name MOVEMAIL_CANT_DELETE_LOCK</span>
<a href="#l1.163"></a><span id="l1.163" class="difflineminus">-## @loc None</span>
<a href="#l1.164"></a><span id="l1.164" class="difflineminus">-4035=Unable to delete lock file %S.</span>
<a href="#l1.165"></a><span id="l1.165" class="difflineplus">+movemailCantDeleteLock=Unable to delete lock file %S.</span>
<a href="#l1.166"></a><span id="l1.166"> </span>
<a href="#l1.167"></a><span id="l1.167" class="difflineminus">-## @name MOVEMAIL_CANT_TRUNCATE_SPOOL_FILE</span>
<a href="#l1.168"></a><span id="l1.168" class="difflineminus">-## @loc None</span>
<a href="#l1.169"></a><span id="l1.169" class="difflineminus">-4036=Unable to truncate spool file %S.</span>
<a href="#l1.170"></a><span id="l1.170" class="difflineplus">+movemailCantTruncateSpoolFile=Unable to truncate spool file %S.</span>
<a href="#l1.171"></a><span id="l1.171"> </span>
<a href="#l1.172"></a><span id="l1.172" class="difflineminus">-## @name MOVEMAIL_SPOOL_FILE_NOT_FOUND</span>
<a href="#l1.173"></a><span id="l1.173" class="difflineminus">-## @loc None</span>
<a href="#l1.174"></a><span id="l1.174" class="difflineminus">-4037=Unable to locate mail spool file.</span>
<a href="#l1.175"></a><span id="l1.175" class="difflineplus">+movemailSpoolFileNotFound=Unable to locate mail spool file.</span>
<a href="#l1.176"></a><span id="l1.176"> </span>
<a href="#l1.177"></a><span id="l1.177" class="difflineminus">-## @name POP3_TMP_DOWNLOAD_FAILED</span>
<a href="#l1.178"></a><span id="l1.178" class="difflineminus">-## @loc None</span>
<a href="#l1.179"></a><span id="l1.179" class="difflineminus">-4038=There was an error downloading the following message:   \nFrom: %S\n   Subject: %S\n This message may contain a virus or there is not enough disk space. Skip this message?</span>
<a href="#l1.180"></a><span id="l1.180" class="difflineplus">+pop3TmpDownloadError=There was an error downloading the following message:   \nFrom: %S\n   Subject: %S\n This message may contain a virus or there is not enough disk space. Skip this message?</span>
<a href="#l1.181"></a><span id="l1.181"> </span>
<a href="#l1.182"></a><span id="l1.182"> # Status - the server doesn't support UIDL…</span>
<a href="#l1.183"></a><span id="l1.183" class="difflineminus">-## @name POP3_SERVER_DOES_NOT_SUPPORT_UIDL_ETC</span>
<a href="#l1.184"></a><span id="l1.184" class="difflineminus">-## @loc None</span>
<a href="#l1.185"></a><span id="l1.185" class="difflineminus">-# LOCALIZATION NOTE(4010): The following sentence should be translated in this way:</span>
<a href="#l1.186"></a><span id="l1.186" class="difflineplus">+# LOCALIZATION NOTE(pop3ServerDoesNotSupportUidlEtc): The following sentence should be translated in this way:</span>
<a href="#l1.187"></a><span id="l1.187"> # Do not translate &quot;POP3&quot;</span>
<a href="#l1.188"></a><span id="l1.188"> # Do not translate &quot;%S&quot;. Place %S in your translation where the name of the server should appear.</span>
<a href="#l1.189"></a><span id="l1.189"> # Do not translate &quot;UIDL&quot;</span>
<a href="#l1.190"></a><span id="l1.190" class="difflineminus">-4040=The POP3 mail server (%S) does not support UIDL or XTND XLST, which are required to implement the ``Leave on Server'', ``Maximum Message Size'' or ``Fetch Headers Only'' options. To download your mail, turn off these options in the Server Settings for your mail server in the Account Settings window.</span>
<a href="#l1.191"></a><span id="l1.191" class="difflineplus">+pop3ServerDoesNotSupportUidlEtc=The POP3 mail server (%S) does not support UIDL or XTND XLST, which are required to implement the ``Leave on Server'', ``Maximum Message Size'' or ``Fetch Headers Only'' options. To download your mail, turn off these options in the Server Settings for your mail server in the Account Settings window.</span>
<a href="#l1.192"></a><span id="l1.192"> </span>
<a href="#l1.193"></a><span id="l1.193"> # Status - the server doesn't support the top command</span>
<a href="#l1.194"></a><span id="l1.194" class="difflineminus">-## @name POP3_SERVER_DOES_NOT_SUPPORT_THE_TOP_COMMAND</span>
<a href="#l1.195"></a><span id="l1.195" class="difflineminus">-## @loc None</span>
<a href="#l1.196"></a><span id="l1.196" class="difflineminus">-# LOCALIZATION NOTE(4011): The following sentence should be translated in this way:</span>
<a href="#l1.197"></a><span id="l1.197" class="difflineplus">+# LOCALIZATION NOTE(pop3ServerDoesNotSupportTopCommand): The following sentence should be translated in this way:</span>
<a href="#l1.198"></a><span id="l1.198"> # Do not translate &quot;POP3&quot;</span>
<a href="#l1.199"></a><span id="l1.199"> # Do not translate &quot;%S&quot;. Place %S in your translation where the name of the server should appear.</span>
<a href="#l1.200"></a><span id="l1.200"> # Do not translate &quot;TOP&quot;</span>
<a href="#l1.201"></a><span id="l1.201" class="difflineminus">-4041=The POP3 mail server (%S) does not support the TOP command. Without server support for this, we cannot implement the ``Maximum Message Size'' or ``Fetch Headers Only'' preference.  This option has been disabled, and messages will be downloaded regardless of their size.</span>
<a href="#l1.202"></a><span id="l1.202" class="difflineplus">+pop3ServerDoesNotSupportTopCommand=The POP3 mail server (%S) does not support the TOP command. Without server support for this, we cannot implement the ``Maximum Message Size'' or ``Fetch Headers Only'' preference.  This option has been disabled, and messages will be downloaded regardless of their size.</span>
<a href="#l1.203"></a><span id="l1.203"> </span>
<a href="#l1.204"></a><span id="l1.204" class="difflineminus">-## @name NS_ERROR_COULD_NOT_CONNECT_VIA_TLS</span>
<a href="#l1.205"></a><span id="l1.205" class="difflineminus">-## @loc None</span>
<a href="#l1.206"></a><span id="l1.206" class="difflineminus">-4043=Unable to establish TLS connection to POP3 server. The server may be down or may be incorrectly configured. Please verify the correct configuration in the Server Settings for your mail server in the Account Settings window and try again.</span>
<a href="#l1.207"></a><span id="l1.207" class="difflineplus">+nsErrorCouldNotConnectViaTls=Unable to establish TLS connection to POP3 server. The server may be down or may be incorrectly configured. Please verify the correct configuration in the Server Settings for your mail server in the Account Settings window and try again.</span>
<a href="#l1.208"></a><span id="l1.208"> </span>
<a href="#l1.209"></a><span id="l1.209" class="difflineminus">-## @name POP3_MOVE_FOLDER_TO_TRASH</span>
<a href="#l1.210"></a><span id="l1.210" class="difflineminus">-## @loc None</span>
<a href="#l1.211"></a><span id="l1.211" class="difflineminus">-# LOCALIZATION NOTE (4044): Do not translate the word %S below.</span>
<a href="#l1.212"></a><span id="l1.212" class="difflineplus">+# LOCALIZATION NOTE (pop3MoveFolderToTrash): Do not translate the word %S below.</span>
<a href="#l1.213"></a><span id="l1.213"> # &quot;%S&quot; is the the name of the folder.</span>
<a href="#l1.214"></a><span id="l1.214" class="difflineminus">-4044=Are you sure you want to delete the folder '%S'?</span>
<a href="#l1.215"></a><span id="l1.215" class="difflineplus">+pop3MoveFolderToTrash=Are you sure you want to delete the folder '%S'?</span>
<a href="#l1.216"></a><span id="l1.216"> </span>
<a href="#l1.217"></a><span id="l1.217" class="difflineminus">-## @name POP3_DELETE_FOLDER_DIALOG_TITLE</span>
<a href="#l1.218"></a><span id="l1.218" class="difflineminus">-## @loc None</span>
<a href="#l1.219"></a><span id="l1.219" class="difflineminus">-4045=Delete Folder</span>
<a href="#l1.220"></a><span id="l1.220" class="difflineplus">+pop3DeleteFolderDialogTitle=Delete Folder</span>
<a href="#l1.221"></a><span id="l1.221"> </span>
<a href="#l1.222"></a><span id="l1.222" class="difflineminus">-## @name POP3_DELETE_FOLDER_BUTTON_LABEL</span>
<a href="#l1.223"></a><span id="l1.223" class="difflineminus">-## @loc None</span>
<a href="#l1.224"></a><span id="l1.224" class="difflineminus">-4046=&amp;Delete Folder</span>
<a href="#l1.225"></a><span id="l1.225" class="difflineplus">+pop3DeleteFolderButtonLabel=&amp;Delete Folder</span>
<a href="#l1.226"></a><span id="l1.226"> </span>
<a href="#l1.227"></a><span id="l1.227" class="difflineminus">-## @name POP3_AUTH_INTERNAL_ERROR</span>
<a href="#l1.228"></a><span id="l1.228" class="difflineminus">-## @loc None</span>
<a href="#l1.229"></a><span id="l1.229" class="difflineminus">-4047=Internal state error during POP3 server authentication. This is an internal, unexpected error in the application, please report it as bug.</span>
<a href="#l1.230"></a><span id="l1.230" class="difflineplus">+pop3AuthInternalError=Internal state error during POP3 server authentication. This is an internal, unexpected error in the application, please report it as bug.</span>
<a href="#l1.231"></a><span id="l1.231"> </span>
<a href="#l1.232"></a><span id="l1.232" class="difflineminus">-## @name POP3_AUTH_CHANGE_ENCRYPT_TO_PLAIN_NO_SSL</span>
<a href="#l1.233"></a><span id="l1.233" class="difflineminus">-## @loc None</span>
<a href="#l1.234"></a><span id="l1.234" class="difflineminus">-4048=This POP3 server does not seem to support encrypted passwords. If you just set up the account, please try changing to 'Password, transmitted insecurely' as the 'Authentication method' in the 'Account Settings | Server settings'. If it used to work and now suddenly fails, this is a common scenario how someone could steal your password.</span>
<a href="#l1.235"></a><span id="l1.235" class="difflineplus">+pop3AuthChangeEncryptToPlainNoSSL=This POP3 server does not seem to support encrypted passwords. If you just set up the account, please try changing to 'Password, transmitted insecurely' as the 'Authentication method' in the 'Account Settings | Server settings'. If it used to work and now suddenly fails, this is a common scenario how someone could steal your password.</span>
<a href="#l1.236"></a><span id="l1.236"> </span>
<a href="#l1.237"></a><span id="l1.237" class="difflineminus">-## @name POP3_AUTH_CHANGE_ENCRYPT_TO_PLAIN_SSL</span>
<a href="#l1.238"></a><span id="l1.238" class="difflineminus">-## @loc None</span>
<a href="#l1.239"></a><span id="l1.239" class="difflineminus">-4049=This POP3 server does not seem to support encrypted passwords. If you just set up this account, please try changing to 'Normal password' as the 'Authentication method' in the 'Account Settings | Server settings'. If it used to work and now suddenly fails, please contact your email administrator or provider.</span>
<a href="#l1.240"></a><span id="l1.240" class="difflineplus">+pop3AuthChangeEncryptToPlainSSL=This POP3 server does not seem to support encrypted passwords. If you just set up this account, please try changing to 'Normal password' as the 'Authentication method' in the 'Account Settings | Server settings'. If it used to work and now suddenly fails, please contact your email administrator or provider.</span>
<a href="#l1.241"></a><span id="l1.241"> </span>
<a href="#l1.242"></a><span id="l1.242" class="difflineminus">-## @name POP3_AUTH_CHANGE_PLAIN_TO_ENCRYPT</span>
<a href="#l1.243"></a><span id="l1.243" class="difflineminus">-## @loc None</span>
<a href="#l1.244"></a><span id="l1.244" class="difflineminus">-4050=This POP3 server does not allow plaintext passwords. Please try changing to 'Encrypted password' as the 'Authentication method' in the 'Account Settings | Server settings'.</span>
<a href="#l1.245"></a><span id="l1.245" class="difflineplus">+pop3AuthChangePlainToEncrypt=This POP3 server does not allow plaintext passwords. Please try changing to 'Encrypted password' as the 'Authentication method' in the 'Account Settings | Server settings'.</span>
<a href="#l1.246"></a><span id="l1.246"> </span>
<a href="#l1.247"></a><span id="l1.247"> # Authentication server caps and pref don't match</span>
<a href="#l1.248"></a><span id="l1.248" class="difflineminus">-## @name POP3_AUTH_MECH_NOT_SUPPORTED</span>
<a href="#l1.249"></a><span id="l1.249" class="difflineminus">-## @loc None</span>
<a href="#l1.250"></a><span id="l1.250" class="difflineminus">-4051=The server does not support the selected authentication method. Please change the 'Authentication method' in the 'Account Settings | Server settings'.</span>
<a href="#l1.251"></a><span id="l1.251" class="difflineplus">+pop3AuthMechNotSupported=The server does not support the selected authentication method. Please change the 'Authentication method' in the 'Account Settings | Server settings'.</span>
<a href="#l1.252"></a><span id="l1.252"> </span>
<a href="#l1.253"></a><span id="l1.253"> # Status - Could not log in to GSSAPI, and it was the only method</span>
<a href="#l1.254"></a><span id="l1.254" class="difflineminus">-## @name POP3_GSSAPI_FAILURE</span>
<a href="#l1.255"></a><span id="l1.255" class="difflineminus">-## @loc None</span>
<a href="#l1.256"></a><span id="l1.256" class="difflineminus">-4052=The Kerberos/GSSAPI ticket was not accepted by the POP server. Please check that you are logged in to the Kerberos/GSSAPI realm.</span>
<a href="#l1.257"></a><span id="l1.257" class="difflineplus">+pop3GssapiFailure=The Kerberos/GSSAPI ticket was not accepted by the POP server. Please check that you are logged in to the Kerberos/GSSAPI realm.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mailnews/local/src/nsLocalMailFolder.cpp</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mailnews/local/src/nsLocalMailFolder.cpp</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -57,17 +57,16 @@</span>
<a href="#l2.4"></a><span id="l2.4"> #include &quot;nsCOMArray.h&quot;</span>
<a href="#l2.5"></a><span id="l2.5"> #include &quot;nsILineInputStream.h&quot;</span>
<a href="#l2.6"></a><span id="l2.6"> #include &quot;nsIFileStreams.h&quot;</span>
<a href="#l2.7"></a><span id="l2.7"> #include &quot;nsAutoPtr.h&quot;</span>
<a href="#l2.8"></a><span id="l2.8"> #include &quot;nsIRssIncomingServer.h&quot;</span>
<a href="#l2.9"></a><span id="l2.9"> #include &quot;nsNetUtil.h&quot;</span>
<a href="#l2.10"></a><span id="l2.10"> #include &quot;nsIMsgFolderNotificationService.h&quot;</span>
<a href="#l2.11"></a><span id="l2.11"> #include &quot;nsReadLine.h&quot;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-#include &quot;nsLocalStrings.h&quot;</span>
<a href="#l2.13"></a><span id="l2.13"> #include &quot;nsArrayUtils.h&quot;</span>
<a href="#l2.14"></a><span id="l2.14"> #include &quot;nsIMsgTraitService.h&quot;</span>
<a href="#l2.15"></a><span id="l2.15"> #include &quot;nsIStringEnumerator.h&quot;</span>
<a href="#l2.16"></a><span id="l2.16"> #include &quot;mozilla/Services.h&quot;</span>
<a href="#l2.17"></a><span id="l2.17"> </span>
<a href="#l2.18"></a><span id="l2.18"> //////////////////////////////////////////////////////////////////////////////</span>
<a href="#l2.19"></a><span id="l2.19"> // nsLocal</span>
<a href="#l2.20"></a><span id="l2.20"> /////////////////////////////////////////////////////////////////////////////</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineat">@@ -836,28 +835,31 @@ nsresult nsMsgLocalMailFolder::ConfirmFo</span>
<a href="#l2.22"></a><span id="l2.22">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l2.23"></a><span id="l2.23"> </span>
<a href="#l2.24"></a><span id="l2.24">       nsAutoString folderName;</span>
<a href="#l2.25"></a><span id="l2.25">       rv = aFolder-&gt;GetName(folderName);</span>
<a href="#l2.26"></a><span id="l2.26">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l2.27"></a><span id="l2.27">       const PRUnichar *formatStrings[1] = { folderName.get() };</span>
<a href="#l2.28"></a><span id="l2.28"> </span>
<a href="#l2.29"></a><span id="l2.29">       nsAutoString deleteFolderDialogTitle;</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineminus">-      rv = bundle-&gt;GetStringFromID(POP3_DELETE_FOLDER_DIALOG_TITLE,</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-                                   getter_Copies(deleteFolderDialogTitle));</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+      rv = bundle-&gt;GetStringFromName(</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineplus">+        NS_LITERAL_STRING(&quot;pop3DeleteFolderDialogTitle&quot;).get(),</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineplus">+        getter_Copies(deleteFolderDialogTitle));</span>
<a href="#l2.35"></a><span id="l2.35">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l2.36"></a><span id="l2.36"> </span>
<a href="#l2.37"></a><span id="l2.37">       nsAutoString deleteFolderButtonLabel;</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineminus">-      rv = bundle-&gt;GetStringFromID(POP3_DELETE_FOLDER_BUTTON_LABEL,</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineminus">-                                   getter_Copies(deleteFolderButtonLabel));</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineplus">+      rv = bundle-&gt;GetStringFromName(</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineplus">+        NS_LITERAL_STRING(&quot;pop3DeleteFolderButtonLabel&quot;).get(),</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineplus">+        getter_Copies(deleteFolderButtonLabel));</span>
<a href="#l2.43"></a><span id="l2.43">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l2.44"></a><span id="l2.44"> </span>
<a href="#l2.45"></a><span id="l2.45">       nsAutoString confirmationStr;</span>
<a href="#l2.46"></a><span id="l2.46" class="difflineminus">-      rv = bundle-&gt;FormatStringFromID(POP3_MOVE_FOLDER_TO_TRASH, formatStrings, 1,</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineminus">-                                      getter_Copies(confirmationStr));</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineplus">+      rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineplus">+        NS_LITERAL_STRING(&quot;pop3MoveFolderToTrash&quot;).get(), formatStrings, 1,</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineplus">+        getter_Copies(confirmationStr));</span>
<a href="#l2.51"></a><span id="l2.51">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l2.52"></a><span id="l2.52"> </span>
<a href="#l2.53"></a><span id="l2.53">       nsCOMPtr&lt;nsIPrompt&gt; dialog(do_GetInterface(docShell));</span>
<a href="#l2.54"></a><span id="l2.54">       if (dialog)</span>
<a href="#l2.55"></a><span id="l2.55">       {</span>
<a href="#l2.56"></a><span id="l2.56">         int32_t buttonPressed = 0;</span>
<a href="#l2.57"></a><span id="l2.57">         // Default the dialog to &quot;cancel&quot;.</span>
<a href="#l2.58"></a><span id="l2.58">         const uint32_t buttonFlags =</span>
<a href="#l2.59"></a><span id="l2.59" class="difflineat">@@ -3147,26 +3149,28 @@ nsresult nsMsgLocalMailFolder::DisplayMo</span>
<a href="#l2.60"></a><span id="l2.60">       NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l2.61"></a><span id="l2.61">       rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/localMsgs.properties&quot;, getter_AddRefs(mCopyState-&gt;m_stringBundle));</span>
<a href="#l2.62"></a><span id="l2.62">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l2.63"></a><span id="l2.63">     }</span>
<a href="#l2.64"></a><span id="l2.64">     if (mCopyState-&gt;m_statusFeedback &amp;&amp; mCopyState-&gt;m_stringBundle)</span>
<a href="#l2.65"></a><span id="l2.65">     {</span>
<a href="#l2.66"></a><span id="l2.66">       nsString folderName;</span>
<a href="#l2.67"></a><span id="l2.67">       GetName(folderName);</span>
<a href="#l2.68"></a><span id="l2.68" class="difflineminus">-      int32_t statusMsgId = (mCopyState-&gt;m_isMove) ? MOVING_MSGS_STATUS : COPYING_MSGS_STATUS;</span>
<a href="#l2.69"></a><span id="l2.69">       nsAutoString numMsgSoFarString;</span>
<a href="#l2.70"></a><span id="l2.70">       numMsgSoFarString.AppendInt((mCopyState-&gt;m_copyingMultipleMessages) ? mCopyState-&gt;m_curCopyIndex : 1);</span>
<a href="#l2.71"></a><span id="l2.71"> </span>
<a href="#l2.72"></a><span id="l2.72">       nsAutoString totalMessagesString;</span>
<a href="#l2.73"></a><span id="l2.73">       totalMessagesString.AppendInt(mCopyState-&gt;m_totalMsgCount);</span>
<a href="#l2.74"></a><span id="l2.74">       nsString finalString;</span>
<a href="#l2.75"></a><span id="l2.75">       const PRUnichar * stringArray[] = { numMsgSoFarString.get(), totalMessagesString.get(), folderName.get() };</span>
<a href="#l2.76"></a><span id="l2.76" class="difflineminus">-      rv = mCopyState-&gt;m_stringBundle-&gt;FormatStringFromID(statusMsgId, stringArray, 3,</span>
<a href="#l2.77"></a><span id="l2.77" class="difflineminus">-                                               getter_Copies(finalString));</span>
<a href="#l2.78"></a><span id="l2.78" class="difflineplus">+      rv = mCopyState-&gt;m_stringBundle-&gt;FormatStringFromName(</span>
<a href="#l2.79"></a><span id="l2.79" class="difflineplus">+        (mCopyState-&gt;m_isMove) ?</span>
<a href="#l2.80"></a><span id="l2.80" class="difflineplus">+        NS_LITERAL_STRING(&quot;movingMessagesStatus&quot;).get() :</span>
<a href="#l2.81"></a><span id="l2.81" class="difflineplus">+        NS_LITERAL_STRING(&quot;copyingMessagesStatus&quot;).get(),</span>
<a href="#l2.82"></a><span id="l2.82" class="difflineplus">+        stringArray, 3, getter_Copies(finalString));</span>
<a href="#l2.83"></a><span id="l2.83">       int64_t nowMS = PR_IntervalToMilliseconds(PR_IntervalNow());</span>
<a href="#l2.84"></a><span id="l2.84"> </span>
<a href="#l2.85"></a><span id="l2.85">       // only update status/progress every half second</span>
<a href="#l2.86"></a><span id="l2.86">       if (nowMS - mCopyState-&gt;m_lastProgressTime &lt; 500 &amp;&amp;</span>
<a href="#l2.87"></a><span id="l2.87">           mCopyState-&gt;m_curCopyIndex &lt; mCopyState-&gt;m_totalMsgCount)</span>
<a href="#l2.88"></a><span id="l2.88">         return NS_OK;</span>
<a href="#l2.89"></a><span id="l2.89"> </span>
<a href="#l2.90"></a><span id="l2.90">       mCopyState-&gt;m_lastProgressTime = nowMS;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1">deleted file mode 100644</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineminus">--- a/mailnews/local/src/nsLocalStrings.h</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineplus">+++ /dev/null</span>
<a href="#l3.4"></a><span id="l3.4" class="difflineat">@@ -1,48 +0,0 @@</span>
<a href="#l3.5"></a><span id="l3.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l3.6"></a><span id="l3.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l3.7"></a><span id="l3.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l3.8"></a><span id="l3.8" class="difflineminus">-</span>
<a href="#l3.9"></a><span id="l3.9" class="difflineminus">-/**</span>
<a href="#l3.10"></a><span id="l3.10" class="difflineminus">-  String Ids used by mailnews\local.</span>
<a href="#l3.11"></a><span id="l3.11" class="difflineminus">-  To Do: Conver the callers to use names instead of ids and then make this file obsolete.</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">- */</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">- </span>
<a href="#l3.14"></a><span id="l3.14" class="difflineminus">-#ifndef _nsLocalStrings_H__</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineminus">-#define _nsLocalStrings_H__</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineminus">-</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineminus">-#define LOCAL_STATUS_SELECTING_MAILBOX                        4000</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineminus">-#define LOCAL_STATUS_DOCUMENT_DONE                            4001</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineminus">-#define POP3_SERVER_ERROR                                     4003</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineminus">-#define POP3_USERNAME_FAILURE                                 4004</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineminus">-#define POP3_PASSWORD_FAILURE                                 4005</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineminus">-#define POP3_MESSAGE_WRITE_ERROR                              4006</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineminus">-#define POP3_RETR_FAILURE                                     4012</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineminus">-#define POP3_PASSWORD_UNDEFINED                               4013</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineminus">-#define POP3_USERNAME_UNDEFINED                               4014</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineminus">-#define POP3_LIST_FAILURE                                     4015</span>
<a href="#l3.27"></a><span id="l3.27" class="difflineminus">-#define POP3_DELE_FAILURE                                     4016</span>
<a href="#l3.28"></a><span id="l3.28" class="difflineminus">-#define POP3_STAT_FAILURE                                     4024</span>
<a href="#l3.29"></a><span id="l3.29" class="difflineminus">-#define POP3_SERVER_SAID                                      4025</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineminus">-#define COPYING_MSGS_STATUS                                   4027</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-#define MOVING_MSGS_STATUS                                    4028</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineminus">-#define POP3_MESSAGE_FOLDER_BUSY                              4029</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineminus">-#define MOVEMAIL_CANT_OPEN_SPOOL_FILE                         4033</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineminus">-#define MOVEMAIL_CANT_CREATE_LOCK                             4034</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineminus">-#define MOVEMAIL_CANT_DELETE_LOCK                             4035</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineminus">-#define MOVEMAIL_CANT_TRUNCATE_SPOOL_FILE                     4036</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineminus">-#define MOVEMAIL_SPOOL_FILE_NOT_FOUND                         4037</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineminus">-#define POP3_TMP_DOWNLOAD_FAILED                              4038</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineminus">-#define POP3_SERVER_DOES_NOT_SUPPORT_UIDL_ETC                 4040</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineminus">-#define POP3_SERVER_DOES_NOT_SUPPORT_THE_TOP_COMMAND          4041</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineminus">-#define NS_ERROR_COULD_NOT_CONNECT_VIA_TLS                    4043</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineminus">-#define POP3_MOVE_FOLDER_TO_TRASH                             4044</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineminus">-#define POP3_DELETE_FOLDER_DIALOG_TITLE                       4045</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineminus">-#define POP3_DELETE_FOLDER_BUTTON_LABEL                       4046</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineminus">-#define POP3_AUTH_INTERNAL_ERROR                              4047</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineminus">-#define POP3_AUTH_CHANGE_ENCRYPT_TO_PLAIN_NO_SSL              4048</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineminus">-#define POP3_AUTH_CHANGE_ENCRYPT_TO_PLAIN_SSL                 4049</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineminus">-#define POP3_AUTH_CHANGE_PLAIN_TO_ENCRYPT                     4050</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineminus">-#define POP3_AUTH_MECH_NOT_SUPPORTED                          4051</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineminus">-#define POP3_GSSAPI_FAILURE                                   4052</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineminus">-</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineminus">-#endif /* _nsLocalStrings_H__ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mailnews/local/src/nsMovemailService.cpp</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mailnews/local/src/nsMovemailService.cpp</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -33,17 +33,16 @@</span>
<a href="#l4.4"></a><span id="l4.4"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l4.5"></a><span id="l4.5"> #include &quot;nsMsgFolderFlags.h&quot;</span>
<a href="#l4.6"></a><span id="l4.6"> </span>
<a href="#l4.7"></a><span id="l4.7"> #include &quot;nsILineInputStream.h&quot;</span>
<a href="#l4.8"></a><span id="l4.8"> #include &quot;nsISeekableStream.h&quot;</span>
<a href="#l4.9"></a><span id="l4.9"> #include &quot;nsNetUtil.h&quot;</span>
<a href="#l4.10"></a><span id="l4.10"> #include &quot;nsAutoPtr.h&quot;</span>
<a href="#l4.11"></a><span id="l4.11"> #include &quot;nsIStringBundle.h&quot;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-#include &quot;nsLocalStrings.h&quot;</span>
<a href="#l4.13"></a><span id="l4.13"> #include &quot;nsIMsgPluggableStore.h&quot;</span>
<a href="#l4.14"></a><span id="l4.14"> #include &quot;mozilla/Services.h&quot;</span>
<a href="#l4.15"></a><span id="l4.15"> </span>
<a href="#l4.16"></a><span id="l4.16"> #include &quot;prlog.h&quot;</span>
<a href="#l4.17"></a><span id="l4.17"> #if defined(PR_LOGGING)</span>
<a href="#l4.18"></a><span id="l4.18"> //</span>
<a href="#l4.19"></a><span id="l4.19"> // export NSPR_LOG_MODULES=Movemail:5</span>
<a href="#l4.20"></a><span id="l4.20"> //</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineat">@@ -89,17 +88,17 @@ nsMovemailService::CheckForNewMail(nsIUr</span>
<a href="#l4.22"></a><span id="l4.22">                                    nsIURI ** aURL)</span>
<a href="#l4.23"></a><span id="l4.23"> {</span>
<a href="#l4.24"></a><span id="l4.24">   nsresult rv = NS_OK;</span>
<a href="#l4.25"></a><span id="l4.25">   LOG((&quot;nsMovemailService::CheckForNewMail\n&quot;));</span>
<a href="#l4.26"></a><span id="l4.26">   return rv;</span>
<a href="#l4.27"></a><span id="l4.27"> }</span>
<a href="#l4.28"></a><span id="l4.28"> </span>
<a href="#l4.29"></a><span id="l4.29"> void</span>
<a href="#l4.30"></a><span id="l4.30" class="difflineminus">-nsMovemailService::Error(int32_t errorCode,</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineplus">+nsMovemailService::Error(const char* errorCode,</span>
<a href="#l4.32"></a><span id="l4.32">                          const PRUnichar **params,</span>
<a href="#l4.33"></a><span id="l4.33">                          uint32_t length)</span>
<a href="#l4.34"></a><span id="l4.34"> {</span>
<a href="#l4.35"></a><span id="l4.35">   if (!mMsgWindow) return;</span>
<a href="#l4.36"></a><span id="l4.36"> </span>
<a href="#l4.37"></a><span id="l4.37">   nsCOMPtr&lt;nsIPrompt&gt; dialog;</span>
<a href="#l4.38"></a><span id="l4.38">   nsresult rv = mMsgWindow-&gt;GetPromptDialog(getter_AddRefs(dialog));</span>
<a href="#l4.39"></a><span id="l4.39">   if (NS_FAILED(rv))</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineat">@@ -112,19 +111,21 @@ nsMovemailService::Error(int32_t errorCo</span>
<a href="#l4.41"></a><span id="l4.41">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l4.42"></a><span id="l4.42">   rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/localMsgs.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l4.43"></a><span id="l4.43">   if (NS_FAILED(rv))</span>
<a href="#l4.44"></a><span id="l4.44">     return;</span>
<a href="#l4.45"></a><span id="l4.45"> </span>
<a href="#l4.46"></a><span id="l4.46">   nsString errStr;</span>
<a href="#l4.47"></a><span id="l4.47">   // Format the error string if necessary</span>
<a href="#l4.48"></a><span id="l4.48">   if (params)</span>
<a href="#l4.49"></a><span id="l4.49" class="difflineminus">-    bundle-&gt;FormatStringFromID(errorCode, params, length, getter_Copies(errStr));</span>
<a href="#l4.50"></a><span id="l4.50" class="difflineplus">+    bundle-&gt;FormatStringFromName(NS_ConvertASCIItoUTF16(errorCode).get(),</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineplus">+                                 params, length, getter_Copies(errStr));</span>
<a href="#l4.52"></a><span id="l4.52">   else</span>
<a href="#l4.53"></a><span id="l4.53" class="difflineminus">-    bundle-&gt;GetStringFromID(errorCode, getter_Copies(errStr));</span>
<a href="#l4.54"></a><span id="l4.54" class="difflineplus">+    bundle-&gt;GetStringFromName(NS_ConvertASCIItoUTF16(errorCode).get(),</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineplus">+                              getter_Copies(errStr));</span>
<a href="#l4.56"></a><span id="l4.56"> </span>
<a href="#l4.57"></a><span id="l4.57">   if (!errStr.IsEmpty()) {</span>
<a href="#l4.58"></a><span id="l4.58">     dialog-&gt;Alert(nullptr, errStr.get());</span>
<a href="#l4.59"></a><span id="l4.59">   }</span>
<a href="#l4.60"></a><span id="l4.60"> }</span>
<a href="#l4.61"></a><span id="l4.61"> </span>
<a href="#l4.62"></a><span id="l4.62"> </span>
<a href="#l4.63"></a><span id="l4.63"> bool ObtainSpoolLock(const char *aSpoolName,</span>
<a href="#l4.64"></a><span id="l4.64" class="difflineat">@@ -360,31 +361,31 @@ nsMovemailService::GetNewMail(nsIMsgWind</span>
<a href="#l4.65"></a><span id="l4.65">   mMsgWindow = aMsgWindow;</span>
<a href="#l4.66"></a><span id="l4.66"> </span>
<a href="#l4.67"></a><span id="l4.67">   // Attempt to locate the mail spool file</span>
<a href="#l4.68"></a><span id="l4.68">   nsAutoCString spoolPath;</span>
<a href="#l4.69"></a><span id="l4.69">   rv = in_server-&gt;GetCharValue(&quot;spoolDir&quot;, spoolPath);</span>
<a href="#l4.70"></a><span id="l4.70">   if (spoolPath.IsEmpty())</span>
<a href="#l4.71"></a><span id="l4.71">     rv = LocateSpoolFile(spoolPath);</span>
<a href="#l4.72"></a><span id="l4.72">   if (NS_FAILED(rv) || spoolPath.IsEmpty()) {</span>
<a href="#l4.73"></a><span id="l4.73" class="difflineminus">-    Error(MOVEMAIL_SPOOL_FILE_NOT_FOUND, nullptr, 0);</span>
<a href="#l4.74"></a><span id="l4.74" class="difflineplus">+    Error(&quot;movemailSpoolFileNotFound&quot;, nullptr, 0);</span>
<a href="#l4.75"></a><span id="l4.75">     return NS_ERROR_FAILURE;</span>
<a href="#l4.76"></a><span id="l4.76">   }</span>
<a href="#l4.77"></a><span id="l4.77"> </span>
<a href="#l4.78"></a><span id="l4.78">   // Create an input stream for the spool file</span>
<a href="#l4.79"></a><span id="l4.79">   nsCOMPtr&lt;nsIFile&gt; spoolFile;</span>
<a href="#l4.80"></a><span id="l4.80">   rv = NS_NewNativeLocalFile(spoolPath, true, getter_AddRefs(spoolFile));</span>
<a href="#l4.81"></a><span id="l4.81">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l4.82"></a><span id="l4.82">   nsCOMPtr&lt;nsIInputStream&gt; spoolInputStream;</span>
<a href="#l4.83"></a><span id="l4.83">   rv = NS_NewLocalFileInputStream(getter_AddRefs(spoolInputStream), spoolFile);</span>
<a href="#l4.84"></a><span id="l4.84">   if (NS_FAILED(rv)) {</span>
<a href="#l4.85"></a><span id="l4.85">     const PRUnichar *params[] = {</span>
<a href="#l4.86"></a><span id="l4.86">       NS_ConvertUTF8toUTF16(spoolPath).get()</span>
<a href="#l4.87"></a><span id="l4.87">     };</span>
<a href="#l4.88"></a><span id="l4.88" class="difflineminus">-    Error(MOVEMAIL_CANT_OPEN_SPOOL_FILE, params, 1);</span>
<a href="#l4.89"></a><span id="l4.89" class="difflineplus">+    Error(&quot;movemailCantOpenSpoolFile&quot;, params, 1);</span>
<a href="#l4.90"></a><span id="l4.90">     return rv;</span>
<a href="#l4.91"></a><span id="l4.91">   }</span>
<a href="#l4.92"></a><span id="l4.92"> </span>
<a href="#l4.93"></a><span id="l4.93">   // Get a line input interface for the spool file</span>
<a href="#l4.94"></a><span id="l4.94">   nsCOMPtr&lt;nsILineInputStream&gt; lineInputStream =</span>
<a href="#l4.95"></a><span id="l4.95">     do_QueryInterface(spoolInputStream, &amp;rv);</span>
<a href="#l4.96"></a><span id="l4.96">   if (!lineInputStream)</span>
<a href="#l4.97"></a><span id="l4.97">     return rv;</span>
<a href="#l4.98"></a><span id="l4.98" class="difflineat">@@ -418,17 +419,17 @@ nsMovemailService::GetNewMail(nsIMsgWind</span>
<a href="#l4.99"></a><span id="l4.99">   // Try and obtain the lock for the spool file</span>
<a href="#l4.100"></a><span id="l4.100">   bool usingLockFile;</span>
<a href="#l4.101"></a><span id="l4.101">   if (!ObtainSpoolLock(spoolPath.get(), 5, &amp;usingLockFile)) {</span>
<a href="#l4.102"></a><span id="l4.102">     nsAutoString lockFile = NS_ConvertUTF8toUTF16(spoolPath);</span>
<a href="#l4.103"></a><span id="l4.103">     lockFile.AppendLiteral(&quot;.lock&quot;);</span>
<a href="#l4.104"></a><span id="l4.104">     const PRUnichar *params[] = {</span>
<a href="#l4.105"></a><span id="l4.105">       lockFile.get()</span>
<a href="#l4.106"></a><span id="l4.106">     };</span>
<a href="#l4.107"></a><span id="l4.107" class="difflineminus">-    Error(MOVEMAIL_CANT_CREATE_LOCK, params, 1);</span>
<a href="#l4.108"></a><span id="l4.108" class="difflineplus">+    Error(&quot;movemailCantCreateLock&quot;, params, 1);</span>
<a href="#l4.109"></a><span id="l4.109">     return NS_ERROR_FAILURE;</span>
<a href="#l4.110"></a><span id="l4.110">   }</span>
<a href="#l4.111"></a><span id="l4.111"> </span>
<a href="#l4.112"></a><span id="l4.112">   // MIDDLE of the FUN : consume the mailbox data.</span>
<a href="#l4.113"></a><span id="l4.113">   bool isMore = true;</span>
<a href="#l4.114"></a><span id="l4.114">   nsAutoCString buffer;</span>
<a href="#l4.115"></a><span id="l4.115">   uint32_t bytesWritten;</span>
<a href="#l4.116"></a><span id="l4.116"> </span>
<a href="#l4.117"></a><span id="l4.117" class="difflineat">@@ -483,26 +484,26 @@ nsMovemailService::GetNewMail(nsIMsgWind</span>
<a href="#l4.118"></a><span id="l4.118">   }</span>
<a href="#l4.119"></a><span id="l4.119"> </span>
<a href="#l4.120"></a><span id="l4.120">   // Truncate the spool file</span>
<a href="#l4.121"></a><span id="l4.121">   rv = spoolFile-&gt;SetFileSize(0);</span>
<a href="#l4.122"></a><span id="l4.122">   if (NS_FAILED(rv)) {</span>
<a href="#l4.123"></a><span id="l4.123">     const PRUnichar *params[] = {</span>
<a href="#l4.124"></a><span id="l4.124">       NS_ConvertUTF8toUTF16(spoolPath).get()</span>
<a href="#l4.125"></a><span id="l4.125">     };</span>
<a href="#l4.126"></a><span id="l4.126" class="difflineminus">-    Error(MOVEMAIL_CANT_TRUNCATE_SPOOL_FILE, params, 1);</span>
<a href="#l4.127"></a><span id="l4.127" class="difflineplus">+    Error(&quot;movemailCantTruncateSpoolFile&quot;, params, 1);</span>
<a href="#l4.128"></a><span id="l4.128">   }</span>
<a href="#l4.129"></a><span id="l4.129"> </span>
<a href="#l4.130"></a><span id="l4.130">   if (!YieldSpoolLock(spoolPath.get(), usingLockFile)) {</span>
<a href="#l4.131"></a><span id="l4.131">     nsAutoString spoolLock = NS_ConvertUTF8toUTF16(spoolPath);</span>
<a href="#l4.132"></a><span id="l4.132">     spoolLock.AppendLiteral(&quot;.lock&quot;);</span>
<a href="#l4.133"></a><span id="l4.133">     const PRUnichar *params[] = {</span>
<a href="#l4.134"></a><span id="l4.134">       spoolLock.get()</span>
<a href="#l4.135"></a><span id="l4.135">     };</span>
<a href="#l4.136"></a><span id="l4.136" class="difflineminus">-    Error(MOVEMAIL_CANT_DELETE_LOCK, params, 1);</span>
<a href="#l4.137"></a><span id="l4.137" class="difflineplus">+    Error(&quot;movemailCantDeleteLock&quot;, params, 1);</span>
<a href="#l4.138"></a><span id="l4.138">   }</span>
<a href="#l4.139"></a><span id="l4.139"> </span>
<a href="#l4.140"></a><span id="l4.140">   in_server-&gt;SetServerBusy(false);</span>
<a href="#l4.141"></a><span id="l4.141"> </span>
<a href="#l4.142"></a><span id="l4.142">   LOG((&quot;GetNewMail returning rv=%d&quot;, rv));</span>
<a href="#l4.143"></a><span id="l4.143">   return rv;</span>
<a href="#l4.144"></a><span id="l4.144"> }</span>
<a href="#l4.145"></a><span id="l4.145"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mailnews/local/src/nsMovemailService.h</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mailnews/local/src/nsMovemailService.h</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -23,13 +23,13 @@ public:</span>
<a href="#l5.4"></a><span id="l5.4">   nsMovemailService();</span>
<a href="#l5.5"></a><span id="l5.5">   virtual ~nsMovemailService();</span>
<a href="#l5.6"></a><span id="l5.6">   </span>
<a href="#l5.7"></a><span id="l5.7">   NS_DECL_ISUPPORTS</span>
<a href="#l5.8"></a><span id="l5.8">   NS_DECL_NSIMOVEMAILSERVICE</span>
<a href="#l5.9"></a><span id="l5.9">   NS_DECL_NSIMSGPROTOCOLINFO</span>
<a href="#l5.10"></a><span id="l5.10">   </span>
<a href="#l5.11"></a><span id="l5.11"> private:</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-  void Error(int32_t errorCode, const PRUnichar **params, uint32_t length);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+  void Error(const char* errorCode, const PRUnichar **params, uint32_t length);</span>
<a href="#l5.14"></a><span id="l5.14">   nsCOMPtr&lt;nsIMsgWindow&gt; mMsgWindow;</span>
<a href="#l5.15"></a><span id="l5.15"> };</span>
<a href="#l5.16"></a><span id="l5.16"> </span>
<a href="#l5.17"></a><span id="l5.17"> #endif /* nsMovemailService_h___ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mailnews/local/src/nsParseMailbox.cpp</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mailnews/local/src/nsParseMailbox.cpp</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -46,17 +46,16 @@</span>
<a href="#l6.4"></a><span id="l6.4"> #include &quot;nsIDocShell.h&quot;</span>
<a href="#l6.5"></a><span id="l6.5"> #include &quot;nsIMsgCompose.h&quot;</span>
<a href="#l6.6"></a><span id="l6.6"> #include &quot;nsIPrefBranch.h&quot;</span>
<a href="#l6.7"></a><span id="l6.7"> #include &quot;nsIPrefService.h&quot;</span>
<a href="#l6.8"></a><span id="l6.8"> #include &quot;nsIMsgComposeService.h&quot;</span>
<a href="#l6.9"></a><span id="l6.9"> #include &quot;nsIMsgCopyService.h&quot;</span>
<a href="#l6.10"></a><span id="l6.10"> #include &quot;nsICryptoHash.h&quot;</span>
<a href="#l6.11"></a><span id="l6.11"> #include &quot;nsIStringBundle.h&quot;</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-#include &quot;nsLocalStrings.h&quot;</span>
<a href="#l6.13"></a><span id="l6.13"> #include &quot;nsIMsgFilterPlugin.h&quot;</span>
<a href="#l6.14"></a><span id="l6.14"> #include &quot;nsIMutableArray.h&quot;</span>
<a href="#l6.15"></a><span id="l6.15"> #include &quot;nsArrayUtils.h&quot;</span>
<a href="#l6.16"></a><span id="l6.16"> #include &quot;nsIMsgFilterCustomAction.h&quot;</span>
<a href="#l6.17"></a><span id="l6.17"> #include &lt;ctype.h&gt;</span>
<a href="#l6.18"></a><span id="l6.18"> #include &quot;nsIMsgPluggableStore.h&quot;</span>
<a href="#l6.19"></a><span id="l6.19"> #include &quot;mozilla/Services.h&quot;</span>
<a href="#l6.20"></a><span id="l6.20"> </span>
<a href="#l6.21"></a><span id="l6.21" class="difflineat">@@ -113,18 +112,17 @@ NS_IMETHODIMP nsMsgMailboxParser::OnStar</span>
<a href="#l6.22"></a><span id="l6.22">         folder-&gt;GetFilePath(getter_AddRefs(path));</span>
<a href="#l6.23"></a><span id="l6.23"> </span>
<a href="#l6.24"></a><span id="l6.24">         if (path)</span>
<a href="#l6.25"></a><span id="l6.25">         {</span>
<a href="#l6.26"></a><span id="l6.26">           int64_t fileSize;</span>
<a href="#l6.27"></a><span id="l6.27">           path-&gt;GetFileSize(&amp;fileSize);</span>
<a href="#l6.28"></a><span id="l6.28">             // the size of the mailbox file is our total base line for measuring progress</span>
<a href="#l6.29"></a><span id="l6.29">             m_graph_progress_total = (uint32_t) fileSize;</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineminus">-            UpdateStatusText(LOCAL_STATUS_SELECTING_MAILBOX);</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">-</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+            UpdateStatusText(&quot;buildingSummary&quot;);</span>
<a href="#l6.33"></a><span id="l6.33">             nsCOMPtr&lt;nsIMsgDBService&gt; msgDBService = do_GetService(NS_MSGDB_SERVICE_CONTRACTID, &amp;rv);</span>
<a href="#l6.34"></a><span id="l6.34">             if (msgDBService)</span>
<a href="#l6.35"></a><span id="l6.35">             {</span>
<a href="#l6.36"></a><span id="l6.36">                 // Use OpenFolderDB to always open the db so that db's m_folder</span>
<a href="#l6.37"></a><span id="l6.37">                 // is set correctly.</span>
<a href="#l6.38"></a><span id="l6.38">                 rv = msgDBService-&gt;OpenFolderDB(folder, true,</span>
<a href="#l6.39"></a><span id="l6.39">                                                 getter_AddRefs(m_mailDB));</span>
<a href="#l6.40"></a><span id="l6.40">                 if (rv == NS_MSG_ERROR_FOLDER_SUMMARY_MISSING)</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineat">@@ -171,17 +169,17 @@ NS_IMETHODIMP nsMsgMailboxParser::OnStop</span>
<a href="#l6.42"></a><span id="l6.42">         m_mailDB-&gt;RemoveListener(this);</span>
<a href="#l6.43"></a><span id="l6.43">     // and we want to mark ourselves for deletion or some how inform our protocol manager that we are</span>
<a href="#l6.44"></a><span id="l6.44">     // available for another url if there is one....</span>
<a href="#l6.45"></a><span id="l6.45"> </span>
<a href="#l6.46"></a><span id="l6.46">     ReleaseFolderLock();</span>
<a href="#l6.47"></a><span id="l6.47">     // be sure to clear any status text and progress info..</span>
<a href="#l6.48"></a><span id="l6.48">     m_graph_progress_received = 0;</span>
<a href="#l6.49"></a><span id="l6.49">     UpdateProgressPercent();</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineminus">-    UpdateStatusText(LOCAL_STATUS_DOCUMENT_DONE);</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineplus">+    UpdateStatusText(&quot;localStatusDocumentDone&quot;);</span>
<a href="#l6.52"></a><span id="l6.52"> </span>
<a href="#l6.53"></a><span id="l6.53">     return NS_OK;</span>
<a href="#l6.54"></a><span id="l6.54"> }</span>
<a href="#l6.55"></a><span id="l6.55"> </span>
<a href="#l6.56"></a><span id="l6.56"> NS_IMETHODIMP</span>
<a href="#l6.57"></a><span id="l6.57"> nsParseMailMessageState::OnHdrPropertyChanged(nsIMsgDBHdr *aHdrToChange,</span>
<a href="#l6.58"></a><span id="l6.58">     bool aPreChange, uint32_t *aStatus, nsIDBChangeListener * aInstigator)</span>
<a href="#l6.59"></a><span id="l6.59"> {</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineat">@@ -274,38 +272,33 @@ nsresult nsMsgMailboxParser::Init()</span>
<a href="#l6.61"></a><span id="l6.61"> {</span>
<a href="#l6.62"></a><span id="l6.62">   m_obuffer = nullptr;</span>
<a href="#l6.63"></a><span id="l6.63">   m_obuffer_size = 0;</span>
<a href="#l6.64"></a><span id="l6.64">   m_graph_progress_total = 0;</span>
<a href="#l6.65"></a><span id="l6.65">   m_graph_progress_received = 0;</span>
<a href="#l6.66"></a><span id="l6.66">   return AcquireFolderLock();</span>
<a href="#l6.67"></a><span id="l6.67"> }</span>
<a href="#l6.68"></a><span id="l6.68"> </span>
<a href="#l6.69"></a><span id="l6.69" class="difflineminus">-void nsMsgMailboxParser::UpdateStatusText (uint32_t stringID)</span>
<a href="#l6.70"></a><span id="l6.70" class="difflineplus">+void nsMsgMailboxParser::UpdateStatusText (const char* stringName)</span>
<a href="#l6.71"></a><span id="l6.71"> {</span>
<a href="#l6.72"></a><span id="l6.72">   if (m_statusFeedback)</span>
<a href="#l6.73"></a><span id="l6.73">   {</span>
<a href="#l6.74"></a><span id="l6.74">     nsresult rv;</span>
<a href="#l6.75"></a><span id="l6.75">     nsCOMPtr&lt;nsIStringBundleService&gt; bundleService =</span>
<a href="#l6.76"></a><span id="l6.76">       mozilla::services::GetStringBundleService();</span>
<a href="#l6.77"></a><span id="l6.77">     if (!bundleService)</span>
<a href="#l6.78"></a><span id="l6.78">       return;</span>
<a href="#l6.79"></a><span id="l6.79">     nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l6.80"></a><span id="l6.80">     rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/localMsgs.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l6.81"></a><span id="l6.81">     if (NS_FAILED(rv))</span>
<a href="#l6.82"></a><span id="l6.82">       return;</span>
<a href="#l6.83"></a><span id="l6.83">     nsString finalString;</span>
<a href="#l6.84"></a><span id="l6.84" class="difflineminus">-    if (stringID == LOCAL_STATUS_SELECTING_MAILBOX)</span>
<a href="#l6.85"></a><span id="l6.85" class="difflineminus">-    {</span>
<a href="#l6.86"></a><span id="l6.86" class="difflineminus">-      const PRUnichar * stringArray[] = { m_folderName.get() };</span>
<a href="#l6.87"></a><span id="l6.87" class="difflineminus">-      rv = bundle-&gt;FormatStringFromID(stringID, stringArray, 1,</span>
<a href="#l6.88"></a><span id="l6.88" class="difflineminus">-                                      getter_Copies(finalString));</span>
<a href="#l6.89"></a><span id="l6.89" class="difflineminus">-    }</span>
<a href="#l6.90"></a><span id="l6.90" class="difflineminus">-    else</span>
<a href="#l6.91"></a><span id="l6.91" class="difflineminus">-      bundle-&gt;GetStringFromID(stringID, getter_Copies(finalString));</span>
<a href="#l6.92"></a><span id="l6.92" class="difflineplus">+    const PRUnichar * stringArray[] = { m_folderName.get() };</span>
<a href="#l6.93"></a><span id="l6.93" class="difflineplus">+    rv = bundle-&gt;FormatStringFromName(NS_ConvertASCIItoUTF16(stringName).get(),</span>
<a href="#l6.94"></a><span id="l6.94" class="difflineplus">+                                      stringArray, 1, getter_Copies(finalString));</span>
<a href="#l6.95"></a><span id="l6.95">     m_statusFeedback-&gt;ShowStatusString(finalString);</span>
<a href="#l6.96"></a><span id="l6.96">   }</span>
<a href="#l6.97"></a><span id="l6.97"> }</span>
<a href="#l6.98"></a><span id="l6.98"> </span>
<a href="#l6.99"></a><span id="l6.99"> void nsMsgMailboxParser::UpdateProgressPercent ()</span>
<a href="#l6.100"></a><span id="l6.100"> {</span>
<a href="#l6.101"></a><span id="l6.101">   if (m_statusFeedback &amp;&amp; m_graph_progress_total != 0)</span>
<a href="#l6.102"></a><span id="l6.102">   {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mailnews/local/src/nsParseMailbox.h</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mailnews/local/src/nsParseMailbox.h</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -163,17 +163,17 @@ public:</span>
<a href="#l7.4"></a><span id="l7.4">   virtual void  DoneParsingFolder(nsresult status);</span>
<a href="#l7.5"></a><span id="l7.5">   virtual void  AbortNewHeader();</span>
<a href="#l7.6"></a><span id="l7.6"> </span>
<a href="#l7.7"></a><span id="l7.7">   // for nsMsgLineBuffer</span>
<a href="#l7.8"></a><span id="l7.8">   virtual nsresult HandleLine(char *line, uint32_t line_length);</span>
<a href="#l7.9"></a><span id="l7.9"> </span>
<a href="#l7.10"></a><span id="l7.10">   void  UpdateDBFolderInfo();</span>
<a href="#l7.11"></a><span id="l7.11">   void  UpdateDBFolderInfo(nsIMsgDatabase *mailDB);</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-  void  UpdateStatusText (uint32_t stringID);</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+  void  UpdateStatusText(const char* stringName);</span>
<a href="#l7.14"></a><span id="l7.14"> </span>
<a href="#l7.15"></a><span id="l7.15">   // Update the progress bar based on what we know.</span>
<a href="#l7.16"></a><span id="l7.16">   virtual void    UpdateProgressPercent ();</span>
<a href="#l7.17"></a><span id="l7.17">   virtual void OnNewMessage(nsIMsgWindow *msgWindow);</span>
<a href="#l7.18"></a><span id="l7.18"> </span>
<a href="#l7.19"></a><span id="l7.19"> protected:</span>
<a href="#l7.20"></a><span id="l7.20">   nsCOMPtr&lt;nsIMsgStatusFeedback&gt; m_statusFeedback;</span>
<a href="#l7.21"></a><span id="l7.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mailnews/local/src/nsPop3Protocol.cpp</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mailnews/local/src/nsPop3Protocol.cpp</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -35,17 +35,16 @@</span>
<a href="#l8.4"></a><span id="l8.4"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l8.5"></a><span id="l8.5"> #include &quot;nsIMsgWindow.h&quot;</span>
<a href="#l8.6"></a><span id="l8.6"> #include &quot;nsIMsgFolder.h&quot; // TO include biffState enum. Change to bool later...</span>
<a href="#l8.7"></a><span id="l8.7"> #include &quot;nsIDocShell.h&quot;</span>
<a href="#l8.8"></a><span id="l8.8"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l8.9"></a><span id="l8.9"> #include &quot;nsISocketTransport.h&quot;</span>
<a href="#l8.10"></a><span id="l8.10"> #include &quot;nsISSLSocketControl.h&quot;</span>
<a href="#l8.11"></a><span id="l8.11"> #include &quot;nsILineInputStream.h&quot;</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-#include &quot;nsLocalStrings.h&quot;</span>
<a href="#l8.13"></a><span id="l8.13"> #include &quot;nsIInterfaceRequestor.h&quot;</span>
<a href="#l8.14"></a><span id="l8.14"> #include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l8.15"></a><span id="l8.15"> #include &quot;nsMsgBaseCID.h&quot;</span>
<a href="#l8.16"></a><span id="l8.16"> #include &quot;mozilla/Services.h&quot;</span>
<a href="#l8.17"></a><span id="l8.17"> </span>
<a href="#l8.18"></a><span id="l8.18"> PRLogModuleInfo *POP3LOGMODULE = nullptr;</span>
<a href="#l8.19"></a><span id="l8.19"> </span>
<a href="#l8.20"></a><span id="l8.20"> </span>
<a href="#l8.21"></a><span id="l8.21" class="difflineat">@@ -1242,53 +1241,57 @@ nsPop3Protocol::WaitForResponse(nsIInput</span>
<a href="#l8.22"></a><span id="l8.22">   m_pop3ConData-&gt;next_state = m_pop3ConData-&gt;next_state_after_response;</span>
<a href="#l8.23"></a><span id="l8.23">   m_pop3ConData-&gt;pause_for_read = false; /* don't pause */</span>
<a href="#l8.24"></a><span id="l8.24"> </span>
<a href="#l8.25"></a><span id="l8.25">   PR_Free(line);</span>
<a href="#l8.26"></a><span id="l8.26">   return(1);  /* everything ok */</span>
<a href="#l8.27"></a><span id="l8.27"> }</span>
<a href="#l8.28"></a><span id="l8.28"> </span>
<a href="#l8.29"></a><span id="l8.29"> int32_t</span>
<a href="#l8.30"></a><span id="l8.30" class="difflineminus">-nsPop3Protocol::Error(int32_t err_code)</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineplus">+nsPop3Protocol::Error(const char* err_code)</span>
<a href="#l8.32"></a><span id="l8.32"> {</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineminus">-    PR_LOG(POP3LOGMODULE, PR_LOG_ALWAYS, (&quot;ERROR: %d&quot;, err_code));</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineminus">-</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineminus">-    // the error code is just the resource id for the error string...</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineplus">+    </span>
<a href="#l8.37"></a><span id="l8.37" class="difflineplus">+    PR_LOG(POP3LOGMODULE, PR_LOG_ALWAYS, (&quot;ERROR: %s&quot;, err_code));</span>
<a href="#l8.38"></a><span id="l8.38" class="difflineplus">+</span>
<a href="#l8.39"></a><span id="l8.39" class="difflineplus">+    // the error code is just the resource name for the error string...</span>
<a href="#l8.40"></a><span id="l8.40">     // so print out that error message!</span>
<a href="#l8.41"></a><span id="l8.41">     nsresult rv = NS_OK;</span>
<a href="#l8.42"></a><span id="l8.42">     nsCOMPtr&lt;nsIMsgMailNewsUrl&gt; mailnewsUrl = do_QueryInterface(m_url, &amp;rv);</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineminus">-    // we handle POP3_TMP_DOWNLOAD_FAILED earlier...</span>
<a href="#l8.44"></a><span id="l8.44" class="difflineminus">-    if (err_code != POP3_TMP_DOWNLOAD_FAILED &amp;&amp; NS_SUCCEEDED(rv))</span>
<a href="#l8.45"></a><span id="l8.45" class="difflineplus">+    // we handle &quot;pop3TmpDownloadError&quot; earlier...</span>
<a href="#l8.46"></a><span id="l8.46" class="difflineplus">+    if (strcmp(err_code, &quot;pop3TmpDownloadError&quot;) &amp;&amp; NS_SUCCEEDED(rv))</span>
<a href="#l8.47"></a><span id="l8.47">     {</span>
<a href="#l8.48"></a><span id="l8.48">         nsCOMPtr&lt;nsIMsgWindow&gt; msgWindow;</span>
<a href="#l8.49"></a><span id="l8.49">         nsCOMPtr&lt;nsIPrompt&gt; dialog;</span>
<a href="#l8.50"></a><span id="l8.50">         rv = mailnewsUrl-&gt;GetMsgWindow(getter_AddRefs(msgWindow)); //it is ok to have null msgWindow, for example when biffing</span>
<a href="#l8.51"></a><span id="l8.51">         if (NS_SUCCEEDED(rv) &amp;&amp; msgWindow)</span>
<a href="#l8.52"></a><span id="l8.52">         {</span>
<a href="#l8.53"></a><span id="l8.53">             rv = msgWindow-&gt;GetPromptDialog(getter_AddRefs(dialog));</span>
<a href="#l8.54"></a><span id="l8.54">             if (NS_SUCCEEDED(rv))</span>
<a href="#l8.55"></a><span id="l8.55">             {</span>
<a href="#l8.56"></a><span id="l8.56">               nsString alertString;</span>
<a href="#l8.57"></a><span id="l8.57" class="difflineminus">-              mLocalBundle-&gt;GetStringFromID(err_code, getter_Copies(alertString));</span>
<a href="#l8.58"></a><span id="l8.58" class="difflineplus">+              mLocalBundle-&gt;GetStringFromName(NS_ConvertASCIItoUTF16(err_code).get(),</span>
<a href="#l8.59"></a><span id="l8.59" class="difflineplus">+                                              getter_Copies(alertString));</span>
<a href="#l8.60"></a><span id="l8.60">               if (m_pop3ConData-&gt;command_succeeded)  //not a server error message</span>
<a href="#l8.61"></a><span id="l8.61">                 dialog-&gt;Alert(nullptr, alertString.get());</span>
<a href="#l8.62"></a><span id="l8.62">               else</span>
<a href="#l8.63"></a><span id="l8.63">               {</span>
<a href="#l8.64"></a><span id="l8.64">                 nsString serverSaidPrefix;</span>
<a href="#l8.65"></a><span id="l8.65">                 nsCOMPtr&lt;nsIMsgIncomingServer&gt; server = do_QueryInterface(m_pop3Server);</span>
<a href="#l8.66"></a><span id="l8.66">                 nsCString hostName;</span>
<a href="#l8.67"></a><span id="l8.67">                 // Fomat string with hostname.</span>
<a href="#l8.68"></a><span id="l8.68">                 if (server)</span>
<a href="#l8.69"></a><span id="l8.69">                   rv = server-&gt;GetRealHostName(hostName);</span>
<a href="#l8.70"></a><span id="l8.70">                 if (NS_SUCCEEDED(rv))</span>
<a href="#l8.71"></a><span id="l8.71">                 {</span>
<a href="#l8.72"></a><span id="l8.72">                   nsAutoString hostStr;</span>
<a href="#l8.73"></a><span id="l8.73">                   CopyASCIItoUTF16(hostName, hostStr);</span>
<a href="#l8.74"></a><span id="l8.74">                   const PRUnichar *params[] = { hostStr.get() };</span>
<a href="#l8.75"></a><span id="l8.75" class="difflineminus">-                  mLocalBundle-&gt;FormatStringFromID(POP3_SERVER_SAID, params, 1, getter_Copies(serverSaidPrefix));</span>
<a href="#l8.76"></a><span id="l8.76" class="difflineplus">+                  mLocalBundle-&gt;FormatStringFromName(</span>
<a href="#l8.77"></a><span id="l8.77" class="difflineplus">+                    NS_LITERAL_STRING(&quot;pop3ServerSaid&quot;).get(),</span>
<a href="#l8.78"></a><span id="l8.78" class="difflineplus">+                    params, 1, getter_Copies(serverSaidPrefix));</span>
<a href="#l8.79"></a><span id="l8.79">                 }</span>
<a href="#l8.80"></a><span id="l8.80"> </span>
<a href="#l8.81"></a><span id="l8.81">                 nsAutoString message(alertString);</span>
<a href="#l8.82"></a><span id="l8.82">                 message.AppendLiteral(&quot; &quot;);</span>
<a href="#l8.83"></a><span id="l8.83">                 message.Append(serverSaidPrefix);</span>
<a href="#l8.84"></a><span id="l8.84">                 message.AppendLiteral(&quot; &quot;);</span>
<a href="#l8.85"></a><span id="l8.85">                 message.Append(NS_ConvertASCIItoUTF16(m_commandResponse));</span>
<a href="#l8.86"></a><span id="l8.86">                 dialog-&gt;Alert(nullptr,message.get());</span>
<a href="#l8.87"></a><span id="l8.87" class="difflineat">@@ -1329,17 +1332,17 @@ int32_t nsPop3Protocol::Pop3SendData(con</span>
<a href="#l8.88"></a><span id="l8.88"> </span>
<a href="#l8.89"></a><span id="l8.89"> /*</span>
<a href="#l8.90"></a><span id="l8.90">  * POP3 AUTH extension</span>
<a href="#l8.91"></a><span id="l8.91">  */</span>
<a href="#l8.92"></a><span id="l8.92"> </span>
<a href="#l8.93"></a><span id="l8.93"> int32_t nsPop3Protocol::SendAuth()</span>
<a href="#l8.94"></a><span id="l8.94"> {</span>
<a href="#l8.95"></a><span id="l8.95">   if(!m_pop3ConData-&gt;command_succeeded)</span>
<a href="#l8.96"></a><span id="l8.96" class="difflineminus">-    return(Error(POP3_SERVER_ERROR));</span>
<a href="#l8.97"></a><span id="l8.97" class="difflineplus">+    return Error(&quot;pop3ServerError&quot;);</span>
<a href="#l8.98"></a><span id="l8.98"> </span>
<a href="#l8.99"></a><span id="l8.99">   nsAutoCString command(&quot;AUTH&quot; CRLF);</span>
<a href="#l8.100"></a><span id="l8.100"> </span>
<a href="#l8.101"></a><span id="l8.101">   m_pop3ConData-&gt;next_state_after_response = POP3_AUTH_RESPONSE;</span>
<a href="#l8.102"></a><span id="l8.102">   return Pop3SendData(command.get());</span>
<a href="#l8.103"></a><span id="l8.103"> }</span>
<a href="#l8.104"></a><span id="l8.104"> </span>
<a href="#l8.105"></a><span id="l8.105"> int32_t nsPop3Protocol::AuthResponse(nsIInputStream* inputStream,</span>
<a href="#l8.106"></a><span id="l8.106" class="difflineat">@@ -1408,17 +1411,17 @@ int32_t nsPop3Protocol::AuthResponse(nsI</span>
<a href="#l8.107"></a><span id="l8.107"> /*</span>
<a href="#l8.108"></a><span id="l8.108">  * POP3 CAPA extension, see RFC 2449, chapter 5</span>
<a href="#l8.109"></a><span id="l8.109">  */</span>
<a href="#l8.110"></a><span id="l8.110"> </span>
<a href="#l8.111"></a><span id="l8.111"> int32_t nsPop3Protocol::SendCapa()</span>
<a href="#l8.112"></a><span id="l8.112"> {</span>
<a href="#l8.113"></a><span id="l8.113">     PR_LOG(POP3LOGMODULE, PR_LOG_MAX, (&quot;SendCapa()&quot;));</span>
<a href="#l8.114"></a><span id="l8.114">     if(!m_pop3ConData-&gt;command_succeeded)</span>
<a href="#l8.115"></a><span id="l8.115" class="difflineminus">-        return(Error(POP3_SERVER_ERROR));</span>
<a href="#l8.116"></a><span id="l8.116" class="difflineplus">+        return Error(&quot;pop3ServerError&quot;);</span>
<a href="#l8.117"></a><span id="l8.117"> </span>
<a href="#l8.118"></a><span id="l8.118">     nsAutoCString command(&quot;CAPA&quot; CRLF);</span>
<a href="#l8.119"></a><span id="l8.119"> </span>
<a href="#l8.120"></a><span id="l8.120">     m_pop3ConData-&gt;next_state_after_response = POP3_CAPA_RESPONSE;</span>
<a href="#l8.121"></a><span id="l8.121">     return Pop3SendData(command.get());</span>
<a href="#l8.122"></a><span id="l8.122"> }</span>
<a href="#l8.123"></a><span id="l8.123"> </span>
<a href="#l8.124"></a><span id="l8.124"> int32_t nsPop3Protocol::CapaResponse(nsIInputStream* inputStream,</span>
<a href="#l8.125"></a><span id="l8.125" class="difflineat">@@ -1700,17 +1703,17 @@ int32_t nsPop3Protocol::ProcessAuth()</span>
<a href="#l8.126"></a><span id="l8.126"> </span>
<a href="#l8.127"></a><span id="l8.127">             m_pop3ConData-&gt;next_state_after_response = POP3_TLS_RESPONSE;</span>
<a href="#l8.128"></a><span id="l8.128">             return Pop3SendData(command.get());</span>
<a href="#l8.129"></a><span id="l8.129">         }</span>
<a href="#l8.130"></a><span id="l8.130">       }</span>
<a href="#l8.131"></a><span id="l8.131">       else if (m_socketType == nsMsgSocketType::alwaysSTARTTLS)</span>
<a href="#l8.132"></a><span id="l8.132">       {</span>
<a href="#l8.133"></a><span id="l8.133">           m_pop3ConData-&gt;next_state = POP3_ERROR_DONE;</span>
<a href="#l8.134"></a><span id="l8.134" class="difflineminus">-          return(Error(NS_ERROR_COULD_NOT_CONNECT_VIA_TLS));</span>
<a href="#l8.135"></a><span id="l8.135" class="difflineplus">+          return Error(&quot;nsErrorCouldNotConnectViaTls&quot;);</span>
<a href="#l8.136"></a><span id="l8.136">       }</span>
<a href="#l8.137"></a><span id="l8.137">     }</span>
<a href="#l8.138"></a><span id="l8.138"> </span>
<a href="#l8.139"></a><span id="l8.139">     m_password_already_sent = false;</span>
<a href="#l8.140"></a><span id="l8.140"> </span>
<a href="#l8.141"></a><span id="l8.141">     nsresult rv = ChooseAuthMethod();</span>
<a href="#l8.142"></a><span id="l8.142">     if (NS_FAILED(rv))</span>
<a href="#l8.143"></a><span id="l8.143">     {</span>
<a href="#l8.144"></a><span id="l8.144" class="difflineat">@@ -1718,42 +1721,42 @@ int32_t nsPop3Protocol::ProcessAuth()</span>
<a href="#l8.145"></a><span id="l8.145">       PR_LOG(POP3LOGMODULE, PR_LOG_DEBUG,</span>
<a href="#l8.146"></a><span id="l8.146">            (&quot;ProcessAuth() early exit because no auth methods&quot;));</span>
<a href="#l8.147"></a><span id="l8.147"> </span>
<a href="#l8.148"></a><span id="l8.148">       // AuthGSSAPI* falls in here in case of an auth failure.</span>
<a href="#l8.149"></a><span id="l8.149">       // If Kerberos was the only method, assume that</span>
<a href="#l8.150"></a><span id="l8.150">       // the user is just not logged in yet, and show an appropriate error.</span>
<a href="#l8.151"></a><span id="l8.151">       if (m_prefAuthMethods == POP3_HAS_AUTH_GSSAPI &amp;&amp;</span>
<a href="#l8.152"></a><span id="l8.152">           m_failedAuthMethods == POP3_HAS_AUTH_GSSAPI)</span>
<a href="#l8.153"></a><span id="l8.153" class="difflineminus">-        return Error(POP3_GSSAPI_FAILURE);</span>
<a href="#l8.154"></a><span id="l8.154" class="difflineplus">+        return Error(&quot;pop3GssapiFailure&quot;);</span>
<a href="#l8.155"></a><span id="l8.155"> </span>
<a href="#l8.156"></a><span id="l8.156">       // pref has plaintext pw &amp; server claims to support encrypted pw</span>
<a href="#l8.157"></a><span id="l8.157">       if (m_prefAuthMethods == (POP3_HAS_AUTH_USER | POP3_HAS_AUTH_LOGIN |</span>
<a href="#l8.158"></a><span id="l8.158">               POP3_HAS_AUTH_PLAIN) &amp;&amp;</span>
<a href="#l8.159"></a><span id="l8.159">           GetCapFlags() &amp; (POP3_HAS_AUTH_CRAM_MD5 | POP3_HAS_AUTH_APOP))</span>
<a href="#l8.160"></a><span id="l8.160">         // tell user to change to encrypted pw</span>
<a href="#l8.161"></a><span id="l8.161" class="difflineminus">-        return Error(POP3_AUTH_CHANGE_PLAIN_TO_ENCRYPT);</span>
<a href="#l8.162"></a><span id="l8.162" class="difflineplus">+        return Error(&quot;pop3AuthChangePlainToEncrypt&quot;);</span>
<a href="#l8.163"></a><span id="l8.163">       // pref has encrypted pw &amp; server claims to support plaintext pw</span>
<a href="#l8.164"></a><span id="l8.164">       else if (m_prefAuthMethods == (POP3_HAS_AUTH_CRAM_MD5 |</span>
<a href="#l8.165"></a><span id="l8.165">                     POP3_HAS_AUTH_APOP) &amp;&amp;</span>
<a href="#l8.166"></a><span id="l8.166">                GetCapFlags() &amp; (POP3_HAS_AUTH_USER | POP3_HAS_AUTH_LOGIN |</span>
<a href="#l8.167"></a><span id="l8.167">                     POP3_HAS_AUTH_PLAIN))</span>
<a href="#l8.168"></a><span id="l8.168">       {</span>
<a href="#l8.169"></a><span id="l8.169">         // have SSL</span>
<a href="#l8.170"></a><span id="l8.170">         if (m_socketType == nsMsgSocketType::SSL ||</span>
<a href="#l8.171"></a><span id="l8.171">             m_socketType == nsMsgSocketType::alwaysSTARTTLS)</span>
<a href="#l8.172"></a><span id="l8.172">           // tell user to change to plaintext pw</span>
<a href="#l8.173"></a><span id="l8.173" class="difflineminus">-          return Error(POP3_AUTH_CHANGE_ENCRYPT_TO_PLAIN_SSL);</span>
<a href="#l8.174"></a><span id="l8.174" class="difflineplus">+          return Error(&quot;pop3AuthChangeEncryptToPlainSSL&quot;);</span>
<a href="#l8.175"></a><span id="l8.175">         else</span>
<a href="#l8.176"></a><span id="l8.176">           // tell user to change to plaintext pw, with big warning</span>
<a href="#l8.177"></a><span id="l8.177" class="difflineminus">-          return Error(POP3_AUTH_CHANGE_ENCRYPT_TO_PLAIN_NO_SSL);</span>
<a href="#l8.178"></a><span id="l8.178" class="difflineplus">+          return Error(&quot;pop3AuthChangeEncryptToPlainNoSSL&quot;);</span>
<a href="#l8.179"></a><span id="l8.179">       }</span>
<a href="#l8.180"></a><span id="l8.180">       else</span>
<a href="#l8.181"></a><span id="l8.181">         // just &quot;change auth method&quot;</span>
<a href="#l8.182"></a><span id="l8.182" class="difflineminus">-        return Error(POP3_AUTH_MECH_NOT_SUPPORTED);</span>
<a href="#l8.183"></a><span id="l8.183" class="difflineplus">+        return Error(&quot;pop3AuthMechNotSupported&quot;);</span>
<a href="#l8.184"></a><span id="l8.184">     }</span>
<a href="#l8.185"></a><span id="l8.185"> </span>
<a href="#l8.186"></a><span id="l8.186">     switch (m_currentAuthMethod)</span>
<a href="#l8.187"></a><span id="l8.187">     {</span>
<a href="#l8.188"></a><span id="l8.188">       case POP3_HAS_AUTH_GSSAPI:</span>
<a href="#l8.189"></a><span id="l8.189">         PR_LOG(POP3LOGMODULE, PR_LOG_DEBUG, (&quot;POP GSSAPI&quot;));</span>
<a href="#l8.190"></a><span id="l8.190">         m_pop3ConData-&gt;next_state = POP3_AUTH_GSSAPI;</span>
<a href="#l8.191"></a><span id="l8.191">         break;</span>
<a href="#l8.192"></a><span id="l8.192" class="difflineat">@@ -1779,17 +1782,17 @@ int32_t nsPop3Protocol::ProcessAuth()</span>
<a href="#l8.193"></a><span id="l8.193">       case POP3_HAS_AUTH_NONE:</span>
<a href="#l8.194"></a><span id="l8.194">         PR_LOG(POP3LOGMODULE, PR_LOG_DEBUG, (&quot;POP no auth&quot;));</span>
<a href="#l8.195"></a><span id="l8.195">         m_pop3ConData-&gt;command_succeeded = true;</span>
<a href="#l8.196"></a><span id="l8.196">         m_pop3ConData-&gt;next_state = POP3_NEXT_AUTH_STEP;</span>
<a href="#l8.197"></a><span id="l8.197">         break;</span>
<a href="#l8.198"></a><span id="l8.198">       default:</span>
<a href="#l8.199"></a><span id="l8.199">         PR_LOG(POP3LOGMODULE, PR_LOG_ERROR,</span>
<a href="#l8.200"></a><span id="l8.200">              (&quot;POP: m_currentAuthMethod has unknown value&quot;));</span>
<a href="#l8.201"></a><span id="l8.201" class="difflineminus">-        return Error(POP3_AUTH_MECH_NOT_SUPPORTED);</span>
<a href="#l8.202"></a><span id="l8.202" class="difflineplus">+        return Error(&quot;pop3AuthMechNotSupported&quot;);</span>
<a href="#l8.203"></a><span id="l8.203">     }</span>
<a href="#l8.204"></a><span id="l8.204"> </span>
<a href="#l8.205"></a><span id="l8.205">     m_pop3ConData-&gt;pause_for_read = false;</span>
<a href="#l8.206"></a><span id="l8.206"> </span>
<a href="#l8.207"></a><span id="l8.207">     return 0;</span>
<a href="#l8.208"></a><span id="l8.208"> }</span>
<a href="#l8.209"></a><span id="l8.209"> </span>
<a href="#l8.210"></a><span id="l8.210"> /**</span>
<a href="#l8.211"></a><span id="l8.211" class="difflineat">@@ -1819,44 +1822,44 @@ int32_t nsPop3Protocol::NextAuthStep()</span>
<a href="#l8.212"></a><span id="l8.212">             m_pop3ConData-&gt;next_state = POP3_SEND_PASSWORD;</span>
<a href="#l8.213"></a><span id="l8.213">     }</span>
<a href="#l8.214"></a><span id="l8.214">     else</span>
<a href="#l8.215"></a><span id="l8.215">     {</span>
<a href="#l8.216"></a><span id="l8.216">         PR_LOG(POP3LOGMODULE, PR_LOG_MAX, (&quot;command did not succeed&quot;));</span>
<a href="#l8.217"></a><span id="l8.217">         // response code received shows that login failed not because of</span>
<a href="#l8.218"></a><span id="l8.218">         // wrong credential -&gt; stop login without retry or pw dialog, only alert</span>
<a href="#l8.219"></a><span id="l8.219">         if (TestFlag(POP3_STOPLOGIN))</span>
<a href="#l8.220"></a><span id="l8.220" class="difflineminus">-            return(Error((m_password_already_sent)</span>
<a href="#l8.221"></a><span id="l8.221" class="difflineminus">-                         ? POP3_PASSWORD_FAILURE : POP3_USERNAME_FAILURE));</span>
<a href="#l8.222"></a><span id="l8.222" class="difflineplus">+            return Error((m_password_already_sent) ? &quot;pop3PasswordFailure&quot; :</span>
<a href="#l8.223"></a><span id="l8.223" class="difflineplus">+                                                     &quot;pop3UsernameFailure&quot;);</span>
<a href="#l8.224"></a><span id="l8.224"> </span>
<a href="#l8.225"></a><span id="l8.225">         // response code received shows that server is certain about the</span>
<a href="#l8.226"></a><span id="l8.226">         // credential was wrong -&gt; no fallback, show alert and pw dialog</span>
<a href="#l8.227"></a><span id="l8.227">         if (TestFlag(POP3_AUTH_FAILURE))</span>
<a href="#l8.228"></a><span id="l8.228">         {</span>
<a href="#l8.229"></a><span id="l8.229">             PR_LOG(POP3LOGMODULE, PR_LOG_DEBUG,</span>
<a href="#l8.230"></a><span id="l8.230">                (&quot;auth failure, setting password failed&quot;));</span>
<a href="#l8.231"></a><span id="l8.231" class="difflineminus">-            Error((m_password_already_sent)</span>
<a href="#l8.232"></a><span id="l8.232" class="difflineminus">-                         ? POP3_PASSWORD_FAILURE : POP3_USERNAME_FAILURE);</span>
<a href="#l8.233"></a><span id="l8.233" class="difflineplus">+            Error((m_password_already_sent) ? &quot;pop3PasswordFailure&quot; :</span>
<a href="#l8.234"></a><span id="l8.234" class="difflineplus">+                                              &quot;pop3UsernameFailure&quot;);</span>
<a href="#l8.235"></a><span id="l8.235">             SetFlag(POP3_PASSWORD_FAILED);</span>
<a href="#l8.236"></a><span id="l8.236">             ClearFlag(POP3_AUTH_FAILURE);</span>
<a href="#l8.237"></a><span id="l8.237">             return 0;</span>
<a href="#l8.238"></a><span id="l8.238">         }</span>
<a href="#l8.239"></a><span id="l8.239"> </span>
<a href="#l8.240"></a><span id="l8.240">         // We have no certain response code -&gt; fallback and try again.</span>
<a href="#l8.241"></a><span id="l8.241">         // Mark the auth method failed, to use a different method next round.</span>
<a href="#l8.242"></a><span id="l8.242">         MarkAuthMethodAsFailed(m_currentAuthMethod);</span>
<a href="#l8.243"></a><span id="l8.243"> </span>
<a href="#l8.244"></a><span id="l8.244">         if (m_currentAuthMethod == POP3_HAS_AUTH_USER &amp;&amp;</span>
<a href="#l8.245"></a><span id="l8.245">             !m_password_already_sent)</span>
<a href="#l8.246"></a><span id="l8.246">         {</span>
<a href="#l8.247"></a><span id="l8.247">             PR_LOG(POP3LOGMODULE, PR_LOG_DEBUG, (&quot;USER username failed&quot;));</span>
<a href="#l8.248"></a><span id="l8.248">             // if USER auth method failed before sending the password,</span>
<a href="#l8.249"></a><span id="l8.249">             // the username was wrong.</span>
<a href="#l8.250"></a><span id="l8.250">             // no fallback but return error</span>
<a href="#l8.251"></a><span id="l8.251" class="difflineminus">-            return Error(POP3_USERNAME_FAILURE);</span>
<a href="#l8.252"></a><span id="l8.252" class="difflineplus">+            return Error(&quot;pop3UsernameFailure&quot;);</span>
<a href="#l8.253"></a><span id="l8.253">         }</span>
<a href="#l8.254"></a><span id="l8.254"> </span>
<a href="#l8.255"></a><span id="l8.255">         // If we have no auth method left, ask user to try with new password</span>
<a href="#l8.256"></a><span id="l8.256">         nsresult rv = ChooseAuthMethod();</span>
<a href="#l8.257"></a><span id="l8.257">         if (NS_FAILED(rv))</span>
<a href="#l8.258"></a><span id="l8.258">         {</span>
<a href="#l8.259"></a><span id="l8.259">             PR_LOG(POP3LOGMODULE, PR_LOG_ERROR,</span>
<a href="#l8.260"></a><span id="l8.260">                 (&quot;POP: no auth methods remaining, setting password failure&quot;));</span>
<a href="#l8.261"></a><span id="l8.261" class="difflineat">@@ -1864,17 +1867,17 @@ int32_t nsPop3Protocol::NextAuthStep()</span>
<a href="#l8.262"></a><span id="l8.262">                which, upon success, will re-open the connection.  Set a flag</span>
<a href="#l8.263"></a><span id="l8.263">                which causes the prompt to be different that time (to indicate</span>
<a href="#l8.264"></a><span id="l8.264">                that the old password was bogus.)</span>
<a href="#l8.265"></a><span id="l8.265"> </span>
<a href="#l8.266"></a><span id="l8.266">                But if we're just checking for new mail (biff) then don't bother</span>
<a href="#l8.267"></a><span id="l8.267">                prompting the user for a password: just fail silently.</span>
<a href="#l8.268"></a><span id="l8.268">             */</span>
<a href="#l8.269"></a><span id="l8.269">             SetFlag(POP3_PASSWORD_FAILED);</span>
<a href="#l8.270"></a><span id="l8.270" class="difflineminus">-            Error(POP3_PASSWORD_FAILURE);</span>
<a href="#l8.271"></a><span id="l8.271" class="difflineplus">+            Error(&quot;pop3PasswordFailure&quot;);</span>
<a href="#l8.272"></a><span id="l8.272"> </span>
<a href="#l8.273"></a><span id="l8.273">             if (m_nsIPop3Sink)</span>
<a href="#l8.274"></a><span id="l8.274">                 m_nsIPop3Sink-&gt;SetMailAccountURL(NULL);</span>
<a href="#l8.275"></a><span id="l8.275"> </span>
<a href="#l8.276"></a><span id="l8.276">             return 0;</span>
<a href="#l8.277"></a><span id="l8.277">         }</span>
<a href="#l8.278"></a><span id="l8.278">         PR_LOG(POP3LOGMODULE, PR_LOG_DEBUG,</span>
<a href="#l8.279"></a><span id="l8.279">            (&quot;still have some auth methods to try&quot;));</span>
<a href="#l8.280"></a><span id="l8.280" class="difflineat">@@ -2025,28 +2028,28 @@ int32_t nsPop3Protocol::AuthGSSAPIRespon</span>
<a href="#l8.281"></a><span id="l8.281"> </span>
<a href="#l8.282"></a><span id="l8.282">     return result;</span>
<a href="#l8.283"></a><span id="l8.283"> }</span>
<a href="#l8.284"></a><span id="l8.284"> </span>
<a href="#l8.285"></a><span id="l8.285"> int32_t nsPop3Protocol::SendUsername()</span>
<a href="#l8.286"></a><span id="l8.286"> {</span>
<a href="#l8.287"></a><span id="l8.287">     PR_LOG(POP3LOGMODULE, PR_LOG_MAX, (&quot;SendUsername()&quot;));</span>
<a href="#l8.288"></a><span id="l8.288">     if(m_username.IsEmpty())</span>
<a href="#l8.289"></a><span id="l8.289" class="difflineminus">-      return(Error(POP3_USERNAME_UNDEFINED));</span>
<a href="#l8.290"></a><span id="l8.290" class="difflineplus">+      return Error(&quot;pop3UsernameUndefined&quot;);</span>
<a href="#l8.291"></a><span id="l8.291"> </span>
<a href="#l8.292"></a><span id="l8.292">     // &lt;copied from=&quot;SendPassword()&quot;&gt;</span>
<a href="#l8.293"></a><span id="l8.293">     // Needed for NTLM</span>
<a href="#l8.294"></a><span id="l8.294"> </span>
<a href="#l8.295"></a><span id="l8.295">     // The POP3_SEND_PASSWORD/POP3_WAIT_SEND_PASSWORD states have already</span>
<a href="#l8.296"></a><span id="l8.296">     // got the password - they will have cancelled if necessary.</span>
<a href="#l8.297"></a><span id="l8.297">     // If the password is still empty here, don't try to go on.</span>
<a href="#l8.298"></a><span id="l8.298">     if (m_passwordResult.IsEmpty())</span>
<a href="#l8.299"></a><span id="l8.299">     {</span>
<a href="#l8.300"></a><span id="l8.300">       m_pop3ConData-&gt;next_state = POP3_ERROR_DONE;</span>
<a href="#l8.301"></a><span id="l8.301" class="difflineminus">-      return Error(POP3_PASSWORD_UNDEFINED);</span>
<a href="#l8.302"></a><span id="l8.302" class="difflineplus">+      return Error(&quot;pop3PasswordUndefined&quot;);</span>
<a href="#l8.303"></a><span id="l8.303">     }</span>
<a href="#l8.304"></a><span id="l8.304">     // &lt;/copied&gt;</span>
<a href="#l8.305"></a><span id="l8.305"> </span>
<a href="#l8.306"></a><span id="l8.306">     nsAutoCString cmd;</span>
<a href="#l8.307"></a><span id="l8.307"> </span>
<a href="#l8.308"></a><span id="l8.308">     if (m_currentAuthMethod == POP3_HAS_AUTH_NTLM)</span>
<a href="#l8.309"></a><span id="l8.309">         (void) DoNtlmStep1(m_username.get(), m_passwordResult.get(), cmd);</span>
<a href="#l8.310"></a><span id="l8.310">     else if (m_currentAuthMethod == POP3_HAS_AUTH_CRAM_MD5)</span>
<a href="#l8.311"></a><span id="l8.311" class="difflineat">@@ -2065,43 +2068,43 @@ int32_t nsPop3Protocol::SendUsername()</span>
<a href="#l8.312"></a><span id="l8.312">         cmd = &quot;USER &quot;;</span>
<a href="#l8.313"></a><span id="l8.313">         cmd += m_username;</span>
<a href="#l8.314"></a><span id="l8.314">     }</span>
<a href="#l8.315"></a><span id="l8.315">     else</span>
<a href="#l8.316"></a><span id="l8.316">     {</span>
<a href="#l8.317"></a><span id="l8.317">       PR_LOG(POP3LOGMODULE, PR_LOG_ERROR,</span>
<a href="#l8.318"></a><span id="l8.318">           (&quot;In nsPop3Protocol::SendUsername(), m_currentAuthMethod is 0x%X, &quot;</span>
<a href="#l8.319"></a><span id="l8.319">           &quot;but that is unexpected&quot;, m_currentAuthMethod));</span>
<a href="#l8.320"></a><span id="l8.320" class="difflineminus">-      return Error(POP3_AUTH_INTERNAL_ERROR);</span>
<a href="#l8.321"></a><span id="l8.321" class="difflineplus">+      return Error(&quot;pop3AuthInternalError&quot;);</span>
<a href="#l8.322"></a><span id="l8.322">     }</span>
<a href="#l8.323"></a><span id="l8.323"> </span>
<a href="#l8.324"></a><span id="l8.324">     cmd += CRLF;</span>
<a href="#l8.325"></a><span id="l8.325"> </span>
<a href="#l8.326"></a><span id="l8.326">     m_pop3ConData-&gt;next_state_after_response = POP3_NEXT_AUTH_STEP;</span>
<a href="#l8.327"></a><span id="l8.327"> </span>
<a href="#l8.328"></a><span id="l8.328">     m_pop3ConData-&gt;pause_for_read = true;</span>
<a href="#l8.329"></a><span id="l8.329"> </span>
<a href="#l8.330"></a><span id="l8.330">     return Pop3SendData(cmd.get());</span>
<a href="#l8.331"></a><span id="l8.331"> }</span>
<a href="#l8.332"></a><span id="l8.332"> </span>
<a href="#l8.333"></a><span id="l8.333"> int32_t nsPop3Protocol::SendPassword()</span>
<a href="#l8.334"></a><span id="l8.334"> {</span>
<a href="#l8.335"></a><span id="l8.335">   PR_LOG(POP3LOGMODULE, PR_LOG_MAX, (&quot;SendPassword()&quot;));</span>
<a href="#l8.336"></a><span id="l8.336">   if (m_username.IsEmpty())</span>
<a href="#l8.337"></a><span id="l8.337" class="difflineminus">-    return(Error(POP3_USERNAME_UNDEFINED));</span>
<a href="#l8.338"></a><span id="l8.338" class="difflineplus">+    return Error(&quot;pop3UsernameUndefined&quot;);</span>
<a href="#l8.339"></a><span id="l8.339"> </span>
<a href="#l8.340"></a><span id="l8.340">   // &lt;copied to=&quot;SendUsername()&quot;&gt;</span>
<a href="#l8.341"></a><span id="l8.341">   // Needed here, too, because APOP skips SendUsername()</span>
<a href="#l8.342"></a><span id="l8.342">   // The POP3_SEND_PASSWORD/POP3_WAIT_SEND_PASSWORD states have already</span>
<a href="#l8.343"></a><span id="l8.343">   // got the password - they will have cancelled if necessary.</span>
<a href="#l8.344"></a><span id="l8.344">   // If the password is still empty here, don't try to go on.</span>
<a href="#l8.345"></a><span id="l8.345">   if (m_passwordResult.IsEmpty())</span>
<a href="#l8.346"></a><span id="l8.346">   {</span>
<a href="#l8.347"></a><span id="l8.347">     m_pop3ConData-&gt;next_state = POP3_ERROR_DONE;</span>
<a href="#l8.348"></a><span id="l8.348" class="difflineminus">-    return Error(POP3_PASSWORD_UNDEFINED);</span>
<a href="#l8.349"></a><span id="l8.349" class="difflineplus">+    return Error(&quot;pop3PasswordUndefined&quot;);</span>
<a href="#l8.350"></a><span id="l8.350">   }</span>
<a href="#l8.351"></a><span id="l8.351">   // &lt;/copied&gt;</span>
<a href="#l8.352"></a><span id="l8.352"> </span>
<a href="#l8.353"></a><span id="l8.353">   nsAutoCString cmd;</span>
<a href="#l8.354"></a><span id="l8.354">   nsresult rv;</span>
<a href="#l8.355"></a><span id="l8.355"> </span>
<a href="#l8.356"></a><span id="l8.356">   if (m_currentAuthMethod == POP3_HAS_AUTH_NTLM)</span>
<a href="#l8.357"></a><span id="l8.357">     rv = DoNtlmStep2(m_commandResponse, cmd);</span>
<a href="#l8.358"></a><span id="l8.358" class="difflineat">@@ -2216,17 +2219,17 @@ int32_t nsPop3Protocol::SendPassword()</span>
<a href="#l8.359"></a><span id="l8.359">     cmd = &quot;PASS &quot;;</span>
<a href="#l8.360"></a><span id="l8.360">     cmd += m_passwordResult;</span>
<a href="#l8.361"></a><span id="l8.361">   }</span>
<a href="#l8.362"></a><span id="l8.362">   else</span>
<a href="#l8.363"></a><span id="l8.363">   {</span>
<a href="#l8.364"></a><span id="l8.364">     PR_LOG(POP3LOGMODULE, PR_LOG_ERROR,</span>
<a href="#l8.365"></a><span id="l8.365">         (&quot;In nsPop3Protocol::SendPassword(), m_currentAuthMethod is %X, &quot;</span>
<a href="#l8.366"></a><span id="l8.366">         &quot;but that is unexpected&quot;, m_currentAuthMethod));</span>
<a href="#l8.367"></a><span id="l8.367" class="difflineminus">-    return Error(POP3_AUTH_INTERNAL_ERROR);</span>
<a href="#l8.368"></a><span id="l8.368" class="difflineplus">+    return Error(&quot;pop3AuthInternalError&quot;);</span>
<a href="#l8.369"></a><span id="l8.369">   }</span>
<a href="#l8.370"></a><span id="l8.370"> </span>
<a href="#l8.371"></a><span id="l8.371">   cmd += CRLF;</span>
<a href="#l8.372"></a><span id="l8.372"> </span>
<a href="#l8.373"></a><span id="l8.373">   // TODO needed?</span>
<a href="#l8.374"></a><span id="l8.374">   //m_pop3Server-&gt;SetPop3CapabilityFlags(m_pop3ConData-&gt;capability_flags);</span>
<a href="#l8.375"></a><span id="l8.375"> </span>
<a href="#l8.376"></a><span id="l8.376">   m_pop3ConData-&gt;next_state_after_response = POP3_NEXT_AUTH_STEP;</span>
<a href="#l8.377"></a><span id="l8.377" class="difflineat">@@ -2262,17 +2265,17 @@ nsPop3Protocol::SendStat()</span>
<a href="#l8.378"></a><span id="l8.378"> }</span>
<a href="#l8.379"></a><span id="l8.379"> </span>
<a href="#l8.380"></a><span id="l8.380"> </span>
<a href="#l8.381"></a><span id="l8.381"> int32_t</span>
<a href="#l8.382"></a><span id="l8.382"> nsPop3Protocol::GetStat()</span>
<a href="#l8.383"></a><span id="l8.383"> {</span>
<a href="#l8.384"></a><span id="l8.384">   // check stat response</span>
<a href="#l8.385"></a><span id="l8.385">   if (!m_pop3ConData-&gt;command_succeeded)</span>
<a href="#l8.386"></a><span id="l8.386" class="difflineminus">-    return(Error(POP3_STAT_FAILURE));</span>
<a href="#l8.387"></a><span id="l8.387" class="difflineplus">+    return Error(&quot;pop3StatFail&quot;);</span>
<a href="#l8.388"></a><span id="l8.388"> </span>
<a href="#l8.389"></a><span id="l8.389">     /* stat response looks like:  %d %d</span>
<a href="#l8.390"></a><span id="l8.390">      * The first number is the number of articles</span>
<a href="#l8.391"></a><span id="l8.391">      * The second number is the number of bytes</span>
<a href="#l8.392"></a><span id="l8.392">      *</span>
<a href="#l8.393"></a><span id="l8.393">      *  grab the first and second arg of stat response</span>
<a href="#l8.394"></a><span id="l8.394">      */</span>
<a href="#l8.395"></a><span id="l8.395">   nsCString oldStr (m_commandResponse);</span>
<a href="#l8.396"></a><span id="l8.396" class="difflineat">@@ -2334,24 +2337,22 @@ nsPop3Protocol::GetStat()</span>
<a href="#l8.397"></a><span id="l8.397">         rv = mailnewsUrl-&gt;GetMsgWindow(getter_AddRefs(msgWindow));</span>
<a href="#l8.398"></a><span id="l8.398"> //      NS_ASSERTION(NS_SUCCEEDED(rv) &amp;&amp; msgWindow, &quot;no msg window&quot;);</span>
<a href="#l8.399"></a><span id="l8.399"> </span>
<a href="#l8.400"></a><span id="l8.400">       rv = m_nsIPop3Sink-&gt;BeginMailDelivery(m_pop3ConData-&gt;only_uidl != nullptr, msgWindow,</span>
<a href="#l8.401"></a><span id="l8.401">                                                     &amp;m_pop3ConData-&gt;msg_del_started);</span>
<a href="#l8.402"></a><span id="l8.402">       if (NS_FAILED(rv))</span>
<a href="#l8.403"></a><span id="l8.403">       {</span>
<a href="#l8.404"></a><span id="l8.404">         m_nsIPop3Sink-&gt;AbortMailDelivery(this);</span>
<a href="#l8.405"></a><span id="l8.405" class="difflineminus">-        if (rv == NS_MSG_FOLDER_BUSY)</span>
<a href="#l8.406"></a><span id="l8.406" class="difflineminus">-          return(Error(POP3_MESSAGE_FOLDER_BUSY));</span>
<a href="#l8.407"></a><span id="l8.407" class="difflineminus">-        else</span>
<a href="#l8.408"></a><span id="l8.408" class="difflineminus">-          return(Error(POP3_MESSAGE_WRITE_ERROR));</span>
<a href="#l8.409"></a><span id="l8.409" class="difflineplus">+        return Error(rv == NS_MSG_FOLDER_BUSY ? &quot;pop3MessageFolderBusy&quot; :</span>
<a href="#l8.410"></a><span id="l8.410" class="difflineplus">+                                                &quot;pop3MessageWriteError&quot;);</span>
<a href="#l8.411"></a><span id="l8.411">       }</span>
<a href="#l8.412"></a><span id="l8.412"> </span>
<a href="#l8.413"></a><span id="l8.413">       if(!m_pop3ConData-&gt;msg_del_started)</span>
<a href="#l8.414"></a><span id="l8.414" class="difflineminus">-        return(Error(POP3_MESSAGE_WRITE_ERROR));</span>
<a href="#l8.415"></a><span id="l8.415" class="difflineplus">+        return Error(&quot;pop3MessageWriteError&quot;);</span>
<a href="#l8.416"></a><span id="l8.416">   }</span>
<a href="#l8.417"></a><span id="l8.417"> </span>
<a href="#l8.418"></a><span id="l8.418">   m_pop3ConData-&gt;next_state = POP3_SEND_LIST;</span>
<a href="#l8.419"></a><span id="l8.419">   return 0;</span>
<a href="#l8.420"></a><span id="l8.420"> }</span>
<a href="#l8.421"></a><span id="l8.421"> </span>
<a href="#l8.422"></a><span id="l8.422"> </span>
<a href="#l8.423"></a><span id="l8.423"> </span>
<a href="#l8.424"></a><span id="l8.424" class="difflineat">@@ -2416,17 +2417,17 @@ nsPop3Protocol::GetList(nsIInputStream* </span>
<a href="#l8.425"></a><span id="l8.425">                         uint32_t length)</span>
<a href="#l8.426"></a><span id="l8.426"> {</span>
<a href="#l8.427"></a><span id="l8.427">   /* check list response</span>
<a href="#l8.428"></a><span id="l8.428">   * This will get called multiple times</span>
<a href="#l8.429"></a><span id="l8.429">   * but it's alright since command_succeeded</span>
<a href="#l8.430"></a><span id="l8.430">   * will remain constant</span>
<a href="#l8.431"></a><span id="l8.431">   */</span>
<a href="#l8.432"></a><span id="l8.432">   if(!m_pop3ConData-&gt;command_succeeded)</span>
<a href="#l8.433"></a><span id="l8.433" class="difflineminus">-    return(Error(POP3_LIST_FAILURE));</span>
<a href="#l8.434"></a><span id="l8.434" class="difflineplus">+    return Error(&quot;pop3ListFailure&quot;);</span>
<a href="#l8.435"></a><span id="l8.435"> </span>
<a href="#l8.436"></a><span id="l8.436">   uint32_t ln = 0;</span>
<a href="#l8.437"></a><span id="l8.437">   bool pauseForMoreData = false;</span>
<a href="#l8.438"></a><span id="l8.438">   nsresult rv;</span>
<a href="#l8.439"></a><span id="l8.439">   char *line = m_lineStreamBuffer-&gt;ReadNextLine(inputStream, ln, pauseForMoreData, &amp;rv);</span>
<a href="#l8.440"></a><span id="l8.440">   if (NS_FAILED(rv))</span>
<a href="#l8.441"></a><span id="l8.441">     return -1;</span>
<a href="#l8.442"></a><span id="l8.442"> </span>
<a href="#l8.443"></a><span id="l8.443" class="difflineat">@@ -2531,17 +2532,18 @@ int32_t nsPop3Protocol::HandleNoUidListA</span>
<a href="#l8.444"></a><span id="l8.444">           if (server)</span>
<a href="#l8.445"></a><span id="l8.445">             rv = server-&gt;GetRealHostName(hostName);</span>
<a href="#l8.446"></a><span id="l8.446">           if (NS_SUCCEEDED(rv))</span>
<a href="#l8.447"></a><span id="l8.447">           {</span>
<a href="#l8.448"></a><span id="l8.448">             nsAutoString hostNameUnicode;</span>
<a href="#l8.449"></a><span id="l8.449">             CopyASCIItoUTF16(hostName, hostNameUnicode);</span>
<a href="#l8.450"></a><span id="l8.450">             const PRUnichar *formatStrings[] = { hostNameUnicode.get() };</span>
<a href="#l8.451"></a><span id="l8.451">             nsString alertString;</span>
<a href="#l8.452"></a><span id="l8.452" class="difflineminus">-            rv = mLocalBundle-&gt;FormatStringFromID(POP3_SERVER_DOES_NOT_SUPPORT_UIDL_ETC,</span>
<a href="#l8.453"></a><span id="l8.453" class="difflineplus">+            rv = mLocalBundle-&gt;FormatStringFromName(</span>
<a href="#l8.454"></a><span id="l8.454" class="difflineplus">+              NS_LITERAL_STRING(&quot;pop3ServerDoesNotSupportUidlEtc&quot;).get(),</span>
<a href="#l8.455"></a><span id="l8.455">               formatStrings, 1, getter_Copies(alertString));</span>
<a href="#l8.456"></a><span id="l8.456">             NS_ENSURE_SUCCESS(rv, -1);</span>
<a href="#l8.457"></a><span id="l8.457"> </span>
<a href="#l8.458"></a><span id="l8.458">             dialog-&gt;Alert(nullptr, alertString.get());</span>
<a href="#l8.459"></a><span id="l8.459">           }</span>
<a href="#l8.460"></a><span id="l8.460">         }</span>
<a href="#l8.461"></a><span id="l8.461">       }</span>
<a href="#l8.462"></a><span id="l8.462">     }</span>
<a href="#l8.463"></a><span id="l8.463" class="difflineat">@@ -2944,17 +2946,17 @@ int32_t nsPop3Protocol::GetMsg()</span>
<a href="#l8.464"></a><span id="l8.464"> </span>
<a href="#l8.465"></a><span id="l8.465">       bool spaceAvailable;</span>
<a href="#l8.466"></a><span id="l8.466">       // check if we have a reasonable amount of space left</span>
<a href="#l8.467"></a><span id="l8.467">       rv = msgStore-&gt;HasSpaceAvailable(folder, m_totalDownloadSize, &amp;spaceAvailable);</span>
<a href="#l8.468"></a><span id="l8.468">       if (NS_FAILED(rv) || !spaceAvailable) {</span>
<a href="#l8.469"></a><span id="l8.469"> #ifdef DEBUG</span>
<a href="#l8.470"></a><span id="l8.470">         printf(&quot;Not enough disk space! Raising error!\n&quot;);</span>
<a href="#l8.471"></a><span id="l8.471"> #endif</span>
<a href="#l8.472"></a><span id="l8.472" class="difflineminus">-        return (Error(MK_POP3_OUT_OF_DISK_SPACE));</span>
<a href="#l8.473"></a><span id="l8.473" class="difflineplus">+        return Error(&quot;pop3OutOfDiskSpace&quot;);</span>
<a href="#l8.474"></a><span id="l8.474">       }</span>
<a href="#l8.475"></a><span id="l8.475"> </span>
<a href="#l8.476"></a><span id="l8.476">       // Here we know how many messages we're going to download, so let</span>
<a href="#l8.477"></a><span id="l8.477">       // the pop3 sink know.</span>
<a href="#l8.478"></a><span id="l8.478">       rv = m_nsIPop3Sink-&gt;SetMsgsToDownload(m_pop3ConData-&gt;really_new_messages);</span>
<a href="#l8.479"></a><span id="l8.479">     }</span>
<a href="#l8.480"></a><span id="l8.480">   }</span>
<a href="#l8.481"></a><span id="l8.481"> </span>
<a href="#l8.482"></a><span id="l8.482" class="difflineat">@@ -3190,17 +3192,17 @@ nsPop3Protocol::RetrResponse(nsIInputStr</span>
<a href="#l8.483"></a><span id="l8.483">     uint32_t status = 0;</span>
<a href="#l8.484"></a><span id="l8.484"> </span>
<a href="#l8.485"></a><span id="l8.485">     if(m_pop3ConData-&gt;cur_msg_size == -1)</span>
<a href="#l8.486"></a><span id="l8.486">     {</span>
<a href="#l8.487"></a><span id="l8.487">         /* this is the beginning of a message</span>
<a href="#l8.488"></a><span id="l8.488">          * get the response code and byte size</span>
<a href="#l8.489"></a><span id="l8.489">          */</span>
<a href="#l8.490"></a><span id="l8.490">         if(!m_pop3ConData-&gt;command_succeeded)</span>
<a href="#l8.491"></a><span id="l8.491" class="difflineminus">-            return Error(POP3_RETR_FAILURE);</span>
<a href="#l8.492"></a><span id="l8.492" class="difflineplus">+            return Error(&quot;pop3RetrFailure&quot;);</span>
<a href="#l8.493"></a><span id="l8.493"> </span>
<a href="#l8.494"></a><span id="l8.494">         /* a successful RETR response looks like: #num_bytes Junk</span>
<a href="#l8.495"></a><span id="l8.495">            from TOP we only get the +OK and data</span>
<a href="#l8.496"></a><span id="l8.496">            */</span>
<a href="#l8.497"></a><span id="l8.497">         if (m_pop3ConData-&gt;truncating_cur_msg)</span>
<a href="#l8.498"></a><span id="l8.498">         { /* TOP, truncated message */</span>
<a href="#l8.499"></a><span id="l8.499">             flags |= nsMsgMessageFlags::Partial;</span>
<a href="#l8.500"></a><span id="l8.500">         }</span>
<a href="#l8.501"></a><span id="l8.501" class="difflineat">@@ -3245,17 +3247,17 @@ nsPop3Protocol::RetrResponse(nsIInputStr</span>
<a href="#l8.502"></a><span id="l8.502">         m_pop3ConData-&gt;real_new_counter++;</span>
<a href="#l8.503"></a><span id="l8.503">         /* (rb) count only real messages being downloaded */</span>
<a href="#l8.504"></a><span id="l8.504">         rv = m_nsIPop3Sink-&gt;IncorporateBegin(uidl, m_url, flags,</span>
<a href="#l8.505"></a><span id="l8.505">                                         &amp;m_pop3ConData-&gt;msg_closure);</span>
<a href="#l8.506"></a><span id="l8.506"> </span>
<a href="#l8.507"></a><span id="l8.507">         PR_LOG(POP3LOGMODULE, PR_LOG_ALWAYS, (&quot;Done opening message stream!&quot;));</span>
<a href="#l8.508"></a><span id="l8.508"> </span>
<a href="#l8.509"></a><span id="l8.509">         if(!m_pop3ConData-&gt;msg_closure || NS_FAILED(rv))</span>
<a href="#l8.510"></a><span id="l8.510" class="difflineminus">-            return(Error(POP3_MESSAGE_WRITE_ERROR));</span>
<a href="#l8.511"></a><span id="l8.511" class="difflineplus">+            return Error(&quot;pop3MessageWriteError&quot;);</span>
<a href="#l8.512"></a><span id="l8.512">     }</span>
<a href="#l8.513"></a><span id="l8.513"> </span>
<a href="#l8.514"></a><span id="l8.514">     m_pop3ConData-&gt;pause_for_read = true;</span>
<a href="#l8.515"></a><span id="l8.515"> </span>
<a href="#l8.516"></a><span id="l8.516">     bool pauseForMoreData = false;</span>
<a href="#l8.517"></a><span id="l8.517">     char *line = m_lineStreamBuffer-&gt;ReadNextLine(inputStream, status, pauseForMoreData, &amp;rv, true);</span>
<a href="#l8.518"></a><span id="l8.518">     PR_LOG(POP3LOGMODULE, PR_LOG_ALWAYS,(&quot;RECV: %s&quot;, line));</span>
<a href="#l8.519"></a><span id="l8.519">     if (NS_FAILED(rv))</span>
<a href="#l8.520"></a><span id="l8.520" class="difflineat">@@ -3271,17 +3273,17 @@ nsPop3Protocol::RetrResponse(nsIInputStr</span>
<a href="#l8.521"></a><span id="l8.521">       // buffer the line we just read in, and buffer all remaining lines in the stream</span>
<a href="#l8.522"></a><span id="l8.522">       status = buffer_size;</span>
<a href="#l8.523"></a><span id="l8.523">       do</span>
<a href="#l8.524"></a><span id="l8.524">       {</span>
<a href="#l8.525"></a><span id="l8.525">         if (m_pop3ConData-&gt;msg_closure)</span>
<a href="#l8.526"></a><span id="l8.526">         {</span>
<a href="#l8.527"></a><span id="l8.527">           rv = HandleLine(line, buffer_size);</span>
<a href="#l8.528"></a><span id="l8.528">           if (NS_FAILED(rv))</span>
<a href="#l8.529"></a><span id="l8.529" class="difflineminus">-            return (Error(POP3_MESSAGE_WRITE_ERROR));</span>
<a href="#l8.530"></a><span id="l8.530" class="difflineplus">+            return Error(&quot;pop3MessageWriteError&quot;);</span>
<a href="#l8.531"></a><span id="l8.531"> </span>
<a href="#l8.532"></a><span id="l8.532">           // buffer_size already includes MSG_LINEBREAK_LEN so</span>
<a href="#l8.533"></a><span id="l8.533">           // subtract and add CRLF</span>
<a href="#l8.534"></a><span id="l8.534">           // but not really sure we always had CRLF in input since</span>
<a href="#l8.535"></a><span id="l8.535">           // we also treat a single LF as line ending!</span>
<a href="#l8.536"></a><span id="l8.536">           m_pop3ConData-&gt;parsed_bytes += buffer_size - MSG_LINEBREAK_LEN + 2;</span>
<a href="#l8.537"></a><span id="l8.537">         }</span>
<a href="#l8.538"></a><span id="l8.538"> </span>
<a href="#l8.539"></a><span id="l8.539" class="difflineat">@@ -3324,19 +3326,19 @@ nsPop3Protocol::RetrResponse(nsIInputStr</span>
<a href="#l8.540"></a><span id="l8.540"> </span>
<a href="#l8.541"></a><span id="l8.541">         // The following was added to prevent the loss of Data when we try</span>
<a href="#l8.542"></a><span id="l8.542">         // and write to somewhere we don't have write access error to (See</span>
<a href="#l8.543"></a><span id="l8.543">         // bug 62480)</span>
<a href="#l8.544"></a><span id="l8.544">         // (Note: This is only a temp hack until the underlying XPCOM is</span>
<a href="#l8.545"></a><span id="l8.545">         // fixed to return errors)</span>
<a href="#l8.546"></a><span id="l8.546"> </span>
<a href="#l8.547"></a><span id="l8.547">         if (NS_FAILED(rv))</span>
<a href="#l8.548"></a><span id="l8.548" class="difflineminus">-            return (Error((rv == NS_MSG_ERROR_COPYING_FROM_TMP_DOWNLOAD)</span>
<a href="#l8.549"></a><span id="l8.549" class="difflineminus">-                           ? POP3_TMP_DOWNLOAD_FAILED</span>
<a href="#l8.550"></a><span id="l8.550" class="difflineminus">-                           : POP3_MESSAGE_WRITE_ERROR));</span>
<a href="#l8.551"></a><span id="l8.551" class="difflineplus">+            return Error((rv == NS_MSG_ERROR_COPYING_FROM_TMP_DOWNLOAD) ?</span>
<a href="#l8.552"></a><span id="l8.552" class="difflineplus">+                         &quot;pop3TmpDownloadError&quot; :</span>
<a href="#l8.553"></a><span id="l8.553" class="difflineplus">+                         &quot;pop3MessageWriteError&quot;);</span>
<a href="#l8.554"></a><span id="l8.554"> </span>
<a href="#l8.555"></a><span id="l8.555">         m_pop3ConData-&gt;msg_closure = nullptr;</span>
<a href="#l8.556"></a><span id="l8.556">     }</span>
<a href="#l8.557"></a><span id="l8.557"> </span>
<a href="#l8.558"></a><span id="l8.558">     if (!m_pop3ConData-&gt;msg_closure)</span>
<a href="#l8.559"></a><span id="l8.559">         /* meaning _handle_line read &quot;.\r\n&quot; at end-of-msg */</span>
<a href="#l8.560"></a><span id="l8.560">     {</span>
<a href="#l8.561"></a><span id="l8.561">         m_pop3ConData-&gt;pause_for_read = false;</span>
<a href="#l8.562"></a><span id="l8.562" class="difflineat">@@ -3425,17 +3427,19 @@ nsPop3Protocol::TopResponse(nsIInputStre</span>
<a href="#l8.563"></a><span id="l8.563">   /* TOP doesn't work so we can't retrieve the first part of this msg.</span>
<a href="#l8.564"></a><span id="l8.564">   So just go download the whole thing, and warn the user.</span>
<a href="#l8.565"></a><span id="l8.565"> </span>
<a href="#l8.566"></a><span id="l8.566">     Note that the progress bar will not be accurate in this case.</span>
<a href="#l8.567"></a><span id="l8.567">     Oops. #### */</span>
<a href="#l8.568"></a><span id="l8.568">     m_pop3ConData-&gt;truncating_cur_msg = false;</span>
<a href="#l8.569"></a><span id="l8.569"> </span>
<a href="#l8.570"></a><span id="l8.570">     nsString statusTemplate;</span>
<a href="#l8.571"></a><span id="l8.571" class="difflineminus">-    mLocalBundle-&gt;GetStringFromID(POP3_SERVER_DOES_NOT_SUPPORT_THE_TOP_COMMAND, getter_Copies(statusTemplate));</span>
<a href="#l8.572"></a><span id="l8.572" class="difflineplus">+    mLocalBundle-&gt;GetStringFromName(</span>
<a href="#l8.573"></a><span id="l8.573" class="difflineplus">+      NS_LITERAL_STRING(&quot;pop3ServerDoesNotSupportTopCommand&quot;).get(),</span>
<a href="#l8.574"></a><span id="l8.574" class="difflineplus">+      getter_Copies(statusTemplate));</span>
<a href="#l8.575"></a><span id="l8.575">     if (!statusTemplate.IsEmpty())</span>
<a href="#l8.576"></a><span id="l8.576">     {</span>
<a href="#l8.577"></a><span id="l8.577">       nsAutoCString hostName;</span>
<a href="#l8.578"></a><span id="l8.578">       PRUnichar * statusString = nullptr;</span>
<a href="#l8.579"></a><span id="l8.579">       m_url-&gt;GetHost(hostName);</span>
<a href="#l8.580"></a><span id="l8.580"> </span>
<a href="#l8.581"></a><span id="l8.581">       statusString = nsTextFormatter::smprintf(statusTemplate.get(), hostName.get());</span>
<a href="#l8.582"></a><span id="l8.582">       UpdateStatusWithString(statusString);</span>
<a href="#l8.583"></a><span id="l8.583" class="difflineat">@@ -3491,22 +3495,22 @@ nsPop3Protocol::HandleLine(char *line, u</span>
<a href="#l8.584"></a><span id="l8.584">               m_pop3ConData-&gt;truncating_cur_msg ? m_pop3ConData-&gt;cur_msg_size : 0);</span>
<a href="#l8.585"></a><span id="l8.585"> </span>
<a href="#l8.586"></a><span id="l8.586">             // The following was added to prevent the loss of Data when we try</span>
<a href="#l8.587"></a><span id="l8.587">             // and write to somewhere we don't have write access error to (See</span>
<a href="#l8.588"></a><span id="l8.588">             // bug 62480)</span>
<a href="#l8.589"></a><span id="l8.589">             // (Note: This is only a temp hack until the underlying XPCOM is</span>
<a href="#l8.590"></a><span id="l8.590">             // fixed to return errors)</span>
<a href="#l8.591"></a><span id="l8.591"> </span>
<a href="#l8.592"></a><span id="l8.592" class="difflineminus">-            if (NS_FAILED(rv))</span>
<a href="#l8.593"></a><span id="l8.593" class="difflineminus">-              // XXX Error() returns -1, which is not a valid nsresult</span>
<a href="#l8.594"></a><span id="l8.594" class="difflineminus">-              return static_cast&lt;nsresult&gt;(Error(</span>
<a href="#l8.595"></a><span id="l8.595" class="difflineminus">-                             (rv == NS_MSG_ERROR_COPYING_FROM_TMP_DOWNLOAD)</span>
<a href="#l8.596"></a><span id="l8.596" class="difflineminus">-                             ? POP3_TMP_DOWNLOAD_FAILED</span>
<a href="#l8.597"></a><span id="l8.597" class="difflineminus">-                             : POP3_MESSAGE_WRITE_ERROR));</span>
<a href="#l8.598"></a><span id="l8.598" class="difflineplus">+            if (NS_FAILED(rv)) {</span>
<a href="#l8.599"></a><span id="l8.599" class="difflineplus">+              Error((rv == NS_MSG_ERROR_COPYING_FROM_TMP_DOWNLOAD) ?</span>
<a href="#l8.600"></a><span id="l8.600" class="difflineplus">+                    &quot;pop3TmpDownloadError&quot; :</span>
<a href="#l8.601"></a><span id="l8.601" class="difflineplus">+                    &quot;pop3MessageWriteError&quot;);</span>
<a href="#l8.602"></a><span id="l8.602" class="difflineplus">+              return rv;</span>
<a href="#l8.603"></a><span id="l8.603" class="difflineplus">+            }</span>
<a href="#l8.604"></a><span id="l8.604"> </span>
<a href="#l8.605"></a><span id="l8.605">             m_pop3ConData-&gt;msg_closure = nullptr;</span>
<a href="#l8.606"></a><span id="l8.606">             return rv;</span>
<a href="#l8.607"></a><span id="l8.607">         }</span>
<a href="#l8.608"></a><span id="l8.608">     }</span>
<a href="#l8.609"></a><span id="l8.609">     /* Check if the line begins with the termination octet. If so</span>
<a href="#l8.610"></a><span id="l8.610">        and if another termination octet follows, we step over the</span>
<a href="#l8.611"></a><span id="l8.611">        first occurence of it. */</span>
<a href="#l8.612"></a><span id="l8.612" class="difflineat">@@ -3539,17 +3543,17 @@ int32_t nsPop3Protocol::DeleResponse()</span>
<a href="#l8.613"></a><span id="l8.613"> {</span>
<a href="#l8.614"></a><span id="l8.614">   Pop3UidlHost *host = NULL;</span>
<a href="#l8.615"></a><span id="l8.615"> </span>
<a href="#l8.616"></a><span id="l8.616">   host = m_pop3ConData-&gt;uidlinfo;</span>
<a href="#l8.617"></a><span id="l8.617"> </span>
<a href="#l8.618"></a><span id="l8.618">   /* the return from the delete will come here</span>
<a href="#l8.619"></a><span id="l8.619">   */</span>
<a href="#l8.620"></a><span id="l8.620">   if(!m_pop3ConData-&gt;command_succeeded)</span>
<a href="#l8.621"></a><span id="l8.621" class="difflineminus">-    return(Error(POP3_DELE_FAILURE));</span>
<a href="#l8.622"></a><span id="l8.622" class="difflineplus">+    return Error(&quot;pop3DeleFailure&quot;);</span>
<a href="#l8.623"></a><span id="l8.623"> </span>
<a href="#l8.624"></a><span id="l8.624"> </span>
<a href="#l8.625"></a><span id="l8.625">   /*  ###chrisf</span>
<a href="#l8.626"></a><span id="l8.626">   the delete succeeded.  Write out state so that we</span>
<a href="#l8.627"></a><span id="l8.627">   keep track of all the deletes which have not yet been</span>
<a href="#l8.628"></a><span id="l8.628">   committed on the server.  Flush this state upon successful</span>
<a href="#l8.629"></a><span id="l8.629">   QUIT.</span>
<a href="#l8.630"></a><span id="l8.630"> </span>
<a href="#l8.631"></a><span id="l8.631" class="difflineat">@@ -3660,18 +3664,18 @@ nsresult nsPop3Protocol::ProcessProtocol</span>
<a href="#l8.632"></a><span id="l8.632">   PR_LOG(POP3LOGMODULE, PR_LOG_ALWAYS, (&quot;Entering NET_ProcessPop3 %d&quot;,</span>
<a href="#l8.633"></a><span id="l8.633">     aLength));</span>
<a href="#l8.634"></a><span id="l8.634"> </span>
<a href="#l8.635"></a><span id="l8.635">   m_pop3ConData-&gt;pause_for_read = false; /* already paused; reset */</span>
<a href="#l8.636"></a><span id="l8.636"> </span>
<a href="#l8.637"></a><span id="l8.637">   if(m_username.IsEmpty())</span>
<a href="#l8.638"></a><span id="l8.638">   {</span>
<a href="#l8.639"></a><span id="l8.639">     // net_pop3_block = false;</span>
<a href="#l8.640"></a><span id="l8.640" class="difflineminus">-    // XXX Error() returns -1, which is not a valid nsresult</span>
<a href="#l8.641"></a><span id="l8.641" class="difflineminus">-    return static_cast&lt;nsresult&gt;(Error(POP3_USERNAME_UNDEFINED));</span>
<a href="#l8.642"></a><span id="l8.642" class="difflineplus">+    Error(&quot;pop3UsernameUndefined&quot;);</span>
<a href="#l8.643"></a><span id="l8.643" class="difflineplus">+    return NS_MSG_SERVER_USERNAME_MISSING;</span>
<a href="#l8.644"></a><span id="l8.644">   }</span>
<a href="#l8.645"></a><span id="l8.645"> </span>
<a href="#l8.646"></a><span id="l8.646">   while(!m_pop3ConData-&gt;pause_for_read)</span>
<a href="#l8.647"></a><span id="l8.647">   {</span>
<a href="#l8.648"></a><span id="l8.648">     PR_LOG(POP3LOGMODULE, PR_LOG_ALWAYS,</span>
<a href="#l8.649"></a><span id="l8.649">       (&quot;POP3: Entering state: %d&quot;, m_pop3ConData-&gt;next_state));</span>
<a href="#l8.650"></a><span id="l8.650"> </span>
<a href="#l8.651"></a><span id="l8.651">     switch(m_pop3ConData-&gt;next_state)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mailnews/local/src/nsPop3Protocol.h</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mailnews/local/src/nsPop3Protocol.h</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -40,17 +40,16 @@ and change the POP3_QUIT_RESPONSE state </span>
<a href="#l9.4"></a><span id="l9.4">  * #ifdef POP_ALWAYS_USE_UIDL_FOR_DUPLICATES will always be evaluated</span>
<a href="#l9.5"></a><span id="l9.5">  * as true.</span>
<a href="#l9.6"></a><span id="l9.6">  *</span>
<a href="#l9.7"></a><span id="l9.7"> #define POP_ALWAYS_USE_UIDL_FOR_DUPLICATES 0</span>
<a href="#l9.8"></a><span id="l9.8">  *</span>
<a href="#l9.9"></a><span id="l9.9">  */</span>
<a href="#l9.10"></a><span id="l9.10"> </span>
<a href="#l9.11"></a><span id="l9.11"> #define MK_OUT_OF_MEMORY -207</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-#define MK_POP3_OUT_OF_DISK_SPACE -321</span>
<a href="#l9.13"></a><span id="l9.13"> #define MK_POP3_PASSWORD_UNDEFINED -313</span>
<a href="#l9.14"></a><span id="l9.14"> #define XP_NO_ANSWER 14401</span>
<a href="#l9.15"></a><span id="l9.15"> #define XP_THE_PREVIOUSLY_ENTERED_PASSWORD_IS_INVALID_ETC 14405</span>
<a href="#l9.16"></a><span id="l9.16"> #define XP_PASSWORD_FOR_POP3_USER 14590</span>
<a href="#l9.17"></a><span id="l9.17"> </span>
<a href="#l9.18"></a><span id="l9.18"> #define OUTPUT_BUFFER_SIZE 8192 // maximum size of command string</span>
<a href="#l9.19"></a><span id="l9.19"> </span>
<a href="#l9.20"></a><span id="l9.20"> /* structure to hold data pertaining to the active state of</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineat">@@ -350,17 +349,17 @@ private:</span>
<a href="#l9.22"></a><span id="l9.22"> </span>
<a href="#l9.23"></a><span id="l9.23">   //////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l9.24"></a><span id="l9.24">       // Begin Pop3 protocol state handlers</span>
<a href="#l9.25"></a><span id="l9.25">       //////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l9.26"></a><span id="l9.26">   int32_t WaitForStartOfConnectionResponse(nsIInputStream* inputStream,</span>
<a href="#l9.27"></a><span id="l9.27">                                            uint32_t length);</span>
<a href="#l9.28"></a><span id="l9.28">   int32_t WaitForResponse(nsIInputStream* inputStream,</span>
<a href="#l9.29"></a><span id="l9.29">                           uint32_t length);</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineminus">-  int32_t Error(int32_t err_code);</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineplus">+  int32_t Error(const char* err_code);</span>
<a href="#l9.32"></a><span id="l9.32">   int32_t SendAuth();</span>
<a href="#l9.33"></a><span id="l9.33">   int32_t AuthResponse(nsIInputStream* inputStream, uint32_t length);</span>
<a href="#l9.34"></a><span id="l9.34">   int32_t SendCapa();</span>
<a href="#l9.35"></a><span id="l9.35">   int32_t CapaResponse(nsIInputStream* inputStream, uint32_t length);</span>
<a href="#l9.36"></a><span id="l9.36">   int32_t SendTLSResponse();</span>
<a href="#l9.37"></a><span id="l9.37">   int32_t ProcessAuth();</span>
<a href="#l9.38"></a><span id="l9.38">   int32_t NextAuthStep();</span>
<a href="#l9.39"></a><span id="l9.39">   int32_t AuthLogin();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mailnews/local/src/nsPop3Service.cpp</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mailnews/local/src/nsPop3Service.cpp</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -24,17 +24,16 @@</span>
<a href="#l10.4"></a><span id="l10.4"> #include &quot;nsMailDirServiceDefs.h&quot;</span>
<a href="#l10.5"></a><span id="l10.5"> #include &quot;prprf.h&quot;</span>
<a href="#l10.6"></a><span id="l10.6"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l10.7"></a><span id="l10.7"> #include &quot;nsIMsgAccountManager.h&quot;</span>
<a href="#l10.8"></a><span id="l10.8"> #include &quot;nsIMsgAccount.h&quot;</span>
<a href="#l10.9"></a><span id="l10.9"> #include &quot;nsLocalMailFolder.h&quot;</span>
<a href="#l10.10"></a><span id="l10.10"> #include &quot;nsIMailboxUrl.h&quot;</span>
<a href="#l10.11"></a><span id="l10.11"> #include &quot;nsIPrompt.h&quot;</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-#include &quot;nsLocalStrings.h&quot;</span>
<a href="#l10.13"></a><span id="l10.13"> #include &quot;nsINetUtil.h&quot;</span>
<a href="#l10.14"></a><span id="l10.14"> #include &quot;nsComponentManagerUtils.h&quot;</span>
<a href="#l10.15"></a><span id="l10.15"> #include &quot;nsServiceManagerUtils.h&quot;</span>
<a href="#l10.16"></a><span id="l10.16"> #include &quot;mozilla/Services.h&quot;</span>
<a href="#l10.17"></a><span id="l10.17"> </span>
<a href="#l10.18"></a><span id="l10.18"> #define PREF_MAIL_ROOT_POP3 &quot;mail.root.pop3&quot;        // old - for backward compatibility only</span>
<a href="#l10.19"></a><span id="l10.19"> #define PREF_MAIL_ROOT_POP3_REL &quot;mail.root.pop3-rel&quot;</span>
<a href="#l10.20"></a><span id="l10.20"> </span>
<a href="#l10.21"></a><span id="l10.21" class="difflineat">@@ -450,17 +449,19 @@ void nsPop3Service::AlertServerBusy(nsIM</span>
<a href="#l10.22"></a><span id="l10.22">   rv = url-&gt;GetMsgWindow(getter_AddRefs(msgWindow)); //it is ok to have null msgWindow, for example when biffing</span>
<a href="#l10.23"></a><span id="l10.23">   if (NS_FAILED(rv) || !msgWindow)</span>
<a href="#l10.24"></a><span id="l10.24">     return;</span>
<a href="#l10.25"></a><span id="l10.25"> </span>
<a href="#l10.26"></a><span id="l10.26">   rv = msgWindow-&gt;GetPromptDialog(getter_AddRefs(dialog));</span>
<a href="#l10.27"></a><span id="l10.27">   NS_ENSURE_SUCCESS(rv, void(0));</span>
<a href="#l10.28"></a><span id="l10.28"> </span>
<a href="#l10.29"></a><span id="l10.29">   nsString alertString;</span>
<a href="#l10.30"></a><span id="l10.30" class="difflineminus">-  bundle-&gt;GetStringFromID(POP3_MESSAGE_FOLDER_BUSY, getter_Copies(alertString));</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineplus">+  bundle-&gt;GetStringFromName(</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+    NS_LITERAL_STRING(&quot;pop3MessageFolderBusy&quot;).get(),</span>
<a href="#l10.33"></a><span id="l10.33" class="difflineplus">+    getter_Copies(alertString));</span>
<a href="#l10.34"></a><span id="l10.34">   if (!alertString.IsEmpty())</span>
<a href="#l10.35"></a><span id="l10.35">     dialog-&gt;Alert(nullptr, alertString.get());</span>
<a href="#l10.36"></a><span id="l10.36"> }</span>
<a href="#l10.37"></a><span id="l10.37"> </span>
<a href="#l10.38"></a><span id="l10.38"> NS_IMETHODIMP nsPop3Service::NewChannel(nsIURI *aURI, nsIChannel **_retval)</span>
<a href="#l10.39"></a><span id="l10.39"> {</span>
<a href="#l10.40"></a><span id="l10.40">   NS_ENSURE_ARG_POINTER(aURI);</span>
<a href="#l10.41"></a><span id="l10.41">   nsresult rv;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mailnews/local/src/nsPop3Sink.cpp</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mailnews/local/src/nsPop3Sink.cpp</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -32,17 +32,16 @@</span>
<a href="#l11.4"></a><span id="l11.4"> #include &quot;nsIPromptService.h&quot;</span>
<a href="#l11.5"></a><span id="l11.5"> #include &quot;nsIInterfaceRequestor.h&quot;</span>
<a href="#l11.6"></a><span id="l11.6"> #include &quot;nsIInterfaceRequestorUtils.h&quot;</span>
<a href="#l11.7"></a><span id="l11.7"> #include &quot;nsIDocShell.h&quot;</span>
<a href="#l11.8"></a><span id="l11.8"> #include &quot;nsIDOMWindow.h&quot;</span>
<a href="#l11.9"></a><span id="l11.9"> #include &quot;nsEmbedCID.h&quot;</span>
<a href="#l11.10"></a><span id="l11.10"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l11.11"></a><span id="l11.11"> #include &quot;nsMsgBaseCID.h&quot;</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-#include &quot;nsLocalStrings.h&quot;</span>
<a href="#l11.13"></a><span id="l11.13"> #include &quot;nsServiceManagerUtils.h&quot;</span>
<a href="#l11.14"></a><span id="l11.14"> #include &quot;nsIPop3Service.h&quot;</span>
<a href="#l11.15"></a><span id="l11.15"> #include &quot;nsMsgLocalCID.h&quot;</span>
<a href="#l11.16"></a><span id="l11.16"> #include &quot;mozilla/Services.h&quot;</span>
<a href="#l11.17"></a><span id="l11.17"> </span>
<a href="#l11.18"></a><span id="l11.18"> extern PRLogModuleInfo *POP3LOGMODULE;</span>
<a href="#l11.19"></a><span id="l11.19"> </span>
<a href="#l11.20"></a><span id="l11.20"> NS_IMPL_THREADSAFE_ISUPPORTS1(nsPop3Sink, nsIPop3Sink)</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineat">@@ -739,17 +738,19 @@ nsresult nsPop3Sink::HandleTempDownloadF</span>
<a href="#l11.22"></a><span id="l11.22">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l11.23"></a><span id="l11.23">   rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/localMsgs.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l11.24"></a><span id="l11.24">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l11.25"></a><span id="l11.25">   nsString fromStr, subjectStr, confirmString;</span>
<a href="#l11.26"></a><span id="l11.26"> </span>
<a href="#l11.27"></a><span id="l11.27">   m_newMailParser-&gt;m_newMsgHdr-&gt;GetMime2DecodedSubject(subjectStr);</span>
<a href="#l11.28"></a><span id="l11.28">   m_newMailParser-&gt;m_newMsgHdr-&gt;GetMime2DecodedAuthor(fromStr);</span>
<a href="#l11.29"></a><span id="l11.29">   const PRUnichar *params[] = { fromStr.get(), subjectStr.get() };</span>
<a href="#l11.30"></a><span id="l11.30" class="difflineminus">-  bundle-&gt;FormatStringFromID(POP3_TMP_DOWNLOAD_FAILED, params, 2, getter_Copies(confirmString));</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineplus">+  bundle-&gt;FormatStringFromName(</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+    NS_LITERAL_STRING(&quot;pop3TmpDownloadError&quot;).get(),</span>
<a href="#l11.33"></a><span id="l11.33" class="difflineplus">+    params, 2, getter_Copies(confirmString));</span>
<a href="#l11.34"></a><span id="l11.34">   nsCOMPtr&lt;nsIDOMWindow&gt; parentWindow;</span>
<a href="#l11.35"></a><span id="l11.35">   nsCOMPtr&lt;nsIPromptService&gt; promptService = do_GetService(NS_PROMPTSERVICE_CONTRACTID);</span>
<a href="#l11.36"></a><span id="l11.36">   nsCOMPtr&lt;nsIDocShell&gt; docShell;</span>
<a href="#l11.37"></a><span id="l11.37">   if (msgWindow)</span>
<a href="#l11.38"></a><span id="l11.38">   {</span>
<a href="#l11.39"></a><span id="l11.39">     (void) msgWindow-&gt;GetRootDocShell(getter_AddRefs(docShell));</span>
<a href="#l11.40"></a><span id="l11.40">     parentWindow = do_QueryInterface(docShell);</span>
<a href="#l11.41"></a><span id="l11.41">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/suite/locales/en-US/chrome/mailnews/localMsgs.properties</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/mailnews/localMsgs.properties</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -14,211 +14,131 @@ pop3EnterPasswordPromptTitle=Enter your </span>
<a href="#l12.4"></a><span id="l12.4"> pop3EnterPasswordPrompt=Enter your password for %1$S on %2$S:</span>
<a href="#l12.5"></a><span id="l12.5"> </span>
<a href="#l12.6"></a><span id="l12.6"> # LOCALIZATION NOTE(pop3PreviouslyEnteredPasswordIsInvalidPrompt): Do not</span>
<a href="#l12.7"></a><span id="l12.7"> # translate the words &quot;%1$S&quot; and &quot;%2$S&quot; below. Place the word %1$S where the</span>
<a href="#l12.8"></a><span id="l12.8"> # user name should appear, and %2$S where the host name should appear.</span>
<a href="#l12.9"></a><span id="l12.9"> pop3PreviouslyEnteredPasswordIsInvalidPrompt=Please enter a new password for user %1$S on %2$S:</span>
<a href="#l12.10"></a><span id="l12.10"> </span>
<a href="#l12.11"></a><span id="l12.11"> # Status - Downloading message n of m to account</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-## @name receivingMsgs</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineminus">-## @loc None</span>
<a href="#l12.14"></a><span id="l12.14"> #LOCALIZATION NOTE (receivingMsgs): Do not translate %1$S, %2$S, or %3$S in the following lines.</span>
<a href="#l12.15"></a><span id="l12.15"> # Place the word %1$S where the number of messages downloaded so far should appear.</span>
<a href="#l12.16"></a><span id="l12.16"> # Place the word %2$S where the total number of messages to receive should appear;</span>
<a href="#l12.17"></a><span id="l12.17"> # Place %3$S where the account name should appear.</span>
<a href="#l12.18"></a><span id="l12.18"> receivingMsgs=Downloading message %1$S of %2$S to %3$S</span>
<a href="#l12.19"></a><span id="l12.19"> </span>
<a href="#l12.20"></a><span id="l12.20"> # Status - connecting to host</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineminus">-## @name hostContacted</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineminus">-## @loc None</span>
<a href="#l12.23"></a><span id="l12.23"> #LOCALIZATION NOTE : Do not translate %1$S in the following line.</span>
<a href="#l12.24"></a><span id="l12.24"> # Place %1$S where the account name should appear</span>
<a href="#l12.25"></a><span id="l12.25"> hostContacted=Connect: Host for %1$S contacted, sending login information…</span>
<a href="#l12.26"></a><span id="l12.26"> </span>
<a href="#l12.27"></a><span id="l12.27"> # Status - no messages to download </span>
<a href="#l12.28"></a><span id="l12.28" class="difflineminus">-## @name noMessages</span>
<a href="#l12.29"></a><span id="l12.29" class="difflineminus">-## @loc None</span>
<a href="#l12.30"></a><span id="l12.30"> #LOCALIZATION NOTE : Do not translate %1$S in the following line.</span>
<a href="#l12.31"></a><span id="l12.31"> # Place %1$S where the account name should appear</span>
<a href="#l12.32"></a><span id="l12.32"> noMessages=There are no new messages for %1$S.</span>
<a href="#l12.33"></a><span id="l12.33"> </span>
<a href="#l12.34"></a><span id="l12.34"> # Status - messages received after the download</span>
<a href="#l12.35"></a><span id="l12.35" class="difflineminus">-## @name receivedMessages</span>
<a href="#l12.36"></a><span id="l12.36" class="difflineminus">-## @loc None</span>
<a href="#l12.37"></a><span id="l12.37"> #LOCALIZATION NOTE : Do not translate %1$S, %2$S or %3$S in the following line.</span>
<a href="#l12.38"></a><span id="l12.38"> # %1$S will receive the number of messages received</span>
<a href="#l12.39"></a><span id="l12.39"> # %2$S will receive the total number of messages</span>
<a href="#l12.40"></a><span id="l12.40"> # Place %3$S where the account name should appear</span>
<a href="#l12.41"></a><span id="l12.41"> receivedMessages=%3$S Received %1$S of %2$S messages</span>
<a href="#l12.42"></a><span id="l12.42"> </span>
<a href="#l12.43"></a><span id="l12.43" class="difflineminus">-## @name MK_POP3_OUT_OF_DISK_SPACE</span>
<a href="#l12.44"></a><span id="l12.44" class="difflineminus">-## @loc None</span>
<a href="#l12.45"></a><span id="l12.45" class="difflineminus">--321=There is not enough disk space to download new messages. Try deleting old mail, emptying the Trash folder, and compacting your mail folders, and then try again.</span>
<a href="#l12.46"></a><span id="l12.46" class="difflineplus">+pop3OutOfDiskSpace=There is not enough disk space to download new messages. Try deleting old mail, emptying the Trash folder, and compacting your mail folders, and then try again.</span>
<a href="#l12.47"></a><span id="l12.47"> </span>
<a href="#l12.48"></a><span id="l12.48"> # Status - parsing folder</span>
<a href="#l12.49"></a><span id="l12.49" class="difflineminus">-## @name LOCAL_STATUS_SELECTING_MAILBOX</span>
<a href="#l12.50"></a><span id="l12.50" class="difflineminus">-## @loc None</span>
<a href="#l12.51"></a><span id="l12.51" class="difflineminus">-#LOCALIZATION NOTE (4000): Do not translate %s in the following line.</span>
<a href="#l12.52"></a><span id="l12.52" class="difflineminus">-# Place the word %s where the name of the mailbox should appear</span>
<a href="#l12.53"></a><span id="l12.53" class="difflineminus">-4000=Building summary file for %S…</span>
<a href="#l12.54"></a><span id="l12.54" class="difflineplus">+#LOCALIZATION NOTE (buildingSummary): Do not translate %S in the following line.</span>
<a href="#l12.55"></a><span id="l12.55" class="difflineplus">+# Place the word %S where the name of the mailbox should appear</span>
<a href="#l12.56"></a><span id="l12.56" class="difflineplus">+buildingSummary=Building summary file for %S…</span>
<a href="#l12.57"></a><span id="l12.57"> </span>
<a href="#l12.58"></a><span id="l12.58"> # Status - parsing folder</span>
<a href="#l12.59"></a><span id="l12.59" class="difflineminus">-## @name LOCAL_STATUS_DOCUMENT_DONE</span>
<a href="#l12.60"></a><span id="l12.60" class="difflineminus">-## @loc None</span>
<a href="#l12.61"></a><span id="l12.61" class="difflineminus">-4001=Done</span>
<a href="#l12.62"></a><span id="l12.62" class="difflineplus">+localStatusDocumentDone=Done</span>
<a href="#l12.63"></a><span id="l12.63"> </span>
<a href="#l12.64"></a><span id="l12.64"> # Status - pop3 server error</span>
<a href="#l12.65"></a><span id="l12.65" class="difflineminus">-## @name POP3_SERVER_ERROR</span>
<a href="#l12.66"></a><span id="l12.66" class="difflineminus">-## @loc None</span>
<a href="#l12.67"></a><span id="l12.67" class="difflineminus">-#LOCALIZATION NOTE (4003): Do not translate POP3 in the following line.</span>
<a href="#l12.68"></a><span id="l12.68" class="difflineminus">-4003=An error occurred with the POP3 mail server.</span>
<a href="#l12.69"></a><span id="l12.69" class="difflineplus">+#LOCALIZATION NOTE (pop3ServerError): Do not translate POP3 in the following line.</span>
<a href="#l12.70"></a><span id="l12.70" class="difflineplus">+pop3ServerError=An error occurred with the POP3 mail server.</span>
<a href="#l12.71"></a><span id="l12.71"> </span>
<a href="#l12.72"></a><span id="l12.72"> # Status - pop3 user name failed</span>
<a href="#l12.73"></a><span id="l12.73" class="difflineminus">-## @name POP3_USERNAME_FAILURE</span>
<a href="#l12.74"></a><span id="l12.74" class="difflineminus">-## @loc None</span>
<a href="#l12.75"></a><span id="l12.75" class="difflineminus">-4004=Sending of username did not succeed.</span>
<a href="#l12.76"></a><span id="l12.76" class="difflineplus">+pop3UsernameFailure=Sending of username did not succeed.</span>
<a href="#l12.77"></a><span id="l12.77"> </span>
<a href="#l12.78"></a><span id="l12.78"> # Status - password failed</span>
<a href="#l12.79"></a><span id="l12.79" class="difflineminus">-## @name POP3_PASSWORD_FAILURE</span>
<a href="#l12.80"></a><span id="l12.80" class="difflineminus">-## @loc None</span>
<a href="#l12.81"></a><span id="l12.81" class="difflineminus">-4005=Sending of password did not succeed.</span>
<a href="#l12.82"></a><span id="l12.82" class="difflineminus">-</span>
<a href="#l12.83"></a><span id="l12.83" class="difflineminus">-# Status - write error occurred</span>
<a href="#l12.84"></a><span id="l12.84" class="difflineminus">-## @name POP3_MESSAGE_WRITE_ERROR</span>
<a href="#l12.85"></a><span id="l12.85" class="difflineminus">-## @loc None</span>
<a href="#l12.86"></a><span id="l12.86" class="difflineminus">-4006=Unable to write the email to the mailbox. Make sure the file system allows you write privileges, and you have enough disk space to copy the mailbox.</span>
<a href="#l12.87"></a><span id="l12.87" class="difflineplus">+pop3PasswordFailure=Sending of password did not succeed.</span>
<a href="#l12.88"></a><span id="l12.88"> </span>
<a href="#l12.89"></a><span id="l12.89"> # Status - write error occurred</span>
<a href="#l12.90"></a><span id="l12.90" class="difflineminus">-## @name POP3_MESSAGE_FOLDER_BUSY</span>
<a href="#l12.91"></a><span id="l12.91" class="difflineminus">-## @loc None</span>
<a href="#l12.92"></a><span id="l12.92" class="difflineminus">-4029=This folder is being processed. Please wait until processing is complete to get messages.</span>
<a href="#l12.93"></a><span id="l12.93" class="difflineplus">+pop3MessageWriteError=Unable to write the email to the mailbox. Make sure the file system allows you write privileges, and you have enough disk space to copy the mailbox.</span>
<a href="#l12.94"></a><span id="l12.94" class="difflineplus">+</span>
<a href="#l12.95"></a><span id="l12.95" class="difflineplus">+# Status - write error occurred</span>
<a href="#l12.96"></a><span id="l12.96" class="difflineplus">+pop3MessageFolderBusy=This folder is being processed. Please wait until processing is complete to get messages.</span>
<a href="#l12.97"></a><span id="l12.97"> </span>
<a href="#l12.98"></a><span id="l12.98"> # Status - retr failure from the server</span>
<a href="#l12.99"></a><span id="l12.99" class="difflineminus">-## @name POP3_RETR_FAILURE</span>
<a href="#l12.100"></a><span id="l12.100" class="difflineminus">-## @loc None</span>
<a href="#l12.101"></a><span id="l12.101" class="difflineminus">-# LOCALIZATION NOTE(4012): Do not translate the word &quot;POP3&quot; below.</span>
<a href="#l12.102"></a><span id="l12.102" class="difflineminus">-4012=The RETR command did not succeed. Error retrieving a message.</span>
<a href="#l12.103"></a><span id="l12.103" class="difflineplus">+pop3RetrFailure=The RETR command did not succeed. Error retrieving a message.</span>
<a href="#l12.104"></a><span id="l12.104"> </span>
<a href="#l12.105"></a><span id="l12.105"> # Status - password undefined </span>
<a href="#l12.106"></a><span id="l12.106" class="difflineminus">-## @name POP3_PASSWORD_UNDEFINED</span>
<a href="#l12.107"></a><span id="l12.107" class="difflineminus">-## @loc None</span>
<a href="#l12.108"></a><span id="l12.108" class="difflineminus">-4013=Error getting mail password.</span>
<a href="#l12.109"></a><span id="l12.109" class="difflineplus">+pop3PasswordUndefined=Error getting mail password.</span>
<a href="#l12.110"></a><span id="l12.110"> </span>
<a href="#l12.111"></a><span id="l12.111"> # Status - username undefined </span>
<a href="#l12.112"></a><span id="l12.112" class="difflineminus">-## @name POP3_USERNAME_UNDEFINED</span>
<a href="#l12.113"></a><span id="l12.113" class="difflineminus">-## @loc None</span>
<a href="#l12.114"></a><span id="l12.114" class="difflineminus">-4014=You have not supplied a username for this server.  Please provide one in the account setup menu and try again.</span>
<a href="#l12.115"></a><span id="l12.115" class="difflineplus">+pop3UsernameUndefined=You have not supplied a username for this server.  Please provide one in the account setup menu and try again.</span>
<a href="#l12.116"></a><span id="l12.116"> </span>
<a href="#l12.117"></a><span id="l12.117"> # Status - list failure</span>
<a href="#l12.118"></a><span id="l12.118" class="difflineminus">-## @name POP3_LIST_FAILURE</span>
<a href="#l12.119"></a><span id="l12.119" class="difflineminus">-## @loc None</span>
<a href="#l12.120"></a><span id="l12.120" class="difflineminus">-# LOCALIZATION NOTE(4015): Do not translate the word &quot;POP3&quot; below.</span>
<a href="#l12.121"></a><span id="l12.121" class="difflineminus">-4015=The LIST command did not succeed. Error getting the ID and size of a message.</span>
<a href="#l12.122"></a><span id="l12.122" class="difflineplus">+pop3ListFailure=The LIST command did not succeed. Error getting the ID and size of a message.</span>
<a href="#l12.123"></a><span id="l12.123"> </span>
<a href="#l12.124"></a><span id="l12.124"> # Status - delete error </span>
<a href="#l12.125"></a><span id="l12.125" class="difflineminus">-## @name POP3_DELE_FAILURE</span>
<a href="#l12.126"></a><span id="l12.126" class="difflineminus">-## @loc None</span>
<a href="#l12.127"></a><span id="l12.127" class="difflineminus">-# LOCALIZATION NOTE(4016): Do not translate the word &quot;POP3&quot; below.</span>
<a href="#l12.128"></a><span id="l12.128" class="difflineminus">-4016=The DELE command did not succeed. Error marking a message as deleted.</span>
<a href="#l12.129"></a><span id="l12.129" class="difflineplus">+pop3DeleFailure=The DELE command did not succeed. Error marking a message as deleted.</span>
<a href="#l12.130"></a><span id="l12.130"> </span>
<a href="#l12.131"></a><span id="l12.131"> # Status - stat failed</span>
<a href="#l12.132"></a><span id="l12.132" class="difflineminus">-## @name POP3_STAT</span>
<a href="#l12.133"></a><span id="l12.133" class="difflineminus">-## @loc None</span>
<a href="#l12.134"></a><span id="l12.134" class="difflineminus">-4024= The STAT command did not succeed. Error getting message number and sizes.</span>
<a href="#l12.135"></a><span id="l12.135" class="difflineminus">-</span>
<a href="#l12.136"></a><span id="l12.136" class="difflineminus">-## @name POP3_SERVER_SAID</span>
<a href="#l12.137"></a><span id="l12.137" class="difflineminus">-## @loc None</span>
<a href="#l12.138"></a><span id="l12.138" class="difflineminus">-4025= Mail server %S responded: </span>
<a href="#l12.139"></a><span id="l12.139" class="difflineplus">+pop3StatFail=The STAT command did not succeed. Error getting message number and sizes.</span>
<a href="#l12.140"></a><span id="l12.140"> </span>
<a href="#l12.141"></a><span id="l12.141" class="difflineminus">-## @name COPYING_MSGS_STATUS</span>
<a href="#l12.142"></a><span id="l12.142" class="difflineminus">-## @loc None</span>
<a href="#l12.143"></a><span id="l12.143" class="difflineminus">-4027=Copying %S of %S messages to %S</span>
<a href="#l12.144"></a><span id="l12.144" class="difflineplus">+#LOCALIZATION NOTE (pop3ServerSaid): Do not remove the leading space during translation.</span>
<a href="#l12.145"></a><span id="l12.145" class="difflineplus">+pop3ServerSaid= Mail server %S responded: </span>
<a href="#l12.146"></a><span id="l12.146"> </span>
<a href="#l12.147"></a><span id="l12.147" class="difflineminus">-## @name MOVING_MSGS_STATUS</span>
<a href="#l12.148"></a><span id="l12.148" class="difflineminus">-## @loc None</span>
<a href="#l12.149"></a><span id="l12.149" class="difflineminus">-4028=Moving %S of %S messages to %S</span>
<a href="#l12.150"></a><span id="l12.150" class="difflineplus">+copyingMessagesStatus=Copying %S of %S messages to %S</span>
<a href="#l12.151"></a><span id="l12.151"> </span>
<a href="#l12.152"></a><span id="l12.152" class="difflineminus">-## @name MOVEMAIL_CANT_OPEN_SPOOL_FILE</span>
<a href="#l12.153"></a><span id="l12.153" class="difflineminus">-## @loc None</span>
<a href="#l12.154"></a><span id="l12.154" class="difflineminus">-4033=Unable to open mail spool file %S.</span>
<a href="#l12.155"></a><span id="l12.155" class="difflineplus">+movingMessagesStatus=Moving %S of %S messages to %S</span>
<a href="#l12.156"></a><span id="l12.156"> </span>
<a href="#l12.157"></a><span id="l12.157" class="difflineminus">-## @name MOVEMAIL_CANT_CREATE_LOCK</span>
<a href="#l12.158"></a><span id="l12.158" class="difflineminus">-## @loc None</span>
<a href="#l12.159"></a><span id="l12.159" class="difflineminus">-4034=Unable to create lock file %S. For movemail to work, it is necessary to create lock files in the mail spool directory. On many systems, this is best accomplished by making the spool directory be mode 01777.</span>
<a href="#l12.160"></a><span id="l12.160" class="difflineplus">+movemailCantOpenSpoolFile=Unable to open mail spool file %S.</span>
<a href="#l12.161"></a><span id="l12.161"> </span>
<a href="#l12.162"></a><span id="l12.162" class="difflineminus">-## @name MOVEMAIL_CANT_DELETE_LOCK</span>
<a href="#l12.163"></a><span id="l12.163" class="difflineminus">-## @loc None</span>
<a href="#l12.164"></a><span id="l12.164" class="difflineminus">-4035=Unable to delete lock file %S.</span>
<a href="#l12.165"></a><span id="l12.165" class="difflineplus">+movemailCantCreateLock=Unable to create lock file %S. For movemail to work, it is necessary to create lock files in the mail spool directory. On many systems, this is best accomplished by making the spool directory be mode 01777.</span>
<a href="#l12.166"></a><span id="l12.166" class="difflineplus">+</span>
<a href="#l12.167"></a><span id="l12.167" class="difflineplus">+movemailCantDeleteLock=Unable to delete lock file %S.</span>
<a href="#l12.168"></a><span id="l12.168"> </span>
<a href="#l12.169"></a><span id="l12.169" class="difflineminus">-## @name MOVEMAIL_CANT_TRUNCATE_SPOOL_FILE</span>
<a href="#l12.170"></a><span id="l12.170" class="difflineminus">-## @loc None</span>
<a href="#l12.171"></a><span id="l12.171" class="difflineminus">-4036=Unable to truncate spool file %S.</span>
<a href="#l12.172"></a><span id="l12.172" class="difflineplus">+movemailCantTruncateSpoolFile=Unable to truncate spool file %S.</span>
<a href="#l12.173"></a><span id="l12.173"> </span>
<a href="#l12.174"></a><span id="l12.174" class="difflineminus">-## @name MOVEMAIL_SPOOL_FILE_NOT_FOUND</span>
<a href="#l12.175"></a><span id="l12.175" class="difflineminus">-## @loc None</span>
<a href="#l12.176"></a><span id="l12.176" class="difflineminus">-4037=Unable to locate mail spool file.</span>
<a href="#l12.177"></a><span id="l12.177" class="difflineplus">+movemailSpoolFileNotFound=Unable to locate mail spool file.</span>
<a href="#l12.178"></a><span id="l12.178"> </span>
<a href="#l12.179"></a><span id="l12.179" class="difflineminus">-## @name POP3_TMP_DOWNLOAD_FAILED</span>
<a href="#l12.180"></a><span id="l12.180" class="difflineminus">-## @loc None</span>
<a href="#l12.181"></a><span id="l12.181" class="difflineminus">-4038=There was an error downloading the following message:   \nFrom: %S\n   Subject: %S\n This message may contain a virus or there is not enough disk space. Skip this message?</span>
<a href="#l12.182"></a><span id="l12.182" class="difflineplus">+pop3TmpDownloadError=There was an error downloading the following message:   \nFrom: %S\n   Subject: %S\n This message may contain a virus or there is not enough disk space. Skip this message?</span>
<a href="#l12.183"></a><span id="l12.183"> </span>
<a href="#l12.184"></a><span id="l12.184"> # Status - the server doesn't support UIDL…</span>
<a href="#l12.185"></a><span id="l12.185" class="difflineminus">-## @name POP3_SERVER_DOES_NOT_SUPPORT_UIDL_ETC</span>
<a href="#l12.186"></a><span id="l12.186" class="difflineminus">-## @loc None</span>
<a href="#l12.187"></a><span id="l12.187" class="difflineminus">-# LOCALIZATION NOTE(4010): The following sentence should be translated in this way:</span>
<a href="#l12.188"></a><span id="l12.188" class="difflineplus">+# LOCALIZATION NOTE(pop3ServerDoesNotSupportUidlEtc): The following sentence should be translated in this way:</span>
<a href="#l12.189"></a><span id="l12.189"> # Do not translate &quot;POP3&quot;</span>
<a href="#l12.190"></a><span id="l12.190"> # Do not translate &quot;%S&quot;. Place %S in your translation where the name of the server should appear.</span>
<a href="#l12.191"></a><span id="l12.191"> # Do not translate &quot;UIDL&quot;</span>
<a href="#l12.192"></a><span id="l12.192" class="difflineminus">-4040=The POP3 mail server (%S) does not support UIDL or XTND XLST, which are required to implement the ``Leave on Server'', ``Maximum Message Size'' or ``Fetch Headers Only'' options. To download your mail, turn off these options in the Server Settings for your mail server in the Account Settings window.</span>
<a href="#l12.193"></a><span id="l12.193" class="difflineplus">+pop3ServerDoesNotSupportUidlEtc=The POP3 mail server (%S) does not support UIDL or XTND XLST, which are required to implement the ``Leave on Server'', ``Maximum Message Size'' or ``Fetch Headers Only'' options. To download your mail, turn off these options in the Server Settings for your mail server in the Account Settings window.</span>
<a href="#l12.194"></a><span id="l12.194"> </span>
<a href="#l12.195"></a><span id="l12.195"> # Status - the server doesn't support the top command</span>
<a href="#l12.196"></a><span id="l12.196" class="difflineminus">-## @name POP3_SERVER_DOES_NOT_SUPPORT_THE_TOP_COMMAND</span>
<a href="#l12.197"></a><span id="l12.197" class="difflineminus">-## @loc None</span>
<a href="#l12.198"></a><span id="l12.198" class="difflineminus">-# LOCALIZATION NOTE(4011): The following sentence should be translated in this way:</span>
<a href="#l12.199"></a><span id="l12.199" class="difflineplus">+# LOCALIZATION NOTE(pop3ServerDoesNotSupportTopCommand): The following sentence should be translated in this way:</span>
<a href="#l12.200"></a><span id="l12.200"> # Do not translate &quot;POP3&quot;</span>
<a href="#l12.201"></a><span id="l12.201"> # Do not translate &quot;%S&quot;. Place %S in your translation where the name of the server should appear.</span>
<a href="#l12.202"></a><span id="l12.202"> # Do not translate &quot;TOP&quot;</span>
<a href="#l12.203"></a><span id="l12.203" class="difflineminus">-4041=The POP3 mail server (%S) does not support the TOP command. Without server support for this, we cannot implement the ``Maximum Message Size'' or ``Fetch Headers Only'' preference.  This option has been disabled, and messages will be downloaded regardless of their size.</span>
<a href="#l12.204"></a><span id="l12.204" class="difflineplus">+pop3ServerDoesNotSupportTopCommand=The POP3 mail server (%S) does not support the TOP command. Without server support for this, we cannot implement the ``Maximum Message Size'' or ``Fetch Headers Only'' preference.  This option has been disabled, and messages will be downloaded regardless of their size.</span>
<a href="#l12.205"></a><span id="l12.205"> </span>
<a href="#l12.206"></a><span id="l12.206" class="difflineminus">-## @name NS_ERROR_COULD_NOT_CONNECT_VIA_TLS</span>
<a href="#l12.207"></a><span id="l12.207" class="difflineminus">-## @loc None</span>
<a href="#l12.208"></a><span id="l12.208" class="difflineminus">-4043=Unable to establish TLS connection to POP3 server. The server may be down or may be incorrectly configured. Please verify the correct configuration in the Server Settings for your mail server in the Account Settings window and try again.</span>
<a href="#l12.209"></a><span id="l12.209" class="difflineplus">+nsErrorCouldNotConnectViaTls=Unable to establish TLS connection to POP3 server. The server may be down or may be incorrectly configured. Please verify the correct configuration in the Server Settings for your mail server in the Account Settings window and try again.</span>
<a href="#l12.210"></a><span id="l12.210"> </span>
<a href="#l12.211"></a><span id="l12.211" class="difflineminus">-## @name POP3_MOVE_FOLDER_TO_TRASH</span>
<a href="#l12.212"></a><span id="l12.212" class="difflineminus">-## @loc None</span>
<a href="#l12.213"></a><span id="l12.213" class="difflineminus">-# LOCALIZATION NOTE (4044): Do not translate the word %S below.</span>
<a href="#l12.214"></a><span id="l12.214" class="difflineplus">+# LOCALIZATION NOTE (pop3MoveFolderToTrash): Do not translate the word %S below.</span>
<a href="#l12.215"></a><span id="l12.215"> # &quot;%S&quot; is the name of the folder.</span>
<a href="#l12.216"></a><span id="l12.216" class="difflineminus">-4044=Are you sure you want to delete the folder '%S'?</span>
<a href="#l12.217"></a><span id="l12.217" class="difflineplus">+pop3MoveFolderToTrash=Are you sure you want to delete the folder '%S'?</span>
<a href="#l12.218"></a><span id="l12.218"> </span>
<a href="#l12.219"></a><span id="l12.219" class="difflineminus">-## @name POP3_DELETE_FOLDER_DIALOG_TITLE</span>
<a href="#l12.220"></a><span id="l12.220" class="difflineminus">-## @loc None</span>
<a href="#l12.221"></a><span id="l12.221" class="difflineminus">-4045=Delete Folder</span>
<a href="#l12.222"></a><span id="l12.222" class="difflineplus">+pop3DeleteFolderDialogTitle=Delete Folder</span>
<a href="#l12.223"></a><span id="l12.223"> </span>
<a href="#l12.224"></a><span id="l12.224" class="difflineminus">-## @name POP3_DELETE_FOLDER_BUTTON_LABEL</span>
<a href="#l12.225"></a><span id="l12.225" class="difflineminus">-## @loc None</span>
<a href="#l12.226"></a><span id="l12.226" class="difflineminus">-4046=&amp;Delete Folder</span>
<a href="#l12.227"></a><span id="l12.227" class="difflineplus">+pop3DeleteFolderButtonLabel=&amp;Delete Folder</span>
<a href="#l12.228"></a><span id="l12.228"> </span>
<a href="#l12.229"></a><span id="l12.229" class="difflineminus">-## @name POP3_AUTH_INTERNAL_ERROR</span>
<a href="#l12.230"></a><span id="l12.230" class="difflineminus">-## @loc None</span>
<a href="#l12.231"></a><span id="l12.231" class="difflineminus">-4047=Internal state error during POP3 server authentication. This is an internal, unexpected error in the application, please report it as bug.</span>
<a href="#l12.232"></a><span id="l12.232" class="difflineplus">+pop3AuthInternalError=Internal state error during POP3 server authentication. This is an internal, unexpected error in the application, please report it as bug.</span>
<a href="#l12.233"></a><span id="l12.233"> </span>
<a href="#l12.234"></a><span id="l12.234" class="difflineminus">-## @name POP3_AUTH_CHANGE_ENCRYPT_TO_PLAIN_NO_SSL</span>
<a href="#l12.235"></a><span id="l12.235" class="difflineminus">-## @loc None</span>
<a href="#l12.236"></a><span id="l12.236" class="difflineminus">-4048=This POP3 server does not seem to support encrypted passwords. If you just set up the account, please try changing to 'Password, transmitted insecurely' as the 'Authentication method' in the 'Account Settings | Server settings'. If it used to work and now suddenly fails, this is a common scenario how someone could steal your password.</span>
<a href="#l12.237"></a><span id="l12.237" class="difflineplus">+pop3AuthChangeEncryptToPlainNoSSL=This POP3 server does not seem to support encrypted passwords. If you just set up the account, please try changing to 'Password, transmitted insecurely' as the 'Authentication method' in the 'Account Settings | Server settings'. If it used to work and now suddenly fails, this is a common scenario how someone could steal your password.</span>
<a href="#l12.238"></a><span id="l12.238"> </span>
<a href="#l12.239"></a><span id="l12.239" class="difflineminus">-## @name POP3_AUTH_CHANGE_ENCRYPT_TO_PLAIN_SSL</span>
<a href="#l12.240"></a><span id="l12.240" class="difflineminus">-## @loc None</span>
<a href="#l12.241"></a><span id="l12.241" class="difflineminus">-4049=This POP3 server does not seem to support encrypted passwords. If you just set up this account, please try changing to 'Normal password' as the 'Authentication method' in the 'Account Settings | Server settings'. If it used to work and now suddenly fails, please contact your email administrator or provider.</span>
<a href="#l12.242"></a><span id="l12.242" class="difflineplus">+pop3AuthChangeEncryptToPlainSSL=This POP3 server does not seem to support encrypted passwords. If you just set up this account, please try changing to 'Normal password' as the 'Authentication method' in the 'Account Settings | Server settings'. If it used to work and now suddenly fails, please contact your email administrator or provider.</span>
<a href="#l12.243"></a><span id="l12.243"> </span>
<a href="#l12.244"></a><span id="l12.244" class="difflineminus">-## @name POP3_AUTH_CHANGE_PLAIN_TO_ENCRYPT</span>
<a href="#l12.245"></a><span id="l12.245" class="difflineminus">-## @loc None</span>
<a href="#l12.246"></a><span id="l12.246" class="difflineminus">-4050=This POP3 server does not allow plaintext passwords. Please try changing to 'Encrypted password' as the 'Authentication method' in the 'Account Settings | Server settings'.</span>
<a href="#l12.247"></a><span id="l12.247" class="difflineplus">+pop3AuthChangePlainToEncrypt=This POP3 server does not allow plaintext passwords. Please try changing to 'Encrypted password' as the 'Authentication method' in the 'Account Settings | Server settings'.</span>
<a href="#l12.248"></a><span id="l12.248"> </span>
<a href="#l12.249"></a><span id="l12.249"> # Authentication server caps and pref don't match</span>
<a href="#l12.250"></a><span id="l12.250" class="difflineminus">-## @name POP3_AUTH_MECH_NOT_SUPPORTED</span>
<a href="#l12.251"></a><span id="l12.251" class="difflineminus">-## @loc None</span>
<a href="#l12.252"></a><span id="l12.252" class="difflineminus">-4051=The server does not support the selected authentication method. Please change the 'Authentication method' in the 'Account Settings | Server settings'.</span>
<a href="#l12.253"></a><span id="l12.253" class="difflineplus">+pop3AuthMechNotSupported=The server does not support the selected authentication method. Please change the 'Authentication method' in the 'Account Settings | Server settings'.</span>
<a href="#l12.254"></a><span id="l12.254"> </span>
<a href="#l12.255"></a><span id="l12.255"> # Status - Could not log in to GSSAPI, and it was the only method</span>
<a href="#l12.256"></a><span id="l12.256" class="difflineminus">-## @name POP3_GSSAPI_FAILURE</span>
<a href="#l12.257"></a><span id="l12.257" class="difflineminus">-## @loc None</span>
<a href="#l12.258"></a><span id="l12.258" class="difflineminus">-4052=The Kerberos/GSSAPI ticket was not accepted by the POP server. Please check that you are logged in to the Kerberos/GSSAPI realm.</span>
<a href="#l12.259"></a><span id="l12.259" class="difflineplus">+pop3GssapiFailure=The Kerberos/GSSAPI ticket was not accepted by the POP server. Please check that you are logged in to the Kerberos/GSSAPI realm.</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

