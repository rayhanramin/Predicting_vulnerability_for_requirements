<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 12743:f4773fcc281dbeeb5a4cb4d99947d85f47d6baac</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ f4773fcc281dbeeb5a4cb4d99947d85f47d6baac" />
<meta property="og:url" content="/comm-central/rev/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac" />
<meta property="og:description" content="Bug 703068 - Annotate 163 methods with MOZ_OVERRIDE in mailnews/imap. r=Standard8" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / f4773fcc281dbeeb5a4cb4d99947d85f47d6baac 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac">shortlog</a> |
<a href="/comm-central/log/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac">files</a> |
changeset |
<a href="/comm-central/raw-rev/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac">raw</a>  | <a href="/comm-central/archive/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=703068">Bug 703068</a> - Annotate 163 methods with MOZ_OVERRIDE in mailnews/imap. r=Standard8
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#65;&#114;&#110;&#97;&#117;&#100;&#32;&#83;&#111;&#117;&#114;&#105;&#111;&#117;&#120;&#32;&#60;&#115;&#105;&#120;&#46;&#100;&#115;&#110;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 16 Jul 2013 11:32:56 -0400</td></tr>

<tr>
 <td>changeset 12743</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac">f4773fcc281dbeeb5a4cb4d99947d85f47d6baac</a></td>
</tr>



<tr>
<td>parent 12742</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/d3949b664af87690986b036e4ccf453e3b1c7945">d3949b664af87690986b036e4ccf453e3b1c7945</a>
</td>
</tr>

<tr>
<td>child 12744</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/4da44efb7fde63c7e60d4f6081c1fa662224ad7f">4da44efb7fde63c7e60d4f6081c1fa662224ad7f</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=f4773fcc281dbeeb5a4cb4d99947d85f47d6baac">9340</a></td></tr>
<tr><td>push user</td><td>ryanvm@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Tue, 16 Jul 2013 15:35:41 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@7847008544a1 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=7847008544a127403791a27c7dc18b6fd2274c2b">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=7847008544a127403791a27c7dc18b6fd2274c2b&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=7847008544a127403791a27c7dc18b6fd2274c2b&newProject=comm-central&newRevision=b34d771ffae67169d296aec86e0b05a21ef93dcd&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=7847008544a127403791a27c7dc18b6fd2274c2b&newProject=comm-central&newRevision=b34d771ffae67169d296aec86e0b05a21ef93dcd&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=7847008544a127403791a27c7dc18b6fd2274c2b&newProject=comm-central&newRevision=b34d771ffae67169d296aec86e0b05a21ef93dcd&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Standard8%29&revcount=50">Standard8</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=703068">703068</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=703068">Bug 703068</a> - Annotate 163 methods with MOZ_OVERRIDE in mailnews/imap. r=Standard8</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsIMAPBodyShell.h">mailnews/imap/src/nsIMAPBodyShell.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsIMAPBodyShell.h">file</a> |
<a href="/comm-central/annotate/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsIMAPBodyShell.h">annotate</a> |
<a href="/comm-central/diff/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsIMAPBodyShell.h">diff</a> |
<a href="/comm-central/comparison/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsIMAPBodyShell.h">comparison</a> |
<a href="/comm-central/log/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsIMAPBodyShell.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsIMAPHostSessionList.h">mailnews/imap/src/nsIMAPHostSessionList.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsIMAPHostSessionList.h">file</a> |
<a href="/comm-central/annotate/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsIMAPHostSessionList.h">annotate</a> |
<a href="/comm-central/diff/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsIMAPHostSessionList.h">diff</a> |
<a href="/comm-central/comparison/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsIMAPHostSessionList.h">comparison</a> |
<a href="/comm-central/log/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsIMAPHostSessionList.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapIncomingServer.h">mailnews/imap/src/nsImapIncomingServer.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapIncomingServer.h">file</a> |
<a href="/comm-central/annotate/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapIncomingServer.h">annotate</a> |
<a href="/comm-central/diff/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapIncomingServer.h">diff</a> |
<a href="/comm-central/comparison/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapIncomingServer.h">comparison</a> |
<a href="/comm-central/log/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapIncomingServer.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapMailFolder.h">mailnews/imap/src/nsImapMailFolder.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapMailFolder.h">file</a> |
<a href="/comm-central/annotate/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapMailFolder.h">annotate</a> |
<a href="/comm-central/diff/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapMailFolder.h">diff</a> |
<a href="/comm-central/comparison/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapMailFolder.h">comparison</a> |
<a href="/comm-central/log/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapMailFolder.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapOfflineSync.h">mailnews/imap/src/nsImapOfflineSync.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapOfflineSync.h">file</a> |
<a href="/comm-central/annotate/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapOfflineSync.h">annotate</a> |
<a href="/comm-central/diff/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapOfflineSync.h">diff</a> |
<a href="/comm-central/comparison/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapOfflineSync.h">comparison</a> |
<a href="/comm-central/log/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapOfflineSync.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapProtocol.h">mailnews/imap/src/nsImapProtocol.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapProtocol.h">file</a> |
<a href="/comm-central/annotate/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapProtocol.h">annotate</a> |
<a href="/comm-central/diff/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapProtocol.h">diff</a> |
<a href="/comm-central/comparison/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapProtocol.h">comparison</a> |
<a href="/comm-central/log/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapProtocol.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapServerResponseParser.h">mailnews/imap/src/nsImapServerResponseParser.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapServerResponseParser.h">file</a> |
<a href="/comm-central/annotate/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapServerResponseParser.h">annotate</a> |
<a href="/comm-central/diff/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapServerResponseParser.h">diff</a> |
<a href="/comm-central/comparison/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapServerResponseParser.h">comparison</a> |
<a href="/comm-central/log/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapServerResponseParser.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapUndoTxn.h">mailnews/imap/src/nsImapUndoTxn.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapUndoTxn.h">file</a> |
<a href="/comm-central/annotate/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapUndoTxn.h">annotate</a> |
<a href="/comm-central/diff/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapUndoTxn.h">diff</a> |
<a href="/comm-central/comparison/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapUndoTxn.h">comparison</a> |
<a href="/comm-central/log/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapUndoTxn.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapUrl.h">mailnews/imap/src/nsImapUrl.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapUrl.h">file</a> |
<a href="/comm-central/annotate/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapUrl.h">annotate</a> |
<a href="/comm-central/diff/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapUrl.h">diff</a> |
<a href="/comm-central/comparison/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapUrl.h">comparison</a> |
<a href="/comm-central/log/f4773fcc281dbeeb5a4cb4d99947d85f47d6baac/mailnews/imap/src/nsImapUrl.h">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mailnews/imap/src/nsIMAPBodyShell.h</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mailnews/imap/src/nsIMAPBodyShell.h</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -5,16 +5,17 @@</span>
<a href="#l1.4"></a><span id="l1.4"> </span>
<a href="#l1.5"></a><span id="l1.5"> /* </span>
<a href="#l1.6"></a><span id="l1.6"> nsIMAPBodyShell and associated classes</span>
<a href="#l1.7"></a><span id="l1.7"> */ </span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9"> #ifndef IMAPBODY_H</span>
<a href="#l1.10"></a><span id="l1.10"> #define IMAPBODY_H</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+#include &quot;mozilla/Attributes.h&quot;</span>
<a href="#l1.13"></a><span id="l1.13"> #include &quot;nsImapCore.h&quot;</span>
<a href="#l1.14"></a><span id="l1.14"> #include &quot;nsStringGlue.h&quot;</span>
<a href="#l1.15"></a><span id="l1.15"> #include &quot;nsRefPtrHashtable.h&quot;</span>
<a href="#l1.16"></a><span id="l1.16"> #include &quot;nsVoidArray.h&quot;</span>
<a href="#l1.17"></a><span id="l1.17"> </span>
<a href="#l1.18"></a><span id="l1.18"> class nsImapProtocol;</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20"> typedef enum _nsIMAPBodypartType {</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineat">@@ -109,36 +110,40 @@ protected:</span>
<a href="#l1.22"></a><span id="l1.22"> // Message headers</span>
<a href="#l1.23"></a><span id="l1.23"> // A special type of nsIMAPBodypart</span>
<a href="#l1.24"></a><span id="l1.24"> // These may be headers for the top-level message,</span>
<a href="#l1.25"></a><span id="l1.25"> // or any body part of type message/rfc822.</span>
<a href="#l1.26"></a><span id="l1.26"> class nsIMAPMessageHeaders : public nsIMAPBodypart</span>
<a href="#l1.27"></a><span id="l1.27"> {</span>
<a href="#l1.28"></a><span id="l1.28"> public:</span>
<a href="#l1.29"></a><span id="l1.29">     nsIMAPMessageHeaders(char *partNum, nsIMAPBodypart *parentPart);</span>
<a href="#l1.30"></a><span id="l1.30" class="difflineminus">-	virtual nsIMAPBodypartType	GetType();</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineplus">+	virtual nsIMAPBodypartType	GetType() MOZ_OVERRIDE;</span>
<a href="#l1.32"></a><span id="l1.32">     // Generates an HTML representation of this part.  Returns content length generated, -1 if failed.</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineminus">-    virtual int32_t Generate(nsIMAPBodyShell *aShell, bool stream, bool prefetch);</span>
<a href="#l1.34"></a><span id="l1.34" class="difflineminus">-    virtual bool ShouldFetchInline(nsIMAPBodyShell *aShell);</span>
<a href="#l1.35"></a><span id="l1.35" class="difflineplus">+    virtual int32_t Generate(nsIMAPBodyShell *aShell, bool stream,</span>
<a href="#l1.36"></a><span id="l1.36" class="difflineplus">+                             bool prefetch) MOZ_OVERRIDE;</span>
<a href="#l1.37"></a><span id="l1.37" class="difflineplus">+    virtual bool ShouldFetchInline(nsIMAPBodyShell *aShell) MOZ_OVERRIDE;</span>
<a href="#l1.38"></a><span id="l1.38">     virtual void QueuePrefetchMessageHeaders(nsIMAPBodyShell *aShell);</span>
<a href="#l1.39"></a><span id="l1.39"> };</span>
<a href="#l1.40"></a><span id="l1.40"> </span>
<a href="#l1.41"></a><span id="l1.41"> </span>
<a href="#l1.42"></a><span id="l1.42"> class nsIMAPBodypartMultipart : public nsIMAPBodypart</span>
<a href="#l1.43"></a><span id="l1.43"> {</span>
<a href="#l1.44"></a><span id="l1.44"> public:</span>
<a href="#l1.45"></a><span id="l1.45">     nsIMAPBodypartMultipart(char *partNum, nsIMAPBodypart *parentPart);</span>
<a href="#l1.46"></a><span id="l1.46" class="difflineminus">-	virtual nsIMAPBodypartType	GetType();</span>
<a href="#l1.47"></a><span id="l1.47" class="difflineplus">+	virtual nsIMAPBodypartType	GetType() MOZ_OVERRIDE;</span>
<a href="#l1.48"></a><span id="l1.48"> 	virtual ~nsIMAPBodypartMultipart();</span>
<a href="#l1.49"></a><span id="l1.49" class="difflineminus">-    virtual bool ShouldFetchInline(nsIMAPBodyShell *aShell);</span>
<a href="#l1.50"></a><span id="l1.50" class="difflineminus">-    virtual bool PreflightCheckAllInline(nsIMAPBodyShell *aShell);</span>
<a href="#l1.51"></a><span id="l1.51" class="difflineplus">+    virtual bool ShouldFetchInline(nsIMAPBodyShell *aShell) MOZ_OVERRIDE;</span>
<a href="#l1.52"></a><span id="l1.52" class="difflineplus">+    virtual bool PreflightCheckAllInline(nsIMAPBodyShell *aShell) MOZ_OVERRIDE;</span>
<a href="#l1.53"></a><span id="l1.53">     // Generates an HTML representation of this part.  Returns content length generated, -1 if failed.</span>
<a href="#l1.54"></a><span id="l1.54" class="difflineminus">-    virtual int32_t Generate(nsIMAPBodyShell *aShell, bool stream, bool prefetch);</span>
<a href="#l1.55"></a><span id="l1.55" class="difflineminus">-	virtual nsIMAPBodypart	*FindPartWithNumber(const char *partNum);	// Returns the part object with the given number</span>
<a href="#l1.56"></a><span id="l1.56" class="difflineminus">-        virtual bool IsLastTextPart(const char *partNumberString);</span>
<a href="#l1.57"></a><span id="l1.57" class="difflineplus">+    virtual int32_t Generate(nsIMAPBodyShell *aShell, bool stream,</span>
<a href="#l1.58"></a><span id="l1.58" class="difflineplus">+                             bool prefetch) MOZ_OVERRIDE;</span>
<a href="#l1.59"></a><span id="l1.59" class="difflineplus">+    // Returns the part object with the given number</span>
<a href="#l1.60"></a><span id="l1.60" class="difflineplus">+	virtual nsIMAPBodypart	*FindPartWithNumber(const char *partNum</span>
<a href="#l1.61"></a><span id="l1.61" class="difflineplus">+                                                ) MOZ_OVERRIDE;</span>
<a href="#l1.62"></a><span id="l1.62" class="difflineplus">+    virtual bool IsLastTextPart(const char *partNumberString) MOZ_OVERRIDE;</span>
<a href="#l1.63"></a><span id="l1.63">     void AppendPart(nsIMAPBodypart *part)  { m_partList-&gt;AppendElement(part); }</span>
<a href="#l1.64"></a><span id="l1.64">     void SetBodySubType(char *bodySubType);</span>
<a href="#l1.65"></a><span id="l1.65"> </span>
<a href="#l1.66"></a><span id="l1.66"> protected:</span>
<a href="#l1.67"></a><span id="l1.67"> 	nsVoidArray			*m_partList;			// An ordered list of top-level body parts for this shell</span>
<a href="#l1.68"></a><span id="l1.68"> };</span>
<a href="#l1.69"></a><span id="l1.69"> </span>
<a href="#l1.70"></a><span id="l1.70"> </span>
<a href="#l1.71"></a><span id="l1.71" class="difflineat">@@ -146,46 +151,49 @@ protected:</span>
<a href="#l1.72"></a><span id="l1.72"> // a leaf, even though it can contain other parts within it.</span>
<a href="#l1.73"></a><span id="l1.73"> class nsIMAPBodypartLeaf : public nsIMAPBodypart</span>
<a href="#l1.74"></a><span id="l1.74"> {</span>
<a href="#l1.75"></a><span id="l1.75"> public:</span>
<a href="#l1.76"></a><span id="l1.76">   nsIMAPBodypartLeaf(char *partNum, nsIMAPBodypart *parentPart, char *bodyType,</span>
<a href="#l1.77"></a><span id="l1.77">                      char *bodySubType, char *bodyID, char *bodyDescription,</span>
<a href="#l1.78"></a><span id="l1.78">                      char *bodyEncoding, int32_t partLength,</span>
<a href="#l1.79"></a><span id="l1.79">                      bool preferPlainText);</span>
<a href="#l1.80"></a><span id="l1.80" class="difflineminus">-	virtual nsIMAPBodypartType	GetType();</span>
<a href="#l1.81"></a><span id="l1.81" class="difflineplus">+	virtual nsIMAPBodypartType	GetType() MOZ_OVERRIDE;</span>
<a href="#l1.82"></a><span id="l1.82">     // Generates an HTML representation of this part.  Returns content length generated, -1 if failed.</span>
<a href="#l1.83"></a><span id="l1.83" class="difflineminus">-    virtual int32_t Generate(nsIMAPBodyShell *aShell, bool stream, bool prefetch);</span>
<a href="#l1.84"></a><span id="l1.84" class="difflineplus">+    virtual int32_t Generate(nsIMAPBodyShell *aShell, bool stream, bool prefetch) MOZ_OVERRIDE;</span>
<a href="#l1.85"></a><span id="l1.85">     // returns true if this part should be fetched inline for generation.</span>
<a href="#l1.86"></a><span id="l1.86" class="difflineminus">-    virtual bool ShouldFetchInline(nsIMAPBodyShell *aShell);</span>
<a href="#l1.87"></a><span id="l1.87" class="difflineminus">-    virtual bool PreflightCheckAllInline(nsIMAPBodyShell *aShell);</span>
<a href="#l1.88"></a><span id="l1.88" class="difflineplus">+    virtual bool ShouldFetchInline(nsIMAPBodyShell *aShell) MOZ_OVERRIDE;</span>
<a href="#l1.89"></a><span id="l1.89" class="difflineplus">+    virtual bool PreflightCheckAllInline(nsIMAPBodyShell *aShell) MOZ_OVERRIDE;</span>
<a href="#l1.90"></a><span id="l1.90"> private:</span>
<a href="#l1.91"></a><span id="l1.91">   bool mPreferPlainText;</span>
<a href="#l1.92"></a><span id="l1.92"> };</span>
<a href="#l1.93"></a><span id="l1.93"> </span>
<a href="#l1.94"></a><span id="l1.94"> </span>
<a href="#l1.95"></a><span id="l1.95"> class nsIMAPBodypartMessage : public nsIMAPBodypartLeaf</span>
<a href="#l1.96"></a><span id="l1.96"> {</span>
<a href="#l1.97"></a><span id="l1.97"> public:</span>
<a href="#l1.98"></a><span id="l1.98">   nsIMAPBodypartMessage(char *partNum, nsIMAPBodypart *parentPart,</span>
<a href="#l1.99"></a><span id="l1.99">                         bool topLevelMessage, char *bodyType,</span>
<a href="#l1.100"></a><span id="l1.100">                         char *bodySubType, char *bodyID,</span>
<a href="#l1.101"></a><span id="l1.101">                         char *bodyDescription, char *bodyEncoding,</span>
<a href="#l1.102"></a><span id="l1.102">                         int32_t partLength, bool preferPlainText);</span>
<a href="#l1.103"></a><span id="l1.103">     void SetBody(nsIMAPBodypart *body);</span>
<a href="#l1.104"></a><span id="l1.104" class="difflineminus">-	virtual nsIMAPBodypartType	GetType();</span>
<a href="#l1.105"></a><span id="l1.105" class="difflineplus">+	virtual nsIMAPBodypartType	GetType() MOZ_OVERRIDE;</span>
<a href="#l1.106"></a><span id="l1.106"> 	virtual ~nsIMAPBodypartMessage();</span>
<a href="#l1.107"></a><span id="l1.107" class="difflineminus">-    virtual int32_t Generate(nsIMAPBodyShell *aShell, bool stream, bool prefetch);</span>
<a href="#l1.108"></a><span id="l1.108" class="difflineminus">-    virtual bool ShouldFetchInline(nsIMAPBodyShell *aShell);</span>
<a href="#l1.109"></a><span id="l1.109" class="difflineminus">-    virtual bool PreflightCheckAllInline(nsIMAPBodyShell *aShell);</span>
<a href="#l1.110"></a><span id="l1.110" class="difflineminus">-	virtual nsIMAPBodypart	*FindPartWithNumber(const char *partNum);	// Returns the part object with the given number</span>
<a href="#l1.111"></a><span id="l1.111" class="difflineplus">+    virtual int32_t Generate(nsIMAPBodyShell *aShell, bool stream,</span>
<a href="#l1.112"></a><span id="l1.112" class="difflineplus">+                             bool prefetch) MOZ_OVERRIDE;</span>
<a href="#l1.113"></a><span id="l1.113" class="difflineplus">+    virtual bool ShouldFetchInline(nsIMAPBodyShell *aShell) MOZ_OVERRIDE;</span>
<a href="#l1.114"></a><span id="l1.114" class="difflineplus">+    virtual bool PreflightCheckAllInline(nsIMAPBodyShell *aShell) MOZ_OVERRIDE;</span>
<a href="#l1.115"></a><span id="l1.115" class="difflineplus">+	// Returns the part object with the given number</span>
<a href="#l1.116"></a><span id="l1.116" class="difflineplus">+	virtual nsIMAPBodypart	*FindPartWithNumber(const char *partNum</span>
<a href="#l1.117"></a><span id="l1.117" class="difflineplus">+                                                ) MOZ_OVERRIDE;</span>
<a href="#l1.118"></a><span id="l1.118"> 	void	AdoptMessageHeaders(char *headers);			// Fills in buffer (and adopts storage) for header object</span>
<a href="#l1.119"></a><span id="l1.119"> 														// partNum specifies the message part number to which the</span>
<a href="#l1.120"></a><span id="l1.120"> 														// headers correspond.  NULL indicates the top-level message</span>
<a href="#l1.121"></a><span id="l1.121" class="difflineminus">-	virtual nsIMAPBodypartMessage	*GetnsIMAPBodypartMessage() { return this; }</span>
<a href="#l1.122"></a><span id="l1.122" class="difflineplus">+	virtual nsIMAPBodypartMessage	*GetnsIMAPBodypartMessage() MOZ_OVERRIDE { return this; }</span>
<a href="#l1.123"></a><span id="l1.123"> 	virtual	bool		GetIsTopLevelMessage() { return m_topLevelMessage; }</span>
<a href="#l1.124"></a><span id="l1.124"> </span>
<a href="#l1.125"></a><span id="l1.125"> protected:</span>
<a href="#l1.126"></a><span id="l1.126"> 	nsIMAPMessageHeaders		*m_headers;				// Every body shell should have headers</span>
<a href="#l1.127"></a><span id="l1.127"> 	nsIMAPBodypart			*m_body;	</span>
<a href="#l1.128"></a><span id="l1.128"> 	bool					m_topLevelMessage;		// Whether or not this is the top-level message</span>
<a href="#l1.129"></a><span id="l1.129"> </span>
<a href="#l1.130"></a><span id="l1.130"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mailnews/imap/src/nsIMAPHostSessionList.h</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mailnews/imap/src/nsIMAPHostSessionList.h</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -1,16 +1,17 @@</span>
<a href="#l2.4"></a><span id="l2.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l2.5"></a><span id="l2.5"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l2.6"></a><span id="l2.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l2.7"></a><span id="l2.7">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l2.8"></a><span id="l2.8"> </span>
<a href="#l2.9"></a><span id="l2.9"> #ifndef _nsIMAPHostSessionList_H_</span>
<a href="#l2.10"></a><span id="l2.10"> #define _nsIMAPHostSessionList_H_</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+#include &quot;mozilla/Attributes.h&quot;</span>
<a href="#l2.13"></a><span id="l2.13"> #include &quot;nsImapCore.h&quot;</span>
<a href="#l2.14"></a><span id="l2.14"> #include &quot;nsIIMAPHostSessionList.h&quot;</span>
<a href="#l2.15"></a><span id="l2.15"> #include &quot;nsIObserver.h&quot;</span>
<a href="#l2.16"></a><span id="l2.16"> #include &quot;nsWeakReference.h&quot;</span>
<a href="#l2.17"></a><span id="l2.17"> #include &quot;nspr.h&quot;</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19"> class nsIMAPNamespaceList;</span>
<a href="#l2.20"></a><span id="l2.20"> class nsIImapIncomingServer;</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineat">@@ -51,83 +52,83 @@ public:</span>
<a href="#l2.22"></a><span id="l2.22">   NS_DECL_ISUPPORTS</span>
<a href="#l2.23"></a><span id="l2.23">   NS_DECL_NSIOBSERVER  </span>
<a href="#l2.24"></a><span id="l2.24"> </span>
<a href="#l2.25"></a><span id="l2.25">   nsIMAPHostSessionList();</span>
<a href="#l2.26"></a><span id="l2.26">   virtual ~nsIMAPHostSessionList();</span>
<a href="#l2.27"></a><span id="l2.27">   nsresult Init();</span>
<a href="#l2.28"></a><span id="l2.28">   // Host List</span>
<a href="#l2.29"></a><span id="l2.29">   NS_IMETHOD AddHostToList(const char *serverKey, </span>
<a href="#l2.30"></a><span id="l2.30" class="difflineminus">-                            nsIImapIncomingServer *server);</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-  NS_IMETHOD ResetAll();</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+                            nsIImapIncomingServer *server) MOZ_OVERRIDE;</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineplus">+  NS_IMETHOD ResetAll() MOZ_OVERRIDE;</span>
<a href="#l2.34"></a><span id="l2.34"> </span>
<a href="#l2.35"></a><span id="l2.35">   // Capabilities</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineminus">-  NS_IMETHOD GetHostHasAdminURL(const char *serverKey, bool &amp;result);</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineminus">-  NS_IMETHOD SetHostHasAdminURL(const char *serverKey, bool hasAdminUrl);</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineplus">+  NS_IMETHOD GetHostHasAdminURL(const char *serverKey, bool &amp;result) MOZ_OVERRIDE;</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineplus">+  NS_IMETHOD SetHostHasAdminURL(const char *serverKey, bool hasAdminUrl) MOZ_OVERRIDE;</span>
<a href="#l2.40"></a><span id="l2.40">   // Subscription</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineminus">-  NS_IMETHOD GetHostIsUsingSubscription(const char *serverKey, bool &amp;result);</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineminus">-  NS_IMETHOD SetHostIsUsingSubscription(const char *serverKey, bool usingSubscription);</span>
<a href="#l2.43"></a><span id="l2.43" class="difflineplus">+  NS_IMETHOD GetHostIsUsingSubscription(const char *serverKey, bool &amp;result) MOZ_OVERRIDE;</span>
<a href="#l2.44"></a><span id="l2.44" class="difflineplus">+  NS_IMETHOD SetHostIsUsingSubscription(const char *serverKey, bool usingSubscription) MOZ_OVERRIDE;</span>
<a href="#l2.45"></a><span id="l2.45"> </span>
<a href="#l2.46"></a><span id="l2.46">   // Passwords</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineminus">-  NS_IMETHOD GetPasswordForHost(const char *serverKey, nsString &amp;result);</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineminus">-  NS_IMETHOD SetPasswordForHost(const char *serverKey, const char *password);</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineminus">-  NS_IMETHOD GetPasswordVerifiedOnline(const char *serverKey, bool &amp;result);</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineminus">-  NS_IMETHOD SetPasswordVerifiedOnline(const char *serverKey);</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineplus">+  NS_IMETHOD GetPasswordForHost(const char *serverKey, nsString &amp;result) MOZ_OVERRIDE;</span>
<a href="#l2.52"></a><span id="l2.52" class="difflineplus">+  NS_IMETHOD SetPasswordForHost(const char *serverKey, const char *password) MOZ_OVERRIDE;</span>
<a href="#l2.53"></a><span id="l2.53" class="difflineplus">+  NS_IMETHOD GetPasswordVerifiedOnline(const char *serverKey, bool &amp;result) MOZ_OVERRIDE;</span>
<a href="#l2.54"></a><span id="l2.54" class="difflineplus">+  NS_IMETHOD SetPasswordVerifiedOnline(const char *serverKey) MOZ_OVERRIDE;</span>
<a href="#l2.55"></a><span id="l2.55"> </span>
<a href="#l2.56"></a><span id="l2.56">   // OnlineDir</span>
<a href="#l2.57"></a><span id="l2.57">   NS_IMETHOD GetOnlineDirForHost(const char *serverKey,</span>
<a href="#l2.58"></a><span id="l2.58" class="difflineminus">-                                 nsString &amp;result);</span>
<a href="#l2.59"></a><span id="l2.59" class="difflineplus">+                                 nsString &amp;result) MOZ_OVERRIDE;</span>
<a href="#l2.60"></a><span id="l2.60">   NS_IMETHOD SetOnlineDirForHost(const char *serverKey,</span>
<a href="#l2.61"></a><span id="l2.61" class="difflineminus">-                                 const char *onlineDir);</span>
<a href="#l2.62"></a><span id="l2.62" class="difflineplus">+                                 const char *onlineDir) MOZ_OVERRIDE;</span>
<a href="#l2.63"></a><span id="l2.63"> </span>
<a href="#l2.64"></a><span id="l2.64">   // Delete is move to trash folder</span>
<a href="#l2.65"></a><span id="l2.65" class="difflineminus">-  NS_IMETHOD GetDeleteIsMoveToTrashForHost(const char *serverKey, bool &amp;result);</span>
<a href="#l2.66"></a><span id="l2.66" class="difflineminus">-  NS_IMETHOD SetDeleteIsMoveToTrashForHost(const char *serverKey, bool isMoveToTrash);</span>
<a href="#l2.67"></a><span id="l2.67" class="difflineplus">+  NS_IMETHOD GetDeleteIsMoveToTrashForHost(const char *serverKey, bool &amp;result) MOZ_OVERRIDE;</span>
<a href="#l2.68"></a><span id="l2.68" class="difflineplus">+  NS_IMETHOD SetDeleteIsMoveToTrashForHost(const char *serverKey, bool isMoveToTrash) MOZ_OVERRIDE;</span>
<a href="#l2.69"></a><span id="l2.69">   // imap delete model (or not)</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineminus">-  NS_IMETHOD GetShowDeletedMessagesForHost(const char *serverKey, bool &amp;result);</span>
<a href="#l2.71"></a><span id="l2.71" class="difflineminus">-  NS_IMETHOD SetShowDeletedMessagesForHost(const char *serverKey, bool showDeletedMessages);</span>
<a href="#l2.72"></a><span id="l2.72" class="difflineplus">+  NS_IMETHOD GetShowDeletedMessagesForHost(const char *serverKey, bool &amp;result) MOZ_OVERRIDE;</span>
<a href="#l2.73"></a><span id="l2.73" class="difflineplus">+  NS_IMETHOD SetShowDeletedMessagesForHost(const char *serverKey, bool showDeletedMessages) MOZ_OVERRIDE;</span>
<a href="#l2.74"></a><span id="l2.74"> </span>
<a href="#l2.75"></a><span id="l2.75">   // Get namespaces</span>
<a href="#l2.76"></a><span id="l2.76" class="difflineminus">-  NS_IMETHOD GetGotNamespacesForHost(const char *serverKey, bool &amp;result);</span>
<a href="#l2.77"></a><span id="l2.77" class="difflineminus">-  NS_IMETHOD SetGotNamespacesForHost(const char *serverKey, bool gotNamespaces);</span>
<a href="#l2.78"></a><span id="l2.78" class="difflineplus">+  NS_IMETHOD GetGotNamespacesForHost(const char *serverKey, bool &amp;result) MOZ_OVERRIDE;</span>
<a href="#l2.79"></a><span id="l2.79" class="difflineplus">+  NS_IMETHOD SetGotNamespacesForHost(const char *serverKey, bool gotNamespaces) MOZ_OVERRIDE;</span>
<a href="#l2.80"></a><span id="l2.80">   // Folders</span>
<a href="#l2.81"></a><span id="l2.81" class="difflineminus">-  NS_IMETHOD SetHaveWeEverDiscoveredFoldersForHost(const char *serverKey, bool discovered);</span>
<a href="#l2.82"></a><span id="l2.82" class="difflineminus">-  NS_IMETHOD GetHaveWeEverDiscoveredFoldersForHost(const char *serverKey, bool &amp;result);</span>
<a href="#l2.83"></a><span id="l2.83" class="difflineplus">+  NS_IMETHOD SetHaveWeEverDiscoveredFoldersForHost(const char *serverKey, bool discovered) MOZ_OVERRIDE;</span>
<a href="#l2.84"></a><span id="l2.84" class="difflineplus">+  NS_IMETHOD GetHaveWeEverDiscoveredFoldersForHost(const char *serverKey, bool &amp;result) MOZ_OVERRIDE;</span>
<a href="#l2.85"></a><span id="l2.85"> </span>
<a href="#l2.86"></a><span id="l2.86">   // Trash Folder</span>
<a href="#l2.87"></a><span id="l2.87" class="difflineminus">-  NS_IMETHOD SetOnlineTrashFolderExistsForHost(const char *serverKey, bool exists);</span>
<a href="#l2.88"></a><span id="l2.88" class="difflineminus">-  NS_IMETHOD GetOnlineTrashFolderExistsForHost(const char *serverKey, bool &amp;result);</span>
<a href="#l2.89"></a><span id="l2.89" class="difflineplus">+  NS_IMETHOD SetOnlineTrashFolderExistsForHost(const char *serverKey, bool exists) MOZ_OVERRIDE;</span>
<a href="#l2.90"></a><span id="l2.90" class="difflineplus">+  NS_IMETHOD GetOnlineTrashFolderExistsForHost(const char *serverKey, bool &amp;result) MOZ_OVERRIDE;</span>
<a href="#l2.91"></a><span id="l2.91"> </span>
<a href="#l2.92"></a><span id="l2.92">   // INBOX</span>
<a href="#l2.93"></a><span id="l2.93" class="difflineminus">-  NS_IMETHOD GetOnlineInboxPathForHost(const char *serverKey, nsString &amp;result);</span>
<a href="#l2.94"></a><span id="l2.94" class="difflineminus">-  NS_IMETHOD GetShouldAlwaysListInboxForHost(const char *serverKey, bool &amp;result);</span>
<a href="#l2.95"></a><span id="l2.95" class="difflineminus">-  NS_IMETHOD SetShouldAlwaysListInboxForHost(const char *serverKey, bool shouldList);</span>
<a href="#l2.96"></a><span id="l2.96" class="difflineplus">+  NS_IMETHOD GetOnlineInboxPathForHost(const char *serverKey, nsString &amp;result) MOZ_OVERRIDE;</span>
<a href="#l2.97"></a><span id="l2.97" class="difflineplus">+  NS_IMETHOD GetShouldAlwaysListInboxForHost(const char *serverKey, bool &amp;result) MOZ_OVERRIDE;</span>
<a href="#l2.98"></a><span id="l2.98" class="difflineplus">+  NS_IMETHOD SetShouldAlwaysListInboxForHost(const char *serverKey, bool shouldList) MOZ_OVERRIDE;</span>
<a href="#l2.99"></a><span id="l2.99"> </span>
<a href="#l2.100"></a><span id="l2.100">   // Namespaces</span>
<a href="#l2.101"></a><span id="l2.101" class="difflineminus">-  NS_IMETHOD GetNamespaceForMailboxForHost(const char *serverKey, const char *mailbox_name, nsIMAPNamespace *&amp;result);</span>
<a href="#l2.102"></a><span id="l2.102" class="difflineminus">-  NS_IMETHOD SetNamespaceFromPrefForHost(const char *serverKey, const char *namespacePref, EIMAPNamespaceType type);</span>
<a href="#l2.103"></a><span id="l2.103" class="difflineminus">-  NS_IMETHOD AddNewNamespaceForHost(const char *serverKey, nsIMAPNamespace *ns);</span>
<a href="#l2.104"></a><span id="l2.104" class="difflineminus">-  NS_IMETHOD ClearServerAdvertisedNamespacesForHost(const char *serverKey);</span>
<a href="#l2.105"></a><span id="l2.105" class="difflineminus">-  NS_IMETHOD ClearPrefsNamespacesForHost(const char *serverKey);</span>
<a href="#l2.106"></a><span id="l2.106" class="difflineminus">-  NS_IMETHOD GetDefaultNamespaceOfTypeForHost(const char *serverKey, EIMAPNamespaceType type, nsIMAPNamespace *&amp;result);</span>
<a href="#l2.107"></a><span id="l2.107" class="difflineminus">-  NS_IMETHOD SetNamespacesOverridableForHost(const char *serverKey, bool overridable);</span>
<a href="#l2.108"></a><span id="l2.108" class="difflineminus">-  NS_IMETHOD GetNamespacesOverridableForHost(const char *serverKey,bool &amp;result);</span>
<a href="#l2.109"></a><span id="l2.109" class="difflineminus">-  NS_IMETHOD GetNumberOfNamespacesForHost(const char *serverKey, uint32_t &amp;result);</span>
<a href="#l2.110"></a><span id="l2.110" class="difflineminus">-  NS_IMETHOD GetNamespaceNumberForHost(const char *serverKey, int32_t n, nsIMAPNamespace * &amp;result);</span>
<a href="#l2.111"></a><span id="l2.111" class="difflineplus">+  NS_IMETHOD GetNamespaceForMailboxForHost(const char *serverKey, const char *mailbox_name, nsIMAPNamespace *&amp;result) MOZ_OVERRIDE;</span>
<a href="#l2.112"></a><span id="l2.112" class="difflineplus">+  NS_IMETHOD SetNamespaceFromPrefForHost(const char *serverKey, const char *namespacePref, EIMAPNamespaceType type) MOZ_OVERRIDE;</span>
<a href="#l2.113"></a><span id="l2.113" class="difflineplus">+  NS_IMETHOD AddNewNamespaceForHost(const char *serverKey, nsIMAPNamespace *ns) MOZ_OVERRIDE;</span>
<a href="#l2.114"></a><span id="l2.114" class="difflineplus">+  NS_IMETHOD ClearServerAdvertisedNamespacesForHost(const char *serverKey) MOZ_OVERRIDE;</span>
<a href="#l2.115"></a><span id="l2.115" class="difflineplus">+  NS_IMETHOD ClearPrefsNamespacesForHost(const char *serverKey) MOZ_OVERRIDE;</span>
<a href="#l2.116"></a><span id="l2.116" class="difflineplus">+  NS_IMETHOD GetDefaultNamespaceOfTypeForHost(const char *serverKey, EIMAPNamespaceType type, nsIMAPNamespace *&amp;result) MOZ_OVERRIDE;</span>
<a href="#l2.117"></a><span id="l2.117" class="difflineplus">+  NS_IMETHOD SetNamespacesOverridableForHost(const char *serverKey, bool overridable) MOZ_OVERRIDE;</span>
<a href="#l2.118"></a><span id="l2.118" class="difflineplus">+  NS_IMETHOD GetNamespacesOverridableForHost(const char *serverKey,bool &amp;result) MOZ_OVERRIDE;</span>
<a href="#l2.119"></a><span id="l2.119" class="difflineplus">+  NS_IMETHOD GetNumberOfNamespacesForHost(const char *serverKey, uint32_t &amp;result) MOZ_OVERRIDE;</span>
<a href="#l2.120"></a><span id="l2.120" class="difflineplus">+  NS_IMETHOD GetNamespaceNumberForHost(const char *serverKey, int32_t n, nsIMAPNamespace * &amp;result) MOZ_OVERRIDE;</span>
<a href="#l2.121"></a><span id="l2.121">   // ### dmb hoo boy, how are we going to do this?</span>
<a href="#l2.122"></a><span id="l2.122" class="difflineminus">-  NS_IMETHOD CommitNamespacesForHost(nsIImapIncomingServer *host);</span>
<a href="#l2.123"></a><span id="l2.123" class="difflineminus">-  NS_IMETHOD FlushUncommittedNamespacesForHost(const char *serverKey, bool &amp;result);</span>
<a href="#l2.124"></a><span id="l2.124" class="difflineplus">+  NS_IMETHOD CommitNamespacesForHost(nsIImapIncomingServer *host) MOZ_OVERRIDE;</span>
<a href="#l2.125"></a><span id="l2.125" class="difflineplus">+  NS_IMETHOD FlushUncommittedNamespacesForHost(const char *serverKey, bool &amp;result) MOZ_OVERRIDE;</span>
<a href="#l2.126"></a><span id="l2.126"> </span>
<a href="#l2.127"></a><span id="l2.127">   // Hierarchy Delimiters</span>
<a href="#l2.128"></a><span id="l2.128" class="difflineminus">-  NS_IMETHOD SetNamespaceHierarchyDelimiterFromMailboxForHost(const char *serverKey, const char *boxName, char delimiter);</span>
<a href="#l2.129"></a><span id="l2.129" class="difflineplus">+  NS_IMETHOD SetNamespaceHierarchyDelimiterFromMailboxForHost(const char *serverKey, const char *boxName, char delimiter) MOZ_OVERRIDE;</span>
<a href="#l2.130"></a><span id="l2.130"> </span>
<a href="#l2.131"></a><span id="l2.131">   // Message Body Shells</span>
<a href="#l2.132"></a><span id="l2.132" class="difflineminus">-  NS_IMETHOD AddShellToCacheForHost(const char *serverKey, nsIMAPBodyShell *shell);</span>
<a href="#l2.133"></a><span id="l2.133" class="difflineminus">-  NS_IMETHOD FindShellInCacheForHost(const char *serverKey, const char *mailboxName, const char *UID, IMAP_ContentModifiedType modType, nsIMAPBodyShell	**result);</span>
<a href="#l2.134"></a><span id="l2.134" class="difflineminus">-  NS_IMETHOD ClearShellCacheForHost(const char *serverKey);</span>
<a href="#l2.135"></a><span id="l2.135" class="difflineplus">+  NS_IMETHOD AddShellToCacheForHost(const char *serverKey, nsIMAPBodyShell *shell) MOZ_OVERRIDE;</span>
<a href="#l2.136"></a><span id="l2.136" class="difflineplus">+  NS_IMETHOD FindShellInCacheForHost(const char *serverKey, const char *mailboxName, const char *UID, IMAP_ContentModifiedType modType, nsIMAPBodyShell	**result) MOZ_OVERRIDE;</span>
<a href="#l2.137"></a><span id="l2.137" class="difflineplus">+  NS_IMETHOD ClearShellCacheForHost(const char *serverKey) MOZ_OVERRIDE;</span>
<a href="#l2.138"></a><span id="l2.138">   PRMonitor *gCachedHostInfoMonitor;</span>
<a href="#l2.139"></a><span id="l2.139">   nsIMAPHostInfo *fHostInfoList;</span>
<a href="#l2.140"></a><span id="l2.140"> protected:</span>
<a href="#l2.141"></a><span id="l2.141">   nsresult SetNamespacesPrefForHost(nsIImapIncomingServer *aHost,</span>
<a href="#l2.142"></a><span id="l2.142">                                     EIMAPNamespaceType type,</span>
<a href="#l2.143"></a><span id="l2.143">                                     const char *pref);</span>
<a href="#l2.144"></a><span id="l2.144">   nsIMAPHostInfo *FindHost(const char *serverKey);</span>
<a href="#l2.145"></a><span id="l2.145"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mailnews/imap/src/nsImapIncomingServer.h</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapIncomingServer.h</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -1,16 +1,17 @@</span>
<a href="#l3.4"></a><span id="l3.4"> /* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l3.5"></a><span id="l3.5"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l3.6"></a><span id="l3.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l3.7"></a><span id="l3.7">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l3.8"></a><span id="l3.8"> </span>
<a href="#l3.9"></a><span id="l3.9"> #ifndef __nsImapIncomingServer_h</span>
<a href="#l3.10"></a><span id="l3.10"> #define __nsImapIncomingServer_h</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+#include &quot;mozilla/Attributes.h&quot;</span>
<a href="#l3.13"></a><span id="l3.13"> #include &quot;msgCore.h&quot;</span>
<a href="#l3.14"></a><span id="l3.14"> #include &quot;nsIImapIncomingServer.h&quot;</span>
<a href="#l3.15"></a><span id="l3.15"> #include &quot;nsMsgIncomingServer.h&quot;</span>
<a href="#l3.16"></a><span id="l3.16"> #include &quot;nsIImapServerSink.h&quot;</span>
<a href="#l3.17"></a><span id="l3.17"> #include &quot;nsIStringBundle.h&quot;</span>
<a href="#l3.18"></a><span id="l3.18"> #include &quot;nsISubscribableServer.h&quot;</span>
<a href="#l3.19"></a><span id="l3.19"> #include &quot;nsIUrlListener.h&quot;</span>
<a href="#l3.20"></a><span id="l3.20"> #include &quot;nsIMsgImapMailFolder.h&quot;</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineat">@@ -29,55 +30,61 @@ class nsImapIncomingServer : public nsMs</span>
<a href="#l3.22"></a><span id="l3.22"> {</span>
<a href="#l3.23"></a><span id="l3.23"> public:</span>
<a href="#l3.24"></a><span id="l3.24">     NS_DECL_ISUPPORTS_INHERITED</span>
<a href="#l3.25"></a><span id="l3.25"> </span>
<a href="#l3.26"></a><span id="l3.26">     nsImapIncomingServer();</span>
<a href="#l3.27"></a><span id="l3.27">     virtual ~nsImapIncomingServer();</span>
<a href="#l3.28"></a><span id="l3.28"> </span>
<a href="#l3.29"></a><span id="l3.29">     // overriding nsMsgIncomingServer methods</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineminus">-  NS_IMETHOD SetKey(const nsACString&amp; aKey);  // override nsMsgIncomingServer's implementation...</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-  NS_IMETHOD GetLocalStoreType(nsACString&amp; type);</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+  NS_IMETHOD SetKey(const nsACString&amp; aKey) MOZ_OVERRIDE;  // override nsMsgIncomingServer's implementation...</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+  NS_IMETHOD GetLocalStoreType(nsACString&amp; type) MOZ_OVERRIDE;</span>
<a href="#l3.34"></a><span id="l3.34"> </span>
<a href="#l3.35"></a><span id="l3.35">   NS_DECL_NSIIMAPINCOMINGSERVER</span>
<a href="#l3.36"></a><span id="l3.36">   NS_DECL_NSIIMAPSERVERSINK</span>
<a href="#l3.37"></a><span id="l3.37">   NS_DECL_NSISUBSCRIBABLESERVER</span>
<a href="#l3.38"></a><span id="l3.38">   NS_DECL_NSIURLLISTENER</span>
<a href="#l3.39"></a><span id="l3.39"> </span>
<a href="#l3.40"></a><span id="l3.40" class="difflineminus">-  NS_IMETHOD PerformBiff(nsIMsgWindow *aMsgWindow);</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineminus">-  NS_IMETHOD PerformExpand(nsIMsgWindow *aMsgWindow);</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineminus">-  NS_IMETHOD CloseCachedConnections();</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineminus">-  NS_IMETHOD GetConstructedPrettyName(nsAString&amp; retval);</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineminus">-  NS_IMETHOD GetCanBeDefaultServer(bool *canBeDefaultServer);</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineminus">-  NS_IMETHOD GetCanCompactFoldersOnServer(bool *canCompactFoldersOnServer);</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineminus">-  NS_IMETHOD GetCanUndoDeleteOnServer(bool *canUndoDeleteOnServer);</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineminus">-  NS_IMETHOD GetCanSearchMessages(bool *canSearchMessages);</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineminus">-  NS_IMETHOD GetCanEmptyTrashOnExit(bool *canEmptyTrashOnExit);</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineminus">-  NS_IMETHOD GetOfflineSupportLevel(int32_t *aSupportLevel);</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineminus">-  NS_IMETHOD GeneratePrettyNameForMigration(nsAString&amp; aPrettyName);</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineminus">-  NS_IMETHOD GetSupportsDiskSpace(bool *aSupportsDiskSpace);</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineminus">-  NS_IMETHOD GetCanCreateFoldersOnServer(bool *aCanCreateFoldersOnServer);</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineminus">-  NS_IMETHOD GetCanFileMessagesOnServer(bool *aCanFileMessagesOnServer);</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineminus">-  NS_IMETHOD GetFilterScope(nsMsgSearchScopeValue *filterScope);</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineminus">-  NS_IMETHOD GetSearchScope(nsMsgSearchScopeValue *searchScope);</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineminus">-  NS_IMETHOD GetServerRequiresPasswordForBiff(bool *aServerRequiresPasswordForBiff);</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineplus">+  NS_IMETHOD PerformBiff(nsIMsgWindow *aMsgWindow) MOZ_OVERRIDE;</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineplus">+  NS_IMETHOD PerformExpand(nsIMsgWindow *aMsgWindow) MOZ_OVERRIDE;</span>
<a href="#l3.59"></a><span id="l3.59" class="difflineplus">+  NS_IMETHOD CloseCachedConnections() MOZ_OVERRIDE;</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineplus">+  NS_IMETHOD GetConstructedPrettyName(nsAString&amp; retval) MOZ_OVERRIDE;</span>
<a href="#l3.61"></a><span id="l3.61" class="difflineplus">+  NS_IMETHOD GetCanBeDefaultServer(bool *canBeDefaultServer) MOZ_OVERRIDE;</span>
<a href="#l3.62"></a><span id="l3.62" class="difflineplus">+  NS_IMETHOD GetCanCompactFoldersOnServer(bool *canCompactFoldersOnServer</span>
<a href="#l3.63"></a><span id="l3.63" class="difflineplus">+                                          ) MOZ_OVERRIDE;</span>
<a href="#l3.64"></a><span id="l3.64" class="difflineplus">+  NS_IMETHOD GetCanUndoDeleteOnServer(bool *canUndoDeleteOnServer) MOZ_OVERRIDE;</span>
<a href="#l3.65"></a><span id="l3.65" class="difflineplus">+  NS_IMETHOD GetCanSearchMessages(bool *canSearchMessages) MOZ_OVERRIDE;</span>
<a href="#l3.66"></a><span id="l3.66" class="difflineplus">+  NS_IMETHOD GetCanEmptyTrashOnExit(bool *canEmptyTrashOnExit) MOZ_OVERRIDE;</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineplus">+  NS_IMETHOD GetOfflineSupportLevel(int32_t *aSupportLevel) MOZ_OVERRIDE;</span>
<a href="#l3.68"></a><span id="l3.68" class="difflineplus">+  NS_IMETHOD GeneratePrettyNameForMigration(nsAString&amp; aPrettyName) MOZ_OVERRIDE;</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineplus">+  NS_IMETHOD GetSupportsDiskSpace(bool *aSupportsDiskSpace) MOZ_OVERRIDE;</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineplus">+  NS_IMETHOD GetCanCreateFoldersOnServer(bool *aCanCreateFoldersOnServer</span>
<a href="#l3.71"></a><span id="l3.71" class="difflineplus">+                                         ) MOZ_OVERRIDE;</span>
<a href="#l3.72"></a><span id="l3.72" class="difflineplus">+  NS_IMETHOD GetCanFileMessagesOnServer(bool *aCanFileMessagesOnServer</span>
<a href="#l3.73"></a><span id="l3.73" class="difflineplus">+                                        ) MOZ_OVERRIDE;</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineplus">+  NS_IMETHOD GetFilterScope(nsMsgSearchScopeValue *filterScope) MOZ_OVERRIDE;</span>
<a href="#l3.75"></a><span id="l3.75" class="difflineplus">+  NS_IMETHOD GetSearchScope(nsMsgSearchScopeValue *searchScope) MOZ_OVERRIDE;</span>
<a href="#l3.76"></a><span id="l3.76" class="difflineplus">+  NS_IMETHOD GetServerRequiresPasswordForBiff(bool *aServerRequiresPasswordForBiff</span>
<a href="#l3.77"></a><span id="l3.77" class="difflineplus">+                                              ) MOZ_OVERRIDE;</span>
<a href="#l3.78"></a><span id="l3.78">   NS_IMETHOD OnUserOrHostNameChanged(const nsACString&amp; oldName,</span>
<a href="#l3.79"></a><span id="l3.79">                                      const nsACString&amp; newName,</span>
<a href="#l3.80"></a><span id="l3.80" class="difflineminus">-                                     bool hostnameChanged);</span>
<a href="#l3.81"></a><span id="l3.81" class="difflineplus">+                                     bool hostnameChanged) MOZ_OVERRIDE;</span>
<a href="#l3.82"></a><span id="l3.82">   NS_IMETHOD GetNumIdleConnections(int32_t *aNumIdleConnections);</span>
<a href="#l3.83"></a><span id="l3.83" class="difflineminus">-  NS_IMETHOD ForgetSessionPassword();</span>
<a href="#l3.84"></a><span id="l3.84" class="difflineminus">-  NS_IMETHOD GetMsgFolderFromURI(nsIMsgFolder *aFolderResource, const nsACString&amp; aURI, nsIMsgFolder **aFolder);</span>
<a href="#l3.85"></a><span id="l3.85" class="difflineplus">+  NS_IMETHOD ForgetSessionPassword() MOZ_OVERRIDE;</span>
<a href="#l3.86"></a><span id="l3.86" class="difflineplus">+  NS_IMETHOD GetMsgFolderFromURI(nsIMsgFolder *aFolderResource,</span>
<a href="#l3.87"></a><span id="l3.87" class="difflineplus">+                                 const nsACString&amp; aURI,</span>
<a href="#l3.88"></a><span id="l3.88" class="difflineplus">+                                 nsIMsgFolder **aFolder) MOZ_OVERRIDE;</span>
<a href="#l3.89"></a><span id="l3.89">   NS_IMETHOD SetSocketType(int32_t aSocketType);</span>
<a href="#l3.90"></a><span id="l3.90">   NS_IMETHOD VerifyLogon(nsIUrlListener *aUrlListener, nsIMsgWindow *aMsgWindow,</span>
<a href="#l3.91"></a><span id="l3.91" class="difflineminus">-                         nsIURI **aURL);</span>
<a href="#l3.92"></a><span id="l3.92" class="difflineplus">+                         nsIURI **aURL) MOZ_OVERRIDE;</span>
<a href="#l3.93"></a><span id="l3.93"> </span>
<a href="#l3.94"></a><span id="l3.94"> protected:</span>
<a href="#l3.95"></a><span id="l3.95">   nsresult GetFolder(const nsACString&amp; name, nsIMsgFolder** pFolder);</span>
<a href="#l3.96"></a><span id="l3.96">   virtual nsresult CreateRootFolderFromUri(const nsCString &amp;serverUri,</span>
<a href="#l3.97"></a><span id="l3.97" class="difflineminus">-                                           nsIMsgFolder **rootFolder);</span>
<a href="#l3.98"></a><span id="l3.98" class="difflineplus">+                                           nsIMsgFolder **rootFolder) MOZ_OVERRIDE;</span>
<a href="#l3.99"></a><span id="l3.99">   nsresult ResetFoldersToUnverified(nsIMsgFolder *parentFolder);</span>
<a href="#l3.100"></a><span id="l3.100">   void GetUnverifiedSubFolders(nsIMsgFolder *parentFolder,</span>
<a href="#l3.101"></a><span id="l3.101">                                nsCOMArray&lt;nsIMsgImapMailFolder&gt; &amp;aFoldersArray);</span>
<a href="#l3.102"></a><span id="l3.102">   void GetUnverifiedFolders(nsCOMArray&lt;nsIMsgImapMailFolder&gt; &amp;aFolderArray);</span>
<a href="#l3.103"></a><span id="l3.103">   nsresult DeleteNonVerifiedFolders(nsIMsgFolder *parentFolder);</span>
<a href="#l3.104"></a><span id="l3.104">   bool NoDescendentsAreVerified(nsIMsgFolder *parentFolder);</span>
<a href="#l3.105"></a><span id="l3.105">   bool AllDescendentsAreNoSelect(nsIMsgFolder *parentFolder);</span>
<a href="#l3.106"></a><span id="l3.106"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mailnews/imap/src/nsImapMailFolder.h</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapMailFolder.h</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -1,15 +1,16 @@</span>
<a href="#l4.4"></a><span id="l4.4"> /* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l4.5"></a><span id="l4.5"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l4.6"></a><span id="l4.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l4.7"></a><span id="l4.7">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l4.8"></a><span id="l4.8"> #ifndef nsImapMailFolder_h__</span>
<a href="#l4.9"></a><span id="l4.9"> #define nsImapMailFolder_h__</span>
<a href="#l4.10"></a><span id="l4.10"> </span>
<a href="#l4.11"></a><span id="l4.11" class="difflineplus">+#include &quot;mozilla/Attributes.h&quot;</span>
<a href="#l4.12"></a><span id="l4.12"> #include &quot;nsImapCore.h&quot;</span>
<a href="#l4.13"></a><span id="l4.13"> #include &quot;nsMsgDBFolder.h&quot;</span>
<a href="#l4.14"></a><span id="l4.14"> #include &quot;nsIImapMailFolderSink.h&quot;</span>
<a href="#l4.15"></a><span id="l4.15"> #include &quot;nsIImapMessageSink.h&quot;</span>
<a href="#l4.16"></a><span id="l4.16"> #include &quot;nsICopyMessageListener.h&quot;</span>
<a href="#l4.17"></a><span id="l4.17"> #include &quot;nsIImapService.h&quot;</span>
<a href="#l4.18"></a><span id="l4.18"> #include &quot;nsIUrlListener.h&quot;</span>
<a href="#l4.19"></a><span id="l4.19"> #include &quot;nsAutoPtr.h&quot;</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineat">@@ -194,135 +195,135 @@ class nsImapMailFolder :  public nsMsgDB</span>
<a href="#l4.21"></a><span id="l4.21">  static const uint32_t PLAYBACK_TIMER_INTERVAL_IN_MS = 500; </span>
<a href="#l4.22"></a><span id="l4.22"> public:</span>
<a href="#l4.23"></a><span id="l4.23">   nsImapMailFolder();</span>
<a href="#l4.24"></a><span id="l4.24">   virtual ~nsImapMailFolder();</span>
<a href="#l4.25"></a><span id="l4.25"> </span>
<a href="#l4.26"></a><span id="l4.26">   NS_DECL_ISUPPORTS_INHERITED</span>
<a href="#l4.27"></a><span id="l4.27"> </span>
<a href="#l4.28"></a><span id="l4.28">   // nsIMsgFolder methods:</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineminus">-  NS_IMETHOD GetSubFolders(nsISimpleEnumerator **aResult);</span>
<a href="#l4.30"></a><span id="l4.30" class="difflineplus">+  NS_IMETHOD GetSubFolders(nsISimpleEnumerator **aResult) MOZ_OVERRIDE;</span>
<a href="#l4.31"></a><span id="l4.31"> </span>
<a href="#l4.32"></a><span id="l4.32" class="difflineminus">-  NS_IMETHOD GetMessages(nsISimpleEnumerator* *result);</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineminus">-  NS_IMETHOD UpdateFolder(nsIMsgWindow *aWindow);</span>
<a href="#l4.34"></a><span id="l4.34" class="difflineplus">+  NS_IMETHOD GetMessages(nsISimpleEnumerator* *result) MOZ_OVERRIDE;</span>
<a href="#l4.35"></a><span id="l4.35" class="difflineplus">+  NS_IMETHOD UpdateFolder(nsIMsgWindow *aWindow) MOZ_OVERRIDE;</span>
<a href="#l4.36"></a><span id="l4.36"> </span>
<a href="#l4.37"></a><span id="l4.37" class="difflineminus">-  NS_IMETHOD CreateSubfolder(const nsAString&amp; folderName,nsIMsgWindow *msgWindow );</span>
<a href="#l4.38"></a><span id="l4.38" class="difflineminus">-  NS_IMETHOD AddSubfolder(const nsAString&amp; aName, nsIMsgFolder** aChild);</span>
<a href="#l4.39"></a><span id="l4.39" class="difflineplus">+  NS_IMETHOD CreateSubfolder(const nsAString&amp; folderName,nsIMsgWindow *msgWindow ) MOZ_OVERRIDE;</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineplus">+  NS_IMETHOD AddSubfolder(const nsAString&amp; aName, nsIMsgFolder** aChild) MOZ_OVERRIDE;</span>
<a href="#l4.41"></a><span id="l4.41">   NS_IMETHODIMP CreateStorageIfMissing(nsIUrlListener* urlListener);</span>
<a href="#l4.42"></a><span id="l4.42"> </span>
<a href="#l4.43"></a><span id="l4.43" class="difflineminus">-  NS_IMETHOD Compact(nsIUrlListener *aListener, nsIMsgWindow *aMsgWindow);</span>
<a href="#l4.44"></a><span id="l4.44" class="difflineplus">+  NS_IMETHOD Compact(nsIUrlListener *aListener, nsIMsgWindow *aMsgWindow) MOZ_OVERRIDE;</span>
<a href="#l4.45"></a><span id="l4.45">   NS_IMETHOD CompactAll(nsIUrlListener *aListener, nsIMsgWindow *aMsgWindow,</span>
<a href="#l4.46"></a><span id="l4.46" class="difflineminus">-                        bool aCompactOfflineAlso);</span>
<a href="#l4.47"></a><span id="l4.47" class="difflineminus">-  NS_IMETHOD EmptyTrash(nsIMsgWindow *msgWindow, nsIUrlListener *aListener);</span>
<a href="#l4.48"></a><span id="l4.48" class="difflineplus">+                        bool aCompactOfflineAlso) MOZ_OVERRIDE;</span>
<a href="#l4.49"></a><span id="l4.49" class="difflineplus">+  NS_IMETHOD EmptyTrash(nsIMsgWindow *msgWindow, nsIUrlListener *aListener) MOZ_OVERRIDE;</span>
<a href="#l4.50"></a><span id="l4.50">   NS_IMETHOD CopyDataToOutputStreamForAppend(nsIInputStream *aIStream,</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineminus">-                     int32_t aLength, nsIOutputStream *outputStream);</span>
<a href="#l4.52"></a><span id="l4.52" class="difflineminus">-  NS_IMETHOD CopyDataDone();</span>
<a href="#l4.53"></a><span id="l4.53" class="difflineminus">-  NS_IMETHOD Delete ();</span>
<a href="#l4.54"></a><span id="l4.54" class="difflineminus">-  NS_IMETHOD Rename (const nsAString&amp; newName, nsIMsgWindow *msgWindow);</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineminus">-  NS_IMETHOD RenameSubFolders(nsIMsgWindow *msgWindow, nsIMsgFolder *oldFolder);</span>
<a href="#l4.56"></a><span id="l4.56" class="difflineminus">-  NS_IMETHOD GetNoSelect(bool *aResult);</span>
<a href="#l4.57"></a><span id="l4.57" class="difflineplus">+                     int32_t aLength, nsIOutputStream *outputStream) MOZ_OVERRIDE;</span>
<a href="#l4.58"></a><span id="l4.58" class="difflineplus">+  NS_IMETHOD CopyDataDone() MOZ_OVERRIDE;</span>
<a href="#l4.59"></a><span id="l4.59" class="difflineplus">+  NS_IMETHOD Delete () MOZ_OVERRIDE;</span>
<a href="#l4.60"></a><span id="l4.60" class="difflineplus">+  NS_IMETHOD Rename (const nsAString&amp; newName, nsIMsgWindow *msgWindow) MOZ_OVERRIDE;</span>
<a href="#l4.61"></a><span id="l4.61" class="difflineplus">+  NS_IMETHOD RenameSubFolders(nsIMsgWindow *msgWindow, nsIMsgFolder *oldFolder) MOZ_OVERRIDE;</span>
<a href="#l4.62"></a><span id="l4.62" class="difflineplus">+  NS_IMETHOD GetNoSelect(bool *aResult) MOZ_OVERRIDE;</span>
<a href="#l4.63"></a><span id="l4.63"> </span>
<a href="#l4.64"></a><span id="l4.64" class="difflineminus">-  NS_IMETHOD GetPrettyName(nsAString&amp; prettyName); // Override of the base, for top-level mail folder</span>
<a href="#l4.65"></a><span id="l4.65" class="difflineplus">+  NS_IMETHOD GetPrettyName(nsAString&amp; prettyName) MOZ_OVERRIDE; // Override of the base, for top-level mail folder</span>
<a href="#l4.66"></a><span id="l4.66"> </span>
<a href="#l4.67"></a><span id="l4.67" class="difflineminus">-  NS_IMETHOD GetFolderURL(nsACString&amp; url);</span>
<a href="#l4.68"></a><span id="l4.68" class="difflineplus">+  NS_IMETHOD GetFolderURL(nsACString&amp; url) MOZ_OVERRIDE;</span>
<a href="#l4.69"></a><span id="l4.69"> </span>
<a href="#l4.70"></a><span id="l4.70" class="difflineminus">-  NS_IMETHOD UpdateSummaryTotals(bool force) ;</span>
<a href="#l4.71"></a><span id="l4.71" class="difflineplus">+  NS_IMETHOD UpdateSummaryTotals(bool force) MOZ_OVERRIDE;</span>
<a href="#l4.72"></a><span id="l4.72"> </span>
<a href="#l4.73"></a><span id="l4.73" class="difflineminus">-  NS_IMETHOD GetDeletable (bool *deletable);</span>
<a href="#l4.74"></a><span id="l4.74" class="difflineplus">+  NS_IMETHOD GetDeletable (bool *deletable) MOZ_OVERRIDE;</span>
<a href="#l4.75"></a><span id="l4.75"> </span>
<a href="#l4.76"></a><span id="l4.76" class="difflineminus">-  NS_IMETHOD GetSizeOnDisk(uint32_t * size);</span>
<a href="#l4.77"></a><span id="l4.77" class="difflineplus">+  NS_IMETHOD GetSizeOnDisk(uint32_t * size) MOZ_OVERRIDE;</span>
<a href="#l4.78"></a><span id="l4.78"> </span>
<a href="#l4.79"></a><span id="l4.79" class="difflineminus">-  NS_IMETHOD GetCanCreateSubfolders(bool *aResult);</span>
<a href="#l4.80"></a><span id="l4.80" class="difflineminus">-  NS_IMETHOD GetCanSubscribe(bool *aResult);</span>
<a href="#l4.81"></a><span id="l4.81" class="difflineplus">+  NS_IMETHOD GetCanCreateSubfolders(bool *aResult) MOZ_OVERRIDE;</span>
<a href="#l4.82"></a><span id="l4.82" class="difflineplus">+  NS_IMETHOD GetCanSubscribe(bool *aResult) MOZ_OVERRIDE;</span>
<a href="#l4.83"></a><span id="l4.83"> </span>
<a href="#l4.84"></a><span id="l4.84" class="difflineminus">-  NS_IMETHOD ApplyRetentionSettings();</span>
<a href="#l4.85"></a><span id="l4.85" class="difflineplus">+  NS_IMETHOD ApplyRetentionSettings() MOZ_OVERRIDE;</span>
<a href="#l4.86"></a><span id="l4.86"> </span>
<a href="#l4.87"></a><span id="l4.87" class="difflineminus">-  NS_IMETHOD AddMessageDispositionState(nsIMsgDBHdr *aMessage, nsMsgDispositionState aDispositionFlag);</span>
<a href="#l4.88"></a><span id="l4.88" class="difflineminus">-  NS_IMETHOD MarkMessagesRead(nsIArray *messages, bool markRead);</span>
<a href="#l4.89"></a><span id="l4.89" class="difflineminus">-  NS_IMETHOD MarkAllMessagesRead(nsIMsgWindow *aMsgWindow);</span>
<a href="#l4.90"></a><span id="l4.90" class="difflineminus">-  NS_IMETHOD MarkMessagesFlagged(nsIArray *messages, bool markFlagged);</span>
<a href="#l4.91"></a><span id="l4.91" class="difflineminus">-  NS_IMETHOD MarkThreadRead(nsIMsgThread *thread);</span>
<a href="#l4.92"></a><span id="l4.92" class="difflineminus">-  NS_IMETHOD SetLabelForMessages(nsIArray *aMessages, nsMsgLabelValue aLabel);</span>
<a href="#l4.93"></a><span id="l4.93" class="difflineminus">-  NS_IMETHOD SetJunkScoreForMessages(nsIArray *aMessages, const nsACString&amp; aJunkScore);</span>
<a href="#l4.94"></a><span id="l4.94" class="difflineminus">-  NS_IMETHOD DeleteSubFolders(nsIArray *folders, nsIMsgWindow *msgWindow);</span>
<a href="#l4.95"></a><span id="l4.95" class="difflineminus">-  NS_IMETHOD ReadFromFolderCacheElem(nsIMsgFolderCacheElement *element);</span>
<a href="#l4.96"></a><span id="l4.96" class="difflineminus">-  NS_IMETHOD WriteToFolderCacheElem(nsIMsgFolderCacheElement *element);</span>
<a href="#l4.97"></a><span id="l4.97" class="difflineplus">+  NS_IMETHOD AddMessageDispositionState(nsIMsgDBHdr *aMessage, nsMsgDispositionState aDispositionFlag) MOZ_OVERRIDE;</span>
<a href="#l4.98"></a><span id="l4.98" class="difflineplus">+  NS_IMETHOD MarkMessagesRead(nsIArray *messages, bool markRead) MOZ_OVERRIDE;</span>
<a href="#l4.99"></a><span id="l4.99" class="difflineplus">+  NS_IMETHOD MarkAllMessagesRead(nsIMsgWindow *aMsgWindow) MOZ_OVERRIDE;</span>
<a href="#l4.100"></a><span id="l4.100" class="difflineplus">+  NS_IMETHOD MarkMessagesFlagged(nsIArray *messages, bool markFlagged) MOZ_OVERRIDE;</span>
<a href="#l4.101"></a><span id="l4.101" class="difflineplus">+  NS_IMETHOD MarkThreadRead(nsIMsgThread *thread) MOZ_OVERRIDE;</span>
<a href="#l4.102"></a><span id="l4.102" class="difflineplus">+  NS_IMETHOD SetLabelForMessages(nsIArray *aMessages, nsMsgLabelValue aLabel) MOZ_OVERRIDE;</span>
<a href="#l4.103"></a><span id="l4.103" class="difflineplus">+  NS_IMETHOD SetJunkScoreForMessages(nsIArray *aMessages, const nsACString&amp; aJunkScore) MOZ_OVERRIDE;</span>
<a href="#l4.104"></a><span id="l4.104" class="difflineplus">+  NS_IMETHOD DeleteSubFolders(nsIArray *folders, nsIMsgWindow *msgWindow) MOZ_OVERRIDE;</span>
<a href="#l4.105"></a><span id="l4.105" class="difflineplus">+  NS_IMETHOD ReadFromFolderCacheElem(nsIMsgFolderCacheElement *element) MOZ_OVERRIDE;</span>
<a href="#l4.106"></a><span id="l4.106" class="difflineplus">+  NS_IMETHOD WriteToFolderCacheElem(nsIMsgFolderCacheElement *element) MOZ_OVERRIDE;</span>
<a href="#l4.107"></a><span id="l4.107"> </span>
<a href="#l4.108"></a><span id="l4.108">   NS_IMETHOD GetDBFolderInfoAndDB(nsIDBFolderInfo **folderInfo,</span>
<a href="#l4.109"></a><span id="l4.109" class="difflineminus">-                                  nsIMsgDatabase **db);</span>
<a href="#l4.110"></a><span id="l4.110" class="difflineplus">+                                  nsIMsgDatabase **db) MOZ_OVERRIDE;</span>
<a href="#l4.111"></a><span id="l4.111">   NS_IMETHOD DeleteMessages(nsIArray *messages,</span>
<a href="#l4.112"></a><span id="l4.112">                             nsIMsgWindow *msgWindow, bool</span>
<a href="#l4.113"></a><span id="l4.113">                             deleteStorage, bool isMove,</span>
<a href="#l4.114"></a><span id="l4.114" class="difflineminus">-                            nsIMsgCopyServiceListener* listener, bool allowUndo);</span>
<a href="#l4.115"></a><span id="l4.115" class="difflineplus">+                            nsIMsgCopyServiceListener* listener, bool allowUndo) MOZ_OVERRIDE;</span>
<a href="#l4.116"></a><span id="l4.116">   NS_IMETHOD CopyMessages(nsIMsgFolder *srcFolder,</span>
<a href="#l4.117"></a><span id="l4.117">                           nsIArray* messages,</span>
<a href="#l4.118"></a><span id="l4.118">                           bool isMove, nsIMsgWindow *msgWindow,</span>
<a href="#l4.119"></a><span id="l4.119">                           nsIMsgCopyServiceListener* listener, bool isFolder,</span>
<a href="#l4.120"></a><span id="l4.120" class="difflineminus">-                          bool allowUndo);</span>
<a href="#l4.121"></a><span id="l4.121" class="difflineplus">+                          bool allowUndo) MOZ_OVERRIDE;</span>
<a href="#l4.122"></a><span id="l4.122">   NS_IMETHOD CopyFolder(nsIMsgFolder *srcFolder, bool isMove, nsIMsgWindow *msgWindow,</span>
<a href="#l4.123"></a><span id="l4.123" class="difflineminus">-                        nsIMsgCopyServiceListener* listener);</span>
<a href="#l4.124"></a><span id="l4.124" class="difflineplus">+                        nsIMsgCopyServiceListener* listener) MOZ_OVERRIDE;</span>
<a href="#l4.125"></a><span id="l4.125">   NS_IMETHOD CopyFileMessage(nsIFile* file,</span>
<a href="#l4.126"></a><span id="l4.126">                               nsIMsgDBHdr* msgToReplace,</span>
<a href="#l4.127"></a><span id="l4.127">                               bool isDraftOrTemplate,</span>
<a href="#l4.128"></a><span id="l4.128">                               uint32_t aNewMsgFlags,</span>
<a href="#l4.129"></a><span id="l4.129">                               const nsACString &amp;aNewMsgKeywords,</span>
<a href="#l4.130"></a><span id="l4.130">                               nsIMsgWindow *msgWindow,</span>
<a href="#l4.131"></a><span id="l4.131" class="difflineminus">-                              nsIMsgCopyServiceListener* listener);</span>
<a href="#l4.132"></a><span id="l4.132" class="difflineminus">-  NS_IMETHOD GetNewMessages(nsIMsgWindow *aWindow, nsIUrlListener *aListener);</span>
<a href="#l4.133"></a><span id="l4.133" class="difflineplus">+                              nsIMsgCopyServiceListener* listener) MOZ_OVERRIDE;</span>
<a href="#l4.134"></a><span id="l4.134" class="difflineplus">+  NS_IMETHOD GetNewMessages(nsIMsgWindow *aWindow, nsIUrlListener *aListener) MOZ_OVERRIDE;</span>
<a href="#l4.135"></a><span id="l4.135"> </span>
<a href="#l4.136"></a><span id="l4.136" class="difflineminus">-  NS_IMETHOD GetFilePath(nsIFile** aPathName);</span>
<a href="#l4.137"></a><span id="l4.137" class="difflineminus">-  NS_IMETHOD SetFilePath(nsIFile * aPath);</span>
<a href="#l4.138"></a><span id="l4.138" class="difflineplus">+  NS_IMETHOD GetFilePath(nsIFile** aPathName) MOZ_OVERRIDE;</span>
<a href="#l4.139"></a><span id="l4.139" class="difflineplus">+  NS_IMETHOD SetFilePath(nsIFile * aPath) MOZ_OVERRIDE;</span>
<a href="#l4.140"></a><span id="l4.140"> </span>
<a href="#l4.141"></a><span id="l4.141" class="difflineminus">-  NS_IMETHOD Shutdown(bool shutdownChildren);</span>
<a href="#l4.142"></a><span id="l4.142" class="difflineplus">+  NS_IMETHOD Shutdown(bool shutdownChildren) MOZ_OVERRIDE;</span>
<a href="#l4.143"></a><span id="l4.143"> </span>
<a href="#l4.144"></a><span id="l4.144" class="difflineminus">-  NS_IMETHOD DownloadMessagesForOffline(nsIArray *messages, nsIMsgWindow *msgWindow);</span>
<a href="#l4.145"></a><span id="l4.145" class="difflineplus">+  NS_IMETHOD DownloadMessagesForOffline(nsIArray *messages, nsIMsgWindow *msgWindow) MOZ_OVERRIDE;</span>
<a href="#l4.146"></a><span id="l4.146"> </span>
<a href="#l4.147"></a><span id="l4.147" class="difflineminus">-  NS_IMETHOD DownloadAllForOffline(nsIUrlListener *listener, nsIMsgWindow *msgWindow);</span>
<a href="#l4.148"></a><span id="l4.148" class="difflineminus">-  NS_IMETHOD GetCanFileMessages(bool *aCanFileMessages);</span>
<a href="#l4.149"></a><span id="l4.149" class="difflineminus">-  NS_IMETHOD GetCanDeleteMessages(bool *aCanDeleteMessages);</span>
<a href="#l4.150"></a><span id="l4.150" class="difflineplus">+  NS_IMETHOD DownloadAllForOffline(nsIUrlListener *listener, nsIMsgWindow *msgWindow) MOZ_OVERRIDE;</span>
<a href="#l4.151"></a><span id="l4.151" class="difflineplus">+  NS_IMETHOD GetCanFileMessages(bool *aCanFileMessages) MOZ_OVERRIDE;</span>
<a href="#l4.152"></a><span id="l4.152" class="difflineplus">+  NS_IMETHOD GetCanDeleteMessages(bool *aCanDeleteMessages) MOZ_OVERRIDE;</span>
<a href="#l4.153"></a><span id="l4.153">   NS_IMETHOD FetchMsgPreviewText(nsMsgKey *aKeysToFetch, uint32_t aNumKeys,</span>
<a href="#l4.154"></a><span id="l4.154">                                                  bool aLocalOnly, nsIUrlListener *aUrlListener,</span>
<a href="#l4.155"></a><span id="l4.155" class="difflineminus">-                                                 bool *aAsyncResults);</span>
<a href="#l4.156"></a><span id="l4.156" class="difflineplus">+                                                 bool *aAsyncResults) MOZ_OVERRIDE;</span>
<a href="#l4.157"></a><span id="l4.157"> </span>
<a href="#l4.158"></a><span id="l4.158" class="difflineminus">-  NS_IMETHOD AddKeywordsToMessages(nsIArray *aMessages, const nsACString&amp; aKeywords);</span>
<a href="#l4.159"></a><span id="l4.159" class="difflineminus">-  NS_IMETHOD RemoveKeywordsFromMessages(nsIArray *aMessages, const nsACString&amp; aKeywords);</span>
<a href="#l4.160"></a><span id="l4.160" class="difflineplus">+  NS_IMETHOD AddKeywordsToMessages(nsIArray *aMessages, const nsACString&amp; aKeywords) MOZ_OVERRIDE;</span>
<a href="#l4.161"></a><span id="l4.161" class="difflineplus">+  NS_IMETHOD RemoveKeywordsFromMessages(nsIArray *aMessages, const nsACString&amp; aKeywords) MOZ_OVERRIDE;</span>
<a href="#l4.162"></a><span id="l4.162"> </span>
<a href="#l4.163"></a><span id="l4.163" class="difflineminus">-  NS_IMETHOD NotifyCompactCompleted();</span>
<a href="#l4.164"></a><span id="l4.164" class="difflineplus">+  NS_IMETHOD NotifyCompactCompleted() MOZ_OVERRIDE;</span>
<a href="#l4.165"></a><span id="l4.165"> </span>
<a href="#l4.166"></a><span id="l4.166">   // overrides nsMsgDBFolder::HasMsgOffline()</span>
<a href="#l4.167"></a><span id="l4.167" class="difflineminus">-  NS_IMETHOD HasMsgOffline(nsMsgKey msgKey, bool *_retval);</span>
<a href="#l4.168"></a><span id="l4.168" class="difflineplus">+  NS_IMETHOD HasMsgOffline(nsMsgKey msgKey, bool *_retval) MOZ_OVERRIDE;</span>
<a href="#l4.169"></a><span id="l4.169">   // overrides nsMsgDBFolder::GetOfflineFileStream()</span>
<a href="#l4.170"></a><span id="l4.170" class="difflineminus">-  NS_IMETHOD GetOfflineFileStream(nsMsgKey msgKey, int64_t *offset, uint32_t *size, nsIInputStream **aFileStream);</span>
<a href="#l4.171"></a><span id="l4.171" class="difflineplus">+  NS_IMETHOD GetOfflineFileStream(nsMsgKey msgKey, int64_t *offset, uint32_t *size, nsIInputStream **aFileStream) MOZ_OVERRIDE;</span>
<a href="#l4.172"></a><span id="l4.172"> </span>
<a href="#l4.173"></a><span id="l4.173">   NS_DECL_NSIMSGIMAPMAILFOLDER</span>
<a href="#l4.174"></a><span id="l4.174">   NS_DECL_NSIIMAPMAILFOLDERSINK</span>
<a href="#l4.175"></a><span id="l4.175">   NS_DECL_NSIIMAPMESSAGESINK</span>
<a href="#l4.176"></a><span id="l4.176">   NS_DECL_NSICOPYMESSAGELISTENER</span>
<a href="#l4.177"></a><span id="l4.177">   NS_DECL_NSIREQUESTOBSERVER</span>
<a href="#l4.178"></a><span id="l4.178"> </span>
<a href="#l4.179"></a><span id="l4.179">   // nsIUrlListener methods</span>
<a href="#l4.180"></a><span id="l4.180" class="difflineminus">-  NS_IMETHOD OnStartRunningUrl(nsIURI * aUrl);</span>
<a href="#l4.181"></a><span id="l4.181" class="difflineminus">-  NS_IMETHOD OnStopRunningUrl(nsIURI * aUrl, nsresult aExitCode);</span>
<a href="#l4.182"></a><span id="l4.182" class="difflineplus">+  NS_IMETHOD OnStartRunningUrl(nsIURI * aUrl) MOZ_OVERRIDE;</span>
<a href="#l4.183"></a><span id="l4.183" class="difflineplus">+  NS_IMETHOD OnStopRunningUrl(nsIURI * aUrl, nsresult aExitCode) MOZ_OVERRIDE;</span>
<a href="#l4.184"></a><span id="l4.184"> </span>
<a href="#l4.185"></a><span id="l4.185">   NS_DECL_NSIMSGFILTERHITNOTIFY</span>
<a href="#l4.186"></a><span id="l4.186">   NS_DECL_NSIJUNKMAILCLASSIFICATIONLISTENER</span>
<a href="#l4.187"></a><span id="l4.187"> </span>
<a href="#l4.188"></a><span id="l4.188" class="difflineminus">-  NS_IMETHOD IsCommandEnabled(const nsACString&amp; command, bool *result);</span>
<a href="#l4.189"></a><span id="l4.189" class="difflineminus">-  NS_IMETHOD SetFilterList(nsIMsgFilterList *aMsgFilterList);</span>
<a href="#l4.190"></a><span id="l4.190" class="difflineminus">-  NS_IMETHOD GetCustomIdentity(nsIMsgIdentity **aIdentity);</span>
<a href="#l4.191"></a><span id="l4.191" class="difflineplus">+  NS_IMETHOD IsCommandEnabled(const nsACString&amp; command, bool *result) MOZ_OVERRIDE;</span>
<a href="#l4.192"></a><span id="l4.192" class="difflineplus">+  NS_IMETHOD SetFilterList(nsIMsgFilterList *aMsgFilterList) MOZ_OVERRIDE;</span>
<a href="#l4.193"></a><span id="l4.193" class="difflineplus">+  NS_IMETHOD GetCustomIdentity(nsIMsgIdentity **aIdentity) MOZ_OVERRIDE;</span>
<a href="#l4.194"></a><span id="l4.194"> </span>
<a href="#l4.195"></a><span id="l4.195">  /**</span>
<a href="#l4.196"></a><span id="l4.196">   * This method is used to locate a folder where a msg could be present, not just</span>
<a href="#l4.197"></a><span id="l4.197">   * the folder where the message first arrives, this method searches for the existence</span>
<a href="#l4.198"></a><span id="l4.198">   * of msg in all the folders/labels that we retrieve from X-GM-LABELS also.</span>
<a href="#l4.199"></a><span id="l4.199">   * overrides nsMsgDBFolder::GetOfflineMsgFolder()</span>
<a href="#l4.200"></a><span id="l4.200">   *  @param msgKey key  of the msg for which we are trying to get the folder;</span>
<a href="#l4.201"></a><span id="l4.201">   *  @param aMsgFolder  required folder;</span>
<a href="#l4.202"></a><span id="l4.202">   */</span>
<a href="#l4.203"></a><span id="l4.203" class="difflineminus">-  NS_IMETHOD GetOfflineMsgFolder(nsMsgKey msgKey, nsIMsgFolder **aMsgFolder);</span>
<a href="#l4.204"></a><span id="l4.204" class="difflineplus">+  NS_IMETHOD GetOfflineMsgFolder(nsMsgKey msgKey, nsIMsgFolder **aMsgFolder) MOZ_OVERRIDE;</span>
<a href="#l4.205"></a><span id="l4.205"> </span>
<a href="#l4.206"></a><span id="l4.206">   nsresult AddSubfolderWithPath(nsAString&amp; name, nsIFile *dbPath, nsIMsgFolder **child, bool brandNew = false);</span>
<a href="#l4.207"></a><span id="l4.207">   nsresult MoveIncorporatedMessage(nsIMsgDBHdr *mailHdr,</span>
<a href="#l4.208"></a><span id="l4.208">                                   nsIMsgDatabase *sourceDB,</span>
<a href="#l4.209"></a><span id="l4.209">                                   const nsACString&amp; destFolder,</span>
<a href="#l4.210"></a><span id="l4.210">                                   nsIMsgFilter *filter,</span>
<a href="#l4.211"></a><span id="l4.211">                                   nsIMsgWindow *msgWindow);</span>
<a href="#l4.212"></a><span id="l4.212"> </span>
<a href="#l4.213"></a><span id="l4.213" class="difflineat">@@ -337,17 +338,17 @@ public:</span>
<a href="#l4.214"></a><span id="l4.214">   nsresult GetSupportedUserFlags(uint32_t *userFlags);</span>
<a href="#l4.215"></a><span id="l4.215"> </span>
<a href="#l4.216"></a><span id="l4.216">   // Find the start of a range of msgKeys that can hold srcCount headers.</span>
<a href="#l4.217"></a><span id="l4.217">   nsresult FindOpenRange(nsMsgKey &amp;fakeBase, uint32_t srcCount);</span>
<a href="#l4.218"></a><span id="l4.218"> </span>
<a href="#l4.219"></a><span id="l4.219"> protected:</span>
<a href="#l4.220"></a><span id="l4.220">   // Helper methods</span>
<a href="#l4.221"></a><span id="l4.221"> </span>
<a href="#l4.222"></a><span id="l4.222" class="difflineminus">-  virtual nsresult CreateChildFromURI(const nsCString &amp;uri, nsIMsgFolder **folder);</span>
<a href="#l4.223"></a><span id="l4.223" class="difflineplus">+  virtual nsresult CreateChildFromURI(const nsCString &amp;uri, nsIMsgFolder **folder) MOZ_OVERRIDE;</span>
<a href="#l4.224"></a><span id="l4.224">   void FindKeysToAdd(const nsTArray&lt;nsMsgKey&gt; &amp;existingKeys, nsTArray&lt;nsMsgKey&gt;</span>
<a href="#l4.225"></a><span id="l4.225">     &amp;keysToFetch, uint32_t &amp;numNewUnread, nsIImapFlagAndUidState *flagState);</span>
<a href="#l4.226"></a><span id="l4.226">   void FindKeysToDelete(const nsTArray&lt;nsMsgKey&gt; &amp;existingKeys, nsTArray&lt;nsMsgKey&gt;</span>
<a href="#l4.227"></a><span id="l4.227">     &amp;keysToFetch, nsIImapFlagAndUidState *flagState, uint32_t boxFlags);</span>
<a href="#l4.228"></a><span id="l4.228">   void PrepareToAddHeadersToMailDB(nsIImapProtocol* aProtocol);</span>
<a href="#l4.229"></a><span id="l4.229">   void TweakHeaderFlags(nsIImapProtocol* aProtocol, nsIMsgDBHdr *tweakMe);</span>
<a href="#l4.230"></a><span id="l4.230"> </span>
<a href="#l4.231"></a><span id="l4.231">   nsresult SyncFlags(nsIImapFlagAndUidState *flagState);</span>
<a href="#l4.232"></a><span id="l4.232" class="difflineat">@@ -377,18 +378,18 @@ protected:</span>
<a href="#l4.233"></a><span id="l4.233">   bool TrashOrDescendentOfTrash(nsIMsgFolder* folder);</span>
<a href="#l4.234"></a><span id="l4.234">   static bool ShouldCheckAllFolders(nsIImapIncomingServer *imapServer);</span>
<a href="#l4.235"></a><span id="l4.235">   nsresult GetServerKey(nsACString&amp; serverKey);</span>
<a href="#l4.236"></a><span id="l4.236">   nsresult DisplayStatusMsg(nsIImapUrl *aImapUrl, const nsAString&amp; msg);</span>
<a href="#l4.237"></a><span id="l4.237"> </span>
<a href="#l4.238"></a><span id="l4.238">   //nsresult RenameLocal(const char *newName);</span>
<a href="#l4.239"></a><span id="l4.239">   nsresult AddDirectorySeparator(nsIFile *path);</span>
<a href="#l4.240"></a><span id="l4.240">   nsresult CreateSubFolders(nsIFile *path);</span>
<a href="#l4.241"></a><span id="l4.241" class="difflineminus">-  nsresult GetDatabase();</span>
<a href="#l4.242"></a><span id="l4.242" class="difflineminus">-  virtual void GetIncomingServerType(nsCString&amp; serverType) { serverType.AssignLiteral(&quot;imap&quot;);}</span>
<a href="#l4.243"></a><span id="l4.243" class="difflineplus">+  nsresult GetDatabase() MOZ_OVERRIDE;</span>
<a href="#l4.244"></a><span id="l4.244" class="difflineplus">+  virtual void GetIncomingServerType(nsCString&amp; serverType) MOZ_OVERRIDE { serverType.AssignLiteral(&quot;imap&quot;);}</span>
<a href="#l4.245"></a><span id="l4.245"> </span>
<a href="#l4.246"></a><span id="l4.246">   nsresult        GetFolderOwnerUserName(nsACString&amp; userName);</span>
<a href="#l4.247"></a><span id="l4.247">   nsIMAPNamespace *GetNamespaceForFolder();</span>
<a href="#l4.248"></a><span id="l4.248">   void            SetNamespaceForFolder(nsIMAPNamespace *ns);</span>
<a href="#l4.249"></a><span id="l4.249"> </span>
<a href="#l4.250"></a><span id="l4.250">   nsMsgIMAPFolderACL * GetFolderACL();</span>
<a href="#l4.251"></a><span id="l4.251">   nsresult CreateACLRightsStringForFolder(nsAString&amp; rightsString);</span>
<a href="#l4.252"></a><span id="l4.252">   nsresult GetBodysToDownload(nsTArray&lt;nsMsgKey&gt; *keysOfMessagesToDownload);</span>
<a href="#l4.253"></a><span id="l4.253" class="difflineat">@@ -408,17 +409,17 @@ protected:</span>
<a href="#l4.254"></a><span id="l4.254">                           bool acrossServers,</span>
<a href="#l4.255"></a><span id="l4.255">                           uint32_t newMsgFlags,</span>
<a href="#l4.256"></a><span id="l4.256">                           const nsACString &amp;newMsgKeywords,</span>
<a href="#l4.257"></a><span id="l4.257">                           nsIMsgCopyServiceListener* listener,</span>
<a href="#l4.258"></a><span id="l4.258">                           nsIMsgWindow *msgWindow,</span>
<a href="#l4.259"></a><span id="l4.259">                           bool allowUndo);</span>
<a href="#l4.260"></a><span id="l4.260">   nsresult GetMoveCoalescer();</span>
<a href="#l4.261"></a><span id="l4.261">   nsresult PlaybackCoalescedOperations();</span>
<a href="#l4.262"></a><span id="l4.262" class="difflineminus">-  virtual nsresult CreateBaseMessageURI(const nsACString&amp; aURI);</span>
<a href="#l4.263"></a><span id="l4.263" class="difflineplus">+  virtual nsresult CreateBaseMessageURI(const nsACString&amp; aURI) MOZ_OVERRIDE;</span>
<a href="#l4.264"></a><span id="l4.264">   // offline-ish methods</span>
<a href="#l4.265"></a><span id="l4.265">   nsresult GetClearedOriginalOp(nsIMsgOfflineImapOperation *op, nsIMsgOfflineImapOperation **originalOp, nsIMsgDatabase **originalDB);</span>
<a href="#l4.266"></a><span id="l4.266">   nsresult GetOriginalOp(nsIMsgOfflineImapOperation *op, nsIMsgOfflineImapOperation **originalOp, nsIMsgDatabase **originalDB);</span>
<a href="#l4.267"></a><span id="l4.267">   nsresult CopyMessagesOffline(nsIMsgFolder* srcFolder,</span>
<a href="#l4.268"></a><span id="l4.268">                                 nsIArray* messages,</span>
<a href="#l4.269"></a><span id="l4.269">                                 bool isMove,</span>
<a href="#l4.270"></a><span id="l4.270">                                 nsIMsgWindow *msgWindow,</span>
<a href="#l4.271"></a><span id="l4.271">                                 nsIMsgCopyServiceListener* listener);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mailnews/imap/src/nsImapOfflineSync.h</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapOfflineSync.h</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -2,16 +2,17 @@</span>
<a href="#l5.4"></a><span id="l5.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l5.5"></a><span id="l5.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l5.6"></a><span id="l5.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l5.7"></a><span id="l5.7"> </span>
<a href="#l5.8"></a><span id="l5.8"> #ifndef _nsImapOfflineSync_H_</span>
<a href="#l5.9"></a><span id="l5.9"> #define _nsImapOfflineSync_H_</span>
<a href="#l5.10"></a><span id="l5.10"> </span>
<a href="#l5.11"></a><span id="l5.11"> </span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+#include &quot;mozilla/Attributes.h&quot;</span>
<a href="#l5.13"></a><span id="l5.13"> #include &quot;nsIMsgDatabase.h&quot;</span>
<a href="#l5.14"></a><span id="l5.14"> #include &quot;nsIUrlListener.h&quot;</span>
<a href="#l5.15"></a><span id="l5.15"> #include &quot;nsIMsgOfflineImapOperation.h&quot;</span>
<a href="#l5.16"></a><span id="l5.16"> #include &quot;nsIMsgWindow.h&quot;</span>
<a href="#l5.17"></a><span id="l5.17"> #include &quot;nsIMsgFolder.h&quot;</span>
<a href="#l5.18"></a><span id="l5.18"> #include &quot;nsCOMArray.h&quot;</span>
<a href="#l5.19"></a><span id="l5.19"> #include &quot;nsIDBChangeListener.h&quot;</span>
<a href="#l5.20"></a><span id="l5.20"> </span>
<a href="#l5.21"></a><span id="l5.21" class="difflineat">@@ -80,12 +81,12 @@ protected:</span>
<a href="#l5.22"></a><span id="l5.22">   </span>
<a href="#l5.23"></a><span id="l5.23"> };</span>
<a href="#l5.24"></a><span id="l5.24"> </span>
<a href="#l5.25"></a><span id="l5.25"> class nsImapOfflineDownloader : public nsImapOfflineSync</span>
<a href="#l5.26"></a><span id="l5.26"> {</span>
<a href="#l5.27"></a><span id="l5.27"> public:</span>
<a href="#l5.28"></a><span id="l5.28">   nsImapOfflineDownloader(nsIMsgWindow *window, nsIUrlListener *listener);</span>
<a href="#l5.29"></a><span id="l5.29">   virtual ~nsImapOfflineDownloader();</span>
<a href="#l5.30"></a><span id="l5.30" class="difflineminus">-  virtual nsresult  ProcessNextOperation(); // this kicks off download</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineplus">+  virtual nsresult  ProcessNextOperation() MOZ_OVERRIDE; // this kicks off download</span>
<a href="#l5.32"></a><span id="l5.32"> };</span>
<a href="#l5.33"></a><span id="l5.33"> </span>
<a href="#l5.34"></a><span id="l5.34"> #endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mailnews/imap/src/nsImapProtocol.h</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapProtocol.h</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -1,16 +1,17 @@</span>
<a href="#l6.4"></a><span id="l6.4"> /* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l6.5"></a><span id="l6.5"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l6.6"></a><span id="l6.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l6.7"></a><span id="l6.7">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l6.8"></a><span id="l6.8"> </span>
<a href="#l6.9"></a><span id="l6.9"> #ifndef nsImapProtocol_h___</span>
<a href="#l6.10"></a><span id="l6.10"> #define nsImapProtocol_h___</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+#include &quot;mozilla/Attributes.h&quot;</span>
<a href="#l6.13"></a><span id="l6.13"> #include &quot;nsIImapProtocol.h&quot;</span>
<a href="#l6.14"></a><span id="l6.14"> #include &quot;nsIImapUrl.h&quot;</span>
<a href="#l6.15"></a><span id="l6.15"> </span>
<a href="#l6.16"></a><span id="l6.16"> #include &quot;nsMsgProtocol.h&quot;</span>
<a href="#l6.17"></a><span id="l6.17"> #include &quot;nsIStreamListener.h&quot;</span>
<a href="#l6.18"></a><span id="l6.18"> #include &quot;nsIAsyncOutputStream.h&quot;</span>
<a href="#l6.19"></a><span id="l6.19"> #include &quot;nsIAsyncInputStream.h&quot;</span>
<a href="#l6.20"></a><span id="l6.20"> #include &quot;nsImapCore.h&quot;</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineat">@@ -134,20 +135,20 @@ class nsImapProtocol : public nsIImapPro</span>
<a href="#l6.22"></a><span id="l6.22"> public:</span>
<a href="#l6.23"></a><span id="l6.23"> </span>
<a href="#l6.24"></a><span id="l6.24">   NS_DECL_ISUPPORTS</span>
<a href="#l6.25"></a><span id="l6.25">   NS_DECL_NSIINPUTSTREAMCALLBACK</span>
<a href="#l6.26"></a><span id="l6.26">   nsImapProtocol();</span>
<a href="#l6.27"></a><span id="l6.27">   virtual ~nsImapProtocol();</span>
<a href="#l6.28"></a><span id="l6.28"> </span>
<a href="#l6.29"></a><span id="l6.29">   virtual nsresult ProcessProtocolState(nsIURI * url, nsIInputStream * inputStream,</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineminus">-                                        uint64_t sourceOffset, uint32_t length);</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineplus">+                                        uint64_t sourceOffset, uint32_t length) MOZ_OVERRIDE;</span>
<a href="#l6.32"></a><span id="l6.32"> </span>
<a href="#l6.33"></a><span id="l6.33">   // nsIRunnable method</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineminus">-  NS_IMETHOD Run();</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineplus">+  NS_IMETHOD Run() MOZ_OVERRIDE;</span>
<a href="#l6.36"></a><span id="l6.36"> </span>
<a href="#l6.37"></a><span id="l6.37">   //////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l6.38"></a><span id="l6.38">   // we support the nsIImapProtocol interface</span>
<a href="#l6.39"></a><span id="l6.39">   //////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l6.40"></a><span id="l6.40">   NS_DECL_NSIIMAPPROTOCOL</span>
<a href="#l6.41"></a><span id="l6.41"> </span>
<a href="#l6.42"></a><span id="l6.42">   //////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l6.43"></a><span id="l6.43">   // we support the nsIImapProtocolSink interface</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineat">@@ -427,17 +428,17 @@ private:</span>
<a href="#l6.45"></a><span id="l6.45">   // Communication methods --&gt; Reading and writing protocol</span>
<a href="#l6.46"></a><span id="l6.46">   ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l6.47"></a><span id="l6.47"> </span>
<a href="#l6.48"></a><span id="l6.48">   // SendData not only writes the NULL terminated data in dataBuffer to our output stream</span>
<a href="#l6.49"></a><span id="l6.49">   // but it also informs the consumer that the data has been written to the stream.</span>
<a href="#l6.50"></a><span id="l6.50">   // aSuppressLogging --&gt; set to true if you wish to suppress logging for this particular command.</span>
<a href="#l6.51"></a><span id="l6.51">   // this is useful for making sure we don't log authenication information like the user's password (which was</span>
<a href="#l6.52"></a><span id="l6.52">   // encoded anyway), but still we shouldn't add that information to the log.</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineminus">-  nsresult SendData(const char * dataBuffer, bool aSuppressLogging = false);</span>
<a href="#l6.54"></a><span id="l6.54" class="difflineplus">+  nsresult SendData(const char * dataBuffer, bool aSuppressLogging = false) MOZ_OVERRIDE;</span>
<a href="#l6.55"></a><span id="l6.55"> </span>
<a href="#l6.56"></a><span id="l6.56">   // state ported over from 4.5</span>
<a href="#l6.57"></a><span id="l6.57">   bool m_pseudoInterrupted;</span>
<a href="#l6.58"></a><span id="l6.58">   bool m_active;</span>
<a href="#l6.59"></a><span id="l6.59">   bool m_folderNeedsSubscribing;</span>
<a href="#l6.60"></a><span id="l6.60">   bool m_folderNeedsACLRefreshed;</span>
<a href="#l6.61"></a><span id="l6.61"> </span>
<a href="#l6.62"></a><span id="l6.62">   bool m_threadShouldDie;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mailnews/imap/src/nsImapServerResponseParser.h</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapServerResponseParser.h</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -1,16 +1,17 @@</span>
<a href="#l7.4"></a><span id="l7.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l7.5"></a><span id="l7.5"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l7.6"></a><span id="l7.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l7.7"></a><span id="l7.7">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l7.8"></a><span id="l7.8"> </span>
<a href="#l7.9"></a><span id="l7.9"> #ifndef _nsIMAPServerResponseParser_H_</span>
<a href="#l7.10"></a><span id="l7.10"> #define _nsIMAPServerResponseParser_H_</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+#include &quot;mozilla/Attributes.h&quot;</span>
<a href="#l7.13"></a><span id="l7.13"> #include &quot;nsIMAPHostSessionList.h&quot;</span>
<a href="#l7.14"></a><span id="l7.14"> #include &quot;nsImapSearchResults.h&quot;</span>
<a href="#l7.15"></a><span id="l7.15"> #include &quot;nsStringGlue.h&quot;</span>
<a href="#l7.16"></a><span id="l7.16"> #include &quot;MailNewsTypes.h&quot;</span>
<a href="#l7.17"></a><span id="l7.17"> #include &quot;nsTArray.h&quot;</span>
<a href="#l7.18"></a><span id="l7.18"> #include &quot;nsImapUtils.h&quot;</span>
<a href="#l7.19"></a><span id="l7.19"> #include &quot;nsAutoPtr.h&quot;</span>
<a href="#l7.20"></a><span id="l7.20"> </span>
<a href="#l7.21"></a><span id="l7.21" class="difflineat">@@ -26,18 +27,18 @@ class nsCString;</span>
<a href="#l7.22"></a><span id="l7.22"> </span>
<a href="#l7.23"></a><span id="l7.23"> class nsImapServerResponseParser : public nsIMAPGenericParser</span>
<a href="#l7.24"></a><span id="l7.24"> {</span>
<a href="#l7.25"></a><span id="l7.25"> public:</span>
<a href="#l7.26"></a><span id="l7.26">   nsImapServerResponseParser(nsImapProtocol &amp;imapConnection);</span>
<a href="#l7.27"></a><span id="l7.27">   virtual ~nsImapServerResponseParser();</span>
<a href="#l7.28"></a><span id="l7.28"> </span>
<a href="#l7.29"></a><span id="l7.29">   // Overridden from the base parser class</span>
<a href="#l7.30"></a><span id="l7.30" class="difflineminus">-  virtual bool       LastCommandSuccessful();</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-  virtual void HandleMemoryFailure();</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+  virtual bool       LastCommandSuccessful() MOZ_OVERRIDE;</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineplus">+  virtual void HandleMemoryFailure() MOZ_OVERRIDE;</span>
<a href="#l7.34"></a><span id="l7.34"> </span>
<a href="#l7.35"></a><span id="l7.35">   // aignoreBadAndNOResponses --&gt; don't throw a error dialog if this command results in a NO or Bad response</span>
<a href="#l7.36"></a><span id="l7.36">   // from the server..in other words the command is &quot;exploratory&quot; and we don't really care if it succeeds or fails.</span>
<a href="#l7.37"></a><span id="l7.37">   // This value is typically FALSE for almost all cases.</span>
<a href="#l7.38"></a><span id="l7.38">   virtual void ParseIMAPServerResponse(const char *aCurrentCommand,</span>
<a href="#l7.39"></a><span id="l7.39">                                        bool aIgnoreBadAndNOResponses,</span>
<a href="#l7.40"></a><span id="l7.40">                                        char *aGreetingWithCapability = NULL);</span>
<a href="#l7.41"></a><span id="l7.41">   virtual void InitializeState();</span>
<a href="#l7.42"></a><span id="l7.42" class="difflineat">@@ -176,19 +177,19 @@ protected:</span>
<a href="#l7.43"></a><span id="l7.43">   virtual void    ProcessOkCommand(const char *commandToken);</span>
<a href="#l7.44"></a><span id="l7.44">   virtual void    ProcessBadCommand(const char *commandToken);</span>
<a href="#l7.45"></a><span id="l7.45">   virtual void    PreProcessCommandToken(const char *commandToken,</span>
<a href="#l7.46"></a><span id="l7.46">                                              const char *currentCommand);</span>
<a href="#l7.47"></a><span id="l7.47">   virtual void    PostProcessEndOfLine();</span>
<a href="#l7.48"></a><span id="l7.48"> </span>
<a href="#l7.49"></a><span id="l7.49">   // Overridden from the nsIMAPGenericParser, to retrieve the next line</span>
<a href="#l7.50"></a><span id="l7.50">   // from the open socket.</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineminus">-  virtual bool    GetNextLineForParser(char **nextLine);</span>
<a href="#l7.52"></a><span id="l7.52" class="difflineplus">+  virtual bool    GetNextLineForParser(char **nextLine) MOZ_OVERRIDE;</span>
<a href="#l7.53"></a><span id="l7.53">   // overriden to do logging</span>
<a href="#l7.54"></a><span id="l7.54" class="difflineminus">-  virtual void    SetSyntaxError(bool error, const char *msg = nullptr);</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineplus">+  virtual void    SetSyntaxError(bool error, const char *msg = nullptr) MOZ_OVERRIDE;</span>
<a href="#l7.56"></a><span id="l7.56"> </span>
<a href="#l7.57"></a><span id="l7.57"> private:</span>
<a href="#l7.58"></a><span id="l7.58">   bool            fCurrentCommandFailed;</span>
<a href="#l7.59"></a><span id="l7.59">   bool            fReportingErrors;</span>
<a href="#l7.60"></a><span id="l7.60"> </span>
<a href="#l7.61"></a><span id="l7.61"> </span>
<a href="#l7.62"></a><span id="l7.62">   bool            fCurrentFolderReadOnly;</span>
<a href="#l7.63"></a><span id="l7.63">   bool            fCurrentLineContainedFlagInfo;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mailnews/imap/src/nsImapUndoTxn.h</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapUndoTxn.h</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -1,16 +1,17 @@</span>
<a href="#l8.4"></a><span id="l8.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */</span>
<a href="#l8.5"></a><span id="l8.5"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l8.6"></a><span id="l8.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l8.7"></a><span id="l8.7">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l8.8"></a><span id="l8.8"> </span>
<a href="#l8.9"></a><span id="l8.9"> #ifndef nsImapUndoTxn_h__</span>
<a href="#l8.10"></a><span id="l8.10"> #define nsImapUndoTxn_h__</span>
<a href="#l8.11"></a><span id="l8.11"> </span>
<a href="#l8.12"></a><span id="l8.12" class="difflineplus">+#include &quot;mozilla/Attributes.h&quot;</span>
<a href="#l8.13"></a><span id="l8.13"> #include &quot;nsIMsgFolder.h&quot;</span>
<a href="#l8.14"></a><span id="l8.14"> #include &quot;nsImapCore.h&quot;</span>
<a href="#l8.15"></a><span id="l8.15"> #include &quot;nsIImapService.h&quot;</span>
<a href="#l8.16"></a><span id="l8.16"> #include &quot;nsIImapIncomingServer.h&quot;</span>
<a href="#l8.17"></a><span id="l8.17"> #include &quot;nsIUrlListener.h&quot;</span>
<a href="#l8.18"></a><span id="l8.18"> #include &quot;nsMsgTxn.h&quot;</span>
<a href="#l8.19"></a><span id="l8.19"> #include &quot;MailNewsTypes.h&quot;</span>
<a href="#l8.20"></a><span id="l8.20"> #include &quot;nsTArray.h&quot;</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineat">@@ -27,18 +28,18 @@ public:</span>
<a href="#l8.22"></a><span id="l8.22">   nsImapMoveCopyMsgTxn(nsIMsgFolder* srcFolder, nsTArray&lt;nsMsgKey&gt;* srcKeyArray,</span>
<a href="#l8.23"></a><span id="l8.23">                        const char* srcMsgIdString, nsIMsgFolder* dstFolder,</span>
<a href="#l8.24"></a><span id="l8.24">                        bool isMove);</span>
<a href="#l8.25"></a><span id="l8.25">   virtual ~nsImapMoveCopyMsgTxn();</span>
<a href="#l8.26"></a><span id="l8.26"> </span>
<a href="#l8.27"></a><span id="l8.27">   NS_DECL_ISUPPORTS_INHERITED</span>
<a href="#l8.28"></a><span id="l8.28">   NS_DECL_NSIURLLISTENER</span>
<a href="#l8.29"></a><span id="l8.29"> </span>
<a href="#l8.30"></a><span id="l8.30" class="difflineminus">-  NS_IMETHOD UndoTransaction(void);</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">-  NS_IMETHOD RedoTransaction(void);</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineplus">+  NS_IMETHOD UndoTransaction(void) MOZ_OVERRIDE;</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineplus">+  NS_IMETHOD RedoTransaction(void) MOZ_OVERRIDE;</span>
<a href="#l8.34"></a><span id="l8.34"> </span>
<a href="#l8.35"></a><span id="l8.35">   // helper</span>
<a href="#l8.36"></a><span id="l8.36">   nsresult SetCopyResponseUid(const char *msgIdString);</span>
<a href="#l8.37"></a><span id="l8.37">   nsresult GetSrcKeyArray(nsTArray&lt;nsMsgKey&gt;&amp; srcKeyArray);</span>
<a href="#l8.38"></a><span id="l8.38">   void GetSrcMsgIds(nsCString &amp;srcMsgIds) {srcMsgIds = m_srcMsgIdString;}</span>
<a href="#l8.39"></a><span id="l8.39">   nsresult AddDstKey(nsMsgKey aKey);</span>
<a href="#l8.40"></a><span id="l8.40">   nsresult UndoMailboxDelete();</span>
<a href="#l8.41"></a><span id="l8.41">   nsresult RedoMailboxDelete();</span>
<a href="#l8.42"></a><span id="l8.42" class="difflineat">@@ -73,18 +74,18 @@ public:</span>
<a href="#l8.43"></a><span id="l8.43">   nsImapOfflineTxn(nsIMsgFolder* srcFolder, nsTArray&lt;nsMsgKey&gt;* srcKeyArray,</span>
<a href="#l8.44"></a><span id="l8.44">                    const char* srcMsgIdString,</span>
<a href="#l8.45"></a><span id="l8.45">                    nsIMsgFolder* dstFolder,</span>
<a href="#l8.46"></a><span id="l8.46">                    bool isMove,</span>
<a href="#l8.47"></a><span id="l8.47">                    nsOfflineImapOperationType opType,</span>
<a href="#l8.48"></a><span id="l8.48">                    nsCOMArray&lt;nsIMsgDBHdr&gt; &amp;srcHdrs);</span>
<a href="#l8.49"></a><span id="l8.49">   virtual ~nsImapOfflineTxn();</span>
<a href="#l8.50"></a><span id="l8.50"> </span>
<a href="#l8.51"></a><span id="l8.51" class="difflineminus">-  NS_IMETHOD UndoTransaction(void);</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineminus">-  NS_IMETHOD RedoTransaction(void);</span>
<a href="#l8.53"></a><span id="l8.53" class="difflineplus">+  NS_IMETHOD UndoTransaction(void) MOZ_OVERRIDE;</span>
<a href="#l8.54"></a><span id="l8.54" class="difflineplus">+  NS_IMETHOD RedoTransaction(void) MOZ_OVERRIDE;</span>
<a href="#l8.55"></a><span id="l8.55">   void SetAddFlags(bool addFlags) {m_addFlags = addFlags;}</span>
<a href="#l8.56"></a><span id="l8.56">   void SetFlags(uint32_t flags) {m_flags = flags;}</span>
<a href="#l8.57"></a><span id="l8.57"> protected:</span>
<a href="#l8.58"></a><span id="l8.58">   nsOfflineImapOperationType m_opType;</span>
<a href="#l8.59"></a><span id="l8.59">   // these two are used to undo flag changes, which we don't currently do.</span>
<a href="#l8.60"></a><span id="l8.60">   bool m_addFlags;</span>
<a href="#l8.61"></a><span id="l8.61">   uint32_t m_flags;</span>
<a href="#l8.62"></a><span id="l8.62"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mailnews/imap/src/nsImapUrl.h</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapUrl.h</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -1,16 +1,17 @@</span>
<a href="#l9.4"></a><span id="l9.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l9.5"></a><span id="l9.5"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l9.6"></a><span id="l9.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l9.7"></a><span id="l9.7">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l9.8"></a><span id="l9.8"> </span>
<a href="#l9.9"></a><span id="l9.9"> #ifndef nsImapUrl_h___</span>
<a href="#l9.10"></a><span id="l9.10"> #define nsImapUrl_h___</span>
<a href="#l9.11"></a><span id="l9.11"> </span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+#include &quot;mozilla/Attributes.h&quot;</span>
<a href="#l9.13"></a><span id="l9.13"> #include &quot;nsIImapUrl.h&quot;</span>
<a href="#l9.14"></a><span id="l9.14"> #include &quot;nsIImapMockChannel.h&quot;</span>
<a href="#l9.15"></a><span id="l9.15"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l9.16"></a><span id="l9.16"> #include &quot;nsMsgMailNewsUrl.h&quot;</span>
<a href="#l9.17"></a><span id="l9.17"> #include &quot;nsIMsgIncomingServer.h&quot;</span>
<a href="#l9.18"></a><span id="l9.18"> #include &quot;nsIImapMailFolderSink.h&quot;</span>
<a href="#l9.19"></a><span id="l9.19"> #include &quot;nsIImapServerSink.h&quot;</span>
<a href="#l9.20"></a><span id="l9.20"> #include &quot;nsIImapMessageSink.h&quot;</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineat">@@ -21,29 +22,29 @@</span>
<a href="#l9.22"></a><span id="l9.22"> </span>
<a href="#l9.23"></a><span id="l9.23"> class nsImapUrl : public nsIImapUrl, public nsMsgMailNewsUrl, public nsIMsgMessageUrl, public nsIMsgI18NUrl</span>
<a href="#l9.24"></a><span id="l9.24"> {</span>
<a href="#l9.25"></a><span id="l9.25"> public:</span>
<a href="#l9.26"></a><span id="l9.26"> </span>
<a href="#l9.27"></a><span id="l9.27">   NS_DECL_ISUPPORTS_INHERITED</span>
<a href="#l9.28"></a><span id="l9.28"> </span>
<a href="#l9.29"></a><span id="l9.29">   // nsIURI override</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineminus">-  NS_IMETHOD SetSpec(const nsACString &amp;aSpec);</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-  NS_IMETHOD SetQuery(const nsACString &amp;aQuery);</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineminus">-  NS_IMETHOD Clone(nsIURI **_retval);</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineplus">+  NS_IMETHOD SetSpec(const nsACString &amp;aSpec) MOZ_OVERRIDE;</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineplus">+  NS_IMETHOD SetQuery(const nsACString &amp;aQuery) MOZ_OVERRIDE;</span>
<a href="#l9.35"></a><span id="l9.35" class="difflineplus">+  NS_IMETHOD Clone(nsIURI **_retval) MOZ_OVERRIDE;</span>
<a href="#l9.36"></a><span id="l9.36"> </span>
<a href="#l9.37"></a><span id="l9.37">   //////////////////////////////////////////////////////////////////////////////</span>
<a href="#l9.38"></a><span id="l9.38">   // we support the nsIImapUrl interface</span>
<a href="#l9.39"></a><span id="l9.39">   //////////////////////////////////////////////////////////////////////////////</span>
<a href="#l9.40"></a><span id="l9.40">   NS_DECL_NSIIMAPURL</span>
<a href="#l9.41"></a><span id="l9.41"> </span>
<a href="#l9.42"></a><span id="l9.42">   // nsIMsgMailNewsUrl overrides</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineminus">-  NS_IMETHOD IsUrlType(uint32_t type, bool *isType);</span>
<a href="#l9.44"></a><span id="l9.44" class="difflineminus">-  NS_IMETHOD GetFolder(nsIMsgFolder **aFolder);</span>
<a href="#l9.45"></a><span id="l9.45" class="difflineminus">-  NS_IMETHOD SetFolder(nsIMsgFolder *aFolder);</span>
<a href="#l9.46"></a><span id="l9.46" class="difflineplus">+  NS_IMETHOD IsUrlType(uint32_t type, bool *isType) MOZ_OVERRIDE;</span>
<a href="#l9.47"></a><span id="l9.47" class="difflineplus">+  NS_IMETHOD GetFolder(nsIMsgFolder **aFolder) MOZ_OVERRIDE;</span>
<a href="#l9.48"></a><span id="l9.48" class="difflineplus">+  NS_IMETHOD SetFolder(nsIMsgFolder *aFolder) MOZ_OVERRIDE;</span>
<a href="#l9.49"></a><span id="l9.49">   // nsIMsgMessageUrl</span>
<a href="#l9.50"></a><span id="l9.50">   NS_DECL_NSIMSGMESSAGEURL</span>
<a href="#l9.51"></a><span id="l9.51">   NS_DECL_NSIMSGI18NURL</span>
<a href="#l9.52"></a><span id="l9.52"> </span>
<a href="#l9.53"></a><span id="l9.53">   // nsImapUrl</span>
<a href="#l9.54"></a><span id="l9.54">   nsImapUrl();</span>
<a href="#l9.55"></a><span id="l9.55">   virtual ~nsImapUrl();</span>
<a href="#l9.56"></a><span id="l9.56"> </span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

