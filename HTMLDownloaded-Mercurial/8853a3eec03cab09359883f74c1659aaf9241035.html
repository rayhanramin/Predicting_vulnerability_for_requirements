<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 23509:8853a3eec03cab09359883f74c1659aaf9241035</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 8853a3eec03cab09359883f74c1659aaf9241035" />
<meta property="og:url" content="/comm-central/rev/8853a3eec03cab09359883f74c1659aaf9241035" />
<meta property="og:description" content="Bug 1436605 - Replace remaining Components.interface/Components.utils uses with Ci/Cu in suite. r=frg" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 8853a3eec03cab09359883f74c1659aaf9241035 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/8853a3eec03cab09359883f74c1659aaf9241035">shortlog</a> |
<a href="/comm-central/log/8853a3eec03cab09359883f74c1659aaf9241035">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/8853a3eec03cab09359883f74c1659aaf9241035">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/8853a3eec03cab09359883f74c1659aaf9241035">files</a> |
changeset |
<a href="/comm-central/raw-rev/8853a3eec03cab09359883f74c1659aaf9241035">raw</a>  | <a href="/comm-central/archive/8853a3eec03cab09359883f74c1659aaf9241035.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1436605">Bug 1436605</a> - Replace remaining Components.interface/Components.utils uses with Ci/Cu in suite. r=frg
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#97;&#99;&#101;&#109;&#97;&#110;&#32;&#60;&#97;&#99;&#101;&#108;&#105;&#115;&#116;&#115;&#64;&#97;&#116;&#108;&#97;&#115;&#46;&#115;&#107;&#62;</td></tr>
<tr><td></td><td class="date age">Mon, 12 Mar 2018 14:06:00 +0100</td></tr>

<tr>
 <td>changeset 23509</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/8853a3eec03cab09359883f74c1659aaf9241035">8853a3eec03cab09359883f74c1659aaf9241035</a></td>
</tr>



<tr>
<td>parent 23508</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/4b2c136f620aef6724029210bdbcb49ad30a5cd2">4b2c136f620aef6724029210bdbcb49ad30a5cd2</a>
</td>
</tr>

<tr>
<td>child 23510</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/9bd75170c7aea42af5de3c7de1da9ff9a0b84354">9bd75170c7aea42af5de3c7de1da9ff9a0b84354</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=8853a3eec03cab09359883f74c1659aaf9241035">14190</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Tue, 13 Mar 2018 16:48:45 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@8853a3eec03c [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=8853a3eec03cab09359883f74c1659aaf9241035">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=8853a3eec03cab09359883f74c1659aaf9241035&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=8853a3eec03cab09359883f74c1659aaf9241035&newProject=comm-central&newRevision=4b2c136f620aef6724029210bdbcb49ad30a5cd2&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=8853a3eec03cab09359883f74c1659aaf9241035&newProject=comm-central&newRevision=4b2c136f620aef6724029210bdbcb49ad30a5cd2&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=8853a3eec03cab09359883f74c1659aaf9241035&newProject=comm-central&newRevision=4b2c136f620aef6724029210bdbcb49ad30a5cd2&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28frg%29&revcount=50">frg</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1436605">1436605</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1436605">Bug 1436605</a> - Replace remaining Components.interface/Components.utils uses with Ci/Cu in suite. r=frg</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/browser/navigatorOverlay.xul">suite/browser/navigatorOverlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8853a3eec03cab09359883f74c1659aaf9241035/suite/browser/navigatorOverlay.xul">file</a> |
<a href="/comm-central/annotate/8853a3eec03cab09359883f74c1659aaf9241035/suite/browser/navigatorOverlay.xul">annotate</a> |
<a href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/browser/navigatorOverlay.xul">diff</a> |
<a href="/comm-central/comparison/8853a3eec03cab09359883f74c1659aaf9241035/suite/browser/navigatorOverlay.xul">comparison</a> |
<a href="/comm-central/log/8853a3eec03cab09359883f74c1659aaf9241035/suite/browser/navigatorOverlay.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/browser/tabbrowser.xml">suite/browser/tabbrowser.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8853a3eec03cab09359883f74c1659aaf9241035/suite/browser/tabbrowser.xml">file</a> |
<a href="/comm-central/annotate/8853a3eec03cab09359883f74c1659aaf9241035/suite/browser/tabbrowser.xml">annotate</a> |
<a href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/browser/tabbrowser.xml">diff</a> |
<a href="/comm-central/comparison/8853a3eec03cab09359883f74c1659aaf9241035/suite/browser/tabbrowser.xml">comparison</a> |
<a href="/comm-central/log/8853a3eec03cab09359883f74c1659aaf9241035/suite/browser/tabbrowser.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/browser/urlbarBindings.xml">suite/browser/urlbarBindings.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8853a3eec03cab09359883f74c1659aaf9241035/suite/browser/urlbarBindings.xml">file</a> |
<a href="/comm-central/annotate/8853a3eec03cab09359883f74c1659aaf9241035/suite/browser/urlbarBindings.xml">annotate</a> |
<a href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/browser/urlbarBindings.xml">diff</a> |
<a href="/comm-central/comparison/8853a3eec03cab09359883f74c1659aaf9241035/suite/browser/urlbarBindings.xml">comparison</a> |
<a href="/comm-central/log/8853a3eec03cab09359883f74c1659aaf9241035/suite/browser/urlbarBindings.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/bindings/notification.xml">suite/common/bindings/notification.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/bindings/notification.xml">file</a> |
<a href="/comm-central/annotate/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/bindings/notification.xml">annotate</a> |
<a href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/bindings/notification.xml">diff</a> |
<a href="/comm-central/comparison/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/bindings/notification.xml">comparison</a> |
<a href="/comm-central/log/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/bindings/notification.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/bindings/toolbar-xpfe.xml">suite/common/bindings/toolbar-xpfe.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/bindings/toolbar-xpfe.xml">file</a> |
<a href="/comm-central/annotate/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/bindings/toolbar-xpfe.xml">annotate</a> |
<a href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/bindings/toolbar-xpfe.xml">diff</a> |
<a href="/comm-central/comparison/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/bindings/toolbar-xpfe.xml">comparison</a> |
<a href="/comm-central/log/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/bindings/toolbar-xpfe.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/dataman/dataman.xml">suite/common/dataman/dataman.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/dataman/dataman.xml">file</a> |
<a href="/comm-central/annotate/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/dataman/dataman.xml">annotate</a> |
<a href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/dataman/dataman.xml">diff</a> |
<a href="/comm-central/comparison/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/dataman/dataman.xml">comparison</a> |
<a href="/comm-central/log/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/dataman/dataman.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/helpviewer/help.js">suite/common/helpviewer/help.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/helpviewer/help.js">file</a> |
<a href="/comm-central/annotate/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/helpviewer/help.js">annotate</a> |
<a href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/helpviewer/help.js">diff</a> |
<a href="/comm-central/comparison/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/helpviewer/help.js">comparison</a> |
<a href="/comm-central/log/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/helpviewer/help.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/search/search.xml">suite/common/search/search.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/search/search.xml">file</a> |
<a href="/comm-central/annotate/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/search/search.xml">annotate</a> |
<a href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/search/search.xml">diff</a> |
<a href="/comm-central/comparison/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/search/search.xml">comparison</a> |
<a href="/comm-central/log/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/search/search.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/tests/browser/browser_637020_slow.sjs">suite/common/tests/browser/browser_637020_slow.sjs</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/tests/browser/browser_637020_slow.sjs">file</a> |
<a href="/comm-central/annotate/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/tests/browser/browser_637020_slow.sjs">annotate</a> |
<a href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/tests/browser/browser_637020_slow.sjs">diff</a> |
<a href="/comm-central/comparison/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/tests/browser/browser_637020_slow.sjs">comparison</a> |
<a href="/comm-central/log/8853a3eec03cab09359883f74c1659aaf9241035/suite/common/tests/browser/browser_637020_slow.sjs">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/extensions/debugQA/content/debugQAMenuOverlay.xul">suite/extensions/debugQA/content/debugQAMenuOverlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8853a3eec03cab09359883f74c1659aaf9241035/suite/extensions/debugQA/content/debugQAMenuOverlay.xul">file</a> |
<a href="/comm-central/annotate/8853a3eec03cab09359883f74c1659aaf9241035/suite/extensions/debugQA/content/debugQAMenuOverlay.xul">annotate</a> |
<a href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/extensions/debugQA/content/debugQAMenuOverlay.xul">diff</a> |
<a href="/comm-central/comparison/8853a3eec03cab09359883f74c1659aaf9241035/suite/extensions/debugQA/content/debugQAMenuOverlay.xul">comparison</a> |
<a href="/comm-central/log/8853a3eec03cab09359883f74c1659aaf9241035/suite/extensions/debugQA/content/debugQAMenuOverlay.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/commandglue.js">suite/mailnews/commandglue.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/commandglue.js">file</a> |
<a href="/comm-central/annotate/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/commandglue.js">annotate</a> |
<a href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/commandglue.js">diff</a> |
<a href="/comm-central/comparison/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/commandglue.js">comparison</a> |
<a href="/comm-central/log/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/commandglue.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/mailWidgets.xml">suite/mailnews/mailWidgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/mailWidgets.xml">file</a> |
<a href="/comm-central/annotate/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/mailWidgets.xml">annotate</a> |
<a href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/mailWidgets.xml">diff</a> |
<a href="/comm-central/comparison/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/mailWidgets.xml">comparison</a> |
<a href="/comm-central/log/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/mailWidgets.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/start.xhtml">suite/mailnews/start.xhtml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/start.xhtml">file</a> |
<a href="/comm-central/annotate/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/start.xhtml">annotate</a> |
<a href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/start.xhtml">diff</a> |
<a href="/comm-central/comparison/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/start.xhtml">comparison</a> |
<a href="/comm-central/log/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/start.xhtml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/tabmail.xml">suite/mailnews/tabmail.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/tabmail.xml">file</a> |
<a href="/comm-central/annotate/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/tabmail.xml">annotate</a> |
<a href="/comm-central/diff/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/tabmail.xml">diff</a> |
<a href="/comm-central/comparison/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/tabmail.xml">comparison</a> |
<a href="/comm-central/log/8853a3eec03cab09359883f74c1659aaf9241035/suite/mailnews/tabmail.xml">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/suite/browser/navigatorOverlay.xul</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/suite/browser/navigatorOverlay.xul</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -200,17 +200,17 @@</span>
<a href="#l1.4"></a><span id="l1.4">     &lt;command id=&quot;Browser:Forward&quot; oncommand=&quot;BrowserForward();&quot; observes=&quot;canGoForward&quot;/&gt;</span>
<a href="#l1.5"></a><span id="l1.5">     &lt;command id=&quot;Browser:Up&quot;      oncommand=&quot;BrowserUp();&quot;      observes=&quot;canGoUp&quot;/&gt;</span>
<a href="#l1.6"></a><span id="l1.6">     &lt;commandset id=&quot;viewZoomCommands&quot;/&gt;</span>
<a href="#l1.7"></a><span id="l1.7">     &lt;commandset id=&quot;tasksCommands&quot;/&gt;</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9">     &lt;!-- Tools Menu --&gt;</span>
<a href="#l1.10"></a><span id="l1.10">     &lt;command id=&quot;Browser:SearchInternet&quot; oncommand=&quot;BrowserSearch.webSearch();&quot;/&gt;</span>
<a href="#l1.11"></a><span id="l1.11">     &lt;command id=&quot;Tools:Sanitize&quot;</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-             oncommand=&quot;Components.classes['@mozilla.org/suite/suiteglue;1'].getService(Components.interfaces.nsISuiteGlue).sanitize(window);&quot;/&gt;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+             oncommand=&quot;Cc['@mozilla.org/suite/suiteglue;1'].getService(Ci.nsISuiteGlue).sanitize(window);&quot;/&gt;</span>
<a href="#l1.14"></a><span id="l1.14"> </span>
<a href="#l1.15"></a><span id="l1.15">   &lt;/commandset&gt;</span>
<a href="#l1.16"></a><span id="l1.16"> </span>
<a href="#l1.17"></a><span id="l1.17">   &lt;broadcasterset id=&quot;navBroadcasters&quot;&gt;</span>
<a href="#l1.18"></a><span id="l1.18">     &lt;broadcaster id=&quot;canGoBack&quot;    disabled=&quot;true&quot;/&gt;</span>
<a href="#l1.19"></a><span id="l1.19">     &lt;broadcaster id=&quot;canGoForward&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l1.20"></a><span id="l1.20">     &lt;broadcaster id=&quot;canGoUp&quot;      disabled=&quot;true&quot;/&gt;</span>
<a href="#l1.21"></a><span id="l1.21">     &lt;broadcaster id=&quot;Communicator:WorkMode&quot;/&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/suite/browser/tabbrowser.xml</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/suite/browser/tabbrowser.xml</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -93,39 +93,35 @@</span>
<a href="#l2.4"></a><span id="l2.4">                          xbl:inherits=&quot;tooltip=contenttooltip,contextmenu=contentcontextmenu,autocompletepopup&quot;/&gt;</span>
<a href="#l2.5"></a><span id="l2.5">           &lt;/xul:notificationbox&gt;</span>
<a href="#l2.6"></a><span id="l2.6">         &lt;/xul:tabpanels&gt;</span>
<a href="#l2.7"></a><span id="l2.7">       &lt;/xul:tabbox&gt;</span>
<a href="#l2.8"></a><span id="l2.8">       &lt;children/&gt;</span>
<a href="#l2.9"></a><span id="l2.9">     &lt;/content&gt;</span>
<a href="#l2.10"></a><span id="l2.10">     &lt;implementation implements=&quot;nsIObserver&quot;&gt;</span>
<a href="#l2.11"></a><span id="l2.11">       &lt;field name=&quot;mSessionStore&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-        Components.classes[&quot;@mozilla.org/suite/sessionstore;1&quot;]</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-                   .getService(Components.interfaces.nsISessionStore);</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+        Cc[&quot;@mozilla.org/suite/sessionstore;1&quot;].getService(Ci.nsISessionStore);</span>
<a href="#l2.15"></a><span id="l2.15">       &lt;/field&gt;</span>
<a href="#l2.16"></a><span id="l2.16">       &lt;field name=&quot;mPrefs&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineminus">-        Components.classes['@mozilla.org/preferences-service;1']</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineminus">-                  .getService(Components.interfaces.nsIPrefBranch);</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+        Cc['@mozilla.org/preferences-service;1'].getService(Ci.nsIPrefBranch);</span>
<a href="#l2.20"></a><span id="l2.20">       &lt;/field&gt;</span>
<a href="#l2.21"></a><span id="l2.21">       &lt;field name=&quot;mURIFixup&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineminus">-        Components.classes[&quot;@mozilla.org/docshell/urifixup;1&quot;]</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineminus">-                  .getService(Components.interfaces.nsIURIFixup);</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineplus">+        Cc[&quot;@mozilla.org/docshell/urifixup;1&quot;].getService(Ci.nsIURIFixup);</span>
<a href="#l2.25"></a><span id="l2.25">       &lt;/field&gt;</span>
<a href="#l2.26"></a><span id="l2.26">       &lt;field name=&quot;mFaviconService&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineminus">-        Components.classes[&quot;@mozilla.org/browser/favicon-service;1&quot;]</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineminus">-                  .getService(Components.interfaces.nsIFaviconService)</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineminus">-                  .QueryInterface(Components.interfaces.mozIAsyncFavicons);</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineplus">+        Cc[&quot;@mozilla.org/browser/favicon-service;1&quot;]</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineplus">+          .getService(Ci.nsIFaviconService)</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+          .QueryInterface(Ci.mozIAsyncFavicons);</span>
<a href="#l2.33"></a><span id="l2.33">       &lt;/field&gt;</span>
<a href="#l2.34"></a><span id="l2.34">       &lt;field name=&quot;mIOService&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineminus">-        Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineminus">-                  .getService(Components.interfaces.nsIIOService);</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineplus">+        Cc[&quot;@mozilla.org/network/io-service;1&quot;].getService(Ci.nsIIOService);</span>
<a href="#l2.38"></a><span id="l2.38">       &lt;/field&gt;</span>
<a href="#l2.39"></a><span id="l2.39">       &lt;field name=&quot;mSecMan&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineminus">-        Components.classes[&quot;@mozilla.org/scriptsecuritymanager;1&quot;]</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineminus">-                  .getService(Components.interfaces.nsIScriptSecurityManager);</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineplus">+        Cc[&quot;@mozilla.org/scriptsecuritymanager;1&quot;]</span>
<a href="#l2.43"></a><span id="l2.43" class="difflineplus">+          .getService(Ci.nsIScriptSecurityManager);</span>
<a href="#l2.44"></a><span id="l2.44">       &lt;/field&gt;</span>
<a href="#l2.45"></a><span id="l2.45">       &lt;field name=&quot;mTabBox&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l2.46"></a><span id="l2.46">         document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;tabbox&quot;);</span>
<a href="#l2.47"></a><span id="l2.47">       &lt;/field&gt;</span>
<a href="#l2.48"></a><span id="l2.48">       &lt;field name=&quot;mStrip&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l2.49"></a><span id="l2.49">         document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;strip&quot;);</span>
<a href="#l2.50"></a><span id="l2.50">       &lt;/field&gt;</span>
<a href="#l2.51"></a><span id="l2.51">       &lt;field name=&quot;tabContainer&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l2.52"></a><span id="l2.52" class="difflineat">@@ -160,20 +156,20 @@</span>
<a href="#l2.53"></a><span id="l2.53">       &lt;/field&gt;</span>
<a href="#l2.54"></a><span id="l2.54">       &lt;field name=&quot;mTabFilters&quot;&gt;</span>
<a href="#l2.55"></a><span id="l2.55">         new Array()</span>
<a href="#l2.56"></a><span id="l2.56">       &lt;/field&gt;</span>
<a href="#l2.57"></a><span id="l2.57">       &lt;field name=&quot;mLastRelatedIndex&quot;&gt;</span>
<a href="#l2.58"></a><span id="l2.58">         0</span>
<a href="#l2.59"></a><span id="l2.59">       &lt;/field&gt;</span>
<a href="#l2.60"></a><span id="l2.60">       &lt;field name=&quot;usePrivateBrowsing&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l2.61"></a><span id="l2.61" class="difflineminus">-        window.QueryInterface(Components.interfaces.nsIInterfaceRequestor)</span>
<a href="#l2.62"></a><span id="l2.62" class="difflineminus">-              .getInterface(Components.interfaces.nsIWebNavigation)</span>
<a href="#l2.63"></a><span id="l2.63" class="difflineminus">-              .QueryInterface(Components.interfaces.nsILoadContext)</span>
<a href="#l2.64"></a><span id="l2.64" class="difflineminus">-              .usePrivateBrowsing</span>
<a href="#l2.65"></a><span id="l2.65" class="difflineplus">+        window.QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l2.66"></a><span id="l2.66" class="difflineplus">+              .getInterface(Ci.nsIWebNavigation)</span>
<a href="#l2.67"></a><span id="l2.67" class="difflineplus">+              .QueryInterface(Ci.nsILoadContext)</span>
<a href="#l2.68"></a><span id="l2.68" class="difflineplus">+              .usePrivateBrowsing;</span>
<a href="#l2.69"></a><span id="l2.69">       &lt;/field&gt;</span>
<a href="#l2.70"></a><span id="l2.70">       &lt;field name=&quot;mContextTab&quot;&gt;</span>
<a href="#l2.71"></a><span id="l2.71">         null</span>
<a href="#l2.72"></a><span id="l2.72">       &lt;/field&gt;</span>
<a href="#l2.73"></a><span id="l2.73">       &lt;field name=&quot;_keyEventHandler&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l2.74"></a><span id="l2.74">       &lt;![CDATA[({</span>
<a href="#l2.75"></a><span id="l2.75">         handleEvent: function handleEvent(aEvent) {</span>
<a href="#l2.76"></a><span id="l2.76">           if (aEvent.altKey)</span>
<a href="#l2.77"></a><span id="l2.77" class="difflineat">@@ -3338,18 +3334,17 @@</span>
<a href="#l2.78"></a><span id="l2.78"> </span>
<a href="#l2.79"></a><span id="l2.79">       &lt;destructor&gt;</span>
<a href="#l2.80"></a><span id="l2.80">         &lt;![CDATA[</span>
<a href="#l2.81"></a><span id="l2.81">           window.removeEventListener(&quot;resize&quot;, this);</span>
<a href="#l2.82"></a><span id="l2.82">         ]]&gt;</span>
<a href="#l2.83"></a><span id="l2.83">       &lt;/destructor&gt;</span>
<a href="#l2.84"></a><span id="l2.84"> </span>
<a href="#l2.85"></a><span id="l2.85">       &lt;field name=&quot;mPrefs&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l2.86"></a><span id="l2.86" class="difflineminus">-        Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l2.87"></a><span id="l2.87" class="difflineminus">-                  .getService(Components.interfaces.nsIPrefBranch);</span>
<a href="#l2.88"></a><span id="l2.88" class="difflineplus">+        Cc[&quot;@mozilla.org/preferences-service;1&quot;].getService(Ci.nsIPrefBranch);</span>
<a href="#l2.89"></a><span id="l2.89">       &lt;/field&gt;</span>
<a href="#l2.90"></a><span id="l2.90"> </span>
<a href="#l2.91"></a><span id="l2.91">       &lt;field name=&quot;arrowScrollboxWidth&quot;&gt;0&lt;/field&gt;</span>
<a href="#l2.92"></a><span id="l2.92"> </span>
<a href="#l2.93"></a><span id="l2.93">       &lt;field name=&quot;arrowScrollbox&quot;&gt;</span>
<a href="#l2.94"></a><span id="l2.94">         document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;arrowscrollbox&quot;);</span>
<a href="#l2.95"></a><span id="l2.95">       &lt;/field&gt;</span>
<a href="#l2.96"></a><span id="l2.96"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/suite/browser/urlbarBindings.xml</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/suite/browser/urlbarBindings.xml</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -65,19 +65,19 @@</span>
<a href="#l3.4"></a><span id="l3.4">       &lt;destructor&gt;&lt;![CDATA[</span>
<a href="#l3.5"></a><span id="l3.5">         this.inputField.removeEventListener(&quot;underflow&quot;, this);</span>
<a href="#l3.6"></a><span id="l3.6">         this.inputField.removeEventListener(&quot;overflow&quot;, this);</span>
<a href="#l3.7"></a><span id="l3.7">         this.inputField.controllers.removeController(this._editItemsController);</span>
<a href="#l3.8"></a><span id="l3.8">         this.mPrefs.removeObserver(&quot;browser.urlbar&quot;, this.mPrefObserver);</span>
<a href="#l3.9"></a><span id="l3.9">       ]]&gt;&lt;/destructor&gt;</span>
<a href="#l3.10"></a><span id="l3.10"> </span>
<a href="#l3.11"></a><span id="l3.11">       &lt;field name=&quot;mPrefs&quot;&gt;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-        var svc = Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-                            .getService(Components.interfaces.nsIPrefService);</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineminus">-        svc.getBranch(null);</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+        Cc[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+          .getService(Ci.nsIPrefService);</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+          .getBranch(null);</span>
<a href="#l3.18"></a><span id="l3.18">       &lt;/field&gt;</span>
<a href="#l3.19"></a><span id="l3.19"> </span>
<a href="#l3.20"></a><span id="l3.20">       &lt;field name=&quot;mPrefObserver&quot;&gt;&lt;![CDATA[</span>
<a href="#l3.21"></a><span id="l3.21">         ({</span>
<a href="#l3.22"></a><span id="l3.22">           urlbar: this,</span>
<a href="#l3.23"></a><span id="l3.23"> </span>
<a href="#l3.24"></a><span id="l3.24">           observe: function(aObserver, aBlah, aPref) {</span>
<a href="#l3.25"></a><span id="l3.25">             if (/^browser\.urlbar\./.test(aPref))</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineat">@@ -381,29 +381,28 @@</span>
<a href="#l3.27"></a><span id="l3.27">                 onget=&quot;return this.textbox.getAttribute('defaultSearchEngine') == 'true';&quot;</span>
<a href="#l3.28"></a><span id="l3.28">                 onset=&quot;this.textbox.setAttribute('defaultSearchEngine', val); return val;&quot;/&gt;</span>
<a href="#l3.29"></a><span id="l3.29"> </span>
<a href="#l3.30"></a><span id="l3.30">       &lt;field name=&quot;mSearchBox&quot;&gt;</span>
<a href="#l3.31"></a><span id="l3.31">          document.getAnonymousElementByAttribute(this, &quot;role&quot;, &quot;search-box&quot;);</span>
<a href="#l3.32"></a><span id="l3.32">       &lt;/field&gt;</span>
<a href="#l3.33"></a><span id="l3.33"> </span>
<a href="#l3.34"></a><span id="l3.34">       &lt;field name=&quot;mPrefs&quot;&gt;</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineminus">-        Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineminus">-                  .getService(Components.interfaces.nsIPrefService)</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineminus">-                  .getBranch(null);</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineplus">+        Cc[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineplus">+          .getService(Ci.nsIPrefService)</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineplus">+          .getBranch(null);</span>
<a href="#l3.41"></a><span id="l3.41">       &lt;/field&gt;</span>
<a href="#l3.42"></a><span id="l3.42"> </span>
<a href="#l3.43"></a><span id="l3.43">       &lt;field name=&quot;mObSvc&quot;&gt;</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineminus">-        Components.classes[&quot;@mozilla.org/observer-service;1&quot;]</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineminus">-                  .getService(Components.interfaces.nsIObserverService);</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineplus">+        Cc[&quot;@mozilla.org/observer-service;1&quot;].getService(Ci.nsIObserverService);</span>
<a href="#l3.47"></a><span id="l3.47">       &lt;/field&gt;</span>
<a href="#l3.48"></a><span id="l3.48"> </span>
<a href="#l3.49"></a><span id="l3.49">       &lt;field name=&quot;mSearchService&quot;&gt;</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineminus">-        Components.classes[&quot;@mozilla.org/browser/search-service;1&quot;]</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineminus">-                  .getService(Components.interfaces.nsIBrowserSearchService);</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineplus">+        Cc[&quot;@mozilla.org/browser/search-service;1&quot;]</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineplus">+          .getService(Ci.nsIBrowserSearchService);</span>
<a href="#l3.54"></a><span id="l3.54">       &lt;/field&gt;</span>
<a href="#l3.55"></a><span id="l3.55"> </span>
<a href="#l3.56"></a><span id="l3.56">       &lt;field name=&quot;mObserver&quot;&gt;&lt;![CDATA[</span>
<a href="#l3.57"></a><span id="l3.57">         ({</span>
<a href="#l3.58"></a><span id="l3.58">           resultsPopup: this,</span>
<a href="#l3.59"></a><span id="l3.59"> </span>
<a href="#l3.60"></a><span id="l3.60">           observe: function(aSubject, aTopic, aData) {</span>
<a href="#l3.61"></a><span id="l3.61">             switch (aTopic) {</span>
<a href="#l3.62"></a><span id="l3.62" class="difflineat">@@ -570,18 +569,18 @@</span>
<a href="#l3.63"></a><span id="l3.63">           this.searchValue = text;</span>
<a href="#l3.64"></a><span id="l3.64">       ]]&gt;&lt;/constructor&gt;</span>
<a href="#l3.65"></a><span id="l3.65"> </span>
<a href="#l3.66"></a><span id="l3.66">       &lt;field name=&quot;mSelectedIndex&quot;&gt;</span>
<a href="#l3.67"></a><span id="l3.67">         -1</span>
<a href="#l3.68"></a><span id="l3.68">       &lt;/field&gt;</span>
<a href="#l3.69"></a><span id="l3.69"> </span>
<a href="#l3.70"></a><span id="l3.70">       &lt;field name=&quot;mSearchService&quot;&gt;</span>
<a href="#l3.71"></a><span id="l3.71" class="difflineminus">-        Components.classes[&quot;@mozilla.org/browser/search-service;1&quot;]</span>
<a href="#l3.72"></a><span id="l3.72" class="difflineminus">-                  .getService(Components.interfaces.nsIBrowserSearchService);</span>
<a href="#l3.73"></a><span id="l3.73" class="difflineplus">+        Cc[&quot;@mozilla.org/browser/search-service;1&quot;]</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineplus">+          .getService(Ci.nsIBrowserSearchService);</span>
<a href="#l3.75"></a><span id="l3.75">       &lt;/field&gt;</span>
<a href="#l3.76"></a><span id="l3.76"> </span>
<a href="#l3.77"></a><span id="l3.77">       &lt;property name=&quot;activeChild&quot;</span>
<a href="#l3.78"></a><span id="l3.78">                 onget=&quot;return this.childNodes[this.mSelectedIndex]&quot;/&gt;</span>
<a href="#l3.79"></a><span id="l3.79"> </span>
<a href="#l3.80"></a><span id="l3.80">       &lt;property name=&quot;selectedIndex&quot;&gt;</span>
<a href="#l3.81"></a><span id="l3.81">         &lt;getter&gt;return this.mSelectedIndex;&lt;/getter&gt;</span>
<a href="#l3.82"></a><span id="l3.82"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/suite/common/bindings/notification.xml</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/suite/common/bindings/notification.xml</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -78,19 +78,19 @@</span>
<a href="#l4.4"></a><span id="l4.4">                               .QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l4.5"></a><span id="l4.5">                               .getInterface(Ci.nsIDOMWindowUtils);</span>
<a href="#l4.6"></a><span id="l4.6">             return this._cwu;</span>
<a href="#l4.7"></a><span id="l4.7">           ]]&gt;</span>
<a href="#l4.8"></a><span id="l4.8">         &lt;/getter&gt;</span>
<a href="#l4.9"></a><span id="l4.9">       &lt;/property&gt;</span>
<a href="#l4.10"></a><span id="l4.10"> </span>
<a href="#l4.11"></a><span id="l4.11">       &lt;field name=&quot;usePrivateBrowsing&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-        window.QueryInterface(Components.interfaces.nsIInterfaceRequestor)</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-              .getInterface(Components.interfaces.nsIWebNavigation)</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-              .QueryInterface(Components.interfaces.nsILoadContext)</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+        window.QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+              .getInterface(Ci.nsIWebNavigation)</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+              .QueryInterface(Ci.nsILoadContext)</span>
<a href="#l4.18"></a><span id="l4.18">               .usePrivateBrowsing</span>
<a href="#l4.19"></a><span id="l4.19">       &lt;/field&gt;</span>
<a href="#l4.20"></a><span id="l4.20"> </span>
<a href="#l4.21"></a><span id="l4.21">       &lt;method name=&quot;onDocumentChange&quot;&gt;</span>
<a href="#l4.22"></a><span id="l4.22">         &lt;body&gt;</span>
<a href="#l4.23"></a><span id="l4.23">           &lt;![CDATA[</span>
<a href="#l4.24"></a><span id="l4.24">             this.crashNotified = false;</span>
<a href="#l4.25"></a><span id="l4.25">             this.clickToPlayPluginsActivated = false;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/suite/common/bindings/toolbar-xpfe.xml</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/suite/common/bindings/toolbar-xpfe.xml</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -185,18 +185,18 @@</span>
<a href="#l5.4"></a><span id="l5.4">         this.prefs.removeObserver(this.domain, this);</span>
<a href="#l5.5"></a><span id="l5.5">       &lt;/destructor&gt;</span>
<a href="#l5.6"></a><span id="l5.6"> </span>
<a href="#l5.7"></a><span id="l5.7">       &lt;field name=&quot;domain&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l5.8"></a><span id="l5.8">         &quot;browser.chrome.toolbar_style&quot;</span>
<a href="#l5.9"></a><span id="l5.9">       &lt;/field&gt;</span>
<a href="#l5.10"></a><span id="l5.10"> </span>
<a href="#l5.11"></a><span id="l5.11">       &lt;field name=&quot;prefs&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-        Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-                  .getService(Components.interfaces.nsIPrefService).getBranch(null)</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+        Cc[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineplus">+          .getService(Ci.nsIPrefService).getBranch(null)</span>
<a href="#l5.16"></a><span id="l5.16">       &lt;/field&gt;</span>
<a href="#l5.17"></a><span id="l5.17"> </span>
<a href="#l5.18"></a><span id="l5.18">       &lt;method name=&quot;observe&quot;&gt;</span>
<a href="#l5.19"></a><span id="l5.19">         &lt;parameter name=&quot;subject&quot;/&gt;</span>
<a href="#l5.20"></a><span id="l5.20">         &lt;parameter name=&quot;topic&quot;/&gt;</span>
<a href="#l5.21"></a><span id="l5.21">         &lt;parameter name=&quot;name&quot;/&gt;</span>
<a href="#l5.22"></a><span id="l5.22">         &lt;body&gt;</span>
<a href="#l5.23"></a><span id="l5.23">           &lt;![CDATA[</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/suite/common/dataman/dataman.xml</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/suite/common/dataman/dataman.xml</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -145,17 +145,17 @@</span>
<a href="#l6.4"></a><span id="l6.4">       &lt;xul:hbox role=&quot;group&quot; aria-labelledby=&quot;permLabel&quot;&gt;</span>
<a href="#l6.5"></a><span id="l6.5">         &lt;xul:checkbox class=&quot;indent&quot; anonid=&quot;useDefault&quot; label=&quot;&amp;perm.UseDefault;&quot;</span>
<a href="#l6.6"></a><span id="l6.6">                       oncommand=&quot;document.getBindingParent(this).useDefault(this.checked);&quot;/&gt;</span>
<a href="#l6.7"></a><span id="l6.7">         &lt;xul:spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l6.8"></a><span id="l6.8">         &lt;xul:radiogroup anonid=&quot;radioGroup&quot; orient=&quot;horizontal&quot;&gt;</span>
<a href="#l6.9"></a><span id="l6.9">           &lt;xul:radio anonid=&quot;permSetting-1&quot; label=&quot;&amp;perm.Allow;&quot;</span>
<a href="#l6.10"></a><span id="l6.10">                      oncommand=&quot;document.getBindingParent(this).setCapability(Services.perms.ALLOW_ACTION);&quot;/&gt;</span>
<a href="#l6.11"></a><span id="l6.11">           &lt;xul:radio anonid=&quot;permSetting-8&quot; label=&quot;&amp;perm.AllowSession;&quot;</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-                     oncommand=&quot;document.getBindingParent(this).setCapability(Components.interfaces.nsICookiePermission.ACCESS_SESSION);&quot;/&gt;</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+                     oncommand=&quot;document.getBindingParent(this).setCapability(Ci.nsICookiePermission.ACCESS_SESSION);&quot;/&gt;</span>
<a href="#l6.14"></a><span id="l6.14">           &lt;xul:radio anonid=&quot;permSetting-2&quot; label=&quot;&amp;perm.Block;&quot;</span>
<a href="#l6.15"></a><span id="l6.15">                      oncommand=&quot;document.getBindingParent(this).setCapability(Services.perms.DENY_ACTION);&quot;/&gt;</span>
<a href="#l6.16"></a><span id="l6.16">         &lt;/xul:radiogroup&gt;</span>
<a href="#l6.17"></a><span id="l6.17">       &lt;/xul:hbox&gt;</span>
<a href="#l6.18"></a><span id="l6.18">     &lt;/content&gt;</span>
<a href="#l6.19"></a><span id="l6.19">   &lt;/binding&gt;</span>
<a href="#l6.20"></a><span id="l6.20"> </span>
<a href="#l6.21"></a><span id="l6.21">   &lt;binding id=&quot;perm-geo-item&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/suite/common/helpviewer/help.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/suite/common/helpviewer/help.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -29,38 +29,36 @@ const platform = &quot;win&quot;;</span>
<a href="#l7.4"></a><span id="l7.4"> #ifdef XP_MACOSX</span>
<a href="#l7.5"></a><span id="l7.5"> const platform = &quot;mac&quot;;</span>
<a href="#l7.6"></a><span id="l7.6"> #else</span>
<a href="#l7.7"></a><span id="l7.7"> const platform = &quot;unix&quot;;</span>
<a href="#l7.8"></a><span id="l7.8"> #endif</span>
<a href="#l7.9"></a><span id="l7.9"> #endif</span>
<a href="#l7.10"></a><span id="l7.10"> </span>
<a href="#l7.11"></a><span id="l7.11"> # Resources</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-const RDF = Components.classes[&quot;@mozilla.org/rdf/rdf-service;1&quot;]</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-    .getService(Components.interfaces.nsIRDFService);</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+const RDF = Cc[&quot;@mozilla.org/rdf/rdf-service;1&quot;].getService(Ci.nsIRDFService);</span>
<a href="#l7.15"></a><span id="l7.15"> const RDF_ROOT = RDF.GetResource(&quot;urn:root&quot;);</span>
<a href="#l7.16"></a><span id="l7.16"> const NC_PANELLIST = RDF.GetResource(NC + &quot;panellist&quot;);</span>
<a href="#l7.17"></a><span id="l7.17"> const NC_PANELID = RDF.GetResource(NC + &quot;panelid&quot;);</span>
<a href="#l7.18"></a><span id="l7.18"> const NC_EMPTY_SEARCH_TEXT = RDF.GetResource(NC + &quot;emptysearchtext&quot;);</span>
<a href="#l7.19"></a><span id="l7.19"> const NC_EMPTY_SEARCH_LINK = RDF.GetResource(NC + &quot;emptysearchlink&quot;);</span>
<a href="#l7.20"></a><span id="l7.20"> const NC_DATASOURCES = RDF.GetResource(NC + &quot;datasources&quot;);</span>
<a href="#l7.21"></a><span id="l7.21"> const NC_PLATFORM = RDF.GetResource(NC + &quot;platform&quot;);</span>
<a href="#l7.22"></a><span id="l7.22"> const NC_SUBHEADINGS = RDF.GetResource(NC + &quot;subheadings&quot;);</span>
<a href="#l7.23"></a><span id="l7.23"> const NC_NAME = RDF.GetResource(NC + &quot;name&quot;);</span>
<a href="#l7.24"></a><span id="l7.24"> const NC_CHILD = RDF.GetResource(NC + &quot;child&quot;);</span>
<a href="#l7.25"></a><span id="l7.25"> const NC_LINK = RDF.GetResource(NC + &quot;link&quot;);</span>
<a href="#l7.26"></a><span id="l7.26"> const NC_TITLE = RDF.GetResource(NC + &quot;title&quot;);</span>
<a href="#l7.27"></a><span id="l7.27"> const NC_BASE = RDF.GetResource(NC + &quot;base&quot;);</span>
<a href="#l7.28"></a><span id="l7.28"> const NC_DEFAULTTOPIC = RDF.GetResource(NC + &quot;defaulttopic&quot;);</span>
<a href="#l7.29"></a><span id="l7.29"> </span>
<a href="#l7.30"></a><span id="l7.30"> var RDFContainer =</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-   Components.classes[&quot;@mozilla.org/rdf/container;1&quot;]</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineminus">-             .createInstance(Components.interfaces.nsIRDFContainer);</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineminus">-const CONSOLE_SERVICE = Components.classes['@mozilla.org/consoleservice;1']</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineminus">-    .getService(Components.interfaces.nsIConsoleService);</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineplus">+      Cc[&quot;@mozilla.org/rdf/container;1&quot;].createInstance(Ci.nsIRDFContainer);</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineplus">+const CONSOLE_SERVICE = Cc['@mozilla.org/consoleservice;1']</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineplus">+                          .getService(Ci.nsIConsoleService);</span>
<a href="#l7.38"></a><span id="l7.38"> </span>
<a href="#l7.39"></a><span id="l7.39"> var RE;</span>
<a href="#l7.40"></a><span id="l7.40"> </span>
<a href="#l7.41"></a><span id="l7.41"> var helpFileURI;</span>
<a href="#l7.42"></a><span id="l7.42"> var helpFileDS;</span>
<a href="#l7.43"></a><span id="l7.43"> # Set from nc:base attribute on help rdf file. It may be used for prefix</span>
<a href="#l7.44"></a><span id="l7.44"> # reduction on all links within the current help set.</span>
<a href="#l7.45"></a><span id="l7.45"> var helpBaseURI;</span>
<a href="#l7.46"></a><span id="l7.46" class="difflineat">@@ -107,60 +105,59 @@ function init() {</span>
<a href="#l7.47"></a><span id="l7.47">   helpBrowser.docShell.allowSubframes = false;</span>
<a href="#l7.48"></a><span id="l7.48">   helpBrowser.docShell.allowMetaRedirects = false;</span>
<a href="#l7.49"></a><span id="l7.49"> </span>
<a href="#l7.50"></a><span id="l7.50">   strBundle = document.getElementById(&quot;bundle_help&quot;);</span>
<a href="#l7.51"></a><span id="l7.51">   emptySearchText = strBundle.getString(&quot;emptySearchText&quot;);</span>
<a href="#l7.52"></a><span id="l7.52"> </span>
<a href="#l7.53"></a><span id="l7.53">   // Get the content pack, base URL, and help topic</span>
<a href="#l7.54"></a><span id="l7.54">   var helpTopic = defaultTopic;</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineminus">-  if (&quot;arguments&quot; in window &amp;&amp; </span>
<a href="#l7.56"></a><span id="l7.56" class="difflineminus">-       window.arguments[0] instanceof Components.interfaces.nsIDialogParamBlock) {</span>
<a href="#l7.57"></a><span id="l7.57" class="difflineplus">+  if (&quot;arguments&quot; in window &amp;&amp;</span>
<a href="#l7.58"></a><span id="l7.58" class="difflineplus">+      window.arguments[0] instanceof Ci.nsIDialogParamBlock) {</span>
<a href="#l7.59"></a><span id="l7.59">     helpFileURI = window.arguments[0].GetString(0);</span>
<a href="#l7.60"></a><span id="l7.60">     // trailing &quot;/&quot; included.</span>
<a href="#l7.61"></a><span id="l7.61">     helpBaseURI = helpFileURI.substring(0, helpFileURI.lastIndexOf(&quot;/&quot;)+1);</span>
<a href="#l7.62"></a><span id="l7.62">     helpTopic = window.arguments[0].GetString(1);</span>
<a href="#l7.63"></a><span id="l7.63">   }</span>
<a href="#l7.64"></a><span id="l7.64"> </span>
<a href="#l7.65"></a><span id="l7.65">   loadHelpRDF();</span>
<a href="#l7.66"></a><span id="l7.66">   displayTopic(helpTopic);</span>
<a href="#l7.67"></a><span id="l7.67"> </span>
<a href="#l7.68"></a><span id="l7.68">   // Move to Center of Screen</span>
<a href="#l7.69"></a><span id="l7.69">   const width = document.documentElement.getAttribute(&quot;width&quot;);</span>
<a href="#l7.70"></a><span id="l7.70">   const height = document.documentElement.getAttribute(&quot;height&quot;);</span>
<a href="#l7.71"></a><span id="l7.71">   window.moveTo((screen.availWidth - width) / 2, (screen.availHeight - height) / 2);</span>
<a href="#l7.72"></a><span id="l7.72"> </span>
<a href="#l7.73"></a><span id="l7.73">   // Initialize history.</span>
<a href="#l7.74"></a><span id="l7.74" class="difflineminus">-  getWebNavigation().sessionHistory = </span>
<a href="#l7.75"></a><span id="l7.75" class="difflineminus">-    Components.classes[&quot;@mozilla.org/browser/shistory;1&quot;]</span>
<a href="#l7.76"></a><span id="l7.76" class="difflineminus">-              .createInstance(Components.interfaces.nsISHistory);</span>
<a href="#l7.77"></a><span id="l7.77" class="difflineplus">+  getWebNavigation().sessionHistory =</span>
<a href="#l7.78"></a><span id="l7.78" class="difflineplus">+    Cc[&quot;@mozilla.org/browser/shistory;1&quot;].createInstance(Ci.nsISHistory);</span>
<a href="#l7.79"></a><span id="l7.79">   window.XULBrowserWindow = new nsHelpStatusHandler();</span>
<a href="#l7.80"></a><span id="l7.80"> </span>
<a href="#l7.81"></a><span id="l7.81">   //Start the status handler.</span>
<a href="#l7.82"></a><span id="l7.82">   window.XULBrowserWindow.init();</span>
<a href="#l7.83"></a><span id="l7.83"> </span>
<a href="#l7.84"></a><span id="l7.84">   // Hook up UI through Progress Listener</span>
<a href="#l7.85"></a><span id="l7.85" class="difflineminus">-  const interfaceRequestor = helpBrowser.docShell.QueryInterface(Components.interfaces.nsIInterfaceRequestor);</span>
<a href="#l7.86"></a><span id="l7.86" class="difflineminus">-  const webProgress = interfaceRequestor.getInterface(Components.interfaces.nsIWebProgress);</span>
<a href="#l7.87"></a><span id="l7.87" class="difflineplus">+  const interfaceRequestor = helpBrowser.docShell.QueryInterface(Ci.nsIInterfaceRequestor);</span>
<a href="#l7.88"></a><span id="l7.88" class="difflineplus">+  const webProgress = interfaceRequestor.getInterface(Ci.nsIWebProgress);</span>
<a href="#l7.89"></a><span id="l7.89"> </span>
<a href="#l7.90"></a><span id="l7.90" class="difflineminus">-  webProgress.addProgressListener(window.XULBrowserWindow, Components.interfaces.nsIWebProgress.NOTIFY_ALL);</span>
<a href="#l7.91"></a><span id="l7.91" class="difflineplus">+  webProgress.addProgressListener(window.XULBrowserWindow, Ci.nsIWebProgress.NOTIFY_ALL);</span>
<a href="#l7.92"></a><span id="l7.92"> </span>
<a href="#l7.93"></a><span id="l7.93">   var searchBox = document.getElementById(&quot;findText&quot;);</span>
<a href="#l7.94"></a><span id="l7.94">   searchBox.clickSelectsAll = getBoolPref(&quot;browser.urlbar.clickSelectsAll&quot;, true);</span>
<a href="#l7.95"></a><span id="l7.95"> </span>
<a href="#l7.96"></a><span id="l7.96">   setTimeout(focusSearch, 0);</span>
<a href="#l7.97"></a><span id="l7.97"> </span>
<a href="#l7.98"></a><span id="l7.98">   helpExternal = document.getElementById(&quot;help-external&quot;);</span>
<a href="#l7.99"></a><span id="l7.99">   helpExternal.docShell.useErrorPages = false;</span>
<a href="#l7.100"></a><span id="l7.100">   helpExternal</span>
<a href="#l7.101"></a><span id="l7.101">     .docShell</span>
<a href="#l7.102"></a><span id="l7.102" class="difflineminus">-    .QueryInterface(Components.interfaces.nsIInterfaceRequestor)</span>
<a href="#l7.103"></a><span id="l7.103" class="difflineminus">-    .getInterface(Components.interfaces.nsIURIContentListener)</span>
<a href="#l7.104"></a><span id="l7.104" class="difflineplus">+    .QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l7.105"></a><span id="l7.105" class="difflineplus">+    .getInterface(Ci.nsIURIContentListener)</span>
<a href="#l7.106"></a><span id="l7.106">     .parentContentListener = helpContentListener;</span>
<a href="#l7.107"></a><span id="l7.107" class="difflineminus">-  helpExternal.addProgressListener(window.XULBrowserWindow, Components.interfaces.nsIWebProgress.NOTIFY_ALL);</span>
<a href="#l7.108"></a><span id="l7.108" class="difflineplus">+  helpExternal.addProgressListener(window.XULBrowserWindow, Ci.nsIWebProgress.NOTIFY_ALL);</span>
<a href="#l7.109"></a><span id="l7.109"> </span>
<a href="#l7.110"></a><span id="l7.110"> }</span>
<a href="#l7.111"></a><span id="l7.111"> function contentClick(event) {</span>
<a href="#l7.112"></a><span id="l7.112">   // is this a left click on a link?</span>
<a href="#l7.113"></a><span id="l7.113">   if (event.shiftKey || event.ctrlKey || event.altKey || event.metaKey || event.button != 0)</span>
<a href="#l7.114"></a><span id="l7.114">     return true;</span>
<a href="#l7.115"></a><span id="l7.115"> </span>
<a href="#l7.116"></a><span id="l7.116">   // is this a link?</span>
<a href="#l7.117"></a><span id="l7.117" class="difflineat">@@ -172,17 +169,17 @@ function contentClick(event) {</span>
<a href="#l7.118"></a><span id="l7.118">   // is this an internal link?</span>
<a href="#l7.119"></a><span id="l7.119">   if (target.href.lastIndexOf(&quot;chrome:&quot;, 0) == 0)</span>
<a href="#l7.120"></a><span id="l7.120">     return true;</span>
<a href="#l7.121"></a><span id="l7.121"> </span>
<a href="#l7.122"></a><span id="l7.122">   var uri = target.href;</span>
<a href="#l7.123"></a><span id="l7.123">   if (/^x-moz-url-link:/.test(uri))</span>
<a href="#l7.124"></a><span id="l7.124">     uri = Services.urlFormatter.formatURLPref(RegExp.rightContext);</span>
<a href="#l7.125"></a><span id="l7.125"> </span>
<a href="#l7.126"></a><span id="l7.126" class="difflineminus">-  const loadFlags = Components.interfaces.nsIWebNavigation.LOAD_FLAGS_IS_LINK;</span>
<a href="#l7.127"></a><span id="l7.127" class="difflineplus">+  const loadFlags = Ci.nsIWebNavigation.LOAD_FLAGS_IS_LINK;</span>
<a href="#l7.128"></a><span id="l7.128">   try {</span>
<a href="#l7.129"></a><span id="l7.129">     helpExternal.webNavigation.loadURI(uri, loadFlags, null, null, null);</span>
<a href="#l7.130"></a><span id="l7.130">   } catch (e) {}</span>
<a href="#l7.131"></a><span id="l7.131">   return false;</span>
<a href="#l7.132"></a><span id="l7.132"> }</span>
<a href="#l7.133"></a><span id="l7.133"> </span>
<a href="#l7.134"></a><span id="l7.134"> function showSidebar() {</span>
<a href="#l7.135"></a><span id="l7.135">   document.getElementById(&quot;help-sidebar-splitter&quot;).setAttribute(&quot;state&quot;, &quot;open&quot;);</span>
<a href="#l7.136"></a><span id="l7.136" class="difflineat">@@ -323,44 +320,43 @@ function filterNodeByPlatform(aDatasourc</span>
<a href="#l7.137"></a><span id="l7.137">      log(&quot;Datasources over &quot; + MAX_LEVEL + &quot; levels deep are unsupported.&quot;);</span>
<a href="#l7.138"></a><span id="l7.138">      return;</span>
<a href="#l7.139"></a><span id="l7.139">   }</span>
<a href="#l7.140"></a><span id="l7.140"> </span>
<a href="#l7.141"></a><span id="l7.141">   // get the subheadings under aCurrentResource and filter them</span>
<a href="#l7.142"></a><span id="l7.142">   var nodes = aDatasource.GetTargets(aCurrentResource, NC_SUBHEADINGS, true);</span>
<a href="#l7.143"></a><span id="l7.143">   while (nodes.hasMoreElements()) {</span>
<a href="#l7.144"></a><span id="l7.144">     var node = nodes.getNext();</span>
<a href="#l7.145"></a><span id="l7.145" class="difflineminus">-    node = node.QueryInterface(Components.interfaces.nsIRDFResource);</span>
<a href="#l7.146"></a><span id="l7.146" class="difflineplus">+    node = node.QueryInterface(Ci.nsIRDFResource);</span>
<a href="#l7.147"></a><span id="l7.147">     // should we test for rdf:Seq here?  see also doFindOnDatasource</span>
<a href="#l7.148"></a><span id="l7.148">     filterSeqByPlatform(aDatasource, node, aCurrentLevel+1);</span>
<a href="#l7.149"></a><span id="l7.149">   }</span>
<a href="#l7.150"></a><span id="l7.150"> }</span>
<a href="#l7.151"></a><span id="l7.151"> </span>
<a href="#l7.152"></a><span id="l7.152"> # filterSeqByPlatform</span>
<a href="#l7.153"></a><span id="l7.153"> # Go through the children of aNode, if any, removing statements applicable</span>
<a href="#l7.154"></a><span id="l7.154"> # only on other platforms.</span>
<a href="#l7.155"></a><span id="l7.155"> function filterSeqByPlatform(aDatasource, aNode, aCurrentLevel) {</span>
<a href="#l7.156"></a><span id="l7.156">   // get nc:subheading children into an enumerator</span>
<a href="#l7.157"></a><span id="l7.157" class="difflineminus">-  var RDFC = Components.classes[&quot;@mozilla.org/rdf/container;1&quot;]</span>
<a href="#l7.158"></a><span id="l7.158" class="difflineminus">-                       .createInstance(Components.interfaces.nsIRDFContainer);</span>
<a href="#l7.159"></a><span id="l7.159" class="difflineplus">+  var RDFC = Cc[&quot;@mozilla.org/rdf/container;1&quot;].createInstance(Ci.nsIRDFContainer);</span>
<a href="#l7.160"></a><span id="l7.160">   RDFC.Init(aDatasource, aNode);</span>
<a href="#l7.161"></a><span id="l7.161">   var targets = RDFC.GetElements();</span>
<a href="#l7.162"></a><span id="l7.162"> </span>
<a href="#l7.163"></a><span id="l7.163">   // process items in the rdf:Seq</span>
<a href="#l7.164"></a><span id="l7.164">   while (targets.hasMoreElements()) {</span>
<a href="#l7.165"></a><span id="l7.165">     var currentTarget = targets.getNext();</span>
<a href="#l7.166"></a><span id="l7.166"> </span>
<a href="#l7.167"></a><span id="l7.167">     // find out on which platforms this node is meaningful</span>
<a href="#l7.168"></a><span id="l7.168">     var nodePlatforms = getAttribute(aDatasource,</span>
<a href="#l7.169"></a><span id="l7.169" class="difflineminus">-                                     currentTarget.QueryInterface(Components.interfaces.nsIRDFResource),</span>
<a href="#l7.170"></a><span id="l7.170" class="difflineplus">+                                     currentTarget.QueryInterface(Ci.nsIRDFResource),</span>
<a href="#l7.171"></a><span id="l7.171">                                      NC_PLATFORM,</span>
<a href="#l7.172"></a><span id="l7.172">                                      platform);</span>
<a href="#l7.173"></a><span id="l7.173"> </span>
<a href="#l7.174"></a><span id="l7.174">     if (nodePlatforms.split(/\s+/).indexOf(platform) == -1) { // node is for another platform</span>
<a href="#l7.175"></a><span id="l7.175" class="difflineminus">-      var currentNode = currentTarget.QueryInterface(Components.interfaces.nsIRDFNode);</span>
<a href="#l7.176"></a><span id="l7.176" class="difflineplus">+      var currentNode = currentTarget.QueryInterface(Ci.nsIRDFNode);</span>
<a href="#l7.177"></a><span id="l7.177">       // &quot;false&quot; because we don't want to renumber elements in the container</span>
<a href="#l7.178"></a><span id="l7.178">       RDFC.RemoveElement(currentNode, false);</span>
<a href="#l7.179"></a><span id="l7.179"> </span>
<a href="#l7.180"></a><span id="l7.180">       // move to next node - ignore the children, because 1) they might be</span>
<a href="#l7.181"></a><span id="l7.181">       // needed elsewhere and 2) nodes not connected to RDF_ROOT are ignored</span>
<a href="#l7.182"></a><span id="l7.182">       continue;</span>
<a href="#l7.183"></a><span id="l7.183">     }</span>
<a href="#l7.184"></a><span id="l7.184"> </span>
<a href="#l7.185"></a><span id="l7.185" class="difflineat">@@ -402,17 +398,17 @@ function getLink(ID) {</span>
<a href="#l7.186"></a><span id="l7.186">     var tocDSArray = gTocDSList.split(/\s+/)</span>
<a href="#l7.187"></a><span id="l7.187">                                .filter(function(x) { return x != &quot;rdf:null&quot;; });</span>
<a href="#l7.188"></a><span id="l7.188"> </span>
<a href="#l7.189"></a><span id="l7.189">     for (var i = 0; i &lt; tocDSArray.length; i++) {</span>
<a href="#l7.190"></a><span id="l7.190">       var resource = RDF.GetResource(tocDSArray[i] + &quot;#&quot; + ID);</span>
<a href="#l7.191"></a><span id="l7.191">       var link = tocDS.GetTarget(resource, NC_LINK, true);</span>
<a href="#l7.192"></a><span id="l7.192">       if (!link)  // no such rdf:ID found</span>
<a href="#l7.193"></a><span id="l7.193">         continue;</span>
<a href="#l7.194"></a><span id="l7.194" class="difflineminus">-      return link.QueryInterface(Components.interfaces.nsIRDFLiteral).Value;</span>
<a href="#l7.195"></a><span id="l7.195" class="difflineplus">+      return link.QueryInterface(Ci.nsIRDFLiteral).Value;</span>
<a href="#l7.196"></a><span id="l7.196">     }</span>
<a href="#l7.197"></a><span id="l7.197">     return null;</span>
<a href="#l7.198"></a><span id="l7.198"> }</span>
<a href="#l7.199"></a><span id="l7.199"> </span>
<a href="#l7.200"></a><span id="l7.200"> # Called by contextHelp.js to determine if this window is displaying the</span>
<a href="#l7.201"></a><span id="l7.201"> # requested help file.</span>
<a href="#l7.202"></a><span id="l7.202"> function getHelpFileURI() {</span>
<a href="#l7.203"></a><span id="l7.203">     return helpFileURI;</span>
<a href="#l7.204"></a><span id="l7.204" class="difflineat">@@ -430,17 +426,17 @@ function getWebNavigation() {</span>
<a href="#l7.205"></a><span id="l7.205">     return null;</span>
<a href="#l7.206"></a><span id="l7.206">   }</span>
<a href="#l7.207"></a><span id="l7.207"> }</span>
<a href="#l7.208"></a><span id="l7.208"> </span>
<a href="#l7.209"></a><span id="l7.209"> function loadURI(uri) {</span>
<a href="#l7.210"></a><span id="l7.210">     if (uri.substr(0,7) != &quot;chrome:&quot;) {</span>
<a href="#l7.211"></a><span id="l7.211">         uri = helpBaseURI + uri;</span>
<a href="#l7.212"></a><span id="l7.212">     }</span>
<a href="#l7.213"></a><span id="l7.213" class="difflineminus">-    getWebNavigation().loadURI(uri, Components.interfaces.nsIWebNavigation.LOAD_FLAGS_NONE,</span>
<a href="#l7.214"></a><span id="l7.214" class="difflineplus">+    getWebNavigation().loadURI(uri, Ci.nsIWebNavigation.LOAD_FLAGS_NONE,</span>
<a href="#l7.215"></a><span id="l7.215">         null, null, null);</span>
<a href="#l7.216"></a><span id="l7.216"> }</span>
<a href="#l7.217"></a><span id="l7.217"> </span>
<a href="#l7.218"></a><span id="l7.218"> function goBack() {</span>
<a href="#l7.219"></a><span id="l7.219">   try</span>
<a href="#l7.220"></a><span id="l7.220">   {</span>
<a href="#l7.221"></a><span id="l7.221">     getWebNavigation().goBack();</span>
<a href="#l7.222"></a><span id="l7.222">   } catch (e)</span>
<a href="#l7.223"></a><span id="l7.223" class="difflineat">@@ -558,23 +554,23 @@ nsHelpStatusHandler.prototype = {</span>
<a href="#l7.224"></a><span id="l7.224">     onProgressChange : function(aWebProgress, aRequest, aCurSelfProgress,</span>
<a href="#l7.225"></a><span id="l7.225">         aMaxSelfProgress, aCurTotalProgress, aMaxTotalProgress) {},</span>
<a href="#l7.226"></a><span id="l7.226">     onStatusChange : function(aWebProgress, aRequest, aStatus, aMessage) {},</span>
<a href="#l7.227"></a><span id="l7.227">     onSecurityChange : function(aWebProgress, aRequest, state) {},</span>
<a href="#l7.228"></a><span id="l7.228">     onLocationChange : function(aWebProgress, aRequest, aLocation, aFlags) {</span>
<a href="#l7.229"></a><span id="l7.229">         UpdateBackForwardButtons();</span>
<a href="#l7.230"></a><span id="l7.230">     },</span>
<a href="#l7.231"></a><span id="l7.231">     QueryInterface : function(aIID) {</span>
<a href="#l7.232"></a><span id="l7.232" class="difflineminus">-        if (aIID.equals(Components.interfaces.nsIWebProgressListener) ||</span>
<a href="#l7.233"></a><span id="l7.233" class="difflineminus">-                aIID.equals(Components.interfaces.nsISupportsWeakReference) ||</span>
<a href="#l7.234"></a><span id="l7.234" class="difflineminus">-                aIID.equals(Components.interfaces.nsIXULBrowserWindow) ||</span>
<a href="#l7.235"></a><span id="l7.235" class="difflineminus">-                aIID.equals(Components.interfaces.nsISupports)) {</span>
<a href="#l7.236"></a><span id="l7.236" class="difflineminus">-            return this;</span>
<a href="#l7.237"></a><span id="l7.237" class="difflineplus">+        if (aIID.equals(Ci.nsIWebProgressListener) ||</span>
<a href="#l7.238"></a><span id="l7.238" class="difflineplus">+            aIID.equals(Ci.nsISupportsWeakReference) ||</span>
<a href="#l7.239"></a><span id="l7.239" class="difflineplus">+            aIID.equals(Ci.nsIXULBrowserWindow) ||</span>
<a href="#l7.240"></a><span id="l7.240" class="difflineplus">+            aIID.equals(Ci.nsISupports)) {</span>
<a href="#l7.241"></a><span id="l7.241" class="difflineplus">+          return this;</span>
<a href="#l7.242"></a><span id="l7.242">         }</span>
<a href="#l7.243"></a><span id="l7.243" class="difflineminus">-        throw Components.results.NS_NOINTERFACE;</span>
<a href="#l7.244"></a><span id="l7.244" class="difflineplus">+        throw Cr.NS_NOINTERFACE;</span>
<a href="#l7.245"></a><span id="l7.245">     },</span>
<a href="#l7.246"></a><span id="l7.246"> </span>
<a href="#l7.247"></a><span id="l7.247">     init : function() {},</span>
<a href="#l7.248"></a><span id="l7.248"> </span>
<a href="#l7.249"></a><span id="l7.249">     destroy : function() {},</span>
<a href="#l7.250"></a><span id="l7.250"> </span>
<a href="#l7.251"></a><span id="l7.251">     setJSStatus : function(status) {},</span>
<a href="#l7.252"></a><span id="l7.252">     setOverLink : function(link, context) {},</span>
<a href="#l7.253"></a><span id="l7.253" class="difflineat">@@ -609,17 +605,17 @@ function UpdateBackForwardButtons() {</span>
<a href="#l7.254"></a><span id="l7.254">     }</span>
<a href="#l7.255"></a><span id="l7.255"> }</span>
<a href="#l7.256"></a><span id="l7.256"> </span>
<a href="#l7.257"></a><span id="l7.257"> function onselect_loadURI(tree) {</span>
<a href="#l7.258"></a><span id="l7.258">     try {</span>
<a href="#l7.259"></a><span id="l7.259">         var resource = tree.view.getResourceAtIndex(tree.currentIndex);</span>
<a href="#l7.260"></a><span id="l7.260">         var link = tree.database.GetTarget(resource, NC_LINK, true);</span>
<a href="#l7.261"></a><span id="l7.261">         if (link) {</span>
<a href="#l7.262"></a><span id="l7.262" class="difflineminus">-            link = link.QueryInterface(Components.interfaces.nsIRDFLiteral);</span>
<a href="#l7.263"></a><span id="l7.263" class="difflineplus">+            link = link.QueryInterface(Ci.nsIRDFLiteral);</span>
<a href="#l7.264"></a><span id="l7.264">             loadURI(link.Value);</span>
<a href="#l7.265"></a><span id="l7.265">         }</span>
<a href="#l7.266"></a><span id="l7.266">     } catch (e) {</span>
<a href="#l7.267"></a><span id="l7.267">     }// when switching between tabs a spurious row number is returned.</span>
<a href="#l7.268"></a><span id="l7.268"> }</span>
<a href="#l7.269"></a><span id="l7.269"> </span>
<a href="#l7.270"></a><span id="l7.270"> function focusSearch() {</span>
<a href="#l7.271"></a><span id="l7.271">   var searchBox = document.getElementById(&quot;findText&quot;);</span>
<a href="#l7.272"></a><span id="l7.272" class="difflineat">@@ -648,18 +644,18 @@ function doFind() {</span>
<a href="#l7.273"></a><span id="l7.273"> </span>
<a href="#l7.274"></a><span id="l7.274">     // compile the search string, which has already been split up above, into regexps</span>
<a href="#l7.275"></a><span id="l7.275">     for (var i=0; i &lt; RE.length; ++i) {</span>
<a href="#l7.276"></a><span id="l7.276">       RE[i] = new RegExp(RE[i], &quot;i&quot;);</span>
<a href="#l7.277"></a><span id="l7.277">     }</span>
<a href="#l7.278"></a><span id="l7.278">     emptySearch = true;</span>
<a href="#l7.279"></a><span id="l7.279"> </span>
<a href="#l7.280"></a><span id="l7.280">     // search TOC</span>
<a href="#l7.281"></a><span id="l7.281" class="difflineminus">-    var resultsDS = Components.classes[&quot;@mozilla.org/rdf/datasource;1?name=in-memory-datasource&quot;]</span>
<a href="#l7.282"></a><span id="l7.282" class="difflineminus">-        .createInstance(Components.interfaces.nsIRDFDataSource);</span>
<a href="#l7.283"></a><span id="l7.283" class="difflineplus">+    var resultsDS = Cc[&quot;@mozilla.org/rdf/datasource;1?name=in-memory-datasource&quot;]</span>
<a href="#l7.284"></a><span id="l7.284" class="difflineplus">+                      .createInstance(Ci.nsIRDFDataSource);</span>
<a href="#l7.285"></a><span id="l7.285">     var sourceDS = helpTocPanel.database;</span>
<a href="#l7.286"></a><span id="l7.286">     doFindOnDatasource(resultsDS, sourceDS, RDF_ROOT, 0);</span>
<a href="#l7.287"></a><span id="l7.287"> </span>
<a href="#l7.288"></a><span id="l7.288">     // search glossary.</span>
<a href="#l7.289"></a><span id="l7.289">     sourceDS = helpGlossaryPanel.database;</span>
<a href="#l7.290"></a><span id="l7.290">     doFindOnDatasource(resultsDS, sourceDS, RDF_ROOT, 0);</span>
<a href="#l7.291"></a><span id="l7.291"> </span>
<a href="#l7.292"></a><span id="l7.292">     // search index</span>
<a href="#l7.293"></a><span id="l7.293" class="difflineat">@@ -692,37 +688,34 @@ function doFindOnDatasource(resultsDS, s</span>
<a href="#l7.294"></a><span id="l7.294">         } catch (e) {</span>
<a href="#l7.295"></a><span id="l7.295">             log(&quot;Recursive reference to unknown resource.&quot;);</span>
<a href="#l7.296"></a><span id="l7.296">         }</span>
<a href="#l7.297"></a><span id="l7.297">         return;</span>
<a href="#l7.298"></a><span id="l7.298">     }</span>
<a href="#l7.299"></a><span id="l7.299">     // find all SUBHEADING children of current resource.</span>
<a href="#l7.300"></a><span id="l7.300">     var targets = sourceDS.GetTargets(resource, NC_SUBHEADINGS, true);</span>
<a href="#l7.301"></a><span id="l7.301">     while (targets.hasMoreElements()) {</span>
<a href="#l7.302"></a><span id="l7.302" class="difflineminus">-        var target = targets.getNext();</span>
<a href="#l7.303"></a><span id="l7.303" class="difflineminus">-        target = target.QueryInterface(Components.interfaces.nsIRDFResource);</span>
<a href="#l7.304"></a><span id="l7.304" class="difflineplus">+        var target = targets.getNext().QueryInterface(Ci.nsIRDFResource);</span>
<a href="#l7.305"></a><span id="l7.305">         // The first child of a rdf:subheading should (must) be a rdf:seq.</span>
<a href="#l7.306"></a><span id="l7.306">         // Should we test for a SEQ here?</span>
<a href="#l7.307"></a><span id="l7.307">         doFindOnSeq(resultsDS, sourceDS, target, level+1);</span>
<a href="#l7.308"></a><span id="l7.308">     }</span>
<a href="#l7.309"></a><span id="l7.309"> }</span>
<a href="#l7.310"></a><span id="l7.310"> </span>
<a href="#l7.311"></a><span id="l7.311"> function doFindOnSeq(resultsDS, sourceDS, resource, level) {</span>
<a href="#l7.312"></a><span id="l7.312">     // load up an RDFContainer so we can access the contents of the current</span>
<a href="#l7.313"></a><span id="l7.313">     // rdf:seq.</span>
<a href="#l7.314"></a><span id="l7.314">     RDFContainer.Init(sourceDS, resource);</span>
<a href="#l7.315"></a><span id="l7.315">     var targets = RDFContainer.GetElements();</span>
<a href="#l7.316"></a><span id="l7.316">     while (targets.hasMoreElements()) {</span>
<a href="#l7.317"></a><span id="l7.317">         var target = targets.getNext();</span>
<a href="#l7.318"></a><span id="l7.318">         var link = sourceDS.GetTarget(target, NC_LINK, true);</span>
<a href="#l7.319"></a><span id="l7.319">         var name = sourceDS.GetTarget(target, NC_NAME, true);</span>
<a href="#l7.320"></a><span id="l7.320"> </span>
<a href="#l7.321"></a><span id="l7.321" class="difflineminus">-        if (link &amp;&amp;</span>
<a href="#l7.322"></a><span id="l7.322" class="difflineminus">-            name instanceof Components.interfaces.nsIRDFLiteral &amp;&amp;</span>
<a href="#l7.323"></a><span id="l7.323" class="difflineminus">-            isMatch(name.Value)) {</span>
<a href="#l7.324"></a><span id="l7.324" class="difflineplus">+        if (link &amp;&amp; name instanceof Ci.nsIRDFLiteral &amp;&amp; isMatch(name.Value)) {</span>
<a href="#l7.325"></a><span id="l7.325">             // we have found a search entry - add it to the results datasource.</span>
<a href="#l7.326"></a><span id="l7.326">             var urn = RDF.GetAnonymousResource();</span>
<a href="#l7.327"></a><span id="l7.327">             resultsDS.Assert(urn, NC_NAME, name, true);</span>
<a href="#l7.328"></a><span id="l7.328">             resultsDS.Assert(urn, NC_LINK, link, true);</span>
<a href="#l7.329"></a><span id="l7.329">             resultsDS.Assert(RDF_ROOT, NC_CHILD, urn, true);</span>
<a href="#l7.330"></a><span id="l7.330"> </span>
<a href="#l7.331"></a><span id="l7.331">             emptySearch = false;</span>
<a href="#l7.332"></a><span id="l7.332">         }</span>
<a href="#l7.333"></a><span id="l7.333" class="difflineat">@@ -762,17 +755,17 @@ function getAttribute(datasource, resour</span>
<a href="#l7.334"></a><span id="l7.334">     if (!literal) {</span>
<a href="#l7.335"></a><span id="l7.335">         return defaultValue;</span>
<a href="#l7.336"></a><span id="l7.336">     }</span>
<a href="#l7.337"></a><span id="l7.337">     return getLiteralValue(literal, defaultValue);</span>
<a href="#l7.338"></a><span id="l7.338"> }</span>
<a href="#l7.339"></a><span id="l7.339"> </span>
<a href="#l7.340"></a><span id="l7.340"> function getLiteralValue(literal, defaultValue) {</span>
<a href="#l7.341"></a><span id="l7.341">     if (literal) {</span>
<a href="#l7.342"></a><span id="l7.342" class="difflineminus">-        literal = literal.QueryInterface(Components.interfaces.nsIRDFLiteral);</span>
<a href="#l7.343"></a><span id="l7.343" class="difflineplus">+        literal = literal.QueryInterface(Ci.nsIRDFLiteral);</span>
<a href="#l7.344"></a><span id="l7.344">         if (literal) {</span>
<a href="#l7.345"></a><span id="l7.345">             return literal.Value;</span>
<a href="#l7.346"></a><span id="l7.346">         }</span>
<a href="#l7.347"></a><span id="l7.347">     }</span>
<a href="#l7.348"></a><span id="l7.348">     if (defaultValue) {</span>
<a href="#l7.349"></a><span id="l7.349">         return defaultValue;</span>
<a href="#l7.350"></a><span id="l7.350">     }</span>
<a href="#l7.351"></a><span id="l7.351">     return null;</span>
<a href="#l7.352"></a><span id="l7.352" class="difflineat">@@ -780,36 +773,36 @@ function getLiteralValue(literal, defaul</span>
<a href="#l7.353"></a><span id="l7.353"> </span>
<a href="#l7.354"></a><span id="l7.354"> # Write debug string to error console.</span>
<a href="#l7.355"></a><span id="l7.355"> function log(aText) {</span>
<a href="#l7.356"></a><span id="l7.356">     CONSOLE_SERVICE.logStringMessage(aText);</span>
<a href="#l7.357"></a><span id="l7.357"> }</span>
<a href="#l7.358"></a><span id="l7.358"> </span>
<a href="#l7.359"></a><span id="l7.359"> function getBoolPref (aPrefname, aDefault)</span>
<a href="#l7.360"></a><span id="l7.360"> {</span>
<a href="#l7.361"></a><span id="l7.361" class="difflineminus">-  try { </span>
<a href="#l7.362"></a><span id="l7.362" class="difflineminus">-    var pref = Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l7.363"></a><span id="l7.363" class="difflineminus">-                         .getService(Components.interfaces.nsIPrefBranch);</span>
<a href="#l7.364"></a><span id="l7.364" class="difflineplus">+  try {</span>
<a href="#l7.365"></a><span id="l7.365" class="difflineplus">+    var pref = Cc[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l7.366"></a><span id="l7.366" class="difflineplus">+                 .getService(Ci.nsIPrefBranch);</span>
<a href="#l7.367"></a><span id="l7.367">     return pref.getBoolPref(aPrefname);</span>
<a href="#l7.368"></a><span id="l7.368">   }</span>
<a href="#l7.369"></a><span id="l7.369">   catch(e) {</span>
<a href="#l7.370"></a><span id="l7.370">     return aDefault;</span>
<a href="#l7.371"></a><span id="l7.371">   }</span>
<a href="#l7.372"></a><span id="l7.372"> }</span>
<a href="#l7.373"></a><span id="l7.373"> </span>
<a href="#l7.374"></a><span id="l7.374"> # getXulWin - Returns the current Help window as a nsIXULWindow.</span>
<a href="#l7.375"></a><span id="l7.375"> function getXulWin()</span>
<a href="#l7.376"></a><span id="l7.376"> {</span>
<a href="#l7.377"></a><span id="l7.377" class="difflineminus">-  window.QueryInterface(Components.interfaces.nsIInterfaceRequestor);</span>
<a href="#l7.378"></a><span id="l7.378" class="difflineminus">-  var webnav = window.getInterface(Components.interfaces.nsIWebNavigation);</span>
<a href="#l7.379"></a><span id="l7.379" class="difflineminus">-  var dsti = webnav.QueryInterface(Components.interfaces.nsIDocShellTreeItem);</span>
<a href="#l7.380"></a><span id="l7.380" class="difflineplus">+  window.QueryInterface(Ci.nsIInterfaceRequestor);</span>
<a href="#l7.381"></a><span id="l7.381" class="difflineplus">+  var webnav = window.getInterface(Ci.nsIWebNavigation);</span>
<a href="#l7.382"></a><span id="l7.382" class="difflineplus">+  var dsti = webnav.QueryInterface(Ci.nsIDocShellTreeItem);</span>
<a href="#l7.383"></a><span id="l7.383">   var treeowner = dsti.treeOwner;</span>
<a href="#l7.384"></a><span id="l7.384" class="difflineminus">-  var ifreq = treeowner.QueryInterface(Components.interfaces.nsIInterfaceRequestor);</span>
<a href="#l7.385"></a><span id="l7.385" class="difflineplus">+  var ifreq = treeowner.QueryInterface(Ci.nsIInterfaceRequestor);</span>
<a href="#l7.386"></a><span id="l7.386"> </span>
<a href="#l7.387"></a><span id="l7.387" class="difflineminus">-  return ifreq.getInterface(Components.interfaces.nsIXULWindow);</span>
<a href="#l7.388"></a><span id="l7.388" class="difflineplus">+  return ifreq.getInterface(Ci.nsIXULWindow);</span>
<a href="#l7.389"></a><span id="l7.389"> }</span>
<a href="#l7.390"></a><span id="l7.390"> </span>
<a href="#l7.391"></a><span id="l7.391"> # toggleZLevel - Toggles whether or not the window will always appear on top. Because</span>
<a href="#l7.392"></a><span id="l7.392"> #   alwaysRaised is not supported on an OS other than Windows, this code will not</span>
<a href="#l7.393"></a><span id="l7.393"> #   appear in those builds.</span>
<a href="#l7.394"></a><span id="l7.394"> #</span>
<a href="#l7.395"></a><span id="l7.395"> #   element - The DOM node that persists the checked state.</span>
<a href="#l7.396"></a><span id="l7.396"> #ifdef XP_WIN</span>
<a href="#l7.397"></a><span id="l7.397" class="difflineat">@@ -831,27 +824,27 @@ function toggleZLevel(element)</span>
<a href="#l7.398"></a><span id="l7.398"> }</span>
<a href="#l7.399"></a><span id="l7.399"> #endif</span>
<a href="#l7.400"></a><span id="l7.400"> </span>
<a href="#l7.401"></a><span id="l7.401"> var helpContentListener = {</span>
<a href="#l7.402"></a><span id="l7.402">   onStartURIOpen: function(aURI) {</span>
<a href="#l7.403"></a><span id="l7.403">     return false;</span>
<a href="#l7.404"></a><span id="l7.404">   },</span>
<a href="#l7.405"></a><span id="l7.405">   doContent: function(aContentType, aIsContentPreferred, aRequest, aContentHandler) {</span>
<a href="#l7.406"></a><span id="l7.406" class="difflineminus">-    throw Components.results.NS_ERROR_UNEXPECTED;</span>
<a href="#l7.407"></a><span id="l7.407" class="difflineplus">+    throw Cr.NS_ERROR_UNEXPECTED;</span>
<a href="#l7.408"></a><span id="l7.408">   },</span>
<a href="#l7.409"></a><span id="l7.409">   isPreferred: function(aContentType, aDesiredContentType) {</span>
<a href="#l7.410"></a><span id="l7.410">     return false;</span>
<a href="#l7.411"></a><span id="l7.411">   },</span>
<a href="#l7.412"></a><span id="l7.412">   canHandleContent: function(aContentType, aIsContentPreferred, aDesiredContentType) {</span>
<a href="#l7.413"></a><span id="l7.413">     return false;</span>
<a href="#l7.414"></a><span id="l7.414">   },</span>
<a href="#l7.415"></a><span id="l7.415">   loadCookie: null,</span>
<a href="#l7.416"></a><span id="l7.416">   parentContentListener: null,</span>
<a href="#l7.417"></a><span id="l7.417">   QueryInterface: function (aIID) {</span>
<a href="#l7.418"></a><span id="l7.418" class="difflineminus">-    if (aIID.equals(Components.interfaces.nsIURIContentListener) ||</span>
<a href="#l7.419"></a><span id="l7.419" class="difflineminus">-        aIID.equals(Components.interfaces.nsISupportsWeakReference) ||</span>
<a href="#l7.420"></a><span id="l7.420" class="difflineminus">-        aIID.equals(Components.interfaces.nsISupports))</span>
<a href="#l7.421"></a><span id="l7.421" class="difflineplus">+    if (aIID.equals(Ci.nsIURIContentListener) ||</span>
<a href="#l7.422"></a><span id="l7.422" class="difflineplus">+        aIID.equals(Ci.nsISupportsWeakReference) ||</span>
<a href="#l7.423"></a><span id="l7.423" class="difflineplus">+        aIID.equals(Ci.nsISupports))</span>
<a href="#l7.424"></a><span id="l7.424">       return this;</span>
<a href="#l7.425"></a><span id="l7.425"> </span>
<a href="#l7.426"></a><span id="l7.426" class="difflineminus">-    throw Components.results.NS_ERROR_NO_INTERFACE;</span>
<a href="#l7.427"></a><span id="l7.427" class="difflineplus">+    throw Cr.NS_ERROR_NO_INTERFACE;</span>
<a href="#l7.428"></a><span id="l7.428">   }</span>
<a href="#l7.429"></a><span id="l7.429"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/suite/common/search/search.xml</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/suite/common/search/search.xml</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -103,23 +103,23 @@</span>
<a href="#l8.4"></a><span id="l8.4">       &lt;field name=&quot;_textboxInitialized&quot;&gt;false&lt;/field&gt;</span>
<a href="#l8.5"></a><span id="l8.5">       &lt;field name=&quot;_textbox&quot;&gt;document.getAnonymousElementByAttribute(this,</span>
<a href="#l8.6"></a><span id="l8.6">           &quot;anonid&quot;, &quot;searchbar-textbox&quot;);&lt;/field&gt;</span>
<a href="#l8.7"></a><span id="l8.7">       &lt;field name=&quot;_popup&quot;&gt;document.getAnonymousElementByAttribute(this,</span>
<a href="#l8.8"></a><span id="l8.8">           &quot;anonid&quot;, &quot;searchbar-popup&quot;);&lt;/field&gt;</span>
<a href="#l8.9"></a><span id="l8.9">       &lt;field name=&quot;searchButton&quot;&gt;document.getAnonymousElementByAttribute(this,</span>
<a href="#l8.10"></a><span id="l8.10">           &quot;anonid&quot;, &quot;searchbar-engine-button&quot;);&lt;/field&gt;</span>
<a href="#l8.11"></a><span id="l8.11">       &lt;field name=&quot;_searchService&quot;&gt;</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-        Components.classes[&quot;@mozilla.org/browser/search-service;1&quot;]</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-                  .getService(Components.interfaces.nsIBrowserSearchService);</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineplus">+        Cc[&quot;@mozilla.org/browser/search-service;1&quot;]</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineplus">+          .getService(Ci.nsIBrowserSearchService);</span>
<a href="#l8.16"></a><span id="l8.16">       &lt;/field&gt;</span>
<a href="#l8.17"></a><span id="l8.17">       &lt;field name=&quot;usePrivateBrowsing&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineminus">-        window.QueryInterface(Components.interfaces.nsIInterfaceRequestor)</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineminus">-              .getInterface(Components.interfaces.nsIWebNavigation)</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineminus">-              .QueryInterface(Components.interfaces.nsILoadContext)</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineplus">+        window.QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineplus">+              .getInterface(Ci.nsIWebNavigation)</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineplus">+              .QueryInterface(Ci.nsILoadContext)</span>
<a href="#l8.24"></a><span id="l8.24">               .usePrivateBrowsing</span>
<a href="#l8.25"></a><span id="l8.25">       &lt;/field&gt;</span>
<a href="#l8.26"></a><span id="l8.26">       &lt;field name=&quot;_addedObserver&quot;&gt;false&lt;/field&gt;</span>
<a href="#l8.27"></a><span id="l8.27">       &lt;field name=&quot;_engines&quot;&gt;null&lt;/field&gt;</span>
<a href="#l8.28"></a><span id="l8.28">       &lt;field name=&quot;_needToBuildPopup&quot;&gt;true&lt;/field&gt;</span>
<a href="#l8.29"></a><span id="l8.29">       &lt;field name=&quot;FormHistory&quot; readonly=&quot;true&quot;&gt;&lt;![CDATA[</span>
<a href="#l8.30"></a><span id="l8.30">         (ChromeUtils.import(&quot;resource://gre/modules/FormHistory.jsm&quot;, {}))</span>
<a href="#l8.31"></a><span id="l8.31">                     .FormHistory;</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineat">@@ -545,24 +545,23 @@</span>
<a href="#l8.33"></a><span id="l8.33"> </span>
<a href="#l8.34"></a><span id="l8.34">         // Because XBL and the customize toolbar code interacts poorly,</span>
<a href="#l8.35"></a><span id="l8.35">         // there may not be anything to remove here</span>
<a href="#l8.36"></a><span id="l8.36">         try {</span>
<a href="#l8.37"></a><span id="l8.37">           this.controllers.removeController(this.searchbarController);</span>
<a href="#l8.38"></a><span id="l8.38">         } catch (ex) { }</span>
<a href="#l8.39"></a><span id="l8.39">       ]]&gt;&lt;/destructor&gt;</span>
<a href="#l8.40"></a><span id="l8.40">       &lt;field name=&quot;_prefBranch&quot;&gt;</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineminus">-        Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l8.42"></a><span id="l8.42" class="difflineminus">-                  .getService(Components.interfaces.nsIPrefBranch)</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineplus">+        Cc[&quot;@mozilla.org/preferences-service;1&quot;].getService(Ci.nsIPrefBranch);</span>
<a href="#l8.44"></a><span id="l8.44">       &lt;/field&gt;</span>
<a href="#l8.45"></a><span id="l8.45">       &lt;field name=&quot;_inputBox&quot;&gt;</span>
<a href="#l8.46"></a><span id="l8.46">         document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;textbox-input-box&quot;);</span>
<a href="#l8.47"></a><span id="l8.47">       &lt;/field&gt;</span>
<a href="#l8.48"></a><span id="l8.48">       &lt;field name=&quot;_suggestEnabled&quot;&gt;</span>
<a href="#l8.49"></a><span id="l8.49" class="difflineminus">-        this._prefBranch.getBoolPref(&quot;browser.search.suggest.enabled&quot;)</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineplus">+        this._prefBranch.getBoolPref(&quot;browser.search.suggest.enabled&quot;);</span>
<a href="#l8.51"></a><span id="l8.51">       &lt;/field&gt;</span>
<a href="#l8.52"></a><span id="l8.52"> </span>
<a href="#l8.53"></a><span id="l8.53">       &lt;method name=&quot;observe&quot;&gt;</span>
<a href="#l8.54"></a><span id="l8.54">         &lt;parameter name=&quot;aSubject&quot;/&gt;</span>
<a href="#l8.55"></a><span id="l8.55">         &lt;parameter name=&quot;aTopic&quot;/&gt;</span>
<a href="#l8.56"></a><span id="l8.56">         &lt;parameter name=&quot;aData&quot;/&gt;</span>
<a href="#l8.57"></a><span id="l8.57">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l8.58"></a><span id="l8.58">           if (aTopic == &quot;nsPref:changed&quot;) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/suite/common/tests/browser/browser_637020_slow.sjs</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/suite/common/tests/browser/browser_637020_slow.sjs</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -1,14 +1,11 @@</span>
<a href="#l9.4"></a><span id="l9.4"> /* Any copyright is dedicated to the Public Domain.</span>
<a href="#l9.5"></a><span id="l9.5">  * http://creativecommons.org/publicdomain/zero/1.0/ */</span>
<a href="#l9.6"></a><span id="l9.6"> </span>
<a href="#l9.7"></a><span id="l9.7" class="difflineminus">-const Cc = Components.classes;</span>
<a href="#l9.8"></a><span id="l9.8" class="difflineminus">-const Ci = Components.interfaces;</span>
<a href="#l9.9"></a><span id="l9.9" class="difflineminus">-</span>
<a href="#l9.10"></a><span id="l9.10"> const DELAY_MS = &quot;2000&quot;;</span>
<a href="#l9.11"></a><span id="l9.11"> </span>
<a href="#l9.12"></a><span id="l9.12"> let timer;</span>
<a href="#l9.13"></a><span id="l9.13"> </span>
<a href="#l9.14"></a><span id="l9.14"> function handleRequest(req, resp) {</span>
<a href="#l9.15"></a><span id="l9.15">   resp.processAsync();</span>
<a href="#l9.16"></a><span id="l9.16">   resp.setHeader(&quot;Cache-Control&quot;, &quot;no-cache&quot;, false);</span>
<a href="#l9.17"></a><span id="l9.17">   resp.setHeader(&quot;Content-Type&quot;, &quot;text/html;charset=utf-8&quot;, false);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/suite/extensions/debugQA/content/debugQAMenuOverlay.xul</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/suite/extensions/debugQA/content/debugQAMenuOverlay.xul</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -154,17 +154,17 @@</span>
<a href="#l10.4"></a><span id="l10.4">           &lt;/menupopup&gt;</span>
<a href="#l10.5"></a><span id="l10.5">         &lt;/menu&gt;</span>
<a href="#l10.6"></a><span id="l10.6"> </span>
<a href="#l10.7"></a><span id="l10.7">         &lt;menuseparator/&gt;</span>
<a href="#l10.8"></a><span id="l10.8"> </span>
<a href="#l10.9"></a><span id="l10.9">         &lt;menuitem label=&quot;Composer (with test page)&quot;</span>
<a href="#l10.10"></a><span id="l10.10">                   oncommand=&quot;window.openDialog('chrome://editor/content/','_blank','chrome,all,dialog=no','chrome://debugqa/content/EditorInitPage.html')&quot;/&gt;</span>
<a href="#l10.11"></a><span id="l10.11">         &lt;menuitem label=&quot;Flush Memory&quot;</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-                  oncommand=&quot;Components.classes['@mozilla.org/xpcom/memory-service;1'].getService(Components.interfaces.nsIMemory).heapMinimize(true);&quot;/&gt;</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+                  oncommand=&quot;Cc['@mozilla.org/xpcom/memory-service;1'].getService(Ci.nsIMemory).heapMinimize(true);&quot;/&gt;</span>
<a href="#l10.14"></a><span id="l10.14">         &lt;menuitem label=&quot;Show Build Configuration&quot;</span>
<a href="#l10.15"></a><span id="l10.15">                   oncommand=&quot;openTopWin('about:buildconfig');&quot;/&gt;</span>
<a href="#l10.16"></a><span id="l10.16"> </span>
<a href="#l10.17"></a><span id="l10.17">       &lt;/menupopup&gt;</span>
<a href="#l10.18"></a><span id="l10.18">     &lt;/menu&gt;</span>
<a href="#l10.19"></a><span id="l10.19"> </span>
<a href="#l10.20"></a><span id="l10.20">     &lt;menu id=&quot;qaMenu&quot; accesskey=&quot;Q&quot; label=&quot;QA&quot; insertbefore=&quot;menu_Help&quot;&gt;</span>
<a href="#l10.21"></a><span id="l10.21">       &lt;menupopup id=&quot;qaMenuPopup&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/suite/mailnews/commandglue.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/suite/mailnews/commandglue.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -57,23 +57,22 @@ function GetServer(uri)</span>
<a href="#l11.4"></a><span id="l11.4"> function LoadMessageByUri(uri)</span>
<a href="#l11.5"></a><span id="l11.5"> {</span>
<a href="#l11.6"></a><span id="l11.6">   //dump(&quot;XXX LoadMessageByUri &quot; + uri + &quot; vs &quot; + gCurrentDisplayedMessage + &quot;\n&quot;);</span>
<a href="#l11.7"></a><span id="l11.7">   if(uri != gCurrentDisplayedMessage)</span>
<a href="#l11.8"></a><span id="l11.8">   {</span>
<a href="#l11.9"></a><span id="l11.9">         dump(&quot;fix this, get the nsIMsgDBHdr and the nsIMsgFolder from the uri...\n&quot;);</span>
<a href="#l11.10"></a><span id="l11.10"> /*</span>
<a href="#l11.11"></a><span id="l11.11">     var resource = RDF.GetResource(uri);</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-    var message = resource.QueryInterface(Components.interfaces.nsIMessage);</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+    var message = resource.QueryInterface(Ci.nsIMessage);</span>
<a href="#l11.14"></a><span id="l11.14">     if (message)</span>
<a href="#l11.15"></a><span id="l11.15">       setTitleFromFolder(message.msgFolder, message.mimef2DecodedSubject);</span>
<a href="#l11.16"></a><span id="l11.16"> </span>
<a href="#l11.17"></a><span id="l11.17" class="difflineminus">-    var nsIMsgFolder = Components.interfaces.nsIMsgFolder;</span>
<a href="#l11.18"></a><span id="l11.18">     if (message.msgFolder.server.downloadOnBiff)</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineminus">-      message.msgFolder.biffState = nsIMsgFolder.nsMsgBiffState_NoMail;</span>
<a href="#l11.20"></a><span id="l11.20" class="difflineplus">+      message.msgFolder.biffState = Ci.nsIMsgFolder.nsMsgBiffState_NoMail;</span>
<a href="#l11.21"></a><span id="l11.21"> */</span>
<a href="#l11.22"></a><span id="l11.22"> </span>
<a href="#l11.23"></a><span id="l11.23">     gCurrentDisplayedMessage = uri;</span>
<a href="#l11.24"></a><span id="l11.24">     gHaveLoadedMessage = true;</span>
<a href="#l11.25"></a><span id="l11.25">     OpenURL(uri);</span>
<a href="#l11.26"></a><span id="l11.26">   }</span>
<a href="#l11.27"></a><span id="l11.27"> </span>
<a href="#l11.28"></a><span id="l11.28"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/suite/mailnews/mailWidgets.xml</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/suite/mailnews/mailWidgets.xml</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -766,18 +766,18 @@</span>
<a href="#l12.4"></a><span id="l12.4">       &lt;field name=&quot;internalScope&quot;&gt;null&lt;/field&gt;</span>
<a href="#l12.5"></a><span id="l12.5">       &lt;field name=&quot;internalValue&quot;&gt;-1&lt;/field&gt;</span>
<a href="#l12.6"></a><span id="l12.6">       &lt;field readonly=&quot;true&quot; name=&quot;validityManager&quot;&gt;</span>
<a href="#l12.7"></a><span id="l12.7">         &lt;![CDATA[</span>
<a href="#l12.8"></a><span id="l12.8">            Cc['@mozilla.org/mail/search/validityManager;1'].getService(Ci.nsIMsgSearchValidityManager);</span>
<a href="#l12.9"></a><span id="l12.9">         ]]&gt;</span>
<a href="#l12.10"></a><span id="l12.10">       &lt;/field&gt;</span>
<a href="#l12.11"></a><span id="l12.11">       &lt;field name=&quot;filterService&quot;&gt;</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-        Components.classes[&quot;@mozilla.org/messenger/services/filters;1&quot;]</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineminus">-                  .getService(Components.interfaces.nsIMsgFilterService)</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineplus">+        Cc[&quot;@mozilla.org/messenger/services/filters;1&quot;]</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineplus">+          .getService(Ci.nsIMsgFilterService);</span>
<a href="#l12.16"></a><span id="l12.16">       &lt;/field&gt;</span>
<a href="#l12.17"></a><span id="l12.17">       &lt;property name=&quot;searchScope&quot; onget=&quot;return this.internalScope;&quot;&gt;</span>
<a href="#l12.18"></a><span id="l12.18">         &lt;!-- scope ID - retrieve the table --&gt;</span>
<a href="#l12.19"></a><span id="l12.19">         &lt;setter&gt;</span>
<a href="#l12.20"></a><span id="l12.20">           &lt;![CDATA[</span>
<a href="#l12.21"></a><span id="l12.21">             // if scope isn't changing this is a noop</span>
<a href="#l12.22"></a><span id="l12.22">             if (this.internalScope == val) return val;</span>
<a href="#l12.23"></a><span id="l12.23"> </span>
<a href="#l12.24"></a><span id="l12.24" class="difflineat">@@ -1066,17 +1066,17 @@</span>
<a href="#l12.25"></a><span id="l12.25">       &lt;/constructor&gt;</span>
<a href="#l12.26"></a><span id="l12.26">     &lt;/implementation&gt;</span>
<a href="#l12.27"></a><span id="l12.27">   &lt;/binding&gt;</span>
<a href="#l12.28"></a><span id="l12.28"> </span>
<a href="#l12.29"></a><span id="l12.29">   &lt;!-- searchoperator - Contains, Is Less than, etc --&gt;</span>
<a href="#l12.30"></a><span id="l12.30">   &lt;binding id=&quot;searchoperator&quot; name=&quot;searchOperator&quot;</span>
<a href="#l12.31"></a><span id="l12.31">            extends=&quot;chrome://messenger/content/mailWidgets.xml#search-menulist-abstract&quot;&gt;</span>
<a href="#l12.32"></a><span id="l12.32">     &lt;implementation&gt;</span>
<a href="#l12.33"></a><span id="l12.33" class="difflineminus">-      &lt;field name=&quot;searchAttribute&quot;&gt;Components.interfaces.nsMsgSearchAttrib.Default&lt;/field&gt;</span>
<a href="#l12.34"></a><span id="l12.34" class="difflineplus">+      &lt;field name=&quot;searchAttribute&quot;&gt;Ci.nsMsgSearchAttrib.Default&lt;/field&gt;</span>
<a href="#l12.35"></a><span id="l12.35">       &lt;field name=&quot;stringBundle&quot;&gt;</span>
<a href="#l12.36"></a><span id="l12.36">         &lt;![CDATA[</span>
<a href="#l12.37"></a><span id="l12.37">           Cc[&quot;@mozilla.org/intl/stringbundle;1&quot;]</span>
<a href="#l12.38"></a><span id="l12.38">             .getService(Ci.nsIStringBundleService)</span>
<a href="#l12.39"></a><span id="l12.39">             .createBundle(&quot;chrome://messenger/locale/search-operators.properties&quot;)</span>
<a href="#l12.40"></a><span id="l12.40">         ]]&gt;</span>
<a href="#l12.41"></a><span id="l12.41">       &lt;/field&gt;</span>
<a href="#l12.42"></a><span id="l12.42">       &lt;property name=&quot;valueLabel&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l12.43"></a><span id="l12.43" class="difflineat">@@ -1202,18 +1202,18 @@</span>
<a href="#l12.44"></a><span id="l12.44">       &lt;/xul:menulist&gt;</span>
<a href="#l12.45"></a><span id="l12.45">       &lt;xul:hbox flex=&quot;1&quot; class=&quot;search-value-custom&quot; xbl:inherits=&quot;disabled&quot;/&gt;</span>
<a href="#l12.46"></a><span id="l12.46">     &lt;/content&gt;</span>
<a href="#l12.47"></a><span id="l12.47">     &lt;implementation&gt;</span>
<a href="#l12.48"></a><span id="l12.48">       &lt;field name=&quot;internalOperator&quot;&gt;null&lt;/field&gt;</span>
<a href="#l12.49"></a><span id="l12.49">       &lt;field name=&quot;internalAttribute&quot;&gt;null&lt;/field&gt;</span>
<a href="#l12.50"></a><span id="l12.50">       &lt;field name=&quot;internalValue&quot;&gt;null&lt;/field&gt;</span>
<a href="#l12.51"></a><span id="l12.51">       &lt;field name=&quot;filterService&quot;&gt;</span>
<a href="#l12.52"></a><span id="l12.52" class="difflineminus">-        Components.classes[&quot;@mozilla.org/messenger/services/filters;1&quot;]</span>
<a href="#l12.53"></a><span id="l12.53" class="difflineminus">-                  .getService(Components.interfaces.nsIMsgFilterService);</span>
<a href="#l12.54"></a><span id="l12.54" class="difflineplus">+        Cc[&quot;@mozilla.org/messenger/services/filters;1&quot;]</span>
<a href="#l12.55"></a><span id="l12.55" class="difflineplus">+          .getService(Ci.nsIMsgFilterService);</span>
<a href="#l12.56"></a><span id="l12.56">       &lt;/field&gt;</span>
<a href="#l12.57"></a><span id="l12.57">       &lt;property name=&quot;opParentValue&quot; onget=&quot;return this.internalOperator;&quot;&gt;</span>
<a href="#l12.58"></a><span id="l12.58">         &lt;setter&gt;</span>
<a href="#l12.59"></a><span id="l12.59">           &lt;![CDATA[</span>
<a href="#l12.60"></a><span id="l12.60">             // noop if we're not changing it</span>
<a href="#l12.61"></a><span id="l12.61">             if (this.internalOperator == val) return val;</span>
<a href="#l12.62"></a><span id="l12.62"> </span>
<a href="#l12.63"></a><span id="l12.63">             // Keywords has the null field IsEmpty</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/suite/mailnews/start.xhtml</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/suite/mailnews/start.xhtml</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -39,18 +39,18 @@</span>
<a href="#l13.4"></a><span id="l13.4"> &lt;p&gt;&amp;dict_intro.label;&lt;/p&gt;</span>
<a href="#l13.5"></a><span id="l13.5"> &lt;p&gt;&amp;dict_info.label;&lt;/p&gt;</span>
<a href="#l13.6"></a><span id="l13.6"> &lt;h2&gt;&amp;info.title;&lt;/h2&gt;</span>
<a href="#l13.7"></a><span id="l13.7"> &lt;p&gt;&amp;info_bugs.label;&lt;/p&gt;</span>
<a href="#l13.8"></a><span id="l13.8"> &lt;/div&gt;</span>
<a href="#l13.9"></a><span id="l13.9"> </span>
<a href="#l13.10"></a><span id="l13.10"> &lt;script type=&quot;application/javascript&quot;&gt;</span>
<a href="#l13.11"></a><span id="l13.11">   // get vendor, dictionaries and release notes URLs from prefs</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-  var formatter = Components.classes[&quot;@mozilla.org/toolkit/URLFormatterService;1&quot;]</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineminus">-                            .getService(Components.interfaces.nsIURLFormatter);</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+  var formatter = Cc[&quot;@mozilla.org/toolkit/URLFormatterService;1&quot;]</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineplus">+                    .getService(Ci.nsIURLFormatter);</span>
<a href="#l13.16"></a><span id="l13.16">   var vendorURL = formatter.formatURLPref(&quot;app.vendorURL&quot;);</span>
<a href="#l13.17"></a><span id="l13.17"> </span>
<a href="#l13.18"></a><span id="l13.18">   if (vendorURL != &quot;about:blank&quot;) {</span>
<a href="#l13.19"></a><span id="l13.19">     var vendor = document.getElementById(&quot;vendorURL&quot;);</span>
<a href="#l13.20"></a><span id="l13.20">     if (vendor)</span>
<a href="#l13.21"></a><span id="l13.21">       vendor.setAttribute(&quot;href&quot;, vendorURL);</span>
<a href="#l13.22"></a><span id="l13.22">   }</span>
<a href="#l13.23"></a><span id="l13.23"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/suite/mailnews/tabmail.xml</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/suite/mailnews/tabmail.xml</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -222,18 +222,17 @@</span>
<a href="#l14.4"></a><span id="l14.4">       &lt;destructor&gt;</span>
<a href="#l14.5"></a><span id="l14.5">         &lt;![CDATA[</span>
<a href="#l14.6"></a><span id="l14.6">           this.mPrefs.removeObserver(&quot;browser.tabs.autoHide&quot;, this);</span>
<a href="#l14.7"></a><span id="l14.7">           window.controllers.removeController(this);</span>
<a href="#l14.8"></a><span id="l14.8">         ]]&gt;</span>
<a href="#l14.9"></a><span id="l14.9">       &lt;/destructor&gt;</span>
<a href="#l14.10"></a><span id="l14.10"> </span>
<a href="#l14.11"></a><span id="l14.11">       &lt;field name=&quot;mPrefs&quot;&gt;</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-        Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineminus">-                  .getService(Components.interfaces.nsIPrefBranch);</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineplus">+        Cc[&quot;@mozilla.org/preferences-service;1&quot;].getService(Ci.nsIPrefBranch);</span>
<a href="#l14.15"></a><span id="l14.15">       &lt;/field&gt;</span>
<a href="#l14.16"></a><span id="l14.16"> </span>
<a href="#l14.17"></a><span id="l14.17">       &lt;field name=&quot;currentTabInfo&quot;&gt;</span>
<a href="#l14.18"></a><span id="l14.18">         null</span>
<a href="#l14.19"></a><span id="l14.19">       &lt;/field&gt;</span>
<a href="#l14.20"></a><span id="l14.20"> </span>
<a href="#l14.21"></a><span id="l14.21">       &lt;field name=&quot;tabTypes&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l14.22"></a><span id="l14.22">         new Object()</span>
<a href="#l14.23"></a><span id="l14.23" class="difflineat">@@ -1076,18 +1075,17 @@</span>
<a href="#l14.24"></a><span id="l14.24">             this._animateTimer = null;</span>
<a href="#l14.25"></a><span id="l14.25">           }</span>
<a href="#l14.26"></a><span id="l14.26">           this.arrowScrollbox.removeEventListener(&quot;overflow&quot;, this);</span>
<a href="#l14.27"></a><span id="l14.27">           this.arrowScrollbox.removeEventListener(&quot;underflow&quot;, this);</span>
<a href="#l14.28"></a><span id="l14.28">         ]]&gt;</span>
<a href="#l14.29"></a><span id="l14.29">       &lt;/destructor&gt;</span>
<a href="#l14.30"></a><span id="l14.30"> </span>
<a href="#l14.31"></a><span id="l14.31">       &lt;field name=&quot;mPrefs&quot;&gt;</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineminus">-        Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l14.33"></a><span id="l14.33" class="difflineminus">-                  .getService(Components.interfaces.nsIPrefBranch);</span>
<a href="#l14.34"></a><span id="l14.34" class="difflineplus">+        Cc[&quot;@mozilla.org/preferences-service;1&quot;].getService(Ci.nsIPrefBranch);</span>
<a href="#l14.35"></a><span id="l14.35">       &lt;/field&gt;</span>
<a href="#l14.36"></a><span id="l14.36"> </span>
<a href="#l14.37"></a><span id="l14.37">       &lt;field name=&quot;arrowScrollboxWidth&quot;&gt;0&lt;/field&gt;</span>
<a href="#l14.38"></a><span id="l14.38"> </span>
<a href="#l14.39"></a><span id="l14.39">       &lt;field name=&quot;arrowScrollbox&quot;&gt;</span>
<a href="#l14.40"></a><span id="l14.40">         document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;arrowscrollbox&quot;);</span>
<a href="#l14.41"></a><span id="l14.41">       &lt;/field&gt;</span>
<a href="#l14.42"></a><span id="l14.42"> </span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

