<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 28485:d0bcd93317f907d7475f2722846af5c9ecf333f1</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ d0bcd93317f907d7475f2722846af5c9ecf333f1" />
<meta property="og:url" content="/comm-central/rev/d0bcd93317f907d7475f2722846af5c9ecf333f1" />
<meta property="og:description" content="Bug 1602423 - Remove xpidl [array] use in calIRecurrenceInfo. r=darktrojan" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / d0bcd93317f907d7475f2722846af5c9ecf333f1 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/d0bcd93317f907d7475f2722846af5c9ecf333f1">shortlog</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/d0bcd93317f907d7475f2722846af5c9ecf333f1">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1">files</a> |
changeset |
<a href="/comm-central/raw-rev/d0bcd93317f907d7475f2722846af5c9ecf333f1">raw</a>  | <a href="/comm-central/archive/d0bcd93317f907d7475f2722846af5c9ecf333f1.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1602423">Bug 1602423</a> - Remove xpidl [array] use in calIRecurrenceInfo. r=darktrojan
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#66;&#101;&#110;&#32;&#67;&#97;&#109;&#112;&#98;&#101;&#108;&#108;&#32;&#60;&#98;&#101;&#110;&#99;&#64;&#116;&#104;&#117;&#110;&#100;&#101;&#114;&#98;&#105;&#114;&#100;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Sun, 05 Jan 2020 12:53:28 +0200</td></tr>

<tr>
 <td>changeset 28485</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/d0bcd93317f907d7475f2722846af5c9ecf333f1">d0bcd93317f907d7475f2722846af5c9ecf333f1</a></td>
</tr>



<tr>
<td>parent 28484</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/1f8ec0da7271b230c9e4a088207e275bfa92a6f1">1f8ec0da7271b230c9e4a088207e275bfa92a6f1</a>
</td>
</tr>

<tr>
<td>child 28486</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/2e4a2383f3182d3befbcee92c0ef2ba7347eb23d">2e4a2383f3182d3befbcee92c0ef2ba7347eb23d</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=d0bcd93317f907d7475f2722846af5c9ecf333f1">16869</a></td></tr>
<tr><td>push user</td><td>mkmelin@iki.fi</td></tr>
<tr><td>push date</td><td class="date age">Sun, 05 Jan 2020 10:54:22 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@d0bcd93317f9 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=d0bcd93317f907d7475f2722846af5c9ecf333f1">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=d0bcd93317f907d7475f2722846af5c9ecf333f1&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=d0bcd93317f907d7475f2722846af5c9ecf333f1&newProject=comm-central&newRevision=d0bcd93317f907d7475f2722846af5c9ecf333f1&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=d0bcd93317f907d7475f2722846af5c9ecf333f1&newProject=comm-central&newRevision=d0bcd93317f907d7475f2722846af5c9ecf333f1&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=d0bcd93317f907d7475f2722846af5c9ecf333f1&newProject=comm-central&newRevision=d0bcd93317f907d7475f2722846af5c9ecf333f1&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28darktrojan%29&revcount=50">darktrojan</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1602423">1602423</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1602423">Bug 1602423</a> - Remove xpidl [array] use in calIRecurrenceInfo. r=darktrojan
DONTBUILD</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/content/calendar-invitations-manager.js">calendar/base/content/calendar-invitations-manager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/content/calendar-invitations-manager.js">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/content/calendar-invitations-manager.js">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/content/calendar-invitations-manager.js">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/content/calendar-invitations-manager.js">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/content/calendar-invitations-manager.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">calendar/base/content/dialogs/calendar-event-dialog-recurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/modules/calRecurrenceUtils.jsm">calendar/base/modules/calRecurrenceUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/modules/calRecurrenceUtils.jsm">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/modules/calRecurrenceUtils.jsm">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/modules/calRecurrenceUtils.jsm">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/modules/calRecurrenceUtils.jsm">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/modules/calRecurrenceUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/modules/utils/calIteratorUtils.jsm">calendar/base/modules/utils/calIteratorUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/modules/utils/calIteratorUtils.jsm">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/modules/utils/calIteratorUtils.jsm">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/modules/utils/calIteratorUtils.jsm">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/modules/utils/calIteratorUtils.jsm">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/modules/utils/calIteratorUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/modules/utils/calItipUtils.jsm">calendar/base/modules/utils/calItipUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/modules/utils/calItipUtils.jsm">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/modules/utils/calItipUtils.jsm">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/modules/utils/calItipUtils.jsm">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/modules/utils/calItipUtils.jsm">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/modules/utils/calItipUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/public/calIRecurrenceInfo.idl">calendar/base/public/calIRecurrenceInfo.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/public/calIRecurrenceInfo.idl">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/public/calIRecurrenceInfo.idl">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/public/calIRecurrenceInfo.idl">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/public/calIRecurrenceInfo.idl">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/public/calIRecurrenceInfo.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calAlarmService.js">calendar/base/src/calAlarmService.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calAlarmService.js">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calAlarmService.js">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calAlarmService.js">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calAlarmService.js">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calAlarmService.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calFilter.js">calendar/base/src/calFilter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calFilter.js">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calFilter.js">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calFilter.js">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calFilter.js">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calFilter.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calItemBase.js">calendar/base/src/calItemBase.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calItemBase.js">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calItemBase.js">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calItemBase.js">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calItemBase.js">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calItemBase.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calRecurrenceInfo.js">calendar/base/src/calRecurrenceInfo.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calRecurrenceInfo.js">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calRecurrenceInfo.js">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calRecurrenceInfo.js">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calRecurrenceInfo.js">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/base/src/calRecurrenceInfo.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/lightning/content/lightning-item-iframe.js">calendar/lightning/content/lightning-item-iframe.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/lightning/content/lightning-item-iframe.js">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/lightning/content/lightning-item-iframe.js">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/lightning/content/lightning-item-iframe.js">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/lightning/content/lightning-item-iframe.js">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/lightning/content/lightning-item-iframe.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/lightning/modules/ltnInvitationUtils.jsm">calendar/lightning/modules/ltnInvitationUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/lightning/modules/ltnInvitationUtils.jsm">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/lightning/modules/ltnInvitationUtils.jsm">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/lightning/modules/ltnInvitationUtils.jsm">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/lightning/modules/ltnInvitationUtils.jsm">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/lightning/modules/ltnInvitationUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/providers/memory/calMemoryCalendar.js">calendar/providers/memory/calMemoryCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/providers/memory/calMemoryCalendar.js">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/providers/memory/calMemoryCalendar.js">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/providers/memory/calMemoryCalendar.js">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/providers/memory/calMemoryCalendar.js">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/providers/memory/calMemoryCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/providers/storage/calStorageCalendar.js">calendar/providers/storage/calStorageCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/providers/storage/calStorageCalendar.js">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/providers/storage/calStorageCalendar.js">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/providers/storage/calStorageCalendar.js">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/providers/storage/calStorageCalendar.js">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/providers/storage/calStorageCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_bug343792.js">calendar/test/unit/test_bug343792.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_bug343792.js">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_bug343792.js">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_bug343792.js">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_bug343792.js">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_bug343792.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_bug356207.js">calendar/test/unit/test_bug356207.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_bug356207.js">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_bug356207.js">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_bug356207.js">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_bug356207.js">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_bug356207.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_ics_parser.js">calendar/test/unit/test_ics_parser.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_ics_parser.js">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_ics_parser.js">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_ics_parser.js">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_ics_parser.js">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_ics_parser.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_recur.js">calendar/test/unit/test_recur.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_recur.js">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_recur.js">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_recur.js">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_recur.js">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_recur.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_storage.js">calendar/test/unit/test_storage.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_storage.js">file</a> |
<a href="/comm-central/annotate/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_storage.js">annotate</a> |
<a href="/comm-central/diff/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_storage.js">diff</a> |
<a href="/comm-central/comparison/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_storage.js">comparison</a> |
<a href="/comm-central/log/d0bcd93317f907d7475f2722846af5c9ecf333f1/calendar/test/unit/test_storage.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/content/calendar-invitations-manager.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/content/calendar-invitations-manager.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -324,17 +324,17 @@ InvitationsManager.prototype = {</span>
<a href="#l1.4"></a><span id="l1.4">    * XXXdbo       Please document these correctly.</span>
<a href="#l1.5"></a><span id="l1.5">    *</span>
<a href="#l1.6"></a><span id="l1.6">    * @param item      The item to add.</span>
<a href="#l1.7"></a><span id="l1.7">    */</span>
<a href="#l1.8"></a><span id="l1.8">   addItem: function(item) {</span>
<a href="#l1.9"></a><span id="l1.9">     let recInfo = item.recurrenceInfo;</span>
<a href="#l1.10"></a><span id="l1.10">     if (recInfo &amp;&amp; !cal.itip.isOpenInvitation(item)) {</span>
<a href="#l1.11"></a><span id="l1.11">       // scan exceptions:</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-      let ids = recInfo.getExceptionIds({});</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+      let ids = recInfo.getExceptionIds();</span>
<a href="#l1.14"></a><span id="l1.14">       for (let id of ids) {</span>
<a href="#l1.15"></a><span id="l1.15">         let ex = recInfo.getExceptionFor(id);</span>
<a href="#l1.16"></a><span id="l1.16">         if (ex &amp;&amp; this.validateItem(ex) &amp;&amp; !this.hasItem(ex)) {</span>
<a href="#l1.17"></a><span id="l1.17">           this.mItemList.push(ex);</span>
<a href="#l1.18"></a><span id="l1.18">         }</span>
<a href="#l1.19"></a><span id="l1.19">       }</span>
<a href="#l1.20"></a><span id="l1.20">     } else if (this.validateItem(item) &amp;&amp; !this.hasItem(item)) {</span>
<a href="#l1.21"></a><span id="l1.21">       this.mItemList.push(item);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -164,17 +164,17 @@ const RecurrencePreview = {</span>
<a href="#l2.4"></a><span id="l2.4">         minimonth.showMonth(cal.dtz.dateTimeToJsDate(start));</span>
<a href="#l2.5"></a><span id="l2.5">         if (recurrenceInfo) {</span>
<a href="#l2.6"></a><span id="l2.6">           // retrieve an array of dates that represents all occurrences</span>
<a href="#l2.7"></a><span id="l2.7">           // that fall into this time interval [start,end[.</span>
<a href="#l2.8"></a><span id="l2.8">           // note: the following loop assumes that this array contains</span>
<a href="#l2.9"></a><span id="l2.9">           // dates that are strictly monotonically increasing.</span>
<a href="#l2.10"></a><span id="l2.10">           // should getOccurrenceDates() not enforce this assumption we</span>
<a href="#l2.11"></a><span id="l2.11">           // need to fall back to some different algorithm.</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-          let dates = recurrenceInfo.getOccurrenceDates(start, end, 0, {});</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+          let dates = recurrenceInfo.getOccurrenceDates(start, end, 0);</span>
<a href="#l2.14"></a><span id="l2.14"> </span>
<a href="#l2.15"></a><span id="l2.15">           // now run through all days of this month and set the</span>
<a href="#l2.16"></a><span id="l2.16">           // 'busy' attribute with respect to the occurrence array.</span>
<a href="#l2.17"></a><span id="l2.17">           let index = 0;</span>
<a href="#l2.18"></a><span id="l2.18">           let occurrence = null;</span>
<a href="#l2.19"></a><span id="l2.19">           if (index &lt; dates.length) {</span>
<a href="#l2.20"></a><span id="l2.20">             occurrence = dates[index++].getInTimezone(start.timezone);</span>
<a href="#l2.21"></a><span id="l2.21">           }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/modules/calRecurrenceUtils.jsm</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/modules/calRecurrenceUtils.jsm</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -377,17 +377,17 @@ function recurrenceRule2String(recurrenc</span>
<a href="#l3.4"></a><span id="l3.4"> /**</span>
<a href="#l3.5"></a><span id="l3.5">  * Split rules into negative and positive rules.</span>
<a href="#l3.6"></a><span id="l3.6">  *</span>
<a href="#l3.7"></a><span id="l3.7">  * @param recurrenceInfo    An item's recurrence info to parse.</span>
<a href="#l3.8"></a><span id="l3.8">  * @return                  An array with two elements: an array of positive</span>
<a href="#l3.9"></a><span id="l3.9">  *                            rules and an array of negative rules.</span>
<a href="#l3.10"></a><span id="l3.10">  */</span>
<a href="#l3.11"></a><span id="l3.11"> function splitRecurrenceRules(recurrenceInfo) {</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-  let ritems = recurrenceInfo.getRecurrenceItems({});</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+  let ritems = recurrenceInfo.getRecurrenceItems();</span>
<a href="#l3.14"></a><span id="l3.14">   let rules = [];</span>
<a href="#l3.15"></a><span id="l3.15">   let exceptions = [];</span>
<a href="#l3.16"></a><span id="l3.16">   for (let ritem of ritems) {</span>
<a href="#l3.17"></a><span id="l3.17">     if (ritem.isNegative) {</span>
<a href="#l3.18"></a><span id="l3.18">       exceptions.push(ritem);</span>
<a href="#l3.19"></a><span id="l3.19">     } else {</span>
<a href="#l3.20"></a><span id="l3.20">       rules.push(ritem);</span>
<a href="#l3.21"></a><span id="l3.21">     }</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineat">@@ -424,48 +424,48 @@ function checkRecurrenceRule(aRule, aArr</span>
<a href="#l3.23"></a><span id="l3.23">  */</span>
<a href="#l3.24"></a><span id="l3.24"> function countOccurrences(aItem) {</span>
<a href="#l3.25"></a><span id="l3.25">   let occCounter = null;</span>
<a href="#l3.26"></a><span id="l3.26">   let recInfo = aItem.parentItem.recurrenceInfo;</span>
<a href="#l3.27"></a><span id="l3.27">   if (recInfo &amp;&amp; recInfo.isFinite) {</span>
<a href="#l3.28"></a><span id="l3.28">     occCounter = 0;</span>
<a href="#l3.29"></a><span id="l3.29">     let excCounter = 0;</span>
<a href="#l3.30"></a><span id="l3.30">     let byCount = false;</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-    let ritems = recInfo.getRecurrenceItems({});</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+    let ritems = recInfo.getRecurrenceItems();</span>
<a href="#l3.33"></a><span id="l3.33">     for (let ritem of ritems) {</span>
<a href="#l3.34"></a><span id="l3.34">       if (ritem instanceof Ci.calIRecurrenceRule) {</span>
<a href="#l3.35"></a><span id="l3.35">         if (ritem.isByCount) {</span>
<a href="#l3.36"></a><span id="l3.36">           occCounter = occCounter + ritem.count;</span>
<a href="#l3.37"></a><span id="l3.37">           byCount = true;</span>
<a href="#l3.38"></a><span id="l3.38">         } else {</span>
<a href="#l3.39"></a><span id="l3.39">           // the rule is limited by as an until date</span>
<a href="#l3.40"></a><span id="l3.40">           let from = aItem.parentItem.startDate.clone();</span>
<a href="#l3.41"></a><span id="l3.41">           let until = aItem.parentItem.endDate.clone();</span>
<a href="#l3.42"></a><span id="l3.42">           if (until.compare(ritem.untilDate) == -1) {</span>
<a href="#l3.43"></a><span id="l3.43">             until = ritem.untilDate.clone();</span>
<a href="#l3.44"></a><span id="l3.44">           }</span>
<a href="#l3.45"></a><span id="l3.45"> </span>
<a href="#l3.46"></a><span id="l3.46" class="difflineminus">-          let exceptionIds = recInfo.getExceptionIds({});</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineplus">+          let exceptionIds = recInfo.getExceptionIds();</span>
<a href="#l3.48"></a><span id="l3.48">           for (let exceptionId of exceptionIds) {</span>
<a href="#l3.49"></a><span id="l3.49">             let recur = recInfo.getExceptionFor(exceptionId);</span>
<a href="#l3.50"></a><span id="l3.50">             recur.QueryInterface(Ci.calIEvent);</span>
<a href="#l3.51"></a><span id="l3.51">             if (from.compare(recur.startDate) == 1) {</span>
<a href="#l3.52"></a><span id="l3.52">               from = recur.startDate.clone();</span>
<a href="#l3.53"></a><span id="l3.53">             }</span>
<a href="#l3.54"></a><span id="l3.54">             if (until.compare(recur.endDate) == -1) {</span>
<a href="#l3.55"></a><span id="l3.55">               until = recur.endDate.clone();</span>
<a href="#l3.56"></a><span id="l3.56">             }</span>
<a href="#l3.57"></a><span id="l3.57">           }</span>
<a href="#l3.58"></a><span id="l3.58"> </span>
<a href="#l3.59"></a><span id="l3.59">           // we add an extra day at beginning and end, so we don't</span>
<a href="#l3.60"></a><span id="l3.60">           // need to take care of any timezone conversion</span>
<a href="#l3.61"></a><span id="l3.61">           from.addDuration(cal.createDuration(&quot;-P1D&quot;));</span>
<a href="#l3.62"></a><span id="l3.62">           until.addDuration(cal.createDuration(&quot;P1D&quot;));</span>
<a href="#l3.63"></a><span id="l3.63"> </span>
<a href="#l3.64"></a><span id="l3.64" class="difflineminus">-          let occurrences = recInfo.getOccurrences(from, until, 0, {});</span>
<a href="#l3.65"></a><span id="l3.65" class="difflineplus">+          let occurrences = recInfo.getOccurrences(from, until, 0);</span>
<a href="#l3.66"></a><span id="l3.66">           occCounter = occCounter + occurrences.length;</span>
<a href="#l3.67"></a><span id="l3.67">         }</span>
<a href="#l3.68"></a><span id="l3.68">       } else if (ritem instanceof Ci.calIRecurrenceDate) {</span>
<a href="#l3.69"></a><span id="l3.69">         if (ritem.isNegative) {</span>
<a href="#l3.70"></a><span id="l3.70">           // this is an exdate</span>
<a href="#l3.71"></a><span id="l3.71">           excCounter++;</span>
<a href="#l3.72"></a><span id="l3.72">         } else {</span>
<a href="#l3.73"></a><span id="l3.73">           // this is an (additional) rdate</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/modules/utils/calIteratorUtils.jsm</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/modules/utils/calIteratorUtils.jsm</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -24,17 +24,17 @@ var caliterate = {</span>
<a href="#l4.4"></a><span id="l4.4">    * @param {calIItemBase[]} items        array of items to iterate</span>
<a href="#l4.5"></a><span id="l4.5">    * @yields {calIItemBase}</span>
<a href="#l4.6"></a><span id="l4.6">    */</span>
<a href="#l4.7"></a><span id="l4.7">   items: function*(items) {</span>
<a href="#l4.8"></a><span id="l4.8">     for (let item of items) {</span>
<a href="#l4.9"></a><span id="l4.9">       yield item;</span>
<a href="#l4.10"></a><span id="l4.10">       let rec = item.recurrenceInfo;</span>
<a href="#l4.11"></a><span id="l4.11">       if (rec) {</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-        for (let exid of rec.getExceptionIds({})) {</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+        for (let exid of rec.getExceptionIds()) {</span>
<a href="#l4.14"></a><span id="l4.14">           yield rec.getExceptionFor(exid);</span>
<a href="#l4.15"></a><span id="l4.15">         }</span>
<a href="#l4.16"></a><span id="l4.16">       }</span>
<a href="#l4.17"></a><span id="l4.17">     }</span>
<a href="#l4.18"></a><span id="l4.18">   },</span>
<a href="#l4.19"></a><span id="l4.19"> </span>
<a href="#l4.20"></a><span id="l4.20">   /**</span>
<a href="#l4.21"></a><span id="l4.21">    * Runs the body() function once for each item in the iterator using the event queue to make</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/base/modules/utils/calItipUtils.jsm</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/base/modules/utils/calItipUtils.jsm</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -746,22 +746,22 @@ var calitip = {</span>
<a href="#l5.4"></a><span id="l5.4">           return;</span>
<a href="#l5.5"></a><span id="l5.5">         }</span>
<a href="#l5.6"></a><span id="l5.6">       }</span>
<a href="#l5.7"></a><span id="l5.7"> </span>
<a href="#l5.8"></a><span id="l5.8">       if (aOriginalItem.recurrenceInfo &amp;&amp; aItem.recurrenceInfo) {</span>
<a href="#l5.9"></a><span id="l5.9">         // check whether the two differ only in EXDATEs</span>
<a href="#l5.10"></a><span id="l5.10">         let clonedItem = aItem.clone();</span>
<a href="#l5.11"></a><span id="l5.11">         let exdates = [];</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-        for (let ritem of clonedItem.recurrenceInfo.getRecurrenceItems({})) {</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+        for (let ritem of clonedItem.recurrenceInfo.getRecurrenceItems()) {</span>
<a href="#l5.14"></a><span id="l5.14">           let wrappedRItem = cal.wrapInstance(ritem, Ci.calIRecurrenceDate);</span>
<a href="#l5.15"></a><span id="l5.15">           if (</span>
<a href="#l5.16"></a><span id="l5.16">             ritem.isNegative &amp;&amp;</span>
<a href="#l5.17"></a><span id="l5.17">             wrappedRItem &amp;&amp;</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineminus">-            !aOriginalItem.recurrenceInfo.getRecurrenceItems({}).some(recitem =&gt; {</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineplus">+            !aOriginalItem.recurrenceInfo.getRecurrenceItems().some(recitem =&gt; {</span>
<a href="#l5.20"></a><span id="l5.20">               let wrappedR = cal.wrapInstance(recitem, Ci.calIRecurrenceDate);</span>
<a href="#l5.21"></a><span id="l5.21">               return (</span>
<a href="#l5.22"></a><span id="l5.22">                 recitem.isNegative &amp;&amp; wrappedR &amp;&amp; wrappedR.date.compare(wrappedRItem.date) == 0</span>
<a href="#l5.23"></a><span id="l5.23">               );</span>
<a href="#l5.24"></a><span id="l5.24">             })</span>
<a href="#l5.25"></a><span id="l5.25">           ) {</span>
<a href="#l5.26"></a><span id="l5.26">             exdates.push(wrappedRItem);</span>
<a href="#l5.27"></a><span id="l5.27">           }</span>
<a href="#l5.28"></a><span id="l5.28" class="difflineat">@@ -1372,17 +1372,17 @@ function updateItem(item, itipItemItem) </span>
<a href="#l5.29"></a><span id="l5.29">   let newItem = item.clone();</span>
<a href="#l5.30"></a><span id="l5.30">   newItem.icalComponent = itipItemItem.icalComponent;</span>
<a href="#l5.31"></a><span id="l5.31">   setReceivedInfo(newItem, itipItemItem);</span>
<a href="#l5.32"></a><span id="l5.32">   updateUserData(newItem, item);</span>
<a href="#l5.33"></a><span id="l5.33"> </span>
<a href="#l5.34"></a><span id="l5.34">   let recInfo = itipItemItem.recurrenceInfo;</span>
<a href="#l5.35"></a><span id="l5.35">   if (recInfo) {</span>
<a href="#l5.36"></a><span id="l5.36">     // keep care of installing all overridden items, and mind existing alarms, categories:</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineminus">-    for (let rid of recInfo.getExceptionIds({})) {</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineplus">+    for (let rid of recInfo.getExceptionIds()) {</span>
<a href="#l5.39"></a><span id="l5.39">       let excItem = recInfo.getExceptionFor(rid).clone();</span>
<a href="#l5.40"></a><span id="l5.40">       cal.ASSERT(excItem, &quot;unexpected!&quot;);</span>
<a href="#l5.41"></a><span id="l5.41">       let newExc = newItem.recurrenceInfo.getOccurrenceFor(rid).clone();</span>
<a href="#l5.42"></a><span id="l5.42">       newExc.icalComponent = excItem.icalComponent;</span>
<a href="#l5.43"></a><span id="l5.43">       setReceivedInfo(newExc, itipItemItem);</span>
<a href="#l5.44"></a><span id="l5.44">       let existingExcItem = item.recurrenceInfo &amp;&amp; item.recurrenceInfo.getExceptionFor(rid);</span>
<a href="#l5.45"></a><span id="l5.45">       if (existingExcItem) {</span>
<a href="#l5.46"></a><span id="l5.46">         updateUserData(newExc, existingExcItem);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/base/public/calIRecurrenceInfo.idl</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/base/public/calIRecurrenceInfo.idl</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -47,22 +47,21 @@ interface calIRecurrenceInfo : nsISuppor</span>
<a href="#l6.4"></a><span id="l6.4"> </span>
<a href="#l6.5"></a><span id="l6.5">   /**</span>
<a href="#l6.6"></a><span id="l6.6">    * The end point of the last occurrence, to avoid calculating occurrences for</span>
<a href="#l6.7"></a><span id="l6.7">    * items that have finished recurring. If the object is mutable, or the</span>
<a href="#l6.8"></a><span id="l6.8">    * recurrence is not finite, this value is the maximum possible PRTime.</span>
<a href="#l6.9"></a><span id="l6.9">    */</span>
<a href="#l6.10"></a><span id="l6.10">   readonly attribute PRTime recurrenceEndDate;</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-  /*</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+  Array&lt;calIRecurrenceItem&gt; getRecurrenceItems();</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+  /**</span>
<a href="#l6.15"></a><span id="l6.15">    * Set of recurrence items; the order of these matters.</span>
<a href="#l6.16"></a><span id="l6.16">    */</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineminus">-</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineminus">-  void getRecurrenceItems(out unsigned long aCount, [array,size_is(aCount),retval] out calIRecurrenceItem aItems);</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineminus">-  void setRecurrenceItems(in unsigned long aCount, [array,size_is(aCount)] in calIRecurrenceItem aItems);</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineplus">+  void setRecurrenceItems(in Array&lt;calIRecurrenceItem&gt; aItems);</span>
<a href="#l6.21"></a><span id="l6.21"> </span>
<a href="#l6.22"></a><span id="l6.22">   unsigned long countRecurrenceItems();</span>
<a href="#l6.23"></a><span id="l6.23">   void clearRecurrenceItems();</span>
<a href="#l6.24"></a><span id="l6.24">   void appendRecurrenceItem(in calIRecurrenceItem aItem);</span>
<a href="#l6.25"></a><span id="l6.25"> </span>
<a href="#l6.26"></a><span id="l6.26">   calIRecurrenceItem getRecurrenceItemAt(in unsigned long aIndex);</span>
<a href="#l6.27"></a><span id="l6.27">   void deleteRecurrenceItemAt(in unsigned long aIndex);</span>
<a href="#l6.28"></a><span id="l6.28">   void deleteRecurrenceItem(in calIRecurrenceItem aItem);</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineat">@@ -112,17 +111,17 @@ interface calIRecurrenceInfo : nsISuppor</span>
<a href="#l6.30"></a><span id="l6.30">    * Removes an exception item for the given recurrence ID, if</span>
<a href="#l6.31"></a><span id="l6.31">    * any exist.</span>
<a href="#l6.32"></a><span id="l6.32">    */</span>
<a href="#l6.33"></a><span id="l6.33">   void removeExceptionFor(in calIDateTime aRecurrenceId);</span>
<a href="#l6.34"></a><span id="l6.34"> </span>
<a href="#l6.35"></a><span id="l6.35">   /**</span>
<a href="#l6.36"></a><span id="l6.36">    * Returns a list of all recurrence ids that have exceptions.</span>
<a href="#l6.37"></a><span id="l6.37">    */</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineminus">-  void getExceptionIds(out unsigned long aCount, [array,size_is(aCount),retval] out calIDateTime aIds);</span>
<a href="#l6.39"></a><span id="l6.39" class="difflineplus">+  Array&lt;calIDateTime&gt; getExceptionIds();</span>
<a href="#l6.40"></a><span id="l6.40"> </span>
<a href="#l6.41"></a><span id="l6.41">   /*</span>
<a href="#l6.42"></a><span id="l6.42">    * Recurrence calculation</span>
<a href="#l6.43"></a><span id="l6.43">    */</span>
<a href="#l6.44"></a><span id="l6.44"> </span>
<a href="#l6.45"></a><span id="l6.45">   /*</span>
<a href="#l6.46"></a><span id="l6.46">    * Get the occurrence at the given recurrence ID; if there is no</span>
<a href="#l6.47"></a><span id="l6.47">    * exception, then create a new proxy object with the normal occurrence.</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineat">@@ -158,30 +157,28 @@ interface calIRecurrenceInfo : nsISuppor</span>
<a href="#l6.49"></a><span id="l6.49">    *</span>
<a href="#l6.50"></a><span id="l6.50">    * @param aRangeStart     The (inclusive) date to start searching.</span>
<a href="#l6.51"></a><span id="l6.51">    * @param aRangeEnd       The (exclusive) date to end searching.</span>
<a href="#l6.52"></a><span id="l6.52">    * @param aMaxCount       The maximum number of dates to return</span>
<a href="#l6.53"></a><span id="l6.53">    *</span>
<a href="#l6.54"></a><span id="l6.54">    * @param aCount          The number of dates returned.</span>
<a href="#l6.55"></a><span id="l6.55">    * @return                The array of dates.</span>
<a href="#l6.56"></a><span id="l6.56">    */</span>
<a href="#l6.57"></a><span id="l6.57" class="difflineminus">-  void getOccurrenceDates(in calIDateTime aRangeStart,</span>
<a href="#l6.58"></a><span id="l6.58" class="difflineminus">-                          in calIDateTime aRangeEnd,</span>
<a href="#l6.59"></a><span id="l6.59" class="difflineminus">-                          in unsigned long aMaxCount,</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineminus">-                          out unsigned long aCount, [array,size_is(aCount),retval] out calIDateTime aDates);</span>
<a href="#l6.61"></a><span id="l6.61" class="difflineplus">+  Array&lt;calIDateTime&gt; getOccurrenceDates(in calIDateTime aRangeStart,</span>
<a href="#l6.62"></a><span id="l6.62" class="difflineplus">+                                         in calIDateTime aRangeEnd,</span>
<a href="#l6.63"></a><span id="l6.63" class="difflineplus">+                                         in unsigned long aMaxCount);</span>
<a href="#l6.64"></a><span id="l6.64"> </span>
<a href="#l6.65"></a><span id="l6.65">   /**</span>
<a href="#l6.66"></a><span id="l6.66">    * Return an array of calIItemBase representing all occurrences of this event</span>
<a href="#l6.67"></a><span id="l6.67">    * between start (inclusive) and end (non-inclusive). Exceptions are taken</span>
<a href="#l6.68"></a><span id="l6.68">    * into account.</span>
<a href="#l6.69"></a><span id="l6.69">    *</span>
<a href="#l6.70"></a><span id="l6.70">    * @param aRangeStart     The (inclusive) date to start searching.</span>
<a href="#l6.71"></a><span id="l6.71">    * @param aRangeEnd       The (exclusive) date to end searching.</span>
<a href="#l6.72"></a><span id="l6.72">    * @param aMaxCount       The maximum number of occurrences to return</span>
<a href="#l6.73"></a><span id="l6.73">    *</span>
<a href="#l6.74"></a><span id="l6.74">    * @param aCount          The number of occurrences returned.</span>
<a href="#l6.75"></a><span id="l6.75">    * @return                The array of occurrences.</span>
<a href="#l6.76"></a><span id="l6.76">    */</span>
<a href="#l6.77"></a><span id="l6.77" class="difflineminus">-  void getOccurrences(in calIDateTime aRangeStart,</span>
<a href="#l6.78"></a><span id="l6.78" class="difflineminus">-                       in calIDateTime aRangeEnd,</span>
<a href="#l6.79"></a><span id="l6.79" class="difflineminus">-                       in unsigned long aMaxCount,</span>
<a href="#l6.80"></a><span id="l6.80" class="difflineminus">-                       out unsigned long aCount, [array,size_is(aCount),retval] out calIItemBase aItems);</span>
<a href="#l6.81"></a><span id="l6.81" class="difflineplus">+  Array&lt;calIItemBase&gt; getOccurrences(in calIDateTime aRangeStart,</span>
<a href="#l6.82"></a><span id="l6.82" class="difflineplus">+                                     in calIDateTime aRangeEnd,</span>
<a href="#l6.83"></a><span id="l6.83" class="difflineplus">+                                     in unsigned long aMaxCount);</span>
<a href="#l6.84"></a><span id="l6.84"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/base/src/calAlarmService.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/base/src/calAlarmService.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -408,17 +408,17 @@ calAlarmService.prototype = {</span>
<a href="#l7.4"></a><span id="l7.4"> </span>
<a href="#l7.5"></a><span id="l7.5">   getOccurrencesInRange: function(aItem) {</span>
<a href="#l7.6"></a><span id="l7.6">     // We search 1 month in each direction for alarms.  Therefore,</span>
<a href="#l7.7"></a><span id="l7.7">     // we need occurrences between initial start date and 1 month from now</span>
<a href="#l7.8"></a><span id="l7.8">     let until = nowUTC();</span>
<a href="#l7.9"></a><span id="l7.9">     until.month += 1;</span>
<a href="#l7.10"></a><span id="l7.10"> </span>
<a href="#l7.11"></a><span id="l7.11">     if (aItem &amp;&amp; aItem.recurrenceInfo) {</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-      return aItem.recurrenceInfo.getOccurrences(this.mRangeStart, until, 0, {});</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+      return aItem.recurrenceInfo.getOccurrences(this.mRangeStart, until, 0);</span>
<a href="#l7.14"></a><span id="l7.14">     } else {</span>
<a href="#l7.15"></a><span id="l7.15">       return cal.item.checkIfInRange(aItem, this.mRangeStart, until) ? [aItem] : [];</span>
<a href="#l7.16"></a><span id="l7.16">     }</span>
<a href="#l7.17"></a><span id="l7.17">   },</span>
<a href="#l7.18"></a><span id="l7.18"> </span>
<a href="#l7.19"></a><span id="l7.19">   addAlarmsForOccurrences: function(aParentItem) {</span>
<a href="#l7.20"></a><span id="l7.20">     let occs = this.getOccurrencesInRange(aParentItem);</span>
<a href="#l7.21"></a><span id="l7.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/base/src/calFilter.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/base/src/calFilter.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -804,17 +804,17 @@ calFilter.prototype = {</span>
<a href="#l8.4"></a><span id="l8.4"> </span>
<a href="#l8.5"></a><span id="l8.5">       // we've hit the maximum number of iterations without finding a match</span>
<a href="#l8.6"></a><span id="l8.6">       cal.WARN(&quot;[calFilter] getNextOccurrence: reached maximum iterations for &quot; + aItem.title);</span>
<a href="#l8.7"></a><span id="l8.7">       return null;</span>
<a href="#l8.8"></a><span id="l8.8">     } else {</span>
<a href="#l8.9"></a><span id="l8.9">       // the parent item doesn't match the filter, we can return the first future exception</span>
<a href="#l8.10"></a><span id="l8.10">       // that matches the filter</span>
<a href="#l8.11"></a><span id="l8.11">       let exMatch = null;</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-      aItem.recurrenceInfo.getExceptionIds({}).forEach(function(rID) {</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+      aItem.recurrenceInfo.getExceptionIds().forEach(function(rID) {</span>
<a href="#l8.14"></a><span id="l8.14">         let ex = aItem.recurrenceInfo.getExceptionFor(rID);</span>
<a href="#l8.15"></a><span id="l8.15">         ex.QueryInterface(Ci.calIEvent);</span>
<a href="#l8.16"></a><span id="l8.16">         if (</span>
<a href="#l8.17"></a><span id="l8.17">           ex &amp;&amp;</span>
<a href="#l8.18"></a><span id="l8.18">           cal.dtz.now().compare(ex.startDate || ex.entryDate) &lt; 0 &amp;&amp;</span>
<a href="#l8.19"></a><span id="l8.19">           this.isItemInFilters(ex)</span>
<a href="#l8.20"></a><span id="l8.20">         ) {</span>
<a href="#l8.21"></a><span id="l8.21">           exMatch = ex;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/base/src/calItemBase.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/base/src/calItemBase.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -964,17 +964,17 @@ calItemBase.prototype = {</span>
<a href="#l9.4"></a><span id="l9.4">       icalcomp.addProperty(attachment.icalProperty);</span>
<a href="#l9.5"></a><span id="l9.5">     }</span>
<a href="#l9.6"></a><span id="l9.6"> </span>
<a href="#l9.7"></a><span id="l9.7">     for (let relation of this.getRelations()) {</span>
<a href="#l9.8"></a><span id="l9.8">       icalcomp.addProperty(relation.icalProperty);</span>
<a href="#l9.9"></a><span id="l9.9">     }</span>
<a href="#l9.10"></a><span id="l9.10"> </span>
<a href="#l9.11"></a><span id="l9.11">     if (this.mRecurrenceInfo) {</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-      for (let ritem of this.mRecurrenceInfo.getRecurrenceItems({})) {</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+      for (let ritem of this.mRecurrenceInfo.getRecurrenceItems()) {</span>
<a href="#l9.14"></a><span id="l9.14">         icalcomp.addProperty(ritem.icalProperty);</span>
<a href="#l9.15"></a><span id="l9.15">       }</span>
<a href="#l9.16"></a><span id="l9.16">     }</span>
<a href="#l9.17"></a><span id="l9.17"> </span>
<a href="#l9.18"></a><span id="l9.18">     for (let cat of this.getCategories()) {</span>
<a href="#l9.19"></a><span id="l9.19">       let catprop = icssvc.createIcalProperty(&quot;CATEGORIES&quot;);</span>
<a href="#l9.20"></a><span id="l9.20">       catprop.value = cat;</span>
<a href="#l9.21"></a><span id="l9.21">       icalcomp.addProperty(catprop);</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineat">@@ -1046,17 +1046,17 @@ calItemBase.prototype = {</span>
<a href="#l9.23"></a><span id="l9.23">   clearAlarms: function() {</span>
<a href="#l9.24"></a><span id="l9.24">     this.modify();</span>
<a href="#l9.25"></a><span id="l9.25">     this.mAlarms = [];</span>
<a href="#l9.26"></a><span id="l9.26">   },</span>
<a href="#l9.27"></a><span id="l9.27"> </span>
<a href="#l9.28"></a><span id="l9.28">   // Array&lt;calIItemBase&gt; getOccurrencesBetween(in calIDateTime aStartDate, in calIDateTime aEndDate);</span>
<a href="#l9.29"></a><span id="l9.29">   getOccurrencesBetween: function(aStartDate, aEndDate) {</span>
<a href="#l9.30"></a><span id="l9.30">     if (this.recurrenceInfo) {</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-      return this.recurrenceInfo.getOccurrences(aStartDate, aEndDate, 0, {});</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+      return this.recurrenceInfo.getOccurrences(aStartDate, aEndDate, 0);</span>
<a href="#l9.33"></a><span id="l9.33">     }</span>
<a href="#l9.34"></a><span id="l9.34"> </span>
<a href="#l9.35"></a><span id="l9.35">     if (cal.item.checkIfInRange(this, aStartDate, aEndDate)) {</span>
<a href="#l9.36"></a><span id="l9.36">       return [this];</span>
<a href="#l9.37"></a><span id="l9.37">     }</span>
<a href="#l9.38"></a><span id="l9.38"> </span>
<a href="#l9.39"></a><span id="l9.39">     return [];</span>
<a href="#l9.40"></a><span id="l9.40">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/calendar/base/src/calRecurrenceInfo.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/calendar/base/src/calRecurrenceInfo.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -158,24 +158,23 @@ calRecurrenceInfo.prototype = {</span>
<a href="#l10.4"></a><span id="l10.4">       } else {</span>
<a href="#l10.5"></a><span id="l10.5">         this.mEndDate = MAX_PRTIME;</span>
<a href="#l10.6"></a><span id="l10.6">       }</span>
<a href="#l10.7"></a><span id="l10.7">     }</span>
<a href="#l10.8"></a><span id="l10.8"> </span>
<a href="#l10.9"></a><span id="l10.9">     return this.mEndDate;</span>
<a href="#l10.10"></a><span id="l10.10">   },</span>
<a href="#l10.11"></a><span id="l10.11"> </span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-  getRecurrenceItems: function(aCount) {</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+  getRecurrenceItems: function() {</span>
<a href="#l10.14"></a><span id="l10.14">     this.ensureBaseItem();</span>
<a href="#l10.15"></a><span id="l10.15"> </span>
<a href="#l10.16"></a><span id="l10.16" class="difflineminus">-    aCount.value = this.mRecurrenceItems.length;</span>
<a href="#l10.17"></a><span id="l10.17">     return this.mRecurrenceItems;</span>
<a href="#l10.18"></a><span id="l10.18">   },</span>
<a href="#l10.19"></a><span id="l10.19"> </span>
<a href="#l10.20"></a><span id="l10.20" class="difflineminus">-  setRecurrenceItems: function(aCount, aItems) {</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineplus">+  setRecurrenceItems: function(aItems) {</span>
<a href="#l10.22"></a><span id="l10.22">     this.ensureBaseItem();</span>
<a href="#l10.23"></a><span id="l10.23">     this.ensureMutable();</span>
<a href="#l10.24"></a><span id="l10.24"> </span>
<a href="#l10.25"></a><span id="l10.25">     // XXX should we clone these?</span>
<a href="#l10.26"></a><span id="l10.26">     this.mRecurrenceItems = aItems;</span>
<a href="#l10.27"></a><span id="l10.27">     this.mPositiveRules = null;</span>
<a href="#l10.28"></a><span id="l10.28">     this.mNegativeRules = null;</span>
<a href="#l10.29"></a><span id="l10.29">   },</span>
<a href="#l10.30"></a><span id="l10.30" class="difflineat">@@ -583,40 +582,37 @@ calRecurrenceInfo.prototype = {</span>
<a href="#l10.31"></a><span id="l10.31">     // specified.</span>
<a href="#l10.32"></a><span id="l10.32">     if (aMaxCount &amp;&amp; dates.length &gt; aMaxCount) {</span>
<a href="#l10.33"></a><span id="l10.33">       dates = dates.slice(0, aMaxCount);</span>
<a href="#l10.34"></a><span id="l10.34">     }</span>
<a href="#l10.35"></a><span id="l10.35"> </span>
<a href="#l10.36"></a><span id="l10.36">     return dates;</span>
<a href="#l10.37"></a><span id="l10.37">   },</span>
<a href="#l10.38"></a><span id="l10.38"> </span>
<a href="#l10.39"></a><span id="l10.39" class="difflineminus">-  getOccurrenceDates: function(aRangeStart, aRangeEnd, aMaxCount, aCount) {</span>
<a href="#l10.40"></a><span id="l10.40" class="difflineplus">+  getOccurrenceDates: function(aRangeStart, aRangeEnd, aMaxCount) {</span>
<a href="#l10.41"></a><span id="l10.41">     let dates = this.calculateDates(aRangeStart, aRangeEnd, aMaxCount);</span>
<a href="#l10.42"></a><span id="l10.42">     dates = dates.map(date =&gt; date.rstart);</span>
<a href="#l10.43"></a><span id="l10.43" class="difflineminus">-    aCount.value = dates.length;</span>
<a href="#l10.44"></a><span id="l10.44">     return dates;</span>
<a href="#l10.45"></a><span id="l10.45">   },</span>
<a href="#l10.46"></a><span id="l10.46"> </span>
<a href="#l10.47"></a><span id="l10.47" class="difflineminus">-  getOccurrences: function(aRangeStart, aRangeEnd, aMaxCount, aCount) {</span>
<a href="#l10.48"></a><span id="l10.48" class="difflineplus">+  getOccurrences: function(aRangeStart, aRangeEnd, aMaxCount) {</span>
<a href="#l10.49"></a><span id="l10.49">     let results = [];</span>
<a href="#l10.50"></a><span id="l10.50">     let dates = this.calculateDates(aRangeStart, aRangeEnd, aMaxCount);</span>
<a href="#l10.51"></a><span id="l10.51">     if (dates.length) {</span>
<a href="#l10.52"></a><span id="l10.52">       let count;</span>
<a href="#l10.53"></a><span id="l10.53">       if (aMaxCount) {</span>
<a href="#l10.54"></a><span id="l10.54">         count = Math.min(aMaxCount, dates.length);</span>
<a href="#l10.55"></a><span id="l10.55">       } else {</span>
<a href="#l10.56"></a><span id="l10.56">         count = dates.length;</span>
<a href="#l10.57"></a><span id="l10.57">       }</span>
<a href="#l10.58"></a><span id="l10.58"> </span>
<a href="#l10.59"></a><span id="l10.59">       for (let i = 0; i &lt; count; i++) {</span>
<a href="#l10.60"></a><span id="l10.60">         results.push(this.getOccurrenceFor(dates[i].id));</span>
<a href="#l10.61"></a><span id="l10.61">       }</span>
<a href="#l10.62"></a><span id="l10.62">     }</span>
<a href="#l10.63"></a><span id="l10.63" class="difflineminus">-</span>
<a href="#l10.64"></a><span id="l10.64" class="difflineminus">-    aCount.value = results.length;</span>
<a href="#l10.65"></a><span id="l10.65">     return results;</span>
<a href="#l10.66"></a><span id="l10.66">   },</span>
<a href="#l10.67"></a><span id="l10.67"> </span>
<a href="#l10.68"></a><span id="l10.68">   getOccurrenceFor: function(aRecurrenceId) {</span>
<a href="#l10.69"></a><span id="l10.69">     let proxy = this.getExceptionFor(aRecurrenceId);</span>
<a href="#l10.70"></a><span id="l10.70">     if (!proxy) {</span>
<a href="#l10.71"></a><span id="l10.71">       return this.item.createProxy(aRecurrenceId);</span>
<a href="#l10.72"></a><span id="l10.72">     }</span>
<a href="#l10.73"></a><span id="l10.73" class="difflineat">@@ -727,26 +723,24 @@ calRecurrenceInfo.prototype = {</span>
<a href="#l10.74"></a><span id="l10.74">     return this.mExceptionMap[getRidKey(aRecurrenceId)] || null;</span>
<a href="#l10.75"></a><span id="l10.75">   },</span>
<a href="#l10.76"></a><span id="l10.76"> </span>
<a href="#l10.77"></a><span id="l10.77">   removeExceptionFor: function(aRecurrenceId) {</span>
<a href="#l10.78"></a><span id="l10.78">     this.ensureBaseItem();</span>
<a href="#l10.79"></a><span id="l10.79">     delete this.mExceptionMap[getRidKey(aRecurrenceId)];</span>
<a href="#l10.80"></a><span id="l10.80">   },</span>
<a href="#l10.81"></a><span id="l10.81"> </span>
<a href="#l10.82"></a><span id="l10.82" class="difflineminus">-  getExceptionIds: function(aCount) {</span>
<a href="#l10.83"></a><span id="l10.83" class="difflineplus">+  getExceptionIds: function() {</span>
<a href="#l10.84"></a><span id="l10.84">     this.ensureBaseItem();</span>
<a href="#l10.85"></a><span id="l10.85"> </span>
<a href="#l10.86"></a><span id="l10.86">     let ids = [];</span>
<a href="#l10.87"></a><span id="l10.87">     for (let ex in this.mExceptionMap) {</span>
<a href="#l10.88"></a><span id="l10.88">       let item = this.mExceptionMap[ex];</span>
<a href="#l10.89"></a><span id="l10.89">       ids.push(item.recurrenceId);</span>
<a href="#l10.90"></a><span id="l10.90">     }</span>
<a href="#l10.91"></a><span id="l10.91" class="difflineminus">-</span>
<a href="#l10.92"></a><span id="l10.92" class="difflineminus">-    aCount.value = ids.length;</span>
<a href="#l10.93"></a><span id="l10.93">     return ids;</span>
<a href="#l10.94"></a><span id="l10.94">   },</span>
<a href="#l10.95"></a><span id="l10.95"> </span>
<a href="#l10.96"></a><span id="l10.96">   // changing the startdate of an item needs to take exceptions into account.</span>
<a href="#l10.97"></a><span id="l10.97">   // in case we're about to modify a parentItem (aka 'folded' item), we need</span>
<a href="#l10.98"></a><span id="l10.98">   // to modify the recurrenceId's of all possibly existing exceptions as well.</span>
<a href="#l10.99"></a><span id="l10.99">   onStartDateChange: function(aNewStartTime, aOldStartTime) {</span>
<a href="#l10.100"></a><span id="l10.100">     // passing null for the new starttime would indicate an error condition,</span>
<a href="#l10.101"></a><span id="l10.101" class="difflineat">@@ -762,17 +756,17 @@ calRecurrenceInfo.prototype = {</span>
<a href="#l10.102"></a><span id="l10.102">     let timeDiff = aNewStartTime</span>
<a href="#l10.103"></a><span id="l10.103">       .getInTimezone(cal.dtz.UTC)</span>
<a href="#l10.104"></a><span id="l10.104">       .subtractDate(aOldStartTime.getInTimezone(cal.dtz.UTC));</span>
<a href="#l10.105"></a><span id="l10.105"> </span>
<a href="#l10.106"></a><span id="l10.106">     let rdates = {};</span>
<a href="#l10.107"></a><span id="l10.107"> </span>
<a href="#l10.108"></a><span id="l10.108">     // take RDATE's and EXDATE's into account.</span>
<a href="#l10.109"></a><span id="l10.109">     const kCalIRecurrenceDate = Ci.calIRecurrenceDate;</span>
<a href="#l10.110"></a><span id="l10.110" class="difflineminus">-    let ritems = this.getRecurrenceItems({});</span>
<a href="#l10.111"></a><span id="l10.111" class="difflineplus">+    let ritems = this.getRecurrenceItems();</span>
<a href="#l10.112"></a><span id="l10.112">     for (let ritem of ritems) {</span>
<a href="#l10.113"></a><span id="l10.113">       let rDateInstance = cal.wrapInstance(ritem, kCalIRecurrenceDate);</span>
<a href="#l10.114"></a><span id="l10.114">       let rRuleInstance = cal.wrapInstance(ritem, Ci.calIRecurrenceRule);</span>
<a href="#l10.115"></a><span id="l10.115">       if (rDateInstance) {</span>
<a href="#l10.116"></a><span id="l10.116">         ritem = rDateInstance;</span>
<a href="#l10.117"></a><span id="l10.117">         let date = ritem.date;</span>
<a href="#l10.118"></a><span id="l10.118">         date.addDuration(timeDiff);</span>
<a href="#l10.119"></a><span id="l10.119">         if (!ritem.isNegative) {</span>
<a href="#l10.120"></a><span id="l10.120" class="difflineat">@@ -788,17 +782,17 @@ calRecurrenceInfo.prototype = {</span>
<a href="#l10.121"></a><span id="l10.121">             ritem.untilDate = untilDate;</span>
<a href="#l10.122"></a><span id="l10.122">           }</span>
<a href="#l10.123"></a><span id="l10.123">         }</span>
<a href="#l10.124"></a><span id="l10.124">       }</span>
<a href="#l10.125"></a><span id="l10.125">     }</span>
<a href="#l10.126"></a><span id="l10.126"> </span>
<a href="#l10.127"></a><span id="l10.127">     let startTimezone = aNewStartTime.timezone;</span>
<a href="#l10.128"></a><span id="l10.128">     let modifiedExceptions = [];</span>
<a href="#l10.129"></a><span id="l10.129" class="difflineminus">-    for (let exid of this.getExceptionIds({})) {</span>
<a href="#l10.130"></a><span id="l10.130" class="difflineplus">+    for (let exid of this.getExceptionIds()) {</span>
<a href="#l10.131"></a><span id="l10.131">       let ex = this.getExceptionFor(exid);</span>
<a href="#l10.132"></a><span id="l10.132">       if (ex) {</span>
<a href="#l10.133"></a><span id="l10.133">         ex = ex.clone();</span>
<a href="#l10.134"></a><span id="l10.134">         // track RECURRENCE-IDs in DTSTART's or RDATE's timezone,</span>
<a href="#l10.135"></a><span id="l10.135">         // otherwise those won't match any longer w.r.t DST:</span>
<a href="#l10.136"></a><span id="l10.136">         let rid = ex.recurrenceId;</span>
<a href="#l10.137"></a><span id="l10.137">         let rdate = rdates[getRidKey(rid)];</span>
<a href="#l10.138"></a><span id="l10.138">         rid = rid.getInTimezone(rdate ? rdate.timezone : startTimezone);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/calendar/lightning/content/lightning-item-iframe.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/calendar/lightning/content/lightning-item-iframe.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -1424,17 +1424,17 @@ function getRepeatTypeAndUntilDate(aItem</span>
<a href="#l11.4"></a><span id="l11.4">       } else {</span>
<a href="#l11.5"></a><span id="l11.5">         gUntilDate = null;</span>
<a href="#l11.6"></a><span id="l11.6">       }</span>
<a href="#l11.7"></a><span id="l11.7">     }</span>
<a href="#l11.8"></a><span id="l11.8">   };</span>
<a href="#l11.9"></a><span id="l11.9"> </span>
<a href="#l11.10"></a><span id="l11.10">   if (recurrenceInfo) {</span>
<a href="#l11.11"></a><span id="l11.11">     repeatType = &quot;custom&quot;;</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-    let ritems = recurrenceInfo.getRecurrenceItems({});</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+    let ritems = recurrenceInfo.getRecurrenceItems();</span>
<a href="#l11.14"></a><span id="l11.14">     let rules = [];</span>
<a href="#l11.15"></a><span id="l11.15">     let exceptions = [];</span>
<a href="#l11.16"></a><span id="l11.16">     for (let ritem of ritems) {</span>
<a href="#l11.17"></a><span id="l11.17">       if (ritem.isNegative) {</span>
<a href="#l11.18"></a><span id="l11.18">         exceptions.push(ritem);</span>
<a href="#l11.19"></a><span id="l11.19">       } else {</span>
<a href="#l11.20"></a><span id="l11.20">         rules.push(ritem);</span>
<a href="#l11.21"></a><span id="l11.21">       }</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineat">@@ -2899,17 +2899,17 @@ function updateRepeat(aSuppressDialogs, </span>
<a href="#l11.23"></a><span id="l11.23">           } else {</span>
<a href="#l11.24"></a><span id="l11.24">             repeatDate = &quot;forever&quot;;</span>
<a href="#l11.25"></a><span id="l11.25">           }</span>
<a href="#l11.26"></a><span id="l11.26">         } else {</span>
<a href="#l11.27"></a><span id="l11.27">           // Try to recover the last occurrence in 10(?) years.</span>
<a href="#l11.28"></a><span id="l11.28">           let endDate = gStartTime.clone();</span>
<a href="#l11.29"></a><span id="l11.29">           endDate.year += 10;</span>
<a href="#l11.30"></a><span id="l11.30">           let lastOccurrenceDate = null;</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-          let dates = recurrenceInfo.getOccurrenceDates(gStartTime, endDate, 0, {});</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+          let dates = recurrenceInfo.getOccurrenceDates(gStartTime, endDate, 0);</span>
<a href="#l11.33"></a><span id="l11.33">           if (dates) {</span>
<a href="#l11.34"></a><span id="l11.34">             lastOccurrenceDate = dates[dates.length - 1];</span>
<a href="#l11.35"></a><span id="l11.35">           }</span>
<a href="#l11.36"></a><span id="l11.36">           repeatDate = (lastOccurrenceDate || proposedUntilDate).getInTimezone(cal.dtz.floating);</span>
<a href="#l11.37"></a><span id="l11.37">           repeatDate = cal.dtz.dateTimeToJsDate(repeatDate);</span>
<a href="#l11.38"></a><span id="l11.38">         }</span>
<a href="#l11.39"></a><span id="l11.39">         setElementValue(&quot;repeat-until-datepicker&quot;, repeatDate);</span>
<a href="#l11.40"></a><span id="l11.40">       }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/calendar/lightning/modules/ltnInvitationUtils.jsm</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/calendar/lightning/modules/ltnInvitationUtils.jsm</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -144,17 +144,17 @@ ltn.invitation = {</span>
<a href="#l12.4"></a><span id="l12.4">       let formattedExDates = [];</span>
<a href="#l12.5"></a><span id="l12.5">       let modifiedOccurrences = [];</span>
<a href="#l12.6"></a><span id="l12.6"> </span>
<a href="#l12.7"></a><span id="l12.7">       let dateComptor = function(a, b) {</span>
<a href="#l12.8"></a><span id="l12.8">         return a.startDate.compare(b.startDate);</span>
<a href="#l12.9"></a><span id="l12.9">       };</span>
<a href="#l12.10"></a><span id="l12.10"> </span>
<a href="#l12.11"></a><span id="l12.11">       // Show removed instances</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-      for (let exc of aEvent.recurrenceInfo.getRecurrenceItems({})) {</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+      for (let exc of aEvent.recurrenceInfo.getRecurrenceItems()) {</span>
<a href="#l12.14"></a><span id="l12.14">         if (exc instanceof Ci.calIRecurrenceDate) {</span>
<a href="#l12.15"></a><span id="l12.15">           if (exc.isNegative) {</span>
<a href="#l12.16"></a><span id="l12.16">             // This is an EXDATE</span>
<a href="#l12.17"></a><span id="l12.17">             let excDate = exc.date.getInTimezone(kDefaultTimezone);</span>
<a href="#l12.18"></a><span id="l12.18">             formattedExDates.push(formatter.formatDateTime(excDate));</span>
<a href="#l12.19"></a><span id="l12.19">           } else {</span>
<a href="#l12.20"></a><span id="l12.20">             // This is an RDATE, close enough to a modified occurrence</span>
<a href="#l12.21"></a><span id="l12.21">             let excItem = aEvent.recurrenceInfo.getOccurrenceFor(exc.date);</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineat">@@ -162,17 +162,17 @@ ltn.invitation = {</span>
<a href="#l12.23"></a><span id="l12.23">           }</span>
<a href="#l12.24"></a><span id="l12.24">         }</span>
<a href="#l12.25"></a><span id="l12.25">       }</span>
<a href="#l12.26"></a><span id="l12.26">       if (formattedExDates.length &gt; 0) {</span>
<a href="#l12.27"></a><span id="l12.27">         field(&quot;canceledOccurrences&quot;, formattedExDates.join(&quot;\n&quot;));</span>
<a href="#l12.28"></a><span id="l12.28">       }</span>
<a href="#l12.29"></a><span id="l12.29"> </span>
<a href="#l12.30"></a><span id="l12.30">       // Show modified occurrences</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineminus">-      for (let recurrenceId of aEvent.recurrenceInfo.getExceptionIds({})) {</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineplus">+      for (let recurrenceId of aEvent.recurrenceInfo.getExceptionIds()) {</span>
<a href="#l12.33"></a><span id="l12.33">         let exc = aEvent.recurrenceInfo.getExceptionFor(recurrenceId);</span>
<a href="#l12.34"></a><span id="l12.34">         let excLocation = exc.getProperty(&quot;LOCATION&quot;);</span>
<a href="#l12.35"></a><span id="l12.35"> </span>
<a href="#l12.36"></a><span id="l12.36">         // Only show modified occurrence if start, duration or location</span>
<a href="#l12.37"></a><span id="l12.37">         // has changed.</span>
<a href="#l12.38"></a><span id="l12.38">         exc.QueryInterface(Ci.calIEvent);</span>
<a href="#l12.39"></a><span id="l12.39">         if (</span>
<a href="#l12.40"></a><span id="l12.40">           exc.startDate.compare(exc.recurrenceId) != 0 ||</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/calendar/providers/memory/calMemoryCalendar.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/calendar/providers/memory/calMemoryCalendar.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -493,18 +493,17 @@ calMemoryCalendar.prototype = {</span>
<a href="#l13.4"></a><span id="l13.4"> </span>
<a href="#l13.5"></a><span id="l13.5">           let startDate = aRangeStart;</span>
<a href="#l13.6"></a><span id="l13.6">           if (!aRangeStart &amp;&amp; cal.item.isToDo(item)) {</span>
<a href="#l13.7"></a><span id="l13.7">             startDate = item.entryDate;</span>
<a href="#l13.8"></a><span id="l13.8">           }</span>
<a href="#l13.9"></a><span id="l13.9">           let occurrences = item.recurrenceInfo.getOccurrences(</span>
<a href="#l13.10"></a><span id="l13.10">             startDate,</span>
<a href="#l13.11"></a><span id="l13.11">             aRangeEnd,</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-            aCount ? aCount - itemsFound.length : 0,</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineminus">-            {}</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+            aCount ? aCount - itemsFound.length : 0</span>
<a href="#l13.15"></a><span id="l13.15">           );</span>
<a href="#l13.16"></a><span id="l13.16">           if (wantUnrespondedInvitations) {</span>
<a href="#l13.17"></a><span id="l13.17">             occurrences = occurrences.filter(checkUnrespondedInvitation);</span>
<a href="#l13.18"></a><span id="l13.18">           }</span>
<a href="#l13.19"></a><span id="l13.19">           if (!isEvent_) {</span>
<a href="#l13.20"></a><span id="l13.20">             occurrences = occurrences.filter(checkCompleted);</span>
<a href="#l13.21"></a><span id="l13.21">           }</span>
<a href="#l13.22"></a><span id="l13.22">           itemsFound = itemsFound.concat(occurrences);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -669,17 +669,17 @@ calStorageCalendar.prototype = {</span>
<a href="#l14.4"></a><span id="l14.4">         return 0;</span>
<a href="#l14.5"></a><span id="l14.5">       }</span>
<a href="#l14.6"></a><span id="l14.6"> </span>
<a href="#l14.7"></a><span id="l14.7">       let expandedItems = [];</span>
<a href="#l14.8"></a><span id="l14.8">       if (item.recurrenceInfo &amp;&amp; asOccurrences) {</span>
<a href="#l14.9"></a><span id="l14.9">         // If the item is recurring, get all occurrences that fall in</span>
<a href="#l14.10"></a><span id="l14.10">         // the range. If the item doesn't fall into the range at all,</span>
<a href="#l14.11"></a><span id="l14.11">         // this expands to 0 items.</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-        expandedItems = item.recurrenceInfo.getOccurrences(aRangeStart, aRangeEnd, 0, {});</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+        expandedItems = item.recurrenceInfo.getOccurrences(aRangeStart, aRangeEnd, 0);</span>
<a href="#l14.14"></a><span id="l14.14">         if (wantUnrespondedInvitations) {</span>
<a href="#l14.15"></a><span id="l14.15">           expandedItems = expandedItems.filter(checkUnrespondedInvitation);</span>
<a href="#l14.16"></a><span id="l14.16">         }</span>
<a href="#l14.17"></a><span id="l14.17">       } else if (</span>
<a href="#l14.18"></a><span id="l14.18">         (!wantUnrespondedInvitations || checkUnrespondedInvitation(item)) &amp;&amp;</span>
<a href="#l14.19"></a><span id="l14.19">         cal.item.checkIfInRange(item, aRangeStart, aRangeEnd)</span>
<a href="#l14.20"></a><span id="l14.20">       ) {</span>
<a href="#l14.21"></a><span id="l14.21">         // If no occurrences are wanted, check only the parent item.</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineat">@@ -2345,26 +2345,26 @@ calStorageCalendar.prototype = {</span>
<a href="#l14.23"></a><span id="l14.23">   },</span>
<a href="#l14.24"></a><span id="l14.24"> </span>
<a href="#l14.25"></a><span id="l14.25">   prepareRecurrence: function(stmts, item, olditem) {</span>
<a href="#l14.26"></a><span id="l14.26">     let flags = 0;</span>
<a href="#l14.27"></a><span id="l14.27"> </span>
<a href="#l14.28"></a><span id="l14.28">     let rec = item.recurrenceInfo;</span>
<a href="#l14.29"></a><span id="l14.29">     if (rec) {</span>
<a href="#l14.30"></a><span id="l14.30">       flags = CAL_ITEM_FLAG.HAS_RECURRENCE;</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineminus">-      let ritems = rec.getRecurrenceItems({});</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineplus">+      let ritems = rec.getRecurrenceItems();</span>
<a href="#l14.33"></a><span id="l14.33">       let array = this.prepareAsyncStatement(stmts, this.mInsertRecurrence);</span>
<a href="#l14.34"></a><span id="l14.34">       for (let ritem of ritems) {</span>
<a href="#l14.35"></a><span id="l14.35">         let params = this.prepareAsyncParams(array);</span>
<a href="#l14.36"></a><span id="l14.36">         params.bindByName(&quot;item_id&quot;, item.id);</span>
<a href="#l14.37"></a><span id="l14.37">         params.bindByName(&quot;icalString&quot;, ritem.icalString);</span>
<a href="#l14.38"></a><span id="l14.38">         array.addParams(params);</span>
<a href="#l14.39"></a><span id="l14.39">       }</span>
<a href="#l14.40"></a><span id="l14.40"> </span>
<a href="#l14.41"></a><span id="l14.41" class="difflineminus">-      let exceptions = rec.getExceptionIds({});</span>
<a href="#l14.42"></a><span id="l14.42" class="difflineplus">+      let exceptions = rec.getExceptionIds();</span>
<a href="#l14.43"></a><span id="l14.43">       if (exceptions.length &gt; 0) {</span>
<a href="#l14.44"></a><span id="l14.44">         flags |= CAL_ITEM_FLAG.HAS_EXCEPTIONS;</span>
<a href="#l14.45"></a><span id="l14.45"> </span>
<a href="#l14.46"></a><span id="l14.46">         // we need to serialize each exid as a separate</span>
<a href="#l14.47"></a><span id="l14.47">         // event/todo; setupItemBase will handle</span>
<a href="#l14.48"></a><span id="l14.48">         // writing the recurrenceId for us</span>
<a href="#l14.49"></a><span id="l14.49">         for (let exid of exceptions) {</span>
<a href="#l14.50"></a><span id="l14.50">           let ex = rec.getExceptionFor(exid);</span>
<a href="#l14.51"></a><span id="l14.51" class="difflineat">@@ -2586,17 +2586,17 @@ calStorageCalendar.prototype = {</span>
<a href="#l14.52"></a><span id="l14.52">   _propagateSequence: function(aItem, newSequence) {</span>
<a href="#l14.53"></a><span id="l14.53">     if (newSequence) {</span>
<a href="#l14.54"></a><span id="l14.54">       aItem.setProperty(&quot;SEQUENCE&quot;, newSequence);</span>
<a href="#l14.55"></a><span id="l14.55">     } else {</span>
<a href="#l14.56"></a><span id="l14.56">       aItem.deleteProperty(&quot;SEQUENCE&quot;);</span>
<a href="#l14.57"></a><span id="l14.57">     }</span>
<a href="#l14.58"></a><span id="l14.58">     let rec = aItem.recurrenceInfo;</span>
<a href="#l14.59"></a><span id="l14.59">     if (rec) {</span>
<a href="#l14.60"></a><span id="l14.60" class="difflineminus">-      let exceptions = rec.getExceptionIds({});</span>
<a href="#l14.61"></a><span id="l14.61" class="difflineplus">+      let exceptions = rec.getExceptionIds();</span>
<a href="#l14.62"></a><span id="l14.62">       if (exceptions.length &gt; 0) {</span>
<a href="#l14.63"></a><span id="l14.63">         for (let exid of exceptions) {</span>
<a href="#l14.64"></a><span id="l14.64">           let ex = rec.getExceptionFor(exid);</span>
<a href="#l14.65"></a><span id="l14.65">           if (newSequence) {</span>
<a href="#l14.66"></a><span id="l14.66">             ex.setProperty(&quot;SEQUENCE&quot;, newSequence);</span>
<a href="#l14.67"></a><span id="l14.67">           } else {</span>
<a href="#l14.68"></a><span id="l14.68">             ex.deleteProperty(&quot;SEQUENCE&quot;);</span>
<a href="#l14.69"></a><span id="l14.69">           }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/calendar/test/unit/test_bug343792.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/calendar/test/unit/test_bug343792.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -52,15 +52,15 @@ function really_run_test() {</span>
<a href="#l15.4"></a><span id="l15.4">     &quot;END:VEVENT\n&quot; +</span>
<a href="#l15.5"></a><span id="l15.5">     &quot;END:VCALENDAR&quot;;</span>
<a href="#l15.6"></a><span id="l15.6"> </span>
<a href="#l15.7"></a><span id="l15.7">   let event = createEventFromIcalString(icalString);</span>
<a href="#l15.8"></a><span id="l15.8">   let start = createDate(2009, 4, 1);</span>
<a href="#l15.9"></a><span id="l15.9">   let end = createDate(2009, 4, 30);</span>
<a href="#l15.10"></a><span id="l15.10"> </span>
<a href="#l15.11"></a><span id="l15.11">   // the following call caused a never ending loop:</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-  let occurrenceDates = event.recurrenceInfo.getOccurrenceDates(start, end, 0, {});</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+  let occurrenceDates = event.recurrenceInfo.getOccurrenceDates(start, end, 0);</span>
<a href="#l15.14"></a><span id="l15.14">   equal(occurrenceDates.length, 4);</span>
<a href="#l15.15"></a><span id="l15.15"> </span>
<a href="#l15.16"></a><span id="l15.16">   // the following call caused a never ending loop:</span>
<a href="#l15.17"></a><span id="l15.17" class="difflineminus">-  let occurrences = event.recurrenceInfo.getOccurrences(start, end, 0, {});</span>
<a href="#l15.18"></a><span id="l15.18" class="difflineplus">+  let occurrences = event.recurrenceInfo.getOccurrences(start, end, 0);</span>
<a href="#l15.19"></a><span id="l15.19">   equal(occurrences.length, 4);</span>
<a href="#l15.20"></a><span id="l15.20"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/calendar/test/unit/test_bug356207.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/calendar/test/unit/test_bug356207.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -33,15 +33,15 @@ function really_run_test() {</span>
<a href="#l16.4"></a><span id="l16.4">     &quot;END:VEVENT\n&quot; +</span>
<a href="#l16.5"></a><span id="l16.5">     &quot;END:VCALENDAR&quot;;</span>
<a href="#l16.6"></a><span id="l16.6"> </span>
<a href="#l16.7"></a><span id="l16.7">   let event = createEventFromIcalString(icalString);</span>
<a href="#l16.8"></a><span id="l16.8">   let start = createDate(2009, 0, 1);</span>
<a href="#l16.9"></a><span id="l16.9">   let end = createDate(2009, 11, 31);</span>
<a href="#l16.10"></a><span id="l16.10"> </span>
<a href="#l16.11"></a><span id="l16.11">   // the following call caused a never ending loop:</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-  let occurrenceDates = event.recurrenceInfo.getOccurrenceDates(start, end, 0, {});</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+  let occurrenceDates = event.recurrenceInfo.getOccurrenceDates(start, end, 0);</span>
<a href="#l16.14"></a><span id="l16.14">   equal(occurrenceDates.length, 2);</span>
<a href="#l16.15"></a><span id="l16.15"> </span>
<a href="#l16.16"></a><span id="l16.16">   // the following call caused a never ending loop:</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineminus">-  let occurrences = event.recurrenceInfo.getOccurrences(start, end, 0, {});</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineplus">+  let occurrences = event.recurrenceInfo.getOccurrences(start, end, 0);</span>
<a href="#l16.19"></a><span id="l16.19">   equal(occurrences.length, 2);</span>
<a href="#l16.20"></a><span id="l16.20"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/calendar/test/unit/test_ics_parser.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/calendar/test/unit/test_ics_parser.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -87,17 +87,17 @@ function test_fake_parent() {</span>
<a href="#l17.4"></a><span id="l17.4">   equal(item.id, &quot;123&quot;);</span>
<a href="#l17.5"></a><span id="l17.5">   ok(!!item.recurrenceInfo);</span>
<a href="#l17.6"></a><span id="l17.6">   equal(item.startDate.icalString, &quot;20120101T010101&quot;);</span>
<a href="#l17.7"></a><span id="l17.7">   equal(item.getProperty(&quot;X-MOZ-FAKED-MASTER&quot;), &quot;1&quot;);</span>
<a href="#l17.8"></a><span id="l17.8"> </span>
<a href="#l17.9"></a><span id="l17.9">   let rinfo = item.recurrenceInfo;</span>
<a href="#l17.10"></a><span id="l17.10"> </span>
<a href="#l17.11"></a><span id="l17.11">   equal(rinfo.countRecurrenceItems(), 1);</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-  let excs = rinfo.getOccurrences(cal.createDateTime(&quot;20120101T010101&quot;), null, 0, {});</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+  let excs = rinfo.getOccurrences(cal.createDateTime(&quot;20120101T010101&quot;), null, 0);</span>
<a href="#l17.14"></a><span id="l17.14">   equal(excs.length, 1);</span>
<a href="#l17.15"></a><span id="l17.15">   let exc = excs[0].QueryInterface(Ci.calIEvent);</span>
<a href="#l17.16"></a><span id="l17.16">   equal(exc.startDate.icalString, &quot;20120101T010102&quot;);</span>
<a href="#l17.17"></a><span id="l17.17"> </span>
<a href="#l17.18"></a><span id="l17.18">   equal(parser.getParentlessItems()[0], exc);</span>
<a href="#l17.19"></a><span id="l17.19"> }</span>
<a href="#l17.20"></a><span id="l17.20"> </span>
<a href="#l17.21"></a><span id="l17.21"> function test_async() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/calendar/test/unit/test_recur.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/calendar/test/unit/test_recur.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -27,18 +27,18 @@ function test_rules() {</span>
<a href="#l18.4"></a><span id="l18.4">     dump(&quot;Checking '&quot; + event.getProperty(&quot;DESCRIPTION&quot;) + &quot;'\n&quot;);</span>
<a href="#l18.5"></a><span id="l18.5"> </span>
<a href="#l18.6"></a><span id="l18.6">     // Immutability is required for testing the recurrenceEndDate property.</span>
<a href="#l18.7"></a><span id="l18.7">     event.makeImmutable();</span>
<a href="#l18.8"></a><span id="l18.8"> </span>
<a href="#l18.9"></a><span id="l18.9">     // Get recurrence dates</span>
<a href="#l18.10"></a><span id="l18.10">     let start = createDate(1990, 0, 1);</span>
<a href="#l18.11"></a><span id="l18.11">     let end = createDate(2020, 0, 1);</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-    let recdates = event.recurrenceInfo.getOccurrenceDates(start, end, 0, {});</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineminus">-    let occurrences = event.recurrenceInfo.getOccurrences(start, end, 0, {});</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineplus">+    let recdates = event.recurrenceInfo.getOccurrenceDates(start, end, 0);</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineplus">+    let occurrences = event.recurrenceInfo.getOccurrences(start, end, 0);</span>
<a href="#l18.16"></a><span id="l18.16"> </span>
<a href="#l18.17"></a><span id="l18.17">     // Check number of items</span>
<a href="#l18.18"></a><span id="l18.18">     dump(&quot;Expected &quot; + expected.length + &quot; occurrences\n&quot;);</span>
<a href="#l18.19"></a><span id="l18.19">     dump(&quot;Got: &quot; + recdates.map(x =&gt; x.toString()) + &quot;\n&quot;);</span>
<a href="#l18.20"></a><span id="l18.20">     equal(recdates.length, expected.length);</span>
<a href="#l18.21"></a><span id="l18.21">     let fmt = cal.getDateFormatter();</span>
<a href="#l18.22"></a><span id="l18.22"> </span>
<a href="#l18.23"></a><span id="l18.23">     for (let i = 0; i &lt; expected.length; i++) {</span>
<a href="#l18.24"></a><span id="l18.24" class="difflineat">@@ -785,39 +785,39 @@ function test_limit() {</span>
<a href="#l18.25"></a><span id="l18.25">       &quot;UID:1\n&quot; +</span>
<a href="#l18.26"></a><span id="l18.26">       &quot;DTSTART:20020401T114500\n&quot; +</span>
<a href="#l18.27"></a><span id="l18.27">       &quot;DTEND:20020401T124500\n&quot;</span>
<a href="#l18.28"></a><span id="l18.28">   );</span>
<a href="#l18.29"></a><span id="l18.29">   dump(&quot;ics: &quot; + item.icalString + &quot;\n&quot;);</span>
<a href="#l18.30"></a><span id="l18.30"> </span>
<a href="#l18.31"></a><span id="l18.31">   let start = createDate(1990, 0, 1);</span>
<a href="#l18.32"></a><span id="l18.32">   let end = createDate(2020, 0, 1);</span>
<a href="#l18.33"></a><span id="l18.33" class="difflineminus">-  let recdates = item.recurrenceInfo.getOccurrenceDates(start, end, 0, {});</span>
<a href="#l18.34"></a><span id="l18.34" class="difflineminus">-  let occurrences = item.recurrenceInfo.getOccurrences(start, end, 0, {});</span>
<a href="#l18.35"></a><span id="l18.35" class="difflineplus">+  let recdates = item.recurrenceInfo.getOccurrenceDates(start, end, 0);</span>
<a href="#l18.36"></a><span id="l18.36" class="difflineplus">+  let occurrences = item.recurrenceInfo.getOccurrences(start, end, 0);</span>
<a href="#l18.37"></a><span id="l18.37"> </span>
<a href="#l18.38"></a><span id="l18.38">   equal(recdates.length, 3);</span>
<a href="#l18.39"></a><span id="l18.39">   equal(occurrences.length, 3);</span>
<a href="#l18.40"></a><span id="l18.40"> </span>
<a href="#l18.41"></a><span id="l18.41" class="difflineminus">-  recdates = item.recurrenceInfo.getOccurrenceDates(start, end, 2, {});</span>
<a href="#l18.42"></a><span id="l18.42" class="difflineminus">-  occurrences = item.recurrenceInfo.getOccurrences(start, end, 2, {});</span>
<a href="#l18.43"></a><span id="l18.43" class="difflineplus">+  recdates = item.recurrenceInfo.getOccurrenceDates(start, end, 2);</span>
<a href="#l18.44"></a><span id="l18.44" class="difflineplus">+  occurrences = item.recurrenceInfo.getOccurrences(start, end, 2);</span>
<a href="#l18.45"></a><span id="l18.45"> </span>
<a href="#l18.46"></a><span id="l18.46">   equal(recdates.length, 2);</span>
<a href="#l18.47"></a><span id="l18.47">   equal(occurrences.length, 2);</span>
<a href="#l18.48"></a><span id="l18.48"> </span>
<a href="#l18.49"></a><span id="l18.49" class="difflineminus">-  recdates = item.recurrenceInfo.getOccurrenceDates(start, end, 9, {});</span>
<a href="#l18.50"></a><span id="l18.50" class="difflineminus">-  occurrences = item.recurrenceInfo.getOccurrences(start, end, 9, {});</span>
<a href="#l18.51"></a><span id="l18.51" class="difflineplus">+  recdates = item.recurrenceInfo.getOccurrenceDates(start, end, 9);</span>
<a href="#l18.52"></a><span id="l18.52" class="difflineplus">+  occurrences = item.recurrenceInfo.getOccurrences(start, end, 9);</span>
<a href="#l18.53"></a><span id="l18.53"> </span>
<a href="#l18.54"></a><span id="l18.54">   equal(recdates.length, 3);</span>
<a href="#l18.55"></a><span id="l18.55">   equal(occurrences.length, 3);</span>
<a href="#l18.56"></a><span id="l18.56"> }</span>
<a href="#l18.57"></a><span id="l18.57"> </span>
<a href="#l18.58"></a><span id="l18.58"> function test_clone(event) {</span>
<a href="#l18.59"></a><span id="l18.59" class="difflineminus">-  let oldRecurItems = event.recurrenceInfo.getRecurrenceItems({});</span>
<a href="#l18.60"></a><span id="l18.60" class="difflineplus">+  let oldRecurItems = event.recurrenceInfo.getRecurrenceItems();</span>
<a href="#l18.61"></a><span id="l18.61">   let cloned = event.recurrenceInfo.clone();</span>
<a href="#l18.62"></a><span id="l18.62" class="difflineminus">-  let newRecurItems = cloned.getRecurrenceItems({});</span>
<a href="#l18.63"></a><span id="l18.63" class="difflineplus">+  let newRecurItems = cloned.getRecurrenceItems();</span>
<a href="#l18.64"></a><span id="l18.64"> </span>
<a href="#l18.65"></a><span id="l18.65">   // Check number of recurrence items</span>
<a href="#l18.66"></a><span id="l18.66">   equal(oldRecurItems.length, newRecurItems.length);</span>
<a href="#l18.67"></a><span id="l18.67"> </span>
<a href="#l18.68"></a><span id="l18.68">   for (let i = 0; i &lt; oldRecurItems.length; i++) {</span>
<a href="#l18.69"></a><span id="l18.69">     // Check if recurrence item cloned correctly</span>
<a href="#l18.70"></a><span id="l18.70">     equal(oldRecurItems[i].icalProperty.icalString, newRecurItems[i].icalProperty.icalString);</span>
<a href="#l18.71"></a><span id="l18.71">   }</span>
<a href="#l18.72"></a><span id="l18.72" class="difflineat">@@ -831,17 +831,17 @@ function test_interface() {</span>
<a href="#l18.73"></a><span id="l18.73">       &quot;EXDATE:20020403T114500Z\r\n&quot; +</span>
<a href="#l18.74"></a><span id="l18.74">       &quot;RDATE:20020401T114500Z\r\n&quot;</span>
<a href="#l18.75"></a><span id="l18.75">   );</span>
<a href="#l18.76"></a><span id="l18.76"> </span>
<a href="#l18.77"></a><span id="l18.77">   let rinfo = item.recurrenceInfo;</span>
<a href="#l18.78"></a><span id="l18.78">   ok(cal.data.compareObjects(rinfo.item, item, Ci.calIEvent));</span>
<a href="#l18.79"></a><span id="l18.79"> </span>
<a href="#l18.80"></a><span id="l18.80">   // getRecurrenceItems</span>
<a href="#l18.81"></a><span id="l18.81" class="difflineminus">-  let ritems = rinfo.getRecurrenceItems({});</span>
<a href="#l18.82"></a><span id="l18.82" class="difflineplus">+  let ritems = rinfo.getRecurrenceItems();</span>
<a href="#l18.83"></a><span id="l18.83">   equal(ritems.length, 3);</span>
<a href="#l18.84"></a><span id="l18.84"> </span>
<a href="#l18.85"></a><span id="l18.85">   let checkritems = new Map(</span>
<a href="#l18.86"></a><span id="l18.86">     ritems.map(ritem =&gt; [ritem.icalProperty.propertyName, ritem.icalProperty])</span>
<a href="#l18.87"></a><span id="l18.87">   );</span>
<a href="#l18.88"></a><span id="l18.88">   let rparts = new Map(</span>
<a href="#l18.89"></a><span id="l18.89">     checkritems</span>
<a href="#l18.90"></a><span id="l18.90">       .get(&quot;RRULE&quot;)</span>
<a href="#l18.91"></a><span id="l18.91" class="difflineat">@@ -859,17 +859,17 @@ function test_interface() {</span>
<a href="#l18.92"></a><span id="l18.92">   let newRItems = [cal.createRecurrenceRule(), cal.createRecurrenceDate()];</span>
<a href="#l18.93"></a><span id="l18.93"> </span>
<a href="#l18.94"></a><span id="l18.94">   newRItems[0].type = &quot;DAILY&quot;;</span>
<a href="#l18.95"></a><span id="l18.95">   newRItems[0].interval = 1;</span>
<a href="#l18.96"></a><span id="l18.96">   newRItems[0].count = 1;</span>
<a href="#l18.97"></a><span id="l18.97">   newRItems[1].isNegative = true;</span>
<a href="#l18.98"></a><span id="l18.98">   newRItems[1].date = cal.createDateTime(&quot;20020404T114500Z&quot;);</span>
<a href="#l18.99"></a><span id="l18.99"> </span>
<a href="#l18.100"></a><span id="l18.100" class="difflineminus">-  rinfo.setRecurrenceItems(2, newRItems);</span>
<a href="#l18.101"></a><span id="l18.101" class="difflineplus">+  rinfo.setRecurrenceItems(newRItems);</span>
<a href="#l18.102"></a><span id="l18.102">   let itemString = item.icalString;</span>
<a href="#l18.103"></a><span id="l18.103"> </span>
<a href="#l18.104"></a><span id="l18.104">   equal(itemString.match(/RRULE:[A-Z=,]*FREQ=WEEKLY/), null);</span>
<a href="#l18.105"></a><span id="l18.105">   equal(itemString.match(/EXDATE[A-Z;=-]*:20020403T114500Z/, null));</span>
<a href="#l18.106"></a><span id="l18.106">   equal(itemString.match(/RDATE[A-Z;=-]*:20020401T114500Z/, null));</span>
<a href="#l18.107"></a><span id="l18.107">   notEqual(itemString.match(/RRULE:[A-Z=,]*FREQ=DAILY/), null);</span>
<a href="#l18.108"></a><span id="l18.108">   notEqual(itemString.match(/EXDATE[A-Z;=-]*:20020404T114500Z/, null));</span>
<a href="#l18.109"></a><span id="l18.109"> </span>
<a href="#l18.110"></a><span id="l18.110" class="difflineat">@@ -944,25 +944,25 @@ function test_interface() {</span>
<a href="#l18.111"></a><span id="l18.111"> </span>
<a href="#l18.112"></a><span id="l18.112">   // modifyException immutable</span>
<a href="#l18.113"></a><span id="l18.113">   let occ2 = rinfo.getOccurrenceFor(occDate2);</span>
<a href="#l18.114"></a><span id="l18.114">   occ2.makeImmutable();</span>
<a href="#l18.115"></a><span id="l18.115">   rinfo.modifyException(occ2, true);</span>
<a href="#l18.116"></a><span id="l18.116">   ok(rinfo.getExceptionFor(occDate2) != null);</span>
<a href="#l18.117"></a><span id="l18.117"> </span>
<a href="#l18.118"></a><span id="l18.118">   // getExceptionIds</span>
<a href="#l18.119"></a><span id="l18.119" class="difflineminus">-  let ids = rinfo.getExceptionIds({});</span>
<a href="#l18.120"></a><span id="l18.120" class="difflineplus">+  let ids = rinfo.getExceptionIds();</span>
<a href="#l18.121"></a><span id="l18.121">   equal(ids.length, 2);</span>
<a href="#l18.122"></a><span id="l18.122">   ok(ids[0].compare(occDate1) == 0);</span>
<a href="#l18.123"></a><span id="l18.123">   ok(ids[1].compare(occDate2) == 0);</span>
<a href="#l18.124"></a><span id="l18.124"> </span>
<a href="#l18.125"></a><span id="l18.125">   // removeExceptionFor</span>
<a href="#l18.126"></a><span id="l18.126">   rinfo.removeExceptionFor(occDate1);</span>
<a href="#l18.127"></a><span id="l18.127">   ok(rinfo.getExceptionFor(occDate1) == null);</span>
<a href="#l18.128"></a><span id="l18.128" class="difflineminus">-  equal(rinfo.getExceptionIds({}).length, 1);</span>
<a href="#l18.129"></a><span id="l18.129" class="difflineplus">+  equal(rinfo.getExceptionIds().length, 1);</span>
<a href="#l18.130"></a><span id="l18.130"> }</span>
<a href="#l18.131"></a><span id="l18.131"> </span>
<a href="#l18.132"></a><span id="l18.132"> function test_rrule_interface() {</span>
<a href="#l18.133"></a><span id="l18.133">   let item = makeEvent(</span>
<a href="#l18.134"></a><span id="l18.134">     &quot;DTSTART:20020402T114500Z\r\n&quot; +</span>
<a href="#l18.135"></a><span id="l18.135">       &quot;DTEND:20020402T124500Z\r\n&quot; +</span>
<a href="#l18.136"></a><span id="l18.136">       &quot;RRULE:INTERVAL=2;FREQ=WEEKLY;COUNT=6;BYDAY=TU,WE\r\n&quot;</span>
<a href="#l18.137"></a><span id="l18.137">   );</span>
<a href="#l18.138"></a><span id="l18.138" class="difflineat">@@ -1136,18 +1136,17 @@ function test_failures() {</span>
<a href="#l18.139"></a><span id="l18.139">       &quot;END:VTODO\r\n&quot; +</span>
<a href="#l18.140"></a><span id="l18.140">       &quot;END:VCALENDAR\r\n&quot;</span>
<a href="#l18.141"></a><span id="l18.141">   );</span>
<a href="#l18.142"></a><span id="l18.142">   rinfo = item.recurrenceInfo;</span>
<a href="#l18.143"></a><span id="l18.143">   equal(</span>
<a href="#l18.144"></a><span id="l18.144">     rinfo.getOccurrenceDates(</span>
<a href="#l18.145"></a><span id="l18.145">       cal.createDateTime(&quot;20120101T010101&quot;),</span>
<a href="#l18.146"></a><span id="l18.146">       cal.createDateTime(&quot;20120203T010101&quot;),</span>
<a href="#l18.147"></a><span id="l18.147" class="difflineminus">-      0,</span>
<a href="#l18.148"></a><span id="l18.148" class="difflineminus">-      {}</span>
<a href="#l18.149"></a><span id="l18.149" class="difflineplus">+      0</span>
<a href="#l18.150"></a><span id="l18.150">     ).length,</span>
<a href="#l18.151"></a><span id="l18.151">     0</span>
<a href="#l18.152"></a><span id="l18.152">   );</span>
<a href="#l18.153"></a><span id="l18.153"> }</span>
<a href="#l18.154"></a><span id="l18.154"> </span>
<a href="#l18.155"></a><span id="l18.155"> function test_immutable() {</span>
<a href="#l18.156"></a><span id="l18.156">   let item = createTodoFromIcalString(</span>
<a href="#l18.157"></a><span id="l18.157">     &quot;BEGIN:VCALENDAR\r\n&quot; +</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/calendar/test/unit/test_storage.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/calendar/test/unit/test_storage.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -70,17 +70,17 @@ add_task(async () =&gt; {</span>
<a href="#l19.4"></a><span id="l19.4">         let relations = item.getRelations();</span>
<a href="#l19.5"></a><span id="l19.5">         let rel = relations[0];</span>
<a href="#l19.6"></a><span id="l19.6">         equal(relations.length, 1);</span>
<a href="#l19.7"></a><span id="l19.7">         equal(rel.relType, &quot;SIBLING&quot;);</span>
<a href="#l19.8"></a><span id="l19.8">         equal(rel.relId, &quot;VALUE&quot;);</span>
<a href="#l19.9"></a><span id="l19.9">         equal(rel.getParameter(&quot;FOO&quot;), &quot;BAR&quot;);</span>
<a href="#l19.10"></a><span id="l19.10"> </span>
<a href="#l19.11"></a><span id="l19.11">         // Check recurrence item</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-        for (let ritem of item.recurrenceInfo.getRecurrenceItems({})) {</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+        for (let ritem of item.recurrenceInfo.getRecurrenceItems()) {</span>
<a href="#l19.14"></a><span id="l19.14">           if (ritem instanceof Ci.calIRecurrenceRule) {</span>
<a href="#l19.15"></a><span id="l19.15">             equal(ritem.type, &quot;MONTHLY&quot;);</span>
<a href="#l19.16"></a><span id="l19.16">             equal(ritem.interval, 2);</span>
<a href="#l19.17"></a><span id="l19.17">             equal(ritem.count, 5);</span>
<a href="#l19.18"></a><span id="l19.18">             equal(ritem.isByCount, true);</span>
<a href="#l19.19"></a><span id="l19.19">             equal(ritem.getComponent(&quot;BYDAY&quot;).toString(), [2].toString());</span>
<a href="#l19.20"></a><span id="l19.20">             equal(ritem.isNegative, false);</span>
<a href="#l19.21"></a><span id="l19.21">           } else if (ritem instanceof Ci.calIRecurrenceDate) {</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:33Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

