<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 20028:7b2fedd2dee96487ec5dde6c89617429e3737dc6</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 7b2fedd2dee96487ec5dde6c89617429e3737dc6" />
<meta property="og:url" content="/comm-central/rev/7b2fedd2dee96487ec5dde6c89617429e3737dc6" />
<meta property="og:description" content="Bug 1280898 - Set up eslint for calendar files - enable spaced-comment rule. r?MakeMyDay" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 7b2fedd2dee96487ec5dde6c89617429e3737dc6 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/7b2fedd2dee96487ec5dde6c89617429e3737dc6">shortlog</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/7b2fedd2dee96487ec5dde6c89617429e3737dc6">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6">files</a> |
changeset |
<a href="/comm-central/raw-rev/7b2fedd2dee96487ec5dde6c89617429e3737dc6">raw</a>  | <a href="/comm-central/archive/7b2fedd2dee96487ec5dde6c89617429e3737dc6.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">Bug 1280898</a> - Set up eslint for calendar files - enable spaced-comment rule. r?MakeMyDay
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#101;&#115;&#108;&#105;&#110;&#116;&#32;&#60;&#101;&#115;&#108;&#105;&#110;&#116;&#64;&#98;&#117;&#103;&#122;&#105;&#108;&#108;&#97;&#46;&#107;&#101;&#119;&#105;&#115;&#46;&#99;&#104;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 08 Jul 2016 11:18:57 +0200</td></tr>

<tr>
 <td>changeset 20028</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/7b2fedd2dee96487ec5dde6c89617429e3737dc6">7b2fedd2dee96487ec5dde6c89617429e3737dc6</a></td>
</tr>



<tr>
<td>parent 20027</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/239f769da6b375beb31a149046382429f59af6ae">239f769da6b375beb31a149046382429f59af6ae</a>
</td>
</tr>

<tr>
<td>child 20029</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/d4ec82bf6586d090cd8a7e43ac7ade112ee732f4">d4ec82bf6586d090cd8a7e43ac7ade112ee732f4</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=7b2fedd2dee96487ec5dde6c89617429e3737dc6">12290</a></td></tr>
<tr><td>push user</td><td>mozilla@kewis.ch</td></tr>
<tr><td>push date</td><td class="date age">Thu, 15 Sep 2016 23:14:46 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@caff8e7186a8 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=caff8e7186a8de640cb022a1f37566a5dcf11a6c">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=caff8e7186a8de640cb022a1f37566a5dcf11a6c&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=caff8e7186a8de640cb022a1f37566a5dcf11a6c&newProject=comm-central&newRevision=7b2fedd2dee96487ec5dde6c89617429e3737dc6&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=caff8e7186a8de640cb022a1f37566a5dcf11a6c&newProject=comm-central&newRevision=7b2fedd2dee96487ec5dde6c89617429e3737dc6&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=caff8e7186a8de640cb022a1f37566a5dcf11a6c&newProject=comm-central&newRevision=7b2fedd2dee96487ec5dde6c89617429e3737dc6&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28MakeMyDay%29&revcount=50">MakeMyDay</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">1280898</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">Bug 1280898</a> - Set up eslint for calendar files - enable spaced-comment rule. r?MakeMyDay

MozReview-Commit-ID: 3RNMzhvfNtO</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/.eslintrc">calendar/.eslintrc</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/.eslintrc">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/.eslintrc">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/.eslintrc">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/.eslintrc">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/.eslintrc">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-base-view.xml">calendar/base/content/calendar-base-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-base-view.xml">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-base-view.xml">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-base-view.xml">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-base-view.xml">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-base-view.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-item-bindings.xml">calendar/base/content/calendar-item-bindings.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-item-bindings.xml">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-item-bindings.xml">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-item-bindings.xml">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-item-bindings.xml">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-item-bindings.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-multiday-view.xml">calendar/base/content/calendar-multiday-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-multiday-view.xml">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-multiday-view.xml">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-multiday-view.xml">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-multiday-view.xml">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-multiday-view.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-task-tree.xml">calendar/base/content/calendar-task-tree.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-task-tree.xml">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-task-tree.xml">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-task-tree.xml">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-task-tree.xml">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-task-tree.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-unifinder.js">calendar/base/content/calendar-unifinder.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-unifinder.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-unifinder.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-unifinder.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-unifinder.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/calendar-unifinder.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml">calendar/base/content/dialogs/calendar-event-dialog-attendees.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/dialogs/calendar-print-dialog.js">calendar/base/content/dialogs/calendar-print-dialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/dialogs/calendar-print-dialog.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/dialogs/calendar-print-dialog.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/dialogs/calendar-print-dialog.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/dialogs/calendar-print-dialog.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/dialogs/calendar-print-dialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/widgets/calendar-widgets.xml">calendar/base/content/widgets/calendar-widgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/widgets/calendar-widgets.xml">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/widgets/calendar-widgets.xml">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/widgets/calendar-widgets.xml">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/widgets/calendar-widgets.xml">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/content/widgets/calendar-widgets.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/modules/calRecurrenceUtils.jsm">calendar/base/modules/calRecurrenceUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/modules/calRecurrenceUtils.jsm">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/modules/calRecurrenceUtils.jsm">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/modules/calRecurrenceUtils.jsm">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/modules/calRecurrenceUtils.jsm">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/modules/calRecurrenceUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calCachedCalendar.js">calendar/base/src/calCachedCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calCachedCalendar.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calCachedCalendar.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calCachedCalendar.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calCachedCalendar.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calCachedCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calCalendarManager.js">calendar/base/src/calCalendarManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calCalendarManager.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calCalendarManager.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calCalendarManager.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calCalendarManager.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calCalendarManager.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calFilter.js">calendar/base/src/calFilter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calFilter.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calFilter.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calFilter.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calFilter.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calFilter.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calIcsParser.js">calendar/base/src/calIcsParser.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calIcsParser.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calIcsParser.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calIcsParser.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calIcsParser.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calIcsParser.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calItemBase.js">calendar/base/src/calItemBase.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calItemBase.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calItemBase.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calItemBase.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calItemBase.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calItemBase.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calTimezoneService.js">calendar/base/src/calTimezoneService.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calTimezoneService.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calTimezoneService.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calTimezoneService.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calTimezoneService.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calTimezoneService.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calUtils.js">calendar/base/src/calUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calUtils.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calUtils.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calUtils.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calUtils.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/base/src/calUtils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/import-export/calOutlookCSVImportExport.js">calendar/import-export/calOutlookCSVImportExport.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/import-export/calOutlookCSVImportExport.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/import-export/calOutlookCSVImportExport.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/import-export/calOutlookCSVImportExport.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/import-export/calOutlookCSVImportExport.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/import-export/calOutlookCSVImportExport.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/ics/calICSCalendar.js">calendar/providers/ics/calICSCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/ics/calICSCalendar.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/ics/calICSCalendar.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/ics/calICSCalendar.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/ics/calICSCalendar.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/ics/calICSCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/memory/calMemoryCalendar.js">calendar/providers/memory/calMemoryCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/memory/calMemoryCalendar.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/memory/calMemoryCalendar.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/memory/calMemoryCalendar.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/memory/calMemoryCalendar.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/memory/calMemoryCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/storage/calStorageCalendar.js">calendar/providers/storage/calStorageCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/storage/calStorageCalendar.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/storage/calStorageCalendar.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/storage/calStorageCalendar.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/storage/calStorageCalendar.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/storage/calStorageCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/storage/calStorageUpgrade.jsm">calendar/providers/storage/calStorageUpgrade.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/storage/calStorageUpgrade.jsm">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/storage/calStorageUpgrade.jsm">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/storage/calStorageUpgrade.jsm">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/storage/calStorageUpgrade.jsm">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/storage/calStorageUpgrade.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/wcap/calWcapCalendar.js">calendar/providers/wcap/calWcapCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/wcap/calWcapCalendar.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/wcap/calWcapCalendar.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/wcap/calWcapCalendar.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/wcap/calWcapCalendar.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/wcap/calWcapCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/wcap/calWcapErrors.js">calendar/providers/wcap/calWcapErrors.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/wcap/calWcapErrors.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/wcap/calWcapErrors.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/wcap/calWcapErrors.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/wcap/calWcapErrors.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/providers/wcap/calWcapErrors.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/resources/content/datetimepickers/datetimepickers.xml">calendar/resources/content/datetimepickers/datetimepickers.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/resources/content/datetimepickers/datetimepickers.xml">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/resources/content/datetimepickers/datetimepickers.xml">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/resources/content/datetimepickers/datetimepickers.xml">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/resources/content/datetimepickers/datetimepickers.xml">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/resources/content/datetimepickers/datetimepickers.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/resources/content/publishDialog.js">calendar/resources/content/publishDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/resources/content/publishDialog.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/resources/content/publishDialog.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/resources/content/publishDialog.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/resources/content/publishDialog.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/resources/content/publishDialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/unit/test_items.js">calendar/test/unit/test_items.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/unit/test_items.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/unit/test_items.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/unit/test_items.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/unit/test_items.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/unit/test_items.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/unit/test_recur.js">calendar/test/unit/test_recur.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/unit/test_recur.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/unit/test_recur.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/unit/test_recur.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/unit/test_recur.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/unit/test_recur.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/unit/test_timezone_definition.js">calendar/test/unit/test_timezone_definition.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/unit/test_timezone_definition.js">file</a> |
<a href="/comm-central/annotate/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/unit/test_timezone_definition.js">annotate</a> |
<a href="/comm-central/diff/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/unit/test_timezone_definition.js">diff</a> |
<a href="/comm-central/comparison/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/unit/test_timezone_definition.js">comparison</a> |
<a href="/comm-central/log/7b2fedd2dee96487ec5dde6c89617429e3737dc6/calendar/test/unit/test_timezone_definition.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/.eslintrc</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/.eslintrc</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -116,16 +116,19 @@</span>
<a href="#l1.4"></a><span id="l1.4">     &quot;no-octal-escape&quot;: 2,</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6">     // disallow use of void operator</span>
<a href="#l1.7"></a><span id="l1.7">     &quot;no-void&quot;: 2,</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9">     // Disallow Yoda conditions (where literal value comes first).</span>
<a href="#l1.10"></a><span id="l1.10">     &quot;yoda&quot;: 2,</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+    // Require a space immediately following the // in a line comment.</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    &quot;spaced-comment&quot;: [2, &quot;always&quot;],</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+</span>
<a href="#l1.15"></a><span id="l1.15">     // Will enable these rules later</span>
<a href="#l1.16"></a><span id="l1.16">     &quot;keyword-spacing&quot;: 0,</span>
<a href="#l1.17"></a><span id="l1.17">     &quot;block-spacing&quot;: 0,</span>
<a href="#l1.18"></a><span id="l1.18">     &quot;no-lonely-if&quot;: 0,</span>
<a href="#l1.19"></a><span id="l1.19">     &quot;space-before-blocks&quot;: 0,</span>
<a href="#l1.20"></a><span id="l1.20">     &quot;computed-property-spacing&quot;: 0,</span>
<a href="#l1.21"></a><span id="l1.21">     &quot;consistent-return&quot;: 0,</span>
<a href="#l1.22"></a><span id="l1.22">     &quot;no-redeclare&quot;: 0,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/content/calendar-base-view.xml</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/content/calendar-base-view.xml</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -637,17 +637,17 @@</span>
<a href="#l2.4"></a><span id="l2.4">                case &quot;calendar.week.d6saturdaysoff&quot;:</span>
<a href="#l2.5"></a><span id="l2.5">                    this.updateDaysOffPrefs();</span>
<a href="#l2.6"></a><span id="l2.6">                    break;</span>
<a href="#l2.7"></a><span id="l2.7">                case &quot;calendar.timezone.local&quot;:</span>
<a href="#l2.8"></a><span id="l2.8">                    this.timezone = calendarDefaultTimezone();</span>
<a href="#l2.9"></a><span id="l2.9">                    this.refreshView();</span>
<a href="#l2.10"></a><span id="l2.10">                    break;</span>
<a href="#l2.11"></a><span id="l2.11">                case &quot;calendar.alarms.indicator.show&quot;:</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-                   //Break here to ensure the view is refreshed</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+                   // Break here to ensure the view is refreshed</span>
<a href="#l2.14"></a><span id="l2.14">                    break;</span>
<a href="#l2.15"></a><span id="l2.15">                case &quot;calendar.week.start&quot;:</span>
<a href="#l2.16"></a><span id="l2.16">                    this.weekStartOffset = aSubject.getIntPref(aPreference);</span>
<a href="#l2.17"></a><span id="l2.17">                    break;</span>
<a href="#l2.18"></a><span id="l2.18">                case &quot;calendar.date.format&quot;:</span>
<a href="#l2.19"></a><span id="l2.19">                    this.refreshView();</span>
<a href="#l2.20"></a><span id="l2.20">                    break;</span>
<a href="#l2.21"></a><span id="l2.21">                default:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/content/calendar-item-bindings.xml</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/content/calendar-item-bindings.xml</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -46,17 +46,16 @@</span>
<a href="#l3.4"></a><span id="l3.4">         ]]&gt;&lt;/getter&gt;</span>
<a href="#l3.5"></a><span id="l3.5">         &lt;setter&gt;&lt;![CDATA[</span>
<a href="#l3.6"></a><span id="l3.6">           this.mItem = val;</span>
<a href="#l3.7"></a><span id="l3.7">           let headerLabel = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;item-datetime-label&quot;);</span>
<a href="#l3.8"></a><span id="l3.8">           let itemDateTimeLabel = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;item-datetime-value&quot;);</span>
<a href="#l3.9"></a><span id="l3.9">           let date;</span>
<a href="#l3.10"></a><span id="l3.10">           if (this.mode == &quot;start&quot;) {</span>
<a href="#l3.11"></a><span id="l3.11">               date = this.mItem[calGetStartDateProp(this.mItem)];</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-              //this.mItem.startDate || this.mItem.entryDate;</span>
<a href="#l3.13"></a><span id="l3.13">               if (date) {</span>
<a href="#l3.14"></a><span id="l3.14">                   let label;</span>
<a href="#l3.15"></a><span id="l3.15">                   if (isToDo(this.mItem)) {</span>
<a href="#l3.16"></a><span id="l3.16">                       label = this.getAttribute(&quot;taskStartLabel&quot;);</span>
<a href="#l3.17"></a><span id="l3.17">                   } else {</span>
<a href="#l3.18"></a><span id="l3.18">                       label = this.getAttribute(&quot;eventStartLabel&quot;);</span>
<a href="#l3.19"></a><span id="l3.19">                   }</span>
<a href="#l3.20"></a><span id="l3.20">                   headerLabel.value = label;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/content/calendar-multiday-view.xml</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/content/calendar-multiday-view.xml</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -90,22 +90,20 @@</span>
<a href="#l4.4"></a><span id="l4.4">       &lt;/method&gt;</span>
<a href="#l4.5"></a><span id="l4.5"> </span>
<a href="#l4.6"></a><span id="l4.6">       &lt;property name=&quot;pixelsPerMinute&quot;</span>
<a href="#l4.7"></a><span id="l4.7">         onget=&quot;return this.mPixPerMin&quot;</span>
<a href="#l4.8"></a><span id="l4.8">         onset=&quot;if (this.mPixPerMin != val) { this.mPixPerMin = val; this.relayout(); } return val;&quot;/&gt;</span>
<a href="#l4.9"></a><span id="l4.9"> </span>
<a href="#l4.10"></a><span id="l4.10">       &lt;method name=&quot;relayout&quot;&gt;</span>
<a href="#l4.11"></a><span id="l4.11">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-          //dump (&quot;calendar-time-bar: relayout\n&quot;);</span>
<a href="#l4.13"></a><span id="l4.13">           var topbox = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;topbox&quot;);</span>
<a href="#l4.14"></a><span id="l4.14">           var orient = topbox.getAttribute(&quot;orient&quot;);</span>
<a href="#l4.15"></a><span id="l4.15">           var otherorient = getOtherOrientation(orient);</span>
<a href="#l4.16"></a><span id="l4.16"> </span>
<a href="#l4.17"></a><span id="l4.17" class="difflineminus">-          //dump (&quot;calendar-time-bar: orient: &quot; + orient + &quot; other: &quot; + otherorient + &quot;\n&quot;);</span>
<a href="#l4.18"></a><span id="l4.18"> </span>
<a href="#l4.19"></a><span id="l4.19">           function makeTimeBox(timestr, size) {</span>
<a href="#l4.20"></a><span id="l4.20">               var box = createXULElement(&quot;box&quot;);</span>
<a href="#l4.21"></a><span id="l4.21">               box.setAttribute(&quot;orient&quot;, orient);</span>
<a href="#l4.22"></a><span id="l4.22"> </span>
<a href="#l4.23"></a><span id="l4.23">               if (orient == &quot;horizontal&quot;) {</span>
<a href="#l4.24"></a><span id="l4.24">                   box.setAttribute(&quot;width&quot;, size);</span>
<a href="#l4.25"></a><span id="l4.25">               } else {</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineat">@@ -334,17 +332,16 @@</span>
<a href="#l4.27"></a><span id="l4.27">       &lt;property name=&quot;date&quot;&gt;</span>
<a href="#l4.28"></a><span id="l4.28">         &lt;getter&gt;&lt;![CDATA[</span>
<a href="#l4.29"></a><span id="l4.29">           return this.mDate;</span>
<a href="#l4.30"></a><span id="l4.30">         ]]&gt;&lt;/getter&gt;</span>
<a href="#l4.31"></a><span id="l4.31">         &lt;setter&gt;&lt;![CDATA[</span>
<a href="#l4.32"></a><span id="l4.32">           this.mDate = val;</span>
<a href="#l4.33"></a><span id="l4.33"> </span>
<a href="#l4.34"></a><span id="l4.34">           if (!compareObjects(val.timezone, this.mTimezone)) {</span>
<a href="#l4.35"></a><span id="l4.35" class="difflineminus">-              //dump (&quot;++ column tz: &quot; + val.timezone + &quot;\n&quot;);</span>
<a href="#l4.36"></a><span id="l4.36">               this.mTimezone = val.timezone;</span>
<a href="#l4.37"></a><span id="l4.37">               if (!this.mLayoutBatchCount) {</span>
<a href="#l4.38"></a><span id="l4.38">                   this.recalculateStartEndMinutes();</span>
<a href="#l4.39"></a><span id="l4.39">               }</span>
<a href="#l4.40"></a><span id="l4.40">           }</span>
<a href="#l4.41"></a><span id="l4.41"> </span>
<a href="#l4.42"></a><span id="l4.42">           return val;</span>
<a href="#l4.43"></a><span id="l4.43">         ]]&gt;&lt;/setter&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/base/content/calendar-task-tree.xml</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/base/content/calendar-task-tree.xml</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -1157,25 +1157,25 @@</span>
<a href="#l5.4"></a><span id="l5.4">           var bo = obo.treeBody.boxObject;</span>
<a href="#l5.5"></a><span id="l5.5">           var sel= tree.view.selection;</span>
<a href="#l5.6"></a><span id="l5.6"> </span>
<a href="#l5.7"></a><span id="l5.7">           var rowX = bo.x;</span>
<a href="#l5.8"></a><span id="l5.8">           var rowY = bo.y;</span>
<a href="#l5.9"></a><span id="l5.9">           var rowHeight = obo.rowHeight;</span>
<a href="#l5.10"></a><span id="l5.10">           var rowWidth = bo.width;</span>
<a href="#l5.11"></a><span id="l5.11"> </span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-          //add a rectangle for each visible selected row</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+          // add a rectangle for each visible selected row</span>
<a href="#l5.14"></a><span id="l5.14">           for (var i = obo.getFirstVisibleRow(); i &lt;= obo.getLastVisibleRow(); i ++) {</span>
<a href="#l5.15"></a><span id="l5.15">             if (sel.isSelected(i)) {</span>
<a href="#l5.16"></a><span id="l5.16">               region.unionRect(rowX, rowY, rowWidth, rowHeight);</span>
<a href="#l5.17"></a><span id="l5.17">             }</span>
<a href="#l5.18"></a><span id="l5.18">             rowY = rowY + rowHeight;</span>
<a href="#l5.19"></a><span id="l5.19">           }</span>
<a href="#l5.20"></a><span id="l5.20"> </span>
<a href="#l5.21"></a><span id="l5.21" class="difflineminus">-          //and finally, clip the result to be sure we don't spill over...</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineplus">+          // and finally, clip the result to be sure we don't spill over...</span>
<a href="#l5.23"></a><span id="l5.23">           if (!region.isEmpty()) {</span>
<a href="#l5.24"></a><span id="l5.24">             region.intersectRect(bo.x, bo.y, bo.width, bo.height);</span>
<a href="#l5.25"></a><span id="l5.25">           }</span>
<a href="#l5.26"></a><span id="l5.26">         } catch(ex) {</span>
<a href="#l5.27"></a><span id="l5.27">           ASSERT(false, &quot;Error while building selection region: &quot; + ex + &quot;\n&quot;);</span>
<a href="#l5.28"></a><span id="l5.28">           region = null;</span>
<a href="#l5.29"></a><span id="l5.29">         }</span>
<a href="#l5.30"></a><span id="l5.30">         invokeEventDragSession(item, event.target);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/base/content/calendar-unifinder.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/base/content/calendar-unifinder.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -760,17 +760,17 @@ var unifinderTreeView = {</span>
<a href="#l6.4"></a><span id="l6.4">             case &quot;title&quot;:</span>
<a href="#l6.5"></a><span id="l6.5">                 return (calendarEvent.title ? calendarEvent.title.replace(/\n/g, ' ') : &quot;&quot;);</span>
<a href="#l6.6"></a><span id="l6.6">             case &quot;startDate&quot;:</span>
<a href="#l6.7"></a><span id="l6.7">                 return formatUnifinderEventDateTime(calendarEvent.startDate);</span>
<a href="#l6.8"></a><span id="l6.8"> </span>
<a href="#l6.9"></a><span id="l6.9">             case &quot;endDate&quot;:</span>
<a href="#l6.10"></a><span id="l6.10">                 let eventEndDate = calendarEvent.endDate.clone();</span>
<a href="#l6.11"></a><span id="l6.11">                 // XXX reimplement</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-                //let eventEndDate = getCurrentNextOrPreviousRecurrence(calendarEvent);</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+                // let eventEndDate = getCurrentNextOrPreviousRecurrence(calendarEvent);</span>
<a href="#l6.14"></a><span id="l6.14">                 if (calendarEvent.startDate.isDate) {</span>
<a href="#l6.15"></a><span id="l6.15">                     // display enddate is ical enddate - 1</span>
<a href="#l6.16"></a><span id="l6.16">                     eventEndDate.day = eventEndDate.day - 1;</span>
<a href="#l6.17"></a><span id="l6.17">                 }</span>
<a href="#l6.18"></a><span id="l6.18">                 return formatUnifinderEventDateTime(eventEndDate);</span>
<a href="#l6.19"></a><span id="l6.19"> </span>
<a href="#l6.20"></a><span id="l6.20">             case &quot;categories&quot;:</span>
<a href="#l6.21"></a><span id="l6.21">                 return calendarEvent.getCategories({}).join(&quot;, &quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -338,18 +338,16 @@</span>
<a href="#l7.4"></a><span id="l7.4">                   input.setAttribute(&quot;id&quot;, &quot;attendeeCol3#&quot; + rowNumber);</span>
<a href="#l7.5"></a><span id="l7.5">               }</span>
<a href="#l7.6"></a><span id="l7.6"> </span>
<a href="#l7.7"></a><span id="l7.7">               input.value = null;</span>
<a href="#l7.8"></a><span id="l7.8">               input.removeAttribute(&quot;value&quot;);</span>
<a href="#l7.9"></a><span id="l7.9">               input.attendee = newAttendee;</span>
<a href="#l7.10"></a><span id="l7.10"> </span>
<a href="#l7.11"></a><span id="l7.11">               // set role and participation status</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-              //status.setAttribute(&quot;status&quot;, newAttendee.participationStatus);</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-              //role.setAttribute(&quot;role&quot;, newAttendee.role);</span>
<a href="#l7.14"></a><span id="l7.14">               roleStatusIcon.setAttribute(&quot;class&quot;, &quot;role-icon&quot;);</span>
<a href="#l7.15"></a><span id="l7.15">               roleStatusIcon.setAttribute(&quot;role&quot;, &quot;REQ-PARTICIPANT&quot;);</span>
<a href="#l7.16"></a><span id="l7.16">               userTypeIcon.setAttribute(&quot;cutype&quot;, &quot;INDIVIDUAL&quot;);</span>
<a href="#l7.17"></a><span id="l7.17"> </span>
<a href="#l7.18"></a><span id="l7.18">               // Set tooltip for rolenames and usertype icon</span>
<a href="#l7.19"></a><span id="l7.19">               this.updateTooltip(roleStatusIcon);</span>
<a href="#l7.20"></a><span id="l7.20">               this.updateTooltip(userTypeIcon);</span>
<a href="#l7.21"></a><span id="l7.21"> </span>
<a href="#l7.22"></a><span id="l7.22" class="difflineat">@@ -390,17 +388,17 @@</span>
<a href="#l7.23"></a><span id="l7.23">               // the inputfield already has a reference to the attendee</span>
<a href="#l7.24"></a><span id="l7.24">               // object, we just need to fill in the name.</span>
<a href="#l7.25"></a><span id="l7.25">               let attendee = inputField.attendee.clone();</span>
<a href="#l7.26"></a><span id="l7.26">               if (attendee.isOrganizer) {</span>
<a href="#l7.27"></a><span id="l7.27">                   continue;</span>
<a href="#l7.28"></a><span id="l7.28">               }</span>
<a href="#l7.29"></a><span id="l7.29"> </span>
<a href="#l7.30"></a><span id="l7.30">               attendee.role = this.getRoleElement(i).getAttribute(&quot;role&quot;);</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-              //attendee.participationStatus = this.getStatusElement(i).getAttribute(&quot;status&quot;);</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+              // attendee.participationStatus = this.getStatusElement(i).getAttribute(&quot;status&quot;);</span>
<a href="#l7.33"></a><span id="l7.33">               let userType = this.getUserTypeElement(i).getAttribute(&quot;cutype&quot;);</span>
<a href="#l7.34"></a><span id="l7.34">               attendee.userType = (userType == &quot;INDIVIDUAL&quot; ? null : userType) // INDIVIDUAL is the default</span>
<a href="#l7.35"></a><span id="l7.35"> </span>
<a href="#l7.36"></a><span id="l7.36">               // break the list of potentially many attendees back into individual names. This</span>
<a href="#l7.37"></a><span id="l7.37">               // is required in case the user entered comma-separated attendees in one field and</span>
<a href="#l7.38"></a><span id="l7.38">               // then clicked OK without switching to the next line.</span>
<a href="#l7.39"></a><span id="l7.39">               let parsedInput = MailServices.headerParser.makeFromDisplayAddress(inputField.value);</span>
<a href="#l7.40"></a><span id="l7.40">               let j = 0;</span>
<a href="#l7.41"></a><span id="l7.41" class="difflineat">@@ -433,17 +431,17 @@</span>
<a href="#l7.42"></a><span id="l7.42">               } else if (inputField.value == &quot;&quot;) {</span>
<a href="#l7.43"></a><span id="l7.43">                   continue;</span>
<a href="#l7.44"></a><span id="l7.44">               }</span>
<a href="#l7.45"></a><span id="l7.45"> </span>
<a href="#l7.46"></a><span id="l7.46">               // The inputfield already has a reference to the attendee</span>
<a href="#l7.47"></a><span id="l7.47">               // object, we just need to fill in the name.</span>
<a href="#l7.48"></a><span id="l7.48">               let attendee = inputField.attendee.clone();</span>
<a href="#l7.49"></a><span id="l7.49"> </span>
<a href="#l7.50"></a><span id="l7.50" class="difflineminus">-              //attendee.role = this.getRoleElement(i).getAttribute(&quot;role&quot;);</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineplus">+              // attendee.role = this.getRoleElement(i).getAttribute(&quot;role&quot;);</span>
<a href="#l7.52"></a><span id="l7.52">               attendee.participationStatus = this.getStatusElement(i).getAttribute(&quot;status&quot;);</span>
<a href="#l7.53"></a><span id="l7.53">               // Organizers do not have a CUTYPE</span>
<a href="#l7.54"></a><span id="l7.54">               attendee.userType = null;</span>
<a href="#l7.55"></a><span id="l7.55"> </span>
<a href="#l7.56"></a><span id="l7.56">               // break the list of potentially many attendees back into individual names</span>
<a href="#l7.57"></a><span id="l7.57">               let parsedInput = MailServices.headerParser.makeFromDisplayAddress(inputField.value);</span>
<a href="#l7.58"></a><span id="l7.58">               if (parsedInput[0].email &gt; 0) {</span>
<a href="#l7.59"></a><span id="l7.59">                   attendee.id = cal.prependMailTo(parsedInput[0].email);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-print-dialog.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-print-dialog.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -79,17 +79,17 @@ function getPrintSettings(receiverFunc) </span>
<a href="#l8.4"></a><span id="l8.4">     settings.eventList = [];</span>
<a href="#l8.5"></a><span id="l8.5">     settings.printEvents = document.getElementById(&quot;events&quot;).checked;</span>
<a href="#l8.6"></a><span id="l8.6">     settings.printTasks = document.getElementById(&quot;tasks&quot;).checked;</span>
<a href="#l8.7"></a><span id="l8.7">     settings.printCompletedTasks = document.getElementById(&quot;completed-tasks&quot;).checked;</span>
<a href="#l8.8"></a><span id="l8.8">     settings.printTasksWithNoDueDate = document.getElementById(&quot;tasks-with-no-due-date&quot;).checked;</span>
<a href="#l8.9"></a><span id="l8.9">     var theView = getCalendarView();</span>
<a href="#l8.10"></a><span id="l8.10">     switch (document.getElementById(&quot;view-field&quot;).selectedItem.value) {</span>
<a href="#l8.11"></a><span id="l8.11">     case 'currentView':</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-    case '': //just in case</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+    case '': // just in case</span>
<a href="#l8.14"></a><span id="l8.14">         settings.start = theView.startDay.clone();</span>
<a href="#l8.15"></a><span id="l8.15">         settings.end = theView.endDay.clone();</span>
<a href="#l8.16"></a><span id="l8.16">         settings.end.day += 1;</span>
<a href="#l8.17"></a><span id="l8.17">         settings.start.isDate = false;</span>
<a href="#l8.18"></a><span id="l8.18">         settings.end.isDate = false;</span>
<a href="#l8.19"></a><span id="l8.19">         break;</span>
<a href="#l8.20"></a><span id="l8.20">     case 'selected': {</span>
<a href="#l8.21"></a><span id="l8.21">         let selectedItems = theView.getSelectedItems({});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/base/content/widgets/calendar-widgets.xml</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/base/content/widgets/calendar-widgets.xml</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -680,17 +680,17 @@</span>
<a href="#l9.4"></a><span id="l9.4">          }</span>
<a href="#l9.5"></a><span id="l9.5"> </span>
<a href="#l9.6"></a><span id="l9.6">          session.getData(transfer, 0);</span>
<a href="#l9.7"></a><span id="l9.7">          let flavor = {};</span>
<a href="#l9.8"></a><span id="l9.8">          let data = {};</span>
<a href="#l9.9"></a><span id="l9.9">          // nsITransferable sucks when it comes to trying to add extra flavors.</span>
<a href="#l9.10"></a><span id="l9.10">          // This will throw NS_ERROR_FAILURE, so as a workaround, we use the</span>
<a href="#l9.11"></a><span id="l9.11">          // sourceNode property and get the event that way</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-         //transfer.getAnyTransferData(flavor, data, {});</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+         //   transfer.getAnyTransferData(flavor, data, {});</span>
<a href="#l9.14"></a><span id="l9.14"> </span>
<a href="#l9.15"></a><span id="l9.15">          item = session.sourceNode.sourceObject;</span>
<a href="#l9.16"></a><span id="l9.16">          let newItem = this.onDropItem(item).clone();</span>
<a href="#l9.17"></a><span id="l9.17">          let newStart = newItem.startDate || newItem.entryDate || newItem.dueDate;</span>
<a href="#l9.18"></a><span id="l9.18">          let newEnd = newItem.endDate || newItem.dueDate || newItem.entryDate;</span>
<a href="#l9.19"></a><span id="l9.19">          let offset = this.calendarView.mShadowOffset;</span>
<a href="#l9.20"></a><span id="l9.20">          newStart.addDuration(offset);</span>
<a href="#l9.21"></a><span id="l9.21">          newEnd.addDuration(offset);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/calendar/base/modules/calRecurrenceUtils.jsm</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/calendar/base/modules/calRecurrenceUtils.jsm</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -49,22 +49,22 @@ function recurrenceRule2String(recurrenc</span>
<a href="#l10.4"></a><span id="l10.4">     recurrenceInfo = recurrenceInfo.clone();</span>
<a href="#l10.5"></a><span id="l10.5">     let rrules = splitRecurrenceRules(recurrenceInfo);</span>
<a href="#l10.6"></a><span id="l10.6">     if (rrules[0].length == 1) {</span>
<a href="#l10.7"></a><span id="l10.7">         let rule = cal.wrapInstance(rrules[0][0], Components.interfaces.calIRecurrenceRule);</span>
<a href="#l10.8"></a><span id="l10.8">         // Currently we allow only for BYDAY, BYMONTHDAY, BYMONTH rules.</span>
<a href="#l10.9"></a><span id="l10.9">         if (rule &amp;&amp;</span>
<a href="#l10.10"></a><span id="l10.10">             !checkRecurrenceRule(rule, ['BYSECOND',</span>
<a href="#l10.11"></a><span id="l10.11">                                         'BYMINUTE',</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-                                        //'BYDAY',</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+                                        // 'BYDAY',</span>
<a href="#l10.14"></a><span id="l10.14">                                         'BYHOUR',</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineminus">-                                        //'BYMONTHDAY',</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineplus">+                                        // 'BYMONTHDAY',</span>
<a href="#l10.17"></a><span id="l10.17">                                         'BYYEARDAY',</span>
<a href="#l10.18"></a><span id="l10.18">                                         'BYWEEKNO',</span>
<a href="#l10.19"></a><span id="l10.19" class="difflineminus">-                                        //'BYMONTH',</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineplus">+                                        // 'BYMONTH',</span>
<a href="#l10.21"></a><span id="l10.21">                                         'BYSETPOS'])) {</span>
<a href="#l10.22"></a><span id="l10.22">             let dateFormatter = cal.getDateFormatter();</span>
<a href="#l10.23"></a><span id="l10.23">             let ruleString;</span>
<a href="#l10.24"></a><span id="l10.24">             if (rule.type == 'DAILY') {</span>
<a href="#l10.25"></a><span id="l10.25">                 if (checkRecurrenceRule(rule, ['BYDAY'])) {</span>
<a href="#l10.26"></a><span id="l10.26">                     let days = rule.getComponent(&quot;BYDAY&quot;, {});</span>
<a href="#l10.27"></a><span id="l10.27">                     let weekdays = [2, 3, 4, 5, 6];</span>
<a href="#l10.28"></a><span id="l10.28">                     if (weekdays.length == days.length) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/calendar/base/src/calCachedCalendar.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/calendar/base/src/calCachedCalendar.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -458,17 +458,17 @@ calCachedCalendar.prototype = {</span>
<a href="#l11.4"></a><span id="l11.4">         if (aNewState) {</span>
<a href="#l11.5"></a><span id="l11.5">             // Going offline: (XXX get items before going offline?) =&gt; we may ask the user to stay online a bit longer</span>
<a href="#l11.6"></a><span id="l11.6">         } else {</span>
<a href="#l11.7"></a><span id="l11.7">             // Going online (start replaying changes to the remote calendar)</span>
<a href="#l11.8"></a><span id="l11.8">             this.refresh();</span>
<a href="#l11.9"></a><span id="l11.9">         }</span>
<a href="#l11.10"></a><span id="l11.10">     },</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-    //aOldItem is already in the cache</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+    // aOldItem is already in the cache</span>
<a href="#l11.14"></a><span id="l11.14">     promptOverwrite: function cCC_promptOverwrite(aMethod, aItem, aListener, aOldItem) {</span>
<a href="#l11.15"></a><span id="l11.15">         let overwrite = cal.promptOverwrite(aMethod, aItem, aListener, aOldItem);</span>
<a href="#l11.16"></a><span id="l11.16">         if (overwrite) {</span>
<a href="#l11.17"></a><span id="l11.17">             if (aMethod == &quot;modify&quot;) {</span>
<a href="#l11.18"></a><span id="l11.18">                 this.modifyOfflineItem(aItem, aOldItem, aListener);</span>
<a href="#l11.19"></a><span id="l11.19">             } else {</span>
<a href="#l11.20"></a><span id="l11.20">                 this.deleteOfflineItem(aItem, aListener);</span>
<a href="#l11.21"></a><span id="l11.21">             }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/calendar/base/src/calCalendarManager.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/calendar/base/src/calCalendarManager.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -327,17 +327,16 @@ calCalendarManager.prototype = {</span>
<a href="#l12.4"></a><span id="l12.4">         storageSdb.append(&quot;storage.sdb&quot;);</span>
<a href="#l12.5"></a><span id="l12.5">         let db = Services.storage.openDatabase(storageSdb);</span>
<a href="#l12.6"></a><span id="l12.6"> </span>
<a href="#l12.7"></a><span id="l12.7">         db.beginTransactionAs(Components.interfaces.mozIStorageConnection.TRANSACTION_EXCLUSIVE);</span>
<a href="#l12.8"></a><span id="l12.8">         try {</span>
<a href="#l12.9"></a><span id="l12.9">             if (db.tableExists(&quot;cal_calendars_prefs&quot;)) {</span>
<a href="#l12.10"></a><span id="l12.10">                 // Check if we need to upgrade:</span>
<a href="#l12.11"></a><span id="l12.11">                 let version = this.getSchemaVersion(db);</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-                //cal.LOG(&quot;*** Calendar schema version is: &quot; + version);</span>
<a href="#l12.13"></a><span id="l12.13">                 if (version &lt; DB_SCHEMA_VERSION) {</span>
<a href="#l12.14"></a><span id="l12.14">                     this.upgradeDB(version, db);</span>
<a href="#l12.15"></a><span id="l12.15">                 }</span>
<a href="#l12.16"></a><span id="l12.16"> </span>
<a href="#l12.17"></a><span id="l12.17">                 this.migrateDB(db);</span>
<a href="#l12.18"></a><span id="l12.18"> </span>
<a href="#l12.19"></a><span id="l12.19">                 db.executeSimpleSQL(&quot;DROP TABLE cal_calendars; &quot; +</span>
<a href="#l12.20"></a><span id="l12.20">                                     &quot;DROP TABLE cal_calendars_prefs; &quot; +</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/calendar/base/src/calFilter.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/calendar/base/src/calFilter.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -349,17 +349,17 @@ calFilter.prototype = {</span>
<a href="#l13.4"></a><span id="l13.4">         }</span>
<a href="#l13.5"></a><span id="l13.5"> </span>
<a href="#l13.6"></a><span id="l13.6">         let searchText = this.mFilterText.toLowerCase();</span>
<a href="#l13.7"></a><span id="l13.7"> </span>
<a href="#l13.8"></a><span id="l13.8">         if (!searchText.length || searchText.match(/^\s*$/)) {</span>
<a href="#l13.9"></a><span id="l13.9">             return true;</span>
<a href="#l13.10"></a><span id="l13.10">         }</span>
<a href="#l13.11"></a><span id="l13.11"> </span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-        //XXX TODO: Support specifying which fields to search on</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+        // TODO: Support specifying which fields to search on</span>
<a href="#l13.14"></a><span id="l13.14">         for (let field of [&quot;SUMMARY&quot;, &quot;DESCRIPTION&quot;, &quot;LOCATION&quot;, &quot;URL&quot;]) {</span>
<a href="#l13.15"></a><span id="l13.15">             let val = aItem.getProperty(field);</span>
<a href="#l13.16"></a><span id="l13.16">             if (val &amp;&amp; val.toLowerCase().includes(searchText)) {</span>
<a href="#l13.17"></a><span id="l13.17">                 return true;</span>
<a href="#l13.18"></a><span id="l13.18">             }</span>
<a href="#l13.19"></a><span id="l13.19">         }</span>
<a href="#l13.20"></a><span id="l13.20"> </span>
<a href="#l13.21"></a><span id="l13.21">         return aItem.getCategories({}).some(function(cat) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/calendar/base/src/calIcsParser.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/calendar/base/src/calIcsParser.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -172,32 +172,32 @@ calIcsParser.prototype = {</span>
<a href="#l14.4"></a><span id="l14.4">         unicodeConverter.charset = &quot;UTF-8&quot;;</span>
<a href="#l14.5"></a><span id="l14.5">         let stringData = unicodeConverter.convertFromByteArray(octetArray, octetArray.length);</span>
<a href="#l14.6"></a><span id="l14.6"> </span>
<a href="#l14.7"></a><span id="l14.7">         this.parseString(stringData, aTzProvider, aAsyncParsing);</span>
<a href="#l14.8"></a><span id="l14.8">     },</span>
<a href="#l14.9"></a><span id="l14.9"> </span>
<a href="#l14.10"></a><span id="l14.10">     getItems: function ip_getItems(aCount) {</span>
<a href="#l14.11"></a><span id="l14.11">         aCount.value = this.mItems.length;</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-        return this.mItems.concat([]); //clone</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+        return this.mItems.concat([]);</span>
<a href="#l14.14"></a><span id="l14.14">     },</span>
<a href="#l14.15"></a><span id="l14.15"> </span>
<a href="#l14.16"></a><span id="l14.16">     getParentlessItems: function ip_getParentlessItems(aCount) {</span>
<a href="#l14.17"></a><span id="l14.17">         aCount.value = this.mParentlessItems.length;</span>
<a href="#l14.18"></a><span id="l14.18" class="difflineminus">-        return this.mParentlessItems.concat([]); //clone</span>
<a href="#l14.19"></a><span id="l14.19" class="difflineplus">+        return this.mParentlessItems.concat([]);</span>
<a href="#l14.20"></a><span id="l14.20">     },</span>
<a href="#l14.21"></a><span id="l14.21"> </span>
<a href="#l14.22"></a><span id="l14.22">     getProperties: function ip_getProperties(aCount) {</span>
<a href="#l14.23"></a><span id="l14.23">         aCount.value = this.mProperties.length;</span>
<a href="#l14.24"></a><span id="l14.24" class="difflineminus">-        return this.mProperties.concat([]); //clone</span>
<a href="#l14.25"></a><span id="l14.25" class="difflineplus">+        return this.mProperties.concat([]);</span>
<a href="#l14.26"></a><span id="l14.26">     },</span>
<a href="#l14.27"></a><span id="l14.27"> </span>
<a href="#l14.28"></a><span id="l14.28">     getComponents: function ip_getComponents(aCount) {</span>
<a href="#l14.29"></a><span id="l14.29">         aCount.value = this.mComponents.length;</span>
<a href="#l14.30"></a><span id="l14.30" class="difflineminus">-        return this.mComponents.concat([]); //clone</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineplus">+        return this.mComponents.concat([]);</span>
<a href="#l14.32"></a><span id="l14.32">     }</span>
<a href="#l14.33"></a><span id="l14.33"> };</span>
<a href="#l14.34"></a><span id="l14.34"> </span>
<a href="#l14.35"></a><span id="l14.35"> /**</span>
<a href="#l14.36"></a><span id="l14.36">  * The parser state, which helps process ical components without clogging up the</span>
<a href="#l14.37"></a><span id="l14.37">  * event queue.</span>
<a href="#l14.38"></a><span id="l14.38">  *</span>
<a href="#l14.39"></a><span id="l14.39">  * @param aParser       The parser that is using this state</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/calendar/base/src/calItemBase.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/calendar/base/src/calItemBase.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -453,19 +453,19 @@ calItemBase.prototype = {</span>
<a href="#l15.4"></a><span id="l15.4">     //                              in AString aParameterName);</span>
<a href="#l15.5"></a><span id="l15.5">     hasPropertyParameter: function cIB_hasPropertyParameter(aPropName, aParamName) {</span>
<a href="#l15.6"></a><span id="l15.6">         let propName = aPropName.toUpperCase();</span>
<a href="#l15.7"></a><span id="l15.7">         let paramName = aParamName.toUpperCase();</span>
<a href="#l15.8"></a><span id="l15.8">         return ((propName in this.mPropertyParams) &amp;&amp;</span>
<a href="#l15.9"></a><span id="l15.9">                 (paramName in this.mPropertyParams[propName]));</span>
<a href="#l15.10"></a><span id="l15.10">     },</span>
<a href="#l15.11"></a><span id="l15.11"> </span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-    //void setPropertyParameter(in AString aPropertyName,</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineminus">-    //                          in AString aParameterName,</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineminus">-    //                          in AUTF8String aParameterValue);</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineplus">+    // void setPropertyParameter(in AString aPropertyName,</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineplus">+    //                           in AString aParameterName,</span>
<a href="#l15.17"></a><span id="l15.17" class="difflineplus">+    //                           in AUTF8String aParameterValue);</span>
<a href="#l15.18"></a><span id="l15.18">     setPropertyParameter: function cIB_setPropertyParameter(aPropName, aParamName, aParamValue) {</span>
<a href="#l15.19"></a><span id="l15.19">         let propName = aPropName.toUpperCase();</span>
<a href="#l15.20"></a><span id="l15.20">         let paramName = aParamName.toUpperCase();</span>
<a href="#l15.21"></a><span id="l15.21">         this.modify();</span>
<a href="#l15.22"></a><span id="l15.22">         if (!(propName in this.mPropertyParams)) {</span>
<a href="#l15.23"></a><span id="l15.23">             if (!this.hasProperty(propName)) {</span>
<a href="#l15.24"></a><span id="l15.24">                 throw &quot;Property &quot; + aPropName + &quot; not set&quot;;</span>
<a href="#l15.25"></a><span id="l15.25">             } else {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/calendar/base/src/calTimezoneService.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/calendar/base/src/calTimezoneService.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -481,17 +481,17 @@ function guessSystemTimezone() {</span>
<a href="#l16.4"></a><span id="l16.4">                         continue; // period ends too early</span>
<a href="#l16.5"></a><span id="l16.5">                     }</span>
<a href="#l16.6"></a><span id="l16.6">                 } // else forever rule</span>
<a href="#l16.7"></a><span id="l16.7">             } // else no daylight rule</span>
<a href="#l16.8"></a><span id="l16.8"> </span>
<a href="#l16.9"></a><span id="l16.9">             // found period that covers today.</span>
<a href="#l16.10"></a><span id="l16.10">             if (!isForNextTransitionDate) {</span>
<a href="#l16.11"></a><span id="l16.11">                 return period;</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-            } else /*isForNextTranstionDate*/ {</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+            } else {</span>
<a href="#l16.14"></a><span id="l16.14">                 if (todayUTC.nativeTime &lt; periodStartCalDate.nativeTime) {</span>
<a href="#l16.15"></a><span id="l16.15">                     // already know periodStartCalDate &lt; oneYr from now,</span>
<a href="#l16.16"></a><span id="l16.16">                     // and transitions are at most once per year, so it is next.</span>
<a href="#l16.17"></a><span id="l16.17">                     return cal.dateTimeToJsDate(periodStartCalDate);</span>
<a href="#l16.18"></a><span id="l16.18">                 } else if (rrule) {</span>
<a href="#l16.19"></a><span id="l16.19">                     // find next occurrence after today</span>
<a href="#l16.20"></a><span id="l16.20">                     periodCalRule.icalProperty = rrule;</span>
<a href="#l16.21"></a><span id="l16.21">                     var nextTransitionDate =</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/calendar/base/src/calUtils.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/calendar/base/src/calUtils.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -89,25 +89,25 @@ function getWeekInfoService() {</span>
<a href="#l17.4"></a><span id="l17.4"> }</span>
<a href="#l17.5"></a><span id="l17.5"> </span>
<a href="#l17.6"></a><span id="l17.6"> /* Shortcut to date formatter service */</span>
<a href="#l17.7"></a><span id="l17.7"> function getDateFormatter() {</span>
<a href="#l17.8"></a><span id="l17.8">     return Components.classes[&quot;@mozilla.org/calendar/datetime-formatter;1&quot;]</span>
<a href="#l17.9"></a><span id="l17.9">                      .getService(Components.interfaces.calIDateTimeFormatter);</span>
<a href="#l17.10"></a><span id="l17.10"> }</span>
<a href="#l17.11"></a><span id="l17.11"> </span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-/// @return the UTC timezone.</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+// @return the UTC timezone.</span>
<a href="#l17.14"></a><span id="l17.14"> function UTC() {</span>
<a href="#l17.15"></a><span id="l17.15">     if (UTC.mObject === undefined) {</span>
<a href="#l17.16"></a><span id="l17.16">         UTC.mObject = getTimezoneService().UTC;</span>
<a href="#l17.17"></a><span id="l17.17">     }</span>
<a href="#l17.18"></a><span id="l17.18">     return UTC.mObject;</span>
<a href="#l17.19"></a><span id="l17.19"> }</span>
<a href="#l17.20"></a><span id="l17.20"> </span>
<a href="#l17.21"></a><span id="l17.21" class="difflineminus">-/// @return the floating timezone.</span>
<a href="#l17.22"></a><span id="l17.22" class="difflineplus">+// @return the floating timezone.</span>
<a href="#l17.23"></a><span id="l17.23"> function floating() {</span>
<a href="#l17.24"></a><span id="l17.24">     if (floating.mObject === undefined) {</span>
<a href="#l17.25"></a><span id="l17.25">         floating.mObject = getTimezoneService().floating;</span>
<a href="#l17.26"></a><span id="l17.26">     }</span>
<a href="#l17.27"></a><span id="l17.27">     return floating.mObject;</span>
<a href="#l17.28"></a><span id="l17.28"> }</span>
<a href="#l17.29"></a><span id="l17.29"> </span>
<a href="#l17.30"></a><span id="l17.30"> /**</span>
<a href="#l17.31"></a><span id="l17.31" class="difflineat">@@ -887,19 +887,20 @@ function setDefaultStartEndHour(aItem, a</span>
<a href="#l17.32"></a><span id="l17.32">     aItem[calGetStartDateProp(aItem)] = getDefaultStartDate(aReferenceDate);</span>
<a href="#l17.33"></a><span id="l17.33"> </span>
<a href="#l17.34"></a><span id="l17.34">     if (isEvent(aItem)) {</span>
<a href="#l17.35"></a><span id="l17.35">         aItem.endDate = aItem.startDate.clone();</span>
<a href="#l17.36"></a><span id="l17.36">         aItem.endDate.minute += Preferences.get(&quot;calendar.event.defaultlength&quot;, 60);</span>
<a href="#l17.37"></a><span id="l17.37">     }</span>
<a href="#l17.38"></a><span id="l17.38"> }</span>
<a href="#l17.39"></a><span id="l17.39"> </span>
<a href="#l17.40"></a><span id="l17.40" class="difflineminus">-/****</span>
<a href="#l17.41"></a><span id="l17.41" class="difflineminus">- **** debug code</span>
<a href="#l17.42"></a><span id="l17.42" class="difflineminus">- ****/</span>
<a href="#l17.43"></a><span id="l17.43" class="difflineplus">+/**</span>
<a href="#l17.44"></a><span id="l17.44" class="difflineplus">+ * Helper used in the following log functions to actually log the message.</span>
<a href="#l17.45"></a><span id="l17.45" class="difflineplus">+ * Should not be used outside of this file.</span>
<a href="#l17.46"></a><span id="l17.46" class="difflineplus">+ */</span>
<a href="#l17.47"></a><span id="l17.47"> function _log(message, flag) {</span>
<a href="#l17.48"></a><span id="l17.48">     let frame = Components.stack.caller.caller;</span>
<a href="#l17.49"></a><span id="l17.49">     let filename = frame.filename ? frame.filename.split(&quot; -&gt; &quot;).pop() : null;</span>
<a href="#l17.50"></a><span id="l17.50">     let scriptError = Components.classes[&quot;@mozilla.org/scripterror;1&quot;]</span>
<a href="#l17.51"></a><span id="l17.51">                                 .createInstance(Components.interfaces.nsIScriptError);</span>
<a href="#l17.52"></a><span id="l17.52">     scriptError.init(message, filename, null, frame.lineNumber, frame.columnNumber,</span>
<a href="#l17.53"></a><span id="l17.53">                      flag, &quot;component javascript&quot;);</span>
<a href="#l17.54"></a><span id="l17.54">     Services.console.logMessage(scriptError);</span>
<a href="#l17.55"></a><span id="l17.55" class="difflineat">@@ -1165,23 +1166,23 @@ function calInterfaceBag(iid) {</span>
<a href="#l17.56"></a><span id="l17.56"> }</span>
<a href="#l17.57"></a><span id="l17.57"> calInterfaceBag.prototype = {</span>
<a href="#l17.58"></a><span id="l17.58">     mIid: null,</span>
<a href="#l17.59"></a><span id="l17.59">     mInterfaces: null,</span>
<a href="#l17.60"></a><span id="l17.60"> </span>
<a href="#l17.61"></a><span id="l17.61">     // Iterating the inteface bag iterates the interfaces it contains</span>
<a href="#l17.62"></a><span id="l17.62">     [Symbol.iterator]: function() { return this.mInterfaces[Symbol.iterator](); },</span>
<a href="#l17.63"></a><span id="l17.63"> </span>
<a href="#l17.64"></a><span id="l17.64" class="difflineminus">-    /// internal:</span>
<a href="#l17.65"></a><span id="l17.65" class="difflineplus">+    // internal:</span>
<a href="#l17.66"></a><span id="l17.66">     init: function calInterfaceBag_init(iid) {</span>
<a href="#l17.67"></a><span id="l17.67">         this.mIid = iid;</span>
<a href="#l17.68"></a><span id="l17.68">         this.mInterfaces = [];</span>
<a href="#l17.69"></a><span id="l17.69">     },</span>
<a href="#l17.70"></a><span id="l17.70"> </span>
<a href="#l17.71"></a><span id="l17.71" class="difflineminus">-    /// external:</span>
<a href="#l17.72"></a><span id="l17.72" class="difflineplus">+    // external:</span>
<a href="#l17.73"></a><span id="l17.73">     get size() {</span>
<a href="#l17.74"></a><span id="l17.74">         return this.mInterfaces.length;</span>
<a href="#l17.75"></a><span id="l17.75">     },</span>
<a href="#l17.76"></a><span id="l17.76"> </span>
<a href="#l17.77"></a><span id="l17.77">     get interfaceArray() {</span>
<a href="#l17.78"></a><span id="l17.78">         return this.mInterfaces;</span>
<a href="#l17.79"></a><span id="l17.79">     },</span>
<a href="#l17.80"></a><span id="l17.80"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/calendar/import-export/calOutlookCSVImportExport.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/calendar/import-export/calOutlookCSVImportExport.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -134,21 +134,21 @@ calOutlookCSVImporter.prototype = {</span>
<a href="#l18.4"></a><span id="l18.4">         let trimEndQuotesRegExp = /^&quot;(.*)&quot;$/m;</span>
<a href="#l18.5"></a><span id="l18.5">         let trimResults = trimEndQuotesRegExp.exec( str );</span>
<a href="#l18.6"></a><span id="l18.6">         let header = trimResults &amp;&amp; trimResults[1].split(/&quot;,&quot;/);</span>
<a href="#l18.7"></a><span id="l18.7">         if (header == null) {</span>
<a href="#l18.8"></a><span id="l18.8">             aCount.value = 0;</span>
<a href="#l18.9"></a><span id="l18.9">             return [];</span>
<a href="#l18.10"></a><span id="l18.10">         }</span>
<a href="#l18.11"></a><span id="l18.11"> </span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-        //strip header from string</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+        // strip header from string</span>
<a href="#l18.14"></a><span id="l18.14">         str = str.slice(trimResults[0].length);</span>
<a href="#l18.15"></a><span id="l18.15"> </span>
<a href="#l18.16"></a><span id="l18.16">         let args = {};</span>
<a href="#l18.17"></a><span id="l18.17" class="difflineminus">-        //args.fieldList contains the field names from the first row of CSV</span>
<a href="#l18.18"></a><span id="l18.18" class="difflineplus">+        // args.fieldList contains the field names from the first row of CSV</span>
<a href="#l18.19"></a><span id="l18.19">         args.fieldList = header;</span>
<a href="#l18.20"></a><span id="l18.20"> </span>
<a href="#l18.21"></a><span id="l18.21">         let locale;</span>
<a href="#l18.22"></a><span id="l18.22">         let i;</span>
<a href="#l18.23"></a><span id="l18.23">         let knownIndxs;</span>
<a href="#l18.24"></a><span id="l18.24">         for (i in locales) {</span>
<a href="#l18.25"></a><span id="l18.25">             locale = locales[i];</span>
<a href="#l18.26"></a><span id="l18.26">             knownIndxs = 0;</span>
<a href="#l18.27"></a><span id="l18.27" class="difflineat">@@ -352,34 +352,34 @@ calOutlookCSVImporter.prototype = {</span>
<a href="#l18.28"></a><span id="l18.28">                 }</span>
<a href="#l18.29"></a><span id="l18.29">                 if (&quot;locationIndex&quot; in args) {</span>
<a href="#l18.30"></a><span id="l18.30">                     txt = this.parseTextField(eventFields[args.locationIndex])</span>
<a href="#l18.31"></a><span id="l18.31">                     if (txt) {</span>
<a href="#l18.32"></a><span id="l18.32">                         event.setProperty(&quot;LOCATION&quot;, txt);</span>
<a href="#l18.33"></a><span id="l18.33">                     }</span>
<a href="#l18.34"></a><span id="l18.34">                 }</span>
<a href="#l18.35"></a><span id="l18.35"> </span>
<a href="#l18.36"></a><span id="l18.36" class="difflineminus">-                //save the event into return array</span>
<a href="#l18.37"></a><span id="l18.37" class="difflineplus">+                // save the event into return array</span>
<a href="#l18.38"></a><span id="l18.38">                 eventArray.push(event);</span>
<a href="#l18.39"></a><span id="l18.39">             }</span>
<a href="#l18.40"></a><span id="l18.40"> </span>
<a href="#l18.41"></a><span id="l18.41" class="difflineminus">-            //get next events fields</span>
<a href="#l18.42"></a><span id="l18.42" class="difflineplus">+            // get next events fields</span>
<a href="#l18.43"></a><span id="l18.43">             eventFields = eventRegExp.exec(str);</span>
<a href="#l18.44"></a><span id="l18.44"> </span>
<a href="#l18.45"></a><span id="l18.45">         } while (eventRegExp.lastIndex != 0);</span>
<a href="#l18.46"></a><span id="l18.46"> </span>
<a href="#l18.47"></a><span id="l18.47">         // return results</span>
<a href="#l18.48"></a><span id="l18.48">         aCount.value = eventArray.length;</span>
<a href="#l18.49"></a><span id="l18.49">         return eventArray;</span>
<a href="#l18.50"></a><span id="l18.50">     },</span>
<a href="#l18.51"></a><span id="l18.51"> </span>
<a href="#l18.52"></a><span id="l18.52">     parseDateTime: function parseDateTime(aDate, aTime, aLocale) {</span>
<a href="#l18.53"></a><span id="l18.53">         let dt = cal.createDateTime();</span>
<a href="#l18.54"></a><span id="l18.54"> </span>
<a href="#l18.55"></a><span id="l18.55" class="difflineminus">-        //XXX Can we do better?</span>
<a href="#l18.56"></a><span id="l18.56" class="difflineplus">+        // XXX Can we do better?</span>
<a href="#l18.57"></a><span id="l18.57">         dt.timezone = cal.floating();</span>
<a href="#l18.58"></a><span id="l18.58"> </span>
<a href="#l18.59"></a><span id="l18.59">         let rd = aLocale.dateRe.exec(aDate);</span>
<a href="#l18.60"></a><span id="l18.60">         let rt = aLocale.timeRe.exec(aTime);</span>
<a href="#l18.61"></a><span id="l18.61"> </span>
<a href="#l18.62"></a><span id="l18.62">         if (!rd || !rt) {</span>
<a href="#l18.63"></a><span id="l18.63">             return null;</span>
<a href="#l18.64"></a><span id="l18.64">         }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/calendar/providers/ics/calICSCalendar.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/calendar/providers/ics/calICSCalendar.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -869,17 +869,17 @@ calICSObserver.prototype = {</span>
<a href="#l19.4"></a><span id="l19.4">     },</span>
<a href="#l19.5"></a><span id="l19.5"> </span>
<a href="#l19.6"></a><span id="l19.6">     onError: function(aCalendar, aErrNo, aMessage) {</span>
<a href="#l19.7"></a><span id="l19.7">         this.mCalendar.readOnly = true;</span>
<a href="#l19.8"></a><span id="l19.8">         this.mCalendar.notifyError(aErrNo, aMessage);</span>
<a href="#l19.9"></a><span id="l19.9">     }</span>
<a href="#l19.10"></a><span id="l19.10"> };</span>
<a href="#l19.11"></a><span id="l19.11"> </span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-/***************************</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+/*</span>
<a href="#l19.14"></a><span id="l19.14">  * Transport Abstraction Hooks</span>
<a href="#l19.15"></a><span id="l19.15">  *</span>
<a href="#l19.16"></a><span id="l19.16">  * Those hooks provide a way to do checks before or after publishing an</span>
<a href="#l19.17"></a><span id="l19.17">  * ics file. The main use will be to check etags (or some other way to check</span>
<a href="#l19.18"></a><span id="l19.18">  * for remote changes) to protect remote changes from being overwritten.</span>
<a href="#l19.19"></a><span id="l19.19">  *</span>
<a href="#l19.20"></a><span id="l19.20">  * Different protocols need different checks (webdav can do etag, but</span>
<a href="#l19.21"></a><span id="l19.21">  * local files need last-modified stamps), hence different hooks for each</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/calendar/providers/memory/calMemoryCalendar.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/calendar/providers/memory/calMemoryCalendar.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -122,33 +122,35 @@ calMemoryCalendar.prototype = {</span>
<a href="#l20.4"></a><span id="l20.4">             this.notifyOperationComplete(aListener,</span>
<a href="#l20.5"></a><span id="l20.5">                                          Components.results.NS_ERROR_FAILURE,</span>
<a href="#l20.6"></a><span id="l20.6">                                          Components.interfaces.calIOperationListener.ADD,</span>
<a href="#l20.7"></a><span id="l20.7">                                          aItem.id,</span>
<a href="#l20.8"></a><span id="l20.8">                                          &quot;Can't set ID on non-mutable item to addItem&quot;);</span>
<a href="#l20.9"></a><span id="l20.9">             return;</span>
<a href="#l20.10"></a><span id="l20.10">         }</span>
<a href="#l20.11"></a><span id="l20.11"> </span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-        //Lines below are commented because of the offline bug 380060</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineminus">-        //Memory Calendar cannot assume that a new item should not have an ID.</span>
<a href="#l20.14"></a><span id="l20.14" class="difflineminus">-        //calCachedCalendar could send over an item with an id.</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineplus">+        // Lines below are commented because of the offline bug 380060, the</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineplus">+        // memory calendar cannot assume that a new item should not have an ID.</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineplus">+        // calCachedCalendar could send over an item with an id.</span>
<a href="#l20.18"></a><span id="l20.18"> </span>
<a href="#l20.19"></a><span id="l20.19" class="difflineminus">-        /*if (this.mItems[aItem.id] != null) {</span>
<a href="#l20.20"></a><span id="l20.20" class="difflineplus">+        /*</span>
<a href="#l20.21"></a><span id="l20.21" class="difflineplus">+        if (this.mItems[aItem.id] != null) {</span>
<a href="#l20.22"></a><span id="l20.22">             if (this.relaxedMode) {</span>
<a href="#l20.23"></a><span id="l20.23">                 // we possibly want to interact with the user before deleting</span>
<a href="#l20.24"></a><span id="l20.24">                 delete this.mItems[aItem.id];</span>
<a href="#l20.25"></a><span id="l20.25">             } else {</span>
<a href="#l20.26"></a><span id="l20.26">                 this.notifyOperationComplete(aListener,</span>
<a href="#l20.27"></a><span id="l20.27">                                              Components.interfaces.calIErrors.DUPLICATE_ID,</span>
<a href="#l20.28"></a><span id="l20.28">                                              Components.interfaces.calIOperationListener.ADD,</span>
<a href="#l20.29"></a><span id="l20.29">                                              aItem.id,</span>
<a href="#l20.30"></a><span id="l20.30">                                              &quot;ID already exists for addItem&quot;);</span>
<a href="#l20.31"></a><span id="l20.31">                 return;</span>
<a href="#l20.32"></a><span id="l20.32">             }</span>
<a href="#l20.33"></a><span id="l20.33" class="difflineminus">-        }*/</span>
<a href="#l20.34"></a><span id="l20.34" class="difflineplus">+        }</span>
<a href="#l20.35"></a><span id="l20.35" class="difflineplus">+        */</span>
<a href="#l20.36"></a><span id="l20.36"> </span>
<a href="#l20.37"></a><span id="l20.37">         let parentItem = aItem.parentItem;</span>
<a href="#l20.38"></a><span id="l20.38">         if (parentItem != aItem) {</span>
<a href="#l20.39"></a><span id="l20.39">             parentItem = parentItem.clone();</span>
<a href="#l20.40"></a><span id="l20.40">             parentItem.recurrenceInfo.modifyException(aItem, true);</span>
<a href="#l20.41"></a><span id="l20.41">         }</span>
<a href="#l20.42"></a><span id="l20.42">         parentItem.calendar = this.superCalendar;</span>
<a href="#l20.43"></a><span id="l20.43"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -665,17 +665,16 @@ calStorageCalendar.prototype = {</span>
<a href="#l21.4"></a><span id="l21.4">         let this_ = this;</span>
<a href="#l21.5"></a><span id="l21.5">         cal.postPone(function() {</span>
<a href="#l21.6"></a><span id="l21.6">             this_.getItems_(aItemFilter, aCount, aRangeStart, aRangeEnd, aListener);</span>
<a href="#l21.7"></a><span id="l21.7">         });</span>
<a href="#l21.8"></a><span id="l21.8">     },</span>
<a href="#l21.9"></a><span id="l21.9">     getItems_: function cSC_getItems_(aItemFilter, aCount,</span>
<a href="#l21.10"></a><span id="l21.10">                                       aRangeStart, aRangeEnd, aListener)</span>
<a href="#l21.11"></a><span id="l21.11">     {</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-        //var profStartTime = Date.now();</span>
<a href="#l21.13"></a><span id="l21.13">         if (!aListener) {</span>
<a href="#l21.14"></a><span id="l21.14">             return;</span>
<a href="#l21.15"></a><span id="l21.15">         }</span>
<a href="#l21.16"></a><span id="l21.16"> </span>
<a href="#l21.17"></a><span id="l21.17">         let self = this;</span>
<a href="#l21.18"></a><span id="l21.18"> </span>
<a href="#l21.19"></a><span id="l21.19">         let itemsFound = [];</span>
<a href="#l21.20"></a><span id="l21.20">         let startTime = -0x7fffffffffffffff;</span>
<a href="#l21.21"></a><span id="l21.21" class="difflineat">@@ -752,25 +751,21 @@ calStorageCalendar.prototype = {</span>
<a href="#l21.22"></a><span id="l21.22">                 queuedItemsIID = theIID;</span>
<a href="#l21.23"></a><span id="l21.23">             }</span>
<a href="#l21.24"></a><span id="l21.24"> </span>
<a href="#l21.25"></a><span id="l21.25">             if (theItems) {</span>
<a href="#l21.26"></a><span id="l21.26">                 queuedItems = queuedItems.concat(theItems);</span>
<a href="#l21.27"></a><span id="l21.27">             }</span>
<a href="#l21.28"></a><span id="l21.28"> </span>
<a href="#l21.29"></a><span id="l21.29">             if (queuedItems.length != 0 &amp;&amp; (!theItems || queuedItems.length &gt; maxQueueSize)) {</span>
<a href="#l21.30"></a><span id="l21.30" class="difflineminus">-                //var listenerStart = Date.now();</span>
<a href="#l21.31"></a><span id="l21.31">                 aListener.onGetResult(self.superCalendar,</span>
<a href="#l21.32"></a><span id="l21.32">                                       Components.results.NS_OK,</span>
<a href="#l21.33"></a><span id="l21.33">                                       queuedItemsIID, null,</span>
<a href="#l21.34"></a><span id="l21.34">                                       queuedItems.length, queuedItems);</span>
<a href="#l21.35"></a><span id="l21.35" class="difflineminus">-                //var listenerEnd = Date.now();</span>
<a href="#l21.36"></a><span id="l21.36" class="difflineminus">-                //dump (&quot;++++ listener callback took: &quot; + (listenerEnd - listenerStart) + &quot; ms\n&quot;);</span>
<a href="#l21.37"></a><span id="l21.37" class="difflineminus">-</span>
<a href="#l21.38"></a><span id="l21.38" class="difflineminus">-                queuedItems = [ ];</span>
<a href="#l21.39"></a><span id="l21.39" class="difflineplus">+                queuedItems = [];</span>
<a href="#l21.40"></a><span id="l21.40">             }</span>
<a href="#l21.41"></a><span id="l21.41">         }</span>
<a href="#l21.42"></a><span id="l21.42"> </span>
<a href="#l21.43"></a><span id="l21.43">         // helper function to handle converting a row to an item,</span>
<a href="#l21.44"></a><span id="l21.44">         // expanding occurrences, and queue the items for the listener</span>
<a href="#l21.45"></a><span id="l21.45">         function handleResultItem(item, theIID, optionalFilterFunc) {</span>
<a href="#l21.46"></a><span id="l21.46">             let expandedItems = [];</span>
<a href="#l21.47"></a><span id="l21.47">             if (item.recurrenceInfo &amp;&amp; asOccurrences) {</span>
<a href="#l21.48"></a><span id="l21.48" class="difflineat">@@ -946,18 +941,16 @@ calStorageCalendar.prototype = {</span>
<a href="#l21.49"></a><span id="l21.49"> </span>
<a href="#l21.50"></a><span id="l21.50">         // and finish</span>
<a href="#l21.51"></a><span id="l21.51">         this.notifyOperationComplete(aListener,</span>
<a href="#l21.52"></a><span id="l21.52">                                      Components.results.NS_OK,</span>
<a href="#l21.53"></a><span id="l21.53">                                      Components.interfaces.calIOperationListener.GET,</span>
<a href="#l21.54"></a><span id="l21.54">                                      null,</span>
<a href="#l21.55"></a><span id="l21.55">                                      null);</span>
<a href="#l21.56"></a><span id="l21.56"> </span>
<a href="#l21.57"></a><span id="l21.57" class="difflineminus">-        //var profEndTime = Date.now();</span>
<a href="#l21.58"></a><span id="l21.58" class="difflineminus">-        //dump (&quot;++++ getItems took: &quot; + (profEndTime - profStartTime) + &quot; ms\n&quot;);</span>
<a href="#l21.59"></a><span id="l21.59">     },</span>
<a href="#l21.60"></a><span id="l21.60"> </span>
<a href="#l21.61"></a><span id="l21.61">     getItemOfflineFlag: function cSC_getOfflineJournalFlag(aItem, aListener) {</span>
<a href="#l21.62"></a><span id="l21.62">         let flag = null;</span>
<a href="#l21.63"></a><span id="l21.63">         if (!aItem) {</span>
<a href="#l21.64"></a><span id="l21.64">             // It is possible that aItem can be null, flag provided should be null in this case</span>
<a href="#l21.65"></a><span id="l21.65">             aListener.onOperationComplete(this, Components.results.NS_OK,</span>
<a href="#l21.66"></a><span id="l21.66">                                                Components.interfaces.calIOperationListener.GET, null, flag);</span>
<a href="#l21.67"></a><span id="l21.67" class="difflineat">@@ -1359,17 +1352,17 @@ calStorageCalendar.prototype = {</span>
<a href="#l21.68"></a><span id="l21.68">                 + &quot; (cal_id, item_id, value)&quot;</span>
<a href="#l21.69"></a><span id="l21.69">                 + &quot; VALUES (:cal_id, :item_id, :value)&quot;);</span>
<a href="#l21.70"></a><span id="l21.70"> </span>
<a href="#l21.71"></a><span id="l21.71">             this.mInsertAlarm = this.mDB.createStatement(</span>
<a href="#l21.72"></a><span id="l21.72">                 &quot;INSERT INTO cal_alarms &quot; +</span>
<a href="#l21.73"></a><span id="l21.73">                 &quot;  (cal_id, item_id, icalString, recurrence_id, recurrence_id_tz) &quot; +</span>
<a href="#l21.74"></a><span id="l21.74">                 &quot;VALUES  (:cal_id, :item_id, :icalString, :recurrence_id, :recurrence_id_tz)  &quot;</span>
<a href="#l21.75"></a><span id="l21.75">                 );</span>
<a href="#l21.76"></a><span id="l21.76" class="difflineminus">-            //Offline Operations</span>
<a href="#l21.77"></a><span id="l21.77" class="difflineplus">+            // Offline Operations</span>
<a href="#l21.78"></a><span id="l21.78">             this.mEditEventOfflineFlag = this.mDB.createStatement(</span>
<a href="#l21.79"></a><span id="l21.79">                 &quot;UPDATE cal_events SET offline_journal = :offline_journal&quot; +</span>
<a href="#l21.80"></a><span id="l21.80">                 &quot; WHERE id = :id AND cal_id = :cal_id&quot;</span>
<a href="#l21.81"></a><span id="l21.81">             );</span>
<a href="#l21.82"></a><span id="l21.82"> </span>
<a href="#l21.83"></a><span id="l21.83">             this.mEditTodoOfflineFlag = this.mDB.createStatement(</span>
<a href="#l21.84"></a><span id="l21.84">                 &quot;UPDATE cal_todos SET offline_journal = :offline_journal&quot; +</span>
<a href="#l21.85"></a><span id="l21.85">                 &quot; WHERE id = :id AND cal_id = :cal_id&quot;</span>
<a href="#l21.86"></a><span id="l21.86" class="difflineat">@@ -1798,32 +1791,32 @@ calStorageCalendar.prototype = {</span>
<a href="#l21.87"></a><span id="l21.87">             let rec = item.recurrenceInfo;</span>
<a href="#l21.88"></a><span id="l21.88"> </span>
<a href="#l21.89"></a><span id="l21.89">             if (cal.isEvent(item)) {</span>
<a href="#l21.90"></a><span id="l21.90">                 this.mSelectEventExceptions.params.id = item.id;</span>
<a href="#l21.91"></a><span id="l21.91">                 this.prepareStatement(this.mSelectEventExceptions);</span>
<a href="#l21.92"></a><span id="l21.92">                 try {</span>
<a href="#l21.93"></a><span id="l21.93">                     while (this.mSelectEventExceptions.executeStep()) {</span>
<a href="#l21.94"></a><span id="l21.94">                         let row = this.mSelectEventExceptions.row;</span>
<a href="#l21.95"></a><span id="l21.95" class="difflineminus">-                        let exc = this.getEventFromRow(row, {}, true /*isException*/);</span>
<a href="#l21.96"></a><span id="l21.96" class="difflineplus">+                        let exc = this.getEventFromRow(row, {}, true /* isException */);</span>
<a href="#l21.97"></a><span id="l21.97">                         rec.modifyException(exc, true);</span>
<a href="#l21.98"></a><span id="l21.98">                     }</span>
<a href="#l21.99"></a><span id="l21.99">                 } catch (e) {</span>
<a href="#l21.100"></a><span id="l21.100">                     this.logError(&quot;Error getting exceptions for event '&quot; +</span>
<a href="#l21.101"></a><span id="l21.101">                                   item.title + &quot;' (&quot; + item.id + &quot;)!&quot;, e);</span>
<a href="#l21.102"></a><span id="l21.102">                 } finally {</span>
<a href="#l21.103"></a><span id="l21.103">                     this.mSelectEventExceptions.reset();</span>
<a href="#l21.104"></a><span id="l21.104">                 }</span>
<a href="#l21.105"></a><span id="l21.105">             } else if (cal.isToDo(item)) {</span>
<a href="#l21.106"></a><span id="l21.106">                 this.mSelectTodoExceptions.params.id = item.id;</span>
<a href="#l21.107"></a><span id="l21.107">                 this.prepareStatement(this.mSelectTodoExceptions);</span>
<a href="#l21.108"></a><span id="l21.108">                 try {</span>
<a href="#l21.109"></a><span id="l21.109">                     while (this.mSelectTodoExceptions.executeStep()) {</span>
<a href="#l21.110"></a><span id="l21.110">                         let row = this.mSelectTodoExceptions.row;</span>
<a href="#l21.111"></a><span id="l21.111" class="difflineminus">-                        let exc = this.getTodoFromRow(row, {}, true /*isException*/);</span>
<a href="#l21.112"></a><span id="l21.112" class="difflineplus">+                        let exc = this.getTodoFromRow(row, {}, true /* isException */);</span>
<a href="#l21.113"></a><span id="l21.113">                         rec.modifyException(exc, true);</span>
<a href="#l21.114"></a><span id="l21.114">                     }</span>
<a href="#l21.115"></a><span id="l21.115">                 } catch (e) {</span>
<a href="#l21.116"></a><span id="l21.116">                     this.logError(&quot;Error getting exceptions for task '&quot; +</span>
<a href="#l21.117"></a><span id="l21.117">                                   item.title + &quot;' (&quot; + item.id + &quot;)!&quot;, e);</span>
<a href="#l21.118"></a><span id="l21.118">                 } finally {</span>
<a href="#l21.119"></a><span id="l21.119">                     this.mSelectTodoExceptions.reset();</span>
<a href="#l21.120"></a><span id="l21.120">                 }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/calendar/providers/storage/calStorageUpgrade.jsm</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/calendar/providers/storage/calStorageUpgrade.jsm</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -1345,17 +1345,17 @@ upgrade.v19 = function upgrade_v19(db, v</span>
<a href="#l22.4"></a><span id="l22.4">  * Setting a offline_journal column in cal_events tables</span>
<a href="#l22.5"></a><span id="l22.5">  * r=philipp, p=redDragon</span>
<a href="#l22.6"></a><span id="l22.6">  */</span>
<a href="#l22.7"></a><span id="l22.7"> upgrade.v20 = function upgrade_v20(db, version) {</span>
<a href="#l22.8"></a><span id="l22.8">     let tbl = upgrade.v19(version &lt; 19 &amp;&amp; db, version);</span>
<a href="#l22.9"></a><span id="l22.9">     LOGdb(db, &quot;Storage: Upgrading to v20&quot;);</span>
<a href="#l22.10"></a><span id="l22.10">     beginTransaction(db);</span>
<a href="#l22.11"></a><span id="l22.11">     try {</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-        //Adding a offline_journal column</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+        // Adding a offline_journal column</span>
<a href="#l22.14"></a><span id="l22.14">         for (let tblName of [&quot;cal_events&quot;, &quot;cal_todos&quot;]) {</span>
<a href="#l22.15"></a><span id="l22.15">             addColumn(tbl, tblName, [&quot;offline_journal&quot;], &quot;INTEGER&quot;, db);</span>
<a href="#l22.16"></a><span id="l22.16">         }</span>
<a href="#l22.17"></a><span id="l22.17">         setDbVersionAndCommit(db, 20);</span>
<a href="#l22.18"></a><span id="l22.18">     } catch (e) {</span>
<a href="#l22.19"></a><span id="l22.19">         throw reportErrorAndRollback(db, e);</span>
<a href="#l22.20"></a><span id="l22.20">     }</span>
<a href="#l22.21"></a><span id="l22.21">     return tbl;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/calendar/providers/wcap/calWcapCalendar.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/calendar/providers/wcap/calWcapCalendar.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -1,16 +1,24 @@</span>
<a href="#l23.4"></a><span id="l23.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l23.5"></a><span id="l23.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l23.6"></a><span id="l23.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l23.7"></a><span id="l23.7"> </span>
<a href="#l23.8"></a><span id="l23.8"> Components.utils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l23.9"></a><span id="l23.9"> Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l23.10"></a><span id="l23.10"> </span>
<a href="#l23.11"></a><span id="l23.11" class="difflineminus">-function calWcapCalendar(/*optional*/session, /*optional*/calProps) {</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineplus">+/**</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+ * The calendar provider class for WCAP calendars. Usually instanciated through</span>
<a href="#l23.14"></a><span id="l23.14" class="difflineplus">+ * the calendar manager, but may also be created by the wcap session, hence the</span>
<a href="#l23.15"></a><span id="l23.15" class="difflineplus">+ * following optional parameters.</span>
<a href="#l23.16"></a><span id="l23.16" class="difflineplus">+ *</span>
<a href="#l23.17"></a><span id="l23.17" class="difflineplus">+ * @param session       (optional) The calWcapSession for this calendar</span>
<a href="#l23.18"></a><span id="l23.18" class="difflineplus">+ * @param calProps      (optional) The XML node containing the WCAP calendar properties</span>
<a href="#l23.19"></a><span id="l23.19" class="difflineplus">+ */</span>
<a href="#l23.20"></a><span id="l23.20" class="difflineplus">+function calWcapCalendar(session, calProps) {</span>
<a href="#l23.21"></a><span id="l23.21">     this.initProviderBase();</span>
<a href="#l23.22"></a><span id="l23.22">     this.m_session = session;</span>
<a href="#l23.23"></a><span id="l23.23">     this.m_calProps = calProps;</span>
<a href="#l23.24"></a><span id="l23.24"> }</span>
<a href="#l23.25"></a><span id="l23.25"> var calWcapCalendarClassID = Components.ID(&quot;{cf4d93e5-af79-451a-95f3-109055b32ef0}&quot;);</span>
<a href="#l23.26"></a><span id="l23.26"> var calWcapCalendarInterfaces = [</span>
<a href="#l23.27"></a><span id="l23.27">     calIWcapCalendar,</span>
<a href="#l23.28"></a><span id="l23.28">     calICalendar,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/calendar/providers/wcap/calWcapErrors.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/calendar/providers/wcap/calWcapErrors.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -63,47 +63,47 @@ var g_nsNetErrorCodes = [</span>
<a href="#l24.4"></a><span id="l24.4">     NS_BINDING_FAILED,</span>
<a href="#l24.5"></a><span id="l24.5">     &quot;The async request failed for some unknown reason.&quot;,</span>
<a href="#l24.6"></a><span id="l24.6">     NS_BINDING_ABORTED,</span>
<a href="#l24.7"></a><span id="l24.7">     &quot;The async request failed because it was aborted by some user action.&quot;,</span>
<a href="#l24.8"></a><span id="l24.8">     NS_BINDING_REDIRECTED,</span>
<a href="#l24.9"></a><span id="l24.9">     &quot;The async request has been redirected to a different async request.&quot;,</span>
<a href="#l24.10"></a><span id="l24.10">     NS_BINDING_RETARGETED,</span>
<a href="#l24.11"></a><span id="l24.11">     &quot;The async request has been retargeted to a different handler.&quot;,</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-    /*NS_ERROR_MALFORMED_URI*/ generateNetFailure(10),</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+    /* NS_ERROR_MALFORMED_URI */ generateNetFailure(10),</span>
<a href="#l24.14"></a><span id="l24.14">     &quot;The URI is malformed.&quot;,</span>
<a href="#l24.15"></a><span id="l24.15" class="difflineminus">-    /*NS_ERROR_UNKNOWN_PROTOCOL*/ generateNetFailure(18),</span>
<a href="#l24.16"></a><span id="l24.16" class="difflineplus">+    /* NS_ERROR_UNKNOWN_PROTOCOL */ generateNetFailure(18),</span>
<a href="#l24.17"></a><span id="l24.17">     &quot;The URI scheme corresponds to an unknown protocol handler.&quot;,</span>
<a href="#l24.18"></a><span id="l24.18" class="difflineminus">-    /*NS_ERROR_CONNECTION_REFUSED*/ generateNetFailure(13),</span>
<a href="#l24.19"></a><span id="l24.19" class="difflineplus">+    /* NS_ERROR_CONNECTION_REFUSED */ generateNetFailure(13),</span>
<a href="#l24.20"></a><span id="l24.20">     &quot;The connection attempt failed, for example, because no server was listening at specified host:port.&quot;,</span>
<a href="#l24.21"></a><span id="l24.21" class="difflineminus">-    /*NS_ERROR_PROXY_CONNECTION_REFUSED*/ generateNetFailure(72),</span>
<a href="#l24.22"></a><span id="l24.22" class="difflineplus">+    /* NS_ERROR_PROXY_CONNECTION_REFUSED */ generateNetFailure(72),</span>
<a href="#l24.23"></a><span id="l24.23">     &quot;The connection attempt to a proxy failed.&quot;,</span>
<a href="#l24.24"></a><span id="l24.24" class="difflineminus">-    /*NS_ERROR_NET_TIMEOUT*/ generateNetFailure(14),</span>
<a href="#l24.25"></a><span id="l24.25" class="difflineplus">+    /* NS_ERROR_NET_TIMEOUT */ generateNetFailure(14),</span>
<a href="#l24.26"></a><span id="l24.26">     &quot;The connection was lost due to a timeout error.&quot;,</span>
<a href="#l24.27"></a><span id="l24.27">     NS_ERROR_OFFLINE,</span>
<a href="#l24.28"></a><span id="l24.28">     &quot;The requested action could not be completed while the networking library is in the offline state.&quot;,</span>
<a href="#l24.29"></a><span id="l24.29" class="difflineminus">-    /*NS_ERROR_PORT_ACCESS_NOT_ALLOWED*/ generateNetFailure(19),</span>
<a href="#l24.30"></a><span id="l24.30" class="difflineplus">+    /* NS_ERROR_PORT_ACCESS_NOT_ALLOWED */ generateNetFailure(19),</span>
<a href="#l24.31"></a><span id="l24.31">     &quot;The requested action was prohibited because it would have caused the networking library to establish a connection to an unsafe or otherwise banned port.&quot;,</span>
<a href="#l24.32"></a><span id="l24.32" class="difflineminus">-    /*NS_ERROR_NET_RESET*/ generateNetFailure(20),</span>
<a href="#l24.33"></a><span id="l24.33" class="difflineplus">+    /* NS_ERROR_NET_RESET */ generateNetFailure(20),</span>
<a href="#l24.34"></a><span id="l24.34">     &quot;The connection was established, but no data was ever received.&quot;,</span>
<a href="#l24.35"></a><span id="l24.35" class="difflineminus">-    /*NS_ERROR_NET_INTERRUPT*/ generateNetFailure(71),</span>
<a href="#l24.36"></a><span id="l24.36" class="difflineplus">+    /* NS_ERROR_NET_INTERRUPT */ generateNetFailure(71),</span>
<a href="#l24.37"></a><span id="l24.37">     &quot;The connection was established, but the data transfer was interrupted.&quot;,</span>
<a href="#l24.38"></a><span id="l24.38" class="difflineminus">-    /*NS_ERROR_NOT_RESUMABLE*/ generateNetFailure(25),</span>
<a href="#l24.39"></a><span id="l24.39" class="difflineplus">+    /* NS_ERROR_NOT_RESUMABLE */ generateNetFailure(25),</span>
<a href="#l24.40"></a><span id="l24.40">     &quot;This request is not resumable, but it was tried to resume it, or to request resume-specific data.&quot;,</span>
<a href="#l24.41"></a><span id="l24.41" class="difflineminus">-    /*NS_ERROR_ENTITY_CHANGED*/ generateNetFailure(32),</span>
<a href="#l24.42"></a><span id="l24.42" class="difflineplus">+    /* NS_ERROR_ENTITY_CHANGED */ generateNetFailure(32),</span>
<a href="#l24.43"></a><span id="l24.43">     &quot;It was attempted to resume the request, but the entity has changed in the meantime.&quot;,</span>
<a href="#l24.44"></a><span id="l24.44" class="difflineminus">-    /*NS_ERROR_REDIRECT_LOOP*/ generateNetFailure(31),</span>
<a href="#l24.45"></a><span id="l24.45" class="difflineplus">+    /* NS_ERROR_REDIRECT_LOOP */ generateNetFailure(31),</span>
<a href="#l24.46"></a><span id="l24.46">     &quot;The request failed as a result of a detected redirection loop.&quot;,</span>
<a href="#l24.47"></a><span id="l24.47" class="difflineminus">-    /*NS_ERROR_UNKNOWN_HOST*/ generateNetFailure(30),</span>
<a href="#l24.48"></a><span id="l24.48" class="difflineplus">+    /* NS_ERROR_UNKNOWN_HOST */ generateNetFailure(30),</span>
<a href="#l24.49"></a><span id="l24.49">     &quot;The lookup of a hostname failed. This generally refers to the hostname from the URL being loaded.&quot;,</span>
<a href="#l24.50"></a><span id="l24.50" class="difflineminus">-    /*NS_ERROR_UNKNOWN_PROXY_HOST*/ generateNetFailure(42),</span>
<a href="#l24.51"></a><span id="l24.51" class="difflineplus">+    /* NS_ERROR_UNKNOWN_PROXY_HOST */ generateNetFailure(42),</span>
<a href="#l24.52"></a><span id="l24.52">     &quot;The lookup of a proxy hostname failed.&quot;,</span>
<a href="#l24.53"></a><span id="l24.53" class="difflineminus">-    /*NS_ERROR_UNKNOWN_SOCKET_TYPE*/ generateNetFailure(51),</span>
<a href="#l24.54"></a><span id="l24.54" class="difflineplus">+    /* NS_ERROR_UNKNOWN_SOCKET_TYPE */ generateNetFailure(51),</span>
<a href="#l24.55"></a><span id="l24.55">     &quot;The specified socket type does not exist.&quot;,</span>
<a href="#l24.56"></a><span id="l24.56" class="difflineminus">-    /*NS_ERROR_SOCKET_CREATE_FAILED*/ generateNetFailure(52),</span>
<a href="#l24.57"></a><span id="l24.57" class="difflineplus">+    /* NS_ERROR_SOCKET_CREATE_FAILED */ generateNetFailure(52),</span>
<a href="#l24.58"></a><span id="l24.58">     &quot;The specified socket type could not be created.&quot;</span>
<a href="#l24.59"></a><span id="l24.59">     ];</span>
<a href="#l24.60"></a><span id="l24.60"> </span>
<a href="#l24.61"></a><span id="l24.61"> function netErrorToString(rc) {</span>
<a href="#l24.62"></a><span id="l24.62">     if (!isNaN(rc) &amp;&amp; getErrorModule(rc) == NS_ERROR_MODULE_NETWORK) {</span>
<a href="#l24.63"></a><span id="l24.63">         var i = 0;</span>
<a href="#l24.64"></a><span id="l24.64">         while (i &lt; g_nsNetErrorCodes.length) {</span>
<a href="#l24.65"></a><span id="l24.65">             // however rc is kept unsigned, our generated code signed,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/calendar/resources/content/datetimepickers/datetimepickers.xml</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/calendar/resources/content/datetimepickers/datetimepickers.xml</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -1663,17 +1663,17 @@</span>
<a href="#l25.4"></a><span id="l25.4">                 if (time != null) {</span>
<a href="#l25.5"></a><span id="l25.5">                   hours = time.getHours();</span>
<a href="#l25.6"></a><span id="l25.6">                   minutes = time.getMinutes();</span>
<a href="#l25.7"></a><span id="l25.7">                   seconds = time.getSeconds();</span>
<a href="#l25.8"></a><span id="l25.8">                   this.mLastDateParseIncludedTime = true;</span>
<a href="#l25.9"></a><span id="l25.9">                 }</span>
<a href="#l25.10"></a><span id="l25.10">               }</span>
<a href="#l25.11"></a><span id="l25.11">               tempDate = new Date(year, month, day, hours, minutes, seconds, 0);</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-            } //else did not match regex, not a valid date</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+            } // else did not match regex, not a valid date</span>
<a href="#l25.14"></a><span id="l25.14">             return tempDate;</span>
<a href="#l25.15"></a><span id="l25.15">           ]]&gt;</span>
<a href="#l25.16"></a><span id="l25.16">         &lt;/body&gt;</span>
<a href="#l25.17"></a><span id="l25.17">       &lt;/method&gt;</span>
<a href="#l25.18"></a><span id="l25.18"> </span>
<a href="#l25.19"></a><span id="l25.19">       &lt;!-- Parse a variety of time formats so that cut and paste is likely to work.</span>
<a href="#l25.20"></a><span id="l25.20">            separator:            ':'         '.'        ' '        symbol        none</span>
<a href="#l25.21"></a><span id="l25.21">                                  &quot;12:34:56&quot;  &quot;12.34.56&quot; &quot;12 34 56&quot; &quot;12h34m56s&quot;   &quot;123456&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/calendar/resources/content/publishDialog.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/calendar/resources/content/publishDialog.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -1,30 +1,18 @@</span>
<a href="#l26.4"></a><span id="l26.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l26.5"></a><span id="l26.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l26.6"></a><span id="l26.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l26.7"></a><span id="l26.7"> </span>
<a href="#l26.8"></a><span id="l26.8" class="difflineminus">-</span>
<a href="#l26.9"></a><span id="l26.9" class="difflineminus">-</span>
<a href="#l26.10"></a><span id="l26.10" class="difflineminus">-/*-----------------------------------------------------------------</span>
<a href="#l26.11"></a><span id="l26.11" class="difflineminus">-*   W I N D O W      V A R I A B L E S</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-*/</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineminus">-</span>
<a href="#l26.14"></a><span id="l26.14" class="difflineminus">-</span>
<a href="#l26.15"></a><span id="l26.15"> var gOnOkFunction;   // function to be called when user clicks OK</span>
<a href="#l26.16"></a><span id="l26.16"> var gPublishObject;</span>
<a href="#l26.17"></a><span id="l26.17"> </span>
<a href="#l26.18"></a><span id="l26.18" class="difflineminus">-/*-----------------------------------------------------------------</span>
<a href="#l26.19"></a><span id="l26.19" class="difflineminus">-*   W I N D O W      F U N C T I O N S</span>
<a href="#l26.20"></a><span id="l26.20" class="difflineminus">-*/</span>
<a href="#l26.21"></a><span id="l26.21" class="difflineminus">-</span>
<a href="#l26.22"></a><span id="l26.22"> /**</span>
<a href="#l26.23"></a><span id="l26.23"> *   Called when the dialog is loaded.</span>
<a href="#l26.24"></a><span id="l26.24"> */</span>
<a href="#l26.25"></a><span id="l26.25" class="difflineminus">-</span>
<a href="#l26.26"></a><span id="l26.26"> function loadCalendarPublishDialog()</span>
<a href="#l26.27"></a><span id="l26.27"> {</span>
<a href="#l26.28"></a><span id="l26.28">    // Get arguments, see description at top of file</span>
<a href="#l26.29"></a><span id="l26.29"> </span>
<a href="#l26.30"></a><span id="l26.30">    var args = window.arguments[0];</span>
<a href="#l26.31"></a><span id="l26.31"> </span>
<a href="#l26.32"></a><span id="l26.32">    gOnOkFunction = args.onOk;</span>
<a href="#l26.33"></a><span id="l26.33"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -130,18 +130,16 @@ var testEventDialogModificationPrompt = </span>
<a href="#l27.4"></a><span id="l27.4">     md.start(handleSavePrompt);</span>
<a href="#l27.5"></a><span id="l27.5">     event.keypress(undefined, &quot;VK_ESCAPE&quot;, {});</span>
<a href="#l27.6"></a><span id="l27.6">     controller.sleep(sleep);</span>
<a href="#l27.7"></a><span id="l27.7">     md.stop();</span>
<a href="#l27.8"></a><span id="l27.8"> </span>
<a href="#l27.9"></a><span id="l27.9">     // delete it</span>
<a href="#l27.10"></a><span id="l27.10">     // XXX somehow the event is selected at this point, this didn't use to be the case</span>
<a href="#l27.11"></a><span id="l27.11">     // and can't be reproduced manually</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-    /*controller.click(new elementslib.Lookup(controller.window.document,</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineminus">-      calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, 8)));*/</span>
<a href="#l27.14"></a><span id="l27.14">     controller.keypress(new elementslib.ID(controller.window.document, &quot;day-view&quot;),</span>
<a href="#l27.15"></a><span id="l27.15">       &quot;VK_DELETE&quot;, {});</span>
<a href="#l27.16"></a><span id="l27.16">     controller.waitForElementNotPresent(new elementslib.Lookup(controller.window.document,</span>
<a href="#l27.17"></a><span id="l27.17">       calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, 8)));</span>
<a href="#l27.18"></a><span id="l27.18">   }</span>
<a href="#l27.19"></a><span id="l27.19"> }</span>
<a href="#l27.20"></a><span id="l27.20"> </span>
<a href="#l27.21"></a><span id="l27.21"> var teardownTest = function(module) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/calendar/test/unit/test_items.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/calendar/test/unit/test_items.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -254,17 +254,17 @@ function test_immutable() {</span>
<a href="#l28.4"></a><span id="l28.4"> </span>
<a href="#l28.5"></a><span id="l28.5"> function test_lastack() {</span>
<a href="#l28.6"></a><span id="l28.6"> </span>
<a href="#l28.7"></a><span id="l28.7">     let e = cal.createEvent();</span>
<a href="#l28.8"></a><span id="l28.8"> </span>
<a href="#l28.9"></a><span id="l28.9">     e.alarmLastAck = cal.createDateTime(&quot;20120101T010101&quot;);</span>
<a href="#l28.10"></a><span id="l28.10"> </span>
<a href="#l28.11"></a><span id="l28.11">     // Our items don't support this yet</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-    //equal(e.getProperty(&quot;X-MOZ-LASTACK&quot;), &quot;20120101T010101&quot;);</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+    //  equal(e.getProperty(&quot;X-MOZ-LASTACK&quot;), &quot;20120101T010101&quot;);</span>
<a href="#l28.14"></a><span id="l28.14"> </span>
<a href="#l28.15"></a><span id="l28.15">     let comp = e.icalComponent;</span>
<a href="#l28.16"></a><span id="l28.16">     let prop = comp.getFirstProperty(&quot;X-MOZ-LASTACK&quot;);</span>
<a href="#l28.17"></a><span id="l28.17"> </span>
<a href="#l28.18"></a><span id="l28.18">     equal(prop.value, &quot;20120101T010101Z&quot;);</span>
<a href="#l28.19"></a><span id="l28.19"> </span>
<a href="#l28.20"></a><span id="l28.20">     prop.value = &quot;20120101T010102Z&quot;;</span>
<a href="#l28.21"></a><span id="l28.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/calendar/test/unit/test_recur.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/calendar/test/unit/test_recur.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -28,17 +28,17 @@ function test_rules() {</span>
<a href="#l29.4"></a><span id="l29.4">         let start = createDate(1990, 0, 1);</span>
<a href="#l29.5"></a><span id="l29.5">         let end = createDate(2020, 0, 1);</span>
<a href="#l29.6"></a><span id="l29.6">         let recdates = event.recurrenceInfo.getOccurrenceDates(start, end, 0, {});</span>
<a href="#l29.7"></a><span id="l29.7">         let occurrences = event.recurrenceInfo.getOccurrences(start, end, 0, {});</span>
<a href="#l29.8"></a><span id="l29.8"> </span>
<a href="#l29.9"></a><span id="l29.9">         // Check number of items</span>
<a href="#l29.10"></a><span id="l29.10">         dump(&quot;Expected &quot; + expected.length + &quot; occurrences\n&quot;);</span>
<a href="#l29.11"></a><span id="l29.11">         dump(&quot;Got: &quot; + recdates.map(x =&gt; x.toString()) + &quot;\n&quot;);</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-        //equal(recdates.length, expected.length);</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+        equal(recdates.length, expected.length);</span>
<a href="#l29.14"></a><span id="l29.14">         let fmt = cal.getDateFormatter();</span>
<a href="#l29.15"></a><span id="l29.15"> </span>
<a href="#l29.16"></a><span id="l29.16">         for (let i = 0; i &lt; expected.length; i++) {</span>
<a href="#l29.17"></a><span id="l29.17">             // Check each date</span>
<a href="#l29.18"></a><span id="l29.18">             let ed = cal.createDateTime(expected[i]);</span>
<a href="#l29.19"></a><span id="l29.19">             dump(&quot;Expecting instance at &quot; + ed + &quot;(&quot; + fmt.dayName(ed.weekday) + &quot;)\n&quot;);</span>
<a href="#l29.20"></a><span id="l29.20">             dump(&quot;Recdate:&quot;);</span>
<a href="#l29.21"></a><span id="l29.21">             equal(recdates[i].icalString, expected[i]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/calendar/test/unit/test_timezone_definition.js</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/calendar/test/unit/test_timezone_definition.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -10,23 +10,23 @@ function run_test() {</span>
<a href="#l30.4"></a><span id="l30.4">  * Checks whether the pased string is a valid tz version number</span>
<a href="#l30.5"></a><span id="l30.5">  * @param    {String}         aVersionString</span>
<a href="#l30.6"></a><span id="l30.6">  * @returns  {boolean}</span>
<a href="#l30.7"></a><span id="l30.7">  */</span>
<a href="#l30.8"></a><span id="l30.8"> function valid_tz_version(aVersionString) {</span>
<a href="#l30.9"></a><span id="l30.9">     return (aVersionString.match(/^2\.(\d{4})(z*[a-z])$/));</span>
<a href="#l30.10"></a><span id="l30.10"> }</span>
<a href="#l30.11"></a><span id="l30.11"> </span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-//check tz database version</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+// check tz database version</span>
<a href="#l30.14"></a><span id="l30.14"> add_task(function* version_test() {</span>
<a href="#l30.15"></a><span id="l30.15">     let tzs = cal.getTimezoneService();</span>
<a href="#l30.16"></a><span id="l30.16">     ok(valid_tz_version(tzs.version), &quot;timezone version&quot;);</span>
<a href="#l30.17"></a><span id="l30.17"> });</span>
<a href="#l30.18"></a><span id="l30.18"> </span>
<a href="#l30.19"></a><span id="l30.19" class="difflineminus">-//check whether all tz definitions have all properties</span>
<a href="#l30.20"></a><span id="l30.20" class="difflineplus">+// check whether all tz definitions have all properties</span>
<a href="#l30.21"></a><span id="l30.21"> add_task(function* zone_test() {</span>
<a href="#l30.22"></a><span id="l30.22">     function resolveZone(aZoneId) {</span>
<a href="#l30.23"></a><span id="l30.23">         let tz = tzs.getTimezone(aZoneId);</span>
<a href="#l30.24"></a><span id="l30.24">         equal(aZoneId, tz.tzid, &quot;Zone test &quot; + aZoneId);</span>
<a href="#l30.25"></a><span id="l30.25">         ok(tz.icalComponent.serializeToICS().startsWith(&quot;BEGIN:VTIMEZONE&quot;),</span>
<a href="#l30.26"></a><span id="l30.26">            &quot;VTIMEZONE test &quot; + aZoneId);</span>
<a href="#l30.27"></a><span id="l30.27">         ok(tz.latitude &amp;&amp; !!tz.latitude.match(/^[+-]\d{7}$/), &quot;Latitude test &quot; + aZoneId);</span>
<a href="#l30.28"></a><span id="l30.28">         ok(tz.longitude &amp;&amp; !!tz.longitude.match(/^[+-]\d{7}$/), &quot;Longitude test &quot; + aZoneId);</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

