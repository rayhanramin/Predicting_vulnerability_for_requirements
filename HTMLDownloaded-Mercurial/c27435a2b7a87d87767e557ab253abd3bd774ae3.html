<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 19663:c27435a2b7a87d87767e557ab253abd3bd774ae3</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ c27435a2b7a87d87767e557ab253abd3bd774ae3" />
<meta property="og:url" content="/comm-central/rev/c27435a2b7a87d87767e557ab253abd3bd774ae3" />
<meta property="og:description" content="Bug 913855.  Fix consumers of window mediator to be more consistent in their checking for closed windows.  r=dolske" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / c27435a2b7a87d87767e557ab253abd3bd774ae3 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/c27435a2b7a87d87767e557ab253abd3bd774ae3">shortlog</a> |
<a href="/comm-central/log/c27435a2b7a87d87767e557ab253abd3bd774ae3">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/c27435a2b7a87d87767e557ab253abd3bd774ae3">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/c27435a2b7a87d87767e557ab253abd3bd774ae3">files</a> |
changeset |
<a href="/comm-central/raw-rev/c27435a2b7a87d87767e557ab253abd3bd774ae3">raw</a>  | <a href="/comm-central/archive/c27435a2b7a87d87767e557ab253abd3bd774ae3.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=913855">Bug 913855</a>.  Fix consumers of window mediator to be more consistent in their checking for closed windows.  r=dolske
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#66;&#111;&#114;&#105;&#115;&#32;&#90;&#98;&#97;&#114;&#115;&#107;&#121;&#32;&#60;&#98;&#122;&#98;&#97;&#114;&#115;&#107;&#121;&#64;&#109;&#105;&#116;&#46;&#101;&#100;&#117;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 13 Sep 2013 17:29:51 -0400</td></tr>

<tr>
 <td>changeset 19663</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/c27435a2b7a87d87767e557ab253abd3bd774ae3">c27435a2b7a87d87767e557ab253abd3bd774ae3</a></td>
</tr>



<tr>
<td>parent 19662</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/a2fa736a130c3de5df82902d72d48f53d16a43e9">a2fa736a130c3de5df82902d72d48f53d16a43e9</a>
</td>
</tr>

<tr>
<td>child 19664</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/321c9d6eaae0d45fa50d8c335b236f4a20de0cf0">321c9d6eaae0d45fa50d8c335b236f4a20de0cf0</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=c27435a2b7a87d87767e557ab253abd3bd774ae3">12109</a></td></tr>
<tr><td>push user</td><td>iann_cvs@blueyonder.co.uk</td></tr>
<tr><td>push date</td><td class="date age">Tue, 26 Jul 2016 05:53:41 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@376136cbab3b [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=376136cbab3b7228e99ced19abdaa12292c781c7">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=376136cbab3b7228e99ced19abdaa12292c781c7&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=376136cbab3b7228e99ced19abdaa12292c781c7&newProject=comm-central&newRevision=9b3fd23abcf9f4eb33dbb757645e0679887c5804&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=376136cbab3b7228e99ced19abdaa12292c781c7&newProject=comm-central&newRevision=9b3fd23abcf9f4eb33dbb757645e0679887c5804&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=376136cbab3b7228e99ced19abdaa12292c781c7&newProject=comm-central&newRevision=9b3fd23abcf9f4eb33dbb757645e0679887c5804&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28dolske%29&revcount=50">dolske</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=913855">913855</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=913855">Bug 913855</a>.  Fix consumers of window mediator to be more consistent in their checking for closed windows.  r=dolske

Note that we can't just stop returning closed windows from the window
mediator, because some consumers (e.g. session restore) rely on seeing
closed windows in the list so they can remove them from their internal
data structures expeditiouly.</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c27435a2b7a87d87767e557ab253abd3bd774ae3/suite/common/helpviewer/contextHelp.js">suite/common/helpviewer/contextHelp.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c27435a2b7a87d87767e557ab253abd3bd774ae3/suite/common/helpviewer/contextHelp.js">file</a> |
<a href="/comm-central/annotate/c27435a2b7a87d87767e557ab253abd3bd774ae3/suite/common/helpviewer/contextHelp.js">annotate</a> |
<a href="/comm-central/diff/c27435a2b7a87d87767e557ab253abd3bd774ae3/suite/common/helpviewer/contextHelp.js">diff</a> |
<a href="/comm-central/comparison/c27435a2b7a87d87767e557ab253abd3bd774ae3/suite/common/helpviewer/contextHelp.js">comparison</a> |
<a href="/comm-central/log/c27435a2b7a87d87767e557ab253abd3bd774ae3/suite/common/helpviewer/contextHelp.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/suite/common/helpviewer/contextHelp.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/suite/common/helpviewer/contextHelp.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -56,14 +56,14 @@ function locateHelpWindow(contentPack) {</span>
<a href="#l1.4"></a><span id="l1.4">     const iterator = windowManagerInterface.getEnumerator(&quot;mozilla:help&quot;);</span>
<a href="#l1.5"></a><span id="l1.5">     var topWindow = null;</span>
<a href="#l1.6"></a><span id="l1.6">     var aWindow;</span>
<a href="#l1.7"></a><span id="l1.7"> </span>
<a href="#l1.8"></a><span id="l1.8"> # Loop through help windows looking for one with selected content</span>
<a href="#l1.9"></a><span id="l1.9"> # pack.</span>
<a href="#l1.10"></a><span id="l1.10">     while (iterator.hasMoreElements()) {</span>
<a href="#l1.11"></a><span id="l1.11">         aWindow = iterator.getNext();</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-        if (aWindow.getHelpFileURI() == contentPack) {</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+        if (!aWindow.closed &amp;&amp; aWindow.getHelpFileURI() == contentPack) {</span>
<a href="#l1.14"></a><span id="l1.14">             topWindow = aWindow;</span>
<a href="#l1.15"></a><span id="l1.15">         }</span>
<a href="#l1.16"></a><span id="l1.16">     }</span>
<a href="#l1.17"></a><span id="l1.17">     return topWindow;</span>
<a href="#l1.18"></a><span id="l1.18"> }</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

