<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 26490:38fad21bebd40aa70254dc22b8f6864d2751c177</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 38fad21bebd40aa70254dc22b8f6864d2751c177" />
<meta property="og:url" content="/comm-central/rev/38fad21bebd40aa70254dc22b8f6864d2751c177" />
<meta property="og:description" content="Bug 1510571 - clean up some includes of nsMsgMessageFlags.h and use of Ci.nsMsgMessageFlags. r=jorgk" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 38fad21bebd40aa70254dc22b8f6864d2751c177 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/38fad21bebd40aa70254dc22b8f6864d2751c177">shortlog</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/38fad21bebd40aa70254dc22b8f6864d2751c177">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177">files</a> |
changeset |
<a href="/comm-central/raw-rev/38fad21bebd40aa70254dc22b8f6864d2751c177">raw</a>  | <a href="/comm-central/archive/38fad21bebd40aa70254dc22b8f6864d2751c177.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1510571">Bug 1510571</a> - clean up some includes of nsMsgMessageFlags.h and use of Ci.nsMsgMessageFlags. r=jorgk
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#97;&#99;&#101;&#109;&#97;&#110;&#32;&#60;&#97;&#99;&#101;&#108;&#105;&#115;&#116;&#115;&#64;&#97;&#116;&#108;&#97;&#115;&#46;&#115;&#107;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 01 May 2019 19:25:34 +0200</td></tr>

<tr>
 <td>changeset 26490</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/38fad21bebd40aa70254dc22b8f6864d2751c177">38fad21bebd40aa70254dc22b8f6864d2751c177</a></td>
</tr>



<tr>
<td>parent 26489</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/547dab7a9234941e282c7965b67fa43446bea376">547dab7a9234941e282c7965b67fa43446bea376</a>
</td>
</tr>

<tr>
<td>child 26491</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/52dffc60462b03fa6874d6ba19676b15833e80f5">52dffc60462b03fa6874d6ba19676b15833e80f5</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=38fad21bebd40aa70254dc22b8f6864d2751c177">15859</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Wed, 01 May 2019 17:27:02 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@52dffc60462b [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=52dffc60462b03fa6874d6ba19676b15833e80f5">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=52dffc60462b03fa6874d6ba19676b15833e80f5&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=52dffc60462b03fa6874d6ba19676b15833e80f5&newProject=comm-central&newRevision=38fad21bebd40aa70254dc22b8f6864d2751c177&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=52dffc60462b03fa6874d6ba19676b15833e80f5&newProject=comm-central&newRevision=38fad21bebd40aa70254dc22b8f6864d2751c177&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=52dffc60462b03fa6874d6ba19676b15833e80f5&newProject=comm-central&newRevision=38fad21bebd40aa70254dc22b8f6864d2751c177&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28jorgk%29&revcount=50">jorgk</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1510571">1510571</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1510571">Bug 1510571</a> - clean up some includes of nsMsgMessageFlags.h and use of Ci.nsMsgMessageFlags. r=jorgk</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mail/test/mozmill/folder-display/test-message-commands-on-msgstore.js">mail/test/mozmill/folder-display/test-message-commands-on-msgstore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mail/test/mozmill/folder-display/test-message-commands-on-msgstore.js">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mail/test/mozmill/folder-display/test-message-commands-on-msgstore.js">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mail/test/mozmill/folder-display/test-message-commands-on-msgstore.js">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mail/test/mozmill/folder-display/test-message-commands-on-msgstore.js">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mail/test/mozmill/folder-display/test-message-commands-on-msgstore.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgCompose.cpp">mailnews/compose/src/nsMsgCompose.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgCompose.cpp">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgCompose.cpp">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgCompose.cpp">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgCompose.cpp">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgCompose.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgCopy.cpp">mailnews/compose/src/nsMsgCopy.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgCopy.cpp">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgCopy.cpp">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgCopy.cpp">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgCopy.cpp">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgCopy.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgSend.cpp">mailnews/compose/src/nsMsgSend.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgSend.cpp">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgSend.cpp">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgSend.cpp">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgSend.cpp">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgSend.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgSend.h">mailnews/compose/src/nsMsgSend.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgSend.h">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgSend.h">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgSend.h">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgSend.h">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgSend.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgSendLater.cpp">mailnews/compose/src/nsMsgSendLater.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgSendLater.cpp">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgSendLater.cpp">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgSendLater.cpp">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgSendLater.cpp">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/compose/src/nsMsgSendLater.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/gloda/modules/explattr.js">mailnews/db/gloda/modules/explattr.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/gloda/modules/explattr.js">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/gloda/modules/explattr.js">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/gloda/modules/explattr.js">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/gloda/modules/explattr.js">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/gloda/modules/explattr.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/public/nsMailDatabase.h">mailnews/db/msgdb/public/nsMailDatabase.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/public/nsMailDatabase.h">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/public/nsMailDatabase.h">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/public/nsMailDatabase.h">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/public/nsMailDatabase.h">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/public/nsMailDatabase.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsImapMailDatabase.cpp">mailnews/db/msgdb/src/nsImapMailDatabase.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsImapMailDatabase.cpp">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsImapMailDatabase.cpp">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsImapMailDatabase.cpp">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsImapMailDatabase.cpp">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsImapMailDatabase.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsMsgHdr.cpp">mailnews/db/msgdb/src/nsMsgHdr.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsMsgHdr.cpp">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsMsgHdr.cpp">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsMsgHdr.cpp">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsMsgHdr.cpp">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsMsgHdr.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsMsgThread.cpp">mailnews/db/msgdb/src/nsMsgThread.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsMsgThread.cpp">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsMsgThread.cpp">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsMsgThread.cpp">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsMsgThread.cpp">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsMsgThread.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsNewsDatabase.cpp">mailnews/db/msgdb/src/nsNewsDatabase.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsNewsDatabase.cpp">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsNewsDatabase.cpp">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsNewsDatabase.cpp">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsNewsDatabase.cpp">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/db/msgdb/src/nsNewsDatabase.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/src/nsImapOfflineSync.cpp">mailnews/imap/src/nsImapOfflineSync.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/src/nsImapOfflineSync.cpp">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/src/nsImapOfflineSync.cpp">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/src/nsImapOfflineSync.cpp">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/src/nsImapOfflineSync.cpp">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/src/nsImapOfflineSync.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/TestImapFlagAndUidState.cpp">mailnews/imap/test/TestImapFlagAndUidState.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/TestImapFlagAndUidState.cpp">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/TestImapFlagAndUidState.cpp">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/TestImapFlagAndUidState.cpp">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/TestImapFlagAndUidState.cpp">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/TestImapFlagAndUidState.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/TestImapHdrXferInfo.cpp">mailnews/imap/test/TestImapHdrXferInfo.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/TestImapHdrXferInfo.cpp">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/TestImapHdrXferInfo.cpp">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/TestImapHdrXferInfo.cpp">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/TestImapHdrXferInfo.cpp">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/TestImapHdrXferInfo.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_gmailOfflineMsgStore.js">mailnews/imap/test/unit/test_gmailOfflineMsgStore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_gmailOfflineMsgStore.js">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_gmailOfflineMsgStore.js">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_gmailOfflineMsgStore.js">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_gmailOfflineMsgStore.js">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_gmailOfflineMsgStore.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_imapHdrStreaming.js">mailnews/imap/test/unit/test_imapHdrStreaming.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_imapHdrStreaming.js">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_imapHdrStreaming.js">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_imapHdrStreaming.js">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_imapHdrStreaming.js">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_imapHdrStreaming.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">mailnews/imap/test/unit/test_imapStoreMsgOffline.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_offlineCopy.js">mailnews/imap/test/unit/test_offlineCopy.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_offlineCopy.js">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_offlineCopy.js">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_offlineCopy.js">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_offlineCopy.js">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/imap/test/unit/test_offlineCopy.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/local/src/nsMailboxProtocol.cpp">mailnews/local/src/nsMailboxProtocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/local/src/nsMailboxProtocol.cpp">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/local/src/nsMailboxProtocol.cpp">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/local/src/nsMailboxProtocol.cpp">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/local/src/nsMailboxProtocol.cpp">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/local/src/nsMailboxProtocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/local/src/nsMsgBrkMBoxStore.cpp">mailnews/local/src/nsMsgBrkMBoxStore.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/local/src/nsMsgBrkMBoxStore.cpp">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/local/src/nsMsgBrkMBoxStore.cpp">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/local/src/nsMsgBrkMBoxStore.cpp">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/local/src/nsMsgBrkMBoxStore.cpp">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/local/src/nsMsgBrkMBoxStore.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/local/src/nsPop3Sink.cpp">mailnews/local/src/nsPop3Sink.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/local/src/nsPop3Sink.cpp">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/local/src/nsPop3Sink.cpp">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/local/src/nsPop3Sink.cpp">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/local/src/nsPop3Sink.cpp">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/local/src/nsPop3Sink.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/mime/src/mimehdrs.cpp">mailnews/mime/src/mimehdrs.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/mime/src/mimehdrs.cpp">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/mime/src/mimehdrs.cpp">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/mime/src/mimehdrs.cpp">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/mime/src/mimehdrs.cpp">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/mime/src/mimehdrs.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/news/src/nsNNTPNewsgroupList.cpp">mailnews/news/src/nsNNTPNewsgroupList.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/news/src/nsNNTPNewsgroupList.cpp">file</a> |
<a href="/comm-central/annotate/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/news/src/nsNNTPNewsgroupList.cpp">annotate</a> |
<a href="/comm-central/diff/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/news/src/nsNNTPNewsgroupList.cpp">diff</a> |
<a href="/comm-central/comparison/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/news/src/nsNNTPNewsgroupList.cpp">comparison</a> |
<a href="/comm-central/log/38fad21bebd40aa70254dc22b8f6864d2751c177/mailnews/news/src/nsNNTPNewsgroupList.cpp">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/test/mozmill/folder-display/test-message-commands-on-msgstore.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/test/mozmill/folder-display/test-message-commands-on-msgstore.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -18,17 +18,16 @@ var MODULE_REQUIRES = [&quot;folder-display-h</span>
<a href="#l1.4"></a><span id="l1.4">                          &quot;compose-helpers&quot;,</span>
<a href="#l1.5"></a><span id="l1.5">                          &quot;window-helpers&quot;];</span>
<a href="#l1.6"></a><span id="l1.6"> </span>
<a href="#l1.7"></a><span id="l1.7"> var {Services} = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l1.8"></a><span id="l1.8"> var {MailServices} = ChromeUtils.import(&quot;resource:///modules/MailServices.jsm&quot;);</span>
<a href="#l1.9"></a><span id="l1.9"> var {IOUtils} = ChromeUtils.import(&quot;resource:///modules/IOUtils.js&quot;);</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11"> var statusHeader = &quot;X-Mozilla-Status: &quot;;</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-var nsMsgMessageFlags = Ci.nsMsgMessageFlags;</span>
<a href="#l1.13"></a><span id="l1.13"> </span>
<a href="#l1.14"></a><span id="l1.14"> var gInbox;</span>
<a href="#l1.15"></a><span id="l1.15"> var gOutbox;</span>
<a href="#l1.16"></a><span id="l1.16"> var gAutoRead;</span>
<a href="#l1.17"></a><span id="l1.17"> </span>
<a href="#l1.18"></a><span id="l1.18"> function setupModule(module) {</span>
<a href="#l1.19"></a><span id="l1.19">   for (let lib of MODULE_REQUIRES) {</span>
<a href="#l1.20"></a><span id="l1.20">     collector.getModule(lib).installInto(module);</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineat">@@ -106,66 +105,66 @@ function test_mark_messages_read() {</span>
<a href="#l1.22"></a><span id="l1.22">   // Store the values because they will be unavailable via the hdr</span>
<a href="#l1.23"></a><span id="l1.23">   // after the message is deleted.</span>
<a href="#l1.24"></a><span id="l1.24">   let offset = curMessage.messageOffset;</span>
<a href="#l1.25"></a><span id="l1.25">   let statusOffset = curMessage.statusOffset;</span>
<a href="#l1.26"></a><span id="l1.26">   check_status(curMessage, null, null, 0); // status = unread</span>
<a href="#l1.27"></a><span id="l1.27">   press_delete(mc);</span>
<a href="#l1.28"></a><span id="l1.28">   assert_not_equals(curMessage, select_click_row(0));</span>
<a href="#l1.29"></a><span id="l1.29">   check_status(null, offset, statusOffset,</span>
<a href="#l1.30"></a><span id="l1.30" class="difflineminus">-               nsMsgMessageFlags.Read + nsMsgMessageFlags.Expunged);</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineplus">+               Ci.nsMsgMessageFlags.Read + Ci.nsMsgMessageFlags.Expunged);</span>
<a href="#l1.32"></a><span id="l1.32"> </span>
<a href="#l1.33"></a><span id="l1.33">   // 4 messages in the folder.</span>
<a href="#l1.34"></a><span id="l1.34">   curMessage = select_click_row(0);</span>
<a href="#l1.35"></a><span id="l1.35">   check_status(curMessage, null, null, 0); // status = unread</span>
<a href="#l1.36"></a><span id="l1.36"> </span>
<a href="#l1.37"></a><span id="l1.37">   // Make sure we can mark all read with &gt;0 messages unread.</span>
<a href="#l1.38"></a><span id="l1.38">   right_click_on_row(0);</span>
<a href="#l1.39"></a><span id="l1.39">   mc.click_menus_in_sequence(mc.e(&quot;mailContext&quot;), [{id: &quot;mailContext-mark&quot;},</span>
<a href="#l1.40"></a><span id="l1.40">                                                    {id: &quot;mailContext-markAllRead&quot;}]);</span>
<a href="#l1.41"></a><span id="l1.41"> </span>
<a href="#l1.42"></a><span id="l1.42">   // All the 4 messages should now be read.</span>
<a href="#l1.43"></a><span id="l1.43">   assert_true(curMessage.isRead, &quot;Message should have been marked Read!&quot;);</span>
<a href="#l1.44"></a><span id="l1.44" class="difflineminus">-  check_status(curMessage, null, null, nsMsgMessageFlags.Read);</span>
<a href="#l1.45"></a><span id="l1.45" class="difflineplus">+  check_status(curMessage, null, null, Ci.nsMsgMessageFlags.Read);</span>
<a href="#l1.46"></a><span id="l1.46">   curMessage = select_click_row(1);</span>
<a href="#l1.47"></a><span id="l1.47">   assert_true(curMessage.isRead, &quot;Message should have been marked Read!&quot;);</span>
<a href="#l1.48"></a><span id="l1.48" class="difflineminus">-  check_status(curMessage, null, null, nsMsgMessageFlags.Read);</span>
<a href="#l1.49"></a><span id="l1.49" class="difflineplus">+  check_status(curMessage, null, null, Ci.nsMsgMessageFlags.Read);</span>
<a href="#l1.50"></a><span id="l1.50">   curMessage = select_click_row(2);</span>
<a href="#l1.51"></a><span id="l1.51">   assert_true(curMessage.isRead, &quot;Message should have been marked Read!&quot;);</span>
<a href="#l1.52"></a><span id="l1.52" class="difflineminus">-  check_status(curMessage, null, null, nsMsgMessageFlags.Read);</span>
<a href="#l1.53"></a><span id="l1.53" class="difflineplus">+  check_status(curMessage, null, null, Ci.nsMsgMessageFlags.Read);</span>
<a href="#l1.54"></a><span id="l1.54">   curMessage = select_click_row(3);</span>
<a href="#l1.55"></a><span id="l1.55">   assert_true(curMessage.isRead, &quot;Message should have been marked Read!&quot;);</span>
<a href="#l1.56"></a><span id="l1.56" class="difflineminus">-  check_status(curMessage, null, null, nsMsgMessageFlags.Read);</span>
<a href="#l1.57"></a><span id="l1.57" class="difflineplus">+  check_status(curMessage, null, null, Ci.nsMsgMessageFlags.Read);</span>
<a href="#l1.58"></a><span id="l1.58"> </span>
<a href="#l1.59"></a><span id="l1.59">   // Let's have the last message unread.</span>
<a href="#l1.60"></a><span id="l1.60">   right_click_on_row(3);</span>
<a href="#l1.61"></a><span id="l1.61">   mc.click_menus_in_sequence(mc.e(&quot;mailContext&quot;), [{id: &quot;mailContext-mark&quot;},</span>
<a href="#l1.62"></a><span id="l1.62">                                                    {id: &quot;mailContext-markUnread&quot;}]);</span>
<a href="#l1.63"></a><span id="l1.63">   assert_false(curMessage.isRead, &quot;Message should have not been marked Read!&quot;);</span>
<a href="#l1.64"></a><span id="l1.64">   check_status(curMessage, null, null, 0);</span>
<a href="#l1.65"></a><span id="l1.65"> }</span>
<a href="#l1.66"></a><span id="l1.66"> </span>
<a href="#l1.67"></a><span id="l1.67"> function test_mark_messages_flagged() {</span>
<a href="#l1.68"></a><span id="l1.68">   // Mark a message with the star.</span>
<a href="#l1.69"></a><span id="l1.69">   let curMessage = select_click_row(1);</span>
<a href="#l1.70"></a><span id="l1.70">   right_click_on_row(1);</span>
<a href="#l1.71"></a><span id="l1.71">   mc.click_menus_in_sequence(mc.e(&quot;mailContext&quot;), [{id: &quot;mailContext-mark&quot;},</span>
<a href="#l1.72"></a><span id="l1.72">                                                    {id: &quot;mailContext-markFlagged&quot;}]);</span>
<a href="#l1.73"></a><span id="l1.73">   assert_true(curMessage.isFlagged, &quot;Message should have been marked Flagged!&quot;);</span>
<a href="#l1.74"></a><span id="l1.74" class="difflineminus">-  check_status(curMessage, null, null, nsMsgMessageFlags.Read + nsMsgMessageFlags.Marked);</span>
<a href="#l1.75"></a><span id="l1.75" class="difflineplus">+  check_status(curMessage, null, null, Ci.nsMsgMessageFlags.Read + Ci.nsMsgMessageFlags.Marked);</span>
<a href="#l1.76"></a><span id="l1.76"> }</span>
<a href="#l1.77"></a><span id="l1.77"> </span>
<a href="#l1.78"></a><span id="l1.78"> function subtest_check_queued_message() {</span>
<a href="#l1.79"></a><span id="l1.79">   // Always check the last message in the Outbox for the correct flag.</span>
<a href="#l1.80"></a><span id="l1.80">   be_in_folder(gOutbox);</span>
<a href="#l1.81"></a><span id="l1.81">   let queued = gOutbox.messages;</span>
<a href="#l1.82"></a><span id="l1.82">   while (queued.hasMoreElements()) {</span>
<a href="#l1.83"></a><span id="l1.83">     let msg = queued.getNext().QueryInterface(Ci.nsIMsgDBHdr);</span>
<a href="#l1.84"></a><span id="l1.84">     if (!queued.hasMoreElements()) {</span>
<a href="#l1.85"></a><span id="l1.85" class="difflineminus">-      check_status(msg, null, null, nsMsgMessageFlags.Queued);</span>
<a href="#l1.86"></a><span id="l1.86" class="difflineplus">+      check_status(msg, null, null, Ci.nsMsgMessageFlags.Queued);</span>
<a href="#l1.87"></a><span id="l1.87">     }</span>
<a href="#l1.88"></a><span id="l1.88">   }</span>
<a href="#l1.89"></a><span id="l1.89"> }</span>
<a href="#l1.90"></a><span id="l1.90"> </span>
<a href="#l1.91"></a><span id="l1.91"> /**</span>
<a href="#l1.92"></a><span id="l1.92">  * Create a reply or forward of a message and queue it for sending later.</span>
<a href="#l1.93"></a><span id="l1.93">  *</span>
<a href="#l1.94"></a><span id="l1.94">  * @param aMsgRow  Row index of message in Inbox that is to be replied/forwarded.</span>
<a href="#l1.95"></a><span id="l1.95" class="difflineat">@@ -205,32 +204,32 @@ function reply_forward_message(aMsgRow, </span>
<a href="#l1.96"></a><span id="l1.96">                              gInbox.nsMsgDispositionState_Forwarded;</span>
<a href="#l1.97"></a><span id="l1.97">   gInbox.addMessageDispositionState(curMessage, disposition);</span>
<a href="#l1.98"></a><span id="l1.98"> }</span>
<a href="#l1.99"></a><span id="l1.99"> </span>
<a href="#l1.100"></a><span id="l1.100"> function test_mark_messages_replied() {</span>
<a href="#l1.101"></a><span id="l1.101">   reply_forward_message(2, true);</span>
<a href="#l1.102"></a><span id="l1.102">   let curMessage = select_click_row(2);</span>
<a href="#l1.103"></a><span id="l1.103">   check_status(curMessage, null, null,</span>
<a href="#l1.104"></a><span id="l1.104" class="difflineminus">-               nsMsgMessageFlags.Replied + nsMsgMessageFlags.Read);</span>
<a href="#l1.105"></a><span id="l1.105" class="difflineplus">+               Ci.nsMsgMessageFlags.Replied + Ci.nsMsgMessageFlags.Read);</span>
<a href="#l1.106"></a><span id="l1.106"> }</span>
<a href="#l1.107"></a><span id="l1.107"> </span>
<a href="#l1.108"></a><span id="l1.108"> function test_mark_messages_forwarded() {</span>
<a href="#l1.109"></a><span id="l1.109">   be_in_folder(gInbox);</span>
<a href="#l1.110"></a><span id="l1.110">   // Forward a clean message.</span>
<a href="#l1.111"></a><span id="l1.111">   reply_forward_message(3, false);</span>
<a href="#l1.112"></a><span id="l1.112">   let curMessage = select_click_row(3);</span>
<a href="#l1.113"></a><span id="l1.113" class="difflineminus">-  check_status(curMessage, null, null, nsMsgMessageFlags.Forwarded);</span>
<a href="#l1.114"></a><span id="l1.114" class="difflineplus">+  check_status(curMessage, null, null, Ci.nsMsgMessageFlags.Forwarded);</span>
<a href="#l1.115"></a><span id="l1.115"> </span>
<a href="#l1.116"></a><span id="l1.116">   // Forward a message that is read and already replied to.</span>
<a href="#l1.117"></a><span id="l1.117">   reply_forward_message(2, false);</span>
<a href="#l1.118"></a><span id="l1.118">   curMessage = select_click_row(2);</span>
<a href="#l1.119"></a><span id="l1.119">   check_status(curMessage, null, null,</span>
<a href="#l1.120"></a><span id="l1.120" class="difflineminus">-               nsMsgMessageFlags.Forwarded + nsMsgMessageFlags.Replied +</span>
<a href="#l1.121"></a><span id="l1.121" class="difflineminus">-               nsMsgMessageFlags.Read);</span>
<a href="#l1.122"></a><span id="l1.122" class="difflineplus">+               Ci.nsMsgMessageFlags.Forwarded + Ci.nsMsgMessageFlags.Replied +</span>
<a href="#l1.123"></a><span id="l1.123" class="difflineplus">+               Ci.nsMsgMessageFlags.Read);</span>
<a href="#l1.124"></a><span id="l1.124"> }</span>
<a href="#l1.125"></a><span id="l1.125"> </span>
<a href="#l1.126"></a><span id="l1.126"> function teardownModule(module) {</span>
<a href="#l1.127"></a><span id="l1.127">   Services.prefs.setBoolPref(&quot;mailnews.mark_message_read.auto&quot;, gAutoRead);</span>
<a href="#l1.128"></a><span id="l1.128">   // Clear all the created messages.</span>
<a href="#l1.129"></a><span id="l1.129">   be_in_folder(gInbox.parent);</span>
<a href="#l1.130"></a><span id="l1.130">   empty_folder(gInbox);</span>
<a href="#l1.131"></a><span id="l1.131">   empty_folder(gOutbox);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgCompose.cpp</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgCompose.cpp</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -49,16 +49,17 @@</span>
<a href="#l2.4"></a><span id="l2.4"> #include &quot;nsNetUtil.h&quot;</span>
<a href="#l2.5"></a><span id="l2.5"> #include &quot;nsIContentViewer.h&quot;</span>
<a href="#l2.6"></a><span id="l2.6"> #include &quot;nsIMsgMdnGenerator.h&quot;</span>
<a href="#l2.7"></a><span id="l2.7"> #include &quot;plbase64.h&quot;</span>
<a href="#l2.8"></a><span id="l2.8"> #include &quot;nsIMsgAccountManager.h&quot;</span>
<a href="#l2.9"></a><span id="l2.9"> #include &quot;nsIMsgAttachment.h&quot;</span>
<a href="#l2.10"></a><span id="l2.10"> #include &quot;nsIMsgProgress.h&quot;</span>
<a href="#l2.11"></a><span id="l2.11"> #include &quot;nsMsgFolderFlags.h&quot;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+#include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l2.13"></a><span id="l2.13"> #include &quot;nsIMsgDatabase.h&quot;</span>
<a href="#l2.14"></a><span id="l2.14"> #include &quot;nsStringStream.h&quot;</span>
<a href="#l2.15"></a><span id="l2.15"> #include &quot;nsIMutableArray.h&quot;</span>
<a href="#l2.16"></a><span id="l2.16"> #include &quot;nsArrayUtils.h&quot;</span>
<a href="#l2.17"></a><span id="l2.17"> #include &quot;nsIMsgWindow.h&quot;</span>
<a href="#l2.18"></a><span id="l2.18"> #include &quot;nsITextToSubURI.h&quot;</span>
<a href="#l2.19"></a><span id="l2.19"> #include &quot;nsIAbManager.h&quot;</span>
<a href="#l2.20"></a><span id="l2.20"> #include &quot;nsCRT.h&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgCopy.cpp</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgCopy.cpp</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -2,16 +2,17 @@</span>
<a href="#l3.4"></a><span id="l3.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l3.5"></a><span id="l3.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l3.6"></a><span id="l3.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l3.7"></a><span id="l3.7"> #include &quot;nsMsgCopy.h&quot;</span>
<a href="#l3.8"></a><span id="l3.8"> </span>
<a href="#l3.9"></a><span id="l3.9"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l3.10"></a><span id="l3.10"> #include &quot;nsMsgBaseCID.h&quot;</span>
<a href="#l3.11"></a><span id="l3.11"> #include &quot;nsMsgFolderFlags.h&quot;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+#include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l3.13"></a><span id="l3.13"> #include &quot;nsIMsgFolder.h&quot;</span>
<a href="#l3.14"></a><span id="l3.14"> #include &quot;nsIMsgAccountManager.h&quot;</span>
<a href="#l3.15"></a><span id="l3.15"> #include &quot;nsIMsgFolder.h&quot;</span>
<a href="#l3.16"></a><span id="l3.16"> #include &quot;nsIMsgIncomingServer.h&quot;</span>
<a href="#l3.17"></a><span id="l3.17"> #include &quot;nsIMsgProtocolInfo.h&quot;</span>
<a href="#l3.18"></a><span id="l3.18"> #include &quot;nsISupports.h&quot;</span>
<a href="#l3.19"></a><span id="l3.19"> #include &quot;nsIURL.h&quot;</span>
<a href="#l3.20"></a><span id="l3.20"> #include &quot;nsNetCID.h&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgSend.cpp</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgSend.cpp</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -57,16 +57,17 @@</span>
<a href="#l4.4"></a><span id="l4.4"> #include &quot;nsIMsgAccountManager.h&quot;</span>
<a href="#l4.5"></a><span id="l4.5"> #include &quot;nsNativeCharsetUtils.h&quot;</span>
<a href="#l4.6"></a><span id="l4.6"> #include &quot;nsIAbCard.h&quot;</span>
<a href="#l4.7"></a><span id="l4.7"> #include &quot;nsIMsgAttachment.h&quot;</span>
<a href="#l4.8"></a><span id="l4.8"> #include &quot;nsIMsgProgress.h&quot;</span>
<a href="#l4.9"></a><span id="l4.9"> #include &quot;nsIMsgMessageService.h&quot;</span>
<a href="#l4.10"></a><span id="l4.10"> #include &quot;nsIMsgHdr.h&quot;</span>
<a href="#l4.11"></a><span id="l4.11"> #include &quot;nsIMsgFolder.h&quot;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+#include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l4.13"></a><span id="l4.13"> #include &quot;nsComposeStrings.h&quot;</span>
<a href="#l4.14"></a><span id="l4.14"> #include &quot;nsString.h&quot;</span>
<a href="#l4.15"></a><span id="l4.15"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l4.16"></a><span id="l4.16"> #include &quot;nsIArray.h&quot;</span>
<a href="#l4.17"></a><span id="l4.17"> #include &quot;nsArrayUtils.h&quot;</span>
<a href="#l4.18"></a><span id="l4.18"> #include &quot;mozilla/Services.h&quot;</span>
<a href="#l4.19"></a><span id="l4.19"> #include &quot;mozilla/Attributes.h&quot;</span>
<a href="#l4.20"></a><span id="l4.20"> #include &quot;mozilla/mailnews/MimeEncoder.h&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgSend.h</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgSend.h</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -108,17 +108,16 @@</span>
<a href="#l5.4"></a><span id="l5.4"> // Necessary includes</span>
<a href="#l5.5"></a><span id="l5.5"> //</span>
<a href="#l5.6"></a><span id="l5.6"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l5.7"></a><span id="l5.7"> #include &quot;nsIMsgSend.h&quot;</span>
<a href="#l5.8"></a><span id="l5.8"> #include &quot;nsIStringBundle.h&quot;</span>
<a href="#l5.9"></a><span id="l5.9"> #include &quot;msgCore.h&quot;</span>
<a href="#l5.10"></a><span id="l5.10"> #include &quot;prprf.h&quot;</span>
<a href="#l5.11"></a><span id="l5.11"> #include &quot;nsIOutputStream.h&quot;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-#include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l5.13"></a><span id="l5.13"> #include &quot;nsIURL.h&quot;</span>
<a href="#l5.14"></a><span id="l5.14"> #include &quot;nsMsgAttachmentHandler.h&quot;</span>
<a href="#l5.15"></a><span id="l5.15"> #include &quot;nsMsgCompFields.h&quot;</span>
<a href="#l5.16"></a><span id="l5.16"> #include &quot;nsIMsgSendListener.h&quot;</span>
<a href="#l5.17"></a><span id="l5.17"> #include &quot;nsIEditor.h&quot;</span>
<a href="#l5.18"></a><span id="l5.18"> #include &quot;nsIUrlListener.h&quot;</span>
<a href="#l5.19"></a><span id="l5.19"> #include &quot;nsIMsgStatusFeedback.h&quot;</span>
<a href="#l5.20"></a><span id="l5.20"> #include &quot;nsIMsgIdentity.h&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgSendLater.cpp</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgSendLater.cpp</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -23,16 +23,17 @@</span>
<a href="#l6.4"></a><span id="l6.4"> #include &quot;nsIMimeConverter.h&quot;</span>
<a href="#l6.5"></a><span id="l6.5"> #include &quot;nsMsgMimeCID.h&quot;</span>
<a href="#l6.6"></a><span id="l6.6"> #include &quot;nsComposeStrings.h&quot;</span>
<a href="#l6.7"></a><span id="l6.7"> #include &quot;nsIMutableArray.h&quot;</span>
<a href="#l6.8"></a><span id="l6.8"> #include &quot;nsArrayEnumerator.h&quot;</span>
<a href="#l6.9"></a><span id="l6.9"> #include &quot;nsIObserverService.h&quot;</span>
<a href="#l6.10"></a><span id="l6.10"> #include &quot;nsIMsgLocalMailFolder.h&quot;</span>
<a href="#l6.11"></a><span id="l6.11"> #include &quot;nsIMsgDatabase.h&quot;</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+#include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l6.13"></a><span id="l6.13"> #include &quot;mozilla/Services.h&quot;</span>
<a href="#l6.14"></a><span id="l6.14"> #include &quot;nsArrayUtils.h&quot;</span>
<a href="#l6.15"></a><span id="l6.15"> </span>
<a href="#l6.16"></a><span id="l6.16"> // Consts for checking and sending mail in milliseconds</span>
<a href="#l6.17"></a><span id="l6.17"> </span>
<a href="#l6.18"></a><span id="l6.18"> // 1 second from mail into the unsent messages folder to initially trying to</span>
<a href="#l6.19"></a><span id="l6.19"> // send it.</span>
<a href="#l6.20"></a><span id="l6.20"> const uint32_t kInitialMessageSendTime = 1000;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mailnews/db/gloda/modules/explattr.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mailnews/db/gloda/modules/explattr.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -14,20 +14,16 @@ this.EXPORTED_SYMBOLS = ['GlodaExplicitA</span>
<a href="#l7.4"></a><span id="l7.4"> const {Log4Moz} = ChromeUtils.import(&quot;resource:///modules/gloda/log4moz.js&quot;);</span>
<a href="#l7.5"></a><span id="l7.5"> const {StringBundle} = ChromeUtils.import(&quot;resource:///modules/StringBundle.js&quot;);</span>
<a href="#l7.6"></a><span id="l7.6"> </span>
<a href="#l7.7"></a><span id="l7.7"> const {GlodaUtils} = ChromeUtils.import(&quot;resource:///modules/gloda/utils.js&quot;);</span>
<a href="#l7.8"></a><span id="l7.8"> const {Gloda} = ChromeUtils.import(&quot;resource:///modules/gloda/gloda.js&quot;);</span>
<a href="#l7.9"></a><span id="l7.9"> const {TagNoun} = ChromeUtils.import(&quot;resource:///modules/gloda/noun_tag.js&quot;);</span>
<a href="#l7.10"></a><span id="l7.10"> const {MailServices} = ChromeUtils.import(&quot;resource:///modules/MailServices.jsm&quot;);</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-var nsMsgMessageFlags_Replied = Ci.nsMsgMessageFlags.Replied;</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineminus">-var nsMsgMessageFlags_Forwarded = Ci.nsMsgMessageFlags.Forwarded;</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineminus">-</span>
<a href="#l7.16"></a><span id="l7.16"> var EXT_BUILTIN = &quot;built-in&quot;;</span>
<a href="#l7.17"></a><span id="l7.17"> </span>
<a href="#l7.18"></a><span id="l7.18"> /**</span>
<a href="#l7.19"></a><span id="l7.19">  * @namespace Explicit attribute provider.  Indexes/defines attributes that are</span>
<a href="#l7.20"></a><span id="l7.20">  *  explicitly a result of user action.  This dubiously includes marking a</span>
<a href="#l7.21"></a><span id="l7.21">  *  message as read.</span>
<a href="#l7.22"></a><span id="l7.22">  */</span>
<a href="#l7.23"></a><span id="l7.23"> var GlodaExplicitAttr = {</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineat">@@ -135,18 +131,18 @@ var GlodaExplicitAttr = {</span>
<a href="#l7.25"></a><span id="l7.25"> </span>
<a href="#l7.26"></a><span id="l7.26">     aGlodaMessage.starred = aMsgHdr.isFlagged;</span>
<a href="#l7.27"></a><span id="l7.27">     if (aGlodaMessage.starred)</span>
<a href="#l7.28"></a><span id="l7.28">       aGlodaMessage.notability += this.NOTABILITY_STARRED;</span>
<a href="#l7.29"></a><span id="l7.29"> </span>
<a href="#l7.30"></a><span id="l7.30">     aGlodaMessage.read = aMsgHdr.isRead;</span>
<a href="#l7.31"></a><span id="l7.31"> </span>
<a href="#l7.32"></a><span id="l7.32">     let flags = aMsgHdr.flags;</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineminus">-    aGlodaMessage.repliedTo = Boolean(flags &amp; nsMsgMessageFlags_Replied);</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineminus">-    aGlodaMessage.forwarded = Boolean(flags &amp; nsMsgMessageFlags_Forwarded);</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineplus">+    aGlodaMessage.repliedTo = Boolean(flags &amp; Ci.nsMsgMessageFlags.Replied);</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineplus">+    aGlodaMessage.forwarded = Boolean(flags &amp; Ci.nsMsgMessageFlags.Forwarded);</span>
<a href="#l7.37"></a><span id="l7.37"> </span>
<a href="#l7.38"></a><span id="l7.38">     let tags = aGlodaMessage.tags = [];</span>
<a href="#l7.39"></a><span id="l7.39"> </span>
<a href="#l7.40"></a><span id="l7.40">     // -- Tag</span>
<a href="#l7.41"></a><span id="l7.41">     // build a map of the keywords</span>
<a href="#l7.42"></a><span id="l7.42">     let keywords = aMsgHdr.getStringProperty(&quot;keywords&quot;);</span>
<a href="#l7.43"></a><span id="l7.43">     let keywordList = keywords.split(' ');</span>
<a href="#l7.44"></a><span id="l7.44">     let keywordMap = {};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mailnews/db/msgdb/public/nsMailDatabase.h</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mailnews/db/msgdb/public/nsMailDatabase.h</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -3,17 +3,16 @@</span>
<a href="#l8.4"></a><span id="l8.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l8.5"></a><span id="l8.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l8.6"></a><span id="l8.6"> </span>
<a href="#l8.7"></a><span id="l8.7"> #ifndef _nsMailDatabase_H_</span>
<a href="#l8.8"></a><span id="l8.8"> #define _nsMailDatabase_H_</span>
<a href="#l8.9"></a><span id="l8.9"> </span>
<a href="#l8.10"></a><span id="l8.10"> #include &quot;mozilla/Attributes.h&quot;</span>
<a href="#l8.11"></a><span id="l8.11"> #include &quot;nsMsgDatabase.h&quot;</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-#include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l8.13"></a><span id="l8.13"> #include &quot;nsTArray.h&quot;</span>
<a href="#l8.14"></a><span id="l8.14"> </span>
<a href="#l8.15"></a><span id="l8.15"> #include &quot;nsIDBChangeListener.h&quot;</span>
<a href="#l8.16"></a><span id="l8.16"> #include &quot;nsIMsgOfflineImapOperation.h&quot;</span>
<a href="#l8.17"></a><span id="l8.17"> #include &quot;nsISimpleEnumerator.h&quot;</span>
<a href="#l8.18"></a><span id="l8.18"> #include &quot;nsIFile.h&quot;</span>
<a href="#l8.19"></a><span id="l8.19"> </span>
<a href="#l8.20"></a><span id="l8.20"> // This is the subclass of nsMsgDatabase that handles local mail messages.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mailnews/db/msgdb/src/nsImapMailDatabase.cpp</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mailnews/db/msgdb/src/nsImapMailDatabase.cpp</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -3,16 +3,17 @@</span>
<a href="#l9.4"></a><span id="l9.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l9.5"></a><span id="l9.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l9.6"></a><span id="l9.6"> </span>
<a href="#l9.7"></a><span id="l9.7"> #include &lt;sys/stat.h&gt;</span>
<a href="#l9.8"></a><span id="l9.8"> </span>
<a href="#l9.9"></a><span id="l9.9"> #include &quot;msgCore.h&quot;</span>
<a href="#l9.10"></a><span id="l9.10"> #include &quot;nsImapMailDatabase.h&quot;</span>
<a href="#l9.11"></a><span id="l9.11"> #include &quot;nsDBFolderInfo.h&quot;</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+#include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l9.13"></a><span id="l9.13"> </span>
<a href="#l9.14"></a><span id="l9.14"> const char *kPendingHdrsScope =</span>
<a href="#l9.15"></a><span id="l9.15">     &quot;ns:msg:db:row:scope:pending:all&quot;;  // scope for all offine ops table</span>
<a href="#l9.16"></a><span id="l9.16"> const char *kPendingHdrsTableKind = &quot;ns:msg:db:table:kind:pending&quot;;</span>
<a href="#l9.17"></a><span id="l9.17"> struct mdbOid gAllPendingHdrsTableOID;</span>
<a href="#l9.18"></a><span id="l9.18"> </span>
<a href="#l9.19"></a><span id="l9.19"> nsImapMailDatabase::nsImapMailDatabase() { m_mdbAllPendingHdrsTable = nullptr; }</span>
<a href="#l9.20"></a><span id="l9.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mailnews/db/msgdb/src/nsMsgHdr.cpp</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mailnews/db/msgdb/src/nsMsgHdr.cpp</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -3,16 +3,17 @@</span>
<a href="#l10.4"></a><span id="l10.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l10.5"></a><span id="l10.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l10.6"></a><span id="l10.6"> </span>
<a href="#l10.7"></a><span id="l10.7"> #include &quot;msgCore.h&quot;</span>
<a href="#l10.8"></a><span id="l10.8"> #include &quot;mozilla/mailnews/MimeHeaderParser.h&quot;</span>
<a href="#l10.9"></a><span id="l10.9"> #include &quot;nsMsgHdr.h&quot;</span>
<a href="#l10.10"></a><span id="l10.10"> #include &quot;nsMsgDatabase.h&quot;</span>
<a href="#l10.11"></a><span id="l10.11"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineplus">+#include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l10.13"></a><span id="l10.13"> #include &quot;nsIMsgThread.h&quot;</span>
<a href="#l10.14"></a><span id="l10.14"> #include &quot;nsMsgMimeCID.h&quot;</span>
<a href="#l10.15"></a><span id="l10.15"> #include &quot;mozilla/Attributes.h&quot;</span>
<a href="#l10.16"></a><span id="l10.16"> #include &quot;nsStringEnumerator.h&quot;</span>
<a href="#l10.17"></a><span id="l10.17"> </span>
<a href="#l10.18"></a><span id="l10.18"> using namespace mozilla::mailnews;</span>
<a href="#l10.19"></a><span id="l10.19"> </span>
<a href="#l10.20"></a><span id="l10.20"> NS_IMPL_ISUPPORTS(nsMsgHdr, nsIMsgDBHdr)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mailnews/db/msgdb/src/nsMsgThread.cpp</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mailnews/db/msgdb/src/nsMsgThread.cpp</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -2,16 +2,17 @@</span>
<a href="#l11.4"></a><span id="l11.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l11.5"></a><span id="l11.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l11.6"></a><span id="l11.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l11.7"></a><span id="l11.7"> </span>
<a href="#l11.8"></a><span id="l11.8"> #include &quot;msgCore.h&quot;</span>
<a href="#l11.9"></a><span id="l11.9"> #include &quot;nsMsgDatabase.h&quot;</span>
<a href="#l11.10"></a><span id="l11.10"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l11.11"></a><span id="l11.11"> #include &quot;nsMsgThread.h&quot;</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineplus">+#include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l11.13"></a><span id="l11.13"> #include &quot;nsSimpleEnumerator.h&quot;</span>
<a href="#l11.14"></a><span id="l11.14"> #include &quot;MailNewsTypes2.h&quot;</span>
<a href="#l11.15"></a><span id="l11.15"> #include &quot;mozilla/DebugOnly.h&quot;</span>
<a href="#l11.16"></a><span id="l11.16"> </span>
<a href="#l11.17"></a><span id="l11.17"> NS_IMPL_ISUPPORTS(nsMsgThread, nsIMsgThread)</span>
<a href="#l11.18"></a><span id="l11.18"> </span>
<a href="#l11.19"></a><span id="l11.19"> nsMsgThread::nsMsgThread() { Init(); }</span>
<a href="#l11.20"></a><span id="l11.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mailnews/db/msgdb/src/nsNewsDatabase.cpp</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mailnews/db/msgdb/src/nsNewsDatabase.cpp</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -3,16 +3,17 @@</span>
<a href="#l12.4"></a><span id="l12.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l12.5"></a><span id="l12.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l12.6"></a><span id="l12.6"> </span>
<a href="#l12.7"></a><span id="l12.7"> #include &quot;msgCore.h&quot;</span>
<a href="#l12.8"></a><span id="l12.8"> #include &quot;nsIMsgDBView.h&quot;</span>
<a href="#l12.9"></a><span id="l12.9"> #include &quot;nsIMsgThread.h&quot;</span>
<a href="#l12.10"></a><span id="l12.10"> #include &quot;nsNewsDatabase.h&quot;</span>
<a href="#l12.11"></a><span id="l12.11"> #include &quot;nsMsgKeySet.h&quot;</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineplus">+#include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l12.13"></a><span id="l12.13"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l12.14"></a><span id="l12.14"> #include &quot;prlog.h&quot;</span>
<a href="#l12.15"></a><span id="l12.15"> </span>
<a href="#l12.16"></a><span id="l12.16"> #if defined(DEBUG_sspitzer_) || defined(DEBUG_seth_)</span>
<a href="#l12.17"></a><span id="l12.17"> #  define DEBUG_NEWS_DATABASE 1</span>
<a href="#l12.18"></a><span id="l12.18"> #endif</span>
<a href="#l12.19"></a><span id="l12.19"> </span>
<a href="#l12.20"></a><span id="l12.20"> nsNewsDatabase::nsNewsDatabase() { m_readSet = nullptr; }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mailnews/imap/src/nsImapOfflineSync.cpp</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapOfflineSync.cpp</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -4,16 +4,17 @@</span>
<a href="#l13.4"></a><span id="l13.4">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l13.5"></a><span id="l13.5"> </span>
<a href="#l13.6"></a><span id="l13.6"> #include &quot;msgCore.h&quot;</span>
<a href="#l13.7"></a><span id="l13.7"> #include &quot;netCore.h&quot;</span>
<a href="#l13.8"></a><span id="l13.8"> #include &quot;nsNetUtil.h&quot;</span>
<a href="#l13.9"></a><span id="l13.9"> #include &quot;nsImapOfflineSync.h&quot;</span>
<a href="#l13.10"></a><span id="l13.10"> #include &quot;nsImapMailFolder.h&quot;</span>
<a href="#l13.11"></a><span id="l13.11"> #include &quot;nsMsgFolderFlags.h&quot;</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+#include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l13.13"></a><span id="l13.13"> #include &quot;nsMsgBaseCID.h&quot;</span>
<a href="#l13.14"></a><span id="l13.14"> #include &quot;nsIMsgMailNewsUrl.h&quot;</span>
<a href="#l13.15"></a><span id="l13.15"> #include &quot;nsIMsgAccountManager.h&quot;</span>
<a href="#l13.16"></a><span id="l13.16"> #include &quot;nsINntpIncomingServer.h&quot;</span>
<a href="#l13.17"></a><span id="l13.17"> #include &quot;nsDirectoryServiceDefs.h&quot;</span>
<a href="#l13.18"></a><span id="l13.18"> #include &quot;nsISeekableStream.h&quot;</span>
<a href="#l13.19"></a><span id="l13.19"> #include &quot;nsIMsgCopyService.h&quot;</span>
<a href="#l13.20"></a><span id="l13.20"> #include &quot;nsImapProtocol.h&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mailnews/imap/test/TestImapFlagAndUidState.cpp</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mailnews/imap/test/TestImapFlagAndUidState.cpp</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -2,17 +2,16 @@</span>
<a href="#l14.4"></a><span id="l14.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l14.5"></a><span id="l14.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l14.6"></a><span id="l14.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l14.7"></a><span id="l14.7"> #include &lt;stdio.h&gt;</span>
<a href="#l14.8"></a><span id="l14.8"> #include &quot;TestHarness.h&quot;</span>
<a href="#l14.9"></a><span id="l14.9"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l14.10"></a><span id="l14.10"> #include &quot;msgCore.h&quot;</span>
<a href="#l14.11"></a><span id="l14.11"> #include &quot;nsImapProtocol.h&quot;</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-#include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l14.13"></a><span id="l14.13"> </span>
<a href="#l14.14"></a><span id="l14.14"> struct msgState {</span>
<a href="#l14.15"></a><span id="l14.15">   uint32_t uid;</span>
<a href="#l14.16"></a><span id="l14.16">   uint16_t flag;</span>
<a href="#l14.17"></a><span id="l14.17">   uint32_t index;</span>
<a href="#l14.18"></a><span id="l14.18"> };</span>
<a href="#l14.19"></a><span id="l14.19"> </span>
<a href="#l14.20"></a><span id="l14.20"> char errorMsg[200];</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mailnews/imap/test/TestImapHdrXferInfo.cpp</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mailnews/imap/test/TestImapHdrXferInfo.cpp</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -2,17 +2,16 @@</span>
<a href="#l15.4"></a><span id="l15.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l15.5"></a><span id="l15.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l15.6"></a><span id="l15.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l15.7"></a><span id="l15.7"> #include &lt;stdio.h&gt;</span>
<a href="#l15.8"></a><span id="l15.8"> #include &quot;TestHarness.h&quot;</span>
<a href="#l15.9"></a><span id="l15.9"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l15.10"></a><span id="l15.10"> #include &quot;msgCore.h&quot;</span>
<a href="#l15.11"></a><span id="l15.11"> #include &quot;nsImapProtocol.h&quot;</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-#include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l15.13"></a><span id="l15.13"> </span>
<a href="#l15.14"></a><span id="l15.14"> // What to check</span>
<a href="#l15.15"></a><span id="l15.15"> enum EHdrArrayCheck</span>
<a href="#l15.16"></a><span id="l15.16"> {</span>
<a href="#l15.17"></a><span id="l15.17">   eAddNoCheck,</span>
<a href="#l15.18"></a><span id="l15.18">   eCheckSame</span>
<a href="#l15.19"></a><span id="l15.19"> };</span>
<a href="#l15.20"></a><span id="l15.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_gmailOfflineMsgStore.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_gmailOfflineMsgStore.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -35,18 +35,16 @@ var gXGmLabels12 = '(\&quot;\\\\Inbox\&quot; \&quot;\\\</span>
<a href="#l16.4"></a><span id="l16.4"> var gMsgId1 = &quot;200806061706.m56H6RWT004933@mrapp54.mozilla.org&quot;;</span>
<a href="#l16.5"></a><span id="l16.5"> </span>
<a href="#l16.6"></a><span id="l16.6"> var gMessage2 = &quot;bugmail11&quot;; // message file used as the test message for fooFolder</span>
<a href="#l16.7"></a><span id="l16.7"> var gMsgId2 = &quot;200804111417.m3BEHTk4030129@mrapp51.mozilla.org&quot;;</span>
<a href="#l16.8"></a><span id="l16.8"> var gXGmMsgid2 = &quot;1278455345230334555&quot;;</span>
<a href="#l16.9"></a><span id="l16.9"> var gXGmThrid2 = &quot;1266894639832287111&quot;;</span>
<a href="#l16.10"></a><span id="l16.10"> var gXGmLabels2 = '(\&quot;\\\\Sent\&quot;)';</span>
<a href="#l16.11"></a><span id="l16.11"> </span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-var nsMsgMessageFlags = Ci.nsMsgMessageFlags;</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">-</span>
<a href="#l16.14"></a><span id="l16.14"> var fooBox;</span>
<a href="#l16.15"></a><span id="l16.15"> var fooFolder;</span>
<a href="#l16.16"></a><span id="l16.16"> </span>
<a href="#l16.17"></a><span id="l16.17"> var gImapInboxOfflineStoreSizeInitial;</span>
<a href="#l16.18"></a><span id="l16.18"> var gImapInboxOfflineStoreSizeFinal;</span>
<a href="#l16.19"></a><span id="l16.19"> </span>
<a href="#l16.20"></a><span id="l16.20"> var gFooOfflineStoreSizeInitial;</span>
<a href="#l16.21"></a><span id="l16.21"> var gFooOfflineStoreSizeFinal;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapHdrStreaming.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapHdrStreaming.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -14,18 +14,16 @@ load(&quot;../../../resources/messageGenerato</span>
<a href="#l17.4"></a><span id="l17.4"> load(&quot;../../../resources/messageModifier.js&quot;);</span>
<a href="#l17.5"></a><span id="l17.5"> load(&quot;../../../resources/messageInjection.js&quot;);</span>
<a href="#l17.6"></a><span id="l17.6"> </span>
<a href="#l17.7"></a><span id="l17.7"> // IMAP pump</span>
<a href="#l17.8"></a><span id="l17.8"> </span>
<a href="#l17.9"></a><span id="l17.9"> setupIMAPPump();</span>
<a href="#l17.10"></a><span id="l17.10"> </span>
<a href="#l17.11"></a><span id="l17.11"> </span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-var nsMsgMessageFlags = Ci.nsMsgMessageFlags;</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineminus">-</span>
<a href="#l17.14"></a><span id="l17.14"> var gMsgFile1 = do_get_file(&quot;../../../data/bugmail10&quot;);</span>
<a href="#l17.15"></a><span id="l17.15"> var gMsgId1 = &quot;200806061706.m56H6RWT004933@mrapp54.mozilla.org&quot;;</span>
<a href="#l17.16"></a><span id="l17.16"> </span>
<a href="#l17.17"></a><span id="l17.17"> // We use this as a display consumer</span>
<a href="#l17.18"></a><span id="l17.18"> var streamListener =</span>
<a href="#l17.19"></a><span id="l17.19"> {</span>
<a href="#l17.20"></a><span id="l17.20">   _data: &quot;&quot;,</span>
<a href="#l17.21"></a><span id="l17.21">   _stream : null,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapStoreMsgOffline.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapStoreMsgOffline.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -15,18 +15,16 @@ load(&quot;../../../resources/asyncTestUtils.</span>
<a href="#l18.4"></a><span id="l18.4"> </span>
<a href="#l18.5"></a><span id="l18.5"> load(&quot;../../../resources/messageGenerator.js&quot;);</span>
<a href="#l18.6"></a><span id="l18.6"> load(&quot;../../../resources/messageModifier.js&quot;);</span>
<a href="#l18.7"></a><span id="l18.7"> load(&quot;../../../resources/messageInjection.js&quot;);</span>
<a href="#l18.8"></a><span id="l18.8"> </span>
<a href="#l18.9"></a><span id="l18.9"> var gMessageGenerator = new MessageGenerator();</span>
<a href="#l18.10"></a><span id="l18.10"> var gScenarioFactory = new MessageScenarioFactory(gMessageGenerator);</span>
<a href="#l18.11"></a><span id="l18.11"> </span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-var nsMsgMessageFlags = Ci.nsMsgMessageFlags;</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineminus">-</span>
<a href="#l18.14"></a><span id="l18.14"> var gMsgFile1 = do_get_file(&quot;../../../data/bugmail10&quot;);</span>
<a href="#l18.15"></a><span id="l18.15"> var gMsgId1 = &quot;200806061706.m56H6RWT004933@mrapp54.mozilla.org&quot;;</span>
<a href="#l18.16"></a><span id="l18.16"> var gMsgFile2 = do_get_file(&quot;../../../data/image-attach-test&quot;);</span>
<a href="#l18.17"></a><span id="l18.17"> var gMsgId2 = &quot;4A947F73.5030709@example.com&quot;;</span>
<a href="#l18.18"></a><span id="l18.18"> var gMsgFile3 = do_get_file(&quot;../../../data/external-attach-test&quot;);</span>
<a href="#l18.19"></a><span id="l18.19"> var gMsgId3 = &quot;876TY.5030709@example.com&quot;;</span>
<a href="#l18.20"></a><span id="l18.20"> </span>
<a href="#l18.21"></a><span id="l18.21"> var gFirstNewMsg;</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineat">@@ -122,46 +120,46 @@ var tests = [</span>
<a href="#l18.23"></a><span id="l18.23">                                             null,</span>
<a href="#l18.24"></a><span id="l18.24">                                             asyncUrlListener,</span>
<a href="#l18.25"></a><span id="l18.25">                                             null,</span>
<a href="#l18.26"></a><span id="l18.26">                                             url);</span>
<a href="#l18.27"></a><span id="l18.27">     yield false;</span>
<a href="#l18.28"></a><span id="l18.28">   },</span>
<a href="#l18.29"></a><span id="l18.29">   function* select2ndMsg() {</span>
<a href="#l18.30"></a><span id="l18.30">     let msg1 = IMAPPump.inbox.msgDatabase.getMsgHdrForMessageID(gMsgId1);</span>
<a href="#l18.31"></a><span id="l18.31" class="difflineminus">-    Assert.notEqual(msg1.flags &amp; nsMsgMessageFlags.Offline, 0);</span>
<a href="#l18.32"></a><span id="l18.32" class="difflineplus">+    Assert.notEqual(msg1.flags &amp; Ci.nsMsgMessageFlags.Offline, 0);</span>
<a href="#l18.33"></a><span id="l18.33">     let db = IMAPPump.inbox.msgDatabase;</span>
<a href="#l18.34"></a><span id="l18.34">     let msg2 = db.getMsgHdrForMessageID(gMsgId2);</span>
<a href="#l18.35"></a><span id="l18.35">     let url = new Object;</span>
<a href="#l18.36"></a><span id="l18.36">     gIMAPService.DisplayMessage(IMAPPump.inbox.getUriForMsg(msg2),</span>
<a href="#l18.37"></a><span id="l18.37">                                             streamListener,</span>
<a href="#l18.38"></a><span id="l18.38">                                             null,</span>
<a href="#l18.39"></a><span id="l18.39">                                             asyncUrlListener,</span>
<a href="#l18.40"></a><span id="l18.40">                                             null,</span>
<a href="#l18.41"></a><span id="l18.41">                                             url);</span>
<a href="#l18.42"></a><span id="l18.42">     yield false;</span>
<a href="#l18.43"></a><span id="l18.43">   },</span>
<a href="#l18.44"></a><span id="l18.44">   function* select3rdMsg() {</span>
<a href="#l18.45"></a><span id="l18.45">     let msg2 = IMAPPump.inbox.msgDatabase.getMsgHdrForMessageID(gMsgId2);</span>
<a href="#l18.46"></a><span id="l18.46" class="difflineminus">-    Assert.notEqual(msg2.flags &amp; nsMsgMessageFlags.Offline, 0);</span>
<a href="#l18.47"></a><span id="l18.47" class="difflineplus">+    Assert.notEqual(msg2.flags &amp; Ci.nsMsgMessageFlags.Offline, 0);</span>
<a href="#l18.48"></a><span id="l18.48">     let db = IMAPPump.inbox.msgDatabase;</span>
<a href="#l18.49"></a><span id="l18.49">     let msg3 = db.getMsgHdrForMessageID(gMsgId3);</span>
<a href="#l18.50"></a><span id="l18.50">     let url = new Object;</span>
<a href="#l18.51"></a><span id="l18.51">     gIMAPService.DisplayMessage(IMAPPump.inbox.getUriForMsg(msg3),</span>
<a href="#l18.52"></a><span id="l18.52">                                             streamListener,</span>
<a href="#l18.53"></a><span id="l18.53">                                             null,</span>
<a href="#l18.54"></a><span id="l18.54">                                             asyncUrlListener,</span>
<a href="#l18.55"></a><span id="l18.55">                                             null,</span>
<a href="#l18.56"></a><span id="l18.56">                                             url);</span>
<a href="#l18.57"></a><span id="l18.57">     yield false;</span>
<a href="#l18.58"></a><span id="l18.58">   },</span>
<a href="#l18.59"></a><span id="l18.59">   function verify3rdMsg() {</span>
<a href="#l18.60"></a><span id="l18.60">     let msg3 = IMAPPump.inbox.msgDatabase.getMsgHdrForMessageID(gMsgId3);</span>
<a href="#l18.61"></a><span id="l18.61">     // can't turn this on because our fake server doesn't support body structure.</span>
<a href="#l18.62"></a><span id="l18.62" class="difflineminus">-//    do_check_eq(msg3.flags &amp; nsMsgMessageFlags.Offline, 0);</span>
<a href="#l18.63"></a><span id="l18.63" class="difflineplus">+//    do_check_eq(msg3.flags &amp; Ci.nsMsgMessageFlags.Offline, 0);</span>
<a href="#l18.64"></a><span id="l18.64">   },</span>
<a href="#l18.65"></a><span id="l18.65">   function* addNewMsgs() {</span>
<a href="#l18.66"></a><span id="l18.66">     let mbox = IMAPPump.daemon.getMailbox(&quot;INBOX&quot;)</span>
<a href="#l18.67"></a><span id="l18.67">     // make a couple of messages</span>
<a href="#l18.68"></a><span id="l18.68">     let messages = [];</span>
<a href="#l18.69"></a><span id="l18.69">     let bodyString = &quot;&quot;;</span>
<a href="#l18.70"></a><span id="l18.70">     for (let i = 0; i &lt; 100; i++)</span>
<a href="#l18.71"></a><span id="l18.71">       bodyString += &quot;1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890\r\n&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_offlineCopy.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_offlineCopy.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -11,18 +11,16 @@</span>
<a href="#l19.4"></a><span id="l19.4">  * by allowUndo == true in CopyMessages).</span>
<a href="#l19.5"></a><span id="l19.5">  */</span>
<a href="#l19.6"></a><span id="l19.6"> </span>
<a href="#l19.7"></a><span id="l19.7"> var {XPCOMUtils} = ChromeUtils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l19.8"></a><span id="l19.8"> var {PromiseTestUtils} = ChromeUtils.import(&quot;resource://testing-common/mailnews/PromiseTestUtils.jsm&quot;);</span>
<a href="#l19.9"></a><span id="l19.9"> </span>
<a href="#l19.10"></a><span id="l19.10"> load(&quot;../../../resources/logHelper.js&quot;);</span>
<a href="#l19.11"></a><span id="l19.11"> </span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-var nsMsgMessageFlags = Ci.nsMsgMessageFlags;</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineminus">-</span>
<a href="#l19.14"></a><span id="l19.14"> var gMsgFile1 = do_get_file(&quot;../../../data/bugmail10&quot;);</span>
<a href="#l19.15"></a><span id="l19.15"> var gMsgId1 = &quot;200806061706.m56H6RWT004933@mrapp54.mozilla.org&quot;;</span>
<a href="#l19.16"></a><span id="l19.16"> var gMsgFile2 = do_get_file(&quot;../../../data/image-attach-test&quot;);</span>
<a href="#l19.17"></a><span id="l19.17"> var gMsgId2 = &quot;4A947F73.5030709@example.com&quot;;</span>
<a href="#l19.18"></a><span id="l19.18"> var gMsgFile3 = do_get_file(&quot;../../../data/SpamAssassinYes&quot;);</span>
<a href="#l19.19"></a><span id="l19.19"> var gMsg3Id = &quot;bugmail7.m47LtAEf007543@mrapp51.mozilla.org&quot;;</span>
<a href="#l19.20"></a><span id="l19.20"> var gMsgFile4 = do_get_file(&quot;../../../data/bug460636&quot;);</span>
<a href="#l19.21"></a><span id="l19.21"> var gMsg4Id = &quot;foo.12345@example&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mailnews/local/src/nsMailboxProtocol.cpp</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mailnews/local/src/nsMailboxProtocol.cpp</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -9,17 +9,16 @@</span>
<a href="#l20.4"></a><span id="l20.4"> #include &quot;nscore.h&quot;</span>
<a href="#l20.5"></a><span id="l20.5"> #include &quot;nsIInputStreamPump.h&quot;</span>
<a href="#l20.6"></a><span id="l20.6"> #include &quot;nsIMsgHdr.h&quot;</span>
<a href="#l20.7"></a><span id="l20.7"> #include &quot;nsMsgLineBuffer.h&quot;</span>
<a href="#l20.8"></a><span id="l20.8"> #include &quot;nsMsgDBCID.h&quot;</span>
<a href="#l20.9"></a><span id="l20.9"> #include &quot;nsIMsgMailNewsUrl.h&quot;</span>
<a href="#l20.10"></a><span id="l20.10"> #include &quot;nsIMsgFolder.h&quot;</span>
<a href="#l20.11"></a><span id="l20.11"> #include &quot;nsICopyMsgStreamListener.h&quot;</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-#include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l20.13"></a><span id="l20.13"> #include &quot;prtime.h&quot;</span>
<a href="#l20.14"></a><span id="l20.14"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l20.15"></a><span id="l20.15"> #include &quot;mozilla/SlicedInputStream.h&quot;</span>
<a href="#l20.16"></a><span id="l20.16"> #include &quot;prerror.h&quot;</span>
<a href="#l20.17"></a><span id="l20.17"> #include &quot;prprf.h&quot;</span>
<a href="#l20.18"></a><span id="l20.18"> #include &quot;nspr.h&quot;</span>
<a href="#l20.19"></a><span id="l20.19"> #include &quot;nsIStreamTransportService.h&quot;</span>
<a href="#l20.20"></a><span id="l20.20"> #include &quot;nsIStreamConverterService.h&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mailnews/local/src/nsMsgBrkMBoxStore.cpp</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mailnews/local/src/nsMsgBrkMBoxStore.cpp</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -7,16 +7,17 @@</span>
<a href="#l21.4"></a><span id="l21.4">    Class for handling Berkeley Mailbox stores.</span>
<a href="#l21.5"></a><span id="l21.5"> */</span>
<a href="#l21.6"></a><span id="l21.6"> </span>
<a href="#l21.7"></a><span id="l21.7"> #include &quot;prlog.h&quot;</span>
<a href="#l21.8"></a><span id="l21.8"> #include &quot;msgCore.h&quot;</span>
<a href="#l21.9"></a><span id="l21.9"> #include &quot;nsMsgBrkMBoxStore.h&quot;</span>
<a href="#l21.10"></a><span id="l21.10"> #include &quot;nsIMsgFolder.h&quot;</span>
<a href="#l21.11"></a><span id="l21.11"> #include &quot;nsMsgFolderFlags.h&quot;</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineplus">+#include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l21.13"></a><span id="l21.13"> #include &quot;nsIMsgLocalMailFolder.h&quot;</span>
<a href="#l21.14"></a><span id="l21.14"> #include &quot;nsCOMArray.h&quot;</span>
<a href="#l21.15"></a><span id="l21.15"> #include &quot;nsIFile.h&quot;</span>
<a href="#l21.16"></a><span id="l21.16"> #include &quot;nsIDirectoryEnumerator.h&quot;</span>
<a href="#l21.17"></a><span id="l21.17"> #include &quot;nsIMsgHdr.h&quot;</span>
<a href="#l21.18"></a><span id="l21.18"> #include &quot;nsNetUtil.h&quot;</span>
<a href="#l21.19"></a><span id="l21.19"> #include &quot;nsIMsgDatabase.h&quot;</span>
<a href="#l21.20"></a><span id="l21.20"> #include &quot;nsNativeCharsetUtils.h&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mailnews/local/src/nsPop3Sink.cpp</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mailnews/local/src/nsPop3Sink.cpp</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -11,16 +11,17 @@</span>
<a href="#l22.4"></a><span id="l22.4"> #include &lt;stdio.h&gt;</span>
<a href="#l22.5"></a><span id="l22.5"> #include &lt;time.h&gt;</span>
<a href="#l22.6"></a><span id="l22.6"> #include &quot;nsParseMailbox.h&quot;</span>
<a href="#l22.7"></a><span id="l22.7"> #include &quot;nsIMsgLocalMailFolder.h&quot;</span>
<a href="#l22.8"></a><span id="l22.8"> #include &quot;nsIMsgIncomingServer.h&quot;</span>
<a href="#l22.9"></a><span id="l22.9"> #include &quot;nsLocalUtils.h&quot;</span>
<a href="#l22.10"></a><span id="l22.10"> #include &quot;nsMsgLocalFolderHdrs.h&quot;</span>
<a href="#l22.11"></a><span id="l22.11"> #include &quot;nsIMsgFolder.h&quot;  // TO include biffState enum. Change to bool later...</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineplus">+#include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l22.13"></a><span id="l22.13"> #include &quot;nsMailHeaders.h&quot;</span>
<a href="#l22.14"></a><span id="l22.14"> #include &quot;nsIMsgAccountManager.h&quot;</span>
<a href="#l22.15"></a><span id="l22.15"> #include &quot;nsIPop3Protocol.h&quot;</span>
<a href="#l22.16"></a><span id="l22.16"> #include &quot;nsLocalMailFolder.h&quot;</span>
<a href="#l22.17"></a><span id="l22.17"> #include &quot;nsIInputStream.h&quot;</span>
<a href="#l22.18"></a><span id="l22.18"> #include &quot;nsIPrefBranch.h&quot;</span>
<a href="#l22.19"></a><span id="l22.19"> #include &quot;nsIPrefService.h&quot;</span>
<a href="#l22.20"></a><span id="l22.20"> #include &quot;nsDirectoryServiceDefs.h&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mailnews/mime/src/mimehdrs.cpp</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mailnews/mime/src/mimehdrs.cpp</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -5,17 +5,16 @@</span>
<a href="#l23.4"></a><span id="l23.4"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l23.5"></a><span id="l23.5"> #include &quot;msgCore.h&quot;</span>
<a href="#l23.6"></a><span id="l23.6"> #include &quot;mimei.h&quot;</span>
<a href="#l23.7"></a><span id="l23.7"> #include &quot;prmem.h&quot;</span>
<a href="#l23.8"></a><span id="l23.8"> #include &quot;prlog.h&quot;</span>
<a href="#l23.9"></a><span id="l23.9"> #include &quot;plstr.h&quot;</span>
<a href="#l23.10"></a><span id="l23.10"> #include &quot;mimebuf.h&quot;</span>
<a href="#l23.11"></a><span id="l23.11"> #include &quot;mimemoz2.h&quot;</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-#include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l23.13"></a><span id="l23.13"> #include &quot;comi18n.h&quot;</span>
<a href="#l23.14"></a><span id="l23.14"> #include &quot;nsMailHeaders.h&quot;</span>
<a href="#l23.15"></a><span id="l23.15"> #include &quot;msgCore.h&quot;</span>
<a href="#l23.16"></a><span id="l23.16"> #include &quot;nsMimeStringResources.h&quot;</span>
<a href="#l23.17"></a><span id="l23.17"> #include &quot;mimemoz2.h&quot;</span>
<a href="#l23.18"></a><span id="l23.18"> #include &quot;nsMsgI18N.h&quot;</span>
<a href="#l23.19"></a><span id="l23.19"> #include &quot;mimehdrs.h&quot;</span>
<a href="#l23.20"></a><span id="l23.20"> #include &quot;nsIMIMEHeaderParam.h&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mailnews/news/src/nsNNTPNewsgroupList.cpp</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mailnews/news/src/nsNNTPNewsgroupList.cpp</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -34,17 +34,17 @@</span>
<a href="#l24.4"></a><span id="l24.4"> </span>
<a href="#l24.5"></a><span id="l24.5"> #include &quot;plstr.h&quot;</span>
<a href="#l24.6"></a><span id="l24.6"> #include &quot;prmem.h&quot;</span>
<a href="#l24.7"></a><span id="l24.7"> #include &quot;prprf.h&quot;</span>
<a href="#l24.8"></a><span id="l24.8"> </span>
<a href="#l24.9"></a><span id="l24.9"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l24.10"></a><span id="l24.10"> </span>
<a href="#l24.11"></a><span id="l24.11"> #include &quot;nsMsgDatabase.h&quot;</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+#include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l24.14"></a><span id="l24.14"> #include &quot;nsIDBFolderInfo.h&quot;</span>
<a href="#l24.15"></a><span id="l24.15"> </span>
<a href="#l24.16"></a><span id="l24.16"> #include &quot;nsNewsUtils.h&quot;</span>
<a href="#l24.17"></a><span id="l24.17"> </span>
<a href="#l24.18"></a><span id="l24.18"> #include &quot;nsMsgDBCID.h&quot;</span>
<a href="#l24.19"></a><span id="l24.19"> </span>
<a href="#l24.20"></a><span id="l24.20"> #include &quot;nsINewsDownloadDialogArgs.h&quot;</span>
<a href="#l24.21"></a><span id="l24.21"> </span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:31Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

