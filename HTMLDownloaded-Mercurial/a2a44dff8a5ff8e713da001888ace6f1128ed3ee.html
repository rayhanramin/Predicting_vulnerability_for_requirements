<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 14827:a2a44dff8a5ff8e713da001888ace6f1128ed3ee</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ a2a44dff8a5ff8e713da001888ace6f1128ed3ee" />
<meta property="og:url" content="/comm-central/rev/a2a44dff8a5ff8e713da001888ace6f1128ed3ee" />
<meta property="og:description" content="Bug 953875 - Use toolkit password manager, r=clokep." />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / a2a44dff8a5ff8e713da001888ace6f1128ed3ee 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/a2a44dff8a5ff8e713da001888ace6f1128ed3ee">shortlog</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/a2a44dff8a5ff8e713da001888ace6f1128ed3ee">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee">files</a> |
changeset |
<a href="/comm-central/raw-rev/a2a44dff8a5ff8e713da001888ace6f1128ed3ee">raw</a>  | <a href="/comm-central/archive/a2a44dff8a5ff8e713da001888ace6f1128ed3ee.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=953875">Bug 953875</a> - Use toolkit password manager, r=clokep.
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#70;&#108;&#111;&#114;&#105;&#97;&#110;&#32;&#81;&#117;&#232;&#122;&#101;&#32;&#60;&#102;&#108;&#111;&#114;&#105;&#97;&#110;&#64;&#105;&#110;&#115;&#116;&#97;&#110;&#116;&#98;&#105;&#114;&#100;&#46;&#111;&#114;&#103;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 25 Jan 2012 15:25:58 +0100</td></tr>

<tr>
 <td>changeset 14827</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/a2a44dff8a5ff8e713da001888ace6f1128ed3ee">a2a44dff8a5ff8e713da001888ace6f1128ed3ee</a></td>
</tr>



<tr>
<td>parent 14826</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/2f998822f3aad6793c97ba2e6b1306f5d7dab091">2f998822f3aad6793c97ba2e6b1306f5d7dab091</a>
</td>
</tr>

<tr>
<td>child 14828</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/36621ac71303f0c9eddf487d10419621baa38fde">36621ac71303f0c9eddf487d10419621baa38fde</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=a2a44dff8a5ff8e713da001888ace6f1128ed3ee">9778</a></td></tr>
<tr><td>push user</td><td>florian@queze.net</td></tr>
<tr><td>push date</td><td class="date age">Sun, 12 Jan 2014 18:25:45 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@f81a23bfefcd [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&newProject=comm-central&newRevision=279a7aa9624ffb41326b021ff7d8bc68b9b89551&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&newProject=comm-central&newRevision=279a7aa9624ffb41326b021ff7d8bc68b9b89551&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&newProject=comm-central&newRevision=279a7aa9624ffb41326b021ff7d8bc68b9b89551&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28clokep%29&revcount=50">clokep</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=953875">953875</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=953875">Bug 953875</a> - Use toolkit password manager, r=clokep.</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/chat-prefs.js">chat/chat-prefs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/chat-prefs.js">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/chat-prefs.js">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/chat-prefs.js">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/chat-prefs.js">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/chat-prefs.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/components/public/imIAccount.idl">chat/components/public/imIAccount.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/components/public/imIAccount.idl">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/components/public/imIAccount.idl">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/components/public/imIAccount.idl">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/components/public/imIAccount.idl">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/components/public/imIAccount.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/components/src/imAccounts.js">chat/components/src/imAccounts.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/components/src/imAccounts.js">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/components/src/imAccounts.js">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/components/src/imAccounts.js">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/components/src/imAccounts.js">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/components/src/imAccounts.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/locales/en-US/accounts.properties">chat/locales/en-US/accounts.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/locales/en-US/accounts.properties">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/locales/en-US/accounts.properties">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/locales/en-US/accounts.properties">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/locales/en-US/accounts.properties">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/locales/en-US/accounts.properties">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/locales/jar.mn">chat/locales/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/locales/jar.mn">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/locales/jar.mn">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/locales/jar.mn">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/locales/jar.mn">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/locales/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/modules/jsProtoHelper.jsm">chat/modules/jsProtoHelper.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/modules/jsProtoHelper.jsm">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/modules/jsProtoHelper.jsm">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/modules/jsProtoHelper.jsm">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/modules/jsProtoHelper.jsm">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/chat/modules/jsProtoHelper.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/app/profile/all-instantbird.js">im/app/profile/all-instantbird.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/app/profile/all-instantbird.js">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/app/profile/all-instantbird.js">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/app/profile/all-instantbird.js">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/app/profile/all-instantbird.js">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/app/profile/all-instantbird.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/account.xml">im/content/account.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/account.xml">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/account.xml">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/account.xml">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/account.xml">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/account.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/account.xul">im/content/account.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/account.xul">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/account.xul">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/account.xul">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/account.xul">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/account.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/accountWizard.js">im/content/accountWizard.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/accountWizard.js">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/accountWizard.js">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/accountWizard.js">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/accountWizard.js">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/accountWizard.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/accountWizard.xul">im/content/accountWizard.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/accountWizard.xul">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/accountWizard.xul">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/accountWizard.xul">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/accountWizard.xul">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/accountWizard.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/accounts.js">im/content/accounts.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/accounts.js">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/accounts.js">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/accounts.js">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/accounts.js">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/accounts.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/debug/fake/fake.js">im/content/debug/fake/fake.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/debug/fake/fake.js">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/debug/fake/fake.js">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/debug/fake/fake.js">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/debug/fake/fake.js">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/debug/fake/fake.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/preferences/privacy.js">im/content/preferences/privacy.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/preferences/privacy.js">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/preferences/privacy.js">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/preferences/privacy.js">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/preferences/privacy.js">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/preferences/privacy.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/preferences/privacy.xul">im/content/preferences/privacy.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/preferences/privacy.xul">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/preferences/privacy.xul">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/preferences/privacy.xul">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/preferences/privacy.xul">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/content/preferences/privacy.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/account.dtd">im/locales/en-US/chrome/instantbird/account.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/account.dtd">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/account.dtd">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/account.dtd">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/account.dtd">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/account.dtd">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/accountWizard.dtd">im/locales/en-US/chrome/instantbird/accountWizard.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/accountWizard.dtd">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/accountWizard.dtd">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/accountWizard.dtd">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/accountWizard.dtd">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/accountWizard.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/accounts.properties">im/locales/en-US/chrome/instantbird/accounts.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/accounts.properties">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/accounts.properties">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/accounts.properties">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/accounts.properties">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/accounts.properties">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/preferences/privacy.dtd">im/locales/en-US/chrome/instantbird/preferences/privacy.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/preferences/privacy.dtd">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/preferences/privacy.dtd">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/preferences/privacy.dtd">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/preferences/privacy.dtd">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/preferences/privacy.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/preferences/security.dtd">im/locales/en-US/chrome/instantbird/preferences/security.dtd</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/preferences/security.dtd">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/preferences/security.dtd">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/en-US/chrome/instantbird/preferences/security.dtd">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/jar.mn">im/locales/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/jar.mn">file</a> |
<a href="/comm-central/annotate/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/jar.mn">annotate</a> |
<a href="/comm-central/diff/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/jar.mn">diff</a> |
<a href="/comm-central/comparison/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/jar.mn">comparison</a> |
<a href="/comm-central/log/a2a44dff8a5ff8e713da001888ace6f1128ed3ee/im/locales/jar.mn">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/chat/chat-prefs.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/chat/chat-prefs.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -1,16 +1,20 @@</span>
<a href="#l1.4"></a><span id="l1.4"> // What to do when starting up</span>
<a href="#l1.5"></a><span id="l1.5"> //  0 = do not connect / show the account manager</span>
<a href="#l1.6"></a><span id="l1.6"> //  1 = connect automatically</span>
<a href="#l1.7"></a><span id="l1.7"> //  Other values will be added later, for example to start minimized</span>
<a href="#l1.8"></a><span id="l1.8"> pref(&quot;messenger.startup.action&quot;, 1);</span>
<a href="#l1.9"></a><span id="l1.9"> </span>
<a href="#l1.10"></a><span id="l1.10"> pref(&quot;messenger.accounts&quot;, &quot;&quot;);</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+// Should the accounts service stored in the password manager the</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+// passwords that are currently stored in the preferences?</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+pref(&quot;messenger.accounts.convertOldPasswords&quot;, false);</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+</span>
<a href="#l1.16"></a><span id="l1.16"> // The intervals in seconds between automatic reconnection attempts</span>
<a href="#l1.17"></a><span id="l1.17"> // The last value will be reused forever.</span>
<a href="#l1.18"></a><span id="l1.18"> // A value of 0 means that there will be no more reconnection attempts.</span>
<a href="#l1.19"></a><span id="l1.19"> pref(&quot;messenger.accounts.reconnectTimer&quot;, &quot;1,5,30,60,90,300,600,1200,3600&quot;);</span>
<a href="#l1.20"></a><span id="l1.20"> </span>
<a href="#l1.21"></a><span id="l1.21"> // List of tags ids whose contacts should be shown in the special</span>
<a href="#l1.22"></a><span id="l1.22"> // &quot;Other contacts&quot; group.</span>
<a href="#l1.23"></a><span id="l1.23"> pref(&quot;messenger.buddies.hiddenTags&quot;, &quot;&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/chat/components/public/imIAccount.idl</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/chat/components/public/imIAccount.idl</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -236,17 +236,17 @@ interface imIAccount: prplIAccount {</span>
<a href="#l2.4"></a><span id="l2.4">   /* Set when the account is trying to connect for the first time</span>
<a href="#l2.5"></a><span id="l2.5">      with the current parameters (removed after a successsful connection) */</span>
<a href="#l2.6"></a><span id="l2.6">   const short FIRST_CONNECTION_PENDING = 2;</span>
<a href="#l2.7"></a><span id="l2.7">   /* Set at startup when the previous state was pending */</span>
<a href="#l2.8"></a><span id="l2.8">   const short FIRST_CONNECTION_CRASHED = 4;</span>
<a href="#l2.9"></a><span id="l2.9"> </span>
<a href="#l2.10"></a><span id="l2.10">   attribute short firstConnectionState;</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-  // FIXME password should be in password manager</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+  // Passwords are stored in the toolkit Password Manager.</span>
<a href="#l2.14"></a><span id="l2.14">   attribute AUTF8String password;</span>
<a href="#l2.15"></a><span id="l2.15"> </span>
<a href="#l2.16"></a><span id="l2.16">   attribute AUTF8String alias;</span>
<a href="#l2.17"></a><span id="l2.17"> </span>
<a href="#l2.18"></a><span id="l2.18">   /* While an account is connecting, this attribute contains a message</span>
<a href="#l2.19"></a><span id="l2.19">      indicating the current step of the connection */</span>
<a href="#l2.20"></a><span id="l2.20">   readonly attribute AUTF8String connectionStateMsg;</span>
<a href="#l2.21"></a><span id="l2.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/chat/components/src/imAccounts.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/chat/components/src/imAccounts.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -42,21 +42,34 @@ Cu.import(&quot;resource:///modules/imService</span>
<a href="#l3.4"></a><span id="l3.4"> </span>
<a href="#l3.5"></a><span id="l3.5"> const kPrefAutologinPending = &quot;messenger.accounts.autoLoginPending&quot;;</span>
<a href="#l3.6"></a><span id="l3.6"> const kPrefMessengerAccounts = &quot;messenger.accounts&quot;;</span>
<a href="#l3.7"></a><span id="l3.7"> const kPrefAccountPrefix = &quot;messenger.account.&quot;;</span>
<a href="#l3.8"></a><span id="l3.8"> const kAccountKeyPrefix = &quot;account&quot;;</span>
<a href="#l3.9"></a><span id="l3.9"> const kAccountOptionPrefPrefix = &quot;options.&quot;;</span>
<a href="#l3.10"></a><span id="l3.10"> const kPrefAccountName = &quot;name&quot;;</span>
<a href="#l3.11"></a><span id="l3.11"> const kPrefAccountPrpl = &quot;prpl&quot;;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-const kPrefAccountPassword = &quot;password&quot;;</span>
<a href="#l3.13"></a><span id="l3.13"> const kPrefAccountAutoLogin = &quot;autoLogin&quot;;</span>
<a href="#l3.14"></a><span id="l3.14"> const kPrefAccountAlias = &quot;alias&quot;;</span>
<a href="#l3.15"></a><span id="l3.15"> const kPrefAccountFirstConnectionState = &quot;firstConnectionState&quot;;</span>
<a href="#l3.16"></a><span id="l3.16"> </span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+const kPrefConvertOldPasswords = &quot;messenger.accounts.convertOldPasswords&quot;;</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+const kPrefAccountPassword = &quot;password&quot;;</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+XPCOMUtils.defineLazyGetter(this, &quot;LoginManager&quot;, function()</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineplus">+  Cc[&quot;@mozilla.org/login-manager;1&quot;].getService(Ci.nsILoginManager)</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineplus">+);</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineplus">+</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineplus">+XPCOMUtils.defineLazyGetter(this, &quot;_&quot;, function()</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineplus">+  l10nHelper(&quot;chrome://chat/locale/accounts.properties&quot;)</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineplus">+);</span>
<a href="#l3.27"></a><span id="l3.27" class="difflineplus">+</span>
<a href="#l3.28"></a><span id="l3.28" class="difflineplus">+var gUserCanceledMasterPasswordPrompt = false;</span>
<a href="#l3.29"></a><span id="l3.29" class="difflineplus">+var gConvertingOldPasswords = false;</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineplus">+</span>
<a href="#l3.31"></a><span id="l3.31"> var SavePrefTimer = {</span>
<a href="#l3.32"></a><span id="l3.32">   saveNow: function() {</span>
<a href="#l3.33"></a><span id="l3.33">     if (this._timer) {</span>
<a href="#l3.34"></a><span id="l3.34">       clearTimeout(this._timer);</span>
<a href="#l3.35"></a><span id="l3.35">       this._timer = null;</span>
<a href="#l3.36"></a><span id="l3.36">     }</span>
<a href="#l3.37"></a><span id="l3.37">     Services.prefs.savePrefFile(null);</span>
<a href="#l3.38"></a><span id="l3.38">   },</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineat">@@ -162,16 +175,27 @@ function imAccount(aKey, aName, aPrplId)</span>
<a href="#l3.40"></a><span id="l3.40">   // Send status change notifications to the account.</span>
<a href="#l3.41"></a><span id="l3.41">   this.observedStatusInfo = null; // (To execute the setter).</span>
<a href="#l3.42"></a><span id="l3.42"> </span>
<a href="#l3.43"></a><span id="l3.43">   // If we have never finished the first connection attempt for this account,</span>
<a href="#l3.44"></a><span id="l3.44">   // mark the account as having caused a crash.</span>
<a href="#l3.45"></a><span id="l3.45">   if (this.firstConnectionState == Ci.imIAccount.FIRST_CONNECTION_PENDING)</span>
<a href="#l3.46"></a><span id="l3.46">     this.firstConnectionState = Ci.imIAccount.FIRST_CONNECTION_CRASHED;</span>
<a href="#l3.47"></a><span id="l3.47"> </span>
<a href="#l3.48"></a><span id="l3.48" class="difflineplus">+  // Try to convert old passwords stored in the preferences.</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineplus">+  // Don't try too hard if the user has canceled a master password prompt:</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineplus">+  // we don't want to display several of theses prompts at startup.</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineplus">+  if (gConvertingOldPasswords &amp;&amp; !this.protocol.noPassword) {</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineplus">+    try {</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineplus">+      let password = this.prefBranch.getCharPref(kPrefAccountPassword);</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineplus">+      if (password &amp;&amp; !this.password)</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineplus">+        this.password = password;</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineplus">+    } catch (e) { /* No password saved in the prefs for this account. */ }</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineplus">+  }</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineplus">+</span>
<a href="#l3.59"></a><span id="l3.59">   // Check for errors that should prevent connection attempts.</span>
<a href="#l3.60"></a><span id="l3.60">   if (this._passwordRequired &amp;&amp; !this.password)</span>
<a href="#l3.61"></a><span id="l3.61">     this._connectionErrorReason = Ci.imIAccount.ERROR_MISSING_PASSWORD;</span>
<a href="#l3.62"></a><span id="l3.62">   else if (this.firstConnectionState == Ci.imIAccount.FIRST_CONNECTION_CRASHED)</span>
<a href="#l3.63"></a><span id="l3.63">     this._connectionErrorReason = Ci.imIAccount.ERROR_CRASHED;</span>
<a href="#l3.64"></a><span id="l3.64"> }</span>
<a href="#l3.65"></a><span id="l3.65"> </span>
<a href="#l3.66"></a><span id="l3.66"> imAccount.prototype = {</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineat">@@ -182,17 +206,19 @@ imAccount.prototype = {</span>
<a href="#l3.68"></a><span id="l3.68">   numericId: 0,</span>
<a href="#l3.69"></a><span id="l3.69">   protocol: null,</span>
<a href="#l3.70"></a><span id="l3.70">   prplAccount: null,</span>
<a href="#l3.71"></a><span id="l3.71">   connectionState: Ci.imIAccount.STATE_DISCONNECTED,</span>
<a href="#l3.72"></a><span id="l3.72">   connectionStateMsg: &quot;&quot;,</span>
<a href="#l3.73"></a><span id="l3.73">   connectionErrorMessage: &quot;&quot;,</span>
<a href="#l3.74"></a><span id="l3.74">   _connectionErrorReason: Ci.prplIAccount.NO_ERROR,</span>
<a href="#l3.75"></a><span id="l3.75">   get connectionErrorReason() {</span>
<a href="#l3.76"></a><span id="l3.76" class="difflineminus">-    if (this._connectionErrorReason != Ci.prplIAccount.NO_ERROR)</span>
<a href="#l3.77"></a><span id="l3.77" class="difflineplus">+    if (this._connectionErrorReason != Ci.prplIAccount.NO_ERROR &amp;&amp;</span>
<a href="#l3.78"></a><span id="l3.78" class="difflineplus">+        (this._connectionErrorReason != Ci.imIAccount.ERROR_MISSING_PASSWORD ||</span>
<a href="#l3.79"></a><span id="l3.79" class="difflineplus">+         !this._password))</span>
<a href="#l3.80"></a><span id="l3.80">       return this._connectionErrorReason;</span>
<a href="#l3.81"></a><span id="l3.81">     else</span>
<a href="#l3.82"></a><span id="l3.82">       return this.prplAccount.connectionErrorReason;</span>
<a href="#l3.83"></a><span id="l3.83">   },</span>
<a href="#l3.84"></a><span id="l3.84"> </span>
<a href="#l3.85"></a><span id="l3.85">   observe: function(aSubject, aTopic, aData) {</span>
<a href="#l3.86"></a><span id="l3.86">     if (aTopic == &quot;account-connect-progress&quot;)</span>
<a href="#l3.87"></a><span id="l3.87">       this.connectionStateMsg = aData;</span>
<a href="#l3.88"></a><span id="l3.88" class="difflineat">@@ -372,35 +398,102 @@ imAccount.prototype = {</span>
<a href="#l3.89"></a><span id="l3.89">   get alias() {</span>
<a href="#l3.90"></a><span id="l3.90">     try {</span>
<a href="#l3.91"></a><span id="l3.91">       return this.prefBranch.getCharPref(kPrefAccountAlias);</span>
<a href="#l3.92"></a><span id="l3.92">     } catch (e) {</span>
<a href="#l3.93"></a><span id="l3.93">       return &quot;&quot;;</span>
<a href="#l3.94"></a><span id="l3.94">     }</span>
<a href="#l3.95"></a><span id="l3.95">   },</span>
<a href="#l3.96"></a><span id="l3.96"> </span>
<a href="#l3.97"></a><span id="l3.97" class="difflineplus">+  _password: &quot;&quot;,</span>
<a href="#l3.98"></a><span id="l3.98">   get password() {</span>
<a href="#l3.99"></a><span id="l3.99" class="difflineplus">+    if (this._password)</span>
<a href="#l3.100"></a><span id="l3.100" class="difflineplus">+      return this._password;</span>
<a href="#l3.101"></a><span id="l3.101" class="difflineplus">+</span>
<a href="#l3.102"></a><span id="l3.102" class="difflineplus">+    // Avoid prompting the user for the master password more than once at startup.</span>
<a href="#l3.103"></a><span id="l3.103" class="difflineplus">+    if (gUserCanceledMasterPasswordPrompt)</span>
<a href="#l3.104"></a><span id="l3.104" class="difflineplus">+      return &quot;&quot;;</span>
<a href="#l3.105"></a><span id="l3.105" class="difflineplus">+</span>
<a href="#l3.106"></a><span id="l3.106" class="difflineplus">+    let passwordURI = &quot;im://&quot; + this.protocol.id;</span>
<a href="#l3.107"></a><span id="l3.107" class="difflineplus">+    let logins;</span>
<a href="#l3.108"></a><span id="l3.108">     try {</span>
<a href="#l3.109"></a><span id="l3.109" class="difflineminus">-      return this.prefBranch.getCharPref(kPrefAccountPassword);</span>
<a href="#l3.110"></a><span id="l3.110" class="difflineplus">+      logins = LoginManager.findLogins({}, passwordURI, null, passwordURI);</span>
<a href="#l3.111"></a><span id="l3.111">     } catch (e) {</span>
<a href="#l3.112"></a><span id="l3.112" class="difflineplus">+      this._handleMasterPasswordException(e);</span>
<a href="#l3.113"></a><span id="l3.113">       return &quot;&quot;;</span>
<a href="#l3.114"></a><span id="l3.114">     }</span>
<a href="#l3.115"></a><span id="l3.115" class="difflineplus">+    let normalizedName = this.normalizedName;</span>
<a href="#l3.116"></a><span id="l3.116" class="difflineplus">+    for each (let login in logins) {</span>
<a href="#l3.117"></a><span id="l3.117" class="difflineplus">+      if (login.username == normalizedName) {</span>
<a href="#l3.118"></a><span id="l3.118" class="difflineplus">+        this._password = login.password;</span>
<a href="#l3.119"></a><span id="l3.119" class="difflineplus">+        if (this._connectionErrorReason == Ci.imIAccount.ERROR_MISSING_PASSWORD) {</span>
<a href="#l3.120"></a><span id="l3.120" class="difflineplus">+          // We have found a password for an account marked as missing password,</span>
<a href="#l3.121"></a><span id="l3.121" class="difflineplus">+          // re-check all others accounts missing a password. But first,</span>
<a href="#l3.122"></a><span id="l3.122" class="difflineplus">+          // remove the error on our own account to avoid re-checking it.</span>
<a href="#l3.123"></a><span id="l3.123" class="difflineplus">+          delete this._connectionErrorReason;</span>
<a href="#l3.124"></a><span id="l3.124" class="difflineplus">+          gAccountsService._checkIfPasswordStillMissing();</span>
<a href="#l3.125"></a><span id="l3.125" class="difflineplus">+        }</span>
<a href="#l3.126"></a><span id="l3.126" class="difflineplus">+        return this._password;</span>
<a href="#l3.127"></a><span id="l3.127" class="difflineplus">+      }</span>
<a href="#l3.128"></a><span id="l3.128" class="difflineplus">+    }</span>
<a href="#l3.129"></a><span id="l3.129" class="difflineplus">+    return &quot;&quot;;</span>
<a href="#l3.130"></a><span id="l3.130" class="difflineplus">+  },</span>
<a href="#l3.131"></a><span id="l3.131" class="difflineplus">+  _checkIfPasswordStillMissing: function() {</span>
<a href="#l3.132"></a><span id="l3.132" class="difflineplus">+    if (this._connectionErrorReason != Ci.imIAccount.ERROR_MISSING_PASSWORD ||</span>
<a href="#l3.133"></a><span id="l3.133" class="difflineplus">+        !this.password)</span>
<a href="#l3.134"></a><span id="l3.134" class="difflineplus">+      return;</span>
<a href="#l3.135"></a><span id="l3.135" class="difflineplus">+</span>
<a href="#l3.136"></a><span id="l3.136" class="difflineplus">+    delete this._connectionErrorReason;</span>
<a href="#l3.137"></a><span id="l3.137" class="difflineplus">+    this._sendUpdateNotification();</span>
<a href="#l3.138"></a><span id="l3.138">   },</span>
<a href="#l3.139"></a><span id="l3.139">   get _passwordRequired()</span>
<a href="#l3.140"></a><span id="l3.140">     !this.protocol.noPassword &amp;&amp; !this.protocol.passwordOptional,</span>
<a href="#l3.141"></a><span id="l3.141">   set password(aPassword) {</span>
<a href="#l3.142"></a><span id="l3.142" class="difflineminus">-    this.prefBranch.setCharPref(kPrefAccountPassword, aPassword);</span>
<a href="#l3.143"></a><span id="l3.143" class="difflineplus">+    this._password = aPassword;</span>
<a href="#l3.144"></a><span id="l3.144" class="difflineplus">+    if (gUserCanceledMasterPasswordPrompt)</span>
<a href="#l3.145"></a><span id="l3.145" class="difflineplus">+      return;</span>
<a href="#l3.146"></a><span id="l3.146" class="difflineplus">+    let newLogin = Cc[&quot;@mozilla.org/login-manager/loginInfo;1&quot;]</span>
<a href="#l3.147"></a><span id="l3.147" class="difflineplus">+                   .createInstance(Ci.nsILoginInfo);</span>
<a href="#l3.148"></a><span id="l3.148" class="difflineplus">+    let passwordURI = &quot;im://&quot; + this.protocol.id;</span>
<a href="#l3.149"></a><span id="l3.149" class="difflineplus">+    newLogin.init(passwordURI, null, passwordURI, this.normalizedName,</span>
<a href="#l3.150"></a><span id="l3.150" class="difflineplus">+                  aPassword, &quot;&quot;, &quot;&quot;);</span>
<a href="#l3.151"></a><span id="l3.151" class="difflineplus">+    try {</span>
<a href="#l3.152"></a><span id="l3.152" class="difflineplus">+      let logins = LoginManager.findLogins({}, passwordURI, null, passwordURI);</span>
<a href="#l3.153"></a><span id="l3.153" class="difflineplus">+      let saved = false;</span>
<a href="#l3.154"></a><span id="l3.154" class="difflineplus">+      for each (let login in logins) {</span>
<a href="#l3.155"></a><span id="l3.155" class="difflineplus">+        if (newLogin.matches(login, true)) {</span>
<a href="#l3.156"></a><span id="l3.156" class="difflineplus">+          if (aPassword)</span>
<a href="#l3.157"></a><span id="l3.157" class="difflineplus">+            LoginManager.modifyLogin(login, newLogin);</span>
<a href="#l3.158"></a><span id="l3.158" class="difflineplus">+          else</span>
<a href="#l3.159"></a><span id="l3.159" class="difflineplus">+            LoginManager.removeLogin(login);</span>
<a href="#l3.160"></a><span id="l3.160" class="difflineplus">+          saved = true;</span>
<a href="#l3.161"></a><span id="l3.161" class="difflineplus">+          break;</span>
<a href="#l3.162"></a><span id="l3.162" class="difflineplus">+        }</span>
<a href="#l3.163"></a><span id="l3.163" class="difflineplus">+      }</span>
<a href="#l3.164"></a><span id="l3.164" class="difflineplus">+      if (!saved &amp;&amp; aPassword)</span>
<a href="#l3.165"></a><span id="l3.165" class="difflineplus">+        LoginManager.addLogin(newLogin);</span>
<a href="#l3.166"></a><span id="l3.166" class="difflineplus">+    } catch (e) {</span>
<a href="#l3.167"></a><span id="l3.167" class="difflineplus">+      this._handleMasterPasswordException(e);</span>
<a href="#l3.168"></a><span id="l3.168" class="difflineplus">+    }</span>
<a href="#l3.169"></a><span id="l3.169" class="difflineplus">+</span>
<a href="#l3.170"></a><span id="l3.170">     this._connectionInfoChanged();</span>
<a href="#l3.171"></a><span id="l3.171">     if (aPassword &amp;&amp;</span>
<a href="#l3.172"></a><span id="l3.172">         this._connectionErrorReason == Ci.imIAccount.ERROR_MISSING_PASSWORD)</span>
<a href="#l3.173"></a><span id="l3.173">       this._connectionErrorReason = Ci.imIAccount.NO_ERROR;</span>
<a href="#l3.174"></a><span id="l3.174">     else if (!aPassword &amp;&amp; this._passwordRequired)</span>
<a href="#l3.175"></a><span id="l3.175">       this._connectionErrorReason = Ci.imIAccount.ERROR_MISSING_PASSWORD;</span>
<a href="#l3.176"></a><span id="l3.176">     this._sendUpdateNotification();</span>
<a href="#l3.177"></a><span id="l3.177">   },</span>
<a href="#l3.178"></a><span id="l3.178" class="difflineplus">+  _handleMasterPasswordException: function(aException) {</span>
<a href="#l3.179"></a><span id="l3.179" class="difflineplus">+    if (aException.result != Components.results.NS_ERROR_ABORT)</span>
<a href="#l3.180"></a><span id="l3.180" class="difflineplus">+      throw aException;</span>
<a href="#l3.181"></a><span id="l3.181" class="difflineplus">+</span>
<a href="#l3.182"></a><span id="l3.182" class="difflineplus">+    gUserCanceledMasterPasswordPrompt = true;</span>
<a href="#l3.183"></a><span id="l3.183" class="difflineplus">+    executeSoon(function () { gUserCanceledMasterPasswordPrompt = false; });</span>
<a href="#l3.184"></a><span id="l3.184" class="difflineplus">+  },</span>
<a href="#l3.185"></a><span id="l3.185"> </span>
<a href="#l3.186"></a><span id="l3.186">   get autoLogin() {</span>
<a href="#l3.187"></a><span id="l3.187">     let autoLogin = true;</span>
<a href="#l3.188"></a><span id="l3.188">     try {</span>
<a href="#l3.189"></a><span id="l3.189">       autoLogin = this.prefBranch.getBoolPref(kPrefAccountAutoLogin);</span>
<a href="#l3.190"></a><span id="l3.190">     } catch (e) { }</span>
<a href="#l3.191"></a><span id="l3.191">     return autoLogin;</span>
<a href="#l3.192"></a><span id="l3.192">   },</span>
<a href="#l3.193"></a><span id="l3.193" class="difflineat">@@ -430,16 +523,27 @@ imAccount.prototype = {</span>
<a href="#l3.194"></a><span id="l3.194">   _finishedAutoLogin: function() {</span>
<a href="#l3.195"></a><span id="l3.195">     if (!this.hasOwnProperty(&quot;_autoLoginPending&quot;))</span>
<a href="#l3.196"></a><span id="l3.196">       return;</span>
<a href="#l3.197"></a><span id="l3.197">     delete this._autoLoginPending;</span>
<a href="#l3.198"></a><span id="l3.198">     AutoLoginCounter.finishedAutoLogin();</span>
<a href="#l3.199"></a><span id="l3.199">   },</span>
<a href="#l3.200"></a><span id="l3.200"> </span>
<a href="#l3.201"></a><span id="l3.201">   remove: function() {</span>
<a href="#l3.202"></a><span id="l3.202" class="difflineplus">+    let login = Cc[&quot;@mozilla.org/login-manager/loginInfo;1&quot;]</span>
<a href="#l3.203"></a><span id="l3.203" class="difflineplus">+                .createInstance(Ci.nsILoginInfo);</span>
<a href="#l3.204"></a><span id="l3.204" class="difflineplus">+    let passwordURI = &quot;im://&quot; + this.protocol.id;</span>
<a href="#l3.205"></a><span id="l3.205" class="difflineplus">+    login.init(passwordURI, null, passwordURI, this.normalizedName, &quot;&quot;, &quot;&quot;, &quot;&quot;);</span>
<a href="#l3.206"></a><span id="l3.206" class="difflineplus">+    let logins = LoginManager.findLogins({}, passwordURI, null, passwordURI);</span>
<a href="#l3.207"></a><span id="l3.207" class="difflineplus">+    for each (let l in logins) {</span>
<a href="#l3.208"></a><span id="l3.208" class="difflineplus">+      if (login.matches(l, true)) {</span>
<a href="#l3.209"></a><span id="l3.209" class="difflineplus">+        LoginManager.removeLogin(l);</span>
<a href="#l3.210"></a><span id="l3.210" class="difflineplus">+        break;</span>
<a href="#l3.211"></a><span id="l3.211" class="difflineplus">+      }</span>
<a href="#l3.212"></a><span id="l3.212" class="difflineplus">+    }</span>
<a href="#l3.213"></a><span id="l3.213">     this.unInit();</span>
<a href="#l3.214"></a><span id="l3.214">     Services.contacts.forgetAccount(this.numericId);</span>
<a href="#l3.215"></a><span id="l3.215">     this.prefBranch.deleteBranch(&quot;&quot;);</span>
<a href="#l3.216"></a><span id="l3.216">   },</span>
<a href="#l3.217"></a><span id="l3.217">   unInit: function() {</span>
<a href="#l3.218"></a><span id="l3.218">     // remove any pending reconnection timer.</span>
<a href="#l3.219"></a><span id="l3.219">     this.cancelReconnection();</span>
<a href="#l3.220"></a><span id="l3.220"> </span>
<a href="#l3.221"></a><span id="l3.221" class="difflineat">@@ -460,17 +564,43 @@ imAccount.prototype = {</span>
<a href="#l3.222"></a><span id="l3.222">     delete this.prplAccount;</span>
<a href="#l3.223"></a><span id="l3.223">   },</span>
<a href="#l3.224"></a><span id="l3.224"> </span>
<a href="#l3.225"></a><span id="l3.225">   get _ensurePrplAccount() {</span>
<a href="#l3.226"></a><span id="l3.226">     if (this.prplAccount)</span>
<a href="#l3.227"></a><span id="l3.227">       return this.prplAccount;</span>
<a href="#l3.228"></a><span id="l3.228">     throw Cr.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l3.229"></a><span id="l3.229">   },</span>
<a href="#l3.230"></a><span id="l3.230" class="difflineminus">-  connect: function() { this._ensurePrplAccount.connect(); },</span>
<a href="#l3.231"></a><span id="l3.231" class="difflineplus">+  connect: function() {</span>
<a href="#l3.232"></a><span id="l3.232" class="difflineplus">+    if (this._passwordRequired) {</span>
<a href="#l3.233"></a><span id="l3.233" class="difflineplus">+      // If the previous connection attempt failed because we have a wrong password,</span>
<a href="#l3.234"></a><span id="l3.234" class="difflineplus">+      // clear the passwor cache so that if there's no password in the password</span>
<a href="#l3.235"></a><span id="l3.235" class="difflineplus">+      // manager the user gets prompted again.</span>
<a href="#l3.236"></a><span id="l3.236" class="difflineplus">+      if (this.connectionErrorReason == Ci.prplIAccount.ERROR_AUTHENTICATION_FAILED)</span>
<a href="#l3.237"></a><span id="l3.237" class="difflineplus">+        delete this._password;</span>
<a href="#l3.238"></a><span id="l3.238" class="difflineplus">+</span>
<a href="#l3.239"></a><span id="l3.239" class="difflineplus">+      let password = this.password;</span>
<a href="#l3.240"></a><span id="l3.240" class="difflineplus">+      if (!password) {</span>
<a href="#l3.241"></a><span id="l3.241" class="difflineplus">+        let prompts = Services.prompt;</span>
<a href="#l3.242"></a><span id="l3.242" class="difflineplus">+        let shouldSave = {value: false};</span>
<a href="#l3.243"></a><span id="l3.243" class="difflineplus">+        password = {value: &quot;&quot;};</span>
<a href="#l3.244"></a><span id="l3.244" class="difflineplus">+        if (!prompts.promptPassword(null, _(&quot;passwordPromptTitle&quot;, this.name),</span>
<a href="#l3.245"></a><span id="l3.245" class="difflineplus">+                                    _(&quot;passwordPromptText&quot;, this.name),</span>
<a href="#l3.246"></a><span id="l3.246" class="difflineplus">+                                    password, _(&quot;passwordPromptSaveCheckbox&quot;),</span>
<a href="#l3.247"></a><span id="l3.247" class="difflineplus">+                                    shouldSave))</span>
<a href="#l3.248"></a><span id="l3.248" class="difflineplus">+          return;</span>
<a href="#l3.249"></a><span id="l3.249" class="difflineplus">+</span>
<a href="#l3.250"></a><span id="l3.250" class="difflineplus">+        if (shouldSave.value)</span>
<a href="#l3.251"></a><span id="l3.251" class="difflineplus">+          this.password = password.value;</span>
<a href="#l3.252"></a><span id="l3.252" class="difflineplus">+        else</span>
<a href="#l3.253"></a><span id="l3.253" class="difflineplus">+          this._password = password.value;</span>
<a href="#l3.254"></a><span id="l3.254" class="difflineplus">+      }</span>
<a href="#l3.255"></a><span id="l3.255" class="difflineplus">+    }</span>
<a href="#l3.256"></a><span id="l3.256" class="difflineplus">+    this._ensurePrplAccount.connect();</span>
<a href="#l3.257"></a><span id="l3.257" class="difflineplus">+  },</span>
<a href="#l3.258"></a><span id="l3.258">   disconnect: function() {</span>
<a href="#l3.259"></a><span id="l3.259">     if (this._statusObserver) {</span>
<a href="#l3.260"></a><span id="l3.260">       this.statusInfo.removeObserver(this._statusObserver);</span>
<a href="#l3.261"></a><span id="l3.261">       delete this._statusObserver;</span>
<a href="#l3.262"></a><span id="l3.262">     }</span>
<a href="#l3.263"></a><span id="l3.263">     this._ensurePrplAccount.disconnect();</span>
<a href="#l3.264"></a><span id="l3.264">   },</span>
<a href="#l3.265"></a><span id="l3.265"> </span>
<a href="#l3.266"></a><span id="l3.266" class="difflineat">@@ -540,36 +670,46 @@ imAccount.prototype = {</span>
<a href="#l3.267"></a><span id="l3.267"> </span>
<a href="#l3.268"></a><span id="l3.268">   get proxyInfo() this._ensurePrplAccount.proxyInfo,</span>
<a href="#l3.269"></a><span id="l3.269">   set proxyInfo(val) {</span>
<a href="#l3.270"></a><span id="l3.270">     this._ensurePrplAccount.proxyInfo = val;</span>
<a href="#l3.271"></a><span id="l3.271">     this._connectionInfoChanged();</span>
<a href="#l3.272"></a><span id="l3.272">   }</span>
<a href="#l3.273"></a><span id="l3.273"> };</span>
<a href="#l3.274"></a><span id="l3.274"> </span>
<a href="#l3.275"></a><span id="l3.275" class="difflineplus">+var gAccountsService = null;</span>
<a href="#l3.276"></a><span id="l3.276" class="difflineplus">+</span>
<a href="#l3.277"></a><span id="l3.277"> function AccountsService() { }</span>
<a href="#l3.278"></a><span id="l3.278"> AccountsService.prototype = {</span>
<a href="#l3.279"></a><span id="l3.279">   initAccounts: function() {</span>
<a href="#l3.280"></a><span id="l3.280">     this._initAutoLoginStatus();</span>
<a href="#l3.281"></a><span id="l3.281">     this._accounts = [];</span>
<a href="#l3.282"></a><span id="l3.282">     this._accountsById = {};</span>
<a href="#l3.283"></a><span id="l3.283" class="difflineplus">+    gAccountsService = this;</span>
<a href="#l3.284"></a><span id="l3.284" class="difflineplus">+    gConvertingOldPasswords =</span>
<a href="#l3.285"></a><span id="l3.285" class="difflineplus">+      Services.prefs.getBoolPref(kPrefConvertOldPasswords);</span>
<a href="#l3.286"></a><span id="l3.286">     let accountList = this._accountList;</span>
<a href="#l3.287"></a><span id="l3.287">     for each (let account in (accountList ? accountList.split(&quot;,&quot;) : [])) {</span>
<a href="#l3.288"></a><span id="l3.288">       try {</span>
<a href="#l3.289"></a><span id="l3.289">         account.trim();</span>
<a href="#l3.290"></a><span id="l3.290">         if (!account)</span>
<a href="#l3.291"></a><span id="l3.291">           throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l3.292"></a><span id="l3.292">         let newAccount = new imAccount(account);</span>
<a href="#l3.293"></a><span id="l3.293">         this._accounts.push(newAccount);</span>
<a href="#l3.294"></a><span id="l3.294">         this._accountsById[newAccount.numericId] = newAccount;</span>
<a href="#l3.295"></a><span id="l3.295">       } catch (e) {</span>
<a href="#l3.296"></a><span id="l3.296">         Cu.reportError(e);</span>
<a href="#l3.297"></a><span id="l3.297">         dump(e + &quot; &quot; + e.toSource() + &quot;\n&quot;);</span>
<a href="#l3.298"></a><span id="l3.298">       }</span>
<a href="#l3.299"></a><span id="l3.299">     }</span>
<a href="#l3.300"></a><span id="l3.300" class="difflineplus">+    // If the user has canceled a master password prompt, we haven't</span>
<a href="#l3.301"></a><span id="l3.301" class="difflineplus">+    // been able to save any password, so the old password conversion</span>
<a href="#l3.302"></a><span id="l3.302" class="difflineplus">+    // still needs to happen.</span>
<a href="#l3.303"></a><span id="l3.303" class="difflineplus">+    if (gConvertingOldPasswords &amp;&amp; !gUserCanceledMasterPasswordPrompt)</span>
<a href="#l3.304"></a><span id="l3.304" class="difflineplus">+      Services.prefs.setBoolPref(kPrefConvertOldPasswords, false);</span>
<a href="#l3.305"></a><span id="l3.305"> </span>
<a href="#l3.306"></a><span id="l3.306">     this._prefObserver = this.observe.bind(this);</span>
<a href="#l3.307"></a><span id="l3.307">     Services.prefs.addObserver(kPrefMessengerAccounts, this._prefObserver, false);</span>
<a href="#l3.308"></a><span id="l3.308">   },</span>
<a href="#l3.309"></a><span id="l3.309"> </span>
<a href="#l3.310"></a><span id="l3.310">   _observingAccountListChange: true,</span>
<a href="#l3.311"></a><span id="l3.311">   _prefObserver: null,</span>
<a href="#l3.312"></a><span id="l3.312">   observe: function(aSubject, aTopic, aData) {</span>
<a href="#l3.313"></a><span id="l3.313" class="difflineat">@@ -592,16 +732,17 @@ AccountsService.prototype = {</span>
<a href="#l3.314"></a><span id="l3.314">     this._observingAccountListChange = false;</span>
<a href="#l3.315"></a><span id="l3.315">     Services.prefs.setCharPref(kPrefMessengerAccounts, aNewList);</span>
<a href="#l3.316"></a><span id="l3.316">     delete this._observingAccountListChange;</span>
<a href="#l3.317"></a><span id="l3.317">   },</span>
<a href="#l3.318"></a><span id="l3.318"> </span>
<a href="#l3.319"></a><span id="l3.319">   unInitAccounts: function() {</span>
<a href="#l3.320"></a><span id="l3.320">     for each (let account in this._accounts)</span>
<a href="#l3.321"></a><span id="l3.321">       account.unInit();</span>
<a href="#l3.322"></a><span id="l3.322" class="difflineplus">+    gAccountsService = null;</span>
<a href="#l3.323"></a><span id="l3.323">     delete this._accounts;</span>
<a href="#l3.324"></a><span id="l3.324">     delete this._accountsById;</span>
<a href="#l3.325"></a><span id="l3.325">     Services.prefs.removeObserver(kPrefMessengerAccounts, this._prefObserver);</span>
<a href="#l3.326"></a><span id="l3.326">     delete this._prefObserver;</span>
<a href="#l3.327"></a><span id="l3.327">   },</span>
<a href="#l3.328"></a><span id="l3.328"> </span>
<a href="#l3.329"></a><span id="l3.329">   autoLoginStatus: Ci.imIAccountsService.AUTOLOGIN_ENABLED,</span>
<a href="#l3.330"></a><span id="l3.330">   _initAutoLoginStatus: function() {</span>
<a href="#l3.331"></a><span id="l3.331" class="difflineat">@@ -710,16 +851,28 @@ AccountsService.prototype = {</span>
<a href="#l3.332"></a><span id="l3.332">     // should be processed now.</span>
<a href="#l3.333"></a><span id="l3.333">     this.autoLoginStatus = Ci.imIAccountsService.AUTOLOGIN_ENABLED;</span>
<a href="#l3.334"></a><span id="l3.334"> </span>
<a href="#l3.335"></a><span id="l3.335">     // Notify observers so that any message stating that autologin is</span>
<a href="#l3.336"></a><span id="l3.336">     // disabled can be removed</span>
<a href="#l3.337"></a><span id="l3.337">     Services.obs.notifyObservers(this, &quot;autologin-processed&quot;, null);</span>
<a href="#l3.338"></a><span id="l3.338">   },</span>
<a href="#l3.339"></a><span id="l3.339"> </span>
<a href="#l3.340"></a><span id="l3.340" class="difflineplus">+  _checkingIfPasswordStillMissing: false,</span>
<a href="#l3.341"></a><span id="l3.341" class="difflineplus">+  _checkIfPasswordStillMissing: function() {</span>
<a href="#l3.342"></a><span id="l3.342" class="difflineplus">+    // Avoid recursion.</span>
<a href="#l3.343"></a><span id="l3.343" class="difflineplus">+    if (this._checkingIfPasswordStillMissing)</span>
<a href="#l3.344"></a><span id="l3.344" class="difflineplus">+      return;</span>
<a href="#l3.345"></a><span id="l3.345" class="difflineplus">+</span>
<a href="#l3.346"></a><span id="l3.346" class="difflineplus">+    this._checkingIfPasswordStillMissing = true;</span>
<a href="#l3.347"></a><span id="l3.347" class="difflineplus">+    for each (let account in this._accounts)</span>
<a href="#l3.348"></a><span id="l3.348" class="difflineplus">+      account._checkIfPasswordStillMissing();</span>
<a href="#l3.349"></a><span id="l3.349" class="difflineplus">+    delete this._checkingIfPasswordStillMissing;</span>
<a href="#l3.350"></a><span id="l3.350" class="difflineplus">+  },</span>
<a href="#l3.351"></a><span id="l3.351" class="difflineplus">+</span>
<a href="#l3.352"></a><span id="l3.352">   getAccountById: function(aAccountId) {</span>
<a href="#l3.353"></a><span id="l3.353">     if (aAccountId.indexOf(kAccountKeyPrefix) != 0)</span>
<a href="#l3.354"></a><span id="l3.354">       throw Cr.NS_ERROR_INVALID_ARG;</span>
<a href="#l3.355"></a><span id="l3.355"> </span>
<a href="#l3.356"></a><span id="l3.356">     let id = parseInt(aAccountId.substr(kAccountKeyPrefix.length));</span>
<a href="#l3.357"></a><span id="l3.357">     return this.getAccountByNumericId(id);</span>
<a href="#l3.358"></a><span id="l3.358">   },</span>
<a href="#l3.359"></a><span id="l3.359"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1">new file mode 100644</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineminus">--- /dev/null</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineplus">+++ b/chat/locales/en-US/accounts.properties</span>
<a href="#l4.4"></a><span id="l4.4" class="difflineat">@@ -0,0 +1,3 @@</span>
<a href="#l4.5"></a><span id="l4.5" class="difflineplus">+passwordPromptTitle=Password for %S</span>
<a href="#l4.6"></a><span id="l4.6" class="difflineplus">+passwordPromptText=Please enter your password for your account %S in order to connect it.</span>
<a href="#l4.7"></a><span id="l4.7" class="difflineplus">+passwordPromptSaveCheckbox=Use Password Manager to remember this password.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/chat/locales/jar.mn</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/chat/locales/jar.mn</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -1,10 +1,11 @@</span>
<a href="#l5.4"></a><span id="l5.4"> #filter substitution</span>
<a href="#l5.5"></a><span id="l5.5"> </span>
<a href="#l5.6"></a><span id="l5.6"> @AB_CD@.jar:</span>
<a href="#l5.7"></a><span id="l5.7"> % locale chat @AB_CD@ %locale/@AB_CD@/chat/</span>
<a href="#l5.8"></a><span id="l5.8" class="difflineplus">+	locale/@AB_CD@/chat/accounts.properties (%accounts.properties)</span>
<a href="#l5.9"></a><span id="l5.9"> 	locale/@AB_CD@/chat/commands.properties (%commands.properties)</span>
<a href="#l5.10"></a><span id="l5.10"> 	locale/@AB_CD@/chat/conversations.properties (%conversations.properties)</span>
<a href="#l5.11"></a><span id="l5.11"> 	locale/@AB_CD@/chat/facebook.properties	(%facebook.properties)</span>
<a href="#l5.12"></a><span id="l5.12"> 	locale/@AB_CD@/chat/status.properties	(%status.properties)</span>
<a href="#l5.13"></a><span id="l5.13"> 	locale/@AB_CD@/chat/twitter.properties	(%twitter.properties)</span>
<a href="#l5.14"></a><span id="l5.14"> 	locale/@AB_CD@/chat/xmpp.properties	(%xmpp.properties)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/chat/modules/jsProtoHelper.jsm</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/chat/modules/jsProtoHelper.jsm</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -723,17 +723,17 @@ const GenericProtocolPrototype = {</span>
<a href="#l6.4"></a><span id="l6.4">   get usernameEmptyText() &quot;&quot;,</span>
<a href="#l6.5"></a><span id="l6.5">   accountExists: function() false, //FIXME</span>
<a href="#l6.6"></a><span id="l6.6"> </span>
<a href="#l6.7"></a><span id="l6.7">   get uniqueChatName() false,</span>
<a href="#l6.8"></a><span id="l6.8">   get chatHasTopic() false,</span>
<a href="#l6.9"></a><span id="l6.9">   get noPassword() false,</span>
<a href="#l6.10"></a><span id="l6.10">   get newMailNotification() false,</span>
<a href="#l6.11"></a><span id="l6.11">   get imagesInIM() false,</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-  get passwordOptional() true,</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+  get passwordOptional() false,</span>
<a href="#l6.14"></a><span id="l6.14">   get usePointSize() true,</span>
<a href="#l6.15"></a><span id="l6.15">   get registerNoScreenName() false,</span>
<a href="#l6.16"></a><span id="l6.16">   get slashCommandsNative() false,</span>
<a href="#l6.17"></a><span id="l6.17">   get usePurpleProxy() false,</span>
<a href="#l6.18"></a><span id="l6.18"> </span>
<a href="#l6.19"></a><span id="l6.19">   get classDescription() this.name + &quot; Protocol&quot;,</span>
<a href="#l6.20"></a><span id="l6.20">   get contractID() &quot;@instantbird.org/purple/&quot; + this.normalizedName + &quot;;1&quot;</span>
<a href="#l6.21"></a><span id="l6.21"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/im/app/profile/all-instantbird.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/im/app/profile/all-instantbird.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -21,16 +21,17 @@ pref(&quot;general.autoScroll&quot;, true);</span>
<a href="#l7.4"></a><span id="l7.4"> </span>
<a href="#l7.5"></a><span id="l7.5"> // this will automatically enable inline spellchecking (if it is available) for</span>
<a href="#l7.6"></a><span id="l7.6"> // editable elements in HTML</span>
<a href="#l7.7"></a><span id="l7.7"> // 0 = spellcheck nothing</span>
<a href="#l7.8"></a><span id="l7.8"> // 1 = check multi-line controls [default]</span>
<a href="#l7.9"></a><span id="l7.9"> // 2 = check multi/single line controls</span>
<a href="#l7.10"></a><span id="l7.10"> pref(&quot;layout.spellcheckDefault&quot;, 1);</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+pref(&quot;messenger.accounts.convertOldPasswords&quot;, true);</span>
<a href="#l7.13"></a><span id="l7.13"> pref(&quot;messenger.accounts.promptOnDelete&quot;, true);</span>
<a href="#l7.14"></a><span id="l7.14"> </span>
<a href="#l7.15"></a><span id="l7.15"> pref(&quot;messenger.buddies.showOffline&quot;, false);</span>
<a href="#l7.16"></a><span id="l7.16"> pref(&quot;messenger.buddies.hideTagPrompt&quot;, true);</span>
<a href="#l7.17"></a><span id="l7.17"> </span>
<a href="#l7.18"></a><span id="l7.18"> pref(&quot;messenger.conversations.openInTabs&quot;, true);</span>
<a href="#l7.19"></a><span id="l7.19"> pref(&quot;messenger.conversations.useSeparateWindowsForMUCs&quot;, false);</span>
<a href="#l7.20"></a><span id="l7.20"> pref(&quot;messenger.conversations.doubleClickToReply&quot;, true);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/im/content/account.xml</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/im/content/account.xml</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -136,22 +136,24 @@</span>
<a href="#l8.4"></a><span id="l8.4">         const key = &quot;account.connection.error&quot;;</span>
<a href="#l8.5"></a><span id="l8.5">         var account = this._account;</span>
<a href="#l8.6"></a><span id="l8.6">         var text;</span>
<a href="#l8.7"></a><span id="l8.7">         let errorReason = account.connectionErrorReason;</span>
<a href="#l8.8"></a><span id="l8.8">         if (errorReason == Ci.imIAccount.ERROR_UNKNOWN_PRPL)</span>
<a href="#l8.9"></a><span id="l8.9">           text = bundle.getFormattedString(key + &quot;UnknownPrpl&quot;,</span>
<a href="#l8.10"></a><span id="l8.10">                                            [account.protocol.id]);</span>
<a href="#l8.11"></a><span id="l8.11">         else if (errorReason == Ci.imIAccount.ERROR_MISSING_PASSWORD)</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-          text = bundle.getString(key + &quot;MissingPassword&quot;);</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+          text = bundle.getString(key + &quot;EnteringPasswordRequired&quot;);</span>
<a href="#l8.14"></a><span id="l8.14">         else if (errorReason == Ci.imIAccount.ERROR_CRASHED)</span>
<a href="#l8.15"></a><span id="l8.15">           text = bundle.getString(key + &quot;CrashedAccount&quot;);</span>
<a href="#l8.16"></a><span id="l8.16">         else</span>
<a href="#l8.17"></a><span id="l8.17">           text = account.connectionErrorMessage;</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineminus">-        text = bundle.getFormattedString(key, [text]);</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineplus">+</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineplus">+        if (errorReason != Ci.imIAccount.ERROR_MISSING_PASSWORD)</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineplus">+          text = bundle.getFormattedString(key, [text]);</span>
<a href="#l8.22"></a><span id="l8.22"> </span>
<a href="#l8.23"></a><span id="l8.23">         this.setAttribute(&quot;error&quot;, &quot;true&quot;);</span>
<a href="#l8.24"></a><span id="l8.24">         var error = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;,</span>
<a href="#l8.25"></a><span id="l8.25">                                                             &quot;error&quot;);</span>
<a href="#l8.26"></a><span id="l8.26">         error.textContent = text;</span>
<a href="#l8.27"></a><span id="l8.27"> </span>
<a href="#l8.28"></a><span id="l8.28">         var updateReconnect = (function() {</span>
<a href="#l8.29"></a><span id="l8.29">           var date = Math.round((account.timeOfNextReconnect - Date.now()) / 1000);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/im/content/account.xul</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/im/content/account.xul</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -69,17 +69,16 @@</span>
<a href="#l9.4"></a><span id="l9.4">       &lt;tab id=&quot;advancedTab&quot; label=&quot;&amp;account.advanced;&quot;/&gt;</span>
<a href="#l9.5"></a><span id="l9.5">     &lt;/tabs&gt;</span>
<a href="#l9.6"></a><span id="l9.6">     &lt;tabpanels id=&quot;panels&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l9.7"></a><span id="l9.7">       &lt;tabpanel orient=&quot;vertical&quot; flex=&quot;1&quot; style=&quot;overflow:auto;&quot;&gt;</span>
<a href="#l9.8"></a><span id="l9.8">         &lt;hbox id=&quot;passwordBox&quot; equalsize=&quot;always&quot; align=&quot;baseline&quot;&gt;</span>
<a href="#l9.9"></a><span id="l9.9">           &lt;label value=&quot;&amp;account.password;&quot; control=&quot;password&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l9.10"></a><span id="l9.10">           &lt;textbox id=&quot;password&quot; flex=&quot;1&quot; type=&quot;password&quot;/&gt;</span>
<a href="#l9.11"></a><span id="l9.11">         &lt;/hbox&gt;</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-        &lt;checkbox id=&quot;rememberPassword&quot; label=&quot;&amp;account.rememberPassword;&quot; hidden=&quot;true&quot;/&gt;</span>
<a href="#l9.13"></a><span id="l9.13"> </span>
<a href="#l9.14"></a><span id="l9.14">         &lt;separator class=&quot;groove&quot;/&gt;</span>
<a href="#l9.15"></a><span id="l9.15"> </span>
<a href="#l9.16"></a><span id="l9.16">         &lt;hbox id=&quot;aliasBox&quot; equalsize=&quot;always&quot; align=&quot;baseline&quot;&gt;</span>
<a href="#l9.17"></a><span id="l9.17">           &lt;label value=&quot;&amp;account.alias;&quot; control=&quot;alias&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l9.18"></a><span id="l9.18">           &lt;textbox id=&quot;alias&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l9.19"></a><span id="l9.19">         &lt;/hbox&gt;</span>
<a href="#l9.20"></a><span id="l9.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/im/content/accountWizard.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/im/content/accountWizard.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -376,21 +376,23 @@ var accountWizard = {</span>
<a href="#l10.4"></a><span id="l10.4"> </span>
<a href="#l10.5"></a><span id="l10.5">     var label = document.getElementById(&quot;protoLabel&quot;).value;</span>
<a href="#l10.6"></a><span id="l10.6">     rows.appendChild(this.createSummaryRow(label, this.proto.name));</span>
<a href="#l10.7"></a><span id="l10.7">     this.username = this.getUsername();</span>
<a href="#l10.8"></a><span id="l10.8">     label = bundle.getString(&quot;accountUsername&quot;);</span>
<a href="#l10.9"></a><span id="l10.9">     rows.appendChild(this.createSummaryRow(label, this.username));</span>
<a href="#l10.10"></a><span id="l10.10">     if (!this.proto.noPassword) {</span>
<a href="#l10.11"></a><span id="l10.11">       this.password = this.getValue(&quot;password&quot;);</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-      label = document.getElementById(&quot;passwordLabel&quot;).value;</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-      var pass = &quot;&quot;;</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineminus">-      for (let i = 0; i &lt; this.password.length; ++i)</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineminus">-        pass += &quot;*&quot;;</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineminus">-      rows.appendChild(this.createSummaryRow(label, pass));</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineplus">+      if (this.password) {</span>
<a href="#l10.18"></a><span id="l10.18" class="difflineplus">+        label = document.getElementById(&quot;passwordLabel&quot;).value;</span>
<a href="#l10.19"></a><span id="l10.19" class="difflineplus">+        var pass = &quot;&quot;;</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineplus">+        for (let i = 0; i &lt; this.password.length; ++i)</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineplus">+          pass += &quot;*&quot;;</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineplus">+        rows.appendChild(this.createSummaryRow(label, pass));</span>
<a href="#l10.23"></a><span id="l10.23" class="difflineplus">+      }</span>
<a href="#l10.24"></a><span id="l10.24">     }</span>
<a href="#l10.25"></a><span id="l10.25">     this.alias = this.getValue(&quot;alias&quot;);</span>
<a href="#l10.26"></a><span id="l10.26">     if (this.alias) {</span>
<a href="#l10.27"></a><span id="l10.27">       label = document.getElementById(&quot;aliasLabel&quot;).value;</span>
<a href="#l10.28"></a><span id="l10.28">       rows.appendChild(this.createSummaryRow(label, this.alias));</span>
<a href="#l10.29"></a><span id="l10.29">     }</span>
<a href="#l10.30"></a><span id="l10.30"> </span>
<a href="#l10.31"></a><span id="l10.31"> /* FIXME</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineat">@@ -434,17 +436,17 @@ var accountWizard = {</span>
<a href="#l10.33"></a><span id="l10.33">       let opt = this.prefs[i];</span>
<a href="#l10.34"></a><span id="l10.34">       let label = bundle.getFormattedString(&quot;accountColon&quot;, [opt.opt.label]);</span>
<a href="#l10.35"></a><span id="l10.35">       rows.appendChild(this.createSummaryRow(label, opt.value));</span>
<a href="#l10.36"></a><span id="l10.36">     }</span>
<a href="#l10.37"></a><span id="l10.37">   },</span>
<a href="#l10.38"></a><span id="l10.38"> </span>
<a href="#l10.39"></a><span id="l10.39">   createAccount: function aw_createAccount() {</span>
<a href="#l10.40"></a><span id="l10.40">     var acc = Services.accounts.createAccount(this.username, this.proto.id);</span>
<a href="#l10.41"></a><span id="l10.41" class="difflineminus">-    if (!this.proto.noPassword)</span>
<a href="#l10.42"></a><span id="l10.42" class="difflineplus">+    if (!this.proto.noPassword &amp;&amp; this.password)</span>
<a href="#l10.43"></a><span id="l10.43">       acc.password = this.password;</span>
<a href="#l10.44"></a><span id="l10.44">     if (this.alias)</span>
<a href="#l10.45"></a><span id="l10.45">       acc.alias = this.alias;</span>
<a href="#l10.46"></a><span id="l10.46">     //FIXME: newMailNotification</span>
<a href="#l10.47"></a><span id="l10.47"> </span>
<a href="#l10.48"></a><span id="l10.48">     for (let i = 0; i &lt; this.prefs.length; ++i) {</span>
<a href="#l10.49"></a><span id="l10.49">       let option = this.prefs[i];</span>
<a href="#l10.50"></a><span id="l10.50">       let opt = option.opt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/im/content/accountWizard.xul</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/im/content/accountWizard.xul</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -93,16 +93,18 @@</span>
<a href="#l11.4"></a><span id="l11.4">   &lt;wizardpage id=&quot;accountpassword&quot; pageid=&quot;accountpassword&quot; next=&quot;accountadvanced&quot;</span>
<a href="#l11.5"></a><span id="l11.5">               label=&quot;&amp;accountPasswordTitle.label;&quot;&gt;</span>
<a href="#l11.6"></a><span id="l11.6">     &lt;description&gt;&amp;accountPasswordInfo.label;&lt;/description&gt;</span>
<a href="#l11.7"></a><span id="l11.7">     &lt;separator/&gt;</span>
<a href="#l11.8"></a><span id="l11.8">     &lt;hbox id=&quot;passwordBox&quot; align=&quot;baseline&quot;&gt;</span>
<a href="#l11.9"></a><span id="l11.9">       &lt;label value=&quot;&amp;accountPasswordField.label;&quot; control=&quot;password&quot; id=&quot;passwordLabel&quot;/&gt;</span>
<a href="#l11.10"></a><span id="l11.10">       &lt;textbox id=&quot;password&quot; type=&quot;password&quot;/&gt;</span>
<a href="#l11.11"></a><span id="l11.11">     &lt;/hbox&gt;</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineplus">+    &lt;separator/&gt;</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+    &lt;description id=&quot;passwordManagerDescription&quot;&gt;&amp;accountPasswordManager.label;&lt;/description&gt;</span>
<a href="#l11.14"></a><span id="l11.14">   &lt;/wizardpage&gt;</span>
<a href="#l11.15"></a><span id="l11.15"> </span>
<a href="#l11.16"></a><span id="l11.16">   &lt;wizardpage id=&quot;accountadvanced&quot; pageid=&quot;accountadvanced&quot; next=&quot;accountsummary&quot;</span>
<a href="#l11.17"></a><span id="l11.17">               label=&quot;&amp;accountAdvancedTitle.label;&quot;</span>
<a href="#l11.18"></a><span id="l11.18">               onpageshow=&quot;accountWizard.showAdvanced();&quot;&gt;</span>
<a href="#l11.19"></a><span id="l11.19">     &lt;description&gt;&amp;accountAdvancedInfo.label;&lt;/description&gt;</span>
<a href="#l11.20"></a><span id="l11.20">     &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l11.21"></a><span id="l11.21">     &lt;groupbox id=&quot;aliasGroupbox&quot; class=&quot;collapsable&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/im/content/accounts.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/im/content/accounts.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -330,18 +330,17 @@ var gAccountManager = {</span>
<a href="#l12.4"></a><span id="l12.4"> </span>
<a href="#l12.5"></a><span id="l12.5">     let account = selectedItem.account;</span>
<a href="#l12.6"></a><span id="l12.6">     let activeCommandName =</span>
<a href="#l12.7"></a><span id="l12.7">       (this.isOffline || account.disconnected) ? &quot;connect&quot; : &quot;disconnect&quot;;</span>
<a href="#l12.8"></a><span id="l12.8">     let activeCommandElt = document.getElementById(&quot;cmd_&quot; + activeCommandName);</span>
<a href="#l12.9"></a><span id="l12.9">     let isCommandDisabled =</span>
<a href="#l12.10"></a><span id="l12.10">       (this.isOffline ||</span>
<a href="#l12.11"></a><span id="l12.11">        (account.disconnected &amp;&amp;</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-        (account.connectionErrorReason == Ci.imIAccount.ERROR_UNKNOWN_PRPL ||</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineminus">-         account.connectionErrorReason == Ci.imIAccount.ERROR_MISSING_PASSWORD)));</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineplus">+        account.connectionErrorReason == Ci.imIAccount.ERROR_UNKNOWN_PRPL));</span>
<a href="#l12.15"></a><span id="l12.15"> </span>
<a href="#l12.16"></a><span id="l12.16">     [[activeCommandElt, isCommandDisabled],</span>
<a href="#l12.17"></a><span id="l12.17">      [document.getElementById(&quot;cmd_moveup&quot;), accountList.selectedIndex == 0],</span>
<a href="#l12.18"></a><span id="l12.18">      [document.getElementById(&quot;cmd_movedown&quot;),</span>
<a href="#l12.19"></a><span id="l12.19">       accountList.selectedIndex == accountList.itemCount - 1]</span>
<a href="#l12.20"></a><span id="l12.20">     ].forEach(function (aEltArray) {</span>
<a href="#l12.21"></a><span id="l12.21">       let [elt, state] = aEltArray;</span>
<a href="#l12.22"></a><span id="l12.22">       if (state)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/im/content/debug/fake/fake.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/im/content/debug/fake/fake.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -333,17 +333,16 @@ function Account(aName, aProto)</span>
<a href="#l13.4"></a><span id="l13.4"> </span>
<a href="#l13.5"></a><span id="l13.5">   dump(&quot;account &quot; + aName + &quot; created\n&quot;);</span>
<a href="#l13.6"></a><span id="l13.6"> }</span>
<a href="#l13.7"></a><span id="l13.7"> Account.prototype = {</span>
<a href="#l13.8"></a><span id="l13.8">   __proto__: ClassInfo(&quot;imIAccount&quot;, &quot;generic account object&quot;),</span>
<a href="#l13.9"></a><span id="l13.9">   protocol: null,</span>
<a href="#l13.10"></a><span id="l13.10">   password: &quot;&quot;,</span>
<a href="#l13.11"></a><span id="l13.11">   autoLogin: true,</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-  rememberPassword: true,</span>
<a href="#l13.13"></a><span id="l13.13">   alias: &quot;&quot;,</span>
<a href="#l13.14"></a><span id="l13.14">   proxyInfo: null,</span>
<a href="#l13.15"></a><span id="l13.15">   connectionStageMsg: &quot;&quot;,</span>
<a href="#l13.16"></a><span id="l13.16">   connectionErrorReason: -1,</span>
<a href="#l13.17"></a><span id="l13.17">   timeOfNextReconnect: 0,</span>
<a href="#l13.18"></a><span id="l13.18">   timeOfLastConnect: new Date(),</span>
<a href="#l13.19"></a><span id="l13.19">   connectionErrorMessage: &quot;&quot;,</span>
<a href="#l13.20"></a><span id="l13.20">   disconnecting: false,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/im/content/preferences/privacy.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/im/content/preferences/privacy.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -34,16 +34,17 @@</span>
<a href="#l14.4"></a><span id="l14.4">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l14.5"></a><span id="l14.5">  *</span>
<a href="#l14.6"></a><span id="l14.6">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l14.7"></a><span id="l14.7"> </span>
<a href="#l14.8"></a><span id="l14.8"> var gPrivacyPane = {</span>
<a href="#l14.9"></a><span id="l14.9">   init: function ()</span>
<a href="#l14.10"></a><span id="l14.10">   {</span>
<a href="#l14.11"></a><span id="l14.11">     this.updateDisabledState();</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineplus">+    this._initMasterPasswordUI();</span>
<a href="#l14.13"></a><span id="l14.13">   },</span>
<a href="#l14.14"></a><span id="l14.14"> </span>
<a href="#l14.15"></a><span id="l14.15">   updateDisabledState: function ()</span>
<a href="#l14.16"></a><span id="l14.16">   {</span>
<a href="#l14.17"></a><span id="l14.17">     let broadcaster = document.getElementById(&quot;idleReportingEnabled&quot;);</span>
<a href="#l14.18"></a><span id="l14.18">     if (document.getElementById(&quot;messenger.status.reportIdle&quot;).value) {</span>
<a href="#l14.19"></a><span id="l14.19">       broadcaster.removeAttribute(&quot;disabled&quot;);</span>
<a href="#l14.20"></a><span id="l14.20">       this.updateMessageDisabledState();</span>
<a href="#l14.21"></a><span id="l14.21" class="difflineat">@@ -85,10 +86,117 @@ var gPrivacyPane = {</span>
<a href="#l14.22"></a><span id="l14.22">        // If launch also fails (probably because it's not implemented), let the</span>
<a href="#l14.23"></a><span id="l14.23">        // OS handler try to open the parent</span>
<a href="#l14.24"></a><span id="l14.24">        let uri = Services.io.newFileURI(parent);</span>
<a href="#l14.25"></a><span id="l14.25">        let protocolSvc = Cc[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;].</span>
<a href="#l14.26"></a><span id="l14.26">                          getService(Ci.nsIExternalProtocolService);</span>
<a href="#l14.27"></a><span id="l14.27">        protocolSvc.loadUrl(uri);</span>
<a href="#l14.28"></a><span id="l14.28">       }</span>
<a href="#l14.29"></a><span id="l14.29">     }</span>
<a href="#l14.30"></a><span id="l14.30" class="difflineplus">+  },</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineplus">+</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineplus">+  /**</span>
<a href="#l14.33"></a><span id="l14.33" class="difflineplus">+   * Initializes master password UI: the &quot;use master password&quot; checkbox, selects</span>
<a href="#l14.34"></a><span id="l14.34" class="difflineplus">+   * the master password button to show, and enables/disables it as necessary.</span>
<a href="#l14.35"></a><span id="l14.35" class="difflineplus">+   * The master password is controlled by various bits of NSS functionality,</span>
<a href="#l14.36"></a><span id="l14.36" class="difflineplus">+   * so the UI for it can't be controlled by the normal preference bindings.</span>
<a href="#l14.37"></a><span id="l14.37" class="difflineplus">+   */</span>
<a href="#l14.38"></a><span id="l14.38" class="difflineplus">+  _initMasterPasswordUI: function ()</span>
<a href="#l14.39"></a><span id="l14.39" class="difflineplus">+  {</span>
<a href="#l14.40"></a><span id="l14.40" class="difflineplus">+    var noMP = !this._masterPasswordSet();</span>
<a href="#l14.41"></a><span id="l14.41" class="difflineplus">+</span>
<a href="#l14.42"></a><span id="l14.42" class="difflineplus">+    document.getElementById(&quot;changeMasterPassword&quot;).disabled = noMP;</span>
<a href="#l14.43"></a><span id="l14.43" class="difflineplus">+</span>
<a href="#l14.44"></a><span id="l14.44" class="difflineplus">+    document.getElementById(&quot;useMasterPassword&quot;).checked = !noMP;</span>
<a href="#l14.45"></a><span id="l14.45" class="difflineplus">+  },</span>
<a href="#l14.46"></a><span id="l14.46" class="difflineplus">+</span>
<a href="#l14.47"></a><span id="l14.47" class="difflineplus">+</span>
<a href="#l14.48"></a><span id="l14.48" class="difflineplus">+  /**</span>
<a href="#l14.49"></a><span id="l14.49" class="difflineplus">+   * Returns true if the user has a master password set and false otherwise.</span>
<a href="#l14.50"></a><span id="l14.50" class="difflineplus">+   */</span>
<a href="#l14.51"></a><span id="l14.51" class="difflineplus">+  _masterPasswordSet: function ()</span>
<a href="#l14.52"></a><span id="l14.52" class="difflineplus">+  {</span>
<a href="#l14.53"></a><span id="l14.53" class="difflineplus">+    const Cc = Components.classes, Ci = Components.interfaces;</span>
<a href="#l14.54"></a><span id="l14.54" class="difflineplus">+    var secmodDB = Cc[&quot;@mozilla.org/security/pkcs11moduledb;1&quot;].</span>
<a href="#l14.55"></a><span id="l14.55" class="difflineplus">+                   getService(Ci.nsIPKCS11ModuleDB);</span>
<a href="#l14.56"></a><span id="l14.56" class="difflineplus">+    var slot = secmodDB.findSlotByName(&quot;&quot;);</span>
<a href="#l14.57"></a><span id="l14.57" class="difflineplus">+    if (slot) {</span>
<a href="#l14.58"></a><span id="l14.58" class="difflineplus">+      var status = slot.status;</span>
<a href="#l14.59"></a><span id="l14.59" class="difflineplus">+      var hasMP = status != Ci.nsIPKCS11Slot.SLOT_UNINITIALIZED &amp;&amp;</span>
<a href="#l14.60"></a><span id="l14.60" class="difflineplus">+                  status != Ci.nsIPKCS11Slot.SLOT_READY;</span>
<a href="#l14.61"></a><span id="l14.61" class="difflineplus">+      return hasMP;</span>
<a href="#l14.62"></a><span id="l14.62" class="difflineplus">+    } else {</span>
<a href="#l14.63"></a><span id="l14.63" class="difflineplus">+      // XXX I have no bloody idea what this means</span>
<a href="#l14.64"></a><span id="l14.64" class="difflineplus">+      return false;</span>
<a href="#l14.65"></a><span id="l14.65" class="difflineplus">+    }</span>
<a href="#l14.66"></a><span id="l14.66" class="difflineplus">+  },</span>
<a href="#l14.67"></a><span id="l14.67" class="difflineplus">+</span>
<a href="#l14.68"></a><span id="l14.68" class="difflineplus">+</span>
<a href="#l14.69"></a><span id="l14.69" class="difflineplus">+  /**</span>
<a href="#l14.70"></a><span id="l14.70" class="difflineplus">+   * Enables/disables the master password button depending on the state of the</span>
<a href="#l14.71"></a><span id="l14.71" class="difflineplus">+   * &quot;use master password&quot; checkbox, and prompts for master password removal</span>
<a href="#l14.72"></a><span id="l14.72" class="difflineplus">+   * if one is set.</span>
<a href="#l14.73"></a><span id="l14.73" class="difflineplus">+   */</span>
<a href="#l14.74"></a><span id="l14.74" class="difflineplus">+  updateMasterPasswordButton: function ()</span>
<a href="#l14.75"></a><span id="l14.75" class="difflineplus">+  {</span>
<a href="#l14.76"></a><span id="l14.76" class="difflineplus">+    var checkbox = document.getElementById(&quot;useMasterPassword&quot;);</span>
<a href="#l14.77"></a><span id="l14.77" class="difflineplus">+    var button = document.getElementById(&quot;changeMasterPassword&quot;);</span>
<a href="#l14.78"></a><span id="l14.78" class="difflineplus">+    button.disabled = !checkbox.checked;</span>
<a href="#l14.79"></a><span id="l14.79" class="difflineplus">+</span>
<a href="#l14.80"></a><span id="l14.80" class="difflineplus">+    // unchecking the checkbox should try to immediately remove the master</span>
<a href="#l14.81"></a><span id="l14.81" class="difflineplus">+    // password, because it's impossible to non-destructively remove the master</span>
<a href="#l14.82"></a><span id="l14.82" class="difflineplus">+    // password used to encrypt all the passwords without providing it (by</span>
<a href="#l14.83"></a><span id="l14.83" class="difflineplus">+    // design), and it would be extremely odd to pop up that dialog when the</span>
<a href="#l14.84"></a><span id="l14.84" class="difflineplus">+    // user closes the prefwindow and saves his settings</span>
<a href="#l14.85"></a><span id="l14.85" class="difflineplus">+    if (!checkbox.checked)</span>
<a href="#l14.86"></a><span id="l14.86" class="difflineplus">+      this._removeMasterPassword();</span>
<a href="#l14.87"></a><span id="l14.87" class="difflineplus">+    else</span>
<a href="#l14.88"></a><span id="l14.88" class="difflineplus">+      this.changeMasterPassword();</span>
<a href="#l14.89"></a><span id="l14.89" class="difflineplus">+</span>
<a href="#l14.90"></a><span id="l14.90" class="difflineplus">+    this._initMasterPasswordUI();</span>
<a href="#l14.91"></a><span id="l14.91" class="difflineplus">+  },</span>
<a href="#l14.92"></a><span id="l14.92" class="difflineplus">+</span>
<a href="#l14.93"></a><span id="l14.93" class="difflineplus">+  /**</span>
<a href="#l14.94"></a><span id="l14.94" class="difflineplus">+   * Displays the &quot;remove master password&quot; dialog to allow the user to remove</span>
<a href="#l14.95"></a><span id="l14.95" class="difflineplus">+   * the current master password.  When the dialog is dismissed, master password</span>
<a href="#l14.96"></a><span id="l14.96" class="difflineplus">+   * UI is automatically updated.</span>
<a href="#l14.97"></a><span id="l14.97" class="difflineplus">+   */</span>
<a href="#l14.98"></a><span id="l14.98" class="difflineplus">+  _removeMasterPassword: function ()</span>
<a href="#l14.99"></a><span id="l14.99" class="difflineplus">+  {</span>
<a href="#l14.100"></a><span id="l14.100" class="difflineplus">+    const Cc = Components.classes, Ci = Components.interfaces;</span>
<a href="#l14.101"></a><span id="l14.101" class="difflineplus">+    var secmodDB = Cc[&quot;@mozilla.org/security/pkcs11moduledb;1&quot;].</span>
<a href="#l14.102"></a><span id="l14.102" class="difflineplus">+                   getService(Ci.nsIPKCS11ModuleDB);</span>
<a href="#l14.103"></a><span id="l14.103" class="difflineplus">+    if (secmodDB.isFIPSEnabled) {</span>
<a href="#l14.104"></a><span id="l14.104" class="difflineplus">+      var promptService = Cc[&quot;@mozilla.org/embedcomp/prompt-service;1&quot;].</span>
<a href="#l14.105"></a><span id="l14.105" class="difflineplus">+                          getService(Ci.nsIPromptService);</span>
<a href="#l14.106"></a><span id="l14.106" class="difflineplus">+      var bundle = document.getElementById(&quot;bundlePreferences&quot;);</span>
<a href="#l14.107"></a><span id="l14.107" class="difflineplus">+      promptService.alert(window,</span>
<a href="#l14.108"></a><span id="l14.108" class="difflineplus">+                          bundle.getString(&quot;pw_change_failed_title&quot;),</span>
<a href="#l14.109"></a><span id="l14.109" class="difflineplus">+                          bundle.getString(&quot;pw_change2empty_in_fips_mode&quot;));</span>
<a href="#l14.110"></a><span id="l14.110" class="difflineplus">+    }</span>
<a href="#l14.111"></a><span id="l14.111" class="difflineplus">+    else {</span>
<a href="#l14.112"></a><span id="l14.112" class="difflineplus">+      document.documentElement.openSubDialog(&quot;chrome://mozapps/content/preferences/removemp.xul&quot;,</span>
<a href="#l14.113"></a><span id="l14.113" class="difflineplus">+                                             &quot;&quot;, null);</span>
<a href="#l14.114"></a><span id="l14.114" class="difflineplus">+    }</span>
<a href="#l14.115"></a><span id="l14.115" class="difflineplus">+    this._initMasterPasswordUI();</span>
<a href="#l14.116"></a><span id="l14.116" class="difflineplus">+  },</span>
<a href="#l14.117"></a><span id="l14.117" class="difflineplus">+</span>
<a href="#l14.118"></a><span id="l14.118" class="difflineplus">+  /**</span>
<a href="#l14.119"></a><span id="l14.119" class="difflineplus">+   * Displays a dialog in which the master password may be changed.</span>
<a href="#l14.120"></a><span id="l14.120" class="difflineplus">+   */</span>
<a href="#l14.121"></a><span id="l14.121" class="difflineplus">+  changeMasterPassword: function ()</span>
<a href="#l14.122"></a><span id="l14.122" class="difflineplus">+  {</span>
<a href="#l14.123"></a><span id="l14.123" class="difflineplus">+    document.documentElement.openSubDialog(&quot;chrome://mozapps/content/preferences/changemp.xul&quot;,</span>
<a href="#l14.124"></a><span id="l14.124" class="difflineplus">+                                           &quot;&quot;, null);</span>
<a href="#l14.125"></a><span id="l14.125" class="difflineplus">+    this._initMasterPasswordUI();</span>
<a href="#l14.126"></a><span id="l14.126" class="difflineplus">+  },</span>
<a href="#l14.127"></a><span id="l14.127" class="difflineplus">+</span>
<a href="#l14.128"></a><span id="l14.128" class="difflineplus">+  /**</span>
<a href="#l14.129"></a><span id="l14.129" class="difflineplus">+   * Shows the sites where the user has saved passwords and the associated</span>
<a href="#l14.130"></a><span id="l14.130" class="difflineplus">+   * login information.</span>
<a href="#l14.131"></a><span id="l14.131" class="difflineplus">+   */</span>
<a href="#l14.132"></a><span id="l14.132" class="difflineplus">+  showPasswords: function ()</span>
<a href="#l14.133"></a><span id="l14.133" class="difflineplus">+  {</span>
<a href="#l14.134"></a><span id="l14.134" class="difflineplus">+    document.documentElement.openWindow(&quot;Toolkit:PasswordManager&quot;,</span>
<a href="#l14.135"></a><span id="l14.135" class="difflineplus">+                                        &quot;chrome://passwordmgr/content/passwordManager.xul&quot;,</span>
<a href="#l14.136"></a><span id="l14.136" class="difflineplus">+                                        &quot;&quot;, null);</span>
<a href="#l14.137"></a><span id="l14.137">   }</span>
<a href="#l14.138"></a><span id="l14.138"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/im/content/preferences/privacy.xul</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/im/content/preferences/privacy.xul</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -58,16 +58,17 @@</span>
<a href="#l15.4"></a><span id="l15.4">                   onchange=&quot;gPrivacyPane.updateDisabledState();&quot;/&gt;</span>
<a href="#l15.5"></a><span id="l15.5">       &lt;preference id=&quot;messenger.status.timeBeforeIdle&quot;     name=&quot;messenger.status.timeBeforeIdle&quot;     type=&quot;int&quot;/&gt;</span>
<a href="#l15.6"></a><span id="l15.6">       &lt;preference id=&quot;messenger.status.awayWhenIdle&quot;       name=&quot;messenger.status.awayWhenIdle&quot;       type=&quot;bool&quot;</span>
<a href="#l15.7"></a><span id="l15.7">                   onchange=&quot;gPrivacyPane.updateMessageDisabledState();&quot;/&gt;</span>
<a href="#l15.8"></a><span id="l15.8">       &lt;preference id=&quot;messenger.status.defaultIdleAwayMessage&quot; name=&quot;messenger.status.defaultIdleAwayMessage&quot; type=&quot;wstring&quot;/&gt;</span>
<a href="#l15.9"></a><span id="l15.9">       &lt;preference id=&quot;purple.logging.log_chats&quot;            name=&quot;purple.logging.log_chats&quot;            type=&quot;bool&quot;/&gt;</span>
<a href="#l15.10"></a><span id="l15.10">       &lt;preference id=&quot;purple.logging.log_ims&quot;              name=&quot;purple.logging.log_ims&quot;              type=&quot;bool&quot;/&gt;</span>
<a href="#l15.11"></a><span id="l15.11">       &lt;preference id=&quot;purple.logging.log_system&quot;           name=&quot;purple.logging.log_system&quot;           type=&quot;bool&quot;/&gt;</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineplus">+      &lt;preference id=&quot;pref.privacy.disable_button.view_passwords&quot; name=&quot;pref.privacy.disable_button.view_passwords&quot; type=&quot;bool&quot;/&gt;</span>
<a href="#l15.13"></a><span id="l15.13">     &lt;/preferences&gt;</span>
<a href="#l15.14"></a><span id="l15.14"> </span>
<a href="#l15.15"></a><span id="l15.15">     &lt;broadcaster id=&quot;idleReportingEnabled&quot;/&gt;</span>
<a href="#l15.16"></a><span id="l15.16"> </span>
<a href="#l15.17"></a><span id="l15.17">     &lt;!-- Status --&gt;</span>
<a href="#l15.18"></a><span id="l15.18">     &lt;groupbox id=&quot;statusGroup&quot;&gt;</span>
<a href="#l15.19"></a><span id="l15.19">       &lt;caption label=&quot;&amp;status.label;&quot;/&gt;</span>
<a href="#l15.20"></a><span id="l15.20">       &lt;hbox align=&quot;center&quot;&gt;</span>
<a href="#l15.21"></a><span id="l15.21" class="difflineat">@@ -112,11 +113,37 @@</span>
<a href="#l15.22"></a><span id="l15.22">         &lt;description control=&quot;openLogFolder&quot;</span>
<a href="#l15.23"></a><span id="l15.23">                      flex=&quot;1&quot;&gt;&amp;logShowFolder.description;&lt;/description&gt;</span>
<a href="#l15.24"></a><span id="l15.24">         &lt;button id=&quot;openLogFolder&quot; label=&quot;&amp;logShowFolderButton.label;&quot;</span>
<a href="#l15.25"></a><span id="l15.25">                 accesskey=&quot;&amp;logShowFolderButton.accesskey;&quot;</span>
<a href="#l15.26"></a><span id="l15.26">                 oncommand=&quot;gPrivacyPane.openLogFolder();&quot;/&gt;</span>
<a href="#l15.27"></a><span id="l15.27">       &lt;/hbox&gt;</span>
<a href="#l15.28"></a><span id="l15.28">     &lt;/groupbox&gt;</span>
<a href="#l15.29"></a><span id="l15.29"> </span>
<a href="#l15.30"></a><span id="l15.30" class="difflineplus">+    &lt;!-- Passwords --&gt;</span>
<a href="#l15.31"></a><span id="l15.31" class="difflineplus">+    &lt;groupbox id=&quot;passwordsGroup&quot; orient=&quot;vertical&quot;&gt;</span>
<a href="#l15.32"></a><span id="l15.32" class="difflineplus">+      &lt;caption label=&quot;&amp;passwords.label;&quot;/&gt;</span>
<a href="#l15.33"></a><span id="l15.33" class="difflineplus">+</span>
<a href="#l15.34"></a><span id="l15.34" class="difflineplus">+      &lt;description&gt;&amp;savedPasswords.intro;&lt;/description&gt;</span>
<a href="#l15.35"></a><span id="l15.35" class="difflineplus">+      &lt;hbox&gt;</span>
<a href="#l15.36"></a><span id="l15.36" class="difflineplus">+        &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l15.37"></a><span id="l15.37" class="difflineplus">+        &lt;button label=&quot;&amp;savedPasswords.label;&quot; accesskey=&quot;&amp;savedPasswords.accesskey;&quot;</span>
<a href="#l15.38"></a><span id="l15.38" class="difflineplus">+                oncommand=&quot;gPrivacyPane.showPasswords();&quot;</span>
<a href="#l15.39"></a><span id="l15.39" class="difflineplus">+                preference=&quot;pref.privacy.disable_button.view_passwords&quot;/&gt;</span>
<a href="#l15.40"></a><span id="l15.40" class="difflineplus">+      &lt;/hbox&gt;</span>
<a href="#l15.41"></a><span id="l15.41" class="difflineplus">+</span>
<a href="#l15.42"></a><span id="l15.42" class="difflineplus">+      &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l15.43"></a><span id="l15.43" class="difflineplus">+</span>
<a href="#l15.44"></a><span id="l15.44" class="difflineplus">+      &lt;description&gt;&amp;masterPassword.intro;&lt;/description&gt;</span>
<a href="#l15.45"></a><span id="l15.45" class="difflineplus">+      &lt;hbox&gt;</span>
<a href="#l15.46"></a><span id="l15.46" class="difflineplus">+        &lt;checkbox id=&quot;useMasterPassword&quot; flex=&quot;1&quot;</span>
<a href="#l15.47"></a><span id="l15.47" class="difflineplus">+                  label=&quot;&amp;useMasterPassword.label;&quot; accesskey=&quot;&amp;useMasterPassword.accesskey;&quot;</span>
<a href="#l15.48"></a><span id="l15.48" class="difflineplus">+                  oncommand=&quot;gPrivacyPane.updateMasterPasswordButton();&quot;/&gt;</span>
<a href="#l15.49"></a><span id="l15.49" class="difflineplus">+</span>
<a href="#l15.50"></a><span id="l15.50" class="difflineplus">+        &lt;button id=&quot;changeMasterPassword&quot;</span>
<a href="#l15.51"></a><span id="l15.51" class="difflineplus">+                label=&quot;&amp;changeMasterPassword.label;&quot; accesskey=&quot;&amp;changeMasterPassword.accesskey;&quot;</span>
<a href="#l15.52"></a><span id="l15.52" class="difflineplus">+                oncommand=&quot;gPrivacyPane.changeMasterPassword();&quot;/&gt;</span>
<a href="#l15.53"></a><span id="l15.53" class="difflineplus">+      &lt;/hbox&gt;</span>
<a href="#l15.54"></a><span id="l15.54" class="difflineplus">+    &lt;/groupbox&gt;</span>
<a href="#l15.55"></a><span id="l15.55" class="difflineplus">+</span>
<a href="#l15.56"></a><span id="l15.56">   &lt;/prefpane&gt;</span>
<a href="#l15.57"></a><span id="l15.57"> </span>
<a href="#l15.58"></a><span id="l15.58"> &lt;/overlay&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/im/locales/en-US/chrome/instantbird/account.dtd</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/im/locales/en-US/chrome/instantbird/account.dtd</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -1,13 +1,12 @@</span>
<a href="#l16.4"></a><span id="l16.4"> &lt;!ENTITY accountWindow.title           &quot;Account properties&quot;&gt;</span>
<a href="#l16.5"></a><span id="l16.5"> &lt;!ENTITY accountWindow.width           &quot;300&quot;&gt;</span>
<a href="#l16.6"></a><span id="l16.6"> &lt;!ENTITY account.general               &quot;General&quot;&gt;</span>
<a href="#l16.7"></a><span id="l16.7"> &lt;!ENTITY account.advanced              &quot;Advanced Options&quot;&gt;</span>
<a href="#l16.8"></a><span id="l16.8"> &lt;!ENTITY account.name                  &quot;Username:&quot;&gt;</span>
<a href="#l16.9"></a><span id="l16.9"> &lt;!ENTITY account.password              &quot;Password:&quot;&gt;</span>
<a href="#l16.10"></a><span id="l16.10" class="difflineminus">-&lt;!ENTITY account.rememberPassword      &quot;remember password&quot;&gt;</span>
<a href="#l16.11"></a><span id="l16.11"> &lt;!ENTITY account.alias                 &quot;Alias:&quot;&gt;</span>
<a href="#l16.12"></a><span id="l16.12"> &lt;!ENTITY account.newMailNotification   &quot;Notify on new Mail&quot;&gt;</span>
<a href="#l16.13"></a><span id="l16.13"> &lt;!ENTITY account.autojoin              &quot;Auto-Joined Channels:&quot;&gt;</span>
<a href="#l16.14"></a><span id="l16.14"> &lt;!ENTITY account.proxySettings.caption &quot;Proxy Settings:&quot;&gt;</span>
<a href="#l16.15"></a><span id="l16.15"> &lt;!ENTITY account.proxySettings.change.label     &quot;Change…&quot;&gt;</span>
<a href="#l16.16"></a><span id="l16.16"> &lt;!ENTITY account.proxySettings.change.accessKey &quot;C&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/im/locales/en-US/chrome/instantbird/accountWizard.dtd</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/im/locales/en-US/chrome/instantbird/accountWizard.dtd</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -9,16 +9,17 @@</span>
<a href="#l17.4"></a><span id="l17.4"> &lt;!ENTITY accountProtocolGetMore.label &quot;Get more…&quot;&gt;</span>
<a href="#l17.5"></a><span id="l17.5"> </span>
<a href="#l17.6"></a><span id="l17.6"> &lt;!ENTITY accountUsernameTitle.label   &quot;Username&quot;&gt;</span>
<a href="#l17.7"></a><span id="l17.7"> &lt;!ENTITY accountUsernameDuplicate.label &quot;This account is already configured!&quot;&gt;</span>
<a href="#l17.8"></a><span id="l17.8"> </span>
<a href="#l17.9"></a><span id="l17.9"> &lt;!ENTITY accountPasswordTitle.label   &quot;Password&quot;&gt;</span>
<a href="#l17.10"></a><span id="l17.10"> &lt;!ENTITY accountPasswordInfo.label    &quot;Please enter your password in the box below.&quot;&gt;</span>
<a href="#l17.11"></a><span id="l17.11"> &lt;!ENTITY accountPasswordField.label   &quot;Password:&quot;&gt;</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineplus">+&lt;!ENTITY accountPasswordManager.label &quot;The password entered here will be stored in the Password Manager. Leave this box empty if you want to be prompted for your password each time this account is connected.&quot;&gt;</span>
<a href="#l17.13"></a><span id="l17.13"> </span>
<a href="#l17.14"></a><span id="l17.14"> &lt;!ENTITY accountAdvancedTitle.label   &quot;Advanced Options&quot;&gt;</span>
<a href="#l17.15"></a><span id="l17.15"> &lt;!ENTITY accountAdvancedInfo.label    &quot;Feel free to skip this step if you want to.&quot;&gt;</span>
<a href="#l17.16"></a><span id="l17.16"> &lt;!ENTITY accountAdvanced.newMailNotification.label   &quot;Notify on new Mail&quot;&gt;</span>
<a href="#l17.17"></a><span id="l17.17"> &lt;!ENTITY accountAliasGroupbox.caption &quot;Local Alias&quot;&gt;</span>
<a href="#l17.18"></a><span id="l17.18"> &lt;!ENTITY accountAliasField.label      &quot;Alias:&quot;&gt;</span>
<a href="#l17.19"></a><span id="l17.19"> &lt;!ENTITY accountAliasInfo.label       &quot;This will only be displayed in your conversations when you talk, remote buddies won't see it.&quot;&gt;</span>
<a href="#l17.20"></a><span id="l17.20"> &lt;!ENTITY accountProxySettings.caption &quot;Proxy Settings&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/im/locales/en-US/chrome/instantbird/accounts.properties</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/im/locales/en-US/chrome/instantbird/accounts.properties</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -2,17 +2,17 @@</span>
<a href="#l18.4"></a><span id="l18.4"> protoOptions=%S Options</span>
<a href="#l18.5"></a><span id="l18.5"> accountUsername=Username:</span>
<a href="#l18.6"></a><span id="l18.6"> accountColon=%S:</span>
<a href="#l18.7"></a><span id="l18.7"> accountUsernameInfo=Please enter the username for your %S account.</span>
<a href="#l18.8"></a><span id="l18.8"> accountUsernameInfoWithDescription=Please enter the username (%S) for your %S account.</span>
<a href="#l18.9"></a><span id="l18.9"> </span>
<a href="#l18.10"></a><span id="l18.10"> account.connection.error=Error: %S</span>
<a href="#l18.11"></a><span id="l18.11"> account.connection.errorUnknownPrpl= No '%S' protocol plugin.</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-account.connection.errorMissingPassword=A password is required to connect this account.</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+account.connection.errorEnteringPasswordRequired=Entering a password is required to connect this account.</span>
<a href="#l18.14"></a><span id="l18.14"> account.connection.errorCrashedAccount=A crash occurred while connecting this account.</span>
<a href="#l18.15"></a><span id="l18.15"> account.connection.progress=Connecting: %S…</span>
<a href="#l18.16"></a><span id="l18.16"> account.connecting=Connecting…</span>
<a href="#l18.17"></a><span id="l18.17"> account.connectedForSeconds=Connected for a few seconds.</span>
<a href="#l18.18"></a><span id="l18.18"> account.connectedForDouble=Connected for %S %S and %S %S.</span>
<a href="#l18.19"></a><span id="l18.19"> account.connectedForSingle=Connected for about %S %S.</span>
<a href="#l18.20"></a><span id="l18.20"> account.reconnectInDouble=Reconnection in %S %S and %S %S.</span>
<a href="#l18.21"></a><span id="l18.21"> account.reconnectInSingle=Reconnection in %S %S.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/im/locales/en-US/chrome/instantbird/preferences/privacy.dtd</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/im/locales/en-US/chrome/instantbird/preferences/privacy.dtd</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -14,8 +14,19 @@</span>
<a href="#l19.4"></a><span id="l19.4"> </span>
<a href="#l19.5"></a><span id="l19.5"> &lt;!ENTITY  logConversations.label        &quot;Keep records of my conversations&quot;&gt;</span>
<a href="#l19.6"></a><span id="l19.6"> &lt;!ENTITY  logConversations.accesskey    &quot;r&quot;&gt;</span>
<a href="#l19.7"></a><span id="l19.7"> &lt;!ENTITY  logSystem.label               &quot;Record connections, disconnections and status changes&quot;&gt;</span>
<a href="#l19.8"></a><span id="l19.8"> &lt;!ENTITY  logSystem.accesskey           &quot;c&quot;&gt;</span>
<a href="#l19.9"></a><span id="l19.9"> &lt;!ENTITY  logShowFolder.description     &quot;Open the folder containing the record files&quot;&gt;</span>
<a href="#l19.10"></a><span id="l19.10"> &lt;!ENTITY  logShowFolderButton.label     &quot;Show Log Folder…&quot;&gt;</span>
<a href="#l19.11"></a><span id="l19.11"> &lt;!ENTITY  logShowFolderButton.accesskey &quot;L&quot;&gt;</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineplus">+</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+&lt;!-- Passwords, see mail/chrome/messenger/preferences/security.dtd --&gt;</span>
<a href="#l19.14"></a><span id="l19.14" class="difflineplus">+&lt;!ENTITY  passwords.label               &quot;Passwords&quot;&gt;</span>
<a href="#l19.15"></a><span id="l19.15" class="difflineplus">+&lt;!ENTITY savedPasswords.intro           &quot;&amp;brandShortName; can remember passwords for all of your accounts.&quot;&gt;</span>
<a href="#l19.16"></a><span id="l19.16" class="difflineplus">+&lt;!ENTITY useMasterPassword.label        &quot;Use a master password&quot;&gt;</span>
<a href="#l19.17"></a><span id="l19.17" class="difflineplus">+&lt;!ENTITY useMasterPassword.accesskey    &quot;U&quot;&gt;</span>
<a href="#l19.18"></a><span id="l19.18" class="difflineplus">+&lt;!ENTITY masterPassword.intro           &quot;A Master Password protects all your passwords, but you must enter it once per session.&quot;&gt;</span>
<a href="#l19.19"></a><span id="l19.19" class="difflineplus">+&lt;!ENTITY changeMasterPassword.label     &quot;Change Master Password…&quot;&gt;</span>
<a href="#l19.20"></a><span id="l19.20" class="difflineplus">+&lt;!ENTITY changeMasterPassword.accesskey &quot;C&quot;&gt;</span>
<a href="#l19.21"></a><span id="l19.21" class="difflineplus">+&lt;!ENTITY savedPasswords.label           &quot;Saved Passwords…&quot;&gt;</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineplus">+&lt;!ENTITY savedPasswords.accesskey       &quot;S&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1">deleted file mode 100644</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineminus">--- a/im/locales/en-US/chrome/instantbird/preferences/security.dtd</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineplus">+++ /dev/null</span>
<a href="#l20.4"></a><span id="l20.4" class="difflineat">@@ -1,42 +0,0 @@</span>
<a href="#l20.5"></a><span id="l20.5" class="difflineminus">-&lt;!ENTITY  warnAddonInstall.label        &quot;Warn me when sites try to install add-ons&quot;&gt;</span>
<a href="#l20.6"></a><span id="l20.6" class="difflineminus">-&lt;!ENTITY  warnAddonInstall.accesskey    &quot;W&quot;&gt;</span>
<a href="#l20.7"></a><span id="l20.7" class="difflineminus">-</span>
<a href="#l20.8"></a><span id="l20.8" class="difflineminus">-&lt;!-- LOCALIZATION NOTE (blockWebForgeries.label, blockAttackSites.label):</span>
<a href="#l20.9"></a><span id="l20.9" class="difflineminus">-  The methods by which forged (phished) and attack sites will be detected by</span>
<a href="#l20.10"></a><span id="l20.10" class="difflineminus">-  phishing providers will vary from human review to machine-based heuristics to a</span>
<a href="#l20.11"></a><span id="l20.11" class="difflineminus">-  combination of both, so it's important that these strings and</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-  useDownloadedList.label convey the meaning &quot;reported&quot; (and not something like</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineminus">-  &quot;known&quot;).</span>
<a href="#l20.14"></a><span id="l20.14" class="difflineminus">---&gt;</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineminus">-&lt;!ENTITY  blockAttackSites.label     &quot;Block reported attack sites&quot;&gt;</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineminus">-&lt;!ENTITY  blockAttackSites.accesskey &quot;k&quot;&gt;</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineminus">-</span>
<a href="#l20.18"></a><span id="l20.18" class="difflineminus">-&lt;!ENTITY  blockWebForgeries.label     &quot;Block reported web forgeries&quot;&gt;</span>
<a href="#l20.19"></a><span id="l20.19" class="difflineminus">-&lt;!ENTITY  blockWebForgeries.accesskey &quot;B&quot;&gt;</span>
<a href="#l20.20"></a><span id="l20.20" class="difflineminus">-</span>
<a href="#l20.21"></a><span id="l20.21" class="difflineminus">-&lt;!ENTITY  addonExceptions.label         &quot;Exceptions…&quot;&gt;</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineminus">-&lt;!ENTITY  addonExceptions.accesskey     &quot;E&quot;&gt;</span>
<a href="#l20.23"></a><span id="l20.23" class="difflineminus">-</span>
<a href="#l20.24"></a><span id="l20.24" class="difflineminus">-</span>
<a href="#l20.25"></a><span id="l20.25" class="difflineminus">-&lt;!ENTITY  passwords.label               &quot;Passwords&quot;&gt;</span>
<a href="#l20.26"></a><span id="l20.26" class="difflineminus">-</span>
<a href="#l20.27"></a><span id="l20.27" class="difflineminus">-&lt;!ENTITY  rememberPasswords.label       &quot;Remember passwords for sites&quot;&gt;</span>
<a href="#l20.28"></a><span id="l20.28" class="difflineminus">-&lt;!ENTITY  rememberPasswords.accesskey   &quot;R&quot;&gt;</span>
<a href="#l20.29"></a><span id="l20.29" class="difflineminus">-&lt;!ENTITY  passwordExceptions.label      &quot;Exceptions…&quot;&gt;</span>
<a href="#l20.30"></a><span id="l20.30" class="difflineminus">-&lt;!ENTITY  passwordExceptions.accesskey  &quot;x&quot;&gt;</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">-</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineminus">-&lt;!ENTITY  useMasterPassword.label        &quot;Use a master password&quot;&gt;</span>
<a href="#l20.33"></a><span id="l20.33" class="difflineminus">-&lt;!ENTITY  useMasterPassword.accesskey    &quot;U&quot;&gt;</span>
<a href="#l20.34"></a><span id="l20.34" class="difflineminus">-&lt;!ENTITY  changeMasterPassword.label     &quot;Change Master Password…&quot;&gt;</span>
<a href="#l20.35"></a><span id="l20.35" class="difflineminus">-&lt;!ENTITY  changeMasterPassword.accesskey &quot;M&quot;&gt;</span>
<a href="#l20.36"></a><span id="l20.36" class="difflineminus">-</span>
<a href="#l20.37"></a><span id="l20.37" class="difflineminus">-&lt;!ENTITY  savedPasswords.label            &quot;Saved Passwords…&quot;&gt;</span>
<a href="#l20.38"></a><span id="l20.38" class="difflineminus">-&lt;!ENTITY  savedPasswords.accesskey        &quot;P&quot;&gt;</span>
<a href="#l20.39"></a><span id="l20.39" class="difflineminus">-</span>
<a href="#l20.40"></a><span id="l20.40" class="difflineminus">-</span>
<a href="#l20.41"></a><span id="l20.41" class="difflineminus">-&lt;!ENTITY  warnings.label                &quot;Warning Messages&quot;&gt;</span>
<a href="#l20.42"></a><span id="l20.42" class="difflineminus">-</span>
<a href="#l20.43"></a><span id="l20.43" class="difflineminus">-&lt;!ENTITY  chooseWarnings.label          &quot;Choose which warning messages you want to see while browsing the web&quot;&gt;</span>
<a href="#l20.44"></a><span id="l20.44" class="difflineminus">-</span>
<a href="#l20.45"></a><span id="l20.45" class="difflineminus">-&lt;!ENTITY  warningSettings.label         &quot;Settings…&quot;&gt;</span>
<a href="#l20.46"></a><span id="l20.46" class="difflineminus">-&lt;!ENTITY  warningSettings.accesskey     &quot;S&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/im/locales/jar.mn</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/im/locales/jar.mn</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -32,12 +32,11 @@</span>
<a href="#l21.4"></a><span id="l21.4"> 	locale/@AB_CD@/instantbird/preferences/applications.dtd (%chrome/instantbird/preferences/applications.dtd)</span>
<a href="#l21.5"></a><span id="l21.5"> 	locale/@AB_CD@/instantbird/preferences/colors.dtd       (%chrome/instantbird/preferences/colors.dtd)</span>
<a href="#l21.6"></a><span id="l21.6"> 	locale/@AB_CD@/instantbird/preferences/connection.dtd   (%chrome/instantbird/preferences/connection.dtd)</span>
<a href="#l21.7"></a><span id="l21.7"> 	locale/@AB_CD@/instantbird/preferences/content.dtd      (%chrome/instantbird/preferences/content.dtd)</span>
<a href="#l21.8"></a><span id="l21.8"> 	locale/@AB_CD@/instantbird/preferences/main.dtd         (%chrome/instantbird/preferences/main.dtd)</span>
<a href="#l21.9"></a><span id="l21.9"> 	locale/@AB_CD@/instantbird/preferences/preferences.dtd  (%chrome/instantbird/preferences/preferences.dtd)</span>
<a href="#l21.10"></a><span id="l21.10"> 	locale/@AB_CD@/instantbird/preferences/preferences.properties (%chrome/instantbird/preferences/preferences.properties)</span>
<a href="#l21.11"></a><span id="l21.11"> 	locale/@AB_CD@/instantbird/preferences/privacy.dtd            (%chrome/instantbird/preferences/privacy.dtd)</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-	locale/@AB_CD@/instantbird/preferences/security.dtd           (%chrome/instantbird/preferences/security.dtd)</span>
<a href="#l21.13"></a><span id="l21.13"> 	locale/@AB_CD@/instantbird/preferences/tabs.dtd               (%chrome/instantbird/preferences/tabs.dtd)</span>
<a href="#l21.14"></a><span id="l21.14"> 	locale/@AB_CD@/instantbird/preferences/themes.dtd             (%chrome/instantbird/preferences/themes.dtd)</span>
<a href="#l21.15"></a><span id="l21.15"> 	locale/@AB_CD@/instantbird/preferences/themes.properties      (%chrome/instantbird/preferences/themes.properties)</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

