<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 28875:e0e05018f705af08c3b98472483c02c69d25d9ec</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ e0e05018f705af08c3b98472483c02c69d25d9ec" />
<meta property="og:url" content="/comm-central/rev/e0e05018f705af08c3b98472483c02c69d25d9ec" />
<meta property="og:description" content="Bug 1518166 - Include libotr and dependencies from build artifacts." />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / e0e05018f705af08c3b98472483c02c69d25d9ec 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/e0e05018f705af08c3b98472483c02c69d25d9ec">shortlog</a> |
<a href="/comm-central/log/e0e05018f705af08c3b98472483c02c69d25d9ec">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/e0e05018f705af08c3b98472483c02c69d25d9ec">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/e0e05018f705af08c3b98472483c02c69d25d9ec">files</a> |
changeset |
<a href="/comm-central/raw-rev/e0e05018f705af08c3b98472483c02c69d25d9ec">raw</a>  | <a href="/comm-central/archive/e0e05018f705af08c3b98472483c02c69d25d9ec.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1518166">Bug 1518166</a> - Include libotr and dependencies from build artifacts.
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#82;&#111;&#98;&#32;&#76;&#101;&#109;&#108;&#101;&#121;&#32;&#60;&#114;&#111;&#98;&#64;&#116;&#104;&#117;&#110;&#100;&#101;&#114;&#98;&#105;&#114;&#100;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 23 Jan 2020 17:20:44 -0500</td></tr>

<tr>
 <td>changeset 28875</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/e0e05018f705af08c3b98472483c02c69d25d9ec">e0e05018f705af08c3b98472483c02c69d25d9ec</a></td>
</tr>



<tr>
<td>parent 28874</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/32b795794bfa328f78f81850686241e1bbae66bf">32b795794bfa328f78f81850686241e1bbae66bf</a>
</td>
</tr>

<tr>
<td>child 28876</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/77c269c63ddcf34fa4260cc4992433bd9b6a3817">77c269c63ddcf34fa4260cc4992433bd9b6a3817</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=e0e05018f705af08c3b98472483c02c69d25d9ec">17087</a></td></tr>
<tr><td>push user</td><td>thunderbird@calypsoblue.org</td></tr>
<tr><td>push date</td><td class="date age">Mon, 02 Mar 2020 20:11:30 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@e0e05018f705 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=e0e05018f705af08c3b98472483c02c69d25d9ec">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=e0e05018f705af08c3b98472483c02c69d25d9ec&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=e0e05018f705af08c3b98472483c02c69d25d9ec&newProject=comm-central&newRevision=05deee4d94212ea3a0532e455dbc0c57eb936370&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=e0e05018f705af08c3b98472483c02c69d25d9ec&newProject=comm-central&newRevision=05deee4d94212ea3a0532e455dbc0c57eb936370&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=e0e05018f705af08c3b98472483c02c69d25d9ec&newProject=comm-central&newRevision=05deee4d94212ea3a0532e455dbc0c57eb936370&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>

<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1518166">1518166</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1518166">Bug 1518166</a> - Include libotr and dependencies from build artifacts.

Copy libotr libraries from $MOZ_FETCHES_DIR to objdir/dist/bin during the
libs phase of the build process.
Update package-manifest.in accordingly do it's included in the final package.

This step is configured so that it only runs when building on Taskcluster.
It's expected that distributions packaging their own builds will have libotr
own libotr package and will not need to have it bundled.</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/installer/Makefile.in">mail/installer/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/installer/Makefile.in">file</a> |
<a href="/comm-central/annotate/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/installer/Makefile.in">annotate</a> |
<a href="/comm-central/diff/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/installer/Makefile.in">diff</a> |
<a href="/comm-central/comparison/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/installer/Makefile.in">comparison</a> |
<a href="/comm-central/log/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/installer/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/installer/package-manifest.in">mail/installer/package-manifest.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/installer/package-manifest.in">file</a> |
<a href="/comm-central/annotate/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/installer/package-manifest.in">annotate</a> |
<a href="/comm-central/diff/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/installer/package-manifest.in">diff</a> |
<a href="/comm-central/comparison/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/installer/package-manifest.in">comparison</a> |
<a href="/comm-central/log/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/installer/package-manifest.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/moz.build">mail/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/moz.build">file</a> |
<a href="/comm-central/annotate/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/moz.build">annotate</a> |
<a href="/comm-central/diff/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/moz.build">diff</a> |
<a href="/comm-central/comparison/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/moz.build">comparison</a> |
<a href="/comm-central/log/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/moz.configure">mail/moz.configure</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/moz.configure">file</a> |
<a href="/comm-central/annotate/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/moz.configure">annotate</a> |
<a href="/comm-central/diff/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/moz.configure">diff</a> |
<a href="/comm-central/comparison/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/moz.configure">comparison</a> |
<a href="/comm-central/log/e0e05018f705af08c3b98472483c02c69d25d9ec/mail/moz.configure">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e0e05018f705af08c3b98472483c02c69d25d9ec/third_party/Makefile.in">third_party/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e0e05018f705af08c3b98472483c02c69d25d9ec/third_party/Makefile.in">file</a> |
<a href="/comm-central/annotate/e0e05018f705af08c3b98472483c02c69d25d9ec/third_party/Makefile.in">annotate</a> |
<a href="/comm-central/diff/e0e05018f705af08c3b98472483c02c69d25d9ec/third_party/Makefile.in">diff</a> |
<a href="/comm-central/comparison/e0e05018f705af08c3b98472483c02c69d25d9ec/third_party/Makefile.in">comparison</a> |
<a href="/comm-central/log/e0e05018f705af08c3b98472483c02c69d25d9ec/third_party/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e0e05018f705af08c3b98472483c02c69d25d9ec/third_party/moz.build">third_party/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e0e05018f705af08c3b98472483c02c69d25d9ec/third_party/moz.build">file</a> |
<a href="/comm-central/annotate/e0e05018f705af08c3b98472483c02c69d25d9ec/third_party/moz.build">annotate</a> |
<a href="/comm-central/diff/e0e05018f705af08c3b98472483c02c69d25d9ec/third_party/moz.build">diff</a> |
<a href="/comm-central/comparison/e0e05018f705af08c3b98472483c02c69d25d9ec/third_party/moz.build">comparison</a> |
<a href="/comm-central/log/e0e05018f705af08c3b98472483c02c69d25d9ec/third_party/moz.build">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/installer/Makefile.in</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/installer/Makefile.in</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -165,16 +165,20 @@ endif</span>
<a href="#l1.4"></a><span id="l1.4"> </span>
<a href="#l1.5"></a><span id="l1.5"> ifdef CLANG_CXX</span>
<a href="#l1.6"></a><span id="l1.6"> DEFINES += -DCLANG_CXX</span>
<a href="#l1.7"></a><span id="l1.7"> endif</span>
<a href="#l1.8"></a><span id="l1.8"> ifdef CLANG_CL</span>
<a href="#l1.9"></a><span id="l1.9"> DEFINES += -DCLANG_CL</span>
<a href="#l1.10"></a><span id="l1.10"> endif</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+ifdef TB_LIBOTR_PREBUILT</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+DEFINES += -DTB_LIBOTR_PREBUILT</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+endif</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+</span>
<a href="#l1.16"></a><span id="l1.16"> libs::</span>
<a href="#l1.17"></a><span id="l1.17"> 	$(MAKE) -C $(commtopobjdir)/mail/locales langpack</span>
<a href="#l1.18"></a><span id="l1.18"> </span>
<a href="#l1.19"></a><span id="l1.19"> ifeq (WINNT,$(OS_ARCH))</span>
<a href="#l1.20"></a><span id="l1.20"> PKGCOMP_FIND_OPTS =</span>
<a href="#l1.21"></a><span id="l1.21"> else</span>
<a href="#l1.22"></a><span id="l1.22"> PKGCOMP_FIND_OPTS = -L</span>
<a href="#l1.23"></a><span id="l1.23"> endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/installer/package-manifest.in</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/installer/package-manifest.in</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -216,16 +216,34 @@</span>
<a href="#l2.4"></a><span id="l2.4"> ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<a href="#l2.5"></a><span id="l2.5"> @RESPATH@/@PREF_DIR@/chat-prefs.js</span>
<a href="#l2.6"></a><span id="l2.6"> @RESPATH@/chrome/chat@JAREXT@</span>
<a href="#l2.7"></a><span id="l2.7"> @RESPATH@/chrome/chat.manifest</span>
<a href="#l2.8"></a><span id="l2.8"> </span>
<a href="#l2.9"></a><span id="l2.9"> ; Thunderbird specific</span>
<a href="#l2.10"></a><span id="l2.10"> @RESPATH@/@PREF_DIR@/all-im.js</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+; OTR libraries</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+#ifdef TB_LIBOTR_PREBUILT</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+#ifdef XP_WIN</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+@BINPATH@/libotr-5.dll</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineplus">+@BINPATH@/libgcrypt-20.dll</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineplus">+@BINPATH@/libssp-0.dll</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineplus">+#ifdef _AMD64_</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+@BINPATH@/libgpg-error6-0.dll</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineplus">+#else</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineplus">+@BINPATH@/libgpg-error-0.dll</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineplus">+#endif</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineplus">+#elif defined(XP_MACOSX)</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineplus">+@BINPATH@/libotr.5.dylib</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineplus">+#elif defined(XP_LINUX)</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineplus">+@BINPATH@/libotr.so.5</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineplus">+#endif</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineplus">+#endif</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineplus">+</span>
<a href="#l2.30"></a><span id="l2.30"> ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<a href="#l2.31"></a><span id="l2.31"> ; Chrome Files</span>
<a href="#l2.32"></a><span id="l2.32"> ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<a href="#l2.33"></a><span id="l2.33"> </span>
<a href="#l2.34"></a><span id="l2.34"> @RESPATH@/chrome/classic@JAREXT@</span>
<a href="#l2.35"></a><span id="l2.35"> @RESPATH@/chrome/classic.manifest</span>
<a href="#l2.36"></a><span id="l2.36"> </span>
<a href="#l2.37"></a><span id="l2.37"> ; [DevTools Startup Files]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/moz.build</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/moz.build</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -16,15 +16,17 @@ DIRS += [</span>
<a href="#l3.4"></a><span id="l3.4"> ]</span>
<a href="#l3.5"></a><span id="l3.5"> </span>
<a href="#l3.6"></a><span id="l3.6"> if CONFIG['MAKENSISU']:</span>
<a href="#l3.7"></a><span id="l3.7">     DIRS += ['installer/windows']</span>
<a href="#l3.8"></a><span id="l3.8"> </span>
<a href="#l3.9"></a><span id="l3.9"> if CONFIG['MOZ_BUNDLED_FONTS']:</span>
<a href="#l3.10"></a><span id="l3.10">     DIRS += ['/%s/browser/fonts' % CONFIG['mozreltopsrcdir']]</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+DIRS += ['../third_party']</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+</span>
<a href="#l3.14"></a><span id="l3.14"> TEST_DIRS += [</span>
<a href="#l3.15"></a><span id="l3.15">     'test/browser',</span>
<a href="#l3.16"></a><span id="l3.16">     'test/marionette',</span>
<a href="#l3.17"></a><span id="l3.17">     'test/static',</span>
<a href="#l3.18"></a><span id="l3.18"> ]</span>
<a href="#l3.19"></a><span id="l3.19"> </span>
<a href="#l3.20"></a><span id="l3.20"> FINAL_TARGET_FILES.defaults += ['app/permissions']</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/moz.configure</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/moz.configure</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -75,16 +75,32 @@ imply_option('MOZ_BLOCK_PROFILE_DOWNGRAD</span>
<a href="#l4.4"></a><span id="l4.4"> </span>
<a href="#l4.5"></a><span id="l4.5"> with only_when(target_is_linux &amp; compile_environment):</span>
<a href="#l4.6"></a><span id="l4.6">     option(env='MOZ_NO_PIE_COMPAT',</span>
<a href="#l4.7"></a><span id="l4.7">            help='Enable non-PIE wrapper')</span>
<a href="#l4.8"></a><span id="l4.8"> </span>
<a href="#l4.9"></a><span id="l4.9">     set_config('MOZ_NO_PIE_COMPAT',</span>
<a href="#l4.10"></a><span id="l4.10">                depends_if('MOZ_NO_PIE_COMPAT')(lambda _: True))</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+@depends('MOZ_AUTOMATION')</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+@imports(_from='os', _import='environ')</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+@imports(_from='six', _import='ensure_text')</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+def pkg_libotr(automation):</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+    if automation:</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+        fetch_dir = environ.get('MOZ_FETCHES_DIR', None)</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineplus">+        if fetch_dir:</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineplus">+            log.info('Including libotr from {}'.format(fetch_dir))</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineplus">+            return ensure_text(fetch_dir)</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineplus">+</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineplus">+        log.info('TB_LIBOTR_PREBUILT is set, but MOZ_FETCHES_DIR is invalid.')</span>
<a href="#l4.24"></a><span id="l4.24" class="difflineplus">+</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineplus">+set_config('TB_LIBOTR_PREBUILT', pkg_libotr)</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineplus">+</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineplus">+</span>
<a href="#l4.28"></a><span id="l4.28"> set_config('MOZ_TELEMETRY_EXTRA_HISTOGRAM_FILES', ['/comm/mail/components/telemetry/Histograms.json'])</span>
<a href="#l4.29"></a><span id="l4.29"> set_config('MOZ_TELEMETRY_EXTRA_SCALAR_FILES', ['/comm/mail/components/telemetry/Scalars.yaml'])</span>
<a href="#l4.30"></a><span id="l4.30"> set_config('MOZ_TELEMETRY_EXTRA_EVENT_FILES', ['/comm/mail/components/telemetry/Events.yaml'])</span>
<a href="#l4.31"></a><span id="l4.31"> </span>
<a href="#l4.32"></a><span id="l4.32"> include('../build/moz.configure/gecko_source.configure')</span>
<a href="#l4.33"></a><span id="l4.33"> </span>
<a href="#l4.34"></a><span id="l4.34"> include('../mailnews/moz.configure')</span>
<a href="#l4.35"></a><span id="l4.35"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1">new file mode 100644</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineminus">--- /dev/null</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineplus">+++ b/third_party/Makefile.in</span>
<a href="#l5.4"></a><span id="l5.4" class="difflineat">@@ -0,0 +1,38 @@</span>
<a href="#l5.5"></a><span id="l5.5" class="difflineplus">+# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l5.6"></a><span id="l5.6" class="difflineplus">+# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l5.7"></a><span id="l5.7" class="difflineplus">+# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l5.8"></a><span id="l5.8" class="difflineplus">+</span>
<a href="#l5.9"></a><span id="l5.9" class="difflineplus">+</span>
<a href="#l5.10"></a><span id="l5.10" class="difflineplus">+include $(moztopsrcdir)/config/config.mk</span>
<a href="#l5.11"></a><span id="l5.11" class="difflineplus">+include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+print-%: ; @echo $* is $($*)</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+origin-%: ; @echo $* origin $(origin $*)</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineplus">+</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+ifdef TB_LIBOTR_PREBUILT</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineplus">+</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineplus">+ifeq (WINNT,$(OS_ARCH))</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineplus">+ifdef HAVE_64BIT_BUILD</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineplus">+OTR_LIBS := libgpg-error6-0.dll</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineplus">+else</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineplus">+OTR_LIBS := libgpg-error-0.dll</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineplus">+endif</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineplus">+OTR_LIBS += libgcrypt-20.dll \</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineplus">+	libotr-5.dll \</span>
<a href="#l5.26"></a><span id="l5.26" class="difflineplus">+	libssp-0.dll</span>
<a href="#l5.27"></a><span id="l5.27" class="difflineplus">+endif</span>
<a href="#l5.28"></a><span id="l5.28" class="difflineplus">+</span>
<a href="#l5.29"></a><span id="l5.29" class="difflineplus">+ifeq (Darwin,$(OS_ARCH))</span>
<a href="#l5.30"></a><span id="l5.30" class="difflineplus">+OTR_LIBS := libotr.5.dylib</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineplus">+endif</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+</span>
<a href="#l5.33"></a><span id="l5.33" class="difflineplus">+ifeq (Linux,$(OS_ARCH))</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineplus">+OTR_LIBS := libotr.so.5</span>
<a href="#l5.35"></a><span id="l5.35" class="difflineplus">+endif</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineplus">+</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineplus">+OTR_LIB_PATHS := $(foreach otrlib,$(OTR_LIBS),$(TB_LIBOTR_PREBUILT)/$(otrlib))</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineplus">+</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineplus">+libs:: $(OTR_LIB_PATHS)</span>
<a href="#l5.40"></a><span id="l5.40" class="difflineplus">+	$(NSINSTALL) -t -m 755 $(OTR_LIB_PATHS) $(DIST)/bin</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineplus">+</span>
<a href="#l5.42"></a><span id="l5.42" class="difflineplus">+endif   ## TB_LIBOTR_PREBUILT</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1">new file mode 100644</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineminus">--- /dev/null</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineplus">+++ b/third_party/moz.build</span>
<a href="#l6.4"></a><span id="l6.4" class="difflineat">@@ -0,0 +1,10 @@</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineplus">+# vim: set filetype=python:</span>
<a href="#l6.6"></a><span id="l6.6" class="difflineplus">+# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l6.7"></a><span id="l6.7" class="difflineplus">+# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l6.8"></a><span id="l6.8" class="difflineplus">+# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l6.9"></a><span id="l6.9" class="difflineplus">+</span>
<a href="#l6.10"></a><span id="l6.10" class="difflineplus">+if CONFIG['TB_LIBOTR_PREBUILT']:</span>
<a href="#l6.11"></a><span id="l6.11" class="difflineplus">+    DEFINES['TB_LIBOTR_PREBUILT'] = CONFIG['TB_LIBOTR_PREBUILT']</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+    if CONFIG['HAVE_64BIT_BUILD']:</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+        DEFINES['HAVE_64BIT_BUILD'] = True</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:31Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

