<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 3439:5c26af85988a8fdd672f22d05452d3ab0009fa5e</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 5c26af85988a8fdd672f22d05452d3ab0009fa5e" />
<meta property="og:url" content="/comm-central/rev/5c26af85988a8fdd672f22d05452d3ab0009fa5e" />
<meta property="og:description" content="Bug 119459 - &quot;Option to add a photo/image/picture to each entry of the addressbook&quot; [r=Standard8 sr=bienvenu ui-review=clarkbw]" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 5c26af85988a8fdd672f22d05452d3ab0009fa5e 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/5c26af85988a8fdd672f22d05452d3ab0009fa5e">shortlog</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/5c26af85988a8fdd672f22d05452d3ab0009fa5e">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e">files</a> |
changeset |
<a href="/comm-central/raw-rev/5c26af85988a8fdd672f22d05452d3ab0009fa5e">raw</a>  | <a href="/comm-central/archive/5c26af85988a8fdd672f22d05452d3ab0009fa5e.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=119459">Bug 119459</a> - &quot;Option to add a photo/image/picture to each entry of the addressbook&quot; [r=Standard8 sr=bienvenu ui-review=clarkbw]
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#74;&#111;&#115;&#104;&#32;&#71;&#101;&#101;&#110;&#101;&#110;&#32;&#60;&#106;&#111;&#115;&#104;&#103;&#101;&#101;&#110;&#101;&#110;&#43;&#98;&#117;&#103;&#122;&#105;&#108;&#108;&#97;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 27 Aug 2009 22:27:20 +0100</td></tr>

<tr>
 <td>changeset 3439</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/5c26af85988a8fdd672f22d05452d3ab0009fa5e">5c26af85988a8fdd672f22d05452d3ab0009fa5e</a></td>
</tr>



<tr>
<td>parent 3438</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/220ad101680c30e87e650eff6c545863e58f6a7d">220ad101680c30e87e650eff6c545863e58f6a7d</a>
</td>
</tr>

<tr>
<td>child 3440</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/d92896496cf2454bd053c1455e207549fe3fe13f">d92896496cf2454bd053c1455e207549fe3fe13f</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=5c26af85988a8fdd672f22d05452d3ab0009fa5e">2792</a></td></tr>
<tr><td>push user</td><td>bugzilla@standard8.plus.com</td></tr>
<tr><td>push date</td><td class="date age">Thu, 27 Aug 2009 21:28:31 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@5c26af85988a [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=5c26af85988a8fdd672f22d05452d3ab0009fa5e">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=5c26af85988a8fdd672f22d05452d3ab0009fa5e&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=5c26af85988a8fdd672f22d05452d3ab0009fa5e&newProject=comm-central&newRevision=5c26af85988a8fdd672f22d05452d3ab0009fa5e&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=5c26af85988a8fdd672f22d05452d3ab0009fa5e&newProject=comm-central&newRevision=5c26af85988a8fdd672f22d05452d3ab0009fa5e&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=5c26af85988a8fdd672f22d05452d3ab0009fa5e&newProject=comm-central&newRevision=5c26af85988a8fdd672f22d05452d3ab0009fa5e&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Standard8%29&revcount=50">Standard8</a>, <a href="/comm-central/log?rev=reviewer%28bienvenu%29&revcount=50">bienvenu</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=119459">119459</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=119459">Bug 119459</a> - &quot;Option to add a photo/image/picture to each entry of the addressbook&quot; [r=Standard8 sr=bienvenu ui-review=clarkbw]</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/abCardOverlay.js">mail/components/addrbook/content/abCardOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/abCardOverlay.js">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/abCardOverlay.js">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/abCardOverlay.js">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/abCardOverlay.js">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/abCardOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/abCardViewOverlay.js">mail/components/addrbook/content/abCardViewOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/abCardViewOverlay.js">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/abCardViewOverlay.js">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/abCardViewOverlay.js">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/abCardViewOverlay.js">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/abCardViewOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/abCommon.js">mail/components/addrbook/content/abCommon.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/abCommon.js">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/abCommon.js">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/abCommon.js">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/abCommon.js">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/abCommon.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/addressbook.xul">mail/components/addrbook/content/addressbook.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/addressbook.xul">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/addressbook.xul">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/addressbook.xul">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/addressbook.xul">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/components/addrbook/content/addressbook.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/locales/en-US/chrome/messenger/addressbook/abCardOverlay.dtd">mail/locales/en-US/chrome/messenger/addressbook/abCardOverlay.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/locales/en-US/chrome/messenger/addressbook/abCardOverlay.dtd">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/locales/en-US/chrome/messenger/addressbook/abCardOverlay.dtd">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/locales/en-US/chrome/messenger/addressbook/abCardOverlay.dtd">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/locales/en-US/chrome/messenger/addressbook/abCardOverlay.dtd">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/locales/en-US/chrome/messenger/addressbook/abCardOverlay.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/locales/en-US/chrome/messenger/addressbook/addressBook.properties">mail/locales/en-US/chrome/messenger/addressbook/addressBook.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/locales/en-US/chrome/messenger/addressbook/addressBook.properties">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/locales/en-US/chrome/messenger/addressbook/addressBook.properties">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/locales/en-US/chrome/messenger/addressbook/addressBook.properties">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/locales/en-US/chrome/messenger/addressbook/addressBook.properties">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/locales/en-US/chrome/messenger/addressbook/addressBook.properties">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/gnomestripe/jar.mn">mail/themes/gnomestripe/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/gnomestripe/jar.mn">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/gnomestripe/jar.mn">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/gnomestripe/jar.mn">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/gnomestripe/jar.mn">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/gnomestripe/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/gnomestripe/mail/addrbook/contact-generic-tiny.png">mail/themes/gnomestripe/mail/addrbook/contact-generic-tiny.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/gnomestripe/mail/addrbook/contact-generic-tiny.png">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/gnomestripe/mail/addrbook/contact-generic-tiny.png">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/gnomestripe/mail/addrbook/contact-generic-tiny.png">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/gnomestripe/mail/addrbook/contact-generic-tiny.png">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/gnomestripe/mail/addrbook/contact-generic-tiny.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/gnomestripe/mail/addrbook/contact-generic.png">mail/themes/gnomestripe/mail/addrbook/contact-generic.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/gnomestripe/mail/addrbook/contact-generic.png">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/gnomestripe/mail/addrbook/contact-generic.png">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/gnomestripe/mail/addrbook/contact-generic.png">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/gnomestripe/mail/addrbook/contact-generic.png">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/gnomestripe/mail/addrbook/contact-generic.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/pinstripe/jar.mn">mail/themes/pinstripe/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/pinstripe/jar.mn">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/pinstripe/jar.mn">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/pinstripe/jar.mn">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/pinstripe/jar.mn">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/pinstripe/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/pinstripe/mail/addrbook/contact-generic-tiny.png">mail/themes/pinstripe/mail/addrbook/contact-generic-tiny.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/pinstripe/mail/addrbook/contact-generic-tiny.png">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/pinstripe/mail/addrbook/contact-generic-tiny.png">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/pinstripe/mail/addrbook/contact-generic-tiny.png">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/pinstripe/mail/addrbook/contact-generic-tiny.png">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/pinstripe/mail/addrbook/contact-generic-tiny.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/pinstripe/mail/addrbook/contact-generic.png">mail/themes/pinstripe/mail/addrbook/contact-generic.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/pinstripe/mail/addrbook/contact-generic.png">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/pinstripe/mail/addrbook/contact-generic.png">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/pinstripe/mail/addrbook/contact-generic.png">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/pinstripe/mail/addrbook/contact-generic.png">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/pinstripe/mail/addrbook/contact-generic.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/qute/jar.mn">mail/themes/qute/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/qute/jar.mn">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/qute/jar.mn">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/qute/jar.mn">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/qute/jar.mn">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/qute/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/qute/mail/addrbook/contact-generic-tiny.png">mail/themes/qute/mail/addrbook/contact-generic-tiny.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/qute/mail/addrbook/contact-generic-tiny.png">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/qute/mail/addrbook/contact-generic-tiny.png">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/qute/mail/addrbook/contact-generic-tiny.png">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/qute/mail/addrbook/contact-generic-tiny.png">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/qute/mail/addrbook/contact-generic-tiny.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/qute/mail/addrbook/contact-generic.png">mail/themes/qute/mail/addrbook/contact-generic.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/qute/mail/addrbook/contact-generic.png">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/qute/mail/addrbook/contact-generic.png">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/qute/mail/addrbook/contact-generic.png">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/qute/mail/addrbook/contact-generic.png">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mail/themes/qute/mail/addrbook/contact-generic.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mailnews/addrbook/content/abCardOverlay.xul">mailnews/addrbook/content/abCardOverlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mailnews/addrbook/content/abCardOverlay.xul">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mailnews/addrbook/content/abCardOverlay.xul">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mailnews/addrbook/content/abCardOverlay.xul">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mailnews/addrbook/content/abCardOverlay.xul">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mailnews/addrbook/content/abCardOverlay.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mailnews/addrbook/content/abCardViewOverlay.xul">mailnews/addrbook/content/abCardViewOverlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mailnews/addrbook/content/abCardViewOverlay.xul">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mailnews/addrbook/content/abCardViewOverlay.xul">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mailnews/addrbook/content/abCardViewOverlay.xul">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mailnews/addrbook/content/abCardViewOverlay.xul">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mailnews/addrbook/content/abCardViewOverlay.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mailnews/addrbook/public/nsIAbCard.idl">mailnews/addrbook/public/nsIAbCard.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mailnews/addrbook/public/nsIAbCard.idl">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mailnews/addrbook/public/nsIAbCard.idl">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mailnews/addrbook/public/nsIAbCard.idl">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mailnews/addrbook/public/nsIAbCard.idl">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/mailnews/addrbook/public/nsIAbCard.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/locales/en-US/chrome/mailnews/addressbook/abCardOverlay.dtd">suite/locales/en-US/chrome/mailnews/addressbook/abCardOverlay.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/locales/en-US/chrome/mailnews/addressbook/abCardOverlay.dtd">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/locales/en-US/chrome/mailnews/addressbook/abCardOverlay.dtd">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/locales/en-US/chrome/mailnews/addressbook/abCardOverlay.dtd">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/locales/en-US/chrome/mailnews/addressbook/abCardOverlay.dtd">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/locales/en-US/chrome/mailnews/addressbook/abCardOverlay.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/locales/en-US/chrome/mailnews/addressbook/addressBook.properties">suite/locales/en-US/chrome/mailnews/addressbook/addressBook.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/locales/en-US/chrome/mailnews/addressbook/addressBook.properties">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/locales/en-US/chrome/mailnews/addressbook/addressBook.properties">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/locales/en-US/chrome/mailnews/addressbook/addressBook.properties">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/locales/en-US/chrome/mailnews/addressbook/addressBook.properties">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/locales/en-US/chrome/mailnews/addressbook/addressBook.properties">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/mailnews/addrbook/abCardOverlay.js">suite/mailnews/addrbook/abCardOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/mailnews/addrbook/abCardOverlay.js">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/mailnews/addrbook/abCardOverlay.js">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/mailnews/addrbook/abCardOverlay.js">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/mailnews/addrbook/abCardOverlay.js">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/mailnews/addrbook/abCardOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/mailnews/addrbook/abCardViewOverlay.js">suite/mailnews/addrbook/abCardViewOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/mailnews/addrbook/abCardViewOverlay.js">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/mailnews/addrbook/abCardViewOverlay.js">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/mailnews/addrbook/abCardViewOverlay.js">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/mailnews/addrbook/abCardViewOverlay.js">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/mailnews/addrbook/abCardViewOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/mailnews/addrbook/abCommon.js">suite/mailnews/addrbook/abCommon.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/mailnews/addrbook/abCommon.js">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/mailnews/addrbook/abCommon.js">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/mailnews/addrbook/abCommon.js">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/mailnews/addrbook/abCommon.js">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/mailnews/addrbook/abCommon.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/classic/jar.mn">suite/themes/classic/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/classic/jar.mn">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/classic/jar.mn">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/classic/jar.mn">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/classic/jar.mn">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/classic/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/classic/messenger/addressbook/icons/contact-generic-tiny.png">suite/themes/classic/messenger/addressbook/icons/contact-generic-tiny.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/classic/messenger/addressbook/icons/contact-generic-tiny.png">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/classic/messenger/addressbook/icons/contact-generic-tiny.png">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/classic/messenger/addressbook/icons/contact-generic-tiny.png">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/classic/messenger/addressbook/icons/contact-generic-tiny.png">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/classic/messenger/addressbook/icons/contact-generic-tiny.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/classic/messenger/addressbook/icons/contact-generic.png">suite/themes/classic/messenger/addressbook/icons/contact-generic.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/classic/messenger/addressbook/icons/contact-generic.png">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/classic/messenger/addressbook/icons/contact-generic.png">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/classic/messenger/addressbook/icons/contact-generic.png">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/classic/messenger/addressbook/icons/contact-generic.png">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/classic/messenger/addressbook/icons/contact-generic.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/modern/jar.mn">suite/themes/modern/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/modern/jar.mn">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/modern/jar.mn">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/modern/jar.mn">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/modern/jar.mn">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/modern/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/modern/messenger/addressbook/icons/contact-generic-tiny.png">suite/themes/modern/messenger/addressbook/icons/contact-generic-tiny.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/modern/messenger/addressbook/icons/contact-generic-tiny.png">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/modern/messenger/addressbook/icons/contact-generic-tiny.png">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/modern/messenger/addressbook/icons/contact-generic-tiny.png">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/modern/messenger/addressbook/icons/contact-generic-tiny.png">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/modern/messenger/addressbook/icons/contact-generic-tiny.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/modern/messenger/addressbook/icons/contact-generic.png">suite/themes/modern/messenger/addressbook/icons/contact-generic.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/modern/messenger/addressbook/icons/contact-generic.png">file</a> |
<a href="/comm-central/annotate/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/modern/messenger/addressbook/icons/contact-generic.png">annotate</a> |
<a href="/comm-central/diff/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/modern/messenger/addressbook/icons/contact-generic.png">diff</a> |
<a href="/comm-central/comparison/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/modern/messenger/addressbook/icons/contact-generic.png">comparison</a> |
<a href="/comm-central/log/5c26af85988a8fdd672f22d05452d3ab0009fa5e/suite/themes/modern/messenger/addressbook/icons/contact-generic.png">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/components/addrbook/content/abCardOverlay.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/components/addrbook/content/abCardOverlay.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -33,17 +33,17 @@</span>
<a href="#l1.4"></a><span id="l1.4"> # and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l1.5"></a><span id="l1.5"> # the provisions above, a recipient may use your version of this file under</span>
<a href="#l1.6"></a><span id="l1.6"> # the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l1.7"></a><span id="l1.7"> #</span>
<a href="#l1.8"></a><span id="l1.8"> # ***** END LICENSE BLOCK *****</span>
<a href="#l1.9"></a><span id="l1.9"> </span>
<a href="#l1.10"></a><span id="l1.10"> const kNonVcardFields =</span>
<a href="#l1.11"></a><span id="l1.11">         [&quot;nickNameContainer&quot;, &quot;secondaryEmailContainer&quot;, &quot;screenNameContainer&quot;,</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-         &quot;customFields&quot;, &quot;allowRemoteContent&quot;];</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+         &quot;customFields&quot;, &quot;allowRemoteContent&quot;, &quot;abPhotoTab&quot;];</span>
<a href="#l1.14"></a><span id="l1.14"> </span>
<a href="#l1.15"></a><span id="l1.15"> const kPhoneticFields =</span>
<a href="#l1.16"></a><span id="l1.16">         [&quot;PhoneticLastName&quot;, &quot;PhoneticLabel1&quot;, &quot;PhoneticSpacer1&quot;,</span>
<a href="#l1.17"></a><span id="l1.17">          &quot;PhoneticFirstName&quot;, &quot;PhoneticLabel2&quot;, &quot;PhoneticSpacer2&quot;];</span>
<a href="#l1.18"></a><span id="l1.18"> </span>
<a href="#l1.19"></a><span id="l1.19"> // Item is |[dialogField, cardProperty]|.</span>
<a href="#l1.20"></a><span id="l1.20"> const kVcardFields =</span>
<a href="#l1.21"></a><span id="l1.21">         [ // Contact &gt; Name</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineat">@@ -88,16 +88,17 @@ const kVcardFields =</span>
<a href="#l1.23"></a><span id="l1.23">           // Other &gt; Notes</span>
<a href="#l1.24"></a><span id="l1.24">          [&quot;Notes&quot;, &quot;Notes&quot;]];</span>
<a href="#l1.25"></a><span id="l1.25"> </span>
<a href="#l1.26"></a><span id="l1.26"> const kDefaultYear = 2000;</span>
<a href="#l1.27"></a><span id="l1.27"> var gEditCard;</span>
<a href="#l1.28"></a><span id="l1.28"> var gOnSaveListeners = new Array();</span>
<a href="#l1.29"></a><span id="l1.29"> var gOkCallback = null;</span>
<a href="#l1.30"></a><span id="l1.30"> var gHideABPicker = false;</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineplus">+var originalPhotoURI = &quot;&quot;;</span>
<a href="#l1.32"></a><span id="l1.32"> </span>
<a href="#l1.33"></a><span id="l1.33"> function OnLoadNewCard()</span>
<a href="#l1.34"></a><span id="l1.34"> {</span>
<a href="#l1.35"></a><span id="l1.35">   InitEditCard();</span>
<a href="#l1.36"></a><span id="l1.36"> </span>
<a href="#l1.37"></a><span id="l1.37">   gEditCard.card =</span>
<a href="#l1.38"></a><span id="l1.38">     ((&quot;arguments&quot; in window) &amp;&amp; (window.arguments.length &gt; 0) &amp;&amp;</span>
<a href="#l1.39"></a><span id="l1.39">      (window.arguments[0] instanceof Components.interfaces.nsIAbCard))</span>
<a href="#l1.40"></a><span id="l1.40" class="difflineat">@@ -273,16 +274,25 @@ function OnLoadEditCard()</span>
<a href="#l1.41"></a><span id="l1.41">   if (&quot;arguments&quot; in window &amp;&amp; window.arguments[0])</span>
<a href="#l1.42"></a><span id="l1.42">   {</span>
<a href="#l1.43"></a><span id="l1.43">     if (&quot;abURI&quot; in window.arguments[0]) {</span>
<a href="#l1.44"></a><span id="l1.44">       var abURI = window.arguments[0].abURI;</span>
<a href="#l1.45"></a><span id="l1.45">       var directory = GetDirectoryFromURI(abURI);</span>
<a href="#l1.46"></a><span id="l1.46"> </span>
<a href="#l1.47"></a><span id="l1.47">       if (directory.readOnly) </span>
<a href="#l1.48"></a><span id="l1.48">       {</span>
<a href="#l1.49"></a><span id="l1.49" class="difflineplus">+        // Disable the photo field and buttons</span>
<a href="#l1.50"></a><span id="l1.50" class="difflineplus">+        document.getElementById(&quot;generic&quot;).disabled          = true;</span>
<a href="#l1.51"></a><span id="l1.51" class="difflineplus">+        document.getElementById(&quot;GenericPhotoList&quot;).disabled = true;</span>
<a href="#l1.52"></a><span id="l1.52" class="difflineplus">+        document.getElementById(&quot;file&quot;).disabled             = true;</span>
<a href="#l1.53"></a><span id="l1.53" class="difflineplus">+        document.getElementById(&quot;web&quot;).disabled              = true;</span>
<a href="#l1.54"></a><span id="l1.54" class="difflineplus">+        document.getElementById(&quot;PhotoURI&quot;).readOnly         = true;</span>
<a href="#l1.55"></a><span id="l1.55" class="difflineplus">+        document.getElementById(&quot;PhotoURI&quot;).emptyText        = &quot;&quot;;</span>
<a href="#l1.56"></a><span id="l1.56" class="difflineplus">+        document.getElementById(&quot;BrowsePhoto&quot;).disabled      = true;</span>
<a href="#l1.57"></a><span id="l1.57" class="difflineplus">+        document.getElementById(&quot;UpdatePhoto&quot;).disabled      = true;</span>
<a href="#l1.58"></a><span id="l1.58">         // Set all the editable vcard fields to read only</span>
<a href="#l1.59"></a><span id="l1.59">         for (var i = kVcardFields.length; i-- &gt; 0; )</span>
<a href="#l1.60"></a><span id="l1.60">           document.getElementById(kVcardFields[i][0]).readOnly = true;</span>
<a href="#l1.61"></a><span id="l1.61"> </span>
<a href="#l1.62"></a><span id="l1.62">         // the birthday fields</span>
<a href="#l1.63"></a><span id="l1.63">         document.getElementById(&quot;Birthday&quot;).readOnly = true;</span>
<a href="#l1.64"></a><span id="l1.64">         document.getElementById(&quot;BirthYear&quot;).readOnly = true;</span>
<a href="#l1.65"></a><span id="l1.65">         document.getElementById(&quot;Age&quot;).readOnly = true;</span>
<a href="#l1.66"></a><span id="l1.66" class="difflineat">@@ -468,16 +478,48 @@ function GetCardValues(cardproperty, doc</span>
<a href="#l1.67"></a><span id="l1.67">     allowRemoteContentEl.checked = cardproperty.getProperty(&quot;AllowRemoteContent&quot;, false) != false;</span>
<a href="#l1.68"></a><span id="l1.68"> </span>
<a href="#l1.69"></a><span id="l1.69">   // get phonetic fields if exist</span>
<a href="#l1.70"></a><span id="l1.70">   try {</span>
<a href="#l1.71"></a><span id="l1.71">     doc.getElementById(&quot;PhoneticFirstName&quot;).value = cardproperty.getProperty(&quot;PhoneticFirstName&quot;, &quot;&quot;);</span>
<a href="#l1.72"></a><span id="l1.72">     doc.getElementById(&quot;PhoneticLastName&quot;).value = cardproperty.getProperty(&quot;PhoneticLastName&quot;, &quot;&quot;);</span>
<a href="#l1.73"></a><span id="l1.73">   }</span>
<a href="#l1.74"></a><span id="l1.74">   catch (ex) {}</span>
<a href="#l1.75"></a><span id="l1.75" class="difflineplus">+</span>
<a href="#l1.76"></a><span id="l1.76" class="difflineplus">+  // Store the original photo URI and update the photo</span>
<a href="#l1.77"></a><span id="l1.77" class="difflineplus">+  // Select the type if there is a valid value stored for that type, otherwise</span>
<a href="#l1.78"></a><span id="l1.78" class="difflineplus">+  // select the generic photo</span>
<a href="#l1.79"></a><span id="l1.79" class="difflineplus">+  var type = cardproperty.getProperty(&quot;PhotoType&quot;, &quot;&quot;);</span>
<a href="#l1.80"></a><span id="l1.80" class="difflineplus">+  document.getElementById(&quot;PhotoType&quot;).selectedItem =</span>
<a href="#l1.81"></a><span id="l1.81" class="difflineplus">+    document.getElementById(type ? type : &quot;generic&quot;);</span>
<a href="#l1.82"></a><span id="l1.82" class="difflineplus">+  if (type == &quot;file&quot;) {</span>
<a href="#l1.83"></a><span id="l1.83" class="difflineplus">+    originalPhotoURI = getPhotoURI(cardproperty.getProperty(&quot;PhotoName&quot;, &quot;&quot;));</span>
<a href="#l1.84"></a><span id="l1.84" class="difflineplus">+    var file = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l1.85"></a><span id="l1.85" class="difflineplus">+                         .getService(Components.interfaces.nsIIOService)</span>
<a href="#l1.86"></a><span id="l1.86" class="difflineplus">+                         .newURI(originalPhotoURI, null, null)</span>
<a href="#l1.87"></a><span id="l1.87" class="difflineplus">+                         .QueryInterface(Components.interfaces.nsIFileURL)</span>
<a href="#l1.88"></a><span id="l1.88" class="difflineplus">+                         .file;</span>
<a href="#l1.89"></a><span id="l1.89" class="difflineplus">+    if (file) {</span>
<a href="#l1.90"></a><span id="l1.90" class="difflineplus">+      document.getElementById(&quot;PhotoFile&quot;).file = file;</span>
<a href="#l1.91"></a><span id="l1.91" class="difflineplus">+      updatePhoto(&quot;file&quot;);</span>
<a href="#l1.92"></a><span id="l1.92" class="difflineplus">+    }</span>
<a href="#l1.93"></a><span id="l1.93" class="difflineplus">+    else</span>
<a href="#l1.94"></a><span id="l1.94" class="difflineplus">+      updatePhoto(&quot;generic&quot;);</span>
<a href="#l1.95"></a><span id="l1.95" class="difflineplus">+  }</span>
<a href="#l1.96"></a><span id="l1.96" class="difflineplus">+  else if (type == &quot;web&quot;) {</span>
<a href="#l1.97"></a><span id="l1.97" class="difflineplus">+    originalPhotoURI = getPhotoURI(cardproperty.getProperty(&quot;PhotoName&quot;, &quot;&quot;));</span>
<a href="#l1.98"></a><span id="l1.98" class="difflineplus">+    document.getElementById(&quot;PhotoURI&quot;).value = originalPhotoURI;</span>
<a href="#l1.99"></a><span id="l1.99" class="difflineplus">+    updatePhoto(&quot;web&quot;);</span>
<a href="#l1.100"></a><span id="l1.100" class="difflineplus">+  }</span>
<a href="#l1.101"></a><span id="l1.101" class="difflineplus">+  else {</span>
<a href="#l1.102"></a><span id="l1.102" class="difflineplus">+    originalPhotoURI = cardproperty.getProperty(&quot;PhotoURI&quot;, &quot;&quot;);</span>
<a href="#l1.103"></a><span id="l1.103" class="difflineplus">+    if (originalPhotoURI)</span>
<a href="#l1.104"></a><span id="l1.104" class="difflineplus">+      document.getElementById(&quot;GenericPhotoList&quot;).value = originalPhotoURI;</span>
<a href="#l1.105"></a><span id="l1.105" class="difflineplus">+    updatePhoto(&quot;generic&quot;);</span>
<a href="#l1.106"></a><span id="l1.106" class="difflineplus">+  }</span>
<a href="#l1.107"></a><span id="l1.107"> }</span>
<a href="#l1.108"></a><span id="l1.108"> </span>
<a href="#l1.109"></a><span id="l1.109"> // when the ab card dialog is being loaded to show a vCard,</span>
<a href="#l1.110"></a><span id="l1.110"> // hide the fields which aren't supported</span>
<a href="#l1.111"></a><span id="l1.111"> // by vCard so the user does not try to edit them.</span>
<a href="#l1.112"></a><span id="l1.112"> function HideNonVcardFields()</span>
<a href="#l1.113"></a><span id="l1.113"> {</span>
<a href="#l1.114"></a><span id="l1.114">   document.getElementById(&quot;homeTabButton&quot;).hidden = true;</span>
<a href="#l1.115"></a><span id="l1.115" class="difflineat">@@ -517,24 +559,50 @@ function CheckAndSetCardValues(cardprope</span>
<a href="#l1.116"></a><span id="l1.116"> </span>
<a href="#l1.117"></a><span id="l1.117">   var popup = document.getElementById(&quot;PreferMailFormatPopup&quot;);</span>
<a href="#l1.118"></a><span id="l1.118">   if (popup)</span>
<a href="#l1.119"></a><span id="l1.119">     cardproperty.setProperty(&quot;PreferMailFormat&quot;, popup.value);</span>
<a href="#l1.120"></a><span id="l1.120">     </span>
<a href="#l1.121"></a><span id="l1.121">   var allowRemoteContentEl = document.getElementById(&quot;allowRemoteContent&quot;);</span>
<a href="#l1.122"></a><span id="l1.122">   if (allowRemoteContentEl)</span>
<a href="#l1.123"></a><span id="l1.123">     cardproperty.setProperty(&quot;AllowRemoteContent&quot;, allowRemoteContentEl.checked);</span>
<a href="#l1.124"></a><span id="l1.124" class="difflineminus">-    </span>
<a href="#l1.125"></a><span id="l1.125" class="difflineplus">+</span>
<a href="#l1.126"></a><span id="l1.126">   // set phonetic fields if exist</span>
<a href="#l1.127"></a><span id="l1.127">   try {</span>
<a href="#l1.128"></a><span id="l1.128">     cardproperty.setProperty(&quot;PhoneticFirstName&quot;, doc.getElementById(&quot;PhoneticFirstName&quot;).value);</span>
<a href="#l1.129"></a><span id="l1.129">     cardproperty.setProperty(&quot;PhoneticLastName&quot;, doc.getElementById(&quot;PhoneticLastName&quot;).value);</span>
<a href="#l1.130"></a><span id="l1.130">   }</span>
<a href="#l1.131"></a><span id="l1.131">   catch (ex) {}</span>
<a href="#l1.132"></a><span id="l1.132"> </span>
<a href="#l1.133"></a><span id="l1.133" class="difflineplus">+  var type = document.getElementById(&quot;PhotoType&quot;).selectedItem.id;</span>
<a href="#l1.134"></a><span id="l1.134" class="difflineplus">+  var photoURI = originalPhotoURI;</span>
<a href="#l1.135"></a><span id="l1.135" class="difflineplus">+  if (type == &quot;file&quot; &amp;&amp; document.getElementById(&quot;PhotoFile&quot;).file)</span>
<a href="#l1.136"></a><span id="l1.136" class="difflineplus">+    photoURI = &quot;file://&quot; + document.getElementById(&quot;PhotoFile&quot;).file.path;</span>
<a href="#l1.137"></a><span id="l1.137" class="difflineplus">+  else if (type == &quot;web&quot; &amp;&amp; document.getElementById(&quot;PhotoURI&quot;).value)</span>
<a href="#l1.138"></a><span id="l1.138" class="difflineplus">+    photoURI = document.getElementById(&quot;PhotoURI&quot;).value;</span>
<a href="#l1.139"></a><span id="l1.139" class="difflineplus">+  else {</span>
<a href="#l1.140"></a><span id="l1.140" class="difflineplus">+    type = &quot;generic&quot;;</span>
<a href="#l1.141"></a><span id="l1.141" class="difflineplus">+    photoURI = document.getElementById(&quot;GenericPhotoList&quot;).value;</span>
<a href="#l1.142"></a><span id="l1.142" class="difflineplus">+  }</span>
<a href="#l1.143"></a><span id="l1.143" class="difflineplus">+  if (photoURI != originalPhotoURI) {</span>
<a href="#l1.144"></a><span id="l1.144" class="difflineplus">+    // Store the original URI</span>
<a href="#l1.145"></a><span id="l1.145" class="difflineplus">+    cardproperty.setProperty(&quot;PhotoURI&quot;, photoURI);</span>
<a href="#l1.146"></a><span id="l1.146" class="difflineplus">+    // Remove the original, if any</span>
<a href="#l1.147"></a><span id="l1.147" class="difflineplus">+    removePhoto(cardproperty.getProperty(&quot;PhotoName&quot;, null));</span>
<a href="#l1.148"></a><span id="l1.148" class="difflineplus">+    // Save the photo if it isn't one of the generic photos</span>
<a href="#l1.149"></a><span id="l1.149" class="difflineplus">+    if (type != &quot;generic&quot;) {</span>
<a href="#l1.150"></a><span id="l1.150" class="difflineplus">+      cardproperty.setProperty(&quot;PhotoType&quot;, &quot;file&quot;);</span>
<a href="#l1.151"></a><span id="l1.151" class="difflineplus">+      // Save the new file and store its URI as PhotoName </span>
<a href="#l1.152"></a><span id="l1.152" class="difflineplus">+      var file = savePhoto(photoURI);</span>
<a href="#l1.153"></a><span id="l1.153" class="difflineplus">+      if (file)</span>
<a href="#l1.154"></a><span id="l1.154" class="difflineplus">+        cardproperty.setProperty(&quot;PhotoName&quot;, file.leafName);</span>
<a href="#l1.155"></a><span id="l1.155" class="difflineplus">+    }</span>
<a href="#l1.156"></a><span id="l1.156" class="difflineplus">+    else</span>
<a href="#l1.157"></a><span id="l1.157" class="difflineplus">+      cardproperty.setProperty(&quot;PhotoType&quot;, &quot;generic&quot;);</span>
<a href="#l1.158"></a><span id="l1.158" class="difflineplus">+  }</span>
<a href="#l1.159"></a><span id="l1.159">   return true;</span>
<a href="#l1.160"></a><span id="l1.160"> }</span>
<a href="#l1.161"></a><span id="l1.161"> </span>
<a href="#l1.162"></a><span id="l1.162"> function CleanUpWebPage(webPage)</span>
<a href="#l1.163"></a><span id="l1.163"> {</span>
<a href="#l1.164"></a><span id="l1.164">   // no :// yet so we should add something</span>
<a href="#l1.165"></a><span id="l1.165">   if ( webPage.length &amp;&amp; webPage.search(&quot;://&quot;) == -1 )</span>
<a href="#l1.166"></a><span id="l1.166">   {</span>
<a href="#l1.167"></a><span id="l1.167" class="difflineat">@@ -822,8 +890,92 @@ function modifyDatepicker(aDatepicker) {</span>
<a href="#l1.168"></a><span id="l1.168">       this.dateField.value = null;</span>
<a href="#l1.169"></a><span id="l1.169">       this.monthField.value = null;</span>
<a href="#l1.170"></a><span id="l1.170">     }</span>
<a href="#l1.171"></a><span id="l1.171">     // make the field's value null if aValue is null and the field's value isn't</span>
<a href="#l1.172"></a><span id="l1.172">     if (aValue == null &amp;&amp; aField.value != null)</span>
<a href="#l1.173"></a><span id="l1.173">       aField.value = null;</span>
<a href="#l1.174"></a><span id="l1.174">   }</span>
<a href="#l1.175"></a><span id="l1.175"> }</span>
<a href="#l1.176"></a><span id="l1.176" class="difflineplus">+</span>
<a href="#l1.177"></a><span id="l1.177" class="difflineplus">+/**</span>
<a href="#l1.178"></a><span id="l1.178" class="difflineplus">+ * Updates the photo by setting the src attribute of the photo element.</span>
<a href="#l1.179"></a><span id="l1.179" class="difflineplus">+ *</span>
<a href="#l1.180"></a><span id="l1.180" class="difflineplus">+ * @param aType Optional. The type of photo (web, file, or generic).</span>
<a href="#l1.181"></a><span id="l1.181" class="difflineplus">+ *              If supplied the corresponding radio button will be selected.</span>
<a href="#l1.182"></a><span id="l1.182" class="difflineplus">+ *              If not supplied the type will be determined by the currently</span>
<a href="#l1.183"></a><span id="l1.183" class="difflineplus">+ *              selected type.</span>
<a href="#l1.184"></a><span id="l1.184" class="difflineplus">+ */</span>
<a href="#l1.185"></a><span id="l1.185" class="difflineplus">+function updatePhoto(aType) {</span>
<a href="#l1.186"></a><span id="l1.186" class="difflineplus">+  if (aType) {</span>
<a href="#l1.187"></a><span id="l1.187" class="difflineplus">+    // Select the type's radio button</span>
<a href="#l1.188"></a><span id="l1.188" class="difflineplus">+    document.getElementById(&quot;PhotoType&quot;).selectedItem =</span>
<a href="#l1.189"></a><span id="l1.189" class="difflineplus">+      document.getElementById(aType);</span>
<a href="#l1.190"></a><span id="l1.190" class="difflineplus">+  }</span>
<a href="#l1.191"></a><span id="l1.191" class="difflineplus">+  else</span>
<a href="#l1.192"></a><span id="l1.192" class="difflineplus">+    aType = document.getElementById(&quot;PhotoType&quot;).selectedItem.id;</span>
<a href="#l1.193"></a><span id="l1.193" class="difflineplus">+</span>
<a href="#l1.194"></a><span id="l1.194" class="difflineplus">+  var value;</span>
<a href="#l1.195"></a><span id="l1.195" class="difflineplus">+  if (aType == &quot;file&quot;) {</span>
<a href="#l1.196"></a><span id="l1.196" class="difflineplus">+    var file = document.getElementById(&quot;PhotoFile&quot;).file;</span>
<a href="#l1.197"></a><span id="l1.197" class="difflineplus">+    value = file ? &quot;file://&quot; + file.path : &quot;&quot;;</span>
<a href="#l1.198"></a><span id="l1.198" class="difflineplus">+  }</span>
<a href="#l1.199"></a><span id="l1.199" class="difflineplus">+  else if (aType == &quot;web&quot;)</span>
<a href="#l1.200"></a><span id="l1.200" class="difflineplus">+    value = document.getElementById(&quot;PhotoURI&quot;).value;</span>
<a href="#l1.201"></a><span id="l1.201" class="difflineplus">+  else</span>
<a href="#l1.202"></a><span id="l1.202" class="difflineplus">+    value = document.getElementById(&quot;GenericPhotoList&quot;).value;</span>
<a href="#l1.203"></a><span id="l1.203" class="difflineplus">+  document.getElementById(&quot;photo&quot;).setAttribute(&quot;src&quot;, value ? value</span>
<a href="#l1.204"></a><span id="l1.204" class="difflineplus">+                                                             : defaultPhotoURI);</span>
<a href="#l1.205"></a><span id="l1.205" class="difflineplus">+}</span>
<a href="#l1.206"></a><span id="l1.206" class="difflineplus">+</span>
<a href="#l1.207"></a><span id="l1.207" class="difflineplus">+/**</span>
<a href="#l1.208"></a><span id="l1.208" class="difflineplus">+ * Removes the photo file at the given path, if present.</span>
<a href="#l1.209"></a><span id="l1.209" class="difflineplus">+ *</span>
<a href="#l1.210"></a><span id="l1.210" class="difflineplus">+ * @param aName The name of the photo to remove from the Photos directory.</span>
<a href="#l1.211"></a><span id="l1.211" class="difflineplus">+ *</span>
<a href="#l1.212"></a><span id="l1.212" class="difflineplus">+ * @return true if the file was deleted.</span>
<a href="#l1.213"></a><span id="l1.213" class="difflineplus">+ */</span>
<a href="#l1.214"></a><span id="l1.214" class="difflineplus">+function removePhoto(aName) {</span>
<a href="#l1.215"></a><span id="l1.215" class="difflineplus">+  if (!aName)</span>
<a href="#l1.216"></a><span id="l1.216" class="difflineplus">+    return false;</span>
<a href="#l1.217"></a><span id="l1.217" class="difflineplus">+  // Get the directory with all the photos</span>
<a href="#l1.218"></a><span id="l1.218" class="difflineplus">+  var file = getPhotosDir();</span>
<a href="#l1.219"></a><span id="l1.219" class="difflineplus">+  // Get the photo (throws an exception for invalid names)</span>
<a href="#l1.220"></a><span id="l1.220" class="difflineplus">+  try {</span>
<a href="#l1.221"></a><span id="l1.221" class="difflineplus">+    file.append(aName);</span>
<a href="#l1.222"></a><span id="l1.222" class="difflineplus">+  }</span>
<a href="#l1.223"></a><span id="l1.223" class="difflineplus">+  catch (e) {</span>
<a href="#l1.224"></a><span id="l1.224" class="difflineplus">+    return false;</span>
<a href="#l1.225"></a><span id="l1.225" class="difflineplus">+  }</span>
<a href="#l1.226"></a><span id="l1.226" class="difflineplus">+  if (file.exists()) {</span>
<a href="#l1.227"></a><span id="l1.227" class="difflineplus">+    try {</span>
<a href="#l1.228"></a><span id="l1.228" class="difflineplus">+      file.remove(false);</span>
<a href="#l1.229"></a><span id="l1.229" class="difflineplus">+      return true;</span>
<a href="#l1.230"></a><span id="l1.230" class="difflineplus">+    }</span>
<a href="#l1.231"></a><span id="l1.231" class="difflineplus">+    catch (e) {}</span>
<a href="#l1.232"></a><span id="l1.232" class="difflineplus">+  }</span>
<a href="#l1.233"></a><span id="l1.233" class="difflineplus">+  return false;</span>
<a href="#l1.234"></a><span id="l1.234" class="difflineplus">+}</span>
<a href="#l1.235"></a><span id="l1.235" class="difflineplus">+</span>
<a href="#l1.236"></a><span id="l1.236" class="difflineplus">+/**</span>
<a href="#l1.237"></a><span id="l1.237" class="difflineplus">+ * Opens a file picker with image filters to look for a contact photo.</span>
<a href="#l1.238"></a><span id="l1.238" class="difflineplus">+ * If the user selects a file and clicks OK then the PhotoURI textbox is set</span>
<a href="#l1.239"></a><span id="l1.239" class="difflineplus">+ * with a file URI pointing to that file and updatePhoto is called.</span>
<a href="#l1.240"></a><span id="l1.240" class="difflineplus">+ *</span>
<a href="#l1.241"></a><span id="l1.241" class="difflineplus">+ * @return true if the OK button was clicked and a photo was chosen</span>
<a href="#l1.242"></a><span id="l1.242" class="difflineplus">+ */</span>
<a href="#l1.243"></a><span id="l1.243" class="difflineplus">+function browsePhoto() {</span>
<a href="#l1.244"></a><span id="l1.244" class="difflineplus">+  var nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l1.245"></a><span id="l1.245" class="difflineplus">+  var fp = Components.classes[&quot;@mozilla.org/filepicker;1&quot;]</span>
<a href="#l1.246"></a><span id="l1.246" class="difflineplus">+                     .createInstance(nsIFilePicker);</span>
<a href="#l1.247"></a><span id="l1.247" class="difflineplus">+  fp.init(window, gAddressBookBundle.getString(&quot;browsePhoto&quot;), nsIFilePicker.modeOpen);</span>
<a href="#l1.248"></a><span id="l1.248" class="difflineplus">+  </span>
<a href="#l1.249"></a><span id="l1.249" class="difflineplus">+  // Add All Files &amp; Image Files filters and select the latter</span>
<a href="#l1.250"></a><span id="l1.250" class="difflineplus">+  fp.appendFilters(nsIFilePicker.filterAll | nsIFilePicker.filterImages);</span>
<a href="#l1.251"></a><span id="l1.251" class="difflineplus">+  fp.filterIndex = 1;</span>
<a href="#l1.252"></a><span id="l1.252" class="difflineplus">+</span>
<a href="#l1.253"></a><span id="l1.253" class="difflineplus">+  if (fp.show() == nsIFilePicker.returnOK) {</span>
<a href="#l1.254"></a><span id="l1.254" class="difflineplus">+    document.getElementById(&quot;PhotoFile&quot;).file = fp.file;</span>
<a href="#l1.255"></a><span id="l1.255" class="difflineplus">+    updatePhoto(&quot;file&quot;);</span>
<a href="#l1.256"></a><span id="l1.256" class="difflineplus">+    return true;</span>
<a href="#l1.257"></a><span id="l1.257" class="difflineplus">+  }</span>
<a href="#l1.258"></a><span id="l1.258" class="difflineplus">+  return false;</span>
<a href="#l1.259"></a><span id="l1.259" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/components/addrbook/content/abCardViewOverlay.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/components/addrbook/content/abCardViewOverlay.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -162,16 +162,18 @@ function OnLoadCardView()</span>
<a href="#l2.4"></a><span id="l2.4">   cvData.cvWorkAddress  = doc.getElementById(&quot;cvWorkAddress&quot;);</span>
<a href="#l2.5"></a><span id="l2.5">   cvData.cvWorkAddress2  = doc.getElementById(&quot;cvWorkAddress2&quot;);</span>
<a href="#l2.6"></a><span id="l2.6">   cvData.cvWorkCityStZip  = doc.getElementById(&quot;cvWorkCityStZip&quot;);</span>
<a href="#l2.7"></a><span id="l2.7">   cvData.cvWorkCountry  = doc.getElementById(&quot;cvWorkCountry&quot;);</span>
<a href="#l2.8"></a><span id="l2.8">   cvData.cvbWorkMapItBox  = doc.getElementById(&quot;cvbWorkMapItBox&quot;);</span>
<a href="#l2.9"></a><span id="l2.9">   cvData.cvWorkMapIt = doc.getElementById(&quot;cvWorkMapIt&quot;);</span>
<a href="#l2.10"></a><span id="l2.10">   cvData.cvWorkWebPageBox = doc.getElementById(&quot;cvWorkWebPageBox&quot;);</span>
<a href="#l2.11"></a><span id="l2.11">   cvData.cvWorkWebPage  = doc.getElementById(&quot;cvWorkWebPage&quot;);</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+  cvData.cvbPhoto = doc.getElementById(&quot;cvbPhoto&quot;);</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+  cvData.cvPhoto  = doc.getElementById(&quot;cvPhoto&quot;);</span>
<a href="#l2.14"></a><span id="l2.14"> }</span>
<a href="#l2.15"></a><span id="l2.15"> </span>
<a href="#l2.16"></a><span id="l2.16"> // XXX todo</span>
<a href="#l2.17"></a><span id="l2.17"> // some similar code (in spirit) already exists, see OnLoadEditList()</span>
<a href="#l2.18"></a><span id="l2.18"> // perhaps we could combine and put in abCommon.js?</span>
<a href="#l2.19"></a><span id="l2.19"> function GetAddressesFromURI(uri)</span>
<a href="#l2.20"></a><span id="l2.20"> {</span>
<a href="#l2.21"></a><span id="l2.21">   var addresses = &quot;&quot;;</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineat">@@ -207,16 +209,19 @@ function DisplayCardViewPane(realCard)</span>
<a href="#l2.23"></a><span id="l2.23">                displayName : realCard.displayName,</span>
<a href="#l2.24"></a><span id="l2.24">                isMailList : realCard.isMailList,</span>
<a href="#l2.25"></a><span id="l2.25">                mailListURI : realCard.mailListURI</span>
<a href="#l2.26"></a><span id="l2.26">   };</span>
<a href="#l2.27"></a><span id="l2.27"> </span>
<a href="#l2.28"></a><span id="l2.28">   var data = top.cvData;</span>
<a href="#l2.29"></a><span id="l2.29">   var visible;</span>
<a href="#l2.30"></a><span id="l2.30"> </span>
<a href="#l2.31"></a><span id="l2.31" class="difflineplus">+  // Contact photo</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+  cvData.cvPhoto.setAttribute(&quot;src&quot;, getPhotoURI(card.getProperty(&quot;PhotoName&quot;)));</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineplus">+</span>
<a href="#l2.34"></a><span id="l2.34">   var titleString;</span>
<a href="#l2.35"></a><span id="l2.35">   if (generatedName == &quot;&quot;)</span>
<a href="#l2.36"></a><span id="l2.36">     titleString = card.primaryEmail;  // if no generatedName, use email</span>
<a href="#l2.37"></a><span id="l2.37">   else</span>
<a href="#l2.38"></a><span id="l2.38">     titleString = generatedName;</span>
<a href="#l2.39"></a><span id="l2.39"> </span>
<a href="#l2.40"></a><span id="l2.40">   // set fields in card view pane</span>
<a href="#l2.41"></a><span id="l2.41">   if (card.isMailList)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/components/addrbook/content/abCommon.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/components/addrbook/content/abCommon.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -51,16 +51,18 @@ var gPrefs = Components.classes[&quot;@mozill</span>
<a href="#l3.4"></a><span id="l3.4"> var gHeaderParser = Components.classes[&quot;@mozilla.org/messenger/headerparser;1&quot;].getService(Components.interfaces.nsIMsgHeaderParser);</span>
<a href="#l3.5"></a><span id="l3.5"> </span>
<a href="#l3.6"></a><span id="l3.6"> const kDefaultSortColumn = &quot;GeneratedName&quot;;</span>
<a href="#l3.7"></a><span id="l3.7"> const kDefaultAscending = &quot;ascending&quot;;</span>
<a href="#l3.8"></a><span id="l3.8"> const kDefaultDescending = &quot;descending&quot;;</span>
<a href="#l3.9"></a><span id="l3.9"> const kLdapUrlPrefix = &quot;moz-abldapdirectory://&quot;;</span>
<a href="#l3.10"></a><span id="l3.10"> const kPersonalAddressbookURI = &quot;moz-abmdbdirectory://abook.mab&quot;;</span>
<a href="#l3.11"></a><span id="l3.11"> const kCollectedAddressbookURI = &quot;moz-abmdbdirectory://history.mab&quot;;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+// The default image for contacts</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+var defaultPhotoURI = &quot;chrome://messenger/skin/addressbook/icons/contact-generic.png&quot;;</span>
<a href="#l3.14"></a><span id="l3.14"> </span>
<a href="#l3.15"></a><span id="l3.15"> // Controller object for Dir Pane</span>
<a href="#l3.16"></a><span id="l3.16"> var DirPaneController =</span>
<a href="#l3.17"></a><span id="l3.17"> {</span>
<a href="#l3.18"></a><span id="l3.18">   supportsCommand: function(command)</span>
<a href="#l3.19"></a><span id="l3.19">   {</span>
<a href="#l3.20"></a><span id="l3.20">     switch (command) {</span>
<a href="#l3.21"></a><span id="l3.21">       case &quot;cmd_selectAll&quot;:</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineat">@@ -914,8 +916,171 @@ function setupLdapAutocompleteSession()</span>
<a href="#l3.23"></a><span id="l3.23">               removeSession(gLDAPSession);</span>
<a href="#l3.24"></a><span id="l3.24">         gSessionAdded = false;</span>
<a href="#l3.25"></a><span id="l3.25">       }</span>
<a href="#l3.26"></a><span id="l3.26">     }</span>
<a href="#l3.27"></a><span id="l3.27"> </span>
<a href="#l3.28"></a><span id="l3.28">     gLDAPSession = LDAPSession;</span>
<a href="#l3.29"></a><span id="l3.29">     gSetupLdapAutocomplete = true;</span>
<a href="#l3.30"></a><span id="l3.30"> }</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineplus">+</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+/**</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+ * Returns an nsIFile of the directory in which contact photos are stored.</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineplus">+ * This will create the directory if it does not yet exist.</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineplus">+ */</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineplus">+function getPhotosDir() {</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineplus">+  var file = Components.classes[&quot;@mozilla.org/file/directory_service;1&quot;]</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineplus">+                       .getService(Components.interfaces.nsIProperties)</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineplus">+                       .get(&quot;ProfD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineplus">+  // Get the Photos directory</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineplus">+  file.append(&quot;Photos&quot;);</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineplus">+  if (!file.exists() || !file.isDirectory())</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineplus">+    file.create(Components.interfaces.nsIFile.DIRECTORY_TYPE, 0777);</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineplus">+  return file;</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineplus">+}</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineplus">+</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineplus">+/**</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineplus">+ * Returns a URI specifying the location of a photo based on its name.</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineplus">+ * If the name is blank, or if the photo with that name is not in the Photos</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineplus">+ * directory then the default photo URI is returned.</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineplus">+ *</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineplus">+ * @param aPhotoName The name of the photo from the Photos folder, if any.</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineplus">+ *</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineplus">+ * @return A URI pointing to a photo.</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineplus">+ */</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineplus">+function getPhotoURI(aPhotoName) {</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineplus">+  if (!aPhotoName)</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineplus">+    return defaultPhotoURI;</span>
<a href="#l3.59"></a><span id="l3.59" class="difflineplus">+  var file = getPhotosDir();</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineplus">+  try {</span>
<a href="#l3.61"></a><span id="l3.61" class="difflineplus">+    file.append(aPhotoName);</span>
<a href="#l3.62"></a><span id="l3.62" class="difflineplus">+  }</span>
<a href="#l3.63"></a><span id="l3.63" class="difflineplus">+  catch (e) {</span>
<a href="#l3.64"></a><span id="l3.64" class="difflineplus">+    return defaultPhotoURI;</span>
<a href="#l3.65"></a><span id="l3.65" class="difflineplus">+  }</span>
<a href="#l3.66"></a><span id="l3.66" class="difflineplus">+  if (!file.exists())</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineplus">+    return defaultPhotoURI;</span>
<a href="#l3.68"></a><span id="l3.68" class="difflineplus">+  return Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineplus">+                   .getService(Components.interfaces.nsIIOService)</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineplus">+                   .newFileURI(file).spec;</span>
<a href="#l3.71"></a><span id="l3.71" class="difflineplus">+}</span>
<a href="#l3.72"></a><span id="l3.72" class="difflineplus">+</span>
<a href="#l3.73"></a><span id="l3.73" class="difflineplus">+/**</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineplus">+ * Saves the given input stream to a file.</span>
<a href="#l3.75"></a><span id="l3.75" class="difflineplus">+ *</span>
<a href="#l3.76"></a><span id="l3.76" class="difflineplus">+ * @param aIStream The input stream to save.</span>
<a href="#l3.77"></a><span id="l3.77" class="difflineplus">+ * @param aFile    The file to which the stream is saved.</span>
<a href="#l3.78"></a><span id="l3.78" class="difflineplus">+ */</span>
<a href="#l3.79"></a><span id="l3.79" class="difflineplus">+function saveStreamToFile(aIStream, aFile) {</span>
<a href="#l3.80"></a><span id="l3.80" class="difflineplus">+  if (!(aIStream instanceof Components.interfaces.nsIInputStream))</span>
<a href="#l3.81"></a><span id="l3.81" class="difflineplus">+    throw &quot;Invalid stream passed to saveStreamToFile&quot;;</span>
<a href="#l3.82"></a><span id="l3.82" class="difflineplus">+  if (!(aFile instanceof Components.interfaces.nsIFile))</span>
<a href="#l3.83"></a><span id="l3.83" class="difflineplus">+    throw &quot;Invalid file passed to saveStreamToFile&quot;;</span>
<a href="#l3.84"></a><span id="l3.84" class="difflineplus">+  // Write the input stream to the file</span>
<a href="#l3.85"></a><span id="l3.85" class="difflineplus">+  var fstream = Components.classes[&quot;@mozilla.org/network/safe-file-output-stream;1&quot;]</span>
<a href="#l3.86"></a><span id="l3.86" class="difflineplus">+                          .createInstance(Components.interfaces.nsIFileOutputStream);</span>
<a href="#l3.87"></a><span id="l3.87" class="difflineplus">+  var buffer  = Components.classes[&quot;@mozilla.org/network/buffered-output-stream;1&quot;]</span>
<a href="#l3.88"></a><span id="l3.88" class="difflineplus">+                          .createInstance(Components.interfaces.nsIBufferedOutputStream);</span>
<a href="#l3.89"></a><span id="l3.89" class="difflineplus">+  fstream.init(aFile, 0x04 | 0x08 | 0x20, 0600, 0); // write, create, truncate</span>
<a href="#l3.90"></a><span id="l3.90" class="difflineplus">+  buffer.init(fstream, 8192);</span>
<a href="#l3.91"></a><span id="l3.91" class="difflineplus">+</span>
<a href="#l3.92"></a><span id="l3.92" class="difflineplus">+  buffer.writeFrom(aIStream, aIStream.available());</span>
<a href="#l3.93"></a><span id="l3.93" class="difflineplus">+</span>
<a href="#l3.94"></a><span id="l3.94" class="difflineplus">+  // Close the output streams</span>
<a href="#l3.95"></a><span id="l3.95" class="difflineplus">+  if (buffer instanceof Components.interfaces.nsISafeOutputStream)</span>
<a href="#l3.96"></a><span id="l3.96" class="difflineplus">+      buffer.finish();</span>
<a href="#l3.97"></a><span id="l3.97" class="difflineplus">+  else</span>
<a href="#l3.98"></a><span id="l3.98" class="difflineplus">+      buffer.close();</span>
<a href="#l3.99"></a><span id="l3.99" class="difflineplus">+  if (fstream instanceof Components.interfaces.nsISafeOutputStream)</span>
<a href="#l3.100"></a><span id="l3.100" class="difflineplus">+      fstream.finish();</span>
<a href="#l3.101"></a><span id="l3.101" class="difflineplus">+  else</span>
<a href="#l3.102"></a><span id="l3.102" class="difflineplus">+      fstream.close();</span>
<a href="#l3.103"></a><span id="l3.103" class="difflineplus">+  // Close the input stream</span>
<a href="#l3.104"></a><span id="l3.104" class="difflineplus">+  aIStream.close();</span>
<a href="#l3.105"></a><span id="l3.105" class="difflineplus">+  return aFile;</span>
<a href="#l3.106"></a><span id="l3.106" class="difflineplus">+}</span>
<a href="#l3.107"></a><span id="l3.107" class="difflineplus">+</span>
<a href="#l3.108"></a><span id="l3.108" class="difflineplus">+/**</span>
<a href="#l3.109"></a><span id="l3.109" class="difflineplus">+ * Copies the photo at the given URI in a folder named &quot;Photos&quot; in the current</span>
<a href="#l3.110"></a><span id="l3.110" class="difflineplus">+ * profile folder.</span>
<a href="#l3.111"></a><span id="l3.111" class="difflineplus">+ * The filename is randomly generated and is unique.</span>
<a href="#l3.112"></a><span id="l3.112" class="difflineplus">+ * The URI is used to obtain a channel which is then opened synchronously and</span>
<a href="#l3.113"></a><span id="l3.113" class="difflineplus">+ * this stream is written to the new file to store an offline, local copy of the</span>
<a href="#l3.114"></a><span id="l3.114" class="difflineplus">+ * photo.</span>
<a href="#l3.115"></a><span id="l3.115" class="difflineplus">+ *</span>
<a href="#l3.116"></a><span id="l3.116" class="difflineplus">+ * @param aUri The URI of the photo.</span>
<a href="#l3.117"></a><span id="l3.117" class="difflineplus">+ *</span>
<a href="#l3.118"></a><span id="l3.118" class="difflineplus">+ * @return An nsIFile representation of the photo.</span>
<a href="#l3.119"></a><span id="l3.119" class="difflineplus">+ */</span>
<a href="#l3.120"></a><span id="l3.120" class="difflineplus">+function savePhoto(aUri) {</span>
<a href="#l3.121"></a><span id="l3.121" class="difflineplus">+  if (!aUri)</span>
<a href="#l3.122"></a><span id="l3.122" class="difflineplus">+    return false;</span>
<a href="#l3.123"></a><span id="l3.123" class="difflineplus">+</span>
<a href="#l3.124"></a><span id="l3.124" class="difflineplus">+  // Get the photos directory and check that it exists</span>
<a href="#l3.125"></a><span id="l3.125" class="difflineplus">+  var file = getPhotosDir();</span>
<a href="#l3.126"></a><span id="l3.126" class="difflineplus">+</span>
<a href="#l3.127"></a><span id="l3.127" class="difflineplus">+  // Create a channel from the URI and open it as an input stream</span>
<a href="#l3.128"></a><span id="l3.128" class="difflineplus">+  var ios = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l3.129"></a><span id="l3.129" class="difflineplus">+                      .getService(Components.interfaces.nsIIOService);</span>
<a href="#l3.130"></a><span id="l3.130" class="difflineplus">+  var channel = ios.newChannelFromURI(ios.newURI(aUri, null, null));</span>
<a href="#l3.131"></a><span id="l3.131" class="difflineplus">+  var istream = channel.open();</span>
<a href="#l3.132"></a><span id="l3.132" class="difflineplus">+</span>
<a href="#l3.133"></a><span id="l3.133" class="difflineplus">+  // Get the photo file</span>
<a href="#l3.134"></a><span id="l3.134" class="difflineplus">+  file.append(makePhotoFilename(file.path, findPhotoExt(aUri, channel)));</span>
<a href="#l3.135"></a><span id="l3.135" class="difflineplus">+</span>
<a href="#l3.136"></a><span id="l3.136" class="difflineplus">+  return saveStreamToFile(istream, file);</span>
<a href="#l3.137"></a><span id="l3.137" class="difflineplus">+}</span>
<a href="#l3.138"></a><span id="l3.138" class="difflineplus">+</span>
<a href="#l3.139"></a><span id="l3.139" class="difflineplus">+/**</span>
<a href="#l3.140"></a><span id="l3.140" class="difflineplus">+ * Finds the file extension of the photo identified by the URI, if possible.</span>
<a href="#l3.141"></a><span id="l3.141" class="difflineplus">+ * This function can be overridden (with a copy of the original) for URIs that</span>
<a href="#l3.142"></a><span id="l3.142" class="difflineplus">+ * do not identify the extension or when the Content-Type response header is</span>
<a href="#l3.143"></a><span id="l3.143" class="difflineplus">+ * either not set or isn't 'image/png', 'image/jpeg', or 'image/gif'.</span>
<a href="#l3.144"></a><span id="l3.144" class="difflineplus">+ * The original function can be called if the URI does not match.</span>
<a href="#l3.145"></a><span id="l3.145" class="difflineplus">+ *</span>
<a href="#l3.146"></a><span id="l3.146" class="difflineplus">+ * @param aUri The URI of the photo.</span>
<a href="#l3.147"></a><span id="l3.147" class="difflineplus">+ * @param aChannel The opened channel for the URI.</span>
<a href="#l3.148"></a><span id="l3.148" class="difflineplus">+ *</span>
<a href="#l3.149"></a><span id="l3.149" class="difflineplus">+ * @return The extension of the file, if any, including the period.</span>
<a href="#l3.150"></a><span id="l3.150" class="difflineplus">+ */</span>
<a href="#l3.151"></a><span id="l3.151" class="difflineplus">+function findPhotoExt(aUri, aChannel) {</span>
<a href="#l3.152"></a><span id="l3.152" class="difflineplus">+  if (aChannel) {</span>
<a href="#l3.153"></a><span id="l3.153" class="difflineplus">+    try {</span>
<a href="#l3.154"></a><span id="l3.154" class="difflineplus">+      aChannel.QueryInterface(Components.interfaces.nsIHttpChannel);</span>
<a href="#l3.155"></a><span id="l3.155" class="difflineplus">+      var header = aChannel.getResponseHeader(&quot;Content-Type&quot;);</span>
<a href="#l3.156"></a><span id="l3.156" class="difflineplus">+      var type   = header ? header.split(&quot;;&quot;)[0] : &quot;&quot;;</span>
<a href="#l3.157"></a><span id="l3.157" class="difflineplus">+      switch (type.toLowerCase()) {</span>
<a href="#l3.158"></a><span id="l3.158" class="difflineplus">+        case &quot;image/png&quot;:</span>
<a href="#l3.159"></a><span id="l3.159" class="difflineplus">+          return &quot;.png&quot;;</span>
<a href="#l3.160"></a><span id="l3.160" class="difflineplus">+        case &quot;image/jpeg&quot;:</span>
<a href="#l3.161"></a><span id="l3.161" class="difflineplus">+          return &quot;.jpg&quot;;</span>
<a href="#l3.162"></a><span id="l3.162" class="difflineplus">+        case &quot;image/gif&quot;:</span>
<a href="#l3.163"></a><span id="l3.163" class="difflineplus">+          return &quot;.gif&quot;;</span>
<a href="#l3.164"></a><span id="l3.164" class="difflineplus">+      }</span>
<a href="#l3.165"></a><span id="l3.165" class="difflineplus">+    } catch (e) {}</span>
<a href="#l3.166"></a><span id="l3.166" class="difflineplus">+  }</span>
<a href="#l3.167"></a><span id="l3.167" class="difflineplus">+</span>
<a href="#l3.168"></a><span id="l3.168" class="difflineplus">+  var index = aUri ? aUri.lastIndexOf(&quot;.&quot;) : -1;</span>
<a href="#l3.169"></a><span id="l3.169" class="difflineplus">+  if (index == -1)</span>
<a href="#l3.170"></a><span id="l3.170" class="difflineplus">+    return &quot;&quot;;</span>
<a href="#l3.171"></a><span id="l3.171" class="difflineplus">+   return aUri.substring(index);</span>
<a href="#l3.172"></a><span id="l3.172" class="difflineplus">+}</span>
<a href="#l3.173"></a><span id="l3.173" class="difflineplus">+</span>
<a href="#l3.174"></a><span id="l3.174" class="difflineplus">+/**</span>
<a href="#l3.175"></a><span id="l3.175" class="difflineplus">+ * Generates a unique filename to be used for a local copy of a contact's photo.</span>
<a href="#l3.176"></a><span id="l3.176" class="difflineplus">+ *</span>
<a href="#l3.177"></a><span id="l3.177" class="difflineplus">+ * @param aPath      The path to the folder in which the photo will be saved.</span>
<a href="#l3.178"></a><span id="l3.178" class="difflineplus">+ * @param aExtension The file extension of the photo.</span>
<a href="#l3.179"></a><span id="l3.179" class="difflineplus">+ *</span>
<a href="#l3.180"></a><span id="l3.180" class="difflineplus">+ * @return A unique filename in the given path.</span>
<a href="#l3.181"></a><span id="l3.181" class="difflineplus">+ */</span>
<a href="#l3.182"></a><span id="l3.182" class="difflineplus">+function makePhotoFilename(aPath, aExtension) {</span>
<a href="#l3.183"></a><span id="l3.183" class="difflineplus">+  var filename, newFile;</span>
<a href="#l3.184"></a><span id="l3.184" class="difflineplus">+  // Find a random filename for the photo that doesn't exist yet</span>
<a href="#l3.185"></a><span id="l3.185" class="difflineplus">+  do {</span>
<a href="#l3.186"></a><span id="l3.186" class="difflineplus">+    filename = new String(Math.random()).replace(&quot;0.&quot;, &quot;&quot;) + aExtension;</span>
<a href="#l3.187"></a><span id="l3.187" class="difflineplus">+    newFile = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l3.188"></a><span id="l3.188" class="difflineplus">+                        .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l3.189"></a><span id="l3.189" class="difflineplus">+    newFile.initWithPath(aPath);</span>
<a href="#l3.190"></a><span id="l3.190" class="difflineplus">+    newFile.append(filename);</span>
<a href="#l3.191"></a><span id="l3.191" class="difflineplus">+  } while (newFile.exists());</span>
<a href="#l3.192"></a><span id="l3.192" class="difflineplus">+  return filename;</span>
<a href="#l3.193"></a><span id="l3.193" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/components/addrbook/content/addressbook.xul</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/components/addrbook/content/addressbook.xul</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -738,16 +738,24 @@</span>
<a href="#l4.4"></a><span id="l4.4">       &lt;splitter id=&quot;results-splitter&quot; collapse=&quot;after&quot; persist=&quot;state&quot;/&gt;</span>
<a href="#l4.5"></a><span id="l4.5">       </span>
<a href="#l4.6"></a><span id="l4.6">       &lt;!-- card view --&gt;</span>
<a href="#l4.7"></a><span id="l4.7">       &lt;hbox id=&quot;CardViewOuterBox&quot; flex=&quot;1&quot; minheight=&quot;100&quot; height=&quot;200&quot; persist=&quot;height&quot;&gt; </span>
<a href="#l4.8"></a><span id="l4.8">         &lt;vbox id=&quot;CardViewBox&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l4.9"></a><span id="l4.9">           &lt;vbox id=&quot;CardViewInnerBox&quot; collapsed=&quot;true&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l4.10"></a><span id="l4.10">             &lt;description id=&quot;CardTitle&quot;/&gt;</span>
<a href="#l4.11"></a><span id="l4.11">             &lt;hbox flex=&quot;1&quot;&gt;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+              &lt;vbox id=&quot;cvbPhoto&quot; class=&quot;cardViewGroup&quot;&gt;</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+                &lt;hbox style=&quot;min-width: 10ch; max-width: 10ch;&quot;&gt;</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+                  &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+                  &lt;html:img align=&quot;center&quot; src=&quot;&quot; id=&quot;cvPhoto&quot;</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+                            style=&quot;max-width: 10ch; max-height: 10ch; min-width: 1ch;&quot;/&gt;</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+                  &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+                &lt;/hbox&gt;</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineplus">+              &lt;/vbox&gt;</span>
<a href="#l4.20"></a><span id="l4.20">               &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l4.21"></a><span id="l4.21">                 &lt;vbox id=&quot;cvbContact&quot; class=&quot;cardViewGroup&quot;&gt;</span>
<a href="#l4.22"></a><span id="l4.22">                   &lt;description class=&quot;CardViewHeading&quot; id=&quot;cvhContact&quot;&gt;&amp;contact.heading;&lt;/description&gt;          </span>
<a href="#l4.23"></a><span id="l4.23">                   &lt;description class=&quot;CardViewLink&quot; id=&quot;cvListNameBox&quot;&gt;</span>
<a href="#l4.24"></a><span id="l4.24">                     &lt;html:p&gt;&lt;html:a href=&quot;&quot; id=&quot;cvListName&quot;/&gt;&lt;/html:p&gt;</span>
<a href="#l4.25"></a><span id="l4.25">                   &lt;/description&gt;</span>
<a href="#l4.26"></a><span id="l4.26">                   &lt;description class=&quot;CardViewText&quot; id=&quot;cvDisplayName&quot;/&gt;</span>
<a href="#l4.27"></a><span id="l4.27">                   &lt;description class=&quot;CardViewText&quot; id=&quot;cvNickname&quot;/&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/addressbook/abCardOverlay.dtd</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/addressbook/abCardOverlay.dtd</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -85,23 +85,23 @@</span>
<a href="#l5.4"></a><span id="l5.4"> embed content from remote sources. Opening such a message will open a</span>
<a href="#l5.5"></a><span id="l5.5"> connection to this external source. This may allow tracking of the</span>
<a href="#l5.6"></a><span id="l5.6"> message being read. Checking this box will allow such external embedded</span>
<a href="#l5.7"></a><span id="l5.7"> content in HTML messages from this contact.&quot;&gt;</span>
<a href="#l5.8"></a><span id="l5.8"> </span>
<a href="#l5.9"></a><span id="l5.9"> &lt;!ENTITY WorkPhone.label                &quot;Work:&quot;&gt;</span>
<a href="#l5.10"></a><span id="l5.10"> &lt;!ENTITY WorkPhone.accesskey            &quot;k&quot;&gt;</span>
<a href="#l5.11"></a><span id="l5.11"> &lt;!ENTITY HomePhone.label                &quot;Home:&quot;&gt;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-&lt;!ENTITY HomePhone.accesskey            &quot;o&quot;&gt;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+&lt;!ENTITY HomePhone.accesskey            &quot;m&quot;&gt;</span>
<a href="#l5.14"></a><span id="l5.14"> &lt;!ENTITY FaxNumber.label                &quot;Fax:&quot;&gt;</span>
<a href="#l5.15"></a><span id="l5.15"> &lt;!ENTITY FaxNumber.accesskey            &quot;x&quot;&gt;</span>
<a href="#l5.16"></a><span id="l5.16"> &lt;!ENTITY PagerNumber.label              &quot;Pager:&quot;&gt;</span>
<a href="#l5.17"></a><span id="l5.17"> &lt;!ENTITY PagerNumber.accesskey          &quot;g&quot;&gt;</span>
<a href="#l5.18"></a><span id="l5.18"> &lt;!ENTITY CellularNumber.label           &quot;Mobile:&quot;&gt;</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineminus">-&lt;!ENTITY CellularNumber.accesskey       &quot;M&quot;&gt;</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineplus">+&lt;!ENTITY CellularNumber.accesskey       &quot;b&quot;&gt;</span>
<a href="#l5.21"></a><span id="l5.21"> </span>
<a href="#l5.22"></a><span id="l5.22"> &lt;!ENTITY Home.tab                       &quot;Private&quot;&gt;</span>
<a href="#l5.23"></a><span id="l5.23"> &lt;!ENTITY Home.accesskey                 &quot;P&quot;&gt;</span>
<a href="#l5.24"></a><span id="l5.24"> &lt;!ENTITY HomeAddress.label              &quot;Address:&quot;&gt;</span>
<a href="#l5.25"></a><span id="l5.25"> &lt;!ENTITY HomeAddress.accesskey          &quot;A&quot;&gt;</span>
<a href="#l5.26"></a><span id="l5.26"> &lt;!ENTITY HomeAddress2.label             &quot;&quot;&gt;</span>
<a href="#l5.27"></a><span id="l5.27"> &lt;!ENTITY HomeAddress2.accesskey         &quot;&quot;&gt;</span>
<a href="#l5.28"></a><span id="l5.28"> &lt;!ENTITY HomeCity.label                 &quot;City:&quot;&gt;</span>
<a href="#l5.29"></a><span id="l5.29" class="difflineat">@@ -124,17 +124,17 @@ content in HTML messages from this conta</span>
<a href="#l5.30"></a><span id="l5.30"> </span>
<a href="#l5.31"></a><span id="l5.31"> &lt;!ENTITY Work.tab                       &quot;Work&quot;&gt;</span>
<a href="#l5.32"></a><span id="l5.32"> &lt;!ENTITY Work.accesskey                 &quot;W&quot;&gt;</span>
<a href="#l5.33"></a><span id="l5.33"> &lt;!ENTITY JobTitle.label                 &quot;Title:&quot;&gt;</span>
<a href="#l5.34"></a><span id="l5.34"> &lt;!ENTITY JobTitle.accesskey             &quot;i&quot;&gt;</span>
<a href="#l5.35"></a><span id="l5.35"> &lt;!ENTITY Department.label               &quot;Department:&quot;&gt;</span>
<a href="#l5.36"></a><span id="l5.36"> &lt;!ENTITY Department.accesskey           &quot;m&quot;&gt;</span>
<a href="#l5.37"></a><span id="l5.37"> &lt;!ENTITY Company.label                  &quot;Organization:&quot;&gt;</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineminus">-&lt;!ENTITY Company.accesskey              &quot;O&quot;&gt;</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineplus">+&lt;!ENTITY Company.accesskey              &quot;n&quot;&gt;</span>
<a href="#l5.40"></a><span id="l5.40"> &lt;!ENTITY WorkAddress.label              &quot;Address:&quot;&gt;</span>
<a href="#l5.41"></a><span id="l5.41"> &lt;!ENTITY WorkAddress.accesskey          &quot;A&quot;&gt;</span>
<a href="#l5.42"></a><span id="l5.42"> &lt;!ENTITY WorkAddress2.label             &quot;&quot;&gt;</span>
<a href="#l5.43"></a><span id="l5.43"> &lt;!ENTITY WorkAddress2.accesskey         &quot;&quot;&gt;</span>
<a href="#l5.44"></a><span id="l5.44"> &lt;!ENTITY WorkCity.label                 &quot;City:&quot;&gt;</span>
<a href="#l5.45"></a><span id="l5.45"> &lt;!ENTITY WorkCity.accesskey             &quot;y&quot;&gt;</span>
<a href="#l5.46"></a><span id="l5.46"> &lt;!ENTITY WorkState.label                &quot;State/Province:&quot;&gt;</span>
<a href="#l5.47"></a><span id="l5.47"> &lt;!ENTITY WorkState.accesskey            &quot;S&quot;&gt;</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineat">@@ -152,8 +152,24 @@ content in HTML messages from this conta</span>
<a href="#l5.49"></a><span id="l5.49"> &lt;!ENTITY Custom2.label                  &quot;Custom 2:&quot;&gt;</span>
<a href="#l5.50"></a><span id="l5.50"> &lt;!ENTITY Custom2.accesskey              &quot;2&quot;&gt;</span>
<a href="#l5.51"></a><span id="l5.51"> &lt;!ENTITY Custom3.label                  &quot;Custom 3:&quot;&gt;</span>
<a href="#l5.52"></a><span id="l5.52"> &lt;!ENTITY Custom3.accesskey              &quot;3&quot;&gt;</span>
<a href="#l5.53"></a><span id="l5.53"> &lt;!ENTITY Custom4.label                  &quot;Custom 4:&quot;&gt;</span>
<a href="#l5.54"></a><span id="l5.54"> &lt;!ENTITY Custom4.accesskey              &quot;4&quot;&gt;</span>
<a href="#l5.55"></a><span id="l5.55"> &lt;!ENTITY Notes.label                    &quot;Notes:&quot;&gt;</span>
<a href="#l5.56"></a><span id="l5.56"> &lt;!ENTITY Notes.accesskey                &quot;N&quot;&gt;</span>
<a href="#l5.57"></a><span id="l5.57" class="difflineplus">+</span>
<a href="#l5.58"></a><span id="l5.58" class="difflineplus">+&lt;!ENTITY Photo.tab                      &quot;Photo&quot;&gt;</span>
<a href="#l5.59"></a><span id="l5.59" class="difflineplus">+&lt;!ENTITY Photo.accesskey                &quot;o&quot;&gt;</span>
<a href="#l5.60"></a><span id="l5.60" class="difflineplus">+&lt;!ENTITY PhotoDesc.label                &quot;Pick one of the following:&quot;&gt;</span>
<a href="#l5.61"></a><span id="l5.61" class="difflineplus">+&lt;!ENTITY GenericPhoto.label             &quot;Generic Photo&quot;&gt;</span>
<a href="#l5.62"></a><span id="l5.62" class="difflineplus">+&lt;!ENTITY GenericPhoto.accesskey         &quot;G&quot;&gt;</span>
<a href="#l5.63"></a><span id="l5.63" class="difflineplus">+&lt;!ENTITY DefaultPhoto.label             &quot;Default&quot;&gt;</span>
<a href="#l5.64"></a><span id="l5.64" class="difflineplus">+&lt;!ENTITY PhotoFile.label                &quot;On this Computer&quot;&gt;</span>
<a href="#l5.65"></a><span id="l5.65" class="difflineplus">+&lt;!ENTITY PhotoFile.accesskey            &quot;n&quot;&gt;</span>
<a href="#l5.66"></a><span id="l5.66" class="difflineplus">+&lt;!ENTITY BrowsePhoto.label              &quot;Browse&quot;&gt;</span>
<a href="#l5.67"></a><span id="l5.67" class="difflineplus">+&lt;!ENTITY BrowsePhoto.accesskey          &quot;r&quot;&gt;</span>
<a href="#l5.68"></a><span id="l5.68" class="difflineplus">+&lt;!ENTITY PhotoURL.label                 &quot;On the Web&quot;&gt;</span>
<a href="#l5.69"></a><span id="l5.69" class="difflineplus">+&lt;!ENTITY PhotoURL.accesskey             &quot;b&quot;&gt;</span>
<a href="#l5.70"></a><span id="l5.70" class="difflineplus">+&lt;!ENTITY PhotoURL.emptytext             &quot;Paste or type the web address of a photo&quot;&gt;</span>
<a href="#l5.71"></a><span id="l5.71" class="difflineplus">+&lt;!ENTITY UpdatePhoto.label              &quot;Update&quot;&gt;</span>
<a href="#l5.72"></a><span id="l5.72" class="difflineplus">+&lt;!ENTITY UpdatePhoto.accesskey          &quot;u&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/addressbook/addressBook.properties</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/addressbook/addressBook.properties</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -110,16 +110,18 @@ cityOrStateAndZip=%1$S %2$S</span>
<a href="#l6.4"></a><span id="l6.4"> </span>
<a href="#l6.5"></a><span id="l6.5"> stateZipSeparator=</span>
<a href="#l6.6"></a><span id="l6.6"> </span>
<a href="#l6.7"></a><span id="l6.7"> prefixTo=To</span>
<a href="#l6.8"></a><span id="l6.8"> prefixCc=Cc</span>
<a href="#l6.9"></a><span id="l6.9"> prefixBcc=Bcc</span>
<a href="#l6.10"></a><span id="l6.10"> addressBook=Address Book</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+browsePhoto=Contact Photo</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+</span>
<a href="#l6.14"></a><span id="l6.14"> # mailnews.js</span>
<a href="#l6.15"></a><span id="l6.15"> ldap_2.servers.pab.description=Personal Address Book</span>
<a href="#l6.16"></a><span id="l6.16"> ldap_2.servers.history.description=Collected Addresses</span>
<a href="#l6.17"></a><span id="l6.17"> ## LOCALIZATION NOTE (ldap_2.servers.osx.description is only used on Mac OS X)</span>
<a href="#l6.18"></a><span id="l6.18"> ldap_2.servers.osx.description=Mac OS X Address Book</span>
<a href="#l6.19"></a><span id="l6.19"> </span>
<a href="#l6.20"></a><span id="l6.20"> # status bar stuff</span>
<a href="#l6.21"></a><span id="l6.21"> ## LOCALIZATION NOTE (totalContactStatus):</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/themes/gnomestripe/jar.mn</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/themes/gnomestripe/jar.mn</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -48,16 +48,18 @@ classic.jar:</span>
<a href="#l7.4"></a><span id="l7.4">   skin/classic/messenger/activity/indexMailIcon.png           (mail/activity/indexMailIcon.png)</span>
<a href="#l7.5"></a><span id="l7.5">   skin/classic/messenger/addressbook/addressbook.css          (mail/addrbook/addressbook.css)</span>
<a href="#l7.6"></a><span id="l7.6">   skin/classic/messenger/addressbook/abContactsPanel.css      (mail/addrbook/abContactsPanel.css)</span>
<a href="#l7.7"></a><span id="l7.7">   skin/classic/messenger/addressbook/cardDialog.css           (mail/addrbook/cardDialog.css)</span>
<a href="#l7.8"></a><span id="l7.8">   skin/classic/messenger/addressbook/abResultsPane.css        (mail/addrbook/abResultsPane.css)</span>
<a href="#l7.9"></a><span id="l7.9">   skin/classic/messenger/addressbook/icons/abcard.png         (mail/addrbook/abcard.png)</span>
<a href="#l7.10"></a><span id="l7.10">   skin/classic/messenger/addressbook/icons/addrbook.png       (mail/addrbook/addrbook.png)</span>
<a href="#l7.11"></a><span id="l7.11">   skin/classic/messenger/addressbook/icons/ablist.png         (mail/addrbook/ablist.png)</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+  skin/classic/messenger/addressbook/icons/contact-generic.png             (mail/addrbook/contact-generic.png)</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+  skin/classic/messenger/addressbook/icons/contact-generic-tiny.png        (mail/addrbook/contact-generic-tiny.png)</span>
<a href="#l7.14"></a><span id="l7.14">   skin/classic/messenger/addressbook/icons/addressbook-toolbar.png         (mail/addrbook/addressbook-toolbar.png)</span>
<a href="#l7.15"></a><span id="l7.15">   skin/classic/messenger/addressbook/icons/addressbook-toolbar-small.png   (mail/addrbook/addressbook-toolbar-small.png)</span>
<a href="#l7.16"></a><span id="l7.16">   skin/classic/messenger/addressbook/icons/abcard-large.png   (mail/addrbook/abcard-large.png)</span>
<a href="#l7.17"></a><span id="l7.17">   skin/classic/messenger/addressbook/icons/remote-addrbook.png (mail/addrbook/remote-addrbook.png)</span>
<a href="#l7.18"></a><span id="l7.18">   skin/classic/messenger/addressbook/icons/remote-addrbook-error.png      (mail/addrbook/remote-addrbook-error.png)</span>
<a href="#l7.19"></a><span id="l7.19">   skin/classic/messenger/addressbook/icons/secure-remote-addrbook.png     (mail/addrbook/secure-remote-addrbook.png)</span>
<a href="#l7.20"></a><span id="l7.20">   skin/classic/messenger/messengercompose/messengercompose.css (mail/compose/messengercompose.css)</span>
<a href="#l7.21"></a><span id="l7.21">   skin/classic/messenger/messengercompose/editorOverlay.css    (mail/compose/editorOverlay.css)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">new file mode 100644</span>
<a href="#l8.2"></a><span id="l8.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..95e6a2e4afd27bbeea9619c13a73634f5334cfa2</span>
<a href="#l8.3"></a><span id="l8.3">GIT binary patch
literal 674
zc$@*E0$u%yP)&lt;h;3K|Lk000e1NJLTq000mG000mO1^@s6AM^iV00001b5ch_0Itp)
z=&gt;Px#24YJ`L;(K){{a7&gt;y{D4^000SaNLh0L01ejw01ejxLMWSf00007bV*G`2iXV&gt;
z0|yjrB8a#E00JUOL_t(I%Z-yyPZU8A#edy1vjZgTu(%+L1fxU_EN2rFqlWL`cknaH
z3Aig9_@hjSpj-%XcV%~H|4dbRm}OywgYVEucUQgY_qxg*9v^&gt;Ps8+YkEaw5NSdB;F
zy(e6#R=47~^r@S52z)R~P*fFgh~$_Vs*0$fs-wN|;`th(ndY5tn@00DQ5fNz2aGgL
zao*8tHYvq1mC77(Tw*ZjBch1ptSqk*g2OwHcLCl9c&lt;(toJ7atMGwpVVZnr}m$E&gt;fv
zVxwLsNfLs&lt;VP@dK7fKDY;%PTGf7sjGrP*vEk~1|m1;EM4H`3D-=iH&lt;ZV3=B=&amp;x9&lt;?
z==CyyiQp)Tn3&lt;U&amp;41!y4Zwc;9Glk2`OFEs-gGwSotJR|4@58+-Zw6|Hh@hI2=flwt
z+`&amp;1Asxlb#G3;LnU}~rc!{LynT8-J+S&lt;I|33NSOGD56@eQYw|k=l3KCq6NW|`3j4R
zi+JzH$pGbYnP)4@h{%LI4|ftog{;@3Uf*DPdU~ScmX@AUsmxDQ2MB?p%OnR^=q)D+
zK@g0Cf*_!rB!po&amp;?!*ZKGsAgDJ{)rX&lt;D8503$iR52jzKAdYWRUtgfz7E|*bN+%3T{
z&amp;pA3g;^)OL8jS|sZWrg=SgV&lt;FeSJ-&lt;)#CJfN^QBu+S*IN5sC==U%s-lvx~!xCeS@P
zeS^V(cDv2h)fET(2fTUxmM{!M-oN|6W_@!sNdE^_B}wM^3#b}6f8+L94*&amp;oF07*qo
IM6N&lt;$f~S)$R{#J2</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1">new file mode 100644</span>
<a href="#l9.2"></a><span id="l9.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..a0c2f959cf889f3debe4dbc4f781d9acdabafa12</span>
<a href="#l9.3"></a><span id="l9.3">GIT binary patch
literal 5392
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/span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/themes/pinstripe/jar.mn</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/themes/pinstripe/jar.mn</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -43,17 +43,19 @@ classic.jar:</span>
<a href="#l10.4"></a><span id="l10.4">   skin/classic/messenger/activity/compactMailIcon.png            (mail/activity/compactMailIcon.png)</span>
<a href="#l10.5"></a><span id="l10.5">   skin/classic/messenger/activity/indexMailIcon.png              (mail/activity/indexMailIcon.png)</span>
<a href="#l10.6"></a><span id="l10.6">   skin/classic/messenger/hud-style-button-middle-background.png  (mail/hud-style-button-middle-background.png)</span>
<a href="#l10.7"></a><span id="l10.7">   skin/classic/messenger/addressbook/addressbook.css             (mail/addrbook/addressbook.css)</span>
<a href="#l10.8"></a><span id="l10.8">   skin/classic/messenger/addressbook/abContactsPanel.css         (mail/addrbook/abContactsPanel.css)</span>
<a href="#l10.9"></a><span id="l10.9">   skin/classic/messenger/addressbook/cardDialog.css              (mail/addrbook/cardDialog.css)</span>
<a href="#l10.10"></a><span id="l10.10">   skin/classic/messenger/addressbook/abResultsPane.css           (mail/addrbook/abResultsPane.css)</span>
<a href="#l10.11"></a><span id="l10.11">   skin/classic/messenger/addressbook/icons/abcard.png            (mail/addrbook/abcard.png)</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-  skin/classic/messenger/addressbook/icons/ablist.png            (mail/addrbook/ablist.png) </span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+  skin/classic/messenger/addressbook/icons/ablist.png            (mail/addrbook/ablist.png)</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineplus">+  skin/classic/messenger/addressbook/icons/contact-generic.png             (mail/addrbook/contact-generic.png)</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineplus">+  skin/classic/messenger/addressbook/icons/contact-generic-tiny.png        (mail/addrbook/contact-generic-tiny.png)</span>
<a href="#l10.16"></a><span id="l10.16">   skin/classic/messenger/addressbook/icons/addressbook-toolbar.png         (mail/addrbook/addressbook-toolbar.png)</span>
<a href="#l10.17"></a><span id="l10.17">   skin/classic/messenger/addressbook/icons/addressbook-toolbar-small.png   (mail/addrbook/addressbook-toolbar-small.png)</span>
<a href="#l10.18"></a><span id="l10.18">   skin/classic/messenger/addressbook/icons/abcard.png            (mail/addrbook/abcard.png)</span>
<a href="#l10.19"></a><span id="l10.19">   skin/classic/messenger/addressbook/icons/ablist.png            (mail/addrbook/ablist.png)</span>
<a href="#l10.20"></a><span id="l10.20">   skin/classic/messenger/addressbook/icons/addrbook.png          (mail/addrbook/addrbook.png)</span>
<a href="#l10.21"></a><span id="l10.21">   skin/classic/messenger/addressbook/icons/addressbook-toolbar-small.png  (mail/addrbook/addressbook-toolbar-small.png)</span>
<a href="#l10.22"></a><span id="l10.22">   skin/classic/messenger/addressbook/icons/addressbook-toolbar.png        (mail/addrbook/addressbook-toolbar.png)</span>
<a href="#l10.23"></a><span id="l10.23">   skin/classic/messenger/addressbook/icons/remote-addrbook-error.png      (mail/addrbook/remote-addrbook-error.png)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">new file mode 100644</span>
<a href="#l11.2"></a><span id="l11.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..95e6a2e4afd27bbeea9619c13a73634f5334cfa2</span>
<a href="#l11.3"></a><span id="l11.3">GIT binary patch
literal 674
zc$@*E0$u%yP)&lt;h;3K|Lk000e1NJLTq000mG000mO1^@s6AM^iV00001b5ch_0Itp)
z=&gt;Px#24YJ`L;(K){{a7&gt;y{D4^000SaNLh0L01ejw01ejxLMWSf00007bV*G`2iXV&gt;
z0|yjrB8a#E00JUOL_t(I%Z-yyPZU8A#edy1vjZgTu(%+L1fxU_EN2rFqlWL`cknaH
z3Aig9_@hjSpj-%XcV%~H|4dbRm}OywgYVEucUQgY_qxg*9v^&gt;Ps8+YkEaw5NSdB;F
zy(e6#R=47~^r@S52z)R~P*fFgh~$_Vs*0$fs-wN|;`th(ndY5tn@00DQ5fNz2aGgL
zao*8tHYvq1mC77(Tw*ZjBch1ptSqk*g2OwHcLCl9c&lt;(toJ7atMGwpVVZnr}m$E&gt;fv
zVxwLsNfLs&lt;VP@dK7fKDY;%PTGf7sjGrP*vEk~1|m1;EM4H`3D-=iH&lt;ZV3=B=&amp;x9&lt;?
z==CyyiQp)Tn3&lt;U&amp;41!y4Zwc;9Glk2`OFEs-gGwSotJR|4@58+-Zw6|Hh@hI2=flwt
z+`&amp;1Asxlb#G3;LnU}~rc!{LynT8-J+S&lt;I|33NSOGD56@eQYw|k=l3KCq6NW|`3j4R
zi+JzH$pGbYnP)4@h{%LI4|ftog{;@3Uf*DPdU~ScmX@AUsmxDQ2MB?p%OnR^=q)D+
zK@g0Cf*_!rB!po&amp;?!*ZKGsAgDJ{)rX&lt;D8503$iR52jzKAdYWRUtgfz7E|*bN+%3T{
z&amp;pA3g;^)OL8jS|sZWrg=SgV&lt;FeSJ-&lt;)#CJfN^QBu+S*IN5sC==U%s-lvx~!xCeS@P
zeS^V(cDv2h)fET(2fTUxmM{!M-oN|6W_@!sNdE^_B}wM^3#b}6f8+L94*&amp;oF07*qo
IM6N&lt;$f~S)$R{#J2</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">new file mode 100644</span>
<a href="#l12.2"></a><span id="l12.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..6555eceb0f3767123127a763da7883095aba3ad2</span>
<a href="#l12.3"></a><span id="l12.3">GIT binary patch
literal 5846
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/span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mail/themes/qute/jar.mn</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mail/themes/qute/jar.mn</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -77,16 +77,18 @@ classic.jar:</span>
<a href="#l13.4"></a><span id="l13.4">   skin/classic/messenger/activity/indexMailIcon.png              (mail/activity/indexMailIcon.png)</span>
<a href="#l13.5"></a><span id="l13.5">   skin/classic/messenger/addressbook/addressbook.css          (mail/addrbook/addressbook.css)</span>
<a href="#l13.6"></a><span id="l13.6">   skin/classic/messenger/addressbook/abContactsPanel.css      (mail/addrbook/abContactsPanel.css)</span>
<a href="#l13.7"></a><span id="l13.7">   skin/classic/messenger/addressbook/cardDialog.css           (mail/addrbook/cardDialog.css)</span>
<a href="#l13.8"></a><span id="l13.8">   skin/classic/messenger/addressbook/abResultsPane.css        (mail/addrbook/abResultsPane.css)</span>
<a href="#l13.9"></a><span id="l13.9">   skin/classic/messenger/addressbook/icons/abcard.png         (mail/addrbook/abcard.png)</span>
<a href="#l13.10"></a><span id="l13.10">   skin/classic/messenger/addressbook/icons/addrbook.png       (mail/addrbook/addrbook.png)</span>
<a href="#l13.11"></a><span id="l13.11">   skin/classic/messenger/addressbook/icons/ablist.png         (mail/addrbook/ablist.png)</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+  skin/classic/messenger/addressbook/icons/contact-generic.png             (mail/addrbook/contact-generic.png)</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+  skin/classic/messenger/addressbook/icons/contact-generic-tiny.png        (mail/addrbook/contact-generic-tiny.png)</span>
<a href="#l13.14"></a><span id="l13.14">   skin/classic/messenger/addressbook/icons/addressbook-toolbar.png         (mail/addrbook/addressbook-toolbar.png)</span>
<a href="#l13.15"></a><span id="l13.15">   skin/classic/messenger/addressbook/icons/addressbook-toolbar-small.png   (mail/addrbook/addressbook-toolbar-small.png)</span>
<a href="#l13.16"></a><span id="l13.16">   skin/classic/messenger/addressbook/icons/abcard-large.png   (mail/addrbook/abcard-large.png)</span>
<a href="#l13.17"></a><span id="l13.17">   skin/classic/messenger/addressbook/icons/remote-addrbook.png (mail/addrbook/remote-addrbook.png)</span>
<a href="#l13.18"></a><span id="l13.18">   skin/classic/messenger/addressbook/icons/remote-addrbook-error.png      (mail/addrbook/remote-addrbook-error.png)</span>
<a href="#l13.19"></a><span id="l13.19">   skin/classic/messenger/addressbook/icons/secure-remote-addrbook.png     (mail/addrbook/secure-remote-addrbook.png)</span>
<a href="#l13.20"></a><span id="l13.20">   skin/classic/messenger/messengercompose/messengercompose.css (mail/compose/messengercompose.css)</span>
<a href="#l13.21"></a><span id="l13.21">   skin/classic/messenger/messengercompose/compose-toolbar.png  (mail/compose/compose-toolbar.png)</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineat">@@ -264,16 +266,18 @@ classic.jar:</span>
<a href="#l13.23"></a><span id="l13.23">   skin/classic/aero/messenger/activity/indexMailIcon.png              (mail/activity/indexMailIcon-aero.png)</span>
<a href="#l13.24"></a><span id="l13.24"> * skin/classic/aero/messenger/addressbook/addressbook.css          (mail/addrbook/addressbook-aero.css)</span>
<a href="#l13.25"></a><span id="l13.25">   skin/classic/aero/messenger/addressbook/abContactsPanel.css      (mail/addrbook/abContactsPanel.css)</span>
<a href="#l13.26"></a><span id="l13.26">   skin/classic/aero/messenger/addressbook/cardDialog.css           (mail/addrbook/cardDialog.css)</span>
<a href="#l13.27"></a><span id="l13.27">   skin/classic/aero/messenger/addressbook/abResultsPane.css        (mail/addrbook/abResultsPane.css)</span>
<a href="#l13.28"></a><span id="l13.28">   skin/classic/aero/messenger/addressbook/icons/abcard.png         (mail/addrbook/abcard.png)</span>
<a href="#l13.29"></a><span id="l13.29">   skin/classic/aero/messenger/addressbook/icons/addrbook.png       (mail/addrbook/addrbook.png)</span>
<a href="#l13.30"></a><span id="l13.30">   skin/classic/aero/messenger/addressbook/icons/ablist.png         (mail/addrbook/ablist.png)</span>
<a href="#l13.31"></a><span id="l13.31" class="difflineplus">+  skin/classic/aero/messenger/addressbook/icons/contact-generic.png             (mail/addrbook/contact-generic.png)</span>
<a href="#l13.32"></a><span id="l13.32" class="difflineplus">+  skin/classic/aero/messenger/addressbook/icons/contact-generic-tiny.png        (mail/addrbook/contact-generic-tiny.png)</span>
<a href="#l13.33"></a><span id="l13.33">   skin/classic/aero/messenger/addressbook/icons/addressbook-toolbar.png         (mail/addrbook/addressbook-toolbar-aero.png)</span>
<a href="#l13.34"></a><span id="l13.34">   skin/classic/aero/messenger/addressbook/icons/addressbook-toolbar-small.png   (mail/addrbook/addressbook-toolbar-small-aero.png)</span>
<a href="#l13.35"></a><span id="l13.35">   skin/classic/aero/messenger/addressbook/icons/abcard-large.png   (mail/addrbook/abcard-large.png)</span>
<a href="#l13.36"></a><span id="l13.36">   skin/classic/aero/messenger/addressbook/icons/remote-addrbook.png (mail/addrbook/remote-addrbook.png)</span>
<a href="#l13.37"></a><span id="l13.37">   skin/classic/aero/messenger/addressbook/icons/remote-addrbook-error.png      (mail/addrbook/remote-addrbook-error.png)</span>
<a href="#l13.38"></a><span id="l13.38">   skin/classic/aero/messenger/addressbook/icons/secure-remote-addrbook.png     (mail/addrbook/secure-remote-addrbook.png)</span>
<a href="#l13.39"></a><span id="l13.39">   skin/classic/aero/messenger/messengercompose/messengercompose.css (mail/compose/messengercompose-aero.css)</span>
<a href="#l13.40"></a><span id="l13.40">   skin/classic/aero/messenger/messengercompose/compose-toolbar.png  (mail/compose/compose-toolbar.png)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1">new file mode 100644</span>
<a href="#l14.2"></a><span id="l14.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..95e6a2e4afd27bbeea9619c13a73634f5334cfa2</span>
<a href="#l14.3"></a><span id="l14.3">GIT binary patch
literal 674
zc$@*E0$u%yP)&lt;h;3K|Lk000e1NJLTq000mG000mO1^@s6AM^iV00001b5ch_0Itp)
z=&gt;Px#24YJ`L;(K){{a7&gt;y{D4^000SaNLh0L01ejw01ejxLMWSf00007bV*G`2iXV&gt;
z0|yjrB8a#E00JUOL_t(I%Z-yyPZU8A#edy1vjZgTu(%+L1fxU_EN2rFqlWL`cknaH
z3Aig9_@hjSpj-%XcV%~H|4dbRm}OywgYVEucUQgY_qxg*9v^&gt;Ps8+YkEaw5NSdB;F
zy(e6#R=47~^r@S52z)R~P*fFgh~$_Vs*0$fs-wN|;`th(ndY5tn@00DQ5fNz2aGgL
zao*8tHYvq1mC77(Tw*ZjBch1ptSqk*g2OwHcLCl9c&lt;(toJ7atMGwpVVZnr}m$E&gt;fv
zVxwLsNfLs&lt;VP@dK7fKDY;%PTGf7sjGrP*vEk~1|m1;EM4H`3D-=iH&lt;ZV3=B=&amp;x9&lt;?
z==CyyiQp)Tn3&lt;U&amp;41!y4Zwc;9Glk2`OFEs-gGwSotJR|4@58+-Zw6|Hh@hI2=flwt
z+`&amp;1Asxlb#G3;LnU}~rc!{LynT8-J+S&lt;I|33NSOGD56@eQYw|k=l3KCq6NW|`3j4R
zi+JzH$pGbYnP)4@h{%LI4|ftog{;@3Uf*DPdU~ScmX@AUsmxDQ2MB?p%OnR^=q)D+
zK@g0Cf*_!rB!po&amp;?!*ZKGsAgDJ{)rX&lt;D8503$iR52jzKAdYWRUtgfz7E|*bN+%3T{
z&amp;pA3g;^)OL8jS|sZWrg=SgV&lt;FeSJ-&lt;)#CJfN^QBu+S*IN5sC==U%s-lvx~!xCeS@P
zeS^V(cDv2h)fET(2fTUxmM{!M-oN|6W_@!sNdE^_B}wM^3#b}6f8+L94*&amp;oF07*qo
IM6N&lt;$f~S)$R{#J2</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1">new file mode 100644</span>
<a href="#l15.2"></a><span id="l15.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..6555eceb0f3767123127a763da7883095aba3ad2</span>
<a href="#l15.3"></a><span id="l15.3">GIT binary patch
literal 5846
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/span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mailnews/addrbook/content/abCardOverlay.xul</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mailnews/addrbook/content/abCardOverlay.xul</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -37,33 +37,35 @@</span>
<a href="#l16.4"></a><span id="l16.4"> </span>
<a href="#l16.5"></a><span id="l16.5">  ***** END LICENSE BLOCK ***** --&gt;</span>
<a href="#l16.6"></a><span id="l16.6"> </span>
<a href="#l16.7"></a><span id="l16.7"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/addressbook/cardDialog.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l16.8"></a><span id="l16.8"> </span>
<a href="#l16.9"></a><span id="l16.9"> &lt;!DOCTYPE overlay SYSTEM &quot;chrome://messenger/locale/addressbook/abCardOverlay.dtd&quot;&gt;</span>
<a href="#l16.10"></a><span id="l16.10"> </span>
<a href="#l16.11"></a><span id="l16.11"> &lt;overlay id=&quot;editcardOverlay&quot;</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-     xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+     xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineplus">+     xmlns:html=&quot;http://www.w3.org/1999/xhtml&quot;&gt;</span>
<a href="#l16.15"></a><span id="l16.15"> </span>
<a href="#l16.16"></a><span id="l16.16"> &lt;stringbundleset id=&quot;stringbundleset&quot;&gt;</span>
<a href="#l16.17"></a><span id="l16.17">   &lt;stringbundle id=&quot;bundle_addressBook&quot; src=&quot;chrome://messenger/locale/addressbook/addressBook.properties&quot;/&gt;</span>
<a href="#l16.18"></a><span id="l16.18"> &lt;/stringbundleset&gt;</span>
<a href="#l16.19"></a><span id="l16.19"> </span>
<a href="#l16.20"></a><span id="l16.20"> &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/addressbook/abCommon.js&quot;/&gt;</span>
<a href="#l16.21"></a><span id="l16.21"> &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/addressbook/abCardOverlay.js&quot;/&gt;</span>
<a href="#l16.22"></a><span id="l16.22"> </span>
<a href="#l16.23"></a><span id="l16.23"> &lt;vbox id=&quot;editcard&quot;&gt;</span>
<a href="#l16.24"></a><span id="l16.24">   &lt;tabbox&gt;</span>
<a href="#l16.25"></a><span id="l16.25">     &lt;tabs id=&quot;abTabs&quot;&gt;</span>
<a href="#l16.26"></a><span id="l16.26">       &lt;tab id=&quot;contactTabButton&quot; label=&quot;&amp;Contact.tab;&quot;</span>
<a href="#l16.27"></a><span id="l16.27">            accesskey=&quot;&amp;Contact.accesskey;&quot;/&gt;</span>
<a href="#l16.28"></a><span id="l16.28">       &lt;tab id=&quot;homeTabButton&quot; label=&quot;&amp;Home.tab;&quot; accesskey=&quot;&amp;Home.accesskey;&quot;/&gt;</span>
<a href="#l16.29"></a><span id="l16.29">       &lt;tab id=&quot;workTabButton&quot; label=&quot;&amp;Work.tab;&quot; accesskey=&quot;&amp;Work.accesskey;&quot;/&gt;</span>
<a href="#l16.30"></a><span id="l16.30">       &lt;tab id=&quot;otherTabButton&quot; label=&quot;&amp;Other.tab;&quot; accesskey=&quot;&amp;Other.accesskey;&quot;/&gt;</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineplus">+      &lt;tab id=&quot;photoTabButton&quot; label=&quot;&amp;Photo.tab;&quot; accesskey=&quot;&amp;Photo.accesskey;&quot;/&gt;</span>
<a href="#l16.32"></a><span id="l16.32">     &lt;/tabs&gt;</span>
<a href="#l16.33"></a><span id="l16.33"> </span>
<a href="#l16.34"></a><span id="l16.34">     &lt;tabpanels id=&quot;abTabPanels&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l16.35"></a><span id="l16.35">       &lt;!-- ** Name Tab ** --&gt;</span>
<a href="#l16.36"></a><span id="l16.36">       &lt;!-- The following vbox contains two hboxes</span>
<a href="#l16.37"></a><span id="l16.37">            top: Name/Email/Phonenumber bottom: Email prefs. --&gt;</span>
<a href="#l16.38"></a><span id="l16.38">       &lt;vbox id=&quot;abNameTab&quot; &gt;</span>
<a href="#l16.39"></a><span id="l16.39">         &lt;!-- This hbox contains two vboxes</span>
<a href="#l16.40"></a><span id="l16.40" class="difflineat">@@ -384,12 +386,74 @@</span>
<a href="#l16.41"></a><span id="l16.41">                    accesskey=&quot;&amp;Custom4.accesskey;&quot;/&gt;</span>
<a href="#l16.42"></a><span id="l16.42">             &lt;textbox id=&quot;Custom4&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l16.43"></a><span id="l16.43">           &lt;/hbox&gt;</span>
<a href="#l16.44"></a><span id="l16.44">         &lt;/vbox&gt;</span>
<a href="#l16.45"></a><span id="l16.45">         &lt;label control=&quot;Notes&quot; value=&quot;&amp;Notes.label;&quot;</span>
<a href="#l16.46"></a><span id="l16.46">                accesskey=&quot;&amp;Notes.accesskey;&quot;/&gt;</span>
<a href="#l16.47"></a><span id="l16.47">         &lt;textbox id=&quot;Notes&quot; multiline=&quot;true&quot; wrap=&quot;virtual&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l16.48"></a><span id="l16.48">       &lt;/vbox&gt;</span>
<a href="#l16.49"></a><span id="l16.49" class="difflineplus">+</span>
<a href="#l16.50"></a><span id="l16.50" class="difflineplus">+      &lt;!-- ** Photo Tab ** --&gt;</span>
<a href="#l16.51"></a><span id="l16.51" class="difflineplus">+      &lt;vbox id=&quot;abPhotoTab&quot; &gt;</span>
<a href="#l16.52"></a><span id="l16.52" class="difflineplus">+        &lt;hbox flex=&quot;1&quot;&gt;</span>
<a href="#l16.53"></a><span id="l16.53" class="difflineplus">+          &lt;vbox align=&quot;left&quot;&gt;</span>
<a href="#l16.54"></a><span id="l16.54" class="difflineplus">+            &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l16.55"></a><span id="l16.55" class="difflineplus">+            &lt;hbox id=&quot;photoBox&quot; style=&quot;min-width: 25ch; max-width: 25ch;&quot;&gt;</span>
<a href="#l16.56"></a><span id="l16.56" class="difflineplus">+              &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l16.57"></a><span id="l16.57" class="difflineplus">+              &lt;html:img align=&quot;center&quot; src=&quot;&quot; id=&quot;photo&quot;</span>
<a href="#l16.58"></a><span id="l16.58" class="difflineplus">+                        style=&quot;max-width: 25ch; max-height: 25ch; min-width: 1ch;&quot;/&gt;</span>
<a href="#l16.59"></a><span id="l16.59" class="difflineplus">+              &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l16.60"></a><span id="l16.60" class="difflineplus">+            &lt;/hbox&gt;</span>
<a href="#l16.61"></a><span id="l16.61" class="difflineplus">+            &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l16.62"></a><span id="l16.62" class="difflineplus">+          &lt;/vbox&gt;</span>
<a href="#l16.63"></a><span id="l16.63" class="difflineplus">+          &lt;vbox&gt;</span>
<a href="#l16.64"></a><span id="l16.64" class="difflineplus">+            &lt;command id=&quot;PhotoCmd&quot; oncommand=&quot;updatePhoto();&quot;/&gt;</span>
<a href="#l16.65"></a><span id="l16.65" class="difflineplus">+            &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l16.66"></a><span id="l16.66" class="difflineplus">+            &lt;groupbox flex=&quot;1&quot;&gt;</span>
<a href="#l16.67"></a><span id="l16.67" class="difflineplus">+              &lt;caption label=&quot;&amp;PhotoDesc.label;&quot;/&gt;</span>
<a href="#l16.68"></a><span id="l16.68" class="difflineplus">+              &lt;radiogroup id=&quot;PhotoType&quot;&gt;</span>
<a href="#l16.69"></a><span id="l16.69" class="difflineplus">+                &lt;radio id=&quot;generic&quot; label=&quot;&amp;GenericPhoto.label;&quot;</span>
<a href="#l16.70"></a><span id="l16.70" class="difflineplus">+                       command=&quot;PhotoCmd&quot;</span>
<a href="#l16.71"></a><span id="l16.71" class="difflineplus">+                       accesskey=&quot;&amp;GenericPhoto.accesskey;&quot;</span>
<a href="#l16.72"></a><span id="l16.72" class="difflineplus">+                       selected=&quot;true&quot;/&gt;</span>
<a href="#l16.73"></a><span id="l16.73" class="difflineplus">+                &lt;hbox class=&quot;indent&quot;&gt;</span>
<a href="#l16.74"></a><span id="l16.74" class="difflineplus">+                  &lt;menulist id=&quot;GenericPhotoList&quot;</span>
<a href="#l16.75"></a><span id="l16.75" class="difflineplus">+                            oncommand=&quot;updatePhoto('generic');&quot;&gt;</span>
<a href="#l16.76"></a><span id="l16.76" class="difflineplus">+                    &lt;menupopup&gt;</span>
<a href="#l16.77"></a><span id="l16.77" class="difflineplus">+                      &lt;menuitem label=&quot;&amp;DefaultPhoto.label;&quot; selected=&quot;true&quot;</span>
<a href="#l16.78"></a><span id="l16.78" class="difflineplus">+                                value=&quot;chrome://messenger/skin/addressbook/icons/contact-generic.png&quot;</span>
<a href="#l16.79"></a><span id="l16.79" class="difflineplus">+                                image=&quot;chrome://messenger/skin/addressbook/icons/contact-generic-tiny.png&quot;/&gt;</span>
<a href="#l16.80"></a><span id="l16.80" class="difflineplus">+                    &lt;/menupopup&gt;</span>
<a href="#l16.81"></a><span id="l16.81" class="difflineplus">+                  &lt;/menulist&gt;</span>
<a href="#l16.82"></a><span id="l16.82" class="difflineplus">+                &lt;/hbox&gt;</span>
<a href="#l16.83"></a><span id="l16.83" class="difflineplus">+                &lt;radio id=&quot;file&quot; label=&quot;&amp;PhotoFile.label;&quot;</span>
<a href="#l16.84"></a><span id="l16.84" class="difflineplus">+                       command=&quot;PhotoCmd&quot;</span>
<a href="#l16.85"></a><span id="l16.85" class="difflineplus">+                       accesskey=&quot;&amp;PhotoFile.accesskey;&quot;/&gt;</span>
<a href="#l16.86"></a><span id="l16.86" class="difflineplus">+                &lt;hbox class=&quot;indent&quot;&gt;</span>
<a href="#l16.87"></a><span id="l16.87" class="difflineplus">+                  &lt;filefield id=&quot;PhotoFile&quot; maxlength=&quot;255&quot; flex=&quot;1&quot;</span>
<a href="#l16.88"></a><span id="l16.88" class="difflineplus">+                             disabled=&quot;true&quot;</span>
<a href="#l16.89"></a><span id="l16.89" class="difflineplus">+                             style=&quot;-moz-margin-start:2px;&quot;/&gt;</span>
<a href="#l16.90"></a><span id="l16.90" class="difflineplus">+                  &lt;button oncommand=&quot;browsePhoto();&quot; id=&quot;BrowsePhoto&quot;</span>
<a href="#l16.91"></a><span id="l16.91" class="difflineplus">+                          label=&quot;&amp;BrowsePhoto.label;&quot;</span>
<a href="#l16.92"></a><span id="l16.92" class="difflineplus">+                          accesskey=&quot;&amp;BrowsePhoto.accesskey;&quot;/&gt;</span>
<a href="#l16.93"></a><span id="l16.93" class="difflineplus">+                &lt;/hbox&gt;</span>
<a href="#l16.94"></a><span id="l16.94" class="difflineplus">+                &lt;radio id=&quot;web&quot; label=&quot;&amp;PhotoURL.label;&quot;</span>
<a href="#l16.95"></a><span id="l16.95" class="difflineplus">+                       command=&quot;PhotoCmd&quot;</span>
<a href="#l16.96"></a><span id="l16.96" class="difflineplus">+                       accesskey=&quot;&amp;PhotoURL.accesskey;&quot;/&gt;</span>
<a href="#l16.97"></a><span id="l16.97" class="difflineplus">+                &lt;hbox class=&quot;indent&quot;&gt;</span>
<a href="#l16.98"></a><span id="l16.98" class="difflineplus">+                  &lt;textbox id=&quot;PhotoURI&quot; maxlength=&quot;255&quot; style=&quot;width: 45ch;&quot;</span>
<a href="#l16.99"></a><span id="l16.99" class="difflineplus">+                           emptytext=&quot;&amp;PhotoURL.emptytext;&quot;</span>
<a href="#l16.100"></a><span id="l16.100" class="difflineplus">+                           class=&quot;AddressCardEditWidth&quot;/&gt;</span>
<a href="#l16.101"></a><span id="l16.101" class="difflineplus">+                  &lt;button oncommand=&quot;updatePhoto('web');&quot; id=&quot;UpdatePhoto&quot;</span>
<a href="#l16.102"></a><span id="l16.102" class="difflineplus">+                          label=&quot;&amp;UpdatePhoto.label;&quot;</span>
<a href="#l16.103"></a><span id="l16.103" class="difflineplus">+                          accesskey=&quot;&amp;UpdatePhoto.accesskey;&quot;/&gt;</span>
<a href="#l16.104"></a><span id="l16.104" class="difflineplus">+                &lt;/hbox&gt;</span>
<a href="#l16.105"></a><span id="l16.105" class="difflineplus">+              &lt;/radiogroup&gt;</span>
<a href="#l16.106"></a><span id="l16.106" class="difflineplus">+            &lt;/groupbox&gt;</span>
<a href="#l16.107"></a><span id="l16.107" class="difflineplus">+            &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l16.108"></a><span id="l16.108" class="difflineplus">+          &lt;/vbox&gt;</span>
<a href="#l16.109"></a><span id="l16.109" class="difflineplus">+        &lt;/hbox&gt;</span>
<a href="#l16.110"></a><span id="l16.110" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l16.111"></a><span id="l16.111">     &lt;/tabpanels&gt;</span>
<a href="#l16.112"></a><span id="l16.112">   &lt;/tabbox&gt;</span>
<a href="#l16.113"></a><span id="l16.113"> &lt;/vbox&gt;</span>
<a href="#l16.114"></a><span id="l16.114"> &lt;/overlay&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mailnews/addrbook/content/abCardViewOverlay.xul</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mailnews/addrbook/content/abCardViewOverlay.xul</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -47,17 +47,24 @@</span>
<a href="#l17.4"></a><span id="l17.4"> </span>
<a href="#l17.5"></a><span id="l17.5">   &lt;vbox id=&quot;CardViewBox&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l17.6"></a><span id="l17.6">   </span>
<a href="#l17.7"></a><span id="l17.7">   &lt;vbox id=&quot;CardViewInnerBox&quot; collapsed=&quot;true&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l17.8"></a><span id="l17.8">     </span>
<a href="#l17.9"></a><span id="l17.9">     &lt;description id=&quot;CardTitle&quot;/&gt;</span>
<a href="#l17.10"></a><span id="l17.10"> </span>
<a href="#l17.11"></a><span id="l17.11">     &lt;hbox style=&quot;width:100%&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-      </span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+      &lt;vbox id=&quot;cvbPhoto&quot; class=&quot;cardViewGroup&quot;&gt;</span>
<a href="#l17.14"></a><span id="l17.14" class="difflineplus">+        &lt;hbox style=&quot;min-width: 10ch; max-width: 10ch;&quot;&gt;</span>
<a href="#l17.15"></a><span id="l17.15" class="difflineplus">+          &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l17.16"></a><span id="l17.16" class="difflineplus">+          &lt;html:img align=&quot;center&quot; src=&quot;&quot; id=&quot;cvPhoto&quot;</span>
<a href="#l17.17"></a><span id="l17.17" class="difflineplus">+            style=&quot;max-width: 10ch; max-height: 10ch; min-width: 1ch;&quot;/&gt;</span>
<a href="#l17.18"></a><span id="l17.18" class="difflineplus">+          &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l17.19"></a><span id="l17.19" class="difflineplus">+        &lt;/hbox&gt;</span>
<a href="#l17.20"></a><span id="l17.20" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l17.21"></a><span id="l17.21">       &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l17.22"></a><span id="l17.22">         &lt;vbox id=&quot;cvbContact&quot; class=&quot;cardViewGroup&quot;&gt;</span>
<a href="#l17.23"></a><span id="l17.23">             &lt;description class=&quot;CardViewHeading&quot; id=&quot;cvhContact&quot;&gt;&amp;contact.heading;&lt;/description&gt;          </span>
<a href="#l17.24"></a><span id="l17.24"> </span>
<a href="#l17.25"></a><span id="l17.25">             &lt;description class=&quot;CardViewLink&quot; id=&quot;cvListNameBox&quot;&gt;</span>
<a href="#l17.26"></a><span id="l17.26">               &lt;html:p&gt;&lt;html:a href=&quot;&quot; id=&quot;cvListName&quot;/&gt;&lt;/html:p&gt;</span>
<a href="#l17.27"></a><span id="l17.27">             &lt;/description&gt;</span>
<a href="#l17.28"></a><span id="l17.28"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mailnews/addrbook/public/nsIAbCard.idl</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mailnews/addrbook/public/nsIAbCard.idl</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -81,16 +81,20 @@ interface nsIAbPreferMailFormat {</span>
<a href="#l18.4"></a><span id="l18.4">  * - Custom1, Custom2, Custom3, Custom4</span>
<a href="#l18.5"></a><span id="l18.5">  * - Notes</span>
<a href="#l18.6"></a><span id="l18.6">  * - Integral properties:</span>
<a href="#l18.7"></a><span id="l18.7">  *   - LastModifiedDate</span>
<a href="#l18.8"></a><span id="l18.8">  *   - PopularityIndex</span>
<a href="#l18.9"></a><span id="l18.9">  *   - PreferMailFormat (see nsIAbPreferMailFormat)</span>
<a href="#l18.10"></a><span id="l18.10">  * - Boolean properties:</span>
<a href="#l18.11"></a><span id="l18.11">  *   - AllowRemoteContent</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineplus">+ * - Photo properties:</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+ *   - PhotoName</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineplus">+ *   - PhotoType</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineplus">+ *   - PhotoURI</span>
<a href="#l18.16"></a><span id="l18.16">  */</span>
<a href="#l18.17"></a><span id="l18.17"> [scriptable, uuid(fdac4023-cd19-4e75-9a88-8e48881076ea)]</span>
<a href="#l18.18"></a><span id="l18.18"> interface nsIAbCard : nsIAbItem {</span>
<a href="#l18.19"></a><span id="l18.19">   /**</span>
<a href="#l18.20"></a><span id="l18.20">    * A list of all the properties that this card has as an enumerator, whose</span>
<a href="#l18.21"></a><span id="l18.21">    * members are all nsIProperty objects.</span>
<a href="#l18.22"></a><span id="l18.22">    */</span>
<a href="#l18.23"></a><span id="l18.23">   readonly attribute nsISimpleEnumerator properties;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/suite/locales/en-US/chrome/mailnews/addressbook/abCardOverlay.dtd</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/mailnews/addressbook/abCardOverlay.dtd</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -85,23 +85,23 @@</span>
<a href="#l19.4"></a><span id="l19.4"> embed content from remote sources. Opening such a message will open a</span>
<a href="#l19.5"></a><span id="l19.5"> connection to this external source. This may allow tracking of the</span>
<a href="#l19.6"></a><span id="l19.6"> message being read. Checking this box will allow such external embedded</span>
<a href="#l19.7"></a><span id="l19.7"> content in HTML messages from this contact.&quot;&gt;</span>
<a href="#l19.8"></a><span id="l19.8"> </span>
<a href="#l19.9"></a><span id="l19.9"> &lt;!ENTITY WorkPhone.label                &quot;Work:&quot;&gt;</span>
<a href="#l19.10"></a><span id="l19.10"> &lt;!ENTITY WorkPhone.accesskey            &quot;k&quot;&gt;</span>
<a href="#l19.11"></a><span id="l19.11"> &lt;!ENTITY HomePhone.label                &quot;Home:&quot;&gt;</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-&lt;!ENTITY HomePhone.accesskey            &quot;o&quot;&gt;</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+&lt;!ENTITY HomePhone.accesskey            &quot;m&quot;&gt;</span>
<a href="#l19.14"></a><span id="l19.14"> &lt;!ENTITY FaxNumber.label                &quot;Fax:&quot;&gt;</span>
<a href="#l19.15"></a><span id="l19.15"> &lt;!ENTITY FaxNumber.accesskey            &quot;x&quot;&gt;</span>
<a href="#l19.16"></a><span id="l19.16"> &lt;!ENTITY PagerNumber.label              &quot;Pager:&quot;&gt;</span>
<a href="#l19.17"></a><span id="l19.17"> &lt;!ENTITY PagerNumber.accesskey          &quot;g&quot;&gt;</span>
<a href="#l19.18"></a><span id="l19.18"> &lt;!ENTITY CellularNumber.label           &quot;Mobile:&quot;&gt;</span>
<a href="#l19.19"></a><span id="l19.19" class="difflineminus">-&lt;!ENTITY CellularNumber.accesskey       &quot;M&quot;&gt;</span>
<a href="#l19.20"></a><span id="l19.20" class="difflineplus">+&lt;!ENTITY CellularNumber.accesskey       &quot;b&quot;&gt;</span>
<a href="#l19.21"></a><span id="l19.21"> </span>
<a href="#l19.22"></a><span id="l19.22"> &lt;!ENTITY Home.tab                       &quot;Private&quot;&gt;</span>
<a href="#l19.23"></a><span id="l19.23"> &lt;!ENTITY Home.accesskey                 &quot;P&quot;&gt;</span>
<a href="#l19.24"></a><span id="l19.24"> &lt;!ENTITY HomeAddress.label              &quot;Address:&quot;&gt;</span>
<a href="#l19.25"></a><span id="l19.25"> &lt;!ENTITY HomeAddress.accesskey          &quot;A&quot;&gt;</span>
<a href="#l19.26"></a><span id="l19.26"> &lt;!ENTITY HomeAddress2.label             &quot;&quot;&gt;</span>
<a href="#l19.27"></a><span id="l19.27"> &lt;!ENTITY HomeAddress2.accesskey         &quot;&quot;&gt;</span>
<a href="#l19.28"></a><span id="l19.28"> &lt;!ENTITY HomeCity.label                 &quot;City:&quot;&gt;</span>
<a href="#l19.29"></a><span id="l19.29" class="difflineat">@@ -124,17 +124,17 @@ content in HTML messages from this conta</span>
<a href="#l19.30"></a><span id="l19.30"> </span>
<a href="#l19.31"></a><span id="l19.31"> &lt;!ENTITY Work.tab                       &quot;Work&quot;&gt;</span>
<a href="#l19.32"></a><span id="l19.32"> &lt;!ENTITY Work.accesskey                 &quot;W&quot;&gt;</span>
<a href="#l19.33"></a><span id="l19.33"> &lt;!ENTITY JobTitle.label                 &quot;Title:&quot;&gt;</span>
<a href="#l19.34"></a><span id="l19.34"> &lt;!ENTITY JobTitle.accesskey             &quot;i&quot;&gt;</span>
<a href="#l19.35"></a><span id="l19.35"> &lt;!ENTITY Department.label               &quot;Department:&quot;&gt;</span>
<a href="#l19.36"></a><span id="l19.36"> &lt;!ENTITY Department.accesskey           &quot;m&quot;&gt;</span>
<a href="#l19.37"></a><span id="l19.37"> &lt;!ENTITY Company.label                  &quot;Organization:&quot;&gt;</span>
<a href="#l19.38"></a><span id="l19.38" class="difflineminus">-&lt;!ENTITY Company.accesskey              &quot;O&quot;&gt;</span>
<a href="#l19.39"></a><span id="l19.39" class="difflineplus">+&lt;!ENTITY Company.accesskey              &quot;n&quot;&gt;</span>
<a href="#l19.40"></a><span id="l19.40"> &lt;!ENTITY WorkAddress.label              &quot;Address:&quot;&gt;</span>
<a href="#l19.41"></a><span id="l19.41"> &lt;!ENTITY WorkAddress.accesskey          &quot;A&quot;&gt;</span>
<a href="#l19.42"></a><span id="l19.42"> &lt;!ENTITY WorkAddress2.label             &quot;&quot;&gt;</span>
<a href="#l19.43"></a><span id="l19.43"> &lt;!ENTITY WorkAddress2.accesskey         &quot;&quot;&gt;</span>
<a href="#l19.44"></a><span id="l19.44"> &lt;!ENTITY WorkCity.label                 &quot;City:&quot;&gt;</span>
<a href="#l19.45"></a><span id="l19.45"> &lt;!ENTITY WorkCity.accesskey             &quot;y&quot;&gt;</span>
<a href="#l19.46"></a><span id="l19.46"> &lt;!ENTITY WorkState.label                &quot;State/Province:&quot;&gt;</span>
<a href="#l19.47"></a><span id="l19.47"> &lt;!ENTITY WorkState.accesskey            &quot;S&quot;&gt;</span>
<a href="#l19.48"></a><span id="l19.48" class="difflineat">@@ -152,8 +152,24 @@ content in HTML messages from this conta</span>
<a href="#l19.49"></a><span id="l19.49"> &lt;!ENTITY Custom2.label                  &quot;Custom 2:&quot;&gt;</span>
<a href="#l19.50"></a><span id="l19.50"> &lt;!ENTITY Custom2.accesskey              &quot;2&quot;&gt;</span>
<a href="#l19.51"></a><span id="l19.51"> &lt;!ENTITY Custom3.label                  &quot;Custom 3:&quot;&gt;</span>
<a href="#l19.52"></a><span id="l19.52"> &lt;!ENTITY Custom3.accesskey              &quot;3&quot;&gt;</span>
<a href="#l19.53"></a><span id="l19.53"> &lt;!ENTITY Custom4.label                  &quot;Custom 4:&quot;&gt;</span>
<a href="#l19.54"></a><span id="l19.54"> &lt;!ENTITY Custom4.accesskey              &quot;4&quot;&gt;</span>
<a href="#l19.55"></a><span id="l19.55"> &lt;!ENTITY Notes.label                    &quot;Notes:&quot;&gt;</span>
<a href="#l19.56"></a><span id="l19.56"> &lt;!ENTITY Notes.accesskey                &quot;N&quot;&gt;</span>
<a href="#l19.57"></a><span id="l19.57" class="difflineplus">+</span>
<a href="#l19.58"></a><span id="l19.58" class="difflineplus">+&lt;!ENTITY Photo.tab                      &quot;Photo&quot;&gt;</span>
<a href="#l19.59"></a><span id="l19.59" class="difflineplus">+&lt;!ENTITY Photo.accesskey                &quot;o&quot;&gt;</span>
<a href="#l19.60"></a><span id="l19.60" class="difflineplus">+&lt;!ENTITY PhotoDesc.label                &quot;Pick one of the following:&quot;&gt;</span>
<a href="#l19.61"></a><span id="l19.61" class="difflineplus">+&lt;!ENTITY GenericPhoto.label             &quot;Generic Photo&quot;&gt;</span>
<a href="#l19.62"></a><span id="l19.62" class="difflineplus">+&lt;!ENTITY GenericPhoto.accesskey         &quot;G&quot;&gt;</span>
<a href="#l19.63"></a><span id="l19.63" class="difflineplus">+&lt;!ENTITY DefaultPhoto.label             &quot;Default&quot;&gt;</span>
<a href="#l19.64"></a><span id="l19.64" class="difflineplus">+&lt;!ENTITY PhotoFile.label                &quot;On this Computer&quot;&gt;</span>
<a href="#l19.65"></a><span id="l19.65" class="difflineplus">+&lt;!ENTITY PhotoFile.accesskey            &quot;n&quot;&gt;</span>
<a href="#l19.66"></a><span id="l19.66" class="difflineplus">+&lt;!ENTITY BrowsePhoto.label              &quot;Browse&quot;&gt;</span>
<a href="#l19.67"></a><span id="l19.67" class="difflineplus">+&lt;!ENTITY BrowsePhoto.accesskey          &quot;r&quot;&gt;</span>
<a href="#l19.68"></a><span id="l19.68" class="difflineplus">+&lt;!ENTITY PhotoURL.label                 &quot;On the Web&quot;&gt;</span>
<a href="#l19.69"></a><span id="l19.69" class="difflineplus">+&lt;!ENTITY PhotoURL.accesskey             &quot;b&quot;&gt;</span>
<a href="#l19.70"></a><span id="l19.70" class="difflineplus">+&lt;!ENTITY PhotoURL.emptytext             &quot;Paste or type the web address of a photo&quot;&gt;</span>
<a href="#l19.71"></a><span id="l19.71" class="difflineplus">+&lt;!ENTITY UpdatePhoto.label              &quot;Update&quot;&gt;</span>
<a href="#l19.72"></a><span id="l19.72" class="difflineplus">+&lt;!ENTITY UpdatePhoto.accesskey          &quot;u&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/suite/locales/en-US/chrome/mailnews/addressbook/addressBook.properties</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/mailnews/addressbook/addressBook.properties</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -112,16 +112,18 @@ stateZipSeparator=</span>
<a href="#l20.4"></a><span id="l20.4"> </span>
<a href="#l20.5"></a><span id="l20.5"> prefixTo=To</span>
<a href="#l20.6"></a><span id="l20.6"> prefixCc=Cc</span>
<a href="#l20.7"></a><span id="l20.7"> prefixBcc=Bcc</span>
<a href="#l20.8"></a><span id="l20.8"> emptyEmailAddCard=You cannot add a card that has no primary email address</span>
<a href="#l20.9"></a><span id="l20.9"> emptyEmailAddCardTitle=Cannot Add Card</span>
<a href="#l20.10"></a><span id="l20.10"> addressBook=Address Book</span>
<a href="#l20.11"></a><span id="l20.11"> </span>
<a href="#l20.12"></a><span id="l20.12" class="difflineplus">+browsePhoto=Contact Photo</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+</span>
<a href="#l20.14"></a><span id="l20.14"> # mailnews.js</span>
<a href="#l20.15"></a><span id="l20.15"> ldap_2.servers.pab.description=Personal Address Book</span>
<a href="#l20.16"></a><span id="l20.16"> ldap_2.servers.history.description=Collected Addresses</span>
<a href="#l20.17"></a><span id="l20.17"> ## LOCALIZATION NOTE (ldap_2.servers.oe.description is only used on Windows)</span>
<a href="#l20.18"></a><span id="l20.18"> ldap_2.servers.oe.description=OE Contacts</span>
<a href="#l20.19"></a><span id="l20.19"> ## LOCALIZATION NOTE (ldap_2.servers.osx.description is only used on Mac OS X)</span>
<a href="#l20.20"></a><span id="l20.20"> ldap_2.servers.osx.description=Mac OS X Address Book</span>
<a href="#l20.21"></a><span id="l20.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/suite/mailnews/addrbook/abCardOverlay.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/suite/mailnews/addrbook/abCardOverlay.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -88,16 +88,17 @@ const kVcardFields =</span>
<a href="#l21.4"></a><span id="l21.4">           // Other &gt; Notes</span>
<a href="#l21.5"></a><span id="l21.5">          [&quot;Notes&quot;, &quot;Notes&quot;]];</span>
<a href="#l21.6"></a><span id="l21.6"> </span>
<a href="#l21.7"></a><span id="l21.7"> const kDefaultYear = 2000;</span>
<a href="#l21.8"></a><span id="l21.8"> var gEditCard;</span>
<a href="#l21.9"></a><span id="l21.9"> var gOnSaveListeners = new Array();</span>
<a href="#l21.10"></a><span id="l21.10"> var gOkCallback = null;</span>
<a href="#l21.11"></a><span id="l21.11"> var gHideABPicker = false;</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineplus">+var originalPhotoURI = &quot;&quot;;</span>
<a href="#l21.13"></a><span id="l21.13"> </span>
<a href="#l21.14"></a><span id="l21.14"> function OnLoadNewCard()</span>
<a href="#l21.15"></a><span id="l21.15"> {</span>
<a href="#l21.16"></a><span id="l21.16">   InitEditCard();</span>
<a href="#l21.17"></a><span id="l21.17"> </span>
<a href="#l21.18"></a><span id="l21.18">   gEditCard.card =</span>
<a href="#l21.19"></a><span id="l21.19">     ((&quot;arguments&quot; in window) &amp;&amp; (window.arguments.length &gt; 0) &amp;&amp;</span>
<a href="#l21.20"></a><span id="l21.20">      (window.arguments[0] instanceof Components.interfaces.nsIAbCard))</span>
<a href="#l21.21"></a><span id="l21.21" class="difflineat">@@ -273,16 +274,25 @@ function OnLoadEditCard()</span>
<a href="#l21.22"></a><span id="l21.22">   if (&quot;arguments&quot; in window &amp;&amp; window.arguments[0])</span>
<a href="#l21.23"></a><span id="l21.23">   {</span>
<a href="#l21.24"></a><span id="l21.24">     if (&quot;abURI&quot; in window.arguments[0]) {</span>
<a href="#l21.25"></a><span id="l21.25">       var abURI = window.arguments[0].abURI;</span>
<a href="#l21.26"></a><span id="l21.26">       var directory = GetDirectoryFromURI(abURI);</span>
<a href="#l21.27"></a><span id="l21.27"> </span>
<a href="#l21.28"></a><span id="l21.28">       if (directory.readOnly) </span>
<a href="#l21.29"></a><span id="l21.29">       {</span>
<a href="#l21.30"></a><span id="l21.30" class="difflineplus">+        // Disable the photo field and buttons</span>
<a href="#l21.31"></a><span id="l21.31" class="difflineplus">+        document.getElementById(&quot;generic&quot;).disabled          = true;</span>
<a href="#l21.32"></a><span id="l21.32" class="difflineplus">+        document.getElementById(&quot;GenericPhotoList&quot;).disabled = true;</span>
<a href="#l21.33"></a><span id="l21.33" class="difflineplus">+        document.getElementById(&quot;file&quot;).disabled             = true;</span>
<a href="#l21.34"></a><span id="l21.34" class="difflineplus">+        document.getElementById(&quot;web&quot;).disabled              = true;</span>
<a href="#l21.35"></a><span id="l21.35" class="difflineplus">+        document.getElementById(&quot;PhotoURI&quot;).readOnly         = true;</span>
<a href="#l21.36"></a><span id="l21.36" class="difflineplus">+        document.getElementById(&quot;PhotoURI&quot;).emptyText        = &quot;&quot;;</span>
<a href="#l21.37"></a><span id="l21.37" class="difflineplus">+        document.getElementById(&quot;BrowsePhoto&quot;).disabled      = true;</span>
<a href="#l21.38"></a><span id="l21.38" class="difflineplus">+        document.getElementById(&quot;UpdatePhoto&quot;).disabled      = true;</span>
<a href="#l21.39"></a><span id="l21.39">         // Set all the editable vcard fields to read only</span>
<a href="#l21.40"></a><span id="l21.40">         for (var i = kVcardFields.length; i-- &gt; 0; )</span>
<a href="#l21.41"></a><span id="l21.41">           document.getElementById(kVcardFields[i][0]).readOnly = true;</span>
<a href="#l21.42"></a><span id="l21.42"> </span>
<a href="#l21.43"></a><span id="l21.43">         // the birthday fields</span>
<a href="#l21.44"></a><span id="l21.44">         document.getElementById(&quot;Birthday&quot;).readOnly = true;</span>
<a href="#l21.45"></a><span id="l21.45">         document.getElementById(&quot;BirthYear&quot;).readOnly = true;</span>
<a href="#l21.46"></a><span id="l21.46">         document.getElementById(&quot;Age&quot;).readOnly = true;</span>
<a href="#l21.47"></a><span id="l21.47" class="difflineat">@@ -465,16 +475,48 @@ function GetCardValues(cardproperty, doc</span>
<a href="#l21.48"></a><span id="l21.48">     allowRemoteContentEl.checked = cardproperty.getProperty(&quot;AllowRemoteContent&quot;, false) != false;</span>
<a href="#l21.49"></a><span id="l21.49"> </span>
<a href="#l21.50"></a><span id="l21.50">   // get phonetic fields if exist</span>
<a href="#l21.51"></a><span id="l21.51">   try {</span>
<a href="#l21.52"></a><span id="l21.52">     doc.getElementById(&quot;PhoneticFirstName&quot;).value = cardproperty.getProperty(&quot;PhoneticFirstName&quot;, &quot;&quot;);</span>
<a href="#l21.53"></a><span id="l21.53">     doc.getElementById(&quot;PhoneticLastName&quot;).value = cardproperty.getProperty(&quot;PhoneticLastName&quot;, &quot;&quot;);</span>
<a href="#l21.54"></a><span id="l21.54">   }</span>
<a href="#l21.55"></a><span id="l21.55">   catch (ex) {}</span>
<a href="#l21.56"></a><span id="l21.56" class="difflineplus">+</span>
<a href="#l21.57"></a><span id="l21.57" class="difflineplus">+  // Store the original photo URI and update the photo</span>
<a href="#l21.58"></a><span id="l21.58" class="difflineplus">+  // Select the type if there is a valid value stored for that type, otherwise</span>
<a href="#l21.59"></a><span id="l21.59" class="difflineplus">+  // select the generic photo</span>
<a href="#l21.60"></a><span id="l21.60" class="difflineplus">+  var type = cardproperty.getProperty(&quot;PhotoType&quot;, &quot;&quot;);</span>
<a href="#l21.61"></a><span id="l21.61" class="difflineplus">+  document.getElementById(&quot;PhotoType&quot;).selectedItem =</span>
<a href="#l21.62"></a><span id="l21.62" class="difflineplus">+    document.getElementById(type ? type : &quot;generic&quot;);</span>
<a href="#l21.63"></a><span id="l21.63" class="difflineplus">+  if (type == &quot;file&quot;) {</span>
<a href="#l21.64"></a><span id="l21.64" class="difflineplus">+    originalPhotoURI = getPhotoURI(cardproperty.getProperty(&quot;PhotoName&quot;, &quot;&quot;));</span>
<a href="#l21.65"></a><span id="l21.65" class="difflineplus">+    var file = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l21.66"></a><span id="l21.66" class="difflineplus">+                         .getService(Components.interfaces.nsIIOService)</span>
<a href="#l21.67"></a><span id="l21.67" class="difflineplus">+                         .newURI(originalPhotoURI, null, null)</span>
<a href="#l21.68"></a><span id="l21.68" class="difflineplus">+                         .QueryInterface(Components.interfaces.nsIFileURL)</span>
<a href="#l21.69"></a><span id="l21.69" class="difflineplus">+                         .file;</span>
<a href="#l21.70"></a><span id="l21.70" class="difflineplus">+    if (file) {</span>
<a href="#l21.71"></a><span id="l21.71" class="difflineplus">+      document.getElementById(&quot;PhotoFile&quot;).file = file;</span>
<a href="#l21.72"></a><span id="l21.72" class="difflineplus">+      updatePhoto(&quot;file&quot;);</span>
<a href="#l21.73"></a><span id="l21.73" class="difflineplus">+    }</span>
<a href="#l21.74"></a><span id="l21.74" class="difflineplus">+    else</span>
<a href="#l21.75"></a><span id="l21.75" class="difflineplus">+      updatePhoto(&quot;generic&quot;);</span>
<a href="#l21.76"></a><span id="l21.76" class="difflineplus">+  }</span>
<a href="#l21.77"></a><span id="l21.77" class="difflineplus">+  else if (type == &quot;web&quot;) {</span>
<a href="#l21.78"></a><span id="l21.78" class="difflineplus">+    originalPhotoURI = getPhotoURI(cardproperty.getProperty(&quot;PhotoName&quot;, &quot;&quot;));</span>
<a href="#l21.79"></a><span id="l21.79" class="difflineplus">+    document.getElementById(&quot;PhotoURI&quot;).value = originalPhotoURI;</span>
<a href="#l21.80"></a><span id="l21.80" class="difflineplus">+    updatePhoto(&quot;web&quot;);</span>
<a href="#l21.81"></a><span id="l21.81" class="difflineplus">+  }</span>
<a href="#l21.82"></a><span id="l21.82" class="difflineplus">+  else {</span>
<a href="#l21.83"></a><span id="l21.83" class="difflineplus">+    originalPhotoURI = cardproperty.getProperty(&quot;PhotoURI&quot;, &quot;&quot;);</span>
<a href="#l21.84"></a><span id="l21.84" class="difflineplus">+    if (originalPhotoURI)</span>
<a href="#l21.85"></a><span id="l21.85" class="difflineplus">+      document.getElementById(&quot;GenericPhotoList&quot;).value = originalPhotoURI;</span>
<a href="#l21.86"></a><span id="l21.86" class="difflineplus">+    updatePhoto(&quot;generic&quot;);</span>
<a href="#l21.87"></a><span id="l21.87" class="difflineplus">+  }</span>
<a href="#l21.88"></a><span id="l21.88"> }</span>
<a href="#l21.89"></a><span id="l21.89"> </span>
<a href="#l21.90"></a><span id="l21.90"> // when the ab card dialog is being loaded to show a vCard,</span>
<a href="#l21.91"></a><span id="l21.91"> // hide the fields which aren't supported</span>
<a href="#l21.92"></a><span id="l21.92"> // by vCard so the user does not try to edit them.</span>
<a href="#l21.93"></a><span id="l21.93"> function HideNonVcardFields()</span>
<a href="#l21.94"></a><span id="l21.94"> {</span>
<a href="#l21.95"></a><span id="l21.95">   document.getElementById(&quot;homeTabButton&quot;).hidden = true;</span>
<a href="#l21.96"></a><span id="l21.96" class="difflineat">@@ -522,16 +564,43 @@ function CheckAndSetCardValues(cardprope</span>
<a href="#l21.97"></a><span id="l21.97"> </span>
<a href="#l21.98"></a><span id="l21.98">   // set phonetic fields if exist</span>
<a href="#l21.99"></a><span id="l21.99">   try {</span>
<a href="#l21.100"></a><span id="l21.100">     cardproperty.setProperty(&quot;PhoneticFirstName&quot;, doc.getElementById(&quot;PhoneticFirstName&quot;).value);</span>
<a href="#l21.101"></a><span id="l21.101">     cardproperty.setProperty(&quot;PhoneticLastName&quot;, doc.getElementById(&quot;PhoneticLastName&quot;).value);</span>
<a href="#l21.102"></a><span id="l21.102">   }</span>
<a href="#l21.103"></a><span id="l21.103">   catch (ex) {}</span>
<a href="#l21.104"></a><span id="l21.104"> </span>
<a href="#l21.105"></a><span id="l21.105" class="difflineplus">+  var type = document.getElementById(&quot;PhotoType&quot;).selectedItem.id;</span>
<a href="#l21.106"></a><span id="l21.106" class="difflineplus">+  var photoURI = originalPhotoURI;</span>
<a href="#l21.107"></a><span id="l21.107" class="difflineplus">+  if (type == &quot;file&quot; &amp;&amp; document.getElementById(&quot;PhotoFile&quot;).file)</span>
<a href="#l21.108"></a><span id="l21.108" class="difflineplus">+    photoURI = &quot;file://&quot; + document.getElementById(&quot;PhotoFile&quot;).file.path;</span>
<a href="#l21.109"></a><span id="l21.109" class="difflineplus">+  else if (type == &quot;web&quot; &amp;&amp; document.getElementById(&quot;PhotoURI&quot;).value)</span>
<a href="#l21.110"></a><span id="l21.110" class="difflineplus">+    photoURI = document.getElementById(&quot;PhotoURI&quot;).value;</span>
<a href="#l21.111"></a><span id="l21.111" class="difflineplus">+  else {</span>
<a href="#l21.112"></a><span id="l21.112" class="difflineplus">+    type = &quot;generic&quot;;</span>
<a href="#l21.113"></a><span id="l21.113" class="difflineplus">+    photoURI = document.getElementById(&quot;GenericPhotoList&quot;).value;</span>
<a href="#l21.114"></a><span id="l21.114" class="difflineplus">+  }</span>
<a href="#l21.115"></a><span id="l21.115" class="difflineplus">+  if (photoURI != originalPhotoURI) {</span>
<a href="#l21.116"></a><span id="l21.116" class="difflineplus">+    // Store the original URI</span>
<a href="#l21.117"></a><span id="l21.117" class="difflineplus">+    cardproperty.setProperty(&quot;PhotoURI&quot;, photoURI);</span>
<a href="#l21.118"></a><span id="l21.118" class="difflineplus">+    // Remove the original, if any</span>
<a href="#l21.119"></a><span id="l21.119" class="difflineplus">+    removePhoto(cardproperty.getProperty(&quot;PhotoName&quot;, null));</span>
<a href="#l21.120"></a><span id="l21.120" class="difflineplus">+    // Save the photo if it isn't one of the generic photos</span>
<a href="#l21.121"></a><span id="l21.121" class="difflineplus">+    if (type != &quot;generic&quot;) {</span>
<a href="#l21.122"></a><span id="l21.122" class="difflineplus">+      cardproperty.setProperty(&quot;PhotoType&quot;, &quot;file&quot;);</span>
<a href="#l21.123"></a><span id="l21.123" class="difflineplus">+      // Save the new file and store its URI as PhotoName </span>
<a href="#l21.124"></a><span id="l21.124" class="difflineplus">+      var file = savePhoto(photoURI);</span>
<a href="#l21.125"></a><span id="l21.125" class="difflineplus">+      if (file)</span>
<a href="#l21.126"></a><span id="l21.126" class="difflineplus">+        cardproperty.setProperty(&quot;PhotoName&quot;, file.leafName);</span>
<a href="#l21.127"></a><span id="l21.127" class="difflineplus">+    }</span>
<a href="#l21.128"></a><span id="l21.128" class="difflineplus">+    else</span>
<a href="#l21.129"></a><span id="l21.129" class="difflineplus">+      cardproperty.setProperty(&quot;PhotoType&quot;, &quot;generic&quot;);</span>
<a href="#l21.130"></a><span id="l21.130" class="difflineplus">+  }</span>
<a href="#l21.131"></a><span id="l21.131" class="difflineplus">+</span>
<a href="#l21.132"></a><span id="l21.132">   return true;</span>
<a href="#l21.133"></a><span id="l21.133"> }</span>
<a href="#l21.134"></a><span id="l21.134"> </span>
<a href="#l21.135"></a><span id="l21.135"> function CleanUpWebPage(webPage)</span>
<a href="#l21.136"></a><span id="l21.136"> {</span>
<a href="#l21.137"></a><span id="l21.137">   // no :// yet so we should add something</span>
<a href="#l21.138"></a><span id="l21.138">   if ( webPage.length &amp;&amp; webPage.search(&quot;://&quot;) == -1 )</span>
<a href="#l21.139"></a><span id="l21.139">   {</span>
<a href="#l21.140"></a><span id="l21.140" class="difflineat">@@ -819,8 +888,92 @@ function modifyDatepicker(aDatepicker) {</span>
<a href="#l21.141"></a><span id="l21.141">       this.dateField.value = null;</span>
<a href="#l21.142"></a><span id="l21.142">       this.monthField.value = null;</span>
<a href="#l21.143"></a><span id="l21.143">     }</span>
<a href="#l21.144"></a><span id="l21.144">     // make the field's value null if aValue is null and the field's value isn't</span>
<a href="#l21.145"></a><span id="l21.145">     if (aValue == null &amp;&amp; aField.value != null)</span>
<a href="#l21.146"></a><span id="l21.146">       aField.value = null;</span>
<a href="#l21.147"></a><span id="l21.147">   }</span>
<a href="#l21.148"></a><span id="l21.148"> }</span>
<a href="#l21.149"></a><span id="l21.149" class="difflineplus">+</span>
<a href="#l21.150"></a><span id="l21.150" class="difflineplus">+/**</span>
<a href="#l21.151"></a><span id="l21.151" class="difflineplus">+ * Updates the photo by setting the src attribute of the photo element.</span>
<a href="#l21.152"></a><span id="l21.152" class="difflineplus">+ *</span>
<a href="#l21.153"></a><span id="l21.153" class="difflineplus">+ * @param aType Optional. The type of photo (web, file, or generic).</span>
<a href="#l21.154"></a><span id="l21.154" class="difflineplus">+ *              If supplied the corresponding radio button will be selected.</span>
<a href="#l21.155"></a><span id="l21.155" class="difflineplus">+ *              If not supplied the type will be determined by the currently</span>
<a href="#l21.156"></a><span id="l21.156" class="difflineplus">+ *              selected type.</span>
<a href="#l21.157"></a><span id="l21.157" class="difflineplus">+ */</span>
<a href="#l21.158"></a><span id="l21.158" class="difflineplus">+function updatePhoto(aType) {</span>
<a href="#l21.159"></a><span id="l21.159" class="difflineplus">+  if (aType) {</span>
<a href="#l21.160"></a><span id="l21.160" class="difflineplus">+    // Select the type's radio button</span>
<a href="#l21.161"></a><span id="l21.161" class="difflineplus">+    document.getElementById(&quot;PhotoType&quot;).selectedItem =</span>
<a href="#l21.162"></a><span id="l21.162" class="difflineplus">+      document.getElementById(aType);</span>
<a href="#l21.163"></a><span id="l21.163" class="difflineplus">+  }</span>
<a href="#l21.164"></a><span id="l21.164" class="difflineplus">+  else</span>
<a href="#l21.165"></a><span id="l21.165" class="difflineplus">+    aType = document.getElementById(&quot;PhotoType&quot;).selectedItem.id;</span>
<a href="#l21.166"></a><span id="l21.166" class="difflineplus">+</span>
<a href="#l21.167"></a><span id="l21.167" class="difflineplus">+  var value;</span>
<a href="#l21.168"></a><span id="l21.168" class="difflineplus">+  if (aType == &quot;file&quot;) {</span>
<a href="#l21.169"></a><span id="l21.169" class="difflineplus">+    var file = document.getElementById(&quot;PhotoFile&quot;).file;</span>
<a href="#l21.170"></a><span id="l21.170" class="difflineplus">+    value = file ? &quot;file://&quot; + file.path : &quot;&quot;;</span>
<a href="#l21.171"></a><span id="l21.171" class="difflineplus">+  }</span>
<a href="#l21.172"></a><span id="l21.172" class="difflineplus">+  else if (aType == &quot;web&quot;)</span>
<a href="#l21.173"></a><span id="l21.173" class="difflineplus">+    value = document.getElementById(&quot;PhotoURI&quot;).value;</span>
<a href="#l21.174"></a><span id="l21.174" class="difflineplus">+  else</span>
<a href="#l21.175"></a><span id="l21.175" class="difflineplus">+    value = document.getElementById(&quot;GenericPhotoList&quot;).value;</span>
<a href="#l21.176"></a><span id="l21.176" class="difflineplus">+  document.getElementById(&quot;photo&quot;).setAttribute(&quot;src&quot;, value ? value</span>
<a href="#l21.177"></a><span id="l21.177" class="difflineplus">+                                                             : defaultPhotoURI);</span>
<a href="#l21.178"></a><span id="l21.178" class="difflineplus">+}</span>
<a href="#l21.179"></a><span id="l21.179" class="difflineplus">+</span>
<a href="#l21.180"></a><span id="l21.180" class="difflineplus">+/**</span>
<a href="#l21.181"></a><span id="l21.181" class="difflineplus">+ * Removes the photo file at the given path, if present.</span>
<a href="#l21.182"></a><span id="l21.182" class="difflineplus">+ *</span>
<a href="#l21.183"></a><span id="l21.183" class="difflineplus">+ * @param aName The name of the photo to remove from the Photos directory.</span>
<a href="#l21.184"></a><span id="l21.184" class="difflineplus">+ *</span>
<a href="#l21.185"></a><span id="l21.185" class="difflineplus">+ * @return true if the file was deleted.</span>
<a href="#l21.186"></a><span id="l21.186" class="difflineplus">+ */</span>
<a href="#l21.187"></a><span id="l21.187" class="difflineplus">+function removePhoto(aName) {</span>
<a href="#l21.188"></a><span id="l21.188" class="difflineplus">+  if (!aName)</span>
<a href="#l21.189"></a><span id="l21.189" class="difflineplus">+    return false;</span>
<a href="#l21.190"></a><span id="l21.190" class="difflineplus">+  // Get the directory with all the photos</span>
<a href="#l21.191"></a><span id="l21.191" class="difflineplus">+  var file = getPhotosDir();</span>
<a href="#l21.192"></a><span id="l21.192" class="difflineplus">+  // Get the photo (throws an exception for invalid names)</span>
<a href="#l21.193"></a><span id="l21.193" class="difflineplus">+  try {</span>
<a href="#l21.194"></a><span id="l21.194" class="difflineplus">+    file.append(aName);</span>
<a href="#l21.195"></a><span id="l21.195" class="difflineplus">+  }</span>
<a href="#l21.196"></a><span id="l21.196" class="difflineplus">+  catch (e) {</span>
<a href="#l21.197"></a><span id="l21.197" class="difflineplus">+    return false;</span>
<a href="#l21.198"></a><span id="l21.198" class="difflineplus">+  }</span>
<a href="#l21.199"></a><span id="l21.199" class="difflineplus">+  if (file.exists()) {</span>
<a href="#l21.200"></a><span id="l21.200" class="difflineplus">+    try {</span>
<a href="#l21.201"></a><span id="l21.201" class="difflineplus">+      file.remove(false);</span>
<a href="#l21.202"></a><span id="l21.202" class="difflineplus">+      return true;</span>
<a href="#l21.203"></a><span id="l21.203" class="difflineplus">+    }</span>
<a href="#l21.204"></a><span id="l21.204" class="difflineplus">+    catch (e) {}</span>
<a href="#l21.205"></a><span id="l21.205" class="difflineplus">+  }</span>
<a href="#l21.206"></a><span id="l21.206" class="difflineplus">+  return false;</span>
<a href="#l21.207"></a><span id="l21.207" class="difflineplus">+}</span>
<a href="#l21.208"></a><span id="l21.208" class="difflineplus">+</span>
<a href="#l21.209"></a><span id="l21.209" class="difflineplus">+/**</span>
<a href="#l21.210"></a><span id="l21.210" class="difflineplus">+ * Opens a file picker with image filters to look for a contact photo.</span>
<a href="#l21.211"></a><span id="l21.211" class="difflineplus">+ * If the user selects a file and clicks OK then the PhotoURI textbox is set</span>
<a href="#l21.212"></a><span id="l21.212" class="difflineplus">+ * with a file URI pointing to that file and updatePhoto is called.</span>
<a href="#l21.213"></a><span id="l21.213" class="difflineplus">+ *</span>
<a href="#l21.214"></a><span id="l21.214" class="difflineplus">+ * @return true if the OK button was clicked and a photo was chosen</span>
<a href="#l21.215"></a><span id="l21.215" class="difflineplus">+ */</span>
<a href="#l21.216"></a><span id="l21.216" class="difflineplus">+function browsePhoto() {</span>
<a href="#l21.217"></a><span id="l21.217" class="difflineplus">+  var nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l21.218"></a><span id="l21.218" class="difflineplus">+  var fp = Components.classes[&quot;@mozilla.org/filepicker;1&quot;]</span>
<a href="#l21.219"></a><span id="l21.219" class="difflineplus">+	                   .createInstance(nsIFilePicker);</span>
<a href="#l21.220"></a><span id="l21.220" class="difflineplus">+  fp.init(window, gAddressBookBundle.getString(&quot;browsePhoto&quot;), nsIFilePicker.modeOpen);</span>
<a href="#l21.221"></a><span id="l21.221" class="difflineplus">+  </span>
<a href="#l21.222"></a><span id="l21.222" class="difflineplus">+  // Add All Files &amp; Image Files filters and select the latter</span>
<a href="#l21.223"></a><span id="l21.223" class="difflineplus">+  fp.appendFilters(nsIFilePicker.filterAll | nsIFilePicker.filterImages);</span>
<a href="#l21.224"></a><span id="l21.224" class="difflineplus">+  fp.filterIndex = 1;</span>
<a href="#l21.225"></a><span id="l21.225" class="difflineplus">+</span>
<a href="#l21.226"></a><span id="l21.226" class="difflineplus">+  if (fp.show() == nsIFilePicker.returnOK) {</span>
<a href="#l21.227"></a><span id="l21.227" class="difflineplus">+    document.getElementById(&quot;PhotoFile&quot;).file = fp.file;</span>
<a href="#l21.228"></a><span id="l21.228" class="difflineplus">+    updatePhoto(&quot;file&quot;);</span>
<a href="#l21.229"></a><span id="l21.229" class="difflineplus">+    return true;</span>
<a href="#l21.230"></a><span id="l21.230" class="difflineplus">+  }</span>
<a href="#l21.231"></a><span id="l21.231" class="difflineplus">+  return false;</span>
<a href="#l21.232"></a><span id="l21.232" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/suite/mailnews/addrbook/abCardViewOverlay.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/suite/mailnews/addrbook/abCardViewOverlay.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -161,16 +161,18 @@ function OnLoadCardView()</span>
<a href="#l22.4"></a><span id="l22.4"> 	cvData.cvWorkAddress	= doc.getElementById(&quot;cvWorkAddress&quot;);</span>
<a href="#l22.5"></a><span id="l22.5"> 	cvData.cvWorkAddress2	= doc.getElementById(&quot;cvWorkAddress2&quot;);</span>
<a href="#l22.6"></a><span id="l22.6"> 	cvData.cvWorkCityStZip	= doc.getElementById(&quot;cvWorkCityStZip&quot;);</span>
<a href="#l22.7"></a><span id="l22.7"> 	cvData.cvWorkCountry	= doc.getElementById(&quot;cvWorkCountry&quot;);</span>
<a href="#l22.8"></a><span id="l22.8">   cvData.cvbWorkMapItBox  = doc.getElementById(&quot;cvbWorkMapItBox&quot;);</span>
<a href="#l22.9"></a><span id="l22.9">   cvData.cvWorkMapIt = doc.getElementById(&quot;cvWorkMapIt&quot;);</span>
<a href="#l22.10"></a><span id="l22.10"> 	cvData.cvWorkWebPageBox = doc.getElementById(&quot;cvWorkWebPageBox&quot;);</span>
<a href="#l22.11"></a><span id="l22.11"> 	cvData.cvWorkWebPage	= doc.getElementById(&quot;cvWorkWebPage&quot;);</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineplus">+  cvData.cvbPhoto = doc.getElementById(&quot;cvbPhoto&quot;);</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+  cvData.cvPhoto  = doc.getElementById(&quot;cvPhoto&quot;);</span>
<a href="#l22.14"></a><span id="l22.14"> }</span>
<a href="#l22.15"></a><span id="l22.15"> 	</span>
<a href="#l22.16"></a><span id="l22.16"> // XXX todo</span>
<a href="#l22.17"></a><span id="l22.17"> // some similar code (in spirit) already exists, see OnLoadEditList()</span>
<a href="#l22.18"></a><span id="l22.18"> // perhaps we could combine and put in abCommon.js?</span>
<a href="#l22.19"></a><span id="l22.19"> function GetAddressesFromURI(uri)</span>
<a href="#l22.20"></a><span id="l22.20"> {</span>
<a href="#l22.21"></a><span id="l22.21">   var addresses = &quot;&quot;;</span>
<a href="#l22.22"></a><span id="l22.22" class="difflineat">@@ -203,16 +205,20 @@ function DisplayCardViewPane(realCard)</span>
<a href="#l22.23"></a><span id="l22.23">   var card = { getProperty : function (prop) {</span>
<a href="#l22.24"></a><span id="l22.24">                  return realCard.getProperty(prop, &quot;&quot;);</span>
<a href="#l22.25"></a><span id="l22.25">                },</span>
<a href="#l22.26"></a><span id="l22.26">                primaryEmail : realCard.primaryEmail,</span>
<a href="#l22.27"></a><span id="l22.27">                displayName : realCard.displayName,</span>
<a href="#l22.28"></a><span id="l22.28">                isMailList : realCard.isMailList,</span>
<a href="#l22.29"></a><span id="l22.29">                mailListURI : realCard.mailListURI</span>
<a href="#l22.30"></a><span id="l22.30">   };</span>
<a href="#l22.31"></a><span id="l22.31" class="difflineplus">+</span>
<a href="#l22.32"></a><span id="l22.32" class="difflineplus">+  // Contact photo</span>
<a href="#l22.33"></a><span id="l22.33" class="difflineplus">+  cvData.cvPhoto.setAttribute(&quot;src&quot;, getPhotoURI(card.getProperty(&quot;PhotoName&quot;)));</span>
<a href="#l22.34"></a><span id="l22.34" class="difflineplus">+</span>
<a href="#l22.35"></a><span id="l22.35">   var titleString;</span>
<a href="#l22.36"></a><span id="l22.36">   if (generatedName == &quot;&quot;)</span>
<a href="#l22.37"></a><span id="l22.37">     titleString = card.primaryEmail;  // if no generatedName, use email</span>
<a href="#l22.38"></a><span id="l22.38">   else</span>
<a href="#l22.39"></a><span id="l22.39">     titleString = generatedName;</span>
<a href="#l22.40"></a><span id="l22.40"> </span>
<a href="#l22.41"></a><span id="l22.41">   // set fields in card view pane</span>
<a href="#l22.42"></a><span id="l22.42">   if (card.isMailList)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/suite/mailnews/addrbook/abCommon.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/suite/mailnews/addrbook/abCommon.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -50,16 +50,18 @@ var gPrefs = Components.classes[&quot;@mozill</span>
<a href="#l23.4"></a><span id="l23.4"> var gHeaderParser = Components.classes[&quot;@mozilla.org/messenger/headerparser;1&quot;].getService(Components.interfaces.nsIMsgHeaderParser);</span>
<a href="#l23.5"></a><span id="l23.5"> </span>
<a href="#l23.6"></a><span id="l23.6"> const kDefaultSortColumn = &quot;GeneratedName&quot;;</span>
<a href="#l23.7"></a><span id="l23.7"> const kDefaultAscending = &quot;ascending&quot;;</span>
<a href="#l23.8"></a><span id="l23.8"> const kDefaultDescending = &quot;descending&quot;;</span>
<a href="#l23.9"></a><span id="l23.9"> const kLdapUrlPrefix = &quot;moz-abldapdirectory://&quot;;</span>
<a href="#l23.10"></a><span id="l23.10"> const kPersonalAddressbookURI = &quot;moz-abmdbdirectory://abook.mab&quot;;</span>
<a href="#l23.11"></a><span id="l23.11"> const kCollectedAddressbookURI = &quot;moz-abmdbdirectory://history.mab&quot;;</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineplus">+// The default image for contacts</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+var defaultPhotoURI = &quot;chrome://messenger/skin/addressbook/icons/contact-generic.png&quot;;</span>
<a href="#l23.14"></a><span id="l23.14"> </span>
<a href="#l23.15"></a><span id="l23.15"> // Controller object for Dir Pane</span>
<a href="#l23.16"></a><span id="l23.16"> var DirPaneController =</span>
<a href="#l23.17"></a><span id="l23.17"> {</span>
<a href="#l23.18"></a><span id="l23.18">   supportsCommand: function(command)</span>
<a href="#l23.19"></a><span id="l23.19">   {</span>
<a href="#l23.20"></a><span id="l23.20">     switch (command) {</span>
<a href="#l23.21"></a><span id="l23.21">       case &quot;cmd_selectAll&quot;:</span>
<a href="#l23.22"></a><span id="l23.22" class="difflineat">@@ -624,8 +626,171 @@ function GetSelectedDirectory()</span>
<a href="#l23.23"></a><span id="l23.23">     return abList.value;</span>
<a href="#l23.24"></a><span id="l23.24">   else {</span>
<a href="#l23.25"></a><span id="l23.25">     if (dirTree.currentIndex &lt; 0)</span>
<a href="#l23.26"></a><span id="l23.26">       return null;</span>
<a href="#l23.27"></a><span id="l23.27">     var selected = dirTree.builderView.getResourceAtIndex(dirTree.currentIndex)</span>
<a href="#l23.28"></a><span id="l23.28">     return selected.Value;</span>
<a href="#l23.29"></a><span id="l23.29">   }</span>
<a href="#l23.30"></a><span id="l23.30"> }</span>
<a href="#l23.31"></a><span id="l23.31" class="difflineplus">+</span>
<a href="#l23.32"></a><span id="l23.32" class="difflineplus">+/**</span>
<a href="#l23.33"></a><span id="l23.33" class="difflineplus">+ * Returns an nsIFile of the directory in which contact photos are stored.</span>
<a href="#l23.34"></a><span id="l23.34" class="difflineplus">+ * This will create the directory if it does not yet exist.</span>
<a href="#l23.35"></a><span id="l23.35" class="difflineplus">+ */</span>
<a href="#l23.36"></a><span id="l23.36" class="difflineplus">+function getPhotosDir() {</span>
<a href="#l23.37"></a><span id="l23.37" class="difflineplus">+  var file = Components.classes[&quot;@mozilla.org/file/directory_service;1&quot;]</span>
<a href="#l23.38"></a><span id="l23.38" class="difflineplus">+                       .getService(Components.interfaces.nsIProperties)</span>
<a href="#l23.39"></a><span id="l23.39" class="difflineplus">+                       .get(&quot;ProfD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l23.40"></a><span id="l23.40" class="difflineplus">+  // Get the Photos directory</span>
<a href="#l23.41"></a><span id="l23.41" class="difflineplus">+  file.append(&quot;Photos&quot;);</span>
<a href="#l23.42"></a><span id="l23.42" class="difflineplus">+  if (!file.exists() || !file.isDirectory())</span>
<a href="#l23.43"></a><span id="l23.43" class="difflineplus">+    file.create(Components.interfaces.nsIFile.DIRECTORY_TYPE, 0777);</span>
<a href="#l23.44"></a><span id="l23.44" class="difflineplus">+  return file;</span>
<a href="#l23.45"></a><span id="l23.45" class="difflineplus">+}</span>
<a href="#l23.46"></a><span id="l23.46" class="difflineplus">+</span>
<a href="#l23.47"></a><span id="l23.47" class="difflineplus">+/**</span>
<a href="#l23.48"></a><span id="l23.48" class="difflineplus">+ * Returns a URI specifying the location of a photo based on its name.</span>
<a href="#l23.49"></a><span id="l23.49" class="difflineplus">+ * If the name is blank, or if the photo with that name is not in the Photos</span>
<a href="#l23.50"></a><span id="l23.50" class="difflineplus">+ * directory then the default photo URI is returned.</span>
<a href="#l23.51"></a><span id="l23.51" class="difflineplus">+ *</span>
<a href="#l23.52"></a><span id="l23.52" class="difflineplus">+ * @param aPhotoName The name of the photo from the Photos folder, if any.</span>
<a href="#l23.53"></a><span id="l23.53" class="difflineplus">+ *</span>
<a href="#l23.54"></a><span id="l23.54" class="difflineplus">+ * @return A URI pointing to a photo.</span>
<a href="#l23.55"></a><span id="l23.55" class="difflineplus">+ */</span>
<a href="#l23.56"></a><span id="l23.56" class="difflineplus">+function getPhotoURI(aPhotoName) {</span>
<a href="#l23.57"></a><span id="l23.57" class="difflineplus">+  if (!aPhotoName)</span>
<a href="#l23.58"></a><span id="l23.58" class="difflineplus">+    return defaultPhotoURI;</span>
<a href="#l23.59"></a><span id="l23.59" class="difflineplus">+  var file = getPhotosDir();</span>
<a href="#l23.60"></a><span id="l23.60" class="difflineplus">+  try {</span>
<a href="#l23.61"></a><span id="l23.61" class="difflineplus">+    file.append(aPhotoName);</span>
<a href="#l23.62"></a><span id="l23.62" class="difflineplus">+  }</span>
<a href="#l23.63"></a><span id="l23.63" class="difflineplus">+  catch (e) {</span>
<a href="#l23.64"></a><span id="l23.64" class="difflineplus">+    return defaultPhotoURI;</span>
<a href="#l23.65"></a><span id="l23.65" class="difflineplus">+  }</span>
<a href="#l23.66"></a><span id="l23.66" class="difflineplus">+  if (!file.exists())</span>
<a href="#l23.67"></a><span id="l23.67" class="difflineplus">+    return defaultPhotoURI;</span>
<a href="#l23.68"></a><span id="l23.68" class="difflineplus">+  return Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l23.69"></a><span id="l23.69" class="difflineplus">+                   .getService(Components.interfaces.nsIIOService)</span>
<a href="#l23.70"></a><span id="l23.70" class="difflineplus">+                   .newFileURI(file).spec;</span>
<a href="#l23.71"></a><span id="l23.71" class="difflineplus">+}</span>
<a href="#l23.72"></a><span id="l23.72" class="difflineplus">+</span>
<a href="#l23.73"></a><span id="l23.73" class="difflineplus">+/**</span>
<a href="#l23.74"></a><span id="l23.74" class="difflineplus">+ * Saves the given input stream to a file.</span>
<a href="#l23.75"></a><span id="l23.75" class="difflineplus">+ *</span>
<a href="#l23.76"></a><span id="l23.76" class="difflineplus">+ * @param aIStream The input stream to save.</span>
<a href="#l23.77"></a><span id="l23.77" class="difflineplus">+ * @param aFile    The file to which the stream is saved.</span>
<a href="#l23.78"></a><span id="l23.78" class="difflineplus">+ */</span>
<a href="#l23.79"></a><span id="l23.79" class="difflineplus">+function saveStreamToFile(aIStream, aFile) {</span>
<a href="#l23.80"></a><span id="l23.80" class="difflineplus">+  if (!(aIStream instanceof Components.interfaces.nsIInputStream))</span>
<a href="#l23.81"></a><span id="l23.81" class="difflineplus">+    throw &quot;Invalid stream passed to saveStreamToFile&quot;;</span>
<a href="#l23.82"></a><span id="l23.82" class="difflineplus">+  if (!(aFile instanceof Components.interfaces.nsIFile))</span>
<a href="#l23.83"></a><span id="l23.83" class="difflineplus">+    throw &quot;Invalid file passed to saveStreamToFile&quot;;</span>
<a href="#l23.84"></a><span id="l23.84" class="difflineplus">+  // Write the input stream to the file</span>
<a href="#l23.85"></a><span id="l23.85" class="difflineplus">+  var fstream = Components.classes[&quot;@mozilla.org/network/safe-file-output-stream;1&quot;]</span>
<a href="#l23.86"></a><span id="l23.86" class="difflineplus">+                          .createInstance(Components.interfaces.nsIFileOutputStream);</span>
<a href="#l23.87"></a><span id="l23.87" class="difflineplus">+  var buffer  = Components.classes[&quot;@mozilla.org/network/buffered-output-stream;1&quot;]</span>
<a href="#l23.88"></a><span id="l23.88" class="difflineplus">+                          .createInstance(Components.interfaces.nsIBufferedOutputStream);</span>
<a href="#l23.89"></a><span id="l23.89" class="difflineplus">+  fstream.init(aFile, 0x04 | 0x08 | 0x20, 0600, 0); // write, create, truncate</span>
<a href="#l23.90"></a><span id="l23.90" class="difflineplus">+  buffer.init(fstream, 8192);</span>
<a href="#l23.91"></a><span id="l23.91" class="difflineplus">+</span>
<a href="#l23.92"></a><span id="l23.92" class="difflineplus">+  buffer.writeFrom(aIStream, aIStream.available());</span>
<a href="#l23.93"></a><span id="l23.93" class="difflineplus">+</span>
<a href="#l23.94"></a><span id="l23.94" class="difflineplus">+  // Close the output streams</span>
<a href="#l23.95"></a><span id="l23.95" class="difflineplus">+  if (buffer instanceof Components.interfaces.nsISafeOutputStream)</span>
<a href="#l23.96"></a><span id="l23.96" class="difflineplus">+      buffer.finish();</span>
<a href="#l23.97"></a><span id="l23.97" class="difflineplus">+  else</span>
<a href="#l23.98"></a><span id="l23.98" class="difflineplus">+      buffer.close();</span>
<a href="#l23.99"></a><span id="l23.99" class="difflineplus">+  if (fstream instanceof Components.interfaces.nsISafeOutputStream)</span>
<a href="#l23.100"></a><span id="l23.100" class="difflineplus">+      fstream.finish();</span>
<a href="#l23.101"></a><span id="l23.101" class="difflineplus">+  else</span>
<a href="#l23.102"></a><span id="l23.102" class="difflineplus">+      fstream.close();</span>
<a href="#l23.103"></a><span id="l23.103" class="difflineplus">+  // Close the input stream</span>
<a href="#l23.104"></a><span id="l23.104" class="difflineplus">+  aIStream.close();</span>
<a href="#l23.105"></a><span id="l23.105" class="difflineplus">+  return aFile;</span>
<a href="#l23.106"></a><span id="l23.106" class="difflineplus">+}</span>
<a href="#l23.107"></a><span id="l23.107" class="difflineplus">+</span>
<a href="#l23.108"></a><span id="l23.108" class="difflineplus">+/**</span>
<a href="#l23.109"></a><span id="l23.109" class="difflineplus">+ * Copies the photo at the given URI in a folder named &quot;Photos&quot; in the current</span>
<a href="#l23.110"></a><span id="l23.110" class="difflineplus">+ * profile folder.</span>
<a href="#l23.111"></a><span id="l23.111" class="difflineplus">+ * The filename is randomly generated and is unique.</span>
<a href="#l23.112"></a><span id="l23.112" class="difflineplus">+ * The URI is used to obtain a channel which is then opened synchronously and</span>
<a href="#l23.113"></a><span id="l23.113" class="difflineplus">+ * this stream is written to the new file to store an offline, local copy of the</span>
<a href="#l23.114"></a><span id="l23.114" class="difflineplus">+ * photo.</span>
<a href="#l23.115"></a><span id="l23.115" class="difflineplus">+ *</span>
<a href="#l23.116"></a><span id="l23.116" class="difflineplus">+ * @param aUri The URI of the photo.</span>
<a href="#l23.117"></a><span id="l23.117" class="difflineplus">+ *</span>
<a href="#l23.118"></a><span id="l23.118" class="difflineplus">+ * @return An nsIFile representation of the photo.</span>
<a href="#l23.119"></a><span id="l23.119" class="difflineplus">+ */</span>
<a href="#l23.120"></a><span id="l23.120" class="difflineplus">+function savePhoto(aUri) {</span>
<a href="#l23.121"></a><span id="l23.121" class="difflineplus">+  if (!aUri)</span>
<a href="#l23.122"></a><span id="l23.122" class="difflineplus">+    return false;</span>
<a href="#l23.123"></a><span id="l23.123" class="difflineplus">+</span>
<a href="#l23.124"></a><span id="l23.124" class="difflineplus">+  // Get the photos directory and check that it exists</span>
<a href="#l23.125"></a><span id="l23.125" class="difflineplus">+  var file = getPhotosDir();</span>
<a href="#l23.126"></a><span id="l23.126" class="difflineplus">+</span>
<a href="#l23.127"></a><span id="l23.127" class="difflineplus">+  // Create a channel from the URI and open it as an input stream</span>
<a href="#l23.128"></a><span id="l23.128" class="difflineplus">+  var ios = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l23.129"></a><span id="l23.129" class="difflineplus">+                      .getService(Components.interfaces.nsIIOService);</span>
<a href="#l23.130"></a><span id="l23.130" class="difflineplus">+  var channel = ios.newChannelFromURI(ios.newURI(aUri, null, null));</span>
<a href="#l23.131"></a><span id="l23.131" class="difflineplus">+  var istream = channel.open();</span>
<a href="#l23.132"></a><span id="l23.132" class="difflineplus">+</span>
<a href="#l23.133"></a><span id="l23.133" class="difflineplus">+  // Get the photo file</span>
<a href="#l23.134"></a><span id="l23.134" class="difflineplus">+  file.append(makePhotoFilename(file.path, findPhotoExt(aUri, channel)));</span>
<a href="#l23.135"></a><span id="l23.135" class="difflineplus">+</span>
<a href="#l23.136"></a><span id="l23.136" class="difflineplus">+  return saveStreamToFile(istream, file);</span>
<a href="#l23.137"></a><span id="l23.137" class="difflineplus">+}</span>
<a href="#l23.138"></a><span id="l23.138" class="difflineplus">+</span>
<a href="#l23.139"></a><span id="l23.139" class="difflineplus">+/**</span>
<a href="#l23.140"></a><span id="l23.140" class="difflineplus">+ * Finds the file extension of the photo identified by the URI, if possible.</span>
<a href="#l23.141"></a><span id="l23.141" class="difflineplus">+ * This function can be overridden (with a copy of the original) for URIs that</span>
<a href="#l23.142"></a><span id="l23.142" class="difflineplus">+ * do not identify the extension or when the Content-Type response header is</span>
<a href="#l23.143"></a><span id="l23.143" class="difflineplus">+ * either not set or isn't 'image/png', 'image/jpeg', or 'image/gif'.</span>
<a href="#l23.144"></a><span id="l23.144" class="difflineplus">+ * The original function can be called if the URI does not match.</span>
<a href="#l23.145"></a><span id="l23.145" class="difflineplus">+ *</span>
<a href="#l23.146"></a><span id="l23.146" class="difflineplus">+ * @param aUri The URI of the photo.</span>
<a href="#l23.147"></a><span id="l23.147" class="difflineplus">+ * @param aChannel The opened channel for the URI.</span>
<a href="#l23.148"></a><span id="l23.148" class="difflineplus">+ *</span>
<a href="#l23.149"></a><span id="l23.149" class="difflineplus">+ * @return The extension of the file, if any, including the period.</span>
<a href="#l23.150"></a><span id="l23.150" class="difflineplus">+ */</span>
<a href="#l23.151"></a><span id="l23.151" class="difflineplus">+function findPhotoExt(aUri, aChannel) {</span>
<a href="#l23.152"></a><span id="l23.152" class="difflineplus">+  if (aChannel) {</span>
<a href="#l23.153"></a><span id="l23.153" class="difflineplus">+    try {</span>
<a href="#l23.154"></a><span id="l23.154" class="difflineplus">+      aChannel.QueryInterface(Components.interfaces.nsIHttpChannel);</span>
<a href="#l23.155"></a><span id="l23.155" class="difflineplus">+      var header = aChannel.getResponseHeader(&quot;Content-Type&quot;);</span>
<a href="#l23.156"></a><span id="l23.156" class="difflineplus">+      var type   = header ? header.split(&quot;;&quot;)[0] : &quot;&quot;;</span>
<a href="#l23.157"></a><span id="l23.157" class="difflineplus">+      switch (type.toLowerCase()) {</span>
<a href="#l23.158"></a><span id="l23.158" class="difflineplus">+        case &quot;image/png&quot;:</span>
<a href="#l23.159"></a><span id="l23.159" class="difflineplus">+          return &quot;.png&quot;;</span>
<a href="#l23.160"></a><span id="l23.160" class="difflineplus">+        case &quot;image/jpeg&quot;:</span>
<a href="#l23.161"></a><span id="l23.161" class="difflineplus">+          return &quot;.jpg&quot;;</span>
<a href="#l23.162"></a><span id="l23.162" class="difflineplus">+        case &quot;image/gif&quot;:</span>
<a href="#l23.163"></a><span id="l23.163" class="difflineplus">+          return &quot;.gif&quot;;</span>
<a href="#l23.164"></a><span id="l23.164" class="difflineplus">+      }</span>
<a href="#l23.165"></a><span id="l23.165" class="difflineplus">+    } catch (e) {}</span>
<a href="#l23.166"></a><span id="l23.166" class="difflineplus">+  }</span>
<a href="#l23.167"></a><span id="l23.167" class="difflineplus">+</span>
<a href="#l23.168"></a><span id="l23.168" class="difflineplus">+  var index = aUri ? aUri.lastIndexOf(&quot;.&quot;) : -1;</span>
<a href="#l23.169"></a><span id="l23.169" class="difflineplus">+  if (index == -1)</span>
<a href="#l23.170"></a><span id="l23.170" class="difflineplus">+    return &quot;&quot;;</span>
<a href="#l23.171"></a><span id="l23.171" class="difflineplus">+   return aUri.substring(index);</span>
<a href="#l23.172"></a><span id="l23.172" class="difflineplus">+}</span>
<a href="#l23.173"></a><span id="l23.173" class="difflineplus">+</span>
<a href="#l23.174"></a><span id="l23.174" class="difflineplus">+/**</span>
<a href="#l23.175"></a><span id="l23.175" class="difflineplus">+ * Generates a unique filename to be used for a local copy of a contact's photo.</span>
<a href="#l23.176"></a><span id="l23.176" class="difflineplus">+ *</span>
<a href="#l23.177"></a><span id="l23.177" class="difflineplus">+ * @param aPath      The path to the folder in which the photo will be saved.</span>
<a href="#l23.178"></a><span id="l23.178" class="difflineplus">+ * @param aExtension The file extension of the photo.</span>
<a href="#l23.179"></a><span id="l23.179" class="difflineplus">+ *</span>
<a href="#l23.180"></a><span id="l23.180" class="difflineplus">+ * @return A unique filename in the given path.</span>
<a href="#l23.181"></a><span id="l23.181" class="difflineplus">+ */</span>
<a href="#l23.182"></a><span id="l23.182" class="difflineplus">+function makePhotoFilename(aPath, aExtension) {</span>
<a href="#l23.183"></a><span id="l23.183" class="difflineplus">+  var filename, newFile;</span>
<a href="#l23.184"></a><span id="l23.184" class="difflineplus">+  // Find a random filename for the photo that doesn't exist yet</span>
<a href="#l23.185"></a><span id="l23.185" class="difflineplus">+  do {</span>
<a href="#l23.186"></a><span id="l23.186" class="difflineplus">+    filename = new String(Math.random()).replace(&quot;0.&quot;, &quot;&quot;) + aExtension;</span>
<a href="#l23.187"></a><span id="l23.187" class="difflineplus">+    newFile = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l23.188"></a><span id="l23.188" class="difflineplus">+                        .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l23.189"></a><span id="l23.189" class="difflineplus">+    newFile.initWithPath(aPath);</span>
<a href="#l23.190"></a><span id="l23.190" class="difflineplus">+    newFile.append(filename);</span>
<a href="#l23.191"></a><span id="l23.191" class="difflineplus">+  } while (newFile.exists());</span>
<a href="#l23.192"></a><span id="l23.192" class="difflineplus">+  return filename;</span>
<a href="#l23.193"></a><span id="l23.193" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/suite/themes/classic/jar.mn</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/suite/themes/classic/jar.mn</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -317,16 +317,18 @@ classic.jar:</span>
<a href="#l24.4"></a><span id="l24.4">   skin/classic/messenger/addressbook/selectAddressesDialog.css          (messenger/addressbook/selectAddressesDialog.css)</span>
<a href="#l24.5"></a><span id="l24.5">   skin/classic/messenger/addressbook/sidebarPanel.css                   (messenger/addressbook/sidebarPanel.css)</span>
<a href="#l24.6"></a><span id="l24.6">   skin/classic/messenger/addressbook/icons/addrbook.gif                 (messenger/addressbook/icons/addrbook.gif)</span>
<a href="#l24.7"></a><span id="l24.7">   skin/classic/messenger/addressbook/icons/ablist.gif                   (messenger/addressbook/icons/ablist.gif)</span>
<a href="#l24.8"></a><span id="l24.8">   skin/classic/messenger/addressbook/icons/remote-addrbook.gif          (messenger/addressbook/icons/remote-addrbook.gif)</span>
<a href="#l24.9"></a><span id="l24.9">   skin/classic/messenger/addressbook/icons/secure-remote-addrbook.gif   (messenger/addressbook/icons/secure-remote-addrbook.gif)</span>
<a href="#l24.10"></a><span id="l24.10">   skin/classic/messenger/addressbook/icons/remote-addrbook-error.gif    (messenger/addressbook/icons/remote-addrbook-error.gif)</span>
<a href="#l24.11"></a><span id="l24.11">   skin/classic/messenger/addressbook/icons/abcard.gif                   (messenger/addressbook/icons/abcard.gif)</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineplus">+  skin/classic/messenger/addressbook/icons/contact-generic.png          (messenger/addressbook/icons/contact-generic.png)</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+  skin/classic/messenger/addressbook/icons/contact-generic-tiny.png     (messenger/addressbook/icons/contact-generic-tiny.png)</span>
<a href="#l24.14"></a><span id="l24.14">   skin/classic/messenger/smime/msgReadSecurityInfo.css                  (messenger/smime/msgReadSecurityInfo.css)</span>
<a href="#l24.15"></a><span id="l24.15">   skin/classic/messenger/smime/msgCompSecurityInfo.css                  (messenger/smime/msgCompSecurityInfo.css)</span>
<a href="#l24.16"></a><span id="l24.16">   skin/classic/messenger/smime/msgReadSMIMEOverlay.css                  (messenger/smime/msgReadSMIMEOverlay.css)</span>
<a href="#l24.17"></a><span id="l24.17">   skin/classic/messenger/smime/certFetchingStatus.css                   (messenger/smime/certFetchingStatus.css)</span>
<a href="#l24.18"></a><span id="l24.18">   skin/classic/messenger/smime/msgHdrViewSMIMEOverlay.css               (messenger/smime/msgHdrViewSMIMEOverlay.css)</span>
<a href="#l24.19"></a><span id="l24.19">   skin/classic/messenger/smime/icons/sbSignOk.gif                       (messenger/smime/icons/sbSignOk.gif)</span>
<a href="#l24.20"></a><span id="l24.20">   skin/classic/messenger/smime/icons/sbSignUnknown.gif                  (messenger/smime/icons/sbSignUnknown.gif)</span>
<a href="#l24.21"></a><span id="l24.21">   skin/classic/messenger/smime/icons/sbSignNotOk.gif                    (messenger/smime/icons/sbSignNotOk.gif)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1">new file mode 100644</span>
<a href="#l25.2"></a><span id="l25.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..95e6a2e4afd27bbeea9619c13a73634f5334cfa2</span>
<a href="#l25.3"></a><span id="l25.3">GIT binary patch
literal 674
zc$@*E0$u%yP)&lt;h;3K|Lk000e1NJLTq000mG000mO1^@s6AM^iV00001b5ch_0Itp)
z=&gt;Px#24YJ`L;(K){{a7&gt;y{D4^000SaNLh0L01ejw01ejxLMWSf00007bV*G`2iXV&gt;
z0|yjrB8a#E00JUOL_t(I%Z-yyPZU8A#edy1vjZgTu(%+L1fxU_EN2rFqlWL`cknaH
z3Aig9_@hjSpj-%XcV%~H|4dbRm}OywgYVEucUQgY_qxg*9v^&gt;Ps8+YkEaw5NSdB;F
zy(e6#R=47~^r@S52z)R~P*fFgh~$_Vs*0$fs-wN|;`th(ndY5tn@00DQ5fNz2aGgL
zao*8tHYvq1mC77(Tw*ZjBch1ptSqk*g2OwHcLCl9c&lt;(toJ7atMGwpVVZnr}m$E&gt;fv
zVxwLsNfLs&lt;VP@dK7fKDY;%PTGf7sjGrP*vEk~1|m1;EM4H`3D-=iH&lt;ZV3=B=&amp;x9&lt;?
z==CyyiQp)Tn3&lt;U&amp;41!y4Zwc;9Glk2`OFEs-gGwSotJR|4@58+-Zw6|Hh@hI2=flwt
z+`&amp;1Asxlb#G3;LnU}~rc!{LynT8-J+S&lt;I|33NSOGD56@eQYw|k=l3KCq6NW|`3j4R
zi+JzH$pGbYnP)4@h{%LI4|ftog{;@3Uf*DPdU~ScmX@AUsmxDQ2MB?p%OnR^=q)D+
zK@g0Cf*_!rB!po&amp;?!*ZKGsAgDJ{)rX&lt;D8503$iR52jzKAdYWRUtgfz7E|*bN+%3T{
z&amp;pA3g;^)OL8jS|sZWrg=SgV&lt;FeSJ-&lt;)#CJfN^QBu+S*IN5sC==U%s-lvx~!xCeS@P
zeS^V(cDv2h)fET(2fTUxmM{!M-oN|6W_@!sNdE^_B}wM^3#b}6f8+L94*&amp;oF07*qo
IM6N&lt;$f~S)$R{#J2</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1">new file mode 100644</span>
<a href="#l26.2"></a><span id="l26.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..6555eceb0f3767123127a763da7883095aba3ad2</span>
<a href="#l26.3"></a><span id="l26.3">GIT binary patch
literal 5846
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/span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/suite/themes/modern/jar.mn</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/suite/themes/modern/jar.mn</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -348,16 +348,18 @@ modern.jar:</span>
<a href="#l27.4"></a><span id="l27.4">   skin/modern/messenger/addressbook/icons/list.gif                 (messenger/addressbook/icons/list.gif)</span>
<a href="#l27.5"></a><span id="l27.5">   skin/modern/messenger/addressbook/icons/mast-ab.gif              (messenger/addressbook/icons/mast-ab.gif)</span>
<a href="#l27.6"></a><span id="l27.6">   skin/modern/messenger/addressbook/icons/myaddrbk.gif             (messenger/addressbook/icons/myaddrbk.gif)</span>
<a href="#l27.7"></a><span id="l27.7">   skin/modern/messenger/addressbook/icons/person.gif               (messenger/addressbook/icons/person.gif)</span>
<a href="#l27.8"></a><span id="l27.8">   skin/modern/messenger/addressbook/icons/im.gif                   (messenger/addressbook/icons/im.gif)</span>
<a href="#l27.9"></a><span id="l27.9">   skin/modern/messenger/addressbook/icons/im-act.gif               (messenger/addressbook/icons/im-act.gif)</span>
<a href="#l27.10"></a><span id="l27.10">   skin/modern/messenger/addressbook/icons/im-hov.gif               (messenger/addressbook/icons/im-hov.gif)</span>
<a href="#l27.11"></a><span id="l27.11">   skin/modern/messenger/addressbook/icons/im-dis.gif               (messenger/addressbook/icons/im-dis.gif)</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineplus">+  skin/modern/messenger/addressbook/icons/contact-generic.png      (messenger/addressbook/icons/contact-generic.png)</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+  skin/modern/messenger/addressbook/icons/contact-generic-tiny.png (messenger/addressbook/icons/contact-generic-tiny.png)</span>
<a href="#l27.14"></a><span id="l27.14">   skin/modern/messenger/icons/acct-compose.gif                     (messenger/icons/acct-compose.gif)</span>
<a href="#l27.15"></a><span id="l27.15">   skin/modern/messenger/icons/acct-filters.gif                     (messenger/icons/acct-filters.gif)</span>
<a href="#l27.16"></a><span id="l27.16">   skin/modern/messenger/icons/acct-newaccount.gif                  (messenger/icons/acct-newaccount.gif)</span>
<a href="#l27.17"></a><span id="l27.17">   skin/modern/messenger/icons/acct-prefs.gif                       (messenger/icons/acct-prefs.gif)</span>
<a href="#l27.18"></a><span id="l27.18">   skin/modern/messenger/icons/acct-read.gif                        (messenger/icons/acct-read.gif)</span>
<a href="#l27.19"></a><span id="l27.19">   skin/modern/messenger/icons/acct-search.gif                      (messenger/icons/acct-search.gif)</span>
<a href="#l27.20"></a><span id="l27.20">   skin/modern/messenger/icons/acct-subscribe.gif                   (messenger/icons/acct-subscribe.gif)</span>
<a href="#l27.21"></a><span id="l27.21">   skin/modern/messenger/icons/attach.gif                           (messenger/icons/attach.gif)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1">new file mode 100644</span>
<a href="#l28.2"></a><span id="l28.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..95e6a2e4afd27bbeea9619c13a73634f5334cfa2</span>
<a href="#l28.3"></a><span id="l28.3">GIT binary patch
literal 674
zc$@*E0$u%yP)&lt;h;3K|Lk000e1NJLTq000mG000mO1^@s6AM^iV00001b5ch_0Itp)
z=&gt;Px#24YJ`L;(K){{a7&gt;y{D4^000SaNLh0L01ejw01ejxLMWSf00007bV*G`2iXV&gt;
z0|yjrB8a#E00JUOL_t(I%Z-yyPZU8A#edy1vjZgTu(%+L1fxU_EN2rFqlWL`cknaH
z3Aig9_@hjSpj-%XcV%~H|4dbRm}OywgYVEucUQgY_qxg*9v^&gt;Ps8+YkEaw5NSdB;F
zy(e6#R=47~^r@S52z)R~P*fFgh~$_Vs*0$fs-wN|;`th(ndY5tn@00DQ5fNz2aGgL
zao*8tHYvq1mC77(Tw*ZjBch1ptSqk*g2OwHcLCl9c&lt;(toJ7atMGwpVVZnr}m$E&gt;fv
zVxwLsNfLs&lt;VP@dK7fKDY;%PTGf7sjGrP*vEk~1|m1;EM4H`3D-=iH&lt;ZV3=B=&amp;x9&lt;?
z==CyyiQp)Tn3&lt;U&amp;41!y4Zwc;9Glk2`OFEs-gGwSotJR|4@58+-Zw6|Hh@hI2=flwt
z+`&amp;1Asxlb#G3;LnU}~rc!{LynT8-J+S&lt;I|33NSOGD56@eQYw|k=l3KCq6NW|`3j4R
zi+JzH$pGbYnP)4@h{%LI4|ftog{;@3Uf*DPdU~ScmX@AUsmxDQ2MB?p%OnR^=q)D+
zK@g0Cf*_!rB!po&amp;?!*ZKGsAgDJ{)rX&lt;D8503$iR52jzKAdYWRUtgfz7E|*bN+%3T{
z&amp;pA3g;^)OL8jS|sZWrg=SgV&lt;FeSJ-&lt;)#CJfN^QBu+S*IN5sC==U%s-lvx~!xCeS@P
zeS^V(cDv2h)fET(2fTUxmM{!M-oN|6W_@!sNdE^_B}wM^3#b}6f8+L94*&amp;oF07*qo
IM6N&lt;$f~S)$R{#J2</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1">new file mode 100644</span>
<a href="#l29.2"></a><span id="l29.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..6555eceb0f3767123127a763da7883095aba3ad2</span>
<a href="#l29.3"></a><span id="l29.3">GIT binary patch
literal 5846
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/span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

