<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 13837:2c5ca63cdf1bc417a76692628b50d051cbc22024</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 2c5ca63cdf1bc417a76692628b50d051cbc22024" />
<meta property="og:url" content="/comm-central/rev/2c5ca63cdf1bc417a76692628b50d051cbc22024" />
<meta property="og:description" content="Bug 953594 - Disable auto-login when the 'Work Offline' checkbox of the Profile Manager is checked. Also make sure we won't try to connect accounts, watch sockets or do DNS resolutions while we are in offline mode." />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 2c5ca63cdf1bc417a76692628b50d051cbc22024 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/2c5ca63cdf1bc417a76692628b50d051cbc22024">shortlog</a> |
<a href="/comm-central/log/2c5ca63cdf1bc417a76692628b50d051cbc22024">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/2c5ca63cdf1bc417a76692628b50d051cbc22024">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/2c5ca63cdf1bc417a76692628b50d051cbc22024">files</a> |
changeset |
<a href="/comm-central/raw-rev/2c5ca63cdf1bc417a76692628b50d051cbc22024">raw</a>  | <a href="/comm-central/archive/2c5ca63cdf1bc417a76692628b50d051cbc22024.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=953594">Bug 953594</a> - Disable auto-login when the 'Work Offline' checkbox of the Profile Manager is checked. Also make sure we won't try to connect accounts, watch sockets or do DNS resolutions while we are in offline mode.
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#70;&#108;&#111;&#114;&#105;&#97;&#110;&#32;&#81;&#117;&#232;&#122;&#101;&#32;&#60;&#102;&#108;&#111;&#114;&#105;&#97;&#110;&#64;&#105;&#110;&#115;&#116;&#97;&#110;&#116;&#98;&#105;&#114;&#100;&#46;&#111;&#114;&#103;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 17 Oct 2008 03:13:51 +0200</td></tr>

<tr>
 <td>changeset 13837</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/2c5ca63cdf1bc417a76692628b50d051cbc22024">2c5ca63cdf1bc417a76692628b50d051cbc22024</a></td>
</tr>



<tr>
<td>parent 13836</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/1984e5989b2114c5d88a6f84244f7c017cd0fb4a">1984e5989b2114c5d88a6f84244f7c017cd0fb4a</a>
</td>
</tr>

<tr>
<td>child 13838</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/f2df35a5b49649d94906c5d7dca7698a31f871a9">f2df35a5b49649d94906c5d7dca7698a31f871a9</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=2c5ca63cdf1bc417a76692628b50d051cbc22024">9778</a></td></tr>
<tr><td>push user</td><td>florian@queze.net</td></tr>
<tr><td>push date</td><td class="date age">Sun, 12 Jan 2014 18:25:45 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@f81a23bfefcd [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&newProject=comm-central&newRevision=279a7aa9624ffb41326b021ff7d8bc68b9b89551&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&newProject=comm-central&newRevision=279a7aa9624ffb41326b021ff7d8bc68b9b89551&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&newProject=comm-central&newRevision=279a7aa9624ffb41326b021ff7d8bc68b9b89551&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>

<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=953594">953594</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=953594">Bug 953594</a> - Disable auto-login when the 'Work Offline' checkbox of the Profile Manager is checked. Also make sure we won't try to connect accounts, watch sockets or do DNS resolutions while we are in offline mode.</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2c5ca63cdf1bc417a76692628b50d051cbc22024/im/base/content/instantbird/accounts.js">im/base/content/instantbird/accounts.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2c5ca63cdf1bc417a76692628b50d051cbc22024/im/base/content/instantbird/accounts.js">file</a> |
<a href="/comm-central/annotate/2c5ca63cdf1bc417a76692628b50d051cbc22024/im/base/content/instantbird/accounts.js">annotate</a> |
<a href="/comm-central/diff/2c5ca63cdf1bc417a76692628b50d051cbc22024/im/base/content/instantbird/accounts.js">diff</a> |
<a href="/comm-central/comparison/2c5ca63cdf1bc417a76692628b50d051cbc22024/im/base/content/instantbird/accounts.js">comparison</a> |
<a href="/comm-central/log/2c5ca63cdf1bc417a76692628b50d051cbc22024/im/base/content/instantbird/accounts.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2c5ca63cdf1bc417a76692628b50d051cbc22024/im/locales/en-US/chrome/instantbird/accounts.properties">im/locales/en-US/chrome/instantbird/accounts.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2c5ca63cdf1bc417a76692628b50d051cbc22024/im/locales/en-US/chrome/instantbird/accounts.properties">file</a> |
<a href="/comm-central/annotate/2c5ca63cdf1bc417a76692628b50d051cbc22024/im/locales/en-US/chrome/instantbird/accounts.properties">annotate</a> |
<a href="/comm-central/diff/2c5ca63cdf1bc417a76692628b50d051cbc22024/im/locales/en-US/chrome/instantbird/accounts.properties">diff</a> |
<a href="/comm-central/comparison/2c5ca63cdf1bc417a76692628b50d051cbc22024/im/locales/en-US/chrome/instantbird/accounts.properties">comparison</a> |
<a href="/comm-central/log/2c5ca63cdf1bc417a76692628b50d051cbc22024/im/locales/en-US/chrome/instantbird/accounts.properties">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/im/base/content/instantbird/accounts.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/im/base/content/instantbird/accounts.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -221,16 +221,20 @@ var gAccountManager = {</span>
<a href="#l1.4"></a><span id="l1.4">       case pcs.AUTOLOGIN_USER_DISABLED:</span>
<a href="#l1.5"></a><span id="l1.5">         label = bundle.getString(&quot;accountsManager.notification.userDisabled.label&quot;);</span>
<a href="#l1.6"></a><span id="l1.6">         break;</span>
<a href="#l1.7"></a><span id="l1.7"> </span>
<a href="#l1.8"></a><span id="l1.8">       case pcs.AUTOLOGIN_SAFE_MODE:</span>
<a href="#l1.9"></a><span id="l1.9">         label = bundle.getString(&quot;accountsManager.notification.safeMode.label&quot;);</span>
<a href="#l1.10"></a><span id="l1.10">         break;</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+      case pcs.AUTOLOGIN_START_OFFLINE:</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+        label = bundle.getString(&quot;accountsManager.notification.startOffline.label&quot;);</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+        break;</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+</span>
<a href="#l1.16"></a><span id="l1.16">       case pcs.AUTOLOGIN_CRASH:</span>
<a href="#l1.17"></a><span id="l1.17">         label = bundle.getString(&quot;accountsManager.notification.crash.label&quot;);</span>
<a href="#l1.18"></a><span id="l1.18">         priority = box.PRIORITY_WARNING_MEDIUM;</span>
<a href="#l1.19"></a><span id="l1.19">         break;</span>
<a href="#l1.20"></a><span id="l1.20"> </span>
<a href="#l1.21"></a><span id="l1.21">       default:</span>
<a href="#l1.22"></a><span id="l1.22">         label = bundle.getString(&quot;accountsManager.notification.other.label&quot;);</span>
<a href="#l1.23"></a><span id="l1.23">     }</span>
<a href="#l1.24"></a><span id="l1.24" class="difflineat">@@ -239,13 +243,20 @@ var gAccountManager = {</span>
<a href="#l1.25"></a><span id="l1.25">       accessKey: bundle.getString(&quot;accountsManager.notification.button.accessKey&quot;),</span>
<a href="#l1.26"></a><span id="l1.26">       callback: this.processAutoLogin,</span>
<a href="#l1.27"></a><span id="l1.27">       label: bundle.getString(&quot;accountsManager.notification.button.label&quot;)</span>
<a href="#l1.28"></a><span id="l1.28">     }</span>
<a href="#l1.29"></a><span id="l1.29"> </span>
<a href="#l1.30"></a><span id="l1.30">     box.appendNotification(label, &quot;autologinStatus&quot;, null, priority, [connectNowButton]);</span>
<a href="#l1.31"></a><span id="l1.31">   },</span>
<a href="#l1.32"></a><span id="l1.32">   processAutoLogin: function am_processAutoLogin() {</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineplus">+    var ioService = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l1.34"></a><span id="l1.34" class="difflineplus">+                              .getService(Components.interfaces.nsIIOService2);</span>
<a href="#l1.35"></a><span id="l1.35" class="difflineplus">+    if (ioService.offline) {</span>
<a href="#l1.36"></a><span id="l1.36" class="difflineplus">+      ioService.manageOfflineStatus = false;</span>
<a href="#l1.37"></a><span id="l1.37" class="difflineplus">+      ioService.offline = false;</span>
<a href="#l1.38"></a><span id="l1.38" class="difflineplus">+    }</span>
<a href="#l1.39"></a><span id="l1.39" class="difflineplus">+</span>
<a href="#l1.40"></a><span id="l1.40">     Components.classes[&quot;@instantbird.org/purple/core;1&quot;]</span>
<a href="#l1.41"></a><span id="l1.41">               .getService(Ci.purpleICoreService)</span>
<a href="#l1.42"></a><span id="l1.42">               .processAutoLogin();</span>
<a href="#l1.43"></a><span id="l1.43">   }</span>
<a href="#l1.44"></a><span id="l1.44"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/im/locales/en-US/chrome/instantbird/accounts.properties</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/im/locales/en-US/chrome/instantbird/accounts.properties</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -10,10 +10,11 @@ requestAuthorizeTitle=Authorization requ</span>
<a href="#l2.4"></a><span id="l2.4"> requestAuthorizeAllow=&amp;Allow</span>
<a href="#l2.5"></a><span id="l2.5"> requestAuthorizeDeny=&amp;Deny</span>
<a href="#l2.6"></a><span id="l2.6"> requestAuthorizeText=%S added you to his/her buddy list, do you want to allow him/her to see you?</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8"> accountsManager.notification.button.accessKey=C</span>
<a href="#l2.9"></a><span id="l2.9"> accountsManager.notification.button.label=Connect Now</span>
<a href="#l2.10"></a><span id="l2.10"> accountsManager.notification.userDisabled.label=You have disabled automatic connexions.</span>
<a href="#l2.11"></a><span id="l2.11"> accountsManager.notification.safeMode.label=Automatic Connection Settings have been ignored because the application is currently running in Safe-Mode.</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+accountsManager.notification.startOffline.label=Automatic Connection Settings have been ignored because the application was started in Offline Mode.</span>
<a href="#l2.13"></a><span id="l2.13"> accountsManager.notification.crash.label=The last run exited unexpectedly while connecting. Automatic Connections have been disabled to give you an opportunity to Edit your Settings.</span>
<a href="#l2.14"></a><span id="l2.14"> accountsManager.notification.other.label=Automatic connection has been disabled.</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

