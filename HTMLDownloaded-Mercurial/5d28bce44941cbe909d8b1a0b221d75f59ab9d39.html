<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 14061:5d28bce44941cbe909d8b1a0b221d75f59ab9d39</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 5d28bce44941cbe909d8b1a0b221d75f59ab9d39" />
<meta property="og:url" content="/comm-central/rev/5d28bce44941cbe909d8b1a0b221d75f59ab9d39" />
<meta property="og:description" content="New tabs (similar to the tabs of Firefox 3.5)." />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 5d28bce44941cbe909d8b1a0b221d75f59ab9d39 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/5d28bce44941cbe909d8b1a0b221d75f59ab9d39">shortlog</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/5d28bce44941cbe909d8b1a0b221d75f59ab9d39">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39">files</a> |
changeset |
<a href="/comm-central/raw-rev/5d28bce44941cbe909d8b1a0b221d75f59ab9d39">raw</a>  | <a href="/comm-central/archive/5d28bce44941cbe909d8b1a0b221d75f59ab9d39.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
New tabs (similar to the tabs of Firefox 3.5).
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#70;&#108;&#111;&#114;&#105;&#97;&#110;&#32;&#81;&#117;&#232;&#122;&#101;&#32;&#60;&#102;&#108;&#111;&#114;&#105;&#97;&#110;&#64;&#105;&#110;&#115;&#116;&#97;&#110;&#116;&#98;&#105;&#114;&#100;&#46;&#111;&#114;&#103;&#62;</td></tr>
<tr><td></td><td class="date age">Sat, 29 Aug 2009 03:48:38 +0200</td></tr>

<tr>
 <td>changeset 14061</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/5d28bce44941cbe909d8b1a0b221d75f59ab9d39">5d28bce44941cbe909d8b1a0b221d75f59ab9d39</a></td>
</tr>



<tr>
<td>parent 14060</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/3a3f76e23243c2e064bafc68b6d29f44a7f9587a">3a3f76e23243c2e064bafc68b6d29f44a7f9587a</a>
</td>
</tr>

<tr>
<td>child 14062</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/b09938b252cdb8cf90603f31c784b0bf8565079c">b09938b252cdb8cf90603f31c784b0bf8565079c</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=5d28bce44941cbe909d8b1a0b221d75f59ab9d39">9778</a></td></tr>
<tr><td>push user</td><td>florian@queze.net</td></tr>
<tr><td>push date</td><td class="date age">Sun, 12 Jan 2014 18:25:45 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@f81a23bfefcd [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&newProject=comm-central&newRevision=279a7aa9624ffb41326b021ff7d8bc68b9b89551&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&newProject=comm-central&newRevision=279a7aa9624ffb41326b021ff7d8bc68b9b89551&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&newProject=comm-central&newRevision=279a7aa9624ffb41326b021ff7d8bc68b9b89551&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>






</table></div>

<div class="page_body description">New tabs (similar to the tabs of Firefox 3.5).</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/app/profile/all-instantbird.js">im/app/profile/all-instantbird.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/app/profile/all-instantbird.js">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/app/profile/all-instantbird.js">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/app/profile/all-instantbird.js">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/app/profile/all-instantbird.js">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/app/profile/all-instantbird.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/Makefile.in">im/base/content/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/Makefile.in">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/Makefile.in">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/Makefile.in">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/Makefile.in">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/blist.js">im/base/content/instantbird/blist.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/blist.js">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/blist.js">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/blist.js">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/blist.js">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/blist.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/buddy.xml">im/base/content/instantbird/buddy.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/buddy.xml">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/buddy.xml">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/buddy.xml">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/buddy.xml">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/buddy.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/convbrowser.xml">im/base/content/instantbird/convbrowser.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/convbrowser.xml">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/convbrowser.xml">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/convbrowser.xml">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/convbrowser.xml">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/convbrowser.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/conversation.xml">im/base/content/instantbird/conversation.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/conversation.xml">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/conversation.xml">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/conversation.xml">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/conversation.xml">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/conversation.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/imWindows.jsm">im/base/content/instantbird/imWindows.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/imWindows.jsm">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/imWindows.jsm">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/imWindows.jsm">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/imWindows.jsm">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/imWindows.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/instantbird.js">im/base/content/instantbird/instantbird.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/instantbird.js">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/instantbird.js">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/instantbird.js">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/instantbird.js">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/instantbird.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/instantbird.xul">im/base/content/instantbird/instantbird.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/instantbird.xul">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/instantbird.xul">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/instantbird.xul">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/instantbird.xul">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/instantbird.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/joinchat.js">im/base/content/instantbird/joinchat.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/joinchat.js">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/joinchat.js">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/joinchat.js">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/joinchat.js">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/joinchat.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/tabbrowser.css">im/base/content/instantbird/tabbrowser.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/tabbrowser.css">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/tabbrowser.css">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/tabbrowser.css">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/tabbrowser.css">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/tabbrowser.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/tabbrowser.xml">im/base/content/instantbird/tabbrowser.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/tabbrowser.xml">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/tabbrowser.xml">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/tabbrowser.xml">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/tabbrowser.xml">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/instantbird/tabbrowser.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/jar.mn">im/base/content/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/jar.mn">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/jar.mn">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/jar.mn">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/jar.mn">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/base/content/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/locales/en-US/chrome/instantbird/instantbird.dtd">im/locales/en-US/chrome/instantbird/instantbird.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/locales/en-US/chrome/instantbird/instantbird.dtd">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/locales/en-US/chrome/instantbird/instantbird.dtd">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/locales/en-US/chrome/instantbird/instantbird.dtd">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/locales/en-US/chrome/instantbird/instantbird.dtd">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/locales/en-US/chrome/instantbird/instantbird.dtd">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/locales/en-US/chrome/instantbird/tabbrowser.dtd">im/locales/en-US/chrome/instantbird/tabbrowser.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/locales/en-US/chrome/instantbird/tabbrowser.dtd">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/locales/en-US/chrome/instantbird/tabbrowser.dtd">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/locales/en-US/chrome/instantbird/tabbrowser.dtd">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/locales/en-US/chrome/instantbird/tabbrowser.dtd">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/locales/en-US/chrome/instantbird/tabbrowser.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/locales/jar.mn">im/locales/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/locales/jar.mn">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/locales/jar.mn">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/locales/jar.mn">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/locales/jar.mn">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/locales/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/chat-16.png">im/themes/winstripe/instantbird/chat-16.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/chat-16.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/chat-16.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/chat-16.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/chat-16.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/chat-16.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/instantbird.css">im/themes/winstripe/instantbird/instantbird.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/instantbird.css">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/instantbird.css">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/instantbird.css">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/instantbird.css">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/instantbird.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/jar.mn">im/themes/winstripe/instantbird/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/jar.mn">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/jar.mn">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/jar.mn">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/jar.mn">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-gnomestripe/tabDragIndicator.png">im/themes/winstripe/instantbird/tabbrowser-gnomestripe/tabDragIndicator.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-gnomestripe/tabDragIndicator.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-gnomestripe/tabDragIndicator.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-gnomestripe/tabDragIndicator.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-gnomestripe/tabDragIndicator.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-gnomestripe/tabDragIndicator.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-gnomestripe/tabbrowser.css">im/themes/winstripe/instantbird/tabbrowser-gnomestripe/tabbrowser.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-gnomestripe/tabbrowser.css">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-gnomestripe/tabbrowser.css">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-gnomestripe/tabbrowser.css">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-gnomestripe/tabbrowser.css">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-gnomestripe/tabbrowser.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/alltabs-box-bkgnd-icon.png">im/themes/winstripe/instantbird/tabbrowser-pinstripe/alltabs-box-bkgnd-icon.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/alltabs-box-bkgnd-icon.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/alltabs-box-bkgnd-icon.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/alltabs-box-bkgnd-icon.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/alltabs-box-bkgnd-icon.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/alltabs-box-bkgnd-icon.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/alltabs-box-overflow-bkgnd-animate.png">im/themes/winstripe/instantbird/tabbrowser-pinstripe/alltabs-box-overflow-bkgnd-animate.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/alltabs-box-overflow-bkgnd-animate.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/alltabs-box-overflow-bkgnd-animate.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/alltabs-box-overflow-bkgnd-animate.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/alltabs-box-overflow-bkgnd-animate.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/alltabs-box-overflow-bkgnd-animate.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/newtab.png">im/themes/winstripe/instantbird/tabbrowser-pinstripe/newtab.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/newtab.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/newtab.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/newtab.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/newtab.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/newtab.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-arrow-left.png">im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-arrow-left.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-arrow-left.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-arrow-left.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-arrow-left.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-arrow-left.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-arrow-left.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-arrow-right.png">im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-arrow-right.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-arrow-right.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-arrow-right.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-arrow-right.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-arrow-right.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-arrow-right.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-bkgnd.png">im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-bkgnd.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-bkgnd.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-bkgnd.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-bkgnd.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-bkgnd.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tab-bkgnd.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabDragIndicator.png">im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabDragIndicator.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabDragIndicator.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabDragIndicator.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabDragIndicator.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabDragIndicator.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabDragIndicator.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabbrowser-tabs-bkgnd.png">im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabbrowser-tabs-bkgnd.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabbrowser-tabs-bkgnd.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabbrowser-tabs-bkgnd.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabbrowser-tabs-bkgnd.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabbrowser-tabs-bkgnd.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabbrowser-tabs-bkgnd.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabbrowser.css">im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabbrowser.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabbrowser.css">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabbrowser.css">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabbrowser.css">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabbrowser.css">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabbrowser.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/alltabs-box-overflow-end-bkgnd-animate.png">im/themes/winstripe/instantbird/tabbrowser-winstripe/alltabs-box-overflow-end-bkgnd-animate.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/alltabs-box-overflow-end-bkgnd-animate.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/alltabs-box-overflow-end-bkgnd-animate.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/alltabs-box-overflow-end-bkgnd-animate.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/alltabs-box-overflow-end-bkgnd-animate.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/alltabs-box-overflow-end-bkgnd-animate.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/alltabs-box-overflow-start-bkgnd-animate.png">im/themes/winstripe/instantbird/tabbrowser-winstripe/alltabs-box-overflow-start-bkgnd-animate.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/alltabs-box-overflow-start-bkgnd-animate.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/alltabs-box-overflow-start-bkgnd-animate.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/alltabs-box-overflow-start-bkgnd-animate.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/alltabs-box-overflow-start-bkgnd-animate.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/alltabs-box-overflow-start-bkgnd-animate.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/mainwindow-dropdown-arrow.png">im/themes/winstripe/instantbird/tabbrowser-winstripe/mainwindow-dropdown-arrow.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/mainwindow-dropdown-arrow.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/mainwindow-dropdown-arrow.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/mainwindow-dropdown-arrow.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/mainwindow-dropdown-arrow.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/mainwindow-dropdown-arrow.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/newtab.png">im/themes/winstripe/instantbird/tabbrowser-winstripe/newtab.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/newtab.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/newtab.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/newtab.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/newtab.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/newtab.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-active-bkgnd.png">im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-active-bkgnd.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-active-bkgnd.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-active-bkgnd.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-active-bkgnd.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-active-bkgnd.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-active-bkgnd.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-arrow-left.png">im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-arrow-left.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-arrow-left.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-arrow-left.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-arrow-left.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-arrow-left.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-arrow-left.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-arrow-right.png">im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-arrow-right.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-arrow-right.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-arrow-right.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-arrow-right.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-arrow-right.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-arrow-right.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-bkgnd.png">im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-bkgnd.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-bkgnd.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-bkgnd.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-bkgnd.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-bkgnd.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-bkgnd.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-hover-bkgnd.png">im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-hover-bkgnd.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-hover-bkgnd.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-hover-bkgnd.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-hover-bkgnd.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-hover-bkgnd.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tab-hover-bkgnd.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabDragIndicator.png">im/themes/winstripe/instantbird/tabbrowser-winstripe/tabDragIndicator.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabDragIndicator.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabDragIndicator.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabDragIndicator.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabDragIndicator.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabDragIndicator.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabbrowser-tabs-bkgnd.png">im/themes/winstripe/instantbird/tabbrowser-winstripe/tabbrowser-tabs-bkgnd.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabbrowser-tabs-bkgnd.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabbrowser-tabs-bkgnd.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabbrowser-tabs-bkgnd.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabbrowser-tabs-bkgnd.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabbrowser-tabs-bkgnd.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabbrowser.css">im/themes/winstripe/instantbird/tabbrowser-winstripe/tabbrowser.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabbrowser.css">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabbrowser.css">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabbrowser.css">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabbrowser.css">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabbrowser.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabstrip-bottom.png">im/themes/winstripe/instantbird/tabbrowser-winstripe/tabstrip-bottom.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabstrip-bottom.png">file</a> |
<a href="/comm-central/annotate/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabstrip-bottom.png">annotate</a> |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabstrip-bottom.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabstrip-bottom.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabstrip-bottom.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-left-bkgnd.png">im/themes/winstripe/instantbird/tabbrowser/tab-left-bkgnd.png</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-left-bkgnd.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-left-bkgnd.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-left-bkgnd.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-left-hover.png">im/themes/winstripe/instantbird/tabbrowser/tab-left-hover.png</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-left-hover.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-left-hover.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-left-hover.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-left.png">im/themes/winstripe/instantbird/tabbrowser/tab-left.png</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-left.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-left.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-left.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-middle-bkgnd.png">im/themes/winstripe/instantbird/tabbrowser/tab-middle-bkgnd.png</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-middle-bkgnd.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-middle-bkgnd.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-middle-bkgnd.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-middle-hover.png">im/themes/winstripe/instantbird/tabbrowser/tab-middle-hover.png</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-middle-hover.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-middle-hover.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-middle-hover.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-middle.png">im/themes/winstripe/instantbird/tabbrowser/tab-middle.png</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-middle.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-middle.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-middle.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-right-bkgnd.png">im/themes/winstripe/instantbird/tabbrowser/tab-right-bkgnd.png</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-right-bkgnd.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-right-bkgnd.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-right-bkgnd.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-right-hover.png">im/themes/winstripe/instantbird/tabbrowser/tab-right-hover.png</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-right-hover.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-right-hover.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-right-hover.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-right.png">im/themes/winstripe/instantbird/tabbrowser/tab-right.png</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-right.png">diff</a> |
<a href="/comm-central/comparison/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-right.png">comparison</a> |
<a href="/comm-central/log/5d28bce44941cbe909d8b1a0b221d75f59ab9d39/im/themes/winstripe/instantbird/tabbrowser/tab-right.png">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/im/app/profile/all-instantbird.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/im/app/profile/all-instantbird.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -235,8 +235,29 @@ pref(&quot;general.warnOnAboutConfig&quot;, false)</span>
<a href="#l1.4"></a><span id="l1.4"> // their file URL is clickable</span>
<a href="#l1.5"></a><span id="l1.5"> #ifndef DEBUG</span>
<a href="#l1.6"></a><span id="l1.6"> // By default, show only warning and errors</span>
<a href="#l1.7"></a><span id="l1.7"> pref(&quot;purple.debug.loglevel&quot;, 3);</span>
<a href="#l1.8"></a><span id="l1.8"> #else</span>
<a href="#l1.9"></a><span id="l1.9"> // On debug builds, show warning, errors and debug information.</span>
<a href="#l1.10"></a><span id="l1.10"> pref(&quot;purple.debug.loglevel&quot;, 2);</span>
<a href="#l1.11"></a><span id="l1.11"> #endif</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+// Tabbed browser</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+pref(&quot;browser.tabs.autoHide&quot;, false);</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+pref(&quot;browser.tabs.warnOnClose&quot;, true);</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineplus">+pref(&quot;browser.tabs.warnOnOpen&quot;, true);</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineplus">+pref(&quot;browser.tabs.maxOpenBeforeWarn&quot;, 15);</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineplus">+pref(&quot;browser.tabs.loadInBackground&quot;, true);</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineplus">+pref(&quot;browser.tabs.loadFolderAndReplace&quot;, true);</span>
<a href="#l1.20"></a><span id="l1.20" class="difflineplus">+pref(&quot;browser.tabs.opentabfor.middleclick&quot;, true);</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineplus">+pref(&quot;browser.tabs.loadDivertedInBackground&quot;, false);</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineplus">+pref(&quot;browser.tabs.loadBookmarksInBackground&quot;, false);</span>
<a href="#l1.23"></a><span id="l1.23" class="difflineplus">+pref(&quot;browser.tabs.tabMinWidth&quot;, 100);</span>
<a href="#l1.24"></a><span id="l1.24" class="difflineplus">+pref(&quot;browser.tabs.tabMaxWidth&quot;, 250);</span>
<a href="#l1.25"></a><span id="l1.25" class="difflineplus">+pref(&quot;browser.tabs.tabClipWidth&quot;, 140);</span>
<a href="#l1.26"></a><span id="l1.26" class="difflineplus">+</span>
<a href="#l1.27"></a><span id="l1.27" class="difflineplus">+// Where to show tab close buttons:</span>
<a href="#l1.28"></a><span id="l1.28" class="difflineplus">+// 0  on active tab only</span>
<a href="#l1.29"></a><span id="l1.29" class="difflineplus">+// 1  on all tabs until tabClipWidth is reached, then active tab only</span>
<a href="#l1.30"></a><span id="l1.30" class="difflineplus">+// 2  no close buttons at all</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineplus">+// 3  at the end of the tabstrip</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+pref(&quot;browser.tabs.closeButtons&quot;, 1);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/im/base/content/Makefile.in</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/im/base/content/Makefile.in</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -40,12 +40,12 @@ srcdir		= @srcdir@</span>
<a href="#l2.4"></a><span id="l2.4"> VPATH		= @srcdir@</span>
<a href="#l2.5"></a><span id="l2.5"> </span>
<a href="#l2.6"></a><span id="l2.6"> include $(DEPTH)/config/autoconf.mk</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8"> ifdef WINCE</span>
<a href="#l2.9"></a><span id="l2.9"> DEFINES += -DWINCE</span>
<a href="#l2.10"></a><span id="l2.10"> endif</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-EXTRA_JS_MODULES = instantbird/imContentSink.jsm instantbird/imSmileys.jsm instantbird/imThemes.jsm</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+EXTRA_JS_MODULES = instantbird/imContentSink.jsm instantbird/imSmileys.jsm instantbird/imThemes.jsm instantbird/imWindows.jsm</span>
<a href="#l2.14"></a><span id="l2.14"> EXTRA_COMPONENTS = instantbird/smileProtocolHandler.js</span>
<a href="#l2.15"></a><span id="l2.15"> </span>
<a href="#l2.16"></a><span id="l2.16"> include $(topsrcdir)/config/rules.mk</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/im/base/content/instantbird/blist.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/im/base/content/instantbird/blist.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -37,28 +37,25 @@</span>
<a href="#l3.4"></a><span id="l3.4"> </span>
<a href="#l3.5"></a><span id="l3.5"> const events = [&quot;buddy-signed-on&quot;,</span>
<a href="#l3.6"></a><span id="l3.6">                 &quot;buddy-signed-off&quot;,</span>
<a href="#l3.7"></a><span id="l3.7">                 &quot;buddy-removed&quot;,</span>
<a href="#l3.8"></a><span id="l3.8">                 &quot;buddy-away&quot;,</span>
<a href="#l3.9"></a><span id="l3.9">                 &quot;buddy-idle&quot;,</span>
<a href="#l3.10"></a><span id="l3.10">                 &quot;account-connected&quot;,</span>
<a href="#l3.11"></a><span id="l3.11">                 &quot;account-disconnected&quot;,</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-                &quot;new-text&quot;,</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-                &quot;new-conversation&quot;,</span>
<a href="#l3.14"></a><span id="l3.14">                 &quot;status-away&quot;,</span>
<a href="#l3.15"></a><span id="l3.15">                 &quot;status-back&quot;,</span>
<a href="#l3.16"></a><span id="l3.16">                 &quot;purple-quit&quot;,</span>
<a href="#l3.17"></a><span id="l3.17">                 &quot;quit-application-requested&quot;];</span>
<a href="#l3.18"></a><span id="l3.18"> </span>
<a href="#l3.19"></a><span id="l3.19"> const autoJoinPref = &quot;autoJoin&quot;;</span>
<a href="#l3.20"></a><span id="l3.20"> </span>
<a href="#l3.21"></a><span id="l3.21"> var buddyList = {</span>
<a href="#l3.22"></a><span id="l3.22">   observe: function bl_observe(aBuddy, aTopic, aMsg) {</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineminus">-    //dump(&quot;received signal: &quot; + aTopic + &quot;\n&quot;);</span>
<a href="#l3.24"></a><span id="l3.24"> </span>
<a href="#l3.25"></a><span id="l3.25">     if (aTopic == &quot;quit-application-requested&quot;) {</span>
<a href="#l3.26"></a><span id="l3.26">       this._onQuitRequest(aBuddy, aMsg);</span>
<a href="#l3.27"></a><span id="l3.27">       return;</span>
<a href="#l3.28"></a><span id="l3.28">     }</span>
<a href="#l3.29"></a><span id="l3.29"> </span>
<a href="#l3.30"></a><span id="l3.30">     if (aTopic == &quot;purple-quit&quot;) {</span>
<a href="#l3.31"></a><span id="l3.31">       window.close();</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineat">@@ -96,31 +93,16 @@ var buddyList = {</span>
<a href="#l3.33"></a><span id="l3.33">       var notification = nbox.getNotificationWithValue(&quot;away-message&quot;);</span>
<a href="#l3.34"></a><span id="l3.34">       if (notification)</span>
<a href="#l3.35"></a><span id="l3.35">         nbox.removeNotification(notification);</span>
<a href="#l3.36"></a><span id="l3.36"> </span>
<a href="#l3.37"></a><span id="l3.37">       document.getElementById(&quot;getAwayMenuItem&quot;).disabled = false;</span>
<a href="#l3.38"></a><span id="l3.38">       return;</span>
<a href="#l3.39"></a><span id="l3.39">     }</span>
<a href="#l3.40"></a><span id="l3.40"> </span>
<a href="#l3.41"></a><span id="l3.41" class="difflineminus">-    if (aTopic == &quot;new-text&quot; || aTopic == &quot;new-conversation&quot;) {</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineminus">-      if (!this.win) {</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineminus">-        this.win = window.open(convWindow, &quot;Conversations&quot;, &quot;chrome,resizable&quot;);</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineminus">-        this.win.pendingNotifications = [{object: aBuddy, topic: aTopic, msg: aMsg}];</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineminus">-        this.win.addEventListener(&quot;unload&quot;, function(aEvent) {</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineminus">-          if (aEvent.target.location.href == convWindow)</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineminus">-            buddyList.win = null;</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineminus">-        }, false);</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineminus">-      }</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineminus">-      else if (&quot;pendingNotifications&quot; in this.win)</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineminus">-        this.win.pendingNotifications.push({object: aBuddy, topic: aTopic, msg: aMsg});</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineminus">-</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineminus">-      return;</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineminus">-    }</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineminus">-</span>
<a href="#l3.56"></a><span id="l3.56">     if (aTopic == &quot;account-connected&quot; || aTopic == &quot;account-disconnected&quot;) {</span>
<a href="#l3.57"></a><span id="l3.57">       var account = aBuddy.QueryInterface(Ci.purpleIAccount);</span>
<a href="#l3.58"></a><span id="l3.58">       if (account.protocol.id == &quot;prpl-irc&quot;) {</span>
<a href="#l3.59"></a><span id="l3.59">         this.checkForIrcAccount();</span>
<a href="#l3.60"></a><span id="l3.60">         if (aTopic == &quot;account-connected&quot;) {</span>
<a href="#l3.61"></a><span id="l3.61">           var branch = Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l3.62"></a><span id="l3.62">                                  .getService(Ci.nsIPrefService)</span>
<a href="#l3.63"></a><span id="l3.63">                                  .getBranch(&quot;messenger.account.&quot; +</span>
<a href="#l3.64"></a><span id="l3.64" class="difflineat">@@ -246,16 +228,19 @@ var buddyList = {</span>
<a href="#l3.65"></a><span id="l3.65">     // miss some notifications (this happened at least with the nullprpl)</span>
<a href="#l3.66"></a><span id="l3.66">     addObservers(buddyList, events);</span>
<a href="#l3.67"></a><span id="l3.67"> </span>
<a href="#l3.68"></a><span id="l3.68">     if (!initPurpleCore()) {</span>
<a href="#l3.69"></a><span id="l3.69">       window.close();</span>
<a href="#l3.70"></a><span id="l3.70">       return;</span>
<a href="#l3.71"></a><span id="l3.71">     }</span>
<a href="#l3.72"></a><span id="l3.72"> </span>
<a href="#l3.73"></a><span id="l3.73" class="difflineplus">+    Components.utils.import(&quot;resource://app/modules/imWindows.jsm&quot;);</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineplus">+    Conversations.init();</span>
<a href="#l3.75"></a><span id="l3.75" class="difflineplus">+</span>
<a href="#l3.76"></a><span id="l3.76">     buddyList.checkNotDisconnected(true);</span>
<a href="#l3.77"></a><span id="l3.77">     buddyList.checkForIrcAccount();</span>
<a href="#l3.78"></a><span id="l3.78">     this.addEventListener(&quot;unload&quot;, buddyList.unload, false);</span>
<a href="#l3.79"></a><span id="l3.79">     this.addEventListener(&quot;close&quot;, buddyList.close, false);</span>
<a href="#l3.80"></a><span id="l3.80">   },</span>
<a href="#l3.81"></a><span id="l3.81">   unload: function bl_unload() {</span>
<a href="#l3.82"></a><span id="l3.82">     removeObservers(buddyList, events);</span>
<a href="#l3.83"></a><span id="l3.83">     uninitPurpleCore();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/im/base/content/instantbird/buddy.xml</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/im/base/content/instantbird/buddy.xml</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -425,23 +425,17 @@</span>
<a href="#l4.4"></a><span id="l4.4">          var conv;</span>
<a href="#l4.5"></a><span id="l4.5">          for (var id in this.accounts) {</span>
<a href="#l4.6"></a><span id="l4.6">            // this will send a new-conversation notification that will force</span>
<a href="#l4.7"></a><span id="l4.7">            // opening a conversation window if there isn't one around</span>
<a href="#l4.8"></a><span id="l4.8">            conv = this.accounts[id].createConversation();</span>
<a href="#l4.9"></a><span id="l4.9">            break;</span>
<a href="#l4.10"></a><span id="l4.10">          }</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-         var wm = Components.classes[&quot;@mozilla.org/appshell/window-mediator;1&quot;]</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-                            .getService(Components.interfaces.nsIWindowMediator);</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-         var convWindow = wm.getMostRecentWindow(&quot;Messenger:convs&quot;);</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineminus">-         if (convWindow) {</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineminus">-           convWindow.msgObserver.focusConv(conv);</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineminus">-           convWindow.focus();</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineminus">-         }</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineplus">+         Conversations.focusConversation(conv);</span>
<a href="#l4.20"></a><span id="l4.20">        ]]&gt;</span>
<a href="#l4.21"></a><span id="l4.21">       &lt;/body&gt;</span>
<a href="#l4.22"></a><span id="l4.22">      &lt;/method&gt;</span>
<a href="#l4.23"></a><span id="l4.23">     &lt;/implementation&gt;</span>
<a href="#l4.24"></a><span id="l4.24">     &lt;handlers&gt;</span>
<a href="#l4.25"></a><span id="l4.25">      &lt;handler event=&quot;click&quot; clickcount=&quot;2&quot; action=&quot;openConversation();&quot;/&gt;</span>
<a href="#l4.26"></a><span id="l4.26">     &lt;/handlers&gt;</span>
<a href="#l4.27"></a><span id="l4.27">   &lt;/binding&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/im/base/content/instantbird/convbrowser.xml</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/im/base/content/instantbird/convbrowser.xml</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -410,17 +410,17 @@</span>
<a href="#l5.4"></a><span id="l5.4">         &lt;parameter name=&quot;aProgress&quot;/&gt;</span>
<a href="#l5.5"></a><span id="l5.5">         &lt;parameter name=&quot;aRequest&quot;/&gt;</span>
<a href="#l5.6"></a><span id="l5.6">         &lt;parameter name=&quot;aStateFlags&quot;/&gt;</span>
<a href="#l5.7"></a><span id="l5.7">         &lt;parameter name=&quot;aStatus&quot;/&gt;</span>
<a href="#l5.8"></a><span id="l5.8">         &lt;body&gt;</span>
<a href="#l5.9"></a><span id="l5.9">           &lt;![CDATA[</span>
<a href="#l5.10"></a><span id="l5.10">             const WPL = Components.interfaces.nsIWebProgressListener;</span>
<a href="#l5.11"></a><span id="l5.11">             if ((aStateFlags &amp; WPL.STATE_IS_DOCUMENT) &amp;&amp;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-            (aStateFlags &amp; WPL.STATE_STOP)) {</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+                (aStateFlags &amp; WPL.STATE_STOP)) {</span>
<a href="#l5.14"></a><span id="l5.14">               this.removeProgressListener(this);</span>
<a href="#l5.15"></a><span id="l5.15">               try {</span>
<a href="#l5.16"></a><span id="l5.16">                 initHTMLDocument(this._conv, this.theme, this.contentDocument);</span>
<a href="#l5.17"></a><span id="l5.17">               } catch(e) {</span>
<a href="#l5.18"></a><span id="l5.18">                 Components.utils.reportError(e);</span>
<a href="#l5.19"></a><span id="l5.19">               }</span>
<a href="#l5.20"></a><span id="l5.20"> </span>
<a href="#l5.21"></a><span id="l5.21">               var clipboard = Components.classes[&quot;@mozilla.org/widget/clipboard;1&quot;]</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineat">@@ -684,16 +684,52 @@</span>
<a href="#l5.23"></a><span id="l5.23">                   this.stopScroll();</span>
<a href="#l5.24"></a><span id="l5.24">                   break;</span>
<a href="#l5.25"></a><span id="l5.25">                 }</span>
<a href="#l5.26"></a><span id="l5.26">               }</span>
<a href="#l5.27"></a><span id="l5.27">             }</span>
<a href="#l5.28"></a><span id="l5.28">           ]]&gt;</span>
<a href="#l5.29"></a><span id="l5.29">         &lt;/body&gt;</span>
<a href="#l5.30"></a><span id="l5.30">       &lt;/method&gt;</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineplus">+</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+      &lt;method name=&quot;swapDocShells&quot;&gt;</span>
<a href="#l5.33"></a><span id="l5.33" class="difflineplus">+        &lt;parameter name=&quot;aOtherBrowser&quot;/&gt;</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.35"></a><span id="l5.35" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineplus">+          aOtherBrowser.destroy();</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineplus">+</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineplus">+          // We need to remove the controller before _contentWindow is changed</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineplus">+          this.contentWindow.controllers.removeController(this);</span>
<a href="#l5.40"></a><span id="l5.40" class="difflineplus">+</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineplus">+          // We need to swap fields that are tied to our docshell or related to</span>
<a href="#l5.42"></a><span id="l5.42" class="difflineplus">+          // the loaded page</span>
<a href="#l5.43"></a><span id="l5.43" class="difflineplus">+          // Fields which are built as a result of notifactions (pageshow/hide,</span>
<a href="#l5.44"></a><span id="l5.44" class="difflineplus">+          // DOMLinkAdded/Removed, onStateChange) should not be swapped here,</span>
<a href="#l5.45"></a><span id="l5.45" class="difflineplus">+          // because these notifications are dispatched again once the docshells</span>
<a href="#l5.46"></a><span id="l5.46" class="difflineplus">+          // are swapped.</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineplus">+          var fieldsToSwap = [ &quot;_docShell&quot;, &quot;_webBrowserFind&quot;, &quot;_contentWindow&quot;, &quot;_webNavigation&quot;];</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineplus">+</span>
<a href="#l5.49"></a><span id="l5.49" class="difflineplus">+          var ourFieldValues = {};</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineplus">+          var otherFieldValues = {};</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+          for each (var field in fieldsToSwap) {</span>
<a href="#l5.52"></a><span id="l5.52" class="difflineplus">+            ourFieldValues[field] = this[field];</span>
<a href="#l5.53"></a><span id="l5.53" class="difflineplus">+            otherFieldValues[field] = aOtherBrowser[field];</span>
<a href="#l5.54"></a><span id="l5.54" class="difflineplus">+          }</span>
<a href="#l5.55"></a><span id="l5.55" class="difflineplus">+          this.QueryInterface(Components.interfaces.nsIFrameLoaderOwner)</span>
<a href="#l5.56"></a><span id="l5.56" class="difflineplus">+              .swapFrameLoaders(aOtherBrowser);</span>
<a href="#l5.57"></a><span id="l5.57" class="difflineplus">+          for each (var field in fieldsToSwap) {</span>
<a href="#l5.58"></a><span id="l5.58" class="difflineplus">+            this[field] = otherFieldValues[field];</span>
<a href="#l5.59"></a><span id="l5.59" class="difflineplus">+            aOtherBrowser[field] = ourFieldValues[field];</span>
<a href="#l5.60"></a><span id="l5.60" class="difflineplus">+          }</span>
<a href="#l5.61"></a><span id="l5.61" class="difflineplus">+</span>
<a href="#l5.62"></a><span id="l5.62" class="difflineplus">+          // Now that we have the new _contentWindow, we can add back our controller</span>
<a href="#l5.63"></a><span id="l5.63" class="difflineplus">+          this.contentWindow.controllers.insertControllerAt(0, this);</span>
<a href="#l5.64"></a><span id="l5.64" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.65"></a><span id="l5.65" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.66"></a><span id="l5.66" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.67"></a><span id="l5.67">     &lt;/implementation&gt;</span>
<a href="#l5.68"></a><span id="l5.68"> </span>
<a href="#l5.69"></a><span id="l5.69">     &lt;handlers&gt;</span>
<a href="#l5.70"></a><span id="l5.70">       &lt;handler event=&quot;keypress&quot; keycode=&quot;VK_F7&quot; group=&quot;system&quot;&gt;</span>
<a href="#l5.71"></a><span id="l5.71">         &lt;![CDATA[</span>
<a href="#l5.72"></a><span id="l5.72">           if (event.getPreventDefault() || !event.isTrusted)</span>
<a href="#l5.73"></a><span id="l5.73">             return;</span>
<a href="#l5.74"></a><span id="l5.74"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/im/base/content/instantbird/conversation.xml</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/im/base/content/instantbird/conversation.xml</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -131,28 +131,37 @@</span>
<a href="#l6.4"></a><span id="l6.4">           called when we are removed from a tabbox.  This needs to be</span>
<a href="#l6.5"></a><span id="l6.5">           explicitly called before removing the DOM node. --&gt;</span>
<a href="#l6.6"></a><span id="l6.6">      &lt;method name=&quot;destroy&quot;&gt;</span>
<a href="#l6.7"></a><span id="l6.7">        &lt;body&gt;</span>
<a href="#l6.8"></a><span id="l6.8">          &lt;![CDATA[</span>
<a href="#l6.9"></a><span id="l6.9">            if (this._conv) {</span>
<a href="#l6.10"></a><span id="l6.10">              this._conv.close();</span>
<a href="#l6.11"></a><span id="l6.11">              this._conv.removeObserver(this);</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+             Conversations.unregisterConversation(this);</span>
<a href="#l6.13"></a><span id="l6.13">              delete this._conv;</span>
<a href="#l6.14"></a><span id="l6.14">              this.browser.destroy();</span>
<a href="#l6.15"></a><span id="l6.15"> </span>
<a href="#l6.16"></a><span id="l6.16">              // We can remove this test once we are sure we will only run on</span>
<a href="#l6.17"></a><span id="l6.17">              // mozilla plateforms that include the fix for bug 503048.</span>
<a href="#l6.18"></a><span id="l6.18">              if (&quot;destroy&quot; in this.findbar)</span>
<a href="#l6.19"></a><span id="l6.19">                this.findbar.destroy();</span>
<a href="#l6.20"></a><span id="l6.20">            }</span>
<a href="#l6.21"></a><span id="l6.21">          ]]&gt;</span>
<a href="#l6.22"></a><span id="l6.22">        &lt;/body&gt;</span>
<a href="#l6.23"></a><span id="l6.23">      &lt;/method&gt;</span>
<a href="#l6.24"></a><span id="l6.24"> </span>
<a href="#l6.25"></a><span id="l6.25" class="difflineplus">+     &lt;method name=&quot;finishImport&quot;&gt;</span>
<a href="#l6.26"></a><span id="l6.26" class="difflineplus">+       &lt;body&gt;</span>
<a href="#l6.27"></a><span id="l6.27" class="difflineplus">+         &lt;![CDATA[</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineplus">+           this.observe(this.browser, &quot;conversation-loaded&quot;, null);</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineplus">+         ]]&gt;</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineplus">+       &lt;/body&gt;</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineplus">+     &lt;/method&gt;</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+</span>
<a href="#l6.33"></a><span id="l6.33">      &lt;field name=&quot;loaded&quot;&gt;false&lt;/field&gt;</span>
<a href="#l6.34"></a><span id="l6.34">      &lt;field name=&quot;messageQueue&quot;&gt;[]&lt;/field&gt;</span>
<a href="#l6.35"></a><span id="l6.35"> </span>
<a href="#l6.36"></a><span id="l6.36">      &lt;method name=&quot;_emptyMessageQueue&quot;&gt;</span>
<a href="#l6.37"></a><span id="l6.37">       &lt;body&gt;</span>
<a href="#l6.38"></a><span id="l6.38">       &lt;![CDATA[</span>
<a href="#l6.39"></a><span id="l6.39">         this.loaded = true;</span>
<a href="#l6.40"></a><span id="l6.40">         for each(var m in this.messageQueue)</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineat">@@ -168,16 +177,17 @@</span>
<a href="#l6.42"></a><span id="l6.42">      &lt;!-- This is used when we want to remove close the conversation binding</span>
<a href="#l6.43"></a><span id="l6.43">      without closing the associated PurpleConversation.</span>
<a href="#l6.44"></a><span id="l6.44">      For example when quitting the application, we don't want to close the</span>
<a href="#l6.45"></a><span id="l6.45">      conversation. --&gt;</span>
<a href="#l6.46"></a><span id="l6.46">      &lt;method name=&quot;unInit&quot;&gt;</span>
<a href="#l6.47"></a><span id="l6.47">       &lt;body&gt;</span>
<a href="#l6.48"></a><span id="l6.48">       &lt;![CDATA[</span>
<a href="#l6.49"></a><span id="l6.49">         this._conv.removeObserver(this);</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineplus">+        Conversations.unregisterConversation(this);</span>
<a href="#l6.51"></a><span id="l6.51">         this._conv = null;</span>
<a href="#l6.52"></a><span id="l6.52">       ]]&gt;</span>
<a href="#l6.53"></a><span id="l6.53">       &lt;/body&gt;</span>
<a href="#l6.54"></a><span id="l6.54">      &lt;/method&gt;</span>
<a href="#l6.55"></a><span id="l6.55"> </span>
<a href="#l6.56"></a><span id="l6.56">      &lt;method name=&quot;addMsg&quot;&gt;</span>
<a href="#l6.57"></a><span id="l6.57">       &lt;parameter name=&quot;aMsg&quot;/&gt;</span>
<a href="#l6.58"></a><span id="l6.58">       &lt;body&gt;</span>
<a href="#l6.59"></a><span id="l6.59" class="difflineat">@@ -575,16 +585,18 @@</span>
<a href="#l6.60"></a><span id="l6.60">        ]]&gt;</span>
<a href="#l6.61"></a><span id="l6.61">        &lt;/body&gt;</span>
<a href="#l6.62"></a><span id="l6.62">      &lt;/method&gt;</span>
<a href="#l6.63"></a><span id="l6.63"> </span>
<a href="#l6.64"></a><span id="l6.64">      &lt;method name=&quot;focus&quot;&gt;</span>
<a href="#l6.65"></a><span id="l6.65">        &lt;body&gt;</span>
<a href="#l6.66"></a><span id="l6.66">        &lt;![CDATA[</span>
<a href="#l6.67"></a><span id="l6.67">          this.editor.focus();</span>
<a href="#l6.68"></a><span id="l6.68" class="difflineplus">+         this.tab.removeAttribute(&quot;unread&quot;);</span>
<a href="#l6.69"></a><span id="l6.69" class="difflineplus">+         this.tab.removeAttribute(&quot;attention&quot;);</span>
<a href="#l6.70"></a><span id="l6.70">          this.displayStatusText();</span>
<a href="#l6.71"></a><span id="l6.71">        ]]&gt;</span>
<a href="#l6.72"></a><span id="l6.72">        &lt;/body&gt;</span>
<a href="#l6.73"></a><span id="l6.73">      &lt;/method&gt;</span>
<a href="#l6.74"></a><span id="l6.74"> </span>
<a href="#l6.75"></a><span id="l6.75">      &lt;method name=&quot;displayStatusText&quot;&gt;</span>
<a href="#l6.76"></a><span id="l6.76">        &lt;body&gt;</span>
<a href="#l6.77"></a><span id="l6.77">        &lt;![CDATA[</span>
<a href="#l6.78"></a><span id="l6.78" class="difflineat">@@ -621,16 +633,35 @@</span>
<a href="#l6.79"></a><span id="l6.79">           }</span>
<a href="#l6.80"></a><span id="l6.80"> </span>
<a href="#l6.81"></a><span id="l6.81">           this.typingState = typingState;</span>
<a href="#l6.82"></a><span id="l6.82">           this.displayStatusText();</span>
<a href="#l6.83"></a><span id="l6.83">        ]]&gt;</span>
<a href="#l6.84"></a><span id="l6.84">        &lt;/body&gt;</span>
<a href="#l6.85"></a><span id="l6.85">      &lt;/method&gt;</span>
<a href="#l6.86"></a><span id="l6.86"> </span>
<a href="#l6.87"></a><span id="l6.87" class="difflineplus">+     &lt;method name=&quot;updateBuddyStatus&quot;&gt;</span>
<a href="#l6.88"></a><span id="l6.88" class="difflineplus">+       &lt;body&gt;</span>
<a href="#l6.89"></a><span id="l6.89" class="difflineplus">+       &lt;![CDATA[</span>
<a href="#l6.90"></a><span id="l6.90" class="difflineplus">+          let buddy = this._conv.buddy;</span>
<a href="#l6.91"></a><span id="l6.91" class="difflineplus">+          if (!buddy)</span>
<a href="#l6.92"></a><span id="l6.92" class="difflineplus">+            return;</span>
<a href="#l6.93"></a><span id="l6.93" class="difflineplus">+</span>
<a href="#l6.94"></a><span id="l6.94" class="difflineplus">+          if (!buddy.online)</span>
<a href="#l6.95"></a><span id="l6.95" class="difflineplus">+            this.tab.removeAttribute(&quot;status&quot;);</span>
<a href="#l6.96"></a><span id="l6.96" class="difflineplus">+          else if (buddy.idle)</span>
<a href="#l6.97"></a><span id="l6.97" class="difflineplus">+            this.tab.setAttribute(&quot;status&quot;, &quot;idle&quot;);</span>
<a href="#l6.98"></a><span id="l6.98" class="difflineplus">+          else if (buddy.available)</span>
<a href="#l6.99"></a><span id="l6.99" class="difflineplus">+            this.tab.setAttribute(&quot;status&quot;, &quot;available&quot;);</span>
<a href="#l6.100"></a><span id="l6.100" class="difflineplus">+          else</span>
<a href="#l6.101"></a><span id="l6.101" class="difflineplus">+            this.tab.setAttribute(&quot;status&quot;, &quot;away&quot;);</span>
<a href="#l6.102"></a><span id="l6.102" class="difflineplus">+       ]]&gt;</span>
<a href="#l6.103"></a><span id="l6.103" class="difflineplus">+       &lt;/body&gt;</span>
<a href="#l6.104"></a><span id="l6.104" class="difflineplus">+     &lt;/method&gt;</span>
<a href="#l6.105"></a><span id="l6.105" class="difflineplus">+</span>
<a href="#l6.106"></a><span id="l6.106">      &lt;!-- nsIObserver implementation --&gt;</span>
<a href="#l6.107"></a><span id="l6.107">      &lt;method name=&quot;observe&quot;&gt;</span>
<a href="#l6.108"></a><span id="l6.108">        &lt;parameter name=&quot;aSubject&quot;/&gt;</span>
<a href="#l6.109"></a><span id="l6.109">        &lt;parameter name=&quot;aTopic&quot;/&gt;</span>
<a href="#l6.110"></a><span id="l6.110">        &lt;parameter name=&quot;aData&quot;/&gt;</span>
<a href="#l6.111"></a><span id="l6.111">        &lt;body&gt;</span>
<a href="#l6.112"></a><span id="l6.112">        &lt;![CDATA[</span>
<a href="#l6.113"></a><span id="l6.113">          if (aTopic == &quot;conversation-loaded&quot;) {</span>
<a href="#l6.114"></a><span id="l6.114" class="difflineat">@@ -639,32 +670,35 @@</span>
<a href="#l6.115"></a><span id="l6.115"> </span>
<a href="#l6.116"></a><span id="l6.116">            // Display all queued messages. Use a timeout so that message text</span>
<a href="#l6.117"></a><span id="l6.117">            // modifiers can be added with observers for this notification.</span>
<a href="#l6.118"></a><span id="l6.118">            setTimeout(function(aSelf) { aSelf._emptyMessageQueue(); }, 0, this);</span>
<a href="#l6.119"></a><span id="l6.119"> </span>
<a href="#l6.120"></a><span id="l6.120">            if (this._conv instanceof Components.interfaces.purpleIConvChat) {</span>
<a href="#l6.121"></a><span id="l6.121">              this.updateTopic();</span>
<a href="#l6.122"></a><span id="l6.122">              this.setAttribute(&quot;chat&quot;, &quot;true&quot;);</span>
<a href="#l6.123"></a><span id="l6.123" class="difflineplus">+             this.tab.setAttribute(&quot;chat&quot;, &quot;true&quot;);</span>
<a href="#l6.124"></a><span id="l6.124"> </span>
<a href="#l6.125"></a><span id="l6.125">              // Set an id on the participant count for accessibility reasons (see bug 216)</span>
<a href="#l6.126"></a><span id="l6.126">              let id = &quot;pc&quot; + Date.now();</span>
<a href="#l6.127"></a><span id="l6.127">              document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;participantLabel&quot;)</span>
<a href="#l6.128"></a><span id="l6.128">                      .setAttribute(&quot;control&quot;, id);</span>
<a href="#l6.129"></a><span id="l6.129">              document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;participantCount&quot;)</span>
<a href="#l6.130"></a><span id="l6.130">                      .setAttribute(&quot;id&quot;, id);</span>
<a href="#l6.131"></a><span id="l6.131"> </span>
<a href="#l6.132"></a><span id="l6.132">              // Populate the nicklist</span>
<a href="#l6.133"></a><span id="l6.133">              this.buddies = {};</span>
<a href="#l6.134"></a><span id="l6.134">              var nicks = getIter(this.conv.getParticipants());</span>
<a href="#l6.135"></a><span id="l6.135">              for (let n in nicks)</span>
<a href="#l6.136"></a><span id="l6.136">                this.addBuddy(n);</span>
<a href="#l6.137"></a><span id="l6.137">              this.updateParticipantCount();</span>
<a href="#l6.138"></a><span id="l6.138">              this.browser.buddies = this.buddies;</span>
<a href="#l6.139"></a><span id="l6.139">            }</span>
<a href="#l6.140"></a><span id="l6.140" class="difflineplus">+           else</span>
<a href="#l6.141"></a><span id="l6.141" class="difflineplus">+             this.updateBuddyStatus();</span>
<a href="#l6.142"></a><span id="l6.142"> </span>
<a href="#l6.143"></a><span id="l6.143">            Components.classes[&quot;@mozilla.org/observer-service;1&quot;]</span>
<a href="#l6.144"></a><span id="l6.144">                      .getService(Components.interfaces.nsIObserverService)</span>
<a href="#l6.145"></a><span id="l6.145">                      .removeObserver(this, &quot;conversation-loaded&quot;);</span>
<a href="#l6.146"></a><span id="l6.146">            return;</span>
<a href="#l6.147"></a><span id="l6.147">          }</span>
<a href="#l6.148"></a><span id="l6.148"> </span>
<a href="#l6.149"></a><span id="l6.149">          if (!this.loaded)</span>
<a href="#l6.150"></a><span id="l6.150" class="difflineat">@@ -674,16 +708,20 @@</span>
<a href="#l6.151"></a><span id="l6.151">          case &quot;new-text&quot;:</span>
<a href="#l6.152"></a><span id="l6.152">            this._addMsg(aSubject);</span>
<a href="#l6.153"></a><span id="l6.153">            break;</span>
<a href="#l6.154"></a><span id="l6.154"> </span>
<a href="#l6.155"></a><span id="l6.155">          case &quot;update-typing&quot;:</span>
<a href="#l6.156"></a><span id="l6.156">            this.updateTyping();</span>
<a href="#l6.157"></a><span id="l6.157">            break;</span>
<a href="#l6.158"></a><span id="l6.158"> </span>
<a href="#l6.159"></a><span id="l6.159" class="difflineplus">+         case &quot;update-buddy-status&quot;:</span>
<a href="#l6.160"></a><span id="l6.160" class="difflineplus">+           this.updateBuddyStatus();</span>
<a href="#l6.161"></a><span id="l6.161" class="difflineplus">+           break;</span>
<a href="#l6.162"></a><span id="l6.162" class="difflineplus">+</span>
<a href="#l6.163"></a><span id="l6.163">          case &quot;chat-buddy-add&quot;:</span>
<a href="#l6.164"></a><span id="l6.164">            aSubject.QueryInterface(Ci.nsISimpleEnumerator);</span>
<a href="#l6.165"></a><span id="l6.165">            while (aSubject.hasMoreElements())</span>
<a href="#l6.166"></a><span id="l6.166">              this.addBuddy(aSubject.getNext());</span>
<a href="#l6.167"></a><span id="l6.167">            this.updateParticipantCount();</span>
<a href="#l6.168"></a><span id="l6.168">            break;</span>
<a href="#l6.169"></a><span id="l6.169"> </span>
<a href="#l6.170"></a><span id="l6.170">          case &quot;chat-buddy-remove&quot;:</span>
<a href="#l6.171"></a><span id="l6.171" class="difflineat">@@ -748,20 +786,37 @@</span>
<a href="#l6.172"></a><span id="l6.172">      &lt;property name=&quot;conv&quot;&gt;</span>
<a href="#l6.173"></a><span id="l6.173">        &lt;getter&gt;</span>
<a href="#l6.174"></a><span id="l6.174">          &lt;![CDATA[</span>
<a href="#l6.175"></a><span id="l6.175">            return this._conv;</span>
<a href="#l6.176"></a><span id="l6.176">          ]]&gt;</span>
<a href="#l6.177"></a><span id="l6.177">        &lt;/getter&gt;</span>
<a href="#l6.178"></a><span id="l6.178">        &lt;setter&gt;</span>
<a href="#l6.179"></a><span id="l6.179">          &lt;![CDATA[</span>
<a href="#l6.180"></a><span id="l6.180" class="difflineminus">-           if (this._conv)</span>
<a href="#l6.181"></a><span id="l6.181" class="difflineplus">+           if (this._conv &amp;&amp; val)</span>
<a href="#l6.182"></a><span id="l6.182">              throw(&quot;Already initialized&quot;);</span>
<a href="#l6.183"></a><span id="l6.183" class="difflineplus">+           if (!val) {</span>
<a href="#l6.184"></a><span id="l6.184" class="difflineplus">+             // this conversation has probably been moved to another</span>
<a href="#l6.185"></a><span id="l6.185" class="difflineplus">+             // tab. Forget the purpleConversation so that it isn't</span>
<a href="#l6.186"></a><span id="l6.186" class="difflineplus">+             // closed when destroying this binding.</span>
<a href="#l6.187"></a><span id="l6.187" class="difflineplus">+             this._conv.removeObserver(this);</span>
<a href="#l6.188"></a><span id="l6.188" class="difflineplus">+             Conversations.unregisterConversation(this);</span>
<a href="#l6.189"></a><span id="l6.189" class="difflineplus">+             delete this._conv;</span>
<a href="#l6.190"></a><span id="l6.190" class="difflineplus">+             this.browser.destroy();</span>
<a href="#l6.191"></a><span id="l6.191" class="difflineplus">+</span>
<a href="#l6.192"></a><span id="l6.192" class="difflineplus">+             // We can remove this test once we are sure we will only run on</span>
<a href="#l6.193"></a><span id="l6.193" class="difflineplus">+             // mozilla plateforms that include the fix for bug 503048.</span>
<a href="#l6.194"></a><span id="l6.194" class="difflineplus">+             if (&quot;destroy&quot; in this.findbar)</span>
<a href="#l6.195"></a><span id="l6.195" class="difflineplus">+               this.findbar.destroy();</span>
<a href="#l6.196"></a><span id="l6.196" class="difflineplus">+</span>
<a href="#l6.197"></a><span id="l6.197" class="difflineplus">+             return val;</span>
<a href="#l6.198"></a><span id="l6.198" class="difflineplus">+           }</span>
<a href="#l6.199"></a><span id="l6.199">            this._conv = val;</span>
<a href="#l6.200"></a><span id="l6.200">            this._conv.addObserver(this);</span>
<a href="#l6.201"></a><span id="l6.201" class="difflineplus">+           Conversations.registerConversation(this);</span>
<a href="#l6.202"></a><span id="l6.202">            this.browser.init(this._conv);</span>
<a href="#l6.203"></a><span id="l6.203">            return val;</span>
<a href="#l6.204"></a><span id="l6.204">          ]]&gt;</span>
<a href="#l6.205"></a><span id="l6.205">        &lt;/setter&gt;</span>
<a href="#l6.206"></a><span id="l6.206">      &lt;/property&gt;</span>
<a href="#l6.207"></a><span id="l6.207"> </span>
<a href="#l6.208"></a><span id="l6.208">      &lt;property name=&quot;isHtmlMode&quot;&gt;</span>
<a href="#l6.209"></a><span id="l6.209">        &lt;getter&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1">new file mode 100644</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineminus">--- /dev/null</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineplus">+++ b/im/base/content/instantbird/imWindows.jsm</span>
<a href="#l7.4"></a><span id="l7.4" class="difflineat">@@ -0,0 +1,136 @@</span>
<a href="#l7.5"></a><span id="l7.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l7.6"></a><span id="l7.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l7.7"></a><span id="l7.7" class="difflineplus">+ *</span>
<a href="#l7.8"></a><span id="l7.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l7.9"></a><span id="l7.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l7.10"></a><span id="l7.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l7.11"></a><span id="l7.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+ *</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineplus">+ * License.</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineplus">+ *</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineplus">+ * The Original Code is the Instantbird messenging client, released</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineplus">+ * 2009.</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineplus">+ *</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineplus">+ * Florian QUEZE &lt;florian@instantbird.org&gt;.</span>
<a href="#l7.23"></a><span id="l7.23" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2009</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineplus">+ *</span>
<a href="#l7.26"></a><span id="l7.26" class="difflineplus">+ * Contributor(s):</span>
<a href="#l7.27"></a><span id="l7.27" class="difflineplus">+ *</span>
<a href="#l7.28"></a><span id="l7.28" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l7.29"></a><span id="l7.29" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l7.30"></a><span id="l7.30" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l7.38"></a><span id="l7.38" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l7.39"></a><span id="l7.39" class="difflineplus">+ *</span>
<a href="#l7.40"></a><span id="l7.40" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l7.41"></a><span id="l7.41" class="difflineplus">+</span>
<a href="#l7.42"></a><span id="l7.42" class="difflineplus">+const CONVERSATION_WINDOW_URI = &quot;chrome://instantbird/content/instantbird.xul&quot;;</span>
<a href="#l7.43"></a><span id="l7.43" class="difflineplus">+var EXPORTED_SYMBOLS = [&quot;Conversations&quot;];</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineplus">+</span>
<a href="#l7.45"></a><span id="l7.45" class="difflineplus">+var Conversations = {</span>
<a href="#l7.46"></a><span id="l7.46" class="difflineplus">+  _windows: [],</span>
<a href="#l7.47"></a><span id="l7.47" class="difflineplus">+  registerWindow: function(aWindow) {</span>
<a href="#l7.48"></a><span id="l7.48" class="difflineplus">+    if (this._windows.indexOf(aWindow) == -1)</span>
<a href="#l7.49"></a><span id="l7.49" class="difflineplus">+      this._windows.push(aWindow);</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineplus">+</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineplus">+    if (this._pendingNotifications) {</span>
<a href="#l7.52"></a><span id="l7.52" class="difflineplus">+      this._pendingNotifications.forEach(function(aNotif) {</span>
<a href="#l7.53"></a><span id="l7.53" class="difflineplus">+        this.observe(aNotif.object, aNotif.topic, aNotif.msg);</span>
<a href="#l7.54"></a><span id="l7.54" class="difflineplus">+      }, this);</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineplus">+      delete this._pendingNotifications;</span>
<a href="#l7.56"></a><span id="l7.56" class="difflineplus">+    }</span>
<a href="#l7.57"></a><span id="l7.57" class="difflineplus">+  },</span>
<a href="#l7.58"></a><span id="l7.58" class="difflineplus">+  unregisterWindow: function(aWindow) {</span>
<a href="#l7.59"></a><span id="l7.59" class="difflineplus">+    let index = this._windows.indexOf(aWindow);</span>
<a href="#l7.60"></a><span id="l7.60" class="difflineplus">+    if (index != -1)</span>
<a href="#l7.61"></a><span id="l7.61" class="difflineplus">+      this._windows.splice(index, 1);</span>
<a href="#l7.62"></a><span id="l7.62" class="difflineplus">+  },</span>
<a href="#l7.63"></a><span id="l7.63" class="difflineplus">+</span>
<a href="#l7.64"></a><span id="l7.64" class="difflineplus">+  _purpleConv: {},</span>
<a href="#l7.65"></a><span id="l7.65" class="difflineplus">+  _conversations: [],</span>
<a href="#l7.66"></a><span id="l7.66" class="difflineplus">+  registerConversation: function(aConversation) {</span>
<a href="#l7.67"></a><span id="l7.67" class="difflineplus">+    if (this._conversations.indexOf(aConversation) == -1)</span>
<a href="#l7.68"></a><span id="l7.68" class="difflineplus">+      this._conversations.push(aConversation);</span>
<a href="#l7.69"></a><span id="l7.69" class="difflineplus">+</span>
<a href="#l7.70"></a><span id="l7.70" class="difflineplus">+    this._purpleConv[aConversation.conv.id] = aConversation;</span>
<a href="#l7.71"></a><span id="l7.71" class="difflineplus">+  },</span>
<a href="#l7.72"></a><span id="l7.72" class="difflineplus">+  unregisterConversation: function(aConversation) {</span>
<a href="#l7.73"></a><span id="l7.73" class="difflineplus">+    let index = this._conversations.indexOf(aConversation);</span>
<a href="#l7.74"></a><span id="l7.74" class="difflineplus">+    if (index != -1)</span>
<a href="#l7.75"></a><span id="l7.75" class="difflineplus">+      this._conversations.splice(index, 1);</span>
<a href="#l7.76"></a><span id="l7.76" class="difflineplus">+</span>
<a href="#l7.77"></a><span id="l7.77" class="difflineplus">+    if (this._purpleConv[aConversation.conv.id] == aConversation)</span>
<a href="#l7.78"></a><span id="l7.78" class="difflineplus">+      delete this._purpleConv[aConversation.conv.id];</span>
<a href="#l7.79"></a><span id="l7.79" class="difflineplus">+  },</span>
<a href="#l7.80"></a><span id="l7.80" class="difflineplus">+</span>
<a href="#l7.81"></a><span id="l7.81" class="difflineplus">+  focusConversation: function(aConv) {</span>
<a href="#l7.82"></a><span id="l7.82" class="difflineplus">+    let id = aConv.id;</span>
<a href="#l7.83"></a><span id="l7.83" class="difflineplus">+    if (id in this._purpleConv) {</span>
<a href="#l7.84"></a><span id="l7.84" class="difflineplus">+      let conv = this._purpleConv[id];</span>
<a href="#l7.85"></a><span id="l7.85" class="difflineplus">+      let doc = conv.ownerDocument;</span>
<a href="#l7.86"></a><span id="l7.86" class="difflineplus">+      doc.getElementById(&quot;conversations&quot;).selectedTab = conv.tab;</span>
<a href="#l7.87"></a><span id="l7.87" class="difflineplus">+      conv.focus();</span>
<a href="#l7.88"></a><span id="l7.88" class="difflineplus">+      doc.defaultView.focus();</span>
<a href="#l7.89"></a><span id="l7.89" class="difflineplus">+    }</span>
<a href="#l7.90"></a><span id="l7.90" class="difflineplus">+  },</span>
<a href="#l7.91"></a><span id="l7.91" class="difflineplus">+</span>
<a href="#l7.92"></a><span id="l7.92" class="difflineplus">+  init: function() {</span>
<a href="#l7.93"></a><span id="l7.93" class="difflineplus">+    let os = Components.classes[&quot;@mozilla.org/observer-service;1&quot;]</span>
<a href="#l7.94"></a><span id="l7.94" class="difflineplus">+                       .getService(Components.interfaces.nsIObserverService);</span>
<a href="#l7.95"></a><span id="l7.95" class="difflineplus">+    [&quot;new-text&quot;, &quot;new-conversation&quot;, &quot;purple-quit&quot;].forEach(function (aTopic) {</span>
<a href="#l7.96"></a><span id="l7.96" class="difflineplus">+      os.addObserver(Conversations, aTopic, false);</span>
<a href="#l7.97"></a><span id="l7.97" class="difflineplus">+    });</span>
<a href="#l7.98"></a><span id="l7.98" class="difflineplus">+  },</span>
<a href="#l7.99"></a><span id="l7.99" class="difflineplus">+</span>
<a href="#l7.100"></a><span id="l7.100" class="difflineplus">+  observe: function(aSubject, aTopic, aMsg) {</span>
<a href="#l7.101"></a><span id="l7.101" class="difflineplus">+    if (aTopic == &quot;purple-quit&quot;) {</span>
<a href="#l7.102"></a><span id="l7.102" class="difflineplus">+      for (let id in this._purpleConv)</span>
<a href="#l7.103"></a><span id="l7.103" class="difflineplus">+        this._purpleConv[id].unInit();</span>
<a href="#l7.104"></a><span id="l7.104" class="difflineplus">+    }</span>
<a href="#l7.105"></a><span id="l7.105" class="difflineplus">+</span>
<a href="#l7.106"></a><span id="l7.106" class="difflineplus">+    if (aTopic != &quot;new-text&quot; &amp;&amp; aTopic != &quot;new-conversation&quot;)</span>
<a href="#l7.107"></a><span id="l7.107" class="difflineplus">+      return;</span>
<a href="#l7.108"></a><span id="l7.108" class="difflineplus">+</span>
<a href="#l7.109"></a><span id="l7.109" class="difflineplus">+    if (!this._windows.length) {</span>
<a href="#l7.110"></a><span id="l7.110" class="difflineplus">+      if (this._pendingNotifications) {</span>
<a href="#l7.111"></a><span id="l7.111" class="difflineplus">+        this._pendingNotifications.push({object: aSubject, topic: aTopic,</span>
<a href="#l7.112"></a><span id="l7.112" class="difflineplus">+                                         msg: aMsg});</span>
<a href="#l7.113"></a><span id="l7.113" class="difflineplus">+        return;</span>
<a href="#l7.114"></a><span id="l7.114" class="difflineplus">+      }</span>
<a href="#l7.115"></a><span id="l7.115" class="difflineplus">+</span>
<a href="#l7.116"></a><span id="l7.116" class="difflineplus">+      var wwatch = Components.classes[&quot;@mozilla.org/embedcomp/window-watcher;1&quot;]</span>
<a href="#l7.117"></a><span id="l7.117" class="difflineplus">+                             .getService(Components.interfaces.nsIWindowWatcher);</span>
<a href="#l7.118"></a><span id="l7.118" class="difflineplus">+      wwatch.openWindow(null, CONVERSATION_WINDOW_URI, &quot;_blank&quot;,</span>
<a href="#l7.119"></a><span id="l7.119" class="difflineplus">+                        &quot;chrome,toolbar,resizable&quot;, null);</span>
<a href="#l7.120"></a><span id="l7.120" class="difflineplus">+      this._pendingNotifications = [{object: aSubject, topic: aTopic, msg: aMsg}];</span>
<a href="#l7.121"></a><span id="l7.121" class="difflineplus">+      return;</span>
<a href="#l7.122"></a><span id="l7.122" class="difflineplus">+    }</span>
<a href="#l7.123"></a><span id="l7.123" class="difflineplus">+</span>
<a href="#l7.124"></a><span id="l7.124" class="difflineplus">+    let conv = aTopic == &quot;new-conversation&quot; ? aSubject : aSubject.conversation;</span>
<a href="#l7.125"></a><span id="l7.125" class="difflineplus">+    if (!(conv.id in this._purpleConv)) {</span>
<a href="#l7.126"></a><span id="l7.126" class="difflineplus">+      this._windows[this._windows.length - 1].document</span>
<a href="#l7.127"></a><span id="l7.127" class="difflineplus">+          .getElementById(&quot;conversations&quot;).addConversation(conv);</span>
<a href="#l7.128"></a><span id="l7.128" class="difflineplus">+    }</span>
<a href="#l7.129"></a><span id="l7.129" class="difflineplus">+</span>
<a href="#l7.130"></a><span id="l7.130" class="difflineplus">+    if (aTopic == &quot;new-text&quot;) {</span>
<a href="#l7.131"></a><span id="l7.131" class="difflineplus">+      let conv = this._purpleConv[aSubject.conversation.id];</span>
<a href="#l7.132"></a><span id="l7.132" class="difflineplus">+      if (!conv.loaded)</span>
<a href="#l7.133"></a><span id="l7.133" class="difflineplus">+        conv.addMsg(aSubject);</span>
<a href="#l7.134"></a><span id="l7.134" class="difflineplus">+      if (aSubject.incoming &amp;&amp; !aSubject.system &amp;&amp;</span>
<a href="#l7.135"></a><span id="l7.135" class="difflineplus">+          (!(aSubject.conversation instanceof Components.interfaces.purpleIConvChat) ||</span>
<a href="#l7.136"></a><span id="l7.136" class="difflineplus">+           aSubject.containsNick))</span>
<a href="#l7.137"></a><span id="l7.137" class="difflineplus">+        conv.ownerDocument.defaultView.getAttention();</span>
<a href="#l7.138"></a><span id="l7.138" class="difflineplus">+    }</span>
<a href="#l7.139"></a><span id="l7.139" class="difflineplus">+  }</span>
<a href="#l7.140"></a><span id="l7.140" class="difflineplus">+};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/im/base/content/instantbird/instantbird.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/im/base/content/instantbird/instantbird.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -30,256 +30,75 @@</span>
<a href="#l8.4"></a><span id="l8.4">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l8.5"></a><span id="l8.5">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l8.6"></a><span id="l8.6">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l8.7"></a><span id="l8.7">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l8.8"></a><span id="l8.8">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l8.9"></a><span id="l8.9">  *</span>
<a href="#l8.10"></a><span id="l8.10">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l8.11"></a><span id="l8.11"> </span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-const events = [&quot;new-text&quot;,</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-                &quot;new-conversation&quot;,</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineminus">-                &quot;purple-quit&quot;];</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineplus">+</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineplus">+var TAB_DROP_TYPE = &quot;application/x-moz-tabbrowser-tab&quot;;</span>
<a href="#l8.17"></a><span id="l8.17"> </span>
<a href="#l8.18"></a><span id="l8.18" class="difflineminus">-var msgObserver = {</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineminus">-  convs: { },</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineplus">+const events = [&quot;purple-quit&quot;];</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineplus">+</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineplus">+var convWindow = {</span>
<a href="#l8.23"></a><span id="l8.23">   // Components.interfaces.nsIObserver</span>
<a href="#l8.24"></a><span id="l8.24">   observe: function mo_observe(aObject, aTopic, aData) {</span>
<a href="#l8.25"></a><span id="l8.25">     switch(aTopic) {</span>
<a href="#l8.26"></a><span id="l8.26">     case &quot;purple-quit&quot;:</span>
<a href="#l8.27"></a><span id="l8.27" class="difflineminus">-      for (let i in this.convs)</span>
<a href="#l8.28"></a><span id="l8.28" class="difflineminus">-        this.convs[i].unInit();</span>
<a href="#l8.29"></a><span id="l8.29">       window.close();</span>
<a href="#l8.30"></a><span id="l8.30">       break;</span>
<a href="#l8.31"></a><span id="l8.31"> </span>
<a href="#l8.32"></a><span id="l8.32" class="difflineminus">-    case &quot;new-text&quot;:</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineminus">-      var conv = aObject.conversation;</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineminus">-      var tab = this.convs[conv.id] || this.addConvTab(conv);</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineminus">-      if (!tab.loaded) // until we can load all messages from a conversation</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineminus">-        tab.addMsg(aObject);</span>
<a href="#l8.37"></a><span id="l8.37" class="difflineminus">-</span>
<a href="#l8.38"></a><span id="l8.38" class="difflineminus">-      if (aObject.incoming &amp;&amp; !aObject.system &amp;&amp;</span>
<a href="#l8.39"></a><span id="l8.39" class="difflineminus">-          (!(aObject.conversation instanceof Ci.purpleIConvChat) ||</span>
<a href="#l8.40"></a><span id="l8.40" class="difflineminus">-           aObject.containsNick))</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineminus">-        window.getAttention();</span>
<a href="#l8.42"></a><span id="l8.42" class="difflineminus">-      break;</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineminus">-</span>
<a href="#l8.44"></a><span id="l8.44" class="difflineminus">-    case &quot;new-conversation&quot;:</span>
<a href="#l8.45"></a><span id="l8.45" class="difflineminus">-      this.addConvTab(aObject);</span>
<a href="#l8.46"></a><span id="l8.46" class="difflineminus">-      break;</span>
<a href="#l8.47"></a><span id="l8.47" class="difflineminus">-</span>
<a href="#l8.48"></a><span id="l8.48">     default:</span>
<a href="#l8.49"></a><span id="l8.49">       throw &quot;Bad notification&quot;;</span>
<a href="#l8.50"></a><span id="l8.50">     }</span>
<a href="#l8.51"></a><span id="l8.51">   },</span>
<a href="#l8.52"></a><span id="l8.52"> </span>
<a href="#l8.53"></a><span id="l8.53" class="difflineminus">-  addConvTab: function mo_addConvTab(aConv) {</span>
<a href="#l8.54"></a><span id="l8.54" class="difflineminus">-    if (aConv.id in this.convs)</span>
<a href="#l8.55"></a><span id="l8.55" class="difflineminus">-      return this.convs[aConv.id];</span>
<a href="#l8.56"></a><span id="l8.56" class="difflineminus">-</span>
<a href="#l8.57"></a><span id="l8.57" class="difflineminus">-    var conv = document.createElement(&quot;conversation&quot;);</span>
<a href="#l8.58"></a><span id="l8.58" class="difflineminus">-    conv.setAttribute(&quot;contenttooltip&quot;, &quot;aHTMLTooltip&quot;);</span>
<a href="#l8.59"></a><span id="l8.59" class="difflineminus">-    conv.setAttribute(&quot;contentcontextmenu&quot;, &quot;contentAreaContextMenu&quot;);</span>
<a href="#l8.60"></a><span id="l8.60" class="difflineminus">-    var panels = document.getElementById(&quot;panels&quot;);</span>
<a href="#l8.61"></a><span id="l8.61" class="difflineminus">-    panels.appendChild(conv);</span>
<a href="#l8.62"></a><span id="l8.62" class="difflineminus">-    conv.conv = aConv;</span>
<a href="#l8.63"></a><span id="l8.63" class="difflineminus">-</span>
<a href="#l8.64"></a><span id="l8.64" class="difflineminus">-    var tabs = document.getElementById(&quot;tabs&quot;);</span>
<a href="#l8.65"></a><span id="l8.65" class="difflineminus">-    var tab = document.createElement(&quot;convtab&quot;);</span>
<a href="#l8.66"></a><span id="l8.66" class="difflineminus">-    tab.tooltipText = aConv.name;</span>
<a href="#l8.67"></a><span id="l8.67" class="difflineminus">-    let title = aConv.title</span>
<a href="#l8.68"></a><span id="l8.68" class="difflineminus">-                     .replace(/^([a-zA-Z0-9.]+)[@\s].*/, &quot;$1&quot;)</span>
<a href="#l8.69"></a><span id="l8.69" class="difflineminus">-                     .replace(/(.{15}).*/, &quot;$1&quot;);</span>
<a href="#l8.70"></a><span id="l8.70" class="difflineminus">-    tab.setAttribute(&quot;label&quot;, title);</span>
<a href="#l8.71"></a><span id="l8.71" class="difflineminus">-    tabs.appendChild(tab);</span>
<a href="#l8.72"></a><span id="l8.72" class="difflineminus">-    conv.tab = tab;</span>
<a href="#l8.73"></a><span id="l8.73" class="difflineminus">-</span>
<a href="#l8.74"></a><span id="l8.74" class="difflineminus">-    if (!tabs.selectedItem) {</span>
<a href="#l8.75"></a><span id="l8.75" class="difflineminus">-      tabs.selectedItem = tab;</span>
<a href="#l8.76"></a><span id="l8.76" class="difflineminus">-      panels.selectedPanel.focus();</span>
<a href="#l8.77"></a><span id="l8.77" class="difflineminus">-    }</span>
<a href="#l8.78"></a><span id="l8.78" class="difflineminus">-</span>
<a href="#l8.79"></a><span id="l8.79" class="difflineminus">-    this.convs[aConv.id] = conv;</span>
<a href="#l8.80"></a><span id="l8.80" class="difflineminus">-    return conv;</span>
<a href="#l8.81"></a><span id="l8.81" class="difflineminus">-  },</span>
<a href="#l8.82"></a><span id="l8.82" class="difflineminus">-</span>
<a href="#l8.83"></a><span id="l8.83" class="difflineminus">-  focusConv: function mo_focusConv(aConv) {</span>
<a href="#l8.84"></a><span id="l8.84" class="difflineminus">-    var id = aConv.id;</span>
<a href="#l8.85"></a><span id="l8.85" class="difflineminus">-    if (!(id in this.convs)) {</span>
<a href="#l8.86"></a><span id="l8.86" class="difflineminus">-      // We only support a single chat window ATM so we can safely</span>
<a href="#l8.87"></a><span id="l8.87" class="difflineminus">-      // re-add a closed conversation tab</span>
<a href="#l8.88"></a><span id="l8.88" class="difflineminus">-      this.addConvTab(aConv);</span>
<a href="#l8.89"></a><span id="l8.89" class="difflineminus">-      if (!(id in this.convs))</span>
<a href="#l8.90"></a><span id="l8.90" class="difflineminus">-        throw &quot;Can't find the conversation, even after trying to add it again!&quot;;</span>
<a href="#l8.91"></a><span id="l8.91" class="difflineminus">-    }</span>
<a href="#l8.92"></a><span id="l8.92" class="difflineminus">-    var panels = document.getElementById(&quot;panels&quot;);</span>
<a href="#l8.93"></a><span id="l8.93" class="difflineminus">-    var conv = this.convs[id];</span>
<a href="#l8.94"></a><span id="l8.94" class="difflineminus">-    panels.selectedPanel = conv;</span>
<a href="#l8.95"></a><span id="l8.95" class="difflineminus">-    document.getElementById(&quot;tabs&quot;).selectedIndex = panels.selectedIndex;</span>
<a href="#l8.96"></a><span id="l8.96" class="difflineminus">-    this.focusSelectedTab();</span>
<a href="#l8.97"></a><span id="l8.97" class="difflineminus">-  },</span>
<a href="#l8.98"></a><span id="l8.98" class="difflineminus">-</span>
<a href="#l8.99"></a><span id="l8.99" class="difflineminus">-  focusSelectedTab: function mo_focusSelectedTab() {</span>
<a href="#l8.100"></a><span id="l8.100" class="difflineminus">-    if (msgObserver.focusTimeoutId) {</span>
<a href="#l8.101"></a><span id="l8.101" class="difflineminus">-      clearTimeout(msgObserver.focusTimeoutId);</span>
<a href="#l8.102"></a><span id="l8.102" class="difflineminus">-      msgObserver.focusTimeoutId = null;</span>
<a href="#l8.103"></a><span id="l8.103" class="difflineminus">-    }</span>
<a href="#l8.104"></a><span id="l8.104" class="difflineminus">-    msgObserver.focusClickTimeoutId = null;</span>
<a href="#l8.105"></a><span id="l8.105" class="difflineminus">-    var tabs = document.getElementById(&quot;tabs&quot;);</span>
<a href="#l8.106"></a><span id="l8.106" class="difflineminus">-    var tab = tabs.selectedItem;</span>
<a href="#l8.107"></a><span id="l8.107" class="difflineminus">-    tab.removeAttribute(&quot;unread&quot;);</span>
<a href="#l8.108"></a><span id="l8.108" class="difflineminus">-    tab.removeAttribute(&quot;attention&quot;);</span>
<a href="#l8.109"></a><span id="l8.109" class="difflineminus">-    var panels = document.getElementById(&quot;panels&quot;);</span>
<a href="#l8.110"></a><span id="l8.110" class="difflineminus">-    panels.selectedPanel.focus();</span>
<a href="#l8.111"></a><span id="l8.111" class="difflineminus">-  },</span>
<a href="#l8.112"></a><span id="l8.112" class="difflineminus">-</span>
<a href="#l8.113"></a><span id="l8.113" class="difflineminus">-  onTabboxKeyPress: function mo_onTabboxKeyPress(aEvent) {</span>
<a href="#l8.114"></a><span id="l8.114" class="difflineminus">-    // When switching tab with ctrl(+shift)+tab, we need to set the</span>
<a href="#l8.115"></a><span id="l8.115" class="difflineminus">-    // focus immediatly to the textbox</span>
<a href="#l8.116"></a><span id="l8.116" class="difflineminus">-    if (aEvent.keyCode == aEvent.DOM_VK_TAB &amp;&amp;</span>
<a href="#l8.117"></a><span id="l8.117" class="difflineminus">-        aEvent.ctrlKey &amp;&amp; !aEvent.altKey &amp;&amp; !aEvent.metaKey) {</span>
<a href="#l8.118"></a><span id="l8.118" class="difflineminus">-      msgObserver.focusClickTimeoutId = setTimeout(msgObserver.focusSelectedTab, 0);</span>
<a href="#l8.119"></a><span id="l8.119" class="difflineminus">-    }</span>
<a href="#l8.120"></a><span id="l8.120" class="difflineminus">-  },</span>
<a href="#l8.121"></a><span id="l8.121" class="difflineminus">-</span>
<a href="#l8.122"></a><span id="l8.122" class="difflineminus">-  onSelectTab: function mo_onSelectTab() {</span>
<a href="#l8.123"></a><span id="l8.123" class="difflineminus">-#ifdef WINCE</span>
<a href="#l8.124"></a><span id="l8.124" class="difflineminus">-    // work around the brokenness of tabpanels / display:-moz-deck on WinCE</span>
<a href="#l8.125"></a><span id="l8.125" class="difflineminus">-    let panels = document.getElementById(&quot;panels&quot;);</span>
<a href="#l8.126"></a><span id="l8.126" class="difflineminus">-    let selectedPanel = panels.selectedPanel;</span>
<a href="#l8.127"></a><span id="l8.127" class="difflineminus">-    for (var panel = panels.firstChild; panel; panel = panel.nextSibling) {</span>
<a href="#l8.128"></a><span id="l8.128" class="difflineminus">-      if (panel == selectedPanel)</span>
<a href="#l8.129"></a><span id="l8.129" class="difflineminus">-        panel.setAttribute(&quot;selected&quot;, &quot;true&quot;);</span>
<a href="#l8.130"></a><span id="l8.130" class="difflineminus">-      else</span>
<a href="#l8.131"></a><span id="l8.131" class="difflineminus">-        panel.removeAttribute(&quot;selected&quot;);</span>
<a href="#l8.132"></a><span id="l8.132" class="difflineminus">-    } </span>
<a href="#l8.133"></a><span id="l8.133" class="difflineminus">-</span>
<a href="#l8.134"></a><span id="l8.134" class="difflineminus">-#endif</span>
<a href="#l8.135"></a><span id="l8.135" class="difflineminus">-    if (this.focusClickTimeoutId) {</span>
<a href="#l8.136"></a><span id="l8.136" class="difflineminus">-      // if a click event already started a shorter timeout to focus</span>
<a href="#l8.137"></a><span id="l8.137" class="difflineminus">-      // the tab, ignore the select event</span>
<a href="#l8.138"></a><span id="l8.138" class="difflineminus">-      return;</span>
<a href="#l8.139"></a><span id="l8.139" class="difflineminus">-    }</span>
<a href="#l8.140"></a><span id="l8.140" class="difflineminus">-</span>
<a href="#l8.141"></a><span id="l8.141" class="difflineminus">-    if (this.focusTimeoutId)</span>
<a href="#l8.142"></a><span id="l8.142" class="difflineminus">-      clearTimeout(this.focusTimeoutId);</span>
<a href="#l8.143"></a><span id="l8.143" class="difflineminus">-    this.focusTimeoutId = setTimeout(this.focusSelectedTab, 1000);</span>
<a href="#l8.144"></a><span id="l8.144" class="difflineminus">-  },</span>
<a href="#l8.145"></a><span id="l8.145" class="difflineminus">-</span>
<a href="#l8.146"></a><span id="l8.146" class="difflineminus">-  onClickTab: function mo_onClickTab(aEvent) {</span>
<a href="#l8.147"></a><span id="l8.147" class="difflineminus">-    if (aEvent.target.localName != &quot;convtab&quot;)</span>
<a href="#l8.148"></a><span id="l8.148" class="difflineminus">-      return;</span>
<a href="#l8.149"></a><span id="l8.149" class="difflineminus">-</span>
<a href="#l8.150"></a><span id="l8.150" class="difflineminus">-    if (aEvent.button == 1)</span>
<a href="#l8.151"></a><span id="l8.151" class="difflineminus">-      this.closeTab(aEvent.target);</span>
<a href="#l8.152"></a><span id="l8.152" class="difflineminus">-</span>
<a href="#l8.153"></a><span id="l8.153" class="difflineminus">-    // the call to focusSelectedTab needs to be delayed because we</span>
<a href="#l8.154"></a><span id="l8.154" class="difflineminus">-    // want it to always happen after the onselect event is dispatched</span>
<a href="#l8.155"></a><span id="l8.155" class="difflineminus">-    // (and tabbox.xml selects the new tab after the mousedown event</span>
<a href="#l8.156"></a><span id="l8.156" class="difflineminus">-    // with a timeout)</span>
<a href="#l8.157"></a><span id="l8.157" class="difflineminus">-    if (aEvent.button == 0)</span>
<a href="#l8.158"></a><span id="l8.158" class="difflineminus">-      this.focusClickTimeoutId = setTimeout(this.focusSelectedTab, 0);</span>
<a href="#l8.159"></a><span id="l8.159" class="difflineminus">-  },</span>
<a href="#l8.160"></a><span id="l8.160" class="difflineminus">-</span>
<a href="#l8.161"></a><span id="l8.161" class="difflineminus">-  closeCurrentTab: function mo_closeCurrentTab() {</span>
<a href="#l8.162"></a><span id="l8.162" class="difflineminus">-    var tabs = document.getElementById(&quot;tabs&quot;);</span>
<a href="#l8.163"></a><span id="l8.163" class="difflineminus">-    this.closeTab(tabs.selectedItem);</span>
<a href="#l8.164"></a><span id="l8.164" class="difflineminus">-  },</span>
<a href="#l8.165"></a><span id="l8.165" class="difflineminus">-</span>
<a href="#l8.166"></a><span id="l8.166" class="difflineminus">-  closeTab: function mo_closeTab(aTab) {</span>
<a href="#l8.167"></a><span id="l8.167" class="difflineminus">-    var tabs = aTab.parentNode.childNodes;</span>
<a href="#l8.168"></a><span id="l8.168" class="difflineminus">-    var i = aTab.parentNode.getIndexOfItem(aTab);</span>
<a href="#l8.169"></a><span id="l8.169" class="difflineminus">-    if (i == -1)</span>
<a href="#l8.170"></a><span id="l8.170" class="difflineminus">-      throw &quot;Can't find the tab that should be closed&quot;;</span>
<a href="#l8.171"></a><span id="l8.171" class="difflineminus">-</span>
<a href="#l8.172"></a><span id="l8.172" class="difflineminus">-    var panels = document.getElementById(&quot;panels&quot;);</span>
<a href="#l8.173"></a><span id="l8.173" class="difflineminus">-    var conv = panels.childNodes[i];</span>
<a href="#l8.174"></a><span id="l8.174" class="difflineminus">-    if (!conv)</span>
<a href="#l8.175"></a><span id="l8.175" class="difflineminus">-      throw &quot;Can't find the conversation associated with the tab.&quot;;</span>
<a href="#l8.176"></a><span id="l8.176" class="difflineminus">-    delete this.convs[conv.convId];</span>
<a href="#l8.177"></a><span id="l8.177" class="difflineminus">-</span>
<a href="#l8.178"></a><span id="l8.178" class="difflineminus">-    // Because of the way XBL works (fields just set JS</span>
<a href="#l8.179"></a><span id="l8.179" class="difflineminus">-    // properties on the element) and the code in place</span>
<a href="#l8.180"></a><span id="l8.180" class="difflineminus">-    // to preserve the JS objects for any elements that have</span>
<a href="#l8.181"></a><span id="l8.181" class="difflineminus">-    // JS properties set on them, the conversation element won't be</span>
<a href="#l8.182"></a><span id="l8.182" class="difflineminus">-    // destroyed until the document goes away.  Force a cleanup.</span>
<a href="#l8.183"></a><span id="l8.183" class="difflineminus">-    conv.destroy();</span>
<a href="#l8.184"></a><span id="l8.184" class="difflineminus">-</span>
<a href="#l8.185"></a><span id="l8.185" class="difflineminus">-    if (aTab.selected) {</span>
<a href="#l8.186"></a><span id="l8.186" class="difflineminus">-      if (aTab.nextSibling) {</span>
<a href="#l8.187"></a><span id="l8.187" class="difflineminus">-        // we are not on the last tab</span>
<a href="#l8.188"></a><span id="l8.188" class="difflineminus">-        aTab.parentNode.selectedItem = aTab.nextSibling;</span>
<a href="#l8.189"></a><span id="l8.189" class="difflineminus">-        panels.selectedPanel = conv.nextSibling;</span>
<a href="#l8.190"></a><span id="l8.190" class="difflineminus">-      }</span>
<a href="#l8.191"></a><span id="l8.191" class="difflineminus">-      else {</span>
<a href="#l8.192"></a><span id="l8.192" class="difflineminus">-        // we remove the last tab, which is selected</span>
<a href="#l8.193"></a><span id="l8.193" class="difflineminus">-        if (aTab.previousSibling) {</span>
<a href="#l8.194"></a><span id="l8.194" class="difflineminus">-          // at least a tab remain</span>
<a href="#l8.195"></a><span id="l8.195" class="difflineminus">-          aTab.parentNode.selectedItem = aTab.previousSibling;</span>
<a href="#l8.196"></a><span id="l8.196" class="difflineminus">-          panels.selectedPanel = conv.previousSibling;</span>
<a href="#l8.197"></a><span id="l8.197" class="difflineminus">-        }</span>
<a href="#l8.198"></a><span id="l8.198" class="difflineminus">-        else {</span>
<a href="#l8.199"></a><span id="l8.199" class="difflineminus">-          window.close();</span>
<a href="#l8.200"></a><span id="l8.200" class="difflineminus">-        }</span>
<a href="#l8.201"></a><span id="l8.201" class="difflineminus">-      }</span>
<a href="#l8.202"></a><span id="l8.202" class="difflineminus">-    }</span>
<a href="#l8.203"></a><span id="l8.203" class="difflineminus">-</span>
<a href="#l8.204"></a><span id="l8.204" class="difflineminus">-    panels.removeChild(conv);</span>
<a href="#l8.205"></a><span id="l8.205" class="difflineminus">-    // Workaround an ugly bug: when removing a panel, the selected panel disappears</span>
<a href="#l8.206"></a><span id="l8.206" class="difflineminus">-    panels.selectedPanel = panels.selectedPanel;</span>
<a href="#l8.207"></a><span id="l8.207" class="difflineminus">-</span>
<a href="#l8.208"></a><span id="l8.208" class="difflineminus">-    aTab.parentNode.removeChild(aTab);</span>
<a href="#l8.209"></a><span id="l8.209" class="difflineminus">-  },</span>
<a href="#l8.210"></a><span id="l8.210" class="difflineminus">-</span>
<a href="#l8.211"></a><span id="l8.211" class="difflineminus">-  onPopupShowing: function mo_onPopupShowing(aEvent) {</span>
<a href="#l8.212"></a><span id="l8.212" class="difflineminus">-    if (aEvent.explicitOriginalTarget.localName == &quot;convtab&quot;)</span>
<a href="#l8.213"></a><span id="l8.213" class="difflineminus">-      this.contextTab = aEvent.explicitOriginalTarget;</span>
<a href="#l8.214"></a><span id="l8.214" class="difflineminus">-    else</span>
<a href="#l8.215"></a><span id="l8.215" class="difflineminus">-      aEvent.preventDefault();</span>
<a href="#l8.216"></a><span id="l8.216" class="difflineminus">-  },</span>
<a href="#l8.217"></a><span id="l8.217" class="difflineminus">-</span>
<a href="#l8.218"></a><span id="l8.218" class="difflineminus">-  onCommandClose: function mo_onCommandClose(aEvent) {</span>
<a href="#l8.219"></a><span id="l8.219" class="difflineminus">-    this.closeTab(this.contextTab);</span>
<a href="#l8.220"></a><span id="l8.220" class="difflineminus">-  },</span>
<a href="#l8.221"></a><span id="l8.221" class="difflineminus">-</span>
<a href="#l8.222"></a><span id="l8.222">   onMouseZoom: function mo_onMouseZoom(event) {</span>
<a href="#l8.223"></a><span id="l8.223">     if (!event.ctrlKey || event.altKey || event.shiftKey || !event.detail)</span>
<a href="#l8.224"></a><span id="l8.224">       return;</span>
<a href="#l8.225"></a><span id="l8.225"> </span>
<a href="#l8.226"></a><span id="l8.226">     var cmd = event.detail &lt; 0 ? &quot;cmd_textZoomEnlarge&quot; : &quot;cmd_textZoomReduce&quot;;</span>
<a href="#l8.227"></a><span id="l8.227">     document.getElementById(cmd).doCommand();</span>
<a href="#l8.228"></a><span id="l8.228">   },</span>
<a href="#l8.229"></a><span id="l8.229"> </span>
<a href="#l8.230"></a><span id="l8.230">   load: function mo_load() {</span>
<a href="#l8.231"></a><span id="l8.231" class="difflineminus">-    addObservers(msgObserver, events);</span>
<a href="#l8.232"></a><span id="l8.232" class="difflineminus">-    if (window.pendingNotifications) {</span>
<a href="#l8.233"></a><span id="l8.233" class="difflineminus">-      let notifications = window.pendingNotifications;</span>
<a href="#l8.234"></a><span id="l8.234" class="difflineminus">-      for (let i = 0; i &lt; notifications.length; ++i) {</span>
<a href="#l8.235"></a><span id="l8.235" class="difflineminus">-        let notif = notifications[i];</span>
<a href="#l8.236"></a><span id="l8.236" class="difflineminus">-        msgObserver.observe(notif.object, notif.topic, notif.msg);</span>
<a href="#l8.237"></a><span id="l8.237" class="difflineminus">-      }</span>
<a href="#l8.238"></a><span id="l8.238" class="difflineminus">-      delete window.pendingNotifications;</span>
<a href="#l8.239"></a><span id="l8.239" class="difflineplus">+    Components.utils.import(&quot;resource://app/modules/imWindows.jsm&quot;);</span>
<a href="#l8.240"></a><span id="l8.240" class="difflineplus">+    Conversations.registerWindow(window);</span>
<a href="#l8.241"></a><span id="l8.241" class="difflineplus">+</span>
<a href="#l8.242"></a><span id="l8.242" class="difflineplus">+    addObservers(convWindow, events);</span>
<a href="#l8.243"></a><span id="l8.243" class="difflineplus">+</span>
<a href="#l8.244"></a><span id="l8.244" class="difflineplus">+    if (&quot;arguments&quot; in window &amp;&amp; window.arguments[0] instanceof XULElement) {</span>
<a href="#l8.245"></a><span id="l8.245" class="difflineplus">+      // swap the given tab with the default dummy conversation tab</span>
<a href="#l8.246"></a><span id="l8.246" class="difflineplus">+      // and then close the original tab in the other window.</span>
<a href="#l8.247"></a><span id="l8.247" class="difflineplus">+      document.getElementById(&quot;conversations&quot;)</span>
<a href="#l8.248"></a><span id="l8.248" class="difflineplus">+              .importConversation(window.arguments[0]);</span>
<a href="#l8.249"></a><span id="l8.249">     }</span>
<a href="#l8.250"></a><span id="l8.250" class="difflineminus">-    window.addEventListener(&quot;unload&quot;, msgObserver.unload, false);</span>
<a href="#l8.251"></a><span id="l8.251" class="difflineminus">-    window.addEventListener(&quot;DOMMouseScroll&quot;, msgObserver.onMouseZoom, false);</span>
<a href="#l8.252"></a><span id="l8.252" class="difflineplus">+</span>
<a href="#l8.253"></a><span id="l8.253" class="difflineplus">+    window.addEventListener(&quot;unload&quot;, convWindow.unload, false);</span>
<a href="#l8.254"></a><span id="l8.254" class="difflineplus">+    window.addEventListener(&quot;DOMMouseScroll&quot;, convWindow.onMouseZoom, false);</span>
<a href="#l8.255"></a><span id="l8.255">     window.QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l8.256"></a><span id="l8.256">           .getInterface(Ci.nsIWebNavigation)</span>
<a href="#l8.257"></a><span id="l8.257">           .QueryInterface(Ci.nsIDocShellTreeItem).treeOwner</span>
<a href="#l8.258"></a><span id="l8.258">           .QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l8.259"></a><span id="l8.259">           .getInterface(Ci.nsIXULWindow)</span>
<a href="#l8.260"></a><span id="l8.260">           .XULBrowserWindow = window.XULBrowserWindow;</span>
<a href="#l8.261"></a><span id="l8.261">   },</span>
<a href="#l8.262"></a><span id="l8.262">   unload: function mo_unload() {</span>
<a href="#l8.263"></a><span id="l8.263" class="difflineminus">-    removeObservers(msgObserver, events);</span>
<a href="#l8.264"></a><span id="l8.264" class="difflineplus">+    removeObservers(convWindow, events);</span>
<a href="#l8.265"></a><span id="l8.265" class="difflineplus">+    Conversations.unregisterWindow(window);</span>
<a href="#l8.266"></a><span id="l8.266">   }</span>
<a href="#l8.267"></a><span id="l8.267"> };</span>
<a href="#l8.268"></a><span id="l8.268"> </span>
<a href="#l8.269"></a><span id="l8.269" class="difflineplus">+function getConvWindowURL() &quot;chrome://instantbird/content/instantbird.xul&quot;</span>
<a href="#l8.270"></a><span id="l8.270" class="difflineplus">+</span>
<a href="#l8.271"></a><span id="l8.271"> function getBrowser()</span>
<a href="#l8.272"></a><span id="l8.272"> {</span>
<a href="#l8.273"></a><span id="l8.273" class="difflineminus">-  return document.getElementById(&quot;panels&quot;).selectedPanel.browser;</span>
<a href="#l8.274"></a><span id="l8.274" class="difflineplus">+  return document.getElementById(&quot;conversations&quot;);</span>
<a href="#l8.275"></a><span id="l8.275"> }</span>
<a href="#l8.276"></a><span id="l8.276"> </span>
<a href="#l8.277"></a><span id="l8.277"> // Inspired from the same function in mozilla/browser/base/content/browser.js</span>
<a href="#l8.278"></a><span id="l8.278"> function FillInHTMLTooltip(tipElement)</span>
<a href="#l8.279"></a><span id="l8.279"> {</span>
<a href="#l8.280"></a><span id="l8.280">   if (tipElement.namespaceURI == &quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;)</span>
<a href="#l8.281"></a><span id="l8.281">     return false;</span>
<a href="#l8.282"></a><span id="l8.282"> </span>
<a href="#l8.283"></a><span id="l8.283" class="difflineat">@@ -371,9 +190,9 @@ var XULBrowserWindow = {</span>
<a href="#l8.284"></a><span id="l8.284">     // and cause needless (slow!) UI updates</span>
<a href="#l8.285"></a><span id="l8.285">     if (this.statusText != text) {</span>
<a href="#l8.286"></a><span id="l8.286">       this.statusTextField.label = text;</span>
<a href="#l8.287"></a><span id="l8.287">       this.statusText = text;</span>
<a href="#l8.288"></a><span id="l8.288">     }</span>
<a href="#l8.289"></a><span id="l8.289">   }</span>
<a href="#l8.290"></a><span id="l8.290"> }</span>
<a href="#l8.291"></a><span id="l8.291"> </span>
<a href="#l8.292"></a><span id="l8.292" class="difflineminus">-this.addEventListener(&quot;load&quot;, msgObserver.load, false);</span>
<a href="#l8.293"></a><span id="l8.293" class="difflineplus">+this.addEventListener(&quot;load&quot;, convWindow.load, false);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/im/base/content/instantbird/instantbird.xul</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/im/base/content/instantbird/instantbird.xul</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -34,48 +34,53 @@</span>
<a href="#l9.4"></a><span id="l9.4">    - the provisions above, a recipient may use your version of this file under</span>
<a href="#l9.5"></a><span id="l9.5">    - the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l9.6"></a><span id="l9.6">    -</span>
<a href="#l9.7"></a><span id="l9.7">    - ***** END LICENSE BLOCK ***** --&gt;</span>
<a href="#l9.8"></a><span id="l9.8"> </span>
<a href="#l9.9"></a><span id="l9.9"> &lt;?xml-stylesheet href=&quot;chrome://global/skin/&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l9.10"></a><span id="l9.10"> &lt;?xml-stylesheet href=&quot;chrome://instantbird/skin/&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l9.11"></a><span id="l9.11"> &lt;?xml-stylesheet href=&quot;chrome://instantbird/content/instantbird.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+&lt;?xml-stylesheet href=&quot;chrome://instantbird/content/tabbrowser.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+&lt;?xml-stylesheet href=&quot;chrome://instantbird/skin/tabbrowser.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l9.14"></a><span id="l9.14"> </span>
<a href="#l9.15"></a><span id="l9.15"> &lt;?xul-overlay href=&quot;chrome://global/content/editMenuOverlay.xul&quot;?&gt;</span>
<a href="#l9.16"></a><span id="l9.16"> </span>
<a href="#l9.17"></a><span id="l9.17"> &lt;!DOCTYPE window [</span>
<a href="#l9.18"></a><span id="l9.18">   &lt;!ENTITY % instantbirdDTD SYSTEM &quot;chrome://instantbird/locale/instantbird.dtd&quot;&gt;</span>
<a href="#l9.19"></a><span id="l9.19">   %instantbirdDTD;</span>
<a href="#l9.20"></a><span id="l9.20">   &lt;!ENTITY % brandDTD SYSTEM &quot;chrome://branding/locale/brand.dtd&quot;&gt;</span>
<a href="#l9.21"></a><span id="l9.21">   %brandDTD;</span>
<a href="#l9.22"></a><span id="l9.22">   &lt;!ENTITY % textcontextDTD SYSTEM &quot;chrome://global/locale/textcontext.dtd&quot;&gt;</span>
<a href="#l9.23"></a><span id="l9.23">   %textcontextDTD;</span>
<a href="#l9.24"></a><span id="l9.24"> ]&gt;</span>
<a href="#l9.25"></a><span id="l9.25"> </span>
<a href="#l9.26"></a><span id="l9.26"> &lt;window</span>
<a href="#l9.27"></a><span id="l9.27">   id     = &quot;convWindow&quot;</span>
<a href="#l9.28"></a><span id="l9.28">   windowtype=&quot;Messenger:convs&quot;</span>
<a href="#l9.29"></a><span id="l9.29">   title  = &quot;&amp;convWindow.title;&quot;</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineplus">+  titlemenuseparator=&quot;&amp;convWindow.titlemodifiermenuseparator;&quot;</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineplus">+  titlemodifier=&quot;&amp;convWindow.titlemodifier;&quot;</span>
<a href="#l9.32"></a><span id="l9.32">   width  = &quot;500&quot;</span>
<a href="#l9.33"></a><span id="l9.33">   height = &quot;600&quot;</span>
<a href="#l9.34"></a><span id="l9.34">   persist= &quot;width height screenX screenY&quot;</span>
<a href="#l9.35"></a><span id="l9.35">   xmlns  = &quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l9.36"></a><span id="l9.36">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://instantbird/content/utilities.js&quot;/&gt;</span>
<a href="#l9.37"></a><span id="l9.37">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://instantbird/content/instantbird.js&quot;/&gt;</span>
<a href="#l9.38"></a><span id="l9.38"> #ifdef XP_MACOSX</span>
<a href="#l9.39"></a><span id="l9.39">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://instantbird/content/unreadCount.js&quot;/&gt;</span>
<a href="#l9.40"></a><span id="l9.40" class="difflineplus">+#if 0</span>
<a href="#l9.41"></a><span id="l9.41">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://instantbird/content/macgestures.js&quot;/&gt;</span>
<a href="#l9.42"></a><span id="l9.42"> #endif</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineplus">+#endif</span>
<a href="#l9.44"></a><span id="l9.44">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://global/content/globalOverlay.js&quot;/&gt;</span>
<a href="#l9.45"></a><span id="l9.45">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://global/content/viewZoomOverlay.js&quot;/&gt;</span>
<a href="#l9.46"></a><span id="l9.46">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://instantbird/content/nsContextMenu.js&quot;/&gt;</span>
<a href="#l9.47"></a><span id="l9.47"> </span>
<a href="#l9.48"></a><span id="l9.48">   &lt;commandset id=&quot;conversationsCommands&quot;&gt;</span>
<a href="#l9.49"></a><span id="l9.49" class="difflineminus">-    &lt;command id=&quot;cmd_close&quot; oncommand=&quot;msgObserver.closeCurrentTab()&quot;/&gt;</span>
<a href="#l9.50"></a><span id="l9.50">     &lt;command id=&quot;cmd_textZoomReduce&quot; oncommand=&quot;ZoomManager.reduce();&quot;/&gt;</span>
<a href="#l9.51"></a><span id="l9.51">     &lt;command id=&quot;cmd_textZoomEnlarge&quot; oncommand=&quot;ZoomManager.enlarge();&quot;/&gt;</span>
<a href="#l9.52"></a><span id="l9.52">     &lt;command id=&quot;cmd_textZoomReset&quot; oncommand=&quot;ZoomManager.reset();&quot;/&gt;</span>
<a href="#l9.53"></a><span id="l9.53">     &lt;command id=&quot;cmd_find&quot;</span>
<a href="#l9.54"></a><span id="l9.54">              oncommand=&quot;document.getElementById('panels').selectedPanel.findbar.onFindCommand();&quot;/&gt;</span>
<a href="#l9.55"></a><span id="l9.55">     &lt;command id=&quot;cmd_findAgain&quot;</span>
<a href="#l9.56"></a><span id="l9.56">              oncommand=&quot;document.getElementById('panels').selectedPanel.findbar.onFindAgainCommand(false);&quot;/&gt;</span>
<a href="#l9.57"></a><span id="l9.57">     &lt;command id=&quot;cmd_findPrevious&quot;</span>
<a href="#l9.58"></a><span id="l9.58" class="difflineat">@@ -143,21 +148,16 @@</span>
<a href="#l9.59"></a><span id="l9.59">           &lt;menuitem id=&quot;context-enginemanager&quot;</span>
<a href="#l9.60"></a><span id="l9.60">                     label=&quot;&amp;engineManagerCmd.label;&quot;</span>
<a href="#l9.61"></a><span id="l9.61">                     oncommand=&quot;gContextMenu.openEngineManager();&quot;/&gt;</span>
<a href="#l9.62"></a><span id="l9.62">         &lt;/menupopup&gt;</span>
<a href="#l9.63"></a><span id="l9.63">       &lt;/menu&gt;</span>
<a href="#l9.64"></a><span id="l9.64">     &lt;/popup&gt;</span>
<a href="#l9.65"></a><span id="l9.65">   &lt;/popupset&gt;</span>
<a href="#l9.66"></a><span id="l9.66"> </span>
<a href="#l9.67"></a><span id="l9.67" class="difflineminus">-  &lt;tabbox flex=&quot;1&quot; onkeypress=&quot;msgObserver.onTabboxKeyPress(event);&quot;&gt;</span>
<a href="#l9.68"></a><span id="l9.68" class="difflineminus">-    &lt;tabs id=&quot;tabs&quot; context=&quot;tabs-context-menu&quot;</span>
<a href="#l9.69"></a><span id="l9.69" class="difflineminus">-          onselect=&quot;msgObserver.onSelectTab();&quot; onclick=&quot;msgObserver.onClickTab(event)&quot;/&gt;</span>
<a href="#l9.70"></a><span id="l9.70" class="difflineminus">-    &lt;tabpanels id=&quot;panels&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l9.71"></a><span id="l9.71" class="difflineminus">-  &lt;/tabbox&gt;</span>
<a href="#l9.72"></a><span id="l9.72" class="difflineminus">-  &lt;menupopup id=&quot;tabs-context-menu&quot; onpopupshowing=&quot;msgObserver.onPopupShowing(event);&quot;&gt;</span>
<a href="#l9.73"></a><span id="l9.73" class="difflineminus">-    &lt;menuitem label=&quot;&amp;conversation.contextMenu.close;&quot; oncommand=&quot;msgObserver.onCommandClose(event)&quot;/&gt;</span>
<a href="#l9.74"></a><span id="l9.74" class="difflineminus">-  &lt;/menupopup&gt;</span>
<a href="#l9.75"></a><span id="l9.75" class="difflineplus">+  &lt;tabconversation id=&quot;conversations&quot; flex=&quot;1&quot;</span>
<a href="#l9.76"></a><span id="l9.76" class="difflineplus">+                   contenttooltip=&quot;aHTMLTooltip&quot;</span>
<a href="#l9.77"></a><span id="l9.77" class="difflineplus">+                   contentcontextmenu=&quot;contentAreaContextMenu&quot;/&gt;</span>
<a href="#l9.78"></a><span id="l9.78"> </span>
<a href="#l9.79"></a><span id="l9.79">   &lt;statusbar&gt;</span>
<a href="#l9.80"></a><span id="l9.80">     &lt;statusbarpanel id=&quot;statusbar-display&quot; label=&quot;&quot; crop=&quot;end&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l9.81"></a><span id="l9.81">   &lt;/statusbar&gt;</span>
<a href="#l9.82"></a><span id="l9.82"> &lt;/window&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/im/base/content/instantbird/joinchat.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/im/base/content/instantbird/joinchat.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -91,21 +91,16 @@ var joinChat = {</span>
<a href="#l10.4"></a><span id="l10.4">     }</span>
<a href="#l10.5"></a><span id="l10.5"> </span>
<a href="#l10.6"></a><span id="l10.6">     // if the conversation is being created, |conv| will be null</span>
<a href="#l10.7"></a><span id="l10.7">     // here. The new-conversation notification should be used to focus</span>
<a href="#l10.8"></a><span id="l10.8">     // it when done.  If it is already opened, we should focus it now.</span>
<a href="#l10.9"></a><span id="l10.9">     if (!conv)</span>
<a href="#l10.10"></a><span id="l10.10">       return;</span>
<a href="#l10.11"></a><span id="l10.11"> </span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-    var wm = Components.classes[&quot;@mozilla.org/appshell/window-mediator;1&quot;]</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-                       .getService(Components.interfaces.nsIWindowMediator);</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineminus">-    var convWindow = wm.getMostRecentWindow(&quot;Messenger:convs&quot;);</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineminus">-    if (convWindow) {</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineminus">-      convWindow.msgObserver.focusConv(conv);</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineminus">-      convWindow.focus();</span>
<a href="#l10.18"></a><span id="l10.18" class="difflineminus">-    }</span>
<a href="#l10.19"></a><span id="l10.19" class="difflineplus">+    Components.utils.import(&quot;resource://app/modules/imWindows.jsm&quot;);</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineplus">+    Conversations.focusConversation(conv);</span>
<a href="#l10.21"></a><span id="l10.21">   },</span>
<a href="#l10.22"></a><span id="l10.22"> </span>
<a href="#l10.23"></a><span id="l10.23">   getAccounts: function jc_getAccounts() {</span>
<a href="#l10.24"></a><span id="l10.24">     return getIter(this.pcs.getAccounts());</span>
<a href="#l10.25"></a><span id="l10.25">   }</span>
<a href="#l10.26"></a><span id="l10.26"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">new file mode 100644</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineminus">--- /dev/null</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineplus">+++ b/im/base/content/instantbird/tabbrowser.css</span>
<a href="#l11.4"></a><span id="l11.4" class="difflineat">@@ -0,0 +1,50 @@</span>
<a href="#l11.5"></a><span id="l11.5" class="difflineplus">+tabconversation {</span>
<a href="#l11.6"></a><span id="l11.6" class="difflineplus">+  -moz-binding: url(&quot;chrome://instantbird/content/tabbrowser.xml#tabbrowser&quot;);</span>
<a href="#l11.7"></a><span id="l11.7" class="difflineplus">+}</span>
<a href="#l11.8"></a><span id="l11.8" class="difflineplus">+</span>
<a href="#l11.9"></a><span id="l11.9" class="difflineplus">+.tabbrowser-tabs {</span>
<a href="#l11.10"></a><span id="l11.10" class="difflineplus">+  -moz-binding: url(&quot;chrome://instantbird/content/tabbrowser.xml#tabbrowser-tabs&quot;);</span>
<a href="#l11.11"></a><span id="l11.11" class="difflineplus">+}</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineplus">+</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+.tabbrowser-tab {</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineplus">+  -moz-binding: url(&quot;chrome://instantbird/content/tabbrowser.xml#tabbrowser-tab&quot;);</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineplus">+}</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineplus">+</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineplus">+.tabbrowser-arrowscrollbox {</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineplus">+  -moz-binding: url(&quot;chrome://instantbird/content/tabbrowser.xml#tabbrowser-arrowscrollbox&quot;);</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineplus">+}</span>
<a href="#l11.20"></a><span id="l11.20" class="difflineplus">+</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineplus">+.tabs-alltabs-popup {</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineplus">+  -moz-binding: url(&quot;chrome://instantbird/content/tabbrowser.xml#tabbrowser-alltabs-popup&quot;);</span>
<a href="#l11.23"></a><span id="l11.23" class="difflineplus">+}</span>
<a href="#l11.24"></a><span id="l11.24" class="difflineplus">+</span>
<a href="#l11.25"></a><span id="l11.25" class="difflineplus">+.tab-close-button, .tabs-closebutton {</span>
<a href="#l11.26"></a><span id="l11.26" class="difflineplus">+  -moz-binding: url(&quot;chrome://instantbird/content/tabbrowser.xml#tabbrowser-close-tab-button&quot;);</span>
<a href="#l11.27"></a><span id="l11.27" class="difflineplus">+}</span>
<a href="#l11.28"></a><span id="l11.28" class="difflineplus">+</span>
<a href="#l11.29"></a><span id="l11.29" class="difflineplus">+.tab-close-button {</span>
<a href="#l11.30"></a><span id="l11.30" class="difflineplus">+  display: none;</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineplus">+}</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+</span>
<a href="#l11.33"></a><span id="l11.33" class="difflineplus">+.tabbrowser-tabs:not([closebuttons=&quot;noclose&quot;]):not([closebuttons=&quot;closeatend&quot;]) &gt; .tabbrowser-tab[selected=&quot;true&quot;]:not(:only-child) &gt; .tab-close-button {</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineplus">+  display: -moz-box;</span>
<a href="#l11.35"></a><span id="l11.35" class="difflineplus">+}</span>
<a href="#l11.36"></a><span id="l11.36" class="difflineplus">+</span>
<a href="#l11.37"></a><span id="l11.37" class="difflineplus">+.tabbrowser-tabs[closebuttons=&quot;alltabs&quot;] &gt; .tabbrowser-tab:not(:only-child) &gt; .tab-close-button {</span>
<a href="#l11.38"></a><span id="l11.38" class="difflineplus">+  display: -moz-box;</span>
<a href="#l11.39"></a><span id="l11.39" class="difflineplus">+}</span>
<a href="#l11.40"></a><span id="l11.40" class="difflineplus">+</span>
<a href="#l11.41"></a><span id="l11.41" class="difflineplus">+.tabs-container:not([overflow=&quot;true&quot;]) &gt; .tabs-newtab-button,</span>
<a href="#l11.42"></a><span id="l11.42" class="difflineplus">+.tabs-container[overflow=&quot;true&quot;] &gt; .tabbrowser-arrowscrollbox &gt; .tabs-newtab-button {</span>
<a href="#l11.43"></a><span id="l11.43" class="difflineplus">+  visibility: collapse;</span>
<a href="#l11.44"></a><span id="l11.44" class="difflineplus">+}</span>
<a href="#l11.45"></a><span id="l11.45" class="difflineplus">+</span>
<a href="#l11.46"></a><span id="l11.46" class="difflineplus">+.tabs-newtab-button &gt; .toolbarbutton-text {</span>
<a href="#l11.47"></a><span id="l11.47" class="difflineplus">+  display: none;</span>
<a href="#l11.48"></a><span id="l11.48" class="difflineplus">+}</span>
<a href="#l11.49"></a><span id="l11.49" class="difflineplus">+</span>
<a href="#l11.50"></a><span id="l11.50" class="difflineplus">+.tabs-newtab-button,</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineplus">+#context_newTab,</span>
<a href="#l11.52"></a><span id="l11.52" class="difflineplus">+#context_newTabSeparator {</span>
<a href="#l11.53"></a><span id="l11.53" class="difflineplus">+  display: none;</span>
<a href="#l11.54"></a><span id="l11.54" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">new file mode 100644</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineminus">--- /dev/null</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineplus">+++ b/im/base/content/instantbird/tabbrowser.xml</span>
<a href="#l12.4"></a><span id="l12.4" class="difflineat">@@ -0,0 +1,2149 @@</span>
<a href="#l12.5"></a><span id="l12.5" class="difflineplus">+&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l12.6"></a><span id="l12.6" class="difflineplus">+</span>
<a href="#l12.7"></a><span id="l12.7" class="difflineplus">+&lt;!-- ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l12.8"></a><span id="l12.8" class="difflineplus">+   - Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l12.9"></a><span id="l12.9" class="difflineplus">+   -</span>
<a href="#l12.10"></a><span id="l12.10" class="difflineplus">+   - The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l12.11"></a><span id="l12.11" class="difflineplus">+   - 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineplus">+   - the License. You may obtain a copy of the License at</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+   - http://www.mozilla.org/MPL/</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineplus">+   -</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineplus">+   - Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineplus">+   - WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l12.17"></a><span id="l12.17" class="difflineplus">+   - for the specific language governing rights and limitations under the</span>
<a href="#l12.18"></a><span id="l12.18" class="difflineplus">+   - License.</span>
<a href="#l12.19"></a><span id="l12.19" class="difflineplus">+   -</span>
<a href="#l12.20"></a><span id="l12.20" class="difflineplus">+   - The Original Code is this file as it was released on March 28, 2001.</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineplus">+   -</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineplus">+   - The Initial Developer of the Original Code is</span>
<a href="#l12.23"></a><span id="l12.23" class="difflineplus">+   - David Hyatt.</span>
<a href="#l12.24"></a><span id="l12.24" class="difflineplus">+   - Portions created by the Initial Developer are Copyright (C) 2001</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineplus">+   - the Initial Developer. All Rights Reserved.</span>
<a href="#l12.26"></a><span id="l12.26" class="difflineplus">+   -</span>
<a href="#l12.27"></a><span id="l12.27" class="difflineplus">+   - Contributor(s):</span>
<a href="#l12.28"></a><span id="l12.28" class="difflineplus">+   -   David Hyatt &lt;hyatt@netscape.com&gt; (Original Author of &lt;tabbrowser&gt;)</span>
<a href="#l12.29"></a><span id="l12.29" class="difflineplus">+   -   Mike Connor &lt;mconnor@steelgryphon.com&gt;</span>
<a href="#l12.30"></a><span id="l12.30" class="difflineplus">+   -   Peter Parente &lt;parente@cs.unc.edu&gt;</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineplus">+   -   Giorgio Maone &lt;g.maone@informaction.com&gt;</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineplus">+   -   Asaf Romano &lt;mozilla.mano@sent.com&gt;</span>
<a href="#l12.33"></a><span id="l12.33" class="difflineplus">+   -   Seth Spitzer &lt;sspitzer@mozilla.org&gt;</span>
<a href="#l12.34"></a><span id="l12.34" class="difflineplus">+   -   Simon Bnzli &lt;zeniko@gmail.com&gt;</span>
<a href="#l12.35"></a><span id="l12.35" class="difflineplus">+   -   Michael Ventnor &lt;ventnor.bugzilla@yahoo.com.au&gt;</span>
<a href="#l12.36"></a><span id="l12.36" class="difflineplus">+   -   Mark Pilgrim &lt;pilgrim@gmail.com&gt;</span>
<a href="#l12.37"></a><span id="l12.37" class="difflineplus">+   -   Do Gottwald &lt;dao@mozilla.com&gt;</span>
<a href="#l12.38"></a><span id="l12.38" class="difflineplus">+   -   Paul OShannessy &lt;paul@oshannessy.com&gt;</span>
<a href="#l12.39"></a><span id="l12.39" class="difflineplus">+   -   Florian Queze &lt;florian@instantbird.org&gt;</span>
<a href="#l12.40"></a><span id="l12.40" class="difflineplus">+   -</span>
<a href="#l12.41"></a><span id="l12.41" class="difflineplus">+   - Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l12.42"></a><span id="l12.42" class="difflineplus">+   - either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l12.43"></a><span id="l12.43" class="difflineplus">+   - the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l12.44"></a><span id="l12.44" class="difflineplus">+   - in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l12.45"></a><span id="l12.45" class="difflineplus">+   - of those above. If you wish to allow use of your version of this file only</span>
<a href="#l12.46"></a><span id="l12.46" class="difflineplus">+   - under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l12.47"></a><span id="l12.47" class="difflineplus">+   - use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l12.48"></a><span id="l12.48" class="difflineplus">+   - decision by deleting the provisions above and replace them with the notice</span>
<a href="#l12.49"></a><span id="l12.49" class="difflineplus">+   - and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l12.50"></a><span id="l12.50" class="difflineplus">+   - the provisions above, a recipient may use your version of this file under</span>
<a href="#l12.51"></a><span id="l12.51" class="difflineplus">+   - the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l12.52"></a><span id="l12.52" class="difflineplus">+   -</span>
<a href="#l12.53"></a><span id="l12.53" class="difflineplus">+   - ***** END LICENSE BLOCK ***** --&gt;</span>
<a href="#l12.54"></a><span id="l12.54" class="difflineplus">+</span>
<a href="#l12.55"></a><span id="l12.55" class="difflineplus">+&lt;!DOCTYPE bindings [</span>
<a href="#l12.56"></a><span id="l12.56" class="difflineplus">+  &lt;!ENTITY % tabBrowserDTD SYSTEM &quot;chrome://instantbird/locale/tabbrowser.dtd&quot; &gt;</span>
<a href="#l12.57"></a><span id="l12.57" class="difflineplus">+  %tabBrowserDTD;</span>
<a href="#l12.58"></a><span id="l12.58" class="difflineplus">+</span>
<a href="#l12.59"></a><span id="l12.59" class="difflineplus">+  &lt;!ENTITY % globalDTD SYSTEM &quot;chrome://global/locale/global.dtd&quot;&gt;</span>
<a href="#l12.60"></a><span id="l12.60" class="difflineplus">+  %globalDTD;</span>
<a href="#l12.61"></a><span id="l12.61" class="difflineplus">+]&gt;</span>
<a href="#l12.62"></a><span id="l12.62" class="difflineplus">+</span>
<a href="#l12.63"></a><span id="l12.63" class="difflineplus">+&lt;bindings id=&quot;tabBrowserBindings&quot;</span>
<a href="#l12.64"></a><span id="l12.64" class="difflineplus">+          xmlns=&quot;http://www.mozilla.org/xbl&quot;</span>
<a href="#l12.65"></a><span id="l12.65" class="difflineplus">+          xmlns:xul=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l12.66"></a><span id="l12.66" class="difflineplus">+          xmlns:xbl=&quot;http://www.mozilla.org/xbl&quot;&gt;</span>
<a href="#l12.67"></a><span id="l12.67" class="difflineplus">+</span>
<a href="#l12.68"></a><span id="l12.68" class="difflineplus">+  &lt;binding id=&quot;tabbrowser&quot;&gt;</span>
<a href="#l12.69"></a><span id="l12.69" class="difflineplus">+    &lt;resources&gt;</span>
<a href="#l12.70"></a><span id="l12.70" class="difflineplus">+      &lt;stylesheet src=&quot;chrome://instantbird/content/tabbrowser.css&quot;/&gt;</span>
<a href="#l12.71"></a><span id="l12.71" class="difflineplus">+    &lt;/resources&gt;</span>
<a href="#l12.72"></a><span id="l12.72" class="difflineplus">+</span>
<a href="#l12.73"></a><span id="l12.73" class="difflineplus">+    &lt;content&gt;</span>
<a href="#l12.74"></a><span id="l12.74" class="difflineplus">+&lt;!--      &lt;xul:stringbundle anonid=&quot;tbstringbundle&quot; src=&quot;chrome://browser/locale/tabbrowser.properties&quot;/&gt;--&gt;</span>
<a href="#l12.75"></a><span id="l12.75" class="difflineplus">+      &lt;xul:tabbox anonid=&quot;tabbox&quot; flex=&quot;1&quot; eventnode=&quot;document&quot; xbl:inherits=&quot;handleCtrlPageUpDown&quot;</span>
<a href="#l12.76"></a><span id="l12.76" class="difflineplus">+                  onselect=&quot;if (!('updateCurrentBrowser' in this.parentNode) || event.target.localName != 'tabpanels') return; this.parentNode.updateCurrentBrowser();&quot;&gt;</span>
<a href="#l12.77"></a><span id="l12.77" class="difflineplus">+        &lt;xul:hbox class=&quot;tab-drop-indicator-bar&quot; collapsed=&quot;true&quot; chromedir=&quot;&amp;locale.dir;&quot;</span>
<a href="#l12.78"></a><span id="l12.78" class="difflineplus">+                  ondragover=&quot;this.parentNode.parentNode._onDragOver(event);&quot;</span>
<a href="#l12.79"></a><span id="l12.79" class="difflineplus">+                  ondragleave=&quot;this.parentNode.parentNode._onDragLeave(event);&quot;</span>
<a href="#l12.80"></a><span id="l12.80" class="difflineplus">+                  ondrop=&quot;this.parentNode.parentNode._onDrop(event);&quot;&gt;</span>
<a href="#l12.81"></a><span id="l12.81" class="difflineplus">+          &lt;xul:hbox class=&quot;tab-drop-indicator&quot; mousethrough=&quot;always&quot;/&gt;</span>
<a href="#l12.82"></a><span id="l12.82" class="difflineplus">+        &lt;/xul:hbox&gt;</span>
<a href="#l12.83"></a><span id="l12.83" class="difflineplus">+        &lt;xul:hbox class=&quot;tabbrowser-strip&quot; collapsed=&quot;true&quot; tooltip=&quot;_child&quot; context=&quot;_child&quot;</span>
<a href="#l12.84"></a><span id="l12.84" class="difflineplus">+                  anonid=&quot;strip&quot;</span>
<a href="#l12.85"></a><span id="l12.85" class="difflineplus">+                  ondragstart=&quot;this.parentNode.parentNode._onDragStart(event);&quot;</span>
<a href="#l12.86"></a><span id="l12.86" class="difflineplus">+                  ondragover=&quot;this.parentNode.parentNode._onDragOver(event);&quot;</span>
<a href="#l12.87"></a><span id="l12.87" class="difflineplus">+                  ondrop=&quot;this.parentNode.parentNode._onDrop(event);&quot;</span>
<a href="#l12.88"></a><span id="l12.88" class="difflineplus">+                  ondragend=&quot;this.parentNode.parentNode._onDragEnd(event);&quot;</span>
<a href="#l12.89"></a><span id="l12.89" class="difflineplus">+                  ondragleave=&quot;this.parentNode.parentNode._onDragLeave(event);&quot;&gt;</span>
<a href="#l12.90"></a><span id="l12.90" class="difflineplus">+          &lt;xul:tooltip onpopupshowing=&quot;return this.parentNode.parentNode.parentNode.createTooltip(event);&quot;/&gt;</span>
<a href="#l12.91"></a><span id="l12.91" class="difflineplus">+          &lt;xul:menupopup anonid=&quot;tabContextMenu&quot; onpopupshowing=&quot;this.parentNode.parentNode.parentNode.updatePopupMenu(this);&quot;&gt;</span>
<a href="#l12.92"></a><span id="l12.92" class="difflineplus">+            &lt;xul:menuitem id=&quot;context_newTab&quot; label=&quot;&amp;newTab.label;&quot; accesskey=&quot;&amp;newTab.accesskey;&quot;</span>
<a href="#l12.93"></a><span id="l12.93" class="difflineplus">+                          xbl:inherits=&quot;oncommand=onnewtab&quot;/&gt;</span>
<a href="#l12.94"></a><span id="l12.94" class="difflineplus">+            &lt;xul:menuseparator id=&quot;context_newTabSeparator&quot;/&gt;</span>
<a href="#l12.95"></a><span id="l12.95" class="difflineplus">+            &lt;xul:menuitem id=&quot;context_closeOtherTabs&quot; label=&quot;&amp;closeOtherTabs.label;&quot; accesskey=&quot;&amp;closeOtherTabs.accesskey;&quot;</span>
<a href="#l12.96"></a><span id="l12.96" class="difflineplus">+                          tbattr=&quot;tabbrowser-multiple&quot;</span>
<a href="#l12.97"></a><span id="l12.97" class="difflineplus">+                          oncommand=&quot;var tabbrowser = this.parentNode.parentNode.parentNode.parentNode;</span>
<a href="#l12.98"></a><span id="l12.98" class="difflineplus">+                                     tabbrowser.removeAllTabsBut(tabbrowser.mContextTab);&quot;/&gt;</span>
<a href="#l12.99"></a><span id="l12.99" class="difflineplus">+            &lt;xul:menuseparator/&gt;</span>
<a href="#l12.100"></a><span id="l12.100" class="difflineplus">+            &lt;xul:menuitem id=&quot;context_openTabInWindow&quot; label=&quot;&amp;openTabInNewWindow.label;&quot;</span>
<a href="#l12.101"></a><span id="l12.101" class="difflineplus">+                          accesskey=&quot;&amp;openTabInNewWindow.accesskey;&quot;</span>
<a href="#l12.102"></a><span id="l12.102" class="difflineplus">+                          tbattr=&quot;tabbrowser-multiple&quot;</span>
<a href="#l12.103"></a><span id="l12.103" class="difflineplus">+                          oncommand=&quot;var tabbrowser = this.parentNode.parentNode.parentNode.parentNode;</span>
<a href="#l12.104"></a><span id="l12.104" class="difflineplus">+                                     tabbrowser.replaceTabWithWindow(tabbrowser.mContextTab);&quot;/&gt;</span>
<a href="#l12.105"></a><span id="l12.105" class="difflineplus">+            &lt;xul:menuseparator/&gt;</span>
<a href="#l12.106"></a><span id="l12.106" class="difflineplus">+            &lt;xul:menuitem id=&quot;context_closeTab&quot; label=&quot;&amp;closeTab.label;&quot; accesskey=&quot;&amp;closeTab.accesskey;&quot;</span>
<a href="#l12.107"></a><span id="l12.107" class="difflineplus">+                          tbattr=&quot;tabbrowser-multiple&quot;</span>
<a href="#l12.108"></a><span id="l12.108" class="difflineplus">+                          oncommand=&quot;var tabbrowser = this.parentNode.parentNode.parentNode.parentNode;</span>
<a href="#l12.109"></a><span id="l12.109" class="difflineplus">+                                     tabbrowser.removeTab(tabbrowser.mContextTab);&quot;/&gt;</span>
<a href="#l12.110"></a><span id="l12.110" class="difflineplus">+          &lt;/xul:menupopup&gt;</span>
<a href="#l12.111"></a><span id="l12.111" class="difflineplus">+</span>
<a href="#l12.112"></a><span id="l12.112" class="difflineplus">+          &lt;xul:tabs class=&quot;tabbrowser-tabs&quot; flex=&quot;1&quot;</span>
<a href="#l12.113"></a><span id="l12.113" class="difflineplus">+                    anonid=&quot;tabcontainer&quot;</span>
<a href="#l12.114"></a><span id="l12.114" class="difflineplus">+                    setfocus=&quot;false&quot;</span>
<a href="#l12.115"></a><span id="l12.115" class="difflineplus">+                    onclick=&quot;this.parentNode.parentNode.parentNode.onTabClick(event);&quot;</span>
<a href="#l12.116"></a><span id="l12.116" class="difflineplus">+                    xbl:inherits=&quot;onnewtab&quot;</span>
<a href="#l12.117"></a><span id="l12.117" class="difflineplus">+                    ondblclick=&quot;this.parentNode.parentNode.parentNode.onTabBarDblClick(event);&quot;</span>
<a href="#l12.118"></a><span id="l12.118" class="difflineplus">+                    onclosetab=&quot;var node = this.parentNode;</span>
<a href="#l12.119"></a><span id="l12.119" class="difflineplus">+                                while (node.localName != 'tabbrowser')</span>
<a href="#l12.120"></a><span id="l12.120" class="difflineplus">+                                  node = node.parentNode;</span>
<a href="#l12.121"></a><span id="l12.121" class="difflineplus">+                                node.removeCurrentTab();&quot;&gt;</span>
<a href="#l12.122"></a><span id="l12.122" class="difflineplus">+            &lt;xul:tab selected=&quot;true&quot; validate=&quot;never&quot;</span>
<a href="#l12.123"></a><span id="l12.123" class="difflineplus">+                     onerror=&quot;this.removeAttribute('image');&quot;</span>
<a href="#l12.124"></a><span id="l12.124" class="difflineplus">+                     maxwidth=&quot;250&quot; width=&quot;0&quot; minwidth=&quot;100&quot; flex=&quot;100&quot;</span>
<a href="#l12.125"></a><span id="l12.125" class="difflineplus">+                     class=&quot;tabbrowser-tab&quot; label=&quot;&amp;untitledTab;&quot; crop=&quot;end&quot;/&gt;</span>
<a href="#l12.126"></a><span id="l12.126" class="difflineplus">+          &lt;/xul:tabs&gt;</span>
<a href="#l12.127"></a><span id="l12.127" class="difflineplus">+        &lt;/xul:hbox&gt;</span>
<a href="#l12.128"></a><span id="l12.128" class="difflineplus">+        &lt;xul:tabpanels flex=&quot;1&quot; class=&quot;plain&quot; selectedIndex=&quot;0&quot; anonid=&quot;panelcontainer&quot;&gt;</span>
<a href="#l12.129"></a><span id="l12.129" class="difflineplus">+	  &lt;xul:conversation/&gt;</span>
<a href="#l12.130"></a><span id="l12.130" class="difflineplus">+        &lt;/xul:tabpanels&gt;</span>
<a href="#l12.131"></a><span id="l12.131" class="difflineplus">+      &lt;/xul:tabbox&gt;</span>
<a href="#l12.132"></a><span id="l12.132" class="difflineplus">+      &lt;children/&gt;</span>
<a href="#l12.133"></a><span id="l12.133" class="difflineplus">+    &lt;/content&gt;</span>
<a href="#l12.134"></a><span id="l12.134" class="difflineplus">+    &lt;implementation&gt;</span>
<a href="#l12.135"></a><span id="l12.135" class="difflineplus">+      &lt;field name=&quot;mPrefs&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l12.136"></a><span id="l12.136" class="difflineplus">+        Components.classes['@mozilla.org/preferences-service;1']</span>
<a href="#l12.137"></a><span id="l12.137" class="difflineplus">+                  .getService(Components.interfaces.nsIPrefService)</span>
<a href="#l12.138"></a><span id="l12.138" class="difflineplus">+                  .getBranch(null);</span>
<a href="#l12.139"></a><span id="l12.139" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.140"></a><span id="l12.140" class="difflineplus">+      &lt;field name=&quot;mTabBox&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l12.141"></a><span id="l12.141" class="difflineplus">+        document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;tabbox&quot;);</span>
<a href="#l12.142"></a><span id="l12.142" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.143"></a><span id="l12.143" class="difflineplus">+      &lt;field name=&quot;mTabDropIndicatorBar&quot;&gt;</span>
<a href="#l12.144"></a><span id="l12.144" class="difflineplus">+        this.mTabBox.childNodes[0]</span>
<a href="#l12.145"></a><span id="l12.145" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.146"></a><span id="l12.146" class="difflineplus">+      &lt;field name=&quot;mStrip&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l12.147"></a><span id="l12.147" class="difflineplus">+        document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;strip&quot;);</span>
<a href="#l12.148"></a><span id="l12.148" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.149"></a><span id="l12.149" class="difflineplus">+      &lt;field name=&quot;mTabContainer&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l12.150"></a><span id="l12.150" class="difflineplus">+        document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;tabcontainer&quot;);</span>
<a href="#l12.151"></a><span id="l12.151" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.152"></a><span id="l12.152" class="difflineplus">+      &lt;field name=&quot;mPanelContainer&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l12.153"></a><span id="l12.153" class="difflineplus">+        document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;panelcontainer&quot;);</span>
<a href="#l12.154"></a><span id="l12.154" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.155"></a><span id="l12.155" class="difflineplus">+      &lt;field name=&quot;mTabs&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l12.156"></a><span id="l12.156" class="difflineplus">+        this.mTabContainer.childNodes</span>
<a href="#l12.157"></a><span id="l12.157" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.158"></a><span id="l12.158" class="difflineplus">+#if 0</span>
<a href="#l12.159"></a><span id="l12.159" class="difflineplus">+      &lt;field name=&quot;mStringBundle&quot;&gt;</span>
<a href="#l12.160"></a><span id="l12.160" class="difflineplus">+        document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;tbstringbundle&quot;);</span>
<a href="#l12.161"></a><span id="l12.161" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.162"></a><span id="l12.162" class="difflineplus">+#endif</span>
<a href="#l12.163"></a><span id="l12.163" class="difflineplus">+      &lt;field name=&quot;mCurrentTab&quot;&gt;</span>
<a href="#l12.164"></a><span id="l12.164" class="difflineplus">+        null</span>
<a href="#l12.165"></a><span id="l12.165" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.166"></a><span id="l12.166" class="difflineplus">+      &lt;field name=&quot;mCurrentBrowser&quot;&gt;</span>
<a href="#l12.167"></a><span id="l12.167" class="difflineplus">+        null</span>
<a href="#l12.168"></a><span id="l12.168" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.169"></a><span id="l12.169" class="difflineplus">+      &lt;field name=&quot;mFirstTabIsDummy&quot;&gt;</span>
<a href="#l12.170"></a><span id="l12.170" class="difflineplus">+        true</span>
<a href="#l12.171"></a><span id="l12.171" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.172"></a><span id="l12.172" class="difflineplus">+      &lt;field name=&quot;mContextTab&quot;&gt;</span>
<a href="#l12.173"></a><span id="l12.173" class="difflineplus">+        null</span>
<a href="#l12.174"></a><span id="l12.174" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.175"></a><span id="l12.175" class="difflineplus">+      &lt;field name=&quot;arrowKeysShouldWrap&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l12.176"></a><span id="l12.176" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l12.177"></a><span id="l12.177" class="difflineplus">+        true</span>
<a href="#l12.178"></a><span id="l12.178" class="difflineplus">+#else</span>
<a href="#l12.179"></a><span id="l12.179" class="difflineplus">+        false</span>
<a href="#l12.180"></a><span id="l12.180" class="difflineplus">+#endif</span>
<a href="#l12.181"></a><span id="l12.181" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.182"></a><span id="l12.182" class="difflineplus">+      &lt;field name=&quot;_browsers&quot;&gt;</span>
<a href="#l12.183"></a><span id="l12.183" class="difflineplus">+        null</span>
<a href="#l12.184"></a><span id="l12.184" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.185"></a><span id="l12.185" class="difflineplus">+      &lt;field name=&quot;_conversations&quot;&gt;</span>
<a href="#l12.186"></a><span id="l12.186" class="difflineplus">+        null</span>
<a href="#l12.187"></a><span id="l12.187" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.188"></a><span id="l12.188" class="difflineplus">+</span>
<a href="#l12.189"></a><span id="l12.189" class="difflineplus">+      &lt;field name=&quot;_blockDblClick&quot;&gt;</span>
<a href="#l12.190"></a><span id="l12.190" class="difflineplus">+        false</span>
<a href="#l12.191"></a><span id="l12.191" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.192"></a><span id="l12.192" class="difflineplus">+      &lt;field name=&quot;_autoScrollPopup&quot;&gt;</span>
<a href="#l12.193"></a><span id="l12.193" class="difflineplus">+        null</span>
<a href="#l12.194"></a><span id="l12.194" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.195"></a><span id="l12.195" class="difflineplus">+</span>
<a href="#l12.196"></a><span id="l12.196" class="difflineplus">+      &lt;method name=&quot;getBrowserAtIndex&quot;&gt;</span>
<a href="#l12.197"></a><span id="l12.197" class="difflineplus">+        &lt;parameter name=&quot;aIndex&quot;/&gt;</span>
<a href="#l12.198"></a><span id="l12.198" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.199"></a><span id="l12.199" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.200"></a><span id="l12.200" class="difflineplus">+            return this.browsers[aIndex];</span>
<a href="#l12.201"></a><span id="l12.201" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.202"></a><span id="l12.202" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.203"></a><span id="l12.203" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.204"></a><span id="l12.204" class="difflineplus">+</span>
<a href="#l12.205"></a><span id="l12.205" class="difflineplus">+      &lt;method name=&quot;getConversationAtIndex&quot;&gt;</span>
<a href="#l12.206"></a><span id="l12.206" class="difflineplus">+        &lt;parameter name=&quot;aIndex&quot;/&gt;</span>
<a href="#l12.207"></a><span id="l12.207" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.208"></a><span id="l12.208" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.209"></a><span id="l12.209" class="difflineplus">+            return this.conversations[aIndex];</span>
<a href="#l12.210"></a><span id="l12.210" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.211"></a><span id="l12.211" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.212"></a><span id="l12.212" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.213"></a><span id="l12.213" class="difflineplus">+</span>
<a href="#l12.214"></a><span id="l12.214" class="difflineplus">+      &lt;method name=&quot;updateTitlebar&quot;&gt;</span>
<a href="#l12.215"></a><span id="l12.215" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.216"></a><span id="l12.216" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.217"></a><span id="l12.217" class="difflineplus">+            var newTitle = &quot;&quot;;</span>
<a href="#l12.218"></a><span id="l12.218" class="difflineplus">+            var docTitle;</span>
<a href="#l12.219"></a><span id="l12.219" class="difflineplus">+            var docElement = this.ownerDocument.documentElement;</span>
<a href="#l12.220"></a><span id="l12.220" class="difflineplus">+            var sep = docElement.getAttribute(&quot;titlemenuseparator&quot;);</span>
<a href="#l12.221"></a><span id="l12.221" class="difflineplus">+</span>
<a href="#l12.222"></a><span id="l12.222" class="difflineplus">+            if (this.mCurrentConversation.conv)</span>
<a href="#l12.223"></a><span id="l12.223" class="difflineplus">+              docTitle = this.mCurrentConversation.conv.title;</span>
<a href="#l12.224"></a><span id="l12.224" class="difflineplus">+</span>
<a href="#l12.225"></a><span id="l12.225" class="difflineplus">+            if (!docTitle)</span>
<a href="#l12.226"></a><span id="l12.226" class="difflineplus">+              docTitle = docElement.getAttribute(&quot;titledefault&quot;);</span>
<a href="#l12.227"></a><span id="l12.227" class="difflineplus">+</span>
<a href="#l12.228"></a><span id="l12.228" class="difflineplus">+            var modifier = docElement.getAttribute(&quot;titlemodifier&quot;);</span>
<a href="#l12.229"></a><span id="l12.229" class="difflineplus">+            if (docTitle) {</span>
<a href="#l12.230"></a><span id="l12.230" class="difflineplus">+              newTitle += docElement.getAttribute(&quot;titlepreface&quot;);</span>
<a href="#l12.231"></a><span id="l12.231" class="difflineplus">+              newTitle += docTitle;</span>
<a href="#l12.232"></a><span id="l12.232" class="difflineplus">+              if (modifier)</span>
<a href="#l12.233"></a><span id="l12.233" class="difflineplus">+                newTitle += sep;</span>
<a href="#l12.234"></a><span id="l12.234" class="difflineplus">+            }</span>
<a href="#l12.235"></a><span id="l12.235" class="difflineplus">+            newTitle += modifier;</span>
<a href="#l12.236"></a><span id="l12.236" class="difflineplus">+</span>
<a href="#l12.237"></a><span id="l12.237" class="difflineplus">+            this.ownerDocument.title = newTitle;</span>
<a href="#l12.238"></a><span id="l12.238" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.239"></a><span id="l12.239" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.240"></a><span id="l12.240" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.241"></a><span id="l12.241" class="difflineplus">+</span>
<a href="#l12.242"></a><span id="l12.242" class="difflineplus">+      &lt;method name=&quot;updatePopupMenu&quot;&gt;</span>
<a href="#l12.243"></a><span id="l12.243" class="difflineplus">+        &lt;parameter name=&quot;aPopupMenu&quot;/&gt;</span>
<a href="#l12.244"></a><span id="l12.244" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.245"></a><span id="l12.245" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.246"></a><span id="l12.246" class="difflineplus">+            this.mContextTab = document.popupNode.localName == &quot;tab&quot; ?</span>
<a href="#l12.247"></a><span id="l12.247" class="difflineplus">+                               document.popupNode : this.selectedTab;</span>
<a href="#l12.248"></a><span id="l12.248" class="difflineplus">+            var disabled = this.mTabs.length == 1;</span>
<a href="#l12.249"></a><span id="l12.249" class="difflineplus">+            var menuItems = aPopupMenu.getElementsByAttribute(&quot;tbattr&quot;, &quot;tabbrowser-multiple&quot;);</span>
<a href="#l12.250"></a><span id="l12.250" class="difflineplus">+            for (var i = 0; i &lt; menuItems.length; i++)</span>
<a href="#l12.251"></a><span id="l12.251" class="difflineplus">+              menuItems[i].disabled = disabled;</span>
<a href="#l12.252"></a><span id="l12.252" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.253"></a><span id="l12.253" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.254"></a><span id="l12.254" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.255"></a><span id="l12.255" class="difflineplus">+</span>
<a href="#l12.256"></a><span id="l12.256" class="difflineplus">+      &lt;method name=&quot;updateCurrentBrowser&quot;&gt;</span>
<a href="#l12.257"></a><span id="l12.257" class="difflineplus">+        &lt;parameter name=&quot;aForceUpdate&quot;/&gt;</span>
<a href="#l12.258"></a><span id="l12.258" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.259"></a><span id="l12.259" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.260"></a><span id="l12.260" class="difflineplus">+            var newConversation = this.getConversationAtIndex(this.mTabContainer.selectedIndex);</span>
<a href="#l12.261"></a><span id="l12.261" class="difflineplus">+            if (this.mCurrentConversation == newConversation &amp;&amp; !aForceUpdate)</span>
<a href="#l12.262"></a><span id="l12.262" class="difflineplus">+              return;</span>
<a href="#l12.263"></a><span id="l12.263" class="difflineplus">+</span>
<a href="#l12.264"></a><span id="l12.264" class="difflineplus">+            this.mCurrentConversation = newConversation;</span>
<a href="#l12.265"></a><span id="l12.265" class="difflineplus">+            this.mCurrentBrowser = newConversation.browser;</span>
<a href="#l12.266"></a><span id="l12.266" class="difflineplus">+            this.mCurrentTab = this.selectedTab;</span>
<a href="#l12.267"></a><span id="l12.267" class="difflineplus">+</span>
<a href="#l12.268"></a><span id="l12.268" class="difflineplus">+            // Update the window title.</span>
<a href="#l12.269"></a><span id="l12.269" class="difflineplus">+            this.updateTitlebar();</span>
<a href="#l12.270"></a><span id="l12.270" class="difflineplus">+</span>
<a href="#l12.271"></a><span id="l12.271" class="difflineplus">+            // We've selected the new tab, so go ahead and notify listeners.</span>
<a href="#l12.272"></a><span id="l12.272" class="difflineplus">+            var event = document.createEvent(&quot;Events&quot;);</span>
<a href="#l12.273"></a><span id="l12.273" class="difflineplus">+            event.initEvent(&quot;TabSelect&quot;, true, false);</span>
<a href="#l12.274"></a><span id="l12.274" class="difflineplus">+            this.mCurrentTab.dispatchEvent(event);</span>
<a href="#l12.275"></a><span id="l12.275" class="difflineplus">+</span>
<a href="#l12.276"></a><span id="l12.276" class="difflineplus">+            if (document.commandDispatcher.focusedElement &amp;&amp;</span>
<a href="#l12.277"></a><span id="l12.277" class="difflineplus">+                document.commandDispatcher.focusedElement.parentNode ==</span>
<a href="#l12.278"></a><span id="l12.278" class="difflineplus">+                this.mCurrentTab.parentNode) {</span>
<a href="#l12.279"></a><span id="l12.279" class="difflineplus">+              // The focus is on a tab in the same tab panel</span>
<a href="#l12.280"></a><span id="l12.280" class="difflineplus">+              return;  // If focus was on a tab, switching tabs focuses the new tab</span>
<a href="#l12.281"></a><span id="l12.281" class="difflineplus">+            }</span>
<a href="#l12.282"></a><span id="l12.282" class="difflineplus">+</span>
<a href="#l12.283"></a><span id="l12.283" class="difflineplus">+            this.mCurrentConversation.focus();</span>
<a href="#l12.284"></a><span id="l12.284" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.285"></a><span id="l12.285" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.286"></a><span id="l12.286" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.287"></a><span id="l12.287" class="difflineplus">+</span>
<a href="#l12.288"></a><span id="l12.288" class="difflineplus">+      &lt;method name=&quot;onTabClick&quot;&gt;</span>
<a href="#l12.289"></a><span id="l12.289" class="difflineplus">+        &lt;parameter name=&quot;event&quot;/&gt;</span>
<a href="#l12.290"></a><span id="l12.290" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.291"></a><span id="l12.291" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.292"></a><span id="l12.292" class="difflineplus">+            if (event.button != 1 || event.target.localName != 'tab')</span>
<a href="#l12.293"></a><span id="l12.293" class="difflineplus">+              return;</span>
<a href="#l12.294"></a><span id="l12.294" class="difflineplus">+</span>
<a href="#l12.295"></a><span id="l12.295" class="difflineplus">+            if (this.mTabs.length &gt; 1)</span>
<a href="#l12.296"></a><span id="l12.296" class="difflineplus">+              this.removeTab(event.target);</span>
<a href="#l12.297"></a><span id="l12.297" class="difflineplus">+</span>
<a href="#l12.298"></a><span id="l12.298" class="difflineplus">+            event.stopPropagation();</span>
<a href="#l12.299"></a><span id="l12.299" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.300"></a><span id="l12.300" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.301"></a><span id="l12.301" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.302"></a><span id="l12.302" class="difflineplus">+</span>
<a href="#l12.303"></a><span id="l12.303" class="difflineplus">+      &lt;method name=&quot;setStripVisibilityTo&quot;&gt;</span>
<a href="#l12.304"></a><span id="l12.304" class="difflineplus">+        &lt;parameter name=&quot;aShow&quot;/&gt;</span>
<a href="#l12.305"></a><span id="l12.305" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.306"></a><span id="l12.306" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l12.307"></a><span id="l12.307" class="difflineplus">+          this.mStrip.collapsed = !aShow;</span>
<a href="#l12.308"></a><span id="l12.308" class="difflineplus">+</span>
<a href="#l12.309"></a><span id="l12.309" class="difflineplus">+#if 0</span>
<a href="#l12.310"></a><span id="l12.310" class="difflineplus">+          if (aShow) {</span>
<a href="#l12.311"></a><span id="l12.311" class="difflineplus">+            // XXXdwh temporary unclean dependency on specific menu items in navigator.xul</span>
<a href="#l12.312"></a><span id="l12.312" class="difflineplus">+            document.getElementById(&quot;menu_closeWindow&quot;).hidden = false;</span>
<a href="#l12.313"></a><span id="l12.313" class="difflineplus">+            document.getElementById(&quot;menu_close&quot;).setAttribute(&quot;label&quot;, this.mStringBundle.getString(&quot;tabs.closeTab&quot;));</span>
<a href="#l12.314"></a><span id="l12.314" class="difflineplus">+          }</span>
<a href="#l12.315"></a><span id="l12.315" class="difflineplus">+          else {</span>
<a href="#l12.316"></a><span id="l12.316" class="difflineplus">+            // XXXdwh temporary unclean dependency on specific menu items in navigator.xul</span>
<a href="#l12.317"></a><span id="l12.317" class="difflineplus">+            document.getElementById(&quot;menu_closeWindow&quot;).hidden = true;</span>
<a href="#l12.318"></a><span id="l12.318" class="difflineplus">+            document.getElementById(&quot;menu_close&quot;).setAttribute(&quot;label&quot;, this.mStringBundle.getString(&quot;tabs.close&quot;));</span>
<a href="#l12.319"></a><span id="l12.319" class="difflineplus">+          }</span>
<a href="#l12.320"></a><span id="l12.320" class="difflineplus">+#endif</span>
<a href="#l12.321"></a><span id="l12.321" class="difflineplus">+        ]]&gt;</span>
<a href="#l12.322"></a><span id="l12.322" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.323"></a><span id="l12.323" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.324"></a><span id="l12.324" class="difflineplus">+</span>
<a href="#l12.325"></a><span id="l12.325" class="difflineplus">+      &lt;method name=&quot;getStripVisibility&quot;&gt;</span>
<a href="#l12.326"></a><span id="l12.326" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.327"></a><span id="l12.327" class="difflineplus">+          return !this.mStrip.collapsed;</span>
<a href="#l12.328"></a><span id="l12.328" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.329"></a><span id="l12.329" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.330"></a><span id="l12.330" class="difflineplus">+</span>
<a href="#l12.331"></a><span id="l12.331" class="difflineplus">+      &lt;method name=&quot;addConversation&quot;&gt;</span>
<a href="#l12.332"></a><span id="l12.332" class="difflineplus">+        &lt;parameter name=&quot;aConv&quot;/&gt;</span>
<a href="#l12.333"></a><span id="l12.333" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.334"></a><span id="l12.334" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.335"></a><span id="l12.335" class="difflineplus">+            this._browsers = null; // invalidate caches</span>
<a href="#l12.336"></a><span id="l12.336" class="difflineplus">+            this._conversations = null;</span>
<a href="#l12.337"></a><span id="l12.337" class="difflineplus">+</span>
<a href="#l12.338"></a><span id="l12.338" class="difflineplus">+            var t;</span>
<a href="#l12.339"></a><span id="l12.339" class="difflineplus">+            if (this.mFirstTabIsDummy)</span>
<a href="#l12.340"></a><span id="l12.340" class="difflineplus">+              t = this.mTabContainer.firstChild;</span>
<a href="#l12.341"></a><span id="l12.341" class="difflineplus">+            else</span>
<a href="#l12.342"></a><span id="l12.342" class="difflineplus">+              t = this.mTabContainer.addTab();</span>
<a href="#l12.343"></a><span id="l12.343" class="difflineplus">+            t.setAttribute(&quot;label&quot;, aConv.title);</span>
<a href="#l12.344"></a><span id="l12.344" class="difflineplus">+</span>
<a href="#l12.345"></a><span id="l12.345" class="difflineplus">+            // invalidate cache, because mTabContainer is about to change</span>
<a href="#l12.346"></a><span id="l12.346" class="difflineplus">+            this._browsers = null; </span>
<a href="#l12.347"></a><span id="l12.347" class="difflineplus">+            this._conversations = null;</span>
<a href="#l12.348"></a><span id="l12.348" class="difflineplus">+</span>
<a href="#l12.349"></a><span id="l12.349" class="difflineplus">+            //b.setAttribute(&quot;autoscrollpopup&quot;, this._autoScrollPopup.id); FIXME</span>
<a href="#l12.350"></a><span id="l12.350" class="difflineplus">+</span>
<a href="#l12.351"></a><span id="l12.351" class="difflineplus">+            var conv;</span>
<a href="#l12.352"></a><span id="l12.352" class="difflineplus">+            if (this.mFirstTabIsDummy)</span>
<a href="#l12.353"></a><span id="l12.353" class="difflineplus">+              conv = this.mPanelContainer.firstChild;</span>
<a href="#l12.354"></a><span id="l12.354" class="difflineplus">+            else {</span>
<a href="#l12.355"></a><span id="l12.355" class="difflineplus">+              conv = document.createElementNS(</span>
<a href="#l12.356"></a><span id="l12.356" class="difflineplus">+                &quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;,</span>
<a href="#l12.357"></a><span id="l12.357" class="difflineplus">+                                              &quot;conversation&quot;);</span>
<a href="#l12.358"></a><span id="l12.358" class="difflineplus">+              this.mPanelContainer.appendChild(conv);</span>
<a href="#l12.359"></a><span id="l12.359" class="difflineplus">+              if (this.mStrip.collapsed)</span>
<a href="#l12.360"></a><span id="l12.360" class="difflineplus">+                this.setStripVisibilityTo(true);</span>
<a href="#l12.361"></a><span id="l12.361" class="difflineplus">+            }</span>
<a href="#l12.362"></a><span id="l12.362" class="difflineplus">+            conv.setAttribute(&quot;contenttooltip&quot;, this.getAttribute(&quot;contenttooltip&quot;));</span>
<a href="#l12.363"></a><span id="l12.363" class="difflineplus">+            conv.setAttribute(&quot;contentcontextmenu&quot;, this.getAttribute(&quot;contentcontextmenu&quot;));</span>
<a href="#l12.364"></a><span id="l12.364" class="difflineplus">+            conv.conv = aConv;</span>
<a href="#l12.365"></a><span id="l12.365" class="difflineplus">+            conv.tab = t;</span>
<a href="#l12.366"></a><span id="l12.366" class="difflineplus">+</span>
<a href="#l12.367"></a><span id="l12.367" class="difflineplus">+            if (this.mStrip.collapsed &amp;&amp;</span>
<a href="#l12.368"></a><span id="l12.368" class="difflineplus">+                !this.mPrefs.getBoolPref(&quot;browser.tabs.autoHide&quot;))</span>
<a href="#l12.369"></a><span id="l12.369" class="difflineplus">+              this.setStripVisibilityTo(true);</span>
<a href="#l12.370"></a><span id="l12.370" class="difflineplus">+            this.mFirstTabIsDummy = false;</span>
<a href="#l12.371"></a><span id="l12.371" class="difflineplus">+</span>
<a href="#l12.372"></a><span id="l12.372" class="difflineplus">+            var uniqueId = &quot;panel&quot; + Date.now() + t._tPos;</span>
<a href="#l12.373"></a><span id="l12.373" class="difflineplus">+            this.mPanelContainer.lastChild.id = uniqueId;</span>
<a href="#l12.374"></a><span id="l12.374" class="difflineplus">+            t.linkedPanel = uniqueId;</span>
<a href="#l12.375"></a><span id="l12.375" class="difflineplus">+            t.linkedConversation = conv;</span>
<a href="#l12.376"></a><span id="l12.376" class="difflineplus">+            t.linkedBrowser = conv.browser;</span>
<a href="#l12.377"></a><span id="l12.377" class="difflineplus">+            this.updateCurrentBrowser(true);</span>
<a href="#l12.378"></a><span id="l12.378" class="difflineplus">+</span>
<a href="#l12.379"></a><span id="l12.379" class="difflineplus">+            return conv;</span>
<a href="#l12.380"></a><span id="l12.380" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.381"></a><span id="l12.381" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.382"></a><span id="l12.382" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.383"></a><span id="l12.383" class="difflineplus">+</span>
<a href="#l12.384"></a><span id="l12.384" class="difflineplus">+      &lt;method name=&quot;warnAboutClosingTabs&quot;&gt;</span>
<a href="#l12.385"></a><span id="l12.385" class="difflineplus">+      &lt;parameter name=&quot;aAll&quot;/&gt;</span>
<a href="#l12.386"></a><span id="l12.386" class="difflineplus">+      &lt;body&gt;</span>
<a href="#l12.387"></a><span id="l12.387" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l12.388"></a><span id="l12.388" class="difflineplus">+          return true;</span>
<a href="#l12.389"></a><span id="l12.389" class="difflineplus">+#if 0</span>
<a href="#l12.390"></a><span id="l12.390" class="difflineplus">+          var numTabs = this.mTabContainer.childNodes.length;</span>
<a href="#l12.391"></a><span id="l12.391" class="difflineplus">+          var reallyClose = true;</span>
<a href="#l12.392"></a><span id="l12.392" class="difflineplus">+          if (numTabs &lt;= 1)</span>
<a href="#l12.393"></a><span id="l12.393" class="difflineplus">+            return reallyClose;</span>
<a href="#l12.394"></a><span id="l12.394" class="difflineplus">+</span>
<a href="#l12.395"></a><span id="l12.395" class="difflineplus">+          const pref = &quot;browser.tabs.warnOnClose&quot;;</span>
<a href="#l12.396"></a><span id="l12.396" class="difflineplus">+          var shouldPrompt = false; // FIXME this.mPrefs.getBoolPref(pref);</span>
<a href="#l12.397"></a><span id="l12.397" class="difflineplus">+</span>
<a href="#l12.398"></a><span id="l12.398" class="difflineplus">+          if (shouldPrompt) {</span>
<a href="#l12.399"></a><span id="l12.399" class="difflineplus">+            var promptService = Components.classes[&quot;@mozilla.org/embedcomp/prompt-service;1&quot;]</span>
<a href="#l12.400"></a><span id="l12.400" class="difflineplus">+                                          .getService(Components.interfaces.nsIPromptService);</span>
<a href="#l12.401"></a><span id="l12.401" class="difflineplus">+</span>
<a href="#l12.402"></a><span id="l12.402" class="difflineplus">+            //default to true: if it were false, we wouldn't get this far</span>
<a href="#l12.403"></a><span id="l12.403" class="difflineplus">+            var warnOnClose = { value:true };</span>
<a href="#l12.404"></a><span id="l12.404" class="difflineplus">+            var bundle = this.mStringBundle;</span>
<a href="#l12.405"></a><span id="l12.405" class="difflineplus">+            var tabsToClose = numTabs;  //number of tabs to be removed</span>
<a href="#l12.406"></a><span id="l12.406" class="difflineplus">+            if (!aAll)</span>
<a href="#l12.407"></a><span id="l12.407" class="difflineplus">+              --tabsToClose;</span>
<a href="#l12.408"></a><span id="l12.408" class="difflineplus">+</span>
<a href="#l12.409"></a><span id="l12.409" class="difflineplus">+            var messageKey = (tabsToClose == 1) ? &quot;tabs.closeWarningOneTab&quot; : &quot;tabs.closeWarningMultipleTabs&quot;;</span>
<a href="#l12.410"></a><span id="l12.410" class="difflineplus">+            var closeKey = (tabsToClose == 1) ? &quot;tabs.closeButtonOne&quot; : &quot;tabs.closeButtonMultiple&quot;;</span>
<a href="#l12.411"></a><span id="l12.411" class="difflineplus">+            // focus the window before prompting.</span>
<a href="#l12.412"></a><span id="l12.412" class="difflineplus">+            // this will raise any minimized window, which will</span>
<a href="#l12.413"></a><span id="l12.413" class="difflineplus">+            // make it obvious which window the prompt is for and will</span>
<a href="#l12.414"></a><span id="l12.414" class="difflineplus">+            // solve the problem of windows &quot;obscuring&quot; the prompt.</span>
<a href="#l12.415"></a><span id="l12.415" class="difflineplus">+            // see bug #350299 for more details</span>
<a href="#l12.416"></a><span id="l12.416" class="difflineplus">+            window.focus();</span>
<a href="#l12.417"></a><span id="l12.417" class="difflineplus">+            var buttonPressed = promptService.confirmEx(window,</span>
<a href="#l12.418"></a><span id="l12.418" class="difflineplus">+                                                        bundle.getString('tabs.closeWarningTitle'),</span>
<a href="#l12.419"></a><span id="l12.419" class="difflineplus">+                                                        bundle.getFormattedString(messageKey, [tabsToClose]),</span>
<a href="#l12.420"></a><span id="l12.420" class="difflineplus">+                                                        (promptService.BUTTON_TITLE_IS_STRING * promptService.BUTTON_POS_0)</span>
<a href="#l12.421"></a><span id="l12.421" class="difflineplus">+                                                        + (promptService.BUTTON_TITLE_CANCEL * promptService.BUTTON_POS_1),</span>
<a href="#l12.422"></a><span id="l12.422" class="difflineplus">+                                                        bundle.getString(closeKey),</span>
<a href="#l12.423"></a><span id="l12.423" class="difflineplus">+                                                        null, null,</span>
<a href="#l12.424"></a><span id="l12.424" class="difflineplus">+                                                        bundle.getString('tabs.closeWarningPromptMe'),</span>
<a href="#l12.425"></a><span id="l12.425" class="difflineplus">+                                                        warnOnClose);</span>
<a href="#l12.426"></a><span id="l12.426" class="difflineplus">+            reallyClose = (buttonPressed == 0);</span>
<a href="#l12.427"></a><span id="l12.427" class="difflineplus">+            // don't set the pref unless they press OK and it's false</span>
<a href="#l12.428"></a><span id="l12.428" class="difflineplus">+            if (reallyClose &amp;&amp; !warnOnClose.value)</span>
<a href="#l12.429"></a><span id="l12.429" class="difflineplus">+              this.mPrefs.setBoolPref(pref, false);</span>
<a href="#l12.430"></a><span id="l12.430" class="difflineplus">+          }</span>
<a href="#l12.431"></a><span id="l12.431" class="difflineplus">+          return reallyClose;</span>
<a href="#l12.432"></a><span id="l12.432" class="difflineplus">+#endif</span>
<a href="#l12.433"></a><span id="l12.433" class="difflineplus">+        ]]&gt;</span>
<a href="#l12.434"></a><span id="l12.434" class="difflineplus">+      &lt;/body&gt;</span>
<a href="#l12.435"></a><span id="l12.435" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.436"></a><span id="l12.436" class="difflineplus">+</span>
<a href="#l12.437"></a><span id="l12.437" class="difflineplus">+      &lt;method name=&quot;removeAllTabsBut&quot;&gt;</span>
<a href="#l12.438"></a><span id="l12.438" class="difflineplus">+        &lt;parameter name=&quot;aTab&quot;/&gt;</span>
<a href="#l12.439"></a><span id="l12.439" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.440"></a><span id="l12.440" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.441"></a><span id="l12.441" class="difflineplus">+            if (this.warnAboutClosingTabs(false)) {</span>
<a href="#l12.442"></a><span id="l12.442" class="difflineplus">+              this.selectedTab = aTab;</span>
<a href="#l12.443"></a><span id="l12.443" class="difflineplus">+</span>
<a href="#l12.444"></a><span id="l12.444" class="difflineplus">+              for (let i = this.mTabs.length - 1; i &gt;= 0; --i) {</span>
<a href="#l12.445"></a><span id="l12.445" class="difflineplus">+                if (this.mTabs[i] != aTab)</span>
<a href="#l12.446"></a><span id="l12.446" class="difflineplus">+                  this.removeTab(this.mTabs[i]);</span>
<a href="#l12.447"></a><span id="l12.447" class="difflineplus">+              }</span>
<a href="#l12.448"></a><span id="l12.448" class="difflineplus">+            }</span>
<a href="#l12.449"></a><span id="l12.449" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.450"></a><span id="l12.450" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.451"></a><span id="l12.451" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.452"></a><span id="l12.452" class="difflineplus">+</span>
<a href="#l12.453"></a><span id="l12.453" class="difflineplus">+      &lt;method name=&quot;removeCurrentTab&quot;&gt;</span>
<a href="#l12.454"></a><span id="l12.454" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.455"></a><span id="l12.455" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.456"></a><span id="l12.456" class="difflineplus">+            this.removeTab(this.mCurrentTab);</span>
<a href="#l12.457"></a><span id="l12.457" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.458"></a><span id="l12.458" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.459"></a><span id="l12.459" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.460"></a><span id="l12.460" class="difflineplus">+</span>
<a href="#l12.461"></a><span id="l12.461" class="difflineplus">+      &lt;field name=&quot;_removingTabs&quot;&gt;</span>
<a href="#l12.462"></a><span id="l12.462" class="difflineplus">+        []</span>
<a href="#l12.463"></a><span id="l12.463" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.464"></a><span id="l12.464" class="difflineplus">+</span>
<a href="#l12.465"></a><span id="l12.465" class="difflineplus">+      &lt;method name=&quot;removeTab&quot;&gt;</span>
<a href="#l12.466"></a><span id="l12.466" class="difflineplus">+        &lt;parameter name=&quot;aTab&quot;/&gt;</span>
<a href="#l12.467"></a><span id="l12.467" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.468"></a><span id="l12.468" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.469"></a><span id="l12.469" class="difflineplus">+            this._endRemoveTab(this._beginRemoveTab(aTab, false, true));</span>
<a href="#l12.470"></a><span id="l12.470" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.471"></a><span id="l12.471" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.472"></a><span id="l12.472" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.473"></a><span id="l12.473" class="difflineplus">+</span>
<a href="#l12.474"></a><span id="l12.474" class="difflineplus">+      &lt;!-- Tab close requests are ignored if the window is closing anyway,</span>
<a href="#l12.475"></a><span id="l12.475" class="difflineplus">+           e.g. when holding Ctrl+W. --&gt;</span>
<a href="#l12.476"></a><span id="l12.476" class="difflineplus">+      &lt;field name=&quot;_windowIsClosing&quot;&gt;</span>
<a href="#l12.477"></a><span id="l12.477" class="difflineplus">+        false</span>
<a href="#l12.478"></a><span id="l12.478" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.479"></a><span id="l12.479" class="difflineplus">+</span>
<a href="#l12.480"></a><span id="l12.480" class="difflineplus">+      &lt;!-- Returns everything that _endRemoveTab needs in an array. --&gt;</span>
<a href="#l12.481"></a><span id="l12.481" class="difflineplus">+      &lt;method name=&quot;_beginRemoveTab&quot;&gt;</span>
<a href="#l12.482"></a><span id="l12.482" class="difflineplus">+        &lt;parameter name=&quot;aTab&quot;/&gt;</span>
<a href="#l12.483"></a><span id="l12.483" class="difflineplus">+        &lt;parameter name=&quot;aTabWillBeMoved&quot;/&gt;</span>
<a href="#l12.484"></a><span id="l12.484" class="difflineplus">+        &lt;parameter name=&quot;aCloseWindowFastpath&quot;/&gt;</span>
<a href="#l12.485"></a><span id="l12.485" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.486"></a><span id="l12.486" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.487"></a><span id="l12.487" class="difflineplus">+            if (this._removingTabs.indexOf(aTab) &gt; -1 || this._windowIsClosing)</span>
<a href="#l12.488"></a><span id="l12.488" class="difflineplus">+              return null;</span>
<a href="#l12.489"></a><span id="l12.489" class="difflineplus">+</span>
<a href="#l12.490"></a><span id="l12.490" class="difflineplus">+            var browser = this.getBrowserForTab(aTab);</span>
<a href="#l12.491"></a><span id="l12.491" class="difflineplus">+</span>
<a href="#l12.492"></a><span id="l12.492" class="difflineplus">+            if (!aTabWillBeMoved) {</span>
<a href="#l12.493"></a><span id="l12.493" class="difflineplus">+              let ds = browser.docShell;</span>
<a href="#l12.494"></a><span id="l12.494" class="difflineplus">+              if (ds.contentViewer &amp;&amp; !ds.contentViewer.permitUnload())</span>
<a href="#l12.495"></a><span id="l12.495" class="difflineplus">+                return null;</span>
<a href="#l12.496"></a><span id="l12.496" class="difflineplus">+            }</span>
<a href="#l12.497"></a><span id="l12.497" class="difflineplus">+</span>
<a href="#l12.498"></a><span id="l12.498" class="difflineplus">+            var closeWindow = false;</span>
<a href="#l12.499"></a><span id="l12.499" class="difflineplus">+            if (this.mTabs.length - this._removingTabs.length == 1) {</span>
<a href="#l12.500"></a><span id="l12.500" class="difflineplus">+              closeWindow = true;</span>
<a href="#l12.501"></a><span id="l12.501" class="difflineplus">+              if (aCloseWindowFastpath &amp;&amp;</span>
<a href="#l12.502"></a><span id="l12.502" class="difflineplus">+                  this._removingTabs.length == 0 &amp;&amp;</span>
<a href="#l12.503"></a><span id="l12.503" class="difflineplus">+                  (this._windowIsClosing = window.closeWindow(true)))</span>
<a href="#l12.504"></a><span id="l12.504" class="difflineplus">+                return null;</span>
<a href="#l12.505"></a><span id="l12.505" class="difflineplus">+</span>
<a href="#l12.506"></a><span id="l12.506" class="difflineplus">+              let autohide = this.mPrefs.getBoolPref(&quot;browser.tabs.autoHide&quot;);</span>
<a href="#l12.507"></a><span id="l12.507" class="difflineplus">+              let tabStripHide = !window.toolbar.visible;</span>
<a href="#l12.508"></a><span id="l12.508" class="difflineplus">+              if (autohide || tabStripHide)</span>
<a href="#l12.509"></a><span id="l12.509" class="difflineplus">+                this.setStripVisibilityTo(false);</span>
<a href="#l12.510"></a><span id="l12.510" class="difflineplus">+            }</span>
<a href="#l12.511"></a><span id="l12.511" class="difflineplus">+</span>
<a href="#l12.512"></a><span id="l12.512" class="difflineplus">+            this._removingTabs.push(aTab);</span>
<a href="#l12.513"></a><span id="l12.513" class="difflineplus">+</span>
<a href="#l12.514"></a><span id="l12.514" class="difflineplus">+            // We're committed to closing the tab now.</span>
<a href="#l12.515"></a><span id="l12.515" class="difflineplus">+            // Dispatch a notification.</span>
<a href="#l12.516"></a><span id="l12.516" class="difflineplus">+            // We dispatch it before any teardown so that event listeners can</span>
<a href="#l12.517"></a><span id="l12.517" class="difflineplus">+            // inspect the tab that's about to close.</span>
<a href="#l12.518"></a><span id="l12.518" class="difflineplus">+            var evt = document.createEvent(&quot;UIEvent&quot;);</span>
<a href="#l12.519"></a><span id="l12.519" class="difflineplus">+            evt.initUIEvent(&quot;TabClose&quot;, true, false, window, aTabWillBeMoved ? 1 : 0);</span>
<a href="#l12.520"></a><span id="l12.520" class="difflineplus">+            aTab.dispatchEvent(evt);</span>
<a href="#l12.521"></a><span id="l12.521" class="difflineplus">+</span>
<a href="#l12.522"></a><span id="l12.522" class="difflineplus">+            return [aTab, closeWindow];</span>
<a href="#l12.523"></a><span id="l12.523" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.524"></a><span id="l12.524" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.525"></a><span id="l12.525" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.526"></a><span id="l12.526" class="difflineplus">+</span>
<a href="#l12.527"></a><span id="l12.527" class="difflineplus">+      &lt;method name=&quot;_endRemoveTab&quot;&gt;</span>
<a href="#l12.528"></a><span id="l12.528" class="difflineplus">+        &lt;parameter name=&quot;args&quot;/&gt;</span>
<a href="#l12.529"></a><span id="l12.529" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.530"></a><span id="l12.530" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.531"></a><span id="l12.531" class="difflineplus">+            if (!args)</span>
<a href="#l12.532"></a><span id="l12.532" class="difflineplus">+              return;</span>
<a href="#l12.533"></a><span id="l12.533" class="difflineplus">+            var [aTab, aCloseWindow] = args;</span>
<a href="#l12.534"></a><span id="l12.534" class="difflineplus">+</span>
<a href="#l12.535"></a><span id="l12.535" class="difflineplus">+            // update the UI early for responsiveness</span>
<a href="#l12.536"></a><span id="l12.536" class="difflineplus">+            aTab.collapsed = true;</span>
<a href="#l12.537"></a><span id="l12.537" class="difflineplus">+</span>
<a href="#l12.538"></a><span id="l12.538" class="difflineplus">+            this.tabContainer._fillTrailingGap();</span>
<a href="#l12.539"></a><span id="l12.539" class="difflineplus">+            this._blurTab(aTab);</span>
<a href="#l12.540"></a><span id="l12.540" class="difflineplus">+</span>
<a href="#l12.541"></a><span id="l12.541" class="difflineplus">+            this._removingTabs.splice(this._removingTabs.indexOf(aTab), 1);</span>
<a href="#l12.542"></a><span id="l12.542" class="difflineplus">+</span>
<a href="#l12.543"></a><span id="l12.543" class="difflineplus">+            if (aCloseWindow) {</span>
<a href="#l12.544"></a><span id="l12.544" class="difflineplus">+              this._windowIsClosing = true;</span>
<a href="#l12.545"></a><span id="l12.545" class="difflineplus">+              while (this._removingTabs.length)</span>
<a href="#l12.546"></a><span id="l12.546" class="difflineplus">+                this._endRemoveTab([this._removingTabs[0], false]);</span>
<a href="#l12.547"></a><span id="l12.547" class="difflineplus">+            } else if (!this._windowIsClosing) {</span>
<a href="#l12.548"></a><span id="l12.548" class="difflineplus">+              // see notes in addTab</span>
<a href="#l12.549"></a><span id="l12.549" class="difflineplus">+              function _delayedUpdate(aTabContainer) {</span>
<a href="#l12.550"></a><span id="l12.550" class="difflineplus">+                aTabContainer.adjustTabstrip();</span>
<a href="#l12.551"></a><span id="l12.551" class="difflineplus">+                aTabContainer.mTabstrip._updateScrollButtonsDisabledState();</span>
<a href="#l12.552"></a><span id="l12.552" class="difflineplus">+              };</span>
<a href="#l12.553"></a><span id="l12.553" class="difflineplus">+              setTimeout(_delayedUpdate, 0, this.tabContainer);</span>
<a href="#l12.554"></a><span id="l12.554" class="difflineplus">+            }</span>
<a href="#l12.555"></a><span id="l12.555" class="difflineplus">+</span>
<a href="#l12.556"></a><span id="l12.556" class="difflineplus">+            var conversation = this.getConversationForTab(aTab);</span>
<a href="#l12.557"></a><span id="l12.557" class="difflineplus">+            var browser = this.getBrowserForTab(aTab);</span>
<a href="#l12.558"></a><span id="l12.558" class="difflineplus">+</span>
<a href="#l12.559"></a><span id="l12.559" class="difflineplus">+            // Because of the way XBL works (fields just set JS</span>
<a href="#l12.560"></a><span id="l12.560" class="difflineplus">+            // properties on the element) and the code we have in place</span>
<a href="#l12.561"></a><span id="l12.561" class="difflineplus">+            // to preserve the JS objects for any elements that have</span>
<a href="#l12.562"></a><span id="l12.562" class="difflineplus">+            // JS properties set on them, the browser element won't be</span>
<a href="#l12.563"></a><span id="l12.563" class="difflineplus">+            // destroyed until the document goes away.  So we force a</span>
<a href="#l12.564"></a><span id="l12.564" class="difflineplus">+            // cleanup ourselves.</span>
<a href="#l12.565"></a><span id="l12.565" class="difflineplus">+            // This has to happen before we remove the child so that the</span>
<a href="#l12.566"></a><span id="l12.566" class="difflineplus">+            // XBL implementation of nsIObserver still works.</span>
<a href="#l12.567"></a><span id="l12.567" class="difflineplus">+            conversation.destroy();</span>
<a href="#l12.568"></a><span id="l12.568" class="difflineplus">+</span>
<a href="#l12.569"></a><span id="l12.569" class="difflineplus">+            if (conversation == this.mCurrentConversation)</span>
<a href="#l12.570"></a><span id="l12.570" class="difflineplus">+              this.mCurrentConversation = null;</span>
<a href="#l12.571"></a><span id="l12.571" class="difflineplus">+</span>
<a href="#l12.572"></a><span id="l12.572" class="difflineplus">+            // Invalidate browsers cache, as the tab is removed from the</span>
<a href="#l12.573"></a><span id="l12.573" class="difflineplus">+            // tab container.</span>
<a href="#l12.574"></a><span id="l12.574" class="difflineplus">+            this._browsers = null;</span>
<a href="#l12.575"></a><span id="l12.575" class="difflineplus">+            this._conversations = null;</span>
<a href="#l12.576"></a><span id="l12.576" class="difflineplus">+</span>
<a href="#l12.577"></a><span id="l12.577" class="difflineplus">+            // Remove the tab ...</span>
<a href="#l12.578"></a><span id="l12.578" class="difflineplus">+            this.tabContainer.removeChild(aTab);</span>
<a href="#l12.579"></a><span id="l12.579" class="difflineplus">+</span>
<a href="#l12.580"></a><span id="l12.580" class="difflineplus">+            // ... and fix up the _tPos properties immediately.</span>
<a href="#l12.581"></a><span id="l12.581" class="difflineplus">+            for (let i = aTab._tPos; i &lt; this.mTabs.length; i++)</span>
<a href="#l12.582"></a><span id="l12.582" class="difflineplus">+              this.mTabs[i]._tPos = i;</span>
<a href="#l12.583"></a><span id="l12.583" class="difflineplus">+</span>
<a href="#l12.584"></a><span id="l12.584" class="difflineplus">+            // update first-tab/last-tab/beforeselected/afterselected attributes</span>
<a href="#l12.585"></a><span id="l12.585" class="difflineplus">+            if (this.selectedTab) // can be null if we removed the last tab</span>
<a href="#l12.586"></a><span id="l12.586" class="difflineplus">+              this.selectedTab._selected = true;</span>
<a href="#l12.587"></a><span id="l12.587" class="difflineplus">+</span>
<a href="#l12.588"></a><span id="l12.588" class="difflineplus">+            // This will unload the document. An unload handler could remove</span>
<a href="#l12.589"></a><span id="l12.589" class="difflineplus">+            // dependant tabs, so it's important that the tabbrowser is now in</span>
<a href="#l12.590"></a><span id="l12.590" class="difflineplus">+            // a consistent state (tab removed, tab positions updated, etc.).</span>
<a href="#l12.591"></a><span id="l12.591" class="difflineplus">+            // Also, it's important that another tab has been selected before</span>
<a href="#l12.592"></a><span id="l12.592" class="difflineplus">+            // the panel is removed; otherwise, a random sibling panel can flash.</span>
<a href="#l12.593"></a><span id="l12.593" class="difflineplus">+            this.mPanelContainer.removeChild(conversation);</span>
<a href="#l12.594"></a><span id="l12.594" class="difflineplus">+</span>
<a href="#l12.595"></a><span id="l12.595" class="difflineplus">+            // As the panel is removed, the removal of a dependent document can</span>
<a href="#l12.596"></a><span id="l12.596" class="difflineplus">+            // cause the whole window to close. So at this point, it's possible</span>
<a href="#l12.597"></a><span id="l12.597" class="difflineplus">+            // that the binding is destructed.</span>
<a href="#l12.598"></a><span id="l12.598" class="difflineplus">+            if (this.mTabBox)</span>
<a href="#l12.599"></a><span id="l12.599" class="difflineplus">+              this.mTabBox.selectedPanel = this.getConversationForTab(this.mCurrentTab);</span>
<a href="#l12.600"></a><span id="l12.600" class="difflineplus">+</span>
<a href="#l12.601"></a><span id="l12.601" class="difflineplus">+            if (aCloseWindow)</span>
<a href="#l12.602"></a><span id="l12.602" class="difflineplus">+              this._windowIsClosing = closeWindow(true);</span>
<a href="#l12.603"></a><span id="l12.603" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.604"></a><span id="l12.604" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.605"></a><span id="l12.605" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.606"></a><span id="l12.606" class="difflineplus">+</span>
<a href="#l12.607"></a><span id="l12.607" class="difflineplus">+      &lt;method name=&quot;_blurTab&quot;&gt;</span>
<a href="#l12.608"></a><span id="l12.608" class="difflineplus">+        &lt;parameter name=&quot;aTab&quot;/&gt;</span>
<a href="#l12.609"></a><span id="l12.609" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.610"></a><span id="l12.610" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.611"></a><span id="l12.611" class="difflineplus">+            if (this.mCurrentTab != aTab)</span>
<a href="#l12.612"></a><span id="l12.612" class="difflineplus">+              return;</span>
<a href="#l12.613"></a><span id="l12.613" class="difflineplus">+</span>
<a href="#l12.614"></a><span id="l12.614" class="difflineplus">+            var tab = aTab;</span>
<a href="#l12.615"></a><span id="l12.615" class="difflineplus">+</span>
<a href="#l12.616"></a><span id="l12.616" class="difflineplus">+            do {</span>
<a href="#l12.617"></a><span id="l12.617" class="difflineplus">+              tab = tab.nextSibling;</span>
<a href="#l12.618"></a><span id="l12.618" class="difflineplus">+            } while (tab &amp;&amp; this._removingTabs.indexOf(tab) != -1);</span>
<a href="#l12.619"></a><span id="l12.619" class="difflineplus">+</span>
<a href="#l12.620"></a><span id="l12.620" class="difflineplus">+            if (!tab) {</span>
<a href="#l12.621"></a><span id="l12.621" class="difflineplus">+              tab = aTab;</span>
<a href="#l12.622"></a><span id="l12.622" class="difflineplus">+</span>
<a href="#l12.623"></a><span id="l12.623" class="difflineplus">+              do {</span>
<a href="#l12.624"></a><span id="l12.624" class="difflineplus">+                tab = tab.previousSibling;</span>
<a href="#l12.625"></a><span id="l12.625" class="difflineplus">+              } while (tab &amp;&amp; this._removingTabs.indexOf(tab) != -1);</span>
<a href="#l12.626"></a><span id="l12.626" class="difflineplus">+            }</span>
<a href="#l12.627"></a><span id="l12.627" class="difflineplus">+</span>
<a href="#l12.628"></a><span id="l12.628" class="difflineplus">+            this.selectedTab = tab;</span>
<a href="#l12.629"></a><span id="l12.629" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.630"></a><span id="l12.630" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.631"></a><span id="l12.631" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.632"></a><span id="l12.632" class="difflineplus">+</span>
<a href="#l12.633"></a><span id="l12.633" class="difflineplus">+      &lt;method name=&quot;importConversation&quot;&gt;</span>
<a href="#l12.634"></a><span id="l12.634" class="difflineplus">+        &lt;parameter name=&quot;aOtherTab&quot;/&gt;</span>
<a href="#l12.635"></a><span id="l12.635" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.636"></a><span id="l12.636" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.637"></a><span id="l12.637" class="difflineplus">+            // That's gBrowser for the other window, not the tab's browser!</span>
<a href="#l12.638"></a><span id="l12.638" class="difflineplus">+            var remoteBrowser =</span>
<a href="#l12.639"></a><span id="l12.639" class="difflineplus">+              aOtherTab.ownerDocument.defaultView.getBrowser();</span>
<a href="#l12.640"></a><span id="l12.640" class="difflineplus">+</span>
<a href="#l12.641"></a><span id="l12.641" class="difflineplus">+            // First, start teardown of the other browser.  Make sure to not</span>
<a href="#l12.642"></a><span id="l12.642" class="difflineplus">+            // fire the beforeunload event in the process.  Close the other</span>
<a href="#l12.643"></a><span id="l12.643" class="difflineplus">+            // window if this was its last tab.</span>
<a href="#l12.644"></a><span id="l12.644" class="difflineplus">+            var endRemoveArgs = remoteBrowser._beginRemoveTab(aOtherTab, true);</span>
<a href="#l12.645"></a><span id="l12.645" class="difflineplus">+</span>
<a href="#l12.646"></a><span id="l12.646" class="difflineplus">+</span>
<a href="#l12.647"></a><span id="l12.647" class="difflineplus">+            var conv = this.addConversation(aOtherTab.linkedConversation.conv);</span>
<a href="#l12.648"></a><span id="l12.648" class="difflineplus">+</span>
<a href="#l12.649"></a><span id="l12.649" class="difflineplus">+            var aOurTab = conv.tab;</span>
<a href="#l12.650"></a><span id="l12.650" class="difflineplus">+            var ourBrowser = this.getBrowserForTab(aOurTab);</span>
<a href="#l12.651"></a><span id="l12.651" class="difflineplus">+            // make sure it has a docshell</span>
<a href="#l12.652"></a><span id="l12.652" class="difflineplus">+            ourBrowser.docShell;</span>
<a href="#l12.653"></a><span id="l12.653" class="difflineplus">+</span>
<a href="#l12.654"></a><span id="l12.654" class="difflineplus">+            // Swap the docshells</span>
<a href="#l12.655"></a><span id="l12.655" class="difflineplus">+            ourBrowser.swapDocShells(aOtherTab.linkedBrowser);</span>
<a href="#l12.656"></a><span id="l12.656" class="difflineplus">+            aOtherTab.linkedConversation.conv = null;</span>
<a href="#l12.657"></a><span id="l12.657" class="difflineplus">+            conv.finishImport();</span>
<a href="#l12.658"></a><span id="l12.658" class="difflineplus">+</span>
<a href="#l12.659"></a><span id="l12.659" class="difflineplus">+            // Finish tearing down the tab that's going away.</span>
<a href="#l12.660"></a><span id="l12.660" class="difflineplus">+            remoteBrowser._endRemoveTab(endRemoveArgs);</span>
<a href="#l12.661"></a><span id="l12.661" class="difflineplus">+</span>
<a href="#l12.662"></a><span id="l12.662" class="difflineplus">+            // If the tab was already selected (this happpens in the scenario</span>
<a href="#l12.663"></a><span id="l12.663" class="difflineplus">+            // of replaceTabWithWindow), notify onLocationChange, etc.</span>
<a href="#l12.664"></a><span id="l12.664" class="difflineplus">+            if (aOurTab == this.selectedTab)</span>
<a href="#l12.665"></a><span id="l12.665" class="difflineplus">+              this.updateCurrentBrowser(true);</span>
<a href="#l12.666"></a><span id="l12.666" class="difflineplus">+</span>
<a href="#l12.667"></a><span id="l12.667" class="difflineplus">+            return conv;</span>
<a href="#l12.668"></a><span id="l12.668" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.669"></a><span id="l12.669" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.670"></a><span id="l12.670" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.671"></a><span id="l12.671" class="difflineplus">+</span>
<a href="#l12.672"></a><span id="l12.672" class="difflineplus">+      &lt;method name=&quot;onTabBarDblClick&quot;&gt;</span>
<a href="#l12.673"></a><span id="l12.673" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l12.674"></a><span id="l12.674" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.675"></a><span id="l12.675" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.676"></a><span id="l12.676" class="difflineplus">+            // See hack note in the tabbrowser-close-button binding</span>
<a href="#l12.677"></a><span id="l12.677" class="difflineplus">+            if (!this._blockDblClick &amp;&amp; aEvent.button == 0 &amp;&amp;</span>
<a href="#l12.678"></a><span id="l12.678" class="difflineplus">+                aEvent.originalTarget.localName == &quot;box&quot;) {</span>
<a href="#l12.679"></a><span id="l12.679" class="difflineplus">+              // xxx this needs to check that we're in the empty area of the tabstrip</span>
<a href="#l12.680"></a><span id="l12.680" class="difflineplus">+              var e = document.createEvent(&quot;Events&quot;);</span>
<a href="#l12.681"></a><span id="l12.681" class="difflineplus">+              e.initEvent(&quot;NewTab&quot;, true, true);</span>
<a href="#l12.682"></a><span id="l12.682" class="difflineplus">+              this.dispatchEvent(e);</span>
<a href="#l12.683"></a><span id="l12.683" class="difflineplus">+            }</span>
<a href="#l12.684"></a><span id="l12.684" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.685"></a><span id="l12.685" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.686"></a><span id="l12.686" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.687"></a><span id="l12.687" class="difflineplus">+</span>
<a href="#l12.688"></a><span id="l12.688" class="difflineplus">+      &lt;method name=&quot;getBrowserForTab&quot;&gt;</span>
<a href="#l12.689"></a><span id="l12.689" class="difflineplus">+        &lt;parameter name=&quot;aTab&quot;/&gt;</span>
<a href="#l12.690"></a><span id="l12.690" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.691"></a><span id="l12.691" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l12.692"></a><span id="l12.692" class="difflineplus">+          return aTab.linkedBrowser;</span>
<a href="#l12.693"></a><span id="l12.693" class="difflineplus">+        ]]&gt;</span>
<a href="#l12.694"></a><span id="l12.694" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.695"></a><span id="l12.695" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.696"></a><span id="l12.696" class="difflineplus">+</span>
<a href="#l12.697"></a><span id="l12.697" class="difflineplus">+      &lt;method name=&quot;getConversationForTab&quot;&gt;</span>
<a href="#l12.698"></a><span id="l12.698" class="difflineplus">+        &lt;parameter name=&quot;aTab&quot;/&gt;</span>
<a href="#l12.699"></a><span id="l12.699" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.700"></a><span id="l12.700" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l12.701"></a><span id="l12.701" class="difflineplus">+          return aTab.linkedConversation;</span>
<a href="#l12.702"></a><span id="l12.702" class="difflineplus">+        ]]&gt;</span>
<a href="#l12.703"></a><span id="l12.703" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.704"></a><span id="l12.704" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.705"></a><span id="l12.705" class="difflineplus">+</span>
<a href="#l12.706"></a><span id="l12.706" class="difflineplus">+      &lt;method name=&quot;selectTabAtIndex&quot;&gt;</span>
<a href="#l12.707"></a><span id="l12.707" class="difflineplus">+        &lt;parameter name=&quot;aIndex&quot;/&gt;</span>
<a href="#l12.708"></a><span id="l12.708" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l12.709"></a><span id="l12.709" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.710"></a><span id="l12.710" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l12.711"></a><span id="l12.711" class="difflineplus">+          // count backwards for aIndex &lt; 0</span>
<a href="#l12.712"></a><span id="l12.712" class="difflineplus">+          if (aIndex &lt; 0)</span>
<a href="#l12.713"></a><span id="l12.713" class="difflineplus">+            aIndex += this.mTabs.length;</span>
<a href="#l12.714"></a><span id="l12.714" class="difflineplus">+</span>
<a href="#l12.715"></a><span id="l12.715" class="difflineplus">+          if (aIndex &gt;= 0 &amp;&amp;</span>
<a href="#l12.716"></a><span id="l12.716" class="difflineplus">+              aIndex &lt; this.mTabs.length &amp;&amp;</span>
<a href="#l12.717"></a><span id="l12.717" class="difflineplus">+              aIndex != this.tabContainer.selectedIndex)</span>
<a href="#l12.718"></a><span id="l12.718" class="difflineplus">+            this.selectedTab = this.mTabs[aIndex];</span>
<a href="#l12.719"></a><span id="l12.719" class="difflineplus">+</span>
<a href="#l12.720"></a><span id="l12.720" class="difflineplus">+          if (aEvent) {</span>
<a href="#l12.721"></a><span id="l12.721" class="difflineplus">+            aEvent.preventDefault();</span>
<a href="#l12.722"></a><span id="l12.722" class="difflineplus">+            aEvent.stopPropagation();</span>
<a href="#l12.723"></a><span id="l12.723" class="difflineplus">+          }</span>
<a href="#l12.724"></a><span id="l12.724" class="difflineplus">+        ]]&gt;</span>
<a href="#l12.725"></a><span id="l12.725" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.726"></a><span id="l12.726" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.727"></a><span id="l12.727" class="difflineplus">+</span>
<a href="#l12.728"></a><span id="l12.728" class="difflineplus">+      &lt;property name=&quot;tabContainer&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l12.729"></a><span id="l12.729" class="difflineplus">+        &lt;getter&gt;</span>
<a href="#l12.730"></a><span id="l12.730" class="difflineplus">+          return this.mTabContainer;</span>
<a href="#l12.731"></a><span id="l12.731" class="difflineplus">+        &lt;/getter&gt;</span>
<a href="#l12.732"></a><span id="l12.732" class="difflineplus">+      &lt;/property&gt;</span>
<a href="#l12.733"></a><span id="l12.733" class="difflineplus">+</span>
<a href="#l12.734"></a><span id="l12.734" class="difflineplus">+      &lt;property name=&quot;selectedTab&quot;&gt;</span>
<a href="#l12.735"></a><span id="l12.735" class="difflineplus">+        &lt;getter&gt;</span>
<a href="#l12.736"></a><span id="l12.736" class="difflineplus">+          return this.mTabBox.selectedTab;</span>
<a href="#l12.737"></a><span id="l12.737" class="difflineplus">+        &lt;/getter&gt;</span>
<a href="#l12.738"></a><span id="l12.738" class="difflineplus">+        &lt;setter&gt;</span>
<a href="#l12.739"></a><span id="l12.739" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.740"></a><span id="l12.740" class="difflineplus">+          // Update the tab</span>
<a href="#l12.741"></a><span id="l12.741" class="difflineplus">+          this.mTabBox.selectedTab = val;</span>
<a href="#l12.742"></a><span id="l12.742" class="difflineplus">+          return val;</span>
<a href="#l12.743"></a><span id="l12.743" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.744"></a><span id="l12.744" class="difflineplus">+        &lt;/setter&gt;</span>
<a href="#l12.745"></a><span id="l12.745" class="difflineplus">+      &lt;/property&gt;</span>
<a href="#l12.746"></a><span id="l12.746" class="difflineplus">+</span>
<a href="#l12.747"></a><span id="l12.747" class="difflineplus">+      &lt;property name=&quot;selectedBrowser&quot;</span>
<a href="#l12.748"></a><span id="l12.748" class="difflineplus">+                onget=&quot;return this.mCurrentBrowser;&quot;</span>
<a href="#l12.749"></a><span id="l12.749" class="difflineplus">+                readonly=&quot;true&quot;/&gt;</span>
<a href="#l12.750"></a><span id="l12.750" class="difflineplus">+</span>
<a href="#l12.751"></a><span id="l12.751" class="difflineplus">+      &lt;property name=&quot;browsers&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l12.752"></a><span id="l12.752" class="difflineplus">+       &lt;getter&gt;</span>
<a href="#l12.753"></a><span id="l12.753" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.754"></a><span id="l12.754" class="difflineplus">+            return this._browsers ||</span>
<a href="#l12.755"></a><span id="l12.755" class="difflineplus">+                   (this._browsers = Array.map(this.mTabs, function (tab) tab.linkedBrowser));</span>
<a href="#l12.756"></a><span id="l12.756" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.757"></a><span id="l12.757" class="difflineplus">+        &lt;/getter&gt;</span>
<a href="#l12.758"></a><span id="l12.758" class="difflineplus">+      &lt;/property&gt;</span>
<a href="#l12.759"></a><span id="l12.759" class="difflineplus">+</span>
<a href="#l12.760"></a><span id="l12.760" class="difflineplus">+      &lt;property name=&quot;conversations&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l12.761"></a><span id="l12.761" class="difflineplus">+       &lt;getter&gt;</span>
<a href="#l12.762"></a><span id="l12.762" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.763"></a><span id="l12.763" class="difflineplus">+            return this._conversations ||</span>
<a href="#l12.764"></a><span id="l12.764" class="difflineplus">+                   (this._conversations = Array.map(this.mTabs, function (tab) tab.linkedConversation));</span>
<a href="#l12.765"></a><span id="l12.765" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.766"></a><span id="l12.766" class="difflineplus">+        &lt;/getter&gt;</span>
<a href="#l12.767"></a><span id="l12.767" class="difflineplus">+      &lt;/property&gt;</span>
<a href="#l12.768"></a><span id="l12.768" class="difflineplus">+</span>
<a href="#l12.769"></a><span id="l12.769" class="difflineplus">+      &lt;method name=&quot;_onDragStart&quot;&gt;</span>
<a href="#l12.770"></a><span id="l12.770" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l12.771"></a><span id="l12.771" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.772"></a><span id="l12.772" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l12.773"></a><span id="l12.773" class="difflineplus">+          var target = aEvent.target;</span>
<a href="#l12.774"></a><span id="l12.774" class="difflineplus">+          if (target.localName == &quot;tab&quot; &amp;&amp;</span>
<a href="#l12.775"></a><span id="l12.775" class="difflineplus">+              aEvent.originalTarget.localName != &quot;toolbarbutton&quot;) {</span>
<a href="#l12.776"></a><span id="l12.776" class="difflineplus">+            var dt = aEvent.dataTransfer;</span>
<a href="#l12.777"></a><span id="l12.777" class="difflineplus">+            dt.mozSetDataAt(TAB_DROP_TYPE, target, 0);</span>
<a href="#l12.778"></a><span id="l12.778" class="difflineplus">+</span>
<a href="#l12.779"></a><span id="l12.779" class="difflineplus">+            // Set the cursor to an arrow during tab drags.</span>
<a href="#l12.780"></a><span id="l12.780" class="difflineplus">+            dt.mozCursor = &quot;default&quot;;</span>
<a href="#l12.781"></a><span id="l12.781" class="difflineplus">+</span>
<a href="#l12.782"></a><span id="l12.782" class="difflineplus">+            aEvent.stopPropagation();</span>
<a href="#l12.783"></a><span id="l12.783" class="difflineplus">+          }</span>
<a href="#l12.784"></a><span id="l12.784" class="difflineplus">+</span>
<a href="#l12.785"></a><span id="l12.785" class="difflineplus">+          this._dragLeftWindow = false;</span>
<a href="#l12.786"></a><span id="l12.786" class="difflineplus">+        ]]&gt;</span>
<a href="#l12.787"></a><span id="l12.787" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.788"></a><span id="l12.788" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.789"></a><span id="l12.789" class="difflineplus">+</span>
<a href="#l12.790"></a><span id="l12.790" class="difflineplus">+      &lt;method name=&quot;_setEffectAllowedForDataTransfer&quot;&gt;</span>
<a href="#l12.791"></a><span id="l12.791" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l12.792"></a><span id="l12.792" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.793"></a><span id="l12.793" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.794"></a><span id="l12.794" class="difflineplus">+            var dt = aEvent.dataTransfer;</span>
<a href="#l12.795"></a><span id="l12.795" class="difflineplus">+            // Disallow dropping multiple items</span>
<a href="#l12.796"></a><span id="l12.796" class="difflineplus">+            if (dt.mozItemCount &gt; 1)</span>
<a href="#l12.797"></a><span id="l12.797" class="difflineplus">+              return dt.effectAllowed = &quot;none&quot;;</span>
<a href="#l12.798"></a><span id="l12.798" class="difflineplus">+</span>
<a href="#l12.799"></a><span id="l12.799" class="difflineplus">+            var types = dt.mozTypesAt(0);</span>
<a href="#l12.800"></a><span id="l12.800" class="difflineplus">+            var sourceNode = null;</span>
<a href="#l12.801"></a><span id="l12.801" class="difflineplus">+            // tabs are always added as the first type</span>
<a href="#l12.802"></a><span id="l12.802" class="difflineplus">+            if (types[0] == TAB_DROP_TYPE) {</span>
<a href="#l12.803"></a><span id="l12.803" class="difflineplus">+              var sourceNode = dt.mozGetDataAt(TAB_DROP_TYPE, 0);</span>
<a href="#l12.804"></a><span id="l12.804" class="difflineplus">+              if (sourceNode instanceof XULElement &amp;&amp;</span>
<a href="#l12.805"></a><span id="l12.805" class="difflineplus">+                  sourceNode.localName == &quot;tab&quot; &amp;&amp;</span>
<a href="#l12.806"></a><span id="l12.806" class="difflineplus">+                  (sourceNode.parentNode == this.mTabContainer ||</span>
<a href="#l12.807"></a><span id="l12.807" class="difflineplus">+                   (sourceNode.ownerDocument.defaultView instanceof ChromeWindow &amp;&amp;</span>
<a href="#l12.808"></a><span id="l12.808" class="difflineplus">+                    sourceNode.ownerDocument.documentElement.getAttribute(&quot;windowtype&quot;) == &quot;Messenger:convs&quot;))) {</span>
<a href="#l12.809"></a><span id="l12.809" class="difflineplus">+                if (sourceNode.parentNode == this.mTabContainer &amp;&amp;</span>
<a href="#l12.810"></a><span id="l12.810" class="difflineplus">+                    (aEvent.screenX &gt;= sourceNode.boxObject.screenX &amp;&amp;</span>
<a href="#l12.811"></a><span id="l12.811" class="difflineplus">+                      aEvent.screenX &lt;= (sourceNode.boxObject.screenX +</span>
<a href="#l12.812"></a><span id="l12.812" class="difflineplus">+                                         sourceNode.boxObject.width))) {</span>
<a href="#l12.813"></a><span id="l12.813" class="difflineplus">+                  return dt.effectAllowed = &quot;none&quot;;</span>
<a href="#l12.814"></a><span id="l12.814" class="difflineplus">+                }</span>
<a href="#l12.815"></a><span id="l12.815" class="difflineplus">+</span>
<a href="#l12.816"></a><span id="l12.816" class="difflineplus">+                return dt.effectAllowed = &quot;copyMove&quot;;</span>
<a href="#l12.817"></a><span id="l12.817" class="difflineplus">+              }</span>
<a href="#l12.818"></a><span id="l12.818" class="difflineplus">+            }</span>
<a href="#l12.819"></a><span id="l12.819" class="difflineplus">+</span>
<a href="#l12.820"></a><span id="l12.820" class="difflineplus">+            return dt.effectAllowed = &quot;none&quot;;</span>
<a href="#l12.821"></a><span id="l12.821" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.822"></a><span id="l12.822" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.823"></a><span id="l12.823" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.824"></a><span id="l12.824" class="difflineplus">+</span>
<a href="#l12.825"></a><span id="l12.825" class="difflineplus">+      &lt;method name=&quot;_onDragOver&quot;&gt;</span>
<a href="#l12.826"></a><span id="l12.826" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l12.827"></a><span id="l12.827" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.828"></a><span id="l12.828" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.829"></a><span id="l12.829" class="difflineplus">+            var effects = this._setEffectAllowedForDataTransfer(aEvent);</span>
<a href="#l12.830"></a><span id="l12.830" class="difflineplus">+</span>
<a href="#l12.831"></a><span id="l12.831" class="difflineplus">+            var ib = this.mTabDropIndicatorBar;</span>
<a href="#l12.832"></a><span id="l12.832" class="difflineplus">+            if (effects == &quot;&quot; || effects == &quot;none&quot;) {</span>
<a href="#l12.833"></a><span id="l12.833" class="difflineplus">+              ib.collapsed = &quot;true&quot;;</span>
<a href="#l12.834"></a><span id="l12.834" class="difflineplus">+              return;</span>
<a href="#l12.835"></a><span id="l12.835" class="difflineplus">+            }</span>
<a href="#l12.836"></a><span id="l12.836" class="difflineplus">+            aEvent.preventDefault();</span>
<a href="#l12.837"></a><span id="l12.837" class="difflineplus">+            aEvent.stopPropagation();</span>
<a href="#l12.838"></a><span id="l12.838" class="difflineplus">+</span>
<a href="#l12.839"></a><span id="l12.839" class="difflineplus">+            var tabStrip = this.mTabContainer.mTabstrip;</span>
<a href="#l12.840"></a><span id="l12.840" class="difflineplus">+            var ltr = (window.getComputedStyle(this.parentNode, null).direction</span>
<a href="#l12.841"></a><span id="l12.841" class="difflineplus">+                       == &quot;ltr&quot;);</span>
<a href="#l12.842"></a><span id="l12.842" class="difflineplus">+</span>
<a href="#l12.843"></a><span id="l12.843" class="difflineplus">+            // autoscroll the tab strip if we drag over the scroll</span>
<a href="#l12.844"></a><span id="l12.844" class="difflineplus">+            // buttons, even if we aren't dragging a tab, but then</span>
<a href="#l12.845"></a><span id="l12.845" class="difflineplus">+            // return to avoid drawing the drop indicator</span>
<a href="#l12.846"></a><span id="l12.846" class="difflineplus">+            var pixelsToScroll = 0;</span>
<a href="#l12.847"></a><span id="l12.847" class="difflineplus">+            if (this.mTabContainer.getAttribute(&quot;overflow&quot;) == &quot;true&quot;) {</span>
<a href="#l12.848"></a><span id="l12.848" class="difflineplus">+              var targetAnonid = aEvent.originalTarget.getAttribute(&quot;anonid&quot;);</span>
<a href="#l12.849"></a><span id="l12.849" class="difflineplus">+              switch (targetAnonid) {</span>
<a href="#l12.850"></a><span id="l12.850" class="difflineplus">+                case &quot;scrollbutton-up&quot;:</span>
<a href="#l12.851"></a><span id="l12.851" class="difflineplus">+                  pixelsToScroll = tabStrip.scrollIncrement * -1;</span>
<a href="#l12.852"></a><span id="l12.852" class="difflineplus">+                  break;</span>
<a href="#l12.853"></a><span id="l12.853" class="difflineplus">+                case &quot;scrollbutton-down&quot;:</span>
<a href="#l12.854"></a><span id="l12.854" class="difflineplus">+                case &quot;alltabs-button&quot;:</span>
<a href="#l12.855"></a><span id="l12.855" class="difflineplus">+                case &quot;newtab-button&quot;:</span>
<a href="#l12.856"></a><span id="l12.856" class="difflineplus">+                  pixelsToScroll = tabStrip.scrollIncrement;</span>
<a href="#l12.857"></a><span id="l12.857" class="difflineplus">+                  break;</span>
<a href="#l12.858"></a><span id="l12.858" class="difflineplus">+              }</span>
<a href="#l12.859"></a><span id="l12.859" class="difflineplus">+              if (pixelsToScroll)</span>
<a href="#l12.860"></a><span id="l12.860" class="difflineplus">+                tabStrip.scrollByPixels((ltr ? 1 : -1) * pixelsToScroll);</span>
<a href="#l12.861"></a><span id="l12.861" class="difflineplus">+            }</span>
<a href="#l12.862"></a><span id="l12.862" class="difflineplus">+</span>
<a href="#l12.863"></a><span id="l12.863" class="difflineplus">+            var newIndex = this.getNewIndex(aEvent);</span>
<a href="#l12.864"></a><span id="l12.864" class="difflineplus">+            var ib = this.mTabDropIndicatorBar;</span>
<a href="#l12.865"></a><span id="l12.865" class="difflineplus">+            var ind = ib.firstChild;</span>
<a href="#l12.866"></a><span id="l12.866" class="difflineplus">+            var tabStripBoxObject = tabStrip.scrollBoxObject;</span>
<a href="#l12.867"></a><span id="l12.867" class="difflineplus">+            var minMargin = tabStripBoxObject.x - this.boxObject.x;</span>
<a href="#l12.868"></a><span id="l12.868" class="difflineplus">+            // make sure we don't place the tab drop indicator past the</span>
<a href="#l12.869"></a><span id="l12.869" class="difflineplus">+            // edge, or the containing box will flex and stretch</span>
<a href="#l12.870"></a><span id="l12.870" class="difflineplus">+            // the tab drop indicator bar, which will flex the url bar.  </span>
<a href="#l12.871"></a><span id="l12.871" class="difflineplus">+            // XXX todo</span>
<a href="#l12.872"></a><span id="l12.872" class="difflineplus">+            // just use first value if you can figure out how to get</span>
<a href="#l12.873"></a><span id="l12.873" class="difflineplus">+            // the tab drop indicator to crop instead of flex and stretch</span>
<a href="#l12.874"></a><span id="l12.874" class="difflineplus">+            // the tab drop indicator bar.</span>
<a href="#l12.875"></a><span id="l12.875" class="difflineplus">+            var maxMargin = Math.min(minMargin + tabStripBoxObject.width, </span>
<a href="#l12.876"></a><span id="l12.876" class="difflineplus">+                                     ib.boxObject.x + ib.boxObject.width -</span>
<a href="#l12.877"></a><span id="l12.877" class="difflineplus">+                                     ind.boxObject.width);</span>
<a href="#l12.878"></a><span id="l12.878" class="difflineplus">+            if (!ltr)</span>
<a href="#l12.879"></a><span id="l12.879" class="difflineplus">+              [minMargin, maxMargin] = [this.boxObject.width - maxMargin,</span>
<a href="#l12.880"></a><span id="l12.880" class="difflineplus">+                                        this.boxObject.width - minMargin];</span>
<a href="#l12.881"></a><span id="l12.881" class="difflineplus">+            var newMargin, tabBoxObject;</span>
<a href="#l12.882"></a><span id="l12.882" class="difflineplus">+            if (pixelsToScroll) {</span>
<a href="#l12.883"></a><span id="l12.883" class="difflineplus">+              // if we are scrolling, put the drop indicator at the edge</span>
<a href="#l12.884"></a><span id="l12.884" class="difflineplus">+              // so that it doesn't jump while scrolling</span>
<a href="#l12.885"></a><span id="l12.885" class="difflineplus">+              newMargin = (pixelsToScroll &gt; 0) ? maxMargin : minMargin;</span>
<a href="#l12.886"></a><span id="l12.886" class="difflineplus">+            }</span>
<a href="#l12.887"></a><span id="l12.887" class="difflineplus">+            else {</span>
<a href="#l12.888"></a><span id="l12.888" class="difflineplus">+              if (newIndex == this.mTabs.length) {</span>
<a href="#l12.889"></a><span id="l12.889" class="difflineplus">+                tabBoxObject =  this.mTabs[newIndex-1].boxObject;</span>
<a href="#l12.890"></a><span id="l12.890" class="difflineplus">+                if (ltr)</span>
<a href="#l12.891"></a><span id="l12.891" class="difflineplus">+                  newMargin = tabBoxObject.screenX - this.boxObject.screenX</span>
<a href="#l12.892"></a><span id="l12.892" class="difflineplus">+                              + tabBoxObject.width;</span>
<a href="#l12.893"></a><span id="l12.893" class="difflineplus">+                else</span>
<a href="#l12.894"></a><span id="l12.894" class="difflineplus">+                  newMargin = this.boxObject.screenX - tabBoxObject.screenX</span>
<a href="#l12.895"></a><span id="l12.895" class="difflineplus">+                              + this.boxObject.width;</span>
<a href="#l12.896"></a><span id="l12.896" class="difflineplus">+              }</span>
<a href="#l12.897"></a><span id="l12.897" class="difflineplus">+              else {</span>
<a href="#l12.898"></a><span id="l12.898" class="difflineplus">+                tabBoxObject =  this.mTabs[newIndex].boxObject;</span>
<a href="#l12.899"></a><span id="l12.899" class="difflineplus">+                if (ltr)</span>
<a href="#l12.900"></a><span id="l12.900" class="difflineplus">+                  newMargin = tabBoxObject.screenX - this.boxObject.screenX;</span>
<a href="#l12.901"></a><span id="l12.901" class="difflineplus">+                else</span>
<a href="#l12.902"></a><span id="l12.902" class="difflineplus">+                  newMargin = this.boxObject.screenX - tabBoxObject.screenX</span>
<a href="#l12.903"></a><span id="l12.903" class="difflineplus">+                              + this.boxObject.width - tabBoxObject.width;</span>
<a href="#l12.904"></a><span id="l12.904" class="difflineplus">+              }</span>
<a href="#l12.905"></a><span id="l12.905" class="difflineplus">+              // ensure we never place the drop indicator beyond our limits</span>
<a href="#l12.906"></a><span id="l12.906" class="difflineplus">+              if (newMargin &lt; minMargin)</span>
<a href="#l12.907"></a><span id="l12.907" class="difflineplus">+                newMargin = minMargin;</span>
<a href="#l12.908"></a><span id="l12.908" class="difflineplus">+              else if (newMargin &gt; maxMargin)</span>
<a href="#l12.909"></a><span id="l12.909" class="difflineplus">+                newMargin = maxMargin;</span>
<a href="#l12.910"></a><span id="l12.910" class="difflineplus">+            }</span>
<a href="#l12.911"></a><span id="l12.911" class="difflineplus">+</span>
<a href="#l12.912"></a><span id="l12.912" class="difflineplus">+            ind.style.MozMarginStart = newMargin + 'px';</span>
<a href="#l12.913"></a><span id="l12.913" class="difflineplus">+</span>
<a href="#l12.914"></a><span id="l12.914" class="difflineplus">+            ib.collapsed = false;</span>
<a href="#l12.915"></a><span id="l12.915" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.916"></a><span id="l12.916" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.917"></a><span id="l12.917" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.918"></a><span id="l12.918" class="difflineplus">+</span>
<a href="#l12.919"></a><span id="l12.919" class="difflineplus">+      &lt;method name=&quot;_onDrop&quot;&gt;</span>
<a href="#l12.920"></a><span id="l12.920" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l12.921"></a><span id="l12.921" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.922"></a><span id="l12.922" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.923"></a><span id="l12.923" class="difflineplus">+            var dt = aEvent.dataTransfer;</span>
<a href="#l12.924"></a><span id="l12.924" class="difflineplus">+            var dropEffect = dt.dropEffect;</span>
<a href="#l12.925"></a><span id="l12.925" class="difflineplus">+            var draggedTab = dt.mozGetDataAt(TAB_DROP_TYPE, 0);</span>
<a href="#l12.926"></a><span id="l12.926" class="difflineplus">+            // not our drop then</span>
<a href="#l12.927"></a><span id="l12.927" class="difflineplus">+            if (!draggedTab)</span>
<a href="#l12.928"></a><span id="l12.928" class="difflineplus">+              return;</span>
<a href="#l12.929"></a><span id="l12.929" class="difflineplus">+</span>
<a href="#l12.930"></a><span id="l12.930" class="difflineplus">+            this.mTabDropIndicatorBar.collapsed = true;</span>
<a href="#l12.931"></a><span id="l12.931" class="difflineplus">+            aEvent.stopPropagation();</span>
<a href="#l12.932"></a><span id="l12.932" class="difflineplus">+</span>
<a href="#l12.933"></a><span id="l12.933" class="difflineplus">+            if (draggedTab.parentNode == this.mTabContainer) {</span>
<a href="#l12.934"></a><span id="l12.934" class="difflineplus">+              var newIndex = this.getNewIndex(aEvent);</span>
<a href="#l12.935"></a><span id="l12.935" class="difflineplus">+              // move the dropped tab</span>
<a href="#l12.936"></a><span id="l12.936" class="difflineplus">+              if (newIndex &gt; draggedTab._tPos)</span>
<a href="#l12.937"></a><span id="l12.937" class="difflineplus">+                newIndex--;</span>
<a href="#l12.938"></a><span id="l12.938" class="difflineplus">+              if (newIndex != draggedTab._tPos)</span>
<a href="#l12.939"></a><span id="l12.939" class="difflineplus">+                this.moveTabTo(draggedTab, newIndex);</span>
<a href="#l12.940"></a><span id="l12.940" class="difflineplus">+            }</span>
<a href="#l12.941"></a><span id="l12.941" class="difflineplus">+            else {</span>
<a href="#l12.942"></a><span id="l12.942" class="difflineplus">+              // swap the dropped tab with a new one we create and then close</span>
<a href="#l12.943"></a><span id="l12.943" class="difflineplus">+              // it in the other window (making it seem to have moved between</span>
<a href="#l12.944"></a><span id="l12.944" class="difflineplus">+              // windows)</span>
<a href="#l12.945"></a><span id="l12.945" class="difflineplus">+</span>
<a href="#l12.946"></a><span id="l12.946" class="difflineplus">+              var conv = this.importConversation(draggedTab);</span>
<a href="#l12.947"></a><span id="l12.947" class="difflineplus">+              this.moveTabTo(conv.tab, this.getNewIndex(aEvent));</span>
<a href="#l12.948"></a><span id="l12.948" class="difflineplus">+</span>
<a href="#l12.949"></a><span id="l12.949" class="difflineplus">+              // We need to set selectedTab after we've swapped the docShells</span>
<a href="#l12.950"></a><span id="l12.950" class="difflineplus">+              this.selectedTab = conv.tab;</span>
<a href="#l12.951"></a><span id="l12.951" class="difflineplus">+            }</span>
<a href="#l12.952"></a><span id="l12.952" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.953"></a><span id="l12.953" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.954"></a><span id="l12.954" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.955"></a><span id="l12.955" class="difflineplus">+</span>
<a href="#l12.956"></a><span id="l12.956" class="difflineplus">+      &lt;method name=&quot;_onDragEnd&quot;&gt;</span>
<a href="#l12.957"></a><span id="l12.957" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l12.958"></a><span id="l12.958" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.959"></a><span id="l12.959" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.960"></a><span id="l12.960" class="difflineplus">+            // Note: while this case is correctly handled here, this event</span>
<a href="#l12.961"></a><span id="l12.961" class="difflineplus">+            // isn't dispatched when the tab is moved within the tabstrip,</span>
<a href="#l12.962"></a><span id="l12.962" class="difflineplus">+            // see bug 460801.</span>
<a href="#l12.963"></a><span id="l12.963" class="difflineplus">+</span>
<a href="#l12.964"></a><span id="l12.964" class="difflineplus">+            // * mozUserCancelled = the user pressed ESC to cancel the drag</span>
<a href="#l12.965"></a><span id="l12.965" class="difflineplus">+            var dt = aEvent.dataTransfer;</span>
<a href="#l12.966"></a><span id="l12.966" class="difflineplus">+            if (dt.mozUserCancelled || dt.dropEffect != &quot;none&quot;)</span>
<a href="#l12.967"></a><span id="l12.967" class="difflineplus">+              return;</span>
<a href="#l12.968"></a><span id="l12.968" class="difflineplus">+</span>
<a href="#l12.969"></a><span id="l12.969" class="difflineplus">+            // Disable detach within the browser toolbox</span>
<a href="#l12.970"></a><span id="l12.970" class="difflineplus">+            var eX = aEvent.screenX;</span>
<a href="#l12.971"></a><span id="l12.971" class="difflineplus">+            var wX = window.screenX;</span>
<a href="#l12.972"></a><span id="l12.972" class="difflineplus">+            // check if the drop point is horizontally within the window</span>
<a href="#l12.973"></a><span id="l12.973" class="difflineplus">+            if (eX &gt; wX &amp;&amp; eX &lt; (wX + window.outerWidth)) {</span>
<a href="#l12.974"></a><span id="l12.974" class="difflineplus">+              var bo = this.mTabContainer.mTabstrip.boxObject;</span>
<a href="#l12.975"></a><span id="l12.975" class="difflineplus">+              // also avoid detaching if the the tab was dropped too close to</span>
<a href="#l12.976"></a><span id="l12.976" class="difflineplus">+              // the tabbar (half a tab)</span>
<a href="#l12.977"></a><span id="l12.977" class="difflineplus">+              var endScreenY = bo.screenY + 1.5 * bo.height;</span>
<a href="#l12.978"></a><span id="l12.978" class="difflineplus">+              var eY = aEvent.screenY;</span>
<a href="#l12.979"></a><span id="l12.979" class="difflineplus">+              if (eY &lt; endScreenY &amp;&amp; eY &gt; window.screenY)</span>
<a href="#l12.980"></a><span id="l12.980" class="difflineplus">+                return;</span>
<a href="#l12.981"></a><span id="l12.981" class="difflineplus">+            }</span>
<a href="#l12.982"></a><span id="l12.982" class="difflineplus">+</span>
<a href="#l12.983"></a><span id="l12.983" class="difflineplus">+            var draggedTab = dt.mozGetDataAt(TAB_DROP_TYPE, 0);</span>
<a href="#l12.984"></a><span id="l12.984" class="difflineplus">+            this.replaceTabWithWindow(draggedTab);</span>
<a href="#l12.985"></a><span id="l12.985" class="difflineplus">+            aEvent.stopPropagation();</span>
<a href="#l12.986"></a><span id="l12.986" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.987"></a><span id="l12.987" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.988"></a><span id="l12.988" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.989"></a><span id="l12.989" class="difflineplus">+</span>
<a href="#l12.990"></a><span id="l12.990" class="difflineplus">+      &lt;!-- Moves a tab to a new browser window, unless it's already the only tab</span>
<a href="#l12.991"></a><span id="l12.991" class="difflineplus">+           in the current window, in which case this will do nothing. --&gt;</span>
<a href="#l12.992"></a><span id="l12.992" class="difflineplus">+      &lt;method name=&quot;replaceTabWithWindow&quot;&gt;</span>
<a href="#l12.993"></a><span id="l12.993" class="difflineplus">+        &lt;parameter name=&quot;aTab&quot;/&gt;</span>
<a href="#l12.994"></a><span id="l12.994" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.995"></a><span id="l12.995" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.996"></a><span id="l12.996" class="difflineplus">+            if (this.mTabs.length == 1)</span>
<a href="#l12.997"></a><span id="l12.997" class="difflineplus">+              return;</span>
<a href="#l12.998"></a><span id="l12.998" class="difflineplus">+</span>
<a href="#l12.999"></a><span id="l12.999" class="difflineplus">+            // tell a new window to take the &quot;dropped&quot; tab</span>
<a href="#l12.1000"></a><span id="l12.1000" class="difflineplus">+            var ww = Cc[&quot;@mozilla.org/embedcomp/window-watcher;1&quot;].</span>
<a href="#l12.1001"></a><span id="l12.1001" class="difflineplus">+                      getService(Ci.nsIWindowWatcher);</span>
<a href="#l12.1002"></a><span id="l12.1002" class="difflineplus">+            return ww.openWindow(window,</span>
<a href="#l12.1003"></a><span id="l12.1003" class="difflineplus">+                                 getConvWindowURL(),</span>
<a href="#l12.1004"></a><span id="l12.1004" class="difflineplus">+                                 null,</span>
<a href="#l12.1005"></a><span id="l12.1005" class="difflineplus">+                                 &quot;chrome,dialog=no,all&quot;,</span>
<a href="#l12.1006"></a><span id="l12.1006" class="difflineplus">+                                 aTab);</span>
<a href="#l12.1007"></a><span id="l12.1007" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.1008"></a><span id="l12.1008" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.1009"></a><span id="l12.1009" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1010"></a><span id="l12.1010" class="difflineplus">+</span>
<a href="#l12.1011"></a><span id="l12.1011" class="difflineplus">+      &lt;method name=&quot;_onDragLeave&quot;&gt;</span>
<a href="#l12.1012"></a><span id="l12.1012" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l12.1013"></a><span id="l12.1013" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.1014"></a><span id="l12.1014" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.1015"></a><span id="l12.1015" class="difflineplus">+            // This does not work at all (see bug 458613)</span>
<a href="#l12.1016"></a><span id="l12.1016" class="difflineplus">+            var target = aEvent.relatedTarget;</span>
<a href="#l12.1017"></a><span id="l12.1017" class="difflineplus">+            while (target &amp;&amp; target != this)</span>
<a href="#l12.1018"></a><span id="l12.1018" class="difflineplus">+              target = target.parentNode;</span>
<a href="#l12.1019"></a><span id="l12.1019" class="difflineplus">+            if (target)</span>
<a href="#l12.1020"></a><span id="l12.1020" class="difflineplus">+              return;</span>
<a href="#l12.1021"></a><span id="l12.1021" class="difflineplus">+</span>
<a href="#l12.1022"></a><span id="l12.1022" class="difflineplus">+            this.mTabDropIndicatorBar.collapsed = true;</span>
<a href="#l12.1023"></a><span id="l12.1023" class="difflineplus">+            aEvent.stopPropagation();</span>
<a href="#l12.1024"></a><span id="l12.1024" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.1025"></a><span id="l12.1025" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.1026"></a><span id="l12.1026" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1027"></a><span id="l12.1027" class="difflineplus">+</span>
<a href="#l12.1028"></a><span id="l12.1028" class="difflineplus">+      &lt;method name=&quot;moveTabTo&quot;&gt;</span>
<a href="#l12.1029"></a><span id="l12.1029" class="difflineplus">+        &lt;parameter name=&quot;aTab&quot;/&gt;</span>
<a href="#l12.1030"></a><span id="l12.1030" class="difflineplus">+        &lt;parameter name=&quot;aIndex&quot;/&gt;</span>
<a href="#l12.1031"></a><span id="l12.1031" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.1032"></a><span id="l12.1032" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l12.1033"></a><span id="l12.1033" class="difflineplus">+          this._browsers = null; // invalidate cache</span>
<a href="#l12.1034"></a><span id="l12.1034" class="difflineplus">+          this._conversations = null;</span>
<a href="#l12.1035"></a><span id="l12.1035" class="difflineplus">+</span>
<a href="#l12.1036"></a><span id="l12.1036" class="difflineplus">+          var oldPosition = aTab._tPos;</span>
<a href="#l12.1037"></a><span id="l12.1037" class="difflineplus">+</span>
<a href="#l12.1038"></a><span id="l12.1038" class="difflineplus">+          aIndex = aIndex &lt; aTab._tPos ? aIndex: aIndex+1;</span>
<a href="#l12.1039"></a><span id="l12.1039" class="difflineplus">+          this.mCurrentTab._selected = false;</span>
<a href="#l12.1040"></a><span id="l12.1040" class="difflineplus">+          // use .item() instead of [] because dragging to the end of the strip goes out of</span>
<a href="#l12.1041"></a><span id="l12.1041" class="difflineplus">+          // bounds: .item() returns null (so it acts like appendChild), but [] throws</span>
<a href="#l12.1042"></a><span id="l12.1042" class="difflineplus">+          this.mTabContainer.insertBefore(aTab, this.mTabContainer.childNodes.item(aIndex));</span>
<a href="#l12.1043"></a><span id="l12.1043" class="difflineplus">+          // invalidate cache, because mTabContainer is about to change</span>
<a href="#l12.1044"></a><span id="l12.1044" class="difflineplus">+          this._browsers = null;</span>
<a href="#l12.1045"></a><span id="l12.1045" class="difflineplus">+          this._conversations = null;</span>
<a href="#l12.1046"></a><span id="l12.1046" class="difflineplus">+</span>
<a href="#l12.1047"></a><span id="l12.1047" class="difflineplus">+          var i;</span>
<a href="#l12.1048"></a><span id="l12.1048" class="difflineplus">+          for (i = 0; i &lt; this.mTabContainer.childNodes.length; i++) {</span>
<a href="#l12.1049"></a><span id="l12.1049" class="difflineplus">+            this.mTabContainer.childNodes[i]._tPos = i;</span>
<a href="#l12.1050"></a><span id="l12.1050" class="difflineplus">+            this.mTabContainer.childNodes[i]._selected = false;</span>
<a href="#l12.1051"></a><span id="l12.1051" class="difflineplus">+          }</span>
<a href="#l12.1052"></a><span id="l12.1052" class="difflineplus">+          this.mCurrentTab._selected = true;</span>
<a href="#l12.1053"></a><span id="l12.1053" class="difflineplus">+          this.mTabContainer.mTabstrip.scrollBoxObject.ensureElementIsVisible(this.mCurrentTab);</span>
<a href="#l12.1054"></a><span id="l12.1054" class="difflineplus">+</span>
<a href="#l12.1055"></a><span id="l12.1055" class="difflineplus">+          var evt = document.createEvent(&quot;UIEvents&quot;);</span>
<a href="#l12.1056"></a><span id="l12.1056" class="difflineplus">+          evt.initUIEvent(&quot;TabMove&quot;, true, false, window, oldPosition);</span>
<a href="#l12.1057"></a><span id="l12.1057" class="difflineplus">+          aTab.dispatchEvent(evt);</span>
<a href="#l12.1058"></a><span id="l12.1058" class="difflineplus">+</span>
<a href="#l12.1059"></a><span id="l12.1059" class="difflineplus">+          return aTab;</span>
<a href="#l12.1060"></a><span id="l12.1060" class="difflineplus">+        ]]&gt;</span>
<a href="#l12.1061"></a><span id="l12.1061" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.1062"></a><span id="l12.1062" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1063"></a><span id="l12.1063" class="difflineplus">+</span>
<a href="#l12.1064"></a><span id="l12.1064" class="difflineplus">+      &lt;method name=&quot;getNewIndex&quot;&gt;</span>
<a href="#l12.1065"></a><span id="l12.1065" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l12.1066"></a><span id="l12.1066" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.1067"></a><span id="l12.1067" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.1068"></a><span id="l12.1068" class="difflineplus">+            var i;</span>
<a href="#l12.1069"></a><span id="l12.1069" class="difflineplus">+            if (window.getComputedStyle(this.parentNode, null).direction == &quot;ltr&quot;) {</span>
<a href="#l12.1070"></a><span id="l12.1070" class="difflineplus">+              for (i = aEvent.target.localName == &quot;tab&quot; ? aEvent.target._tPos : 0; i &lt; this.mTabs.length; i++)</span>
<a href="#l12.1071"></a><span id="l12.1071" class="difflineplus">+                if (aEvent.screenX &lt; this.mTabs[i].boxObject.screenX + this.mTabs[i].boxObject.width / 2) </span>
<a href="#l12.1072"></a><span id="l12.1072" class="difflineplus">+                  return i;</span>
<a href="#l12.1073"></a><span id="l12.1073" class="difflineplus">+            } else {</span>
<a href="#l12.1074"></a><span id="l12.1074" class="difflineplus">+              for (i = aEvent.target.localName == &quot;tab&quot; ? aEvent.target._tPos : 0; i &lt; this.mTabs.length; i++)</span>
<a href="#l12.1075"></a><span id="l12.1075" class="difflineplus">+                if (aEvent.screenX &gt; this.mTabs[i].boxObject.screenX + this.mTabs[i].boxObject.width / 2)</span>
<a href="#l12.1076"></a><span id="l12.1076" class="difflineplus">+                  return i;</span>
<a href="#l12.1077"></a><span id="l12.1077" class="difflineplus">+            }</span>
<a href="#l12.1078"></a><span id="l12.1078" class="difflineplus">+            return this.mTabs.length;</span>
<a href="#l12.1079"></a><span id="l12.1079" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.1080"></a><span id="l12.1080" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.1081"></a><span id="l12.1081" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1082"></a><span id="l12.1082" class="difflineplus">+</span>
<a href="#l12.1083"></a><span id="l12.1083" class="difflineplus">+</span>
<a href="#l12.1084"></a><span id="l12.1084" class="difflineplus">+      &lt;method name=&quot;moveTabForward&quot;&gt;</span>
<a href="#l12.1085"></a><span id="l12.1085" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.1086"></a><span id="l12.1086" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.1087"></a><span id="l12.1087" class="difflineplus">+            var tabPos = this.mCurrentTab._tPos;</span>
<a href="#l12.1088"></a><span id="l12.1088" class="difflineplus">+            if (tabPos &lt; this.browsers.length - 1) {</span>
<a href="#l12.1089"></a><span id="l12.1089" class="difflineplus">+              this.moveTabTo(this.mCurrentTab, tabPos + 1);</span>
<a href="#l12.1090"></a><span id="l12.1090" class="difflineplus">+              this.mCurrentTab.focus();</span>
<a href="#l12.1091"></a><span id="l12.1091" class="difflineplus">+            }</span>
<a href="#l12.1092"></a><span id="l12.1092" class="difflineplus">+            else if (this.arrowKeysShouldWrap)</span>
<a href="#l12.1093"></a><span id="l12.1093" class="difflineplus">+              this.moveTabToStart();</span>
<a href="#l12.1094"></a><span id="l12.1094" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.1095"></a><span id="l12.1095" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.1096"></a><span id="l12.1096" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1097"></a><span id="l12.1097" class="difflineplus">+</span>
<a href="#l12.1098"></a><span id="l12.1098" class="difflineplus">+      &lt;method name=&quot;moveTabBackward&quot;&gt;</span>
<a href="#l12.1099"></a><span id="l12.1099" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.1100"></a><span id="l12.1100" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.1101"></a><span id="l12.1101" class="difflineplus">+            var tabPos = this.mCurrentTab._tPos;</span>
<a href="#l12.1102"></a><span id="l12.1102" class="difflineplus">+            if (tabPos &gt; 0) {</span>
<a href="#l12.1103"></a><span id="l12.1103" class="difflineplus">+              this.moveTabTo(this.mCurrentTab, tabPos - 1);</span>
<a href="#l12.1104"></a><span id="l12.1104" class="difflineplus">+              this.mCurrentTab.focus();</span>
<a href="#l12.1105"></a><span id="l12.1105" class="difflineplus">+            }</span>
<a href="#l12.1106"></a><span id="l12.1106" class="difflineplus">+            else if (this.arrowKeysShouldWrap)</span>
<a href="#l12.1107"></a><span id="l12.1107" class="difflineplus">+              this.moveTabToEnd();</span>
<a href="#l12.1108"></a><span id="l12.1108" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.1109"></a><span id="l12.1109" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.1110"></a><span id="l12.1110" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1111"></a><span id="l12.1111" class="difflineplus">+</span>
<a href="#l12.1112"></a><span id="l12.1112" class="difflineplus">+      &lt;method name=&quot;moveTabToStart&quot;&gt;</span>
<a href="#l12.1113"></a><span id="l12.1113" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.1114"></a><span id="l12.1114" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.1115"></a><span id="l12.1115" class="difflineplus">+            var tabPos = this.mCurrentTab._tPos;</span>
<a href="#l12.1116"></a><span id="l12.1116" class="difflineplus">+            if (tabPos &gt; 0) {</span>
<a href="#l12.1117"></a><span id="l12.1117" class="difflineplus">+              this.moveTabTo(this.mCurrentTab, 0);</span>
<a href="#l12.1118"></a><span id="l12.1118" class="difflineplus">+              this.mCurrentTab.focus();</span>
<a href="#l12.1119"></a><span id="l12.1119" class="difflineplus">+            }</span>
<a href="#l12.1120"></a><span id="l12.1120" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.1121"></a><span id="l12.1121" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.1122"></a><span id="l12.1122" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1123"></a><span id="l12.1123" class="difflineplus">+</span>
<a href="#l12.1124"></a><span id="l12.1124" class="difflineplus">+      &lt;method name=&quot;moveTabToEnd&quot;&gt;</span>
<a href="#l12.1125"></a><span id="l12.1125" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.1126"></a><span id="l12.1126" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.1127"></a><span id="l12.1127" class="difflineplus">+            var tabPos = this.mCurrentTab._tPos;</span>
<a href="#l12.1128"></a><span id="l12.1128" class="difflineplus">+            if (tabPos &lt; this.browsers.length - 1) {</span>
<a href="#l12.1129"></a><span id="l12.1129" class="difflineplus">+              this.moveTabTo(this.mCurrentTab,</span>
<a href="#l12.1130"></a><span id="l12.1130" class="difflineplus">+                             this.browsers.length - 1);</span>
<a href="#l12.1131"></a><span id="l12.1131" class="difflineplus">+              this.mCurrentTab.focus();</span>
<a href="#l12.1132"></a><span id="l12.1132" class="difflineplus">+            }</span>
<a href="#l12.1133"></a><span id="l12.1133" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.1134"></a><span id="l12.1134" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.1135"></a><span id="l12.1135" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1136"></a><span id="l12.1136" class="difflineplus">+</span>
<a href="#l12.1137"></a><span id="l12.1137" class="difflineplus">+      &lt;method name=&quot;moveTabOver&quot;&gt;</span>
<a href="#l12.1138"></a><span id="l12.1138" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l12.1139"></a><span id="l12.1139" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.1140"></a><span id="l12.1140" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.1141"></a><span id="l12.1141" class="difflineplus">+            var direction = window.getComputedStyle(this.parentNode, null).direction;</span>
<a href="#l12.1142"></a><span id="l12.1142" class="difflineplus">+            if ((direction == &quot;ltr&quot; &amp;&amp; aEvent.keyCode == KeyEvent.DOM_VK_RIGHT) ||</span>
<a href="#l12.1143"></a><span id="l12.1143" class="difflineplus">+                (direction == &quot;rtl&quot; &amp;&amp; aEvent.keyCode == KeyEvent.DOM_VK_LEFT))</span>
<a href="#l12.1144"></a><span id="l12.1144" class="difflineplus">+              this.moveTabForward();</span>
<a href="#l12.1145"></a><span id="l12.1145" class="difflineplus">+            else</span>
<a href="#l12.1146"></a><span id="l12.1146" class="difflineplus">+              this.moveTabBackward();</span>
<a href="#l12.1147"></a><span id="l12.1147" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.1148"></a><span id="l12.1148" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.1149"></a><span id="l12.1149" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1150"></a><span id="l12.1150" class="difflineplus">+</span>
<a href="#l12.1151"></a><span id="l12.1151" class="difflineplus">+      &lt;!-- BEGIN FORWARDED BROWSER PROPERTIES.  IF YOU ADD A PROPERTY TO THE BROWSER ELEMENT</span>
<a href="#l12.1152"></a><span id="l12.1152" class="difflineplus">+           MAKE SURE TO ADD IT HERE AS WELL. --&gt;</span>
<a href="#l12.1153"></a><span id="l12.1153" class="difflineplus">+</span>
<a href="#l12.1154"></a><span id="l12.1154" class="difflineplus">+      &lt;property name=&quot;docShell&quot;</span>
<a href="#l12.1155"></a><span id="l12.1155" class="difflineplus">+                onget=&quot;return this.mCurrentBrowser.docShell&quot;</span>
<a href="#l12.1156"></a><span id="l12.1156" class="difflineplus">+                readonly=&quot;true&quot;/&gt;</span>
<a href="#l12.1157"></a><span id="l12.1157" class="difflineplus">+</span>
<a href="#l12.1158"></a><span id="l12.1158" class="difflineplus">+      &lt;property name=&quot;contentWindow&quot;</span>
<a href="#l12.1159"></a><span id="l12.1159" class="difflineplus">+                readonly=&quot;true&quot;</span>
<a href="#l12.1160"></a><span id="l12.1160" class="difflineplus">+                onget=&quot;return this.mCurrentBrowser.contentWindow&quot;/&gt;</span>
<a href="#l12.1161"></a><span id="l12.1161" class="difflineplus">+</span>
<a href="#l12.1162"></a><span id="l12.1162" class="difflineplus">+      &lt;property name=&quot;markupDocumentViewer&quot;</span>
<a href="#l12.1163"></a><span id="l12.1163" class="difflineplus">+                onget=&quot;return this.mCurrentBrowser.markupDocumentViewer;&quot;</span>
<a href="#l12.1164"></a><span id="l12.1164" class="difflineplus">+                readonly=&quot;true&quot;/&gt;</span>
<a href="#l12.1165"></a><span id="l12.1165" class="difflineplus">+</span>
<a href="#l12.1166"></a><span id="l12.1166" class="difflineplus">+      &lt;property name=&quot;documentCharsetInfo&quot;</span>
<a href="#l12.1167"></a><span id="l12.1167" class="difflineplus">+                onget=&quot;return this.mCurrentBrowser.documentCharsetInfo;&quot;</span>
<a href="#l12.1168"></a><span id="l12.1168" class="difflineplus">+                readonly=&quot;true&quot;/&gt;</span>
<a href="#l12.1169"></a><span id="l12.1169" class="difflineplus">+</span>
<a href="#l12.1170"></a><span id="l12.1170" class="difflineplus">+      &lt;property name=&quot;contentDocument&quot;</span>
<a href="#l12.1171"></a><span id="l12.1171" class="difflineplus">+                onget=&quot;return this.mCurrentBrowser.contentDocument;&quot;</span>
<a href="#l12.1172"></a><span id="l12.1172" class="difflineplus">+                readonly=&quot;true&quot;/&gt;</span>
<a href="#l12.1173"></a><span id="l12.1173" class="difflineplus">+</span>
<a href="#l12.1174"></a><span id="l12.1174" class="difflineplus">+      &lt;property name=&quot;contentTitle&quot;</span>
<a href="#l12.1175"></a><span id="l12.1175" class="difflineplus">+                onget=&quot;return this.mCurrentBrowser.contentTitle;&quot;</span>
<a href="#l12.1176"></a><span id="l12.1176" class="difflineplus">+                readonly=&quot;true&quot;/&gt;</span>
<a href="#l12.1177"></a><span id="l12.1177" class="difflineplus">+</span>
<a href="#l12.1178"></a><span id="l12.1178" class="difflineplus">+      &lt;method name=&quot;dragDropSecurityCheck&quot;&gt;</span>
<a href="#l12.1179"></a><span id="l12.1179" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l12.1180"></a><span id="l12.1180" class="difflineplus">+        &lt;parameter name=&quot;aDragSession&quot;/&gt;</span>
<a href="#l12.1181"></a><span id="l12.1181" class="difflineplus">+        &lt;parameter name=&quot;aUri&quot;/&gt;</span>
<a href="#l12.1182"></a><span id="l12.1182" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.1183"></a><span id="l12.1183" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.1184"></a><span id="l12.1184" class="difflineplus">+            nsDragAndDrop.dragDropSecurityCheck(aEvent, aDragSession, aUri);</span>
<a href="#l12.1185"></a><span id="l12.1185" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.1186"></a><span id="l12.1186" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.1187"></a><span id="l12.1187" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1188"></a><span id="l12.1188" class="difflineplus">+</span>
<a href="#l12.1189"></a><span id="l12.1189" class="difflineplus">+      &lt;field name=&quot;_keyEventHandler&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l12.1190"></a><span id="l12.1190" class="difflineplus">+      &lt;![CDATA[({</span>
<a href="#l12.1191"></a><span id="l12.1191" class="difflineplus">+        tabbrowser: this,</span>
<a href="#l12.1192"></a><span id="l12.1192" class="difflineplus">+        handleEvent: function handleEvent(aEvent) {</span>
<a href="#l12.1193"></a><span id="l12.1193" class="difflineplus">+          if (!aEvent.isTrusted) {</span>
<a href="#l12.1194"></a><span id="l12.1194" class="difflineplus">+            // Don't let untrusted events mess with tabs.</span>
<a href="#l12.1195"></a><span id="l12.1195" class="difflineplus">+            return;</span>
<a href="#l12.1196"></a><span id="l12.1196" class="difflineplus">+          }</span>
<a href="#l12.1197"></a><span id="l12.1197" class="difflineplus">+</span>
<a href="#l12.1198"></a><span id="l12.1198" class="difflineplus">+          if ('altKey' in aEvent &amp;&amp; aEvent.altKey)</span>
<a href="#l12.1199"></a><span id="l12.1199" class="difflineplus">+            return;</span>
<a href="#l12.1200"></a><span id="l12.1200" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l12.1201"></a><span id="l12.1201" class="difflineplus">+          if ('metaKey' in aEvent &amp;&amp; aEvent.metaKey) {</span>
<a href="#l12.1202"></a><span id="l12.1202" class="difflineplus">+            var offset = 1;</span>
<a href="#l12.1203"></a><span id="l12.1203" class="difflineplus">+            switch (aEvent.charCode) {</span>
<a href="#l12.1204"></a><span id="l12.1204" class="difflineplus">+              case '}'.charCodeAt(0):</span>
<a href="#l12.1205"></a><span id="l12.1205" class="difflineplus">+                offset *= -1;</span>
<a href="#l12.1206"></a><span id="l12.1206" class="difflineplus">+              case '{'.charCodeAt(0):</span>
<a href="#l12.1207"></a><span id="l12.1207" class="difflineplus">+                if (window.getComputedStyle(this.tabbrowser, null).direction == &quot;ltr&quot;)</span>
<a href="#l12.1208"></a><span id="l12.1208" class="difflineplus">+                  offset *= -1;</span>
<a href="#l12.1209"></a><span id="l12.1209" class="difflineplus">+</span>
<a href="#l12.1210"></a><span id="l12.1210" class="difflineplus">+                this.tabbrowser.mTabContainer.advanceSelectedTab(offset, true);</span>
<a href="#l12.1211"></a><span id="l12.1211" class="difflineplus">+                aEvent.stopPropagation();</span>
<a href="#l12.1212"></a><span id="l12.1212" class="difflineplus">+                aEvent.preventDefault();</span>
<a href="#l12.1213"></a><span id="l12.1213" class="difflineplus">+                return;</span>
<a href="#l12.1214"></a><span id="l12.1214" class="difflineplus">+            }</span>
<a href="#l12.1215"></a><span id="l12.1215" class="difflineplus">+            if ('shiftKey' in aEvent &amp;&amp; aEvent.shiftKey)</span>
<a href="#l12.1216"></a><span id="l12.1216" class="difflineplus">+              return;</span>
<a href="#l12.1217"></a><span id="l12.1217" class="difflineplus">+#else</span>
<a href="#l12.1218"></a><span id="l12.1218" class="difflineplus">+          if (('ctrlKey' in aEvent &amp;&amp; aEvent.ctrlKey) &amp;&amp;</span>
<a href="#l12.1219"></a><span id="l12.1219" class="difflineplus">+              !('shiftKey' in aEvent &amp;&amp; aEvent.shiftKey) &amp;&amp;</span>
<a href="#l12.1220"></a><span id="l12.1220" class="difflineplus">+              !('metaKey' in aEvent &amp;&amp; aEvent.metaKey)) {</span>
<a href="#l12.1221"></a><span id="l12.1221" class="difflineplus">+            if (aEvent.keyCode == KeyEvent.DOM_VK_F4 &amp;&amp;</span>
<a href="#l12.1222"></a><span id="l12.1222" class="difflineplus">+                this.tabbrowser.mTabBox.handleCtrlPageUpDown) {</span>
<a href="#l12.1223"></a><span id="l12.1223" class="difflineplus">+              this.tabbrowser.removeCurrentTab();</span>
<a href="#l12.1224"></a><span id="l12.1224" class="difflineplus">+</span>
<a href="#l12.1225"></a><span id="l12.1225" class="difflineplus">+              aEvent.stopPropagation();</span>
<a href="#l12.1226"></a><span id="l12.1226" class="difflineplus">+              aEvent.preventDefault();</span>
<a href="#l12.1227"></a><span id="l12.1227" class="difflineplus">+              return;</span>
<a href="#l12.1228"></a><span id="l12.1228" class="difflineplus">+            }</span>
<a href="#l12.1229"></a><span id="l12.1229" class="difflineplus">+#endif</span>
<a href="#l12.1230"></a><span id="l12.1230" class="difflineplus">+            if (aEvent.target.localName == &quot;tabbrowser&quot;) {</span>
<a href="#l12.1231"></a><span id="l12.1231" class="difflineplus">+              switch (aEvent.keyCode) {</span>
<a href="#l12.1232"></a><span id="l12.1232" class="difflineplus">+                case KeyEvent.DOM_VK_UP:</span>
<a href="#l12.1233"></a><span id="l12.1233" class="difflineplus">+                  this.tabbrowser.moveTabBackward();</span>
<a href="#l12.1234"></a><span id="l12.1234" class="difflineplus">+                  break;</span>
<a href="#l12.1235"></a><span id="l12.1235" class="difflineplus">+                case KeyEvent.DOM_VK_DOWN:</span>
<a href="#l12.1236"></a><span id="l12.1236" class="difflineplus">+                  this.tabbrowser.moveTabForward();</span>
<a href="#l12.1237"></a><span id="l12.1237" class="difflineplus">+                  break;</span>
<a href="#l12.1238"></a><span id="l12.1238" class="difflineplus">+                case KeyEvent.DOM_VK_RIGHT:</span>
<a href="#l12.1239"></a><span id="l12.1239" class="difflineplus">+                case KeyEvent.DOM_VK_LEFT:</span>
<a href="#l12.1240"></a><span id="l12.1240" class="difflineplus">+                  this.tabbrowser.moveTabOver(aEvent);</span>
<a href="#l12.1241"></a><span id="l12.1241" class="difflineplus">+                  break;</span>
<a href="#l12.1242"></a><span id="l12.1242" class="difflineplus">+                case KeyEvent.DOM_VK_HOME:</span>
<a href="#l12.1243"></a><span id="l12.1243" class="difflineplus">+                  this.tabbrowser.moveTabToStart();</span>
<a href="#l12.1244"></a><span id="l12.1244" class="difflineplus">+                  break;</span>
<a href="#l12.1245"></a><span id="l12.1245" class="difflineplus">+                case KeyEvent.DOM_VK_END:</span>
<a href="#l12.1246"></a><span id="l12.1246" class="difflineplus">+                  this.tabbrowser.moveTabToEnd();</span>
<a href="#l12.1247"></a><span id="l12.1247" class="difflineplus">+                  break;</span>
<a href="#l12.1248"></a><span id="l12.1248" class="difflineplus">+                default:</span>
<a href="#l12.1249"></a><span id="l12.1249" class="difflineplus">+                  // Stop the keypress event for the above keyboard</span>
<a href="#l12.1250"></a><span id="l12.1250" class="difflineplus">+                  // shortcuts only.</span>
<a href="#l12.1251"></a><span id="l12.1251" class="difflineplus">+                  return;</span>
<a href="#l12.1252"></a><span id="l12.1252" class="difflineplus">+              }</span>
<a href="#l12.1253"></a><span id="l12.1253" class="difflineplus">+              aEvent.stopPropagation();</span>
<a href="#l12.1254"></a><span id="l12.1254" class="difflineplus">+              aEvent.preventDefault();</span>
<a href="#l12.1255"></a><span id="l12.1255" class="difflineplus">+            }</span>
<a href="#l12.1256"></a><span id="l12.1256" class="difflineplus">+          }</span>
<a href="#l12.1257"></a><span id="l12.1257" class="difflineplus">+        }</span>
<a href="#l12.1258"></a><span id="l12.1258" class="difflineplus">+      })]]&gt;</span>
<a href="#l12.1259"></a><span id="l12.1259" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.1260"></a><span id="l12.1260" class="difflineplus">+</span>
<a href="#l12.1261"></a><span id="l12.1261" class="difflineplus">+      &lt;method name=&quot;createTooltip&quot;&gt;</span>
<a href="#l12.1262"></a><span id="l12.1262" class="difflineplus">+        &lt;parameter name=&quot;event&quot;/&gt;</span>
<a href="#l12.1263"></a><span id="l12.1263" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l12.1264"></a><span id="l12.1264" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l12.1265"></a><span id="l12.1265" class="difflineplus">+            event.stopPropagation();</span>
<a href="#l12.1266"></a><span id="l12.1266" class="difflineplus">+            var tn = document.tooltipNode;</span>
<a href="#l12.1267"></a><span id="l12.1267" class="difflineplus">+            if (tn.localName != &quot;tab&quot;)</span>
<a href="#l12.1268"></a><span id="l12.1268" class="difflineplus">+              return false; // Not a tab, so cancel the tooltip</span>
<a href="#l12.1269"></a><span id="l12.1269" class="difflineplus">+            if (&quot;mOverCloseButton&quot; in tn &amp;&amp; tn.mOverCloseButton) {</span>
<a href="#l12.1270"></a><span id="l12.1270" class="difflineplus">+              event.target.setAttribute(&quot;label&quot;, tn.getAttribute(&quot;closetabtext&quot;));</span>
<a href="#l12.1271"></a><span id="l12.1271" class="difflineplus">+              return true;</span>
<a href="#l12.1272"></a><span id="l12.1272" class="difflineplus">+            }</span>
<a href="#l12.1273"></a><span id="l12.1273" class="difflineplus">+            if (tn.hasAttribute(&quot;label&quot;)) {</span>
<a href="#l12.1274"></a><span id="l12.1274" class="difflineplus">+              event.target.setAttribute(&quot;label&quot;, tn.getAttribute(&quot;label&quot;));</span>
<a href="#l12.1275"></a><span id="l12.1275" class="difflineplus">+              return true;</span>
<a href="#l12.1276"></a><span id="l12.1276" class="difflineplus">+            }</span>
<a href="#l12.1277"></a><span id="l12.1277" class="difflineplus">+            return false;</span>
<a href="#l12.1278"></a><span id="l12.1278" class="difflineplus">+          ]]&gt;</span>
<a href="#l12.1279"></a><span id="l12.1279" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l12.1280"></a><span id="l12.1280" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1281"></a><span id="l12.1281" class="difflineplus">+</span>
<a href="#l12.1282"></a><span id="l12.1282" class="difflineplus">+      &lt;constructor&gt;</span>
<a href="#l12.1283"></a><span id="l12.1283" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l12.1284"></a><span id="l12.1284" class="difflineplus">+          this.mCurrentBrowser = this.mPanelContainer.childNodes[0].browser;</span>
<a href="#l12.1285"></a><span id="l12.1285" class="difflineplus">+          this.mCurrentTab = this.mTabContainer.firstChild;</span>
<a href="#l12.1286"></a><span id="l12.1286" class="difflineplus">+          document.addEventListener(&quot;keypress&quot;, this._keyEventHandler, false);</span>
<a href="#l12.1287"></a><span id="l12.1287" class="difflineplus">+</span>
<a href="#l12.1288"></a><span id="l12.1288" class="difflineplus">+          var uniqueId = &quot;panel&quot; + Date.now();</span>
<a href="#l12.1289"></a><span id="l12.1289" class="difflineplus">+          this.mPanelContainer.childNodes[0].id = uniqueId;</span>
<a href="#l12.1290"></a><span id="l12.1290" class="difflineplus">+          this.mTabContainer.childNodes[0].linkedPanel = uniqueId;</span>
<a href="#l12.1291"></a><span id="l12.1291" class="difflineplus">+          this.mTabContainer.childNodes[0]._tPos = 0;</span>
<a href="#l12.1292"></a><span id="l12.1292" class="difflineplus">+          this.mTabContainer.childNodes[0].linkedConversation = this.mPanelContainer.childNodes[0];</span>
<a href="#l12.1293"></a><span id="l12.1293" class="difflineplus">+          this.mTabContainer.childNodes[0].linkedBrowser = this.mPanelContainer.childNodes[0].browser;</span>
<a href="#l12.1294"></a><span id="l12.1294" class="difflineplus">+</span>
<a href="#l12.1295"></a><span id="l12.1295" class="difflineplus">+          // set up the shared autoscroll popup</span>
<a href="#l12.1296"></a><span id="l12.1296" class="difflineplus">+          this._autoScrollPopup = this.mCurrentBrowser._createAutoScrollPopup();</span>
<a href="#l12.1297"></a><span id="l12.1297" class="difflineplus">+          this.appendChild(this._autoScrollPopup);</span>
<a href="#l12.1298"></a><span id="l12.1298" class="difflineplus">+          this.mCurrentBrowser.setAttribute(&quot;autoscrollpopup&quot;, this._autoScrollPopup.id);</span>
<a href="#l12.1299"></a><span id="l12.1299" class="difflineplus">+        ]]&gt;</span>
<a href="#l12.1300"></a><span id="l12.1300" class="difflineplus">+      &lt;/constructor&gt;</span>
<a href="#l12.1301"></a><span id="l12.1301" class="difflineplus">+</span>
<a href="#l12.1302"></a><span id="l12.1302" class="difflineplus">+      &lt;destructor&gt;</span>
<a href="#l12.1303"></a><span id="l12.1303" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l12.1304"></a><span id="l12.1304" class="difflineplus">+          document.removeEventListener(&quot;keypress&quot;, this._keyEventHandler, false);</span>
<a href="#l12.1305"></a><span id="l12.1305" class="difflineplus">+        ]]&gt;</span>
<a href="#l12.1306"></a><span id="l12.1306" class="difflineplus">+      &lt;/destructor&gt;</span>
<a href="#l12.1307"></a><span id="l12.1307" class="difflineplus">+    &lt;/implementation&gt;</span>
<a href="#l12.1308"></a><span id="l12.1308" class="difflineplus">+  &lt;/binding&gt;</span>
<a href="#l12.1309"></a><span id="l12.1309" class="difflineplus">+</span>
<a href="#l12.1310"></a><span id="l12.1310" class="difflineplus">+  &lt;binding id=&quot;tabbrowser-arrowscrollbox&quot; extends=&quot;chrome://global/content/bindings/scrollbox.xml#arrowscrollbox-clicktoscroll&quot;&gt;</span>
<a href="#l12.1311"></a><span id="l12.1311" class="difflineplus">+    &lt;implementation&gt;</span>
<a href="#l12.1312"></a><span id="l12.1312" class="difflineplus">+      &lt;!-- Override scrollbox.xml method, since our scrollbox's children are</span>
<a href="#l12.1313"></a><span id="l12.1313" class="difflineplus">+           inherited from the binding parent --&gt;</span>
<a href="#l12.1314"></a><span id="l12.1314" class="difflineplus">+      &lt;method name=&quot;_getScrollableElements&quot;&gt;</span>
<a href="#l12.1315"></a><span id="l12.1315" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l12.1316"></a><span id="l12.1316" class="difflineplus">+          return document.getBindingParent(this).childNodes;</span>
<a href="#l12.1317"></a><span id="l12.1317" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l12.1318"></a><span id="l12.1318" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1319"></a><span id="l12.1319" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l12.1320"></a><span id="l12.1320" class="difflineplus">+      &lt;field name=&quot;_scrollButtonDownBox&quot;&gt;</span>
<a href="#l12.1321"></a><span id="l12.1321" class="difflineplus">+        document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;down-box&quot;);</span>
<a href="#l12.1322"></a><span id="l12.1322" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.1323"></a><span id="l12.1323" class="difflineplus">+      &lt;field name=&quot;_scrollButtonDownBoxAnimate&quot;&gt;</span>
<a href="#l12.1324"></a><span id="l12.1324" class="difflineplus">+        document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;down-box-animate&quot;);</span>
<a href="#l12.1325"></a><span id="l12.1325" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.1326"></a><span id="l12.1326" class="difflineplus">+#endif</span>
<a href="#l12.1327"></a><span id="l12.1327" class="difflineplus">+    &lt;/implementation&gt;</span>
<a href="#l12.1328"></a><span id="l12.1328" class="difflineplus">+</span>
<a href="#l12.1329"></a><span id="l12.1329" class="difflineplus">+    &lt;handlers&gt;</span>
<a href="#l12.1330"></a><span id="l12.1330" class="difflineplus">+      &lt;handler event=&quot;underflow&quot;&gt;&lt;![CDATA[</span>
<a href="#l12.1331"></a><span id="l12.1331" class="difflineplus">+         if (event.detail == 0)</span>
<a href="#l12.1332"></a><span id="l12.1332" class="difflineplus">+           return; // Ignore vertical events</span>
<a href="#l12.1333"></a><span id="l12.1333" class="difflineplus">+</span>
<a href="#l12.1334"></a><span id="l12.1334" class="difflineplus">+         var tabs = document.getBindingParent(this);</span>
<a href="#l12.1335"></a><span id="l12.1335" class="difflineplus">+         tabs.removeAttribute(&quot;overflow&quot;);</span>
<a href="#l12.1336"></a><span id="l12.1336" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l12.1337"></a><span id="l12.1337" class="difflineplus">+         this._scrollButtonDownBox.collapsed = true;</span>
<a href="#l12.1338"></a><span id="l12.1338" class="difflineplus">+         this._scrollButtonDownBoxAnimate.collapsed = true;</span>
<a href="#l12.1339"></a><span id="l12.1339" class="difflineplus">+#endif</span>
<a href="#l12.1340"></a><span id="l12.1340" class="difflineplus">+      ]]&gt;&lt;/handler&gt;</span>
<a href="#l12.1341"></a><span id="l12.1341" class="difflineplus">+      &lt;handler event=&quot;overflow&quot;&gt;&lt;![CDATA[</span>
<a href="#l12.1342"></a><span id="l12.1342" class="difflineplus">+         if (event.detail == 0)</span>
<a href="#l12.1343"></a><span id="l12.1343" class="difflineplus">+           return; // Ignore vertical events</span>
<a href="#l12.1344"></a><span id="l12.1344" class="difflineplus">+</span>
<a href="#l12.1345"></a><span id="l12.1345" class="difflineplus">+         var tabs = document.getBindingParent(this);</span>
<a href="#l12.1346"></a><span id="l12.1346" class="difflineplus">+         tabs.setAttribute(&quot;overflow&quot;, &quot;true&quot;);</span>
<a href="#l12.1347"></a><span id="l12.1347" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l12.1348"></a><span id="l12.1348" class="difflineplus">+         this._scrollButtonDownBox.collapsed = false;</span>
<a href="#l12.1349"></a><span id="l12.1349" class="difflineplus">+         this._scrollButtonDownBoxAnimate.collapsed = false;</span>
<a href="#l12.1350"></a><span id="l12.1350" class="difflineplus">+#endif</span>
<a href="#l12.1351"></a><span id="l12.1351" class="difflineplus">+         this.scrollBoxObject.ensureElementIsVisible(tabs.selectedItem);</span>
<a href="#l12.1352"></a><span id="l12.1352" class="difflineplus">+      ]]&gt;&lt;/handler&gt;</span>
<a href="#l12.1353"></a><span id="l12.1353" class="difflineplus">+</span>
<a href="#l12.1354"></a><span id="l12.1354" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l12.1355"></a><span id="l12.1355" class="difflineplus">+      &lt;handler event=&quot;UpdatedScrollButtonsDisabledState&quot;&gt;&lt;![CDATA[</span>
<a href="#l12.1356"></a><span id="l12.1356" class="difflineplus">+        // fix for bug #352353</span>
<a href="#l12.1357"></a><span id="l12.1357" class="difflineplus">+        // unlike the scrollup button on the tab strip (which is a </span>
<a href="#l12.1358"></a><span id="l12.1358" class="difflineplus">+        // simple toolbarbutton) the scrolldown button is </span>
<a href="#l12.1359"></a><span id="l12.1359" class="difflineplus">+        // a more complicated stack of boxes and a toolbarbutton</span>
<a href="#l12.1360"></a><span id="l12.1360" class="difflineplus">+        // so that we can animate when a tab is opened offscreen.</span>
<a href="#l12.1361"></a><span id="l12.1361" class="difflineplus">+        // in order to style the box with the actual background image</span>
<a href="#l12.1362"></a><span id="l12.1362" class="difflineplus">+        // we need to manually set the disable state to match the</span>
<a href="#l12.1363"></a><span id="l12.1363" class="difflineplus">+        // disable state of the toolbarbutton.</span>
<a href="#l12.1364"></a><span id="l12.1364" class="difflineplus">+        this._scrollButtonDownBox</span>
<a href="#l12.1365"></a><span id="l12.1365" class="difflineplus">+            .setAttribute(&quot;disabled&quot;, this._scrollButtonDown.disabled);</span>
<a href="#l12.1366"></a><span id="l12.1366" class="difflineplus">+      ]]&gt;&lt;/handler&gt;</span>
<a href="#l12.1367"></a><span id="l12.1367" class="difflineplus">+#endif</span>
<a href="#l12.1368"></a><span id="l12.1368" class="difflineplus">+</span>
<a href="#l12.1369"></a><span id="l12.1369" class="difflineplus">+    &lt;/handlers&gt;</span>
<a href="#l12.1370"></a><span id="l12.1370" class="difflineplus">+</span>
<a href="#l12.1371"></a><span id="l12.1371" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l12.1372"></a><span id="l12.1372" class="difflineplus">+    &lt;content&gt;</span>
<a href="#l12.1373"></a><span id="l12.1373" class="difflineplus">+      &lt;xul:toolbarbutton class=&quot;scrollbutton-up&quot; collapsed=&quot;true&quot;</span>
<a href="#l12.1374"></a><span id="l12.1374" class="difflineplus">+                         xbl:inherits=&quot;orient&quot;</span>
<a href="#l12.1375"></a><span id="l12.1375" class="difflineplus">+                         anonid=&quot;scrollbutton-up&quot;</span>
<a href="#l12.1376"></a><span id="l12.1376" class="difflineplus">+                         onclick=&quot;_distanceScroll(event);&quot;</span>
<a href="#l12.1377"></a><span id="l12.1377" class="difflineplus">+                         onmousedown=&quot;_startScroll(-1);&quot;</span>
<a href="#l12.1378"></a><span id="l12.1378" class="difflineplus">+                         onmouseover=&quot;_continueScroll(-1);&quot;</span>
<a href="#l12.1379"></a><span id="l12.1379" class="difflineplus">+                         onmouseup=&quot;_stopScroll();&quot;</span>
<a href="#l12.1380"></a><span id="l12.1380" class="difflineplus">+                         onmouseout=&quot;_pauseScroll();&quot;</span>
<a href="#l12.1381"></a><span id="l12.1381" class="difflineplus">+                         chromedir=&quot;&amp;locale.dir;&quot;/&gt;</span>
<a href="#l12.1382"></a><span id="l12.1382" class="difflineplus">+      &lt;xul:scrollbox xbl:inherits=&quot;orient,align,pack,dir&quot; flex=&quot;1&quot; anonid=&quot;scrollbox&quot;&gt;</span>
<a href="#l12.1383"></a><span id="l12.1383" class="difflineplus">+        &lt;children/&gt;</span>
<a href="#l12.1384"></a><span id="l12.1384" class="difflineplus">+      &lt;/xul:scrollbox&gt;</span>
<a href="#l12.1385"></a><span id="l12.1385" class="difflineplus">+      &lt;xul:stack align=&quot;center&quot; pack=&quot;end&quot; class=&quot;scrollbutton-down-stack&quot;&gt;</span>
<a href="#l12.1386"></a><span id="l12.1386" class="difflineplus">+        &lt;xul:hbox flex=&quot;1&quot; class=&quot;scrollbutton-down-box&quot; </span>
<a href="#l12.1387"></a><span id="l12.1387" class="difflineplus">+                           collapsed=&quot;true&quot; anonid=&quot;down-box&quot;/&gt;</span>
<a href="#l12.1388"></a><span id="l12.1388" class="difflineplus">+        &lt;xul:hbox flex=&quot;1&quot; class=&quot;scrollbutton-down-box-animate&quot; </span>
<a href="#l12.1389"></a><span id="l12.1389" class="difflineplus">+                           collapsed=&quot;true&quot; anonid=&quot;down-box-animate&quot;/&gt;</span>
<a href="#l12.1390"></a><span id="l12.1390" class="difflineplus">+        &lt;xul:toolbarbutton class=&quot;scrollbutton-down&quot; collapsed=&quot;true&quot;</span>
<a href="#l12.1391"></a><span id="l12.1391" class="difflineplus">+                           xbl:inherits=&quot;orient&quot;</span>
<a href="#l12.1392"></a><span id="l12.1392" class="difflineplus">+                           anonid=&quot;scrollbutton-down&quot;</span>
<a href="#l12.1393"></a><span id="l12.1393" class="difflineplus">+                           onclick=&quot;_distanceScroll(event);&quot;</span>
<a href="#l12.1394"></a><span id="l12.1394" class="difflineplus">+                           onmousedown=&quot;_startScroll(1);&quot;</span>
<a href="#l12.1395"></a><span id="l12.1395" class="difflineplus">+                           onmouseover=&quot;_continueScroll(1);&quot;</span>
<a href="#l12.1396"></a><span id="l12.1396" class="difflineplus">+                           onmouseup=&quot;_stopScroll();&quot;</span>
<a href="#l12.1397"></a><span id="l12.1397" class="difflineplus">+                           onmouseout=&quot;_pauseScroll();&quot;</span>
<a href="#l12.1398"></a><span id="l12.1398" class="difflineplus">+                           chromedir=&quot;&amp;locale.dir;&quot;/&gt;</span>
<a href="#l12.1399"></a><span id="l12.1399" class="difflineplus">+      &lt;/xul:stack&gt;</span>
<a href="#l12.1400"></a><span id="l12.1400" class="difflineplus">+    &lt;/content&gt;</span>
<a href="#l12.1401"></a><span id="l12.1401" class="difflineplus">+#endif</span>
<a href="#l12.1402"></a><span id="l12.1402" class="difflineplus">+  &lt;/binding&gt;</span>
<a href="#l12.1403"></a><span id="l12.1403" class="difflineplus">+</span>
<a href="#l12.1404"></a><span id="l12.1404" class="difflineplus">+  &lt;binding id=&quot;tabbrowser-tabs&quot;</span>
<a href="#l12.1405"></a><span id="l12.1405" class="difflineplus">+           extends=&quot;chrome://global/content/bindings/tabbox.xml#tabs&quot;&gt;</span>
<a href="#l12.1406"></a><span id="l12.1406" class="difflineplus">+    &lt;content&gt;</span>
<a href="#l12.1407"></a><span id="l12.1407" class="difflineplus">+      &lt;xul:stack flex=&quot;1&quot; class=&quot;tabs-stack&quot;&gt;</span>
<a href="#l12.1408"></a><span id="l12.1408" class="difflineplus">+        &lt;xul:vbox&gt;</span>
<a href="#l12.1409"></a><span id="l12.1409" class="difflineplus">+          &lt;xul:spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l12.1410"></a><span id="l12.1410" class="difflineplus">+          &lt;xul:hbox class=&quot;tabs-bottom&quot; align=&quot;center&quot;/&gt;</span>
<a href="#l12.1411"></a><span id="l12.1411" class="difflineplus">+        &lt;/xul:vbox&gt;</span>
<a href="#l12.1412"></a><span id="l12.1412" class="difflineplus">+        &lt;xul:hbox xbl:inherits=&quot;overflow&quot; class=&quot;tabs-container&quot;&gt;</span>
<a href="#l12.1413"></a><span id="l12.1413" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l12.1414"></a><span id="l12.1414" class="difflineplus">+          &lt;xul:stack&gt;</span>
<a href="#l12.1415"></a><span id="l12.1415" class="difflineplus">+            &lt;xul:spacer class=&quot;tabs-left&quot;/&gt;</span>
<a href="#l12.1416"></a><span id="l12.1416" class="difflineplus">+          &lt;/xul:stack&gt;</span>
<a href="#l12.1417"></a><span id="l12.1417" class="difflineplus">+#endif</span>
<a href="#l12.1418"></a><span id="l12.1418" class="difflineplus">+          &lt;xul:arrowscrollbox anonid=&quot;arrowscrollbox&quot; orient=&quot;horizontal&quot; flex=&quot;1&quot;</span>
<a href="#l12.1419"></a><span id="l12.1419" class="difflineplus">+                              style=&quot;min-width: 1px;&quot; chromedir=&quot;&amp;locale.dir;&quot;</span>
<a href="#l12.1420"></a><span id="l12.1420" class="difflineplus">+#ifndef XP_MACOSX</span>
<a href="#l12.1421"></a><span id="l12.1421" class="difflineplus">+                              clicktoscroll=&quot;true&quot;</span>
<a href="#l12.1422"></a><span id="l12.1422" class="difflineplus">+#endif</span>
<a href="#l12.1423"></a><span id="l12.1423" class="difflineplus">+                              class=&quot;tabbrowser-arrowscrollbox&quot;&gt;</span>
<a href="#l12.1424"></a><span id="l12.1424" class="difflineplus">+# This is a hack to circumvent bug 472020, otherwise the tabs show up on the</span>
<a href="#l12.1425"></a><span id="l12.1425" class="difflineplus">+# right of the newtab button.</span>
<a href="#l12.1426"></a><span id="l12.1426" class="difflineplus">+            &lt;children includes=&quot;tab&quot;/&gt;</span>
<a href="#l12.1427"></a><span id="l12.1427" class="difflineplus">+# This is to ensure anything extensions put here will go before the newtab</span>
<a href="#l12.1428"></a><span id="l12.1428" class="difflineplus">+# button, necessary due to the previous hack.</span>
<a href="#l12.1429"></a><span id="l12.1429" class="difflineplus">+            &lt;children/&gt;</span>
<a href="#l12.1430"></a><span id="l12.1430" class="difflineplus">+            &lt;xul:toolbarbutton class=&quot;tabs-newtab-button&quot;</span>
<a href="#l12.1431"></a><span id="l12.1431" class="difflineplus">+                               command=&quot;cmd_newNavigatorTab&quot; chromedir=&quot;&amp;locale.dir;&quot;</span>
<a href="#l12.1432"></a><span id="l12.1432" class="difflineplus">+                               tooltiptext=&quot;&amp;newTabButton.tooltip;&quot;/&gt;</span>
<a href="#l12.1433"></a><span id="l12.1433" class="difflineplus">+          &lt;/xul:arrowscrollbox&gt;</span>
<a href="#l12.1434"></a><span id="l12.1434" class="difflineplus">+          &lt;xul:toolbarbutton class=&quot;tabs-newtab-button&quot; anonid=&quot;newtab-button&quot;</span>
<a href="#l12.1435"></a><span id="l12.1435" class="difflineplus">+                             command=&quot;cmd_newNavigatorTab&quot; chromedir=&quot;&amp;locale.dir;&quot;</span>
<a href="#l12.1436"></a><span id="l12.1436" class="difflineplus">+                             tooltiptext=&quot;&amp;newTabButton.tooltip;&quot;/&gt;</span>
<a href="#l12.1437"></a><span id="l12.1437" class="difflineplus">+          &lt;xul:stack align=&quot;center&quot; pack=&quot;end&quot; chromedir=&quot;&amp;locale.dir;&quot;&gt;</span>
<a href="#l12.1438"></a><span id="l12.1438" class="difflineplus">+            &lt;xul:hbox flex=&quot;1&quot; class=&quot;tabs-alltabs-box&quot; anonid=&quot;alltabs-box&quot;/&gt;</span>
<a href="#l12.1439"></a><span id="l12.1439" class="difflineplus">+            &lt;xul:hbox flex=&quot;1&quot; class=&quot;tabs-alltabs-box-animate&quot; anonid=&quot;alltabs-box-animate&quot;/&gt;</span>
<a href="#l12.1440"></a><span id="l12.1440" class="difflineplus">+            &lt;xul:toolbarbutton class=&quot;tabs-alltabs-button&quot; type=&quot;menu&quot; anonid=&quot;alltabs-button&quot;</span>
<a href="#l12.1441"></a><span id="l12.1441" class="difflineplus">+                               tooltiptext=&quot;&amp;listAllTabs.label;&quot;&gt;</span>
<a href="#l12.1442"></a><span id="l12.1442" class="difflineplus">+             &lt;xul:menupopup class=&quot;tabs-alltabs-popup&quot; anonid=&quot;alltabs-popup&quot;</span>
<a href="#l12.1443"></a><span id="l12.1443" class="difflineplus">+                            position=&quot;after_end&quot;/&gt;</span>
<a href="#l12.1444"></a><span id="l12.1444" class="difflineplus">+            &lt;/xul:toolbarbutton&gt;</span>
<a href="#l12.1445"></a><span id="l12.1445" class="difflineplus">+          &lt;/xul:stack&gt;</span>
<a href="#l12.1446"></a><span id="l12.1446" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l12.1447"></a><span id="l12.1447" class="difflineplus">+          &lt;xul:hbox anonid=&quot;tabstrip-closebutton&quot; class=&quot;tabs-closebutton-box&quot; align=&quot;center&quot; pack=&quot;end&quot; chromedir=&quot;&amp;locale.dir;&quot;&gt;</span>
<a href="#l12.1448"></a><span id="l12.1448" class="difflineplus">+#endif</span>
<a href="#l12.1449"></a><span id="l12.1449" class="difflineplus">+          &lt;xul:toolbarbutton anonid=&quot;tabs-closebutton&quot;</span>
<a href="#l12.1450"></a><span id="l12.1450" class="difflineplus">+                             class=&quot;close-button tabs-closebutton&quot; chromedir=&quot;&amp;locale.dir;&quot;/&gt;</span>
<a href="#l12.1451"></a><span id="l12.1451" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l12.1452"></a><span id="l12.1452" class="difflineplus">+          &lt;/xul:hbox&gt;</span>
<a href="#l12.1453"></a><span id="l12.1453" class="difflineplus">+#endif</span>
<a href="#l12.1454"></a><span id="l12.1454" class="difflineplus">+        &lt;/xul:hbox&gt;</span>
<a href="#l12.1455"></a><span id="l12.1455" class="difflineplus">+      &lt;/xul:stack&gt;</span>
<a href="#l12.1456"></a><span id="l12.1456" class="difflineplus">+    &lt;/content&gt;</span>
<a href="#l12.1457"></a><span id="l12.1457" class="difflineplus">+    &lt;implementation implements=&quot;nsITimerCallback, nsIDOMEventListener&quot;&gt;</span>
<a href="#l12.1458"></a><span id="l12.1458" class="difflineplus">+      &lt;constructor&gt;</span>
<a href="#l12.1459"></a><span id="l12.1459" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l12.1460"></a><span id="l12.1460" class="difflineplus">+          var pb2 =</span>
<a href="#l12.1461"></a><span id="l12.1461" class="difflineplus">+              Components.classes['@mozilla.org/preferences-service;1'].</span>
<a href="#l12.1462"></a><span id="l12.1462" class="difflineplus">+              getService(Components.interfaces.nsIPrefBranch2);</span>
<a href="#l12.1463"></a><span id="l12.1463" class="difflineplus">+</span>
<a href="#l12.1464"></a><span id="l12.1464" class="difflineplus">+          try {</span>
<a href="#l12.1465"></a><span id="l12.1465" class="difflineplus">+            this.mTabMinWidth = pb2.getIntPref(&quot;browser.tabs.tabMinWidth&quot;);</span>
<a href="#l12.1466"></a><span id="l12.1466" class="difflineplus">+          } catch (e) {</span>
<a href="#l12.1467"></a><span id="l12.1467" class="difflineplus">+          }</span>
<a href="#l12.1468"></a><span id="l12.1468" class="difflineplus">+          try {</span>
<a href="#l12.1469"></a><span id="l12.1469" class="difflineplus">+            this.mTabMaxWidth = pb2.getIntPref(&quot;browser.tabs.tabMaxWidth&quot;);</span>
<a href="#l12.1470"></a><span id="l12.1470" class="difflineplus">+          } catch (e) {</span>
<a href="#l12.1471"></a><span id="l12.1471" class="difflineplus">+          }</span>
<a href="#l12.1472"></a><span id="l12.1472" class="difflineplus">+          try {</span>
<a href="#l12.1473"></a><span id="l12.1473" class="difflineplus">+            this.mTabClipWidth = pb2.getIntPref(&quot;browser.tabs.tabClipWidth&quot;);</span>
<a href="#l12.1474"></a><span id="l12.1474" class="difflineplus">+          } catch (e) {</span>
<a href="#l12.1475"></a><span id="l12.1475" class="difflineplus">+          }</span>
<a href="#l12.1476"></a><span id="l12.1476" class="difflineplus">+          try {</span>
<a href="#l12.1477"></a><span id="l12.1477" class="difflineplus">+            this.mCloseButtons = pb2.getIntPref(&quot;browser.tabs.closeButtons&quot;);</span>
<a href="#l12.1478"></a><span id="l12.1478" class="difflineplus">+          } catch (e) {</span>
<a href="#l12.1479"></a><span id="l12.1479" class="difflineplus">+          }</span>
<a href="#l12.1480"></a><span id="l12.1480" class="difflineplus">+</span>
<a href="#l12.1481"></a><span id="l12.1481" class="difflineplus">+          pb2.addObserver(&quot;browser.tabs.closeButtons&quot;, </span>
<a href="#l12.1482"></a><span id="l12.1482" class="difflineplus">+                          this._prefObserver, false);</span>
<a href="#l12.1483"></a><span id="l12.1483" class="difflineplus">+</span>
<a href="#l12.1484"></a><span id="l12.1484" class="difflineplus">+          window.addEventListener(&quot;resize&quot;, this, false);</span>
<a href="#l12.1485"></a><span id="l12.1485" class="difflineplus">+        ]]&gt;</span>
<a href="#l12.1486"></a><span id="l12.1486" class="difflineplus">+      &lt;/constructor&gt;</span>
<a href="#l12.1487"></a><span id="l12.1487" class="difflineplus">+</span>
<a href="#l12.1488"></a><span id="l12.1488" class="difflineplus">+      &lt;destructor&gt;</span>
<a href="#l12.1489"></a><span id="l12.1489" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l12.1490"></a><span id="l12.1490" class="difflineplus">+          var pb2 =</span>
<a href="#l12.1491"></a><span id="l12.1491" class="difflineplus">+              Components.classes['@mozilla.org/preferences-service;1'].</span>
<a href="#l12.1492"></a><span id="l12.1492" class="difflineplus">+              getService(Components.interfaces.nsIPrefBranch2);</span>
<a href="#l12.1493"></a><span id="l12.1493" class="difflineplus">+          pb2.removeObserver(&quot;browser.tabs.closeButtons&quot;, this._prefObserver);</span>
<a href="#l12.1494"></a><span id="l12.1494" class="difflineplus">+</span>
<a href="#l12.1495"></a><span id="l12.1495" class="difflineplus">+          // Release timer to avoid reference cycles.</span>
<a href="#l12.1496"></a><span id="l12.1496" class="difflineplus">+          if (this._animateTimer) {</span>
<a href="#l12.1497"></a><span id="l12.1497" class="difflineplus">+            this._animateTimer.cancel();</span>
<a href="#l12.1498"></a><span id="l12.1498" class="difflineplus">+            this._animateTimer = null;</span>
<a href="#l12.1499"></a><span id="l12.1499" class="difflineplus">+          }</span>
<a href="#l12.1500"></a><span id="l12.1500" class="difflineplus">+        ]]&gt;</span>
<a href="#l12.1501"></a><span id="l12.1501" class="difflineplus">+      &lt;/destructor&gt;</span>
<a href="#l12.1502"></a><span id="l12.1502" class="difflineplus">+</span>
<a href="#l12.1503"></a><span id="l12.1503" class="difflineplus">+      &lt;field name=&quot;mTabstripWidth&quot;&gt;0&lt;/field&gt;</span>
<a href="#l12.1504"></a><span id="l12.1504" class="difflineplus">+</span>
<a href="#l12.1505"></a><span id="l12.1505" class="difflineplus">+      &lt;field name=&quot;mTabstrip&quot;&gt;</span>
<a href="#l12.1506"></a><span id="l12.1506" class="difflineplus">+        document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;arrowscrollbox&quot;);</span>
<a href="#l12.1507"></a><span id="l12.1507" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.1508"></a><span id="l12.1508" class="difflineplus">+</span>
<a href="#l12.1509"></a><span id="l12.1509" class="difflineplus">+      &lt;field name=&quot;mTabstripClosebutton&quot;&gt;</span>
<a href="#l12.1510"></a><span id="l12.1510" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l12.1511"></a><span id="l12.1511" class="difflineplus">+        document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;tabstrip-closebutton&quot;);</span>
<a href="#l12.1512"></a><span id="l12.1512" class="difflineplus">+#else</span>
<a href="#l12.1513"></a><span id="l12.1513" class="difflineplus">+        document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;tabs-closebutton&quot;);</span>
<a href="#l12.1514"></a><span id="l12.1514" class="difflineplus">+#endif</span>
<a href="#l12.1515"></a><span id="l12.1515" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.1516"></a><span id="l12.1516" class="difflineplus">+</span>
<a href="#l12.1517"></a><span id="l12.1517" class="difflineplus">+      &lt;field name=&quot;_prefObserver&quot;&gt;({</span>
<a href="#l12.1518"></a><span id="l12.1518" class="difflineplus">+        tabbox: this,</span>
<a href="#l12.1519"></a><span id="l12.1519" class="difflineplus">+  </span>
<a href="#l12.1520"></a><span id="l12.1520" class="difflineplus">+        observe: function(subject, topic, data)</span>
<a href="#l12.1521"></a><span id="l12.1521" class="difflineplus">+        {</span>
<a href="#l12.1522"></a><span id="l12.1522" class="difflineplus">+          if (topic == &quot;nsPref:changed&quot;) {</span>
<a href="#l12.1523"></a><span id="l12.1523" class="difflineplus">+            switch (data) {</span>
<a href="#l12.1524"></a><span id="l12.1524" class="difflineplus">+            case &quot;browser.tabs.closeButtons&quot;:</span>
<a href="#l12.1525"></a><span id="l12.1525" class="difflineplus">+              subject.QueryInterface(Components.interfaces.nsIPrefBranch);</span>
<a href="#l12.1526"></a><span id="l12.1526" class="difflineplus">+              this.tabbox.mCloseButtons = subject.getIntPref(&quot;browser.tabs.closeButtons&quot;);</span>
<a href="#l12.1527"></a><span id="l12.1527" class="difflineplus">+              this.tabbox.adjustTabstrip();</span>
<a href="#l12.1528"></a><span id="l12.1528" class="difflineplus">+              break;</span>
<a href="#l12.1529"></a><span id="l12.1529" class="difflineplus">+            }</span>
<a href="#l12.1530"></a><span id="l12.1530" class="difflineplus">+          }</span>
<a href="#l12.1531"></a><span id="l12.1531" class="difflineplus">+        },</span>
<a href="#l12.1532"></a><span id="l12.1532" class="difflineplus">+  </span>
<a href="#l12.1533"></a><span id="l12.1533" class="difflineplus">+        QueryInterface: function(aIID)</span>
<a href="#l12.1534"></a><span id="l12.1534" class="difflineplus">+        {</span>
<a href="#l12.1535"></a><span id="l12.1535" class="difflineplus">+          if (aIID.equals(Components.interfaces.nsIObserver) ||</span>
<a href="#l12.1536"></a><span id="l12.1536" class="difflineplus">+              aIID.equals(Components.interfaces.nsISupports))</span>
<a href="#l12.1537"></a><span id="l12.1537" class="difflineplus">+            return this;</span>
<a href="#l12.1538"></a><span id="l12.1538" class="difflineplus">+          throw Components.results.NS_NOINTERFACE;</span>
<a href="#l12.1539"></a><span id="l12.1539" class="difflineplus">+        }</span>
<a href="#l12.1540"></a><span id="l12.1540" class="difflineplus">+        });</span>
<a href="#l12.1541"></a><span id="l12.1541" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.1542"></a><span id="l12.1542" class="difflineplus">+      &lt;field name=&quot;mTabMinWidth&quot;&gt;100&lt;/field&gt;</span>
<a href="#l12.1543"></a><span id="l12.1543" class="difflineplus">+      &lt;field name=&quot;mTabMaxWidth&quot;&gt;250&lt;/field&gt;</span>
<a href="#l12.1544"></a><span id="l12.1544" class="difflineplus">+      &lt;field name=&quot;mTabClipWidth&quot;&gt;140&lt;/field&gt;</span>
<a href="#l12.1545"></a><span id="l12.1545" class="difflineplus">+      &lt;field name=&quot;mCloseButtons&quot;&gt;1&lt;/field&gt;</span>
<a href="#l12.1546"></a><span id="l12.1546" class="difflineplus">+</span>
<a href="#l12.1547"></a><span id="l12.1547" class="difflineplus">+      &lt;method name=&quot;addTab&quot;&gt;</span>
<a href="#l12.1548"></a><span id="l12.1548" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l12.1549"></a><span id="l12.1549" class="difflineplus">+          var tab = document.createElementNS(</span>
<a href="#l12.1550"></a><span id="l12.1550" class="difflineplus">+            &quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;,</span>
<a href="#l12.1551"></a><span id="l12.1551" class="difflineplus">+                                             &quot;tab&quot;);</span>
<a href="#l12.1552"></a><span id="l12.1552" class="difflineplus">+          tab.setAttribute(&quot;crop&quot;, &quot;end&quot;);</span>
<a href="#l12.1553"></a><span id="l12.1553" class="difflineplus">+          tab.maxWidth = this.mTabMaxWidth;</span>
<a href="#l12.1554"></a><span id="l12.1554" class="difflineplus">+          tab.minWidth = this.mTabMinWidth;</span>
<a href="#l12.1555"></a><span id="l12.1555" class="difflineplus">+          tab.width = 0;</span>
<a href="#l12.1556"></a><span id="l12.1556" class="difflineplus">+          tab.setAttribute(&quot;flex&quot;, &quot;100&quot;);</span>
<a href="#l12.1557"></a><span id="l12.1557" class="difflineplus">+          tab.setAttribute(&quot;validate&quot;, &quot;never&quot;);</span>
<a href="#l12.1558"></a><span id="l12.1558" class="difflineplus">+          tab.setAttribute(&quot;onerror&quot;, &quot;this.removeAttribute('image');&quot;);</span>
<a href="#l12.1559"></a><span id="l12.1559" class="difflineplus">+          tab.className = &quot;tabbrowser-tab&quot;;</span>
<a href="#l12.1560"></a><span id="l12.1560" class="difflineplus">+</span>
<a href="#l12.1561"></a><span id="l12.1561" class="difflineplus">+          this.appendChild(tab);</span>
<a href="#l12.1562"></a><span id="l12.1562" class="difflineplus">+</span>
<a href="#l12.1563"></a><span id="l12.1563" class="difflineplus">+          // ugly workaround for bug 472020</span>
<a href="#l12.1564"></a><span id="l12.1564" class="difflineplus">+          if (this.firstChild.className == &quot;dummytab&quot;)</span>
<a href="#l12.1565"></a><span id="l12.1565" class="difflineplus">+            this.removeChild(this.firstChild);</span>
<a href="#l12.1566"></a><span id="l12.1566" class="difflineplus">+</span>
<a href="#l12.1567"></a><span id="l12.1567" class="difflineplus">+          if (document.defaultView.getComputedStyle(this, &quot;&quot;).direction == &quot;rtl&quot;) {</span>
<a href="#l12.1568"></a><span id="l12.1568" class="difflineplus">+            /* In RTL UI, the tab is visually added to the left side of the</span>
<a href="#l12.1569"></a><span id="l12.1569" class="difflineplus">+             * tabstrip. This means the tabstip has to be scrolled back in</span>
<a href="#l12.1570"></a><span id="l12.1570" class="difflineplus">+             * order to make sure the same set of tabs is visible before and</span>
<a href="#l12.1571"></a><span id="l12.1571" class="difflineplus">+             * after the new tab is added */</span>
<a href="#l12.1572"></a><span id="l12.1572" class="difflineplus">+</span>
<a href="#l12.1573"></a><span id="l12.1573" class="difflineplus">+            this.mTabstrip.scrollBoxObject</span>
<a href="#l12.1574"></a><span id="l12.1574" class="difflineplus">+                .scrollBy(this.firstChild.boxObject.width, 0);</span>
<a href="#l12.1575"></a><span id="l12.1575" class="difflineplus">+          }</span>
<a href="#l12.1576"></a><span id="l12.1576" class="difflineplus">+</span>
<a href="#l12.1577"></a><span id="l12.1577" class="difflineplus">+          tab._tPos = this.childNodes.length - 1;</span>
<a href="#l12.1578"></a><span id="l12.1578" class="difflineplus">+          if (tab._tPos &amp;&amp; tab.previousSibling.selected)</span>
<a href="#l12.1579"></a><span id="l12.1579" class="difflineplus">+            tab.setAttribute(&quot;afterselected&quot;, true);</span>
<a href="#l12.1580"></a><span id="l12.1580" class="difflineplus">+</span>
<a href="#l12.1581"></a><span id="l12.1581" class="difflineplus">+          // |setTimeout| here to ensure we're post reflow</span>
<a href="#l12.1582"></a><span id="l12.1582" class="difflineplus">+          var _delayedUpdate = function(aTabContainer) {</span>
<a href="#l12.1583"></a><span id="l12.1583" class="difflineplus">+            aTabContainer.adjustTabstrip();</span>
<a href="#l12.1584"></a><span id="l12.1584" class="difflineplus">+</span>
<a href="#l12.1585"></a><span id="l12.1585" class="difflineplus">+            if (aTabContainer.selectedItem != tab)</span>
<a href="#l12.1586"></a><span id="l12.1586" class="difflineplus">+              aTabContainer._notifyBackgroundTab(tab);</span>
<a href="#l12.1587"></a><span id="l12.1587" class="difflineplus">+</span>
<a href="#l12.1588"></a><span id="l12.1588" class="difflineplus">+            // XXXmano: this is a temporary workaround to bug 343585</span>
<a href="#l12.1589"></a><span id="l12.1589" class="difflineplus">+            // We need to manually update the scroll buttons disabled state</span>
<a href="#l12.1590"></a><span id="l12.1590" class="difflineplus">+            // if a tab was inserted to the overflow area or removed from it</span>
<a href="#l12.1591"></a><span id="l12.1591" class="difflineplus">+            // without any scrolling and when the tabbar has already</span>
<a href="#l12.1592"></a><span id="l12.1592" class="difflineplus">+            // overflowed.</span>
<a href="#l12.1593"></a><span id="l12.1593" class="difflineplus">+            aTabContainer.mTabstrip._updateScrollButtonsDisabledState();</span>
<a href="#l12.1594"></a><span id="l12.1594" class="difflineplus">+          }</span>
<a href="#l12.1595"></a><span id="l12.1595" class="difflineplus">+          setTimeout(_delayedUpdate, 0, this);</span>
<a href="#l12.1596"></a><span id="l12.1596" class="difflineplus">+</span>
<a href="#l12.1597"></a><span id="l12.1597" class="difflineplus">+          // Dispatch a new tab notification.  We do this once we're</span>
<a href="#l12.1598"></a><span id="l12.1598" class="difflineplus">+          // entirely done, so that things are in a consistent state</span>
<a href="#l12.1599"></a><span id="l12.1599" class="difflineplus">+          // even if the event listener opens or closes tabs.</span>
<a href="#l12.1600"></a><span id="l12.1600" class="difflineplus">+          var evt = document.createEvent(&quot;Events&quot;);</span>
<a href="#l12.1601"></a><span id="l12.1601" class="difflineplus">+          evt.initEvent(&quot;TabOpen&quot;, true, false);</span>
<a href="#l12.1602"></a><span id="l12.1602" class="difflineplus">+          tab.dispatchEvent(evt);</span>
<a href="#l12.1603"></a><span id="l12.1603" class="difflineplus">+</span>
<a href="#l12.1604"></a><span id="l12.1604" class="difflineplus">+          return tab;</span>
<a href="#l12.1605"></a><span id="l12.1605" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l12.1606"></a><span id="l12.1606" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1607"></a><span id="l12.1607" class="difflineplus">+</span>
<a href="#l12.1608"></a><span id="l12.1608" class="difflineplus">+</span>
<a href="#l12.1609"></a><span id="l12.1609" class="difflineplus">+      &lt;method name=&quot;adjustTabstrip&quot;&gt;</span>
<a href="#l12.1610"></a><span id="l12.1610" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l12.1611"></a><span id="l12.1611" class="difflineplus">+          // modes for tabstrip</span>
<a href="#l12.1612"></a><span id="l12.1612" class="difflineplus">+          // 0 - activetab  = close button on active tab only</span>
<a href="#l12.1613"></a><span id="l12.1613" class="difflineplus">+          // 1 - alltabs    = close buttons on all tabs</span>
<a href="#l12.1614"></a><span id="l12.1614" class="difflineplus">+          // 2 - noclose    = no close buttons at all</span>
<a href="#l12.1615"></a><span id="l12.1615" class="difflineplus">+          // 3 - closeatend = close button at the end of the tabstrip</span>
<a href="#l12.1616"></a><span id="l12.1616" class="difflineplus">+          switch (this.mCloseButtons) {</span>
<a href="#l12.1617"></a><span id="l12.1617" class="difflineplus">+          case 0:</span>
<a href="#l12.1618"></a><span id="l12.1618" class="difflineplus">+            this.setAttribute(&quot;closebuttons&quot;, &quot;activetab&quot;);</span>
<a href="#l12.1619"></a><span id="l12.1619" class="difflineplus">+            break;</span>
<a href="#l12.1620"></a><span id="l12.1620" class="difflineplus">+          case 1:</span>
<a href="#l12.1621"></a><span id="l12.1621" class="difflineplus">+            var width = this.firstChild.boxObject.width;</span>
<a href="#l12.1622"></a><span id="l12.1622" class="difflineplus">+            // 0 width is an invalid value and indicates</span>
<a href="#l12.1623"></a><span id="l12.1623" class="difflineplus">+            // an item without display, so ignore.</span>
<a href="#l12.1624"></a><span id="l12.1624" class="difflineplus">+            if (width &gt; this.mTabClipWidth || width == 0)</span>
<a href="#l12.1625"></a><span id="l12.1625" class="difflineplus">+              this.setAttribute(&quot;closebuttons&quot;, &quot;alltabs&quot;);</span>
<a href="#l12.1626"></a><span id="l12.1626" class="difflineplus">+            else</span>
<a href="#l12.1627"></a><span id="l12.1627" class="difflineplus">+              this.setAttribute(&quot;closebuttons&quot;, &quot;activetab&quot;);</span>
<a href="#l12.1628"></a><span id="l12.1628" class="difflineplus">+            break;</span>
<a href="#l12.1629"></a><span id="l12.1629" class="difflineplus">+          case 2:</span>
<a href="#l12.1630"></a><span id="l12.1630" class="difflineplus">+          case 3:</span>
<a href="#l12.1631"></a><span id="l12.1631" class="difflineplus">+            this.setAttribute(&quot;closebuttons&quot;, &quot;noclose&quot;);</span>
<a href="#l12.1632"></a><span id="l12.1632" class="difflineplus">+            break;</span>
<a href="#l12.1633"></a><span id="l12.1633" class="difflineplus">+          }</span>
<a href="#l12.1634"></a><span id="l12.1634" class="difflineplus">+          this.mTabstripClosebutton.collapsed = this.mCloseButtons != 3;</span>
<a href="#l12.1635"></a><span id="l12.1635" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l12.1636"></a><span id="l12.1636" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1637"></a><span id="l12.1637" class="difflineplus">+        </span>
<a href="#l12.1638"></a><span id="l12.1638" class="difflineplus">+      &lt;field name=&quot;_mPrefs&quot;&gt;null&lt;/field&gt;</span>
<a href="#l12.1639"></a><span id="l12.1639" class="difflineplus">+      &lt;property name=&quot;mPrefs&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l12.1640"></a><span id="l12.1640" class="difflineplus">+        &lt;getter&gt;</span>
<a href="#l12.1641"></a><span id="l12.1641" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l12.1642"></a><span id="l12.1642" class="difflineplus">+          if (!this._mPrefs) {</span>
<a href="#l12.1643"></a><span id="l12.1643" class="difflineplus">+            this._mPrefs =</span>
<a href="#l12.1644"></a><span id="l12.1644" class="difflineplus">+              Components.classes['@mozilla.org/preferences-service;1'].</span>
<a href="#l12.1645"></a><span id="l12.1645" class="difflineplus">+              getService(Components.interfaces.nsIPrefBranch2);</span>
<a href="#l12.1646"></a><span id="l12.1646" class="difflineplus">+          }</span>
<a href="#l12.1647"></a><span id="l12.1647" class="difflineplus">+          return this._mPrefs;</span>
<a href="#l12.1648"></a><span id="l12.1648" class="difflineplus">+        ]]&gt;</span>
<a href="#l12.1649"></a><span id="l12.1649" class="difflineplus">+        &lt;/getter&gt;</span>
<a href="#l12.1650"></a><span id="l12.1650" class="difflineplus">+      &lt;/property&gt;</span>
<a href="#l12.1651"></a><span id="l12.1651" class="difflineplus">+</span>
<a href="#l12.1652"></a><span id="l12.1652" class="difflineplus">+      &lt;method name=&quot;_handleTabSelect&quot;&gt;</span>
<a href="#l12.1653"></a><span id="l12.1653" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l12.1654"></a><span id="l12.1654" class="difflineplus">+          this.mTabstrip.ensureElementIsVisible(this.selectedItem);</span>
<a href="#l12.1655"></a><span id="l12.1655" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l12.1656"></a><span id="l12.1656" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1657"></a><span id="l12.1657" class="difflineplus">+</span>
<a href="#l12.1658"></a><span id="l12.1658" class="difflineplus">+      &lt;method name=&quot;_fillTrailingGap&quot;&gt;</span>
<a href="#l12.1659"></a><span id="l12.1659" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l12.1660"></a><span id="l12.1660" class="difflineplus">+          try {</span>
<a href="#l12.1661"></a><span id="l12.1661" class="difflineplus">+            // if we're at the right side (and not the logical end,</span>
<a href="#l12.1662"></a><span id="l12.1662" class="difflineplus">+            // which is why this works for both LTR and RTL)</span>
<a href="#l12.1663"></a><span id="l12.1663" class="difflineplus">+            // of the tabstrip, we need to ensure that we stay</span>
<a href="#l12.1664"></a><span id="l12.1664" class="difflineplus">+            // completely scrolled to the right side</span>
<a href="#l12.1665"></a><span id="l12.1665" class="difflineplus">+</span>
<a href="#l12.1666"></a><span id="l12.1666" class="difflineplus">+            var tabStrip = this.mTabstrip;</span>
<a href="#l12.1667"></a><span id="l12.1667" class="difflineplus">+            var scrollPos = {};</span>
<a href="#l12.1668"></a><span id="l12.1668" class="difflineplus">+            tabStrip.scrollBoxObject.getPosition(scrollPos, {});</span>
<a href="#l12.1669"></a><span id="l12.1669" class="difflineplus">+            var scrolledSize = {};</span>
<a href="#l12.1670"></a><span id="l12.1670" class="difflineplus">+            tabStrip.scrollBoxObject.getScrolledSize(scrolledSize, {});</span>
<a href="#l12.1671"></a><span id="l12.1671" class="difflineplus">+</span>
<a href="#l12.1672"></a><span id="l12.1672" class="difflineplus">+            if (scrollPos.value + tabStrip.boxObject.width &gt;=</span>
<a href="#l12.1673"></a><span id="l12.1673" class="difflineplus">+                scrolledSize.value) {</span>
<a href="#l12.1674"></a><span id="l12.1674" class="difflineplus">+              tabStrip.scrollByPixels(-1);</span>
<a href="#l12.1675"></a><span id="l12.1675" class="difflineplus">+            }</span>
<a href="#l12.1676"></a><span id="l12.1676" class="difflineplus">+          } catch (e) { }</span>
<a href="#l12.1677"></a><span id="l12.1677" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l12.1678"></a><span id="l12.1678" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1679"></a><span id="l12.1679" class="difflineplus">+</span>
<a href="#l12.1680"></a><span id="l12.1680" class="difflineplus">+      &lt;method name=&quot;handleEvent&quot;&gt;</span>
<a href="#l12.1681"></a><span id="l12.1681" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l12.1682"></a><span id="l12.1682" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l12.1683"></a><span id="l12.1683" class="difflineplus">+          switch (aEvent.type) {</span>
<a href="#l12.1684"></a><span id="l12.1684" class="difflineplus">+            case &quot;resize&quot;:</span>
<a href="#l12.1685"></a><span id="l12.1685" class="difflineplus">+              var width = this.mTabstrip.boxObject.width;</span>
<a href="#l12.1686"></a><span id="l12.1686" class="difflineplus">+              if (width != this.mTabstripWidth) {</span>
<a href="#l12.1687"></a><span id="l12.1687" class="difflineplus">+                this.adjustTabstrip();</span>
<a href="#l12.1688"></a><span id="l12.1688" class="difflineplus">+                this._fillTrailingGap();</span>
<a href="#l12.1689"></a><span id="l12.1689" class="difflineplus">+                this._handleTabSelect();</span>
<a href="#l12.1690"></a><span id="l12.1690" class="difflineplus">+                this.mTabstripWidth = width;</span>
<a href="#l12.1691"></a><span id="l12.1691" class="difflineplus">+              }</span>
<a href="#l12.1692"></a><span id="l12.1692" class="difflineplus">+              break;</span>
<a href="#l12.1693"></a><span id="l12.1693" class="difflineplus">+          }</span>
<a href="#l12.1694"></a><span id="l12.1694" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l12.1695"></a><span id="l12.1695" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1696"></a><span id="l12.1696" class="difflineplus">+</span>
<a href="#l12.1697"></a><span id="l12.1697" class="difflineplus">+      &lt;field name=&quot;mAllTabsPopup&quot;&gt;</span>
<a href="#l12.1698"></a><span id="l12.1698" class="difflineplus">+        document.getAnonymousElementByAttribute(this, </span>
<a href="#l12.1699"></a><span id="l12.1699" class="difflineplus">+                                                &quot;anonid&quot;, &quot;alltabs-popup&quot;);</span>
<a href="#l12.1700"></a><span id="l12.1700" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.1701"></a><span id="l12.1701" class="difflineplus">+</span>
<a href="#l12.1702"></a><span id="l12.1702" class="difflineplus">+      &lt;field name=&quot;mAllTabsBoxAnimate&quot;&gt;</span>
<a href="#l12.1703"></a><span id="l12.1703" class="difflineplus">+        document.getAnonymousElementByAttribute(this, </span>
<a href="#l12.1704"></a><span id="l12.1704" class="difflineplus">+                                                &quot;anonid&quot;,</span>
<a href="#l12.1705"></a><span id="l12.1705" class="difflineplus">+                                                &quot;alltabs-box-animate&quot;);</span>
<a href="#l12.1706"></a><span id="l12.1706" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.1707"></a><span id="l12.1707" class="difflineplus">+</span>
<a href="#l12.1708"></a><span id="l12.1708" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l12.1709"></a><span id="l12.1709" class="difflineplus">+      &lt;field name=&quot;mDownBoxAnimate&quot;&gt;</span>
<a href="#l12.1710"></a><span id="l12.1710" class="difflineplus">+        this.mTabstrip._scrollButtonDownBoxAnimate;</span>
<a href="#l12.1711"></a><span id="l12.1711" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.1712"></a><span id="l12.1712" class="difflineplus">+#endif</span>
<a href="#l12.1713"></a><span id="l12.1713" class="difflineplus">+</span>
<a href="#l12.1714"></a><span id="l12.1714" class="difflineplus">+      &lt;field name=&quot;_animateTimer&quot;&gt;null&lt;/field&gt;</span>
<a href="#l12.1715"></a><span id="l12.1715" class="difflineplus">+      &lt;field name=&quot;_animateStep&quot;&gt;-1&lt;/field&gt;</span>
<a href="#l12.1716"></a><span id="l12.1716" class="difflineplus">+      &lt;field name=&quot;_animateDelay&quot;&gt;25&lt;/field&gt;</span>
<a href="#l12.1717"></a><span id="l12.1717" class="difflineplus">+      &lt;field name=&quot;_animatePercents&quot;&gt;</span>
<a href="#l12.1718"></a><span id="l12.1718" class="difflineplus">+       [1.00, 0.85, 0.80, 0.75, 0.71, 0.68, 0.65, 0.62, 0.59, 0.57,</span>
<a href="#l12.1719"></a><span id="l12.1719" class="difflineplus">+        0.54, 0.52, 0.50, 0.47, 0.45, 0.44, 0.42, 0.40, 0.38, 0.37,</span>
<a href="#l12.1720"></a><span id="l12.1720" class="difflineplus">+        0.35, 0.34, 0.32, 0.31, 0.30, 0.29, 0.28, 0.27, 0.26, 0.25,</span>
<a href="#l12.1721"></a><span id="l12.1721" class="difflineplus">+        0.24, 0.23, 0.23, 0.22, 0.22, 0.21, 0.21, 0.21, 0.20, 0.20,</span>
<a href="#l12.1722"></a><span id="l12.1722" class="difflineplus">+        0.20, 0.20, 0.20, 0.20, 0.20, 0.20, 0.19, 0.19, 0.19, 0.18,</span>
<a href="#l12.1723"></a><span id="l12.1723" class="difflineplus">+        0.18, 0.17, 0.17, 0.16, 0.15, 0.14, 0.13, 0.11, 0.09, 0.06]</span>
<a href="#l12.1724"></a><span id="l12.1724" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.1725"></a><span id="l12.1725" class="difflineplus">+</span>
<a href="#l12.1726"></a><span id="l12.1726" class="difflineplus">+      &lt;method name=&quot;_stopAnimation&quot;&gt;</span>
<a href="#l12.1727"></a><span id="l12.1727" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l12.1728"></a><span id="l12.1728" class="difflineplus">+          if (this._animateStep != -1) {</span>
<a href="#l12.1729"></a><span id="l12.1729" class="difflineplus">+            if (this._animateTimer)</span>
<a href="#l12.1730"></a><span id="l12.1730" class="difflineplus">+              this._animateTimer.cancel();</span>
<a href="#l12.1731"></a><span id="l12.1731" class="difflineplus">+</span>
<a href="#l12.1732"></a><span id="l12.1732" class="difflineplus">+            this._animateStep = -1;</span>
<a href="#l12.1733"></a><span id="l12.1733" class="difflineplus">+            this.mAllTabsBoxAnimate.style.opacity = 0.0;</span>
<a href="#l12.1734"></a><span id="l12.1734" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l12.1735"></a><span id="l12.1735" class="difflineplus">+            this.mDownBoxAnimate.style.opacity = 0.0;</span>
<a href="#l12.1736"></a><span id="l12.1736" class="difflineplus">+#endif</span>
<a href="#l12.1737"></a><span id="l12.1737" class="difflineplus">+          }</span>
<a href="#l12.1738"></a><span id="l12.1738" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l12.1739"></a><span id="l12.1739" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1740"></a><span id="l12.1740" class="difflineplus">+      </span>
<a href="#l12.1741"></a><span id="l12.1741" class="difflineplus">+      &lt;method name=&quot;_notifyBackgroundTab&quot;&gt;</span>
<a href="#l12.1742"></a><span id="l12.1742" class="difflineplus">+        &lt;parameter name=&quot;aTab&quot;/&gt;</span>
<a href="#l12.1743"></a><span id="l12.1743" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l12.1744"></a><span id="l12.1744" class="difflineplus">+          var tsbo = this.mTabstrip.scrollBoxObject;</span>
<a href="#l12.1745"></a><span id="l12.1745" class="difflineplus">+          var tsboStart = tsbo.screenX;</span>
<a href="#l12.1746"></a><span id="l12.1746" class="difflineplus">+          var tsboEnd = tsboStart + tsbo.width;</span>
<a href="#l12.1747"></a><span id="l12.1747" class="difflineplus">+</span>
<a href="#l12.1748"></a><span id="l12.1748" class="difflineplus">+          var ctbo = aTab.boxObject;</span>
<a href="#l12.1749"></a><span id="l12.1749" class="difflineplus">+          var ctboStart = ctbo.screenX;</span>
<a href="#l12.1750"></a><span id="l12.1750" class="difflineplus">+          var ctboEnd = ctboStart + ctbo.width;</span>
<a href="#l12.1751"></a><span id="l12.1751" class="difflineplus">+</span>
<a href="#l12.1752"></a><span id="l12.1752" class="difflineplus">+          // Is the new tab already completely visible?</span>
<a href="#l12.1753"></a><span id="l12.1753" class="difflineplus">+          if (tsboStart &lt;= ctboStart &amp;&amp; ctboEnd &lt;= tsboEnd)</span>
<a href="#l12.1754"></a><span id="l12.1754" class="difflineplus">+            return;</span>
<a href="#l12.1755"></a><span id="l12.1755" class="difflineplus">+</span>
<a href="#l12.1756"></a><span id="l12.1756" class="difflineplus">+          if (this.mTabstrip.smoothScroll) {</span>
<a href="#l12.1757"></a><span id="l12.1757" class="difflineplus">+            var selStart = this.selectedItem.boxObject.screenX;</span>
<a href="#l12.1758"></a><span id="l12.1758" class="difflineplus">+            var selEnd = selStart + this.selectedItem.boxObject.width;</span>
<a href="#l12.1759"></a><span id="l12.1759" class="difflineplus">+</span>
<a href="#l12.1760"></a><span id="l12.1760" class="difflineplus">+            // Can we make both the new tab and the selected tab completely visible?</span>
<a href="#l12.1761"></a><span id="l12.1761" class="difflineplus">+            if (Math.max(ctboEnd - selStart, selEnd - ctboStart) &lt;= tsbo.width) {</span>
<a href="#l12.1762"></a><span id="l12.1762" class="difflineplus">+              this.mTabstrip.ensureElementIsVisible(aTab);</span>
<a href="#l12.1763"></a><span id="l12.1763" class="difflineplus">+              return;</span>
<a href="#l12.1764"></a><span id="l12.1764" class="difflineplus">+            }</span>
<a href="#l12.1765"></a><span id="l12.1765" class="difflineplus">+</span>
<a href="#l12.1766"></a><span id="l12.1766" class="difflineplus">+            this.mTabstrip._smoothScrollByPixels(this.mTabstrip._isLTRScrollbox ?</span>
<a href="#l12.1767"></a><span id="l12.1767" class="difflineplus">+                                                 selStart - tsboStart : selEnd - tsboEnd);</span>
<a href="#l12.1768"></a><span id="l12.1768" class="difflineplus">+          }</span>
<a href="#l12.1769"></a><span id="l12.1769" class="difflineplus">+</span>
<a href="#l12.1770"></a><span id="l12.1770" class="difflineplus">+          // start the flash timer</span>
<a href="#l12.1771"></a><span id="l12.1771" class="difflineplus">+          this._animateStep = 0;</span>
<a href="#l12.1772"></a><span id="l12.1772" class="difflineplus">+</span>
<a href="#l12.1773"></a><span id="l12.1773" class="difflineplus">+          if (!this._animateTimer) </span>
<a href="#l12.1774"></a><span id="l12.1774" class="difflineplus">+            this._animateTimer =</span>
<a href="#l12.1775"></a><span id="l12.1775" class="difflineplus">+              Components.classes[&quot;@mozilla.org/timer;1&quot;]</span>
<a href="#l12.1776"></a><span id="l12.1776" class="difflineplus">+                        .createInstance(Components.interfaces.nsITimer);</span>
<a href="#l12.1777"></a><span id="l12.1777" class="difflineplus">+          else</span>
<a href="#l12.1778"></a><span id="l12.1778" class="difflineplus">+             this._animateTimer.cancel();</span>
<a href="#l12.1779"></a><span id="l12.1779" class="difflineplus">+</span>
<a href="#l12.1780"></a><span id="l12.1780" class="difflineplus">+          this._animateTimer.initWithCallback(this, this._animateDelay,</span>
<a href="#l12.1781"></a><span id="l12.1781" class="difflineplus">+                                              this._animateTimer.TYPE_REPEATING_SLACK);</span>
<a href="#l12.1782"></a><span id="l12.1782" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l12.1783"></a><span id="l12.1783" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1784"></a><span id="l12.1784" class="difflineplus">+      </span>
<a href="#l12.1785"></a><span id="l12.1785" class="difflineplus">+      &lt;method name=&quot;notify&quot;&gt;</span>
<a href="#l12.1786"></a><span id="l12.1786" class="difflineplus">+        &lt;parameter name=&quot;aTimer&quot;/&gt;</span>
<a href="#l12.1787"></a><span id="l12.1787" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l12.1788"></a><span id="l12.1788" class="difflineplus">+          if (!document)</span>
<a href="#l12.1789"></a><span id="l12.1789" class="difflineplus">+            aTimer.cancel();</span>
<a href="#l12.1790"></a><span id="l12.1790" class="difflineplus">+</span>
<a href="#l12.1791"></a><span id="l12.1791" class="difflineplus">+          var percent = this._animatePercents[this._animateStep];</span>
<a href="#l12.1792"></a><span id="l12.1792" class="difflineplus">+          this.mAllTabsBoxAnimate.style.opacity = percent;</span>
<a href="#l12.1793"></a><span id="l12.1793" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l12.1794"></a><span id="l12.1794" class="difflineplus">+          this.mDownBoxAnimate.style.opacity = percent;</span>
<a href="#l12.1795"></a><span id="l12.1795" class="difflineplus">+#endif</span>
<a href="#l12.1796"></a><span id="l12.1796" class="difflineplus">+</span>
<a href="#l12.1797"></a><span id="l12.1797" class="difflineplus">+          if (this._animateStep &lt; (this._animatePercents.length - 1))</span>
<a href="#l12.1798"></a><span id="l12.1798" class="difflineplus">+            this._animateStep++;</span>
<a href="#l12.1799"></a><span id="l12.1799" class="difflineplus">+          else</span>
<a href="#l12.1800"></a><span id="l12.1800" class="difflineplus">+            this._stopAnimation();</span>
<a href="#l12.1801"></a><span id="l12.1801" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l12.1802"></a><span id="l12.1802" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1803"></a><span id="l12.1803" class="difflineplus">+    &lt;/implementation&gt;</span>
<a href="#l12.1804"></a><span id="l12.1804" class="difflineplus">+    &lt;handlers&gt;</span>
<a href="#l12.1805"></a><span id="l12.1805" class="difflineplus">+      &lt;handler event=&quot;select&quot; action=&quot;this._handleTabSelect();&quot;/&gt;</span>
<a href="#l12.1806"></a><span id="l12.1806" class="difflineplus">+    &lt;/handlers&gt;</span>
<a href="#l12.1807"></a><span id="l12.1807" class="difflineplus">+  &lt;/binding&gt;</span>
<a href="#l12.1808"></a><span id="l12.1808" class="difflineplus">+</span>
<a href="#l12.1809"></a><span id="l12.1809" class="difflineplus">+  &lt;!-- alltabs-popup binding</span>
<a href="#l12.1810"></a><span id="l12.1810" class="difflineplus">+       This binding relies on the structure of the tabbrowser binding.</span>
<a href="#l12.1811"></a><span id="l12.1811" class="difflineplus">+       Therefore it should only be used as a child of the tabs element.</span>
<a href="#l12.1812"></a><span id="l12.1812" class="difflineplus">+       This binding is exposed as a pseudo-public-API so themes can customize</span>
<a href="#l12.1813"></a><span id="l12.1813" class="difflineplus">+       the tabbar appearance without having to be scriptable</span>
<a href="#l12.1814"></a><span id="l12.1814" class="difflineplus">+       (see globalBindings.xml in Pinstripe for example).</span>
<a href="#l12.1815"></a><span id="l12.1815" class="difflineplus">+  --&gt;</span>
<a href="#l12.1816"></a><span id="l12.1816" class="difflineplus">+</span>
<a href="#l12.1817"></a><span id="l12.1817" class="difflineplus">+  &lt;binding id=&quot;tabbrowser-alltabs-popup&quot;</span>
<a href="#l12.1818"></a><span id="l12.1818" class="difflineplus">+           extends=&quot;chrome://global/content/bindings/popup.xml#popup&quot;&gt;</span>
<a href="#l12.1819"></a><span id="l12.1819" class="difflineplus">+    &lt;implementation implements=&quot;nsIDOMEventListener&quot;&gt;</span>
<a href="#l12.1820"></a><span id="l12.1820" class="difflineplus">+      &lt;field name=&quot;_xulWindow&quot;&gt;</span>
<a href="#l12.1821"></a><span id="l12.1821" class="difflineplus">+        null</span>
<a href="#l12.1822"></a><span id="l12.1822" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l12.1823"></a><span id="l12.1823" class="difflineplus">+</span>
<a href="#l12.1824"></a><span id="l12.1824" class="difflineplus">+      &lt;constructor&gt;&lt;![CDATA[</span>
<a href="#l12.1825"></a><span id="l12.1825" class="difflineplus">+        // We cannot cache the XULBrowserWindow object itself since it might</span>
<a href="#l12.1826"></a><span id="l12.1826" class="difflineplus">+        // be set after this binding is constructed.</span>
<a href="#l12.1827"></a><span id="l12.1827" class="difflineplus">+        try {</span>
<a href="#l12.1828"></a><span id="l12.1828" class="difflineplus">+          this._xulWindow = </span>
<a href="#l12.1829"></a><span id="l12.1829" class="difflineplus">+            window.QueryInterface(Components.interfaces.nsIInterfaceRequestor)</span>
<a href="#l12.1830"></a><span id="l12.1830" class="difflineplus">+                  .getInterface(Components.interfaces.nsIWebNavigation)</span>
<a href="#l12.1831"></a><span id="l12.1831" class="difflineplus">+                  .QueryInterface(Components.interfaces.nsIDocShellTreeItem)</span>
<a href="#l12.1832"></a><span id="l12.1832" class="difflineplus">+                  .treeOwner</span>
<a href="#l12.1833"></a><span id="l12.1833" class="difflineplus">+                  .QueryInterface(Components.interfaces.nsIInterfaceRequestor)</span>
<a href="#l12.1834"></a><span id="l12.1834" class="difflineplus">+                  .getInterface(Components.interfaces.nsIXULWindow);</span>
<a href="#l12.1835"></a><span id="l12.1835" class="difflineplus">+        }</span>
<a href="#l12.1836"></a><span id="l12.1836" class="difflineplus">+        catch(ex) { }</span>
<a href="#l12.1837"></a><span id="l12.1837" class="difflineplus">+      ]]&gt;&lt;/constructor&gt;</span>
<a href="#l12.1838"></a><span id="l12.1838" class="difflineplus">+</span>
<a href="#l12.1839"></a><span id="l12.1839" class="difflineplus">+      &lt;method name=&quot;_menuItemOnCommand&quot;&gt;</span>
<a href="#l12.1840"></a><span id="l12.1840" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l12.1841"></a><span id="l12.1841" class="difflineplus">+</span>
<a href="#l12.1842"></a><span id="l12.1842" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l12.1843"></a><span id="l12.1843" class="difflineplus">+          var tabcontainer = document.getBindingParent(this);</span>
<a href="#l12.1844"></a><span id="l12.1844" class="difflineplus">+          tabcontainer.selectedItem = aEvent.target.tab;</span>
<a href="#l12.1845"></a><span id="l12.1845" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l12.1846"></a><span id="l12.1846" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1847"></a><span id="l12.1847" class="difflineplus">+</span>
<a href="#l12.1848"></a><span id="l12.1848" class="difflineplus">+      &lt;method name=&quot;_tabOnAttrModified&quot;&gt;</span>
<a href="#l12.1849"></a><span id="l12.1849" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l12.1850"></a><span id="l12.1850" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l12.1851"></a><span id="l12.1851" class="difflineplus">+          var menuItem = aEvent.target.mCorrespondingMenuitem;</span>
<a href="#l12.1852"></a><span id="l12.1852" class="difflineplus">+          if (menuItem) {</span>
<a href="#l12.1853"></a><span id="l12.1853" class="difflineplus">+            var attrName = aEvent.attrName;</span>
<a href="#l12.1854"></a><span id="l12.1854" class="difflineplus">+            switch (attrName) {</span>
<a href="#l12.1855"></a><span id="l12.1855" class="difflineplus">+              case &quot;label&quot;:</span>
<a href="#l12.1856"></a><span id="l12.1856" class="difflineplus">+              case &quot;crop&quot;:</span>
<a href="#l12.1857"></a><span id="l12.1857" class="difflineplus">+              case &quot;typing&quot;:</span>
<a href="#l12.1858"></a><span id="l12.1858" class="difflineplus">+              case &quot;typed&quot;:</span>
<a href="#l12.1859"></a><span id="l12.1859" class="difflineplus">+              case &quot;unread&quot;:</span>
<a href="#l12.1860"></a><span id="l12.1860" class="difflineplus">+              case &quot;attention&quot;:</span>
<a href="#l12.1861"></a><span id="l12.1861" class="difflineplus">+              case &quot;status&quot;:</span>
<a href="#l12.1862"></a><span id="l12.1862" class="difflineplus">+              case &quot;chat&quot;:</span>
<a href="#l12.1863"></a><span id="l12.1863" class="difflineplus">+              case &quot;image&quot;:</span>
<a href="#l12.1864"></a><span id="l12.1864" class="difflineplus">+              case &quot;selected&quot;:</span>
<a href="#l12.1865"></a><span id="l12.1865" class="difflineplus">+                if (aEvent.attrChange == aEvent.REMOVAL)</span>
<a href="#l12.1866"></a><span id="l12.1866" class="difflineplus">+                  menuItem.removeAttribute(attrName);</span>
<a href="#l12.1867"></a><span id="l12.1867" class="difflineplus">+                else</span>
<a href="#l12.1868"></a><span id="l12.1868" class="difflineplus">+                  menuItem.setAttribute(attrName, aEvent.newValue);</span>
<a href="#l12.1869"></a><span id="l12.1869" class="difflineplus">+            }</span>
<a href="#l12.1870"></a><span id="l12.1870" class="difflineplus">+          }</span>
<a href="#l12.1871"></a><span id="l12.1871" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l12.1872"></a><span id="l12.1872" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1873"></a><span id="l12.1873" class="difflineplus">+</span>
<a href="#l12.1874"></a><span id="l12.1874" class="difflineplus">+      &lt;method name=&quot;_tabOnTabClose&quot;&gt;</span>
<a href="#l12.1875"></a><span id="l12.1875" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l12.1876"></a><span id="l12.1876" class="difflineplus">+</span>
<a href="#l12.1877"></a><span id="l12.1877" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l12.1878"></a><span id="l12.1878" class="difflineplus">+          var menuItem = aEvent.target.mCorrespondingMenuitem;</span>
<a href="#l12.1879"></a><span id="l12.1879" class="difflineplus">+          if (menuItem)</span>
<a href="#l12.1880"></a><span id="l12.1880" class="difflineplus">+            this.removeChild(menuItem);</span>
<a href="#l12.1881"></a><span id="l12.1881" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l12.1882"></a><span id="l12.1882" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1883"></a><span id="l12.1883" class="difflineplus">+</span>
<a href="#l12.1884"></a><span id="l12.1884" class="difflineplus">+      &lt;method name=&quot;handleEvent&quot;&gt;</span>
<a href="#l12.1885"></a><span id="l12.1885" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l12.1886"></a><span id="l12.1886" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l12.1887"></a><span id="l12.1887" class="difflineplus">+          if (!aEvent.isTrusted)</span>
<a href="#l12.1888"></a><span id="l12.1888" class="difflineplus">+            return;</span>
<a href="#l12.1889"></a><span id="l12.1889" class="difflineplus">+</span>
<a href="#l12.1890"></a><span id="l12.1890" class="difflineplus">+          switch (aEvent.type) {</span>
<a href="#l12.1891"></a><span id="l12.1891" class="difflineplus">+            case &quot;command&quot;:</span>
<a href="#l12.1892"></a><span id="l12.1892" class="difflineplus">+              this._menuItemOnCommand(aEvent);</span>
<a href="#l12.1893"></a><span id="l12.1893" class="difflineplus">+              break;</span>
<a href="#l12.1894"></a><span id="l12.1894" class="difflineplus">+            case &quot;DOMAttrModified&quot;:</span>
<a href="#l12.1895"></a><span id="l12.1895" class="difflineplus">+              this._tabOnAttrModified(aEvent);</span>
<a href="#l12.1896"></a><span id="l12.1896" class="difflineplus">+              break;</span>
<a href="#l12.1897"></a><span id="l12.1897" class="difflineplus">+            case &quot;TabClose&quot;:</span>
<a href="#l12.1898"></a><span id="l12.1898" class="difflineplus">+              this._tabOnTabClose(aEvent);</span>
<a href="#l12.1899"></a><span id="l12.1899" class="difflineplus">+              break;</span>
<a href="#l12.1900"></a><span id="l12.1900" class="difflineplus">+            case &quot;TabOpen&quot;:</span>
<a href="#l12.1901"></a><span id="l12.1901" class="difflineplus">+              this._createTabMenuItem(aEvent.originalTarget);</span>
<a href="#l12.1902"></a><span id="l12.1902" class="difflineplus">+              break;</span>
<a href="#l12.1903"></a><span id="l12.1903" class="difflineplus">+            case &quot;scroll&quot;:</span>
<a href="#l12.1904"></a><span id="l12.1904" class="difflineplus">+              this._updateTabsVisibilityStatus();</span>
<a href="#l12.1905"></a><span id="l12.1905" class="difflineplus">+              break;</span>
<a href="#l12.1906"></a><span id="l12.1906" class="difflineplus">+          }</span>
<a href="#l12.1907"></a><span id="l12.1907" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l12.1908"></a><span id="l12.1908" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1909"></a><span id="l12.1909" class="difflineplus">+</span>
<a href="#l12.1910"></a><span id="l12.1910" class="difflineplus">+      &lt;method name=&quot;_updateTabsVisibilityStatus&quot;&gt;</span>
<a href="#l12.1911"></a><span id="l12.1911" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l12.1912"></a><span id="l12.1912" class="difflineplus">+          var tabContainer = document.getBindingParent(this);</span>
<a href="#l12.1913"></a><span id="l12.1913" class="difflineplus">+          // We don't want menu item decoration unless there is overflow.</span>
<a href="#l12.1914"></a><span id="l12.1914" class="difflineplus">+          if (tabContainer.getAttribute(&quot;overflow&quot;) != &quot;true&quot;)</span>
<a href="#l12.1915"></a><span id="l12.1915" class="difflineplus">+            return;</span>
<a href="#l12.1916"></a><span id="l12.1916" class="difflineplus">+</span>
<a href="#l12.1917"></a><span id="l12.1917" class="difflineplus">+          var tabstripBO = tabContainer.mTabstrip.scrollBoxObject;</span>
<a href="#l12.1918"></a><span id="l12.1918" class="difflineplus">+          for (var i = 0; i &lt; this.childNodes.length; i++) {</span>
<a href="#l12.1919"></a><span id="l12.1919" class="difflineplus">+            var curTabBO = this.childNodes[i].tab.boxObject;</span>
<a href="#l12.1920"></a><span id="l12.1920" class="difflineplus">+            if (curTabBO.screenX &gt;= tabstripBO.screenX &amp;&amp;</span>
<a href="#l12.1921"></a><span id="l12.1921" class="difflineplus">+                curTabBO.screenX + curTabBO.width &lt;= tabstripBO.screenX + tabstripBO.width)</span>
<a href="#l12.1922"></a><span id="l12.1922" class="difflineplus">+              this.childNodes[i].setAttribute(&quot;tabIsVisible&quot;, &quot;true&quot;); </span>
<a href="#l12.1923"></a><span id="l12.1923" class="difflineplus">+            else</span>
<a href="#l12.1924"></a><span id="l12.1924" class="difflineplus">+              this.childNodes[i].removeAttribute(&quot;tabIsVisible&quot;);</span>
<a href="#l12.1925"></a><span id="l12.1925" class="difflineplus">+          }</span>
<a href="#l12.1926"></a><span id="l12.1926" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l12.1927"></a><span id="l12.1927" class="difflineplus">+</span>
<a href="#l12.1928"></a><span id="l12.1928" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1929"></a><span id="l12.1929" class="difflineplus">+</span>
<a href="#l12.1930"></a><span id="l12.1930" class="difflineplus">+      &lt;method name=&quot;_createTabMenuItem&quot;&gt;</span>
<a href="#l12.1931"></a><span id="l12.1931" class="difflineplus">+        &lt;parameter name=&quot;aTab&quot;/&gt;</span>
<a href="#l12.1932"></a><span id="l12.1932" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l12.1933"></a><span id="l12.1933" class="difflineplus">+          var menuItem = document.createElementNS(</span>
<a href="#l12.1934"></a><span id="l12.1934" class="difflineplus">+            &quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;, </span>
<a href="#l12.1935"></a><span id="l12.1935" class="difflineplus">+            &quot;menuitem&quot;);</span>
<a href="#l12.1936"></a><span id="l12.1936" class="difflineplus">+</span>
<a href="#l12.1937"></a><span id="l12.1937" class="difflineplus">+          menuItem.setAttribute(&quot;class&quot;, &quot;menuitem-iconic alltabs-item&quot;);</span>
<a href="#l12.1938"></a><span id="l12.1938" class="difflineplus">+</span>
<a href="#l12.1939"></a><span id="l12.1939" class="difflineplus">+          menuItem.setAttribute(&quot;label&quot;, aTab.label);</span>
<a href="#l12.1940"></a><span id="l12.1940" class="difflineplus">+          menuItem.setAttribute(&quot;crop&quot;, aTab.getAttribute(&quot;crop&quot;));</span>
<a href="#l12.1941"></a><span id="l12.1941" class="difflineplus">+          menuItem.setAttribute(&quot;image&quot;, aTab.getAttribute(&quot;image&quot;));</span>
<a href="#l12.1942"></a><span id="l12.1942" class="difflineplus">+</span>
<a href="#l12.1943"></a><span id="l12.1943" class="difflineplus">+          [&quot;typing&quot;, &quot;typed&quot;, &quot;status&quot;, &quot;chat&quot;,</span>
<a href="#l12.1944"></a><span id="l12.1944" class="difflineplus">+           &quot;attention&quot;, &quot;unread&quot;].forEach(function (aAttr) {</span>
<a href="#l12.1945"></a><span id="l12.1945" class="difflineplus">+            if (aTab.hasAttribute(aAttr))</span>
<a href="#l12.1946"></a><span id="l12.1946" class="difflineplus">+              menuItem.setAttribute(aAttr, aTab.getAttribute(aAttr));</span>
<a href="#l12.1947"></a><span id="l12.1947" class="difflineplus">+          });</span>
<a href="#l12.1948"></a><span id="l12.1948" class="difflineplus">+          if (aTab.hasAttribute(&quot;typing&quot;))</span>
<a href="#l12.1949"></a><span id="l12.1949" class="difflineplus">+            menuItem.setAttribute(&quot;typing&quot;, aTab.getAttribute(&quot;typing&quot;));</span>
<a href="#l12.1950"></a><span id="l12.1950" class="difflineplus">+          if (aTab.selected)</span>
<a href="#l12.1951"></a><span id="l12.1951" class="difflineplus">+            menuItem.setAttribute(&quot;selected&quot;, &quot;true&quot;);</span>
<a href="#l12.1952"></a><span id="l12.1952" class="difflineplus">+</span>
<a href="#l12.1953"></a><span id="l12.1953" class="difflineplus">+          // Keep some attributes of the menuitem in sync with its</span>
<a href="#l12.1954"></a><span id="l12.1954" class="difflineplus">+          // corresponding tab (e.g. the tab label)</span>
<a href="#l12.1955"></a><span id="l12.1955" class="difflineplus">+          aTab.mCorrespondingMenuitem = menuItem;</span>
<a href="#l12.1956"></a><span id="l12.1956" class="difflineplus">+          aTab.addEventListener(&quot;DOMAttrModified&quot;, this, false);</span>
<a href="#l12.1957"></a><span id="l12.1957" class="difflineplus">+          aTab.addEventListener(&quot;TabClose&quot;, this, false);</span>
<a href="#l12.1958"></a><span id="l12.1958" class="difflineplus">+          menuItem.tab = aTab;</span>
<a href="#l12.1959"></a><span id="l12.1959" class="difflineplus">+          menuItem.addEventListener(&quot;command&quot;, this, false);</span>
<a href="#l12.1960"></a><span id="l12.1960" class="difflineplus">+</span>
<a href="#l12.1961"></a><span id="l12.1961" class="difflineplus">+          this.appendChild(menuItem);</span>
<a href="#l12.1962"></a><span id="l12.1962" class="difflineplus">+          return menuItem;</span>
<a href="#l12.1963"></a><span id="l12.1963" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l12.1964"></a><span id="l12.1964" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l12.1965"></a><span id="l12.1965" class="difflineplus">+    &lt;/implementation&gt;</span>
<a href="#l12.1966"></a><span id="l12.1966" class="difflineplus">+</span>
<a href="#l12.1967"></a><span id="l12.1967" class="difflineplus">+    &lt;handlers&gt;</span>
<a href="#l12.1968"></a><span id="l12.1968" class="difflineplus">+      &lt;handler event=&quot;popupshowing&quot;&gt;</span>
<a href="#l12.1969"></a><span id="l12.1969" class="difflineplus">+</span>
<a href="#l12.1970"></a><span id="l12.1970" class="difflineplus">+      &lt;![CDATA[</span>
<a href="#l12.1971"></a><span id="l12.1971" class="difflineplus">+        // set up the menu popup</span>
<a href="#l12.1972"></a><span id="l12.1972" class="difflineplus">+        var tabcontainer = document.getBindingParent(this);</span>
<a href="#l12.1973"></a><span id="l12.1973" class="difflineplus">+        var tabs = tabcontainer.childNodes;</span>
<a href="#l12.1974"></a><span id="l12.1974" class="difflineplus">+</span>
<a href="#l12.1975"></a><span id="l12.1975" class="difflineplus">+        // Listen for changes in the tab bar.</span>
<a href="#l12.1976"></a><span id="l12.1976" class="difflineplus">+        tabcontainer.addEventListener(&quot;TabOpen&quot;, this, false);</span>
<a href="#l12.1977"></a><span id="l12.1977" class="difflineplus">+        tabcontainer.mTabstrip.addEventListener(&quot;scroll&quot;, this, false);</span>
<a href="#l12.1978"></a><span id="l12.1978" class="difflineplus">+</span>
<a href="#l12.1979"></a><span id="l12.1979" class="difflineplus">+        // if an animation is in progress and the user</span>
<a href="#l12.1980"></a><span id="l12.1980" class="difflineplus">+        // clicks on the &quot;all tabs&quot; button, stop the animation</span>
<a href="#l12.1981"></a><span id="l12.1981" class="difflineplus">+        tabcontainer._stopAnimation();</span>
<a href="#l12.1982"></a><span id="l12.1982" class="difflineplus">+</span>
<a href="#l12.1983"></a><span id="l12.1983" class="difflineplus">+        for (var i = 0; i &lt; tabs.length; i++) {</span>
<a href="#l12.1984"></a><span id="l12.1984" class="difflineplus">+          this._createTabMenuItem(tabs[i]);</span>
<a href="#l12.1985"></a><span id="l12.1985" class="difflineplus">+        }</span>
<a href="#l12.1986"></a><span id="l12.1986" class="difflineplus">+        this._updateTabsVisibilityStatus();</span>
<a href="#l12.1987"></a><span id="l12.1987" class="difflineplus">+      ]]&gt;&lt;/handler&gt;</span>
<a href="#l12.1988"></a><span id="l12.1988" class="difflineplus">+</span>
<a href="#l12.1989"></a><span id="l12.1989" class="difflineplus">+      &lt;handler event=&quot;popuphiding&quot;&gt;</span>
<a href="#l12.1990"></a><span id="l12.1990" class="difflineplus">+      &lt;![CDATA[</span>
<a href="#l12.1991"></a><span id="l12.1991" class="difflineplus">+        // clear out the menu popup and remove the listeners</span>
<a href="#l12.1992"></a><span id="l12.1992" class="difflineplus">+        while (this.hasChildNodes()) {</span>
<a href="#l12.1993"></a><span id="l12.1993" class="difflineplus">+          var menuItem = this.lastChild;</span>
<a href="#l12.1994"></a><span id="l12.1994" class="difflineplus">+          menuItem.removeEventListener(&quot;command&quot;, this, false);</span>
<a href="#l12.1995"></a><span id="l12.1995" class="difflineplus">+          menuItem.tab.removeEventListener(&quot;DOMAttrModified&quot;, this, false);</span>
<a href="#l12.1996"></a><span id="l12.1996" class="difflineplus">+          menuItem.tab.removeEventListener(&quot;TabClose&quot;, this, false);</span>
<a href="#l12.1997"></a><span id="l12.1997" class="difflineplus">+          menuItem.tab.mCorrespondingMenuitem = null;</span>
<a href="#l12.1998"></a><span id="l12.1998" class="difflineplus">+          this.removeChild(menuItem);</span>
<a href="#l12.1999"></a><span id="l12.1999" class="difflineplus">+        }</span>
<a href="#l12.2000"></a><span id="l12.2000" class="difflineplus">+        var tabcontainer = document.getBindingParent(this);</span>
<a href="#l12.2001"></a><span id="l12.2001" class="difflineplus">+        tabcontainer.mTabstrip.removeEventListener(&quot;scroll&quot;, this, false);</span>
<a href="#l12.2002"></a><span id="l12.2002" class="difflineplus">+        tabcontainer.removeEventListener(&quot;TabOpen&quot;, this, false);</span>
<a href="#l12.2003"></a><span id="l12.2003" class="difflineplus">+      ]]&gt;&lt;/handler&gt;</span>
<a href="#l12.2004"></a><span id="l12.2004" class="difflineplus">+</span>
<a href="#l12.2005"></a><span id="l12.2005" class="difflineplus">+      &lt;handler event=&quot;DOMMenuItemActive&quot;&gt;</span>
<a href="#l12.2006"></a><span id="l12.2006" class="difflineplus">+      &lt;![CDATA[</span>
<a href="#l12.2007"></a><span id="l12.2007" class="difflineplus">+        if (!this._xulWindow || !this._xulWindow.XULBrowserWindow)</span>
<a href="#l12.2008"></a><span id="l12.2008" class="difflineplus">+          return;</span>
<a href="#l12.2009"></a><span id="l12.2009" class="difflineplus">+</span>
<a href="#l12.2010"></a><span id="l12.2010" class="difflineplus">+        var tab = event.target.tab;</span>
<a href="#l12.2011"></a><span id="l12.2011" class="difflineplus">+        if (tab)</span>
<a href="#l12.2012"></a><span id="l12.2012" class="difflineplus">+          this._xulWindow.XULBrowserWindow.setOverLink(tab.label, null);</span>
<a href="#l12.2013"></a><span id="l12.2013" class="difflineplus">+      ]]&gt;&lt;/handler&gt;</span>
<a href="#l12.2014"></a><span id="l12.2014" class="difflineplus">+</span>
<a href="#l12.2015"></a><span id="l12.2015" class="difflineplus">+      &lt;handler event=&quot;DOMMenuItemInactive&quot;&gt;</span>
<a href="#l12.2016"></a><span id="l12.2016" class="difflineplus">+      &lt;![CDATA[</span>
<a href="#l12.2017"></a><span id="l12.2017" class="difflineplus">+        if (!this._xulWindow || !this._xulWindow.XULBrowserWindow)</span>
<a href="#l12.2018"></a><span id="l12.2018" class="difflineplus">+          return;</span>
<a href="#l12.2019"></a><span id="l12.2019" class="difflineplus">+</span>
<a href="#l12.2020"></a><span id="l12.2020" class="difflineplus">+        this._xulWindow.XULBrowserWindow.setOverLink(&quot;&quot;, null);</span>
<a href="#l12.2021"></a><span id="l12.2021" class="difflineplus">+      ]]&gt;&lt;/handler&gt;</span>
<a href="#l12.2022"></a><span id="l12.2022" class="difflineplus">+</span>
<a href="#l12.2023"></a><span id="l12.2023" class="difflineplus">+    &lt;/handlers&gt;</span>
<a href="#l12.2024"></a><span id="l12.2024" class="difflineplus">+  &lt;/binding&gt;</span>
<a href="#l12.2025"></a><span id="l12.2025" class="difflineplus">+</span>
<a href="#l12.2026"></a><span id="l12.2026" class="difflineplus">+  &lt;!-- close-tab-button binding</span>
<a href="#l12.2027"></a><span id="l12.2027" class="difflineplus">+       This binding relies on the structure of the tabbrowser binding.</span>
<a href="#l12.2028"></a><span id="l12.2028" class="difflineplus">+       Therefore it should only be used as a child of the tab or the tabs</span>
<a href="#l12.2029"></a><span id="l12.2029" class="difflineplus">+       element (in both cases, when they are anonymous nodes of &lt;tabbrowser&gt;).</span>
<a href="#l12.2030"></a><span id="l12.2030" class="difflineplus">+       This binding is exposed as a pseudo-public-API so themes can customize</span>
<a href="#l12.2031"></a><span id="l12.2031" class="difflineplus">+       the tabbar appearance without having to be scriptable</span>
<a href="#l12.2032"></a><span id="l12.2032" class="difflineplus">+       (see globalBindings.xml in Pinstripe for example).</span>
<a href="#l12.2033"></a><span id="l12.2033" class="difflineplus">+  --&gt;</span>
<a href="#l12.2034"></a><span id="l12.2034" class="difflineplus">+  &lt;binding id=&quot;tabbrowser-close-tab-button&quot;</span>
<a href="#l12.2035"></a><span id="l12.2035" class="difflineplus">+           extends=&quot;chrome://global/content/bindings/toolbarbutton.xml#toolbarbutton-image&quot;&gt;</span>
<a href="#l12.2036"></a><span id="l12.2036" class="difflineplus">+    &lt;handlers&gt;</span>
<a href="#l12.2037"></a><span id="l12.2037" class="difflineplus">+      &lt;handler event=&quot;click&quot; button=&quot;0&quot;&gt;&lt;![CDATA[</span>
<a href="#l12.2038"></a><span id="l12.2038" class="difflineplus">+        var bindingParent = document.getBindingParent(this);</span>
<a href="#l12.2039"></a><span id="l12.2039" class="difflineplus">+        if (bindingParent) {</span>
<a href="#l12.2040"></a><span id="l12.2040" class="difflineplus">+          var tabbedBrowser = document.getBindingParent(bindingParent);</span>
<a href="#l12.2041"></a><span id="l12.2041" class="difflineplus">+          if (bindingParent.localName == &quot;tab&quot;) {</span>
<a href="#l12.2042"></a><span id="l12.2042" class="difflineplus">+            /* The only sequence in which a second click event (i.e. dblclik)</span>
<a href="#l12.2043"></a><span id="l12.2043" class="difflineplus">+             * can be dispatched on an in-tab close button is when it is shown</span>
<a href="#l12.2044"></a><span id="l12.2044" class="difflineplus">+             * after the first click (i.e. the first click event was dispatched</span>
<a href="#l12.2045"></a><span id="l12.2045" class="difflineplus">+             * on the tab). This happens when we show the close button only on</span>
<a href="#l12.2046"></a><span id="l12.2046" class="difflineplus">+             * the active tab. (bug 352021)</span>
<a href="#l12.2047"></a><span id="l12.2047" class="difflineplus">+             * The only sequence in which a third click event can be dispatched</span>
<a href="#l12.2048"></a><span id="l12.2048" class="difflineplus">+             * on an in-tab close button is when the tab was opened with a</span>
<a href="#l12.2049"></a><span id="l12.2049" class="difflineplus">+             * double click on the tabbar. (bug 378344)</span>
<a href="#l12.2050"></a><span id="l12.2050" class="difflineplus">+             * In both cases, it is most likely that the close button area has</span>
<a href="#l12.2051"></a><span id="l12.2051" class="difflineplus">+             * been accidentally clicked, therefore we do not close the tab.</span>
<a href="#l12.2052"></a><span id="l12.2052" class="difflineplus">+             *</span>
<a href="#l12.2053"></a><span id="l12.2053" class="difflineplus">+             * We don't want to ignore processing of more than one click event,</span>
<a href="#l12.2054"></a><span id="l12.2054" class="difflineplus">+             * though, since the user might actually be repeatedly clicking to</span>
<a href="#l12.2055"></a><span id="l12.2055" class="difflineplus">+             * close many tabs at once.</span>
<a href="#l12.2056"></a><span id="l12.2056" class="difflineplus">+             */</span>
<a href="#l12.2057"></a><span id="l12.2057" class="difflineplus">+            if (event.detail &gt; 1 &amp;&amp; !this._ignoredClick) {</span>
<a href="#l12.2058"></a><span id="l12.2058" class="difflineplus">+              this._ignoredClick = true;</span>
<a href="#l12.2059"></a><span id="l12.2059" class="difflineplus">+              return;</span>
<a href="#l12.2060"></a><span id="l12.2060" class="difflineplus">+            }</span>
<a href="#l12.2061"></a><span id="l12.2061" class="difflineplus">+</span>
<a href="#l12.2062"></a><span id="l12.2062" class="difflineplus">+            // Reset the &quot;ignored click&quot; flag</span>
<a href="#l12.2063"></a><span id="l12.2063" class="difflineplus">+            this._ignoredClick = false;</span>
<a href="#l12.2064"></a><span id="l12.2064" class="difflineplus">+</span>
<a href="#l12.2065"></a><span id="l12.2065" class="difflineplus">+            tabbedBrowser.removeTab(bindingParent);</span>
<a href="#l12.2066"></a><span id="l12.2066" class="difflineplus">+            tabbedBrowser._blockDblClick = true;</span>
<a href="#l12.2067"></a><span id="l12.2067" class="difflineplus">+</span>
<a href="#l12.2068"></a><span id="l12.2068" class="difflineplus">+            /* XXXmano hack (see bug 343628):</span>
<a href="#l12.2069"></a><span id="l12.2069" class="difflineplus">+             * Since we're removing the event target, if the user</span>
<a href="#l12.2070"></a><span id="l12.2070" class="difflineplus">+             * double-clicks this button, the dblclick event will be dispatched</span>
<a href="#l12.2071"></a><span id="l12.2071" class="difflineplus">+             * with the tabbar as its event target (and explicit/originalTarget),</span>
<a href="#l12.2072"></a><span id="l12.2072" class="difflineplus">+             * which treats that as a mouse gesture for opening a new tab.</span>
<a href="#l12.2073"></a><span id="l12.2073" class="difflineplus">+             * In this context, we're manually blocking the dblclick event</span>
<a href="#l12.2074"></a><span id="l12.2074" class="difflineplus">+             * (see onTabBarDblClick).</span>
<a href="#l12.2075"></a><span id="l12.2075" class="difflineplus">+             */</span>
<a href="#l12.2076"></a><span id="l12.2076" class="difflineplus">+            var clickedOnce = false;</span>
<a href="#l12.2077"></a><span id="l12.2077" class="difflineplus">+            function enableDblClick(event) {</span>
<a href="#l12.2078"></a><span id="l12.2078" class="difflineplus">+              if (event.detail == 1 &amp;&amp; !clickedOnce) {</span>
<a href="#l12.2079"></a><span id="l12.2079" class="difflineplus">+                clickedOnce = true;</span>
<a href="#l12.2080"></a><span id="l12.2080" class="difflineplus">+                return;</span>
<a href="#l12.2081"></a><span id="l12.2081" class="difflineplus">+              }</span>
<a href="#l12.2082"></a><span id="l12.2082" class="difflineplus">+              setTimeout(function() {</span>
<a href="#l12.2083"></a><span id="l12.2083" class="difflineplus">+                tabbedBrowser._blockDblClick = false;</span>
<a href="#l12.2084"></a><span id="l12.2084" class="difflineplus">+              }, 0);</span>
<a href="#l12.2085"></a><span id="l12.2085" class="difflineplus">+              tabbedBrowser.removeEventListener(&quot;click&quot;, enableDblClick, false);</span>
<a href="#l12.2086"></a><span id="l12.2086" class="difflineplus">+            }</span>
<a href="#l12.2087"></a><span id="l12.2087" class="difflineplus">+            tabbedBrowser.addEventListener(&quot;click&quot;, enableDblClick, false);</span>
<a href="#l12.2088"></a><span id="l12.2088" class="difflineplus">+          }</span>
<a href="#l12.2089"></a><span id="l12.2089" class="difflineplus">+          else // &quot;tabs&quot;</span>
<a href="#l12.2090"></a><span id="l12.2090" class="difflineplus">+            tabbedBrowser.removeCurrentTab();</span>
<a href="#l12.2091"></a><span id="l12.2091" class="difflineplus">+        }</span>
<a href="#l12.2092"></a><span id="l12.2092" class="difflineplus">+      ]]&gt;&lt;/handler&gt;</span>
<a href="#l12.2093"></a><span id="l12.2093" class="difflineplus">+      &lt;handler event=&quot;dblclick&quot; button=&quot;0&quot; phase=&quot;capturing&quot;&gt;</span>
<a href="#l12.2094"></a><span id="l12.2094" class="difflineplus">+        // for the one-close-button case</span>
<a href="#l12.2095"></a><span id="l12.2095" class="difflineplus">+        event.stopPropagation();</span>
<a href="#l12.2096"></a><span id="l12.2096" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l12.2097"></a><span id="l12.2097" class="difflineplus">+    &lt;/handlers&gt;</span>
<a href="#l12.2098"></a><span id="l12.2098" class="difflineplus">+  &lt;/binding&gt;</span>
<a href="#l12.2099"></a><span id="l12.2099" class="difflineplus">+</span>
<a href="#l12.2100"></a><span id="l12.2100" class="difflineplus">+  &lt;binding id=&quot;tabbrowser-tab&quot; display=&quot;xul:hbox&quot;</span>
<a href="#l12.2101"></a><span id="l12.2101" class="difflineplus">+           extends=&quot;chrome://global/content/bindings/tabbox.xml#tab&quot;&gt;</span>
<a href="#l12.2102"></a><span id="l12.2102" class="difflineplus">+    &lt;content chromedir=&quot;&amp;locale.dir;&quot;</span>
<a href="#l12.2103"></a><span id="l12.2103" class="difflineplus">+             closetabtext=&quot;&amp;closeTab.label;&quot;&gt;</span>
<a href="#l12.2104"></a><span id="l12.2104" class="difflineplus">+      &lt;xul:image xbl:inherits=&quot;validate,src=image&quot; class=&quot;tab-icon-image&quot;/&gt;</span>
<a href="#l12.2105"></a><span id="l12.2105" class="difflineplus">+      &lt;xul:label flex=&quot;1&quot; xbl:inherits=&quot;value=label,crop,accesskey&quot; class=&quot;tab-text&quot;/&gt;</span>
<a href="#l12.2106"></a><span id="l12.2106" class="difflineplus">+      &lt;xul:toolbarbutton anonid=&quot;close-button&quot; tabindex=&quot;-1&quot; class=&quot;tab-close-button&quot;/&gt;</span>
<a href="#l12.2107"></a><span id="l12.2107" class="difflineplus">+    &lt;/content&gt;</span>
<a href="#l12.2108"></a><span id="l12.2108" class="difflineplus">+</span>
<a href="#l12.2109"></a><span id="l12.2109" class="difflineplus">+    &lt;implementation&gt;</span>
<a href="#l12.2110"></a><span id="l12.2110" class="difflineplus">+      &lt;field name=&quot;mOverCloseButton&quot;&gt;false&lt;/field&gt;</span>
<a href="#l12.2111"></a><span id="l12.2111" class="difflineplus">+      &lt;field name=&quot;mCorrespondingMenuitem&quot;&gt;null&lt;/field&gt;</span>
<a href="#l12.2112"></a><span id="l12.2112" class="difflineplus">+    &lt;/implementation&gt;</span>
<a href="#l12.2113"></a><span id="l12.2113" class="difflineplus">+</span>
<a href="#l12.2114"></a><span id="l12.2114" class="difflineplus">+    &lt;handlers&gt;</span>
<a href="#l12.2115"></a><span id="l12.2115" class="difflineplus">+      &lt;handler event=&quot;mouseover&quot;&gt;</span>
<a href="#l12.2116"></a><span id="l12.2116" class="difflineplus">+        var anonid = event.originalTarget.getAttribute(&quot;anonid&quot;);</span>
<a href="#l12.2117"></a><span id="l12.2117" class="difflineplus">+        if (anonid == &quot;close-button&quot;)</span>
<a href="#l12.2118"></a><span id="l12.2118" class="difflineplus">+          this.mOverCloseButton = true;</span>
<a href="#l12.2119"></a><span id="l12.2119" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l12.2120"></a><span id="l12.2120" class="difflineplus">+      &lt;handler event=&quot;mouseout&quot;&gt;</span>
<a href="#l12.2121"></a><span id="l12.2121" class="difflineplus">+        var anonid = event.originalTarget.getAttribute(&quot;anonid&quot;);</span>
<a href="#l12.2122"></a><span id="l12.2122" class="difflineplus">+        if (anonid == &quot;close-button&quot;)</span>
<a href="#l12.2123"></a><span id="l12.2123" class="difflineplus">+          this.mOverCloseButton = false;</span>
<a href="#l12.2124"></a><span id="l12.2124" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l12.2125"></a><span id="l12.2125" class="difflineplus">+      &lt;handler event=&quot;dragstart&quot; phase=&quot;capturing&quot;&gt;</span>
<a href="#l12.2126"></a><span id="l12.2126" class="difflineplus">+        this.style.MozUserFocus = '';</span>
<a href="#l12.2127"></a><span id="l12.2127" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l12.2128"></a><span id="l12.2128" class="difflineplus">+      &lt;handler event=&quot;mousedown&quot; button=&quot;0&quot; phase=&quot;capturing&quot;&gt;</span>
<a href="#l12.2129"></a><span id="l12.2129" class="difflineplus">+      &lt;![CDATA[</span>
<a href="#l12.2130"></a><span id="l12.2130" class="difflineplus">+        if (this.mOverCloseButton) {</span>
<a href="#l12.2131"></a><span id="l12.2131" class="difflineplus">+          event.stopPropagation();</span>
<a href="#l12.2132"></a><span id="l12.2132" class="difflineplus">+        }</span>
<a href="#l12.2133"></a><span id="l12.2133" class="difflineplus">+        else {</span>
<a href="#l12.2134"></a><span id="l12.2134" class="difflineplus">+          this.style.MozUserFocus = 'ignore';</span>
<a href="#l12.2135"></a><span id="l12.2135" class="difflineplus">+          this.clientTop; // just using this to flush style updates</span>
<a href="#l12.2136"></a><span id="l12.2136" class="difflineplus">+        }</span>
<a href="#l12.2137"></a><span id="l12.2137" class="difflineplus">+      ]]&gt;</span>
<a href="#l12.2138"></a><span id="l12.2138" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l12.2139"></a><span id="l12.2139" class="difflineplus">+      &lt;handler event=&quot;mousedown&quot; button=&quot;1&quot;&gt;</span>
<a href="#l12.2140"></a><span id="l12.2140" class="difflineplus">+        this.style.MozUserFocus = 'ignore';</span>
<a href="#l12.2141"></a><span id="l12.2141" class="difflineplus">+        this.clientTop;</span>
<a href="#l12.2142"></a><span id="l12.2142" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l12.2143"></a><span id="l12.2143" class="difflineplus">+      &lt;handler event=&quot;mousedown&quot; button=&quot;2&quot;&gt;</span>
<a href="#l12.2144"></a><span id="l12.2144" class="difflineplus">+        this.style.MozUserFocus = 'ignore';</span>
<a href="#l12.2145"></a><span id="l12.2145" class="difflineplus">+        this.clientTop;</span>
<a href="#l12.2146"></a><span id="l12.2146" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l12.2147"></a><span id="l12.2147" class="difflineplus">+      &lt;handler event=&quot;mouseup&quot;&gt;</span>
<a href="#l12.2148"></a><span id="l12.2148" class="difflineplus">+        this.style.MozUserFocus = '';</span>
<a href="#l12.2149"></a><span id="l12.2149" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l12.2150"></a><span id="l12.2150" class="difflineplus">+    &lt;/handlers&gt;</span>
<a href="#l12.2151"></a><span id="l12.2151" class="difflineplus">+  &lt;/binding&gt;</span>
<a href="#l12.2152"></a><span id="l12.2152" class="difflineplus">+</span>
<a href="#l12.2153"></a><span id="l12.2153" class="difflineplus">+&lt;/bindings&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/im/base/content/jar.mn</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/im/base/content/jar.mn</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -39,16 +39,18 @@ instantbird.jar:</span>
<a href="#l13.4"></a><span id="l13.4"> 	content/instantbird/smiley.css		(instantbird/smiley.css)</span>
<a href="#l13.5"></a><span id="l13.5"> 	content/instantbird/smiley.xml		(instantbird/smiley.xml)</span>
<a href="#l13.6"></a><span id="l13.6"> *	content/instantbird/nsContextMenu.js	(instantbird/nsContextMenu.js)</span>
<a href="#l13.7"></a><span id="l13.7"> 	content/instantbird/proxies.js		(instantbird/proxies.js)</span>
<a href="#l13.8"></a><span id="l13.8"> 	content/instantbird/proxies.xul		(instantbird/proxies.xul)</span>
<a href="#l13.9"></a><span id="l13.9"> 	content/instantbird/proxies.css		(instantbird/proxies.css)</span>
<a href="#l13.10"></a><span id="l13.10"> 	content/instantbird/proxy.xml		(instantbird/proxy.xml)</span>
<a href="#l13.11"></a><span id="l13.11"> 	content/instantbird/sound.js		(instantbird/sound.js)</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+*	content/instantbird/tabbrowser.xml	(instantbird/tabbrowser.xml)</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+	content/instantbird/tabbrowser.css	(instantbird/tabbrowser.css)</span>
<a href="#l13.14"></a><span id="l13.14"> 	content/instantbird/utilities.js	(instantbird/utilities.js)</span>
<a href="#l13.15"></a><span id="l13.15"> #ifdef XP_MACOSX</span>
<a href="#l13.16"></a><span id="l13.16"> 	content/instantbird/unreadCount.js      (instantbird/unreadCount.js)</span>
<a href="#l13.17"></a><span id="l13.17"> 	content/instantbird/macgestures.js      (instantbird/macgestures.js)</span>
<a href="#l13.18"></a><span id="l13.18"> #endif</span>
<a href="#l13.19"></a><span id="l13.19"> </span>
<a href="#l13.20"></a><span id="l13.20"> #ifdef DEBUG</span>
<a href="#l13.21"></a><span id="l13.21"> debug.jar:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/im/locales/en-US/chrome/instantbird/instantbird.dtd</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/im/locales/en-US/chrome/instantbird/instantbird.dtd</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -1,9 +1,11 @@</span>
<a href="#l14.4"></a><span id="l14.4"> &lt;!ENTITY convWindow.title   &quot;Conversations - &amp;brandShortName;&quot;&gt;</span>
<a href="#l14.5"></a><span id="l14.5" class="difflineplus">+&lt;!ENTITY convWindow.titlemodifiermenuseparator &quot; - &quot;&gt;</span>
<a href="#l14.6"></a><span id="l14.6" class="difflineplus">+&lt;!ENTITY convWindow.titlemodifier &quot;&amp;brandShortName;&quot;&gt;</span>
<a href="#l14.7"></a><span id="l14.7"> &lt;!ENTITY blist.title        &quot;Buddy list - &amp;brandShortName;&quot;&gt;</span>
<a href="#l14.8"></a><span id="l14.8"> &lt;!ENTITY file.menu          &quot;File&quot;&gt;</span>
<a href="#l14.9"></a><span id="l14.9"> &lt;!ENTITY file.accesskey     &quot;F&quot;&gt;</span>
<a href="#l14.10"></a><span id="l14.10"> </span>
<a href="#l14.11"></a><span id="l14.11"> &lt;!-- Copied from mozilla/browser/locales/en-US/chrome/browser/browser.dtd --&gt;</span>
<a href="#l14.12"></a><span id="l14.12"> &lt;!ENTITY quitApplicationCmdWin.label       &quot;Exit&quot;&gt; </span>
<a href="#l14.13"></a><span id="l14.13"> &lt;!ENTITY quitApplicationCmdWin.accesskey   &quot;x&quot;&gt;</span>
<a href="#l14.14"></a><span id="l14.14"> &lt;!ENTITY quitApplicationCmd.label       &quot;Quit&quot;&gt; </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1">new file mode 100644</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineminus">--- /dev/null</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineplus">+++ b/im/locales/en-US/chrome/instantbird/tabbrowser.dtd</span>
<a href="#l15.4"></a><span id="l15.4" class="difflineat">@@ -0,0 +1,11 @@</span>
<a href="#l15.5"></a><span id="l15.5" class="difflineplus">+&lt;!ENTITY  untitledTab            &quot;(Untitled)&quot;&gt;</span>
<a href="#l15.6"></a><span id="l15.6" class="difflineplus">+&lt;!ENTITY  newTab.label           &quot;New Tab&quot;&gt;</span>
<a href="#l15.7"></a><span id="l15.7" class="difflineplus">+&lt;!ENTITY  newTab.accesskey       &quot;N&quot;&gt;</span>
<a href="#l15.8"></a><span id="l15.8" class="difflineplus">+&lt;!ENTITY  closeTab.label         &quot;Close Tab&quot;&gt;</span>
<a href="#l15.9"></a><span id="l15.9" class="difflineplus">+&lt;!ENTITY  closeTab.accesskey     &quot;c&quot;&gt;</span>
<a href="#l15.10"></a><span id="l15.10" class="difflineplus">+&lt;!ENTITY  closeOtherTabs.accesskey &quot;o&quot;&gt;</span>
<a href="#l15.11"></a><span id="l15.11" class="difflineplus">+&lt;!ENTITY  closeOtherTabs.label     &quot;Close Other Tabs&quot;&gt;</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineplus">+&lt;!ENTITY  openTabInNewWindow.label     &quot;Open in a New Window&quot;&gt;</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+&lt;!ENTITY  openTabInNewWindow.accesskey &quot;W&quot;&gt;</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineplus">+&lt;!ENTITY  listAllTabs.label      &quot;List all tabs&quot;&gt;</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineplus">+&lt;!ENTITY  newTabButton.tooltip   &quot;Open a new tab&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/im/locales/jar.mn</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/im/locales/jar.mn</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -17,11 +17,12 @@</span>
<a href="#l16.4"></a><span id="l16.4"> 	locale/@AB_CD@/instantbird/instantbird.dtd	(%chrome/instantbird/instantbird.dtd)</span>
<a href="#l16.5"></a><span id="l16.5"> 	locale/@AB_CD@/instantbird/instantbird.properties (%chrome/instantbird/instantbird.properties)</span>
<a href="#l16.6"></a><span id="l16.6"> 	locale/@AB_CD@/instantbird/joinChat.dtd		(%chrome/instantbird/joinChat.dtd)</span>
<a href="#l16.7"></a><span id="l16.7"> 	locale/@AB_CD@/instantbird/messagestyle.dtd	(%chrome/instantbird/messagestyle.dtd)</span>
<a href="#l16.8"></a><span id="l16.8"> 	locale/@AB_CD@/instantbird/messagestyle.properties (%chrome/instantbird/messagestyle.properties)</span>
<a href="#l16.9"></a><span id="l16.9"> 	locale/@AB_CD@/instantbird/proxies.dtd		(%chrome/instantbird/proxies.dtd)</span>
<a href="#l16.10"></a><span id="l16.10"> 	locale/@AB_CD@/instantbird/proxies.properties	(%chrome/instantbird/proxies.properties)</span>
<a href="#l16.11"></a><span id="l16.11"> 	locale/@AB_CD@/instantbird/region.properties	(%chrome/instantbird/region.properties)</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineplus">+	locale/@AB_CD@/instantbird/tabbrowser.dtd	(%chrome/instantbird/tabbrowser.dtd)</span>
<a href="#l16.13"></a><span id="l16.13"> 	locale/@AB_CD@/instantbird/updates.properties	(%chrome/instantbird/updates.properties)</span>
<a href="#l16.14"></a><span id="l16.14"> 	locale/@AB_CD@/instantbird/quitDialog.properties	(%chrome/instantbird/quitDialog.properties)</span>
<a href="#l16.15"></a><span id="l16.15"> 	locale/@AB_CD@/instantbird/smileys.dtd		(%chrome/instantbird/smileys.dtd)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1">new file mode 100644</span>
<a href="#l17.2"></a><span id="l17.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..6c88abed99ade8cb55149870dff143753dffadf1</span>
<a href="#l17.3"></a><span id="l17.3">GIT binary patch
literal 520
zc$@(U0{8uiP)&lt;h;3K|Lk000e1NJLTq000mG000mO1^@s6AM^iV00004b3#c}2nYxW
zd&lt;bNS00009a7bBm000fw000fw0YWI7cmMzZ8FWQhbW?9;ba!ELWdL_~cP?peYja~^
zaAhuUa%Y?FJQ@H10fk9KK~y-6m6JV=;y@6EKiiFPwv!O;30ef~-eHA+2+08?8^aNd
zKv)O@-(#f}8+6EzW)CnD5-}%OO*+yfmfh~2V8)0s9&lt;=kMmvmLVdR6LjthHQXu~=-A
zB&lt;XSkzVGj%DCz-Vt$oKZ3~iQWHqY})W?5##FtkO!_^699=9Y;wM3v?LEd~%tl605L
zC9dlNFr7|6Cs5Tj&amp;-2d-lsjsz&amp;yLC{awn6C^?iSLB_O3Fj^pc2LeOrv*&gt;1Nqn@t9T
z0rUC1E6SFGAh;@CtyYZ3W7g|60K?(%9CHiH#+XWKtpR8&gt;8jMCGTCLVO1|aJ7`Yw*+
zZm-v~`~BV+W4y8hDJ8}jgb?)m{dXff0AUzfA;iDa&gt;GV@6b$WYyoXuvHi@Y4owbo*c
z`F%JXzAL33fTuU!94*VTR|n-|DiB4{-!x5sl;1ti)16Mo+iW&amp;Ytya7LP{45&lt;fG&lt;G3
zST;Zq1X4=*OKbf#j^n%P-@@ya0x9r(G1ik(&gt;fv}ie$!h20n!)lnhXll#!R^Y0000&lt;
KMNUMnLSTYnM&amp;A+u</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/im/themes/winstripe/instantbird/instantbird.css</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/im/themes/winstripe/instantbird/instantbird.css</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -31,104 +31,85 @@</span>
<a href="#l18.4"></a><span id="l18.4">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l18.5"></a><span id="l18.5">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l18.6"></a><span id="l18.6">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l18.7"></a><span id="l18.7">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l18.8"></a><span id="l18.8">  *</span>
<a href="#l18.9"></a><span id="l18.9">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l18.10"></a><span id="l18.10"> </span>
<a href="#l18.11"></a><span id="l18.11"> tabbox {</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineplus">+  margin: 0 0;</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+%ifdef XP_UNIX</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineplus">+%ifndef XP_MACOSX</span>
<a href="#l18.15"></a><span id="l18.15">   margin-top: 3px;</span>
<a href="#l18.16"></a><span id="l18.16" class="difflineplus">+%endif</span>
<a href="#l18.17"></a><span id="l18.17" class="difflineplus">+%endif</span>
<a href="#l18.18"></a><span id="l18.18"> }</span>
<a href="#l18.19"></a><span id="l18.19"> </span>
<a href="#l18.20"></a><span id="l18.20"> tabpanels {</span>
<a href="#l18.21"></a><span id="l18.21" class="difflineminus">-  padding: 5px 5px;</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineminus">-}</span>
<a href="#l18.23"></a><span id="l18.23" class="difflineminus">-</span>
<a href="#l18.24"></a><span id="l18.24" class="difflineminus">-conversation {</span>
<a href="#l18.25"></a><span id="l18.25" class="difflineminus">-%ifdef XP_MACOSX</span>
<a href="#l18.26"></a><span id="l18.26" class="difflineminus">-  margin-top: 8px;</span>
<a href="#l18.27"></a><span id="l18.27" class="difflineminus">-%else</span>
<a href="#l18.28"></a><span id="l18.28" class="difflineminus">-  margin: -1px -1px;</span>
<a href="#l18.29"></a><span id="l18.29" class="difflineminus">-%endif</span>
<a href="#l18.30"></a><span id="l18.30" class="difflineminus">-  padding: 0 0;</span>
<a href="#l18.31"></a><span id="l18.31" class="difflineminus">-}</span>
<a href="#l18.32"></a><span id="l18.32" class="difflineminus">-</span>
<a href="#l18.33"></a><span id="l18.33" class="difflineminus">-convtab[unread] { </span>
<a href="#l18.34"></a><span id="l18.34" class="difflineminus">-  color: red !important;</span>
<a href="#l18.35"></a><span id="l18.35" class="difflineminus">-}</span>
<a href="#l18.36"></a><span id="l18.36" class="difflineminus">-</span>
<a href="#l18.37"></a><span id="l18.37" class="difflineminus">-convtab[typing] { </span>
<a href="#l18.38"></a><span id="l18.38" class="difflineminus">-  color: green !important;</span>
<a href="#l18.39"></a><span id="l18.39" class="difflineminus">-}</span>
<a href="#l18.40"></a><span id="l18.40" class="difflineminus">-</span>
<a href="#l18.41"></a><span id="l18.41" class="difflineminus">-convtab[typed] { </span>
<a href="#l18.42"></a><span id="l18.42" class="difflineminus">-  color: orange !important;</span>
<a href="#l18.43"></a><span id="l18.43" class="difflineminus">-}</span>
<a href="#l18.44"></a><span id="l18.44" class="difflineminus">-</span>
<a href="#l18.45"></a><span id="l18.45" class="difflineminus">-convtab[attention] { </span>
<a href="#l18.46"></a><span id="l18.46" class="difflineminus">-  color: blue !important;</span>
<a href="#l18.47"></a><span id="l18.47" class="difflineminus">-}</span>
<a href="#l18.48"></a><span id="l18.48" class="difflineminus">-</span>
<a href="#l18.49"></a><span id="l18.49" class="difflineminus">-convtab[selected=&quot;true&quot;],</span>
<a href="#l18.50"></a><span id="l18.50" class="difflineminus">-convtab:hover {</span>
<a href="#l18.51"></a><span id="l18.51" class="difflineminus">-  color: #000000;</span>
<a href="#l18.52"></a><span id="l18.52" class="difflineminus">-}</span>
<a href="#l18.53"></a><span id="l18.53" class="difflineminus">-</span>
<a href="#l18.54"></a><span id="l18.54" class="difflineminus">-convtab:not([selected=&quot;true&quot;]) &gt; .tab-image-right {</span>
<a href="#l18.55"></a><span id="l18.55" class="difflineminus">-  background: url(&quot;chrome://instantbird/skin/tabbrowser/tab-right-bkgnd.png&quot;) no-repeat;</span>
<a href="#l18.56"></a><span id="l18.56" class="difflineminus">-  margin-bottom: 1px;</span>
<a href="#l18.57"></a><span id="l18.57" class="difflineminus">-}</span>
<a href="#l18.58"></a><span id="l18.58" class="difflineminus">-</span>
<a href="#l18.59"></a><span id="l18.59" class="difflineminus">-convtab:not([selected=&quot;true&quot;]) &gt; .tab-image-left {</span>
<a href="#l18.60"></a><span id="l18.60" class="difflineminus">-  background: url(&quot;chrome://instantbird/skin/tabbrowser/tab-left-bkgnd.png&quot;) no-repeat;</span>
<a href="#l18.61"></a><span id="l18.61" class="difflineminus">-  margin-bottom: 1px;</span>
<a href="#l18.62"></a><span id="l18.62" class="difflineminus">-}</span>
<a href="#l18.63"></a><span id="l18.63" class="difflineminus">-</span>
<a href="#l18.64"></a><span id="l18.64" class="difflineminus">-convtab:hover:not([selected=&quot;true&quot;]) &gt; .tab-image-left {</span>
<a href="#l18.65"></a><span id="l18.65" class="difflineminus">-  background: url(&quot;chrome://instantbird/skin/tabbrowser/tab-left-hover.png&quot;) no-repeat;</span>
<a href="#l18.66"></a><span id="l18.66" class="difflineminus">-}</span>
<a href="#l18.67"></a><span id="l18.67" class="difflineminus">-</span>
<a href="#l18.68"></a><span id="l18.68" class="difflineminus">-convtab:hover:not([selected=&quot;true&quot;]) &gt; .tab-image-right {</span>
<a href="#l18.69"></a><span id="l18.69" class="difflineminus">-  background: url(&quot;chrome://instantbird/skin/tabbrowser/tab-right-hover.png&quot;) no-repeat;</span>
<a href="#l18.70"></a><span id="l18.70" class="difflineminus">-}</span>
<a href="#l18.71"></a><span id="l18.71" class="difflineminus">-</span>
<a href="#l18.72"></a><span id="l18.72" class="difflineminus">-convtab:not([selected=&quot;true&quot;]) &gt; .tab-image-middle {</span>
<a href="#l18.73"></a><span id="l18.73" class="difflineminus">-  background: url(&quot;chrome://instantbird/skin/tabbrowser/tab-middle-bkgnd.png&quot;);</span>
<a href="#l18.74"></a><span id="l18.74" class="difflineminus">-  margin-bottom: 1px;</span>
<a href="#l18.75"></a><span id="l18.75" class="difflineminus">-}</span>
<a href="#l18.76"></a><span id="l18.76" class="difflineminus">-</span>
<a href="#l18.77"></a><span id="l18.77" class="difflineminus">-convtab:hover:not([selected=&quot;true&quot;]) &gt; .tab-image-middle {</span>
<a href="#l18.78"></a><span id="l18.78" class="difflineminus">-  background: url(&quot;chrome://instantbird/skin/tabbrowser/tab-middle-hover.png&quot;);</span>
<a href="#l18.79"></a><span id="l18.79" class="difflineminus">-}</span>
<a href="#l18.80"></a><span id="l18.80" class="difflineminus">-</span>
<a href="#l18.81"></a><span id="l18.81" class="difflineminus">-convtab &gt;.tab-image-middle &gt; .tab-text {</span>
<a href="#l18.82"></a><span id="l18.82" class="difflineminus">-  border: 1.4pt solid transparent;</span>
<a href="#l18.83"></a><span id="l18.83" class="difflineminus">-}</span>
<a href="#l18.84"></a><span id="l18.84" class="difflineminus">-</span>
<a href="#l18.85"></a><span id="l18.85" class="difflineminus">-convtab &gt; .tab-image-right {</span>
<a href="#l18.86"></a><span id="l18.86" class="difflineminus">-  background: url(&quot;chrome://instantbird/skin/tabbrowser/tab-right.png&quot;) no-repeat;</span>
<a href="#l18.87"></a><span id="l18.87" class="difflineminus">-}</span>
<a href="#l18.88"></a><span id="l18.88" class="difflineminus">-</span>
<a href="#l18.89"></a><span id="l18.89" class="difflineminus">-convtab &gt; .tab-image-left {</span>
<a href="#l18.90"></a><span id="l18.90" class="difflineminus">-  background: url(&quot;chrome://instantbird/skin/tabbrowser/tab-left.png&quot;) no-repeat;</span>
<a href="#l18.91"></a><span id="l18.91" class="difflineminus">-}</span>
<a href="#l18.92"></a><span id="l18.92" class="difflineminus">-</span>
<a href="#l18.93"></a><span id="l18.93" class="difflineminus">-convtab &gt; .tab-image-middle {</span>
<a href="#l18.94"></a><span id="l18.94" class="difflineminus">-  background: url(&quot;chrome://instantbird/skin/tabbrowser/tab-middle.png&quot;) repeat-x;</span>
<a href="#l18.95"></a><span id="l18.95" class="difflineminus">-  -moz-box-flex: 0 !important;</span>
<a href="#l18.96"></a><span id="l18.96" class="difflineminus">-}</span>
<a href="#l18.97"></a><span id="l18.97" class="difflineminus">-</span>
<a href="#l18.98"></a><span id="l18.98" class="difflineminus">-.tab-image-left,</span>
<a href="#l18.99"></a><span id="l18.99" class="difflineminus">-.tab-image-right {</span>
<a href="#l18.100"></a><span id="l18.100" class="difflineminus">-  width: 8px;</span>
<a href="#l18.101"></a><span id="l18.101" class="difflineminus">-  margin: 0px;</span>
<a href="#l18.102"></a><span id="l18.102" class="difflineminus">-  padding: 0px;</span>
<a href="#l18.103"></a><span id="l18.103" class="difflineplus">+  -moz-appearance: none;</span>
<a href="#l18.104"></a><span id="l18.104"> }</span>
<a href="#l18.105"></a><span id="l18.105"> </span>
<a href="#l18.106"></a><span id="l18.106"> statusbar {</span>
<a href="#l18.107"></a><span id="l18.107">   min-height: 16px;</span>
<a href="#l18.108"></a><span id="l18.108"> }</span>
<a href="#l18.109"></a><span id="l18.109"> </span>
<a href="#l18.110"></a><span id="l18.110"> statusbarpanel {</span>
<a href="#l18.111"></a><span id="l18.111">   -moz-appearance: none;</span>
<a href="#l18.112"></a><span id="l18.112">   border: none;</span>
<a href="#l18.113"></a><span id="l18.113"> }</span>
<a href="#l18.114"></a><span id="l18.114" class="difflineplus">+</span>
<a href="#l18.115"></a><span id="l18.115" class="difflineplus">+%ifndef XP_MACOSX</span>
<a href="#l18.116"></a><span id="l18.116" class="difflineplus">+conversation {</span>
<a href="#l18.117"></a><span id="l18.117" class="difflineplus">+  margin-top: -1px;</span>
<a href="#l18.118"></a><span id="l18.118" class="difflineplus">+}</span>
<a href="#l18.119"></a><span id="l18.119" class="difflineplus">+%endif</span>
<a href="#l18.120"></a><span id="l18.120" class="difflineplus">+</span>
<a href="#l18.121"></a><span id="l18.121" class="difflineplus">+/* Tab colors */</span>
<a href="#l18.122"></a><span id="l18.122" class="difflineplus">+tab[unread],</span>
<a href="#l18.123"></a><span id="l18.123" class="difflineplus">+.alltabs-item[unread] { </span>
<a href="#l18.124"></a><span id="l18.124" class="difflineplus">+  color: red !important;</span>
<a href="#l18.125"></a><span id="l18.125" class="difflineplus">+}</span>
<a href="#l18.126"></a><span id="l18.126" class="difflineplus">+</span>
<a href="#l18.127"></a><span id="l18.127" class="difflineplus">+tab[typing],</span>
<a href="#l18.128"></a><span id="l18.128" class="difflineplus">+.alltabs-item[typing] {</span>
<a href="#l18.129"></a><span id="l18.129" class="difflineplus">+  color: green !important;</span>
<a href="#l18.130"></a><span id="l18.130" class="difflineplus">+}</span>
<a href="#l18.131"></a><span id="l18.131" class="difflineplus">+</span>
<a href="#l18.132"></a><span id="l18.132" class="difflineplus">+tab[typed],</span>
<a href="#l18.133"></a><span id="l18.133" class="difflineplus">+.alltabs-item[typed] { </span>
<a href="#l18.134"></a><span id="l18.134" class="difflineplus">+  color: orange !important;</span>
<a href="#l18.135"></a><span id="l18.135" class="difflineplus">+}</span>
<a href="#l18.136"></a><span id="l18.136" class="difflineplus">+</span>
<a href="#l18.137"></a><span id="l18.137" class="difflineplus">+tab[attention],</span>
<a href="#l18.138"></a><span id="l18.138" class="difflineplus">+.alltabs-item[attention] { </span>
<a href="#l18.139"></a><span id="l18.139" class="difflineplus">+  color: blue !important;</span>
<a href="#l18.140"></a><span id="l18.140" class="difflineplus">+}</span>
<a href="#l18.141"></a><span id="l18.141" class="difflineplus">+</span>
<a href="#l18.142"></a><span id="l18.142" class="difflineplus">+/* Tab icons */</span>
<a href="#l18.143"></a><span id="l18.143" class="difflineplus">+.tab-icon-image,</span>
<a href="#l18.144"></a><span id="l18.144" class="difflineplus">+.alltabs-item &gt; .menu-iconic-left &gt; .menu-iconic-icon {</span>
<a href="#l18.145"></a><span id="l18.145" class="difflineplus">+  list-style-image: url(&quot;chrome://instantbird/skin/offline-16.png&quot;);</span>
<a href="#l18.146"></a><span id="l18.146" class="difflineplus">+  -moz-image-region: rect(0px, 16px, 16px, 0px);</span>
<a href="#l18.147"></a><span id="l18.147" class="difflineplus">+}</span>
<a href="#l18.148"></a><span id="l18.148" class="difflineplus">+</span>
<a href="#l18.149"></a><span id="l18.149" class="difflineplus">+.tabbrowser-tab[chat] &gt; .tab-icon-image,</span>
<a href="#l18.150"></a><span id="l18.150" class="difflineplus">+.alltabs-item[chat] &gt; .menu-iconic-left &gt; .menu-iconic-icon {</span>
<a href="#l18.151"></a><span id="l18.151" class="difflineplus">+  list-style-image: url(&quot;chrome://instantbird/skin/chat-16.png&quot;) !important;</span>
<a href="#l18.152"></a><span id="l18.152" class="difflineplus">+}</span>
<a href="#l18.153"></a><span id="l18.153" class="difflineplus">+</span>
<a href="#l18.154"></a><span id="l18.154" class="difflineplus">+.tabbrowser-tab[status=&quot;available&quot;] &gt; .tab-icon-image,</span>
<a href="#l18.155"></a><span id="l18.155" class="difflineplus">+.alltabs-item[status=&quot;available&quot;] &gt; .menu-iconic-left &gt; .menu-iconic-icon {</span>
<a href="#l18.156"></a><span id="l18.156" class="difflineplus">+  list-style-image: url(&quot;chrome://instantbird/skin/available-16.png&quot;) !important;</span>
<a href="#l18.157"></a><span id="l18.157" class="difflineplus">+}</span>
<a href="#l18.158"></a><span id="l18.158" class="difflineplus">+.tabbrowser-tab[status=&quot;away&quot;] &gt; .tab-icon-image,</span>
<a href="#l18.159"></a><span id="l18.159" class="difflineplus">+.alltabs-item[status=&quot;away&quot;] &gt; .menu-iconic-left &gt; .menu-iconic-icon {</span>
<a href="#l18.160"></a><span id="l18.160" class="difflineplus">+  list-style-image: url(&quot;chrome://instantbird/skin/away-16.png&quot;) !important;</span>
<a href="#l18.161"></a><span id="l18.161" class="difflineplus">+}</span>
<a href="#l18.162"></a><span id="l18.162" class="difflineplus">+.tabbrowser-tab[status=&quot;idle&quot;] &gt; .tab-icon-image,</span>
<a href="#l18.163"></a><span id="l18.163" class="difflineplus">+.alltabs-item[status=&quot;idle&quot;] &gt; .menu-iconic-left &gt; .menu-iconic-icon {</span>
<a href="#l18.164"></a><span id="l18.164" class="difflineplus">+  list-style-image: url(&quot;chrome://instantbird/skin/idle-16.png&quot;) !important;</span>
<a href="#l18.165"></a><span id="l18.165" class="difflineplus">+}</span>
<a href="#l18.166"></a><span id="l18.166" class="difflineplus">+</span>
<a href="#l18.167"></a><span id="l18.167" class="difflineplus">+.tabbrowser-tab[typing] &gt; .tab-icon-image,</span>
<a href="#l18.168"></a><span id="l18.168" class="difflineplus">+.alltabs-item[typing] &gt; .menu-iconic-left &gt; .menu-iconic-icon {</span>
<a href="#l18.169"></a><span id="l18.169" class="difflineplus">+  list-style-image: url(&quot;chrome://global/skin/icons/loading_16.png&quot;) !important;</span>
<a href="#l18.170"></a><span id="l18.170" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/im/themes/winstripe/instantbird/jar.mn</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/im/themes/winstripe/instantbird/jar.mn</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -8,16 +8,17 @@ classic.jar:</span>
<a href="#l19.4"></a><span id="l19.4"> 	skin/classic/instantbird/available.png</span>
<a href="#l19.5"></a><span id="l19.5"> 	skin/classic/instantbird/away-16.png</span>
<a href="#l19.6"></a><span id="l19.6"> 	skin/classic/instantbird/away.png</span>
<a href="#l19.7"></a><span id="l19.7"> 	skin/classic/instantbird/idle-16.png</span>
<a href="#l19.8"></a><span id="l19.8"> 	skin/classic/instantbird/idle.png</span>
<a href="#l19.9"></a><span id="l19.9"> 	skin/classic/instantbird/offline-16.png</span>
<a href="#l19.10"></a><span id="l19.10"> 	skin/classic/instantbird/offline.png</span>
<a href="#l19.11"></a><span id="l19.11"> 	skin/classic/instantbird/unknown-16.png</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineplus">+	skin/classic/instantbird/chat-16.png</span>
<a href="#l19.13"></a><span id="l19.13"> 	skin/classic/instantbird/founder.png</span>
<a href="#l19.14"></a><span id="l19.14"> 	skin/classic/instantbird/operator.png</span>
<a href="#l19.15"></a><span id="l19.15"> 	skin/classic/instantbird/half-operator.png</span>
<a href="#l19.16"></a><span id="l19.16"> 	skin/classic/instantbird/voice.png</span>
<a href="#l19.17"></a><span id="l19.17"> *	skin/classic/instantbird/blist.css</span>
<a href="#l19.18"></a><span id="l19.18"> 	skin/classic/instantbird/conv.css</span>
<a href="#l19.19"></a><span id="l19.19"> *	skin/classic/instantbird/conversation.css</span>
<a href="#l19.20"></a><span id="l19.20"> *	skin/classic/instantbird/engineManager.css</span>
<a href="#l19.21"></a><span id="l19.21" class="difflineat">@@ -101,25 +102,46 @@ classic.jar:</span>
<a href="#l19.22"></a><span id="l19.22"> 	skin/classic/prpl/zephyr/icon48.png	(prpl/prpl-zephyr-48.png)</span>
<a href="#l19.23"></a><span id="l19.23"> 	skin/classic/prpl/zephyr/icon.png	(prpl/prpl-zephyr.png)</span>
<a href="#l19.24"></a><span id="l19.24"> #endif</span>
<a href="#l19.25"></a><span id="l19.25"> 	skin/classic/instantbird/sounds/alert.wav	(sounds/alert.wav)</span>
<a href="#l19.26"></a><span id="l19.26"> 	skin/classic/instantbird/sounds/login.wav	(sounds/login.wav)</span>
<a href="#l19.27"></a><span id="l19.27"> 	skin/classic/instantbird/sounds/logout.wav	(sounds/logout.wav)</span>
<a href="#l19.28"></a><span id="l19.28"> 	skin/classic/instantbird/sounds/receive.wav	(sounds/receive.wav)</span>
<a href="#l19.29"></a><span id="l19.29"> 	skin/classic/instantbird/sounds/send.wav	(sounds/send.wav)</span>
<a href="#l19.30"></a><span id="l19.30" class="difflineminus">-	skin/classic/instantbird/tabbrowser/tab-left-bkgnd.png	(tabbrowser/tab-left-bkgnd.png)</span>
<a href="#l19.31"></a><span id="l19.31" class="difflineminus">-	skin/classic/instantbird/tabbrowser/tab-left-hover.png	(tabbrowser/tab-left-hover.png)</span>
<a href="#l19.32"></a><span id="l19.32" class="difflineminus">-	skin/classic/instantbird/tabbrowser/tab-left.png		(tabbrowser/tab-left.png)</span>
<a href="#l19.33"></a><span id="l19.33" class="difflineminus">-	skin/classic/instantbird/tabbrowser/tab-middle-bkgnd.png	(tabbrowser/tab-middle-bkgnd.png)</span>
<a href="#l19.34"></a><span id="l19.34" class="difflineminus">-	skin/classic/instantbird/tabbrowser/tab-middle-hover.png	(tabbrowser/tab-middle-hover.png)</span>
<a href="#l19.35"></a><span id="l19.35" class="difflineminus">-	skin/classic/instantbird/tabbrowser/tab-middle.png		(tabbrowser/tab-middle.png)</span>
<a href="#l19.36"></a><span id="l19.36" class="difflineminus">-	skin/classic/instantbird/tabbrowser/tab-right-bkgnd.png	(tabbrowser/tab-right-bkgnd.png)</span>
<a href="#l19.37"></a><span id="l19.37" class="difflineminus">-	skin/classic/instantbird/tabbrowser/tab-right-hover.png	(tabbrowser/tab-right-hover.png)</span>
<a href="#l19.38"></a><span id="l19.38" class="difflineminus">-	skin/classic/instantbird/tabbrowser/tab-right.png		(tabbrowser/tab-right.png)</span>
<a href="#l19.39"></a><span id="l19.39" class="difflineplus">+#ifdef XP_UNIX</span>
<a href="#l19.40"></a><span id="l19.40" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l19.41"></a><span id="l19.41" class="difflineplus">+	skin/classic/instantbird/tabbrowser.css                         (tabbrowser-pinstripe/tabbrowser.css)</span>
<a href="#l19.42"></a><span id="l19.42" class="difflineplus">+	skin/classic/instantbird/tabbrowser/newtab.png			(tabbrowser-pinstripe/newtab.png)</span>
<a href="#l19.43"></a><span id="l19.43" class="difflineplus">+	skin/classic/instantbird/tabbrowser/tab-arrow-left.png		(tabbrowser-pinstripe/tab-arrow-left.png)</span>
<a href="#l19.44"></a><span id="l19.44" class="difflineplus">+	skin/classic/instantbird/tabbrowser/tab-arrow-right.png		(tabbrowser-pinstripe/tab-arrow-right.png)</span>
<a href="#l19.45"></a><span id="l19.45" class="difflineplus">+	skin/classic/instantbird/tabbrowser/tab-bkgnd.png		(tabbrowser-pinstripe/tab-bkgnd.png)</span>
<a href="#l19.46"></a><span id="l19.46" class="difflineplus">+	skin/classic/instantbird/tabbrowser/tabbrowser-tabs-bkgnd.png	(tabbrowser-pinstripe/tabbrowser-tabs-bkgnd.png)</span>
<a href="#l19.47"></a><span id="l19.47" class="difflineplus">+	skin/classic/instantbird/tabbrowser/tabDragIndicator.png	(tabbrowser-pinstripe/tabDragIndicator.png)</span>
<a href="#l19.48"></a><span id="l19.48" class="difflineplus">+	skin/classic/instantbird/tabbrowser/alltabs-box-bkgnd-icon.png	(tabbrowser-pinstripe/alltabs-box-bkgnd-icon.png)</span>
<a href="#l19.49"></a><span id="l19.49" class="difflineplus">+	skin/classic/instantbird/tabbrowser/alltabs-box-overflow-bkgnd-animate.png (tabbrowser-pinstripe/alltabs-box-overflow-bkgnd-animate.png)</span>
<a href="#l19.50"></a><span id="l19.50" class="difflineplus">+#else</span>
<a href="#l19.51"></a><span id="l19.51" class="difflineplus">+	skin/classic/instantbird/tabbrowser.css	(tabbrowser-gnomestripe/tabbrowser.css)</span>
<a href="#l19.52"></a><span id="l19.52" class="difflineplus">+	skin/classic/instantbird/tabbrowser/tabDragIndicator.png	(tabbrowser-gnomestripe/tabDragIndicator.png)</span>
<a href="#l19.53"></a><span id="l19.53" class="difflineplus">+#endif</span>
<a href="#l19.54"></a><span id="l19.54" class="difflineplus">+#else</span>
<a href="#l19.55"></a><span id="l19.55" class="difflineplus">+	skin/classic/instantbird/tabbrowser.css                         (tabbrowser-winstripe/tabbrowser.css)</span>
<a href="#l19.56"></a><span id="l19.56" class="difflineplus">+	skin/classic/instantbird/tabbrowser/newtab.png			(tabbrowser-winstripe/newtab.png)</span>
<a href="#l19.57"></a><span id="l19.57" class="difflineplus">+	skin/classic/instantbird/tabbrowser/tab-active-bkgnd.png	(tabbrowser-winstripe/tab-active-bkgnd.png)</span>
<a href="#l19.58"></a><span id="l19.58" class="difflineplus">+	skin/classic/instantbird/tabbrowser/tab-arrow-left.png		(tabbrowser-winstripe/tab-arrow-left.png)</span>
<a href="#l19.59"></a><span id="l19.59" class="difflineplus">+	skin/classic/instantbird/tabbrowser/tab-arrow-right.png		(tabbrowser-winstripe/tab-arrow-right.png)</span>
<a href="#l19.60"></a><span id="l19.60" class="difflineplus">+	skin/classic/instantbird/tabbrowser/tab-bkgnd.png		(tabbrowser-winstripe/tab-bkgnd.png)</span>
<a href="#l19.61"></a><span id="l19.61" class="difflineplus">+	skin/classic/instantbird/tabbrowser/tabbrowser-tabs-bkgnd.png	(tabbrowser-winstripe/tabbrowser-tabs-bkgnd.png)</span>
<a href="#l19.62"></a><span id="l19.62" class="difflineplus">+	skin/classic/instantbird/tabbrowser/tabDragIndicator.png	(tabbrowser-winstripe/tabDragIndicator.png)</span>
<a href="#l19.63"></a><span id="l19.63" class="difflineplus">+	skin/classic/instantbird/tabbrowser/tab-hover-bkgnd.png		(tabbrowser-winstripe/tab-hover-bkgnd.png)</span>
<a href="#l19.64"></a><span id="l19.64" class="difflineplus">+	skin/classic/instantbird/tabbrowser/tabstrip-bottom.png		(tabbrowser-winstripe/tabstrip-bottom.png)</span>
<a href="#l19.65"></a><span id="l19.65" class="difflineplus">+	skin/classic/instantbird/tabbrowser/mainwindow-dropdown-arrow.png	(tabbrowser-winstripe/mainwindow-dropdown-arrow.png)</span>
<a href="#l19.66"></a><span id="l19.66" class="difflineplus">+	skin/classic/instantbird/tabbrowser/alltabs-box-overflow-end-bkgnd-animate.png  	(tabbrowser-winstripe/alltabs-box-overflow-end-bkgnd-animate.png)</span>
<a href="#l19.67"></a><span id="l19.67" class="difflineplus">+	skin/classic/instantbird/tabbrowser/alltabs-box-overflow-start-bkgnd-animate.png	(tabbrowser-winstripe/alltabs-box-overflow-start-bkgnd-animate.png)</span>
<a href="#l19.68"></a><span id="l19.68" class="difflineplus">+#endif</span>
<a href="#l19.69"></a><span id="l19.69"> 	skin/classic/instantbird/smileys/theme.js              (smileys/theme.js)</span>
<a href="#l19.70"></a><span id="l19.70"> 	skin/classic/instantbird/smileys/smile.png             (smileys/smile.png)</span>
<a href="#l19.71"></a><span id="l19.71"> 	skin/classic/instantbird/smileys/smile-big.png         (smileys/smile-big.png)</span>
<a href="#l19.72"></a><span id="l19.72"> 	skin/classic/instantbird/smileys/wink.png              (smileys/wink.png)</span>
<a href="#l19.73"></a><span id="l19.73"> 	skin/classic/instantbird/smileys/tongue.png            (smileys/tongue.png)</span>
<a href="#l19.74"></a><span id="l19.74"> 	skin/classic/instantbird/smileys/neutral.png           (smileys/neutral.png)</span>
<a href="#l19.75"></a><span id="l19.75"> 	skin/classic/instantbird/smileys/thinking.png          (smileys/thinking.png)</span>
<a href="#l19.76"></a><span id="l19.76"> 	skin/classic/instantbird/smileys/thinking2.png         (smileys/thinking2.png)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1">new file mode 100644</span>
<a href="#l20.2"></a><span id="l20.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..e659612d59a057cb37d610f0b029af4c2751b4ce</span>
<a href="#l20.3"></a><span id="l20.3">GIT binary patch
literal 456
zc%17D@N?(olHy`uVBq!ia0vp^+#t-s1|(OmDOUqhEX7WqAsj$Z!;#Vf&lt;Z~8yL&gt;2?p
zUk71ECym(^Ktah8*NBqf{Irtt#G+J&amp;^73-M%)IR4&lt;ivthz5Jr|+3#$m7#J8`JzX3_
zB&amp;O!}+j&lt;`^kZIB1_}ARIy{pB9B_u}Xm71f7`Tc8MUEa@l?#g7fUQ^m8vL;A8_Ais`
zC*GJNfdS$lMVGAL&amp;03}4yC}Dg&amp;n#&amp;5cG&gt;gAhYMX;?6p7NTy_16%Kl=T^t?CE7uE4E
z(2cu1*{E96#7?^4wcfVrWlPG=EmqbMX-U1tux|1nb#5NT#zvc8%IrbKt3y9|Fg0{Y
z6uv2sF31&amp;+J;-oq;)cyOvp&lt;HbEnjJsJMH?zE3yWS2e-!VnPF;TFQp(5H~;&lt;x^Bdhx
zi&amp;)~qj(mLLB&lt;7P~pzXh7_nHGnx*&gt;V*J{J7$XpFGu&gt;J&amp;&lt;Go%5jE?Vm^3k&amp;Ra#NmVVn
ztI(eix}Tq~_t=EX+ZD7QrCdBA-_YUU;&amp;JS&lt;@~l;tuf8;$TFz@_zfZyUs-~pB|Ic&amp;%
vccfMTB~Ct^sqeS_b9_;@!5yJ=tDEA=_jeugJ#$_N80rk3u6{1-oD!M&lt;8dA6M</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1">new file mode 100644</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineminus">--- /dev/null</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineplus">+++ b/im/themes/winstripe/instantbird/tabbrowser-gnomestripe/tabbrowser.css</span>
<a href="#l21.4"></a><span id="l21.4" class="difflineat">@@ -0,0 +1,206 @@</span>
<a href="#l21.5"></a><span id="l21.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l21.6"></a><span id="l21.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l21.7"></a><span id="l21.7" class="difflineplus">+ *</span>
<a href="#l21.8"></a><span id="l21.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l21.9"></a><span id="l21.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l21.10"></a><span id="l21.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l21.11"></a><span id="l21.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineplus">+ *</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l21.14"></a><span id="l21.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l21.16"></a><span id="l21.16" class="difflineplus">+ * License.</span>
<a href="#l21.17"></a><span id="l21.17" class="difflineplus">+ *</span>
<a href="#l21.18"></a><span id="l21.18" class="difflineplus">+ * The Original Code is mozilla.org code.</span>
<a href="#l21.19"></a><span id="l21.19" class="difflineplus">+ *</span>
<a href="#l21.20"></a><span id="l21.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l21.21"></a><span id="l21.21" class="difflineplus">+ * Netscape Communications Corporation.</span>
<a href="#l21.22"></a><span id="l21.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l21.23"></a><span id="l21.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l21.24"></a><span id="l21.24" class="difflineplus">+ *</span>
<a href="#l21.25"></a><span id="l21.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l21.26"></a><span id="l21.26" class="difflineplus">+ *   Joe Hewitt (hewitt@netscape.com)</span>
<a href="#l21.27"></a><span id="l21.27" class="difflineplus">+ *   Jason Kersey (kerz@netscape.com)</span>
<a href="#l21.28"></a><span id="l21.28" class="difflineplus">+ *   Pierre Chanial (chanial@noos.fr)</span>
<a href="#l21.29"></a><span id="l21.29" class="difflineplus">+ *   Dean Tessman (dean_tessman@hotmail.com)</span>
<a href="#l21.30"></a><span id="l21.30" class="difflineplus">+ *   Blake Ross (blake@cs.stanford.edu)</span>
<a href="#l21.31"></a><span id="l21.31" class="difflineplus">+ *   Pamela Greene (pamg.bugs@gmail.com)</span>
<a href="#l21.32"></a><span id="l21.32" class="difflineplus">+ *   Do Gottwald (dao@mozilla.com)</span>
<a href="#l21.33"></a><span id="l21.33" class="difflineplus">+ *   Florian Quze (florian@instantbird.org)</span>
<a href="#l21.34"></a><span id="l21.34" class="difflineplus">+ *</span>
<a href="#l21.35"></a><span id="l21.35" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l21.36"></a><span id="l21.36" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l21.37"></a><span id="l21.37" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l21.38"></a><span id="l21.38" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l21.39"></a><span id="l21.39" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l21.40"></a><span id="l21.40" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l21.41"></a><span id="l21.41" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l21.42"></a><span id="l21.42" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l21.43"></a><span id="l21.43" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l21.44"></a><span id="l21.44" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l21.45"></a><span id="l21.45" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l21.46"></a><span id="l21.46" class="difflineplus">+ *</span>
<a href="#l21.47"></a><span id="l21.47" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l21.48"></a><span id="l21.48" class="difflineplus">+</span>
<a href="#l21.49"></a><span id="l21.49" class="difflineplus">+/* Tabs */</span>
<a href="#l21.50"></a><span id="l21.50" class="difflineplus">+.tabbrowser-tab {</span>
<a href="#l21.51"></a><span id="l21.51" class="difflineplus">+  border: none !important;</span>
<a href="#l21.52"></a><span id="l21.52" class="difflineplus">+  padding: 0px;</span>
<a href="#l21.53"></a><span id="l21.53" class="difflineplus">+  margin-bottom: 1px;</span>
<a href="#l21.54"></a><span id="l21.54" class="difflineplus">+}</span>
<a href="#l21.55"></a><span id="l21.55" class="difflineplus">+</span>
<a href="#l21.56"></a><span id="l21.56" class="difflineplus">+.tabbrowser-tab[selected=&quot;true&quot;] {</span>
<a href="#l21.57"></a><span id="l21.57" class="difflineplus">+  margin-bottom: 0px;</span>
<a href="#l21.58"></a><span id="l21.58" class="difflineplus">+}</span>
<a href="#l21.59"></a><span id="l21.59" class="difflineplus">+</span>
<a href="#l21.60"></a><span id="l21.60" class="difflineplus">+.tab-icon-image {</span>
<a href="#l21.61"></a><span id="l21.61" class="difflineplus">+  width: 16px;</span>
<a href="#l21.62"></a><span id="l21.62" class="difflineplus">+  height: 16px;</span>
<a href="#l21.63"></a><span id="l21.63" class="difflineplus">+  -moz-margin-start: 4px;</span>
<a href="#l21.64"></a><span id="l21.64" class="difflineplus">+  -moz-margin-end: 3px;</span>
<a href="#l21.65"></a><span id="l21.65" class="difflineplus">+}</span>
<a href="#l21.66"></a><span id="l21.66" class="difflineplus">+</span>
<a href="#l21.67"></a><span id="l21.67" class="difflineplus">+.tabs-bottom {</span>
<a href="#l21.68"></a><span id="l21.68" class="difflineplus">+  border-bottom: 1px solid threedshadow;</span>
<a href="#l21.69"></a><span id="l21.69" class="difflineplus">+}</span>
<a href="#l21.70"></a><span id="l21.70" class="difflineplus">+</span>
<a href="#l21.71"></a><span id="l21.71" class="difflineplus">+#context_newTab {</span>
<a href="#l21.72"></a><span id="l21.72" class="difflineplus">+  list-style-image: url(&quot;chrome://browser/skin/Toolbar-small.png&quot;);</span>
<a href="#l21.73"></a><span id="l21.73" class="difflineplus">+  -moz-image-region: rect(0px 64px 16px 48px);</span>
<a href="#l21.74"></a><span id="l21.74" class="difflineplus">+}</span>
<a href="#l21.75"></a><span id="l21.75" class="difflineplus">+</span>
<a href="#l21.76"></a><span id="l21.76" class="difflineplus">+#context_newTab[disabled] {</span>
<a href="#l21.77"></a><span id="l21.77" class="difflineplus">+  -moz-image-region: rect(16px 64px 32px 48px);</span>
<a href="#l21.78"></a><span id="l21.78" class="difflineplus">+}</span>
<a href="#l21.79"></a><span id="l21.79" class="difflineplus">+</span>
<a href="#l21.80"></a><span id="l21.80" class="difflineplus">+#context_reloadTab {</span>
<a href="#l21.81"></a><span id="l21.81" class="difflineplus">+  list-style-image: url(&quot;moz-icon://stock/gtk-refresh?size=menu&quot;);</span>
<a href="#l21.82"></a><span id="l21.82" class="difflineplus">+}</span>
<a href="#l21.83"></a><span id="l21.83" class="difflineplus">+</span>
<a href="#l21.84"></a><span id="l21.84" class="difflineplus">+#context_closeOtherTabs {</span>
<a href="#l21.85"></a><span id="l21.85" class="difflineplus">+  list-style-image: url(&quot;moz-icon://stock/gtk-clear?size=menu&quot;);</span>
<a href="#l21.86"></a><span id="l21.86" class="difflineplus">+}</span>
<a href="#l21.87"></a><span id="l21.87" class="difflineplus">+</span>
<a href="#l21.88"></a><span id="l21.88" class="difflineplus">+#context_closeOtherTabs[disabled] {</span>
<a href="#l21.89"></a><span id="l21.89" class="difflineplus">+  list-style-image: url(&quot;moz-icon://stock/gtk-clear?size=menu&amp;state=disabled&quot;);</span>
<a href="#l21.90"></a><span id="l21.90" class="difflineplus">+}</span>
<a href="#l21.91"></a><span id="l21.91" class="difflineplus">+</span>
<a href="#l21.92"></a><span id="l21.92" class="difflineplus">+#context_undoCloseTab {</span>
<a href="#l21.93"></a><span id="l21.93" class="difflineplus">+  list-style-image: url(&quot;moz-icon://stock/gtk-undelete?size=menu&quot;);</span>
<a href="#l21.94"></a><span id="l21.94" class="difflineplus">+}</span>
<a href="#l21.95"></a><span id="l21.95" class="difflineplus">+</span>
<a href="#l21.96"></a><span id="l21.96" class="difflineplus">+#context_closeTab {</span>
<a href="#l21.97"></a><span id="l21.97" class="difflineplus">+  /*XXX Avoiding size=menu as some themes (e.g. Human) don't provide the icon</span>
<a href="#l21.98"></a><span id="l21.98" class="difflineplus">+        at 16*16px (bug 426930), and upscaled images are ugly (bug 422179). */</span>
<a href="#l21.99"></a><span id="l21.99" class="difflineplus">+  list-style-image: url(&quot;moz-icon://stock/gtk-close?size=toolbar&quot;);</span>
<a href="#l21.100"></a><span id="l21.100" class="difflineplus">+}</span>
<a href="#l21.101"></a><span id="l21.101" class="difflineplus">+</span>
<a href="#l21.102"></a><span id="l21.102" class="difflineplus">+/* tabbrowser-tab focus ring */</span>
<a href="#l21.103"></a><span id="l21.103" class="difflineplus">+.tabbrowser-tab &gt; .tab-text {</span>
<a href="#l21.104"></a><span id="l21.104" class="difflineplus">+  border: 1px dotted transparent;</span>
<a href="#l21.105"></a><span id="l21.105" class="difflineplus">+}</span>
<a href="#l21.106"></a><span id="l21.106" class="difflineplus">+</span>
<a href="#l21.107"></a><span id="l21.107" class="difflineplus">+.tabbrowser-tab[selected=&quot;true&quot;]:focus &gt; .tab-text {</span>
<a href="#l21.108"></a><span id="l21.108" class="difflineplus">+  border: 1px dotted -moz-DialogText;</span>
<a href="#l21.109"></a><span id="l21.109" class="difflineplus">+}</span>
<a href="#l21.110"></a><span id="l21.110" class="difflineplus">+</span>
<a href="#l21.111"></a><span id="l21.111" class="difflineplus">+/* Tab drag and drop */</span>
<a href="#l21.112"></a><span id="l21.112" class="difflineplus">+.tab-drop-indicator-bar {</span>
<a href="#l21.113"></a><span id="l21.113" class="difflineplus">+  height: 11px;</span>
<a href="#l21.114"></a><span id="l21.114" class="difflineplus">+  margin-top: -11px;</span>
<a href="#l21.115"></a><span id="l21.115" class="difflineplus">+  position: relative;</span>
<a href="#l21.116"></a><span id="l21.116" class="difflineplus">+  /* set -moz-margin-start to -1/2 indicator width: */</span>
<a href="#l21.117"></a><span id="l21.117" class="difflineplus">+  -moz-margin-start: -5px;</span>
<a href="#l21.118"></a><span id="l21.118" class="difflineplus">+}</span>
<a href="#l21.119"></a><span id="l21.119" class="difflineplus">+</span>
<a href="#l21.120"></a><span id="l21.120" class="difflineplus">+.tab-drop-indicator {</span>
<a href="#l21.121"></a><span id="l21.121" class="difflineplus">+  height: 11px;</span>
<a href="#l21.122"></a><span id="l21.122" class="difflineplus">+  width: 11px;</span>
<a href="#l21.123"></a><span id="l21.123" class="difflineplus">+  margin-bottom: -5px;</span>
<a href="#l21.124"></a><span id="l21.124" class="difflineplus">+  position: relative;</span>
<a href="#l21.125"></a><span id="l21.125" class="difflineplus">+  background: url('chrome://instantbird/skin/tabbrowser/tabDragIndicator.png') 50% 50% no-repeat;</span>
<a href="#l21.126"></a><span id="l21.126" class="difflineplus">+}</span>
<a href="#l21.127"></a><span id="l21.127" class="difflineplus">+</span>
<a href="#l21.128"></a><span id="l21.128" class="difflineplus">+/* In-tab close button */</span>
<a href="#l21.129"></a><span id="l21.129" class="difflineplus">+.tab-close-button &gt; .toolbarbutton-icon {</span>
<a href="#l21.130"></a><span id="l21.130" class="difflineplus">+  /* XXX Buttons have padding in widget/ that we don't want here but can't override with good CSS, so we must</span>
<a href="#l21.131"></a><span id="l21.131" class="difflineplus">+     use evil CSS to give the impression of smaller content */</span>
<a href="#l21.132"></a><span id="l21.132" class="difflineplus">+  margin: -3px !important;</span>
<a href="#l21.133"></a><span id="l21.133" class="difflineplus">+}</span>
<a href="#l21.134"></a><span id="l21.134" class="difflineplus">+</span>
<a href="#l21.135"></a><span id="l21.135" class="difflineplus">+.tab-close-button {</span>
<a href="#l21.136"></a><span id="l21.136" class="difflineplus">+  -moz-margin-end: 6px;</span>
<a href="#l21.137"></a><span id="l21.137" class="difflineplus">+  padding: 0px;</span>
<a href="#l21.138"></a><span id="l21.138" class="difflineplus">+  border: none;</span>
<a href="#l21.139"></a><span id="l21.139" class="difflineplus">+  list-style-image: url(&quot;moz-icon://stock/gtk-close?size=menu&quot;);</span>
<a href="#l21.140"></a><span id="l21.140" class="difflineplus">+}</span>
<a href="#l21.141"></a><span id="l21.141" class="difflineplus">+</span>
<a href="#l21.142"></a><span id="l21.142" class="difflineplus">+.tabbrowser-tab[selected=&quot;true&quot;] &gt; .tab-close-button {</span>
<a href="#l21.143"></a><span id="l21.143" class="difflineplus">+  /* Make this button focusable so clicking on it will not focus the tab while</span>
<a href="#l21.144"></a><span id="l21.144" class="difflineplus">+     it's getting closed */</span>
<a href="#l21.145"></a><span id="l21.145" class="difflineplus">+  -moz-user-focus: normal;</span>
<a href="#l21.146"></a><span id="l21.146" class="difflineplus">+}</span>
<a href="#l21.147"></a><span id="l21.147" class="difflineplus">+</span>
<a href="#l21.148"></a><span id="l21.148" class="difflineplus">+.tab-close-button:focus {</span>
<a href="#l21.149"></a><span id="l21.149" class="difflineplus">+  outline: none !important;</span>
<a href="#l21.150"></a><span id="l21.150" class="difflineplus">+}</span>
<a href="#l21.151"></a><span id="l21.151" class="difflineplus">+</span>
<a href="#l21.152"></a><span id="l21.152" class="difflineplus">+/* Tabstrip new tab button */</span>
<a href="#l21.153"></a><span id="l21.153" class="difflineplus">+.tabs-newtab-button {</span>
<a href="#l21.154"></a><span id="l21.154" class="difflineplus">+  list-style-image: url(&quot;moz-icon://stock/gtk-add?size=menu&quot;);</span>
<a href="#l21.155"></a><span id="l21.155" class="difflineplus">+  border: none;</span>
<a href="#l21.156"></a><span id="l21.156" class="difflineplus">+  margin-bottom: 1px;</span>
<a href="#l21.157"></a><span id="l21.157" class="difflineplus">+}</span>
<a href="#l21.158"></a><span id="l21.158" class="difflineplus">+</span>
<a href="#l21.159"></a><span id="l21.159" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .tabs-newtab-button {</span>
<a href="#l21.160"></a><span id="l21.160" class="difflineplus">+  width: 32px;</span>
<a href="#l21.161"></a><span id="l21.161" class="difflineplus">+}</span>
<a href="#l21.162"></a><span id="l21.162" class="difflineplus">+</span>
<a href="#l21.163"></a><span id="l21.163" class="difflineplus">+.tabs-newtab-button &gt; .toolbarbutton-icon {</span>
<a href="#l21.164"></a><span id="l21.164" class="difflineplus">+  margin-top: -2px;</span>
<a href="#l21.165"></a><span id="l21.165" class="difflineplus">+  margin-bottom: -2px;</span>
<a href="#l21.166"></a><span id="l21.166" class="difflineplus">+}</span>
<a href="#l21.167"></a><span id="l21.167" class="difflineplus">+</span>
<a href="#l21.168"></a><span id="l21.168" class="difflineplus">+/* Tabstrip close button */</span>
<a href="#l21.169"></a><span id="l21.169" class="difflineplus">+.tabs-closebutton {</span>
<a href="#l21.170"></a><span id="l21.170" class="difflineplus">+  list-style-image: url(&quot;moz-icon://stock/gtk-close?size=menu&quot;);</span>
<a href="#l21.171"></a><span id="l21.171" class="difflineplus">+  border: none;</span>
<a href="#l21.172"></a><span id="l21.172" class="difflineplus">+  margin-bottom: 1px;</span>
<a href="#l21.173"></a><span id="l21.173" class="difflineplus">+}</span>
<a href="#l21.174"></a><span id="l21.174" class="difflineplus">+</span>
<a href="#l21.175"></a><span id="l21.175" class="difflineplus">+.tabs-closebutton &gt; .toolbarbutton-icon {</span>
<a href="#l21.176"></a><span id="l21.176" class="difflineplus">+  margin: 0;</span>
<a href="#l21.177"></a><span id="l21.177" class="difflineplus">+}</span>
<a href="#l21.178"></a><span id="l21.178" class="difflineplus">+</span>
<a href="#l21.179"></a><span id="l21.179" class="difflineplus">+/* Tabbrowser arrowscrollbox arrows */</span>
<a href="#l21.180"></a><span id="l21.180" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-up {</span>
<a href="#l21.181"></a><span id="l21.181" class="difflineplus">+  -moz-appearance: tab-scroll-arrow-back;</span>
<a href="#l21.182"></a><span id="l21.182" class="difflineplus">+  margin: 0px;</span>
<a href="#l21.183"></a><span id="l21.183" class="difflineplus">+}</span>
<a href="#l21.184"></a><span id="l21.184" class="difflineplus">+</span>
<a href="#l21.185"></a><span id="l21.185" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-down {</span>
<a href="#l21.186"></a><span id="l21.186" class="difflineplus">+  -moz-appearance: tab-scroll-arrow-forward;</span>
<a href="#l21.187"></a><span id="l21.187" class="difflineplus">+  margin: 0px;</span>
<a href="#l21.188"></a><span id="l21.188" class="difflineplus">+}</span>
<a href="#l21.189"></a><span id="l21.189" class="difflineplus">+</span>
<a href="#l21.190"></a><span id="l21.190" class="difflineplus">+.tabs-alltabs-box-animate {</span>
<a href="#l21.191"></a><span id="l21.191" class="difflineplus">+  background-color: Highlight;</span>
<a href="#l21.192"></a><span id="l21.192" class="difflineplus">+  opacity: 0.0;</span>
<a href="#l21.193"></a><span id="l21.193" class="difflineplus">+}</span>
<a href="#l21.194"></a><span id="l21.194" class="difflineplus">+</span>
<a href="#l21.195"></a><span id="l21.195" class="difflineplus">+/* All tabs menupopup */</span>
<a href="#l21.196"></a><span id="l21.196" class="difflineplus">+.alltabs-item[selected=&quot;true&quot;] {</span>
<a href="#l21.197"></a><span id="l21.197" class="difflineplus">+  font-weight: bold;</span>
<a href="#l21.198"></a><span id="l21.198" class="difflineplus">+}</span>
<a href="#l21.199"></a><span id="l21.199" class="difflineplus">+</span>
<a href="#l21.200"></a><span id="l21.200" class="difflineplus">+.tabs-alltabs-button {</span>
<a href="#l21.201"></a><span id="l21.201" class="difflineplus">+  margin-bottom: 1px;</span>
<a href="#l21.202"></a><span id="l21.202" class="difflineplus">+}</span>
<a href="#l21.203"></a><span id="l21.203" class="difflineplus">+</span>
<a href="#l21.204"></a><span id="l21.204" class="difflineplus">+.tabs-alltabs-button &gt; .toolbarbutton-menu-dropmarker {</span>
<a href="#l21.205"></a><span id="l21.205" class="difflineplus">+  margin-bottom: -1px;</span>
<a href="#l21.206"></a><span id="l21.206" class="difflineplus">+}</span>
<a href="#l21.207"></a><span id="l21.207" class="difflineplus">+</span>
<a href="#l21.208"></a><span id="l21.208" class="difflineplus">+.tabs-alltabs-button &gt; .toolbarbutton-icon {</span>
<a href="#l21.209"></a><span id="l21.209" class="difflineplus">+  display: none;</span>
<a href="#l21.210"></a><span id="l21.210" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1">new file mode 100644</span>
<a href="#l22.2"></a><span id="l22.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..08f54bba766c0d9ca9ced765545f9f1ad581aade</span>
<a href="#l22.3"></a><span id="l22.3">GIT binary patch
literal 1124
zc$@)b1e^PbP)&lt;h;3K|Lk000e1NJLTq002S&amp;000yS1^@s6IfLs00000PbVXQnQ*UN;
zcVTj606}DLVr3vnZDD6+Qe|Oed2z{QJOBU$21!IgRCwClSY1d|K@^_3?yqa+t^`IB
zixKLBA{o6%1SJRs_7Fi3B=pcz50wNNz4=fWLWmU&lt;SrMT{f%u@{8e~0$P(mb8_@X2g
z&gt;Z&lt;GS-Mx2bI&amp;(cE!|L9&gt;{=94hA9Hu_+}W9LzVn@PmvYWYHnsL4tD^u-&gt;E$)e@Hj^&gt;
zguLc1l6_5VHV5EBc$MoM8#2VElK&gt;MDSFV%UN`z2=8{h{70J#7kz&gt;|gyNkRgk1C{|x
zfEB5ZY*vH^2?zoT0K1WtR5DZ&amp;#O7mwxfF%0R|KVW5N|Sv3lpc~0&lt;Sq{yLw8;l(=+!
z@-S~WjUvQ`^X}b!`$coP3Dt5OP0Cr4Fw-DcuAiyE@DK{28!19Z7&gt;c&gt;1TPQ_|`W&amp;ob
zEgl^bA$`D(D7VX&gt;N8G*u(L6puwyi~o#K00dF?1meYu#&amp;u*ZmL-?#B~6ltCF%37;ID
z1m_QN-i8dykV@#VF+GNaCSTmCdpf6+!lwJ*&gt;ovD0tuibn7zuLw+Tor8ABhf4tUhm-
zHCnNMshr|QO*(a}!xNU{8kF&gt;vj$qAZUNyE2*wAa}4+82%h-fa)h7U0_VG;3jnhe0l
zQB=HCDAzJblR7Z1%{I-!yjq4@fZ;}TG{6NB_na{sZ(x=;h_U#L41Z=zL@*fSHjB0v
zi(@v`^7HfKnTWtKB!eOhOoJi=OnO{Q7xE`O)z-N6owx^M;+Qp-&amp;?seSq-VaZt?gTB
zX{m_?izfwMaZildED&lt;d&amp;ExqAzct$CJRJg=FF~&amp;iKXyU2P1E$W^?u&amp;$S*{m5~Cds%?
zk_iM{i|&gt;NDEOxfG_ydxVNbxC7ZA$E7fJli&amp;Y3~08h*UeVNiMcEFP7LusU&lt;}1kRL7}
z&lt;$D6;C~Rl1!HCCX#Lf7sqCtK&lt;$w@T2Og&gt;L9lOKXOzzl|or3{*-?;29gk_@%N^rMQs
zikf9oh@*mL5euj)b4!&amp;aq`&lt;4tol;Jw4+w49cF9O-Gj!)svSOpJVBQ-Uydt5P=Mrw(
ztrGOSBXTn~AFmh2#F7T_d$l*0E}w2x5(3q&gt;vS3};N2;o-goO3V%E~{nSnTUgoc7}4
z;&gt;Ysx@^NuOWo2dK(P;F&amp;gEvXFe4a=1i~^=5+HalcE7@Q8OB7!v;i8Gh%_j$B+LUu`
zi3qRPJJ8+T-CI*rGu74A)dwy=uoFZC0)a?RPtTL;&gt;guu1&amp;dz6{P$=TSG?`LY$d{@W
zBxX^_fB3J~-*mC+!GYpkqm36T9*xYn-=Tumvc`5iLd0JkAc8-&lt;Q_Xf&gt;#Uq@Q=(7Cx
zh5RJ%NHIA+{F@9;E?Fs5N6)ZAE1S*IN#Q2RkiMaz0!&amp;oInkusKHQZ@qO86Lf`c(Z_
qN-g#OXCg&gt;S(L__cMeWHy0R{kyc*LKjV9Zkh0000&lt;MNUMnLSTX%?F7aE</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1">new file mode 100644</span>
<a href="#l23.2"></a><span id="l23.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..99a8637788949083a9fb0bccb1e97a8b96d59ea6</span>
<a href="#l23.3"></a><span id="l23.3">GIT binary patch
literal 132
zc%17D@N?(olHy`uVBq!ia0vp^k|4~%1SGw?g-k%464!{5;QX|b^2DN42FH~Aq*MjZ
z+{E&lt;Mpwz^a%EFVWHb6yco-U3d6}OUnW`CaF=+)5KSe0;PP2gs?vr?wnAVynvBm*NG
Z!&lt;&lt;!2#&lt;m$cSAaSgJYD@&lt;);T3K0RYKIC&amp;&gt;T+</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1">new file mode 100644</span>
<a href="#l24.2"></a><span id="l24.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..f6582078f49789bdad234906e474bfe0b9027f77</span>
<a href="#l24.3"></a><span id="l24.3">GIT binary patch
literal 757
zc$@+C0t)?!P)&lt;h;3K|Lk000e1NJLTq001@s000yS1^@s6#v#t&amp;0000PbVXQnQ*UN;
zcVTj606}DLVr3vnZDD6+Qe|Oed2z{QJOBU!mq|oHRCwCVn9FJvK@f(kr+Y5vB0^q3
zUqEm#!DW^rxE6c@L6JOyNQ|pMAR9L&gt;vIvOaMmH*=AU=U^ysRZ4CeF3bSlw1@QHf_J
zWRPk2&gt;6tk_&amp;3sdTRZkz)wk?dQZN2+*s8A90Qm(bfXhA&amp;~7-!&gt;9nw&lt;v$K`a=IrQiIy
z88MV58Fm~51j5x&amp;@1f0z&gt;=!H+pkh+Oj$;8&lt;GgZ{X7_G?d=O8jv%KC%^1maYp3Te?!
zFs0OMpQ&amp;xTdMbY@^@Zj+x5R&gt;q*)JiO8ET4}IBnkBd*%k;Uca`6T~5*r%J#M5&amp;w-**
zcjT3X3lVcrbJ8T9o(cDyC3tSlhN7tYfK&gt;y5*&amp;anhi5yEQQVz-y&amp;2&amp;2DV1~^dZ0YWe
z#txPQ3z8-0I?2NLIrSk*IV&amp;!ak_$BE!Yej7BqoRiHhACVj-2|;JkLupFX0i+a~`Xr
z%&amp;i$kWaYue&lt;2R9s!2y|UhWgFZ6bGn7uvGzzriNR0u3o~+`&gt;5}z!{Z`Wu!&gt;WQ+z1bu
z^oUTy)|iEeSoliNU6Yt&gt;3eJ8GOvk7s{rmE?fhbPFmPgCL5iop%&amp;&amp;8X+NY~$=#CJG;
zTg-Evu0LFM8+!&gt;pZ+17&lt;cFG1OrG&gt;1vkgRWiyy6Dlzj@(Ftf5LZ6sdvy?N=WNyR0g1
ziu2unT&lt;&gt;af{Ed!zS^?%4U3}n2WJ_N&gt;Y*l)&amp;58vRavmELN*)KS(ce#%TTzsJ;S`w@j
z&gt;r`Xwkn$eJ{dPcoc~Y=sATZqlr5IcQE5tfgxnd!}a$0K(2G;!%j5+ag2r8Usr)R|Y
zLK}&amp;7D&amp;M=iy5%ms_~a`fuiPb_`=X`Bupb-vBe)(7n1DR(wxxHD{qGhE2;WTh-DtLB
n-e_{Th#pumz+Qh1{1RXQpnWlKFekL300000NkvXXu0mjfOHNuQ</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1">new file mode 100644</span>
<a href="#l25.2"></a><span id="l25.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..1e8633ab75a72357c8c40119b22cfefc8645a34b</span>
<a href="#l25.3"></a><span id="l25.3">GIT binary patch
literal 924
zc$@*817rM&amp;P)&lt;h;3K|Lk000e1NJLTq001li000pP1^@s6reIET0000PbVXQnQ*UN;
zcVTj606}DLVr3vnZDD6+Qe|Oed2z{QJOBU#K1oDDRCwCVmS0FyQ5?tby}NhKxh9*g
zEnJeU9F7J4iyFl!?L~s@L4qP*!WbCz5`k$1vx3BMFEetmhjJ8?^&lt;adUD_T?7#?*y|
zL?xw(q$n!wkK5eV@5mj@b$2(P+Jz5?d+wLt{hr_b-QPKQB9XxU=VkO{e1tR1B}gp)
zE`kP68RIm0XBZiz08Yw?3`c=&amp;L_Qft=8zvA%|7}b)$A4!O0Fn#5#jjFT;B%ThkMZ0
zWiVR+2mvurj7C%6P#27a^a40UhJX~%$&gt;DG==J0YZ@RT43T@G3T&amp;_LWHX+IZ18xjB_
zKoSau&lt;z~}JcQ6#c4EKDxL&lt;o{0XaT(ZK2X`;-|xy|pb)Tt_C!xl&amp;&amp;w=Y3UsHyY_ZvF
zUS`N}(y(}Q!(VE%x$cA__)*=Jx&gt;1&lt;p(wf~r9Rw9a&amp;&lt;A`z|DeTU@ia9xJ!3H-1zzxY
zJOwOlprxhd35ymb;dCKfR;zWTv9WO`EyGE}{Dt}DLvKf&gt;yD$zZy&gt;a!}M`&gt;xv&gt;y^Mx
zx#0iQFhx;!&lt;MDX8!C;sIvnH6D&amp;t!rmNfY$&amp;D!pEB1G5G;EtkvHKwP2GXj}!eKA75I
zC&lt;z2&lt;ADzCv6(bH`I&lt;N8y50tzIvumk6d6!|2$MZ&gt;{P;9idwN*k^_OpFrr_(tkm&amp;&lt;&gt;5
zbaY$*t&amp;B}OIXStiR4T)*t*u3&lt;G}1SNls&gt;!NuG2WA65;yb$oCqzZ&amp;8@+zl?^ftE*p)
zkB^U5R8&amp;ME@MEARlL?JRV|BS)y=7%(o1l9GXftWmYW0_~v9U#!N|k`pID^V5&amp;2S8e
z0KpI`7;e8-Wi2V&lt;{`ugTz2$U#R?^QCOl&gt;V7lgTV@w|iKt)viI{M=Xg8K!%@BOic9F
z*4EB}*2bcZNF&lt;UONX9~aeSMf=aWT5r`u!1XX)#FII&lt;MCZD9gpae7&gt;K0m=DvL#+lk$
zR3H%891e#K&gt;Ubebr;3V1qCv0M+uhL6FqK6cgSfMHyZu{pb8~&gt;9B#&lt;dTupWtFOJCPH
zgZFfGeaF?(X_R^T3&amp;im(ho7^+haC5Vy=cpUA8Cgl#+~k*0z3I`ZYM6&lt;=^}WZoz{|P
y2{HvNU(XU4T^iAppD^!FYgmdo#`ExB0R{jLvl-l4G5jb10000&lt;MNUMnLSTZzOsr}E</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1">new file mode 100644</span>
<a href="#l26.2"></a><span id="l26.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..2b251f05fc0ec945b4bdc9424a148013fe869f78</span>
<a href="#l26.3"></a><span id="l26.3">GIT binary patch
literal 934
zc$@*I16lluP)&lt;h;3K|Lk000e1NJLTq001li000pP1^@s6reIET0000PbVXQnQ*UN;
zcVTj606}DLVr3vnZDD6+Qe|Oed2z{QJOBU#NJ&amp;INRCwCVR&amp;PiXVHm%=-L1LRN^5P^
zv~1;Y^ue5cP-3L^MFQ=E6h#sY!Vf|q(kFvh6c(%ou|N(&amp;$S|BMnIELwB4?sA#f23F
zAvIG=(^@d6x7@Ag#(S~p?xvsI3qRib^W(YS`@83Tp9hb{V%Sy=`^f)GJjLsE;z(@k
z2Pc$Bm&lt;c45O_&lt;qC6D&amp;bmI8aDv6!14;W-~=Ffpka#SpXSY#43ORtRNnDA0?8OisM%|
zYzvOx-UPQK4TW=f8$dxnblrqG2e2E&gt;O0*DeQIaIV5{cw21aAgVX&gt;B2hdf&gt;GJr0KX2
z_XzMx0fa~nbKjJQm)Q%C=ofdF!;BX0Re)^3cC;WODF98=!z4+TftVHuo+T#2YPCKE
zA=SX^1SrI~ZEbCH6h-ZaxTX|l#1J@_rS%s}`j#X3$&amp;QYJmOsHzE^?U{ob0gKY^I$~
z=ZIV`*Fo@m5IjdnL}O#46@;|QWU}MH&gt;j9{RxOH`PewWKNuTUs&lt;LEKXUW^hiE2ao3V
zG+Z)zS&amp;TgF=p4Q^6`12h%To%55vZxDp=~zXILos6;L3Fo;{qVWX0ceDaF!RrpP@y#
z!K$h%zuj(MfVfJjR9Y&amp;O?(&lt;97qH^z^SLe&lt;cMpvT5A$Q-zHI%&gt;cBack6L3V)9LY+&lt;*
z?CR=zmu53*KxnmAtNr0{I9zGC5SH4h*XtShiwgp@__^!zPb-Js28z`x&lt;?n{`h5bL-
z_z4j|kI6Mbivc$Z3JQWAkEdUw(L56oz~y5{US8gJuh-iOqB}*nYDk4LgTcVK-R&gt;Ec
zO7%%VY;&gt;UigMQ-UY}0{#*}s}D7rEvcsuzo3VR#owb*$YnnM{j5pRX6hK7mI|A|jkd
zqj7R&lt;Z0tUWeVm4Cs;H=71_uYHK&lt;s&lt;;@x&lt;K4k%Nri|J9&lt;;&amp;-vDTrMP`MOgTdlY!;q}
z(0Lq9av1V=s=K@UIb6O(6-IDWR#uLKTMstEt*xzHf|U6Tmy?NQHZcv*BElz*sVADu
zCGDd#*qc&gt;0?raEwD&lt;Ukuruiucyxw3v*bFxx@I|2c;j3J{(w){}&lt;(^5*x2Dpq@RbhF
zfNqUQ=p*=Ef-l89GOCy08yyyji)4DY#tX(%?1go||DON@0EK`jmN{+w_5c6?07*qo
IM6N&lt;$g1Mow@Bjb+</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1">new file mode 100644</span>
<a href="#l27.2"></a><span id="l27.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..acf39e6e0e9236bddd226536703a50bc502aca4a</span>
<a href="#l27.3"></a><span id="l27.3">GIT binary patch
literal 149
zc%17D@N?(olHy`uVBq!ia0vp^96+qW!2%&gt;RR~4H9DfSXiUsv`UT#N$dLi=?swSYpL
z1s;*b3=DDyL74GyW=JqlkR{#G*O7tY+Knsz5k^41il&gt;WXNX4yW9o`fNMxC1d7g&amp;ze
qE#NHp&gt;nfU%lprB0A-Z5C14G&lt;87R$%cTls&lt;N89ZJ6T-G@yGywoKq$N54</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1">new file mode 100644</span>
<a href="#l28.2"></a><span id="l28.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..a373cae538b323666b9a0a363077c00f73c1a0f6</span>
<a href="#l28.3"></a><span id="l28.3">GIT binary patch
literal 599
zc$@)O0;v6oP)&lt;h;3K|Lk000e1NJLTq000aC001Ef1^@s6?MF%v0000PbVXQnQ*UN;
zcVTj606}DLVr3vnZDD6+Qe|Oed2z{QJOBUz`AI}URCwBAWIzC&gt;TeohRN=ZqDu(Pu(
zg9Lv5{CW4;vuA76)YMJ`x&amp;J_7j8Mfaj~_oyWaW}doVWR&gt;^8IK3_(6h-QcNF{eA(~*
z{`PFXtgP&amp;OpwJ(X2Bw1t58B8mTX!|j`(gC`=YLitTNyan8GlzNa-4s1=Wwy3qvJ6a
zpcsdaj!yjaO}~^tih-tnh&lt;0bc2U5Ir=T9Y|Z34@8{Zh*G(@6jdonrzLJU}3Q&gt;(M_!
zkfP!!&amp;TBf#%%4CQ#0H7oe*9OEkB?6Vq!y%s{r~^}FuyST{fC{+$jAs*3nCbvKY#vC
zMTY4Eh&amp;^@9PxUt+{&lt;DEFhz$}`m1TYp43sw@HZ#Z%tgNh@3DNEf$1ndCd-?7k&amp;$eT~
zWkLAu$N!ulPiKX&amp;U!OX$b^VDGC$54t{6BW=*bg%!Rl)RVBj%^C|8cx}_n#YNnyw1-
z&gt;#|smD~EP3KUP*&amp;whbus0vusLECR&amp;VNl8gnK&gt;zFyum1cWgh6bO7)TC?g`sL85eL;|
zgRTK229;xhDFlH(K&gt;QA7B^r1EmHWqlYz5G?e^8C+;15)e0Yw9`U{u4XhGDFM1)HFn
z9P&gt;MZ8h`~Ai28T^`t&gt;JGX_{a$5E~&gt;0m196Iy&lt;q^9*|mXK2FeF%xC+E?aA{xzVm=_|
lg7Uus@h2eu1ycYJU;vVP)d%Bn|FQr8002ovPDHLkV1fx!3_bt=</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1">new file mode 100644</span>
<a href="#l29.2"></a><span id="l29.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..1f80c83e76afe2460b6e60836836663b9b504d79</span>
<a href="#l29.3"></a><span id="l29.3">GIT binary patch
literal 155
zc%17D@N?(olHy`uVBq!ia0vp^%s?#3!3HG1q)u@HQY`6?zK#qG*KS&lt;#k1zsBmbgZg
z1m~xflqVLYGB~E&gt;C#5QQ&lt;|d}62BjvZR2H60wE-&amp;9^&gt;lFzskoJtn2_L+(!eC9P}g+k
zXXlxpeP@0)pZV#}_FVq$mp_ZI&lt;Sr&gt;&lt;VB%p2-78U_l7HD8sFA_b)z4*}Q$iB}34t?F</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1">new file mode 100644</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineminus">--- /dev/null</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineplus">+++ b/im/themes/winstripe/instantbird/tabbrowser-pinstripe/tabbrowser.css</span>
<a href="#l30.4"></a><span id="l30.4" class="difflineat">@@ -0,0 +1,348 @@</span>
<a href="#l30.5"></a><span id="l30.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l30.6"></a><span id="l30.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l30.7"></a><span id="l30.7" class="difflineplus">+ *</span>
<a href="#l30.8"></a><span id="l30.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l30.9"></a><span id="l30.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l30.10"></a><span id="l30.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l30.11"></a><span id="l30.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineplus">+ *</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l30.14"></a><span id="l30.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l30.15"></a><span id="l30.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l30.16"></a><span id="l30.16" class="difflineplus">+ * License.</span>
<a href="#l30.17"></a><span id="l30.17" class="difflineplus">+ *</span>
<a href="#l30.18"></a><span id="l30.18" class="difflineplus">+ * The Original Code is mozilla.org code.</span>
<a href="#l30.19"></a><span id="l30.19" class="difflineplus">+ *</span>
<a href="#l30.20"></a><span id="l30.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l30.21"></a><span id="l30.21" class="difflineplus">+ * Netscape Communications Corporation.</span>
<a href="#l30.22"></a><span id="l30.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l30.23"></a><span id="l30.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l30.24"></a><span id="l30.24" class="difflineplus">+ *</span>
<a href="#l30.25"></a><span id="l30.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l30.26"></a><span id="l30.26" class="difflineplus">+ *   Joe Hewitt (hewitt@netscape.com)</span>
<a href="#l30.27"></a><span id="l30.27" class="difflineplus">+ *   Jason Kersey (kerz@netscape.com)</span>
<a href="#l30.28"></a><span id="l30.28" class="difflineplus">+ *   Pierre Chanial (chanial@noos.fr)</span>
<a href="#l30.29"></a><span id="l30.29" class="difflineplus">+ *   Kevin Gerich (kevin@kmgerich.com)</span>
<a href="#l30.30"></a><span id="l30.30" class="difflineplus">+ *   Pamela Greene (pamg.bugs@gmail.com)</span>
<a href="#l30.31"></a><span id="l30.31" class="difflineplus">+ *   Do Gottwald (dao@mozilla.com)</span>
<a href="#l30.32"></a><span id="l30.32" class="difflineplus">+ *   Stephen Horlander (stephen@noved.org)</span>
<a href="#l30.33"></a><span id="l30.33" class="difflineplus">+ *   Florian Quze (florian@instantbird.org)</span>
<a href="#l30.34"></a><span id="l30.34" class="difflineplus">+ *</span>
<a href="#l30.35"></a><span id="l30.35" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l30.36"></a><span id="l30.36" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l30.37"></a><span id="l30.37" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l30.38"></a><span id="l30.38" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l30.39"></a><span id="l30.39" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l30.40"></a><span id="l30.40" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l30.41"></a><span id="l30.41" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l30.42"></a><span id="l30.42" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l30.43"></a><span id="l30.43" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l30.44"></a><span id="l30.44" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l30.45"></a><span id="l30.45" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l30.46"></a><span id="l30.46" class="difflineplus">+ *</span>
<a href="#l30.47"></a><span id="l30.47" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l30.48"></a><span id="l30.48" class="difflineplus">+</span>
<a href="#l30.49"></a><span id="l30.49" class="difflineplus">+statusbarpanel#statusbar-display {</span>
<a href="#l30.50"></a><span id="l30.50" class="difflineplus">+  -moz-padding-start: 0;</span>
<a href="#l30.51"></a><span id="l30.51" class="difflineplus">+}</span>
<a href="#l30.52"></a><span id="l30.52" class="difflineplus">+</span>
<a href="#l30.53"></a><span id="l30.53" class="difflineplus">+.statusbarpanel-text {</span>
<a href="#l30.54"></a><span id="l30.54" class="difflineplus">+  margin-top: 2px;</span>
<a href="#l30.55"></a><span id="l30.55" class="difflineplus">+  margin-bottom: 0;</span>
<a href="#l30.56"></a><span id="l30.56" class="difflineplus">+}</span>
<a href="#l30.57"></a><span id="l30.57" class="difflineplus">+</span>
<a href="#l30.58"></a><span id="l30.58" class="difflineplus">+/* ::::: tabbrowser ::::: */</span>
<a href="#l30.59"></a><span id="l30.59" class="difflineplus">+</span>
<a href="#l30.60"></a><span id="l30.60" class="difflineplus">+tabbrowser &gt; tabbox {</span>
<a href="#l30.61"></a><span id="l30.61" class="difflineplus">+  margin: 0;</span>
<a href="#l30.62"></a><span id="l30.62" class="difflineplus">+}</span>
<a href="#l30.63"></a><span id="l30.63" class="difflineplus">+</span>
<a href="#l30.64"></a><span id="l30.64" class="difflineplus">+.tab-icon-image {</span>
<a href="#l30.65"></a><span id="l30.65" class="difflineplus">+  width: 16px;</span>
<a href="#l30.66"></a><span id="l30.66" class="difflineplus">+  height: 16px;</span>
<a href="#l30.67"></a><span id="l30.67" class="difflineplus">+  margin-top: 2px;</span>
<a href="#l30.68"></a><span id="l30.68" class="difflineplus">+}</span>
<a href="#l30.69"></a><span id="l30.69" class="difflineplus">+</span>
<a href="#l30.70"></a><span id="l30.70" class="difflineplus">+.tabbrowser-tab:not(:hover):not([selected=&quot;true&quot;]) &gt; .tab-icon-image {</span>
<a href="#l30.71"></a><span id="l30.71" class="difflineplus">+  opacity: .6;</span>
<a href="#l30.72"></a><span id="l30.72" class="difflineplus">+}</span>
<a href="#l30.73"></a><span id="l30.73" class="difflineplus">+</span>
<a href="#l30.74"></a><span id="l30.74" class="difflineplus">+.tab-text {</span>
<a href="#l30.75"></a><span id="l30.75" class="difflineplus">+  margin-top: 3px;</span>
<a href="#l30.76"></a><span id="l30.76" class="difflineplus">+  margin-bottom: 0;</span>
<a href="#l30.77"></a><span id="l30.77" class="difflineplus">+  font: message-box;</span>
<a href="#l30.78"></a><span id="l30.78" class="difflineplus">+  font-weight: bold;</span>
<a href="#l30.79"></a><span id="l30.79" class="difflineplus">+  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.4);</span>
<a href="#l30.80"></a><span id="l30.80" class="difflineplus">+}</span>
<a href="#l30.81"></a><span id="l30.81" class="difflineplus">+</span>
<a href="#l30.82"></a><span id="l30.82" class="difflineplus">+.tabbrowser-tab,</span>
<a href="#l30.83"></a><span id="l30.83" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .tabs-newtab-button {</span>
<a href="#l30.84"></a><span id="l30.84" class="difflineplus">+  -moz-appearance: none;</span>
<a href="#l30.85"></a><span id="l30.85" class="difflineplus">+  -moz-border-radius: 0 0 6px 6px;</span>
<a href="#l30.86"></a><span id="l30.86" class="difflineplus">+  color: #222;</span>
<a href="#l30.87"></a><span id="l30.87" class="difflineplus">+  margin: 0 0 1px;</span>
<a href="#l30.88"></a><span id="l30.88" class="difflineplus">+  padding: 0 5px;</span>
<a href="#l30.89"></a><span id="l30.89" class="difflineplus">+  border-style: none solid solid;</span>
<a href="#l30.90"></a><span id="l30.90" class="difflineplus">+  border-width: 3px;</span>
<a href="#l30.91"></a><span id="l30.91" class="difflineplus">+  -moz-border-right-colors: rgba(0, 0, 0, .08) rgba(0, 0, 0, .17) rgba(180, 180, 180, .29);</span>
<a href="#l30.92"></a><span id="l30.92" class="difflineplus">+  -moz-border-bottom-colors: rgba(0, 0, 0, .08) rgba(0, 0, 0, .17) rgba(180, 180, 180, .29);</span>
<a href="#l30.93"></a><span id="l30.93" class="difflineplus">+  -moz-border-left-colors: rgba(0, 0, 0, .08) rgba(0, 0, 0, .17) rgba(180, 180, 180, .29);</span>
<a href="#l30.94"></a><span id="l30.94" class="difflineplus">+  -moz-background-clip: padding;</span>
<a href="#l30.95"></a><span id="l30.95" class="difflineplus">+  min-width: 1px !important;</span>
<a href="#l30.96"></a><span id="l30.96" class="difflineplus">+  text-align: center;</span>
<a href="#l30.97"></a><span id="l30.97" class="difflineplus">+  height: 24px;</span>
<a href="#l30.98"></a><span id="l30.98" class="difflineplus">+  background-image: url(chrome://instantbird/skin/tabbrowser/tab-bkgnd.png);</span>
<a href="#l30.99"></a><span id="l30.99" class="difflineplus">+}</span>
<a href="#l30.100"></a><span id="l30.100" class="difflineplus">+</span>
<a href="#l30.101"></a><span id="l30.101" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .tabs-newtab-button {</span>
<a href="#l30.102"></a><span id="l30.102" class="difflineplus">+  width: 34px;</span>
<a href="#l30.103"></a><span id="l30.103" class="difflineplus">+  padding-top: 1px;</span>
<a href="#l30.104"></a><span id="l30.104" class="difflineplus">+}</span>
<a href="#l30.105"></a><span id="l30.105" class="difflineplus">+</span>
<a href="#l30.106"></a><span id="l30.106" class="difflineplus">+.tabbrowser-tab[selected=&quot;true&quot;] {</span>
<a href="#l30.107"></a><span id="l30.107" class="difflineplus">+  -moz-user-focus: normal;</span>
<a href="#l30.108"></a><span id="l30.108" class="difflineplus">+  padding: 0 6px 1px;</span>
<a href="#l30.109"></a><span id="l30.109" class="difflineplus">+  border-width: 2px;</span>
<a href="#l30.110"></a><span id="l30.110" class="difflineplus">+  -moz-border-left-colors: rgba(0, 0, 0, .1) rgba(0, 0, 0, .2);</span>
<a href="#l30.111"></a><span id="l30.111" class="difflineplus">+  -moz-border-bottom-colors: rgba(0, 0, 0, .1) rgba(0, 0, 0, .2);</span>
<a href="#l30.112"></a><span id="l30.112" class="difflineplus">+  -moz-border-right-colors: rgba(0, 0, 0, .1) rgba(0, 0, 0, .2);</span>
<a href="#l30.113"></a><span id="l30.113" class="difflineplus">+  background-image: none;</span>
<a href="#l30.114"></a><span id="l30.114" class="difflineplus">+  background-color: -moz-mac-chrome-active;</span>
<a href="#l30.115"></a><span id="l30.115" class="difflineplus">+}</span>
<a href="#l30.116"></a><span id="l30.116" class="difflineplus">+</span>
<a href="#l30.117"></a><span id="l30.117" class="difflineplus">+.tabbrowser-tab[selected=&quot;true&quot;]:focus &gt; .tab-text {</span>
<a href="#l30.118"></a><span id="l30.118" class="difflineplus">+  -moz-box-shadow: 0 0 4px -moz-mac-focusring,</span>
<a href="#l30.119"></a><span id="l30.119" class="difflineplus">+                   0 0 4px -moz-mac-focusring,</span>
<a href="#l30.120"></a><span id="l30.120" class="difflineplus">+                   0 0 3px -moz-mac-focusring,</span>
<a href="#l30.121"></a><span id="l30.121" class="difflineplus">+                   0 0 2px -moz-mac-focusring inset,</span>
<a href="#l30.122"></a><span id="l30.122" class="difflineplus">+                   0 0 3px -moz-mac-focusring inset;</span>
<a href="#l30.123"></a><span id="l30.123" class="difflineplus">+}</span>
<a href="#l30.124"></a><span id="l30.124" class="difflineplus">+</span>
<a href="#l30.125"></a><span id="l30.125" class="difflineplus">+.tabbrowser-tab[selected=&quot;true&quot;],</span>
<a href="#l30.126"></a><span id="l30.126" class="difflineplus">+.tabbrowser-tab:hover {</span>
<a href="#l30.127"></a><span id="l30.127" class="difflineplus">+  color: #000000;</span>
<a href="#l30.128"></a><span id="l30.128" class="difflineplus">+}</span>
<a href="#l30.129"></a><span id="l30.129" class="difflineplus">+</span>
<a href="#l30.130"></a><span id="l30.130" class="difflineplus">+.tabbrowser-strip {</span>
<a href="#l30.131"></a><span id="l30.131" class="difflineplus">+  margin-top: -1px;</span>
<a href="#l30.132"></a><span id="l30.132" class="difflineplus">+  border-bottom: 1px solid #404040;</span>
<a href="#l30.133"></a><span id="l30.133" class="difflineplus">+  background-color: #9B9B9B;</span>
<a href="#l30.134"></a><span id="l30.134" class="difflineplus">+}</span>
<a href="#l30.135"></a><span id="l30.135" class="difflineplus">+</span>
<a href="#l30.136"></a><span id="l30.136" class="difflineplus">+.tabbrowser-tabs {</span>
<a href="#l30.137"></a><span id="l30.137" class="difflineplus">+  border: none;</span>
<a href="#l30.138"></a><span id="l30.138" class="difflineplus">+  -moz-box-pack: center;</span>
<a href="#l30.139"></a><span id="l30.139" class="difflineplus">+  -moz-box-align: center;</span>
<a href="#l30.140"></a><span id="l30.140" class="difflineplus">+  background: url(&quot;chrome://instantbird/skin/tabbrowser/tabbrowser-tabs-bkgnd.png&quot;) repeat-x;</span>
<a href="#l30.141"></a><span id="l30.141" class="difflineplus">+  height: 25px;</span>
<a href="#l30.142"></a><span id="l30.142" class="difflineplus">+  margin-bottom: 0;</span>
<a href="#l30.143"></a><span id="l30.143" class="difflineplus">+}</span>
<a href="#l30.144"></a><span id="l30.144" class="difflineplus">+</span>
<a href="#l30.145"></a><span id="l30.145" class="difflineplus">+.tabs-left {</span>
<a href="#l30.146"></a><span id="l30.146" class="difflineplus">+  display: -moz-box;</span>
<a href="#l30.147"></a><span id="l30.147" class="difflineplus">+  width: 3px;</span>
<a href="#l30.148"></a><span id="l30.148" class="difflineplus">+}</span>
<a href="#l30.149"></a><span id="l30.149" class="difflineplus">+</span>
<a href="#l30.150"></a><span id="l30.150" class="difflineplus">+.tabbrowser-tabs[overflow=&quot;true&quot;] .tabs-left {</span>
<a href="#l30.151"></a><span id="l30.151" class="difflineplus">+  display: none;</span>
<a href="#l30.152"></a><span id="l30.152" class="difflineplus">+}</span>
<a href="#l30.153"></a><span id="l30.153" class="difflineplus">+</span>
<a href="#l30.154"></a><span id="l30.154" class="difflineplus">+tabbrowser &gt; tabbox &gt; tabpanels {</span>
<a href="#l30.155"></a><span id="l30.155" class="difflineplus">+  -moz-appearance: none !important;</span>
<a href="#l30.156"></a><span id="l30.156" class="difflineplus">+}</span>
<a href="#l30.157"></a><span id="l30.157" class="difflineplus">+</span>
<a href="#l30.158"></a><span id="l30.158" class="difflineplus">+/**</span>
<a href="#l30.159"></a><span id="l30.159" class="difflineplus">+ * Tab Drag and Drop</span>
<a href="#l30.160"></a><span id="l30.160" class="difflineplus">+ */</span>
<a href="#l30.161"></a><span id="l30.161" class="difflineplus">+</span>
<a href="#l30.162"></a><span id="l30.162" class="difflineplus">+.tab-drop-indicator-bar {</span>
<a href="#l30.163"></a><span id="l30.163" class="difflineplus">+  height: 10px;</span>
<a href="#l30.164"></a><span id="l30.164" class="difflineplus">+  margin-top: -10px;</span>
<a href="#l30.165"></a><span id="l30.165" class="difflineplus">+  position: relative;</span>
<a href="#l30.166"></a><span id="l30.166" class="difflineplus">+  /* set -moz-margin-start to -1/2 indicator width: */</span>
<a href="#l30.167"></a><span id="l30.167" class="difflineplus">+  -moz-margin-start: -4px;</span>
<a href="#l30.168"></a><span id="l30.168" class="difflineplus">+}</span>
<a href="#l30.169"></a><span id="l30.169" class="difflineplus">+</span>
<a href="#l30.170"></a><span id="l30.170" class="difflineplus">+.tab-drop-indicator {</span>
<a href="#l30.171"></a><span id="l30.171" class="difflineplus">+  height: 33px;</span>
<a href="#l30.172"></a><span id="l30.172" class="difflineplus">+  width: 10px;</span>
<a href="#l30.173"></a><span id="l30.173" class="difflineplus">+  margin-bottom: -24px;</span>
<a href="#l30.174"></a><span id="l30.174" class="difflineplus">+  position: relative;</span>
<a href="#l30.175"></a><span id="l30.175" class="difflineplus">+  background: url('chrome://instantbird/skin/tabbrowser/tabDragIndicator.png') 50% 40% no-repeat;</span>
<a href="#l30.176"></a><span id="l30.176" class="difflineplus">+}</span>
<a href="#l30.177"></a><span id="l30.177" class="difflineplus">+</span>
<a href="#l30.178"></a><span id="l30.178" class="difflineplus">+/**</span>
<a href="#l30.179"></a><span id="l30.179" class="difflineplus">+ * In-tab close button</span>
<a href="#l30.180"></a><span id="l30.180" class="difflineplus">+ */</span>
<a href="#l30.181"></a><span id="l30.181" class="difflineplus">+</span>
<a href="#l30.182"></a><span id="l30.182" class="difflineplus">+.tab-close-button &gt; .toolbarbutton-icon {</span>
<a href="#l30.183"></a><span id="l30.183" class="difflineplus">+  -moz-margin-end: 0px !important;</span>
<a href="#l30.184"></a><span id="l30.184" class="difflineplus">+  margin-top: 1px;</span>
<a href="#l30.185"></a><span id="l30.185" class="difflineplus">+  padding: 0;</span>
<a href="#l30.186"></a><span id="l30.186" class="difflineplus">+}</span>
<a href="#l30.187"></a><span id="l30.187" class="difflineplus">+</span>
<a href="#l30.188"></a><span id="l30.188" class="difflineplus">+.tab-close-button {</span>
<a href="#l30.189"></a><span id="l30.189" class="difflineplus">+  list-style-image: url(&quot;chrome://global/skin/icons/closetab.png&quot;);</span>
<a href="#l30.190"></a><span id="l30.190" class="difflineplus">+  -moz-appearance: none;</span>
<a href="#l30.191"></a><span id="l30.191" class="difflineplus">+  border: none !important;</span>
<a href="#l30.192"></a><span id="l30.192" class="difflineplus">+  padding: 0;</span>
<a href="#l30.193"></a><span id="l30.193" class="difflineplus">+  margin: 1px 0 0;</span>
<a href="#l30.194"></a><span id="l30.194" class="difflineplus">+  background: none;</span>
<a href="#l30.195"></a><span id="l30.195" class="difflineplus">+  cursor: default;</span>
<a href="#l30.196"></a><span id="l30.196" class="difflineplus">+}</span>
<a href="#l30.197"></a><span id="l30.197" class="difflineplus">+</span>
<a href="#l30.198"></a><span id="l30.198" class="difflineplus">+.tab-close-button:hover,</span>
<a href="#l30.199"></a><span id="l30.199" class="difflineplus">+.tabbrowser-tab[selected=&quot;true&quot;] &gt; .tab-close-button:hover {</span>
<a href="#l30.200"></a><span id="l30.200" class="difflineplus">+  list-style-image: url(&quot;chrome://global/skin/icons/closetab-hover.png&quot;);</span>
<a href="#l30.201"></a><span id="l30.201" class="difflineplus">+}</span>
<a href="#l30.202"></a><span id="l30.202" class="difflineplus">+</span>
<a href="#l30.203"></a><span id="l30.203" class="difflineplus">+.tab-close-button:hover:active,</span>
<a href="#l30.204"></a><span id="l30.204" class="difflineplus">+.tabbrowser-tab[selected=&quot;true&quot;] &gt; .tab-close-button:hover:active {</span>
<a href="#l30.205"></a><span id="l30.205" class="difflineplus">+  list-style-image: url(&quot;chrome://global/skin/icons/closetab-active.png&quot;);</span>
<a href="#l30.206"></a><span id="l30.206" class="difflineplus">+}</span>
<a href="#l30.207"></a><span id="l30.207" class="difflineplus">+</span>
<a href="#l30.208"></a><span id="l30.208" class="difflineplus">+.tabbrowser-tab[selected=&quot;true&quot;] &gt; .tab-close-button {</span>
<a href="#l30.209"></a><span id="l30.209" class="difflineplus">+  /* Make this button focusable so clicking on it will not focus the tab while</span>
<a href="#l30.210"></a><span id="l30.210" class="difflineplus">+     it's getting closed */</span>
<a href="#l30.211"></a><span id="l30.211" class="difflineplus">+  -moz-user-focus: normal;</span>
<a href="#l30.212"></a><span id="l30.212" class="difflineplus">+}</span>
<a href="#l30.213"></a><span id="l30.213" class="difflineplus">+</span>
<a href="#l30.214"></a><span id="l30.214" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-up,</span>
<a href="#l30.215"></a><span id="l30.215" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-down-stack &gt; .scrollbutton-down {</span>
<a href="#l30.216"></a><span id="l30.216" class="difflineplus">+  -moz-image-region: rect(0, 11px, 17px, 0);</span>
<a href="#l30.217"></a><span id="l30.217" class="difflineplus">+  margin: 0;</span>
<a href="#l30.218"></a><span id="l30.218" class="difflineplus">+  padding: 0 1px;</span>
<a href="#l30.219"></a><span id="l30.219" class="difflineplus">+  border: none;</span>
<a href="#l30.220"></a><span id="l30.220" class="difflineplus">+}</span>
<a href="#l30.221"></a><span id="l30.221" class="difflineplus">+</span>
<a href="#l30.222"></a><span id="l30.222" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-up[chromedir=&quot;ltr&quot;],</span>
<a href="#l30.223"></a><span id="l30.223" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-down-stack &gt; .scrollbutton-down[chromedir=&quot;rtl&quot;] {</span>
<a href="#l30.224"></a><span id="l30.224" class="difflineplus">+  border-right: 2px solid;</span>
<a href="#l30.225"></a><span id="l30.225" class="difflineplus">+  -moz-border-right-colors: rgba(0,0,0,0.25) rgba(255,255,255,0.15);</span>
<a href="#l30.226"></a><span id="l30.226" class="difflineplus">+  list-style-image: url(&quot;chrome://instantbird/skin/tabbrowser/tab-arrow-left.png&quot;);</span>
<a href="#l30.227"></a><span id="l30.227" class="difflineplus">+}</span>
<a href="#l30.228"></a><span id="l30.228" class="difflineplus">+</span>
<a href="#l30.229"></a><span id="l30.229" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-down-stack &gt; .scrollbutton-down[chromedir=&quot;ltr&quot;],</span>
<a href="#l30.230"></a><span id="l30.230" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-up[chromedir=&quot;rtl&quot;] {</span>
<a href="#l30.231"></a><span id="l30.231" class="difflineplus">+  border-left: 2px solid;</span>
<a href="#l30.232"></a><span id="l30.232" class="difflineplus">+  -moz-border-left-colors: rgba(0,0,0,0.25) rgba(255,255,255,0.15);</span>
<a href="#l30.233"></a><span id="l30.233" class="difflineplus">+  list-style-image: url(&quot;chrome://instantbird/skin/tabbrowser/tab-arrow-right.png&quot;);</span>
<a href="#l30.234"></a><span id="l30.234" class="difflineplus">+}</span>
<a href="#l30.235"></a><span id="l30.235" class="difflineplus">+</span>
<a href="#l30.236"></a><span id="l30.236" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-up:hover,</span>
<a href="#l30.237"></a><span id="l30.237" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-down-stack &gt; .scrollbutton-down:hover {</span>
<a href="#l30.238"></a><span id="l30.238" class="difflineplus">+  -moz-image-region: rect(0, 22px, 17px, 11px);</span>
<a href="#l30.239"></a><span id="l30.239" class="difflineplus">+  background-color: rgba(0,0,0,0.10);</span>
<a href="#l30.240"></a><span id="l30.240" class="difflineplus">+}</span>
<a href="#l30.241"></a><span id="l30.241" class="difflineplus">+</span>
<a href="#l30.242"></a><span id="l30.242" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-up:hover:active,</span>
<a href="#l30.243"></a><span id="l30.243" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-down-stack &gt; .scrollbutton-down:hover:active {</span>
<a href="#l30.244"></a><span id="l30.244" class="difflineplus">+  -moz-image-region: rect(0, 44px, 17px, 33px);</span>
<a href="#l30.245"></a><span id="l30.245" class="difflineplus">+  background-color: rgba(0,0,0,0.20);</span>
<a href="#l30.246"></a><span id="l30.246" class="difflineplus">+}</span>
<a href="#l30.247"></a><span id="l30.247" class="difflineplus">+</span>
<a href="#l30.248"></a><span id="l30.248" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-up[disabled=&quot;true&quot;],</span>
<a href="#l30.249"></a><span id="l30.249" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-down-stack &gt; .scrollbutton-down[disabled=&quot;true&quot;] {</span>
<a href="#l30.250"></a><span id="l30.250" class="difflineplus">+  -moz-image-region: rect(0, 33px, 17px, 22px) !important;</span>
<a href="#l30.251"></a><span id="l30.251" class="difflineplus">+  background-color: transparent !important; </span>
<a href="#l30.252"></a><span id="l30.252" class="difflineplus">+}</span>
<a href="#l30.253"></a><span id="l30.253" class="difflineplus">+</span>
<a href="#l30.254"></a><span id="l30.254" class="difflineplus">+</span>
<a href="#l30.255"></a><span id="l30.255" class="difflineplus">+/**</span>
<a href="#l30.256"></a><span id="l30.256" class="difflineplus">+ * Tabstrip New Tab &amp; All Tabs Buttons</span>
<a href="#l30.257"></a><span id="l30.257" class="difflineplus">+ */</span>
<a href="#l30.258"></a><span id="l30.258" class="difflineplus">+.tabs-alltabs-box {</span>
<a href="#l30.259"></a><span id="l30.259" class="difflineplus">+  margin: 0;</span>
<a href="#l30.260"></a><span id="l30.260" class="difflineplus">+}</span>
<a href="#l30.261"></a><span id="l30.261" class="difflineplus">+</span>
<a href="#l30.262"></a><span id="l30.262" class="difflineplus">+.tabs-container &gt; .tabs-newtab-button,</span>
<a href="#l30.263"></a><span id="l30.263" class="difflineplus">+.tabs-alltabs-button {</span>
<a href="#l30.264"></a><span id="l30.264" class="difflineplus">+  -moz-border-start: 2px solid;</span>
<a href="#l30.265"></a><span id="l30.265" class="difflineplus">+  -moz-border-end: none;</span>
<a href="#l30.266"></a><span id="l30.266" class="difflineplus">+  -moz-border-left-colors: rgba(0,0,0,0.25) rgba(255,255,255,0.15);</span>
<a href="#l30.267"></a><span id="l30.267" class="difflineplus">+  -moz-border-right-colors: rgba(0,0,0,0.25) rgba(255,255,255,0.15);</span>
<a href="#l30.268"></a><span id="l30.268" class="difflineplus">+  margin: 0;</span>
<a href="#l30.269"></a><span id="l30.269" class="difflineplus">+  padding: 0;</span>
<a href="#l30.270"></a><span id="l30.270" class="difflineplus">+}</span>
<a href="#l30.271"></a><span id="l30.271" class="difflineplus">+.tabs-newtab-button &gt; .toolbarbutton-icon,</span>
<a href="#l30.272"></a><span id="l30.272" class="difflineplus">+.tabs-alltabs-button &gt; .toolbarbutton-icon {</span>
<a href="#l30.273"></a><span id="l30.273" class="difflineplus">+  padding: 0;</span>
<a href="#l30.274"></a><span id="l30.274" class="difflineplus">+}</span>
<a href="#l30.275"></a><span id="l30.275" class="difflineplus">+.tabs-newtab-button {</span>
<a href="#l30.276"></a><span id="l30.276" class="difflineplus">+  list-style-image: url(chrome://instantbird/skin/tabbrowser/newtab.png);</span>
<a href="#l30.277"></a><span id="l30.277" class="difflineplus">+  -moz-image-region: rect(0, 18px, 20px, 0);</span>
<a href="#l30.278"></a><span id="l30.278" class="difflineplus">+}</span>
<a href="#l30.279"></a><span id="l30.279" class="difflineplus">+.tabs-newtab-button:hover {</span>
<a href="#l30.280"></a><span id="l30.280" class="difflineplus">+  -moz-image-region: rect(0, 36px, 20px, 18px);</span>
<a href="#l30.281"></a><span id="l30.281" class="difflineplus">+}</span>
<a href="#l30.282"></a><span id="l30.282" class="difflineplus">+.tabs-newtab-button:hover:active {</span>
<a href="#l30.283"></a><span id="l30.283" class="difflineplus">+  -moz-image-region: rect(0, 54px, 20px, 36px);</span>
<a href="#l30.284"></a><span id="l30.284" class="difflineplus">+}</span>
<a href="#l30.285"></a><span id="l30.285" class="difflineplus">+.tabs-alltabs-button {</span>
<a href="#l30.286"></a><span id="l30.286" class="difflineplus">+  list-style-image: url(chrome://instantbird/skin/tabbrowser/alltabs-box-bkgnd-icon.png);</span>
<a href="#l30.287"></a><span id="l30.287" class="difflineplus">+  -moz-image-region: rect(0, 22px, 20px, 0);</span>
<a href="#l30.288"></a><span id="l30.288" class="difflineplus">+}</span>
<a href="#l30.289"></a><span id="l30.289" class="difflineplus">+.tabs-alltabs-button:hover {</span>
<a href="#l30.290"></a><span id="l30.290" class="difflineplus">+  -moz-image-region: rect(0, 44px, 20px, 22px);</span>
<a href="#l30.291"></a><span id="l30.291" class="difflineplus">+}</span>
<a href="#l30.292"></a><span id="l30.292" class="difflineplus">+.tabs-alltabs-button[open=&quot;true&quot;] {</span>
<a href="#l30.293"></a><span id="l30.293" class="difflineplus">+  -moz-image-region: rect(0, 66px, 20px, 44px);</span>
<a href="#l30.294"></a><span id="l30.294" class="difflineplus">+}</span>
<a href="#l30.295"></a><span id="l30.295" class="difflineplus">+.tabs-container &gt; .tabs-newtab-button:hover,</span>
<a href="#l30.296"></a><span id="l30.296" class="difflineplus">+.tabs-alltabs-button:hover {</span>
<a href="#l30.297"></a><span id="l30.297" class="difflineplus">+  background-color: rgba(0,0,0,0.10);</span>
<a href="#l30.298"></a><span id="l30.298" class="difflineplus">+}</span>
<a href="#l30.299"></a><span id="l30.299" class="difflineplus">+.tabs-container &gt; .tabs-newtab-button:hover:active,</span>
<a href="#l30.300"></a><span id="l30.300" class="difflineplus">+.tabs-alltabs-button[open=&quot;true&quot;],</span>
<a href="#l30.301"></a><span id="l30.301" class="difflineplus">+.tabs-alltabs-button:hover:active{</span>
<a href="#l30.302"></a><span id="l30.302" class="difflineplus">+  background-color: rgba(0,0,0,0.20);</span>
<a href="#l30.303"></a><span id="l30.303" class="difflineplus">+}</span>
<a href="#l30.304"></a><span id="l30.304" class="difflineplus">+</span>
<a href="#l30.305"></a><span id="l30.305" class="difflineplus">+.tabs-alltabs-button &gt; .toolbarbutton-menu-dropmarker,</span>
<a href="#l30.306"></a><span id="l30.306" class="difflineplus">+.tabs-alltabs-button &gt; .toolbarbutton-text {</span>
<a href="#l30.307"></a><span id="l30.307" class="difflineplus">+  display: none;</span>
<a href="#l30.308"></a><span id="l30.308" class="difflineplus">+}</span>
<a href="#l30.309"></a><span id="l30.309" class="difflineplus">+</span>
<a href="#l30.310"></a><span id="l30.310" class="difflineplus">+.tabs-alltabs-button &gt; .toolbarbutton-icon {</span>
<a href="#l30.311"></a><span id="l30.311" class="difflineplus">+  -moz-margin-end: 2px;</span>
<a href="#l30.312"></a><span id="l30.312" class="difflineplus">+}</span>
<a href="#l30.313"></a><span id="l30.313" class="difflineplus">+</span>
<a href="#l30.314"></a><span id="l30.314" class="difflineplus">+.tabs-alltabs-box-animate {</span>
<a href="#l30.315"></a><span id="l30.315" class="difflineplus">+  margin: 1px 0px 0px 0px;</span>
<a href="#l30.316"></a><span id="l30.316" class="difflineplus">+  width: 25px;</span>
<a href="#l30.317"></a><span id="l30.317" class="difflineplus">+  background-image: url(&quot;chrome://instantbird/skin/tabbrowser/alltabs-box-overflow-bkgnd-animate.png&quot;);</span>
<a href="#l30.318"></a><span id="l30.318" class="difflineplus">+  background-repeat: no-repeat;</span>
<a href="#l30.319"></a><span id="l30.319" class="difflineplus">+  opacity: 0.0;</span>
<a href="#l30.320"></a><span id="l30.320" class="difflineplus">+}</span>
<a href="#l30.321"></a><span id="l30.321" class="difflineplus">+</span>
<a href="#l30.322"></a><span id="l30.322" class="difflineplus">+/**</span>
<a href="#l30.323"></a><span id="l30.323" class="difflineplus">+ * All Tabs Menupopup </span>
<a href="#l30.324"></a><span id="l30.324" class="difflineplus">+ */</span>
<a href="#l30.325"></a><span id="l30.325" class="difflineplus">+</span>
<a href="#l30.326"></a><span id="l30.326" class="difflineplus">+.alltabs-item &gt; .menu-iconic-left &gt; .menu-iconic-icon {</span>
<a href="#l30.327"></a><span id="l30.327" class="difflineplus">+  list-style-image: url(&quot;chrome://global/skin/tree/item.png&quot;);</span>
<a href="#l30.328"></a><span id="l30.328" class="difflineplus">+}</span>
<a href="#l30.329"></a><span id="l30.329" class="difflineplus">+</span>
<a href="#l30.330"></a><span id="l30.330" class="difflineplus">+.alltabs-item[selected=&quot;true&quot;] {</span>
<a href="#l30.331"></a><span id="l30.331" class="difflineplus">+  font-weight: bold;</span>
<a href="#l30.332"></a><span id="l30.332" class="difflineplus">+}</span>
<a href="#l30.333"></a><span id="l30.333" class="difflineplus">+</span>
<a href="#l30.334"></a><span id="l30.334" class="difflineplus">+.tabs-closebutton {</span>
<a href="#l30.335"></a><span id="l30.335" class="difflineplus">+  padding-right: 4px;</span>
<a href="#l30.336"></a><span id="l30.336" class="difflineplus">+  list-style-image: url(&quot;chrome://global/skin/icons/closetab.png&quot;) !important;</span>
<a href="#l30.337"></a><span id="l30.337" class="difflineplus">+  list-style-image: none;</span>
<a href="#l30.338"></a><span id="l30.338" class="difflineplus">+  border: none;</span>
<a href="#l30.339"></a><span id="l30.339" class="difflineplus">+  -moz-box-align: stretch;</span>
<a href="#l30.340"></a><span id="l30.340" class="difflineplus">+}</span>
<a href="#l30.341"></a><span id="l30.341" class="difflineplus">+</span>
<a href="#l30.342"></a><span id="l30.342" class="difflineplus">+.tabs-closebutton:hover &gt; .toolbarbutton-icon {</span>
<a href="#l30.343"></a><span id="l30.343" class="difflineplus">+	background-image: none !important;</span>
<a href="#l30.344"></a><span id="l30.344" class="difflineplus">+}</span>
<a href="#l30.345"></a><span id="l30.345" class="difflineplus">+</span>
<a href="#l30.346"></a><span id="l30.346" class="difflineplus">+.tabs-closebutton:hover:active {</span>
<a href="#l30.347"></a><span id="l30.347" class="difflineplus">+	list-style-image: url(&quot;chrome://global/skin/icons/closetab-active.png&quot;) !important;</span>
<a href="#l30.348"></a><span id="l30.348" class="difflineplus">+}</span>
<a href="#l30.349"></a><span id="l30.349" class="difflineplus">+</span>
<a href="#l30.350"></a><span id="l30.350" class="difflineplus">+tabpanels.plain {</span>
<a href="#l30.351"></a><span id="l30.351" class="difflineplus">+	background-color: #fff !important;</span>
<a href="#l30.352"></a><span id="l30.352" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1">new file mode 100644</span>
<a href="#l31.2"></a><span id="l31.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..e5013d2fe256141a1bb1cfb9cc6a066eda8452cb</span>
<a href="#l31.3"></a><span id="l31.3">GIT binary patch
literal 453
zc%17D@N?(olHy`uVBq!ia0vp^f&lt;Wxe!3HF!Rpev?DaPU;cPEB*=VV?2Ic!PZ?k)`f
zL2$v|&lt;&amp;%LToCO|{#S9E`2SJ$eaArs_P&gt;{XE)7O&gt;#CL244gwiIdMbSW0Ts&gt;VJLn02p
zonq*B)Ih-He$QWhr^8cs9C)rKBiuP{lHQ~48A-Y7qMMYx@+WIdnqQutw)pz*znxLH
zw-qimI&amp;k~+=jz`HzolG+;^)gB`F+$c$js&lt;X^}}&gt;_Zh?vkGjapH7BaXpPH5px5@&gt;pq
z5-78&amp;)#a}Z$HbOLRUwR5^4O#m)!XHa92(gcv1D*e3MzS2wfWGZYZpIQnB6!#aoKSL
zWrYZh&amp;S{eILSZH0yN*in$4wJbSse4Yt}M+WCuqmyM|0Lbw!G!JFEu4`cbkseM;||~
zi4&amp;(&gt;RiEHGOZs?d#4j=S45x_jYX0uk8`6|ET7I8&gt;`&amp;apC_rqb|gbuZFOyocRkL$q=
z$qvI=c5-~tu{&amp;0+k=&gt;b@-1}7JzTf_)!&amp;5cO&lt;@(&gt;hJF(F@RM&gt;EN=cSvsF7xqD`Pm*d
ffi)5x*}oFMZXusPH(xFT7{&amp;~qu6{1-oD!M&lt;RN1v|</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1">new file mode 100644</span>
<a href="#l32.2"></a><span id="l32.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..9ef420ed047463975ef7a091af1791250039e803</span>
<a href="#l32.3"></a><span id="l32.3">GIT binary patch
literal 499
zc%17D@N?(olHy`uVBq!ia0vp^f&lt;Wxe!3HF!Rpev?DaPU;cPEB*=VV?2Ic!PZ?k)`f
zL2$v|&lt;&amp;%LToCO|{#S9E`2SJ$eaArs_P&gt;{XE)7O&gt;#CL244Brn5-b&lt;QADJY5_^A`ZWu
zVz^Gkk;f%I^tbnH!AVLM*PkohX)G?_KIiD-&lt;KS&gt;=`YsL|&lt;9g*Q-5k4@MpnArx}Lf_
zr?#f9?!5h++i%N`{`&amp;c~SdR6K&lt;@z6&amp;r{~MRy59eufAxvNx3jmuXVBPEQO(pSx#57=
z;yVJ&gt;y-Epw1x^d*vqVp67n{1J$&gt;ofs(ywNhjjL3YIJrFBa}+x-CHXo{=v#EIFIB?q
z=mSPo_iPo86G=Uem7$%xX6;&lt;XRkl1#E-r5)v$50iz;m;HG?t_}oSZtVL?f{$b+*=9
z-b?!uB{Bong}VJd%#kMT$L2ld&amp;C!xy%YCQ&amp;9bYuBOKR!YmE9M3I`vdv-i%DoV0yNy
zlVzHw?zwX}d$WHr@P1{;3hWeI5o~$AiDhxt-5kq*Q)iyuSF~SW`(%x-%ICb33`&gt;tb
z+-SwC%s0KE&lt;;X6fce{$?w4JYB{#Es6=Ihjw{ep3Eb?cW;-lL})d+_GY{{?0#&amp;gkfg
b{&amp;Rk}pUc?T&lt;dl~JV}!xe)z4*}Q$iB}9=Fa~</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1">new file mode 100644</span>
<a href="#l33.2"></a><span id="l33.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..7f5f55ef2b3ccc210bc66fec70c61405024819c0</span>
<a href="#l33.3"></a><span id="l33.3">GIT binary patch
literal 509
zc$@+K0RsMsP)&lt;h;3K|Lk000e1NJLTq000^Q000XJ1^@s6VZfd60000PbVXQnQ*UN;
zcVTj606}DLVr3vnZDD6+Qe|Oed2z{QJOBUzpGibPRCwB?Q%y?(Q53y8+Vm_aF(#;p
z5)4WVS`{sFCA0`y=&amp;p6U7WD^;wypXhxog+T7J)4@3zCeAghnT=h2xC#(R;&amp;vG!81H
z7Y_Hn`8bDr?|A{+w&amp;A~VcI6~Lg%2~Yc`#B7;nV&gt;bEPRLnVuV6KK}K#;=oALRH;j-U
zMMfzIh3FE}ux|0L1{LC?3!&gt;0CMF_iM-86AzCU#_Y2&amp;L2M8A8ZMI2;B+5WqA|sMqVD
zs_JYuo2_)~=%HMizbil9h!azEK0&amp;aJHfY~9SdA`ku0&amp;%czP}D3N~RPFg-kA&amp;yO1Oa
zWLbt}GMPyv5{joAn`3t)rXOt2&lt;xj6)*F%#LXf_l$*;~uMH;7)6|Gx8k2sBE1nM$QH
z)oK-3W@ntaH=LzYGWoeij*hn$Zd=M5u*}ZvIgZY9M$p6FVzF4&lt;iO1tzMX0^G&lt;3uz&lt;
zXfXoQOOks2B$LAz1wL_4D*kWuGK1Dj#M4n5_hnIXeM}_#G=HJBb$su1)X#POMEHd?
zFf&amp;r&amp;z5+ikw^{B&gt;JB+&gt;Ex8H}NUbFBTegzl+yP~i4FIHUT00000NkvXXu0mjf#iQ8)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1">new file mode 100644</span>
<a href="#l34.2"></a><span id="l34.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..f99e5001654156487561e9a4c8b5eaefb138b0f7</span>
<a href="#l34.3"></a><span id="l34.3">GIT binary patch
literal 687
zc$@*R0#N;lP)&lt;h;3K|Lk000e1NJLTq001Na000sQ1^@s6Gb4N`0000PbVXQnQ*UN;
zcVTj606}DLVr3vnZDD6+Qe|Oed2z{QJOBU!QAtEWRCwCFR?lk_Q4pS&amp;&gt;?SckT9=yS
zP)!0sv`7Ly6huMlJ-6OGn1hHHZyr4P2PpUlh&lt;JzxZ{Bi~QW5mhLm`*eTNJ&amp;dnk_AD
zlk98OH`|%=NH^|Ux;_}@@iN)&gt;@y$0gPq?lN=doUVICUf@{N!&gt;cytfR9W{C-lX}}P`
znEWYFQ2_!1!4@YE1m=i5?;~S~S%}lOO)^8fOOiQcpn-CY2+|az%Tt;ql_e-{q-&gt;~c
zpcyk4%uuu0^zz$kwM0lzF=7RQ&lt;dkKUrC+{&amp;`WXYBJbZpzxdUbU8apSN3ItTE)y~2Y
z141w}2rRR3ljAIn2!|MR2$To}R4f+%RmiL#OjDXznl&lt;y6Ic8SV(jmphS&gt;(d64`G@t
z%Ys6o0QGv^JL_~h(ChWUwr$_^sXoNaBnZTuN&gt;j(Um&lt;RLHJY*Jbd2#!jU%&gt;hG6Xeb|
zrVl^&lt;TiG5n&lt;;zg1RDw#S0@-X9a=Dy$R;^Y&amp;wz}PJXu6W~S0Pop4zctM#52dlq{=rS
zk-q|i?_2(PpVFz9dDCvU*U&amp;c_jl0_KAEz+HrH&lt;OMRu&lt;vS;Rwv31oQr&lt;Z;KfB_D*&gt;t
zX@GMf0nYmkc%Y7K5;*EePSeoIh5deiDhQv&amp;jSlrOR2M#GQOliP8v|CqmY-3IcB%ZO
zR%yXykGcuDTx~2k)L*!?&lt;!JlI@$TA^t(E;it1$2XBE)cA4#SX2*&lt;Tyuy(M^saqrgQ
zkxyfk3`(5yv_H$}kWq~eeQF&lt;RnsP!6*Z(r@$C{?b0nd-f-$VL4M{os&amp;d7%9fU;x8k
V)gK`$ik$!e002ovPDHLkV1feNI~f1~</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1">new file mode 100644</span>
<a href="#l35.2"></a><span id="l35.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..6030278c3057b76a0496dec96d36fddd32c223a8</span>
<a href="#l35.3"></a><span id="l35.3">GIT binary patch
literal 188
zc%17D@N?(olHy`uVBq!ia0vp^j6m$o!3HEZUVGaNq*&amp;4&amp;eI0?kzM9{GlYxBB0*}aI
z1_rr&lt;Ak26;Gb9)&amp;80YEY7$R}`?#Ye3%!(o`7ZVkKyYBdZC3m8t#pyZyr3FF@xeGp-
zT)I$Qucf4O+gWp|^8tZ^oMX?HUYiw~z4cnu@`m7T&gt;vuQw7o97&lt;9z98KYS1#Jq@&gt;@4
g_va@_GuEFFKbdXXV*A_iKhP!yPgg&amp;ebxsLQ0DC7z0ssI2</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1">new file mode 100644</span>
<a href="#l36.2"></a><span id="l36.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..c93d1fc3aa5159d43f5f68c7c8281d6681602eda</span>
<a href="#l36.3"></a><span id="l36.3">GIT binary patch
literal 776
zc$@(U1NZ!iP)&lt;h;3K|Lk000e1NJLTq001oj000pP1^@s6Nuni800001b5ch_0Itp)
z=&gt;Px#24YJ`L;wH)0002_L%V+f000SaNLh0L01FcU01FcV0GgZ_00007bV*G`2iXN4
z4GRnXJ===_00M|fL_t(Y$IX_%YZGA@$3Jh9OWLMCgetbAbZDX}+O)Ra1ffN7&gt;(mPl
z{s9GDbrXkf4lY^;#m&amp;JXgF?YUs)#~S3PlqvL2W_XYllS9wzkb(%&lt;J-AIn#2v%VG|`
z9K1Z=dp~!4?|EK9gIu?sO9501KsxRckf8&lt;v4giM&lt;prZ6g-Tyzd1309l0YN1Rl&amp;d5I
zULHI#G0{&gt;ll$*B-xCw{?Z9oUmVXS{SuGX5=%LD*X6MAxTG8v6Vf7b)-=5=H^2!w%V
z1$+ePTv(hNe*E-K7H9`rR80sFuJO=yJsFS3^N~ozH?T*q6S_qKw&amp;#}SPrfxi-EWQ$
zqt+x~0j4XouItG}B9R{*9i&gt;&lt;-`UdvsJplbN|L*jw&lt;qtD$gX35~HUL_I60qYM59g+_
zSPV_m&gt;H@Ceb;d&amp;jBDtmc6E8n6&amp;a@4V5$^6oXkk&gt;I?Pweht?PQStE($NG&amp;Dpk79$)E
z`vUgqwZQ`mi*tQ1vacURPn}i3`&gt;_hzuy*f00G-KXR;Q+&gt;(v?cZcaH1uO1lSNx_Dvh
z(X}h@k+QmGzdzf9&lt;^Z%1VrO7rV0L6=B)zt_hH09fp?!L#1G&gt;CYWcAz6_M3Od64}zm
zGSVv9b$jXuEV~XDAw)?^ISZt7xm?DwEI;6Wyi$Eh6WA?mV?gVTd*^zmufAD6BP|nP
z8`xFdqvASTgb=0v{{GoiDwQr23ch0E!)rs^-C?t^&amp;DZr`t=Aup_b!;&lt;4S-DrZK_%+
zYKBhAh+!D#dwP1F`OSDOuNp8x)fplVX^CTWrn&gt;iTKgl*-Rxf4C5*{}X2_ee$OvPH&gt;
zDsZO)eMf0tDYB*VY^g6@7Bs-+0QYjrt26|(hx7D5XX?Mk1u53hw5&amp;z|0000&lt;MNUMn
GLSTY4^-C)N</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1">new file mode 100644</span>
<a href="#l37.2"></a><span id="l37.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..86db7ae18a081bed201c6c9505593c11807ab038</span>
<a href="#l37.3"></a><span id="l37.3">GIT binary patch
literal 786
zc$@(e1MU2YP)&lt;h;3K|Lk000e1NJLTq001oj000pP1^@s6Nuni800001b5ch_0Itp)
z=&gt;Px#24YJ`L;wH)0002_L%V+f000SaNLh0L01FcU01FcV0GgZ_00007bV*G`2iXN4
z4H5|dG$Sbh00NRpL_t(Y$IX_{OH@%5$3NG3?&gt;Ra%78T|2z+jq8${+b-6$H9*5x5BT
zZxGs6xQX_&amp;?Z={M7g5Wg-JlUIq!7fEL`sG7jV?yXY)a?NkK5)xxea5@osC^MT)5|c
z;dAdj_nad*qLE5V0qBM{OWh`ih19hT9PJQ_!2%qhQJDkSYCV)n%ZC32S^yyh=Kx`#
z8HlL4Nv&amp;HzgAQI5dSqmzxn2?jZE(xB0*+)hR?Yy&amp;l*QBm!j&lt;4vp(ByV&amp;(YD*3-v%7
zXoVIQ%|OfZm-iNC=camrlfZEW9^7~c5UI2jRiWG4+es#q%VT3&gt;#^46pAUqDBo6hy}
zF7xTd;?m4z-~`a3d&lt;W2n-gG=3XJBBUE^q^FWq3rL(`Siw5AkO8!=sPO?=Kla+qRAC
zy7c$=8-p8YD&gt;Fw}*bYuSL9Ba_*PrJeEH2HQSJ}kYpv9rt!*Lv3*QKYYht}3sBX9$)
z(BMM=!fwQgCx~3U!t}!1$Fp-&amp;3FSY?=hnXf%H=W&gt;6BFZ|ot^7K2&amp;4F}K^qj1GEn-{
zBYAr3#{9SamLF?dl++&amp;iS7_h&amp;@jQ&gt;dzP|B}j*eGCh&lt;vTEHEILcBH#o20J4xLzq!i&amp;
z!Q{f%o#@?cj&amp;-#sfR&lt;ImqfjW|c^+L|UB&lt;u$+5ox$&gt;;XAh@X2qk^6+Zgytfm*lg*J)
zK3~0rJoF=Gv)Q_U4Yg8%_zG;--_G!4sBL!Rd-QfT#}{B1_yy#3=&amp;FI{dEPbGb*D{%
zO|+@B3`%&amp;=Z!})--hZ~Z8NRuaWm~;KUb7-lnj99g`tOj^5&lt;(Q~sfe{|RY|tA{=-U~
zBDS{0o)+u6m4a@s&gt;PM^&gt;*ib9ACzn8RZ3{n0JQY^b+f$399Z~}mwf57$0db5aS`{iH
Q-v9sr07*qoM6N&lt;$f{G7pmH+?%</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1">new file mode 100644</span>
<a href="#l38.2"></a><span id="l38.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..34cbf61ea3bb201906d43f8e2ffb526b492177d3</span>
<a href="#l38.3"></a><span id="l38.3">GIT binary patch
literal 189
zc%17D@N?(olHy`uVBq!ia0vp^j6m$o!3HEZUVGaNq*&amp;4&amp;eI0?kzM9{GlYxBB0*}aI
z1_rr&lt;Ak26;Gb9)&amp;81L!g7$R}`?(vO+%!)iN7gJA$&amp;aPfA(AMFoy@Xrlr&amp;qzJXZ1aX
zc2i0u1l!-$NeC`dS-!iw`n|K~^laUtb2lSHPp;BpI$^HzetT5*$$P(-&amp;Qv|?!xFIn
hNp@hULPPyi#tWS;ZJm~VTYy$Ec)I$ztaD0e0stqFLofgU</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1">new file mode 100644</span>
<a href="#l39.2"></a><span id="l39.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..75d2fba75b7ac71fd3b6cd12ed342a302681ed8c</span>
<a href="#l39.3"></a><span id="l39.3">GIT binary patch
literal 892
zc%17D@N?(olHy`uVBq!ia0vp^j6m$o!3HEZUVGaNq&amp;O0jLwtZV3rLdtRG1r(mP&amp;(&amp;
zF~Br1z&lt;?3+3r5D{N8_Y`?3tb}jv*3L?;hO9)fB+cc2QqRNhzyKfuo5-NvVC?v}Mbd
z9cznwf9QRc;2l&gt;Py%!1^9E&amp;&gt;6C%(UExh41a()YjlW3TVcob}8#_PYP7RaF7gp3YsQ
zk@uwX-9(j&gt;qS&lt;TPRro!{Ywp`8_gE(OSSr12SYkV=%;Q$l+Pea64`-S9hFd(J&lt;`TF?
z;q)fULYea%O$lAac}+_U4;%FSNVZQ&amp;@&amp;3MWW57=&amp;uP|cwO3bz`=YZ^`X(^5&amp;K$;2a
z9S4SnhxSbhO$t#`Qccq`1e!RcdbVxbwhV|Duz#`fo5LC#;}R&amp;t_w)+;j(dyWJ7@n*
zm1yIyy}$qEu6M15&amp;pHjCIo{q@K5N;|g&lt;JOpg--RJq#`~gNYAOmc;EZ^A8g)t2s~&lt;-
za&gt;&gt;zar#eTItk+82M2WnPMH#-+QngQQikbBMXOoHV^DCvci#5753uXK_T&lt;hC-tq&lt;s}
zrxKwbHcL&lt;BM)DRjc5iJ|NLL54mqWe90`k_v?n4O@2Oi2dISTMJB^XNTMd-x{c1Q5c
z&gt;Uoy!_Im5-^8Yu#_3&lt;A|$jwPi&amp;B&lt;xr`~J}L{|`S0T&gt;onS*y7*9Rr_b$&lt;WKu{&lt;c!&gt;k
zSLUm#(k0rYYwyRO{QRe@_+3-SoX$lrTqN4uU7k1yuvE_}j_)|3UMTb4W73mm6W{G3
zt{WG=-esD5dtJt?G|$jb?o*rQOisPY^Zu{M`@b#b-&lt;bZri+-9Y7;_TIW2`vh&gt;y&gt;CM
zklhFM7#rAQ&gt;zWuO8ZPD=OYpEYA51Ww`7X_P29KC|x9i$(x6h{SzPau_)9=QOhDwc2
zY4hJdv@D7J?pS;I`(N&amp;_oxdFRF1{D=KXCmD@mt$$CqMt$*&lt;mp$^=4zojmat}`yftN
zRJt}Lb?2g0tL$Ixio0ZTmZ`MQ%6aZ0zkuT_l&amp;&gt;hhYLNfNx{Ntt$HRSJUx1wH&gt;FVdQ
I&amp;MBb@07dC#^8f$&lt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1">new file mode 100644</span>
<a href="#l40.2"></a><span id="l40.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..d32b79cfab76093c36c45e7b643ad9429925b3f4</span>
<a href="#l40.3"></a><span id="l40.3">GIT binary patch
literal 294
zc%17D@N?(olHy`uVBq!ia0vp^+#t-s3?%0jwTl2L$r9IylHmNblJdl&amp;R0hYC{G?O`
z&amp;)mfH)S%SFl*+=BsWw1Gu&gt;n3IuK)l4XV6;AptF?0avh`hE(W6&amp;433)^J$Eqr&gt;|zYq
z%NT#0G5I88`WZIgU7RjkxH3&lt;3=bq#B+bI;jPb}fEOzvs&lt;;&amp;aM1msK;5Y37|YE&lt;WYd
zchjxuV#K8Dsf!&lt;U?R&gt;Fd`QMvBi&amp;#s7{DK+kf#6vCgeIVXpQnps2!|}|!FI+&amp;20RP~
zGv^+=uz@M|PraJZo@=SQ7_Z$ovu8MM_FX$+R&lt;$+rzP+i9hyQ-gn|b)D#GCoaY1f1{
mXq#qpDx3;nQt)GRXs}nXVvfGr#IqG&gt;GJ~h9pUXO@geCx0muqPN</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1">new file mode 100644</span>
<a href="#l41.2"></a><span id="l41.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..eb8e901d032983bf821f718c4e1eb5718e5b3b80</span>
<a href="#l41.3"></a><span id="l41.3">GIT binary patch
literal 176
zc%17D@N?(olHy`uVBq!ia0vp^j6m$o!3HEZUVGaNq}WS5eO=kFadL=g8lGFwT?iE7
zEbxddW?+yz2*QkqGed%bf-LEdzK%d${oH&gt;NS%G|ePZ!6Kid)GE2?+toOhW%39Ep#K
zG2t}$DDStRP&gt;@BrBcVz7%nBCa7*6JsN9y&lt;J{PFrHtl2$T;TkK?nTQyEhIU!C87oE8
R=L3ym@O1TaS?83{1OQgqGRyz~</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1">new file mode 100644</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineminus">--- /dev/null</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineplus">+++ b/im/themes/winstripe/instantbird/tabbrowser-winstripe/tabbrowser.css</span>
<a href="#l42.4"></a><span id="l42.4" class="difflineat">@@ -0,0 +1,361 @@</span>
<a href="#l42.5"></a><span id="l42.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l42.6"></a><span id="l42.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l42.7"></a><span id="l42.7" class="difflineplus">+ *</span>
<a href="#l42.8"></a><span id="l42.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l42.9"></a><span id="l42.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l42.10"></a><span id="l42.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l42.11"></a><span id="l42.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l42.12"></a><span id="l42.12" class="difflineplus">+ *</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l42.14"></a><span id="l42.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l42.15"></a><span id="l42.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l42.16"></a><span id="l42.16" class="difflineplus">+ * License.</span>
<a href="#l42.17"></a><span id="l42.17" class="difflineplus">+ *</span>
<a href="#l42.18"></a><span id="l42.18" class="difflineplus">+ * The Original Code is mozilla.org code.</span>
<a href="#l42.19"></a><span id="l42.19" class="difflineplus">+ *</span>
<a href="#l42.20"></a><span id="l42.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l42.21"></a><span id="l42.21" class="difflineplus">+ * Netscape Communications Corporation.</span>
<a href="#l42.22"></a><span id="l42.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l42.23"></a><span id="l42.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l42.24"></a><span id="l42.24" class="difflineplus">+ *</span>
<a href="#l42.25"></a><span id="l42.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l42.26"></a><span id="l42.26" class="difflineplus">+ *   Joe Hewitt (hewitt@netscape.com)</span>
<a href="#l42.27"></a><span id="l42.27" class="difflineplus">+ *   Jason Kersey (kerz@netscape.com)</span>
<a href="#l42.28"></a><span id="l42.28" class="difflineplus">+ *   Pierre Chanial (chanial@noos.fr)</span>
<a href="#l42.29"></a><span id="l42.29" class="difflineplus">+ *   Dean Tessman (dean_tessman@hotmail.com)</span>
<a href="#l42.30"></a><span id="l42.30" class="difflineplus">+ *   Blake Ross (blake@cs.stanford.edu)</span>
<a href="#l42.31"></a><span id="l42.31" class="difflineplus">+ *   Pamela Greene (pamg.bugs@gmail.com)</span>
<a href="#l42.32"></a><span id="l42.32" class="difflineplus">+ *   Do Gottwald (dao@mozilla.com)</span>
<a href="#l42.33"></a><span id="l42.33" class="difflineplus">+ *   Florian Quze (florian@instantbird.org)</span>
<a href="#l42.34"></a><span id="l42.34" class="difflineplus">+ *</span>
<a href="#l42.35"></a><span id="l42.35" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l42.36"></a><span id="l42.36" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l42.37"></a><span id="l42.37" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l42.38"></a><span id="l42.38" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l42.39"></a><span id="l42.39" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l42.40"></a><span id="l42.40" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l42.41"></a><span id="l42.41" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l42.42"></a><span id="l42.42" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l42.43"></a><span id="l42.43" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l42.44"></a><span id="l42.44" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l42.45"></a><span id="l42.45" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l42.46"></a><span id="l42.46" class="difflineplus">+ *</span>
<a href="#l42.47"></a><span id="l42.47" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l42.48"></a><span id="l42.48" class="difflineplus">+</span>
<a href="#l42.49"></a><span id="l42.49" class="difflineplus">+/* Tabstrip */</span>
<a href="#l42.50"></a><span id="l42.50" class="difflineplus">+.tabbrowser-tabs {</span>
<a href="#l42.51"></a><span id="l42.51" class="difflineplus">+  -moz-appearance: -moz-win-browsertabbar-toolbox;</span>
<a href="#l42.52"></a><span id="l42.52" class="difflineplus">+  background: -moz-dialog url(&quot;chrome://instantbird/skin/tabbrowser/tabbrowser-tabs-bkgnd.png&quot;) repeat-x;</span>
<a href="#l42.53"></a><span id="l42.53" class="difflineplus">+}</span>
<a href="#l42.54"></a><span id="l42.54" class="difflineplus">+</span>
<a href="#l42.55"></a><span id="l42.55" class="difflineplus">+.tabs-container:not([overflow=&quot;true&quot;]) {</span>
<a href="#l42.56"></a><span id="l42.56" class="difflineplus">+  -moz-padding-start: 3px;</span>
<a href="#l42.57"></a><span id="l42.57" class="difflineplus">+}</span>
<a href="#l42.58"></a><span id="l42.58" class="difflineplus">+</span>
<a href="#l42.59"></a><span id="l42.59" class="difflineplus">+/* Tabs */</span>
<a href="#l42.60"></a><span id="l42.60" class="difflineplus">+.tabbrowser-tab {</span>
<a href="#l42.61"></a><span id="l42.61" class="difflineplus">+  -moz-appearance: none;</span>
<a href="#l42.62"></a><span id="l42.62" class="difflineplus">+  background: url(&quot;chrome://instantbird/skin/tabbrowser/tab-bkgnd.png&quot;) repeat-x;</span>
<a href="#l42.63"></a><span id="l42.63" class="difflineplus">+  margin: 3px 0px 4px;</span>
<a href="#l42.64"></a><span id="l42.64" class="difflineplus">+  padding: 0px 1px 1px 0px;</span>
<a href="#l42.65"></a><span id="l42.65" class="difflineplus">+  border: 2px solid;</span>
<a href="#l42.66"></a><span id="l42.66" class="difflineplus">+  border-right-width: 1px;</span>
<a href="#l42.67"></a><span id="l42.67" class="difflineplus">+  border-bottom: none;</span>
<a href="#l42.68"></a><span id="l42.68" class="difflineplus">+  -moz-border-radius-topleft: 2px;</span>
<a href="#l42.69"></a><span id="l42.69" class="difflineplus">+  -moz-border-radius-topright: 2px;</span>
<a href="#l42.70"></a><span id="l42.70" class="difflineplus">+  -moz-border-top-colors: ThreeDShadow rgba(255,255,255,.3);</span>
<a href="#l42.71"></a><span id="l42.71" class="difflineplus">+  -moz-border-right-colors: rgba(0,0,0,.1);</span>
<a href="#l42.72"></a><span id="l42.72" class="difflineplus">+  -moz-border-left-colors: ThreeDShadow rgba(255,255,255,.3);</span>
<a href="#l42.73"></a><span id="l42.73" class="difflineplus">+}</span>
<a href="#l42.74"></a><span id="l42.74" class="difflineplus">+</span>
<a href="#l42.75"></a><span id="l42.75" class="difflineplus">+.tabbrowser-tab:hover,</span>
<a href="#l42.76"></a><span id="l42.76" class="difflineplus">+.tabbrowser-tab[selected=&quot;true&quot;] {</span>
<a href="#l42.77"></a><span id="l42.77" class="difflineplus">+  border-width: 1px;</span>
<a href="#l42.78"></a><span id="l42.78" class="difflineplus">+  -moz-border-radius-topleft: 4px;</span>
<a href="#l42.79"></a><span id="l42.79" class="difflineplus">+  -moz-border-radius-topright: 4px;</span>
<a href="#l42.80"></a><span id="l42.80" class="difflineplus">+  -moz-border-top-colors: ThreeDShadow;</span>
<a href="#l42.81"></a><span id="l42.81" class="difflineplus">+  -moz-border-right-colors: ThreeDShadow;</span>
<a href="#l42.82"></a><span id="l42.82" class="difflineplus">+  -moz-border-left-colors: ThreeDShadow;</span>
<a href="#l42.83"></a><span id="l42.83" class="difflineplus">+}</span>
<a href="#l42.84"></a><span id="l42.84" class="difflineplus">+</span>
<a href="#l42.85"></a><span id="l42.85" class="difflineplus">+.tabbrowser-tab:not([selected=&quot;true&quot;]):hover {</span>
<a href="#l42.86"></a><span id="l42.86" class="difflineplus">+  margin: 2px 0px 4px;</span>
<a href="#l42.87"></a><span id="l42.87" class="difflineplus">+  padding: 2px 1px 1px;</span>
<a href="#l42.88"></a><span id="l42.88" class="difflineplus">+  background-image: url(&quot;chrome://instantbird/skin/tabbrowser/tab-hover-bkgnd.png&quot;);</span>
<a href="#l42.89"></a><span id="l42.89" class="difflineplus">+}</span>
<a href="#l42.90"></a><span id="l42.90" class="difflineplus">+</span>
<a href="#l42.91"></a><span id="l42.91" class="difflineplus">+.tabbrowser-tab[selected=&quot;true&quot;] {</span>
<a href="#l42.92"></a><span id="l42.92" class="difflineplus">+  margin: 2px 0px 3px;</span>
<a href="#l42.93"></a><span id="l42.93" class="difflineplus">+  padding: 1px;</span>
<a href="#l42.94"></a><span id="l42.94" class="difflineplus">+  background-image: url(&quot;chrome://instantbird/skin/tabbrowser/tab-active-bkgnd.png&quot;);</span>
<a href="#l42.95"></a><span id="l42.95" class="difflineplus">+  background-color: -moz-dialog;</span>
<a href="#l42.96"></a><span id="l42.96" class="difflineplus">+  font-weight: bold;</span>
<a href="#l42.97"></a><span id="l42.97" class="difflineplus">+}</span>
<a href="#l42.98"></a><span id="l42.98" class="difflineplus">+</span>
<a href="#l42.99"></a><span id="l42.99" class="difflineplus">+.tab-icon-image {</span>
<a href="#l42.100"></a><span id="l42.100" class="difflineplus">+  margin-top: 1px;</span>
<a href="#l42.101"></a><span id="l42.101" class="difflineplus">+  -moz-margin-start: 7px;</span>
<a href="#l42.102"></a><span id="l42.102" class="difflineplus">+  -moz-margin-end: 3px;</span>
<a href="#l42.103"></a><span id="l42.103" class="difflineplus">+  width: 16px;</span>
<a href="#l42.104"></a><span id="l42.104" class="difflineplus">+  height: 16px;</span>
<a href="#l42.105"></a><span id="l42.105" class="difflineplus">+  -moz-image-region: rect(0px, 16px, 16px, 0px);</span>
<a href="#l42.106"></a><span id="l42.106" class="difflineplus">+}</span>
<a href="#l42.107"></a><span id="l42.107" class="difflineplus">+</span>
<a href="#l42.108"></a><span id="l42.108" class="difflineplus">+.tabs-bottom {</span>
<a href="#l42.109"></a><span id="l42.109" class="difflineplus">+  height: 4px;</span>
<a href="#l42.110"></a><span id="l42.110" class="difflineplus">+  margin: 0px;</span>
<a href="#l42.111"></a><span id="l42.111" class="difflineplus">+  background: -moz-dialog url(&quot;chrome://instantbird/skin/tabbrowser/tabstrip-bottom.png&quot;) repeat;</span>
<a href="#l42.112"></a><span id="l42.112" class="difflineplus">+  border-top: 1px solid threedshadow;</span>
<a href="#l42.113"></a><span id="l42.113" class="difflineplus">+  border-bottom: 1px solid threedshadow;</span>
<a href="#l42.114"></a><span id="l42.114" class="difflineplus">+}</span>
<a href="#l42.115"></a><span id="l42.115" class="difflineplus">+</span>
<a href="#l42.116"></a><span id="l42.116" class="difflineplus">+tabpanels {</span>
<a href="#l42.117"></a><span id="l42.117" class="difflineplus">+  -moz-appearance: none;</span>
<a href="#l42.118"></a><span id="l42.118" class="difflineplus">+}</span>
<a href="#l42.119"></a><span id="l42.119" class="difflineplus">+</span>
<a href="#l42.120"></a><span id="l42.120" class="difflineplus">+/* tabbrowser-tab focus ring */</span>
<a href="#l42.121"></a><span id="l42.121" class="difflineplus">+.tab-text {</span>
<a href="#l42.122"></a><span id="l42.122" class="difflineplus">+  border: 1px dotted transparent;</span>
<a href="#l42.123"></a><span id="l42.123" class="difflineplus">+}</span>
<a href="#l42.124"></a><span id="l42.124" class="difflineplus">+</span>
<a href="#l42.125"></a><span id="l42.125" class="difflineplus">+.tabbrowser-tab[selected=&quot;true&quot;]:focus &gt; .tab-text {</span>
<a href="#l42.126"></a><span id="l42.126" class="difflineplus">+  border: 1px dotted -moz-DialogText;</span>
<a href="#l42.127"></a><span id="l42.127" class="difflineplus">+}</span>
<a href="#l42.128"></a><span id="l42.128" class="difflineplus">+</span>
<a href="#l42.129"></a><span id="l42.129" class="difflineplus">+/* Tab DnD indicator */</span>
<a href="#l42.130"></a><span id="l42.130" class="difflineplus">+.tab-drop-indicator-bar {</span>
<a href="#l42.131"></a><span id="l42.131" class="difflineplus">+  height: 11px;</span>
<a href="#l42.132"></a><span id="l42.132" class="difflineplus">+  margin-top: -11px;</span>
<a href="#l42.133"></a><span id="l42.133" class="difflineplus">+  position: relative;</span>
<a href="#l42.134"></a><span id="l42.134" class="difflineplus">+  /* set -moz-margin-start to -1/2 indicator width: */</span>
<a href="#l42.135"></a><span id="l42.135" class="difflineplus">+  -moz-margin-start: -5px;</span>
<a href="#l42.136"></a><span id="l42.136" class="difflineplus">+}</span>
<a href="#l42.137"></a><span id="l42.137" class="difflineplus">+</span>
<a href="#l42.138"></a><span id="l42.138" class="difflineplus">+.tab-drop-indicator {</span>
<a href="#l42.139"></a><span id="l42.139" class="difflineplus">+  height: 11px;</span>
<a href="#l42.140"></a><span id="l42.140" class="difflineplus">+  width: 11px;</span>
<a href="#l42.141"></a><span id="l42.141" class="difflineplus">+  margin-bottom: -5px;</span>
<a href="#l42.142"></a><span id="l42.142" class="difflineplus">+  position: relative;</span>
<a href="#l42.143"></a><span id="l42.143" class="difflineplus">+  background: url('chrome://instantbird/skin/tabbrowser/tabDragIndicator.png') 50% 50% no-repeat;</span>
<a href="#l42.144"></a><span id="l42.144" class="difflineplus">+}</span>
<a href="#l42.145"></a><span id="l42.145" class="difflineplus">+</span>
<a href="#l42.146"></a><span id="l42.146" class="difflineplus">+/* Tab close button */</span>
<a href="#l42.147"></a><span id="l42.147" class="difflineplus">+.tab-close-button &gt; .toolbarbutton-icon {</span>
<a href="#l42.148"></a><span id="l42.148" class="difflineplus">+  -moz-margin-end: 0px !important;</span>
<a href="#l42.149"></a><span id="l42.149" class="difflineplus">+  margin-top: 1px;</span>
<a href="#l42.150"></a><span id="l42.150" class="difflineplus">+}</span>
<a href="#l42.151"></a><span id="l42.151" class="difflineplus">+</span>
<a href="#l42.152"></a><span id="l42.152" class="difflineplus">+.tab-close-button {</span>
<a href="#l42.153"></a><span id="l42.153" class="difflineplus">+  -moz-appearance: none;</span>
<a href="#l42.154"></a><span id="l42.154" class="difflineplus">+  -moz-image-region: rect(0px, 56px, 14px, 42px);</span>
<a href="#l42.155"></a><span id="l42.155" class="difflineplus">+  -moz-margin-end: 6px;</span>
<a href="#l42.156"></a><span id="l42.156" class="difflineplus">+  border: none;</span>
<a href="#l42.157"></a><span id="l42.157" class="difflineplus">+  padding: 0px;</span>
<a href="#l42.158"></a><span id="l42.158" class="difflineplus">+  list-style-image: url(&quot;chrome://global/skin/icons/close.png&quot;);</span>
<a href="#l42.159"></a><span id="l42.159" class="difflineplus">+}</span>
<a href="#l42.160"></a><span id="l42.160" class="difflineplus">+</span>
<a href="#l42.161"></a><span id="l42.161" class="difflineplus">+.tab-close-button:hover,</span>
<a href="#l42.162"></a><span id="l42.162" class="difflineplus">+.tabbrowser-tab[selected=&quot;true&quot;] &gt; .tab-close-button:hover {</span>
<a href="#l42.163"></a><span id="l42.163" class="difflineplus">+  -moz-image-region: rect(0px, 28px, 14px, 14px);</span>
<a href="#l42.164"></a><span id="l42.164" class="difflineplus">+}</span>
<a href="#l42.165"></a><span id="l42.165" class="difflineplus">+</span>
<a href="#l42.166"></a><span id="l42.166" class="difflineplus">+.tab-close-button:hover:active,</span>
<a href="#l42.167"></a><span id="l42.167" class="difflineplus">+.tabbrowser-tab[selected=&quot;true&quot;] &gt; .tab-close-button:hover:active {</span>
<a href="#l42.168"></a><span id="l42.168" class="difflineplus">+  -moz-image-region: rect(0px, 42px, 14px, 28px);</span>
<a href="#l42.169"></a><span id="l42.169" class="difflineplus">+}</span>
<a href="#l42.170"></a><span id="l42.170" class="difflineplus">+</span>
<a href="#l42.171"></a><span id="l42.171" class="difflineplus">+.tabbrowser-tab[selected=&quot;true&quot;] &gt; .tab-close-button {</span>
<a href="#l42.172"></a><span id="l42.172" class="difflineplus">+  -moz-image-region: rect(0px, 14px, 14px, 0px);</span>
<a href="#l42.173"></a><span id="l42.173" class="difflineplus">+  /* Make this button focusable so clicking on it will not focus the tab while</span>
<a href="#l42.174"></a><span id="l42.174" class="difflineplus">+     it's getting closed */</span>
<a href="#l42.175"></a><span id="l42.175" class="difflineplus">+  -moz-user-focus: normal;</span>
<a href="#l42.176"></a><span id="l42.176" class="difflineplus">+}</span>
<a href="#l42.177"></a><span id="l42.177" class="difflineplus">+</span>
<a href="#l42.178"></a><span id="l42.178" class="difflineplus">+.tab-close-button:focus {</span>
<a href="#l42.179"></a><span id="l42.179" class="difflineplus">+  outline: none !important;</span>
<a href="#l42.180"></a><span id="l42.180" class="difflineplus">+}</span>
<a href="#l42.181"></a><span id="l42.181" class="difflineplus">+</span>
<a href="#l42.182"></a><span id="l42.182" class="difflineplus">+/* Tab scrollbox arrow, tabstrip new tab and all-tabs buttons */</span>
<a href="#l42.183"></a><span id="l42.183" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-up,</span>
<a href="#l42.184"></a><span id="l42.184" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-down,</span>
<a href="#l42.185"></a><span id="l42.185" class="difflineplus">+.tabs-newtab-button,</span>
<a href="#l42.186"></a><span id="l42.186" class="difflineplus">+.tabs-alltabs-button {</span>
<a href="#l42.187"></a><span id="l42.187" class="difflineplus">+  -moz-appearance: none;</span>
<a href="#l42.188"></a><span id="l42.188" class="difflineplus">+  width: 18px;</span>
<a href="#l42.189"></a><span id="l42.189" class="difflineplus">+  margin: 3px 0px 4px;</span>
<a href="#l42.190"></a><span id="l42.190" class="difflineplus">+  padding: 0px;</span>
<a href="#l42.191"></a><span id="l42.191" class="difflineplus">+  border: 2px solid;</span>
<a href="#l42.192"></a><span id="l42.192" class="difflineplus">+  border-right-width: 1px;</span>
<a href="#l42.193"></a><span id="l42.193" class="difflineplus">+  border-bottom: none;</span>
<a href="#l42.194"></a><span id="l42.194" class="difflineplus">+  -moz-border-top-colors: ThreeDShadow rgba(255,255,255,.3);</span>
<a href="#l42.195"></a><span id="l42.195" class="difflineplus">+  -moz-border-right-colors: ThreeDShadow;</span>
<a href="#l42.196"></a><span id="l42.196" class="difflineplus">+  -moz-border-left-colors: ThreeDShadow rgba(255,255,255,.3);</span>
<a href="#l42.197"></a><span id="l42.197" class="difflineplus">+  background: url(&quot;chrome://instantbird/skin/tabbrowser/tab-bkgnd.png&quot;) repeat-x;</span>
<a href="#l42.198"></a><span id="l42.198" class="difflineplus">+  -moz-image-region: rect(0, 11px, 14px, 0);</span>
<a href="#l42.199"></a><span id="l42.199" class="difflineplus">+}</span>
<a href="#l42.200"></a><span id="l42.200" class="difflineplus">+</span>
<a href="#l42.201"></a><span id="l42.201" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-up:not([disabled=&quot;true&quot;]):hover,</span>
<a href="#l42.202"></a><span id="l42.202" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-down:not([disabled=&quot;true&quot;]):hover,</span>
<a href="#l42.203"></a><span id="l42.203" class="difflineplus">+.tabs-newtab-button:hover,</span>
<a href="#l42.204"></a><span id="l42.204" class="difflineplus">+.tabs-alltabs-button:hover {</span>
<a href="#l42.205"></a><span id="l42.205" class="difflineplus">+  border-top-width: 1px;</span>
<a href="#l42.206"></a><span id="l42.206" class="difflineplus">+  padding-top: 1px;</span>
<a href="#l42.207"></a><span id="l42.207" class="difflineplus">+  -moz-border-top-colors: ThreeDShadow;</span>
<a href="#l42.208"></a><span id="l42.208" class="difflineplus">+  -moz-border-right-colors: ThreeDShadow;</span>
<a href="#l42.209"></a><span id="l42.209" class="difflineplus">+  -moz-border-left-colors: ThreeDShadow transparent;</span>
<a href="#l42.210"></a><span id="l42.210" class="difflineplus">+  background-image: url(&quot;chrome://instantbird/skin/tabbrowser/tab-hover-bkgnd.png&quot;);</span>
<a href="#l42.211"></a><span id="l42.211" class="difflineplus">+}</span>
<a href="#l42.212"></a><span id="l42.212" class="difflineplus">+</span>
<a href="#l42.213"></a><span id="l42.213" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-up,</span>
<a href="#l42.214"></a><span id="l42.214" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-down {</span>
<a href="#l42.215"></a><span id="l42.215" class="difflineplus">+  -moz-image-region: rect(0, 15px, 17px, 0);</span>
<a href="#l42.216"></a><span id="l42.216" class="difflineplus">+}</span>
<a href="#l42.217"></a><span id="l42.217" class="difflineplus">+</span>
<a href="#l42.218"></a><span id="l42.218" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-up:not([disabled=&quot;true&quot;]):hover,</span>
<a href="#l42.219"></a><span id="l42.219" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-down:not([disabled=&quot;true&quot;]):hover {</span>
<a href="#l42.220"></a><span id="l42.220" class="difflineplus">+  -moz-image-region: rect(0, 30px, 17px, 15px);</span>
<a href="#l42.221"></a><span id="l42.221" class="difflineplus">+}</span>
<a href="#l42.222"></a><span id="l42.222" class="difflineplus">+</span>
<a href="#l42.223"></a><span id="l42.223" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-up[disabled=&quot;true&quot;],</span>
<a href="#l42.224"></a><span id="l42.224" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-down[disabled=&quot;true&quot;] {</span>
<a href="#l42.225"></a><span id="l42.225" class="difflineplus">+  opacity: .4;</span>
<a href="#l42.226"></a><span id="l42.226" class="difflineplus">+}</span>
<a href="#l42.227"></a><span id="l42.227" class="difflineplus">+</span>
<a href="#l42.228"></a><span id="l42.228" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-up:not([disabled=&quot;true&quot;]):hover:active,</span>
<a href="#l42.229"></a><span id="l42.229" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-down:not([disabled=&quot;true&quot;]):hover:active {</span>
<a href="#l42.230"></a><span id="l42.230" class="difflineplus">+  -moz-image-region: rect(0, 45px, 17px, 30px);</span>
<a href="#l42.231"></a><span id="l42.231" class="difflineplus">+}</span>
<a href="#l42.232"></a><span id="l42.232" class="difflineplus">+</span>
<a href="#l42.233"></a><span id="l42.233" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-up {</span>
<a href="#l42.234"></a><span id="l42.234" class="difflineplus">+  border-left-style: none;</span>
<a href="#l42.235"></a><span id="l42.235" class="difflineplus">+  list-style-image: url(&quot;chrome://instantbird/skin/tabbrowser/tab-arrow-left.png&quot;);</span>
<a href="#l42.236"></a><span id="l42.236" class="difflineplus">+  -moz-border-radius-topright: 2px;</span>
<a href="#l42.237"></a><span id="l42.237" class="difflineplus">+}</span>
<a href="#l42.238"></a><span id="l42.238" class="difflineplus">+</span>
<a href="#l42.239"></a><span id="l42.239" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-up[chromedir=&quot;rtl&quot;] {</span>
<a href="#l42.240"></a><span id="l42.240" class="difflineplus">+  border-left-style: solid;</span>
<a href="#l42.241"></a><span id="l42.241" class="difflineplus">+  border-right-style: none;</span>
<a href="#l42.242"></a><span id="l42.242" class="difflineplus">+  -moz-border-radius-topleft: 2px;</span>
<a href="#l42.243"></a><span id="l42.243" class="difflineplus">+  -moz-border-radius-topright: 0px;</span>
<a href="#l42.244"></a><span id="l42.244" class="difflineplus">+  list-style-image: url(&quot;chrome://instantbird/skin/tabbrowser/tab-arrow-right.png&quot;);</span>
<a href="#l42.245"></a><span id="l42.245" class="difflineplus">+}</span>
<a href="#l42.246"></a><span id="l42.246" class="difflineplus">+</span>
<a href="#l42.247"></a><span id="l42.247" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-down,</span>
<a href="#l42.248"></a><span id="l42.248" class="difflineplus">+.tabs-container &gt; .tabs-newtab-button,</span>
<a href="#l42.249"></a><span id="l42.249" class="difflineplus">+.tabs-alltabs-button {</span>
<a href="#l42.250"></a><span id="l42.250" class="difflineplus">+  border-right-style: none;</span>
<a href="#l42.251"></a><span id="l42.251" class="difflineplus">+  -moz-border-radius-topleft: 2px;</span>
<a href="#l42.252"></a><span id="l42.252" class="difflineplus">+}</span>
<a href="#l42.253"></a><span id="l42.253" class="difflineplus">+</span>
<a href="#l42.254"></a><span id="l42.254" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-down {</span>
<a href="#l42.255"></a><span id="l42.255" class="difflineplus">+  list-style-image: url(&quot;chrome://instantbird/skin/tabbrowser/tab-arrow-right.png&quot;);</span>
<a href="#l42.256"></a><span id="l42.256" class="difflineplus">+}</span>
<a href="#l42.257"></a><span id="l42.257" class="difflineplus">+</span>
<a href="#l42.258"></a><span id="l42.258" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-down[chromedir=&quot;rtl&quot;],</span>
<a href="#l42.259"></a><span id="l42.259" class="difflineplus">+.tabs-container &gt; .tabs-newtab-button[chromedir=&quot;rtl&quot;],</span>
<a href="#l42.260"></a><span id="l42.260" class="difflineplus">+.tabs-container &gt; stack[chromedir=&quot;rtl&quot;] &gt; .tabs-alltabs-button {</span>
<a href="#l42.261"></a><span id="l42.261" class="difflineplus">+  border-left-style: none;</span>
<a href="#l42.262"></a><span id="l42.262" class="difflineplus">+  border-right-style: solid;</span>
<a href="#l42.263"></a><span id="l42.263" class="difflineplus">+  -moz-border-radius-topleft: 0px;</span>
<a href="#l42.264"></a><span id="l42.264" class="difflineplus">+  -moz-border-radius-topright: 2px;</span>
<a href="#l42.265"></a><span id="l42.265" class="difflineplus">+}</span>
<a href="#l42.266"></a><span id="l42.266" class="difflineplus">+</span>
<a href="#l42.267"></a><span id="l42.267" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .scrollbutton-down[chromedir=&quot;rtl&quot;] {</span>
<a href="#l42.268"></a><span id="l42.268" class="difflineplus">+  list-style-image: url(&quot;chrome://instantbird/skin/tabbrowser/tab-arrow-left.png&quot;);</span>
<a href="#l42.269"></a><span id="l42.269" class="difflineplus">+}</span>
<a href="#l42.270"></a><span id="l42.270" class="difflineplus">+</span>
<a href="#l42.271"></a><span id="l42.271" class="difflineplus">+.tabs-newtab-button {</span>
<a href="#l42.272"></a><span id="l42.272" class="difflineplus">+  list-style-image: url(chrome://instantbird/skin/tabbrowser/newtab.png);</span>
<a href="#l42.273"></a><span id="l42.273" class="difflineplus">+  -moz-image-region: rect(0, 18px, 18px, 0);</span>
<a href="#l42.274"></a><span id="l42.274" class="difflineplus">+}</span>
<a href="#l42.275"></a><span id="l42.275" class="difflineplus">+</span>
<a href="#l42.276"></a><span id="l42.276" class="difflineplus">+.tabs-newtab-button:hover:active {</span>
<a href="#l42.277"></a><span id="l42.277" class="difflineplus">+  -moz-image-region: rect(0, 36px, 18px, 18px);</span>
<a href="#l42.278"></a><span id="l42.278" class="difflineplus">+}</span>
<a href="#l42.279"></a><span id="l42.279" class="difflineplus">+</span>
<a href="#l42.280"></a><span id="l42.280" class="difflineplus">+.tabbrowser-arrowscrollbox &gt; .tabs-newtab-button {</span>
<a href="#l42.281"></a><span id="l42.281" class="difflineplus">+  width: 31px;</span>
<a href="#l42.282"></a><span id="l42.282" class="difflineplus">+  -moz-border-radius-topright: 2px;</span>
<a href="#l42.283"></a><span id="l42.283" class="difflineplus">+  -moz-border-radius-topleft: 2px;</span>
<a href="#l42.284"></a><span id="l42.284" class="difflineplus">+}</span>
<a href="#l42.285"></a><span id="l42.285" class="difflineplus">+</span>
<a href="#l42.286"></a><span id="l42.286" class="difflineplus">+.tabs-alltabs-button &gt; .toolbarbutton-menu-dropmarker,</span>
<a href="#l42.287"></a><span id="l42.287" class="difflineplus">+.tabs-alltabs-button &gt; .toolbarbutton-text  {</span>
<a href="#l42.288"></a><span id="l42.288" class="difflineplus">+  display: none;</span>
<a href="#l42.289"></a><span id="l42.289" class="difflineplus">+}</span>
<a href="#l42.290"></a><span id="l42.290" class="difflineplus">+</span>
<a href="#l42.291"></a><span id="l42.291" class="difflineplus">+.tabs-alltabs-button {</span>
<a href="#l42.292"></a><span id="l42.292" class="difflineplus">+  width: 17px;</span>
<a href="#l42.293"></a><span id="l42.293" class="difflineplus">+}</span>
<a href="#l42.294"></a><span id="l42.294" class="difflineplus">+</span>
<a href="#l42.295"></a><span id="l42.295" class="difflineplus">+.tabs-alltabs-button &gt; .toolbarbutton-icon {</span>
<a href="#l42.296"></a><span id="l42.296" class="difflineplus">+  list-style-image: url(&quot;chrome://instantbird/skin/tabbrowser/mainwindow-dropdown-arrow.png&quot;);</span>
<a href="#l42.297"></a><span id="l42.297" class="difflineplus">+  margin: 5px 0 4px;</span>
<a href="#l42.298"></a><span id="l42.298" class="difflineplus">+  -moz-image-region: rect(0, 13px, 11px, 0);</span>
<a href="#l42.299"></a><span id="l42.299" class="difflineplus">+}</span>
<a href="#l42.300"></a><span id="l42.300" class="difflineplus">+</span>
<a href="#l42.301"></a><span id="l42.301" class="difflineplus">+.tabs-alltabs-button[open=&quot;true&quot;] &gt; .toolbarbutton-icon {</span>
<a href="#l42.302"></a><span id="l42.302" class="difflineplus">+  -moz-image-region: rect(0, 26px, 11px, 13px);</span>
<a href="#l42.303"></a><span id="l42.303" class="difflineplus">+}</span>
<a href="#l42.304"></a><span id="l42.304" class="difflineplus">+</span>
<a href="#l42.305"></a><span id="l42.305" class="difflineplus">+.tabs-alltabs-box-animate {</span>
<a href="#l42.306"></a><span id="l42.306" class="difflineplus">+  margin-top: 2px;</span>
<a href="#l42.307"></a><span id="l42.307" class="difflineplus">+  margin-bottom: 4px;</span>
<a href="#l42.308"></a><span id="l42.308" class="difflineplus">+  width: 17px !important;</span>
<a href="#l42.309"></a><span id="l42.309" class="difflineplus">+  background-image: url(&quot;chrome://instantbird/skin/tabbrowser/alltabs-box-overflow-end-bkgnd-animate.png&quot;);</span>
<a href="#l42.310"></a><span id="l42.310" class="difflineplus">+  background-repeat: no-repeat;</span>
<a href="#l42.311"></a><span id="l42.311" class="difflineplus">+  opacity: 0.0;</span>
<a href="#l42.312"></a><span id="l42.312" class="difflineplus">+}</span>
<a href="#l42.313"></a><span id="l42.313" class="difflineplus">+</span>
<a href="#l42.314"></a><span id="l42.314" class="difflineplus">+stack[chromedir=&quot;rtl&quot;] &gt; hbox &gt; .tabs-alltabs-box-animate {</span>
<a href="#l42.315"></a><span id="l42.315" class="difflineplus">+  background-image: url(&quot;chrome://instantbird/skin/tabbrowser/alltabs-box-overflow-start-bkgnd-animate.png&quot;);</span>
<a href="#l42.316"></a><span id="l42.316" class="difflineplus">+}</span>
<a href="#l42.317"></a><span id="l42.317" class="difflineplus">+</span>
<a href="#l42.318"></a><span id="l42.318" class="difflineplus">+/* All tabs menupopup */</span>
<a href="#l42.319"></a><span id="l42.319" class="difflineplus">+.alltabs-item &gt; .menu-iconic-left &gt; .menu-iconic-icon {</span>
<a href="#l42.320"></a><span id="l42.320" class="difflineplus">+  -moz-image-region: rect(0px, 16px, 16px, 0px);</span>
<a href="#l42.321"></a><span id="l42.321" class="difflineplus">+}</span>
<a href="#l42.322"></a><span id="l42.322" class="difflineplus">+</span>
<a href="#l42.323"></a><span id="l42.323" class="difflineplus">+.alltabs-item[selected=&quot;true&quot;] {</span>
<a href="#l42.324"></a><span id="l42.324" class="difflineplus">+  font-weight: bold;</span>
<a href="#l42.325"></a><span id="l42.325" class="difflineplus">+}</span>
<a href="#l42.326"></a><span id="l42.326" class="difflineplus">+</span>
<a href="#l42.327"></a><span id="l42.327" class="difflineplus">+/* Tabstrip close button */</span>
<a href="#l42.328"></a><span id="l42.328" class="difflineplus">+.tabs-closebutton {</span>
<a href="#l42.329"></a><span id="l42.329" class="difflineplus">+  -moz-appearance: none;</span>
<a href="#l42.330"></a><span id="l42.330" class="difflineplus">+  list-style-image: url(&quot;chrome://global/skin/icons/close.png&quot;);</span>
<a href="#l42.331"></a><span id="l42.331" class="difflineplus">+  -moz-image-region: rect(0px, 14px, 14px, 0px);</span>
<a href="#l42.332"></a><span id="l42.332" class="difflineplus">+  padding: 4px 2px;</span>
<a href="#l42.333"></a><span id="l42.333" class="difflineplus">+  margin: 0px;</span>
<a href="#l42.334"></a><span id="l42.334" class="difflineplus">+  border: none;</span>
<a href="#l42.335"></a><span id="l42.335" class="difflineplus">+}</span>
<a href="#l42.336"></a><span id="l42.336" class="difflineplus">+</span>
<a href="#l42.337"></a><span id="l42.337" class="difflineplus">+.tabs-closebutton &gt; .toolbarbutton-icon {</span>
<a href="#l42.338"></a><span id="l42.338" class="difflineplus">+  -moz-margin-end: 0px !important;</span>
<a href="#l42.339"></a><span id="l42.339" class="difflineplus">+  -moz-padding-end: 2px !important;</span>
<a href="#l42.340"></a><span id="l42.340" class="difflineplus">+  -moz-padding-start: 2px !important;</span>
<a href="#l42.341"></a><span id="l42.341" class="difflineplus">+}</span>
<a href="#l42.342"></a><span id="l42.342" class="difflineplus">+</span>
<a href="#l42.343"></a><span id="l42.343" class="difflineplus">+.tabs-closebutton:hover {</span>
<a href="#l42.344"></a><span id="l42.344" class="difflineplus">+  -moz-image-region: rect(0px, 28px, 14px, 14px);</span>
<a href="#l42.345"></a><span id="l42.345" class="difflineplus">+}</span>
<a href="#l42.346"></a><span id="l42.346" class="difflineplus">+</span>
<a href="#l42.347"></a><span id="l42.347" class="difflineplus">+.tabs-closebutton:hover:active {</span>
<a href="#l42.348"></a><span id="l42.348" class="difflineplus">+  -moz-image-region: rect(0px, 42px, 14px, 28px);</span>
<a href="#l42.349"></a><span id="l42.349" class="difflineplus">+}</span>
<a href="#l42.350"></a><span id="l42.350" class="difflineplus">+</span>
<a href="#l42.351"></a><span id="l42.351" class="difflineplus">+.tabs-container &gt; .tabs-closebutton {</span>
<a href="#l42.352"></a><span id="l42.352" class="difflineplus">+  margin: 3px 0px 3px;</span>
<a href="#l42.353"></a><span id="l42.353" class="difflineplus">+  padding: 4px 2px 2px;</span>
<a href="#l42.354"></a><span id="l42.354" class="difflineplus">+  background: -moz-dialog url(&quot;chrome://instantbird/skin/tabbrowser/tab-active-bkgnd.png&quot;) repeat-x;</span>
<a href="#l42.355"></a><span id="l42.355" class="difflineplus">+  border-left: 1px solid threedshadow;</span>
<a href="#l42.356"></a><span id="l42.356" class="difflineplus">+  border-top: 1px solid threedshadow;</span>
<a href="#l42.357"></a><span id="l42.357" class="difflineplus">+  -moz-border-radius-topleft: 2px;</span>
<a href="#l42.358"></a><span id="l42.358" class="difflineplus">+}</span>
<a href="#l42.359"></a><span id="l42.359" class="difflineplus">+</span>
<a href="#l42.360"></a><span id="l42.360" class="difflineplus">+.tabs-container &gt; .tabs-closebutton[chromedir=&quot;rtl&quot;] {</span>
<a href="#l42.361"></a><span id="l42.361" class="difflineplus">+  border-left: none;</span>
<a href="#l42.362"></a><span id="l42.362" class="difflineplus">+  border-right: 1px solid threedshadow;</span>
<a href="#l42.363"></a><span id="l42.363" class="difflineplus">+  -moz-border-radius-topleft: 0px;</span>
<a href="#l42.364"></a><span id="l42.364" class="difflineplus">+  -moz-border-radius-topright: 2px;</span>
<a href="#l42.365"></a><span id="l42.365" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1">new file mode 100644</span>
<a href="#l43.2"></a><span id="l43.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..945f42da7c50d40398555fe91501adbdfab21012</span>
<a href="#l43.3"></a><span id="l43.3">GIT binary patch
literal 126
zc%17D@N?(olHy`uVBq!ia0vp^j3CUx1|;Q0k8}bl_7YEDSN3b19Ae^f&gt;IRk8Kq1Zo
zkH}&amp;M2DyVE%y&gt;96Bp4{jlJ4m1$iT3%pZiZDE7(96$B&gt;F!$v-|kY?fl+n9cOvlEwEQ
PP=dkJ)z4*}Q$iB}-+LWz</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1">deleted file mode 100755</span>
<a href="#l44.2"></a><span id="l44.2">index 367f9a7c9fd50f3ecf288fe9dbb1edc41a5fb6ab..e69de29bb2d1d6434b8b29ae775ad8c2e48c5391</span>
<a href="#l44.3"></a><span id="l44.3">GIT binary patch
literal 0
Hc$@&lt;O00001</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1">deleted file mode 100755</span>
<a href="#l45.2"></a><span id="l45.2">index 2ed07645bf1de4037889dd7e45ec659ecfdc446c..e69de29bb2d1d6434b8b29ae775ad8c2e48c5391</span>
<a href="#l45.3"></a><span id="l45.3">GIT binary patch
literal 0
Hc$@&lt;O00001</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1">deleted file mode 100644</span>
<a href="#l46.2"></a><span id="l46.2">index 7a93dc056445d4ea116c53a03b0b8d465e8ea927..e69de29bb2d1d6434b8b29ae775ad8c2e48c5391</span>
<a href="#l46.3"></a><span id="l46.3">GIT binary patch
literal 0
Hc$@&lt;O00001</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1">deleted file mode 100755</span>
<a href="#l47.2"></a><span id="l47.2">index b83a381a7ad2c5e4b43085a24e72ccdc72556cfe..e69de29bb2d1d6434b8b29ae775ad8c2e48c5391</span>
<a href="#l47.3"></a><span id="l47.3">GIT binary patch
literal 0
Hc$@&lt;O00001</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1">deleted file mode 100755</span>
<a href="#l48.2"></a><span id="l48.2">index b18dbddc8b4e5e325add1169098120b64258c5b9..e69de29bb2d1d6434b8b29ae775ad8c2e48c5391</span>
<a href="#l48.3"></a><span id="l48.3">GIT binary patch
literal 0
Hc$@&lt;O00001</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1">deleted file mode 100644</span>
<a href="#l49.2"></a><span id="l49.2">index c161fa4713343df7ed525796b6e3eef5fa0d38dc..e69de29bb2d1d6434b8b29ae775ad8c2e48c5391</span>
<a href="#l49.3"></a><span id="l49.3">GIT binary patch
literal 0
Hc$@&lt;O00001</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1">deleted file mode 100755</span>
<a href="#l50.2"></a><span id="l50.2">index 96d49cea9a80d4cd48f2a4270f66b4b8a42bddc2..e69de29bb2d1d6434b8b29ae775ad8c2e48c5391</span>
<a href="#l50.3"></a><span id="l50.3">GIT binary patch
literal 0
Hc$@&lt;O00001</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1">deleted file mode 100755</span>
<a href="#l51.2"></a><span id="l51.2">index db9d4af3e6a7c3fe83754f1396cb11bbbc6e5a92..e69de29bb2d1d6434b8b29ae775ad8c2e48c5391</span>
<a href="#l51.3"></a><span id="l51.3">GIT binary patch
literal 0
Hc$@&lt;O00001</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1">deleted file mode 100644</span>
<a href="#l52.2"></a><span id="l52.2">index 9ff1d66c0bcd9464e99b465a7a249e30218f139f..e69de29bb2d1d6434b8b29ae775ad8c2e48c5391</span>
<a href="#l52.3"></a><span id="l52.3">GIT binary patch
literal 0
Hc$@&lt;O00001</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

