<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 13429:25f9d632291219c19d58c3633c34d2d454af0ba8</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 25f9d632291219c19d58c3633c34d2d454af0ba8" />
<meta property="og:url" content="/comm-central/rev/25f9d632291219c19d58c3633c34d2d454af0ba8" />
<meta property="og:description" content="Bug 952431 - Replace a bunch of NS_LITERAL_STRING uses with MOZ_UTF16. r=Neil" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 25f9d632291219c19d58c3633c34d2d454af0ba8 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/25f9d632291219c19d58c3633c34d2d454af0ba8">shortlog</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/25f9d632291219c19d58c3633c34d2d454af0ba8">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8">files</a> |
changeset |
<a href="/comm-central/raw-rev/25f9d632291219c19d58c3633c34d2d454af0ba8">raw</a>  | <a href="/comm-central/archive/25f9d632291219c19d58c3633c34d2d454af0ba8.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=952431">Bug 952431</a> - Replace a bunch of NS_LITERAL_STRING uses with MOZ_UTF16. r=Neil
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#83;&#117;&#121;&#97;&#115;&#104;&#32;&#65;&#103;&#97;&#114;&#119;&#97;&#108;&#32;&#60;&#115;&#121;&#115;&#104;&#97;&#103;&#97;&#114;&#119;&#97;&#108;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 02 Jan 2014 15:29:05 -0500</td></tr>

<tr>
 <td>changeset 13429</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/25f9d632291219c19d58c3633c34d2d454af0ba8">25f9d632291219c19d58c3633c34d2d454af0ba8</a></td>
</tr>



<tr>
<td>parent 13428</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/e304453cd7c7e2deaa53e528b5b9d422c07c39e0">e304453cd7c7e2deaa53e528b5b9d422c07c39e0</a>
</td>
</tr>

<tr>
<td>child 13430</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/15eac4288d80d669d8db2763b018f30767feceb9">15eac4288d80d669d8db2763b018f30767feceb9</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=25f9d632291219c19d58c3633c34d2d454af0ba8">9747</a></td></tr>
<tr><td>push user</td><td>ryanvm@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Thu, 02 Jan 2014 20:30:18 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@15eac4288d80 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=15eac4288d80d669d8db2763b018f30767feceb9">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=15eac4288d80d669d8db2763b018f30767feceb9&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=15eac4288d80d669d8db2763b018f30767feceb9&newProject=comm-central&newRevision=42969141a75036b9b52a6c1897e066af69ea9b26&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=15eac4288d80d669d8db2763b018f30767feceb9&newProject=comm-central&newRevision=42969141a75036b9b52a6c1897e066af69ea9b26&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=15eac4288d80d669d8db2763b018f30767feceb9&newProject=comm-central&newRevision=42969141a75036b9b52a6c1897e066af69ea9b26&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Neil%29&revcount=50">Neil</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=952431">952431</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=952431">Bug 952431</a> - Replace a bunch of NS_LITERAL_STRING uses with MOZ_UTF16. r=Neil</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mail/components/shell/nsMailGNOMEIntegration.cpp">mail/components/shell/nsMailGNOMEIntegration.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mail/components/shell/nsMailGNOMEIntegration.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mail/components/shell/nsMailGNOMEIntegration.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mail/components/shell/nsMailGNOMEIntegration.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mail/components/shell/nsMailGNOMEIntegration.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mail/components/shell/nsMailGNOMEIntegration.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbCardProperty.cpp">mailnews/addrbook/src/nsAbCardProperty.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbCardProperty.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbCardProperty.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbCardProperty.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbCardProperty.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbCardProperty.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp">mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbLDAPDirectory.cpp">mailnews/addrbook/src/nsAbLDAPDirectory.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbLDAPDirectory.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbLDAPDirectory.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbLDAPDirectory.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbLDAPDirectory.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbLDAPDirectory.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbLDAPListenerBase.cpp">mailnews/addrbook/src/nsAbLDAPListenerBase.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbLDAPListenerBase.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbLDAPListenerBase.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbLDAPListenerBase.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbLDAPListenerBase.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbLDAPListenerBase.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbManager.cpp">mailnews/addrbook/src/nsAbManager.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbManager.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbManager.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbManager.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbManager.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbManager.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbView.cpp">mailnews/addrbook/src/nsAbView.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbView.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbView.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbView.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbView.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAbView.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAddbookProtocolHandler.cpp">mailnews/addrbook/src/nsAddbookProtocolHandler.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAddbookProtocolHandler.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAddbookProtocolHandler.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAddbookProtocolHandler.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAddbookProtocolHandler.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAddbookProtocolHandler.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAddrDatabase.cpp">mailnews/addrbook/src/nsAddrDatabase.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAddrDatabase.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAddrDatabase.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAddrDatabase.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAddrDatabase.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/addrbook/src/nsAddrDatabase.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/search/src/nsMsgFilter.cpp">mailnews/base/search/src/nsMsgFilter.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/search/src/nsMsgFilter.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/search/src/nsMsgFilter.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/search/src/nsMsgFilter.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/search/src/nsMsgFilter.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/search/src/nsMsgFilter.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/search/src/nsMsgFilterService.cpp">mailnews/base/search/src/nsMsgFilterService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/search/src/nsMsgFilterService.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/search/src/nsMsgFilterService.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/search/src/nsMsgFilterService.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/search/src/nsMsgFilterService.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/search/src/nsMsgFilterService.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/search/src/nsMsgSearchAdapter.cpp">mailnews/base/search/src/nsMsgSearchAdapter.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/search/src/nsMsgSearchAdapter.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/search/src/nsMsgSearchAdapter.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/search/src/nsMsgSearchAdapter.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/search/src/nsMsgSearchAdapter.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/search/src/nsMsgSearchAdapter.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessenger.cpp">mailnews/base/src/nsMessenger.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessenger.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessenger.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessenger.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessenger.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessenger.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessengerOSXIntegration.mm">mailnews/base/src/nsMessengerOSXIntegration.mm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessengerOSXIntegration.mm">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessengerOSXIntegration.mm">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessengerOSXIntegration.mm">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessengerOSXIntegration.mm">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessengerOSXIntegration.mm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessengerUnixIntegration.cpp">mailnews/base/src/nsMessengerUnixIntegration.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessengerUnixIntegration.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessengerUnixIntegration.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessengerUnixIntegration.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessengerUnixIntegration.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessengerUnixIntegration.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessengerWinIntegration.cpp">mailnews/base/src/nsMessengerWinIntegration.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessengerWinIntegration.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessengerWinIntegration.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessengerWinIntegration.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessengerWinIntegration.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMessengerWinIntegration.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgAccountManager.cpp">mailnews/base/src/nsMsgAccountManager.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgAccountManager.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgAccountManager.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgAccountManager.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgAccountManager.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgAccountManager.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgAccountManagerDS.cpp">mailnews/base/src/nsMsgAccountManagerDS.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgAccountManagerDS.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgAccountManagerDS.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgAccountManagerDS.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgAccountManagerDS.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgAccountManagerDS.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgDBView.cpp">mailnews/base/src/nsMsgDBView.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgDBView.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgDBView.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgDBView.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgDBView.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgDBView.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgFolderDataSource.cpp">mailnews/base/src/nsMsgFolderDataSource.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgFolderDataSource.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgFolderDataSource.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgFolderDataSource.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgFolderDataSource.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgFolderDataSource.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgGroupView.cpp">mailnews/base/src/nsMsgGroupView.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgGroupView.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgGroupView.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgGroupView.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgGroupView.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgGroupView.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgPrintEngine.cpp">mailnews/base/src/nsMsgPrintEngine.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgPrintEngine.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgPrintEngine.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgPrintEngine.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgPrintEngine.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgPrintEngine.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgStatusFeedback.cpp">mailnews/base/src/nsMsgStatusFeedback.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgStatusFeedback.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgStatusFeedback.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgStatusFeedback.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgStatusFeedback.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgStatusFeedback.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgWindow.cpp">mailnews/base/src/nsMsgWindow.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgWindow.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgWindow.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgWindow.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgWindow.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsMsgWindow.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsSpamSettings.cpp">mailnews/base/src/nsSpamSettings.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsSpamSettings.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsSpamSettings.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsSpamSettings.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsSpamSettings.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsSpamSettings.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsSubscribableServer.cpp">mailnews/base/src/nsSubscribableServer.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsSubscribableServer.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsSubscribableServer.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsSubscribableServer.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsSubscribableServer.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsSubscribableServer.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsSubscribeDataSource.cpp">mailnews/base/src/nsSubscribeDataSource.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsSubscribeDataSource.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsSubscribeDataSource.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsSubscribeDataSource.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsSubscribeDataSource.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/src/nsSubscribeDataSource.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgDBFolder.cpp">mailnews/base/util/nsMsgDBFolder.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgDBFolder.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgDBFolder.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgDBFolder.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgDBFolder.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgDBFolder.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgI18N.cpp">mailnews/base/util/nsMsgI18N.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgI18N.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgI18N.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgI18N.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgI18N.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgI18N.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgIncomingServer.cpp">mailnews/base/util/nsMsgIncomingServer.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgIncomingServer.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgIncomingServer.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgIncomingServer.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgIncomingServer.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgIncomingServer.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgUtils.cpp">mailnews/base/util/nsMsgUtils.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgUtils.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgUtils.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgUtils.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgUtils.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/base/util/nsMsgUtils.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgCompose.cpp">mailnews/compose/src/nsMsgCompose.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgCompose.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgCompose.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgCompose.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgCompose.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgCompose.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgComposeService.cpp">mailnews/compose/src/nsMsgComposeService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgComposeService.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgComposeService.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgComposeService.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgComposeService.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgComposeService.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgPrompts.cpp">mailnews/compose/src/nsMsgPrompts.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgPrompts.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgPrompts.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgPrompts.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgPrompts.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgPrompts.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgSend.cpp">mailnews/compose/src/nsMsgSend.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgSend.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgSend.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgSend.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgSend.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsMsgSend.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsSmtpProtocol.cpp">mailnews/compose/src/nsSmtpProtocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsSmtpProtocol.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsSmtpProtocol.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsSmtpProtocol.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsSmtpProtocol.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/compose/src/nsSmtpProtocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp">mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">mailnews/extensions/smime/src/nsMsgComposeSecure.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsIMAPBodyShell.cpp">mailnews/imap/src/nsIMAPBodyShell.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsIMAPBodyShell.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsIMAPBodyShell.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsIMAPBodyShell.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsIMAPBodyShell.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsIMAPBodyShell.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsImapIncomingServer.cpp">mailnews/imap/src/nsImapIncomingServer.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsImapIncomingServer.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsImapIncomingServer.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsImapIncomingServer.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsImapIncomingServer.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsImapIncomingServer.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsImapMailFolder.cpp">mailnews/imap/src/nsImapMailFolder.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsImapMailFolder.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsImapMailFolder.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsImapMailFolder.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsImapMailFolder.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsImapMailFolder.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsImapService.cpp">mailnews/imap/src/nsImapService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsImapService.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsImapService.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsImapService.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsImapService.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/imap/src/nsImapService.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/import/eudora/src/nsEudoraFilters.cpp">mailnews/import/eudora/src/nsEudoraFilters.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/import/eudora/src/nsEudoraFilters.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/import/eudora/src/nsEudoraFilters.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/import/eudora/src/nsEudoraFilters.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/import/eudora/src/nsEudoraFilters.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/import/eudora/src/nsEudoraFilters.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/import/src/nsImportMail.cpp">mailnews/import/src/nsImportMail.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/import/src/nsImportMail.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/import/src/nsImportMail.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/import/src/nsImportMail.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/import/src/nsImportMail.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/import/src/nsImportMail.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsLocalMailFolder.cpp">mailnews/local/src/nsLocalMailFolder.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsLocalMailFolder.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsLocalMailFolder.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsLocalMailFolder.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsLocalMailFolder.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsLocalMailFolder.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsPop3Protocol.cpp">mailnews/local/src/nsPop3Protocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsPop3Protocol.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsPop3Protocol.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsPop3Protocol.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsPop3Protocol.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsPop3Protocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsPop3Service.cpp">mailnews/local/src/nsPop3Service.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsPop3Service.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsPop3Service.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsPop3Service.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsPop3Service.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsPop3Service.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsPop3Sink.cpp">mailnews/local/src/nsPop3Sink.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsPop3Sink.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsPop3Sink.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsPop3Sink.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsPop3Sink.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/local/src/nsPop3Sink.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mapi/mapihook/src/msgMapiHook.cpp">mailnews/mapi/mapihook/src/msgMapiHook.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mapi/mapihook/src/msgMapiHook.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mapi/mapihook/src/msgMapiHook.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mapi/mapihook/src/msgMapiHook.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mapi/mapihook/src/msgMapiHook.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mapi/mapihook/src/msgMapiHook.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/cthandlers/pgpmime/nsPgpMimeProxy.cpp">mailnews/mime/cthandlers/pgpmime/nsPgpMimeProxy.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/cthandlers/pgpmime/nsPgpMimeProxy.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/cthandlers/pgpmime/nsPgpMimeProxy.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/cthandlers/pgpmime/nsPgpMimeProxy.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/cthandlers/pgpmime/nsPgpMimeProxy.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/cthandlers/pgpmime/nsPgpMimeProxy.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/emitters/nsMimeBaseEmitter.cpp">mailnews/mime/emitters/nsMimeBaseEmitter.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/emitters/nsMimeBaseEmitter.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/emitters/nsMimeBaseEmitter.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/emitters/nsMimeBaseEmitter.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/emitters/nsMimeBaseEmitter.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/emitters/nsMimeBaseEmitter.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/emitters/nsMimeHtmlEmitter.cpp">mailnews/mime/emitters/nsMimeHtmlEmitter.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/emitters/nsMimeHtmlEmitter.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/emitters/nsMimeHtmlEmitter.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/emitters/nsMimeHtmlEmitter.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/emitters/nsMimeHtmlEmitter.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/emitters/nsMimeHtmlEmitter.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/src/mimemsg.cpp">mailnews/mime/src/mimemsg.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/src/mimemsg.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/src/mimemsg.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/src/mimemsg.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/src/mimemsg.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/mime/src/mimemsg.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNNTPNewsgroupList.cpp">mailnews/news/src/nsNNTPNewsgroupList.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNNTPNewsgroupList.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNNTPNewsgroupList.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNNTPNewsgroupList.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNNTPNewsgroupList.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNNTPNewsgroupList.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNNTPProtocol.cpp">mailnews/news/src/nsNNTPProtocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNNTPProtocol.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNNTPProtocol.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNNTPProtocol.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNNTPProtocol.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNNTPProtocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNewsDownloader.cpp">mailnews/news/src/nsNewsDownloader.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNewsDownloader.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNewsDownloader.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNewsDownloader.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNewsDownloader.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNewsDownloader.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNewsFolder.cpp">mailnews/news/src/nsNewsFolder.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNewsFolder.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNewsFolder.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNewsFolder.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNewsFolder.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNewsFolder.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNntpIncomingServer.cpp">mailnews/news/src/nsNntpIncomingServer.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNntpIncomingServer.cpp">file</a> |
<a href="/comm-central/annotate/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNntpIncomingServer.cpp">annotate</a> |
<a href="/comm-central/diff/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNntpIncomingServer.cpp">diff</a> |
<a href="/comm-central/comparison/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNntpIncomingServer.cpp">comparison</a> |
<a href="/comm-central/log/25f9d632291219c19d58c3633c34d2d454af0ba8/mailnews/news/src/nsNntpIncomingServer.cpp">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/components/shell/nsMailGNOMEIntegration.cpp</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/components/shell/nsMailGNOMEIntegration.cpp</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -292,17 +292,17 @@ nsMailGNOMEIntegration::MakeDefault(cons</span>
<a href="#l1.4"></a><span id="l1.4">       mozilla::services::GetStringBundleService();</span>
<a href="#l1.5"></a><span id="l1.5">     NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l1.6"></a><span id="l1.6"> </span>
<a href="#l1.7"></a><span id="l1.7">     nsCOMPtr&lt;nsIStringBundle&gt; brandBundle;</span>
<a href="#l1.8"></a><span id="l1.8">     rv = bundleService-&gt;CreateBundle(BRAND_PROPERTIES, getter_AddRefs(brandBundle));</span>
<a href="#l1.9"></a><span id="l1.9">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11">     nsString brandShortName;</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-    brandBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;brandShortName&quot;).get(),</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    brandBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;brandShortName&quot;),</span>
<a href="#l1.14"></a><span id="l1.14">                                    getter_Copies(brandShortName));</span>
<a href="#l1.15"></a><span id="l1.15"> </span>
<a href="#l1.16"></a><span id="l1.16">     // use brandShortName as the application id.</span>
<a href="#l1.17"></a><span id="l1.17">     NS_ConvertUTF16toUTF8 id(brandShortName);</span>
<a href="#l1.18"></a><span id="l1.18"> </span>
<a href="#l1.19"></a><span id="l1.19">     nsCOMPtr&lt;nsIGIOMimeApp&gt; app;</span>
<a href="#l1.20"></a><span id="l1.20">     rv = giovfs-&gt;CreateAppFromCommand(mAppPath, id, getter_AddRefs(app));</span>
<a href="#l1.21"></a><span id="l1.21">     NS_ENSURE_SUCCESS(rv, rv);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbCardProperty.cpp</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbCardProperty.cpp</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -680,29 +680,29 @@ nsresult nsAbCardProperty::ConvertToEsca</span>
<a href="#l2.4"></a><span id="l2.4">     if (NS_SUCCEEDED(rv) &amp;&amp; !str.IsEmpty())</span>
<a href="#l2.5"></a><span id="l2.5">     {</span>
<a href="#l2.6"></a><span id="l2.6">         myAddPropValue(vObj, VCNoteProp, str.get(), &amp;vCardHasData);</span>
<a href="#l2.7"></a><span id="l2.7">     }</span>
<a href="#l2.8"></a><span id="l2.8"> </span>
<a href="#l2.9"></a><span id="l2.9">     uint32_t format;</span>
<a href="#l2.10"></a><span id="l2.10">     rv = GetPropertyAsUint32(kPreferMailFormatProperty, &amp;format);</span>
<a href="#l2.11"></a><span id="l2.11">     if (NS_SUCCEEDED(rv) &amp;&amp; format == nsIAbPreferMailFormat::html) {</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-        myAddPropValue(vObj, VCUseHTML, NS_LITERAL_STRING(&quot;TRUE&quot;).get(), &amp;vCardHasData);</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+        myAddPropValue(vObj, VCUseHTML, MOZ_UTF16(&quot;TRUE&quot;), &amp;vCardHasData);</span>
<a href="#l2.14"></a><span id="l2.14">     }</span>
<a href="#l2.15"></a><span id="l2.15">     else if (NS_SUCCEEDED(rv) &amp;&amp; format == nsIAbPreferMailFormat::plaintext) {</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-        myAddPropValue(vObj, VCUseHTML, NS_LITERAL_STRING(&quot;FALSE&quot;).get(), &amp;vCardHasData);</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineplus">+        myAddPropValue(vObj, VCUseHTML, MOZ_UTF16(&quot;FALSE&quot;), &amp;vCardHasData);</span>
<a href="#l2.18"></a><span id="l2.18">     }</span>
<a href="#l2.19"></a><span id="l2.19"> </span>
<a href="#l2.20"></a><span id="l2.20">     rv = GetPropertyAsAString(kWorkWebPageProperty, str);</span>
<a href="#l2.21"></a><span id="l2.21">     if (NS_SUCCEEDED(rv) &amp;&amp; !str.IsEmpty())</span>
<a href="#l2.22"></a><span id="l2.22">     {</span>
<a href="#l2.23"></a><span id="l2.23">         myAddPropValue(vObj, VCURLProp, str.get(), &amp;vCardHasData);</span>
<a href="#l2.24"></a><span id="l2.24">     }</span>
<a href="#l2.25"></a><span id="l2.25"> </span>
<a href="#l2.26"></a><span id="l2.26" class="difflineminus">-    myAddPropValue(vObj, VCVersionProp, NS_LITERAL_STRING(&quot;2.1&quot;).get(), nullptr);</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineplus">+    myAddPropValue(vObj, VCVersionProp, MOZ_UTF16(&quot;2.1&quot;), nullptr);</span>
<a href="#l2.28"></a><span id="l2.28"> </span>
<a href="#l2.29"></a><span id="l2.29">     if (!vCardHasData) {</span>
<a href="#l2.30"></a><span id="l2.30">         aResult.Truncate();</span>
<a href="#l2.31"></a><span id="l2.31">         return NS_OK;</span>
<a href="#l2.32"></a><span id="l2.32">     }</span>
<a href="#l2.33"></a><span id="l2.33"> </span>
<a href="#l2.34"></a><span id="l2.34">     int len = 0;</span>
<a href="#l2.35"></a><span id="l2.35">     char *vCard = writeMemVObject(0, &amp;len, vObj);</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineat">@@ -727,17 +727,17 @@ nsresult nsAbCardProperty::ConvertToBase</span>
<a href="#l2.37"></a><span id="l2.37">   // Get Address Book string and set it as title of XML document</span>
<a href="#l2.38"></a><span id="l2.38">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l2.39"></a><span id="l2.39">   nsCOMPtr&lt;nsIStringBundleService&gt; stringBundleService =</span>
<a href="#l2.40"></a><span id="l2.40">     mozilla::services::GetStringBundleService();</span>
<a href="#l2.41"></a><span id="l2.41">   if (stringBundleService) {</span>
<a href="#l2.42"></a><span id="l2.42">     rv = stringBundleService-&gt;CreateBundle(sAddrbookProperties, getter_AddRefs(bundle));</span>
<a href="#l2.43"></a><span id="l2.43">     if (NS_SUCCEEDED(rv)) {</span>
<a href="#l2.44"></a><span id="l2.44">       nsString addrBook;</span>
<a href="#l2.45"></a><span id="l2.45" class="difflineminus">-      rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;addressBook&quot;).get(), getter_Copies(addrBook));</span>
<a href="#l2.46"></a><span id="l2.46" class="difflineplus">+      rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;addressBook&quot;), getter_Copies(addrBook));</span>
<a href="#l2.47"></a><span id="l2.47">       if (NS_SUCCEEDED(rv)) {</span>
<a href="#l2.48"></a><span id="l2.48">         xmlStr.AppendLiteral(&quot;&lt;title xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&quot;);</span>
<a href="#l2.49"></a><span id="l2.49">         xmlStr.Append(addrBook);</span>
<a href="#l2.50"></a><span id="l2.50">         xmlStr.AppendLiteral(&quot;&lt;/title&gt;\n&quot;);</span>
<a href="#l2.51"></a><span id="l2.51">       }</span>
<a href="#l2.52"></a><span id="l2.52">     }</span>
<a href="#l2.53"></a><span id="l2.53">   }</span>
<a href="#l2.54"></a><span id="l2.54"> </span>
<a href="#l2.55"></a><span id="l2.55" class="difflineat">@@ -819,17 +819,17 @@ nsresult nsAbCardProperty::ConvertToXMLP</span>
<a href="#l2.56"></a><span id="l2.56">   }</span>
<a href="#l2.57"></a><span id="l2.57">   else {</span>
<a href="#l2.58"></a><span id="l2.58">     rv = AppendSection(CUSTOM_ATTRS_ARRAY, sizeof(CUSTOM_ATTRS_ARRAY)/sizeof(AppendItem), NS_LITERAL_STRING(&quot;headingDescription&quot;),</span>
<a href="#l2.59"></a><span id="l2.59">          bundle, conv, xmlStr);</span>
<a href="#l2.60"></a><span id="l2.60"> </span>
<a href="#l2.61"></a><span id="l2.61">     xmlStr.AppendLiteral(&quot;&lt;section&gt;&lt;sectiontitle&gt;&quot;);</span>
<a href="#l2.62"></a><span id="l2.62"> </span>
<a href="#l2.63"></a><span id="l2.63">     nsString headingAddresses;</span>
<a href="#l2.64"></a><span id="l2.64" class="difflineminus">-    rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;headingAddresses&quot;).get(), getter_Copies(headingAddresses));</span>
<a href="#l2.65"></a><span id="l2.65" class="difflineplus">+    rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;headingAddresses&quot;), getter_Copies(headingAddresses));</span>
<a href="#l2.66"></a><span id="l2.66">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l2.67"></a><span id="l2.67"> </span>
<a href="#l2.68"></a><span id="l2.68">     xmlStr.Append(headingAddresses);</span>
<a href="#l2.69"></a><span id="l2.69">     xmlStr.AppendLiteral(&quot;&lt;/sectiontitle&gt;&quot;);</span>
<a href="#l2.70"></a><span id="l2.70"> </span>
<a href="#l2.71"></a><span id="l2.71">     nsCOMPtr&lt;nsIAbManager&gt; abManager = do_GetService(NS_ABMANAGER_CONTRACTID, &amp;rv);</span>
<a href="#l2.72"></a><span id="l2.72">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l2.73"></a><span id="l2.73"> </span>
<a href="#l2.74"></a><span id="l2.74" class="difflineat">@@ -1041,28 +1041,28 @@ nsresult nsAbCardProperty::AppendCitySta</span>
<a href="#l2.75"></a><span id="l2.75"> </span>
<a href="#l2.76"></a><span id="l2.76">   rv = AppendLine(item, aConv, zipResult);</span>
<a href="#l2.77"></a><span id="l2.77">   NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l2.78"></a><span id="l2.78"> </span>
<a href="#l2.79"></a><span id="l2.79">   nsString formattedString;</span>
<a href="#l2.80"></a><span id="l2.80"> </span>
<a href="#l2.81"></a><span id="l2.81">   if (!cityResult.IsEmpty() &amp;&amp; !stateResult.IsEmpty() &amp;&amp; !zipResult.IsEmpty()) {</span>
<a href="#l2.82"></a><span id="l2.82">     const PRUnichar *formatStrings[] = { cityResult.get(), stateResult.get(), zipResult.get() };</span>
<a href="#l2.83"></a><span id="l2.83" class="difflineminus">-    rv = aBundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;cityAndStateAndZip&quot;).get(), formatStrings, ArrayLength(formatStrings), getter_Copies(formattedString));</span>
<a href="#l2.84"></a><span id="l2.84" class="difflineplus">+    rv = aBundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;cityAndStateAndZip&quot;), formatStrings, ArrayLength(formatStrings), getter_Copies(formattedString));</span>
<a href="#l2.85"></a><span id="l2.85">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l2.86"></a><span id="l2.86">   }</span>
<a href="#l2.87"></a><span id="l2.87">   else if (!cityResult.IsEmpty() &amp;&amp; !stateResult.IsEmpty() &amp;&amp; zipResult.IsEmpty()) {</span>
<a href="#l2.88"></a><span id="l2.88">     const PRUnichar *formatStrings[] = { cityResult.get(), stateResult.get() };</span>
<a href="#l2.89"></a><span id="l2.89" class="difflineminus">-    rv = aBundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;cityAndStateNoZip&quot;).get(), formatStrings, ArrayLength(formatStrings), getter_Copies(formattedString));</span>
<a href="#l2.90"></a><span id="l2.90" class="difflineplus">+    rv = aBundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;cityAndStateNoZip&quot;), formatStrings, ArrayLength(formatStrings), getter_Copies(formattedString));</span>
<a href="#l2.91"></a><span id="l2.91">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l2.92"></a><span id="l2.92">   }</span>
<a href="#l2.93"></a><span id="l2.93">   else if ((!cityResult.IsEmpty() &amp;&amp; stateResult.IsEmpty() &amp;&amp; !zipResult.IsEmpty()) ||</span>
<a href="#l2.94"></a><span id="l2.94">           (cityResult.IsEmpty() &amp;&amp; !stateResult.IsEmpty() &amp;&amp; !zipResult.IsEmpty())) {</span>
<a href="#l2.95"></a><span id="l2.95">     const PRUnichar *formatStrings[] = { cityResult.IsEmpty() ? stateResult.get() : cityResult.get(), zipResult.get() };</span>
<a href="#l2.96"></a><span id="l2.96" class="difflineminus">-    rv = aBundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;cityOrStateAndZip&quot;).get(), formatStrings, ArrayLength(formatStrings), getter_Copies(formattedString));</span>
<a href="#l2.97"></a><span id="l2.97" class="difflineplus">+    rv = aBundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;cityOrStateAndZip&quot;), formatStrings, ArrayLength(formatStrings), getter_Copies(formattedString));</span>
<a href="#l2.98"></a><span id="l2.98">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l2.99"></a><span id="l2.99">   }</span>
<a href="#l2.100"></a><span id="l2.100">   else {</span>
<a href="#l2.101"></a><span id="l2.101">     if (!cityResult.IsEmpty())</span>
<a href="#l2.102"></a><span id="l2.102">       formattedString = cityResult;</span>
<a href="#l2.103"></a><span id="l2.103">     else if (!stateResult.IsEmpty())</span>
<a href="#l2.104"></a><span id="l2.104">       formattedString = stateResult;</span>
<a href="#l2.105"></a><span id="l2.105">     else</span>
<a href="#l2.106"></a><span id="l2.106" class="difflineat">@@ -1106,23 +1106,23 @@ NS_IMETHODIMP nsAbCardProperty::Generate</span>
<a href="#l2.107"></a><span id="l2.107">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l2.108"></a><span id="l2.108">     }</span>
<a href="#l2.109"></a><span id="l2.109"> </span>
<a href="#l2.110"></a><span id="l2.110">     nsString result;</span>
<a href="#l2.111"></a><span id="l2.111"> </span>
<a href="#l2.112"></a><span id="l2.112">     if (aGenerateFormat == GENERATE_LAST_FIRST_ORDER) {</span>
<a href="#l2.113"></a><span id="l2.113">       const PRUnichar *stringParams[2] = {lastName.get(), firstName.get()};</span>
<a href="#l2.114"></a><span id="l2.114"> </span>
<a href="#l2.115"></a><span id="l2.115" class="difflineminus">-      rv = bundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;lastFirstFormat&quot;).get(),</span>
<a href="#l2.116"></a><span id="l2.116" class="difflineplus">+      rv = bundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;lastFirstFormat&quot;),</span>
<a href="#l2.117"></a><span id="l2.117">                                         stringParams, 2, getter_Copies(result));</span>
<a href="#l2.118"></a><span id="l2.118">     }</span>
<a href="#l2.119"></a><span id="l2.119">     else {</span>
<a href="#l2.120"></a><span id="l2.120">       const PRUnichar *stringParams[2] = {firstName.get(), lastName.get()};</span>
<a href="#l2.121"></a><span id="l2.121" class="difflineminus">-        </span>
<a href="#l2.122"></a><span id="l2.122" class="difflineminus">-      rv = bundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;firstLastFormat&quot;).get(),</span>
<a href="#l2.123"></a><span id="l2.123" class="difflineplus">+</span>
<a href="#l2.124"></a><span id="l2.124" class="difflineplus">+      rv = bundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;firstLastFormat&quot;),</span>
<a href="#l2.125"></a><span id="l2.125">                                         stringParams, 2, getter_Copies(result));</span>
<a href="#l2.126"></a><span id="l2.126">     }</span>
<a href="#l2.127"></a><span id="l2.127">     NS_ENSURE_SUCCESS(rv, rv); </span>
<a href="#l2.128"></a><span id="l2.128"> </span>
<a href="#l2.129"></a><span id="l2.129">     aResult.Assign(result);</span>
<a href="#l2.130"></a><span id="l2.130">   }</span>
<a href="#l2.131"></a><span id="l2.131"> </span>
<a href="#l2.132"></a><span id="l2.132">   if (aResult.IsEmpty())</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -256,22 +256,22 @@ nsresult nsAbLDAPProcessChangeLogData::G</span>
<a href="#l3.4"></a><span id="l3.4">       mozilla::services::GetStringBundleService();</span>
<a href="#l3.5"></a><span id="l3.5">     NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l3.6"></a><span id="l3.6">     nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l3.7"></a><span id="l3.7">     rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/addressbook/addressBook.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l3.8"></a><span id="l3.8">     if (NS_FAILED (rv)) </span>
<a href="#l3.9"></a><span id="l3.9">         return rv ;</span>
<a href="#l3.10"></a><span id="l3.10"> </span>
<a href="#l3.11"></a><span id="l3.11">     nsString title;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-    rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;AuthDlgTitle&quot;).get(), getter_Copies(title));</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+    rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;AuthDlgTitle&quot;), getter_Copies(title));</span>
<a href="#l3.14"></a><span id="l3.14">     if (NS_FAILED (rv)) </span>
<a href="#l3.15"></a><span id="l3.15">         return rv ;</span>
<a href="#l3.16"></a><span id="l3.16"> </span>
<a href="#l3.17"></a><span id="l3.17">     nsString desc;</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineminus">-    rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;AuthDlgDesc&quot;).get(), getter_Copies(desc));</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+    rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;AuthDlgDesc&quot;), getter_Copies(desc));</span>
<a href="#l3.20"></a><span id="l3.20">     if (NS_FAILED (rv)) </span>
<a href="#l3.21"></a><span id="l3.21">         return rv ;</span>
<a href="#l3.22"></a><span id="l3.22"> </span>
<a href="#l3.23"></a><span id="l3.23">     nsString username;</span>
<a href="#l3.24"></a><span id="l3.24">     nsString password;</span>
<a href="#l3.25"></a><span id="l3.25">     bool btnResult = false;</span>
<a href="#l3.26"></a><span id="l3.26"> 	rv = dialog-&gt;PromptUsernameAndPassword(title, desc, </span>
<a href="#l3.27"></a><span id="l3.27">                                             NS_ConvertUTF8toUTF16(serverUri).get(), </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbLDAPDirectory.cpp</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbLDAPDirectory.cpp</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -251,18 +251,18 @@ NS_IMETHODIMP nsAbLDAPDirectory::SetLDAP</span>
<a href="#l4.4"></a><span id="l4.4">   {</span>
<a href="#l4.5"></a><span id="l4.5">     // They don't so its time to send round an update.</span>
<a href="#l4.6"></a><span id="l4.6">     nsCOMPtr&lt;nsIAbManager&gt; abManager = do_GetService(NS_ABMANAGER_CONTRACTID, &amp;rv);</span>
<a href="#l4.7"></a><span id="l4.7">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l4.8"></a><span id="l4.8"> </span>
<a href="#l4.9"></a><span id="l4.9">     // We inherit from nsIAbDirectory, so this static cast should be safe.</span>
<a href="#l4.10"></a><span id="l4.10">     abManager-&gt;NotifyItemPropertyChanged(static_cast&lt;nsIAbDirectory*&gt;(this),</span>
<a href="#l4.11"></a><span id="l4.11">       &quot;IsSecure&quot;,</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-      (newIsNotSecure ? NS_LITERAL_STRING(&quot;true&quot;) : NS_LITERAL_STRING(&quot;false&quot;)).get(),</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-      (newIsNotSecure ? NS_LITERAL_STRING(&quot;false&quot;) : NS_LITERAL_STRING(&quot;true&quot;)).get());</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+      (newIsNotSecure ? MOZ_UTF16(&quot;true&quot;) : MOZ_UTF16(&quot;false&quot;)),</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+      (newIsNotSecure ? MOZ_UTF16(&quot;false&quot;) : MOZ_UTF16(&quot;true&quot;)));</span>
<a href="#l4.16"></a><span id="l4.16">   }</span>
<a href="#l4.17"></a><span id="l4.17"> </span>
<a href="#l4.18"></a><span id="l4.18">   return NS_OK;</span>
<a href="#l4.19"></a><span id="l4.19"> }</span>
<a href="#l4.20"></a><span id="l4.20"> </span>
<a href="#l4.21"></a><span id="l4.21"> /* </span>
<a href="#l4.22"></a><span id="l4.22">  *</span>
<a href="#l4.23"></a><span id="l4.23">  * nsIAbDirectorySearch methods</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbLDAPListenerBase.cpp</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbLDAPListenerBase.cpp</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -95,17 +95,17 @@ NS_IMETHODIMP nsAbLDAPListenerBase::OnLD</span>
<a href="#l5.4"></a><span id="l5.4">                &quot;bundle chrome://mozldap/locale/ldap.properties&quot;);</span>
<a href="#l5.5"></a><span id="l5.5">       InitFailed();</span>
<a href="#l5.6"></a><span id="l5.6">       return rv;</span>
<a href="#l5.7"></a><span id="l5.7">     }</span>
<a href="#l5.8"></a><span id="l5.8"> </span>
<a href="#l5.9"></a><span id="l5.9">     // get the title for the authentication prompt</span>
<a href="#l5.10"></a><span id="l5.10">     //</span>
<a href="#l5.11"></a><span id="l5.11">     nsString authPromptTitle;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-    rv = ldapBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;authPromptTitle&quot;).get(),</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+    rv = ldapBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;authPromptTitle&quot;),</span>
<a href="#l5.14"></a><span id="l5.14">                                        getter_Copies(authPromptTitle));</span>
<a href="#l5.15"></a><span id="l5.15">     if (NS_FAILED(rv))</span>
<a href="#l5.16"></a><span id="l5.16">     {</span>
<a href="#l5.17"></a><span id="l5.17">       NS_ERROR(&quot;nsAbLDAPListenerBase::OnLDAPInit(): error getting&quot;</span>
<a href="#l5.18"></a><span id="l5.18">                &quot;'authPromptTitle' string from bundle &quot;</span>
<a href="#l5.19"></a><span id="l5.19">                &quot;chrome://mozldap/locale/ldap.properties&quot;);</span>
<a href="#l5.20"></a><span id="l5.20">       InitFailed();</span>
<a href="#l5.21"></a><span id="l5.21">       return rv;</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineat">@@ -128,17 +128,17 @@ NS_IMETHODIMP nsAbLDAPListenerBase::OnLD</span>
<a href="#l5.23"></a><span id="l5.23">     // which is the default compiler for Mozilla on linux at the moment.</span>
<a href="#l5.24"></a><span id="l5.24">     //</span>
<a href="#l5.25"></a><span id="l5.25">     NS_ConvertASCIItoUTF16 hostTemp(host);</span>
<a href="#l5.26"></a><span id="l5.26">     const PRUnichar *hostArray[1] = { hostTemp.get() };</span>
<a href="#l5.27"></a><span id="l5.27"> </span>
<a href="#l5.28"></a><span id="l5.28">     // format the hostname into the authprompt text string</span>
<a href="#l5.29"></a><span id="l5.29">     //</span>
<a href="#l5.30"></a><span id="l5.30">     nsString authPromptText;</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">-    rv = ldapBundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;authPromptText&quot;).get(),</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+    rv = ldapBundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;authPromptText&quot;),</span>
<a href="#l5.33"></a><span id="l5.33">                                           hostArray,</span>
<a href="#l5.34"></a><span id="l5.34">                                           sizeof(hostArray) / sizeof(const PRUnichar *),</span>
<a href="#l5.35"></a><span id="l5.35">                                           getter_Copies(authPromptText));</span>
<a href="#l5.36"></a><span id="l5.36">     if (NS_FAILED(rv))</span>
<a href="#l5.37"></a><span id="l5.37">     {</span>
<a href="#l5.38"></a><span id="l5.38">       NS_ERROR(&quot;nsAbLDAPListenerBase::OnLDAPInit():&quot;</span>
<a href="#l5.39"></a><span id="l5.39">                &quot;error getting 'authPromptText' string from bundle &quot;</span>
<a href="#l5.40"></a><span id="l5.40">                &quot;chrome://mozldap/locale/ldap.properties&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbManager.cpp</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbManager.cpp</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -504,36 +504,36 @@ NS_IMETHODIMP nsAbManager::ExportAddress</span>
<a href="#l6.4"></a><span id="l6.4">   nsCOMPtr&lt;nsIStringBundleService&gt; bundleService =</span>
<a href="#l6.5"></a><span id="l6.5">     mozilla::services::GetStringBundleService();</span>
<a href="#l6.6"></a><span id="l6.6">   NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l6.7"></a><span id="l6.7">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l6.8"></a><span id="l6.8">   rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/addressbook/addressBook.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l6.9"></a><span id="l6.9">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l6.10"></a><span id="l6.10"> </span>
<a href="#l6.11"></a><span id="l6.11">   nsString title;</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-  rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;ExportAddressBookTitle&quot;).get(), getter_Copies(title));</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+  rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;ExportAddressBookTitle&quot;), getter_Copies(title));</span>
<a href="#l6.14"></a><span id="l6.14">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l6.15"></a><span id="l6.15"> </span>
<a href="#l6.16"></a><span id="l6.16">   rv = filePicker-&gt;Init(aParentWin, title, nsIFilePicker::modeSave);</span>
<a href="#l6.17"></a><span id="l6.17">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l6.18"></a><span id="l6.18"> </span>
<a href="#l6.19"></a><span id="l6.19">   nsString filterString;</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineminus">-  rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;LDIFFiles&quot;).get(), getter_Copies(filterString));</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineplus">+  rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;LDIFFiles&quot;), getter_Copies(filterString));</span>
<a href="#l6.22"></a><span id="l6.22">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l6.23"></a><span id="l6.23"> </span>
<a href="#l6.24"></a><span id="l6.24">   rv = filePicker-&gt;AppendFilter(filterString, NS_LITERAL_STRING(&quot;*.ldi; *.ldif&quot;));</span>
<a href="#l6.25"></a><span id="l6.25">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l6.26"></a><span id="l6.26"> </span>
<a href="#l6.27"></a><span id="l6.27" class="difflineminus">-  rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;CSVFiles&quot;).get(), getter_Copies(filterString));</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineplus">+  rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;CSVFiles&quot;), getter_Copies(filterString));</span>
<a href="#l6.29"></a><span id="l6.29">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l6.30"></a><span id="l6.30"> </span>
<a href="#l6.31"></a><span id="l6.31">   rv = filePicker-&gt;AppendFilter(filterString, NS_LITERAL_STRING(&quot;*.csv&quot;));</span>
<a href="#l6.32"></a><span id="l6.32">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l6.33"></a><span id="l6.33"> </span>
<a href="#l6.34"></a><span id="l6.34" class="difflineminus">-  rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;TABFiles&quot;).get(), getter_Copies(filterString));</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineplus">+  rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;TABFiles&quot;), getter_Copies(filterString));</span>
<a href="#l6.36"></a><span id="l6.36">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l6.37"></a><span id="l6.37"> </span>
<a href="#l6.38"></a><span id="l6.38">   rv = filePicker-&gt;AppendFilter(filterString, NS_LITERAL_STRING(&quot;*.tab; *.txt&quot;));</span>
<a href="#l6.39"></a><span id="l6.39">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l6.40"></a><span id="l6.40"> </span>
<a href="#l6.41"></a><span id="l6.41">   int16_t dialogResult;</span>
<a href="#l6.42"></a><span id="l6.42">   filePicker-&gt;Show(&amp;dialogResult);</span>
<a href="#l6.43"></a><span id="l6.43"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbView.cpp</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbView.cpp</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -409,17 +409,17 @@ nsresult nsAbView::GetCardValue(nsIAbCar</span>
<a href="#l7.4"></a><span id="l7.4">   // else, standard column (like PrimaryEmail and _AimScreenName)</span>
<a href="#l7.5"></a><span id="l7.5">   if (colID[0] == PRUnichar('G'))</span>
<a href="#l7.6"></a><span id="l7.6">     return card-&gt;GenerateName(mGeneratedNameFormat, mABBundle, _retval);</span>
<a href="#l7.7"></a><span id="l7.7"> </span>
<a href="#l7.8"></a><span id="l7.8">   if (colID[0] == PRUnichar('_') &amp;&amp; colID[1] == PRUnichar('P'))</span>
<a href="#l7.9"></a><span id="l7.9">     // Use LN/FN order for the phonetic name</span>
<a href="#l7.10"></a><span id="l7.10">     return card-&gt;GeneratePhoneticName(true, _retval);</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-  if (!NS_strcmp(colID, NS_LITERAL_STRING(&quot;ChatName&quot;).get()))</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+  if (!NS_strcmp(colID, MOZ_UTF16(&quot;ChatName&quot;)))</span>
<a href="#l7.14"></a><span id="l7.14">     return card-&gt;GenerateChatName(_retval);</span>
<a href="#l7.15"></a><span id="l7.15"> </span>
<a href="#l7.16"></a><span id="l7.16">   nsresult rv = card-&gt;GetPropertyAsAString(NS_ConvertUTF16toUTF8(colID).get(), _retval);</span>
<a href="#l7.17"></a><span id="l7.17">   if (rv == NS_ERROR_NOT_AVAILABLE) {</span>
<a href="#l7.18"></a><span id="l7.18">     rv = NS_OK;</span>
<a href="#l7.19"></a><span id="l7.19">     _retval.Truncate();</span>
<a href="#l7.20"></a><span id="l7.20">   }</span>
<a href="#l7.21"></a><span id="l7.21">   return rv;</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineat">@@ -604,17 +604,17 @@ inplaceSortCallback(const void *data1, c</span>
<a href="#l7.23"></a><span id="l7.23">       return closure-&gt;abView-&gt;CompareCollationKeys(card1-&gt;secondaryCollationKey,card1-&gt;secondaryCollationKeyLen,card2-&gt;secondaryCollationKey,card2-&gt;secondaryCollationKeyLen) * (closure-&gt;factor);</span>
<a href="#l7.24"></a><span id="l7.24">   }</span>
<a href="#l7.25"></a><span id="l7.25"> }</span>
<a href="#l7.26"></a><span id="l7.26"> </span>
<a href="#l7.27"></a><span id="l7.27"> static void SetSortClosure(const PRUnichar *sortColumn, const PRUnichar *sortDirection, nsAbView *abView, SortClosure *closure)</span>
<a href="#l7.28"></a><span id="l7.28"> {</span>
<a href="#l7.29"></a><span id="l7.29">   closure-&gt;colID = sortColumn;</span>
<a href="#l7.30"></a><span id="l7.30">   </span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-  if (sortDirection &amp;&amp; !NS_strcmp(sortDirection, NS_LITERAL_STRING(&quot;descending&quot;).get()))</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+  if (sortDirection &amp;&amp; !NS_strcmp(sortDirection, MOZ_UTF16(&quot;descending&quot;)))</span>
<a href="#l7.33"></a><span id="l7.33">     closure-&gt;factor = DESCENDING_SORT_FACTOR;</span>
<a href="#l7.34"></a><span id="l7.34">   else </span>
<a href="#l7.35"></a><span id="l7.35">     closure-&gt;factor = ASCENDING_SORT_FACTOR;</span>
<a href="#l7.36"></a><span id="l7.36"> </span>
<a href="#l7.37"></a><span id="l7.37">   closure-&gt;abView = abView;</span>
<a href="#l7.38"></a><span id="l7.38">   return;</span>
<a href="#l7.39"></a><span id="l7.39"> }</span>
<a href="#l7.40"></a><span id="l7.40"> </span>
<a href="#l7.41"></a><span id="l7.41" class="difflineat">@@ -659,17 +659,17 @@ NS_IMETHODIMP nsAbView::SortBy(const PRU</span>
<a href="#l7.42"></a><span id="l7.42">       AbCard *abcard = (AbCard *)(mCards.ElementAt(i));</span>
<a href="#l7.43"></a><span id="l7.43"> </span>
<a href="#l7.44"></a><span id="l7.44">       rv = GenerateCollationKeysForCard(sortColumn.get(), abcard);</span>
<a href="#l7.45"></a><span id="l7.45">       NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l7.46"></a><span id="l7.46">     }</span>
<a href="#l7.47"></a><span id="l7.47"> </span>
<a href="#l7.48"></a><span id="l7.48">     nsAutoString sortDirection;</span>
<a href="#l7.49"></a><span id="l7.49">     if (!sortDir)</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineminus">-      sortDirection = NS_LITERAL_STRING(&quot;ascending&quot;).get();  // default direction</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineplus">+      sortDirection = NS_LITERAL_STRING(&quot;ascending&quot;);  // default direction</span>
<a href="#l7.52"></a><span id="l7.52">     else</span>
<a href="#l7.53"></a><span id="l7.53">       sortDirection = sortDir;</span>
<a href="#l7.54"></a><span id="l7.54"> </span>
<a href="#l7.55"></a><span id="l7.55">     SortClosure closure;</span>
<a href="#l7.56"></a><span id="l7.56">     SetSortClosure(sortColumn.get(), sortDirection.get(), this, &amp;closure);</span>
<a href="#l7.57"></a><span id="l7.57">     </span>
<a href="#l7.58"></a><span id="l7.58">     nsCOMPtr&lt;nsIMutableArray&gt; selectedCards = do_CreateInstance(NS_ARRAY_CONTRACTID, &amp;rv);</span>
<a href="#l7.59"></a><span id="l7.59">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l7.60"></a><span id="l7.60" class="difflineat">@@ -1205,18 +1205,18 @@ NS_IMETHODIMP nsAbView::SwapFirstNameLas</span>
<a href="#l7.61"></a><span id="l7.61">           {</span>
<a href="#l7.62"></a><span id="l7.62">             nsString dnLnFn;</span>
<a href="#l7.63"></a><span id="l7.63">             nsString dnFnLn;</span>
<a href="#l7.64"></a><span id="l7.64">             const PRUnichar *nameString[2];</span>
<a href="#l7.65"></a><span id="l7.65">             const PRUnichar *formatString;</span>
<a href="#l7.66"></a><span id="l7.66"> </span>
<a href="#l7.67"></a><span id="l7.67">             // The format should stays the same before/after we swap the names</span>
<a href="#l7.68"></a><span id="l7.68">             formatString = displayNameLastnamefirst ?</span>
<a href="#l7.69"></a><span id="l7.69" class="difflineminus">-                              NS_LITERAL_STRING(&quot;lastFirstFormat&quot;).get() :</span>
<a href="#l7.70"></a><span id="l7.70" class="difflineminus">-                              NS_LITERAL_STRING(&quot;firstLastFormat&quot;).get();</span>
<a href="#l7.71"></a><span id="l7.71" class="difflineplus">+                              MOZ_UTF16(&quot;lastFirstFormat&quot;) :</span>
<a href="#l7.72"></a><span id="l7.72" class="difflineplus">+                              MOZ_UTF16(&quot;firstLastFormat&quot;);</span>
<a href="#l7.73"></a><span id="l7.73"> </span>
<a href="#l7.74"></a><span id="l7.74">             // Generate both ln/fn and fn/ln combination since we need both later</span>
<a href="#l7.75"></a><span id="l7.75">             // to check to see if the current display name was edited</span>
<a href="#l7.76"></a><span id="l7.76">             // note that fn/ln still hold the values before the swap</span>
<a href="#l7.77"></a><span id="l7.77">             nameString[0] = ln.get();</span>
<a href="#l7.78"></a><span id="l7.78">             nameString[1] = fn.get();</span>
<a href="#l7.79"></a><span id="l7.79">             rv = bundle-&gt;FormatStringFromName(formatString,</span>
<a href="#l7.80"></a><span id="l7.80">                                               nameString, 2, getter_Copies(dnLnFn));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAddbookProtocolHandler.cpp</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAddbookProtocolHandler.cpp</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -235,17 +235,17 @@ nsAddbookProtocolHandler::BuildDirectory</span>
<a href="#l8.4"></a><span id="l8.4">   // Get Address Book string and set it as title of XML document</span>
<a href="#l8.5"></a><span id="l8.5">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l8.6"></a><span id="l8.6">   nsCOMPtr&lt;nsIStringBundleService&gt; stringBundleService =</span>
<a href="#l8.7"></a><span id="l8.7">     mozilla::services::GetStringBundleService();</span>
<a href="#l8.8"></a><span id="l8.8">   if (stringBundleService) {</span>
<a href="#l8.9"></a><span id="l8.9">     rv = stringBundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/addressbook/addressBook.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l8.10"></a><span id="l8.10">     if (NS_SUCCEEDED(rv)) {</span>
<a href="#l8.11"></a><span id="l8.11">       nsString addrBook;</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-      rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;addressBook&quot;).get(), getter_Copies(addrBook));</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+      rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;addressBook&quot;), getter_Copies(addrBook));</span>
<a href="#l8.14"></a><span id="l8.14">       if (NS_SUCCEEDED(rv)) {</span>
<a href="#l8.15"></a><span id="l8.15">         aOutput.AppendLiteral(&quot;&lt;title xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&quot;);</span>
<a href="#l8.16"></a><span id="l8.16">         aOutput.Append(addrBook);</span>
<a href="#l8.17"></a><span id="l8.17">         aOutput.AppendLiteral(&quot;&lt;/title&gt;\n&quot;);</span>
<a href="#l8.18"></a><span id="l8.18">       }</span>
<a href="#l8.19"></a><span id="l8.19">     }</span>
<a href="#l8.20"></a><span id="l8.20">   }</span>
<a href="#l8.21"></a><span id="l8.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAddrDatabase.cpp</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAddrDatabase.cpp</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -427,25 +427,25 @@ nsresult nsAddrDatabase::DisplayAlert(co</span>
<a href="#l9.4"></a><span id="l9.4">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l9.5"></a><span id="l9.5"> </span>
<a href="#l9.6"></a><span id="l9.6">   return prompter-&gt;Alert(nullptr /* we don't know the parent window */, alertTitle.get(), alertMessage.get());</span>
<a href="#l9.7"></a><span id="l9.7"> }</span>
<a href="#l9.8"></a><span id="l9.8"> </span>
<a href="#l9.9"></a><span id="l9.9"> nsresult nsAddrDatabase::AlertAboutCorruptMabFile(const PRUnichar *aOldFileName, const PRUnichar *aNewFileName)</span>
<a href="#l9.10"></a><span id="l9.10"> {</span>
<a href="#l9.11"></a><span id="l9.11">   const PRUnichar *formatStrings[] = { aOldFileName, aOldFileName, aNewFileName };</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-  return DisplayAlert(NS_LITERAL_STRING(&quot;corruptMabFileTitle&quot;).get(),</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineminus">-    NS_LITERAL_STRING(&quot;corruptMabFileAlert&quot;).get(), formatStrings, 3);</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineplus">+  return DisplayAlert(MOZ_UTF16(&quot;corruptMabFileTitle&quot;),</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineplus">+    MOZ_UTF16(&quot;corruptMabFileAlert&quot;), formatStrings, 3);</span>
<a href="#l9.16"></a><span id="l9.16"> }</span>
<a href="#l9.17"></a><span id="l9.17"> </span>
<a href="#l9.18"></a><span id="l9.18"> nsresult nsAddrDatabase::AlertAboutLockedMabFile(const PRUnichar *aFileName)</span>
<a href="#l9.19"></a><span id="l9.19"> {</span>
<a href="#l9.20"></a><span id="l9.20">   const PRUnichar *formatStrings[] = { aFileName };</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineminus">-  return DisplayAlert(NS_LITERAL_STRING(&quot;lockedMabFileTitle&quot;).get(),</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineminus">-    NS_LITERAL_STRING(&quot;lockedMabFileAlert&quot;).get(), formatStrings, 1);</span>
<a href="#l9.23"></a><span id="l9.23" class="difflineplus">+  return DisplayAlert(MOZ_UTF16(&quot;lockedMabFileTitle&quot;),</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineplus">+    MOZ_UTF16(&quot;lockedMabFileAlert&quot;), formatStrings, 1);</span>
<a href="#l9.25"></a><span id="l9.25"> }</span>
<a href="#l9.26"></a><span id="l9.26"> </span>
<a href="#l9.27"></a><span id="l9.27"> nsresult</span>
<a href="#l9.28"></a><span id="l9.28"> nsAddrDatabase::OpenInternal(nsIFile *aMabFile, bool aCreate, nsIAddrDatabase** pAddrDB)</span>
<a href="#l9.29"></a><span id="l9.29"> {</span>
<a href="#l9.30"></a><span id="l9.30">   nsAddrDatabase *pAddressBookDB = new nsAddrDatabase();</span>
<a href="#l9.31"></a><span id="l9.31">   if (!pAddressBookDB) {</span>
<a href="#l9.32"></a><span id="l9.32">     return NS_ERROR_OUT_OF_MEMORY;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mailnews/base/search/src/nsMsgFilter.cpp</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mailnews/base/search/src/nsMsgFilter.cpp</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -531,17 +531,17 @@ NS_IMETHODIMP nsMsgFilter::LogRuleHit(ns</span>
<a href="#l10.4"></a><span id="l10.4">     nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l10.5"></a><span id="l10.5">     rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/filter.properties&quot;,</span>
<a href="#l10.6"></a><span id="l10.6">       getter_AddRefs(bundle));</span>
<a href="#l10.7"></a><span id="l10.7">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l10.8"></a><span id="l10.8"> </span>
<a href="#l10.9"></a><span id="l10.9">     const PRUnichar *filterLogDetectFormatStrings[4] = { filterName.get(), authorValue.get(), subjectValue.get(), dateValue.get() };</span>
<a href="#l10.10"></a><span id="l10.10">     nsString filterLogDetectStr;</span>
<a href="#l10.11"></a><span id="l10.11">     rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-      NS_LITERAL_STRING(&quot;filterLogDetectStr&quot;).get(),</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+      MOZ_UTF16(&quot;filterLogDetectStr&quot;),</span>
<a href="#l10.14"></a><span id="l10.14">       filterLogDetectFormatStrings, 4,</span>
<a href="#l10.15"></a><span id="l10.15">       getter_Copies(filterLogDetectStr));</span>
<a href="#l10.16"></a><span id="l10.16">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l10.17"></a><span id="l10.17"> </span>
<a href="#l10.18"></a><span id="l10.18">     buffer += NS_ConvertUTF16toUTF8(filterLogDetectStr);</span>
<a href="#l10.19"></a><span id="l10.19">     buffer +=  &quot;\n&quot;;</span>
<a href="#l10.20"></a><span id="l10.20"> </span>
<a href="#l10.21"></a><span id="l10.21">     if (actionType == nsMsgFilterAction::MoveToFolder ||</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineat">@@ -554,34 +554,33 @@ NS_IMETHODIMP nsMsgFilter::LogRuleHit(ns</span>
<a href="#l10.23"></a><span id="l10.23">       nsCString msgId;</span>
<a href="#l10.24"></a><span id="l10.24">       aMsgHdr-&gt;GetMessageId(getter_Copies(msgId));</span>
<a href="#l10.25"></a><span id="l10.25">       NS_ConvertASCIItoUTF16 msgIdValue(msgId);</span>
<a href="#l10.26"></a><span id="l10.26"> </span>
<a href="#l10.27"></a><span id="l10.27">       const PRUnichar *logMoveFormatStrings[2] = { msgIdValue.get(), actionFolderUriValue.get() };</span>
<a href="#l10.28"></a><span id="l10.28">       nsString logMoveStr;</span>
<a href="#l10.29"></a><span id="l10.29">       rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l10.30"></a><span id="l10.30">         (actionType == nsMsgFilterAction::MoveToFolder) ?</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineminus">-          NS_LITERAL_STRING(&quot;logMoveStr&quot;).get() :</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineminus">-          NS_LITERAL_STRING(&quot;logCopyStr&quot;).get(),</span>
<a href="#l10.33"></a><span id="l10.33" class="difflineplus">+          MOZ_UTF16(&quot;logMoveStr&quot;) : MOZ_UTF16(&quot;logCopyStr&quot;),</span>
<a href="#l10.34"></a><span id="l10.34">         logMoveFormatStrings, 2,</span>
<a href="#l10.35"></a><span id="l10.35">         getter_Copies(logMoveStr));</span>
<a href="#l10.36"></a><span id="l10.36">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l10.37"></a><span id="l10.37"> </span>
<a href="#l10.38"></a><span id="l10.38">       buffer += NS_ConvertUTF16toUTF8(logMoveStr);</span>
<a href="#l10.39"></a><span id="l10.39">     }</span>
<a href="#l10.40"></a><span id="l10.40">     else if (actionType == nsMsgFilterAction::Custom)</span>
<a href="#l10.41"></a><span id="l10.41">     {</span>
<a href="#l10.42"></a><span id="l10.42">       nsCOMPtr&lt;nsIMsgFilterCustomAction&gt; customAction;</span>
<a href="#l10.43"></a><span id="l10.43">       nsAutoString filterActionName;</span>
<a href="#l10.44"></a><span id="l10.44">       rv = aFilterAction-&gt;GetCustomAction(getter_AddRefs(customAction));</span>
<a href="#l10.45"></a><span id="l10.45">       if (NS_SUCCEEDED(rv) &amp;&amp; customAction)</span>
<a href="#l10.46"></a><span id="l10.46">         customAction-&gt;GetName(filterActionName);</span>
<a href="#l10.47"></a><span id="l10.47">       if (filterActionName.IsEmpty())</span>
<a href="#l10.48"></a><span id="l10.48">         bundle-&gt;GetStringFromName(</span>
<a href="#l10.49"></a><span id="l10.49" class="difflineminus">-                  NS_LITERAL_STRING(&quot;filterMissingCustomAction&quot;).get(),</span>
<a href="#l10.50"></a><span id="l10.50" class="difflineplus">+                  MOZ_UTF16(&quot;filterMissingCustomAction&quot;),</span>
<a href="#l10.51"></a><span id="l10.51">                   getter_Copies(filterActionName));</span>
<a href="#l10.52"></a><span id="l10.52">       buffer += NS_ConvertUTF16toUTF8(filterActionName);</span>
<a href="#l10.53"></a><span id="l10.53">     }</span>
<a href="#l10.54"></a><span id="l10.54">     else</span>
<a href="#l10.55"></a><span id="l10.55">     {</span>
<a href="#l10.56"></a><span id="l10.56">       nsString actionValue;</span>
<a href="#l10.57"></a><span id="l10.57">       nsAutoString filterActionID;</span>
<a href="#l10.58"></a><span id="l10.58">       filterActionID = NS_LITERAL_STRING(&quot;filterAction&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mailnews/base/search/src/nsMsgFilterService.cpp</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mailnews/base/search/src/nsMsgFilterService.cpp</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -1054,17 +1054,17 @@ bool nsMsgFilterAfterTheFact::ContinueEx</span>
<a href="#l11.4"></a><span id="l11.4">   nsString filterName;</span>
<a href="#l11.5"></a><span id="l11.5">   m_curFilter-&gt;GetFilterName(filterName);</span>
<a href="#l11.6"></a><span id="l11.6">   nsString formatString;</span>
<a href="#l11.7"></a><span id="l11.7">   nsString confirmText;</span>
<a href="#l11.8"></a><span id="l11.8">   const PRUnichar *formatStrings[] =</span>
<a href="#l11.9"></a><span id="l11.9">   {</span>
<a href="#l11.10"></a><span id="l11.10">     filterName.get()</span>
<a href="#l11.11"></a><span id="l11.11">   };</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-  nsresult rv = bundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;continueFilterExecution&quot;).get(),</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+  nsresult rv = bundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;continueFilterExecution&quot;),</span>
<a href="#l11.14"></a><span id="l11.14">                                              formatStrings, 1, getter_Copies(confirmText));</span>
<a href="#l11.15"></a><span id="l11.15">   if (NS_FAILED(rv))</span>
<a href="#l11.16"></a><span id="l11.16">     return false;</span>
<a href="#l11.17"></a><span id="l11.17">   bool returnVal = false;</span>
<a href="#l11.18"></a><span id="l11.18">   (void) DisplayConfirmationPrompt(m_msgWindow, confirmText.get(), &amp;returnVal);</span>
<a href="#l11.19"></a><span id="l11.19">   return returnVal;</span>
<a href="#l11.20"></a><span id="l11.20"> }</span>
<a href="#l11.21"></a><span id="l11.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mailnews/base/search/src/nsMsgSearchAdapter.cpp</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mailnews/base/search/src/nsMsgSearchAdapter.cpp</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -149,17 +149,17 @@ NS_IMETHODIMP nsMsgSearchAdapter::AddHit</span>
<a href="#l12.4"></a><span id="l12.4"> </span>
<a href="#l12.5"></a><span id="l12.5"> </span>
<a href="#l12.6"></a><span id="l12.6"> char *</span>
<a href="#l12.7"></a><span id="l12.7"> nsMsgSearchAdapter::GetImapCharsetParam(const PRUnichar *destCharset)</span>
<a href="#l12.8"></a><span id="l12.8"> {</span>
<a href="#l12.9"></a><span id="l12.9">   char *result = nullptr;</span>
<a href="#l12.10"></a><span id="l12.10"> </span>
<a href="#l12.11"></a><span id="l12.11">   // Specify a character set unless we happen to be US-ASCII.</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-  if (NS_strcmp(destCharset, NS_LITERAL_STRING(&quot;us-ascii&quot;).get()))</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+  if (NS_strcmp(destCharset, MOZ_UTF16(&quot;us-ascii&quot;)))</span>
<a href="#l12.14"></a><span id="l12.14">       result = PR_smprintf(&quot;%s%s&quot;, nsMsgSearchAdapter::m_kImapCharset, NS_ConvertUTF16toUTF8(destCharset).get());</span>
<a href="#l12.15"></a><span id="l12.15"> </span>
<a href="#l12.16"></a><span id="l12.16">   return result;</span>
<a href="#l12.17"></a><span id="l12.17"> }</span>
<a href="#l12.18"></a><span id="l12.18"> </span>
<a href="#l12.19"></a><span id="l12.19"> /*</span>
<a href="#l12.20"></a><span id="l12.20">    09/21/2000 - taka@netscape.com</span>
<a href="#l12.21"></a><span id="l12.21">    This method is bogus. Escape must be done against char * not PRUnichar *</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mailnews/base/src/nsMessenger.cpp</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mailnews/base/src/nsMessenger.cpp</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -251,18 +251,18 @@ NS_IMETHODIMP nsMessenger::SetWindow(nsI</span>
<a href="#l13.4"></a><span id="l13.4"> </span>
<a href="#l13.5"></a><span id="l13.5">     nsCOMPtr&lt;nsIDocShellTreeItem&gt; rootDocShellAsItem;</span>
<a href="#l13.6"></a><span id="l13.6">     docShellAsItem-&gt;GetSameTypeRootTreeItem(getter_AddRefs(rootDocShellAsItem));</span>
<a href="#l13.7"></a><span id="l13.7"> </span>
<a href="#l13.8"></a><span id="l13.8">     nsCOMPtr&lt;nsIDocShellTreeNode&gt; rootDocShellAsNode(do_QueryInterface(rootDocShellAsItem));</span>
<a href="#l13.9"></a><span id="l13.9">     if (rootDocShellAsNode)</span>
<a href="#l13.10"></a><span id="l13.10">     {</span>
<a href="#l13.11"></a><span id="l13.11">       nsCOMPtr&lt;nsIDocShellTreeItem&gt; childAsItem;</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-      rv = rootDocShellAsNode-&gt;FindChildWithName(NS_LITERAL_STRING(&quot;messagepane&quot;).get(),</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineminus">-                                                 true, false, nullptr, nullptr, getter_AddRefs(childAsItem));</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+      rv = rootDocShellAsNode-&gt;FindChildWithName(MOZ_UTF16(&quot;messagepane&quot;), true, false,</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineplus">+                                                 nullptr, nullptr, getter_AddRefs(childAsItem));</span>
<a href="#l13.16"></a><span id="l13.16"> </span>
<a href="#l13.17"></a><span id="l13.17">       mDocShell = do_QueryInterface(childAsItem);</span>
<a href="#l13.18"></a><span id="l13.18">       if (NS_SUCCEEDED(rv) &amp;&amp; mDocShell) {</span>
<a href="#l13.19"></a><span id="l13.19">         mCurrentDisplayCharset = &quot;&quot;; // Important! Clear out mCurrentDisplayCharset so we reset a default charset on mDocshell the next time we try to load something into it.</span>
<a href="#l13.20"></a><span id="l13.20"> </span>
<a href="#l13.21"></a><span id="l13.21">         if (aMsgWindow)</span>
<a href="#l13.22"></a><span id="l13.22">           aMsgWindow-&gt;GetTransactionManager(getter_AddRefs(mTxnMgr));</span>
<a href="#l13.23"></a><span id="l13.23">       }</span>
<a href="#l13.24"></a><span id="l13.24" class="difflineat">@@ -329,17 +329,17 @@ nsMessenger::PromptIfFileExists(nsIFile </span>
<a href="#l13.25"></a><span id="l13.25">     file-&gt;GetPath(path);</span>
<a href="#l13.26"></a><span id="l13.26">     const PRUnichar *pathFormatStrings[] = { path.get() };</span>
<a href="#l13.27"></a><span id="l13.27"> </span>
<a href="#l13.28"></a><span id="l13.28">     if (!mStringBundle)</span>
<a href="#l13.29"></a><span id="l13.29">     {</span>
<a href="#l13.30"></a><span id="l13.30">       rv = InitStringBundle();</span>
<a href="#l13.31"></a><span id="l13.31">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l13.32"></a><span id="l13.32">     }</span>
<a href="#l13.33"></a><span id="l13.33" class="difflineminus">-    rv = mStringBundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;fileExists&quot;).get(),</span>
<a href="#l13.34"></a><span id="l13.34" class="difflineplus">+    rv = mStringBundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;fileExists&quot;),</span>
<a href="#l13.35"></a><span id="l13.35">                                              pathFormatStrings, 1,</span>
<a href="#l13.36"></a><span id="l13.36">                                              getter_Copies(errorMessage));</span>
<a href="#l13.37"></a><span id="l13.37">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l13.38"></a><span id="l13.38">     rv = dialog-&gt;Confirm(nullptr, errorMessage.get(), &amp;dialogResult);</span>
<a href="#l13.39"></a><span id="l13.39">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l13.40"></a><span id="l13.40"> </span>
<a href="#l13.41"></a><span id="l13.41">     if (dialogResult)</span>
<a href="#l13.42"></a><span id="l13.42">     {</span>
<a href="#l13.43"></a><span id="l13.43" class="difflineat">@@ -2961,17 +2961,17 @@ nsMessenger::PromptIfDeleteAttachments(b</span>
<a href="#l13.44"></a><span id="l13.44">     attachmentList.Append(displayString);</span>
<a href="#l13.45"></a><span id="l13.45">     attachmentList.Append(PRUnichar('\n'));</span>
<a href="#l13.46"></a><span id="l13.46">   }</span>
<a href="#l13.47"></a><span id="l13.47">   const PRUnichar *formatStrings[] = { attachmentList.get() };</span>
<a href="#l13.48"></a><span id="l13.48"> </span>
<a href="#l13.49"></a><span id="l13.49">   // format the message and display</span>
<a href="#l13.50"></a><span id="l13.50">   nsString promptMessage;</span>
<a href="#l13.51"></a><span id="l13.51">   const PRUnichar * propertyName = aSaveFirst ?</span>
<a href="#l13.52"></a><span id="l13.52" class="difflineminus">-    NS_LITERAL_STRING(&quot;detachAttachments&quot;).get() : NS_LITERAL_STRING(&quot;deleteAttachments&quot;).get();</span>
<a href="#l13.53"></a><span id="l13.53" class="difflineplus">+    MOZ_UTF16(&quot;detachAttachments&quot;) : MOZ_UTF16(&quot;deleteAttachments&quot;);</span>
<a href="#l13.54"></a><span id="l13.54">   rv = mStringBundle-&gt;FormatStringFromName(propertyName, formatStrings, 1,getter_Copies(promptMessage));</span>
<a href="#l13.55"></a><span id="l13.55">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l13.56"></a><span id="l13.56"> </span>
<a href="#l13.57"></a><span id="l13.57">   bool dialogResult = false;</span>
<a href="#l13.58"></a><span id="l13.58">   rv = dialog-&gt;Confirm(nullptr, promptMessage.get(), &amp;dialogResult);</span>
<a href="#l13.59"></a><span id="l13.59">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l13.60"></a><span id="l13.60"> </span>
<a href="#l13.61"></a><span id="l13.61">   return dialogResult ? NS_OK : NS_ERROR_FAILURE;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mailnews/base/src/nsMessengerOSXIntegration.mm</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mailnews/base/src/nsMessengerOSXIntegration.mm</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -328,28 +328,28 @@ nsMessengerOSXIntegration::FillToolTipIn</span>
<a href="#l14.4"></a><span id="l14.4">       nsCString uri;</span>
<a href="#l14.5"></a><span id="l14.5">       aFolder-&gt;GetURI(uri);</span>
<a href="#l14.6"></a><span id="l14.6"> </span>
<a href="#l14.7"></a><span id="l14.7">       if (numNotDisplayed &gt; 0)</span>
<a href="#l14.8"></a><span id="l14.8">       {</span>
<a href="#l14.9"></a><span id="l14.9">         nsAutoString numNotDisplayedText;</span>
<a href="#l14.10"></a><span id="l14.10">         numNotDisplayedText.AppendInt(numNotDisplayed);</span>
<a href="#l14.11"></a><span id="l14.11">         const PRUnichar *formatStrings[3] = { numNewMsgsText.get(), authors.get(), numNotDisplayedText.get() };</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-        bundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;macBiffNotification_messages_extra&quot;).get(),</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+        bundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;macBiffNotification_messages_extra&quot;),</span>
<a href="#l14.14"></a><span id="l14.14">                                      formatStrings,</span>
<a href="#l14.15"></a><span id="l14.15">                                      3,</span>
<a href="#l14.16"></a><span id="l14.16">                                      getter_Copies(finalText));</span>
<a href="#l14.17"></a><span id="l14.17">       }</span>
<a href="#l14.18"></a><span id="l14.18">       else</span>
<a href="#l14.19"></a><span id="l14.19">       {</span>
<a href="#l14.20"></a><span id="l14.20">         const PRUnichar *formatStrings[2] = { numNewMsgsText.get(), authors.get() };</span>
<a href="#l14.21"></a><span id="l14.21"> </span>
<a href="#l14.22"></a><span id="l14.22">         if (aNewCount == 1)</span>
<a href="#l14.23"></a><span id="l14.23">         {</span>
<a href="#l14.24"></a><span id="l14.24" class="difflineminus">-          bundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;macBiffNotification_message&quot;).get(),</span>
<a href="#l14.25"></a><span id="l14.25" class="difflineplus">+          bundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;macBiffNotification_message&quot;),</span>
<a href="#l14.26"></a><span id="l14.26">                                        formatStrings,</span>
<a href="#l14.27"></a><span id="l14.27">                                        2,</span>
<a href="#l14.28"></a><span id="l14.28">                                        getter_Copies(finalText));</span>
<a href="#l14.29"></a><span id="l14.29">           // Since there is only 1 message, use the most recent mail's URI instead of the folder's</span>
<a href="#l14.30"></a><span id="l14.30">           nsCOMPtr&lt;nsIMsgDatabase&gt; db;</span>
<a href="#l14.31"></a><span id="l14.31">           rv = aFolder-&gt;GetMsgDatabase(getter_AddRefs(db));</span>
<a href="#l14.32"></a><span id="l14.32">           if (NS_SUCCEEDED(rv) &amp;&amp; db)</span>
<a href="#l14.33"></a><span id="l14.33">           {</span>
<a href="#l14.34"></a><span id="l14.34" class="difflineat">@@ -363,17 +363,17 @@ nsMessengerOSXIntegration::FillToolTipIn</span>
<a href="#l14.35"></a><span id="l14.35">                                        getter_AddRefs(hdr));</span>
<a href="#l14.36"></a><span id="l14.36">               if (NS_SUCCEEDED(rv) &amp;&amp; hdr)</span>
<a href="#l14.37"></a><span id="l14.37">                 aFolder-&gt;GetUriForMsg(hdr, uri);</span>
<a href="#l14.38"></a><span id="l14.38">             }</span>
<a href="#l14.39"></a><span id="l14.39">             NS_Free(newMessageKeys);</span>
<a href="#l14.40"></a><span id="l14.40">           }</span>
<a href="#l14.41"></a><span id="l14.41">         }</span>
<a href="#l14.42"></a><span id="l14.42">         else</span>
<a href="#l14.43"></a><span id="l14.43" class="difflineminus">-          bundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;macBiffNotification_messages&quot;).get(),</span>
<a href="#l14.44"></a><span id="l14.44" class="difflineplus">+          bundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;macBiffNotification_messages&quot;),</span>
<a href="#l14.45"></a><span id="l14.45">                                        formatStrings,</span>
<a href="#l14.46"></a><span id="l14.46">                                        2,</span>
<a href="#l14.47"></a><span id="l14.47">                                        getter_Copies(finalText));</span>
<a href="#l14.48"></a><span id="l14.48">       }</span>
<a href="#l14.49"></a><span id="l14.49">       ShowAlertMessage(accountName, finalText, uri);</span>
<a href="#l14.50"></a><span id="l14.50">     } // if we got a bundle</span>
<a href="#l14.51"></a><span id="l14.51">   } // if we got a folder</span>
<a href="#l14.52"></a><span id="l14.52"> }</span>
<a href="#l14.53"></a><span id="l14.53" class="difflineat">@@ -487,17 +487,17 @@ nsMessengerOSXIntegration::BounceDockIco</span>
<a href="#l14.54"></a><span id="l14.54"> </span>
<a href="#l14.55"></a><span id="l14.55">   if (!bounceDockIcon)</span>
<a href="#l14.56"></a><span id="l14.56">     return NS_OK;</span>
<a href="#l14.57"></a><span id="l14.57"> </span>
<a href="#l14.58"></a><span id="l14.58">   nsCOMPtr&lt;nsIWindowMediator&gt; mediator(do_GetService(NS_WINDOWMEDIATOR_CONTRACTID));</span>
<a href="#l14.59"></a><span id="l14.59">   if (mediator)</span>
<a href="#l14.60"></a><span id="l14.60">   {</span>
<a href="#l14.61"></a><span id="l14.61">     nsCOMPtr&lt;nsIDOMWindow&gt; domWindow;</span>
<a href="#l14.62"></a><span id="l14.62" class="difflineminus">-    mediator-&gt;GetMostRecentWindow(NS_LITERAL_STRING(&quot;mail:3pane&quot;).get(), getter_AddRefs(domWindow));</span>
<a href="#l14.63"></a><span id="l14.63" class="difflineplus">+    mediator-&gt;GetMostRecentWindow(MOZ_UTF16(&quot;mail:3pane&quot;), getter_AddRefs(domWindow));</span>
<a href="#l14.64"></a><span id="l14.64">     if (domWindow)</span>
<a href="#l14.65"></a><span id="l14.65">     {</span>
<a href="#l14.66"></a><span id="l14.66">       nsCOMPtr&lt;nsIDOMChromeWindow&gt; chromeWindow(do_QueryInterface(domWindow));</span>
<a href="#l14.67"></a><span id="l14.67">       chromeWindow-&gt;GetAttention();</span>
<a href="#l14.68"></a><span id="l14.68">     }</span>
<a href="#l14.69"></a><span id="l14.69">   }</span>
<a href="#l14.70"></a><span id="l14.70">   return NS_OK;</span>
<a href="#l14.71"></a><span id="l14.71"> }</span>
<a href="#l14.72"></a><span id="l14.72" class="difflineat">@@ -626,17 +626,17 @@ nsMessengerOSXIntegration::GetNewMailAut</span>
<a href="#l14.73"></a><span id="l14.73">     if (!bundle)</span>
<a href="#l14.74"></a><span id="l14.74">       return NS_ERROR_FAILURE;</span>
<a href="#l14.75"></a><span id="l14.75"> </span>
<a href="#l14.76"></a><span id="l14.76">     uint32_t *newMessageKeys;</span>
<a href="#l14.77"></a><span id="l14.77">     rv = db-&gt;GetNewList(&amp;numNewKeys, &amp;newMessageKeys);</span>
<a href="#l14.78"></a><span id="l14.78">     if (NS_SUCCEEDED(rv))</span>
<a href="#l14.79"></a><span id="l14.79">     {</span>
<a href="#l14.80"></a><span id="l14.80">       nsString listSeparator;</span>
<a href="#l14.81"></a><span id="l14.81" class="difflineminus">-      bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;macBiffNotification_separator&quot;).get(), getter_Copies(listSeparator));</span>
<a href="#l14.82"></a><span id="l14.82" class="difflineplus">+      bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;macBiffNotification_separator&quot;), getter_Copies(listSeparator));</span>
<a href="#l14.83"></a><span id="l14.83"> </span>
<a href="#l14.84"></a><span id="l14.84">       int32_t displayed = 0;</span>
<a href="#l14.85"></a><span id="l14.85">       for (int32_t i = numNewKeys - 1; i &gt;= 0; i--, aNewCount--)</span>
<a href="#l14.86"></a><span id="l14.86">       {</span>
<a href="#l14.87"></a><span id="l14.87">         if (0 == aNewCount || displayed == kMaxDisplayCount)</span>
<a href="#l14.88"></a><span id="l14.88">           break;</span>
<a href="#l14.89"></a><span id="l14.89"> </span>
<a href="#l14.90"></a><span id="l14.90">         nsCOMPtr&lt;nsIMsgDBHdr&gt; hdr;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mailnews/base/src/nsMessengerUnixIntegration.cpp</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mailnews/base/src/nsMessengerUnixIntegration.cpp</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -168,18 +168,18 @@ nsMessengerUnixIntegration::BuildNotific</span>
<a href="#l15.4"></a><span id="l15.4">   numNewMsgsText.AppendInt(numNewMessages);</span>
<a href="#l15.5"></a><span id="l15.5"> </span>
<a href="#l15.6"></a><span id="l15.6">   const PRUnichar *formatStrings[] =</span>
<a href="#l15.7"></a><span id="l15.7">   {</span>
<a href="#l15.8"></a><span id="l15.8">     accountName.get(), numNewMsgsText.get()</span>
<a href="#l15.9"></a><span id="l15.9">   };</span>
<a href="#l15.10"></a><span id="l15.10"> </span>
<a href="#l15.11"></a><span id="l15.11">   aBundle-&gt;FormatStringFromName(numNewMessages == 1 ?</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-                                  NS_LITERAL_STRING(&quot;newMailNotification_message&quot;).get() :</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineminus">-                                  NS_LITERAL_STRING(&quot;newMailNotification_messages&quot;).get(),</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineplus">+                                  MOZ_UTF16(&quot;newMailNotification_message&quot;) :</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineplus">+                                  MOZ_UTF16(&quot;newMailNotification_messages&quot;),</span>
<a href="#l15.16"></a><span id="l15.16">                                 formatStrings, 2, getter_Copies(aTitle));</span>
<a href="#l15.17"></a><span id="l15.17">   return true;</span>
<a href="#l15.18"></a><span id="l15.18"> }</span>
<a href="#l15.19"></a><span id="l15.19"> </span>
<a href="#l15.20"></a><span id="l15.20"> /* This comparator lets us sort an nsCOMArray of nsIMsgDBHdr's by</span>
<a href="#l15.21"></a><span id="l15.21">  * their dateInSeconds attributes in ascending order.</span>
<a href="#l15.22"></a><span id="l15.22">  */</span>
<a href="#l15.23"></a><span id="l15.23"> static int</span>
<a href="#l15.24"></a><span id="l15.24" class="difflineat">@@ -287,17 +287,17 @@ nsMessengerUnixIntegration::BuildNotific</span>
<a href="#l15.25"></a><span id="l15.25"> </span>
<a href="#l15.26"></a><span id="l15.26">   if (showSubject &amp;&amp; showSender)</span>
<a href="#l15.27"></a><span id="l15.27">   {</span>
<a href="#l15.28"></a><span id="l15.28">     nsString msgTitle;</span>
<a href="#l15.29"></a><span id="l15.29">     const PRUnichar *formatStrings[] =</span>
<a href="#l15.30"></a><span id="l15.30">     {</span>
<a href="#l15.31"></a><span id="l15.31">       subject.get(), author.get()</span>
<a href="#l15.32"></a><span id="l15.32">     };</span>
<a href="#l15.33"></a><span id="l15.33" class="difflineminus">-    aBundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;newMailNotification_messagetitle&quot;).get(),</span>
<a href="#l15.34"></a><span id="l15.34" class="difflineplus">+    aBundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;newMailNotification_messagetitle&quot;),</span>
<a href="#l15.35"></a><span id="l15.35">         formatStrings, 2, getter_Copies(msgTitle));</span>
<a href="#l15.36"></a><span id="l15.36">     alertBody.Append(msgTitle);</span>
<a href="#l15.37"></a><span id="l15.37">   }</span>
<a href="#l15.38"></a><span id="l15.38">   else if (showSubject)</span>
<a href="#l15.39"></a><span id="l15.39">     alertBody.Append(subject);</span>
<a href="#l15.40"></a><span id="l15.40">   else if (showSender)</span>
<a href="#l15.41"></a><span id="l15.41">     alertBody.Append(author);</span>
<a href="#l15.42"></a><span id="l15.42"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mailnews/base/src/nsMessengerWinIntegration.cpp</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mailnews/base/src/nsMessengerWinIntegration.cpp</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -726,19 +726,19 @@ void nsMessengerWinIntegration::FillTool</span>
<a href="#l16.4"></a><span id="l16.4"> </span>
<a href="#l16.5"></a><span id="l16.5">         const PRUnichar *formatStrings[] =</span>
<a href="#l16.6"></a><span id="l16.6">         {</span>
<a href="#l16.7"></a><span id="l16.7">           numNewMsgsText.get(),</span>
<a href="#l16.8"></a><span id="l16.8">         };</span>
<a href="#l16.9"></a><span id="l16.9"> </span>
<a href="#l16.10"></a><span id="l16.10">         nsString finalText;</span>
<a href="#l16.11"></a><span id="l16.11">         if (numNewMessages == 1)</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-          bundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;biffNotification_message&quot;).get(), formatStrings, 1, getter_Copies(finalText));</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+          bundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;biffNotification_message&quot;), formatStrings, 1, getter_Copies(finalText));</span>
<a href="#l16.14"></a><span id="l16.14">         else</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineminus">-          bundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;biffNotification_messages&quot;).get(), formatStrings, 1, getter_Copies(finalText));</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineplus">+          bundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;biffNotification_messages&quot;), formatStrings, 1, getter_Copies(finalText));</span>
<a href="#l16.17"></a><span id="l16.17"> </span>
<a href="#l16.18"></a><span id="l16.18">         // the alert message is special...we actually only want to show the first account with</span>
<a href="#l16.19"></a><span id="l16.19">         // new mail in the alert.</span>
<a href="#l16.20"></a><span id="l16.20">         if (animatedAlertText.IsEmpty()) // if we haven't filled in the animated alert text yet</span>
<a href="#l16.21"></a><span id="l16.21">           animatedAlertText = finalText;</span>
<a href="#l16.22"></a><span id="l16.22"> </span>
<a href="#l16.23"></a><span id="l16.23">         toolTipLine.Append(accountName);</span>
<a href="#l16.24"></a><span id="l16.24">         toolTipLine.Append(' ');</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mailnews/base/src/nsMsgAccountManager.cpp</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgAccountManager.cpp</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -2357,17 +2357,17 @@ nsresult nsMsgAccountManager::GetLocalFo</span>
<a href="#l17.4"></a><span id="l17.4">     mozilla::services::GetStringBundleService();</span>
<a href="#l17.5"></a><span id="l17.5">   NS_ENSURE_TRUE(sBundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l17.6"></a><span id="l17.6"> </span>
<a href="#l17.7"></a><span id="l17.7">   if (sBundleService)</span>
<a href="#l17.8"></a><span id="l17.8">     rv = sBundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/messenger.properties&quot;,</span>
<a href="#l17.9"></a><span id="l17.9">                                       getter_AddRefs(bundle));</span>
<a href="#l17.10"></a><span id="l17.10">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l17.11"></a><span id="l17.11"> </span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-  return bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;localFolders&quot;).get(), getter_Copies(localFoldersName));</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+  return bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;localFolders&quot;), getter_Copies(localFoldersName));</span>
<a href="#l17.14"></a><span id="l17.14"> }</span>
<a href="#l17.15"></a><span id="l17.15"> </span>
<a href="#l17.16"></a><span id="l17.16"> NS_IMETHODIMP</span>
<a href="#l17.17"></a><span id="l17.17"> nsMsgAccountManager::CreateLocalMailAccount()</span>
<a href="#l17.18"></a><span id="l17.18"> {</span>
<a href="#l17.19"></a><span id="l17.19">   // create the server</span>
<a href="#l17.20"></a><span id="l17.20">   nsCOMPtr&lt;nsIMsgIncomingServer&gt; server;</span>
<a href="#l17.21"></a><span id="l17.21">   nsresult rv = CreateIncomingServer(NS_LITERAL_CSTRING(&quot;nobody&quot;),</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mailnews/base/src/nsMsgAccountManagerDS.cpp</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgAccountManagerDS.cpp</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -149,17 +149,17 @@ nsMsgAccountManagerDataSource::nsMsgAcco</span>
<a href="#l18.4"></a><span id="l18.4">     getRDFService()-&gt;GetResource(NS_LITERAL_CSTRING(NC_RDF_PAGETITLE_SMTP),</span>
<a href="#l18.5"></a><span id="l18.5">                                  &amp;kNC_PageTitleSMTP);</span>
<a href="#l18.6"></a><span id="l18.6">     getRDFService()-&gt;GetResource(NS_LITERAL_CSTRING(NC_RDF_PAGETITLE_JUNK),</span>
<a href="#l18.7"></a><span id="l18.7">                                  &amp;kNC_PageTitleJunk);</span>
<a href="#l18.8"></a><span id="l18.8"> </span>
<a href="#l18.9"></a><span id="l18.9">     getRDFService()-&gt;GetResource(NS_LITERAL_CSTRING(NC_RDF_ACCOUNTROOT),</span>
<a href="#l18.10"></a><span id="l18.10">                                  &amp;kNC_AccountRoot);</span>
<a href="#l18.11"></a><span id="l18.11"> </span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-    getRDFService()-&gt;GetLiteral(NS_LITERAL_STRING(&quot;true&quot;).get(),</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+    getRDFService()-&gt;GetLiteral(MOZ_UTF16(&quot;true&quot;),</span>
<a href="#l18.14"></a><span id="l18.14">                                 &amp;kTrueLiteral);</span>
<a href="#l18.15"></a><span id="l18.15"> </span>
<a href="#l18.16"></a><span id="l18.16">     // eventually these need to exist in some kind of array</span>
<a href="#l18.17"></a><span id="l18.17">     // that's easily extensible</span>
<a href="#l18.18"></a><span id="l18.18">     getRDFService()-&gt;GetResource(NS_LITERAL_CSTRING(NC_RDF_SETTINGS), &amp;kNC_Settings);</span>
<a href="#l18.19"></a><span id="l18.19"> </span>
<a href="#l18.20"></a><span id="l18.20">     kDefaultServerAtom = MsgNewAtom(&quot;DefaultServer&quot;).get();</span>
<a href="#l18.21"></a><span id="l18.21">   }</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineat">@@ -276,36 +276,36 @@ nsMsgAccountManagerDataSource::GetTarget</span>
<a href="#l18.23"></a><span id="l18.23">   if (property == kNC_Name || property == kNC_FolderTreeName ||</span>
<a href="#l18.24"></a><span id="l18.24">       property == kNC_FolderTreeSimpleName) </span>
<a href="#l18.25"></a><span id="l18.25">   {</span>
<a href="#l18.26"></a><span id="l18.26">     rv = getStringBundle();</span>
<a href="#l18.27"></a><span id="l18.27">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l18.28"></a><span id="l18.28"> </span>
<a href="#l18.29"></a><span id="l18.29">     nsString pageTitle;</span>
<a href="#l18.30"></a><span id="l18.30">     if (source == kNC_PageTitleServer)</span>
<a href="#l18.31"></a><span id="l18.31" class="difflineminus">-      mStringBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;prefPanel-server&quot;).get(),</span>
<a href="#l18.32"></a><span id="l18.32" class="difflineplus">+      mStringBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;prefPanel-server&quot;),</span>
<a href="#l18.33"></a><span id="l18.33">                                        getter_Copies(pageTitle));</span>
<a href="#l18.34"></a><span id="l18.34"> </span>
<a href="#l18.35"></a><span id="l18.35">     else if (source == kNC_PageTitleCopies)</span>
<a href="#l18.36"></a><span id="l18.36" class="difflineminus">-      mStringBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;prefPanel-copies&quot;).get(),</span>
<a href="#l18.37"></a><span id="l18.37" class="difflineplus">+      mStringBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;prefPanel-copies&quot;),</span>
<a href="#l18.38"></a><span id="l18.38">                                        getter_Copies(pageTitle));</span>
<a href="#l18.39"></a><span id="l18.39">     else if (source == kNC_PageTitleSynchronization)</span>
<a href="#l18.40"></a><span id="l18.40" class="difflineminus">-      mStringBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;prefPanel-synchronization&quot;).get(),</span>
<a href="#l18.41"></a><span id="l18.41" class="difflineplus">+      mStringBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;prefPanel-synchronization&quot;),</span>
<a href="#l18.42"></a><span id="l18.42">                                        getter_Copies(pageTitle));</span>
<a href="#l18.43"></a><span id="l18.43">     else if (source == kNC_PageTitleDiskSpace)</span>
<a href="#l18.44"></a><span id="l18.44" class="difflineminus">-      mStringBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;prefPanel-diskspace&quot;).get(),</span>
<a href="#l18.45"></a><span id="l18.45" class="difflineplus">+      mStringBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;prefPanel-diskspace&quot;),</span>
<a href="#l18.46"></a><span id="l18.46">                                        getter_Copies(pageTitle));</span>
<a href="#l18.47"></a><span id="l18.47">     else if (source == kNC_PageTitleAddressing)</span>
<a href="#l18.48"></a><span id="l18.48" class="difflineminus">-      mStringBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;prefPanel-addressing&quot;).get(),</span>
<a href="#l18.49"></a><span id="l18.49" class="difflineplus">+      mStringBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;prefPanel-addressing&quot;),</span>
<a href="#l18.50"></a><span id="l18.50">                                        getter_Copies(pageTitle));</span>
<a href="#l18.51"></a><span id="l18.51">     else if (source == kNC_PageTitleSMTP)</span>
<a href="#l18.52"></a><span id="l18.52" class="difflineminus">-      mStringBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;prefPanel-smtp&quot;).get(),</span>
<a href="#l18.53"></a><span id="l18.53" class="difflineplus">+      mStringBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;prefPanel-smtp&quot;),</span>
<a href="#l18.54"></a><span id="l18.54">                                        getter_Copies(pageTitle));</span>
<a href="#l18.55"></a><span id="l18.55">     else if (source == kNC_PageTitleJunk)</span>
<a href="#l18.56"></a><span id="l18.56" class="difflineminus">-      mStringBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;prefPanel-junk&quot;).get(),</span>
<a href="#l18.57"></a><span id="l18.57" class="difflineplus">+      mStringBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;prefPanel-junk&quot;),</span>
<a href="#l18.58"></a><span id="l18.58">                                        getter_Copies(pageTitle));</span>
<a href="#l18.59"></a><span id="l18.59"> </span>
<a href="#l18.60"></a><span id="l18.60">     else {</span>
<a href="#l18.61"></a><span id="l18.61">       // if it's a server, use the pretty name</span>
<a href="#l18.62"></a><span id="l18.62">       nsCOMPtr&lt;nsIMsgFolder&gt; folder = do_QueryInterface(source, &amp;rv);</span>
<a href="#l18.63"></a><span id="l18.63">       if (NS_SUCCEEDED(rv) &amp;&amp; folder) {</span>
<a href="#l18.64"></a><span id="l18.64">         bool isServer;</span>
<a href="#l18.65"></a><span id="l18.65">         rv = folder-&gt;GetIsServer(&amp;isServer);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mailnews/base/src/nsMsgDBView.cpp</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgDBView.cpp</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -151,26 +151,26 @@ nsMsgDBView::nsMsgDBView()</span>
<a href="#l19.4"></a><span id="l19.4"> }</span>
<a href="#l19.5"></a><span id="l19.5"> </span>
<a href="#l19.6"></a><span id="l19.6"> void nsMsgDBView::InitializeAtomsAndLiterals()</span>
<a href="#l19.7"></a><span id="l19.7"> {</span>
<a href="#l19.8"></a><span id="l19.8">   kJunkMsgAtom = MsgNewAtom(&quot;junk&quot;).get();</span>
<a href="#l19.9"></a><span id="l19.9">   kNotJunkMsgAtom = MsgNewAtom(&quot;notjunk&quot;).get();</span>
<a href="#l19.10"></a><span id="l19.10"> </span>
<a href="#l19.11"></a><span id="l19.11">   // priority strings</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-  kHighestPriorityString = GetString(NS_LITERAL_STRING(&quot;priorityHighest&quot;).get());</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineminus">-  kHighPriorityString = GetString(NS_LITERAL_STRING(&quot;priorityHigh&quot;).get());</span>
<a href="#l19.14"></a><span id="l19.14" class="difflineminus">-  kLowestPriorityString = GetString(NS_LITERAL_STRING(&quot;priorityLowest&quot;).get());</span>
<a href="#l19.15"></a><span id="l19.15" class="difflineminus">-  kLowPriorityString = GetString(NS_LITERAL_STRING(&quot;priorityLow&quot;).get());</span>
<a href="#l19.16"></a><span id="l19.16" class="difflineminus">-  kNormalPriorityString = GetString(NS_LITERAL_STRING(&quot;priorityNormal&quot;).get());</span>
<a href="#l19.17"></a><span id="l19.17" class="difflineminus">-</span>
<a href="#l19.18"></a><span id="l19.18" class="difflineminus">-  kReadString = GetString(NS_LITERAL_STRING(&quot;read&quot;).get());</span>
<a href="#l19.19"></a><span id="l19.19" class="difflineminus">-  kRepliedString = GetString(NS_LITERAL_STRING(&quot;replied&quot;).get());</span>
<a href="#l19.20"></a><span id="l19.20" class="difflineminus">-  kForwardedString = GetString(NS_LITERAL_STRING(&quot;forwarded&quot;).get());</span>
<a href="#l19.21"></a><span id="l19.21" class="difflineminus">-  kNewString = GetString(NS_LITERAL_STRING(&quot;new&quot;).get());</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineplus">+  kHighestPriorityString = GetString(MOZ_UTF16(&quot;priorityHighest&quot;));</span>
<a href="#l19.23"></a><span id="l19.23" class="difflineplus">+  kHighPriorityString = GetString(MOZ_UTF16(&quot;priorityHigh&quot;));</span>
<a href="#l19.24"></a><span id="l19.24" class="difflineplus">+  kLowestPriorityString = GetString(MOZ_UTF16(&quot;priorityLowest&quot;));</span>
<a href="#l19.25"></a><span id="l19.25" class="difflineplus">+  kLowPriorityString = GetString(MOZ_UTF16(&quot;priorityLow&quot;));</span>
<a href="#l19.26"></a><span id="l19.26" class="difflineplus">+  kNormalPriorityString = GetString(MOZ_UTF16(&quot;priorityNormal&quot;));</span>
<a href="#l19.27"></a><span id="l19.27" class="difflineplus">+</span>
<a href="#l19.28"></a><span id="l19.28" class="difflineplus">+  kReadString = GetString(MOZ_UTF16(&quot;read&quot;));</span>
<a href="#l19.29"></a><span id="l19.29" class="difflineplus">+  kRepliedString = GetString(MOZ_UTF16(&quot;replied&quot;));</span>
<a href="#l19.30"></a><span id="l19.30" class="difflineplus">+  kForwardedString = GetString(MOZ_UTF16(&quot;forwarded&quot;));</span>
<a href="#l19.31"></a><span id="l19.31" class="difflineplus">+  kNewString = GetString(MOZ_UTF16(&quot;new&quot;));</span>
<a href="#l19.32"></a><span id="l19.32"> }</span>
<a href="#l19.33"></a><span id="l19.33"> </span>
<a href="#l19.34"></a><span id="l19.34"> nsMsgDBView::~nsMsgDBView()</span>
<a href="#l19.35"></a><span id="l19.35"> {</span>
<a href="#l19.36"></a><span id="l19.36">   if (m_db)</span>
<a href="#l19.37"></a><span id="l19.37">     m_db-&gt;RemoveListener(this);</span>
<a href="#l19.38"></a><span id="l19.38"> </span>
<a href="#l19.39"></a><span id="l19.39">   gInstanceCount--;</span>
<a href="#l19.40"></a><span id="l19.40" class="difflineat">@@ -1689,24 +1689,24 @@ NS_IMETHODIMP nsMsgDBView::GetCellValue(</span>
<a href="#l19.41"></a><span id="l19.41">   aValue.Truncate();</span>
<a href="#l19.42"></a><span id="l19.42">   // provide a string &quot;value&quot; for cells that do not normally have text.</span>
<a href="#l19.43"></a><span id="l19.43">   // use empty string for the normal states &quot;Read&quot;, &quot;Not Starred&quot;, &quot;No Attachment&quot; and &quot;Not Junk&quot;</span>
<a href="#l19.44"></a><span id="l19.44">   switch (colID[0])</span>
<a href="#l19.45"></a><span id="l19.45">   {</span>
<a href="#l19.46"></a><span id="l19.46">     case 'a': // attachment column</span>
<a href="#l19.47"></a><span id="l19.47">       if (flags &amp; nsMsgMessageFlags::Attachment) {</span>
<a href="#l19.48"></a><span id="l19.48">         nsString tmp_str;</span>
<a href="#l19.49"></a><span id="l19.49" class="difflineminus">-        tmp_str.Adopt(GetString(NS_LITERAL_STRING(&quot;messageHasAttachment&quot;).get()));</span>
<a href="#l19.50"></a><span id="l19.50" class="difflineplus">+        tmp_str.Adopt(GetString(MOZ_UTF16(&quot;messageHasAttachment&quot;)));</span>
<a href="#l19.51"></a><span id="l19.51">         aValue.Assign(tmp_str);</span>
<a href="#l19.52"></a><span id="l19.52">       }</span>
<a href="#l19.53"></a><span id="l19.53">       break;</span>
<a href="#l19.54"></a><span id="l19.54">     case 'f': // flagged (starred) column</span>
<a href="#l19.55"></a><span id="l19.55">       if (flags &amp; nsMsgMessageFlags::Marked) {</span>
<a href="#l19.56"></a><span id="l19.56">         nsString tmp_str;</span>
<a href="#l19.57"></a><span id="l19.57" class="difflineminus">-        tmp_str.Adopt(GetString(NS_LITERAL_STRING(&quot;messageHasFlag&quot;).get()));</span>
<a href="#l19.58"></a><span id="l19.58" class="difflineplus">+        tmp_str.Adopt(GetString(MOZ_UTF16(&quot;messageHasFlag&quot;)));</span>
<a href="#l19.59"></a><span id="l19.59">         aValue.Assign(tmp_str);</span>
<a href="#l19.60"></a><span id="l19.60">       }</span>
<a href="#l19.61"></a><span id="l19.61">       break;</span>
<a href="#l19.62"></a><span id="l19.62">     case 'j': // junk column</span>
<a href="#l19.63"></a><span id="l19.63">       if (JunkControlsEnabled(aRow))</span>
<a href="#l19.64"></a><span id="l19.64">       {</span>
<a href="#l19.65"></a><span id="l19.65">         nsCString junkScoreStr;</span>
<a href="#l19.66"></a><span id="l19.66">         msgHdr-&gt;GetStringProperty(&quot;junkscore&quot;, getter_Copies(junkScoreStr));</span>
<a href="#l19.67"></a><span id="l19.67" class="difflineat">@@ -1728,27 +1728,27 @@ NS_IMETHODIMP nsMsgDBView::GetCellValue(</span>
<a href="#l19.68"></a><span id="l19.68">         {</span>
<a href="#l19.69"></a><span id="l19.69">           IsContainerEmpty(aRow, &amp;isContainerEmpty);</span>
<a href="#l19.70"></a><span id="l19.70">           if (!isContainerEmpty)</span>
<a href="#l19.71"></a><span id="l19.71">           {</span>
<a href="#l19.72"></a><span id="l19.72">             nsString tmp_str;</span>
<a href="#l19.73"></a><span id="l19.73"> </span>
<a href="#l19.74"></a><span id="l19.74">             IsContainerOpen(aRow, &amp;isContainerOpen);</span>
<a href="#l19.75"></a><span id="l19.75">             tmp_str.Adopt(GetString(isContainerOpen ?</span>
<a href="#l19.76"></a><span id="l19.76" class="difflineminus">-                                   NS_LITERAL_STRING(&quot;messageExpanded&quot;).get() :</span>
<a href="#l19.77"></a><span id="l19.77" class="difflineminus">-                                   NS_LITERAL_STRING(&quot;messageCollapsed&quot;).get()));</span>
<a href="#l19.78"></a><span id="l19.78" class="difflineplus">+                            MOZ_UTF16(&quot;messageExpanded&quot;) :</span>
<a href="#l19.79"></a><span id="l19.79" class="difflineplus">+                            MOZ_UTF16(&quot;messageCollapsed&quot;)));</span>
<a href="#l19.80"></a><span id="l19.80">             aValue.Assign(tmp_str);</span>
<a href="#l19.81"></a><span id="l19.81">           }</span>
<a href="#l19.82"></a><span id="l19.82">         }</span>
<a href="#l19.83"></a><span id="l19.83">       }</span>
<a href="#l19.84"></a><span id="l19.84">       break;</span>
<a href="#l19.85"></a><span id="l19.85">     case 'u': // read/unread column</span>
<a href="#l19.86"></a><span id="l19.86">       if (!(flags &amp; nsMsgMessageFlags::Read)) {</span>
<a href="#l19.87"></a><span id="l19.87">         nsString tmp_str;</span>
<a href="#l19.88"></a><span id="l19.88" class="difflineminus">-        tmp_str.Adopt(GetString(NS_LITERAL_STRING(&quot;messageUnread&quot;).get()));</span>
<a href="#l19.89"></a><span id="l19.89" class="difflineplus">+        tmp_str.Adopt(GetString(MOZ_UTF16(&quot;messageUnread&quot;)));</span>
<a href="#l19.90"></a><span id="l19.90">         aValue.Assign(tmp_str);</span>
<a href="#l19.91"></a><span id="l19.91">       }</span>
<a href="#l19.92"></a><span id="l19.92">       break;</span>
<a href="#l19.93"></a><span id="l19.93">     default:</span>
<a href="#l19.94"></a><span id="l19.94">       aValue.Assign(colID);</span>
<a href="#l19.95"></a><span id="l19.95">       break;</span>
<a href="#l19.96"></a><span id="l19.96">   }</span>
<a href="#l19.97"></a><span id="l19.97">   return rv;</span>
<a href="#l19.98"></a><span id="l19.98" class="difflineat">@@ -3055,24 +3055,24 @@ nsresult nsMsgDBView::DeleteMessages(nsI</span>
<a href="#l19.99"></a><span id="l19.99">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l19.100"></a><span id="l19.100">     bool dontAsk = false; // &quot;Don't ask...&quot; - unchecked by default.</span>
<a href="#l19.101"></a><span id="l19.101">     int32_t buttonPressed = 0;</span>
<a href="#l19.102"></a><span id="l19.102"> </span>
<a href="#l19.103"></a><span id="l19.103">     nsString dialogTitle;</span>
<a href="#l19.104"></a><span id="l19.104">     nsString confirmString;</span>
<a href="#l19.105"></a><span id="l19.105">     nsString checkboxText;</span>
<a href="#l19.106"></a><span id="l19.106">     nsString buttonApplyNowText;</span>
<a href="#l19.107"></a><span id="l19.107" class="difflineminus">-    dialogTitle.Adopt(GetString(NS_LITERAL_STRING(&quot;confirmMsgDelete.title&quot;).get()));</span>
<a href="#l19.108"></a><span id="l19.108" class="difflineminus">-    checkboxText.Adopt(GetString(NS_LITERAL_STRING(&quot;confirmMsgDelete.dontAsk.label&quot;).get()));</span>
<a href="#l19.109"></a><span id="l19.109" class="difflineminus">-    buttonApplyNowText.Adopt(GetString(NS_LITERAL_STRING(&quot;confirmMsgDelete.delete.label&quot;).get()));</span>
<a href="#l19.110"></a><span id="l19.110" class="difflineplus">+    dialogTitle.Adopt(GetString(MOZ_UTF16(&quot;confirmMsgDelete.title&quot;)));</span>
<a href="#l19.111"></a><span id="l19.111" class="difflineplus">+    checkboxText.Adopt(GetString(MOZ_UTF16(&quot;confirmMsgDelete.dontAsk.label&quot;)));</span>
<a href="#l19.112"></a><span id="l19.112" class="difflineplus">+    buttonApplyNowText.Adopt(GetString(MOZ_UTF16(&quot;confirmMsgDelete.delete.label&quot;)));</span>
<a href="#l19.113"></a><span id="l19.113"> </span>
<a href="#l19.114"></a><span id="l19.114">     if (activePref == warnCollapsedPref)</span>
<a href="#l19.115"></a><span id="l19.115" class="difflineminus">-      confirmString.Adopt(GetString(NS_LITERAL_STRING(&quot;confirmMsgDelete.collapsed.desc&quot;).get()));</span>
<a href="#l19.116"></a><span id="l19.116" class="difflineplus">+      confirmString.Adopt(GetString(MOZ_UTF16(&quot;confirmMsgDelete.collapsed.desc&quot;)));</span>
<a href="#l19.117"></a><span id="l19.117">     else // if (activePref == warnShiftDelPref || activePref == warnNewsPref)</span>
<a href="#l19.118"></a><span id="l19.118" class="difflineminus">-      confirmString.Adopt(GetString(NS_LITERAL_STRING(&quot;confirmMsgDelete.deleteNoTrash.desc&quot;).get()));</span>
<a href="#l19.119"></a><span id="l19.119" class="difflineplus">+      confirmString.Adopt(GetString(MOZ_UTF16(&quot;confirmMsgDelete.deleteNoTrash.desc&quot;)));</span>
<a href="#l19.120"></a><span id="l19.120"> </span>
<a href="#l19.121"></a><span id="l19.121">     const uint32_t buttonFlags =</span>
<a href="#l19.122"></a><span id="l19.122">       (nsIPrompt::BUTTON_TITLE_IS_STRING * nsIPrompt::BUTTON_POS_0) +</span>
<a href="#l19.123"></a><span id="l19.123">       (nsIPrompt::BUTTON_TITLE_CANCEL * nsIPrompt::BUTTON_POS_1);</span>
<a href="#l19.124"></a><span id="l19.124">     rv = dialog-&gt;ConfirmEx(dialogTitle.get(), confirmString.get(), buttonFlags,</span>
<a href="#l19.125"></a><span id="l19.125">                            buttonApplyNowText.get(), nullptr, nullptr,</span>
<a href="#l19.126"></a><span id="l19.126">                            checkboxText.get(), &amp;dontAsk, &amp;buttonPressed);</span>
<a href="#l19.127"></a><span id="l19.127">     NS_ENSURE_SUCCESS(rv, rv);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mailnews/base/src/nsMsgFolderDataSource.cpp</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgFolderDataSource.cpp</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -274,19 +274,19 @@ nsMsgFolderDataSource::~nsMsgFolderDataS</span>
<a href="#l20.4"></a><span id="l20.4">     NS_RELEASE(kIsSecureAtom);</span>
<a href="#l20.5"></a><span id="l20.5">     NS_RELEASE(kCanFileMessagesAtom);</span>
<a href="#l20.6"></a><span id="l20.6">     NS_RELEASE(kInVFEditSearchScopeAtom);</span>
<a href="#l20.7"></a><span id="l20.7">   }</span>
<a href="#l20.8"></a><span id="l20.8"> }</span>
<a href="#l20.9"></a><span id="l20.9"> </span>
<a href="#l20.10"></a><span id="l20.10"> nsresult nsMsgFolderDataSource::CreateLiterals(nsIRDFService *rdf)</span>
<a href="#l20.11"></a><span id="l20.11"> {</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-  createNode(NS_LITERAL_STRING(&quot;true&quot;).get(),</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+  createNode(MOZ_UTF16(&quot;true&quot;),</span>
<a href="#l20.14"></a><span id="l20.14">     getter_AddRefs(kTrueLiteral), rdf);</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineminus">-  createNode(NS_LITERAL_STRING(&quot;false&quot;).get(),</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineplus">+  createNode(MOZ_UTF16(&quot;false&quot;),</span>
<a href="#l20.17"></a><span id="l20.17">     getter_AddRefs(kFalseLiteral), rdf);</span>
<a href="#l20.18"></a><span id="l20.18"> </span>
<a href="#l20.19"></a><span id="l20.19">   return NS_OK;</span>
<a href="#l20.20"></a><span id="l20.20"> }</span>
<a href="#l20.21"></a><span id="l20.21"> </span>
<a href="#l20.22"></a><span id="l20.22"> nsresult nsMsgFolderDataSource::Init()</span>
<a href="#l20.23"></a><span id="l20.23"> {</span>
<a href="#l20.24"></a><span id="l20.24">   nsresult rv;</span>
<a href="#l20.25"></a><span id="l20.25" class="difflineat">@@ -1032,19 +1032,19 @@ nsresult nsMsgFolderDataSource::createFo</span>
<a href="#l20.26"></a><span id="l20.26">   return NS_OK;</span>
<a href="#l20.27"></a><span id="l20.27"> }</span>
<a href="#l20.28"></a><span id="l20.28"> </span>
<a href="#l20.29"></a><span id="l20.29"> nsresult nsMsgFolderDataSource::CreateUnreadMessagesNameString(int32_t unreadMessages, nsAutoString &amp;nameString)</span>
<a href="#l20.30"></a><span id="l20.30"> {</span>
<a href="#l20.31"></a><span id="l20.31">   //Only do this if unread messages are positive</span>
<a href="#l20.32"></a><span id="l20.32">   if(unreadMessages &gt; 0)</span>
<a href="#l20.33"></a><span id="l20.33">   {</span>
<a href="#l20.34"></a><span id="l20.34" class="difflineminus">-    nameString.Append(NS_LITERAL_STRING(&quot; (&quot;).get());</span>
<a href="#l20.35"></a><span id="l20.35" class="difflineplus">+    nameString.Append(NS_LITERAL_STRING(&quot; (&quot;));</span>
<a href="#l20.36"></a><span id="l20.36">     nameString.AppendInt(unreadMessages);</span>
<a href="#l20.37"></a><span id="l20.37" class="difflineminus">-    nameString.Append(NS_LITERAL_STRING(&quot;)&quot;).get());</span>
<a href="#l20.38"></a><span id="l20.38" class="difflineplus">+    nameString.Append(MOZ_UTF16(')'));</span>
<a href="#l20.39"></a><span id="l20.39">   }</span>
<a href="#l20.40"></a><span id="l20.40">   return NS_OK;</span>
<a href="#l20.41"></a><span id="l20.41"> }</span>
<a href="#l20.42"></a><span id="l20.42"> </span>
<a href="#l20.43"></a><span id="l20.43"> nsresult</span>
<a href="#l20.44"></a><span id="l20.44"> nsMsgFolderDataSource::createFolderSpecialNode(nsIMsgFolder *folder,</span>
<a href="#l20.45"></a><span id="l20.45">                                                nsIRDFNode **target)</span>
<a href="#l20.46"></a><span id="l20.46"> {</span>
<a href="#l20.47"></a><span id="l20.47" class="difflineat">@@ -1496,23 +1496,23 @@ nsMsgFolderDataSource::createBiffStateNo</span>
<a href="#l20.48"></a><span id="l20.48"> </span>
<a href="#l20.49"></a><span id="l20.49"> nsresult</span>
<a href="#l20.50"></a><span id="l20.50"> nsMsgFolderDataSource::createBiffStateNodeFromFlag(uint32_t flag, nsIRDFNode **target)</span>
<a href="#l20.51"></a><span id="l20.51"> {</span>
<a href="#l20.52"></a><span id="l20.52">   const PRUnichar *biffStateStr;</span>
<a href="#l20.53"></a><span id="l20.53"> </span>
<a href="#l20.54"></a><span id="l20.54">   switch (flag) {</span>
<a href="#l20.55"></a><span id="l20.55">     case nsIMsgFolder::nsMsgBiffState_NewMail:</span>
<a href="#l20.56"></a><span id="l20.56" class="difflineminus">-      biffStateStr = NS_LITERAL_STRING(&quot;NewMail&quot;).get();</span>
<a href="#l20.57"></a><span id="l20.57" class="difflineplus">+      biffStateStr = MOZ_UTF16(&quot;NewMail&quot;);</span>
<a href="#l20.58"></a><span id="l20.58">       break;</span>
<a href="#l20.59"></a><span id="l20.59">     case nsIMsgFolder::nsMsgBiffState_NoMail:</span>
<a href="#l20.60"></a><span id="l20.60" class="difflineminus">-      biffStateStr = NS_LITERAL_STRING(&quot;NoMail&quot;).get();</span>
<a href="#l20.61"></a><span id="l20.61" class="difflineplus">+      biffStateStr = MOZ_UTF16(&quot;NoMail&quot;);</span>
<a href="#l20.62"></a><span id="l20.62">       break;</span>
<a href="#l20.63"></a><span id="l20.63">     default:</span>
<a href="#l20.64"></a><span id="l20.64" class="difflineminus">-      biffStateStr = NS_LITERAL_STRING(&quot;UnknownMail&quot;).get();</span>
<a href="#l20.65"></a><span id="l20.65" class="difflineplus">+      biffStateStr = MOZ_UTF16(&quot;UnknownMail&quot;);</span>
<a href="#l20.66"></a><span id="l20.66">       break;</span>
<a href="#l20.67"></a><span id="l20.67">   }</span>
<a href="#l20.68"></a><span id="l20.68"> </span>
<a href="#l20.69"></a><span id="l20.69">   createNode(biffStateStr, target, getRDFService());</span>
<a href="#l20.70"></a><span id="l20.70">   return NS_OK;</span>
<a href="#l20.71"></a><span id="l20.71"> }</span>
<a href="#l20.72"></a><span id="l20.72"> </span>
<a href="#l20.73"></a><span id="l20.73"> nsresult</span>
<a href="#l20.74"></a><span id="l20.74" class="difflineat">@@ -1775,33 +1775,33 @@ nsMsgFolderDataSource::OnTotalMessagePro</span>
<a href="#l20.75"></a><span id="l20.75">   return NS_OK;</span>
<a href="#l20.76"></a><span id="l20.76"> }</span>
<a href="#l20.77"></a><span id="l20.77"> </span>
<a href="#l20.78"></a><span id="l20.78"> nsresult</span>
<a href="#l20.79"></a><span id="l20.79"> nsMsgFolderDataSource::GetNumMessagesNode(int32_t aNumMessages, nsIRDFNode **node)</span>
<a href="#l20.80"></a><span id="l20.80"> {</span>
<a href="#l20.81"></a><span id="l20.81">   uint32_t numMessages = aNumMessages;</span>
<a href="#l20.82"></a><span id="l20.82">   if(numMessages == kDisplayQuestionCount)</span>
<a href="#l20.83"></a><span id="l20.83" class="difflineminus">-    createNode(NS_LITERAL_STRING(&quot;???&quot;).get(), node, getRDFService());</span>
<a href="#l20.84"></a><span id="l20.84" class="difflineplus">+    createNode(MOZ_UTF16(&quot;???&quot;), node, getRDFService());</span>
<a href="#l20.85"></a><span id="l20.85">   else if (numMessages == kDisplayBlankCount || numMessages == 0)</span>
<a href="#l20.86"></a><span id="l20.86">     createNode(EmptyString().get(), node, getRDFService());</span>
<a href="#l20.87"></a><span id="l20.87">   else</span>
<a href="#l20.88"></a><span id="l20.88">     createIntNode(numMessages, node, getRDFService());</span>
<a href="#l20.89"></a><span id="l20.89">   return NS_OK;</span>
<a href="#l20.90"></a><span id="l20.90"> }</span>
<a href="#l20.91"></a><span id="l20.91"> </span>
<a href="#l20.92"></a><span id="l20.92"> nsresult</span>
<a href="#l20.93"></a><span id="l20.93"> nsMsgFolderDataSource::GetFolderSizeNode(int32_t aFolderSize, nsIRDFNode **aNode)</span>
<a href="#l20.94"></a><span id="l20.94"> {</span>
<a href="#l20.95"></a><span id="l20.95">   nsresult rv;</span>
<a href="#l20.96"></a><span id="l20.96">   uint32_t folderSize = aFolderSize;</span>
<a href="#l20.97"></a><span id="l20.97">   if (folderSize == kDisplayBlankCount || folderSize == 0)</span>
<a href="#l20.98"></a><span id="l20.98">     createNode(EmptyString().get(), aNode, getRDFService());</span>
<a href="#l20.99"></a><span id="l20.99">   else if(folderSize == kDisplayQuestionCount)</span>
<a href="#l20.100"></a><span id="l20.100" class="difflineminus">-    createNode(NS_LITERAL_STRING(&quot;???&quot;).get(), aNode, getRDFService());</span>
<a href="#l20.101"></a><span id="l20.101" class="difflineplus">+    createNode(MOZ_UTF16(&quot;???&quot;), aNode, getRDFService());</span>
<a href="#l20.102"></a><span id="l20.102">   else</span>
<a href="#l20.103"></a><span id="l20.103">   {</span>
<a href="#l20.104"></a><span id="l20.104">     nsAutoString sizeString;</span>
<a href="#l20.105"></a><span id="l20.105">     rv = FormatFileSize(folderSize, true, sizeString);</span>
<a href="#l20.106"></a><span id="l20.106">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l20.107"></a><span id="l20.107"> </span>
<a href="#l20.108"></a><span id="l20.108">     createNode(sizeString.get(), aNode, getRDFService());</span>
<a href="#l20.109"></a><span id="l20.109">   }</span>
<a href="#l20.110"></a><span id="l20.110" class="difflineat">@@ -1966,17 +1966,17 @@ nsresult nsMsgFolderDataSource::DoDelete</span>
<a href="#l20.111"></a><span id="l20.111">         NS_ENSURE_ARG_POINTER(msgWindow);</span>
<a href="#l20.112"></a><span id="l20.112">         nsCOMPtr&lt;nsIStringBundleService&gt; sBundleService =</span>
<a href="#l20.113"></a><span id="l20.113">           mozilla::services::GetStringBundleService();</span>
<a href="#l20.114"></a><span id="l20.114">         NS_ENSURE_TRUE(sBundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l20.115"></a><span id="l20.115">         nsCOMPtr&lt;nsIStringBundle&gt; sMessengerStringBundle;</span>
<a href="#l20.116"></a><span id="l20.116">         nsString confirmMsg;</span>
<a href="#l20.117"></a><span id="l20.117">         rv = sBundleService-&gt;CreateBundle(MESSENGER_STRING_URL, getter_AddRefs(sMessengerStringBundle));</span>
<a href="#l20.118"></a><span id="l20.118">         NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l20.119"></a><span id="l20.119" class="difflineminus">-        sMessengerStringBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;confirmSavedSearchDeleteMessage&quot;).get(), getter_Copies(confirmMsg));</span>
<a href="#l20.120"></a><span id="l20.120" class="difflineplus">+        sMessengerStringBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;confirmSavedSearchDeleteMessage&quot;), getter_Copies(confirmMsg));</span>
<a href="#l20.121"></a><span id="l20.121"> </span>
<a href="#l20.122"></a><span id="l20.122">         nsCOMPtr&lt;nsIPrompt&gt; dialog;</span>
<a href="#l20.123"></a><span id="l20.123">         rv = msgWindow-&gt;GetPromptDialog(getter_AddRefs(dialog));</span>
<a href="#l20.124"></a><span id="l20.124">         if (NS_SUCCEEDED(rv))</span>
<a href="#l20.125"></a><span id="l20.125">         {</span>
<a href="#l20.126"></a><span id="l20.126">           bool dialogResult;</span>
<a href="#l20.127"></a><span id="l20.127">           rv = dialog-&gt;Confirm(nullptr, confirmMsg.get(), &amp;dialogResult);</span>
<a href="#l20.128"></a><span id="l20.128">           if (!dialogResult)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mailnews/base/src/nsMsgGroupView.cpp</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgGroupView.cpp</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -749,85 +749,83 @@ NS_IMETHODIMP nsMsgGroupView::CellTextFo</span>
<a href="#l21.4"></a><span id="l21.4">         case nsMsgViewSortType::byDate:</span>
<a href="#l21.5"></a><span id="l21.5">         {</span>
<a href="#l21.6"></a><span id="l21.6">           uint32_t ageBucket = 0;</span>
<a href="#l21.7"></a><span id="l21.7">           GetAgeBucketValue(msgHdr, &amp;ageBucket, rcvDate);</span>
<a href="#l21.8"></a><span id="l21.8">           switch (ageBucket)</span>
<a href="#l21.9"></a><span id="l21.9">           {</span>
<a href="#l21.10"></a><span id="l21.10">           case 1:</span>
<a href="#l21.11"></a><span id="l21.11">             if (m_kTodayString.IsEmpty())</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-              m_kTodayString.Adopt(GetString(NS_LITERAL_STRING(&quot;today&quot;).get()));</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+              m_kTodayString.Adopt(GetString(MOZ_UTF16(&quot;today&quot;)));</span>
<a href="#l21.14"></a><span id="l21.14">             aValue.Assign(m_kTodayString);</span>
<a href="#l21.15"></a><span id="l21.15">             break;</span>
<a href="#l21.16"></a><span id="l21.16">           case 2:</span>
<a href="#l21.17"></a><span id="l21.17">             if (m_kYesterdayString.IsEmpty())</span>
<a href="#l21.18"></a><span id="l21.18" class="difflineminus">-              m_kYesterdayString.Adopt(GetString(NS_LITERAL_STRING(&quot;yesterday&quot;).get()));</span>
<a href="#l21.19"></a><span id="l21.19" class="difflineplus">+              m_kYesterdayString.Adopt(GetString(MOZ_UTF16(&quot;yesterday&quot;)));</span>
<a href="#l21.20"></a><span id="l21.20">             aValue.Assign(m_kYesterdayString);</span>
<a href="#l21.21"></a><span id="l21.21">             break;</span>
<a href="#l21.22"></a><span id="l21.22">           case 3:</span>
<a href="#l21.23"></a><span id="l21.23">             if (m_kLastWeekString.IsEmpty())</span>
<a href="#l21.24"></a><span id="l21.24" class="difflineminus">-              m_kLastWeekString.Adopt(GetString(NS_LITERAL_STRING(&quot;lastWeek&quot;).get()));</span>
<a href="#l21.25"></a><span id="l21.25" class="difflineplus">+              m_kLastWeekString.Adopt(GetString(MOZ_UTF16(&quot;lastWeek&quot;)));</span>
<a href="#l21.26"></a><span id="l21.26">             aValue.Assign(m_kLastWeekString);</span>
<a href="#l21.27"></a><span id="l21.27">             break;</span>
<a href="#l21.28"></a><span id="l21.28">           case 4:</span>
<a href="#l21.29"></a><span id="l21.29">             if (m_kTwoWeeksAgoString.IsEmpty())</span>
<a href="#l21.30"></a><span id="l21.30" class="difflineminus">-              m_kTwoWeeksAgoString.Adopt(GetString(NS_LITERAL_STRING(&quot;twoWeeksAgo&quot;).get()));</span>
<a href="#l21.31"></a><span id="l21.31" class="difflineplus">+              m_kTwoWeeksAgoString.Adopt(GetString(MOZ_UTF16(&quot;twoWeeksAgo&quot;)));</span>
<a href="#l21.32"></a><span id="l21.32">             aValue.Assign(m_kTwoWeeksAgoString);</span>
<a href="#l21.33"></a><span id="l21.33">             break;</span>
<a href="#l21.34"></a><span id="l21.34">           case 5:</span>
<a href="#l21.35"></a><span id="l21.35">             if (m_kOldMailString.IsEmpty())</span>
<a href="#l21.36"></a><span id="l21.36" class="difflineminus">-              m_kOldMailString.Adopt(GetString(NS_LITERAL_STRING(&quot;older&quot;).get()));</span>
<a href="#l21.37"></a><span id="l21.37" class="difflineplus">+              m_kOldMailString.Adopt(GetString(MOZ_UTF16(&quot;older&quot;)));</span>
<a href="#l21.38"></a><span id="l21.38">             aValue.Assign(m_kOldMailString);</span>
<a href="#l21.39"></a><span id="l21.39">             break;</span>
<a href="#l21.40"></a><span id="l21.40">           default:</span>
<a href="#l21.41"></a><span id="l21.41">             NS_ASSERTION(false, &quot;bad age thread&quot;);</span>
<a href="#l21.42"></a><span id="l21.42">             break;</span>
<a href="#l21.43"></a><span id="l21.43">           }</span>
<a href="#l21.44"></a><span id="l21.44">           break;</span>
<a href="#l21.45"></a><span id="l21.45">         }</span>
<a href="#l21.46"></a><span id="l21.46">         case nsMsgViewSortType::byAuthor:</span>
<a href="#l21.47"></a><span id="l21.47">           FetchAuthor(msgHdr, aValue);</span>
<a href="#l21.48"></a><span id="l21.48">           break;</span>
<a href="#l21.49"></a><span id="l21.49">         case nsMsgViewSortType::byStatus:</span>
<a href="#l21.50"></a><span id="l21.50">           rv = FetchStatus(m_flags[aRow], aValue);</span>
<a href="#l21.51"></a><span id="l21.51">           if (aValue.IsEmpty()) {</span>
<a href="#l21.52"></a><span id="l21.52" class="difflineminus">-            tmp_str.Adopt(GetString(NS_LITERAL_STRING(&quot;messagesWithNoStatus&quot;).get()));</span>
<a href="#l21.53"></a><span id="l21.53" class="difflineplus">+            tmp_str.Adopt(GetString(MOZ_UTF16(&quot;messagesWithNoStatus&quot;)));</span>
<a href="#l21.54"></a><span id="l21.54">             aValue.Assign(tmp_str);</span>
<a href="#l21.55"></a><span id="l21.55">           }</span>
<a href="#l21.56"></a><span id="l21.56">           break;</span>
<a href="#l21.57"></a><span id="l21.57">         case nsMsgViewSortType::byTags:</span>
<a href="#l21.58"></a><span id="l21.58">           rv = FetchTags(msgHdr, aValue);</span>
<a href="#l21.59"></a><span id="l21.59">           if (aValue.IsEmpty()) {</span>
<a href="#l21.60"></a><span id="l21.60" class="difflineminus">-            tmp_str.Adopt(GetString(NS_LITERAL_STRING(&quot;untaggedMessages&quot;).get()));</span>
<a href="#l21.61"></a><span id="l21.61" class="difflineplus">+            tmp_str.Adopt(GetString(MOZ_UTF16(&quot;untaggedMessages&quot;)));</span>
<a href="#l21.62"></a><span id="l21.62">             aValue.Assign(tmp_str);</span>
<a href="#l21.63"></a><span id="l21.63">           }</span>
<a href="#l21.64"></a><span id="l21.64">           break;</span>
<a href="#l21.65"></a><span id="l21.65">         case nsMsgViewSortType::byPriority:</span>
<a href="#l21.66"></a><span id="l21.66">           FetchPriority(msgHdr, aValue);</span>
<a href="#l21.67"></a><span id="l21.67">           if (aValue.IsEmpty()) {</span>
<a href="#l21.68"></a><span id="l21.68" class="difflineminus">-            tmp_str.Adopt(GetString(NS_LITERAL_STRING(&quot;noPriority&quot;).get()));</span>
<a href="#l21.69"></a><span id="l21.69" class="difflineplus">+            tmp_str.Adopt(GetString(MOZ_UTF16(&quot;noPriority&quot;)));</span>
<a href="#l21.70"></a><span id="l21.70">             aValue.Assign(tmp_str);</span>
<a href="#l21.71"></a><span id="l21.71">           }</span>
<a href="#l21.72"></a><span id="l21.72">           break;</span>
<a href="#l21.73"></a><span id="l21.73">         case nsMsgViewSortType::byAccount:</span>
<a href="#l21.74"></a><span id="l21.74">           FetchAccount(msgHdr, aValue);</span>
<a href="#l21.75"></a><span id="l21.75">           break;</span>
<a href="#l21.76"></a><span id="l21.76">         case nsMsgViewSortType::byRecipient:</span>
<a href="#l21.77"></a><span id="l21.77">           FetchRecipients(msgHdr, aValue);</span>
<a href="#l21.78"></a><span id="l21.78">           break;</span>
<a href="#l21.79"></a><span id="l21.79">         case nsMsgViewSortType::byAttachments:</span>
<a href="#l21.80"></a><span id="l21.80" class="difflineminus">-          tmp_str.Adopt(GetString(flags &amp; nsMsgMessageFlags::Attachment</span>
<a href="#l21.81"></a><span id="l21.81" class="difflineminus">-            ? NS_LITERAL_STRING(&quot;attachments&quot;).get()</span>
<a href="#l21.82"></a><span id="l21.82" class="difflineminus">-            : NS_LITERAL_STRING(&quot;noAttachments&quot;).get()));</span>
<a href="#l21.83"></a><span id="l21.83" class="difflineplus">+          tmp_str.Adopt(GetString(flags &amp; nsMsgMessageFlags::Attachment ?</span>
<a href="#l21.84"></a><span id="l21.84" class="difflineplus">+            MOZ_UTF16(&quot;attachments&quot;) : MOZ_UTF16(&quot;noAttachments&quot;)));</span>
<a href="#l21.85"></a><span id="l21.85">           aValue.Assign(tmp_str);</span>
<a href="#l21.86"></a><span id="l21.86">           break;</span>
<a href="#l21.87"></a><span id="l21.87">         case nsMsgViewSortType::byFlagged:</span>
<a href="#l21.88"></a><span id="l21.88" class="difflineminus">-          tmp_str.Adopt(GetString(flags &amp; nsMsgMessageFlags::Marked</span>
<a href="#l21.89"></a><span id="l21.89" class="difflineminus">-            ? NS_LITERAL_STRING(&quot;groupFlagged&quot;).get()</span>
<a href="#l21.90"></a><span id="l21.90" class="difflineminus">-            : NS_LITERAL_STRING(&quot;notFlagged&quot;).get()));</span>
<a href="#l21.91"></a><span id="l21.91" class="difflineplus">+          tmp_str.Adopt(GetString(flags &amp; nsMsgMessageFlags::Marked ?</span>
<a href="#l21.92"></a><span id="l21.92" class="difflineplus">+            MOZ_UTF16(&quot;groupFlagged&quot;) : MOZ_UTF16(&quot;notFlagged&quot;)));</span>
<a href="#l21.93"></a><span id="l21.93">           aValue.Assign(tmp_str);</span>
<a href="#l21.94"></a><span id="l21.94">           break;</span>
<a href="#l21.95"></a><span id="l21.95">         // byLocation is a special case; we don't want to have duplicate</span>
<a href="#l21.96"></a><span id="l21.96">         //  all this logic in nsMsgSearchDBView, and its hash key is what we</span>
<a href="#l21.97"></a><span id="l21.97">         //  want anyways, so just copy it across.</span>
<a href="#l21.98"></a><span id="l21.98">         case nsMsgViewSortType::byLocation:</span>
<a href="#l21.99"></a><span id="l21.99">           aValue = hashKey;</span>
<a href="#l21.100"></a><span id="l21.100">           break;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mailnews/base/src/nsMsgPrintEngine.cpp</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgPrintEngine.cpp</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -74,17 +74,17 @@ nsMsgPrintEngine::OnStateChange(nsIWebPr</span>
<a href="#l22.4"></a><span id="l22.4"> {</span>
<a href="#l22.5"></a><span id="l22.5">   nsresult rv = NS_OK;</span>
<a href="#l22.6"></a><span id="l22.6"> </span>
<a href="#l22.7"></a><span id="l22.7">   // top-level document load data</span>
<a href="#l22.8"></a><span id="l22.8">   if (progressStateFlags &amp; nsIWebProgressListener::STATE_IS_DOCUMENT) {</span>
<a href="#l22.9"></a><span id="l22.9">     if (progressStateFlags &amp; nsIWebProgressListener::STATE_START) {</span>
<a href="#l22.10"></a><span id="l22.10">       // Tell the user we are loading...</span>
<a href="#l22.11"></a><span id="l22.11">       nsString msg;</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-      GetString(NS_LITERAL_STRING(&quot;LoadingMessageToPrint&quot;).get(), msg);</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+      GetString(MOZ_UTF16(&quot;LoadingMessageToPrint&quot;), msg);</span>
<a href="#l22.14"></a><span id="l22.14">       SetStatusMessage(msg);</span>
<a href="#l22.15"></a><span id="l22.15">     }</span>
<a href="#l22.16"></a><span id="l22.16"> </span>
<a href="#l22.17"></a><span id="l22.17">     if (progressStateFlags &amp; nsIWebProgressListener::STATE_STOP) {</span>
<a href="#l22.18"></a><span id="l22.18">       nsCOMPtr&lt;nsIDocumentLoader&gt; docLoader(do_QueryInterface(aWebProgress));</span>
<a href="#l22.19"></a><span id="l22.19">       if (docLoader) </span>
<a href="#l22.20"></a><span id="l22.20">       {</span>
<a href="#l22.21"></a><span id="l22.21">         // Check to see if the document DOMWin that is finished loading is the same</span>
<a href="#l22.22"></a><span id="l22.22" class="difflineat">@@ -117,17 +117,17 @@ nsMsgPrintEngine::OnStateChange(nsIWebPr</span>
<a href="#l22.23"></a><span id="l22.23">         // loading the documents. If it is NULL (or not a DocLoader) then it </span>
<a href="#l22.24"></a><span id="l22.24">         // it coming from Printing</span>
<a href="#l22.25"></a><span id="l22.25">         if (docLoader) {</span>
<a href="#l22.26"></a><span id="l22.26">           // Now, fire off the print operation!</span>
<a href="#l22.27"></a><span id="l22.27">           rv = NS_ERROR_FAILURE;</span>
<a href="#l22.28"></a><span id="l22.28"> </span>
<a href="#l22.29"></a><span id="l22.29">           // Tell the user the message is loaded...</span>
<a href="#l22.30"></a><span id="l22.30">           nsString msg;</span>
<a href="#l22.31"></a><span id="l22.31" class="difflineminus">-          GetString(NS_LITERAL_STRING(&quot;MessageLoaded&quot;).get(), msg);</span>
<a href="#l22.32"></a><span id="l22.32" class="difflineplus">+          GetString(MOZ_UTF16(&quot;MessageLoaded&quot;), msg);</span>
<a href="#l22.33"></a><span id="l22.33">           SetStatusMessage(msg);</span>
<a href="#l22.34"></a><span id="l22.34"> </span>
<a href="#l22.35"></a><span id="l22.35">           NS_ASSERTION(mDocShell,&quot;can't print, there is no docshell&quot;);</span>
<a href="#l22.36"></a><span id="l22.36">           if ( (!mDocShell) || (!aRequest) ) </span>
<a href="#l22.37"></a><span id="l22.37">           {</span>
<a href="#l22.38"></a><span id="l22.38">             return StartNextPrintOperation();</span>
<a href="#l22.39"></a><span id="l22.39">           }</span>
<a href="#l22.40"></a><span id="l22.40">           nsCOMPtr&lt;nsIChannel&gt; aChannel = do_QueryInterface(aRequest);</span>
<a href="#l22.41"></a><span id="l22.41" class="difflineat">@@ -234,17 +234,17 @@ nsMsgPrintEngine::SetWindow(nsIDOMWindow</span>
<a href="#l22.42"></a><span id="l22.42"> </span>
<a href="#l22.43"></a><span id="l22.43">   nsCOMPtr&lt;nsIDocShellTreeItem&gt; rootAsItem;</span>
<a href="#l22.44"></a><span id="l22.44">   docShellAsItem-&gt;GetSameTypeRootTreeItem(getter_AddRefs(rootAsItem));</span>
<a href="#l22.45"></a><span id="l22.45"> </span>
<a href="#l22.46"></a><span id="l22.46">   nsCOMPtr&lt;nsIDocShellTreeNode&gt; rootAsNode(do_QueryInterface(rootAsItem));</span>
<a href="#l22.47"></a><span id="l22.47">   NS_ENSURE_TRUE(rootAsNode, NS_ERROR_FAILURE);</span>
<a href="#l22.48"></a><span id="l22.48"> </span>
<a href="#l22.49"></a><span id="l22.49">   nsCOMPtr&lt;nsIDocShellTreeItem&gt; childItem;</span>
<a href="#l22.50"></a><span id="l22.50" class="difflineminus">-  rootAsNode-&gt;FindChildWithName(NS_LITERAL_STRING(&quot;content&quot;).get(), true,</span>
<a href="#l22.51"></a><span id="l22.51" class="difflineplus">+  rootAsNode-&gt;FindChildWithName(MOZ_UTF16(&quot;content&quot;), true,</span>
<a href="#l22.52"></a><span id="l22.52"> 				false, nullptr, nullptr,</span>
<a href="#l22.53"></a><span id="l22.53"> 				getter_AddRefs(childItem));</span>
<a href="#l22.54"></a><span id="l22.54"> </span>
<a href="#l22.55"></a><span id="l22.55">   mDocShell = do_QueryInterface(childItem);</span>
<a href="#l22.56"></a><span id="l22.56"> </span>
<a href="#l22.57"></a><span id="l22.57">   if(mDocShell)</span>
<a href="#l22.58"></a><span id="l22.58">     SetupObserver();</span>
<a href="#l22.59"></a><span id="l22.59"> </span>
<a href="#l22.60"></a><span id="l22.60" class="difflineat">@@ -311,17 +311,17 @@ nsMsgPrintEngine::SetPrintURICount(int32</span>
<a href="#l22.61"></a><span id="l22.61"> </span>
<a href="#l22.62"></a><span id="l22.62"> NS_IMETHODIMP</span>
<a href="#l22.63"></a><span id="l22.63"> nsMsgPrintEngine::StartPrintOperation(nsIPrintSettings* aPS)</span>
<a href="#l22.64"></a><span id="l22.64"> {</span>
<a href="#l22.65"></a><span id="l22.65">   NS_ENSURE_ARG_POINTER(aPS);</span>
<a href="#l22.66"></a><span id="l22.66">   mPrintSettings = aPS;</span>
<a href="#l22.67"></a><span id="l22.67"> </span>
<a href="#l22.68"></a><span id="l22.68">   // Load the about:blank on the tail end...</span>
<a href="#l22.69"></a><span id="l22.69" class="difflineminus">-  nsresult rv = AddPrintURI(NS_LITERAL_STRING(&quot;about:blank&quot;).get()); </span>
<a href="#l22.70"></a><span id="l22.70" class="difflineplus">+  nsresult rv = AddPrintURI(MOZ_UTF16(&quot;about:blank&quot;)); </span>
<a href="#l22.71"></a><span id="l22.71">   if (NS_FAILED(rv)) return rv; </span>
<a href="#l22.72"></a><span id="l22.72">   return StartNextPrintOperation();</span>
<a href="#l22.73"></a><span id="l22.73"> }</span>
<a href="#l22.74"></a><span id="l22.74"> </span>
<a href="#l22.75"></a><span id="l22.75"> //----------------------------------------------------------------------</span>
<a href="#l22.76"></a><span id="l22.76"> // Set up to use the &quot;pluggable&quot; Print Progress Dialog</span>
<a href="#l22.77"></a><span id="l22.77"> nsresult</span>
<a href="#l22.78"></a><span id="l22.78"> nsMsgPrintEngine::ShowProgressDialog(bool aIsForPrinting, bool&amp; aDoNotify)</span>
<a href="#l22.79"></a><span id="l22.79" class="difflineat">@@ -377,19 +377,19 @@ nsMsgPrintEngine::ShowProgressDialog(boo</span>
<a href="#l22.80"></a><span id="l22.80"> </span>
<a href="#l22.81"></a><span id="l22.81">         if (showProgressDialog) </span>
<a href="#l22.82"></a><span id="l22.82">         {</span>
<a href="#l22.83"></a><span id="l22.83">           nsIWebProgressListener* wpl = static_cast&lt;nsIWebProgressListener*&gt;(mPrintProgressListener.get());</span>
<a href="#l22.84"></a><span id="l22.84">           NS_ASSERTION(wpl, &quot;nsIWebProgressListener is NULL!&quot;);</span>
<a href="#l22.85"></a><span id="l22.85">           NS_ADDREF(wpl);</span>
<a href="#l22.86"></a><span id="l22.86">           nsString msg;</span>
<a href="#l22.87"></a><span id="l22.87">           if (mIsDoingPrintPreview) {</span>
<a href="#l22.88"></a><span id="l22.88" class="difflineminus">-            GetString(NS_LITERAL_STRING(&quot;LoadingMailMsgForPrintPreview&quot;).get(), msg);</span>
<a href="#l22.89"></a><span id="l22.89" class="difflineplus">+            GetString(MOZ_UTF16(&quot;LoadingMailMsgForPrintPreview&quot;), msg);</span>
<a href="#l22.90"></a><span id="l22.90">           } else {</span>
<a href="#l22.91"></a><span id="l22.91" class="difflineminus">-            GetString(NS_LITERAL_STRING(&quot;LoadingMailMsgForPrint&quot;).get(), msg);</span>
<a href="#l22.92"></a><span id="l22.92" class="difflineplus">+            GetString(MOZ_UTF16(&quot;LoadingMailMsgForPrint&quot;), msg);</span>
<a href="#l22.93"></a><span id="l22.93">           }</span>
<a href="#l22.94"></a><span id="l22.94">           if (!msg.IsEmpty()) </span>
<a href="#l22.95"></a><span id="l22.95">             mPrintProgressParams-&gt;SetDocTitle(msg.get());</span>
<a href="#l22.96"></a><span id="l22.96">         }</span>
<a href="#l22.97"></a><span id="l22.97">       }</span>
<a href="#l22.98"></a><span id="l22.98">     }</span>
<a href="#l22.99"></a><span id="l22.99">   }</span>
<a href="#l22.100"></a><span id="l22.100">   return rv;</span>
<a href="#l22.101"></a><span id="l22.101" class="difflineat">@@ -410,17 +410,17 @@ nsMsgPrintEngine::StartNextPrintOperatio</span>
<a href="#l22.102"></a><span id="l22.102">   // First, check if we are at the end of this stuff!</span>
<a href="#l22.103"></a><span id="l22.103">   if (mCurrentlyPrintingURI &gt;= (int32_t)mURIArray.Length())</span>
<a href="#l22.104"></a><span id="l22.104">   {</span>
<a href="#l22.105"></a><span id="l22.105">     // This is the end...dum, dum, dum....my only friend...the end</span>
<a href="#l22.106"></a><span id="l22.106">     mWindow-&gt;Close();</span>
<a href="#l22.107"></a><span id="l22.107"> </span>
<a href="#l22.108"></a><span id="l22.108">     // Tell the user we are done...</span>
<a href="#l22.109"></a><span id="l22.109">     nsString msg;</span>
<a href="#l22.110"></a><span id="l22.110" class="difflineminus">-    GetString(NS_LITERAL_STRING(&quot;PrintingComplete&quot;).get(), msg);</span>
<a href="#l22.111"></a><span id="l22.111" class="difflineplus">+    GetString(MOZ_UTF16(&quot;PrintingComplete&quot;), msg);</span>
<a href="#l22.112"></a><span id="l22.112">     SetStatusMessage(msg);</span>
<a href="#l22.113"></a><span id="l22.113">     return NS_OK;</span>
<a href="#l22.114"></a><span id="l22.114">   }</span>
<a href="#l22.115"></a><span id="l22.115"> </span>
<a href="#l22.116"></a><span id="l22.116">   if (!mDocShell)</span>
<a href="#l22.117"></a><span id="l22.117">     return StartNextPrintOperation();</span>
<a href="#l22.118"></a><span id="l22.118"> </span>
<a href="#l22.119"></a><span id="l22.119">   const nsString &amp;uri = mURIArray[mCurrentlyPrintingURI];</span>
<a href="#l22.120"></a><span id="l22.120" class="difflineat">@@ -599,17 +599,17 @@ nsMsgPrintEngine::PrintMsgWindow()</span>
<a href="#l22.121"></a><span id="l22.121">         mWebBrowserPrint-&gt;GetGlobalPrintSettings(getter_AddRefs(mPrintSettings));</span>
<a href="#l22.122"></a><span id="l22.122">       }</span>
<a href="#l22.123"></a><span id="l22.123">       </span>
<a href="#l22.124"></a><span id="l22.124">       // fix for bug #118887 and bug #176016</span>
<a href="#l22.125"></a><span id="l22.125">       // don't show the actual url when printing mail messages or addressbook cards.</span>
<a href="#l22.126"></a><span id="l22.126">       // for mail, it can review the salt.  for addrbook, it's a data:// url, which</span>
<a href="#l22.127"></a><span id="l22.127">       // means nothing to the end user.</span>
<a href="#l22.128"></a><span id="l22.128">       // needs to be &quot; &quot; and not &quot;&quot; or nullptr, otherwise, we'll still print the url</span>
<a href="#l22.129"></a><span id="l22.129" class="difflineminus">-      mPrintSettings-&gt;SetDocURL(NS_LITERAL_STRING(&quot; &quot;).get());</span>
<a href="#l22.130"></a><span id="l22.130" class="difflineplus">+      mPrintSettings-&gt;SetDocURL(MOZ_UTF16(&quot; &quot;));</span>
<a href="#l22.131"></a><span id="l22.131"> </span>
<a href="#l22.132"></a><span id="l22.132">       nsresult rv = NS_ERROR_FAILURE;</span>
<a href="#l22.133"></a><span id="l22.133">       if (mIsDoingPrintPreview) </span>
<a href="#l22.134"></a><span id="l22.134">       {</span>
<a href="#l22.135"></a><span id="l22.135">         if (mStartupPPObs) {</span>
<a href="#l22.136"></a><span id="l22.136">           rv = mStartupPPObs-&gt;Observe(nullptr, nullptr, nullptr);</span>
<a href="#l22.137"></a><span id="l22.137">         }</span>
<a href="#l22.138"></a><span id="l22.138">       } </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mailnews/base/src/nsMsgStatusFeedback.cpp</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgStatusFeedback.cpp</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -82,17 +82,17 @@ nsMsgStatusFeedback::OnStateChange(nsIWe</span>
<a href="#l23.4"></a><span id="l23.4">   NS_ENSURE_TRUE(mBundle, NS_ERROR_NULL_POINTER);</span>
<a href="#l23.5"></a><span id="l23.5">   if (aProgressStateFlags &amp; STATE_IS_NETWORK)</span>
<a href="#l23.6"></a><span id="l23.6">   {</span>
<a href="#l23.7"></a><span id="l23.7">     if (aProgressStateFlags &amp; STATE_START)</span>
<a href="#l23.8"></a><span id="l23.8">     {</span>
<a href="#l23.9"></a><span id="l23.9">       m_lastPercent = 0;</span>
<a href="#l23.10"></a><span id="l23.10">       StartMeteors();</span>
<a href="#l23.11"></a><span id="l23.11">       nsString loadingDocument;</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-      rv = mBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;documentLoading&quot;).get(),</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+      rv = mBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;documentLoading&quot;),</span>
<a href="#l23.14"></a><span id="l23.14">                                       getter_Copies(loadingDocument));</span>
<a href="#l23.15"></a><span id="l23.15">       if (NS_SUCCEEDED(rv))</span>
<a href="#l23.16"></a><span id="l23.16">         ShowStatusString(loadingDocument);</span>
<a href="#l23.17"></a><span id="l23.17">     }</span>
<a href="#l23.18"></a><span id="l23.18">     else if (aProgressStateFlags &amp; STATE_STOP)</span>
<a href="#l23.19"></a><span id="l23.19">     {</span>
<a href="#l23.20"></a><span id="l23.20">       // if we are loading message for display purposes, this STATE_STOP notification is </span>
<a href="#l23.21"></a><span id="l23.21">       // the only notification we get when layout is actually done rendering the message. We need</span>
<a href="#l23.22"></a><span id="l23.22" class="difflineat">@@ -136,17 +136,17 @@ nsMsgStatusFeedback::OnStateChange(nsIWe</span>
<a href="#l23.23"></a><span id="l23.23">               if (msgFolder &amp;&amp; msgHdr)</span>
<a href="#l23.24"></a><span id="l23.24">                 msgFolder-&gt;NotifyPropertyFlagChanged(msgHdr, m_msgLoadedAtom, 0, 1);</span>
<a href="#l23.25"></a><span id="l23.25">             }</span>
<a href="#l23.26"></a><span id="l23.26">           }</span>
<a href="#l23.27"></a><span id="l23.27">         }</span>
<a href="#l23.28"></a><span id="l23.28">       }</span>
<a href="#l23.29"></a><span id="l23.29">       StopMeteors();</span>
<a href="#l23.30"></a><span id="l23.30">       nsString documentDone;</span>
<a href="#l23.31"></a><span id="l23.31" class="difflineminus">-      rv = mBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;documentDone&quot;).get(),</span>
<a href="#l23.32"></a><span id="l23.32" class="difflineplus">+      rv = mBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;documentDone&quot;),</span>
<a href="#l23.33"></a><span id="l23.33">                                       getter_Copies(documentDone));</span>
<a href="#l23.34"></a><span id="l23.34">       if (NS_SUCCEEDED(rv))</span>
<a href="#l23.35"></a><span id="l23.35">         ShowStatusString(documentDone);</span>
<a href="#l23.36"></a><span id="l23.36">     }</span>
<a href="#l23.37"></a><span id="l23.37">   }</span>
<a href="#l23.38"></a><span id="l23.38">   return NS_OK;</span>
<a href="#l23.39"></a><span id="l23.39"> }</span>
<a href="#l23.40"></a><span id="l23.40"> </span>
<a href="#l23.41"></a><span id="l23.41" class="difflineat">@@ -286,17 +286,17 @@ NS_IMETHODIMP nsMsgStatusFeedback::OnSta</span>
<a href="#l23.42"></a><span id="l23.42">   nsString statusMessage;</span>
<a href="#l23.43"></a><span id="l23.43">   if (!str.IsEmpty() &amp;&amp; str.Find(accountName) == kNotFound)</span>
<a href="#l23.44"></a><span id="l23.44">   {</span>
<a href="#l23.45"></a><span id="l23.45">     nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l23.46"></a><span id="l23.46">     rv = sbs-&gt;CreateBundle(MSGS_URL, getter_AddRefs(bundle));</span>
<a href="#l23.47"></a><span id="l23.47">     const PRUnichar *params[] = { accountName.get(),</span>
<a href="#l23.48"></a><span id="l23.48">                                   str.get() };</span>
<a href="#l23.49"></a><span id="l23.49">     rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l23.50"></a><span id="l23.50" class="difflineminus">-      NS_LITERAL_STRING(&quot;statusMessage&quot;).get(),</span>
<a href="#l23.51"></a><span id="l23.51" class="difflineplus">+      MOZ_UTF16(&quot;statusMessage&quot;),</span>
<a href="#l23.52"></a><span id="l23.52">       params, 2, getter_Copies(statusMessage));</span>
<a href="#l23.53"></a><span id="l23.53">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l23.54"></a><span id="l23.54">   }</span>
<a href="#l23.55"></a><span id="l23.55">   else</span>
<a href="#l23.56"></a><span id="l23.56">   {</span>
<a href="#l23.57"></a><span id="l23.57">     statusMessage.Assign(str);</span>
<a href="#l23.58"></a><span id="l23.58">   }</span>
<a href="#l23.59"></a><span id="l23.59">   return ShowStatusString(statusMessage);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mailnews/base/src/nsMsgWindow.cpp</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgWindow.cpp</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -83,17 +83,17 @@ NS_IMETHODIMP nsMsgWindow::GetMessageWin</span>
<a href="#l24.4"></a><span id="l24.4">   {</span>
<a href="#l24.5"></a><span id="l24.5">     // if we don't have a docshell, then we need to look up the message pane docshell</span>
<a href="#l24.6"></a><span id="l24.6">     nsCOMPtr&lt;nsIDocShell&gt; rootShell(do_QueryReferent(mRootDocShellWeak));</span>
<a href="#l24.7"></a><span id="l24.7">     if (rootShell)</span>
<a href="#l24.8"></a><span id="l24.8">     {</span>
<a href="#l24.9"></a><span id="l24.9">       nsCOMPtr&lt;nsIDocShellTreeNode&gt; rootAsNode(do_QueryInterface(rootShell));</span>
<a href="#l24.10"></a><span id="l24.10">       nsCOMPtr&lt;nsIDocShellTreeItem&gt; msgDocShellItem;</span>
<a href="#l24.11"></a><span id="l24.11">       if(rootAsNode)</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-         rootAsNode-&gt;FindChildWithName(NS_LITERAL_STRING(&quot;messagepane&quot;).get(),</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+         rootAsNode-&gt;FindChildWithName(MOZ_UTF16(&quot;messagepane&quot;),</span>
<a href="#l24.14"></a><span id="l24.14">                                        true, false, nullptr, nullptr,</span>
<a href="#l24.15"></a><span id="l24.15">                                        getter_AddRefs(msgDocShellItem));</span>
<a href="#l24.16"></a><span id="l24.16">       NS_ENSURE_TRUE(msgDocShellItem, NS_ERROR_FAILURE);</span>
<a href="#l24.17"></a><span id="l24.17">       docShell = do_QueryInterface(msgDocShellItem);</span>
<a href="#l24.18"></a><span id="l24.18">       // we don't own mMessageWindowDocShell so don't try to keep a reference to it!</span>
<a href="#l24.19"></a><span id="l24.19">       mMessageWindowDocShellWeak = do_GetWeakReference(docShell);</span>
<a href="#l24.20"></a><span id="l24.20">     }</span>
<a href="#l24.21"></a><span id="l24.21">   }</span>
<a href="#l24.22"></a><span id="l24.22" class="difflineat">@@ -473,19 +473,19 @@ NS_IMETHODIMP nsMsgWindow::GetPromptDial</span>
<a href="#l24.23"></a><span id="l24.23"> </span>
<a href="#l24.24"></a><span id="l24.24"> NS_IMETHODIMP</span>
<a href="#l24.25"></a><span id="l24.25"> nsMsgWindow::DisplayHTMLInMessagePane(const nsAString&amp; title, const nsAString&amp; body, bool clearMsgHdr)</span>
<a href="#l24.26"></a><span id="l24.26"> {</span>
<a href="#l24.27"></a><span id="l24.27">   if (clearMsgHdr &amp;&amp; mMsgWindowCommands)</span>
<a href="#l24.28"></a><span id="l24.28">     mMsgWindowCommands-&gt;ClearMsgPane();</span>
<a href="#l24.29"></a><span id="l24.29"> </span>
<a href="#l24.30"></a><span id="l24.30">   nsString htmlStr;</span>
<a href="#l24.31"></a><span id="l24.31" class="difflineminus">-  htmlStr.Append(NS_LITERAL_STRING(&quot;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=\&quot;Content-Type\&quot; content=\&quot;text/html; charset=UTF-8\&quot;&gt;&lt;/head&gt;&lt;body&gt;&quot;).get());</span>
<a href="#l24.32"></a><span id="l24.32" class="difflineplus">+  htmlStr.Append(NS_LITERAL_STRING(&quot;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=\&quot;Content-Type\&quot; content=\&quot;text/html; charset=UTF-8\&quot;&gt;&lt;/head&gt;&lt;body&gt;&quot;));</span>
<a href="#l24.33"></a><span id="l24.33">   htmlStr.Append(body);</span>
<a href="#l24.34"></a><span id="l24.34" class="difflineminus">-  htmlStr.Append(NS_LITERAL_STRING(&quot;&lt;/body&gt;&lt;/html&gt;&quot;).get());</span>
<a href="#l24.35"></a><span id="l24.35" class="difflineplus">+  htmlStr.Append(NS_LITERAL_STRING(&quot;&lt;/body&gt;&lt;/html&gt;&quot;));</span>
<a href="#l24.36"></a><span id="l24.36"> </span>
<a href="#l24.37"></a><span id="l24.37">   char *encodedHtml = PL_Base64Encode(NS_ConvertUTF16toUTF8(htmlStr).get(), 0, nullptr);</span>
<a href="#l24.38"></a><span id="l24.38">   if (!encodedHtml)</span>
<a href="#l24.39"></a><span id="l24.39">     return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l24.40"></a><span id="l24.40"> </span>
<a href="#l24.41"></a><span id="l24.41">   nsCString dataSpec;</span>
<a href="#l24.42"></a><span id="l24.42">   dataSpec = &quot;data:text/html;base64,&quot;;</span>
<a href="#l24.43"></a><span id="l24.43">   dataSpec += encodedHtml;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mailnews/base/src/nsSpamSettings.cpp</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mailnews/base/src/nsSpamSettings.cpp</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -679,17 +679,17 @@ NS_IMETHODIMP nsSpamSettings::LogJunkHit</span>
<a href="#l25.4"></a><span id="l25.4">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l25.5"></a><span id="l25.5">   rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/filter.properties&quot;,</span>
<a href="#l25.6"></a><span id="l25.6">     getter_AddRefs(bundle));</span>
<a href="#l25.7"></a><span id="l25.7">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l25.8"></a><span id="l25.8"> </span>
<a href="#l25.9"></a><span id="l25.9">   const PRUnichar *junkLogDetectFormatStrings[3] = { authorValue.get(), subjectValue.get(), dateValue.get() };</span>
<a href="#l25.10"></a><span id="l25.10">   nsString junkLogDetectStr;</span>
<a href="#l25.11"></a><span id="l25.11">   rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-    NS_LITERAL_STRING(&quot;junkLogDetectStr&quot;).get(),</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+    MOZ_UTF16(&quot;junkLogDetectStr&quot;),</span>
<a href="#l25.14"></a><span id="l25.14">     junkLogDetectFormatStrings, 3,</span>
<a href="#l25.15"></a><span id="l25.15">     getter_Copies(junkLogDetectStr));</span>
<a href="#l25.16"></a><span id="l25.16">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l25.17"></a><span id="l25.17"> </span>
<a href="#l25.18"></a><span id="l25.18">   buffer += NS_ConvertUTF16toUTF8(junkLogDetectStr);</span>
<a href="#l25.19"></a><span id="l25.19">   buffer +=  &quot;\n&quot;;</span>
<a href="#l25.20"></a><span id="l25.20"> </span>
<a href="#l25.21"></a><span id="l25.21">   if (aMoveMessage) {</span>
<a href="#l25.22"></a><span id="l25.22" class="difflineat">@@ -701,17 +701,17 @@ NS_IMETHODIMP nsSpamSettings::LogJunkHit</span>
<a href="#l25.23"></a><span id="l25.23">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l25.24"></a><span id="l25.24"> </span>
<a href="#l25.25"></a><span id="l25.25">     NS_ConvertASCIItoUTF16 msgIdValue(msgId);</span>
<a href="#l25.26"></a><span id="l25.26">     NS_ConvertASCIItoUTF16 junkFolderURIValue(junkFolderURI);</span>
<a href="#l25.27"></a><span id="l25.27"> </span>
<a href="#l25.28"></a><span id="l25.28">     const PRUnichar *logMoveFormatStrings[2] = { msgIdValue.get(), junkFolderURIValue.get() };</span>
<a href="#l25.29"></a><span id="l25.29">     nsString logMoveStr;</span>
<a href="#l25.30"></a><span id="l25.30">     rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l25.31"></a><span id="l25.31" class="difflineminus">-      NS_LITERAL_STRING(&quot;logMoveStr&quot;).get(),</span>
<a href="#l25.32"></a><span id="l25.32" class="difflineplus">+      MOZ_UTF16(&quot;logMoveStr&quot;),</span>
<a href="#l25.33"></a><span id="l25.33">       logMoveFormatStrings, 2,</span>
<a href="#l25.34"></a><span id="l25.34">       getter_Copies(logMoveStr));</span>
<a href="#l25.35"></a><span id="l25.35">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l25.36"></a><span id="l25.36"> </span>
<a href="#l25.37"></a><span id="l25.37">     buffer += NS_ConvertUTF16toUTF8(logMoveStr);</span>
<a href="#l25.38"></a><span id="l25.38">     buffer += &quot;\n&quot;;</span>
<a href="#l25.39"></a><span id="l25.39">   }</span>
<a href="#l25.40"></a><span id="l25.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mailnews/base/src/nsSubscribableServer.cpp</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mailnews/base/src/nsSubscribableServer.cpp</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -35,20 +35,20 @@ nsSubscribableServer::Init()</span>
<a href="#l26.4"></a><span id="l26.4">     rv = mRDFService-&gt;GetResource(NS_LITERAL_CSTRING(NC_NAMESPACE_URI &quot;child&quot;),</span>
<a href="#l26.5"></a><span id="l26.5">                                   getter_AddRefs(kNC_Child));</span>
<a href="#l26.6"></a><span id="l26.6">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l26.7"></a><span id="l26.7"> </span>
<a href="#l26.8"></a><span id="l26.8">     rv = mRDFService-&gt;GetResource(NS_LITERAL_CSTRING(NC_NAMESPACE_URI &quot;Subscribed&quot;),</span>
<a href="#l26.9"></a><span id="l26.9">                                   getter_AddRefs(kNC_Subscribed));</span>
<a href="#l26.10"></a><span id="l26.10">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l26.11"></a><span id="l26.11"> </span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-    rv = mRDFService-&gt;GetLiteral(NS_LITERAL_STRING(&quot;true&quot;).get(),getter_AddRefs(kTrueLiteral));</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+    rv = mRDFService-&gt;GetLiteral(MOZ_UTF16(&quot;true&quot;), getter_AddRefs(kTrueLiteral));</span>
<a href="#l26.14"></a><span id="l26.14">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l26.15"></a><span id="l26.15"> </span>
<a href="#l26.16"></a><span id="l26.16" class="difflineminus">-    rv = mRDFService-&gt;GetLiteral(NS_LITERAL_STRING(&quot;false&quot;).get(),getter_AddRefs(kFalseLiteral));</span>
<a href="#l26.17"></a><span id="l26.17" class="difflineplus">+    rv = mRDFService-&gt;GetLiteral(MOZ_UTF16(&quot;false&quot;), getter_AddRefs(kFalseLiteral));</span>
<a href="#l26.18"></a><span id="l26.18">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l26.19"></a><span id="l26.19">     return NS_OK;</span>
<a href="#l26.20"></a><span id="l26.20"> }</span>
<a href="#l26.21"></a><span id="l26.21"> </span>
<a href="#l26.22"></a><span id="l26.22"> nsSubscribableServer::~nsSubscribableServer(void)</span>
<a href="#l26.23"></a><span id="l26.23"> {</span>
<a href="#l26.24"></a><span id="l26.24">     nsresult rv = NS_OK;</span>
<a href="#l26.25"></a><span id="l26.25"> #ifdef DEBUG_seth</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mailnews/base/src/nsSubscribeDataSource.cpp</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mailnews/base/src/nsSubscribeDataSource.cpp</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -62,20 +62,20 @@ nsSubscribeDataSource::Init()</span>
<a href="#l27.4"></a><span id="l27.4">     rv = mRDFService-&gt;GetResource(NS_LITERAL_CSTRING(NC_NAMESPACE_URI &quot;Subscribable&quot;),</span>
<a href="#l27.5"></a><span id="l27.5">                                   getter_AddRefs(kNC_Subscribable));</span>
<a href="#l27.6"></a><span id="l27.6">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l27.7"></a><span id="l27.7"> </span>
<a href="#l27.8"></a><span id="l27.8">     rv = mRDFService-&gt;GetResource(NS_LITERAL_CSTRING(NC_NAMESPACE_URI &quot;ServerType&quot;),</span>
<a href="#l27.9"></a><span id="l27.9">                                   getter_AddRefs(kNC_ServerType));</span>
<a href="#l27.10"></a><span id="l27.10">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l27.11"></a><span id="l27.11"> </span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-    rv = mRDFService-&gt;GetLiteral(NS_LITERAL_STRING(&quot;true&quot;).get(),getter_AddRefs(kTrueLiteral));</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+    rv = mRDFService-&gt;GetLiteral(MOZ_UTF16(&quot;true&quot;), getter_AddRefs(kTrueLiteral));</span>
<a href="#l27.14"></a><span id="l27.14">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l27.15"></a><span id="l27.15" class="difflineminus">-  </span>
<a href="#l27.16"></a><span id="l27.16" class="difflineminus">-    rv = mRDFService-&gt;GetLiteral(NS_LITERAL_STRING(&quot;false&quot;).get(),getter_AddRefs(kFalseLiteral));</span>
<a href="#l27.17"></a><span id="l27.17" class="difflineplus">+</span>
<a href="#l27.18"></a><span id="l27.18" class="difflineplus">+    rv = mRDFService-&gt;GetLiteral(MOZ_UTF16(&quot;false&quot;), getter_AddRefs(kFalseLiteral));</span>
<a href="#l27.19"></a><span id="l27.19">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l27.20"></a><span id="l27.20"> 	return NS_OK;</span>
<a href="#l27.21"></a><span id="l27.21"> }</span>
<a href="#l27.22"></a><span id="l27.22"> </span>
<a href="#l27.23"></a><span id="l27.23"> NS_IMETHODIMP </span>
<a href="#l27.24"></a><span id="l27.24"> nsSubscribeDataSource::GetURI(char * *aURI)</span>
<a href="#l27.25"></a><span id="l27.25"> {</span>
<a href="#l27.26"></a><span id="l27.26">   if ((*aURI = strdup(&quot;rdf:subscribe&quot;)) == nullptr)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mailnews/base/util/nsMsgDBFolder.cpp</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mailnews/base/util/nsMsgDBFolder.cpp</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -1914,25 +1914,25 @@ nsresult nsMsgDBFolder::HandleAutoCompac</span>
<a href="#l28.4"></a><span id="l28.4">         {</span>
<a href="#l28.5"></a><span id="l28.5">           nsCOMPtr &lt;nsIStringBundle&gt; bundle;</span>
<a href="#l28.6"></a><span id="l28.6">           rv = GetBaseStringBundle(getter_AddRefs(bundle));</span>
<a href="#l28.7"></a><span id="l28.7">           NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l28.8"></a><span id="l28.8">           nsString dialogTitle;</span>
<a href="#l28.9"></a><span id="l28.9">           nsString confirmString;</span>
<a href="#l28.10"></a><span id="l28.10">           nsString checkboxText;</span>
<a href="#l28.11"></a><span id="l28.11">           nsString buttonCompactNowText;</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-          rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;autoCompactAllFoldersTitle&quot;).get(), getter_Copies(dialogTitle));</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+          rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;autoCompactAllFoldersTitle&quot;), getter_Copies(dialogTitle));</span>
<a href="#l28.14"></a><span id="l28.14">           NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l28.15"></a><span id="l28.15" class="difflineminus">-          rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;autoCompactAllFolders&quot;).get(), getter_Copies(confirmString));</span>
<a href="#l28.16"></a><span id="l28.16" class="difflineplus">+          rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;autoCompactAllFolders&quot;), getter_Copies(confirmString));</span>
<a href="#l28.17"></a><span id="l28.17">           NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l28.18"></a><span id="l28.18" class="difflineminus">-          rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;autoCompactAlwaysAskCheckbox&quot;).get(),</span>
<a href="#l28.19"></a><span id="l28.19" class="difflineminus">-                                                          getter_Copies(checkboxText));</span>
<a href="#l28.20"></a><span id="l28.20" class="difflineplus">+          rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;autoCompactAlwaysAskCheckbox&quot;),</span>
<a href="#l28.21"></a><span id="l28.21" class="difflineplus">+                                         getter_Copies(checkboxText));</span>
<a href="#l28.22"></a><span id="l28.22">           NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l28.23"></a><span id="l28.23" class="difflineminus">-          rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;compactNowButton&quot;).get(),</span>
<a href="#l28.24"></a><span id="l28.24" class="difflineminus">-                                                          getter_Copies(buttonCompactNowText));</span>
<a href="#l28.25"></a><span id="l28.25" class="difflineplus">+          rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;compactNowButton&quot;),</span>
<a href="#l28.26"></a><span id="l28.26" class="difflineplus">+                                         getter_Copies(buttonCompactNowText));</span>
<a href="#l28.27"></a><span id="l28.27">           NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l28.28"></a><span id="l28.28">           bool alwaysAsk = true; // &quot;Always ask...&quot; - checked by default.</span>
<a href="#l28.29"></a><span id="l28.29">           int32_t buttonPressed = 0;</span>
<a href="#l28.30"></a><span id="l28.30"> </span>
<a href="#l28.31"></a><span id="l28.31">           nsCOMPtr&lt;nsIPrompt&gt; dialog;</span>
<a href="#l28.32"></a><span id="l28.32">           rv = aWindow-&gt;GetPromptDialog(getter_AddRefs(dialog));</span>
<a href="#l28.33"></a><span id="l28.33">           NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l28.34"></a><span id="l28.34"> </span>
<a href="#l28.35"></a><span id="l28.35" class="difflineat">@@ -2914,37 +2914,37 @@ nsMsgDBFolder::initializeStrings()</span>
<a href="#l28.36"></a><span id="l28.36">   nsCOMPtr&lt;nsIStringBundleService&gt; bundleService =</span>
<a href="#l28.37"></a><span id="l28.37">     mozilla::services::GetStringBundleService();</span>
<a href="#l28.38"></a><span id="l28.38">   NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l28.39"></a><span id="l28.39">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l28.40"></a><span id="l28.40">   rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/messenger.properties&quot;,</span>
<a href="#l28.41"></a><span id="l28.41">                                    getter_AddRefs(bundle));</span>
<a href="#l28.42"></a><span id="l28.42">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l28.43"></a><span id="l28.43"> </span>
<a href="#l28.44"></a><span id="l28.44" class="difflineminus">-  bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;inboxFolderName&quot;).get(),</span>
<a href="#l28.45"></a><span id="l28.45" class="difflineplus">+  bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;inboxFolderName&quot;),</span>
<a href="#l28.46"></a><span id="l28.46">                             &amp;kLocalizedInboxName);</span>
<a href="#l28.47"></a><span id="l28.47" class="difflineminus">-  bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;trashFolderName&quot;).get(),</span>
<a href="#l28.48"></a><span id="l28.48" class="difflineplus">+  bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;trashFolderName&quot;),</span>
<a href="#l28.49"></a><span id="l28.49">                             &amp;kLocalizedTrashName);</span>
<a href="#l28.50"></a><span id="l28.50" class="difflineminus">-  bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;sentFolderName&quot;).get(),</span>
<a href="#l28.51"></a><span id="l28.51" class="difflineplus">+  bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;sentFolderName&quot;),</span>
<a href="#l28.52"></a><span id="l28.52">                             &amp;kLocalizedSentName);</span>
<a href="#l28.53"></a><span id="l28.53" class="difflineminus">-  bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;draftsFolderName&quot;).get(),</span>
<a href="#l28.54"></a><span id="l28.54" class="difflineplus">+  bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;draftsFolderName&quot;),</span>
<a href="#l28.55"></a><span id="l28.55">                             &amp;kLocalizedDraftsName);</span>
<a href="#l28.56"></a><span id="l28.56" class="difflineminus">-  bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;templatesFolderName&quot;).get(),</span>
<a href="#l28.57"></a><span id="l28.57" class="difflineplus">+  bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;templatesFolderName&quot;),</span>
<a href="#l28.58"></a><span id="l28.58">                             &amp;kLocalizedTemplatesName);</span>
<a href="#l28.59"></a><span id="l28.59" class="difflineminus">-  bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;junkFolderName&quot;).get(),</span>
<a href="#l28.60"></a><span id="l28.60" class="difflineplus">+  bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;junkFolderName&quot;),</span>
<a href="#l28.61"></a><span id="l28.61">                             &amp;kLocalizedJunkName);</span>
<a href="#l28.62"></a><span id="l28.62" class="difflineminus">-  bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;outboxFolderName&quot;).get(),</span>
<a href="#l28.63"></a><span id="l28.63" class="difflineplus">+  bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;outboxFolderName&quot;),</span>
<a href="#l28.64"></a><span id="l28.64">                             &amp;kLocalizedUnsentName);</span>
<a href="#l28.65"></a><span id="l28.65" class="difflineminus">-  bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;archivesFolderName&quot;).get(),</span>
<a href="#l28.66"></a><span id="l28.66" class="difflineplus">+  bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;archivesFolderName&quot;),</span>
<a href="#l28.67"></a><span id="l28.67">                             &amp;kLocalizedArchivesName);</span>
<a href="#l28.68"></a><span id="l28.68"> </span>
<a href="#l28.69"></a><span id="l28.69">   nsCOMPtr&lt;nsIStringBundle&gt; brandBundle;</span>
<a href="#l28.70"></a><span id="l28.70">   rv = bundleService-&gt;CreateBundle(&quot;chrome://branding/locale/brand.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l28.71"></a><span id="l28.71">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l28.72"></a><span id="l28.72" class="difflineminus">-  bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;brandShortName&quot;).get(),</span>
<a href="#l28.73"></a><span id="l28.73" class="difflineplus">+  bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;brandShortName&quot;),</span>
<a href="#l28.74"></a><span id="l28.74">                             &amp;kLocalizedBrandShortName);</span>
<a href="#l28.75"></a><span id="l28.75">   return NS_OK;</span>
<a href="#l28.76"></a><span id="l28.76"> }</span>
<a href="#l28.77"></a><span id="l28.77"> </span>
<a href="#l28.78"></a><span id="l28.78"> nsresult</span>
<a href="#l28.79"></a><span id="l28.79"> nsMsgDBFolder::createCollationKeyGenerator()</span>
<a href="#l28.80"></a><span id="l28.80"> {</span>
<a href="#l28.81"></a><span id="l28.81">   nsresult rv = NS_OK;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mailnews/base/util/nsMsgI18N.cpp</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mailnews/base/util/nsMsgI18N.cpp</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -228,17 +228,17 @@ bool nsMsgI18Nstateful_charset(const cha</span>
<a href="#l29.4"></a><span id="l29.4"> bool nsMsgI18Nmultibyte_charset(const char *charset)</span>
<a href="#l29.5"></a><span id="l29.5"> {</span>
<a href="#l29.6"></a><span id="l29.6">   nsresult res;</span>
<a href="#l29.7"></a><span id="l29.7">   nsCOMPtr &lt;nsICharsetConverterManager&gt; ccm = do_GetService(NS_CHARSETCONVERTERMANAGER_CONTRACTID, &amp;res);</span>
<a href="#l29.8"></a><span id="l29.8">   bool result = false;</span>
<a href="#l29.9"></a><span id="l29.9"> </span>
<a href="#l29.10"></a><span id="l29.10">   if (NS_SUCCEEDED(res)) {</span>
<a href="#l29.11"></a><span id="l29.11">     nsAutoString charsetData;</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-    res = ccm-&gt;GetCharsetData(charset, NS_LITERAL_STRING(&quot;.isMultibyte&quot;).get(), charsetData);</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+    res = ccm-&gt;GetCharsetData(charset, MOZ_UTF16(&quot;.isMultibyte&quot;), charsetData);</span>
<a href="#l29.14"></a><span id="l29.14">     if (NS_SUCCEEDED(res)) {</span>
<a href="#l29.15"></a><span id="l29.15">       result = charsetData.LowerCaseEqualsLiteral(&quot;true&quot;);</span>
<a href="#l29.16"></a><span id="l29.16">     }</span>
<a href="#l29.17"></a><span id="l29.17">   }</span>
<a href="#l29.18"></a><span id="l29.18"> </span>
<a href="#l29.19"></a><span id="l29.19">   return result;</span>
<a href="#l29.20"></a><span id="l29.20"> }</span>
<a href="#l29.21"></a><span id="l29.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mailnews/base/util/nsMsgIncomingServer.cpp</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mailnews/base/util/nsMsgIncomingServer.cpp</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -1612,21 +1612,21 @@ NS_IMETHODIMP nsMsgIncomingServer::Displ</span>
<a href="#l30.4"></a><span id="l30.4"> </span>
<a href="#l30.5"></a><span id="l30.5">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l30.6"></a><span id="l30.6">   nsresult rv = bundleService-&gt;CreateBundle(BASE_MSGS_URL, getter_AddRefs(bundle));</span>
<a href="#l30.7"></a><span id="l30.7">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l30.8"></a><span id="l30.8">   if (bundle)</span>
<a href="#l30.9"></a><span id="l30.9">   {</span>
<a href="#l30.10"></a><span id="l30.10">     nsString errorMsgTitle;</span>
<a href="#l30.11"></a><span id="l30.11">     nsString errorMsgBody;</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-    bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;nocachedbodybody&quot;).get(), getter_Copies(errorMsgBody));</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineminus">-    bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;nocachedbodytitle&quot;).get(),  getter_Copies(errorMsgTitle));</span>
<a href="#l30.14"></a><span id="l30.14" class="difflineplus">+    bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;nocachedbodybody&quot;), getter_Copies(errorMsgBody));</span>
<a href="#l30.15"></a><span id="l30.15" class="difflineplus">+    bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;nocachedbodytitle&quot;), getter_Copies(errorMsgTitle));</span>
<a href="#l30.16"></a><span id="l30.16">     aMsgWindow-&gt;DisplayHTMLInMessagePane(errorMsgTitle, errorMsgBody, true);</span>
<a href="#l30.17"></a><span id="l30.17">   }</span>
<a href="#l30.18"></a><span id="l30.18" class="difflineminus">-  </span>
<a href="#l30.19"></a><span id="l30.19" class="difflineplus">+</span>
<a href="#l30.20"></a><span id="l30.20">   return NS_OK;</span>
<a href="#l30.21"></a><span id="l30.21"> }</span>
<a href="#l30.22"></a><span id="l30.22"> </span>
<a href="#l30.23"></a><span id="l30.23"> // Called only during the migration process. A unique name is generated for the</span>
<a href="#l30.24"></a><span id="l30.24"> // migrated account.</span>
<a href="#l30.25"></a><span id="l30.25"> NS_IMETHODIMP</span>
<a href="#l30.26"></a><span id="l30.26"> nsMsgIncomingServer::GeneratePrettyNameForMigration(nsAString&amp; aPrettyName)</span>
<a href="#l30.27"></a><span id="l30.27"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mailnews/base/util/nsMsgUtils.cpp</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mailnews/base/util/nsMsgUtils.cpp</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -2119,35 +2119,35 @@ NS_MSG_BASE nsresult MsgPromptLoginFaile</span>
<a href="#l31.4"></a><span id="l31.4">   rv = bundleSvc-&gt;CreateBundle(&quot;chrome://messenger/locale/messenger.properties&quot;,</span>
<a href="#l31.5"></a><span id="l31.5">                                getter_AddRefs(bundle));</span>
<a href="#l31.6"></a><span id="l31.6">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l31.7"></a><span id="l31.7"> </span>
<a href="#l31.8"></a><span id="l31.8">   nsString message;</span>
<a href="#l31.9"></a><span id="l31.9">   NS_ConvertUTF8toUTF16 hostNameUTF16(aHostname);</span>
<a href="#l31.10"></a><span id="l31.10">   const PRUnichar *formatStrings[] = { hostNameUTF16.get() };</span>
<a href="#l31.11"></a><span id="l31.11"> </span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-  rv = bundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;mailServerLoginFailed&quot;).get(),</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+  rv = bundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;mailServerLoginFailed&quot;),</span>
<a href="#l31.14"></a><span id="l31.14">                                     formatStrings, 1,</span>
<a href="#l31.15"></a><span id="l31.15">                                     getter_Copies(message));</span>
<a href="#l31.16"></a><span id="l31.16">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l31.17"></a><span id="l31.17"> </span>
<a href="#l31.18"></a><span id="l31.18">   nsString title;</span>
<a href="#l31.19"></a><span id="l31.19">   rv = bundle-&gt;GetStringFromName(</span>
<a href="#l31.20"></a><span id="l31.20" class="difflineminus">-    NS_LITERAL_STRING(&quot;mailServerLoginFailedTitle&quot;).get(), getter_Copies(title));</span>
<a href="#l31.21"></a><span id="l31.21" class="difflineplus">+    MOZ_UTF16(&quot;mailServerLoginFailedTitle&quot;), getter_Copies(title));</span>
<a href="#l31.22"></a><span id="l31.22">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l31.23"></a><span id="l31.23"> </span>
<a href="#l31.24"></a><span id="l31.24">   nsString button0;</span>
<a href="#l31.25"></a><span id="l31.25">   rv = bundle-&gt;GetStringFromName(</span>
<a href="#l31.26"></a><span id="l31.26" class="difflineminus">-    NS_LITERAL_STRING(&quot;mailServerLoginFailedRetryButton&quot;).get(),</span>
<a href="#l31.27"></a><span id="l31.27" class="difflineplus">+    MOZ_UTF16(&quot;mailServerLoginFailedRetryButton&quot;),</span>
<a href="#l31.28"></a><span id="l31.28">     getter_Copies(button0));</span>
<a href="#l31.29"></a><span id="l31.29">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l31.30"></a><span id="l31.30"> </span>
<a href="#l31.31"></a><span id="l31.31">   nsString button2;</span>
<a href="#l31.32"></a><span id="l31.32">   rv = bundle-&gt;GetStringFromName(</span>
<a href="#l31.33"></a><span id="l31.33" class="difflineminus">-    NS_LITERAL_STRING(&quot;mailServerLoginFailedEnterNewPasswordButton&quot;).get(),</span>
<a href="#l31.34"></a><span id="l31.34" class="difflineplus">+    MOZ_UTF16(&quot;mailServerLoginFailedEnterNewPasswordButton&quot;),</span>
<a href="#l31.35"></a><span id="l31.35">     getter_Copies(button2));</span>
<a href="#l31.36"></a><span id="l31.36">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l31.37"></a><span id="l31.37"> </span>
<a href="#l31.38"></a><span id="l31.38">   bool dummyValue = false;</span>
<a href="#l31.39"></a><span id="l31.39">   return dialog-&gt;ConfirmEx(</span>
<a href="#l31.40"></a><span id="l31.40">     title.get(), message.get(),</span>
<a href="#l31.41"></a><span id="l31.41">     (nsIPrompt::BUTTON_TITLE_IS_STRING * nsIPrompt::BUTTON_POS_0) +</span>
<a href="#l31.42"></a><span id="l31.42">     (nsIPrompt::BUTTON_TITLE_CANCEL * nsIPrompt::BUTTON_POS_1) +</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgCompose.cpp</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgCompose.cpp</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -2017,17 +2017,17 @@ nsresult nsMsgCompose::CreateMessage(con</span>
<a href="#l32.4"></a><span id="l32.4">                 nsresult rv;</span>
<a href="#l32.5"></a><span id="l32.5">                 nsCOMPtr&lt;nsIStringBundleService&gt; bundleService =</span>
<a href="#l32.6"></a><span id="l32.6">                   mozilla::services::GetStringBundleService();</span>
<a href="#l32.7"></a><span id="l32.7">                 NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l32.8"></a><span id="l32.8">                 nsCOMPtr&lt;nsIStringBundle&gt; composeBundle;</span>
<a href="#l32.9"></a><span id="l32.9">                 rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/messengercompose/composeMsgs.properties&quot;,</span>
<a href="#l32.10"></a><span id="l32.10">                                                  getter_AddRefs(composeBundle));</span>
<a href="#l32.11"></a><span id="l32.11">                 NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-                composeBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;messageAttachmentSafeName&quot;).get(),</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+                composeBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;messageAttachmentSafeName&quot;),</span>
<a href="#l32.14"></a><span id="l32.14">                                                  getter_Copies(sanitizedSubj));</span>
<a href="#l32.15"></a><span id="l32.15">               }</span>
<a href="#l32.16"></a><span id="l32.16">               else</span>
<a href="#l32.17"></a><span id="l32.17">                 sanitizedSubj.Assign(subject);</span>
<a href="#l32.18"></a><span id="l32.18"> </span>
<a href="#l32.19"></a><span id="l32.19">               // set the file size</span>
<a href="#l32.20"></a><span id="l32.20">               uint32_t messageSize;</span>
<a href="#l32.21"></a><span id="l32.21">               msgHdr-&gt;GetMessageSize(&amp;messageSize);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgComposeService.cpp</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgComposeService.cpp</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -412,17 +412,17 @@ nsMsgComposeService::GetOrigWindowSelect</span>
<a href="#l33.4"></a><span id="l33.4">   nsCOMPtr&lt;nsIDocShell&gt; rootDocShell;</span>
<a href="#l33.5"></a><span id="l33.5">   rv = aMsgWindow-&gt;GetRootDocShell(getter_AddRefs(rootDocShell));</span>
<a href="#l33.6"></a><span id="l33.6">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l33.7"></a><span id="l33.7"> </span>
<a href="#l33.8"></a><span id="l33.8">   nsCOMPtr&lt;nsIDocShellTreeNode&gt; rootDocShellAsNode(do_QueryInterface(rootDocShell, &amp;rv));</span>
<a href="#l33.9"></a><span id="l33.9">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l33.10"></a><span id="l33.10"> </span>
<a href="#l33.11"></a><span id="l33.11">   nsCOMPtr&lt;nsIDocShellTreeItem&gt; childAsItem;</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-  rv = rootDocShellAsNode-&gt;FindChildWithName(NS_LITERAL_STRING(&quot;messagepane&quot;).get(),</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+  rv = rootDocShellAsNode-&gt;FindChildWithName(MOZ_UTF16(&quot;messagepane&quot;),</span>
<a href="#l33.14"></a><span id="l33.14">                                              true, false, nullptr, nullptr, getter_AddRefs(childAsItem));</span>
<a href="#l33.15"></a><span id="l33.15">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l33.16"></a><span id="l33.16"> </span>
<a href="#l33.17"></a><span id="l33.17">   nsCOMPtr&lt;nsIDocShell&gt; docShell(do_QueryInterface(childAsItem, &amp;rv));</span>
<a href="#l33.18"></a><span id="l33.18">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l33.19"></a><span id="l33.19"> </span>
<a href="#l33.20"></a><span id="l33.20">   nsCOMPtr&lt;nsIDOMWindow&gt; domWindow(do_GetInterface(childAsItem, &amp;rv));</span>
<a href="#l33.21"></a><span id="l33.21">   NS_ENSURE_SUCCESS(rv, rv);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgPrompts.cpp</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgPrompts.cpp</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -64,23 +64,23 @@ nsMsgBuildMessageByName(const PRUnichar </span>
<a href="#l34.4"></a><span id="l34.4"> </span>
<a href="#l34.5"></a><span id="l34.5">   const PRUnichar *params[1] = {path.get()};</span>
<a href="#l34.6"></a><span id="l34.6">   return bundle-&gt;FormatStringFromName(aName, params, 1, getter_Copies(aResult));</span>
<a href="#l34.7"></a><span id="l34.7"> }</span>
<a href="#l34.8"></a><span id="l34.8"> </span>
<a href="#l34.9"></a><span id="l34.9"> nsresult</span>
<a href="#l34.10"></a><span id="l34.10"> nsMsgBuildMessageWithFile(nsIFile *aFile, nsString&amp; aResult)</span>
<a href="#l34.11"></a><span id="l34.11"> {</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-  return nsMsgBuildMessageByName(NS_LITERAL_STRING(&quot;unableToOpenFile&quot;).get(), aFile, aResult);</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+  return nsMsgBuildMessageByName(MOZ_UTF16(&quot;unableToOpenFile&quot;), aFile, aResult);</span>
<a href="#l34.14"></a><span id="l34.14"> }</span>
<a href="#l34.15"></a><span id="l34.15"> </span>
<a href="#l34.16"></a><span id="l34.16"> nsresult</span>
<a href="#l34.17"></a><span id="l34.17"> nsMsgBuildMessageWithTmpFile(nsIFile *aFile, nsString&amp; aResult)</span>
<a href="#l34.18"></a><span id="l34.18"> {</span>
<a href="#l34.19"></a><span id="l34.19" class="difflineminus">-  return nsMsgBuildMessageByName(NS_LITERAL_STRING(&quot;unableToOpenTmpFile&quot;).get(), aFile, aResult);</span>
<a href="#l34.20"></a><span id="l34.20" class="difflineplus">+  return nsMsgBuildMessageByName(MOZ_UTF16(&quot;unableToOpenTmpFile&quot;), aFile, aResult);</span>
<a href="#l34.21"></a><span id="l34.21"> }</span>
<a href="#l34.22"></a><span id="l34.22"> </span>
<a href="#l34.23"></a><span id="l34.23"> nsresult</span>
<a href="#l34.24"></a><span id="l34.24"> nsMsgDisplayMessageByID(nsIPrompt * aPrompt, nsresult msgID, const PRUnichar * windowTitle)</span>
<a href="#l34.25"></a><span id="l34.25"> {</span>
<a href="#l34.26"></a><span id="l34.26">   nsString msg;</span>
<a href="#l34.27"></a><span id="l34.27">   nsMsgGetMessageByID(msgID, msg);</span>
<a href="#l34.28"></a><span id="l34.28">   return nsMsgDisplayMessageByString(aPrompt, msg.get(), windowTitle);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgSend.cpp</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgSend.cpp</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -3984,17 +3984,17 @@ nsMsgComposeAndSend::NotifyListenerOnSto</span>
<a href="#l35.4"></a><span id="l35.4">     NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l35.5"></a><span id="l35.5">     nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l35.6"></a><span id="l35.6">     rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/messengercompose/composeMsgs.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l35.7"></a><span id="l35.7">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l35.8"></a><span id="l35.8"> </span>
<a href="#l35.9"></a><span id="l35.9">     nsString msg;</span>
<a href="#l35.10"></a><span id="l35.10">     const PRUnichar *formatStrings[] = { mSavedToFolderName.get() };</span>
<a href="#l35.11"></a><span id="l35.11"> </span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-    rv = bundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;errorSavingMsg&quot;).get(),</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+    rv = bundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;errorSavingMsg&quot;),</span>
<a href="#l35.14"></a><span id="l35.14">                                       formatStrings, 1,</span>
<a href="#l35.15"></a><span id="l35.15">                                       getter_Copies(msg));</span>
<a href="#l35.16"></a><span id="l35.16">     if (NS_SUCCEEDED(rv))</span>
<a href="#l35.17"></a><span id="l35.17">     {</span>
<a href="#l35.18"></a><span id="l35.18">       bool retry = false;</span>
<a href="#l35.19"></a><span id="l35.19">       nsMsgAskBooleanQuestionByString(prompt, msg.get(), &amp;retry, nullptr);</span>
<a href="#l35.20"></a><span id="l35.20">       if (retry)</span>
<a href="#l35.21"></a><span id="l35.21">       {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/mailnews/compose/src/nsSmtpProtocol.cpp</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/mailnews/compose/src/nsSmtpProtocol.cpp</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -93,17 +93,17 @@ nsresult nsExplainErrorDetails(nsISmtpUr</span>
<a href="#l36.4"></a><span id="l36.4">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l36.5"></a><span id="l36.5"> </span>
<a href="#l36.6"></a><span id="l36.6">   va_start (args, code);</span>
<a href="#l36.7"></a><span id="l36.7"> </span>
<a href="#l36.8"></a><span id="l36.8">   switch (code)</span>
<a href="#l36.9"></a><span id="l36.9">   {</span>
<a href="#l36.10"></a><span id="l36.10">     case NS_ERROR_ILLEGAL_LOCALPART:</span>
<a href="#l36.11"></a><span id="l36.11">       bundle-&gt;GetStringFromName(</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-        NS_LITERAL_STRING(&quot;errorIllegalLocalPart&quot;).get(),</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+        MOZ_UTF16(&quot;errorIllegalLocalPart&quot;),</span>
<a href="#l36.14"></a><span id="l36.14">         getter_Copies(eMsg));</span>
<a href="#l36.15"></a><span id="l36.15">       msg = nsTextFormatter::vsmprintf(eMsg.get(), args);</span>
<a href="#l36.16"></a><span id="l36.16">       break;</span>
<a href="#l36.17"></a><span id="l36.17"> </span>
<a href="#l36.18"></a><span id="l36.18">       case NS_ERROR_SMTP_SERVER_ERROR:</span>
<a href="#l36.19"></a><span id="l36.19">       case NS_ERROR_TCP_READ_ERROR:</span>
<a href="#l36.20"></a><span id="l36.20">       case NS_ERROR_SMTP_TEMP_SIZE_EXCEEDED:</span>
<a href="#l36.21"></a><span id="l36.21">       case NS_ERROR_SMTP_PERM_SIZE_EXCEEDED_1:</span>
<a href="#l36.22"></a><span id="l36.22" class="difflineat">@@ -2043,31 +2043,31 @@ nsSmtpProtocol::PromptForPassword(nsISmt</span>
<a href="#l36.23"></a><span id="l36.23"> </span>
<a href="#l36.24"></a><span id="l36.24">   nsCOMPtr&lt;nsIStringBundle&gt; composeStringBundle;</span>
<a href="#l36.25"></a><span id="l36.25">   nsresult rv = stringService-&gt;CreateBundle(&quot;chrome://messenger/locale/messengercompose/composeMsgs.properties&quot;, getter_AddRefs(composeStringBundle));</span>
<a href="#l36.26"></a><span id="l36.26">   NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l36.27"></a><span id="l36.27"> </span>
<a href="#l36.28"></a><span id="l36.28">   nsString passwordPromptString;</span>
<a href="#l36.29"></a><span id="l36.29">   if(formatStrings[1])</span>
<a href="#l36.30"></a><span id="l36.30">     rv = composeStringBundle-&gt;FormatStringFromName(</span>
<a href="#l36.31"></a><span id="l36.31" class="difflineminus">-      NS_LITERAL_STRING(&quot;smtpEnterPasswordPromptWithUsername&quot;).get(),</span>
<a href="#l36.32"></a><span id="l36.32" class="difflineplus">+      MOZ_UTF16(&quot;smtpEnterPasswordPromptWithUsername&quot;),</span>
<a href="#l36.33"></a><span id="l36.33">       formatStrings, 2, getter_Copies(passwordPromptString));</span>
<a href="#l36.34"></a><span id="l36.34">   else</span>
<a href="#l36.35"></a><span id="l36.35">     rv = composeStringBundle-&gt;FormatStringFromName(</span>
<a href="#l36.36"></a><span id="l36.36" class="difflineminus">-      NS_LITERAL_STRING(&quot;smtpEnterPasswordPrompt&quot;).get(),</span>
<a href="#l36.37"></a><span id="l36.37" class="difflineplus">+      MOZ_UTF16(&quot;smtpEnterPasswordPrompt&quot;),</span>
<a href="#l36.38"></a><span id="l36.38">       formatStrings, 1, getter_Copies(passwordPromptString));</span>
<a href="#l36.39"></a><span id="l36.39">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l36.40"></a><span id="l36.40"> </span>
<a href="#l36.41"></a><span id="l36.41">   nsCOMPtr&lt;nsIAuthPrompt&gt; netPrompt;</span>
<a href="#l36.42"></a><span id="l36.42">   rv = aSmtpUrl-&gt;GetAuthPrompt(getter_AddRefs(netPrompt));</span>
<a href="#l36.43"></a><span id="l36.43">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l36.44"></a><span id="l36.44"> </span>
<a href="#l36.45"></a><span id="l36.45">   nsString passwordTitle;</span>
<a href="#l36.46"></a><span id="l36.46">   rv = composeStringBundle-&gt;GetStringFromName(</span>
<a href="#l36.47"></a><span id="l36.47" class="difflineminus">-    NS_LITERAL_STRING(&quot;smtpEnterPasswordPromptTitle&quot;).get(),</span>
<a href="#l36.48"></a><span id="l36.48" class="difflineplus">+    MOZ_UTF16(&quot;smtpEnterPasswordPromptTitle&quot;),</span>
<a href="#l36.49"></a><span id="l36.49">     getter_Copies(passwordTitle));</span>
<a href="#l36.50"></a><span id="l36.50">   NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l36.51"></a><span id="l36.51"> </span>
<a href="#l36.52"></a><span id="l36.52">   rv = aSmtpServer-&gt;GetPasswordWithUI(passwordPromptString.get(), passwordTitle.get(),</span>
<a href="#l36.53"></a><span id="l36.53">     netPrompt, aPassword);</span>
<a href="#l36.54"></a><span id="l36.54">   NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l36.55"></a><span id="l36.55">   return rv;</span>
<a href="#l36.56"></a><span id="l36.56"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -66,25 +66,25 @@ NS_IMETHODIMP nsMsgMailView::GetPrettyNa</span>
<a href="#l37.4"></a><span id="l37.4">                                     getter_AddRefs(mBundle));</span>
<a href="#l37.5"></a><span id="l37.5">     }</span>
<a href="#l37.6"></a><span id="l37.6"> </span>
<a href="#l37.7"></a><span id="l37.7">     NS_ENSURE_TRUE(mBundle, NS_ERROR_FAILURE);</span>
<a href="#l37.8"></a><span id="l37.8"> </span>
<a href="#l37.9"></a><span id="l37.9">     // see if mName has an associated pretty name inside our string bundle and if so, use that as the pretty name</span>
<a href="#l37.10"></a><span id="l37.10">     // otherwise just return mName</span>
<a href="#l37.11"></a><span id="l37.11">     if (mName.EqualsLiteral(kDefaultViewPeopleIKnow))</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-        rv = mBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;mailViewPeopleIKnow&quot;).get(), aMailViewName);</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+        rv = mBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;mailViewPeopleIKnow&quot;), aMailViewName);</span>
<a href="#l37.14"></a><span id="l37.14">     else if (mName.EqualsLiteral(kDefaultViewRecent))</span>
<a href="#l37.15"></a><span id="l37.15" class="difflineminus">-        rv = mBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;mailViewRecentMail&quot;).get(), aMailViewName);</span>
<a href="#l37.16"></a><span id="l37.16" class="difflineplus">+        rv = mBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;mailViewRecentMail&quot;), aMailViewName);</span>
<a href="#l37.17"></a><span id="l37.17">     else if (mName.EqualsLiteral(kDefaultViewFiveDays))</span>
<a href="#l37.18"></a><span id="l37.18" class="difflineminus">-        rv = mBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;mailViewLastFiveDays&quot;).get(), aMailViewName);</span>
<a href="#l37.19"></a><span id="l37.19" class="difflineplus">+        rv = mBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;mailViewLastFiveDays&quot;), aMailViewName);</span>
<a href="#l37.20"></a><span id="l37.20">     else if (mName.EqualsLiteral(kDefaultViewNotJunk))</span>
<a href="#l37.21"></a><span id="l37.21" class="difflineminus">-        rv = mBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;mailViewNotJunk&quot;).get(), aMailViewName);</span>
<a href="#l37.22"></a><span id="l37.22" class="difflineplus">+        rv = mBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;mailViewNotJunk&quot;), aMailViewName);</span>
<a href="#l37.23"></a><span id="l37.23">     else if (mName.EqualsLiteral(kDefaultViewHasAttachments))</span>
<a href="#l37.24"></a><span id="l37.24" class="difflineminus">-        rv = mBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;mailViewHasAttachments&quot;).get(), aMailViewName);</span>
<a href="#l37.25"></a><span id="l37.25" class="difflineplus">+        rv = mBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;mailViewHasAttachments&quot;), aMailViewName);</span>
<a href="#l37.26"></a><span id="l37.26">     else</span>
<a href="#l37.27"></a><span id="l37.27">         *aMailViewName = ToNewUnicode(mName);</span>
<a href="#l37.28"></a><span id="l37.28"> </span>
<a href="#l37.29"></a><span id="l37.29">     return rv;</span>
<a href="#l37.30"></a><span id="l37.30"> }</span>
<a href="#l37.31"></a><span id="l37.31"> </span>
<a href="#l37.32"></a><span id="l37.32"> NS_IMETHODIMP nsMsgMailView::GetSearchTerms(nsISupportsArray ** aSearchTerms)</span>
<a href="#l37.33"></a><span id="l37.33"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -466,17 +466,17 @@ nsresult nsMsgMdnGenerator::CreateFirstP</span>
<a href="#l38.4"></a><span id="l38.4">     // convert fullName to UTF8 before passing it to MakeMimeAddress</span>
<a href="#l38.5"></a><span id="l38.5">     MakeMimeAddress(NS_ConvertUTF16toUTF8(fullName), m_email, fullAddress);</span>
<a href="#l38.6"></a><span id="l38.6"> </span>
<a href="#l38.7"></a><span id="l38.7">     convbuf = nsMsgI18NEncodeMimePartIIStr(fullAddress.get(),</span>
<a href="#l38.8"></a><span id="l38.8">         true, m_charset.get(), 0, conformToStandard);</span>
<a href="#l38.9"></a><span id="l38.9"> </span>
<a href="#l38.10"></a><span id="l38.10">     parm = PR_smprintf(&quot;From: %s&quot; CRLF, convbuf ? convbuf : m_email.get());</span>
<a href="#l38.11"></a><span id="l38.11"> </span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-    rv = FormatStringFromName(NS_LITERAL_STRING(&quot;MsgMdnMsgSentTo&quot;).get(), NS_ConvertASCIItoUTF16(m_email).get(),</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+    rv = FormatStringFromName(MOZ_UTF16(&quot;MsgMdnMsgSentTo&quot;), NS_ConvertASCIItoUTF16(m_email).get(),</span>
<a href="#l38.14"></a><span id="l38.14">                             getter_Copies(firstPart1));</span>
<a href="#l38.15"></a><span id="l38.15">     if (NS_FAILED(rv))</span>
<a href="#l38.16"></a><span id="l38.16">         return rv;</span>
<a href="#l38.17"></a><span id="l38.17"> </span>
<a href="#l38.18"></a><span id="l38.18">     PUSH_N_FREE_STRING (parm);</span>
<a href="#l38.19"></a><span id="l38.19"> </span>
<a href="#l38.20"></a><span id="l38.20">     PR_Free(convbuf);</span>
<a href="#l38.21"></a><span id="l38.21"> </span>
<a href="#l38.22"></a><span id="l38.22" class="difflineat">@@ -488,42 +488,42 @@ nsresult nsMsgMdnGenerator::CreateFirstP</span>
<a href="#l38.23"></a><span id="l38.23">       PUSH_N_FREE_STRING(tmpBuffer);</span>
<a href="#l38.24"></a><span id="l38.24">     }</span>
<a href="#l38.25"></a><span id="l38.25"> </span>
<a href="#l38.26"></a><span id="l38.26">     nsString receipt_string;</span>
<a href="#l38.27"></a><span id="l38.27">     switch (m_disposeType)</span>
<a href="#l38.28"></a><span id="l38.28">     {</span>
<a href="#l38.29"></a><span id="l38.29">     case nsIMsgMdnGenerator::eDisplayed:</span>
<a href="#l38.30"></a><span id="l38.30">         rv = GetStringFromName(</span>
<a href="#l38.31"></a><span id="l38.31" class="difflineminus">-            NS_LITERAL_STRING(&quot;MdnDisplayedReceipt&quot;).get(),</span>
<a href="#l38.32"></a><span id="l38.32" class="difflineplus">+            MOZ_UTF16(&quot;MdnDisplayedReceipt&quot;),</span>
<a href="#l38.33"></a><span id="l38.33">             getter_Copies(receipt_string));</span>
<a href="#l38.34"></a><span id="l38.34">         break;</span>
<a href="#l38.35"></a><span id="l38.35">     case nsIMsgMdnGenerator::eDispatched:</span>
<a href="#l38.36"></a><span id="l38.36">         rv = GetStringFromName(</span>
<a href="#l38.37"></a><span id="l38.37" class="difflineminus">-            NS_LITERAL_STRING(&quot;MdnDispatchedReceipt&quot;).get(),</span>
<a href="#l38.38"></a><span id="l38.38" class="difflineplus">+            MOZ_UTF16(&quot;MdnDispatchedReceipt&quot;),</span>
<a href="#l38.39"></a><span id="l38.39">             getter_Copies(receipt_string));</span>
<a href="#l38.40"></a><span id="l38.40">         break;</span>
<a href="#l38.41"></a><span id="l38.41">     case nsIMsgMdnGenerator::eProcessed:</span>
<a href="#l38.42"></a><span id="l38.42">         rv = GetStringFromName(</span>
<a href="#l38.43"></a><span id="l38.43" class="difflineminus">-            NS_LITERAL_STRING(&quot;MdnProcessedReceipt&quot;).get(),</span>
<a href="#l38.44"></a><span id="l38.44" class="difflineplus">+            MOZ_UTF16(&quot;MdnProcessedReceipt&quot;),</span>
<a href="#l38.45"></a><span id="l38.45">             getter_Copies(receipt_string));</span>
<a href="#l38.46"></a><span id="l38.46">         break;</span>
<a href="#l38.47"></a><span id="l38.47">     case nsIMsgMdnGenerator::eDeleted:</span>
<a href="#l38.48"></a><span id="l38.48">         rv = GetStringFromName(</span>
<a href="#l38.49"></a><span id="l38.49" class="difflineminus">-            NS_LITERAL_STRING(&quot;MdnDeletedReceipt&quot;).get(),</span>
<a href="#l38.50"></a><span id="l38.50" class="difflineplus">+            MOZ_UTF16(&quot;MdnDeletedReceipt&quot;),</span>
<a href="#l38.51"></a><span id="l38.51">             getter_Copies(receipt_string));</span>
<a href="#l38.52"></a><span id="l38.52">         break;</span>
<a href="#l38.53"></a><span id="l38.53">     case nsIMsgMdnGenerator::eDenied:</span>
<a href="#l38.54"></a><span id="l38.54">         rv = GetStringFromName(</span>
<a href="#l38.55"></a><span id="l38.55" class="difflineminus">-            NS_LITERAL_STRING(&quot;MdnDeniedReceipt&quot;).get(),</span>
<a href="#l38.56"></a><span id="l38.56" class="difflineplus">+            MOZ_UTF16(&quot;MdnDeniedReceipt&quot;),</span>
<a href="#l38.57"></a><span id="l38.57">             getter_Copies(receipt_string));</span>
<a href="#l38.58"></a><span id="l38.58">         break;</span>
<a href="#l38.59"></a><span id="l38.59">     case nsIMsgMdnGenerator::eFailed:</span>
<a href="#l38.60"></a><span id="l38.60">         rv = GetStringFromName(</span>
<a href="#l38.61"></a><span id="l38.61" class="difflineminus">-            NS_LITERAL_STRING(&quot;MdnFailedReceipt&quot;).get(),</span>
<a href="#l38.62"></a><span id="l38.62" class="difflineplus">+            MOZ_UTF16(&quot;MdnFailedReceipt&quot;),</span>
<a href="#l38.63"></a><span id="l38.63">             getter_Copies(receipt_string));</span>
<a href="#l38.64"></a><span id="l38.64">         break;</span>
<a href="#l38.65"></a><span id="l38.65">     default:</span>
<a href="#l38.66"></a><span id="l38.66">         rv = NS_ERROR_INVALID_ARG;</span>
<a href="#l38.67"></a><span id="l38.67">         break;</span>
<a href="#l38.68"></a><span id="l38.68">     }</span>
<a href="#l38.69"></a><span id="l38.69"> </span>
<a href="#l38.70"></a><span id="l38.70">     if (NS_FAILED(rv))</span>
<a href="#l38.71"></a><span id="l38.71" class="difflineat">@@ -589,42 +589,42 @@ report-type=disposition-notification;\r\</span>
<a href="#l38.72"></a><span id="l38.72">         tmpBuffer = PR_smprintf(&quot;%s&quot; CRLF CRLF, NS_ConvertUTF16toUTF8(firstPart1).get());</span>
<a href="#l38.73"></a><span id="l38.73">         PUSH_N_FREE_STRING(tmpBuffer);</span>
<a href="#l38.74"></a><span id="l38.74">     }</span>
<a href="#l38.75"></a><span id="l38.75"> </span>
<a href="#l38.76"></a><span id="l38.76">     switch (m_disposeType)</span>
<a href="#l38.77"></a><span id="l38.77">     {</span>
<a href="#l38.78"></a><span id="l38.78">     case nsIMsgMdnGenerator::eDisplayed:</span>
<a href="#l38.79"></a><span id="l38.79">         rv = GetStringFromName(</span>
<a href="#l38.80"></a><span id="l38.80" class="difflineminus">-            NS_LITERAL_STRING(&quot;MsgMdnDisplayed&quot;).get(),</span>
<a href="#l38.81"></a><span id="l38.81" class="difflineplus">+            MOZ_UTF16(&quot;MsgMdnDisplayed&quot;),</span>
<a href="#l38.82"></a><span id="l38.82">             getter_Copies(firstPart2));</span>
<a href="#l38.83"></a><span id="l38.83">         break;</span>
<a href="#l38.84"></a><span id="l38.84">     case nsIMsgMdnGenerator::eDispatched:</span>
<a href="#l38.85"></a><span id="l38.85">         rv = GetStringFromName(</span>
<a href="#l38.86"></a><span id="l38.86" class="difflineminus">-            NS_LITERAL_STRING(&quot;MsgMdnDispatched&quot;).get(),</span>
<a href="#l38.87"></a><span id="l38.87" class="difflineplus">+            MOZ_UTF16(&quot;MsgMdnDispatched&quot;),</span>
<a href="#l38.88"></a><span id="l38.88">             getter_Copies(firstPart2));</span>
<a href="#l38.89"></a><span id="l38.89">         break;</span>
<a href="#l38.90"></a><span id="l38.90">     case nsIMsgMdnGenerator::eProcessed:</span>
<a href="#l38.91"></a><span id="l38.91">         rv = GetStringFromName(</span>
<a href="#l38.92"></a><span id="l38.92" class="difflineminus">-            NS_LITERAL_STRING(&quot;MsgMdnProcessed&quot;).get(),</span>
<a href="#l38.93"></a><span id="l38.93" class="difflineplus">+            MOZ_UTF16(&quot;MsgMdnProcessed&quot;),</span>
<a href="#l38.94"></a><span id="l38.94">             getter_Copies(firstPart2));</span>
<a href="#l38.95"></a><span id="l38.95">         break;</span>
<a href="#l38.96"></a><span id="l38.96">     case nsIMsgMdnGenerator::eDeleted:</span>
<a href="#l38.97"></a><span id="l38.97">         rv = GetStringFromName(</span>
<a href="#l38.98"></a><span id="l38.98" class="difflineminus">-            NS_LITERAL_STRING(&quot;MsgMdnDeleted&quot;).get(),</span>
<a href="#l38.99"></a><span id="l38.99" class="difflineplus">+            MOZ_UTF16(&quot;MsgMdnDeleted&quot;),</span>
<a href="#l38.100"></a><span id="l38.100">             getter_Copies(firstPart2));</span>
<a href="#l38.101"></a><span id="l38.101">         break;</span>
<a href="#l38.102"></a><span id="l38.102">     case nsIMsgMdnGenerator::eDenied:</span>
<a href="#l38.103"></a><span id="l38.103">         rv = GetStringFromName(</span>
<a href="#l38.104"></a><span id="l38.104" class="difflineminus">-            NS_LITERAL_STRING(&quot;MsgMdnDenied&quot;).get(),</span>
<a href="#l38.105"></a><span id="l38.105" class="difflineplus">+            MOZ_UTF16(&quot;MsgMdnDenied&quot;),</span>
<a href="#l38.106"></a><span id="l38.106">             getter_Copies(firstPart2));</span>
<a href="#l38.107"></a><span id="l38.107">         break;</span>
<a href="#l38.108"></a><span id="l38.108">     case nsIMsgMdnGenerator::eFailed:</span>
<a href="#l38.109"></a><span id="l38.109">         rv = GetStringFromName(</span>
<a href="#l38.110"></a><span id="l38.110" class="difflineminus">-            NS_LITERAL_STRING(&quot;MsgMdnFailed&quot;).get(),</span>
<a href="#l38.111"></a><span id="l38.111" class="difflineplus">+            MOZ_UTF16(&quot;MsgMdnFailed&quot;),</span>
<a href="#l38.112"></a><span id="l38.112">             getter_Copies(firstPart2));</span>
<a href="#l38.113"></a><span id="l38.113">         break;</span>
<a href="#l38.114"></a><span id="l38.114">     default:</span>
<a href="#l38.115"></a><span id="l38.115">         rv = NS_ERROR_INVALID_ARG;</span>
<a href="#l38.116"></a><span id="l38.116">         break;</span>
<a href="#l38.117"></a><span id="l38.117">     }</span>
<a href="#l38.118"></a><span id="l38.118"> </span>
<a href="#l38.119"></a><span id="l38.119">     if (NS_FAILED(rv))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -459,18 +459,18 @@ nsresult nsMsgComposeSecure::MimeInitEnc</span>
<a href="#l39.4"></a><span id="l39.4"> </span>
<a href="#l39.5"></a><span id="l39.5">   nsCOMPtr&lt;nsIStringBundle&gt; sMIMEBundle;</span>
<a href="#l39.6"></a><span id="l39.6">   nsString mime_smime_enc_content_desc;</span>
<a href="#l39.7"></a><span id="l39.7"> </span>
<a href="#l39.8"></a><span id="l39.8">   bundleSvc-&gt;CreateBundle(SMIME_STRBUNDLE_URL, getter_AddRefs(sMIMEBundle));</span>
<a href="#l39.9"></a><span id="l39.9"> </span>
<a href="#l39.10"></a><span id="l39.10">   if (!sMIMEBundle)</span>
<a href="#l39.11"></a><span id="l39.11">     return NS_ERROR_FAILURE;</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">- </span>
<a href="#l39.13"></a><span id="l39.13" class="difflineminus">-  sMIMEBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;mime_smimeEncryptedContentDesc&quot;).get(),</span>
<a href="#l39.14"></a><span id="l39.14" class="difflineplus">+</span>
<a href="#l39.15"></a><span id="l39.15" class="difflineplus">+  sMIMEBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;mime_smimeEncryptedContentDesc&quot;),</span>
<a href="#l39.16"></a><span id="l39.16">                                  getter_Copies(mime_smime_enc_content_desc));</span>
<a href="#l39.17"></a><span id="l39.17">   NS_ConvertUTF16toUTF8 enc_content_desc_utf8(mime_smime_enc_content_desc);</span>
<a href="#l39.18"></a><span id="l39.18"> </span>
<a href="#l39.19"></a><span id="l39.19">   nsCOMPtr&lt;nsIMimeConverter&gt; mimeConverter =</span>
<a href="#l39.20"></a><span id="l39.20">      do_GetService(NS_MIME_CONVERTER_CONTRACTID, &amp;rv);</span>
<a href="#l39.21"></a><span id="l39.21">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l39.22"></a><span id="l39.22">   nsCString encodedContentDescription;</span>
<a href="#l39.23"></a><span id="l39.23">   mimeConverter-&gt;EncodeMimePartIIStr_UTF8(enc_content_desc_utf8, false, &quot;UTF-8&quot;,</span>
<a href="#l39.24"></a><span id="l39.24" class="difflineat">@@ -520,34 +520,34 @@ nsresult nsMsgComposeSecure::MimeInitEnc</span>
<a href="#l39.25"></a><span id="l39.25"> </span>
<a href="#l39.26"></a><span id="l39.26">   /* Initialize the encrypter (and add the sender's cert.) */</span>
<a href="#l39.27"></a><span id="l39.27">   PR_ASSERT(mSelfEncryptionCert);</span>
<a href="#l39.28"></a><span id="l39.28">   PR_SetError(0,0);</span>
<a href="#l39.29"></a><span id="l39.29">   mEncryptionCinfo = do_CreateInstance(NS_CMSMESSAGE_CONTRACTID, &amp;rv);</span>
<a href="#l39.30"></a><span id="l39.30">   if (NS_FAILED(rv)) return rv;</span>
<a href="#l39.31"></a><span id="l39.31">   rv = mEncryptionCinfo-&gt;CreateEncrypted(mCerts);</span>
<a href="#l39.32"></a><span id="l39.32">   if (NS_FAILED(rv)) {</span>
<a href="#l39.33"></a><span id="l39.33" class="difflineminus">-    SetError(sendReport, NS_LITERAL_STRING(&quot;ErrorEncryptMail&quot;).get());</span>
<a href="#l39.34"></a><span id="l39.34" class="difflineplus">+    SetError(sendReport, MOZ_UTF16(&quot;ErrorEncryptMail&quot;));</span>
<a href="#l39.35"></a><span id="l39.35">     goto FAIL;</span>
<a href="#l39.36"></a><span id="l39.36">   }</span>
<a href="#l39.37"></a><span id="l39.37"> </span>
<a href="#l39.38"></a><span id="l39.38">   mEncryptionContext = do_CreateInstance(NS_CMSENCODER_CONTRACTID, &amp;rv);</span>
<a href="#l39.39"></a><span id="l39.39">   if (NS_FAILED(rv)) return rv;</span>
<a href="#l39.40"></a><span id="l39.40"> </span>
<a href="#l39.41"></a><span id="l39.41">   if (!mBuffer) {</span>
<a href="#l39.42"></a><span id="l39.42">     mBuffer = new char[eBufferSize];</span>
<a href="#l39.43"></a><span id="l39.43">     if (!mBuffer)</span>
<a href="#l39.44"></a><span id="l39.44">       return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l39.45"></a><span id="l39.45">   }</span>
<a href="#l39.46"></a><span id="l39.46"> </span>
<a href="#l39.47"></a><span id="l39.47">   mBufferedBytes = 0;</span>
<a href="#l39.48"></a><span id="l39.48"> </span>
<a href="#l39.49"></a><span id="l39.49">   rv = mEncryptionContext-&gt;Start(mEncryptionCinfo, mime_crypto_write_base64, mCryptoEncoder);</span>
<a href="#l39.50"></a><span id="l39.50">   if (NS_FAILED(rv)) {</span>
<a href="#l39.51"></a><span id="l39.51" class="difflineminus">-    SetError(sendReport, NS_LITERAL_STRING(&quot;ErrorEncryptMail&quot;).get());</span>
<a href="#l39.52"></a><span id="l39.52" class="difflineplus">+    SetError(sendReport, MOZ_UTF16(&quot;ErrorEncryptMail&quot;));</span>
<a href="#l39.53"></a><span id="l39.53">     goto FAIL;</span>
<a href="#l39.54"></a><span id="l39.54">   }</span>
<a href="#l39.55"></a><span id="l39.55"> </span>
<a href="#l39.56"></a><span id="l39.56">   /* If we're signing, tack a multipart/signed header onto the front of</span>
<a href="#l39.57"></a><span id="l39.57">    the data to be encrypted, and initialize the sign-hashing code too.</span>
<a href="#l39.58"></a><span id="l39.58">    */</span>
<a href="#l39.59"></a><span id="l39.59">   if (aSign) {</span>
<a href="#l39.60"></a><span id="l39.60">     rv = MimeInitMultipartSigned(false, sendReport);</span>
<a href="#l39.61"></a><span id="l39.61" class="difflineat">@@ -575,18 +575,18 @@ nsresult nsMsgComposeSecure::MimeFinishM</span>
<a href="#l39.62"></a><span id="l39.62"> </span>
<a href="#l39.63"></a><span id="l39.63">   nsCOMPtr&lt;nsIStringBundle&gt; sMIMEBundle;</span>
<a href="#l39.64"></a><span id="l39.64">   nsString mime_smime_sig_content_desc;</span>
<a href="#l39.65"></a><span id="l39.65"> </span>
<a href="#l39.66"></a><span id="l39.66">   bundleSvc-&gt;CreateBundle(SMIME_STRBUNDLE_URL, getter_AddRefs(sMIMEBundle));</span>
<a href="#l39.67"></a><span id="l39.67"> </span>
<a href="#l39.68"></a><span id="l39.68">   if (!sMIMEBundle)</span>
<a href="#l39.69"></a><span id="l39.69">     return NS_ERROR_FAILURE;</span>
<a href="#l39.70"></a><span id="l39.70" class="difflineminus">-  </span>
<a href="#l39.71"></a><span id="l39.71" class="difflineminus">-  sMIMEBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;mime_smimeSignatureContentDesc&quot;).get(),</span>
<a href="#l39.72"></a><span id="l39.72" class="difflineplus">+</span>
<a href="#l39.73"></a><span id="l39.73" class="difflineplus">+  sMIMEBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;mime_smimeSignatureContentDesc&quot;),</span>
<a href="#l39.74"></a><span id="l39.74">                                  getter_Copies(mime_smime_sig_content_desc));</span>
<a href="#l39.75"></a><span id="l39.75"> </span>
<a href="#l39.76"></a><span id="l39.76">   NS_ConvertUTF16toUTF8 sig_content_desc_utf8(mime_smime_sig_content_desc);</span>
<a href="#l39.77"></a><span id="l39.77"> </span>
<a href="#l39.78"></a><span id="l39.78">   /* Compute the hash...</span>
<a href="#l39.79"></a><span id="l39.79">    */</span>
<a href="#l39.80"></a><span id="l39.80"> </span>
<a href="#l39.81"></a><span id="l39.81">   nsAutoCString hashString;</span>
<a href="#l39.82"></a><span id="l39.82" class="difflineat">@@ -639,38 +639,38 @@ nsresult nsMsgComposeSecure::MimeFinishM</span>
<a href="#l39.83"></a><span id="l39.83"> </span>
<a href="#l39.84"></a><span id="l39.84">   PR_ASSERT(mHashType == nsICryptoHash::SHA1);</span>
<a href="#l39.85"></a><span id="l39.85"> </span>
<a href="#l39.86"></a><span id="l39.86">   PR_ASSERT (mSelfSigningCert);</span>
<a href="#l39.87"></a><span id="l39.87">   PR_SetError(0,0);</span>
<a href="#l39.88"></a><span id="l39.88"> </span>
<a href="#l39.89"></a><span id="l39.89">   rv = cinfo-&gt;CreateSigned(mSelfSigningCert, mSelfEncryptionCert, (unsigned char*)hashString.get(), hashString.Length());</span>
<a href="#l39.90"></a><span id="l39.90">   if (NS_FAILED(rv))  {</span>
<a href="#l39.91"></a><span id="l39.91" class="difflineminus">-    SetError(sendReport, NS_LITERAL_STRING(&quot;ErrorCanNotSignMail&quot;).get());</span>
<a href="#l39.92"></a><span id="l39.92" class="difflineplus">+    SetError(sendReport, MOZ_UTF16(&quot;ErrorCanNotSignMail&quot;));</span>
<a href="#l39.93"></a><span id="l39.93">     goto FAIL;</span>
<a href="#l39.94"></a><span id="l39.94">   }</span>
<a href="#l39.95"></a><span id="l39.95"> </span>
<a href="#l39.96"></a><span id="l39.96">   // Initialize the base64 encoder for the signature data.</span>
<a href="#l39.97"></a><span id="l39.97">   MOZ_ASSERT(!mSigEncoder, &quot;Shouldn't already have a mSigEncoder&quot;);</span>
<a href="#l39.98"></a><span id="l39.98">   mSigEncoder = MimeEncoder::GetBase64Encoder(</span>
<a href="#l39.99"></a><span id="l39.99">     (aOuter ? mime_encoder_output_fn : mime_nested_encoder_output_fn), this);</span>
<a href="#l39.100"></a><span id="l39.100"> </span>
<a href="#l39.101"></a><span id="l39.101">   /* Write out the signature.</span>
<a href="#l39.102"></a><span id="l39.102">    */</span>
<a href="#l39.103"></a><span id="l39.103">   PR_SetError(0,0);</span>
<a href="#l39.104"></a><span id="l39.104">   rv = encoder-&gt;Start(cinfo, mime_crypto_write_base64, mSigEncoder);</span>
<a href="#l39.105"></a><span id="l39.105">   if (NS_FAILED(rv)) {</span>
<a href="#l39.106"></a><span id="l39.106" class="difflineminus">-    SetError(sendReport, NS_LITERAL_STRING(&quot;ErrorCanNotSignMail&quot;).get());</span>
<a href="#l39.107"></a><span id="l39.107" class="difflineplus">+    SetError(sendReport, MOZ_UTF16(&quot;ErrorCanNotSignMail&quot;));</span>
<a href="#l39.108"></a><span id="l39.108">     goto FAIL;</span>
<a href="#l39.109"></a><span id="l39.109">   }</span>
<a href="#l39.110"></a><span id="l39.110"> </span>
<a href="#l39.111"></a><span id="l39.111">   // We're not passing in any data, so no update needed.</span>
<a href="#l39.112"></a><span id="l39.112">   rv = encoder-&gt;Finish();</span>
<a href="#l39.113"></a><span id="l39.113">   if (NS_FAILED(rv)) {</span>
<a href="#l39.114"></a><span id="l39.114" class="difflineminus">-    SetError(sendReport, NS_LITERAL_STRING(&quot;ErrorCanNotSignMail&quot;).get());</span>
<a href="#l39.115"></a><span id="l39.115" class="difflineplus">+    SetError(sendReport, MOZ_UTF16(&quot;ErrorCanNotSignMail&quot;));</span>
<a href="#l39.116"></a><span id="l39.116">     goto FAIL;</span>
<a href="#l39.117"></a><span id="l39.117">   }</span>
<a href="#l39.118"></a><span id="l39.118"> </span>
<a href="#l39.119"></a><span id="l39.119">   // Shut down the sig's base64 encoder.</span>
<a href="#l39.120"></a><span id="l39.120">   rv = mSigEncoder-&gt;Flush();</span>
<a href="#l39.121"></a><span id="l39.121">   mSigEncoder = nullptr;</span>
<a href="#l39.122"></a><span id="l39.122">   if (NS_FAILED(rv)) {</span>
<a href="#l39.123"></a><span id="l39.123">     goto FAIL;</span>
<a href="#l39.124"></a><span id="l39.124" class="difflineat">@@ -731,20 +731,20 @@ nsresult nsMsgComposeSecure::MimeFinishE</span>
<a href="#l39.125"></a><span id="l39.125">   if (mBufferedBytes) {</span>
<a href="#l39.126"></a><span id="l39.126">     rv = mEncryptionContext-&gt;Update(mBuffer, mBufferedBytes);</span>
<a href="#l39.127"></a><span id="l39.127">     mBufferedBytes = 0;</span>
<a href="#l39.128"></a><span id="l39.128">     if (NS_FAILED(rv)) {</span>
<a href="#l39.129"></a><span id="l39.129">       PR_ASSERT(PR_GetError() &lt; 0);</span>
<a href="#l39.130"></a><span id="l39.130">       goto FAIL;</span>
<a href="#l39.131"></a><span id="l39.131">     }</span>
<a href="#l39.132"></a><span id="l39.132">   }</span>
<a href="#l39.133"></a><span id="l39.133" class="difflineminus">-  </span>
<a href="#l39.134"></a><span id="l39.134" class="difflineplus">+</span>
<a href="#l39.135"></a><span id="l39.135">   rv = mEncryptionContext-&gt;Finish();</span>
<a href="#l39.136"></a><span id="l39.136">   if (NS_FAILED(rv)) {</span>
<a href="#l39.137"></a><span id="l39.137" class="difflineminus">-    SetError(sendReport, NS_LITERAL_STRING(&quot;ErrorEncryptMail&quot;).get());</span>
<a href="#l39.138"></a><span id="l39.138" class="difflineplus">+    SetError(sendReport, MOZ_UTF16(&quot;ErrorEncryptMail&quot;));</span>
<a href="#l39.139"></a><span id="l39.139">     goto FAIL;</span>
<a href="#l39.140"></a><span id="l39.140">   }</span>
<a href="#l39.141"></a><span id="l39.141"> </span>
<a href="#l39.142"></a><span id="l39.142">   mEncryptionContext = 0;</span>
<a href="#l39.143"></a><span id="l39.143"> </span>
<a href="#l39.144"></a><span id="l39.144">   PR_ASSERT(mEncryptionCinfo);</span>
<a href="#l39.145"></a><span id="l39.145">   if (!mEncryptionCinfo) {</span>
<a href="#l39.146"></a><span id="l39.146">     rv = NS_ERROR_FAILURE;</span>
<a href="#l39.147"></a><span id="l39.147" class="difflineat">@@ -782,22 +782,22 @@ nsresult nsMsgComposeSecure::MimeCryptoH</span>
<a href="#l39.148"></a><span id="l39.148">   }</span>
<a href="#l39.149"></a><span id="l39.149"> </span>
<a href="#l39.150"></a><span id="l39.150">   PR_ASSERT(aEncrypt || aSign);</span>
<a href="#l39.151"></a><span id="l39.151">   certdb-&gt;FindEmailEncryptionCert(mEncryptionCertName, getter_AddRefs(mSelfEncryptionCert));</span>
<a href="#l39.152"></a><span id="l39.152">   certdb-&gt;FindEmailSigningCert(mSigningCertName, getter_AddRefs(mSelfSigningCert));</span>
<a href="#l39.153"></a><span id="l39.153"> </span>
<a href="#l39.154"></a><span id="l39.154">   // must have both the signing and encryption certs to sign</span>
<a href="#l39.155"></a><span id="l39.155">   if ((mSelfSigningCert == nullptr) &amp;&amp; aSign) {</span>
<a href="#l39.156"></a><span id="l39.156" class="difflineminus">-    SetError(sendReport, NS_LITERAL_STRING(&quot;NoSenderSigningCert&quot;).get());</span>
<a href="#l39.157"></a><span id="l39.157" class="difflineplus">+    SetError(sendReport, MOZ_UTF16(&quot;NoSenderSigningCert&quot;));</span>
<a href="#l39.158"></a><span id="l39.158">     return NS_ERROR_FAILURE;</span>
<a href="#l39.159"></a><span id="l39.159">   }</span>
<a href="#l39.160"></a><span id="l39.160"> </span>
<a href="#l39.161"></a><span id="l39.161">   if ((mSelfEncryptionCert == nullptr) &amp;&amp; aEncrypt) {</span>
<a href="#l39.162"></a><span id="l39.162" class="difflineminus">-    SetError(sendReport, NS_LITERAL_STRING(&quot;NoSenderEncryptionCert&quot;).get());</span>
<a href="#l39.163"></a><span id="l39.163" class="difflineplus">+    SetError(sendReport, MOZ_UTF16(&quot;NoSenderEncryptionCert&quot;));</span>
<a href="#l39.164"></a><span id="l39.164">     return NS_ERROR_FAILURE;</span>
<a href="#l39.165"></a><span id="l39.165">   }</span>
<a href="#l39.166"></a><span id="l39.166"> </span>
<a href="#l39.167"></a><span id="l39.167"> </span>
<a href="#l39.168"></a><span id="l39.168">   if (aEncrypt &amp;&amp; mSelfEncryptionCert) {</span>
<a href="#l39.169"></a><span id="l39.169">     // Make sure self's configured cert is prepared for being used</span>
<a href="#l39.170"></a><span id="l39.170">     // as an email recipient cert.</span>
<a href="#l39.171"></a><span id="l39.171">     </span>
<a href="#l39.172"></a><span id="l39.172" class="difflineat">@@ -821,17 +821,17 @@ nsresult nsMsgComposeSecure::MimeCryptoH</span>
<a href="#l39.173"></a><span id="l39.173">       ToLowerCase(mailboxes[i], mailbox_lowercase);</span>
<a href="#l39.174"></a><span id="l39.174">       nsCOMPtr&lt;nsIX509Cert&gt; cert;</span>
<a href="#l39.175"></a><span id="l39.175">       res = certdb-&gt;FindCertByEmailAddress(nullptr, mailbox_lowercase.get(),</span>
<a href="#l39.176"></a><span id="l39.176">                                            getter_AddRefs(cert));</span>
<a href="#l39.177"></a><span id="l39.177">       if (NS_FAILED(res)) {</span>
<a href="#l39.178"></a><span id="l39.178">         // Failure to find a valid encryption cert is fatal.</span>
<a href="#l39.179"></a><span id="l39.179">         // Here I assume that mailbox is ascii rather than utf8.</span>
<a href="#l39.180"></a><span id="l39.180">         SetErrorWithParam(sendReport,</span>
<a href="#l39.181"></a><span id="l39.181" class="difflineminus">-                          NS_LITERAL_STRING(&quot;MissingRecipientEncryptionCert&quot;).get(),</span>
<a href="#l39.182"></a><span id="l39.182" class="difflineplus">+                          MOZ_UTF16(&quot;MissingRecipientEncryptionCert&quot;),</span>
<a href="#l39.183"></a><span id="l39.183">                           mailboxes[i].get());</span>
<a href="#l39.184"></a><span id="l39.184"> </span>
<a href="#l39.185"></a><span id="l39.185">         return res;</span>
<a href="#l39.186"></a><span id="l39.186">       }</span>
<a href="#l39.187"></a><span id="l39.187"> </span>
<a href="#l39.188"></a><span id="l39.188">     /* #### see if recipient requests `signedData'.</span>
<a href="#l39.189"></a><span id="l39.189">      if (...) no_clearsigning_p = true;</span>
<a href="#l39.190"></a><span id="l39.190">      (This is the only reason we even bother looking up the certs</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/mailnews/imap/src/nsIMAPBodyShell.cpp</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/mailnews/imap/src/nsIMAPBodyShell.cpp</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -511,17 +511,17 @@ int32_t nsIMAPBodypart::GenerateEmptyFil</span>
<a href="#l40.4"></a><span id="l40.4">     return 0; // don't need to prefetch anything</span>
<a href="#l40.5"></a><span id="l40.5"> </span>
<a href="#l40.6"></a><span id="l40.6">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l40.7"></a><span id="l40.7">   nsresult rv = IMAPGetStringBundle(getter_AddRefs(bundle));</span>
<a href="#l40.8"></a><span id="l40.8">   NS_ENSURE_SUCCESS(rv, 0);</span>
<a href="#l40.9"></a><span id="l40.9"> </span>
<a href="#l40.10"></a><span id="l40.10">   nsAutoString emptyString;</span>
<a href="#l40.11"></a><span id="l40.11">   rv = bundle-&gt;GetStringFromName(</span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-    NS_LITERAL_STRING(&quot;imapEmptyMimePart&quot;).get(),</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+    MOZ_UTF16(&quot;imapEmptyMimePart&quot;),</span>
<a href="#l40.14"></a><span id="l40.14">     getter_Copies(emptyString));</span>
<a href="#l40.15"></a><span id="l40.15">   if (NS_SUCCEEDED(rv) &amp;&amp; !emptyString.IsEmpty())</span>
<a href="#l40.16"></a><span id="l40.16">   {</span>
<a href="#l40.17"></a><span id="l40.17">     if (stream)</span>
<a href="#l40.18"></a><span id="l40.18">     {</span>
<a href="#l40.19"></a><span id="l40.19">       nsImapProtocol *conn = aShell-&gt;GetConnection();</span>
<a href="#l40.20"></a><span id="l40.20">       conn-&gt;Log(&quot;SHELL&quot;, &quot;GENERATE-Filling&quot;, m_partNumberString);</span>
<a href="#l40.21"></a><span id="l40.21">       conn-&gt;HandleMessageDownLoadLine(NS_ConvertUTF16toUTF8(emptyString).get(),</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/mailnews/imap/src/nsImapIncomingServer.cpp</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapIncomingServer.cpp</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -1799,17 +1799,17 @@ nsImapIncomingServer::FEAlert(const nsAS</span>
<a href="#l41.4"></a><span id="l41.4">     nsresult rv = GetPrettyName(hostName);</span>
<a href="#l41.5"></a><span id="l41.5">     if (NS_SUCCEEDED(rv))</span>
<a href="#l41.6"></a><span id="l41.6">     {</span>
<a href="#l41.7"></a><span id="l41.7">       nsString message;</span>
<a href="#l41.8"></a><span id="l41.8">       nsString tempString(aAlertString);</span>
<a href="#l41.9"></a><span id="l41.9">       const PRUnichar *params[] = { hostName.get(), tempString.get() };</span>
<a href="#l41.10"></a><span id="l41.10"> </span>
<a href="#l41.11"></a><span id="l41.11">       rv = m_stringBundle-&gt;FormatStringFromName(</span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-        NS_LITERAL_STRING(&quot;imapServerAlert&quot;).get(),</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+        MOZ_UTF16(&quot;imapServerAlert&quot;),</span>
<a href="#l41.14"></a><span id="l41.14">         params, 2, getter_Copies(message));</span>
<a href="#l41.15"></a><span id="l41.15">       if (NS_SUCCEEDED(rv))</span>
<a href="#l41.16"></a><span id="l41.16">         return AlertUser(message, aUrl);</span>
<a href="#l41.17"></a><span id="l41.17">     }</span>
<a href="#l41.18"></a><span id="l41.18">   }</span>
<a href="#l41.19"></a><span id="l41.19">   return AlertUser(aAlertString, aUrl);</span>
<a href="#l41.20"></a><span id="l41.20"> }</span>
<a href="#l41.21"></a><span id="l41.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/mailnews/imap/src/nsImapMailFolder.cpp</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapMailFolder.cpp</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -1599,30 +1599,30 @@ NS_IMETHODIMP nsImapMailFolder::Rename (</span>
<a href="#l42.4"></a><span id="l42.4">       if (NS_SUCCEEDED(rv) &amp;&amp; bundle)</span>
<a href="#l42.5"></a><span id="l42.5">       {</span>
<a href="#l42.6"></a><span id="l42.6">         const PRUnichar *formatStrings[] =</span>
<a href="#l42.7"></a><span id="l42.7">         {</span>
<a href="#l42.8"></a><span id="l42.8">           (const PRUnichar*)(intptr_t)m_hierarchyDelimiter</span>
<a href="#l42.9"></a><span id="l42.9">         };</span>
<a href="#l42.10"></a><span id="l42.10">         nsString alertString;</span>
<a href="#l42.11"></a><span id="l42.11">         rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-          NS_LITERAL_STRING(&quot;imapSpecialChar&quot;).get(),</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+          MOZ_UTF16(&quot;imapSpecialChar&quot;),</span>
<a href="#l42.14"></a><span id="l42.14">           formatStrings, 1, getter_Copies(alertString));</span>
<a href="#l42.15"></a><span id="l42.15">         nsCOMPtr&lt;nsIPrompt&gt; dialog(do_GetInterface(docShell));</span>
<a href="#l42.16"></a><span id="l42.16">         // setting up the dialog title</span>
<a href="#l42.17"></a><span id="l42.17">         nsCOMPtr&lt;nsIMsgIncomingServer&gt; server;</span>
<a href="#l42.18"></a><span id="l42.18">         rv = GetServer(getter_AddRefs(server));</span>
<a href="#l42.19"></a><span id="l42.19">         NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l42.20"></a><span id="l42.20">         nsString dialogTitle;</span>
<a href="#l42.21"></a><span id="l42.21">         nsString accountName;</span>
<a href="#l42.22"></a><span id="l42.22">         rv = server-&gt;GetPrettyName(accountName);</span>
<a href="#l42.23"></a><span id="l42.23">         NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l42.24"></a><span id="l42.24">         const PRUnichar *titleParams[] = { accountName.get() };</span>
<a href="#l42.25"></a><span id="l42.25">         rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l42.26"></a><span id="l42.26" class="difflineminus">-          NS_LITERAL_STRING(&quot;imapAlertDialogTitle&quot;).get(),</span>
<a href="#l42.27"></a><span id="l42.27" class="difflineplus">+          MOZ_UTF16(&quot;imapAlertDialogTitle&quot;),</span>
<a href="#l42.28"></a><span id="l42.28">           titleParams, 1, getter_Copies(dialogTitle));</span>
<a href="#l42.29"></a><span id="l42.29"> </span>
<a href="#l42.30"></a><span id="l42.30">         if (dialog &amp;&amp; !alertString.IsEmpty())</span>
<a href="#l42.31"></a><span id="l42.31">           dialog-&gt;Alert(dialogTitle.get(), alertString.get());</span>
<a href="#l42.32"></a><span id="l42.32">       }</span>
<a href="#l42.33"></a><span id="l42.33">     }</span>
<a href="#l42.34"></a><span id="l42.34">     return NS_ERROR_FAILURE;</span>
<a href="#l42.35"></a><span id="l42.35">   }</span>
<a href="#l42.36"></a><span id="l42.36" class="difflineat">@@ -2410,30 +2410,30 @@ nsImapMailFolder::DeleteSubFolders(nsIAr</span>
<a href="#l42.37"></a><span id="l42.37"> </span>
<a href="#l42.38"></a><span id="l42.38">     nsAutoString folderName;</span>
<a href="#l42.39"></a><span id="l42.39">     rv = curFolder-&gt;GetName(folderName);</span>
<a href="#l42.40"></a><span id="l42.40">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l42.41"></a><span id="l42.41">     const PRUnichar *formatStrings[1] = { folderName.get() };</span>
<a href="#l42.42"></a><span id="l42.42"> </span>
<a href="#l42.43"></a><span id="l42.43">     nsAutoString deleteFolderDialogTitle;</span>
<a href="#l42.44"></a><span id="l42.44">     rv = bundle-&gt;GetStringFromName(</span>
<a href="#l42.45"></a><span id="l42.45" class="difflineminus">-      NS_LITERAL_STRING(&quot;imapDeleteFolderDialogTitle&quot;).get(),</span>
<a href="#l42.46"></a><span id="l42.46" class="difflineplus">+      MOZ_UTF16(&quot;imapDeleteFolderDialogTitle&quot;),</span>
<a href="#l42.47"></a><span id="l42.47">       getter_Copies(deleteFolderDialogTitle));</span>
<a href="#l42.48"></a><span id="l42.48">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l42.49"></a><span id="l42.49"> </span>
<a href="#l42.50"></a><span id="l42.50">     nsAutoString deleteFolderButtonLabel;</span>
<a href="#l42.51"></a><span id="l42.51">     rv = bundle-&gt;GetStringFromName(</span>
<a href="#l42.52"></a><span id="l42.52" class="difflineminus">-      NS_LITERAL_STRING(&quot;imapDeleteFolderButtonLabel&quot;).get(),</span>
<a href="#l42.53"></a><span id="l42.53" class="difflineplus">+      MOZ_UTF16(&quot;imapDeleteFolderButtonLabel&quot;),</span>
<a href="#l42.54"></a><span id="l42.54">       getter_Copies(deleteFolderButtonLabel));</span>
<a href="#l42.55"></a><span id="l42.55">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l42.56"></a><span id="l42.56"> </span>
<a href="#l42.57"></a><span id="l42.57">     nsAutoString confirmationStr;</span>
<a href="#l42.58"></a><span id="l42.58">     rv = bundle-&gt;FormatStringFromName((deleteNoTrash) ?</span>
<a href="#l42.59"></a><span id="l42.59" class="difflineminus">-        NS_LITERAL_STRING(&quot;imapDeleteNoTrash&quot;).get() :</span>
<a href="#l42.60"></a><span id="l42.60" class="difflineminus">-        NS_LITERAL_STRING(&quot;imapMoveFolderToTrash&quot;).get(),</span>
<a href="#l42.61"></a><span id="l42.61" class="difflineplus">+        MOZ_UTF16(&quot;imapDeleteNoTrash&quot;) :</span>
<a href="#l42.62"></a><span id="l42.62" class="difflineplus">+        MOZ_UTF16(&quot;imapMoveFolderToTrash&quot;),</span>
<a href="#l42.63"></a><span id="l42.63">       formatStrings, 1, getter_Copies(confirmationStr));</span>
<a href="#l42.64"></a><span id="l42.64">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l42.65"></a><span id="l42.65">     if (!msgWindow)</span>
<a href="#l42.66"></a><span id="l42.66">       return NS_ERROR_NULL_POINTER;</span>
<a href="#l42.67"></a><span id="l42.67">     nsCOMPtr&lt;nsIDocShell&gt; docShell;</span>
<a href="#l42.68"></a><span id="l42.68">     msgWindow-&gt;GetRootDocShell(getter_AddRefs(docShell));</span>
<a href="#l42.69"></a><span id="l42.69">     nsCOMPtr&lt;nsIPrompt&gt; dialog;</span>
<a href="#l42.70"></a><span id="l42.70">     if (docShell)</span>
<a href="#l42.71"></a><span id="l42.71" class="difflineat">@@ -6009,17 +6009,17 @@ nsImapMailFolder::FillInFolderProps(nsIM</span>
<a href="#l42.72"></a><span id="l42.72">     }</span>
<a href="#l42.73"></a><span id="l42.73">     else</span>
<a href="#l42.74"></a><span id="l42.74">     {</span>
<a href="#l42.75"></a><span id="l42.75">       // is this right? It doesn't leak, does it?</span>
<a href="#l42.76"></a><span id="l42.76">       CopyASCIItoUTF16(owner, uniOwner);</span>
<a href="#l42.77"></a><span id="l42.77">     }</span>
<a href="#l42.78"></a><span id="l42.78">     const PRUnichar *params[] = { uniOwner.get() };</span>
<a href="#l42.79"></a><span id="l42.79">     rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l42.80"></a><span id="l42.80" class="difflineminus">-      NS_LITERAL_STRING(&quot;imapOtherUsersFolderTypeDescription&quot;).get(),</span>
<a href="#l42.81"></a><span id="l42.81" class="difflineplus">+      MOZ_UTF16(&quot;imapOtherUsersFolderTypeDescription&quot;),</span>
<a href="#l42.82"></a><span id="l42.82">       params, 1, getter_Copies(folderTypeDesc));</span>
<a href="#l42.83"></a><span id="l42.83">   }</span>
<a href="#l42.84"></a><span id="l42.84">   else if (GetFolderACL()-&gt;GetIsFolderShared())</span>
<a href="#l42.85"></a><span id="l42.85">   {</span>
<a href="#l42.86"></a><span id="l42.86">     folderTypeStringID = &quot;imapPersonalSharedFolderTypeName&quot;;</span>
<a href="#l42.87"></a><span id="l42.87">     folderTypeDescStringID = &quot;imapPersonalSharedFolderTypeDescription&quot;;</span>
<a href="#l42.88"></a><span id="l42.88">   }</span>
<a href="#l42.89"></a><span id="l42.89">   else</span>
<a href="#l42.90"></a><span id="l42.90" class="difflineat">@@ -6546,90 +6546,90 @@ nsresult nsMsgIMAPFolderACL::CreateACLRi</span>
<a href="#l42.91"></a><span id="l42.91"> {</span>
<a href="#l42.92"></a><span id="l42.92">   nsString curRight;</span>
<a href="#l42.93"></a><span id="l42.93">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l42.94"></a><span id="l42.94">   nsresult rv = IMAPGetStringBundle(getter_AddRefs(bundle));</span>
<a href="#l42.95"></a><span id="l42.95">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l42.96"></a><span id="l42.96"> </span>
<a href="#l42.97"></a><span id="l42.97">   if (GetDoIHaveFullRightsForFolder()) {</span>
<a href="#l42.98"></a><span id="l42.98">     nsAutoString result;</span>
<a href="#l42.99"></a><span id="l42.99" class="difflineminus">-    rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;imapAclFullRights&quot;).get(),</span>
<a href="#l42.100"></a><span id="l42.100" class="difflineplus">+    rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;imapAclFullRights&quot;),</span>
<a href="#l42.101"></a><span id="l42.101">                                    getter_Copies(result));</span>
<a href="#l42.102"></a><span id="l42.102">     aRightsString.Assign(result);</span>
<a href="#l42.103"></a><span id="l42.103">     return rv;</span>
<a href="#l42.104"></a><span id="l42.104">   }</span>
<a href="#l42.105"></a><span id="l42.105">   else</span>
<a href="#l42.106"></a><span id="l42.106">   {</span>
<a href="#l42.107"></a><span id="l42.107">     if (GetCanIReadFolder())</span>
<a href="#l42.108"></a><span id="l42.108">     {</span>
<a href="#l42.109"></a><span id="l42.109" class="difflineminus">-      bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;imapAclReadRight&quot;).get(),</span>
<a href="#l42.110"></a><span id="l42.110" class="difflineplus">+      bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;imapAclReadRight&quot;),</span>
<a href="#l42.111"></a><span id="l42.111">                                 getter_Copies(curRight));</span>
<a href="#l42.112"></a><span id="l42.112">       aRightsString.Append(curRight);</span>
<a href="#l42.113"></a><span id="l42.113">     }</span>
<a href="#l42.114"></a><span id="l42.114">     if (GetCanIWriteFolder())</span>
<a href="#l42.115"></a><span id="l42.115">     {</span>
<a href="#l42.116"></a><span id="l42.116">       if (!aRightsString.IsEmpty()) aRightsString.AppendLiteral(&quot;, &quot;);</span>
<a href="#l42.117"></a><span id="l42.117" class="difflineminus">-      bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;imapAclWriteRight&quot;).get(),</span>
<a href="#l42.118"></a><span id="l42.118" class="difflineplus">+      bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;imapAclWriteRight&quot;),</span>
<a href="#l42.119"></a><span id="l42.119">                                 getter_Copies(curRight));</span>
<a href="#l42.120"></a><span id="l42.120">       aRightsString.Append(curRight);</span>
<a href="#l42.121"></a><span id="l42.121">     }</span>
<a href="#l42.122"></a><span id="l42.122">     if (GetCanIInsertInFolder())</span>
<a href="#l42.123"></a><span id="l42.123">     {</span>
<a href="#l42.124"></a><span id="l42.124">       if (!aRightsString.IsEmpty()) aRightsString.AppendLiteral(&quot;, &quot;);</span>
<a href="#l42.125"></a><span id="l42.125" class="difflineminus">-      bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;imapAclInsertRight&quot;).get(),</span>
<a href="#l42.126"></a><span id="l42.126" class="difflineplus">+      bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;imapAclInsertRight&quot;),</span>
<a href="#l42.127"></a><span id="l42.127">                                 getter_Copies(curRight));</span>
<a href="#l42.128"></a><span id="l42.128">       aRightsString.Append(curRight);</span>
<a href="#l42.129"></a><span id="l42.129">     }</span>
<a href="#l42.130"></a><span id="l42.130">     if (GetCanILookupFolder())</span>
<a href="#l42.131"></a><span id="l42.131">     {</span>
<a href="#l42.132"></a><span id="l42.132">       if (!aRightsString.IsEmpty()) aRightsString.AppendLiteral(&quot;, &quot;);</span>
<a href="#l42.133"></a><span id="l42.133" class="difflineminus">-      bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;imapAclLookupRight&quot;).get(),</span>
<a href="#l42.134"></a><span id="l42.134" class="difflineplus">+      bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;imapAclLookupRight&quot;),</span>
<a href="#l42.135"></a><span id="l42.135">                                 getter_Copies(curRight));</span>
<a href="#l42.136"></a><span id="l42.136">       aRightsString.Append(curRight);</span>
<a href="#l42.137"></a><span id="l42.137">     }</span>
<a href="#l42.138"></a><span id="l42.138">     if (GetCanIStoreSeenInFolder())</span>
<a href="#l42.139"></a><span id="l42.139">     {</span>
<a href="#l42.140"></a><span id="l42.140">       if (!aRightsString.IsEmpty()) aRightsString.AppendLiteral(&quot;, &quot;);</span>
<a href="#l42.141"></a><span id="l42.141" class="difflineminus">-      bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;imapAclSeenRight&quot;).get(),</span>
<a href="#l42.142"></a><span id="l42.142" class="difflineplus">+      bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;imapAclSeenRight&quot;),</span>
<a href="#l42.143"></a><span id="l42.143">                                 getter_Copies(curRight));</span>
<a href="#l42.144"></a><span id="l42.144">       aRightsString.Append(curRight);</span>
<a href="#l42.145"></a><span id="l42.145">     }</span>
<a href="#l42.146"></a><span id="l42.146">     if (GetCanIDeleteInFolder())</span>
<a href="#l42.147"></a><span id="l42.147">     {</span>
<a href="#l42.148"></a><span id="l42.148">       if (!aRightsString.IsEmpty()) aRightsString.AppendLiteral(&quot;, &quot;);</span>
<a href="#l42.149"></a><span id="l42.149" class="difflineminus">-      bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;imapAclDeleteRight&quot;).get(),</span>
<a href="#l42.150"></a><span id="l42.150" class="difflineplus">+      bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;imapAclDeleteRight&quot;),</span>
<a href="#l42.151"></a><span id="l42.151">                                 getter_Copies(curRight));</span>
<a href="#l42.152"></a><span id="l42.152">       aRightsString.Append(curRight);</span>
<a href="#l42.153"></a><span id="l42.153">     }</span>
<a href="#l42.154"></a><span id="l42.154">     if (GetCanIExpungeFolder())</span>
<a href="#l42.155"></a><span id="l42.155">     {</span>
<a href="#l42.156"></a><span id="l42.156">       if (!aRightsString.IsEmpty())</span>
<a href="#l42.157"></a><span id="l42.157">         aRightsString.AppendLiteral(&quot;, &quot;);</span>
<a href="#l42.158"></a><span id="l42.158" class="difflineminus">-      bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;imapAclExpungeRight&quot;).get(),</span>
<a href="#l42.159"></a><span id="l42.159" class="difflineplus">+      bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;imapAclExpungeRight&quot;),</span>
<a href="#l42.160"></a><span id="l42.160">                                 getter_Copies(curRight));</span>
<a href="#l42.161"></a><span id="l42.161">       aRightsString.Append(curRight);</span>
<a href="#l42.162"></a><span id="l42.162">     }</span>
<a href="#l42.163"></a><span id="l42.163">     if (GetCanICreateSubfolder())</span>
<a href="#l42.164"></a><span id="l42.164">     {</span>
<a href="#l42.165"></a><span id="l42.165">       if (!aRightsString.IsEmpty()) aRightsString.AppendLiteral(&quot;, &quot;);</span>
<a href="#l42.166"></a><span id="l42.166" class="difflineminus">-      bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;imapAclCreateRight&quot;).get(),</span>
<a href="#l42.167"></a><span id="l42.167" class="difflineplus">+      bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;imapAclCreateRight&quot;),</span>
<a href="#l42.168"></a><span id="l42.168">                                 getter_Copies(curRight));</span>
<a href="#l42.169"></a><span id="l42.169">       aRightsString.Append(curRight);</span>
<a href="#l42.170"></a><span id="l42.170">     }</span>
<a href="#l42.171"></a><span id="l42.171">     if (GetCanIPostToFolder())</span>
<a href="#l42.172"></a><span id="l42.172">     {</span>
<a href="#l42.173"></a><span id="l42.173">       if (!aRightsString.IsEmpty()) aRightsString.AppendLiteral(&quot;, &quot;);</span>
<a href="#l42.174"></a><span id="l42.174" class="difflineminus">-      bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;imapAclPostRight&quot;).get(),</span>
<a href="#l42.175"></a><span id="l42.175" class="difflineplus">+      bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;imapAclPostRight&quot;),</span>
<a href="#l42.176"></a><span id="l42.176">                                 getter_Copies(curRight));</span>
<a href="#l42.177"></a><span id="l42.177">       aRightsString.Append(curRight);</span>
<a href="#l42.178"></a><span id="l42.178">     }</span>
<a href="#l42.179"></a><span id="l42.179">     if (GetCanIAdministerFolder())</span>
<a href="#l42.180"></a><span id="l42.180">     {</span>
<a href="#l42.181"></a><span id="l42.181">       if (!aRightsString.IsEmpty()) aRightsString.AppendLiteral(&quot;, &quot;);</span>
<a href="#l42.182"></a><span id="l42.182" class="difflineminus">-      bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;imapAclAdministerRight&quot;).get(),</span>
<a href="#l42.183"></a><span id="l42.183" class="difflineplus">+      bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;imapAclAdministerRight&quot;),</span>
<a href="#l42.184"></a><span id="l42.184">                                 getter_Copies(curRight));</span>
<a href="#l42.185"></a><span id="l42.185">       aRightsString.Append(curRight);</span>
<a href="#l42.186"></a><span id="l42.186">     }</span>
<a href="#l42.187"></a><span id="l42.187">   }</span>
<a href="#l42.188"></a><span id="l42.188">   return rv;</span>
<a href="#l42.189"></a><span id="l42.189"> }</span>
<a href="#l42.190"></a><span id="l42.190"> </span>
<a href="#l42.191"></a><span id="l42.191"> NS_IMETHODIMP nsImapMailFolder::GetFilePath(nsIFile ** aPathName)</span>
<a href="#l42.192"></a><span id="l42.192" class="difflineat">@@ -8132,17 +8132,17 @@ nsImapMailFolder::CopyStreamMessage(nsIM</span>
<a href="#l42.193"></a><span id="l42.193">                                             totalMsgString.get(),</span>
<a href="#l42.194"></a><span id="l42.194">                                             dstFolderName.get()</span>
<a href="#l42.195"></a><span id="l42.195">                                             };</span>
<a href="#l42.196"></a><span id="l42.196"> </span>
<a href="#l42.197"></a><span id="l42.197">       nsCOMPtr &lt;nsIStringBundle&gt; bundle;</span>
<a href="#l42.198"></a><span id="l42.198">       rv = IMAPGetStringBundle(getter_AddRefs(bundle));</span>
<a href="#l42.199"></a><span id="l42.199">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l42.200"></a><span id="l42.200">       rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l42.201"></a><span id="l42.201" class="difflineminus">-        NS_LITERAL_STRING(&quot;imapCopyingMessageOf&quot;).get(),</span>
<a href="#l42.202"></a><span id="l42.202" class="difflineplus">+        MOZ_UTF16(&quot;imapCopyingMessageOf&quot;),</span>
<a href="#l42.203"></a><span id="l42.203">         formatStrings, 3, getter_Copies(progressText));</span>
<a href="#l42.204"></a><span id="l42.204">       nsCOMPtr &lt;nsIMsgStatusFeedback&gt; statusFeedback;</span>
<a href="#l42.205"></a><span id="l42.205">       if (m_copyState-&gt;m_msgWindow)</span>
<a href="#l42.206"></a><span id="l42.206">         m_copyState-&gt;m_msgWindow-&gt;GetStatusFeedback(getter_AddRefs(statusFeedback));</span>
<a href="#l42.207"></a><span id="l42.207">       if (statusFeedback)</span>
<a href="#l42.208"></a><span id="l42.208">       {</span>
<a href="#l42.209"></a><span id="l42.209">         statusFeedback-&gt;ShowStatusString(progressText);</span>
<a href="#l42.210"></a><span id="l42.210">         int32_t percent;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/mailnews/imap/src/nsImapService.cpp</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapService.cpp</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -2734,26 +2734,26 @@ NS_IMETHODIMP nsImapService::NewChannel(</span>
<a href="#l43.4"></a><span id="l43.4">       nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l43.5"></a><span id="l43.5">       rv = IMAPGetStringBundle(getter_AddRefs(bundle));</span>
<a href="#l43.6"></a><span id="l43.6">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l43.7"></a><span id="l43.7">         // need to convert folder name from mod-utf7 to unicode</span>
<a href="#l43.8"></a><span id="l43.8">       nsAutoString unescapedName;</span>
<a href="#l43.9"></a><span id="l43.9">       if (NS_FAILED(CopyMUTF7toUTF16(fullFolderName, unescapedName)))</span>
<a href="#l43.10"></a><span id="l43.10">         CopyASCIItoUTF16(fullFolderName, unescapedName);</span>
<a href="#l43.11"></a><span id="l43.11">       const PRUnichar *formatStrings[1] = { unescapedName.get() };</span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-      </span>
<a href="#l43.13"></a><span id="l43.13" class="difflineplus">+</span>
<a href="#l43.14"></a><span id="l43.14">       rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l43.15"></a><span id="l43.15" class="difflineminus">-        NS_LITERAL_STRING(&quot;imapSubscribePrompt&quot;).get(),</span>
<a href="#l43.16"></a><span id="l43.16" class="difflineplus">+        MOZ_UTF16(&quot;imapSubscribePrompt&quot;),</span>
<a href="#l43.17"></a><span id="l43.17">         formatStrings, 1, getter_Copies(confirmText));</span>
<a href="#l43.18"></a><span id="l43.18">       NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l43.19"></a><span id="l43.19" class="difflineminus">-      </span>
<a href="#l43.20"></a><span id="l43.20" class="difflineplus">+</span>
<a href="#l43.21"></a><span id="l43.21">       bool confirmResult = false;</span>
<a href="#l43.22"></a><span id="l43.22">       rv = dialog-&gt;Confirm(nullptr, confirmText.get(), &amp;confirmResult);</span>
<a href="#l43.23"></a><span id="l43.23">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l43.24"></a><span id="l43.24" class="difflineminus">-      </span>
<a href="#l43.25"></a><span id="l43.25" class="difflineplus">+</span>
<a href="#l43.26"></a><span id="l43.26">       if (confirmResult)</span>
<a href="#l43.27"></a><span id="l43.27">       {</span>
<a href="#l43.28"></a><span id="l43.28">         nsCOMPtr &lt;nsIImapIncomingServer&gt; imapServer = do_QueryInterface(server);</span>
<a href="#l43.29"></a><span id="l43.29">         if (imapServer)</span>
<a href="#l43.30"></a><span id="l43.30">         {</span>
<a href="#l43.31"></a><span id="l43.31">           nsCOMPtr &lt;nsIURI&gt; subscribeURI;</span>
<a href="#l43.32"></a><span id="l43.32">           // now we have the real folder name to try to subscribe to. Let's try running</span>
<a href="#l43.33"></a><span id="l43.33">           // a subscribe url and returning that as the uri we've created.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/mailnews/import/eudora/src/nsEudoraFilters.cpp</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/mailnews/import/eudora/src/nsEudoraFilters.cpp</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -365,17 +365,17 @@ nsresult nsEudoraFilters::Init()</span>
<a href="#l44.4"></a><span id="l44.4"> </span>
<a href="#l44.5"></a><span id="l44.5">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l44.6"></a><span id="l44.6">   rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/importMsgs.properties&quot;,</span>
<a href="#l44.7"></a><span id="l44.7">                                    getter_AddRefs(bundle));</span>
<a href="#l44.8"></a><span id="l44.8">   if (NS_SUCCEEDED(rv))</span>
<a href="#l44.9"></a><span id="l44.9">   {</span>
<a href="#l44.10"></a><span id="l44.10">     nsAutoString Eudora(NS_LITERAL_STRING(&quot;Eudora&quot;));</span>
<a href="#l44.11"></a><span id="l44.11">     const PRUnichar *moduleName[] = { Eudora.get() };</span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-    rv = bundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;ImportModuleFolderName&quot;).get(),</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+    rv = bundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;ImportModuleFolderName&quot;),</span>
<a href="#l44.14"></a><span id="l44.14">                                       moduleName, 1, getter_Copies(folderName));</span>
<a href="#l44.15"></a><span id="l44.15">   }</span>
<a href="#l44.16"></a><span id="l44.16">   localRootFolder-&gt;GetChildNamed(folderName, getter_AddRefs(m_pMailboxesRoot));</span>
<a href="#l44.17"></a><span id="l44.17">   if (!m_pMailboxesRoot)</span>
<a href="#l44.18"></a><span id="l44.18">   {</span>
<a href="#l44.19"></a><span id="l44.19">     // If no &quot;Eudora Import&quot; folder then this is a</span>
<a href="#l44.20"></a><span id="l44.20">     // migration which just puts it in the root</span>
<a href="#l44.21"></a><span id="l44.21">     m_pMailboxesRoot = localRootFolder;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/mailnews/import/src/nsImportMail.cpp</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/mailnews/import/src/nsImportMail.cpp</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -908,22 +908,22 @@ bool nsImportGenericMail::CreateFolder(n</span>
<a href="#l45.4"></a><span id="l45.4">   if (!bundleService)</span>
<a href="#l45.5"></a><span id="l45.5">       return false;</span>
<a href="#l45.6"></a><span id="l45.6">   rv = bundleService-&gt;CreateBundle(IMPORT_MSGS_URL, getter_AddRefs(bundle));</span>
<a href="#l45.7"></a><span id="l45.7">   if (NS_FAILED(rv))</span>
<a href="#l45.8"></a><span id="l45.8">       return false;</span>
<a href="#l45.9"></a><span id="l45.9">   nsString folderName;</span>
<a href="#l45.10"></a><span id="l45.10">   if (!m_pName.IsEmpty()) {</span>
<a href="#l45.11"></a><span id="l45.11">     const PRUnichar *moduleName[] = { m_pName.get() };</span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-    rv = bundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;ImportModuleFolderName&quot;).get(),</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+    rv = bundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;ImportModuleFolderName&quot;),</span>
<a href="#l45.14"></a><span id="l45.14">                                       moduleName, 1,</span>
<a href="#l45.15"></a><span id="l45.15">                                       getter_Copies(folderName));</span>
<a href="#l45.16"></a><span id="l45.16">   }</span>
<a href="#l45.17"></a><span id="l45.17">   else {</span>
<a href="#l45.18"></a><span id="l45.18" class="difflineminus">-    rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;DefaultFolderName&quot;).get(),</span>
<a href="#l45.19"></a><span id="l45.19" class="difflineplus">+    rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;DefaultFolderName&quot;),</span>
<a href="#l45.20"></a><span id="l45.20">                                    getter_Copies(folderName));</span>
<a href="#l45.21"></a><span id="l45.21">   }</span>
<a href="#l45.22"></a><span id="l45.22">   if (NS_FAILED(rv)) {</span>
<a href="#l45.23"></a><span id="l45.23">       IMPORT_LOG0(&quot;*** Failed to get Folder Name!\n&quot;);</span>
<a href="#l45.24"></a><span id="l45.24">       return false;</span>
<a href="#l45.25"></a><span id="l45.25">   }</span>
<a href="#l45.26"></a><span id="l45.26">   nsCOMPtr &lt;nsIMsgAccountManager&gt; accMgr = do_GetService(NS_MSGACCOUNTMANAGER_CONTRACTID, &amp;rv);</span>
<a href="#l45.27"></a><span id="l45.27">   if (NS_FAILED(rv)) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/mailnews/local/src/nsLocalMailFolder.cpp</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/mailnews/local/src/nsLocalMailFolder.cpp</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -836,29 +836,29 @@ nsresult nsMsgLocalMailFolder::ConfirmFo</span>
<a href="#l46.4"></a><span id="l46.4"> </span>
<a href="#l46.5"></a><span id="l46.5">       nsAutoString folderName;</span>
<a href="#l46.6"></a><span id="l46.6">       rv = aFolder-&gt;GetName(folderName);</span>
<a href="#l46.7"></a><span id="l46.7">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l46.8"></a><span id="l46.8">       const PRUnichar *formatStrings[1] = { folderName.get() };</span>
<a href="#l46.9"></a><span id="l46.9"> </span>
<a href="#l46.10"></a><span id="l46.10">       nsAutoString deleteFolderDialogTitle;</span>
<a href="#l46.11"></a><span id="l46.11">       rv = bundle-&gt;GetStringFromName(</span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-        NS_LITERAL_STRING(&quot;pop3DeleteFolderDialogTitle&quot;).get(),</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+        MOZ_UTF16(&quot;pop3DeleteFolderDialogTitle&quot;),</span>
<a href="#l46.14"></a><span id="l46.14">         getter_Copies(deleteFolderDialogTitle));</span>
<a href="#l46.15"></a><span id="l46.15">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l46.16"></a><span id="l46.16"> </span>
<a href="#l46.17"></a><span id="l46.17">       nsAutoString deleteFolderButtonLabel;</span>
<a href="#l46.18"></a><span id="l46.18">       rv = bundle-&gt;GetStringFromName(</span>
<a href="#l46.19"></a><span id="l46.19" class="difflineminus">-        NS_LITERAL_STRING(&quot;pop3DeleteFolderButtonLabel&quot;).get(),</span>
<a href="#l46.20"></a><span id="l46.20" class="difflineplus">+        MOZ_UTF16(&quot;pop3DeleteFolderButtonLabel&quot;),</span>
<a href="#l46.21"></a><span id="l46.21">         getter_Copies(deleteFolderButtonLabel));</span>
<a href="#l46.22"></a><span id="l46.22">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l46.23"></a><span id="l46.23"> </span>
<a href="#l46.24"></a><span id="l46.24">       nsAutoString confirmationStr;</span>
<a href="#l46.25"></a><span id="l46.25">       rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l46.26"></a><span id="l46.26" class="difflineminus">-        NS_LITERAL_STRING(&quot;pop3MoveFolderToTrash&quot;).get(), formatStrings, 1,</span>
<a href="#l46.27"></a><span id="l46.27" class="difflineplus">+        MOZ_UTF16(&quot;pop3MoveFolderToTrash&quot;), formatStrings, 1,</span>
<a href="#l46.28"></a><span id="l46.28">         getter_Copies(confirmationStr));</span>
<a href="#l46.29"></a><span id="l46.29">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l46.30"></a><span id="l46.30"> </span>
<a href="#l46.31"></a><span id="l46.31">       nsCOMPtr&lt;nsIPrompt&gt; dialog(do_GetInterface(docShell));</span>
<a href="#l46.32"></a><span id="l46.32">       if (dialog)</span>
<a href="#l46.33"></a><span id="l46.33">       {</span>
<a href="#l46.34"></a><span id="l46.34">         int32_t buttonPressed = 0;</span>
<a href="#l46.35"></a><span id="l46.35">         // Default the dialog to &quot;cancel&quot;.</span>
<a href="#l46.36"></a><span id="l46.36" class="difflineat">@@ -3158,18 +3158,18 @@ nsresult nsMsgLocalMailFolder::DisplayMo</span>
<a href="#l46.37"></a><span id="l46.37">       numMsgSoFarString.AppendInt((mCopyState-&gt;m_copyingMultipleMessages) ? mCopyState-&gt;m_curCopyIndex : 1);</span>
<a href="#l46.38"></a><span id="l46.38"> </span>
<a href="#l46.39"></a><span id="l46.39">       nsAutoString totalMessagesString;</span>
<a href="#l46.40"></a><span id="l46.40">       totalMessagesString.AppendInt(mCopyState-&gt;m_totalMsgCount);</span>
<a href="#l46.41"></a><span id="l46.41">       nsString finalString;</span>
<a href="#l46.42"></a><span id="l46.42">       const PRUnichar * stringArray[] = { numMsgSoFarString.get(), totalMessagesString.get(), folderName.get() };</span>
<a href="#l46.43"></a><span id="l46.43">       rv = mCopyState-&gt;m_stringBundle-&gt;FormatStringFromName(</span>
<a href="#l46.44"></a><span id="l46.44">         (mCopyState-&gt;m_isMove) ?</span>
<a href="#l46.45"></a><span id="l46.45" class="difflineminus">-        NS_LITERAL_STRING(&quot;movingMessagesStatus&quot;).get() :</span>
<a href="#l46.46"></a><span id="l46.46" class="difflineminus">-        NS_LITERAL_STRING(&quot;copyingMessagesStatus&quot;).get(),</span>
<a href="#l46.47"></a><span id="l46.47" class="difflineplus">+        MOZ_UTF16(&quot;movingMessagesStatus&quot;) :</span>
<a href="#l46.48"></a><span id="l46.48" class="difflineplus">+        MOZ_UTF16(&quot;copyingMessagesStatus&quot;),</span>
<a href="#l46.49"></a><span id="l46.49">         stringArray, 3, getter_Copies(finalString));</span>
<a href="#l46.50"></a><span id="l46.50">       int64_t nowMS = PR_IntervalToMilliseconds(PR_IntervalNow());</span>
<a href="#l46.51"></a><span id="l46.51"> </span>
<a href="#l46.52"></a><span id="l46.52">       // only update status/progress every half second</span>
<a href="#l46.53"></a><span id="l46.53">       if (nowMS - mCopyState-&gt;m_lastProgressTime &lt; 500 &amp;&amp;</span>
<a href="#l46.54"></a><span id="l46.54">           mCopyState-&gt;m_curCopyIndex &lt; mCopyState-&gt;m_totalMsgCount)</span>
<a href="#l46.55"></a><span id="l46.55">         return NS_OK;</span>
<a href="#l46.56"></a><span id="l46.56"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/mailnews/local/src/nsPop3Protocol.cpp</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/mailnews/local/src/nsPop3Protocol.cpp</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -865,29 +865,29 @@ NS_IMETHODIMP nsPop3Protocol::OnPromptSt</span>
<a href="#l47.4"></a><span id="l47.4">           // As we're async, calling ProcessProtocolState gets things going</span>
<a href="#l47.5"></a><span id="l47.5">           // again.</span>
<a href="#l47.6"></a><span id="l47.6">           ProcessProtocolState(nullptr, nullptr, 0, 0);</span>
<a href="#l47.7"></a><span id="l47.7">           return NS_OK;</span>
<a href="#l47.8"></a><span id="l47.8">         }</span>
<a href="#l47.9"></a><span id="l47.9">       }</span>
<a href="#l47.10"></a><span id="l47.10">     }</span>
<a href="#l47.11"></a><span id="l47.11">     mLocalBundle-&gt;FormatStringFromName(</span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-      NS_LITERAL_STRING(&quot;pop3PreviouslyEnteredPasswordIsInvalidPrompt&quot;).get(),</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineplus">+      MOZ_UTF16(&quot;pop3PreviouslyEnteredPasswordIsInvalidPrompt&quot;),</span>
<a href="#l47.14"></a><span id="l47.14">       passwordParams, 2, getter_Copies(passwordPrompt));</span>
<a href="#l47.15"></a><span id="l47.15">   }</span>
<a href="#l47.16"></a><span id="l47.16">   else</span>
<a href="#l47.17"></a><span id="l47.17">     // Otherwise this is the first time we've asked about the server's</span>
<a href="#l47.18"></a><span id="l47.18">     // password so show a first time prompt.</span>
<a href="#l47.19"></a><span id="l47.19">     mLocalBundle-&gt;FormatStringFromName(</span>
<a href="#l47.20"></a><span id="l47.20" class="difflineminus">-      NS_LITERAL_STRING(&quot;pop3EnterPasswordPrompt&quot;).get(),</span>
<a href="#l47.21"></a><span id="l47.21" class="difflineplus">+      MOZ_UTF16(&quot;pop3EnterPasswordPrompt&quot;),</span>
<a href="#l47.22"></a><span id="l47.22">       passwordParams, 2, getter_Copies(passwordPrompt));</span>
<a href="#l47.23"></a><span id="l47.23"> </span>
<a href="#l47.24"></a><span id="l47.24">   nsString passwordTitle;</span>
<a href="#l47.25"></a><span id="l47.25">   mLocalBundle-&gt;GetStringFromName(</span>
<a href="#l47.26"></a><span id="l47.26" class="difflineminus">-    NS_LITERAL_STRING(&quot;pop3EnterPasswordPromptTitle&quot;).get(),</span>
<a href="#l47.27"></a><span id="l47.27" class="difflineplus">+    MOZ_UTF16(&quot;pop3EnterPasswordPromptTitle&quot;),</span>
<a href="#l47.28"></a><span id="l47.28">     getter_Copies(passwordTitle));</span>
<a href="#l47.29"></a><span id="l47.29"> </span>
<a href="#l47.30"></a><span id="l47.30">   // Now go and get the password.</span>
<a href="#l47.31"></a><span id="l47.31">   if (!passwordPrompt.IsEmpty() &amp;&amp; !passwordTitle.IsEmpty())</span>
<a href="#l47.32"></a><span id="l47.32">     rv = server-&gt;GetPasswordWithUI(passwordPrompt, passwordTitle,</span>
<a href="#l47.33"></a><span id="l47.33">                                     msgWindow, passwordResult);</span>
<a href="#l47.34"></a><span id="l47.34">   ClearFlag(POP3_PASSWORD_FAILED|POP3_AUTH_FAILURE);</span>
<a href="#l47.35"></a><span id="l47.35"> </span>
<a href="#l47.36"></a><span id="l47.36" class="difflineat">@@ -1264,17 +1264,17 @@ nsPop3Protocol::Error(const char* err_co</span>
<a href="#l47.37"></a><span id="l47.37">     // so print out that error message!</span>
<a href="#l47.38"></a><span id="l47.38">     nsCOMPtr&lt;nsIMsgIncomingServer&gt; server = do_QueryInterface(m_pop3Server);</span>
<a href="#l47.39"></a><span id="l47.39">     nsString accountName;</span>
<a href="#l47.40"></a><span id="l47.40">     nsresult rv = server-&gt;GetPrettyName(accountName);</span>
<a href="#l47.41"></a><span id="l47.41">     NS_ENSURE_SUCCESS(rv, -1);</span>
<a href="#l47.42"></a><span id="l47.42">     const PRUnichar *titleParams[] = { accountName.get() };</span>
<a href="#l47.43"></a><span id="l47.43">     nsString dialogTitle;</span>
<a href="#l47.44"></a><span id="l47.44">     mLocalBundle-&gt;FormatStringFromName(</span>
<a href="#l47.45"></a><span id="l47.45" class="difflineminus">-      NS_LITERAL_STRING(&quot;pop3ErrorDialogTitle&quot;).get(),</span>
<a href="#l47.46"></a><span id="l47.46" class="difflineplus">+      MOZ_UTF16(&quot;pop3ErrorDialogTitle&quot;),</span>
<a href="#l47.47"></a><span id="l47.47">       titleParams, 1, getter_Copies(dialogTitle));</span>
<a href="#l47.48"></a><span id="l47.48">     nsCOMPtr&lt;nsIMsgMailNewsUrl&gt; mailnewsUrl = do_QueryInterface(m_url, &amp;rv);</span>
<a href="#l47.49"></a><span id="l47.49">     // we handle &quot;pop3TmpDownloadError&quot; earlier...</span>
<a href="#l47.50"></a><span id="l47.50">     if (strcmp(err_code, &quot;pop3TmpDownloadError&quot;) &amp;&amp; NS_SUCCEEDED(rv))</span>
<a href="#l47.51"></a><span id="l47.51">     {</span>
<a href="#l47.52"></a><span id="l47.52">         nsCOMPtr&lt;nsIMsgWindow&gt; msgWindow;</span>
<a href="#l47.53"></a><span id="l47.53">         nsCOMPtr&lt;nsIPrompt&gt; dialog;</span>
<a href="#l47.54"></a><span id="l47.54">         rv = mailnewsUrl-&gt;GetMsgWindow(getter_AddRefs(msgWindow)); //it is ok to have null msgWindow, for example when biffing</span>
<a href="#l47.55"></a><span id="l47.55" class="difflineat">@@ -1302,17 +1302,17 @@ nsPop3Protocol::Error(const char* err_co</span>
<a href="#l47.56"></a><span id="l47.56">                 if (server)</span>
<a href="#l47.57"></a><span id="l47.57">                   rv = server-&gt;GetRealHostName(hostName);</span>
<a href="#l47.58"></a><span id="l47.58">                 if (NS_SUCCEEDED(rv))</span>
<a href="#l47.59"></a><span id="l47.59">                 {</span>
<a href="#l47.60"></a><span id="l47.60">                   nsAutoString hostStr;</span>
<a href="#l47.61"></a><span id="l47.61">                   CopyASCIItoUTF16(hostName, hostStr);</span>
<a href="#l47.62"></a><span id="l47.62">                   const PRUnichar *params[] = { hostStr.get() };</span>
<a href="#l47.63"></a><span id="l47.63">                   mLocalBundle-&gt;FormatStringFromName(</span>
<a href="#l47.64"></a><span id="l47.64" class="difflineminus">-                    NS_LITERAL_STRING(&quot;pop3ServerSaid&quot;).get(),</span>
<a href="#l47.65"></a><span id="l47.65" class="difflineplus">+                    MOZ_UTF16(&quot;pop3ServerSaid&quot;),</span>
<a href="#l47.66"></a><span id="l47.66">                     params, 1, getter_Copies(serverSaidPrefix));</span>
<a href="#l47.67"></a><span id="l47.67">                 }</span>
<a href="#l47.68"></a><span id="l47.68"> </span>
<a href="#l47.69"></a><span id="l47.69">                 nsAutoString message(alertString);</span>
<a href="#l47.70"></a><span id="l47.70">                 message.AppendLiteral(&quot; &quot;);</span>
<a href="#l47.71"></a><span id="l47.71">                 message.Append(serverSaidPrefix);</span>
<a href="#l47.72"></a><span id="l47.72">                 message.AppendLiteral(&quot; &quot;);</span>
<a href="#l47.73"></a><span id="l47.73">                 message.Append(NS_ConvertASCIItoUTF16(m_commandResponse));</span>
<a href="#l47.74"></a><span id="l47.74" class="difflineat">@@ -3438,17 +3438,17 @@ nsPop3Protocol::TopResponse(nsIInputStre</span>
<a href="#l47.75"></a><span id="l47.75">   So just go download the whole thing, and warn the user.</span>
<a href="#l47.76"></a><span id="l47.76"> </span>
<a href="#l47.77"></a><span id="l47.77">     Note that the progress bar will not be accurate in this case.</span>
<a href="#l47.78"></a><span id="l47.78">     Oops. #### */</span>
<a href="#l47.79"></a><span id="l47.79">     m_pop3ConData-&gt;truncating_cur_msg = false;</span>
<a href="#l47.80"></a><span id="l47.80"> </span>
<a href="#l47.81"></a><span id="l47.81">     nsString statusTemplate;</span>
<a href="#l47.82"></a><span id="l47.82">     mLocalBundle-&gt;GetStringFromName(</span>
<a href="#l47.83"></a><span id="l47.83" class="difflineminus">-      NS_LITERAL_STRING(&quot;pop3ServerDoesNotSupportTopCommand&quot;).get(),</span>
<a href="#l47.84"></a><span id="l47.84" class="difflineplus">+      MOZ_UTF16(&quot;pop3ServerDoesNotSupportTopCommand&quot;),</span>
<a href="#l47.85"></a><span id="l47.85">       getter_Copies(statusTemplate));</span>
<a href="#l47.86"></a><span id="l47.86">     if (!statusTemplate.IsEmpty())</span>
<a href="#l47.87"></a><span id="l47.87">     {</span>
<a href="#l47.88"></a><span id="l47.88">       nsAutoCString hostName;</span>
<a href="#l47.89"></a><span id="l47.89">       PRUnichar * statusString = nullptr;</span>
<a href="#l47.90"></a><span id="l47.90">       m_url-&gt;GetHost(hostName);</span>
<a href="#l47.91"></a><span id="l47.91"> </span>
<a href="#l47.92"></a><span id="l47.92">       statusString = nsTextFormatter::smprintf(statusTemplate.get(), hostName.get());</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/mailnews/local/src/nsPop3Service.cpp</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/mailnews/local/src/nsPop3Service.cpp</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -461,20 +461,20 @@ void nsPop3Service::AlertServerBusy(nsIM</span>
<a href="#l48.4"></a><span id="l48.4">   NS_ENSURE_SUCCESS_VOID(rv);</span>
<a href="#l48.5"></a><span id="l48.5">   rv = server-&gt;GetPrettyName(accountName);</span>
<a href="#l48.6"></a><span id="l48.6">   NS_ENSURE_SUCCESS_VOID(rv);</span>
<a href="#l48.7"></a><span id="l48.7"> </span>
<a href="#l48.8"></a><span id="l48.8">   const PRUnichar *params[] = { accountName.get() };</span>
<a href="#l48.9"></a><span id="l48.9">   nsString alertString;</span>
<a href="#l48.10"></a><span id="l48.10">   nsString dialogTitle;</span>
<a href="#l48.11"></a><span id="l48.11">   bundle-&gt;FormatStringFromName(</span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-    NS_LITERAL_STRING(&quot;pop3ServerBusy&quot;).get(),</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineplus">+    MOZ_UTF16(&quot;pop3ServerBusy&quot;),</span>
<a href="#l48.14"></a><span id="l48.14">     params, 1, getter_Copies(alertString));</span>
<a href="#l48.15"></a><span id="l48.15">   bundle-&gt;FormatStringFromName(</span>
<a href="#l48.16"></a><span id="l48.16" class="difflineminus">-    NS_LITERAL_STRING(&quot;pop3ErrorDialogTitle&quot;).get(),</span>
<a href="#l48.17"></a><span id="l48.17" class="difflineplus">+    MOZ_UTF16(&quot;pop3ErrorDialogTitle&quot;),</span>
<a href="#l48.18"></a><span id="l48.18">     params, 1, getter_Copies(dialogTitle));</span>
<a href="#l48.19"></a><span id="l48.19">   if (!alertString.IsEmpty())</span>
<a href="#l48.20"></a><span id="l48.20">     dialog-&gt;Alert(dialogTitle.get(), alertString.get());</span>
<a href="#l48.21"></a><span id="l48.21"> }</span>
<a href="#l48.22"></a><span id="l48.22"> </span>
<a href="#l48.23"></a><span id="l48.23"> NS_IMETHODIMP nsPop3Service::NewChannel(nsIURI *aURI, nsIChannel **_retval)</span>
<a href="#l48.24"></a><span id="l48.24"> {</span>
<a href="#l48.25"></a><span id="l48.25">   NS_ENSURE_ARG_POINTER(aURI);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/mailnews/local/src/nsPop3Sink.cpp</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/mailnews/local/src/nsPop3Sink.cpp</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -702,17 +702,17 @@ nsresult nsPop3Sink::HandleTempDownloadF</span>
<a href="#l49.4"></a><span id="l49.4">   rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/localMsgs.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l49.5"></a><span id="l49.5">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l49.6"></a><span id="l49.6">   nsString fromStr, subjectStr, confirmString;</span>
<a href="#l49.7"></a><span id="l49.7"> </span>
<a href="#l49.8"></a><span id="l49.8">   m_newMailParser-&gt;m_newMsgHdr-&gt;GetMime2DecodedSubject(subjectStr);</span>
<a href="#l49.9"></a><span id="l49.9">   m_newMailParser-&gt;m_newMsgHdr-&gt;GetMime2DecodedAuthor(fromStr);</span>
<a href="#l49.10"></a><span id="l49.10">   const PRUnichar *params[] = { fromStr.get(), subjectStr.get() };</span>
<a href="#l49.11"></a><span id="l49.11">   bundle-&gt;FormatStringFromName(</span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-    NS_LITERAL_STRING(&quot;pop3TmpDownloadError&quot;).get(),</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineplus">+    MOZ_UTF16(&quot;pop3TmpDownloadError&quot;),</span>
<a href="#l49.14"></a><span id="l49.14">     params, 2, getter_Copies(confirmString));</span>
<a href="#l49.15"></a><span id="l49.15">   nsCOMPtr&lt;nsIDOMWindow&gt; parentWindow;</span>
<a href="#l49.16"></a><span id="l49.16">   nsCOMPtr&lt;nsIPromptService&gt; promptService = do_GetService(NS_PROMPTSERVICE_CONTRACTID);</span>
<a href="#l49.17"></a><span id="l49.17">   nsCOMPtr&lt;nsIDocShell&gt; docShell;</span>
<a href="#l49.18"></a><span id="l49.18">   if (msgWindow)</span>
<a href="#l49.19"></a><span id="l49.19">   {</span>
<a href="#l49.20"></a><span id="l49.20">     (void) msgWindow-&gt;GetRootDocShell(getter_AddRefs(docShell));</span>
<a href="#l49.21"></a><span id="l49.21">     parentWindow = do_QueryInterface(docShell);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/mailnews/mapi/mapihook/src/msgMapiHook.cpp</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/mailnews/mapi/mapihook/src/msgMapiHook.cpp</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -144,32 +144,32 @@ bool nsMapiHook::DisplayLoginDialog(bool</span>
<a href="#l50.4"></a><span id="l50.4">     nsCOMPtr&lt;nsIStringBundle&gt; brandBundle;</span>
<a href="#l50.5"></a><span id="l50.5">     rv = bundleService-&gt;CreateBundle(</span>
<a href="#l50.6"></a><span id="l50.6">                     &quot;chrome://branding/locale/brand.properties&quot;,</span>
<a href="#l50.7"></a><span id="l50.7">                     getter_AddRefs(brandBundle));</span>
<a href="#l50.8"></a><span id="l50.8">     if (NS_FAILED(rv)) return false;</span>
<a href="#l50.9"></a><span id="l50.9"> </span>
<a href="#l50.10"></a><span id="l50.10">     nsString brandName;</span>
<a href="#l50.11"></a><span id="l50.11">     rv = brandBundle-&gt;GetStringFromName(</span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-                       NS_LITERAL_STRING(&quot;brandFullName&quot;).get(),</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineplus">+                       MOZ_UTF16(&quot;brandFullName&quot;),</span>
<a href="#l50.14"></a><span id="l50.14">                        getter_Copies(brandName));</span>
<a href="#l50.15"></a><span id="l50.15">     if (NS_FAILED(rv)) return false;</span>
<a href="#l50.16"></a><span id="l50.16"> </span>
<a href="#l50.17"></a><span id="l50.17">     nsString loginTitle;</span>
<a href="#l50.18"></a><span id="l50.18">     const PRUnichar *brandStrings[] = { brandName.get() };</span>
<a href="#l50.19"></a><span id="l50.19">     NS_NAMED_LITERAL_STRING(loginTitlePropertyTag, &quot;loginTitle&quot;);</span>
<a href="#l50.20"></a><span id="l50.20">     const PRUnichar *dTitlePropertyTag = loginTitlePropertyTag.get();</span>
<a href="#l50.21"></a><span id="l50.21">     rv = bundle-&gt;FormatStringFromName(dTitlePropertyTag, brandStrings, 1,</span>
<a href="#l50.22"></a><span id="l50.22">                                       getter_Copies(loginTitle));</span>
<a href="#l50.23"></a><span id="l50.23">     if (NS_FAILED(rv)) return false;</span>
<a href="#l50.24"></a><span id="l50.24"> </span>
<a href="#l50.25"></a><span id="l50.25">     if (aLogin)</span>
<a href="#l50.26"></a><span id="l50.26">     {</span>
<a href="#l50.27"></a><span id="l50.27">       nsString loginText;</span>
<a href="#l50.28"></a><span id="l50.28" class="difflineminus">-      rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;loginTextwithName&quot;).get(),</span>
<a href="#l50.29"></a><span id="l50.29" class="difflineplus">+      rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;loginTextwithName&quot;),</span>
<a href="#l50.30"></a><span id="l50.30">                                      getter_Copies(loginText));</span>
<a href="#l50.31"></a><span id="l50.31">       if (NS_FAILED(rv) || loginText.IsEmpty()) return false;</span>
<a href="#l50.32"></a><span id="l50.32"> </span>
<a href="#l50.33"></a><span id="l50.33">       bool dummyValue = false;</span>
<a href="#l50.34"></a><span id="l50.34">       rv = dlgService-&gt;PromptUsernameAndPassword(nullptr, loginTitle.get(),</span>
<a href="#l50.35"></a><span id="l50.35">                                                  loginText.get(), aUsername, aPassword,</span>
<a href="#l50.36"></a><span id="l50.36">                                                  nullptr, &amp;dummyValue, &amp;btnResult);</span>
<a href="#l50.37"></a><span id="l50.37">     }</span>
<a href="#l50.38"></a><span id="l50.38" class="difflineat">@@ -253,22 +253,22 @@ nsMapiHook::IsBlindSendAllowed()</span>
<a href="#l50.39"></a><span id="l50.39">     mozilla::services::GetStringBundleService();</span>
<a href="#l50.40"></a><span id="l50.40">   if (!bundleService) return false;</span>
<a href="#l50.41"></a><span id="l50.41"> </span>
<a href="#l50.42"></a><span id="l50.42">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l50.43"></a><span id="l50.43">   rv = bundleService-&gt;CreateBundle(MAPI_PROPERTIES_CHROME, getter_AddRefs(bundle));</span>
<a href="#l50.44"></a><span id="l50.44">   if (NS_FAILED(rv) || !bundle) return false;</span>
<a href="#l50.45"></a><span id="l50.45"> </span>
<a href="#l50.46"></a><span id="l50.46">   nsString warningMsg;</span>
<a href="#l50.47"></a><span id="l50.47" class="difflineminus">-  rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;mapiBlindSendWarning&quot;).get(),</span>
<a href="#l50.48"></a><span id="l50.48" class="difflineplus">+  rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;mapiBlindSendWarning&quot;),</span>
<a href="#l50.49"></a><span id="l50.49">                                       getter_Copies(warningMsg));</span>
<a href="#l50.50"></a><span id="l50.50">   if (NS_FAILED(rv)) return false;</span>
<a href="#l50.51"></a><span id="l50.51"> </span>
<a href="#l50.52"></a><span id="l50.52">   nsString dontShowAgainMessage;</span>
<a href="#l50.53"></a><span id="l50.53" class="difflineminus">-  rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;mapiBlindSendDontShowAgain&quot;).get(),</span>
<a href="#l50.54"></a><span id="l50.54" class="difflineplus">+  rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;mapiBlindSendDontShowAgain&quot;),</span>
<a href="#l50.55"></a><span id="l50.55">                                       getter_Copies(dontShowAgainMessage));</span>
<a href="#l50.56"></a><span id="l50.56">   if (NS_FAILED(rv)) return false;</span>
<a href="#l50.57"></a><span id="l50.57"> </span>
<a href="#l50.58"></a><span id="l50.58">   nsCOMPtr&lt;nsIPromptService&gt; dlgService(do_GetService(NS_PROMPTSERVICE_CONTRACTID, &amp;rv));</span>
<a href="#l50.59"></a><span id="l50.59">   if (NS_FAILED(rv) || !dlgService) return false;</span>
<a href="#l50.60"></a><span id="l50.60"> </span>
<a href="#l50.61"></a><span id="l50.61">   bool continueToWarn = true;</span>
<a href="#l50.62"></a><span id="l50.62">   bool okayToContinue = false;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/mailnews/mime/cthandlers/pgpmime/nsPgpMimeProxy.cpp</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/mailnews/mime/cthandlers/pgpmime/nsPgpMimeProxy.cpp</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -78,17 +78,17 @@ static void PgpMimeGetNeedsAddonString(n</span>
<a href="#l51.4"></a><span id="l51.4">   if (NS_FAILED(prefs-&gt;GetCharPref(&quot;mail.pgpmime.addon_url&quot;,</span>
<a href="#l51.5"></a><span id="l51.5">                                    getter_Copies(url))))</span>
<a href="#l51.6"></a><span id="l51.6">     return;</span>
<a href="#l51.7"></a><span id="l51.7"> </span>
<a href="#l51.8"></a><span id="l51.8">   NS_ConvertUTF8toUTF16 url16(url);</span>
<a href="#l51.9"></a><span id="l51.9">   const PRUnichar *formatStrings[] = { url16.get() };</span>
<a href="#l51.10"></a><span id="l51.10"> </span>
<a href="#l51.11"></a><span id="l51.11">   nsString result;</span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-  rv = stringBundle-&gt;FormatStringFromName(NS_LITERAL_STRING(PGPMIME_STR_NOT_SUPPORTED_ID).get(),</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineplus">+  rv = stringBundle-&gt;FormatStringFromName(MOZ_UTF16(PGPMIME_STR_NOT_SUPPORTED_ID),</span>
<a href="#l51.14"></a><span id="l51.14">                                           formatStrings, 1, getter_Copies(result));</span>
<a href="#l51.15"></a><span id="l51.15">   if (NS_FAILED(rv))</span>
<a href="#l51.16"></a><span id="l51.16">     return;</span>
<a href="#l51.17"></a><span id="l51.17">   aResult = NS_ConvertUTF16toUTF8(result);</span>
<a href="#l51.18"></a><span id="l51.18"> }</span>
<a href="#l51.19"></a><span id="l51.19"> </span>
<a href="#l51.20"></a><span id="l51.20"> static int</span>
<a href="#l51.21"></a><span id="l51.21"> MimeEncryptedPgpClassInitialize(MimeEncryptedPgpClass *clazz)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/mailnews/mime/emitters/nsMimeBaseEmitter.cpp</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/mailnews/mime/emitters/nsMimeBaseEmitter.cpp</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -738,17 +738,17 @@ nsMimeBaseEmitter::GenerateDateString(co</span>
<a href="#l52.4"></a><span id="l52.4">     {</span>
<a href="#l52.5"></a><span id="l52.5">       if (displaySenderTimezone)</span>
<a href="#l52.6"></a><span id="l52.6">       {</span>
<a href="#l52.7"></a><span id="l52.7">         // offset of local time from UTC in minutes</span>
<a href="#l52.8"></a><span id="l52.8">         int32_t senderoffset = (explodedMsgTime.tm_params.tp_gmt_offset +</span>
<a href="#l52.9"></a><span id="l52.9">                                 explodedMsgTime.tm_params.tp_dst_offset) / 60;</span>
<a href="#l52.10"></a><span id="l52.10">         // append offset to date string</span>
<a href="#l52.11"></a><span id="l52.11">         PRUnichar *tzstring =</span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-          nsTextFormatter::smprintf(NS_LITERAL_STRING(&quot; %+05d&quot;).get(),</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineplus">+          nsTextFormatter::smprintf(MOZ_UTF16(&quot; %+05d&quot;),</span>
<a href="#l52.14"></a><span id="l52.14">                                     (senderoffset / 60 * 100) +</span>
<a href="#l52.15"></a><span id="l52.15">                                     (senderoffset % 60));</span>
<a href="#l52.16"></a><span id="l52.16">         formattedDateString.Append(tzstring);</span>
<a href="#l52.17"></a><span id="l52.17">         nsTextFormatter::smprintf_free(tzstring);</span>
<a href="#l52.18"></a><span id="l52.18">       }</span>
<a href="#l52.19"></a><span id="l52.19"> </span>
<a href="#l52.20"></a><span id="l52.20">       CopyUTF16toUTF8(formattedDateString, formattedDate);</span>
<a href="#l52.21"></a><span id="l52.21">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/mailnews/mime/emitters/nsMimeHtmlEmitter.cpp</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/mailnews/mime/emitters/nsMimeHtmlEmitter.cpp</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -414,17 +414,17 @@ nsMimeHtmlDisplayEmitter::StartAttachmen</span>
<a href="#l53.4"></a><span id="l53.4">       NS_ENSURE_TRUE(bundleSvc, NS_ERROR_UNEXPECTED);</span>
<a href="#l53.5"></a><span id="l53.5"> </span>
<a href="#l53.6"></a><span id="l53.6">       nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l53.7"></a><span id="l53.7">       rv = bundleSvc-&gt;CreateBundle(&quot;chrome://messenger/locale/messenger.properties&quot;,</span>
<a href="#l53.8"></a><span id="l53.8">                                    getter_AddRefs(bundle));</span>
<a href="#l53.9"></a><span id="l53.9">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l53.10"></a><span id="l53.10"> </span>
<a href="#l53.11"></a><span id="l53.11">       nsString attachmentsHeader;</span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-      bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;attachmentsPrintHeader&quot;).get(),</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineplus">+      bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;attachmentsPrintHeader&quot;),</span>
<a href="#l53.14"></a><span id="l53.14">                                 getter_Copies(attachmentsHeader)); </span>
<a href="#l53.15"></a><span id="l53.15"> </span>
<a href="#l53.16"></a><span id="l53.16">       UtilityWrite(&quot;&lt;legend class=\&quot;mimeAttachmentHeaderName\&quot;&gt;&quot;);</span>
<a href="#l53.17"></a><span id="l53.17">       nsCString escapedName;</span>
<a href="#l53.18"></a><span id="l53.18">       escapedName.Adopt(MsgEscapeHTML(NS_ConvertUTF16toUTF8(attachmentsHeader).get()));</span>
<a href="#l53.19"></a><span id="l53.19">       UtilityWrite(escapedName.get());</span>
<a href="#l53.20"></a><span id="l53.20">       UtilityWrite(&quot;&lt;/legend&gt;&quot;);</span>
<a href="#l53.21"></a><span id="l53.21">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/mailnews/mime/src/mimemsg.cpp</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/mailnews/mime/src/mimemsg.cpp</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -847,26 +847,26 @@ MimeMessage_partial_message_html(const c</span>
<a href="#l54.4"></a><span id="l54.4">   nsCString partialMsgHtml;</span>
<a href="#l54.5"></a><span id="l54.5">   nsCString item;</span>
<a href="#l54.6"></a><span id="l54.6"> </span>
<a href="#l54.7"></a><span id="l54.7">   partialMsgHtml.AppendLiteral(&quot;&lt;div style=\&quot;margin: 1em auto; border: 1px solid black; width: 80%\&quot;&gt;&quot;);</span>
<a href="#l54.8"></a><span id="l54.8">   partialMsgHtml.AppendLiteral(&quot;&lt;div style=\&quot;margin: 5px; padding: 10px; border: 1px solid gray; font-weight: bold; text-align: center;\&quot;&gt;&quot;);</span>
<a href="#l54.9"></a><span id="l54.9"> </span>
<a href="#l54.10"></a><span id="l54.10">   partialMsgHtml.AppendLiteral(&quot;&lt;span style=\&quot;font-size: 120%;\&quot;&gt;&quot;);</span>
<a href="#l54.11"></a><span id="l54.11">   if (msgBaseTruncated)</span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-    item.Adopt(MimeGetStringByName(NS_LITERAL_STRING(&quot;MIME_MSG_PARTIAL_TRUNCATED&quot;).get()));</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineplus">+    item.Adopt(MimeGetStringByName(MOZ_UTF16(&quot;MIME_MSG_PARTIAL_TRUNCATED&quot;)));</span>
<a href="#l54.14"></a><span id="l54.14">   else</span>
<a href="#l54.15"></a><span id="l54.15" class="difflineminus">-    item.Adopt(MimeGetStringByName(NS_LITERAL_STRING(&quot;MIME_MSG_PARTIAL_NOT_DOWNLOADED&quot;).get()));</span>
<a href="#l54.16"></a><span id="l54.16" class="difflineplus">+    item.Adopt(MimeGetStringByName(MOZ_UTF16(&quot;MIME_MSG_PARTIAL_NOT_DOWNLOADED&quot;)));</span>
<a href="#l54.17"></a><span id="l54.17">   partialMsgHtml += item;</span>
<a href="#l54.18"></a><span id="l54.18">   partialMsgHtml.AppendLiteral(&quot;&lt;/span&gt;&lt;hr&gt;&quot;);</span>
<a href="#l54.19"></a><span id="l54.19"> </span>
<a href="#l54.20"></a><span id="l54.20">   if (msgBaseTruncated)</span>
<a href="#l54.21"></a><span id="l54.21" class="difflineminus">-    item.Adopt(MimeGetStringByName(NS_LITERAL_STRING(&quot;MIME_MSG_PARTIAL_TRUNCATED_EXPLANATION&quot;).get()));</span>
<a href="#l54.22"></a><span id="l54.22" class="difflineplus">+    item.Adopt(MimeGetStringByName(MOZ_UTF16(&quot;MIME_MSG_PARTIAL_TRUNCATED_EXPLANATION&quot;)));</span>
<a href="#l54.23"></a><span id="l54.23">   else</span>
<a href="#l54.24"></a><span id="l54.24" class="difflineminus">-    item.Adopt(MimeGetStringByName(NS_LITERAL_STRING(&quot;MIME_MSG_PARTIAL_NOT_DOWNLOADED_EXPLANATION&quot;).get()));</span>
<a href="#l54.25"></a><span id="l54.25" class="difflineplus">+    item.Adopt(MimeGetStringByName(MOZ_UTF16(&quot;MIME_MSG_PARTIAL_NOT_DOWNLOADED_EXPLANATION&quot;)));</span>
<a href="#l54.26"></a><span id="l54.26">   partialMsgHtml += item;</span>
<a href="#l54.27"></a><span id="l54.27">   partialMsgHtml.AppendLiteral(&quot;&lt;br&gt;&lt;br&gt;&quot;);</span>
<a href="#l54.28"></a><span id="l54.28"> </span>
<a href="#l54.29"></a><span id="l54.29">   partialMsgHtml.AppendLiteral(&quot;&lt;a href=\&quot;&quot;);</span>
<a href="#l54.30"></a><span id="l54.30">   partialMsgHtml.Append(orig_url);</span>
<a href="#l54.31"></a><span id="l54.31"> </span>
<a href="#l54.32"></a><span id="l54.32">   if (msgIdPtr) {</span>
<a href="#l54.33"></a><span id="l54.33">     partialMsgHtml.AppendLiteral(&quot;&amp;messageid=&quot;);</span>
<a href="#l54.34"></a><span id="l54.34" class="difflineat">@@ -882,17 +882,17 @@ MimeMessage_partial_message_html(const c</span>
<a href="#l54.35"></a><span id="l54.35"> </span>
<a href="#l54.36"></a><span id="l54.36">     MsgEscapeString(nsDependentCString(uidl), nsINetUtil::ESCAPE_XALPHAS,</span>
<a href="#l54.37"></a><span id="l54.37">                     item);</span>
<a href="#l54.38"></a><span id="l54.38"> </span>
<a href="#l54.39"></a><span id="l54.39">     partialMsgHtml.Append(item);</span>
<a href="#l54.40"></a><span id="l54.40">   }</span>
<a href="#l54.41"></a><span id="l54.41"> </span>
<a href="#l54.42"></a><span id="l54.42">   partialMsgHtml.AppendLiteral(&quot;\&quot;&gt;&quot;);</span>
<a href="#l54.43"></a><span id="l54.43" class="difflineminus">-  item.Adopt(MimeGetStringByName(NS_LITERAL_STRING(&quot;MIME_MSG_PARTIAL_CLICK_FOR_REST&quot;).get()));</span>
<a href="#l54.44"></a><span id="l54.44" class="difflineplus">+  item.Adopt(MimeGetStringByName(MOZ_UTF16(&quot;MIME_MSG_PARTIAL_CLICK_FOR_REST&quot;)));</span>
<a href="#l54.45"></a><span id="l54.45">   partialMsgHtml += item;</span>
<a href="#l54.46"></a><span id="l54.46">   partialMsgHtml.AppendLiteral(&quot;&lt;/a&gt;&quot;);</span>
<a href="#l54.47"></a><span id="l54.47"> </span>
<a href="#l54.48"></a><span id="l54.48">   partialMsgHtml.AppendLiteral(&quot;&lt;/div&gt;&lt;/div&gt;&quot;);</span>
<a href="#l54.49"></a><span id="l54.49"> </span>
<a href="#l54.50"></a><span id="l54.50">   return ToNewCString(partialMsgHtml);</span>
<a href="#l54.51"></a><span id="l54.51"> }</span>
<a href="#l54.52"></a><span id="l54.52"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1" class="difflineminus">--- a/mailnews/news/src/nsNNTPNewsgroupList.cpp</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineplus">+++ b/mailnews/news/src/nsNNTPNewsgroupList.cpp</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineat">@@ -307,17 +307,17 @@ nsNNTPNewsgroupList::GetRangeOfArtsToDow</span>
<a href="#l55.4"></a><span id="l55.4">     nsCOMPtr&lt;nsIStringBundleService&gt; bundleService =</span>
<a href="#l55.5"></a><span id="l55.5">       mozilla::services::GetStringBundleService();</span>
<a href="#l55.6"></a><span id="l55.6">     NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l55.7"></a><span id="l55.7"> </span>
<a href="#l55.8"></a><span id="l55.8">     nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l55.9"></a><span id="l55.9">     rv = bundleService-&gt;CreateBundle(NEWS_MSGS_URL, getter_AddRefs(bundle));</span>
<a href="#l55.10"></a><span id="l55.10">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l55.11"></a><span id="l55.11"> </span>
<a href="#l55.12"></a><span id="l55.12" class="difflineminus">-    rv = bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;noNewMessages&quot;).get(), getter_Copies(statusString));</span>
<a href="#l55.13"></a><span id="l55.13" class="difflineplus">+    rv = bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;noNewMessages&quot;), getter_Copies(statusString));</span>
<a href="#l55.14"></a><span id="l55.14">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l55.15"></a><span id="l55.15"> </span>
<a href="#l55.16"></a><span id="l55.16">     SetProgressStatus(statusString.get());</span>
<a href="#l55.17"></a><span id="l55.17">   }</span>
<a href="#l55.18"></a><span id="l55.18"> </span>
<a href="#l55.19"></a><span id="l55.19">   if (maxextra &lt;= 0 || last_possible &lt; first_possible || last_possible &lt; 1)</span>
<a href="#l55.20"></a><span id="l55.20">   {</span>
<a href="#l55.21"></a><span id="l55.21">     *status=0;</span>
<a href="#l55.22"></a><span id="l55.22" class="difflineat">@@ -882,17 +882,17 @@ nsNNTPNewsgroupList::FinishXOVERLINE(int</span>
<a href="#l55.23"></a><span id="l55.23">         mozilla::services::GetStringBundleService();</span>
<a href="#l55.24"></a><span id="l55.24">       NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l55.25"></a><span id="l55.25"> </span>
<a href="#l55.26"></a><span id="l55.26">       nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l55.27"></a><span id="l55.27">       rv = bundleService-&gt;CreateBundle(NEWS_MSGS_URL, getter_AddRefs(bundle));</span>
<a href="#l55.28"></a><span id="l55.28">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l55.29"></a><span id="l55.29"> </span>
<a href="#l55.30"></a><span id="l55.30">       const PRUnichar *formatStrings[2] = { firstStr.get(), lastStr.get() };</span>
<a href="#l55.31"></a><span id="l55.31" class="difflineminus">-      rv = bundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;downloadingArticles&quot;).get(), formatStrings, 2, getter_Copies(statusString));</span>
<a href="#l55.32"></a><span id="l55.32" class="difflineplus">+      rv = bundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;downloadingArticles&quot;), formatStrings, 2, getter_Copies(statusString));</span>
<a href="#l55.33"></a><span id="l55.33">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l55.34"></a><span id="l55.34"> </span>
<a href="#l55.35"></a><span id="l55.35">       SetProgressStatus(statusString.get());</span>
<a href="#l55.36"></a><span id="l55.36">     }</span>
<a href="#l55.37"></a><span id="l55.37">   }</span>
<a href="#l55.38"></a><span id="l55.38"> </span>
<a href="#l55.39"></a><span id="l55.39">   if (newstatus)</span>
<a href="#l55.40"></a><span id="l55.40">     *newstatus=0;</span>
<a href="#l55.41"></a><span id="l55.41" class="difflineat">@@ -1273,24 +1273,24 @@ nsNNTPNewsgroupList::UpdateStatus(bool f</span>
<a href="#l55.42"></a><span id="l55.42">   if (!NS_SUCCEEDED(rv))</span>
<a href="#l55.43"></a><span id="l55.43">     return;</span>
<a href="#l55.44"></a><span id="l55.44"> </span>
<a href="#l55.45"></a><span id="l55.45">   if (filtering)</span>
<a href="#l55.46"></a><span id="l55.46">   {</span>
<a href="#l55.47"></a><span id="l55.47">     NS_ConvertUTF8toUTF16 header(m_filterHeaders[m_currentXHDRIndex]);</span>
<a href="#l55.48"></a><span id="l55.48">     const PRUnichar *formatStrings[4] = { header.get(),</span>
<a href="#l55.49"></a><span id="l55.49">       numDownloadedStr.get(), totalToDownloadStr.get(), newsgroupName.get() };</span>
<a href="#l55.50"></a><span id="l55.50" class="difflineminus">-    rv = bundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;newNewsgroupFilteringHeaders&quot;).get(),</span>
<a href="#l55.51"></a><span id="l55.51" class="difflineplus">+    rv = bundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;newNewsgroupFilteringHeaders&quot;),</span>
<a href="#l55.52"></a><span id="l55.52">       formatStrings, 4, getter_Copies(statusString));</span>
<a href="#l55.53"></a><span id="l55.53">   }</span>
<a href="#l55.54"></a><span id="l55.54">   else</span>
<a href="#l55.55"></a><span id="l55.55">   {</span>
<a href="#l55.56"></a><span id="l55.56">     const PRUnichar *formatStrings[3] = { numDownloadedStr.get(),</span>
<a href="#l55.57"></a><span id="l55.57">       totalToDownloadStr.get(), newsgroupName.get() };</span>
<a href="#l55.58"></a><span id="l55.58" class="difflineminus">-    rv = bundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;newNewsgroupHeaders&quot;).get(),</span>
<a href="#l55.59"></a><span id="l55.59" class="difflineplus">+    rv = bundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;newNewsgroupHeaders&quot;),</span>
<a href="#l55.60"></a><span id="l55.60">       formatStrings, 3, getter_Copies(statusString));</span>
<a href="#l55.61"></a><span id="l55.61">   }</span>
<a href="#l55.62"></a><span id="l55.62">   if (!NS_SUCCEEDED(rv))</span>
<a href="#l55.63"></a><span id="l55.63">     return;</span>
<a href="#l55.64"></a><span id="l55.64"> </span>
<a href="#l55.65"></a><span id="l55.65">   SetProgressStatus(statusString.get());</span>
<a href="#l55.66"></a><span id="l55.66">   m_lastStatusUpdate = PR_Now();</span>
<a href="#l55.67"></a><span id="l55.67"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l56.1"></a><span id="l56.1" class="difflineminus">--- a/mailnews/news/src/nsNNTPProtocol.cpp</span>
<a href="#l56.2"></a><span id="l56.2" class="difflineplus">+++ b/mailnews/news/src/nsNNTPProtocol.cpp</span>
<a href="#l56.3"></a><span id="l56.3" class="difflineat">@@ -1027,17 +1027,17 @@ nsresult nsNNTPProtocol::LoadUrl(nsIURI </span>
<a href="#l56.4"></a><span id="l56.4">       nsAutoString unescapedName;</span>
<a href="#l56.5"></a><span id="l56.5">       rv = NS_MsgDecodeUnescapeURLPath(group, unescapedName);</span>
<a href="#l56.6"></a><span id="l56.6">       NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l56.7"></a><span id="l56.7"> </span>
<a href="#l56.8"></a><span id="l56.8">       bundleService-&gt;CreateBundle(NEWS_MSGS_URL, getter_AddRefs(bundle));</span>
<a href="#l56.9"></a><span id="l56.9">       const PRUnichar *formatStrings[1] = { unescapedName.get() };</span>
<a href="#l56.10"></a><span id="l56.10"> </span>
<a href="#l56.11"></a><span id="l56.11">       rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l56.12"></a><span id="l56.12" class="difflineminus">-        NS_LITERAL_STRING(&quot;autoSubscribeText&quot;).get(), formatStrings, 1,</span>
<a href="#l56.13"></a><span id="l56.13" class="difflineplus">+        MOZ_UTF16(&quot;autoSubscribeText&quot;), formatStrings, 1,</span>
<a href="#l56.14"></a><span id="l56.14">         getter_Copies(confirmText));</span>
<a href="#l56.15"></a><span id="l56.15">       NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l56.16"></a><span id="l56.16"> </span>
<a href="#l56.17"></a><span id="l56.17">       bool confirmResult = false;</span>
<a href="#l56.18"></a><span id="l56.18">       rv = dialog-&gt;Confirm(nullptr, confirmText.get(), &amp;confirmResult);</span>
<a href="#l56.19"></a><span id="l56.19">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l56.20"></a><span id="l56.20"> </span>
<a href="#l56.21"></a><span id="l56.21">       if (confirmResult)</span>
<a href="#l56.22"></a><span id="l56.22" class="difflineat">@@ -2776,17 +2776,17 @@ nsresult nsNNTPProtocol::ReadNewsList(ns</span>
<a href="#l56.23"></a><span id="l56.23">       char rate_buf[RATE_STR_BUF_LEN];</span>
<a href="#l56.24"></a><span id="l56.24">       PR_snprintf(rate_buf,RATE_STR_BUF_LEN,&quot;%.1f&quot;, rate);</span>
<a href="#l56.25"></a><span id="l56.25"> </span>
<a href="#l56.26"></a><span id="l56.26">       nsAutoString numGroupsStr;</span>
<a href="#l56.27"></a><span id="l56.27">       numGroupsStr.AppendInt(mNumGroupsListed);</span>
<a href="#l56.28"></a><span id="l56.28">       NS_ConvertASCIItoUTF16 rateStr(rate_buf);</span>
<a href="#l56.29"></a><span id="l56.29"> </span>
<a href="#l56.30"></a><span id="l56.30">       const PRUnichar *formatStrings[3] = { numGroupsStr.get(), bytesStr.get(), rateStr.get()};</span>
<a href="#l56.31"></a><span id="l56.31" class="difflineminus">-      rv = bundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;bytesReceived&quot;).get(),</span>
<a href="#l56.32"></a><span id="l56.32" class="difflineplus">+      rv = bundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;bytesReceived&quot;),</span>
<a href="#l56.33"></a><span id="l56.33">         formatStrings, 3,</span>
<a href="#l56.34"></a><span id="l56.34">         getter_Copies(statusString));</span>
<a href="#l56.35"></a><span id="l56.35"> </span>
<a href="#l56.36"></a><span id="l56.36">       rv = msgStatusFeedback-&gt;ShowStatusString(statusString);</span>
<a href="#l56.37"></a><span id="l56.37">       if (NS_FAILED(rv)) {</span>
<a href="#l56.38"></a><span id="l56.38">         PR_Free(lineToFree);</span>
<a href="#l56.39"></a><span id="l56.39">         return rv;</span>
<a href="#l56.40"></a><span id="l56.40">       }</span>
<a href="#l56.41"></a><span id="l56.41" class="difflineat">@@ -3549,17 +3549,17 @@ nsresult nsNNTPProtocol::DoCancel()</span>
<a href="#l56.42"></a><span id="l56.42">   NS_ENSURE_TRUE(bundleService, NS_ERROR_OUT_OF_MEMORY);</span>
<a href="#l56.43"></a><span id="l56.43"> </span>
<a href="#l56.44"></a><span id="l56.44">   nsCOMPtr&lt;nsIStringBundle&gt; brandBundle;</span>
<a href="#l56.45"></a><span id="l56.45">   bundleService-&gt;CreateBundle(&quot;chrome://branding/locale/brand.properties&quot;,</span>
<a href="#l56.46"></a><span id="l56.46">                               getter_AddRefs(brandBundle));</span>
<a href="#l56.47"></a><span id="l56.47">   NS_ENSURE_TRUE(brandBundle, NS_ERROR_FAILURE);</span>
<a href="#l56.48"></a><span id="l56.48"> </span>
<a href="#l56.49"></a><span id="l56.49">   nsString brandFullName;</span>
<a href="#l56.50"></a><span id="l56.50" class="difflineminus">-  rv = brandBundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;brandFullName&quot;).get(),</span>
<a href="#l56.51"></a><span id="l56.51" class="difflineplus">+  rv = brandBundle-&gt;GetStringFromName(MOZ_UTF16(&quot;brandFullName&quot;),</span>
<a href="#l56.52"></a><span id="l56.52">                                       getter_Copies(brandFullName));</span>
<a href="#l56.53"></a><span id="l56.53">   NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l56.54"></a><span id="l56.54">   NS_ConvertUTF16toUTF8 appName(brandFullName);</span>
<a href="#l56.55"></a><span id="l56.55"> </span>
<a href="#l56.56"></a><span id="l56.56">   newsgroups = m_cancelNewsgroups;</span>
<a href="#l56.57"></a><span id="l56.57">   distribution = m_cancelDistribution;</span>
<a href="#l56.58"></a><span id="l56.58">   id = m_cancelID;</span>
<a href="#l56.59"></a><span id="l56.59">   nsCString oldFrom(m_cancelFromHdr);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l57.1"></a><span id="l57.1" class="difflineminus">--- a/mailnews/news/src/nsNewsDownloader.cpp</span>
<a href="#l57.2"></a><span id="l57.2" class="difflineplus">+++ b/mailnews/news/src/nsNewsDownloader.cpp</span>
<a href="#l57.3"></a><span id="l57.3" class="difflineat">@@ -192,17 +192,17 @@ bool nsNewsDownloader::GetNextHdrToRetri</span>
<a href="#l57.4"></a><span id="l57.4">     nsAutoString totalStr;</span>
<a href="#l57.5"></a><span id="l57.5">     totalStr.AppendInt(m_keysToDownload.Length());</span>
<a href="#l57.6"></a><span id="l57.6">     nsString prettiestName;</span>
<a href="#l57.7"></a><span id="l57.7">     nsString statusString;</span>
<a href="#l57.8"></a><span id="l57.8"> </span>
<a href="#l57.9"></a><span id="l57.9">     m_folder-&gt;GetPrettiestName(prettiestName);</span>
<a href="#l57.10"></a><span id="l57.10"> </span>
<a href="#l57.11"></a><span id="l57.11">     const PRUnichar *formatStrings[3] = { firstStr.get(), totalStr.get(), prettiestName.get() };</span>
<a href="#l57.12"></a><span id="l57.12" class="difflineminus">-    rv = bundle-&gt;FormatStringFromName(NS_LITERAL_STRING(&quot;downloadingArticlesForOffline&quot;).get(),</span>
<a href="#l57.13"></a><span id="l57.13" class="difflineplus">+    rv = bundle-&gt;FormatStringFromName(MOZ_UTF16(&quot;downloadingArticlesForOffline&quot;),</span>
<a href="#l57.14"></a><span id="l57.14">                                       formatStrings, 3, getter_Copies(statusString));</span>
<a href="#l57.15"></a><span id="l57.15">     NS_ENSURE_SUCCESS(rv, false);</span>
<a href="#l57.16"></a><span id="l57.16">     ShowProgress(statusString.get(), percent);</span>
<a href="#l57.17"></a><span id="l57.17">     return true;</span>
<a href="#l57.18"></a><span id="l57.18">   }</span>
<a href="#l57.19"></a><span id="l57.19">   NS_ASSERTION(false, &quot;shouldn't get here if we're not downloading from keys.&quot;);</span>
<a href="#l57.20"></a><span id="l57.20">   return false;  // shouldn't get here if we're not downloading from keys.</span>
<a href="#l57.21"></a><span id="l57.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l58.1"></a><span id="l58.1" class="difflineminus">--- a/mailnews/news/src/nsNewsFolder.cpp</span>
<a href="#l58.2"></a><span id="l58.2" class="difflineplus">+++ b/mailnews/news/src/nsNewsFolder.cpp</span>
<a href="#l58.3"></a><span id="l58.3" class="difflineat">@@ -1354,17 +1354,17 @@ nsMsgNewsFolder::GetAuthenticationCreden</span>
<a href="#l58.4"></a><span id="l58.4">       if (!dialog) return NS_ERROR_FAILURE;</span>
<a href="#l58.5"></a><span id="l58.5">     }</span>
<a href="#l58.6"></a><span id="l58.6"> </span>
<a href="#l58.7"></a><span id="l58.7">     NS_ASSERTION(dialog, &quot;We didn't get a net prompt&quot;);</span>
<a href="#l58.8"></a><span id="l58.8">     if (dialog)</span>
<a href="#l58.9"></a><span id="l58.9">     {</span>
<a href="#l58.10"></a><span id="l58.10">       // Format the prompt text strings</span>
<a href="#l58.11"></a><span id="l58.11">       nsString promptTitle, promptText;</span>
<a href="#l58.12"></a><span id="l58.12" class="difflineminus">-      bundle-&gt;GetStringFromName(NS_LITERAL_STRING(&quot;enterUserPassTitle&quot;).get(),</span>
<a href="#l58.13"></a><span id="l58.13" class="difflineplus">+      bundle-&gt;GetStringFromName(MOZ_UTF16(&quot;enterUserPassTitle&quot;),</span>
<a href="#l58.14"></a><span id="l58.14">         getter_Copies(promptTitle));</span>
<a href="#l58.15"></a><span id="l58.15"> </span>
<a href="#l58.16"></a><span id="l58.16">       nsString serverName;</span>
<a href="#l58.17"></a><span id="l58.17">       nsCOMPtr&lt;nsIMsgIncomingServer&gt; server;</span>
<a href="#l58.18"></a><span id="l58.18">       rv = GetServer(getter_AddRefs(server));</span>
<a href="#l58.19"></a><span id="l58.19">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l58.20"></a><span id="l58.20"> </span>
<a href="#l58.21"></a><span id="l58.21">       server-&gt;GetPrettyName(serverName);</span>
<a href="#l58.22"></a><span id="l58.22" class="difflineat">@@ -1376,21 +1376,21 @@ nsMsgNewsFolder::GetAuthenticationCreden</span>
<a href="#l58.23"></a><span id="l58.23">       bool singleSignon = true;</span>
<a href="#l58.24"></a><span id="l58.24">       nntpServer-&gt;GetSingleSignon(&amp;singleSignon);</span>
<a href="#l58.25"></a><span id="l58.25"> </span>
<a href="#l58.26"></a><span id="l58.26">       const PRUnichar *params[2];</span>
<a href="#l58.27"></a><span id="l58.27">       params[0] = mName.get();</span>
<a href="#l58.28"></a><span id="l58.28">       params[1] = serverName.get();</span>
<a href="#l58.29"></a><span id="l58.29">       if (singleSignon)</span>
<a href="#l58.30"></a><span id="l58.30">         bundle-&gt;FormatStringFromName(</span>
<a href="#l58.31"></a><span id="l58.31" class="difflineminus">-          NS_LITERAL_STRING(&quot;enterUserPassServer&quot;).get(),</span>
<a href="#l58.32"></a><span id="l58.32" class="difflineplus">+          MOZ_UTF16(&quot;enterUserPassServer&quot;),</span>
<a href="#l58.33"></a><span id="l58.33">           &amp;params[1], 1, getter_Copies(promptText));</span>
<a href="#l58.34"></a><span id="l58.34">       else</span>
<a href="#l58.35"></a><span id="l58.35">         bundle-&gt;FormatStringFromName(</span>
<a href="#l58.36"></a><span id="l58.36" class="difflineminus">-          NS_LITERAL_STRING(&quot;enterUserPassGroup&quot;).get(),</span>
<a href="#l58.37"></a><span id="l58.37" class="difflineplus">+          MOZ_UTF16(&quot;enterUserPassGroup&quot;),</span>
<a href="#l58.38"></a><span id="l58.38">           params, 2, getter_Copies(promptText));</span>
<a href="#l58.39"></a><span id="l58.39"> </span>
<a href="#l58.40"></a><span id="l58.40">       // Fill the signon url for the dialog</span>
<a href="#l58.41"></a><span id="l58.41">       nsString signonURL;</span>
<a href="#l58.42"></a><span id="l58.42">       rv = CreateNewsgroupUrlForSignon(nullptr, signonURL);</span>
<a href="#l58.43"></a><span id="l58.43">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l58.44"></a><span id="l58.44"> </span>
<a href="#l58.45"></a><span id="l58.45">       // Prefill saved username/password</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l59.1"></a><span id="l59.1" class="difflineminus">--- a/mailnews/news/src/nsNntpIncomingServer.cpp</span>
<a href="#l59.2"></a><span id="l59.2" class="difflineplus">+++ b/mailnews/news/src/nsNntpIncomingServer.cpp</span>
<a href="#l59.3"></a><span id="l59.3" class="difflineat">@@ -1573,17 +1573,17 @@ nsNntpIncomingServer::GroupNotFound(nsIM</span>
<a href="#l59.4"></a><span id="l59.4">   NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l59.5"></a><span id="l59.5"> </span>
<a href="#l59.6"></a><span id="l59.6">   NS_ConvertUTF8toUTF16 hostStr(hostname);</span>
<a href="#l59.7"></a><span id="l59.7"> </span>
<a href="#l59.8"></a><span id="l59.8">   nsString groupName(aName);</span>
<a href="#l59.9"></a><span id="l59.9">   const PRUnichar *formatStrings[2] = { groupName.get(), hostStr.get() };</span>
<a href="#l59.10"></a><span id="l59.10">   nsString confirmText;</span>
<a href="#l59.11"></a><span id="l59.11">   rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l59.12"></a><span id="l59.12" class="difflineminus">-                    NS_LITERAL_STRING(&quot;autoUnsubscribeText&quot;).get(),</span>
<a href="#l59.13"></a><span id="l59.13" class="difflineplus">+                    MOZ_UTF16(&quot;autoUnsubscribeText&quot;),</span>
<a href="#l59.14"></a><span id="l59.14">                     formatStrings, 2,</span>
<a href="#l59.15"></a><span id="l59.15">                     getter_Copies(confirmText));</span>
<a href="#l59.16"></a><span id="l59.16">   NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l59.17"></a><span id="l59.17"> </span>
<a href="#l59.18"></a><span id="l59.18">   bool confirmResult = false;</span>
<a href="#l59.19"></a><span id="l59.19">   rv = prompt-&gt;Confirm(nullptr, confirmText.get(), &amp;confirmResult);</span>
<a href="#l59.20"></a><span id="l59.20">   NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l59.21"></a><span id="l59.21"> </span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

