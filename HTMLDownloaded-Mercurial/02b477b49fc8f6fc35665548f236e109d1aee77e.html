<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 29901:02b477b49fc8f6fc35665548f236e109d1aee77e</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 02b477b49fc8f6fc35665548f236e109d1aee77e" />
<meta property="og:url" content="/comm-central/rev/02b477b49fc8f6fc35665548f236e109d1aee77e" />
<meta property="og:description" content="Backed out changeset 06b8793bef23 (bug 1638822)" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 02b477b49fc8f6fc35665548f236e109d1aee77e 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/02b477b49fc8f6fc35665548f236e109d1aee77e">shortlog</a> |
<a href="/comm-central/log/02b477b49fc8f6fc35665548f236e109d1aee77e">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/02b477b49fc8f6fc35665548f236e109d1aee77e">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/02b477b49fc8f6fc35665548f236e109d1aee77e">files</a> |
changeset |
<a href="/comm-central/raw-rev/02b477b49fc8f6fc35665548f236e109d1aee77e">raw</a>  | <a href="/comm-central/archive/02b477b49fc8f6fc35665548f236e109d1aee77e.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
Backed out changeset 06b8793bef23 (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1638822">bug 1638822</a>)
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#77;&#97;&#103;&#110;&#117;&#115;&#32;&#77;&#101;&#108;&#105;&#110;&#32;&#60;&#109;&#107;&#109;&#101;&#108;&#105;&#110;&#43;&#109;&#111;&#122;&#105;&#108;&#108;&#97;&#64;&#105;&#107;&#105;&#46;&#102;&#105;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 18 Jun 2020 16:48:04 +0300</td></tr>

<tr>
 <td>changeset 29901</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/02b477b49fc8f6fc35665548f236e109d1aee77e">02b477b49fc8f6fc35665548f236e109d1aee77e</a></td>
</tr>



<tr>
<td>parent 29900</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/81a65f203d809570859d51dc7a493621fc8e541d">81a65f203d809570859d51dc7a493621fc8e541d</a>
</td>
</tr>

<tr>
<td>child 29902</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/778af58077993f28514c86ef3aa3eeb7b3c92c7f">778af58077993f28514c86ef3aa3eeb7b3c92c7f</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=02b477b49fc8f6fc35665548f236e109d1aee77e">17588</a></td></tr>
<tr><td>push user</td><td>mkmelin@iki.fi</td></tr>
<tr><td>push date</td><td class="date age">Thu, 18 Jun 2020 13:51:02 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@778af5807799 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=778af58077993f28514c86ef3aa3eeb7b3c92c7f">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=778af58077993f28514c86ef3aa3eeb7b3c92c7f&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=778af58077993f28514c86ef3aa3eeb7b3c92c7f&newProject=comm-central&newRevision=02b477b49fc8f6fc35665548f236e109d1aee77e&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=778af58077993f28514c86ef3aa3eeb7b3c92c7f&newProject=comm-central&newRevision=02b477b49fc8f6fc35665548f236e109d1aee77e&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=778af58077993f28514c86ef3aa3eeb7b3c92c7f&newProject=comm-central&newRevision=02b477b49fc8f6fc35665548f236e109d1aee77e&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>

<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1638822">1638822</a></td></tr>

<tr><td>backs out</td><td><a style="font-family: monospace" href="/comm-central/rev/06b8793bef23528947719509f934af2cfcfad5ef">06b8793bef23528947719509f934af2cfcfad5ef</a></td></tr>


</table></div>

<div class="page_body description">Backed out changeset 06b8793bef23 (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1638822">bug 1638822</a>)</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/decryption.jsm">mail/extensions/openpgp/content/modules/decryption.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/decryption.jsm">file</a> |
<a href="/comm-central/annotate/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/decryption.jsm">annotate</a> |
<a href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/decryption.jsm">diff</a> |
<a href="/comm-central/comparison/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/decryption.jsm">comparison</a> |
<a href="/comm-central/log/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/decryption.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/dialog.jsm">mail/extensions/openpgp/content/modules/dialog.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/dialog.jsm">file</a> |
<a href="/comm-central/annotate/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/dialog.jsm">annotate</a> |
<a href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/dialog.jsm">diff</a> |
<a href="/comm-central/comparison/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/dialog.jsm">comparison</a> |
<a href="/comm-central/log/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/dialog.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/keyRing.jsm">mail/extensions/openpgp/content/modules/keyRing.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/keyRing.jsm">file</a> |
<a href="/comm-central/annotate/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/keyRing.jsm">annotate</a> |
<a href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/keyRing.jsm">diff</a> |
<a href="/comm-central/comparison/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/keyRing.jsm">comparison</a> |
<a href="/comm-central/log/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/keyRing.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/keyUsability.jsm">mail/extensions/openpgp/content/modules/keyUsability.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/keyUsability.jsm">file</a> |
<a href="/comm-central/annotate/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/keyUsability.jsm">annotate</a> |
<a href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/keyUsability.jsm">diff</a> |
<a href="/comm-central/comparison/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/keyUsability.jsm">comparison</a> |
<a href="/comm-central/log/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/keyUsability.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/mimeDecrypt.jsm">mail/extensions/openpgp/content/modules/mimeDecrypt.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/mimeDecrypt.jsm">file</a> |
<a href="/comm-central/annotate/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/mimeDecrypt.jsm">annotate</a> |
<a href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/mimeDecrypt.jsm">diff</a> |
<a href="/comm-central/comparison/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/mimeDecrypt.jsm">comparison</a> |
<a href="/comm-central/log/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/mimeDecrypt.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/persistentCrypto.jsm">mail/extensions/openpgp/content/modules/persistentCrypto.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/persistentCrypto.jsm">file</a> |
<a href="/comm-central/annotate/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/persistentCrypto.jsm">annotate</a> |
<a href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/persistentCrypto.jsm">diff</a> |
<a href="/comm-central/comparison/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/persistentCrypto.jsm">comparison</a> |
<a href="/comm-central/log/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/persistentCrypto.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/windows.jsm">mail/extensions/openpgp/content/modules/windows.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/windows.jsm">file</a> |
<a href="/comm-central/annotate/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/windows.jsm">annotate</a> |
<a href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/windows.jsm">diff</a> |
<a href="/comm-central/comparison/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/windows.jsm">comparison</a> |
<a href="/comm-central/log/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/modules/windows.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/strings/enigmail.ftl">mail/extensions/openpgp/content/strings/enigmail.ftl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/strings/enigmail.ftl">file</a> |
<a href="/comm-central/annotate/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/strings/enigmail.ftl">annotate</a> |
<a href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/strings/enigmail.ftl">diff</a> |
<a href="/comm-central/comparison/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/strings/enigmail.ftl">comparison</a> |
<a href="/comm-central/log/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/strings/enigmail.ftl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/strings/enigmail.properties">mail/extensions/openpgp/content/strings/enigmail.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/strings/enigmail.properties">file</a> |
<a href="/comm-central/annotate/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/strings/enigmail.properties">annotate</a> |
<a href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/strings/enigmail.properties">diff</a> |
<a href="/comm-central/comparison/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/strings/enigmail.properties">comparison</a> |
<a href="/comm-central/log/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/strings/enigmail.properties">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/commonWorkflows.js">mail/extensions/openpgp/content/ui/commonWorkflows.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/commonWorkflows.js">file</a> |
<a href="/comm-central/annotate/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/commonWorkflows.js">annotate</a> |
<a href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/commonWorkflows.js">diff</a> |
<a href="/comm-central/comparison/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/commonWorkflows.js">comparison</a> |
<a href="/comm-central/log/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/commonWorkflows.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailCommon.js">mail/extensions/openpgp/content/ui/enigmailCommon.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailCommon.js">file</a> |
<a href="/comm-central/annotate/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailCommon.js">annotate</a> |
<a href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailCommon.js">diff</a> |
<a href="/comm-central/comparison/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailCommon.js">comparison</a> |
<a href="/comm-central/log/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailCommon.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">mail/extensions/openpgp/content/ui/enigmailKeyManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">file</a> |
<a href="/comm-central/annotate/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">annotate</a> |
<a href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">diff</a> |
<a href="/comm-central/comparison/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">comparison</a> |
<a href="/comm-central/log/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailKeygen.js">mail/extensions/openpgp/content/ui/enigmailKeygen.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailKeygen.js">file</a> |
<a href="/comm-central/annotate/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailKeygen.js">annotate</a> |
<a href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailKeygen.js">diff</a> |
<a href="/comm-central/comparison/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailKeygen.js">comparison</a> |
<a href="/comm-central/log/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailKeygen.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js">mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js">file</a> |
<a href="/comm-central/annotate/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js">annotate</a> |
<a href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js">diff</a> |
<a href="/comm-central/comparison/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js">comparison</a> |
<a href="/comm-central/log/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailMsgBox.js">mail/extensions/openpgp/content/ui/enigmailMsgBox.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailMsgBox.js">file</a> |
<a href="/comm-central/annotate/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailMsgBox.js">annotate</a> |
<a href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailMsgBox.js">diff</a> |
<a href="/comm-central/comparison/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailMsgBox.js">comparison</a> |
<a href="/comm-central/log/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailMsgBox.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">file</a> |
<a href="/comm-central/annotate/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">annotate</a> |
<a href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">diff</a> |
<a href="/comm-central/comparison/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">comparison</a> |
<a href="/comm-central/log/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/keyDetailsDlg.js">mail/extensions/openpgp/content/ui/keyDetailsDlg.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/keyDetailsDlg.js">file</a> |
<a href="/comm-central/annotate/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/keyDetailsDlg.js">annotate</a> |
<a href="/comm-central/diff/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/keyDetailsDlg.js">diff</a> |
<a href="/comm-central/comparison/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/keyDetailsDlg.js">comparison</a> |
<a href="/comm-central/log/02b477b49fc8f6fc35665548f236e109d1aee77e/mail/extensions/openpgp/content/ui/keyDetailsDlg.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/decryption.jsm</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/decryption.jsm</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -17,16 +17,19 @@ const { EnigmailLog } = ChromeUtils.impo</span>
<a href="#l1.4"></a><span id="l1.4">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l1.5"></a><span id="l1.5"> );</span>
<a href="#l1.6"></a><span id="l1.6"> const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l1.7"></a><span id="l1.7">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l1.8"></a><span id="l1.8"> );</span>
<a href="#l1.9"></a><span id="l1.9"> const { EnigmailArmor } = ChromeUtils.import(</span>
<a href="#l1.10"></a><span id="l1.10">   &quot;chrome://openpgp/content/modules/armor.jsm&quot;</span>
<a href="#l1.11"></a><span id="l1.11"> );</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+  &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+);</span>
<a href="#l1.15"></a><span id="l1.15"> const { EnigmailData } = ChromeUtils.import(</span>
<a href="#l1.16"></a><span id="l1.16">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l1.17"></a><span id="l1.17"> );</span>
<a href="#l1.18"></a><span id="l1.18"> const { EnigmailDialog } = ChromeUtils.import(</span>
<a href="#l1.19"></a><span id="l1.19">   &quot;chrome://openpgp/content/modules/dialog.jsm&quot;</span>
<a href="#l1.20"></a><span id="l1.20"> );</span>
<a href="#l1.21"></a><span id="l1.21"> const { EnigmailHttpProxy } = ChromeUtils.import(</span>
<a href="#l1.22"></a><span id="l1.22">   &quot;chrome://openpgp/content/modules/httpProxy.jsm&quot;</span>
<a href="#l1.23"></a><span id="l1.23" class="difflineat">@@ -449,17 +452,17 @@ var EnigmailDecryption = {</span>
<a href="#l1.24"></a><span id="l1.24">         );</span>
<a href="#l1.25"></a><span id="l1.25"> </span>
<a href="#l1.26"></a><span id="l1.26">         importedKey = exitStatus === 0;</span>
<a href="#l1.27"></a><span id="l1.27"> </span>
<a href="#l1.28"></a><span id="l1.28">         if (exitStatus &gt; 0) {</span>
<a href="#l1.29"></a><span id="l1.29">           l10n.formatValue(&quot;cant-import&quot;).then(value =&gt; {</span>
<a href="#l1.30"></a><span id="l1.30">             EnigmailDialog.alert(</span>
<a href="#l1.31"></a><span id="l1.31">               parent,</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineminus">-              value + &quot;\n&quot; + importErrorMsgObj.value</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineplus">+              value + importErrorMsgObj.value</span>
<a href="#l1.34"></a><span id="l1.34">             );</span>
<a href="#l1.35"></a><span id="l1.35">           });</span>
<a href="#l1.36"></a><span id="l1.36">         }</span>
<a href="#l1.37"></a><span id="l1.37">       }</span>
<a href="#l1.38"></a><span id="l1.38"> </span>
<a href="#l1.39"></a><span id="l1.39">       if (importedKey) {</span>
<a href="#l1.40"></a><span id="l1.40">         // Recursive call; note that EnigmailConstants.UI_ALLOW_KEY_IMPORT is unset</span>
<a href="#l1.41"></a><span id="l1.41">         // to break the recursion</span>
<a href="#l1.42"></a><span id="l1.42" class="difflineat">@@ -547,19 +550,19 @@ var EnigmailDecryption = {</span>
<a href="#l1.43"></a><span id="l1.43"> </span>
<a href="#l1.44"></a><span id="l1.44">     let attachmentHead = byteData.substr(0, 200);</span>
<a href="#l1.45"></a><span id="l1.45">     if (attachmentHead.match(/-----BEGIN PGP \w{5,10} KEY BLOCK-----/)) {</span>
<a href="#l1.46"></a><span id="l1.46">       // attachment appears to be a PGP key file</span>
<a href="#l1.47"></a><span id="l1.47"> </span>
<a href="#l1.48"></a><span id="l1.48">       if (</span>
<a href="#l1.49"></a><span id="l1.49">         EnigmailDialog.confirmDlg(</span>
<a href="#l1.50"></a><span id="l1.50">           parent,</span>
<a href="#l1.51"></a><span id="l1.51" class="difflineminus">-          l10n.formatValueSync(&quot;attachment-pgp-key&quot;, { name: displayName }),</span>
<a href="#l1.52"></a><span id="l1.52" class="difflineplus">+          EnigmailLocale.getString(&quot;attachmentPgpKey&quot;, [displayName]),</span>
<a href="#l1.53"></a><span id="l1.53">           l10n.formatValueSync(&quot;key-man-button-import&quot;),</span>
<a href="#l1.54"></a><span id="l1.54" class="difflineminus">-          l10n.formatValueSync(&quot;dlg-button-view&quot;)</span>
<a href="#l1.55"></a><span id="l1.55" class="difflineplus">+          EnigmailLocale.getString(&quot;dlg.button.view&quot;)</span>
<a href="#l1.56"></a><span id="l1.56">         )</span>
<a href="#l1.57"></a><span id="l1.57">       ) {</span>
<a href="#l1.58"></a><span id="l1.58">         let preview = EnigmailKey.getKeyListFromKeyBlock(</span>
<a href="#l1.59"></a><span id="l1.59">           byteData,</span>
<a href="#l1.60"></a><span id="l1.60">           errorMsgObj,</span>
<a href="#l1.61"></a><span id="l1.61">           true,</span>
<a href="#l1.62"></a><span id="l1.62">           true,</span>
<a href="#l1.63"></a><span id="l1.63">           false</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/dialog.jsm</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/dialog.jsm</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -5,31 +5,32 @@</span>
<a href="#l2.4"></a><span id="l2.4">  */</span>
<a href="#l2.5"></a><span id="l2.5"> </span>
<a href="#l2.6"></a><span id="l2.6"> &quot;use strict&quot;;</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8"> var EXPORTED_SYMBOLS = [&quot;EnigmailDialog&quot;];</span>
<a href="#l2.9"></a><span id="l2.9"> </span>
<a href="#l2.10"></a><span id="l2.10"> const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+  &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+);</span>
<a href="#l2.15"></a><span id="l2.15"> const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l2.16"></a><span id="l2.16">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l2.17"></a><span id="l2.17"> );</span>
<a href="#l2.18"></a><span id="l2.18"> const { EnigmailWindows } = ChromeUtils.import(</span>
<a href="#l2.19"></a><span id="l2.19">   &quot;chrome://openpgp/content/modules/windows.jsm&quot;</span>
<a href="#l2.20"></a><span id="l2.20"> );</span>
<a href="#l2.21"></a><span id="l2.21"> const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l2.22"></a><span id="l2.22">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l2.23"></a><span id="l2.23"> );</span>
<a href="#l2.24"></a><span id="l2.24"> const { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l2.25"></a><span id="l2.25">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l2.26"></a><span id="l2.26"> );</span>
<a href="#l2.27"></a><span id="l2.27"> </span>
<a href="#l2.28"></a><span id="l2.28" class="difflineminus">-const l10n = new Localization([&quot;messenger/openpgp/enigmail.ftl&quot;], true);</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineminus">-</span>
<a href="#l2.30"></a><span id="l2.30"> const LOCAL_FILE_CONTRACTID = &quot;@mozilla.org/file/local;1&quot;;</span>
<a href="#l2.31"></a><span id="l2.31"> </span>
<a href="#l2.32"></a><span id="l2.32"> var EnigmailDialog = {</span>
<a href="#l2.33"></a><span id="l2.33">   /***</span>
<a href="#l2.34"></a><span id="l2.34">    * Confirmation dialog with OK / Cancel buttons (both customizable)</span>
<a href="#l2.35"></a><span id="l2.35">    *</span>
<a href="#l2.36"></a><span id="l2.36">    * @win:         nsIWindow - parent window to display modal dialog; can be null</span>
<a href="#l2.37"></a><span id="l2.37">    * @mesg:        String    - message text</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineat">@@ -38,22 +39,22 @@ var EnigmailDialog = {</span>
<a href="#l2.39"></a><span id="l2.39">    *</span>
<a href="#l2.40"></a><span id="l2.40">    * @return:      Boolean   - true: OK pressed / false: Cancel or ESC pressed</span>
<a href="#l2.41"></a><span id="l2.41">    */</span>
<a href="#l2.42"></a><span id="l2.42">   confirmDlg(win, mesg, okLabel, cancelLabel) {</span>
<a href="#l2.43"></a><span id="l2.43">     let buttonPressed = EnigmailDialog.msgBox(</span>
<a href="#l2.44"></a><span id="l2.44">       win,</span>
<a href="#l2.45"></a><span id="l2.45">       {</span>
<a href="#l2.46"></a><span id="l2.46">         msgtext: mesg,</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineminus">-        button1: okLabel ? okLabel : l10n.formatValueSync(&quot;dlg-button-ok&quot;),</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineplus">+        button1: okLabel ? okLabel : EnigmailLocale.getString(&quot;dlg.button.ok&quot;),</span>
<a href="#l2.49"></a><span id="l2.49">         cancelButton: cancelLabel</span>
<a href="#l2.50"></a><span id="l2.50">           ? cancelLabel</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineminus">-          : l10n.formatValueSync(&quot;dlg-button-cancel&quot;),</span>
<a href="#l2.52"></a><span id="l2.52" class="difflineplus">+          : EnigmailLocale.getString(&quot;dlg.button.cancel&quot;),</span>
<a href="#l2.53"></a><span id="l2.53">         iconType: EnigmailConstants.ICONTYPE_QUESTION,</span>
<a href="#l2.54"></a><span id="l2.54" class="difflineminus">-        dialogTitle: l10n.formatValueSync(&quot;enig-confirm&quot;),</span>
<a href="#l2.55"></a><span id="l2.55" class="difflineplus">+        dialogTitle: EnigmailLocale.getString(&quot;enigConfirm2&quot;),</span>
<a href="#l2.56"></a><span id="l2.56">       },</span>
<a href="#l2.57"></a><span id="l2.57">       null</span>
<a href="#l2.58"></a><span id="l2.58">     );</span>
<a href="#l2.59"></a><span id="l2.59"> </span>
<a href="#l2.60"></a><span id="l2.60">     return buttonPressed === 0;</span>
<a href="#l2.61"></a><span id="l2.61">   },</span>
<a href="#l2.62"></a><span id="l2.62"> </span>
<a href="#l2.63"></a><span id="l2.63">   /**</span>
<a href="#l2.64"></a><span id="l2.64" class="difflineat">@@ -64,19 +65,19 @@ var EnigmailDialog = {</span>
<a href="#l2.65"></a><span id="l2.65">    *</span>
<a href="#l2.66"></a><span id="l2.66">    * no return value</span>
<a href="#l2.67"></a><span id="l2.67">    */</span>
<a href="#l2.68"></a><span id="l2.68">   alert(win, mesg) {</span>
<a href="#l2.69"></a><span id="l2.69">     EnigmailDialog.msgBox(</span>
<a href="#l2.70"></a><span id="l2.70">       win,</span>
<a href="#l2.71"></a><span id="l2.71">       {</span>
<a href="#l2.72"></a><span id="l2.72">         msgtext: mesg,</span>
<a href="#l2.73"></a><span id="l2.73" class="difflineminus">-        button1: l10n.formatValueSync(&quot;dlg-button-close&quot;),</span>
<a href="#l2.74"></a><span id="l2.74" class="difflineplus">+        button1: EnigmailLocale.getString(&quot;dlg.button.close&quot;),</span>
<a href="#l2.75"></a><span id="l2.75">         iconType: EnigmailConstants.ICONTYPE_ALERT,</span>
<a href="#l2.76"></a><span id="l2.76" class="difflineminus">-        dialogTitle: l10n.formatValueSync(&quot;enig-alert&quot;),</span>
<a href="#l2.77"></a><span id="l2.77" class="difflineplus">+        dialogTitle: EnigmailLocale.getString(&quot;enigAlert2&quot;),</span>
<a href="#l2.78"></a><span id="l2.78">       },</span>
<a href="#l2.79"></a><span id="l2.79">       null</span>
<a href="#l2.80"></a><span id="l2.80">     );</span>
<a href="#l2.81"></a><span id="l2.81">   },</span>
<a href="#l2.82"></a><span id="l2.82"> </span>
<a href="#l2.83"></a><span id="l2.83">   /**</span>
<a href="#l2.84"></a><span id="l2.84">    * Displays an information dialog.</span>
<a href="#l2.85"></a><span id="l2.85">    *</span>
<a href="#l2.86"></a><span id="l2.86" class="difflineat">@@ -85,19 +86,19 @@ var EnigmailDialog = {</span>
<a href="#l2.87"></a><span id="l2.87">    *</span>
<a href="#l2.88"></a><span id="l2.88">    * no return value</span>
<a href="#l2.89"></a><span id="l2.89">    */</span>
<a href="#l2.90"></a><span id="l2.90">   info(win, mesg) {</span>
<a href="#l2.91"></a><span id="l2.91">     EnigmailDialog.msgBox(</span>
<a href="#l2.92"></a><span id="l2.92">       win,</span>
<a href="#l2.93"></a><span id="l2.93">       {</span>
<a href="#l2.94"></a><span id="l2.94">         msgtext: mesg,</span>
<a href="#l2.95"></a><span id="l2.95" class="difflineminus">-        button1: l10n.formatValueSync(&quot;dlg-button-close&quot;),</span>
<a href="#l2.96"></a><span id="l2.96" class="difflineplus">+        button1: EnigmailLocale.getString(&quot;dlg.button.close&quot;),</span>
<a href="#l2.97"></a><span id="l2.97">         iconType: EnigmailConstants.ICONTYPE_INFO,</span>
<a href="#l2.98"></a><span id="l2.98" class="difflineminus">-        dialogTitle: l10n.formatValueSync(&quot;enig-info&quot;),</span>
<a href="#l2.99"></a><span id="l2.99" class="difflineplus">+        dialogTitle: EnigmailLocale.getString(&quot;enigInfo2&quot;),</span>
<a href="#l2.100"></a><span id="l2.100">       },</span>
<a href="#l2.101"></a><span id="l2.101">       null</span>
<a href="#l2.102"></a><span id="l2.102">     );</span>
<a href="#l2.103"></a><span id="l2.103">   },</span>
<a href="#l2.104"></a><span id="l2.104"> </span>
<a href="#l2.105"></a><span id="l2.105">   /**</span>
<a href="#l2.106"></a><span id="l2.106">    * Displays an alert dialog with 1-3 optional buttons.</span>
<a href="#l2.107"></a><span id="l2.107">    *</span>
<a href="#l2.108"></a><span id="l2.108" class="difflineat">@@ -208,17 +209,17 @@ var EnigmailDialog = {</span>
<a href="#l2.109"></a><span id="l2.109">    * @mesg:     String    - message text</span>
<a href="#l2.110"></a><span id="l2.110">    * @valueObj: Object    - object to hold the entered text in .value</span>
<a href="#l2.111"></a><span id="l2.111">    *</span>
<a href="#l2.112"></a><span id="l2.112">    * @return:   Boolean - true if OK was pressed / false otherwise</span>
<a href="#l2.113"></a><span id="l2.113">    */</span>
<a href="#l2.114"></a><span id="l2.114">   promptValue(win, mesg, valueObj) {</span>
<a href="#l2.115"></a><span id="l2.115">     return Services.prompt.prompt(</span>
<a href="#l2.116"></a><span id="l2.116">       win,</span>
<a href="#l2.117"></a><span id="l2.117" class="difflineminus">-      l10n.formatValueSync(&quot;enig-prompt&quot;),</span>
<a href="#l2.118"></a><span id="l2.118" class="difflineplus">+      EnigmailLocale.getString(&quot;enigPrompt2&quot;),</span>
<a href="#l2.119"></a><span id="l2.119">       mesg,</span>
<a href="#l2.120"></a><span id="l2.120">       valueObj,</span>
<a href="#l2.121"></a><span id="l2.121">       &quot;&quot;,</span>
<a href="#l2.122"></a><span id="l2.122">       {}</span>
<a href="#l2.123"></a><span id="l2.123">     );</span>
<a href="#l2.124"></a><span id="l2.124">   },</span>
<a href="#l2.125"></a><span id="l2.125"> </span>
<a href="#l2.126"></a><span id="l2.126">   /**</span>
<a href="#l2.127"></a><span id="l2.127" class="difflineat">@@ -240,19 +241,19 @@ var EnigmailDialog = {</span>
<a href="#l2.128"></a><span id="l2.128">       let checkBoxObj = {</span>
<a href="#l2.129"></a><span id="l2.129">         value: false,</span>
<a href="#l2.130"></a><span id="l2.130">       };</span>
<a href="#l2.131"></a><span id="l2.131"> </span>
<a href="#l2.132"></a><span id="l2.132">       let buttonPressed = EnigmailDialog.msgBox(</span>
<a href="#l2.133"></a><span id="l2.133">         win,</span>
<a href="#l2.134"></a><span id="l2.134">         {</span>
<a href="#l2.135"></a><span id="l2.135">           msgtext: mesg,</span>
<a href="#l2.136"></a><span id="l2.136" class="difflineminus">-          dialogTitle: l10n.formatValueSync(&quot;enig-info&quot;),</span>
<a href="#l2.137"></a><span id="l2.137" class="difflineplus">+          dialogTitle: EnigmailLocale.getString(&quot;enigInfo2&quot;),</span>
<a href="#l2.138"></a><span id="l2.138">           iconType: EnigmailConstants.ICONTYPE_INFO,</span>
<a href="#l2.139"></a><span id="l2.139" class="difflineminus">-          checkboxLabel: l10n.formatValueSync(&quot;dlg-no-prompt&quot;),</span>
<a href="#l2.140"></a><span id="l2.140" class="difflineplus">+          checkboxLabel: EnigmailLocale.getString(&quot;dlgNoPrompt&quot;),</span>
<a href="#l2.141"></a><span id="l2.141">         },</span>
<a href="#l2.142"></a><span id="l2.142">         checkBoxObj</span>
<a href="#l2.143"></a><span id="l2.143">       );</span>
<a href="#l2.144"></a><span id="l2.144"> </span>
<a href="#l2.145"></a><span id="l2.145">       if (checkBoxObj.value &amp;&amp; buttonPressed === 0) {</span>
<a href="#l2.146"></a><span id="l2.146">         EnigmailPrefs.setPref(prefText, dontDisplay);</span>
<a href="#l2.147"></a><span id="l2.147">       }</span>
<a href="#l2.148"></a><span id="l2.148">     }</span>
<a href="#l2.149"></a><span id="l2.149" class="difflineat">@@ -275,26 +276,23 @@ var EnigmailDialog = {</span>
<a href="#l2.150"></a><span id="l2.150">     if (alertCount &lt;= 0) {</span>
<a href="#l2.151"></a><span id="l2.151">       return;</span>
<a href="#l2.152"></a><span id="l2.152">     }</span>
<a href="#l2.153"></a><span id="l2.153"> </span>
<a href="#l2.154"></a><span id="l2.154">     alertCount--;</span>
<a href="#l2.155"></a><span id="l2.155">     EnigmailPrefs.setPref(countPrefName, alertCount);</span>
<a href="#l2.156"></a><span id="l2.156"> </span>
<a href="#l2.157"></a><span id="l2.157">     if (alertCount &gt; 0) {</span>
<a href="#l2.158"></a><span id="l2.158" class="difflineminus">-      mesg +=</span>
<a href="#l2.159"></a><span id="l2.159" class="difflineminus">-        &quot;\n&quot; +</span>
<a href="#l2.160"></a><span id="l2.160" class="difflineminus">-        l10n.formatValueSync(&quot;repeat-prefix&quot;, { count: alertCount }) +</span>
<a href="#l2.161"></a><span id="l2.161" class="difflineminus">-        &quot; &quot;;</span>
<a href="#l2.162"></a><span id="l2.162" class="difflineplus">+      mesg += EnigmailLocale.getString(&quot;repeatPrefix&quot;, [alertCount]) + &quot; &quot;;</span>
<a href="#l2.163"></a><span id="l2.163">       mesg +=</span>
<a href="#l2.164"></a><span id="l2.164">         alertCount == 1</span>
<a href="#l2.165"></a><span id="l2.165" class="difflineminus">-          ? l10n.formatValueSync(&quot;repeat-suffix-singular&quot;)</span>
<a href="#l2.166"></a><span id="l2.166" class="difflineminus">-          : l10n.formatValueSync(&quot;repeat-suffix-plural&quot;);</span>
<a href="#l2.167"></a><span id="l2.167" class="difflineplus">+          ? EnigmailLocale.getString(&quot;repeatSuffixSingular&quot;)</span>
<a href="#l2.168"></a><span id="l2.168" class="difflineplus">+          : EnigmailLocale.getString(&quot;repeatSuffixPlural&quot;);</span>
<a href="#l2.169"></a><span id="l2.169">     } else {</span>
<a href="#l2.170"></a><span id="l2.170" class="difflineminus">-      mesg += &quot;\n&quot; + l10n.formatValueSync(&quot;no-repeat&quot;);</span>
<a href="#l2.171"></a><span id="l2.171" class="difflineplus">+      mesg += EnigmailLocale.getString(&quot;noRepeat2&quot;);</span>
<a href="#l2.172"></a><span id="l2.172">     }</span>
<a href="#l2.173"></a><span id="l2.173"> </span>
<a href="#l2.174"></a><span id="l2.174">     EnigmailDialog.alert(win, mesg);</span>
<a href="#l2.175"></a><span id="l2.175">   },</span>
<a href="#l2.176"></a><span id="l2.176"> </span>
<a href="#l2.177"></a><span id="l2.177">   /**</span>
<a href="#l2.178"></a><span id="l2.178">    * Display a confirmation dialog with OK / Cancel buttons (both customizable) and</span>
<a href="#l2.179"></a><span id="l2.179">    * a checkbox to remember the selected choice.</span>
<a href="#l2.180"></a><span id="l2.180" class="difflineat">@@ -331,23 +329,23 @@ var EnigmailDialog = {</span>
<a href="#l2.181"></a><span id="l2.181">             value: false,</span>
<a href="#l2.182"></a><span id="l2.182">           };</span>
<a href="#l2.183"></a><span id="l2.183">           let buttonPressed = EnigmailDialog.msgBox(</span>
<a href="#l2.184"></a><span id="l2.184">             win,</span>
<a href="#l2.185"></a><span id="l2.185">             {</span>
<a href="#l2.186"></a><span id="l2.186">               msgtext: mesg,</span>
<a href="#l2.187"></a><span id="l2.187">               button1: okLabel</span>
<a href="#l2.188"></a><span id="l2.188">                 ? okLabel</span>
<a href="#l2.189"></a><span id="l2.189" class="difflineminus">-                : l10n.formatValueSync(&quot;dlg-button-ok&quot;),</span>
<a href="#l2.190"></a><span id="l2.190" class="difflineplus">+                : EnigmailLocale.getString(&quot;dlg.button.ok&quot;),</span>
<a href="#l2.191"></a><span id="l2.191">               cancelButton: cancelLabel</span>
<a href="#l2.192"></a><span id="l2.192">                 ? cancelLabel</span>
<a href="#l2.193"></a><span id="l2.193" class="difflineminus">-                : l10n.formatValueSync(&quot;dlg-button-cancel&quot;),</span>
<a href="#l2.194"></a><span id="l2.194" class="difflineminus">-              checkboxLabel: l10n.formatValueSync(&quot;dlg-keep-setting&quot;),</span>
<a href="#l2.195"></a><span id="l2.195" class="difflineplus">+                : EnigmailLocale.getString(&quot;dlg.button.cancel&quot;),</span>
<a href="#l2.196"></a><span id="l2.196" class="difflineplus">+              checkboxLabel: EnigmailLocale.getString(&quot;dlgKeepSetting&quot;),</span>
<a href="#l2.197"></a><span id="l2.197">               iconType: EnigmailConstants.ICONTYPE_QUESTION,</span>
<a href="#l2.198"></a><span id="l2.198" class="difflineminus">-              dialogTitle: l10n.formatValueSync(&quot;enig-confirm&quot;),</span>
<a href="#l2.199"></a><span id="l2.199" class="difflineplus">+              dialogTitle: EnigmailLocale.getString(&quot;enigConfirm2&quot;),</span>
<a href="#l2.200"></a><span id="l2.200">             },</span>
<a href="#l2.201"></a><span id="l2.201">             checkBoxObj</span>
<a href="#l2.202"></a><span id="l2.202">           );</span>
<a href="#l2.203"></a><span id="l2.203"> </span>
<a href="#l2.204"></a><span id="l2.204">           if (checkBoxObj.value) {</span>
<a href="#l2.205"></a><span id="l2.205">             EnigmailPrefs.setPref(prefText, buttonPressed === 0 ? yes : no);</span>
<a href="#l2.206"></a><span id="l2.206">           }</span>
<a href="#l2.207"></a><span id="l2.207">           return buttonPressed === 0 ? 1 : 0;</span>
<a href="#l2.208"></a><span id="l2.208" class="difflineat">@@ -367,23 +365,23 @@ var EnigmailDialog = {</span>
<a href="#l2.209"></a><span id="l2.209">             value: false,</span>
<a href="#l2.210"></a><span id="l2.210">           };</span>
<a href="#l2.211"></a><span id="l2.211">           let buttonPressed = EnigmailDialog.msgBox(</span>
<a href="#l2.212"></a><span id="l2.212">             win,</span>
<a href="#l2.213"></a><span id="l2.213">             {</span>
<a href="#l2.214"></a><span id="l2.214">               msgtext: mesg,</span>
<a href="#l2.215"></a><span id="l2.215">               button1: okLabel</span>
<a href="#l2.216"></a><span id="l2.216">                 ? okLabel</span>
<a href="#l2.217"></a><span id="l2.217" class="difflineminus">-                : l10n.formatValueSync(&quot;dlg-button-ok&quot;),</span>
<a href="#l2.218"></a><span id="l2.218" class="difflineplus">+                : EnigmailLocale.getString(&quot;dlg.button.ok&quot;),</span>
<a href="#l2.219"></a><span id="l2.219">               cancelButton: cancelLabel</span>
<a href="#l2.220"></a><span id="l2.220">                 ? cancelLabel</span>
<a href="#l2.221"></a><span id="l2.221" class="difflineminus">-                : l10n.formatValueSync(&quot;dlg-button-cancel&quot;),</span>
<a href="#l2.222"></a><span id="l2.222" class="difflineminus">-              checkboxLabel: l10n.formatValueSync(&quot;dlg-no-prompt&quot;),</span>
<a href="#l2.223"></a><span id="l2.223" class="difflineplus">+                : EnigmailLocale.getString(&quot;dlg.button.cancel&quot;),</span>
<a href="#l2.224"></a><span id="l2.224" class="difflineplus">+              checkboxLabel: EnigmailLocale.getString(&quot;dlgNoPrompt&quot;),</span>
<a href="#l2.225"></a><span id="l2.225">               iconType: EnigmailConstants.ICONTYPE_QUESTION,</span>
<a href="#l2.226"></a><span id="l2.226" class="difflineminus">-              dialogTitle: l10n.formatValueSync(&quot;enig-confirm&quot;),</span>
<a href="#l2.227"></a><span id="l2.227" class="difflineplus">+              dialogTitle: EnigmailLocale.getString(&quot;enigConfirm2&quot;),</span>
<a href="#l2.228"></a><span id="l2.228">             },</span>
<a href="#l2.229"></a><span id="l2.229">             checkBoxObj</span>
<a href="#l2.230"></a><span id="l2.230">           );</span>
<a href="#l2.231"></a><span id="l2.231"> </span>
<a href="#l2.232"></a><span id="l2.232">           if (checkBoxObj.value) {</span>
<a href="#l2.233"></a><span id="l2.233">             EnigmailPrefs.setPref(prefText, false);</span>
<a href="#l2.234"></a><span id="l2.234">           }</span>
<a href="#l2.235"></a><span id="l2.235">           return buttonPressed === 0 ? 1 : 0;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/keyRing.jsm</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/keyRing.jsm</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -6,16 +6,19 @@</span>
<a href="#l3.4"></a><span id="l3.4"> </span>
<a href="#l3.5"></a><span id="l3.5"> &quot;use strict&quot;;</span>
<a href="#l3.6"></a><span id="l3.6"> </span>
<a href="#l3.7"></a><span id="l3.7"> var EXPORTED_SYMBOLS = [&quot;EnigmailKeyRing&quot;];</span>
<a href="#l3.8"></a><span id="l3.8"> </span>
<a href="#l3.9"></a><span id="l3.9"> const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l3.10"></a><span id="l3.10">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l3.11"></a><span id="l3.11"> );</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+  &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+);</span>
<a href="#l3.15"></a><span id="l3.15"> const { EnigmailFiles } = ChromeUtils.import(</span>
<a href="#l3.16"></a><span id="l3.16">   &quot;chrome://openpgp/content/modules/files.jsm&quot;</span>
<a href="#l3.17"></a><span id="l3.17"> );</span>
<a href="#l3.18"></a><span id="l3.18"> const { EnigmailTrust } = ChromeUtils.import(</span>
<a href="#l3.19"></a><span id="l3.19">   &quot;chrome://openpgp/content/modules/trust.jsm&quot;</span>
<a href="#l3.20"></a><span id="l3.20"> );</span>
<a href="#l3.21"></a><span id="l3.21"> const { EnigmailArmor } = ChromeUtils.import(</span>
<a href="#l3.22"></a><span id="l3.22">   &quot;chrome://openpgp/content/modules/armor.jsm&quot;</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineat">@@ -365,17 +368,17 @@ var EnigmailKeyRing = {</span>
<a href="#l3.24"></a><span id="l3.24">         )</span>
<a href="#l3.25"></a><span id="l3.25">       );</span>
<a href="#l3.26"></a><span id="l3.26"> </span>
<a href="#l3.27"></a><span id="l3.27">       tryAgain = false;</span>
<a href="#l3.28"></a><span id="l3.28">       let failed = res.exitCode || !res.importedKeys.length;</span>
<a href="#l3.29"></a><span id="l3.29">       if (failed &amp;&amp; !permissive) {</span>
<a href="#l3.30"></a><span id="l3.30">         let agreed = getDialog().confirmDlg(</span>
<a href="#l3.31"></a><span id="l3.31">           win,</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineminus">-          l10n.formatValueSync(&quot;confirm-permissive-import&quot;)</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+          EnigmailLocale.getString(&quot;confirmPermissiveImport&quot;)</span>
<a href="#l3.34"></a><span id="l3.34">         );</span>
<a href="#l3.35"></a><span id="l3.35">         if (agreed) {</span>
<a href="#l3.36"></a><span id="l3.36">           permissive = true;</span>
<a href="#l3.37"></a><span id="l3.37">           tryAgain = true;</span>
<a href="#l3.38"></a><span id="l3.38">         }</span>
<a href="#l3.39"></a><span id="l3.39">       }</span>
<a href="#l3.40"></a><span id="l3.40">     } while (tryAgain);</span>
<a href="#l3.41"></a><span id="l3.41"> </span>
<a href="#l3.42"></a><span id="l3.42" class="difflineat">@@ -669,17 +672,17 @@ var EnigmailKeyRing = {</span>
<a href="#l3.43"></a><span id="l3.43">         ); // public only</span>
<a href="#l3.44"></a><span id="l3.44">       }</span>
<a href="#l3.45"></a><span id="l3.45"> </span>
<a href="#l3.46"></a><span id="l3.46">       tryAgain = false;</span>
<a href="#l3.47"></a><span id="l3.47">       let failed = result.exitCode || !result.importedKeys.length;</span>
<a href="#l3.48"></a><span id="l3.48">       if (failed &amp;&amp; isInteractive &amp;&amp; !permissive) {</span>
<a href="#l3.49"></a><span id="l3.49">         let agreed = getDialog().confirmDlg(</span>
<a href="#l3.50"></a><span id="l3.50">           parent,</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineminus">-          l10n.formatValueSync(&quot;confirm-permissive-import&quot;)</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineplus">+          EnigmailLocale.getString(&quot;confirmPermissiveImport&quot;)</span>
<a href="#l3.53"></a><span id="l3.53">         );</span>
<a href="#l3.54"></a><span id="l3.54">         if (agreed) {</span>
<a href="#l3.55"></a><span id="l3.55">           permissive = true;</span>
<a href="#l3.56"></a><span id="l3.56">           tryAgain = true;</span>
<a href="#l3.57"></a><span id="l3.57">         }</span>
<a href="#l3.58"></a><span id="l3.58">       }</span>
<a href="#l3.59"></a><span id="l3.59">     } while (tryAgain);</span>
<a href="#l3.60"></a><span id="l3.60"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/keyUsability.jsm</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/keyUsability.jsm</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -3,16 +3,19 @@</span>
<a href="#l4.4"></a><span id="l4.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l4.5"></a><span id="l4.5">  * file, You can obtain one at https://mozilla.org/MPL/2.0/.</span>
<a href="#l4.6"></a><span id="l4.6">  */</span>
<a href="#l4.7"></a><span id="l4.7"> </span>
<a href="#l4.8"></a><span id="l4.8"> &quot;use strict&quot;;</span>
<a href="#l4.9"></a><span id="l4.9"> </span>
<a href="#l4.10"></a><span id="l4.10"> var EXPORTED_SYMBOLS = [&quot;EnigmailKeyUsability&quot;];</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+  &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+);</span>
<a href="#l4.15"></a><span id="l4.15"> const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l4.16"></a><span id="l4.16">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l4.17"></a><span id="l4.17"> );</span>
<a href="#l4.18"></a><span id="l4.18"> const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l4.19"></a><span id="l4.19">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l4.20"></a><span id="l4.20"> );</span>
<a href="#l4.21"></a><span id="l4.21"> const { EnigmailCore } = ChromeUtils.import(</span>
<a href="#l4.22"></a><span id="l4.22">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineat">@@ -318,19 +321,19 @@ var EnigmailKeyUsability = {</span>
<a href="#l4.24"></a><span id="l4.24">         actionButtonText = await l10n.formatValue(&quot;expiry-open-key-manager&quot;);</span>
<a href="#l4.25"></a><span id="l4.25">       }</span>
<a href="#l4.26"></a><span id="l4.26"> </span>
<a href="#l4.27"></a><span id="l4.27">       let checkedObj = {};</span>
<a href="#l4.28"></a><span id="l4.28">       let r = getDialog().msgBox(</span>
<a href="#l4.29"></a><span id="l4.29">         null,</span>
<a href="#l4.30"></a><span id="l4.30">         {</span>
<a href="#l4.31"></a><span id="l4.31">           msgtext: msg,</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineminus">-          dialogTitle: await l10n.formatValue(&quot;enig-info&quot;),</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineminus">-          checkboxLabel: await l10n.formatValue(&quot;dlg-no-prompt&quot;),</span>
<a href="#l4.34"></a><span id="l4.34" class="difflineminus">-          button1: await l10n.formatValue(&quot;dlg-button-close&quot;),</span>
<a href="#l4.35"></a><span id="l4.35" class="difflineplus">+          dialogTitle: EnigmailLocale.getString(&quot;enigInfo2&quot;),</span>
<a href="#l4.36"></a><span id="l4.36" class="difflineplus">+          checkboxLabel: EnigmailLocale.getString(&quot;dlgNoPrompt&quot;),</span>
<a href="#l4.37"></a><span id="l4.37" class="difflineplus">+          button1: EnigmailLocale.getString(&quot;dlg.button.close&quot;),</span>
<a href="#l4.38"></a><span id="l4.38">           button2: actionButtonText,</span>
<a href="#l4.39"></a><span id="l4.39">           iconType: EnigmailConstants.ICONTYPE_INFO,</span>
<a href="#l4.40"></a><span id="l4.40">         },</span>
<a href="#l4.41"></a><span id="l4.41">         checkedObj</span>
<a href="#l4.42"></a><span id="l4.42">       );</span>
<a href="#l4.43"></a><span id="l4.43">       if (r &gt;= 0 &amp;&amp; checkedObj.value) {</span>
<a href="#l4.44"></a><span id="l4.44">         // Do not show me this dialog again</span>
<a href="#l4.45"></a><span id="l4.45">         EnigmailPrefs.setPref(&quot;warnOnMissingOwnerTrust&quot;, false);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/mimeDecrypt.jsm</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/mimeDecrypt.jsm</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -17,16 +17,19 @@ const { EnigmailCore } = ChromeUtils.imp</span>
<a href="#l5.4"></a><span id="l5.4">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l5.5"></a><span id="l5.5"> );</span>
<a href="#l5.6"></a><span id="l5.6"> const { EnigmailVerify } = ChromeUtils.import(</span>
<a href="#l5.7"></a><span id="l5.7">   &quot;chrome://openpgp/content/modules/mimeVerify.jsm&quot;</span>
<a href="#l5.8"></a><span id="l5.8"> );</span>
<a href="#l5.9"></a><span id="l5.9"> const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l5.10"></a><span id="l5.10">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l5.11"></a><span id="l5.11"> );</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+  &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+);</span>
<a href="#l5.15"></a><span id="l5.15"> const { EnigmailData } = ChromeUtils.import(</span>
<a href="#l5.16"></a><span id="l5.16">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l5.17"></a><span id="l5.17"> );</span>
<a href="#l5.18"></a><span id="l5.18"> const { EnigmailPrefs } = ChromeUtils.import(</span>
<a href="#l5.19"></a><span id="l5.19">   &quot;chrome://openpgp/content/modules/prefs.jsm&quot;</span>
<a href="#l5.20"></a><span id="l5.20"> );</span>
<a href="#l5.21"></a><span id="l5.21"> const { EnigmailDecryption } = ChromeUtils.import(</span>
<a href="#l5.22"></a><span id="l5.22">   &quot;chrome://openpgp/content/modules/decryption.jsm&quot;</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineat">@@ -845,17 +848,17 @@ MimeDecryptHandler.prototype = {</span>
<a href="#l5.24"></a><span id="l5.24">         headerSink.updateSecurityStatus(</span>
<a href="#l5.25"></a><span id="l5.25">           this.msgUriSpec,</span>
<a href="#l5.26"></a><span id="l5.26">           EnigmailConstants.POSSIBLE_PGPMIME,</span>
<a href="#l5.27"></a><span id="l5.27">           0,</span>
<a href="#l5.28"></a><span id="l5.28">           0,</span>
<a href="#l5.29"></a><span id="l5.29">           &quot;&quot;,</span>
<a href="#l5.30"></a><span id="l5.30">           &quot;&quot;,</span>
<a href="#l5.31"></a><span id="l5.31">           &quot;&quot;,</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineminus">-          l10n.formatValueSync(&quot;possibly-pgp-mime&quot;),</span>
<a href="#l5.33"></a><span id="l5.33" class="difflineplus">+          EnigmailLocale.getString(&quot;possiblyPgpMime&quot;),</span>
<a href="#l5.34"></a><span id="l5.34">           &quot;&quot;,</span>
<a href="#l5.35"></a><span id="l5.35">           this.uri,</span>
<a href="#l5.36"></a><span id="l5.36">           null,</span>
<a href="#l5.37"></a><span id="l5.37">           &quot;&quot;</span>
<a href="#l5.38"></a><span id="l5.38">         );</span>
<a href="#l5.39"></a><span id="l5.39">       }</span>
<a href="#l5.40"></a><span id="l5.40">     } catch (ex) {</span>
<a href="#l5.41"></a><span id="l5.41">       console.debug(ex);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/persistentCrypto.jsm</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/persistentCrypto.jsm</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -14,16 +14,19 @@ const { EnigmailLazy } = ChromeUtils.imp</span>
<a href="#l6.4"></a><span id="l6.4">   &quot;chrome://openpgp/content/modules/lazy.jsm&quot;</span>
<a href="#l6.5"></a><span id="l6.5"> );</span>
<a href="#l6.6"></a><span id="l6.6"> const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l6.7"></a><span id="l6.7">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l6.8"></a><span id="l6.8"> );</span>
<a href="#l6.9"></a><span id="l6.9"> const { EnigmailArmor } = ChromeUtils.import(</span>
<a href="#l6.10"></a><span id="l6.10">   &quot;chrome://openpgp/content/modules/armor.jsm&quot;</span>
<a href="#l6.11"></a><span id="l6.11"> );</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+  &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+);</span>
<a href="#l6.15"></a><span id="l6.15"> const { GlodaUtils } = ChromeUtils.import(</span>
<a href="#l6.16"></a><span id="l6.16">   &quot;chrome://openpgp/content/modules/glodaUtils.jsm&quot;</span>
<a href="#l6.17"></a><span id="l6.17"> );</span>
<a href="#l6.18"></a><span id="l6.18"> const { EnigmailCompat } = ChromeUtils.import(</span>
<a href="#l6.19"></a><span id="l6.19">   &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l6.20"></a><span id="l6.20"> );</span>
<a href="#l6.21"></a><span id="l6.21"> const { EnigmailCore } = ChromeUtils.import(</span>
<a href="#l6.22"></a><span id="l6.22">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineat">@@ -660,18 +663,18 @@ CryptMessageIntoFolder.prototype = {</span>
<a href="#l6.24"></a><span id="l6.24">                   subject: this.subject,</span>
<a href="#l6.25"></a><span id="l6.25">                 }</span>
<a href="#l6.26"></a><span id="l6.26">               );</span>
<a href="#l6.27"></a><span id="l6.27"> </span>
<a href="#l6.28"></a><span id="l6.28">               if (</span>
<a href="#l6.29"></a><span id="l6.29">                 !getDialog().confirmDlg(</span>
<a href="#l6.30"></a><span id="l6.30">                   null,</span>
<a href="#l6.31"></a><span id="l6.31">                   msg,</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineminus">-                  l10n.formatValueSync(&quot;dlg-button-retry&quot;),</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineminus">-                  l10n.formatValueSync(&quot;dlg-button-skip&quot;)</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineplus">+                  EnigmailLocale.getString(&quot;dlg.button.retry&quot;),</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineplus">+                  EnigmailLocale.getString(&quot;dlg.button.skip&quot;)</span>
<a href="#l6.36"></a><span id="l6.36">                 )</span>
<a href="#l6.37"></a><span id="l6.37">               ) {</span>
<a href="#l6.38"></a><span id="l6.38">                 this.messageDecrypted = false;</span>
<a href="#l6.39"></a><span id="l6.39">                 return -1;</span>
<a href="#l6.40"></a><span id="l6.40">               }</span>
<a href="#l6.41"></a><span id="l6.41">             } else if (</span>
<a href="#l6.42"></a><span id="l6.42">               statusFlagsObj.value &amp; EnigmailConstants.DECRYPTION_INCOMPLETE</span>
<a href="#l6.43"></a><span id="l6.43">             ) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/windows.jsm</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/windows.jsm</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -11,16 +11,19 @@ const EXPORTED_SYMBOLS = [&quot;EnigmailWindo</span>
<a href="#l7.4"></a><span id="l7.4"> const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l7.5"></a><span id="l7.5"> </span>
<a href="#l7.6"></a><span id="l7.6"> const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l7.7"></a><span id="l7.7">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l7.8"></a><span id="l7.8"> );</span>
<a href="#l7.9"></a><span id="l7.9"> const { EnigmailCore } = ChromeUtils.import(</span>
<a href="#l7.10"></a><span id="l7.10">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l7.11"></a><span id="l7.11"> );</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+  &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+);</span>
<a href="#l7.15"></a><span id="l7.15"> const { EnigmailKeyRing } = ChromeUtils.import(</span>
<a href="#l7.16"></a><span id="l7.16">   &quot;chrome://openpgp/content/modules/keyRing.jsm&quot;</span>
<a href="#l7.17"></a><span id="l7.17"> );</span>
<a href="#l7.18"></a><span id="l7.18"> const { EnigmailStdlib } = ChromeUtils.import(</span>
<a href="#l7.19"></a><span id="l7.19">   &quot;chrome://openpgp/content/modules/stdlib.jsm&quot;</span>
<a href="#l7.20"></a><span id="l7.20"> );</span>
<a href="#l7.21"></a><span id="l7.21"> </span>
<a href="#l7.22"></a><span id="l7.22"> const l10n = new Localization([&quot;messenger/openpgp/enigmail.ftl&quot;], true);</span>
<a href="#l7.23"></a><span id="l7.23" class="difflineat">@@ -253,17 +256,17 @@ var EnigmailWindows = {</span>
<a href="#l7.24"></a><span id="l7.24">    * @win       - |object| holding the parent window for the dialog</span>
<a href="#l7.25"></a><span id="l7.25">    *</span>
<a href="#l7.26"></a><span id="l7.26">    * no return value</span>
<a href="#l7.27"></a><span id="l7.27">    */</span>
<a href="#l7.28"></a><span id="l7.28">   openDebugLog(win) {</span>
<a href="#l7.29"></a><span id="l7.29">     EnigmailWindows.openWin(</span>
<a href="#l7.30"></a><span id="l7.30">       &quot;enigmail:logFile&quot;,</span>
<a href="#l7.31"></a><span id="l7.31">       &quot;chrome://openpgp/content/ui/enigmailViewFile.xhtml?viewLog=1&amp;title=&quot; +</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineminus">-        escape(l10n.formatValueSync(&quot;debug-log-title&quot;)),</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineplus">+        escape(EnigmailLocale.getString(&quot;debugLog2.title&quot;)),</span>
<a href="#l7.34"></a><span id="l7.34">       &quot;centerscreen&quot;</span>
<a href="#l7.35"></a><span id="l7.35">     );</span>
<a href="#l7.36"></a><span id="l7.36">   },</span>
<a href="#l7.37"></a><span id="l7.37"> </span>
<a href="#l7.38"></a><span id="l7.38">   /**</span>
<a href="#l7.39"></a><span id="l7.39">    * Display the dialog for changing the expiry date of one or several keys</span>
<a href="#l7.40"></a><span id="l7.40">    *</span>
<a href="#l7.41"></a><span id="l7.41">    * @win        - |object| holding the parent window for the dialog</span>
<a href="#l7.42"></a><span id="l7.42" class="difflineat">@@ -356,28 +359,32 @@ var EnigmailWindows = {</span>
<a href="#l7.43"></a><span id="l7.43">   showPhoto(win, keyId, userId, photoNumber) {</span>
<a href="#l7.44"></a><span id="l7.44">     const enigmailSvc = EnigmailCore.getService(win);</span>
<a href="#l7.45"></a><span id="l7.45">     if (enigmailSvc) {</span>
<a href="#l7.46"></a><span id="l7.46">       if (!photoNumber) {</span>
<a href="#l7.47"></a><span id="l7.47">         photoNumber = 0;</span>
<a href="#l7.48"></a><span id="l7.48">       }</span>
<a href="#l7.49"></a><span id="l7.49">       let keyObj = EnigmailKeyRing.getKeyById(keyId);</span>
<a href="#l7.50"></a><span id="l7.50">       if (!keyObj) {</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineminus">-        EnigmailWindows.alert(win, l10n.formatValueSync(&quot;no-photo-available&quot;));</span>
<a href="#l7.52"></a><span id="l7.52" class="difflineplus">+        EnigmailWindows.alert(</span>
<a href="#l7.53"></a><span id="l7.53" class="difflineplus">+          win,</span>
<a href="#l7.54"></a><span id="l7.54" class="difflineplus">+          EnigmailLocale.getString(&quot;noPhotoAvailable&quot;)</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineplus">+        );</span>
<a href="#l7.56"></a><span id="l7.56">       }</span>
<a href="#l7.57"></a><span id="l7.57"> </span>
<a href="#l7.58"></a><span id="l7.58">       let photoFile = keyObj.getPhotoFile(photoNumber);</span>
<a href="#l7.59"></a><span id="l7.59"> </span>
<a href="#l7.60"></a><span id="l7.60">       if (photoFile) {</span>
<a href="#l7.61"></a><span id="l7.61">         if (!(photoFile.isFile() &amp;&amp; photoFile.isReadable())) {</span>
<a href="#l7.62"></a><span id="l7.62">           EnigmailWindows.alert(</span>
<a href="#l7.63"></a><span id="l7.63">             win,</span>
<a href="#l7.64"></a><span id="l7.64" class="difflineminus">-            l10n.formatValueSync(&quot;error-photo-path-not-readable&quot;, {</span>
<a href="#l7.65"></a><span id="l7.65" class="difflineminus">-              photo: photoFile.path,</span>
<a href="#l7.66"></a><span id="l7.66" class="difflineminus">-            })</span>
<a href="#l7.67"></a><span id="l7.67" class="difflineplus">+            EnigmailLocale.getString(</span>
<a href="#l7.68"></a><span id="l7.68" class="difflineplus">+              &quot;error.photoPathNotReadable&quot;,</span>
<a href="#l7.69"></a><span id="l7.69" class="difflineplus">+              photoFile.path</span>
<a href="#l7.70"></a><span id="l7.70" class="difflineplus">+            )</span>
<a href="#l7.71"></a><span id="l7.71">           );</span>
<a href="#l7.72"></a><span id="l7.72">         } else {</span>
<a href="#l7.73"></a><span id="l7.73">           const photoUri = Services.io.newFileURI(photoFile).spec;</span>
<a href="#l7.74"></a><span id="l7.74">           const argsObj = {</span>
<a href="#l7.75"></a><span id="l7.75">             photoUri,</span>
<a href="#l7.76"></a><span id="l7.76">             userId,</span>
<a href="#l7.77"></a><span id="l7.77">             keyId,</span>
<a href="#l7.78"></a><span id="l7.78">           };</span>
<a href="#l7.79"></a><span id="l7.79" class="difflineat">@@ -389,17 +396,20 @@ var EnigmailWindows = {</span>
<a href="#l7.80"></a><span id="l7.80">             argsObj</span>
<a href="#l7.81"></a><span id="l7.81">           );</span>
<a href="#l7.82"></a><span id="l7.82">           try {</span>
<a href="#l7.83"></a><span id="l7.83">             // delete the photo file</span>
<a href="#l7.84"></a><span id="l7.84">             photoFile.remove(false);</span>
<a href="#l7.85"></a><span id="l7.85">           } catch (ex) {}</span>
<a href="#l7.86"></a><span id="l7.86">         }</span>
<a href="#l7.87"></a><span id="l7.87">       } else {</span>
<a href="#l7.88"></a><span id="l7.88" class="difflineminus">-        EnigmailWindows.alert(win, l10n.formatValueSync(&quot;no-photo-available&quot;));</span>
<a href="#l7.89"></a><span id="l7.89" class="difflineplus">+        EnigmailWindows.alert(</span>
<a href="#l7.90"></a><span id="l7.90" class="difflineplus">+          win,</span>
<a href="#l7.91"></a><span id="l7.91" class="difflineplus">+          EnigmailLocale.getString(&quot;noPhotoAvailable&quot;)</span>
<a href="#l7.92"></a><span id="l7.92" class="difflineplus">+        );</span>
<a href="#l7.93"></a><span id="l7.93">       }</span>
<a href="#l7.94"></a><span id="l7.94">     }</span>
<a href="#l7.95"></a><span id="l7.95">   },</span>
<a href="#l7.96"></a><span id="l7.96"> </span>
<a href="#l7.97"></a><span id="l7.97">   /**</span>
<a href="#l7.98"></a><span id="l7.98">    * Display the OpenPGP Key Details window</span>
<a href="#l7.99"></a><span id="l7.99">    *</span>
<a href="#l7.100"></a><span id="l7.100">    * @win        - |object| holding the parent window for the dialog</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/extensions/openpgp/content/strings/enigmail.ftl</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/strings/enigmail.ftl</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -186,94 +186,73 @@ openpgp-acceptance-verified-label =</span>
<a href="#l8.4"></a><span id="l8.4"> </span>
<a href="#l8.5"></a><span id="l8.5"> openpgp-copy-cmd-label =</span>
<a href="#l8.6"></a><span id="l8.6">     .label = Copy</span>
<a href="#l8.7"></a><span id="l8.7"> </span>
<a href="#l8.8"></a><span id="l8.8"> # Strings in keyDetailsDlg.xhtml</span>
<a href="#l8.9"></a><span id="l8.9"> key-type-public = public key</span>
<a href="#l8.10"></a><span id="l8.10"> key-type-primary = primary key</span>
<a href="#l8.11"></a><span id="l8.11"> key-type-subkey = subkey</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-key-type-pair = personal key (secret key and public key)</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+key-type-pair-2 = personal key (secret key and public key)</span>
<a href="#l8.14"></a><span id="l8.14"> key-expiry-never = never</span>
<a href="#l8.15"></a><span id="l8.15"> key-usage-encrypt = Encrypt</span>
<a href="#l8.16"></a><span id="l8.16"> key-usage-sign = Sign</span>
<a href="#l8.17"></a><span id="l8.17"> key-usage-certify = Certify</span>
<a href="#l8.18"></a><span id="l8.18"> key-usage-authentication = Authentication</span>
<a href="#l8.19"></a><span id="l8.19"> key-does-not-expire = Key does not expire</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineminus">-key-expired-date = Key expired on { $keyExpiry }</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineplus">+key-expired = Key expired on { $keyExpiry }</span>
<a href="#l8.22"></a><span id="l8.22"> key-revoked = Key was revoked</span>
<a href="#l8.23"></a><span id="l8.23"> key-auto-accept-personal = You accept this key for all uses, because it is one of your personal keys. You have the secret key.</span>
<a href="#l8.24"></a><span id="l8.24"> key-do-you-accept = Do you accept this key for verifying digital signatures and for encrypting messages?</span>
<a href="#l8.25"></a><span id="l8.25"> key-accept-warning = Avoid accepting a rogue key. Use a communication channel other than email to verify the fingerprint of your correspondent's key.</span>
<a href="#l8.26"></a><span id="l8.26"> </span>
<a href="#l8.27"></a><span id="l8.27"> # Strings enigmailMsgComposeOverlay.js</span>
<a href="#l8.28"></a><span id="l8.28"> cannot-use-own-key-because = Unable to send the message, because there is a problem with your personal key. { $problem }</span>
<a href="#l8.29"></a><span id="l8.29"> cannot-encrypt-because-missing = Unable to send this message with end-to-end encryption, because there are problems with the keys of the following recipients: { $problem }</span>
<a href="#l8.30"></a><span id="l8.30" class="difflineminus">-window-locked = Compose window is locked; send cancelled</span>
<a href="#l8.31"></a><span id="l8.31"> </span>
<a href="#l8.32"></a><span id="l8.32"> # Strings in mimeDecrypt.jsm</span>
<a href="#l8.33"></a><span id="l8.33"> mime-decrypt-encrypted-part-attachment-label = Encrypted message part</span>
<a href="#l8.34"></a><span id="l8.34"> mime-decrypt-encrypted-part-concealed-data = This is an encrypted message part. You need to open it in a separate window by clicking on the attachment.</span>
<a href="#l8.35"></a><span id="l8.35"> </span>
<a href="#l8.36"></a><span id="l8.36"> # Strings in keyserver.jsm</span>
<a href="#l8.37"></a><span id="l8.37"> keyserver-error-aborted = Aborted</span>
<a href="#l8.38"></a><span id="l8.38"> keyserver-error-unknown = An unknown error occurred</span>
<a href="#l8.39"></a><span id="l8.39"> keyserver-error-server-error = The keyserver reported an error.</span>
<a href="#l8.40"></a><span id="l8.40"> keyserver-error-import-error = Failed to import the downloaded key.</span>
<a href="#l8.41"></a><span id="l8.41"> keyserver-error-unavailable = The keyserver is not available.</span>
<a href="#l8.42"></a><span id="l8.42"> keyserver-error-security-error = The keyserver does not support encrypted access.</span>
<a href="#l8.43"></a><span id="l8.43"> keyserver-error-certificate-error = The keyservers certificate is not valid.</span>
<a href="#l8.44"></a><span id="l8.44"> keyserver-error-unsupported = The keyserver is not supported.</span>
<a href="#l8.45"></a><span id="l8.45"> </span>
<a href="#l8.46"></a><span id="l8.46"> # Strings in mimeWkdHandler.jsm</span>
<a href="#l8.47"></a><span id="l8.47" class="difflineminus">-wkd-message-body-req =</span>
<a href="#l8.48"></a><span id="l8.48" class="difflineminus">-    Your email provider processed your request to upload your public key to the OpenPGP Web Key Directory.</span>
<a href="#l8.49"></a><span id="l8.49" class="difflineminus">-    Please confirm to complete the publishing of your public key.</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineminus">-wkd-message-body-process =</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineminus">-    This is an email related to the automatic processing to upload your public key to the OpenPGP Web Key Directory.</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineminus">-    You do not need to take any manual action at this point.</span>
<a href="#l8.53"></a><span id="l8.53" class="difflineplus">+wkd-message-body-req = Your email provider processed your request to upload your public key to the OpenPGP Web Key Directory.\n\nPlease confirm to complete the publishing of your public key.</span>
<a href="#l8.54"></a><span id="l8.54" class="difflineplus">+wkd-message-body-process = This is an email related to the automatic processing to upload your public key to the OpenPGP Web Key Directory.\n\nYou do not need to take any manual action at this point.</span>
<a href="#l8.55"></a><span id="l8.55"> </span>
<a href="#l8.56"></a><span id="l8.56"> # Strings in persistentCrypto.jsm</span>
<a href="#l8.57"></a><span id="l8.57" class="difflineminus">-converter-decrypt-body-failed =</span>
<a href="#l8.58"></a><span id="l8.58" class="difflineminus">-    Could not decrypt message with subject</span>
<a href="#l8.59"></a><span id="l8.59" class="difflineminus">-    { $subject }.</span>
<a href="#l8.60"></a><span id="l8.60" class="difflineminus">-    Do you want to retry with a different passphrase or do you want to skip the message?</span>
<a href="#l8.61"></a><span id="l8.61" class="difflineplus">+converter-decrypt-body-failed = Could not decrypt message with subject\n{ $subject }.\nDo you want to retry with a different passphrase or do you want to skip the message?</span>
<a href="#l8.62"></a><span id="l8.62"> </span>
<a href="#l8.63"></a><span id="l8.63"> # Strings in gpg.jsm</span>
<a href="#l8.64"></a><span id="l8.64"> unknown-signing-alg = Unknown signing algorithm (ID: { $id })</span>
<a href="#l8.65"></a><span id="l8.65"> unknown-hash-alg = Unknown cryptographic hash (ID: { $id })</span>
<a href="#l8.66"></a><span id="l8.66"> </span>
<a href="#l8.67"></a><span id="l8.67"> # Strings in keyUsability.jsm</span>
<a href="#l8.68"></a><span id="l8.68" class="difflineminus">-expiry-key-expires-soon =</span>
<a href="#l8.69"></a><span id="l8.69" class="difflineminus">-    Your key { $desc } will expire in less than { $days } days.</span>
<a href="#l8.70"></a><span id="l8.70" class="difflineminus">-    We recommend that you create a new key pair and configure the corresponding accounts to use it.</span>
<a href="#l8.71"></a><span id="l8.71" class="difflineminus">-expiry-keys-expire-soon =</span>
<a href="#l8.72"></a><span id="l8.72" class="difflineminus">-    Your following keys will expire in less than { $days } days:{ $desc }.</span>
<a href="#l8.73"></a><span id="l8.73" class="difflineminus">-    We recommend that you create new keys and configure the corresponding accounts to use them.</span>
<a href="#l8.74"></a><span id="l8.74" class="difflineminus">-expiry-key-missing-owner-trust =</span>
<a href="#l8.75"></a><span id="l8.75" class="difflineminus">-    Your secret key { $desc } has missing trust.</span>
<a href="#l8.76"></a><span id="l8.76" class="difflineminus">-    We recommend that you set &quot;You rely on certifications&quot; to &quot;ultimate&quot; in key properties.</span>
<a href="#l8.77"></a><span id="l8.77" class="difflineminus">-expiry-keys-missing-owner-trust =</span>
<a href="#l8.78"></a><span id="l8.78" class="difflineminus">-    The following of your secret keys have missing trust.</span>
<a href="#l8.79"></a><span id="l8.79" class="difflineminus">-    { $desc }.</span>
<a href="#l8.80"></a><span id="l8.80" class="difflineminus">-    We recommend that you set &quot;You rely on certifications&quot; to &quot;ultimate&quot; in key properties.</span>
<a href="#l8.81"></a><span id="l8.81" class="difflineplus">+expiry-key-expires-soon = Your key { $desc } will expire in less than { $days } days.\n\nWe recommend that you create a new key pair and configure the corresponding accounts to use it.</span>
<a href="#l8.82"></a><span id="l8.82" class="difflineplus">+expiry-keys-expire-soon = Your following keys will expire in less than { $days } days:\n{ $desc }. We recommend that you create new keys and configure the corresponding accounts to use them.</span>
<a href="#l8.83"></a><span id="l8.83" class="difflineplus">+expiry-key-missing-owner-trust = Your secret key { $desc } has missing trust.\n\nWe recommend that you set &quot;You rely on certifications&quot; to &quot;ultimate&quot; in key properties.</span>
<a href="#l8.84"></a><span id="l8.84" class="difflineplus">+expiry-keys-missing-owner-trust = The following of your secret keys have missing trust.\n{ $desc }.\nWe recommend that you set &quot;You rely on certifications&quot; to &quot;ultimate&quot; in key properties.</span>
<a href="#l8.85"></a><span id="l8.85"> expiry-open-key-manager = Open OpenPGP Key Management</span>
<a href="#l8.86"></a><span id="l8.86"> expiry-open-key-properties = Open Key Properties</span>
<a href="#l8.87"></a><span id="l8.87"> </span>
<a href="#l8.88"></a><span id="l8.88"> # Strings filters.jsm</span>
<a href="#l8.89"></a><span id="l8.89"> filter-folder-required = You must select a target folder.</span>
<a href="#l8.90"></a><span id="l8.90" class="difflineminus">-filter-decrypt-move-warn-experimental =</span>
<a href="#l8.91"></a><span id="l8.91" class="difflineminus">-    Warning - the filter action &quot;Decrypt permanently&quot; may lead to destroyed messages.</span>
<a href="#l8.92"></a><span id="l8.92" class="difflineminus">-    We strongly recommend that you first try the &quot;Create decrypted Copy&quot; filter, test the result carefully, and only start using this filter once you are satisified with the result.</span>
<a href="#l8.93"></a><span id="l8.93" class="difflineplus">+filter-decrypt-move-warn-experimental = Warning - the filter action &quot;Decrypt permanently&quot; may lead to destroyed messages.\n\nWe strongly recommend that you first try the &quot;Create decrypted Copy&quot; filter, test the result carefully, and only start using this filter once you are satisified with the result.</span>
<a href="#l8.94"></a><span id="l8.94"> filter-term-pgpencrypted-label = OpenPGP Encrypted</span>
<a href="#l8.95"></a><span id="l8.95"> filter-key-required = You must select a recipient key.</span>
<a href="#l8.96"></a><span id="l8.96"> filter-key-not-found = Could not find an encryption key for '{ $desc }'.</span>
<a href="#l8.97"></a><span id="l8.97" class="difflineminus">-filter-warn-key-not-secret =</span>
<a href="#l8.98"></a><span id="l8.98" class="difflineminus">-    Warning - the filter action &quot;Encrypt to key&quot; replaces the recipients.</span>
<a href="#l8.99"></a><span id="l8.99" class="difflineminus">-    If you do not have the secret key for '{ $desc }' you will no longer be able to read the emails.</span>
<a href="#l8.100"></a><span id="l8.100" class="difflineplus">+filter-warn-key-not-secret = Warning - the filter action &quot;Encrypt to key&quot; replaces the recipients.\n\nIf you do not have the secret key for '{ $desc }' you will no longer be able to read the emails.</span>
<a href="#l8.101"></a><span id="l8.101"> </span>
<a href="#l8.102"></a><span id="l8.102"> #Strings filtersWrapper.jsm</span>
<a href="#l8.103"></a><span id="l8.103"> filter-decrypt-move-label = Decrypt permanently (OpenPGP)</span>
<a href="#l8.104"></a><span id="l8.104"> filter-decrypt-copy-label = Create decrypted Copy (OpenPGP)</span>
<a href="#l8.105"></a><span id="l8.105"> filter-encrypt-label = Encrypt to key (OpenPGP)</span>
<a href="#l8.106"></a><span id="l8.106"> </span>
<a href="#l8.107"></a><span id="l8.107"> # Strings in enigmailKeyImportInfo.js</span>
<a href="#l8.108"></a><span id="l8.108"> import-info-title =</span>
<a href="#l8.109"></a><span id="l8.109" class="difflineat">@@ -284,28 +263,19 @@ import-info-fpr = Fingerprint</span>
<a href="#l8.110"></a><span id="l8.110"> import-info-details = View Details and manage key acceptance</span>
<a href="#l8.111"></a><span id="l8.111"> import-info-no-keys = No keys imported.</span>
<a href="#l8.112"></a><span id="l8.112"> </span>
<a href="#l8.113"></a><span id="l8.113"> # Strings in enigmailKeyManager.js</span>
<a href="#l8.114"></a><span id="l8.114"> import-from-clip = Do you want to import some key(s) from clipboard?</span>
<a href="#l8.115"></a><span id="l8.115"> import-from-url = Download public key from this URL:</span>
<a href="#l8.116"></a><span id="l8.116"> copy-to-clipbrd-failed = Could not copy the selected key(s) to the clipboard.</span>
<a href="#l8.117"></a><span id="l8.117"> copy-to-clipbrd-ok = Key(s) copied to clipboard</span>
<a href="#l8.118"></a><span id="l8.118" class="difflineminus">-delete-secret-key =</span>
<a href="#l8.119"></a><span id="l8.119" class="difflineminus">-    WARNING: You are about to delete a secret key!</span>
<a href="#l8.120"></a><span id="l8.120" class="difflineminus">-    If you delete your secret key, you will no longer be able to decrypt any messages encrypted for that key, nor will you be able to revoke it.</span>
<a href="#l8.121"></a><span id="l8.121" class="difflineminus">-    Do you really want to delete BOTH, the secret key and the public key</span>
<a href="#l8.122"></a><span id="l8.122" class="difflineminus">-    '{ $userId }'?</span>
<a href="#l8.123"></a><span id="l8.123" class="difflineminus">-delete-mix =</span>
<a href="#l8.124"></a><span id="l8.124" class="difflineminus">-    WARNING: You are about to delete secret keys!</span>
<a href="#l8.125"></a><span id="l8.125" class="difflineminus">-    If you delete your secret key, you will no longer be able to decrypt any messages encrypted for that key.</span>
<a href="#l8.126"></a><span id="l8.126" class="difflineminus">-    Do you really want to delete BOTH, the selected secret and public keys?</span>
<a href="#l8.127"></a><span id="l8.127" class="difflineminus">-delete-pub-key =</span>
<a href="#l8.128"></a><span id="l8.128" class="difflineminus">-    Do you want to delete the public key</span>
<a href="#l8.129"></a><span id="l8.129" class="difflineminus">-    '{ $userId }'?</span>
<a href="#l8.130"></a><span id="l8.130" class="difflineplus">+delete-secret-key = WARNING: You are about to delete a secret key!\nIf you delete your secret key, you will no longer be able to decrypt any messages encrypted for that key, nor will you be able to revoke it.\n\nDo you really want to delete BOTH, the secret key and the public key\n'{ $userId }'?</span>
<a href="#l8.131"></a><span id="l8.131" class="difflineplus">+delete-mix = WARNING: You are about to delete secret keys!\nIf you delete your secret key, you will no longer be able to decrypt any messages encrypted for that key.\n\nDo you really want to delete BOTH, the selected secret and public keys?</span>
<a href="#l8.132"></a><span id="l8.132" class="difflineplus">+delete-pub-key = Do you want to delete the public key\n'{ $userId }'?</span>
<a href="#l8.133"></a><span id="l8.133"> delete-selected-pub-key = Do you want to delete the public keys?</span>
<a href="#l8.134"></a><span id="l8.134"> refresh-all-question = You did not select any key. Would you like to refresh ALL keys?</span>
<a href="#l8.135"></a><span id="l8.135"> key-man-button-export-sec-key = Export &amp;Secret Keys</span>
<a href="#l8.136"></a><span id="l8.136"> key-man-button-export-pub-key = Export &amp;Public Keys Only</span>
<a href="#l8.137"></a><span id="l8.137"> key-man-button-refresh-all = &amp;Refresh All Keys</span>
<a href="#l8.138"></a><span id="l8.138"> key-man-loading-keys = Loading keys, please wait</span>
<a href="#l8.139"></a><span id="l8.139"> ascii-armor-file = ASCII Armored Files (*.asc)</span>
<a href="#l8.140"></a><span id="l8.140"> no-key-selected = You should select at least one key in order to perform the selected operation</span>
<a href="#l8.141"></a><span id="l8.141" class="difflineat">@@ -313,18 +283,16 @@ export-to-file = Export Public Key To Fi</span>
<a href="#l8.142"></a><span id="l8.142"> export-keypair-to-file = Export Secret and Public Key To File</span>
<a href="#l8.143"></a><span id="l8.143"> export-secret-key = Do you want to include the secret key in the saved OpenPGP key file?</span>
<a href="#l8.144"></a><span id="l8.144"> save-keys-ok = The keys were successfully saved</span>
<a href="#l8.145"></a><span id="l8.145"> save-keys-failed = Saving the keys failed</span>
<a href="#l8.146"></a><span id="l8.146"> default-pub-key-filename = Exported-public-keys</span>
<a href="#l8.147"></a><span id="l8.147"> default-pub-sec-key-filename = Exported-public-and-secret-keys</span>
<a href="#l8.148"></a><span id="l8.148"> refresh-key-warn = Warning: depending on the number of keys and the connection speed, refreshing all keys could be quite a lengthy process!</span>
<a href="#l8.149"></a><span id="l8.149"> preview-failed = Can't read public key file.</span>
<a href="#l8.150"></a><span id="l8.150" class="difflineminus">-general-error = Error: { $reason }</span>
<a href="#l8.151"></a><span id="l8.151" class="difflineminus">-dlg-button-delete = &amp;Delete</span>
<a href="#l8.152"></a><span id="l8.152"> </span>
<a href="#l8.153"></a><span id="l8.153"> # Strings in keyObj.jsm</span>
<a href="#l8.154"></a><span id="l8.154"> key-ring-pub-key-revoked = The key { $userId } (key ID { $keyId }) is revoked.</span>
<a href="#l8.155"></a><span id="l8.155"> key-ring-pub-key-expired = The key { $userId } (key ID { $keyId }) has expired.</span>
<a href="#l8.156"></a><span id="l8.156"> key-ring-key-disabled = The key { $userId } (key ID { $keyId }) is disabled; it cannot be used.</span>
<a href="#l8.157"></a><span id="l8.157"> key-ring-key-invalid = The key { $userId } (key ID { $keyId }) is not valid. Please consider verifying it correctly.</span>
<a href="#l8.158"></a><span id="l8.158"> key-ring-key-not-trusted=The key { $userId } (key ID { $keyId }) is not trusted enough. Please set the trust level of your key to &quot;ultimate&quot; to use it for signing.</span>
<a href="#l8.159"></a><span id="l8.159"> key-ring-no-secret-key = You do not seem to have the secret key for { $userId } (key ID { $keyId }) on your keyring; you cannot use the key for signing.</span>
<a href="#l8.160"></a><span id="l8.160" class="difflineat">@@ -337,23 +305,18 @@ key-ring-enc-sub-keys-revoked = All encr</span>
<a href="#l8.161"></a><span id="l8.161"> key-ring-enc-sub-keys-expired = All encryption subkeys of key { $userId } (key ID { $keyId }) have expired.</span>
<a href="#l8.162"></a><span id="l8.162"> key-ring-enc-sub-keys-unusable = All encryption subkeys of key { $userId } (key ID { $keyId }) are revoked, expired or otherwise unusable.</span>
<a href="#l8.163"></a><span id="l8.163"> </span>
<a href="#l8.164"></a><span id="l8.164"> # Strings in gnupg-keylist.jsm</span>
<a href="#l8.165"></a><span id="l8.165"> keyring-photo = Photo</span>
<a href="#l8.166"></a><span id="l8.166"> user-att-photo = User attribute (JPEG image)</span>
<a href="#l8.167"></a><span id="l8.167"> </span>
<a href="#l8.168"></a><span id="l8.168"> # Strings in key.jsm</span>
<a href="#l8.169"></a><span id="l8.169" class="difflineminus">-revoke-key-question =</span>
<a href="#l8.170"></a><span id="l8.170" class="difflineminus">-    You are about to revoke the key '{ $userId }'.</span>
<a href="#l8.171"></a><span id="l8.171" class="difflineminus">-    You will no longer be able to sign with this key, and once distributed, others will no longer be able to encrypt with that key. You can still use the key to decrypt old messages.</span>
<a href="#l8.172"></a><span id="l8.172" class="difflineminus">-    Do you want to proceed?</span>
<a href="#l8.173"></a><span id="l8.173" class="difflineminus">-revoke-key-not-present =</span>
<a href="#l8.174"></a><span id="l8.174" class="difflineminus">-    You have no key (0x{ $keyId }) which matches this revocation certificate!</span>
<a href="#l8.175"></a><span id="l8.175" class="difflineminus">-    If you have lost your key, you must import it (e.g. from a keyserver) before importing the revocation certificate!</span>
<a href="#l8.176"></a><span id="l8.176" class="difflineplus">+revoke-key-question = You are about to revoke the key '{ $userId }'.\n\nYou will no longer be able to sign with this key, and once distributed, others will no longer be able to encrypt with that key. You can still use the key to decrypt old messages.\n\nDo you want to proceed?</span>
<a href="#l8.177"></a><span id="l8.177" class="difflineplus">+revoke-key-not-present = You have no key (0x{ $keyId }) which matches this revocation certificate!\n\nIf you have lost your key, you must import it (e.g. from a keyserver) before importing the revocation certificate!</span>
<a href="#l8.178"></a><span id="l8.178"> revoke-key-already-revoked = The key 0x{ $keyId } has already been revoked.</span>
<a href="#l8.179"></a><span id="l8.179"> key-man-button-revoke-key = &amp;Revoke Key</span>
<a href="#l8.180"></a><span id="l8.180"> </span>
<a href="#l8.181"></a><span id="l8.181"> # Strings in keyRing.jsm &amp; decryption.jsm</span>
<a href="#l8.182"></a><span id="l8.182"> key-man-button-import = &amp;Import</span>
<a href="#l8.183"></a><span id="l8.183"> </span>
<a href="#l8.184"></a><span id="l8.184"> # Strings used in errorHandling.jsm</span>
<a href="#l8.185"></a><span id="l8.185"> key-error-key-spec-not-found = The email address '{ $keySpec }' cannot be matched to a key on your keyring.</span>
<a href="#l8.186"></a><span id="l8.186" class="difflineat">@@ -370,17 +333,16 @@ fail-key-extract = Error - key extractio</span>
<a href="#l8.187"></a><span id="l8.187"> </span>
<a href="#l8.188"></a><span id="l8.188"> # Strings used in keyRing.jsm</span>
<a href="#l8.189"></a><span id="l8.189"> fail-cancel = Error - Key receive cancelled by user</span>
<a href="#l8.190"></a><span id="l8.190"> not-first-block = Error - First OpenPGP block not public key block</span>
<a href="#l8.191"></a><span id="l8.191"> import-key-confirm = Import public key(s) embedded in message?</span>
<a href="#l8.192"></a><span id="l8.192"> fail-key-import = Error - key importing failed</span>
<a href="#l8.193"></a><span id="l8.193"> file-write-failed = Failed to write to file { $output }</span>
<a href="#l8.194"></a><span id="l8.194"> no-pgp-block = Error - No valid armored OpenPGP data block found</span>
<a href="#l8.195"></a><span id="l8.195" class="difflineminus">-confirm-permissive-import = Import failed. The key you are trying to import might be corrupt or use unknown attributes. Would you like to attempt to import the parts that are correct? This might result in the import of incomplete and unusable keys.</span>
<a href="#l8.196"></a><span id="l8.196"> </span>
<a href="#l8.197"></a><span id="l8.197"> # Strings used in trust.jsm</span>
<a href="#l8.198"></a><span id="l8.198"> key-valid-unknown = unknown</span>
<a href="#l8.199"></a><span id="l8.199"> key-valid-invalid = invalid</span>
<a href="#l8.200"></a><span id="l8.200"> key-valid-disabled = disabled</span>
<a href="#l8.201"></a><span id="l8.201"> key-valid-revoked = revoked</span>
<a href="#l8.202"></a><span id="l8.202"> key-valid-expired = expired</span>
<a href="#l8.203"></a><span id="l8.203"> key-trust-untrusted = untrusted</span>
<a href="#l8.204"></a><span id="l8.204" class="difflineat">@@ -389,132 +351,54 @@ key-trust-full = trusted</span>
<a href="#l8.205"></a><span id="l8.205"> key-trust-ultimate = ultimate</span>
<a href="#l8.206"></a><span id="l8.206"> key-trust-group = (group)</span>
<a href="#l8.207"></a><span id="l8.207"> </span>
<a href="#l8.208"></a><span id="l8.208"> # Strings used in commonWorkflows.js</span>
<a href="#l8.209"></a><span id="l8.209"> import-key-file = Import OpenPGP Key File</span>
<a href="#l8.210"></a><span id="l8.210"> gnupg-file = GnuPG Files</span>
<a href="#l8.211"></a><span id="l8.211"> import-keys-failed=Importing the keys failed</span>
<a href="#l8.212"></a><span id="l8.212"> passphrase-prompt = Please enter the passphrase that unlocks the following key: { $key }</span>
<a href="#l8.213"></a><span id="l8.213" class="difflineminus">-file-to-big-to-import = This file is too big. Please don't import a large set of keys at once.</span>
<a href="#l8.214"></a><span id="l8.214"> </span>
<a href="#l8.215"></a><span id="l8.215"> # Strings used in enigmailKeygen.js</span>
<a href="#l8.216"></a><span id="l8.216"> save-revoke-cert-as = Create &amp; Save Revocation Certificate</span>
<a href="#l8.217"></a><span id="l8.217"> revoke-cert-ok = The revocation certificate has been successfully created. You can use it to invalidate your public key, e.g. in case you would lose your secret key.</span>
<a href="#l8.218"></a><span id="l8.218"> revoke-cert-failed = The revocation certificate could not be created.</span>
<a href="#l8.219"></a><span id="l8.219" class="difflineminus">-gen-going = Key generation already in progress!</span>
<a href="#l8.220"></a><span id="l8.220" class="difflineminus">-keygen-missing-user-name = There is no name specified for the selected account/identity. Please enter a value in the field  &quot;Your name&quot; in the account settings.</span>
<a href="#l8.221"></a><span id="l8.221" class="difflineminus">-expiry-too-short = Your key must be valid for at least one day.</span>
<a href="#l8.222"></a><span id="l8.222" class="difflineminus">-expiry-too-long = You cannot create a key that expires in more than 100 years.</span>
<a href="#l8.223"></a><span id="l8.223" class="difflineminus">-key-confirm = Generate public and secret key for '{ $id }'?</span>
<a href="#l8.224"></a><span id="l8.224" class="difflineminus">-key-man-button-generate-key = &amp;Generate Key</span>
<a href="#l8.225"></a><span id="l8.225" class="difflineminus">-key-abort = Abort key generation?</span>
<a href="#l8.226"></a><span id="l8.226" class="difflineminus">-key-man-button-generate-key-abort = &amp;Abort Key Generation</span>
<a href="#l8.227"></a><span id="l8.227" class="difflineminus">-key-man-button-generate-key-continue = &amp;Continue Key Generation</span>
<a href="#l8.228"></a><span id="l8.228"> </span>
<a href="#l8.229"></a><span id="l8.229"> # Strings used in enigmailMessengerOverlay.js</span>
<a href="#l8.230"></a><span id="l8.230"> failed-decrypt = Error - decryption failed</span>
<a href="#l8.231"></a><span id="l8.231" class="difflineminus">-fix-broken-exchange-msg-failed = Did not succeed to repair message.</span>
<a href="#l8.232"></a><span id="l8.232" class="difflineminus">-attachment-no-match-from-signature = Could not match signature file '{ $attachment }' to an attachment</span>
<a href="#l8.233"></a><span id="l8.233" class="difflineminus">-attachment-no-match-to-signature = Could not match attachment '{ $attachment }' to a signature file</span>
<a href="#l8.234"></a><span id="l8.234" class="difflineminus">-signature-verified-ok = The signature for attachment { $attachment } was successfully verified</span>
<a href="#l8.235"></a><span id="l8.235" class="difflineminus">-signature-verify-failed = The signature for attachment { $attachment } could not be verified</span>
<a href="#l8.236"></a><span id="l8.236" class="difflineminus">-decrypt-ok-no-sig =</span>
<a href="#l8.237"></a><span id="l8.237" class="difflineminus">-    Warning</span>
<a href="#l8.238"></a><span id="l8.238" class="difflineminus">-    Decryption was successful, but the signature could not be verified correctly</span>
<a href="#l8.239"></a><span id="l8.239" class="difflineminus">-msg-ovl-button-cont-anyway = &amp;Continue Anyway</span>
<a href="#l8.240"></a><span id="l8.240" class="difflineminus">-begin-pgp-part = ********* *BEGIN ENCRYPTED or SIGNED PART* *********</span>
<a href="#l8.241"></a><span id="l8.241" class="difflineminus">-end-pgp-part = ********** *END ENCRYPTED or SIGNED PART* **********</span>
<a href="#l8.242"></a><span id="l8.242" class="difflineminus">-enig-content-note = *Attachments to this message have not been signed nor encrypted*</span>
<a href="#l8.243"></a><span id="l8.243"> </span>
<a href="#l8.244"></a><span id="l8.244"> # Strings used in enigmailMsgComposeOverlay.js</span>
<a href="#l8.245"></a><span id="l8.245"> msg-compose-button-send = &amp;Send Message</span>
<a href="#l8.246"></a><span id="l8.246"> msg-compose-details-button-label = Details</span>
<a href="#l8.247"></a><span id="l8.247"> msg-compose-details-button-access-key = D</span>
<a href="#l8.248"></a><span id="l8.248" class="difflineminus">-send-aborted = Send operation aborted.</span>
<a href="#l8.249"></a><span id="l8.249" class="difflineplus">+send-aborted = Send operation aborted.\n\n</span>
<a href="#l8.250"></a><span id="l8.250"> key-not-trusted = Not enough trust for key '{ $key }'</span>
<a href="#l8.251"></a><span id="l8.251"> key-not-found = Key '{ $key }' not found</span>
<a href="#l8.252"></a><span id="l8.252"> key-revoked = Key '{ $key }' revoked</span>
<a href="#l8.253"></a><span id="l8.253"> key-expired = Key '{ $key }' expired</span>
<a href="#l8.254"></a><span id="l8.254"> msg-compose-internal-error = An internal error has occurred.</span>
<a href="#l8.255"></a><span id="l8.255"> keys-to-export = Select OpenPGP Keys to Insert</span>
<a href="#l8.256"></a><span id="l8.256" class="difflineminus">-msg-compose-partially-encrypted-inlinePGP =</span>
<a href="#l8.257"></a><span id="l8.257" class="difflineminus">-    The message you are replying to contained both unencrypted and encrypted parts. If the sender was not able to decrypt some message parts originally, you may be leaking confidential information that the sender was not able to originally decrypt themselves.</span>
<a href="#l8.258"></a><span id="l8.258" class="difflineminus">-    Please consider removing all quoted text from your reply to this sender.</span>
<a href="#l8.259"></a><span id="l8.259" class="difflineplus">+msg-compose-partially-encrypted-inlinePGP = The message you are replying to contained both unencrypted and encrypted parts. If the sender was not able to decrypt some message parts originally, you may be leaking confidential information that the sender was not able to originally decrypt themselves.\n\nPlease consider removing all quoted text from your reply to this sender.</span>
<a href="#l8.260"></a><span id="l8.260"> msg-compose-cannot-save-draft = Error while saving draft</span>
<a href="#l8.261"></a><span id="l8.261"> msg-compose-partially-encrypted-short = Beware of leaking sensitive information - partially encrypted email.</span>
<a href="#l8.262"></a><span id="l8.262" class="difflineminus">-quoted-printable-warn =</span>
<a href="#l8.263"></a><span id="l8.263" class="difflineminus">-    You have enabled 'quoted-printable' encoding for sending messages. This may result in incorrect decryption and/or verification of your message.</span>
<a href="#l8.264"></a><span id="l8.264" class="difflineminus">-    Do you wish to turn off sending 'quoted-printable' messages now?</span>
<a href="#l8.265"></a><span id="l8.265" class="difflineminus">-minimal-line-wrapping =</span>
<a href="#l8.266"></a><span id="l8.266" class="difflineminus">-    You have set line wrapping to { $width } characters. For correct encryption and/or signing, this value needs to be at least 68.</span>
<a href="#l8.267"></a><span id="l8.267" class="difflineminus">-    Do you wish to change line wrapping to 68 characters now?</span>
<a href="#l8.268"></a><span id="l8.268" class="difflineplus">+quoted-printable-warn = You have enabled 'quoted-printable' encoding for sending messages. This may result in incorrect decryption and/or verification of your message.\nDo you wish to turn off sending 'quoted-printable' messages now?</span>
<a href="#l8.269"></a><span id="l8.269" class="difflineplus">+minimal-line-wrapping = You have set line wrapping to { $width } characters. For correct encryption and/or signing, this value needs to be at least 68.\nDo you wish to change line wrapping to 68 characters now?</span>
<a href="#l8.270"></a><span id="l8.270"> sending-hidden-rcpt = This message has BCC (blind copy) recipients. If this message is encrypted, it is possible to hide the BCC recipients but users of some products (e.g. PGP Corp.) will not be able to decrypt the message. Given this, we recommend to avoid BCC-emails with encrypted messages.</span>
<a href="#l8.271"></a><span id="l8.271"> send-with-hidden-bcc = Hide BCC recipients</span>
<a href="#l8.272"></a><span id="l8.272"> send-with-shown-bcc = Encrypt normally</span>
<a href="#l8.273"></a><span id="l8.273" class="difflineminus">-sending-news =</span>
<a href="#l8.274"></a><span id="l8.274" class="difflineminus">-    Encrypted send operation aborted.</span>
<a href="#l8.275"></a><span id="l8.275" class="difflineminus">-    This message cannot be encrypted because there are newsgroup recipients. Please re-send the message without encryption.</span>
<a href="#l8.276"></a><span id="l8.276" class="difflineminus">-send-to-news-warning =</span>
<a href="#l8.277"></a><span id="l8.277" class="difflineminus">-    Warning: you are about to send an encrypted email to a newsgroup.</span>
<a href="#l8.278"></a><span id="l8.278" class="difflineminus">-    This is discouraged because it only makes sense if all members of the group can decrypt the message, i.e. the message needs to be encrypted with the keys of all group participants. Please send this message only if you know exactly what you are doing.</span>
<a href="#l8.279"></a><span id="l8.279" class="difflineminus">-    Continue?</span>
<a href="#l8.280"></a><span id="l8.280" class="difflineminus">-save-attachment-header = Save decrypted attachment</span>
<a href="#l8.281"></a><span id="l8.281" class="difflineminus">-no-temp-dir =</span>
<a href="#l8.282"></a><span id="l8.282" class="difflineminus">-    Could not find a temporary directory to write to</span>
<a href="#l8.283"></a><span id="l8.283" class="difflineminus">-    Please set the TEMP environment variable</span>
<a href="#l8.284"></a><span id="l8.284" class="difflineminus">-possibly-pgp-mime = Possibly PGP/MIME encrypted or signed message; use 'Decrypt/Verify' function to verify</span>
<a href="#l8.285"></a><span id="l8.285" class="difflineminus">-cannot-send-sig-because-no-own-key = Cannot digitally sign this message, because you haven't yet configured end-to-end encryption for &lt;{ $key }&gt;</span>
<a href="#l8.286"></a><span id="l8.286" class="difflineminus">-cannot-send-enc-because-no-own-key = Cannot send this message encrypted, because you haven't yet configured end-to-end encryption for &lt;{ $key }&gt;</span>
<a href="#l8.287"></a><span id="l8.287" class="difflineplus">+sending-news = Encrypted send operation aborted.\n\nThis message cannot be encrypted because there are newsgroup recipients. Please re-send the message without encryption.</span>
<a href="#l8.288"></a><span id="l8.288" class="difflineplus">+send-to-news-warning = Warning: you are about to send an encrypted email to a newsgroup.\n\nThis is discouraged because it only makes sense if all members of the group can decrypt the message, i.e. the message needs to be encrypted with the keys of all group participants. Please send this message only if you know exactly what you are doing.\n\nContinue?</span>
<a href="#l8.289"></a><span id="l8.289"> </span>
<a href="#l8.290"></a><span id="l8.290"> # Strings used in decryption.jsm</span>
<a href="#l8.291"></a><span id="l8.291" class="difflineminus">-do-import-multiple =</span>
<a href="#l8.292"></a><span id="l8.292" class="difflineminus">-    Import the following keys?</span>
<a href="#l8.293"></a><span id="l8.293" class="difflineminus">-    { $key }</span>
<a href="#l8.294"></a><span id="l8.294" class="difflineplus">+do-import-multiple = Import the following keys?\n\n{ $key }</span>
<a href="#l8.295"></a><span id="l8.295"> do-import-one = Import { $name } ({ $id })?</span>
<a href="#l8.296"></a><span id="l8.296" class="difflineminus">-cant-import = Error importing public key</span>
<a href="#l8.297"></a><span id="l8.297" class="difflineplus">+cant-import = Error importing public key\n\n</span>
<a href="#l8.298"></a><span id="l8.298"> unverified-reply = Indented message part (reply) was probably modified</span>
<a href="#l8.299"></a><span id="l8.299"> key-in-message-body = A key was found in the message body. Click 'Import Key' to import the key</span>
<a href="#l8.300"></a><span id="l8.300"> sig-mismatch = Error - Signature mismatch</span>
<a href="#l8.301"></a><span id="l8.301"> invalid-email = Error - invalid email address(es)</span>
<a href="#l8.302"></a><span id="l8.302" class="difflineminus">-attachment-pgp-key =</span>
<a href="#l8.303"></a><span id="l8.303" class="difflineminus">-    The attachment '{ $name }' you are opening appears to be an OpenPGP key file.</span>
<a href="#l8.304"></a><span id="l8.304" class="difflineminus">-    Click 'Import' to import the keys contained or 'View' to view the file contents in a browser window</span>
<a href="#l8.305"></a><span id="l8.305" class="difflineminus">-dlg-button-view = &amp;View</span>
<a href="#l8.306"></a><span id="l8.306"> </span>
<a href="#l8.307"></a><span id="l8.307"> # Strings used in enigmailMsgHdrViewOverlay.js</span>
<a href="#l8.308"></a><span id="l8.308"> decrypted-msg-with-format-error = Decrypted message (restored broken PGP email format probably caused by an old Exchange server, so that the result might not be perfect to read)</span>
<a href="#l8.309"></a><span id="l8.309"> </span>
<a href="#l8.310"></a><span id="l8.310"> # Strings used in encryption.jsm</span>
<a href="#l8.311"></a><span id="l8.311" class="difflineminus">-error-own-key-unusable =</span>
<a href="#l8.312"></a><span id="l8.312" class="difflineminus">-    The key ID '{ $addr }' configured for the current identity does not yield a usable OpenPGP key.</span>
<a href="#l8.313"></a><span id="l8.313" class="difflineminus">-    Please ensure that you have a valid, not expired OpenPGP key and that your account settings point to that key.</span>
<a href="#l8.314"></a><span id="l8.314" class="difflineminus">-    If your key is not expired, then check if you did set Owner trust to &quot;full&quot; or &quot;ultimate&quot;.</span>
<a href="#l8.315"></a><span id="l8.315" class="difflineplus">+error-own-key-unusable = The key ID '{ $addr }' configured for the current identity does not yield a usable OpenPGP key.\n\nPlease ensure that you have a valid, not expired OpenPGP key and that your account settings point to that key.\nIf your key is not expired, then check if you did set Owner trust to &quot;full&quot; or &quot;ultimate&quot;.</span>
<a href="#l8.316"></a><span id="l8.316"> not-required = Error - no encryption required</span>
<a href="#l8.317"></a><span id="l8.317" class="difflineminus">-</span>
<a href="#l8.318"></a><span id="l8.318" class="difflineminus">-# Strings used in windows.jsm</span>
<a href="#l8.319"></a><span id="l8.319" class="difflineminus">-no-photo-available = No Photo available</span>
<a href="#l8.320"></a><span id="l8.320" class="difflineminus">-error-photo-path-not-readable = Photo path '{ $photo }' is not readable</span>
<a href="#l8.321"></a><span id="l8.321" class="difflineminus">-debug-log-title = OpenPGP Debug Log</span>
<a href="#l8.322"></a><span id="l8.322" class="difflineminus">-</span>
<a href="#l8.323"></a><span id="l8.323" class="difflineminus">-# Strings used in dialog.jsm</span>
<a href="#l8.324"></a><span id="l8.324" class="difflineminus">-repeat-prefix = This alert will repeat { $count }</span>
<a href="#l8.325"></a><span id="l8.325" class="difflineminus">-repeat-suffix-singular = more time.</span>
<a href="#l8.326"></a><span id="l8.326" class="difflineminus">-repeat-suffix-plural = more times.</span>
<a href="#l8.327"></a><span id="l8.327" class="difflineminus">-no-repeat = This alert will not be shown again.</span>
<a href="#l8.328"></a><span id="l8.328" class="difflineminus">-dlg-keep-setting = Remember my answer and do not ask me again</span>
<a href="#l8.329"></a><span id="l8.329" class="difflineminus">-dlg-button-ok = &amp;OK</span>
<a href="#l8.330"></a><span id="l8.330" class="difflineminus">-dlg-button-close = &amp;Close</span>
<a href="#l8.331"></a><span id="l8.331" class="difflineminus">-dlg-button-cancel = &amp;Cancel</span>
<a href="#l8.332"></a><span id="l8.332" class="difflineminus">-dlg-no-prompt = Do not show me this dialog again</span>
<a href="#l8.333"></a><span id="l8.333" class="difflineminus">-enig-prompt = OpenPGP Prompt</span>
<a href="#l8.334"></a><span id="l8.334" class="difflineminus">-enig-confirm = OpenPGP Confirmation</span>
<a href="#l8.335"></a><span id="l8.335" class="difflineminus">-enig-alert = OpenPGP Alert</span>
<a href="#l8.336"></a><span id="l8.336" class="difflineminus">-enig-info = OpenPGP Information</span>
<a href="#l8.337"></a><span id="l8.337" class="difflineminus">-</span>
<a href="#l8.338"></a><span id="l8.338" class="difflineminus">-# Strings used in persistentCrypto.jsm</span>
<a href="#l8.339"></a><span id="l8.339" class="difflineminus">-dlg-button-retry = &amp;Retry</span>
<a href="#l8.340"></a><span id="l8.340" class="difflineminus">-dlg-button-skip = &amp;Skip</span>
<a href="#l8.341"></a><span id="l8.341" class="difflineminus">-</span>
<a href="#l8.342"></a><span id="l8.342" class="difflineminus">-# Strings used in enigmailCommon.js</span>
<a href="#l8.343"></a><span id="l8.343" class="difflineminus">-enig-error = OpenPGP Error</span>
<a href="#l8.344"></a><span id="l8.344" class="difflineminus">-enig-alert-title =</span>
<a href="#l8.345"></a><span id="l8.345" class="difflineminus">-    .title = OpenPGP Alert</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/extensions/openpgp/content/strings/enigmail.properties</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/strings/enigmail.properties</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -1,17 +1,44 @@</span>
<a href="#l9.4"></a><span id="l9.4"> #####################################################################</span>
<a href="#l9.5"></a><span id="l9.5"> # Strings used within enigmailCommon.js and enigmailCommon.jsm</span>
<a href="#l9.6"></a><span id="l9.6"> #####################################################################</span>
<a href="#l9.7"></a><span id="l9.7"> </span>
<a href="#l9.8"></a><span id="l9.8" class="difflineminus">-### dlgYes=&amp;Yes</span>
<a href="#l9.9"></a><span id="l9.9" class="difflineplus">+enigAlert2=OpenPGP Alert</span>
<a href="#l9.10"></a><span id="l9.10" class="difflineplus">+enigConfirm2=OpenPGP Confirmation</span>
<a href="#l9.11"></a><span id="l9.11" class="difflineplus">+enigInfo2=OpenPGP Information</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+enigError2=OpenPGP Error</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+enigPrompt2=OpenPGP Prompt</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineplus">+</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineplus">+dlgYes=&amp;Yes</span>
<a href="#l9.16"></a><span id="l9.16"> ### dlgNo=&amp;No</span>
<a href="#l9.17"></a><span id="l9.17" class="difflineplus">+dlgKeepSetting=Remember my answer and do not ask me again</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineplus">+dlgNoPrompt=Do not show me this dialog again</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineplus">+dlg.button.delete=&amp;Delete</span>
<a href="#l9.20"></a><span id="l9.20" class="difflineplus">+dlg.button.cancel=&amp;Cancel</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineplus">+dlg.button.close=&amp;Close</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineplus">+dlg.button.continue=Con&amp;tinue</span>
<a href="#l9.23"></a><span id="l9.23" class="difflineplus">+dlg.button.skip=&amp;Skip</span>
<a href="#l9.24"></a><span id="l9.24"> ### dlg.button.overwrite=&amp;Overwrite</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineplus">+dlg.button.view=&amp;View</span>
<a href="#l9.26"></a><span id="l9.26" class="difflineplus">+dlg.button.retry=&amp;Retry</span>
<a href="#l9.27"></a><span id="l9.27"> ### dlg.button.ignore=&amp;Ignore</span>
<a href="#l9.28"></a><span id="l9.28"> ### dlg.button.install=&amp;Install</span>
<a href="#l9.29"></a><span id="l9.29" class="difflineplus">+dlg.button.ok=&amp;OK</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineplus">+</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineplus">+repeatPrefix=\n\nThis alert will repeat %S</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+repeatSuffixSingular=more time.</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineplus">+repeatSuffixPlural=more times.</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineplus">+noRepeat2=\n\nThis alert will not be shown again.</span>
<a href="#l9.35"></a><span id="l9.35" class="difflineplus">+</span>
<a href="#l9.36"></a><span id="l9.36" class="difflineplus">+noPhotoAvailable=No Photo available</span>
<a href="#l9.37"></a><span id="l9.37" class="difflineplus">+debugLog2.title=OpenPGP Debug Log</span>
<a href="#l9.38"></a><span id="l9.38" class="difflineplus">+error.photoPathNotReadable=Photo path '%S' is not readable</span>
<a href="#l9.39"></a><span id="l9.39" class="difflineplus">+</span>
<a href="#l9.40"></a><span id="l9.40" class="difflineplus">+generalError=Error: %S</span>
<a href="#l9.41"></a><span id="l9.41"> </span>
<a href="#l9.42"></a><span id="l9.42"> # Strings in configure.jsm</span>
<a href="#l9.43"></a><span id="l9.43"> ### enigmailCommon.checkPreferences=Check Preferences ...</span>
<a href="#l9.44"></a><span id="l9.44"> </span>
<a href="#l9.45"></a><span id="l9.45"> #####################################################################</span>
<a href="#l9.46"></a><span id="l9.46"> ### Strings in enigmailAbout.js</span>
<a href="#l9.47"></a><span id="l9.47"> #####################################################################</span>
<a href="#l9.48"></a><span id="l9.48"> </span>
<a href="#l9.49"></a><span id="l9.49" class="difflineat">@@ -22,42 +49,68 @@</span>
<a href="#l9.50"></a><span id="l9.50"> #####################################################################</span>
<a href="#l9.51"></a><span id="l9.51"> </span>
<a href="#l9.52"></a><span id="l9.52"> ### onlyGPG=Key generation only works with GnuPG (not with PGP)!</span>
<a href="#l9.53"></a><span id="l9.53"> </span>
<a href="#l9.54"></a><span id="l9.54"> ### keygenComplete=Key generation completed! Identity &lt;%S&gt; will be used for signing.</span>
<a href="#l9.55"></a><span id="l9.55"> ### revokeCertRecommended=We highly recommend to create a revocation certificate for your key. This certificate can be used to invalidate your key, e.g. in case your secret key gets lost or compromised. Do you want to create such a revocation certificate now?</span>
<a href="#l9.56"></a><span id="l9.56"> ### keyMan.button.generateCert=&amp;Generate Certificate</span>
<a href="#l9.57"></a><span id="l9.57"> ### genCompleteNoSign=Key generation completed!</span>
<a href="#l9.58"></a><span id="l9.58" class="difflineplus">+genGoing=Key generation already in progress!</span>
<a href="#l9.59"></a><span id="l9.59"> </span>
<a href="#l9.60"></a><span id="l9.60"> ### passNoMatch=Passphrase entries do not match; please re-enter</span>
<a href="#l9.61"></a><span id="l9.61"> ### passCheckBox=Please check box if specifying no passphrase for key</span>
<a href="#l9.62"></a><span id="l9.62"> ### passUserName=Please specify user name for this identity</span>
<a href="#l9.63"></a><span id="l9.63" class="difflineplus">+keygen.missingUserName=There is no name specified for the selected account/identity. Please enter a value in the field  &quot;Your name&quot; in the account settings.</span>
<a href="#l9.64"></a><span id="l9.64"> ### keygen.passCharProblem=You are using special characters in your passphrase. Unfortunately, this can cause troubles for other applications. We recommend you choose a passphrase consisting only of any of these characters:\na-z A-Z 0-9 /.;:-,!?(){}[]%*</span>
<a href="#l9.65"></a><span id="l9.65"> ### passSpaceProblem=Due to technical reasons, your passphrase may not start or end with a space character.</span>
<a href="#l9.66"></a><span id="l9.66"> ### changePassFailed=Changing the passphrase failed.</span>
<a href="#l9.67"></a><span id="l9.67"> </span>
<a href="#l9.68"></a><span id="l9.68" class="difflineplus">+keyConfirm=Generate public and secret key for '%S'?</span>
<a href="#l9.69"></a><span id="l9.69" class="difflineplus">+keyMan.button.generateKey=&amp;Generate Key</span>
<a href="#l9.70"></a><span id="l9.70" class="difflineplus">+keyAbort=Abort key generation?</span>
<a href="#l9.71"></a><span id="l9.71" class="difflineplus">+keyMan.button.generateKeyAbort=&amp;Abort Key Generation</span>
<a href="#l9.72"></a><span id="l9.72" class="difflineplus">+keyMan.button.generateKeyContinue=&amp;Continue Key Generation</span>
<a href="#l9.73"></a><span id="l9.73" class="difflineplus">+expiryTooLong=You cannot create a key that expires in more than 100 years.</span>
<a href="#l9.74"></a><span id="l9.74"> ### expiryTooLongShorter=You cannot create a key that expires in more than 90 years.</span>
<a href="#l9.75"></a><span id="l9.75" class="difflineplus">+expiryTooShort=Your key must be valid for at least one day.</span>
<a href="#l9.76"></a><span id="l9.76"> ### setKeyExpirationDateFailed=The expiration date could not be changed</span>
<a href="#l9.77"></a><span id="l9.77"> </span>
<a href="#l9.78"></a><span id="l9.78" class="difflineminus">-### notePartEncrypted2=*Parts of the message have NOT been signed nor encrypted*</span>
<a href="#l9.79"></a><span id="l9.79" class="difflineminus">-### noteCutMessage2=*Multiple message blocks found -- decryption/verification aborted*</span>
<a href="#l9.80"></a><span id="l9.80" class="difflineplus">+enigContentNote2=*Attachments to this message have not been signed nor encrypted*\r\n\r\n</span>
<a href="#l9.81"></a><span id="l9.81" class="difflineplus">+possiblyPgpMime=Possibly PGP/MIME encrypted or signed message; use 'Decrypt/Verify' function to verify</span>
<a href="#l9.82"></a><span id="l9.82" class="difflineplus">+</span>
<a href="#l9.83"></a><span id="l9.83" class="difflineplus">+saveAttachmentHeader2=Save decrypted attachment</span>
<a href="#l9.84"></a><span id="l9.84" class="difflineplus">+noTempDir=Could not find a temporary directory to write to\nPlease set the TEMP environment variable</span>
<a href="#l9.85"></a><span id="l9.85" class="difflineplus">+attachmentPgpKey=The attachment '%S' you are opening appears to be an OpenPGP key file.\n\nClick 'Import' to import the keys contained or 'View' to view the file contents in a browser window</span>
<a href="#l9.86"></a><span id="l9.86"> </span>
<a href="#l9.87"></a><span id="l9.87" class="difflineplus">+beginPgpPart=********* *BEGIN ENCRYPTED or SIGNED PART* *********</span>
<a href="#l9.88"></a><span id="l9.88" class="difflineplus">+endPgpPart=********** *END ENCRYPTED or SIGNED PART* **********</span>
<a href="#l9.89"></a><span id="l9.89" class="difflineplus">+notePartEncrypted2=*Parts of the message have NOT been signed nor encrypted*</span>
<a href="#l9.90"></a><span id="l9.90" class="difflineplus">+noteCutMessage2=*Multiple message blocks found -- decryption/verification aborted*</span>
<a href="#l9.91"></a><span id="l9.91" class="difflineplus">+</span>
<a href="#l9.92"></a><span id="l9.92" class="difflineplus">+decryptOkNoSig=Warning\n\nDecryption was successful, but the signature could not be verified correctly</span>
<a href="#l9.93"></a><span id="l9.93" class="difflineplus">+msgOvl.button.contAnyway=&amp;Continue Anyway</span>
<a href="#l9.94"></a><span id="l9.94" class="difflineplus">+signature.verifiedOK=The signature for attachment %S was successfully verified</span>
<a href="#l9.95"></a><span id="l9.95" class="difflineplus">+signature.verifyFailed=The signature for attachment %S could not be verified</span>
<a href="#l9.96"></a><span id="l9.96" class="difflineplus">+attachment.noMatchToSignature=Could not match attachment '%S' to a signature file</span>
<a href="#l9.97"></a><span id="l9.97" class="difflineplus">+attachment.noMatchFromSignature=Could not match signature file '%S' to an attachment</span>
<a href="#l9.98"></a><span id="l9.98" class="difflineplus">+fixBrokenExchangeMsg.failed=Did not succeed to repair message.</span>
<a href="#l9.99"></a><span id="l9.99"> ### detailsDlg.importKey=Import key</span>
<a href="#l9.100"></a><span id="l9.100"> ### wksNoIdentity=This key is not linked to any of your email accounts. Please add an account for at least one of the following email addresse(s):\n\n%S</span>
<a href="#l9.101"></a><span id="l9.101"> ### wksConfirmSuccess=Confirmation email sent.</span>
<a href="#l9.102"></a><span id="l9.102"> ### wksConfirmFailure=Sending the confirmation email failed.</span>
<a href="#l9.103"></a><span id="l9.103"> </span>
<a href="#l9.104"></a><span id="l9.104"> #####################################################################</span>
<a href="#l9.105"></a><span id="l9.105"> # Strings in enigmailMsgComposeOverlay.js</span>
<a href="#l9.106"></a><span id="l9.106"> #####################################################################</span>
<a href="#l9.107"></a><span id="l9.107"> </span>
<a href="#l9.108"></a><span id="l9.108"> ### keysToUse=Select OpenPGP Key(s) to use for %S</span>
<a href="#l9.109"></a><span id="l9.109"> ### pubKey=Public key for %S\n</span>
<a href="#l9.110"></a><span id="l9.110"> </span>
<a href="#l9.111"></a><span id="l9.111" class="difflineplus">+### windowLocked=Compose window is locked; send cancelled</span>
<a href="#l9.112"></a><span id="l9.112"> ### composeSpecifyEmail=Please specify your primary email address, which will be used to choose the signing key for outgoing messages.\n If you leave it blank, the FROM address of the message will be used to choose the signing key.</span>
<a href="#l9.113"></a><span id="l9.113"> ### attachWarning=Attachments to this message are not local, they cannot be encrypted. In order to encrypt the attachments, store them as local files first and attach these files. Do you wish to send the message anyway?</span>
<a href="#l9.114"></a><span id="l9.114"> ### warning=Warning</span>
<a href="#l9.115"></a><span id="l9.115"> ### signIconClicked=You have manually modified signing. Therefore, while you are composing this message, (de)activating signing does not depend anymore on (de)activating encryption.</span>
<a href="#l9.116"></a><span id="l9.116"> </span>
<a href="#l9.117"></a><span id="l9.117"> ### msgCompose.internalEncryptionError=Internal Error: promised encryption disabled</span>
<a href="#l9.118"></a><span id="l9.118"> </span>
<a href="#l9.119"></a><span id="l9.119"> ### msgCompose.protectSubject.tooltip=Protect the message subject</span>
<a href="#l9.120"></a><span id="l9.120" class="difflineat">@@ -371,8 +424,18 @@</span>
<a href="#l9.121"></a><span id="l9.121"> </span>
<a href="#l9.122"></a><span id="l9.122"> #strings in gnupg-key.jsm</span>
<a href="#l9.123"></a><span id="l9.123"> ### import.secretKeyImportError=An error has occurred in GnuPG while importing secret keys. The import was not successful.</span>
<a href="#l9.124"></a><span id="l9.124"> </span>
<a href="#l9.125"></a><span id="l9.125"> #strings in importSettings.js</span>
<a href="#l9.126"></a><span id="l9.126"> ### importSettings.errorNoFile=The file you specified is not a regular file!</span>
<a href="#l9.127"></a><span id="l9.127"> ### importSettings.cancelWhileInProgress=Restoring is in progress. Do you really want to abort the process?</span>
<a href="#l9.128"></a><span id="l9.128"> ### importSettings.button.abortImport=&amp;Abort process</span>
<a href="#l9.129"></a><span id="l9.129" class="difflineplus">+</span>
<a href="#l9.130"></a><span id="l9.130" class="difflineplus">+</span>
<a href="#l9.131"></a><span id="l9.131" class="difflineplus">+</span>
<a href="#l9.132"></a><span id="l9.132" class="difflineplus">+</span>
<a href="#l9.133"></a><span id="l9.133" class="difflineplus">+fileToBigToImport=This file is too big. Please don't import a large set of keys at once.</span>
<a href="#l9.134"></a><span id="l9.134" class="difflineplus">+cannotSendSigBecauseNoOwnKey=Cannot digitally sign this message, because you haven't yet configured end-to-end encryption for &lt;%S&gt;</span>
<a href="#l9.135"></a><span id="l9.135" class="difflineplus">+cannotSendEncBecauseNoOwnKey=Cannot send this message encrypted, because you haven't yet configured end-to-end encryption for &lt;%S&gt;</span>
<a href="#l9.136"></a><span id="l9.136" class="difflineplus">+</span>
<a href="#l9.137"></a><span id="l9.137" class="difflineplus">+</span>
<a href="#l9.138"></a><span id="l9.138" class="difflineplus">+confirmPermissiveImport=Import failed. The key you are trying to import might be corrupt or use unknown attributes. Would you like to attempt to import the parts that are correct? This might result in the import of incomplete and unusable keys.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/commonWorkflows.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/commonWorkflows.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -66,19 +66,17 @@ function EnigmailCommon_importKeysFromFi</span>
<a href="#l10.4"></a><span id="l10.4">   );</span>
<a href="#l10.5"></a><span id="l10.5">   if (!inFile) {</span>
<a href="#l10.6"></a><span id="l10.6">     return false;</span>
<a href="#l10.7"></a><span id="l10.7">   }</span>
<a href="#l10.8"></a><span id="l10.8"> </span>
<a href="#l10.9"></a><span id="l10.9">   // infile type: nsIFile</span>
<a href="#l10.10"></a><span id="l10.10">   // RNP.maxImportKeyBlockSize</span>
<a href="#l10.11"></a><span id="l10.11">   if (inFile.fileSize &gt; 5000000) {</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-    document.l10n.formatValue(&quot;file-to-big-to-import&quot;).then(value =&gt; {</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-      EnigmailDialog.alert(window, value);</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineminus">-    });</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineplus">+    EnigmailDialog.alert(window, EnigmailLocale.getString(&quot;fileToBigToImport&quot;));</span>
<a href="#l10.16"></a><span id="l10.16">     return false;</span>
<a href="#l10.17"></a><span id="l10.17">   }</span>
<a href="#l10.18"></a><span id="l10.18">   let errorMsgObj = {};</span>
<a href="#l10.19"></a><span id="l10.19">   // preview</span>
<a href="#l10.20"></a><span id="l10.20">   let preview = EnigmailKey.getKeyListFromKeyFile(</span>
<a href="#l10.21"></a><span id="l10.21">     inFile,</span>
<a href="#l10.22"></a><span id="l10.22">     errorMsgObj,</span>
<a href="#l10.23"></a><span id="l10.23">     !secret,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailCommon.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailCommon.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -313,22 +313,18 @@ function EnigAlertPref(mesg, prefText) {</span>
<a href="#l11.4"></a><span id="l11.4">   return EnigmailDialog.alertPref(window, mesg, prefText);</span>
<a href="#l11.5"></a><span id="l11.5"> }</span>
<a href="#l11.6"></a><span id="l11.6"> </span>
<a href="#l11.7"></a><span id="l11.7"> // Confirmation dialog with OK / Cancel buttons (both customizable)</span>
<a href="#l11.8"></a><span id="l11.8"> function EnigConfirm(mesg, okLabel, cancelLabel) {</span>
<a href="#l11.9"></a><span id="l11.9">   return EnigmailDialog.confirmDlg(window, mesg, okLabel, cancelLabel);</span>
<a href="#l11.10"></a><span id="l11.10"> }</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-async function EnigError(mesg) {</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineminus">-  return gEnigPromptSvc.alert(</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineminus">-    window,</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineminus">-    await document.l10n.formatValue(&quot;enig-error&quot;),</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineminus">-    mesg</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineminus">-  );</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineplus">+function EnigError(mesg) {</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineplus">+  return gEnigPromptSvc.alert(window, EnigGetString(&quot;enigError2&quot;), mesg);</span>
<a href="#l11.20"></a><span id="l11.20"> }</span>
<a href="#l11.21"></a><span id="l11.21"> </span>
<a href="#l11.22"></a><span id="l11.22"> function EnigHelpWindow(source) {</span>
<a href="#l11.23"></a><span id="l11.23">   EnigmailWindows.openHelpWindow(source);</span>
<a href="#l11.24"></a><span id="l11.24"> }</span>
<a href="#l11.25"></a><span id="l11.25"> </span>
<a href="#l11.26"></a><span id="l11.26"> function EnigDisplayRadioPref(prefName, prefValue, optionElementIds) {</span>
<a href="#l11.27"></a><span id="l11.27">   EnigmailLog.DEBUG(</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailKeyManager.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailKeyManager.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -307,53 +307,53 @@ function enigmailDeleteKey() {</span>
<a href="#l12.4"></a><span id="l12.4">     // one key selected</span>
<a href="#l12.5"></a><span id="l12.5">     var userId = gKeyList[keyList[0]].userId;</span>
<a href="#l12.6"></a><span id="l12.6">     if (gKeyList[keyList[0]].secretAvailable) {</span>
<a href="#l12.7"></a><span id="l12.7">       if (</span>
<a href="#l12.8"></a><span id="l12.8">         !EnigConfirm(</span>
<a href="#l12.9"></a><span id="l12.9">           l10n.formatValueSync(&quot;delete-secret-key&quot;, {</span>
<a href="#l12.10"></a><span id="l12.10">             userId,</span>
<a href="#l12.11"></a><span id="l12.11">           }),</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-          l10n.formatValueSync(&quot;dlg-button-delete&quot;)</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+          EnigGetString(&quot;dlg.button.delete&quot;)</span>
<a href="#l12.14"></a><span id="l12.14">         )</span>
<a href="#l12.15"></a><span id="l12.15">       ) {</span>
<a href="#l12.16"></a><span id="l12.16">         return;</span>
<a href="#l12.17"></a><span id="l12.17">       }</span>
<a href="#l12.18"></a><span id="l12.18">       deleteSecret = true;</span>
<a href="#l12.19"></a><span id="l12.19">     } else if (</span>
<a href="#l12.20"></a><span id="l12.20">       !EnigConfirm(</span>
<a href="#l12.21"></a><span id="l12.21">         l10n.formatValueSync(&quot;delete-pub-key&quot;, {</span>
<a href="#l12.22"></a><span id="l12.22">           userId,</span>
<a href="#l12.23"></a><span id="l12.23">         }),</span>
<a href="#l12.24"></a><span id="l12.24" class="difflineminus">-        l10n.formatValueSync(&quot;dlg-button-delete&quot;)</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineplus">+        EnigGetString(&quot;dlg.button.delete&quot;)</span>
<a href="#l12.26"></a><span id="l12.26">       )</span>
<a href="#l12.27"></a><span id="l12.27">     ) {</span>
<a href="#l12.28"></a><span id="l12.28">       return;</span>
<a href="#l12.29"></a><span id="l12.29">     }</span>
<a href="#l12.30"></a><span id="l12.30">   } else {</span>
<a href="#l12.31"></a><span id="l12.31">     // several keys selected</span>
<a href="#l12.32"></a><span id="l12.32">     for (var i = 0; i &lt; keyList.length; i++) {</span>
<a href="#l12.33"></a><span id="l12.33">       if (gKeyList[keyList[i]].secretAvailable) {</span>
<a href="#l12.34"></a><span id="l12.34">         deleteSecret = true;</span>
<a href="#l12.35"></a><span id="l12.35">       }</span>
<a href="#l12.36"></a><span id="l12.36">     }</span>
<a href="#l12.37"></a><span id="l12.37"> </span>
<a href="#l12.38"></a><span id="l12.38">     if (deleteSecret) {</span>
<a href="#l12.39"></a><span id="l12.39">       if (</span>
<a href="#l12.40"></a><span id="l12.40">         !EnigConfirm(</span>
<a href="#l12.41"></a><span id="l12.41">           l10n.formatValueSync(&quot;delete-mix&quot;),</span>
<a href="#l12.42"></a><span id="l12.42" class="difflineminus">-          l10n.formatValueSync(&quot;dlg-button-delete&quot;)</span>
<a href="#l12.43"></a><span id="l12.43" class="difflineplus">+          EnigGetString(&quot;dlg.button.delete&quot;)</span>
<a href="#l12.44"></a><span id="l12.44">         )</span>
<a href="#l12.45"></a><span id="l12.45">       ) {</span>
<a href="#l12.46"></a><span id="l12.46">         return;</span>
<a href="#l12.47"></a><span id="l12.47">       }</span>
<a href="#l12.48"></a><span id="l12.48">     } else if (</span>
<a href="#l12.49"></a><span id="l12.49">       !EnigConfirm(</span>
<a href="#l12.50"></a><span id="l12.50" class="difflineminus">-        l10n.formatValueSync(&quot;delete-selected-pub-key&quot;),</span>
<a href="#l12.51"></a><span id="l12.51" class="difflineminus">-        l10n.formatValueSync(&quot;dlg-button-delete&quot;)</span>
<a href="#l12.52"></a><span id="l12.52" class="difflineplus">+        l10n.formatValueSync(&quot;deleteSelectedPubKey&quot;),</span>
<a href="#l12.53"></a><span id="l12.53" class="difflineplus">+        EnigGetString(&quot;dlg.button.delete&quot;)</span>
<a href="#l12.54"></a><span id="l12.54">       )</span>
<a href="#l12.55"></a><span id="l12.55">     ) {</span>
<a href="#l12.56"></a><span id="l12.56">       return;</span>
<a href="#l12.57"></a><span id="l12.57">     }</span>
<a href="#l12.58"></a><span id="l12.58">   }</span>
<a href="#l12.59"></a><span id="l12.59"> </span>
<a href="#l12.60"></a><span id="l12.60">   const cApi = EnigmailCryptoAPI();</span>
<a href="#l12.61"></a><span id="l12.61">   for (let j in keyList) {</span>
<a href="#l12.62"></a><span id="l12.62" class="difflineat">@@ -381,19 +381,17 @@ function enigCreateKeyMsg() {</span>
<a href="#l12.63"></a><span id="l12.63">   var tmpDir = EnigGetTempDir();</span>
<a href="#l12.64"></a><span id="l12.64">   var tmpFile;</span>
<a href="#l12.65"></a><span id="l12.65">   try {</span>
<a href="#l12.66"></a><span id="l12.66">     tmpFile = Cc[ENIG_LOCAL_FILE_CONTRACTID].createInstance(</span>
<a href="#l12.67"></a><span id="l12.67">       EnigGetLocalFileApi()</span>
<a href="#l12.68"></a><span id="l12.68">     );</span>
<a href="#l12.69"></a><span id="l12.69">     tmpFile.initWithPath(tmpDir);</span>
<a href="#l12.70"></a><span id="l12.70">     if (!(tmpFile.isDirectory() &amp;&amp; tmpFile.isWritable())) {</span>
<a href="#l12.71"></a><span id="l12.71" class="difflineminus">-      document.l10n.formatValue(&quot;no-temp-dir&quot;).then(value =&gt; {</span>
<a href="#l12.72"></a><span id="l12.72" class="difflineminus">-        EnigAlert(value);</span>
<a href="#l12.73"></a><span id="l12.73" class="difflineminus">-      });</span>
<a href="#l12.74"></a><span id="l12.74" class="difflineplus">+      EnigAlert(EnigGetString(&quot;noTempDir&quot;));</span>
<a href="#l12.75"></a><span id="l12.75">       return;</span>
<a href="#l12.76"></a><span id="l12.76">     }</span>
<a href="#l12.77"></a><span id="l12.77">   } catch (ex) {}</span>
<a href="#l12.78"></a><span id="l12.78">   tmpFile.append(&quot;key.asc&quot;);</span>
<a href="#l12.79"></a><span id="l12.79">   tmpFile.createUnique(Ci.nsIFile.NORMAL_FILE_TYPE, 0o600);</span>
<a href="#l12.80"></a><span id="l12.80"> </span>
<a href="#l12.81"></a><span id="l12.81">   // save file</span>
<a href="#l12.82"></a><span id="l12.82">   var exitCodeObj = {};</span>
<a href="#l12.83"></a><span id="l12.83" class="difflineat">@@ -602,17 +600,17 @@ async function enigmailExportKeys() {</span>
<a href="#l12.84"></a><span id="l12.84">     }</span>
<a href="#l12.85"></a><span id="l12.85">   }</span>
<a href="#l12.86"></a><span id="l12.86"> </span>
<a href="#l12.87"></a><span id="l12.87">   var exportSecretKey = false;</span>
<a href="#l12.88"></a><span id="l12.88">   if (secretFound) {</span>
<a href="#l12.89"></a><span id="l12.89">     // double check that also the pivate keys shall be exportet</span>
<a href="#l12.90"></a><span id="l12.90">     var r = EnigmailDialog.msgBox(window, {</span>
<a href="#l12.91"></a><span id="l12.91">       msgtext: await document.l10n.formatValue(&quot;export-secret-key&quot;),</span>
<a href="#l12.92"></a><span id="l12.92" class="difflineminus">-      dialogTitle: await document.l10n.formatValue(&quot;enig-confirm&quot;),</span>
<a href="#l12.93"></a><span id="l12.93" class="difflineplus">+      dialogTitle: EnigGetString(&quot;enigConfirm2&quot;),</span>
<a href="#l12.94"></a><span id="l12.94">       button1: await document.l10n.formatValue(&quot;key-man-button-export-pub-key&quot;),</span>
<a href="#l12.95"></a><span id="l12.95">       button2: await document.l10n.formatValue(&quot;key-man-button-export-sec-key&quot;),</span>
<a href="#l12.96"></a><span id="l12.96">       cancelButton: &quot;:cancel&quot;,</span>
<a href="#l12.97"></a><span id="l12.97">       iconType: EnigmailConstants.ICONTYPE_QUESTION,</span>
<a href="#l12.98"></a><span id="l12.98">     });</span>
<a href="#l12.99"></a><span id="l12.99">     switch (r) {</span>
<a href="#l12.100"></a><span id="l12.100">       case 0: // export pub key only</span>
<a href="#l12.101"></a><span id="l12.101">         break;</span>
<a href="#l12.102"></a><span id="l12.102" class="difflineat">@@ -937,21 +935,21 @@ function userAcceptsWarning(warningMessa</span>
<a href="#l12.103"></a><span id="l12.103"> </span>
<a href="#l12.104"></a><span id="l12.104">   let checkedObj = {};</span>
<a href="#l12.105"></a><span id="l12.105"> </span>
<a href="#l12.106"></a><span id="l12.106">   let confirm =</span>
<a href="#l12.107"></a><span id="l12.107">     EnigmailDialog.msgBox(</span>
<a href="#l12.108"></a><span id="l12.108">       window,</span>
<a href="#l12.109"></a><span id="l12.109">       {</span>
<a href="#l12.110"></a><span id="l12.110">         msgtext: warningMessage,</span>
<a href="#l12.111"></a><span id="l12.111" class="difflineminus">-        checkboxLabel: l10n.formatValueSync(&quot;dlg-no-prompt&quot;),</span>
<a href="#l12.112"></a><span id="l12.112" class="difflineminus">-        button1: l10n.formatValueSync(&quot;dlg-button-continue&quot;),</span>
<a href="#l12.113"></a><span id="l12.113" class="difflineplus">+        checkboxLabel: EnigGetString(&quot;dlgNoPrompt&quot;),</span>
<a href="#l12.114"></a><span id="l12.114" class="difflineplus">+        button1: EnigGetString(&quot;dlg.button.continue&quot;),</span>
<a href="#l12.115"></a><span id="l12.115">         cancelButton: &quot;:cancel&quot;,</span>
<a href="#l12.116"></a><span id="l12.116">         iconType: EnigmailConstants.ICONTYPE_QUESTION,</span>
<a href="#l12.117"></a><span id="l12.117" class="difflineminus">-        dialogTitle: l10n.formatValueSync(&quot;enig-confirm&quot;),</span>
<a href="#l12.118"></a><span id="l12.118" class="difflineplus">+        dialogTitle: EnigmailLocale.getString(&quot;enigConfirm2&quot;),</span>
<a href="#l12.119"></a><span id="l12.119">       },</span>
<a href="#l12.120"></a><span id="l12.120">       checkedObj</span>
<a href="#l12.121"></a><span id="l12.121">     ) === 0;</span>
<a href="#l12.122"></a><span id="l12.122"> </span>
<a href="#l12.123"></a><span id="l12.123">   if (checkedObj.value) {</span>
<a href="#l12.124"></a><span id="l12.124">     EnigSetPref(&quot;warnRefreshAll&quot;, false);</span>
<a href="#l12.125"></a><span id="l12.125">   }</span>
<a href="#l12.126"></a><span id="l12.126">   return confirm;</span>
<a href="#l12.127"></a><span id="l12.127" class="difflineat">@@ -1094,17 +1092,17 @@ function enigmailImportKeysFromUrl() {</span>
<a href="#l12.128"></a><span id="l12.128">   if (</span>
<a href="#l12.129"></a><span id="l12.129">     EnigmailDialog.promptValue(</span>
<a href="#l12.130"></a><span id="l12.130">       window,</span>
<a href="#l12.131"></a><span id="l12.131">       l10n.formatValueSync(&quot;import-from-url&quot;),</span>
<a href="#l12.132"></a><span id="l12.132">       value</span>
<a href="#l12.133"></a><span id="l12.133">     )</span>
<a href="#l12.134"></a><span id="l12.134">   ) {</span>
<a href="#l12.135"></a><span id="l12.135">     var p = new Promise(function(resolve, reject) {</span>
<a href="#l12.136"></a><span id="l12.136" class="difflineminus">-      var cbFunc = async function(data) {</span>
<a href="#l12.137"></a><span id="l12.137" class="difflineplus">+      var cbFunc = function(data) {</span>
<a href="#l12.138"></a><span id="l12.138">         EnigmailLog.DEBUG(&quot;enigmailImportKeysFromUrl: _cbFunc()\n&quot;);</span>
<a href="#l12.139"></a><span id="l12.139">         var errorMsgObj = {};</span>
<a href="#l12.140"></a><span id="l12.140"> </span>
<a href="#l12.141"></a><span id="l12.141">         var preview = EnigmailKey.getKeyListFromKeyBlock(</span>
<a href="#l12.142"></a><span id="l12.142">           data,</span>
<a href="#l12.143"></a><span id="l12.143">           errorMsgObj,</span>
<a href="#l12.144"></a><span id="l12.144">           true,</span>
<a href="#l12.145"></a><span id="l12.145">           true,</span>
<a href="#l12.146"></a><span id="l12.146" class="difflineat">@@ -1112,25 +1110,25 @@ function enigmailImportKeysFromUrl() {</span>
<a href="#l12.147"></a><span id="l12.147">         );</span>
<a href="#l12.148"></a><span id="l12.148">         // should we allow importing secret keys?</span>
<a href="#l12.149"></a><span id="l12.149">         var exitStatus = -1;</span>
<a href="#l12.150"></a><span id="l12.150"> </span>
<a href="#l12.151"></a><span id="l12.151">         if (preview &amp;&amp; preview.length &gt; 0) {</span>
<a href="#l12.152"></a><span id="l12.152">           if (preview.length == 1) {</span>
<a href="#l12.153"></a><span id="l12.153">             exitStatus = EnigmailDialog.confirmDlg(</span>
<a href="#l12.154"></a><span id="l12.154">               window,</span>
<a href="#l12.155"></a><span id="l12.155" class="difflineminus">-              await document.l10n.formatValue(&quot;do-import-one&quot;, {</span>
<a href="#l12.156"></a><span id="l12.156" class="difflineplus">+              l10n.formatValueSync(&quot;do-import-one&quot;, {</span>
<a href="#l12.157"></a><span id="l12.157">                 name: preview[0].name,</span>
<a href="#l12.158"></a><span id="l12.158">                 id: preview[0].id,</span>
<a href="#l12.159"></a><span id="l12.159">               })</span>
<a href="#l12.160"></a><span id="l12.160">             );</span>
<a href="#l12.161"></a><span id="l12.161">           } else {</span>
<a href="#l12.162"></a><span id="l12.162">             exitStatus = EnigmailDialog.confirmDlg(</span>
<a href="#l12.163"></a><span id="l12.163">               window,</span>
<a href="#l12.164"></a><span id="l12.164" class="difflineminus">-              await document.l10n.formatValue(&quot;do-import-multiple&quot;, {</span>
<a href="#l12.165"></a><span id="l12.165" class="difflineplus">+              l10n.formatValueSync(&quot;do-import-multiple&quot;, {</span>
<a href="#l12.166"></a><span id="l12.166">                 key: preview</span>
<a href="#l12.167"></a><span id="l12.167">                   .map(function(a) {</span>
<a href="#l12.168"></a><span id="l12.168">                     return &quot;\t&quot; + a.name + &quot; (&quot; + a.id + &quot;)&quot;;</span>
<a href="#l12.169"></a><span id="l12.169">                   })</span>
<a href="#l12.170"></a><span id="l12.170">                   .join(&quot;\n&quot;),</span>
<a href="#l12.171"></a><span id="l12.171">               })</span>
<a href="#l12.172"></a><span id="l12.172">             );</span>
<a href="#l12.173"></a><span id="l12.173">           }</span>
<a href="#l12.174"></a><span id="l12.174" class="difflineat">@@ -1143,20 +1141,19 @@ function enigmailImportKeysFromUrl() {</span>
<a href="#l12.175"></a><span id="l12.175">               false,</span>
<a href="#l12.176"></a><span id="l12.176">               &quot;&quot;,</span>
<a href="#l12.177"></a><span id="l12.177">               errorMsgObj</span>
<a href="#l12.178"></a><span id="l12.178">             );</span>
<a href="#l12.179"></a><span id="l12.179">             errorMsgObj.preview = preview;</span>
<a href="#l12.180"></a><span id="l12.180">             resolve(errorMsgObj);</span>
<a href="#l12.181"></a><span id="l12.181">           }</span>
<a href="#l12.182"></a><span id="l12.182">         } else {</span>
<a href="#l12.183"></a><span id="l12.183" class="difflineminus">-          EnigmailDialog.alert(</span>
<a href="#l12.184"></a><span id="l12.184" class="difflineminus">-            window,</span>
<a href="#l12.185"></a><span id="l12.185" class="difflineminus">-            await document.l10n.formatValue(&quot;preview-failed&quot;)</span>
<a href="#l12.186"></a><span id="l12.186" class="difflineminus">-          );</span>
<a href="#l12.187"></a><span id="l12.187" class="difflineplus">+          document.l10n.formatValue(&quot;preview-failed&quot;).then(value =&gt; {</span>
<a href="#l12.188"></a><span id="l12.188" class="difflineplus">+            EnigmailDialog.alert(window, value);</span>
<a href="#l12.189"></a><span id="l12.189" class="difflineplus">+          });</span>
<a href="#l12.190"></a><span id="l12.190">         }</span>
<a href="#l12.191"></a><span id="l12.191">       };</span>
<a href="#l12.192"></a><span id="l12.192"> </span>
<a href="#l12.193"></a><span id="l12.193">       try {</span>
<a href="#l12.194"></a><span id="l12.194">         var bufferListener = EnigmailStreams.newStringStreamListener(cbFunc);</span>
<a href="#l12.195"></a><span id="l12.195">         var ioServ = Services.io;</span>
<a href="#l12.196"></a><span id="l12.196">         var msgUri = ioServ.newURI(value.value);</span>
<a href="#l12.197"></a><span id="l12.197"> </span>
<a href="#l12.198"></a><span id="l12.198" class="difflineat">@@ -1171,22 +1168,20 @@ function enigmailImportKeysFromUrl() {</span>
<a href="#l12.199"></a><span id="l12.199">     });</span>
<a href="#l12.200"></a><span id="l12.200"> </span>
<a href="#l12.201"></a><span id="l12.201">     p.then(function(errorMsgObj) {</span>
<a href="#l12.202"></a><span id="l12.202">       var keyList = errorMsgObj.preview.map(function(a) {</span>
<a href="#l12.203"></a><span id="l12.203">         return a.id;</span>
<a href="#l12.204"></a><span id="l12.204">       });</span>
<a href="#l12.205"></a><span id="l12.205">       EnigmailDialog.keyImportDlg(window, keyList);</span>
<a href="#l12.206"></a><span id="l12.206">       refreshKeys();</span>
<a href="#l12.207"></a><span id="l12.207" class="difflineminus">-    }).catch(async function(reason) {</span>
<a href="#l12.208"></a><span id="l12.208" class="difflineplus">+    }).catch(function(reason) {</span>
<a href="#l12.209"></a><span id="l12.209">       EnigmailDialog.alert(</span>
<a href="#l12.210"></a><span id="l12.210">         window,</span>
<a href="#l12.211"></a><span id="l12.211" class="difflineminus">-        await document.l10n.formatValue(&quot;general-error&quot;, {</span>
<a href="#l12.212"></a><span id="l12.212" class="difflineminus">-          reason: reason.value,</span>
<a href="#l12.213"></a><span id="l12.213" class="difflineminus">-        })</span>
<a href="#l12.214"></a><span id="l12.214" class="difflineplus">+        EnigGetString(&quot;generalError&quot;, [reason.value])</span>
<a href="#l12.215"></a><span id="l12.215">       );</span>
<a href="#l12.216"></a><span id="l12.216">     });</span>
<a href="#l12.217"></a><span id="l12.217">   }</span>
<a href="#l12.218"></a><span id="l12.218"> }</span>
<a href="#l12.219"></a><span id="l12.219"> </span>
<a href="#l12.220"></a><span id="l12.220"> function initiateAcKeyTransfer() {</span>
<a href="#l12.221"></a><span id="l12.221">   EnigmailWindows.inititateAcSetupMessage();</span>
<a href="#l12.222"></a><span id="l12.222"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailKeygen.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailKeygen.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -101,19 +101,19 @@ function updateKeySizeSel(selectedObj) {</span>
<a href="#l13.4"></a><span id="l13.4">     document.getElementById(&quot;keySize&quot;).removeAttribute(&quot;disabled&quot;);</span>
<a href="#l13.5"></a><span id="l13.5">   }</span>
<a href="#l13.6"></a><span id="l13.6"> }</span>
<a href="#l13.7"></a><span id="l13.7"> </span>
<a href="#l13.8"></a><span id="l13.8"> function enigmailOnClose() {</span>
<a href="#l13.9"></a><span id="l13.9">   var closeWin = true;</span>
<a href="#l13.10"></a><span id="l13.10">   if (gKeygenRequest) {</span>
<a href="#l13.11"></a><span id="l13.11">     closeWin = EnigConfirm(</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-      l10n.formatValueSync(&quot;key-abort&quot;),</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineminus">-      l10n.formatValueSync(&quot;key-man-button-generate-key-abort&quot;),</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineminus">-      l10n.formatValueSync(&quot;key-man-button-generate-key-continue&quot;)</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineplus">+      EnigGetString(&quot;keyAbort&quot;),</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineplus">+      EnigGetString(&quot;keyMan.button.generateKeyAbort&quot;),</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineplus">+      EnigGetString(&quot;keyMan.button.generateKeyContinue&quot;)</span>
<a href="#l13.18"></a><span id="l13.18">     );</span>
<a href="#l13.19"></a><span id="l13.19">   }</span>
<a href="#l13.20"></a><span id="l13.20">   if (closeWin) {</span>
<a href="#l13.21"></a><span id="l13.21">     abortKeyGeneration();</span>
<a href="#l13.22"></a><span id="l13.22">   }</span>
<a href="#l13.23"></a><span id="l13.23">   return closeWin;</span>
<a href="#l13.24"></a><span id="l13.24"> }</span>
<a href="#l13.25"></a><span id="l13.25"> </span>
<a href="#l13.26"></a><span id="l13.26" class="difflineat">@@ -165,23 +165,23 @@ function enigmailKeygenCloseRequest() {</span>
<a href="#l13.27"></a><span id="l13.27"> </span>
<a href="#l13.28"></a><span id="l13.28">   if (gKeygenRequest) {</span>
<a href="#l13.29"></a><span id="l13.29">     var p = gKeygenRequest;</span>
<a href="#l13.30"></a><span id="l13.30">     gKeygenRequest = null;</span>
<a href="#l13.31"></a><span id="l13.31">     p.kill(false);</span>
<a href="#l13.32"></a><span id="l13.32">   }</span>
<a href="#l13.33"></a><span id="l13.33"> }</span>
<a href="#l13.34"></a><span id="l13.34"> </span>
<a href="#l13.35"></a><span id="l13.35" class="difflineminus">-async function enigmailKeygenStart() {</span>
<a href="#l13.36"></a><span id="l13.36" class="difflineplus">+function enigmailKeygenStart() {</span>
<a href="#l13.37"></a><span id="l13.37">   EnigmailLog.DEBUG(&quot;enigmailKeygen.js: Start\n&quot;);</span>
<a href="#l13.38"></a><span id="l13.38"> </span>
<a href="#l13.39"></a><span id="l13.39">   if (gKeygenRequest) {</span>
<a href="#l13.40"></a><span id="l13.40">     let req = gKeygenRequest.QueryInterface(Ci.nsIRequest);</span>
<a href="#l13.41"></a><span id="l13.41">     if (req.isPending()) {</span>
<a href="#l13.42"></a><span id="l13.42" class="difflineminus">-      EnigmailDialog.info(window, await document.l10n.formatValue(&quot;gen-going&quot;));</span>
<a href="#l13.43"></a><span id="l13.43" class="difflineplus">+      EnigmailDialog.info(window, EnigGetString(&quot;genGoing&quot;));</span>
<a href="#l13.44"></a><span id="l13.44">       return;</span>
<a href="#l13.45"></a><span id="l13.45">     }</span>
<a href="#l13.46"></a><span id="l13.46">   }</span>
<a href="#l13.47"></a><span id="l13.47"> </span>
<a href="#l13.48"></a><span id="l13.48">   gGeneratedKey = null;</span>
<a href="#l13.49"></a><span id="l13.49">   gAllData = &quot;&quot;;</span>
<a href="#l13.50"></a><span id="l13.50"> </span>
<a href="#l13.51"></a><span id="l13.51">   var enigmailSvc = GetEnigmailSvc();</span>
<a href="#l13.52"></a><span id="l13.52" class="difflineat">@@ -192,61 +192,45 @@ async function enigmailKeygenStart() {</span>
<a href="#l13.53"></a><span id="l13.53">   var noExpiry = document.getElementById(&quot;noExpiry&quot;);</span>
<a href="#l13.54"></a><span id="l13.54">   var expireInput = document.getElementById(&quot;expireInput&quot;);</span>
<a href="#l13.55"></a><span id="l13.55">   var timeScale = document.getElementById(&quot;timeScale&quot;);</span>
<a href="#l13.56"></a><span id="l13.56"> </span>
<a href="#l13.57"></a><span id="l13.57">   var expiryTime = 0;</span>
<a href="#l13.58"></a><span id="l13.58">   if (!noExpiry.checked) {</span>
<a href="#l13.59"></a><span id="l13.59">     expiryTime = Number(expireInput.value) * Number(timeScale.value);</span>
<a href="#l13.60"></a><span id="l13.60">     if (expiryTime &gt; 36500) {</span>
<a href="#l13.61"></a><span id="l13.61" class="difflineminus">-      EnigmailDialog.info(</span>
<a href="#l13.62"></a><span id="l13.62" class="difflineminus">-        window,</span>
<a href="#l13.63"></a><span id="l13.63" class="difflineminus">-        await document.l10n.formatValue(&quot;expiry-too-long&quot;)</span>
<a href="#l13.64"></a><span id="l13.64" class="difflineminus">-      );</span>
<a href="#l13.65"></a><span id="l13.65" class="difflineplus">+      EnigmailDialog.info(window, EnigGetString(&quot;expiryTooLong&quot;));</span>
<a href="#l13.66"></a><span id="l13.66">       return;</span>
<a href="#l13.67"></a><span id="l13.67">     }</span>
<a href="#l13.68"></a><span id="l13.68">     if (expiryTime &lt;= 0) {</span>
<a href="#l13.69"></a><span id="l13.69" class="difflineminus">-      EnigmailDialog.info(</span>
<a href="#l13.70"></a><span id="l13.70" class="difflineminus">-        window,</span>
<a href="#l13.71"></a><span id="l13.71" class="difflineminus">-        await document.l10n.formatValue(&quot;expiry-too-short&quot;)</span>
<a href="#l13.72"></a><span id="l13.72" class="difflineminus">-      );</span>
<a href="#l13.73"></a><span id="l13.73" class="difflineplus">+      EnigmailDialog.info(window, EnigGetString(&quot;expiryTooShort&quot;));</span>
<a href="#l13.74"></a><span id="l13.74">       return;</span>
<a href="#l13.75"></a><span id="l13.75">     }</span>
<a href="#l13.76"></a><span id="l13.76">   }</span>
<a href="#l13.77"></a><span id="l13.77">   var keySize = Number(document.getElementById(&quot;keySize&quot;).value);</span>
<a href="#l13.78"></a><span id="l13.78">   var keyType = document.getElementById(&quot;keyType&quot;).value;</span>
<a href="#l13.79"></a><span id="l13.79"> </span>
<a href="#l13.80"></a><span id="l13.80">   var curId = getCurrentIdentity();</span>
<a href="#l13.81"></a><span id="l13.81">   gUsedId = curId;</span>
<a href="#l13.82"></a><span id="l13.82"> </span>
<a href="#l13.83"></a><span id="l13.83">   var userName = curId.fullName;</span>
<a href="#l13.84"></a><span id="l13.84">   var userEmail = curId.email;</span>
<a href="#l13.85"></a><span id="l13.85"> </span>
<a href="#l13.86"></a><span id="l13.86">   if (!userName) {</span>
<a href="#l13.87"></a><span id="l13.87" class="difflineminus">-    EnigmailDialog.info(</span>
<a href="#l13.88"></a><span id="l13.88" class="difflineminus">-      window,</span>
<a href="#l13.89"></a><span id="l13.89" class="difflineminus">-      await document.l10n.formatValue(&quot;keygen-missing-user-name&quot;)</span>
<a href="#l13.90"></a><span id="l13.90" class="difflineminus">-    );</span>
<a href="#l13.91"></a><span id="l13.91" class="difflineplus">+    EnigmailDialog.info(window, EnigGetString(&quot;keygen.missingUserName&quot;));</span>
<a href="#l13.92"></a><span id="l13.92">     return;</span>
<a href="#l13.93"></a><span id="l13.93">   }</span>
<a href="#l13.94"></a><span id="l13.94"> </span>
<a href="#l13.95"></a><span id="l13.95">   var idString = userName;</span>
<a href="#l13.96"></a><span id="l13.96"> </span>
<a href="#l13.97"></a><span id="l13.97">   idString += &quot; &lt;&quot; + userEmail + &quot;&gt;&quot;;</span>
<a href="#l13.98"></a><span id="l13.98"> </span>
<a href="#l13.99"></a><span id="l13.99" class="difflineminus">-  var confirmMsg = await document.l10n.formatValue(&quot;key-confirm&quot;, {</span>
<a href="#l13.100"></a><span id="l13.100" class="difflineminus">-    id: idString,</span>
<a href="#l13.101"></a><span id="l13.101" class="difflineminus">-  });</span>
<a href="#l13.102"></a><span id="l13.102" class="difflineplus">+  var confirmMsg = EnigGetString(&quot;keyConfirm&quot;, idString);</span>
<a href="#l13.103"></a><span id="l13.103"> </span>
<a href="#l13.104"></a><span id="l13.104" class="difflineminus">-  if (</span>
<a href="#l13.105"></a><span id="l13.105" class="difflineminus">-    !EnigConfirm(</span>
<a href="#l13.106"></a><span id="l13.106" class="difflineminus">-      confirmMsg,</span>
<a href="#l13.107"></a><span id="l13.107" class="difflineminus">-      await document.l10n.formatValue(&quot;key-man-button-generate-key&quot;)</span>
<a href="#l13.108"></a><span id="l13.108" class="difflineminus">-    )</span>
<a href="#l13.109"></a><span id="l13.109" class="difflineminus">-  ) {</span>
<a href="#l13.110"></a><span id="l13.110" class="difflineplus">+  if (!EnigConfirm(confirmMsg, EnigGetString(&quot;keyMan.button.generateKey&quot;))) {</span>
<a href="#l13.111"></a><span id="l13.111">     return;</span>
<a href="#l13.112"></a><span id="l13.112">   }</span>
<a href="#l13.113"></a><span id="l13.113"> </span>
<a href="#l13.114"></a><span id="l13.114">   var cApi;</span>
<a href="#l13.115"></a><span id="l13.115">   try {</span>
<a href="#l13.116"></a><span id="l13.116">     let newId = null;</span>
<a href="#l13.117"></a><span id="l13.117">     cApi = EnigmailCryptoAPI();</span>
<a href="#l13.118"></a><span id="l13.118">     newId = cApi.sync(</span>
<a href="#l13.119"></a><span id="l13.119" class="difflineat">@@ -307,19 +291,19 @@ function abortKeyGeneration() {</span>
<a href="#l13.120"></a><span id="l13.120"> }</span>
<a href="#l13.121"></a><span id="l13.121"> </span>
<a href="#l13.122"></a><span id="l13.122"> function enigmailKeygenCancel() {</span>
<a href="#l13.123"></a><span id="l13.123">   EnigmailLog.DEBUG(&quot;enigmailKeygen.js: Cancel\n&quot;);</span>
<a href="#l13.124"></a><span id="l13.124">   var closeWin = false;</span>
<a href="#l13.125"></a><span id="l13.125"> </span>
<a href="#l13.126"></a><span id="l13.126">   if (gKeygenRequest) {</span>
<a href="#l13.127"></a><span id="l13.127">     closeWin = EnigConfirm(</span>
<a href="#l13.128"></a><span id="l13.128" class="difflineminus">-      l10n.formatValueSync(&quot;key-abort&quot;),</span>
<a href="#l13.129"></a><span id="l13.129" class="difflineminus">-      l10n.formatValueSync(&quot;key-man-button-generate-key-abort&quot;),</span>
<a href="#l13.130"></a><span id="l13.130" class="difflineminus">-      l10n.formatValueSync(&quot;key-man-button-generate-key-continue&quot;)</span>
<a href="#l13.131"></a><span id="l13.131" class="difflineplus">+      EnigGetString(&quot;keyAbort&quot;),</span>
<a href="#l13.132"></a><span id="l13.132" class="difflineplus">+      EnigGetString(&quot;keyMan.button.generateKeyAbort&quot;),</span>
<a href="#l13.133"></a><span id="l13.133" class="difflineplus">+      EnigGetString(&quot;keyMan.button.generateKeyContinue&quot;)</span>
<a href="#l13.134"></a><span id="l13.134">     );</span>
<a href="#l13.135"></a><span id="l13.135">     if (closeWin) {</span>
<a href="#l13.136"></a><span id="l13.136">       abortKeyGeneration();</span>
<a href="#l13.137"></a><span id="l13.137">     }</span>
<a href="#l13.138"></a><span id="l13.138">   } else {</span>
<a href="#l13.139"></a><span id="l13.139">     closeWin = true;</span>
<a href="#l13.140"></a><span id="l13.140">   }</span>
<a href="#l13.141"></a><span id="l13.141"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailMessengerOverlay.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -127,18 +127,16 @@ var EnigmailStdlib = ChromeUtils.import(</span>
<a href="#l14.4"></a><span id="l14.4"> var EnigmailConfigure = ChromeUtils.import(</span>
<a href="#l14.5"></a><span id="l14.5">   &quot;chrome://openpgp/content/modules/configure.jsm&quot;</span>
<a href="#l14.6"></a><span id="l14.6"> ).EnigmailConfigure;</span>
<a href="#l14.7"></a><span id="l14.7"> var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l14.8"></a><span id="l14.8"> var KeyLookupHelper = ChromeUtils.import(</span>
<a href="#l14.9"></a><span id="l14.9">   &quot;chrome://openpgp/content/modules/keyLookupHelper.jsm&quot;</span>
<a href="#l14.10"></a><span id="l14.10"> ).KeyLookupHelper;</span>
<a href="#l14.11"></a><span id="l14.11"> </span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-var l10n = new Localization([&quot;messenger/openpgp/enigmail.ftl&quot;], true);</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineminus">-</span>
<a href="#l14.14"></a><span id="l14.14"> var Enigmail;</span>
<a href="#l14.15"></a><span id="l14.15"> if (!Enigmail) {</span>
<a href="#l14.16"></a><span id="l14.16">   Enigmail = {};</span>
<a href="#l14.17"></a><span id="l14.17"> }</span>
<a href="#l14.18"></a><span id="l14.18"> </span>
<a href="#l14.19"></a><span id="l14.19"> Enigmail.getEnigmailSvc = function() {</span>
<a href="#l14.20"></a><span id="l14.20">   return EnigmailCore.getService(window);</span>
<a href="#l14.21"></a><span id="l14.21"> };</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineat">@@ -726,17 +724,17 @@ Enigmail.msg = {</span>
<a href="#l14.23"></a><span id="l14.23">     }</span>
<a href="#l14.24"></a><span id="l14.24"> </span>
<a href="#l14.25"></a><span id="l14.25">     var i;</span>
<a href="#l14.26"></a><span id="l14.26">     for (i in mimePart.subParts) {</span>
<a href="#l14.27"></a><span id="l14.27">       this.enumerateMimeParts(mimePart.subParts[i], resultObj);</span>
<a href="#l14.28"></a><span id="l14.28">     }</span>
<a href="#l14.29"></a><span id="l14.29">   },</span>
<a href="#l14.30"></a><span id="l14.30"> </span>
<a href="#l14.31"></a><span id="l14.31" class="difflineminus">-  async messageDecryptCb(event, isAuto, mimeMsg) {</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineplus">+  messageDecryptCb(event, isAuto, mimeMsg) {</span>
<a href="#l14.33"></a><span id="l14.33">     EnigmailLog.DEBUG(&quot;enigmailMessengerOverlay.js: messageDecryptCb:\n&quot;);</span>
<a href="#l14.34"></a><span id="l14.34"> </span>
<a href="#l14.35"></a><span id="l14.35">     this.buggyExchangeEmailContent = null; // reinit HACK for MS-EXCHANGE-Server Problem</span>
<a href="#l14.36"></a><span id="l14.36"> </span>
<a href="#l14.37"></a><span id="l14.37">     let enigmailSvc;</span>
<a href="#l14.38"></a><span id="l14.38">     let contentType = &quot;&quot;;</span>
<a href="#l14.39"></a><span id="l14.39">     try {</span>
<a href="#l14.40"></a><span id="l14.40">       if (!mimeMsg) {</span>
<a href="#l14.41"></a><span id="l14.41" class="difflineat">@@ -995,17 +993,17 @@ Enigmail.msg = {</span>
<a href="#l14.42"></a><span id="l14.42">             // decryption set to manual</span>
<a href="#l14.43"></a><span id="l14.43">             Enigmail.hdrView.updateHdrIcons(</span>
<a href="#l14.44"></a><span id="l14.44">               EnigmailConstants.POSSIBLE_PGPMIME,</span>
<a href="#l14.45"></a><span id="l14.45">               0, // exitCode, statusFlags</span>
<a href="#l14.46"></a><span id="l14.46">               0,</span>
<a href="#l14.47"></a><span id="l14.47">               &quot;&quot;,</span>
<a href="#l14.48"></a><span id="l14.48">               &quot;&quot;, // keyId, userId</span>
<a href="#l14.49"></a><span id="l14.49">               &quot;&quot;, // sigDetails</span>
<a href="#l14.50"></a><span id="l14.50" class="difflineminus">-              await document.l10n.formatValue(&quot;possibly-pgp-mime&quot;), // infoMsg</span>
<a href="#l14.51"></a><span id="l14.51" class="difflineplus">+              EnigmailLocale.getString(&quot;possiblyPgpMime&quot;), // infoMsg</span>
<a href="#l14.52"></a><span id="l14.52">               null, // blockSeparation</span>
<a href="#l14.53"></a><span id="l14.53">               &quot;&quot;, // encToDetails</span>
<a href="#l14.54"></a><span id="l14.54">               null</span>
<a href="#l14.55"></a><span id="l14.55">             ); // xtraStatus</span>
<a href="#l14.56"></a><span id="l14.56">           }</span>
<a href="#l14.57"></a><span id="l14.57">         } else if (!isAuto) {</span>
<a href="#l14.58"></a><span id="l14.58">           Enigmail.msg.messageReload(false);</span>
<a href="#l14.59"></a><span id="l14.59">         }</span>
<a href="#l14.60"></a><span id="l14.60" class="difflineat">@@ -1334,17 +1332,17 @@ Enigmail.msg = {</span>
<a href="#l14.61"></a><span id="l14.61">     let bodyElement = null;</span>
<a href="#l14.62"></a><span id="l14.62"> </span>
<a href="#l14.63"></a><span id="l14.63">     // Thunderbird</span>
<a href="#l14.64"></a><span id="l14.64">     let msgFrame = document.getElementById(&quot;messagepane&quot;);</span>
<a href="#l14.65"></a><span id="l14.65">     bodyElement = msgFrame.contentDocument.getElementsByTagName(&quot;body&quot;)[0];</span>
<a href="#l14.66"></a><span id="l14.66">     return bodyElement;</span>
<a href="#l14.67"></a><span id="l14.67">   },</span>
<a href="#l14.68"></a><span id="l14.68"> </span>
<a href="#l14.69"></a><span id="l14.69" class="difflineminus">-  async messageParseCallback(</span>
<a href="#l14.70"></a><span id="l14.70" class="difflineplus">+  messageParseCallback(</span>
<a href="#l14.71"></a><span id="l14.71">     msgText,</span>
<a href="#l14.72"></a><span id="l14.72">     contentEncoding,</span>
<a href="#l14.73"></a><span id="l14.73">     charset,</span>
<a href="#l14.74"></a><span id="l14.74">     interactive,</span>
<a href="#l14.75"></a><span id="l14.75">     importOnly,</span>
<a href="#l14.76"></a><span id="l14.76">     messageUrl,</span>
<a href="#l14.77"></a><span id="l14.77">     signature,</span>
<a href="#l14.78"></a><span id="l14.78">     retry,</span>
<a href="#l14.79"></a><span id="l14.79" class="difflineat">@@ -1647,26 +1645,26 @@ Enigmail.msg = {</span>
<a href="#l14.80"></a><span id="l14.80">         }</span>
<a href="#l14.81"></a><span id="l14.81">       }</span>
<a href="#l14.82"></a><span id="l14.82">     }</span>
<a href="#l14.83"></a><span id="l14.83"> </span>
<a href="#l14.84"></a><span id="l14.84">     var msgRfc822Text = &quot;&quot;;</span>
<a href="#l14.85"></a><span id="l14.85">     if (tail) {</span>
<a href="#l14.86"></a><span id="l14.86">       msgRfc822Text +=</span>
<a href="#l14.87"></a><span id="l14.87">         EnigmailData.convertFromUnicode(</span>
<a href="#l14.88"></a><span id="l14.88" class="difflineminus">-          await document.l10n.formatValue(&quot;begin-pgp-part&quot;),</span>
<a href="#l14.89"></a><span id="l14.89" class="difflineplus">+          EnigmailLocale.getString(&quot;beginPgpPart&quot;),</span>
<a href="#l14.90"></a><span id="l14.90">           charset</span>
<a href="#l14.91"></a><span id="l14.91">         ) + &quot;\n\n&quot;;</span>
<a href="#l14.92"></a><span id="l14.92">     }</span>
<a href="#l14.93"></a><span id="l14.93">     msgRfc822Text += plainText;</span>
<a href="#l14.94"></a><span id="l14.94">     if (tail) {</span>
<a href="#l14.95"></a><span id="l14.95">       msgRfc822Text +=</span>
<a href="#l14.96"></a><span id="l14.96">         &quot;\n\n&quot; +</span>
<a href="#l14.97"></a><span id="l14.97">         EnigmailData.convertFromUnicode(</span>
<a href="#l14.98"></a><span id="l14.98" class="difflineminus">-          await document.l10n.formatValue(&quot;end-pgp-part&quot;),</span>
<a href="#l14.99"></a><span id="l14.99" class="difflineplus">+          EnigmailLocale.getString(&quot;endPgpPart&quot;),</span>
<a href="#l14.100"></a><span id="l14.100">           charset</span>
<a href="#l14.101"></a><span id="l14.101">         ) +</span>
<a href="#l14.102"></a><span id="l14.102">         &quot;\n\n&quot; +</span>
<a href="#l14.103"></a><span id="l14.103">         tail;</span>
<a href="#l14.104"></a><span id="l14.104">     }</span>
<a href="#l14.105"></a><span id="l14.105"> </span>
<a href="#l14.106"></a><span id="l14.106">     Enigmail.msg.decryptedMessage = {</span>
<a href="#l14.107"></a><span id="l14.107">       url: messageUrl,</span>
<a href="#l14.108"></a><span id="l14.108" class="difflineat">@@ -1930,20 +1928,20 @@ Enigmail.msg = {</span>
<a href="#l14.109"></a><span id="l14.109"> </span>
<a href="#l14.110"></a><span id="l14.110">         EnigmailTimer.setTimeout(function() {</span>
<a href="#l14.111"></a><span id="l14.111">           gFolderDisplay.view.dbView.selectMsgByKey(msgKey);</span>
<a href="#l14.112"></a><span id="l14.112">         }, 750);</span>
<a href="#l14.113"></a><span id="l14.113">       }</span>
<a href="#l14.114"></a><span id="l14.114"> </span>
<a href="#l14.115"></a><span id="l14.115">       hideBrokenExchangePane();</span>
<a href="#l14.116"></a><span id="l14.116">     });</span>
<a href="#l14.117"></a><span id="l14.117" class="difflineminus">-    p.catch(async function() {</span>
<a href="#l14.118"></a><span id="l14.118" class="difflineplus">+    p.catch(function() {</span>
<a href="#l14.119"></a><span id="l14.119">       EnigmailDialog.alert(</span>
<a href="#l14.120"></a><span id="l14.120">         window,</span>
<a href="#l14.121"></a><span id="l14.121" class="difflineminus">-        await document.l10n.formatValue(&quot;fix-broken-exchange-msg-failed&quot;)</span>
<a href="#l14.122"></a><span id="l14.122" class="difflineplus">+        EnigmailLocale.getString(&quot;fixBrokenExchangeMsg.failed&quot;)</span>
<a href="#l14.123"></a><span id="l14.123">       );</span>
<a href="#l14.124"></a><span id="l14.124">       hideBrokenExchangePane();</span>
<a href="#l14.125"></a><span id="l14.125">     });</span>
<a href="#l14.126"></a><span id="l14.126">   },</span>
<a href="#l14.127"></a><span id="l14.127"> </span>
<a href="#l14.128"></a><span id="l14.128">   /**</span>
<a href="#l14.129"></a><span id="l14.129">    * Hide attachments containing OpenPGP keys</span>
<a href="#l14.130"></a><span id="l14.130">    */</span>
<a href="#l14.131"></a><span id="l14.131" class="difflineat">@@ -2141,17 +2139,17 @@ Enigmail.msg = {</span>
<a href="#l14.132"></a><span id="l14.132"> </span>
<a href="#l14.133"></a><span id="l14.133">       contentData += &quot;\r\n&quot;;</span>
<a href="#l14.134"></a><span id="l14.134"> </span>
<a href="#l14.135"></a><span id="l14.135">       if (</span>
<a href="#l14.136"></a><span id="l14.136">         Enigmail.msg.decryptedMessage.hasAttachments &amp;&amp;</span>
<a href="#l14.137"></a><span id="l14.137">         !Enigmail.msg.decryptedMessage.attachmentsEncrypted</span>
<a href="#l14.138"></a><span id="l14.138">       ) {</span>
<a href="#l14.139"></a><span id="l14.139">         contentData += EnigmailData.convertFromUnicode(</span>
<a href="#l14.140"></a><span id="l14.140" class="difflineminus">-          l10n.formatValueSync(&quot;enig-content-note&quot;) + &quot;\r\n\r\n&quot;,</span>
<a href="#l14.141"></a><span id="l14.141" class="difflineplus">+          EnigmailLocale.getString(&quot;enigContentNote2&quot;),</span>
<a href="#l14.142"></a><span id="l14.142">           Enigmail.msg.decryptedMessage.charset</span>
<a href="#l14.143"></a><span id="l14.143">         );</span>
<a href="#l14.144"></a><span id="l14.144">       }</span>
<a href="#l14.145"></a><span id="l14.145"> </span>
<a href="#l14.146"></a><span id="l14.146">       contentData += Enigmail.msg.decryptedMessage.plainText;</span>
<a href="#l14.147"></a><span id="l14.147">     } else {</span>
<a href="#l14.148"></a><span id="l14.148">       // text/html or text/plain</span>
<a href="#l14.149"></a><span id="l14.149"> </span>
<a href="#l14.150"></a><span id="l14.150" class="difflineat">@@ -2500,17 +2498,17 @@ Enigmail.msg = {</span>
<a href="#l14.151"></a><span id="l14.151">         this.verifyDetachedSignature(anAttachment);</span>
<a href="#l14.152"></a><span id="l14.152">         break;</span>
<a href="#l14.153"></a><span id="l14.153">     }</span>
<a href="#l14.154"></a><span id="l14.154">   },</span>
<a href="#l14.155"></a><span id="l14.155"> </span>
<a href="#l14.156"></a><span id="l14.156">   /**</span>
<a href="#l14.157"></a><span id="l14.157">    * save the original file plus the signature file to disk and then verify the signature</span>
<a href="#l14.158"></a><span id="l14.158">    */</span>
<a href="#l14.159"></a><span id="l14.159" class="difflineminus">-  async verifyDetachedSignature(anAttachment) {</span>
<a href="#l14.160"></a><span id="l14.160" class="difflineplus">+  verifyDetachedSignature(anAttachment) {</span>
<a href="#l14.161"></a><span id="l14.161">     EnigmailLog.DEBUG(</span>
<a href="#l14.162"></a><span id="l14.162">       &quot;enigmailMessengerOverlay.js: verifyDetachedSignature: url=&quot; +</span>
<a href="#l14.163"></a><span id="l14.163">         anAttachment.url +</span>
<a href="#l14.164"></a><span id="l14.164">         &quot;\n&quot;</span>
<a href="#l14.165"></a><span id="l14.165">     );</span>
<a href="#l14.166"></a><span id="l14.166"> </span>
<a href="#l14.167"></a><span id="l14.167">     var enigmailSvc = Enigmail.getEnigmailSvc();</span>
<a href="#l14.168"></a><span id="l14.168">     if (!enigmailSvc) {</span>
<a href="#l14.169"></a><span id="l14.169" class="difflineat">@@ -2584,42 +2582,39 @@ Enigmail.msg = {</span>
<a href="#l14.170"></a><span id="l14.170">           }</span>
<a href="#l14.171"></a><span id="l14.171">         }</span>
<a href="#l14.172"></a><span id="l14.172">       }</span>
<a href="#l14.173"></a><span id="l14.173">     }</span>
<a href="#l14.174"></a><span id="l14.174"> </span>
<a href="#l14.175"></a><span id="l14.175">     if (!signatureAtt) {</span>
<a href="#l14.176"></a><span id="l14.176">       EnigmailDialog.alert(</span>
<a href="#l14.177"></a><span id="l14.177">         window,</span>
<a href="#l14.178"></a><span id="l14.178" class="difflineminus">-        await document.l10n.formatValue(&quot;attachment-no-match-to-signature&quot;, {</span>
<a href="#l14.179"></a><span id="l14.179" class="difflineminus">-          attachment: EnigmailMsgRead.getAttachmentName(origAtt),</span>
<a href="#l14.180"></a><span id="l14.180" class="difflineminus">-        })</span>
<a href="#l14.181"></a><span id="l14.181" class="difflineplus">+        EnigmailLocale.getString(&quot;attachment.noMatchToSignature&quot;, [</span>
<a href="#l14.182"></a><span id="l14.182" class="difflineplus">+          EnigmailMsgRead.getAttachmentName(origAtt),</span>
<a href="#l14.183"></a><span id="l14.183" class="difflineplus">+        ])</span>
<a href="#l14.184"></a><span id="l14.184">       );</span>
<a href="#l14.185"></a><span id="l14.185">       return;</span>
<a href="#l14.186"></a><span id="l14.186">     }</span>
<a href="#l14.187"></a><span id="l14.187">     if (!origAtt) {</span>
<a href="#l14.188"></a><span id="l14.188">       EnigmailDialog.alert(</span>
<a href="#l14.189"></a><span id="l14.189">         window,</span>
<a href="#l14.190"></a><span id="l14.190" class="difflineminus">-        await document.l10n.formatValue(&quot;attachment-no-match-from-signature&quot;, {</span>
<a href="#l14.191"></a><span id="l14.191" class="difflineminus">-          attachment: EnigmailMsgRead.getAttachmentName(signatureAtt),</span>
<a href="#l14.192"></a><span id="l14.192" class="difflineminus">-        })</span>
<a href="#l14.193"></a><span id="l14.193" class="difflineplus">+        EnigmailLocale.getString(&quot;attachment.noMatchFromSignature&quot;, [</span>
<a href="#l14.194"></a><span id="l14.194" class="difflineplus">+          EnigmailMsgRead.getAttachmentName(signatureAtt),</span>
<a href="#l14.195"></a><span id="l14.195" class="difflineplus">+        ])</span>
<a href="#l14.196"></a><span id="l14.196">       );</span>
<a href="#l14.197"></a><span id="l14.197">       return;</span>
<a href="#l14.198"></a><span id="l14.198">     }</span>
<a href="#l14.199"></a><span id="l14.199"> </span>
<a href="#l14.200"></a><span id="l14.200">     // open</span>
<a href="#l14.201"></a><span id="l14.201">     var tmpDir = EnigmailFiles.getTempDir();</span>
<a href="#l14.202"></a><span id="l14.202">     var outFile1, outFile2;</span>
<a href="#l14.203"></a><span id="l14.203">     outFile1 = Cc[&quot;@mozilla.org/file/local;1&quot;].createInstance(Ci.nsIFile);</span>
<a href="#l14.204"></a><span id="l14.204">     outFile1.initWithPath(tmpDir);</span>
<a href="#l14.205"></a><span id="l14.205">     if (!(outFile1.isDirectory() &amp;&amp; outFile1.isWritable())) {</span>
<a href="#l14.206"></a><span id="l14.206" class="difflineminus">-      EnigmailDialog.alert(</span>
<a href="#l14.207"></a><span id="l14.207" class="difflineminus">-        window,</span>
<a href="#l14.208"></a><span id="l14.208" class="difflineminus">-        await document.l10n.formatValue(&quot;no-temp-dir&quot;)</span>
<a href="#l14.209"></a><span id="l14.209" class="difflineminus">-      );</span>
<a href="#l14.210"></a><span id="l14.210" class="difflineplus">+      EnigmailDialog.alert(window, EnigmailLocale.getString(&quot;noTempDir&quot;));</span>
<a href="#l14.211"></a><span id="l14.211">       return;</span>
<a href="#l14.212"></a><span id="l14.212">     }</span>
<a href="#l14.213"></a><span id="l14.213">     outFile1.append(EnigmailMsgRead.getAttachmentName(origAtt));</span>
<a href="#l14.214"></a><span id="l14.214">     outFile1.createUnique(Ci.nsIFile.NORMAL_FILE_TYPE, 0o600);</span>
<a href="#l14.215"></a><span id="l14.215">     EnigmailFiles.writeUrlToFile(origAtt.url, outFile1);</span>
<a href="#l14.216"></a><span id="l14.216"> </span>
<a href="#l14.217"></a><span id="l14.217">     if (isEncrypted) {</span>
<a href="#l14.218"></a><span id="l14.218">       // Try to decrypt message if we suspect the message is encrypted. If it fails we will just verify the encrypted data.</span>
<a href="#l14.219"></a><span id="l14.219" class="difflineat">@@ -2636,32 +2631,32 @@ Enigmail.msg = {</span>
<a href="#l14.220"></a><span id="l14.220"> </span>
<a href="#l14.221"></a><span id="l14.221">     outFile2 = Cc[&quot;@mozilla.org/file/local;1&quot;].createInstance(Ci.nsIFile);</span>
<a href="#l14.222"></a><span id="l14.222">     outFile2.initWithPath(tmpDir);</span>
<a href="#l14.223"></a><span id="l14.223">     outFile2.append(EnigmailMsgRead.getAttachmentName(signatureAtt));</span>
<a href="#l14.224"></a><span id="l14.224">     outFile2.createUnique(Ci.nsIFile.NORMAL_FILE_TYPE, 0o600);</span>
<a href="#l14.225"></a><span id="l14.225">     EnigmailFiles.writeUrlToFile(signatureAtt.url, outFile2);</span>
<a href="#l14.226"></a><span id="l14.226"> </span>
<a href="#l14.227"></a><span id="l14.227">     var promise = EnigmailVerifyAttachment.attachment(outFile1, outFile2);</span>
<a href="#l14.228"></a><span id="l14.228" class="difflineminus">-    promise.then(async function(message) {</span>
<a href="#l14.229"></a><span id="l14.229" class="difflineplus">+    promise.then(function(message) {</span>
<a href="#l14.230"></a><span id="l14.230">       EnigmailDialog.info(</span>
<a href="#l14.231"></a><span id="l14.231">         window,</span>
<a href="#l14.232"></a><span id="l14.232" class="difflineminus">-        (await document.l10n.formatValue(&quot;signature-verified-ok&quot;, {</span>
<a href="#l14.233"></a><span id="l14.233" class="difflineminus">-          attachment: EnigmailMsgRead.getAttachmentName(origAtt),</span>
<a href="#l14.234"></a><span id="l14.234" class="difflineminus">-        })) +</span>
<a href="#l14.235"></a><span id="l14.235" class="difflineplus">+        EnigmailLocale.getString(&quot;signature.verifiedOK&quot;, [</span>
<a href="#l14.236"></a><span id="l14.236" class="difflineplus">+          EnigmailMsgRead.getAttachmentName(origAtt),</span>
<a href="#l14.237"></a><span id="l14.237" class="difflineplus">+        ]) +</span>
<a href="#l14.238"></a><span id="l14.238">           &quot;\n\n&quot; +</span>
<a href="#l14.239"></a><span id="l14.239">           message</span>
<a href="#l14.240"></a><span id="l14.240">       );</span>
<a href="#l14.241"></a><span id="l14.241">     });</span>
<a href="#l14.242"></a><span id="l14.242" class="difflineminus">-    promise.catch(async function(err) {</span>
<a href="#l14.243"></a><span id="l14.243" class="difflineplus">+    promise.catch(function(err) {</span>
<a href="#l14.244"></a><span id="l14.244">       EnigmailDialog.alert(</span>
<a href="#l14.245"></a><span id="l14.245">         window,</span>
<a href="#l14.246"></a><span id="l14.246" class="difflineminus">-        (await document.l10n.formatValue(&quot;signature-verify-failed&quot;, {</span>
<a href="#l14.247"></a><span id="l14.247" class="difflineminus">-          attachment: EnigmailMsgRead.getAttachmentName(origAtt),</span>
<a href="#l14.248"></a><span id="l14.248" class="difflineminus">-        })) +</span>
<a href="#l14.249"></a><span id="l14.249" class="difflineplus">+        EnigmailLocale.getString(&quot;signature.verifyFailed&quot;, [</span>
<a href="#l14.250"></a><span id="l14.250" class="difflineplus">+          EnigmailMsgRead.getAttachmentName(origAtt),</span>
<a href="#l14.251"></a><span id="l14.251" class="difflineplus">+        ]) +</span>
<a href="#l14.252"></a><span id="l14.252">           &quot;\n\n&quot; +</span>
<a href="#l14.253"></a><span id="l14.253">           err</span>
<a href="#l14.254"></a><span id="l14.254">       );</span>
<a href="#l14.255"></a><span id="l14.255">     });</span>
<a href="#l14.256"></a><span id="l14.256"> </span>
<a href="#l14.257"></a><span id="l14.257">     outFile1.remove(false);</span>
<a href="#l14.258"></a><span id="l14.258">     outFile2.remove(false);</span>
<a href="#l14.259"></a><span id="l14.259">   },</span>
<a href="#l14.260"></a><span id="l14.260" class="difflineat">@@ -2745,17 +2740,17 @@ Enigmail.msg = {</span>
<a href="#l14.261"></a><span id="l14.261">       if (origFilename &amp;&amp; origFilename.length &gt; rawFileName.length) {</span>
<a href="#l14.262"></a><span id="l14.262">         rawFileName = origFilename;</span>
<a href="#l14.263"></a><span id="l14.263">       }</span>
<a href="#l14.264"></a><span id="l14.264">     }</span>
<a href="#l14.265"></a><span id="l14.265"> </span>
<a href="#l14.266"></a><span id="l14.266">     if (callbackArg.actionType == &quot;saveAttachment&quot;) {</span>
<a href="#l14.267"></a><span id="l14.267">       outFile = EnigmailDialog.filePicker(</span>
<a href="#l14.268"></a><span id="l14.268">         window,</span>
<a href="#l14.269"></a><span id="l14.269" class="difflineminus">-        await document.l10n.formatValue(&quot;save-attachment-header&quot;),</span>
<a href="#l14.270"></a><span id="l14.270" class="difflineplus">+        EnigmailLocale.getString(&quot;saveAttachmentHeader2&quot;),</span>
<a href="#l14.271"></a><span id="l14.271">         Enigmail.msg.lastSaveDir,</span>
<a href="#l14.272"></a><span id="l14.272">         true,</span>
<a href="#l14.273"></a><span id="l14.273">         &quot;&quot;,</span>
<a href="#l14.274"></a><span id="l14.274">         rawFileName,</span>
<a href="#l14.275"></a><span id="l14.275">         null</span>
<a href="#l14.276"></a><span id="l14.276">       );</span>
<a href="#l14.277"></a><span id="l14.277">       if (!outFile) {</span>
<a href="#l14.278"></a><span id="l14.278">         return;</span>
<a href="#l14.279"></a><span id="l14.279" class="difflineat">@@ -2772,23 +2767,23 @@ Enigmail.msg = {</span>
<a href="#l14.280"></a><span id="l14.280">       return;</span>
<a href="#l14.281"></a><span id="l14.281">     } else {</span>
<a href="#l14.282"></a><span id="l14.282">       // open</span>
<a href="#l14.283"></a><span id="l14.283">       var tmpDir = EnigmailFiles.getTempDir();</span>
<a href="#l14.284"></a><span id="l14.284">       try {</span>
<a href="#l14.285"></a><span id="l14.285">         outFile = Cc[&quot;@mozilla.org/file/local;1&quot;].createInstance(Ci.nsIFile);</span>
<a href="#l14.286"></a><span id="l14.286">         outFile.initWithPath(tmpDir);</span>
<a href="#l14.287"></a><span id="l14.287">         if (!(outFile.isDirectory() &amp;&amp; outFile.isWritable())) {</span>
<a href="#l14.288"></a><span id="l14.288" class="difflineminus">-          errorMsgObj.value = await document.l10n.formatValue(&quot;no-temp-dir&quot;);</span>
<a href="#l14.289"></a><span id="l14.289" class="difflineplus">+          errorMsgObj.value = EnigmailLocale.getString(&quot;noTempDir&quot;);</span>
<a href="#l14.290"></a><span id="l14.290">           return;</span>
<a href="#l14.291"></a><span id="l14.291">         }</span>
<a href="#l14.292"></a><span id="l14.292">         outFile.append(rawFileName);</span>
<a href="#l14.293"></a><span id="l14.293">         outFile.createUnique(Ci.nsIFile.NORMAL_FILE_TYPE, 0o600);</span>
<a href="#l14.294"></a><span id="l14.294">       } catch (ex) {</span>
<a href="#l14.295"></a><span id="l14.295" class="difflineminus">-        errorMsgObj.value = await document.l10n.formatValue(&quot;no-temp-dir&quot;);</span>
<a href="#l14.296"></a><span id="l14.296" class="difflineplus">+        errorMsgObj.value = EnigmailLocale.getString(&quot;noTempDir&quot;);</span>
<a href="#l14.297"></a><span id="l14.297">         return;</span>
<a href="#l14.298"></a><span id="l14.298">       }</span>
<a href="#l14.299"></a><span id="l14.299">     }</span>
<a href="#l14.300"></a><span id="l14.300"> </span>
<a href="#l14.301"></a><span id="l14.301">     if (callbackArg.actionType == &quot;importKey&quot;) {</span>
<a href="#l14.302"></a><span id="l14.302">       var preview = EnigmailKey.getKeyListFromKeyBlock(</span>
<a href="#l14.303"></a><span id="l14.303">         callbackArg.data,</span>
<a href="#l14.304"></a><span id="l14.304">         errorMsgObj,</span>
<a href="#l14.305"></a><span id="l14.305" class="difflineat">@@ -2851,23 +2846,23 @@ Enigmail.msg = {</span>
<a href="#l14.306"></a><span id="l14.306">       exitStatus = false;</span>
<a href="#l14.307"></a><span id="l14.307">       if (</span>
<a href="#l14.308"></a><span id="l14.308">         statusFlagsObj.value &amp; EnigmailConstants.DECRYPTION_OKAY &amp;&amp;</span>
<a href="#l14.309"></a><span id="l14.309">         statusFlagsObj.value &amp; EnigmailConstants.UNCERTAIN_SIGNATURE</span>
<a href="#l14.310"></a><span id="l14.310">       ) {</span>
<a href="#l14.311"></a><span id="l14.311">         if (callbackArg.actionType == &quot;openAttachment&quot;) {</span>
<a href="#l14.312"></a><span id="l14.312">           exitStatus = EnigmailDialog.confirmDlg(</span>
<a href="#l14.313"></a><span id="l14.313">             window,</span>
<a href="#l14.314"></a><span id="l14.314" class="difflineminus">-            await document.l10n.formatValue(&quot;decrypt-ok-no-sig&quot;),</span>
<a href="#l14.315"></a><span id="l14.315" class="difflineminus">-            await document.l10n.formatValue(&quot;msg-ovl-button-cont-anyway&quot;)</span>
<a href="#l14.316"></a><span id="l14.316" class="difflineplus">+            EnigmailLocale.getString(&quot;decryptOkNoSig&quot;),</span>
<a href="#l14.317"></a><span id="l14.317" class="difflineplus">+            EnigmailLocale.getString(&quot;msgOvl.button.contAnyway&quot;)</span>
<a href="#l14.318"></a><span id="l14.318">           );</span>
<a href="#l14.319"></a><span id="l14.319">         } else {</span>
<a href="#l14.320"></a><span id="l14.320">           EnigmailDialog.info(</span>
<a href="#l14.321"></a><span id="l14.321">             window,</span>
<a href="#l14.322"></a><span id="l14.322" class="difflineminus">-            await document.l10n.formatValue(&quot;decrypt-ok-no-sig&quot;)</span>
<a href="#l14.323"></a><span id="l14.323" class="difflineplus">+            EnigmailLocale.getString(&quot;decryptOkNoSig&quot;)</span>
<a href="#l14.324"></a><span id="l14.324">           );</span>
<a href="#l14.325"></a><span id="l14.325">         }</span>
<a href="#l14.326"></a><span id="l14.326">       } else {</span>
<a href="#l14.327"></a><span id="l14.327">         EnigmailDialog.info(</span>
<a href="#l14.328"></a><span id="l14.328">           window,</span>
<a href="#l14.329"></a><span id="l14.329">           (await document.l10n.formatValue(&quot;failed-decrypt&quot;)) +</span>
<a href="#l14.330"></a><span id="l14.330">             &quot;\n\n&quot; +</span>
<a href="#l14.331"></a><span id="l14.331">             errorMsgObj.value</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailMsgBox.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailMsgBox.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -62,17 +62,17 @@ function onLoad() {</span>
<a href="#l15.4"></a><span id="l15.4">     if (EnigmailOS.isMac) {</span>
<a href="#l15.5"></a><span id="l15.5">       let t = document.getElementById(&quot;macosDialogTitle&quot;);</span>
<a href="#l15.6"></a><span id="l15.6">       t.setAttribute(&quot;value&quot;, args.dialogTitle);</span>
<a href="#l15.7"></a><span id="l15.7">       t.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l15.8"></a><span id="l15.8">     }</span>
<a href="#l15.9"></a><span id="l15.9"> </span>
<a href="#l15.10"></a><span id="l15.10">     dlg.setAttribute(&quot;title&quot;, args.dialogTitle);</span>
<a href="#l15.11"></a><span id="l15.11">   } else {</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-    document.l10n.setAttributes(dlg, &quot;enig-alert-title&quot;);</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+    dlg.setAttribute(&quot;title&quot;, EnigmailLocale.getString(&quot;enigAlert2&quot;));</span>
<a href="#l15.14"></a><span id="l15.14">   }</span>
<a href="#l15.15"></a><span id="l15.15"> </span>
<a href="#l15.16"></a><span id="l15.16">   if (button1) {</span>
<a href="#l15.17"></a><span id="l15.17">     setButton(&quot;accept&quot;, button1);</span>
<a href="#l15.18"></a><span id="l15.18">   }</span>
<a href="#l15.19"></a><span id="l15.19">   if (button2) {</span>
<a href="#l15.20"></a><span id="l15.20">     setButton(&quot;extra1&quot;, button2);</span>
<a href="#l15.21"></a><span id="l15.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailMsgComposeOverlay.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -1001,19 +1001,17 @@ Enigmail.msg = {</span>
<a href="#l16.4"></a><span id="l16.4">     }</span>
<a href="#l16.5"></a><span id="l16.5"> </span>
<a href="#l16.6"></a><span id="l16.6">     var tmpDir = EnigmailFiles.getTempDir();</span>
<a href="#l16.7"></a><span id="l16.7">     var tmpFile;</span>
<a href="#l16.8"></a><span id="l16.8">     try {</span>
<a href="#l16.9"></a><span id="l16.9">       tmpFile = Cc[LOCAL_FILE_CONTRACTID].createInstance(Ci.nsIFile);</span>
<a href="#l16.10"></a><span id="l16.10">       tmpFile.initWithPath(tmpDir);</span>
<a href="#l16.11"></a><span id="l16.11">       if (!(tmpFile.isDirectory() &amp;&amp; tmpFile.isWritable())) {</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-        document.l10n.formatValue(&quot;no-temp-dir&quot;).then(value =&gt; {</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">-          EnigmailDialog.alert(window, value);</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineminus">-        });</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineplus">+        EnigmailDialog.alert(window, EnigmailLocale.getString(&quot;noTempDir&quot;));</span>
<a href="#l16.16"></a><span id="l16.16">         return null;</span>
<a href="#l16.17"></a><span id="l16.17">       }</span>
<a href="#l16.18"></a><span id="l16.18">     } catch (ex) {</span>
<a href="#l16.19"></a><span id="l16.19">       EnigmailLog.writeException(</span>
<a href="#l16.20"></a><span id="l16.20">         &quot;enigmailMsgComposeOverlay.js: Enigmail.msg.extractAndAttachKey&quot;,</span>
<a href="#l16.21"></a><span id="l16.21">         ex</span>
<a href="#l16.22"></a><span id="l16.22">       );</span>
<a href="#l16.23"></a><span id="l16.23">     }</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineat">@@ -2046,17 +2044,17 @@ Enigmail.msg = {</span>
<a href="#l16.25"></a><span id="l16.25">         // BCC and encryption</span>
<a href="#l16.26"></a><span id="l16.26"> </span>
<a href="#l16.27"></a><span id="l16.27">         var dummy = {</span>
<a href="#l16.28"></a><span id="l16.28">           value: null,</span>
<a href="#l16.29"></a><span id="l16.29">         };</span>
<a href="#l16.30"></a><span id="l16.30"> </span>
<a href="#l16.31"></a><span id="l16.31">         var hideBccUsers = promptSvc.confirmEx(</span>
<a href="#l16.32"></a><span id="l16.32">           window,</span>
<a href="#l16.33"></a><span id="l16.33" class="difflineminus">-          l10n.formatValueSync(&quot;enig-confirm&quot;),</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineplus">+          EnigmailLocale.getString(&quot;enigConfirm2&quot;),</span>
<a href="#l16.35"></a><span id="l16.35">           l10n.formatValueSync(&quot;sending-hidden-rcpt&quot;),</span>
<a href="#l16.36"></a><span id="l16.36">           promptSvc.BUTTON_TITLE_IS_STRING * promptSvc.BUTTON_POS_0 +</span>
<a href="#l16.37"></a><span id="l16.37">             promptSvc.BUTTON_TITLE_CANCEL * promptSvc.BUTTON_POS_1 +</span>
<a href="#l16.38"></a><span id="l16.38">             promptSvc.BUTTON_TITLE_IS_STRING * promptSvc.BUTTON_POS_2,</span>
<a href="#l16.39"></a><span id="l16.39">           l10n.formatValueSync(&quot;send-with-shown-bcc&quot;),</span>
<a href="#l16.40"></a><span id="l16.40">           null,</span>
<a href="#l16.41"></a><span id="l16.41">           l10n.formatValueSync(&quot;send-with-hidden-bcc&quot;),</span>
<a href="#l16.42"></a><span id="l16.42">           null,</span>
<a href="#l16.43"></a><span id="l16.43" class="difflineat">@@ -2227,21 +2225,19 @@ Enigmail.msg = {</span>
<a href="#l16.44"></a><span id="l16.44">       return false;</span>
<a href="#l16.45"></a><span id="l16.45">     }</span>
<a href="#l16.46"></a><span id="l16.46"> </span>
<a href="#l16.47"></a><span id="l16.47">     this.identity = getCurrentIdentity();</span>
<a href="#l16.48"></a><span id="l16.48">     let senderKeyId = this.identity.getUnicharAttribute(&quot;openpgp_key_id&quot;);</span>
<a href="#l16.49"></a><span id="l16.49"> </span>
<a href="#l16.50"></a><span id="l16.50">     if ((gSendEncrypted || gSendSigned) &amp;&amp; !senderKeyId) {</span>
<a href="#l16.51"></a><span id="l16.51">       let msgId = gSendEncrypted</span>
<a href="#l16.52"></a><span id="l16.52" class="difflineminus">-        ? &quot;cannot-send-enc-because-no-own-key&quot;</span>
<a href="#l16.53"></a><span id="l16.53" class="difflineminus">-        : &quot;cannot-send-sig-because-no-own-key&quot;;</span>
<a href="#l16.54"></a><span id="l16.54" class="difflineminus">-      let fullAlert = await document.l10n.formatValue(msgId, {</span>
<a href="#l16.55"></a><span id="l16.55" class="difflineminus">-        key: this.identity.email,</span>
<a href="#l16.56"></a><span id="l16.56" class="difflineminus">-      });</span>
<a href="#l16.57"></a><span id="l16.57" class="difflineplus">+        ? &quot;cannotSendEncBecauseNoOwnKey&quot;</span>
<a href="#l16.58"></a><span id="l16.58" class="difflineplus">+        : &quot;cannotSendSigBecauseNoOwnKey&quot;;</span>
<a href="#l16.59"></a><span id="l16.59" class="difflineplus">+      let fullAlert = EnigmailLocale.getString(msgId, [this.identity.email]);</span>
<a href="#l16.60"></a><span id="l16.60">       EnigmailDialog.alert(window, fullAlert);</span>
<a href="#l16.61"></a><span id="l16.61">       return false;</span>
<a href="#l16.62"></a><span id="l16.62">     }</span>
<a href="#l16.63"></a><span id="l16.63"> </span>
<a href="#l16.64"></a><span id="l16.64">     if (senderKeyId) {</span>
<a href="#l16.65"></a><span id="l16.65">       let senderKeyUsable = EnigmailEncryption.determineOwnKeyUsability(</span>
<a href="#l16.66"></a><span id="l16.66">         sendFlags,</span>
<a href="#l16.67"></a><span id="l16.67">         senderKeyId</span>
<a href="#l16.68"></a><span id="l16.68" class="difflineat">@@ -2281,20 +2277,17 @@ Enigmail.msg = {</span>
<a href="#l16.69"></a><span id="l16.69"> </span>
<a href="#l16.70"></a><span id="l16.70">         EnigmailDialog.alert(window, fullAlert);</span>
<a href="#l16.71"></a><span id="l16.71">         showMessageComposeSecurityStatus();</span>
<a href="#l16.72"></a><span id="l16.72">         return false;</span>
<a href="#l16.73"></a><span id="l16.73">       }</span>
<a href="#l16.74"></a><span id="l16.74">     }</span>
<a href="#l16.75"></a><span id="l16.75"> </span>
<a href="#l16.76"></a><span id="l16.76">     if (gWindowLocked) {</span>
<a href="#l16.77"></a><span id="l16.77" class="difflineminus">-      EnigmailDialog.alert(</span>
<a href="#l16.78"></a><span id="l16.78" class="difflineminus">-        window,</span>
<a href="#l16.79"></a><span id="l16.79" class="difflineminus">-        await document.l10n.formatValue(&quot;window-locked&quot;)</span>
<a href="#l16.80"></a><span id="l16.80" class="difflineminus">-      );</span>
<a href="#l16.81"></a><span id="l16.81" class="difflineplus">+      EnigmailDialog.alert(window, EnigmailLocale.getString(&quot;windowLocked&quot;));</span>
<a href="#l16.82"></a><span id="l16.82">       return false;</span>
<a href="#l16.83"></a><span id="l16.83">     }</span>
<a href="#l16.84"></a><span id="l16.84"> </span>
<a href="#l16.85"></a><span id="l16.85">     let newSecurityInfo = this.resetDirty();</span>
<a href="#l16.86"></a><span id="l16.86">     this.dirty = 1;</span>
<a href="#l16.87"></a><span id="l16.87"> </span>
<a href="#l16.88"></a><span id="l16.88">     try {</span>
<a href="#l16.89"></a><span id="l16.89">       this.modifiedAttach = null;</span>
<a href="#l16.90"></a><span id="l16.90" class="difflineat">@@ -2677,17 +2670,17 @@ Enigmail.msg = {</span>
<a href="#l16.91"></a><span id="l16.91">           }</span>
<a href="#l16.92"></a><span id="l16.92">         }</span>
<a href="#l16.93"></a><span id="l16.93">       }</span>
<a href="#l16.94"></a><span id="l16.94">       if (errorMsg !== &quot;&quot;) {</span>
<a href="#l16.95"></a><span id="l16.95">         txt = errorMsg + &quot;\n&quot; + txt;</span>
<a href="#l16.96"></a><span id="l16.96">       }</span>
<a href="#l16.97"></a><span id="l16.97">       EnigmailDialog.info(</span>
<a href="#l16.98"></a><span id="l16.98">         window,</span>
<a href="#l16.99"></a><span id="l16.99" class="difflineminus">-        (await document.l10n.formatValue(&quot;send-aborted&quot;)) + &quot;\n&quot; + txt</span>
<a href="#l16.100"></a><span id="l16.100" class="difflineplus">+        (await document.l10n.formatValue(&quot;send-aborted&quot;)) + txt</span>
<a href="#l16.101"></a><span id="l16.101">       );</span>
<a href="#l16.102"></a><span id="l16.102">     } else {</span>
<a href="#l16.103"></a><span id="l16.103">       EnigmailDialog.info(</span>
<a href="#l16.104"></a><span id="l16.104">         window,</span>
<a href="#l16.105"></a><span id="l16.105">         (await document.l10n.formatValue(&quot;send-aborted&quot;)) +</span>
<a href="#l16.106"></a><span id="l16.106">           &quot;\n&quot; +</span>
<a href="#l16.107"></a><span id="l16.107">           (await document.l10n.formatValue(&quot;msg-compose-internal-error&quot;))</span>
<a href="#l16.108"></a><span id="l16.108">       );</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/keyDetailsDlg.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/keyDetailsDlg.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -81,17 +81,17 @@ async function reloadData() {</span>
<a href="#l17.4"></a><span id="l17.4">     let keyIsExpired =</span>
<a href="#l17.5"></a><span id="l17.5">       keyObj.expiryTime &amp;&amp; keyObj.expiryTime &lt; Math.floor(Date.now() / 1000);</span>
<a href="#l17.6"></a><span id="l17.6"> </span>
<a href="#l17.7"></a><span id="l17.7">     let acceptanceIntroText = &quot;&quot;;</span>
<a href="#l17.8"></a><span id="l17.8">     let acceptanceWarningText = &quot;&quot;;</span>
<a href="#l17.9"></a><span id="l17.9">     if (keyObj.secretAvailable) {</span>
<a href="#l17.10"></a><span id="l17.10">       document.getElementById(&quot;ownKeyCommands&quot;).removeAttribute(&quot;hidden&quot;);</span>
<a href="#l17.11"></a><span id="l17.11">       acceptanceIntroText = &quot;key-auto-accept-personal&quot;;</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-      let value = await document.l10n.formatValue(&quot;key-type-pair&quot;);</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+      let value = await document.l10n.formatValue(&quot;key-type-pair-2&quot;);</span>
<a href="#l17.14"></a><span id="l17.14">       setLabel(&quot;keyType&quot;, value);</span>
<a href="#l17.15"></a><span id="l17.15">     } else {</span>
<a href="#l17.16"></a><span id="l17.16">       document.getElementById(&quot;ownKeyCommands&quot;).setAttribute(&quot;hidden&quot;, &quot;true&quot;);</span>
<a href="#l17.17"></a><span id="l17.17">       let value = await document.l10n.formatValue(&quot;key-type-public&quot;);</span>
<a href="#l17.18"></a><span id="l17.18">       setLabel(&quot;keyType&quot;, value);</span>
<a href="#l17.19"></a><span id="l17.19"> </span>
<a href="#l17.20"></a><span id="l17.20">       let isStillValid = !(</span>
<a href="#l17.21"></a><span id="l17.21">         keyObj.keyTrust == &quot;r&quot; ||</span>
<a href="#l17.22"></a><span id="l17.22" class="difflineat">@@ -150,48 +150,51 @@ async function reloadData() {</span>
<a href="#l17.23"></a><span id="l17.23">       gAllEmails.push(splitUid.email);</span>
<a href="#l17.24"></a><span id="l17.24">     }</span>
<a href="#l17.25"></a><span id="l17.25"> </span>
<a href="#l17.26"></a><span id="l17.26">     setLabel(&quot;userId&quot;, gUserId);</span>
<a href="#l17.27"></a><span id="l17.27">     setLabel(&quot;keyCreated&quot;, keyObj.created);</span>
<a href="#l17.28"></a><span id="l17.28"> </span>
<a href="#l17.29"></a><span id="l17.29">     let expiryInfo;</span>
<a href="#l17.30"></a><span id="l17.30">     let expireArgument = null;</span>
<a href="#l17.31"></a><span id="l17.31" class="difflineminus">-    let expiryInfoKey = &quot;&quot;;</span>
<a href="#l17.32"></a><span id="l17.32" class="difflineplus">+    let l10nUse = true;</span>
<a href="#l17.33"></a><span id="l17.33">     if (keyObj.keyTrust == &quot;r&quot;) {</span>
<a href="#l17.34"></a><span id="l17.34" class="difflineminus">-      expiryInfoKey = &quot;key-revoked&quot;;</span>
<a href="#l17.35"></a><span id="l17.35" class="difflineminus">-      acceptanceIntroText = expiryInfoKey;</span>
<a href="#l17.36"></a><span id="l17.36" class="difflineplus">+      expiryInfo = &quot;key-revoked&quot;;</span>
<a href="#l17.37"></a><span id="l17.37" class="difflineplus">+      acceptanceIntroText = expiryInfo;</span>
<a href="#l17.38"></a><span id="l17.38">     } else if (keyObj.keyTrust == &quot;e&quot; || keyIsExpired) {</span>
<a href="#l17.39"></a><span id="l17.39" class="difflineminus">-      expiryInfoKey = &quot;key-expired-date&quot;;</span>
<a href="#l17.40"></a><span id="l17.40" class="difflineplus">+      expiryInfo = &quot;key-expired&quot;;</span>
<a href="#l17.41"></a><span id="l17.41">       expireArgument = keyObj.expiry;</span>
<a href="#l17.42"></a><span id="l17.42" class="difflineminus">-      acceptanceIntroText = expiryInfoKey;</span>
<a href="#l17.43"></a><span id="l17.43" class="difflineplus">+      acceptanceIntroText = expiryInfo;</span>
<a href="#l17.44"></a><span id="l17.44">     } else if (keyObj.expiry.length === 0) {</span>
<a href="#l17.45"></a><span id="l17.45" class="difflineminus">-      expiryInfoKey = &quot;key-does-not-expire&quot;;</span>
<a href="#l17.46"></a><span id="l17.46" class="difflineplus">+      expiryInfo = &quot;key-does-not-expire&quot;;</span>
<a href="#l17.47"></a><span id="l17.47">     } else {</span>
<a href="#l17.48"></a><span id="l17.48">       expiryInfo = keyObj.expiry;</span>
<a href="#l17.49"></a><span id="l17.49" class="difflineplus">+      l10nUse = false;</span>
<a href="#l17.50"></a><span id="l17.50">     }</span>
<a href="#l17.51"></a><span id="l17.51"> </span>
<a href="#l17.52"></a><span id="l17.52">     if (acceptanceIntroText) {</span>
<a href="#l17.53"></a><span id="l17.53">       let acceptanceIntro = document.getElementById(&quot;acceptanceIntro&quot;);</span>
<a href="#l17.54"></a><span id="l17.54">       document.l10n.setAttributes(acceptanceIntro, acceptanceIntroText);</span>
<a href="#l17.55"></a><span id="l17.55">     }</span>
<a href="#l17.56"></a><span id="l17.56"> </span>
<a href="#l17.57"></a><span id="l17.57">     if (acceptanceWarningText) {</span>
<a href="#l17.58"></a><span id="l17.58">       let acceptanceExplanation = document.getElementById(</span>
<a href="#l17.59"></a><span id="l17.59">         &quot;acceptanceExplanation&quot;</span>
<a href="#l17.60"></a><span id="l17.60">       );</span>
<a href="#l17.61"></a><span id="l17.61">       document.l10n.setAttributes(acceptanceExplanation, acceptanceWarningText);</span>
<a href="#l17.62"></a><span id="l17.62">     }</span>
<a href="#l17.63"></a><span id="l17.63"> </span>
<a href="#l17.64"></a><span id="l17.64" class="difflineminus">-    if (expiryInfoKey) {</span>
<a href="#l17.65"></a><span id="l17.65" class="difflineminus">-      expiryInfo = await document.l10n.formatValue(expiryInfoKey, {</span>
<a href="#l17.66"></a><span id="l17.66" class="difflineplus">+    if (l10nUse) {</span>
<a href="#l17.67"></a><span id="l17.67" class="difflineplus">+      let keyExpiryNode = document.getElementById(&quot;keyExpiry&quot;);</span>
<a href="#l17.68"></a><span id="l17.68" class="difflineplus">+      document.l10n.setAttributes(keyExpiryNode, expiryInfo, {</span>
<a href="#l17.69"></a><span id="l17.69">         keyExpiry: expireArgument,</span>
<a href="#l17.70"></a><span id="l17.70">       });</span>
<a href="#l17.71"></a><span id="l17.71" class="difflineplus">+    } else {</span>
<a href="#l17.72"></a><span id="l17.72" class="difflineplus">+      setLabel(&quot;keyExpiry&quot;, expiryInfo);</span>
<a href="#l17.73"></a><span id="l17.73">     }</span>
<a href="#l17.74"></a><span id="l17.74" class="difflineminus">-    setLabel(&quot;keyExpiry&quot;, expiryInfo);</span>
<a href="#l17.75"></a><span id="l17.75">     if (keyObj.fpr) {</span>
<a href="#l17.76"></a><span id="l17.76">       gFingerprint = keyObj.fpr;</span>
<a href="#l17.77"></a><span id="l17.77">       setLabel(&quot;fingerprint&quot;, EnigmailKey.formatFpr(keyObj.fpr));</span>
<a href="#l17.78"></a><span id="l17.78">     }</span>
<a href="#l17.79"></a><span id="l17.79">   }</span>
<a href="#l17.80"></a><span id="l17.80"> }</span>
<a href="#l17.81"></a><span id="l17.81"> </span>
<a href="#l17.82"></a><span id="l17.82"> function createUidData(listNode, keyDetails) {</span>
<a href="#l17.83"></a><span id="l17.83" class="difflineat">@@ -460,17 +463,17 @@ SigListView.prototype = {</span>
<a href="#l17.84"></a><span id="l17.84">     gTreeFuncs.rowCountChanged(row, this.rowCount - r);</span>
<a href="#l17.85"></a><span id="l17.85">   },</span>
<a href="#l17.86"></a><span id="l17.86"> };</span>
<a href="#l17.87"></a><span id="l17.87"> </span>
<a href="#l17.88"></a><span id="l17.88"> function createSubkeyItem(subkey) {</span>
<a href="#l17.89"></a><span id="l17.89">   // Get expiry state of this subkey</span>
<a href="#l17.90"></a><span id="l17.90">   let expire;</span>
<a href="#l17.91"></a><span id="l17.91">   if (subkey.keyTrust === &quot;r&quot;) {</span>
<a href="#l17.92"></a><span id="l17.92" class="difflineminus">-    expire = l10n.formatValueSync(&quot;key-valid-revoked&quot;);</span>
<a href="#l17.93"></a><span id="l17.93" class="difflineplus">+    expire = EnigmailLocale.getString(&quot;keyValid.revoked&quot;);</span>
<a href="#l17.94"></a><span id="l17.94">   } else if (subkey.expiryTime === 0) {</span>
<a href="#l17.95"></a><span id="l17.95">     expire = l10n.formatValueSync(&quot;key-expiry-never&quot;);</span>
<a href="#l17.96"></a><span id="l17.96">   } else {</span>
<a href="#l17.97"></a><span id="l17.97">     expire = subkey.expiry;</span>
<a href="#l17.98"></a><span id="l17.98">   }</span>
<a href="#l17.99"></a><span id="l17.99"> </span>
<a href="#l17.100"></a><span id="l17.100">   let subkeyType =</span>
<a href="#l17.101"></a><span id="l17.101">     subkey.type === &quot;pub&quot;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:33Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

