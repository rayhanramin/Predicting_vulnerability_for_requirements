<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 12839:c42b6328a83058d4929b9751ddc7870121b1a7a5</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ c42b6328a83058d4929b9751ddc7870121b1a7a5" />
<meta property="og:url" content="/comm-central/rev/c42b6328a83058d4929b9751ddc7870121b1a7a5" />
<meta property="og:description" content="Bug 900881 Make localAccountUtils.js into a testing module - Part 1. Move its functions into an object. r=jcranmer" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / c42b6328a83058d4929b9751ddc7870121b1a7a5 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/c42b6328a83058d4929b9751ddc7870121b1a7a5">shortlog</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/c42b6328a83058d4929b9751ddc7870121b1a7a5">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5">files</a> |
changeset |
<a href="/comm-central/raw-rev/c42b6328a83058d4929b9751ddc7870121b1a7a5">raw</a>  | <a href="/comm-central/archive/c42b6328a83058d4929b9751ddc7870121b1a7a5.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=900881">Bug 900881</a> Make localAccountUtils.js into a testing module - Part 1. Move its functions into an object. r=jcranmer
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#77;&#97;&#114;&#107;&#32;&#66;&#97;&#110;&#110;&#101;&#114;&#32;&#60;&#98;&#117;&#103;&#122;&#105;&#108;&#108;&#97;&#64;&#115;&#116;&#97;&#110;&#100;&#97;&#114;&#100;&#56;&#46;&#112;&#108;&#117;&#115;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 02 Aug 2013 18:10:30 +0100</td></tr>

<tr>
 <td>changeset 12839</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/c42b6328a83058d4929b9751ddc7870121b1a7a5">c42b6328a83058d4929b9751ddc7870121b1a7a5</a></td>
</tr>



<tr>
<td>parent 12838</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/adae2181945233f512d8609f88e51678fec4685f">adae2181945233f512d8609f88e51678fec4685f</a>
</td>
</tr>

<tr>
<td>child 12840</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/7836bd5fcf41f6810ef8ef2934e2ec03004baaab">7836bd5fcf41f6810ef8ef2934e2ec03004baaab</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=c42b6328a83058d4929b9751ddc7870121b1a7a5">9382</a></td></tr>
<tr><td>push user</td><td>bugzilla@standard8.plus.com</td></tr>
<tr><td>push date</td><td class="date age">Fri, 02 Aug 2013 17:36:36 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@099f9cfcdec5 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=099f9cfcdec5354e78f8590c6264629e4cdd6e19">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=099f9cfcdec5354e78f8590c6264629e4cdd6e19&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=099f9cfcdec5354e78f8590c6264629e4cdd6e19&newProject=comm-central&newRevision=c42b6328a83058d4929b9751ddc7870121b1a7a5&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=099f9cfcdec5354e78f8590c6264629e4cdd6e19&newProject=comm-central&newRevision=c42b6328a83058d4929b9751ddc7870121b1a7a5&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=099f9cfcdec5354e78f8590c6264629e4cdd6e19&newProject=comm-central&newRevision=c42b6328a83058d4929b9751ddc7870121b1a7a5&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28jcranmer%29&revcount=50">jcranmer</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=900881">900881</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=900881">Bug 900881</a> Make localAccountUtils.js into a testing module - Part 1. Move its functions into an object. r=jcranmer</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mail/components/test/unit/test_about_support.js">mail/components/test/unit/test_about_support.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mail/components/test/unit/test_about_support.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mail/components/test/unit/test_about_support.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mail/components/test/unit/test_about_support.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mail/components/test/unit/test_about_support.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mail/components/test/unit/test_about_support.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bccInDatabase.js">mailnews/base/test/unit/test_bccInDatabase.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bccInDatabase.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bccInDatabase.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bccInDatabase.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bccInDatabase.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bccInDatabase.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug366491.js">mailnews/base/test/unit/test_bug366491.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug366491.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug366491.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug366491.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug366491.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug366491.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug404489.js">mailnews/base/test/unit/test_bug404489.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug404489.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug404489.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug404489.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug404489.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug404489.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug428427.js">mailnews/base/test/unit/test_bug428427.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug428427.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug428427.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug428427.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug428427.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug428427.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug434810.js">mailnews/base/test/unit/test_bug434810.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug434810.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug434810.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug434810.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug434810.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug434810.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug465805.js">mailnews/base/test/unit/test_bug465805.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug465805.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug465805.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug465805.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug465805.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug465805.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug471682.js">mailnews/base/test/unit/test_bug471682.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug471682.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug471682.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug471682.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug471682.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_bug471682.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_compactColumnSave.js">mailnews/base/test/unit/test_compactColumnSave.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_compactColumnSave.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_compactColumnSave.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_compactColumnSave.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_compactColumnSave.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_compactColumnSave.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_copyChaining.js">mailnews/base/test/unit/test_copyChaining.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_copyChaining.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_copyChaining.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_copyChaining.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_copyChaining.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_copyChaining.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_copyThenMoveManual.js">mailnews/base/test/unit/test_copyThenMoveManual.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_copyThenMoveManual.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_copyThenMoveManual.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_copyThenMoveManual.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_copyThenMoveManual.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_copyThenMoveManual.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_detachToFile.js">mailnews/base/test/unit/test_detachToFile.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_detachToFile.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_detachToFile.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_detachToFile.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_detachToFile.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_detachToFile.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_emptyTrash.js">mailnews/base/test/unit/test_emptyTrash.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_emptyTrash.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_emptyTrash.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_emptyTrash.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_emptyTrash.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_emptyTrash.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_folderCompact.js">mailnews/base/test/unit/test_folderCompact.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_folderCompact.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_folderCompact.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_folderCompact.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_folderCompact.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_folderCompact.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_getMsgTextFromStream.js">mailnews/base/test/unit/test_getMsgTextFromStream.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_getMsgTextFromStream.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_getMsgTextFromStream.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_getMsgTextFromStream.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_getMsgTextFromStream.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_getMsgTextFromStream.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_inheritedFolderProperties.js">mailnews/base/test/unit/test_inheritedFolderProperties.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_inheritedFolderProperties.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_inheritedFolderProperties.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_inheritedFolderProperties.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_inheritedFolderProperties.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_inheritedFolderProperties.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_loadVirtualFolders.js">mailnews/base/test/unit/test_loadVirtualFolders.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_loadVirtualFolders.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_loadVirtualFolders.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_loadVirtualFolders.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_loadVirtualFolders.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_loadVirtualFolders.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_mimemaltdetach.js">mailnews/base/test/unit/test_mimemaltdetach.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_mimemaltdetach.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_mimemaltdetach.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_mimemaltdetach.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_mimemaltdetach.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_mimemaltdetach.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_nsIMsgFolderListenerLocal.js">mailnews/base/test/unit/test_nsIMsgFolderListenerLocal.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_nsIMsgFolderListenerLocal.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_nsIMsgFolderListenerLocal.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_nsIMsgFolderListenerLocal.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_nsIMsgFolderListenerLocal.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_nsIMsgFolderListenerLocal.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_quarantineFilterMove.js">mailnews/base/test/unit/test_quarantineFilterMove.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_quarantineFilterMove.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_quarantineFilterMove.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_quarantineFilterMove.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_quarantineFilterMove.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_quarantineFilterMove.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_search.js">mailnews/base/test/unit/test_search.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_search.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_search.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_search.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_search.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_search.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchAddressInAb.js">mailnews/base/test/unit/test_searchAddressInAb.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchAddressInAb.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchAddressInAb.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchAddressInAb.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchAddressInAb.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchAddressInAb.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchBody.js">mailnews/base/test/unit/test_searchBody.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchBody.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchBody.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchBody.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchBody.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchBody.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchBoolean.js">mailnews/base/test/unit/test_searchBoolean.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchBoolean.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchBoolean.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchBoolean.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchBoolean.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchBoolean.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchChaining.js">mailnews/base/test/unit/test_searchChaining.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchChaining.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchChaining.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchChaining.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchChaining.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchChaining.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchCustomTerm.js">mailnews/base/test/unit/test_searchCustomTerm.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchCustomTerm.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchCustomTerm.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchCustomTerm.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchCustomTerm.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchCustomTerm.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchJunk.js">mailnews/base/test/unit/test_searchJunk.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchJunk.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchJunk.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchJunk.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchJunk.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchJunk.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchTag.js">mailnews/base/test/unit/test_searchTag.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchTag.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchTag.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchTag.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchTag.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchTag.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchUint32HdrProperty.js">mailnews/base/test/unit/test_searchUint32HdrProperty.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchUint32HdrProperty.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchUint32HdrProperty.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchUint32HdrProperty.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchUint32HdrProperty.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/base/test/unit/test_searchUint32HdrProperty.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/head_compose.js">mailnews/compose/test/unit/head_compose.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/head_compose.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/head_compose.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/head_compose.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/head_compose.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/head_compose.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_attachment.js">mailnews/compose/test/unit/test_attachment.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_attachment.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_attachment.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_attachment.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_attachment.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_attachment.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_bug155172.js">mailnews/compose/test/unit/test_bug155172.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_bug155172.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_bug155172.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_bug155172.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_bug155172.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_bug155172.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_bug235432.js">mailnews/compose/test/unit/test_bug235432.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_bug235432.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_bug235432.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_bug235432.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_bug235432.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_bug235432.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_bug474774.js">mailnews/compose/test/unit/test_bug474774.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_bug474774.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_bug474774.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_bug474774.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_bug474774.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_bug474774.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_detectAttachmentCharset.js">mailnews/compose/test/unit/test_detectAttachmentCharset.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_detectAttachmentCharset.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_detectAttachmentCharset.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_detectAttachmentCharset.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_detectAttachmentCharset.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_detectAttachmentCharset.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_saveDraft.js">mailnews/compose/test/unit/test_saveDraft.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_saveDraft.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_saveDraft.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_saveDraft.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_saveDraft.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_saveDraft.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendBackground.js">mailnews/compose/test/unit/test_sendBackground.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendBackground.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendBackground.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendBackground.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendBackground.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendBackground.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMailAddressIDN.js">mailnews/compose/test/unit/test_sendMailAddressIDN.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMailAddressIDN.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMailAddressIDN.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMailAddressIDN.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMailAddressIDN.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMailAddressIDN.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMailMessage.js">mailnews/compose/test/unit/test_sendMailMessage.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMailMessage.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMailMessage.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMailMessage.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMailMessage.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMailMessage.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageFile.js">mailnews/compose/test/unit/test_sendMessageFile.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageFile.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageFile.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageFile.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageFile.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageFile.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageLater.js">mailnews/compose/test/unit/test_sendMessageLater.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageLater.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageLater.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageLater.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageLater.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageLater.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageLater2.js">mailnews/compose/test/unit/test_sendMessageLater2.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageLater2.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageLater2.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageLater2.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageLater2.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageLater2.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageLater3.js">mailnews/compose/test/unit/test_sendMessageLater3.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageLater3.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageLater3.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageLater3.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageLater3.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_sendMessageLater3.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpAuthMethods.js">mailnews/compose/test/unit/test_smtpAuthMethods.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpAuthMethods.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpAuthMethods.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpAuthMethods.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpAuthMethods.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpAuthMethods.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPassword.js">mailnews/compose/test/unit/test_smtpPassword.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPassword.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPassword.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPassword.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPassword.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPassword.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPassword2.js">mailnews/compose/test/unit/test_smtpPassword2.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPassword2.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPassword2.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPassword2.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPassword2.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPassword2.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPasswordFailure1.js">mailnews/compose/test/unit/test_smtpPasswordFailure1.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPasswordFailure1.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPasswordFailure1.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPasswordFailure1.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPasswordFailure1.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPasswordFailure1.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPasswordFailure2.js">mailnews/compose/test/unit/test_smtpPasswordFailure2.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPasswordFailure2.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPasswordFailure2.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPasswordFailure2.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPasswordFailure2.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPasswordFailure2.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPasswordFailure3.js">mailnews/compose/test/unit/test_smtpPasswordFailure3.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPasswordFailure3.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPasswordFailure3.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPasswordFailure3.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPasswordFailure3.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_smtpPasswordFailure3.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_staleTemporaryFileCleanup.js">mailnews/compose/test/unit/test_staleTemporaryFileCleanup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_staleTemporaryFileCleanup.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_staleTemporaryFileCleanup.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_staleTemporaryFileCleanup.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_staleTemporaryFileCleanup.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_staleTemporaryFileCleanup.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_temporaryFilesRemoved.js">mailnews/compose/test/unit/test_temporaryFilesRemoved.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_temporaryFilesRemoved.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_temporaryFilesRemoved.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_temporaryFilesRemoved.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_temporaryFilesRemoved.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/compose/test/unit/test_temporaryFilesRemoved.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_enumerator_cleanup.js">mailnews/db/msgdb/test/unit/test_enumerator_cleanup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_enumerator_cleanup.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_enumerator_cleanup.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_enumerator_cleanup.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_enumerator_cleanup.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_enumerator_cleanup.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_filter_enumerator.js">mailnews/db/msgdb/test/unit/test_filter_enumerator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_filter_enumerator.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_filter_enumerator.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_filter_enumerator.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_filter_enumerator.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_filter_enumerator.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_maildb.js">mailnews/db/msgdb/test/unit/test_maildb.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_maildb.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_maildb.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_maildb.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_maildb.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_maildb.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_propertyEnumerator.js">mailnews/db/msgdb/test/unit/test_propertyEnumerator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_propertyEnumerator.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_propertyEnumerator.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_propertyEnumerator.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_propertyEnumerator.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_propertyEnumerator.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_references_parsing.js">mailnews/db/msgdb/test/unit/test_references_parsing.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_references_parsing.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_references_parsing.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_references_parsing.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_references_parsing.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/db/msgdb/test/unit/test_references_parsing.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_bug228675.js">mailnews/extensions/bayesian-spam-filter/test/unit/test_bug228675.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_bug228675.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_bug228675.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_bug228675.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_bug228675.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_bug228675.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_customTokenization.js">mailnews/extensions/bayesian-spam-filter/test/unit/test_customTokenization.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_customTokenization.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_customTokenization.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_customTokenization.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_customTokenization.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_customTokenization.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_junkAsTraits.js">mailnews/extensions/bayesian-spam-filter/test/unit/test_junkAsTraits.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_junkAsTraits.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_junkAsTraits.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_junkAsTraits.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_junkAsTraits.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_junkAsTraits.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_traitAliases.js">mailnews/extensions/bayesian-spam-filter/test/unit/test_traitAliases.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_traitAliases.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_traitAliases.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_traitAliases.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_traitAliases.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_traitAliases.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_traits.js">mailnews/extensions/bayesian-spam-filter/test/unit/test_traits.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_traits.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_traits.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_traits.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_traits.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/bayesian-spam-filter/test/unit/test_traits.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/mdn/test/unit/test_askuser.js">mailnews/extensions/mdn/test/unit/test_askuser.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/mdn/test/unit/test_askuser.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/mdn/test/unit/test_askuser.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/mdn/test/unit/test_askuser.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/mdn/test/unit/test_askuser.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/mdn/test/unit/test_askuser.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/mdn/test/unit/test_mdnFlags.js">mailnews/extensions/mdn/test/unit/test_mdnFlags.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/mdn/test/unit/test_mdnFlags.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/mdn/test/unit/test_mdnFlags.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/mdn/test/unit/test_mdnFlags.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/mdn/test/unit/test_mdnFlags.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/extensions/mdn/test/unit/test_mdnFlags.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/head_server.js">mailnews/imap/test/unit/head_server.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/head_server.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/head_server.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/head_server.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/head_server.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/head_server.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_dontStatNoSelect.js">mailnews/imap/test/unit/test_dontStatNoSelect.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_dontStatNoSelect.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_dontStatNoSelect.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_dontStatNoSelect.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_dontStatNoSelect.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_dontStatNoSelect.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_imapFilterActions.js">mailnews/imap/test/unit/test_imapFilterActions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_imapFilterActions.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_imapFilterActions.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_imapFilterActions.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_imapFilterActions.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_imapFilterActions.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_imapHighWater.js">mailnews/imap/test/unit/test_imapHighWater.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_imapHighWater.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_imapHighWater.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_imapHighWater.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_imapHighWater.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_imapHighWater.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_nsIMsgFolderListenerIMAP.js">mailnews/imap/test/unit/test_nsIMsgFolderListenerIMAP.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_nsIMsgFolderListenerIMAP.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_nsIMsgFolderListenerIMAP.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_nsIMsgFolderListenerIMAP.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_nsIMsgFolderListenerIMAP.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_nsIMsgFolderListenerIMAP.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_starttlsFailure.js">mailnews/imap/test/unit/test_starttlsFailure.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_starttlsFailure.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_starttlsFailure.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_starttlsFailure.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_starttlsFailure.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/imap/test/unit/test_starttlsFailure.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/head_maillocal.js">mailnews/local/test/unit/head_maillocal.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/head_maillocal.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/head_maillocal.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/head_maillocal.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/head_maillocal.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/head_maillocal.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_folderLoaded.js">mailnews/local/test/unit/test_folderLoaded.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_folderLoaded.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_folderLoaded.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_folderLoaded.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_folderLoaded.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_folderLoaded.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_movemailDownload.js">mailnews/local/test/unit/test_movemailDownload.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_movemailDownload.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_movemailDownload.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_movemailDownload.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_movemailDownload.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_movemailDownload.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_msgIDParsing.js">mailnews/local/test/unit/test_msgIDParsing.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_msgIDParsing.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_msgIDParsing.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_msgIDParsing.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_msgIDParsing.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_msgIDParsing.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_nsIMsgParseMailMsgState.js">mailnews/local/test/unit/test_nsIMsgParseMailMsgState.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_nsIMsgParseMailMsgState.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_nsIMsgParseMailMsgState.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_nsIMsgParseMailMsgState.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_nsIMsgParseMailMsgState.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_nsIMsgParseMailMsgState.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_over2GBMailboxes.js">mailnews/local/test/unit/test_over2GBMailboxes.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_over2GBMailboxes.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_over2GBMailboxes.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_over2GBMailboxes.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_over2GBMailboxes.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_over2GBMailboxes.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_over4GBMailboxes.js">mailnews/local/test/unit/test_over4GBMailboxes.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_over4GBMailboxes.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_over4GBMailboxes.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_over4GBMailboxes.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_over4GBMailboxes.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_over4GBMailboxes.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3AuthMethods.js">mailnews/local/test/unit/test_pop3AuthMethods.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3AuthMethods.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3AuthMethods.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3AuthMethods.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3AuthMethods.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3AuthMethods.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3FilterActions.js">mailnews/local/test/unit/test_pop3FilterActions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3FilterActions.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3FilterActions.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3FilterActions.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3FilterActions.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3FilterActions.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3GSSAPIFail.js">mailnews/local/test/unit/test_pop3GSSAPIFail.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3GSSAPIFail.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3GSSAPIFail.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3GSSAPIFail.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3GSSAPIFail.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3GSSAPIFail.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3MoveFilter.js">mailnews/local/test/unit/test_pop3MoveFilter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3MoveFilter.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3MoveFilter.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3MoveFilter.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3MoveFilter.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3MoveFilter.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3MoveFilter2.js">mailnews/local/test/unit/test_pop3MoveFilter2.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3MoveFilter2.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3MoveFilter2.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3MoveFilter2.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3MoveFilter2.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3MoveFilter2.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3Password.js">mailnews/local/test/unit/test_pop3Password.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3Password.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3Password.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3Password.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3Password.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3Password.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3Password3.js">mailnews/local/test/unit/test_pop3Password3.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3Password3.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3Password3.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3Password3.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3Password3.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3Password3.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3PasswordFailure.js">mailnews/local/test/unit/test_pop3PasswordFailure.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3PasswordFailure.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3PasswordFailure.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3PasswordFailure.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3PasswordFailure.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3PasswordFailure.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3PasswordFailure2.js">mailnews/local/test/unit/test_pop3PasswordFailure2.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3PasswordFailure2.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3PasswordFailure2.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3PasswordFailure2.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3PasswordFailure2.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3PasswordFailure2.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3PasswordFailure3.js">mailnews/local/test/unit/test_pop3PasswordFailure3.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3PasswordFailure3.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3PasswordFailure3.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3PasswordFailure3.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3PasswordFailure3.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_pop3PasswordFailure3.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_verifyLogon.js">mailnews/local/test/unit/test_verifyLogon.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_verifyLogon.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_verifyLogon.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_verifyLogon.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_verifyLogon.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/local/test/unit/test_verifyLogon.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/mime/test/unit/test_mimeStreaming.js">mailnews/mime/test/unit/test_mimeStreaming.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/mime/test/unit/test_mimeStreaming.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/mime/test/unit/test_mimeStreaming.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/mime/test/unit/test_mimeStreaming.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/mime/test/unit/test_mimeStreaming.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/mime/test/unit/test_mimeStreaming.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/news/test/unit/head_server_setup.js">mailnews/news/test/unit/head_server_setup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/news/test/unit/head_server_setup.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/news/test/unit/head_server_setup.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/news/test/unit/head_server_setup.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/news/test/unit/head_server_setup.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/news/test/unit/head_server_setup.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/news/test/unit/test_nntpPassword3.js">mailnews/news/test/unit/test_nntpPassword3.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/news/test/unit/test_nntpPassword3.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/news/test/unit/test_nntpPassword3.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/news/test/unit/test_nntpPassword3.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/news/test/unit/test_nntpPassword3.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/news/test/unit/test_nntpPassword3.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/test/resources/IMAPpump.js">mailnews/test/resources/IMAPpump.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/test/resources/IMAPpump.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/test/resources/IMAPpump.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/test/resources/IMAPpump.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/test/resources/IMAPpump.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/test/resources/IMAPpump.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/test/resources/POP3pump.js">mailnews/test/resources/POP3pump.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/test/resources/POP3pump.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/test/resources/POP3pump.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/test/resources/POP3pump.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/test/resources/POP3pump.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/test/resources/POP3pump.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/test/resources/localAccountUtils.js">mailnews/test/resources/localAccountUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/test/resources/localAccountUtils.js">file</a> |
<a href="/comm-central/annotate/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/test/resources/localAccountUtils.js">annotate</a> |
<a href="/comm-central/diff/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/test/resources/localAccountUtils.js">diff</a> |
<a href="/comm-central/comparison/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/test/resources/localAccountUtils.js">comparison</a> |
<a href="/comm-central/log/c42b6328a83058d4929b9751ddc7870121b1a7a5/mailnews/test/resources/localAccountUtils.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/components/test/unit/test_about_support.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/components/test/unit/test_about_support.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -66,31 +66,32 @@ let gSMTPMap = {};</span>
<a href="#l1.4"></a><span id="l1.4">  */</span>
<a href="#l1.5"></a><span id="l1.5"> let gSensitiveData = [];</span>
<a href="#l1.6"></a><span id="l1.6"> </span>
<a href="#l1.7"></a><span id="l1.7"> /**</span>
<a href="#l1.8"></a><span id="l1.8">  * Set up accounts based on the given data.</span>
<a href="#l1.9"></a><span id="l1.9">  */</span>
<a href="#l1.10"></a><span id="l1.10"> function setup_accounts() {</span>
<a href="#l1.11"></a><span id="l1.11">   // First make sure the local folders account is set up.</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l1.14"></a><span id="l1.14"> </span>
<a href="#l1.15"></a><span id="l1.15">   // Now run through the details and set up accounts accordingly.</span>
<a href="#l1.16"></a><span id="l1.16">   for (let [, details] in Iterator(gAccountList)) {</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineminus">-    let server = create_incoming_server(details.type, details.port,</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineminus">-                                        details.user, details.password);</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineplus">+    let server = localAccountUtils.create_incoming_server(details.type, details.port,</span>
<a href="#l1.20"></a><span id="l1.20" class="difflineplus">+							  details.user, details.password);</span>
<a href="#l1.21"></a><span id="l1.21">     server.socketType = details.socketType;</span>
<a href="#l1.22"></a><span id="l1.22">     server.authMethod = details.authMethod;</span>
<a href="#l1.23"></a><span id="l1.23">     gSensitiveData.push(details.password);</span>
<a href="#l1.24"></a><span id="l1.24">     for (let [, smtpDetails] in Iterator(details.smtpServers)) {</span>
<a href="#l1.25"></a><span id="l1.25" class="difflineminus">-      let outgoing = create_outgoing_server(smtpDetails.port, smtpDetails.user,</span>
<a href="#l1.26"></a><span id="l1.26" class="difflineminus">-                                            smtpDetails.password);</span>
<a href="#l1.27"></a><span id="l1.27" class="difflineplus">+      let outgoing = localAccountUtils.create_outgoing_server(smtpDetails.port,</span>
<a href="#l1.28"></a><span id="l1.28" class="difflineplus">+							      smtpDetails.user,</span>
<a href="#l1.29"></a><span id="l1.29" class="difflineplus">+							      smtpDetails.password);</span>
<a href="#l1.30"></a><span id="l1.30">       outgoing.socketType = smtpDetails.socketType;</span>
<a href="#l1.31"></a><span id="l1.31">       outgoing.authMethod = smtpDetails.authMethod;</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineminus">-      associate_servers(server, outgoing, smtpDetails.isDefault);</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineplus">+      localAccountUtils.associate_servers(server, outgoing, smtpDetails.isDefault);</span>
<a href="#l1.34"></a><span id="l1.34">       gSensitiveData.push(smtpDetails.password);</span>
<a href="#l1.35"></a><span id="l1.35"> </span>
<a href="#l1.36"></a><span id="l1.36">       // Add the SMTP server to our server name -&gt; server map</span>
<a href="#l1.37"></a><span id="l1.37">       gSMTPMap[&quot;localhost:&quot; + smtpDetails.port] = smtpDetails;</span>
<a href="#l1.38"></a><span id="l1.38">     }</span>
<a href="#l1.39"></a><span id="l1.39"> </span>
<a href="#l1.40"></a><span id="l1.40">     // Add the server to our account -&gt; server map</span>
<a href="#l1.41"></a><span id="l1.41">     let account = MailServices.accounts.FindAccountForServer(server);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mailnews/base/test/unit/test_bccInDatabase.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_bccInDatabase.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -7,17 +7,17 @@</span>
<a href="#l2.4"></a><span id="l2.4">  */</span>
<a href="#l2.5"></a><span id="l2.5"> </span>
<a href="#l2.6"></a><span id="l2.6"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8"> var hdr;</span>
<a href="#l2.9"></a><span id="l2.9"> </span>
<a href="#l2.10"></a><span id="l2.10"> function run_test()</span>
<a href="#l2.11"></a><span id="l2.11"> {</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l2.14"></a><span id="l2.14"> </span>
<a href="#l2.15"></a><span id="l2.15">   var copyListener = </span>
<a href="#l2.16"></a><span id="l2.16">   {</span>
<a href="#l2.17"></a><span id="l2.17">     OnStartCopy: function() {},</span>
<a href="#l2.18"></a><span id="l2.18">     OnProgress: function(aProgress, aProgressMax) {},</span>
<a href="#l2.19"></a><span id="l2.19">     SetMessageKey: function(aKey) { hdr = gLocalInboxFolder.GetMessageHeader(aKey);},</span>
<a href="#l2.20"></a><span id="l2.20">     SetMessageId: function(aMessageId) {},</span>
<a href="#l2.21"></a><span id="l2.21">     OnStopCopy: function(aStatus) { continueTest();}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mailnews/base/test/unit/test_bug366491.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_bug366491.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -38,17 +38,17 @@ var emails =</span>
<a href="#l3.4"></a><span id="l3.4">    classification: kGood},</span>
<a href="#l3.5"></a><span id="l3.5">   {fileName: &quot;spam1.eml&quot;,</span>
<a href="#l3.6"></a><span id="l3.6">    classification: kJunk},</span>
<a href="#l3.7"></a><span id="l3.7"> ];</span>
<a href="#l3.8"></a><span id="l3.8"> </span>
<a href="#l3.9"></a><span id="l3.9"> // main test</span>
<a href="#l3.10"></a><span id="l3.10"> function run_test()</span>
<a href="#l3.11"></a><span id="l3.11"> {</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l3.14"></a><span id="l3.14">   do_test_pending();</span>
<a href="#l3.15"></a><span id="l3.15">   doTestingListener.onMessageClassified(null, null, null);</span>
<a href="#l3.16"></a><span id="l3.16">   return true;</span>
<a href="#l3.17"></a><span id="l3.17"> };</span>
<a href="#l3.18"></a><span id="l3.18"> </span>
<a href="#l3.19"></a><span id="l3.19"> var haveClassification = false;</span>
<a href="#l3.20"></a><span id="l3.20"> var doTestingListener = </span>
<a href="#l3.21"></a><span id="l3.21"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mailnews/base/test/unit/test_bug404489.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_bug404489.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -53,17 +53,17 @@ var Tests =</span>
<a href="#l4.4"></a><span id="l4.4">   { testValue: &quot;bugzilla&quot;,</span>
<a href="#l4.5"></a><span id="l4.5">     attrib: Ci.nsMsgSearchAttrib.Sender,</span>
<a href="#l4.6"></a><span id="l4.6">     op: Contains,</span>
<a href="#l4.7"></a><span id="l4.7">     count: 1}</span>
<a href="#l4.8"></a><span id="l4.8"> ];</span>
<a href="#l4.9"></a><span id="l4.9"> </span>
<a href="#l4.10"></a><span id="l4.10"> function run_test()</span>
<a href="#l4.11"></a><span id="l4.11"> {</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l4.14"></a><span id="l4.14"> </span>
<a href="#l4.15"></a><span id="l4.15">   // add the custom headers into the preferences file, &quot;:&quot; delimited</span>
<a href="#l4.16"></a><span id="l4.16"> </span>
<a href="#l4.17"></a><span id="l4.17">   var hdrs;</span>
<a href="#l4.18"></a><span id="l4.18">   if (gArrayHdrs.length == 1)</span>
<a href="#l4.19"></a><span id="l4.19">     hdrs = gArrayHdrs;</span>
<a href="#l4.20"></a><span id="l4.20">   else</span>
<a href="#l4.21"></a><span id="l4.21">     hdrs = gArrayHdrs.join(&quot;: &quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mailnews/base/test/unit/test_bug428427.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_bug428427.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -18,18 +18,17 @@ var hdrs = [];</span>
<a href="#l5.4"></a><span id="l5.4"> // how many identical messages to load</span>
<a href="#l5.5"></a><span id="l5.5"> var messageCount = 5;</span>
<a href="#l5.6"></a><span id="l5.6"> </span>
<a href="#l5.7"></a><span id="l5.7"> // tag used with test messages</span>
<a href="#l5.8"></a><span id="l5.8"> var tag1 = &quot;istag&quot;;</span>
<a href="#l5.9"></a><span id="l5.9"> </span>
<a href="#l5.10"></a><span id="l5.10"> function run_test()</span>
<a href="#l5.11"></a><span id="l5.11"> {</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l5.15"></a><span id="l5.15">     </span>
<a href="#l5.16"></a><span id="l5.16">   // Get messageCount messages into the local filestore.</span>
<a href="#l5.17"></a><span id="l5.17">   do_test_pending();</span>
<a href="#l5.18"></a><span id="l5.18"> </span>
<a href="#l5.19"></a><span id="l5.19">   // function setupVirtualFolder() continues the testing after CopyFileMessage.</span>
<a href="#l5.20"></a><span id="l5.20">   MailServices.copy.CopyFileMessage(bugmail1, gLocalInboxFolder, null, false, 0,</span>
<a href="#l5.21"></a><span id="l5.21">                                     &quot;&quot;, copyListener, null);</span>
<a href="#l5.22"></a><span id="l5.22">   return true;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mailnews/base/test/unit/test_bug434810.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_bug434810.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -3,17 +3,17 @@</span>
<a href="#l6.4"></a><span id="l6.4">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l6.5"></a><span id="l6.5">  </span>
<a href="#l6.6"></a><span id="l6.6"> // Test of setup of localMailFolders</span>
<a href="#l6.7"></a><span id="l6.7"> </span>
<a href="#l6.8"></a><span id="l6.8"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l6.9"></a><span id="l6.9"> </span>
<a href="#l6.10"></a><span id="l6.10"> function run_test()</span>
<a href="#l6.11"></a><span id="l6.11"> {</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l6.14"></a><span id="l6.14"> </span>
<a href="#l6.15"></a><span id="l6.15">   var rootFolder = gLocalIncomingServer.rootFolder;</span>
<a href="#l6.16"></a><span id="l6.16"> </span>
<a href="#l6.17"></a><span id="l6.17">   var msgProps = Services.strings.createBundle(&quot;chrome://messenger/locale/messenger.properties&quot;);</span>
<a href="#l6.18"></a><span id="l6.18"> </span>
<a href="#l6.19"></a><span id="l6.19">   var expectedFolders = [ &quot;Inbox&quot; ]; // Inbox hard-coded in localAccountUtils.js</span>
<a href="#l6.20"></a><span id="l6.20"> </span>
<a href="#l6.21"></a><span id="l6.21">   // These two MailNews adds by default</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mailnews/base/test/unit/test_bug465805.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_bug465805.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -34,18 +34,17 @@ var Tests =</span>
<a href="#l7.4"></a><span id="l7.4">     attrib: Body,</span>
<a href="#l7.5"></a><span id="l7.5">     op: Contains,</span>
<a href="#l7.6"></a><span id="l7.6">     count: 1 },</span>
<a href="#l7.7"></a><span id="l7.7"> ]</span>
<a href="#l7.8"></a><span id="l7.8"> </span>
<a href="#l7.9"></a><span id="l7.9"> function run_test()</span>
<a href="#l7.10"></a><span id="l7.10"> {</span>
<a href="#l7.11"></a><span id="l7.11">   // Setup local mail accounts.</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l7.15"></a><span id="l7.15"> </span>
<a href="#l7.16"></a><span id="l7.16">   // Get a message into the local filestore. function testBodySearch() continues the testing after the copy.</span>
<a href="#l7.17"></a><span id="l7.17">   do_test_pending();</span>
<a href="#l7.18"></a><span id="l7.18">   copyListener.OnStopCopy(null);</span>
<a href="#l7.19"></a><span id="l7.19">   return true;</span>
<a href="#l7.20"></a><span id="l7.20"> }</span>
<a href="#l7.21"></a><span id="l7.21"> </span>
<a href="#l7.22"></a><span id="l7.22"> var copyListener = </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mailnews/base/test/unit/test_bug471682.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_bug471682.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -8,17 +8,17 @@</span>
<a href="#l8.4"></a><span id="l8.4">  * then compare the date and filesize of the folder file with the</span>
<a href="#l8.5"></a><span id="l8.5">  * stored result in dbfolderinfo. If they don't match, that's bad.</span>
<a href="#l8.6"></a><span id="l8.6">  */</span>
<a href="#l8.7"></a><span id="l8.7"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l8.8"></a><span id="l8.8"> </span>
<a href="#l8.9"></a><span id="l8.9"> const bugmail1 = do_get_file(&quot;../../../data/bugmail1&quot;);</span>
<a href="#l8.10"></a><span id="l8.10"> var gHdr; // header of test message in local folder</span>
<a href="#l8.11"></a><span id="l8.11"> </span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-loadLocalMailAccount();</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+localAccountUtils.loadLocalMailAccount();</span>
<a href="#l8.14"></a><span id="l8.14"> // create a subfolder as a target for copies</span>
<a href="#l8.15"></a><span id="l8.15"> var gSubfolder = gLocalInboxFolder.createLocalSubfolder(&quot;subfolder&quot;);</span>
<a href="#l8.16"></a><span id="l8.16"> </span>
<a href="#l8.17"></a><span id="l8.17"> function run_test()</span>
<a href="#l8.18"></a><span id="l8.18"> {</span>
<a href="#l8.19"></a><span id="l8.19">   // make sure we're using berkeley mailbox format here since this test</span>
<a href="#l8.20"></a><span id="l8.20">   // assumes berkeley mailbox format.</span>
<a href="#l8.21"></a><span id="l8.21">   if (Services.prefs.getCharPref(&quot;mail.serverDefaultStoreContractID&quot;) !=</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mailnews/base/test/unit/test_compactColumnSave.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_compactColumnSave.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -141,17 +141,17 @@ const gTestArray =</span>
<a href="#l9.4"></a><span id="l9.4">   function checkAfterCompact()</span>
<a href="#l9.5"></a><span id="l9.5">   {</span>
<a href="#l9.6"></a><span id="l9.6">     checkPersistentState(gLocalFolder2);</span>
<a href="#l9.7"></a><span id="l9.7">   },</span>
<a href="#l9.8"></a><span id="l9.8"> ];</span>
<a href="#l9.9"></a><span id="l9.9"> </span>
<a href="#l9.10"></a><span id="l9.10"> function run_test()</span>
<a href="#l9.11"></a><span id="l9.11"> {</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l9.14"></a><span id="l9.14">   // Load up some messages so that we can copy them in later.</span>
<a href="#l9.15"></a><span id="l9.15">   gMsgFile1 = do_get_file(&quot;../../../data/bugmail10&quot;);</span>
<a href="#l9.16"></a><span id="l9.16">   gMsgFile2 = do_get_file(&quot;../../../data/bugmail11&quot;);</span>
<a href="#l9.17"></a><span id="l9.17">   gMsgFile3 = do_get_file(&quot;../../../data/draft1&quot;);</span>
<a href="#l9.18"></a><span id="l9.18"> </span>
<a href="#l9.19"></a><span id="l9.19">   // Create another folder to move and copy messages around, and force initialization.</span>
<a href="#l9.20"></a><span id="l9.20">   gLocalFolder2 = gLocalRootFolder.createLocalSubfolder(&quot;folder2&quot;);</span>
<a href="#l9.21"></a><span id="l9.21">   let folderName = gLocalFolder2.prettiestName;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mailnews/base/test/unit/test_copyChaining.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_copyChaining.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -45,18 +45,17 @@ function CopyNextMessage()</span>
<a href="#l10.4"></a><span id="l10.4">                                    copyListener, null, false);</span>
<a href="#l10.5"></a><span id="l10.5">   }</span>
<a href="#l10.6"></a><span id="l10.6">   else</span>
<a href="#l10.7"></a><span id="l10.7">     do_throw ('TEST FAILED - out of messages');</span>
<a href="#l10.8"></a><span id="l10.8"> }</span>
<a href="#l10.9"></a><span id="l10.9"> </span>
<a href="#l10.10"></a><span id="l10.10"> function run_test()</span>
<a href="#l10.11"></a><span id="l10.11"> {</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l10.15"></a><span id="l10.15">   let messageGenerator = new MessageGenerator();</span>
<a href="#l10.16"></a><span id="l10.16">   let scenarioFactory = new MessageScenarioFactory(messageGenerator);</span>
<a href="#l10.17"></a><span id="l10.17"> </span>
<a href="#l10.18"></a><span id="l10.18">   // &quot;Master&quot; do_test_pending(), paired with a do_test_finished() at the end of</span>
<a href="#l10.19"></a><span id="l10.19">   // all the operations.</span>
<a href="#l10.20"></a><span id="l10.20">   do_test_pending();</span>
<a href="#l10.21"></a><span id="l10.21"> </span>
<a href="#l10.22"></a><span id="l10.22">   gCopyDest = gLocalInboxFolder.createLocalSubfolder(&quot;copyDest&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mailnews/base/test/unit/test_copyThenMoveManual.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_copyThenMoveManual.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -101,17 +101,17 @@ function folderCount(folder)</span>
<a href="#l11.4"></a><span id="l11.4">     let hdr = enumerator.getNext();</span>
<a href="#l11.5"></a><span id="l11.5">   }</span>
<a href="#l11.6"></a><span id="l11.6">   return count;</span>
<a href="#l11.7"></a><span id="l11.7"> }</span>
<a href="#l11.8"></a><span id="l11.8"> </span>
<a href="#l11.9"></a><span id="l11.9"> function run_test()</span>
<a href="#l11.10"></a><span id="l11.10"> {</span>
<a href="#l11.11"></a><span id="l11.11">   if (!gLocalInboxFolder)</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-    loadLocalMailAccount();</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+    localAccountUtils.loadLocalMailAccount();</span>
<a href="#l11.14"></a><span id="l11.14"> </span>
<a href="#l11.15"></a><span id="l11.15">   gCopyFolder = gLocalIncomingServer.rootFolder.createLocalSubfolder(&quot;CopyFolder&quot;);</span>
<a href="#l11.16"></a><span id="l11.16">   gMoveFolder = gLocalIncomingServer.rootFolder.createLocalSubfolder(&quot;MoveFolder&quot;);</span>
<a href="#l11.17"></a><span id="l11.17"> </span>
<a href="#l11.18"></a><span id="l11.18">   MailServices.mailSession.AddFolderListener(FolderListener, Ci.nsIFolderListener.event |</span>
<a href="#l11.19"></a><span id="l11.19">                                                              Ci.nsIFolderListener.added |</span>
<a href="#l11.20"></a><span id="l11.20">                                                              Ci.nsIFolderListener.removed);</span>
<a href="#l11.21"></a><span id="l11.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mailnews/base/test/unit/test_detachToFile.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_detachToFile.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -87,17 +87,17 @@ SaveAttachmentCallback.prototype = {</span>
<a href="#l12.4"></a><span id="l12.4">     async_driver();</span>
<a href="#l12.5"></a><span id="l12.5">   }</span>
<a href="#l12.6"></a><span id="l12.6"> }</span>
<a href="#l12.7"></a><span id="l12.7"> let gCallbackObject = new SaveAttachmentCallback();</span>
<a href="#l12.8"></a><span id="l12.8"> </span>
<a href="#l12.9"></a><span id="l12.9"> function run_test()</span>
<a href="#l12.10"></a><span id="l12.10"> {</span>
<a href="#l12.11"></a><span id="l12.11">   if (!gLocalInboxFolder)</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-    loadLocalMailAccount();</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+    localAccountUtils.loadLocalMailAccount();</span>
<a href="#l12.14"></a><span id="l12.14">   async_run_tests(tests);</span>
<a href="#l12.15"></a><span id="l12.15"> }</span>
<a href="#l12.16"></a><span id="l12.16"> </span>
<a href="#l12.17"></a><span id="l12.17"> /*</span>
<a href="#l12.18"></a><span id="l12.18">  * Get the full message content.</span>
<a href="#l12.19"></a><span id="l12.19">  *</span>
<a href="#l12.20"></a><span id="l12.20">  * aMsgHdr: nsIMsgDBHdr object whose text body will be read</span>
<a href="#l12.21"></a><span id="l12.21">  *          returns: string with full message contents</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mailnews/base/test/unit/test_emptyTrash.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_emptyTrash.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -126,17 +126,17 @@ gMFListener.prototype =</span>
<a href="#l13.4"></a><span id="l13.4">   folderDeleted: function (aFolder)</span>
<a href="#l13.5"></a><span id="l13.5">   {</span>
<a href="#l13.6"></a><span id="l13.6">     aFolder.msgDatabase = null;</span>
<a href="#l13.7"></a><span id="l13.7">   },</span>
<a href="#l13.8"></a><span id="l13.8"> };</span>
<a href="#l13.9"></a><span id="l13.9"> </span>
<a href="#l13.10"></a><span id="l13.10"> function run_test()</span>
<a href="#l13.11"></a><span id="l13.11"> {</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l13.14"></a><span id="l13.14">   // Load up a message so that we can copy it in later.</span>
<a href="#l13.15"></a><span id="l13.15">   gMsgFile1 = do_get_file(&quot;../../../data/bugmail10&quot;);</span>
<a href="#l13.16"></a><span id="l13.16">   // our front end code clears the msg db when it gets told the folder for</span>
<a href="#l13.17"></a><span id="l13.17">   // an open view has been deleted - so simulate that.</span>
<a href="#l13.18"></a><span id="l13.18">   var folderDeletedListener = new gMFListener();</span>
<a href="#l13.19"></a><span id="l13.19">   MailServices.mfn.addListener(folderDeletedListener, nsIMFNService.folderDeleted);</span>
<a href="#l13.20"></a><span id="l13.20"> </span>
<a href="#l13.21"></a><span id="l13.21">   // &quot;Master&quot; do_test_pending(), paired with a do_test_finished() at the end of all the operations.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mailnews/base/test/unit/test_folderCompact.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_folderCompact.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -197,17 +197,17 @@ const gTestArray =</span>
<a href="#l14.4"></a><span id="l14.4">     verifyMsgOffsets(gLocalFolder3);</span>
<a href="#l14.5"></a><span id="l14.5">     verifyMsgOffsets(gLocalInboxFolder);</span>
<a href="#l14.6"></a><span id="l14.6">     urlListener.OnStopRunningUrl(null, 0);</span>
<a href="#l14.7"></a><span id="l14.7">   }</span>
<a href="#l14.8"></a><span id="l14.8"> ];</span>
<a href="#l14.9"></a><span id="l14.9"> </span>
<a href="#l14.10"></a><span id="l14.10"> function run_test()</span>
<a href="#l14.11"></a><span id="l14.11"> {</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l14.14"></a><span id="l14.14">   // Load up some messages so that we can copy them in later.</span>
<a href="#l14.15"></a><span id="l14.15">   gMsgFile1 = do_get_file(&quot;../../../data/bugmail10&quot;);</span>
<a href="#l14.16"></a><span id="l14.16">   gMsgFile2 = do_get_file(&quot;../../../data/bugmail11&quot;);</span>
<a href="#l14.17"></a><span id="l14.17">   gMsgFile3 = do_get_file(&quot;../../../data/draft1&quot;);</span>
<a href="#l14.18"></a><span id="l14.18"> </span>
<a href="#l14.19"></a><span id="l14.19">   // Create another folder to move and copy messages around, and force initialization.</span>
<a href="#l14.20"></a><span id="l14.20">   gLocalFolder2 = gLocalRootFolder.createLocalSubfolder(&quot;folder2&quot;);</span>
<a href="#l14.21"></a><span id="l14.21">   let folderName = gLocalFolder2.prettiestName;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mailnews/base/test/unit/test_getMsgTextFromStream.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_getMsgTextFromStream.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -48,17 +48,17 @@ const gTestFiles =</span>
<a href="#l15.4"></a><span id="l15.4">   create(&quot;multipart-base64-3&quot;, 1024, false, true, &quot;text/html&quot;),</span>
<a href="#l15.5"></a><span id="l15.5">   create(&quot;multipart-complex1&quot;, 1024, false, true, &quot;text/html&quot;), // Things get more complex here</span>
<a href="#l15.6"></a><span id="l15.6">   create(&quot;multipart-complex2&quot;, 1024, false, false, &quot;text/plain&quot;),</span>
<a href="#l15.7"></a><span id="l15.7">   create(&quot;multipart-complex2&quot;, 1024, false, true, &quot;text/plain&quot;),</span>
<a href="#l15.8"></a><span id="l15.8"> ]</span>
<a href="#l15.9"></a><span id="l15.9"> </span>
<a href="#l15.10"></a><span id="l15.10"> function run_test()</span>
<a href="#l15.11"></a><span id="l15.11"> {</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l15.14"></a><span id="l15.14">   var folder = gLocalIncomingServer.rootMsgFolder;</span>
<a href="#l15.15"></a><span id="l15.15"> </span>
<a href="#l15.16"></a><span id="l15.16">   gTestFiles.forEach(function (test)</span>
<a href="#l15.17"></a><span id="l15.17">   {</span>
<a href="#l15.18"></a><span id="l15.18">     dump(&quot;Testing &quot;+test.name+&quot;\n&quot;);</span>
<a href="#l15.19"></a><span id="l15.19">     var inFile = do_get_file(kDataRoot + test.name);</span>
<a href="#l15.20"></a><span id="l15.20">     var inStream = Cc[&quot;@mozilla.org/network/file-input-stream;1&quot;]</span>
<a href="#l15.21"></a><span id="l15.21">                      .createInstance(Ci.nsIFileInputStream);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mailnews/base/test/unit/test_inheritedFolderProperties.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_inheritedFolderProperties.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -3,17 +3,17 @@</span>
<a href="#l16.4"></a><span id="l16.4">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l16.5"></a><span id="l16.5"> </span>
<a href="#l16.6"></a><span id="l16.6"> /*</span>
<a href="#l16.7"></a><span id="l16.7">  * Testing of inherited folder properties</span>
<a href="#l16.8"></a><span id="l16.8">  */</span>
<a href="#l16.9"></a><span id="l16.9"> </span>
<a href="#l16.10"></a><span id="l16.10"> function run_test()</span>
<a href="#l16.11"></a><span id="l16.11"> { </span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l16.14"></a><span id="l16.14">   var rootFolder = gLocalIncomingServer.rootMsgFolder;</span>
<a href="#l16.15"></a><span id="l16.15"> </span>
<a href="#l16.16"></a><span id="l16.16">   // add subfolders to the inbox</span>
<a href="#l16.17"></a><span id="l16.17">   const subFolder11 = gLocalInboxFolder.createLocalSubfolder(&quot;subfolder11&quot;)</span>
<a href="#l16.18"></a><span id="l16.18">                          .QueryInterface(Ci.nsIMsgLocalMailFolder);</span>
<a href="#l16.19"></a><span id="l16.19">   const subFolder12 = gLocalInboxFolder.createLocalSubfolder(&quot;subfolder12&quot;)</span>
<a href="#l16.20"></a><span id="l16.20">                          .QueryInterface(Ci.nsIMsgLocalMailFolder);</span>
<a href="#l16.21"></a><span id="l16.21">   const subFolder21 = subFolder11.createLocalSubfolder(&quot;subfolder21&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mailnews/base/test/unit/test_loadVirtualFolders.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_loadVirtualFolders.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -13,17 +13,17 @@ Services.prefs.setCharPref(&quot;mail.serverD</span>
<a href="#l17.4"></a><span id="l17.4"> </span>
<a href="#l17.5"></a><span id="l17.5"> // main test</span>
<a href="#l17.6"></a><span id="l17.6"> </span>
<a href="#l17.7"></a><span id="l17.7"> function run_test()</span>
<a href="#l17.8"></a><span id="l17.8"> {</span>
<a href="#l17.9"></a><span id="l17.9">   let vfdat = do_get_file(&quot;../../../data/test_virtualFolders.dat&quot;);</span>
<a href="#l17.10"></a><span id="l17.10"> </span>
<a href="#l17.11"></a><span id="l17.11">   vfdat.copyTo(gProfileDir, &quot;virtualFolders.dat&quot;);</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l17.14"></a><span id="l17.14">   let localMailDir = gProfileDir.clone();</span>
<a href="#l17.15"></a><span id="l17.15">   localMailDir.append(&quot;Mail&quot;);</span>
<a href="#l17.16"></a><span id="l17.16">   localMailDir.append(&quot;Local Folders&quot;);</span>
<a href="#l17.17"></a><span id="l17.17">   localMailDir.append(&quot;unread-local&quot;);</span>
<a href="#l17.18"></a><span id="l17.18">   localMailDir.create(Ci.nsIFile.NORMAL_FILE_TYPE, parseInt(&quot;0644&quot;, 8));</span>
<a href="#l17.19"></a><span id="l17.19">   localMailDir.leafName = &quot;invalidserver-local&quot;;</span>
<a href="#l17.20"></a><span id="l17.20">   localMailDir.create(Ci.nsIFile.NORMAL_FILE_TYPE, parseInt(&quot;0644&quot;, 8));</span>
<a href="#l17.21"></a><span id="l17.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mailnews/base/test/unit/test_mimemaltdetach.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_mimemaltdetach.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -91,17 +91,17 @@ SaveAttachmentCallback.prototype = {</span>
<a href="#l18.4"></a><span id="l18.4">     async_driver();</span>
<a href="#l18.5"></a><span id="l18.5">   }</span>
<a href="#l18.6"></a><span id="l18.6"> }</span>
<a href="#l18.7"></a><span id="l18.7"> let gCallbackObject = new SaveAttachmentCallback();</span>
<a href="#l18.8"></a><span id="l18.8"> </span>
<a href="#l18.9"></a><span id="l18.9"> function run_test()</span>
<a href="#l18.10"></a><span id="l18.10"> {</span>
<a href="#l18.11"></a><span id="l18.11">   if (!gLocalInboxFolder)</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-    loadLocalMailAccount();</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+    localAccountUtils.loadLocalMailAccount();</span>
<a href="#l18.14"></a><span id="l18.14">   async_run_tests(tests);</span>
<a href="#l18.15"></a><span id="l18.15"> }</span>
<a href="#l18.16"></a><span id="l18.16"> </span>
<a href="#l18.17"></a><span id="l18.17"> /*</span>
<a href="#l18.18"></a><span id="l18.18">  * Get the full message content.</span>
<a href="#l18.19"></a><span id="l18.19">  *</span>
<a href="#l18.20"></a><span id="l18.20">  * aMsgHdr: nsIMsgDBHdr object whose text body will be read</span>
<a href="#l18.21"></a><span id="l18.21">  *          returns: string with full message contents</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mailnews/base/test/unit/test_nsIMsgFolderListenerLocal.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_nsIMsgFolderListenerLocal.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -277,17 +277,17 @@ const gTestArray =</span>
<a href="#l19.4"></a><span id="l19.4">   // Inbox</span>
<a href="#l19.5"></a><span id="l19.5">   // Trash</span>
<a href="#l19.6"></a><span id="l19.6"> </span>
<a href="#l19.7"></a><span id="l19.7"> function run_test()</span>
<a href="#l19.8"></a><span id="l19.8"> {</span>
<a href="#l19.9"></a><span id="l19.9">   // Add a listener.</span>
<a href="#l19.10"></a><span id="l19.10">   gMFNService.addListener(gMFListener, allTestedEvents);</span>
<a href="#l19.11"></a><span id="l19.11"> </span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l19.14"></a><span id="l19.14"> </span>
<a href="#l19.15"></a><span id="l19.15">   // Load up some messages so that we can copy them in later.</span>
<a href="#l19.16"></a><span id="l19.16">   gMsgFile1 = do_get_file(&quot;../../../data/bugmail10&quot;);</span>
<a href="#l19.17"></a><span id="l19.17">   gMsgFile2 = do_get_file(&quot;../../../data/bugmail11&quot;);</span>
<a href="#l19.18"></a><span id="l19.18">   gMsgFile3 = do_get_file(&quot;../../../data/draft1&quot;);</span>
<a href="#l19.19"></a><span id="l19.19"> </span>
<a href="#l19.20"></a><span id="l19.20">   // &quot;Trash&quot; folder</span>
<a href="#l19.21"></a><span id="l19.21">   gRootFolder = gLocalIncomingServer.rootMsgFolder;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mailnews/base/test/unit/test_quarantineFilterMove.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_quarantineFilterMove.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -108,17 +108,17 @@ function run_test()</span>
<a href="#l20.4"></a><span id="l20.4">   /* may not work in Linux */</span>
<a href="#l20.5"></a><span id="l20.5">   //if (&quot;@mozilla.org/gnome-gconf-service;1&quot; in Cc)</span>
<a href="#l20.6"></a><span id="l20.6">   //  return;</span>
<a href="#l20.7"></a><span id="l20.7">   /**/</span>
<a href="#l20.8"></a><span id="l20.8"> </span>
<a href="#l20.9"></a><span id="l20.9">   // quarantine messages</span>
<a href="#l20.10"></a><span id="l20.10">   Services.prefs.setBoolPref(&quot;mailnews.downloadToTempFile&quot;, true);</span>
<a href="#l20.11"></a><span id="l20.11">   if (!gLocalInboxFolder)</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-    loadLocalMailAccount();</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+    localAccountUtils.loadLocalMailAccount();</span>
<a href="#l20.14"></a><span id="l20.14"> </span>
<a href="#l20.15"></a><span id="l20.15">   gMoveFolder = gLocalIncomingServer.rootMsgFolder</span>
<a href="#l20.16"></a><span id="l20.16">                   .createLocalSubfolder(&quot;MoveFolder&quot;);</span>
<a href="#l20.17"></a><span id="l20.17">   gMoveFolder2 = gLocalIncomingServer.rootMsgFolder</span>
<a href="#l20.18"></a><span id="l20.18">                   .createLocalSubfolder(&quot;MoveFolder2&quot;);</span>
<a href="#l20.19"></a><span id="l20.19"> </span>
<a href="#l20.20"></a><span id="l20.20">   MailServices.mailSession.AddFolderListener(FolderListener, Ci.nsIFolderListener.event |</span>
<a href="#l20.21"></a><span id="l20.21">                                                              Ci.nsIFolderListener.added |</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mailnews/base/test/unit/test_search.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_search.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -227,17 +227,17 @@ var Tests =</span>
<a href="#l21.4"></a><span id="l21.4">     { testString: Ci.nsMsgPriority.low,</span>
<a href="#l21.5"></a><span id="l21.5">       testAttribute: Priority,</span>
<a href="#l21.6"></a><span id="l21.6">       op: Isnt,</span>
<a href="#l21.7"></a><span id="l21.7">       count: 0},</span>
<a href="#l21.8"></a><span id="l21.8"> ];</span>
<a href="#l21.9"></a><span id="l21.9"> </span>
<a href="#l21.10"></a><span id="l21.10"> function run_test()</span>
<a href="#l21.11"></a><span id="l21.11"> {</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l21.14"></a><span id="l21.14"> </span>
<a href="#l21.15"></a><span id="l21.15">   var copyListener = </span>
<a href="#l21.16"></a><span id="l21.16">   {</span>
<a href="#l21.17"></a><span id="l21.17">     OnStartCopy: function() {},</span>
<a href="#l21.18"></a><span id="l21.18">     OnProgress: function(aProgress, aProgressMax) {},</span>
<a href="#l21.19"></a><span id="l21.19">     SetMessageKey: function(aKey) {},</span>
<a href="#l21.20"></a><span id="l21.20">     SetMessageId: function(aMessageId) {},</span>
<a href="#l21.21"></a><span id="l21.21">     OnStopCopy: function(aStatus) { testSearch();}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mailnews/base/test/unit/test_searchAddressInAb.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_searchAddressInAb.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -111,18 +111,17 @@ var Files =</span>
<a href="#l22.4"></a><span id="l22.4">   &quot;../../../data/bugmail8&quot;</span>
<a href="#l22.5"></a><span id="l22.5"> ]</span>
<a href="#l22.6"></a><span id="l22.6"> </span>
<a href="#l22.7"></a><span id="l22.7"> var messageKey, hdr;</span>
<a href="#l22.8"></a><span id="l22.8"> </span>
<a href="#l22.9"></a><span id="l22.9"> function run_test()</span>
<a href="#l22.10"></a><span id="l22.10"> {</span>
<a href="#l22.11"></a><span id="l22.11">   // Setup local mail accounts.</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l22.14"></a><span id="l22.14" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l22.15"></a><span id="l22.15">     </span>
<a href="#l22.16"></a><span id="l22.16">     // Test setup - copy the data file into place</span>
<a href="#l22.17"></a><span id="l22.17">   var testAB = do_get_file(&quot;../../../addrbook/test/unit/data/cardForEmail.mab&quot;);</span>
<a href="#l22.18"></a><span id="l22.18"> </span>
<a href="#l22.19"></a><span id="l22.19">   // Copy the file to the profile directory for a PAB</span>
<a href="#l22.20"></a><span id="l22.20">   testAB.copyTo(gProfileDir, kPABData.fileName);</span>
<a href="#l22.21"></a><span id="l22.21"> </span>
<a href="#l22.22"></a><span id="l22.22">   // test that validity table terms are valid</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mailnews/base/test/unit/test_searchBody.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_searchBody.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -108,17 +108,17 @@ var copyListener =</span>
<a href="#l23.4"></a><span id="l23.4">     }</span>
<a href="#l23.5"></a><span id="l23.5">     else</span>
<a href="#l23.6"></a><span id="l23.6">       testBodySearch();</span>
<a href="#l23.7"></a><span id="l23.7">   }</span>
<a href="#l23.8"></a><span id="l23.8"> };</span>
<a href="#l23.9"></a><span id="l23.9"> </span>
<a href="#l23.10"></a><span id="l23.10"> function run_test()</span>
<a href="#l23.11"></a><span id="l23.11"> {</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l23.14"></a><span id="l23.14"> </span>
<a href="#l23.15"></a><span id="l23.15">   // test that validity table terms are valid</span>
<a href="#l23.16"></a><span id="l23.16"> </span>
<a href="#l23.17"></a><span id="l23.17">   // offline mail table</span>
<a href="#l23.18"></a><span id="l23.18">   testValidityTable(offlineMail, Contains, Body, true);</span>
<a href="#l23.19"></a><span id="l23.19">   testValidityTable(offlineMail, DoesntContain, Body, true);</span>
<a href="#l23.20"></a><span id="l23.20">   testValidityTable(offlineMail, Is, Body, true);</span>
<a href="#l23.21"></a><span id="l23.21">   testValidityTable(offlineMail, Isnt, Body, true);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mailnews/base/test/unit/test_searchBoolean.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_searchBoolean.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -105,17 +105,17 @@ var searchListener =</span>
<a href="#l24.4"></a><span id="l24.4">   { </span>
<a href="#l24.5"></a><span id="l24.5">     testSearch();</span>
<a href="#l24.6"></a><span id="l24.6">   },</span>
<a href="#l24.7"></a><span id="l24.7">   onNewSearch: function() {gHitCount = 0;}</span>
<a href="#l24.8"></a><span id="l24.8"> };</span>
<a href="#l24.9"></a><span id="l24.9"> </span>
<a href="#l24.10"></a><span id="l24.10"> function run_test()</span>
<a href="#l24.11"></a><span id="l24.11"> {</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l24.14"></a><span id="l24.14"> </span>
<a href="#l24.15"></a><span id="l24.15">   /*</span>
<a href="#l24.16"></a><span id="l24.16">    * I want to create and test a search term that uses this expression:</span>
<a href="#l24.17"></a><span id="l24.17">    *   (A || B ) &amp;&amp; (C || D)</span>
<a href="#l24.18"></a><span id="l24.18">    *</span>
<a href="#l24.19"></a><span id="l24.19">    * The logical expressions A, B, C, and D will be represented by header</span>
<a href="#l24.20"></a><span id="l24.20">    * string properties with values of T (true) or F (false).</span>
<a href="#l24.21"></a><span id="l24.21">    *</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mailnews/base/test/unit/test_searchChaining.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_searchChaining.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -15,17 +15,17 @@ Components.utils.import(&quot;resource:///mod</span>
<a href="#l25.4"></a><span id="l25.4"> var gIMAPInbox;</span>
<a href="#l25.5"></a><span id="l25.5"> var gIMAPDaemon, gServer, gIMAPIncomingServer;</span>
<a href="#l25.6"></a><span id="l25.6"> </span>
<a href="#l25.7"></a><span id="l25.7"> function run_test()</span>
<a href="#l25.8"></a><span id="l25.8"> {</span>
<a href="#l25.9"></a><span id="l25.9">   // Pull in the IMAP fake server code</span>
<a href="#l25.10"></a><span id="l25.10">   load(&quot;../../../imap/test/unit/head_server.js&quot;);</span>
<a href="#l25.11"></a><span id="l25.11"> </span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l25.14"></a><span id="l25.14"> </span>
<a href="#l25.15"></a><span id="l25.15">   /*</span>
<a href="#l25.16"></a><span id="l25.16">    * Set up an IMAP server.</span>
<a href="#l25.17"></a><span id="l25.17">    */</span>
<a href="#l25.18"></a><span id="l25.18">   let IMAPDaemon = new imapDaemon();</span>
<a href="#l25.19"></a><span id="l25.19">   gServer = makeServer(IMAPDaemon, &quot;&quot;);</span>
<a href="#l25.20"></a><span id="l25.20">   IMAPDaemon.createMailbox(&quot;secondFolder&quot;, {subscribed : true});</span>
<a href="#l25.21"></a><span id="l25.21">   gIMAPIncomingServer = createLocalIMAPServer();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mailnews/base/test/unit/test_searchCustomTerm.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_searchCustomTerm.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -54,17 +54,17 @@ var customTerm =</span>
<a href="#l26.4"></a><span id="l26.4">             return true;</span>
<a href="#l26.5"></a><span id="l26.5">       }</span>
<a href="#l26.6"></a><span id="l26.6">       return false;</span>
<a href="#l26.7"></a><span id="l26.7">     }</span>
<a href="#l26.8"></a><span id="l26.8"> };</span>
<a href="#l26.9"></a><span id="l26.9"> </span>
<a href="#l26.10"></a><span id="l26.10"> function run_test()</span>
<a href="#l26.11"></a><span id="l26.11"> {</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l26.14"></a><span id="l26.14">   MailServices.filters.addCustomTerm(customTerm);</span>
<a href="#l26.15"></a><span id="l26.15"> </span>
<a href="#l26.16"></a><span id="l26.16">   var copyListener = </span>
<a href="#l26.17"></a><span id="l26.17">   {</span>
<a href="#l26.18"></a><span id="l26.18">     OnStartCopy: function() {},</span>
<a href="#l26.19"></a><span id="l26.19">     OnProgress: function(aProgress, aProgressMax) {},</span>
<a href="#l26.20"></a><span id="l26.20">     SetMessageKey: function(aKey) { gHdr = gLocalInboxFolder.GetMessageHeader(aKey);},</span>
<a href="#l26.21"></a><span id="l26.21">     SetMessageId: function(aMessageId) {},</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mailnews/base/test/unit/test_searchJunk.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_searchJunk.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -206,17 +206,17 @@ var Tests =</span>
<a href="#l27.4"></a><span id="l27.4">     testValue: &quot;plugin&quot;,</span>
<a href="#l27.5"></a><span id="l27.5">     attrib: JunkScoreOrigin,</span>
<a href="#l27.6"></a><span id="l27.6">     op: Isnt,</span>
<a href="#l27.7"></a><span id="l27.7">     count: 1},</span>
<a href="#l27.8"></a><span id="l27.8"> ];</span>
<a href="#l27.9"></a><span id="l27.9"> </span>
<a href="#l27.10"></a><span id="l27.10"> function run_test()</span>
<a href="#l27.11"></a><span id="l27.11"> {</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l27.14"></a><span id="l27.14">     </span>
<a href="#l27.15"></a><span id="l27.15">   // test that validity table terms are valid</span>
<a href="#l27.16"></a><span id="l27.16"> </span>
<a href="#l27.17"></a><span id="l27.17">   // offline mail table</span>
<a href="#l27.18"></a><span id="l27.18">   testValidityTable(offlineMail, Is, JunkPercent, true);</span>
<a href="#l27.19"></a><span id="l27.19">   testValidityTable(offlineMail, Isnt, JunkPercent, false);</span>
<a href="#l27.20"></a><span id="l27.20">   testValidityTable(offlineMail, IsGreaterThan, JunkPercent, true);</span>
<a href="#l27.21"></a><span id="l27.21">   testValidityTable(offlineMail, IsLessThan, JunkPercent, true);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mailnews/base/test/unit/test_searchTag.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_searchTag.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -275,17 +275,17 @@ var Tests =</span>
<a href="#l28.4"></a><span id="l28.4">     count: 1 },</span>
<a href="#l28.5"></a><span id="l28.5"> </span>
<a href="#l28.6"></a><span id="l28.6"> ];</span>
<a href="#l28.7"></a><span id="l28.7"> </span>
<a href="#l28.8"></a><span id="l28.8"> var hdr;</span>
<a href="#l28.9"></a><span id="l28.9"> </span>
<a href="#l28.10"></a><span id="l28.10"> function run_test()</span>
<a href="#l28.11"></a><span id="l28.11"> {</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l28.14"></a><span id="l28.14"> </span>
<a href="#l28.15"></a><span id="l28.15">   // test that validity table terms are valid</span>
<a href="#l28.16"></a><span id="l28.16"> </span>
<a href="#l28.17"></a><span id="l28.17">   // offline mail table</span>
<a href="#l28.18"></a><span id="l28.18">   testValidityTable(offlineMail, Contains, Keywords, true);</span>
<a href="#l28.19"></a><span id="l28.19">   testValidityTable(offlineMail, DoesntContain, Keywords, true);</span>
<a href="#l28.20"></a><span id="l28.20">   testValidityTable(offlineMail, Is, Keywords, true);</span>
<a href="#l28.21"></a><span id="l28.21">   testValidityTable(offlineMail, Isnt, Keywords, true);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mailnews/base/test/unit/test_searchUint32HdrProperty.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_searchUint32HdrProperty.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -68,17 +68,17 @@ var Tests =</span>
<a href="#l29.4"></a><span id="l29.4">   { hdrProperty: &quot;iam23&quot;,</span>
<a href="#l29.5"></a><span id="l29.5">     op: IsLessThan,</span>
<a href="#l29.6"></a><span id="l29.6">     value: 17,</span>
<a href="#l29.7"></a><span id="l29.7">     count: 0 },</span>
<a href="#l29.8"></a><span id="l29.8"> ];</span>
<a href="#l29.9"></a><span id="l29.9"> </span>
<a href="#l29.10"></a><span id="l29.10"> function run_test()</span>
<a href="#l29.11"></a><span id="l29.11"> {</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l29.14"></a><span id="l29.14"> </span>
<a href="#l29.15"></a><span id="l29.15">   var copyListener = </span>
<a href="#l29.16"></a><span id="l29.16">   {</span>
<a href="#l29.17"></a><span id="l29.17">     OnStartCopy: function() {},</span>
<a href="#l29.18"></a><span id="l29.18">     OnProgress: function(aProgress, aProgressMax) {},</span>
<a href="#l29.19"></a><span id="l29.19">     SetMessageKey: function(aKey) {},</span>
<a href="#l29.20"></a><span id="l29.20">     SetMessageId: function(aMessageId) {},</span>
<a href="#l29.21"></a><span id="l29.21">     OnStopCopy: function(aStatus) { testSearch();}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mailnews/compose/test/unit/head_compose.js</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mailnews/compose/test/unit/head_compose.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -31,17 +31,17 @@ var gDraftFolder;</span>
<a href="#l30.4"></a><span id="l30.4"> function setupServerDaemon(handler) {</span>
<a href="#l30.5"></a><span id="l30.5">   if (!handler)</span>
<a href="#l30.6"></a><span id="l30.6">     handler = function (d) { return new SMTP_RFC2821_handler(d); };</span>
<a href="#l30.7"></a><span id="l30.7">   var server = new nsMailServer(handler, new smtpDaemon());</span>
<a href="#l30.8"></a><span id="l30.8">   return server;</span>
<a href="#l30.9"></a><span id="l30.9"> }</span>
<a href="#l30.10"></a><span id="l30.10"> </span>
<a href="#l30.11"></a><span id="l30.11"> function getBasicSmtpServer() {</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-  let server = create_outgoing_server(SMTP_PORT, &quot;user&quot;, &quot;password&quot;);</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+  let server = localAccountUtils.create_outgoing_server(SMTP_PORT, &quot;user&quot;, &quot;password&quot;);</span>
<a href="#l30.14"></a><span id="l30.14"> </span>
<a href="#l30.15"></a><span id="l30.15">   // Override the default greeting so we get something predicitable</span>
<a href="#l30.16"></a><span id="l30.16">   // in the ELHO message</span>
<a href="#l30.17"></a><span id="l30.17">   Services.prefs.setCharPref(&quot;mail.smtpserver.default.hello_argument&quot;, &quot;test&quot;);</span>
<a href="#l30.18"></a><span id="l30.18"> </span>
<a href="#l30.19"></a><span id="l30.19">   return server;</span>
<a href="#l30.20"></a><span id="l30.20"> }</span>
<a href="#l30.21"></a><span id="l30.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_attachment.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_attachment.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -126,11 +126,11 @@ function testInput1() {</span>
<a href="#l31.4"></a><span id="l31.4"> }</span>
<a href="#l31.5"></a><span id="l31.5"> </span>
<a href="#l31.6"></a><span id="l31.6"> var tests = [</span>
<a href="#l31.7"></a><span id="l31.7">   testInput0,</span>
<a href="#l31.8"></a><span id="l31.8">   testInput1</span>
<a href="#l31.9"></a><span id="l31.9"> ]</span>
<a href="#l31.10"></a><span id="l31.10"> </span>
<a href="#l31.11"></a><span id="l31.11"> function run_test() {</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l31.14"></a><span id="l31.14">   async_run_tests(tests);</span>
<a href="#l31.15"></a><span id="l31.15"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_bug155172.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_bug155172.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -52,17 +52,17 @@ function run_test() {</span>
<a href="#l32.4"></a><span id="l32.4"> </span>
<a href="#l32.5"></a><span id="l32.5">   // Copy the file to the profile directory for a PAB</span>
<a href="#l32.6"></a><span id="l32.6">   signons.copyTo(gProfileDir, &quot;signons.txt&quot;);</span>
<a href="#l32.7"></a><span id="l32.7"> </span>
<a href="#l32.8"></a><span id="l32.8">   // Test file</span>
<a href="#l32.9"></a><span id="l32.9">   var testFile = do_get_file(&quot;data/message1.eml&quot;);</span>
<a href="#l32.10"></a><span id="l32.10"> </span>
<a href="#l32.11"></a><span id="l32.11">   // Ensure we have at least one mail account</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l32.14"></a><span id="l32.14"> </span>
<a href="#l32.15"></a><span id="l32.15">   var smtpServer = getBasicSmtpServer();</span>
<a href="#l32.16"></a><span id="l32.16">   var identity = getSmtpIdentity(kSender, smtpServer);</span>
<a href="#l32.17"></a><span id="l32.17"> </span>
<a href="#l32.18"></a><span id="l32.18">   // Handle the server in a try/catch/finally loop so that we always will stop</span>
<a href="#l32.19"></a><span id="l32.19">   // the server if something fails.</span>
<a href="#l32.20"></a><span id="l32.20">   try {</span>
<a href="#l32.21"></a><span id="l32.21">     // Start the fake SMTP server</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_bug235432.js</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_bug235432.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -53,17 +53,17 @@ var gCopyListener =</span>
<a href="#l33.4"></a><span id="l33.4">  *                         message is copied</span>
<a href="#l33.5"></a><span id="l33.5">  */</span>
<a href="#l33.6"></a><span id="l33.6"> function copyFileMessageInLocalFolder(aMessageFile,</span>
<a href="#l33.7"></a><span id="l33.7">                                       aMessageFlags,</span>
<a href="#l33.8"></a><span id="l33.8">                                       aMessageKeywords,</span>
<a href="#l33.9"></a><span id="l33.9">                                       aMessageWindow,</span>
<a href="#l33.10"></a><span id="l33.10">                                       aCallback) {</span>
<a href="#l33.11"></a><span id="l33.11">   // Set up local folders</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l33.14"></a><span id="l33.14"> </span>
<a href="#l33.15"></a><span id="l33.15">   gCopyListener.callbackFunction = aCallback;</span>
<a href="#l33.16"></a><span id="l33.16">   // Copy a message into the local folder</span>
<a href="#l33.17"></a><span id="l33.17">   MailServices.copy.CopyFileMessage(aMessageFile,</span>
<a href="#l33.18"></a><span id="l33.18">                                     gLocalInboxFolder,</span>
<a href="#l33.19"></a><span id="l33.19">                                     null, false,</span>
<a href="#l33.20"></a><span id="l33.20">                                     aMessageFlags,</span>
<a href="#l33.21"></a><span id="l33.21">                                     aMessageKeywords,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_bug474774.js</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_bug474774.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -168,17 +168,17 @@ function sendMessageLater()</span>
<a href="#l34.4"></a><span id="l34.4"> }</span>
<a href="#l34.5"></a><span id="l34.5"> </span>
<a href="#l34.6"></a><span id="l34.6"> function run_test() {</span>
<a href="#l34.7"></a><span id="l34.7">   // Test file - for bug 429891</span>
<a href="#l34.8"></a><span id="l34.8">   originalData = IOUtils.loadFileToString(testFile);</span>
<a href="#l34.9"></a><span id="l34.9"> </span>
<a href="#l34.10"></a><span id="l34.10">   // Ensure we have a local mail account, an normal account and appropriate</span>
<a href="#l34.11"></a><span id="l34.11">   // servers and identities.</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l34.14"></a><span id="l34.14"> </span>
<a href="#l34.15"></a><span id="l34.15">   MailServices.accounts.setSpecialFolders();</span>
<a href="#l34.16"></a><span id="l34.16"> </span>
<a href="#l34.17"></a><span id="l34.17">   let account = MailServices.accounts.createAccount();</span>
<a href="#l34.18"></a><span id="l34.18">   let incomingServer = MailServices.accounts.createIncomingServer(&quot;test&quot;, &quot;localhost&quot;, &quot;pop3&quot;);</span>
<a href="#l34.19"></a><span id="l34.19"> </span>
<a href="#l34.20"></a><span id="l34.20">   var smtpServer = getBasicSmtpServer();</span>
<a href="#l34.21"></a><span id="l34.21">   identity = getSmtpIdentity(kSender, smtpServer);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_detectAttachmentCharset.js</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_detectAttachmentCharset.js</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -49,13 +49,13 @@ var tests = [</span>
<a href="#l35.4"></a><span id="l35.4">   testUTF8,</span>
<a href="#l35.5"></a><span id="l35.5">   testUTF16BE,</span>
<a href="#l35.6"></a><span id="l35.6">   testUTF16LE,</span>
<a href="#l35.7"></a><span id="l35.7">   testShiftJIS</span>
<a href="#l35.8"></a><span id="l35.8"> ]</span>
<a href="#l35.9"></a><span id="l35.9"> </span>
<a href="#l35.10"></a><span id="l35.10"> function run_test() {</span>
<a href="#l35.11"></a><span id="l35.11">   // Ensure we have at least one mail account</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l35.14"></a><span id="l35.14">   Services.prefs.setIntPref(&quot;mail.strictly_mime.parm_folding&quot;, 0);</span>
<a href="#l35.15"></a><span id="l35.15"> </span>
<a href="#l35.16"></a><span id="l35.16">   async_run_tests(tests);</span>
<a href="#l35.17"></a><span id="l35.17"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_saveDraft.js</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_saveDraft.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -13,15 +13,15 @@ function checkResult() {</span>
<a href="#l36.4"></a><span id="l36.4"> </span>
<a href="#l36.5"></a><span id="l36.5"> function actually_run_test() {</span>
<a href="#l36.6"></a><span id="l36.6">   yield async_run({ func: createMessage });</span>
<a href="#l36.7"></a><span id="l36.7">   checkResult();</span>
<a href="#l36.8"></a><span id="l36.8">   do_test_finished();</span>
<a href="#l36.9"></a><span id="l36.9"> }</span>
<a href="#l36.10"></a><span id="l36.10"> </span>
<a href="#l36.11"></a><span id="l36.11"> function run_test() {</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l36.14"></a><span id="l36.14"> </span>
<a href="#l36.15"></a><span id="l36.15">   do_test_pending();</span>
<a href="#l36.16"></a><span id="l36.16"> </span>
<a href="#l36.17"></a><span id="l36.17">   async_run({func: actually_run_test});</span>
<a href="#l36.18"></a><span id="l36.18"> }</span>
<a href="#l36.19"></a><span id="l36.19"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_sendBackground.js</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_sendBackground.js</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -82,17 +82,17 @@ msll.prototype = {</span>
<a href="#l37.4"></a><span id="l37.4"> </span>
<a href="#l37.5"></a><span id="l37.5"> </span>
<a href="#l37.6"></a><span id="l37.6"> function run_test() {</span>
<a href="#l37.7"></a><span id="l37.7">   // The point of this test - send in background.</span>
<a href="#l37.8"></a><span id="l37.8">   Services.prefs.setBoolPref(&quot;mailnews.sendInBackground&quot;, true);</span>
<a href="#l37.9"></a><span id="l37.9"> </span>
<a href="#l37.10"></a><span id="l37.10">   // Ensure we have a local mail account, an normal account and appropriate</span>
<a href="#l37.11"></a><span id="l37.11">   // servers and identities.</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l37.14"></a><span id="l37.14"> </span>
<a href="#l37.15"></a><span id="l37.15">   // Now load (and internally initialize) the send later service</span>
<a href="#l37.16"></a><span id="l37.16">   gMsgSendLater = Cc[&quot;@mozilla.org/messengercompose/sendlater;1&quot;]</span>
<a href="#l37.17"></a><span id="l37.17">                     .getService(Ci.nsIMsgSendLater);</span>
<a href="#l37.18"></a><span id="l37.18"> </span>
<a href="#l37.19"></a><span id="l37.19">   // Test file - for bug 429891</span>
<a href="#l37.20"></a><span id="l37.20">   originalData = IOUtils.loadFileToString(testFile1);</span>
<a href="#l37.21"></a><span id="l37.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_sendMailAddressIDN.js</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_sendMailAddressIDN.js</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -173,17 +173,17 @@ function run_test()</span>
<a href="#l38.4"></a><span id="l38.4"> {</span>
<a href="#l38.5"></a><span id="l38.5">   type = &quot;sendMailAddressIDN&quot;;</span>
<a href="#l38.6"></a><span id="l38.6">   registerAlertTestUtils();</span>
<a href="#l38.7"></a><span id="l38.7">   var composeProps = Services.strings.createBundle(&quot;chrome://messenger/locale/messengercompose/composeMsgs.properties&quot;);</span>
<a href="#l38.8"></a><span id="l38.8">   expectedAlertMessage = composeProps.GetStringFromName(&quot;errorIllegalLocalPart&quot;)</span>
<a href="#l38.9"></a><span id="l38.9">                                      .replace(&quot;%s&quot;, kToInvalid);</span>
<a href="#l38.10"></a><span id="l38.10"> </span>
<a href="#l38.11"></a><span id="l38.11">   // Ensure we have at least one mail account</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l38.14"></a><span id="l38.14">   MailServices.accounts.setSpecialFolders();</span>
<a href="#l38.15"></a><span id="l38.15">   sentFolder = gLocalIncomingServer.rootMsgFolder.createLocalSubfolder(&quot;Sent&quot;);</span>
<a href="#l38.16"></a><span id="l38.16"> </span>
<a href="#l38.17"></a><span id="l38.17">   // Test 1:</span>
<a href="#l38.18"></a><span id="l38.18">   // Plain ASCII recipient address.</span>
<a href="#l38.19"></a><span id="l38.19">   test = kToASCII;</span>
<a href="#l38.20"></a><span id="l38.20">   DoSendTest(kToASCII, kToASCII, 0);</span>
<a href="#l38.21"></a><span id="l38.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_sendMailMessage.js</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_sendMailMessage.js</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -17,17 +17,17 @@ const kUsername = &quot;testsmtp&quot;;</span>
<a href="#l39.4"></a><span id="l39.4"> const kPassword = &quot;smtptest&quot;;</span>
<a href="#l39.5"></a><span id="l39.5"> </span>
<a href="#l39.6"></a><span id="l39.6"> function test_RFC2821() {</span>
<a href="#l39.7"></a><span id="l39.7"> </span>
<a href="#l39.8"></a><span id="l39.8">   // Test file</span>
<a href="#l39.9"></a><span id="l39.9">   var testFile = do_get_file(&quot;data/message1.eml&quot;);</span>
<a href="#l39.10"></a><span id="l39.10"> </span>
<a href="#l39.11"></a><span id="l39.11">   // Ensure we have at least one mail account</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l39.14"></a><span id="l39.14"> </span>
<a href="#l39.15"></a><span id="l39.15">   var smtpServer = getBasicSmtpServer();</span>
<a href="#l39.16"></a><span id="l39.16">   var identity = getSmtpIdentity(kSender, smtpServer);</span>
<a href="#l39.17"></a><span id="l39.17"> </span>
<a href="#l39.18"></a><span id="l39.18">   // Handle the server in a try/catch/finally loop so that we always will stop</span>
<a href="#l39.19"></a><span id="l39.19">   // the server if something fails.</span>
<a href="#l39.20"></a><span id="l39.20">   try {</span>
<a href="#l39.21"></a><span id="l39.21">     // Start the fake SMTP server</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_sendMessageFile.js</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_sendMessageFile.js</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -107,17 +107,17 @@ function run_test() {</span>
<a href="#l40.4"></a><span id="l40.4"> </span>
<a href="#l40.5"></a><span id="l40.5">   type = &quot;sendMessageFile&quot;;</span>
<a href="#l40.6"></a><span id="l40.6"> </span>
<a href="#l40.7"></a><span id="l40.7">   // Test file - for bug 429891</span>
<a href="#l40.8"></a><span id="l40.8">   var testFile = do_get_file(&quot;data/429891_testcase.eml&quot;);</span>
<a href="#l40.9"></a><span id="l40.9">   originalData = IOUtils.loadFileToString(testFile);</span>
<a href="#l40.10"></a><span id="l40.10"> </span>
<a href="#l40.11"></a><span id="l40.11">   // Ensure we have at least one mail account</span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l40.14"></a><span id="l40.14"> </span>
<a href="#l40.15"></a><span id="l40.15">   MailServices.accounts.setSpecialFolders();</span>
<a href="#l40.16"></a><span id="l40.16"> </span>
<a href="#l40.17"></a><span id="l40.17">   var smtpServer = getBasicSmtpServer();</span>
<a href="#l40.18"></a><span id="l40.18">   var identity = getSmtpIdentity(kSender, smtpServer);</span>
<a href="#l40.19"></a><span id="l40.19"> </span>
<a href="#l40.20"></a><span id="l40.20">   sentFolder = gLocalIncomingServer.rootMsgFolder.createLocalSubfolder(&quot;Sent&quot;);</span>
<a href="#l40.21"></a><span id="l40.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_sendMessageLater.js</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_sendMessageLater.js</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -172,17 +172,17 @@ function sendMessageLater()</span>
<a href="#l41.4"></a><span id="l41.4"> }</span>
<a href="#l41.5"></a><span id="l41.5"> </span>
<a href="#l41.6"></a><span id="l41.6"> function run_test() {</span>
<a href="#l41.7"></a><span id="l41.7">   // Test file - for bug 429891</span>
<a href="#l41.8"></a><span id="l41.8">   originalData = IOUtils.loadFileToString(testFile);</span>
<a href="#l41.9"></a><span id="l41.9"> </span>
<a href="#l41.10"></a><span id="l41.10">   // Ensure we have a local mail account, an normal account and appropriate</span>
<a href="#l41.11"></a><span id="l41.11">   // servers and identities.</span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l41.14"></a><span id="l41.14"> </span>
<a href="#l41.15"></a><span id="l41.15">   // Check that the send later service thinks we don't have messages to send</span>
<a href="#l41.16"></a><span id="l41.16">   do_check_eq(msgSendLater.hasUnsentMessages(identity), false);</span>
<a href="#l41.17"></a><span id="l41.17"> </span>
<a href="#l41.18"></a><span id="l41.18">   MailServices.accounts.setSpecialFolders();</span>
<a href="#l41.19"></a><span id="l41.19"> </span>
<a href="#l41.20"></a><span id="l41.20">   let account = MailServices.accounts.createAccount();</span>
<a href="#l41.21"></a><span id="l41.21">   let incomingServer = MailServices.accounts.createIncomingServer(&quot;test&quot;, &quot;localhost&quot;, &quot;pop3&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_sendMessageLater2.js</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_sendMessageLater2.js</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -215,17 +215,17 @@ function actually_run_test() {</span>
<a href="#l42.4"></a><span id="l42.4"> function run_test() {</span>
<a href="#l42.5"></a><span id="l42.5">   // Load in the test files so we have a record of length and their data.</span>
<a href="#l42.6"></a><span id="l42.6">   for (var i = 0; i &lt; gMsgFile.length; ++i) {</span>
<a href="#l42.7"></a><span id="l42.7">     gMsgFileData[i] = IOUtils.loadFileToString(gMsgFile[i]);</span>
<a href="#l42.8"></a><span id="l42.8">   }</span>
<a href="#l42.9"></a><span id="l42.9"> </span>
<a href="#l42.10"></a><span id="l42.10">   // Ensure we have a local mail account, an normal account and appropriate</span>
<a href="#l42.11"></a><span id="l42.11">   // servers and identities.</span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l42.14"></a><span id="l42.14"> </span>
<a href="#l42.15"></a><span id="l42.15">   // Check that the send later service thinks we don't have messages to send.</span>
<a href="#l42.16"></a><span id="l42.16">   do_check_eq(msgSendLater.hasUnsentMessages(identity), false);</span>
<a href="#l42.17"></a><span id="l42.17"> </span>
<a href="#l42.18"></a><span id="l42.18">   MailServices.accounts.setSpecialFolders();</span>
<a href="#l42.19"></a><span id="l42.19"> </span>
<a href="#l42.20"></a><span id="l42.20">   let account = MailServices.accounts.createAccount();</span>
<a href="#l42.21"></a><span id="l42.21">   let incomingServer = MailServices.accounts.createIncomingServer(&quot;test&quot;, &quot;localhost&quot;, &quot;pop3&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_sendMessageLater3.js</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_sendMessageLater3.js</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -119,17 +119,17 @@ function sendMessageLater()</span>
<a href="#l43.4"></a><span id="l43.4"> function run_test() {</span>
<a href="#l43.5"></a><span id="l43.5">   registerAlertTestUtils();</span>
<a href="#l43.6"></a><span id="l43.6"> </span>
<a href="#l43.7"></a><span id="l43.7">   // Test file - for bug 429891</span>
<a href="#l43.8"></a><span id="l43.8">   originalData = IOUtils.loadFileToString(testFile);</span>
<a href="#l43.9"></a><span id="l43.9"> </span>
<a href="#l43.10"></a><span id="l43.10">   // Ensure we have a local mail account, an normal account and appropriate</span>
<a href="#l43.11"></a><span id="l43.11">   // servers and identities.</span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l43.14"></a><span id="l43.14"> </span>
<a href="#l43.15"></a><span id="l43.15">   // Check that the send later service thinks we don't have messages to send.</span>
<a href="#l43.16"></a><span id="l43.16">   do_check_eq(msgSendLater.hasUnsentMessages(identity), false);</span>
<a href="#l43.17"></a><span id="l43.17"> </span>
<a href="#l43.18"></a><span id="l43.18">   MailServices.accounts.setSpecialFolders();</span>
<a href="#l43.19"></a><span id="l43.19"> </span>
<a href="#l43.20"></a><span id="l43.20">   let account = MailServices.accounts.createAccount();</span>
<a href="#l43.21"></a><span id="l43.21">   let incomingServer = MailServices.accounts.createIncomingServer(&quot;test&quot;, &quot;localhost&quot;, &quot;pop3&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_smtpAuthMethods.js</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_smtpAuthMethods.js</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -95,17 +95,17 @@ function run_test() {</span>
<a href="#l44.4"></a><span id="l44.4">       handler.kAuthRequired = true;</span>
<a href="#l44.5"></a><span id="l44.5">       handler.kAuthSchemes = kAuthSchemes;</span>
<a href="#l44.6"></a><span id="l44.6">       return handler;</span>
<a href="#l44.7"></a><span id="l44.7">     }</span>
<a href="#l44.8"></a><span id="l44.8">     server = setupServerDaemon(createHandler);</span>
<a href="#l44.9"></a><span id="l44.9">     dump(&quot;AUTH PLAIN = &quot; + AUTHPLAIN + &quot;\n&quot;);</span>
<a href="#l44.10"></a><span id="l44.10">     server.start(SMTP_PORT);</span>
<a href="#l44.11"></a><span id="l44.11"> </span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-    loadLocalMailAccount();</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+    localAccountUtils.loadLocalMailAccount();</span>
<a href="#l44.14"></a><span id="l44.14">     smtpServer = getBasicSmtpServer();</span>
<a href="#l44.15"></a><span id="l44.15">     smtpServer.socketType = Ci.nsMsgSocketType.plain;</span>
<a href="#l44.16"></a><span id="l44.16">     smtpServer.username = kUsername;</span>
<a href="#l44.17"></a><span id="l44.17">     smtpServer.password = kPassword;</span>
<a href="#l44.18"></a><span id="l44.18">     identity = getSmtpIdentity(kSender, smtpServer);</span>
<a href="#l44.19"></a><span id="l44.19"> </span>
<a href="#l44.20"></a><span id="l44.20">     testFile = do_get_file(&quot;data/message1.eml&quot;);</span>
<a href="#l44.21"></a><span id="l44.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_smtpPassword.js</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_smtpPassword.js</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -29,17 +29,17 @@ function run_test() {</span>
<a href="#l45.4"></a><span id="l45.4"> </span>
<a href="#l45.5"></a><span id="l45.5">   // Copy the file to the profile directory for a PAB</span>
<a href="#l45.6"></a><span id="l45.6">   signons.copyTo(gProfileDir, &quot;signons.txt&quot;);</span>
<a href="#l45.7"></a><span id="l45.7"> </span>
<a href="#l45.8"></a><span id="l45.8">   // Test file</span>
<a href="#l45.9"></a><span id="l45.9">   var testFile = do_get_file(&quot;data/message1.eml&quot;);</span>
<a href="#l45.10"></a><span id="l45.10"> </span>
<a href="#l45.11"></a><span id="l45.11">   // Ensure we have at least one mail account</span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l45.14"></a><span id="l45.14"> </span>
<a href="#l45.15"></a><span id="l45.15">   var smtpServer = getBasicSmtpServer();</span>
<a href="#l45.16"></a><span id="l45.16">   var identity = getSmtpIdentity(kSender, smtpServer);</span>
<a href="#l45.17"></a><span id="l45.17"> </span>
<a href="#l45.18"></a><span id="l45.18">   // Handle the server in a try/catch/finally loop so that we always will stop</span>
<a href="#l45.19"></a><span id="l45.19">   // the server if something fails.</span>
<a href="#l45.20"></a><span id="l45.20">   try {</span>
<a href="#l45.21"></a><span id="l45.21">     // Start the fake SMTP server</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_smtpPassword2.js</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_smtpPassword2.js</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -15,17 +15,17 @@ function run_test()</span>
<a href="#l46.4"></a><span id="l46.4"> {</span>
<a href="#l46.5"></a><span id="l46.5">   // Passwords File (generated from Mozilla 1.8 branch).</span>
<a href="#l46.6"></a><span id="l46.6">   var signons = do_get_file(&quot;../../../data/signons-mailnews1.8-multiple.txt&quot;);</span>
<a href="#l46.7"></a><span id="l46.7"> </span>
<a href="#l46.8"></a><span id="l46.8">   // Copy the file to the profile directory for a PAB</span>
<a href="#l46.9"></a><span id="l46.9">   signons.copyTo(gProfileDir, &quot;signons.txt&quot;);</span>
<a href="#l46.10"></a><span id="l46.10"> </span>
<a href="#l46.11"></a><span id="l46.11">   // Set up the basic accounts and folders.</span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l46.14"></a><span id="l46.14"> </span>
<a href="#l46.15"></a><span id="l46.15">   var smtpServer1 = getBasicSmtpServer();</span>
<a href="#l46.16"></a><span id="l46.16">   var smtpServer2 = getBasicSmtpServer();</span>
<a href="#l46.17"></a><span id="l46.17"> </span>
<a href="#l46.18"></a><span id="l46.18">   smtpServer1.authMethod = 3;</span>
<a href="#l46.19"></a><span id="l46.19">   smtpServer1.username = kUser1;</span>
<a href="#l46.20"></a><span id="l46.20">   smtpServer2.authMethod = 3;</span>
<a href="#l46.21"></a><span id="l46.21">   smtpServer2.username = kUser2;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_smtpPasswordFailure1.js</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_smtpPasswordFailure1.js</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -71,17 +71,17 @@ function run_test() {</span>
<a href="#l47.4"></a><span id="l47.4">   signons.copyTo(gProfileDir, &quot;signons.txt&quot;);</span>
<a href="#l47.5"></a><span id="l47.5"> </span>
<a href="#l47.6"></a><span id="l47.6">   registerAlertTestUtils();</span>
<a href="#l47.7"></a><span id="l47.7"> </span>
<a href="#l47.8"></a><span id="l47.8">   // Test file</span>
<a href="#l47.9"></a><span id="l47.9">   var testFile = do_get_file(&quot;data/message1.eml&quot;);</span>
<a href="#l47.10"></a><span id="l47.10"> </span>
<a href="#l47.11"></a><span id="l47.11">   // Ensure we have at least one mail account</span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l47.14"></a><span id="l47.14"> </span>
<a href="#l47.15"></a><span id="l47.15">   var smtpServer = getBasicSmtpServer();</span>
<a href="#l47.16"></a><span id="l47.16">   var identity = getSmtpIdentity(kSender, smtpServer);</span>
<a href="#l47.17"></a><span id="l47.17"> </span>
<a href="#l47.18"></a><span id="l47.18">   // Handle the server in a try/catch/finally loop so that we always will stop</span>
<a href="#l47.19"></a><span id="l47.19">   // the server if something fails.</span>
<a href="#l47.20"></a><span id="l47.20">   try {</span>
<a href="#l47.21"></a><span id="l47.21">     // Start the fake SMTP server</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_smtpPasswordFailure2.js</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_smtpPasswordFailure2.js</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -82,17 +82,17 @@ function run_test() {</span>
<a href="#l48.4"></a><span id="l48.4">   signons.copyTo(gProfileDir, &quot;signons.txt&quot;);</span>
<a href="#l48.5"></a><span id="l48.5"> </span>
<a href="#l48.6"></a><span id="l48.6">   registerAlertTestUtils();</span>
<a href="#l48.7"></a><span id="l48.7"> </span>
<a href="#l48.8"></a><span id="l48.8">   // Test file</span>
<a href="#l48.9"></a><span id="l48.9">   var testFile = do_get_file(&quot;data/message1.eml&quot;);</span>
<a href="#l48.10"></a><span id="l48.10"> </span>
<a href="#l48.11"></a><span id="l48.11">   // Ensure we have at least one mail account</span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l48.14"></a><span id="l48.14"> </span>
<a href="#l48.15"></a><span id="l48.15">   var smtpServer = getBasicSmtpServer();</span>
<a href="#l48.16"></a><span id="l48.16">   var identity = getSmtpIdentity(kSender, smtpServer);</span>
<a href="#l48.17"></a><span id="l48.17"> </span>
<a href="#l48.18"></a><span id="l48.18">   // Handle the server in a try/catch/finally loop so that we always will stop</span>
<a href="#l48.19"></a><span id="l48.19">   // the server if something fails.</span>
<a href="#l48.20"></a><span id="l48.20">   try {</span>
<a href="#l48.21"></a><span id="l48.21">     // Start the fake SMTP server</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_smtpPasswordFailure3.js</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_smtpPasswordFailure3.js</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -81,17 +81,17 @@ function run_test() {</span>
<a href="#l49.4"></a><span id="l49.4">   signons.copyTo(gProfileDir, &quot;signons.txt&quot;);</span>
<a href="#l49.5"></a><span id="l49.5"> </span>
<a href="#l49.6"></a><span id="l49.6">   registerAlertTestUtils();</span>
<a href="#l49.7"></a><span id="l49.7"> </span>
<a href="#l49.8"></a><span id="l49.8">   // Test file</span>
<a href="#l49.9"></a><span id="l49.9">   var testFile = do_get_file(&quot;data/message1.eml&quot;);</span>
<a href="#l49.10"></a><span id="l49.10"> </span>
<a href="#l49.11"></a><span id="l49.11">   // Ensure we have at least one mail account</span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l49.14"></a><span id="l49.14"> </span>
<a href="#l49.15"></a><span id="l49.15">   var smtpServer = getBasicSmtpServer();</span>
<a href="#l49.16"></a><span id="l49.16">   var identity = getSmtpIdentity(kSender, smtpServer);</span>
<a href="#l49.17"></a><span id="l49.17"> </span>
<a href="#l49.18"></a><span id="l49.18">   // Start the fake SMTP server</span>
<a href="#l49.19"></a><span id="l49.19">   server.start(SMTP_PORT);</span>
<a href="#l49.20"></a><span id="l49.20"> </span>
<a href="#l49.21"></a><span id="l49.21">   // This time with auth</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_staleTemporaryFileCleanup.js</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_staleTemporaryFileCleanup.js</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -44,16 +44,16 @@ function run_test() {</span>
<a href="#l50.4"></a><span id="l50.4">   do_register_cleanup(function() {</span>
<a href="#l50.5"></a><span id="l50.5">     gExpectedFiles.forEach(function(file) {</span>
<a href="#l50.6"></a><span id="l50.6">       if (file.exists())</span>
<a href="#l50.7"></a><span id="l50.7">         file.remove(false);</span>
<a href="#l50.8"></a><span id="l50.8">     });</span>
<a href="#l50.9"></a><span id="l50.9">   });</span>
<a href="#l50.10"></a><span id="l50.10"> </span>
<a href="#l50.11"></a><span id="l50.11">   // Ensure we have at least one mail account</span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l50.14"></a><span id="l50.14">   let composeService = MailServices.compose;</span>
<a href="#l50.15"></a><span id="l50.15">   do_test_pending();</span>
<a href="#l50.16"></a><span id="l50.16">   check_files_not_exist(gExpectedFiles);</span>
<a href="#l50.17"></a><span id="l50.17">   do_test_finished();</span>
<a href="#l50.18"></a><span id="l50.18"> </span>
<a href="#l50.19"></a><span id="l50.19"> }</span>
<a href="#l50.20"></a><span id="l50.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_temporaryFilesRemoved.js</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_temporaryFilesRemoved.js</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -70,17 +70,17 @@ function run_test() {</span>
<a href="#l51.4"></a><span id="l51.4">   do_register_cleanup(function() {</span>
<a href="#l51.5"></a><span id="l51.5">     gExpectedFiles.forEach(function(file) {</span>
<a href="#l51.6"></a><span id="l51.6">       if (file.exists())</span>
<a href="#l51.7"></a><span id="l51.7">         file.remove(false);</span>
<a href="#l51.8"></a><span id="l51.8">     });</span>
<a href="#l51.9"></a><span id="l51.9">   });</span>
<a href="#l51.10"></a><span id="l51.10"> </span>
<a href="#l51.11"></a><span id="l51.11">   // Ensure we have at least one mail account</span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l51.14"></a><span id="l51.14"> </span>
<a href="#l51.15"></a><span id="l51.15">   gMsgCompose = Cc[&quot;@mozilla.org/messengercompose/compose;1&quot;]</span>
<a href="#l51.16"></a><span id="l51.16">                   .createInstance(Ci.nsIMsgCompose);</span>
<a href="#l51.17"></a><span id="l51.17">   let fields = Cc[&quot;@mozilla.org/messengercompose/composefields;1&quot;]</span>
<a href="#l51.18"></a><span id="l51.18">                  .createInstance(Ci.nsIMsgCompFields);</span>
<a href="#l51.19"></a><span id="l51.19">   let params = Cc[&quot;@mozilla.org/messengercompose/composeparams;1&quot;]</span>
<a href="#l51.20"></a><span id="l51.20">                  .createInstance(Ci.nsIMsgComposeParams);</span>
<a href="#l51.21"></a><span id="l51.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/mailnews/db/msgdb/test/unit/test_enumerator_cleanup.js</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/mailnews/db/msgdb/test/unit/test_enumerator_cleanup.js</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -23,17 +23,17 @@ function test_enumerator_cleanup() {</span>
<a href="#l52.4"></a><span id="l52.4"> }</span>
<a href="#l52.5"></a><span id="l52.5"> </span>
<a href="#l52.6"></a><span id="l52.6"> /*</span>
<a href="#l52.7"></a><span id="l52.7">  * This infrastructure down here exists just to get</span>
<a href="#l52.8"></a><span id="l52.8">  *  test_references_header_parsing its message header.</span>
<a href="#l52.9"></a><span id="l52.9">  */</span>
<a href="#l52.10"></a><span id="l52.10"> </span>
<a href="#l52.11"></a><span id="l52.11"> function run_test() {</span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l52.14"></a><span id="l52.14">   do_test_pending();</span>
<a href="#l52.15"></a><span id="l52.15">   MailServices.copy.CopyFileMessage(anyOldMessage, gLocalInboxFolder, null, false, 0,</span>
<a href="#l52.16"></a><span id="l52.16">                                     &quot;&quot;, messageHeaderGetterListener, null);</span>
<a href="#l52.17"></a><span id="l52.17">   return true;</span>
<a href="#l52.18"></a><span id="l52.18"> }</span>
<a href="#l52.19"></a><span id="l52.19"> </span>
<a href="#l52.20"></a><span id="l52.20"> var messageHeaderGetterListener = {</span>
<a href="#l52.21"></a><span id="l52.21">   OnStartCopy: function() {},</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/mailnews/db/msgdb/test/unit/test_filter_enumerator.js</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/mailnews/db/msgdb/test/unit/test_filter_enumerator.js</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -7,17 +7,17 @@ const nsMsgSearchOp     = Ci.nsMsgSearch</span>
<a href="#l53.4"></a><span id="l53.4"> const nsMsgMessageFlags = Ci.nsMsgMessageFlags;</span>
<a href="#l53.5"></a><span id="l53.5"> const nsMsgFolderFlags = Ci.nsMsgFolderFlags;</span>
<a href="#l53.6"></a><span id="l53.6"> </span>
<a href="#l53.7"></a><span id="l53.7"> const kSetCount = 13;</span>
<a href="#l53.8"></a><span id="l53.8"> const kNumExpectedMatches = 10;</span>
<a href="#l53.9"></a><span id="l53.9"> </span>
<a href="#l53.10"></a><span id="l53.10"> function setupGlobals()</span>
<a href="#l53.11"></a><span id="l53.11"> {</span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l53.14"></a><span id="l53.14">   // Create a message generator</span>
<a href="#l53.15"></a><span id="l53.15">   let messageGenerator = new MessageGenerator();</span>
<a href="#l53.16"></a><span id="l53.16">   let localInbox = gLocalInboxFolder.QueryInterface(Ci.nsIMsgLocalMailFolder);</span>
<a href="#l53.17"></a><span id="l53.17"> </span>
<a href="#l53.18"></a><span id="l53.18">   for (let i = 0; i &lt; kSetCount; i++) {</span>
<a href="#l53.19"></a><span id="l53.19">     let message = messageGenerator.makeMessage();</span>
<a href="#l53.20"></a><span id="l53.20">     gMessages.push(message);</span>
<a href="#l53.21"></a><span id="l53.21">     localInbox.addMessage(message.toMboxString());</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/mailnews/db/msgdb/test/unit/test_maildb.js</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/mailnews/db/msgdb/test/unit/test_maildb.js</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -81,17 +81,17 @@ function doTest(test)</span>
<a href="#l54.4"></a><span id="l54.4">   else</span>
<a href="#l54.5"></a><span id="l54.5">   {</span>
<a href="#l54.6"></a><span id="l54.6">     do_test_finished(); // for the one in run_test()</span>
<a href="#l54.7"></a><span id="l54.7">   }</span>
<a href="#l54.8"></a><span id="l54.8"> }</span>
<a href="#l54.9"></a><span id="l54.9"> </span>
<a href="#l54.10"></a><span id="l54.10"> </span>
<a href="#l54.11"></a><span id="l54.11"> function run_test() {</span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l54.14"></a><span id="l54.14">   do_test_pending();</span>
<a href="#l54.15"></a><span id="l54.15">   doTest(1);</span>
<a href="#l54.16"></a><span id="l54.16"> }</span>
<a href="#l54.17"></a><span id="l54.17"> </span>
<a href="#l54.18"></a><span id="l54.18"> function openMore(db)</span>
<a href="#l54.19"></a><span id="l54.19"> {</span>
<a href="#l54.20"></a><span id="l54.20">   let done = dbService.openMore(db, 1);</span>
<a href="#l54.21"></a><span id="l54.21">   dump(&quot;in openMore done = &quot; + done + &quot;\n&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1" class="difflineminus">--- a/mailnews/db/msgdb/test/unit/test_propertyEnumerator.js</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineplus">+++ b/mailnews/db/msgdb/test/unit/test_propertyEnumerator.js</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineat">@@ -4,17 +4,17 @@</span>
<a href="#l55.4"></a><span id="l55.4"> </span>
<a href="#l55.5"></a><span id="l55.5">  // tests propertyEnumerator in nsIMsgDBHdr;</span>
<a href="#l55.6"></a><span id="l55.6"> </span>
<a href="#l55.7"></a><span id="l55.7"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l55.8"></a><span id="l55.8"> </span>
<a href="#l55.9"></a><span id="l55.9"> var gHdr;</span>
<a href="#l55.10"></a><span id="l55.10"> </span>
<a href="#l55.11"></a><span id="l55.11"> function run_test() {</span>
<a href="#l55.12"></a><span id="l55.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l55.13"></a><span id="l55.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l55.14"></a><span id="l55.14">   // Get a message into the local filestore.</span>
<a href="#l55.15"></a><span id="l55.15">   // Function continue_test() continues the testing after the copy.</span>
<a href="#l55.16"></a><span id="l55.16">   var bugmail1 = do_get_file(&quot;../../../../data/bugmail1&quot;);</span>
<a href="#l55.17"></a><span id="l55.17">   do_test_pending();</span>
<a href="#l55.18"></a><span id="l55.18">   MailServices.copy.CopyFileMessage(bugmail1, gLocalInboxFolder, null, false, 0,</span>
<a href="#l55.19"></a><span id="l55.19">                                     &quot;&quot;, copyListener, null);</span>
<a href="#l55.20"></a><span id="l55.20"> }</span>
<a href="#l55.21"></a><span id="l55.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l56.1"></a><span id="l56.1" class="difflineminus">--- a/mailnews/db/msgdb/test/unit/test_references_parsing.js</span>
<a href="#l56.2"></a><span id="l56.2" class="difflineplus">+++ b/mailnews/db/msgdb/test/unit/test_references_parsing.js</span>
<a href="#l56.3"></a><span id="l56.3" class="difflineat">@@ -80,17 +80,17 @@ function test_references_header_parsing(</span>
<a href="#l56.4"></a><span id="l56.4"> }</span>
<a href="#l56.5"></a><span id="l56.5"> </span>
<a href="#l56.6"></a><span id="l56.6"> /*</span>
<a href="#l56.7"></a><span id="l56.7">  * This infrastructure down here exists just to get</span>
<a href="#l56.8"></a><span id="l56.8">  *  test_references_header_parsing its message header.</span>
<a href="#l56.9"></a><span id="l56.9">  */</span>
<a href="#l56.10"></a><span id="l56.10"> </span>
<a href="#l56.11"></a><span id="l56.11"> function run_test() {</span>
<a href="#l56.12"></a><span id="l56.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l56.13"></a><span id="l56.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l56.14"></a><span id="l56.14">   do_test_pending();</span>
<a href="#l56.15"></a><span id="l56.15">   MailServices.copy.CopyFileMessage(anyOldMessage, gLocalInboxFolder, null, false, 0,</span>
<a href="#l56.16"></a><span id="l56.16">                                     &quot;&quot;, messageHeaderGetterListener, null);</span>
<a href="#l56.17"></a><span id="l56.17">   return true;</span>
<a href="#l56.18"></a><span id="l56.18"> }</span>
<a href="#l56.19"></a><span id="l56.19"> </span>
<a href="#l56.20"></a><span id="l56.20"> var messageHeaderGetterListener = {</span>
<a href="#l56.21"></a><span id="l56.21">   msgKey: null,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l57.1"></a><span id="l57.1" class="difflineminus">--- a/mailnews/extensions/bayesian-spam-filter/test/unit/test_bug228675.js</span>
<a href="#l57.2"></a><span id="l57.2" class="difflineplus">+++ b/mailnews/extensions/bayesian-spam-filter/test/unit/test_bug228675.js</span>
<a href="#l57.3"></a><span id="l57.3" class="difflineat">@@ -22,17 +22,17 @@ var emails =          [ &quot;ham1.eml&quot;,  &quot;ha</span>
<a href="#l57.4"></a><span id="l57.4">                         &quot;spam2.eml&quot;, &quot;spam3.eml&quot;, &quot;spam4.eml&quot; ];</span>
<a href="#l57.5"></a><span id="l57.5"> var classifications = [ kGood,       kGood,       kJunk,</span>
<a href="#l57.6"></a><span id="l57.6">                         kJunk,       kJunk,       kJunk ];</span>
<a href="#l57.7"></a><span id="l57.7"> var trainingData;</span>
<a href="#l57.8"></a><span id="l57.8"> </span>
<a href="#l57.9"></a><span id="l57.9"> // main test</span>
<a href="#l57.10"></a><span id="l57.10"> function run_test()</span>
<a href="#l57.11"></a><span id="l57.11"> {</span>
<a href="#l57.12"></a><span id="l57.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l57.13"></a><span id="l57.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l57.14"></a><span id="l57.14">   MailServices.junk.resetTrainingData();</span>
<a href="#l57.15"></a><span id="l57.15"> </span>
<a href="#l57.16"></a><span id="l57.16">   do_test_pending();</span>
<a href="#l57.17"></a><span id="l57.17">   </span>
<a href="#l57.18"></a><span id="l57.18">   var email = emails.shift();</span>
<a href="#l57.19"></a><span id="l57.19">   var classification = classifications.shift();</span>
<a href="#l57.20"></a><span id="l57.20">   // additional calls to setMessageClassifiaction are done in the callback</span>
<a href="#l57.21"></a><span id="l57.21">   MailServices.junk.setMessageClassification(getSpec(email),</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l58.1"></a><span id="l58.1" class="difflineminus">--- a/mailnews/extensions/bayesian-spam-filter/test/unit/test_customTokenization.js</span>
<a href="#l58.2"></a><span id="l58.2" class="difflineplus">+++ b/mailnews/extensions/bayesian-spam-filter/test/unit/test_customTokenization.js</span>
<a href="#l58.3"></a><span id="l58.3" class="difflineat">@@ -78,17 +78,17 @@ var tests =</span>
<a href="#l58.4"></a><span id="l58.4">    nottokens: [&quot;skip:h 20&quot;, &quot;received:&lt;someone@example&quot;]</span>
<a href="#l58.5"></a><span id="l58.5">   }</span>
<a href="#l58.6"></a><span id="l58.6"> </span>
<a href="#l58.7"></a><span id="l58.7"> ]</span>
<a href="#l58.8"></a><span id="l58.8"> </span>
<a href="#l58.9"></a><span id="l58.9"> // main test</span>
<a href="#l58.10"></a><span id="l58.10"> function run_test()</span>
<a href="#l58.11"></a><span id="l58.11"> {</span>
<a href="#l58.12"></a><span id="l58.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l58.13"></a><span id="l58.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l58.14"></a><span id="l58.14">   do_test_pending();</span>
<a href="#l58.15"></a><span id="l58.15"> </span>
<a href="#l58.16"></a><span id="l58.16">   startCommand();</span>
<a href="#l58.17"></a><span id="l58.17"> }</span>
<a href="#l58.18"></a><span id="l58.18"> </span>
<a href="#l58.19"></a><span id="l58.19"> var listener =</span>
<a href="#l58.20"></a><span id="l58.20"> {</span>
<a href="#l58.21"></a><span id="l58.21">   //nsIMsgTraitClassificationListener implementation</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l59.1"></a><span id="l59.1" class="difflineminus">--- a/mailnews/extensions/bayesian-spam-filter/test/unit/test_junkAsTraits.js</span>
<a href="#l59.2"></a><span id="l59.2" class="difflineplus">+++ b/mailnews/extensions/bayesian-spam-filter/test/unit/test_junkAsTraits.js</span>
<a href="#l59.3"></a><span id="l59.3" class="difflineat">@@ -267,17 +267,17 @@ var tests =</span>
<a href="#l59.4"></a><span id="l59.4">    traitListener: false,</span>
<a href="#l59.5"></a><span id="l59.5">    junkListener: true},</span>
<a href="#l59.6"></a><span id="l59.6"> </span>
<a href="#l59.7"></a><span id="l59.7"> ]</span>
<a href="#l59.8"></a><span id="l59.8"> </span>
<a href="#l59.9"></a><span id="l59.9"> // main test</span>
<a href="#l59.10"></a><span id="l59.10"> function run_test()</span>
<a href="#l59.11"></a><span id="l59.11"> {</span>
<a href="#l59.12"></a><span id="l59.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l59.13"></a><span id="l59.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l59.14"></a><span id="l59.14">   do_test_pending();</span>
<a href="#l59.15"></a><span id="l59.15"> </span>
<a href="#l59.16"></a><span id="l59.16">   // setup pro/anti arrays as junk/good</span>
<a href="#l59.17"></a><span id="l59.17">   gProArray.push(kJunkTrait);</span>
<a href="#l59.18"></a><span id="l59.18">   gAntiArray.push(kGoodTrait);</span>
<a href="#l59.19"></a><span id="l59.19"> </span>
<a href="#l59.20"></a><span id="l59.20">   startCommand();</span>
<a href="#l59.21"></a><span id="l59.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l60.1"></a><span id="l60.1" class="difflineminus">--- a/mailnews/extensions/bayesian-spam-filter/test/unit/test_traitAliases.js</span>
<a href="#l60.2"></a><span id="l60.2" class="difflineplus">+++ b/mailnews/extensions/bayesian-spam-filter/test/unit/test_traitAliases.js</span>
<a href="#l60.3"></a><span id="l60.3" class="difflineat">@@ -88,17 +88,17 @@ var tests =</span>
<a href="#l60.4"></a><span id="l60.4">    antiAliases: [kAntiAlias],</span>
<a href="#l60.5"></a><span id="l60.5">    percent: 53</span>
<a href="#l60.6"></a><span id="l60.6">   },</span>
<a href="#l60.7"></a><span id="l60.7"> ]</span>
<a href="#l60.8"></a><span id="l60.8"> </span>
<a href="#l60.9"></a><span id="l60.9"> // main test</span>
<a href="#l60.10"></a><span id="l60.10"> function run_test()</span>
<a href="#l60.11"></a><span id="l60.11"> {</span>
<a href="#l60.12"></a><span id="l60.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l60.13"></a><span id="l60.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l60.14"></a><span id="l60.14"> </span>
<a href="#l60.15"></a><span id="l60.15">   // load in the aliases trait testing file</span>
<a href="#l60.16"></a><span id="l60.16">   MailServices.junk.QueryInterface(Ci.nsIMsgCorpus)</span>
<a href="#l60.17"></a><span id="l60.17">                    .updateData(do_get_file(&quot;resources/aliases.dat&quot;), true);</span>
<a href="#l60.18"></a><span id="l60.18">   do_test_pending();</span>
<a href="#l60.19"></a><span id="l60.19"> </span>
<a href="#l60.20"></a><span id="l60.20">   startCommand();</span>
<a href="#l60.21"></a><span id="l60.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l61.1"></a><span id="l61.1" class="difflineminus">--- a/mailnews/extensions/bayesian-spam-filter/test/unit/test_traits.js</span>
<a href="#l61.2"></a><span id="l61.2" class="difflineplus">+++ b/mailnews/extensions/bayesian-spam-filter/test/unit/test_traits.js</span>
<a href="#l61.3"></a><span id="l61.3" class="difflineat">@@ -99,17 +99,17 @@ var tests =</span>
<a href="#l61.4"></a><span id="l61.4">    traitAntiIds: [3,5],</span>
<a href="#l61.5"></a><span id="l61.5">    percents: [ [100,50] , [81,0] , [98,50] , [81,0]]</span>
<a href="#l61.6"></a><span id="l61.6">   },</span>
<a href="#l61.7"></a><span id="l61.7"> ]</span>
<a href="#l61.8"></a><span id="l61.8"> </span>
<a href="#l61.9"></a><span id="l61.9"> // main test</span>
<a href="#l61.10"></a><span id="l61.10"> function run_test()</span>
<a href="#l61.11"></a><span id="l61.11"> {</span>
<a href="#l61.12"></a><span id="l61.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l61.13"></a><span id="l61.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l61.14"></a><span id="l61.14">   do_test_pending();</span>
<a href="#l61.15"></a><span id="l61.15"> </span>
<a href="#l61.16"></a><span id="l61.16">   startCommand();</span>
<a href="#l61.17"></a><span id="l61.17"> }</span>
<a href="#l61.18"></a><span id="l61.18"> </span>
<a href="#l61.19"></a><span id="l61.19"> var listener =</span>
<a href="#l61.20"></a><span id="l61.20"> {</span>
<a href="#l61.21"></a><span id="l61.21">   //nsIMsgTraitClassificationListener implementation</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l62.1"></a><span id="l62.1" class="difflineminus">--- a/mailnews/extensions/mdn/test/unit/test_askuser.js</span>
<a href="#l62.2"></a><span id="l62.2" class="difflineplus">+++ b/mailnews/extensions/mdn/test/unit/test_askuser.js</span>
<a href="#l62.3"></a><span id="l62.3" class="difflineat">@@ -1,12 +1,12 @@</span>
<a href="#l62.4"></a><span id="l62.4"> var gMessenger = Cc[&quot;@mozilla.org/messenger;1&quot;].</span>
<a href="#l62.5"></a><span id="l62.5">                    createInstance(Ci.nsIMessenger);</span>
<a href="#l62.6"></a><span id="l62.6"> </span>
<a href="#l62.7"></a><span id="l62.7" class="difflineminus">-loadLocalMailAccount();</span>
<a href="#l62.8"></a><span id="l62.8" class="difflineplus">+localAccountUtils.loadLocalMailAccount();</span>
<a href="#l62.9"></a><span id="l62.9"> </span>
<a href="#l62.10"></a><span id="l62.10"> let localAccount = MailServices.accounts.FindAccountForServer(gLocalIncomingServer);</span>
<a href="#l62.11"></a><span id="l62.11"> let identity = MailServices.accounts.createIdentity();</span>
<a href="#l62.12"></a><span id="l62.12"> identity.email = &quot;bob@t2.example.net&quot;;</span>
<a href="#l62.13"></a><span id="l62.13"> localAccount.addIdentity(identity);</span>
<a href="#l62.14"></a><span id="l62.14"> localAccount.defaultIdentity = identity;</span>
<a href="#l62.15"></a><span id="l62.15"> </span>
<a href="#l62.16"></a><span id="l62.16"> function run_test()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l63.1"></a><span id="l63.1" class="difflineminus">--- a/mailnews/extensions/mdn/test/unit/test_mdnFlags.js</span>
<a href="#l63.2"></a><span id="l63.2" class="difflineplus">+++ b/mailnews/extensions/mdn/test/unit/test_mdnFlags.js</span>
<a href="#l63.3"></a><span id="l63.3" class="difflineat">@@ -1,17 +1,17 @@</span>
<a href="#l63.4"></a><span id="l63.4"> /**</span>
<a href="#l63.5"></a><span id="l63.5">  * This tests that setting mdn flags works correctly, so that we don't</span>
<a href="#l63.6"></a><span id="l63.6">  * reprompt when the user re-selects a message.</span>
<a href="#l63.7"></a><span id="l63.7">  */</span>
<a href="#l63.8"></a><span id="l63.8"> </span>
<a href="#l63.9"></a><span id="l63.9"> var gMessenger = Cc[&quot;@mozilla.org/messenger;1&quot;].</span>
<a href="#l63.10"></a><span id="l63.10">                    createInstance(Ci.nsIMessenger);</span>
<a href="#l63.11"></a><span id="l63.11"> </span>
<a href="#l63.12"></a><span id="l63.12" class="difflineminus">-loadLocalMailAccount();</span>
<a href="#l63.13"></a><span id="l63.13" class="difflineplus">+localAccountUtils.loadLocalMailAccount();</span>
<a href="#l63.14"></a><span id="l63.14"> </span>
<a href="#l63.15"></a><span id="l63.15"> let localAccount = MailServices.accounts.FindAccountForServer(gLocalIncomingServer);</span>
<a href="#l63.16"></a><span id="l63.16"> let identity = MailServices.accounts.createIdentity();</span>
<a href="#l63.17"></a><span id="l63.17"> identity.email = &quot;bob@t2.example.net&quot;;</span>
<a href="#l63.18"></a><span id="l63.18"> localAccount.addIdentity(identity);</span>
<a href="#l63.19"></a><span id="l63.19"> localAccount.defaultIdentity = identity;</span>
<a href="#l63.20"></a><span id="l63.20"> </span>
<a href="#l63.21"></a><span id="l63.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l64.1"></a><span id="l64.1" class="difflineminus">--- a/mailnews/imap/test/unit/head_server.js</span>
<a href="#l64.2"></a><span id="l64.2" class="difflineplus">+++ b/mailnews/imap/test/unit/head_server.js</span>
<a href="#l64.3"></a><span id="l64.3" class="difflineat">@@ -47,17 +47,18 @@ function makeServer(daemon, infoString, </span>
<a href="#l64.4"></a><span id="l64.4">     return handler;</span>
<a href="#l64.5"></a><span id="l64.5">   }</span>
<a href="#l64.6"></a><span id="l64.6">   var server = new nsMailServer(createHandler, daemon);</span>
<a href="#l64.7"></a><span id="l64.7">   server.start(IMAP_PORT);</span>
<a href="#l64.8"></a><span id="l64.8">   return server;</span>
<a href="#l64.9"></a><span id="l64.9"> }</span>
<a href="#l64.10"></a><span id="l64.10"> </span>
<a href="#l64.11"></a><span id="l64.11"> function createLocalIMAPServer() {</span>
<a href="#l64.12"></a><span id="l64.12" class="difflineminus">-  let server = create_incoming_server(&quot;imap&quot;, IMAP_PORT, &quot;user&quot;, &quot;password&quot;);</span>
<a href="#l64.13"></a><span id="l64.13" class="difflineplus">+  let server = localAccountUtils.create_incoming_server(&quot;imap&quot;, IMAP_PORT,</span>
<a href="#l64.14"></a><span id="l64.14" class="difflineplus">+							&quot;user&quot;, &quot;password&quot;);</span>
<a href="#l64.15"></a><span id="l64.15">   server.QueryInterface(Ci.nsIImapIncomingServer);</span>
<a href="#l64.16"></a><span id="l64.16">   return server;</span>
<a href="#l64.17"></a><span id="l64.17"> }</span>
<a href="#l64.18"></a><span id="l64.18"> </span>
<a href="#l64.19"></a><span id="l64.19"> // &lt;copied from=&quot;head_maillocal.js&quot;&gt;</span>
<a href="#l64.20"></a><span id="l64.20"> /**</span>
<a href="#l64.21"></a><span id="l64.21">  * @param fromServer server.playTransaction</span>
<a href="#l64.22"></a><span id="l64.22">  * @param expected [&quot;command&quot;, &quot;command&quot;, ...]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l65.1"></a><span id="l65.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_dontStatNoSelect.js</span>
<a href="#l65.2"></a><span id="l65.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_dontStatNoSelect.js</span>
<a href="#l65.3"></a><span id="l65.3" class="difflineat">@@ -27,17 +27,17 @@ function run_test() {</span>
<a href="#l65.4"></a><span id="l65.4">   daemon.createMailbox(&quot;folder 2&quot;, {subscribed : true});</span>
<a href="#l65.5"></a><span id="l65.5">   gFolder2Mailbox = daemon.getMailbox(&quot;folder 2&quot;);</span>
<a href="#l65.6"></a><span id="l65.6">   addMessageToFolder(gFolder2Mailbox);</span>
<a href="#l65.7"></a><span id="l65.7">   gServer = makeServer(daemon, &quot;&quot;);</span>
<a href="#l65.8"></a><span id="l65.8"> </span>
<a href="#l65.9"></a><span id="l65.9">   gImapServer = createLocalIMAPServer();</span>
<a href="#l65.10"></a><span id="l65.10">   gImapServer.maximumConnectionsNumber = 1;</span>
<a href="#l65.11"></a><span id="l65.11"> </span>
<a href="#l65.12"></a><span id="l65.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l65.13"></a><span id="l65.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l65.14"></a><span id="l65.14"> </span>
<a href="#l65.15"></a><span id="l65.15">   // We need an identity so that updateFolder doesn't fail</span>
<a href="#l65.16"></a><span id="l65.16">   let localAccount = MailServices.accounts.createAccount();</span>
<a href="#l65.17"></a><span id="l65.17">   let identity = MailServices.accounts.createIdentity();</span>
<a href="#l65.18"></a><span id="l65.18">   localAccount.addIdentity(identity);</span>
<a href="#l65.19"></a><span id="l65.19">   localAccount.defaultIdentity = identity;</span>
<a href="#l65.20"></a><span id="l65.20">   localAccount.incomingServer = gLocalIncomingServer;</span>
<a href="#l65.21"></a><span id="l65.21">   MailServices.accounts.defaultAccount = localAccount;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l66.1"></a><span id="l66.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapFilterActions.js</span>
<a href="#l66.2"></a><span id="l66.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapFilterActions.js</span>
<a href="#l66.3"></a><span id="l66.3" class="difflineat">@@ -325,17 +325,17 @@ function run_test()</span>
<a href="#l66.4"></a><span id="l66.4"> {</span>
<a href="#l66.5"></a><span id="l66.5">   // Add a listener.</span>
<a href="#l66.6"></a><span id="l66.6">   gIMAPDaemon = new imapDaemon();</span>
<a href="#l66.7"></a><span id="l66.7">   gServer = makeServer(gIMAPDaemon, &quot;&quot;);</span>
<a href="#l66.8"></a><span id="l66.8"> </span>
<a href="#l66.9"></a><span id="l66.9">   gIMAPIncomingServer = createLocalIMAPServer();</span>
<a href="#l66.10"></a><span id="l66.10"> </span>
<a href="#l66.11"></a><span id="l66.11">   if (!gLocalInboxFolder)</span>
<a href="#l66.12"></a><span id="l66.12" class="difflineminus">-    loadLocalMailAccount();</span>
<a href="#l66.13"></a><span id="l66.13" class="difflineplus">+    localAccountUtils.loadLocalMailAccount();</span>
<a href="#l66.14"></a><span id="l66.14"> </span>
<a href="#l66.15"></a><span id="l66.15">   // We need an identity so that updateFolder doesn't fail</span>
<a href="#l66.16"></a><span id="l66.16">   let localAccount = MailServices.accounts.createAccount();</span>
<a href="#l66.17"></a><span id="l66.17">   let identity = MailServices.accounts.createIdentity();</span>
<a href="#l66.18"></a><span id="l66.18">   localAccount.addIdentity(identity);</span>
<a href="#l66.19"></a><span id="l66.19">   localAccount.defaultIdentity = identity;</span>
<a href="#l66.20"></a><span id="l66.20">   localAccount.incomingServer = gLocalIncomingServer;</span>
<a href="#l66.21"></a><span id="l66.21">   MailServices.accounts.defaultAccount = localAccount;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l67.1"></a><span id="l67.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapHighWater.js</span>
<a href="#l67.2"></a><span id="l67.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapHighWater.js</span>
<a href="#l67.3"></a><span id="l67.3" class="difflineat">@@ -27,17 +27,17 @@ function addMessagesToServer(messages, m</span>
<a href="#l67.4"></a><span id="l67.4">                                       btoa(message.toMessageString()),</span>
<a href="#l67.5"></a><span id="l67.5">                                      null, null);</span>
<a href="#l67.6"></a><span id="l67.6">     mailbox.addMessage(new imapMessage(dataUri.spec, mailbox.uidnext++, []));</span>
<a href="#l67.7"></a><span id="l67.7">   });</span>
<a href="#l67.8"></a><span id="l67.8"> }</span>
<a href="#l67.9"></a><span id="l67.9"> </span>
<a href="#l67.10"></a><span id="l67.10"> function run_test()</span>
<a href="#l67.11"></a><span id="l67.11"> {</span>
<a href="#l67.12"></a><span id="l67.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l67.13"></a><span id="l67.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l67.14"></a><span id="l67.14"> </span>
<a href="#l67.15"></a><span id="l67.15">   /*</span>
<a href="#l67.16"></a><span id="l67.16">    * Set up an IMAP server.</span>
<a href="#l67.17"></a><span id="l67.17">    */</span>
<a href="#l67.18"></a><span id="l67.18">   gIMAPDaemon = new imapDaemon();</span>
<a href="#l67.19"></a><span id="l67.19">   gServer = makeServer(gIMAPDaemon, &quot;&quot;);</span>
<a href="#l67.20"></a><span id="l67.20">   gIMAPDaemon.createMailbox(&quot;folder 1&quot;, {subscribed : true});</span>
<a href="#l67.21"></a><span id="l67.21">   gIMAPIncomingServer = createLocalIMAPServer();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l68.1"></a><span id="l68.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_nsIMsgFolderListenerIMAP.js</span>
<a href="#l68.2"></a><span id="l68.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_nsIMsgFolderListenerIMAP.js</span>
<a href="#l68.3"></a><span id="l68.3" class="difflineat">@@ -201,17 +201,17 @@ function run_test()</span>
<a href="#l68.4"></a><span id="l68.4">   gMFNService.addListener(gMFListener, allTestedEvents);</span>
<a href="#l68.5"></a><span id="l68.5">   gIMAPDaemon = new imapDaemon();</span>
<a href="#l68.6"></a><span id="l68.6">   gServer = makeServer(gIMAPDaemon, &quot;&quot;);</span>
<a href="#l68.7"></a><span id="l68.7"> </span>
<a href="#l68.8"></a><span id="l68.8">   gIMAPIncomingServer = createLocalIMAPServer();</span>
<a href="#l68.9"></a><span id="l68.9"> </span>
<a href="#l68.10"></a><span id="l68.10">   // Also make sure a local folders server is created, as that's what is used</span>
<a href="#l68.11"></a><span id="l68.11">   // for sent items</span>
<a href="#l68.12"></a><span id="l68.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l68.13"></a><span id="l68.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l68.14"></a><span id="l68.14"> </span>
<a href="#l68.15"></a><span id="l68.15">   // We need an identity so that updateFolder doesn't fail</span>
<a href="#l68.16"></a><span id="l68.16">   let localAccount = MailServices.accounts.createAccount();</span>
<a href="#l68.17"></a><span id="l68.17">   let identity = MailServices.accounts.createIdentity();</span>
<a href="#l68.18"></a><span id="l68.18">   localAccount.addIdentity(identity);</span>
<a href="#l68.19"></a><span id="l68.19">   localAccount.defaultIdentity = identity;</span>
<a href="#l68.20"></a><span id="l68.20">   localAccount.incomingServer = gLocalIncomingServer;</span>
<a href="#l68.21"></a><span id="l68.21">   MailServices.accounts.defaultAccount = localAccount;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l69.1"></a><span id="l69.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_starttlsFailure.js</span>
<a href="#l69.2"></a><span id="l69.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_starttlsFailure.js</span>
<a href="#l69.3"></a><span id="l69.3" class="difflineat">@@ -27,17 +27,17 @@ var tests = [</span>
<a href="#l69.4"></a><span id="l69.4"> function setup() {</span>
<a href="#l69.5"></a><span id="l69.5">   // set up IMAP fakeserver and incoming server</span>
<a href="#l69.6"></a><span id="l69.6">   gIMAPDaemon = new imapDaemon();</span>
<a href="#l69.7"></a><span id="l69.7">   gIMAPServer = makeServer(gIMAPDaemon, &quot;&quot;, {dropOnStartTLS: true});</span>
<a href="#l69.8"></a><span id="l69.8">   gIMAPIncomingServer = createLocalIMAPServer();</span>
<a href="#l69.9"></a><span id="l69.9">   gIMAPIncomingServer.socketType = Ci.nsMsgSocketType.alwaysSTARTTLS;</span>
<a href="#l69.10"></a><span id="l69.10"> </span>
<a href="#l69.11"></a><span id="l69.11">   // we need a local account for the IMAP server to have its sent messages in</span>
<a href="#l69.12"></a><span id="l69.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l69.13"></a><span id="l69.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l69.14"></a><span id="l69.14"> </span>
<a href="#l69.15"></a><span id="l69.15">   // We need an identity so that updateFolder doesn't fail</span>
<a href="#l69.16"></a><span id="l69.16">   let imapAccount = MailServices.accounts.createAccount();</span>
<a href="#l69.17"></a><span id="l69.17">   let identity = MailServices.accounts.createIdentity();</span>
<a href="#l69.18"></a><span id="l69.18">   imapAccount.addIdentity(identity);</span>
<a href="#l69.19"></a><span id="l69.19">   imapAccount.defaultIdentity = identity;</span>
<a href="#l69.20"></a><span id="l69.20">   imapAccount.incomingServer = gIMAPIncomingServer;</span>
<a href="#l69.21"></a><span id="l69.21">   MailServices.accounts.defaultAccount = imapAccount;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l70.1"></a><span id="l70.1" class="difflineminus">--- a/mailnews/local/test/unit/head_maillocal.js</span>
<a href="#l70.2"></a><span id="l70.2" class="difflineplus">+++ b/mailnews/local/test/unit/head_maillocal.js</span>
<a href="#l70.3"></a><span id="l70.3" class="difflineat">@@ -39,18 +39,19 @@ function setupServerDaemon(debugOption) </span>
<a href="#l70.4"></a><span id="l70.4">   }</span>
<a href="#l70.5"></a><span id="l70.5">   var server = new nsMailServer(createHandler, daemon);</span>
<a href="#l70.6"></a><span id="l70.6">   if (debugOption)</span>
<a href="#l70.7"></a><span id="l70.7">     server.setDebugLevel(debugOption);</span>
<a href="#l70.8"></a><span id="l70.8">   return [daemon, server, extraProps];</span>
<a href="#l70.9"></a><span id="l70.9"> }</span>
<a href="#l70.10"></a><span id="l70.10"> </span>
<a href="#l70.11"></a><span id="l70.11"> function createPop3ServerAndLocalFolders() {</span>
<a href="#l70.12"></a><span id="l70.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l70.13"></a><span id="l70.13" class="difflineminus">-  let server = create_incoming_server(&quot;pop3&quot;, POP3_PORT, &quot;fred&quot;, &quot;wilma&quot;);</span>
<a href="#l70.14"></a><span id="l70.14" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l70.15"></a><span id="l70.15" class="difflineplus">+  let server = localAccountUtils.create_incoming_server(&quot;pop3&quot;, POP3_PORT,</span>
<a href="#l70.16"></a><span id="l70.16" class="difflineplus">+							&quot;fred&quot;, &quot;wilma&quot;);</span>
<a href="#l70.17"></a><span id="l70.17">   return server;</span>
<a href="#l70.18"></a><span id="l70.18"> }</span>
<a href="#l70.19"></a><span id="l70.19"> </span>
<a href="#l70.20"></a><span id="l70.20"> var gCopyListener =</span>
<a href="#l70.21"></a><span id="l70.21"> {</span>
<a href="#l70.22"></a><span id="l70.22">   callbackFunction: null,</span>
<a href="#l70.23"></a><span id="l70.23">   copiedMessageHeaderKeys: [],</span>
<a href="#l70.24"></a><span id="l70.24">   OnStartCopy: function() {},</span>
<a href="#l70.25"></a><span id="l70.25" class="difflineat">@@ -87,17 +88,17 @@ var gCopyListener =</span>
<a href="#l70.26"></a><span id="l70.26">  *                         message is copied</span>
<a href="#l70.27"></a><span id="l70.27">  */</span>
<a href="#l70.28"></a><span id="l70.28"> function copyFileMessageInLocalFolder(aMessageFile,</span>
<a href="#l70.29"></a><span id="l70.29">                                       aMessageFlags,</span>
<a href="#l70.30"></a><span id="l70.30">                                       aMessageKeywords,</span>
<a href="#l70.31"></a><span id="l70.31">                                       aMessageWindow,</span>
<a href="#l70.32"></a><span id="l70.32">                                       aCallback) {</span>
<a href="#l70.33"></a><span id="l70.33">   // Set up local folders</span>
<a href="#l70.34"></a><span id="l70.34" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l70.35"></a><span id="l70.35" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l70.36"></a><span id="l70.36"> </span>
<a href="#l70.37"></a><span id="l70.37">   gCopyListener.callbackFunction = aCallback;</span>
<a href="#l70.38"></a><span id="l70.38">   // Copy a message into the local folder</span>
<a href="#l70.39"></a><span id="l70.39">   MailServices.copy.CopyFileMessage(aMessageFile,</span>
<a href="#l70.40"></a><span id="l70.40">                                     gLocalInboxFolder,</span>
<a href="#l70.41"></a><span id="l70.41">                                     null, false,</span>
<a href="#l70.42"></a><span id="l70.42">                                     aMessageFlags,</span>
<a href="#l70.43"></a><span id="l70.43">                                     aMessageKeywords,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l71.1"></a><span id="l71.1" class="difflineminus">--- a/mailnews/local/test/unit/test_folderLoaded.js</span>
<a href="#l71.2"></a><span id="l71.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_folderLoaded.js</span>
<a href="#l71.3"></a><span id="l71.3" class="difflineat">@@ -25,17 +25,17 @@ var tests = [</span>
<a href="#l71.4"></a><span id="l71.4">   function setup()</span>
<a href="#l71.5"></a><span id="l71.5">   {</span>
<a href="#l71.6"></a><span id="l71.6">     do_timeout(5000, function() {</span>
<a href="#l71.7"></a><span id="l71.7">       // should be done by now</span>
<a href="#l71.8"></a><span id="l71.8">       do_check_true(false);</span>
<a href="#l71.9"></a><span id="l71.9">     });</span>
<a href="#l71.10"></a><span id="l71.10">  </span>
<a href="#l71.11"></a><span id="l71.11">     if (typeof gLocalInboxFolder == 'undefined')</span>
<a href="#l71.12"></a><span id="l71.12" class="difflineminus">-      loadLocalMailAccount();</span>
<a href="#l71.13"></a><span id="l71.13" class="difflineplus">+      localAccountUtils.loadLocalMailAccount();</span>
<a href="#l71.14"></a><span id="l71.14">     gLocalRootFolder.createSubfolder(&quot;target&quot;, null);</span>
<a href="#l71.15"></a><span id="l71.15">     gTargetFolder = gLocalRootFolder.getChildNamed(&quot;target&quot;);</span>
<a href="#l71.16"></a><span id="l71.16"> </span>
<a href="#l71.17"></a><span id="l71.17">     MailServices.copy.CopyFileMessage(gMsgFile1, gTargetFolder, null, false, 0,</span>
<a href="#l71.18"></a><span id="l71.18">                                       &quot;&quot;, asyncCopyListener, null);</span>
<a href="#l71.19"></a><span id="l71.19">     yield false;</span>
<a href="#l71.20"></a><span id="l71.20"> </span>
<a href="#l71.21"></a><span id="l71.21">     MailServices.copy.CopyFileMessage(gMsgFile2, gTargetFolder, null, false, 0,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l72.1"></a><span id="l72.1" class="difflineminus">--- a/mailnews/local/test/unit/test_movemailDownload.js</span>
<a href="#l72.2"></a><span id="l72.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_movemailDownload.js</span>
<a href="#l72.3"></a><span id="l72.3" class="difflineat">@@ -18,17 +18,17 @@ var gHdrIndex = 0;</span>
<a href="#l72.4"></a><span id="l72.4"> let gFiles = [&quot;../../../data/bugmail1&quot;,</span>
<a href="#l72.5"></a><span id="l72.5">               &quot;../../../data/draft1&quot;,</span>
<a href="#l72.6"></a><span id="l72.6">               &quot;../../../data/bugmail19&quot;];</span>
<a href="#l72.7"></a><span id="l72.7"> </span>
<a href="#l72.8"></a><span id="l72.8"> var gMoveMailInbox;</span>
<a href="#l72.9"></a><span id="l72.9"> </span>
<a href="#l72.10"></a><span id="l72.10"> function run_test()</span>
<a href="#l72.11"></a><span id="l72.11"> {</span>
<a href="#l72.12"></a><span id="l72.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l72.13"></a><span id="l72.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l72.14"></a><span id="l72.14">   </span>
<a href="#l72.15"></a><span id="l72.15">   let incoming = MailServices.accounts.createIncomingServer(&quot;&quot;, &quot;&quot;, &quot;movemail&quot;);</span>
<a href="#l72.16"></a><span id="l72.16">   let workingDir = Services.dirsvc.get(&quot;CurWorkD&quot;, Ci.nsIFile);</span>
<a href="#l72.17"></a><span id="l72.17">   let workingDirFile = workingDir.clone();</span>
<a href="#l72.18"></a><span id="l72.18">   let fullPath = workingDirFile.path + &quot;/data/movemailspool&quot;;</span>
<a href="#l72.19"></a><span id="l72.19">   workingDirFile.initWithPath(fullPath);</span>
<a href="#l72.20"></a><span id="l72.20">   // movemail truncates spool file, so make a copy, and use that</span>
<a href="#l72.21"></a><span id="l72.21">   workingDirFile.copyTo(null, &quot;movemailspool-copy&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l73.1"></a><span id="l73.1" class="difflineminus">--- a/mailnews/local/test/unit/test_msgIDParsing.js</span>
<a href="#l73.2"></a><span id="l73.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_msgIDParsing.js</span>
<a href="#l73.3"></a><span id="l73.3" class="difflineat">@@ -3,17 +3,17 @@</span>
<a href="#l73.4"></a><span id="l73.4">  */</span>
<a href="#l73.5"></a><span id="l73.5"> </span>
<a href="#l73.6"></a><span id="l73.6"> </span>
<a href="#l73.7"></a><span id="l73.7"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l73.8"></a><span id="l73.8"> </span>
<a href="#l73.9"></a><span id="l73.9"> var gMessenger = Cc[&quot;@mozilla.org/messenger;1&quot;].</span>
<a href="#l73.10"></a><span id="l73.10">                    createInstance(Ci.nsIMessenger);</span>
<a href="#l73.11"></a><span id="l73.11"> </span>
<a href="#l73.12"></a><span id="l73.12" class="difflineminus">-loadLocalMailAccount();</span>
<a href="#l73.13"></a><span id="l73.13" class="difflineplus">+localAccountUtils.loadLocalMailAccount();</span>
<a href="#l73.14"></a><span id="l73.14"> </span>
<a href="#l73.15"></a><span id="l73.15"> let localAccount = MailServices.accounts.FindAccountForServer(gLocalIncomingServer);</span>
<a href="#l73.16"></a><span id="l73.16"> let identity = MailServices.accounts.createIdentity();</span>
<a href="#l73.17"></a><span id="l73.17"> identity.email = &quot;bob@t2.example.net&quot;;</span>
<a href="#l73.18"></a><span id="l73.18"> localAccount.addIdentity(identity);</span>
<a href="#l73.19"></a><span id="l73.19"> localAccount.defaultIdentity = identity;</span>
<a href="#l73.20"></a><span id="l73.20"> </span>
<a href="#l73.21"></a><span id="l73.21"> function run_test()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l74.1"></a><span id="l74.1" class="difflineminus">--- a/mailnews/local/test/unit/test_nsIMsgParseMailMsgState.js</span>
<a href="#l74.2"></a><span id="l74.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_nsIMsgParseMailMsgState.js</span>
<a href="#l74.3"></a><span id="l74.3" class="difflineat">@@ -2,17 +2,17 @@</span>
<a href="#l74.4"></a><span id="l74.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l74.5"></a><span id="l74.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l74.6"></a><span id="l74.6"> </span>
<a href="#l74.7"></a><span id="l74.7"> Components.utils.import(&quot;resource:///modules/IOUtils.js&quot;);</span>
<a href="#l74.8"></a><span id="l74.8"> </span>
<a href="#l74.9"></a><span id="l74.9"> const MSG_LINEBREAK = &quot;\r\n&quot;;</span>
<a href="#l74.10"></a><span id="l74.10"> </span>
<a href="#l74.11"></a><span id="l74.11"> function run_test() {</span>
<a href="#l74.12"></a><span id="l74.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l74.13"></a><span id="l74.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l74.14"></a><span id="l74.14"> </span>
<a href="#l74.15"></a><span id="l74.15">   test_parse_headers_without_crash(&quot;./data/mailformed_recipients.eml&quot;);</span>
<a href="#l74.16"></a><span id="l74.16">   test_parse_headers_without_crash(&quot;./data/mailformed_subject.eml&quot;);</span>
<a href="#l74.17"></a><span id="l74.17">   test_parse_headers_without_crash(&quot;./data/invalid_mozilla_keys.eml&quot;);</span>
<a href="#l74.18"></a><span id="l74.18"> }</span>
<a href="#l74.19"></a><span id="l74.19"> </span>
<a href="#l74.20"></a><span id="l74.20"> function test_parse_headers_without_crash(eml) {</span>
<a href="#l74.21"></a><span id="l74.21">   let file = do_get_file(eml);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l75.1"></a><span id="l75.1" class="difflineminus">--- a/mailnews/local/test/unit/test_over2GBMailboxes.js</span>
<a href="#l75.2"></a><span id="l75.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_over2GBMailboxes.js</span>
<a href="#l75.3"></a><span id="l75.3" class="difflineat">@@ -8,17 +8,17 @@ const bugmail10 = do_get_file(&quot;../../../</span>
<a href="#l75.4"></a><span id="l75.4"> Services.prefs.setCharPref(&quot;mail.serverDefaultStoreContractID&quot;,</span>
<a href="#l75.5"></a><span id="l75.5">                            &quot;@mozilla.org/msgstore/berkeleystore;1&quot;);</span>
<a href="#l75.6"></a><span id="l75.6"> </span>
<a href="#l75.7"></a><span id="l75.7"> var gLocalInboxSize;</span>
<a href="#l75.8"></a><span id="l75.8"> var gLocalTrashFolder;</span>
<a href="#l75.9"></a><span id="l75.9"> </span>
<a href="#l75.10"></a><span id="l75.10"> function run_test()</span>
<a href="#l75.11"></a><span id="l75.11"> {</span>
<a href="#l75.12"></a><span id="l75.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l75.13"></a><span id="l75.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l75.14"></a><span id="l75.14"> </span>
<a href="#l75.15"></a><span id="l75.15">   // &quot;Master&quot; do_test_pending(), paired with a do_test_finished() at the end of</span>
<a href="#l75.16"></a><span id="l75.16">   // all the operations.</span>
<a href="#l75.17"></a><span id="l75.17">   do_test_pending();</span>
<a href="#l75.18"></a><span id="l75.18"> </span>
<a href="#l75.19"></a><span id="l75.19">   let inboxFile = gLocalInboxFolder.filePath;</span>
<a href="#l75.20"></a><span id="l75.20"> </span>
<a href="#l75.21"></a><span id="l75.21">   let neededFreeSpace = 0x100000000;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l76.1"></a><span id="l76.1" class="difflineminus">--- a/mailnews/local/test/unit/test_over4GBMailboxes.js</span>
<a href="#l76.2"></a><span id="l76.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_over4GBMailboxes.js</span>
<a href="#l76.3"></a><span id="l76.3" class="difflineat">@@ -94,17 +94,17 @@ function growInbox(aWantedSize) {</span>
<a href="#l76.4"></a><span id="l76.4">   while (gInboxFile.fileSize &lt; aWantedSize);</span>
<a href="#l76.5"></a><span id="l76.5"> </span>
<a href="#l76.6"></a><span id="l76.6">   do_print(&quot;Local inbox size = &quot; + gInboxFile.fileSize + &quot;bytes = &quot; +</span>
<a href="#l76.7"></a><span id="l76.7">            gInboxFile.fileSize / 1024 / 1024 + &quot;MiB&quot;);</span>
<a href="#l76.8"></a><span id="l76.8"> }</span>
<a href="#l76.9"></a><span id="l76.9"> </span>
<a href="#l76.10"></a><span id="l76.10"> function run_test()</span>
<a href="#l76.11"></a><span id="l76.11"> {</span>
<a href="#l76.12"></a><span id="l76.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l76.13"></a><span id="l76.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l76.14"></a><span id="l76.14"> </span>
<a href="#l76.15"></a><span id="l76.15">   // &quot;Master&quot; do_test_pending(), paired with a do_test_finished() at the end of</span>
<a href="#l76.16"></a><span id="l76.16">   // all the operations.</span>
<a href="#l76.17"></a><span id="l76.17">   do_test_pending();</span>
<a href="#l76.18"></a><span id="l76.18"> </span>
<a href="#l76.19"></a><span id="l76.19">   gInboxFile = gLocalInboxFolder.filePath;</span>
<a href="#l76.20"></a><span id="l76.20"> </span>
<a href="#l76.21"></a><span id="l76.21">   let neededFreeSpace = kSizeLimit + 0x10000000; // +256MiB</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l77.1"></a><span id="l77.1" class="difflineminus">--- a/mailnews/local/test/unit/test_pop3AuthMethods.js</span>
<a href="#l77.2"></a><span id="l77.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_pop3AuthMethods.js</span>
<a href="#l77.3"></a><span id="l77.3" class="difflineat">@@ -168,14 +168,14 @@ function run_test() {</span>
<a href="#l77.4"></a><span id="l77.4"> </span>
<a href="#l77.5"></a><span id="l77.5">   ssd = setupServerDaemon();</span>
<a href="#l77.6"></a><span id="l77.6">   daemon = ssd[0];</span>
<a href="#l77.7"></a><span id="l77.7">   server = ssd[1];</span>
<a href="#l77.8"></a><span id="l77.8">   handler = ssd[2];</span>
<a href="#l77.9"></a><span id="l77.9">   server.start(POP3_PORT);</span>
<a href="#l77.10"></a><span id="l77.10"> </span>
<a href="#l77.11"></a><span id="l77.11">   //incomingServer = createPop3ServerAndLocalFolders();</span>
<a href="#l77.12"></a><span id="l77.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l77.13"></a><span id="l77.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l77.14"></a><span id="l77.14"> </span>
<a href="#l77.15"></a><span id="l77.15">   do_test_pending();</span>
<a href="#l77.16"></a><span id="l77.16"> </span>
<a href="#l77.17"></a><span id="l77.17">   testNext();</span>
<a href="#l77.18"></a><span id="l77.18"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l78.1"></a><span id="l78.1" class="difflineminus">--- a/mailnews/local/test/unit/test_pop3FilterActions.js</span>
<a href="#l78.2"></a><span id="l78.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_pop3FilterActions.js</span>
<a href="#l78.3"></a><span id="l78.3" class="difflineat">@@ -116,17 +116,17 @@ function folderCount(folder)</span>
<a href="#l78.4"></a><span id="l78.4">   return count;</span>
<a href="#l78.5"></a><span id="l78.5"> }</span>
<a href="#l78.6"></a><span id="l78.6"> </span>
<a href="#l78.7"></a><span id="l78.7"> function run_test()</span>
<a href="#l78.8"></a><span id="l78.8"> {</span>
<a href="#l78.9"></a><span id="l78.9">   // Make sure we're not quarantining messages</span>
<a href="#l78.10"></a><span id="l78.10">   Services.prefs.setBoolPref(&quot;mailnews.downloadToTempFile&quot;, false);</span>
<a href="#l78.11"></a><span id="l78.11">   if (!gLocalInboxFolder)</span>
<a href="#l78.12"></a><span id="l78.12" class="difflineminus">-    loadLocalMailAccount();</span>
<a href="#l78.13"></a><span id="l78.13" class="difflineplus">+    localAccountUtils.loadLocalMailAccount();</span>
<a href="#l78.14"></a><span id="l78.14"> </span>
<a href="#l78.15"></a><span id="l78.15">   gMoveFolder = gLocalIncomingServer.rootFolder.createLocalSubfolder(&quot;MoveFolder&quot;);</span>
<a href="#l78.16"></a><span id="l78.16"> </span>
<a href="#l78.17"></a><span id="l78.17">   MailServices.mailSession.AddFolderListener(FolderListener,</span>
<a href="#l78.18"></a><span id="l78.18">                                              Ci.nsIFolderListener.event |</span>
<a href="#l78.19"></a><span id="l78.19">                                                Ci.nsIFolderListener.added |</span>
<a href="#l78.20"></a><span id="l78.20">                                                Ci.nsIFolderListener.removed);</span>
<a href="#l78.21"></a><span id="l78.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l79.1"></a><span id="l79.1" class="difflineminus">--- a/mailnews/local/test/unit/test_pop3GSSAPIFail.js</span>
<a href="#l79.2"></a><span id="l79.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_pop3GSSAPIFail.js</span>
<a href="#l79.3"></a><span id="l79.3" class="difflineat">@@ -201,14 +201,14 @@ function run_test() {</span>
<a href="#l79.4"></a><span id="l79.4">     var handler = new GSSAPIFail_handler(d);</span>
<a href="#l79.5"></a><span id="l79.5">     handler.kAuthSchemes = authSchemes;</span>
<a href="#l79.6"></a><span id="l79.6">     return handler;</span>
<a href="#l79.7"></a><span id="l79.7">   }</span>
<a href="#l79.8"></a><span id="l79.8">   server = new nsMailServer(createHandler, daemon);</span>
<a href="#l79.9"></a><span id="l79.9">   server.start(POP3_PORT);</span>
<a href="#l79.10"></a><span id="l79.10"> </span>
<a href="#l79.11"></a><span id="l79.11">   //incomingServer = createPop3ServerAndLocalFolders();</span>
<a href="#l79.12"></a><span id="l79.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l79.13"></a><span id="l79.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l79.14"></a><span id="l79.14"> </span>
<a href="#l79.15"></a><span id="l79.15">   do_test_pending();</span>
<a href="#l79.16"></a><span id="l79.16"> </span>
<a href="#l79.17"></a><span id="l79.17">   testNext();</span>
<a href="#l79.18"></a><span id="l79.18"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l80.1"></a><span id="l80.1" class="difflineminus">--- a/mailnews/local/test/unit/test_pop3MoveFilter.js</span>
<a href="#l80.2"></a><span id="l80.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_pop3MoveFilter.js</span>
<a href="#l80.3"></a><span id="l80.3" class="difflineat">@@ -108,17 +108,17 @@ function folderCount(folder)</span>
<a href="#l80.4"></a><span id="l80.4">   return count;</span>
<a href="#l80.5"></a><span id="l80.5"> }</span>
<a href="#l80.6"></a><span id="l80.6"> </span>
<a href="#l80.7"></a><span id="l80.7"> function run_test()</span>
<a href="#l80.8"></a><span id="l80.8"> {</span>
<a href="#l80.9"></a><span id="l80.9">   // Make sure we're not quarantining messages</span>
<a href="#l80.10"></a><span id="l80.10">   Services.prefs.setBoolPref(&quot;mailnews.downloadToTempFile&quot;, false);</span>
<a href="#l80.11"></a><span id="l80.11">   if (!gLocalInboxFolder)</span>
<a href="#l80.12"></a><span id="l80.12" class="difflineminus">-    loadLocalMailAccount();</span>
<a href="#l80.13"></a><span id="l80.13" class="difflineplus">+    localAccountUtils.loadLocalMailAccount();</span>
<a href="#l80.14"></a><span id="l80.14"> </span>
<a href="#l80.15"></a><span id="l80.15">   gMoveFolder = gLocalIncomingServer.rootFolder.createLocalSubfolder(&quot;MoveFolder&quot;);</span>
<a href="#l80.16"></a><span id="l80.16"> </span>
<a href="#l80.17"></a><span id="l80.17">   MailServices.mailSession.AddFolderListener(FolderListener,</span>
<a href="#l80.18"></a><span id="l80.18">                                              Ci.nsIFolderListener.event |</span>
<a href="#l80.19"></a><span id="l80.19">                                                Ci.nsIFolderListener.added |</span>
<a href="#l80.20"></a><span id="l80.20">                                                Ci.nsIFolderListener.removed);</span>
<a href="#l80.21"></a><span id="l80.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l81.1"></a><span id="l81.1" class="difflineminus">--- a/mailnews/local/test/unit/test_pop3MoveFilter2.js</span>
<a href="#l81.2"></a><span id="l81.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_pop3MoveFilter2.js</span>
<a href="#l81.3"></a><span id="l81.3" class="difflineat">@@ -97,17 +97,17 @@ function folderCount(folder)</span>
<a href="#l81.4"></a><span id="l81.4">   return count;</span>
<a href="#l81.5"></a><span id="l81.5"> }</span>
<a href="#l81.6"></a><span id="l81.6"> </span>
<a href="#l81.7"></a><span id="l81.7"> function run_test()</span>
<a href="#l81.8"></a><span id="l81.8"> {</span>
<a href="#l81.9"></a><span id="l81.9">   // Make sure we're not quarantining messages</span>
<a href="#l81.10"></a><span id="l81.10">   Services.prefs.setBoolPref(&quot;mailnews.downloadToTempFile&quot;, false);</span>
<a href="#l81.11"></a><span id="l81.11">   if (!gLocalInboxFolder)</span>
<a href="#l81.12"></a><span id="l81.12" class="difflineminus">-    loadLocalMailAccount();</span>
<a href="#l81.13"></a><span id="l81.13" class="difflineplus">+    localAccountUtils.loadLocalMailAccount();</span>
<a href="#l81.14"></a><span id="l81.14"> </span>
<a href="#l81.15"></a><span id="l81.15">   gMoveFolder = gLocalIncomingServer.rootFolder.createLocalSubfolder(&quot;MoveFolder&quot;);</span>
<a href="#l81.16"></a><span id="l81.16"> </span>
<a href="#l81.17"></a><span id="l81.17">   MailServices.mailSession.AddFolderListener(FolderListener,</span>
<a href="#l81.18"></a><span id="l81.18">                                              Ci.nsIFolderListener.event |</span>
<a href="#l81.19"></a><span id="l81.19">                                                Ci.nsIFolderListener.added |</span>
<a href="#l81.20"></a><span id="l81.20">                                                Ci.nsIFolderListener.removed);</span>
<a href="#l81.21"></a><span id="l81.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l82.1"></a><span id="l82.1" class="difflineminus">--- a/mailnews/local/test/unit/test_pop3Password.js</span>
<a href="#l82.2"></a><span id="l82.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_pop3Password.js</span>
<a href="#l82.3"></a><span id="l82.3" class="difflineat">@@ -132,17 +132,17 @@ function run_test() {</span>
<a href="#l82.4"></a><span id="l82.4">   // Set the server expected username &amp; password to what we have in signons.txt</span>
<a href="#l82.5"></a><span id="l82.5">   handler.kUsername = &quot;testpop3&quot;;</span>
<a href="#l82.6"></a><span id="l82.6">   handler.kPassword = &quot;pop3test&quot;;</span>
<a href="#l82.7"></a><span id="l82.7"> </span>
<a href="#l82.8"></a><span id="l82.8">   // Set up the basic accounts and folders.</span>
<a href="#l82.9"></a><span id="l82.9">   // We would use createPop3ServerAndLocalFolders() however we want to have</span>
<a href="#l82.10"></a><span id="l82.10">   // a different username and NO password for this test (as we expect to load</span>
<a href="#l82.11"></a><span id="l82.11">   // it from signons.txt).</span>
<a href="#l82.12"></a><span id="l82.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l82.13"></a><span id="l82.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l82.14"></a><span id="l82.14"> </span>
<a href="#l82.15"></a><span id="l82.15">   incomingServer = MailServices.accounts.createIncomingServer(&quot;testpop3&quot;, &quot;localhost&quot;, &quot;pop3&quot;);</span>
<a href="#l82.16"></a><span id="l82.16"> </span>
<a href="#l82.17"></a><span id="l82.17">   incomingServer.port = POP3_PORT;</span>
<a href="#l82.18"></a><span id="l82.18"> </span>
<a href="#l82.19"></a><span id="l82.19">   // Check that we haven't got any messages in the folder, if we have its a test</span>
<a href="#l82.20"></a><span id="l82.20">   // setup issue.</span>
<a href="#l82.21"></a><span id="l82.21">   do_check_eq(gLocalInboxFolder.getTotalMessages(false), 0);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l83.1"></a><span id="l83.1" class="difflineminus">--- a/mailnews/local/test/unit/test_pop3Password3.js</span>
<a href="#l83.2"></a><span id="l83.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_pop3Password3.js</span>
<a href="#l83.3"></a><span id="l83.3" class="difflineat">@@ -19,17 +19,17 @@ function run_test()</span>
<a href="#l83.4"></a><span id="l83.4"> </span>
<a href="#l83.5"></a><span id="l83.5">   // Copy the file to the profile directory for a PAB</span>
<a href="#l83.6"></a><span id="l83.6">   signons.copyTo(gProfileDir, &quot;signons.txt&quot;);</span>
<a href="#l83.7"></a><span id="l83.7"> </span>
<a href="#l83.8"></a><span id="l83.8">   // Set up the basic accounts and folders.</span>
<a href="#l83.9"></a><span id="l83.9">   // We would use createPop3ServerAndLocalFolders() however we want to have</span>
<a href="#l83.10"></a><span id="l83.10">   // a different username and NO password for this test (as we expect to load</span>
<a href="#l83.11"></a><span id="l83.11">   // it from signons.txt).</span>
<a href="#l83.12"></a><span id="l83.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l83.13"></a><span id="l83.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l83.14"></a><span id="l83.14"> </span>
<a href="#l83.15"></a><span id="l83.15">   let incomingServer1 = MailServices.accounts.createIncomingServer(kUser1, kHostname,</span>
<a href="#l83.16"></a><span id="l83.16">                                                                    kProtocol);</span>
<a href="#l83.17"></a><span id="l83.17"> </span>
<a href="#l83.18"></a><span id="l83.18">   let incomingServer2 = MailServices.accounts.createIncomingServer(kUser2, kHostname,</span>
<a href="#l83.19"></a><span id="l83.19">                                                                    kProtocol);</span>
<a href="#l83.20"></a><span id="l83.20"> </span>
<a href="#l83.21"></a><span id="l83.21">   var count = {};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l84.1"></a><span id="l84.1" class="difflineminus">--- a/mailnews/local/test/unit/test_pop3PasswordFailure.js</span>
<a href="#l84.2"></a><span id="l84.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_pop3PasswordFailure.js</span>
<a href="#l84.3"></a><span id="l84.3" class="difflineat">@@ -174,17 +174,17 @@ function run_test()</span>
<a href="#l84.4"></a><span id="l84.4">   // Set the server expected username &amp; password to what we have in signons.txt</span>
<a href="#l84.5"></a><span id="l84.5">   handler.kUsername = kUserName;</span>
<a href="#l84.6"></a><span id="l84.6">   handler.kPassword = kValidPassword;</span>
<a href="#l84.7"></a><span id="l84.7"> </span>
<a href="#l84.8"></a><span id="l84.8">   // Set up the basic accounts and folders.</span>
<a href="#l84.9"></a><span id="l84.9">   // We would use createPop3ServerAndLocalFolders() however we want to have</span>
<a href="#l84.10"></a><span id="l84.10">   // a different username and NO password for this test (as we expect to load</span>
<a href="#l84.11"></a><span id="l84.11">   // it from signons.txt).</span>
<a href="#l84.12"></a><span id="l84.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l84.13"></a><span id="l84.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l84.14"></a><span id="l84.14"> </span>
<a href="#l84.15"></a><span id="l84.15">   incomingServer = MailServices.accounts.createIncomingServer(kUserName, &quot;localhost&quot;, &quot;pop3&quot;);</span>
<a href="#l84.16"></a><span id="l84.16"> </span>
<a href="#l84.17"></a><span id="l84.17">   incomingServer.port = POP3_PORT;</span>
<a href="#l84.18"></a><span id="l84.18"> </span>
<a href="#l84.19"></a><span id="l84.19">   // Check that we haven't got any messages in the folder, if we have its a test</span>
<a href="#l84.20"></a><span id="l84.20">   // setup issue.</span>
<a href="#l84.21"></a><span id="l84.21">   do_check_eq(gLocalInboxFolder.getTotalMessages(false), 0);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l85.1"></a><span id="l85.1" class="difflineminus">--- a/mailnews/local/test/unit/test_pop3PasswordFailure2.js</span>
<a href="#l85.2"></a><span id="l85.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_pop3PasswordFailure2.js</span>
<a href="#l85.3"></a><span id="l85.3" class="difflineat">@@ -192,17 +192,17 @@ function run_test()</span>
<a href="#l85.4"></a><span id="l85.4">     return handler;</span>
<a href="#l85.5"></a><span id="l85.5">   }</span>
<a href="#l85.6"></a><span id="l85.6">   server = new nsMailServer(createHandler, daemon);</span>
<a href="#l85.7"></a><span id="l85.7"> </span>
<a href="#l85.8"></a><span id="l85.8">   // Set up the basic accounts and folders.</span>
<a href="#l85.9"></a><span id="l85.9">   // We would use createPop3ServerAndLocalFolders() however we want to have</span>
<a href="#l85.10"></a><span id="l85.10">   // a different username and NO password for this test (as we expect to load</span>
<a href="#l85.11"></a><span id="l85.11">   // it from signons.txt).</span>
<a href="#l85.12"></a><span id="l85.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l85.13"></a><span id="l85.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l85.14"></a><span id="l85.14"> </span>
<a href="#l85.15"></a><span id="l85.15">   incomingServer = MailServices.accounts</span>
<a href="#l85.16"></a><span id="l85.16">                     .createIncomingServer(kUserName, &quot;localhost&quot;, &quot;pop3&quot;);</span>
<a href="#l85.17"></a><span id="l85.17">   incomingServer.port = POP3_PORT;</span>
<a href="#l85.18"></a><span id="l85.18"> </span>
<a href="#l85.19"></a><span id="l85.19">   // Check that we haven't got any messages in the folder, if we have its a test</span>
<a href="#l85.20"></a><span id="l85.20">   // setup issue.</span>
<a href="#l85.21"></a><span id="l85.21">   do_check_eq(gLocalInboxFolder.getTotalMessages(false), 0);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l86.1"></a><span id="l86.1" class="difflineminus">--- a/mailnews/local/test/unit/test_pop3PasswordFailure3.js</span>
<a href="#l86.2"></a><span id="l86.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_pop3PasswordFailure3.js</span>
<a href="#l86.3"></a><span id="l86.3" class="difflineat">@@ -194,17 +194,17 @@ function run_test()</span>
<a href="#l86.4"></a><span id="l86.4">   }</span>
<a href="#l86.5"></a><span id="l86.5">   server = new nsMailServer(createHandler, daemon);</span>
<a href="#l86.6"></a><span id="l86.6"> </span>
<a href="#l86.7"></a><span id="l86.7"> </span>
<a href="#l86.8"></a><span id="l86.8">   // Set up the basic accounts and folders.</span>
<a href="#l86.9"></a><span id="l86.9">   // We would use createPop3ServerAndLocalFolders() however we want to have</span>
<a href="#l86.10"></a><span id="l86.10">   // a different username and NO password for this test (as we expect to load</span>
<a href="#l86.11"></a><span id="l86.11">   // it from signons.txt).</span>
<a href="#l86.12"></a><span id="l86.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l86.13"></a><span id="l86.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l86.14"></a><span id="l86.14"> </span>
<a href="#l86.15"></a><span id="l86.15">   incomingServer = MailServices.accounts</span>
<a href="#l86.16"></a><span id="l86.16">                     .createIncomingServer(kUserName, &quot;localhost&quot;, &quot;pop3&quot;);</span>
<a href="#l86.17"></a><span id="l86.17">   incomingServer.port = POP3_PORT;</span>
<a href="#l86.18"></a><span id="l86.18"> </span>
<a href="#l86.19"></a><span id="l86.19">   // Check that we haven't got any messages in the folder, if we have its a test</span>
<a href="#l86.20"></a><span id="l86.20">   // setup issue.</span>
<a href="#l86.21"></a><span id="l86.21">   do_check_eq(gLocalInboxFolder.getTotalMessages(false), 0);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l87.1"></a><span id="l87.1" class="difflineminus">--- a/mailnews/local/test/unit/test_verifyLogon.js</span>
<a href="#l87.2"></a><span id="l87.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_verifyLogon.js</span>
<a href="#l87.3"></a><span id="l87.3" class="difflineat">@@ -81,17 +81,17 @@ function run_test()</span>
<a href="#l87.4"></a><span id="l87.4">     return handler;</span>
<a href="#l87.5"></a><span id="l87.5">   }</span>
<a href="#l87.6"></a><span id="l87.6">   server = new nsMailServer(createHandler, daemon);</span>
<a href="#l87.7"></a><span id="l87.7"> </span>
<a href="#l87.8"></a><span id="l87.8">   // Set up the basic accounts and folders.</span>
<a href="#l87.9"></a><span id="l87.9">   // We would use createPop3ServerAndLocalFolders() however we want to have</span>
<a href="#l87.10"></a><span id="l87.10">   // a different username and NO password for this test (as we expect to load</span>
<a href="#l87.11"></a><span id="l87.11">   // it from signons.txt).</span>
<a href="#l87.12"></a><span id="l87.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l87.13"></a><span id="l87.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l87.14"></a><span id="l87.14"> </span>
<a href="#l87.15"></a><span id="l87.15"> </span>
<a href="#l87.16"></a><span id="l87.16">   incomingServer = MailServices.accounts</span>
<a href="#l87.17"></a><span id="l87.17">                     .createIncomingServer(kUserName,&quot;localhost&quot;, &quot;pop3&quot;);</span>
<a href="#l87.18"></a><span id="l87.18"> </span>
<a href="#l87.19"></a><span id="l87.19">   incomingServer.port = POP3_PORT;</span>
<a href="#l87.20"></a><span id="l87.20"> </span>
<a href="#l87.21"></a><span id="l87.21">   do_test_pending();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l88.1"></a><span id="l88.1" class="difflineminus">--- a/mailnews/mime/test/unit/test_mimeStreaming.js</span>
<a href="#l88.2"></a><span id="l88.2" class="difflineplus">+++ b/mailnews/mime/test/unit/test_mimeStreaming.js</span>
<a href="#l88.3"></a><span id="l88.3" class="difflineat">@@ -23,17 +23,17 @@ let gUrlListener = {</span>
<a href="#l88.4"></a><span id="l88.4">   OnStartRunningUrl: function (aUrl) {</span>
<a href="#l88.5"></a><span id="l88.5">   },</span>
<a href="#l88.6"></a><span id="l88.6">   OnStopRunningUrl: function (aUrl, aExitCode) {</span>
<a href="#l88.7"></a><span id="l88.7">     do_test_finished()</span>
<a href="#l88.8"></a><span id="l88.8">   },</span>
<a href="#l88.9"></a><span id="l88.9"> };</span>
<a href="#l88.10"></a><span id="l88.10"> </span>
<a href="#l88.11"></a><span id="l88.11"> </span>
<a href="#l88.12"></a><span id="l88.12" class="difflineminus">-loadLocalMailAccount();</span>
<a href="#l88.13"></a><span id="l88.13" class="difflineplus">+localAccountUtils.loadLocalMailAccount();</span>
<a href="#l88.14"></a><span id="l88.14"> </span>
<a href="#l88.15"></a><span id="l88.15"> function run_test()</span>
<a href="#l88.16"></a><span id="l88.16"> {</span>
<a href="#l88.17"></a><span id="l88.17">   do_test_pending();</span>
<a href="#l88.18"></a><span id="l88.18">   gLocalInboxFolder.QueryInterface(Ci.nsIMsgLocalMailFolder);</span>
<a href="#l88.19"></a><span id="l88.19">   for each(let fileName in gTestFiles) {</span>
<a href="#l88.20"></a><span id="l88.20">     gLocalInboxFolder.addMessage(IOUtils.loadFileToString(do_get_file(fileName)));</span>
<a href="#l88.21"></a><span id="l88.21">   };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l89.1"></a><span id="l89.1" class="difflineminus">--- a/mailnews/news/test/unit/head_server_setup.js</span>
<a href="#l89.2"></a><span id="l89.2" class="difflineplus">+++ b/mailnews/news/test/unit/head_server_setup.js</span>
<a href="#l89.3"></a><span id="l89.3" class="difflineat">@@ -108,17 +108,18 @@ function subscribeServer(incomingServer)</span>
<a href="#l89.4"></a><span id="l89.4">   // Only allow one connection</span>
<a href="#l89.5"></a><span id="l89.5">   incomingServer.maximumConnectionsNumber = 1;</span>
<a href="#l89.6"></a><span id="l89.6"> }</span>
<a href="#l89.7"></a><span id="l89.7"> </span>
<a href="#l89.8"></a><span id="l89.8"> // Sets up the client-side portion of fakeserver</span>
<a href="#l89.9"></a><span id="l89.9"> function setupLocalServer(port) {</span>
<a href="#l89.10"></a><span id="l89.10">   if (_server != null)</span>
<a href="#l89.11"></a><span id="l89.11">     return _server;</span>
<a href="#l89.12"></a><span id="l89.12" class="difflineminus">-  let server = create_incoming_server(&quot;nntp&quot;, port, null, null);</span>
<a href="#l89.13"></a><span id="l89.13" class="difflineplus">+  let server = localAccountUtils.create_incoming_server(&quot;nntp&quot;, port,</span>
<a href="#l89.14"></a><span id="l89.14" class="difflineplus">+							null, null);</span>
<a href="#l89.15"></a><span id="l89.15">   subscribeServer(server);</span>
<a href="#l89.16"></a><span id="l89.16"> </span>
<a href="#l89.17"></a><span id="l89.17">   _server = server;</span>
<a href="#l89.18"></a><span id="l89.18"> </span>
<a href="#l89.19"></a><span id="l89.19">   return server;</span>
<a href="#l89.20"></a><span id="l89.20"> }</span>
<a href="#l89.21"></a><span id="l89.21"> </span>
<a href="#l89.22"></a><span id="l89.22"> const URLCreator = MailServices.nntp.QueryInterface(Ci.nsIProtocolHandler);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l90.1"></a><span id="l90.1" class="difflineminus">--- a/mailnews/news/test/unit/test_nntpPassword3.js</span>
<a href="#l90.2"></a><span id="l90.2" class="difflineplus">+++ b/mailnews/news/test/unit/test_nntpPassword3.js</span>
<a href="#l90.3"></a><span id="l90.3" class="difflineat">@@ -16,17 +16,17 @@ function run_test()</span>
<a href="#l90.4"></a><span id="l90.4"> {</span>
<a href="#l90.5"></a><span id="l90.5">   // Passwords File (generated from Mozilla 1.8 branch).</span>
<a href="#l90.6"></a><span id="l90.6">   var signons = do_get_file(&quot;../../../data/signons-mailnews1.8.txt&quot;);</span>
<a href="#l90.7"></a><span id="l90.7"> </span>
<a href="#l90.8"></a><span id="l90.8">   // Copy the file to the profile directory for a PAB</span>
<a href="#l90.9"></a><span id="l90.9">   signons.copyTo(gProfileDir, &quot;signons.txt&quot;);</span>
<a href="#l90.10"></a><span id="l90.10"> </span>
<a href="#l90.11"></a><span id="l90.11">   // Set up the basic accounts and folders.</span>
<a href="#l90.12"></a><span id="l90.12" class="difflineminus">-  loadLocalMailAccount();</span>
<a href="#l90.13"></a><span id="l90.13" class="difflineplus">+  localAccountUtils.loadLocalMailAccount();</span>
<a href="#l90.14"></a><span id="l90.14"> </span>
<a href="#l90.15"></a><span id="l90.15">   var incomingServer = MailServices.accounts.createIncomingServer(null, kHostname,</span>
<a href="#l90.16"></a><span id="l90.16">                                                                   kProtocol);</span>
<a href="#l90.17"></a><span id="l90.17"> </span>
<a href="#l90.18"></a><span id="l90.18">   // Force move to new credentials</span>
<a href="#l90.19"></a><span id="l90.19">   incomingServer.rootFolder.QueryInterface(Ci.nsIMsgNewsFolder)</span>
<a href="#l90.20"></a><span id="l90.20">                            .migrateLegacyCredentials();</span>
<a href="#l90.21"></a><span id="l90.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l91.1"></a><span id="l91.1" class="difflineminus">--- a/mailnews/test/resources/IMAPpump.js</span>
<a href="#l91.2"></a><span id="l91.2" class="difflineplus">+++ b/mailnews/test/resources/IMAPpump.js</span>
<a href="#l91.3"></a><span id="l91.3" class="difflineat">@@ -64,30 +64,31 @@ function setupIMAPPump(extensions)</span>
<a href="#l91.4"></a><span id="l91.4">       return handler;</span>
<a href="#l91.5"></a><span id="l91.5">     }</span>
<a href="#l91.6"></a><span id="l91.6">     var server = new nsMailServer(createHandler, daemon);</span>
<a href="#l91.7"></a><span id="l91.7">     server.start(IMAP_PORT);</span>
<a href="#l91.8"></a><span id="l91.8">     return server;</span>
<a href="#l91.9"></a><span id="l91.9">   }</span>
<a href="#l91.10"></a><span id="l91.10"> </span>
<a href="#l91.11"></a><span id="l91.11">   function createLocalIMAPServer() {</span>
<a href="#l91.12"></a><span id="l91.12" class="difflineminus">-    let server = create_incoming_server(&quot;imap&quot;, IMAP_PORT, &quot;user&quot;, &quot;password&quot;);</span>
<a href="#l91.13"></a><span id="l91.13" class="difflineplus">+    let server = localAccountUtils.create_incoming_server(&quot;imap&quot;, IMAP_PORT,</span>
<a href="#l91.14"></a><span id="l91.14" class="difflineplus">+							  &quot;user&quot;, &quot;password&quot;);</span>
<a href="#l91.15"></a><span id="l91.15">     server.QueryInterface(Ci.nsIImapIncomingServer);</span>
<a href="#l91.16"></a><span id="l91.16">     return server;</span>
<a href="#l91.17"></a><span id="l91.17">   }</span>
<a href="#l91.18"></a><span id="l91.18"> </span>
<a href="#l91.19"></a><span id="l91.19">   // end copy from head_server.js</span>
<a href="#l91.20"></a><span id="l91.20"> </span>
<a href="#l91.21"></a><span id="l91.21">   gIMAPDaemon = new imapDaemon();</span>
<a href="#l91.22"></a><span id="l91.22">   gIMAPServer = makeServer(gIMAPDaemon, extensions);</span>
<a href="#l91.23"></a><span id="l91.23"> </span>
<a href="#l91.24"></a><span id="l91.24">   gIMAPIncomingServer = createLocalIMAPServer();</span>
<a href="#l91.25"></a><span id="l91.25"> </span>
<a href="#l91.26"></a><span id="l91.26">   if (!this.gLocalInboxFolder)</span>
<a href="#l91.27"></a><span id="l91.27" class="difflineminus">-    loadLocalMailAccount();</span>
<a href="#l91.28"></a><span id="l91.28" class="difflineplus">+    localAccountUtils.loadLocalMailAccount();</span>
<a href="#l91.29"></a><span id="l91.29"> </span>
<a href="#l91.30"></a><span id="l91.30">   // We need an identity so that updateFolder doesn't fail</span>
<a href="#l91.31"></a><span id="l91.31">   let localAccount = MailServices.accounts.createAccount();</span>
<a href="#l91.32"></a><span id="l91.32">   let identity = MailServices.accounts.createIdentity();</span>
<a href="#l91.33"></a><span id="l91.33">   localAccount.addIdentity(identity);</span>
<a href="#l91.34"></a><span id="l91.34">   localAccount.defaultIdentity = identity;</span>
<a href="#l91.35"></a><span id="l91.35">   localAccount.incomingServer = gLocalIncomingServer;</span>
<a href="#l91.36"></a><span id="l91.36">   MailServices.accounts.defaultAccount = localAccount;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l92.1"></a><span id="l92.1" class="difflineminus">--- a/mailnews/test/resources/POP3pump.js</span>
<a href="#l92.2"></a><span id="l92.2" class="difflineplus">+++ b/mailnews/test/resources/POP3pump.js</span>
<a href="#l92.3"></a><span id="l92.3" class="difflineat">@@ -84,21 +84,21 @@ POP3Pump.prototype._setupServerDaemon = </span>
<a href="#l92.4"></a><span id="l92.4">     this._server.setDebugLevel(aDebugOption);</span>
<a href="#l92.5"></a><span id="l92.5">   return [this._daemon, this._server];</span>
<a href="#l92.6"></a><span id="l92.6"> };</span>
<a href="#l92.7"></a><span id="l92.7"> </span>
<a href="#l92.8"></a><span id="l92.8"> POP3Pump.prototype._createPop3ServerAndLocalFolders =</span>
<a href="#l92.9"></a><span id="l92.9">   function _createPop3ServerAndLocalFolders()</span>
<a href="#l92.10"></a><span id="l92.10"> {</span>
<a href="#l92.11"></a><span id="l92.11">   if (typeof gLocalInboxFolder == 'undefined')</span>
<a href="#l92.12"></a><span id="l92.12" class="difflineminus">-    loadLocalMailAccount();</span>
<a href="#l92.13"></a><span id="l92.13" class="difflineplus">+    localAccountUtils.loadLocalMailAccount();</span>
<a href="#l92.14"></a><span id="l92.14"> </span>
<a href="#l92.15"></a><span id="l92.15">   if (!this.fakeServer)</span>
<a href="#l92.16"></a><span id="l92.16" class="difflineminus">-    this.fakeServer = create_incoming_server(&quot;pop3&quot;, this.kPOP3_PORT,</span>
<a href="#l92.17"></a><span id="l92.17" class="difflineminus">-                                             &quot;fred&quot;, &quot;wilma&quot;);</span>
<a href="#l92.18"></a><span id="l92.18" class="difflineplus">+    this.fakeServer = localAccountUtils.create_incoming_server(&quot;pop3&quot;, this.kPOP3_PORT,</span>
<a href="#l92.19"></a><span id="l92.19" class="difflineplus">+							       &quot;fred&quot;, &quot;wilma&quot;);</span>
<a href="#l92.20"></a><span id="l92.20"> </span>
<a href="#l92.21"></a><span id="l92.21">   return this.fakeServer;</span>
<a href="#l92.22"></a><span id="l92.22"> };</span>
<a href="#l92.23"></a><span id="l92.23"> </span>
<a href="#l92.24"></a><span id="l92.24"> POP3Pump.prototype._checkBusy = function _checkBusy()</span>
<a href="#l92.25"></a><span id="l92.25"> {</span>
<a href="#l92.26"></a><span id="l92.26">   if (this._tests.length == 0 &amp;&amp; !this._finalCleanup)</span>
<a href="#l92.27"></a><span id="l92.27">   {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l93.1"></a><span id="l93.1" class="difflineminus">--- a/mailnews/test/resources/localAccountUtils.js</span>
<a href="#l93.2"></a><span id="l93.2" class="difflineplus">+++ b/mailnews/test/resources/localAccountUtils.js</span>
<a href="#l93.3"></a><span id="l93.3" class="difflineat">@@ -10,107 +10,108 @@ gLocalAccountUtils_js__ = true;</span>
<a href="#l93.4"></a><span id="l93.4"> // Local Mail Folders. Requires prior setup of profile directory</span>
<a href="#l93.5"></a><span id="l93.5"> </span>
<a href="#l93.6"></a><span id="l93.6"> var gLocalIncomingServer;</span>
<a href="#l93.7"></a><span id="l93.7"> var gLocalRootFolder;</span>
<a href="#l93.8"></a><span id="l93.8"> var gLocalMsgAccount;</span>
<a href="#l93.9"></a><span id="l93.9"> var gLocalInboxFolder;</span>
<a href="#l93.10"></a><span id="l93.10"> var _localAccountInitialized = false;</span>
<a href="#l93.11"></a><span id="l93.11"> </span>
<a href="#l93.12"></a><span id="l93.12" class="difflineminus">-function loadLocalMailAccount()</span>
<a href="#l93.13"></a><span id="l93.13" class="difflineminus">-{</span>
<a href="#l93.14"></a><span id="l93.14" class="difflineminus">-  // This function is idempotent</span>
<a href="#l93.15"></a><span id="l93.15" class="difflineminus">-  if (_localAccountInitialized)</span>
<a href="#l93.16"></a><span id="l93.16" class="difflineminus">-    return;</span>
<a href="#l93.17"></a><span id="l93.17" class="difflineplus">+var localAccountUtils = {</span>
<a href="#l93.18"></a><span id="l93.18" class="difflineplus">+  loadLocalMailAccount: function() {</span>
<a href="#l93.19"></a><span id="l93.19" class="difflineplus">+    // This function is idempotent</span>
<a href="#l93.20"></a><span id="l93.20" class="difflineplus">+    if (_localAccountInitialized)</span>
<a href="#l93.21"></a><span id="l93.21" class="difflineplus">+      return;</span>
<a href="#l93.22"></a><span id="l93.22"> </span>
<a href="#l93.23"></a><span id="l93.23" class="difflineminus">-  MailServices.accounts.createLocalMailAccount();</span>
<a href="#l93.24"></a><span id="l93.24" class="difflineplus">+    MailServices.accounts.createLocalMailAccount();</span>
<a href="#l93.25"></a><span id="l93.25"> </span>
<a href="#l93.26"></a><span id="l93.26" class="difflineminus">-  gLocalIncomingServer = MailServices.accounts.localFoldersServer;</span>
<a href="#l93.27"></a><span id="l93.27" class="difflineminus">-  gLocalMsgAccount = MailServices.accounts.FindAccountForServer(</span>
<a href="#l93.28"></a><span id="l93.28" class="difflineminus">-    gLocalIncomingServer);</span>
<a href="#l93.29"></a><span id="l93.29" class="difflineplus">+    gLocalIncomingServer = MailServices.accounts.localFoldersServer;</span>
<a href="#l93.30"></a><span id="l93.30" class="difflineplus">+    gLocalMsgAccount = MailServices.accounts.FindAccountForServer(</span>
<a href="#l93.31"></a><span id="l93.31" class="difflineplus">+      gLocalIncomingServer);</span>
<a href="#l93.32"></a><span id="l93.32"> </span>
<a href="#l93.33"></a><span id="l93.33" class="difflineminus">-  gLocalRootFolder = gLocalIncomingServer.rootMsgFolder</span>
<a href="#l93.34"></a><span id="l93.34" class="difflineminus">-                     .QueryInterface(Ci.nsIMsgLocalMailFolder);</span>
<a href="#l93.35"></a><span id="l93.35" class="difflineplus">+    gLocalRootFolder = gLocalIncomingServer.rootMsgFolder</span>
<a href="#l93.36"></a><span id="l93.36" class="difflineplus">+                       .QueryInterface(Ci.nsIMsgLocalMailFolder);</span>
<a href="#l93.37"></a><span id="l93.37"> </span>
<a href="#l93.38"></a><span id="l93.38" class="difflineminus">-  // Note: Inbox is not created automatically when there is no deferred server,</span>
<a href="#l93.39"></a><span id="l93.39" class="difflineminus">-  // so we need to create it.</span>
<a href="#l93.40"></a><span id="l93.40" class="difflineminus">-  gLocalInboxFolder = gLocalRootFolder.createLocalSubfolder(&quot;Inbox&quot;)</span>
<a href="#l93.41"></a><span id="l93.41" class="difflineminus">-                       .QueryInterface(Ci.nsIMsgLocalMailFolder);</span>
<a href="#l93.42"></a><span id="l93.42" class="difflineminus">-  // a local inbox should have a Mail flag!</span>
<a href="#l93.43"></a><span id="l93.43" class="difflineminus">-  gLocalInboxFolder.setFlag(Ci.nsMsgFolderFlags.Mail);</span>
<a href="#l93.44"></a><span id="l93.44" class="difflineplus">+    // Note: Inbox is not created automatically when there is no deferred server,</span>
<a href="#l93.45"></a><span id="l93.45" class="difflineplus">+    // so we need to create it.</span>
<a href="#l93.46"></a><span id="l93.46" class="difflineplus">+    gLocalInboxFolder = gLocalRootFolder.createLocalSubfolder(&quot;Inbox&quot;)</span>
<a href="#l93.47"></a><span id="l93.47" class="difflineplus">+                         .QueryInterface(Ci.nsIMsgLocalMailFolder);</span>
<a href="#l93.48"></a><span id="l93.48" class="difflineplus">+    // a local inbox should have a Mail flag!</span>
<a href="#l93.49"></a><span id="l93.49" class="difflineplus">+    gLocalInboxFolder.setFlag(Ci.nsMsgFolderFlags.Mail);</span>
<a href="#l93.50"></a><span id="l93.50"> </span>
<a href="#l93.51"></a><span id="l93.51" class="difflineminus">-  // Force an initialization of the Inbox folder database.</span>
<a href="#l93.52"></a><span id="l93.52" class="difflineminus">-  var folderName = gLocalInboxFolder.prettiestName;</span>
<a href="#l93.53"></a><span id="l93.53" class="difflineplus">+    // Force an initialization of the Inbox folder database.</span>
<a href="#l93.54"></a><span id="l93.54" class="difflineplus">+    var folderName = gLocalInboxFolder.prettiestName;</span>
<a href="#l93.55"></a><span id="l93.55"> </span>
<a href="#l93.56"></a><span id="l93.56" class="difflineminus">-  _localAccountInitialized = true;</span>
<a href="#l93.57"></a><span id="l93.57" class="difflineminus">-}</span>
<a href="#l93.58"></a><span id="l93.58" class="difflineplus">+    _localAccountInitialized = true;</span>
<a href="#l93.59"></a><span id="l93.59" class="difflineplus">+  },</span>
<a href="#l93.60"></a><span id="l93.60"> </span>
<a href="#l93.61"></a><span id="l93.61" class="difflineminus">-/**</span>
<a href="#l93.62"></a><span id="l93.62" class="difflineminus">- * Create an nsIMsgIncomingServer and an nsIMsgAccount to go with it.</span>
<a href="#l93.63"></a><span id="l93.63" class="difflineminus">- *</span>
<a href="#l93.64"></a><span id="l93.64" class="difflineminus">- * @param aType The type of the server (pop3, imap etc).</span>
<a href="#l93.65"></a><span id="l93.65" class="difflineminus">- * @param aPort The port the server is on.</span>
<a href="#l93.66"></a><span id="l93.66" class="difflineminus">- * @param aUsername The username for the server.</span>
<a href="#l93.67"></a><span id="l93.67" class="difflineminus">- * @param aPassword The password for the server.</span>
<a href="#l93.68"></a><span id="l93.68" class="difflineminus">- * @return The newly-created nsIMsgIncomingServer.</span>
<a href="#l93.69"></a><span id="l93.69" class="difflineminus">- */</span>
<a href="#l93.70"></a><span id="l93.70" class="difflineminus">-function create_incoming_server(aType, aPort, aUsername, aPassword) {</span>
<a href="#l93.71"></a><span id="l93.71" class="difflineminus">-  let server = MailServices.accounts.createIncomingServer(aUsername, &quot;localhost&quot;,</span>
<a href="#l93.72"></a><span id="l93.72" class="difflineminus">-                                                          aType);</span>
<a href="#l93.73"></a><span id="l93.73" class="difflineminus">-  server.port = aPort;</span>
<a href="#l93.74"></a><span id="l93.74" class="difflineminus">-  if (aUsername != null)</span>
<a href="#l93.75"></a><span id="l93.75" class="difflineminus">-    server.username = aUsername;</span>
<a href="#l93.76"></a><span id="l93.76" class="difflineminus">-  if (aPassword != null)</span>
<a href="#l93.77"></a><span id="l93.77" class="difflineminus">-    server.password = aPassword;</span>
<a href="#l93.78"></a><span id="l93.78" class="difflineplus">+  /**</span>
<a href="#l93.79"></a><span id="l93.79" class="difflineplus">+   * Create an nsIMsgIncomingServer and an nsIMsgAccount to go with it.</span>
<a href="#l93.80"></a><span id="l93.80" class="difflineplus">+   *</span>
<a href="#l93.81"></a><span id="l93.81" class="difflineplus">+   * @param aType The type of the server (pop3, imap etc).</span>
<a href="#l93.82"></a><span id="l93.82" class="difflineplus">+   * @param aPort The port the server is on.</span>
<a href="#l93.83"></a><span id="l93.83" class="difflineplus">+   * @param aUsername The username for the server.</span>
<a href="#l93.84"></a><span id="l93.84" class="difflineplus">+   * @param aPassword The password for the server.</span>
<a href="#l93.85"></a><span id="l93.85" class="difflineplus">+   * @return The newly-created nsIMsgIncomingServer.</span>
<a href="#l93.86"></a><span id="l93.86" class="difflineplus">+   */</span>
<a href="#l93.87"></a><span id="l93.87" class="difflineplus">+  create_incoming_server: function(aType, aPort, aUsername, aPassword) {</span>
<a href="#l93.88"></a><span id="l93.88" class="difflineplus">+    let server = MailServices.accounts.createIncomingServer(aUsername, &quot;localhost&quot;,</span>
<a href="#l93.89"></a><span id="l93.89" class="difflineplus">+                                                            aType);</span>
<a href="#l93.90"></a><span id="l93.90" class="difflineplus">+    server.port = aPort;</span>
<a href="#l93.91"></a><span id="l93.91" class="difflineplus">+    if (aUsername != null)</span>
<a href="#l93.92"></a><span id="l93.92" class="difflineplus">+      server.username = aUsername;</span>
<a href="#l93.93"></a><span id="l93.93" class="difflineplus">+    if (aPassword != null)</span>
<a href="#l93.94"></a><span id="l93.94" class="difflineplus">+      server.password = aPassword;</span>
<a href="#l93.95"></a><span id="l93.95"> </span>
<a href="#l93.96"></a><span id="l93.96" class="difflineminus">-  server.valid = false;</span>
<a href="#l93.97"></a><span id="l93.97" class="difflineplus">+    server.valid = false;</span>
<a href="#l93.98"></a><span id="l93.98"> </span>
<a href="#l93.99"></a><span id="l93.99" class="difflineminus">-  let account = MailServices.accounts.createAccount();</span>
<a href="#l93.100"></a><span id="l93.100" class="difflineminus">-  account.incomingServer = server;</span>
<a href="#l93.101"></a><span id="l93.101" class="difflineminus">-  if (aType == &quot;pop3&quot;) {</span>
<a href="#l93.102"></a><span id="l93.102" class="difflineminus">-    // Several tests expect that mail is deferred to the local folders account,</span>
<a href="#l93.103"></a><span id="l93.103" class="difflineminus">-    // so do that.</span>
<a href="#l93.104"></a><span id="l93.104" class="difflineminus">-    loadLocalMailAccount();</span>
<a href="#l93.105"></a><span id="l93.105" class="difflineminus">-    server.QueryInterface(Ci.nsIPop3IncomingServer);</span>
<a href="#l93.106"></a><span id="l93.106" class="difflineminus">-    server.deferredToAccount = gLocalMsgAccount.key;</span>
<a href="#l93.107"></a><span id="l93.107" class="difflineminus">-  }</span>
<a href="#l93.108"></a><span id="l93.108" class="difflineminus">-  server.valid = true;</span>
<a href="#l93.109"></a><span id="l93.109" class="difflineplus">+    let account = MailServices.accounts.createAccount();</span>
<a href="#l93.110"></a><span id="l93.110" class="difflineplus">+    account.incomingServer = server;</span>
<a href="#l93.111"></a><span id="l93.111" class="difflineplus">+    if (aType == &quot;pop3&quot;) {</span>
<a href="#l93.112"></a><span id="l93.112" class="difflineplus">+      // Several tests expect that mail is deferred to the local folders account,</span>
<a href="#l93.113"></a><span id="l93.113" class="difflineplus">+      // so do that.</span>
<a href="#l93.114"></a><span id="l93.114" class="difflineplus">+      this.loadLocalMailAccount();</span>
<a href="#l93.115"></a><span id="l93.115" class="difflineplus">+      server.QueryInterface(Ci.nsIPop3IncomingServer);</span>
<a href="#l93.116"></a><span id="l93.116" class="difflineplus">+      server.deferredToAccount = gLocalMsgAccount.key;</span>
<a href="#l93.117"></a><span id="l93.117" class="difflineplus">+    }</span>
<a href="#l93.118"></a><span id="l93.118" class="difflineplus">+    server.valid = true;</span>
<a href="#l93.119"></a><span id="l93.119"> </span>
<a href="#l93.120"></a><span id="l93.120" class="difflineminus">-  return server;</span>
<a href="#l93.121"></a><span id="l93.121" class="difflineminus">-}</span>
<a href="#l93.122"></a><span id="l93.122" class="difflineplus">+    return server;</span>
<a href="#l93.123"></a><span id="l93.123" class="difflineplus">+  },</span>
<a href="#l93.124"></a><span id="l93.124"> </span>
<a href="#l93.125"></a><span id="l93.125" class="difflineminus">-/**</span>
<a href="#l93.126"></a><span id="l93.126" class="difflineminus">- * Create an outgoing nsISmtpServer with the given parameters.</span>
<a href="#l93.127"></a><span id="l93.127" class="difflineminus">- *</span>
<a href="#l93.128"></a><span id="l93.128" class="difflineminus">- * @param aPort The port the server is on.</span>
<a href="#l93.129"></a><span id="l93.129" class="difflineminus">- * @param aUsername The username for the server</span>
<a href="#l93.130"></a><span id="l93.130" class="difflineminus">- * @param aPassword The password for the server</span>
<a href="#l93.131"></a><span id="l93.131" class="difflineminus">- * @return The newly-created nsISmtpServer.</span>
<a href="#l93.132"></a><span id="l93.132" class="difflineminus">- */</span>
<a href="#l93.133"></a><span id="l93.133" class="difflineminus">-function create_outgoing_server(aPort, aUsername, aPassword) {</span>
<a href="#l93.134"></a><span id="l93.134" class="difflineminus">-  let server = MailServices.smtp.createServer();</span>
<a href="#l93.135"></a><span id="l93.135" class="difflineminus">-  server.hostname = &quot;localhost&quot;;</span>
<a href="#l93.136"></a><span id="l93.136" class="difflineminus">-  server.port = aPort;</span>
<a href="#l93.137"></a><span id="l93.137" class="difflineminus">-  server.authMethod = Ci.nsMsgAuthMethod.none;</span>
<a href="#l93.138"></a><span id="l93.138" class="difflineminus">-  return server;</span>
<a href="#l93.139"></a><span id="l93.139" class="difflineminus">-}</span>
<a href="#l93.140"></a><span id="l93.140" class="difflineplus">+  /**</span>
<a href="#l93.141"></a><span id="l93.141" class="difflineplus">+   * Create an outgoing nsISmtpServer with the given parameters.</span>
<a href="#l93.142"></a><span id="l93.142" class="difflineplus">+   *</span>
<a href="#l93.143"></a><span id="l93.143" class="difflineplus">+   * @param aPort The port the server is on.</span>
<a href="#l93.144"></a><span id="l93.144" class="difflineplus">+   * @param aUsername The username for the server</span>
<a href="#l93.145"></a><span id="l93.145" class="difflineplus">+   * @param aPassword The password for the server</span>
<a href="#l93.146"></a><span id="l93.146" class="difflineplus">+   * @return The newly-created nsISmtpServer.</span>
<a href="#l93.147"></a><span id="l93.147" class="difflineplus">+   */</span>
<a href="#l93.148"></a><span id="l93.148" class="difflineplus">+  create_outgoing_server: function(aPort, aUsername, aPassword) {</span>
<a href="#l93.149"></a><span id="l93.149" class="difflineplus">+    let server = MailServices.smtp.createServer();</span>
<a href="#l93.150"></a><span id="l93.150" class="difflineplus">+    server.hostname = &quot;localhost&quot;;</span>
<a href="#l93.151"></a><span id="l93.151" class="difflineplus">+    server.port = aPort;</span>
<a href="#l93.152"></a><span id="l93.152" class="difflineplus">+    server.authMethod = Ci.nsMsgAuthMethod.none;</span>
<a href="#l93.153"></a><span id="l93.153" class="difflineplus">+    return server;</span>
<a href="#l93.154"></a><span id="l93.154" class="difflineplus">+  },</span>
<a href="#l93.155"></a><span id="l93.155"> </span>
<a href="#l93.156"></a><span id="l93.156" class="difflineminus">-/**</span>
<a href="#l93.157"></a><span id="l93.157" class="difflineminus">- * Associate the given outgoing server with the given incoming server's account.</span>
<a href="#l93.158"></a><span id="l93.158" class="difflineminus">- *</span>
<a href="#l93.159"></a><span id="l93.159" class="difflineminus">- * @param aIncoming The incoming server (nsIMsgIncomingServer) or account</span>
<a href="#l93.160"></a><span id="l93.160" class="difflineminus">- *                  (nsIMsgAccount) to associate.</span>
<a href="#l93.161"></a><span id="l93.161" class="difflineminus">- * @param aOutgoingServer The outgoing server (nsISmtpServer) to associate.</span>
<a href="#l93.162"></a><span id="l93.162" class="difflineminus">- * @param aSetAsDefault Whether to set the outgoing server as the default for</span>
<a href="#l93.163"></a><span id="l93.163" class="difflineminus">- *                      the incoming server's account.</span>
<a href="#l93.164"></a><span id="l93.164" class="difflineminus">- */</span>
<a href="#l93.165"></a><span id="l93.165" class="difflineminus">-function associate_servers(aIncoming, aOutgoingServer, aSetAsDefault) {</span>
<a href="#l93.166"></a><span id="l93.166" class="difflineminus">-  let identity = MailServices.accounts.createIdentity();</span>
<a href="#l93.167"></a><span id="l93.167" class="difflineminus">-  identity.smtpServerKey = aOutgoingServer.key;</span>
<a href="#l93.168"></a><span id="l93.168" class="difflineplus">+  /**</span>
<a href="#l93.169"></a><span id="l93.169" class="difflineplus">+   * Associate the given outgoing server with the given incoming server's account.</span>
<a href="#l93.170"></a><span id="l93.170" class="difflineplus">+   *</span>
<a href="#l93.171"></a><span id="l93.171" class="difflineplus">+   * @param aIncoming The incoming server (nsIMsgIncomingServer) or account</span>
<a href="#l93.172"></a><span id="l93.172" class="difflineplus">+   *                  (nsIMsgAccount) to associate.</span>
<a href="#l93.173"></a><span id="l93.173" class="difflineplus">+   * @param aOutgoingServer The outgoing server (nsISmtpServer) to associate.</span>
<a href="#l93.174"></a><span id="l93.174" class="difflineplus">+   * @param aSetAsDefault Whether to set the outgoing server as the default for</span>
<a href="#l93.175"></a><span id="l93.175" class="difflineplus">+   *                      the incoming server's account.</span>
<a href="#l93.176"></a><span id="l93.176" class="difflineplus">+   */</span>
<a href="#l93.177"></a><span id="l93.177" class="difflineplus">+  associate_servers: function(aIncoming, aOutgoingServer, aSetAsDefault) {</span>
<a href="#l93.178"></a><span id="l93.178" class="difflineplus">+    let identity = MailServices.accounts.createIdentity();</span>
<a href="#l93.179"></a><span id="l93.179" class="difflineplus">+    identity.smtpServerKey = aOutgoingServer.key;</span>
<a href="#l93.180"></a><span id="l93.180"> </span>
<a href="#l93.181"></a><span id="l93.181" class="difflineminus">-  if (aIncoming instanceof Ci.nsIMsgIncomingServer)</span>
<a href="#l93.182"></a><span id="l93.182" class="difflineminus">-    aIncoming = MailServices.accounts.FindAccountForServer(aIncoming);</span>
<a href="#l93.183"></a><span id="l93.183" class="difflineminus">-  aIncoming.addIdentity(identity);</span>
<a href="#l93.184"></a><span id="l93.184" class="difflineminus">-  if (aSetAsDefault)</span>
<a href="#l93.185"></a><span id="l93.185" class="difflineminus">-    aIncoming.defaultIdentity = identity;</span>
<a href="#l93.186"></a><span id="l93.186" class="difflineminus">-}</span>
<a href="#l93.187"></a><span id="l93.187" class="difflineplus">+    if (aIncoming instanceof Ci.nsIMsgIncomingServer)</span>
<a href="#l93.188"></a><span id="l93.188" class="difflineplus">+      aIncoming = MailServices.accounts.FindAccountForServer(aIncoming);</span>
<a href="#l93.189"></a><span id="l93.189" class="difflineplus">+    aIncoming.addIdentity(identity);</span>
<a href="#l93.190"></a><span id="l93.190" class="difflineplus">+    if (aSetAsDefault)</span>
<a href="#l93.191"></a><span id="l93.191" class="difflineplus">+      aIncoming.defaultIdentity = identity;</span>
<a href="#l93.192"></a><span id="l93.192" class="difflineplus">+  }</span>
<a href="#l93.193"></a><span id="l93.193" class="difflineplus">+};</span>
<a href="#l93.194"></a><span id="l93.194"> </span>
<a href="#l93.195"></a><span id="l93.195"> }; // gLocalAccountUtils_js__</span>
<a href="#l93.196"></a><span id="l93.196">\ No newline at end of file</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

