<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 28175:bfb3d45e856fb748ff2b7101a596690a7c658492</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ bfb3d45e856fb748ff2b7101a596690a7c658492" />
<meta property="og:url" content="/comm-central/rev/bfb3d45e856fb748ff2b7101a596690a7c658492" />
<meta property="og:description" content="Bug 1557504 - remove [array] use in xpidl from calIItipTransport.idl and calIPrintFormatter.idl. r=pmorris" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / bfb3d45e856fb748ff2b7101a596690a7c658492 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/bfb3d45e856fb748ff2b7101a596690a7c658492">shortlog</a> |
<a href="/comm-central/log/bfb3d45e856fb748ff2b7101a596690a7c658492">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/bfb3d45e856fb748ff2b7101a596690a7c658492">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/bfb3d45e856fb748ff2b7101a596690a7c658492">files</a> |
changeset |
<a href="/comm-central/raw-rev/bfb3d45e856fb748ff2b7101a596690a7c658492">raw</a>  | <a href="/comm-central/archive/bfb3d45e856fb748ff2b7101a596690a7c658492.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1557504">Bug 1557504</a> - remove [array] use in xpidl from calIItipTransport.idl and calIPrintFormatter.idl. r=pmorris
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#75;&#104;&#117;&#115;&#104;&#105;&#108;&#32;&#77;&#105;&#115;&#116;&#114;&#121;&#32;&#60;&#107;&#104;&#117;&#115;&#104;&#105;&#108;&#51;&#50;&#52;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 14 Nov 2019 08:05:00 +0100</td></tr>

<tr>
 <td>changeset 28175</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/bfb3d45e856fb748ff2b7101a596690a7c658492">bfb3d45e856fb748ff2b7101a596690a7c658492</a></td>
</tr>



<tr>
<td>parent 28174</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/019d5b24c54331e238387b7e4bb0673f9c339a2a">019d5b24c54331e238387b7e4bb0673f9c339a2a</a>
</td>
</tr>

<tr>
<td>child 28176</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/d876748e86f5313bd99692a874f32d690eb2cd8c">d876748e86f5313bd99692a874f32d690eb2cd8c</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=bfb3d45e856fb748ff2b7101a596690a7c658492">16688</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Thu, 14 Nov 2019 21:58:06 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@d876748e86f5 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=d876748e86f5313bd99692a874f32d690eb2cd8c">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=d876748e86f5313bd99692a874f32d690eb2cd8c&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=d876748e86f5313bd99692a874f32d690eb2cd8c&newProject=comm-central&newRevision=78cef389a611168e3b3e0343cf4e14681e6b1c99&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=d876748e86f5313bd99692a874f32d690eb2cd8c&newProject=comm-central&newRevision=78cef389a611168e3b3e0343cf4e14681e6b1c99&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=d876748e86f5313bd99692a874f32d690eb2cd8c&newProject=comm-central&newRevision=78cef389a611168e3b3e0343cf4e14681e6b1c99&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28pmorris%29&revcount=50">pmorris</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1557504">1557504</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1557504">Bug 1557504</a> - remove [array] use in xpidl from calIItipTransport.idl and calIPrintFormatter.idl. r=pmorris</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/content/dialogs/calendar-print-dialog.js">calendar/base/content/dialogs/calendar-print-dialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/content/dialogs/calendar-print-dialog.js">file</a> |
<a href="/comm-central/annotate/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/content/dialogs/calendar-print-dialog.js">annotate</a> |
<a href="/comm-central/diff/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/content/dialogs/calendar-print-dialog.js">diff</a> |
<a href="/comm-central/comparison/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/content/dialogs/calendar-print-dialog.js">comparison</a> |
<a href="/comm-central/log/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/content/dialogs/calendar-print-dialog.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/modules/utils/calItipUtils.jsm">calendar/base/modules/utils/calItipUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/modules/utils/calItipUtils.jsm">file</a> |
<a href="/comm-central/annotate/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/modules/utils/calItipUtils.jsm">annotate</a> |
<a href="/comm-central/diff/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/modules/utils/calItipUtils.jsm">diff</a> |
<a href="/comm-central/comparison/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/modules/utils/calItipUtils.jsm">comparison</a> |
<a href="/comm-central/log/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/modules/utils/calItipUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/public/calIItipTransport.idl">calendar/base/public/calIItipTransport.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/public/calIItipTransport.idl">file</a> |
<a href="/comm-central/annotate/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/public/calIItipTransport.idl">annotate</a> |
<a href="/comm-central/diff/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/public/calIItipTransport.idl">diff</a> |
<a href="/comm-central/comparison/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/public/calIItipTransport.idl">comparison</a> |
<a href="/comm-central/log/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/public/calIItipTransport.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/public/calIPrintFormatter.idl">calendar/base/public/calIPrintFormatter.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/public/calIPrintFormatter.idl">file</a> |
<a href="/comm-central/annotate/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/public/calIPrintFormatter.idl">annotate</a> |
<a href="/comm-central/diff/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/public/calIPrintFormatter.idl">diff</a> |
<a href="/comm-central/comparison/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/public/calIPrintFormatter.idl">comparison</a> |
<a href="/comm-central/log/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/base/public/calIPrintFormatter.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/import-export/calListFormatter.js">calendar/import-export/calListFormatter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/import-export/calListFormatter.js">file</a> |
<a href="/comm-central/annotate/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/import-export/calListFormatter.js">annotate</a> |
<a href="/comm-central/diff/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/import-export/calListFormatter.js">diff</a> |
<a href="/comm-central/comparison/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/import-export/calListFormatter.js">comparison</a> |
<a href="/comm-central/log/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/import-export/calListFormatter.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/import-export/calMonthGridPrinter.js">calendar/import-export/calMonthGridPrinter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/import-export/calMonthGridPrinter.js">file</a> |
<a href="/comm-central/annotate/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/import-export/calMonthGridPrinter.js">annotate</a> |
<a href="/comm-central/diff/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/import-export/calMonthGridPrinter.js">diff</a> |
<a href="/comm-central/comparison/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/import-export/calMonthGridPrinter.js">comparison</a> |
<a href="/comm-central/log/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/import-export/calMonthGridPrinter.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/import-export/calWeekPrinter.js">calendar/import-export/calWeekPrinter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/import-export/calWeekPrinter.js">file</a> |
<a href="/comm-central/annotate/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/import-export/calWeekPrinter.js">annotate</a> |
<a href="/comm-central/diff/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/import-export/calWeekPrinter.js">diff</a> |
<a href="/comm-central/comparison/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/import-export/calWeekPrinter.js">comparison</a> |
<a href="/comm-central/log/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/import-export/calWeekPrinter.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/itip/calItipEmailTransport.js">calendar/itip/calItipEmailTransport.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/itip/calItipEmailTransport.js">file</a> |
<a href="/comm-central/annotate/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/itip/calItipEmailTransport.js">annotate</a> |
<a href="/comm-central/diff/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/itip/calItipEmailTransport.js">diff</a> |
<a href="/comm-central/comparison/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/itip/calItipEmailTransport.js">comparison</a> |
<a href="/comm-central/log/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/itip/calItipEmailTransport.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/providers/caldav/calDavCalendar.js">calendar/providers/caldav/calDavCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/providers/caldav/calDavCalendar.js">file</a> |
<a href="/comm-central/annotate/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/providers/caldav/calDavCalendar.js">annotate</a> |
<a href="/comm-central/diff/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/providers/caldav/calDavCalendar.js">diff</a> |
<a href="/comm-central/comparison/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/providers/caldav/calDavCalendar.js">comparison</a> |
<a href="/comm-central/log/bfb3d45e856fb748ff2b7101a596690a7c658492/calendar/providers/caldav/calDavCalendar.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-print-dialog.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-print-dialog.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -217,17 +217,16 @@ function refreshHtml(finishFunc) {</span>
<a href="#l1.4"></a><span id="l1.4">     try {</span>
<a href="#l1.5"></a><span id="l1.5">       let pipe = Cc[&quot;@mozilla.org/pipe;1&quot;].createInstance(Ci.nsIPipe);</span>
<a href="#l1.6"></a><span id="l1.6">       const PR_UINT32_MAX = 4294967295; // signals &quot;infinite-length&quot;</span>
<a href="#l1.7"></a><span id="l1.7">       pipe.init(true, true, 0, PR_UINT32_MAX, null);</span>
<a href="#l1.8"></a><span id="l1.8">       printformatter.formatToHtml(</span>
<a href="#l1.9"></a><span id="l1.9">         pipe.outputStream,</span>
<a href="#l1.10"></a><span id="l1.10">         settings.start,</span>
<a href="#l1.11"></a><span id="l1.11">         settings.end,</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-        settings.eventList.length,</span>
<a href="#l1.13"></a><span id="l1.13">         settings.eventList,</span>
<a href="#l1.14"></a><span id="l1.14">         settings.title</span>
<a href="#l1.15"></a><span id="l1.15">       );</span>
<a href="#l1.16"></a><span id="l1.16">       pipe.outputStream.close();</span>
<a href="#l1.17"></a><span id="l1.17">       // convert byte-array to UTF-8 string:</span>
<a href="#l1.18"></a><span id="l1.18">       let convStream = Cc[&quot;@mozilla.org/intl/converter-input-stream;1&quot;].createInstance(</span>
<a href="#l1.19"></a><span id="l1.19">         Ci.nsIConverterInputStream</span>
<a href="#l1.20"></a><span id="l1.20">       );</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/modules/utils/calItipUtils.jsm</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/modules/utils/calItipUtils.jsm</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -1473,17 +1473,17 @@ function sendMessage(aItem, aMethod, aRe</span>
<a href="#l2.4"></a><span id="l2.4">     itipItem.responseMethod = aMethod;</span>
<a href="#l2.5"></a><span id="l2.5">     itipItem.targetCalendar = aSendItem.calendar;</span>
<a href="#l2.6"></a><span id="l2.6">     itipItem.autoResponse = autoResponse.mode;</span>
<a href="#l2.7"></a><span id="l2.7">     // we switch to AUTO for each subsequent call of _sendItem()</span>
<a href="#l2.8"></a><span id="l2.8">     autoResponse.mode = Ci.calIItipItem.AUTO;</span>
<a href="#l2.9"></a><span id="l2.9">     // XXX I don't know whether the below is used at all, since we don't use the itip processor</span>
<a href="#l2.10"></a><span id="l2.10">     itipItem.isSend = true;</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-    return transport.sendItems(aSendToList.length, aSendToList, itipItem);</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+    return transport.sendItems(aSendToList, itipItem);</span>
<a href="#l2.14"></a><span id="l2.14">   };</span>
<a href="#l2.15"></a><span id="l2.15"> </span>
<a href="#l2.16"></a><span id="l2.16">   // split up transport, if attendee undisclosure is requested</span>
<a href="#l2.17"></a><span id="l2.17">   // and this is a message send by the organizer</span>
<a href="#l2.18"></a><span id="l2.18">   if (</span>
<a href="#l2.19"></a><span id="l2.19">     aItem.getProperty(&quot;X-MOZ-SEND-INVITATIONS-UNDISCLOSED&quot;) == &quot;TRUE&quot; &amp;&amp;</span>
<a href="#l2.20"></a><span id="l2.20">     aMethod != &quot;REPLY&quot; &amp;&amp;</span>
<a href="#l2.21"></a><span id="l2.21">     aMethod != &quot;REFRESH&quot; &amp;&amp;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/public/calIItipTransport.idl</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/public/calIItipTransport.idl</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -37,12 +37,11 @@ interface calIItipTransport : nsISupport</span>
<a href="#l3.4"></a><span id="l3.4">      * alternative representation. If a calIItipItem is attached, then an ICS</span>
<a href="#l3.5"></a><span id="l3.5">      * representation of those objects are generated and attached to the email.</span>
<a href="#l3.6"></a><span id="l3.6">      * If the calIItipItem is null, then the item(s) is sent without any</span>
<a href="#l3.7"></a><span id="l3.7">      * text/calendar mime part.</span>
<a href="#l3.8"></a><span id="l3.8">      * @param count             size of recipient array</span>
<a href="#l3.9"></a><span id="l3.9">      * @param recipientArray    array of recipients</span>
<a href="#l3.10"></a><span id="l3.10">      * @param calIItipItem      set of calIItems encapsulated as calIItipItems</span>
<a href="#l3.11"></a><span id="l3.11">      */</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-    boolean sendItems(in uint32_t count,</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-                      [array, size_is(count)] in calIAttendee recipientArray,</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+    boolean sendItems(in Array&lt;calIAttendee&gt; recipientArray,</span>
<a href="#l3.15"></a><span id="l3.15">                       in calIItipItem item);</span>
<a href="#l3.16"></a><span id="l3.16"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/public/calIPrintFormatter.idl</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/public/calIPrintFormatter.idl</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -33,12 +33,11 @@ interface calIPrintFormatter : nsISuppor</span>
<a href="#l4.4"></a><span id="l4.4">    * @param aEnd     the last date that should be printed</span>
<a href="#l4.5"></a><span id="l4.5">    * @param aCount   the number of items being printed</span>
<a href="#l4.6"></a><span id="l4.6">    * @param aItems   the items to print</span>
<a href="#l4.7"></a><span id="l4.7">    * @param aTitle   a title for the HTML page</span>
<a href="#l4.8"></a><span id="l4.8">    */</span>
<a href="#l4.9"></a><span id="l4.9">   void formatToHtml(in nsIOutputStream aStream,</span>
<a href="#l4.10"></a><span id="l4.10">                     in calIDateTime aStart,</span>
<a href="#l4.11"></a><span id="l4.11">                     in calIDateTime aEnd,</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-                    in unsigned long aCount,</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-                    [array, size_is(aCount)] in calIItemBase aItems,</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+                    in Array&lt;calIItemBase&gt; aItems,</span>
<a href="#l4.15"></a><span id="l4.15">                     in AString aTitle);</span>
<a href="#l4.16"></a><span id="l4.16"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/import-export/calListFormatter.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/import-export/calListFormatter.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -14,15 +14,15 @@ function calListFormatter() {</span>
<a href="#l5.4"></a><span id="l5.4"> calListFormatter.prototype = {</span>
<a href="#l5.5"></a><span id="l5.5">   QueryInterface: ChromeUtils.generateQI([Ci.calIPrintFormatter]),</span>
<a href="#l5.6"></a><span id="l5.6">   classID: Components.ID(&quot;{9ae04413-fee3-45b9-8bbb-1eb39a4cbd1b}&quot;),</span>
<a href="#l5.7"></a><span id="l5.7"> </span>
<a href="#l5.8"></a><span id="l5.8">   get name() {</span>
<a href="#l5.9"></a><span id="l5.9">     return cal.l10n.getCalString(&quot;formatListName&quot;);</span>
<a href="#l5.10"></a><span id="l5.10">   },</span>
<a href="#l5.11"></a><span id="l5.11"> </span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-  formatToHtml: function(aStream, aStart, aEnd, aCount, aItems, aTitle) {</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+  formatToHtml: function(aStream, aStart, aEnd, aItems, aTitle) {</span>
<a href="#l5.14"></a><span id="l5.14">     let htmlexporter = Cc[&quot;@mozilla.org/calendar/export;1?type=htmllist&quot;].createInstance(</span>
<a href="#l5.15"></a><span id="l5.15">       Ci.calIExporter</span>
<a href="#l5.16"></a><span id="l5.16">     );</span>
<a href="#l5.17"></a><span id="l5.17">     htmlexporter.exportToStream(aStream, aItems, aTitle);</span>
<a href="#l5.18"></a><span id="l5.18">   },</span>
<a href="#l5.19"></a><span id="l5.19"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/import-export/calMonthGridPrinter.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/import-export/calMonthGridPrinter.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -15,17 +15,17 @@ function calMonthPrinter() {</span>
<a href="#l6.4"></a><span id="l6.4"> calMonthPrinter.prototype = {</span>
<a href="#l6.5"></a><span id="l6.5">   QueryInterface: ChromeUtils.generateQI([Ci.calIPrintFormatter]),</span>
<a href="#l6.6"></a><span id="l6.6">   classID: Components.ID(&quot;{f42d5132-92c4-487b-b5c8-38bf292d74c1}&quot;),</span>
<a href="#l6.7"></a><span id="l6.7"> </span>
<a href="#l6.8"></a><span id="l6.8">   get name() {</span>
<a href="#l6.9"></a><span id="l6.9">     return cal.l10n.getCalString(&quot;monthPrinterName&quot;);</span>
<a href="#l6.10"></a><span id="l6.10">   },</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-  formatToHtml: function(aStream, aStart, aEnd, aCount, aItems, aTitle) {</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+  formatToHtml: function(aStream, aStart, aEnd, aItems, aTitle) {</span>
<a href="#l6.14"></a><span id="l6.14">     let document = cal.xml.parseFile(</span>
<a href="#l6.15"></a><span id="l6.15">       &quot;chrome://calendar-common/skin/printing/calMonthGridPrinter.html&quot;</span>
<a href="#l6.16"></a><span id="l6.16">     );</span>
<a href="#l6.17"></a><span id="l6.17">     let defaultTimezone = cal.dtz.defaultTimezone;</span>
<a href="#l6.18"></a><span id="l6.18"> </span>
<a href="#l6.19"></a><span id="l6.19">     // Set page title</span>
<a href="#l6.20"></a><span id="l6.20">     document.getElementById(&quot;title&quot;).textContent = aTitle;</span>
<a href="#l6.21"></a><span id="l6.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/import-export/calWeekPrinter.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/import-export/calWeekPrinter.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -15,17 +15,17 @@ function calWeekPrinter() {</span>
<a href="#l7.4"></a><span id="l7.4"> calWeekPrinter.prototype = {</span>
<a href="#l7.5"></a><span id="l7.5">   QueryInterface: ChromeUtils.generateQI([Ci.calIPrintFormatter]),</span>
<a href="#l7.6"></a><span id="l7.6">   classID: Components.ID(&quot;{2d6ec97b-9109-4b92-89c5-d4b4806619ce}&quot;),</span>
<a href="#l7.7"></a><span id="l7.7"> </span>
<a href="#l7.8"></a><span id="l7.8">   get name() {</span>
<a href="#l7.9"></a><span id="l7.9">     return cal.l10n.getCalString(&quot;weekPrinterName&quot;);</span>
<a href="#l7.10"></a><span id="l7.10">   },</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-  formatToHtml: function(aStream, aStart, aEnd, aCount, aItems, aTitle) {</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+  formatToHtml: function(aStream, aStart, aEnd, aItems, aTitle) {</span>
<a href="#l7.14"></a><span id="l7.14">     let document = cal.xml.parseFile(&quot;chrome://calendar-common/skin/printing/calWeekPrinter.html&quot;);</span>
<a href="#l7.15"></a><span id="l7.15">     let defaultTimezone = cal.dtz.defaultTimezone;</span>
<a href="#l7.16"></a><span id="l7.16"> </span>
<a href="#l7.17"></a><span id="l7.17">     // Set page title</span>
<a href="#l7.18"></a><span id="l7.18">     document.getElementById(&quot;title&quot;).textContent = aTitle;</span>
<a href="#l7.19"></a><span id="l7.19"> </span>
<a href="#l7.20"></a><span id="l7.20">     cal.view.colorTracker.addColorsToDocument(document);</span>
<a href="#l7.21"></a><span id="l7.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/itip/calItipEmailTransport.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/itip/calItipEmailTransport.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -34,17 +34,17 @@ calItipEmailTransport.prototype = {</span>
<a href="#l8.4"></a><span id="l8.4">   mSenderAddress: null,</span>
<a href="#l8.5"></a><span id="l8.5">   get senderAddress() {</span>
<a href="#l8.6"></a><span id="l8.6">     return this.mSenderAddress;</span>
<a href="#l8.7"></a><span id="l8.7">   },</span>
<a href="#l8.8"></a><span id="l8.8">   set senderAddress(aValue) {</span>
<a href="#l8.9"></a><span id="l8.9">     return (this.mSenderAddress = aValue);</span>
<a href="#l8.10"></a><span id="l8.10">   },</span>
<a href="#l8.11"></a><span id="l8.11"> </span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-  sendItems: function(aCount, aRecipients, aItipItem) {</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+  sendItems: function(aRecipients, aItipItem) {</span>
<a href="#l8.14"></a><span id="l8.14">     if (this.mHasXpcomMail) {</span>
<a href="#l8.15"></a><span id="l8.15">       cal.LOG(&quot;sendItems: Preparing to send an invitation email...&quot;);</span>
<a href="#l8.16"></a><span id="l8.16">       let items = this._prepareItems(aItipItem);</span>
<a href="#l8.17"></a><span id="l8.17">       if (items === false) {</span>
<a href="#l8.18"></a><span id="l8.18">         return false;</span>
<a href="#l8.19"></a><span id="l8.19">       }</span>
<a href="#l8.20"></a><span id="l8.20"> </span>
<a href="#l8.21"></a><span id="l8.21">       return this._sendXpcomMail(aRecipients, items.subject, items.body, aItipItem);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/providers/caldav/calDavCalendar.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/providers/caldav/calDavCalendar.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -2955,29 +2955,29 @@ calDavCalendar.prototype = {</span>
<a href="#l9.4"></a><span id="l9.4">   mSenderAddress: null,</span>
<a href="#l9.5"></a><span id="l9.5">   get senderAddress() {</span>
<a href="#l9.6"></a><span id="l9.6">     return this.mSenderAddress || this.calendarUserAddress;</span>
<a href="#l9.7"></a><span id="l9.7">   },</span>
<a href="#l9.8"></a><span id="l9.8">   set senderAddress(aString) {</span>
<a href="#l9.9"></a><span id="l9.9">     return (this.mSenderAddress = aString);</span>
<a href="#l9.10"></a><span id="l9.10">   },</span>
<a href="#l9.11"></a><span id="l9.11"> </span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-  sendItems: function(aCount, aRecipients, aItipItem) {</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+  sendItems: function(aRecipients, aItipItem) {</span>
<a href="#l9.14"></a><span id="l9.14">     function doImipScheduling(aCalendar, aRecipientList) {</span>
<a href="#l9.15"></a><span id="l9.15">       let result = false;</span>
<a href="#l9.16"></a><span id="l9.16">       let imipTransport = cal.provider.getImipTransport(aCalendar);</span>
<a href="#l9.17"></a><span id="l9.17">       let recipients = [];</span>
<a href="#l9.18"></a><span id="l9.18">       aRecipientList.forEach(rec =&gt; recipients.push(rec.toString()));</span>
<a href="#l9.19"></a><span id="l9.19">       if (imipTransport) {</span>
<a href="#l9.20"></a><span id="l9.20">         cal.LOG(</span>
<a href="#l9.21"></a><span id="l9.21">           &quot;Enforcing client-side email scheduling instead of server-side scheduling&quot; +</span>
<a href="#l9.22"></a><span id="l9.22">             &quot; for &quot; +</span>
<a href="#l9.23"></a><span id="l9.23">             recipients.join()</span>
<a href="#l9.24"></a><span id="l9.24">         );</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineminus">-        result = imipTransport.sendItems(aCount, aRecipientList, aItipItem);</span>
<a href="#l9.26"></a><span id="l9.26" class="difflineplus">+        result = imipTransport.sendItems(aRecipientList, aItipItem);</span>
<a href="#l9.27"></a><span id="l9.27">       } else {</span>
<a href="#l9.28"></a><span id="l9.28">         cal.ERROR(</span>
<a href="#l9.29"></a><span id="l9.29">           &quot;No imip transport available for &quot; +</span>
<a href="#l9.30"></a><span id="l9.30">             aCalendar.id +</span>
<a href="#l9.31"></a><span id="l9.31">             &quot;, failed to notify&quot; +</span>
<a href="#l9.32"></a><span id="l9.32">             recipients.join()</span>
<a href="#l9.33"></a><span id="l9.33">         );</span>
<a href="#l9.34"></a><span id="l9.34">       }</span>
<a href="#l9.35"></a><span id="l9.35" class="difflineat">@@ -3100,17 +3100,17 @@ calDavCalendar.prototype = {</span>
<a href="#l9.36"></a><span id="l9.36">           if (remainingAttendees.length) {</span>
<a href="#l9.37"></a><span id="l9.37">             // try to fall back to email delivery if CalDAV-sched</span>
<a href="#l9.38"></a><span id="l9.38">             // didn't work</span>
<a href="#l9.39"></a><span id="l9.39">             let imipTransport = cal.provider.getImipTransport(self);</span>
<a href="#l9.40"></a><span id="l9.40">             if (imipTransport) {</span>
<a href="#l9.41"></a><span id="l9.41">               if (self.verboseLogging()) {</span>
<a href="#l9.42"></a><span id="l9.42">                 cal.LOG(&quot;CalDAV: sending email to &quot; + remainingAttendees.length + &quot; recipients&quot;);</span>
<a href="#l9.43"></a><span id="l9.43">               }</span>
<a href="#l9.44"></a><span id="l9.44" class="difflineminus">-              imipTransport.sendItems(remainingAttendees.length, remainingAttendees, aItipItem);</span>
<a href="#l9.45"></a><span id="l9.45" class="difflineplus">+              imipTransport.sendItems(remainingAttendees, aItipItem);</span>
<a href="#l9.46"></a><span id="l9.46">             } else {</span>
<a href="#l9.47"></a><span id="l9.47">               cal.LOG(&quot;CalDAV: no fallback to iTIP/iMIP transport for &quot; + self.name);</span>
<a href="#l9.48"></a><span id="l9.48">             }</span>
<a href="#l9.49"></a><span id="l9.49">           }</span>
<a href="#l9.50"></a><span id="l9.50">         },</span>
<a href="#l9.51"></a><span id="l9.51">       };</span>
<a href="#l9.52"></a><span id="l9.52"> </span>
<a href="#l9.53"></a><span id="l9.53">       let uploadData = serializer.serializeToString();</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:31Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

