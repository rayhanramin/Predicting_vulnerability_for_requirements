<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 14377:ff8aeb781f8222405b506452f699583295868030</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ ff8aeb781f8222405b506452f699583295868030" />
<meta property="og:url" content="/comm-central/rev/ff8aeb781f8222405b506452f699583295868030" />
<meta property="og:description" content="Fix compatibility with Mozilla 2.0 (upgrade comm-central build system using 9f4d6e54923d as the reference)." />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / ff8aeb781f8222405b506452f699583295868030 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/ff8aeb781f8222405b506452f699583295868030">shortlog</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/ff8aeb781f8222405b506452f699583295868030">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030">files</a> |
changeset |
<a href="/comm-central/raw-rev/ff8aeb781f8222405b506452f699583295868030">raw</a>  | <a href="/comm-central/archive/ff8aeb781f8222405b506452f699583295868030.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
Fix compatibility with Mozilla 2.0 (upgrade comm-central build system using 9f4d6e54923d as the reference).
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#70;&#108;&#111;&#114;&#105;&#97;&#110;&#32;&#81;&#117;&#232;&#122;&#101;&#32;&#60;&#102;&#108;&#111;&#114;&#105;&#97;&#110;&#64;&#105;&#110;&#115;&#116;&#97;&#110;&#116;&#98;&#105;&#114;&#100;&#46;&#111;&#114;&#103;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 29 Jul 2010 02:24:56 +0200</td></tr>

<tr>
 <td>changeset 14377</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/ff8aeb781f8222405b506452f699583295868030">ff8aeb781f8222405b506452f699583295868030</a></td>
</tr>



<tr>
<td>parent 14376</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/d041cc17586b11fa54a9d36ff9ec8516c8100cc9">d041cc17586b11fa54a9d36ff9ec8516c8100cc9</a>
</td>
</tr>

<tr>
<td>child 14378</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/aebaafd71bc657afdc18cee846640e779703e8a8">aebaafd71bc657afdc18cee846640e779703e8a8</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=ff8aeb781f8222405b506452f699583295868030">9778</a></td></tr>
<tr><td>push user</td><td>florian@queze.net</td></tr>
<tr><td>push date</td><td class="date age">Sun, 12 Jan 2014 18:25:45 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@f81a23bfefcd [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&newProject=comm-central&newRevision=279a7aa9624ffb41326b021ff7d8bc68b9b89551&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&newProject=comm-central&newRevision=279a7aa9624ffb41326b021ff7d8bc68b9b89551&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&newProject=comm-central&newRevision=279a7aa9624ffb41326b021ff7d8bc68b9b89551&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>






</table></div>

<div class="page_body description">Fix compatibility with Mozilla 2.0 (upgrade comm-central build system using 9f4d6e54923d as the reference).</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/app/Makefile.in">im/app/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/app/Makefile.in">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/app/Makefile.in">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/app/Makefile.in">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/app/Makefile.in">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/app/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/app/mozilla.in">im/app/mozilla.in</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/app/mozilla.in">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/app/mozilla.in">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/app/mozilla.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/app/splash.rc">im/app/splash.rc</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/app/splash.rc">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/app/splash.rc">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/app/splash.rc">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/app/splash.rc">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/app/splash.rc">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/components/Makefile.in">im/components/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/components/Makefile.in">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/components/Makefile.in">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/components/Makefile.in">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/components/Makefile.in">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/components/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/components/autoLoginHandler.js">im/components/autoLoginHandler.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/components/autoLoginHandler.js">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/components/autoLoginHandler.js">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/components/autoLoginHandler.js">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/components/autoLoginHandler.js">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/components/autoLoginHandler.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/components/autoLoginHandler.manifest">im/components/autoLoginHandler.manifest</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/components/autoLoginHandler.manifest">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/components/autoLoginHandler.manifest">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/components/autoLoginHandler.manifest">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/components/autoLoginHandler.manifest">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/components/autoLoginHandler.manifest">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/components/logger.js">im/components/logger.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/components/logger.js">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/components/logger.js">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/components/logger.js">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/components/logger.js">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/components/logger.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/components/logger.manifest">im/components/logger.manifest</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/components/logger.manifest">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/components/logger.manifest">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/components/logger.manifest">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/components/logger.manifest">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/components/logger.manifest">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/components/profileMigrator.js">im/components/profileMigrator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/components/profileMigrator.js">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/components/profileMigrator.js">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/components/profileMigrator.js">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/components/profileMigrator.js">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/components/profileMigrator.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/components/profileMigrator.manifest">im/components/profileMigrator.manifest</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/components/profileMigrator.manifest">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/components/profileMigrator.manifest">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/components/profileMigrator.manifest">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/components/profileMigrator.manifest">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/components/profileMigrator.manifest">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/components/smileProtocolHandler.js">im/components/smileProtocolHandler.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/components/smileProtocolHandler.js">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/components/smileProtocolHandler.js">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/components/smileProtocolHandler.js">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/components/smileProtocolHandler.js">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/components/smileProtocolHandler.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/components/smileProtocolHandler.manifest">im/components/smileProtocolHandler.manifest</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/components/smileProtocolHandler.manifest">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/components/smileProtocolHandler.manifest">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/components/smileProtocolHandler.manifest">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/components/smileProtocolHandler.manifest">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/components/smileProtocolHandler.manifest">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/confvars.sh">im/confvars.sh</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/confvars.sh">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/confvars.sh">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/confvars.sh">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/confvars.sh">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/confvars.sh">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/content/convZoom.js">im/content/convZoom.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/content/convZoom.js">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/content/convZoom.js">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/content/convZoom.js">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/content/convZoom.js">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/content/convZoom.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/content/convbrowser.xml">im/content/convbrowser.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/content/convbrowser.xml">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/content/convbrowser.xml">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/content/convbrowser.xml">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/content/convbrowser.xml">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/content/convbrowser.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/content/jar.mn">im/content/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/content/jar.mn">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/content/jar.mn">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/content/jar.mn">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/content/jar.mn">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/content/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/content/preferences/themes.js">im/content/preferences/themes.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/content/preferences/themes.js">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/content/preferences/themes.js">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/content/preferences/themes.js">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/content/preferences/themes.js">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/content/preferences/themes.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/installer/Makefile.in">im/installer/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/installer/Makefile.in">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/installer/Makefile.in">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/installer/Makefile.in">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/installer/Makefile.in">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/installer/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/installer/windows/Makefile.in">im/installer/windows/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/installer/windows/Makefile.in">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/installer/windows/Makefile.in">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/installer/windows/Makefile.in">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/installer/windows/Makefile.in">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/installer/windows/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/themes/messages/bubbles/Incoming/Content.html">im/themes/messages/bubbles/Incoming/Content.html</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/im/themes/messages/bubbles/Incoming/Content.html">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/im/themes/messages/bubbles/Incoming/Content.html">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/im/themes/messages/bubbles/Incoming/Content.html">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/im/themes/messages/bubbles/Incoming/Content.html">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/im/themes/messages/bubbles/Incoming/Content.html">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/facebookOverrideProtocol.js">purple/purplexpcom/src/facebookOverrideProtocol.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/facebookOverrideProtocol.js">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/facebookOverrideProtocol.js">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/facebookOverrideProtocol.js">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/facebookOverrideProtocol.js">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/facebookOverrideProtocol.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/gtalkOverrideProtocol.js">purple/purplexpcom/src/gtalkOverrideProtocol.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/gtalkOverrideProtocol.js">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/gtalkOverrideProtocol.js">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/gtalkOverrideProtocol.js">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/gtalkOverrideProtocol.js">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/gtalkOverrideProtocol.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/jsProtoHelper.jsm">purple/purplexpcom/src/jsProtoHelper.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/jsProtoHelper.jsm">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/jsProtoHelper.jsm">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/jsProtoHelper.jsm">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/jsProtoHelper.jsm">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/jsProtoHelper.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/jsTestProtocol.js">purple/purplexpcom/src/jsTestProtocol.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/jsTestProtocol.js">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/jsTestProtocol.js">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/jsTestProtocol.js">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/jsTestProtocol.js">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/jsTestProtocol.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/jsTestProtocol.manifest">purple/purplexpcom/src/jsTestProtocol.manifest</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/jsTestProtocol.manifest">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/jsTestProtocol.manifest">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/jsTestProtocol.manifest">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/jsTestProtocol.manifest">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/jsTestProtocol.manifest">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/overrideProtocols.manifest">purple/purplexpcom/src/overrideProtocols.manifest</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/overrideProtocols.manifest">file</a> |
<a href="/comm-central/annotate/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/overrideProtocols.manifest">annotate</a> |
<a href="/comm-central/diff/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/overrideProtocols.manifest">diff</a> |
<a href="/comm-central/comparison/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/overrideProtocols.manifest">comparison</a> |
<a href="/comm-central/log/ff8aeb781f8222405b506452f699583295868030/purple/purplexpcom/src/overrideProtocols.manifest">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/im/app/Makefile.in</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/im/app/Makefile.in</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -56,83 +56,85 @@ MAIL_APP_LICENSE_FILE = $(srcdir)/app-li</span>
<a href="#l1.4"></a><span id="l1.4"> DEFINES += \</span>
<a href="#l1.5"></a><span id="l1.5">   -DINSTANTBIRD_ICO=\&quot;$(DIST)/branding/instantbird.ico\&quot; \</span>
<a href="#l1.6"></a><span id="l1.6">   -DAB_CD=$(AB_CD) \</span>
<a href="#l1.7"></a><span id="l1.7">   -DGRE_MILESTONE=$(GRE_MILESTONE) \</span>
<a href="#l1.8"></a><span id="l1.8">   -DGRE_BUILDID=$(GRE_BUILDID) \</span>
<a href="#l1.9"></a><span id="l1.9">   -DAPP_LICENSE_BLOCK=$(MAIL_APP_LICENSE_FILE) \</span>
<a href="#l1.10"></a><span id="l1.10">    $(NULL)</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-SOURCE_STAMP := $(shell cd $(topsrcdir) ; hg identify -i 2&gt;/dev/null | cut -f1 -d' ')</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineminus">-ifdef SOURCE_STAMP</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineminus">-DEFINES += -DMOZ_SOURCE_STAMP=&quot;$(SOURCE_STAMP)&quot;</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+MOZ_SOURCE_STAMP ?= $(firstword $(shell hg -R $(topsrcdir) parent --template=&quot;{node|short}\n&quot; 2&gt;/dev/null))</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineplus">+ifdef MOZ_SOURCE_STAMP</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineplus">+DEFINES += -DMOZ_SOURCE_STAMP=&quot;$(MOZ_SOURCE_STAMP)&quot;</span>
<a href="#l1.18"></a><span id="l1.18"> endif</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20"> SOURCE_REPO := $(shell hg -R $(topsrcdir) showconfig paths.default 2&gt;/dev/null | sed -e &quot;s/^ssh:/http:/&quot;)</span>
<a href="#l1.21"></a><span id="l1.21"> ifdef SOURCE_REPO</span>
<a href="#l1.22"></a><span id="l1.22"> DEFINES += -DMOZ_SOURCE_REPO=&quot;$(SOURCE_REPO)&quot;</span>
<a href="#l1.23"></a><span id="l1.23"> endif</span>
<a href="#l1.24"></a><span id="l1.24"> </span>
<a href="#l1.25"></a><span id="l1.25" class="difflineplus">+ifdef MOZILLA_OFFICIAL</span>
<a href="#l1.26"></a><span id="l1.26" class="difflineplus">+DEFINES += -DOFFICIAL_BUILD=1</span>
<a href="#l1.27"></a><span id="l1.27" class="difflineplus">+endif</span>
<a href="#l1.28"></a><span id="l1.28" class="difflineplus">+</span>
<a href="#l1.29"></a><span id="l1.29"> DIRS		= profile</span>
<a href="#l1.30"></a><span id="l1.30"> </span>
<a href="#l1.31"></a><span id="l1.31"> GARBAGE += \</span>
<a href="#l1.32"></a><span id="l1.32"> 	$(MAIL_LICENSE_HTML_FILE) \</span>
<a href="#l1.33"></a><span id="l1.33"> 	$(FINAL_TARGET)/license.html \</span>
<a href="#l1.34"></a><span id="l1.34"> 	$(NULL)</span>
<a href="#l1.35"></a><span id="l1.35"> </span>
<a href="#l1.36"></a><span id="l1.36"> PREF_JS_EXPORTS = \</span>
<a href="#l1.37"></a><span id="l1.37">     $(srcdir)/profile/all-instantbird.js \</span>
<a href="#l1.38"></a><span id="l1.38">     $(srcdir)/profile/channel-prefs.js \</span>
<a href="#l1.39"></a><span id="l1.39">     $(NULL)</span>
<a href="#l1.40"></a><span id="l1.40"> </span>
<a href="#l1.41"></a><span id="l1.41"> ifndef LIBXUL_SDK</span>
<a href="#l1.42"></a><span id="l1.42"> </span>
<a href="#l1.43"></a><span id="l1.43" class="difflineminus">-ifeq ($(USE_SHORT_LIBNAME), 1)</span>
<a href="#l1.44"></a><span id="l1.44" class="difflineminus">-PROGRAM = instantbird$(BIN_SUFFIX)</span>
<a href="#l1.45"></a><span id="l1.45" class="difflineplus">+ifneq (,$(filter OS2 WINCE WINNT,$(OS_ARCH)))</span>
<a href="#l1.46"></a><span id="l1.46" class="difflineplus">+PROGRAM = $(MOZ_APP_NAME)$(BIN_SUFFIX)</span>
<a href="#l1.47"></a><span id="l1.47"> else</span>
<a href="#l1.48"></a><span id="l1.48" class="difflineminus">-PROGRAM = instantbird-bin$(BIN_SUFFIX)</span>
<a href="#l1.49"></a><span id="l1.49" class="difflineplus">+PROGRAM = $(MOZ_APP_NAME)-bin$(BIN_SUFFIX)</span>
<a href="#l1.50"></a><span id="l1.50"> endif</span>
<a href="#l1.51"></a><span id="l1.51"> </span>
<a href="#l1.52"></a><span id="l1.52" class="difflineminus">-REQUIRES = \</span>
<a href="#l1.53"></a><span id="l1.53" class="difflineminus">-	xpcom \</span>
<a href="#l1.54"></a><span id="l1.54" class="difflineminus">-	string \</span>
<a href="#l1.55"></a><span id="l1.55" class="difflineminus">-	xulapp \</span>
<a href="#l1.56"></a><span id="l1.56" class="difflineminus">-	$(NULL)</span>
<a href="#l1.57"></a><span id="l1.57"> </span>
<a href="#l1.58"></a><span id="l1.58"> CPPSRCS = nsMain.cpp</span>
<a href="#l1.59"></a><span id="l1.59"> else</span>
<a href="#l1.60"></a><span id="l1.60"> </span>
<a href="#l1.61"></a><span id="l1.61" class="difflineminus">-ifeq ($(USE_SHORT_LIBNAME), 1)</span>
<a href="#l1.62"></a><span id="l1.62" class="difflineminus">-STUBNAME = instantbird$(BIN_SUFFIX)</span>
<a href="#l1.63"></a><span id="l1.63" class="difflineplus">+ifneq (,$(filter OS2 WINCE WINNT,$(OS_ARCH)))</span>
<a href="#l1.64"></a><span id="l1.64" class="difflineplus">+STUBNAME = $(MOZ_APP_NAME)$(BIN_SUFFIX)</span>
<a href="#l1.65"></a><span id="l1.65"> else</span>
<a href="#l1.66"></a><span id="l1.66" class="difflineminus">-STUBNAME = instantbird-bin$(BIN_SUFFIX)</span>
<a href="#l1.67"></a><span id="l1.67" class="difflineplus">+STUBNAME = $(MOZ_APP_NAME)-bin$(BIN_SUFFIX)</span>
<a href="#l1.68"></a><span id="l1.68"> endif</span>
<a href="#l1.69"></a><span id="l1.69"> endif # LIBXUL_SDK</span>
<a href="#l1.70"></a><span id="l1.70"> </span>
<a href="#l1.71"></a><span id="l1.71"> DIST_FILES = application.ini</span>
<a href="#l1.72"></a><span id="l1.72"> </span>
<a href="#l1.73"></a><span id="l1.73"> LOCAL_INCLUDES += -I$(MOZILLA_SRCDIR)/toolkit/xre</span>
<a href="#l1.74"></a><span id="l1.74"> </span>
<a href="#l1.75"></a><span id="l1.75"> ifdef BUILD_STATIC_LIBS</span>
<a href="#l1.76"></a><span id="l1.76"> ifdef _MSC_VER</span>
<a href="#l1.77"></a><span id="l1.77" class="difflineminus">-STATIC_COMPONENTS_LINKER_PATH = -LIBPATH:$(DEPTH)/staticlib</span>
<a href="#l1.78"></a><span id="l1.78" class="difflineplus">+STATIC_COMPONENTS_LINKER_PATH = -LIBPATH:$(MOZDEPTH)/staticlib</span>
<a href="#l1.79"></a><span id="l1.79"> else</span>
<a href="#l1.80"></a><span id="l1.80" class="difflineminus">-STATIC_COMPONENTS_LINKER_PATH = -L$(DEPTH)/staticlib</span>
<a href="#l1.81"></a><span id="l1.81" class="difflineplus">+STATIC_COMPONENTS_LINKER_PATH = -L$(MOZDEPTH)/staticlib</span>
<a href="#l1.82"></a><span id="l1.82"> endif</span>
<a href="#l1.83"></a><span id="l1.83" class="difflineminus">-LIBS += $(DEPTH)/toolkit/xre/$(LIB_PREFIX)xulapp_s.$(LIB_SUFFIX)</span>
<a href="#l1.84"></a><span id="l1.84" class="difflineplus">+LIBS += $(MOZDEPTH)/toolkit/xre/$(LIB_PREFIX)xulapp_s.$(LIB_SUFFIX)</span>
<a href="#l1.85"></a><span id="l1.85"> else</span>
<a href="#l1.86"></a><span id="l1.86" class="difflineminus">-ifneq (,$(filter mac cocoa,$(MOZ_WIDGET_TOOLKIT)))</span>
<a href="#l1.87"></a><span id="l1.87" class="difflineplus">+ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))</span>
<a href="#l1.88"></a><span id="l1.88"> LIBS += $(DIST)/bin/XUL</span>
<a href="#l1.89"></a><span id="l1.89"> else</span>
<a href="#l1.90"></a><span id="l1.90"> EXTRA_DSO_LIBS += xul</span>
<a href="#l1.91"></a><span id="l1.91"> endif</span>
<a href="#l1.92"></a><span id="l1.92"> endif</span>
<a href="#l1.93"></a><span id="l1.93"> </span>
<a href="#l1.94"></a><span id="l1.94" class="difflineminus">-ifneq (,$(filter mac cocoa,$(MOZ_WIDGET_TOOLKIT)))</span>
<a href="#l1.95"></a><span id="l1.95" class="difflineplus">+ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))</span>
<a href="#l1.96"></a><span id="l1.96"> TK_LIBS := -framework Cocoa $(TK_LIBS)</span>
<a href="#l1.97"></a><span id="l1.97" class="difflineplus">+ifdef BUILD_STATIC_LIBS</span>
<a href="#l1.98"></a><span id="l1.98" class="difflineplus">+TK_LIBS := -framework SystemConfiguration $(TK_LIBS)</span>
<a href="#l1.99"></a><span id="l1.99" class="difflineplus">+endif</span>
<a href="#l1.100"></a><span id="l1.100"> endif</span>
<a href="#l1.101"></a><span id="l1.101"> </span>
<a href="#l1.102"></a><span id="l1.102"> ifdef MOZ_ENABLE_LIBXUL</span>
<a href="#l1.103"></a><span id="l1.103"> APP_XPCOM_LIBS = $(XPCOM_GLUE_LDOPTS)</span>
<a href="#l1.104"></a><span id="l1.104"> else</span>
<a href="#l1.105"></a><span id="l1.105"> MOZILLA_INTERNAL_API = 1</span>
<a href="#l1.106"></a><span id="l1.106"> APP_XPCOM_LIBS = $(XPCOM_LIBS)</span>
<a href="#l1.107"></a><span id="l1.107"> endif</span>
<a href="#l1.108"></a><span id="l1.108" class="difflineat">@@ -150,24 +152,36 @@ LIBS += \</span>
<a href="#l1.109"></a><span id="l1.109"> ifneq (,$(filter gtk gtk2 xlib,$(MOZ_WIDGET_TOOLKIT)))</span>
<a href="#l1.110"></a><span id="l1.110"> LIBS += $(XLDFLAGS) $(XLIBS)</span>
<a href="#l1.111"></a><span id="l1.111"> endif</span>
<a href="#l1.112"></a><span id="l1.112"> </span>
<a href="#l1.113"></a><span id="l1.113"> ifdef MOZ_JPROF</span>
<a href="#l1.114"></a><span id="l1.114"> LIBS += -ljprof</span>
<a href="#l1.115"></a><span id="l1.115"> endif</span>
<a href="#l1.116"></a><span id="l1.116"> </span>
<a href="#l1.117"></a><span id="l1.117" class="difflineplus">+ifdef MOZ_ENABLE_DBUS</span>
<a href="#l1.118"></a><span id="l1.118" class="difflineplus">+LIBS += $(MOZ_DBUS_GLIB_LIBS)</span>
<a href="#l1.119"></a><span id="l1.119" class="difflineplus">+endif</span>
<a href="#l1.120"></a><span id="l1.120" class="difflineplus">+</span>
<a href="#l1.121"></a><span id="l1.121" class="difflineplus">+ifndef MOZ_ENABLE_LIBXUL</span>
<a href="#l1.122"></a><span id="l1.122" class="difflineplus">+ifdef MOZ_NATIVE_HUNSPELL</span>
<a href="#l1.123"></a><span id="l1.123" class="difflineplus">+LIBS += $(MOZ_HUNSPELL_LIBS)</span>
<a href="#l1.124"></a><span id="l1.124" class="difflineplus">+endif</span>
<a href="#l1.125"></a><span id="l1.125" class="difflineplus">+endif</span>
<a href="#l1.126"></a><span id="l1.126" class="difflineplus">+</span>
<a href="#l1.127"></a><span id="l1.127"> ifndef MOZ_WINCONSOLE</span>
<a href="#l1.128"></a><span id="l1.128"> ifdef MOZ_DEBUG</span>
<a href="#l1.129"></a><span id="l1.129"> MOZ_WINCONSOLE = 1</span>
<a href="#l1.130"></a><span id="l1.130"> else</span>
<a href="#l1.131"></a><span id="l1.131"> MOZ_WINCONSOLE = 0</span>
<a href="#l1.132"></a><span id="l1.132"> endif</span>
<a href="#l1.133"></a><span id="l1.133"> endif</span>
<a href="#l1.134"></a><span id="l1.134"> </span>
<a href="#l1.135"></a><span id="l1.135" class="difflineplus">+# This switches $(INSTALL) to copy mode, like $(SYSINSTALL), so things that</span>
<a href="#l1.136"></a><span id="l1.136" class="difflineplus">+# shouldn't get 755 perms need $(IFLAGS1) for either way of calling nsinstall.</span>
<a href="#l1.137"></a><span id="l1.137"> NSDISTMODE = copy</span>
<a href="#l1.138"></a><span id="l1.138"> </span>
<a href="#l1.139"></a><span id="l1.139"> include $(topsrcdir)/config/config.mk</span>
<a href="#l1.140"></a><span id="l1.140"> </span>
<a href="#l1.141"></a><span id="l1.141"> ifdef _MSC_VER</span>
<a href="#l1.142"></a><span id="l1.142"> # Always enter a Windows program through wmain, whether or not we're</span>
<a href="#l1.143"></a><span id="l1.143"> # a console application.</span>
<a href="#l1.144"></a><span id="l1.144"> ifdef WINCE</span>
<a href="#l1.145"></a><span id="l1.145" class="difflineat">@@ -191,62 +205,86 @@ else</span>
<a href="#l1.146"></a><span id="l1.146"> include $(topsrcdir)/config/static-config.mk</span>
<a href="#l1.147"></a><span id="l1.147"> </span>
<a href="#l1.148"></a><span id="l1.148"> EXTRA_DEPS	+= \</span>
<a href="#l1.149"></a><span id="l1.149"> 	$(STATIC_EXTRA_DEPS) \</span>
<a href="#l1.150"></a><span id="l1.150"> 	$(NULL)</span>
<a href="#l1.151"></a><span id="l1.151"> DEFINES		+= $(STATIC_DEFINES)</span>
<a href="#l1.152"></a><span id="l1.152"> CPPSRCS		+= $(STATIC_CPPSRCS)</span>
<a href="#l1.153"></a><span id="l1.153"> EXTRA_DSO_LIBS	+= $(STATIC_EXTRA_DSO_LIBS)</span>
<a href="#l1.154"></a><span id="l1.154" class="difflineminus">-REQUIRES	+= $(STATIC_REQUIRES)</span>
<a href="#l1.155"></a><span id="l1.155" class="difflineminus">-EXTRA_LIBS	+= $(STATIC_EXTRA_LIBS)</span>
<a href="#l1.156"></a><span id="l1.156" class="difflineplus">+EXTRA_LIBS	+= \</span>
<a href="#l1.157"></a><span id="l1.157" class="difflineplus">+	$(STATIC_EXTRA_LIBS) \</span>
<a href="#l1.158"></a><span id="l1.158" class="difflineplus">+	$(MOZ_HARFBUZZ_LIBS) \</span>
<a href="#l1.159"></a><span id="l1.159" class="difflineplus">+	$(NULL)</span>
<a href="#l1.160"></a><span id="l1.160" class="difflineplus">+</span>
<a href="#l1.161"></a><span id="l1.161" class="difflineplus">+# OpenGL is required by (mozilla/)content/canvas: see (mozilla/)layout/build/Makefile.in.</span>
<a href="#l1.162"></a><span id="l1.162" class="difflineplus">+ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))</span>
<a href="#l1.163"></a><span id="l1.163" class="difflineplus">+OS_LIBS += -framework OpenGL</span>
<a href="#l1.164"></a><span id="l1.164"> endif</span>
<a href="#l1.165"></a><span id="l1.165"> </span>
<a href="#l1.166"></a><span id="l1.166" class="difflineplus">+endif # BUILD_STATIC_LIBS</span>
<a href="#l1.167"></a><span id="l1.167" class="difflineplus">+</span>
<a href="#l1.168"></a><span id="l1.168"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l1.169"></a><span id="l1.169"> OS_LIBS += $(call EXPAND_LIBNAME,comctl32 comdlg32 uuid shell32 ole32 oleaut32 version winspool)</span>
<a href="#l1.170"></a><span id="l1.170"> OS_LIBS += $(call EXPAND_LIBNAME,usp10 msimg32)</span>
<a href="#l1.171"></a><span id="l1.171"> endif</span>
<a href="#l1.172"></a><span id="l1.172"> </span>
<a href="#l1.173"></a><span id="l1.173"> ifneq (,$(filter WINNT WINCE,$(OS_ARCH)))</span>
<a href="#l1.174"></a><span id="l1.174"> RCINCLUDE = splash.rc</span>
<a href="#l1.175"></a><span id="l1.175"> ifndef GNU_CC</span>
<a href="#l1.176"></a><span id="l1.176"> RCFLAGS += -DMOZ_INSTANTBIRD -I$(srcdir)</span>
<a href="#l1.177"></a><span id="l1.177"> else</span>
<a href="#l1.178"></a><span id="l1.178"> RCFLAGS += -DMOZ_INSTANTBIRD --include-dir $(srcdir)</span>
<a href="#l1.179"></a><span id="l1.179"> endif</span>
<a href="#l1.180"></a><span id="l1.180"> ifdef BUILD_STATIC_LIBS</span>
<a href="#l1.181"></a><span id="l1.181"> RCFLAGS += -DMOZ_STATIC_BUILD</span>
<a href="#l1.182"></a><span id="l1.182" class="difflineplus">+OS_LIBS += $(call EXPAND_LIBNAME,shlwapi)</span>
<a href="#l1.183"></a><span id="l1.183"> endif</span>
<a href="#l1.184"></a><span id="l1.184"> endif</span>
<a href="#l1.185"></a><span id="l1.185"> </span>
<a href="#l1.186"></a><span id="l1.186"> ifeq ($(OS_ARCH),BeOS)</span>
<a href="#l1.187"></a><span id="l1.187"> ifdef BUILD_STATIC_LIBS</span>
<a href="#l1.188"></a><span id="l1.188"> OS_LIBS += -ltracker -lgame</span>
<a href="#l1.189"></a><span id="l1.189"> endif</span>
<a href="#l1.190"></a><span id="l1.190"> endif</span>
<a href="#l1.191"></a><span id="l1.191"> </span>
<a href="#l1.192"></a><span id="l1.192" class="difflineplus">+ifeq ($(OS_ARCH),OS2)</span>
<a href="#l1.193"></a><span id="l1.193" class="difflineplus">+RESFILE=splashos2.res</span>
<a href="#l1.194"></a><span id="l1.194" class="difflineplus">+RCFLAGS += -DMOZ_INSTANTBIRD</span>
<a href="#l1.195"></a><span id="l1.195" class="difflineplus">+ifdef BUILD_STATIC_LIBS</span>
<a href="#l1.196"></a><span id="l1.196" class="difflineplus">+RCFLAGS += -DMOZ_STATIC_BUILD -i $(DIST)/include</span>
<a href="#l1.197"></a><span id="l1.197" class="difflineplus">+endif</span>
<a href="#l1.198"></a><span id="l1.198" class="difflineplus">+ifdef DEBUG</span>
<a href="#l1.199"></a><span id="l1.199" class="difflineplus">+RCFLAGS += -DDEBUG</span>
<a href="#l1.200"></a><span id="l1.200" class="difflineplus">+endif</span>
<a href="#l1.201"></a><span id="l1.201" class="difflineplus">+RCFLAGS += -DINSTANTBIRD_ICO=\&quot;$(DIST)/branding/instantbird.ico\&quot;</span>
<a href="#l1.202"></a><span id="l1.202" class="difflineplus">+endif</span>
<a href="#l1.203"></a><span id="l1.203" class="difflineplus">+</span>
<a href="#l1.204"></a><span id="l1.204" class="difflineplus">+LIBS += $(JEMALLOC_LIBS)</span>
<a href="#l1.205"></a><span id="l1.205" class="difflineplus">+</span>
<a href="#l1.206"></a><span id="l1.206"> include $(topsrcdir)/config/rules.mk</span>
<a href="#l1.207"></a><span id="l1.207"> </span>
<a href="#l1.208"></a><span id="l1.208"> ifdef MOZILLA_OFFICIAL</span>
<a href="#l1.209"></a><span id="l1.209"> DEFINES += -DMOZILLA_OFFICIAL</span>
<a href="#l1.210"></a><span id="l1.210"> endif</span>
<a href="#l1.211"></a><span id="l1.211"> </span>
<a href="#l1.212"></a><span id="l1.212"> ifdef BUILD_STATIC_LIBS</span>
<a href="#l1.213"></a><span id="l1.213"> include $(topsrcdir)/config/static-rules.mk</span>
<a href="#l1.214"></a><span id="l1.214"> </span>
<a href="#l1.215"></a><span id="l1.215"> DEFINES	+= -DIMPL_XREAPI</span>
<a href="#l1.216"></a><span id="l1.216"> endif</span>
<a href="#l1.217"></a><span id="l1.217"> </span>
<a href="#l1.218"></a><span id="l1.218" class="difflineminus">-APP_VERSION = $(shell cat $(srcdir)/../config/version.txt)</span>
<a href="#l1.219"></a><span id="l1.219" class="difflineminus">-DEFINES += -DAPP_VERSION=&quot;$(APP_VERSION)&quot;</span>
<a href="#l1.220"></a><span id="l1.220" class="difflineplus">+APP_UA_NAME = $(shell echo $(MOZ_APP_DISPLAYNAME) | sed -e's/[^A-Za-z]//g')</span>
<a href="#l1.221"></a><span id="l1.221" class="difflineplus">+DEFINES += -DAPP_VERSION=&quot;$(MOZ_APP_VERSION)&quot; -DAPP_UA_NAME=&quot;$(APP_UA_NAME)&quot;</span>
<a href="#l1.222"></a><span id="l1.222"> </span>
<a href="#l1.223"></a><span id="l1.223" class="difflineminus">-ifneq (,$(filter mac cocoa,$(MOZ_WIDGET_TOOLKIT)))</span>
<a href="#l1.224"></a><span id="l1.224" class="difflineplus">+ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))</span>
<a href="#l1.225"></a><span id="l1.225"> ifdef BUILD_STATIC_LIBS</span>
<a href="#l1.226"></a><span id="l1.226" class="difflineminus">-LIBS	+= -lcups -framework AddressBook</span>
<a href="#l1.227"></a><span id="l1.227" class="difflineplus">+LIBS	+= -lcups</span>
<a href="#l1.228"></a><span id="l1.228"> endif</span>
<a href="#l1.229"></a><span id="l1.229" class="difflineplus">+LIBS	+= -framework CoreAudio -framework AudioToolbox -framework AudioUnit -framework Carbon</span>
<a href="#l1.230"></a><span id="l1.230"> endif</span>
<a href="#l1.231"></a><span id="l1.231"> </span>
<a href="#l1.232"></a><span id="l1.232"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l1.233"></a><span id="l1.233"> #</span>
<a href="#l1.234"></a><span id="l1.234"> # Control the default heap size.</span>
<a href="#l1.235"></a><span id="l1.235"> # This is the heap returned by GetProcessHeap().</span>
<a href="#l1.236"></a><span id="l1.236"> # As we use the CRT heap, the default size is too large and wastes VM.</span>
<a href="#l1.237"></a><span id="l1.237"> #</span>
<a href="#l1.238"></a><span id="l1.238" class="difflineat">@@ -255,16 +293,22 @@ ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l1.239"></a><span id="l1.239"> #</span>
<a href="#l1.240"></a><span id="l1.240"> # Set it to 256k.  See bug 127069.</span>
<a href="#l1.241"></a><span id="l1.241"> #</span>
<a href="#l1.242"></a><span id="l1.242"> ifndef GNU_CC</span>
<a href="#l1.243"></a><span id="l1.243"> LDFLAGS += /HEAP:0x40000</span>
<a href="#l1.244"></a><span id="l1.244"> endif</span>
<a href="#l1.245"></a><span id="l1.245"> endif</span>
<a href="#l1.246"></a><span id="l1.246"> </span>
<a href="#l1.247"></a><span id="l1.247" class="difflineplus">+ifeq ($(OS_ARCH),AIX)</span>
<a href="#l1.248"></a><span id="l1.248" class="difflineplus">+ifdef BUILD_STATIC_LIBS</span>
<a href="#l1.249"></a><span id="l1.249" class="difflineplus">+LDFLAGS += -bbigtoc</span>
<a href="#l1.250"></a><span id="l1.250" class="difflineplus">+endif</span>
<a href="#l1.251"></a><span id="l1.251" class="difflineplus">+endif</span>
<a href="#l1.252"></a><span id="l1.252" class="difflineplus">+</span>
<a href="#l1.253"></a><span id="l1.253"> $(PROGRAM): $(DEPTH)/toolkit/xre/$(LIB_PREFIX)xulapp_s.$(LIB_SUFFIX)</span>
<a href="#l1.254"></a><span id="l1.254"> </span>
<a href="#l1.255"></a><span id="l1.255"> ifneq (,$(filter windows gtk gtk2,$(MOZ_WIDGET_TOOLKIT)))</span>
<a href="#l1.256"></a><span id="l1.256"> ifneq (,$(filter windows,$(MOZ_WIDGET_TOOLKIT)))</span>
<a href="#l1.257"></a><span id="l1.257"> ICON_SUFFIX=.ico</span>
<a href="#l1.258"></a><span id="l1.258"> else</span>
<a href="#l1.259"></a><span id="l1.259"> ICON_SUFFIX=.png</span>
<a href="#l1.260"></a><span id="l1.260"> endif</span>
<a href="#l1.261"></a><span id="l1.261" class="difflineat">@@ -301,32 +345,34 @@ libs:: $(addprefix $(DIST)/branding/,$(B</span>
<a href="#l1.262"></a><span id="l1.262"> 	$(INSTALL) $^ $(DIST)/bin/chrome/icons/default</span>
<a href="#l1.263"></a><span id="l1.263"> endif</span>
<a href="#l1.264"></a><span id="l1.264"> </span>
<a href="#l1.265"></a><span id="l1.265"> ifeq ($(MOZ_WIDGET_TOOLKIT),gtk2)</span>
<a href="#l1.266"></a><span id="l1.266"> libs::</span>
<a href="#l1.267"></a><span id="l1.267"> 	$(INSTALL) $(DIST)/branding/default16.png $(DIST)/bin/chrome/icons/default</span>
<a href="#l1.268"></a><span id="l1.268"> endif</span>
<a href="#l1.269"></a><span id="l1.269"> </span>
<a href="#l1.270"></a><span id="l1.270" class="difflineminus">-ifneq (,$(filter-out WINNT WINCE Darwin,$(OS_ARCH)))</span>
<a href="#l1.271"></a><span id="l1.271" class="difflineminus">-instantbird:: mozilla.in Makefile.in Makefile $(DEPTH)/config/autoconf.mk</span>
<a href="#l1.272"></a><span id="l1.272" class="difflineminus">-	cat $&lt; | sed -e &quot;s|%MOZAPPDIR%|$(mozappdir)|&quot; \</span>
<a href="#l1.273"></a><span id="l1.273" class="difflineminus">-		-e &quot;s|%MREDIR%|$(mredir)|&quot; \</span>
<a href="#l1.274"></a><span id="l1.274" class="difflineminus">-		-e &quot;s|%MOZILLA-BIN%|$(PROGRAM)|g&quot; &gt; $@</span>
<a href="#l1.275"></a><span id="l1.275" class="difflineplus">+ifneq (,$(filter-out OS2 WINNT WINCE Darwin,$(OS_ARCH)))</span>
<a href="#l1.276"></a><span id="l1.276" class="difflineplus">+$(MOZ_APP_NAME):: $(MOZILLA_DIR)/build/unix/mozilla.in $(GLOBAL_DEPS) $(DEPTH)/config/autoconf.mk</span>
<a href="#l1.277"></a><span id="l1.277" class="difflineplus">+	cat $&lt; | sed -e &quot;s|%MOZAPPDIR%|$(installdir)|&quot; \</span>
<a href="#l1.278"></a><span id="l1.278" class="difflineplus">+		-e &quot;s|%MOZ_APP_DISPLAYNAME%|$(MOZ_APP_DISPLAYNAME)|&quot; &gt; $@</span>
<a href="#l1.279"></a><span id="l1.279"> 	chmod +x $@</span>
<a href="#l1.280"></a><span id="l1.280"> </span>
<a href="#l1.281"></a><span id="l1.281" class="difflineminus">-libs:: instantbird</span>
<a href="#l1.282"></a><span id="l1.282" class="difflineplus">+libs:: $(MOZ_APP_NAME)</span>
<a href="#l1.283"></a><span id="l1.283"> 	$(INSTALL) $&lt; $(DIST)/bin</span>
<a href="#l1.284"></a><span id="l1.284"> </span>
<a href="#l1.285"></a><span id="l1.285" class="difflineplus">+install:: $(MOZ_APP_NAME)</span>
<a href="#l1.286"></a><span id="l1.286" class="difflineplus">+	$(SYSINSTALL) $&lt; $(DESTDIR)$(bindir)</span>
<a href="#l1.287"></a><span id="l1.287" class="difflineplus">+</span>
<a href="#l1.288"></a><span id="l1.288"> ifdef LIBXUL_SDK</span>
<a href="#l1.289"></a><span id="l1.289"> libs::</span>
<a href="#l1.290"></a><span id="l1.290"> 	cp $(LIBXUL_DIST)/bin/xulrunner-stub$(BIN_SUFFIX) $(DIST)/bin/$(STUBNAME)</span>
<a href="#l1.291"></a><span id="l1.291"> endif</span>
<a href="#l1.292"></a><span id="l1.292"> </span>
<a href="#l1.293"></a><span id="l1.293" class="difflineminus">-GARBAGE += instantbird</span>
<a href="#l1.294"></a><span id="l1.294" class="difflineplus">+GARBAGE +=  $(MOZ_APP_NAME)</span>
<a href="#l1.295"></a><span id="l1.295"> GARBAGE += $(addprefix $(DIST)/bin/defaults/pref/, all.js all-instantbird.js channel-prefs.js)</span>
<a href="#l1.296"></a><span id="l1.296"> endif</span>
<a href="#l1.297"></a><span id="l1.297"> </span>
<a href="#l1.298"></a><span id="l1.298"> ifneq (,$(filter gtk gtk2,$(MOZ_WIDGET_TOOLKIT)))</span>
<a href="#l1.299"></a><span id="l1.299"> ICON_FILES	= \</span>
<a href="#l1.300"></a><span id="l1.300"> 		$(DIST)/branding/default16.png \</span>
<a href="#l1.301"></a><span id="l1.301"> 		$(DIST)/branding/mozicon128.png \</span>
<a href="#l1.302"></a><span id="l1.302"> 		$(DIST)/branding/mozicon50.xpm \</span>
<a href="#l1.303"></a><span id="l1.303" class="difflineat">@@ -369,36 +415,39 @@ module.ver: module.ver.in $(DEPTH)/confi</span>
<a href="#l1.304"></a><span id="l1.304"> 	sed 's/@''MODULE_PRODUCTVERSION@/'`echo $(INSTANTBIRD_VERSION) | sed 's/[a-z].*//; s/\./,/g; s/^\([0-9]*,[0-9]*\)$$/\1,0/; s/^\([0-9]*,[0-9]*,[0-9]*\)$$/\1,0/'`'/;s/@''MODULE_PRODUCTVERSION_STRING@/$(INSTANTBIRD_VERSION)/' $&lt; &gt; $@</span>
<a href="#l1.305"></a><span id="l1.305"> </span>
<a href="#l1.306"></a><span id="l1.306"> _RC_STRING += -SRCDIR .</span>
<a href="#l1.307"></a><span id="l1.307"> module.rc: module.ver</span>
<a href="#l1.308"></a><span id="l1.308"> </span>
<a href="#l1.309"></a><span id="l1.309"> GARBAGE += module.ver</span>
<a href="#l1.310"></a><span id="l1.310"> </span>
<a href="#l1.311"></a><span id="l1.311"> libs:: $(srcdir)/profile/prefs.js</span>
<a href="#l1.312"></a><span id="l1.312" class="difflineminus">-	$(INSTALL) $^ $(DIST)/bin/defaults/profile</span>
<a href="#l1.313"></a><span id="l1.313" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $^ $(DIST)/bin/defaults/profile</span>
<a href="#l1.314"></a><span id="l1.314"> </span>
<a href="#l1.315"></a><span id="l1.315" class="difflineminus">-ifneq (,$(filter mac cocoa,$(MOZ_WIDGET_TOOLKIT)))</span>
<a href="#l1.316"></a><span id="l1.316" class="difflineplus">+ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))</span>
<a href="#l1.317"></a><span id="l1.317"> </span>
<a href="#l1.318"></a><span id="l1.318"> AB := $(firstword $(subst -, ,$(AB_CD)))</span>
<a href="#l1.319"></a><span id="l1.319"> </span>
<a href="#l1.320"></a><span id="l1.320" class="difflineplus">+APP_NAME = $(MOZ_APP_DISPLAYNAME)</span>
<a href="#l1.321"></a><span id="l1.321" class="difflineplus">+</span>
<a href="#l1.322"></a><span id="l1.322"> ifdef MOZ_DEBUG</span>
<a href="#l1.323"></a><span id="l1.323" class="difflineminus">-APP_NAME = InstantbirdDebug</span>
<a href="#l1.324"></a><span id="l1.324" class="difflineminus">-else</span>
<a href="#l1.325"></a><span id="l1.325" class="difflineminus">-APP_NAME = Instantbird</span>
<a href="#l1.326"></a><span id="l1.326" class="difflineplus">+APP_NAME := $(APP_NAME)Debug</span>
<a href="#l1.327"></a><span id="l1.327"> endif</span>
<a href="#l1.328"></a><span id="l1.328"> </span>
<a href="#l1.329"></a><span id="l1.329"> libs:: $(PROGRAM)</span>
<a href="#l1.330"></a><span id="l1.330"> 	mkdir -p $(DIST)/$(APP_NAME).app/Contents/MacOS</span>
<a href="#l1.331"></a><span id="l1.331" class="difflineminus">-	rsync -a --exclude &quot;*.in&quot; $(srcdir)/macbuild/Contents $(DIST)/$(APP_NAME).app --exclude English.lproj</span>
<a href="#l1.332"></a><span id="l1.332" class="difflineplus">+	rsync -a --exclude CVS --exclude &quot;*.in&quot; $(srcdir)/macbuild/Contents $(DIST)/$(APP_NAME).app --exclude English.lproj</span>
<a href="#l1.333"></a><span id="l1.333"> 	mkdir -p $(DIST)/$(APP_NAME).app/Contents/Resources/$(AB).lproj</span>
<a href="#l1.334"></a><span id="l1.334" class="difflineminus">-	rsync -a --exclude &quot;*.in&quot; $(srcdir)/macbuild/Contents/Resources/English.lproj/ $(DIST)/$(APP_NAME).app/Contents/Resources/$(AB).lproj</span>
<a href="#l1.335"></a><span id="l1.335" class="difflineminus">-	sed -e &quot;s/%APP_VERSION%/$(APP_VERSION)/&quot; -e &quot;s/%APP_NAME%/$(APP_NAME)/&quot; $(srcdir)/macbuild/Contents/Info.plist.in &gt; $(DIST)/$(APP_NAME).app/Contents/Info.plist</span>
<a href="#l1.336"></a><span id="l1.336" class="difflineminus">-	sed -e &quot;s/%APP_VERSION%/$(APP_VERSION)/&quot; -e &quot;s/%APP_NAME%/$(APP_NAME)/&quot; $(srcdir)/macbuild/Contents/Resources/English.lproj/InfoPlist.strings.in | iconv -f UTF-8 -t UTF-16 &gt; $(DIST)/$(APP_NAME).app/Contents/Resources/$(AB).lproj/InfoPlist.strings</span>
<a href="#l1.337"></a><span id="l1.337" class="difflineplus">+	rsync -a --exclude CVS --exclude &quot;*.in&quot; $(srcdir)/macbuild/Contents/Resources/English.lproj/ $(DIST)/$(APP_NAME).app/Contents/Resources/$(AB).lproj</span>
<a href="#l1.338"></a><span id="l1.338" class="difflineplus">+	sed -e &quot;s/%APP_VERSION%/$(MOZ_APP_VERSION)/&quot; -e &quot;s/%APP_NAME%/$(APP_NAME)/&quot; $(srcdir)/macbuild/Contents/Info.plist.in &gt; $(DIST)/$(APP_NAME).app/Contents/Info.plist</span>
<a href="#l1.339"></a><span id="l1.339" class="difflineplus">+	sed -e &quot;s/%APP_VERSION%/$(MOZ_APP_VERSION)/&quot; -e &quot;s/%APP_NAME%/$(APP_NAME)/&quot; $(srcdir)/macbuild/Contents/Resources/English.lproj/InfoPlist.strings.in | iconv -f UTF-8 -t UTF-16 &gt; $(DIST)/$(APP_NAME).app/Contents/Resources/$(AB).lproj/InfoPlist.strings</span>
<a href="#l1.340"></a><span id="l1.340"> 	rsync -a $(DIST)/bin/ $(DIST)/$(APP_NAME).app/Contents/MacOS</span>
<a href="#l1.341"></a><span id="l1.341"> 	rm -f $(DIST)/$(APP_NAME).app/Contents/MacOS/$(PROGRAM)</span>
<a href="#l1.342"></a><span id="l1.342"> 	rsync -aL $(PROGRAM) $(DIST)/$(APP_NAME).app/Contents/MacOS</span>
<a href="#l1.343"></a><span id="l1.343"> 	cp -RL $(DIST)/branding/instantbird.icns $(DIST)/$(APP_NAME).app/Contents/Resources/instantbird.icns</span>
<a href="#l1.344"></a><span id="l1.344"> 	printf APPLMOZM &gt; $(DIST)/$(APP_NAME).app/Contents/PkgInfo</span>
<a href="#l1.345"></a><span id="l1.345"> </span>
<a href="#l1.346"></a><span id="l1.346"> clean clobber::</span>
<a href="#l1.347"></a><span id="l1.347"> 	rm -rf $(DIST)/$(APP_NAME).app</span>
<a href="#l1.348"></a><span id="l1.348"> endif</span>
<a href="#l1.349"></a><span id="l1.349" class="difflineplus">+</span>
<a href="#l1.350"></a><span id="l1.350" class="difflineplus">+# Note that anything you do to dist/ down here isn't going to make it into the</span>
<a href="#l1.351"></a><span id="l1.351" class="difflineplus">+# Mac build, since it's already been copied over to the .app, above.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1">deleted file mode 100644</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineminus">--- a/im/app/mozilla.in</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineplus">+++ /dev/null</span>
<a href="#l2.4"></a><span id="l2.4" class="difflineat">@@ -1,144 +0,0 @@</span>
<a href="#l2.5"></a><span id="l2.5" class="difflineminus">-#!/bin/sh</span>
<a href="#l2.6"></a><span id="l2.6" class="difflineminus">-#</span>
<a href="#l2.7"></a><span id="l2.7" class="difflineminus">-# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l2.8"></a><span id="l2.8" class="difflineminus">-# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l2.9"></a><span id="l2.9" class="difflineminus">-#</span>
<a href="#l2.10"></a><span id="l2.10" class="difflineminus">-# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l2.11"></a><span id="l2.11" class="difflineminus">-# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-# the License. You may obtain a copy of the License at</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-# http://www.mozilla.org/MPL/</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-#</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineminus">-# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineminus">-# for the specific language governing rights and limitations under the</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineminus">-# License.</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineminus">-#</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineminus">-# The Original Code is mozilla.org Code.</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineminus">-#</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineminus">-# The Initial Developer of the Original Code is</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineminus">-# Netscape Communications Corporation.</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineminus">-# Portions created by the Initial Developer are Copyright (C) 1998</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineminus">-# the Initial Developer. All Rights Reserved.</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineminus">-#</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineminus">-# Contributor(s):</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineminus">-#</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineminus">-# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineminus">-# either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-# the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineminus">-# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineminus">-# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineminus">-# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineminus">-# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineminus">-# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineminus">-# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineminus">-# the provisions above, a recipient may use your version of this file under</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineminus">-# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineminus">-#</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineminus">-# ***** END LICENSE BLOCK *****</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineminus">-</span>
<a href="#l2.43"></a><span id="l2.43" class="difflineminus">-## $Id: mozilla.in,v 1.8 2008/01/07 23:17:04 reed%reedloden.com Exp $</span>
<a href="#l2.44"></a><span id="l2.44" class="difflineminus">-##</span>
<a href="#l2.45"></a><span id="l2.45" class="difflineminus">-## Usage:</span>
<a href="#l2.46"></a><span id="l2.46" class="difflineminus">-##</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineminus">-## $ mozilla [args]</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineminus">-##</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineminus">-## This script is meant to run the mozilla-bin binary from either</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineminus">-## mozilla/xpfe/bootstrap or mozilla/dist/bin.</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineminus">-##</span>
<a href="#l2.52"></a><span id="l2.52" class="difflineminus">-## The script will setup all the environment voodoo needed to make</span>
<a href="#l2.53"></a><span id="l2.53" class="difflineminus">-## the mozilla-bin binary to work.</span>
<a href="#l2.54"></a><span id="l2.54" class="difflineminus">-##</span>
<a href="#l2.55"></a><span id="l2.55" class="difflineminus">-</span>
<a href="#l2.56"></a><span id="l2.56" class="difflineminus">-#uncomment for debugging</span>
<a href="#l2.57"></a><span id="l2.57" class="difflineminus">-#set -x</span>
<a href="#l2.58"></a><span id="l2.58" class="difflineminus">-</span>
<a href="#l2.59"></a><span id="l2.59" class="difflineminus">-moz_libdir=%MOZAPPDIR%</span>
<a href="#l2.60"></a><span id="l2.60" class="difflineminus">-MRE_HOME=%MREDIR%</span>
<a href="#l2.61"></a><span id="l2.61" class="difflineminus">-</span>
<a href="#l2.62"></a><span id="l2.62" class="difflineminus">-# Use run-mozilla.sh in the current dir if it exists</span>
<a href="#l2.63"></a><span id="l2.63" class="difflineminus">-# If not, then start resolving symlinks until we find run-mozilla.sh</span>
<a href="#l2.64"></a><span id="l2.64" class="difflineminus">-found=0</span>
<a href="#l2.65"></a><span id="l2.65" class="difflineminus">-progname=&quot;$0&quot;</span>
<a href="#l2.66"></a><span id="l2.66" class="difflineminus">-curdir=`dirname &quot;$progname&quot;`</span>
<a href="#l2.67"></a><span id="l2.67" class="difflineminus">-progbase=`basename &quot;$progname&quot;`</span>
<a href="#l2.68"></a><span id="l2.68" class="difflineminus">-run_moz=&quot;$curdir/run-mozilla.sh&quot;</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineminus">-if test -x &quot;$run_moz&quot;; then</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineminus">-  dist_bin=&quot;$curdir&quot;</span>
<a href="#l2.71"></a><span id="l2.71" class="difflineminus">-  found=1</span>
<a href="#l2.72"></a><span id="l2.72" class="difflineminus">-else</span>
<a href="#l2.73"></a><span id="l2.73" class="difflineminus">-  here=`/bin/pwd`</span>
<a href="#l2.74"></a><span id="l2.74" class="difflineminus">-  while [ -h &quot;$progname&quot; ]; do</span>
<a href="#l2.75"></a><span id="l2.75" class="difflineminus">-    bn=`basename &quot;$progname&quot;`</span>
<a href="#l2.76"></a><span id="l2.76" class="difflineminus">-    cd `dirname &quot;$progname&quot;`</span>
<a href="#l2.77"></a><span id="l2.77" class="difflineminus">-    progname=`/bin/ls -l &quot;$bn&quot; | sed -e 's/^.* -&gt; //' `</span>
<a href="#l2.78"></a><span id="l2.78" class="difflineminus">-    progbase=`basename &quot;$progname&quot;`</span>
<a href="#l2.79"></a><span id="l2.79" class="difflineminus">-    if [ ! -x &quot;$progname&quot; ]; then</span>
<a href="#l2.80"></a><span id="l2.80" class="difflineminus">-      break</span>
<a href="#l2.81"></a><span id="l2.81" class="difflineminus">-    fi</span>
<a href="#l2.82"></a><span id="l2.82" class="difflineminus">-    curdir=`dirname &quot;$progname&quot;`</span>
<a href="#l2.83"></a><span id="l2.83" class="difflineminus">-    run_moz=&quot;$curdir/run-mozilla.sh&quot;</span>
<a href="#l2.84"></a><span id="l2.84" class="difflineminus">-    if [ -x &quot;$run_moz&quot; ]; then</span>
<a href="#l2.85"></a><span id="l2.85" class="difflineminus">-      cd &quot;$curdir&quot;</span>
<a href="#l2.86"></a><span id="l2.86" class="difflineminus">-      dist_bin=`pwd`</span>
<a href="#l2.87"></a><span id="l2.87" class="difflineminus">-      found=1</span>
<a href="#l2.88"></a><span id="l2.88" class="difflineminus">-      break</span>
<a href="#l2.89"></a><span id="l2.89" class="difflineminus">-    fi</span>
<a href="#l2.90"></a><span id="l2.90" class="difflineminus">-  done</span>
<a href="#l2.91"></a><span id="l2.91" class="difflineminus">-  cd &quot;$here&quot;</span>
<a href="#l2.92"></a><span id="l2.92" class="difflineminus">-fi</span>
<a href="#l2.93"></a><span id="l2.93" class="difflineminus">-if [ $found = 0 ]; then</span>
<a href="#l2.94"></a><span id="l2.94" class="difflineminus">-  # Check default compile-time libdir</span>
<a href="#l2.95"></a><span id="l2.95" class="difflineminus">-  if [ -x &quot;$moz_libdir/run-mozilla.sh&quot; ]; then</span>
<a href="#l2.96"></a><span id="l2.96" class="difflineminus">-    dist_bin=&quot;$moz_libdir&quot;</span>
<a href="#l2.97"></a><span id="l2.97" class="difflineminus">-  else</span>
<a href="#l2.98"></a><span id="l2.98" class="difflineminus">-    echo &quot;Cannot find mozilla runtime directory. Exiting.&quot;</span>
<a href="#l2.99"></a><span id="l2.99" class="difflineminus">-    exit 1</span>
<a href="#l2.100"></a><span id="l2.100" class="difflineminus">-  fi</span>
<a href="#l2.101"></a><span id="l2.101" class="difflineminus">-fi</span>
<a href="#l2.102"></a><span id="l2.102" class="difflineminus">-</span>
<a href="#l2.103"></a><span id="l2.103" class="difflineminus">-script_args=&quot;&quot;</span>
<a href="#l2.104"></a><span id="l2.104" class="difflineminus">-debugging=0</span>
<a href="#l2.105"></a><span id="l2.105" class="difflineminus">-MOZILLA_BIN=&quot;${progbase}-bin&quot;</span>
<a href="#l2.106"></a><span id="l2.106" class="difflineminus">-</span>
<a href="#l2.107"></a><span id="l2.107" class="difflineminus">-if [ &quot;$OSTYPE&quot; = &quot;beos&quot; ]; then</span>
<a href="#l2.108"></a><span id="l2.108" class="difflineminus">-  mimeset -F &quot;$MOZILLA_BIN&quot;</span>
<a href="#l2.109"></a><span id="l2.109" class="difflineminus">-fi</span>
<a href="#l2.110"></a><span id="l2.110" class="difflineminus">-</span>
<a href="#l2.111"></a><span id="l2.111" class="difflineminus">-pass_arg_count=0</span>
<a href="#l2.112"></a><span id="l2.112" class="difflineminus">-while [ $# -gt $pass_arg_count ]</span>
<a href="#l2.113"></a><span id="l2.113" class="difflineminus">-do</span>
<a href="#l2.114"></a><span id="l2.114" class="difflineminus">-  case &quot;$1&quot; in</span>
<a href="#l2.115"></a><span id="l2.115" class="difflineminus">-    -p | --pure | -pure)</span>
<a href="#l2.116"></a><span id="l2.116" class="difflineminus">-      MOZILLA_BIN=&quot;${MOZILLA_BIN}.pure&quot;</span>
<a href="#l2.117"></a><span id="l2.117" class="difflineminus">-      shift</span>
<a href="#l2.118"></a><span id="l2.118" class="difflineminus">-      ;;</span>
<a href="#l2.119"></a><span id="l2.119" class="difflineminus">-    -g | --debug)</span>
<a href="#l2.120"></a><span id="l2.120" class="difflineminus">-      script_args=&quot;$script_args -g&quot;</span>
<a href="#l2.121"></a><span id="l2.121" class="difflineminus">-      debugging=1</span>
<a href="#l2.122"></a><span id="l2.122" class="difflineminus">-      shift</span>
<a href="#l2.123"></a><span id="l2.123" class="difflineminus">-      ;;</span>
<a href="#l2.124"></a><span id="l2.124" class="difflineminus">-    -d | --debugger)</span>
<a href="#l2.125"></a><span id="l2.125" class="difflineminus">-      script_args=&quot;$script_args -d $2&quot;</span>
<a href="#l2.126"></a><span id="l2.126" class="difflineminus">-      shift 2</span>
<a href="#l2.127"></a><span id="l2.127" class="difflineminus">-      ;;</span>
<a href="#l2.128"></a><span id="l2.128" class="difflineminus">-    *)</span>
<a href="#l2.129"></a><span id="l2.129" class="difflineminus">-      # Move the unrecognized argument to the end of the list.</span>
<a href="#l2.130"></a><span id="l2.130" class="difflineminus">-      arg=&quot;$1&quot;</span>
<a href="#l2.131"></a><span id="l2.131" class="difflineminus">-      shift</span>
<a href="#l2.132"></a><span id="l2.132" class="difflineminus">-      set -- &quot;$@&quot; &quot;$arg&quot;</span>
<a href="#l2.133"></a><span id="l2.133" class="difflineminus">-      pass_arg_count=`expr $pass_arg_count + 1`</span>
<a href="#l2.134"></a><span id="l2.134" class="difflineminus">-      ;;</span>
<a href="#l2.135"></a><span id="l2.135" class="difflineminus">-  esac</span>
<a href="#l2.136"></a><span id="l2.136" class="difflineminus">-done</span>
<a href="#l2.137"></a><span id="l2.137" class="difflineminus">-</span>
<a href="#l2.138"></a><span id="l2.138" class="difflineminus">-export MRE_HOME</span>
<a href="#l2.139"></a><span id="l2.139" class="difflineminus">-</span>
<a href="#l2.140"></a><span id="l2.140" class="difflineminus">-if [ $debugging = 1 ]</span>
<a href="#l2.141"></a><span id="l2.141" class="difflineminus">-then</span>
<a href="#l2.142"></a><span id="l2.142" class="difflineminus">-  echo $dist_bin/run-mozilla.sh $script_args $dist_bin/$MOZILLA_BIN &quot;$@&quot;</span>
<a href="#l2.143"></a><span id="l2.143" class="difflineminus">-fi</span>
<a href="#l2.144"></a><span id="l2.144" class="difflineminus">-&quot;$dist_bin/run-mozilla.sh&quot; $script_args &quot;$dist_bin/$MOZILLA_BIN&quot; &quot;$@&quot;</span>
<a href="#l2.145"></a><span id="l2.145" class="difflineminus">-exitcode=$?</span>
<a href="#l2.146"></a><span id="l2.146" class="difflineminus">-</span>
<a href="#l2.147"></a><span id="l2.147" class="difflineminus">-exit $exitcode</span>
<a href="#l2.148"></a><span id="l2.148" class="difflineminus">-# EOF.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/im/app/splash.rc</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/im/app/splash.rc</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -48,19 +48,19 @@ 1 24 &quot;instantbird.exe.manifest&quot;</span>
<a href="#l3.4"></a><span id="l3.4"> </span>
<a href="#l3.5"></a><span id="l3.5"> // Program icon.</span>
<a href="#l3.6"></a><span id="l3.6"> IDI_APPICON  ICON  INSTANTBIRD_ICO</span>
<a href="#l3.7"></a><span id="l3.7"> IDI_APPLICATION ICON INSTANTBIRD_ICO</span>
<a href="#l3.8"></a><span id="l3.8"> </span>
<a href="#l3.9"></a><span id="l3.9"> STRINGTABLE DISCARDABLE</span>
<a href="#l3.10"></a><span id="l3.10"> BEGIN</span>
<a href="#l3.11"></a><span id="l3.11"> #ifdef DEBUG</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-    IDS_STARTMENU_APPNAME,              &quot;Instantbird Debug&quot;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+    IDS_STARTMENU_APPNAME,              &quot;@MOZ_APP_DISPLAYNAME@ Debug&quot;</span>
<a href="#l3.14"></a><span id="l3.14"> #else</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineminus">-    IDS_STARTMENU_APPNAME,              &quot;Instantbird&quot;</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+    IDS_STARTMENU_APPNAME,              &quot;@MOZ_APP_DISPLAYNAME@&quot;</span>
<a href="#l3.17"></a><span id="l3.17"> #endif</span>
<a href="#l3.18"></a><span id="l3.18"> END</span>
<a href="#l3.19"></a><span id="l3.19"> </span>
<a href="#l3.20"></a><span id="l3.20"> #ifdef MOZ_STATIC_BUILD</span>
<a href="#l3.21"></a><span id="l3.21"> </span>
<a href="#l3.22"></a><span id="l3.22"> // XXX This code is copied from resource.h and widget.rc.  It's a work-around</span>
<a href="#l3.23"></a><span id="l3.23"> // for the limitation that only one resource file can be used in an .exe.  We</span>
<a href="#l3.24"></a><span id="l3.24"> // should develop a method, for static builds only, to combine multiple .rc</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineat">@@ -74,20 +74,20 @@ END</span>
<a href="#l3.26"></a><span id="l3.26"> #define IDC_ALIAS                       4105</span>
<a href="#l3.27"></a><span id="l3.27"> #define IDC_ZOOMIN                      4106</span>
<a href="#l3.28"></a><span id="l3.28"> #define IDC_ZOOMOUT                     4107</span>
<a href="#l3.29"></a><span id="l3.29"> #define IDC_COLRESIZE                   4108</span>
<a href="#l3.30"></a><span id="l3.30"> #define IDC_ROWRESIZE                   4109</span>
<a href="#l3.31"></a><span id="l3.31"> #define IDC_VERTICALTEXT                4110</span>
<a href="#l3.32"></a><span id="l3.32"> #define IDC_NONE                        4112</span>
<a href="#l3.33"></a><span id="l3.33"> </span>
<a href="#l3.34"></a><span id="l3.34" class="difflineminus">-IDC_GRAB                CURSOR  DISCARDABLE     &quot;../../widget/src/build/res/grab.cur&quot;</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineminus">-IDC_GRABBING            CURSOR  DISCARDABLE     &quot;../../widget/src/build/res/grabbing.cur&quot;</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineminus">-IDC_CELL                CURSOR  DISCARDABLE     &quot;../../widget/src/build/res/cell.cur&quot;</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineminus">-IDC_COPY                CURSOR  DISCARDABLE     &quot;../../widget/src/build/res/copy.cur&quot;</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineminus">-IDC_ALIAS               CURSOR  DISCARDABLE     &quot;../../widget/src/build/res/aliasb.cur&quot;</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineminus">-IDC_ZOOMIN              CURSOR  DISCARDABLE     &quot;../../widget/src/build/res/zoom_in.cur&quot;</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineminus">-IDC_ZOOMOUT             CURSOR  DISCARDABLE     &quot;../../widget/src/build/res/zoom_out.cur&quot;</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineminus">-IDC_COLRESIZE           CURSOR  DISCARDABLE     &quot;../../widget/src/build/res/col_resize.cur&quot;</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineminus">-IDC_ROWRESIZE           CURSOR  DISCARDABLE     &quot;../../widget/src/build/res/row_resize.cur&quot;</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineminus">-IDC_VERTICALTEXT        CURSOR  DISCARDABLE     &quot;../../widget/src/build/res/vertical_text.cur&quot;</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineminus">-IDC_NONE                CURSOR  DISCARDABLE     &quot;../../widget/src/build/res/none.cur&quot;</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineplus">+IDC_GRAB                CURSOR  DISCARDABLE     &quot;../../mozilla/widget/src/build/res/grab.cur&quot;</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineplus">+IDC_GRABBING            CURSOR  DISCARDABLE     &quot;../../mozilla/widget/src/build/res/grabbing.cur&quot;</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineplus">+IDC_CELL                CURSOR  DISCARDABLE     &quot;../../mozilla/widget/src/build/res/cell.cur&quot;</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineplus">+IDC_COPY                CURSOR  DISCARDABLE     &quot;../../mozilla/widget/src/build/res/copy.cur&quot;</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineplus">+IDC_ALIAS               CURSOR  DISCARDABLE     &quot;../../mozilla/widget/src/build/res/aliasb.cur&quot;</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineplus">+IDC_ZOOMIN              CURSOR  DISCARDABLE     &quot;../../mozilla/widget/src/build/res/zoom_in.cur&quot;</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineplus">+IDC_ZOOMOUT             CURSOR  DISCARDABLE     &quot;../../mozilla/widget/src/build/res/zoom_out.cur&quot;</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineplus">+IDC_COLRESIZE           CURSOR  DISCARDABLE     &quot;../../mozilla/widget/src/build/res/col_resize.cur&quot;</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineplus">+IDC_ROWRESIZE           CURSOR  DISCARDABLE     &quot;../../mozilla/widget/src/build/res/row_resize.cur&quot;</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineplus">+IDC_VERTICALTEXT        CURSOR  DISCARDABLE     &quot;../../mozilla/widget/src/build/res/vertical_text.cur&quot;</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineplus">+IDC_NONE                CURSOR  DISCARDABLE     &quot;../../mozilla/widget/src/build/res/none.cur&quot;</span>
<a href="#l3.56"></a><span id="l3.56"> #endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/im/components/Makefile.in</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/im/components/Makefile.in</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -41,18 +41,18 @@ VPATH		= @srcdir@</span>
<a href="#l4.4"></a><span id="l4.4"> </span>
<a href="#l4.5"></a><span id="l4.5"> include $(DEPTH)/config/autoconf.mk</span>
<a href="#l4.6"></a><span id="l4.6"> </span>
<a href="#l4.7"></a><span id="l4.7"> MODULE		= instantbird</span>
<a href="#l4.8"></a><span id="l4.8"> </span>
<a href="#l4.9"></a><span id="l4.9"> XPIDLSRCS	= ibILogger.idl</span>
<a href="#l4.10"></a><span id="l4.10"> </span>
<a href="#l4.11"></a><span id="l4.11"> EXTRA_COMPONENTS = \</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-	smileProtocolHandler.js \</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-	autoLoginHandler.js \</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-	logger.js \</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+	smileProtocolHandler.js smileProtocolHandler.manifest \</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+	autoLoginHandler.js autoLoginHandler.manifest \</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+	logger.js logger.manifest \</span>
<a href="#l4.18"></a><span id="l4.18"> 	$(NULL)</span>
<a href="#l4.19"></a><span id="l4.19"> </span>
<a href="#l4.20"></a><span id="l4.20"> ifeq (,$(filter mac cocoa,$(MOZ_WIDGET_TOOLKIT)))</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineminus">-EXTRA_COMPONENTS += profileMigrator.js</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineplus">+EXTRA_COMPONENTS += profileMigrator.js profileMigrator.manifest</span>
<a href="#l4.23"></a><span id="l4.23"> endif</span>
<a href="#l4.24"></a><span id="l4.24"> </span>
<a href="#l4.25"></a><span id="l4.25"> include $(topsrcdir)/config/rules.mk</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/im/components/autoLoginHandler.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/im/components/autoLoginHandler.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -63,15 +63,12 @@ autoLoginHandler.prototype = {</span>
<a href="#l5.4"></a><span id="l5.4"> </span>
<a href="#l5.5"></a><span id="l5.5">   // 3 tabs here because there is a misalignment with only 2</span>
<a href="#l5.6"></a><span id="l5.6">   helpInfo: &quot;  -n                 Disables auto-login.\n&quot; +</span>
<a href="#l5.7"></a><span id="l5.7">             &quot;  -preferences       Open only the preferences window.&quot;,</span>
<a href="#l5.8"></a><span id="l5.8"> </span>
<a href="#l5.9"></a><span id="l5.9">   classDescription: &quot;AutoLogin Handler&quot;,</span>
<a href="#l5.10"></a><span id="l5.10">   classID: Components.ID(&quot;{9e5d5160-d61d-4d57-ae0d-81bee4380269}&quot;),</span>
<a href="#l5.11"></a><span id="l5.11">   contractID: &quot;@instantbird.org/autologin-handler;1&quot;,</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Ci.nsICommandLineHandler]),</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-  _xpcom_categories: [{category: &quot;command-line-handler&quot;, entry: &quot;b-n&quot;}]</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+  QueryInterface: XPCOMUtils.generateQI([Ci.nsICommandLineHandler])</span>
<a href="#l5.15"></a><span id="l5.15"> };</span>
<a href="#l5.16"></a><span id="l5.16"> </span>
<a href="#l5.17"></a><span id="l5.17" class="difflineminus">-function NSGetModule(aCompMgr, aFileSpec) {</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineminus">-  return XPCOMUtils.generateModule([autoLoginHandler]);</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineminus">-}</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineplus">+const NSGetFactory = XPCOMUtils.generateNSGetFactory([autoLoginHandler]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1">new file mode 100644</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineminus">--- /dev/null</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineplus">+++ b/im/components/autoLoginHandler.manifest</span>
<a href="#l6.4"></a><span id="l6.4" class="difflineat">@@ -0,0 +1,3 @@</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineplus">+component {9e5d5160-d61d-4d57-ae0d-81bee4380269} autoLoginHandler.js</span>
<a href="#l6.6"></a><span id="l6.6" class="difflineplus">+contract @instantbird.org/autologin-handler;1 {9e5d5160-d61d-4d57-ae0d-81bee4380269}</span>
<a href="#l6.7"></a><span id="l6.7" class="difflineplus">+category command-line-handler b-n @instantbird.org/autologin-handler;1</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/im/components/logger.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/im/components/logger.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -341,17 +341,17 @@ Logger.prototype = {</span>
<a href="#l7.4"></a><span id="l7.4">     this._enumerateLogs(aBuddy.account, aBuddy.normalizedName),</span>
<a href="#l7.5"></a><span id="l7.5">   getLogsForConversation: function logger_getLogsForConversation(aConversation)</span>
<a href="#l7.6"></a><span id="l7.6">     this._enumerateLogs(aConversation.account, aConversation.normalizedName),</span>
<a href="#l7.7"></a><span id="l7.7">   getSystemLogsForAccount: function logger_getSystemLogsForAccount(aAccount)</span>
<a href="#l7.8"></a><span id="l7.8">     this._enumerateLogs(aAccount, &quot;.system&quot;),</span>
<a href="#l7.9"></a><span id="l7.9"> </span>
<a href="#l7.10"></a><span id="l7.10">   observe: function logger_observe(aSubject, aTopic, aData) {</span>
<a href="#l7.11"></a><span id="l7.11">     switch (aTopic) {</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-    case &quot;app-startup&quot;:</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+    case &quot;profile-after-change&quot;:</span>
<a href="#l7.14"></a><span id="l7.14">       obs.addObserver(this, &quot;final-ui-startup&quot;, false);</span>
<a href="#l7.15"></a><span id="l7.15">       break;</span>
<a href="#l7.16"></a><span id="l7.16">     case &quot;final-ui-startup&quot;:</span>
<a href="#l7.17"></a><span id="l7.17">       obs.removeObserver(this, &quot;final-ui-startup&quot;);</span>
<a href="#l7.18"></a><span id="l7.18">       [&quot;new-conversation&quot;, &quot;new-text&quot;,</span>
<a href="#l7.19"></a><span id="l7.19">        &quot;conversation-closed&quot;, &quot;conversation-left-chat&quot;,</span>
<a href="#l7.20"></a><span id="l7.20">        &quot;account-connected&quot;, &quot;account-disconnected&quot;,</span>
<a href="#l7.21"></a><span id="l7.21">        &quot;buddy-signed-on&quot;, &quot;buddy-signed-off&quot;,</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineat">@@ -402,15 +402,12 @@ Logger.prototype = {</span>
<a href="#l7.23"></a><span id="l7.23">       let nameText = (aSubject.buddyAlias || name) + &quot; (&quot; + name + &quot;)&quot;;</span>
<a href="#l7.24"></a><span id="l7.24">       getLogForAccount(aSubject.account).logEvent(nameText + &quot; is now &quot; + status);</span>
<a href="#l7.25"></a><span id="l7.25">     }</span>
<a href="#l7.26"></a><span id="l7.26">   },</span>
<a href="#l7.27"></a><span id="l7.27"> </span>
<a href="#l7.28"></a><span id="l7.28">   QueryInterface: XPCOMUtils.generateQI([Ci.nsIObserver, Ci.ibILogger]),</span>
<a href="#l7.29"></a><span id="l7.29">   classDescription: &quot;Logger&quot;,</span>
<a href="#l7.30"></a><span id="l7.30">   classID: Components.ID(&quot;{fb0dc220-2c7a-4216-9f19-6b8f3480eae9}&quot;),</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-  contractID: &quot;@instantbird.org/logger;1&quot;,</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineminus">-</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineminus">-  // get this contractID registered for certain categories via XPCOMUtils</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineminus">-  _xpcom_categories: [{ category: &quot;app-startup&quot;, service: true}]</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineplus">+  contractID: &quot;@instantbird.org/logger;1&quot;</span>
<a href="#l7.36"></a><span id="l7.36"> };</span>
<a href="#l7.37"></a><span id="l7.37"> </span>
<a href="#l7.38"></a><span id="l7.38" class="difflineminus">-function NSGetModule(aCompMgr, aFileSpec) XPCOMUtils.generateModule([Logger]);</span>
<a href="#l7.39"></a><span id="l7.39" class="difflineplus">+const NSGetFactory = XPCOMUtils.generateNSGetFactory([Logger]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">new file mode 100644</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineminus">--- /dev/null</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineplus">+++ b/im/components/logger.manifest</span>
<a href="#l8.4"></a><span id="l8.4" class="difflineat">@@ -0,0 +1,3 @@</span>
<a href="#l8.5"></a><span id="l8.5" class="difflineplus">+component {fb0dc220-2c7a-4216-9f19-6b8f3480eae9} logger.js</span>
<a href="#l8.6"></a><span id="l8.6" class="difflineplus">+contract @instantbird.org/logger;1 {fb0dc220-2c7a-4216-9f19-6b8f3480eae9}</span>
<a href="#l8.7"></a><span id="l8.7" class="difflineplus">+category profile-after-change Logger @instantbird.org/logger;1</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/im/components/profileMigrator.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/im/components/profileMigrator.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -86,14 +86,13 @@ InstantbirdProfileMigrator.prototype = {</span>
<a href="#l9.4"></a><span id="l9.4">       } catch(e) {}</span>
<a href="#l9.5"></a><span id="l9.5">     }</span>
<a href="#l9.6"></a><span id="l9.6">   },</span>
<a href="#l9.7"></a><span id="l9.7">   migrate: function(aStartup) { },</span>
<a href="#l9.8"></a><span id="l9.8"> </span>
<a href="#l9.9"></a><span id="l9.9">   classDescription: &quot;Instantbird Profile Migrator&quot;,</span>
<a href="#l9.10"></a><span id="l9.10">   classID: Components.ID(&quot;028ab7f2-5c83-4643-b846-09119c702faa&quot;),</span>
<a href="#l9.11"></a><span id="l9.11">   contractID: &quot;@mozilla.org/toolkit/profile-migrator;1&quot;,</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Ci.nsIProfileMigrator]),</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineminus">-}</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineplus">+  QueryInterface: XPCOMUtils.generateQI([Ci.nsIProfileMigrator])</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineplus">+};</span>
<a href="#l9.16"></a><span id="l9.16"> </span>
<a href="#l9.17"></a><span id="l9.17" class="difflineminus">-function NSGetModule(aCompMgr, aFileSpec) {</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineminus">-  return XPCOMUtils.generateModule([InstantbirdProfileMigrator]);</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineminus">-}</span>
<a href="#l9.20"></a><span id="l9.20" class="difflineplus">+const NSGetFactory =</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineplus">+  XPCOMUtils.generateNSGetFactory([InstantbirdProfileMigrator]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1">new file mode 100644</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineminus">--- /dev/null</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineplus">+++ b/im/components/profileMigrator.manifest</span>
<a href="#l10.4"></a><span id="l10.4" class="difflineat">@@ -0,0 +1,2 @@</span>
<a href="#l10.5"></a><span id="l10.5" class="difflineplus">+component {028ab7f2-5c83-4643-b846-09119c702faa} profileMigrator.js</span>
<a href="#l10.6"></a><span id="l10.6" class="difflineplus">+contract @mozilla.org/toolkit/profile-migrator;1 {028ab7f2-5c83-4643-b846-09119c702faa}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/im/components/smileProtocolHandler.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/im/components/smileProtocolHandler.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -68,11 +68,9 @@ smileProtocolHandler.prototype = {</span>
<a href="#l11.4"></a><span id="l11.4">   allowPort: function  SPH_allowPort(aPort, aScheme) false,</span>
<a href="#l11.5"></a><span id="l11.5"> </span>
<a href="#l11.6"></a><span id="l11.6">   classDescription: &quot;Smile Protocol Handler&quot;,</span>
<a href="#l11.7"></a><span id="l11.7">   classID: Components.ID(&quot;{04e58eae-dfbc-4c9e-8130-6d9ef19cbff4}&quot;),</span>
<a href="#l11.8"></a><span id="l11.8">   contractID: &quot;@mozilla.org/network/protocol;1?name=smile&quot;,</span>
<a href="#l11.9"></a><span id="l11.9">   QueryInterface: XPCOMUtils.generateQI([Ci.nsIProtocolHandler])</span>
<a href="#l11.10"></a><span id="l11.10"> };</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-function NSGetModule(aCompMgr, aFileSpec) {</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineminus">-  return XPCOMUtils.generateModule([smileProtocolHandler]);</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineminus">-}</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineplus">+const NSGetFactory = XPCOMUtils.generateNSGetFactory([smileProtocolHandler]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">new file mode 100644</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineminus">--- /dev/null</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineplus">+++ b/im/components/smileProtocolHandler.manifest</span>
<a href="#l12.4"></a><span id="l12.4" class="difflineat">@@ -0,0 +1,2 @@</span>
<a href="#l12.5"></a><span id="l12.5" class="difflineplus">+component {04e58eae-dfbc-4c9e-8130-6d9ef19cbff4} smileProtocolHandler.js</span>
<a href="#l12.6"></a><span id="l12.6" class="difflineplus">+contract @mozilla.org/network/protocol;1?name=smile {04e58eae-dfbc-4c9e-8130-6d9ef19cbff4}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/im/confvars.sh</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/im/confvars.sh</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -33,17 +33,19 @@</span>
<a href="#l13.4"></a><span id="l13.4"> # decision by deleting the provisions above and replace them with the notice</span>
<a href="#l13.5"></a><span id="l13.5"> # and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l13.6"></a><span id="l13.6"> # the provisions above, a recipient may use your version of this file under</span>
<a href="#l13.7"></a><span id="l13.7"> # the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l13.8"></a><span id="l13.8"> #</span>
<a href="#l13.9"></a><span id="l13.9"> # ***** END LICENSE BLOCK *****</span>
<a href="#l13.10"></a><span id="l13.10"> </span>
<a href="#l13.11"></a><span id="l13.11"> MOZ_APP_NAME=instantbird</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-MOZ_APP_VERSION=`cat $topsrcdir/$MOZ_BUILD_APP/config/version.txt`</span>
<a href="#l13.13"></a><span id="l13.13"> MOZ_XUL_APP=1</span>
<a href="#l13.14"></a><span id="l13.14"> MOZ_ENABLE_LIBXUL=1</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineminus">-MOZ_XULRUNNER=1</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineminus">-MOZ_NO_XPCOM_OBSOLETE=1</span>
<a href="#l13.17"></a><span id="l13.17"> MOZ_UPDATER=1</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineminus">-MOZ_PLACES=</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineminus">-MOZ_MORK=</span>
<a href="#l13.20"></a><span id="l13.20"> MOZ_MATHML=</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineplus">+</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineplus">+MOZ_APP_VERSION_TXT=${_topsrcdir}/$MOZ_BUILD_APP/config/version.txt</span>
<a href="#l13.23"></a><span id="l13.23" class="difflineplus">+MOZ_APP_VERSION=`cat $MOZ_APP_VERSION_TXT`</span>
<a href="#l13.24"></a><span id="l13.24" class="difflineplus">+INSTANTBIRD_VERSION=$MOZ_APP_VERSION</span>
<a href="#l13.25"></a><span id="l13.25" class="difflineplus">+</span>
<a href="#l13.26"></a><span id="l13.26" class="difflineplus">+MOZ_BRANDING_DIRECTORY=instantbird/branding/nightly</span>
<a href="#l13.27"></a><span id="l13.27" class="difflineplus">+MOZ_OFFICIAL_BRANDING_DIRECTORY=instantbird/branding/release</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/im/content/convZoom.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/im/content/convZoom.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -37,17 +37,17 @@</span>
<a href="#l14.4"></a><span id="l14.4">  *</span>
<a href="#l14.5"></a><span id="l14.5">  * ***** END LICENSE BLOCK *****/</span>
<a href="#l14.6"></a><span id="l14.6"> </span>
<a href="#l14.7"></a><span id="l14.7"> // This code was mostly copied from mozilla:</span>
<a href="#l14.8"></a><span id="l14.8"> // mozilla-central/source/browser/base/content/browser-textZoom.js</span>
<a href="#l14.9"></a><span id="l14.9"> var FullZoom = {</span>
<a href="#l14.10"></a><span id="l14.10">   prefName: &quot;conversation.zoomLevel&quot;,</span>
<a href="#l14.11"></a><span id="l14.11"> </span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-  get _prefBranch FullZoom_get_prefBranch() {</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+  get _prefBranch() {</span>
<a href="#l14.14"></a><span id="l14.14">     delete this._prefBranch;</span>
<a href="#l14.15"></a><span id="l14.15">     return this._prefBranch = Cc[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l14.16"></a><span id="l14.16">                               .getService(Ci.nsIPrefBranch2);</span>
<a href="#l14.17"></a><span id="l14.17">   },</span>
<a href="#l14.18"></a><span id="l14.18"> </span>
<a href="#l14.19"></a><span id="l14.19">   init: function FullZoom_init() {</span>
<a href="#l14.20"></a><span id="l14.20">     window.addEventListener(&quot;DOMMouseScroll&quot;, FullZoom.handleMouseScrolled, false);</span>
<a href="#l14.21"></a><span id="l14.21">     window.addEventListener(&quot;unload&quot;, FullZoom.destroy, false);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/im/content/convbrowser.xml</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/im/content/convbrowser.xml</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -189,24 +189,16 @@</span>
<a href="#l15.4"></a><span id="l15.4">          ]]&gt;</span>
<a href="#l15.5"></a><span id="l15.5">         &lt;/body&gt;</span>
<a href="#l15.6"></a><span id="l15.6">       &lt;/method&gt;</span>
<a href="#l15.7"></a><span id="l15.7"> </span>
<a href="#l15.8"></a><span id="l15.8">       &lt;field name=&quot;mDestroyed&quot;&gt;false&lt;/field&gt;</span>
<a href="#l15.9"></a><span id="l15.9"> </span>
<a href="#l15.10"></a><span id="l15.10">       &lt;constructor&gt;</span>
<a href="#l15.11"></a><span id="l15.11">         &lt;![CDATA[</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-          try {</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineminus">-            this.mDragDropHandler = Components.classes[&quot;@mozilla.org:/content/content-area-dragdrop;1&quot;]</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineminus">-                                              .createInstance(Components.interfaces.nsIDragDropHandler);</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineminus">-            this.mDragDropHandler.hookupTo(this, null);</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineminus">-          }</span>
<a href="#l15.17"></a><span id="l15.17" class="difflineminus">-          catch (e) {</span>
<a href="#l15.18"></a><span id="l15.18" class="difflineminus">-          }</span>
<a href="#l15.19"></a><span id="l15.19" class="difflineminus">-</span>
<a href="#l15.20"></a><span id="l15.20">           this.addEventListener(&quot;scroll&quot;, this.browserScroll, false);</span>
<a href="#l15.21"></a><span id="l15.21">           this.addEventListener(&quot;resize&quot;, this.browserResize, false);</span>
<a href="#l15.22"></a><span id="l15.22">           this.mPrefs.addObserver(this.magicCopyPref, this, false);</span>
<a href="#l15.23"></a><span id="l15.23"> </span>
<a href="#l15.24"></a><span id="l15.24">           if (!(&quot;cleanupImMarkup&quot; in window))</span>
<a href="#l15.25"></a><span id="l15.25">             Components.utils.import(&quot;resource://app/modules/imContentSink.jsm&quot;);</span>
<a href="#l15.26"></a><span id="l15.26">           if (!(&quot;smileImMarkup&quot; in window))</span>
<a href="#l15.27"></a><span id="l15.27">             Components.utils.import(&quot;resource://app/modules/imSmileys.jsm&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/im/content/jar.mn</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/im/content/jar.mn</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l16.4"></a><span id="l16.4"> instantbird.jar:</span>
<a href="#l16.5"></a><span id="l16.5" class="difflineminus">-% content instantbird %instantbird/ xpcnativewrappers=yes</span>
<a href="#l16.6"></a><span id="l16.6" class="difflineplus">+% content instantbird %instantbird/</span>
<a href="#l16.7"></a><span id="l16.7"> 	instantbird/aboutDialog.css</span>
<a href="#l16.8"></a><span id="l16.8"> *	instantbird/aboutDialog.xul</span>
<a href="#l16.9"></a><span id="l16.9"> 	instantbird/account.js</span>
<a href="#l16.10"></a><span id="l16.10"> 	instantbird/accounts.css</span>
<a href="#l16.11"></a><span id="l16.11"> 	instantbird/accounts.js</span>
<a href="#l16.12"></a><span id="l16.12"> *	instantbird/accounts.xul</span>
<a href="#l16.13"></a><span id="l16.13"> 	instantbird/accountWizard.js</span>
<a href="#l16.14"></a><span id="l16.14"> 	instantbird/accountWizard.xul</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineat">@@ -72,20 +72,20 @@ instantbird.jar:</span>
<a href="#l16.16"></a><span id="l16.16"> 	instantbird/preferences/tabs.js                 (preferences/tabs.js)</span>
<a href="#l16.17"></a><span id="l16.17"> 	instantbird/preferences/messagestyle.js	        (preferences/messagestyle.js)</span>
<a href="#l16.18"></a><span id="l16.18"> 	instantbird/preferences/smileys.js		(preferences/smileys.js)</span>
<a href="#l16.19"></a><span id="l16.19"> 	instantbird/preferences/smiley.css		(preferences/smiley.css)</span>
<a href="#l16.20"></a><span id="l16.20"> 	instantbird/preferences/smiley.xml		(preferences/smiley.xml)</span>
<a href="#l16.21"></a><span id="l16.21"> </span>
<a href="#l16.22"></a><span id="l16.22"> #ifdef DEBUG</span>
<a href="#l16.23"></a><span id="l16.23"> debug.jar:</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineminus">-% content debug %debug/ xpcnativewrappers=yes</span>
<a href="#l16.25"></a><span id="l16.25" class="difflineplus">+% content debug %debug/</span>
<a href="#l16.26"></a><span id="l16.26"> % overlay chrome://instantbird/content/blist.xul chrome://debug/content/debug.xul</span>
<a href="#l16.27"></a><span id="l16.27"> % overlay chrome://instantbird/content/instantbird.xul chrome://debug/content/viewselectionsource.xul</span>
<a href="#l16.28"></a><span id="l16.28"> 	debug/debug.js	(debug/debug.js)</span>
<a href="#l16.29"></a><span id="l16.29"> 	debug/debug.xul	(debug/debug.xul)</span>
<a href="#l16.30"></a><span id="l16.30"> 	debug/viewselectionsource.xul (debug/viewselectionsource.xul)</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineminus">-% content fake %fake/ xpcnativewrappers=yes</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineplus">+% content fake %fake/</span>
<a href="#l16.33"></a><span id="l16.33"> % overlay chrome://instantbird/content/blist.xul chrome://fake/content/fake.xul</span>
<a href="#l16.34"></a><span id="l16.34"> 	fake/fake.js (debug/fake/fake.js)</span>
<a href="#l16.35"></a><span id="l16.35"> 	fake/fake.xul (debug/fake/fake.xul)</span>
<a href="#l16.36"></a><span id="l16.36"> #endif</span>
<a href="#l16.37"></a><span id="l16.37"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/im/content/preferences/themes.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/im/content/preferences/themes.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -30,25 +30,30 @@</span>
<a href="#l17.4"></a><span id="l17.4">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l17.5"></a><span id="l17.5">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l17.6"></a><span id="l17.6">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l17.7"></a><span id="l17.7">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l17.8"></a><span id="l17.8">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l17.9"></a><span id="l17.9">  *</span>
<a href="#l17.10"></a><span id="l17.10">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l17.11"></a><span id="l17.11"> </span>
<a href="#l17.12"></a><span id="l17.12" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/AddonManager.jsm&quot;);  </span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+</span>
<a href="#l17.14"></a><span id="l17.14"> const PREF_EXTENSIONS_GETMOREMESSAGESTYLESURL = &quot;extensions.getMoreMessageStylesURL&quot;;</span>
<a href="#l17.15"></a><span id="l17.15"> const PREF_EXTENSIONS_GETMOREEMOTICONSURL     = &quot;extensions.getMoreEmoticonsURL&quot;;</span>
<a href="#l17.16"></a><span id="l17.16"> </span>
<a href="#l17.17"></a><span id="l17.17"> var gThemePane = {</span>
<a href="#l17.18"></a><span id="l17.18">   init: function (){</span>
<a href="#l17.19"></a><span id="l17.19" class="difflineplus">+    AddonManager.getAllAddons(function(aAddons) {</span>
<a href="#l17.20"></a><span id="l17.20" class="difflineplus">+      gThemePane.extensionList = aAddons;</span>
<a href="#l17.21"></a><span id="l17.21" class="difflineplus">+      previewObserver.load();</span>
<a href="#l17.22"></a><span id="l17.22" class="difflineplus">+      smileysPreview.load();</span>
<a href="#l17.23"></a><span id="l17.23" class="difflineplus">+    });</span>
<a href="#l17.24"></a><span id="l17.24">     gThemePane.setGetMore(&quot;Emoticons&quot;);</span>
<a href="#l17.25"></a><span id="l17.25">     gThemePane.setGetMore(&quot;MessageStyles&quot;);</span>
<a href="#l17.26"></a><span id="l17.26" class="difflineminus">-    previewObserver.load();</span>
<a href="#l17.27"></a><span id="l17.27" class="difflineminus">-    setTimeout(function() { smileysPreview.load(); }, 10);</span>
<a href="#l17.28"></a><span id="l17.28">   },</span>
<a href="#l17.29"></a><span id="l17.29"> </span>
<a href="#l17.30"></a><span id="l17.30">   /* Set the correct URL for the &quot;Get more ...&quot;-links */</span>
<a href="#l17.31"></a><span id="l17.31">   setGetMore: function (aType){</span>
<a href="#l17.32"></a><span id="l17.32">     var prefURL;</span>
<a href="#l17.33"></a><span id="l17.33">     switch(aType){</span>
<a href="#l17.34"></a><span id="l17.34">       case &quot;Emoticons&quot;:</span>
<a href="#l17.35"></a><span id="l17.35">         prefURL = PREF_EXTENSIONS_GETMOREEMOTICONSURL;</span>
<a href="#l17.36"></a><span id="l17.36" class="difflineat">@@ -76,17 +81,13 @@ var gThemePane = {</span>
<a href="#l17.37"></a><span id="l17.37">       }</span>
<a href="#l17.38"></a><span id="l17.38">       catch (e) { }</span>
<a href="#l17.39"></a><span id="l17.39">     }</span>
<a href="#l17.40"></a><span id="l17.40">     getMore.hidden = !showGetMore;</span>
<a href="#l17.41"></a><span id="l17.41">   },</span>
<a href="#l17.42"></a><span id="l17.42"> </span>
<a href="#l17.43"></a><span id="l17.43">   // Get extension list (slow) and cache it for use by messagestyle.js and smileys.js</span>
<a href="#l17.44"></a><span id="l17.44">   getExtensionList: function () {</span>
<a href="#l17.45"></a><span id="l17.45" class="difflineminus">-    if (!this.extensionList) {</span>
<a href="#l17.46"></a><span id="l17.46" class="difflineminus">-      this.extensionList =</span>
<a href="#l17.47"></a><span id="l17.47" class="difflineminus">-        Components.classes[&quot;@mozilla.org/extensions/manager;1&quot;]</span>
<a href="#l17.48"></a><span id="l17.48" class="difflineminus">-                  .getService(Components.interfaces.nsIExtensionManager)</span>
<a href="#l17.49"></a><span id="l17.49" class="difflineminus">-                  .getItemList(Components.interfaces.nsIUpdateItem.TYPE_EXTENSION, {});</span>
<a href="#l17.50"></a><span id="l17.50" class="difflineminus">-    }</span>
<a href="#l17.51"></a><span id="l17.51" class="difflineplus">+    if (!this.extensionList)</span>
<a href="#l17.52"></a><span id="l17.52" class="difflineplus">+      throw &quot;The add-ons list should be loaded by now...&quot;;</span>
<a href="#l17.53"></a><span id="l17.53">     return this.extensionList;</span>
<a href="#l17.54"></a><span id="l17.54">   }</span>
<a href="#l17.55"></a><span id="l17.55"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/im/installer/Makefile.in</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/im/installer/Makefile.in</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -132,22 +132,22 @@ endif</span>
<a href="#l18.4"></a><span id="l18.4"> ifdef MOZ_MEMORY</span>
<a href="#l18.5"></a><span id="l18.5"> DEFINES += -DMOZ_MEMORY=1</span>
<a href="#l18.6"></a><span id="l18.6"> endif</span>
<a href="#l18.7"></a><span id="l18.7"> </span>
<a href="#l18.8"></a><span id="l18.8"> ifdef MOZ_PKG_MANIFEST_P</span>
<a href="#l18.9"></a><span id="l18.9"> MOZ_PKG_MANIFEST = packages-static</span>
<a href="#l18.10"></a><span id="l18.10"> </span>
<a href="#l18.11"></a><span id="l18.11"> $(MOZ_PKG_MANIFEST): $(MOZ_PKG_MANIFEST_P)</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-	$(PERL) $(MOZILLA_SRCDIR)/config/preprocessor.pl $(DEFINES) $(ACDEFINES) $&lt; &gt; $@</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+	$(PYTHON) $(MOZILLA_SRCDIR)/config/Preprocessor.py $(DEFINES) $(ACDEFINES) $&lt; &gt; $@</span>
<a href="#l18.14"></a><span id="l18.14"> </span>
<a href="#l18.15"></a><span id="l18.15"> GARBAGE += $(MOZ_PKG_MANIFEST)</span>
<a href="#l18.16"></a><span id="l18.16"> endif</span>
<a href="#l18.17"></a><span id="l18.17"> </span>
<a href="#l18.18"></a><span id="l18.18" class="difflineminus">-ifneq (,$(filter mac cocoa,$(MOZ_WIDGET_TOOLKIT)))</span>
<a href="#l18.19"></a><span id="l18.19" class="difflineplus">+ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))</span>
<a href="#l18.20"></a><span id="l18.20"> MOZ_PKG_MAC_DSSTORE=branding/dsstore</span>
<a href="#l18.21"></a><span id="l18.21"> MOZ_PKG_MAC_BACKGROUND=branding/background.png</span>
<a href="#l18.22"></a><span id="l18.22"> MOZ_PKG_MAC_ICON=branding/disk.icns</span>
<a href="#l18.23"></a><span id="l18.23"> MOZ_PKG_MAC_EXTRA=--symlink &quot;/Applications:/ &quot;</span>
<a href="#l18.24"></a><span id="l18.24"> endif</span>
<a href="#l18.25"></a><span id="l18.25"> </span>
<a href="#l18.26"></a><span id="l18.26"> # On mozilla-central, packager.mk uses core_abspath to redefine DIST</span>
<a href="#l18.27"></a><span id="l18.27"> # As the comm-central config.mk doesn't set it, do it ourselves instead</span>
<a href="#l18.28"></a><span id="l18.28" class="difflineat">@@ -171,13 +171,20 @@ VSINSTALLDIR ?= $(error VSINSTALLDIR not</span>
<a href="#l18.29"></a><span id="l18.29"> UNPACKAGE = $(LIBXUL_DIST)/xulrunner*$(PKG_SUFFIX)</span>
<a href="#l18.30"></a><span id="l18.30"> </span>
<a href="#l18.31"></a><span id="l18.31"> installer: stage-package</span>
<a href="#l18.32"></a><span id="l18.32"> 	$(NSINSTALL) -D $(DIST)/$(PKG_PATH)</span>
<a href="#l18.33"></a><span id="l18.33"> 	cd $(DIST) &amp;&amp; $(PYTHON) $(MOZILLA_SRCDIR)/build/package/wince/make_wince_cab.py -s &quot;$(VSINSTALLDIR)/SmartDevices/SDK/SDKTools/cabwiz.exe&quot; &quot;$(MOZ_PKG_DIR)&quot; &quot;$(MOZ_APP_DISPLAYNAME)&quot; &quot;$(PKG_PATH)$(PKG_BASENAME).cab&quot; &amp;&amp; $(ZIP) -r9D $(PACKAGE) $(MOZ_PKG_DIR)</span>
<a href="#l18.34"></a><span id="l18.34"> 	@echo Installer $(PKG_PATH)$(PKG_BASENAME).cab created!</span>
<a href="#l18.35"></a><span id="l18.35"> endif</span>
<a href="#l18.36"></a><span id="l18.36"> </span>
<a href="#l18.37"></a><span id="l18.37" class="difflineplus">+package-compare:: $(MOZ_PKG_MANIFEST)</span>
<a href="#l18.38"></a><span id="l18.38" class="difflineplus">+ifdef MOZ_PKG_MANIFEST_P</span>
<a href="#l18.39"></a><span id="l18.39" class="difflineplus">+	cd $(DIST); find $(PKGCOMP_FIND_OPTS) $(FINDPATH) -type f | sort &gt; bin-list.txt</span>
<a href="#l18.40"></a><span id="l18.40" class="difflineplus">+	grep &quot;^$(BINPATH)&quot; $(MOZ_PKG_MANIFEST) | sed -e 's/^\///' | sort &gt; $(DIST)/pack-list.txt</span>
<a href="#l18.41"></a><span id="l18.41" class="difflineplus">+	-diff -u $(DIST)/pack-list.txt $(DIST)/bin-list.txt</span>
<a href="#l18.42"></a><span id="l18.42" class="difflineplus">+	rm -f $(DIST)/pack-list.txt $(DIST)/bin-list.txt</span>
<a href="#l18.43"></a><span id="l18.43" class="difflineplus">+endif</span>
<a href="#l18.44"></a><span id="l18.44"> </span>
<a href="#l18.45"></a><span id="l18.45"> installer:: removed-files</span>
<a href="#l18.46"></a><span id="l18.46"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l18.47"></a><span id="l18.47"> 	$(MAKE) -C windows</span>
<a href="#l18.48"></a><span id="l18.48"> endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/im/installer/windows/Makefile.in</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/im/installer/windows/Makefile.in</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -112,19 +112,19 @@ uninstaller::</span>
<a href="#l19.4"></a><span id="l19.4"> 	for i in $(BRANDING_FILES_CONV); do \</span>
<a href="#l19.5"></a><span id="l19.5"> 	  iconv -f UTF-8 -t UTF-16LE $(DIST)/branding/$$i | \</span>
<a href="#l19.6"></a><span id="l19.6"> 	    cat $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/windows/nsis/utf16-le-bom.bin - &gt; \</span>
<a href="#l19.7"></a><span id="l19.7"> 	    $(CONFIG_DIR)/$$i; \</span>
<a href="#l19.8"></a><span id="l19.8"> 	done</span>
<a href="#l19.9"></a><span id="l19.9"> 	$(INSTALL) $(addprefix $(DIST)/branding/,$(BRANDING_FILES)) $(CONFIG_DIR)</span>
<a href="#l19.10"></a><span id="l19.10"> 	$(EXIT_ON_ERROR) \</span>
<a href="#l19.11"></a><span id="l19.11"> 	for i in $(PP_LOCALIZED_FILES); do \</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-	  $(PERL) $(MOZILLA_SRCDIR)/config/preprocessor.pl $(DEFINES) $(ACDEFINES) $(srcdir)/$$i &gt; $(CONFIG_DIR)/$$i; \</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+	  $(PYTHON) $(MOZILLA_SRCDIR)/config/Preprocessor.py $(DEFINES) $(ACDEFINES) $(srcdir)/$$i &gt; $(CONFIG_DIR)/$$i; \</span>
<a href="#l19.14"></a><span id="l19.14"> 	done</span>
<a href="#l19.15"></a><span id="l19.15" class="difflineminus">-	$(PERL) $(MOZILLA_SRCDIR)/config/preprocessor.pl -Fsubstitution $(DEFINES) $(ACDEFINES) \</span>
<a href="#l19.16"></a><span id="l19.16" class="difflineplus">+	$(PYTHON) $(MOZILLA_SRCDIR)/config/Preprocessor.py -Fsubstitution $(DEFINES) $(ACDEFINES) \</span>
<a href="#l19.17"></a><span id="l19.17"> 	  $(srcdir)/nsis/defines.nsi.in | iconv -f UTF-8 -t UTF-16LE | \</span>
<a href="#l19.18"></a><span id="l19.18"> 	  cat $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/windows/nsis/utf16-le-bom.bin - &gt; \</span>
<a href="#l19.19"></a><span id="l19.19"> 	  $(CONFIG_DIR)/defines.nsi</span>
<a href="#l19.20"></a><span id="l19.20"> 	$(PERL) $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/windows/nsis/preprocess-locale.pl \</span>
<a href="#l19.21"></a><span id="l19.21"> 	  $(MOZILLA_SRCDIR) $(call EXPAND_LOCALE_SRCDIR,instantbird/locales)/installer $(AB_CD) \</span>
<a href="#l19.22"></a><span id="l19.22"> 	  $(CONFIG_DIR)</span>
<a href="#l19.23"></a><span id="l19.23"> </span>
<a href="#l19.24"></a><span id="l19.24"> $(CONFIG_DIR)/setup.exe::</span>
<a href="#l19.25"></a><span id="l19.25" class="difflineat">@@ -138,23 +138,23 @@ uninstaller::</span>
<a href="#l19.26"></a><span id="l19.26"> 	for i in $(BRANDING_FILES_CONV); do \</span>
<a href="#l19.27"></a><span id="l19.27"> 	  iconv -f UTF-8 -t UTF-16LE $(DIST)/branding/$$i | \</span>
<a href="#l19.28"></a><span id="l19.28"> 	    cat $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/windows/nsis/utf16-le-bom.bin - &gt; \</span>
<a href="#l19.29"></a><span id="l19.29"> 	    $(CONFIG_DIR)/$$i; \</span>
<a href="#l19.30"></a><span id="l19.30"> 	done</span>
<a href="#l19.31"></a><span id="l19.31"> 	$(INSTALL) $(addprefix $(DIST)/branding/,$(BRANDING_FILES)) $(CONFIG_DIR)</span>
<a href="#l19.32"></a><span id="l19.32"> 	$(EXIT_ON_ERROR) \</span>
<a href="#l19.33"></a><span id="l19.33"> 	for i in $(PP_LOCALIZED_FILES); do \</span>
<a href="#l19.34"></a><span id="l19.34" class="difflineminus">-	  $(PERL) $(MOZILLA_SRCDIR)/config/preprocessor.pl $(DEFINES) $(ACDEFINES) $(srcdir)/$$i &gt; $(CONFIG_DIR)/$$i; \</span>
<a href="#l19.35"></a><span id="l19.35" class="difflineplus">+	  $(PYTHON) $(MOZILLA_SRCDIR)/config/Preprocessor.py $(DEFINES) $(ACDEFINES) $(srcdir)/$$i &gt; $(CONFIG_DIR)/$$i; \</span>
<a href="#l19.36"></a><span id="l19.36"> 	done</span>
<a href="#l19.37"></a><span id="l19.37"> ifeq ($(CONFIG_DIR),instgen)</span>
<a href="#l19.38"></a><span id="l19.38"> 	$(PERL) $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/windows/nsis/make-installremoves.pl \</span>
<a href="#l19.39"></a><span id="l19.39"> 	  ../removed-files &gt; $(CONFIG_DIR)/removed-files.log</span>
<a href="#l19.40"></a><span id="l19.40"> endif</span>
<a href="#l19.41"></a><span id="l19.41" class="difflineminus">-	$(PERL) $(MOZILLA_SRCDIR)/config/preprocessor.pl -Fsubstitution $(DEFINES) $(ACDEFINES) \</span>
<a href="#l19.42"></a><span id="l19.42" class="difflineplus">+	$(PYTHON) $(MOZILLA_SRCDIR)/config/Preprocessor.py -Fsubstitution $(DEFINES) $(ACDEFINES) \</span>
<a href="#l19.43"></a><span id="l19.43"> 	  $(srcdir)/nsis/defines.nsi.in | iconv -f UTF-8 -t UTF-16LE | \</span>
<a href="#l19.44"></a><span id="l19.44"> 	  cat $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/windows/nsis/utf16-le-bom.bin - &gt; \</span>
<a href="#l19.45"></a><span id="l19.45"> 	  $(CONFIG_DIR)/defines.nsi</span>
<a href="#l19.46"></a><span id="l19.46"> 	$(PERL) $(MOZILLA_SRCDIR)/toolkit/mozapps/installer/windows/nsis/preprocess-locale.pl \</span>
<a href="#l19.47"></a><span id="l19.47"> 	  $(MOZILLA_SRCDIR) $(call EXPAND_LOCALE_SRCDIR,instantbird/locales)/installer $(AB_CD) \</span>
<a href="#l19.48"></a><span id="l19.48"> 	  $(CONFIG_DIR)</span>
<a href="#l19.49"></a><span id="l19.49"> </span>
<a href="#l19.50"></a><span id="l19.50"> include $(topsrcdir)/config/rules.mk</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/im/themes/messages/bubbles/Incoming/Content.html</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/im/themes/messages/bubbles/Incoming/Content.html</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -1,7 +1,7 @@</span>
<a href="#l20.4"></a><span id="l20.4" class="difflineminus">-&lt;div class=&quot;bubble %messageClasses%&quot; style=&quot;opacity: 0;&quot; senderColor=&quot;%senderColor%&quot;&gt;</span>
<a href="#l20.5"></a><span id="l20.5" class="difflineplus">+&lt;div class=&quot;bubble %messageClasses%&quot; senderColor=&quot;%senderColor%&quot;&gt;</span>
<a href="#l20.6"></a><span id="l20.6"> &lt;div class=&quot;indicator&quot;&gt;</span>
<a href="#l20.7"></a><span id="l20.7"> &lt;p class=&quot;pseudo&quot;&gt;&lt;span&gt;%sender%&lt;/span&gt;&lt;/p&gt;</span>
<a href="#l20.8"></a><span id="l20.8"> &lt;p class=&quot;%messageClasses%&quot; title=&quot;%time%&quot;&gt;%message%&lt;/p&gt;</span>
<a href="#l20.9"></a><span id="l20.9"> &lt;div id=&quot;insert&quot;/&gt;</span>
<a href="#l20.10"></a><span id="l20.10"> &lt;/div&gt;</span>
<a href="#l20.11"></a><span id="l20.11"> &lt;/div&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/purple/purplexpcom/src/facebookOverrideProtocol.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/purple/purplexpcom/src/facebookOverrideProtocol.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -83,9 +83,9 @@ facebookProtocol.prototype = {</span>
<a href="#l21.4"></a><span id="l21.4">     }</span>
<a href="#l21.5"></a><span id="l21.5">     return new nsSimpleEnumerator(newSplits);</span>
<a href="#l21.6"></a><span id="l21.6">   },</span>
<a href="#l21.7"></a><span id="l21.7"> </span>
<a href="#l21.8"></a><span id="l21.8">   classID: Components.ID(&quot;{61bc3528-df53-4481-a61a-74c3a2e8c9fd}&quot;)</span>
<a href="#l21.9"></a><span id="l21.9"> };</span>
<a href="#l21.10"></a><span id="l21.10"> facebookProtocol.prototype.__proto__ = ForwardProtocolPrototype;</span>
<a href="#l21.11"></a><span id="l21.11"> </span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-var NSGetModule = XPCOMUtils.generateNSGetModule([facebookProtocol]);</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+const NSGetFactory = XPCOMUtils.generateNSGetFactory([facebookProtocol]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/purple/purplexpcom/src/gtalkOverrideProtocol.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/purple/purplexpcom/src/gtalkOverrideProtocol.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -43,9 +43,9 @@ gtalkProtocol.prototype = {</span>
<a href="#l22.4"></a><span id="l22.4">   get normalizedName() &quot;gtalk&quot;,</span>
<a href="#l22.5"></a><span id="l22.5">   get name() &quot;Google Talk&quot;,</span>
<a href="#l22.6"></a><span id="l22.6">   get iconBaseURI() &quot;chrome://prpl-gtalk/skin/&quot;,</span>
<a href="#l22.7"></a><span id="l22.7">   get baseId() &quot;prpl-jabber&quot;,</span>
<a href="#l22.8"></a><span id="l22.8">   classID: Components.ID(&quot;{ad8a6454-2f5a-40c2-86ca-30062408125e}&quot;)</span>
<a href="#l22.9"></a><span id="l22.9"> };</span>
<a href="#l22.10"></a><span id="l22.10"> gtalkProtocol.prototype.__proto__ = ForwardProtocolPrototype;</span>
<a href="#l22.11"></a><span id="l22.11"> </span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-var NSGetModule = XPCOMUtils.generateNSGetModule([gtalkProtocol]);</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+const NSGetFactory = XPCOMUtils.generateNSGetFactory([gtalkProtocol]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/purple/purplexpcom/src/jsProtoHelper.jsm</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/purple/purplexpcom/src/jsProtoHelper.jsm</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -354,18 +354,17 @@ const GenericProtocolPrototype = {</span>
<a href="#l23.4"></a><span id="l23.4">   getInterfaces: function(countRef) {</span>
<a href="#l23.5"></a><span id="l23.5">     var interfaces = [Ci.nsIClassInfo, Ci.nsISupports, Ci.purpleIProtocol];</span>
<a href="#l23.6"></a><span id="l23.6">     countRef.value = interfaces.length;</span>
<a href="#l23.7"></a><span id="l23.7">     return interfaces;</span>
<a href="#l23.8"></a><span id="l23.8">   },</span>
<a href="#l23.9"></a><span id="l23.9">   getHelperForLanguage: function(language) null,</span>
<a href="#l23.10"></a><span id="l23.10">   implementationLanguage: Ci.nsIProgrammingLanguage.JAVASCRIPT,</span>
<a href="#l23.11"></a><span id="l23.11">   flags: 0,</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Ci.purpleIProtocol, Ci.nsIClassInfo]),</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineminus">-  _xpcom_categories: [{category: &quot;js-protocol-plugin&quot;}],</span>
<a href="#l23.14"></a><span id="l23.14" class="difflineplus">+  QueryInterface: XPCOMUtils.generateQI([Ci.purpleIProtocol, Ci.nsIClassInfo])</span>
<a href="#l23.15"></a><span id="l23.15"> };</span>
<a href="#l23.16"></a><span id="l23.16"> </span>
<a href="#l23.17"></a><span id="l23.17"> // the baseId property should be set to the prpl id of the base protocol plugin</span>
<a href="#l23.18"></a><span id="l23.18"> // and the name getter is required.</span>
<a href="#l23.19"></a><span id="l23.19"> const ForwardProtocolPrototype = {</span>
<a href="#l23.20"></a><span id="l23.20">   get base() {</span>
<a href="#l23.21"></a><span id="l23.21">     if (!this.hasOwnProperty(&quot;_base&quot;)) {</span>
<a href="#l23.22"></a><span id="l23.22">       this._base =</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/purple/purplexpcom/src/jsTestProtocol.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/purple/purplexpcom/src/jsTestProtocol.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -108,10 +108,10 @@ overrideTestProtocol.prototype = {</span>
<a href="#l24.4"></a><span id="l24.4">   get normalizedName() &quot;override&quot;,</span>
<a href="#l24.5"></a><span id="l24.5">   get name() &quot;Override Test&quot;,</span>
<a href="#l24.6"></a><span id="l24.6">   get iconBaseURI() &quot;chrome://prpl-qq/skin/&quot;,</span>
<a href="#l24.7"></a><span id="l24.7">   get baseId() &quot;prpl-null&quot;,</span>
<a href="#l24.8"></a><span id="l24.8">   classID: Components.ID(&quot;{88795348-8a4b-4018-890d-5314cb08ec4d}&quot;)</span>
<a href="#l24.9"></a><span id="l24.9"> };</span>
<a href="#l24.10"></a><span id="l24.10"> overrideTestProtocol.prototype.__proto__ = ForwardProtocolPrototype;</span>
<a href="#l24.11"></a><span id="l24.11"> </span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-var NSGetModule = XPCOMUtils.generateNSGetModule([jsTestProtocol,</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineminus">-                                                  overrideTestProtocol]);</span>
<a href="#l24.14"></a><span id="l24.14" class="difflineplus">+const NSGetFactory = XPCOMUtils.generateNSGetFactory([jsTestProtocol,</span>
<a href="#l24.15"></a><span id="l24.15" class="difflineplus">+                                                      overrideTestProtocol]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1">new file mode 100644</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineminus">--- /dev/null</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineplus">+++ b/purple/purplexpcom/src/jsTestProtocol.manifest</span>
<a href="#l25.4"></a><span id="l25.4" class="difflineat">@@ -0,0 +1,6 @@</span>
<a href="#l25.5"></a><span id="l25.5" class="difflineplus">+component {a0774c5a-4aea-458b-9fbc-8d3cbf1a4630} jsTestProtocol.js</span>
<a href="#l25.6"></a><span id="l25.6" class="difflineplus">+contract @instantbird.org/purple/jstest;1 {a0774c5a-4aea-458b-9fbc-8d3cbf1a4630}</span>
<a href="#l25.7"></a><span id="l25.7" class="difflineplus">+category js-protocol-plugin @instantbird.org/purple/jstest;1 @instantbird.org/purple/jstest;1</span>
<a href="#l25.8"></a><span id="l25.8" class="difflineplus">+component {88795348-8a4b-4018-890d-5314cb08ec4d} jsTestProtocol.js</span>
<a href="#l25.9"></a><span id="l25.9" class="difflineplus">+contract @instantbird.org/purple/override;1 {88795348-8a4b-4018-890d-5314cb08ec4d}</span>
<a href="#l25.10"></a><span id="l25.10" class="difflineplus">+category js-protocol-plugin @instantbird.org/purple/override;1 @instantbird.org/purple/override;1</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1">new file mode 100644</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineminus">--- /dev/null</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineplus">+++ b/purple/purplexpcom/src/overrideProtocols.manifest</span>
<a href="#l26.4"></a><span id="l26.4" class="difflineat">@@ -0,0 +1,6 @@</span>
<a href="#l26.5"></a><span id="l26.5" class="difflineplus">+component {ad8a6454-2f5a-40c2-86ca-30062408125e} gtalkOverrideProtocol.js</span>
<a href="#l26.6"></a><span id="l26.6" class="difflineplus">+contract @instantbird.org/purple/gtalk;1 {ad8a6454-2f5a-40c2-86ca-30062408125e}</span>
<a href="#l26.7"></a><span id="l26.7" class="difflineplus">+category js-protocol-plugin @instantbird.org/purple/gtalk;1 @instantbird.org/purple/gtalk;1</span>
<a href="#l26.8"></a><span id="l26.8" class="difflineplus">+component {61bc3528-df53-4481-a61a-74c3a2e8c9fd} facebookOverrideProtocol.js</span>
<a href="#l26.9"></a><span id="l26.9" class="difflineplus">+contract @instantbird.org/purple/facebook;1 {61bc3528-df53-4481-a61a-74c3a2e8c9fd}</span>
<a href="#l26.10"></a><span id="l26.10" class="difflineplus">+category js-protocol-plugin @instantbird.org/purple/facebook;1 @instantbird.org/purple/facebook;1</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

