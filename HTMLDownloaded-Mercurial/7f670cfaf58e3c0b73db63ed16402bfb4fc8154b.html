<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 22071:7f670cfaf58e3c0b73db63ed16402bfb4fc8154b</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 7f670cfaf58e3c0b73db63ed16402bfb4fc8154b" />
<meta property="og:url" content="/comm-central/rev/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b" />
<meta property="og:description" content="Bug 1395481 - Port bug 1394556: Part 3: Fix more JS errors caused by using strict. r=jorgk" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 7f670cfaf58e3c0b73db63ed16402bfb4fc8154b 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b">shortlog</a> |
<a href="/comm-central/log/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b">files</a> |
changeset |
<a href="/comm-central/raw-rev/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b">raw</a>  | <a href="/comm-central/archive/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1395481">Bug 1395481</a> - Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1394556">bug 1394556</a>: Part 3: Fix more JS errors caused by using strict. r=jorgk
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#97;&#99;&#101;&#109;&#97;&#110;&#32;&#60;&#97;&#99;&#101;&#108;&#105;&#115;&#116;&#115;&#64;&#97;&#116;&#108;&#97;&#115;&#46;&#115;&#107;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 31 Aug 2017 20:02:00 +0200</td></tr>

<tr>
 <td>changeset 22071</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b">7f670cfaf58e3c0b73db63ed16402bfb4fc8154b</a></td>
</tr>



<tr>
<td>parent 22070</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/34498ab8ad48fe6bbdce9dd53577036f19ded96f">34498ab8ad48fe6bbdce9dd53577036f19ded96f</a>
</td>
</tr>

<tr>
<td>child 22072</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/7051135cd39b3df1bb8547fe6e1870664b9f2715">7051135cd39b3df1bb8547fe6e1870664b9f2715</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=7f670cfaf58e3c0b73db63ed16402bfb4fc8154b">13473</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Fri, 01 Sep 2017 09:25:57 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@7f670cfaf58e [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=7f670cfaf58e3c0b73db63ed16402bfb4fc8154b">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=7f670cfaf58e3c0b73db63ed16402bfb4fc8154b&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=7f670cfaf58e3c0b73db63ed16402bfb4fc8154b&newProject=comm-central&newRevision=7f670cfaf58e3c0b73db63ed16402bfb4fc8154b&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=7f670cfaf58e3c0b73db63ed16402bfb4fc8154b&newProject=comm-central&newRevision=7f670cfaf58e3c0b73db63ed16402bfb4fc8154b&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=7f670cfaf58e3c0b73db63ed16402bfb4fc8154b&newProject=comm-central&newRevision=7f670cfaf58e3c0b73db63ed16402bfb4fc8154b&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28jorgk%29&revcount=50">jorgk</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1395481">1395481</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1394556">1394556</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1395481">Bug 1395481</a> - Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1394556">bug 1394556</a>: Part 3: Fix more JS errors caused by using strict. r=jorgk</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/mozmill/shared-modules/test-address-book-helpers.js">mail/test/mozmill/shared-modules/test-address-book-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/mozmill/shared-modules/test-address-book-helpers.js">file</a> |
<a href="/comm-central/annotate/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/mozmill/shared-modules/test-address-book-helpers.js">annotate</a> |
<a href="/comm-central/diff/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/mozmill/shared-modules/test-address-book-helpers.js">diff</a> |
<a href="/comm-central/comparison/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/mozmill/shared-modules/test-address-book-helpers.js">comparison</a> |
<a href="/comm-central/log/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/mozmill/shared-modules/test-address-book-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">mail/test/mozmill/shared-modules/test-folder-display-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">file</a> |
<a href="/comm-central/annotate/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">annotate</a> |
<a href="/comm-central/diff/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">diff</a> |
<a href="/comm-central/comparison/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">comparison</a> |
<a href="/comm-central/log/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/mozmill/shared-modules/test-window-helpers.js">mail/test/mozmill/shared-modules/test-window-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/mozmill/shared-modules/test-window-helpers.js">file</a> |
<a href="/comm-central/annotate/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/mozmill/shared-modules/test-window-helpers.js">annotate</a> |
<a href="/comm-central/diff/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/mozmill/shared-modules/test-window-helpers.js">diff</a> |
<a href="/comm-central/comparison/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/mozmill/shared-modules/test-window-helpers.js">comparison</a> |
<a href="/comm-central/log/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/mozmill/shared-modules/test-window-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/content/dx.js">mail/test/resources/mozmill/mozmill/extension/content/dx.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/content/dx.js">file</a> |
<a href="/comm-central/annotate/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/content/dx.js">annotate</a> |
<a href="/comm-central/diff/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/content/dx.js">diff</a> |
<a href="/comm-central/comparison/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/content/dx.js">comparison</a> |
<a href="/comm-central/log/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/content/dx.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/content/output.js">mail/test/resources/mozmill/mozmill/extension/content/output.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/content/output.js">file</a> |
<a href="/comm-central/annotate/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/content/output.js">annotate</a> |
<a href="/comm-central/diff/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/content/output.js">diff</a> |
<a href="/comm-central/comparison/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/content/output.js">comparison</a> |
<a href="/comm-central/log/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/content/output.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/content/shell.js">mail/test/resources/mozmill/mozmill/extension/content/shell.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/content/shell.js">file</a> |
<a href="/comm-central/annotate/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/content/shell.js">annotate</a> |
<a href="/comm-central/diff/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/content/shell.js">diff</a> |
<a href="/comm-central/comparison/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/content/shell.js">comparison</a> |
<a href="/comm-central/log/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/content/shell.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/resource/modules/elementslib.js">mail/test/resources/mozmill/mozmill/extension/resource/modules/elementslib.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/resource/modules/elementslib.js">file</a> |
<a href="/comm-central/annotate/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/resource/modules/elementslib.js">annotate</a> |
<a href="/comm-central/diff/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/resource/modules/elementslib.js">diff</a> |
<a href="/comm-central/comparison/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/resource/modules/elementslib.js">comparison</a> |
<a href="/comm-central/log/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/resource/modules/elementslib.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/securable-module.js">mail/test/resources/mozmill/mozmill/extension/resource/stdlib/securable-module.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/securable-module.js">file</a> |
<a href="/comm-central/annotate/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/securable-module.js">annotate</a> |
<a href="/comm-central/diff/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/securable-module.js">diff</a> |
<a href="/comm-central/comparison/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/securable-module.js">comparison</a> |
<a href="/comm-central/log/7f670cfaf58e3c0b73db63ed16402bfb4fc8154b/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/securable-module.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-address-book-helpers.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-address-book-helpers.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -241,18 +241,17 @@ function get_mailing_list_from_address_b</span>
<a href="#l1.4"></a><span id="l1.4">  *                  where each contact has members &quot;email&quot;</span>
<a href="#l1.5"></a><span id="l1.5">  *                  and &quot;displayName&quot;</span>
<a href="#l1.6"></a><span id="l1.6">  *</span>
<a href="#l1.7"></a><span id="l1.7">  *                  Example:</span>
<a href="#l1.8"></a><span id="l1.8">  *                  [{email: 'test@example.com', displayName: 'Sammy Jenkis'}]</span>
<a href="#l1.9"></a><span id="l1.9">  */</span>
<a href="#l1.10"></a><span id="l1.10"> function load_contacts_into_address_book(aAddressBook, aContacts)</span>
<a href="#l1.11"></a><span id="l1.11"> {</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-  for (contact of aContacts) {</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineminus">-</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+  for (let contact of aContacts) {</span>
<a href="#l1.15"></a><span id="l1.15">     if (!(contact instanceof Ci.nsIAbCard))</span>
<a href="#l1.16"></a><span id="l1.16">       contact = create_contact(contact.email,</span>
<a href="#l1.17"></a><span id="l1.17">                                contact.displayName, true);</span>
<a href="#l1.18"></a><span id="l1.18"> </span>
<a href="#l1.19"></a><span id="l1.19">     aAddressBook.addCard(contact);</span>
<a href="#l1.20"></a><span id="l1.20">   }</span>
<a href="#l1.21"></a><span id="l1.21"> }</span>
<a href="#l1.22"></a><span id="l1.22"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-folder-display-helpers.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-folder-display-helpers.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -2580,17 +2580,17 @@ function assert_folder_at_index_as(n, st</span>
<a href="#l2.4"></a><span id="l2.4">   let folderN = mc.window.gFolderTreeView.getFTVItemForIndex(n);</span>
<a href="#l2.5"></a><span id="l2.5">   assert_equals(folderN.text, str)</span>
<a href="#l2.6"></a><span id="l2.6"> }</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8"> /**</span>
<a href="#l2.9"></a><span id="l2.9">  * Since indexOf does strict equality checking, we need this.</span>
<a href="#l2.10"></a><span id="l2.10">  */</span>
<a href="#l2.11"></a><span id="l2.11"> function _non_strict_index_of(aArray, aSearchElement) {</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-  for ([i, item] of aArray.entries()) {</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+  for (let [i, item] of aArray.entries()) {</span>
<a href="#l2.14"></a><span id="l2.14">     if (item == aSearchElement)</span>
<a href="#l2.15"></a><span id="l2.15">       return i;</span>
<a href="#l2.16"></a><span id="l2.16">   }</span>
<a href="#l2.17"></a><span id="l2.17">   return -1;</span>
<a href="#l2.18"></a><span id="l2.18"> }</span>
<a href="#l2.19"></a><span id="l2.19"> </span>
<a href="#l2.20"></a><span id="l2.20"> function _prettify_folder_array(aArray) {</span>
<a href="#l2.21"></a><span id="l2.21">   return aArray.map(folder =&gt; folder.prettyName).join(&quot;, &quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-window-helpers.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-window-helpers.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -1511,24 +1511,24 @@ function describeEventElementInHierarchy</span>
<a href="#l3.4"></a><span id="l3.4"> </span>
<a href="#l3.5"></a><span id="l3.5"> /**</span>
<a href="#l3.6"></a><span id="l3.6">  * Helper for `describeEventElementInHierarchy` that checks all the</span>
<a href="#l3.7"></a><span id="l3.7">  *  browsers/iframes in `parentWin` for the one that has `win` as its</span>
<a href="#l3.8"></a><span id="l3.8">  *  contentWindow.</span>
<a href="#l3.9"></a><span id="l3.9">  */</span>
<a href="#l3.10"></a><span id="l3.10"> function _findFrameElementForWindowInWindow(win, parentWin) {</span>
<a href="#l3.11"></a><span id="l3.11">   let elems = parentWin.document.getElementsByTagName(&quot;iframe&quot;), i;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-  for (i = 0; i &lt; elems.length; i++) {</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+  for (let i = 0; i &lt; elems.length; i++) {</span>
<a href="#l3.14"></a><span id="l3.14">     // (Must not use === because XPConnect uses wrapper identicality when</span>
<a href="#l3.15"></a><span id="l3.15">     //  we do that.)</span>
<a href="#l3.16"></a><span id="l3.16">     if (elems[i].contentWindow == win)</span>
<a href="#l3.17"></a><span id="l3.17">       return elems[i];</span>
<a href="#l3.18"></a><span id="l3.18">   }</span>
<a href="#l3.19"></a><span id="l3.19">   elems = parentWin.document.getElementsByTagName(&quot;browser&quot;);</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineminus">-  for (i = 0; i &lt; elems.length; i++) {</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineplus">+  for (let i = 0; i &lt; elems.length; i++) {</span>
<a href="#l3.22"></a><span id="l3.22">     if (elems[i].contentWindow == win)</span>
<a href="#l3.23"></a><span id="l3.23">       return elems[i];</span>
<a href="#l3.24"></a><span id="l3.24">   }</span>
<a href="#l3.25"></a><span id="l3.25">   return null;</span>
<a href="#l3.26"></a><span id="l3.26"> }</span>
<a href="#l3.27"></a><span id="l3.27"> </span>
<a href="#l3.28"></a><span id="l3.28"> /**</span>
<a href="#l3.29"></a><span id="l3.29">  * Given an event, provide a uniquely identifying string that usefully</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/dx.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/dx.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -141,21 +141,21 @@ DomInspectorConnector.prototype.dxOff = </span>
<a href="#l4.4"></a><span id="l4.4">   $(&quot;#dxToggle&quot;).text(&quot;Start&quot;);</span>
<a href="#l4.5"></a><span id="l4.5">   $(&quot;#dxCopy&quot;).show();</span>
<a href="#l4.6"></a><span id="l4.6"> </span>
<a href="#l4.7"></a><span id="l4.7">   //try to cleanup left over outlines</span>
<a href="#l4.8"></a><span id="l4.8">   if (this.lastEvent){</span>
<a href="#l4.9"></a><span id="l4.9">     this.lastEvent.target.style.outline = &quot;&quot;;</span>
<a href="#l4.10"></a><span id="l4.10">   }</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-  for (var win of utils.getWindows()) {</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+  for (let win of utils.getWindows()) {</span>
<a href="#l4.14"></a><span id="l4.14">     this.dxRecursiveUnBind(win, 'click');</span>
<a href="#l4.15"></a><span id="l4.15">   }</span>
<a href="#l4.16"></a><span id="l4.16"> </span>
<a href="#l4.17"></a><span id="l4.17" class="difflineminus">-  for (win of utils.getWindows()) {</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+  for (let win of utils.getWindows()) {</span>
<a href="#l4.19"></a><span id="l4.19">     this.dxRecursiveUnBind(win, 'dblclick');</span>
<a href="#l4.20"></a><span id="l4.20">   }</span>
<a href="#l4.21"></a><span id="l4.21"> </span>
<a href="#l4.22"></a><span id="l4.22">   var observerService =</span>
<a href="#l4.23"></a><span id="l4.23">     Components.classes[&quot;@mozilla.org/observer-service;1&quot;]</span>
<a href="#l4.24"></a><span id="l4.24">       .getService(Components.interfaces.nsIObserverService);</span>
<a href="#l4.25"></a><span id="l4.25"> </span>
<a href="#l4.26"></a><span id="l4.26">   try {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/output.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/output.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -81,17 +81,17 @@ var createCell = function (t, obj, messa</span>
<a href="#l5.4"></a><span id="l5.4">       var display = message['function'];</span>
<a href="#l5.5"></a><span id="l5.5">     }</span>
<a href="#l5.6"></a><span id="l5.6">     //add each piece in its own hbox</span>
<a href="#l5.7"></a><span id="l5.7">     msg.innerHTML = '&lt;span style=&quot;float:right;top:0px;cursor: pointer;&quot; class=&quot;ui-icon ui-icon-triangle-1-s&quot;/&gt;';</span>
<a href="#l5.8"></a><span id="l5.8">     msg.innerHTML += &quot;&lt;strong&gt;&quot;+t+&quot;&lt;/strong&gt;&quot;+' :: '+display;</span>
<a href="#l5.9"></a><span id="l5.9"> </span>
<a href="#l5.10"></a><span id="l5.10">     var createTree = function(obj){</span>
<a href="#l5.11"></a><span id="l5.11">       var mainDiv = document.createElement('div');</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-      for (prop in obj){</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+      for (let prop in obj){</span>
<a href="#l5.14"></a><span id="l5.14">         var newDiv = document.createElement('div');</span>
<a href="#l5.15"></a><span id="l5.15">         newDiv.style.position = &quot;relative&quot;;</span>
<a href="#l5.16"></a><span id="l5.16">         newDiv.style.height = &quot;15px&quot;;</span>
<a href="#l5.17"></a><span id="l5.17">         newDiv.style.overflow = &quot;hidden&quot;;</span>
<a href="#l5.18"></a><span id="l5.18">         newDiv.style.width = &quot;95%&quot;;</span>
<a href="#l5.19"></a><span id="l5.19">         newDiv.style.left = &quot;10px&quot;;</span>
<a href="#l5.20"></a><span id="l5.20">         //some properties don't have a length attib</span>
<a href="#l5.21"></a><span id="l5.21">         try {</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineat">@@ -101,17 +101,17 @@ var createCell = function (t, obj, messa</span>
<a href="#l5.23"></a><span id="l5.23">         } catch(e){}</span>
<a href="#l5.24"></a><span id="l5.24"> </span>
<a href="#l5.25"></a><span id="l5.25">         newDiv.innerHTML += &quot;&lt;strong&gt;&quot;+prop+&quot;&lt;/strong&gt;: &quot;+obj[prop];</span>
<a href="#l5.26"></a><span id="l5.26">         mainDiv.appendChild(newDiv);</span>
<a href="#l5.27"></a><span id="l5.27">       }</span>
<a href="#l5.28"></a><span id="l5.28">       return mainDiv;</span>
<a href="#l5.29"></a><span id="l5.29">     }</span>
<a href="#l5.30"></a><span id="l5.30">     //iterate the properties creating output entries for them</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">-    for (prop in message){</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+    for (let prop in message){</span>
<a href="#l5.33"></a><span id="l5.33">       if (typeof message[prop] == &quot;object&quot;){</span>
<a href="#l5.34"></a><span id="l5.34">         var newDiv = createTree(message[prop]);</span>
<a href="#l5.35"></a><span id="l5.35">       }</span>
<a href="#l5.36"></a><span id="l5.36">       else {</span>
<a href="#l5.37"></a><span id="l5.37">         var newDiv = document.createElement('div');</span>
<a href="#l5.38"></a><span id="l5.38">         newDiv.innerHTML = &quot;&lt;strong&gt;&quot;+prop+&quot;&lt;/strong&gt;: &quot;+message[prop];</span>
<a href="#l5.39"></a><span id="l5.39">       }</span>
<a href="#l5.40"></a><span id="l5.40">       newDiv.style.position = &quot;relative&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/shell.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/shell.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -9,17 +9,17 @@ var that = this;</span>
<a href="#l6.4"></a><span id="l6.4"> var hwindow = Components.classes[&quot;@mozilla.org/appshell/appShellService;1&quot;]</span>
<a href="#l6.5"></a><span id="l6.5">                 .getService(Components.interfaces.nsIAppShellService)</span>
<a href="#l6.6"></a><span id="l6.6">                 .hiddenDOMWindow;</span>
<a href="#l6.7"></a><span id="l6.7"> </span>
<a href="#l6.8"></a><span id="l6.8"> var wm = Components.classes[&quot;@mozilla.org/appshell/window-mediator;1&quot;]</span>
<a href="#l6.9"></a><span id="l6.9">            .getService(Components.interfaces.nsIWindowMediator);</span>
<a href="#l6.10"></a><span id="l6.10"> </span>
<a href="#l6.11"></a><span id="l6.11"> var dir = function(obj){</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">- for (prop in obj){</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+ for (let prop in obj){</span>
<a href="#l6.14"></a><span id="l6.14">     shell.send(prop);</span>
<a href="#l6.15"></a><span id="l6.15">   }</span>
<a href="#l6.16"></a><span id="l6.16"> }</span>
<a href="#l6.17"></a><span id="l6.17"> </span>
<a href="#l6.18"></a><span id="l6.18"> var shell = new function(){</span>
<a href="#l6.19"></a><span id="l6.19">   this.hist = [];</span>
<a href="#l6.20"></a><span id="l6.20">   this.histPos = 0;</span>
<a href="#l6.21"></a><span id="l6.21">   this.histLength = 20;</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineat">@@ -68,18 +68,18 @@ var shell = new function(){</span>
<a href="#l6.23"></a><span id="l6.23">      var enumerator = Components.classes[&quot;@mozilla.org/appshell/window-mediator;1&quot;]</span>
<a href="#l6.24"></a><span id="l6.24">                       .getService(Components.interfaces.nsIWindowMediator)</span>
<a href="#l6.25"></a><span id="l6.25">                       .getEnumerator(&quot;&quot;);</span>
<a href="#l6.26"></a><span id="l6.26">       var s = &quot;&quot;;</span>
<a href="#l6.27"></a><span id="l6.27">       //define an array we can access</span>
<a href="#l6.28"></a><span id="l6.28">       shell.windows = [];</span>
<a href="#l6.29"></a><span id="l6.29">       windows = shell.windows;</span>
<a href="#l6.30"></a><span id="l6.30">       var c = 1;</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">-      while(enumerator.hasMoreElements()) {</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineminus">-        var win = enumerator.getNext();</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineplus">+      while (enumerator.hasMoreElements()) {</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineplus">+        let win = enumerator.getNext();</span>
<a href="#l6.35"></a><span id="l6.35">         shell.windows.push(win);</span>
<a href="#l6.36"></a><span id="l6.36">         c++;</span>
<a href="#l6.37"></a><span id="l6.37">       }</span>
<a href="#l6.38"></a><span id="l6.38">   }</span>
<a href="#l6.39"></a><span id="l6.39"> </span>
<a href="#l6.40"></a><span id="l6.40">   this.handle = function(cmd){</span>
<a href="#l6.41"></a><span id="l6.41">     //if the command has spaces -- args</span>
<a href="#l6.42"></a><span id="l6.42">     var cmdArr = cmd.split(' ');</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineat">@@ -87,36 +87,36 @@ var shell = new function(){</span>
<a href="#l6.44"></a><span id="l6.44">     switch(cmdArr[0]){</span>
<a href="#l6.45"></a><span id="l6.45">     //clear window</span>
<a href="#l6.46"></a><span id="l6.46">     case 'clear':</span>
<a href="#l6.47"></a><span id="l6.47">       shell.sout().innerHTML = &quot;&quot;;</span>
<a href="#l6.48"></a><span id="l6.48">       break;</span>
<a href="#l6.49"></a><span id="l6.49"> </span>
<a href="#l6.50"></a><span id="l6.50">     case 'windows':</span>
<a href="#l6.51"></a><span id="l6.51">       shell.getWindows();</span>
<a href="#l6.52"></a><span id="l6.52" class="difflineminus">-      for (win in shell.windows){</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineplus">+      for (let win in shell.windows) {</span>
<a href="#l6.54"></a><span id="l6.54">         shell.send( win+'. '+shell.windows[win].document.documentElement.getAttribute('windowtype') + ': ' + shell.windows[win].title);</span>
<a href="#l6.55"></a><span id="l6.55">       }</span>
<a href="#l6.56"></a><span id="l6.56">       shell.sendCmd(cmd);</span>
<a href="#l6.57"></a><span id="l6.57">       break;</span>
<a href="#l6.58"></a><span id="l6.58"> </span>
<a href="#l6.59"></a><span id="l6.59">     case 'dir':</span>
<a href="#l6.60"></a><span id="l6.60">       //if has an arg</span>
<a href="#l6.61"></a><span id="l6.61">       if (cmdArr[1]){</span>
<a href="#l6.62"></a><span id="l6.62">         try {</span>
<a href="#l6.63"></a><span id="l6.63">           var arg = eval(cmdArr[1]);</span>
<a href="#l6.64"></a><span id="l6.64" class="difflineminus">-          for (prop in arg){</span>
<a href="#l6.65"></a><span id="l6.65" class="difflineplus">+          for (let prop in arg) {</span>
<a href="#l6.66"></a><span id="l6.66">             shell.send(prop);</span>
<a href="#l6.67"></a><span id="l6.67">           }</span>
<a href="#l6.68"></a><span id="l6.68">         } catch(err){</span>
<a href="#l6.69"></a><span id="l6.69">           shell.send('Error: '+err);</span>
<a href="#l6.70"></a><span id="l6.70">         }</span>
<a href="#l6.71"></a><span id="l6.71">       }</span>
<a href="#l6.72"></a><span id="l6.72">       else {</span>
<a href="#l6.73"></a><span id="l6.73" class="difflineminus">-        for (prop in that){</span>
<a href="#l6.74"></a><span id="l6.74" class="difflineplus">+        for (let prop in that) {</span>
<a href="#l6.75"></a><span id="l6.75">           shell.send(prop);</span>
<a href="#l6.76"></a><span id="l6.76">         }</span>
<a href="#l6.77"></a><span id="l6.77">       }</span>
<a href="#l6.78"></a><span id="l6.78">       shell.sendCmd(cmd);</span>
<a href="#l6.79"></a><span id="l6.79">       break;</span>
<a href="#l6.80"></a><span id="l6.80">     case 'help':</span>
<a href="#l6.81"></a><span id="l6.81">       var opts = [];</span>
<a href="#l6.82"></a><span id="l6.82">       opts.push('dir -- default shows you the current scope, \'dir obj\' or \'dir(obj)\' will show you the properties of the object.');</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/modules/elementslib.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/modules/elementslib.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -339,18 +339,18 @@ var _byName = function (_document, paren</span>
<a href="#l7.4"></a><span id="l7.4">   return _returnResult(_forChildren(parent, 'tagName', value));</span>
<a href="#l7.5"></a><span id="l7.5"> }</span>
<a href="#l7.6"></a><span id="l7.6"> var _byAttrib = function (parent, attributes) {</span>
<a href="#l7.7"></a><span id="l7.7">   var results = [];</span>
<a href="#l7.8"></a><span id="l7.8"> </span>
<a href="#l7.9"></a><span id="l7.9">   var nodes = parent.childNodes;</span>
<a href="#l7.10"></a><span id="l7.10">   for (var i in nodes) {</span>
<a href="#l7.11"></a><span id="l7.11">     var n = nodes[i];</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-    requirementPass = 0;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-    requirementLength = 0;</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+    var requirementPass = 0;</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+    var requirementLength = 0;</span>
<a href="#l7.16"></a><span id="l7.16">     for (var a in attributes) {</span>
<a href="#l7.17"></a><span id="l7.17">       requirementLength++;</span>
<a href="#l7.18"></a><span id="l7.18">       try {</span>
<a href="#l7.19"></a><span id="l7.19">         if (n.getAttribute(a) == attributes[a]) {</span>
<a href="#l7.20"></a><span id="l7.20">           requirementPass++;</span>
<a href="#l7.21"></a><span id="l7.21">         }</span>
<a href="#l7.22"></a><span id="l7.22">       } catch (err) {</span>
<a href="#l7.23"></a><span id="l7.23">         // Workaround any bugs in custom attribute crap in XUL elements</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineat">@@ -374,18 +374,18 @@ var _byAnonAttrib = function (_document,</span>
<a href="#l7.25"></a><span id="l7.25">       return result;</span>
<a href="#l7.26"></a><span id="l7.26"> </span>
<a href="#l7.27"></a><span id="l7.27">     }</span>
<a href="#l7.28"></a><span id="l7.28">   }</span>
<a href="#l7.29"></a><span id="l7.29">   var nodes = Array.from(_document.getAnonymousNodes(parent) || []).filter(n =&gt; n.getAttribute);</span>
<a href="#l7.30"></a><span id="l7.30">   function resultsForNodes (nodes) {</span>
<a href="#l7.31"></a><span id="l7.31">     for (var i in nodes) {</span>
<a href="#l7.32"></a><span id="l7.32">       var n = nodes[i];</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineminus">-      requirementPass = 0;</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineminus">-      requirementLength = 0;</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineplus">+      var requirementPass = 0;</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineplus">+      var requirementLength = 0;</span>
<a href="#l7.37"></a><span id="l7.37">       for (var a in attributes) {</span>
<a href="#l7.38"></a><span id="l7.38">         requirementLength++;</span>
<a href="#l7.39"></a><span id="l7.39">         if (n.getAttribute(a) == attributes[a]) {</span>
<a href="#l7.40"></a><span id="l7.40">           requirementPass++;</span>
<a href="#l7.41"></a><span id="l7.41">         }</span>
<a href="#l7.42"></a><span id="l7.42">       }</span>
<a href="#l7.43"></a><span id="l7.43">       if (requirementPass == requirementLength) {</span>
<a href="#l7.44"></a><span id="l7.44">         results.push(n);</span>
<a href="#l7.45"></a><span id="l7.45" class="difflineat">@@ -423,17 +423,17 @@ Lookup.prototype.exists = function () {</span>
<a href="#l7.46"></a><span id="l7.46">   if (e) {</span>
<a href="#l7.47"></a><span id="l7.47">     return true;</span>
<a href="#l7.48"></a><span id="l7.48">   }</span>
<a href="#l7.49"></a><span id="l7.49">   return false;</span>
<a href="#l7.50"></a><span id="l7.50"> }</span>
<a href="#l7.51"></a><span id="l7.51"> Lookup.prototype.getNode = function () {</span>
<a href="#l7.52"></a><span id="l7.52">   var expSplit = smartSplit(this.expression).filter(e =&gt; e != '');</span>
<a href="#l7.53"></a><span id="l7.53">   expSplit.unshift(this._view.document)</span>
<a href="#l7.54"></a><span id="l7.54" class="difflineminus">-  _document = this._view.document;</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineplus">+  var _document = this._view.document;</span>
<a href="#l7.56"></a><span id="l7.56">   var nCases = {'id':_byID, 'name':_byName, 'attrib':_byAttrib, 'index':_byIndex};</span>
<a href="#l7.57"></a><span id="l7.57">   var aCases = {'name':_anonByName, 'attrib':_anonByAttrib, 'index':_anonByIndex};</span>
<a href="#l7.58"></a><span id="l7.58">   var reduceLookup = function (parent, exp) {</span>
<a href="#l7.59"></a><span id="l7.59">     // Handle case where only index is provided</span>
<a href="#l7.60"></a><span id="l7.60">     var cases = nCases;</span>
<a href="#l7.61"></a><span id="l7.61"> </span>
<a href="#l7.62"></a><span id="l7.62">     // Handle ending index before any of the expression gets mangled</span>
<a href="#l7.63"></a><span id="l7.63">     if (withs.endsWith(exp, ']')) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/securable-module.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/securable-module.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -212,18 +212,19 @@</span>
<a href="#l8.4"></a><span id="l8.4">          if (!(path in self.modules)) {</span>
<a href="#l8.5"></a><span id="l8.5">            var options = self.fs.getFile(path);</span>
<a href="#l8.6"></a><span id="l8.6">            if (options.filename === undefined)</span>
<a href="#l8.7"></a><span id="l8.7">              options.filename = path;</span>
<a href="#l8.8"></a><span id="l8.8"> </span>
<a href="#l8.9"></a><span id="l8.9">            var exports = {};</span>
<a href="#l8.10"></a><span id="l8.10">            var sandbox = self.sandboxFactory.createSandbox(options);</span>
<a href="#l8.11"></a><span id="l8.11">            self.sandboxes[path] = sandbox;</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-           for (name in self.globals)</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+           for (let name in self.globals) {</span>
<a href="#l8.14"></a><span id="l8.14">              sandbox.defineProperty(name, self.globals[name]);</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineplus">+           }</span>
<a href="#l8.16"></a><span id="l8.16">            sandbox.defineProperty('require', self._makeRequire(path));</span>
<a href="#l8.17"></a><span id="l8.17">            sandbox.evaluate(&quot;var exports = {};&quot;);</span>
<a href="#l8.18"></a><span id="l8.18">            let ES5 = self.modules.es5;</span>
<a href="#l8.19"></a><span id="l8.19">            if (ES5) {</span>
<a href="#l8.20"></a><span id="l8.20">              let { Object, Array, Function } = sandbox.globalScope;</span>
<a href="#l8.21"></a><span id="l8.21">              ES5.init(Object, Array, Function);</span>
<a href="#l8.22"></a><span id="l8.22">            }</span>
<a href="#l8.23"></a><span id="l8.23">            self.modules[path] = sandbox.getProperty(&quot;exports&quot;);</span>
<a href="#l8.24"></a><span id="l8.24" class="difflineat">@@ -254,18 +255,19 @@</span>
<a href="#l8.25"></a><span id="l8.25"> </span>
<a href="#l8.26"></a><span id="l8.26">      runScript: function runScript(options, extraOutput) {</span>
<a href="#l8.27"></a><span id="l8.27">        if (typeof(options) == 'string')</span>
<a href="#l8.28"></a><span id="l8.28">          options = {contents: options};</span>
<a href="#l8.29"></a><span id="l8.29">        options = {__proto__: options};</span>
<a href="#l8.30"></a><span id="l8.30">        var sandbox = this.sandboxFactory.createSandbox(options);</span>
<a href="#l8.31"></a><span id="l8.31">        if (extraOutput)</span>
<a href="#l8.32"></a><span id="l8.32">          extraOutput.sandbox = sandbox;</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineminus">-       for (name in this.globals)</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineplus">+       for (let name in this.globals) {</span>
<a href="#l8.35"></a><span id="l8.35">          sandbox.defineProperty(name, this.globals[name]);</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineplus">+       }</span>
<a href="#l8.37"></a><span id="l8.37">        sandbox.defineProperty('require', this._makeRequire(null));</span>
<a href="#l8.38"></a><span id="l8.38">        return sandbox.evaluate(options);</span>
<a href="#l8.39"></a><span id="l8.39">      }</span>
<a href="#l8.40"></a><span id="l8.40">    };</span>
<a href="#l8.41"></a><span id="l8.41"> </span>
<a href="#l8.42"></a><span id="l8.42">    exports.CompositeFileSystem = function CompositeFileSystem(fses) {</span>
<a href="#l8.43"></a><span id="l8.43">      this.fses = fses;</span>
<a href="#l8.44"></a><span id="l8.44">      this._pathMap = {};</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

