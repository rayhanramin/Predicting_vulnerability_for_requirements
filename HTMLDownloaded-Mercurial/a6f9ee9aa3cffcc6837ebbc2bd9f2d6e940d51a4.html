<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 27275:a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4" />
<meta property="og:url" content="/comm-central/rev/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4" />
<meta property="og:description" content="Bug 1569539 - Remove outdated build config code for calendar extensions; r=Fallen" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4">shortlog</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4">files</a> |
changeset |
<a href="/comm-central/raw-rev/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4">raw</a>  | <a href="/comm-central/archive/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1569539">Bug 1569539</a> - Remove outdated build config code for calendar extensions; r=Fallen
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#71;&#101;&#111;&#102;&#102;&#32;&#76;&#97;&#110;&#107;&#111;&#119;&#32;&#60;&#103;&#101;&#111;&#102;&#102;&#64;&#100;&#97;&#114;&#107;&#116;&#114;&#111;&#106;&#97;&#110;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 07 Aug 2019 22:38:37 +0200</td></tr>

<tr>
 <td>changeset 27275</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4">a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4</a></td>
</tr>



<tr>
<td>parent 27274</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/730da0161d02046f1b2a9356132a34e950c5bf6b">730da0161d02046f1b2a9356132a34e950c5bf6b</a>
</td>
</tr>

<tr>
<td>child 27276</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/22d2296fed5d1394557f7ac762de9aa773bd7fb2">22d2296fed5d1394557f7ac762de9aa773bd7fb2</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4">16264</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Wed, 07 Aug 2019 21:58:31 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@45b5c5bb3fe6 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=45b5c5bb3fe6e773da4588e42a93caa4c3cded1a">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=45b5c5bb3fe6e773da4588e42a93caa4c3cded1a&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=45b5c5bb3fe6e773da4588e42a93caa4c3cded1a&newProject=comm-central&newRevision=4e9163b13c8f6953238bc698c7b4544961be8f0a&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=45b5c5bb3fe6e773da4588e42a93caa4c3cded1a&newProject=comm-central&newRevision=4e9163b13c8f6953238bc698c7b4544961be8f0a&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=45b5c5bb3fe6e773da4588e42a93caa4c3cded1a&newProject=comm-central&newRevision=4e9163b13c8f6953238bc698c7b4544961be8f0a&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Fallen%29&revcount=50">Fallen</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1569539">1569539</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1569539">Bug 1569539</a> - Remove outdated build config code for calendar extensions; r=Fallen</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/Makefile.in">calendar/lightning/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/Makefile.in">file</a> |
<a href="/comm-central/annotate/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/Makefile.in">annotate</a> |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/Makefile.in">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/Makefile.in">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/app.ini">calendar/lightning/app.ini</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/app.ini">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/app.ini">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/app.ini">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/build/makeversion.py">calendar/lightning/build/makeversion.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/build/makeversion.py">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/build/makeversion.py">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/build/makeversion.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/chrome.manifest">calendar/lightning/chrome.manifest</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/chrome.manifest">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/chrome.manifest">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/chrome.manifest">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/content/lightning.js">calendar/lightning/content/lightning.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/content/lightning.js">file</a> |
<a href="/comm-central/annotate/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/content/lightning.js">annotate</a> |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/content/lightning.js">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/content/lightning.js">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/content/lightning.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/install.rdf">calendar/lightning/install.rdf</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/install.rdf">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/install.rdf">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/install.rdf">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/lightning-packager.mk">calendar/lightning/lightning-packager.mk</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/lightning-packager.mk">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/lightning-packager.mk">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/lightning-packager.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/lightning-tests.mk">calendar/lightning/lightning-tests.mk</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/lightning-tests.mk">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/lightning-tests.mk">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/lightning-tests.mk">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/manifest.json">calendar/lightning/manifest.json</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/manifest.json">file</a> |
<a href="/comm-central/annotate/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/manifest.json">annotate</a> |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/manifest.json">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/manifest.json">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/manifest.json">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/moz.build">calendar/lightning/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/moz.build">file</a> |
<a href="/comm-central/annotate/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/moz.build">annotate</a> |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/moz.build">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/moz.build">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/versions.mk">calendar/lightning/versions.mk</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/versions.mk">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/versions.mk">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/lightning/versions.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/moz.build">calendar/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/moz.build">file</a> |
<a href="/comm-central/annotate/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/moz.build">annotate</a> |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/moz.build">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/moz.build">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/Makefile.in">calendar/providers/gdata/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/Makefile.in">file</a> |
<a href="/comm-central/annotate/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/Makefile.in">annotate</a> |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/Makefile.in">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/Makefile.in">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/jar.mn">calendar/providers/gdata/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/jar.mn">file</a> |
<a href="/comm-central/annotate/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/jar.mn">annotate</a> |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/jar.mn">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/jar.mn">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/locales/Makefile.in">calendar/providers/gdata/locales/Makefile.in</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/locales/Makefile.in">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/locales/Makefile.in">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/locales/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/locales/jar.mn">calendar/providers/gdata/locales/jar.mn</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/locales/jar.mn">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/locales/jar.mn">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/locales/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/locales/moz.build">calendar/providers/gdata/locales/moz.build</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/locales/moz.build">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/locales/moz.build">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/locales/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/makeversion.py">calendar/providers/gdata/makeversion.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/makeversion.py">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/makeversion.py">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/makeversion.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/manifest.json">calendar/providers/gdata/manifest.json</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/manifest.json">file</a> |
<a href="/comm-central/annotate/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/manifest.json">annotate</a> |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/manifest.json">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/manifest.json">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/manifest.json">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/moz.build">calendar/providers/gdata/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/moz.build">file</a> |
<a href="/comm-central/annotate/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/moz.build">annotate</a> |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/moz.build">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/moz.build">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/providers/gdata/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/test/unit/test_gdata_provider.js">calendar/test/unit/test_gdata_provider.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/test/unit/test_gdata_provider.js">file</a> |
<a href="/comm-central/annotate/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/test/unit/test_gdata_provider.js">annotate</a> |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/test/unit/test_gdata_provider.js">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/test/unit/test_gdata_provider.js">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/test/unit/test_gdata_provider.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/timezones/Makefile.in">calendar/timezones/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/timezones/Makefile.in">file</a> |
<a href="/comm-central/annotate/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/timezones/Makefile.in">annotate</a> |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/timezones/Makefile.in">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/timezones/Makefile.in">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/calendar/timezones/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/taskcluster/ci/test/tests.yml">taskcluster/ci/test/tests.yml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/taskcluster/ci/test/tests.yml">file</a> |
<a href="/comm-central/annotate/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/taskcluster/ci/test/tests.yml">annotate</a> |
<a href="/comm-central/diff/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/taskcluster/ci/test/tests.yml">diff</a> |
<a href="/comm-central/comparison/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/taskcluster/ci/test/tests.yml">comparison</a> |
<a href="/comm-central/log/a6f9ee9aa3cffcc6837ebbc2bd9f2d6e940d51a4/taskcluster/ci/test/tests.yml">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/lightning/Makefile.in</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/lightning/Makefile.in</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -1,91 +1,43 @@</span>
<a href="#l1.4"></a><span id="l1.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l1.5"></a><span id="l1.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l1.6"></a><span id="l1.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l1.7"></a><span id="l1.7"> </span>
<a href="#l1.8"></a><span id="l1.8" class="difflineminus">-# Calendar builders currently use STRIP_XPI to reduce the binary component in</span>
<a href="#l1.9"></a><span id="l1.9" class="difflineminus">-# Lightning.</span>
<a href="#l1.10"></a><span id="l1.10" class="difflineminus">-</span>
<a href="#l1.11"></a><span id="l1.11" class="difflineminus">-XPI_PKGNAME = lightning-$(LIGHTNING_VERSION).$(AB_CD)</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-XPI_VERSION = $(LIGHTNING_VERSION)</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineminus">-</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineminus">-XPI_EM_ID = {e2fda1a4-762b-4020-b5ad-a41df1933103}</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineminus">-</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineminus">-ifneq (,$(findstring a,$(LIGHTNING_VERSION)))</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineminus">-DEFINES += -DLIGHTNING_PRERELEASE_VERSION=1</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineminus">-endif</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineminus">-</span>
<a href="#l1.20"></a><span id="l1.20" class="difflineminus">-# Gecko milestone</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineminus">-GRE_MILESTONE = $(shell $(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py $(DIST)/bin/platform.ini Build Milestone)</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineminus">-ifdef GRE_MILESTONE</span>
<a href="#l1.23"></a><span id="l1.23" class="difflineminus">-DEFINES += -DGRE_MILESTONE=$(GRE_MILESTONE)</span>
<a href="#l1.24"></a><span id="l1.24" class="difflineminus">-endif</span>
<a href="#l1.25"></a><span id="l1.25" class="difflineminus">-</span>
<a href="#l1.26"></a><span id="l1.26" class="difflineminus">-# comm-central source repo and stamp</span>
<a href="#l1.27"></a><span id="l1.27" class="difflineminus">-SOURCE_STAMP ?= $(firstword $(shell hg -R $(commtopsrcdir) parent --template='{node}\n' 2&gt;/dev/null))</span>
<a href="#l1.28"></a><span id="l1.28" class="difflineminus">-ifdef SOURCE_STAMP</span>
<a href="#l1.29"></a><span id="l1.29" class="difflineminus">-DEFINES += -DSOURCE_STAMP='$(SOURCE_STAMP)'</span>
<a href="#l1.30"></a><span id="l1.30" class="difflineminus">-endif</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineminus">-SOURCE_REPO := $(shell hg -R $(commtopsrcdir) showconfig paths.default 2&gt;/dev/null | sed -e 's/^ssh:/http:/')</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineminus">-ifdef SOURCE_REPO</span>
<a href="#l1.34"></a><span id="l1.34" class="difflineminus">-DEFINES += -DSOURCE_REPO='$(SOURCE_REPO)'</span>
<a href="#l1.35"></a><span id="l1.35" class="difflineminus">-endif</span>
<a href="#l1.36"></a><span id="l1.36" class="difflineminus">-</span>
<a href="#l1.37"></a><span id="l1.37" class="difflineminus">-# Mozilla source repo and stamps</span>
<a href="#l1.38"></a><span id="l1.38" class="difflineminus">-MOZ_SOURCE_STAMP = $(firstword $(shell hg -R $(moztopsrcdir) parent --template='{node}\n' 2&gt;/dev/null))</span>
<a href="#l1.39"></a><span id="l1.39" class="difflineminus">-ifdef MOZ_SOURCE_STAMP</span>
<a href="#l1.40"></a><span id="l1.40" class="difflineminus">-DEFINES += -DMOZ_SOURCE_STAMP='$(MOZ_SOURCE_STAMP)'</span>
<a href="#l1.41"></a><span id="l1.41" class="difflineminus">-endif</span>
<a href="#l1.42"></a><span id="l1.42" class="difflineplus">+XPI_PKGNAME = lightning</span>
<a href="#l1.43"></a><span id="l1.43"> </span>
<a href="#l1.44"></a><span id="l1.44" class="difflineminus">-MOZ_SOURCE_REPO := $(shell hg -R $(moztopsrcdir) showconfig paths.default 2&gt;/dev/null | sed -e 's/^ssh:/http:/')</span>
<a href="#l1.45"></a><span id="l1.45" class="difflineminus">-ifdef MOZ_SOURCE_REPO</span>
<a href="#l1.46"></a><span id="l1.46" class="difflineminus">-DEFINES += -DMOZ_SOURCE_REPO='$(MOZ_SOURCE_REPO)'</span>
<a href="#l1.47"></a><span id="l1.47" class="difflineminus">-endif</span>
<a href="#l1.48"></a><span id="l1.48" class="difflineminus">-</span>
<a href="#l1.49"></a><span id="l1.49" class="difflineminus">-DEFINES += -DTHUNDERBIRD_VERSION=$(THUNDERBIRD_VERSION) \</span>
<a href="#l1.50"></a><span id="l1.50" class="difflineminus">-           -DTHUNDERBIRD_MAXVERSION=$(THUNDERBIRD_MAXVERSION) \</span>
<a href="#l1.51"></a><span id="l1.51" class="difflineminus">-           -DSEAMONKEY_VERSION=$(SEAMONKEY_VERSION) \</span>
<a href="#l1.52"></a><span id="l1.52" class="difflineminus">-           -DSEAMONKEY_MAXVERSION=$(SEAMONKEY_MAXVERSION) \</span>
<a href="#l1.53"></a><span id="l1.53" class="difflineminus">-           -DLIGHTNING_VERSION=$(LIGHTNING_VERSION) \</span>
<a href="#l1.54"></a><span id="l1.54" class="difflineminus">-           -DXPI_EM_ID=&quot;$(XPI_EM_ID)&quot; \</span>
<a href="#l1.55"></a><span id="l1.55" class="difflineminus">-           $(NULL)</span>
<a href="#l1.56"></a><span id="l1.56" class="difflineminus">-</span>
<a href="#l1.57"></a><span id="l1.57" class="difflineminus">-MOZ_BUILDID = $(shell $(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py $(DIST)/bin/application.ini App BuildID)</span>
<a href="#l1.58"></a><span id="l1.58" class="difflineminus">-DEFINES += -DMOZ_BUILDID=$(MOZ_BUILDID)</span>
<a href="#l1.59"></a><span id="l1.59" class="difflineminus">-</span>
<a href="#l1.60"></a><span id="l1.60" class="difflineminus">-LOCALE_TOPDIR=$(commtopsrcdir)</span>
<a href="#l1.61"></a><span id="l1.61" class="difflineminus">-LOCALE_RELATIVEDIR=calendar/lightning</span>
<a href="#l1.62"></a><span id="l1.62" class="difflineminus">-</span>
<a href="#l1.63"></a><span id="l1.63" class="difflineminus">-include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l1.64"></a><span id="l1.64" class="difflineminus">-include $(srcdir)/versions.mk</span>
<a href="#l1.65"></a><span id="l1.65" class="difflineminus">-include $(srcdir)/lightning-tests.mk</span>
<a href="#l1.66"></a><span id="l1.66" class="difflineminus">-</span>
<a href="#l1.67"></a><span id="l1.67" class="difflineminus">-ident:</span>
<a href="#l1.68"></a><span id="l1.68" class="difflineminus">-	@printf 'comm_revision '</span>
<a href="#l1.69"></a><span id="l1.69" class="difflineminus">-	@$(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py \</span>
<a href="#l1.70"></a><span id="l1.70" class="difflineminus">-	    $(FINAL_TARGET)/app.ini App SourceStamp</span>
<a href="#l1.71"></a><span id="l1.71" class="difflineminus">-	@printf 'moz_revision '</span>
<a href="#l1.72"></a><span id="l1.72" class="difflineminus">-	@$(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py \</span>
<a href="#l1.73"></a><span id="l1.73" class="difflineminus">-	    $(FINAL_TARGET)/app.ini Build SourceStamp</span>
<a href="#l1.74"></a><span id="l1.74" class="difflineminus">-	@printf 'buildid '</span>
<a href="#l1.75"></a><span id="l1.75" class="difflineminus">-	@$(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py \</span>
<a href="#l1.76"></a><span id="l1.76" class="difflineminus">-	    $(FINAL_TARGET)/app.ini App BuildID</span>
<a href="#l1.77"></a><span id="l1.77" class="difflineminus">-</span>
<a href="#l1.78"></a><span id="l1.78" class="difflineminus">-ifdef MOZ_ARTIFACT_BUILDS</span>
<a href="#l1.79"></a><span id="l1.79"> ifdef NIGHTLY_BUILD</span>
<a href="#l1.80"></a><span id="l1.80"> final_parent = $(ABS_DIST)/bin/extensions</span>
<a href="#l1.81"></a><span id="l1.81"> else</span>
<a href="#l1.82"></a><span id="l1.82"> final_parent = $(ABS_DIST)/bin/distribution/extensions</span>
<a href="#l1.83"></a><span id="l1.83"> endif</span>
<a href="#l1.84"></a><span id="l1.84" class="difflineplus">+</span>
<a href="#l1.85"></a><span id="l1.85" class="difflineplus">+ifdef MOZ_ARTIFACT_BUILDS</span>
<a href="#l1.86"></a><span id="l1.86"> final_dest = $(final_parent)/{e2fda1a4-762b-4020-b5ad-a41df1933103}</span>
<a href="#l1.87"></a><span id="l1.87"> </span>
<a href="#l1.88"></a><span id="l1.88"> tools::</span>
<a href="#l1.89"></a><span id="l1.89"> 	$(RM) -r $(final_dest)</span>
<a href="#l1.90"></a><span id="l1.90"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l1.91"></a><span id="l1.91"> 	$(NSINSTALL) -D $(final_dest)</span>
<a href="#l1.92"></a><span id="l1.92"> 	$(call copy_dir,$(FINAL_TARGET),$(final_dest))</span>
<a href="#l1.93"></a><span id="l1.93"> else</span>
<a href="#l1.94"></a><span id="l1.94"> 	$(NSINSTALL) -D $(final_parent)</span>
<a href="#l1.95"></a><span id="l1.95"> 	ln -s $(ABS_DIST)/xpi-stage/lightning $(final_dest)</span>
<a href="#l1.96"></a><span id="l1.96"> endif</span>
<a href="#l1.97"></a><span id="l1.97" class="difflineplus">+endif # MOZ_ARTIFACT_BUILDS</span>
<a href="#l1.98"></a><span id="l1.98" class="difflineplus">+</span>
<a href="#l1.99"></a><span id="l1.99" class="difflineplus">+PKG_STAGE = $(DIST)/test-stage</span>
<a href="#l1.100"></a><span id="l1.100" class="difflineplus">+</span>
<a href="#l1.101"></a><span id="l1.101" class="difflineplus">+# stage mozmill tests and shared modules. Cross your fingers that there are no</span>
<a href="#l1.102"></a><span id="l1.102" class="difflineplus">+# name conflicts between calendar/ and mail/</span>
<a href="#l1.103"></a><span id="l1.103" class="difflineplus">+stage-mozmill:</span>
<a href="#l1.104"></a><span id="l1.104" class="difflineplus">+	$(NSINSTALL) -D $(PKG_STAGE)/mozmill/shared-modules</span>
<a href="#l1.105"></a><span id="l1.105" class="difflineplus">+	(cd $(commtopsrcdir)/calendar/test/mozmill &amp;&amp; tar $(TAR_CREATE_FLAGS) - `cat $(commtopsrcdir)/calendar/test/mozmill/mozmilltests.list`) | (cd $(PKG_STAGE)/mozmill &amp;&amp; tar -xf -)</span>
<a href="#l1.106"></a><span id="l1.106" class="difflineplus">+	(cd $(commtopsrcdir)/calendar/test/mozmill/shared-modules &amp;&amp; tar $(TAR_CREATE_FLAGS) - *) | (cd $(PKG_STAGE)/mozmill/shared-modules &amp;&amp; tar -xf -)</span>
<a href="#l1.107"></a><span id="l1.107" class="difflineplus">+	$(call py_action,buildlist,$(PKG_STAGE)/mozmill/mozmilltests.list $(shell cat $(commtopsrcdir)/calendar/test/mozmill/mozmilltests.list))</span>
<a href="#l1.108"></a><span id="l1.108" class="difflineplus">+</span>
<a href="#l1.109"></a><span id="l1.109" class="difflineplus">+# This is the target that should be called externally</span>
<a href="#l1.110"></a><span id="l1.110" class="difflineplus">+stage-package: stage-mozmill</span>
<a href="#l1.111"></a><span id="l1.111" class="difflineplus">+ifdef MOZ_ARTIFACT_BUILDS</span>
<a href="#l1.112"></a><span id="l1.112" class="difflineplus">+	$(PYTHON) -u $(MOZILLA_DIR)/build/upload.py $(DIST)/xpi-stage/$(XPI_PKGNAME).xpi</span>
<a href="#l1.113"></a><span id="l1.113" class="difflineplus">+else</span>
<a href="#l1.114"></a><span id="l1.114" class="difflineplus">+	$(PYTHON) -u $(MOZILLA_DIR)/build/upload.py $(final_parent)/$(XPI_PKGNAME).xpi</span>
<a href="#l1.115"></a><span id="l1.115"> endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1">deleted file mode 100644</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineminus">--- a/calendar/lightning/app.ini</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineplus">+++ /dev/null</span>
<a href="#l2.4"></a><span id="l2.4" class="difflineat">@@ -1,35 +0,0 @@</span>
<a href="#l2.5"></a><span id="l2.5" class="difflineminus">-; This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l2.6"></a><span id="l2.6" class="difflineminus">-; License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l2.7"></a><span id="l2.7" class="difflineminus">-; file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l2.8"></a><span id="l2.8" class="difflineminus">-</span>
<a href="#l2.9"></a><span id="l2.9" class="difflineminus">-; This is a mock application.ini for Lightning. It allows easy access to</span>
<a href="#l2.10"></a><span id="l2.10" class="difflineminus">-; extension properties by the build system.</span>
<a href="#l2.11"></a><span id="l2.11" class="difflineminus">-</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-#filter substitution</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-[App]</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-Vendor=Mozilla</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineminus">-Name=Lightning</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-Version=@LIGHTNING_VERSION@</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineminus">-BuildID=@MOZ_BUILDID@</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineminus">-</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineminus">-#ifdef SOURCE_REPO</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineminus">-SourceRepository=@SOURCE_REPO@</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineminus">-#endif</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineminus">-#ifdef SOURCE_STAMP</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineminus">-SourceStamp=@SOURCE_STAMP@</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineminus">-#endif</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineminus">-</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineminus">-Copyright=Copyright (c) 1998 - 2010 mozilla.org</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineminus">-ID={e2fda1a4-762b-4020-b5ad-a41df1933103}</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineminus">-</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineminus">-[Build]</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineminus">-#ifdef MOZ_SOURCE_REPO</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-SourceRepository=@MOZ_SOURCE_REPO@</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineminus">-#endif</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineminus">-#ifdef MOZ_SOURCE_STAMP</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineminus">-SourceStamp=@MOZ_SOURCE_STAMP@</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineminus">-#endif</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineminus">-</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineminus">-[Gecko]</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineminus">-MinVersion=@GRE_MILESTONE@</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineminus">-MaxVersion=@GRE_MILESTONE@</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1">deleted file mode 100644</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineminus">--- a/calendar/lightning/build/makeversion.py</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineplus">+++ /dev/null</span>
<a href="#l3.4"></a><span id="l3.4" class="difflineat">@@ -1,20 +0,0 @@</span>
<a href="#l3.5"></a><span id="l3.5" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l3.6"></a><span id="l3.6" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l3.7"></a><span id="l3.7" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l3.8"></a><span id="l3.8" class="difflineminus">-</span>
<a href="#l3.9"></a><span id="l3.9" class="difflineminus">-import sys</span>
<a href="#l3.10"></a><span id="l3.10" class="difflineminus">-import re</span>
<a href="#l3.11"></a><span id="l3.11" class="difflineminus">-</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-# Change this number to add an amount to the minor, i.e with MINOR_ADD=2,</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-# 24.2.0 becomes 2.6.4 instead of 2.6.2</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineminus">-MINOR_ADD=0</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineminus">-</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineminus">-def makeversion(x):</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineminus">-  parts = x.split('.')</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineminus">-  major = str((int(parts[0]) + 2))</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineminus">-  parts[0] = major[:-1] + &quot;.&quot; + major[-1]</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineminus">-  if len(parts) &gt; 1 and parts[1].isdigit():</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineminus">-    parts[1] = str(int(parts[1]) + MINOR_ADD)</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineminus">-  return re.sub(r'.0([ab][0-9]*|)$', r'\1', '.'.join(parts))</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineminus">-</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineminus">-print(makeversion(sys.argv[1]))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1">deleted file mode 100644</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/lightning/content/lightning.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/lightning/content/lightning.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -130,17 +130,17 @@ pref(&quot;calendar.threading.disabled&quot;, fals</span>
<a href="#l5.4"></a><span id="l5.4"> // The maximum time in microseconds that a cal.iterate.forEach event can take (soft limit).</span>
<a href="#l5.5"></a><span id="l5.5"> pref(&quot;calendar.threading.latency &quot;, 250);</span>
<a href="#l5.6"></a><span id="l5.6"> </span>
<a href="#l5.7"></a><span id="l5.7"> // Enable support for multiple realms on one server with the payoff that you</span>
<a href="#l5.8"></a><span id="l5.8"> // will get multiple password dialogs (one for each calendar)</span>
<a href="#l5.9"></a><span id="l5.9"> pref(&quot;calendar.network.multirealm&quot;, false);</span>
<a href="#l5.10"></a><span id="l5.10"> </span>
<a href="#l5.11"></a><span id="l5.11"> // Set up user agent</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-#expand pref(&quot;calendar.useragent.extra&quot;, &quot;Lightning/__LIGHTNING_VERSION__&quot;);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+#expand pref(&quot;calendar.useragent.extra&quot;, &quot;Lightning/__THUNDERBIRD_VERSION_DISPLAY__&quot;);</span>
<a href="#l5.14"></a><span id="l5.14"> </span>
<a href="#l5.15"></a><span id="l5.15"> // Disable use of system colors in minimonth and calendar views</span>
<a href="#l5.16"></a><span id="l5.16"> pref(&quot;calendar.view.useSystemColors&quot;, false);</span>
<a href="#l5.17"></a><span id="l5.17"> </span>
<a href="#l5.18"></a><span id="l5.18"> // Disable hiding the label on todayPane button</span>
<a href="#l5.19"></a><span id="l5.19"> pref(&quot;calendar.view.showTodayPaneStatusLabel&quot;, true);</span>
<a href="#l5.20"></a><span id="l5.20"> </span>
<a href="#l5.21"></a><span id="l5.21"> // Maximum number of iterations allowed when searching for the next matching</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1">deleted file mode 100644</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineminus">--- a/calendar/lightning/install.rdf</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineplus">+++ /dev/null</span>
<a href="#l6.4"></a><span id="l6.4" class="difflineat">@@ -1,1 +0,0 @@</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineminus">-This file exists as a placeholder until https://bugzilla.mozilla.org/show_bug.cgi?id=1472123 is fixed.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1">deleted file mode 100644</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineminus">--- a/calendar/lightning/lightning-packager.mk</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineplus">+++ /dev/null</span>
<a href="#l7.4"></a><span id="l7.4" class="difflineat">@@ -1,195 +0,0 @@</span>
<a href="#l7.5"></a><span id="l7.5" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l7.6"></a><span id="l7.6" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l7.7"></a><span id="l7.7" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l7.8"></a><span id="l7.8" class="difflineminus">-</span>
<a href="#l7.9"></a><span id="l7.9" class="difflineminus">-# NOTE: The packager is not only used in calendar/lightning but should be</span>
<a href="#l7.10"></a><span id="l7.10" class="difflineminus">-# general enough to be able to repackage other sub-extensions like</span>
<a href="#l7.11"></a><span id="l7.11" class="difflineminus">-# calendar/providers/gdata. This means no lightning-specific files, no version</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-# numbers directly from lightning and be careful with relative paths.</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineminus">-# This packager can be used to repackage extensions. To use it, set the</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineminus">-# following variables in your Makefile, then include this file.</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineminus">-#   XPI_NAME = lightning # The extension path name</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineminus">-#   XPI_PKGNAME = lightning-2.2.en-US.mac # The extension package name</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineminus">-#   XPI_VERSION = 2.2 # The extension version</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineminus">-#</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineminus">-# For the upload target to work, you also need to set:</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineminus">-#   LIGHTNING_VERSION = 2.2  # Will be used to replace the Thunderbird version</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineminus">-#   						 # in POST_UPLOAD_CMD</span>
<a href="#l7.23"></a><span id="l7.23" class="difflineminus">-</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineminus">-include $(moztopsrcdir)/toolkit/mozapps/installer/package-name.mk</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineminus">-</span>
<a href="#l7.26"></a><span id="l7.26" class="difflineminus">-XPI_STAGE_PATH = $(DIST)/xpi-stage</span>
<a href="#l7.27"></a><span id="l7.27" class="difflineminus">-_ABS_XPI_STAGE_PATH = $(ABS_DIST)/xpi-stage</span>
<a href="#l7.28"></a><span id="l7.28" class="difflineminus">-ENUS_PKGNAME=$(subst .$(AB_CD),.en-US,$(XPI_PKGNAME))</span>
<a href="#l7.29"></a><span id="l7.29" class="difflineminus">-XPI_ZIP_IN=$(_ABS_XPI_STAGE_PATH)/$(ENUS_PKGNAME).xpi</span>
<a href="#l7.30"></a><span id="l7.30" class="difflineminus">-</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineminus">-# This variable is to allow the wget-en-US target to know which ftp server to download from</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineminus">-ifndef EN_US_BINARY_URL</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineminus">-ifdef DOWNLOAD_HOST</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineminus">-# If this url is missing, and DOWNLOAD_HOST is defined its probably the release</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineminus">-# run where we can't influence the download location. Fake it from the env vars</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineminus">-# we have</span>
<a href="#l7.38"></a><span id="l7.38" class="difflineminus">-BUILD_NR=$(shell echo $(POST_UPLOAD_CMD) | sed -n -e 's/.*-n \([0-9]*\).*/\1/p')</span>
<a href="#l7.39"></a><span id="l7.39" class="difflineminus">-CANDIDATE_NR=$(if $(LIGHTNING_VERSION),$(LIGHTNING_VERSION),$(XPI_VERSION))</span>
<a href="#l7.40"></a><span id="l7.40" class="difflineminus">-EN_US_BINARY_URL=http://$(DOWNLOAD_HOST)/pub/calendar/lightning/candidates/$(CANDIDATE_NR)-candidates/build$(BUILD_NR)/$(MOZ_PKG_PLATFORM)</span>
<a href="#l7.41"></a><span id="l7.41" class="difflineminus">-endif</span>
<a href="#l7.42"></a><span id="l7.42" class="difflineminus">-endif</span>
<a href="#l7.43"></a><span id="l7.43" class="difflineminus">-</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineminus">-# Check if EN_US_BINARY_URL has finally been set</span>
<a href="#l7.45"></a><span id="l7.45" class="difflineminus">-ifdef EN_US_BINARY_URL</span>
<a href="#l7.46"></a><span id="l7.46" class="difflineminus">-# If so, we are expected to unpack when the language pack is created</span>
<a href="#l7.47"></a><span id="l7.47" class="difflineminus">-ensure-stage-dir: wget-en-US unpack</span>
<a href="#l7.48"></a><span id="l7.48" class="difflineminus">-else</span>
<a href="#l7.49"></a><span id="l7.49" class="difflineminus">-# If not, use the existing lightning from xpi-stage, or warn that the var is not set.</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineminus">-ensure-stage-dir:</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineminus">-ifeq (,$(wildcard $(XPI_STAGE_PATH)/$(XPI_NAME)/))</span>
<a href="#l7.52"></a><span id="l7.52" class="difflineminus">-	$(error You must set EN_US_BINARY_URL)</span>
<a href="#l7.53"></a><span id="l7.53" class="difflineminus">-endif</span>
<a href="#l7.54"></a><span id="l7.54" class="difflineminus">-endif</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineminus">-</span>
<a href="#l7.56"></a><span id="l7.56" class="difflineminus">-$(XPI_STAGE_PATH):</span>
<a href="#l7.57"></a><span id="l7.57" class="difflineminus">-	mkdir -p $@</span>
<a href="#l7.58"></a><span id="l7.58" class="difflineminus">-</span>
<a href="#l7.59"></a><span id="l7.59" class="difflineminus">-$(XPI_ZIP_IN): ensure-stage-dir</span>
<a href="#l7.60"></a><span id="l7.60" class="difflineminus">-</span>
<a href="#l7.61"></a><span id="l7.61" class="difflineminus">-# Target Directory used for the l10n files</span>
<a href="#l7.62"></a><span id="l7.62" class="difflineminus">-L10N_TARGET = $(XPI_STAGE_PATH)/$(XPI_NAME)-$(AB_CD)</span>
<a href="#l7.63"></a><span id="l7.63" class="difflineminus">-</span>
<a href="#l7.64"></a><span id="l7.64" class="difflineminus">-# function print_ltnconfig(section,configname)</span>
<a href="#l7.65"></a><span id="l7.65" class="difflineminus">-print_ltnconfig = $(shell $(PYTHON) $(moztopsrcdir)/config/printconfigsetting.py $(XPI_STAGE_PATH)/$(XPI_NAME)/app.ini $1 $2)</span>
<a href="#l7.66"></a><span id="l7.66" class="difflineminus">-</span>
<a href="#l7.67"></a><span id="l7.67" class="difflineminus">-wget-en-US:</span>
<a href="#l7.68"></a><span id="l7.68" class="difflineminus">-ifeq (thunderbird,$(MOZ_APP_NAME))</span>
<a href="#l7.69"></a><span id="l7.69" class="difflineminus">-FINAL_BINARY_URL = $(subst thunderbird,calendar/lightning,$(EN_US_BINARY_URL))</span>
<a href="#l7.70"></a><span id="l7.70" class="difflineminus">-else</span>
<a href="#l7.71"></a><span id="l7.71" class="difflineminus">-FINAL_BINARY_URL = $(subst seamonkey,calendar/lightning,$(subst latest-comm-central-trunk,latest-comm-central,$(EN_US_BINARY_URL)))</span>
<a href="#l7.72"></a><span id="l7.72" class="difflineminus">-endif</span>
<a href="#l7.73"></a><span id="l7.73" class="difflineminus">-wget-en-US: $(XPI_STAGE_PATH)</span>
<a href="#l7.74"></a><span id="l7.74" class="difflineminus">-	(cd $(XPI_STAGE_PATH) &amp;&amp; $(WGET) -nv -N $(FINAL_BINARY_URL)/$(ENUS_PKGNAME).xpi)</span>
<a href="#l7.75"></a><span id="l7.75" class="difflineminus">-	@echo &quot;Downloaded $(FINAL_BINARY_URL)/$(ENUS_PKGNAME) to $(XPI_ZIP_IN)&quot;</span>
<a href="#l7.76"></a><span id="l7.76" class="difflineminus">-</span>
<a href="#l7.77"></a><span id="l7.77" class="difflineminus">-</span>
<a href="#l7.78"></a><span id="l7.78" class="difflineminus">-# We're unpacking directly into FINAL_TARGET, this keeps code to do manual</span>
<a href="#l7.79"></a><span id="l7.79" class="difflineminus">-# repacks cleaner.</span>
<a href="#l7.80"></a><span id="l7.80" class="difflineminus">-unpack: $(XPI_ZIP_IN)</span>
<a href="#l7.81"></a><span id="l7.81" class="difflineminus">-	if test -d $(XPI_STAGE_PATH)/$(XPI_NAME); then \</span>
<a href="#l7.82"></a><span id="l7.82" class="difflineminus">-	  $(RM) -r -v $(XPI_STAGE_PATH)/$(XPI_NAME); \</span>
<a href="#l7.83"></a><span id="l7.83" class="difflineminus">-	fi</span>
<a href="#l7.84"></a><span id="l7.84" class="difflineminus">-	$(NSINSTALL) -D $(XPI_STAGE_PATH)/$(XPI_NAME)</span>
<a href="#l7.85"></a><span id="l7.85" class="difflineminus">-	cd $(XPI_STAGE_PATH)/$(XPI_NAME) &amp;&amp; $(UNZIP) $(XPI_ZIP_IN)</span>
<a href="#l7.86"></a><span id="l7.86" class="difflineminus">-	@echo done unpacking</span>
<a href="#l7.87"></a><span id="l7.87" class="difflineminus">-</span>
<a href="#l7.88"></a><span id="l7.88" class="difflineminus">-# Nothing to package for en-US, its just the usual english xpi</span>
<a href="#l7.89"></a><span id="l7.89" class="difflineminus">-langpack-en-US:</span>
<a href="#l7.90"></a><span id="l7.90" class="difflineminus">-	@echo &quot;Skipping $@ as en-US is the default&quot;</span>
<a href="#l7.91"></a><span id="l7.91" class="difflineminus">-</span>
<a href="#l7.92"></a><span id="l7.92" class="difflineminus">-merge-%: AB_CD=$*</span>
<a href="#l7.93"></a><span id="l7.93" class="difflineminus">-merge-%:</span>
<a href="#l7.94"></a><span id="l7.94" class="difflineminus">-	$(RM) -rf $(REAL_LOCALE_MERGEDIR)/calendar</span>
<a href="#l7.95"></a><span id="l7.95" class="difflineminus">-	-$(moztopsrcdir)/mach compare-locales \</span>
<a href="#l7.96"></a><span id="l7.96" class="difflineminus">-	    --merge $(REAL_LOCALE_MERGEDIR)/.. \</span>
<a href="#l7.97"></a><span id="l7.97" class="difflineminus">-	    $(commtopsrcdir)/calendar/locales/l10n.toml \</span>
<a href="#l7.98"></a><span id="l7.98" class="difflineminus">-	    $(L10NBASEDIR) \</span>
<a href="#l7.99"></a><span id="l7.99" class="difflineminus">-	    $*</span>
<a href="#l7.100"></a><span id="l7.100" class="difflineminus">-</span>
<a href="#l7.101"></a><span id="l7.101" class="difflineminus">-	# This file requires a bugfix with string changes, see bug 1154448</span>
<a href="#l7.102"></a><span id="l7.102" class="difflineminus">-	[ -f $(L10NBASEDIR)/$*/calendar/chrome/calendar/calendar-extract.properties ] &amp;&amp; \</span>
<a href="#l7.103"></a><span id="l7.103" class="difflineminus">-	  $(RM) $(REAL_LOCALE_MERGEDIR)/calendar/chrome/calendar/calendar-extract.properties \</span>
<a href="#l7.104"></a><span id="l7.104" class="difflineminus">-	  || true</span>
<a href="#l7.105"></a><span id="l7.105" class="difflineminus">-</span>
<a href="#l7.106"></a><span id="l7.106" class="difflineminus">-# Calling these targets with prerequisites causes the libs and subsequent</span>
<a href="#l7.107"></a><span id="l7.107" class="difflineminus">-# targets to be switched in order due to some make voodoo. Therefore we call</span>
<a href="#l7.108"></a><span id="l7.108" class="difflineminus">-# the targets explicitly, which seems to work better. Also, the</span>
<a href="#l7.109"></a><span id="l7.109" class="difflineminus">-# target-specific variable are not expanded for dependent targets.</span>
<a href="#l7.110"></a><span id="l7.110" class="difflineminus">-langpack-%: L10N_XPI_NAME=$(XPI_NAME)-$*</span>
<a href="#l7.111"></a><span id="l7.111" class="difflineminus">-langpack-%: L10N_XPI_PKGNAME=$(subst $(AB_CD),$*,$(XPI_PKGNAME))</span>
<a href="#l7.112"></a><span id="l7.112" class="difflineminus">-langpack-%: AB_CD=$*</span>
<a href="#l7.113"></a><span id="l7.113" class="difflineminus">-langpack-%:</span>
<a href="#l7.114"></a><span id="l7.114" class="difflineminus">-	$(MAKE) AB_CD=$(AB_CD) ensure-stage-dir</span>
<a href="#l7.115"></a><span id="l7.115" class="difflineminus">-	$(MAKE) L10N_XPI_NAME=$(L10N_XPI_NAME) L10N_XPI_PKGNAME=$(L10N_XPI_PKGNAME) AB_CD=$(AB_CD) \</span>
<a href="#l7.116"></a><span id="l7.116" class="difflineminus">-	  recreate-platformini repack-stage repack-process-extrafiles libs-$(AB_CD)</span>
<a href="#l7.117"></a><span id="l7.117" class="difflineminus">-	@echo &quot;Done packaging $(L10N_XPI_PKGNAME).xpi&quot;</span>
<a href="#l7.118"></a><span id="l7.118" class="difflineminus">-</span>
<a href="#l7.119"></a><span id="l7.119" class="difflineminus">-clobber-%: AB_CD=$*</span>
<a href="#l7.120"></a><span id="l7.120" class="difflineminus">-clobber-%:</span>
<a href="#l7.121"></a><span id="l7.121" class="difflineminus">-	$(RM) -r $(L10N_TARGET)</span>
<a href="#l7.122"></a><span id="l7.122" class="difflineminus">-</span>
<a href="#l7.123"></a><span id="l7.123" class="difflineminus">-repackage-zip-%:</span>
<a href="#l7.124"></a><span id="l7.124" class="difflineminus">-	@echo &quot;Already repackaged zip for $* in langpack step&quot;</span>
<a href="#l7.125"></a><span id="l7.125" class="difflineminus">-</span>
<a href="#l7.126"></a><span id="l7.126" class="difflineminus">-repack-stage:</span>
<a href="#l7.127"></a><span id="l7.127" class="difflineminus">-	@echo &quot;Repackaging $(XPI_PKGNAME) locale for Language $(AB_CD)&quot;</span>
<a href="#l7.128"></a><span id="l7.128" class="difflineminus">-	$(RM) -rf $(L10N_TARGET)</span>
<a href="#l7.129"></a><span id="l7.129" class="difflineminus">-	cp -R $(XPI_STAGE_PATH)/$(XPI_NAME) $(L10N_TARGET)</span>
<a href="#l7.130"></a><span id="l7.130" class="difflineminus">-	grep -v '^locale [a-z\-]\+ en-US' $(L10N_TARGET)/chrome.manifest &gt; $(L10N_TARGET)/chrome.manifest~ &amp;&amp; \</span>
<a href="#l7.131"></a><span id="l7.131" class="difflineminus">-	  mv $(L10N_TARGET)/chrome.manifest~ $(L10N_TARGET)/chrome.manifest</span>
<a href="#l7.132"></a><span id="l7.132" class="difflineminus">-	find $(abspath $(L10N_TARGET)) -name '*en-US*' -print0 | xargs -0 rm -rf</span>
<a href="#l7.133"></a><span id="l7.133" class="difflineminus">-</span>
<a href="#l7.134"></a><span id="l7.134" class="difflineminus">-</span>
<a href="#l7.135"></a><span id="l7.135" class="difflineminus">-# Actual locale packaging targets. If L10N_XPI_NAME is set, then use it.</span>
<a href="#l7.136"></a><span id="l7.136" class="difflineminus">-# Otherwise keep the original XPI_NAME</span>
<a href="#l7.137"></a><span id="l7.137" class="difflineminus">-# Overriding the final target is a bit of a hack for universal builds</span>
<a href="#l7.138"></a><span id="l7.138" class="difflineminus">-# so that we can ensure we get the right xpi that gets repacked.</span>
<a href="#l7.139"></a><span id="l7.139" class="difflineminus">-libs-%: FINAL_XPI_NAME=$(if $(L10N_XPI_NAME),$(L10N_XPI_NAME),$(XPI_NAME))</span>
<a href="#l7.140"></a><span id="l7.140" class="difflineminus">-libs-%: FINAL_XPI_PKGNAME=$(if $(L10N_XPI_PKGNAME),$(L10N_XPI_PKGNAME),$(XPI_PKGNAME))</span>
<a href="#l7.141"></a><span id="l7.141" class="difflineminus">-libs-%: AB_CD=$*</span>
<a href="#l7.142"></a><span id="l7.142" class="difflineminus">-libs-%:</span>
<a href="#l7.143"></a><span id="l7.143" class="difflineminus">-	@$(MAKE) merge-$*</span>
<a href="#l7.144"></a><span id="l7.144" class="difflineminus">-	$(MAKE) -C locales libs AB_CD=$* FINAL_TARGET=$(ABS_DIST)/xpi-stage/$(FINAL_XPI_NAME) \</span>
<a href="#l7.145"></a><span id="l7.145" class="difflineminus">-	  XPI_NAME=$(FINAL_XPI_NAME) XPI_PKGNAME=$(FINAL_XPI_PKGNAME) USE_EXTENSION_MANIFEST=1</span>
<a href="#l7.146"></a><span id="l7.146" class="difflineminus">-	$(MAKE) -C locales tools AB_CD=$* FINAL_TARGET=$(ABS_DIST)/xpi-stage/$(FINAL_XPI_NAME) \</span>
<a href="#l7.147"></a><span id="l7.147" class="difflineminus">-	  XPI_NAME=$(FINAL_XPI_NAME) XPI_PKGNAME=$(FINAL_XPI_PKGNAME) USE_EXTENSION_MANIFEST=1</span>
<a href="#l7.148"></a><span id="l7.148" class="difflineminus">-</span>
<a href="#l7.149"></a><span id="l7.149" class="difflineminus">-# The calling makefile might need to process some extra files. Provide an empty</span>
<a href="#l7.150"></a><span id="l7.150" class="difflineminus">-# rule to overwrite</span>
<a href="#l7.151"></a><span id="l7.151" class="difflineminus">-repack-process-extrafiles:</span>
<a href="#l7.152"></a><span id="l7.152" class="difflineminus">-</span>
<a href="#l7.153"></a><span id="l7.153" class="difflineminus">-# When repackaging Lightning from the builder, platform.ini is not yet created.</span>
<a href="#l7.154"></a><span id="l7.154" class="difflineminus">-# Recreate it from the app.ini bundled with the downloaded xpi.</span>
<a href="#l7.155"></a><span id="l7.155" class="difflineminus">-$(DIST)/bin/platform.ini:</span>
<a href="#l7.156"></a><span id="l7.156" class="difflineminus">-	mkdir -p $(@D)</span>
<a href="#l7.157"></a><span id="l7.157" class="difflineminus">-	echo &quot;[Build]&quot; &gt;&gt; $(DIST)/bin/platform.ini</span>
<a href="#l7.158"></a><span id="l7.158" class="difflineminus">-	echo &quot;Milestone=$(call print_ltnconfig,Gecko,MaxVersion)&quot; &gt;&gt; $(DIST)/bin/platform.ini</span>
<a href="#l7.159"></a><span id="l7.159" class="difflineminus">-	echo &quot;SourceStamp=$(call print_ltnconfig,Build,SourceStamp)&quot; &gt;&gt; $(DIST)/bin/platform.ini</span>
<a href="#l7.160"></a><span id="l7.160" class="difflineminus">-	echo &quot;SourceRepository=$(call print_ltnconfig,Build,SourceRepository)&quot; &gt;&gt; $(DIST)/bin/platform.ini</span>
<a href="#l7.161"></a><span id="l7.161" class="difflineminus">-	echo &quot;BuildID=$(call print_ltnconfig,App,BuildID)&quot; &gt;&gt; $(DIST)/bin/platform.ini</span>
<a href="#l7.162"></a><span id="l7.162" class="difflineminus">-</span>
<a href="#l7.163"></a><span id="l7.163" class="difflineminus">-recreate-platformini: $(DIST)/bin/platform.ini</span>
<a href="#l7.164"></a><span id="l7.164" class="difflineminus">-</span>
<a href="#l7.165"></a><span id="l7.165" class="difflineminus">-</span>
<a href="#l7.166"></a><span id="l7.166" class="difflineminus">-# Lightning uses Thunderbird's build machinery, so we need to hack the post</span>
<a href="#l7.167"></a><span id="l7.167" class="difflineminus">-# upload command to use Lightning's directories and version.</span>
<a href="#l7.168"></a><span id="l7.168" class="difflineminus">-upload: upload-$(AB_CD)</span>
<a href="#l7.169"></a><span id="l7.169" class="difflineminus">-</span>
<a href="#l7.170"></a><span id="l7.170" class="difflineminus">-upload-%: AB_CD=$*</span>
<a href="#l7.171"></a><span id="l7.171" class="difflineminus">-upload-%: LTN_UPLOAD_CMD := $(patsubst $(THUNDERBIRD_VERSION)%,$(LIGHTNING_VERSION),$(subst thunderbird,calendar/lightning,$(POST_UPLOAD_CMD)))</span>
<a href="#l7.172"></a><span id="l7.172" class="difflineminus">-upload-%: stage-upload-%</span>
<a href="#l7.173"></a><span id="l7.173" class="difflineminus">-	POST_UPLOAD_CMD=&quot;$(LTN_UPLOAD_CMD)&quot; \</span>
<a href="#l7.174"></a><span id="l7.174" class="difflineminus">-	  $(PYTHON) $(moztopsrcdir)/build/upload.py --base-path $(DIST) \</span>
<a href="#l7.175"></a><span id="l7.175" class="difflineminus">-	  --properties-file $(DIST)/$(XPI_NAME)_build_properties.json \</span>
<a href="#l7.176"></a><span id="l7.176" class="difflineminus">-	  &quot;$(DIST)/$(MOZ_PKG_PLATFORM)/$(XPI_PKGNAME).xpi&quot;</span>
<a href="#l7.177"></a><span id="l7.177" class="difflineminus">-</span>
<a href="#l7.178"></a><span id="l7.178" class="difflineminus">-stage-upload-%: AB_CD=$*</span>
<a href="#l7.179"></a><span id="l7.179" class="difflineminus">-stage-upload-%:</span>
<a href="#l7.180"></a><span id="l7.180" class="difflineminus">-	$(NSINSTALL) -D $(DIST)/$(MOZ_PKG_PLATFORM)</span>
<a href="#l7.181"></a><span id="l7.181" class="difflineminus">-	$(call install_cmd,$(IFLAGS1) $(XPI_STAGE_PATH)/$(XPI_PKGNAME).xpi $(DIST)/$(MOZ_PKG_PLATFORM))</span>
<a href="#l7.182"></a><span id="l7.182" class="difflineminus">-</span>
<a href="#l7.183"></a><span id="l7.183" class="difflineminus">-ifdef XPI_INSTALL_EXTENSION</span>
<a href="#l7.184"></a><span id="l7.184" class="difflineminus">-ifndef XPI_NAME</span>
<a href="#l7.185"></a><span id="l7.185" class="difflineminus">-$(error XPI_NAME must be set for XPI_INSTALL_EXTENSION)</span>
<a href="#l7.186"></a><span id="l7.186" class="difflineminus">-endif</span>
<a href="#l7.187"></a><span id="l7.187" class="difflineminus">-tools::</span>
<a href="#l7.188"></a><span id="l7.188" class="difflineminus">-	$(RM) -r '$(DIST)/bin$(DIST_SUBDIR:%=/%)/extensions/$(XPI_INSTALL_EXTENSION)'</span>
<a href="#l7.189"></a><span id="l7.189" class="difflineminus">-	$(NSINSTALL) -D '$(DIST)/bin$(DIST_SUBDIR:%=/%)/extensions/$(XPI_INSTALL_EXTENSION)'</span>
<a href="#l7.190"></a><span id="l7.190" class="difflineminus">-	$(call copy_dir,$(FINAL_TARGET),$(DIST)/bin$(DIST_SUBDIR:%=/%)/extensions/$(XPI_INSTALL_EXTENSION))</span>
<a href="#l7.191"></a><span id="l7.191" class="difflineminus">-</span>
<a href="#l7.192"></a><span id="l7.192" class="difflineminus">-ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))</span>
<a href="#l7.193"></a><span id="l7.193" class="difflineminus">-# If the macbundle dist dir was already created, sync the xpi here to avoid</span>
<a href="#l7.194"></a><span id="l7.194" class="difflineminus">-# the need to make -C objdir/mail/app each time</span>
<a href="#l7.195"></a><span id="l7.195" class="difflineminus">-tools::</span>
<a href="#l7.196"></a><span id="l7.196" class="difflineminus">-	[ -d $(DIST)/$(MOZ_MACBUNDLE_NAME) ] &amp;&amp; rsync -aL $(FINAL_TARGET)/ $(DIST)/$(MOZ_MACBUNDLE_NAME)/Contents/Resources/extensions/$(XPI_INSTALL_EXTENSION) || true</span>
<a href="#l7.197"></a><span id="l7.197" class="difflineminus">-endif</span>
<a href="#l7.198"></a><span id="l7.198" class="difflineminus">-</span>
<a href="#l7.199"></a><span id="l7.199" class="difflineminus">-endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">deleted file mode 100644</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineminus">--- a/calendar/lightning/lightning-tests.mk</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineplus">+++ /dev/null</span>
<a href="#l8.4"></a><span id="l8.4" class="difflineat">@@ -1,16 +0,0 @@</span>
<a href="#l8.5"></a><span id="l8.5" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l8.6"></a><span id="l8.6" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l8.7"></a><span id="l8.7" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l8.8"></a><span id="l8.8" class="difflineminus">-</span>
<a href="#l8.9"></a><span id="l8.9" class="difflineminus">-PKG_STAGE = $(DIST)/test-stage</span>
<a href="#l8.10"></a><span id="l8.10" class="difflineminus">-</span>
<a href="#l8.11"></a><span id="l8.11" class="difflineminus">-# This is the target that should be called externally</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-stage-package: stage-mozmill</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineminus">-# stage mozmill tests and shared modules. Cross your fingers that there are no</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">-# name conflicts between calendar/ and mail/</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineminus">-stage-mozmill:</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineminus">-	$(NSINSTALL) -D $(PKG_STAGE)/mozmill/shared-modules</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineminus">-	(cd $(commtopsrcdir)/calendar/test/mozmill &amp;&amp; tar $(TAR_CREATE_FLAGS) - `cat $(commtopsrcdir)/calendar/test/mozmill/mozmilltests.list`) | (cd $(PKG_STAGE)/mozmill &amp;&amp; tar -xf -)</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineminus">-	(cd $(commtopsrcdir)/calendar/test/mozmill/shared-modules &amp;&amp; tar $(TAR_CREATE_FLAGS) - *) | (cd $(PKG_STAGE)/mozmill/shared-modules &amp;&amp; tar -xf -)</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineminus">-	$(call py_action,buildlist,$(PKG_STAGE)/mozmill/mozmilltests.list $(shell cat $(commtopsrcdir)/calendar/test/mozmill/mozmilltests.list))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/lightning/manifest.json</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/lightning/manifest.json</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -2,17 +2,17 @@</span>
<a href="#l9.4"></a><span id="l9.4"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l9.5"></a><span id="l9.5"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l9.6"></a><span id="l9.6"> #</span>
<a href="#l9.7"></a><span id="l9.7"> #filter substitution</span>
<a href="#l9.8"></a><span id="l9.8"> {</span>
<a href="#l9.9"></a><span id="l9.9">   &quot;manifest_version&quot;: 2,</span>
<a href="#l9.10"></a><span id="l9.10">   &quot;name&quot;: &quot;Lightning&quot;,</span>
<a href="#l9.11"></a><span id="l9.11">   &quot;description&quot;: &quot;Integrated Calendaring &amp; Scheduling for your Email client&quot;,</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-  &quot;version&quot;: &quot;@LIGHTNING_VERSION@&quot;,</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+  &quot;version&quot;: &quot;@THUNDERBIRD_VERSION_DISPLAY@&quot;,</span>
<a href="#l9.14"></a><span id="l9.14">   &quot;author&quot;: &quot;Mozilla Calendar Project&quot;,</span>
<a href="#l9.15"></a><span id="l9.15">   &quot;homepage_url&quot;: &quot;https://www.mozilla.org/projects/calendar/&quot;,</span>
<a href="#l9.16"></a><span id="l9.16">   &quot;legacy&quot;: true,</span>
<a href="#l9.17"></a><span id="l9.17">   &quot;applications&quot;: {</span>
<a href="#l9.18"></a><span id="l9.18">     &quot;gecko&quot;: {</span>
<a href="#l9.19"></a><span id="l9.19">       &quot;id&quot;: &quot;{e2fda1a4-762b-4020-b5ad-a41df1933103}&quot;,</span>
<a href="#l9.20"></a><span id="l9.20">       &quot;strict_min_version&quot;: &quot;@THUNDERBIRD_VERSION@&quot;,</span>
<a href="#l9.21"></a><span id="l9.21">       &quot;strict_max_version&quot;: &quot;@THUNDERBIRD_MAXVERSION@&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/calendar/lightning/moz.build</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/calendar/lightning/moz.build</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -11,33 +11,31 @@ DIRS += [</span>
<a href="#l10.4"></a><span id="l10.4">     '../itip',</span>
<a href="#l10.5"></a><span id="l10.5">     'components',</span>
<a href="#l10.6"></a><span id="l10.6">     '../locales',</span>
<a href="#l10.7"></a><span id="l10.7">     'modules',</span>
<a href="#l10.8"></a><span id="l10.8"> ]</span>
<a href="#l10.9"></a><span id="l10.9"> </span>
<a href="#l10.10"></a><span id="l10.10"> TEST_DIRS += ['../test']</span>
<a href="#l10.11"></a><span id="l10.11"> </span>
<a href="#l10.12"></a><span id="l10.12" class="difflineplus">+version_parts = CONFIG['MOZ_APP_VERSION'].split('.')</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+major_version = version_parts[0]</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineplus">+DEFINES['THUNDERBIRD_MAXVERSION'] = major_version + '.*'</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineplus">+</span>
<a href="#l10.16"></a><span id="l10.16"> if CONFIG['MOZ_ARTIFACT_BUILDS']:</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineminus">-    version_parts = CONFIG['MOZ_APP_VERSION'].split('.')</span>
<a href="#l10.18"></a><span id="l10.18" class="difflineminus">-    major_version = version_parts[0]</span>
<a href="#l10.19"></a><span id="l10.19" class="difflineminus">-    DEFINES['THUNDERBIRD_MAXVERSION'] = major_version + '.*'</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineminus">-    DEFINES['LIGHTNING_VERSION'] = CONFIG['THUNDERBIRD_VERSION_DISPLAY']</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineminus">-</span>
<a href="#l10.22"></a><span id="l10.22">     XPI_NAME = 'lightning'</span>
<a href="#l10.23"></a><span id="l10.23">     export('XPI_NAME')</span>
<a href="#l10.24"></a><span id="l10.24"> else:</span>
<a href="#l10.25"></a><span id="l10.25">     if CONFIG['NIGHTLY_BUILD']:</span>
<a href="#l10.26"></a><span id="l10.26">         DIST_SUBDIR = 'extensions/{e2fda1a4-762b-4020-b5ad-a41df1933103}'</span>
<a href="#l10.27"></a><span id="l10.27">     else:</span>
<a href="#l10.28"></a><span id="l10.28">         DIST_SUBDIR = 'distribution/extensions/{e2fda1a4-762b-4020-b5ad-a41df1933103}'</span>
<a href="#l10.29"></a><span id="l10.29">     export('DIST_SUBDIR')</span>
<a href="#l10.30"></a><span id="l10.30"> </span>
<a href="#l10.31"></a><span id="l10.31"> FINAL_TARGET_PP_FILES += [</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineminus">-    'app.ini',</span>
<a href="#l10.33"></a><span id="l10.33">     'manifest.json',</span>
<a href="#l10.34"></a><span id="l10.34"> ]</span>
<a href="#l10.35"></a><span id="l10.35"> </span>
<a href="#l10.36"></a><span id="l10.36"> JAR_MANIFESTS += ['jar.mn']</span>
<a href="#l10.37"></a><span id="l10.37"> </span>
<a href="#l10.38"></a><span id="l10.38"> USE_EXTENSION_MANIFEST = True</span>
<a href="#l10.39"></a><span id="l10.39"> export('USE_EXTENSION_MANIFEST')</span>
<a href="#l10.40"></a><span id="l10.40"> </span>
<a href="#l10.41"></a><span id="l10.41" class="difflineat">@@ -47,27 +45,17 @@ elif CONFIG['MOZ_WIDGET_TOOLKIT'] == 'co</span>
<a href="#l10.42"></a><span id="l10.42">     DEFINES['THEME'] = 'osx'</span>
<a href="#l10.43"></a><span id="l10.43"> else:</span>
<a href="#l10.44"></a><span id="l10.44">     DEFINES['THEME'] = 'linux'</span>
<a href="#l10.45"></a><span id="l10.45"> </span>
<a href="#l10.46"></a><span id="l10.46"> JS_PREFERENCE_PP_FILES += [</span>
<a href="#l10.47"></a><span id="l10.47">     'content/lightning.js',</span>
<a href="#l10.48"></a><span id="l10.48"> ]</span>
<a href="#l10.49"></a><span id="l10.49"> </span>
<a href="#l10.50"></a><span id="l10.50" class="difflineminus">-FINAL_TARGET_FILES += [</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineminus">-    'install.rdf',</span>
<a href="#l10.52"></a><span id="l10.52" class="difflineminus">-]</span>
<a href="#l10.53"></a><span id="l10.53" class="difflineminus">-</span>
<a href="#l10.54"></a><span id="l10.54"> FINAL_TARGET_FILES.timezones += [</span>
<a href="#l10.55"></a><span id="l10.55">     '../timezones/zones.json',</span>
<a href="#l10.56"></a><span id="l10.56"> ]</span>
<a href="#l10.57"></a><span id="l10.57"> </span>
<a href="#l10.58"></a><span id="l10.58"> with Files('**'):</span>
<a href="#l10.59"></a><span id="l10.59">     BUG_COMPONENT = ('Calendar', 'Lightning Only')</span>
<a href="#l10.60"></a><span id="l10.60"> </span>
<a href="#l10.61"></a><span id="l10.61"> with Files('content/suite-*'):</span>
<a href="#l10.62"></a><span id="l10.62">     BUG_COMPONENT = ('Calendar', 'Lightning: SeaMonkey Integration')</span>
<a href="#l10.63"></a><span id="l10.63" class="difflineminus">-</span>
<a href="#l10.64"></a><span id="l10.64" class="difflineminus">-with Files('build/**'):</span>
<a href="#l10.65"></a><span id="l10.65" class="difflineminus">-    BUG_COMPONENT = ('Calendar', 'Build Config')</span>
<a href="#l10.66"></a><span id="l10.66" class="difflineminus">-</span>
<a href="#l10.67"></a><span id="l10.67" class="difflineminus">-with Files('app.ini'):</span>
<a href="#l10.68"></a><span id="l10.68" class="difflineminus">-    BUG_COMPONENT = ('Calendar', 'Build Config')</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">deleted file mode 100644</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineminus">--- a/calendar/lightning/versions.mk</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineplus">+++ /dev/null</span>
<a href="#l11.4"></a><span id="l11.4" class="difflineat">@@ -1,28 +0,0 @@</span>
<a href="#l11.5"></a><span id="l11.5" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l11.6"></a><span id="l11.6" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l11.7"></a><span id="l11.7" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l11.8"></a><span id="l11.8" class="difflineminus">-</span>
<a href="#l11.9"></a><span id="l11.9" class="difflineminus">-# Lighting version number</span>
<a href="#l11.10"></a><span id="l11.10" class="difflineminus">-THUNDERBIRD_VERSION := $(shell cat $(commtopsrcdir)/mail/config/version.txt)</span>
<a href="#l11.11"></a><span id="l11.11" class="difflineminus">-SEAMONKEY_VERSION := $(shell cat $(commtopsrcdir)/suite/config/version.txt)</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineminus">-ifdef MOZ_SUITE</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineminus">-LIGHTNING_VERSION := $(shell $(PYTHON) $(commtopsrcdir)/calendar/lightning/build/makeversion.py $(THUNDERBIRD_VERSION))</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineminus">-else</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineminus">-LIGHTNING_VERSION := $(THUNDERBIRD_VERSION_DISPLAY)</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineminus">-endif</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineminus">-</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineminus">-# For extensions we require a max version that is compatible across security releases.</span>
<a href="#l11.20"></a><span id="l11.20" class="difflineminus">-# THUNDERBIRD_MAXVERSION and SEAMONKEY_MAXVERSION is our method for doing that.</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineminus">-# Alpha versions 10.0a1 and 10.0a2 aren't affected</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineminus">-# For Seamonkey, 2.17 becomes 2.17.*, 2.17.1 becomes 2.17.*</span>
<a href="#l11.23"></a><span id="l11.23" class="difflineminus">-# For Thunderbird, 10.0 becomes 10.*, 10.0.1 becomes 10.*</span>
<a href="#l11.24"></a><span id="l11.24" class="difflineminus">-THUNDERBIRD_MAXVERSION := $(THUNDERBIRD_VERSION)</span>
<a href="#l11.25"></a><span id="l11.25" class="difflineminus">-ifneq (a,$(findstring a,$(THUNDERBIRD_VERSION)))</span>
<a href="#l11.26"></a><span id="l11.26" class="difflineminus">-THUNDERBIRD_MAXVERSION := $(shell echo $(THUNDERBIRD_VERSION) | sed 's|\(^[0-9]*\)\.\([0-9]*\).*|\1|' ).*</span>
<a href="#l11.27"></a><span id="l11.27" class="difflineminus">-endif</span>
<a href="#l11.28"></a><span id="l11.28" class="difflineminus">-</span>
<a href="#l11.29"></a><span id="l11.29" class="difflineminus">-SEAMONKEY_MAXVERSION := $(SEAMONKEY_VERSION)</span>
<a href="#l11.30"></a><span id="l11.30" class="difflineminus">-ifneq (a,$(findstring a,$(SEAMONKEY_VERSION)))</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-SEAMONKEY_MAXVERSION := $(shell echo $(SEAMONKEY_VERSION) | sed 's|\(^[0-9]*.[0-9]*\).*|\1|' ).*</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineminus">-endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/calendar/moz.build</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/calendar/moz.build</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -3,17 +3,17 @@</span>
<a href="#l12.4"></a><span id="l12.4"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l12.5"></a><span id="l12.5"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l12.6"></a><span id="l12.6"> </span>
<a href="#l12.7"></a><span id="l12.7"> CONFIGURE_SUBST_FILES += ['installer/Makefile']</span>
<a href="#l12.8"></a><span id="l12.8"> </span>
<a href="#l12.9"></a><span id="l12.9"> if CONFIG['MOZ_CALENDAR']:</span>
<a href="#l12.10"></a><span id="l12.10">     DIRS += [</span>
<a href="#l12.11"></a><span id="l12.11">         'lightning',</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-        'timezones'</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+        # 'timezones'</span>
<a href="#l12.14"></a><span id="l12.14">     ]</span>
<a href="#l12.15"></a><span id="l12.15"> </span>
<a href="#l12.16"></a><span id="l12.16"> TEST_DIRS += ['test']</span>
<a href="#l12.17"></a><span id="l12.17"> </span>
<a href="#l12.18"></a><span id="l12.18"> with Files('**'):</span>
<a href="#l12.19"></a><span id="l12.19">     BUG_COMPONENT = ('Calendar', 'General')</span>
<a href="#l12.20"></a><span id="l12.20"> </span>
<a href="#l12.21"></a><span id="l12.21"> with Files('**/moz.build'):</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/calendar/providers/gdata/Makefile.in</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/calendar/providers/gdata/Makefile.in</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -1,30 +1,27 @@</span>
<a href="#l13.4"></a><span id="l13.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l13.5"></a><span id="l13.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l13.6"></a><span id="l13.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l13.7"></a><span id="l13.7"> </span>
<a href="#l13.8"></a><span id="l13.8" class="difflineminus">-XPI_NAME = gdata-provider</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineminus">-XPI_PKGNAME = gdata-provider.$(AB_CD)</span>
<a href="#l13.10"></a><span id="l13.10" class="difflineminus">-XPI_EM_ID = {a62ef8ec-5fdc-40c2-873c-223b8a6925cc}</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineminus">-XPI_INSTALL_EXTENSION = $(XPI_EM_ID)</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+XPI_PKGNAME = gdata-provider</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+final_parent = $(ABS_DIST)/bin/extensions</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineplus">+ifdef MOZ_ARTIFACT_BUILDS</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineplus">+final_dest = $(final_parent)/{a62ef8ec-5fdc-40c2-873c-223b8a6925cc}</span>
<a href="#l13.17"></a><span id="l13.17"> </span>
<a href="#l13.18"></a><span id="l13.18" class="difflineminus">-THUNDERBIRD_VERSION := $(shell cat $(commtopsrcdir)/mail/config/version.txt)</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineminus">-SEAMONKEY_VERSION := $(shell cat $(commtopsrcdir)/suite/config/version.txt)</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineminus">-</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineminus">-ifdef MOZ_SUITE</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineminus">-LIGHTNING_VERSION := $(shell $(PYTHON) $(commtopsrcdir)/calendar/lightning/build/makeversion.py $(THUNDERBIRD_VERSION))</span>
<a href="#l13.23"></a><span id="l13.23" class="difflineplus">+tools::</span>
<a href="#l13.24"></a><span id="l13.24" class="difflineplus">+	$(RM) -r $(final_dest)</span>
<a href="#l13.25"></a><span id="l13.25" class="difflineplus">+ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l13.26"></a><span id="l13.26" class="difflineplus">+	$(NSINSTALL) -D $(final_dest)</span>
<a href="#l13.27"></a><span id="l13.27" class="difflineplus">+	$(call copy_dir,$(FINAL_TARGET),$(final_dest))</span>
<a href="#l13.28"></a><span id="l13.28"> else</span>
<a href="#l13.29"></a><span id="l13.29" class="difflineminus">-LIGHTNING_VERSION := $(THUNDERBIRD_VERSION_DISPLAY)</span>
<a href="#l13.30"></a><span id="l13.30" class="difflineplus">+	$(NSINSTALL) -D $(final_parent)</span>
<a href="#l13.31"></a><span id="l13.31" class="difflineplus">+	ln -s $(ABS_DIST)/xpi-stage/gdata-provider $(final_dest)</span>
<a href="#l13.32"></a><span id="l13.32"> endif</span>
<a href="#l13.33"></a><span id="l13.33" class="difflineminus">-</span>
<a href="#l13.34"></a><span id="l13.34" class="difflineminus">-GDATA_VERSION := $(THUNDERBIRD_VERSION_DISPLAY)</span>
<a href="#l13.35"></a><span id="l13.35" class="difflineminus">-</span>
<a href="#l13.36"></a><span id="l13.36" class="difflineminus">-</span>
<a href="#l13.37"></a><span id="l13.37" class="difflineminus">-DEFINES += -DSEAMONKEY_VERSION=$(SEAMONKEY_VERSION) \</span>
<a href="#l13.38"></a><span id="l13.38" class="difflineminus">-           -DTHUNDERBIRD_VERSION=$(THUNDERBIRD_VERSION) \</span>
<a href="#l13.39"></a><span id="l13.39" class="difflineminus">-           -DGDATA_VERSION=$(GDATA_VERSION) \</span>
<a href="#l13.40"></a><span id="l13.40" class="difflineminus">-           $(NULL)</span>
<a href="#l13.41"></a><span id="l13.41" class="difflineminus">-</span>
<a href="#l13.42"></a><span id="l13.42" class="difflineminus">-include $(commtopsrcdir)/calendar/lightning/lightning-packager.mk</span>
<a href="#l13.43"></a><span id="l13.43" class="difflineplus">+endif # MOZ_ARTIFACT_BUILDS</span>
<a href="#l13.44"></a><span id="l13.44"> </span>
<a href="#l13.45"></a><span id="l13.45"> stage-package:</span>
<a href="#l13.46"></a><span id="l13.46" class="difflineplus">+ifdef MOZ_ARTIFACT_BUILDS</span>
<a href="#l13.47"></a><span id="l13.47"> 	$(PYTHON) -u $(MOZILLA_DIR)/build/upload.py $(DIST)/xpi-stage/$(XPI_PKGNAME).xpi</span>
<a href="#l13.48"></a><span id="l13.48" class="difflineplus">+else</span>
<a href="#l13.49"></a><span id="l13.49" class="difflineplus">+	$(PYTHON) -u $(MOZILLA_DIR)/build/upload.py $(final_parent)/$(XPI_PKGNAME).xpi</span>
<a href="#l13.50"></a><span id="l13.50" class="difflineplus">+endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/calendar/providers/gdata/jar.mn</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/calendar/providers/gdata/jar.mn</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -34,8 +34,15 @@ gdata-provider.jar:</span>
<a href="#l14.4"></a><span id="l14.4">     content/gdata-migration-overlay.xul          (content/gdata-migration-overlay.xul)</span>
<a href="#l14.5"></a><span id="l14.5">     content/gdata-migration-wizard.xul           (content/gdata-migration-wizard.xul)</span>
<a href="#l14.6"></a><span id="l14.6">     content/gcal.png                             (content/gcal.png)</span>
<a href="#l14.7"></a><span id="l14.7"> % skin gdata-provider classic/1.0 %skin/</span>
<a href="#l14.8"></a><span id="l14.8">     skin/reminder-action-sms.svg                 (content/reminder-action-sms.svg)</span>
<a href="#l14.9"></a><span id="l14.9">     skin/gdata-event-dialog-reminder.css         (content/gdata-event-dialog-reminder.css)</span>
<a href="#l14.10"></a><span id="l14.10">     skin/gdata-bindings.css                      (content/gdata-bindings.css)</span>
<a href="#l14.11"></a><span id="l14.11">     skin/browserRequest.css                      (content/browserRequest.css)</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineplus">+</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineplus">+gdata-provider-@AB_CD@.jar:</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineplus">+relativesrcdir comm/calendar/locales:</span>
<a href="#l14.16"></a><span id="l14.16" class="difflineplus">+% locale gdata-provider @AB_CD@ %locale/@AB_CD@/</span>
<a href="#l14.17"></a><span id="l14.17" class="difflineplus">+    locale/@AB_CD@/gdata.properties              (%chrome/calendar/providers/gdata/gdata.properties)</span>
<a href="#l14.18"></a><span id="l14.18" class="difflineplus">+    locale/@AB_CD@/gdata.dtd                     (%chrome/calendar/providers/gdata/gdata.dtd)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1">deleted file mode 100644</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineminus">--- a/calendar/providers/gdata/locales/Makefile.in</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineplus">+++ /dev/null</span>
<a href="#l15.4"></a><span id="l15.4" class="difflineat">@@ -1,9 +0,0 @@</span>
<a href="#l15.5"></a><span id="l15.5" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l15.6"></a><span id="l15.6" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l15.7"></a><span id="l15.7" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l15.8"></a><span id="l15.8" class="difflineminus">-</span>
<a href="#l15.9"></a><span id="l15.9" class="difflineminus">-# Setting this to calendar/locales sets up LOCALE_SRCDIR to the correct locale</span>
<a href="#l15.10"></a><span id="l15.10" class="difflineminus">-# directory</span>
<a href="#l15.11"></a><span id="l15.11" class="difflineminus">-relativesrcdir = $(commreltopsrcdir)/calendar/locales</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineminus">-DEFINES += -DLOCALE_SRCDIR=$(LOCALE_SRCDIR)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1">deleted file mode 100644</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineminus">--- a/calendar/providers/gdata/locales/jar.mn</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineplus">+++ /dev/null</span>
<a href="#l16.4"></a><span id="l16.4" class="difflineat">@@ -1,10 +0,0 @@</span>
<a href="#l16.5"></a><span id="l16.5" class="difflineminus">-#filter substitution</span>
<a href="#l16.6"></a><span id="l16.6" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l16.7"></a><span id="l16.7" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l16.8"></a><span id="l16.8" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l16.9"></a><span id="l16.9" class="difflineminus">-</span>
<a href="#l16.10"></a><span id="l16.10" class="difflineminus">-</span>
<a href="#l16.11"></a><span id="l16.11" class="difflineminus">-gdata-provider-@AB_CD@.jar:</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-% locale gdata-provider @AB_CD@ %locale/@AB_CD@/</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">-    locale/@AB_CD@/gdata.properties              (%chrome/calendar/providers/gdata/gdata.properties)</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineminus">-    locale/@AB_CD@/gdata.dtd                     (%chrome/calendar/providers/gdata/gdata.dtd)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1">deleted file mode 100644</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineminus">--- a/calendar/providers/gdata/locales/moz.build</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineplus">+++ /dev/null</span>
<a href="#l17.4"></a><span id="l17.4" class="difflineat">@@ -1,6 +0,0 @@</span>
<a href="#l17.5"></a><span id="l17.5" class="difflineminus">-# vim: set filetype=python:</span>
<a href="#l17.6"></a><span id="l17.6" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l17.7"></a><span id="l17.7" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l17.8"></a><span id="l17.8" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l17.9"></a><span id="l17.9" class="difflineminus">-</span>
<a href="#l17.10"></a><span id="l17.10" class="difflineminus">-JAR_MANIFESTS += ['jar.mn']</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1">deleted file mode 100644</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineminus">--- a/calendar/providers/gdata/makeversion.py</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineplus">+++ /dev/null</span>
<a href="#l18.4"></a><span id="l18.4" class="difflineat">@@ -1,25 +0,0 @@</span>
<a href="#l18.5"></a><span id="l18.5" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l18.6"></a><span id="l18.6" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l18.7"></a><span id="l18.7" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l18.8"></a><span id="l18.8" class="difflineminus">-</span>
<a href="#l18.9"></a><span id="l18.9" class="difflineminus">-import sys</span>
<a href="#l18.10"></a><span id="l18.10" class="difflineminus">-import re</span>
<a href="#l18.11"></a><span id="l18.11" class="difflineminus">-</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-# Converts a Lightning version to a matching gdata version:</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineminus">-#  Lightning 3.1 -&gt; gdata-provider 1.0</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineminus">-#  Lightning 3.2b2 -&gt; gdata-provider 1.1b2</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineminus">-#  Lightning 3.3a1 -&gt; gdata-provider 1.2a1</span>
<a href="#l18.16"></a><span id="l18.16" class="difflineminus">-def makeversion(x):</span>
<a href="#l18.17"></a><span id="l18.17" class="difflineminus">-    v = re.search(r&quot;(\d+\.\d+)([a-z]\d+)?&quot;, x)</span>
<a href="#l18.18"></a><span id="l18.18" class="difflineminus">-    parts = v.group(1).split('.')</span>
<a href="#l18.19"></a><span id="l18.19" class="difflineminus">-    major = int(parts[0]) - 2</span>
<a href="#l18.20"></a><span id="l18.20" class="difflineminus">-    minor = int(parts[1]) - 1</span>
<a href="#l18.21"></a><span id="l18.21" class="difflineminus">-    if minor &lt; 0:</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineminus">-        minor = 10 + minor</span>
<a href="#l18.23"></a><span id="l18.23" class="difflineminus">-        major = major - 1</span>
<a href="#l18.24"></a><span id="l18.24" class="difflineminus">-    parts[0] = str(major)</span>
<a href="#l18.25"></a><span id="l18.25" class="difflineminus">-    parts[1] = str(minor)</span>
<a href="#l18.26"></a><span id="l18.26" class="difflineminus">-    return '.'.join(parts) + (v.group(2) or &quot;&quot;)</span>
<a href="#l18.27"></a><span id="l18.27" class="difflineminus">-</span>
<a href="#l18.28"></a><span id="l18.28" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l18.29"></a><span id="l18.29" class="difflineminus">-    print(makeversion(sys.argv[1]))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/calendar/providers/gdata/manifest.json</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/calendar/providers/gdata/manifest.json</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -2,22 +2,23 @@</span>
<a href="#l19.4"></a><span id="l19.4"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l19.5"></a><span id="l19.5"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l19.6"></a><span id="l19.6"> #</span>
<a href="#l19.7"></a><span id="l19.7"> #filter substitution</span>
<a href="#l19.8"></a><span id="l19.8"> {</span>
<a href="#l19.9"></a><span id="l19.9">   &quot;manifest_version&quot;: 2,</span>
<a href="#l19.10"></a><span id="l19.10">   &quot;name&quot;: &quot;Provider for Google Calendar&quot;,</span>
<a href="#l19.11"></a><span id="l19.11">   &quot;description&quot;: &quot;Allows bidirectional access to Google Calendar&quot;,</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-  &quot;version&quot;: &quot;@GDATA_VERSION@&quot;,</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+  &quot;version&quot;: &quot;@THUNDERBIRD_VERSION_DISPLAY@&quot;,</span>
<a href="#l19.14"></a><span id="l19.14">   &quot;author&quot;: &quot;Philipp Kewisch&quot;,</span>
<a href="#l19.15"></a><span id="l19.15">   &quot;homepage_url&quot;: &quot;https://addons.mozilla.org/thunderbird/addon/4631&quot;,</span>
<a href="#l19.16"></a><span id="l19.16">   &quot;legacy&quot;: true,</span>
<a href="#l19.17"></a><span id="l19.17">   &quot;applications&quot;: {</span>
<a href="#l19.18"></a><span id="l19.18">     &quot;gecko&quot;: {</span>
<a href="#l19.19"></a><span id="l19.19">       &quot;id&quot;: &quot;{a62ef8ec-5fdc-40c2-873c-223b8a6925cc}&quot;,</span>
<a href="#l19.20"></a><span id="l19.20" class="difflineminus">-      &quot;strict_min_version&quot;: &quot;@THUNDERBIRD_VERSION@&quot;</span>
<a href="#l19.21"></a><span id="l19.21" class="difflineplus">+      &quot;strict_min_version&quot;: &quot;@THUNDERBIRD_VERSION@&quot;,</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineplus">+      &quot;strict_max_version&quot;: &quot;@THUNDERBIRD_MAXVERSION@&quot;</span>
<a href="#l19.23"></a><span id="l19.23">     }</span>
<a href="#l19.24"></a><span id="l19.24">   },</span>
<a href="#l19.25"></a><span id="l19.25">   &quot;icons&quot;: {</span>
<a href="#l19.26"></a><span id="l19.26">     &quot;256&quot;: &quot;chrome/gdata-provider/content/gcal.png&quot;</span>
<a href="#l19.27"></a><span id="l19.27">   }</span>
<a href="#l19.28"></a><span id="l19.28"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/calendar/providers/gdata/moz.build</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/calendar/providers/gdata/moz.build</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -1,22 +1,26 @@</span>
<a href="#l20.4"></a><span id="l20.4"> # vim: set filetype=python:</span>
<a href="#l20.5"></a><span id="l20.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l20.6"></a><span id="l20.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l20.7"></a><span id="l20.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l20.8"></a><span id="l20.8"> </span>
<a href="#l20.9"></a><span id="l20.9" class="difflineminus">-XPI_NAME = 'gdata-provider'</span>
<a href="#l20.10"></a><span id="l20.10" class="difflineminus">-export('XPI_NAME')</span>
<a href="#l20.11"></a><span id="l20.11" class="difflineplus">+version_parts = CONFIG['MOZ_APP_VERSION'].split('.')</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineplus">+major_version = version_parts[0]</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+DEFINES['THUNDERBIRD_MAXVERSION'] = major_version + '.*'</span>
<a href="#l20.14"></a><span id="l20.14" class="difflineplus">+</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineplus">+if CONFIG['MOZ_ARTIFACT_BUILDS']:</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineplus">+    XPI_NAME = 'gdata-provider'</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineplus">+    export('XPI_NAME')</span>
<a href="#l20.18"></a><span id="l20.18" class="difflineplus">+else:</span>
<a href="#l20.19"></a><span id="l20.19" class="difflineplus">+    DIST_SUBDIR = 'extensions/{a62ef8ec-5fdc-40c2-873c-223b8a6925cc}'</span>
<a href="#l20.20"></a><span id="l20.20" class="difflineplus">+    export('DIST_SUBDIR')</span>
<a href="#l20.21"></a><span id="l20.21"> </span>
<a href="#l20.22"></a><span id="l20.22"> FINAL_TARGET_PP_FILES += ['manifest.json']</span>
<a href="#l20.23"></a><span id="l20.23"> </span>
<a href="#l20.24"></a><span id="l20.24" class="difflineminus">-DIRS += [</span>
<a href="#l20.25"></a><span id="l20.25" class="difflineminus">-    'locales',</span>
<a href="#l20.26"></a><span id="l20.26" class="difflineminus">-]</span>
<a href="#l20.27"></a><span id="l20.27" class="difflineminus">-</span>
<a href="#l20.28"></a><span id="l20.28"> EXTRA_JS_MODULES += [</span>
<a href="#l20.29"></a><span id="l20.29">     'modules/gdataLogging.jsm',</span>
<a href="#l20.30"></a><span id="l20.30">     'modules/gdataRequest.jsm',</span>
<a href="#l20.31"></a><span id="l20.31">     'modules/gdataSession.jsm',</span>
<a href="#l20.32"></a><span id="l20.32">     'modules/gdataUtils.jsm',</span>
<a href="#l20.33"></a><span id="l20.33">     'modules/OAuth2.jsm',</span>
<a href="#l20.34"></a><span id="l20.34">     'modules/timezoneMap.jsm',</span>
<a href="#l20.35"></a><span id="l20.35"> ]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/calendar/test/unit/test_gdata_provider.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/calendar/test/unit/test_gdata_provider.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -8,17 +8,17 @@</span>
<a href="#l21.4"></a><span id="l21.4">     Services.prefs.setBoolPref(&quot;browser.dom.window.dump.enabled&quot;, true);</span>
<a href="#l21.5"></a><span id="l21.5">     Services.prefs.setBoolPref(&quot;calendar.debug.log&quot;, true);</span>
<a href="#l21.6"></a><span id="l21.6">     Services.prefs.setBoolPref(&quot;calendar.debug.log.verbose&quot;, true);</span>
<a href="#l21.7"></a><span id="l21.7"> </span>
<a href="#l21.8"></a><span id="l21.8">     let xpiFile;</span>
<a href="#l21.9"></a><span id="l21.9">     let env = Cc[&quot;@mozilla.org/process/environment;1&quot;].getService(Ci.nsIEnvironment);</span>
<a href="#l21.10"></a><span id="l21.10">     if (env.exists(&quot;MOZ_FETCHES_DIR&quot;)) {</span>
<a href="#l21.11"></a><span id="l21.11">         xpiFile = new FileUtils.File(env.get(&quot;MOZ_FETCHES_DIR&quot;));</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-        xpiFile.append(&quot;gdata-provider.en-US.xpi&quot;);</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+        xpiFile.append(&quot;gdata-provider.xpi&quot;);</span>
<a href="#l21.14"></a><span id="l21.14">     } else {</span>
<a href="#l21.15"></a><span id="l21.15">         xpiFile = Services.dirsvc.get(&quot;CurProcD&quot;, Ci.nsIFile);</span>
<a href="#l21.16"></a><span id="l21.16">         xpiFile.append(&quot;extensions&quot;);</span>
<a href="#l21.17"></a><span id="l21.17">         xpiFile.append(&quot;{a62ef8ec-5fdc-40c2-873c-223b8a6925cc}&quot;);</span>
<a href="#l21.18"></a><span id="l21.18">     }</span>
<a href="#l21.19"></a><span id="l21.19"> </span>
<a href="#l21.20"></a><span id="l21.20">     dump(&quot;Loading &quot; + xpiFile.path + &quot;\n&quot;);</span>
<a href="#l21.21"></a><span id="l21.21">     let manager = Cc[&quot;@mozilla.org/component-manager-extra;1&quot;].getService(Ci.nsIComponentManagerExtra);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/calendar/timezones/Makefile.in</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/calendar/timezones/Makefile.in</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -1,17 +1,16 @@</span>
<a href="#l22.4"></a><span id="l22.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l22.5"></a><span id="l22.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l22.6"></a><span id="l22.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l22.7"></a><span id="l22.7"> </span>
<a href="#l22.8"></a><span id="l22.8"> XPI_PKGNAME = calendar-timezones-$(TIMEZONES_VERSION)</span>
<a href="#l22.9"></a><span id="l22.9"> </span>
<a href="#l22.10"></a><span id="l22.10"> THUNDERBIRD_VERSION := $(shell cat $(commtopsrcdir)/mail/config/version.txt)</span>
<a href="#l22.11"></a><span id="l22.11"> SEAMONKEY_VERSION := $(shell cat $(commtopsrcdir)/suite/config/version.txt)</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-CALENDAR_VERSION := $(shell $(PYTHON) $(commtopsrcdir)/calendar/lightning/build/makeversion.py $(word 1,$(MOZ_PKG_VERSION) $(THUNDERBIRD_VERSION)))</span>
<a href="#l22.13"></a><span id="l22.13"> TIMEZONES_VERSION := $(shell $(PYTHON) $(srcdir)/version.py)</span>
<a href="#l22.14"></a><span id="l22.14"> </span>
<a href="#l22.15"></a><span id="l22.15"> relativesrcdir = $(commreltopsrcdir)/calendar/locales</span>
<a href="#l22.16"></a><span id="l22.16"> </span>
<a href="#l22.17"></a><span id="l22.17"> DEFINES += -DTHUNDERBIRD_VERSION=$(THUNDERBIRD_VERSION) \</span>
<a href="#l22.18"></a><span id="l22.18">            -DSEAMONKEY_VERSION=$(SEAMONKEY_VERSION) \</span>
<a href="#l22.19"></a><span id="l22.19">            -DCALENDAR_VERSION=$(CALENDAR_VERSION) \</span>
<a href="#l22.20"></a><span id="l22.20">            -DTIMEZONES_VERSION=$(TIMEZONES_VERSION) \</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/taskcluster/ci/test/tests.yml</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/taskcluster/ci/test/tests.yml</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -45,17 +45,17 @@ xpcshell:</span>
<a href="#l23.4"></a><span id="l23.4">         extra-options:</span>
<a href="#l23.5"></a><span id="l23.5">             - &quot;--xpcshell-suite=xpcshell&quot;</span>
<a href="#l23.6"></a><span id="l23.6">         requires-signed-builds:</span>
<a href="#l23.7"></a><span id="l23.7">             by-test-platform:</span>
<a href="#l23.8"></a><span id="l23.8">                 windows.*: true</span>
<a href="#l23.9"></a><span id="l23.9">                 default: false</span>
<a href="#l23.10"></a><span id="l23.10">     fetches:</span>
<a href="#l23.11"></a><span id="l23.11">         build:</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-            - gdata-provider.en-US.xpi</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+            - gdata-provider.xpi</span>
<a href="#l23.14"></a><span id="l23.14"> </span>
<a href="#l23.15"></a><span id="l23.15"> mozmill:</span>
<a href="#l23.16"></a><span id="l23.16">     description: &quot;mozmill test run&quot;</span>
<a href="#l23.17"></a><span id="l23.17">     suite: mozmill</span>
<a href="#l23.18"></a><span id="l23.18">     treeherder-symbol: Z(Z)</span>
<a href="#l23.19"></a><span id="l23.19">     run-on-projects: built-projects</span>
<a href="#l23.20"></a><span id="l23.20">     docker-image:</span>
<a href="#l23.21"></a><span id="l23.21">         in-tree: &quot;desktop1604-test&quot;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:33Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

