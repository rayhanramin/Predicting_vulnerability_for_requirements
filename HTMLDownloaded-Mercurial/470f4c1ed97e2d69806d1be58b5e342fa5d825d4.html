<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 26135:470f4c1ed97e2d69806d1be58b5e342fa5d825d4</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 470f4c1ed97e2d69806d1be58b5e342fa5d825d4" />
<meta property="og:url" content="/comm-central/rev/470f4c1ed97e2d69806d1be58b5e342fa5d825d4" />
<meta property="og:description" content="Port bug 1246594 - Enable ESLint rule no-throw-literal by default; rs=bustage-fix DONTBUILD" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 470f4c1ed97e2d69806d1be58b5e342fa5d825d4 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/470f4c1ed97e2d69806d1be58b5e342fa5d825d4">shortlog</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/470f4c1ed97e2d69806d1be58b5e342fa5d825d4">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4">files</a> |
changeset |
<a href="/comm-central/raw-rev/470f4c1ed97e2d69806d1be58b5e342fa5d825d4">raw</a>  | <a href="/comm-central/archive/470f4c1ed97e2d69806d1be58b5e342fa5d825d4.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1246594">bug 1246594</a> - Enable ESLint rule no-throw-literal by default; rs=bustage-fix DONTBUILD
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#71;&#101;&#111;&#102;&#102;&#32;&#76;&#97;&#110;&#107;&#111;&#119;&#32;&#60;&#103;&#101;&#111;&#102;&#102;&#64;&#100;&#97;&#114;&#107;&#116;&#114;&#111;&#106;&#97;&#110;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 21 Mar 2019 20:45:20 +1300</td></tr>

<tr>
 <td>changeset 26135</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/470f4c1ed97e2d69806d1be58b5e342fa5d825d4">470f4c1ed97e2d69806d1be58b5e342fa5d825d4</a></td>
</tr>



<tr>
<td>parent 26134</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/a6833698352ab18f7596ed2571241f91202b95bb">a6833698352ab18f7596ed2571241f91202b95bb</a>
</td>
</tr>

<tr>
<td>child 26136</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/bbc858a8e20db63d82352a7c52a49e89e720d0a1">bbc858a8e20db63d82352a7c52a49e89e720d0a1</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=470f4c1ed97e2d69806d1be58b5e342fa5d825d4">15689</a></td></tr>
<tr><td>push user</td><td>geoff@darktrojan.net</td></tr>
<tr><td>push date</td><td class="date age">Thu, 21 Mar 2019 07:46:02 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@470f4c1ed97e [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=470f4c1ed97e2d69806d1be58b5e342fa5d825d4">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=470f4c1ed97e2d69806d1be58b5e342fa5d825d4&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=470f4c1ed97e2d69806d1be58b5e342fa5d825d4&newProject=comm-central&newRevision=470f4c1ed97e2d69806d1be58b5e342fa5d825d4&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=470f4c1ed97e2d69806d1be58b5e342fa5d825d4&newProject=comm-central&newRevision=470f4c1ed97e2d69806d1be58b5e342fa5d825d4&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=470f4c1ed97e2d69806d1be58b5e342fa5d825d4&newProject=comm-central&newRevision=470f4c1ed97e2d69806d1be58b5e342fa5d825d4&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28bustage-fix%29&revcount=50">bustage-fix</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1246594">1246594</a></td></tr>




</table></div>

<div class="page_body description">Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1246594">bug 1246594</a> - Enable ESLint rule no-throw-literal by default; rs=bustage-fix DONTBUILD</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/content/calendar-ui-utils.js">calendar/base/content/calendar-ui-utils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/content/calendar-ui-utils.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/content/calendar-ui-utils.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/content/calendar-ui-utils.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/content/calendar-ui-utils.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/content/calendar-ui-utils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/modules/calHashedArray.jsm">calendar/base/modules/calHashedArray.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/modules/calHashedArray.jsm">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/modules/calHashedArray.jsm">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/modules/calHashedArray.jsm">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/modules/calHashedArray.jsm">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/modules/calHashedArray.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/src/calCalendarManager.js">calendar/base/src/calCalendarManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/src/calCalendarManager.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/src/calCalendarManager.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/src/calCalendarManager.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/src/calCalendarManager.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/src/calCalendarManager.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/src/calItemBase.js">calendar/base/src/calItemBase.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/src/calItemBase.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/src/calItemBase.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/src/calItemBase.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/src/calItemBase.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/base/src/calItemBase.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/providers/caldav/calDavCalendar.js">calendar/providers/caldav/calDavCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/providers/caldav/calDavCalendar.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/providers/caldav/calDavCalendar.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/providers/caldav/calDavCalendar.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/providers/caldav/calDavCalendar.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/providers/caldav/calDavCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/providers/storage/calStorageCalendar.js">calendar/providers/storage/calStorageCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/providers/storage/calStorageCalendar.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/providers/storage/calStorageCalendar.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/providers/storage/calStorageCalendar.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/providers/storage/calStorageCalendar.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/providers/storage/calStorageCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/providers/storage/calStorageUpgrade.jsm">calendar/providers/storage/calStorageUpgrade.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/providers/storage/calStorageUpgrade.jsm">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/providers/storage/calStorageUpgrade.jsm">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/providers/storage/calStorageUpgrade.jsm">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/providers/storage/calStorageUpgrade.jsm">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/providers/storage/calStorageUpgrade.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/test/unit/test_search_service.js">calendar/test/unit/test_search_service.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/test/unit/test_search_service.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/test/unit/test_search_service.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/test/unit/test_search_service.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/test/unit/test_search_service.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/calendar/test/unit/test_search_service.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/imCommands.js">chat/components/src/imCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/imCommands.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/imCommands.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/imCommands.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/imCommands.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/imCommands.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/imContacts.js">chat/components/src/imContacts.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/imContacts.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/imContacts.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/imContacts.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/imContacts.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/imContacts.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/imConversations.js">chat/components/src/imConversations.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/imConversations.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/imConversations.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/imConversations.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/imConversations.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/imConversations.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/logger.js">chat/components/src/logger.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/logger.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/logger.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/logger.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/logger.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/components/src/logger.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/content/imAccountOptionsHelper.js">chat/content/imAccountOptionsHelper.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/content/imAccountOptionsHelper.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/content/imAccountOptionsHelper.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/content/imAccountOptionsHelper.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/content/imAccountOptionsHelper.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/content/imAccountOptionsHelper.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/NormalizedMap.jsm">chat/modules/NormalizedMap.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/NormalizedMap.jsm">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/NormalizedMap.jsm">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/NormalizedMap.jsm">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/NormalizedMap.jsm">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/NormalizedMap.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/imContentSink.jsm">chat/modules/imContentSink.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/imContentSink.jsm">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/imContentSink.jsm">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/imContentSink.jsm">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/imContentSink.jsm">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/imContentSink.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/imSmileys.jsm">chat/modules/imSmileys.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/imSmileys.jsm">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/imSmileys.jsm">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/imSmileys.jsm">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/imSmileys.jsm">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/imSmileys.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/imThemes.jsm">chat/modules/imThemes.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/imThemes.jsm">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/imThemes.jsm">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/imThemes.jsm">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/imThemes.jsm">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/imThemes.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/jsProtoHelper.jsm">chat/modules/jsProtoHelper.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/jsProtoHelper.jsm">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/jsProtoHelper.jsm">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/jsProtoHelper.jsm">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/jsProtoHelper.jsm">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/jsProtoHelper.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/socket.jsm">chat/modules/socket.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/socket.jsm">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/socket.jsm">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/socket.jsm">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/socket.jsm">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/modules/socket.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/gtalk/gtalk.js">chat/protocols/gtalk/gtalk.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/gtalk/gtalk.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/gtalk/gtalk.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/gtalk/gtalk.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/gtalk/gtalk.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/gtalk/gtalk.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/irc/irc.js">chat/protocols/irc/irc.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/irc/irc.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/irc/irc.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/irc/irc.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/irc/irc.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/irc/irc.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/skype/skype.js">chat/protocols/skype/skype.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/skype/skype.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/skype/skype.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/skype/skype.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/skype/skype.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/skype/skype.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/twitter/twitter.js">chat/protocols/twitter/twitter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/twitter/twitter.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/twitter/twitter.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/twitter/twitter.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/twitter/twitter.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/twitter/twitter.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/xmpp/xmpp-authmechs.jsm">chat/protocols/xmpp/xmpp-authmechs.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/xmpp/xmpp-authmechs.jsm">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/xmpp/xmpp-authmechs.jsm">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/xmpp/xmpp-authmechs.jsm">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/xmpp/xmpp-authmechs.jsm">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/xmpp/xmpp-authmechs.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/xmpp/xmpp-xml.jsm">chat/protocols/xmpp/xmpp-xml.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/xmpp/xmpp-xml.jsm">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/xmpp/xmpp-xml.jsm">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/xmpp/xmpp-xml.jsm">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/xmpp/xmpp-xml.jsm">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/xmpp/xmpp-xml.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/xmpp/xmpp.jsm">chat/protocols/xmpp/xmpp.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/xmpp/xmpp.jsm">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/xmpp/xmpp.jsm">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/xmpp/xmpp.jsm">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/xmpp/xmpp.jsm">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/chat/protocols/xmpp/xmpp.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/common/bindings/menubutton.xml">common/bindings/menubutton.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/common/bindings/menubutton.xml">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/common/bindings/menubutton.xml">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/common/bindings/menubutton.xml">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/common/bindings/menubutton.xml">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/common/bindings/menubutton.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/common/bindings/notificationbox.xml">common/bindings/notificationbox.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/common/bindings/notificationbox.xml">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/common/bindings/notificationbox.xml">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/common/bindings/notificationbox.xml">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/common/bindings/notificationbox.xml">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/common/bindings/notificationbox.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/common/src/Overlays.jsm">common/src/Overlays.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/common/src/Overlays.jsm">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/common/src/Overlays.jsm">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/common/src/Overlays.jsm">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/common/src/Overlays.jsm">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/common/src/Overlays.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/base/content/nsContextMenu.js">mail/base/content/nsContextMenu.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/base/content/nsContextMenu.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/base/content/nsContextMenu.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/base/content/nsContextMenu.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/base/content/nsContextMenu.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/base/content/nsContextMenu.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/base/content/nsDragAndDrop.js">mail/base/content/nsDragAndDrop.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/base/content/nsDragAndDrop.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/base/content/nsDragAndDrop.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/base/content/nsDragAndDrop.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/base/content/nsDragAndDrop.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/base/content/nsDragAndDrop.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/base/content/sanitize.js">mail/base/content/sanitize.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/base/content/sanitize.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/base/content/sanitize.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/base/content/sanitize.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/base/content/sanitize.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/base/content/sanitize.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/accountcreation/content/util.js">mail/components/accountcreation/content/util.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/accountcreation/content/util.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/accountcreation/content/util.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/accountcreation/content/util.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/accountcreation/content/util.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/accountcreation/content/util.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/accountcreation/content/verifyConfig.js">mail/components/accountcreation/content/verifyConfig.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/accountcreation/content/verifyConfig.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/accountcreation/content/verifyConfig.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/accountcreation/content/verifyConfig.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/accountcreation/content/verifyConfig.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/accountcreation/content/verifyConfig.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/addbuddy.js">mail/components/im/content/addbuddy.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/addbuddy.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/addbuddy.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/addbuddy.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/addbuddy.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/addbuddy.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/chat-messenger.js">mail/components/im/content/chat-messenger.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/chat-messenger.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/chat-messenger.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/chat-messenger.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/chat-messenger.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/chat-messenger.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imAccountWizard.js">mail/components/im/content/imAccountWizard.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imAccountWizard.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imAccountWizard.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imAccountWizard.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imAccountWizard.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imAccountWizard.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imAccounts.js">mail/components/im/content/imAccounts.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imAccounts.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imAccounts.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imAccounts.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imAccounts.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imAccounts.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imContextMenu.js">mail/components/im/content/imContextMenu.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imContextMenu.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imContextMenu.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imContextMenu.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imContextMenu.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imContextMenu.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imconversation.xml">mail/components/im/content/imconversation.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imconversation.xml">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imconversation.xml">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imconversation.xml">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imconversation.xml">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imconversation.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imgroup.xml">mail/components/im/content/imgroup.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imgroup.xml">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imgroup.xml">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imgroup.xml">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imgroup.xml">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/imgroup.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/joinchat.js">mail/components/im/content/joinchat.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/joinchat.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/joinchat.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/joinchat.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/joinchat.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/content/joinchat.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/modules/index_im.jsm">mail/components/im/modules/index_im.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/modules/index_im.jsm">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/modules/index_im.jsm">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/modules/index_im.jsm">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/modules/index_im.jsm">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/im/modules/index_im.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/newmailaccount/content/accountProvisioner.js">mail/components/newmailaccount/content/accountProvisioner.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/newmailaccount/content/accountProvisioner.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/newmailaccount/content/accountProvisioner.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/newmailaccount/content/accountProvisioner.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/newmailaccount/content/accountProvisioner.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/newmailaccount/content/accountProvisioner.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/preferences/preferencesTab.js">mail/components/preferences/preferencesTab.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/preferences/preferencesTab.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/preferences/preferencesTab.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/preferences/preferencesTab.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/preferences/preferencesTab.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/preferences/preferencesTab.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/search/content/SpotlightIntegration.js">mail/components/search/content/SpotlightIntegration.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/search/content/SpotlightIntegration.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/search/content/SpotlightIntegration.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/search/content/SpotlightIntegration.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/search/content/SpotlightIntegration.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/components/search/content/SpotlightIntegration.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/mozmill/folder-tree-modes/test-smart-folders.js">mail/test/mozmill/folder-tree-modes/test-smart-folders.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/mozmill/folder-tree-modes/test-smart-folders.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/mozmill/folder-tree-modes/test-smart-folders.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/mozmill/folder-tree-modes/test-smart-folders.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/mozmill/folder-tree-modes/test-smart-folders.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/mozmill/folder-tree-modes/test-smart-folders.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/mozmill/shared-modules/test-mouse-event-helpers.js">mail/test/mozmill/shared-modules/test-mouse-event-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/mozmill/shared-modules/test-mouse-event-helpers.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/mozmill/shared-modules/test-mouse-event-helpers.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/mozmill/shared-modules/test-mouse-event-helpers.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/mozmill/shared-modules/test-mouse-event-helpers.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/mozmill/shared-modules/test-mouse-event-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/resources/jsbridge/jsbridge/extension/chrome/content/modules/server.js">mail/test/resources/jsbridge/jsbridge/extension/chrome/content/modules/server.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/resources/jsbridge/jsbridge/extension/chrome/content/modules/server.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/resources/jsbridge/jsbridge/extension/chrome/content/modules/server.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/resources/jsbridge/jsbridge/extension/chrome/content/modules/server.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/resources/jsbridge/jsbridge/extension/chrome/content/modules/server.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/resources/jsbridge/jsbridge/extension/chrome/content/modules/server.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/resources/mozmill/mozmill/extension/content/stdlib/EventUtils.jsm">mail/test/resources/mozmill/mozmill/extension/content/stdlib/EventUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/resources/mozmill/mozmill/extension/content/stdlib/EventUtils.jsm">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/resources/mozmill/mozmill/extension/content/stdlib/EventUtils.jsm">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/resources/mozmill/mozmill/extension/content/stdlib/EventUtils.jsm">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/resources/mozmill/mozmill/extension/content/stdlib/EventUtils.jsm">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/resources/mozmill/mozmill/extension/content/stdlib/EventUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/resources/mozmill/mozmill/extension/content/stdlib/httpd.jsm">mail/test/resources/mozmill/mozmill/extension/content/stdlib/httpd.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/resources/mozmill/mozmill/extension/content/stdlib/httpd.jsm">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/resources/mozmill/mozmill/extension/content/stdlib/httpd.jsm">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/resources/mozmill/mozmill/extension/content/stdlib/httpd.jsm">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/resources/mozmill/mozmill/extension/content/stdlib/httpd.jsm">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mail/test/resources/mozmill/mozmill/extension/content/stdlib/httpd.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/addrbook/test/unit/test_collection.js">mailnews/addrbook/test/unit/test_collection.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/addrbook/test/unit/test_collection.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/addrbook/test/unit/test_collection.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/addrbook/test/unit/test_collection.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/addrbook/test/unit/test_collection.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/addrbook/test/unit/test_collection.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/fakeserver/auth.js">mailnews/test/fakeserver/auth.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/fakeserver/auth.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/fakeserver/auth.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/fakeserver/auth.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/fakeserver/auth.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/fakeserver/auth.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/fakeserver/imapd.js">mailnews/test/fakeserver/imapd.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/fakeserver/imapd.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/fakeserver/imapd.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/fakeserver/imapd.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/fakeserver/imapd.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/fakeserver/imapd.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/fakeserver/maild.js">mailnews/test/fakeserver/maild.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/fakeserver/maild.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/fakeserver/maild.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/fakeserver/maild.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/fakeserver/maild.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/fakeserver/maild.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/resources/filterTestUtils.js">mailnews/test/resources/filterTestUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/resources/filterTestUtils.js">file</a> |
<a href="/comm-central/annotate/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/resources/filterTestUtils.js">annotate</a> |
<a href="/comm-central/diff/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/resources/filterTestUtils.js">diff</a> |
<a href="/comm-central/comparison/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/resources/filterTestUtils.js">comparison</a> |
<a href="/comm-central/log/470f4c1ed97e2d69806d1be58b5e342fa5d825d4/mailnews/test/resources/filterTestUtils.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/content/calendar-ui-utils.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/content/calendar-ui-utils.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -489,17 +489,17 @@ function updateMenuLabelsPlural(aLengthF</span>
<a href="#l1.4"></a><span id="l1.4">  * @param menuListId    The ID of the menulist to check.</span>
<a href="#l1.5"></a><span id="l1.5">  * @param value         The value to set.</span>
<a href="#l1.6"></a><span id="l1.6">  * @throws              String error if value not found.</span>
<a href="#l1.7"></a><span id="l1.7">  */</span>
<a href="#l1.8"></a><span id="l1.8"> function menuListSelectItem(menuListId, value) {</span>
<a href="#l1.9"></a><span id="l1.9">     let menuList = document.getElementById(menuListId);</span>
<a href="#l1.10"></a><span id="l1.10">     let index = menuListIndexOf(menuList, value);</span>
<a href="#l1.11"></a><span id="l1.11">     if (index == -1) {</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-        throw &quot;menuListSelectItem: No such Element: &quot; + value;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+        throw new Error(&quot;menuListSelectItem: No such Element: &quot; + value);</span>
<a href="#l1.14"></a><span id="l1.14">     } else {</span>
<a href="#l1.15"></a><span id="l1.15">         menuList.selectedIndex = index;</span>
<a href="#l1.16"></a><span id="l1.16">     }</span>
<a href="#l1.17"></a><span id="l1.17"> }</span>
<a href="#l1.18"></a><span id="l1.18"> </span>
<a href="#l1.19"></a><span id="l1.19"> /**</span>
<a href="#l1.20"></a><span id="l1.20">  * Find index of menuitem with the given value, or return -1 if not found.</span>
<a href="#l1.21"></a><span id="l1.21">  *</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/modules/calHashedArray.jsm</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/modules/calHashedArray.jsm</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -59,44 +59,44 @@ cal.HashedArray.prototype = {</span>
<a href="#l2.4"></a><span id="l2.4">     /**</span>
<a href="#l2.5"></a><span id="l2.5">      * Returns the item, given its hashId</span>
<a href="#l2.6"></a><span id="l2.6">      *</span>
<a href="#l2.7"></a><span id="l2.7">      * @param id            The hashId of the item to retrieve.</span>
<a href="#l2.8"></a><span id="l2.8">      * @return              The retrieved item.</span>
<a href="#l2.9"></a><span id="l2.9">      */</span>
<a href="#l2.10"></a><span id="l2.10">     itemById: function(id) {</span>
<a href="#l2.11"></a><span id="l2.11">         if (this.mBatch &gt; 0) {</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-            throw &quot;Accessing Array by ID not supported in batch mode &quot;;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+            throw new Error(&quot;Accessing Array by ID not supported in batch mode&quot;);</span>
<a href="#l2.14"></a><span id="l2.14">         }</span>
<a href="#l2.15"></a><span id="l2.15">         return (id in this.mHash ? this.mArray[this.mHash[id]] : null);</span>
<a href="#l2.16"></a><span id="l2.16">     },</span>
<a href="#l2.17"></a><span id="l2.17"> </span>
<a href="#l2.18"></a><span id="l2.18">     /**</span>
<a href="#l2.19"></a><span id="l2.19">      * Returns the index of the given item. This function is cheap performance</span>
<a href="#l2.20"></a><span id="l2.20">      * wise, since it uses the hash</span>
<a href="#l2.21"></a><span id="l2.21">      *</span>
<a href="#l2.22"></a><span id="l2.22">      * @param item          The item to search for.</span>
<a href="#l2.23"></a><span id="l2.23">      * @return              The index of the item.</span>
<a href="#l2.24"></a><span id="l2.24">      */</span>
<a href="#l2.25"></a><span id="l2.25">     indexOf: function(item) {</span>
<a href="#l2.26"></a><span id="l2.26">         if (this.mBatch &gt; 0) {</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineminus">-            throw &quot;Accessing Array Indexes not supported in batch mode&quot;;</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineplus">+            throw new Error(&quot;Accessing Array Indexes not supported in batch mode&quot;);</span>
<a href="#l2.29"></a><span id="l2.29">         }</span>
<a href="#l2.30"></a><span id="l2.30">         let hashId = this.hashAccessor(item);</span>
<a href="#l2.31"></a><span id="l2.31">         return (hashId in this.mHash ? this.mHash[hashId] : -1);</span>
<a href="#l2.32"></a><span id="l2.32">     },</span>
<a href="#l2.33"></a><span id="l2.33"> </span>
<a href="#l2.34"></a><span id="l2.34">     /**</span>
<a href="#l2.35"></a><span id="l2.35">      * Remove the item with the given hashId.</span>
<a href="#l2.36"></a><span id="l2.36">      *</span>
<a href="#l2.37"></a><span id="l2.37">      * @param id            The id of the item to be removed</span>
<a href="#l2.38"></a><span id="l2.38">      */</span>
<a href="#l2.39"></a><span id="l2.39">     removeById: function(id) {</span>
<a href="#l2.40"></a><span id="l2.40">         if (this.mBatch &gt; 0) {</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineminus">-            throw &quot;Remvoing by ID in batch mode is not supported&quot;; /* TODO */</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineplus">+            throw new Error(&quot;Remvoing by ID in batch mode is not supported&quot;); /* TODO */</span>
<a href="#l2.43"></a><span id="l2.43">         }</span>
<a href="#l2.44"></a><span id="l2.44">         let index = this.mHash[id];</span>
<a href="#l2.45"></a><span id="l2.45">         delete this.mHash[id];</span>
<a href="#l2.46"></a><span id="l2.46">         this.mArray.splice(index, 1);</span>
<a href="#l2.47"></a><span id="l2.47">         this.reindex(index);</span>
<a href="#l2.48"></a><span id="l2.48">     },</span>
<a href="#l2.49"></a><span id="l2.49"> </span>
<a href="#l2.50"></a><span id="l2.50">     /**</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineat">@@ -217,17 +217,17 @@ cal.HashedArray.prototype = {</span>
<a href="#l2.52"></a><span id="l2.52">  * Performance Considerations:</span>
<a href="#l2.53"></a><span id="l2.53">  *  - Accessing items is fast</span>
<a href="#l2.54"></a><span id="l2.54">  *  - Adding and deleting items is O(n)</span>
<a href="#l2.55"></a><span id="l2.55">  *  - Modifying items is fast.</span>
<a href="#l2.56"></a><span id="l2.56">  */</span>
<a href="#l2.57"></a><span id="l2.57"> cal.SortedHashedArray = function(comparator) {</span>
<a href="#l2.58"></a><span id="l2.58">     cal.HashedArray.apply(this, arguments);</span>
<a href="#l2.59"></a><span id="l2.59">     if (!comparator) {</span>
<a href="#l2.60"></a><span id="l2.60" class="difflineminus">-        throw &quot;Sorted Hashed Array needs a comparator&quot;;</span>
<a href="#l2.61"></a><span id="l2.61" class="difflineplus">+        throw new Error(&quot;Sorted Hashed Array needs a comparator&quot;);</span>
<a href="#l2.62"></a><span id="l2.62">     }</span>
<a href="#l2.63"></a><span id="l2.63">     this.mCompFunc = comparator;</span>
<a href="#l2.64"></a><span id="l2.64"> };</span>
<a href="#l2.65"></a><span id="l2.65"> </span>
<a href="#l2.66"></a><span id="l2.66"> cal.SortedHashedArray.prototype = {</span>
<a href="#l2.67"></a><span id="l2.67">     __proto__: cal.HashedArray.prototype,</span>
<a href="#l2.68"></a><span id="l2.68"> </span>
<a href="#l2.69"></a><span id="l2.69">     mCompFunc: null,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/src/calCalendarManager.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/src/calCalendarManager.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -384,17 +384,17 @@ calCalendarManager.prototype = {</span>
<a href="#l3.4"></a><span id="l3.4">             if (stmt) {</span>
<a href="#l3.5"></a><span id="l3.5">                 stmt.reset();</span>
<a href="#l3.6"></a><span id="l3.6">             }</span>
<a href="#l3.7"></a><span id="l3.7">             cal.ERROR(&quot;++++++++++++ calMgrGetSchemaVersion() error: &quot; + db.lastErrorString);</span>
<a href="#l3.8"></a><span id="l3.8">             Cu.reportError(&quot;Error getting calendar schema version! DB Error: &quot; + db.lastErrorString);</span>
<a href="#l3.9"></a><span id="l3.9">             throw e;</span>
<a href="#l3.10"></a><span id="l3.10">         }</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-        throw table + &quot; SELECT returned no results&quot;;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+        throw new Error(table + &quot; SELECT returned no results&quot;);</span>
<a href="#l3.14"></a><span id="l3.14">     },</span>
<a href="#l3.15"></a><span id="l3.15"> </span>
<a href="#l3.16"></a><span id="l3.16">     //</span>
<a href="#l3.17"></a><span id="l3.17">     // / DB migration code ends here</span>
<a href="#l3.18"></a><span id="l3.18">     //</span>
<a href="#l3.19"></a><span id="l3.19"> </span>
<a href="#l3.20"></a><span id="l3.20">     alertAndQuit: function() {</span>
<a href="#l3.21"></a><span id="l3.21">         // We want to include the extension name in the error message rather</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/src/calItemBase.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/src/calItemBase.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -431,32 +431,32 @@ calItemBase.prototype = {</span>
<a href="#l4.4"></a><span id="l4.4">     setPropertyParameter: function(aPropName, aParamName, aParamValue) {</span>
<a href="#l4.5"></a><span id="l4.5">         let propName = aPropName.toUpperCase();</span>
<a href="#l4.6"></a><span id="l4.6">         let paramName = aParamName.toUpperCase();</span>
<a href="#l4.7"></a><span id="l4.7">         this.modify();</span>
<a href="#l4.8"></a><span id="l4.8">         if (!(propName in this.mPropertyParams)) {</span>
<a href="#l4.9"></a><span id="l4.9">             if (this.hasProperty(propName)) {</span>
<a href="#l4.10"></a><span id="l4.10">                 this.mPropertyParams[propName] = {};</span>
<a href="#l4.11"></a><span id="l4.11">             } else {</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-                throw &quot;Property &quot; + aPropName + &quot; not set&quot;;</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+                throw new Error(&quot;Property &quot; + aPropName + &quot; not set&quot;);</span>
<a href="#l4.14"></a><span id="l4.14">             }</span>
<a href="#l4.15"></a><span id="l4.15">         }</span>
<a href="#l4.16"></a><span id="l4.16">         if (aParamValue || !isNaN(parseInt(aParamValue, 10))) {</span>
<a href="#l4.17"></a><span id="l4.17">             this.mPropertyParams[propName][paramName] = aParamValue;</span>
<a href="#l4.18"></a><span id="l4.18">         } else {</span>
<a href="#l4.19"></a><span id="l4.19">             delete this.mPropertyParams[propName][paramName];</span>
<a href="#l4.20"></a><span id="l4.20">         }</span>
<a href="#l4.21"></a><span id="l4.21">         return aParamValue;</span>
<a href="#l4.22"></a><span id="l4.22">     },</span>
<a href="#l4.23"></a><span id="l4.23"> </span>
<a href="#l4.24"></a><span id="l4.24">     // nsISimpleEnumerator getParameterEnumerator(in AString aPropertyName);</span>
<a href="#l4.25"></a><span id="l4.25">     getParameterEnumerator: function(aPropName) {</span>
<a href="#l4.26"></a><span id="l4.26">         let propName = aPropName.toUpperCase();</span>
<a href="#l4.27"></a><span id="l4.27">         if (!(propName in this.mPropertyParams)) {</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineminus">-            throw &quot;Property &quot; + aPropName + &quot; not set&quot;;</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineplus">+            throw new Error(&quot;Property &quot; + aPropName + &quot; not set&quot;);</span>
<a href="#l4.30"></a><span id="l4.30">         }</span>
<a href="#l4.31"></a><span id="l4.31">         let parameters = this.mPropertyParams[propName];</span>
<a href="#l4.32"></a><span id="l4.32">         return { // nsISimpleEnumerator</span>
<a href="#l4.33"></a><span id="l4.33">             QueryInterface: ChromeUtils.generateQI([Ci.nsISimpleEnumerator]),</span>
<a href="#l4.34"></a><span id="l4.34"> </span>
<a href="#l4.35"></a><span id="l4.35">             mParamNames: Object.keys(parameters),</span>
<a href="#l4.36"></a><span id="l4.36">             hasMoreElements: function() {</span>
<a href="#l4.37"></a><span id="l4.37">                 return (this.mParamNames.length &gt; 0);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/providers/caldav/calDavCalendar.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/providers/caldav/calDavCalendar.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -1348,17 +1348,17 @@ calDavCalendar.prototype = {</span>
<a href="#l5.4"></a><span id="l5.4">             // we'll force the renegotiation in a sync query, using OPTIONS to keep</span>
<a href="#l5.5"></a><span id="l5.5">             // it quick</span>
<a href="#l5.6"></a><span id="l5.6">             let headchannel = cal.provider.prepHttpChannel(this.makeUri(), null, null, this);</span>
<a href="#l5.7"></a><span id="l5.7">             headchannel.requestMethod = &quot;OPTIONS&quot;;</span>
<a href="#l5.8"></a><span id="l5.8">             headchannel.open();</span>
<a href="#l5.9"></a><span id="l5.9">             headchannel.QueryInterface(Ci.nsIHttpChannel);</span>
<a href="#l5.10"></a><span id="l5.10">             try {</span>
<a href="#l5.11"></a><span id="l5.11">                 if (headchannel.responseStatus != 200) {</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-                    throw &quot;OPTIONS returned unexpected status code: &quot; + headchannel.responseStatus;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+                    throw new Error(&quot;OPTIONS returned unexpected status code: &quot; + headchannel.responseStatus);</span>
<a href="#l5.14"></a><span id="l5.14">                 }</span>
<a href="#l5.15"></a><span id="l5.15">             } catch (e) {</span>
<a href="#l5.16"></a><span id="l5.16">                 cal.WARN(&quot;CalDAV: Exception: &quot; + e);</span>
<a href="#l5.17"></a><span id="l5.17">                 notifyListener(Cr.NS_ERROR_FAILURE);</span>
<a href="#l5.18"></a><span id="l5.18">             }</span>
<a href="#l5.19"></a><span id="l5.19">         }</span>
<a href="#l5.20"></a><span id="l5.20"> </span>
<a href="#l5.21"></a><span id="l5.21">         // Call getUpdatedItems right away if its the first refresh</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -1895,17 +1895,17 @@ calStorageCalendar.prototype = {</span>
<a href="#l6.4"></a><span id="l6.4">             case &quot;EXDATE&quot;:</span>
<a href="#l6.5"></a><span id="l6.5">                 ritem = Cc[&quot;@mozilla.org/calendar/recurrence-date;1&quot;].createInstance(Ci.calIRecurrenceDate);</span>
<a href="#l6.6"></a><span id="l6.6">                 break;</span>
<a href="#l6.7"></a><span id="l6.7">             case &quot;RRULE&quot;:</span>
<a href="#l6.8"></a><span id="l6.8">             case &quot;EXRULE&quot;:</span>
<a href="#l6.9"></a><span id="l6.9">                 ritem = cal.createRecurrenceRule();</span>
<a href="#l6.10"></a><span id="l6.10">                 break;</span>
<a href="#l6.11"></a><span id="l6.11">             default:</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-                throw &quot;Unknown recurrence item: &quot; + prop.propertyName;</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+                throw new Error(&quot;Unknown recurrence item: &quot; + prop.propertyName);</span>
<a href="#l6.14"></a><span id="l6.14">         }</span>
<a href="#l6.15"></a><span id="l6.15"> </span>
<a href="#l6.16"></a><span id="l6.16">         ritem.icalProperty = prop;</span>
<a href="#l6.17"></a><span id="l6.17">         return ritem;</span>
<a href="#l6.18"></a><span id="l6.18">     },</span>
<a href="#l6.19"></a><span id="l6.19"> </span>
<a href="#l6.20"></a><span id="l6.20">     //</span>
<a href="#l6.21"></a><span id="l6.21">     // get item from db or from cache with given iid</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/providers/storage/calStorageUpgrade.jsm</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/providers/storage/calStorageUpgrade.jsm</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -173,17 +173,17 @@ function getVersion(db) {</span>
<a href="#l7.4"></a><span id="l7.4">     } catch (e) {</span>
<a href="#l7.5"></a><span id="l7.5">         throw reportErrorAndRollback(db, e);</span>
<a href="#l7.6"></a><span id="l7.6">     } finally {</span>
<a href="#l7.7"></a><span id="l7.7">         if (selectSchemaVersion) {</span>
<a href="#l7.8"></a><span id="l7.8">             selectSchemaVersion.finalize();</span>
<a href="#l7.9"></a><span id="l7.9">         }</span>
<a href="#l7.10"></a><span id="l7.10">     }</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-    throw &quot;cal_calendar_schema_version SELECT returned no results&quot;;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+    throw new Error(&quot;cal_calendar_schema_version SELECT returned no results&quot;);</span>
<a href="#l7.14"></a><span id="l7.14"> }</span>
<a href="#l7.15"></a><span id="l7.15"> </span>
<a href="#l7.16"></a><span id="l7.16"> /**</span>
<a href="#l7.17"></a><span id="l7.17">  * Backup the database and notify the user via error console of the process</span>
<a href="#l7.18"></a><span id="l7.18">  */</span>
<a href="#l7.19"></a><span id="l7.19"> function backupDB(db, currentVersion) {</span>
<a href="#l7.20"></a><span id="l7.20">     cal.LOG(&quot;Storage: Backing up current database...&quot;);</span>
<a href="#l7.21"></a><span id="l7.21">     try {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/test/unit/test_search_service.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/test/unit/test_search_service.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -63,17 +63,17 @@ function test_found() {</span>
<a href="#l8.4"></a><span id="l8.4">     ok(provider2.called);</span>
<a href="#l8.5"></a><span id="l8.5"> }</span>
<a href="#l8.6"></a><span id="l8.6"> </span>
<a href="#l8.7"></a><span id="l8.7"> function test_failure() {</span>
<a href="#l8.8"></a><span id="l8.8">     search.getProviders({}).forEach(search.removeProvider, search);</span>
<a href="#l8.9"></a><span id="l8.9"> </span>
<a href="#l8.10"></a><span id="l8.10">     let provider = {</span>
<a href="#l8.11"></a><span id="l8.11">         searchForCalendars: function(aStr, aHint, aMax, aListener) {</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-            throw &quot;error&quot;;</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+            throw new Error(&quot;error&quot;);</span>
<a href="#l8.14"></a><span id="l8.14">         }</span>
<a href="#l8.15"></a><span id="l8.15">     };</span>
<a href="#l8.16"></a><span id="l8.16"> </span>
<a href="#l8.17"></a><span id="l8.17">     let listener = {</span>
<a href="#l8.18"></a><span id="l8.18">         called: false,</span>
<a href="#l8.19"></a><span id="l8.19">         onResult: function(request, result) {</span>
<a href="#l8.20"></a><span id="l8.20">             ok(!this.called);</span>
<a href="#l8.21"></a><span id="l8.21">             this.called = true;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/chat/components/src/imCommands.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/chat/components/src/imCommands.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -162,17 +162,17 @@ CommandsService.prototype = {</span>
<a href="#l9.4"></a><span id="l9.4">     if (aConversation)</span>
<a href="#l9.5"></a><span id="l9.5">       result = result.filter(this._usageContextFilter(aConversation));</span>
<a href="#l9.6"></a><span id="l9.6">     commandCount.value = result.length;</span>
<a href="#l9.7"></a><span id="l9.7">     return result;</span>
<a href="#l9.8"></a><span id="l9.8">   },</span>
<a href="#l9.9"></a><span id="l9.9">   // List only the commands for a protocol (excluding the global commands).</span>
<a href="#l9.10"></a><span id="l9.10">   listCommandsForProtocol(aPrplId, commandCount) {</span>
<a href="#l9.11"></a><span id="l9.11">     if (!aPrplId)</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-      throw &quot;You must provide a prpl ID.&quot;;</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+      throw new Error(&quot;You must provide a prpl ID.&quot;);</span>
<a href="#l9.14"></a><span id="l9.14"> </span>
<a href="#l9.15"></a><span id="l9.15">     let result = [];</span>
<a href="#l9.16"></a><span id="l9.16">     for (let name in this._commands) {</span>
<a href="#l9.17"></a><span id="l9.17">       let commands = this._commands[name];</span>
<a href="#l9.18"></a><span id="l9.18">       if (commands.hasOwnProperty(aPrplId))</span>
<a href="#l9.19"></a><span id="l9.19">         result.push(commands[aPrplId]);</span>
<a href="#l9.20"></a><span id="l9.20">     }</span>
<a href="#l9.21"></a><span id="l9.21">     commandCount.value = result.length;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/chat/components/src/imContacts.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/chat/components/src/imContacts.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -487,19 +487,19 @@ Contact.prototype = {</span>
<a href="#l10.4"></a><span id="l10.4">     statement.params.contactId = this.id;</span>
<a href="#l10.5"></a><span id="l10.5">     statement.params.tagId = aTag.id;</span>
<a href="#l10.6"></a><span id="l10.6">     executeAsyncThenFinalize(statement);</span>
<a href="#l10.7"></a><span id="l10.7">   },</span>
<a href="#l10.8"></a><span id="l10.8">   hasTag(aTag) { return this._tags.some((t =&gt; t.id == aTag.id)); },</span>
<a href="#l10.9"></a><span id="l10.9">   _massMove: false,</span>
<a href="#l10.10"></a><span id="l10.10">   removeTag(aTag) {</span>
<a href="#l10.11"></a><span id="l10.11">     if (!this.hasTag(aTag))</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-      throw &quot;Attempting to remove a tag that the contact doesn't have&quot;;</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+      throw new Error(&quot;Attempting to remove a tag that the contact doesn't have&quot;);</span>
<a href="#l10.14"></a><span id="l10.14">     if (this._tags.length == 1)</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineminus">-      throw &quot;Attempting to remove the last tag of a contact&quot;;</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineplus">+      throw new Error(&quot;Attempting to remove the last tag of a contact&quot;);</span>
<a href="#l10.17"></a><span id="l10.17"> </span>
<a href="#l10.18"></a><span id="l10.18">     this._massMove = true;</span>
<a href="#l10.19"></a><span id="l10.19">     let hasTag = this.hasTag.bind(this);</span>
<a href="#l10.20"></a><span id="l10.20">     let newTag = this._tags[this._tags[0].id != aTag.id ? 0 : 1];</span>
<a href="#l10.21"></a><span id="l10.21">     let moved = false;</span>
<a href="#l10.22"></a><span id="l10.22">     this._buddies.forEach(function(aBuddy) {</span>
<a href="#l10.23"></a><span id="l10.23">       aBuddy._accounts.forEach(function(aAccountBuddy) {</span>
<a href="#l10.24"></a><span id="l10.24">         if (aAccountBuddy.tag.id == aTag.id) {</span>
<a href="#l10.25"></a><span id="l10.25" class="difflineat">@@ -613,17 +613,17 @@ Contact.prototype = {</span>
<a href="#l10.26"></a><span id="l10.26">     for (let buddy of contact.getBuddies())</span>
<a href="#l10.27"></a><span id="l10.27">       buddy.contact = this;</span>
<a href="#l10.28"></a><span id="l10.28">     this._updatePreferredBuddy();</span>
<a href="#l10.29"></a><span id="l10.29">   },</span>
<a href="#l10.30"></a><span id="l10.30">   moveBuddyBefore(aBuddy, aBeforeBuddy) {</span>
<a href="#l10.31"></a><span id="l10.31">     let buddy = BuddiesById[aBuddy.id]; // remove XPConnect wrapper</span>
<a href="#l10.32"></a><span id="l10.32">     let oldPosition = this._buddies.indexOf(buddy);</span>
<a href="#l10.33"></a><span id="l10.33">     if (oldPosition == -1)</span>
<a href="#l10.34"></a><span id="l10.34" class="difflineminus">-      throw &quot;aBuddy isn't attached to this contact&quot;;</span>
<a href="#l10.35"></a><span id="l10.35" class="difflineplus">+      throw new Error(&quot;aBuddy isn't attached to this contact&quot;);</span>
<a href="#l10.36"></a><span id="l10.36"> </span>
<a href="#l10.37"></a><span id="l10.37">     let newPosition = -1;</span>
<a href="#l10.38"></a><span id="l10.38">     if (aBeforeBuddy)</span>
<a href="#l10.39"></a><span id="l10.39">       newPosition = this._buddies.indexOf(BuddiesById[aBeforeBuddy.id]);</span>
<a href="#l10.40"></a><span id="l10.40">     if (newPosition == -1)</span>
<a href="#l10.41"></a><span id="l10.41">       newPosition = this._buddies.length - 1;</span>
<a href="#l10.42"></a><span id="l10.42"> </span>
<a href="#l10.43"></a><span id="l10.43">     if (oldPosition == newPosition)</span>
<a href="#l10.44"></a><span id="l10.44" class="difflineat">@@ -665,17 +665,17 @@ Contact.prototype = {</span>
<a href="#l10.45"></a><span id="l10.45"> </span>
<a href="#l10.46"></a><span id="l10.46">       delete this._tags;</span>
<a href="#l10.47"></a><span id="l10.47">       delete this._buddies;</span>
<a href="#l10.48"></a><span id="l10.48">       delete this._observers;</span>
<a href="#l10.49"></a><span id="l10.49">     }</span>
<a href="#l10.50"></a><span id="l10.50">     else {</span>
<a href="#l10.51"></a><span id="l10.51">       let index = this._buddies.indexOf(aBuddy);</span>
<a href="#l10.52"></a><span id="l10.52">       if (index == -1)</span>
<a href="#l10.53"></a><span id="l10.53" class="difflineminus">-        throw &quot;Removing an unknown buddy from contact &quot; + this._id;</span>
<a href="#l10.54"></a><span id="l10.54" class="difflineplus">+        throw new Error(&quot;Removing an unknown buddy from contact &quot; + this._id);</span>
<a href="#l10.55"></a><span id="l10.55"> </span>
<a href="#l10.56"></a><span id="l10.56">       this._buddies = this._buddies.filter(b =&gt; b !== aBuddy);</span>
<a href="#l10.57"></a><span id="l10.57"> </span>
<a href="#l10.58"></a><span id="l10.58">       // If we are actually removing the whole contact, don't bother updating</span>
<a href="#l10.59"></a><span id="l10.59">       // the positions or the preferred buddy.</span>
<a href="#l10.60"></a><span id="l10.60">       if (this._massRemove)</span>
<a href="#l10.61"></a><span id="l10.61">         return;</span>
<a href="#l10.62"></a><span id="l10.62"> </span>
<a href="#l10.63"></a><span id="l10.63" class="difflineat">@@ -686,17 +686,17 @@ Contact.prototype = {</span>
<a href="#l10.64"></a><span id="l10.64">       if (this._preferredBuddy.id == aBuddy.id)</span>
<a href="#l10.65"></a><span id="l10.65">         this._updatePreferredBuddy();</span>
<a href="#l10.66"></a><span id="l10.66">     }</span>
<a href="#l10.67"></a><span id="l10.67">   },</span>
<a href="#l10.68"></a><span id="l10.68">   _updatePositions(aIndexBegin, aIndexEnd) {</span>
<a href="#l10.69"></a><span id="l10.69">     if (aIndexEnd === undefined)</span>
<a href="#l10.70"></a><span id="l10.70">       aIndexEnd = this._buddies.length - 1;</span>
<a href="#l10.71"></a><span id="l10.71">     if (aIndexBegin &gt; aIndexEnd)</span>
<a href="#l10.72"></a><span id="l10.72" class="difflineminus">-      throw &quot;_updatePositions: Invalid indexes&quot;;</span>
<a href="#l10.73"></a><span id="l10.73" class="difflineplus">+      throw new Error(&quot;_updatePositions: Invalid indexes&quot;);</span>
<a href="#l10.74"></a><span id="l10.74"> </span>
<a href="#l10.75"></a><span id="l10.75">     let statement =</span>
<a href="#l10.76"></a><span id="l10.76">       DBConn.createStatement(&quot;UPDATE buddies SET position = :position &quot; +</span>
<a href="#l10.77"></a><span id="l10.77">                              &quot;WHERE id = :buddyId&quot;);</span>
<a href="#l10.78"></a><span id="l10.78">     for (let i = aIndexBegin; i &lt;= aIndexEnd; ++i) {</span>
<a href="#l10.79"></a><span id="l10.79">       statement.params.position = i;</span>
<a href="#l10.80"></a><span id="l10.80">       statement.params.buddyId = this._buddies[i].id;</span>
<a href="#l10.81"></a><span id="l10.81">       statement.executeAsync();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/chat/components/src/imConversations.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/chat/components/src/imConversations.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -166,17 +166,17 @@ UIConversation.prototype = {</span>
<a href="#l11.4"></a><span id="l11.4">     }</span>
<a href="#l11.5"></a><span id="l11.5">   },</span>
<a href="#l11.6"></a><span id="l11.6">   // Returns a boolean indicating if the ui-conversation was closed.</span>
<a href="#l11.7"></a><span id="l11.7">   // If the conversation was closed, aContactId.value is set to the contact id</span>
<a href="#l11.8"></a><span id="l11.8">   // or 0 if no contact was associated with the conversation.</span>
<a href="#l11.9"></a><span id="l11.9">   removeTarget(aPrplConversation, aContactId) {</span>
<a href="#l11.10"></a><span id="l11.10">     let id = aPrplConversation.id;</span>
<a href="#l11.11"></a><span id="l11.11">     if (!(id in this._prplConv))</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-      throw &quot;unknown prpl conversation&quot;;</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+      throw new Error(&quot;unknown prpl conversation&quot;);</span>
<a href="#l11.14"></a><span id="l11.14"> </span>
<a href="#l11.15"></a><span id="l11.15">     delete this._prplConv[id];</span>
<a href="#l11.16"></a><span id="l11.16">     if (this._currentTargetId != id)</span>
<a href="#l11.17"></a><span id="l11.17">       return false;</span>
<a href="#l11.18"></a><span id="l11.18"> </span>
<a href="#l11.19"></a><span id="l11.19">     for (let newId in this._prplConv) {</span>
<a href="#l11.20"></a><span id="l11.20">       this.changeTargetTo(this._prplConv[newId]);</span>
<a href="#l11.21"></a><span id="l11.21">       return false;</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineat">@@ -648,17 +648,17 @@ ConversationsService.prototype = {</span>
<a href="#l11.23"></a><span id="l11.23">     if (aConvCount)</span>
<a href="#l11.24"></a><span id="l11.24">       aConvCount.value = rv.length;</span>
<a href="#l11.25"></a><span id="l11.25">     return rv;</span>
<a href="#l11.26"></a><span id="l11.26">   },</span>
<a href="#l11.27"></a><span id="l11.27">   getUIConversation(aPrplConversation) {</span>
<a href="#l11.28"></a><span id="l11.28">     let id = aPrplConversation.id;</span>
<a href="#l11.29"></a><span id="l11.29">     if (this._uiConv &amp;&amp; id in this._uiConv)</span>
<a href="#l11.30"></a><span id="l11.30">       return this._uiConv[id];</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-    throw &quot;Unknown conversation&quot;;</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+    throw new Error(&quot;Unknown conversation&quot;);</span>
<a href="#l11.33"></a><span id="l11.33">   },</span>
<a href="#l11.34"></a><span id="l11.34">   getUIConversationByContactId(aId) {</span>
<a href="#l11.35"></a><span id="l11.35">     return (aId in this._uiConvByContactId) ? this._uiConvByContactId[aId] : null;</span>
<a href="#l11.36"></a><span id="l11.36">   },</span>
<a href="#l11.37"></a><span id="l11.37"> </span>
<a href="#l11.38"></a><span id="l11.38">   getConversations() { return new nsSimpleEnumerator(this._prplConversations); },</span>
<a href="#l11.39"></a><span id="l11.39">   getConversationById(aId) {</span>
<a href="#l11.40"></a><span id="l11.40">     for (let conv of this._prplConversations)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/chat/components/src/logger.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/chat/components/src/logger.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -937,17 +937,17 @@ Logger.prototype = {</span>
<a href="#l12.4"></a><span id="l12.4">       let statusText = aSubject.statusText;</span>
<a href="#l12.5"></a><span id="l12.5">       if (statusText)</span>
<a href="#l12.6"></a><span id="l12.6">         status += &quot; (\&quot;&quot; + statusText + &quot;\&quot;)&quot;;</span>
<a href="#l12.7"></a><span id="l12.7"> </span>
<a href="#l12.8"></a><span id="l12.8">       let nameText = aSubject.displayName + &quot; (&quot; + aSubject.userName + &quot;)&quot;;</span>
<a href="#l12.9"></a><span id="l12.9">       getSystemLogWriter(aSubject.account).logEvent(nameText + &quot; is now &quot; + status);</span>
<a href="#l12.10"></a><span id="l12.10">       break;</span>
<a href="#l12.11"></a><span id="l12.11">     default:</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-      throw &quot;Unexpected notification &quot; + aTopic;</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+      throw new Error(&quot;Unexpected notification &quot; + aTopic);</span>
<a href="#l12.14"></a><span id="l12.14">     }</span>
<a href="#l12.15"></a><span id="l12.15">   },</span>
<a href="#l12.16"></a><span id="l12.16"> </span>
<a href="#l12.17"></a><span id="l12.17">   QueryInterface: ChromeUtils.generateQI([Ci.nsIObserver, Ci.imILogger]),</span>
<a href="#l12.18"></a><span id="l12.18">   classDescription: &quot;Logger&quot;,</span>
<a href="#l12.19"></a><span id="l12.19">   classID: Components.ID(&quot;{fb0dc220-2c7a-4216-9f19-6b8f3480eae9}&quot;),</span>
<a href="#l12.20"></a><span id="l12.20">   contractID: &quot;@mozilla.org/chat/logger;1&quot;,</span>
<a href="#l12.21"></a><span id="l12.21"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/chat/content/imAccountOptionsHelper.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/chat/content/imAccountOptionsHelper.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -83,17 +83,17 @@ var accountOptionsHelper = {</span>
<a href="#l13.4"></a><span id="l13.4">           rows.appendChild(this.createTextbox(null, opt.getString(), text, name,</span>
<a href="#l13.5"></a><span id="l13.5">                                               containerType));</span>
<a href="#l13.6"></a><span id="l13.6">           break;</span>
<a href="#l13.7"></a><span id="l13.7">         case Ci.prplIPref.typeList:</span>
<a href="#l13.8"></a><span id="l13.8">           rows.appendChild(this.createMenulist(opt.getList(), text, name));</span>
<a href="#l13.9"></a><span id="l13.9">           document.getElementById(name).value = opt.getListDefault();</span>
<a href="#l13.10"></a><span id="l13.10">           break;</span>
<a href="#l13.11"></a><span id="l13.11">         default:</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-          throw &quot;unknown preference type &quot; + opt.type;</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+          throw new Error(&quot;unknown preference type &quot; + opt.type);</span>
<a href="#l13.14"></a><span id="l13.14">       }</span>
<a href="#l13.15"></a><span id="l13.15">       if (aAttributes &amp;&amp; aAttributes[opt.type]) {</span>
<a href="#l13.16"></a><span id="l13.16">         let element = document.getElementById(name);</span>
<a href="#l13.17"></a><span id="l13.17">         for (let attr of aAttributes[opt.type])</span>
<a href="#l13.18"></a><span id="l13.18">           element.setAttribute(attr.name, attr.value);</span>
<a href="#l13.19"></a><span id="l13.19">       }</span>
<a href="#l13.20"></a><span id="l13.20">       haveOptions = true;</span>
<a href="#l13.21"></a><span id="l13.21">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/chat/modules/NormalizedMap.jsm</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/chat/modules/NormalizedMap.jsm</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -13,17 +13,17 @@ this.EXPORTED_SYMBOLS = [&quot;NormalizedMap&quot;</span>
<a href="#l14.4"></a><span id="l14.4">  *  aIterable:    A iterable to prefill the map with, keys will be normalized.</span>
<a href="#l14.5"></a><span id="l14.5">  *</span>
<a href="#l14.6"></a><span id="l14.6">  * Returns a Map object that will automatically run aNormalize on any operations</span>
<a href="#l14.7"></a><span id="l14.7">  * involving keys.</span>
<a href="#l14.8"></a><span id="l14.8">  */</span>
<a href="#l14.9"></a><span id="l14.9"> class NormalizedMap extends Map {</span>
<a href="#l14.10"></a><span id="l14.10">   constructor(aNormalize, aIterable = []) {</span>
<a href="#l14.11"></a><span id="l14.11">     if (typeof(aNormalize) != &quot;function&quot;)</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-      throw &quot;NormalizedMap must have a normalize function!&quot;;</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+      throw new Error(&quot;NormalizedMap must have a normalize function!&quot;);</span>
<a href="#l14.14"></a><span id="l14.14">     // Create the wrapped Map; use the provided iterable after normalizing the</span>
<a href="#l14.15"></a><span id="l14.15">     // keys.</span>
<a href="#l14.16"></a><span id="l14.16">     let entries = [...aIterable].map(([key, val]) =&gt; [aNormalize(key), val]);</span>
<a href="#l14.17"></a><span id="l14.17">     super(entries);</span>
<a href="#l14.18"></a><span id="l14.18">     // Note: In derived classes, super() must be called before using 'this'.</span>
<a href="#l14.19"></a><span id="l14.19">     this._normalize = aNormalize;</span>
<a href="#l14.20"></a><span id="l14.20">   }</span>
<a href="#l14.21"></a><span id="l14.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/chat/modules/imContentSink.jsm</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/chat/modules/imContentSink.jsm</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -171,20 +171,20 @@ function initGlobalRuleset()</span>
<a href="#l15.4"></a><span id="l15.4">   gGlobalRuleset = newRuleset();</span>
<a href="#l15.5"></a><span id="l15.5"> </span>
<a href="#l15.6"></a><span id="l15.6">   Services.prefs.addObserver(kModePref, styleObserver);</span>
<a href="#l15.7"></a><span id="l15.7"> }</span>
<a href="#l15.8"></a><span id="l15.8"> </span>
<a href="#l15.9"></a><span id="l15.9"> var styleObserver = {</span>
<a href="#l15.10"></a><span id="l15.10">   observe(aObject, aTopic, aMsg) {</span>
<a href="#l15.11"></a><span id="l15.11">     if (aTopic != &quot;nsPref:changed&quot; || aMsg != kModePref)</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-      throw &quot;bad notification&quot;;</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+      throw new Error(&quot;bad notification&quot;);</span>
<a href="#l15.14"></a><span id="l15.14"> </span>
<a href="#l15.15"></a><span id="l15.15">     if (!gGlobalRuleset)</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineminus">-      throw &quot;gGlobalRuleset not initialized&quot;;</span>
<a href="#l15.17"></a><span id="l15.17" class="difflineplus">+      throw new Error(&quot;gGlobalRuleset not initialized&quot;);</span>
<a href="#l15.18"></a><span id="l15.18"> </span>
<a href="#l15.19"></a><span id="l15.19">     setBaseRuleset(getModePref(), gGlobalRuleset);</span>
<a href="#l15.20"></a><span id="l15.20">   },</span>
<a href="#l15.21"></a><span id="l15.21"> };</span>
<a href="#l15.22"></a><span id="l15.22"> </span>
<a href="#l15.23"></a><span id="l15.23"> function getModePref()</span>
<a href="#l15.24"></a><span id="l15.24"> {</span>
<a href="#l15.25"></a><span id="l15.25">   let baseNum = Services.prefs.getIntPref(kModePref);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/chat/modules/imSmileys.jsm</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/chat/modules/imSmileys.jsm</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -36,29 +36,29 @@ Object.defineProperty(this, &quot;gTheme&quot;, {</span>
<a href="#l16.4"></a><span id="l16.4"> </span>
<a href="#l16.5"></a><span id="l16.5"> var gPrefObserver = {</span>
<a href="#l16.6"></a><span id="l16.6">   init() {</span>
<a href="#l16.7"></a><span id="l16.7">     Services.prefs.addObserver(kEmoticonsThemePref, gPrefObserver);</span>
<a href="#l16.8"></a><span id="l16.8">   },</span>
<a href="#l16.9"></a><span id="l16.9"> </span>
<a href="#l16.10"></a><span id="l16.10">   observe(aObject, aTopic, aMsg) {</span>
<a href="#l16.11"></a><span id="l16.11">     if (aTopic != &quot;nsPref:changed&quot; || aMsg != kEmoticonsThemePref)</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-      throw &quot;bad notification&quot;;</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+      throw new Error(&quot;bad notification&quot;);</span>
<a href="#l16.14"></a><span id="l16.14"> </span>
<a href="#l16.15"></a><span id="l16.15">     gTheme = getTheme();</span>
<a href="#l16.16"></a><span id="l16.16">   },</span>
<a href="#l16.17"></a><span id="l16.17"> };</span>
<a href="#l16.18"></a><span id="l16.18"> </span>
<a href="#l16.19"></a><span id="l16.19"> function getSmileRealURI(aSmile)</span>
<a href="#l16.20"></a><span id="l16.20"> {</span>
<a href="#l16.21"></a><span id="l16.21">   aSmile = Services.textToSubURI.unEscapeURIForUI(&quot;UTF-8&quot;, aSmile);</span>
<a href="#l16.22"></a><span id="l16.22">   if (aSmile in gTheme.iconsHash)</span>
<a href="#l16.23"></a><span id="l16.23">     return gTheme.baseUri + gTheme.iconsHash[aSmile].filename;</span>
<a href="#l16.24"></a><span id="l16.24"> </span>
<a href="#l16.25"></a><span id="l16.25" class="difflineminus">-  throw &quot;Invalid smile!&quot;;</span>
<a href="#l16.26"></a><span id="l16.26" class="difflineplus">+  throw new Error(&quot;Invalid smile!&quot;);</span>
<a href="#l16.27"></a><span id="l16.27"> }</span>
<a href="#l16.28"></a><span id="l16.28"> </span>
<a href="#l16.29"></a><span id="l16.29"> function getSmileyList(aThemeName)</span>
<a href="#l16.30"></a><span id="l16.30"> {</span>
<a href="#l16.31"></a><span id="l16.31">   let theme = aThemeName == gTheme.name ? gTheme : getTheme(aThemeName);</span>
<a href="#l16.32"></a><span id="l16.32">   if (!theme.json)</span>
<a href="#l16.33"></a><span id="l16.33">     return null;</span>
<a href="#l16.34"></a><span id="l16.34"> </span>
<a href="#l16.35"></a><span id="l16.35" class="difflineat">@@ -214,17 +214,17 @@ function smileNode(aNode)</span>
<a href="#l16.36"></a><span id="l16.36">       smileTextNode(node);</span>
<a href="#l16.37"></a><span id="l16.37">     }</span>
<a href="#l16.38"></a><span id="l16.38">   }</span>
<a href="#l16.39"></a><span id="l16.39"> }</span>
<a href="#l16.40"></a><span id="l16.40"> </span>
<a href="#l16.41"></a><span id="l16.41"> function smileImMarkup(aDocument, aText)</span>
<a href="#l16.42"></a><span id="l16.42"> {</span>
<a href="#l16.43"></a><span id="l16.43">   if (!aDocument)</span>
<a href="#l16.44"></a><span id="l16.44" class="difflineminus">-    throw &quot;providing an HTML document is required&quot;;</span>
<a href="#l16.45"></a><span id="l16.45" class="difflineplus">+    throw new Error(&quot;providing an HTML document is required&quot;);</span>
<a href="#l16.46"></a><span id="l16.46"> </span>
<a href="#l16.47"></a><span id="l16.47">   // return early if smileys are disabled</span>
<a href="#l16.48"></a><span id="l16.48">   if (!gTheme.iconsHash)</span>
<a href="#l16.49"></a><span id="l16.49">     return aText;</span>
<a href="#l16.50"></a><span id="l16.50"> </span>
<a href="#l16.51"></a><span id="l16.51">   let div = aDocument.createElement(&quot;div&quot;);</span>
<a href="#l16.52"></a><span id="l16.52">   // eslint-disable-next-line no-unsanitized/property</span>
<a href="#l16.53"></a><span id="l16.53">   div.innerHTML = aText;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/chat/modules/imThemes.jsm</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/chat/modules/imThemes.jsm</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -93,26 +93,26 @@ function HTMLTheme(aBaseURI)</span>
<a href="#l17.4"></a><span id="l17.4"> </span>
<a href="#l17.5"></a><span id="l17.5">   for (let id in files) {</span>
<a href="#l17.6"></a><span id="l17.6">     let html = getChromeFile(aBaseURI + files[id]);</span>
<a href="#l17.7"></a><span id="l17.7">     if (html)</span>
<a href="#l17.8"></a><span id="l17.8">       Object.defineProperty(this, id, {value: html});</span>
<a href="#l17.9"></a><span id="l17.9">   }</span>
<a href="#l17.10"></a><span id="l17.10"> </span>
<a href="#l17.11"></a><span id="l17.11">   if (!(&quot;incomingContent&quot; in files))</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-    throw &quot;Invalid theme: Incoming/Content.html is missing!&quot;;</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+    throw new Error(&quot;Invalid theme: Incoming/Content.html is missing!&quot;);</span>
<a href="#l17.14"></a><span id="l17.14"> }</span>
<a href="#l17.15"></a><span id="l17.15"> </span>
<a href="#l17.16"></a><span id="l17.16"> HTMLTheme.prototype = {</span>
<a href="#l17.17"></a><span id="l17.17">   get footer() { return &quot;&quot;; },</span>
<a href="#l17.18"></a><span id="l17.18">   get header() { return &quot;&quot;; },</span>
<a href="#l17.19"></a><span id="l17.19">   get status() { return this.incomingContent; },</span>
<a href="#l17.20"></a><span id="l17.20">   get statusNext() { return this.status; },</span>
<a href="#l17.21"></a><span id="l17.21">   get incomingContent() {</span>
<a href="#l17.22"></a><span id="l17.22" class="difflineminus">-    throw &quot;Incoming/Content.html is a required file&quot;;</span>
<a href="#l17.23"></a><span id="l17.23" class="difflineplus">+    throw new Error(&quot;Incoming/Content.html is a required file&quot;);</span>
<a href="#l17.24"></a><span id="l17.24">   },</span>
<a href="#l17.25"></a><span id="l17.25">   get incomingNextContent() { return this.incomingContent; },</span>
<a href="#l17.26"></a><span id="l17.26">   get outgoingContent() { return this.incomingContent; },</span>
<a href="#l17.27"></a><span id="l17.27">   get outgoingNextContent() { return this.incomingNextContent; },</span>
<a href="#l17.28"></a><span id="l17.28">   get incomingContext() { return this.incomingContent; },</span>
<a href="#l17.29"></a><span id="l17.29">   get incomingNextContext() { return this.incomingNextContent; },</span>
<a href="#l17.30"></a><span id="l17.30">   get outgoingContext() { return this.hasOwnProperty(&quot;outgoingContent&quot;) ? this.outgoingContent : this.incomingContext; },</span>
<a href="#l17.31"></a><span id="l17.31">   get outgoingNextContext() { return this.hasOwnProperty(&quot;outgoingNextContent&quot;) ? this.outgoingNextContent : this.incomingNextContext; },</span>
<a href="#l17.32"></a><span id="l17.32" class="difflineat">@@ -152,38 +152,38 @@ function plistToJSON(aElt)</span>
<a href="#l17.33"></a><span id="l17.33">       nodes = aElt.childNodes;</span>
<a href="#l17.34"></a><span id="l17.34">       for (let i = 0; i &lt; nodes.length; ++i) {</span>
<a href="#l17.35"></a><span id="l17.35">         if (Element.isInstance(nodes[i]))</span>
<a href="#l17.36"></a><span id="l17.36">           array.push(plistToJSON(nodes[i]));</span>
<a href="#l17.37"></a><span id="l17.37">       }</span>
<a href="#l17.38"></a><span id="l17.38">       return array;</span>
<a href="#l17.39"></a><span id="l17.39"> </span>
<a href="#l17.40"></a><span id="l17.40">     default:</span>
<a href="#l17.41"></a><span id="l17.41" class="difflineminus">-      throw &quot;Unknown tag in plist file&quot;;</span>
<a href="#l17.42"></a><span id="l17.42" class="difflineplus">+      throw new Error(&quot;Unknown tag in plist file&quot;);</span>
<a href="#l17.43"></a><span id="l17.43">   }</span>
<a href="#l17.44"></a><span id="l17.44"> }</span>
<a href="#l17.45"></a><span id="l17.45"> </span>
<a href="#l17.46"></a><span id="l17.46"> function getInfoPlistContent(aBaseURI)</span>
<a href="#l17.47"></a><span id="l17.47"> {</span>
<a href="#l17.48"></a><span id="l17.48">   try {</span>
<a href="#l17.49"></a><span id="l17.49">     let channel = Services.io.newChannel(aBaseURI + &quot;Info.plist&quot;, null, null, null,</span>
<a href="#l17.50"></a><span id="l17.50">                                          Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l17.51"></a><span id="l17.51">                                          null,</span>
<a href="#l17.52"></a><span id="l17.52">                                          Ci.nsILoadInfo.SEC_ALLOW_CROSS_ORIGIN_DATA_IS_NULL,</span>
<a href="#l17.53"></a><span id="l17.53">                                          Ci.nsIContentPolicy.TYPE_OTHER);</span>
<a href="#l17.54"></a><span id="l17.54">     let stream = channel.open();</span>
<a href="#l17.55"></a><span id="l17.55">     let parser = new DOMParser();</span>
<a href="#l17.56"></a><span id="l17.56">     let doc = parser.parseFromStream(stream, null, stream.available(), &quot;text/xml&quot;);</span>
<a href="#l17.57"></a><span id="l17.57">     if (doc.documentElement.localName != &quot;plist&quot;)</span>
<a href="#l17.58"></a><span id="l17.58" class="difflineminus">-      throw &quot;Invalid Info.plist file&quot;;</span>
<a href="#l17.59"></a><span id="l17.59" class="difflineplus">+      throw new Error(&quot;Invalid Info.plist file&quot;);</span>
<a href="#l17.60"></a><span id="l17.60">     let node = doc.documentElement.firstChild;</span>
<a href="#l17.61"></a><span id="l17.61">     while (node &amp;&amp; !Element.isInstance(node))</span>
<a href="#l17.62"></a><span id="l17.62">       node = node.nextSibling;</span>
<a href="#l17.63"></a><span id="l17.63">     if (!node || node.localName != &quot;dict&quot;)</span>
<a href="#l17.64"></a><span id="l17.64" class="difflineminus">-      throw &quot;Empty or invalid Info.plist file&quot;;</span>
<a href="#l17.65"></a><span id="l17.65" class="difflineplus">+      throw new Error(&quot;Empty or invalid Info.plist file&quot;);</span>
<a href="#l17.66"></a><span id="l17.66">     return plistToJSON(node);</span>
<a href="#l17.67"></a><span id="l17.67">   } catch (e) {</span>
<a href="#l17.68"></a><span id="l17.68">     Cu.reportError(e);</span>
<a href="#l17.69"></a><span id="l17.69">     return null;</span>
<a href="#l17.70"></a><span id="l17.70">   }</span>
<a href="#l17.71"></a><span id="l17.71"> }</span>
<a href="#l17.72"></a><span id="l17.72"> </span>
<a href="#l17.73"></a><span id="l17.73"> function getChromeBaseURI(aThemeName)</span>
<a href="#l17.74"></a><span id="l17.74" class="difflineat">@@ -193,17 +193,17 @@ function getChromeBaseURI(aThemeName)</span>
<a href="#l17.75"></a><span id="l17.75">   return &quot;chrome://&quot; + aThemeName + &quot;/skin/&quot;;</span>
<a href="#l17.76"></a><span id="l17.76"> }</span>
<a href="#l17.77"></a><span id="l17.77"> </span>
<a href="#l17.78"></a><span id="l17.78"> function getThemeByName(aName)</span>
<a href="#l17.79"></a><span id="l17.79"> {</span>
<a href="#l17.80"></a><span id="l17.80">   let baseURI = getChromeBaseURI(aName);</span>
<a href="#l17.81"></a><span id="l17.81">   let metadata = getInfoPlistContent(baseURI);</span>
<a href="#l17.82"></a><span id="l17.82">   if (!metadata)</span>
<a href="#l17.83"></a><span id="l17.83" class="difflineminus">-    throw &quot;Cannot load theme &quot; + aName;</span>
<a href="#l17.84"></a><span id="l17.84" class="difflineplus">+    throw new Error(&quot;Cannot load theme &quot; + aName);</span>
<a href="#l17.85"></a><span id="l17.85"> </span>
<a href="#l17.86"></a><span id="l17.86">   return {</span>
<a href="#l17.87"></a><span id="l17.87">     name: aName,</span>
<a href="#l17.88"></a><span id="l17.88">     variant: &quot;default&quot;,</span>
<a href="#l17.89"></a><span id="l17.89">     baseURI,</span>
<a href="#l17.90"></a><span id="l17.90">     metadata,</span>
<a href="#l17.91"></a><span id="l17.91">     html: new HTMLTheme(baseURI),</span>
<a href="#l17.92"></a><span id="l17.92">     showHeader: gPrefBranch.getBoolPref(kShowHeaderPref),</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/chat/modules/jsProtoHelper.jsm</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/chat/modules/jsProtoHelper.jsm</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -250,17 +250,17 @@ var GenericAccountBuddyPrototype = {</span>
<a href="#l18.4"></a><span id="l18.4">   __proto__: ClassInfo(&quot;prplIAccountBuddy&quot;, &quot;generic account buddy object&quot;),</span>
<a href="#l18.5"></a><span id="l18.5">   get DEBUG() { return this._account.DEBUG; },</span>
<a href="#l18.6"></a><span id="l18.6">   get LOG() { return this._account.LOG; },</span>
<a href="#l18.7"></a><span id="l18.7">   get WARN() { return this._account.WARN; },</span>
<a href="#l18.8"></a><span id="l18.8">   get ERROR() { return this._account.ERROR; },</span>
<a href="#l18.9"></a><span id="l18.9"> </span>
<a href="#l18.10"></a><span id="l18.10">   _init(aAccount, aBuddy, aTag, aUserName) {</span>
<a href="#l18.11"></a><span id="l18.11">     if (!aBuddy &amp;&amp; !aUserName)</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-      throw &quot;aUserName is required when aBuddy is null&quot;;</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+      throw new Error(&quot;aUserName is required when aBuddy is null&quot;);</span>
<a href="#l18.14"></a><span id="l18.14"> </span>
<a href="#l18.15"></a><span id="l18.15">     this._tag = aTag;</span>
<a href="#l18.16"></a><span id="l18.16">     this._account = aAccount;</span>
<a href="#l18.17"></a><span id="l18.17">     this._buddy = aBuddy;</span>
<a href="#l18.18"></a><span id="l18.18">     if (aBuddy) {</span>
<a href="#l18.19"></a><span id="l18.19">       let displayName = aBuddy.displayName;</span>
<a href="#l18.20"></a><span id="l18.20">       if (displayName != aUserName)</span>
<a href="#l18.21"></a><span id="l18.21">         this._serverAlias = displayName;</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineat">@@ -752,23 +752,23 @@ TooltipInfo.prototype = ClassInfo(&quot;prplI</span>
<a href="#l18.23"></a><span id="l18.23">  *      This could typically be used for password field.</span>
<a href="#l18.24"></a><span id="l18.24">  *      Warning: The UI currently doesn't support this.</span>
<a href="#l18.25"></a><span id="l18.25">  */</span>
<a href="#l18.26"></a><span id="l18.26"> function purplePref(aName, aOption) {</span>
<a href="#l18.27"></a><span id="l18.27">   this.name = aName; // Preference name</span>
<a href="#l18.28"></a><span id="l18.28">   this.label = aOption.label; // Text to display</span>
<a href="#l18.29"></a><span id="l18.29"> </span>
<a href="#l18.30"></a><span id="l18.30">   if (aOption.default === undefined || aOption.default === null)</span>
<a href="#l18.31"></a><span id="l18.31" class="difflineminus">-    throw &quot;A default value for the option is required to determine its type.&quot;;</span>
<a href="#l18.32"></a><span id="l18.32" class="difflineplus">+    throw new Error(&quot;A default value for the option is required to determine its type.&quot;);</span>
<a href="#l18.33"></a><span id="l18.33">   this._defaultValue = aOption.default;</span>
<a href="#l18.34"></a><span id="l18.34"> </span>
<a href="#l18.35"></a><span id="l18.35">   const kTypes = {boolean: &quot;Bool&quot;, string: &quot;String&quot;, number: &quot;Int&quot;};</span>
<a href="#l18.36"></a><span id="l18.36">   let type = kTypes[typeof aOption.default];</span>
<a href="#l18.37"></a><span id="l18.37">   if (!type)</span>
<a href="#l18.38"></a><span id="l18.38" class="difflineminus">-    throw &quot;Invalid option type&quot;;</span>
<a href="#l18.39"></a><span id="l18.39" class="difflineplus">+    throw new Error(&quot;Invalid option type&quot;);</span>
<a href="#l18.40"></a><span id="l18.40"> </span>
<a href="#l18.41"></a><span id="l18.41">   if (type == &quot;String&quot; &amp;&amp; (&quot;listValues&quot; in aOption)) {</span>
<a href="#l18.42"></a><span id="l18.42">     type = &quot;List&quot;;</span>
<a href="#l18.43"></a><span id="l18.43">     this._listValues = aOption.listValues;</span>
<a href="#l18.44"></a><span id="l18.44">   }</span>
<a href="#l18.45"></a><span id="l18.45">   this.type = Ci.prplIPref[&quot;type&quot; + type];</span>
<a href="#l18.46"></a><span id="l18.46"> </span>
<a href="#l18.47"></a><span id="l18.47">   if (&quot;masked&quot; in aOption &amp;&amp; aOption.masked)</span>
<a href="#l18.48"></a><span id="l18.48" class="difflineat">@@ -849,30 +849,30 @@ ChatRoomFieldValues.prototype = {</span>
<a href="#l18.49"></a><span id="l18.49"> </span>
<a href="#l18.50"></a><span id="l18.50"> // the name getter and the getAccount method need to be implemented by</span>
<a href="#l18.51"></a><span id="l18.51"> // protocol plugins.</span>
<a href="#l18.52"></a><span id="l18.52"> var GenericProtocolPrototype = {</span>
<a href="#l18.53"></a><span id="l18.53">   __proto__: ClassInfo(&quot;prplIProtocol&quot;, &quot;Generic protocol object&quot;),</span>
<a href="#l18.54"></a><span id="l18.54"> </span>
<a href="#l18.55"></a><span id="l18.55">   init(aId) {</span>
<a href="#l18.56"></a><span id="l18.56">     if (aId != this.id)</span>
<a href="#l18.57"></a><span id="l18.57" class="difflineminus">-      throw &quot;Creating an instance of &quot; + aId + &quot; but this object implements &quot; + this.id;</span>
<a href="#l18.58"></a><span id="l18.58" class="difflineplus">+      throw new Error(&quot;Creating an instance of &quot; + aId + &quot; but this object implements &quot; + this.id);</span>
<a href="#l18.59"></a><span id="l18.59">   },</span>
<a href="#l18.60"></a><span id="l18.60">   get id() { return &quot;prpl-&quot; + this.normalizedName; },</span>
<a href="#l18.61"></a><span id="l18.61">   // This is more aggressive than the account normalization of just</span>
<a href="#l18.62"></a><span id="l18.62">   // toLowerCase() since prpl names must be only letters/numbers.</span>
<a href="#l18.63"></a><span id="l18.63">   get normalizedName() { return this.name.replace(/[^a-z0-9]/gi, &quot;&quot;).toLowerCase(); },</span>
<a href="#l18.64"></a><span id="l18.64">   get iconBaseURI() { return &quot;chrome://chat/skin/prpl-generic/&quot;; },</span>
<a href="#l18.65"></a><span id="l18.65"> </span>
<a href="#l18.66"></a><span id="l18.66">   getAccount(aImAccount) { throw Cr.NS_ERROR_NOT_IMPLEMENTED; },</span>
<a href="#l18.67"></a><span id="l18.67"> </span>
<a href="#l18.68"></a><span id="l18.68">   _getOptionDefault(aName) {</span>
<a href="#l18.69"></a><span id="l18.69">     if (this.options &amp;&amp; this.options.hasOwnProperty(aName))</span>
<a href="#l18.70"></a><span id="l18.70">       return this.options[aName].default;</span>
<a href="#l18.71"></a><span id="l18.71" class="difflineminus">-    throw aName + &quot; has no default value in &quot; + this.id + &quot;.&quot;;</span>
<a href="#l18.72"></a><span id="l18.72" class="difflineplus">+    throw new Error(aName + &quot; has no default value in &quot; + this.id + &quot;.&quot;);</span>
<a href="#l18.73"></a><span id="l18.73">   },</span>
<a href="#l18.74"></a><span id="l18.74">   getOptions() {</span>
<a href="#l18.75"></a><span id="l18.75">     if (!this.options)</span>
<a href="#l18.76"></a><span id="l18.76">       return EmptyEnumerator;</span>
<a href="#l18.77"></a><span id="l18.77"> </span>
<a href="#l18.78"></a><span id="l18.78">     let purplePrefs = [];</span>
<a href="#l18.79"></a><span id="l18.79">     for (let [name, option] of Object.entries(this.options))</span>
<a href="#l18.80"></a><span id="l18.80">       purplePrefs.push(new purplePref(name, option));</span>
<a href="#l18.81"></a><span id="l18.81" class="difflineat">@@ -887,17 +887,17 @@ var GenericProtocolPrototype = {</span>
<a href="#l18.82"></a><span id="l18.82">   },</span>
<a href="#l18.83"></a><span id="l18.83"> </span>
<a href="#l18.84"></a><span id="l18.84">   registerCommands() {</span>
<a href="#l18.85"></a><span id="l18.85">     if (!this.commands)</span>
<a href="#l18.86"></a><span id="l18.86">       return;</span>
<a href="#l18.87"></a><span id="l18.87"> </span>
<a href="#l18.88"></a><span id="l18.88">     this.commands.forEach(function(command) {</span>
<a href="#l18.89"></a><span id="l18.89">       if (!command.hasOwnProperty(&quot;name&quot;) || !command.hasOwnProperty(&quot;run&quot;))</span>
<a href="#l18.90"></a><span id="l18.90" class="difflineminus">-        throw &quot;Every command must have a name and a run function.&quot;;</span>
<a href="#l18.91"></a><span id="l18.91" class="difflineplus">+        throw new Error(&quot;Every command must have a name and a run function.&quot;);</span>
<a href="#l18.92"></a><span id="l18.92">       if (!(&quot;QueryInterface&quot; in command))</span>
<a href="#l18.93"></a><span id="l18.93">         command.QueryInterface = ChromeUtils.generateQI([Ci.imICommand]);</span>
<a href="#l18.94"></a><span id="l18.94">       if (!command.hasOwnProperty(&quot;usageContext&quot;))</span>
<a href="#l18.95"></a><span id="l18.95">         command.usageContext = Ci.imICommand.CMD_CONTEXT_ALL;</span>
<a href="#l18.96"></a><span id="l18.96">       if (!command.hasOwnProperty(&quot;priority&quot;))</span>
<a href="#l18.97"></a><span id="l18.97">         command.priority = Ci.imICommand.CMD_PRIORITY_PRPL;</span>
<a href="#l18.98"></a><span id="l18.98">       Services.cmd.registerCommand(command, this.id);</span>
<a href="#l18.99"></a><span id="l18.99">     }, this);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/chat/modules/socket.jsm</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/chat/modules/socket.jsm</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -570,23 +570,23 @@ var Socket = {</span>
<a href="#l19.4"></a><span id="l19.4">     }</span>
<a href="#l19.5"></a><span id="l19.5"> </span>
<a href="#l19.6"></a><span id="l19.6">     this.transport.setEventSink(this, Services.tm.currentThread);</span>
<a href="#l19.7"></a><span id="l19.7"> </span>
<a href="#l19.8"></a><span id="l19.8">     // No limit on the output stream buffer</span>
<a href="#l19.9"></a><span id="l19.9">     this._outputStream =</span>
<a href="#l19.10"></a><span id="l19.10">       this.transport.openOutputStream(0, this.outputSegmentSize, -1);</span>
<a href="#l19.11"></a><span id="l19.11">     if (!this._outputStream)</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-      throw &quot;Error getting output stream.&quot;;</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+      throw new Error(&quot;Error getting output stream.&quot;);</span>
<a href="#l19.14"></a><span id="l19.14"> </span>
<a href="#l19.15"></a><span id="l19.15">     this._inputStream = this.transport.openInputStream(0, // flags</span>
<a href="#l19.16"></a><span id="l19.16">                                                        0, // Use default segment size</span>
<a href="#l19.17"></a><span id="l19.17">                                                        0); // Use default segment count</span>
<a href="#l19.18"></a><span id="l19.18">     if (!this._inputStream)</span>
<a href="#l19.19"></a><span id="l19.19" class="difflineminus">-      throw &quot;Error getting input stream.&quot;;</span>
<a href="#l19.20"></a><span id="l19.20" class="difflineplus">+      throw new Error(&quot;Error getting input stream.&quot;);</span>
<a href="#l19.21"></a><span id="l19.21"> </span>
<a href="#l19.22"></a><span id="l19.22">     if (this.binaryMode) {</span>
<a href="#l19.23"></a><span id="l19.23">       // Handle binary mode</span>
<a href="#l19.24"></a><span id="l19.24">       this._binaryInputStream = new BinaryInputStream(this._inputStream);</span>
<a href="#l19.25"></a><span id="l19.25">       this._binaryOutputStream = new BinaryOutputStream(this._outputStream);</span>
<a href="#l19.26"></a><span id="l19.26">     } else {</span>
<a href="#l19.27"></a><span id="l19.27">       // Handle character mode</span>
<a href="#l19.28"></a><span id="l19.28">       this._scriptableInputStream =</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/chat/protocols/gtalk/gtalk.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/chat/protocols/gtalk/gtalk.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -58,17 +58,17 @@ function* PlainFullBindAuth(aUsername, a</span>
<a href="#l20.4"></a><span id="l20.4">     &quot;ga:client-uses-full-bind-result&quot;: &quot;true&quot;,</span>
<a href="#l20.5"></a><span id="l20.5">   };</span>
<a href="#l20.6"></a><span id="l20.6">   let stanza = yield {</span>
<a href="#l20.7"></a><span id="l20.7">     send: Stanza.node(&quot;auth&quot;, Stanza.NS.sasl, attrs, key),</span>
<a href="#l20.8"></a><span id="l20.8">     log: &quot;&lt;auth.../&gt; (PlainFullBindAuth base64 encoded username and password not logged)&quot;,</span>
<a href="#l20.9"></a><span id="l20.9">   };</span>
<a href="#l20.10"></a><span id="l20.10"> </span>
<a href="#l20.11"></a><span id="l20.11">   if (stanza.localName != &quot;success&quot;)</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-    throw &quot;Didn't receive the expected auth success stanza.&quot;;</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+    throw new Error(&quot;Didn't receive the expected auth success stanza.&quot;);</span>
<a href="#l20.14"></a><span id="l20.14"> }</span>
<a href="#l20.15"></a><span id="l20.15"> </span>
<a href="#l20.16"></a><span id="l20.16"> function GTalkAccount(aProtoInstance, aImAccount) {</span>
<a href="#l20.17"></a><span id="l20.17">   this._init(aProtoInstance, aImAccount);</span>
<a href="#l20.18"></a><span id="l20.18"> }</span>
<a href="#l20.19"></a><span id="l20.19"> GTalkAccount.prototype = {</span>
<a href="#l20.20"></a><span id="l20.20">   __proto__: XMPPAccountPrototype,</span>
<a href="#l20.21"></a><span id="l20.21">   connect() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/chat/protocols/irc/irc.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/chat/protocols/irc/irc.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -87,17 +87,17 @@ function ircMessage(aData, aOrigin) {</span>
<a href="#l21.4"></a><span id="l21.4">   // See http://joshualuckers.nl/2010/01/10/regular-expression-to-match-raw-irc-messages/</span>
<a href="#l21.5"></a><span id="l21.5">   // Note that this expression is slightly more aggressive in matching than RFC</span>
<a href="#l21.6"></a><span id="l21.6">   // 2812 would allow. It allows for empty parameters (besides the last</span>
<a href="#l21.7"></a><span id="l21.7">   // parameter, which can always be empty), by allowing multiple spaces.</span>
<a href="#l21.8"></a><span id="l21.8">   // (This is for compatibility with Unreal's 432 response, which returns an</span>
<a href="#l21.9"></a><span id="l21.9">   // empty first parameter.) It also allows a trailing space after the</span>
<a href="#l21.10"></a><span id="l21.10">   // &lt;parameter&gt;s when no &lt;last parameter&gt; is present (also occurs with Unreal).</span>
<a href="#l21.11"></a><span id="l21.11">   if (!(temp = aData.match(/^(?:@([^ ]+) )?(?::([^ ]+) )?([^ ]+)((?: +[^: ][^ ]*)*)? *(?::([\s\S]*))?$/)))</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-    throw &quot;Couldn't parse message: \&quot;&quot; + aData + &quot;\&quot;&quot;;</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+    throw new Error(&quot;Couldn't parse message: \&quot;&quot; + aData + &quot;\&quot;&quot;);</span>
<a href="#l21.14"></a><span id="l21.14"> </span>
<a href="#l21.15"></a><span id="l21.15">   message.command = temp[3];</span>
<a href="#l21.16"></a><span id="l21.16">   // Space separated parameters. Since we expect a space as the first thing</span>
<a href="#l21.17"></a><span id="l21.17">   // here, we want to ignore the first value (which is empty).</span>
<a href="#l21.18"></a><span id="l21.18">   message.params = temp[4] ? temp[4].split(&quot; &quot;).slice(1) : [];</span>
<a href="#l21.19"></a><span id="l21.19">   // Last parameter can contain spaces or be an empty string.</span>
<a href="#l21.20"></a><span id="l21.20">   if (temp[5] !== undefined)</span>
<a href="#l21.21"></a><span id="l21.21">     message.params.push(temp[5]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/chat/protocols/skype/skype.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/chat/protocols/skype/skype.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -280,18 +280,18 @@ function getTimezone() {</span>
<a href="#l22.4"></a><span id="l22.4">   /*</span>
<a href="#l22.5"></a><span id="l22.5">    * Zero-pad aNum to the length of aLen.</span>
<a href="#l22.6"></a><span id="l22.6">    */</span>
<a href="#l22.7"></a><span id="l22.7">   function zeroPad(aNum, aLen) {</span>
<a href="#l22.8"></a><span id="l22.8">     let nStr = aNum.toString();</span>
<a href="#l22.9"></a><span id="l22.9">     let nLen = nStr.length;</span>
<a href="#l22.10"></a><span id="l22.10"> </span>
<a href="#l22.11"></a><span id="l22.11">     if (nLen &gt; aLen) {</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-      throw &quot;Can't zero-pad when longer than expected length: &quot; + nStr +</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineminus">-        &quot;.length &gt; &quot; + aLen;</span>
<a href="#l22.14"></a><span id="l22.14" class="difflineplus">+      throw new Error(&quot;Can't zero-pad when longer than expected length: &quot; + nStr +</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineplus">+        &quot;.length &gt; &quot; + aLen);</span>
<a href="#l22.16"></a><span id="l22.16">     }</span>
<a href="#l22.17"></a><span id="l22.17"> </span>
<a href="#l22.18"></a><span id="l22.18">     return &quot;0&quot;.repeat(aLen - nLen) + nStr;</span>
<a href="#l22.19"></a><span id="l22.19">   }</span>
<a href="#l22.20"></a><span id="l22.20"> </span>
<a href="#l22.21"></a><span id="l22.21">   // Invert the sign of the timezone from JavaScript's date object.</span>
<a href="#l22.22"></a><span id="l22.22">   let sign = &quot;+&quot;;</span>
<a href="#l22.23"></a><span id="l22.23">   let timezone = new Date().getTimezoneOffset() * -1;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/chat/protocols/twitter/twitter.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/chat/protocols/twitter/twitter.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -48,17 +48,17 @@ ChatBuddy.prototype = {</span>
<a href="#l23.4"></a><span id="l23.4">   get buddyIconFilename() {</span>
<a href="#l23.5"></a><span id="l23.5">     let userInfo = this._account._userInfo.get(this.name);</span>
<a href="#l23.6"></a><span id="l23.6">     if (userInfo)</span>
<a href="#l23.7"></a><span id="l23.7">       return userInfo.profile_image_url;</span>
<a href="#l23.8"></a><span id="l23.8">     return undefined;</span>
<a href="#l23.9"></a><span id="l23.9">   },</span>
<a href="#l23.10"></a><span id="l23.10">   set buddyIconFilename(aName) {</span>
<a href="#l23.11"></a><span id="l23.11">     // Prevent accidental removal of the getter.</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-    throw &quot;Don't set chatBuddy.buddyIconFilename directly for Twitter.&quot;;</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+    throw new Error(&quot;Don't set chatBuddy.buddyIconFilename directly for Twitter.&quot;);</span>
<a href="#l23.14"></a><span id="l23.14">   },</span>
<a href="#l23.15"></a><span id="l23.15">   createConversation() {</span>
<a href="#l23.16"></a><span id="l23.16">     return this._account.createConversation(this._name);</span>
<a href="#l23.17"></a><span id="l23.17">   },</span>
<a href="#l23.18"></a><span id="l23.18"> };</span>
<a href="#l23.19"></a><span id="l23.19"> </span>
<a href="#l23.20"></a><span id="l23.20"> function Tweet(aTweet, aWho, aMessage, aObject)</span>
<a href="#l23.21"></a><span id="l23.21"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/chat/protocols/xmpp/xmpp-authmechs.jsm</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/chat/protocols/xmpp/xmpp-authmechs.jsm</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -27,17 +27,17 @@ function* PlainAuth(aUsername, aPassword</span>
<a href="#l24.4"></a><span id="l24.4"> </span>
<a href="#l24.5"></a><span id="l24.5">   let stanza = yield {</span>
<a href="#l24.6"></a><span id="l24.6">     send: Stanza.node(&quot;auth&quot;, Stanza.NS.sasl, {mechanism: &quot;PLAIN&quot;},</span>
<a href="#l24.7"></a><span id="l24.7">                       base64Data),</span>
<a href="#l24.8"></a><span id="l24.8">     log: '&lt;auth mechanism:=&quot;PLAIN&quot;/&gt; (base64 encoded username and password not logged)',</span>
<a href="#l24.9"></a><span id="l24.9">   };</span>
<a href="#l24.10"></a><span id="l24.10"> </span>
<a href="#l24.11"></a><span id="l24.11">   if (stanza.localName != &quot;success&quot;)</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-    throw &quot;Didn't receive the expected auth success stanza.&quot;;</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+    throw new Error(&quot;Didn't receive the expected auth success stanza.&quot;);</span>
<a href="#l24.14"></a><span id="l24.14"> }</span>
<a href="#l24.15"></a><span id="l24.15"> </span>
<a href="#l24.16"></a><span id="l24.16"> // Handle SCRAM-SHA-1 authorization mechanism.</span>
<a href="#l24.17"></a><span id="l24.17"> const RFC3454 = {</span>
<a href="#l24.18"></a><span id="l24.18">   A1: &quot;\u0221|[\u0234-\u024f]|[\u02ae-\u02af]|[\u02ef-\u02ff]|\</span>
<a href="#l24.19"></a><span id="l24.19"> [\u0350-\u035f]|[\u0370-\u0373]|[\u0376-\u0379]|[\u037b-\u037d]|\</span>
<a href="#l24.20"></a><span id="l24.20"> [\u037f-\u0383]|\u038b|\u038d|\u03a2|\u03cf|[\u03f7-\u03ff]|\u0487|\</span>
<a href="#l24.21"></a><span id="l24.21"> \u04cf|[\u04f6-\u04f7]|[\u04fa-\u04ff]|[\u0510-\u0530]|\</span>
<a href="#l24.22"></a><span id="l24.22" class="difflineat">@@ -267,41 +267,41 @@ function saslPrep(aString) {</span>
<a href="#l24.23"></a><span id="l24.23"> </span>
<a href="#l24.24"></a><span id="l24.24">   // RFC 4013 2.3: Prohibited Output and 2.5: Unassigned Code Points.</span>
<a href="#l24.25"></a><span id="l24.25">   let matchStr =</span>
<a href="#l24.26"></a><span id="l24.26">     RFC3454.C12 + &quot;|&quot; + RFC3454.C21 + &quot;|&quot; + RFC3454.C22 + &quot;|&quot; + RFC3454.C3 +</span>
<a href="#l24.27"></a><span id="l24.27">     &quot;|&quot; + RFC3454.C4 + &quot;|&quot; + RFC3454.C5 + &quot;|&quot; + RFC3454.C6 + &quot;|&quot; + RFC3454.C7 +</span>
<a href="#l24.28"></a><span id="l24.28">     &quot;|&quot; + RFC3454.C8 + &quot;|&quot; + RFC3454.C9 + &quot;|&quot; + RFC3454.A1;</span>
<a href="#l24.29"></a><span id="l24.29">   let match = new RegExp(matchStr, &quot;u&quot;).test(retVal);</span>
<a href="#l24.30"></a><span id="l24.30">   if (match)</span>
<a href="#l24.31"></a><span id="l24.31" class="difflineminus">-    throw &quot;String contains prohibited characters&quot;;</span>
<a href="#l24.32"></a><span id="l24.32" class="difflineplus">+    throw new Error(&quot;String contains prohibited characters&quot;);</span>
<a href="#l24.33"></a><span id="l24.33"> </span>
<a href="#l24.34"></a><span id="l24.34">   // RFC 4013 2.4: Bidirectional Characters.</span>
<a href="#l24.35"></a><span id="l24.35">   let r = new RegExp(RFC3454.D1, &quot;u&quot;).test(retVal);</span>
<a href="#l24.36"></a><span id="l24.36">   let l = new RegExp(RFC3454.D2, &quot;u&quot;).test(retVal);</span>
<a href="#l24.37"></a><span id="l24.37">   if (l &amp;&amp; r)</span>
<a href="#l24.38"></a><span id="l24.38" class="difflineminus">-    throw &quot;String must not contain LCat and RandALCat characters together&quot;;</span>
<a href="#l24.39"></a><span id="l24.39" class="difflineplus">+    throw new Error(&quot;String must not contain LCat and RandALCat characters together&quot;);</span>
<a href="#l24.40"></a><span id="l24.40">   else if (r) {</span>
<a href="#l24.41"></a><span id="l24.41">     let matchFirst = new RegExp(&quot;^(&quot; + RFC3454.D1 + &quot;)&quot;, &quot;u&quot;).test(retVal);</span>
<a href="#l24.42"></a><span id="l24.42">     let matchLast = new RegExp(&quot;(&quot; + RFC3454.D1 + &quot;)$&quot;, &quot;u&quot;).test(retVal);</span>
<a href="#l24.43"></a><span id="l24.43">     if (!matchFirst || !matchLast)</span>
<a href="#l24.44"></a><span id="l24.44" class="difflineminus">-      throw &quot;A RandALCat character must be the first and the last character&quot;;</span>
<a href="#l24.45"></a><span id="l24.45" class="difflineplus">+      throw new Error(&quot;A RandALCat character must be the first and the last character&quot;);</span>
<a href="#l24.46"></a><span id="l24.46">   }</span>
<a href="#l24.47"></a><span id="l24.47"> </span>
<a href="#l24.48"></a><span id="l24.48">   return retVal;</span>
<a href="#l24.49"></a><span id="l24.49"> }</span>
<a href="#l24.50"></a><span id="l24.50"> </span>
<a href="#l24.51"></a><span id="l24.51"> // Converts aName to saslname.</span>
<a href="#l24.52"></a><span id="l24.52"> function saslName(aName) {</span>
<a href="#l24.53"></a><span id="l24.53">   // RFC 5802 (5.1): the client SHOULD prepare the username using the &quot;SASLprep&quot;.</span>
<a href="#l24.54"></a><span id="l24.54">   // The characters , or = in usernames are sent as =2C and</span>
<a href="#l24.55"></a><span id="l24.55">   // =3D respectively.</span>
<a href="#l24.56"></a><span id="l24.56">   let saslName = saslPrep(aName).replace(/=/g, &quot;=3D&quot;).replace(/,/g, &quot;=2C&quot;);</span>
<a href="#l24.57"></a><span id="l24.57">   if (!saslName)</span>
<a href="#l24.58"></a><span id="l24.58" class="difflineminus">-    throw &quot;Name is not valid&quot;;</span>
<a href="#l24.59"></a><span id="l24.59" class="difflineplus">+    throw new Error(&quot;Name is not valid&quot;);</span>
<a href="#l24.60"></a><span id="l24.60"> </span>
<a href="#l24.61"></a><span id="l24.61">   return saslName;</span>
<a href="#l24.62"></a><span id="l24.62"> }</span>
<a href="#l24.63"></a><span id="l24.63"> </span>
<a href="#l24.64"></a><span id="l24.64"> // Converts aMessage to array of bytes then apply SHA-1 hashing.</span>
<a href="#l24.65"></a><span id="l24.65"> function bytesAndSHA1(aMessage) {</span>
<a href="#l24.66"></a><span id="l24.66">   let hasher =</span>
<a href="#l24.67"></a><span id="l24.67">     Cc[&quot;@mozilla.org/security/hash;1&quot;].createInstance(Ci.nsICryptoHash);</span>
<a href="#l24.68"></a><span id="l24.68" class="difflineat">@@ -345,34 +345,34 @@ function* scramSHA1Auth(aUsername, aPass</span>
<a href="#l24.69"></a><span id="l24.69">   let clientFirstMessage = gs2Header + clientFirstMessageBare;</span>
<a href="#l24.70"></a><span id="l24.70"> </span>
<a href="#l24.71"></a><span id="l24.71">   let receivedStanza = yield {</span>
<a href="#l24.72"></a><span id="l24.72">     send: Stanza.node(&quot;auth&quot;, Stanza.NS.sasl, {mechanism: &quot;SCRAM-SHA-1&quot;},</span>
<a href="#l24.73"></a><span id="l24.73">                       btoa(clientFirstMessage)),</span>
<a href="#l24.74"></a><span id="l24.74">   };</span>
<a href="#l24.75"></a><span id="l24.75"> </span>
<a href="#l24.76"></a><span id="l24.76">   if (receivedStanza.localName != &quot;challenge&quot;)</span>
<a href="#l24.77"></a><span id="l24.77" class="difflineminus">-    throw &quot;Not authorized&quot;;</span>
<a href="#l24.78"></a><span id="l24.78" class="difflineplus">+    throw new Error(&quot;Not authorized&quot;);</span>
<a href="#l24.79"></a><span id="l24.79"> </span>
<a href="#l24.80"></a><span id="l24.80">   // RFC 5802 (3): SCRAM Algorithm Overview.</span>
<a href="#l24.81"></a><span id="l24.81">   let decodedChallenge = atob(receivedStanza.innerText);</span>
<a href="#l24.82"></a><span id="l24.82"> </span>
<a href="#l24.83"></a><span id="l24.83">   // Expected to contain the users iteration count (i) and the users</span>
<a href="#l24.84"></a><span id="l24.84">   // salt (s), and the server appends its own nonce to the client-specified</span>
<a href="#l24.85"></a><span id="l24.85">   // one (r).</span>
<a href="#l24.86"></a><span id="l24.86">   let attributes = parseChallenge(decodedChallenge);</span>
<a href="#l24.87"></a><span id="l24.87">   if (attributes.hasOwnProperty(&quot;e&quot;))</span>
<a href="#l24.88"></a><span id="l24.88" class="difflineminus">-    throw &quot;Authentication failed: &quot; + attributes.e;</span>
<a href="#l24.89"></a><span id="l24.89" class="difflineplus">+    throw new Error(&quot;Authentication failed: &quot; + attributes.e);</span>
<a href="#l24.90"></a><span id="l24.90">   else if (!attributes.hasOwnProperty(&quot;i&quot;) ||</span>
<a href="#l24.91"></a><span id="l24.91">            !attributes.hasOwnProperty(&quot;s&quot;) ||</span>
<a href="#l24.92"></a><span id="l24.92">            !attributes.hasOwnProperty(&quot;r&quot;)) {</span>
<a href="#l24.93"></a><span id="l24.93" class="difflineminus">-    throw &quot;Unexpected response: &quot; + decodedChallenge;</span>
<a href="#l24.94"></a><span id="l24.94" class="difflineplus">+    throw new Error(&quot;Unexpected response: &quot; + decodedChallenge);</span>
<a href="#l24.95"></a><span id="l24.95">   }</span>
<a href="#l24.96"></a><span id="l24.96">   if (!attributes.r.startsWith(cNonce))</span>
<a href="#l24.97"></a><span id="l24.97" class="difflineminus">-    throw &quot;Nonce is not correct&quot;;</span>
<a href="#l24.98"></a><span id="l24.98" class="difflineplus">+    throw new Error(&quot;Nonce is not correct&quot;);</span>
<a href="#l24.99"></a><span id="l24.99"> </span>
<a href="#l24.100"></a><span id="l24.100">   let clientFinalMessageWithoutProof =</span>
<a href="#l24.101"></a><span id="l24.101">     &quot;c=&quot; + btoa(gs2Header) + &quot;,r=&quot; + attributes.r;</span>
<a href="#l24.102"></a><span id="l24.102"> </span>
<a href="#l24.103"></a><span id="l24.103">   // Calculate ClientProof.</span>
<a href="#l24.104"></a><span id="l24.104"> </span>
<a href="#l24.105"></a><span id="l24.105">   // SaltedPassword := Hi(Normalize(password), salt, i)</span>
<a href="#l24.106"></a><span id="l24.106">   // Normalize using saslPrep.</span>
<a href="#l24.107"></a><span id="l24.107" class="difflineat">@@ -424,25 +424,25 @@ function* scramSHA1Auth(aUsername, aPass</span>
<a href="#l24.108"></a><span id="l24.108">     return {</span>
<a href="#l24.109"></a><span id="l24.109">       send: Stanza.node(&quot;response&quot;, Stanza.NS.sasl, null, btoa(clientFinalMessage)),</span>
<a href="#l24.110"></a><span id="l24.110">       log: &quot;&lt;response/&gt; (base64 encoded SCRAM response containing password not logged)&quot;,</span>
<a href="#l24.111"></a><span id="l24.111">     };</span>
<a href="#l24.112"></a><span id="l24.112">   });</span>
<a href="#l24.113"></a><span id="l24.113"> </span>
<a href="#l24.114"></a><span id="l24.114">   // Only check server signature if we succeed to authenticate.</span>
<a href="#l24.115"></a><span id="l24.115">   if (receivedStanza.localName != &quot;success&quot;)</span>
<a href="#l24.116"></a><span id="l24.116" class="difflineminus">-    throw &quot;Didn't receive the expected auth success stanza.&quot;;</span>
<a href="#l24.117"></a><span id="l24.117" class="difflineplus">+    throw new Error(&quot;Didn't receive the expected auth success stanza.&quot;);</span>
<a href="#l24.118"></a><span id="l24.118"> </span>
<a href="#l24.119"></a><span id="l24.119">   let decodedResponse = atob(receivedStanza.innerText);</span>
<a href="#l24.120"></a><span id="l24.120"> </span>
<a href="#l24.121"></a><span id="l24.121">   // Expected to contain a base64-encoded ServerSignature (v).</span>
<a href="#l24.122"></a><span id="l24.122">   attributes = parseChallenge(decodedResponse);</span>
<a href="#l24.123"></a><span id="l24.123">   if (!attributes.hasOwnProperty(&quot;v&quot;))</span>
<a href="#l24.124"></a><span id="l24.124" class="difflineminus">-    throw &quot;Unexpected response: &quot; + decodedResponse;</span>
<a href="#l24.125"></a><span id="l24.125" class="difflineplus">+    throw new Error(&quot;Unexpected response: &quot; + decodedResponse);</span>
<a href="#l24.126"></a><span id="l24.126"> </span>
<a href="#l24.127"></a><span id="l24.127">   // Compare ServerSignature with our ServerSignature which we calculated in</span>
<a href="#l24.128"></a><span id="l24.128">   // _generateResponse.</span>
<a href="#l24.129"></a><span id="l24.129">   let serverSignatureResponse = atob(attributes.v);</span>
<a href="#l24.130"></a><span id="l24.130">   if (serverSignature != serverSignatureResponse)</span>
<a href="#l24.131"></a><span id="l24.131" class="difflineminus">-    throw &quot;Server signature does not match&quot;;</span>
<a href="#l24.132"></a><span id="l24.132" class="difflineplus">+    throw new Error(&quot;Server signature does not match&quot;);</span>
<a href="#l24.133"></a><span id="l24.133"> }</span>
<a href="#l24.134"></a><span id="l24.134"> </span>
<a href="#l24.135"></a><span id="l24.135"> var XMPPAuthMechanisms = {&quot;PLAIN&quot;: PlainAuth, &quot;SCRAM-SHA-1&quot;: scramSHA1Auth};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/chat/protocols/xmpp/xmpp-xml.jsm</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/chat/protocols/xmpp/xmpp-xml.jsm</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -183,17 +183,17 @@ TextNode.prototype = {</span>
<a href="#l25.4"></a><span id="l25.4"> /* aUri is the namespace. */</span>
<a href="#l25.5"></a><span id="l25.5"> /* aLocalName must have value, otherwise throws. */</span>
<a href="#l25.6"></a><span id="l25.6"> /* aAttr can be instance of nsISAXAttributes or object */</span>
<a href="#l25.7"></a><span id="l25.7"> /* Example: &lt;f:a xmlns:f='g' d='1'&gt; is parsed to</span>
<a href="#l25.8"></a><span id="l25.8">    uri/namespace='g', localName='a', qName='f:a', attributes={d='1'} */</span>
<a href="#l25.9"></a><span id="l25.9"> function XMLNode(aParentNode, aUri, aLocalName, aQName = aLocalName,</span>
<a href="#l25.10"></a><span id="l25.10">                  aAttr = {}) {</span>
<a href="#l25.11"></a><span id="l25.11">   if (!aLocalName)</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-    throw &quot;aLocalName must have value&quot;;</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+    throw new Error(&quot;aLocalName must have value&quot;);</span>
<a href="#l25.14"></a><span id="l25.14"> </span>
<a href="#l25.15"></a><span id="l25.15">   this._parentNode = aParentNode; // Used only for parsing</span>
<a href="#l25.16"></a><span id="l25.16">   this.uri = aUri;</span>
<a href="#l25.17"></a><span id="l25.17">   this.localName = aLocalName;</span>
<a href="#l25.18"></a><span id="l25.18">   this.qName = aQName;</span>
<a href="#l25.19"></a><span id="l25.19">   this.attributes = {};</span>
<a href="#l25.20"></a><span id="l25.20">   this.children = [];</span>
<a href="#l25.21"></a><span id="l25.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/chat/protocols/xmpp/xmpp.jsm</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/chat/protocols/xmpp/xmpp.jsm</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -1367,21 +1367,21 @@ var XMPPAccountPrototype = {</span>
<a href="#l26.4"></a><span id="l26.4"> </span>
<a href="#l26.5"></a><span id="l26.5">   /* Disconnect from the server */</span>
<a href="#l26.6"></a><span id="l26.6">   disconnect() {</span>
<a href="#l26.7"></a><span id="l26.7">     this._disconnect();</span>
<a href="#l26.8"></a><span id="l26.8">   },</span>
<a href="#l26.9"></a><span id="l26.9"> </span>
<a href="#l26.10"></a><span id="l26.10">   addBuddy(aTag, aName) {</span>
<a href="#l26.11"></a><span id="l26.11">     if (!this._connection)</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-      throw &quot;The account isn't connected&quot;;</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+      throw new Error(&quot;The account isn't connected&quot;);</span>
<a href="#l26.14"></a><span id="l26.14"> </span>
<a href="#l26.15"></a><span id="l26.15">     let jid = this.normalize(aName);</span>
<a href="#l26.16"></a><span id="l26.16">     if (!jid || !jid.includes(&quot;@&quot;))</span>
<a href="#l26.17"></a><span id="l26.17" class="difflineminus">-      throw &quot;Invalid username&quot;;</span>
<a href="#l26.18"></a><span id="l26.18" class="difflineplus">+      throw new Error(&quot;Invalid username&quot;);</span>
<a href="#l26.19"></a><span id="l26.19"> </span>
<a href="#l26.20"></a><span id="l26.20">     if (this._buddies.has(jid)) {</span>
<a href="#l26.21"></a><span id="l26.21">       let subscription = this._buddies.get(jid).subscription;</span>
<a href="#l26.22"></a><span id="l26.22">       if (subscription &amp;&amp; (subscription == &quot;both&quot; || subscription == &quot;to&quot;)) {</span>
<a href="#l26.23"></a><span id="l26.23">         this.DEBUG(&quot;not re-adding an existing buddy&quot;);</span>
<a href="#l26.24"></a><span id="l26.24">         return;</span>
<a href="#l26.25"></a><span id="l26.25">       }</span>
<a href="#l26.26"></a><span id="l26.26">     }</span>
<a href="#l26.27"></a><span id="l26.27" class="difflineat">@@ -2292,17 +2292,17 @@ var XMPPAccountPrototype = {</span>
<a href="#l26.28"></a><span id="l26.28">     return this._setJID(result.domain, result.node, result.resource);</span>
<a href="#l26.29"></a><span id="l26.29">   },</span>
<a href="#l26.30"></a><span id="l26.30"> </span>
<a href="#l26.31"></a><span id="l26.31">   // Constructs jid as an object from domain, node and resource parts.</span>
<a href="#l26.32"></a><span id="l26.32">   // The object has properties (node, domain, resource and jid).</span>
<a href="#l26.33"></a><span id="l26.33">   // aDomain is required, but aNode and aResource are optional.</span>
<a href="#l26.34"></a><span id="l26.34">   _setJID(aDomain, aNode = null, aResource = null) {</span>
<a href="#l26.35"></a><span id="l26.35">     if (!aDomain)</span>
<a href="#l26.36"></a><span id="l26.36" class="difflineminus">-      throw &quot;aDomain must have a value&quot;;</span>
<a href="#l26.37"></a><span id="l26.37" class="difflineplus">+      throw new Error(&quot;aDomain must have a value&quot;);</span>
<a href="#l26.38"></a><span id="l26.38"> </span>
<a href="#l26.39"></a><span id="l26.39">     let result = {</span>
<a href="#l26.40"></a><span id="l26.40">       node: aNode,</span>
<a href="#l26.41"></a><span id="l26.41">       domain: aDomain.toLowerCase(),</span>
<a href="#l26.42"></a><span id="l26.42">       resource: aResource,</span>
<a href="#l26.43"></a><span id="l26.43">     };</span>
<a href="#l26.44"></a><span id="l26.44">     let jid = result.domain;</span>
<a href="#l26.45"></a><span id="l26.45">     if (result.node) {</span>
<a href="#l26.46"></a><span id="l26.46" class="difflineat">@@ -2451,17 +2451,17 @@ var XMPPAccountPrototype = {</span>
<a href="#l26.47"></a><span id="l26.47">     let isMucParticipant = this._mucs.has(convName);</span>
<a href="#l26.48"></a><span id="l26.48">     if (isMucParticipant)</span>
<a href="#l26.49"></a><span id="l26.49">       convName = this.normalizeFullJid(aName);</span>
<a href="#l26.50"></a><span id="l26.50"> </span>
<a href="#l26.51"></a><span id="l26.51">     // Checking that the aName can be parsed and is not broken.</span>
<a href="#l26.52"></a><span id="l26.52">     let jid = this._parseJID(convName);</span>
<a href="#l26.53"></a><span id="l26.53">     if (!jid || !jid.domain || (isMucParticipant &amp;&amp; (!jid.node || !jid.resource))) {</span>
<a href="#l26.54"></a><span id="l26.54">       this.ERROR(&quot;Could not create conversation as jid is broken: &quot; + convName);</span>
<a href="#l26.55"></a><span id="l26.55" class="difflineminus">-      throw &quot;Invalid JID&quot;;</span>
<a href="#l26.56"></a><span id="l26.56" class="difflineplus">+      throw new Error(&quot;Invalid JID&quot;);</span>
<a href="#l26.57"></a><span id="l26.57">     }</span>
<a href="#l26.58"></a><span id="l26.58"> </span>
<a href="#l26.59"></a><span id="l26.59">     if (!this._conv.has(convName)) {</span>
<a href="#l26.60"></a><span id="l26.60">       this._conv.set(convName,</span>
<a href="#l26.61"></a><span id="l26.61">                      new this._conversationConstructor(this, convName,</span>
<a href="#l26.62"></a><span id="l26.62">                                                        isMucParticipant));</span>
<a href="#l26.63"></a><span id="l26.63">     }</span>
<a href="#l26.64"></a><span id="l26.64"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/common/bindings/menubutton.xml</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/common/bindings/menubutton.xml</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -17,17 +17,17 @@</span>
<a href="#l27.4"></a><span id="l27.4">         this.init();</span>
<a href="#l27.5"></a><span id="l27.5">       &lt;/constructor&gt;</span>
<a href="#l27.6"></a><span id="l27.6"> </span>
<a href="#l27.7"></a><span id="l27.7">       &lt;method name=&quot;init&quot;&gt;</span>
<a href="#l27.8"></a><span id="l27.8">         &lt;body&gt;</span>
<a href="#l27.9"></a><span id="l27.9">         &lt;![CDATA[</span>
<a href="#l27.10"></a><span id="l27.10">           var btn = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;button&quot;);</span>
<a href="#l27.11"></a><span id="l27.11">           if (!btn)</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-            throw &quot;XBL binding for &lt;button type=\&quot;menu-button\&quot;/&gt; binding must contain an element with anonid=\&quot;button\&quot;&quot;;</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+            throw new Error(&quot;XBL binding for &lt;button type=\&quot;menu-button\&quot;/&gt; binding must contain an element with anonid=\&quot;button\&quot;&quot;);</span>
<a href="#l27.14"></a><span id="l27.14"> </span>
<a href="#l27.15"></a><span id="l27.15">           var menubuttonParent = this;</span>
<a href="#l27.16"></a><span id="l27.16">           btn.addEventListener(&quot;mouseover&quot;, function() {</span>
<a href="#l27.17"></a><span id="l27.17">             if (!this.disabled)</span>
<a href="#l27.18"></a><span id="l27.18">               menubuttonParent.buttonover = true;</span>
<a href="#l27.19"></a><span id="l27.19">           }, true);</span>
<a href="#l27.20"></a><span id="l27.20">           btn.addEventListener(&quot;mouseout&quot;, function() {</span>
<a href="#l27.21"></a><span id="l27.21">             menubuttonParent.buttonover = false;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/common/bindings/notificationbox.xml</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/common/bindings/notificationbox.xml</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -95,17 +95,17 @@</span>
<a href="#l28.4"></a><span id="l28.4">         &lt;parameter name=&quot;aImage&quot;/&gt;</span>
<a href="#l28.5"></a><span id="l28.5">         &lt;parameter name=&quot;aPriority&quot;/&gt;</span>
<a href="#l28.6"></a><span id="l28.6">         &lt;parameter name=&quot;aButtons&quot;/&gt;</span>
<a href="#l28.7"></a><span id="l28.7">         &lt;parameter name=&quot;aEventCallback&quot;/&gt;</span>
<a href="#l28.8"></a><span id="l28.8">         &lt;body&gt;</span>
<a href="#l28.9"></a><span id="l28.9">           &lt;![CDATA[</span>
<a href="#l28.10"></a><span id="l28.10">             if (aPriority &lt; this.PRIORITY_INFO_LOW ||</span>
<a href="#l28.11"></a><span id="l28.11">                 aPriority &gt; this.PRIORITY_CRITICAL_BLOCK)</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-              throw &quot;Invalid notification priority &quot; + aPriority;</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+              throw new Error(&quot;Invalid notification priority &quot; + aPriority);</span>
<a href="#l28.14"></a><span id="l28.14"> </span>
<a href="#l28.15"></a><span id="l28.15">             // check for where the notification should be inserted according to</span>
<a href="#l28.16"></a><span id="l28.16">             // priority. If two are equal, the existing one appears on top.</span>
<a href="#l28.17"></a><span id="l28.17">             var notifications = this.allNotifications;</span>
<a href="#l28.18"></a><span id="l28.18">             var insertPos = null;</span>
<a href="#l28.19"></a><span id="l28.19">             for (var n = notifications.length - 1; n &gt;= 0; n--) {</span>
<a href="#l28.20"></a><span id="l28.20">               if (notifications[n].priority &lt; aPriority)</span>
<a href="#l28.21"></a><span id="l28.21">                 break;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/common/src/Overlays.jsm</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/common/src/Overlays.jsm</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -414,31 +414,31 @@ class Overlays {</span>
<a href="#l29.4"></a><span id="l29.4">    * Fetches the overlay from the given chrome:// or resource:// URL. This happen synchronously so</span>
<a href="#l29.5"></a><span id="l29.5">    * we have a chance to complete before the load event.</span>
<a href="#l29.6"></a><span id="l29.6">    *</span>
<a href="#l29.7"></a><span id="l29.7">    * @param {String} srcUrl                         The URL to load</span>
<a href="#l29.8"></a><span id="l29.8">    * @return {XMLHttpRequest}                       The completed XHR.</span>
<a href="#l29.9"></a><span id="l29.9">    */</span>
<a href="#l29.10"></a><span id="l29.10">   fetchOverlay(srcUrl) {</span>
<a href="#l29.11"></a><span id="l29.11">     if (!srcUrl.startsWith(&quot;chrome://&quot;) &amp;&amp; !srcUrl.startsWith(&quot;resource://&quot;)) {</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-      throw &quot;May only load overlays from chrome:// or resource:// uris&quot;;</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+      throw new Error(&quot;May only load overlays from chrome:// or resource:// uris&quot;);</span>
<a href="#l29.14"></a><span id="l29.14">     }</span>
<a href="#l29.15"></a><span id="l29.15"> </span>
<a href="#l29.16"></a><span id="l29.16">     let xhr = new XMLHttpRequest();</span>
<a href="#l29.17"></a><span id="l29.17">     xhr.overrideMimeType(&quot;application/xml&quot;);</span>
<a href="#l29.18"></a><span id="l29.18">     xhr.open(&quot;GET&quot;, srcUrl, false);</span>
<a href="#l29.19"></a><span id="l29.19"> </span>
<a href="#l29.20"></a><span id="l29.20">     // Elevate the request, so DTDs will work. Should not be a security issue since we</span>
<a href="#l29.21"></a><span id="l29.21">     // only load chrome, resource and file URLs, and that is our privileged chrome package.</span>
<a href="#l29.22"></a><span id="l29.22">     try {</span>
<a href="#l29.23"></a><span id="l29.23">       xhr.channel.owner = Services.scriptSecurityManager.getSystemPrincipal();</span>
<a href="#l29.24"></a><span id="l29.24">     } catch (ex) {</span>
<a href="#l29.25"></a><span id="l29.25">       oconsole.error(&quot;Failed to set system principal while fetching overlay &quot; + srcUrl);</span>
<a href="#l29.26"></a><span id="l29.26">       xhr.close();</span>
<a href="#l29.27"></a><span id="l29.27" class="difflineminus">-      throw &quot;Failed to set system principal&quot;;</span>
<a href="#l29.28"></a><span id="l29.28" class="difflineplus">+      throw new Error(&quot;Failed to set system principal&quot;);</span>
<a href="#l29.29"></a><span id="l29.29">     }</span>
<a href="#l29.30"></a><span id="l29.30"> </span>
<a href="#l29.31"></a><span id="l29.31">     xhr.send(null);</span>
<a href="#l29.32"></a><span id="l29.32">     return xhr;</span>
<a href="#l29.33"></a><span id="l29.33">   }</span>
<a href="#l29.34"></a><span id="l29.34"> </span>
<a href="#l29.35"></a><span id="l29.35">   /**</span>
<a href="#l29.36"></a><span id="l29.36">    * Loads scripts described by the given script node. The node can either have a src attribute, or</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mail/base/content/nsContextMenu.js</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mail/base/content/nsContextMenu.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -795,17 +795,17 @@ nsContextMenu.prototype = {</span>
<a href="#l30.4"></a><span id="l30.4">   getLinkURL() {</span>
<a href="#l30.5"></a><span id="l30.5">     if (this.link.href) {</span>
<a href="#l30.6"></a><span id="l30.6">       return this.link.href;</span>
<a href="#l30.7"></a><span id="l30.7">     }</span>
<a href="#l30.8"></a><span id="l30.8">     var href = this.link.getAttributeNS(&quot;http://www.w3.org/1999/xlink&quot;, &quot;href&quot;);</span>
<a href="#l30.9"></a><span id="l30.9">     if (!href || (href.trim() == &quot;&quot;)) {</span>
<a href="#l30.10"></a><span id="l30.10">        // Without this we try to save as the current doc,</span>
<a href="#l30.11"></a><span id="l30.11">        // for example, HTML case also throws if empty.</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-      throw &quot;Empty href&quot;;</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+      throw new Error(&quot;Empty href&quot;);</span>
<a href="#l30.14"></a><span id="l30.14">     }</span>
<a href="#l30.15"></a><span id="l30.15">     href = this.makeURLAbsolute(this.link.baseURI, href);</span>
<a href="#l30.16"></a><span id="l30.16">     return href;</span>
<a href="#l30.17"></a><span id="l30.17">   },</span>
<a href="#l30.18"></a><span id="l30.18"> </span>
<a href="#l30.19"></a><span id="l30.19">   /**</span>
<a href="#l30.20"></a><span id="l30.20">    * Generate a URI object from the linkURL spec</span>
<a href="#l30.21"></a><span id="l30.21">    * @return an nsIURI if possible, or null if not</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mail/base/content/nsDragAndDrop.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mail/base/content/nsDragAndDrop.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -69,17 +69,17 @@ var nsTransferable = {</span>
<a href="#l31.4"></a><span id="l31.4">    *        for each item from the specified source (clipboard/drag&amp;drop etc)</span>
<a href="#l31.5"></a><span id="l31.5">    * @param Boolean aAnyFlag</span>
<a href="#l31.6"></a><span id="l31.6">    *        a flag specifying whether or not a specific flavour is requested. If false,</span>
<a href="#l31.7"></a><span id="l31.7">    *        data of the type of the first flavour in the flavourlist parameter is returned,</span>
<a href="#l31.8"></a><span id="l31.8">    *        otherwise the best flavour supported will be returned.</span>
<a href="#l31.9"></a><span id="l31.9">    **/</span>
<a href="#l31.10"></a><span id="l31.10">   get(aFlavourSet, aRetrievalFunc, aAnyFlag) {</span>
<a href="#l31.11"></a><span id="l31.11">     if (!aRetrievalFunc)</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-      throw &quot;No data retrieval handler provided!&quot;;</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+      throw new Error(&quot;No data retrieval handler provided!&quot;);</span>
<a href="#l31.14"></a><span id="l31.14"> </span>
<a href="#l31.15"></a><span id="l31.15">     var array = aRetrievalFunc(aFlavourSet);</span>
<a href="#l31.16"></a><span id="l31.16">     var dataArray = [];</span>
<a href="#l31.17"></a><span id="l31.17"> </span>
<a href="#l31.18"></a><span id="l31.18">     // Iterate over the number of items returned from aRetrievalFunc. For</span>
<a href="#l31.19"></a><span id="l31.19">     // clipboard operations, this is 1, for drag and drop (where multiple</span>
<a href="#l31.20"></a><span id="l31.20">     // items may have been dragged) this could be &gt;1.</span>
<a href="#l31.21"></a><span id="l31.21">     for (let i = 0; i &lt; array.length; i++) {</span>
<a href="#l31.22"></a><span id="l31.22" class="difflineat">@@ -542,12 +542,12 @@ var nsDragAndDrop = {</span>
<a href="#l31.23"></a><span id="l31.23"> </span>
<a href="#l31.24"></a><span id="l31.24">     try {</span>
<a href="#l31.25"></a><span id="l31.25">       secMan.checkLoadURIStrWithPrincipal(principal, aDraggedText,</span>
<a href="#l31.26"></a><span id="l31.26">                                           Ci.nsIScriptSecurityManager.STANDARD);</span>
<a href="#l31.27"></a><span id="l31.27">     } catch (e) {</span>
<a href="#l31.28"></a><span id="l31.28">       // Stop event propagation right here.</span>
<a href="#l31.29"></a><span id="l31.29">       aEvent.stopPropagation();</span>
<a href="#l31.30"></a><span id="l31.30"> </span>
<a href="#l31.31"></a><span id="l31.31" class="difflineminus">-      throw &quot;Drop of &quot; + aDraggedText + &quot; denied.&quot;;</span>
<a href="#l31.32"></a><span id="l31.32" class="difflineplus">+      throw new Error(&quot;Drop of &quot; + aDraggedText + &quot; denied.&quot;);</span>
<a href="#l31.33"></a><span id="l31.33">     }</span>
<a href="#l31.34"></a><span id="l31.34">   },</span>
<a href="#l31.35"></a><span id="l31.35"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/mail/base/content/sanitize.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/mail/base/content/sanitize.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -210,17 +210,17 @@ Sanitizer.getClearRange = function(ts) {</span>
<a href="#l32.4"></a><span id="l32.4">     case Sanitizer.TIMESPAN_TODAY :</span>
<a href="#l32.5"></a><span id="l32.5">       var d = new Date();  // Start with today</span>
<a href="#l32.6"></a><span id="l32.6">       d.setHours(0);      // zero us back to midnight...</span>
<a href="#l32.7"></a><span id="l32.7">       d.setMinutes(0);</span>
<a href="#l32.8"></a><span id="l32.8">       d.setSeconds(0);</span>
<a href="#l32.9"></a><span id="l32.9">       startDate = d.valueOf() * 1000; // convert to epoch usec</span>
<a href="#l32.10"></a><span id="l32.10">       break;</span>
<a href="#l32.11"></a><span id="l32.11">     default:</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-      throw &quot;Invalid time span for clear private data: &quot; + ts;</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+      throw new Error(&quot;Invalid time span for clear private data: &quot; + ts);</span>
<a href="#l32.14"></a><span id="l32.14">   }</span>
<a href="#l32.15"></a><span id="l32.15">   return [startDate, endDate];</span>
<a href="#l32.16"></a><span id="l32.16"> };</span>
<a href="#l32.17"></a><span id="l32.17"> </span>
<a href="#l32.18"></a><span id="l32.18"> Sanitizer._prefs = null;</span>
<a href="#l32.19"></a><span id="l32.19"> Sanitizer.__defineGetter__(&quot;prefs&quot;, function() {</span>
<a href="#l32.20"></a><span id="l32.20">   return Sanitizer._prefs ? Sanitizer._prefs</span>
<a href="#l32.21"></a><span id="l32.21">     : Sanitizer._prefs = Services.prefs</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mail/components/accountcreation/content/util.js</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mail/components/accountcreation/content/util.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -553,17 +553,17 @@ function deepCopy(org) {</span>
<a href="#l33.4"></a><span id="l33.4">     return org;</span>
<a href="#l33.5"></a><span id="l33.5">   if (typeof(org) == &quot;number&quot;)</span>
<a href="#l33.6"></a><span id="l33.6">     return org;</span>
<a href="#l33.7"></a><span id="l33.7">   if (typeof(org) == &quot;boolean&quot;)</span>
<a href="#l33.8"></a><span id="l33.8">     return org;</span>
<a href="#l33.9"></a><span id="l33.9">   if (typeof(org) == &quot;function&quot;)</span>
<a href="#l33.10"></a><span id="l33.10">     return org;</span>
<a href="#l33.11"></a><span id="l33.11">   if (typeof(org) != &quot;object&quot;)</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-    throw &quot;can't copy objects of type &quot; + typeof(org) + &quot; yet&quot;;</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+    throw new Error(&quot;can't copy objects of type &quot; + typeof(org) + &quot; yet&quot;);</span>
<a href="#l33.14"></a><span id="l33.14"> </span>
<a href="#l33.15"></a><span id="l33.15">   // TODO still instanceof org != instanceof copy</span>
<a href="#l33.16"></a><span id="l33.16">   // var result = new org.constructor();</span>
<a href="#l33.17"></a><span id="l33.17">   var result = {};</span>
<a href="#l33.18"></a><span id="l33.18">   if (typeof(org.length) != &quot;undefined&quot;)</span>
<a href="#l33.19"></a><span id="l33.19">     result = [];</span>
<a href="#l33.20"></a><span id="l33.20">   for (var prop in org)</span>
<a href="#l33.21"></a><span id="l33.21">     result[prop] = deepCopy(org[prop]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mail/components/accountcreation/content/verifyConfig.js</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mail/components/accountcreation/content/verifyConfig.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -82,17 +82,17 @@ function verifyConfig(config, alter, msg</span>
<a href="#l34.4"></a><span id="l34.4">       if (!config.oauthSettings.issuer || !config.oauthSettings.scope) {</span>
<a href="#l34.5"></a><span id="l34.5">         // lookup issuer or scope from hostname</span>
<a href="#l34.6"></a><span id="l34.6">         let hostname = (config.incoming.auth == Ci.nsMsgAuthMethod.OAuth2) ?</span>
<a href="#l34.7"></a><span id="l34.7">                        config.incoming.hostname : config.outgoing.hostname;</span>
<a href="#l34.8"></a><span id="l34.8">         let hostDetails = OAuth2Providers.getHostnameDetails(hostname);</span>
<a href="#l34.9"></a><span id="l34.9">         if (hostDetails)</span>
<a href="#l34.10"></a><span id="l34.10">           [config.oauthSettings.issuer, config.oauthSettings.scope] = hostDetails;</span>
<a href="#l34.11"></a><span id="l34.11">         if (!config.oauthSettings.issuer || !config.oauthSettings.scope)</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-          throw &quot;Could not get issuer for oauth2 authentication&quot;;</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+          throw new Error(&quot;Could not get issuer for oauth2 authentication&quot;);</span>
<a href="#l34.14"></a><span id="l34.14">       }</span>
<a href="#l34.15"></a><span id="l34.15">       gEmailWizardLogger.info(&quot;Saving oauth parameters for issuer &quot; +</span>
<a href="#l34.16"></a><span id="l34.16">                                config.oauthSettings.issuer);</span>
<a href="#l34.17"></a><span id="l34.17">       inServer.setCharValue(&quot;oauth2.scope&quot;, config.oauthSettings.scope);</span>
<a href="#l34.18"></a><span id="l34.18">       inServer.setCharValue(&quot;oauth2.issuer&quot;, config.oauthSettings.issuer);</span>
<a href="#l34.19"></a><span id="l34.19">       gEmailWizardLogger.info(&quot;OAuth2 issuer, scope is &quot; +</span>
<a href="#l34.20"></a><span id="l34.20">                               config.oauthSettings.issuer + &quot;, &quot; + config.oauthSettings.scope);</span>
<a href="#l34.21"></a><span id="l34.21">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/mail/components/im/content/addbuddy.js</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/mail/components/im/content/addbuddy.js</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -13,17 +13,17 @@ var addBuddy = {</span>
<a href="#l35.4"></a><span id="l35.4">         continue;</span>
<a href="#l35.5"></a><span id="l35.5">       let proto = acc.protocol;</span>
<a href="#l35.6"></a><span id="l35.6">       let item = accountList.appendItem(acc.name, acc.id, proto.name);</span>
<a href="#l35.7"></a><span id="l35.7">       item.setAttribute(&quot;image&quot;, proto.iconBaseURI + &quot;icon.png&quot;);</span>
<a href="#l35.8"></a><span id="l35.8">       item.setAttribute(&quot;class&quot;, &quot;menuitem-iconic&quot;);</span>
<a href="#l35.9"></a><span id="l35.9">     }</span>
<a href="#l35.10"></a><span id="l35.10">     if (!accountList.itemCount) {</span>
<a href="#l35.11"></a><span id="l35.11">       document.getElementById(&quot;addBuddyDialog&quot;).cancelDialog();</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-      throw &quot;No connected account!&quot;;</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+      throw new Error(&quot;No connected account!&quot;);</span>
<a href="#l35.14"></a><span id="l35.14">     }</span>
<a href="#l35.15"></a><span id="l35.15">     accountList.selectedIndex = 0;</span>
<a href="#l35.16"></a><span id="l35.16">   },</span>
<a href="#l35.17"></a><span id="l35.17"> </span>
<a href="#l35.18"></a><span id="l35.18">   oninput() {</span>
<a href="#l35.19"></a><span id="l35.19">     document.documentElement.getButton(&quot;accept&quot;).disabled =</span>
<a href="#l35.20"></a><span id="l35.20">       !addBuddy.getValue(&quot;name&quot;);</span>
<a href="#l35.21"></a><span id="l35.21">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/mail/components/im/content/chat-messenger.js</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/mail/components/im/content/chat-messenger.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -495,17 +495,17 @@ var chatHandler = {</span>
<a href="#l36.4"></a><span id="l36.4">              treeView._rowMap[index].log.time != logTime)</span>
<a href="#l36.5"></a><span id="l36.5">         ++index;</span>
<a href="#l36.6"></a><span id="l36.6">       if (treeView._rowMap[index].log.time == logTime) {</span>
<a href="#l36.7"></a><span id="l36.7">         logTree.view.selection.select(index);</span>
<a href="#l36.8"></a><span id="l36.8">         logTree.ensureRowIsVisible(index);</span>
<a href="#l36.9"></a><span id="l36.9">       }</span>
<a href="#l36.10"></a><span id="l36.10">       return true;</span>
<a href="#l36.11"></a><span id="l36.11">     }</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-    throw &quot;Couldn't find the log to select among the set of logs passed.&quot;;</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+    throw new Error(&quot;Couldn't find the log to select among the set of logs passed.&quot;);</span>
<a href="#l36.14"></a><span id="l36.14">   },</span>
<a href="#l36.15"></a><span id="l36.15"> </span>
<a href="#l36.16"></a><span id="l36.16">   onLogSelect() {</span>
<a href="#l36.17"></a><span id="l36.17">     let selection = this._treeView.selection;</span>
<a href="#l36.18"></a><span id="l36.18">     let currentIndex = selection.currentIndex;</span>
<a href="#l36.19"></a><span id="l36.19">     // The current (focused) row may not be actually selected...</span>
<a href="#l36.20"></a><span id="l36.20">     if (!selection.isSelected(currentIndex))</span>
<a href="#l36.21"></a><span id="l36.21">       return;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/mail/components/im/content/imAccountWizard.js</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/mail/components/im/content/imAccountWizard.js</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -270,17 +270,17 @@ var accountWizard = {</span>
<a href="#l37.4"></a><span id="l37.4">         if (val != opt.getString())</span>
<a href="#l37.5"></a><span id="l37.5">           this.prefs.push({opt, name, value: val});</span>
<a href="#l37.6"></a><span id="l37.6">         break;</span>
<a href="#l37.7"></a><span id="l37.7">       case opt.typeList:</span>
<a href="#l37.8"></a><span id="l37.8">         if (val != opt.getListDefault())</span>
<a href="#l37.9"></a><span id="l37.9">           this.prefs.push({opt, name, value: val});</span>
<a href="#l37.10"></a><span id="l37.10">         break;</span>
<a href="#l37.11"></a><span id="l37.11">       default:</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-        throw &quot;unknown preference type &quot; + opt.type;</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+        throw new Error(&quot;unknown preference type &quot; + opt.type);</span>
<a href="#l37.14"></a><span id="l37.14">       }</span>
<a href="#l37.15"></a><span id="l37.15">     }</span>
<a href="#l37.16"></a><span id="l37.16"> </span>
<a href="#l37.17"></a><span id="l37.17">     for (let i = 0; i &lt; this.prefs.length; ++i) {</span>
<a href="#l37.18"></a><span id="l37.18">       let opt = this.prefs[i];</span>
<a href="#l37.19"></a><span id="l37.19">       let label = bundle.getFormattedString(&quot;accountColon&quot;, [opt.opt.label]);</span>
<a href="#l37.20"></a><span id="l37.20">       rows.appendChild(this.createSummaryRow(label, opt.value));</span>
<a href="#l37.21"></a><span id="l37.21">     }</span>
<a href="#l37.22"></a><span id="l37.22" class="difflineat">@@ -303,17 +303,17 @@ var accountWizard = {</span>
<a href="#l37.23"></a><span id="l37.23">       case opt.typeInt:</span>
<a href="#l37.24"></a><span id="l37.24">         acc.setInt(option.name, option.value);</span>
<a href="#l37.25"></a><span id="l37.25">         break;</span>
<a href="#l37.26"></a><span id="l37.26">       case opt.typeString:</span>
<a href="#l37.27"></a><span id="l37.27">       case opt.typeList:</span>
<a href="#l37.28"></a><span id="l37.28">         acc.setString(option.name, option.value);</span>
<a href="#l37.29"></a><span id="l37.29">         break;</span>
<a href="#l37.30"></a><span id="l37.30">       default:</span>
<a href="#l37.31"></a><span id="l37.31" class="difflineminus">-        throw &quot;unknown type&quot;;</span>
<a href="#l37.32"></a><span id="l37.32" class="difflineplus">+        throw new Error(&quot;unknown type&quot;);</span>
<a href="#l37.33"></a><span id="l37.33">       }</span>
<a href="#l37.34"></a><span id="l37.34">     }</span>
<a href="#l37.35"></a><span id="l37.35">     var autologin = this.getValue(&quot;connectNow&quot;);</span>
<a href="#l37.36"></a><span id="l37.36">     acc.autoLogin = autologin;</span>
<a href="#l37.37"></a><span id="l37.37"> </span>
<a href="#l37.38"></a><span id="l37.38">     acc.save();</span>
<a href="#l37.39"></a><span id="l37.39"> </span>
<a href="#l37.40"></a><span id="l37.40">     try {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/mail/components/im/content/imAccounts.js</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/mail/components/im/content/imAccounts.js</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -575,19 +575,19 @@ var gAMDragAndDrop = {</span>
<a href="#l38.4"></a><span id="l38.4">     this.SCROLL_SPEED = Services.prefs.getIntPref(&quot;toolkit.scrollbox.scrollIncrement&quot;, 20);</span>
<a href="#l38.5"></a><span id="l38.5">     return this.SCROLL_SPEED;</span>
<a href="#l38.6"></a><span id="l38.6">   },</span>
<a href="#l38.7"></a><span id="l38.7"> </span>
<a href="#l38.8"></a><span id="l38.8">   onDragStart(aEvent, aTransferData, aAction) {</span>
<a href="#l38.9"></a><span id="l38.9">     let accountElement = aEvent.explicitOriginalTarget;</span>
<a href="#l38.10"></a><span id="l38.10">     // This stops the dragging session.</span>
<a href="#l38.11"></a><span id="l38.11">     if (!(accountElement instanceof Ci.nsIDOMXULSelectControlItemElement))</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-      throw &quot;Element is not draggable!&quot;;</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+      throw new Error(&quot;Element is not draggable!&quot;);</span>
<a href="#l38.14"></a><span id="l38.14">     if (gAccountManager.accountList.itemCount == 1)</span>
<a href="#l38.15"></a><span id="l38.15" class="difflineminus">-      throw &quot;Can't drag while there is only one account!&quot;;</span>
<a href="#l38.16"></a><span id="l38.16" class="difflineplus">+      throw new Error(&quot;Can't drag while there is only one account!&quot;);</span>
<a href="#l38.17"></a><span id="l38.17"> </span>
<a href="#l38.18"></a><span id="l38.18">     // Transferdata is never used, but we need to transfer something.</span>
<a href="#l38.19"></a><span id="l38.19">     aTransferData.data = new TransferData();</span>
<a href="#l38.20"></a><span id="l38.20">     aTransferData.data.addDataForFlavour(this.ACCOUNT_MIME_TYPE, accountElement);</span>
<a href="#l38.21"></a><span id="l38.21">   },</span>
<a href="#l38.22"></a><span id="l38.22"> </span>
<a href="#l38.23"></a><span id="l38.23">   onDragOver(aEvent, aFlavour, aSession) {</span>
<a href="#l38.24"></a><span id="l38.24">     let accountElement = aEvent.explicitOriginalTarget;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/mail/components/im/content/imContextMenu.js</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/mail/components/im/content/imContextMenu.js</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -228,17 +228,17 @@ imContextMenu.prototype = {</span>
<a href="#l39.4"></a><span id="l39.4">       return href;</span>
<a href="#l39.5"></a><span id="l39.5"> </span>
<a href="#l39.6"></a><span id="l39.6">     href = this.link.getAttributeNS(&quot;http://www.w3.org/1999/xlink&quot;,</span>
<a href="#l39.7"></a><span id="l39.7">                                     &quot;href&quot;);</span>
<a href="#l39.8"></a><span id="l39.8"> </span>
<a href="#l39.9"></a><span id="l39.9">     if (!href || (href.trim() == &quot;&quot;)) {</span>
<a href="#l39.10"></a><span id="l39.10">       // Without this we try to save as the current doc,</span>
<a href="#l39.11"></a><span id="l39.11">       // for example, HTML case also throws if empty</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-      throw &quot;Empty href&quot;;</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+      throw new Error(&quot;Empty href&quot;);</span>
<a href="#l39.14"></a><span id="l39.14">     }</span>
<a href="#l39.15"></a><span id="l39.15"> </span>
<a href="#l39.16"></a><span id="l39.16">     return makeURLAbsolute(this.link.baseURI, href);</span>
<a href="#l39.17"></a><span id="l39.17">   },</span>
<a href="#l39.18"></a><span id="l39.18"> </span>
<a href="#l39.19"></a><span id="l39.19">   getLinkURI() {</span>
<a href="#l39.20"></a><span id="l39.20">     try {</span>
<a href="#l39.21"></a><span id="l39.21">       return Services.io.newURI(this.linkURL);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/mail/components/im/content/imconversation.xml</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/mail/components/im/content/imconversation.xml</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -153,17 +153,17 @@</span>
<a href="#l40.4"></a><span id="l40.4">        &lt;/body&gt;</span>
<a href="#l40.5"></a><span id="l40.5">      &lt;/method&gt;</span>
<a href="#l40.6"></a><span id="l40.6"> </span>
<a href="#l40.7"></a><span id="l40.7">      &lt;method name=&quot;addMsg&quot;&gt;</span>
<a href="#l40.8"></a><span id="l40.8">       &lt;parameter name=&quot;aMsg&quot;/&gt;</span>
<a href="#l40.9"></a><span id="l40.9">       &lt;body&gt;</span>
<a href="#l40.10"></a><span id="l40.10">       &lt;![CDATA[</span>
<a href="#l40.11"></a><span id="l40.11">         if (!this.loaded)</span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-          throw &quot;Calling addMsg before the browser is ready?&quot;;</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+          throw new Error(&quot;Calling addMsg before the browser is ready?&quot;);</span>
<a href="#l40.14"></a><span id="l40.14"> </span>
<a href="#l40.15"></a><span id="l40.15">         var conv = aMsg.conversation;</span>
<a href="#l40.16"></a><span id="l40.16">         if (!conv) {</span>
<a href="#l40.17"></a><span id="l40.17">           // The conversation has already been destroyed,</span>
<a href="#l40.18"></a><span id="l40.18">           // probably because the window was closed.</span>
<a href="#l40.19"></a><span id="l40.19">           // Return without doing anything.</span>
<a href="#l40.20"></a><span id="l40.20">           return;</span>
<a href="#l40.21"></a><span id="l40.21">         }</span>
<a href="#l40.22"></a><span id="l40.22" class="difflineat">@@ -1105,19 +1105,19 @@</span>
<a href="#l40.23"></a><span id="l40.23"> </span>
<a href="#l40.24"></a><span id="l40.24">      &lt;!-- Create a buddy item to add in the visible list of participants --&gt;</span>
<a href="#l40.25"></a><span id="l40.25">      &lt;method name=&quot;createBuddy&quot;&gt;</span>
<a href="#l40.26"></a><span id="l40.26">        &lt;parameter name=&quot;aBuddy&quot;/&gt;</span>
<a href="#l40.27"></a><span id="l40.27">        &lt;body&gt;</span>
<a href="#l40.28"></a><span id="l40.28">        &lt;![CDATA[</span>
<a href="#l40.29"></a><span id="l40.29">          var name = aBuddy.name;</span>
<a href="#l40.30"></a><span id="l40.30">          if (!name)</span>
<a href="#l40.31"></a><span id="l40.31" class="difflineminus">-           throw &quot;The empty string isn't a valid nick.&quot;;</span>
<a href="#l40.32"></a><span id="l40.32" class="difflineplus">+           throw new Error(&quot;The empty string isn't a valid nick.&quot;);</span>
<a href="#l40.33"></a><span id="l40.33">          if (this.buddies.has(name))</span>
<a href="#l40.34"></a><span id="l40.34" class="difflineminus">-           throw &quot;Adding chat buddy &quot; + name + &quot; twice?!&quot;;</span>
<a href="#l40.35"></a><span id="l40.35" class="difflineplus">+           throw new Error(&quot;Adding chat buddy &quot; + name + &quot; twice?!&quot;);</span>
<a href="#l40.36"></a><span id="l40.36"> </span>
<a href="#l40.37"></a><span id="l40.37">          this.trackNick(name);</span>
<a href="#l40.38"></a><span id="l40.38"> </span>
<a href="#l40.39"></a><span id="l40.39">          let image = document.createElement(&quot;image&quot;);</span>
<a href="#l40.40"></a><span id="l40.40">          let label = document.createElement(&quot;label&quot;);</span>
<a href="#l40.41"></a><span id="l40.41">          label.setAttribute(&quot;value&quot;, name);</span>
<a href="#l40.42"></a><span id="l40.42">          label.setAttribute(&quot;flex&quot;, &quot;1&quot;);</span>
<a href="#l40.43"></a><span id="l40.43">          label.setAttribute(&quot;crop&quot;, &quot;end&quot;);</span>
<a href="#l40.44"></a><span id="l40.44" class="difflineat">@@ -1179,17 +1179,17 @@</span>
<a href="#l40.45"></a><span id="l40.45">      &lt;!-- Update a buddy in the visible list of participants --&gt;</span>
<a href="#l40.46"></a><span id="l40.46">      &lt;method name=&quot;updateBuddy&quot;&gt;</span>
<a href="#l40.47"></a><span id="l40.47">        &lt;parameter name=&quot;aBuddy&quot;/&gt;</span>
<a href="#l40.48"></a><span id="l40.48">        &lt;parameter name=&quot;aOldName&quot;/&gt;</span>
<a href="#l40.49"></a><span id="l40.49">        &lt;body&gt;</span>
<a href="#l40.50"></a><span id="l40.50">        &lt;![CDATA[</span>
<a href="#l40.51"></a><span id="l40.51">          var name = aBuddy.name;</span>
<a href="#l40.52"></a><span id="l40.52">          if (!name)</span>
<a href="#l40.53"></a><span id="l40.53" class="difflineminus">-           throw &quot;The empty string isn't a valid nick.&quot;;</span>
<a href="#l40.54"></a><span id="l40.54" class="difflineplus">+           throw new Error(&quot;The empty string isn't a valid nick.&quot;);</span>
<a href="#l40.55"></a><span id="l40.55"> </span>
<a href="#l40.56"></a><span id="l40.56">          if (!aOldName) {</span>
<a href="#l40.57"></a><span id="l40.57">            // If aOldName is null, we are changing the flags of the buddy</span>
<a href="#l40.58"></a><span id="l40.58">            let item = this.buddies.get(name);</span>
<a href="#l40.59"></a><span id="l40.59">            item.chatBuddy = aBuddy;</span>
<a href="#l40.60"></a><span id="l40.60">            this.setBuddyAttributes(item);</span>
<a href="#l40.61"></a><span id="l40.61">            return;</span>
<a href="#l40.62"></a><span id="l40.62">          }</span>
<a href="#l40.63"></a><span id="l40.63" class="difflineat">@@ -1201,20 +1201,20 @@</span>
<a href="#l40.64"></a><span id="l40.64"> </span>
<a href="#l40.65"></a><span id="l40.65">          this.trackNick(name);</span>
<a href="#l40.66"></a><span id="l40.66"> </span>
<a href="#l40.67"></a><span id="l40.67">          if (!this._isConversationSelected)</span>
<a href="#l40.68"></a><span id="l40.68">            return;</span>
<a href="#l40.69"></a><span id="l40.69"> </span>
<a href="#l40.70"></a><span id="l40.70">          // Is aOldName is not null, then we are renaming the buddy</span>
<a href="#l40.71"></a><span id="l40.71">          if (!this.buddies.has(aOldName))</span>
<a href="#l40.72"></a><span id="l40.72" class="difflineminus">-           throw &quot;Updating a chat buddy that does not exist: &quot; + aOldName;</span>
<a href="#l40.73"></a><span id="l40.73" class="difflineplus">+           throw new Error(&quot;Updating a chat buddy that does not exist: &quot; + aOldName);</span>
<a href="#l40.74"></a><span id="l40.74"> </span>
<a href="#l40.75"></a><span id="l40.75">          if (this.buddies.has(name))</span>
<a href="#l40.76"></a><span id="l40.76" class="difflineminus">-           throw &quot;Updating a chat buddy to an already existing one: &quot; + name;</span>
<a href="#l40.77"></a><span id="l40.77" class="difflineplus">+           throw new Error(&quot;Updating a chat buddy to an already existing one: &quot; + name);</span>
<a href="#l40.78"></a><span id="l40.78"> </span>
<a href="#l40.79"></a><span id="l40.79">          let item = this.buddies.get(aOldName);</span>
<a href="#l40.80"></a><span id="l40.80">          item.chatBuddy = aBuddy;</span>
<a href="#l40.81"></a><span id="l40.81">          this.buddies.delete(aOldName);</span>
<a href="#l40.82"></a><span id="l40.82">          this.buddies.set(name, item);</span>
<a href="#l40.83"></a><span id="l40.83">          item.querySelector(&quot;label&quot;).value = name;</span>
<a href="#l40.84"></a><span id="l40.84"> </span>
<a href="#l40.85"></a><span id="l40.85">          // Move this item to the right position if its name changed</span>
<a href="#l40.86"></a><span id="l40.86" class="difflineat">@@ -1224,17 +1224,17 @@</span>
<a href="#l40.87"></a><span id="l40.87">        &lt;/body&gt;</span>
<a href="#l40.88"></a><span id="l40.88">      &lt;/method&gt;</span>
<a href="#l40.89"></a><span id="l40.89"> </span>
<a href="#l40.90"></a><span id="l40.90">      &lt;method name=&quot;removeBuddy&quot;&gt;</span>
<a href="#l40.91"></a><span id="l40.91">        &lt;parameter name=&quot;aName&quot;/&gt;</span>
<a href="#l40.92"></a><span id="l40.92">        &lt;body&gt;</span>
<a href="#l40.93"></a><span id="l40.93">        &lt;![CDATA[</span>
<a href="#l40.94"></a><span id="l40.94">          if (!this.buddies.has(aName))</span>
<a href="#l40.95"></a><span id="l40.95" class="difflineminus">-           throw &quot;Cannot remove a buddy that was not in the room&quot;;</span>
<a href="#l40.96"></a><span id="l40.96" class="difflineplus">+           throw new Error(&quot;Cannot remove a buddy that was not in the room&quot;);</span>
<a href="#l40.97"></a><span id="l40.97">          this.buddies.get(aName).remove();</span>
<a href="#l40.98"></a><span id="l40.98">          this.buddies.delete(aName);</span>
<a href="#l40.99"></a><span id="l40.99">          if (this._isBuddyActive(aName))</span>
<a href="#l40.100"></a><span id="l40.100">            delete this._activeBuddies[aName];</span>
<a href="#l40.101"></a><span id="l40.101">        ]]&gt;</span>
<a href="#l40.102"></a><span id="l40.102">        &lt;/body&gt;</span>
<a href="#l40.103"></a><span id="l40.103">      &lt;/method&gt;</span>
<a href="#l40.104"></a><span id="l40.104"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/mail/components/im/content/imgroup.xml</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/mail/components/im/content/imgroup.xml</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -112,17 +112,17 @@</span>
<a href="#l41.4"></a><span id="l41.4">      &lt;/method&gt;</span>
<a href="#l41.5"></a><span id="l41.5"> </span>
<a href="#l41.6"></a><span id="l41.6">      &lt;method name=&quot;removeContact&quot;&gt;</span>
<a href="#l41.7"></a><span id="l41.7">       &lt;parameter name=&quot;aContact&quot;/&gt;</span>
<a href="#l41.8"></a><span id="l41.8">       &lt;body&gt;</span>
<a href="#l41.9"></a><span id="l41.9">       &lt;![CDATA[</span>
<a href="#l41.10"></a><span id="l41.10">         let contact = this.contactsById[aContact.id];</span>
<a href="#l41.11"></a><span id="l41.11">         if (!contact)</span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-          throw &quot;Removing a contact that isn't here?&quot;;</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+          throw new Error(&quot;Removing a contact that isn't here?&quot;);</span>
<a href="#l41.14"></a><span id="l41.14"> </span>
<a href="#l41.15"></a><span id="l41.15">         // create a new array to remove without breaking for each loops.</span>
<a href="#l41.16"></a><span id="l41.16">         this.contacts = this.contacts.filter(c =&gt; c !== contact);</span>
<a href="#l41.17"></a><span id="l41.17">         delete this.contactsById[contact.contact.id];</span>
<a href="#l41.18"></a><span id="l41.18"> </span>
<a href="#l41.19"></a><span id="l41.19">         contact.destroy();</span>
<a href="#l41.20"></a><span id="l41.20"> </span>
<a href="#l41.21"></a><span id="l41.21">         // Check if some contacts remain in the group, if empty hide it.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/mail/components/im/content/joinchat.js</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/mail/components/im/content/joinchat.js</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -16,17 +16,17 @@ var joinChat = {</span>
<a href="#l42.4"></a><span id="l42.4">       var proto = acc.protocol;</span>
<a href="#l42.5"></a><span id="l42.5">       var item = accountList.appendItem(acc.name, acc.id, proto.name);</span>
<a href="#l42.6"></a><span id="l42.6">       item.setAttribute(&quot;image&quot;, proto.iconBaseURI + &quot;icon.png&quot;);</span>
<a href="#l42.7"></a><span id="l42.7">       item.setAttribute(&quot;class&quot;, &quot;menuitem-iconic&quot;);</span>
<a href="#l42.8"></a><span id="l42.8">       item.account = acc;</span>
<a href="#l42.9"></a><span id="l42.9">     }</span>
<a href="#l42.10"></a><span id="l42.10">     if (!accountList.itemCount) {</span>
<a href="#l42.11"></a><span id="l42.11">       document.getElementById(&quot;joinChatDialog&quot;).cancelDialog();</span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-      throw &quot;No connected MUC enabled account!&quot;;</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+      throw new Error(&quot;No connected MUC enabled account!&quot;);</span>
<a href="#l42.14"></a><span id="l42.14">     }</span>
<a href="#l42.15"></a><span id="l42.15">     accountList.selectedIndex = 0;</span>
<a href="#l42.16"></a><span id="l42.16">   },</span>
<a href="#l42.17"></a><span id="l42.17"> </span>
<a href="#l42.18"></a><span id="l42.18">   onAccountSelect() {</span>
<a href="#l42.19"></a><span id="l42.19">     let ab = document.getElementById(&quot;separatorRow1&quot;);</span>
<a href="#l42.20"></a><span id="l42.20">     while (ab.nextSibling &amp;&amp; ab.nextSibling.id != &quot;separatorRow2&quot;)</span>
<a href="#l42.21"></a><span id="l42.21">       ab.nextSibling.remove();</span>
<a href="#l42.22"></a><span id="l42.22" class="difflineat">@@ -89,17 +89,17 @@ var joinChat = {</span>
<a href="#l42.23"></a><span id="l42.23"> </span>
<a href="#l42.24"></a><span id="l42.24">   join() {</span>
<a href="#l42.25"></a><span id="l42.25">     let values = joinChat._values;</span>
<a href="#l42.26"></a><span id="l42.26">     for (let field of joinChat._fields) {</span>
<a href="#l42.27"></a><span id="l42.27">       let val = field.textbox.value.trim();</span>
<a href="#l42.28"></a><span id="l42.28">       if (!val &amp;&amp; field.field.required) {</span>
<a href="#l42.29"></a><span id="l42.29">         field.textbox.focus();</span>
<a href="#l42.30"></a><span id="l42.30">         // FIXME: why isn't the return false enough?</span>
<a href="#l42.31"></a><span id="l42.31" class="difflineminus">-        throw &quot;Some required fields are empty!&quot;;</span>
<a href="#l42.32"></a><span id="l42.32" class="difflineplus">+        throw new Error(&quot;Some required fields are empty!&quot;);</span>
<a href="#l42.33"></a><span id="l42.33">         // return false;</span>
<a href="#l42.34"></a><span id="l42.34">       }</span>
<a href="#l42.35"></a><span id="l42.35">       if (val)</span>
<a href="#l42.36"></a><span id="l42.36">         values.setValue(field.field.identifier, val);</span>
<a href="#l42.37"></a><span id="l42.37">     }</span>
<a href="#l42.38"></a><span id="l42.38">     let account = joinChat._account;</span>
<a href="#l42.39"></a><span id="l42.39">     account.joinChat(values);</span>
<a href="#l42.40"></a><span id="l42.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/mail/components/im/modules/index_im.jsm</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/mail/components/im/modules/index_im.jsm</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -598,17 +598,17 @@ var GlodaIMIndexer = {</span>
<a href="#l43.4"></a><span id="l43.4">       let id = await this._getIdFromPath(relativePath);</span>
<a href="#l43.5"></a><span id="l43.5">       if (id)</span>
<a href="#l43.6"></a><span id="l43.6">         glodaConv.id = id;</span>
<a href="#l43.7"></a><span id="l43.7">       if (aGlodaConv)</span>
<a href="#l43.8"></a><span id="l43.8">         aGlodaConv.value = glodaConv;</span>
<a href="#l43.9"></a><span id="l43.9">     }</span>
<a href="#l43.10"></a><span id="l43.10"> </span>
<a href="#l43.11"></a><span id="l43.11">     if (!aCache)</span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-      throw &quot;indexIMConversation called without aCache parameter.&quot;;</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineplus">+      throw new Error(&quot;indexIMConversation called without aCache parameter.&quot;);</span>
<a href="#l43.14"></a><span id="l43.14">     let isNew = !Object.prototype.hasOwnProperty.call(aCache, fileName) &amp;&amp; !glodaConv.id;</span>
<a href="#l43.15"></a><span id="l43.15">     let rv = aCallbackHandle.pushAndGo(</span>
<a href="#l43.16"></a><span id="l43.16">       Gloda.grokNounItem(glodaConv, {}, true, isNew, aCallbackHandle));</span>
<a href="#l43.17"></a><span id="l43.17"> </span>
<a href="#l43.18"></a><span id="l43.18">     if (!aLastModifiedTime)</span>
<a href="#l43.19"></a><span id="l43.19">       Cu.reportError(&quot;indexIMConversation called without lastModifiedTime parameter.&quot;);</span>
<a href="#l43.20"></a><span id="l43.20">     aCache[fileName] = aLastModifiedTime || 1;</span>
<a href="#l43.21"></a><span id="l43.21">     this._scheduleCacheSave();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/mail/components/newmailaccount/content/accountProvisioner.js</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/mail/components/newmailaccount/content/accountProvisioner.js</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -339,17 +339,17 @@ var EmailAccountProvisioner = {</span>
<a href="#l44.4"></a><span id="l44.4">       let resultsGroup = event.target;</span>
<a href="#l44.5"></a><span id="l44.5">       while (resultsGroup) {</span>
<a href="#l44.6"></a><span id="l44.6">         if (resultsGroup.classList.contains(&quot;resultsGroup&quot;)) {</span>
<a href="#l44.7"></a><span id="l44.7">           break;</span>
<a href="#l44.8"></a><span id="l44.8">         }</span>
<a href="#l44.9"></a><span id="l44.9">         resultsGroup = resultsGroup.parentElement;</span>
<a href="#l44.10"></a><span id="l44.10">       }</span>
<a href="#l44.11"></a><span id="l44.11">       if (!resultsGroup)</span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-        throw &quot;Unexpected error finding resultsGroup.&quot;;</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+        throw new Error(&quot;Unexpected error finding resultsGroup.&quot;);</span>
<a href="#l44.14"></a><span id="l44.14"> </span>
<a href="#l44.15"></a><span id="l44.15">       // Return if we're already expanded</span>
<a href="#l44.16"></a><span id="l44.16">       if (resultsGroup.classList.contains(&quot;expanded&quot;))</span>
<a href="#l44.17"></a><span id="l44.17">         return;</span>
<a href="#l44.18"></a><span id="l44.18"> </span>
<a href="#l44.19"></a><span id="l44.19">       for (let child of resultsGroup.parentElement.children) {</span>
<a href="#l44.20"></a><span id="l44.20">         if (child != resultsGroup) {</span>
<a href="#l44.21"></a><span id="l44.21">           child.classList.remove(&quot;expanded&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/mail/components/preferences/preferencesTab.js</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/mail/components/preferences/preferencesTab.js</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -51,17 +51,17 @@ var preferencesTabType = {</span>
<a href="#l45.4"></a><span id="l45.4">   },</span>
<a href="#l45.5"></a><span id="l45.5"> </span>
<a href="#l45.6"></a><span id="l45.6">   closeTab(aTab) {</span>
<a href="#l45.7"></a><span id="l45.7">     gPrefTab = null;</span>
<a href="#l45.8"></a><span id="l45.8">   },</span>
<a href="#l45.9"></a><span id="l45.9"> </span>
<a href="#l45.10"></a><span id="l45.10">   openTab(aTab, aArgs) {</span>
<a href="#l45.11"></a><span id="l45.11">     if (!(&quot;contentPage&quot; in aArgs)) {</span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-      throw (&quot;contentPage must be specified&quot;);</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+      throw new Error(&quot;contentPage must be specified&quot;);</span>
<a href="#l45.14"></a><span id="l45.14">     }</span>
<a href="#l45.15"></a><span id="l45.15"> </span>
<a href="#l45.16"></a><span id="l45.16">     // First clone the page and set up the basics.</span>
<a href="#l45.17"></a><span id="l45.17">     let clone = document.getElementById(&quot;preferencesTab&quot;).firstChild</span>
<a href="#l45.18"></a><span id="l45.18">                         .cloneNode(true);</span>
<a href="#l45.19"></a><span id="l45.19"> </span>
<a href="#l45.20"></a><span id="l45.20">     clone.setAttribute(&quot;id&quot;, &quot;preferencesTab&quot; + this.lastBrowserId);</span>
<a href="#l45.21"></a><span id="l45.21">     clone.setAttribute(&quot;collapsed&quot;, false);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/mail/components/search/content/SpotlightIntegration.js</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/mail/components/search/content/SpotlightIntegration.js</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -102,17 +102,17 @@ SearchIntegration = { // eslint-disable-</span>
<a href="#l46.4"></a><span id="l46.4"> </span>
<a href="#l46.5"></a><span id="l46.5">     // Encodes reserved XML characters</span>
<a href="#l46.6"></a><span id="l46.6">     _xmlEscapeString(s) {</span>
<a href="#l46.7"></a><span id="l46.7">       return s.replace(/[&lt;&gt;&amp;]/g, function(s) {</span>
<a href="#l46.8"></a><span id="l46.8">         switch (s) {</span>
<a href="#l46.9"></a><span id="l46.9">           case &quot;&lt;&quot;: return &quot;&amp;lt;&quot;;</span>
<a href="#l46.10"></a><span id="l46.10">           case &quot;&gt;&quot;: return &quot;&amp;gt;&quot;;</span>
<a href="#l46.11"></a><span id="l46.11">           case &quot;&amp;&quot;: return &quot;&amp;amp;&quot;;</span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-          default: throw &quot;Unexpected match&quot;;</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+          default: throw new Error(&quot;Unexpected match&quot;);</span>
<a href="#l46.14"></a><span id="l46.14">           }</span>
<a href="#l46.15"></a><span id="l46.15">         }</span>
<a href="#l46.16"></a><span id="l46.16">       );</span>
<a href="#l46.17"></a><span id="l46.17">     },</span>
<a href="#l46.18"></a><span id="l46.18"> </span>
<a href="#l46.19"></a><span id="l46.19">     onStartRequest(request) {</span>
<a href="#l46.20"></a><span id="l46.20">       try {</span>
<a href="#l46.21"></a><span id="l46.21">         let outputFileStream = Cc[&quot;@mozilla.org/network/file-output-stream;1&quot;]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/mail/test/mozmill/folder-tree-modes/test-smart-folders.js</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/mail/test/mozmill/folder-tree-modes/test-smart-folders.js</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -190,17 +190,17 @@ function test_folder_flag_changes() {</span>
<a href="#l47.4"></a><span id="l47.4">   let localArchiveFolder = rootFolder.getChildNamed(&quot;Archives&quot;);</span>
<a href="#l47.5"></a><span id="l47.5">   let allDescendants = localArchiveFolder.descendants;</span>
<a href="#l47.6"></a><span id="l47.6">   let desiredScope = &quot;|&quot; + localArchiveFolder.URI + &quot;|&quot;;</span>
<a href="#l47.7"></a><span id="l47.7">   for (let folder of fixIterator(allDescendants, Ci.nsIMsgFolder)) {</span>
<a href="#l47.8"></a><span id="l47.8">     desiredScope += folder.URI + &quot;|&quot;;</span>
<a href="#l47.9"></a><span id="l47.9">   }</span>
<a href="#l47.10"></a><span id="l47.10"> </span>
<a href="#l47.11"></a><span id="l47.11">   if (archiveScope != desiredScope)</span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-    throw &quot;archive scope wrong after removing folder&quot;;</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineplus">+    throw new Error(&quot;archive scope wrong after removing folder&quot;);</span>
<a href="#l47.14"></a><span id="l47.14">   assert_folder_and_children_not_in_scope(archiveFolder, archiveScope);</span>
<a href="#l47.15"></a><span id="l47.15"> }</span>
<a href="#l47.16"></a><span id="l47.16"> </span>
<a href="#l47.17"></a><span id="l47.17"> function assert_folder_and_children_in_scope(folder, searchScope)</span>
<a href="#l47.18"></a><span id="l47.18"> {</span>
<a href="#l47.19"></a><span id="l47.19">   let folderURI = &quot;|&quot; + folder.URI + &quot;|&quot;;</span>
<a href="#l47.20"></a><span id="l47.20">   assert_uri_found(folderURI, searchScope);</span>
<a href="#l47.21"></a><span id="l47.21">   let allDescendants = folder.descendants;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-mouse-event-helpers.js</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-mouse-event-helpers.js</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -75,17 +75,17 @@ function drag_n_drop_element(aDragObject</span>
<a href="#l48.4"></a><span id="l48.4">  */</span>
<a href="#l48.5"></a><span id="l48.5"> function synthesize_drag_start(aWindow, aDispatcher, aListener)</span>
<a href="#l48.6"></a><span id="l48.6"> {</span>
<a href="#l48.7"></a><span id="l48.7">   let dt;</span>
<a href="#l48.8"></a><span id="l48.8"> </span>
<a href="#l48.9"></a><span id="l48.9">   let trapDrag = function(event) {</span>
<a href="#l48.10"></a><span id="l48.10"> </span>
<a href="#l48.11"></a><span id="l48.11">     if (!event.dataTransfer)</span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-      throw &quot;no DataTransfer&quot;;</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineplus">+      throw new Error(&quot;no DataTransfer&quot;);</span>
<a href="#l48.14"></a><span id="l48.14"> </span>
<a href="#l48.15"></a><span id="l48.15">     dt = event.dataTransfer;</span>
<a href="#l48.16"></a><span id="l48.16"> </span>
<a href="#l48.17"></a><span id="l48.17">     event.preventDefault();</span>
<a href="#l48.18"></a><span id="l48.18">   };</span>
<a href="#l48.19"></a><span id="l48.19"> </span>
<a href="#l48.20"></a><span id="l48.20">   aListener.addEventListener(&quot;dragstart&quot;, trapDrag, true);</span>
<a href="#l48.21"></a><span id="l48.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/mail/test/resources/jsbridge/jsbridge/extension/chrome/content/modules/server.js</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/mail/test/resources/jsbridge/jsbridge/extension/chrome/content/modules/server.js</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -216,17 +216,17 @@ Bridge.prototype.execFunction = function</span>
<a href="#l49.4"></a><span id="l49.4">   } else if (result) {</span>
<a href="#l49.5"></a><span id="l49.5">     this.session.encodeOut({</span>
<a href="#l49.6"></a><span id="l49.6">       result: true,</span>
<a href="#l49.7"></a><span id="l49.7">       data: null,</span>
<a href="#l49.8"></a><span id="l49.8">       uuid,</span>
<a href="#l49.9"></a><span id="l49.9">     });</span>
<a href="#l49.10"></a><span id="l49.10">   } else {</span>
<a href="#l49.11"></a><span id="l49.11">     log(&quot;jsbridge threw unknown data in execFunc&quot;);</span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-    throw &quot;JSBridge unknown data in execFunc&quot;;</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineplus">+    throw new Error(&quot;JSBridge unknown data in execFunc&quot;);</span>
<a href="#l49.14"></a><span id="l49.14">   }</span>
<a href="#l49.15"></a><span id="l49.15"> };</span>
<a href="#l49.16"></a><span id="l49.16"> </span>
<a href="#l49.17"></a><span id="l49.17"> var backstage = this;</span>
<a href="#l49.18"></a><span id="l49.18"> </span>
<a href="#l49.19"></a><span id="l49.19"> function Session(transport) {</span>
<a href="#l49.20"></a><span id="l49.20">   this.transpart = transport;  // XXX Unused, needed to hold reference? Note the typo.</span>
<a href="#l49.21"></a><span id="l49.21">   let systemPrincipal = Cc[&quot;@mozilla.org/systemprincipal;1&quot;]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/stdlib/EventUtils.jsm</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/stdlib/EventUtils.jsm</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -446,17 +446,17 @@ function _createKeyboardEventDictionary(</span>
<a href="#l50.4"></a><span id="l50.4">       aKeyEvent.keyCode : 0;</span>
<a href="#l50.5"></a><span id="l50.5">   var keyName = &quot;Unidentified&quot;;</span>
<a href="#l50.6"></a><span id="l50.6">   if (aKey.indexOf(&quot;KEY_&quot;) == 0) {</span>
<a href="#l50.7"></a><span id="l50.7">     keyName = aKey.substr(&quot;KEY_&quot;.length);</span>
<a href="#l50.8"></a><span id="l50.8">     result.flags |= Ci.nsITextInputProcessor.KEY_NON_PRINTABLE_KEY;</span>
<a href="#l50.9"></a><span id="l50.9">   } else if (aKey.indexOf(&quot;VK_&quot;) == 0) {</span>
<a href="#l50.10"></a><span id="l50.10">     keyCode = _getKeyboardEvent(aWindow)[&quot;DOM_&quot; + aKey];</span>
<a href="#l50.11"></a><span id="l50.11">     if (!keyCode) {</span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-      throw &quot;Unknown key: &quot; + aKey;</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineplus">+      throw new Error(&quot;Unknown key: &quot; + aKey);</span>
<a href="#l50.14"></a><span id="l50.14">     }</span>
<a href="#l50.15"></a><span id="l50.15">     keyName = _guessKeyNameFromKeyCode(keyCode, aWindow);</span>
<a href="#l50.16"></a><span id="l50.16">     result.flags |= Ci.nsITextInputProcessor.KEY_NON_PRINTABLE_KEY;</span>
<a href="#l50.17"></a><span id="l50.17">   } else if (aKey != &quot;&quot;) {</span>
<a href="#l50.18"></a><span id="l50.18">     keyName = aKey;</span>
<a href="#l50.19"></a><span id="l50.19">     if (!keyCodeIsDefined) {</span>
<a href="#l50.20"></a><span id="l50.20">       keyCode = _computeKeyCodeFromChar(aKey.charAt(0), aWindow);</span>
<a href="#l50.21"></a><span id="l50.21">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/stdlib/httpd.jsm</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/stdlib/httpd.jsm</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -1462,17 +1462,17 @@ RequestReader.prototype = {</span>
<a href="#l51.4"></a><span id="l51.4">       dumpn(&quot;*** No HTTP version in line&quot;);</span>
<a href="#l51.5"></a><span id="l51.5">       throw HTTP_400;</span>
<a href="#l51.6"></a><span id="l51.6">     }</span>
<a href="#l51.7"></a><span id="l51.7"> </span>
<a href="#l51.8"></a><span id="l51.8">     // determine HTTP version</span>
<a href="#l51.9"></a><span id="l51.9">     try {</span>
<a href="#l51.10"></a><span id="l51.10">       metadata._httpVersion = new nsHttpVersion(match[1]);</span>
<a href="#l51.11"></a><span id="l51.11">       if (!metadata._httpVersion.atLeast(nsHttpVersion.HTTP_1_0))</span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-        throw &quot;unsupported HTTP version&quot;;</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineplus">+        throw new Error(&quot;unsupported HTTP version&quot;);</span>
<a href="#l51.14"></a><span id="l51.14">     } catch (e) {</span>
<a href="#l51.15"></a><span id="l51.15">       // we support HTTP/1.0 and HTTP/1.1 only</span>
<a href="#l51.16"></a><span id="l51.16">       throw HTTP_501;</span>
<a href="#l51.17"></a><span id="l51.17">     }</span>
<a href="#l51.18"></a><span id="l51.18"> </span>
<a href="#l51.19"></a><span id="l51.19"> </span>
<a href="#l51.20"></a><span id="l51.20">     var fullPath = request[1];</span>
<a href="#l51.21"></a><span id="l51.21">     var serverIdentity = this._connection.server.identity;</span>
<a href="#l51.22"></a><span id="l51.22" class="difflineat">@@ -4259,27 +4259,27 @@ function htmlEscape(str) {</span>
<a href="#l51.23"></a><span id="l51.23">  *   a string of the form &quot;#.#&quot;, where # is an non-negative decimal integer with</span>
<a href="#l51.24"></a><span id="l51.24">  *   or without leading zeros</span>
<a href="#l51.25"></a><span id="l51.25">  * @throws</span>
<a href="#l51.26"></a><span id="l51.26">  *   if versionString does not specify a valid HTTP version number</span>
<a href="#l51.27"></a><span id="l51.27">  */</span>
<a href="#l51.28"></a><span id="l51.28"> function nsHttpVersion(versionString) {</span>
<a href="#l51.29"></a><span id="l51.29">   var matches = /^(\d+)\.(\d+)$/.exec(versionString);</span>
<a href="#l51.30"></a><span id="l51.30">   if (!matches)</span>
<a href="#l51.31"></a><span id="l51.31" class="difflineminus">-    throw &quot;Not a valid HTTP version!&quot;;</span>
<a href="#l51.32"></a><span id="l51.32" class="difflineplus">+    throw new Error(&quot;Not a valid HTTP version!&quot;);</span>
<a href="#l51.33"></a><span id="l51.33"> </span>
<a href="#l51.34"></a><span id="l51.34">   /** The major version number of this, as a number. */</span>
<a href="#l51.35"></a><span id="l51.35">   this.major = parseInt(matches[1], 10);</span>
<a href="#l51.36"></a><span id="l51.36"> </span>
<a href="#l51.37"></a><span id="l51.37">   /** The minor version number of this, as a number. */</span>
<a href="#l51.38"></a><span id="l51.38">   this.minor = parseInt(matches[2], 10);</span>
<a href="#l51.39"></a><span id="l51.39"> </span>
<a href="#l51.40"></a><span id="l51.40">   if (isNaN(this.major) || isNaN(this.minor) ||</span>
<a href="#l51.41"></a><span id="l51.41">       this.major &lt; 0 || this.minor &lt; 0)</span>
<a href="#l51.42"></a><span id="l51.42" class="difflineminus">-    throw &quot;Not a valid HTTP version!&quot;;</span>
<a href="#l51.43"></a><span id="l51.43" class="difflineplus">+    throw new Error(&quot;Not a valid HTTP version!&quot;);</span>
<a href="#l51.44"></a><span id="l51.44"> }</span>
<a href="#l51.45"></a><span id="l51.45"> nsHttpVersion.prototype = {</span>
<a href="#l51.46"></a><span id="l51.46">   /**</span>
<a href="#l51.47"></a><span id="l51.47">    * Returns the standard string representation of the HTTP version represented</span>
<a href="#l51.48"></a><span id="l51.48">    * by this (e.g., &quot;1.1&quot;).</span>
<a href="#l51.49"></a><span id="l51.49">    */</span>
<a href="#l51.50"></a><span id="l51.50">   toString() {</span>
<a href="#l51.51"></a><span id="l51.51">     return this.major + &quot;.&quot; + this.minor;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/mailnews/addrbook/test/unit/test_collection.js</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/mailnews/addrbook/test/unit/test_collection.js</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -189,18 +189,18 @@ var collectChecker = {</span>
<a href="#l52.4"></a><span id="l52.4"> </span>
<a href="#l52.5"></a><span id="l52.5">   checkAddress(aDetails) {</span>
<a href="#l52.6"></a><span id="l52.6">     try {</span>
<a href="#l52.7"></a><span id="l52.7">       this.addressCollect.collectAddress(aDetails.emailHeader, true,</span>
<a href="#l52.8"></a><span id="l52.8">                                          aDetails.mailFormat);</span>
<a href="#l52.9"></a><span id="l52.9"> </span>
<a href="#l52.10"></a><span id="l52.10">       this.checkCardResult(aDetails, false);</span>
<a href="#l52.11"></a><span id="l52.11">     } catch (e) {</span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-      throw &quot;FAILED in checkAddress emailHeader: &quot; + aDetails.emailHeader +</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineminus">-      &quot; part: &quot; + this.part + &quot; : &quot; + e;</span>
<a href="#l52.14"></a><span id="l52.14" class="difflineplus">+      throw new Error(&quot;FAILED in checkAddress emailHeader: &quot; + aDetails.emailHeader +</span>
<a href="#l52.15"></a><span id="l52.15" class="difflineplus">+        &quot; part: &quot; + this.part + &quot; : &quot; + e);</span>
<a href="#l52.16"></a><span id="l52.16">     }</span>
<a href="#l52.17"></a><span id="l52.17">     ++this.part;</span>
<a href="#l52.18"></a><span id="l52.18">   },</span>
<a href="#l52.19"></a><span id="l52.19"> </span>
<a href="#l52.20"></a><span id="l52.20">   checkAll(aDetailsArray) {</span>
<a href="#l52.21"></a><span id="l52.21">     try {</span>
<a href="#l52.22"></a><span id="l52.22">       // Formulate the string to add.</span>
<a href="#l52.23"></a><span id="l52.23">       var emailHeader = &quot;&quot;;</span>
<a href="#l52.24"></a><span id="l52.24" class="difflineat">@@ -213,17 +213,17 @@ var collectChecker = {</span>
<a href="#l52.25"></a><span id="l52.25"> </span>
<a href="#l52.26"></a><span id="l52.26">       // Now add it. In this case we just set the Mail format Type to unknown.</span>
<a href="#l52.27"></a><span id="l52.27">       this.addressCollect.collectAddress(emailHeader, true,</span>
<a href="#l52.28"></a><span id="l52.28">                                          nsIAbPMF.unknown);</span>
<a href="#l52.29"></a><span id="l52.29"> </span>
<a href="#l52.30"></a><span id="l52.30">       for (i = 0; i &lt; aDetailsArray.length; ++i)</span>
<a href="#l52.31"></a><span id="l52.31">         this.checkCardResult(aDetailsArray[i], true);</span>
<a href="#l52.32"></a><span id="l52.32">     } catch (e) {</span>
<a href="#l52.33"></a><span id="l52.33" class="difflineminus">-      throw &quot;FAILED in checkAll item: &quot; + i + &quot; : &quot; + e;</span>
<a href="#l52.34"></a><span id="l52.34" class="difflineplus">+      throw new Error(&quot;FAILED in checkAll item: &quot; + i + &quot; : &quot; + e);</span>
<a href="#l52.35"></a><span id="l52.35">     }</span>
<a href="#l52.36"></a><span id="l52.36">   },</span>
<a href="#l52.37"></a><span id="l52.37"> </span>
<a href="#l52.38"></a><span id="l52.38">   checkCardResult(aDetails, overrideMailFormat) {</span>
<a href="#l52.39"></a><span id="l52.39">     try {</span>
<a href="#l52.40"></a><span id="l52.40">       var card = this.AB.cardForEmailAddress(aDetails.primaryEmail);</span>
<a href="#l52.41"></a><span id="l52.41"> </span>
<a href="#l52.42"></a><span id="l52.42">       Assert.ok(card != null);</span>
<a href="#l52.43"></a><span id="l52.43" class="difflineat">@@ -238,17 +238,17 @@ var collectChecker = {</span>
<a href="#l52.44"></a><span id="l52.44">       else</span>
<a href="#l52.45"></a><span id="l52.45">         Assert.equal(card.getProperty(&quot;PreferMailFormat&quot;, &quot;BAD&quot;), aDetails.mailFormat);</span>
<a href="#l52.46"></a><span id="l52.46"> </span>
<a href="#l52.47"></a><span id="l52.47">       Assert.equal(card.displayName, aDetails.displayName);</span>
<a href="#l52.48"></a><span id="l52.48">       Assert.equal(card.firstName, aDetails.firstName);</span>
<a href="#l52.49"></a><span id="l52.49">       Assert.equal(card.lastName, aDetails.lastName);</span>
<a href="#l52.50"></a><span id="l52.50">       Assert.equal(card.getProperty(&quot;_AimScreenName&quot;, &quot;&quot;), aDetails.screenName);</span>
<a href="#l52.51"></a><span id="l52.51">     } catch (e) {</span>
<a href="#l52.52"></a><span id="l52.52" class="difflineminus">-      throw &quot;FAILED in checkCardResult emailHeader: &quot; + aDetails.emailHeader + &quot; : &quot; + e;</span>
<a href="#l52.53"></a><span id="l52.53" class="difflineplus">+      throw new Error(&quot;FAILED in checkCardResult emailHeader: &quot; + aDetails.emailHeader + &quot; : &quot; + e);</span>
<a href="#l52.54"></a><span id="l52.54">     }</span>
<a href="#l52.55"></a><span id="l52.55">   },</span>
<a href="#l52.56"></a><span id="l52.56"> };</span>
<a href="#l52.57"></a><span id="l52.57"> </span>
<a href="#l52.58"></a><span id="l52.58"> function run_test() {</span>
<a href="#l52.59"></a><span id="l52.59">   // Test - Get the address collecter</span>
<a href="#l52.60"></a><span id="l52.60"> </span>
<a href="#l52.61"></a><span id="l52.61">   // XXX Getting all directories ensures we create all ABs because the</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/mailnews/test/fakeserver/auth.js</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/mailnews/test/fakeserver/auth.js</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -31,27 +31,27 @@ var AuthPLAIN = {</span>
<a href="#l53.4"></a><span id="l53.4">    * @returns {Object { username : value, password : value } }</span>
<a href="#l53.5"></a><span id="l53.5">    * @throws {String}   error to return to client</span>
<a href="#l53.6"></a><span id="l53.6">    */</span>
<a href="#l53.7"></a><span id="l53.7">   decodeLine(line) {</span>
<a href="#l53.8"></a><span id="l53.8">     dump(&quot;AUTH PLAIN line -&quot; + line + &quot;-\n&quot;);</span>
<a href="#l53.9"></a><span id="l53.9">     line = atob(line); // base64 decode</span>
<a href="#l53.10"></a><span id="l53.10">     let aap = line.split(&quot;\u0000&quot;); // 0-charater is delimiter</span>
<a href="#l53.11"></a><span id="l53.11">     if (aap.length != 3)</span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-      throw &quot;Expected three parts&quot;;</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineplus">+      throw new Error(&quot;Expected three parts&quot;);</span>
<a href="#l53.14"></a><span id="l53.14">     /* aap is: authorize-id, authenticate-id, password.</span>
<a href="#l53.15"></a><span id="l53.15">        Generally, authorize-id = authenticate-id = username.</span>
<a href="#l53.16"></a><span id="l53.16">        authorize-id may thus be empty and then defaults to authenticate-id. */</span>
<a href="#l53.17"></a><span id="l53.17">     var result = {};</span>
<a href="#l53.18"></a><span id="l53.18">     var authzid = aap[0];</span>
<a href="#l53.19"></a><span id="l53.19">     result.username = aap[1];</span>
<a href="#l53.20"></a><span id="l53.20">     result.password = aap[2];</span>
<a href="#l53.21"></a><span id="l53.21">     dump(&quot;authorize-id: -&quot; + authzid + &quot;-, username: -&quot; + result.username + &quot;-, password: -&quot; + result.password + &quot;-\n&quot;);</span>
<a href="#l53.22"></a><span id="l53.22">     if (authzid &amp;&amp; authzid != result.username)</span>
<a href="#l53.23"></a><span id="l53.23" class="difflineminus">-      throw &quot;Expecting a authorize-id that's either the same as authenticate-id or empty&quot;;</span>
<a href="#l53.24"></a><span id="l53.24" class="difflineplus">+      throw new Error(&quot;Expecting a authorize-id that's either the same as authenticate-id or empty&quot;);</span>
<a href="#l53.25"></a><span id="l53.25">     return result;</span>
<a href="#l53.26"></a><span id="l53.26">   },</span>
<a href="#l53.27"></a><span id="l53.27"> </span>
<a href="#l53.28"></a><span id="l53.28">   /**</span>
<a href="#l53.29"></a><span id="l53.29">    * Create an AUTH PLAIN line, to allow a client to authenticate to a server.</span>
<a href="#l53.30"></a><span id="l53.30">    * Useful for tests.</span>
<a href="#l53.31"></a><span id="l53.31">    */</span>
<a href="#l53.32"></a><span id="l53.32">   encodeLine(username, password) {</span>
<a href="#l53.33"></a><span id="l53.33" class="difflineat">@@ -113,17 +113,17 @@ var AuthCRAM = {</span>
<a href="#l53.34"></a><span id="l53.34">    * @throws {String}   error to return to client</span>
<a href="#l53.35"></a><span id="l53.35">    */</span>
<a href="#l53.36"></a><span id="l53.36">   decodeLine(line) {</span>
<a href="#l53.37"></a><span id="l53.37">     dump(&quot;AUTH CRAM-MD5 line -&quot; + line + &quot;-\n&quot;);</span>
<a href="#l53.38"></a><span id="l53.38">     line = atob(line);</span>
<a href="#l53.39"></a><span id="l53.39">     dump(&quot;base64 decoded -&quot; + line + &quot;-\n&quot;);</span>
<a href="#l53.40"></a><span id="l53.40">     var sp = line.split(&quot; &quot;);</span>
<a href="#l53.41"></a><span id="l53.41">     if (sp.length != 2)</span>
<a href="#l53.42"></a><span id="l53.42" class="difflineminus">-      throw &quot;Expected one space&quot;;</span>
<a href="#l53.43"></a><span id="l53.43" class="difflineplus">+      throw new Error(&quot;Expected one space&quot;);</span>
<a href="#l53.44"></a><span id="l53.44">     var result = {};</span>
<a href="#l53.45"></a><span id="l53.45">     result.username = sp[0];</span>
<a href="#l53.46"></a><span id="l53.46">     result.digest = sp[1];</span>
<a href="#l53.47"></a><span id="l53.47">     return result;</span>
<a href="#l53.48"></a><span id="l53.48">   },</span>
<a href="#l53.49"></a><span id="l53.49">   /**</span>
<a href="#l53.50"></a><span id="l53.50">    * @param text {String}   server challenge (base64-encoded)</span>
<a href="#l53.51"></a><span id="l53.51">    * @param key {String}   user's password</span>
<a href="#l53.52"></a><span id="l53.52" class="difflineat">@@ -170,17 +170,17 @@ var AuthCRAM = {</span>
<a href="#l53.53"></a><span id="l53.53">     for (var i = 0; i &lt; text.length; i++)</span>
<a href="#l53.54"></a><span id="l53.54">       array.push(text.charCodeAt(i) &amp; 0xFF); // convert string (only lower byte) to array</span>
<a href="#l53.55"></a><span id="l53.55">     return array;</span>
<a href="#l53.56"></a><span id="l53.56">   },</span>
<a href="#l53.57"></a><span id="l53.57">   arrayToHexString(binary) {</span>
<a href="#l53.58"></a><span id="l53.58">     var result = &quot;&quot;;</span>
<a href="#l53.59"></a><span id="l53.59">     for (var i = 0; i &lt; binary.length; i++) {</span>
<a href="#l53.60"></a><span id="l53.60">       if (binary[i] &gt; 255)</span>
<a href="#l53.61"></a><span id="l53.61" class="difflineminus">-        throw &quot;unexpected that value &gt; 255&quot;;</span>
<a href="#l53.62"></a><span id="l53.62" class="difflineplus">+        throw new Error(&quot;unexpected that value &gt; 255&quot;);</span>
<a href="#l53.63"></a><span id="l53.63">       let hex = binary[i].toString(16);</span>
<a href="#l53.64"></a><span id="l53.64">       if (hex.length &lt; 2)</span>
<a href="#l53.65"></a><span id="l53.65">         hex = &quot;0&quot; + hex;</span>
<a href="#l53.66"></a><span id="l53.66">       result += hex;</span>
<a href="#l53.67"></a><span id="l53.67">     }</span>
<a href="#l53.68"></a><span id="l53.68">     return result;</span>
<a href="#l53.69"></a><span id="l53.69">   },</span>
<a href="#l53.70"></a><span id="l53.70"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/mailnews/test/fakeserver/imapd.js</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/mailnews/test/fakeserver/imapd.js</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -497,16 +497,17 @@ function parseCommand(text, partial) {</span>
<a href="#l54.4"></a><span id="l54.4">     } else if (c == &quot;{&quot;) {</span>
<a href="#l54.5"></a><span id="l54.5">       let end = text.indexOf(&quot;}&quot;);</span>
<a href="#l54.6"></a><span id="l54.6">       if (end == -1)</span>
<a href="#l54.7"></a><span id="l54.7">         throw new Error(&quot;Expected CLOSE_BRACKET&quot;);</span>
<a href="#l54.8"></a><span id="l54.8">       if (end + 1 != text.length)</span>
<a href="#l54.9"></a><span id="l54.9">         throw new Error(&quot;Expected CRLF&quot;);</span>
<a href="#l54.10"></a><span id="l54.10">       let length = parseInt(text.substring(1, end));</span>
<a href="#l54.11"></a><span id="l54.11">       // Usable state</span>
<a href="#l54.12"></a><span id="l54.12" class="difflineplus">+      // eslint-disable-next-line no-throw-literal</span>
<a href="#l54.13"></a><span id="l54.13">       throw { length, current, args, stack, text: &quot;&quot; };</span>
<a href="#l54.14"></a><span id="l54.14">     } else if (c == &quot;(&quot;) {</span>
<a href="#l54.15"></a><span id="l54.15">       stack.push(current);</span>
<a href="#l54.16"></a><span id="l54.16">       current = [];</span>
<a href="#l54.17"></a><span id="l54.17">     } else if (c == &quot;)&quot;) {</span>
<a href="#l54.18"></a><span id="l54.18">       if (atom.length &gt; 0) {</span>
<a href="#l54.19"></a><span id="l54.19">         current.push(atom);</span>
<a href="#l54.20"></a><span id="l54.20">         atom = &quot;&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1" class="difflineminus">--- a/mailnews/test/fakeserver/maild.js</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineplus">+++ b/mailnews/test/fakeserver/maild.js</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineat">@@ -246,17 +246,17 @@ nsMailServer.prototype = {</span>
<a href="#l55.4"></a><span id="l55.4"> </span>
<a href="#l55.5"></a><span id="l55.5">   /**</span>
<a href="#l55.6"></a><span id="l55.6">    * Returns the commands run between the server and client.</span>
<a href="#l55.7"></a><span id="l55.7">    * The return is an object with two variables (us and them), both of which</span>
<a href="#l55.8"></a><span id="l55.8">    * are arrays returning the commands given by each server.</span>
<a href="#l55.9"></a><span id="l55.9">    */</span>
<a href="#l55.10"></a><span id="l55.10">   playTransaction() {</span>
<a href="#l55.11"></a><span id="l55.11">     if (this._readers.some(e =&gt; e.observer.forced))</span>
<a href="#l55.12"></a><span id="l55.12" class="difflineminus">-      throw &quot;Server timed out!&quot;;</span>
<a href="#l55.13"></a><span id="l55.13" class="difflineplus">+      throw new Error(&quot;Server timed out!&quot;);</span>
<a href="#l55.14"></a><span id="l55.14">     if (this._readers.length == 1)</span>
<a href="#l55.15"></a><span id="l55.15">       return this._readers[0].transaction;</span>
<a href="#l55.16"></a><span id="l55.16">     return this._readers.map(e =&gt; e.transaction);</span>
<a href="#l55.17"></a><span id="l55.17">   },</span>
<a href="#l55.18"></a><span id="l55.18"> </span>
<a href="#l55.19"></a><span id="l55.19">   /**</span>
<a href="#l55.20"></a><span id="l55.20">    * Prepares for the next test.</span>
<a href="#l55.21"></a><span id="l55.21">    */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l56.1"></a><span id="l56.1" class="difflineminus">--- a/mailnews/test/resources/filterTestUtils.js</span>
<a href="#l56.2"></a><span id="l56.2" class="difflineplus">+++ b/mailnews/test/resources/filterTestUtils.js</span>
<a href="#l56.3"></a><span id="l56.3" class="difflineat">@@ -49,29 +49,29 @@ function createFilter(list, trigger, val</span>
<a href="#l56.4"></a><span id="l56.4">     if (information[3] != null)</span>
<a href="#l56.5"></a><span id="l56.5">       searchTerm.arbitraryHeader = information[3];</span>
<a href="#l56.6"></a><span id="l56.6">     searchTerm.op = information[1];</span>
<a href="#l56.7"></a><span id="l56.7">     var oldValue = searchTerm.value;</span>
<a href="#l56.8"></a><span id="l56.8">     oldValue.attrib = information[0];</span>
<a href="#l56.9"></a><span id="l56.9">     oldValue[information[2]] = value;</span>
<a href="#l56.10"></a><span id="l56.10">     searchTerm.value = oldValue;</span>
<a href="#l56.11"></a><span id="l56.11">   } else {</span>
<a href="#l56.12"></a><span id="l56.12" class="difflineminus">-    throw &quot;Unknown trigger &quot; + trigger;</span>
<a href="#l56.13"></a><span id="l56.13" class="difflineplus">+    throw new Error(&quot;Unknown trigger &quot; + trigger);</span>
<a href="#l56.14"></a><span id="l56.14">   }</span>
<a href="#l56.15"></a><span id="l56.15">   searchTerm.booleanAnd = true;</span>
<a href="#l56.16"></a><span id="l56.16">   filter.appendTerm(searchTerm);</span>
<a href="#l56.17"></a><span id="l56.17"> </span>
<a href="#l56.18"></a><span id="l56.18">   var filterAction = filter.createAction();</span>
<a href="#l56.19"></a><span id="l56.19">   if (action in ACTION_MAP) {</span>
<a href="#l56.20"></a><span id="l56.20">     let information = ACTION_MAP[action];</span>
<a href="#l56.21"></a><span id="l56.21">     filterAction.type = information[0];</span>
<a href="#l56.22"></a><span id="l56.22">     if (1 in information)</span>
<a href="#l56.23"></a><span id="l56.23">       filterAction[information[1]] = information[2];</span>
<a href="#l56.24"></a><span id="l56.24">   } else {</span>
<a href="#l56.25"></a><span id="l56.25" class="difflineminus">-    throw &quot;Unknown action &quot; + action;</span>
<a href="#l56.26"></a><span id="l56.26" class="difflineplus">+    throw new Error(&quot;Unknown action &quot; + action);</span>
<a href="#l56.27"></a><span id="l56.27">   }</span>
<a href="#l56.28"></a><span id="l56.28">   filter.appendAction(filterAction);</span>
<a href="#l56.29"></a><span id="l56.29"> </span>
<a href="#l56.30"></a><span id="l56.30">   filter.enabled = true;</span>
<a href="#l56.31"></a><span id="l56.31"> </span>
<a href="#l56.32"></a><span id="l56.32">   // Add to the end</span>
<a href="#l56.33"></a><span id="l56.33">   list.insertFilterAt(list.filterCount, filter);</span>
<a href="#l56.34"></a><span id="l56.34"> }</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:32Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

