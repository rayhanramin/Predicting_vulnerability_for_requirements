<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 20255:05eb42a6759048f503bb4016705a2fce5deb6f15</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 05eb42a6759048f503bb4016705a2fce5deb6f15" />
<meta property="og:url" content="/comm-central/rev/05eb42a6759048f503bb4016705a2fce5deb6f15" />
<meta property="og:description" content="Bug 599969 - Do not use steps for async visit adding" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 05eb42a6759048f503bb4016705a2fce5deb6f15 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/05eb42a6759048f503bb4016705a2fce5deb6f15">shortlog</a> |
<a href="/comm-central/log/05eb42a6759048f503bb4016705a2fce5deb6f15">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/05eb42a6759048f503bb4016705a2fce5deb6f15">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/05eb42a6759048f503bb4016705a2fce5deb6f15">files</a> |
changeset |
<a href="/comm-central/raw-rev/05eb42a6759048f503bb4016705a2fce5deb6f15">raw</a>  | <a href="/comm-central/archive/05eb42a6759048f503bb4016705a2fce5deb6f15.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=599969">Bug 599969</a> - Do not use steps for async visit adding
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#83;&#104;&#97;&#119;&#110;&#32;&#87;&#105;&#108;&#115;&#104;&#101;&#114;&#32;&#60;&#109;&#101;&#64;&#115;&#104;&#97;&#119;&#110;&#119;&#105;&#108;&#115;&#104;&#101;&#114;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 09 Nov 2010 11:43:18 -0800</td></tr>

<tr>
 <td>changeset 20255</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/05eb42a6759048f503bb4016705a2fce5deb6f15">05eb42a6759048f503bb4016705a2fce5deb6f15</a></td>
</tr>



<tr>
<td>parent 20254</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/76a2c5410cc8f30efda80eca76eac031f47df402">76a2c5410cc8f30efda80eca76eac031f47df402</a>
</td>
</tr>

<tr>
<td>child 20256</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/fe94d062ab03d5dff422b2e329de730116ba3c21">fe94d062ab03d5dff422b2e329de730116ba3c21</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=05eb42a6759048f503bb4016705a2fce5deb6f15">12352</a></td></tr>
<tr><td>push user</td><td>philip.chee@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Tue, 27 Sep 2016 08:56:11 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@9bd937fc0c12 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=9bd937fc0c12bc6b04247f0da5e1f140bd1441de">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=9bd937fc0c12bc6b04247f0da5e1f140bd1441de&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=9bd937fc0c12bc6b04247f0da5e1f140bd1441de&newProject=comm-central&newRevision=66094254572ec015e4e170847fdebd67a6cf6198&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=9bd937fc0c12bc6b04247f0da5e1f140bd1441de&newProject=comm-central&newRevision=66094254572ec015e4e170847fdebd67a6cf6198&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=9bd937fc0c12bc6b04247f0da5e1f140bd1441de&newProject=comm-central&newRevision=66094254572ec015e4e170847fdebd67a6cf6198&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>

<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=599969">599969</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=599969">Bug 599969</a> - Do not use steps for async visit adding
Part 6 - Do not add javascript URIs for history (trunk is already doing this,
and the Places branch was getting assertions because GetReversedHostname would
fail on the background thread which would cause nsJSURI to be released off of
the main thread, which is bad).
r=mak
r=ehsan</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/05eb42a6759048f503bb4016705a2fce5deb6f15/suite/common/places/tests/autocomplete/test_417798.js">suite/common/places/tests/autocomplete/test_417798.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/05eb42a6759048f503bb4016705a2fce5deb6f15/suite/common/places/tests/autocomplete/test_417798.js">file</a> |
<a href="/comm-central/annotate/05eb42a6759048f503bb4016705a2fce5deb6f15/suite/common/places/tests/autocomplete/test_417798.js">annotate</a> |
<a href="/comm-central/diff/05eb42a6759048f503bb4016705a2fce5deb6f15/suite/common/places/tests/autocomplete/test_417798.js">diff</a> |
<a href="/comm-central/comparison/05eb42a6759048f503bb4016705a2fce5deb6f15/suite/common/places/tests/autocomplete/test_417798.js">comparison</a> |
<a href="/comm-central/log/05eb42a6759048f503bb4016705a2fce5deb6f15/suite/common/places/tests/autocomplete/test_417798.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/suite/common/places/tests/autocomplete/test_417798.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/suite/common/places/tests/autocomplete/test_417798.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -44,17 +44,18 @@ let kURIs = [</span>
<a href="#l1.4"></a><span id="l1.4">   &quot;http://abc/def&quot;,</span>
<a href="#l1.5"></a><span id="l1.5">   &quot;javascript:5&quot;,</span>
<a href="#l1.6"></a><span id="l1.6"> ];</span>
<a href="#l1.7"></a><span id="l1.7"> let kTitles = [</span>
<a href="#l1.8"></a><span id="l1.8">   &quot;Title with javascript:&quot;,</span>
<a href="#l1.9"></a><span id="l1.9"> ];</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11"> addPageBook(0, 0); // regular url</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-addPageBook(1, 0); // javascript: uri</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+// javascript: uri as bookmark (no visit)</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+addPageBook(1, 0, 0, undefined, undefined, undefined, true);</span>
<a href="#l1.15"></a><span id="l1.15"> </span>
<a href="#l1.16"></a><span id="l1.16"> // Provide for each test: description; search terms; array of gPages indices of</span>
<a href="#l1.17"></a><span id="l1.17"> // pages that should match; optional function to be run before the test</span>
<a href="#l1.18"></a><span id="l1.18"> let gTests = [</span>
<a href="#l1.19"></a><span id="l1.19">   [&quot;0: Match non-javascript: with plain search&quot;,</span>
<a href="#l1.20"></a><span id="l1.20">    &quot;a&quot;, [0]],</span>
<a href="#l1.21"></a><span id="l1.21">   [&quot;1: Match non-javascript: with almost javascript:&quot;,</span>
<a href="#l1.22"></a><span id="l1.22">    &quot;javascript&quot;, [0]],</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

