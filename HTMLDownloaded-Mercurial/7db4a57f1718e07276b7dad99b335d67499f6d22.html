<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 29847:7db4a57f1718e07276b7dad99b335d67499f6d22</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 7db4a57f1718e07276b7dad99b335d67499f6d22" />
<meta property="og:url" content="/comm-central/rev/7db4a57f1718e07276b7dad99b335d67499f6d22" />
<meta property="og:description" content="Bug 1638822 - convert openpgp strings to Fluent - jsm files continue. r=mkmelin" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 7db4a57f1718e07276b7dad99b335d67499f6d22 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/7db4a57f1718e07276b7dad99b335d67499f6d22">shortlog</a> |
<a href="/comm-central/log/7db4a57f1718e07276b7dad99b335d67499f6d22">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/7db4a57f1718e07276b7dad99b335d67499f6d22">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/7db4a57f1718e07276b7dad99b335d67499f6d22">files</a> |
changeset |
<a href="/comm-central/raw-rev/7db4a57f1718e07276b7dad99b335d67499f6d22">raw</a>  | <a href="/comm-central/archive/7db4a57f1718e07276b7dad99b335d67499f6d22.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1638822">Bug 1638822</a> - convert openpgp strings to Fluent - jsm files continue. r=mkmelin
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#75;&#104;&#117;&#115;&#104;&#105;&#108;&#32;&#77;&#105;&#115;&#116;&#114;&#121;&#32;&#60;&#107;&#104;&#117;&#115;&#104;&#105;&#108;&#51;&#50;&#52;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 11 Jun 2020 16:51:53 +0300</td></tr>

<tr>
 <td>changeset 29847</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/7db4a57f1718e07276b7dad99b335d67499f6d22">7db4a57f1718e07276b7dad99b335d67499f6d22</a></td>
</tr>



<tr>
<td>parent 29846</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/1cab4ddc29b6ced2871a5bae5dbfd0ff77f4a6a4">1cab4ddc29b6ced2871a5bae5dbfd0ff77f4a6a4</a>
</td>
</tr>

<tr>
<td>child 29848</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/a7fc22b2ce491be0f6052d1f0d5469e16641ad18">a7fc22b2ce491be0f6052d1f0d5469e16641ad18</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=7db4a57f1718e07276b7dad99b335d67499f6d22">17561</a></td></tr>
<tr><td>push user</td><td>mkmelin@iki.fi</td></tr>
<tr><td>push date</td><td class="date age">Thu, 11 Jun 2020 13:52:24 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@7db4a57f1718 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=7db4a57f1718e07276b7dad99b335d67499f6d22">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=7db4a57f1718e07276b7dad99b335d67499f6d22&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=7db4a57f1718e07276b7dad99b335d67499f6d22&newProject=comm-central&newRevision=637bcc4f812555829db44aad5ac8b574387c711f&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=7db4a57f1718e07276b7dad99b335d67499f6d22&newProject=comm-central&newRevision=637bcc4f812555829db44aad5ac8b574387c711f&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=7db4a57f1718e07276b7dad99b335d67499f6d22&newProject=comm-central&newRevision=637bcc4f812555829db44aad5ac8b574387c711f&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28mkmelin%29&revcount=50">mkmelin</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1638822">1638822</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1638822">Bug 1638822</a> - convert openpgp strings to Fluent - jsm files continue. r=mkmelin</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm">mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm">file</a> |
<a href="/comm-central/annotate/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm">annotate</a> |
<a href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm">diff</a> |
<a href="/comm-central/comparison/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm">comparison</a> |
<a href="/comm-central/log/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/decryption.jsm">mail/extensions/openpgp/content/modules/decryption.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/decryption.jsm">file</a> |
<a href="/comm-central/annotate/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/decryption.jsm">annotate</a> |
<a href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/decryption.jsm">diff</a> |
<a href="/comm-central/comparison/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/decryption.jsm">comparison</a> |
<a href="/comm-central/log/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/decryption.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/filters.jsm">mail/extensions/openpgp/content/modules/filters.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/filters.jsm">file</a> |
<a href="/comm-central/annotate/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/filters.jsm">annotate</a> |
<a href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/filters.jsm">diff</a> |
<a href="/comm-central/comparison/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/filters.jsm">comparison</a> |
<a href="/comm-central/log/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/filters.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/filtersWrapper.jsm">mail/extensions/openpgp/content/modules/filtersWrapper.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/filtersWrapper.jsm">file</a> |
<a href="/comm-central/annotate/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/filtersWrapper.jsm">annotate</a> |
<a href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/filtersWrapper.jsm">diff</a> |
<a href="/comm-central/comparison/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/filtersWrapper.jsm">comparison</a> |
<a href="/comm-central/log/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/filtersWrapper.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/key.jsm">mail/extensions/openpgp/content/modules/key.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/key.jsm">file</a> |
<a href="/comm-central/annotate/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/key.jsm">annotate</a> |
<a href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/key.jsm">diff</a> |
<a href="/comm-central/comparison/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/key.jsm">comparison</a> |
<a href="/comm-central/log/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/key.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/keyObj.jsm">mail/extensions/openpgp/content/modules/keyObj.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/keyObj.jsm">file</a> |
<a href="/comm-central/annotate/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/keyObj.jsm">annotate</a> |
<a href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/keyObj.jsm">diff</a> |
<a href="/comm-central/comparison/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/keyObj.jsm">comparison</a> |
<a href="/comm-central/log/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/keyObj.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/keyRing.jsm">mail/extensions/openpgp/content/modules/keyRing.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/keyRing.jsm">file</a> |
<a href="/comm-central/annotate/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/keyRing.jsm">annotate</a> |
<a href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/keyRing.jsm">diff</a> |
<a href="/comm-central/comparison/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/keyRing.jsm">comparison</a> |
<a href="/comm-central/log/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/modules/keyRing.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/strings/enigmail.ftl">mail/extensions/openpgp/content/strings/enigmail.ftl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/strings/enigmail.ftl">file</a> |
<a href="/comm-central/annotate/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/strings/enigmail.ftl">annotate</a> |
<a href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/strings/enigmail.ftl">diff</a> |
<a href="/comm-central/comparison/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/strings/enigmail.ftl">comparison</a> |
<a href="/comm-central/log/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/strings/enigmail.ftl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/strings/enigmail.properties">mail/extensions/openpgp/content/strings/enigmail.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/strings/enigmail.properties">file</a> |
<a href="/comm-central/annotate/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/strings/enigmail.properties">annotate</a> |
<a href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/strings/enigmail.properties">diff</a> |
<a href="/comm-central/comparison/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/strings/enigmail.properties">comparison</a> |
<a href="/comm-central/log/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/strings/enigmail.properties">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/ui/enigmailKeyImportInfo.js">mail/extensions/openpgp/content/ui/enigmailKeyImportInfo.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/ui/enigmailKeyImportInfo.js">file</a> |
<a href="/comm-central/annotate/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/ui/enigmailKeyImportInfo.js">annotate</a> |
<a href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/ui/enigmailKeyImportInfo.js">diff</a> |
<a href="/comm-central/comparison/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/ui/enigmailKeyImportInfo.js">comparison</a> |
<a href="/comm-central/log/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/ui/enigmailKeyImportInfo.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">mail/extensions/openpgp/content/ui/enigmailKeyManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">file</a> |
<a href="/comm-central/annotate/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">annotate</a> |
<a href="/comm-central/diff/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">diff</a> |
<a href="/comm-central/comparison/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">comparison</a> |
<a href="/comm-central/log/7db4a57f1718e07276b7dad99b335d67499f6d22/mail/extensions/openpgp/content/ui/enigmailKeyManager.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/cryptoAPI/gnupg-keylist.jsm</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -28,16 +28,18 @@ const { EnigmailTrust } = ChromeUtils.im</span>
<a href="#l1.4"></a><span id="l1.4"> );</span>
<a href="#l1.5"></a><span id="l1.5"> const { EnigmailData } = ChromeUtils.import(</span>
<a href="#l1.6"></a><span id="l1.6">   &quot;chrome://openpgp/content/modules/data.jsm&quot;</span>
<a href="#l1.7"></a><span id="l1.7"> );</span>
<a href="#l1.8"></a><span id="l1.8"> const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l1.9"></a><span id="l1.9">   &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l1.10"></a><span id="l1.10"> );</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+var l10n = new Localization([&quot;messenger/openpgp/enigmail.ftl&quot;], true);</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+</span>
<a href="#l1.14"></a><span id="l1.14"> // field ID's of key list (as described in the doc/DETAILS file in the GnuPG distribution)</span>
<a href="#l1.15"></a><span id="l1.15"> const ENTRY_ID = 0;</span>
<a href="#l1.16"></a><span id="l1.16"> const KEY_TRUST_ID = 1;</span>
<a href="#l1.17"></a><span id="l1.17"> const KEY_SIZE_ID = 2;</span>
<a href="#l1.18"></a><span id="l1.18"> const KEY_ALGO_ID = 3;</span>
<a href="#l1.19"></a><span id="l1.19"> const KEY_ID = 4;</span>
<a href="#l1.20"></a><span id="l1.20"> const CREATED_ID = 5;</span>
<a href="#l1.21"></a><span id="l1.21"> const EXPIRY_ID = 6;</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineat">@@ -293,17 +295,17 @@ function extractSignatures(gpgKeyList, i</span>
<a href="#l1.23"></a><span id="l1.23">         }</span>
<a href="#l1.24"></a><span id="l1.24">         break;</span>
<a href="#l1.25"></a><span id="l1.25">       case &quot;uid&quot;:</span>
<a href="#l1.26"></a><span id="l1.26">       case &quot;uat&quot;:</span>
<a href="#l1.27"></a><span id="l1.27">         currUid = lineTokens[UID_ID];</span>
<a href="#l1.28"></a><span id="l1.28">         listObj[currUid] = {</span>
<a href="#l1.29"></a><span id="l1.29">           userId:</span>
<a href="#l1.30"></a><span id="l1.30">             lineTokens[ENTRY_ID] == &quot;uat&quot;</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-              ? EnigmailLocale.getString(&quot;keyring.photo&quot;)</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+              ? l10n.formatValueSync(&quot;keyring-photo&quot;)</span>
<a href="#l1.33"></a><span id="l1.33">               : EnigmailData.convertGpgToUnicode(lineTokens[USERID_ID]),</span>
<a href="#l1.34"></a><span id="l1.34">           rawUserId: lineTokens[USERID_ID],</span>
<a href="#l1.35"></a><span id="l1.35">           keyId,</span>
<a href="#l1.36"></a><span id="l1.36">           fpr,</span>
<a href="#l1.37"></a><span id="l1.37">           created: EnigmailTime.getDateTime(</span>
<a href="#l1.38"></a><span id="l1.38">             lineTokens[CREATED_ID],</span>
<a href="#l1.39"></a><span id="l1.39">             true,</span>
<a href="#l1.40"></a><span id="l1.40">             false</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/decryption.jsm</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/decryption.jsm</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -47,16 +47,17 @@ const { EnigmailConstants } = ChromeUtil</span>
<a href="#l2.4"></a><span id="l2.4">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l2.5"></a><span id="l2.5"> );</span>
<a href="#l2.6"></a><span id="l2.6"> const { EnigmailFuncs } = ChromeUtils.import(</span>
<a href="#l2.7"></a><span id="l2.7">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l2.8"></a><span id="l2.8"> );</span>
<a href="#l2.9"></a><span id="l2.9"> const { EnigmailCryptoAPI } = ChromeUtils.import(</span>
<a href="#l2.10"></a><span id="l2.10">   &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l2.11"></a><span id="l2.11"> );</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+var l10n = new Localization([&quot;messenger/openpgp/enigmail.ftl&quot;], true);</span>
<a href="#l2.13"></a><span id="l2.13"> </span>
<a href="#l2.14"></a><span id="l2.14"> function statusObjectFrom(</span>
<a href="#l2.15"></a><span id="l2.15">   signatureObj,</span>
<a href="#l2.16"></a><span id="l2.16">   exitCodeObj,</span>
<a href="#l2.17"></a><span id="l2.17">   statusFlagsObj,</span>
<a href="#l2.18"></a><span id="l2.18">   keyIdObj,</span>
<a href="#l2.19"></a><span id="l2.19">   userIdObj,</span>
<a href="#l2.20"></a><span id="l2.20">   sigDetailsObj,</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineat">@@ -550,17 +551,17 @@ var EnigmailDecryption = {</span>
<a href="#l2.22"></a><span id="l2.22">     let attachmentHead = byteData.substr(0, 200);</span>
<a href="#l2.23"></a><span id="l2.23">     if (attachmentHead.match(/-----BEGIN PGP \w{5,10} KEY BLOCK-----/)) {</span>
<a href="#l2.24"></a><span id="l2.24">       // attachment appears to be a PGP key file</span>
<a href="#l2.25"></a><span id="l2.25"> </span>
<a href="#l2.26"></a><span id="l2.26">       if (</span>
<a href="#l2.27"></a><span id="l2.27">         EnigmailDialog.confirmDlg(</span>
<a href="#l2.28"></a><span id="l2.28">           parent,</span>
<a href="#l2.29"></a><span id="l2.29">           EnigmailLocale.getString(&quot;attachmentPgpKey&quot;, [displayName]),</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineminus">-          EnigmailLocale.getString(&quot;keyMan.button.import&quot;),</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineplus">+          l10n.formatValueSync(&quot;key-man-button-import&quot;),</span>
<a href="#l2.32"></a><span id="l2.32">           EnigmailLocale.getString(&quot;dlg.button.view&quot;)</span>
<a href="#l2.33"></a><span id="l2.33">         )</span>
<a href="#l2.34"></a><span id="l2.34">       ) {</span>
<a href="#l2.35"></a><span id="l2.35">         let preview = EnigmailKey.getKeyListFromKeyBlock(</span>
<a href="#l2.36"></a><span id="l2.36">           byteData,</span>
<a href="#l2.37"></a><span id="l2.37">           errorMsgObj,</span>
<a href="#l2.38"></a><span id="l2.38">           true,</span>
<a href="#l2.39"></a><span id="l2.39">           true,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/filters.jsm</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/filters.jsm</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -6,19 +6,16 @@</span>
<a href="#l3.4"></a><span id="l3.4"> </span>
<a href="#l3.5"></a><span id="l3.5"> &quot;use strict&quot;;</span>
<a href="#l3.6"></a><span id="l3.6"> </span>
<a href="#l3.7"></a><span id="l3.7"> var EXPORTED_SYMBOLS = [&quot;EnigmailFilters&quot;];</span>
<a href="#l3.8"></a><span id="l3.8"> </span>
<a href="#l3.9"></a><span id="l3.9"> const { EnigmailLazy } = ChromeUtils.import(</span>
<a href="#l3.10"></a><span id="l3.10">   &quot;chrome://openpgp/content/modules/lazy.jsm&quot;</span>
<a href="#l3.11"></a><span id="l3.11"> );</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-  &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineminus">-);</span>
<a href="#l3.15"></a><span id="l3.15"> const { EnigmailCore } = ChromeUtils.import(</span>
<a href="#l3.16"></a><span id="l3.16">   &quot;chrome://openpgp/content/modules/core.jsm&quot;</span>
<a href="#l3.17"></a><span id="l3.17"> );</span>
<a href="#l3.18"></a><span id="l3.18"> const { EnigmailPersistentCrypto } = ChromeUtils.import(</span>
<a href="#l3.19"></a><span id="l3.19">   &quot;chrome://openpgp/content/modules/persistentCrypto.jsm&quot;</span>
<a href="#l3.20"></a><span id="l3.20"> );</span>
<a href="#l3.21"></a><span id="l3.21"> const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l3.22"></a><span id="l3.22">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineat">@@ -49,16 +46,18 @@ const { EnigmailCompat } = ChromeUtils.i</span>
<a href="#l3.24"></a><span id="l3.24"> const { MailServices } = ChromeUtils.import(</span>
<a href="#l3.25"></a><span id="l3.25">   &quot;resource:///modules/MailServices.jsm&quot;</span>
<a href="#l3.26"></a><span id="l3.26"> );</span>
<a href="#l3.27"></a><span id="l3.27"> </span>
<a href="#l3.28"></a><span id="l3.28"> const getDialog = EnigmailLazy.loader(&quot;enigmail/dialog.jsm&quot;, &quot;EnigmailDialog&quot;);</span>
<a href="#l3.29"></a><span id="l3.29"> </span>
<a href="#l3.30"></a><span id="l3.30"> var gNewMailListenerInitiated = false;</span>
<a href="#l3.31"></a><span id="l3.31"> </span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+var l10n = new Localization([&quot;messenger/openpgp/enigmail.ftl&quot;], true);</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+</span>
<a href="#l3.34"></a><span id="l3.34"> /**</span>
<a href="#l3.35"></a><span id="l3.35">  * filter action for creating a decrypted version of the mail and</span>
<a href="#l3.36"></a><span id="l3.36">  * deleting the original mail at the same time</span>
<a href="#l3.37"></a><span id="l3.37">  */</span>
<a href="#l3.38"></a><span id="l3.38"> </span>
<a href="#l3.39"></a><span id="l3.39"> const filterActionMoveDecrypt = {</span>
<a href="#l3.40"></a><span id="l3.40">   apply(aMsgHdrs, aActionValue, aListener, aType, aMsgWindow) {</span>
<a href="#l3.41"></a><span id="l3.41">     EnigmailLog.DEBUG(</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineat">@@ -79,23 +78,22 @@ const filterActionMoveDecrypt = {</span>
<a href="#l3.43"></a><span id="l3.43">     );</span>
<a href="#l3.44"></a><span id="l3.44">   },</span>
<a href="#l3.45"></a><span id="l3.45"> </span>
<a href="#l3.46"></a><span id="l3.46">   isValidForType(type, scope) {</span>
<a href="#l3.47"></a><span id="l3.47">     return true;</span>
<a href="#l3.48"></a><span id="l3.48">   },</span>
<a href="#l3.49"></a><span id="l3.49"> </span>
<a href="#l3.50"></a><span id="l3.50">   validateActionValue(value, folder, type) {</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineminus">-    getDialog().alert(</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineminus">-      null,</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineminus">-      EnigmailLocale.getString(&quot;filter.decryptMove.warnExperimental&quot;)</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineminus">-    );</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineplus">+    l10n.formatValue(&quot;filter-decrypt-move-warn-experimental&quot;).then(value =&gt; {</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineplus">+      getDialog().alert(null, value);</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineplus">+    });</span>
<a href="#l3.58"></a><span id="l3.58"> </span>
<a href="#l3.59"></a><span id="l3.59">     if (value === &quot;&quot;) {</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineminus">-      return EnigmailLocale.getString(&quot;filter.folderRequired&quot;);</span>
<a href="#l3.61"></a><span id="l3.61" class="difflineplus">+      return l10n.formatValueSync(&quot;filter-folder-required&quot;);</span>
<a href="#l3.62"></a><span id="l3.62">     }</span>
<a href="#l3.63"></a><span id="l3.63"> </span>
<a href="#l3.64"></a><span id="l3.64">     return null;</span>
<a href="#l3.65"></a><span id="l3.65">   },</span>
<a href="#l3.66"></a><span id="l3.66"> };</span>
<a href="#l3.67"></a><span id="l3.67"> </span>
<a href="#l3.68"></a><span id="l3.68"> /**</span>
<a href="#l3.69"></a><span id="l3.69">  * filter action for creating a decrypted copy of the mail, leaving the original</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineat">@@ -133,17 +131,17 @@ const filterActionCopyDecrypt = {</span>
<a href="#l3.71"></a><span id="l3.71">   validateActionValue(value, folder, type) {</span>
<a href="#l3.72"></a><span id="l3.72">     EnigmailLog.DEBUG(</span>
<a href="#l3.73"></a><span id="l3.73">       &quot;filters.jsm: filterActionCopyDecrypt.validateActionValue(&quot; +</span>
<a href="#l3.74"></a><span id="l3.74">         value +</span>
<a href="#l3.75"></a><span id="l3.75">         &quot;)\n&quot;</span>
<a href="#l3.76"></a><span id="l3.76">     );</span>
<a href="#l3.77"></a><span id="l3.77"> </span>
<a href="#l3.78"></a><span id="l3.78">     if (value === &quot;&quot;) {</span>
<a href="#l3.79"></a><span id="l3.79" class="difflineminus">-      return EnigmailLocale.getString(&quot;filter.folderRequired&quot;);</span>
<a href="#l3.80"></a><span id="l3.80" class="difflineplus">+      return l10n.formatValueSync(&quot;filter-folder-required&quot;);</span>
<a href="#l3.81"></a><span id="l3.81">     }</span>
<a href="#l3.82"></a><span id="l3.82"> </span>
<a href="#l3.83"></a><span id="l3.83">     return null;</span>
<a href="#l3.84"></a><span id="l3.84">   },</span>
<a href="#l3.85"></a><span id="l3.85"> };</span>
<a href="#l3.86"></a><span id="l3.86"> </span>
<a href="#l3.87"></a><span id="l3.87"> /**</span>
<a href="#l3.88"></a><span id="l3.88">  * filter action for to encrypt a mail to a specific key</span>
<a href="#l3.89"></a><span id="l3.89" class="difflineat">@@ -222,44 +220,49 @@ const filterActionEncrypt = {</span>
<a href="#l3.90"></a><span id="l3.90">     // we need it.</span>
<a href="#l3.91"></a><span id="l3.91">     EnigmailCore.getService();</span>
<a href="#l3.92"></a><span id="l3.92">     EnigmailKeyRing.getAllKeys();</span>
<a href="#l3.93"></a><span id="l3.93"> </span>
<a href="#l3.94"></a><span id="l3.94">     EnigmailLog.DEBUG(</span>
<a href="#l3.95"></a><span id="l3.95">       &quot;filters.jsm: validateActionValue: Encrypt to: &quot; + value + &quot;\n&quot;</span>
<a href="#l3.96"></a><span id="l3.96">     );</span>
<a href="#l3.97"></a><span id="l3.97">     if (value === &quot;&quot;) {</span>
<a href="#l3.98"></a><span id="l3.98" class="difflineminus">-      return EnigmailLocale.getString(&quot;filter.keyRequired&quot;);</span>
<a href="#l3.99"></a><span id="l3.99" class="difflineplus">+      return l10n.formatValueSync(&quot;filter-key-required&quot;);</span>
<a href="#l3.100"></a><span id="l3.100">     }</span>
<a href="#l3.101"></a><span id="l3.101"> </span>
<a href="#l3.102"></a><span id="l3.102">     let keyObj = EnigmailKeyRing.getKeyById(value);</span>
<a href="#l3.103"></a><span id="l3.103"> </span>
<a href="#l3.104"></a><span id="l3.104">     if (keyObj === null) {</span>
<a href="#l3.105"></a><span id="l3.105">       EnigmailLog.DEBUG(</span>
<a href="#l3.106"></a><span id="l3.106">         &quot;filters.jsm: failed to find key by id. Looking for uid.\n&quot;</span>
<a href="#l3.107"></a><span id="l3.107">       );</span>
<a href="#l3.108"></a><span id="l3.108">       let keyId = EnigmailKeyRing.getValidKeyForRecipient(value);</span>
<a href="#l3.109"></a><span id="l3.109">       if (keyId) {</span>
<a href="#l3.110"></a><span id="l3.110">         keyObj = EnigmailKeyRing.getKeyById(keyId);</span>
<a href="#l3.111"></a><span id="l3.111">       }</span>
<a href="#l3.112"></a><span id="l3.112">     }</span>
<a href="#l3.113"></a><span id="l3.113"> </span>
<a href="#l3.114"></a><span id="l3.114">     if (keyObj === null) {</span>
<a href="#l3.115"></a><span id="l3.115" class="difflineminus">-      return EnigmailLocale.getString(&quot;filter.keyNotFound&quot;, [value]);</span>
<a href="#l3.116"></a><span id="l3.116" class="difflineplus">+      return l10n.formatValueSync(&quot;filter-key-not-found&quot;, {</span>
<a href="#l3.117"></a><span id="l3.117" class="difflineplus">+        desc: value,</span>
<a href="#l3.118"></a><span id="l3.118" class="difflineplus">+      });</span>
<a href="#l3.119"></a><span id="l3.119">     }</span>
<a href="#l3.120"></a><span id="l3.120"> </span>
<a href="#l3.121"></a><span id="l3.121">     if (!keyObj.secretAvailable) {</span>
<a href="#l3.122"></a><span id="l3.122">       // We warn but we allow it. There might be use cases where</span>
<a href="#l3.123"></a><span id="l3.123">       // thunderbird + enigmail is used as a gateway filter with</span>
<a href="#l3.124"></a><span id="l3.124">       // the secret not available on one machine and the decryption</span>
<a href="#l3.125"></a><span id="l3.125">       // is intended to happen on different systems.</span>
<a href="#l3.126"></a><span id="l3.126" class="difflineminus">-      getDialog().alert(</span>
<a href="#l3.127"></a><span id="l3.127" class="difflineminus">-        null,</span>
<a href="#l3.128"></a><span id="l3.128" class="difflineminus">-        EnigmailLocale.getString(&quot;filter.warn.keyNotSecret&quot;, [value])</span>
<a href="#l3.129"></a><span id="l3.129" class="difflineminus">-      );</span>
<a href="#l3.130"></a><span id="l3.130" class="difflineplus">+      l10n</span>
<a href="#l3.131"></a><span id="l3.131" class="difflineplus">+        .formatValue(&quot;filter-warn-key-not-secret&quot;, {</span>
<a href="#l3.132"></a><span id="l3.132" class="difflineplus">+          desc: value,</span>
<a href="#l3.133"></a><span id="l3.133" class="difflineplus">+        })</span>
<a href="#l3.134"></a><span id="l3.134" class="difflineplus">+        .then(value =&gt; {</span>
<a href="#l3.135"></a><span id="l3.135" class="difflineplus">+          getDialog().alert(null, value);</span>
<a href="#l3.136"></a><span id="l3.136" class="difflineplus">+        });</span>
<a href="#l3.137"></a><span id="l3.137">     }</span>
<a href="#l3.138"></a><span id="l3.138"> </span>
<a href="#l3.139"></a><span id="l3.139">     return null;</span>
<a href="#l3.140"></a><span id="l3.140">   },</span>
<a href="#l3.141"></a><span id="l3.141"> };</span>
<a href="#l3.142"></a><span id="l3.142"> </span>
<a href="#l3.143"></a><span id="l3.143"> function isPGPEncrypted(data) {</span>
<a href="#l3.144"></a><span id="l3.144">   // We only check the first mime subpart for application/pgp-encrypted.</span>
<a href="#l3.145"></a><span id="l3.145" class="difflineat">@@ -295,17 +298,17 @@ function isPGPEncrypted(data) {</span>
<a href="#l3.146"></a><span id="l3.146">   return false;</span>
<a href="#l3.147"></a><span id="l3.147"> }</span>
<a href="#l3.148"></a><span id="l3.148"> </span>
<a href="#l3.149"></a><span id="l3.149"> /**</span>
<a href="#l3.150"></a><span id="l3.150">  * filter term for OpenPGP Encrypted mail</span>
<a href="#l3.151"></a><span id="l3.151">  */</span>
<a href="#l3.152"></a><span id="l3.152"> const filterTermPGPEncrypted = {</span>
<a href="#l3.153"></a><span id="l3.153">   id: EnigmailConstants.FILTER_TERM_PGP_ENCRYPTED,</span>
<a href="#l3.154"></a><span id="l3.154" class="difflineminus">-  name: EnigmailLocale.getString(&quot;filter.term.pgpencrypted.label&quot;),</span>
<a href="#l3.155"></a><span id="l3.155" class="difflineplus">+  name: l10n.formatValueSync(&quot;filter-term-pgpencrypted-label&quot;),</span>
<a href="#l3.156"></a><span id="l3.156">   needsBody: true,</span>
<a href="#l3.157"></a><span id="l3.157">   match(aMsgHdr, searchValue, searchOp) {</span>
<a href="#l3.158"></a><span id="l3.158">     var folder = aMsgHdr.folder;</span>
<a href="#l3.159"></a><span id="l3.159">     var stream = folder.getMsgInputStream(aMsgHdr, {});</span>
<a href="#l3.160"></a><span id="l3.160"> </span>
<a href="#l3.161"></a><span id="l3.161">     var messageSize = folder.hasMsgOffline(aMsgHdr.messageKey)</span>
<a href="#l3.162"></a><span id="l3.162">       ? aMsgHdr.offlineMessageSize</span>
<a href="#l3.163"></a><span id="l3.163">       : aMsgHdr.messageSize;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/filtersWrapper.jsm</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/filtersWrapper.jsm</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -8,28 +8,27 @@</span>
<a href="#l4.4"></a><span id="l4.4"> </span>
<a href="#l4.5"></a><span id="l4.5"> var EXPORTED_SYMBOLS = [&quot;EnigmailFiltersWrapper&quot;];</span>
<a href="#l4.6"></a><span id="l4.6"> </span>
<a href="#l4.7"></a><span id="l4.7"> var gEnigmailFilters = null;</span>
<a href="#l4.8"></a><span id="l4.8"> </span>
<a href="#l4.9"></a><span id="l4.9"> let { EnigmailConstants } = ChromeUtils.import(</span>
<a href="#l4.10"></a><span id="l4.10">   &quot;chrome://openpgp/content/modules/constants.jsm&quot;</span>
<a href="#l4.11"></a><span id="l4.11"> );</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-let { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-  &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-);</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+var l10n = new Localization([&quot;messenger/openpgp/enigmail.ftl&quot;], true);</span>
<a href="#l4.17"></a><span id="l4.17"> </span>
<a href="#l4.18"></a><span id="l4.18"> /**</span>
<a href="#l4.19"></a><span id="l4.19">  * filter action for creating a decrypted version of the mail and</span>
<a href="#l4.20"></a><span id="l4.20">  * deleting the original mail at the same time</span>
<a href="#l4.21"></a><span id="l4.21">  */</span>
<a href="#l4.22"></a><span id="l4.22"> </span>
<a href="#l4.23"></a><span id="l4.23"> const filterActionMoveDecrypt = {</span>
<a href="#l4.24"></a><span id="l4.24">   id: EnigmailConstants.FILTER_MOVE_DECRYPT,</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineminus">-  name: EnigmailLocale.getString(&quot;filter.decryptMove2.label&quot;),</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineplus">+  name: l10n.formatValueSync(&quot;filter-decrypt-move-label&quot;),</span>
<a href="#l4.27"></a><span id="l4.27">   value: &quot;movemessage&quot;,</span>
<a href="#l4.28"></a><span id="l4.28">   apply(aMsgHdrs, aActionValue, aListener, aType, aMsgWindow) {</span>
<a href="#l4.29"></a><span id="l4.29">     if (gEnigmailFilters) {</span>
<a href="#l4.30"></a><span id="l4.30">       gEnigmailFilters.moveDecrypt.apply(</span>
<a href="#l4.31"></a><span id="l4.31">         aMsgHdrs,</span>
<a href="#l4.32"></a><span id="l4.32">         aActionValue,</span>
<a href="#l4.33"></a><span id="l4.33">         aListener,</span>
<a href="#l4.34"></a><span id="l4.34">         aType,</span>
<a href="#l4.35"></a><span id="l4.35" class="difflineat">@@ -64,17 +63,17 @@ const filterActionMoveDecrypt = {</span>
<a href="#l4.36"></a><span id="l4.36"> };</span>
<a href="#l4.37"></a><span id="l4.37"> </span>
<a href="#l4.38"></a><span id="l4.38"> /**</span>
<a href="#l4.39"></a><span id="l4.39">  * filter action for creating a decrypted copy of the mail, leaving the original</span>
<a href="#l4.40"></a><span id="l4.40">  * message untouched</span>
<a href="#l4.41"></a><span id="l4.41">  */</span>
<a href="#l4.42"></a><span id="l4.42"> const filterActionCopyDecrypt = {</span>
<a href="#l4.43"></a><span id="l4.43">   id: EnigmailConstants.FILTER_COPY_DECRYPT,</span>
<a href="#l4.44"></a><span id="l4.44" class="difflineminus">-  name: EnigmailLocale.getString(&quot;filter.decryptCopy2.label&quot;),</span>
<a href="#l4.45"></a><span id="l4.45" class="difflineplus">+  name: l10n.formatValueSync(&quot;filter-decrypt-copy-label&quot;),</span>
<a href="#l4.46"></a><span id="l4.46">   value: &quot;copymessage&quot;,</span>
<a href="#l4.47"></a><span id="l4.47">   apply(aMsgHdrs, aActionValue, aListener, aType, aMsgWindow) {</span>
<a href="#l4.48"></a><span id="l4.48">     if (gEnigmailFilters) {</span>
<a href="#l4.49"></a><span id="l4.49">       gEnigmailFilters.copyDecrypt.apply(</span>
<a href="#l4.50"></a><span id="l4.50">         aMsgHdrs,</span>
<a href="#l4.51"></a><span id="l4.51">         aActionValue,</span>
<a href="#l4.52"></a><span id="l4.52">         aListener,</span>
<a href="#l4.53"></a><span id="l4.53">         aType,</span>
<a href="#l4.54"></a><span id="l4.54" class="difflineat">@@ -108,17 +107,17 @@ const filterActionCopyDecrypt = {</span>
<a href="#l4.55"></a><span id="l4.55">   needsBody: true,</span>
<a href="#l4.56"></a><span id="l4.56"> };</span>
<a href="#l4.57"></a><span id="l4.57"> </span>
<a href="#l4.58"></a><span id="l4.58"> /**</span>
<a href="#l4.59"></a><span id="l4.59">  * filter action for to encrypt a mail to a specific key</span>
<a href="#l4.60"></a><span id="l4.60">  */</span>
<a href="#l4.61"></a><span id="l4.61"> const filterActionEncrypt = {</span>
<a href="#l4.62"></a><span id="l4.62">   id: EnigmailConstants.FILTER_ENCRYPT,</span>
<a href="#l4.63"></a><span id="l4.63" class="difflineminus">-  name: EnigmailLocale.getString(&quot;filter.encrypt2.label&quot;),</span>
<a href="#l4.64"></a><span id="l4.64" class="difflineplus">+  name: l10n.formatValueSync(&quot;filter-encrypt-label&quot;),</span>
<a href="#l4.65"></a><span id="l4.65">   value: &quot;encryptto&quot;,</span>
<a href="#l4.66"></a><span id="l4.66">   apply(aMsgHdrs, aActionValue, aListener, aType, aMsgWindow) {</span>
<a href="#l4.67"></a><span id="l4.67">     if (gEnigmailFilters) {</span>
<a href="#l4.68"></a><span id="l4.68">       gEnigmailFilters.encrypt.apply(</span>
<a href="#l4.69"></a><span id="l4.69">         aMsgHdrs,</span>
<a href="#l4.70"></a><span id="l4.70">         aActionValue,</span>
<a href="#l4.71"></a><span id="l4.71">         aListener,</span>
<a href="#l4.72"></a><span id="l4.72">         aType,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/key.jsm</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/key.jsm</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -6,33 +6,31 @@</span>
<a href="#l5.4"></a><span id="l5.4"> </span>
<a href="#l5.5"></a><span id="l5.5"> &quot;use strict&quot;;</span>
<a href="#l5.6"></a><span id="l5.6"> </span>
<a href="#l5.7"></a><span id="l5.7"> var EXPORTED_SYMBOLS = [&quot;EnigmailKey&quot;];</span>
<a href="#l5.8"></a><span id="l5.8"> </span>
<a href="#l5.9"></a><span id="l5.9"> const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l5.10"></a><span id="l5.10">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l5.11"></a><span id="l5.11"> );</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-  &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineminus">-);</span>
<a href="#l5.15"></a><span id="l5.15"> const { EnigmailFiles } = ChromeUtils.import(</span>
<a href="#l5.16"></a><span id="l5.16">   &quot;chrome://openpgp/content/modules/files.jsm&quot;</span>
<a href="#l5.17"></a><span id="l5.17"> );</span>
<a href="#l5.18"></a><span id="l5.18"> const { EnigmailLazy } = ChromeUtils.import(</span>
<a href="#l5.19"></a><span id="l5.19">   &quot;chrome://openpgp/content/modules/lazy.jsm&quot;</span>
<a href="#l5.20"></a><span id="l5.20"> );</span>
<a href="#l5.21"></a><span id="l5.21"> const getKeyRing = EnigmailLazy.loader(</span>
<a href="#l5.22"></a><span id="l5.22">   &quot;enigmail/keyRing.jsm&quot;,</span>
<a href="#l5.23"></a><span id="l5.23">   &quot;EnigmailKeyRing&quot;</span>
<a href="#l5.24"></a><span id="l5.24"> );</span>
<a href="#l5.25"></a><span id="l5.25"> const getDialog = EnigmailLazy.loader(&quot;enigmail/dialog.jsm&quot;, &quot;EnigmailDialog&quot;);</span>
<a href="#l5.26"></a><span id="l5.26"> const { EnigmailCryptoAPI } = ChromeUtils.import(</span>
<a href="#l5.27"></a><span id="l5.27">   &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l5.28"></a><span id="l5.28"> );</span>
<a href="#l5.29"></a><span id="l5.29" class="difflineplus">+var l10n = new Localization([&quot;messenger/openpgp/enigmail.ftl&quot;], true);</span>
<a href="#l5.30"></a><span id="l5.30"> </span>
<a href="#l5.31"></a><span id="l5.31"> var EnigmailKey = {</span>
<a href="#l5.32"></a><span id="l5.32">   /**</span>
<a href="#l5.33"></a><span id="l5.33">    * Format a key fingerprint</span>
<a href="#l5.34"></a><span id="l5.34">    * @fingerprint |string|  -  unformated OpenPGP fingerprint</span>
<a href="#l5.35"></a><span id="l5.35">    *</span>
<a href="#l5.36"></a><span id="l5.36">    * @return |string| - formatted string</span>
<a href="#l5.37"></a><span id="l5.37">    */</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineat">@@ -71,27 +69,30 @@ var EnigmailKey = {</span>
<a href="#l5.39"></a><span id="l5.39">    * message in case of failures.</span>
<a href="#l5.40"></a><span id="l5.40">    */</span>
<a href="#l5.41"></a><span id="l5.41">   importRevocationCert(keyId, keyBlockStr) {</span>
<a href="#l5.42"></a><span id="l5.42">     let key = getKeyRing().getKeyById(keyId);</span>
<a href="#l5.43"></a><span id="l5.43"> </span>
<a href="#l5.44"></a><span id="l5.44">     if (key) {</span>
<a href="#l5.45"></a><span id="l5.45">       if (key.keyTrust === &quot;r&quot;) {</span>
<a href="#l5.46"></a><span id="l5.46">         // Key has already been revoked</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineminus">-        getDialog().info(</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineminus">-          null,</span>
<a href="#l5.49"></a><span id="l5.49" class="difflineminus">-          EnigmailLocale.getString(&quot;revokeKeyAlreadyRevoked&quot;, keyId)</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineminus">-        );</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+        l10n</span>
<a href="#l5.52"></a><span id="l5.52" class="difflineplus">+          .formatValue(&quot;revoke-key-already-revoked&quot;, {</span>
<a href="#l5.53"></a><span id="l5.53" class="difflineplus">+            keyId,</span>
<a href="#l5.54"></a><span id="l5.54" class="difflineplus">+          })</span>
<a href="#l5.55"></a><span id="l5.55" class="difflineplus">+          .then(value =&gt; {</span>
<a href="#l5.56"></a><span id="l5.56" class="difflineplus">+            getDialog().info(null, value);</span>
<a href="#l5.57"></a><span id="l5.57" class="difflineplus">+          });</span>
<a href="#l5.58"></a><span id="l5.58">       } else {</span>
<a href="#l5.59"></a><span id="l5.59">         let userId = key.userId + &quot; - 0x&quot; + key.keyId;</span>
<a href="#l5.60"></a><span id="l5.60">         if (</span>
<a href="#l5.61"></a><span id="l5.61">           !getDialog().confirmDlg(</span>
<a href="#l5.62"></a><span id="l5.62">             null,</span>
<a href="#l5.63"></a><span id="l5.63" class="difflineminus">-            EnigmailLocale.getString(&quot;revokeKeyQuestion&quot;, userId),</span>
<a href="#l5.64"></a><span id="l5.64" class="difflineminus">-            EnigmailLocale.getString(&quot;keyMan.button.revokeKey&quot;)</span>
<a href="#l5.65"></a><span id="l5.65" class="difflineplus">+            l10n.formatValueSync(&quot;revoke-key-question&quot;, { userId }),</span>
<a href="#l5.66"></a><span id="l5.66" class="difflineplus">+            l10n.formatValueSync(&quot;key-man-button-revoke-key&quot;)</span>
<a href="#l5.67"></a><span id="l5.67">           )</span>
<a href="#l5.68"></a><span id="l5.68">         ) {</span>
<a href="#l5.69"></a><span id="l5.69">           return;</span>
<a href="#l5.70"></a><span id="l5.70">         }</span>
<a href="#l5.71"></a><span id="l5.71"> </span>
<a href="#l5.72"></a><span id="l5.72">         let errorMsgObj = {};</span>
<a href="#l5.73"></a><span id="l5.73">         if (</span>
<a href="#l5.74"></a><span id="l5.74">           getKeyRing().importKey(</span>
<a href="#l5.75"></a><span id="l5.75" class="difflineat">@@ -103,20 +104,23 @@ var EnigmailKey = {</span>
<a href="#l5.76"></a><span id="l5.76">             errorMsgObj</span>
<a href="#l5.77"></a><span id="l5.77">           ) &gt; 0</span>
<a href="#l5.78"></a><span id="l5.78">         ) {</span>
<a href="#l5.79"></a><span id="l5.79">           getDialog().alert(null, errorMsgObj.value);</span>
<a href="#l5.80"></a><span id="l5.80">         }</span>
<a href="#l5.81"></a><span id="l5.81">       }</span>
<a href="#l5.82"></a><span id="l5.82">     } else {</span>
<a href="#l5.83"></a><span id="l5.83">       // Suitable key for revocation certificate is not present in keyring</span>
<a href="#l5.84"></a><span id="l5.84" class="difflineminus">-      getDialog().alert(</span>
<a href="#l5.85"></a><span id="l5.85" class="difflineminus">-        null,</span>
<a href="#l5.86"></a><span id="l5.86" class="difflineminus">-        EnigmailLocale.getString(&quot;revokeKeyNotPresent&quot;, keyId)</span>
<a href="#l5.87"></a><span id="l5.87" class="difflineminus">-      );</span>
<a href="#l5.88"></a><span id="l5.88" class="difflineplus">+      l10n</span>
<a href="#l5.89"></a><span id="l5.89" class="difflineplus">+        .formatValue(&quot;revoke-key-not-present&quot;, {</span>
<a href="#l5.90"></a><span id="l5.90" class="difflineplus">+          keyId,</span>
<a href="#l5.91"></a><span id="l5.91" class="difflineplus">+        })</span>
<a href="#l5.92"></a><span id="l5.92" class="difflineplus">+        .then(value =&gt; {</span>
<a href="#l5.93"></a><span id="l5.93" class="difflineplus">+          getDialog().alert(null, value);</span>
<a href="#l5.94"></a><span id="l5.94" class="difflineplus">+        });</span>
<a href="#l5.95"></a><span id="l5.95">     }</span>
<a href="#l5.96"></a><span id="l5.96">   },</span>
<a href="#l5.97"></a><span id="l5.97"> </span>
<a href="#l5.98"></a><span id="l5.98">   /**</span>
<a href="#l5.99"></a><span id="l5.99">    * Get details (key ID, UID) of the data contained in a OpenPGP key block</span>
<a href="#l5.100"></a><span id="l5.100">    *</span>
<a href="#l5.101"></a><span id="l5.101">    * @param keyBlockStr  String: the contents of one or more public keys</span>
<a href="#l5.102"></a><span id="l5.102">    * @param errorMsgObj  Object: obj.value will contain an error message in case of failures</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/keyObj.jsm</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/keyObj.jsm</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -60,32 +60,31 @@ var EXPORTED_SYMBOLS = [&quot;newEnigmailKeyO</span>
<a href="#l6.4"></a><span id="l6.4">      * clone</span>
<a href="#l6.5"></a><span id="l6.5">      * getMinimalPubKey</span>
<a href="#l6.6"></a><span id="l6.6">      * getVirtualKeySize</span>
<a href="#l6.7"></a><span id="l6.7"> */</span>
<a href="#l6.8"></a><span id="l6.8"> </span>
<a href="#l6.9"></a><span id="l6.9"> const { EnigmailLog } = ChromeUtils.import(</span>
<a href="#l6.10"></a><span id="l6.10">   &quot;chrome://openpgp/content/modules/log.jsm&quot;</span>
<a href="#l6.11"></a><span id="l6.11"> );</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-const { EnigmailLocale } = ChromeUtils.import(</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-  &quot;chrome://openpgp/content/modules/locale.jsm&quot;</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineminus">-);</span>
<a href="#l6.15"></a><span id="l6.15"> const { EnigmailKey } = ChromeUtils.import(</span>
<a href="#l6.16"></a><span id="l6.16">   &quot;chrome://openpgp/content/modules/key.jsm&quot;</span>
<a href="#l6.17"></a><span id="l6.17"> );</span>
<a href="#l6.18"></a><span id="l6.18"> const { EnigmailFuncs } = ChromeUtils.import(</span>
<a href="#l6.19"></a><span id="l6.19">   &quot;chrome://openpgp/content/modules/funcs.jsm&quot;</span>
<a href="#l6.20"></a><span id="l6.20"> );</span>
<a href="#l6.21"></a><span id="l6.21"> const { EnigmailTime } = ChromeUtils.import(</span>
<a href="#l6.22"></a><span id="l6.22">   &quot;chrome://openpgp/content/modules/time.jsm&quot;</span>
<a href="#l6.23"></a><span id="l6.23"> );</span>
<a href="#l6.24"></a><span id="l6.24"> const { EnigmailCryptoAPI } = ChromeUtils.import(</span>
<a href="#l6.25"></a><span id="l6.25">   &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l6.26"></a><span id="l6.26"> );</span>
<a href="#l6.27"></a><span id="l6.27"> </span>
<a href="#l6.28"></a><span id="l6.28" class="difflineplus">+var l10n = new Localization([&quot;messenger/openpgp/enigmail.ftl&quot;], true);</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineplus">+</span>
<a href="#l6.30"></a><span id="l6.30"> function newEnigmailKeyObj(keyData) {</span>
<a href="#l6.31"></a><span id="l6.31">   return new EnigmailKeyObj(keyData);</span>
<a href="#l6.32"></a><span id="l6.32"> }</span>
<a href="#l6.33"></a><span id="l6.33"> </span>
<a href="#l6.34"></a><span id="l6.34"> class EnigmailKeyObj {</span>
<a href="#l6.35"></a><span id="l6.35">   constructor(keyData) {</span>
<a href="#l6.36"></a><span id="l6.36">     this.keyId = &quot;&quot;;</span>
<a href="#l6.37"></a><span id="l6.37">     this.expiry = &quot;&quot;;</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineat">@@ -233,41 +232,41 @@ class EnigmailKeyObj {</span>
<a href="#l6.39"></a><span id="l6.39">    */</span>
<a href="#l6.40"></a><span id="l6.40">   getPubKeyValidity() {</span>
<a href="#l6.41"></a><span id="l6.41">     let retVal = {</span>
<a href="#l6.42"></a><span id="l6.42">       keyValid: false,</span>
<a href="#l6.43"></a><span id="l6.43">       reason: &quot;&quot;,</span>
<a href="#l6.44"></a><span id="l6.44">     };</span>
<a href="#l6.45"></a><span id="l6.45">     if (this.keyTrust.search(/r/i) &gt;= 0) {</span>
<a href="#l6.46"></a><span id="l6.46">       // public key revoked</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineminus">-      retVal.reason = EnigmailLocale.getString(&quot;keyRing.pubKeyRevoked&quot;, [</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineminus">-        this.userId,</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineminus">-        &quot;0x&quot; + this.keyId,</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineminus">-      ]);</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineplus">+      retVal.reason = l10n.formatValueSync(&quot;key-ring-pub-key-revoked&quot;, {</span>
<a href="#l6.52"></a><span id="l6.52" class="difflineplus">+        userId: this.userId,</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineplus">+        keyId: &quot;0x&quot; + this.keyId,</span>
<a href="#l6.54"></a><span id="l6.54" class="difflineplus">+      });</span>
<a href="#l6.55"></a><span id="l6.55">     } else if (this.keyTrust.search(/e/i) &gt;= 0) {</span>
<a href="#l6.56"></a><span id="l6.56">       // public key expired</span>
<a href="#l6.57"></a><span id="l6.57" class="difflineminus">-      retVal.reason = EnigmailLocale.getString(&quot;keyRing.pubKeyExpired&quot;, [</span>
<a href="#l6.58"></a><span id="l6.58" class="difflineminus">-        this.userId,</span>
<a href="#l6.59"></a><span id="l6.59" class="difflineminus">-        &quot;0x&quot; + this.keyId,</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineminus">-      ]);</span>
<a href="#l6.61"></a><span id="l6.61" class="difflineplus">+      retVal.reason = l10n.formatValueSync(&quot;key-ring-pub-key-expired&quot;, {</span>
<a href="#l6.62"></a><span id="l6.62" class="difflineplus">+        userId: this.userId,</span>
<a href="#l6.63"></a><span id="l6.63" class="difflineplus">+        keyId: &quot;0x&quot; + this.keyId,</span>
<a href="#l6.64"></a><span id="l6.64" class="difflineplus">+      });</span>
<a href="#l6.65"></a><span id="l6.65">     } else if (</span>
<a href="#l6.66"></a><span id="l6.66">       this.keyTrust.search(/d/i) &gt;= 0 ||</span>
<a href="#l6.67"></a><span id="l6.67">       this.keyUseFor.search(/D/i) &gt;= 0</span>
<a href="#l6.68"></a><span id="l6.68">     ) {</span>
<a href="#l6.69"></a><span id="l6.69">       // public key disabled</span>
<a href="#l6.70"></a><span id="l6.70" class="difflineminus">-      retVal.reason = EnigmailLocale.getString(&quot;keyRing.keyDisabled&quot;, [</span>
<a href="#l6.71"></a><span id="l6.71" class="difflineminus">-        this.userId,</span>
<a href="#l6.72"></a><span id="l6.72" class="difflineminus">-        &quot;0x&quot; + this.keyId,</span>
<a href="#l6.73"></a><span id="l6.73" class="difflineminus">-      ]);</span>
<a href="#l6.74"></a><span id="l6.74" class="difflineplus">+      retVal.reason = l10n.formatValueSync(&quot;key-ring-key-disabled&quot;, {</span>
<a href="#l6.75"></a><span id="l6.75" class="difflineplus">+        userId: this.userId,</span>
<a href="#l6.76"></a><span id="l6.76" class="difflineplus">+        keyId: &quot;0x&quot; + this.keyId,</span>
<a href="#l6.77"></a><span id="l6.77" class="difflineplus">+      });</span>
<a href="#l6.78"></a><span id="l6.78">     } else if (this.keyTrust.search(/i/i) &gt;= 0) {</span>
<a href="#l6.79"></a><span id="l6.79">       // public key invalid</span>
<a href="#l6.80"></a><span id="l6.80" class="difflineminus">-      retVal.reason = EnigmailLocale.getString(&quot;keyRing.keyInvalid2&quot;, [</span>
<a href="#l6.81"></a><span id="l6.81" class="difflineminus">-        this.userId,</span>
<a href="#l6.82"></a><span id="l6.82" class="difflineminus">-        &quot;0x&quot; + this.keyId,</span>
<a href="#l6.83"></a><span id="l6.83" class="difflineminus">-      ]);</span>
<a href="#l6.84"></a><span id="l6.84" class="difflineplus">+      retVal.reason = l10n.formatValueSync(&quot;key-ring-key-invalid&quot;, {</span>
<a href="#l6.85"></a><span id="l6.85" class="difflineplus">+        userId: this.userId,</span>
<a href="#l6.86"></a><span id="l6.86" class="difflineplus">+        keyId: &quot;0x&quot; + this.keyId,</span>
<a href="#l6.87"></a><span id="l6.87" class="difflineplus">+      });</span>
<a href="#l6.88"></a><span id="l6.88">     } else {</span>
<a href="#l6.89"></a><span id="l6.89">       retVal.keyValid = true;</span>
<a href="#l6.90"></a><span id="l6.90">     }</span>
<a href="#l6.91"></a><span id="l6.91"> </span>
<a href="#l6.92"></a><span id="l6.92">     return retVal;</span>
<a href="#l6.93"></a><span id="l6.93">   }</span>
<a href="#l6.94"></a><span id="l6.94"> </span>
<a href="#l6.95"></a><span id="l6.95">   /**</span>
<a href="#l6.96"></a><span id="l6.96" class="difflineat">@@ -280,30 +279,29 @@ class EnigmailKeyObj {</span>
<a href="#l6.97"></a><span id="l6.97">   getSigningValidity() {</span>
<a href="#l6.98"></a><span id="l6.98">     let retVal = this.getPubKeyValidity();</span>
<a href="#l6.99"></a><span id="l6.99"> </span>
<a href="#l6.100"></a><span id="l6.100">     if (!retVal.keyValid) {</span>
<a href="#l6.101"></a><span id="l6.101">       return retVal;</span>
<a href="#l6.102"></a><span id="l6.102">     }</span>
<a href="#l6.103"></a><span id="l6.103"> </span>
<a href="#l6.104"></a><span id="l6.104">     if (!this.secretAvailable) {</span>
<a href="#l6.105"></a><span id="l6.105" class="difflineminus">-      retVal.reason = EnigmailLocale.getString(&quot;keyRing.noSecretKey&quot;, [</span>
<a href="#l6.106"></a><span id="l6.106" class="difflineminus">-        this.userId,</span>
<a href="#l6.107"></a><span id="l6.107" class="difflineminus">-        &quot;0x&quot; + this.keyId,</span>
<a href="#l6.108"></a><span id="l6.108" class="difflineminus">-      ]);</span>
<a href="#l6.109"></a><span id="l6.109">       retVal.keyValid = false;</span>
<a href="#l6.110"></a><span id="l6.110" class="difflineplus">+      retVal.reason = l10n.formatValueSync(&quot;key-ring-no-secret-key&quot;, {</span>
<a href="#l6.111"></a><span id="l6.111" class="difflineplus">+        userId: this.userId,</span>
<a href="#l6.112"></a><span id="l6.112" class="difflineplus">+        keyId: &quot;0x&quot; + this.keyId,</span>
<a href="#l6.113"></a><span id="l6.113" class="difflineplus">+      });</span>
<a href="#l6.114"></a><span id="l6.114">     } else if (this.keyUseFor.search(/S/) &lt; 0) {</span>
<a href="#l6.115"></a><span id="l6.115">       retVal.keyValid = false;</span>
<a href="#l6.116"></a><span id="l6.116" class="difflineminus">-</span>
<a href="#l6.117"></a><span id="l6.117">       if (this.keyTrust.search(/u/i) &lt; 0) {</span>
<a href="#l6.118"></a><span id="l6.118">         // public key invalid</span>
<a href="#l6.119"></a><span id="l6.119" class="difflineminus">-        retVal.reason = EnigmailLocale.getString(&quot;keyRing.keyNotTrusted&quot;, [</span>
<a href="#l6.120"></a><span id="l6.120" class="difflineminus">-          this.userId,</span>
<a href="#l6.121"></a><span id="l6.121" class="difflineminus">-          &quot;0x&quot; + this.keyId,</span>
<a href="#l6.122"></a><span id="l6.122" class="difflineminus">-        ]);</span>
<a href="#l6.123"></a><span id="l6.123" class="difflineplus">+        retVal.reason = l10n.formatValueSync(&quot;key-ring-key-not-trusted&quot;, {</span>
<a href="#l6.124"></a><span id="l6.124" class="difflineplus">+          userId: this.userId,</span>
<a href="#l6.125"></a><span id="l6.125" class="difflineplus">+          keyId: &quot;0x&quot; + this.keyId,</span>
<a href="#l6.126"></a><span id="l6.126" class="difflineplus">+        });</span>
<a href="#l6.127"></a><span id="l6.127">       } else {</span>
<a href="#l6.128"></a><span id="l6.128">         let expired = 0,</span>
<a href="#l6.129"></a><span id="l6.129">           revoked = 0,</span>
<a href="#l6.130"></a><span id="l6.130">           unusable = 0,</span>
<a href="#l6.131"></a><span id="l6.131">           found = 0;</span>
<a href="#l6.132"></a><span id="l6.132">         // public key is valid; check for signing subkeys</span>
<a href="#l6.133"></a><span id="l6.133">         for (let sk in this.subKeys) {</span>
<a href="#l6.134"></a><span id="l6.134">           if (this.subKeys[sk].keyUseFor.search(/S/) &gt;= 0) {</span>
<a href="#l6.135"></a><span id="l6.135" class="difflineat">@@ -320,34 +318,46 @@ class EnigmailKeyObj {</span>
<a href="#l6.136"></a><span id="l6.136">               // found subkey usable</span>
<a href="#l6.137"></a><span id="l6.137">               ++found;</span>
<a href="#l6.138"></a><span id="l6.138">             }</span>
<a href="#l6.139"></a><span id="l6.139">           }</span>
<a href="#l6.140"></a><span id="l6.140">         }</span>
<a href="#l6.141"></a><span id="l6.141"> </span>
<a href="#l6.142"></a><span id="l6.142">         if (!found) {</span>
<a href="#l6.143"></a><span id="l6.143">           if (expired) {</span>
<a href="#l6.144"></a><span id="l6.144" class="difflineminus">-            retVal.reason = EnigmailLocale.getString(</span>
<a href="#l6.145"></a><span id="l6.145" class="difflineminus">-              &quot;keyRing.signSubKeysExpired&quot;,</span>
<a href="#l6.146"></a><span id="l6.146" class="difflineminus">-              [this.userId, &quot;0x&quot; + this.keyId]</span>
<a href="#l6.147"></a><span id="l6.147" class="difflineplus">+            retVal.reason = l10n.formatValueSync(</span>
<a href="#l6.148"></a><span id="l6.148" class="difflineplus">+              &quot;key-ring-sign-sub-keys-expired&quot;,</span>
<a href="#l6.149"></a><span id="l6.149" class="difflineplus">+              {</span>
<a href="#l6.150"></a><span id="l6.150" class="difflineplus">+                userId: this.userId,</span>
<a href="#l6.151"></a><span id="l6.151" class="difflineplus">+                keyId: &quot;0x&quot; + this.keyId,</span>
<a href="#l6.152"></a><span id="l6.152" class="difflineplus">+              }</span>
<a href="#l6.153"></a><span id="l6.153">             );</span>
<a href="#l6.154"></a><span id="l6.154">           } else if (revoked) {</span>
<a href="#l6.155"></a><span id="l6.155" class="difflineminus">-            retVal.reason = EnigmailLocale.getString(</span>
<a href="#l6.156"></a><span id="l6.156" class="difflineminus">-              &quot;keyRing.signSubKeysRevoked&quot;,</span>
<a href="#l6.157"></a><span id="l6.157" class="difflineminus">-              [this.userId, &quot;0x&quot; + this.keyId]</span>
<a href="#l6.158"></a><span id="l6.158" class="difflineplus">+            retVal.reason = l10n.formatValueSync(</span>
<a href="#l6.159"></a><span id="l6.159" class="difflineplus">+              &quot;key-ring-sign-sub-keys-revoked&quot;,</span>
<a href="#l6.160"></a><span id="l6.160" class="difflineplus">+              {</span>
<a href="#l6.161"></a><span id="l6.161" class="difflineplus">+                userId: this.userId,</span>
<a href="#l6.162"></a><span id="l6.162" class="difflineplus">+                keyId: &quot;0x&quot; + this.keyId,</span>
<a href="#l6.163"></a><span id="l6.163" class="difflineplus">+              }</span>
<a href="#l6.164"></a><span id="l6.164">             );</span>
<a href="#l6.165"></a><span id="l6.165">           } else if (unusable) {</span>
<a href="#l6.166"></a><span id="l6.166" class="difflineminus">-            retVal.reason = EnigmailLocale.getString(</span>
<a href="#l6.167"></a><span id="l6.167" class="difflineminus">-              &quot;keyRing.signSubKeysUnusable&quot;,</span>
<a href="#l6.168"></a><span id="l6.168" class="difflineminus">-              [this.userId, &quot;0x&quot; + this.keyId]</span>
<a href="#l6.169"></a><span id="l6.169" class="difflineplus">+            retVal.reason = l10n.formatValueSync(</span>
<a href="#l6.170"></a><span id="l6.170" class="difflineplus">+              &quot;key-ring-sign-sub-keys-unusable&quot;,</span>
<a href="#l6.171"></a><span id="l6.171" class="difflineplus">+              {</span>
<a href="#l6.172"></a><span id="l6.172" class="difflineplus">+                userId: this.userId,</span>
<a href="#l6.173"></a><span id="l6.173" class="difflineplus">+                keyId: &quot;0x&quot; + this.keyId,</span>
<a href="#l6.174"></a><span id="l6.174" class="difflineplus">+              }</span>
<a href="#l6.175"></a><span id="l6.175">             );</span>
<a href="#l6.176"></a><span id="l6.176">           } else {</span>
<a href="#l6.177"></a><span id="l6.177" class="difflineminus">-            retVal.reason = EnigmailLocale.getString(</span>
<a href="#l6.178"></a><span id="l6.178" class="difflineminus">-              &quot;keyRing.pubKeyNotForSigning&quot;,</span>
<a href="#l6.179"></a><span id="l6.179" class="difflineminus">-              [this.userId, &quot;0x&quot; + this.keyId]</span>
<a href="#l6.180"></a><span id="l6.180" class="difflineplus">+            retVal.reason = l10n.formatValueSync(</span>
<a href="#l6.181"></a><span id="l6.181" class="difflineplus">+              &quot;key-ring-pub-key-not-for-signing&quot;,</span>
<a href="#l6.182"></a><span id="l6.182" class="difflineplus">+              {</span>
<a href="#l6.183"></a><span id="l6.183" class="difflineplus">+                userId: this.userId,</span>
<a href="#l6.184"></a><span id="l6.184" class="difflineplus">+                keyId: &quot;0x&quot; + this.keyId,</span>
<a href="#l6.185"></a><span id="l6.185" class="difflineplus">+              }</span>
<a href="#l6.186"></a><span id="l6.186">             );</span>
<a href="#l6.187"></a><span id="l6.187">           }</span>
<a href="#l6.188"></a><span id="l6.188">         } else {</span>
<a href="#l6.189"></a><span id="l6.189">           retVal.keyValid = true;</span>
<a href="#l6.190"></a><span id="l6.190">         }</span>
<a href="#l6.191"></a><span id="l6.191">       }</span>
<a href="#l6.192"></a><span id="l6.192">     }</span>
<a href="#l6.193"></a><span id="l6.193"> </span>
<a href="#l6.194"></a><span id="l6.194" class="difflineat">@@ -368,20 +378,20 @@ class EnigmailKeyObj {</span>
<a href="#l6.195"></a><span id="l6.195">       return retVal;</span>
<a href="#l6.196"></a><span id="l6.196">     }</span>
<a href="#l6.197"></a><span id="l6.197"> </span>
<a href="#l6.198"></a><span id="l6.198">     if (this.keyUseFor.search(/E/) &lt; 0) {</span>
<a href="#l6.199"></a><span id="l6.199">       retVal.keyValid = false;</span>
<a href="#l6.200"></a><span id="l6.200"> </span>
<a href="#l6.201"></a><span id="l6.201">       if (this.keyTrust.search(/u/i) &lt; 0) {</span>
<a href="#l6.202"></a><span id="l6.202">         // public key invalid</span>
<a href="#l6.203"></a><span id="l6.203" class="difflineminus">-        retVal.reason = EnigmailLocale.getString(&quot;keyRing.keyInvalid2&quot;, [</span>
<a href="#l6.204"></a><span id="l6.204" class="difflineminus">-          this.userId,</span>
<a href="#l6.205"></a><span id="l6.205" class="difflineminus">-          &quot;0x&quot; + this.keyId,</span>
<a href="#l6.206"></a><span id="l6.206" class="difflineminus">-        ]);</span>
<a href="#l6.207"></a><span id="l6.207" class="difflineplus">+        retVal.reason = l10n.formatValueSync(&quot;key-ring-key-invalid&quot;, {</span>
<a href="#l6.208"></a><span id="l6.208" class="difflineplus">+          userId: this.userId,</span>
<a href="#l6.209"></a><span id="l6.209" class="difflineplus">+          keyId: &quot;0x&quot; + this.keyId,</span>
<a href="#l6.210"></a><span id="l6.210" class="difflineplus">+        });</span>
<a href="#l6.211"></a><span id="l6.211">       } else {</span>
<a href="#l6.212"></a><span id="l6.212">         let expired = 0,</span>
<a href="#l6.213"></a><span id="l6.213">           revoked = 0,</span>
<a href="#l6.214"></a><span id="l6.214">           unusable = 0,</span>
<a href="#l6.215"></a><span id="l6.215">           found = 0;</span>
<a href="#l6.216"></a><span id="l6.216">         // public key is valid; check for encryption subkeys</span>
<a href="#l6.217"></a><span id="l6.217"> </span>
<a href="#l6.218"></a><span id="l6.218">         for (let sk in this.subKeys) {</span>
<a href="#l6.219"></a><span id="l6.219" class="difflineat">@@ -399,34 +409,46 @@ class EnigmailKeyObj {</span>
<a href="#l6.220"></a><span id="l6.220">               // found subkey usable</span>
<a href="#l6.221"></a><span id="l6.221">               ++found;</span>
<a href="#l6.222"></a><span id="l6.222">             }</span>
<a href="#l6.223"></a><span id="l6.223">           }</span>
<a href="#l6.224"></a><span id="l6.224">         }</span>
<a href="#l6.225"></a><span id="l6.225"> </span>
<a href="#l6.226"></a><span id="l6.226">         if (!found) {</span>
<a href="#l6.227"></a><span id="l6.227">           if (expired) {</span>
<a href="#l6.228"></a><span id="l6.228" class="difflineminus">-            retVal.reason = EnigmailLocale.getString(</span>
<a href="#l6.229"></a><span id="l6.229" class="difflineminus">-              &quot;keyRing.encSubKeysExpired&quot;,</span>
<a href="#l6.230"></a><span id="l6.230" class="difflineminus">-              [this.userId, &quot;0x&quot; + this.keyId]</span>
<a href="#l6.231"></a><span id="l6.231" class="difflineplus">+            retVal.reason = l10n.formatValueSync(</span>
<a href="#l6.232"></a><span id="l6.232" class="difflineplus">+              &quot;key-ring-enc-sub-keys-expired&quot;,</span>
<a href="#l6.233"></a><span id="l6.233" class="difflineplus">+              {</span>
<a href="#l6.234"></a><span id="l6.234" class="difflineplus">+                userId: this.userId,</span>
<a href="#l6.235"></a><span id="l6.235" class="difflineplus">+                keyId: &quot;0x&quot; + this.keyId,</span>
<a href="#l6.236"></a><span id="l6.236" class="difflineplus">+              }</span>
<a href="#l6.237"></a><span id="l6.237">             );</span>
<a href="#l6.238"></a><span id="l6.238">           } else if (revoked) {</span>
<a href="#l6.239"></a><span id="l6.239" class="difflineminus">-            retVal.reason = EnigmailLocale.getString(</span>
<a href="#l6.240"></a><span id="l6.240" class="difflineminus">-              &quot;keyRing.encSubKeysRevoked&quot;,</span>
<a href="#l6.241"></a><span id="l6.241" class="difflineminus">-              [this.userId, &quot;0x&quot; + this.keyId]</span>
<a href="#l6.242"></a><span id="l6.242" class="difflineplus">+            retVal.reason = l10n.formatValueSync(</span>
<a href="#l6.243"></a><span id="l6.243" class="difflineplus">+              &quot;key-ring-enc-sub-keys-revoked&quot;,</span>
<a href="#l6.244"></a><span id="l6.244" class="difflineplus">+              {</span>
<a href="#l6.245"></a><span id="l6.245" class="difflineplus">+                userId: this.userId,</span>
<a href="#l6.246"></a><span id="l6.246" class="difflineplus">+                keyId: &quot;0x&quot; + this.keyId,</span>
<a href="#l6.247"></a><span id="l6.247" class="difflineplus">+              }</span>
<a href="#l6.248"></a><span id="l6.248">             );</span>
<a href="#l6.249"></a><span id="l6.249">           } else if (unusable) {</span>
<a href="#l6.250"></a><span id="l6.250" class="difflineminus">-            retVal.reason = EnigmailLocale.getString(</span>
<a href="#l6.251"></a><span id="l6.251" class="difflineminus">-              &quot;keyRing.encSubKeysUnusable&quot;,</span>
<a href="#l6.252"></a><span id="l6.252" class="difflineminus">-              [this.userId, &quot;0x&quot; + this.keyId]</span>
<a href="#l6.253"></a><span id="l6.253" class="difflineplus">+            retVal.reason = l10n.formatValueSync(</span>
<a href="#l6.254"></a><span id="l6.254" class="difflineplus">+              &quot;key-ring-enc-sub-keys-unusable&quot;,</span>
<a href="#l6.255"></a><span id="l6.255" class="difflineplus">+              {</span>
<a href="#l6.256"></a><span id="l6.256" class="difflineplus">+                userId: this.userId,</span>
<a href="#l6.257"></a><span id="l6.257" class="difflineplus">+                keyId: &quot;0x&quot; + this.keyId,</span>
<a href="#l6.258"></a><span id="l6.258" class="difflineplus">+              }</span>
<a href="#l6.259"></a><span id="l6.259">             );</span>
<a href="#l6.260"></a><span id="l6.260">           } else {</span>
<a href="#l6.261"></a><span id="l6.261" class="difflineminus">-            retVal.reason = EnigmailLocale.getString(</span>
<a href="#l6.262"></a><span id="l6.262" class="difflineminus">-              &quot;keyRing.pubKeyNotForEncryption&quot;,</span>
<a href="#l6.263"></a><span id="l6.263" class="difflineminus">-              [this.userId, &quot;0x&quot; + this.keyId]</span>
<a href="#l6.264"></a><span id="l6.264" class="difflineplus">+            retVal.reason = l10n.formatValueSync(</span>
<a href="#l6.265"></a><span id="l6.265" class="difflineplus">+              &quot;key-ring-pub-key-not-for-encryption&quot;,</span>
<a href="#l6.266"></a><span id="l6.266" class="difflineplus">+              {</span>
<a href="#l6.267"></a><span id="l6.267" class="difflineplus">+                userId: this.userId,</span>
<a href="#l6.268"></a><span id="l6.268" class="difflineplus">+                keyId: &quot;0x&quot; + this.keyId,</span>
<a href="#l6.269"></a><span id="l6.269" class="difflineplus">+              }</span>
<a href="#l6.270"></a><span id="l6.270">             );</span>
<a href="#l6.271"></a><span id="l6.271">           }</span>
<a href="#l6.272"></a><span id="l6.272">         } else {</span>
<a href="#l6.273"></a><span id="l6.273">           retVal.keyValid = true;</span>
<a href="#l6.274"></a><span id="l6.274">         }</span>
<a href="#l6.275"></a><span id="l6.275">       }</span>
<a href="#l6.276"></a><span id="l6.276">     }</span>
<a href="#l6.277"></a><span id="l6.277"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/extensions/openpgp/content/modules/keyRing.jsm</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/modules/keyRing.jsm</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -41,16 +41,18 @@ const { uidHelper } = ChromeUtils.import</span>
<a href="#l7.4"></a><span id="l7.4"> );</span>
<a href="#l7.5"></a><span id="l7.5"> </span>
<a href="#l7.6"></a><span id="l7.6"> const getDialog = EnigmailLazy.loader(&quot;enigmail/dialog.jsm&quot;, &quot;EnigmailDialog&quot;);</span>
<a href="#l7.7"></a><span id="l7.7"> const getWindows = EnigmailLazy.loader(</span>
<a href="#l7.8"></a><span id="l7.8">   &quot;enigmail/windows.jsm&quot;,</span>
<a href="#l7.9"></a><span id="l7.9">   &quot;EnigmailWindows&quot;</span>
<a href="#l7.10"></a><span id="l7.10"> );</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+var l10n = new Localization([&quot;messenger/openpgp/enigmail.ftl&quot;], true);</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+</span>
<a href="#l7.14"></a><span id="l7.14"> const DEFAULT_FILE_PERMS = 0o600;</span>
<a href="#l7.15"></a><span id="l7.15"> </span>
<a href="#l7.16"></a><span id="l7.16"> let gKeyListObj = null;</span>
<a href="#l7.17"></a><span id="l7.17"> let gKeyIndex = [];</span>
<a href="#l7.18"></a><span id="l7.18"> let gSubkeyIndex = [];</span>
<a href="#l7.19"></a><span id="l7.19"> let gLoadingKeys = false;</span>
<a href="#l7.20"></a><span id="l7.20"> </span>
<a href="#l7.21"></a><span id="l7.21"> /*</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineat">@@ -631,17 +633,17 @@ var EnigmailKeyRing = {</span>
<a href="#l7.23"></a><span id="l7.23">       );</span>
<a href="#l7.24"></a><span id="l7.24">     }</span>
<a href="#l7.25"></a><span id="l7.25"> </span>
<a href="#l7.26"></a><span id="l7.26">     if (isInteractive) {</span>
<a href="#l7.27"></a><span id="l7.27">       if (</span>
<a href="#l7.28"></a><span id="l7.28">         !getDialog().confirmDlg(</span>
<a href="#l7.29"></a><span id="l7.29">           parent,</span>
<a href="#l7.30"></a><span id="l7.30">           EnigmailLocale.getString(&quot;importKeyConfirm&quot;),</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-          EnigmailLocale.getString(&quot;keyMan.button.import&quot;)</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+          l10n.formatValueSync(&quot;key-man-button-import&quot;)</span>
<a href="#l7.33"></a><span id="l7.33">         )</span>
<a href="#l7.34"></a><span id="l7.34">       ) {</span>
<a href="#l7.35"></a><span id="l7.35">         errorMsgObj.value = EnigmailLocale.getString(&quot;failCancel&quot;);</span>
<a href="#l7.36"></a><span id="l7.36">         return -1;</span>
<a href="#l7.37"></a><span id="l7.37">       }</span>
<a href="#l7.38"></a><span id="l7.38">     }</span>
<a href="#l7.39"></a><span id="l7.39"> </span>
<a href="#l7.40"></a><span id="l7.40">     if (limitedUids.length &gt; 0) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/extensions/openpgp/content/strings/enigmail.ftl</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/strings/enigmail.ftl</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -228,15 +228,79 @@ wkd-message-body-process = This is an em</span>
<a href="#l8.4"></a><span id="l8.4"> </span>
<a href="#l8.5"></a><span id="l8.5"> # Strings in persistentCrypto.jsm</span>
<a href="#l8.6"></a><span id="l8.6"> converter-decrypt-body-failed = Could not decrypt message with subject\n{ $subject }.\nDo you want to retry with a different passphrase or do you want to skip the message?</span>
<a href="#l8.7"></a><span id="l8.7"> </span>
<a href="#l8.8"></a><span id="l8.8"> # Strings in gpg.jsm</span>
<a href="#l8.9"></a><span id="l8.9"> unknown-signing-alg = Unknown signing algorithm (ID: { $id })</span>
<a href="#l8.10"></a><span id="l8.10"> unknown-hash-alg = Unknown cryptographic hash (ID: { $id })</span>
<a href="#l8.11"></a><span id="l8.11"> </span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-#strings in keyUsability.jsm</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+# Strings in keyUsability.jsm</span>
<a href="#l8.14"></a><span id="l8.14"> expiry-key-expires-soon = Your key { $desc } will expire in less than { $days } days.\n\nWe recommend that you create a new key pair and configure the corresponding accounts to use it.</span>
<a href="#l8.15"></a><span id="l8.15"> expiry-keys-expire-soon = Your following keys will expire in less than { $days } days:\n{ $desc }. We recommend that you create new keys and configure the corresponding accounts to use them.</span>
<a href="#l8.16"></a><span id="l8.16"> expiry-key-missing-owner-trust = Your secret key { $desc } has missing trust.\n\nWe recommend that you set &quot;You rely on certifications&quot; to &quot;ultimate&quot; in key properties.</span>
<a href="#l8.17"></a><span id="l8.17"> expiry-keys-missing-owner-trust = The following of your secret keys have missing trust.\n{ $desc }.\nWe recommend that you set &quot;You rely on certifications&quot; to &quot;ultimate&quot; in key properties.</span>
<a href="#l8.18"></a><span id="l8.18"> expiry-open-key-manager = Open OpenPGP Key Management</span>
<a href="#l8.19"></a><span id="l8.19"> expiry-open-key-properties = Open Key Properties</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineplus">+</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineplus">+# Strings filters.jsm</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineplus">+filter-folder-required = You must select a target folder.</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineplus">+filter-decrypt-move-warn-experimental = Warning - the filter action &quot;Decrypt permanently&quot; may lead to destroyed messages.\n\nWe strongly recommend that you first try the &quot;Create decrypted Copy&quot; filter, test the result carefully, and only start using this filter once you are satisified with the result.</span>
<a href="#l8.24"></a><span id="l8.24" class="difflineplus">+filter-term-pgpencrypted-label = OpenPGP Encrypted</span>
<a href="#l8.25"></a><span id="l8.25" class="difflineplus">+filter-key-required = You must select a recipient key.</span>
<a href="#l8.26"></a><span id="l8.26" class="difflineplus">+filter-key-not-found = Could not find an encryption key for '{ $desc }'.</span>
<a href="#l8.27"></a><span id="l8.27" class="difflineplus">+filter-warn-key-not-secret = Warning - the filter action &quot;Encrypt to key&quot; replaces the recipients.\n\nIf you do not have the secret key for '{ $desc }' you will no longer be able to read the emails.</span>
<a href="#l8.28"></a><span id="l8.28" class="difflineplus">+</span>
<a href="#l8.29"></a><span id="l8.29" class="difflineplus">+#Strings filtersWrapper.jsm</span>
<a href="#l8.30"></a><span id="l8.30" class="difflineplus">+filter-decrypt-move-label = Decrypt permanently (OpenPGP)</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineplus">+filter-decrypt-copy-label = Create decrypted Copy (OpenPGP)</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineplus">+filter-encrypt-label = Encrypt to key (OpenPGP)</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineplus">+</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineplus">+# Strings in enigmailKeyImportInfo.js</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineplus">+import-info-title =</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineplus">+    .title = SUCCESS! Keys imported</span>
<a href="#l8.37"></a><span id="l8.37" class="difflineplus">+import-info-bits = Bits</span>
<a href="#l8.38"></a><span id="l8.38" class="difflineplus">+import-info-created = Created</span>
<a href="#l8.39"></a><span id="l8.39" class="difflineplus">+import-info-fpr = Fingerprint</span>
<a href="#l8.40"></a><span id="l8.40" class="difflineplus">+import-info-details = View Details and manage key acceptance</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineplus">+import-info-no-keys = No keys imported.</span>
<a href="#l8.42"></a><span id="l8.42" class="difflineplus">+</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineplus">+# Strings in enigmailKeyManager.js</span>
<a href="#l8.44"></a><span id="l8.44" class="difflineplus">+import-from-clip = Do you want to import some key(s) from clipboard?</span>
<a href="#l8.45"></a><span id="l8.45" class="difflineplus">+import-from-url = Download public key from this URL:</span>
<a href="#l8.46"></a><span id="l8.46" class="difflineplus">+copy-to-clipbrd-failed = Could not copy the selected key(s) to the clipboard.</span>
<a href="#l8.47"></a><span id="l8.47" class="difflineplus">+copy-to-clipbrd-ok = Key(s) copied to clipboard</span>
<a href="#l8.48"></a><span id="l8.48" class="difflineplus">+delete-secret-key = WARNING: You are about to delete a secret key!\nIf you delete your secret key, you will no longer be able to decrypt any messages encrypted for that key, nor will you be able to revoke it.\n\nDo you really want to delete BOTH, the secret key and the public key\n'{ $userId }'?</span>
<a href="#l8.49"></a><span id="l8.49" class="difflineplus">+delete-mix = WARNING: You are about to delete secret keys!\nIf you delete your secret key, you will no longer be able to decrypt any messages encrypted for that key.\n\nDo you really want to delete BOTH, the selected secret and public keys?</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineplus">+delete-pub-key = Do you want to delete the public key\n'{ $userId }'?</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineplus">+delete-selected-pub-key = Do you want to delete the public keys?</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineplus">+refresh-all-question = You did not select any key. Would you like to refresh ALL keys?</span>
<a href="#l8.53"></a><span id="l8.53" class="difflineplus">+key-man-button-export-sec-key = Export &amp;Secret Keys</span>
<a href="#l8.54"></a><span id="l8.54" class="difflineplus">+key-man-button-export-pub-key = Export &amp;Public Keys Only</span>
<a href="#l8.55"></a><span id="l8.55" class="difflineplus">+key-man-button-refresh-all = &amp;Refresh All Keys</span>
<a href="#l8.56"></a><span id="l8.56" class="difflineplus">+</span>
<a href="#l8.57"></a><span id="l8.57" class="difflineplus">+# Strings in keyObj.jsm</span>
<a href="#l8.58"></a><span id="l8.58" class="difflineplus">+key-ring-pub-key-revoked = The key { $userId } (key ID { $keyId }) is revoked.</span>
<a href="#l8.59"></a><span id="l8.59" class="difflineplus">+key-ring-pub-key-expired = The key { $userId } (key ID { $keyId }) has expired.</span>
<a href="#l8.60"></a><span id="l8.60" class="difflineplus">+key-ring-key-disabled = The key { $userId } (key ID { $keyId }) is disabled; it cannot be used.</span>
<a href="#l8.61"></a><span id="l8.61" class="difflineplus">+key-ring-key-invalid = The key { $userId } (key ID { $keyId }) is not valid. Please consider verifying it correctly.</span>
<a href="#l8.62"></a><span id="l8.62" class="difflineplus">+key-ring-key-not-trusted=The key { $userId } (key ID { $keyId }) is not trusted enough. Please set the trust level of your key to &quot;ultimate&quot; to use it for signing.</span>
<a href="#l8.63"></a><span id="l8.63" class="difflineplus">+key-ring-no-secret-key = You do not seem to have the secret key for { $userId } (key ID { $keyId }) on your keyring; you cannot use the key for signing.</span>
<a href="#l8.64"></a><span id="l8.64" class="difflineplus">+key-ring-pub-key-not-for-signing = The key { $userId } (key ID { $keyId }) cannot be used for signing.</span>
<a href="#l8.65"></a><span id="l8.65" class="difflineplus">+key-ring-pub-key-not-for-encryption = The key { $userId } (key ID { $keyId }) cannot be used for encryption.</span>
<a href="#l8.66"></a><span id="l8.66" class="difflineplus">+key-ring-sign-sub-keys-revoked = All signing-subkeys of key { $userId } (key ID { $keyId }) are revoked.</span>
<a href="#l8.67"></a><span id="l8.67" class="difflineplus">+key-ring-sign-sub-keys-expired = All signing-subkeys of key { $userId } (key ID { $keyId }) have expired.</span>
<a href="#l8.68"></a><span id="l8.68" class="difflineplus">+key-ring-sign-sub-keys-unusable = All signing-subkeys of key { $userId } (key ID { $keyId }) are revoked, expired or otherwise unusable.</span>
<a href="#l8.69"></a><span id="l8.69" class="difflineplus">+key-ring-enc-sub-keys-revoked = All encryption subkeys of key { $userId } (key ID { $keyId }) are revoked.</span>
<a href="#l8.70"></a><span id="l8.70" class="difflineplus">+key-ring-enc-sub-keys-expired = All encryption subkeys of key { $userId } (key ID { $keyId }) have expired.</span>
<a href="#l8.71"></a><span id="l8.71" class="difflineplus">+key-ring-enc-sub-keys-unusable = All encryption subkeys of key { $userId } (key ID { $keyId }) are revoked, expired or otherwise unusable.</span>
<a href="#l8.72"></a><span id="l8.72" class="difflineplus">+</span>
<a href="#l8.73"></a><span id="l8.73" class="difflineplus">+# Strings in gnupg-keylist.jsm</span>
<a href="#l8.74"></a><span id="l8.74" class="difflineplus">+keyring-photo = Photo</span>
<a href="#l8.75"></a><span id="l8.75" class="difflineplus">+</span>
<a href="#l8.76"></a><span id="l8.76" class="difflineplus">+# Strings in key.jsm</span>
<a href="#l8.77"></a><span id="l8.77" class="difflineplus">+revoke-key-question = You are about to revoke the key '{ $userId }'.\n\nYou will no longer be able to sign with this key, and once distributed, others will no longer be able to encrypt with that key. You can still use the key to decrypt old messages.\n\nDo you want to proceed?</span>
<a href="#l8.78"></a><span id="l8.78" class="difflineplus">+revoke-key-not-present = You have no key (0x{ $keyId }) which matches this revocation certificate!\n\nIf you have lost your key, you must import it (e.g. from a keyserver) before importing the revocation certificate!</span>
<a href="#l8.79"></a><span id="l8.79" class="difflineplus">+revoke-key-already-revoked = The key 0x{ $keyId } has already been revoked.</span>
<a href="#l8.80"></a><span id="l8.80" class="difflineplus">+key-man-button-revoke-key = &amp;Revoke Key</span>
<a href="#l8.81"></a><span id="l8.81" class="difflineplus">+</span>
<a href="#l8.82"></a><span id="l8.82" class="difflineplus">+# Strings in keyRing.jsm &amp; decryption.jsm</span>
<a href="#l8.83"></a><span id="l8.83" class="difflineplus">+key-man-button-import = &amp;Import</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/extensions/openpgp/content/strings/enigmail.properties</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/strings/enigmail.properties</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -393,46 +393,28 @@ exportSecretKey=Do you want to include t</span>
<a href="#l9.4"></a><span id="l9.4"> saveKeysOK=The keys were successfully saved</span>
<a href="#l9.5"></a><span id="l9.5"> saveKeysFailed=Saving the keys failed</span>
<a href="#l9.6"></a><span id="l9.6"> importKeysFailed=Importing the keys failed</span>
<a href="#l9.7"></a><span id="l9.7"> specificPubKeyFilename=%1$S (0x%2$S) pub</span>
<a href="#l9.8"></a><span id="l9.8"> specificPubSecKeyFilename=%1$S (0x%2$S) pub-sec</span>
<a href="#l9.9"></a><span id="l9.9"> defaultPubKeyFilename=Exported-public-keys</span>
<a href="#l9.10"></a><span id="l9.10"> defaultPubSecKeyFilename=Exported-public-and-secret-keys</span>
<a href="#l9.11"></a><span id="l9.11"> </span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-sendKeysOk=Key(s) sent successfully</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineminus">-sendKeysFailed=Sending of keys failed</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineminus">-receiveKeysOk=Key(s) updated successfully</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineminus">-receiveKeysFailed=Downloading of keys failed</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineplus">+### sendKeysOk=Key(s) sent successfully</span>
<a href="#l9.17"></a><span id="l9.17" class="difflineplus">+### sendKeysFailed=Sending of keys failed</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineplus">+### receiveKeysOk=Key(s) updated successfully</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineplus">+### receiveKeysFailed=Downloading of keys failed</span>
<a href="#l9.20"></a><span id="l9.20"> ### keyUpload.verifyEmails=The keyserver will send you an email for each email address of your uploaded key. To confirm publication of your key, you'll need to click on the link in each of the emails you'll receive.</span>
<a href="#l9.21"></a><span id="l9.21"> </span>
<a href="#l9.22"></a><span id="l9.22" class="difflineminus">-importFromClip=Do you want to import some key(s) from clipboard?</span>
<a href="#l9.23"></a><span id="l9.23" class="difflineminus">-importFromUrl=Download public key from this URL:</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineminus">-copyToClipbrdFailed=Could not copy the selected key(s) to the clipboard.</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineminus">-copyToClipbrdOK=Key(s) copied to clipboard</span>
<a href="#l9.26"></a><span id="l9.26" class="difflineminus">-</span>
<a href="#l9.27"></a><span id="l9.27" class="difflineminus">-deleteSecretKey=WARNING: You are about to delete a secret key!\nIf you delete your secret key, you will no longer be able to decrypt any messages encrypted for that key, nor will you be able to revoke it.\n\nDo you really want to delete BOTH, the secret key and the public key\n'%S'?</span>
<a href="#l9.28"></a><span id="l9.28" class="difflineminus">-deleteMix=WARNING: You are about to delete secret keys!\nIf you delete your secret key, you will no longer be able to decrypt any messages encrypted for that key.\n\nDo you really want to delete BOTH, the selected secret and public keys?</span>
<a href="#l9.29"></a><span id="l9.29" class="difflineminus">-deletePubKey=Do you want to delete the public key\n'%S'?</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineminus">-deleteSelectedPubKey=Do you want to delete the public keys?</span>
<a href="#l9.31"></a><span id="l9.31"> ### deleteKeyFailed=The key could not be deleted.</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineminus">-revokeKeyQuestion=You are about to revoke the key '%S'.\n\nYou will no longer be able to sign with this key, and once distributed, others will no longer be able to encrypt with that key. You can still use the key to decrypt old messages.\n\nDo you want to proceed?</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineminus">-revokeKeyOk=The key has been revoked. If your key is available on a key server, it is recommended to re-upload it, so that others can see the revocation.</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineplus">+### revokeKeyOk=The key has been revoked. If your key is available on a key server, it is recommended to re-upload it, so that others can see the revocation.</span>
<a href="#l9.35"></a><span id="l9.35"> ### revokeKeyFailed=The key could not be revoked.</span>
<a href="#l9.36"></a><span id="l9.36" class="difflineminus">-revokeKeyNotPresent=You have no key (0x%S) which matches this revocation certificate!\n\nIf you have lost your key, you must import it (e.g. from a keyserver) before importing the revocation certificate!</span>
<a href="#l9.37"></a><span id="l9.37" class="difflineminus">-revokeKeyAlreadyRevoked=The key 0x%S has already been revoked.</span>
<a href="#l9.38"></a><span id="l9.38" class="difflineminus">-refreshAllQuestion=You did not select any key. Would you like to refresh ALL keys?</span>
<a href="#l9.39"></a><span id="l9.39"> ### refreshKeyServiceOn.warn=Warning: Your keys are currently being refreshed in the background as safely as possible.\nRefreshing all your keys at once will unnecessarily reveal information about you.\nDo you really want to do this?</span>
<a href="#l9.40"></a><span id="l9.40"> ### refreshKey.warn=Warning: depending on the number of keys and the connection speed, refreshing all keys could be quite a lengthy process!</span>
<a href="#l9.41"></a><span id="l9.41"> ### downloadContactsKeys.importFrom=Import contacts from address book '%S'?</span>
<a href="#l9.42"></a><span id="l9.42" class="difflineminus">-keyMan.button.exportSecKey=Export &amp;Secret Keys</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineminus">-keyMan.button.exportPubKey=Export &amp;Public Keys Only</span>
<a href="#l9.44"></a><span id="l9.44" class="difflineminus">-keyMan.button.import=&amp;Import</span>
<a href="#l9.45"></a><span id="l9.45" class="difflineminus">-keyMan.button.refreshAll=&amp;Refresh All Keys</span>
<a href="#l9.46"></a><span id="l9.46" class="difflineminus">-keyMan.button.revokeKey=&amp;Revoke Key</span>
<a href="#l9.47"></a><span id="l9.47"> </span>
<a href="#l9.48"></a><span id="l9.48"> ### keylist.noOtherUids=Has no other identities</span>
<a href="#l9.49"></a><span id="l9.49"> ### keylist.hasOtherUids=Also known as</span>
<a href="#l9.50"></a><span id="l9.50"> ### keylist.noPhotos=No photo available</span>
<a href="#l9.51"></a><span id="l9.51"> ### keylist.hasPhotos=Photos</span>
<a href="#l9.52"></a><span id="l9.52"> </span>
<a href="#l9.53"></a><span id="l9.53"> ### keyMan.addphoto.filepicker.title=Select photo to add</span>
<a href="#l9.54"></a><span id="l9.54"> ### keyMan.addphoto.warnLargeFile=The file you have chosen is larger than 25 kB.\nIt is not recommended to add very large files as it causes very large keys.</span>
<a href="#l9.55"></a><span id="l9.55" class="difflineat">@@ -444,24 +426,16 @@ keyMan.button.revokeKey=&amp;Revoke Key</span>
<a href="#l9.56"></a><span id="l9.56"> </span>
<a href="#l9.57"></a><span id="l9.57"> # Strings in enigmailManageUidDlg.xhtml</span>
<a href="#l9.58"></a><span id="l9.58"> ### changePrimUidFailed=Changing the primary User ID failed</span>
<a href="#l9.59"></a><span id="l9.59"> ### changePrimUidOK=The primary user ID was changed successfully</span>
<a href="#l9.60"></a><span id="l9.60"> ### revokeUidFailed=Revoking the user ID %S failed</span>
<a href="#l9.61"></a><span id="l9.61"> ### revokeUidOK=User ID %S was revoked successfully. If your key is available on a key server, it is recommended to re-upload it, so that others can see the revocation.</span>
<a href="#l9.62"></a><span id="l9.62"> ### revokeUidQuestion=Do you really want to revoke the user ID %S?</span>
<a href="#l9.63"></a><span id="l9.63"> </span>
<a href="#l9.64"></a><span id="l9.64" class="difflineminus">-# Strings in enigmailKeyImportInfo.xhtml</span>
<a href="#l9.65"></a><span id="l9.65" class="difflineminus">-importInfoTitle=SUCCESS! Keys imported</span>
<a href="#l9.66"></a><span id="l9.66" class="difflineminus">-importInfoBits=Bits</span>
<a href="#l9.67"></a><span id="l9.67" class="difflineminus">-importInfoCreated=Created</span>
<a href="#l9.68"></a><span id="l9.68" class="difflineminus">-importInfoFpr=Fingerprint</span>
<a href="#l9.69"></a><span id="l9.69" class="difflineminus">-importInfoDetails2=View Details and manage key acceptance</span>
<a href="#l9.70"></a><span id="l9.70" class="difflineminus">-importInfoNoKeys=No keys imported.</span>
<a href="#l9.71"></a><span id="l9.71" class="difflineminus">-</span>
<a href="#l9.72"></a><span id="l9.72"> # Strings in enigmailGenCardKey.xhtml</span>
<a href="#l9.73"></a><span id="l9.73"> ### keygen.started=Please wait while the key is being generated ....</span>
<a href="#l9.74"></a><span id="l9.74"> ### keygen.completed=Key Generated. The new Key ID is: 0x%S</span>
<a href="#l9.75"></a><span id="l9.75"> ### keygen.keyBackup=The key is backed up as %S</span>
<a href="#l9.76"></a><span id="l9.76"> ### keygen.passRequired=Please specify a passphrase if you want to create a backup copy of your key outside your SmartCard.</span>
<a href="#l9.77"></a><span id="l9.77"> </span>
<a href="#l9.78"></a><span id="l9.78"> # Strings in enigmailSetCardPin.xhtml</span>
<a href="#l9.79"></a><span id="l9.79"> ### cardPin.processFailed=Failed to change PIN</span>
<a href="#l9.80"></a><span id="l9.80" class="difflineat">@@ -492,48 +466,20 @@ importInfoNoKeys=No keys imported.</span>
<a href="#l9.81"></a><span id="l9.81"> # Strings in enigmailCardDetails.js</span>
<a href="#l9.82"></a><span id="l9.82"> ### Carddetails.NoASCII=OpenPGP Smartcards only support ASCII characters in Firstname/Name.</span>
<a href="#l9.83"></a><span id="l9.83"> </span>
<a href="#l9.84"></a><span id="l9.84"> # network error types</span>
<a href="#l9.85"></a><span id="l9.85"> ### errorType.SecurityCertificate=The security certificate presented by the web service is not valid.</span>
<a href="#l9.86"></a><span id="l9.86"> ### errorType.SecurityProtocol=The security protocol used by the web service is unknown.</span>
<a href="#l9.87"></a><span id="l9.87"> ### errorType.Network=A network error has occurred.</span>
<a href="#l9.88"></a><span id="l9.88"> </span>
<a href="#l9.89"></a><span id="l9.89" class="difflineminus">-# filter stuff</span>
<a href="#l9.90"></a><span id="l9.90" class="difflineminus">-filter.folderRequired=You must select a target folder.</span>
<a href="#l9.91"></a><span id="l9.91" class="difflineminus">-filter.decryptMove2.label=Decrypt permanently (OpenPGP)</span>
<a href="#l9.92"></a><span id="l9.92" class="difflineminus">-filter.decryptCopy2.label=Create decrypted Copy (OpenPGP)</span>
<a href="#l9.93"></a><span id="l9.93" class="difflineminus">-filter.decryptMove.warnExperimental=Warning - the filter action &quot;Decrypt permanently&quot; may lead to destroyed messages.\n\nWe strongly recommend that you first try the &quot;Create decrypted Copy&quot; filter, test the result carefully, and only start using this filter once you are satisified with the result.</span>
<a href="#l9.94"></a><span id="l9.94" class="difflineminus">-filter.term.pgpencrypted.label=OpenPGP Encrypted</span>
<a href="#l9.95"></a><span id="l9.95" class="difflineminus">-filter.encrypt2.label=Encrypt to key (OpenPGP)</span>
<a href="#l9.96"></a><span id="l9.96" class="difflineminus">-filter.keyRequired=You must select a recipient key.</span>
<a href="#l9.97"></a><span id="l9.97" class="difflineminus">-filter.keyNotFound=Could not find an encryption key for '%S'.</span>
<a href="#l9.98"></a><span id="l9.98" class="difflineminus">-filter.warn.keyNotSecret=Warning - the filter action &quot;Encrypt to key&quot; replaces the recipients.\n\nIf you do not have the secret key for '%S' you will no longer be able to read the emails.</span>
<a href="#l9.99"></a><span id="l9.99" class="difflineminus">-</span>
<a href="#l9.100"></a><span id="l9.100"> ### converter.decryptAtt.failed=Could not decrypt attachment '%1$S'\nof message with subject\n'%2$S'.\nDo you want to retry with a different passphrase or do you want to skip the message?</span>
<a href="#l9.101"></a><span id="l9.101"> </span>
<a href="#l9.102"></a><span id="l9.102"> ### saveLogFile.title=Save Log File</span>
<a href="#l9.103"></a><span id="l9.103"> </span>
<a href="#l9.104"></a><span id="l9.104" class="difflineminus">-# strings in keyRing.jsm</span>
<a href="#l9.105"></a><span id="l9.105" class="difflineminus">-keyring.photo=Photo</span>
<a href="#l9.106"></a><span id="l9.106" class="difflineminus">-keyRing.pubKeyRevoked=The key %1$S (key ID %2$S) is revoked.</span>
<a href="#l9.107"></a><span id="l9.107" class="difflineminus">-keyRing.pubKeyExpired=The key %1$S (key ID %2$S) has expired.</span>
<a href="#l9.108"></a><span id="l9.108" class="difflineminus">-keyRing.pubKeyNotForSigning=The key %1$S (key ID %2$S) cannot be used for signing.</span>
<a href="#l9.109"></a><span id="l9.109" class="difflineminus">-keyRing.pubKeyNotForEncryption=The key %1$S (key ID %2$S) cannot be used for encryption.</span>
<a href="#l9.110"></a><span id="l9.110" class="difflineminus">-keyRing.keyDisabled=The key %1$S (key ID %2$S) is disabled; it cannot be used.</span>
<a href="#l9.111"></a><span id="l9.111" class="difflineminus">-keyRing.keyNotTrusted=The key %1$S (key ID %2$S) is not trusted enough. Please set the trust level of your key to &quot;ultimate&quot; to use it for signing.</span>
<a href="#l9.112"></a><span id="l9.112" class="difflineminus">-keyRing.keyInvalid2=The key %1$S (key ID %2$S) is not valid. Please consider verifying it correctly.</span>
<a href="#l9.113"></a><span id="l9.113" class="difflineminus">-keyRing.signSubKeysRevoked=All signing-subkeys of key %1$S (key ID %2$S) are revoked.</span>
<a href="#l9.114"></a><span id="l9.114" class="difflineminus">-keyRing.signSubKeysExpired=All signing-subkeys of key %1$S (key ID %2$S) have expired.</span>
<a href="#l9.115"></a><span id="l9.115" class="difflineminus">-keyRing.signSubKeysUnusable=All signing-subkeys of key %1$S (key ID %2$S) are revoked, expired or otherwise unusable.</span>
<a href="#l9.116"></a><span id="l9.116" class="difflineminus">-keyRing.encSubKeysRevoked=All encryption subkeys of key %1$S (key ID %2$S) are revoked.</span>
<a href="#l9.117"></a><span id="l9.117" class="difflineminus">-keyRing.encSubKeysExpired=All encryption subkeys of key %1$S (key ID %2$S) have expired.</span>
<a href="#l9.118"></a><span id="l9.118" class="difflineminus">-keyRing.noSecretKey=You do not seem to have the secret key for %1$S (key ID %2$S) on your keyring; you cannot use the key for signing.</span>
<a href="#l9.119"></a><span id="l9.119" class="difflineminus">-keyRing.encSubKeysUnusable=All encryption subkeys of key %1$S (key ID %2$S) are revoked, expired or otherwise unusable.</span>
<a href="#l9.120"></a><span id="l9.120" class="difflineminus">-</span>
<a href="#l9.121"></a><span id="l9.121"> #strings in exportSettingsWizard.js</span>
<a href="#l9.122"></a><span id="l9.122"> ### cannotWriteToFile=Cannot save to file '%S'. Please select a different file.</span>
<a href="#l9.123"></a><span id="l9.123"> ### dataExportError=An error occurred during exporting your data.</span>
<a href="#l9.124"></a><span id="l9.124"> ### specifyExportFile=Specify file name for exporting</span>
<a href="#l9.125"></a><span id="l9.125"> ### homedirParamNotSUpported=Additional parameters that configure paths such as --homedir and --keyring are not supported for exporting/restoring your settings. Please use alternative methods such as setting the environment variable GNUPGHOME.</span>
<a href="#l9.126"></a><span id="l9.126"> </span>
<a href="#l9.127"></a><span id="l9.127"> #strings in gpgAgent.jsm</span>
<a href="#l9.128"></a><span id="l9.128"> ### gpghomedir.notexists=The directory '%S' containing your OpenPGP keys does not exist and cannot be created.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailKeyImportInfo.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailKeyImportInfo.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -30,17 +30,17 @@ function onLoad() {</span>
<a href="#l10.4"></a><span id="l10.4">   var dlg = document.getElementById(&quot;enigmailKeyImportInfo&quot;);</span>
<a href="#l10.5"></a><span id="l10.5"> </span>
<a href="#l10.6"></a><span id="l10.6">   let i, keys;</span>
<a href="#l10.7"></a><span id="l10.7"> </span>
<a href="#l10.8"></a><span id="l10.8">   dlg.getButton(&quot;help&quot;).setAttribute(&quot;hidden&quot;, &quot;true&quot;);</span>
<a href="#l10.9"></a><span id="l10.9">   dlg.getButton(&quot;cancel&quot;).setAttribute(&quot;hidden&quot;, &quot;true&quot;);</span>
<a href="#l10.10"></a><span id="l10.10">   dlg.getButton(&quot;extra1&quot;).setAttribute(&quot;hidden&quot;, &quot;true&quot;);</span>
<a href="#l10.11"></a><span id="l10.11">   dlg.getButton(&quot;extra2&quot;).setAttribute(&quot;hidden&quot;, &quot;true&quot;);</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-  dlg.setAttribute(&quot;title&quot;, EnigmailLocale.getString(&quot;importInfoTitle&quot;));</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+  document.l10n.setAttributes(dlg, &quot;import-info-title&quot;);</span>
<a href="#l10.14"></a><span id="l10.14"> </span>
<a href="#l10.15"></a><span id="l10.15">   if (window.screen.width &gt; 500) {</span>
<a href="#l10.16"></a><span id="l10.16">     dlg.setAttribute(&quot;maxwidth&quot;, window.screen.width - 150);</span>
<a href="#l10.17"></a><span id="l10.17">   }</span>
<a href="#l10.18"></a><span id="l10.18"> </span>
<a href="#l10.19"></a><span id="l10.19">   if (window.screen.height &gt; 300) {</span>
<a href="#l10.20"></a><span id="l10.20">     dlg.setAttribute(&quot;maxheight&quot;, window.screen.height - 100);</span>
<a href="#l10.21"></a><span id="l10.21">   }</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineat">@@ -88,18 +88,20 @@ function onLoad() {</span>
<a href="#l10.23"></a><span id="l10.23">       }</span>
<a href="#l10.24"></a><span id="l10.24">       keysRow.appendChild(keys[i]);</span>
<a href="#l10.25"></a><span id="l10.25">     }</span>
<a href="#l10.26"></a><span id="l10.26"> </span>
<a href="#l10.27"></a><span id="l10.27">     keysGrid.appendChild(keysRows);</span>
<a href="#l10.28"></a><span id="l10.28">     keysGrid.appendChild(keysCols);</span>
<a href="#l10.29"></a><span id="l10.29">     keysInfoBox.appendChild(keysGrid);</span>
<a href="#l10.30"></a><span id="l10.30">   } else {</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineminus">-    EnigmailDialog.alert(window, EnigmailLocale.getString(&quot;importInfoNoKeys&quot;));</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineminus">-    EnigmailEvents.dispatchEvent(window.close, 0);</span>
<a href="#l10.33"></a><span id="l10.33" class="difflineplus">+    document.l10n.formatValue(&quot;import-info-no-keys&quot;).then(value =&gt; {</span>
<a href="#l10.34"></a><span id="l10.34" class="difflineplus">+      EnigmailDialog.alert(window, value);</span>
<a href="#l10.35"></a><span id="l10.35" class="difflineplus">+      EnigmailEvents.dispatchEvent(window.close, 0);</span>
<a href="#l10.36"></a><span id="l10.36" class="difflineplus">+    });</span>
<a href="#l10.37"></a><span id="l10.37">     return;</span>
<a href="#l10.38"></a><span id="l10.38">   }</span>
<a href="#l10.39"></a><span id="l10.39"> </span>
<a href="#l10.40"></a><span id="l10.40">   EnigmailEvents.dispatchEvent(resizeDlg, 0);</span>
<a href="#l10.41"></a><span id="l10.41"> }</span>
<a href="#l10.42"></a><span id="l10.42"> </span>
<a href="#l10.43"></a><span id="l10.43"> function buildKeyGroupBox(keyObj) {</span>
<a href="#l10.44"></a><span id="l10.44">   let i,</span>
<a href="#l10.45"></a><span id="l10.45" class="difflineat">@@ -127,21 +129,19 @@ function buildKeyGroupBox(keyObj) {</span>
<a href="#l10.46"></a><span id="l10.46">     fprRow1 = document.createXULElement(&quot;row&quot;),</span>
<a href="#l10.47"></a><span id="l10.47">     fprRow2 = document.createXULElement(&quot;row&quot;);</span>
<a href="#l10.48"></a><span id="l10.48"> </span>
<a href="#l10.49"></a><span id="l10.49">   groupBox.setAttribute(&quot;class&quot;, &quot;enigmailGroupbox&quot;);</span>
<a href="#l10.50"></a><span id="l10.50">   userid.setAttribute(&quot;value&quot;, keyObj.userId);</span>
<a href="#l10.51"></a><span id="l10.51">   userid.setAttribute(&quot;class&quot;, &quot;enigmailKeyImportUserId&quot;);</span>
<a href="#l10.52"></a><span id="l10.52">   vbox.setAttribute(&quot;align&quot;, &quot;start&quot;);</span>
<a href="#l10.53"></a><span id="l10.53">   //caption.setAttribute(&quot;class&quot;, &quot;enigmailKeyImportCaption&quot;);</span>
<a href="#l10.54"></a><span id="l10.54" class="difflineminus">-  infoLabelH1.setAttribute(&quot;value&quot;, EnigmailLocale.getString(&quot;importInfoBits&quot;));</span>
<a href="#l10.55"></a><span id="l10.55" class="difflineminus">-  infoLabelH2.setAttribute(</span>
<a href="#l10.56"></a><span id="l10.56" class="difflineminus">-    &quot;value&quot;,</span>
<a href="#l10.57"></a><span id="l10.57" class="difflineminus">-    EnigmailLocale.getString(&quot;importInfoCreated&quot;)</span>
<a href="#l10.58"></a><span id="l10.58" class="difflineminus">-  );</span>
<a href="#l10.59"></a><span id="l10.59" class="difflineplus">+  document.l10n.setAttributes(infoLabelH1, &quot;import-info-bits&quot;);</span>
<a href="#l10.60"></a><span id="l10.60" class="difflineplus">+</span>
<a href="#l10.61"></a><span id="l10.61" class="difflineplus">+  document.l10n.setAttributes(infoLabelH2, &quot;import-info-created&quot;);</span>
<a href="#l10.62"></a><span id="l10.62">   infoLabelH3.setAttribute(&quot;value&quot;, &quot;&quot;);</span>
<a href="#l10.63"></a><span id="l10.63">   infoLabelB1.setAttribute(&quot;value&quot;, keyObj.keySize);</span>
<a href="#l10.64"></a><span id="l10.64">   infoLabelB2.setAttribute(&quot;value&quot;, keyObj.created);</span>
<a href="#l10.65"></a><span id="l10.65"> </span>
<a href="#l10.66"></a><span id="l10.66">   infoRowHead.appendChild(infoLabelH1);</span>
<a href="#l10.67"></a><span id="l10.67">   infoRowHead.appendChild(infoLabelH2);</span>
<a href="#l10.68"></a><span id="l10.68">   infoRowHead.appendChild(infoLabelH3);</span>
<a href="#l10.69"></a><span id="l10.69">   infoRowHead.setAttribute(&quot;class&quot;, &quot;enigmailKeyImportHeader&quot;);</span>
<a href="#l10.70"></a><span id="l10.70" class="difflineat">@@ -149,17 +149,18 @@ function buildKeyGroupBox(keyObj) {</span>
<a href="#l10.71"></a><span id="l10.71">   infoRowBody.appendChild(infoLabelB2);</span>
<a href="#l10.72"></a><span id="l10.72">   infoRows.appendChild(infoRowHead);</span>
<a href="#l10.73"></a><span id="l10.73">   infoRows.appendChild(infoRowBody);</span>
<a href="#l10.74"></a><span id="l10.74">   infoColumns.appendChild(infoColId);</span>
<a href="#l10.75"></a><span id="l10.75">   infoColumns.appendChild(infoColDate);</span>
<a href="#l10.76"></a><span id="l10.76">   infoGrid.appendChild(infoColumns);</span>
<a href="#l10.77"></a><span id="l10.77">   infoGrid.appendChild(infoRows);</span>
<a href="#l10.78"></a><span id="l10.78"> </span>
<a href="#l10.79"></a><span id="l10.79" class="difflineminus">-  fprLabel.setAttribute(&quot;value&quot;, EnigmailLocale.getString(&quot;importInfoFpr&quot;));</span>
<a href="#l10.80"></a><span id="l10.80" class="difflineplus">+  document.l10n.setAttributes(fprLabel, &quot;import-info-fpr&quot;);</span>
<a href="#l10.81"></a><span id="l10.81" class="difflineplus">+</span>
<a href="#l10.82"></a><span id="l10.82">   fprLabel.setAttribute(&quot;class&quot;, &quot;enigmailKeyImportHeader&quot;);</span>
<a href="#l10.83"></a><span id="l10.83">   for (i = 0; i &lt; keyObj.fpr.length; i += 4) {</span>
<a href="#l10.84"></a><span id="l10.84">     var label = document.createXULElement(&quot;label&quot;);</span>
<a href="#l10.85"></a><span id="l10.85">     label.setAttribute(&quot;value&quot;, keyObj.fpr.substr(i, 4));</span>
<a href="#l10.86"></a><span id="l10.86">     if (i &lt; keyObj.fpr.length / 2) {</span>
<a href="#l10.87"></a><span id="l10.87">       fprColumns.appendChild(document.createXULElement(&quot;column&quot;));</span>
<a href="#l10.88"></a><span id="l10.88">       fprRow1.appendChild(label);</span>
<a href="#l10.89"></a><span id="l10.89">     } else {</span>
<a href="#l10.90"></a><span id="l10.90" class="difflineat">@@ -173,20 +174,17 @@ function buildKeyGroupBox(keyObj) {</span>
<a href="#l10.91"></a><span id="l10.91">   fprGrid.appendChild(fprRows);</span>
<a href="#l10.92"></a><span id="l10.92">   //vbox.appendChild(caption);</span>
<a href="#l10.93"></a><span id="l10.93">   groupBox.appendChild(vbox);</span>
<a href="#l10.94"></a><span id="l10.94">   groupBox.appendChild(userid);</span>
<a href="#l10.95"></a><span id="l10.95">   groupBox.appendChild(infoGrid);</span>
<a href="#l10.96"></a><span id="l10.96">   groupBox.appendChild(fprLabel);</span>
<a href="#l10.97"></a><span id="l10.97">   groupBox.appendChild(fprGrid);</span>
<a href="#l10.98"></a><span id="l10.98"> </span>
<a href="#l10.99"></a><span id="l10.99" class="difflineminus">-  infoLabelB3.setAttribute(</span>
<a href="#l10.100"></a><span id="l10.100" class="difflineminus">-    &quot;value&quot;,</span>
<a href="#l10.101"></a><span id="l10.101" class="difflineminus">-    EnigmailLocale.getString(&quot;importInfoDetails2&quot;)</span>
<a href="#l10.102"></a><span id="l10.102" class="difflineminus">-  );</span>
<a href="#l10.103"></a><span id="l10.103" class="difflineplus">+  document.l10n.setAttributes(infoLabelB3, &quot;import-info-details&quot;);</span>
<a href="#l10.104"></a><span id="l10.104">   infoLabelB3.setAttribute(&quot;keyid&quot;, keyObj.keyId);</span>
<a href="#l10.105"></a><span id="l10.105">   infoLabelB3.setAttribute(&quot;class&quot;, &quot;enigmailKeyImportDetails&quot;);</span>
<a href="#l10.106"></a><span id="l10.106">   groupBox.appendChild(infoLabelB3);</span>
<a href="#l10.107"></a><span id="l10.107"> </span>
<a href="#l10.108"></a><span id="l10.108">   return groupBox;</span>
<a href="#l10.109"></a><span id="l10.109"> }</span>
<a href="#l10.110"></a><span id="l10.110"> </span>
<a href="#l10.111"></a><span id="l10.111"> function resizeDlg() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/extensions/openpgp/content/ui/enigmailKeyManager.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/extensions/openpgp/content/ui/enigmailKeyManager.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -54,16 +54,18 @@ var { EnigmailSearchCallback } = ChromeU</span>
<a href="#l11.4"></a><span id="l11.4"> );</span>
<a href="#l11.5"></a><span id="l11.5"> var { EnigmailCompat } = ChromeUtils.import(</span>
<a href="#l11.6"></a><span id="l11.6">   &quot;chrome://openpgp/content/modules/compat.jsm&quot;</span>
<a href="#l11.7"></a><span id="l11.7"> );</span>
<a href="#l11.8"></a><span id="l11.8"> var { EnigmailCryptoAPI } = ChromeUtils.import(</span>
<a href="#l11.9"></a><span id="l11.9">   &quot;chrome://openpgp/content/modules/cryptoAPI.jsm&quot;</span>
<a href="#l11.10"></a><span id="l11.10"> );</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineplus">+var l10n = new Localization([&quot;messenger/openpgp/enigmail.ftl&quot;], true);</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+</span>
<a href="#l11.14"></a><span id="l11.14"> const INPUT = 0;</span>
<a href="#l11.15"></a><span id="l11.15"> const RESULT = 1;</span>
<a href="#l11.16"></a><span id="l11.16"> </span>
<a href="#l11.17"></a><span id="l11.17"> var gUserList;</span>
<a href="#l11.18"></a><span id="l11.18"> var gKeyList;</span>
<a href="#l11.19"></a><span id="l11.19"> var gEnigLastSelectedKeys = null;</span>
<a href="#l11.20"></a><span id="l11.20"> var gKeySortList = null;</span>
<a href="#l11.21"></a><span id="l11.21"> var gSearchInput = null;</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineat">@@ -301,51 +303,55 @@ function enigmailDeleteKey() {</span>
<a href="#l11.23"></a><span id="l11.23">   }</span>
<a href="#l11.24"></a><span id="l11.24"> </span>
<a href="#l11.25"></a><span id="l11.25">   if (keyList.length == 1) {</span>
<a href="#l11.26"></a><span id="l11.26">     // one key selected</span>
<a href="#l11.27"></a><span id="l11.27">     var userId = gKeyList[keyList[0]].userId;</span>
<a href="#l11.28"></a><span id="l11.28">     if (gKeyList[keyList[0]].secretAvailable) {</span>
<a href="#l11.29"></a><span id="l11.29">       if (</span>
<a href="#l11.30"></a><span id="l11.30">         !EnigConfirm(</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-          EnigGetString(&quot;deleteSecretKey&quot;, userId),</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+          l10n.formatValueSync(&quot;delete-secret-key&quot;, {</span>
<a href="#l11.33"></a><span id="l11.33" class="difflineplus">+            userId,</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineplus">+          }),</span>
<a href="#l11.35"></a><span id="l11.35">           EnigGetString(&quot;dlg.button.delete&quot;)</span>
<a href="#l11.36"></a><span id="l11.36">         )</span>
<a href="#l11.37"></a><span id="l11.37">       ) {</span>
<a href="#l11.38"></a><span id="l11.38">         return;</span>
<a href="#l11.39"></a><span id="l11.39">       }</span>
<a href="#l11.40"></a><span id="l11.40">       deleteSecret = true;</span>
<a href="#l11.41"></a><span id="l11.41">     } else if (</span>
<a href="#l11.42"></a><span id="l11.42">       !EnigConfirm(</span>
<a href="#l11.43"></a><span id="l11.43" class="difflineminus">-        EnigGetString(&quot;deletePubKey&quot;, userId),</span>
<a href="#l11.44"></a><span id="l11.44" class="difflineplus">+        l10n.formatValueSync(&quot;delete-pub-key&quot;, {</span>
<a href="#l11.45"></a><span id="l11.45" class="difflineplus">+          userId,</span>
<a href="#l11.46"></a><span id="l11.46" class="difflineplus">+        }),</span>
<a href="#l11.47"></a><span id="l11.47">         EnigGetString(&quot;dlg.button.delete&quot;)</span>
<a href="#l11.48"></a><span id="l11.48">       )</span>
<a href="#l11.49"></a><span id="l11.49">     ) {</span>
<a href="#l11.50"></a><span id="l11.50">       return;</span>
<a href="#l11.51"></a><span id="l11.51">     }</span>
<a href="#l11.52"></a><span id="l11.52">   } else {</span>
<a href="#l11.53"></a><span id="l11.53">     // several keys selected</span>
<a href="#l11.54"></a><span id="l11.54">     for (var i = 0; i &lt; keyList.length; i++) {</span>
<a href="#l11.55"></a><span id="l11.55">       if (gKeyList[keyList[i]].secretAvailable) {</span>
<a href="#l11.56"></a><span id="l11.56">         deleteSecret = true;</span>
<a href="#l11.57"></a><span id="l11.57">       }</span>
<a href="#l11.58"></a><span id="l11.58">     }</span>
<a href="#l11.59"></a><span id="l11.59"> </span>
<a href="#l11.60"></a><span id="l11.60">     if (deleteSecret) {</span>
<a href="#l11.61"></a><span id="l11.61">       if (</span>
<a href="#l11.62"></a><span id="l11.62">         !EnigConfirm(</span>
<a href="#l11.63"></a><span id="l11.63" class="difflineminus">-          EnigGetString(&quot;deleteMix&quot;),</span>
<a href="#l11.64"></a><span id="l11.64" class="difflineplus">+          l10n.formatValueSync(&quot;delete-mix&quot;),</span>
<a href="#l11.65"></a><span id="l11.65">           EnigGetString(&quot;dlg.button.delete&quot;)</span>
<a href="#l11.66"></a><span id="l11.66">         )</span>
<a href="#l11.67"></a><span id="l11.67">       ) {</span>
<a href="#l11.68"></a><span id="l11.68">         return;</span>
<a href="#l11.69"></a><span id="l11.69">       }</span>
<a href="#l11.70"></a><span id="l11.70">     } else if (</span>
<a href="#l11.71"></a><span id="l11.71">       !EnigConfirm(</span>
<a href="#l11.72"></a><span id="l11.72" class="difflineminus">-        EnigGetString(&quot;deleteSelectedPubKey&quot;),</span>
<a href="#l11.73"></a><span id="l11.73" class="difflineplus">+        l10n.formatValueSync(&quot;deleteSelectedPubKey&quot;),</span>
<a href="#l11.74"></a><span id="l11.74">         EnigGetString(&quot;dlg.button.delete&quot;)</span>
<a href="#l11.75"></a><span id="l11.75">       )</span>
<a href="#l11.76"></a><span id="l11.76">     ) {</span>
<a href="#l11.77"></a><span id="l11.77">       return;</span>
<a href="#l11.78"></a><span id="l11.78">     }</span>
<a href="#l11.79"></a><span id="l11.79">   }</span>
<a href="#l11.80"></a><span id="l11.80"> </span>
<a href="#l11.81"></a><span id="l11.81">   const cApi = EnigmailCryptoAPI();</span>
<a href="#l11.82"></a><span id="l11.82" class="difflineat">@@ -587,18 +593,18 @@ function enigmailExportKeys() {</span>
<a href="#l11.83"></a><span id="l11.83">   }</span>
<a href="#l11.84"></a><span id="l11.84"> </span>
<a href="#l11.85"></a><span id="l11.85">   var exportSecretKey = false;</span>
<a href="#l11.86"></a><span id="l11.86">   if (secretFound) {</span>
<a href="#l11.87"></a><span id="l11.87">     // double check that also the pivate keys shall be exportet</span>
<a href="#l11.88"></a><span id="l11.88">     var r = EnigmailDialog.msgBox(window, {</span>
<a href="#l11.89"></a><span id="l11.89">       msgtext: EnigGetString(&quot;exportSecretKey&quot;),</span>
<a href="#l11.90"></a><span id="l11.90">       dialogTitle: EnigGetString(&quot;enigConfirm2&quot;),</span>
<a href="#l11.91"></a><span id="l11.91" class="difflineminus">-      button1: EnigGetString(&quot;keyMan.button.exportPubKey&quot;),</span>
<a href="#l11.92"></a><span id="l11.92" class="difflineminus">-      button2: EnigGetString(&quot;keyMan.button.exportSecKey&quot;),</span>
<a href="#l11.93"></a><span id="l11.93" class="difflineplus">+      button1: l10n.formatValueSync(&quot;key-man-button-export-pub-key&quot;),</span>
<a href="#l11.94"></a><span id="l11.94" class="difflineplus">+      button2: l10n.formatValueSync(&quot;key-man-button-export-sec-key&quot;),</span>
<a href="#l11.95"></a><span id="l11.95">       cancelButton: &quot;:cancel&quot;,</span>
<a href="#l11.96"></a><span id="l11.96">       iconType: EnigmailConstants.ICONTYPE_QUESTION,</span>
<a href="#l11.97"></a><span id="l11.97">     });</span>
<a href="#l11.98"></a><span id="l11.98">     switch (r) {</span>
<a href="#l11.99"></a><span id="l11.99">       case 0: // export pub key only</span>
<a href="#l11.100"></a><span id="l11.100">         break;</span>
<a href="#l11.101"></a><span id="l11.101">       case 1: // export secret key</span>
<a href="#l11.102"></a><span id="l11.102">         exportSecretKey = true;</span>
<a href="#l11.103"></a><span id="l11.103" class="difflineat">@@ -719,18 +725,18 @@ function enigGetClipboard() {</span>
<a href="#l11.104"></a><span id="l11.104"> function enigmailImportFromClipbrd() {</span>
<a href="#l11.105"></a><span id="l11.105">   var enigmailSvc = GetEnigmailSvc();</span>
<a href="#l11.106"></a><span id="l11.106">   if (!enigmailSvc) {</span>
<a href="#l11.107"></a><span id="l11.107">     return;</span>
<a href="#l11.108"></a><span id="l11.108">   }</span>
<a href="#l11.109"></a><span id="l11.109"> </span>
<a href="#l11.110"></a><span id="l11.110">   if (</span>
<a href="#l11.111"></a><span id="l11.111">     !EnigConfirm(</span>
<a href="#l11.112"></a><span id="l11.112" class="difflineminus">-      EnigGetString(&quot;importFromClip&quot;),</span>
<a href="#l11.113"></a><span id="l11.113" class="difflineminus">-      EnigGetString(&quot;keyMan.button.import&quot;)</span>
<a href="#l11.114"></a><span id="l11.114" class="difflineplus">+      l10n.formatValueSync(&quot;import-from-clip&quot;),</span>
<a href="#l11.115"></a><span id="l11.115" class="difflineplus">+      l10n.formatValueSync(&quot;key-man-button-import&quot;)</span>
<a href="#l11.116"></a><span id="l11.116">     )</span>
<a href="#l11.117"></a><span id="l11.117">   ) {</span>
<a href="#l11.118"></a><span id="l11.118">     return;</span>
<a href="#l11.119"></a><span id="l11.119">   }</span>
<a href="#l11.120"></a><span id="l11.120"> </span>
<a href="#l11.121"></a><span id="l11.121">   var cBoardContent = enigGetClipboard();</span>
<a href="#l11.122"></a><span id="l11.122">   var errorMsgObj = {};</span>
<a href="#l11.123"></a><span id="l11.123">   var preview = EnigmailKey.getKeyListFromKeyBlock(</span>
<a href="#l11.124"></a><span id="l11.124" class="difflineat">@@ -817,19 +823,23 @@ function enigmailCopyToClipbrd() {</span>
<a href="#l11.125"></a><span id="l11.125">       EnigGetString(&quot;copyToClipbrdFailed&quot;) + &quot;\n\n&quot; + errorMsgObj.value</span>
<a href="#l11.126"></a><span id="l11.126">     );</span>
<a href="#l11.127"></a><span id="l11.127">     return;</span>
<a href="#l11.128"></a><span id="l11.128">   }</span>
<a href="#l11.129"></a><span id="l11.129">   if (EnigmailClipboard.setClipboardContent(keyData)) {</span>
<a href="#l11.130"></a><span id="l11.130">     EnigmailLog.DEBUG(</span>
<a href="#l11.131"></a><span id="l11.131">       &quot;enigmailKeyManager.js: enigmailImportFromClipbrd: set clipboard data\n&quot;</span>
<a href="#l11.132"></a><span id="l11.132">     );</span>
<a href="#l11.133"></a><span id="l11.133" class="difflineminus">-    EnigmailDialog.info(window, EnigGetString(&quot;copyToClipbrdOK&quot;));</span>
<a href="#l11.134"></a><span id="l11.134" class="difflineplus">+    l10n.formatValue(&quot;copy-to-clipbrd-ok&quot;).then(value =&gt; {</span>
<a href="#l11.135"></a><span id="l11.135" class="difflineplus">+      EnigmailDialog.info(window, value);</span>
<a href="#l11.136"></a><span id="l11.136" class="difflineplus">+    });</span>
<a href="#l11.137"></a><span id="l11.137">   } else {</span>
<a href="#l11.138"></a><span id="l11.138" class="difflineminus">-    EnigAlert(EnigGetString(&quot;copyToClipbrdFailed&quot;));</span>
<a href="#l11.139"></a><span id="l11.139" class="difflineplus">+    l10n.formatValue(&quot;copy-to-clipbrd-failed&quot;).then(value =&gt; {</span>
<a href="#l11.140"></a><span id="l11.140" class="difflineplus">+      EnigAlert(value);</span>
<a href="#l11.141"></a><span id="l11.141" class="difflineplus">+    });</span>
<a href="#l11.142"></a><span id="l11.142">   }</span>
<a href="#l11.143"></a><span id="l11.143"> }</span>
<a href="#l11.144"></a><span id="l11.144"> </span>
<a href="#l11.145"></a><span id="l11.145"> /*</span>
<a href="#l11.146"></a><span id="l11.146"> function enigmailSearchKey() {</span>
<a href="#l11.147"></a><span id="l11.147">   var inputObj = {</span>
<a href="#l11.148"></a><span id="l11.148">     searchList: null,</span>
<a href="#l11.149"></a><span id="l11.149">   };</span>
<a href="#l11.150"></a><span id="l11.150" class="difflineat">@@ -1053,17 +1063,21 @@ function enigmailReceiveKeyCb(exitCode, </span>
<a href="#l11.151"></a><span id="l11.151"> }</span>
<a href="#l11.152"></a><span id="l11.152"> */</span>
<a href="#l11.153"></a><span id="l11.153"> </span>
<a href="#l11.154"></a><span id="l11.154"> function enigmailImportKeysFromUrl() {</span>
<a href="#l11.155"></a><span id="l11.155">   var value = {</span>
<a href="#l11.156"></a><span id="l11.156">     value: &quot;&quot;,</span>
<a href="#l11.157"></a><span id="l11.157">   };</span>
<a href="#l11.158"></a><span id="l11.158">   if (</span>
<a href="#l11.159"></a><span id="l11.159" class="difflineminus">-    EnigmailDialog.promptValue(window, EnigGetString(&quot;importFromUrl&quot;), value)</span>
<a href="#l11.160"></a><span id="l11.160" class="difflineplus">+    EnigmailDialog.promptValue(</span>
<a href="#l11.161"></a><span id="l11.161" class="difflineplus">+      window,</span>
<a href="#l11.162"></a><span id="l11.162" class="difflineplus">+      l10n.formatValueSync(&quot;import-from-url&quot;),</span>
<a href="#l11.163"></a><span id="l11.163" class="difflineplus">+      value</span>
<a href="#l11.164"></a><span id="l11.164" class="difflineplus">+    )</span>
<a href="#l11.165"></a><span id="l11.165">   ) {</span>
<a href="#l11.166"></a><span id="l11.166">     var p = new Promise(function(resolve, reject) {</span>
<a href="#l11.167"></a><span id="l11.167">       var cbFunc = function(data) {</span>
<a href="#l11.168"></a><span id="l11.168">         EnigmailLog.DEBUG(&quot;enigmailImportKeysFromUrl: _cbFunc()\n&quot;);</span>
<a href="#l11.169"></a><span id="l11.169">         var errorMsgObj = {};</span>
<a href="#l11.170"></a><span id="l11.170"> </span>
<a href="#l11.171"></a><span id="l11.171">         var preview = EnigmailKey.getKeyListFromKeyBlock(</span>
<a href="#l11.172"></a><span id="l11.172">           data,</span>
<a href="#l11.173"></a><span id="l11.173" class="difflineat">@@ -1213,18 +1227,18 @@ function accessKeyServer(accessType, cal</span>
<a href="#l11.174"></a><span id="l11.174">   for (let i = 0; i &lt; selKeyList.length; i++) {</span>
<a href="#l11.175"></a><span id="l11.175">     keyList.push(gKeyList[selKeyList[i]]);</span>
<a href="#l11.176"></a><span id="l11.176">   }</span>
<a href="#l11.177"></a><span id="l11.177"> </span>
<a href="#l11.178"></a><span id="l11.178">   if (accessType !== EnigmailConstants.REFRESH_KEY &amp;&amp; selKeyList.length === 0) {</span>
<a href="#l11.179"></a><span id="l11.179">     if (</span>
<a href="#l11.180"></a><span id="l11.180">       EnigmailDialog.confirmDlg(</span>
<a href="#l11.181"></a><span id="l11.181">         window,</span>
<a href="#l11.182"></a><span id="l11.182" class="difflineminus">-        EnigmailLocale.getString(&quot;refreshAllQuestion&quot;),</span>
<a href="#l11.183"></a><span id="l11.183" class="difflineminus">-        EnigmailLocale.getString(&quot;keyMan.button.refreshAll&quot;)</span>
<a href="#l11.184"></a><span id="l11.184" class="difflineplus">+        l10n.formatValueSync(&quot;refresh-all-question&quot;),</span>
<a href="#l11.185"></a><span id="l11.185" class="difflineplus">+        l10n.formatValueSync(&quot;key-man-button-refresh-all&quot;)</span>
<a href="#l11.186"></a><span id="l11.186">       )</span>
<a href="#l11.187"></a><span id="l11.187">     ) {</span>
<a href="#l11.188"></a><span id="l11.188">       accessType = EnigmailConstants.DOWNLOAD_KEY;</span>
<a href="#l11.189"></a><span id="l11.189">       EnigmailDialog.alertPref(</span>
<a href="#l11.190"></a><span id="l11.190">         window,</span>
<a href="#l11.191"></a><span id="l11.191">         EnigmailLocale.getString(&quot;refreshKey.warn&quot;),</span>
<a href="#l11.192"></a><span id="l11.192">         &quot;warnRefreshAll&quot;</span>
<a href="#l11.193"></a><span id="l11.193">       );</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:33Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

