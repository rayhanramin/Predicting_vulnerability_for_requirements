<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 20700:f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9" />
<meta property="og:url" content="/comm-central/rev/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9" />
<meta property="og:description" content="Bug 1279834 - Integrate devtools client UI into Thunderbird. r=mkmelin" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9">shortlog</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9">files</a> |
changeset |
<a href="/comm-central/raw-rev/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9">raw</a>  | <a href="/comm-central/archive/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1279834">Bug 1279834</a> - Integrate devtools client UI into Thunderbird. r=mkmelin
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#80;&#104;&#105;&#108;&#105;&#112;&#112;&#32;&#75;&#101;&#119;&#105;&#115;&#99;&#104;&#32;&#60;&#109;&#111;&#122;&#105;&#108;&#108;&#97;&#64;&#107;&#101;&#119;&#105;&#115;&#46;&#99;&#104;&#62;</td></tr>
<tr><td></td><td class="date age">Sat, 24 Sep 2016 13:24:37 +0200</td></tr>

<tr>
 <td>changeset 20700</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9">f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9</a></td>
</tr>



<tr>
<td>parent 20699</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/26d7f9ff1aba6d7b0ac94e5c87b78dd66b245e99">26d7f9ff1aba6d7b0ac94e5c87b78dd66b245e99</a>
</td>
</tr>

<tr>
<td>child 20701</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/84406e2b6d12d521277649822c2b773b86f22041">84406e2b6d12d521277649822c2b773b86f22041</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9">12526</a></td></tr>
<tr><td>push user</td><td>aleth@instantbird.org</td></tr>
<tr><td>push date</td><td class="date age">Sun, 13 Nov 2016 23:55:05 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@40eadd4a11bd [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=40eadd4a11bd430d0ca17d52ee5db2f65defc187">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=40eadd4a11bd430d0ca17d52ee5db2f65defc187&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=40eadd4a11bd430d0ca17d52ee5db2f65defc187&newProject=comm-central&newRevision=f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=40eadd4a11bd430d0ca17d52ee5db2f65defc187&newProject=comm-central&newRevision=f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=40eadd4a11bd430d0ca17d52ee5db2f65defc187&newProject=comm-central&newRevision=f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28mkmelin%29&revcount=50">mkmelin</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1279834">1279834</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1279834">Bug 1279834</a> - Integrate devtools client UI into Thunderbird. r=mkmelin

MozReview-Commit-ID: Bo994FlkJQz</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/app/profile/all-thunderbird.js">mail/app/profile/all-thunderbird.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/app/profile/all-thunderbird.js">file</a> |
<a href="/comm-central/annotate/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/app/profile/all-thunderbird.js">annotate</a> |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/app/profile/all-thunderbird.js">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/app/profile/all-thunderbird.js">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/app/profile/all-thunderbird.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/baseMenuOverlay.xul">mail/base/content/baseMenuOverlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/baseMenuOverlay.xul">file</a> |
<a href="/comm-central/annotate/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/baseMenuOverlay.xul">annotate</a> |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/baseMenuOverlay.xul">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/baseMenuOverlay.xul">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/baseMenuOverlay.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/contentAreaClick.js">mail/base/content/contentAreaClick.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/contentAreaClick.js">file</a> |
<a href="/comm-central/annotate/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/contentAreaClick.js">annotate</a> |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/contentAreaClick.js">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/contentAreaClick.js">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/contentAreaClick.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/mailCore.js">mail/base/content/mailCore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/mailCore.js">file</a> |
<a href="/comm-central/annotate/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/mailCore.js">annotate</a> |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/mailCore.js">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/mailCore.js">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/mailCore.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/mailWindowOverlay.js">mail/base/content/mailWindowOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/mailWindowOverlay.js">file</a> |
<a href="/comm-central/annotate/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/mailWindowOverlay.js">annotate</a> |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/mailWindowOverlay.js">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/mailWindowOverlay.js">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/mailWindowOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/mailWindowOverlay.xul">mail/base/content/mailWindowOverlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/mailWindowOverlay.xul">file</a> |
<a href="/comm-central/annotate/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/mailWindowOverlay.xul">annotate</a> |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/mailWindowOverlay.xul">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/mailWindowOverlay.xul">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/base/content/mailWindowOverlay.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/content/dbg-messenger-overlay.js">mail/components/devtools/content/dbg-messenger-overlay.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/content/dbg-messenger-overlay.js">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/content/dbg-messenger-overlay.js">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/content/dbg-messenger-overlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/content/dbg-messenger-overlay.xul">mail/components/devtools/content/dbg-messenger-overlay.xul</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/content/dbg-messenger-overlay.xul">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/content/dbg-messenger-overlay.xul">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/content/dbg-messenger-overlay.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/content/webconsole-overlay.xul">mail/components/devtools/content/webconsole-overlay.xul</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/content/webconsole-overlay.xul">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/content/webconsole-overlay.xul">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/content/webconsole-overlay.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/devtools-loader.js">mail/components/devtools/devtools-loader.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/devtools-loader.js">file</a> |
<a href="/comm-central/annotate/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/devtools-loader.js">annotate</a> |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/devtools-loader.js">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/devtools-loader.js">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/devtools-loader.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/devtools-loader.manifest">mail/components/devtools/devtools-loader.manifest</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/devtools-loader.manifest">file</a> |
<a href="/comm-central/annotate/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/devtools-loader.manifest">annotate</a> |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/devtools-loader.manifest">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/devtools-loader.manifest">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/devtools-loader.manifest">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/Makefile.in">mail/components/devtools/extension/Makefile.in</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/Makefile.in">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/Makefile.in">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/bootstrap.js">mail/components/devtools/extension/bootstrap.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/bootstrap.js">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/bootstrap.js">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/bootstrap.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/content/options.js">mail/components/devtools/extension/content/options.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/content/options.js">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/content/options.js">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/content/options.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/content/options.xul">mail/components/devtools/extension/content/options.xul</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/content/options.xul">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/content/options.xul">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/content/options.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/install.rdf">mail/components/devtools/extension/install.rdf</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/install.rdf">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/install.rdf">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/install.rdf">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/jar.mn">mail/components/devtools/extension/jar.mn</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/jar.mn">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/jar.mn">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/moz.build">mail/components/devtools/extension/moz.build</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/moz.build">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/moz.build">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/extension/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/jar.mn">mail/components/devtools/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/jar.mn">file</a> |
<a href="/comm-central/annotate/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/jar.mn">annotate</a> |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/jar.mn">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/jar.mn">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/modules/RemoteDebuggerServer.jsm">mail/components/devtools/modules/RemoteDebuggerServer.jsm</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/modules/RemoteDebuggerServer.jsm">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/modules/RemoteDebuggerServer.jsm">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/modules/RemoteDebuggerServer.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/modules/XULRootActor.js">mail/components/devtools/modules/XULRootActor.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/modules/XULRootActor.js">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/modules/XULRootActor.js">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/modules/XULRootActor.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/moz.build">mail/components/devtools/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/moz.build">file</a> |
<a href="/comm-central/annotate/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/moz.build">annotate</a> |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/moz.build">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/moz.build">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/tb-root-actor.js">mail/components/devtools/tb-root-actor.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/tb-root-actor.js">file</a> |
<a href="/comm-central/annotate/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/tb-root-actor.js">annotate</a> |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/tb-root-actor.js">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/tb-root-actor.js">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/tb-root-actor.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/toolbox-process-overlay.xul">mail/components/devtools/toolbox-process-overlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/toolbox-process-overlay.xul">file</a> |
<a href="/comm-central/annotate/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/toolbox-process-overlay.xul">annotate</a> |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/toolbox-process-overlay.xul">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/toolbox-process-overlay.xul">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/toolbox-process-overlay.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/webconsole-overlay.xul">mail/components/devtools/webconsole-overlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/webconsole-overlay.xul">file</a> |
<a href="/comm-central/annotate/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/webconsole-overlay.xul">annotate</a> |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/webconsole-overlay.xul">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/webconsole-overlay.xul">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/components/devtools/webconsole-overlay.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/locales/en-US/chrome/messenger/messenger.dtd">mail/locales/en-US/chrome/messenger/messenger.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/locales/en-US/chrome/messenger/messenger.dtd">file</a> |
<a href="/comm-central/annotate/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/locales/en-US/chrome/messenger/messenger.dtd">annotate</a> |
<a href="/comm-central/diff/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/locales/en-US/chrome/messenger/messenger.dtd">diff</a> |
<a href="/comm-central/comparison/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/locales/en-US/chrome/messenger/messenger.dtd">comparison</a> |
<a href="/comm-central/log/f85659ef3cf0f7064d8aad906fd70ee14ea8d9d9/mail/locales/en-US/chrome/messenger/messenger.dtd">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/app/profile/all-thunderbird.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/app/profile/all-thunderbird.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -804,16 +804,17 @@ pref(&quot;browser.search.order.3&quot;, &quot;chrome:/</span>
<a href="#l1.4"></a><span id="l1.4"> pref(&quot;browser.search.defaultenginename.US&quot;, &quot;data:text/plain,browser.search.defaultenginename.US=Bing&quot;);</span>
<a href="#l1.5"></a><span id="l1.5"> pref(&quot;browser.search.order.US.1&quot;, &quot;data:text/plain,browser.search.defaultenginename.US=Bing&quot;);</span>
<a href="#l1.6"></a><span id="l1.6"> pref(&quot;browser.search.order.US.2&quot;, &quot;data:text/plain,browser.search.defaultenginename.US=Yahoo&quot;);</span>
<a href="#l1.7"></a><span id="l1.7"> pref(&quot;browser.search.order.US.3&quot;, &quot;data:text/plain,browser.search.defaultenginename.US=&quot;);</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9"> // Developer Tools related preferences</span>
<a href="#l1.10"></a><span id="l1.10"> pref(&quot;devtools.debugger.log&quot;, false);</span>
<a href="#l1.11"></a><span id="l1.11"> pref(&quot;devtools.chrome.enabled&quot;, true);</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+pref(&quot;devtools.debugger.remote-enabled&quot;, true);</span>
<a href="#l1.13"></a><span id="l1.13"> pref(&quot;devtools.selfxss.count&quot;, 5);</span>
<a href="#l1.14"></a><span id="l1.14"> </span>
<a href="#l1.15"></a><span id="l1.15"> pref(&quot;mail.chat.enabled&quot;, true);</span>
<a href="#l1.16"></a><span id="l1.16"> // Whether to show chat notifications or not.</span>
<a href="#l1.17"></a><span id="l1.17"> pref(&quot;mail.chat.show_desktop_notifications&quot;, true);</span>
<a href="#l1.18"></a><span id="l1.18"> // Decide how much information is to be shown in the notification.</span>
<a href="#l1.19"></a><span id="l1.19"> // 0 == Show all info (sender, chat message message preview),</span>
<a href="#l1.20"></a><span id="l1.20"> // 1 == Show sender's info only (not message preview),</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/base/content/baseMenuOverlay.xul</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/base/content/baseMenuOverlay.xul</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -14,16 +14,19 @@</span>
<a href="#l2.4"></a><span id="l2.4">          xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l2.5"></a><span id="l2.5"> </span>
<a href="#l2.6"></a><span id="l2.6">   &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l2.7"></a><span id="l2.7">           src=&quot;chrome://communicator/content/utilityOverlay.js&quot;/&gt;</span>
<a href="#l2.8"></a><span id="l2.8"> </span>
<a href="#l2.9"></a><span id="l2.9">   &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l2.10"></a><span id="l2.10">           src=&quot;chrome://messenger/content/mailCore.js&quot;/&gt;</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+          src=&quot;chrome://global/content/viewSourceUtils.js&quot;/&gt;</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+</span>
<a href="#l2.15"></a><span id="l2.15"> #ifdef XP_WIN</span>
<a href="#l2.16"></a><span id="l2.16">   &lt;menu id=&quot;helpMenu&quot;</span>
<a href="#l2.17"></a><span id="l2.17">         label=&quot;&amp;helpMenuWin.label;&quot; accesskey=&quot;&amp;helpMenuWin.accesskey;&quot;&gt;</span>
<a href="#l2.18"></a><span id="l2.18"> #else</span>
<a href="#l2.19"></a><span id="l2.19">   &lt;menu id=&quot;helpMenu&quot;</span>
<a href="#l2.20"></a><span id="l2.20">         label=&quot;&amp;helpMenu.label;&quot; accesskey=&quot;&amp;helpMenu.accesskey;&quot;&gt;</span>
<a href="#l2.21"></a><span id="l2.21"> #endif</span>
<a href="#l2.22"></a><span id="l2.22">     &lt;menupopup id=&quot;menu_HelpPopup&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/base/content/contentAreaClick.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/base/content/contentAreaClick.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -183,8 +183,17 @@ function openLinkExternally(url)</span>
<a href="#l3.4"></a><span id="l3.4">       transitionType: Components.interfaces.nsINavHistoryService.TRANSITION_LINK</span>
<a href="#l3.5"></a><span id="l3.5">     }]</span>
<a href="#l3.6"></a><span id="l3.6">   });</span>
<a href="#l3.7"></a><span id="l3.7"> </span>
<a href="#l3.8"></a><span id="l3.8">   Components.classes[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l3.9"></a><span id="l3.9">             .getService(Components.interfaces.nsIExternalProtocolService)</span>
<a href="#l3.10"></a><span id="l3.10">             .loadUrl(uri);</span>
<a href="#l3.11"></a><span id="l3.11"> }</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+/**</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+ * Compatibility to Firefox, used for example by devtools to open links. Defer</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+ * this to the external browser for now, since in most cases this is meant to</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+ * open an actionable tab.</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+ */</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+function openUILinkIn(url, where, options) {</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+  openLinkExternally(url);</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/base/content/mailCore.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/base/content/mailCore.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -318,21 +318,25 @@ function onViewToolbarsPopupShowing(aEve</span>
<a href="#l4.4"></a><span id="l4.4">         menuItem.addEventListener(&quot;command&quot;, onMenuItemCommand, false);</span>
<a href="#l4.5"></a><span id="l4.5">       }</span>
<a href="#l4.6"></a><span id="l4.6">     }</span>
<a href="#l4.7"></a><span id="l4.7">   }</span>
<a href="#l4.8"></a><span id="l4.8"> }</span>
<a href="#l4.9"></a><span id="l4.9"> </span>
<a href="#l4.10"></a><span id="l4.10"> function toJavaScriptConsole()</span>
<a href="#l4.11"></a><span id="l4.11"> {</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-  let { require } = Components.utils.import(&quot;resource://devtools/shared/Loader.jsm&quot;, {});</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-  let HUDService = require(&quot;devtools/client/webconsole/hudservice&quot;);</span>
<a href="#l4.14"></a><span id="l4.14">   HUDService.openBrowserConsoleOrFocus();</span>
<a href="#l4.15"></a><span id="l4.15"> }</span>
<a href="#l4.16"></a><span id="l4.16"> </span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+function openAboutDebugging(hash)</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+{</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineplus">+  let url = &quot;about:debugging&quot; + (hash ? &quot;#&quot; + hash : &quot;&quot;);</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineplus">+  document.getElementById('tabmail').openTab(&quot;contentTab&quot;, { contentPage: url });</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineplus">+}</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineplus">+</span>
<a href="#l4.23"></a><span id="l4.23"> function toOpenWindowByType(inType, uri)</span>
<a href="#l4.24"></a><span id="l4.24"> {</span>
<a href="#l4.25"></a><span id="l4.25">   var topWindow = Services.wm.getMostRecentWindow(inType);</span>
<a href="#l4.26"></a><span id="l4.26">   if (topWindow)</span>
<a href="#l4.27"></a><span id="l4.27">     topWindow.focus();</span>
<a href="#l4.28"></a><span id="l4.28">   else</span>
<a href="#l4.29"></a><span id="l4.29">     window.open(uri, &quot;_blank&quot;, &quot;chrome,extrachrome,menubar,resizable,scrollbars,status,toolbar&quot;);</span>
<a href="#l4.30"></a><span id="l4.30"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/base/content/mailWindowOverlay.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/base/content/mailWindowOverlay.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -6,16 +6,28 @@</span>
<a href="#l5.4"></a><span id="l5.4"> Components.utils.import(&quot;resource:///modules/FeedUtils.jsm&quot;);</span>
<a href="#l5.5"></a><span id="l5.5"> Components.utils.import(&quot;resource:///modules/gloda/dbview.js&quot;);</span>
<a href="#l5.6"></a><span id="l5.6"> Components.utils.import(&quot;resource:///modules/MailConsts.js&quot;);</span>
<a href="#l5.7"></a><span id="l5.7"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l5.8"></a><span id="l5.8"> Components.utils.import(&quot;resource:///modules/MailUtils.js&quot;);</span>
<a href="#l5.9"></a><span id="l5.9"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l5.10"></a><span id="l5.10"> Components.utils.import(&quot;resource://gre/modules/PluralForm.jsm&quot;);</span>
<a href="#l5.11"></a><span id="l5.11"> Components.utils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+XPCOMUtils.defineLazyModuleGetter(this, &quot;BrowserToolboxProcess&quot;, &quot;resource://devtools/client/framework/ToolboxProcess.jsm&quot;);</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineplus">+XPCOMUtils.defineLazyModuleGetter(this, &quot;ScratchpadManager&quot;,&quot;resource://devtools/client/scratchpad/scratchpad-manager.jsm&quot;);</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+Object.defineProperty(this, &quot;HUDService&quot;, {</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineplus">+  get: function HUDService_getter() {</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineplus">+    let devtools = Components.utils.import(&quot;resource://devtools/shared/Loader.jsm&quot;, {}).devtools;</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineplus">+    return devtools.require(&quot;devtools/client/webconsole/hudservice&quot;);</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineplus">+  },</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineplus">+  configurable: true,</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineplus">+  enumerable: true</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineplus">+});</span>
<a href="#l5.24"></a><span id="l5.24"> </span>
<a href="#l5.25"></a><span id="l5.25"> var ADDR_DB_LARGE_COMMIT       = 1;</span>
<a href="#l5.26"></a><span id="l5.26"> </span>
<a href="#l5.27"></a><span id="l5.27"> var kClassicMailLayout = 0;</span>
<a href="#l5.28"></a><span id="l5.28"> var kWideMailLayout = 1;</span>
<a href="#l5.29"></a><span id="l5.29"> var kVerticalMailLayout = 2;</span>
<a href="#l5.30"></a><span id="l5.30"> var kMailLayoutCommandMap =</span>
<a href="#l5.31"></a><span id="l5.31"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/base/content/mailWindowOverlay.xul</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/base/content/mailWindowOverlay.xul</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -523,16 +523,29 @@</span>
<a href="#l6.4"></a><span id="l6.4">   &lt;key id=&quot;key_searchMail&quot;</span>
<a href="#l6.5"></a><span id="l6.5">        key=&quot;&amp;searchMailCmd.key;&quot;</span>
<a href="#l6.6"></a><span id="l6.6">        oncommand=&quot;goDoCommand('cmd_search')&quot;</span>
<a href="#l6.7"></a><span id="l6.7">        modifiers=&quot;accel,shift&quot;/&gt;</span>
<a href="#l6.8"></a><span id="l6.8">   &lt;key id=&quot;key_errorConsole&quot;</span>
<a href="#l6.9"></a><span id="l6.9">        key=&quot;&amp;errorConsoleCmd.commandkey;&quot;</span>
<a href="#l6.10"></a><span id="l6.10">        oncommand=&quot;toJavaScriptConsole();&quot;</span>
<a href="#l6.11"></a><span id="l6.11">        modifiers=&quot;accel,shift&quot;/&gt;</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+  &lt;key id=&quot;key_devtoolsToolbox&quot;</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+       key=&quot;&amp;devToolboxCmd.commandkey;&quot;</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+       modifiers=&quot;accel,alt&quot;</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineplus">+#else</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineplus">+       modifiers=&quot;accel,shift&quot;</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineplus">+#endif</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineplus">+       oncommand=&quot;BrowserToolboxProcess.init();&quot;/&gt;</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineplus">+  &lt;key id=&quot;key_scratchpad&quot;</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineplus">+       keycode=&quot;&amp;scratchpadCmd.keycode;&quot;</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineplus">+       keytext=&quot;&amp;scratchpadCmd.keytext;&quot;</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineplus">+       modifiers=&quot;shift&quot;</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineplus">+       oncommand=&quot;ScratchpadManager.openScratchpad({ executionContext: 2 });&quot;/&gt;</span>
<a href="#l6.25"></a><span id="l6.25">   &lt;key id=&quot;key_sanitizeHistory&quot;</span>
<a href="#l6.26"></a><span id="l6.26">        keycode=&quot;VK_DELETE&quot;</span>
<a href="#l6.27"></a><span id="l6.27">        oncommand=&quot;toSanitize();&quot;</span>
<a href="#l6.28"></a><span id="l6.28">        modifiers=&quot;accel,shift&quot;/&gt;</span>
<a href="#l6.29"></a><span id="l6.29"> #ifdef XP_MACOSX</span>
<a href="#l6.30"></a><span id="l6.30">   &lt;key id=&quot;key_sanitizeHistory_mac&quot;</span>
<a href="#l6.31"></a><span id="l6.31">        keycode=&quot;VK_BACK&quot;</span>
<a href="#l6.32"></a><span id="l6.32">        oncommand=&quot;toSanitize();&quot;</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineat">@@ -2107,20 +2120,46 @@</span>
<a href="#l6.34"></a><span id="l6.34">                       command=&quot;cmd_runJunkControls&quot;/&gt;</span>
<a href="#l6.35"></a><span id="l6.35">             &lt;menuitem id=&quot;appmenu_deleteJunk&quot;</span>
<a href="#l6.36"></a><span id="l6.36">                       label=&quot;&amp;deleteJunk.label;&quot;</span>
<a href="#l6.37"></a><span id="l6.37">                       command=&quot;cmd_deleteJunk&quot;/&gt;</span>
<a href="#l6.38"></a><span id="l6.38">             &lt;menuseparator id=&quot;tasksMenuAfterDeleteSeparator&quot;/&gt;</span>
<a href="#l6.39"></a><span id="l6.39">             &lt;menuitem id=&quot;appmenu_import&quot;</span>
<a href="#l6.40"></a><span id="l6.40">                       label=&quot;&amp;importCmd.label;&quot;</span>
<a href="#l6.41"></a><span id="l6.41">                       oncommand=&quot;toImport();&quot;/&gt;</span>
<a href="#l6.42"></a><span id="l6.42" class="difflineminus">-            &lt;menuitem id=&quot;appmenu_javascriptConsole&quot;</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineminus">-                      label=&quot;&amp;errorConsoleCmd.label;&quot;</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineminus">-                      key=&quot;key_errorConsole&quot;</span>
<a href="#l6.45"></a><span id="l6.45" class="difflineminus">-                      oncommand=&quot;toJavaScriptConsole();&quot;/&gt;</span>
<a href="#l6.46"></a><span id="l6.46" class="difflineplus">+            &lt;menu id=&quot;appmenu_devtoolsMenu&quot;</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineplus">+                  label=&quot;&amp;devtoolsMenu.label;&quot;</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineplus">+                  accesskey=&quot;&amp;devtoolsMenu.accesskey;&quot;&gt;</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineplus">+              &lt;menupopup id=&quot;appmenu_devtoolsPopup&quot;&gt;</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineplus">+                &lt;menuitem id=&quot;appmenu_devtoolsToolbox&quot;</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineplus">+                          label=&quot;&amp;devToolboxCmd.label;&quot;</span>
<a href="#l6.52"></a><span id="l6.52" class="difflineplus">+                          accesskey=&quot;&amp;devToolboxCmd.accesskey;&quot;</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineplus">+                          key=&quot;key_devtoolsToolbox&quot;</span>
<a href="#l6.54"></a><span id="l6.54" class="difflineplus">+                          oncommand=&quot;BrowserToolboxProcess.init();&quot;/&gt;</span>
<a href="#l6.55"></a><span id="l6.55" class="difflineplus">+                &lt;menuitem id=&quot;appmenu_addonDebugging&quot;</span>
<a href="#l6.56"></a><span id="l6.56" class="difflineplus">+                          label=&quot;&amp;addonDebugCmd.label;&quot;</span>
<a href="#l6.57"></a><span id="l6.57" class="difflineplus">+                          accesskey=&quot;&amp;addonDebugCmd.accesskey;&quot;</span>
<a href="#l6.58"></a><span id="l6.58" class="difflineplus">+                          oncommand=&quot;openAboutDebugging('addons')&quot;/&gt;</span>
<a href="#l6.59"></a><span id="l6.59" class="difflineplus">+                &lt;menuitem id=&quot;appmenu_tabsDebugging&quot;</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineplus">+                          label=&quot;&amp;tabsDebugCmd.label;&quot;</span>
<a href="#l6.61"></a><span id="l6.61" class="difflineplus">+                          accesskey=&quot;&amp;tabsDebugCmd.accesskey;&quot;</span>
<a href="#l6.62"></a><span id="l6.62" class="difflineplus">+                          oncommand=&quot;openAboutDebugging('tabs')&quot;/&gt;</span>
<a href="#l6.63"></a><span id="l6.63" class="difflineplus">+                &lt;menuseparator id=&quot;appmenu_debuggingSeparator&quot;/&gt;</span>
<a href="#l6.64"></a><span id="l6.64" class="difflineplus">+                &lt;menuitem id=&quot;appmenu_javascriptConsole&quot;</span>
<a href="#l6.65"></a><span id="l6.65" class="difflineplus">+                          label=&quot;&amp;errorConsoleCmd.label;&quot;</span>
<a href="#l6.66"></a><span id="l6.66" class="difflineplus">+                          accesskey=&quot;&amp;errorConsoleCmd.accesskey;&quot;</span>
<a href="#l6.67"></a><span id="l6.67" class="difflineplus">+                          key=&quot;key_errorConsole&quot;</span>
<a href="#l6.68"></a><span id="l6.68" class="difflineplus">+                          oncommand=&quot;toJavaScriptConsole();&quot;/&gt;</span>
<a href="#l6.69"></a><span id="l6.69" class="difflineplus">+                &lt;menuitem id=&quot;appmenu_openScratchpad&quot;</span>
<a href="#l6.70"></a><span id="l6.70" class="difflineplus">+                          label=&quot;&amp;scratchpadCmd.label;&quot;</span>
<a href="#l6.71"></a><span id="l6.71" class="difflineplus">+                          accesskey=&quot;&amp;scratchpadCmd.accesskey;&quot;</span>
<a href="#l6.72"></a><span id="l6.72" class="difflineplus">+                          key=&quot;key_scratchpad&quot;</span>
<a href="#l6.73"></a><span id="l6.73" class="difflineplus">+                          oncommand=&quot;ScratchpadManager.openScratchpad({ executionContext: 2 });&quot;/&gt;</span>
<a href="#l6.74"></a><span id="l6.74" class="difflineplus">+              &lt;/menupopup&gt;</span>
<a href="#l6.75"></a><span id="l6.75" class="difflineplus">+            &lt;/menu&gt;</span>
<a href="#l6.76"></a><span id="l6.76">             &lt;menuitem id=&quot;appmenu_sanitizeHistory&quot;</span>
<a href="#l6.77"></a><span id="l6.77">                       label=&quot;&amp;clearRecentHistory.label;&quot;</span>
<a href="#l6.78"></a><span id="l6.78">                       key=&quot;key_sanitizeHistory&quot;</span>
<a href="#l6.79"></a><span id="l6.79">                       oncommand=&quot;toSanitize();&quot;/&gt;</span>
<a href="#l6.80"></a><span id="l6.80">           &lt;/menupopup&gt;</span>
<a href="#l6.81"></a><span id="l6.81">         &lt;/menu&gt;</span>
<a href="#l6.82"></a><span id="l6.82">         &lt;!-- Help menu --&gt;</span>
<a href="#l6.83"></a><span id="l6.83">         &lt;splitmenu id=&quot;appmenu_help&quot;</span>
<a href="#l6.84"></a><span id="l6.84" class="difflineat">@@ -2992,21 +3031,44 @@</span>
<a href="#l6.85"></a><span id="l6.85">         &lt;menuitem id=&quot;deleteJunk&quot;</span>
<a href="#l6.86"></a><span id="l6.86">             label=&quot;&amp;deleteJunk.label;&quot;</span>
<a href="#l6.87"></a><span id="l6.87">             accesskey=&quot;&amp;deleteJunk.accesskey;&quot;</span>
<a href="#l6.88"></a><span id="l6.88">             command=&quot;cmd_deleteJunk&quot;/&gt;</span>
<a href="#l6.89"></a><span id="l6.89">         &lt;menuseparator id=&quot;tasksMenuAfterDeleteSeparator&quot;/&gt;</span>
<a href="#l6.90"></a><span id="l6.90">         &lt;menuitem id=&quot;menu_import&quot; label=&quot;&amp;importCmd.label;&quot;</span>
<a href="#l6.91"></a><span id="l6.91">                   accesskey=&quot;&amp;importCmd.accesskey;&quot;</span>
<a href="#l6.92"></a><span id="l6.92">                   oncommand=&quot;toImport();&quot;/&gt;</span>
<a href="#l6.93"></a><span id="l6.93" class="difflineminus">-        &lt;menuitem id=&quot;javascriptConsole&quot;</span>
<a href="#l6.94"></a><span id="l6.94" class="difflineminus">-                  label=&quot;&amp;errorConsoleCmd.label;&quot;</span>
<a href="#l6.95"></a><span id="l6.95" class="difflineminus">-                  accesskey=&quot;&amp;errorConsoleCmd.accesskey;&quot;</span>
<a href="#l6.96"></a><span id="l6.96" class="difflineminus">-                  key=&quot;key_errorConsole&quot;</span>
<a href="#l6.97"></a><span id="l6.97" class="difflineminus">-                  oncommand=&quot;toJavaScriptConsole();&quot;/&gt;</span>
<a href="#l6.98"></a><span id="l6.98" class="difflineplus">+        &lt;menu id=&quot;devtoolsMenu&quot; label=&quot;&amp;devtoolsMenu.label;&quot; accesskey=&quot;&amp;devtoolsMenu.accesskey;&quot;&gt;</span>
<a href="#l6.99"></a><span id="l6.99" class="difflineplus">+          &lt;menupopup id=&quot;devtoolsPopup&quot;&gt;</span>
<a href="#l6.100"></a><span id="l6.100" class="difflineplus">+            &lt;menuitem id=&quot;devtoolsToolbox&quot;</span>
<a href="#l6.101"></a><span id="l6.101" class="difflineplus">+                      label=&quot;&amp;devToolboxCmd.label;&quot;</span>
<a href="#l6.102"></a><span id="l6.102" class="difflineplus">+                      accesskey=&quot;&amp;devToolboxCmd.accesskey;&quot;</span>
<a href="#l6.103"></a><span id="l6.103" class="difflineplus">+                      key=&quot;key_devtoolsToolbox&quot;</span>
<a href="#l6.104"></a><span id="l6.104" class="difflineplus">+                      oncommand=&quot;BrowserToolboxProcess.init();&quot;/&gt;</span>
<a href="#l6.105"></a><span id="l6.105" class="difflineplus">+            &lt;menuitem id=&quot;addonDebugging&quot;</span>
<a href="#l6.106"></a><span id="l6.106" class="difflineplus">+                      label=&quot;&amp;addonDebugCmd.label;&quot;</span>
<a href="#l6.107"></a><span id="l6.107" class="difflineplus">+                      accesskey=&quot;&amp;addonDebugCmd.accesskey;&quot;</span>
<a href="#l6.108"></a><span id="l6.108" class="difflineplus">+                      oncommand=&quot;openAboutDebugging('addons')&quot;/&gt;</span>
<a href="#l6.109"></a><span id="l6.109" class="difflineplus">+            &lt;menuitem id=&quot;tabsDebugging&quot;</span>
<a href="#l6.110"></a><span id="l6.110" class="difflineplus">+                      label=&quot;&amp;tabsDebugCmd.label;&quot;</span>
<a href="#l6.111"></a><span id="l6.111" class="difflineplus">+                      accesskey=&quot;&amp;tabsDebugCmd.accesskey;&quot;</span>
<a href="#l6.112"></a><span id="l6.112" class="difflineplus">+                      oncommand=&quot;openAboutDebugging('tabs')&quot;/&gt;</span>
<a href="#l6.113"></a><span id="l6.113" class="difflineplus">+            &lt;menuseparator id=&quot;debuggingSeparator&quot;/&gt;</span>
<a href="#l6.114"></a><span id="l6.114" class="difflineplus">+            &lt;menuitem id=&quot;javascriptConsole&quot;</span>
<a href="#l6.115"></a><span id="l6.115" class="difflineplus">+                      label=&quot;&amp;errorConsoleCmd.label;&quot;</span>
<a href="#l6.116"></a><span id="l6.116" class="difflineplus">+                      accesskey=&quot;&amp;errorConsoleCmd.accesskey;&quot;</span>
<a href="#l6.117"></a><span id="l6.117" class="difflineplus">+                      key=&quot;key_errorConsole&quot;</span>
<a href="#l6.118"></a><span id="l6.118" class="difflineplus">+                      oncommand=&quot;toJavaScriptConsole();&quot;/&gt;</span>
<a href="#l6.119"></a><span id="l6.119" class="difflineplus">+            &lt;menuitem id=&quot;openScratchpad&quot;</span>
<a href="#l6.120"></a><span id="l6.120" class="difflineplus">+                      label=&quot;&amp;scratchpadCmd.label;&quot;</span>
<a href="#l6.121"></a><span id="l6.121" class="difflineplus">+                      accesskey=&quot;&amp;scratchpadCmd.accesskey;&quot;</span>
<a href="#l6.122"></a><span id="l6.122" class="difflineplus">+                      key=&quot;key_scratchpad&quot;</span>
<a href="#l6.123"></a><span id="l6.123" class="difflineplus">+                      oncommand=&quot;ScratchpadManager.openScratchpad({ executionContext: 2 });&quot;/&gt;</span>
<a href="#l6.124"></a><span id="l6.124" class="difflineplus">+          &lt;/menupopup&gt;</span>
<a href="#l6.125"></a><span id="l6.125" class="difflineplus">+        &lt;/menu&gt;</span>
<a href="#l6.126"></a><span id="l6.126">         &lt;menuitem id=&quot;sanitizeHistory&quot;</span>
<a href="#l6.127"></a><span id="l6.127">                   label=&quot;&amp;clearRecentHistory.label;&quot;</span>
<a href="#l6.128"></a><span id="l6.128">                   accesskey=&quot;&amp;clearRecentHistory.accesskey;&quot;</span>
<a href="#l6.129"></a><span id="l6.129">                   key=&quot;key_sanitizeHistory&quot;</span>
<a href="#l6.130"></a><span id="l6.130">                   oncommand=&quot;toSanitize();&quot;/&gt;</span>
<a href="#l6.131"></a><span id="l6.131"> #ifndef XP_UNIX</span>
<a href="#l6.132"></a><span id="l6.132">         &lt;menuseparator id=&quot;prefSep&quot;/&gt;</span>
<a href="#l6.133"></a><span id="l6.133">         &lt;menuitem id=&quot;menu_accountmgr&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1">deleted file mode 100644</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineminus">--- a/mail/components/devtools/content/dbg-messenger-overlay.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineplus">+++ /dev/null</span>
<a href="#l7.4"></a><span id="l7.4" class="difflineat">@@ -1,55 +0,0 @@</span>
<a href="#l7.5"></a><span id="l7.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l7.6"></a><span id="l7.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l7.7"></a><span id="l7.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l7.8"></a><span id="l7.8" class="difflineminus">-</span>
<a href="#l7.9"></a><span id="l7.9" class="difflineminus">-Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l7.10"></a><span id="l7.10" class="difflineminus">-Components.utils.import(&quot;resource:///modules/RemoteDebuggerServer.jsm&quot;);</span>
<a href="#l7.11"></a><span id="l7.11" class="difflineminus">-</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-/**</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">- * Handler to call when the checked state of the menuitem is toggled. Sets the</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineminus">- * remote-enabled preference of the debugger and starts the debugger if needed.</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineminus">- */</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineminus">-function toggleDebugger() {</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineminus">-  let shouldEnable = document.getElementById(&quot;devtoolsDebugger&quot;).getAttribute(&quot;checked&quot;) == &quot;true&quot;;</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineminus">-  Services.prefs.setBoolPref(&quot;devtools.debugger.remote-enabled&quot;, shouldEnable);</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineminus">-</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineminus">-  RemoteDebuggerServer.extraInit = function(DebuggerServer) {</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineminus">-    DebuggerServer.registerModule(&quot;resource:///modules/XULRootActor.js&quot;);</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineminus">-  };</span>
<a href="#l7.23"></a><span id="l7.23" class="difflineminus">-  RemoteDebuggerServer.startstop(shouldEnable);</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineminus">-}</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineminus">-</span>
<a href="#l7.26"></a><span id="l7.26" class="difflineminus">-/**</span>
<a href="#l7.27"></a><span id="l7.27" class="difflineminus">- * Intialize the checked state, to be used when the view menu is opened.</span>
<a href="#l7.28"></a><span id="l7.28" class="difflineminus">- */</span>
<a href="#l7.29"></a><span id="l7.29" class="difflineminus">-function initDebuggerToolsMenu() {</span>
<a href="#l7.30"></a><span id="l7.30" class="difflineminus">-  let debuggerEnabled = Services.prefs.getBoolPref(&quot;devtools.debugger.remote-enabled&quot;);</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-  document.getElementById(&quot;devtoolsDebugger&quot;)</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineminus">-          .setAttribute(&quot;checked&quot;, debuggerEnabled);</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineminus">-}</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineminus">-</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineminus">-/**</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineminus">- * Intialize everything needed on load in the window for the debugger, i.e</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineminus">- * menuitem checked state listeners.</span>
<a href="#l7.38"></a><span id="l7.38" class="difflineminus">- */</span>
<a href="#l7.39"></a><span id="l7.39" class="difflineminus">-function loadDebugger() {</span>
<a href="#l7.40"></a><span id="l7.40" class="difflineminus">-  let viewPopup = document.getElementById(&quot;taskPopup&quot;);</span>
<a href="#l7.41"></a><span id="l7.41" class="difflineminus">-  viewPopup.addEventListener(&quot;popupshowing&quot;, initDebuggerToolsMenu, false);</span>
<a href="#l7.42"></a><span id="l7.42" class="difflineminus">-</span>
<a href="#l7.43"></a><span id="l7.43" class="difflineminus">-  // Call these functions once to start or stop the debugger on startup.</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineminus">-  initDebuggerToolsMenu();</span>
<a href="#l7.45"></a><span id="l7.45" class="difflineminus">-  toggleDebugger();</span>
<a href="#l7.46"></a><span id="l7.46" class="difflineminus">-}</span>
<a href="#l7.47"></a><span id="l7.47" class="difflineminus">-</span>
<a href="#l7.48"></a><span id="l7.48" class="difflineminus">-/**</span>
<a href="#l7.49"></a><span id="l7.49" class="difflineminus">- * Shutdown everything needed on load in the window for the debugger, i.e</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineminus">- * menuitem checked state listeners.</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineminus">- */</span>
<a href="#l7.52"></a><span id="l7.52" class="difflineminus">-function unloadDebugger() {</span>
<a href="#l7.53"></a><span id="l7.53" class="difflineminus">-  let viewPopup = document.getElementById(&quot;taskPopup&quot;);</span>
<a href="#l7.54"></a><span id="l7.54" class="difflineminus">-  viewPopup.removeEventListener(&quot;popupshowing&quot;, initDebuggerToolsMenu, false);</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineminus">-}</span>
<a href="#l7.56"></a><span id="l7.56" class="difflineminus">-</span>
<a href="#l7.57"></a><span id="l7.57" class="difflineminus">-// Load and unload the debugger when the window loads/unloads.</span>
<a href="#l7.58"></a><span id="l7.58" class="difflineminus">-window.addEventListener(&quot;load&quot;, loadDebugger, {capture: false, once: true});</span>
<a href="#l7.59"></a><span id="l7.59" class="difflineminus">-window.addEventListener(&quot;unload&quot;, unloadDebugger, {capture: false, once: true});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">deleted file mode 100644</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineminus">--- a/mail/components/devtools/content/dbg-messenger-overlay.xul</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineplus">+++ /dev/null</span>
<a href="#l8.4"></a><span id="l8.4" class="difflineat">@@ -1,20 +0,0 @@</span>
<a href="#l8.5"></a><span id="l8.5" class="difflineminus">-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<a href="#l8.6"></a><span id="l8.6" class="difflineminus">-&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l8.7"></a><span id="l8.7" class="difflineminus">-   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l8.8"></a><span id="l8.8" class="difflineminus">-   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l8.9"></a><span id="l8.9" class="difflineminus">-</span>
<a href="#l8.10"></a><span id="l8.10" class="difflineminus">-&lt;!DOCTYPE overlay SYSTEM &quot;chrome://messenger/locale/messenger.dtd&quot;&gt;</span>
<a href="#l8.11"></a><span id="l8.11" class="difflineminus">-</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-&lt;overlay id=&quot;devtools-overlay&quot;</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-         xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineminus">-  &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://messenger/content/devtools/dbg-messenger-overlay.js&quot;/&gt;</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">-</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineminus">-  &lt;menupopup id=&quot;taskPopup&quot;&gt;</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineminus">-    &lt;menuitem id=&quot;devtoolsDebugger&quot;</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineminus">-              type=&quot;checkbox&quot;</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineminus">-              insertafter=&quot;menu_inspector,javascriptConsole,javaScriptConsole&quot;</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineminus">-              label=&quot;&amp;allowRemoteDebugging.label;&quot;</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineminus">-              accesskey=&quot;&amp;allowRemoteDebugging.accesskey;&quot;</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineminus">-              oncommand=&quot;toggleDebugger()&quot;/&gt;</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineminus">-  &lt;/menupopup&gt;</span>
<a href="#l8.24"></a><span id="l8.24" class="difflineminus">-&lt;/overlay&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1">deleted file mode 100644</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineminus">--- a/mail/components/devtools/content/webconsole-overlay.xul</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineplus">+++ /dev/null</span>
<a href="#l9.4"></a><span id="l9.4" class="difflineat">@@ -1,22 +0,0 @@</span>
<a href="#l9.5"></a><span id="l9.5" class="difflineminus">-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<a href="#l9.6"></a><span id="l9.6" class="difflineminus">-&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l9.7"></a><span id="l9.7" class="difflineminus">-   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l9.8"></a><span id="l9.8" class="difflineminus">-   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l9.9"></a><span id="l9.9" class="difflineminus">-</span>
<a href="#l9.10"></a><span id="l9.10" class="difflineminus">-&lt;!DOCTYPE overlay SYSTEM &quot;chrome://messenger/locale/messenger.dtd&quot;&gt;</span>
<a href="#l9.11"></a><span id="l9.11" class="difflineminus">-</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-&lt;overlay id=&quot;tb-webconsole-overlay&quot;</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineminus">-         xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineminus">-  &lt;window id=&quot;devtools-webconsole&quot; browserConsoleTitle=&quot;&amp;errorConsoleCmd.label;&quot;&gt;</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineminus">-    &lt;!--  Workaround since devtools hardcodes navigator:browser, which makes</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineminus">-          browserWindow null, which means it falls back to using the</span>
<a href="#l9.17"></a><span id="l9.17" class="difflineminus">-          webconsole.xul window to look for gViewSourceUtils. --&gt;</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineminus">-    &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://global/content/viewSourceUtils.js&quot;/&gt;</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineminus">-    &lt;script type=&quot;application/javascript&quot;&gt;&lt;![CDATA[</span>
<a href="#l9.20"></a><span id="l9.20" class="difflineminus">-        function openUILinkIn(url) {</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineminus">-            var mailWindow = Services.wm.getMostRecentWindow(&quot;mail:3pane&quot;);</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineminus">-            return mailWindow.openLinkExternally(url);</span>
<a href="#l9.23"></a><span id="l9.23" class="difflineminus">-        }</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineminus">-    ]]&gt;&lt;/script&gt;</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineminus">-  &lt;/window&gt;</span>
<a href="#l9.26"></a><span id="l9.26" class="difflineminus">-&lt;/overlay&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1">new file mode 100644</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineminus">--- /dev/null</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineplus">+++ b/mail/components/devtools/devtools-loader.js</span>
<a href="#l10.4"></a><span id="l10.4" class="difflineat">@@ -0,0 +1,80 @@</span>
<a href="#l10.5"></a><span id="l10.5" class="difflineplus">+/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l10.6"></a><span id="l10.6" class="difflineplus">+ * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l10.7"></a><span id="l10.7" class="difflineplus">+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l10.8"></a><span id="l10.8" class="difflineplus">+</span>
<a href="#l10.9"></a><span id="l10.9" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l10.10"></a><span id="l10.10" class="difflineplus">+</span>
<a href="#l10.11"></a><span id="l10.11" class="difflineplus">+const { interfaces: Ci, utils: Cu } = Components;</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineplus">+Cu.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+XPCOMUtils.defineLazyModuleGetter(this, &quot;Services&quot;, &quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineplus">+</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineplus">+function DevToolsStartup() {}</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineplus">+</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineplus">+DevToolsStartup.prototype = {</span>
<a href="#l10.18"></a><span id="l10.18" class="difflineplus">+  QueryInterface: XPCOMUtils.generateQI([Ci.nsICommandLineHandler]),</span>
<a href="#l10.19"></a><span id="l10.19" class="difflineplus">+  classID: Components.ID(&quot;{089694e9-106a-4704-abf7-62a88545e194}&quot;),</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineplus">+</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineplus">+  helpInfo: &quot;&quot;,</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineplus">+  handle: function (cmdLine) {</span>
<a href="#l10.23"></a><span id="l10.23" class="difflineplus">+    this.initialize();</span>
<a href="#l10.24"></a><span id="l10.24" class="difflineplus">+</span>
<a href="#l10.25"></a><span id="l10.25" class="difflineplus">+    // We want to overwrite the -devtools flag and open the toolbox instead</span>
<a href="#l10.26"></a><span id="l10.26" class="difflineplus">+    let devtoolsFlag = cmdLine.handleFlag(&quot;devtools&quot;, false);</span>
<a href="#l10.27"></a><span id="l10.27" class="difflineplus">+    if (devtoolsFlag) {</span>
<a href="#l10.28"></a><span id="l10.28" class="difflineplus">+        this.handleDevToolsFlag(cmdLine);</span>
<a href="#l10.29"></a><span id="l10.29" class="difflineplus">+    }</span>
<a href="#l10.30"></a><span id="l10.30" class="difflineplus">+  },</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineplus">+</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+  handleDevToolsFlag: function (cmdLine) {</span>
<a href="#l10.33"></a><span id="l10.33" class="difflineplus">+    Cu.import(&quot;resource://devtools/client/framework/ToolboxProcess.jsm&quot;);</span>
<a href="#l10.34"></a><span id="l10.34" class="difflineplus">+    BrowserToolboxProcess.init();</span>
<a href="#l10.35"></a><span id="l10.35" class="difflineplus">+</span>
<a href="#l10.36"></a><span id="l10.36" class="difflineplus">+    if (cmdLine.state == Ci.nsICommandLine.STATE_REMOTE_AUTO) {</span>
<a href="#l10.37"></a><span id="l10.37" class="difflineplus">+      cmdLine.preventDefault = true;</span>
<a href="#l10.38"></a><span id="l10.38" class="difflineplus">+    }</span>
<a href="#l10.39"></a><span id="l10.39" class="difflineplus">+  },</span>
<a href="#l10.40"></a><span id="l10.40" class="difflineplus">+</span>
<a href="#l10.41"></a><span id="l10.41" class="difflineplus">+  initialize: function() {</span>
<a href="#l10.42"></a><span id="l10.42" class="difflineplus">+    var { devtools, require, DevToolsLoader } = Cu.import(&quot;resource://devtools/shared/Loader.jsm&quot;, {});</span>
<a href="#l10.43"></a><span id="l10.43" class="difflineplus">+    var { DebuggerServer } = require(&quot;devtools/server/main&quot;);</span>
<a href="#l10.44"></a><span id="l10.44" class="difflineplus">+    var { gDevTools } = require(&quot;devtools/client/framework/devtools&quot;);</span>
<a href="#l10.45"></a><span id="l10.45" class="difflineplus">+    var HUDService = require(&quot;devtools/client/webconsole/hudservice&quot;);</span>
<a href="#l10.46"></a><span id="l10.46" class="difflineplus">+</span>
<a href="#l10.47"></a><span id="l10.47" class="difflineplus">+    if (DebuggerServer.chromeWindowType != &quot;mail:3pane&quot;) {</span>
<a href="#l10.48"></a><span id="l10.48" class="difflineplus">+      // Set up the server chrome window type, make sure it can't be set</span>
<a href="#l10.49"></a><span id="l10.49" class="difflineplus">+      Object.defineProperty(DebuggerServer, &quot;chromeWindowType&quot;, {</span>
<a href="#l10.50"></a><span id="l10.50" class="difflineplus">+        get: () =&gt; &quot;mail:3pane&quot;,</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineplus">+        set: () =&gt; {},</span>
<a href="#l10.52"></a><span id="l10.52" class="difflineplus">+        configurable: true</span>
<a href="#l10.53"></a><span id="l10.53" class="difflineplus">+      });</span>
<a href="#l10.54"></a><span id="l10.54" class="difflineplus">+    }</span>
<a href="#l10.55"></a><span id="l10.55" class="difflineplus">+</span>
<a href="#l10.56"></a><span id="l10.56" class="difflineplus">+    if (gDevTools.chromeWindowType != &quot;mail:3pane&quot;) {</span>
<a href="#l10.57"></a><span id="l10.57" class="difflineplus">+      // Set up the client chrome window type, make sure it can't be set</span>
<a href="#l10.58"></a><span id="l10.58" class="difflineplus">+      Object.defineProperty(gDevTools, &quot;chromeWindowType&quot;, {</span>
<a href="#l10.59"></a><span id="l10.59" class="difflineplus">+        get: () =&gt; &quot;mail:3pane&quot;,</span>
<a href="#l10.60"></a><span id="l10.60" class="difflineplus">+        set: () =&gt; {},</span>
<a href="#l10.61"></a><span id="l10.61" class="difflineplus">+        configurable: true</span>
<a href="#l10.62"></a><span id="l10.62" class="difflineplus">+      });</span>
<a href="#l10.63"></a><span id="l10.63" class="difflineplus">+    }</span>
<a href="#l10.64"></a><span id="l10.64" class="difflineplus">+</span>
<a href="#l10.65"></a><span id="l10.65" class="difflineplus">+    // Make the loader visible to the debugger by default and for the already</span>
<a href="#l10.66"></a><span id="l10.66" class="difflineplus">+    // loaded instance. Thunderbird now also provides the Browser Toolbox for</span>
<a href="#l10.67"></a><span id="l10.67" class="difflineplus">+    // chrome debugging, which uses its own separate loader instance.</span>
<a href="#l10.68"></a><span id="l10.68" class="difflineplus">+    DevToolsLoader.prototype.invisibleToDebugger = false;</span>
<a href="#l10.69"></a><span id="l10.69" class="difflineplus">+    devtools.invisibleToDebugger = false;</span>
<a href="#l10.70"></a><span id="l10.70" class="difflineplus">+</span>
<a href="#l10.71"></a><span id="l10.71" class="difflineplus">+    if (!DebuggerServer.initialized) {</span>
<a href="#l10.72"></a><span id="l10.72" class="difflineplus">+      // Initialize and load the toolkit/browser actors</span>
<a href="#l10.73"></a><span id="l10.73" class="difflineplus">+      DebuggerServer.init();</span>
<a href="#l10.74"></a><span id="l10.74" class="difflineplus">+      DebuggerServer.addBrowserActors(&quot;mail:3pane&quot;);</span>
<a href="#l10.75"></a><span id="l10.75" class="difflineplus">+    }</span>
<a href="#l10.76"></a><span id="l10.76" class="difflineplus">+</span>
<a href="#l10.77"></a><span id="l10.77" class="difflineplus">+    if (!DebuggerServer.createRootActor.isMailRootActor) {</span>
<a href="#l10.78"></a><span id="l10.78" class="difflineplus">+      // Register the Thunderbird root actor</span>
<a href="#l10.79"></a><span id="l10.79" class="difflineplus">+      DebuggerServer.registerModule(&quot;resource:///modules/tb-root-actor.js&quot;);</span>
<a href="#l10.80"></a><span id="l10.80" class="difflineplus">+    }</span>
<a href="#l10.81"></a><span id="l10.81" class="difflineplus">+  }</span>
<a href="#l10.82"></a><span id="l10.82" class="difflineplus">+};</span>
<a href="#l10.83"></a><span id="l10.83" class="difflineplus">+</span>
<a href="#l10.84"></a><span id="l10.84" class="difflineplus">+this.NSGetFactory = XPCOMUtils.generateNSGetFactory([DevToolsStartup]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">new file mode 100644</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineminus">--- /dev/null</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineplus">+++ b/mail/components/devtools/devtools-loader.manifest</span>
<a href="#l11.4"></a><span id="l11.4" class="difflineat">@@ -0,0 +1,5 @@</span>
<a href="#l11.5"></a><span id="l11.5" class="difflineplus">+component {089694e9-106a-4704-abf7-62a88545e194} devtools-loader.js</span>
<a href="#l11.6"></a><span id="l11.6" class="difflineplus">+contract @mozilla.org/messenger/devtools-startup-clh;1 {089694e9-106a-4704-abf7-62a88545e194}</span>
<a href="#l11.7"></a><span id="l11.7" class="difflineplus">+# This command line handler needs to be initialized before the devtools command line</span>
<a href="#l11.8"></a><span id="l11.8" class="difflineplus">+# handler, which currently uses &quot;m-devtools&quot;. See details in nsICommandLineHandler.idl.</span>
<a href="#l11.9"></a><span id="l11.9" class="difflineplus">+category command-line-handler m-aaa-tb-devtools @mozilla.org/messenger/devtools-startup-clh;1</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">deleted file mode 100644</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineminus">--- a/mail/components/devtools/extension/Makefile.in</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineplus">+++ /dev/null</span>
<a href="#l12.4"></a><span id="l12.4" class="difflineat">@@ -1,8 +0,0 @@</span>
<a href="#l12.5"></a><span id="l12.5" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l12.6"></a><span id="l12.6" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l12.7"></a><span id="l12.7" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l12.8"></a><span id="l12.8" class="difflineminus">-</span>
<a href="#l12.9"></a><span id="l12.9" class="difflineminus">-XPI_PKGNAME = dbgserver-$(MOZILLA_VERSION).$(AB_CD)</span>
<a href="#l12.10"></a><span id="l12.10" class="difflineminus">-relativesrcdir = mail/locales</span>
<a href="#l12.11"></a><span id="l12.11" class="difflineminus">-</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-DEFINES += -DLOCALE_SRCDIR=$(LOCALE_SRCDIR)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">deleted file mode 100644</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineminus">--- a/mail/components/devtools/extension/bootstrap.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineplus">+++ /dev/null</span>
<a href="#l13.4"></a><span id="l13.4" class="difflineat">@@ -1,45 +0,0 @@</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l13.8"></a><span id="l13.8" class="difflineminus">-</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineminus">-var { classes: Cc, interfaces: Ci, results: Cr, utils: Cu } = Components;</span>
<a href="#l13.10"></a><span id="l13.10" class="difflineminus">-</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineminus">-Cu.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineminus">-function startup(aData, aReasion) {</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineminus">-  // Register the resource:// location</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineminus">-  let resource = Services.io</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineminus">-                         .getProtocolHandler(&quot;resource&quot;)</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineminus">-                         .QueryInterface(Ci.nsIResProtocolHandler);</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineminus">-  resource.setSubstitution(&quot;dbgserver&quot;, aData.resourceURI);</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineminus">-</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineminus">-  // Load the debug server and start it if enabled.</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineminus">-  Cu.import(&quot;resource://dbgserver/modules/RemoteDebuggerServer.jsm&quot;);</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineminus">-  let remoteEnabled = Services.prefs.getBoolPref(&quot;devtools.debugger.remote-enabled&quot;);</span>
<a href="#l13.23"></a><span id="l13.23" class="difflineminus">-</span>
<a href="#l13.24"></a><span id="l13.24" class="difflineminus">-  RemoteDebuggerServer.extraInit = function(DebuggerServer) {</span>
<a href="#l13.25"></a><span id="l13.25" class="difflineminus">-    DebuggerServer.registerModule(&quot;resource://dbgserver/modules/XULRootActor.js&quot;);</span>
<a href="#l13.26"></a><span id="l13.26" class="difflineminus">-  };</span>
<a href="#l13.27"></a><span id="l13.27" class="difflineminus">-  RemoteDebuggerServer.startstop(remoteEnabled);</span>
<a href="#l13.28"></a><span id="l13.28" class="difflineminus">-}</span>
<a href="#l13.29"></a><span id="l13.29" class="difflineminus">-</span>
<a href="#l13.30"></a><span id="l13.30" class="difflineminus">-function shutdown(aData, aReason) {</span>
<a href="#l13.31"></a><span id="l13.31" class="difflineminus">-  if (aReason == APP_SHUTDOWN) return;</span>
<a href="#l13.32"></a><span id="l13.32" class="difflineminus">-</span>
<a href="#l13.33"></a><span id="l13.33" class="difflineminus">-  // Make sure to stop the debug server on disable and uninstall</span>
<a href="#l13.34"></a><span id="l13.34" class="difflineminus">-  if (aReason == ADDON_DISABLE || aReason == ADDON_UNINSTALL) {</span>
<a href="#l13.35"></a><span id="l13.35" class="difflineminus">-    RemoteDebuggerServer.stop();</span>
<a href="#l13.36"></a><span id="l13.36" class="difflineminus">-  }</span>
<a href="#l13.37"></a><span id="l13.37" class="difflineminus">-</span>
<a href="#l13.38"></a><span id="l13.38" class="difflineminus">-  // Unload our debug server</span>
<a href="#l13.39"></a><span id="l13.39" class="difflineminus">-  Cu.unload(&quot;resource://dbgserver/modules/RemoteDebuggerServer.jsm&quot;);</span>
<a href="#l13.40"></a><span id="l13.40" class="difflineminus">-</span>
<a href="#l13.41"></a><span id="l13.41" class="difflineminus">-  // Unregister the dbgserve resource:// location</span>
<a href="#l13.42"></a><span id="l13.42" class="difflineminus">-  let resource = Services.io</span>
<a href="#l13.43"></a><span id="l13.43" class="difflineminus">-                         .getProtocolHandler(&quot;resource&quot;)</span>
<a href="#l13.44"></a><span id="l13.44" class="difflineminus">-                         .QueryInterface(Ci.nsIResProtocolHandler);</span>
<a href="#l13.45"></a><span id="l13.45" class="difflineminus">-  resource.setSubstitution(&quot;dbgserver&quot;, null);</span>
<a href="#l13.46"></a><span id="l13.46" class="difflineminus">-}</span>
<a href="#l13.47"></a><span id="l13.47" class="difflineminus">-</span>
<a href="#l13.48"></a><span id="l13.48" class="difflineminus">-function install(aData, aReason) {}</span>
<a href="#l13.49"></a><span id="l13.49" class="difflineminus">-function uninstall(aData, aReason) {}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1">deleted file mode 100644</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineminus">--- a/mail/components/devtools/extension/content/options.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineplus">+++ /dev/null</span>
<a href="#l14.4"></a><span id="l14.4" class="difflineat">@@ -1,77 +0,0 @@</span>
<a href="#l14.5"></a><span id="l14.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l14.6"></a><span id="l14.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l14.7"></a><span id="l14.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l14.8"></a><span id="l14.8" class="difflineminus">-</span>
<a href="#l14.9"></a><span id="l14.9" class="difflineminus">-Components.utils.import(&quot;resource://dbgserver/modules/RemoteDebuggerServer.jsm&quot;);</span>
<a href="#l14.10"></a><span id="l14.10" class="difflineminus">-Components.utils.import(&quot;resource://gre/modules/PluralForm.jsm&quot;);</span>
<a href="#l14.11"></a><span id="l14.11" class="difflineminus">-</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-/**</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineminus">- * Toggle the debugger and reinitialize the UI</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineminus">- */</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineminus">-function toggleDebugger() {</span>
<a href="#l14.16"></a><span id="l14.16" class="difflineminus">-  applyChanges();</span>
<a href="#l14.17"></a><span id="l14.17" class="difflineminus">-  RemoteDebuggerServer.startstop(!RemoteDebuggerServer.listening);</span>
<a href="#l14.18"></a><span id="l14.18" class="difflineminus">-  updateState();</span>
<a href="#l14.19"></a><span id="l14.19" class="difflineminus">-}</span>
<a href="#l14.20"></a><span id="l14.20" class="difflineminus">-</span>
<a href="#l14.21"></a><span id="l14.21" class="difflineminus">-/**</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineminus">- * Initialize the options pane</span>
<a href="#l14.23"></a><span id="l14.23" class="difflineminus">- */</span>
<a href="#l14.24"></a><span id="l14.24" class="difflineminus">-function initPane() {</span>
<a href="#l14.25"></a><span id="l14.25" class="difflineminus">-  RemoteDebuggerServer.onConnectionChange = updateState;</span>
<a href="#l14.26"></a><span id="l14.26" class="difflineminus">-  window.addEventListener(&quot;unload&quot;, function() {</span>
<a href="#l14.27"></a><span id="l14.27" class="difflineminus">-    RemoteDebuggerServer.onConnectionChange = null;</span>
<a href="#l14.28"></a><span id="l14.28" class="difflineminus">-  }, false);</span>
<a href="#l14.29"></a><span id="l14.29" class="difflineminus">-  updateState();</span>
<a href="#l14.30"></a><span id="l14.30" class="difflineminus">-}</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineminus">-</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineminus">-/**</span>
<a href="#l14.33"></a><span id="l14.33" class="difflineminus">- * Update the label states, i.e on connection change</span>
<a href="#l14.34"></a><span id="l14.34" class="difflineminus">- */</span>
<a href="#l14.35"></a><span id="l14.35" class="difflineminus">-function updateState() {</span>
<a href="#l14.36"></a><span id="l14.36" class="difflineminus">-  let buttonKey = &quot;&quot;;</span>
<a href="#l14.37"></a><span id="l14.37" class="difflineminus">-  let statusKey = &quot;&quot;;</span>
<a href="#l14.38"></a><span id="l14.38" class="difflineminus">-  let statusArg = null;</span>
<a href="#l14.39"></a><span id="l14.39" class="difflineminus">-</span>
<a href="#l14.40"></a><span id="l14.40" class="difflineminus">-  if (RemoteDebuggerServer.supported) {</span>
<a href="#l14.41"></a><span id="l14.41" class="difflineminus">-    if (RemoteDebuggerServer.listening) {</span>
<a href="#l14.42"></a><span id="l14.42" class="difflineminus">-      buttonKey = &quot;stop&quot;;</span>
<a href="#l14.43"></a><span id="l14.43" class="difflineminus">-      if (RemoteDebuggerServer.connections &gt; 0) {</span>
<a href="#l14.44"></a><span id="l14.44" class="difflineminus">-        statusKey = &quot;connected&quot;;</span>
<a href="#l14.45"></a><span id="l14.45" class="difflineminus">-        statusArg = RemoteDebuggerServer.connections;</span>
<a href="#l14.46"></a><span id="l14.46" class="difflineminus">-      } else {</span>
<a href="#l14.47"></a><span id="l14.47" class="difflineminus">-        statusKey = &quot;listening&quot;;</span>
<a href="#l14.48"></a><span id="l14.48" class="difflineminus">-      }</span>
<a href="#l14.49"></a><span id="l14.49" class="difflineminus">-    } else {</span>
<a href="#l14.50"></a><span id="l14.50" class="difflineminus">-      buttonKey = &quot;start&quot;;</span>
<a href="#l14.51"></a><span id="l14.51" class="difflineminus">-      statusKey = &quot;idle&quot;;</span>
<a href="#l14.52"></a><span id="l14.52" class="difflineminus">-    }</span>
<a href="#l14.53"></a><span id="l14.53" class="difflineminus">-  } else {</span>
<a href="#l14.54"></a><span id="l14.54" class="difflineminus">-    buttonKey = &quot;start&quot;;</span>
<a href="#l14.55"></a><span id="l14.55" class="difflineminus">-    statusKey = &quot;unsupported&quot;;</span>
<a href="#l14.56"></a><span id="l14.56" class="difflineminus">-  }</span>
<a href="#l14.57"></a><span id="l14.57" class="difflineminus">-</span>
<a href="#l14.58"></a><span id="l14.58" class="difflineminus">-  let strings = document.getElementById(&quot;strings&quot;);</span>
<a href="#l14.59"></a><span id="l14.59" class="difflineminus">-  let btn = document.getElementById(&quot;toggleDebugger-button&quot;);</span>
<a href="#l14.60"></a><span id="l14.60" class="difflineminus">-  btn.label = strings.getString(&quot;options.&quot; + buttonKey + &quot;.label&quot;);</span>
<a href="#l14.61"></a><span id="l14.61" class="difflineminus">-  btn.disabled = !RemoteDebuggerServer.supported;</span>
<a href="#l14.62"></a><span id="l14.62" class="difflineminus">-</span>
<a href="#l14.63"></a><span id="l14.63" class="difflineminus">-  let lbl = document.getElementById(&quot;status-label&quot;);</span>
<a href="#l14.64"></a><span id="l14.64" class="difflineminus">-  if (statusArg) {</span>
<a href="#l14.65"></a><span id="l14.65" class="difflineminus">-    let status = strings.getFormattedString(&quot;options.&quot; + statusKey + &quot;.label&quot;, [statusArg]);</span>
<a href="#l14.66"></a><span id="l14.66" class="difflineminus">-    lbl.textContent = PluralForm.get(statusArg, status).replace(&quot;#1&quot;, statusArg);</span>
<a href="#l14.67"></a><span id="l14.67" class="difflineminus">-  } else {</span>
<a href="#l14.68"></a><span id="l14.68" class="difflineminus">-    lbl.textContent = strings.getString(&quot;options.&quot; + statusKey + &quot;.label&quot;);</span>
<a href="#l14.69"></a><span id="l14.69" class="difflineminus">-  }</span>
<a href="#l14.70"></a><span id="l14.70" class="difflineminus">-  lbl.setAttribute(&quot;tooltiptext&quot;, strings.getString(&quot;options.&quot; + statusKey + &quot;.tooltip&quot;));</span>
<a href="#l14.71"></a><span id="l14.71" class="difflineminus">-}</span>
<a href="#l14.72"></a><span id="l14.72" class="difflineminus">-</span>
<a href="#l14.73"></a><span id="l14.73" class="difflineminus">-/**</span>
<a href="#l14.74"></a><span id="l14.74" class="difflineminus">- * Apply the pref changes (useful for non-instant-apply platforms)</span>
<a href="#l14.75"></a><span id="l14.75" class="difflineminus">- */</span>
<a href="#l14.76"></a><span id="l14.76" class="difflineminus">-function applyChanges() {</span>
<a href="#l14.77"></a><span id="l14.77" class="difflineminus">-  document.getElementById(&quot;dbgserver-prefpane&quot;).writePreferences(false);</span>
<a href="#l14.78"></a><span id="l14.78" class="difflineminus">-  Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l14.79"></a><span id="l14.79" class="difflineminus">-            .getService(Components.interfaces.nsIPrefService)</span>
<a href="#l14.80"></a><span id="l14.80" class="difflineminus">-            .savePrefFile(null);</span>
<a href="#l14.81"></a><span id="l14.81" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1">deleted file mode 100644</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineminus">--- a/mail/components/devtools/extension/content/options.xul</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineplus">+++ /dev/null</span>
<a href="#l15.4"></a><span id="l15.4" class="difflineat">@@ -1,48 +0,0 @@</span>
<a href="#l15.5"></a><span id="l15.5" class="difflineminus">-&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l15.6"></a><span id="l15.6" class="difflineminus">-&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l15.7"></a><span id="l15.7" class="difflineminus">-   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l15.8"></a><span id="l15.8" class="difflineminus">-   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l15.9"></a><span id="l15.9" class="difflineminus">-</span>
<a href="#l15.10"></a><span id="l15.10" class="difflineminus">-&lt;?xml-stylesheet href=&quot;chrome://global/skin/global.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l15.11"></a><span id="l15.11" class="difflineminus">-</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-&lt;!DOCTYPE prefwindow SYSTEM &quot;chrome://dbgserver/locale/dbgserver.dtd&quot;&gt;</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineminus">-</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineminus">-&lt;prefwindow id=&quot;dbgserver&quot;</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineminus">-            xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineminus">-            title=&quot;&amp;options.title;&quot;</span>
<a href="#l15.17"></a><span id="l15.17" class="difflineminus">-            buttons=&quot;accept&quot;</span>
<a href="#l15.18"></a><span id="l15.18" class="difflineminus">-            width=&quot;300&quot;</span>
<a href="#l15.19"></a><span id="l15.19" class="difflineminus">-            height=&quot;300&quot;</span>
<a href="#l15.20"></a><span id="l15.20" class="difflineminus">-            ondialogaccept=&quot;return true;&quot;&gt;</span>
<a href="#l15.21"></a><span id="l15.21" class="difflineminus">-  &lt;prefpane id=&quot;dbgserver-prefpane&quot; flex=&quot;1&quot; onpaneload=&quot;initPane()&quot;&gt;</span>
<a href="#l15.22"></a><span id="l15.22" class="difflineminus">-    &lt;preferences&gt;</span>
<a href="#l15.23"></a><span id="l15.23" class="difflineminus">-      &lt;preference id=&quot;devtools.debugger.remote-port&quot; name=&quot;devtools.debugger.remote-port&quot; type=&quot;int&quot; onchange=&quot;RemoteDebuggerServer.stop(); updateState();&quot;/&gt;</span>
<a href="#l15.24"></a><span id="l15.24" class="difflineminus">-      &lt;preference id=&quot;devtools.debugger.force-local&quot; name=&quot;devtools.debugger.force-local&quot; type=&quot;bool&quot; inverted=&quot;true&quot;/&gt;</span>
<a href="#l15.25"></a><span id="l15.25" class="difflineminus">-    &lt;/preferences&gt;</span>
<a href="#l15.26"></a><span id="l15.26" class="difflineminus">-</span>
<a href="#l15.27"></a><span id="l15.27" class="difflineminus">-    &lt;grid flex=&quot;1&quot;&gt;</span>
<a href="#l15.28"></a><span id="l15.28" class="difflineminus">-      &lt;columns&gt;</span>
<a href="#l15.29"></a><span id="l15.29" class="difflineminus">-        &lt;column/&gt;</span>
<a href="#l15.30"></a><span id="l15.30" class="difflineminus">-        &lt;column flex=&quot;1&quot;/&gt;</span>
<a href="#l15.31"></a><span id="l15.31" class="difflineminus">-      &lt;/columns&gt;</span>
<a href="#l15.32"></a><span id="l15.32" class="difflineminus">-      &lt;rows&gt;</span>
<a href="#l15.33"></a><span id="l15.33" class="difflineminus">-        &lt;row&gt;</span>
<a href="#l15.34"></a><span id="l15.34" class="difflineminus">-          &lt;label for=&quot;port&quot;&gt;&amp;options.port.label;&lt;/label&gt;</span>
<a href="#l15.35"></a><span id="l15.35" class="difflineminus">-          &lt;textbox type=&quot;number&quot;</span>
<a href="#l15.36"></a><span id="l15.36" class="difflineminus">-                   id=&quot;port&quot;</span>
<a href="#l15.37"></a><span id="l15.37" class="difflineminus">-                   preference=&quot;devtools.debugger.remote-port&quot;/&gt;</span>
<a href="#l15.38"></a><span id="l15.38" class="difflineminus">-        &lt;/row&gt;</span>
<a href="#l15.39"></a><span id="l15.39" class="difflineminus">-        &lt;row&gt;</span>
<a href="#l15.40"></a><span id="l15.40" class="difflineminus">-          &lt;label&gt;&amp;options.status.label;&lt;/label&gt;</span>
<a href="#l15.41"></a><span id="l15.41" class="difflineminus">-          &lt;label id=&quot;status-label&quot;/&gt;</span>
<a href="#l15.42"></a><span id="l15.42" class="difflineminus">-        &lt;/row&gt;</span>
<a href="#l15.43"></a><span id="l15.43" class="difflineminus">-        &lt;checkbox id=&quot;force-local&quot;</span>
<a href="#l15.44"></a><span id="l15.44" class="difflineminus">-                  preference=&quot;devtools.debugger.force-local&quot;</span>
<a href="#l15.45"></a><span id="l15.45" class="difflineminus">-                  label=&quot;&amp;options.forcelocal.label;&quot;/&gt;</span>
<a href="#l15.46"></a><span id="l15.46" class="difflineminus">-      &lt;/rows&gt;</span>
<a href="#l15.47"></a><span id="l15.47" class="difflineminus">-    &lt;/grid&gt;</span>
<a href="#l15.48"></a><span id="l15.48" class="difflineminus">-    &lt;button id=&quot;toggleDebugger-button&quot; oncommand=&quot;toggleDebugger()&quot;/&gt;</span>
<a href="#l15.49"></a><span id="l15.49" class="difflineminus">-  &lt;/prefpane&gt;</span>
<a href="#l15.50"></a><span id="l15.50" class="difflineminus">-  &lt;script src=&quot;chrome://dbgserver/content/options.js&quot; type=&quot;application/javascript&quot;/&gt;</span>
<a href="#l15.51"></a><span id="l15.51" class="difflineminus">-  &lt;stringbundle id=&quot;strings&quot; src=&quot;chrome://dbgserver/locale/dbgserver.properties&quot;/&gt;</span>
<a href="#l15.52"></a><span id="l15.52" class="difflineminus">-&lt;/prefwindow&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1">deleted file mode 100644</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineminus">--- a/mail/components/devtools/extension/install.rdf</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineplus">+++ /dev/null</span>
<a href="#l16.4"></a><span id="l16.4" class="difflineat">@@ -1,29 +0,0 @@</span>
<a href="#l16.5"></a><span id="l16.5" class="difflineminus">-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<a href="#l16.6"></a><span id="l16.6" class="difflineminus">-#filter substitution</span>
<a href="#l16.7"></a><span id="l16.7" class="difflineminus">-&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l16.8"></a><span id="l16.8" class="difflineminus">-   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l16.9"></a><span id="l16.9" class="difflineminus">-   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l16.10"></a><span id="l16.10" class="difflineminus">-</span>
<a href="#l16.11"></a><span id="l16.11" class="difflineminus">-&lt;RDF xmlns=&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-     xmlns:em=&quot;http://www.mozilla.org/2004/em-rdf#&quot;&gt;</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">-  &lt;Description about=&quot;urn:mozilla:install-manifest&quot;&gt;</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineminus">-</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineminus">-    &lt;em:id&gt;remote-debugger@mozilla.org&lt;/em:id&gt;</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineminus">-    &lt;em:version&gt;@MOZILLA_VERSION_U@&lt;/em:version&gt;</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineminus">-    &lt;em:type&gt;2&lt;/em:type&gt;</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineminus">-    &lt;em:bootstrap&gt;true&lt;/em:bootstrap&gt;</span>
<a href="#l16.19"></a><span id="l16.19" class="difflineminus">-</span>
<a href="#l16.20"></a><span id="l16.20" class="difflineminus">-    &lt;em:targetApplication&gt;</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineminus">-      &lt;Description&gt;</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineminus">-        &lt;em:id&gt;toolkit@mozilla.org&lt;/em:id&gt;</span>
<a href="#l16.23"></a><span id="l16.23" class="difflineminus">-        &lt;em:minVersion&gt;@MOZILLA_VERSION_U@&lt;/em:minVersion&gt;</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineminus">-        &lt;em:maxVersion&gt;@MOZILLA_VERSION_U@&lt;/em:maxVersion&gt;</span>
<a href="#l16.25"></a><span id="l16.25" class="difflineminus">-      &lt;/Description&gt;</span>
<a href="#l16.26"></a><span id="l16.26" class="difflineminus">-    &lt;/em:targetApplication&gt;</span>
<a href="#l16.27"></a><span id="l16.27" class="difflineminus">-</span>
<a href="#l16.28"></a><span id="l16.28" class="difflineminus">-    &lt;em:name&gt;Remote Developer Tools Server&lt;/em:name&gt;</span>
<a href="#l16.29"></a><span id="l16.29" class="difflineminus">-    &lt;em:description&gt;Access for the Firefox Web Developer Tools&lt;/em:description&gt;</span>
<a href="#l16.30"></a><span id="l16.30" class="difflineminus">-    &lt;em:creator&gt;Philipp Kewisch&lt;/em:creator&gt;</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineminus">-    &lt;em:optionsURL&gt;chrome://dbgserver/content/options.xul&lt;/em:optionsURL&gt;</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineminus">-  &lt;/Description&gt;</span>
<a href="#l16.33"></a><span id="l16.33" class="difflineminus">-&lt;/RDF&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1">deleted file mode 100644</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineminus">--- a/mail/components/devtools/extension/jar.mn</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineplus">+++ /dev/null</span>
<a href="#l17.4"></a><span id="l17.4" class="difflineat">@@ -1,13 +0,0 @@</span>
<a href="#l17.5"></a><span id="l17.5" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l17.6"></a><span id="l17.6" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l17.7"></a><span id="l17.7" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l17.8"></a><span id="l17.8" class="difflineminus">-#filter substitution</span>
<a href="#l17.9"></a><span id="l17.9" class="difflineminus">-</span>
<a href="#l17.10"></a><span id="l17.10" class="difflineminus">-dbgserver.jar:</span>
<a href="#l17.11"></a><span id="l17.11" class="difflineminus">-% content dbgserver %content/</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-    content/options.xul                          (content/options.xul)</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineminus">-    content/options.js                           (content/options.js)</span>
<a href="#l17.14"></a><span id="l17.14" class="difflineminus">-</span>
<a href="#l17.15"></a><span id="l17.15" class="difflineminus">-% locale dbgserver @AB_CD@ %locale/@AB_CD@/</span>
<a href="#l17.16"></a><span id="l17.16" class="difflineminus">-    locale/@AB_CD@/dbgserver.properties          (%chrome/messenger/devtools/dbgserver.properties)</span>
<a href="#l17.17"></a><span id="l17.17" class="difflineminus">-    locale/@AB_CD@/dbgserver.dtd                 (%chrome/messenger/devtools/dbgserver.dtd)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1">deleted file mode 100644</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineminus">--- a/mail/components/devtools/extension/moz.build</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineplus">+++ /dev/null</span>
<a href="#l18.4"></a><span id="l18.4" class="difflineat">@@ -1,21 +0,0 @@</span>
<a href="#l18.5"></a><span id="l18.5" class="difflineminus">-# vim: set filetype=python:</span>
<a href="#l18.6"></a><span id="l18.6" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l18.7"></a><span id="l18.7" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l18.8"></a><span id="l18.8" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l18.9"></a><span id="l18.9" class="difflineminus">-</span>
<a href="#l18.10"></a><span id="l18.10" class="difflineminus">-EXTRA_JS_MODULES += [&quot;../modules/RemoteDebuggerServer.jsm&quot;,</span>
<a href="#l18.11"></a><span id="l18.11" class="difflineminus">-                     &quot;../modules/XULRootActor.js&quot;]</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineminus">-XPI_NAME = 'dbgserver'</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineminus">-</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineminus">-FINAL_TARGET_PP_FILES += [</span>
<a href="#l18.16"></a><span id="l18.16" class="difflineminus">-    'install.rdf',</span>
<a href="#l18.17"></a><span id="l18.17" class="difflineminus">-]</span>
<a href="#l18.18"></a><span id="l18.18" class="difflineminus">-</span>
<a href="#l18.19"></a><span id="l18.19" class="difflineminus">-FINAL_TARGET_FILES += [</span>
<a href="#l18.20"></a><span id="l18.20" class="difflineminus">-    'bootstrap.js',</span>
<a href="#l18.21"></a><span id="l18.21" class="difflineminus">-]</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineminus">-</span>
<a href="#l18.23"></a><span id="l18.23" class="difflineminus">-JAR_MANIFESTS += ['jar.mn']</span>
<a href="#l18.24"></a><span id="l18.24" class="difflineminus">-</span>
<a href="#l18.25"></a><span id="l18.25" class="difflineminus">-USE_EXTENSION_MANIFEST = True</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mail/components/devtools/jar.mn</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mail/components/devtools/jar.mn</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -1,10 +1,9 @@</span>
<a href="#l19.4"></a><span id="l19.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l19.5"></a><span id="l19.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l19.6"></a><span id="l19.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l19.7"></a><span id="l19.7"> </span>
<a href="#l19.8"></a><span id="l19.8"> messenger.jar:</span>
<a href="#l19.9"></a><span id="l19.9" class="difflineminus">-% overlay chrome://messenger/content/messenger.xul chrome://messenger/content/devtools/dbg-messenger-overlay.xul</span>
<a href="#l19.10"></a><span id="l19.10"> % overlay chrome://devtools/content/webconsole/webconsole.xul chrome://messenger/content/devtools/webconsole-overlay.xul</span>
<a href="#l19.11"></a><span id="l19.11" class="difflineminus">-  content/messenger/devtools/dbg-messenger-overlay.xul     (content/dbg-messenger-overlay.xul)</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-  content/messenger/devtools/dbg-messenger-overlay.js      (content/dbg-messenger-overlay.js)</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineminus">-  content/messenger/devtools/webconsole-overlay.xul        (content/webconsole-overlay.xul)</span>
<a href="#l19.14"></a><span id="l19.14" class="difflineplus">+% overlay chrome://devtools/content/framework/toolbox-process-window.xul chrome://messenger/content/devtools/toolbox-process-overlay.xul</span>
<a href="#l19.15"></a><span id="l19.15" class="difflineplus">+  content/messenger/devtools/webconsole-overlay.xul        (webconsole-overlay.xul)</span>
<a href="#l19.16"></a><span id="l19.16" class="difflineplus">+  content/messenger/devtools/toolbox-process-overlay.xul   (toolbox-process-overlay.xul)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1">deleted file mode 100644</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineminus">--- a/mail/components/devtools/modules/RemoteDebuggerServer.jsm</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineplus">+++ /dev/null</span>
<a href="#l20.4"></a><span id="l20.4" class="difflineat">@@ -1,209 +0,0 @@</span>
<a href="#l20.5"></a><span id="l20.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l20.6"></a><span id="l20.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l20.7"></a><span id="l20.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l20.8"></a><span id="l20.8" class="difflineminus">-</span>
<a href="#l20.9"></a><span id="l20.9" class="difflineminus">-this.EXPORTED_SYMBOLS = [&quot;RemoteDebuggerServer&quot;];</span>
<a href="#l20.10"></a><span id="l20.10" class="difflineminus">-</span>
<a href="#l20.11"></a><span id="l20.11" class="difflineminus">-/**</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">- * A module to wrap the devtools DebuggerServer with some extra methods.</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineminus">- */</span>
<a href="#l20.14"></a><span id="l20.14" class="difflineminus">-</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineminus">-Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineminus">-</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineminus">-/** Load the debugger module, if its available. */</span>
<a href="#l20.18"></a><span id="l20.18" class="difflineminus">-var DebuggerServer = (function() {</span>
<a href="#l20.19"></a><span id="l20.19" class="difflineminus">-  try {</span>
<a href="#l20.20"></a><span id="l20.20" class="difflineminus">-    var { require } = Components.utils.import(&quot;resource://devtools/shared/Loader.jsm&quot;, {});</span>
<a href="#l20.21"></a><span id="l20.21" class="difflineminus">-    return require(&quot;devtools/server/main&quot;).DebuggerServer;</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineminus">-  } catch (e) {}</span>
<a href="#l20.23"></a><span id="l20.23" class="difflineminus">-</span>
<a href="#l20.24"></a><span id="l20.24" class="difflineminus">-  return null;</span>
<a href="#l20.25"></a><span id="l20.25" class="difflineminus">-})();</span>
<a href="#l20.26"></a><span id="l20.26" class="difflineminus">-</span>
<a href="#l20.27"></a><span id="l20.27" class="difflineminus">-/** @return the list of main windows, see isMainWindow */</span>
<a href="#l20.28"></a><span id="l20.28" class="difflineminus">-function getMainWindows() {</span>
<a href="#l20.29"></a><span id="l20.29" class="difflineminus">-  let found = [];</span>
<a href="#l20.30"></a><span id="l20.30" class="difflineminus">-  let windows = Services.wm.getEnumerator(null);</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">-  while (windows.hasMoreElements()) {</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineminus">-    let win = windows.getNext();</span>
<a href="#l20.33"></a><span id="l20.33" class="difflineminus">-    if (isMainWindow(win)) {</span>
<a href="#l20.34"></a><span id="l20.34" class="difflineminus">-      found.push(win);</span>
<a href="#l20.35"></a><span id="l20.35" class="difflineminus">-    }</span>
<a href="#l20.36"></a><span id="l20.36" class="difflineminus">-  }</span>
<a href="#l20.37"></a><span id="l20.37" class="difflineminus">-  return found;</span>
<a href="#l20.38"></a><span id="l20.38" class="difflineminus">-}</span>
<a href="#l20.39"></a><span id="l20.39" class="difflineminus">-</span>
<a href="#l20.40"></a><span id="l20.40" class="difflineminus">-/**</span>
<a href="#l20.41"></a><span id="l20.41" class="difflineminus">- * Check if the window is the &quot;main window&quot; by checking if the host part</span>
<a href="#l20.42"></a><span id="l20.42" class="difflineminus">- * matches the basename of the filename.</span>
<a href="#l20.43"></a><span id="l20.43" class="difflineminus">- *</span>
<a href="#l20.44"></a><span id="l20.44" class="difflineminus">- * @param aWindow       The window to check</span>
<a href="#l20.45"></a><span id="l20.45" class="difflineminus">- */</span>
<a href="#l20.46"></a><span id="l20.46" class="difflineminus">-function isMainWindow(aWindow) {</span>
<a href="#l20.47"></a><span id="l20.47" class="difflineminus">-  let urlParser = Components.classes[&quot;@mozilla.org/network/url-parser;1?auth=no&quot;]</span>
<a href="#l20.48"></a><span id="l20.48" class="difflineminus">-                            .getService(Components.interfaces.nsIURLParser);</span>
<a href="#l20.49"></a><span id="l20.49" class="difflineminus">-  let baseName, bnpos = {}, bnlen = {};</span>
<a href="#l20.50"></a><span id="l20.50" class="difflineminus">-  let path = aWindow.location.pathname;</span>
<a href="#l20.51"></a><span id="l20.51" class="difflineminus">-  urlParser.parseFilePath(path, path.length, {}, {}, bnpos, bnlen, {}, {});</span>
<a href="#l20.52"></a><span id="l20.52" class="difflineminus">-  baseName = path.substr(bnpos.value, bnlen.value);</span>
<a href="#l20.53"></a><span id="l20.53" class="difflineminus">-  return (aWindow.location.hostname == baseName);</span>
<a href="#l20.54"></a><span id="l20.54" class="difflineminus">-}</span>
<a href="#l20.55"></a><span id="l20.55" class="difflineminus">-</span>
<a href="#l20.56"></a><span id="l20.56" class="difflineminus">-/**</span>
<a href="#l20.57"></a><span id="l20.57" class="difflineminus">- * The Frontend for the remote debugger, starts, stops and initializes the</span>
<a href="#l20.58"></a><span id="l20.58" class="difflineminus">- * actors.</span>
<a href="#l20.59"></a><span id="l20.59" class="difflineminus">- */</span>
<a href="#l20.60"></a><span id="l20.60" class="difflineminus">-var RemoteDebuggerServer = {</span>
<a href="#l20.61"></a><span id="l20.61" class="difflineminus">-  /** @return true if the debugger server is running */</span>
<a href="#l20.62"></a><span id="l20.62" class="difflineminus">-  get listening() { return DebuggerServer &amp;&amp; DebuggerServer._listener != null; },</span>
<a href="#l20.63"></a><span id="l20.63" class="difflineminus">-</span>
<a href="#l20.64"></a><span id="l20.64" class="difflineminus">-  /** @return the number of connections to the debugger server */</span>
<a href="#l20.65"></a><span id="l20.65" class="difflineminus">-  get connections() { return DebuggerServer ? Object.keys(DebuggerServer._connections).length : 0; },</span>
<a href="#l20.66"></a><span id="l20.66" class="difflineminus">-</span>
<a href="#l20.67"></a><span id="l20.67" class="difflineminus">-  /** @return true if the debugger server could be loaded */</span>
<a href="#l20.68"></a><span id="l20.68" class="difflineminus">-  get supported() { return !!DebuggerServer; },</span>
<a href="#l20.69"></a><span id="l20.69" class="difflineminus">-</span>
<a href="#l20.70"></a><span id="l20.70" class="difflineminus">-  /**</span>
<a href="#l20.71"></a><span id="l20.71" class="difflineminus">-   * Get all windows that should be checked by the actors. The first one</span>
<a href="#l20.72"></a><span id="l20.72" class="difflineminus">-   * will be used as the chrome window type for DebuggerServer. If this is not</span>
<a href="#l20.73"></a><span id="l20.73" class="difflineminus">-   * set explicitly, it will be detected once from the open window urls.</span>
<a href="#l20.74"></a><span id="l20.74" class="difflineminus">-   */</span>
<a href="#l20.75"></a><span id="l20.75" class="difflineminus">-  get chromeWindowTypes() {</span>
<a href="#l20.76"></a><span id="l20.76" class="difflineminus">-    if (!this._chromeWindowTypes) {</span>
<a href="#l20.77"></a><span id="l20.77" class="difflineminus">-      let mainWindows = getMainWindows().map(function(win) {</span>
<a href="#l20.78"></a><span id="l20.78" class="difflineminus">-        return win.document.documentElement.getAttribute(&quot;windowtype&quot;);</span>
<a href="#l20.79"></a><span id="l20.79" class="difflineminus">-      });</span>
<a href="#l20.80"></a><span id="l20.80" class="difflineminus">-      this._chromeWindowTypes = mainWindows;</span>
<a href="#l20.81"></a><span id="l20.81" class="difflineminus">-    }</span>
<a href="#l20.82"></a><span id="l20.82" class="difflineminus">-</span>
<a href="#l20.83"></a><span id="l20.83" class="difflineminus">-    return this._chromeWindowTypes || [];</span>
<a href="#l20.84"></a><span id="l20.84" class="difflineminus">-  },</span>
<a href="#l20.85"></a><span id="l20.85" class="difflineminus">-  set chromeWindowTypes(v) { this._chromeWindowTypes = v; },</span>
<a href="#l20.86"></a><span id="l20.86" class="difflineminus">-</span>
<a href="#l20.87"></a><span id="l20.87" class="difflineminus">-  /**</span>
<a href="#l20.88"></a><span id="l20.88" class="difflineminus">-   * Set a function to wrap the DebuggerServer's onConnectionChange</span>
<a href="#l20.89"></a><span id="l20.89" class="difflineminus">-   * notification. This is not failsafe with multiple functions or other</span>
<a href="#l20.90"></a><span id="l20.90" class="difflineminus">-   * callers changing the DebuggerServer's function, so it should be used</span>
<a href="#l20.91"></a><span id="l20.91" class="difflineminus">-   * with caution.</span>
<a href="#l20.92"></a><span id="l20.92" class="difflineminus">-   */</span>
<a href="#l20.93"></a><span id="l20.93" class="difflineminus">-  get onConnectionChange() { return DebuggerServer.onConnectionChange; },</span>
<a href="#l20.94"></a><span id="l20.94" class="difflineminus">-  set onConnectionChange(aFunc) {</span>
<a href="#l20.95"></a><span id="l20.95" class="difflineminus">-    if (this.supported) {</span>
<a href="#l20.96"></a><span id="l20.96" class="difflineminus">-      if (aFunc) {</span>
<a href="#l20.97"></a><span id="l20.97" class="difflineminus">-        if (!this._origConnChange) {</span>
<a href="#l20.98"></a><span id="l20.98" class="difflineminus">-          this._origConnChange = DebuggerServer.onConnectionChange;</span>
<a href="#l20.99"></a><span id="l20.99" class="difflineminus">-        }</span>
<a href="#l20.100"></a><span id="l20.100" class="difflineminus">-        DebuggerServer.onConnectionChange = aFunc;</span>
<a href="#l20.101"></a><span id="l20.101" class="difflineminus">-      } else {</span>
<a href="#l20.102"></a><span id="l20.102" class="difflineminus">-        DebuggerServer.onConnectionChange = this._origConnChange;</span>
<a href="#l20.103"></a><span id="l20.103" class="difflineminus">-        this._origConnChange = null;</span>
<a href="#l20.104"></a><span id="l20.104" class="difflineminus">-      }</span>
<a href="#l20.105"></a><span id="l20.105" class="difflineminus">-    }</span>
<a href="#l20.106"></a><span id="l20.106" class="difflineminus">-    return aFunc;</span>
<a href="#l20.107"></a><span id="l20.107" class="difflineminus">-  },</span>
<a href="#l20.108"></a><span id="l20.108" class="difflineminus">-</span>
<a href="#l20.109"></a><span id="l20.109" class="difflineminus">-  /**</span>
<a href="#l20.110"></a><span id="l20.110" class="difflineminus">-   * Ensure the Remote Debugger is properly initialized.</span>
<a href="#l20.111"></a><span id="l20.111" class="difflineminus">-   */</span>
<a href="#l20.112"></a><span id="l20.112" class="difflineminus">-  _checkInit: function() {</span>
<a href="#l20.113"></a><span id="l20.113" class="difflineminus">-    if (DebuggerServer.initialized &amp;&amp; DebuggerServer.createRootActor) {</span>
<a href="#l20.114"></a><span id="l20.114" class="difflineminus">-      return;</span>
<a href="#l20.115"></a><span id="l20.115" class="difflineminus">-    }</span>
<a href="#l20.116"></a><span id="l20.116" class="difflineminus">-</span>
<a href="#l20.117"></a><span id="l20.117" class="difflineminus">-    // Initialize the debugger, if non-local connections are permitted then</span>
<a href="#l20.118"></a><span id="l20.118" class="difflineminus">-    // have the default prompt kick in.</span>
<a href="#l20.119"></a><span id="l20.119" class="difflineminus">-    DebuggerServer.init(() =&gt; {</span>
<a href="#l20.120"></a><span id="l20.120" class="difflineminus">-      return Services.prefs.getBoolPref(&quot;devtools.debugger.force-local&quot;) ||</span>
<a href="#l20.121"></a><span id="l20.121" class="difflineminus">-             DebuggerServer._defaultAllowConnection();</span>
<a href="#l20.122"></a><span id="l20.122" class="difflineminus">-    });</span>
<a href="#l20.123"></a><span id="l20.123" class="difflineminus">-</span>
<a href="#l20.124"></a><span id="l20.124" class="difflineminus">-    // Load the toolkit actors first</span>
<a href="#l20.125"></a><span id="l20.125" class="difflineminus">-    DebuggerServer.addBrowserActors();</span>
<a href="#l20.126"></a><span id="l20.126" class="difflineminus">-</span>
<a href="#l20.127"></a><span id="l20.127" class="difflineminus">-    // Set up the chrome window type</span>
<a href="#l20.128"></a><span id="l20.128" class="difflineminus">-    DebuggerServer.chromeWindowType = this.chromeWindowTypes[0];</span>
<a href="#l20.129"></a><span id="l20.129" class="difflineminus">-</span>
<a href="#l20.130"></a><span id="l20.130" class="difflineminus">-    // Set up the extra actors. Pass DebuggerServer for convenience</span>
<a href="#l20.131"></a><span id="l20.131" class="difflineminus">-    this.extraInit(DebuggerServer);</span>
<a href="#l20.132"></a><span id="l20.132" class="difflineminus">-  },</span>
<a href="#l20.133"></a><span id="l20.133" class="difflineminus">-</span>
<a href="#l20.134"></a><span id="l20.134" class="difflineminus">-  extraInit: function(DebuggerServer) {</span>
<a href="#l20.135"></a><span id="l20.135" class="difflineminus">-    // Overwrite this to add your actors</span>
<a href="#l20.136"></a><span id="l20.136" class="difflineminus">-  },</span>
<a href="#l20.137"></a><span id="l20.137" class="difflineminus">-</span>
<a href="#l20.138"></a><span id="l20.138" class="difflineminus">-  /**</span>
<a href="#l20.139"></a><span id="l20.139" class="difflineminus">-   * Start or stop the server depending on the parameters</span>
<a href="#l20.140"></a><span id="l20.140" class="difflineminus">-   *</span>
<a href="#l20.141"></a><span id="l20.141" class="difflineminus">-   * @param start   If true, start the server, else stop.</span>
<a href="#l20.142"></a><span id="l20.142" class="difflineminus">-   * @return        True if the debugger server was started.</span>
<a href="#l20.143"></a><span id="l20.143" class="difflineminus">-   */</span>
<a href="#l20.144"></a><span id="l20.144" class="difflineminus">-  startstop: function(start) {</span>
<a href="#l20.145"></a><span id="l20.145" class="difflineminus">-    if (start) {</span>
<a href="#l20.146"></a><span id="l20.146" class="difflineminus">-      this.start();</span>
<a href="#l20.147"></a><span id="l20.147" class="difflineminus">-    } else {</span>
<a href="#l20.148"></a><span id="l20.148" class="difflineminus">-      this.stop();</span>
<a href="#l20.149"></a><span id="l20.149" class="difflineminus">-    }</span>
<a href="#l20.150"></a><span id="l20.150" class="difflineminus">-    return this.listening;</span>
<a href="#l20.151"></a><span id="l20.151" class="difflineminus">-  },</span>
<a href="#l20.152"></a><span id="l20.152" class="difflineminus">-</span>
<a href="#l20.153"></a><span id="l20.153" class="difflineminus">-  /**</span>
<a href="#l20.154"></a><span id="l20.154" class="difflineminus">-   * Start the debugger server</span>
<a href="#l20.155"></a><span id="l20.155" class="difflineminus">-   *</span>
<a href="#l20.156"></a><span id="l20.156" class="difflineminus">-   * @return    True, if the server was successfully started</span>
<a href="#l20.157"></a><span id="l20.157" class="difflineminus">-   */</span>
<a href="#l20.158"></a><span id="l20.158" class="difflineminus">-  start: function() {</span>
<a href="#l20.159"></a><span id="l20.159" class="difflineminus">-    if (!this.supported) {</span>
<a href="#l20.160"></a><span id="l20.160" class="difflineminus">-      return false;</span>
<a href="#l20.161"></a><span id="l20.161" class="difflineminus">-    }</span>
<a href="#l20.162"></a><span id="l20.162" class="difflineminus">-</span>
<a href="#l20.163"></a><span id="l20.163" class="difflineminus">-    this._checkInit();</span>
<a href="#l20.164"></a><span id="l20.164" class="difflineminus">-    Services.prefs.setBoolPref('devtools.debugger.remote-enabled', true);</span>
<a href="#l20.165"></a><span id="l20.165" class="difflineminus">-</span>
<a href="#l20.166"></a><span id="l20.166" class="difflineminus">-    // Make sure chrome debugging is enabled, no sense in starting otherwise.</span>
<a href="#l20.167"></a><span id="l20.167" class="difflineminus">-    DebuggerServer.allowChromeProcess = true;</span>
<a href="#l20.168"></a><span id="l20.168" class="difflineminus">-</span>
<a href="#l20.169"></a><span id="l20.169" class="difflineminus">-    let port = Services.prefs.getIntPref('devtools.debugger.remote-port') || 6000;</span>
<a href="#l20.170"></a><span id="l20.170" class="difflineminus">-    try {</span>
<a href="#l20.171"></a><span id="l20.171" class="difflineminus">-      let listener = DebuggerServer.createListener();</span>
<a href="#l20.172"></a><span id="l20.172" class="difflineminus">-      listener.portOrPath = port;</span>
<a href="#l20.173"></a><span id="l20.173" class="difflineminus">-</span>
<a href="#l20.174"></a><span id="l20.174" class="difflineminus">-      // Expose this listener via wifi discovery, if enabled.</span>
<a href="#l20.175"></a><span id="l20.175" class="difflineminus">-      if (Services.prefs.getBoolPref(&quot;devtools.remote.wifi.visible&quot;) &amp;&amp;</span>
<a href="#l20.176"></a><span id="l20.176" class="difflineminus">-          !Services.prefs.getBoolPref(&quot;devtools.debugger.force-local&quot;)) {</span>
<a href="#l20.177"></a><span id="l20.177" class="difflineminus">-        listener.discoverable = true;</span>
<a href="#l20.178"></a><span id="l20.178" class="difflineminus">-      }</span>
<a href="#l20.179"></a><span id="l20.179" class="difflineminus">-</span>
<a href="#l20.180"></a><span id="l20.180" class="difflineminus">-      listener.open();</span>
<a href="#l20.181"></a><span id="l20.181" class="difflineminus">-    } catch (e) {</span>
<a href="#l20.182"></a><span id="l20.182" class="difflineminus">-      Components.utils.reportError(&quot;Unable to start debugger server: &quot; + e);</span>
<a href="#l20.183"></a><span id="l20.183" class="difflineminus">-      return false;</span>
<a href="#l20.184"></a><span id="l20.184" class="difflineminus">-    }</span>
<a href="#l20.185"></a><span id="l20.185" class="difflineminus">-    return true;</span>
<a href="#l20.186"></a><span id="l20.186" class="difflineminus">-  },</span>
<a href="#l20.187"></a><span id="l20.187" class="difflineminus">-</span>
<a href="#l20.188"></a><span id="l20.188" class="difflineminus">-  /**</span>
<a href="#l20.189"></a><span id="l20.189" class="difflineminus">-   * Stop the debugger server.</span>
<a href="#l20.190"></a><span id="l20.190" class="difflineminus">-   *</span>
<a href="#l20.191"></a><span id="l20.191" class="difflineminus">-   * @param aForce      If not passed or true, force debugger server shutdown</span>
<a href="#l20.192"></a><span id="l20.192" class="difflineminus">-   * @return            True, if the server was successfully stopped</span>
<a href="#l20.193"></a><span id="l20.193" class="difflineminus">-   */</span>
<a href="#l20.194"></a><span id="l20.194" class="difflineminus">-  stop: function(aForce=true) {</span>
<a href="#l20.195"></a><span id="l20.195" class="difflineminus">-    if (!this.supported) {</span>
<a href="#l20.196"></a><span id="l20.196" class="difflineminus">-      return false;</span>
<a href="#l20.197"></a><span id="l20.197" class="difflineminus">-    }</span>
<a href="#l20.198"></a><span id="l20.198" class="difflineminus">-</span>
<a href="#l20.199"></a><span id="l20.199" class="difflineminus">-    Services.prefs.setBoolPref('devtools.debugger.remote-enabled', false);</span>
<a href="#l20.200"></a><span id="l20.200" class="difflineminus">-    try {</span>
<a href="#l20.201"></a><span id="l20.201" class="difflineminus">-      DebuggerServer.closeAllListeners(aForce);</span>
<a href="#l20.202"></a><span id="l20.202" class="difflineminus">-    } catch (e) {</span>
<a href="#l20.203"></a><span id="l20.203" class="difflineminus">-      Components.utils.reportError(&quot;Unable to stop debugger server: &quot; + e);</span>
<a href="#l20.204"></a><span id="l20.204" class="difflineminus">-      return false;</span>
<a href="#l20.205"></a><span id="l20.205" class="difflineminus">-    }</span>
<a href="#l20.206"></a><span id="l20.206" class="difflineminus">-    return true;</span>
<a href="#l20.207"></a><span id="l20.207" class="difflineminus">-  }</span>
<a href="#l20.208"></a><span id="l20.208" class="difflineminus">-};</span>
<a href="#l20.209"></a><span id="l20.209" class="difflineminus">-</span>
<a href="#l20.210"></a><span id="l20.210" class="difflineminus">-// Add this to DebuggerServer so the actors can make use of it without loading</span>
<a href="#l20.211"></a><span id="l20.211" class="difflineminus">-// this file, because the URL is different between loading as an extension and</span>
<a href="#l20.212"></a><span id="l20.212" class="difflineminus">-// directly.</span>
<a href="#l20.213"></a><span id="l20.213" class="difflineminus">-DebuggerServer.RemoteDebuggerServer = RemoteDebuggerServer;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1">deleted file mode 100644</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineminus">--- a/mail/components/devtools/modules/XULRootActor.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineplus">+++ /dev/null</span>
<a href="#l21.4"></a><span id="l21.4" class="difflineat">@@ -1,238 +0,0 @@</span>
<a href="#l21.5"></a><span id="l21.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l21.6"></a><span id="l21.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l21.7"></a><span id="l21.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l21.8"></a><span id="l21.8" class="difflineminus">-</span>
<a href="#l21.9"></a><span id="l21.9" class="difflineminus">-/**</span>
<a href="#l21.10"></a><span id="l21.10" class="difflineminus">- * Actors for the remote debugger server.</span>
<a href="#l21.11"></a><span id="l21.11" class="difflineminus">- *</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">- * NOTE: This file is used from both Thundebird and the Debugger Server</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineminus">- * extension. Please don't introduce any Thunderbird-specific code</span>
<a href="#l21.14"></a><span id="l21.14" class="difflineminus">- */</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineminus">-</span>
<a href="#l21.16"></a><span id="l21.16" class="difflineminus">-var { Ci, Cu } = require(&quot;chrome&quot;);</span>
<a href="#l21.17"></a><span id="l21.17" class="difflineminus">-var Services = require(&quot;Services&quot;);</span>
<a href="#l21.18"></a><span id="l21.18" class="difflineminus">-var DevToolsUtils = require(&quot;devtools/shared/DevToolsUtils&quot;);</span>
<a href="#l21.19"></a><span id="l21.19" class="difflineminus">-var { RootActor } = require(&quot;devtools/server/actors/root&quot;);</span>
<a href="#l21.20"></a><span id="l21.20" class="difflineminus">-var { DebuggerServer } = require(&quot;devtools/server/main&quot;);</span>
<a href="#l21.21"></a><span id="l21.21" class="difflineminus">-var { Promise } = Cu.import(&quot;resource://gre/modules/Promise.jsm&quot;, {});</span>
<a href="#l21.22"></a><span id="l21.22" class="difflineminus">-var { BrowserTabList, BrowserTabActor, BrowserAddonList } = require(&quot;devtools/server/actors/webbrowser&quot;);</span>
<a href="#l21.23"></a><span id="l21.23" class="difflineminus">-</span>
<a href="#l21.24"></a><span id="l21.24" class="difflineminus">-/**</span>
<a href="#l21.25"></a><span id="l21.25" class="difflineminus">- * Create the root actor for this XUL application.</span>
<a href="#l21.26"></a><span id="l21.26" class="difflineminus">- *</span>
<a href="#l21.27"></a><span id="l21.27" class="difflineminus">- * @param aConnection       The debugger connection to create the actor for.</span>
<a href="#l21.28"></a><span id="l21.28" class="difflineminus">- * @return                  The mail actor for the connection.</span>
<a href="#l21.29"></a><span id="l21.29" class="difflineminus">- */</span>
<a href="#l21.30"></a><span id="l21.30" class="difflineminus">-function createRootActor(aConnection) {</span>
<a href="#l21.31"></a><span id="l21.31" class="difflineminus">-  let parameters = {</span>
<a href="#l21.32"></a><span id="l21.32" class="difflineminus">-    tabList: new XulTabList(aConnection),</span>
<a href="#l21.33"></a><span id="l21.33" class="difflineminus">-    addonList: new BrowserAddonList(aConnection),</span>
<a href="#l21.34"></a><span id="l21.34" class="difflineminus">-    globalActorFactories: DebuggerServer.globalActorFactories,</span>
<a href="#l21.35"></a><span id="l21.35" class="difflineminus">-    onShutdown: sendShutdownEvent,</span>
<a href="#l21.36"></a><span id="l21.36" class="difflineminus">-  };</span>
<a href="#l21.37"></a><span id="l21.37" class="difflineminus">-</span>
<a href="#l21.38"></a><span id="l21.38" class="difflineminus">-  // Create the root actor and set the application type</span>
<a href="#l21.39"></a><span id="l21.39" class="difflineminus">-  let rootActor = new RootActor(aConnection, parameters);</span>
<a href="#l21.40"></a><span id="l21.40" class="difflineminus">-  if (DebuggerServer.chromeWindowType) {</span>
<a href="#l21.41"></a><span id="l21.41" class="difflineminus">-    rootActor.applicationType = DebuggerServer.chromeWindowType.split(&quot;:&quot;)[0];</span>
<a href="#l21.42"></a><span id="l21.42" class="difflineminus">-  } else {</span>
<a href="#l21.43"></a><span id="l21.43" class="difflineminus">-    rootActor.applicationType = &quot;xulrunner&quot;;</span>
<a href="#l21.44"></a><span id="l21.44" class="difflineminus">-  }</span>
<a href="#l21.45"></a><span id="l21.45" class="difflineminus">-</span>
<a href="#l21.46"></a><span id="l21.46" class="difflineminus">-  return rootActor;</span>
<a href="#l21.47"></a><span id="l21.47" class="difflineminus">-}</span>
<a href="#l21.48"></a><span id="l21.48" class="difflineminus">-</span>
<a href="#l21.49"></a><span id="l21.49" class="difflineminus">-/**</span>
<a href="#l21.50"></a><span id="l21.50" class="difflineminus">- * Returns the window type of the passed window.</span>
<a href="#l21.51"></a><span id="l21.51" class="difflineminus">- */</span>
<a href="#l21.52"></a><span id="l21.52" class="difflineminus">-function appShellDOMWindowType(aWindow) {</span>
<a href="#l21.53"></a><span id="l21.53" class="difflineminus">-  /* This is what nsIWindowMediator's enumerator checks. */</span>
<a href="#l21.54"></a><span id="l21.54" class="difflineminus">-  return aWindow.document.documentElement.getAttribute('windowtype');</span>
<a href="#l21.55"></a><span id="l21.55" class="difflineminus">-}</span>
<a href="#l21.56"></a><span id="l21.56" class="difflineminus">-</span>
<a href="#l21.57"></a><span id="l21.57" class="difflineminus">-/**</span>
<a href="#l21.58"></a><span id="l21.58" class="difflineminus">- * Send a debugger shutdown event to all main windows.</span>
<a href="#l21.59"></a><span id="l21.59" class="difflineminus">- */</span>
<a href="#l21.60"></a><span id="l21.60" class="difflineminus">-function sendShutdownEvent() {</span>
<a href="#l21.61"></a><span id="l21.61" class="difflineminus">-  let windowTypes = DebuggerServer.RemoteDebuggerServer.chromeWindowTypes;</span>
<a href="#l21.62"></a><span id="l21.62" class="difflineminus">-  for (let type of windowTypes) {</span>
<a href="#l21.63"></a><span id="l21.63" class="difflineminus">-    let enumerator = Services.wm.getEnumerator(type);</span>
<a href="#l21.64"></a><span id="l21.64" class="difflineminus">-    while (enumerator.hasMoreElements()) {</span>
<a href="#l21.65"></a><span id="l21.65" class="difflineminus">-      let win = enumerator.getNext();</span>
<a href="#l21.66"></a><span id="l21.66" class="difflineminus">-      let evt = win.document.createEvent(&quot;Event&quot;);</span>
<a href="#l21.67"></a><span id="l21.67" class="difflineminus">-      evt.initEvent(&quot;Debugger:Shutdown&quot;, true, false);</span>
<a href="#l21.68"></a><span id="l21.68" class="difflineminus">-      win.document.documentElement.dispatchEvent(evt);</span>
<a href="#l21.69"></a><span id="l21.69" class="difflineminus">-    }</span>
<a href="#l21.70"></a><span id="l21.70" class="difflineminus">-  }</span>
<a href="#l21.71"></a><span id="l21.71" class="difflineminus">-}</span>
<a href="#l21.72"></a><span id="l21.72" class="difflineminus">-</span>
<a href="#l21.73"></a><span id="l21.73" class="difflineminus">-/**</span>
<a href="#l21.74"></a><span id="l21.74" class="difflineminus">- * The live list of tabs for a XUL Application. The term tab is taken from</span>
<a href="#l21.75"></a><span id="l21.75" class="difflineminus">- * Firefox tabs, where each browser tab shows up as a tab in the debugger.</span>
<a href="#l21.76"></a><span id="l21.76" class="difflineminus">- * Not all apps have the concept where each tab is a content tab, so we will</span>
<a href="#l21.77"></a><span id="l21.77" class="difflineminus">- * be iterating the content windows and presenting them as tabs instead.</span>
<a href="#l21.78"></a><span id="l21.78" class="difflineminus">- *</span>
<a href="#l21.79"></a><span id="l21.79" class="difflineminus">- * @param aConnection       The connection to create the tab list for.</span>
<a href="#l21.80"></a><span id="l21.80" class="difflineminus">- */</span>
<a href="#l21.81"></a><span id="l21.81" class="difflineminus">-function XulTabList(aConnection) {</span>
<a href="#l21.82"></a><span id="l21.82" class="difflineminus">-  this._connection = aConnection;</span>
<a href="#l21.83"></a><span id="l21.83" class="difflineminus">-  this._actorByBrowser = new Map();</span>
<a href="#l21.84"></a><span id="l21.84" class="difflineminus">-</span>
<a href="#l21.85"></a><span id="l21.85" class="difflineminus">-  // These windows should be checked for browser elements</span>
<a href="#l21.86"></a><span id="l21.86" class="difflineminus">-  this._checkedWindows = new Set(DebuggerServer.RemoteDebuggerServer.chromeWindowTypes);</span>
<a href="#l21.87"></a><span id="l21.87" class="difflineminus">-}</span>
<a href="#l21.88"></a><span id="l21.88" class="difflineminus">-</span>
<a href="#l21.89"></a><span id="l21.89" class="difflineminus">-XulTabList.prototype = {</span>
<a href="#l21.90"></a><span id="l21.90" class="difflineminus">-  _onListChanged: null,</span>
<a href="#l21.91"></a><span id="l21.91" class="difflineminus">-  _actorByBrowser: null,</span>
<a href="#l21.92"></a><span id="l21.92" class="difflineminus">-  _checkedWindows: null,</span>
<a href="#l21.93"></a><span id="l21.93" class="difflineminus">-  _mustNotify: false,</span>
<a href="#l21.94"></a><span id="l21.94" class="difflineminus">-  _listeningToMediator: false,</span>
<a href="#l21.95"></a><span id="l21.95" class="difflineminus">-</span>
<a href="#l21.96"></a><span id="l21.96" class="difflineminus">-  get onListChanged() {</span>
<a href="#l21.97"></a><span id="l21.97" class="difflineminus">-    return this._onListChanged;</span>
<a href="#l21.98"></a><span id="l21.98" class="difflineminus">-  },</span>
<a href="#l21.99"></a><span id="l21.99" class="difflineminus">-</span>
<a href="#l21.100"></a><span id="l21.100" class="difflineminus">-  set onListChanged(v) {</span>
<a href="#l21.101"></a><span id="l21.101" class="difflineminus">-    if (v !== null &amp;&amp; typeof v !== 'function') {</span>
<a href="#l21.102"></a><span id="l21.102" class="difflineminus">-      throw Error(&quot;onListChanged property may only be set to 'null' or a function&quot;);</span>
<a href="#l21.103"></a><span id="l21.103" class="difflineminus">-    }</span>
<a href="#l21.104"></a><span id="l21.104" class="difflineminus">-    this._onListChanged = v;</span>
<a href="#l21.105"></a><span id="l21.105" class="difflineminus">-    this._checkListening();</span>
<a href="#l21.106"></a><span id="l21.106" class="difflineminus">-  },</span>
<a href="#l21.107"></a><span id="l21.107" class="difflineminus">-</span>
<a href="#l21.108"></a><span id="l21.108" class="difflineminus">-  _checkListening: function() {</span>
<a href="#l21.109"></a><span id="l21.109" class="difflineminus">-    let shouldListenToMediator =</span>
<a href="#l21.110"></a><span id="l21.110" class="difflineminus">-        ((this._onListChanged &amp;&amp; this._mustNotify) ||</span>
<a href="#l21.111"></a><span id="l21.111" class="difflineminus">-         this._actorByBrowser.size &gt; 0);</span>
<a href="#l21.112"></a><span id="l21.112" class="difflineminus">-</span>
<a href="#l21.113"></a><span id="l21.113" class="difflineminus">-    if (this._listeningToMediator !== shouldListenToMediator) {</span>
<a href="#l21.114"></a><span id="l21.114" class="difflineminus">-      let op = shouldListenToMediator ? &quot;addListener&quot; : &quot;removeListener&quot;;</span>
<a href="#l21.115"></a><span id="l21.115" class="difflineminus">-      Services.wm[op](this);</span>
<a href="#l21.116"></a><span id="l21.116" class="difflineminus">-      this._listeningToMediator = shouldListenToMediator;</span>
<a href="#l21.117"></a><span id="l21.117" class="difflineminus">-    }</span>
<a href="#l21.118"></a><span id="l21.118" class="difflineminus">-  },</span>
<a href="#l21.119"></a><span id="l21.119" class="difflineminus">-</span>
<a href="#l21.120"></a><span id="l21.120" class="difflineminus">-  _notifyListChanged: function() {</span>
<a href="#l21.121"></a><span id="l21.121" class="difflineminus">-    if (this._onListChanged &amp;&amp; this._mustNotify) {</span>
<a href="#l21.122"></a><span id="l21.122" class="difflineminus">-      this._onListChanged();</span>
<a href="#l21.123"></a><span id="l21.123" class="difflineminus">-      this._mustNotify = false;</span>
<a href="#l21.124"></a><span id="l21.124" class="difflineminus">-    }</span>
<a href="#l21.125"></a><span id="l21.125" class="difflineminus">-  },</span>
<a href="#l21.126"></a><span id="l21.126" class="difflineminus">-</span>
<a href="#l21.127"></a><span id="l21.127" class="difflineminus">-  _getTopWindow: function() {</span>
<a href="#l21.128"></a><span id="l21.128" class="difflineminus">-    let winIter = Services.wm.getZOrderDOMWindowEnumerator(null, true);</span>
<a href="#l21.129"></a><span id="l21.129" class="difflineminus">-    while (winIter.hasMoreElements()) {</span>
<a href="#l21.130"></a><span id="l21.130" class="difflineminus">-      let win = winIter.getNext();</span>
<a href="#l21.131"></a><span id="l21.131" class="difflineminus">-      if (this._checkedWindows.has(appShellDOMWindowType(win))) {</span>
<a href="#l21.132"></a><span id="l21.132" class="difflineminus">-        // This is one of our windows, return it</span>
<a href="#l21.133"></a><span id="l21.133" class="difflineminus">-        return win;</span>
<a href="#l21.134"></a><span id="l21.134" class="difflineminus">-      }</span>
<a href="#l21.135"></a><span id="l21.135" class="difflineminus">-    }</span>
<a href="#l21.136"></a><span id="l21.136" class="difflineminus">-    return null;</span>
<a href="#l21.137"></a><span id="l21.137" class="difflineminus">-  },</span>
<a href="#l21.138"></a><span id="l21.138" class="difflineminus">-</span>
<a href="#l21.139"></a><span id="l21.139" class="difflineminus">-  getList: function() {</span>
<a href="#l21.140"></a><span id="l21.140" class="difflineminus">-    let topWindow = this._getTopWindow();</span>
<a href="#l21.141"></a><span id="l21.141" class="difflineminus">-</span>
<a href="#l21.142"></a><span id="l21.142" class="difflineminus">-    // Look for all browser elements in all the windows we care about</span>
<a href="#l21.143"></a><span id="l21.143" class="difflineminus">-    for (let winName of this._checkedWindows) {</span>
<a href="#l21.144"></a><span id="l21.144" class="difflineminus">-      let winIter = Services.wm.getEnumerator(winName);</span>
<a href="#l21.145"></a><span id="l21.145" class="difflineminus">-      while (winIter.hasMoreElements()) {</span>
<a href="#l21.146"></a><span id="l21.146" class="difflineminus">-        let win = winIter.getNext();</span>
<a href="#l21.147"></a><span id="l21.147" class="difflineminus">-        let foundSelected = false;</span>
<a href="#l21.148"></a><span id="l21.148" class="difflineminus">-        // Check for browser elements and create a tab actor for each.</span>
<a href="#l21.149"></a><span id="l21.149" class="difflineminus">-        // This will catch content tabs, the message reader and the</span>
<a href="#l21.150"></a><span id="l21.150" class="difflineminus">-        // multi-message reader.</span>
<a href="#l21.151"></a><span id="l21.151" class="difflineminus">-        for (let browser of win.document.getElementsByTagName(&quot;browser&quot;)) {</span>
<a href="#l21.152"></a><span id="l21.152" class="difflineminus">-          if (browser.currentURI.spec == &quot;about:blank&quot;) {</span>
<a href="#l21.153"></a><span id="l21.153" class="difflineminus">-            // about:blank is not particularly interesting. Don't</span>
<a href="#l21.154"></a><span id="l21.154" class="difflineminus">-            // add it to the list.</span>
<a href="#l21.155"></a><span id="l21.155" class="difflineminus">-            continue;</span>
<a href="#l21.156"></a><span id="l21.156" class="difflineminus">-          }</span>
<a href="#l21.157"></a><span id="l21.157" class="difflineminus">-          let actor = this._actorByBrowser.get(browser);</span>
<a href="#l21.158"></a><span id="l21.158" class="difflineminus">-          if (!actor) {</span>
<a href="#l21.159"></a><span id="l21.159" class="difflineminus">-            actor = new BrowserTabActor(this._connection,</span>
<a href="#l21.160"></a><span id="l21.160" class="difflineminus">-                                        browser, null);</span>
<a href="#l21.161"></a><span id="l21.161" class="difflineminus">-            this._actorByBrowser.set(browser, actor);</span>
<a href="#l21.162"></a><span id="l21.162" class="difflineminus">-          }</span>
<a href="#l21.163"></a><span id="l21.163" class="difflineminus">-</span>
<a href="#l21.164"></a><span id="l21.164" class="difflineminus">-          // Select the first visible browser in the top xul</span>
<a href="#l21.165"></a><span id="l21.165" class="difflineminus">-          // window.</span>
<a href="#l21.166"></a><span id="l21.166" class="difflineminus">-          let bo = browser.boxObject;</span>
<a href="#l21.167"></a><span id="l21.167" class="difflineminus">-          actor.selected = foundSelected =</span>
<a href="#l21.168"></a><span id="l21.168" class="difflineminus">-              win == topWindow &amp;&amp;</span>
<a href="#l21.169"></a><span id="l21.169" class="difflineminus">-              !foundSelected &amp;&amp;</span>
<a href="#l21.170"></a><span id="l21.170" class="difflineminus">-              bo.height &gt; 0 &amp;&amp;</span>
<a href="#l21.171"></a><span id="l21.171" class="difflineminus">-              bo.width &gt; 0;</span>
<a href="#l21.172"></a><span id="l21.172" class="difflineminus">-        }</span>
<a href="#l21.173"></a><span id="l21.173" class="difflineminus">-      }</span>
<a href="#l21.174"></a><span id="l21.174" class="difflineminus">-    }</span>
<a href="#l21.175"></a><span id="l21.175" class="difflineminus">-</span>
<a href="#l21.176"></a><span id="l21.176" class="difflineminus">-    this._mustNotify = true;</span>
<a href="#l21.177"></a><span id="l21.177" class="difflineminus">-    this._checkListening();</span>
<a href="#l21.178"></a><span id="l21.178" class="difflineminus">-</span>
<a href="#l21.179"></a><span id="l21.179" class="difflineminus">-    return Promise.resolve([...this._actorByBrowser.values()]);</span>
<a href="#l21.180"></a><span id="l21.180" class="difflineminus">-  },</span>
<a href="#l21.181"></a><span id="l21.181" class="difflineminus">-</span>
<a href="#l21.182"></a><span id="l21.182" class="difflineminus">-  onOpenWindow: DevToolsUtils.makeInfallible(function(aWindow) {</span>
<a href="#l21.183"></a><span id="l21.183" class="difflineminus">-    let handleLoad = DevToolsUtils.makeInfallible(() =&gt; {</span>
<a href="#l21.184"></a><span id="l21.184" class="difflineminus">-      if (this._checkedWindows.has(appShellDOMWindowType(aWindow))) {</span>
<a href="#l21.185"></a><span id="l21.185" class="difflineminus">-        // This is one of our windows, we need to check for browser</span>
<a href="#l21.186"></a><span id="l21.186" class="difflineminus">-        // elements. Notify is enough, iterate will do the actual actor</span>
<a href="#l21.187"></a><span id="l21.187" class="difflineminus">-        // creation.</span>
<a href="#l21.188"></a><span id="l21.188" class="difflineminus">-        this._notifyListChanged();</span>
<a href="#l21.189"></a><span id="l21.189" class="difflineminus">-      }</span>
<a href="#l21.190"></a><span id="l21.190" class="difflineminus">-    });</span>
<a href="#l21.191"></a><span id="l21.191" class="difflineminus">-</span>
<a href="#l21.192"></a><span id="l21.192" class="difflineminus">-    // You can hardly do anything at all with a XUL window at this point; it</span>
<a href="#l21.193"></a><span id="l21.193" class="difflineminus">-    // doesn't even have its document yet. Wait until its document has</span>
<a href="#l21.194"></a><span id="l21.194" class="difflineminus">-    // loaded, and then see what we've got. This also avoids</span>
<a href="#l21.195"></a><span id="l21.195" class="difflineminus">-    // nsIWindowMediator enumeration from within listeners (bug 873589).</span>
<a href="#l21.196"></a><span id="l21.196" class="difflineminus">-    aWindow = aWindow.QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l21.197"></a><span id="l21.197" class="difflineminus">-                     .getInterface(Ci.nsIDOMWindow);</span>
<a href="#l21.198"></a><span id="l21.198" class="difflineminus">-    aWindow.addEventListener(&quot;load&quot;, handleLoad, {capture: false, once: true});</span>
<a href="#l21.199"></a><span id="l21.199" class="difflineminus">-  }, &quot;XulTabList.prototype.onOpenWindow&quot;),</span>
<a href="#l21.200"></a><span id="l21.200" class="difflineminus">-</span>
<a href="#l21.201"></a><span id="l21.201" class="difflineminus">-  onCloseWindow: DevToolsUtils.makeInfallible(function(aWindow) {</span>
<a href="#l21.202"></a><span id="l21.202" class="difflineminus">-    aWindow = aWindow.QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l21.203"></a><span id="l21.203" class="difflineminus">-                     .getInterface(Ci.nsIDOMWindow);</span>
<a href="#l21.204"></a><span id="l21.204" class="difflineminus">-</span>
<a href="#l21.205"></a><span id="l21.205" class="difflineminus">-    // Only handle our window types</span>
<a href="#l21.206"></a><span id="l21.206" class="difflineminus">-    if (this._checkedWindows.has(appShellDOMWindowType(aWindow))) {</span>
<a href="#l21.207"></a><span id="l21.207" class="difflineminus">-      return;</span>
<a href="#l21.208"></a><span id="l21.208" class="difflineminus">-    }</span>
<a href="#l21.209"></a><span id="l21.209" class="difflineminus">-</span>
<a href="#l21.210"></a><span id="l21.210" class="difflineminus">-    // nsIWindowMediator deadlocks if you call its GetEnumerator method from</span>
<a href="#l21.211"></a><span id="l21.211" class="difflineminus">-    // a nsIWindowMediatorListener's onCloseWindow hook (bug 873589), so</span>
<a href="#l21.212"></a><span id="l21.212" class="difflineminus">-    // handle the close in a different tick.</span>
<a href="#l21.213"></a><span id="l21.213" class="difflineminus">-    Services.tm.currentThread.dispatch(DevToolsUtils.makeInfallible(() =&gt; {</span>
<a href="#l21.214"></a><span id="l21.214" class="difflineminus">-      let shouldNotify = false;</span>
<a href="#l21.215"></a><span id="l21.215" class="difflineminus">-</span>
<a href="#l21.216"></a><span id="l21.216" class="difflineminus">-      // Scan the whole map for browsers that were in this window.</span>
<a href="#l21.217"></a><span id="l21.217" class="difflineminus">-      for (let [browser, actor] of this._actorByBrowser) {</span>
<a href="#l21.218"></a><span id="l21.218" class="difflineminus">-        // The browser document of a closed window has no default view.</span>
<a href="#l21.219"></a><span id="l21.219" class="difflineminus">-        if (!browser.ownerDocument.defaultView) {</span>
<a href="#l21.220"></a><span id="l21.220" class="difflineminus">-          this._actorByBrowser.delete(browser);</span>
<a href="#l21.221"></a><span id="l21.221" class="difflineminus">-          actor.exit();</span>
<a href="#l21.222"></a><span id="l21.222" class="difflineminus">-          shouldNotify = true;</span>
<a href="#l21.223"></a><span id="l21.223" class="difflineminus">-        }</span>
<a href="#l21.224"></a><span id="l21.224" class="difflineminus">-      }</span>
<a href="#l21.225"></a><span id="l21.225" class="difflineminus">-</span>
<a href="#l21.226"></a><span id="l21.226" class="difflineminus">-      if (shouldNotify) {</span>
<a href="#l21.227"></a><span id="l21.227" class="difflineminus">-        this._notifyListChanged();</span>
<a href="#l21.228"></a><span id="l21.228" class="difflineminus">-      }</span>
<a href="#l21.229"></a><span id="l21.229" class="difflineminus">-      this._checkListening();</span>
<a href="#l21.230"></a><span id="l21.230" class="difflineminus">-    }, &quot;XulTabList.prototype.onCloseWindow's delayed body&quot;), 0);</span>
<a href="#l21.231"></a><span id="l21.231" class="difflineminus">-  }, &quot;XulTabList.prototype.onCloseWindow&quot;),</span>
<a href="#l21.232"></a><span id="l21.232" class="difflineminus">-</span>
<a href="#l21.233"></a><span id="l21.233" class="difflineminus">-  onWindowTitleChange: function() {}</span>
<a href="#l21.234"></a><span id="l21.234" class="difflineminus">-};</span>
<a href="#l21.235"></a><span id="l21.235" class="difflineminus">-</span>
<a href="#l21.236"></a><span id="l21.236" class="difflineminus">-exports.register = function(handle) {</span>
<a href="#l21.237"></a><span id="l21.237" class="difflineminus">-  handle.setRootActor(createRootActor);</span>
<a href="#l21.238"></a><span id="l21.238" class="difflineminus">-};</span>
<a href="#l21.239"></a><span id="l21.239" class="difflineminus">-</span>
<a href="#l21.240"></a><span id="l21.240" class="difflineminus">-exports.unregister = function(handle) {</span>
<a href="#l21.241"></a><span id="l21.241" class="difflineminus">-  handle.setRootActor(null);</span>
<a href="#l21.242"></a><span id="l21.242" class="difflineminus">-};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mail/components/devtools/moz.build</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mail/components/devtools/moz.build</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -1,11 +1,15 @@</span>
<a href="#l22.4"></a><span id="l22.4"> # vim: set filetype=python:</span>
<a href="#l22.5"></a><span id="l22.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l22.6"></a><span id="l22.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l22.7"></a><span id="l22.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l22.8"></a><span id="l22.8"> </span>
<a href="#l22.9"></a><span id="l22.9" class="difflineminus">-DIRS += [&quot;extension&quot;]</span>
<a href="#l22.10"></a><span id="l22.10" class="difflineplus">+EXTRA_JS_MODULES += [</span>
<a href="#l22.11"></a><span id="l22.11" class="difflineplus">+    &quot;tb-root-actor.js&quot;,</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineplus">+]</span>
<a href="#l22.13"></a><span id="l22.13"> </span>
<a href="#l22.14"></a><span id="l22.14" class="difflineminus">-EXTRA_JS_MODULES += [&quot;modules/RemoteDebuggerServer.jsm&quot;,</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineminus">-                     &quot;modules/XULRootActor.js&quot;]</span>
<a href="#l22.16"></a><span id="l22.16" class="difflineplus">+EXTRA_COMPONENTS += [</span>
<a href="#l22.17"></a><span id="l22.17" class="difflineplus">+    &quot;devtools-loader.js&quot;,</span>
<a href="#l22.18"></a><span id="l22.18" class="difflineplus">+    &quot;devtools-loader.manifest&quot;,</span>
<a href="#l22.19"></a><span id="l22.19" class="difflineplus">+]</span>
<a href="#l22.20"></a><span id="l22.20"> </span>
<a href="#l22.21"></a><span id="l22.21"> JAR_MANIFESTS += ['jar.mn']</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1">new file mode 100644</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineminus">--- /dev/null</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineplus">+++ b/mail/components/devtools/tb-root-actor.js</span>
<a href="#l23.4"></a><span id="l23.4" class="difflineat">@@ -0,0 +1,271 @@</span>
<a href="#l23.5"></a><span id="l23.5" class="difflineplus">+/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l23.6"></a><span id="l23.6" class="difflineplus">+ * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l23.7"></a><span id="l23.7" class="difflineplus">+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l23.8"></a><span id="l23.8" class="difflineplus">+</span>
<a href="#l23.9"></a><span id="l23.9" class="difflineplus">+/**</span>
<a href="#l23.10"></a><span id="l23.10" class="difflineplus">+ * Actors for Thunderbird Developer Tools, for example the root actor or tab</span>
<a href="#l23.11"></a><span id="l23.11" class="difflineplus">+ * list actor.</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineplus">+ */</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+</span>
<a href="#l23.14"></a><span id="l23.14" class="difflineplus">+var { Ci, Cc } = require(&quot;chrome&quot;);</span>
<a href="#l23.15"></a><span id="l23.15" class="difflineplus">+var Services = require(&quot;Services&quot;);</span>
<a href="#l23.16"></a><span id="l23.16" class="difflineplus">+var DevToolsUtils = require(&quot;devtools/shared/DevToolsUtils&quot;);</span>
<a href="#l23.17"></a><span id="l23.17" class="difflineplus">+var promise = require('promise');</span>
<a href="#l23.18"></a><span id="l23.18" class="difflineplus">+var { RootActor } = require(&quot;devtools/server/actors/root&quot;);</span>
<a href="#l23.19"></a><span id="l23.19" class="difflineplus">+var { DebuggerServer } = require(&quot;devtools/server/main&quot;);</span>
<a href="#l23.20"></a><span id="l23.20" class="difflineplus">+var { BrowserTabList, BrowserTabActor, BrowserAddonList } = require(&quot;devtools/server/actors/webbrowser&quot;);</span>
<a href="#l23.21"></a><span id="l23.21" class="difflineplus">+</span>
<a href="#l23.22"></a><span id="l23.22" class="difflineplus">+/**</span>
<a href="#l23.23"></a><span id="l23.23" class="difflineplus">+ * Create the root actor for Thunderbird.</span>
<a href="#l23.24"></a><span id="l23.24" class="difflineplus">+ *</span>
<a href="#l23.25"></a><span id="l23.25" class="difflineplus">+ * @param aConnection       The debugger connection to create the actor for.</span>
<a href="#l23.26"></a><span id="l23.26" class="difflineplus">+ * @return                  The mail actor for the connection.</span>
<a href="#l23.27"></a><span id="l23.27" class="difflineplus">+ */</span>
<a href="#l23.28"></a><span id="l23.28" class="difflineplus">+function createRootActor(aConnection) {</span>
<a href="#l23.29"></a><span id="l23.29" class="difflineplus">+  let parameters = {</span>
<a href="#l23.30"></a><span id="l23.30" class="difflineplus">+    tabList: new TBTabList(aConnection),</span>
<a href="#l23.31"></a><span id="l23.31" class="difflineplus">+    addonList: new BrowserAddonList(aConnection),</span>
<a href="#l23.32"></a><span id="l23.32" class="difflineplus">+    globalActorFactories: DebuggerServer.globalActorFactories,</span>
<a href="#l23.33"></a><span id="l23.33" class="difflineplus">+    onShutdown: sendShutdownEvent,</span>
<a href="#l23.34"></a><span id="l23.34" class="difflineplus">+  };</span>
<a href="#l23.35"></a><span id="l23.35" class="difflineplus">+</span>
<a href="#l23.36"></a><span id="l23.36" class="difflineplus">+  // Create the root actor and set the application type</span>
<a href="#l23.37"></a><span id="l23.37" class="difflineplus">+  let rootActor = new RootActor(aConnection, parameters);</span>
<a href="#l23.38"></a><span id="l23.38" class="difflineplus">+  if (DebuggerServer.chromeWindowType) {</span>
<a href="#l23.39"></a><span id="l23.39" class="difflineplus">+    rootActor.applicationType = DebuggerServer.chromeWindowType.split(&quot;:&quot;)[0];</span>
<a href="#l23.40"></a><span id="l23.40" class="difflineplus">+  }</span>
<a href="#l23.41"></a><span id="l23.41" class="difflineplus">+</span>
<a href="#l23.42"></a><span id="l23.42" class="difflineplus">+  return rootActor;</span>
<a href="#l23.43"></a><span id="l23.43" class="difflineplus">+}</span>
<a href="#l23.44"></a><span id="l23.44" class="difflineplus">+createRootActor.isMailRootActor = true;</span>
<a href="#l23.45"></a><span id="l23.45" class="difflineplus">+</span>
<a href="#l23.46"></a><span id="l23.46" class="difflineplus">+function getChromeWindowTypes() {</span>
<a href="#l23.47"></a><span id="l23.47" class="difflineplus">+  /** @return the list of main windows, see isMainWindow */</span>
<a href="#l23.48"></a><span id="l23.48" class="difflineplus">+  function getMainWindows() {</span>
<a href="#l23.49"></a><span id="l23.49" class="difflineplus">+    let found = [];</span>
<a href="#l23.50"></a><span id="l23.50" class="difflineplus">+    let windows = Services.wm.getEnumerator(null);</span>
<a href="#l23.51"></a><span id="l23.51" class="difflineplus">+    while (windows.hasMoreElements()) {</span>
<a href="#l23.52"></a><span id="l23.52" class="difflineplus">+      let win = windows.getNext();</span>
<a href="#l23.53"></a><span id="l23.53" class="difflineplus">+      if (isMainWindow(win)) {</span>
<a href="#l23.54"></a><span id="l23.54" class="difflineplus">+        found.push(win);</span>
<a href="#l23.55"></a><span id="l23.55" class="difflineplus">+      }</span>
<a href="#l23.56"></a><span id="l23.56" class="difflineplus">+    }</span>
<a href="#l23.57"></a><span id="l23.57" class="difflineplus">+    return found;</span>
<a href="#l23.58"></a><span id="l23.58" class="difflineplus">+  }</span>
<a href="#l23.59"></a><span id="l23.59" class="difflineplus">+</span>
<a href="#l23.60"></a><span id="l23.60" class="difflineplus">+  /**</span>
<a href="#l23.61"></a><span id="l23.61" class="difflineplus">+   * Check if the window is the &quot;main window&quot; by checking if the host part</span>
<a href="#l23.62"></a><span id="l23.62" class="difflineplus">+   * matches the basename of the filename.</span>
<a href="#l23.63"></a><span id="l23.63" class="difflineplus">+   *</span>
<a href="#l23.64"></a><span id="l23.64" class="difflineplus">+   * @param aWindow       The window to check</span>
<a href="#l23.65"></a><span id="l23.65" class="difflineplus">+   */</span>
<a href="#l23.66"></a><span id="l23.66" class="difflineplus">+  function isMainWindow(aWindow) {</span>
<a href="#l23.67"></a><span id="l23.67" class="difflineplus">+    let urlParser = Cc[&quot;@mozilla.org/network/url-parser;1?auth=no&quot;]</span>
<a href="#l23.68"></a><span id="l23.68" class="difflineplus">+                      .getService(Ci.nsIURLParser);</span>
<a href="#l23.69"></a><span id="l23.69" class="difflineplus">+    let baseName, bnpos = {}, bnlen = {};</span>
<a href="#l23.70"></a><span id="l23.70" class="difflineplus">+    let path = aWindow.location.pathname;</span>
<a href="#l23.71"></a><span id="l23.71" class="difflineplus">+    urlParser.parseFilePath(path, path.length, {}, {}, bnpos, bnlen, {}, {});</span>
<a href="#l23.72"></a><span id="l23.72" class="difflineplus">+    baseName = path.substr(bnpos.value, bnlen.value);</span>
<a href="#l23.73"></a><span id="l23.73" class="difflineplus">+    return (aWindow.location.hostname == baseName);</span>
<a href="#l23.74"></a><span id="l23.74" class="difflineplus">+  }</span>
<a href="#l23.75"></a><span id="l23.75" class="difflineplus">+</span>
<a href="#l23.76"></a><span id="l23.76" class="difflineplus">+  return getMainWindows().map((win) =&gt; {</span>
<a href="#l23.77"></a><span id="l23.77" class="difflineplus">+    return win.document.documentElement.getAttribute(&quot;windowtype&quot;);</span>
<a href="#l23.78"></a><span id="l23.78" class="difflineplus">+  });</span>
<a href="#l23.79"></a><span id="l23.79" class="difflineplus">+}</span>
<a href="#l23.80"></a><span id="l23.80" class="difflineplus">+</span>
<a href="#l23.81"></a><span id="l23.81" class="difflineplus">+/**</span>
<a href="#l23.82"></a><span id="l23.82" class="difflineplus">+ * Returns the window type of the passed window.</span>
<a href="#l23.83"></a><span id="l23.83" class="difflineplus">+ */</span>
<a href="#l23.84"></a><span id="l23.84" class="difflineplus">+function appShellDOMWindowType(aWindow) {</span>
<a href="#l23.85"></a><span id="l23.85" class="difflineplus">+  // This is what nsIWindowMediator's enumerator checks.</span>
<a href="#l23.86"></a><span id="l23.86" class="difflineplus">+  return aWindow.document.documentElement.getAttribute('windowtype');</span>
<a href="#l23.87"></a><span id="l23.87" class="difflineplus">+}</span>
<a href="#l23.88"></a><span id="l23.88" class="difflineplus">+</span>
<a href="#l23.89"></a><span id="l23.89" class="difflineplus">+/**</span>
<a href="#l23.90"></a><span id="l23.90" class="difflineplus">+ * Send a debugger shutdown event to all main windows.</span>
<a href="#l23.91"></a><span id="l23.91" class="difflineplus">+ */</span>
<a href="#l23.92"></a><span id="l23.92" class="difflineplus">+function sendShutdownEvent() {</span>
<a href="#l23.93"></a><span id="l23.93" class="difflineplus">+  let windowTypes = getChromeWindowTypes();</span>
<a href="#l23.94"></a><span id="l23.94" class="difflineplus">+  for (let type of windowTypes) {</span>
<a href="#l23.95"></a><span id="l23.95" class="difflineplus">+    let enumerator = Services.wm.getEnumerator(type);</span>
<a href="#l23.96"></a><span id="l23.96" class="difflineplus">+    while (enumerator.hasMoreElements()) {</span>
<a href="#l23.97"></a><span id="l23.97" class="difflineplus">+      let win = enumerator.getNext();</span>
<a href="#l23.98"></a><span id="l23.98" class="difflineplus">+      let evt = win.document.createEvent(&quot;Event&quot;);</span>
<a href="#l23.99"></a><span id="l23.99" class="difflineplus">+      evt.initEvent(&quot;Debugger:Shutdown&quot;, true, false);</span>
<a href="#l23.100"></a><span id="l23.100" class="difflineplus">+      win.document.documentElement.dispatchEvent(evt);</span>
<a href="#l23.101"></a><span id="l23.101" class="difflineplus">+    }</span>
<a href="#l23.102"></a><span id="l23.102" class="difflineplus">+  }</span>
<a href="#l23.103"></a><span id="l23.103" class="difflineplus">+}</span>
<a href="#l23.104"></a><span id="l23.104" class="difflineplus">+</span>
<a href="#l23.105"></a><span id="l23.105" class="difflineplus">+/**</span>
<a href="#l23.106"></a><span id="l23.106" class="difflineplus">+ * The live list of tabs for Thunderbird. The term tab is taken from</span>
<a href="#l23.107"></a><span id="l23.107" class="difflineplus">+ * Firefox tabs, where each browser tab shows up as a tab in the debugger.</span>
<a href="#l23.108"></a><span id="l23.108" class="difflineplus">+ * This is not the case for Thunderbird, so we will be iterating the content</span>
<a href="#l23.109"></a><span id="l23.109" class="difflineplus">+ * windows and presenting them as tabs instead.</span>
<a href="#l23.110"></a><span id="l23.110" class="difflineplus">+ *</span>
<a href="#l23.111"></a><span id="l23.111" class="difflineplus">+ * @param aConnection       The connection to create the tab list for.</span>
<a href="#l23.112"></a><span id="l23.112" class="difflineplus">+ */</span>
<a href="#l23.113"></a><span id="l23.113" class="difflineplus">+function TBTabList(aConnection) {</span>
<a href="#l23.114"></a><span id="l23.114" class="difflineplus">+  this._connection = aConnection;</span>
<a href="#l23.115"></a><span id="l23.115" class="difflineplus">+  this._actorByBrowser = new Map();</span>
<a href="#l23.116"></a><span id="l23.116" class="difflineplus">+</span>
<a href="#l23.117"></a><span id="l23.117" class="difflineplus">+  // These windows should be checked for browser elements</span>
<a href="#l23.118"></a><span id="l23.118" class="difflineplus">+</span>
<a href="#l23.119"></a><span id="l23.119" class="difflineplus">+  this._checkedWindows = new Set(getChromeWindowTypes());</span>
<a href="#l23.120"></a><span id="l23.120" class="difflineplus">+}</span>
<a href="#l23.121"></a><span id="l23.121" class="difflineplus">+</span>
<a href="#l23.122"></a><span id="l23.122" class="difflineplus">+TBTabList.prototype = {</span>
<a href="#l23.123"></a><span id="l23.123" class="difflineplus">+  _onListChanged: null,</span>
<a href="#l23.124"></a><span id="l23.124" class="difflineplus">+  _actorByBrowser: null,</span>
<a href="#l23.125"></a><span id="l23.125" class="difflineplus">+  _checkedWindows: null,</span>
<a href="#l23.126"></a><span id="l23.126" class="difflineplus">+  _mustNotify: false,</span>
<a href="#l23.127"></a><span id="l23.127" class="difflineplus">+  _listeningToMediator: false,</span>
<a href="#l23.128"></a><span id="l23.128" class="difflineplus">+</span>
<a href="#l23.129"></a><span id="l23.129" class="difflineplus">+  get onListChanged() {</span>
<a href="#l23.130"></a><span id="l23.130" class="difflineplus">+    return this._onListChanged;</span>
<a href="#l23.131"></a><span id="l23.131" class="difflineplus">+  },</span>
<a href="#l23.132"></a><span id="l23.132" class="difflineplus">+</span>
<a href="#l23.133"></a><span id="l23.133" class="difflineplus">+  set onListChanged(v) {</span>
<a href="#l23.134"></a><span id="l23.134" class="difflineplus">+    if (v !== null &amp;&amp; typeof v !== 'function') {</span>
<a href="#l23.135"></a><span id="l23.135" class="difflineplus">+      throw Error(&quot;onListChanged property may only be set to 'null' or a function&quot;);</span>
<a href="#l23.136"></a><span id="l23.136" class="difflineplus">+    }</span>
<a href="#l23.137"></a><span id="l23.137" class="difflineplus">+    this._onListChanged = v;</span>
<a href="#l23.138"></a><span id="l23.138" class="difflineplus">+    this._checkListening();</span>
<a href="#l23.139"></a><span id="l23.139" class="difflineplus">+  },</span>
<a href="#l23.140"></a><span id="l23.140" class="difflineplus">+</span>
<a href="#l23.141"></a><span id="l23.141" class="difflineplus">+  _checkListening: function() {</span>
<a href="#l23.142"></a><span id="l23.142" class="difflineplus">+    let shouldListenToMediator =</span>
<a href="#l23.143"></a><span id="l23.143" class="difflineplus">+        ((this._onListChanged &amp;&amp; this._mustNotify) ||</span>
<a href="#l23.144"></a><span id="l23.144" class="difflineplus">+         this._actorByBrowser.size &gt; 0);</span>
<a href="#l23.145"></a><span id="l23.145" class="difflineplus">+</span>
<a href="#l23.146"></a><span id="l23.146" class="difflineplus">+    if (this._listeningToMediator !== shouldListenToMediator) {</span>
<a href="#l23.147"></a><span id="l23.147" class="difflineplus">+      let op = shouldListenToMediator ? &quot;addListener&quot; : &quot;removeListener&quot;;</span>
<a href="#l23.148"></a><span id="l23.148" class="difflineplus">+      Services.wm[op](this);</span>
<a href="#l23.149"></a><span id="l23.149" class="difflineplus">+      this._listeningToMediator = shouldListenToMediator;</span>
<a href="#l23.150"></a><span id="l23.150" class="difflineplus">+    }</span>
<a href="#l23.151"></a><span id="l23.151" class="difflineplus">+  },</span>
<a href="#l23.152"></a><span id="l23.152" class="difflineplus">+</span>
<a href="#l23.153"></a><span id="l23.153" class="difflineplus">+  _notifyListChanged: function() {</span>
<a href="#l23.154"></a><span id="l23.154" class="difflineplus">+    if (this._onListChanged &amp;&amp; this._mustNotify) {</span>
<a href="#l23.155"></a><span id="l23.155" class="difflineplus">+      this._onListChanged();</span>
<a href="#l23.156"></a><span id="l23.156" class="difflineplus">+      this._mustNotify = false;</span>
<a href="#l23.157"></a><span id="l23.157" class="difflineplus">+    }</span>
<a href="#l23.158"></a><span id="l23.158" class="difflineplus">+  },</span>
<a href="#l23.159"></a><span id="l23.159" class="difflineplus">+</span>
<a href="#l23.160"></a><span id="l23.160" class="difflineplus">+  _getTopWindow: function() {</span>
<a href="#l23.161"></a><span id="l23.161" class="difflineplus">+    let winIter = Services.wm.getZOrderDOMWindowEnumerator(null, true);</span>
<a href="#l23.162"></a><span id="l23.162" class="difflineplus">+    while (winIter.hasMoreElements()) {</span>
<a href="#l23.163"></a><span id="l23.163" class="difflineplus">+      let win = winIter.getNext();</span>
<a href="#l23.164"></a><span id="l23.164" class="difflineplus">+      if (this._checkedWindows.has(appShellDOMWindowType(win))) {</span>
<a href="#l23.165"></a><span id="l23.165" class="difflineplus">+        // This is one of our windows, return it</span>
<a href="#l23.166"></a><span id="l23.166" class="difflineplus">+        return win;</span>
<a href="#l23.167"></a><span id="l23.167" class="difflineplus">+      }</span>
<a href="#l23.168"></a><span id="l23.168" class="difflineplus">+    }</span>
<a href="#l23.169"></a><span id="l23.169" class="difflineplus">+    return null;</span>
<a href="#l23.170"></a><span id="l23.170" class="difflineplus">+  },</span>
<a href="#l23.171"></a><span id="l23.171" class="difflineplus">+</span>
<a href="#l23.172"></a><span id="l23.172" class="difflineplus">+  getList: function() {</span>
<a href="#l23.173"></a><span id="l23.173" class="difflineplus">+    let topWindow = this._getTopWindow();</span>
<a href="#l23.174"></a><span id="l23.174" class="difflineplus">+</span>
<a href="#l23.175"></a><span id="l23.175" class="difflineplus">+    // Look for all browser elements in all the windows we care about</span>
<a href="#l23.176"></a><span id="l23.176" class="difflineplus">+    for (let winName of this._checkedWindows) {</span>
<a href="#l23.177"></a><span id="l23.177" class="difflineplus">+      let winIter = Services.wm.getEnumerator(winName);</span>
<a href="#l23.178"></a><span id="l23.178" class="difflineplus">+      while (winIter.hasMoreElements()) {</span>
<a href="#l23.179"></a><span id="l23.179" class="difflineplus">+        let win = winIter.getNext();</span>
<a href="#l23.180"></a><span id="l23.180" class="difflineplus">+        let foundSelected = false;</span>
<a href="#l23.181"></a><span id="l23.181" class="difflineplus">+        // Check for browser elements and create a tab actor for each.</span>
<a href="#l23.182"></a><span id="l23.182" class="difflineplus">+        // This will catch content tabs, the message reader and the</span>
<a href="#l23.183"></a><span id="l23.183" class="difflineplus">+        // multi-message reader.</span>
<a href="#l23.184"></a><span id="l23.184" class="difflineplus">+        for (let browser of win.document.getElementsByTagName(&quot;browser&quot;)) {</span>
<a href="#l23.185"></a><span id="l23.185" class="difflineplus">+          if (browser.currentURI.spec == &quot;about:blank&quot;) {</span>
<a href="#l23.186"></a><span id="l23.186" class="difflineplus">+            // about:blank is not particularly interesting. Don't</span>
<a href="#l23.187"></a><span id="l23.187" class="difflineplus">+            // add it to the list.</span>
<a href="#l23.188"></a><span id="l23.188" class="difflineplus">+            continue;</span>
<a href="#l23.189"></a><span id="l23.189" class="difflineplus">+          }</span>
<a href="#l23.190"></a><span id="l23.190" class="difflineplus">+          let actor = this._actorByBrowser.get(browser);</span>
<a href="#l23.191"></a><span id="l23.191" class="difflineplus">+          if (!actor) {</span>
<a href="#l23.192"></a><span id="l23.192" class="difflineplus">+            actor = new BrowserTabActor(this._connection,</span>
<a href="#l23.193"></a><span id="l23.193" class="difflineplus">+                                        browser, null);</span>
<a href="#l23.194"></a><span id="l23.194" class="difflineplus">+            this._actorByBrowser.set(browser, actor);</span>
<a href="#l23.195"></a><span id="l23.195" class="difflineplus">+          }</span>
<a href="#l23.196"></a><span id="l23.196" class="difflineplus">+</span>
<a href="#l23.197"></a><span id="l23.197" class="difflineplus">+          // Select the first visible browser in the top xul</span>
<a href="#l23.198"></a><span id="l23.198" class="difflineplus">+          // window.</span>
<a href="#l23.199"></a><span id="l23.199" class="difflineplus">+          let bo = browser.boxObject;</span>
<a href="#l23.200"></a><span id="l23.200" class="difflineplus">+          actor.selected = foundSelected =</span>
<a href="#l23.201"></a><span id="l23.201" class="difflineplus">+              win == topWindow &amp;&amp;</span>
<a href="#l23.202"></a><span id="l23.202" class="difflineplus">+              !foundSelected &amp;&amp;</span>
<a href="#l23.203"></a><span id="l23.203" class="difflineplus">+              bo.height &gt; 0 &amp;&amp;</span>
<a href="#l23.204"></a><span id="l23.204" class="difflineplus">+              bo.width &gt; 0;</span>
<a href="#l23.205"></a><span id="l23.205" class="difflineplus">+        }</span>
<a href="#l23.206"></a><span id="l23.206" class="difflineplus">+      }</span>
<a href="#l23.207"></a><span id="l23.207" class="difflineplus">+    }</span>
<a href="#l23.208"></a><span id="l23.208" class="difflineplus">+</span>
<a href="#l23.209"></a><span id="l23.209" class="difflineplus">+    this._mustNotify = true;</span>
<a href="#l23.210"></a><span id="l23.210" class="difflineplus">+    this._checkListening();</span>
<a href="#l23.211"></a><span id="l23.211" class="difflineplus">+</span>
<a href="#l23.212"></a><span id="l23.212" class="difflineplus">+    return promise.resolve([...this._actorByBrowser.values()]);</span>
<a href="#l23.213"></a><span id="l23.213" class="difflineplus">+  },</span>
<a href="#l23.214"></a><span id="l23.214" class="difflineplus">+</span>
<a href="#l23.215"></a><span id="l23.215" class="difflineplus">+  onOpenWindow: DevToolsUtils.makeInfallible(function(aWindow) {</span>
<a href="#l23.216"></a><span id="l23.216" class="difflineplus">+    let handleLoad = DevToolsUtils.makeInfallible(() =&gt; {</span>
<a href="#l23.217"></a><span id="l23.217" class="difflineplus">+      if (this._checkedWindows.has(appShellDOMWindowType(aWindow))) {</span>
<a href="#l23.218"></a><span id="l23.218" class="difflineplus">+        // This is one of our windows, we need to check for browser</span>
<a href="#l23.219"></a><span id="l23.219" class="difflineplus">+        // elements. Notify is enough, iterate will do the actual actor</span>
<a href="#l23.220"></a><span id="l23.220" class="difflineplus">+        // creation.</span>
<a href="#l23.221"></a><span id="l23.221" class="difflineplus">+        this._notifyListChanged();</span>
<a href="#l23.222"></a><span id="l23.222" class="difflineplus">+      }</span>
<a href="#l23.223"></a><span id="l23.223" class="difflineplus">+    });</span>
<a href="#l23.224"></a><span id="l23.224" class="difflineplus">+</span>
<a href="#l23.225"></a><span id="l23.225" class="difflineplus">+    // You can hardly do anything at all with a XUL window at this point; it</span>
<a href="#l23.226"></a><span id="l23.226" class="difflineplus">+    // doesn't even have its document yet. Wait until its document has</span>
<a href="#l23.227"></a><span id="l23.227" class="difflineplus">+    // loaded, and then see what we've got. This also avoids</span>
<a href="#l23.228"></a><span id="l23.228" class="difflineplus">+    // nsIWindowMediator enumeration from within listeners (bug 873589).</span>
<a href="#l23.229"></a><span id="l23.229" class="difflineplus">+    aWindow = aWindow.QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l23.230"></a><span id="l23.230" class="difflineplus">+                     .getInterface(Ci.nsIDOMWindow);</span>
<a href="#l23.231"></a><span id="l23.231" class="difflineplus">+    aWindow.addEventListener(&quot;load&quot;, handleLoad, {capture: false, once: true});</span>
<a href="#l23.232"></a><span id="l23.232" class="difflineplus">+  }, &quot;TBTabList.prototype.onOpenWindow&quot;),</span>
<a href="#l23.233"></a><span id="l23.233" class="difflineplus">+</span>
<a href="#l23.234"></a><span id="l23.234" class="difflineplus">+  onCloseWindow: DevToolsUtils.makeInfallible(function(aWindow) {</span>
<a href="#l23.235"></a><span id="l23.235" class="difflineplus">+    aWindow = aWindow.QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l23.236"></a><span id="l23.236" class="difflineplus">+                     .getInterface(Ci.nsIDOMWindow);</span>
<a href="#l23.237"></a><span id="l23.237" class="difflineplus">+</span>
<a href="#l23.238"></a><span id="l23.238" class="difflineplus">+    // Only handle our window types</span>
<a href="#l23.239"></a><span id="l23.239" class="difflineplus">+    if (this._checkedWindows.has(appShellDOMWindowType(aWindow))) {</span>
<a href="#l23.240"></a><span id="l23.240" class="difflineplus">+      return;</span>
<a href="#l23.241"></a><span id="l23.241" class="difflineplus">+    }</span>
<a href="#l23.242"></a><span id="l23.242" class="difflineplus">+</span>
<a href="#l23.243"></a><span id="l23.243" class="difflineplus">+    // nsIWindowMediator deadlocks if you call its GetEnumerator method from</span>
<a href="#l23.244"></a><span id="l23.244" class="difflineplus">+    // a nsIWindowMediatorListener's onCloseWindow hook (bug 873589), so</span>
<a href="#l23.245"></a><span id="l23.245" class="difflineplus">+    // handle the close in a different tick.</span>
<a href="#l23.246"></a><span id="l23.246" class="difflineplus">+    Services.tm.currentThread.dispatch(DevToolsUtils.makeInfallible(() =&gt; {</span>
<a href="#l23.247"></a><span id="l23.247" class="difflineplus">+      let shouldNotify = false;</span>
<a href="#l23.248"></a><span id="l23.248" class="difflineplus">+</span>
<a href="#l23.249"></a><span id="l23.249" class="difflineplus">+      // Scan the whole map for browsers that were in this window.</span>
<a href="#l23.250"></a><span id="l23.250" class="difflineplus">+      for (let [browser, actor] of this._actorByBrowser) {</span>
<a href="#l23.251"></a><span id="l23.251" class="difflineplus">+        // The browser document of a closed window has no default view.</span>
<a href="#l23.252"></a><span id="l23.252" class="difflineplus">+        if (!browser.ownerDocument.defaultView) {</span>
<a href="#l23.253"></a><span id="l23.253" class="difflineplus">+          this._actorByBrowser.delete(browser);</span>
<a href="#l23.254"></a><span id="l23.254" class="difflineplus">+          actor.exit();</span>
<a href="#l23.255"></a><span id="l23.255" class="difflineplus">+          shouldNotify = true;</span>
<a href="#l23.256"></a><span id="l23.256" class="difflineplus">+        }</span>
<a href="#l23.257"></a><span id="l23.257" class="difflineplus">+      }</span>
<a href="#l23.258"></a><span id="l23.258" class="difflineplus">+</span>
<a href="#l23.259"></a><span id="l23.259" class="difflineplus">+      if (shouldNotify) {</span>
<a href="#l23.260"></a><span id="l23.260" class="difflineplus">+        this._notifyListChanged();</span>
<a href="#l23.261"></a><span id="l23.261" class="difflineplus">+      }</span>
<a href="#l23.262"></a><span id="l23.262" class="difflineplus">+      this._checkListening();</span>
<a href="#l23.263"></a><span id="l23.263" class="difflineplus">+    }, &quot;TBTabList.prototype.onCloseWindow's delayed body&quot;), 0);</span>
<a href="#l23.264"></a><span id="l23.264" class="difflineplus">+  }, &quot;TBTabList.prototype.onCloseWindow&quot;),</span>
<a href="#l23.265"></a><span id="l23.265" class="difflineplus">+</span>
<a href="#l23.266"></a><span id="l23.266" class="difflineplus">+  onWindowTitleChange: function() {}</span>
<a href="#l23.267"></a><span id="l23.267" class="difflineplus">+};</span>
<a href="#l23.268"></a><span id="l23.268" class="difflineplus">+</span>
<a href="#l23.269"></a><span id="l23.269" class="difflineplus">+exports.register = function(handle) {</span>
<a href="#l23.270"></a><span id="l23.270" class="difflineplus">+  handle.setRootActor(createRootActor);</span>
<a href="#l23.271"></a><span id="l23.271" class="difflineplus">+};</span>
<a href="#l23.272"></a><span id="l23.272" class="difflineplus">+</span>
<a href="#l23.273"></a><span id="l23.273" class="difflineplus">+exports.unregister = function(handle) {</span>
<a href="#l23.274"></a><span id="l23.274" class="difflineplus">+  handle.setRootActor(null);</span>
<a href="#l23.275"></a><span id="l23.275" class="difflineplus">+};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1">new file mode 100644</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineminus">--- /dev/null</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineplus">+++ b/mail/components/devtools/toolbox-process-overlay.xul</span>
<a href="#l24.4"></a><span id="l24.4" class="difflineat">@@ -0,0 +1,10 @@</span>
<a href="#l24.5"></a><span id="l24.5" class="difflineplus">+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<a href="#l24.6"></a><span id="l24.6" class="difflineplus">+&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l24.7"></a><span id="l24.7" class="difflineplus">+   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l24.8"></a><span id="l24.8" class="difflineplus">+   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l24.9"></a><span id="l24.9" class="difflineplus">+</span>
<a href="#l24.10"></a><span id="l24.10" class="difflineplus">+&lt;overlay id=&quot;tb-toolbox-process-overlay&quot;</span>
<a href="#l24.11"></a><span id="l24.11" class="difflineplus">+         xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineplus">+  &lt;!-- defines openUILinkIn --&gt;</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://communicator/content/contentAreaClick.js&quot;/&gt;</span>
<a href="#l24.14"></a><span id="l24.14" class="difflineplus">+&lt;/overlay&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1">new file mode 100644</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineminus">--- /dev/null</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineplus">+++ b/mail/components/devtools/webconsole-overlay.xul</span>
<a href="#l25.4"></a><span id="l25.4" class="difflineat">@@ -0,0 +1,11 @@</span>
<a href="#l25.5"></a><span id="l25.5" class="difflineplus">+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<a href="#l25.6"></a><span id="l25.6" class="difflineplus">+&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l25.7"></a><span id="l25.7" class="difflineplus">+   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l25.8"></a><span id="l25.8" class="difflineplus">+   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l25.9"></a><span id="l25.9" class="difflineplus">+</span>
<a href="#l25.10"></a><span id="l25.10" class="difflineplus">+&lt;!DOCTYPE overlay SYSTEM &quot;chrome://messenger/locale/messenger.dtd&quot;&gt;</span>
<a href="#l25.11"></a><span id="l25.11" class="difflineplus">+</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineplus">+&lt;overlay id=&quot;tb-webconsole-overlay&quot;</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+         xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l25.14"></a><span id="l25.14" class="difflineplus">+  &lt;window id=&quot;devtools-webconsole&quot; browserConsoleTitle=&quot;&amp;errorConsoleCmd.label;&quot;/&gt;</span>
<a href="#l25.15"></a><span id="l25.15" class="difflineplus">+&lt;/overlay&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/messenger.dtd</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/messenger.dtd</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -478,30 +478,50 @@</span>
<a href="#l26.4"></a><span id="l26.4"> &lt;!ENTITY filtersApplyToMessage.label &quot;Run Filters on Message&quot;&gt;</span>
<a href="#l26.5"></a><span id="l26.5"> &lt;!ENTITY filtersApplyToMessage.accesskey &quot;u&quot;&gt;</span>
<a href="#l26.6"></a><span id="l26.6"> &lt;!ENTITY runJunkControls.label &quot;Run Junk Mail Controls on Folder&quot;&gt;</span>
<a href="#l26.7"></a><span id="l26.7"> &lt;!ENTITY runJunkControls.accesskey &quot;C&quot;&gt;</span>
<a href="#l26.8"></a><span id="l26.8"> &lt;!ENTITY deleteJunk.label &quot;Delete Mail Marked as Junk in Folder&quot;&gt;</span>
<a href="#l26.9"></a><span id="l26.9"> &lt;!ENTITY deleteJunk.accesskey &quot;D&quot;&gt;</span>
<a href="#l26.10"></a><span id="l26.10"> &lt;!ENTITY importCmd.label &quot;Import…&quot;&gt;</span>
<a href="#l26.11"></a><span id="l26.11"> &lt;!ENTITY importCmd.accesskey &quot;m&quot;&gt;</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-&lt;!ENTITY errorConsoleCmd.label &quot;Error Console&quot;&gt;</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineminus">-&lt;!ENTITY errorConsoleCmd.accesskey &quot;E&quot;&gt;</span>
<a href="#l26.14"></a><span id="l26.14" class="difflineminus">-&lt;!ENTITY errorConsoleCmd.commandkey &quot;j&quot;&gt;</span>
<a href="#l26.15"></a><span id="l26.15"> &lt;!ENTITY clearRecentHistory.label &quot;Clear Recent History…&quot;&gt;</span>
<a href="#l26.16"></a><span id="l26.16"> &lt;!ENTITY clearRecentHistory.accesskey &quot;H&quot;&gt;</span>
<a href="#l26.17"></a><span id="l26.17"> &lt;!ENTITY accountManagerCmd2.label &quot;Account Settings&quot;&gt;</span>
<a href="#l26.18"></a><span id="l26.18"> &lt;!ENTITY accountManagerCmd2.accesskey &quot;S&quot;&gt;</span>
<a href="#l26.19"></a><span id="l26.19"> &lt;!-- LOCALIZATION NOTE (accountManagerCmdUnix.accesskey):</span>
<a href="#l26.20"></a><span id="l26.20">      Belongs to accountManagerCmd.label, which is placed under the Edit menu</span>
<a href="#l26.21"></a><span id="l26.21">      on Unix systems</span>
<a href="#l26.22"></a><span id="l26.22">   --&gt;</span>
<a href="#l26.23"></a><span id="l26.23"> &lt;!ENTITY accountManagerCmdUnix2.accesskey &quot;A&quot;&gt;</span>
<a href="#l26.24"></a><span id="l26.24" class="difflineminus">-&lt;!ENTITY allowRemoteDebugging.label &quot;Allow Remote Debugging&quot;&gt;</span>
<a href="#l26.25"></a><span id="l26.25" class="difflineminus">-&lt;!ENTITY allowRemoteDebugging.accesskey &quot;g&quot;&gt;</span>
<a href="#l26.26"></a><span id="l26.26" class="difflineplus">+</span>
<a href="#l26.27"></a><span id="l26.27" class="difflineplus">+&lt;!-- Developer Tools Submenu --&gt;</span>
<a href="#l26.28"></a><span id="l26.28" class="difflineplus">+&lt;!ENTITY devtoolsMenu.label &quot;Developer Tools&quot;&gt;</span>
<a href="#l26.29"></a><span id="l26.29" class="difflineplus">+&lt;!ENTITY devtoolsMenu.accesskey &quot;o&quot;&gt;</span>
<a href="#l26.30"></a><span id="l26.30" class="difflineplus">+&lt;!ENTITY devToolboxCmd.label &quot;Developer Toolbox&quot;&gt;</span>
<a href="#l26.31"></a><span id="l26.31" class="difflineplus">+&lt;!ENTITY devToolboxCmd.accesskey &quot;T&quot;&gt;</span>
<a href="#l26.32"></a><span id="l26.32" class="difflineplus">+&lt;!ENTITY devToolboxCmd.commandkey &quot;i&quot;&gt;</span>
<a href="#l26.33"></a><span id="l26.33" class="difflineplus">+&lt;!ENTITY addonDebugCmd.label &quot;Add-on Debugger&quot;&gt;</span>
<a href="#l26.34"></a><span id="l26.34" class="difflineplus">+&lt;!ENTITY addonDebugCmd.accesskey &quot;A&quot;&gt;</span>
<a href="#l26.35"></a><span id="l26.35" class="difflineplus">+&lt;!ENTITY tabsDebugCmd.label &quot;Content Frame Debugger&quot;&gt;</span>
<a href="#l26.36"></a><span id="l26.36" class="difflineplus">+&lt;!ENTITY tabsDebugCmd.accesskey &quot;C&quot;&gt;</span>
<a href="#l26.37"></a><span id="l26.37" class="difflineplus">+&lt;!ENTITY errorConsoleCmd.label &quot;Error Console&quot;&gt;</span>
<a href="#l26.38"></a><span id="l26.38" class="difflineplus">+&lt;!ENTITY errorConsoleCmd.accesskey &quot;E&quot;&gt;</span>
<a href="#l26.39"></a><span id="l26.39" class="difflineplus">+&lt;!ENTITY errorConsoleCmd.commandkey &quot;j&quot;&gt;</span>
<a href="#l26.40"></a><span id="l26.40" class="difflineplus">+&lt;!ENTITY scratchpadCmd.label &quot;Scratchpad&quot;&gt;</span>
<a href="#l26.41"></a><span id="l26.41" class="difflineplus">+&lt;!ENTITY scratchpadCmd.accesskey &quot;S&quot;&gt;</span>
<a href="#l26.42"></a><span id="l26.42" class="difflineplus">+</span>
<a href="#l26.43"></a><span id="l26.43" class="difflineplus">+&lt;!--LOCALIZATION NOTE (scratchpadCmd.keycode):</span>
<a href="#l26.44"></a><span id="l26.44" class="difflineplus">+    This should be a key code constant as per</span>
<a href="#l26.45"></a><span id="l26.45" class="difflineplus">+    https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode#Constants_for_keyCode_value</span>
<a href="#l26.46"></a><span id="l26.46" class="difflineplus">+    (but without the DOM_ prefix) --&gt;</span>
<a href="#l26.47"></a><span id="l26.47" class="difflineplus">+&lt;!ENTITY scratchpadCmd.keycode &quot;VK_F4&quot;&gt;</span>
<a href="#l26.48"></a><span id="l26.48" class="difflineplus">+&lt;!--LOCALIZATION NOTE (scratchpadCmd.keytext):</span>
<a href="#l26.49"></a><span id="l26.49" class="difflineplus">+    This should be the text printed on the key defined in the previous string. --&gt;</span>
<a href="#l26.50"></a><span id="l26.50" class="difflineplus">+&lt;!ENTITY scratchpadCmd.keytext &quot;F4&quot;&gt;</span>
<a href="#l26.51"></a><span id="l26.51"> </span>
<a href="#l26.52"></a><span id="l26.52"> &lt;!-- Mail Toolbar --&gt;</span>
<a href="#l26.53"></a><span id="l26.53"> &lt;!ENTITY getMsgButton1.label &quot;Get Messages&quot;&gt;</span>
<a href="#l26.54"></a><span id="l26.54"> &lt;!ENTITY newMsgButton.label &quot;Write&quot;&gt;</span>
<a href="#l26.55"></a><span id="l26.55"> &lt;!ENTITY replyButton.label &quot;Reply&quot;&gt;</span>
<a href="#l26.56"></a><span id="l26.56"> &lt;!ENTITY replyAllButton.label &quot;Reply All&quot;&gt;</span>
<a href="#l26.57"></a><span id="l26.57"> &lt;!ENTITY replyListButton.label &quot;Reply to List&quot;&gt;</span>
<a href="#l26.58"></a><span id="l26.58"> &lt;!ENTITY forwardButton.label &quot;Forward&quot;&gt;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

