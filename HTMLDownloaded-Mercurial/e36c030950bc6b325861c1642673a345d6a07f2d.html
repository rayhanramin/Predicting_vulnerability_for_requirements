<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 12850:e36c030950bc6b325861c1642673a345d6a07f2d</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ e36c030950bc6b325861c1642673a345d6a07f2d" />
<meta property="og:url" content="/comm-central/rev/e36c030950bc6b325861c1642673a345d6a07f2d" />
<meta property="og:description" content="Bug 798278 - Implement multiple plugin doorhanger UI (Port Bug 797677 and Bug 754472), r=Neil" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / e36c030950bc6b325861c1642673a345d6a07f2d 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/e36c030950bc6b325861c1642673a345d6a07f2d">shortlog</a> |
<a href="/comm-central/log/e36c030950bc6b325861c1642673a345d6a07f2d">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/e36c030950bc6b325861c1642673a345d6a07f2d">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/e36c030950bc6b325861c1642673a345d6a07f2d">files</a> |
changeset |
<a href="/comm-central/raw-rev/e36c030950bc6b325861c1642673a345d6a07f2d">raw</a>  | <a href="/comm-central/archive/e36c030950bc6b325861c1642673a345d6a07f2d.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=798278">Bug 798278</a> - Implement multiple plugin doorhanger UI (Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=797677">Bug 797677</a> and <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=754472">Bug 754472</a>), r=Neil
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#70;&#114;&#97;&#110;&#107;&#32;&#87;&#101;&#105;&#110;&#32;&#60;&#109;&#99;&#115;&#109;&#117;&#114;&#102;&#64;&#109;&#99;&#115;&#109;&#117;&#114;&#102;&#46;&#100;&#101;&#62;</td></tr>
<tr><td></td><td class="date age">Sat, 03 Aug 2013 16:39:11 +0200</td></tr>

<tr>
 <td>changeset 12850</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/e36c030950bc6b325861c1642673a345d6a07f2d">e36c030950bc6b325861c1642673a345d6a07f2d</a></td>
</tr>



<tr>
<td>parent 12849</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/58d1d9ea6a0886e27b47b85168119943387c5221">58d1d9ea6a0886e27b47b85168119943387c5221</a>
</td>
</tr>

<tr>
<td>child 12851</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/28c68bdee3e6da1894add7f35d45105348791f89">28c68bdee3e6da1894add7f35d45105348791f89</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=e36c030950bc6b325861c1642673a345d6a07f2d">9387</a></td></tr>
<tr><td>push user</td><td>mcsmurf@mcsmurf.de</td></tr>
<tr><td>push date</td><td class="date age">Sat, 03 Aug 2013 14:40:17 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@d9ab7a6d13fe [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=d9ab7a6d13fe0b691944434fc38e5a7565e82934">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=d9ab7a6d13fe0b691944434fc38e5a7565e82934&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=d9ab7a6d13fe0b691944434fc38e5a7565e82934&newProject=comm-central&newRevision=e36c030950bc6b325861c1642673a345d6a07f2d&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=d9ab7a6d13fe0b691944434fc38e5a7565e82934&newProject=comm-central&newRevision=e36c030950bc6b325861c1642673a345d6a07f2d&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=d9ab7a6d13fe0b691944434fc38e5a7565e82934&newProject=comm-central&newRevision=e36c030950bc6b325861c1642673a345d6a07f2d&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Neil%29&revcount=50">Neil</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=798278">798278</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=797677">797677</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=754472">754472</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=798278">Bug 798278</a> - Implement multiple plugin doorhanger UI (Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=797677">Bug 797677</a> and <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=754472">Bug 754472</a>), r=Neil
approval for CLOSED TREE by ewong</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e36c030950bc6b325861c1642673a345d6a07f2d/suite/browser/navigator.css">suite/browser/navigator.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e36c030950bc6b325861c1642673a345d6a07f2d/suite/browser/navigator.css">file</a> |
<a href="/comm-central/annotate/e36c030950bc6b325861c1642673a345d6a07f2d/suite/browser/navigator.css">annotate</a> |
<a href="/comm-central/diff/e36c030950bc6b325861c1642673a345d6a07f2d/suite/browser/navigator.css">diff</a> |
<a href="/comm-central/comparison/e36c030950bc6b325861c1642673a345d6a07f2d/suite/browser/navigator.css">comparison</a> |
<a href="/comm-central/log/e36c030950bc6b325861c1642673a345d6a07f2d/suite/browser/navigator.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e36c030950bc6b325861c1642673a345d6a07f2d/suite/browser/test/browser/browser_pluginnotification.js">suite/browser/test/browser/browser_pluginnotification.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e36c030950bc6b325861c1642673a345d6a07f2d/suite/browser/test/browser/browser_pluginnotification.js">file</a> |
<a href="/comm-central/annotate/e36c030950bc6b325861c1642673a345d6a07f2d/suite/browser/test/browser/browser_pluginnotification.js">annotate</a> |
<a href="/comm-central/diff/e36c030950bc6b325861c1642673a345d6a07f2d/suite/browser/test/browser/browser_pluginnotification.js">diff</a> |
<a href="/comm-central/comparison/e36c030950bc6b325861c1642673a345d6a07f2d/suite/browser/test/browser/browser_pluginnotification.js">comparison</a> |
<a href="/comm-central/log/e36c030950bc6b325861c1642673a345d6a07f2d/suite/browser/test/browser/browser_pluginnotification.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e36c030950bc6b325861c1642673a345d6a07f2d/suite/common/bindings/notification.xml">suite/common/bindings/notification.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e36c030950bc6b325861c1642673a345d6a07f2d/suite/common/bindings/notification.xml">file</a> |
<a href="/comm-central/annotate/e36c030950bc6b325861c1642673a345d6a07f2d/suite/common/bindings/notification.xml">annotate</a> |
<a href="/comm-central/diff/e36c030950bc6b325861c1642673a345d6a07f2d/suite/common/bindings/notification.xml">diff</a> |
<a href="/comm-central/comparison/e36c030950bc6b325861c1642673a345d6a07f2d/suite/common/bindings/notification.xml">comparison</a> |
<a href="/comm-central/log/e36c030950bc6b325861c1642673a345d6a07f2d/suite/common/bindings/notification.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/classic/jar.mn">suite/themes/classic/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/classic/jar.mn">file</a> |
<a href="/comm-central/annotate/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/classic/jar.mn">annotate</a> |
<a href="/comm-central/diff/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/classic/jar.mn">diff</a> |
<a href="/comm-central/comparison/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/classic/jar.mn">comparison</a> |
<a href="/comm-central/log/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/classic/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/classic/navigator/click-to-play-warning-stripes.png">suite/themes/classic/navigator/click-to-play-warning-stripes.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/classic/navigator/click-to-play-warning-stripes.png">file</a> |
<a href="/comm-central/annotate/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/classic/navigator/click-to-play-warning-stripes.png">annotate</a> |
<a href="/comm-central/diff/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/classic/navigator/click-to-play-warning-stripes.png">diff</a> |
<a href="/comm-central/comparison/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/classic/navigator/click-to-play-warning-stripes.png">comparison</a> |
<a href="/comm-central/log/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/classic/navigator/click-to-play-warning-stripes.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/classic/navigator/navigator.css">suite/themes/classic/navigator/navigator.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/classic/navigator/navigator.css">file</a> |
<a href="/comm-central/annotate/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/classic/navigator/navigator.css">annotate</a> |
<a href="/comm-central/diff/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/classic/navigator/navigator.css">diff</a> |
<a href="/comm-central/comparison/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/classic/navigator/navigator.css">comparison</a> |
<a href="/comm-central/log/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/classic/navigator/navigator.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/modern/jar.mn">suite/themes/modern/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/modern/jar.mn">file</a> |
<a href="/comm-central/annotate/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/modern/jar.mn">annotate</a> |
<a href="/comm-central/diff/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/modern/jar.mn">diff</a> |
<a href="/comm-central/comparison/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/modern/jar.mn">comparison</a> |
<a href="/comm-central/log/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/modern/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/modern/navigator/click-to-play-warning-stripes.png">suite/themes/modern/navigator/click-to-play-warning-stripes.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/modern/navigator/click-to-play-warning-stripes.png">file</a> |
<a href="/comm-central/annotate/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/modern/navigator/click-to-play-warning-stripes.png">annotate</a> |
<a href="/comm-central/diff/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/modern/navigator/click-to-play-warning-stripes.png">diff</a> |
<a href="/comm-central/comparison/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/modern/navigator/click-to-play-warning-stripes.png">comparison</a> |
<a href="/comm-central/log/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/modern/navigator/click-to-play-warning-stripes.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/modern/navigator/navigator.css">suite/themes/modern/navigator/navigator.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/modern/navigator/navigator.css">file</a> |
<a href="/comm-central/annotate/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/modern/navigator/navigator.css">annotate</a> |
<a href="/comm-central/diff/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/modern/navigator/navigator.css">diff</a> |
<a href="/comm-central/comparison/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/modern/navigator/navigator.css">comparison</a> |
<a href="/comm-central/log/e36c030950bc6b325861c1642673a345d6a07f2d/suite/themes/modern/navigator/navigator.css">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/suite/browser/navigator.css</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/suite/browser/navigator.css</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -90,16 +90,24 @@ searchbar {</span>
<a href="#l1.4"></a><span id="l1.4"> .notification-anchor-icon {</span>
<a href="#l1.5"></a><span id="l1.5">   -moz-user-focus: normal;</span>
<a href="#l1.6"></a><span id="l1.6"> }</span>
<a href="#l1.7"></a><span id="l1.7"> </span>
<a href="#l1.8"></a><span id="l1.8"> .notification-anchor-icon:not([showing]) {</span>
<a href="#l1.9"></a><span id="l1.9">   display: none;</span>
<a href="#l1.10"></a><span id="l1.10"> }</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+#click-to-play-plugins-notification {</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+  -moz-binding: url(&quot;chrome://communicator/content/bindings/notification.xml#click-to-play-plugins-notification&quot;);</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+}</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineplus">+popupnotification-centeritem {</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineplus">+  -moz-binding: url(&quot;chrome://communicator/content/bindings/notification.xml#center-item&quot;);</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineplus">+}</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineplus">+</span>
<a href="#l1.20"></a><span id="l1.20"> #geolocation-notification {</span>
<a href="#l1.21"></a><span id="l1.21">   -moz-binding: url(&quot;chrome://communicator/content/bindings/notification.xml#geolocation-popup-notification&quot;);</span>
<a href="#l1.22"></a><span id="l1.22"> }</span>
<a href="#l1.23"></a><span id="l1.23"> </span>
<a href="#l1.24"></a><span id="l1.24"> #addon-install-started-notification {</span>
<a href="#l1.25"></a><span id="l1.25">   -moz-binding: url(&quot;chrome://communicator/content/bindings/notification.xml#addon-progress-popup-notification&quot;);</span>
<a href="#l1.26"></a><span id="l1.26"> }</span>
<a href="#l1.27"></a><span id="l1.27"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/suite/browser/test/browser/browser_pluginnotification.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/suite/browser/test/browser/browser_pluginnotification.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -222,21 +222,17 @@ function test8() {</span>
<a href="#l2.4"></a><span id="l2.4"> // Tests that activating one click-to-play plugin will activate only that plugin (part 1/3)</span>
<a href="#l2.5"></a><span id="l2.5"> function test9a() {</span>
<a href="#l2.6"></a><span id="l2.6">   var notificationBox = gBrowser.getNotificationBox(gTestBrowser);</span>
<a href="#l2.7"></a><span id="l2.7">   ok(!notificationBox.getNotificationWithValue(&quot;missing-plugins&quot;), &quot;Test 9a, Should not have displayed the missing plugin notification&quot;);</span>
<a href="#l2.8"></a><span id="l2.8">   ok(!notificationBox.getNotificationWithValue(&quot;blocked-plugins&quot;), &quot;Test 9a, Should not have displayed the blocked plugin notification&quot;);</span>
<a href="#l2.9"></a><span id="l2.9">   ok(!notificationBox._missingPlugins, &quot;Test 9a, Should not be a missing plugin list&quot;);</span>
<a href="#l2.10"></a><span id="l2.10">   var notification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l2.11"></a><span id="l2.11">   ok(notification, &quot;Test 9a, Should have a click-to-play notification&quot;);</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-  // SeaMonkey does not support notification.options.centerActions yet, this is</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-  // part of the multiple plugin doorhanger UI, Bug 798278 will port this code</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineminus">-  // to SeaMonkey</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-  // ok(notification.options.centerActions.length == 1, &quot;Test 9a, Should have only one type of plugin in the notification&quot;);</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineplus">+  ok(notification.options.centerActions.length == 1, &quot;Test 9a, Should have only one type of plugin in the notification&quot;);</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19">   var doc = gTestBrowser.contentDocument;</span>
<a href="#l2.20"></a><span id="l2.20">   var plugin1 = doc.getElementById(&quot;test1&quot;);</span>
<a href="#l2.21"></a><span id="l2.21">   var rect = doc.getAnonymousElementByAttribute(plugin1, &quot;class&quot;, &quot;mainBox&quot;).getBoundingClientRect();</span>
<a href="#l2.22"></a><span id="l2.22">   ok(rect.width == 200, &quot;Test 9a, Plugin with id=&quot; + plugin1.id + &quot; overlay rect should have 200px width before being clicked&quot;);</span>
<a href="#l2.23"></a><span id="l2.23">   ok(rect.height == 200, &quot;Test 9a, Plugin with id=&quot; + plugin1.id + &quot; overlay rect should have 200px height before being clicked&quot;);</span>
<a href="#l2.24"></a><span id="l2.24">   var objLoadingContent = plugin1.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l2.25"></a><span id="l2.25">   ok(!objLoadingContent.activated, &quot;Test 9a, Plugin with id=&quot; + plugin1.id + &quot; should not be activated&quot;);</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineat">@@ -257,20 +253,17 @@ function test9a() {</span>
<a href="#l2.27"></a><span id="l2.27"> // Tests that activating one click-to-play plugin will activate only that plugin (part 2/3)</span>
<a href="#l2.28"></a><span id="l2.28"> function test9b() {</span>
<a href="#l2.29"></a><span id="l2.29">   var notificationBox = gBrowser.getNotificationBox(gTestBrowser);</span>
<a href="#l2.30"></a><span id="l2.30">   ok(!notificationBox.getNotificationWithValue(&quot;missing-plugins&quot;), &quot;Test 9b, Should not have displayed the missing plugin notification&quot;);</span>
<a href="#l2.31"></a><span id="l2.31">   ok(!notificationBox.getNotificationWithValue(&quot;blocked-plugins&quot;), &quot;Test 9b, Should not have displayed the blocked plugin notification&quot;);</span>
<a href="#l2.32"></a><span id="l2.32">   ok(!notificationBox._missingPlugins, &quot;Test 9b, Should not be a missing plugin list&quot;);</span>
<a href="#l2.33"></a><span id="l2.33">   var notification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l2.34"></a><span id="l2.34">   ok(notification, &quot;Test 9b, Click to play notification should not be removed now&quot;);</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineminus">-  // SeaMonkey does not support notification.options.centerActions yet, this is</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineminus">-  // part of the multiple plugin doorhanger UI, Bug 798278 will port this code</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineminus">-  // to SeaMonkey</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineminus">-  // ok(notification.options.centerActions.length == 1, &quot;Test 9b, Should have only one type of plugin in the notification&quot;);</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineplus">+  ok(notification.options.centerActions.length == 1, &quot;Test 9b, Should have only one type of plugin in the notification&quot;);</span>
<a href="#l2.40"></a><span id="l2.40"> </span>
<a href="#l2.41"></a><span id="l2.41">   var doc = gTestBrowser.contentDocument;</span>
<a href="#l2.42"></a><span id="l2.42">   var plugin1 = doc.getElementById(&quot;test1&quot;);</span>
<a href="#l2.43"></a><span id="l2.43">   var pluginRect1 = doc.getAnonymousElementByAttribute(plugin1, &quot;class&quot;, &quot;mainBox&quot;).getBoundingClientRect();</span>
<a href="#l2.44"></a><span id="l2.44">   ok(pluginRect1.width == 0, &quot;Test 9b, Plugin with id=&quot; + plugin1.id + &quot; should have click-to-play overlay with zero width&quot;);</span>
<a href="#l2.45"></a><span id="l2.45">   ok(pluginRect1.height == 0, &quot;Test 9b, Plugin with id=&quot; + plugin1.id + &quot; should have click-to-play overlay with zero height&quot;);</span>
<a href="#l2.46"></a><span id="l2.46">   var objLoadingContent = plugin1.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l2.47"></a><span id="l2.47">   ok(objLoadingContent.activated, &quot;Test 9b, Plugin with id=&quot; + plugin1.id + &quot; should be activated&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/suite/common/bindings/notification.xml</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/suite/common/bindings/notification.xml</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -87,17 +87,16 @@</span>
<a href="#l3.4"></a><span id="l3.4">               .usePrivateBrowsing</span>
<a href="#l3.5"></a><span id="l3.5">       &lt;/field&gt;</span>
<a href="#l3.6"></a><span id="l3.6"> </span>
<a href="#l3.7"></a><span id="l3.7">       &lt;method name=&quot;onDocumentChange&quot;&gt;</span>
<a href="#l3.8"></a><span id="l3.8">         &lt;body&gt;</span>
<a href="#l3.9"></a><span id="l3.9">           &lt;![CDATA[</span>
<a href="#l3.10"></a><span id="l3.10">             this.missingPlugins = null;</span>
<a href="#l3.11"></a><span id="l3.11">             this.crashNotified = false;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-            this.clickToPlayPromptShown = false;</span>
<a href="#l3.13"></a><span id="l3.13">             this.clickToPlayPluginsActivated = false;</span>
<a href="#l3.14"></a><span id="l3.14">             if (this.popupCount) {</span>
<a href="#l3.15"></a><span id="l3.15">               this.popupCount = 0;</span>
<a href="#l3.16"></a><span id="l3.16">               this.notifyPopupCountChanged();</span>
<a href="#l3.17"></a><span id="l3.17">             }</span>
<a href="#l3.18"></a><span id="l3.18">             this.removeTransientNotifications();</span>
<a href="#l3.19"></a><span id="l3.19">           ]]&gt;</span>
<a href="#l3.20"></a><span id="l3.20">         &lt;/body&gt;</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineat">@@ -508,26 +507,25 @@</span>
<a href="#l3.22"></a><span id="l3.22">       &lt;property name=&quot;missingPlugins&quot;</span>
<a href="#l3.23"></a><span id="l3.23">                 onget=&quot;return this._missingPlugins || (this._missingPlugins = new Map());&quot;</span>
<a href="#l3.24"></a><span id="l3.24">                 onset=&quot;return this._missingPlugins = val;&quot;/&gt;</span>
<a href="#l3.25"></a><span id="l3.25"> </span>
<a href="#l3.26"></a><span id="l3.26">       &lt;field name=&quot;CrashSubmit&quot;&gt;null&lt;/field&gt;</span>
<a href="#l3.27"></a><span id="l3.27"> </span>
<a href="#l3.28"></a><span id="l3.28">       &lt;field name=&quot;crashNotified&quot;&gt;false&lt;/field&gt;</span>
<a href="#l3.29"></a><span id="l3.29"> </span>
<a href="#l3.30"></a><span id="l3.30" class="difflineminus">-      &lt;field name=&quot;clickToPlayPromptShown&quot;&gt;false&lt;/field&gt;</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-</span>
<a href="#l3.32"></a><span id="l3.32">       &lt;field name=&quot;clickToPlayPluginsActivated&quot;&gt;false&lt;/field&gt;</span>
<a href="#l3.33"></a><span id="l3.33"> </span>
<a href="#l3.34"></a><span id="l3.34">       &lt;method name=&quot;getPluginInfo&quot;&gt;</span>
<a href="#l3.35"></a><span id="l3.35">         &lt;parameter name=&quot;pluginElement&quot;/&gt;</span>
<a href="#l3.36"></a><span id="l3.36">         &lt;body&gt;</span>
<a href="#l3.37"></a><span id="l3.37">           &lt;![CDATA[</span>
<a href="#l3.38"></a><span id="l3.38">             var mimetype;</span>
<a href="#l3.39"></a><span id="l3.39">             var pluginsPage;</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineplus">+            var pluginName = this._stringBundle.GetStringFromName(&quot;pluginInfo.unknownPlugin&quot;);</span>
<a href="#l3.41"></a><span id="l3.41">             if (pluginElement instanceof HTMLAppletElement) {</span>
<a href="#l3.42"></a><span id="l3.42">               mimetype = &quot;application/x-java-vm&quot;;</span>
<a href="#l3.43"></a><span id="l3.43">             } else {</span>
<a href="#l3.44"></a><span id="l3.44">               if (pluginElement instanceof HTMLObjectElement) {</span>
<a href="#l3.45"></a><span id="l3.45">                 pluginsPage = pluginElement.codebase;</span>
<a href="#l3.46"></a><span id="l3.46">               } else {</span>
<a href="#l3.47"></a><span id="l3.47">                 pluginsPage = pluginElement.getAttribute(&quot;pluginspage&quot;);</span>
<a href="#l3.48"></a><span id="l3.48">                 if (pluginsPage) {</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineat">@@ -541,17 +539,25 @@</span>
<a href="#l3.50"></a><span id="l3.50">               mimetype = pluginElement.QueryInterface(Components.interfaces.nsIObjectLoadingContent)</span>
<a href="#l3.51"></a><span id="l3.51">                                       .actualType;</span>
<a href="#l3.52"></a><span id="l3.52"> </span>
<a href="#l3.53"></a><span id="l3.53">               if (!mimetype) {</span>
<a href="#l3.54"></a><span id="l3.54">                 mimetype = pluginElement.type;</span>
<a href="#l3.55"></a><span id="l3.55">               }</span>
<a href="#l3.56"></a><span id="l3.56">             }</span>
<a href="#l3.57"></a><span id="l3.57"> </span>
<a href="#l3.58"></a><span id="l3.58" class="difflineminus">-            return {mimetype: mimetype, pluginsPage: pluginsPage};</span>
<a href="#l3.59"></a><span id="l3.59" class="difflineplus">+            var navMimeType = navigator.mimeTypes.namedItem(mimetype);</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineplus">+            if (navMimeType &amp;&amp; navMimeType.enabledPlugin)</span>
<a href="#l3.61"></a><span id="l3.61" class="difflineplus">+              pluginName = this.makeNicePluginName(navMimeType.enabledPlugin.name);</span>
<a href="#l3.62"></a><span id="l3.62" class="difflineplus">+</span>
<a href="#l3.63"></a><span id="l3.63" class="difflineplus">+            return {</span>
<a href="#l3.64"></a><span id="l3.64" class="difflineplus">+              mimetype: mimetype,</span>
<a href="#l3.65"></a><span id="l3.65" class="difflineplus">+              pluginsPage: pluginsPage,</span>
<a href="#l3.66"></a><span id="l3.66" class="difflineplus">+              pluginName: pluginName</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineplus">+            };</span>
<a href="#l3.68"></a><span id="l3.68">           ]]&gt;</span>
<a href="#l3.69"></a><span id="l3.69">         &lt;/body&gt;</span>
<a href="#l3.70"></a><span id="l3.70">       &lt;/method&gt;</span>
<a href="#l3.71"></a><span id="l3.71"> </span>
<a href="#l3.72"></a><span id="l3.72">       &lt;method name=&quot;pluginUnavailable&quot;&gt;</span>
<a href="#l3.73"></a><span id="l3.73">         &lt;parameter name=&quot;aPlugin&quot;/&gt;</span>
<a href="#l3.74"></a><span id="l3.74">         &lt;parameter name=&quot;aNotification&quot;/&gt;</span>
<a href="#l3.75"></a><span id="l3.75">         &lt;parameter name=&quot;aMessage&quot;/&gt;</span>
<a href="#l3.76"></a><span id="l3.76" class="difflineat">@@ -559,18 +565,17 @@</span>
<a href="#l3.77"></a><span id="l3.77">         &lt;parameter name=&quot;aPref&quot;/&gt;</span>
<a href="#l3.78"></a><span id="l3.78">         &lt;body&gt;</span>
<a href="#l3.79"></a><span id="l3.79">           &lt;![CDATA[</span>
<a href="#l3.80"></a><span id="l3.80">             // Save information on the plugin to give to the plugin finder.</span>
<a href="#l3.81"></a><span id="l3.81">             var pluginInfo = this.getPluginInfo(aPlugin);</span>
<a href="#l3.82"></a><span id="l3.82">             this.missingPlugins.set(pluginInfo.mimetype, pluginInfo);</span>
<a href="#l3.83"></a><span id="l3.83"> </span>
<a href="#l3.84"></a><span id="l3.84">             // Hide the in-content UI if it's too big. The crashed plugin handler already does this.</span>
<a href="#l3.85"></a><span id="l3.85" class="difflineminus">-            var doc = aPlugin.ownerDocument;</span>
<a href="#l3.86"></a><span id="l3.86" class="difflineminus">-            var overlay = doc.getAnonymousElementByAttribute(aPlugin, &quot;class&quot;, &quot;mainBox&quot;);</span>
<a href="#l3.87"></a><span id="l3.87" class="difflineplus">+            var overlay = this.getPluginUI(aPlugin, &quot;mainBox&quot;);</span>
<a href="#l3.88"></a><span id="l3.88">             if (this.isTooSmall(aPlugin, overlay))</span>
<a href="#l3.89"></a><span id="l3.89">               overlay.style.visibility = &quot;hidden&quot;;</span>
<a href="#l3.90"></a><span id="l3.90"> </span>
<a href="#l3.91"></a><span id="l3.91">             if (this._prefs.getBoolPref(aPref || &quot;plugins.hide_infobar_for_missing_plugin&quot;))</span>
<a href="#l3.92"></a><span id="l3.92">               return;</span>
<a href="#l3.93"></a><span id="l3.93"> </span>
<a href="#l3.94"></a><span id="l3.94">             var notification;</span>
<a href="#l3.95"></a><span id="l3.95">             var notifications = [</span>
<a href="#l3.96"></a><span id="l3.96" class="difflineat">@@ -598,20 +603,21 @@</span>
<a href="#l3.97"></a><span id="l3.97">             const priority = this.PRIORITY_WARNING_MEDIUM;</span>
<a href="#l3.98"></a><span id="l3.98">             this.appendNotification(aMessage, aNotification,</span>
<a href="#l3.99"></a><span id="l3.99">                                     null, priority, aButtons);</span>
<a href="#l3.100"></a><span id="l3.100">           ]]&gt;</span>
<a href="#l3.101"></a><span id="l3.101">         &lt;/body&gt;</span>
<a href="#l3.102"></a><span id="l3.102">       &lt;/method&gt;</span>
<a href="#l3.103"></a><span id="l3.103"> </span>
<a href="#l3.104"></a><span id="l3.104">       &lt;method name=&quot;canActivatePlugin&quot;&gt;</span>
<a href="#l3.105"></a><span id="l3.105" class="difflineminus">-        &lt;parameter name=&quot;objLoadingContent&quot;/&gt;</span>
<a href="#l3.106"></a><span id="l3.106" class="difflineplus">+        &lt;parameter name=&quot;aPlugin&quot;/&gt;</span>
<a href="#l3.107"></a><span id="l3.107">         &lt;body&gt;</span>
<a href="#l3.108"></a><span id="l3.108">           &lt;![CDATA[</span>
<a href="#l3.109"></a><span id="l3.109">             const nsIObjectLoadingContent = Components.interfaces.nsIObjectLoadingContent;</span>
<a href="#l3.110"></a><span id="l3.110" class="difflineplus">+            var objLoadingContent = aPlugin.QueryInterface(nsIObjectLoadingContent);</span>
<a href="#l3.111"></a><span id="l3.111">             var actualType = objLoadingContent.actualType;</span>
<a href="#l3.112"></a><span id="l3.112">             if (objLoadingContent.getContentTypeForMIMEType(actualType) != nsIObjectLoadingContent.TYPE_PLUGIN ||</span>
<a href="#l3.113"></a><span id="l3.113">                 objLoadingContent.activated ||</span>
<a href="#l3.114"></a><span id="l3.114">                 objLoadingContent.pluginFallbackType &lt; nsIObjectLoadingContent.PLUGIN_CLICK_TO_PLAY ||</span>
<a href="#l3.115"></a><span id="l3.115">                 objLoadingContent.pluginFallbackType &gt; nsIObjectLoadingContent.PLUGIN_VULNERABLE_NO_UPDATE)</span>
<a href="#l3.116"></a><span id="l3.116">               return false;</span>
<a href="#l3.117"></a><span id="l3.117"> </span>
<a href="#l3.118"></a><span id="l3.118">             var ph = Components.classes[&quot;@mozilla.org/plugin/host;1&quot;]</span>
<a href="#l3.119"></a><span id="l3.119" class="difflineat">@@ -632,57 +638,52 @@</span>
<a href="#l3.120"></a><span id="l3.120">           &lt;![CDATA[</span>
<a href="#l3.121"></a><span id="l3.121">             var ph = Components.classes[&quot;@mozilla.org/plugin/host;1&quot;]</span>
<a href="#l3.122"></a><span id="l3.122">                                .getService(Components.interfaces.nsIPluginHost);</span>
<a href="#l3.123"></a><span id="l3.123">             const nsIPermissionManager = Components.interfaces.nsIPermissionManager;</span>
<a href="#l3.124"></a><span id="l3.124">             var pm = Components.classes[&quot;@mozilla.org/permissionmanager;1&quot;]</span>
<a href="#l3.125"></a><span id="l3.125">                                .getService(nsIPermissionManager);</span>
<a href="#l3.126"></a><span id="l3.126">             var plugins = this.contentWindowUtils.plugins;</span>
<a href="#l3.127"></a><span id="l3.127">             for (var plugin of plugins) {</span>
<a href="#l3.128"></a><span id="l3.128" class="difflineminus">-              var objLoadingContent = plugin.QueryInterface(Components.interfaces.nsIObjectLoadingContent);</span>
<a href="#l3.129"></a><span id="l3.129" class="difflineminus">-              if (this.canActivatePlugin(objLoadingContent)) {</span>
<a href="#l3.130"></a><span id="l3.130" class="difflineminus">-                var permissionString = ph.getPermissionStringForType(objLoadingContent.actualType);</span>
<a href="#l3.131"></a><span id="l3.131" class="difflineplus">+              if (this.canActivatePlugin(plugin)) {</span>
<a href="#l3.132"></a><span id="l3.132" class="difflineplus">+                var permissionString = ph.getPermissionStringForType(plugin.actualType);</span>
<a href="#l3.133"></a><span id="l3.133">                 pm.add(this.activeBrowser.currentURI, permissionString, aPermission);</span>
<a href="#l3.134"></a><span id="l3.134">               }</span>
<a href="#l3.135"></a><span id="l3.135">             }</span>
<a href="#l3.136"></a><span id="l3.136">           ]]&gt;</span>
<a href="#l3.137"></a><span id="l3.137">         &lt;/body&gt;</span>
<a href="#l3.138"></a><span id="l3.138">       &lt;/method&gt;</span>
<a href="#l3.139"></a><span id="l3.139"> </span>
<a href="#l3.140"></a><span id="l3.140">       &lt;method name=&quot;activatePlugins&quot;&gt;</span>
<a href="#l3.141"></a><span id="l3.141">         &lt;body&gt;</span>
<a href="#l3.142"></a><span id="l3.142">           &lt;![CDATA[</span>
<a href="#l3.143"></a><span id="l3.143">             this.clickToPlayPluginsActivated = true;</span>
<a href="#l3.144"></a><span id="l3.144">             var plugins = this.contentWindowUtils.plugins;</span>
<a href="#l3.145"></a><span id="l3.145">             for (let plugin of plugins) {</span>
<a href="#l3.146"></a><span id="l3.146" class="difflineminus">-              let objLoadingContent = plugin.QueryInterface(Components.interfaces.nsIObjectLoadingContent);</span>
<a href="#l3.147"></a><span id="l3.147" class="difflineminus">-              if (this.canActivatePlugin(objLoadingContent))</span>
<a href="#l3.148"></a><span id="l3.148" class="difflineminus">-                objLoadingContent.playPlugin();</span>
<a href="#l3.149"></a><span id="l3.149" class="difflineplus">+              if (this.canActivatePlugin(plugin))</span>
<a href="#l3.150"></a><span id="l3.150" class="difflineplus">+                plugin.playPlugin();</span>
<a href="#l3.151"></a><span id="l3.151">             }</span>
<a href="#l3.152"></a><span id="l3.152">             this.removePluginClickToPlayPrompt();</span>
<a href="#l3.153"></a><span id="l3.153">           ]]&gt;</span>
<a href="#l3.154"></a><span id="l3.154">         &lt;/body&gt;</span>
<a href="#l3.155"></a><span id="l3.155">       &lt;/method&gt;</span>
<a href="#l3.156"></a><span id="l3.156"> </span>
<a href="#l3.157"></a><span id="l3.157">       &lt;method name=&quot;activateSinglePlugin&quot;&gt;</span>
<a href="#l3.158"></a><span id="l3.158">         &lt;parameter name=&quot;aPlugin&quot;/&gt;</span>
<a href="#l3.159"></a><span id="l3.159">         &lt;body&gt;</span>
<a href="#l3.160"></a><span id="l3.160">           &lt;![CDATA[</span>
<a href="#l3.161"></a><span id="l3.161" class="difflineminus">-            var objLoadingContent = aPlugin.QueryInterface(Components.interfaces.nsIObjectLoadingContent);</span>
<a href="#l3.162"></a><span id="l3.162" class="difflineminus">-            if (this.canActivatePlugin(objLoadingContent))</span>
<a href="#l3.163"></a><span id="l3.163" class="difflineminus">-              objLoadingContent.playPlugin();</span>
<a href="#l3.164"></a><span id="l3.164" class="difflineminus">-</span>
<a href="#l3.165"></a><span id="l3.165" class="difflineminus">-            var haveUnplayedPlugins = this.contentWindowUtils.plugins.some(function(plugin) {</span>
<a href="#l3.166"></a><span id="l3.166" class="difflineminus">-              var hupObjLoadingContent = plugin.QueryInterface(Components.interfaces.nsIObjectLoadingContent);</span>
<a href="#l3.167"></a><span id="l3.167" class="difflineminus">-              return plugin != aPlugin &amp;&amp; this.canActivatePlugin(hupObjLoadingContent);</span>
<a href="#l3.168"></a><span id="l3.168" class="difflineminus">-            }, this);</span>
<a href="#l3.169"></a><span id="l3.169" class="difflineminus">-            if (!haveUnplayedPlugins) {</span>
<a href="#l3.170"></a><span id="l3.170" class="difflineplus">+            if (this.canActivatePlugin(aPlugin))</span>
<a href="#l3.171"></a><span id="l3.171" class="difflineplus">+              aPlugin.playPlugin();</span>
<a href="#l3.172"></a><span id="l3.172" class="difflineplus">+</span>
<a href="#l3.173"></a><span id="l3.173" class="difflineplus">+            var pluginNeedsActivation = this.pluginNeedsActivationExceptThese([aPlugin]);</span>
<a href="#l3.174"></a><span id="l3.174" class="difflineplus">+</span>
<a href="#l3.175"></a><span id="l3.175" class="difflineplus">+            if (pluginNeedsActivation)</span>
<a href="#l3.176"></a><span id="l3.176" class="difflineplus">+              this.showPluginClickToPlayPrompt();</span>
<a href="#l3.177"></a><span id="l3.177" class="difflineplus">+            else</span>
<a href="#l3.178"></a><span id="l3.178">               this.removePluginClickToPlayPrompt();</span>
<a href="#l3.179"></a><span id="l3.179" class="difflineminus">-              this.clickToPlayPromptShown = false;</span>
<a href="#l3.180"></a><span id="l3.180" class="difflineminus">-            }</span>
<a href="#l3.181"></a><span id="l3.181">           ]]&gt;</span>
<a href="#l3.182"></a><span id="l3.182">         &lt;/body&gt;</span>
<a href="#l3.183"></a><span id="l3.183">       &lt;/method&gt;</span>
<a href="#l3.184"></a><span id="l3.184"> </span>
<a href="#l3.185"></a><span id="l3.185">       &lt;method name=&quot;stopPlayPreview&quot;&gt;</span>
<a href="#l3.186"></a><span id="l3.186">         &lt;parameter name=&quot;aPlugin&quot;/&gt;</span>
<a href="#l3.187"></a><span id="l3.187">         &lt;parameter name=&quot;aPlayPlugin&quot;/&gt;</span>
<a href="#l3.188"></a><span id="l3.188">         &lt;body&gt;</span>
<a href="#l3.189"></a><span id="l3.189" class="difflineat">@@ -733,27 +734,63 @@</span>
<a href="#l3.190"></a><span id="l3.190">               }</span>
<a href="#l3.191"></a><span id="l3.191">               browserWin.content.focus();</span>
<a href="#l3.192"></a><span id="l3.192">             }</span>
<a href="#l3.193"></a><span id="l3.193">             return true;</span>
<a href="#l3.194"></a><span id="l3.194">           ]]&gt;</span>
<a href="#l3.195"></a><span id="l3.195">         &lt;/body&gt;</span>
<a href="#l3.196"></a><span id="l3.196">       &lt;/method&gt;</span>
<a href="#l3.197"></a><span id="l3.197"> </span>
<a href="#l3.198"></a><span id="l3.198" class="difflineplus">+      &lt;method name=&quot;getBindingType&quot;&gt;</span>
<a href="#l3.199"></a><span id="l3.199" class="difflineplus">+        &lt;parameter name=&quot;aPlugin&quot;/&gt;</span>
<a href="#l3.200"></a><span id="l3.200" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l3.201"></a><span id="l3.201" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l3.202"></a><span id="l3.202" class="difflineplus">+            // Helper to get the binding handler type from a plugin object</span>
<a href="#l3.203"></a><span id="l3.203" class="difflineplus">+            if (!(aPlugin instanceof Components.interfaces.nsIObjectLoadingContent))</span>
<a href="#l3.204"></a><span id="l3.204" class="difflineplus">+              return null;</span>
<a href="#l3.205"></a><span id="l3.205" class="difflineplus">+</span>
<a href="#l3.206"></a><span id="l3.206" class="difflineplus">+            switch (aPlugin.pluginFallbackType) {</span>
<a href="#l3.207"></a><span id="l3.207" class="difflineplus">+              case Components.interfaces.nsIObjectLoadingContent.PLUGIN_UNSUPPORTED:</span>
<a href="#l3.208"></a><span id="l3.208" class="difflineplus">+                return &quot;PluginNotFound&quot;;</span>
<a href="#l3.209"></a><span id="l3.209" class="difflineplus">+              case Components.interfaces.nsIObjectLoadingContent.PLUGIN_DISABLED:</span>
<a href="#l3.210"></a><span id="l3.210" class="difflineplus">+                return &quot;PluginDisabled&quot;;</span>
<a href="#l3.211"></a><span id="l3.211" class="difflineplus">+              case Components.interfaces.nsIObjectLoadingContent.PLUGIN_BLOCKLISTED:</span>
<a href="#l3.212"></a><span id="l3.212" class="difflineplus">+                return &quot;PluginBlocklisted&quot;;</span>
<a href="#l3.213"></a><span id="l3.213" class="difflineplus">+              case Components.interfaces.nsIObjectLoadingContent.PLUGIN_OUTDATED:</span>
<a href="#l3.214"></a><span id="l3.214" class="difflineplus">+                return &quot;PluginOutdated&quot;;</span>
<a href="#l3.215"></a><span id="l3.215" class="difflineplus">+              case Components.interfaces.nsIObjectLoadingContent.PLUGIN_CLICK_TO_PLAY:</span>
<a href="#l3.216"></a><span id="l3.216" class="difflineplus">+                return &quot;PluginClickToPlay&quot;;</span>
<a href="#l3.217"></a><span id="l3.217" class="difflineplus">+              case Components.interfaces.nsIObjectLoadingContent.PLUGIN_VULNERABLE_UPDATABLE:</span>
<a href="#l3.218"></a><span id="l3.218" class="difflineplus">+                return &quot;PluginVulnerableUpdatable&quot;;</span>
<a href="#l3.219"></a><span id="l3.219" class="difflineplus">+              case Components.interfaces.nsIObjectLoadingContent.PLUGIN_VULNERABLE_NO_UPDATE:</span>
<a href="#l3.220"></a><span id="l3.220" class="difflineplus">+                return &quot;PluginVulnerableNoUpdate&quot;;</span>
<a href="#l3.221"></a><span id="l3.221" class="difflineplus">+              case Components.interfaces.nsIObjectLoadingContent.PLUGIN_PLAY_PREVIEW:</span>
<a href="#l3.222"></a><span id="l3.222" class="difflineplus">+                return &quot;PluginPlayPreview&quot;;</span>
<a href="#l3.223"></a><span id="l3.223" class="difflineplus">+              default:</span>
<a href="#l3.224"></a><span id="l3.224" class="difflineplus">+                // Not all states map to a handler</span>
<a href="#l3.225"></a><span id="l3.225" class="difflineplus">+                return null;</span>
<a href="#l3.226"></a><span id="l3.226" class="difflineplus">+            }</span>
<a href="#l3.227"></a><span id="l3.227" class="difflineplus">+          ]]&gt;</span>
<a href="#l3.228"></a><span id="l3.228" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l3.229"></a><span id="l3.229" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l3.230"></a><span id="l3.230" class="difflineplus">+</span>
<a href="#l3.231"></a><span id="l3.231">       &lt;method name=&quot;makeNicePluginName&quot;&gt;</span>
<a href="#l3.232"></a><span id="l3.232">         &lt;parameter name=&quot;aName&quot;/&gt;</span>
<a href="#l3.233"></a><span id="l3.233" class="difflineminus">-        &lt;parameter name=&quot;aFilename&quot;/&gt;</span>
<a href="#l3.234"></a><span id="l3.234">         &lt;body&gt;</span>
<a href="#l3.235"></a><span id="l3.235">           &lt;![CDATA[</span>
<a href="#l3.236"></a><span id="l3.236">             if (aName == &quot;Shockwave Flash&quot;)</span>
<a href="#l3.237"></a><span id="l3.237">               return &quot;Adobe Flash&quot;;</span>
<a href="#l3.238"></a><span id="l3.238"> </span>
<a href="#l3.239"></a><span id="l3.239" class="difflineminus">-            // Clean up the plugin name by stripping off any trailing version numbers</span>
<a href="#l3.240"></a><span id="l3.240" class="difflineminus">-            // or &quot;plugin&quot;. EG, &quot;Foo Bar Plugin 1.23_02&quot; --&gt; &quot;Foo Bar&quot;</span>
<a href="#l3.241"></a><span id="l3.241" class="difflineminus">-            var newName = aName.replace(/\bplug-?in\b/i, &quot;&quot;).replace(/[\s\d\.\-\_\(\)]+$/, &quot;&quot;);</span>
<a href="#l3.242"></a><span id="l3.242" class="difflineplus">+            // Clean up the plugin name by stripping off any trailing version</span>
<a href="#l3.243"></a><span id="l3.243" class="difflineplus">+            // numbers or &quot;plugin&quot;. EG, &quot;Foo Bar Plugin 1.23_02&quot; --&gt; &quot;Foo Bar&quot;</span>
<a href="#l3.244"></a><span id="l3.244" class="difflineplus">+            // Do this by first stripping the numbers, etc. off the end, and</span>
<a href="#l3.245"></a><span id="l3.245" class="difflineplus">+            // then removing &quot;Plugin&quot; (and then trimming to get rid of any</span>
<a href="#l3.246"></a><span id="l3.246" class="difflineplus">+            // whitespace). Otherwise, something like &quot;Java(TM) Plug-in</span>
<a href="#l3.247"></a><span id="l3.247" class="difflineplus">+            // 1.7.0_07&quot; gets mangled.</span>
<a href="#l3.248"></a><span id="l3.248" class="difflineplus">+            var newName = aName.replace(/[\s\d\.\-\_\(\)]+$/, &quot;&quot;).replace(/\bplug-?in\b/i, &quot;&quot;).trim();</span>
<a href="#l3.249"></a><span id="l3.249">             return newName;</span>
<a href="#l3.250"></a><span id="l3.250">           ]]&gt;</span>
<a href="#l3.251"></a><span id="l3.251">         &lt;/body&gt;</span>
<a href="#l3.252"></a><span id="l3.252">       &lt;/method&gt;</span>
<a href="#l3.253"></a><span id="l3.253"> </span>
<a href="#l3.254"></a><span id="l3.254">       &lt;method name=&quot;isTooSmall&quot;&gt;</span>
<a href="#l3.255"></a><span id="l3.255">         &lt;parameter name=&quot;aPlugin&quot;/&gt;</span>
<a href="#l3.256"></a><span id="l3.256">         &lt;parameter name=&quot;aOverlay&quot;/&gt;</span>
<a href="#l3.257"></a><span id="l3.257" class="difflineat">@@ -1269,19 +1306,28 @@</span>
<a href="#l3.258"></a><span id="l3.258">             var notification = this.getNotificationWithValue(&quot;click-to-play-plugins&quot;);</span>
<a href="#l3.259"></a><span id="l3.259">             if (notification)</span>
<a href="#l3.260"></a><span id="l3.260">               this.removeNotification(notification);</span>
<a href="#l3.261"></a><span id="l3.261">           ]]&gt;</span>
<a href="#l3.262"></a><span id="l3.262">         &lt;/body&gt;</span>
<a href="#l3.263"></a><span id="l3.263">       &lt;/method&gt;</span>
<a href="#l3.264"></a><span id="l3.264"> </span>
<a href="#l3.265"></a><span id="l3.265">       &lt;method name=&quot;showPluginClickToPlayPrompt&quot;&gt;</span>
<a href="#l3.266"></a><span id="l3.266" class="difflineplus">+        &lt;parameter name=&quot;aTriggeredByNewPlugin&quot;/&gt;</span>
<a href="#l3.267"></a><span id="l3.267">         &lt;body&gt;</span>
<a href="#l3.268"></a><span id="l3.268">           &lt;![CDATA[</span>
<a href="#l3.269"></a><span id="l3.269" class="difflineminus">-            this.clickToPlayPromptShown = true;</span>
<a href="#l3.270"></a><span id="l3.270" class="difflineplus">+            // If there's already an existing notification bar, don't do anything.</span>
<a href="#l3.271"></a><span id="l3.271" class="difflineplus">+            // Also don't display a notification bar unless showPluginClickToPlayPrompt</span>
<a href="#l3.272"></a><span id="l3.272" class="difflineplus">+            // has been triggered by a new plugin object on the website; the other code</span>
<a href="#l3.273"></a><span id="l3.273" class="difflineplus">+            // path to this function here is by clicking on the click-to-play overlay on</span>
<a href="#l3.274"></a><span id="l3.274" class="difflineplus">+            // a plugin object. We don't want to re-show the notification bar in that</span>
<a href="#l3.275"></a><span id="l3.275" class="difflineplus">+            // case</span>
<a href="#l3.276"></a><span id="l3.276" class="difflineplus">+            var notification = this.getNotificationWithValue(&quot;click-to-play-plugins&quot;);</span>
<a href="#l3.277"></a><span id="l3.277" class="difflineplus">+            if (notification || !aTriggeredByNewPlugin)</span>
<a href="#l3.278"></a><span id="l3.278" class="difflineplus">+              return;</span>
<a href="#l3.279"></a><span id="l3.279"> </span>
<a href="#l3.280"></a><span id="l3.280">             var checkbox = document.createElement(&quot;checkbox&quot;);</span>
<a href="#l3.281"></a><span id="l3.281">             checkbox.className = &quot;rememberChoice&quot;;</span>
<a href="#l3.282"></a><span id="l3.282">             checkbox.setAttribute(&quot;label&quot;, this._stringBundle.GetStringFromName(&quot;activatepluginsMessage.remember&quot;));</span>
<a href="#l3.283"></a><span id="l3.283"> </span>
<a href="#l3.284"></a><span id="l3.284">             const nsIPermissionManager = Components.interfaces.nsIPermissionManager;</span>
<a href="#l3.285"></a><span id="l3.285">             var messageString = this._stringBundle.GetStringFromName(&quot;activatepluginsMessage.title&quot;);</span>
<a href="#l3.286"></a><span id="l3.286">             var buttons = [{</span>
<a href="#l3.287"></a><span id="l3.287" class="difflineat">@@ -1322,50 +1368,66 @@</span>
<a href="#l3.288"></a><span id="l3.288">           ]]&gt;</span>
<a href="#l3.289"></a><span id="l3.289">         &lt;/body&gt;</span>
<a href="#l3.290"></a><span id="l3.290">       &lt;/method&gt;</span>
<a href="#l3.291"></a><span id="l3.291"> </span>
<a href="#l3.292"></a><span id="l3.292">       &lt;method name=&quot;hideClickToPlayOverlay&quot;&gt;</span>
<a href="#l3.293"></a><span id="l3.293">         &lt;parameter name=&quot;pluginElement&quot;/&gt;</span>
<a href="#l3.294"></a><span id="l3.294">         &lt;body&gt;</span>
<a href="#l3.295"></a><span id="l3.295">           &lt;![CDATA[</span>
<a href="#l3.296"></a><span id="l3.296" class="difflineminus">-            var doc = pluginElement.ownerDocument;</span>
<a href="#l3.297"></a><span id="l3.297">             var overlay = this.getPluginUI(pluginElement, &quot;mainBox&quot;);</span>
<a href="#l3.298"></a><span id="l3.298">             if (overlay) // no overlay if plugin has been activated</span>
<a href="#l3.299"></a><span id="l3.299">               overlay.style.visibility = &quot;hidden&quot;;</span>
<a href="#l3.300"></a><span id="l3.300">           ]]&gt;</span>
<a href="#l3.301"></a><span id="l3.301">         &lt;/body&gt;</span>
<a href="#l3.302"></a><span id="l3.302">       &lt;/method&gt;</span>
<a href="#l3.303"></a><span id="l3.303"> </span>
<a href="#l3.304"></a><span id="l3.304" class="difflineminus">-      &lt;method name=&quot;setupPluginClickToPlay&quot;&gt;</span>
<a href="#l3.305"></a><span id="l3.305" class="difflineminus">-        &lt;parameter name=&quot;pluginElement&quot;/&gt;</span>
<a href="#l3.306"></a><span id="l3.306" class="difflineplus">+      &lt;method name=&quot;pluginNeedsActivationExceptThese&quot;&gt;</span>
<a href="#l3.307"></a><span id="l3.307" class="difflineplus">+        &lt;parameter name=&quot;aExceptThese&quot;/&gt;</span>
<a href="#l3.308"></a><span id="l3.308">         &lt;body&gt;</span>
<a href="#l3.309"></a><span id="l3.309">           &lt;![CDATA[</span>
<a href="#l3.310"></a><span id="l3.310" class="difflineminus">-            var doc = pluginElement.ownerDocument;</span>
<a href="#l3.311"></a><span id="l3.311" class="difflineplus">+            var pluginNeedsActivation = this.contentWindowUtils</span>
<a href="#l3.312"></a><span id="l3.312" class="difflineplus">+                                            .plugins.some(function(aPlugin) {</span>
<a href="#l3.313"></a><span id="l3.313" class="difflineplus">+              return aExceptThese.indexOf(aPlugin) &lt; 0 &amp;&amp;</span>
<a href="#l3.314"></a><span id="l3.314" class="difflineplus">+                     this.canActivatePlugin(aPlugin);</span>
<a href="#l3.315"></a><span id="l3.315" class="difflineplus">+            }, this);</span>
<a href="#l3.316"></a><span id="l3.316" class="difflineplus">+</span>
<a href="#l3.317"></a><span id="l3.317" class="difflineplus">+            return pluginNeedsActivation;</span>
<a href="#l3.318"></a><span id="l3.318" class="difflineplus">+          ]]&gt;</span>
<a href="#l3.319"></a><span id="l3.319" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l3.320"></a><span id="l3.320" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l3.321"></a><span id="l3.321" class="difflineplus">+</span>
<a href="#l3.322"></a><span id="l3.322" class="difflineplus">+      &lt;method name=&quot;setupPluginClickToPlay&quot;&gt;</span>
<a href="#l3.323"></a><span id="l3.323" class="difflineplus">+        &lt;parameter name=&quot;pluginElement&quot;/&gt;</span>
<a href="#l3.324"></a><span id="l3.324" class="difflineplus">+        &lt;parameter name=&quot;aTriggeredByNewPlugin&quot;/&gt;</span>
<a href="#l3.325"></a><span id="l3.325" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l3.326"></a><span id="l3.326" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l3.327"></a><span id="l3.327">             var overlay = this.getPluginUI(pluginElement, &quot;mainBox&quot;);</span>
<a href="#l3.328"></a><span id="l3.328"> </span>
<a href="#l3.329"></a><span id="l3.329" class="difflineminus">-            var objLoadingContent = pluginElement.QueryInterface(Components.interfaces.nsIObjectLoadingContent);</span>
<a href="#l3.330"></a><span id="l3.330" class="difflineminus">-            if (!this.canActivatePlugin(objLoadingContent)) {</span>
<a href="#l3.331"></a><span id="l3.331" class="difflineplus">+            if (!this.canActivatePlugin(pluginElement)) {</span>
<a href="#l3.332"></a><span id="l3.332">               overlay.style.visibility = &quot;hidden&quot;;</span>
<a href="#l3.333"></a><span id="l3.333">               return;</span>
<a href="#l3.334"></a><span id="l3.334">             }</span>
<a href="#l3.335"></a><span id="l3.335"> </span>
<a href="#l3.336"></a><span id="l3.336">             if (this.clickToPlayPluginsActivated) {</span>
<a href="#l3.337"></a><span id="l3.337">               pluginElement.playPlugin();</span>
<a href="#l3.338"></a><span id="l3.338">               return;</span>
<a href="#l3.339"></a><span id="l3.339">             }</span>
<a href="#l3.340"></a><span id="l3.340"> </span>
<a href="#l3.341"></a><span id="l3.341" class="difflineminus">-            if (!this.clickToPlayPromptShown)</span>
<a href="#l3.342"></a><span id="l3.342" class="difflineminus">-              this.showPluginClickToPlayPrompt();</span>
<a href="#l3.343"></a><span id="l3.343" class="difflineplus">+            this.showPluginClickToPlayPrompt(aTriggeredByNewPlugin);</span>
<a href="#l3.344"></a><span id="l3.344"> </span>
<a href="#l3.345"></a><span id="l3.345">             if (this.isTooSmall(pluginElement, overlay)) {</span>
<a href="#l3.346"></a><span id="l3.346">               overlay.style.visibility = &quot;hidden&quot;;</span>
<a href="#l3.347"></a><span id="l3.347">               return;</span>
<a href="#l3.348"></a><span id="l3.348">             }</span>
<a href="#l3.349"></a><span id="l3.349"> </span>
<a href="#l3.350"></a><span id="l3.350" class="difflineplus">+            var pluginName = this.getPluginInfo(pluginElement).pluginName;</span>
<a href="#l3.351"></a><span id="l3.351" class="difflineplus">+            var messageString = this._stringBundle.formatStringFromName(&quot;PluginClickToActivate&quot;, [pluginName], 1);</span>
<a href="#l3.352"></a><span id="l3.352" class="difflineplus">+            var overlayText = this.getPluginUI(pluginElement, &quot;msg msgClickToPlay&quot;);</span>
<a href="#l3.353"></a><span id="l3.353" class="difflineplus">+            overlayText.textContent = messageString;</span>
<a href="#l3.354"></a><span id="l3.354">             this.addLinkClickCallback(overlay, this.activateSinglePlugin, pluginElement);</span>
<a href="#l3.355"></a><span id="l3.355"> </span>
<a href="#l3.356"></a><span id="l3.356">             var closeIcon = this.getPluginUI(pluginElement, &quot;closeIcon&quot;);</span>
<a href="#l3.357"></a><span id="l3.357">             this.addLinkClickCallback(closeIcon, this.hideClickToPlayOverlay, pluginElement);</span>
<a href="#l3.358"></a><span id="l3.358">           ]]&gt;</span>
<a href="#l3.359"></a><span id="l3.359">         &lt;/body&gt;</span>
<a href="#l3.360"></a><span id="l3.360">       &lt;/method&gt;</span>
<a href="#l3.361"></a><span id="l3.361"> </span>
<a href="#l3.362"></a><span id="l3.362" class="difflineat">@@ -2080,35 +2142,35 @@</span>
<a href="#l3.363"></a><span id="l3.363">               // For broken non-object plugin tags, register a click handler so</span>
<a href="#l3.364"></a><span id="l3.364">               // that the user can click the plugin replacement to get the new</span>
<a href="#l3.365"></a><span id="l3.365">               // plugin. Object tags can, and often do, deal with that</span>
<a href="#l3.366"></a><span id="l3.366">               // themselves, so don't stomp on the page developer's toes.</span>
<a href="#l3.367"></a><span id="l3.367">               if (!(plugin instanceof HTMLObjectElement)) {</span>
<a href="#l3.368"></a><span id="l3.368">                 // We don't yet check to see if there's actually an installer available.</span>
<a href="#l3.369"></a><span id="l3.369">                 var installStatus = this.getPluginUI(plugin, &quot;installStatus&quot;);</span>
<a href="#l3.370"></a><span id="l3.370">                 installStatus.setAttribute(&quot;status&quot;, &quot;ready&quot;);</span>
<a href="#l3.371"></a><span id="l3.371" class="difflineminus">-                var iconStatus = doc.getAnonymousElementByAttribute(plugin, &quot;class&quot;, &quot;icon&quot;);</span>
<a href="#l3.372"></a><span id="l3.372" class="difflineplus">+                var iconStatus = this.getPluginUI(plugin, &quot;icon&quot;);</span>
<a href="#l3.373"></a><span id="l3.373">                 iconStatus.setAttribute(&quot;status&quot;, &quot;ready&quot;);</span>
<a href="#l3.374"></a><span id="l3.374" class="difflineminus">-                var installLink = doc.getAnonymousElementByAttribute(plugin, &quot;class&quot;, &quot;installPluginLink&quot;);</span>
<a href="#l3.375"></a><span id="l3.375" class="difflineplus">+                var installLink = this.getPluginUI(plugin, &quot;installPluginLink&quot;);</span>
<a href="#l3.376"></a><span id="l3.376">                 this.addLinkClickCallback(installLink, installMissingPlugins);</span>
<a href="#l3.377"></a><span id="l3.377">               }</span>
<a href="#l3.378"></a><span id="l3.378"> </span>
<a href="#l3.379"></a><span id="l3.379">               notification = &quot;missing-plugins&quot;;</span>
<a href="#l3.380"></a><span id="l3.380">               message = this._stringBundle.GetStringFromName(&quot;missingpluginsMessage.title&quot;);</span>
<a href="#l3.381"></a><span id="l3.381">               buttons = [{</span>
<a href="#l3.382"></a><span id="l3.382">                 label: this._stringBundle.GetStringFromName(&quot;missingpluginsMessage.button.label&quot;),</span>
<a href="#l3.383"></a><span id="l3.383">                 accessKey: this._stringBundle.GetStringFromName(&quot;missingpluginsMessage.button.accesskey&quot;),</span>
<a href="#l3.384"></a><span id="l3.384">                 popup: null,</span>
<a href="#l3.385"></a><span id="l3.385">                 callback: this.installMissingPlugins.bind(this)</span>
<a href="#l3.386"></a><span id="l3.386">               }];</span>
<a href="#l3.387"></a><span id="l3.387">               break;</span>
<a href="#l3.388"></a><span id="l3.388"> </span>
<a href="#l3.389"></a><span id="l3.389">             case nsIObjectLoadingContent.PLUGIN_DISABLED:</span>
<a href="#l3.390"></a><span id="l3.390">               if (&quot;toEM&quot; in window) {</span>
<a href="#l3.391"></a><span id="l3.391" class="difflineminus">-                var manageLink = doc.getAnonymousElementByAttribute(plugin, &quot;class&quot;, &quot;managePluginsLink&quot;);</span>
<a href="#l3.392"></a><span id="l3.392" class="difflineplus">+                var manageLink = this.getPluginUI(plugin, &quot;managePluginsLink&quot;);</span>
<a href="#l3.393"></a><span id="l3.393">                 this.addLinkClickCallback(manageLink, window.toEM, &quot;addons://list/plugin&quot;);</span>
<a href="#l3.394"></a><span id="l3.394">               }</span>
<a href="#l3.395"></a><span id="l3.395">               return;</span>
<a href="#l3.396"></a><span id="l3.396"> </span>
<a href="#l3.397"></a><span id="l3.397">             case nsIObjectLoadingContent.PLUGIN_BLOCKLISTED:</span>
<a href="#l3.398"></a><span id="l3.398">               notification = &quot;blocked-plugins&quot;;</span>
<a href="#l3.399"></a><span id="l3.399">               message = this._stringBundle.GetStringFromName(&quot;blockedpluginsMessage.title&quot;);</span>
<a href="#l3.400"></a><span id="l3.400">               buttons = [{</span>
<a href="#l3.401"></a><span id="l3.401" class="difflineat">@@ -2132,23 +2194,28 @@</span>
<a href="#l3.402"></a><span id="l3.402">                 accessKey: this._stringBundle.GetStringFromName(&quot;outdatedpluginsMessage.button.accesskey&quot;),</span>
<a href="#l3.403"></a><span id="l3.403">                 popup: null,</span>
<a href="#l3.404"></a><span id="l3.404">                 callback: this.openURLPref.bind(this, &quot;plugins.update.url&quot;)</span>
<a href="#l3.405"></a><span id="l3.405">               }];</span>
<a href="#l3.406"></a><span id="l3.406">               pref = &quot;plugins.hide_infobar_for_outdated_plugin&quot;;</span>
<a href="#l3.407"></a><span id="l3.407">               break;</span>
<a href="#l3.408"></a><span id="l3.408"> </span>
<a href="#l3.409"></a><span id="l3.409">             case nsIObjectLoadingContent.PLUGIN_VULNERABLE_UPDATABLE:</span>
<a href="#l3.410"></a><span id="l3.410" class="difflineminus">-              var updateLink = doc.getAnonymousElementByAttribute(plugin, &quot;class&quot;, &quot;checkForUpdatesLink&quot;);</span>
<a href="#l3.411"></a><span id="l3.411" class="difflineplus">+              var updateLink = this.getPluginUI(plugin, &quot;checkForUpdatesLink&quot;);</span>
<a href="#l3.412"></a><span id="l3.412">               this.addLinkClickCallback(updateLink, this.openURLPref, &quot;plugins.update.url&quot;);</span>
<a href="#l3.413"></a><span id="l3.413">               // fall through</span>
<a href="#l3.414"></a><span id="l3.414">             case nsIObjectLoadingContent.PLUGIN_VULNERABLE_NO_UPDATE:</span>
<a href="#l3.415"></a><span id="l3.415" class="difflineplus">+              var eventType = this.getBindingType(plugin);</span>
<a href="#l3.416"></a><span id="l3.416" class="difflineplus">+              // When we got here, we deal with a vulnerable plugin object, so setup UI elements for this case</span>
<a href="#l3.417"></a><span id="l3.417" class="difflineplus">+              var vulnerabilityString = this._stringBundle.GetStringFromName(eventType);</span>
<a href="#l3.418"></a><span id="l3.418" class="difflineplus">+              var vulnerabilityText = doc.getAnonymousElementByAttribute(plugin, &quot;anonid&quot;, &quot;vulnerabilityStatus&quot;);</span>
<a href="#l3.419"></a><span id="l3.419" class="difflineplus">+              vulnerabilityText.textContent = vulnerabilityString;</span>
<a href="#l3.420"></a><span id="l3.420">               // fall through</span>
<a href="#l3.421"></a><span id="l3.421">             case nsIObjectLoadingContent.PLUGIN_CLICK_TO_PLAY:</span>
<a href="#l3.422"></a><span id="l3.422" class="difflineminus">-              this.setupPluginClickToPlay(plugin);</span>
<a href="#l3.423"></a><span id="l3.423" class="difflineplus">+              this.setupPluginClickToPlay(plugin, true);</span>
<a href="#l3.424"></a><span id="l3.424">               return;</span>
<a href="#l3.425"></a><span id="l3.425"> </span>
<a href="#l3.426"></a><span id="l3.426">             case nsIObjectLoadingContent.PLUGIN_PLAY_PREVIEW:</span>
<a href="#l3.427"></a><span id="l3.427">               this.handlePlayPreviewEvent(plugin);</span>
<a href="#l3.428"></a><span id="l3.428">               return;</span>
<a href="#l3.429"></a><span id="l3.429"> </span>
<a href="#l3.430"></a><span id="l3.430">             default:</span>
<a href="#l3.431"></a><span id="l3.431">               return;</span>
<a href="#l3.432"></a><span id="l3.432" class="difflineat">@@ -2165,27 +2232,26 @@</span>
<a href="#l3.433"></a><span id="l3.433">           var doPrompt        = true; // XXX followup for .getData(&quot;doPrompt&quot;);</span>
<a href="#l3.434"></a><span id="l3.434">           var submitReports   = true; // XXX followup for .getData(&quot;submitReports&quot;);</span>
<a href="#l3.435"></a><span id="l3.435">           var pluginName      = event.getData(&quot;pluginName&quot;);</span>
<a href="#l3.436"></a><span id="l3.436">           var pluginFilename  = event.getData(&quot;pluginFilename&quot;);</span>
<a href="#l3.437"></a><span id="l3.437">           var pluginDumpID    = event.getData(&quot;pluginDumpID&quot;);</span>
<a href="#l3.438"></a><span id="l3.438">           var browserDumpID   = event.getData(&quot;browserDumpID&quot;);</span>
<a href="#l3.439"></a><span id="l3.439"> </span>
<a href="#l3.440"></a><span id="l3.440">           // Remap the plugin name to a more user-presentable form.</span>
<a href="#l3.441"></a><span id="l3.441" class="difflineminus">-          pluginName = this.makeNicePluginName(pluginName, pluginFilename);</span>
<a href="#l3.442"></a><span id="l3.442" class="difflineplus">+          pluginName = this.makeNicePluginName(pluginName);</span>
<a href="#l3.443"></a><span id="l3.443"> </span>
<a href="#l3.444"></a><span id="l3.444">           // Force a style flush, so that we ensure our binding is attached.</span>
<a href="#l3.445"></a><span id="l3.445">           plugin.clientTop;</span>
<a href="#l3.446"></a><span id="l3.446"> </span>
<a href="#l3.447"></a><span id="l3.447">           // Configure the crashed-plugin placeholder.</span>
<a href="#l3.448"></a><span id="l3.448" class="difflineminus">-          var doc = plugin.ownerDocument;</span>
<a href="#l3.449"></a><span id="l3.449" class="difflineminus">-          var overlay = doc.getAnonymousElementByAttribute(plugin, &quot;class&quot;, &quot;mainBox&quot;);</span>
<a href="#l3.450"></a><span id="l3.450" class="difflineplus">+          var overlay = this.getPluginUI(plugin, &quot;mainBox&quot;);</span>
<a href="#l3.451"></a><span id="l3.451"> </span>
<a href="#l3.452"></a><span id="l3.452">           var status;</span>
<a href="#l3.453"></a><span id="l3.453" class="difflineminus">-          var statusDiv = doc.getAnonymousElementByAttribute(plugin, &quot;class&quot;, &quot;submitStatus&quot;);</span>
<a href="#l3.454"></a><span id="l3.454" class="difflineplus">+          var statusDiv = this.getPluginUI(plugin, &quot;submitStatus&quot;);</span>
<a href="#l3.455"></a><span id="l3.455"> </span>
<a href="#l3.456"></a><span id="l3.456">           if (this.CrashSubmit) {</span>
<a href="#l3.457"></a><span id="l3.457">             // Determine which message to show regarding crash reports.</span>
<a href="#l3.458"></a><span id="l3.458">             if (submittedReport) { // submitReports &amp;&amp; !doPrompt, handled in observer</span>
<a href="#l3.459"></a><span id="l3.459">               status = &quot;submitted&quot;;</span>
<a href="#l3.460"></a><span id="l3.460">             }</span>
<a href="#l3.461"></a><span id="l3.461">             else if (!submitReports &amp;&amp; !doPrompt) {</span>
<a href="#l3.462"></a><span id="l3.462">               status = &quot;noSubmit&quot;;</span>
<a href="#l3.463"></a><span id="l3.463" class="difflineat">@@ -2241,24 +2307,24 @@</span>
<a href="#l3.464"></a><span id="l3.464">           // If we don't have a minidumpID, we can't (or didn't) submit anything.</span>
<a href="#l3.465"></a><span id="l3.465">           // This can happen if the plugin is killed from the task manager.</span>
<a href="#l3.466"></a><span id="l3.466">           if (!pluginDumpID) {</span>
<a href="#l3.467"></a><span id="l3.467">             status = &quot;noReport&quot;;</span>
<a href="#l3.468"></a><span id="l3.468">           }</span>
<a href="#l3.469"></a><span id="l3.469"> </span>
<a href="#l3.470"></a><span id="l3.470">           statusDiv.setAttribute(&quot;status&quot;, status);</span>
<a href="#l3.471"></a><span id="l3.471"> </span>
<a href="#l3.472"></a><span id="l3.472" class="difflineminus">-          var helpIcon = doc.getAnonymousElementByAttribute(plugin, &quot;class&quot;, &quot;helpIcon&quot;);</span>
<a href="#l3.473"></a><span id="l3.473" class="difflineplus">+          var helpIcon = this.getPluginUI(plugin, &quot;helpIcon&quot;);</span>
<a href="#l3.474"></a><span id="l3.474">           this.addLinkClickCallback(helpIcon, this.openHelpPage);</span>
<a href="#l3.475"></a><span id="l3.475"> </span>
<a href="#l3.476"></a><span id="l3.476">           var messageString = this._stringBundle.formatStringFromName(&quot;crashedpluginsMessage.title&quot;, [pluginName], 1);</span>
<a href="#l3.477"></a><span id="l3.477">           var crashText = this.getPluginUI(plugin, &quot;msgCrashedText&quot;);</span>
<a href="#l3.478"></a><span id="l3.478">           crashText.textContent = messageString;</span>
<a href="#l3.479"></a><span id="l3.479"> </span>
<a href="#l3.480"></a><span id="l3.480" class="difflineminus">-          var link = doc.getAnonymousElementByAttribute(plugin, &quot;class&quot;, &quot;reloadLink&quot;);</span>
<a href="#l3.481"></a><span id="l3.481" class="difflineplus">+          var link = this.getPluginUI(plugin, &quot;reloadLink&quot;);</span>
<a href="#l3.482"></a><span id="l3.482">           this.addLinkClickCallback(link, this.reloadPage);</span>
<a href="#l3.483"></a><span id="l3.483"> </span>
<a href="#l3.484"></a><span id="l3.484">           var isShowing = true;</span>
<a href="#l3.485"></a><span id="l3.485"> </span>
<a href="#l3.486"></a><span id="l3.486">           // Is the &lt;object&gt;'s size too small to hold what we want to show?</span>
<a href="#l3.487"></a><span id="l3.487">           if (this.isTooSmall(plugin, overlay)) {</span>
<a href="#l3.488"></a><span id="l3.488">             // First try hiding the comment box and related report submission UI.</span>
<a href="#l3.489"></a><span id="l3.489">             statusDiv.removeAttribute(&quot;status&quot;);</span>
<a href="#l3.490"></a><span id="l3.490" class="difflineat">@@ -2367,25 +2433,21 @@</span>
<a href="#l3.491"></a><span id="l3.491">         ]]&gt;</span>
<a href="#l3.492"></a><span id="l3.492">       &lt;/handler&gt;</span>
<a href="#l3.493"></a><span id="l3.493"> </span>
<a href="#l3.494"></a><span id="l3.494">       &lt;handler event=&quot;pageshow&quot; phase=&quot;capturing&quot;&gt;</span>
<a href="#l3.495"></a><span id="l3.495">         &lt;![CDATA[</span>
<a href="#l3.496"></a><span id="l3.496">           // The PluginClickToPlay events are not fired when navigating using the</span>
<a href="#l3.497"></a><span id="l3.497">           // BF cache. |event.persisted| is true when the page is loaded from the</span>
<a href="#l3.498"></a><span id="l3.498">           // BF cache, so this code reshows the notification if necessary.</span>
<a href="#l3.499"></a><span id="l3.499" class="difflineminus">-          if (!event.persisted || !this._prefs.getBoolPref(&quot;plugins.click_to_play&quot;))</span>
<a href="#l3.500"></a><span id="l3.500" class="difflineplus">+          if (!event.persisted)</span>
<a href="#l3.501"></a><span id="l3.501">             return;</span>
<a href="#l3.502"></a><span id="l3.502"> </span>
<a href="#l3.503"></a><span id="l3.503" class="difflineminus">-          var pluginNeedsActivation = this.contentWindowUtils.plugins.some(function(aPlugin) {</span>
<a href="#l3.504"></a><span id="l3.504" class="difflineminus">-            var objLoadingContent = aPlugin.QueryInterface(Components.interfaces.nsIObjectLoadingContent);</span>
<a href="#l3.505"></a><span id="l3.505" class="difflineminus">-            return this.canActivatePlugin(objLoadingContent);</span>
<a href="#l3.506"></a><span id="l3.506" class="difflineminus">-          }, this);</span>
<a href="#l3.507"></a><span id="l3.507" class="difflineminus">-          if (pluginNeedsActivation)</span>
<a href="#l3.508"></a><span id="l3.508" class="difflineminus">-            this.showPluginClickToPlayPrompt();</span>
<a href="#l3.509"></a><span id="l3.509" class="difflineplus">+          if (pluginNeedsActivationExceptThese([]))</span>
<a href="#l3.510"></a><span id="l3.510" class="difflineplus">+            this.showPluginClickToPlayPrompt(true);</span>
<a href="#l3.511"></a><span id="l3.511">         ]]&gt;</span>
<a href="#l3.512"></a><span id="l3.512">       &lt;/handler&gt;</span>
<a href="#l3.513"></a><span id="l3.513">     &lt;/handlers&gt;</span>
<a href="#l3.514"></a><span id="l3.514">   &lt;/binding&gt;</span>
<a href="#l3.515"></a><span id="l3.515"> </span>
<a href="#l3.516"></a><span id="l3.516">   &lt;binding id=&quot;popup-notification&quot;</span>
<a href="#l3.517"></a><span id="l3.517">            extends=&quot;chrome://communicator/content/bindings/notification.xml#browser-notificationbox&quot;&gt;</span>
<a href="#l3.518"></a><span id="l3.518">     &lt;implementation&gt;</span>
<a href="#l3.519"></a><span id="l3.519" class="difflineat">@@ -2483,38 +2545,113 @@</span>
<a href="#l3.520"></a><span id="l3.520">             PopupNotifications.show(this.activeBrowser,</span>
<a href="#l3.521"></a><span id="l3.521">                                     &quot;lwtheme-install-notification&quot;, message,</span>
<a href="#l3.522"></a><span id="l3.522">                                     &quot;addons-notification-icon&quot;, action, null,</span>
<a href="#l3.523"></a><span id="l3.523">                                     options);</span>
<a href="#l3.524"></a><span id="l3.524">           ]]&gt;</span>
<a href="#l3.525"></a><span id="l3.525">         &lt;/body&gt;</span>
<a href="#l3.526"></a><span id="l3.526">       &lt;/method&gt;</span>
<a href="#l3.527"></a><span id="l3.527"> </span>
<a href="#l3.528"></a><span id="l3.528" class="difflineplus">+      &lt;method name=&quot;makeCenterActions&quot;&gt;</span>
<a href="#l3.529"></a><span id="l3.529" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l3.530"></a><span id="l3.530" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l3.531"></a><span id="l3.531" class="difflineplus">+            let pluginsDictionary = new Map();</span>
<a href="#l3.532"></a><span id="l3.532" class="difflineplus">+            for (let plugin of this.contentWindowUtils.plugins) {</span>
<a href="#l3.533"></a><span id="l3.533" class="difflineplus">+              if (this.canActivatePlugin(plugin)) {</span>
<a href="#l3.534"></a><span id="l3.534" class="difflineplus">+                let pluginName = this.getPluginInfo(plugin).pluginName;</span>
<a href="#l3.535"></a><span id="l3.535" class="difflineplus">+                if (!pluginsDictionary.has(pluginName)) {</span>
<a href="#l3.536"></a><span id="l3.536" class="difflineplus">+                  pluginsDictionary.set(pluginName, []);</span>
<a href="#l3.537"></a><span id="l3.537" class="difflineplus">+                }</span>
<a href="#l3.538"></a><span id="l3.538" class="difflineplus">+                pluginsDictionary.get(pluginName).push(plugin);</span>
<a href="#l3.539"></a><span id="l3.539" class="difflineplus">+              }</span>
<a href="#l3.540"></a><span id="l3.540" class="difflineplus">+            }</span>
<a href="#l3.541"></a><span id="l3.541" class="difflineplus">+</span>
<a href="#l3.542"></a><span id="l3.542" class="difflineplus">+            let centerActions = [];</span>
<a href="#l3.543"></a><span id="l3.543" class="difflineplus">+            for (let [pluginName, namedPluginArray] of pluginsDictionary) {</span>
<a href="#l3.544"></a><span id="l3.544" class="difflineplus">+              let plugin = namedPluginArray[0];</span>
<a href="#l3.545"></a><span id="l3.545" class="difflineplus">+              let warn = false;</span>
<a href="#l3.546"></a><span id="l3.546" class="difflineplus">+              let warningText = &quot;&quot;;</span>
<a href="#l3.547"></a><span id="l3.547" class="difflineplus">+              let updateLink = &quot;&quot;;</span>
<a href="#l3.548"></a><span id="l3.548" class="difflineplus">+</span>
<a href="#l3.549"></a><span id="l3.549" class="difflineplus">+              if (plugin.pluginFallbackType) {</span>
<a href="#l3.550"></a><span id="l3.550" class="difflineplus">+                if (plugin.pluginFallbackType ==</span>
<a href="#l3.551"></a><span id="l3.551" class="difflineplus">+                      Components.interfaces.nsIObjectLoadingContent.PLUGIN_VULNERABLE_UPDATABLE) {</span>
<a href="#l3.552"></a><span id="l3.552" class="difflineplus">+                  updateLink = Services.urlFormatter.formatURLPref(&quot;plugins.update.url&quot;);</span>
<a href="#l3.553"></a><span id="l3.553" class="difflineplus">+                  warn = true;</span>
<a href="#l3.554"></a><span id="l3.554" class="difflineplus">+                  warningText = this._stringBundle.GetStringFromName(&quot;vulnerableUpdatablePluginWarning&quot;);</span>
<a href="#l3.555"></a><span id="l3.555" class="difflineplus">+                }</span>
<a href="#l3.556"></a><span id="l3.556" class="difflineplus">+                else if (plugin.pluginFallbackType ==</span>
<a href="#l3.557"></a><span id="l3.557" class="difflineplus">+                           Components.interfaces.nsIObjectLoadingContent.PLUGIN_VULNERABLE_NO_UPDATE) {</span>
<a href="#l3.558"></a><span id="l3.558" class="difflineplus">+                  warn = true;</span>
<a href="#l3.559"></a><span id="l3.559" class="difflineplus">+                  warningText = this._stringBundle.GetStringFromName(&quot;vulnerableNoUpdatePluginWarning&quot;);</span>
<a href="#l3.560"></a><span id="l3.560" class="difflineplus">+                }</span>
<a href="#l3.561"></a><span id="l3.561" class="difflineplus">+              }</span>
<a href="#l3.562"></a><span id="l3.562" class="difflineplus">+</span>
<a href="#l3.563"></a><span id="l3.563" class="difflineplus">+              let action = {</span>
<a href="#l3.564"></a><span id="l3.564" class="difflineplus">+                message: pluginName,</span>
<a href="#l3.565"></a><span id="l3.565" class="difflineplus">+                warn: warn,</span>
<a href="#l3.566"></a><span id="l3.566" class="difflineplus">+                warningText: warningText,</span>
<a href="#l3.567"></a><span id="l3.567" class="difflineplus">+                updateLink: updateLink,</span>
<a href="#l3.568"></a><span id="l3.568" class="difflineplus">+                label: this._stringBundle.GetStringFromName(&quot;activateSinglePlugin&quot;),</span>
<a href="#l3.569"></a><span id="l3.569" class="difflineplus">+                callback: (function(aName) {</span>
<a href="#l3.570"></a><span id="l3.570" class="difflineplus">+                  /* Play all plugins currently in the page of the given name</span>
<a href="#l3.571"></a><span id="l3.571" class="difflineplus">+                     and, if needed, remove the notification */</span>
<a href="#l3.572"></a><span id="l3.572" class="difflineplus">+                  for (let plugin of this.contentWindowUtils.plugins) {</span>
<a href="#l3.573"></a><span id="l3.573" class="difflineplus">+                    if (this.canActivatePlugin(plugin) &amp;&amp;</span>
<a href="#l3.574"></a><span id="l3.574" class="difflineplus">+                        this.getPluginInfo(plugin).pluginName == aName)</span>
<a href="#l3.575"></a><span id="l3.575" class="difflineplus">+                      plugin.playPlugin();</span>
<a href="#l3.576"></a><span id="l3.576" class="difflineplus">+                  }</span>
<a href="#l3.577"></a><span id="l3.577" class="difflineplus">+</span>
<a href="#l3.578"></a><span id="l3.578" class="difflineplus">+                  let notification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, this.activeBrowser)</span>
<a href="#l3.579"></a><span id="l3.579" class="difflineplus">+;</span>
<a href="#l3.580"></a><span id="l3.580" class="difflineplus">+                  if (notification &amp;&amp;</span>
<a href="#l3.581"></a><span id="l3.581" class="difflineplus">+                      !this.pluginNeedsActivationExceptThese([]))</span>
<a href="#l3.582"></a><span id="l3.582" class="difflineplus">+                    notification.remove();</span>
<a href="#l3.583"></a><span id="l3.583" class="difflineplus">+                }).bind(this, pluginName)</span>
<a href="#l3.584"></a><span id="l3.584" class="difflineplus">+              };</span>
<a href="#l3.585"></a><span id="l3.585" class="difflineplus">+              centerActions.push(action);</span>
<a href="#l3.586"></a><span id="l3.586" class="difflineplus">+            }</span>
<a href="#l3.587"></a><span id="l3.587" class="difflineplus">+</span>
<a href="#l3.588"></a><span id="l3.588" class="difflineplus">+            return centerActions;</span>
<a href="#l3.589"></a><span id="l3.589" class="difflineplus">+          ]]&gt;</span>
<a href="#l3.590"></a><span id="l3.590" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l3.591"></a><span id="l3.591" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l3.592"></a><span id="l3.592" class="difflineplus">+</span>
<a href="#l3.593"></a><span id="l3.593" class="difflineplus">+</span>
<a href="#l3.594"></a><span id="l3.594">       &lt;method name=&quot;removePluginClickToPlayPrompt&quot;&gt;</span>
<a href="#l3.595"></a><span id="l3.595">         &lt;body&gt;</span>
<a href="#l3.596"></a><span id="l3.596">           &lt;![CDATA[</span>
<a href="#l3.597"></a><span id="l3.597">             var notification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;,</span>
<a href="#l3.598"></a><span id="l3.598">                                                                   this.activeBrowser);</span>
<a href="#l3.599"></a><span id="l3.599">             if (notification)</span>
<a href="#l3.600"></a><span id="l3.600">               notification.remove();</span>
<a href="#l3.601"></a><span id="l3.601">           ]]&gt;</span>
<a href="#l3.602"></a><span id="l3.602">         &lt;/body&gt;</span>
<a href="#l3.603"></a><span id="l3.603">       &lt;/method&gt;</span>
<a href="#l3.604"></a><span id="l3.604"> </span>
<a href="#l3.605"></a><span id="l3.605">       &lt;method name=&quot;showPluginClickToPlayPrompt&quot;&gt;</span>
<a href="#l3.606"></a><span id="l3.606">         &lt;body&gt;</span>
<a href="#l3.607"></a><span id="l3.607">           &lt;![CDATA[</span>
<a href="#l3.608"></a><span id="l3.608" class="difflineminus">-            this.clickToPlayPromptShown = true;</span>
<a href="#l3.609"></a><span id="l3.609">             const nsIPermissionManager = Components.interfaces.nsIPermissionManager;</span>
<a href="#l3.610"></a><span id="l3.610" class="difflineminus">-            var messageString = this._stringBundle.GetStringFromName(&quot;activatepluginsMessage.title&quot;);</span>
<a href="#l3.611"></a><span id="l3.611">             var mainAction = {</span>
<a href="#l3.612"></a><span id="l3.612">               label: this._stringBundle.GetStringFromName(&quot;activatepluginsMessage.activate.label&quot;),</span>
<a href="#l3.613"></a><span id="l3.613">               accessKey: this._stringBundle.GetStringFromName(&quot;activatepluginsMessage.activate.accesskey&quot;),</span>
<a href="#l3.614"></a><span id="l3.614">               callback: this.activatePlugins.bind(this)</span>
<a href="#l3.615"></a><span id="l3.615">             };</span>
<a href="#l3.616"></a><span id="l3.616" class="difflineplus">+            var centerActions = this.makeCenterActions();</span>
<a href="#l3.617"></a><span id="l3.617" class="difflineplus">+            var haveVulnerablePlugin = this.contentWindowUtils.plugins.some(function(plugin) {</span>
<a href="#l3.618"></a><span id="l3.618" class="difflineplus">+              return (this.canActivatePlugin(plugin) &amp;&amp;</span>
<a href="#l3.619"></a><span id="l3.619" class="difflineplus">+                      (plugin.pluginFallbackType ==</span>
<a href="#l3.620"></a><span id="l3.620" class="difflineplus">+                       Components.interfaces.nsIObjectLoadingContent.PLUGIN_VULNERABLE_UPDATABLE ||</span>
<a href="#l3.621"></a><span id="l3.621" class="difflineplus">+                       plugin.pluginFallbackType ==</span>
<a href="#l3.622"></a><span id="l3.622" class="difflineplus">+                       Components.interfaces.nsIObjectLoadingContent.PLUGIN_VULNERABLE_NO_UPDATE));</span>
<a href="#l3.623"></a><span id="l3.623" class="difflineplus">+            }, this);</span>
<a href="#l3.624"></a><span id="l3.624" class="difflineplus">+            var messageString = this._stringBundle.GetStringFromName(haveVulnerablePlugin ?</span>
<a href="#l3.625"></a><span id="l3.625" class="difflineplus">+                                                                     &quot;vulnerablePluginsMessage&quot; :</span>
<a href="#l3.626"></a><span id="l3.626" class="difflineplus">+                                                                     &quot;activatepluginsMessage.title&quot;);</span>
<a href="#l3.627"></a><span id="l3.627">             var secondaryActions = [{</span>
<a href="#l3.628"></a><span id="l3.628">               label: this._stringBundle.GetStringFromName(&quot;activatepluginsMessage.always.label&quot;),</span>
<a href="#l3.629"></a><span id="l3.629">               accessKey: this._stringBundle.GetStringFromName(&quot;activatepluginsMessage.always.accesskey&quot;),</span>
<a href="#l3.630"></a><span id="l3.630">               callback: (function () {</span>
<a href="#l3.631"></a><span id="l3.631">                 this.setPermissionForPlugins(nsIPermissionManager.ALLOW_ACTION);</span>
<a href="#l3.632"></a><span id="l3.632">                 this.activatePlugins();</span>
<a href="#l3.633"></a><span id="l3.633">               }).bind(this)</span>
<a href="#l3.634"></a><span id="l3.634">             }, {</span>
<a href="#l3.635"></a><span id="l3.635" class="difflineat">@@ -2525,17 +2662,18 @@</span>
<a href="#l3.636"></a><span id="l3.636">                 var notification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;,</span>
<a href="#l3.637"></a><span id="l3.637">                                                                       this.activeBrowser);</span>
<a href="#l3.638"></a><span id="l3.638">                 if (notification)</span>
<a href="#l3.639"></a><span id="l3.639">                   notification.remove();</span>
<a href="#l3.640"></a><span id="l3.640">                 this.removeClickToPlayOverlays();</span>
<a href="#l3.641"></a><span id="l3.641">               }).bind(this)</span>
<a href="#l3.642"></a><span id="l3.642">             }];</span>
<a href="#l3.643"></a><span id="l3.643">             var options = {</span>
<a href="#l3.644"></a><span id="l3.644" class="difflineminus">-              dismissed: true</span>
<a href="#l3.645"></a><span id="l3.645" class="difflineplus">+              dismissed: true,</span>
<a href="#l3.646"></a><span id="l3.646" class="difflineplus">+              centerActions: centerActions</span>
<a href="#l3.647"></a><span id="l3.647">             };</span>
<a href="#l3.648"></a><span id="l3.648">             PopupNotifications.show(this.activeBrowser, &quot;click-to-play-plugins&quot;,</span>
<a href="#l3.649"></a><span id="l3.649">                                     messageString, &quot;plugins-notification-icon&quot;,</span>
<a href="#l3.650"></a><span id="l3.650">                                     mainAction, secondaryActions, options);</span>
<a href="#l3.651"></a><span id="l3.651">            ]]&gt;</span>
<a href="#l3.652"></a><span id="l3.652">         &lt;/body&gt;</span>
<a href="#l3.653"></a><span id="l3.653">       &lt;/method&gt;</span>
<a href="#l3.654"></a><span id="l3.654"> </span>
<a href="#l3.655"></a><span id="l3.655" class="difflineat">@@ -3303,9 +3441,126 @@</span>
<a href="#l3.656"></a><span id="l3.656">         &lt;body&gt;</span>
<a href="#l3.657"></a><span id="l3.657">           &lt;![CDATA[</span>
<a href="#l3.658"></a><span id="l3.658">             this.updateProgress();</span>
<a href="#l3.659"></a><span id="l3.659">           ]]&gt;</span>
<a href="#l3.660"></a><span id="l3.660">         &lt;/body&gt;</span>
<a href="#l3.661"></a><span id="l3.661">       &lt;/method&gt;</span>
<a href="#l3.662"></a><span id="l3.662">     &lt;/implementation&gt;</span>
<a href="#l3.663"></a><span id="l3.663">   &lt;/binding&gt;</span>
<a href="#l3.664"></a><span id="l3.664" class="difflineplus">+</span>
<a href="#l3.665"></a><span id="l3.665" class="difflineplus">+  &lt;binding id=&quot;center-item&quot;&gt;</span>
<a href="#l3.666"></a><span id="l3.666" class="difflineplus">+    &lt;content&gt;</span>
<a href="#l3.667"></a><span id="l3.667" class="difflineplus">+      &lt;xul:vbox flex=&quot;1&quot; class=&quot;center-item-box&quot;</span>
<a href="#l3.668"></a><span id="l3.668" class="difflineplus">+                xbl:inherits=&quot;warn,showseparator,padbottom&quot;&gt;</span>
<a href="#l3.669"></a><span id="l3.669" class="difflineplus">+        &lt;xul:hbox align=&quot;center&quot;&gt;</span>
<a href="#l3.670"></a><span id="l3.670" class="difflineplus">+          &lt;xul:image class=&quot;center-item-icon&quot;</span>
<a href="#l3.671"></a><span id="l3.671" class="difflineplus">+                     xbl:inherits=&quot;src=itemicon&quot;/&gt;</span>
<a href="#l3.672"></a><span id="l3.672" class="difflineplus">+          &lt;xul:description class=&quot;center-item-label&quot;</span>
<a href="#l3.673"></a><span id="l3.673" class="difflineplus">+                           xbl:inherits=&quot;xbl:text=itemtext&quot;/&gt;</span>
<a href="#l3.674"></a><span id="l3.674" class="difflineplus">+          &lt;xul:spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l3.675"></a><span id="l3.675" class="difflineplus">+          &lt;xul:button class=&quot;popup-notification-menubutton center-item-button&quot;</span>
<a href="#l3.676"></a><span id="l3.676" class="difflineplus">+                      oncommand=&quot;document.getBindingParent(this).runCallback();&quot;</span>
<a href="#l3.677"></a><span id="l3.677" class="difflineplus">+                      xbl:inherits=&quot;label=buttonlabel&quot;/&gt;</span>
<a href="#l3.678"></a><span id="l3.678" class="difflineplus">+        &lt;/xul:hbox&gt;</span>
<a href="#l3.679"></a><span id="l3.679" class="difflineplus">+        &lt;xul:hbox align=&quot;center&quot; class=&quot;center-item-warning&quot;&gt;</span>
<a href="#l3.680"></a><span id="l3.680" class="difflineplus">+          &lt;xul:image class=&quot;center-item-warning-icon&quot;/&gt;</span>
<a href="#l3.681"></a><span id="l3.681" class="difflineplus">+          &lt;xul:label class=&quot;center-item-warning-description&quot; xbl:inherits=&quot;xbl:text=warningText&quot;/&gt;</span>
<a href="#l3.682"></a><span id="l3.682" class="difflineplus">+          &lt;xul:label xbl:inherits=&quot;href=updateLink&quot; value=&quot;&amp;checkForUpdates;&quot; class=&quot;text-link&quot;/&gt;</span>
<a href="#l3.683"></a><span id="l3.683" class="difflineplus">+        &lt;/xul:hbox&gt;</span>
<a href="#l3.684"></a><span id="l3.684" class="difflineplus">+      &lt;/xul:vbox&gt;</span>
<a href="#l3.685"></a><span id="l3.685" class="difflineplus">+    &lt;/content&gt;</span>
<a href="#l3.686"></a><span id="l3.686" class="difflineplus">+    &lt;resources&gt;</span>
<a href="#l3.687"></a><span id="l3.687" class="difflineplus">+      &lt;stylesheet src=&quot;chrome://global/skin/notification.css&quot;/&gt;</span>
<a href="#l3.688"></a><span id="l3.688" class="difflineplus">+    &lt;/resources&gt;</span>
<a href="#l3.689"></a><span id="l3.689" class="difflineplus">+    &lt;implementation&gt;</span>
<a href="#l3.690"></a><span id="l3.690" class="difflineplus">+      &lt;field name=&quot;action&quot;&gt;&lt;/field&gt;</span>
<a href="#l3.691"></a><span id="l3.691" class="difflineplus">+      &lt;method name=&quot;runCallback&quot;&gt;</span>
<a href="#l3.692"></a><span id="l3.692" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l3.693"></a><span id="l3.693" class="difflineplus">+          let action = this.action;</span>
<a href="#l3.694"></a><span id="l3.694" class="difflineplus">+          action.callback();</span>
<a href="#l3.695"></a><span id="l3.695" class="difflineplus">+          let cas = action.popupnotification.notification.options.centerActions;</span>
<a href="#l3.696"></a><span id="l3.696" class="difflineplus">+          cas.splice(cas.indexOf(action), 1);</span>
<a href="#l3.697"></a><span id="l3.697" class="difflineplus">+          PopupNotifications._dismiss();</span>
<a href="#l3.698"></a><span id="l3.698" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l3.699"></a><span id="l3.699" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l3.700"></a><span id="l3.700" class="difflineplus">+    &lt;/implementation&gt;</span>
<a href="#l3.701"></a><span id="l3.701" class="difflineplus">+  &lt;/binding&gt;</span>
<a href="#l3.702"></a><span id="l3.702" class="difflineplus">+</span>
<a href="#l3.703"></a><span id="l3.703" class="difflineplus">+  &lt;binding id=&quot;click-to-play-plugins-notification&quot; extends=&quot;chrome://global/content/bindings/notification.xml#popup-notification&quot;&gt;</span>
<a href="#l3.704"></a><span id="l3.704" class="difflineplus">+    &lt;content class=&quot;click-to-play-plugins-notification-content&quot;&gt;</span>
<a href="#l3.705"></a><span id="l3.705" class="difflineplus">+      &lt;xul:hbox flex=&quot;1&quot;&gt;</span>
<a href="#l3.706"></a><span id="l3.706" class="difflineplus">+        &lt;xul:vbox class=&quot;click-to-play-plugins-notification-icon-box&quot;&gt;</span>
<a href="#l3.707"></a><span id="l3.707" class="difflineplus">+          &lt;xul:image class=&quot;popup-notification-icon&quot;</span>
<a href="#l3.708"></a><span id="l3.708" class="difflineplus">+                     xbl:inherits=&quot;popupid,src=icon&quot;/&gt;</span>
<a href="#l3.709"></a><span id="l3.709" class="difflineplus">+        &lt;/xul:vbox&gt;</span>
<a href="#l3.710"></a><span id="l3.710" class="difflineplus">+        &lt;xul:spacer class=&quot;click-to-play-plugins-notification-separator&quot;/&gt;</span>
<a href="#l3.711"></a><span id="l3.711" class="difflineplus">+        &lt;xul:vbox flex=&quot;1&quot; class=&quot;popup-notification-main-box&quot;</span>
<a href="#l3.712"></a><span id="l3.712" class="difflineplus">+                  xbl:inherits=&quot;popupid&quot;&gt;</span>
<a href="#l3.713"></a><span id="l3.713" class="difflineplus">+          &lt;xul:box class=&quot;click-to-play-plugins-notification-description-box&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l3.714"></a><span id="l3.714" class="difflineplus">+            &lt;xul:description xbl:inherits=&quot;xbl:text=label&quot;/&gt;</span>
<a href="#l3.715"></a><span id="l3.715" class="difflineplus">+          &lt;/xul:box&gt;</span>
<a href="#l3.716"></a><span id="l3.716" class="difflineplus">+          &lt;xul:spacer class=&quot;click-to-play-plugins-notification-separator&quot;/&gt;</span>
<a href="#l3.717"></a><span id="l3.717" class="difflineplus">+          &lt;xul:vbox class=&quot;click-to-play-plugins-notification-center-box&quot;&gt;</span>
<a href="#l3.718"></a><span id="l3.718" class="difflineplus">+            &lt;children includes=&quot;popupnotification-centeritem&quot;/&gt;</span>
<a href="#l3.719"></a><span id="l3.719" class="difflineplus">+          &lt;/xul:vbox&gt;</span>
<a href="#l3.720"></a><span id="l3.720" class="difflineplus">+          &lt;xul:spacer class=&quot;click-to-play-plugins-notification-separator&quot;/&gt;</span>
<a href="#l3.721"></a><span id="l3.721" class="difflineplus">+          &lt;xul:hbox class=&quot;click-to-play-plugins-notification-button-container&quot;</span>
<a href="#l3.722"></a><span id="l3.722" class="difflineplus">+                    pack=&quot;end&quot; align=&quot;center&quot;&gt;</span>
<a href="#l3.723"></a><span id="l3.723" class="difflineplus">+            &lt;xul:button anonid=&quot;button&quot;</span>
<a href="#l3.724"></a><span id="l3.724" class="difflineplus">+                        class=&quot;popup-notification-menubutton&quot;</span>
<a href="#l3.725"></a><span id="l3.725" class="difflineplus">+                        type=&quot;menu-button&quot;</span>
<a href="#l3.726"></a><span id="l3.726" class="difflineplus">+                        xbl:inherits=&quot;oncommand=buttoncommand,label=buttonlabel,accesskey=buttonaccesskey&quot;&gt;</span>
<a href="#l3.727"></a><span id="l3.727" class="difflineplus">+              &lt;xul:menupopup anonid=&quot;menupopup&quot;</span>
<a href="#l3.728"></a><span id="l3.728" class="difflineplus">+                             xbl:inherits=&quot;oncommand=menucommand&quot;&gt;</span>
<a href="#l3.729"></a><span id="l3.729" class="difflineplus">+                &lt;children/&gt;</span>
<a href="#l3.730"></a><span id="l3.730" class="difflineplus">+                &lt;xul:menuitem class=&quot;menuitem-iconic popup-notification-closeitem&quot;</span>
<a href="#l3.731"></a><span id="l3.731" class="difflineplus">+                              label=&quot;&amp;closeNotificationItem.label;&quot;</span>
<a href="#l3.732"></a><span id="l3.732" class="difflineplus">+                              xbl:inherits=&quot;oncommand=closeitemcommand&quot;/&gt;</span>
<a href="#l3.733"></a><span id="l3.733" class="difflineplus">+              &lt;/xul:menupopup&gt;</span>
<a href="#l3.734"></a><span id="l3.734" class="difflineplus">+            &lt;/xul:button&gt;</span>
<a href="#l3.735"></a><span id="l3.735" class="difflineplus">+          &lt;/xul:hbox&gt;</span>
<a href="#l3.736"></a><span id="l3.736" class="difflineplus">+        &lt;/xul:vbox&gt;</span>
<a href="#l3.737"></a><span id="l3.737" class="difflineplus">+      &lt;/xul:hbox&gt;</span>
<a href="#l3.738"></a><span id="l3.738" class="difflineplus">+    &lt;/content&gt;</span>
<a href="#l3.739"></a><span id="l3.739" class="difflineplus">+    &lt;resources&gt;</span>
<a href="#l3.740"></a><span id="l3.740" class="difflineplus">+      &lt;stylesheet src=&quot;chrome://global/skin/notification.css&quot;/&gt;</span>
<a href="#l3.741"></a><span id="l3.741" class="difflineplus">+    &lt;/resources&gt;</span>
<a href="#l3.742"></a><span id="l3.742" class="difflineplus">+    &lt;implementation&gt;</span>
<a href="#l3.743"></a><span id="l3.743" class="difflineplus">+      &lt;field name=&quot;button&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l3.744"></a><span id="l3.744" class="difflineplus">+        document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;button&quot;);</span>
<a href="#l3.745"></a><span id="l3.745" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l3.746"></a><span id="l3.746" class="difflineplus">+      &lt;field name=&quot;menupopup&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l3.747"></a><span id="l3.747" class="difflineplus">+        document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;menupopup&quot;);</span>
<a href="#l3.748"></a><span id="l3.748" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l3.749"></a><span id="l3.749" class="difflineplus">+      &lt;constructor&gt;&lt;![CDATA[</span>
<a href="#l3.750"></a><span id="l3.750" class="difflineplus">+        const XUL_NS = &quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;;</span>
<a href="#l3.751"></a><span id="l3.751" class="difflineplus">+        let popupnotification = this;</span>
<a href="#l3.752"></a><span id="l3.752" class="difflineplus">+        let item = null;</span>
<a href="#l3.753"></a><span id="l3.753" class="difflineplus">+        let prev = null;</span>
<a href="#l3.754"></a><span id="l3.754" class="difflineplus">+        this.notification.options.centerActions.forEach(function(action) {</span>
<a href="#l3.755"></a><span id="l3.755" class="difflineplus">+          action.popupnotification = popupnotification;</span>
<a href="#l3.756"></a><span id="l3.756" class="difflineplus">+          item = document.createElementNS(XUL_NS, &quot;popupnotification-centeritem&quot;);</span>
<a href="#l3.757"></a><span id="l3.757" class="difflineplus">+          item.action = action;</span>
<a href="#l3.758"></a><span id="l3.758" class="difflineplus">+          item.setAttribute(&quot;itemtext&quot;, action.message);</span>
<a href="#l3.759"></a><span id="l3.759" class="difflineplus">+          item.setAttribute(&quot;buttonlabel&quot;, action.label);</span>
<a href="#l3.760"></a><span id="l3.760" class="difflineplus">+          item.setAttribute(&quot;warn&quot;, action.warn);</span>
<a href="#l3.761"></a><span id="l3.761" class="difflineplus">+          item.setAttribute(&quot;warningText&quot;, action.warningText);</span>
<a href="#l3.762"></a><span id="l3.762" class="difflineplus">+          item.setAttribute(&quot;updateLink&quot;, action.updateLink);</span>
<a href="#l3.763"></a><span id="l3.763" class="difflineplus">+          if (prev &amp;&amp;</span>
<a href="#l3.764"></a><span id="l3.764" class="difflineplus">+              (prev.getAttribute(&quot;warn&quot;) == &quot;true&quot; ||</span>
<a href="#l3.765"></a><span id="l3.765" class="difflineplus">+               item.getAttribute(&quot;warn&quot;) == &quot;true&quot;)) {</span>
<a href="#l3.766"></a><span id="l3.766" class="difflineplus">+            item.setAttribute(&quot;showseparator&quot;, true);</span>
<a href="#l3.767"></a><span id="l3.767" class="difflineplus">+            if (prev.getAttribute(&quot;warn&quot;) != &quot;true&quot;) {</span>
<a href="#l3.768"></a><span id="l3.768" class="difflineplus">+              prev.setAttribute(&quot;padbottom&quot;, true);</span>
<a href="#l3.769"></a><span id="l3.769" class="difflineplus">+            }</span>
<a href="#l3.770"></a><span id="l3.770" class="difflineplus">+          }</span>
<a href="#l3.771"></a><span id="l3.771" class="difflineplus">+          popupnotification.appendChild(item);</span>
<a href="#l3.772"></a><span id="l3.772" class="difflineplus">+          prev = item;</span>
<a href="#l3.773"></a><span id="l3.773" class="difflineplus">+        });</span>
<a href="#l3.774"></a><span id="l3.774" class="difflineplus">+        if (item) {</span>
<a href="#l3.775"></a><span id="l3.775" class="difflineplus">+          item.setAttribute(&quot;padbottom&quot;, &quot;true&quot;);</span>
<a href="#l3.776"></a><span id="l3.776" class="difflineplus">+        }</span>
<a href="#l3.777"></a><span id="l3.777" class="difflineplus">+      ]]&gt;&lt;/constructor&gt;</span>
<a href="#l3.778"></a><span id="l3.778" class="difflineplus">+    &lt;/implementation&gt;</span>
<a href="#l3.779"></a><span id="l3.779" class="difflineplus">+  &lt;/binding&gt;</span>
<a href="#l3.780"></a><span id="l3.780" class="difflineplus">+</span>
<a href="#l3.781"></a><span id="l3.781"> &lt;/bindings&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/suite/themes/classic/jar.mn</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/suite/themes/classic/jar.mn</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -418,16 +418,17 @@ classic.jar:</span>
<a href="#l4.4"></a><span id="l4.4">   skin/classic/navigator/icons/identity.png                             (mac/navigator/icons/identity.png)</span>
<a href="#l4.5"></a><span id="l4.5">   skin/classic/navigator/icons/navigatoricons.png                       (mac/navigator/icons/navigatoricons.png)</span>
<a href="#l4.6"></a><span id="l4.6">   skin/classic/navigator/icons/navigatoricons-small.png                 (mac/navigator/icons/navigatoricons-small.png)</span>
<a href="#l4.7"></a><span id="l4.7">   skin/classic/navigator/icons/panel-expander-closed.png                (mac/navigator/icons/panel-expander-closed.png)</span>
<a href="#l4.8"></a><span id="l4.8">   skin/classic/navigator/icons/panel-expander-open.png                  (mac/navigator/icons/panel-expander-open.png)</span>
<a href="#l4.9"></a><span id="l4.9">   skin/classic/navigator/icons/panel-plus-sign.png                      (mac/navigator/icons/panel-plus-sign.png)</span>
<a href="#l4.10"></a><span id="l4.10">   skin/classic/navigator/icons/restore.png                              (mac/navigator/icons/restore.png)</span>
<a href="#l4.11"></a><span id="l4.11"> #else</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+  skin/classic/navigator/click-to-play-warning-stripes.png              (navigator/click-to-play-warning-stripes.png)</span>
<a href="#l4.13"></a><span id="l4.13">   skin/classic/navigator/navigator.css                                  (navigator/navigator.css)</span>
<a href="#l4.14"></a><span id="l4.14">   skin/classic/navigator/linkToolbar.css                                (navigator/linkToolbar.css)</span>
<a href="#l4.15"></a><span id="l4.15">   skin/classic/navigator/pageInfo.css                                   (navigator/pageInfo.css)</span>
<a href="#l4.16"></a><span id="l4.16">   skin/classic/navigator/tabbrowser.css                                 (navigator/tabbrowser.css)</span>
<a href="#l4.17"></a><span id="l4.17">   skin/classic/navigator/btn1/first-disabled.gif                        (navigator/btn1/first-disabled.gif)</span>
<a href="#l4.18"></a><span id="l4.18">   skin/classic/navigator/btn1/first-hover.gif                           (navigator/btn1/first-hover.gif)</span>
<a href="#l4.19"></a><span id="l4.19">   skin/classic/navigator/btn1/last-disabled.gif                         (navigator/btn1/last-disabled.gif)</span>
<a href="#l4.20"></a><span id="l4.20">   skin/classic/navigator/btn1/last-hover.gif                            (navigator/btn1/last-hover.gif)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1">new file mode 100644</span>
<a href="#l5.2"></a><span id="l5.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..29f15f7b8c20a39a79454fc8b81852daa36548a2</span>
<a href="#l5.3"></a><span id="l5.3">GIT binary patch
literal 1563
zc$@(n2ITpPP)&lt;h;3K|Lk000e1NJLTq0024w001lq1^@s6G&amp;HNO00001b5ch_0Itp)
z=&gt;Px#24YJ`L;(K){{a7&gt;y{D4^000SaNLh0L01FcU01FcV0GgZ_00007bV*G`2iyn(
z5efmLUF78e00o;#L_t(&amp;-nE&amp;%k}E|Fg^$!dfA{i}5s?uPkdW{OyalgKL`DP;z-6Y#
zZXJT|vBzF}J?br7wY6L2S|5L{mUN_%7-Yys#laT|h9DR_UA`&lt;C-q%-Cz`WXMMsfTb
zV^DTc(!ULwL#I(akVR1N%a30#Mz&lt;b5j{(bSlllIcF(`lg^}ECd&amp;7s$D%Iri{rel#L
zqY8fh;hW|6KmWm;vKum;Y{~@W`1N53%G24&gt;*ejOR+&gt;qxpdjoI~lvEM?^!+!&gt;AAkEH
zKaBzF*(URR&amp;mH761h?kUX*g&amp;0+a-ts@P!^URLH;lkke2gnL#-iN`i&lt;{xt=Udy&amp;rNc
z*R=&lt;)ni5n-5ZC*(!={iy1&gt;b(|)0g&gt;-dG$k{vyGQXK08vmzDFTrP_8FiTOwH@JMdO7
zLUuxO1t!QKg0DXJ&gt;7V(G#SN)AXB#g$x%=$rupfs!XLbZ2cY1mww9k(UximoroHIt-
zLmtS&lt;4RY-DV~`KtkMgijDn1RGmgR)mS?Q)BAR9+BgUIpv8iFEKNN;r=dkxvxk$kEd
z?=vR^!KV%&gt;orpQLLXr+hgrG=kPU8@;xFZ&gt;~K;m7^xV=e|s)8Y6O=oE;JZ2nT3EubS
z3RxoA2noE_)IDSjSkLB%9Qy+4F+6+7sSob!I$a@;-5M2yP$5Za&gt;XQJ6?D(EiT1bUd
zcO4k}phk8cOBh2Cs9&gt;eFU01S1Qjd=XP*E&amp;vZfYUZaE;_n^G&amp;fOYm3&lt;;+C|MmG*wrU
zeP*&gt;X0`BDa;0Hn?1m&amp;{k(&gt;N#=f3Z_DM!r3}eTyu5a-(U2hSxMGNa&lt;;Idu;E_b`XK8
za8CKu7D*K|bdDmhY34cQEdM)XJ&gt;sC?ob1$gutALI;7H1&lt;ndfBrsAqWtX-CZt04e#)
zIpvQ*Ism~9GUrFe??6tXH{jT6pdP*|@sUW9&gt;&lt;A%Tny@|O=8TT?EC49(&lt;8TWBM8G-O
zxfK#XB&lt;1jZt(tEj4@Gnu6o7QzFG_;Tn%f|I6^cahYud8r{LJgVFav0SB$xGLk!)xO
zPa$u|w7v5f0&gt;(iBva8+EQ`EVvcCLry&gt;dRxV@@UX_wT&gt;WZbIN&amp;qM&gt;9O~tx^W@V)(^Z
z@0MiQ+b3&amp;!2p~bg!)&gt;c3pDnA|^kTfz`=TRdi4;YAkp#dwS)QCj^H?EC1_9{k%&gt;-d{
z$~Fz*rL&amp;W}d&lt;4LHbq*gZ31CS%k9}}$BgR1?MJK#&lt;rw3AGgFJAsQYUmsS=vO1(9vHB
z0`r=)cQY^zg^hwJ1Rd)L)?#PVpof&lt;OT6-iY47?TrD{hP2dGhOCjoZ8AyyiR&amp;zIk%&amp;
zx7#C8AeTV0d@iy5zW#mDEY;O&amp;B#&amp;!G2q2J9ClJ|wi@*TcCX@X&amp;xBA7(sW$9gOC4Yk
zh~4DeCb180iL|lQMVnJ*%TN$YLE3GV&lt;N_p5Ek(JmHumbDVf(N_a;NqFwy+!l=QXos
zLpb$8V)=N_(-7i%b^N&lt;t00q)f2Poi@j4j)UYCzQWB(2n9sYSqhstQ1YYnUJjf=kLA
z`{0M{gRr(xmkXi51n{pxdj&amp;+)&gt;39GU&amp;MDVO=9WlSTfhU;%e5F0KwBgWq=%6LVopX+
z3%Q5fcTqi{xj9Pr-gO!R2)H0ib0y~0=xrg7A&gt;T3e7qbk4QVLMZ@~k{o6;BZ$AXwHd
zlK$%YY%iei&amp;gulE2&gt;bS~rMjxioTF&amp;XDRXRzWUm6@(+(1Mj^nnYqdY`yTWCWbe(nnw
z(P{=RKAq&amp;VdKd3ceKTPN(qrrNc9kry`A%9PZ)VW&lt;9x~mV0fB(xdy+N|m*K;|{U`&gt;c
zUf1k8SP?09;(%=2=cG3mFOe(`Qrv_)O;1HHHnPr=2W7RjKVAlPzzvD|n6Kqvr#_$#
zJTB4L3|T6xYmnThrMIeHTb9E@?jza)d9kZR10&gt;i2dGQjUFGXsa{0E@+4MWpu(?b9N
N002ovPDHLkV1i?V(r^F(</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/suite/themes/classic/navigator/navigator.css</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/suite/themes/classic/navigator/navigator.css</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -303,16 +303,17 @@ toolbar[mode=&quot;text&quot;] &gt; #window-controls </span>
<a href="#l6.4"></a><span id="l6.4"> </span>
<a href="#l6.5"></a><span id="l6.5"> .popup-notification-icon[popupid=&quot;password-change&quot;],</span>
<a href="#l6.6"></a><span id="l6.6"> .popup-notification-icon[popupid=&quot;password-save&quot;] {</span>
<a href="#l6.7"></a><span id="l6.7">   list-style-image: url(&quot;chrome://mozapps/skin/passwordmgr/key-64.png&quot;);</span>
<a href="#l6.8"></a><span id="l6.8"> }</span>
<a href="#l6.9"></a><span id="l6.9"> </span>
<a href="#l6.10"></a><span id="l6.10"> .popup-notification-icon[popupid=&quot;click-to-play-plugins&quot;] {</span>
<a href="#l6.11"></a><span id="l6.11">   list-style-image: url(&quot;chrome://mozapps/skin/plugins/pluginGeneric.png&quot;);</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+  margin: 0px;</span>
<a href="#l6.13"></a><span id="l6.13">   width: 32px;</span>
<a href="#l6.14"></a><span id="l6.14">   height: 32px;</span>
<a href="#l6.15"></a><span id="l6.15"> }</span>
<a href="#l6.16"></a><span id="l6.16"> </span>
<a href="#l6.17"></a><span id="l6.17"> .addon-progress-description {</span>
<a href="#l6.18"></a><span id="l6.18">   width: 350px;</span>
<a href="#l6.19"></a><span id="l6.19">   max-width: 350px;</span>
<a href="#l6.20"></a><span id="l6.20"> }</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineat">@@ -363,16 +364,119 @@ toolbar[mode=&quot;text&quot;] &gt; #window-controls </span>
<a href="#l6.22"></a><span id="l6.22"> }</span>
<a href="#l6.23"></a><span id="l6.23"> </span>
<a href="#l6.24"></a><span id="l6.24"> #plugins-notification-icon {</span>
<a href="#l6.25"></a><span id="l6.25">   list-style-image: url(&quot;chrome://mozapps/skin/plugins/pluginGeneric-16.png&quot;);</span>
<a href="#l6.26"></a><span id="l6.26">   width: 16px;</span>
<a href="#l6.27"></a><span id="l6.27">   height: 16px;</span>
<a href="#l6.28"></a><span id="l6.28"> }</span>
<a href="#l6.29"></a><span id="l6.29"> </span>
<a href="#l6.30"></a><span id="l6.30" class="difflineplus">+.click-to-play-plugins-notification-content {</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineplus">+  margin: -10px;</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+  border-radius: 4px;</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineplus">+}</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineplus">+</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineplus">+.click-to-play-plugins-notification-icon-box {</span>
<a href="#l6.36"></a><span id="l6.36" class="difflineplus">+  background-color: rgba(255, 255, 255, .4);</span>
<a href="#l6.37"></a><span id="l6.37" class="difflineplus">+  -moz-border-end: 1px solid rgba(255, 255, 255, .2);</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineplus">+  padding: 24px;</span>
<a href="#l6.39"></a><span id="l6.39" class="difflineplus">+}</span>
<a href="#l6.40"></a><span id="l6.40" class="difflineplus">+</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineplus">+.click-to-play-plugins-notification-icon-box:-moz-locale-dir(ltr) {</span>
<a href="#l6.42"></a><span id="l6.42" class="difflineplus">+  border-bottom-left-radius: 4px;</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineplus">+  border-top-left-radius: 4px;</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineplus">+}</span>
<a href="#l6.45"></a><span id="l6.45" class="difflineplus">+</span>
<a href="#l6.46"></a><span id="l6.46" class="difflineplus">+.click-to-play-plugins-notification-icon-box:-moz-locale-dir(rtl) {</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineplus">+  border-bottom-right-radius: 4px;</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineplus">+  border-top-right-radius: 4px;</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineplus">+}</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineplus">+</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineplus">+.click-to-play-plugins-notification-separator {</span>
<a href="#l6.52"></a><span id="l6.52" class="difflineplus">+  -moz-border-start: 1px solid rgba(3, 14, 27, .1);</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineplus">+  border-top: 1px solid rgba(3, 14, 27, .1);</span>
<a href="#l6.54"></a><span id="l6.54" class="difflineplus">+}</span>
<a href="#l6.55"></a><span id="l6.55" class="difflineplus">+</span>
<a href="#l6.56"></a><span id="l6.56" class="difflineplus">+.click-to-play-plugins-notification-description-box {</span>
<a href="#l6.57"></a><span id="l6.57" class="difflineplus">+  border-bottom: 1px solid rgba(255, 255, 255, .2);</span>
<a href="#l6.58"></a><span id="l6.58" class="difflineplus">+  -moz-border-start: 1px solid rgba(255, 255, 255, .2);</span>
<a href="#l6.59"></a><span id="l6.59" class="difflineplus">+  padding-top: 12px;</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineplus">+  -moz-padding-end: 11px;</span>
<a href="#l6.61"></a><span id="l6.61" class="difflineplus">+   padding-bottom: 9px;</span>
<a href="#l6.62"></a><span id="l6.62" class="difflineplus">+  -moz-padding-start: 10px;</span>
<a href="#l6.63"></a><span id="l6.63" class="difflineplus">+}</span>
<a href="#l6.64"></a><span id="l6.64" class="difflineplus">+</span>
<a href="#l6.65"></a><span id="l6.65" class="difflineplus">+.click-to-play-plugins-notification-center-box {</span>
<a href="#l6.66"></a><span id="l6.66" class="difflineplus">+  border-top: 1px solid rgba(255, 255, 255, .2);</span>
<a href="#l6.67"></a><span id="l6.67" class="difflineplus">+  border-bottom: 1px solid rgba(255, 255, 255, .2);</span>
<a href="#l6.68"></a><span id="l6.68" class="difflineplus">+  -moz-border-start: 1px solid rgba(255, 255, 255, .2);</span>
<a href="#l6.69"></a><span id="l6.69" class="difflineplus">+  background-color: rgba(3, 14, 27, .05);</span>
<a href="#l6.70"></a><span id="l6.70" class="difflineplus">+}</span>
<a href="#l6.71"></a><span id="l6.71" class="difflineplus">+</span>
<a href="#l6.72"></a><span id="l6.72" class="difflineplus">+.click-to-play-plugins-notification-button-container {</span>
<a href="#l6.73"></a><span id="l6.73" class="difflineplus">+  border-top: 1px solid rgba(255, 255, 255, .2);</span>
<a href="#l6.74"></a><span id="l6.74" class="difflineplus">+  -moz-border-start: 1px solid rgba(255, 255, 255, .2);</span>
<a href="#l6.75"></a><span id="l6.75" class="difflineplus">+  margin: 0px;</span>
<a href="#l6.76"></a><span id="l6.76" class="difflineplus">+  padding: 16px;</span>
<a href="#l6.77"></a><span id="l6.77" class="difflineplus">+}</span>
<a href="#l6.78"></a><span id="l6.78" class="difflineplus">+</span>
<a href="#l6.79"></a><span id="l6.79" class="difflineplus">+.center-item-box {</span>
<a href="#l6.80"></a><span id="l6.80" class="difflineplus">+  padding: 12px 16px 0px 16px;</span>
<a href="#l6.81"></a><span id="l6.81" class="difflineplus">+}</span>
<a href="#l6.82"></a><span id="l6.82" class="difflineplus">+</span>
<a href="#l6.83"></a><span id="l6.83" class="difflineplus">+.center-item-box[padbottom=&quot;true&quot;] {</span>
<a href="#l6.84"></a><span id="l6.84" class="difflineplus">+  padding-bottom: 12px;</span>
<a href="#l6.85"></a><span id="l6.85" class="difflineplus">+}</span>
<a href="#l6.86"></a><span id="l6.86" class="difflineplus">+</span>
<a href="#l6.87"></a><span id="l6.87" class="difflineplus">+.center-item-icon {</span>
<a href="#l6.88"></a><span id="l6.88" class="difflineplus">+  background-image: url(&quot;chrome://mozapps/skin/plugins/pluginGeneric-16.png&quot;);</span>
<a href="#l6.89"></a><span id="l6.89" class="difflineplus">+  background-repeat: no-repeat;</span>
<a href="#l6.90"></a><span id="l6.90" class="difflineplus">+  height: 16px;</span>
<a href="#l6.91"></a><span id="l6.91" class="difflineplus">+  width: 16px;</span>
<a href="#l6.92"></a><span id="l6.92" class="difflineplus">+  margin-bottom: 4px;</span>
<a href="#l6.93"></a><span id="l6.93" class="difflineplus">+}</span>
<a href="#l6.94"></a><span id="l6.94" class="difflineplus">+</span>
<a href="#l6.95"></a><span id="l6.95" class="difflineplus">+.center-item-box[warn=&quot;true&quot;] {</span>
<a href="#l6.96"></a><span id="l6.96" class="difflineplus">+  background-image: url(&quot;chrome://navigator/skin/click-to-play-warning-stripes.png&quot;);</span>
<a href="#l6.97"></a><span id="l6.97" class="difflineplus">+  background-repeat: repeat-x;</span>
<a href="#l6.98"></a><span id="l6.98" class="difflineplus">+  padding: 8px 16px 6px 16px;</span>
<a href="#l6.99"></a><span id="l6.99" class="difflineplus">+}</span>
<a href="#l6.100"></a><span id="l6.100" class="difflineplus">+</span>
<a href="#l6.101"></a><span id="l6.101" class="difflineplus">+.center-item-box[padbottom=&quot;true&quot;][warn=&quot;true&quot;] {</span>
<a href="#l6.102"></a><span id="l6.102" class="difflineplus">+  padding-bottom: 4px;</span>
<a href="#l6.103"></a><span id="l6.103" class="difflineplus">+}</span>
<a href="#l6.104"></a><span id="l6.104" class="difflineplus">+</span>
<a href="#l6.105"></a><span id="l6.105" class="difflineplus">+.center-item-box[showseparator=&quot;true&quot;] {</span>
<a href="#l6.106"></a><span id="l6.106" class="difflineplus">+  border-top: 1px solid rgba(3, 14, 27, .1);</span>
<a href="#l6.107"></a><span id="l6.107" class="difflineplus">+}</span>
<a href="#l6.108"></a><span id="l6.108" class="difflineplus">+</span>
<a href="#l6.109"></a><span id="l6.109" class="difflineplus">+.center-item-box[warn=&quot;false&quot;] &gt; .center-item-warning {</span>
<a href="#l6.110"></a><span id="l6.110" class="difflineplus">+  display: none;</span>
<a href="#l6.111"></a><span id="l6.111" class="difflineplus">+}</span>
<a href="#l6.112"></a><span id="l6.112" class="difflineplus">+</span>
<a href="#l6.113"></a><span id="l6.113" class="difflineplus">+.center-item-warning &gt; .text-link[href=&quot;&quot;] {</span>
<a href="#l6.114"></a><span id="l6.114" class="difflineplus">+  display: none;</span>
<a href="#l6.115"></a><span id="l6.115" class="difflineplus">+}</span>
<a href="#l6.116"></a><span id="l6.116" class="difflineplus">+</span>
<a href="#l6.117"></a><span id="l6.117" class="difflineplus">+.center-item-warning-icon {</span>
<a href="#l6.118"></a><span id="l6.118" class="difflineplus">+  background-image: url(&quot;chrome://mozapps/skin/extensions/alerticon-info-negative.png&quot;);</span>
<a href="#l6.119"></a><span id="l6.119" class="difflineplus">+  background-repeat: no-repeat;</span>
<a href="#l6.120"></a><span id="l6.120" class="difflineplus">+  width: 16px;</span>
<a href="#l6.121"></a><span id="l6.121" class="difflineplus">+  height: 15px;</span>
<a href="#l6.122"></a><span id="l6.122" class="difflineplus">+  margin-bottom: 4px;</span>
<a href="#l6.123"></a><span id="l6.123" class="difflineplus">+}</span>
<a href="#l6.124"></a><span id="l6.124" class="difflineplus">+</span>
<a href="#l6.125"></a><span id="l6.125" class="difflineplus">+.center-item-warning-description {</span>
<a href="#l6.126"></a><span id="l6.126" class="difflineplus">+  color: #828282;</span>
<a href="#l6.127"></a><span id="l6.127" class="difflineplus">+}</span>
<a href="#l6.128"></a><span id="l6.128" class="difflineplus">+</span>
<a href="#l6.129"></a><span id="l6.129" class="difflineplus">+.center-item-button {</span>
<a href="#l6.130"></a><span id="l6.130" class="difflineplus">+  min-width: 0px;</span>
<a href="#l6.131"></a><span id="l6.131" class="difflineplus">+}</span>
<a href="#l6.132"></a><span id="l6.132" class="difflineplus">+</span>
<a href="#l6.133"></a><span id="l6.133"> /* ::::: page proxy icon ::::: */</span>
<a href="#l6.134"></a><span id="l6.134"> </span>
<a href="#l6.135"></a><span id="l6.135"> #page-proxy-deck,</span>
<a href="#l6.136"></a><span id="l6.136"> #page-proxy-favicon,</span>
<a href="#l6.137"></a><span id="l6.137"> #page-proxy-button {</span>
<a href="#l6.138"></a><span id="l6.138">   width: 16px;</span>
<a href="#l6.139"></a><span id="l6.139">   height: 16px;</span>
<a href="#l6.140"></a><span id="l6.140"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/suite/themes/modern/jar.mn</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/suite/themes/modern/jar.mn</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -616,16 +616,17 @@ modern.jar:</span>
<a href="#l7.4"></a><span id="l7.4">   skin/modern/mozapps/plugins/pluginHelp-16.png                    (mozapps/plugins/pluginHelp-16.png)</span>
<a href="#l7.5"></a><span id="l7.5">   skin/modern/mozapps/plugins/pluginInstallerWizard.css            (mozapps/plugins/pluginInstallerWizard.css)</span>
<a href="#l7.6"></a><span id="l7.6">   skin/modern/mozapps/plugins/pluginProblem.css                    (mozapps/plugins/pluginProblem.css)</span>
<a href="#l7.7"></a><span id="l7.7">   skin/modern/mozapps/update/update.png                            (mozapps/update/update.png)</span>
<a href="#l7.8"></a><span id="l7.8">   skin/modern/mozapps/update/updates.css                           (mozapps/update/updates.css)</span>
<a href="#l7.9"></a><span id="l7.9">   skin/modern/mozapps/viewsource/viewsource.css                    (mozapps/viewsource/viewsource.css)</span>
<a href="#l7.10"></a><span id="l7.10">   skin/modern/mozapps/xpinstall/xpinstallConfirm.css               (mozapps/xpinstall/xpinstallConfirm.css)</span>
<a href="#l7.11"></a><span id="l7.11">   skin/modern/mozapps/xpinstall/xpinstallItemGeneric.png           (mozapps/extensions/extensionGeneric.png)</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+  skin/modern/navigator/click-to-play-warning-stripes.png          (navigator/click-to-play-warning-stripes.png)</span>
<a href="#l7.13"></a><span id="l7.13">   skin/modern/navigator/linkToolbar.css                            (navigator/linkToolbar.css)</span>
<a href="#l7.14"></a><span id="l7.14">   skin/modern/navigator/navigator.css                              (navigator/navigator.css)</span>
<a href="#l7.15"></a><span id="l7.15">   skin/modern/navigator/pageInfo.css                               (navigator/pageInfo.css)</span>
<a href="#l7.16"></a><span id="l7.16">   skin/modern/navigator/tabbrowser.css                             (navigator/tabbrowser.css)</span>
<a href="#l7.17"></a><span id="l7.17">   skin/modern/navigator/btn1/feeds.png                             (navigator/btn1/feeds.png)</span>
<a href="#l7.18"></a><span id="l7.18">   skin/modern/navigator/btn1/first-dis.gif                         (navigator/btn1/first-dis.gif)</span>
<a href="#l7.19"></a><span id="l7.19">   skin/modern/navigator/btn1/first-hov.gif                         (navigator/btn1/first-hov.gif)</span>
<a href="#l7.20"></a><span id="l7.20">   skin/modern/navigator/btn1/first.gif                             (navigator/btn1/first.gif)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">new file mode 100644</span>
<a href="#l8.2"></a><span id="l8.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..29f15f7b8c20a39a79454fc8b81852daa36548a2</span>
<a href="#l8.3"></a><span id="l8.3">GIT binary patch
literal 1563
zc$@(n2ITpPP)&lt;h;3K|Lk000e1NJLTq0024w001lq1^@s6G&amp;HNO00001b5ch_0Itp)
z=&gt;Px#24YJ`L;(K){{a7&gt;y{D4^000SaNLh0L01FcU01FcV0GgZ_00007bV*G`2iyn(
z5efmLUF78e00o;#L_t(&amp;-nE&amp;%k}E|Fg^$!dfA{i}5s?uPkdW{OyalgKL`DP;z-6Y#
zZXJT|vBzF}J?br7wY6L2S|5L{mUN_%7-Yys#laT|h9DR_UA`&lt;C-q%-Cz`WXMMsfTb
zV^DTc(!ULwL#I(akVR1N%a30#Mz&lt;b5j{(bSlllIcF(`lg^}ECd&amp;7s$D%Iri{rel#L
zqY8fh;hW|6KmWm;vKum;Y{~@W`1N53%G24&gt;*ejOR+&gt;qxpdjoI~lvEM?^!+!&gt;AAkEH
zKaBzF*(URR&amp;mH761h?kUX*g&amp;0+a-ts@P!^URLH;lkke2gnL#-iN`i&lt;{xt=Udy&amp;rNc
z*R=&lt;)ni5n-5ZC*(!={iy1&gt;b(|)0g&gt;-dG$k{vyGQXK08vmzDFTrP_8FiTOwH@JMdO7
zLUuxO1t!QKg0DXJ&gt;7V(G#SN)AXB#g$x%=$rupfs!XLbZ2cY1mww9k(UximoroHIt-
zLmtS&lt;4RY-DV~`KtkMgijDn1RGmgR)mS?Q)BAR9+BgUIpv8iFEKNN;r=dkxvxk$kEd
z?=vR^!KV%&gt;orpQLLXr+hgrG=kPU8@;xFZ&gt;~K;m7^xV=e|s)8Y6O=oE;JZ2nT3EubS
z3RxoA2noE_)IDSjSkLB%9Qy+4F+6+7sSob!I$a@;-5M2yP$5Za&gt;XQJ6?D(EiT1bUd
zcO4k}phk8cOBh2Cs9&gt;eFU01S1Qjd=XP*E&amp;vZfYUZaE;_n^G&amp;fOYm3&lt;;+C|MmG*wrU
zeP*&gt;X0`BDa;0Hn?1m&amp;{k(&gt;N#=f3Z_DM!r3}eTyu5a-(U2hSxMGNa&lt;;Idu;E_b`XK8
za8CKu7D*K|bdDmhY34cQEdM)XJ&gt;sC?ob1$gutALI;7H1&lt;ndfBrsAqWtX-CZt04e#)
zIpvQ*Ism~9GUrFe??6tXH{jT6pdP*|@sUW9&gt;&lt;A%Tny@|O=8TT?EC49(&lt;8TWBM8G-O
zxfK#XB&lt;1jZt(tEj4@Gnu6o7QzFG_;Tn%f|I6^cahYud8r{LJgVFav0SB$xGLk!)xO
zPa$u|w7v5f0&gt;(iBva8+EQ`EVvcCLry&gt;dRxV@@UX_wT&gt;WZbIN&amp;qM&gt;9O~tx^W@V)(^Z
z@0MiQ+b3&amp;!2p~bg!)&gt;c3pDnA|^kTfz`=TRdi4;YAkp#dwS)QCj^H?EC1_9{k%&gt;-d{
z$~Fz*rL&amp;W}d&lt;4LHbq*gZ31CS%k9}}$BgR1?MJK#&lt;rw3AGgFJAsQYUmsS=vO1(9vHB
z0`r=)cQY^zg^hwJ1Rd)L)?#PVpof&lt;OT6-iY47?TrD{hP2dGhOCjoZ8AyyiR&amp;zIk%&amp;
zx7#C8AeTV0d@iy5zW#mDEY;O&amp;B#&amp;!G2q2J9ClJ|wi@*TcCX@X&amp;xBA7(sW$9gOC4Yk
zh~4DeCb180iL|lQMVnJ*%TN$YLE3GV&lt;N_p5Ek(JmHumbDVf(N_a;NqFwy+!l=QXos
zLpb$8V)=N_(-7i%b^N&lt;t00q)f2Poi@j4j)UYCzQWB(2n9sYSqhstQ1YYnUJjf=kLA
z`{0M{gRr(xmkXi51n{pxdj&amp;+)&gt;39GU&amp;MDVO=9WlSTfhU;%e5F0KwBgWq=%6LVopX+
z3%Q5fcTqi{xj9Pr-gO!R2)H0ib0y~0=xrg7A&gt;T3e7qbk4QVLMZ@~k{o6;BZ$AXwHd
zlK$%YY%iei&amp;gulE2&gt;bS~rMjxioTF&amp;XDRXRzWUm6@(+(1Mj^nnYqdY`yTWCWbe(nnw
z(P{=RKAq&amp;VdKd3ceKTPN(qrrNc9kry`A%9PZ)VW&lt;9x~mV0fB(xdy+N|m*K;|{U`&gt;c
zUf1k8SP?09;(%=2=cG3mFOe(`Qrv_)O;1HHHnPr=2W7RjKVAlPzzvD|n6Kqvr#_$#
zJTB4L3|T6xYmnThrMIeHTb9E@?jza)d9kZR10&gt;i2dGQjUFGXsa{0E@+4MWpu(?b9N
N002ovPDHLkV1i?V(r^F(</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/suite/themes/modern/navigator/navigator.css</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/suite/themes/modern/navigator/navigator.css</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -511,16 +511,17 @@ toolbar[mode=&quot;icons&quot;] #search-button &gt; .</span>
<a href="#l9.4"></a><span id="l9.4"> </span>
<a href="#l9.5"></a><span id="l9.5"> .popup-notification-icon[popupid=&quot;password-change&quot;],</span>
<a href="#l9.6"></a><span id="l9.6"> .popup-notification-icon[popupid=&quot;password-save&quot;] {</span>
<a href="#l9.7"></a><span id="l9.7">   list-style-image: url(&quot;chrome://mozapps/skin/passwordmgr/key-64.png&quot;);</span>
<a href="#l9.8"></a><span id="l9.8"> }</span>
<a href="#l9.9"></a><span id="l9.9"> </span>
<a href="#l9.10"></a><span id="l9.10"> .popup-notification-icon[popupid=&quot;click-to-play-plugins&quot;] {</span>
<a href="#l9.11"></a><span id="l9.11">   list-style-image: url(&quot;chrome://mozapps/skin/plugins/pluginGeneric.png&quot;);</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+  margin: 0px;</span>
<a href="#l9.13"></a><span id="l9.13">   width: 32px;</span>
<a href="#l9.14"></a><span id="l9.14">   height: 32px;</span>
<a href="#l9.15"></a><span id="l9.15"> }</span>
<a href="#l9.16"></a><span id="l9.16"> </span>
<a href="#l9.17"></a><span id="l9.17"> .addon-progress-description {</span>
<a href="#l9.18"></a><span id="l9.18">   width: 350px;</span>
<a href="#l9.19"></a><span id="l9.19">   max-width: 350px;</span>
<a href="#l9.20"></a><span id="l9.20"> }</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineat">@@ -571,16 +572,96 @@ toolbar[mode=&quot;icons&quot;] #search-button &gt; .</span>
<a href="#l9.22"></a><span id="l9.22"> }</span>
<a href="#l9.23"></a><span id="l9.23"> </span>
<a href="#l9.24"></a><span id="l9.24"> #plugins-notification-icon {</span>
<a href="#l9.25"></a><span id="l9.25">   list-style-image: url(&quot;chrome://mozapps/skin/plugins/pluginGeneric-16.png&quot;);</span>
<a href="#l9.26"></a><span id="l9.26">   width: 16px;</span>
<a href="#l9.27"></a><span id="l9.27">   height: 16px;</span>
<a href="#l9.28"></a><span id="l9.28"> }</span>
<a href="#l9.29"></a><span id="l9.29"> </span>
<a href="#l9.30"></a><span id="l9.30" class="difflineplus">+.click-to-play-plugins-notification-icon-box {</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineplus">+  background-color: #DDE3EB;</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+  -moz-border-end: 1px solid #E6ECF5;</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineplus">+  padding: 24px;</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineplus">+}</span>
<a href="#l9.35"></a><span id="l9.35" class="difflineplus">+</span>
<a href="#l9.36"></a><span id="l9.36" class="difflineplus">+.click-to-play-plugins-notification-separator {</span>
<a href="#l9.37"></a><span id="l9.37" class="difflineplus">+  -moz-border-start: 1px solid #B3BCC6;</span>
<a href="#l9.38"></a><span id="l9.38" class="difflineplus">+  border-top: 1px solid #B3BCC6;</span>
<a href="#l9.39"></a><span id="l9.39" class="difflineplus">+}</span>
<a href="#l9.40"></a><span id="l9.40" class="difflineplus">+</span>
<a href="#l9.41"></a><span id="l9.41" class="difflineplus">+.click-to-play-plugins-notification-description-box {</span>
<a href="#l9.42"></a><span id="l9.42" class="difflineplus">+  padding-top: 12px;</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineplus">+  -moz-padding-end: 11px;</span>
<a href="#l9.44"></a><span id="l9.44" class="difflineplus">+   padding-bottom: 9px;</span>
<a href="#l9.45"></a><span id="l9.45" class="difflineplus">+  -moz-padding-start: 10px;</span>
<a href="#l9.46"></a><span id="l9.46" class="difflineplus">+}</span>
<a href="#l9.47"></a><span id="l9.47" class="difflineplus">+</span>
<a href="#l9.48"></a><span id="l9.48" class="difflineplus">+.click-to-play-plugins-notification-center-box {</span>
<a href="#l9.49"></a><span id="l9.49" class="difflineplus">+  background-color: #BDC7D6;</span>
<a href="#l9.50"></a><span id="l9.50" class="difflineplus">+}</span>
<a href="#l9.51"></a><span id="l9.51" class="difflineplus">+</span>
<a href="#l9.52"></a><span id="l9.52" class="difflineplus">+.click-to-play-plugins-notification-button-container {</span>
<a href="#l9.53"></a><span id="l9.53" class="difflineplus">+  padding: 12px;</span>
<a href="#l9.54"></a><span id="l9.54" class="difflineplus">+}</span>
<a href="#l9.55"></a><span id="l9.55" class="difflineplus">+</span>
<a href="#l9.56"></a><span id="l9.56" class="difflineplus">+.center-item-box {</span>
<a href="#l9.57"></a><span id="l9.57" class="difflineplus">+  padding: 8px 16px 0px 16px;</span>
<a href="#l9.58"></a><span id="l9.58" class="difflineplus">+}</span>
<a href="#l9.59"></a><span id="l9.59" class="difflineplus">+</span>
<a href="#l9.60"></a><span id="l9.60" class="difflineplus">+.center-item-box[padbottom=&quot;true&quot;] {</span>
<a href="#l9.61"></a><span id="l9.61" class="difflineplus">+  padding-bottom: 8px;</span>
<a href="#l9.62"></a><span id="l9.62" class="difflineplus">+}</span>
<a href="#l9.63"></a><span id="l9.63" class="difflineplus">+</span>
<a href="#l9.64"></a><span id="l9.64" class="difflineplus">+.center-item-icon {</span>
<a href="#l9.65"></a><span id="l9.65" class="difflineplus">+  background-image: url(&quot;chrome://mozapps/skin/plugins/pluginGeneric-16.png&quot;);</span>
<a href="#l9.66"></a><span id="l9.66" class="difflineplus">+  background-repeat: no-repeat;</span>
<a href="#l9.67"></a><span id="l9.67" class="difflineplus">+  height: 16px;</span>
<a href="#l9.68"></a><span id="l9.68" class="difflineplus">+  width: 16px;</span>
<a href="#l9.69"></a><span id="l9.69" class="difflineplus">+  margin-bottom: 4px;</span>
<a href="#l9.70"></a><span id="l9.70" class="difflineplus">+}</span>
<a href="#l9.71"></a><span id="l9.71" class="difflineplus">+</span>
<a href="#l9.72"></a><span id="l9.72" class="difflineplus">+.center-item-box[warn=&quot;true&quot;] {</span>
<a href="#l9.73"></a><span id="l9.73" class="difflineplus">+  background-image: url(&quot;chrome://navigator/skin/click-to-play-warning-stripes.png&quot;);</span>
<a href="#l9.74"></a><span id="l9.74" class="difflineplus">+  background-repeat: repeat-x;</span>
<a href="#l9.75"></a><span id="l9.75" class="difflineplus">+  padding: 8px 16px 6px 16px;</span>
<a href="#l9.76"></a><span id="l9.76" class="difflineplus">+}</span>
<a href="#l9.77"></a><span id="l9.77" class="difflineplus">+</span>
<a href="#l9.78"></a><span id="l9.78" class="difflineplus">+.center-item-box[padbottom=&quot;true&quot;][warn=&quot;true&quot;] {</span>
<a href="#l9.79"></a><span id="l9.79" class="difflineplus">+  padding-bottom: 4px;</span>
<a href="#l9.80"></a><span id="l9.80" class="difflineplus">+}</span>
<a href="#l9.81"></a><span id="l9.81" class="difflineplus">+</span>
<a href="#l9.82"></a><span id="l9.82" class="difflineplus">+.center-item-box[showseparator=&quot;true&quot;] {</span>
<a href="#l9.83"></a><span id="l9.83" class="difflineplus">+  border-top: 1px solid #B1BBC5;</span>
<a href="#l9.84"></a><span id="l9.84" class="difflineplus">+}</span>
<a href="#l9.85"></a><span id="l9.85" class="difflineplus">+</span>
<a href="#l9.86"></a><span id="l9.86" class="difflineplus">+.center-item-box[warn=&quot;false&quot;] &gt; .center-item-warning {</span>
<a href="#l9.87"></a><span id="l9.87" class="difflineplus">+  display: none;</span>
<a href="#l9.88"></a><span id="l9.88" class="difflineplus">+}</span>
<a href="#l9.89"></a><span id="l9.89" class="difflineplus">+</span>
<a href="#l9.90"></a><span id="l9.90" class="difflineplus">+.center-item-warning &gt; .text-link[href=&quot;&quot;] {</span>
<a href="#l9.91"></a><span id="l9.91" class="difflineplus">+  display: none;</span>
<a href="#l9.92"></a><span id="l9.92" class="difflineplus">+}</span>
<a href="#l9.93"></a><span id="l9.93" class="difflineplus">+</span>
<a href="#l9.94"></a><span id="l9.94" class="difflineplus">+.center-item-warning-icon {</span>
<a href="#l9.95"></a><span id="l9.95" class="difflineplus">+  background-image: url(&quot;chrome://mozapps/skin/extensions/alerticon-info-negative.png&quot;);</span>
<a href="#l9.96"></a><span id="l9.96" class="difflineplus">+  background-repeat: no-repeat;</span>
<a href="#l9.97"></a><span id="l9.97" class="difflineplus">+  width: 16px;</span>
<a href="#l9.98"></a><span id="l9.98" class="difflineplus">+  height: 15px;</span>
<a href="#l9.99"></a><span id="l9.99" class="difflineplus">+  margin-bottom: 4px;</span>
<a href="#l9.100"></a><span id="l9.100" class="difflineplus">+}</span>
<a href="#l9.101"></a><span id="l9.101" class="difflineplus">+</span>
<a href="#l9.102"></a><span id="l9.102" class="difflineplus">+.center-item-warning-description {</span>
<a href="#l9.103"></a><span id="l9.103" class="difflineplus">+  color: #828282;</span>
<a href="#l9.104"></a><span id="l9.104" class="difflineplus">+}</span>
<a href="#l9.105"></a><span id="l9.105" class="difflineplus">+</span>
<a href="#l9.106"></a><span id="l9.106" class="difflineplus">+.center-item-button {</span>
<a href="#l9.107"></a><span id="l9.107" class="difflineplus">+  min-width: 0px;</span>
<a href="#l9.108"></a><span id="l9.108" class="difflineplus">+}</span>
<a href="#l9.109"></a><span id="l9.109" class="difflineplus">+</span>
<a href="#l9.110"></a><span id="l9.110"> /* ::::: page proxy icon ::::: */</span>
<a href="#l9.111"></a><span id="l9.111"> </span>
<a href="#l9.112"></a><span id="l9.112"> #page-proxy-deck,</span>
<a href="#l9.113"></a><span id="l9.113"> #page-proxy-button,</span>
<a href="#l9.114"></a><span id="l9.114"> #page-proxy-favicon {</span>
<a href="#l9.115"></a><span id="l9.115">   width: 16px;</span>
<a href="#l9.116"></a><span id="l9.116">   height: 16px;</span>
<a href="#l9.117"></a><span id="l9.117"> }</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

