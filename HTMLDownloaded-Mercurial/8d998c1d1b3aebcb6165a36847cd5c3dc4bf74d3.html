<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 21380:8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3" />
<meta property="og:url" content="/comm-central/rev/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3" />
<meta property="og:description" content="Bug 1222244 - Replace PRLogModuleInfo usage with LazyLogModule. r=jorgk CLOSED TREE" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3">shortlog</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3">files</a> |
changeset |
<a href="/comm-central/raw-rev/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3">raw</a>  | <a href="/comm-central/archive/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1222244">Bug 1222244</a> - Replace PRLogModuleInfo usage with LazyLogModule. r=jorgk CLOSED TREE
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#69;&#114;&#105;&#99;&#32;&#82;&#97;&#104;&#109;&#32;&#60;&#101;&#114;&#97;&#104;&#109;&#64;&#109;&#111;&#122;&#105;&#108;&#108;&#97;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 04 Apr 2017 16:33:38 -0700</td></tr>

<tr>
 <td>changeset 21380</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3">8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3</a></td>
</tr>



<tr>
<td>parent 21379</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/044ae71333b128ef205049624eb7d113042fc693">044ae71333b128ef205049624eb7d113042fc693</a>
</td>
</tr>

<tr>
<td>child 21381</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/e12cf6dc05463720df5dc1023ec3fd130ce19324">e12cf6dc05463720df5dc1023ec3fd130ce19324</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3">13004</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Wed, 05 Apr 2017 20:41:23 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@8d998c1d1b3a [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3&newProject=comm-central&newRevision=8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3&newProject=comm-central&newRevision=8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3&newProject=comm-central&newRevision=8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28jorgk%29&revcount=50">jorgk</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1222244">1222244</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1222244">Bug 1222244</a> - Replace PRLogModuleInfo usage with LazyLogModule. r=jorgk CLOSED TREE</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/ldap/xpcom/src/nsLDAPInternal.h">ldap/xpcom/src/nsLDAPInternal.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/ldap/xpcom/src/nsLDAPInternal.h">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/ldap/xpcom/src/nsLDAPInternal.h">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/ldap/xpcom/src/nsLDAPInternal.h">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/ldap/xpcom/src/nsLDAPInternal.h">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/ldap/xpcom/src/nsLDAPInternal.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/ldap/xpcom/src/nsLDAPProtocolModule.cpp">ldap/xpcom/src/nsLDAPProtocolModule.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/ldap/xpcom/src/nsLDAPProtocolModule.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/ldap/xpcom/src/nsLDAPProtocolModule.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/ldap/xpcom/src/nsLDAPProtocolModule.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/ldap/xpcom/src/nsLDAPProtocolModule.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/ldap/xpcom/src/nsLDAPProtocolModule.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/ldap/xpcom/src/nsLDAPSecurityGlue.cpp">ldap/xpcom/src/nsLDAPSecurityGlue.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/ldap/xpcom/src/nsLDAPSecurityGlue.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/ldap/xpcom/src/nsLDAPSecurityGlue.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/ldap/xpcom/src/nsLDAPSecurityGlue.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/ldap/xpcom/src/nsLDAPSecurityGlue.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/ldap/xpcom/src/nsLDAPSecurityGlue.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsAbOutlookDirFactory.cpp">mailnews/addrbook/src/nsAbOutlookDirFactory.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsAbOutlookDirFactory.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsAbOutlookDirFactory.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsAbOutlookDirFactory.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsAbOutlookDirFactory.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsAbOutlookDirFactory.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsAbOutlookDirectory.cpp">mailnews/addrbook/src/nsAbOutlookDirectory.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsAbOutlookDirectory.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsAbOutlookDirectory.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsAbOutlookDirectory.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsAbOutlookDirectory.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsAbOutlookDirectory.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsAbWinHelper.cpp">mailnews/addrbook/src/nsAbWinHelper.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsAbWinHelper.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsAbWinHelper.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsAbWinHelper.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsAbWinHelper.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsAbWinHelper.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsMapiAddressBook.cpp">mailnews/addrbook/src/nsMapiAddressBook.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsMapiAddressBook.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsMapiAddressBook.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsMapiAddressBook.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsMapiAddressBook.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsMapiAddressBook.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsWabAddressBook.cpp">mailnews/addrbook/src/nsWabAddressBook.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsWabAddressBook.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsWabAddressBook.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsWabAddressBook.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsWabAddressBook.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/addrbook/src/nsWabAddressBook.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/base/src/nsMsgBiffManager.cpp">mailnews/base/src/nsMsgBiffManager.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/base/src/nsMsgBiffManager.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/base/src/nsMsgBiffManager.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/base/src/nsMsgBiffManager.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/base/src/nsMsgBiffManager.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/base/src/nsMsgBiffManager.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/base/src/nsMsgCopyService.cpp">mailnews/base/src/nsMsgCopyService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/base/src/nsMsgCopyService.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/base/src/nsMsgCopyService.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/base/src/nsMsgCopyService.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/base/src/nsMsgCopyService.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/base/src/nsMsgCopyService.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/base/src/nsMsgPurgeService.cpp">mailnews/base/src/nsMsgPurgeService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/base/src/nsMsgPurgeService.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/base/src/nsMsgPurgeService.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/base/src/nsMsgPurgeService.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/base/src/nsMsgPurgeService.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/base/src/nsMsgPurgeService.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/compose/src/nsMsgComposeService.cpp">mailnews/compose/src/nsMsgComposeService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/compose/src/nsMsgComposeService.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/compose/src/nsMsgComposeService.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/compose/src/nsMsgComposeService.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/compose/src/nsMsgComposeService.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/compose/src/nsMsgComposeService.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/compose/src/nsSmtpProtocol.cpp">mailnews/compose/src/nsSmtpProtocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/compose/src/nsSmtpProtocol.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/compose/src/nsSmtpProtocol.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/compose/src/nsSmtpProtocol.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/compose/src/nsSmtpProtocol.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/compose/src/nsSmtpProtocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMailDatabase.cpp">mailnews/db/msgdb/src/nsMailDatabase.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMailDatabase.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMailDatabase.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMailDatabase.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMailDatabase.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMailDatabase.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMsgDatabase.cpp">mailnews/db/msgdb/src/nsMsgDatabase.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMsgDatabase.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMsgDatabase.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMsgDatabase.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMsgDatabase.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMsgDatabase.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMsgOfflineImapOperation.cpp">mailnews/db/msgdb/src/nsMsgOfflineImapOperation.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMsgOfflineImapOperation.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMsgOfflineImapOperation.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMsgOfflineImapOperation.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMsgOfflineImapOperation.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMsgOfflineImapOperation.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMsgOfflineImapOperation.h">mailnews/db/msgdb/src/nsMsgOfflineImapOperation.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMsgOfflineImapOperation.h">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMsgOfflineImapOperation.h">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMsgOfflineImapOperation.h">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMsgOfflineImapOperation.h">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/db/msgdb/src/nsMsgOfflineImapOperation.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp">mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsAutoSyncManager.cpp">mailnews/imap/src/nsAutoSyncManager.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsAutoSyncManager.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsAutoSyncManager.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsAutoSyncManager.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsAutoSyncManager.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsAutoSyncManager.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsAutoSyncState.cpp">mailnews/imap/src/nsAutoSyncState.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsAutoSyncState.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsAutoSyncState.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsAutoSyncState.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsAutoSyncState.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsAutoSyncState.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsImapMailFolder.cpp">mailnews/imap/src/nsImapMailFolder.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsImapMailFolder.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsImapMailFolder.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsImapMailFolder.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsImapMailFolder.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsImapMailFolder.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsImapProtocol.cpp">mailnews/imap/src/nsImapProtocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsImapProtocol.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsImapProtocol.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsImapProtocol.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsImapProtocol.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsImapProtocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsImapServerResponseParser.cpp">mailnews/imap/src/nsImapServerResponseParser.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsImapServerResponseParser.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsImapServerResponseParser.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsImapServerResponseParser.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsImapServerResponseParser.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/imap/src/nsImapServerResponseParser.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/applemail/src/nsAppleMailImport.cpp">mailnews/import/applemail/src/nsAppleMailImport.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/applemail/src/nsAppleMailImport.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/applemail/src/nsAppleMailImport.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/applemail/src/nsAppleMailImport.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/applemail/src/nsAppleMailImport.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/applemail/src/nsAppleMailImport.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/applemail/src/nsAppleMailImport.h">mailnews/import/applemail/src/nsAppleMailImport.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/applemail/src/nsAppleMailImport.h">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/applemail/src/nsAppleMailImport.h">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/applemail/src/nsAppleMailImport.h">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/applemail/src/nsAppleMailImport.h">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/applemail/src/nsAppleMailImport.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/outlook/src/OutlookDebugLog.h">mailnews/import/outlook/src/OutlookDebugLog.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/outlook/src/OutlookDebugLog.h">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/outlook/src/OutlookDebugLog.h">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/outlook/src/OutlookDebugLog.h">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/outlook/src/OutlookDebugLog.h">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/outlook/src/OutlookDebugLog.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/outlook/src/nsOutlookImport.cpp">mailnews/import/outlook/src/nsOutlookImport.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/outlook/src/nsOutlookImport.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/outlook/src/nsOutlookImport.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/outlook/src/nsOutlookImport.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/outlook/src/nsOutlookImport.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/outlook/src/nsOutlookImport.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/src/ImportDebug.h">mailnews/import/src/ImportDebug.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/src/ImportDebug.h">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/src/ImportDebug.h">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/src/ImportDebug.h">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/src/ImportDebug.h">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/src/ImportDebug.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/src/nsImportMail.cpp">mailnews/import/src/nsImportMail.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/src/nsImportMail.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/src/nsImportMail.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/src/nsImportMail.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/src/nsImportMail.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/src/nsImportMail.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/src/nsImportService.cpp">mailnews/import/src/nsImportService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/src/nsImportService.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/src/nsImportService.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/src/nsImportService.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/src/nsImportService.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/src/nsImportService.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/text/src/TextDebugLog.h">mailnews/import/text/src/TextDebugLog.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/text/src/TextDebugLog.h">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/text/src/TextDebugLog.h">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/text/src/TextDebugLog.h">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/text/src/TextDebugLog.h">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/text/src/TextDebugLog.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/text/src/nsTextImport.cpp">mailnews/import/text/src/nsTextImport.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/text/src/nsTextImport.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/text/src/nsTextImport.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/text/src/nsTextImport.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/text/src/nsTextImport.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/text/src/nsTextImport.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/vcard/src/nsVCardAddress.h">mailnews/import/vcard/src/nsVCardAddress.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/vcard/src/nsVCardAddress.h">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/vcard/src/nsVCardAddress.h">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/vcard/src/nsVCardAddress.h">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/vcard/src/nsVCardAddress.h">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/vcard/src/nsVCardAddress.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/vcard/src/nsVCardImport.cpp">mailnews/import/vcard/src/nsVCardImport.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/vcard/src/nsVCardImport.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/vcard/src/nsVCardImport.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/vcard/src/nsVCardImport.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/vcard/src/nsVCardImport.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/vcard/src/nsVCardImport.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/winlivemail/WMDebugLog.h">mailnews/import/winlivemail/WMDebugLog.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/winlivemail/WMDebugLog.h">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/winlivemail/WMDebugLog.h">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/winlivemail/WMDebugLog.h">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/winlivemail/WMDebugLog.h">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/winlivemail/WMDebugLog.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/winlivemail/nsWMImport.cpp">mailnews/import/winlivemail/nsWMImport.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/winlivemail/nsWMImport.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/winlivemail/nsWMImport.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/winlivemail/nsWMImport.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/winlivemail/nsWMImport.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/import/winlivemail/nsWMImport.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsMailboxProtocol.cpp">mailnews/local/src/nsMailboxProtocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsMailboxProtocol.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsMailboxProtocol.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsMailboxProtocol.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsMailboxProtocol.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsMailboxProtocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsMovemailService.cpp">mailnews/local/src/nsMovemailService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsMovemailService.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsMovemailService.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsMovemailService.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsMovemailService.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsMovemailService.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsMsgMaildirStore.cpp">mailnews/local/src/nsMsgMaildirStore.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsMsgMaildirStore.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsMsgMaildirStore.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsMsgMaildirStore.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsMsgMaildirStore.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsMsgMaildirStore.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsPop3Protocol.cpp">mailnews/local/src/nsPop3Protocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsPop3Protocol.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsPop3Protocol.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsPop3Protocol.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsPop3Protocol.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsPop3Protocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsPop3Sink.cpp">mailnews/local/src/nsPop3Sink.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsPop3Sink.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsPop3Sink.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsPop3Sink.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsPop3Sink.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/local/src/nsPop3Sink.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/mapi/mapihook/src/msgMapiHook.cpp">mailnews/mapi/mapihook/src/msgMapiHook.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/mapi/mapihook/src/msgMapiHook.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/mapi/mapihook/src/msgMapiHook.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/mapi/mapihook/src/msgMapiHook.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/mapi/mapihook/src/msgMapiHook.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/mapi/mapihook/src/msgMapiHook.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/mapi/mapihook/src/msgMapiImp.cpp">mailnews/mapi/mapihook/src/msgMapiImp.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/mapi/mapihook/src/msgMapiImp.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/mapi/mapihook/src/msgMapiImp.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/mapi/mapihook/src/msgMapiImp.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/mapi/mapihook/src/msgMapiImp.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/mapi/mapihook/src/msgMapiImp.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/mime/emitters/nsMimeBaseEmitter.cpp">mailnews/mime/emitters/nsMimeBaseEmitter.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/mime/emitters/nsMimeBaseEmitter.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/mime/emitters/nsMimeBaseEmitter.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/mime/emitters/nsMimeBaseEmitter.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/mime/emitters/nsMimeBaseEmitter.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/mime/emitters/nsMimeBaseEmitter.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/news/src/nsNNTPProtocol.cpp">mailnews/news/src/nsNNTPProtocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/news/src/nsNNTPProtocol.cpp">file</a> |
<a href="/comm-central/annotate/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/news/src/nsNNTPProtocol.cpp">annotate</a> |
<a href="/comm-central/diff/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/news/src/nsNNTPProtocol.cpp">diff</a> |
<a href="/comm-central/comparison/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/news/src/nsNNTPProtocol.cpp">comparison</a> |
<a href="/comm-central/log/8d998c1d1b3aebcb6165a36847cd5c3dc4bf74d3/mailnews/news/src/nsNNTPProtocol.cpp">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPInternal.h</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPInternal.h</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -1,11 +1,14 @@</span>
<a href="#l1.4"></a><span id="l1.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l1.5"></a><span id="l1.5">  *</span>
<a href="#l1.6"></a><span id="l1.6">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l1.7"></a><span id="l1.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l1.8"></a><span id="l1.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l1.9"></a><span id="l1.9"> </span>
<a href="#l1.10"></a><span id="l1.10" class="difflineminus">-#include &quot;prlog.h&quot;</span>
<a href="#l1.11"></a><span id="l1.11" class="difflineplus">+#ifndef nsLDAPInternal_h_</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+#define nsLDAPInternal_h_</span>
<a href="#l1.13"></a><span id="l1.13"> </span>
<a href="#l1.14"></a><span id="l1.14" class="difflineminus">-#ifdef PR_LOGGING</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineminus">-extern PRLogModuleInfo *gLDAPLogModule;    // defn in nsLDAPProtocolModule.cpp</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineminus">-#endif</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineplus">+#include &quot;mozilla/Logging.h&quot;</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineplus">+</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineplus">+static mozilla::LazyLogModule gLDAPLogModule(&quot;ldap&quot;);</span>
<a href="#l1.20"></a><span id="l1.20" class="difflineplus">+</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineplus">+#endif // nsLDAPInternal_h_</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPProtocolModule.cpp</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPProtocolModule.cpp</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -90,25 +90,16 @@ const mozilla::Module::ContractIDEntry k</span>
<a href="#l2.4"></a><span id="l2.4"> #endif</span>
<a href="#l2.5"></a><span id="l2.5">   { &quot;@mozilla.org/network/ldap-control;1&quot;, &amp;kNS_LDAPCONTROL_CID},</span>
<a href="#l2.6"></a><span id="l2.6">   { NULL }</span>
<a href="#l2.7"></a><span id="l2.7"> };</span>
<a href="#l2.8"></a><span id="l2.8"> </span>
<a href="#l2.9"></a><span id="l2.9"> static nsresult</span>
<a href="#l2.10"></a><span id="l2.10"> nsLDAPInitialize()</span>
<a href="#l2.11"></a><span id="l2.11"> {</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-#ifdef PR_LOGGING</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-    gLDAPLogModule = PR_NewLogModule(&quot;ldap&quot;);</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-    if (!gLDAPLogModule) {</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineminus">-        PR_fprintf(PR_STDERR, </span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-                   &quot;nsLDAP_Initialize(): PR_NewLogModule() failed\n&quot;);</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineminus">-        return NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineminus">-    }</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineminus">-#endif</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineminus">-</span>
<a href="#l2.21"></a><span id="l2.21">     // use NSPR under the hood for all networking</span>
<a href="#l2.22"></a><span id="l2.22">     //</span>
<a href="#l2.23"></a><span id="l2.23">     int rv = prldap_install_routines( NULL, 1 /* shared */ );</span>
<a href="#l2.24"></a><span id="l2.24"> </span>
<a href="#l2.25"></a><span id="l2.25">     if (rv != LDAP_SUCCESS) {</span>
<a href="#l2.26"></a><span id="l2.26">         MOZ_LOG(gLDAPLogModule, mozilla::LogLevel::Error,</span>
<a href="#l2.27"></a><span id="l2.27">                (&quot;nsLDAPInitialize(): pr_ldap_install_routines() failed: %s\n&quot;,</span>
<a href="#l2.28"></a><span id="l2.28">                ldap_err2string(rv)));</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineat">@@ -136,12 +127,8 @@ static const mozilla::Module kLDAPProtoc</span>
<a href="#l2.30"></a><span id="l2.30">     kLDAPProtocolContracts,</span>
<a href="#l2.31"></a><span id="l2.31">     NULL,</span>
<a href="#l2.32"></a><span id="l2.32">     NULL,</span>
<a href="#l2.33"></a><span id="l2.33">     nsLDAPInitialize,</span>
<a href="#l2.34"></a><span id="l2.34">     NULL</span>
<a href="#l2.35"></a><span id="l2.35"> };</span>
<a href="#l2.36"></a><span id="l2.36"> </span>
<a href="#l2.37"></a><span id="l2.37"> NSMODULE_DEFN(nsLDAPProtocolModule) = &amp;kLDAPProtocolModule;</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineminus">-</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineminus">-#ifdef PR_LOGGING</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineminus">-PRLogModuleInfo *gLDAPLogModule = 0;</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineminus">-#endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPSecurityGlue.cpp</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPSecurityGlue.cpp</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -122,17 +122,17 @@ nsLDAPSSLConnect(const char *hostlist, i</span>
<a href="#l3.4"></a><span id="l3.4">                                      (sessionInfo.seinfo_appdata);</span>
<a href="#l3.5"></a><span id="l3.5">     </span>
<a href="#l3.6"></a><span id="l3.6">     // Call the real connect() callback to make the TCP connection.  If it</span>
<a href="#l3.7"></a><span id="l3.7">     // succeeds, *socketargp is set.</span>
<a href="#l3.8"></a><span id="l3.8">     //</span>
<a href="#l3.9"></a><span id="l3.9">     intfd = (*(sessionClosure-&gt;realConnect))(hostlist, defport, timeout, </span>
<a href="#l3.10"></a><span id="l3.10"> 					     options, sessionarg, socketargp);</span>
<a href="#l3.11"></a><span id="l3.11">     if ( intfd &lt; 0 ) {</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-	PR_LOG(gLDAPLogModule, PR_LOG_DEBUG,</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+	MOZ_LOG(gLDAPLogModule, mozilla::LogLevel::Debug,</span>
<a href="#l3.14"></a><span id="l3.14"> 	       (&quot;nsLDAPSSLConnect(): standard connect() function returned %d&quot;,</span>
<a href="#l3.15"></a><span id="l3.15"> 		intfd));</span>
<a href="#l3.16"></a><span id="l3.16">         return intfd;</span>
<a href="#l3.17"></a><span id="l3.17">     }</span>
<a href="#l3.18"></a><span id="l3.18"> </span>
<a href="#l3.19"></a><span id="l3.19">     // Retrieve socket info from the newly created socket so that we</span>
<a href="#l3.20"></a><span id="l3.20">     // have the PRFileDesc onto which we will be layering SSL.</span>
<a href="#l3.21"></a><span id="l3.21">     //</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbOutlookDirFactory.cpp</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbOutlookDirFactory.cpp</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -9,20 +9,17 @@</span>
<a href="#l4.4"></a><span id="l4.4"> #include &quot;nsEnumeratorUtils.h&quot;</span>
<a href="#l4.5"></a><span id="l4.5"> #include &quot;nsServiceManagerUtils.h&quot;</span>
<a href="#l4.6"></a><span id="l4.6"> #include &quot;nsComponentManagerUtils.h&quot;</span>
<a href="#l4.7"></a><span id="l4.7"> #include &quot;nsIMutableArray.h&quot;</span>
<a href="#l4.8"></a><span id="l4.8"> #include &quot;nsArrayEnumerator.h&quot;</span>
<a href="#l4.9"></a><span id="l4.9"> #include &quot;nsAbBaseCID.h&quot;</span>
<a href="#l4.10"></a><span id="l4.10"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-#ifdef PR_LOGGING</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-static PRLogModuleInfo* gAbOutlookDirFactoryLog</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-    = PR_NewLogModule(&quot;nsAbOutlookDirFactoryLog&quot;);</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineminus">-#endif</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+static mozilla::LazyLogModule gAbOutlookDirFactoryLog(&quot;nsAbOutlookDirFactoryLog&quot;);</span>
<a href="#l4.17"></a><span id="l4.17"> </span>
<a href="#l4.18"></a><span id="l4.18"> #define PRINTF(args) MOZ_LOG(nsAbOutlookDirFactoryLog, mozilla::LogLevel::Debug, args)</span>
<a href="#l4.19"></a><span id="l4.19"> </span>
<a href="#l4.20"></a><span id="l4.20"> </span>
<a href="#l4.21"></a><span id="l4.21"> NS_IMPL_ISUPPORTS(nsAbOutlookDirFactory, nsIAbDirFactory)</span>
<a href="#l4.22"></a><span id="l4.22"> </span>
<a href="#l4.23"></a><span id="l4.23"> nsAbOutlookDirFactory::nsAbOutlookDirFactory(void)</span>
<a href="#l4.24"></a><span id="l4.24"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbOutlookDirectory.cpp</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbOutlookDirectory.cpp</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -21,20 +21,17 @@</span>
<a href="#l5.4"></a><span id="l5.4"> #include &quot;prthread.h&quot;</span>
<a href="#l5.5"></a><span id="l5.5"> #include &quot;nsIPrefService.h&quot;</span>
<a href="#l5.6"></a><span id="l5.6"> #include &quot;nsIPrefBranch.h&quot;</span>
<a href="#l5.7"></a><span id="l5.7"> #include &quot;nsCRTGlue.h&quot;</span>
<a href="#l5.8"></a><span id="l5.8"> #include &quot;nsArrayUtils.h&quot;</span>
<a href="#l5.9"></a><span id="l5.9"> #include &quot;nsArrayEnumerator.h&quot;</span>
<a href="#l5.10"></a><span id="l5.10"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l5.11"></a><span id="l5.11"> </span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-#ifdef PR_LOGGING</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-static PRLogModuleInfo* gAbOutlookDirectoryLog</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineminus">-    = PR_NewLogModule(&quot;nsAbOutlookDirectoryLog&quot;);</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineminus">-#endif</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+static mozilla::LazyLogModule gAbOutlookDirectoryLog(&quot;nsAbOutlookDirectoryLog&quot;);</span>
<a href="#l5.17"></a><span id="l5.17"> </span>
<a href="#l5.18"></a><span id="l5.18"> #define PRINTF(args) MOZ_LOG(gAbOutlookDirectoryLog, mozilla::LogLevel::Debug, args)</span>
<a href="#l5.19"></a><span id="l5.19"> </span>
<a href="#l5.20"></a><span id="l5.20"> nsAbOutlookDirectory::nsAbOutlookDirectory(void)</span>
<a href="#l5.21"></a><span id="l5.21">   : nsAbDirProperty(),</span>
<a href="#l5.22"></a><span id="l5.22">   mCurrentQueryId(0), mSearchContext(-1),</span>
<a href="#l5.23"></a><span id="l5.23">   mAbWinType(nsAbWinType_Unknown), mMapiData(nullptr)</span>
<a href="#l5.24"></a><span id="l5.24"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbWinHelper.cpp</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbWinHelper.cpp</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -12,20 +12,17 @@</span>
<a href="#l6.4"></a><span id="l6.4"> #include &quot;nsAbWinHelper.h&quot;</span>
<a href="#l6.5"></a><span id="l6.5"> #include &quot;nsMapiAddressBook.h&quot;</span>
<a href="#l6.6"></a><span id="l6.6"> #include &quot;nsWabAddressBook.h&quot;</span>
<a href="#l6.7"></a><span id="l6.7"> </span>
<a href="#l6.8"></a><span id="l6.8"> #include &lt;mapiguid.h&gt;</span>
<a href="#l6.9"></a><span id="l6.9"> </span>
<a href="#l6.10"></a><span id="l6.10"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-#ifdef PR_LOGGING</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-static PRLogModuleInfo* gAbWinHelperLog</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineminus">-    = PR_NewLogModule(&quot;nsAbWinHelperLog&quot;);</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineminus">-#endif</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineplus">+static mozilla::LazyLogModule gAbWinHelperLog(&quot;nsAbWinHelperLog&quot;);</span>
<a href="#l6.17"></a><span id="l6.17"> </span>
<a href="#l6.18"></a><span id="l6.18"> #define PRINTF(args) MOZ_LOG(gAbWinHelperLog, mozilla::LogLevel::Debug, args)</span>
<a href="#l6.19"></a><span id="l6.19"> </span>
<a href="#l6.20"></a><span id="l6.20"> // Small utility to ensure release of all MAPI interfaces</span>
<a href="#l6.21"></a><span id="l6.21"> template &lt;class tInterface&gt; struct nsMapiInterfaceWrapper</span>
<a href="#l6.22"></a><span id="l6.22"> {</span>
<a href="#l6.23"></a><span id="l6.23">     tInterface mInterface ;</span>
<a href="#l6.24"></a><span id="l6.24"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mailnews/addrbook/src/nsMapiAddressBook.cpp</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsMapiAddressBook.cpp</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -1,20 +1,17 @@</span>
<a href="#l7.4"></a><span id="l7.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */</span>
<a href="#l7.5"></a><span id="l7.5"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l7.6"></a><span id="l7.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l7.7"></a><span id="l7.7">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l7.8"></a><span id="l7.8"> #include &quot;nsMapiAddressBook.h&quot;</span>
<a href="#l7.9"></a><span id="l7.9"> </span>
<a href="#l7.10"></a><span id="l7.10"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-#ifdef PR_LOGGING</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-static PRLogModuleInfo* gMapiAddressBookLog</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineminus">-    = PR_NewLogModule(&quot;nsMapiAddressBookLog&quot;);</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineminus">-#endif</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineplus">+static mozilla::LazyLogModule gMapiAddressBookLog(&quot;nsMapiAddressBookLog&quot;);</span>
<a href="#l7.17"></a><span id="l7.17"> </span>
<a href="#l7.18"></a><span id="l7.18"> #define PRINTF(args) MOZ_LOG(gMapiAddressBookLog, mozilla::LogLevel::Debug, args)</span>
<a href="#l7.19"></a><span id="l7.19"> </span>
<a href="#l7.20"></a><span id="l7.20"> using namespace mozilla;</span>
<a href="#l7.21"></a><span id="l7.21"> </span>
<a href="#l7.22"></a><span id="l7.22"> HMODULE nsMapiAddressBook::mLibrary = NULL ;</span>
<a href="#l7.23"></a><span id="l7.23"> int32_t nsMapiAddressBook::mLibUsage = 0 ;</span>
<a href="#l7.24"></a><span id="l7.24"> LPMAPIINITIALIZE nsMapiAddressBook::mMAPIInitialize = NULL ;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mailnews/addrbook/src/nsWabAddressBook.cpp</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsWabAddressBook.cpp</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -3,20 +3,17 @@</span>
<a href="#l8.4"></a><span id="l8.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l8.5"></a><span id="l8.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l8.6"></a><span id="l8.6"> </span>
<a href="#l8.7"></a><span id="l8.7"> #include &lt;tchar.h&gt;</span>
<a href="#l8.8"></a><span id="l8.8"> #include &quot;nsWabAddressBook.h&quot;</span>
<a href="#l8.9"></a><span id="l8.9"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l8.10"></a><span id="l8.10"> #include &lt;algorithm&gt;</span>
<a href="#l8.11"></a><span id="l8.11"> </span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-#ifdef PR_LOGGING</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-static PRLogModuleInfo* gWabAddressBookLog</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineminus">-    = PR_NewLogModule(&quot;nsWabAddressBookLog&quot;);</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">-#endif</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineplus">+static mozilla::LazyLogModule gWabAddressBookLog(&quot;nsWabAddressBookLog&quot;);</span>
<a href="#l8.17"></a><span id="l8.17"> </span>
<a href="#l8.18"></a><span id="l8.18"> #define PRINTF(args) MOZ_LOG(gWabAddressBookLog, mozilla::LogLevel::Debug, args)</span>
<a href="#l8.19"></a><span id="l8.19"> </span>
<a href="#l8.20"></a><span id="l8.20"> using namespace mozilla;</span>
<a href="#l8.21"></a><span id="l8.21"> </span>
<a href="#l8.22"></a><span id="l8.22"> HMODULE nsWabAddressBook::mLibrary = NULL ;</span>
<a href="#l8.23"></a><span id="l8.23"> int32_t nsWabAddressBook::mLibUsage = 0 ;</span>
<a href="#l8.24"></a><span id="l8.24"> LPWABOPEN nsWabAddressBook::mWABOpen = NULL ;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mailnews/base/src/nsMsgBiffManager.cpp</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgBiffManager.cpp</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -18,17 +18,17 @@</span>
<a href="#l9.4"></a><span id="l9.4"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l9.5"></a><span id="l9.5"> #include &quot;mozilla/Services.h&quot;</span>
<a href="#l9.6"></a><span id="l9.6"> #include &lt;algorithm&gt;</span>
<a href="#l9.7"></a><span id="l9.7"> </span>
<a href="#l9.8"></a><span id="l9.8"> #define PREF_BIFF_JITTER &quot;mail.biff.add_interval_jitter&quot;</span>
<a href="#l9.9"></a><span id="l9.9"> </span>
<a href="#l9.10"></a><span id="l9.10"> static NS_DEFINE_CID(kStatusBarBiffManagerCID, NS_STATUSBARBIFFMANAGER_CID);</span>
<a href="#l9.11"></a><span id="l9.11"> </span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-static PRLogModuleInfo *MsgBiffLogModule = nullptr;</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+static mozilla::LazyLogModule MsgBiffLogModule(&quot;MsgBiff&quot;);</span>
<a href="#l9.14"></a><span id="l9.14"> </span>
<a href="#l9.15"></a><span id="l9.15"> NS_IMPL_ISUPPORTS(nsMsgBiffManager, nsIMsgBiffManager,</span>
<a href="#l9.16"></a><span id="l9.16">                    nsIIncomingServerListener, nsIObserver,</span>
<a href="#l9.17"></a><span id="l9.17">                    nsISupportsWeakReference)</span>
<a href="#l9.18"></a><span id="l9.18"> </span>
<a href="#l9.19"></a><span id="l9.19"> void OnBiffTimer(nsITimer *timer, void *aBiffManager)</span>
<a href="#l9.20"></a><span id="l9.20"> {</span>
<a href="#l9.21"></a><span id="l9.21">   nsMsgBiffManager *biffManager = (nsMsgBiffManager*)aBiffManager;</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineat">@@ -77,19 +77,16 @@ NS_IMETHODIMP nsMsgBiffManager::Init()</span>
<a href="#l9.23"></a><span id="l9.23">     mHaveShutdown = false;</span>
<a href="#l9.24"></a><span id="l9.24">     return NS_OK;</span>
<a href="#l9.25"></a><span id="l9.25">   }</span>
<a href="#l9.26"></a><span id="l9.26"> </span>
<a href="#l9.27"></a><span id="l9.27">   // Ensure status bar biff service has started</span>
<a href="#l9.28"></a><span id="l9.28">   nsCOMPtr&lt;nsIFolderListener&gt; statusBarBiffService = </span>
<a href="#l9.29"></a><span id="l9.29">     do_GetService(kStatusBarBiffManagerCID, &amp;rv);</span>
<a href="#l9.30"></a><span id="l9.30"> </span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-  if (!MsgBiffLogModule)</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineminus">-    MsgBiffLogModule = PR_NewLogModule(&quot;MsgBiff&quot;);</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineminus">-</span>
<a href="#l9.34"></a><span id="l9.34">   nsCOMPtr&lt;nsIObserverService&gt; observerService =</span>
<a href="#l9.35"></a><span id="l9.35">     mozilla::services::GetObserverService();</span>
<a href="#l9.36"></a><span id="l9.36">   if (observerService)</span>
<a href="#l9.37"></a><span id="l9.37">   {</span>
<a href="#l9.38"></a><span id="l9.38">     observerService-&gt;AddObserver(this, &quot;sleep_notification&quot;, true);</span>
<a href="#l9.39"></a><span id="l9.39">     observerService-&gt;AddObserver(this, &quot;wake_notification&quot;, true);</span>
<a href="#l9.40"></a><span id="l9.40">   }</span>
<a href="#l9.41"></a><span id="l9.41">   return NS_OK;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mailnews/base/src/nsMsgCopyService.cpp</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgCopyService.cpp</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -11,17 +11,17 @@</span>
<a href="#l10.4"></a><span id="l10.4"> #include &quot;nsMsgBaseCID.h&quot;</span>
<a href="#l10.5"></a><span id="l10.5"> #include &quot;nsIMutableArray.h&quot;</span>
<a href="#l10.6"></a><span id="l10.6"> #include &quot;nsArrayUtils.h&quot;</span>
<a href="#l10.7"></a><span id="l10.7"> #include &quot;nsComponentManagerUtils.h&quot;</span>
<a href="#l10.8"></a><span id="l10.8"> #include &quot;nsServiceManagerUtils.h&quot;</span>
<a href="#l10.9"></a><span id="l10.9"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l10.10"></a><span id="l10.10"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l10.11"></a><span id="l10.11"> </span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-static PRLogModuleInfo *gCopyServiceLog;</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+static mozilla::LazyLogModule gCopyServiceLog(&quot;MsgCopyService&quot;);</span>
<a href="#l10.14"></a><span id="l10.14"> </span>
<a href="#l10.15"></a><span id="l10.15"> // ******************** nsCopySource ******************</span>
<a href="#l10.16"></a><span id="l10.16"> //</span>
<a href="#l10.17"></a><span id="l10.17"> </span>
<a href="#l10.18"></a><span id="l10.18"> nsCopySource::nsCopySource() : m_processed(false)</span>
<a href="#l10.19"></a><span id="l10.19"> {</span>
<a href="#l10.20"></a><span id="l10.20">   MOZ_COUNT_CTOR(nsCopySource);</span>
<a href="#l10.21"></a><span id="l10.21">   m_messageArray = do_CreateInstance(NS_ARRAY_CONTRACTID);</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineat">@@ -121,17 +121,16 @@ nsCopyRequest::AddNewCopySource(nsIMsgFo</span>
<a href="#l10.23"></a><span id="l10.23"> }</span>
<a href="#l10.24"></a><span id="l10.24"> </span>
<a href="#l10.25"></a><span id="l10.25"> // ************* nsMsgCopyService ****************</span>
<a href="#l10.26"></a><span id="l10.26"> //</span>
<a href="#l10.27"></a><span id="l10.27"> </span>
<a href="#l10.28"></a><span id="l10.28"> </span>
<a href="#l10.29"></a><span id="l10.29"> nsMsgCopyService::nsMsgCopyService()</span>
<a href="#l10.30"></a><span id="l10.30"> {</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineminus">-  gCopyServiceLog = PR_NewLogModule(&quot;MsgCopyService&quot;);</span>
<a href="#l10.32"></a><span id="l10.32"> }</span>
<a href="#l10.33"></a><span id="l10.33"> </span>
<a href="#l10.34"></a><span id="l10.34"> nsMsgCopyService::~nsMsgCopyService()</span>
<a href="#l10.35"></a><span id="l10.35"> {</span>
<a href="#l10.36"></a><span id="l10.36">   int32_t i = m_copyRequests.Length();</span>
<a href="#l10.37"></a><span id="l10.37"> </span>
<a href="#l10.38"></a><span id="l10.38">   while (i-- &gt; 0)</span>
<a href="#l10.39"></a><span id="l10.39">     ClearRequest(m_copyRequests.ElementAt(i), NS_ERROR_FAILURE);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mailnews/base/src/nsMsgPurgeService.cpp</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgPurgeService.cpp</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -18,17 +18,17 @@</span>
<a href="#l11.4"></a><span id="l11.4"> #include &quot;nsIPrefService.h&quot;</span>
<a href="#l11.5"></a><span id="l11.5"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l11.6"></a><span id="l11.6"> #include &quot;nsMsgFolderFlags.h&quot;</span>
<a href="#l11.7"></a><span id="l11.7"> #include &lt;stdlib.h&gt;</span>
<a href="#l11.8"></a><span id="l11.8"> #include &quot;nsComponentManagerUtils.h&quot;</span>
<a href="#l11.9"></a><span id="l11.9"> #include &quot;nsServiceManagerUtils.h&quot;</span>
<a href="#l11.10"></a><span id="l11.10"> #include &quot;nsArrayUtils.h&quot;</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-static PRLogModuleInfo *MsgPurgeLogModule = nullptr;</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+static mozilla::LazyLogModule MsgPurgeLogModule(&quot;MsgPurge&quot;);</span>
<a href="#l11.14"></a><span id="l11.14"> </span>
<a href="#l11.15"></a><span id="l11.15"> NS_IMPL_ISUPPORTS(nsMsgPurgeService, nsIMsgPurgeService, nsIMsgSearchNotify)</span>
<a href="#l11.16"></a><span id="l11.16"> </span>
<a href="#l11.17"></a><span id="l11.17"> void OnPurgeTimer(nsITimer *timer, void *aPurgeService)</span>
<a href="#l11.18"></a><span id="l11.18"> {</span>
<a href="#l11.19"></a><span id="l11.19">   nsMsgPurgeService *purgeService = (nsMsgPurgeService*)aPurgeService;</span>
<a href="#l11.20"></a><span id="l11.20">   purgeService-&gt;PerformPurge();</span>
<a href="#l11.21"></a><span id="l11.21"> }</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineat">@@ -48,19 +48,16 @@ nsMsgPurgeService::~nsMsgPurgeService()</span>
<a href="#l11.23"></a><span id="l11.23">   if(!mHaveShutdown)</span>
<a href="#l11.24"></a><span id="l11.24">     Shutdown();</span>
<a href="#l11.25"></a><span id="l11.25"> }</span>
<a href="#l11.26"></a><span id="l11.26"> </span>
<a href="#l11.27"></a><span id="l11.27"> NS_IMETHODIMP nsMsgPurgeService::Init()</span>
<a href="#l11.28"></a><span id="l11.28"> {</span>
<a href="#l11.29"></a><span id="l11.29">   nsresult rv;</span>
<a href="#l11.30"></a><span id="l11.30"> </span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-  if (!MsgPurgeLogModule)</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineminus">-    MsgPurgeLogModule = PR_NewLogModule(&quot;MsgPurge&quot;);</span>
<a href="#l11.33"></a><span id="l11.33" class="difflineminus">-</span>
<a href="#l11.34"></a><span id="l11.34">   // these prefs are here to help QA test this feature</span>
<a href="#l11.35"></a><span id="l11.35">   nsCOMPtr&lt;nsIPrefBranch&gt; prefBranch(do_GetService(NS_PREFSERVICE_CONTRACTID, &amp;rv));</span>
<a href="#l11.36"></a><span id="l11.36">   if (NS_SUCCEEDED(rv))</span>
<a href="#l11.37"></a><span id="l11.37">   {</span>
<a href="#l11.38"></a><span id="l11.38">     int32_t min_delay;</span>
<a href="#l11.39"></a><span id="l11.39">     rv = prefBranch-&gt;GetIntPref(&quot;mail.purge.min_delay&quot;, &amp;min_delay);</span>
<a href="#l11.40"></a><span id="l11.40">     if (NS_SUCCEEDED(rv) &amp;&amp;  min_delay)</span>
<a href="#l11.41"></a><span id="l11.41">       mMinDelayBetweenPurges = min_delay;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgComposeService.cpp</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgComposeService.cpp</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -80,17 +80,17 @@</span>
<a href="#l12.4"></a><span id="l12.4"> #define MAILNEWS_ROOT_PREF                         &quot;mailnews.&quot;</span>
<a href="#l12.5"></a><span id="l12.5"> #define HTMLDOMAINUPDATE_VERSION_PREF_NAME         &quot;global_html_domains.version&quot;</span>
<a href="#l12.6"></a><span id="l12.6"> #define HTMLDOMAINUPDATE_DOMAINLIST_PREF_NAME      &quot;global_html_domains&quot;</span>
<a href="#l12.7"></a><span id="l12.7"> #define USER_CURRENT_HTMLDOMAINLIST_PREF_NAME      &quot;html_domains&quot;</span>
<a href="#l12.8"></a><span id="l12.8"> #define USER_CURRENT_PLAINTEXTDOMAINLIST_PREF_NAME &quot;plaintext_domains&quot;</span>
<a href="#l12.9"></a><span id="l12.9"> #define DOMAIN_DELIMITER                           ','</span>
<a href="#l12.10"></a><span id="l12.10"> </span>
<a href="#l12.11"></a><span id="l12.11"> #ifdef MSGCOMP_TRACE_PERFORMANCE</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-static PRLogModuleInfo *MsgComposeLogModule = nullptr;</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+static mozilla::LazyLogModule MsgComposeLogModule(&quot;msgcompose&quot;);</span>
<a href="#l12.14"></a><span id="l12.14"> </span>
<a href="#l12.15"></a><span id="l12.15"> static uint32_t GetMessageSizeFromURI(const char * originalMsgURI)</span>
<a href="#l12.16"></a><span id="l12.16"> {</span>
<a href="#l12.17"></a><span id="l12.17">   uint32_t msgSize = 0;</span>
<a href="#l12.18"></a><span id="l12.18"> </span>
<a href="#l12.19"></a><span id="l12.19">   if (originalMsgURI &amp;&amp; *originalMsgURI)</span>
<a href="#l12.20"></a><span id="l12.20">   {</span>
<a href="#l12.21"></a><span id="l12.21">     nsCOMPtr &lt;nsIMsgDBHdr&gt; originalMsgHdr;</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineat">@@ -104,19 +104,16 @@ static uint32_t GetMessageSizeFromURI(co</span>
<a href="#l12.23"></a><span id="l12.23"> #endif</span>
<a href="#l12.24"></a><span id="l12.24"> </span>
<a href="#l12.25"></a><span id="l12.25"> nsMsgComposeService::nsMsgComposeService()</span>
<a href="#l12.26"></a><span id="l12.26"> {</span>
<a href="#l12.27"></a><span id="l12.27"> </span>
<a href="#l12.28"></a><span id="l12.28"> // Defaulting the value of mLogComposePerformance to FALSE to prevent logging.</span>
<a href="#l12.29"></a><span id="l12.29">   mLogComposePerformance = false;</span>
<a href="#l12.30"></a><span id="l12.30"> #ifdef MSGCOMP_TRACE_PERFORMANCE</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineminus">-  if (!MsgComposeLogModule)</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineminus">-      MsgComposeLogModule = PR_NewLogModule(&quot;msgcompose&quot;);</span>
<a href="#l12.33"></a><span id="l12.33" class="difflineminus">-</span>
<a href="#l12.34"></a><span id="l12.34">   mStartTime = PR_IntervalNow();</span>
<a href="#l12.35"></a><span id="l12.35">   mPreviousTime = mStartTime;</span>
<a href="#l12.36"></a><span id="l12.36"> #endif</span>
<a href="#l12.37"></a><span id="l12.37"> </span>
<a href="#l12.38"></a><span id="l12.38"> }</span>
<a href="#l12.39"></a><span id="l12.39"> </span>
<a href="#l12.40"></a><span id="l12.40"> NS_IMPL_ISUPPORTS(nsMsgComposeService,</span>
<a href="#l12.41"></a><span id="l12.41">                    nsIMsgComposeService,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mailnews/compose/src/nsSmtpProtocol.cpp</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mailnews/compose/src/nsSmtpProtocol.cpp</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -46,17 +46,17 @@</span>
<a href="#l13.4"></a><span id="l13.4"> #include &quot;nsIProxyInfo.h&quot;</span>
<a href="#l13.5"></a><span id="l13.5"> </span>
<a href="#l13.6"></a><span id="l13.6"> #ifndef XP_UNIX</span>
<a href="#l13.7"></a><span id="l13.7"> #include &lt;stdarg.h&gt;</span>
<a href="#l13.8"></a><span id="l13.8"> #endif /* !XP_UNIX */</span>
<a href="#l13.9"></a><span id="l13.9"> </span>
<a href="#l13.10"></a><span id="l13.10"> #undef PostMessage // avoid to collision with WinUser.h</span>
<a href="#l13.11"></a><span id="l13.11"> </span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-static PRLogModuleInfo *SMTPLogModule = nullptr;</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+static mozilla::LazyLogModule SMTPLogModule(&quot;SMTP&quot;);</span>
<a href="#l13.14"></a><span id="l13.14"> </span>
<a href="#l13.15"></a><span id="l13.15"> using namespace mozilla::mailnews;</span>
<a href="#l13.16"></a><span id="l13.16"> </span>
<a href="#l13.17"></a><span id="l13.17"> /* the output_buffer_size must be larger than the largest possible line</span>
<a href="#l13.18"></a><span id="l13.18">  * 2000 seems good for news</span>
<a href="#l13.19"></a><span id="l13.19">  *</span>
<a href="#l13.20"></a><span id="l13.20">  * jwz: I increased this to 4k since it must be big enough to hold the</span>
<a href="#l13.21"></a><span id="l13.21">  * entire button-bar HTML, and with the new &quot;mailto&quot; format, that can</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineat">@@ -244,19 +244,16 @@ nsresult nsSmtpProtocol::Initialize(nsIU</span>
<a href="#l13.23"></a><span id="l13.23">     m_currentAuthMethod = 0;</span>
<a href="#l13.24"></a><span id="l13.24">     m_usernamePrompted = false;</span>
<a href="#l13.25"></a><span id="l13.25">     m_prefSocketType = nsMsgSocketType::trySTARTTLS;</span>
<a href="#l13.26"></a><span id="l13.26">     m_tlsInitiated = false;</span>
<a href="#l13.27"></a><span id="l13.27"> </span>
<a href="#l13.28"></a><span id="l13.28">     m_url = aURL; // Needed in nsMsgAsyncWriteProtocol::UpdateProgress().</span>
<a href="#l13.29"></a><span id="l13.29">     m_urlErrorState = NS_ERROR_FAILURE;</span>
<a href="#l13.30"></a><span id="l13.30"> </span>
<a href="#l13.31"></a><span id="l13.31" class="difflineminus">-    if (!SMTPLogModule)</span>
<a href="#l13.32"></a><span id="l13.32" class="difflineminus">-        SMTPLogModule = PR_NewLogModule(&quot;SMTP&quot;);</span>
<a href="#l13.33"></a><span id="l13.33" class="difflineminus">-</span>
<a href="#l13.34"></a><span id="l13.34">     if (aURL)</span>
<a href="#l13.35"></a><span id="l13.35">         m_runningURL = do_QueryInterface(aURL);</span>
<a href="#l13.36"></a><span id="l13.36"> </span>
<a href="#l13.37"></a><span id="l13.37">     // extract out message feedback if there is any.</span>
<a href="#l13.38"></a><span id="l13.38">     nsCOMPtr&lt;nsIMsgMailNewsUrl&gt; mailnewsUrl = do_QueryInterface(aURL);</span>
<a href="#l13.39"></a><span id="l13.39">     if (mailnewsUrl)</span>
<a href="#l13.40"></a><span id="l13.40">         mailnewsUrl-&gt;GetStatusFeedback(getter_AddRefs(m_statusFeedback));</span>
<a href="#l13.41"></a><span id="l13.41"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mailnews/db/msgdb/src/nsMailDatabase.cpp</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mailnews/db/msgdb/src/nsMailDatabase.cpp</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -11,17 +11,17 @@</span>
<a href="#l14.4"></a><span id="l14.4"> #include &quot;nsISeekableStream.h&quot;</span>
<a href="#l14.5"></a><span id="l14.5"> #include &quot;nsMsgOfflineImapOperation.h&quot;</span>
<a href="#l14.6"></a><span id="l14.6"> #include &quot;nsMsgFolderFlags.h&quot;</span>
<a href="#l14.7"></a><span id="l14.7"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l14.8"></a><span id="l14.8"> #include &quot;prprf.h&quot;</span>
<a href="#l14.9"></a><span id="l14.9"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l14.10"></a><span id="l14.10"> #include &quot;nsIMsgPluggableStore.h&quot;</span>
<a href="#l14.11"></a><span id="l14.11"> </span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-extern PRLogModuleInfo *IMAPOffline;</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+static mozilla::LazyLogModule IMAPOffline(&quot;IMAPOFFLINE&quot;);</span>
<a href="#l14.14"></a><span id="l14.14"> </span>
<a href="#l14.15"></a><span id="l14.15"> using namespace mozilla;</span>
<a href="#l14.16"></a><span id="l14.16"> </span>
<a href="#l14.17"></a><span id="l14.17"> // scope for all offine ops table</span>
<a href="#l14.18"></a><span id="l14.18"> const char *kOfflineOpsScope = &quot;ns:msg:db:row:scope:ops:all&quot;;</span>
<a href="#l14.19"></a><span id="l14.19"> const char *kOfflineOpsTableKind = &quot;ns:msg:db:table:kind:ops&quot;;</span>
<a href="#l14.20"></a><span id="l14.20"> struct mdbOid gAllOfflineOpsTableOID;</span>
<a href="#l14.21"></a><span id="l14.21"> </span>
<a href="#l14.22"></a><span id="l14.22" class="difflineat">@@ -150,18 +150,16 @@ NS_IMETHODIMP  nsMailDatabase::RemoveOff</span>
<a href="#l14.23"></a><span id="l14.23"> }</span>
<a href="#l14.24"></a><span id="l14.24"> </span>
<a href="#l14.25"></a><span id="l14.25"> NS_IMETHODIMP nsMailDatabase::GetOfflineOpForKey(nsMsgKey msgKey, bool create, nsIMsgOfflineImapOperation **offlineOp)</span>
<a href="#l14.26"></a><span id="l14.26"> {</span>
<a href="#l14.27"></a><span id="l14.27">   mdb_bool	hasOid;</span>
<a href="#l14.28"></a><span id="l14.28">   mdbOid		rowObjectId;</span>
<a href="#l14.29"></a><span id="l14.29">   nsresult err;</span>
<a href="#l14.30"></a><span id="l14.30"> </span>
<a href="#l14.31"></a><span id="l14.31" class="difflineminus">-  if (!IMAPOffline)</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineminus">-    IMAPOffline = PR_NewLogModule(&quot;IMAPOFFLINE&quot;);</span>
<a href="#l14.33"></a><span id="l14.33">   nsresult rv = GetAllOfflineOpsTable();</span>
<a href="#l14.34"></a><span id="l14.34">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l14.35"></a><span id="l14.35">   </span>
<a href="#l14.36"></a><span id="l14.36">   if (!offlineOp || !m_mdbAllOfflineOpsTable)</span>
<a href="#l14.37"></a><span id="l14.37">     return NS_ERROR_NULL_POINTER;</span>
<a href="#l14.38"></a><span id="l14.38">   </span>
<a href="#l14.39"></a><span id="l14.39">   *offlineOp = NULL;</span>
<a href="#l14.40"></a><span id="l14.40">   </span>
<a href="#l14.41"></a><span id="l14.41" class="difflineat">@@ -218,18 +216,16 @@ NS_IMETHODIMP nsMailDatabase::EnumerateO</span>
<a href="#l14.42"></a><span id="l14.42"> </span>
<a href="#l14.43"></a><span id="l14.43"> </span>
<a href="#l14.44"></a><span id="l14.44"> NS_IMETHODIMP nsMailDatabase::ListAllOfflineOpIds(nsTArray&lt;nsMsgKey&gt; *offlineOpIds)</span>
<a href="#l14.45"></a><span id="l14.45"> {</span>
<a href="#l14.46"></a><span id="l14.46">   NS_ENSURE_ARG(offlineOpIds);</span>
<a href="#l14.47"></a><span id="l14.47">   nsresult rv = GetAllOfflineOpsTable();</span>
<a href="#l14.48"></a><span id="l14.48">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l14.49"></a><span id="l14.49">   nsIMdbTableRowCursor *rowCursor;</span>
<a href="#l14.50"></a><span id="l14.50" class="difflineminus">-  if (!IMAPOffline)</span>
<a href="#l14.51"></a><span id="l14.51" class="difflineminus">-    IMAPOffline = PR_NewLogModule(&quot;IMAPOFFLINE&quot;);</span>
<a href="#l14.52"></a><span id="l14.52"> </span>
<a href="#l14.53"></a><span id="l14.53">   if (m_mdbAllOfflineOpsTable)</span>
<a href="#l14.54"></a><span id="l14.54">   {</span>
<a href="#l14.55"></a><span id="l14.55">     nsresult err = m_mdbAllOfflineOpsTable-&gt;GetTableRowCursor(GetEnv(), -1, &amp;rowCursor);</span>
<a href="#l14.56"></a><span id="l14.56">     while (NS_SUCCEEDED(err) &amp;&amp; rowCursor)</span>
<a href="#l14.57"></a><span id="l14.57">     {</span>
<a href="#l14.58"></a><span id="l14.58">       mdbOid outOid;</span>
<a href="#l14.59"></a><span id="l14.59">       mdb_pos	outPos;</span>
<a href="#l14.60"></a><span id="l14.60" class="difflineat">@@ -244,17 +240,17 @@ NS_IMETHODIMP nsMailDatabase::ListAllOff</span>
<a href="#l14.61"></a><span id="l14.61">         if (MOZ_LOG_TEST(IMAPOffline, LogLevel::Info))</span>
<a href="#l14.62"></a><span id="l14.62">         {</span>
<a href="#l14.63"></a><span id="l14.63">           nsCOMPtr &lt;nsIMsgOfflineImapOperation&gt; offlineOp;</span>
<a href="#l14.64"></a><span id="l14.64">           GetOfflineOpForKey(outOid.mOid_Id, false, getter_AddRefs(offlineOp));</span>
<a href="#l14.65"></a><span id="l14.65">           if (offlineOp)</span>
<a href="#l14.66"></a><span id="l14.66">           {</span>
<a href="#l14.67"></a><span id="l14.67">             nsMsgOfflineImapOperation *logOp = static_cast&lt;nsMsgOfflineImapOperation *&gt;(static_cast&lt;nsIMsgOfflineImapOperation *&gt;(offlineOp.get()));</span>
<a href="#l14.68"></a><span id="l14.68">             if (logOp)</span>
<a href="#l14.69"></a><span id="l14.69" class="difflineminus">-              logOp-&gt;Log(IMAPOffline);</span>
<a href="#l14.70"></a><span id="l14.70" class="difflineplus">+              logOp-&gt;Log();</span>
<a href="#l14.71"></a><span id="l14.71"> </span>
<a href="#l14.72"></a><span id="l14.72">           }</span>
<a href="#l14.73"></a><span id="l14.73">         }</span>
<a href="#l14.74"></a><span id="l14.74">       }</span>
<a href="#l14.75"></a><span id="l14.75">     }</span>
<a href="#l14.76"></a><span id="l14.76">     // TODO: would it cause a problem to replace this with &quot;rv = err;&quot; ?</span>
<a href="#l14.77"></a><span id="l14.77">     rv = (NS_SUCCEEDED(err)) ? NS_OK : NS_ERROR_FAILURE;</span>
<a href="#l14.78"></a><span id="l14.78">     rowCursor-&gt;Release();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mailnews/db/msgdb/src/nsMsgDatabase.cpp</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mailnews/db/msgdb/src/nsMsgDatabase.cpp</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -60,25 +60,24 @@ const int32_t kMaxHdrsInCache = 512;</span>
<a href="#l15.4"></a><span id="l15.4"> // special keys</span>
<a href="#l15.5"></a><span id="l15.5"> static const nsMsgKey kAllMsgHdrsTableKey = 1;</span>
<a href="#l15.6"></a><span id="l15.6"> static const nsMsgKey kTableKeyForThreadOne = 0xfffffffe;</span>
<a href="#l15.7"></a><span id="l15.7"> static const nsMsgKey kAllThreadsTableKey = 0xfffffffd;</span>
<a href="#l15.8"></a><span id="l15.8"> static const nsMsgKey kFirstPseudoKey = 0xfffffff0;</span>
<a href="#l15.9"></a><span id="l15.9"> static const nsMsgKey kIdStartOfFake = 0xffffff80;</span>
<a href="#l15.10"></a><span id="l15.10"> static const nsMsgKey kForceReparseKey = 0xfffffff0;</span>
<a href="#l15.11"></a><span id="l15.11"> </span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-static PRLogModuleInfo* DBLog;</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+static LazyLogModule DBLog(&quot;MSGDB&quot;);</span>
<a href="#l15.14"></a><span id="l15.14"> </span>
<a href="#l15.15"></a><span id="l15.15"> PRTime nsMsgDatabase::gLastUseTime;</span>
<a href="#l15.16"></a><span id="l15.16"> </span>
<a href="#l15.17"></a><span id="l15.17"> NS_IMPL_ISUPPORTS(nsMsgDBService, nsIMsgDBService)</span>
<a href="#l15.18"></a><span id="l15.18"> </span>
<a href="#l15.19"></a><span id="l15.19"> nsMsgDBService::nsMsgDBService()</span>
<a href="#l15.20"></a><span id="l15.20"> {</span>
<a href="#l15.21"></a><span id="l15.21" class="difflineminus">-  DBLog = PR_NewLogModule(&quot;MSGDB&quot;);</span>
<a href="#l15.22"></a><span id="l15.22"> }</span>
<a href="#l15.23"></a><span id="l15.23"> </span>
<a href="#l15.24"></a><span id="l15.24"> </span>
<a href="#l15.25"></a><span id="l15.25"> nsMsgDBService::~nsMsgDBService()</span>
<a href="#l15.26"></a><span id="l15.26"> {</span>
<a href="#l15.27"></a><span id="l15.27"> #ifdef DEBUG</span>
<a href="#l15.28"></a><span id="l15.28">   // If you hit this warning, it means that some code is holding onto</span>
<a href="#l15.29"></a><span id="l15.29">   // a db at shutdown.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mailnews/db/msgdb/src/nsMsgOfflineImapOperation.cpp</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mailnews/db/msgdb/src/nsMsgOfflineImapOperation.cpp</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -5,17 +5,17 @@</span>
<a href="#l16.4"></a><span id="l16.4"> </span>
<a href="#l16.5"></a><span id="l16.5"> #include &quot;msgCore.h&quot;</span>
<a href="#l16.6"></a><span id="l16.6"> #include &quot;nsMsgOfflineImapOperation.h&quot;</span>
<a href="#l16.7"></a><span id="l16.7"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l16.8"></a><span id="l16.8"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l16.9"></a><span id="l16.9"> </span>
<a href="#l16.10"></a><span id="l16.10"> using namespace mozilla;</span>
<a href="#l16.11"></a><span id="l16.11"> </span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-PRLogModuleInfo *IMAPOffline;</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+static LazyLogModule IMAPOffline(&quot;IMAPOFFLINE&quot;);</span>
<a href="#l16.14"></a><span id="l16.14"> </span>
<a href="#l16.15"></a><span id="l16.15"> /* Implementation file */</span>
<a href="#l16.16"></a><span id="l16.16"> NS_IMPL_ISUPPORTS(nsMsgOfflineImapOperation, nsIMsgOfflineImapOperation)</span>
<a href="#l16.17"></a><span id="l16.17"> </span>
<a href="#l16.18"></a><span id="l16.18"> // property names for offine imap operation fields.</span>
<a href="#l16.19"></a><span id="l16.19"> #define PROP_OPERATION &quot;op&quot;</span>
<a href="#l16.20"></a><span id="l16.20"> #define PROP_OPERATION_FLAGS &quot;opFlags&quot;</span>
<a href="#l16.21"></a><span id="l16.21"> #define PROP_NEW_FLAGS &quot;newFlags&quot;</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineat">@@ -337,20 +337,18 @@ NS_IMETHODIMP nsMsgOfflineImapOperation:</span>
<a href="#l16.23"></a><span id="l16.23"> </span>
<a href="#l16.24"></a><span id="l16.24"> NS_IMETHODIMP nsMsgOfflineImapOperation::GetPlayingBack(bool *aPlayingBack)</span>
<a href="#l16.25"></a><span id="l16.25"> {</span>
<a href="#l16.26"></a><span id="l16.26">   NS_ENSURE_ARG(aPlayingBack);</span>
<a href="#l16.27"></a><span id="l16.27">   return m_mdb-&gt;GetBooleanProperty(m_mdbRow, PROP_PLAYINGBACK, aPlayingBack);</span>
<a href="#l16.28"></a><span id="l16.28"> }</span>
<a href="#l16.29"></a><span id="l16.29"> </span>
<a href="#l16.30"></a><span id="l16.30"> </span>
<a href="#l16.31"></a><span id="l16.31" class="difflineminus">-void nsMsgOfflineImapOperation::Log(PRLogModuleInfo *logFile)</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineplus">+void nsMsgOfflineImapOperation::Log()</span>
<a href="#l16.33"></a><span id="l16.33"> {</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineminus">-  if (!IMAPOffline)</span>
<a href="#l16.35"></a><span id="l16.35" class="difflineminus">-    IMAPOffline = PR_NewLogModule(&quot;IMAPOFFLINE&quot;);</span>
<a href="#l16.36"></a><span id="l16.36">   if (!MOZ_LOG_TEST(IMAPOffline, LogLevel::Info))</span>
<a href="#l16.37"></a><span id="l16.37">     return;</span>
<a href="#l16.38"></a><span id="l16.38">   //  const long kMoveResult              = 0x8;</span>
<a href="#l16.39"></a><span id="l16.39">   //  const long kAppendDraft           = 0x10;</span>
<a href="#l16.40"></a><span id="l16.40">   //  const long kAddedHeader           = 0x20;</span>
<a href="#l16.41"></a><span id="l16.41">   //  const long kDeletedMsg              = 0x40;</span>
<a href="#l16.42"></a><span id="l16.42">   //  const long kMsgMarkedDeleted = 0x80;</span>
<a href="#l16.43"></a><span id="l16.43">   //  const long kAppendTemplate      = 0x100;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mailnews/db/msgdb/src/nsMsgOfflineImapOperation.h</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mailnews/db/msgdb/src/nsMsgOfflineImapOperation.h</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -16,17 +16,17 @@ public:</span>
<a href="#l17.4"></a><span id="l17.4">   nsMsgOfflineImapOperation(nsMsgDatabase *db, nsIMdbRow *row);</span>
<a href="#l17.5"></a><span id="l17.5">   NS_DECL_ISUPPORTS</span>
<a href="#l17.6"></a><span id="l17.6">   NS_DECL_NSIMSGOFFLINEIMAPOPERATION</span>
<a href="#l17.7"></a><span id="l17.7"> </span>
<a href="#l17.8"></a><span id="l17.8"> </span>
<a href="#l17.9"></a><span id="l17.9">   nsIMdbRow   *GetMDBRow() {return m_mdbRow;}</span>
<a href="#l17.10"></a><span id="l17.10">   nsresult    GetCopiesFromDB();</span>
<a href="#l17.11"></a><span id="l17.11">   nsresult    SetCopiesToDB();</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-  void        Log(PRLogModuleInfo *logFile);</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+  void        Log();</span>
<a href="#l17.14"></a><span id="l17.14"> protected:</span>
<a href="#l17.15"></a><span id="l17.15">   virtual ~nsMsgOfflineImapOperation();</span>
<a href="#l17.16"></a><span id="l17.16">   nsresult AddKeyword(const char *aKeyword, nsCString &amp;addList, const char *addProp,</span>
<a href="#l17.17"></a><span id="l17.17">                       nsCString &amp;removeList, const char *removeProp);</span>
<a href="#l17.18"></a><span id="l17.18"> </span>
<a href="#l17.19"></a><span id="l17.19">   nsOfflineImapOperationType m_operation;</span>
<a href="#l17.20"></a><span id="l17.20">   nsMsgKey          m_messageKey;</span>
<a href="#l17.21"></a><span id="l17.21">   nsMsgKey          m_sourceMessageKey;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -46,17 +46,17 @@ using namespace mozilla;</span>
<a href="#l18.4"></a><span id="l18.4"> #include &lt;math.h&gt;</span>
<a href="#l18.5"></a><span id="l18.5"> #include &lt;prmem.h&gt;</span>
<a href="#l18.6"></a><span id="l18.6"> #include &quot;nsIMsgTraitService.h&quot;</span>
<a href="#l18.7"></a><span id="l18.7"> #include &quot;mozilla/Services.h&quot;</span>
<a href="#l18.8"></a><span id="l18.8"> #include &quot;mozilla/Attributes.h&quot;</span>
<a href="#l18.9"></a><span id="l18.9"> #include &lt;cstdlib&gt; // for std::abs(int/long)</span>
<a href="#l18.10"></a><span id="l18.10"> #include &lt;cmath&gt; // for std::abs(float/double)</span>
<a href="#l18.11"></a><span id="l18.11"> </span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-static PRLogModuleInfo *BayesianFilterLogModule = nullptr;</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+static mozilla::LazyLogModule BayesianFilterLogModule(&quot;BayesianFilter&quot;);</span>
<a href="#l18.14"></a><span id="l18.14"> </span>
<a href="#l18.15"></a><span id="l18.15"> #define kDefaultJunkThreshold .99 // we override this value via a pref</span>
<a href="#l18.16"></a><span id="l18.16"> static const char* kBayesianFilterTokenDelimiters = &quot; \t\n\r\f.&quot;;</span>
<a href="#l18.17"></a><span id="l18.17"> static unsigned int kMinLengthForToken = 3; // lower bound on the number of characters in a word before we treat it as a token</span>
<a href="#l18.18"></a><span id="l18.18"> static unsigned int kMaxLengthForToken = 12; // upper bound on the number of characters in a word to be declared as a token</span>
<a href="#l18.19"></a><span id="l18.19"> </span>
<a href="#l18.20"></a><span id="l18.20"> #define FORGED_RECEIVED_HEADER_HINT NS_LITERAL_CSTRING(&quot;may be forged&quot;)</span>
<a href="#l18.21"></a><span id="l18.21"> </span>
<a href="#l18.22"></a><span id="l18.22" class="difflineat">@@ -1106,19 +1106,16 @@ NS_IMETHODIMP TokenStreamListener::OnSto</span>
<a href="#l18.23"></a><span id="l18.23"> </span>
<a href="#l18.24"></a><span id="l18.24"> NS_IMPL_ISUPPORTS(nsBayesianFilter, nsIMsgFilterPlugin,</span>
<a href="#l18.25"></a><span id="l18.25">                    nsIJunkMailPlugin, nsIMsgCorpus, nsISupportsWeakReference,</span>
<a href="#l18.26"></a><span id="l18.26">                    nsIObserver)</span>
<a href="#l18.27"></a><span id="l18.27"> </span>
<a href="#l18.28"></a><span id="l18.28"> nsBayesianFilter::nsBayesianFilter()</span>
<a href="#l18.29"></a><span id="l18.29">     :   mTrainingDataDirty(false)</span>
<a href="#l18.30"></a><span id="l18.30"> {</span>
<a href="#l18.31"></a><span id="l18.31" class="difflineminus">-    if (!BayesianFilterLogModule)</span>
<a href="#l18.32"></a><span id="l18.32" class="difflineminus">-      BayesianFilterLogModule = PR_NewLogModule(&quot;BayesianFilter&quot;);</span>
<a href="#l18.33"></a><span id="l18.33" class="difflineminus">-</span>
<a href="#l18.34"></a><span id="l18.34">     int32_t junkThreshold = 0;</span>
<a href="#l18.35"></a><span id="l18.35">     nsresult rv;</span>
<a href="#l18.36"></a><span id="l18.36">     nsCOMPtr&lt;nsIPrefBranch&gt; pPrefBranch(do_GetService(NS_PREFSERVICE_CONTRACTID, &amp;rv));</span>
<a href="#l18.37"></a><span id="l18.37">     if (pPrefBranch)</span>
<a href="#l18.38"></a><span id="l18.38">       pPrefBranch-&gt;GetIntPref(&quot;mail.adaptivefilters.junk_threshold&quot;, &amp;junkThreshold);</span>
<a href="#l18.39"></a><span id="l18.39"> </span>
<a href="#l18.40"></a><span id="l18.40">     mJunkProbabilityThreshold = (static_cast&lt;double&gt;(junkThreshold)) / 100.0;</span>
<a href="#l18.41"></a><span id="l18.41">     if (mJunkProbabilityThreshold == 0 || mJunkProbabilityThreshold &gt;= 1)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mailnews/imap/src/nsAutoSyncManager.cpp</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mailnews/imap/src/nsAutoSyncManager.cpp</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -23,17 +23,17 @@</span>
<a href="#l19.4"></a><span id="l19.4"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l19.5"></a><span id="l19.5"> </span>
<a href="#l19.6"></a><span id="l19.6"> using namespace mozilla;</span>
<a href="#l19.7"></a><span id="l19.7"> </span>
<a href="#l19.8"></a><span id="l19.8"> NS_IMPL_ISUPPORTS(nsDefaultAutoSyncMsgStrategy, nsIAutoSyncMsgStrategy)</span>
<a href="#l19.9"></a><span id="l19.9"> </span>
<a href="#l19.10"></a><span id="l19.10"> const char* kAppIdleNotification = &quot;mail:appIdle&quot;;</span>
<a href="#l19.11"></a><span id="l19.11"> const char* kStartupDoneNotification = &quot;mail-startup-done&quot;;</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-PRLogModuleInfo *gAutoSyncLog;</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+static LazyLogModule gAutoSyncLog(&quot;ImapAutoSync&quot;);</span>
<a href="#l19.14"></a><span id="l19.14"> </span>
<a href="#l19.15"></a><span id="l19.15"> // recommended size of each group of messages per download</span>
<a href="#l19.16"></a><span id="l19.16"> static const uint32_t kDefaultGroupSize = 50U*1024U /* 50K */;</span>
<a href="#l19.17"></a><span id="l19.17"> </span>
<a href="#l19.18"></a><span id="l19.18"> nsDefaultAutoSyncMsgStrategy::nsDefaultAutoSyncMsgStrategy()</span>
<a href="#l19.19"></a><span id="l19.19"> {</span>
<a href="#l19.20"></a><span id="l19.20"> }</span>
<a href="#l19.21"></a><span id="l19.21"> </span>
<a href="#l19.22"></a><span id="l19.22" class="difflineat">@@ -234,17 +234,16 @@ nsAutoSyncManager::nsAutoSyncManager()</span>
<a href="#l19.23"></a><span id="l19.23"> </span>
<a href="#l19.24"></a><span id="l19.24">   rv = observerService-&gt;AddObserver(this,</span>
<a href="#l19.25"></a><span id="l19.25">                                     NS_XPCOM_SHUTDOWN_OBSERVER_ID,</span>
<a href="#l19.26"></a><span id="l19.26">                                     false);</span>
<a href="#l19.27"></a><span id="l19.27">   observerService-&gt;AddObserver(this, kAppIdleNotification, false);</span>
<a href="#l19.28"></a><span id="l19.28">   observerService-&gt;AddObserver(this, NS_IOSERVICE_OFFLINE_STATUS_TOPIC, false);</span>
<a href="#l19.29"></a><span id="l19.29">   observerService-&gt;AddObserver(this, NS_IOSERVICE_GOING_OFFLINE_TOPIC, false);</span>
<a href="#l19.30"></a><span id="l19.30">   observerService-&gt;AddObserver(this, kStartupDoneNotification, false);</span>
<a href="#l19.31"></a><span id="l19.31" class="difflineminus">-  gAutoSyncLog = PR_NewLogModule(&quot;ImapAutoSync&quot;);</span>
<a href="#l19.32"></a><span id="l19.32"> }</span>
<a href="#l19.33"></a><span id="l19.33"> </span>
<a href="#l19.34"></a><span id="l19.34"> nsAutoSyncManager::~nsAutoSyncManager()</span>
<a href="#l19.35"></a><span id="l19.35"> {</span>
<a href="#l19.36"></a><span id="l19.36"> }</span>
<a href="#l19.37"></a><span id="l19.37"> </span>
<a href="#l19.38"></a><span id="l19.38"> void nsAutoSyncManager::InitTimer()</span>
<a href="#l19.39"></a><span id="l19.39"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mailnews/imap/src/nsAutoSyncState.cpp</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mailnews/imap/src/nsAutoSyncState.cpp</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -16,17 +16,17 @@</span>
<a href="#l20.4"></a><span id="l20.4"> #include &quot;nsComponentManagerUtils.h&quot;</span>
<a href="#l20.5"></a><span id="l20.5"> #include &quot;nsIMutableArray.h&quot;</span>
<a href="#l20.6"></a><span id="l20.6"> #include &quot;nsArrayUtils.h&quot;</span>
<a href="#l20.7"></a><span id="l20.7"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l20.8"></a><span id="l20.8"> #include &quot;mozilla/SizePrintfMacros.h&quot;</span>
<a href="#l20.9"></a><span id="l20.9"> </span>
<a href="#l20.10"></a><span id="l20.10"> using namespace mozilla;</span>
<a href="#l20.11"></a><span id="l20.11"> </span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-extern PRLogModuleInfo *gAutoSyncLog;</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+static LazyLogModule gAutoSyncLog(&quot;ImapAutoSync&quot;);</span>
<a href="#l20.14"></a><span id="l20.14"> </span>
<a href="#l20.15"></a><span id="l20.15"> MsgStrategyComparatorAdaptor::MsgStrategyComparatorAdaptor(nsIAutoSyncMsgStrategy* aStrategy, </span>
<a href="#l20.16"></a><span id="l20.16">   nsIMsgFolder *aFolder, nsIMsgDatabase *aDatabase) : mStrategy(aStrategy), mFolder(aFolder), </span>
<a href="#l20.17"></a><span id="l20.17">     mDatabase(aDatabase)</span>
<a href="#l20.18"></a><span id="l20.18"> {</span>
<a href="#l20.19"></a><span id="l20.19"> }</span>
<a href="#l20.20"></a><span id="l20.20"> </span>
<a href="#l20.21"></a><span id="l20.21"> /** @return True if the elements are equals; false otherwise. */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mailnews/imap/src/nsImapMailFolder.cpp</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapMailFolder.cpp</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -97,18 +97,18 @@</span>
<a href="#l21.4"></a><span id="l21.4"> #include &quot;mozilla/Attributes.h&quot;</span>
<a href="#l21.5"></a><span id="l21.5"> #include &quot;nsStringStream.h&quot;</span>
<a href="#l21.6"></a><span id="l21.6"> #include &quot;nsIStreamListener.h&quot;</span>
<a href="#l21.7"></a><span id="l21.7"> </span>
<a href="#l21.8"></a><span id="l21.8"> static NS_DEFINE_CID(kRDFServiceCID, NS_RDFSERVICE_CID);</span>
<a href="#l21.9"></a><span id="l21.9"> static NS_DEFINE_CID(kParseMailMsgStateCID, NS_PARSEMAILMSGSTATE_CID);</span>
<a href="#l21.10"></a><span id="l21.10"> static NS_DEFINE_CID(kCImapHostSessionList, NS_IIMAPHOSTSESSIONLIST_CID);</span>
<a href="#l21.11"></a><span id="l21.11"> </span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-extern PRLogModuleInfo *gAutoSyncLog;</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineminus">-extern PRLogModuleInfo* IMAP;</span>
<a href="#l21.14"></a><span id="l21.14" class="difflineplus">+static mozilla::LazyLogModule gAutoSyncLog(&quot;ImapAutoSync&quot;);</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineplus">+static mozilla::LazyLogModule IMAP(&quot;IMAP&quot;);</span>
<a href="#l21.16"></a><span id="l21.16"> </span>
<a href="#l21.17"></a><span id="l21.17"> #define MAILNEWS_CUSTOM_HEADERS &quot;mailnews.customHeaders&quot;</span>
<a href="#l21.18"></a><span id="l21.18"> </span>
<a href="#l21.19"></a><span id="l21.19"> /*</span>
<a href="#l21.20"></a><span id="l21.20">     Copies the contents of srcDir into destDir.</span>
<a href="#l21.21"></a><span id="l21.21">     destDir will be created if it doesn't exist.</span>
<a href="#l21.22"></a><span id="l21.22"> */</span>
<a href="#l21.23"></a><span id="l21.23"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mailnews/imap/src/nsImapProtocol.cpp</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapProtocol.cpp</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -53,17 +53,17 @@</span>
<a href="#l22.4"></a><span id="l22.4"> #include &quot;nsIWindowWatcher.h&quot;</span>
<a href="#l22.5"></a><span id="l22.5"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l22.6"></a><span id="l22.6"> #include &quot;nsMimeTypes.h&quot;</span>
<a href="#l22.7"></a><span id="l22.7"> #include &quot;nsIInterfaceRequestor.h&quot;</span>
<a href="#l22.8"></a><span id="l22.8"> #include &quot;nsXPCOMCIDInternal.h&quot;</span>
<a href="#l22.9"></a><span id="l22.9"> #include &quot;nsIXULAppInfo.h&quot;</span>
<a href="#l22.10"></a><span id="l22.10"> #include &quot;nsSyncRunnableHelpers.h&quot;</span>
<a href="#l22.11"></a><span id="l22.11"> </span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-PRLogModuleInfo *IMAP;</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+static mozilla::LazyLogModule IMAP(&quot;IMAP&quot;);</span>
<a href="#l22.14"></a><span id="l22.14"> </span>
<a href="#l22.15"></a><span id="l22.15"> // netlib required files</span>
<a href="#l22.16"></a><span id="l22.16"> #include &quot;nsIStreamListener.h&quot;</span>
<a href="#l22.17"></a><span id="l22.17"> #include &quot;nsIMsgIncomingServer.h&quot;</span>
<a href="#l22.18"></a><span id="l22.18"> #include &quot;nsIImapIncomingServer.h&quot;</span>
<a href="#l22.19"></a><span id="l22.19"> #include &quot;nsIPrefBranch.h&quot;</span>
<a href="#l22.20"></a><span id="l22.20"> #include &quot;nsIPrefService.h&quot;</span>
<a href="#l22.21"></a><span id="l22.21"> #include &quot;nsIPrefLocalizedString.h&quot;</span>
<a href="#l22.22"></a><span id="l22.22" class="difflineat">@@ -499,20 +499,16 @@ nsImapProtocol::nsImapProtocol() : nsMsg</span>
<a href="#l22.23"></a><span id="l22.23">   m_autoUnsubscribe = true;</span>
<a href="#l22.24"></a><span id="l22.24">   m_autoSubscribeOnOpen = true;</span>
<a href="#l22.25"></a><span id="l22.25">   m_deletableChildren = nullptr;</span>
<a href="#l22.26"></a><span id="l22.26"> </span>
<a href="#l22.27"></a><span id="l22.27">   mFolderLastModSeq = 0;</span>
<a href="#l22.28"></a><span id="l22.28"> </span>
<a href="#l22.29"></a><span id="l22.29">   Configure(gTooFastTime, gIdealTime, gChunkAddSize, gChunkSize,</span>
<a href="#l22.30"></a><span id="l22.30">                     gChunkThreshold, gFetchByChunks);</span>
<a href="#l22.31"></a><span id="l22.31" class="difflineminus">-</span>
<a href="#l22.32"></a><span id="l22.32" class="difflineminus">-  // where should we do this? Perhaps in the factory object?</span>
<a href="#l22.33"></a><span id="l22.33" class="difflineminus">-  if (!IMAP)</span>
<a href="#l22.34"></a><span id="l22.34" class="difflineminus">-    IMAP = PR_NewLogModule(&quot;IMAP&quot;);</span>
<a href="#l22.35"></a><span id="l22.35"> }</span>
<a href="#l22.36"></a><span id="l22.36"> </span>
<a href="#l22.37"></a><span id="l22.37"> nsresult nsImapProtocol::Configure(int32_t TooFastTime, int32_t IdealTime,</span>
<a href="#l22.38"></a><span id="l22.38">                   int32_t ChunkAddSize, int32_t ChunkSize, int32_t ChunkThreshold,</span>
<a href="#l22.39"></a><span id="l22.39">                   bool FetchByChunks)</span>
<a href="#l22.40"></a><span id="l22.40"> {</span>
<a href="#l22.41"></a><span id="l22.41">   m_tooFastTime = TooFastTime;    // secs we read too little too fast</span>
<a href="#l22.42"></a><span id="l22.42">   m_idealTime = IdealTime;    // secs we read enough in good time</span>
<a href="#l22.43"></a><span id="l22.43" class="difflineat">@@ -4469,20 +4465,16 @@ void nsImapProtocol::SendSetBiffIndicato</span>
<a href="#l22.44"></a><span id="l22.44"> </span>
<a href="#l22.45"></a><span id="l22.45"> bool nsImapProtocol::CheckNewMail()</span>
<a href="#l22.46"></a><span id="l22.46"> {</span>
<a href="#l22.47"></a><span id="l22.47">   return m_checkForNewMailDownloadsHeaders;</span>
<a href="#l22.48"></a><span id="l22.48"> }</span>
<a href="#l22.49"></a><span id="l22.49"> </span>
<a href="#l22.50"></a><span id="l22.50"> /* static */ void nsImapProtocol::LogImapUrl(const char *logMsg, nsIImapUrl *imapUrl)</span>
<a href="#l22.51"></a><span id="l22.51"> {</span>
<a href="#l22.52"></a><span id="l22.52" class="difflineminus">-  // nsImapProtocol is not always constructed before this static method is called</span>
<a href="#l22.53"></a><span id="l22.53" class="difflineminus">-  if (!IMAP)</span>
<a href="#l22.54"></a><span id="l22.54" class="difflineminus">-    IMAP = PR_NewLogModule(&quot;IMAP&quot;);</span>
<a href="#l22.55"></a><span id="l22.55" class="difflineminus">-</span>
<a href="#l22.56"></a><span id="l22.56">   if (MOZ_LOG_TEST(IMAP, LogLevel::Info))</span>
<a href="#l22.57"></a><span id="l22.57">   {</span>
<a href="#l22.58"></a><span id="l22.58">     nsCOMPtr&lt;nsIMsgMailNewsUrl&gt; mailnewsUrl = do_QueryInterface(imapUrl);</span>
<a href="#l22.59"></a><span id="l22.59">     if (mailnewsUrl)</span>
<a href="#l22.60"></a><span id="l22.60">     {</span>
<a href="#l22.61"></a><span id="l22.61">       nsAutoCString urlSpec, unescapedUrlSpec;</span>
<a href="#l22.62"></a><span id="l22.62">       nsresult rv = mailnewsUrl-&gt;GetSpec(urlSpec);</span>
<a href="#l22.63"></a><span id="l22.63">       if (NS_FAILED(rv))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mailnews/imap/src/nsImapServerResponseParser.cpp</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapServerResponseParser.cpp</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -14,17 +14,17 @@</span>
<a href="#l23.4"></a><span id="l23.4"> #include &quot;nsImapStringBundle.h&quot;</span>
<a href="#l23.5"></a><span id="l23.5"> #include &quot;nsImapUtils.h&quot;</span>
<a href="#l23.6"></a><span id="l23.6"> #include &quot;nsCRT.h&quot;</span>
<a href="#l23.7"></a><span id="l23.7"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l23.8"></a><span id="l23.8"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l23.9"></a><span id="l23.9"> </span>
<a href="#l23.10"></a><span id="l23.10"> ////////////////// nsImapServerResponseParser /////////////////////////</span>
<a href="#l23.11"></a><span id="l23.11"> </span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-extern PRLogModuleInfo* IMAP;</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+static mozilla::LazyLogModule IMAP(&quot;IMAP&quot;);</span>
<a href="#l23.14"></a><span id="l23.14"> </span>
<a href="#l23.15"></a><span id="l23.15"> nsImapServerResponseParser::nsImapServerResponseParser(nsImapProtocol &amp;imapProtocolConnection)</span>
<a href="#l23.16"></a><span id="l23.16">                             : nsIMAPGenericParser(),</span>
<a href="#l23.17"></a><span id="l23.17">     fReportingErrors(true),</span>
<a href="#l23.18"></a><span id="l23.18">     fCurrentFolderReadOnly(false),</span>
<a href="#l23.19"></a><span id="l23.19">     fCurrentLineContainedFlagInfo(false),</span>
<a href="#l23.20"></a><span id="l23.20">     fServerIsNetscape3xServer(false),</span>
<a href="#l23.21"></a><span id="l23.21">     fNumberOfUnseenMessages(0),</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mailnews/import/applemail/src/nsAppleMailImport.cpp</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mailnews/import/applemail/src/nsAppleMailImport.cpp</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -18,35 +18,31 @@</span>
<a href="#l24.4"></a><span id="l24.4"> #include &quot;nsNetUtil.h&quot;</span>
<a href="#l24.5"></a><span id="l24.5"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l24.6"></a><span id="l24.6"> #include &quot;mozilla/Services.h&quot;</span>
<a href="#l24.7"></a><span id="l24.7"> </span>
<a href="#l24.8"></a><span id="l24.8"> #include &quot;nsEmlxHelperUtils.h&quot;</span>
<a href="#l24.9"></a><span id="l24.9"> #include &quot;nsAppleMailImport.h&quot;</span>
<a href="#l24.10"></a><span id="l24.10"> #include &quot;nsIOutputStream.h&quot;</span>
<a href="#l24.11"></a><span id="l24.11"> </span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-PRLogModuleInfo *APPLEMAILLOGMODULE = nullptr;</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+static mozilla::LazyLogModule APPLEMAILLOGMODULE(&quot;APPLEMAILIMPORTLOG&quot;);</span>
<a href="#l24.14"></a><span id="l24.14"> </span>
<a href="#l24.15"></a><span id="l24.15"> // some hard-coded strings</span>
<a href="#l24.16"></a><span id="l24.16"> #define DEFAULT_MAIL_FOLDER &quot;~/Library/Mail/&quot;</span>
<a href="#l24.17"></a><span id="l24.17"> #define POP_MBOX_SUFFIX &quot;.mbox&quot;</span>
<a href="#l24.18"></a><span id="l24.18"> #define IMAP_MBOX_SUFFIX &quot;.imapmbox&quot;</span>
<a href="#l24.19"></a><span id="l24.19"> </span>
<a href="#l24.20"></a><span id="l24.20"> // stringbundle URI</span>
<a href="#l24.21"></a><span id="l24.21"> #define APPLEMAIL_MSGS_URL &quot;chrome://messenger/locale/appleMailImportMsgs.properties&quot;</span>
<a href="#l24.22"></a><span id="l24.22"> </span>
<a href="#l24.23"></a><span id="l24.23"> // magic constants</span>
<a href="#l24.24"></a><span id="l24.24"> #define kAccountMailboxID 1234</span>
<a href="#l24.25"></a><span id="l24.25"> </span>
<a href="#l24.26"></a><span id="l24.26"> nsAppleMailImportModule::nsAppleMailImportModule()</span>
<a href="#l24.27"></a><span id="l24.27"> {</span>
<a href="#l24.28"></a><span id="l24.28" class="difflineminus">-  // Init logging module.</span>
<a href="#l24.29"></a><span id="l24.29" class="difflineminus">-  if (!APPLEMAILLOGMODULE)</span>
<a href="#l24.30"></a><span id="l24.30" class="difflineminus">-    APPLEMAILLOGMODULE = PR_NewLogModule(&quot;APPLEMAILIMPORTLOG&quot;);</span>
<a href="#l24.31"></a><span id="l24.31" class="difflineminus">-</span>
<a href="#l24.32"></a><span id="l24.32">   IMPORT_LOG0(&quot;nsAppleMailImportModule Created&quot;);</span>
<a href="#l24.33"></a><span id="l24.33"> </span>
<a href="#l24.34"></a><span id="l24.34">   nsCOMPtr&lt;nsIStringBundleService&gt; bundleService =</span>
<a href="#l24.35"></a><span id="l24.35">     mozilla::services::GetStringBundleService();</span>
<a href="#l24.36"></a><span id="l24.36">   if (bundleService)</span>
<a href="#l24.37"></a><span id="l24.37">     bundleService-&gt;CreateBundle(APPLEMAIL_MSGS_URL, getter_AddRefs(mBundle));</span>
<a href="#l24.38"></a><span id="l24.38"> }</span>
<a href="#l24.39"></a><span id="l24.39"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mailnews/import/applemail/src/nsAppleMailImport.h</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mailnews/import/applemail/src/nsAppleMailImport.h</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -8,17 +8,17 @@</span>
<a href="#l25.4"></a><span id="l25.4"> </span>
<a href="#l25.5"></a><span id="l25.5"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l25.6"></a><span id="l25.6"> #include &quot;nsIImportModule.h&quot;</span>
<a href="#l25.7"></a><span id="l25.7"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l25.8"></a><span id="l25.8"> #include &quot;nsIStringBundle.h&quot;</span>
<a href="#l25.9"></a><span id="l25.9"> #include &quot;nsIImportMail.h&quot;</span>
<a href="#l25.10"></a><span id="l25.10"> </span>
<a href="#l25.11"></a><span id="l25.11"> // logging facilities</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-extern PRLogModuleInfo *APPLEMAILLOGMODULE;</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+static mozilla::LazyLogModule APPLEMAILLOGMODULE(&quot;APPLEMAILIMPORTLOG&quot;);</span>
<a href="#l25.14"></a><span id="l25.14"> </span>
<a href="#l25.15"></a><span id="l25.15"> #define IMPORT_LOG0(x)          MOZ_LOG(APPLEMAILLOGMODULE, mozilla::LogLevel::Debug, (x))</span>
<a href="#l25.16"></a><span id="l25.16"> #define IMPORT_LOG1(x, y)       MOZ_LOG(APPLEMAILLOGMODULE, mozilla::LogLevel::Debug, (x, y))</span>
<a href="#l25.17"></a><span id="l25.17"> #define IMPORT_LOG2(x, y, z)    MOZ_LOG(APPLEMAILLOGMODULE, mozilla::LogLevel::Debug, (x, y, z))</span>
<a href="#l25.18"></a><span id="l25.18"> #define IMPORT_LOG3(a, b, c, d) MOZ_LOG(APPLEMAILLOGMODULE, mozilla::LogLevel::Debug, (a, b, c, d))</span>
<a href="#l25.19"></a><span id="l25.19"> </span>
<a href="#l25.20"></a><span id="l25.20"> #define NS_APPLEMAILIMPL_CID \</span>
<a href="#l25.21"></a><span id="l25.21"> { 0x9117a1ea, 0xe012, 0x43b5, { 0xa0, 0x20, 0xcb, 0x8a, 0x66, 0xcc, 0x09, 0xe1 } }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mailnews/import/outlook/src/OutlookDebugLog.h</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mailnews/import/outlook/src/OutlookDebugLog.h</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -5,19 +5,18 @@</span>
<a href="#l26.4"></a><span id="l26.4"> </span>
<a href="#l26.5"></a><span id="l26.5"> #ifndef OutlookDebugLog_h___</span>
<a href="#l26.6"></a><span id="l26.6"> #define OutlookDebugLog_h___</span>
<a href="#l26.7"></a><span id="l26.7"> </span>
<a href="#l26.8"></a><span id="l26.8"> #ifdef NS_DEBUG</span>
<a href="#l26.9"></a><span id="l26.9"> #define IMPORT_DEBUG  1</span>
<a href="#l26.10"></a><span id="l26.10"> #endif</span>
<a href="#l26.11"></a><span id="l26.11"> </span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-// Use PR_LOG for logging.</span>
<a href="#l26.13"></a><span id="l26.13"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l26.14"></a><span id="l26.14" class="difflineminus">-extern PRLogModuleInfo *OUTLOOKLOGMODULE;  // Logging module</span>
<a href="#l26.15"></a><span id="l26.15" class="difflineplus">+static mozilla::LazyLogModule OUTLOOKLOGMODULE(&quot;IMPORT&quot;);  // Logging module</span>
<a href="#l26.16"></a><span id="l26.16"> </span>
<a href="#l26.17"></a><span id="l26.17"> #define IMPORT_LOG0(x)          MOZ_LOG(OUTLOOKLOGMODULE, mozilla::LogLevel::Debug, (x))</span>
<a href="#l26.18"></a><span id="l26.18"> #define IMPORT_LOG1(x, y)       MOZ_LOG(OUTLOOKLOGMODULE, mozilla::LogLevel::Debug, (x, y))</span>
<a href="#l26.19"></a><span id="l26.19"> #define IMPORT_LOG2(x, y, z)    MOZ_LOG(OUTLOOKLOGMODULE, mozilla::LogLevel::Debug, (x, y, z))</span>
<a href="#l26.20"></a><span id="l26.20"> #define IMPORT_LOG3(a, b, c, d) MOZ_LOG(OUTLOOKLOGMODULE, mozilla::LogLevel::Debug, (a, b, c, d))</span>
<a href="#l26.21"></a><span id="l26.21"> </span>
<a href="#l26.22"></a><span id="l26.22"> </span>
<a href="#l26.23"></a><span id="l26.23"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mailnews/import/outlook/src/nsOutlookImport.cpp</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mailnews/import/outlook/src/nsOutlookImport.cpp</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -32,17 +32,16 @@</span>
<a href="#l27.4"></a><span id="l27.4"> #include &quot;OutlookDebugLog.h&quot;</span>
<a href="#l27.5"></a><span id="l27.5"> #include &quot;nsUnicharUtils.h&quot;</span>
<a href="#l27.6"></a><span id="l27.6"> </span>
<a href="#l27.7"></a><span id="l27.7"> #include &quot;nsOutlookMail.h&quot;</span>
<a href="#l27.8"></a><span id="l27.8"> </span>
<a href="#l27.9"></a><span id="l27.9"> #include &quot;MapiApi.h&quot;</span>
<a href="#l27.10"></a><span id="l27.10"> </span>
<a href="#l27.11"></a><span id="l27.11"> static NS_DEFINE_IID(kISupportsIID,      NS_ISUPPORTS_IID);</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-PRLogModuleInfo *OUTLOOKLOGMODULE = nullptr;</span>
<a href="#l27.13"></a><span id="l27.13"> </span>
<a href="#l27.14"></a><span id="l27.14"> class ImportOutlookMailImpl : public nsIImportMail</span>
<a href="#l27.15"></a><span id="l27.15"> {</span>
<a href="#l27.16"></a><span id="l27.16"> public:</span>
<a href="#l27.17"></a><span id="l27.17">   ImportOutlookMailImpl();</span>
<a href="#l27.18"></a><span id="l27.18"> </span>
<a href="#l27.19"></a><span id="l27.19">   static nsresult Create(nsIImportMail** aImport);</span>
<a href="#l27.20"></a><span id="l27.20"> </span>
<a href="#l27.21"></a><span id="l27.21" class="difflineat">@@ -133,20 +132,16 @@ private:</span>
<a href="#l27.22"></a><span id="l27.22"> ////////////////////////////////////////////////////////////////////////</span>
<a href="#l27.23"></a><span id="l27.23"> </span>
<a href="#l27.24"></a><span id="l27.24"> </span>
<a href="#l27.25"></a><span id="l27.25"> ////////////////////////////////////////////////////////////////////////</span>
<a href="#l27.26"></a><span id="l27.26"> </span>
<a href="#l27.27"></a><span id="l27.27"> </span>
<a href="#l27.28"></a><span id="l27.28"> nsOutlookImport::nsOutlookImport()</span>
<a href="#l27.29"></a><span id="l27.29"> {</span>
<a href="#l27.30"></a><span id="l27.30" class="difflineminus">-  // Init logging module.</span>
<a href="#l27.31"></a><span id="l27.31" class="difflineminus">-  if (!OUTLOOKLOGMODULE)</span>
<a href="#l27.32"></a><span id="l27.32" class="difflineminus">-    OUTLOOKLOGMODULE = PR_NewLogModule(&quot;IMPORT&quot;);</span>
<a href="#l27.33"></a><span id="l27.33" class="difflineminus">-</span>
<a href="#l27.34"></a><span id="l27.34">   IMPORT_LOG0(&quot;nsOutlookImport Module Created\n&quot;);</span>
<a href="#l27.35"></a><span id="l27.35"> </span>
<a href="#l27.36"></a><span id="l27.36">   nsOutlookStringBundle::GetStringBundle();</span>
<a href="#l27.37"></a><span id="l27.37"> }</span>
<a href="#l27.38"></a><span id="l27.38"> </span>
<a href="#l27.39"></a><span id="l27.39"> </span>
<a href="#l27.40"></a><span id="l27.40"> nsOutlookImport::~nsOutlookImport()</span>
<a href="#l27.41"></a><span id="l27.41"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mailnews/import/src/ImportDebug.h</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mailnews/import/src/ImportDebug.h</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -5,18 +5,17 @@</span>
<a href="#l28.4"></a><span id="l28.4"> </span>
<a href="#l28.5"></a><span id="l28.5"> #ifndef ImportDebug_h___</span>
<a href="#l28.6"></a><span id="l28.6"> #define ImportDebug_h___</span>
<a href="#l28.7"></a><span id="l28.7"> </span>
<a href="#l28.8"></a><span id="l28.8"> #ifdef NS_DEBUG</span>
<a href="#l28.9"></a><span id="l28.9"> #define IMPORT_DEBUG  1</span>
<a href="#l28.10"></a><span id="l28.10"> #endif</span>
<a href="#l28.11"></a><span id="l28.11"> </span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-// Use MOZ_LOG for logging.</span>
<a href="#l28.13"></a><span id="l28.13"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l28.14"></a><span id="l28.14" class="difflineminus">-extern PRLogModuleInfo *IMPORTLOGMODULE;  // Logging module</span>
<a href="#l28.15"></a><span id="l28.15" class="difflineplus">+static mozilla::LazyLogModule IMPORTLOGMODULE(&quot;IMPORT&quot;);  // Logging module</span>
<a href="#l28.16"></a><span id="l28.16"> </span>
<a href="#l28.17"></a><span id="l28.17"> #define IMPORT_LOG0(x)          MOZ_LOG(IMPORTLOGMODULE, mozilla::LogLevel::Debug, (x))</span>
<a href="#l28.18"></a><span id="l28.18"> #define IMPORT_LOG1(x, y)       MOZ_LOG(IMPORTLOGMODULE, mozilla::LogLevel::Debug, (x, y))</span>
<a href="#l28.19"></a><span id="l28.19"> #define IMPORT_LOG2(x, y, z)    MOZ_LOG(IMPORTLOGMODULE, mozilla::LogLevel::Debug, (x, y, z))</span>
<a href="#l28.20"></a><span id="l28.20"> #define IMPORT_LOG3(a, b, c, d) MOZ_LOG(IMPORTLOGMODULE, mozilla::LogLevel::Debug, (a, b, c, d))</span>
<a href="#l28.21"></a><span id="l28.21"> </span>
<a href="#l28.22"></a><span id="l28.22"> #endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mailnews/import/src/nsImportMail.cpp</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mailnews/import/src/nsImportMail.cpp</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -173,20 +173,16 @@ nsImportGenericMail::nsImportGenericMail</span>
<a href="#l29.4"></a><span id="l29.4">   m_doImport = false;</span>
<a href="#l29.5"></a><span id="l29.5">   m_pThreadData = nullptr;</span>
<a href="#l29.6"></a><span id="l29.6"> </span>
<a href="#l29.7"></a><span id="l29.7">   m_pDestFolder = nullptr;</span>
<a href="#l29.8"></a><span id="l29.8">   m_deleteDestFolder = false;</span>
<a href="#l29.9"></a><span id="l29.9">   m_createdFolder = false;</span>
<a href="#l29.10"></a><span id="l29.10">     m_performingMigration = false;</span>
<a href="#l29.11"></a><span id="l29.11"> </span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-  // Init logging module.</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineminus">-  if (!IMPORTLOGMODULE)</span>
<a href="#l29.14"></a><span id="l29.14" class="difflineminus">-    IMPORTLOGMODULE = PR_NewLogModule(&quot;IMPORT&quot;);</span>
<a href="#l29.15"></a><span id="l29.15" class="difflineminus">-</span>
<a href="#l29.16"></a><span id="l29.16">   nsresult rv = nsImportStringBundle::GetStringBundle(IMPORT_MSGS_URL, getter_AddRefs(m_stringBundle));</span>
<a href="#l29.17"></a><span id="l29.17">   if (NS_FAILED(rv))</span>
<a href="#l29.18"></a><span id="l29.18">     IMPORT_LOG0(&quot;Failed to get string bundle for Importing Mail&quot;);</span>
<a href="#l29.19"></a><span id="l29.19"> }</span>
<a href="#l29.20"></a><span id="l29.20"> </span>
<a href="#l29.21"></a><span id="l29.21"> </span>
<a href="#l29.22"></a><span id="l29.22"> nsImportGenericMail::~nsImportGenericMail()</span>
<a href="#l29.23"></a><span id="l29.23"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mailnews/import/src/nsImportService.cpp</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mailnews/import/src/nsImportService.cpp</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -31,30 +31,25 @@</span>
<a href="#l30.4"></a><span id="l30.4"> #include &quot;nsCRTGlue.h&quot;</span>
<a href="#l30.5"></a><span id="l30.5"> #include &quot;nsServiceManagerUtils.h&quot;</span>
<a href="#l30.6"></a><span id="l30.6"> #include &quot;nsComponentManagerUtils.h&quot;</span>
<a href="#l30.7"></a><span id="l30.7"> #include &quot;nsIMutableArray.h&quot;</span>
<a href="#l30.8"></a><span id="l30.8"> #include &quot;nsIArray.h&quot;</span>
<a href="#l30.9"></a><span id="l30.9"> #include &quot;nsIMsgSend.h&quot;</span>
<a href="#l30.10"></a><span id="l30.10"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l30.11"></a><span id="l30.11"> </span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-PRLogModuleInfo *IMPORTLOGMODULE = nullptr;</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineminus">-</span>
<a href="#l30.14"></a><span id="l30.14"> static nsIImportService *  gImportService = nullptr;</span>
<a href="#l30.15"></a><span id="l30.15"> static const char *  kWhitespace = &quot;\b\t\r\n &quot;;</span>
<a href="#l30.16"></a><span id="l30.16"> </span>
<a href="#l30.17"></a><span id="l30.17"> </span>
<a href="#l30.18"></a><span id="l30.18"> ////////////////////////////////////////////////////////////////////////</span>
<a href="#l30.19"></a><span id="l30.19"> </span>
<a href="#l30.20"></a><span id="l30.20"> </span>
<a href="#l30.21"></a><span id="l30.21"> nsImportService::nsImportService() : m_pModules(nullptr)</span>
<a href="#l30.22"></a><span id="l30.22"> {</span>
<a href="#l30.23"></a><span id="l30.23" class="difflineminus">-  // Init logging module.</span>
<a href="#l30.24"></a><span id="l30.24" class="difflineminus">-  if (!IMPORTLOGMODULE)</span>
<a href="#l30.25"></a><span id="l30.25" class="difflineminus">-    IMPORTLOGMODULE = PR_NewLogModule(&quot;IMPORT&quot;);</span>
<a href="#l30.26"></a><span id="l30.26">   IMPORT_LOG0(&quot;* nsImport Service Created\n&quot;);</span>
<a href="#l30.27"></a><span id="l30.27"> </span>
<a href="#l30.28"></a><span id="l30.28">   m_didDiscovery = false;</span>
<a href="#l30.29"></a><span id="l30.29">   m_pDecoder = nullptr;</span>
<a href="#l30.30"></a><span id="l30.30">   m_pEncoder = nullptr;</span>
<a href="#l30.31"></a><span id="l30.31"> </span>
<a href="#l30.32"></a><span id="l30.32">   nsresult rv = nsImportStringBundle::GetStringBundle(IMPORT_MSGS_URL, getter_AddRefs(m_stringBundle));</span>
<a href="#l30.33"></a><span id="l30.33">   if (NS_FAILED(rv))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mailnews/import/text/src/TextDebugLog.h</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mailnews/import/text/src/TextDebugLog.h</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -2,19 +2,18 @@</span>
<a href="#l31.4"></a><span id="l31.4">  *</span>
<a href="#l31.5"></a><span id="l31.5">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l31.6"></a><span id="l31.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l31.7"></a><span id="l31.7">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l31.8"></a><span id="l31.8"> </span>
<a href="#l31.9"></a><span id="l31.9"> #ifndef TextDebugLog_h___</span>
<a href="#l31.10"></a><span id="l31.10"> #define TextDebugLog_h___</span>
<a href="#l31.11"></a><span id="l31.11"> </span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-// Use PR_LOG for logging.</span>
<a href="#l31.13"></a><span id="l31.13"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l31.14"></a><span id="l31.14" class="difflineminus">-extern PRLogModuleInfo *TEXTIMPORTLOGMODULE;  // Logging module</span>
<a href="#l31.15"></a><span id="l31.15" class="difflineplus">+static mozilla::LazyLogModule TEXTIMPORTLOGMODULE(&quot;IMPORT&quot;);  // Logging module</span>
<a href="#l31.16"></a><span id="l31.16"> </span>
<a href="#l31.17"></a><span id="l31.17"> #define IMPORT_LOG0(x)          MOZ_LOG(TEXTIMPORTLOGMODULE, mozilla::LogLevel::Debug, (x))</span>
<a href="#l31.18"></a><span id="l31.18"> #define IMPORT_LOG1(x, y)       MOZ_LOG(TEXTIMPORTLOGMODULE, mozilla::LogLevel::Debug, (x, y))</span>
<a href="#l31.19"></a><span id="l31.19"> #define IMPORT_LOG2(x, y, z)    MOZ_LOG(TEXTIMPORTLOGMODULE, mozilla::LogLevel::Debug, (x, y, z))</span>
<a href="#l31.20"></a><span id="l31.20"> #define IMPORT_LOG3(a, b, c, d) MOZ_LOG(TEXTIMPORTLOGMODULE, mozilla::LogLevel::Debug, (a, b, c, d))</span>
<a href="#l31.21"></a><span id="l31.21"> </span>
<a href="#l31.22"></a><span id="l31.22"> </span>
<a href="#l31.23"></a><span id="l31.23"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/mailnews/import/text/src/nsTextImport.cpp</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/mailnews/import/text/src/nsTextImport.cpp</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -41,17 +41,16 @@</span>
<a href="#l32.4"></a><span id="l32.4"> #define TEXTIMPORT_DESCRIPTION           2001</span>
<a href="#l32.5"></a><span id="l32.5"> #define TEXTIMPORT_ADDRESS_NAME          2002</span>
<a href="#l32.6"></a><span id="l32.6"> #define TEXTIMPORT_ADDRESS_SUCCESS       2003</span>
<a href="#l32.7"></a><span id="l32.7"> #define TEXTIMPORT_ADDRESS_BADPARAM      2004</span>
<a href="#l32.8"></a><span id="l32.8"> #define TEXTIMPORT_ADDRESS_BADSOURCEFILE 2005</span>
<a href="#l32.9"></a><span id="l32.9"> #define TEXTIMPORT_ADDRESS_CONVERTERROR  2006</span>
<a href="#l32.10"></a><span id="l32.10"> </span>
<a href="#l32.11"></a><span id="l32.11"> static NS_DEFINE_IID(kISupportsIID, NS_ISUPPORTS_IID);</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-PRLogModuleInfo* TEXTIMPORTLOGMODULE;</span>
<a href="#l32.13"></a><span id="l32.13"> </span>
<a href="#l32.14"></a><span id="l32.14"> class ImportAddressImpl final : public nsIImportAddressBooks</span>
<a href="#l32.15"></a><span id="l32.15"> {</span>
<a href="#l32.16"></a><span id="l32.16"> public:</span>
<a href="#l32.17"></a><span id="l32.17">   ImportAddressImpl(nsIStringBundle* aStringBundle);</span>
<a href="#l32.18"></a><span id="l32.18"> </span>
<a href="#l32.19"></a><span id="l32.19">   static nsresult Create(nsIImportAddressBooks** aImport,</span>
<a href="#l32.20"></a><span id="l32.20">                          nsIStringBundle *aStringBundle);</span>
<a href="#l32.21"></a><span id="l32.21" class="difflineat">@@ -109,19 +108,16 @@ private:</span>
<a href="#l32.22"></a><span id="l32.22">   uint32_t m_bytesImported;</span>
<a href="#l32.23"></a><span id="l32.23"> };</span>
<a href="#l32.24"></a><span id="l32.24"> </span>
<a href="#l32.25"></a><span id="l32.25"> ////////////////////////////////////////////////////////////////////////</span>
<a href="#l32.26"></a><span id="l32.26"> ////////////////////////////////////////////////////////////////////////</span>
<a href="#l32.27"></a><span id="l32.27"> </span>
<a href="#l32.28"></a><span id="l32.28"> nsTextImport::nsTextImport()</span>
<a href="#l32.29"></a><span id="l32.29"> {</span>
<a href="#l32.30"></a><span id="l32.30" class="difflineminus">-  // Init logging module.</span>
<a href="#l32.31"></a><span id="l32.31" class="difflineminus">-  if (!TEXTIMPORTLOGMODULE)</span>
<a href="#l32.32"></a><span id="l32.32" class="difflineminus">-    TEXTIMPORTLOGMODULE = PR_NewLogModule(&quot;IMPORT&quot;);</span>
<a href="#l32.33"></a><span id="l32.33">   IMPORT_LOG0(&quot;nsTextImport Module Created\n&quot;);</span>
<a href="#l32.34"></a><span id="l32.34"> </span>
<a href="#l32.35"></a><span id="l32.35">   nsImportStringBundle::GetStringBundle(TEXT_MSGS_URL,</span>
<a href="#l32.36"></a><span id="l32.36">                                         getter_AddRefs(m_stringBundle));</span>
<a href="#l32.37"></a><span id="l32.37"> }</span>
<a href="#l32.38"></a><span id="l32.38"> </span>
<a href="#l32.39"></a><span id="l32.39"> nsTextImport::~nsTextImport()</span>
<a href="#l32.40"></a><span id="l32.40"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mailnews/import/vcard/src/nsVCardAddress.h</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mailnews/import/vcard/src/nsVCardAddress.h</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -2,17 +2,17 @@</span>
<a href="#l33.4"></a><span id="l33.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l33.5"></a><span id="l33.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l33.6"></a><span id="l33.6"> </span>
<a href="#l33.7"></a><span id="l33.7"> #ifndef nsVCardAddress_h__</span>
<a href="#l33.8"></a><span id="l33.8"> #define nsVCardAddress_h__</span>
<a href="#l33.9"></a><span id="l33.9"> </span>
<a href="#l33.10"></a><span id="l33.10"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l33.11"></a><span id="l33.11"> </span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-extern PRLogModuleInfo *VCARDLOGMODULE;  // Logging module</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+static mozilla::LazyLogModule VCARDLOGMODULE(&quot;IMPORT&quot;);  // Logging module</span>
<a href="#l33.14"></a><span id="l33.14"> </span>
<a href="#l33.15"></a><span id="l33.15"> #define IMPORT_LOG0(x)          MOZ_LOG(VCARDLOGMODULE, mozilla::LogLevel::Debug, (x))</span>
<a href="#l33.16"></a><span id="l33.16"> #define IMPORT_LOG1(x, y)       MOZ_LOG(VCARDLOGMODULE, mozilla::LogLevel::Debug, (x, y))</span>
<a href="#l33.17"></a><span id="l33.17"> #define IMPORT_LOG2(x, y, z)    MOZ_LOG(VCARDLOGMODULE, mozilla::LogLevel::Debug, (x, y, z))</span>
<a href="#l33.18"></a><span id="l33.18"> #define IMPORT_LOG3(a, b, c, d) MOZ_LOG(VCARDLOGMODULE, mozilla::LogLevel::Debug, (a, b, c, d))</span>
<a href="#l33.19"></a><span id="l33.19"> </span>
<a href="#l33.20"></a><span id="l33.20"> class nsIAddrDatabase;</span>
<a href="#l33.21"></a><span id="l33.21"> class nsIFile;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mailnews/import/vcard/src/nsVCardImport.cpp</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mailnews/import/vcard/src/nsVCardImport.cpp</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -19,17 +19,16 @@</span>
<a href="#l34.4"></a><span id="l34.4"> #include &quot;nsImportStringBundle.h&quot;</span>
<a href="#l34.5"></a><span id="l34.5"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l34.6"></a><span id="l34.6"> #include &quot;nsComponentManagerUtils.h&quot;</span>
<a href="#l34.7"></a><span id="l34.7"> #include &quot;nsServiceManagerUtils.h&quot;</span>
<a href="#l34.8"></a><span id="l34.8"> #include &quot;nsTextFormatter.h&quot;</span>
<a href="#l34.9"></a><span id="l34.9"> #include &quot;nsVCardAddress.h&quot;</span>
<a href="#l34.10"></a><span id="l34.10"> #include &quot;nsVCardImport.h&quot;</span>
<a href="#l34.11"></a><span id="l34.11"> </span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-PRLogModuleInfo *VCARDLOGMODULE = nullptr;</span>
<a href="#l34.13"></a><span id="l34.13"> static NS_DEFINE_IID(kISupportsIID, NS_ISUPPORTS_IID);</span>
<a href="#l34.14"></a><span id="l34.14"> </span>
<a href="#l34.15"></a><span id="l34.15"> class ImportVCardAddressImpl : public nsIImportAddressBooks</span>
<a href="#l34.16"></a><span id="l34.16"> {</span>
<a href="#l34.17"></a><span id="l34.17"> public:</span>
<a href="#l34.18"></a><span id="l34.18">   ImportVCardAddressImpl(nsIStringBundle* aStringBundle); </span>
<a href="#l34.19"></a><span id="l34.19"> </span>
<a href="#l34.20"></a><span id="l34.20">   static nsresult Create(</span>
<a href="#l34.21"></a><span id="l34.21" class="difflineat">@@ -89,19 +88,16 @@ private:</span>
<a href="#l34.22"></a><span id="l34.22">   nsVCardAddress m_vCard;</span>
<a href="#l34.23"></a><span id="l34.23">   nsCOMPtr&lt;nsIFile&gt; m_fileLoc;</span>
<a href="#l34.24"></a><span id="l34.24">   uint32_t m_bytesImported;</span>
<a href="#l34.25"></a><span id="l34.25">   nsCOMPtr&lt;nsIStringBundle&gt; m_notProxyBundle;</span>
<a href="#l34.26"></a><span id="l34.26"> };</span>
<a href="#l34.27"></a><span id="l34.27"> </span>
<a href="#l34.28"></a><span id="l34.28"> nsVCardImport::nsVCardImport()</span>
<a href="#l34.29"></a><span id="l34.29"> {</span>
<a href="#l34.30"></a><span id="l34.30" class="difflineminus">-  if (!VCARDLOGMODULE)</span>
<a href="#l34.31"></a><span id="l34.31" class="difflineminus">-    VCARDLOGMODULE = PR_NewLogModule(&quot;IMPORT&quot;);</span>
<a href="#l34.32"></a><span id="l34.32" class="difflineminus">-</span>
<a href="#l34.33"></a><span id="l34.33">   nsImportStringBundle::GetStringBundle(</span>
<a href="#l34.34"></a><span id="l34.34">       VCARDIMPORT_MSGS_URL, getter_AddRefs(m_stringBundle));</span>
<a href="#l34.35"></a><span id="l34.35"> </span>
<a href="#l34.36"></a><span id="l34.36">   IMPORT_LOG0(&quot;nsVCardImport Module Created\n&quot;);</span>
<a href="#l34.37"></a><span id="l34.37"> }</span>
<a href="#l34.38"></a><span id="l34.38"> </span>
<a href="#l34.39"></a><span id="l34.39"> nsVCardImport::~nsVCardImport()</span>
<a href="#l34.40"></a><span id="l34.40"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/mailnews/import/winlivemail/WMDebugLog.h</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/mailnews/import/winlivemail/WMDebugLog.h</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -1,19 +1,18 @@</span>
<a href="#l35.4"></a><span id="l35.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l35.5"></a><span id="l35.5"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l35.6"></a><span id="l35.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l35.7"></a><span id="l35.7">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l35.8"></a><span id="l35.8"> </span>
<a href="#l35.9"></a><span id="l35.9"> #ifndef WMDebugLog_h___</span>
<a href="#l35.10"></a><span id="l35.10"> #define WMDebugLog_h___</span>
<a href="#l35.11"></a><span id="l35.11"> </span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-// Use PR_LOG for logging.</span>
<a href="#l35.13"></a><span id="l35.13"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l35.14"></a><span id="l35.14" class="difflineminus">-extern PRLogModuleInfo *WMLOGMODULE;  // Logging module</span>
<a href="#l35.15"></a><span id="l35.15" class="difflineplus">+static mozilla::LazyLogModule WMLOGMODULE(&quot;IMPORT&quot;);  // Logging module</span>
<a href="#l35.16"></a><span id="l35.16"> </span>
<a href="#l35.17"></a><span id="l35.17"> #define IMPORT_LOG0(x)          MOZ_LOG(WMLOGMODULE, mozilla::LogLevel::Debug, (x))</span>
<a href="#l35.18"></a><span id="l35.18"> #define IMPORT_LOG1(x, y)       MOZ_LOG(WMLOGMODULE, mozilla::LogLevel::Debug, (x, y))</span>
<a href="#l35.19"></a><span id="l35.19"> #define IMPORT_LOG2(x, y, z)    MOZ_LOG(WMLOGMODULE, mozilla::LogLevel::Debug, (x, y, z))</span>
<a href="#l35.20"></a><span id="l35.20"> #define IMPORT_LOG3(a, b, c, d) MOZ_LOG(WMLOGMODULE, mozilla::LogLevel::Debug, (a, b, c, d))</span>
<a href="#l35.21"></a><span id="l35.21"> </span>
<a href="#l35.22"></a><span id="l35.22"> </span>
<a href="#l35.23"></a><span id="l35.23"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/mailnews/import/winlivemail/nsWMImport.cpp</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/mailnews/import/winlivemail/nsWMImport.cpp</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -31,17 +31,16 @@</span>
<a href="#l36.4"></a><span id="l36.4"> #include &quot;nsTextFormatter.h&quot;</span>
<a href="#l36.5"></a><span id="l36.5"> #include &quot;nsWMStringBundle.h&quot;</span>
<a href="#l36.6"></a><span id="l36.6"> #include &quot;nsIStringBundle.h&quot;</span>
<a href="#l36.7"></a><span id="l36.7"> #include &quot;nsUnicharUtils.h&quot;</span>
<a href="#l36.8"></a><span id="l36.8"> </span>
<a href="#l36.9"></a><span id="l36.9"> #include &quot;WMDebugLog.h&quot;</span>
<a href="#l36.10"></a><span id="l36.10"> </span>
<a href="#l36.11"></a><span id="l36.11"> static NS_DEFINE_IID(kISupportsIID, NS_ISUPPORTS_IID);</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-PRLogModuleInfo *WMLOGMODULE = nullptr;</span>
<a href="#l36.13"></a><span id="l36.13"> </span>
<a href="#l36.14"></a><span id="l36.14"> class ImportWMMailImpl : public nsIImportMail</span>
<a href="#l36.15"></a><span id="l36.15"> {</span>
<a href="#l36.16"></a><span id="l36.16"> public:</span>
<a href="#l36.17"></a><span id="l36.17">   ImportWMMailImpl();</span>
<a href="#l36.18"></a><span id="l36.18"> </span>
<a href="#l36.19"></a><span id="l36.19">   static nsresult Create(nsIImportMail** aImport);</span>
<a href="#l36.20"></a><span id="l36.20"> </span>
<a href="#l36.21"></a><span id="l36.21" class="difflineat">@@ -74,19 +73,16 @@ public:</span>
<a href="#l36.22"></a><span id="l36.22"> </span>
<a href="#l36.23"></a><span id="l36.23"> private:</span>
<a href="#l36.24"></a><span id="l36.24">   virtual ~ImportWMMailImpl();</span>
<a href="#l36.25"></a><span id="l36.25">   uint32_t m_bytesDone;</span>
<a href="#l36.26"></a><span id="l36.26"> };</span>
<a href="#l36.27"></a><span id="l36.27"> </span>
<a href="#l36.28"></a><span id="l36.28"> nsWMImport::nsWMImport()</span>
<a href="#l36.29"></a><span id="l36.29"> {</span>
<a href="#l36.30"></a><span id="l36.30" class="difflineminus">-  // Init logging module.</span>
<a href="#l36.31"></a><span id="l36.31" class="difflineminus">-  if (!WMLOGMODULE)</span>
<a href="#l36.32"></a><span id="l36.32" class="difflineminus">-    WMLOGMODULE = PR_NewLogModule(&quot;IMPORT&quot;);</span>
<a href="#l36.33"></a><span id="l36.33">   IMPORT_LOG0(&quot;nsWMImport Module Created\n&quot;);</span>
<a href="#l36.34"></a><span id="l36.34">   nsWMStringBundle::GetStringBundle();</span>
<a href="#l36.35"></a><span id="l36.35"> }</span>
<a href="#l36.36"></a><span id="l36.36"> </span>
<a href="#l36.37"></a><span id="l36.37"> nsWMImport::~nsWMImport()</span>
<a href="#l36.38"></a><span id="l36.38"> {</span>
<a href="#l36.39"></a><span id="l36.39">   IMPORT_LOG0(&quot;nsWMImport Module Deleted\n&quot;);</span>
<a href="#l36.40"></a><span id="l36.40"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/mailnews/local/src/nsMailboxProtocol.cpp</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/mailnews/local/src/nsMailboxProtocol.cpp</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -17,17 +17,18 @@</span>
<a href="#l37.4"></a><span id="l37.4"> #include &quot;nsICopyMsgStreamListener.h&quot;</span>
<a href="#l37.5"></a><span id="l37.5"> #include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l37.6"></a><span id="l37.6"> #include &quot;prtime.h&quot;</span>
<a href="#l37.7"></a><span id="l37.7"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l37.8"></a><span id="l37.8"> #include &quot;prerror.h&quot;</span>
<a href="#l37.9"></a><span id="l37.9"> #include &quot;prprf.h&quot;</span>
<a href="#l37.10"></a><span id="l37.10"> #include &quot;nspr.h&quot;</span>
<a href="#l37.11"></a><span id="l37.11"> </span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-PRLogModuleInfo *MAILBOX;</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+static mozilla::LazyLogModule MAILBOX(&quot;MAILBOX&quot;);</span>
<a href="#l37.14"></a><span id="l37.14" class="difflineplus">+</span>
<a href="#l37.15"></a><span id="l37.15"> #include &quot;nsIFileStreams.h&quot;</span>
<a href="#l37.16"></a><span id="l37.16"> #include &quot;nsIStreamTransportService.h&quot;</span>
<a href="#l37.17"></a><span id="l37.17"> #include &quot;nsIStreamConverterService.h&quot;</span>
<a href="#l37.18"></a><span id="l37.18"> #include &quot;nsIIOService.h&quot;</span>
<a href="#l37.19"></a><span id="l37.19"> #include &quot;nsNetUtil.h&quot;</span>
<a href="#l37.20"></a><span id="l37.20"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l37.21"></a><span id="l37.21"> #include &quot;nsIMsgWindow.h&quot;</span>
<a href="#l37.22"></a><span id="l37.22"> #include &quot;nsIMimeHeaders.h&quot;</span>
<a href="#l37.23"></a><span id="l37.23" class="difflineat">@@ -46,20 +47,16 @@ PRLogModuleInfo *MAILBOX;</span>
<a href="#l37.24"></a><span id="l37.24">  * fortezza: proxy auth is huge, buffer increased to 8k (sigh).</span>
<a href="#l37.25"></a><span id="l37.25">  */</span>
<a href="#l37.26"></a><span id="l37.26"> #define OUTPUT_BUFFER_SIZE (4096*2)</span>
<a href="#l37.27"></a><span id="l37.27"> </span>
<a href="#l37.28"></a><span id="l37.28"> nsMailboxProtocol::nsMailboxProtocol(nsIURI * aURI)</span>
<a href="#l37.29"></a><span id="l37.29">     : nsMsgProtocol(aURI)</span>
<a href="#l37.30"></a><span id="l37.30"> {</span>
<a href="#l37.31"></a><span id="l37.31">   m_lineStreamBuffer =nullptr;</span>
<a href="#l37.32"></a><span id="l37.32" class="difflineminus">-</span>
<a href="#l37.33"></a><span id="l37.33" class="difflineminus">-  // initialize the pr log if it hasn't been initialiezed already</span>
<a href="#l37.34"></a><span id="l37.34" class="difflineminus">-  if (!MAILBOX)</span>
<a href="#l37.35"></a><span id="l37.35" class="difflineminus">-    MAILBOX = PR_NewLogModule(&quot;MAILBOX&quot;);</span>
<a href="#l37.36"></a><span id="l37.36"> }</span>
<a href="#l37.37"></a><span id="l37.37"> </span>
<a href="#l37.38"></a><span id="l37.38"> nsMailboxProtocol::~nsMailboxProtocol()</span>
<a href="#l37.39"></a><span id="l37.39"> {</span>
<a href="#l37.40"></a><span id="l37.40">   // free our local state</span>
<a href="#l37.41"></a><span id="l37.41">   delete m_lineStreamBuffer;</span>
<a href="#l37.42"></a><span id="l37.42"> }</span>
<a href="#l37.43"></a><span id="l37.43"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/mailnews/local/src/nsMovemailService.cpp</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/mailnews/local/src/nsMovemailService.cpp</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -33,25 +33,19 @@</span>
<a href="#l38.4"></a><span id="l38.4"> #include &quot;nsAutoPtr.h&quot;</span>
<a href="#l38.5"></a><span id="l38.5"> #include &quot;nsIStringBundle.h&quot;</span>
<a href="#l38.6"></a><span id="l38.6"> #include &quot;nsIMsgPluggableStore.h&quot;</span>
<a href="#l38.7"></a><span id="l38.7"> #include &quot;mozilla/Services.h&quot;</span>
<a href="#l38.8"></a><span id="l38.8"> #include &quot;nsIInputStream.h&quot;</span>
<a href="#l38.9"></a><span id="l38.9"> #include &quot;nsIOutputStream.h&quot;</span>
<a href="#l38.10"></a><span id="l38.10"> </span>
<a href="#l38.11"></a><span id="l38.11"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-#if defined(PR_LOGGING)</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineminus">-//</span>
<a href="#l38.14"></a><span id="l38.14" class="difflineminus">-// export NSPR_LOG_MODULES=Movemail:5</span>
<a href="#l38.15"></a><span id="l38.15" class="difflineminus">-//</span>
<a href="#l38.16"></a><span id="l38.16" class="difflineminus">-static PRLogModuleInfo *gMovemailLog = nullptr;</span>
<a href="#l38.17"></a><span id="l38.17" class="difflineplus">+// export MOZ_LOG_MODULES=Movemail:5</span>
<a href="#l38.18"></a><span id="l38.18" class="difflineplus">+static mozilla::LazyLogModule gMovemailLog(&quot;Movemail&quot;);</span>
<a href="#l38.19"></a><span id="l38.19"> #define LOG(args) MOZ_LOG(gMovemailLog, mozilla::LogLevel::Debug, args)</span>
<a href="#l38.20"></a><span id="l38.20" class="difflineminus">-#else</span>
<a href="#l38.21"></a><span id="l38.21" class="difflineminus">-#define LOG(args)</span>
<a href="#l38.22"></a><span id="l38.22" class="difflineminus">-#endif</span>
<a href="#l38.23"></a><span id="l38.23"> </span>
<a href="#l38.24"></a><span id="l38.24"> #define PREF_MAIL_ROOT_MOVEMAIL &quot;mail.root.movemail&quot;            // old - for backward compatibility only</span>
<a href="#l38.25"></a><span id="l38.25"> #define PREF_MAIL_ROOT_MOVEMAIL_REL &quot;mail.root.movemail-rel&quot;</span>
<a href="#l38.26"></a><span id="l38.26"> </span>
<a href="#l38.27"></a><span id="l38.27"> #define LOCK_SUFFIX &quot;.lock&quot;</span>
<a href="#l38.28"></a><span id="l38.28"> #define MOZLOCK_SUFFIX &quot;.mozlock&quot;</span>
<a href="#l38.29"></a><span id="l38.29"> </span>
<a href="#l38.30"></a><span id="l38.30"> const char * gDefaultSpoolPaths[] = {</span>
<a href="#l38.31"></a><span id="l38.31" class="difflineat">@@ -91,20 +85,16 @@ private:</span>
<a href="#l38.32"></a><span id="l38.32">   bool ObtainSpoolLock(unsigned int aSeconds);</span>
<a href="#l38.33"></a><span id="l38.33">   bool YieldSpoolLock();</span>
<a href="#l38.34"></a><span id="l38.34"> };</span>
<a href="#l38.35"></a><span id="l38.35"> </span>
<a href="#l38.36"></a><span id="l38.36"> }</span>
<a href="#l38.37"></a><span id="l38.37"> </span>
<a href="#l38.38"></a><span id="l38.38"> nsMovemailService::nsMovemailService()</span>
<a href="#l38.39"></a><span id="l38.39"> {</span>
<a href="#l38.40"></a><span id="l38.40" class="difflineminus">-#if defined(PR_LOGGING)</span>
<a href="#l38.41"></a><span id="l38.41" class="difflineminus">-  if (!gMovemailLog)</span>
<a href="#l38.42"></a><span id="l38.42" class="difflineminus">-      gMovemailLog = PR_NewLogModule(&quot;Movemail&quot;);</span>
<a href="#l38.43"></a><span id="l38.43" class="difflineminus">-#endif</span>
<a href="#l38.44"></a><span id="l38.44">   LOG((&quot;nsMovemailService created: 0x%p\n&quot;, this));</span>
<a href="#l38.45"></a><span id="l38.45"> }</span>
<a href="#l38.46"></a><span id="l38.46"> </span>
<a href="#l38.47"></a><span id="l38.47"> nsMovemailService::~nsMovemailService()</span>
<a href="#l38.48"></a><span id="l38.48"> {}</span>
<a href="#l38.49"></a><span id="l38.49"> </span>
<a href="#l38.50"></a><span id="l38.50"> </span>
<a href="#l38.51"></a><span id="l38.51"> NS_IMPL_ISUPPORTS(nsMovemailService,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/mailnews/local/src/nsMsgMaildirStore.cpp</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/mailnews/local/src/nsMsgMaildirStore.cpp</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -32,21 +32,20 @@</span>
<a href="#l39.4"></a><span id="l39.4"> #include &quot;nsIMsgLocalMailFolder.h&quot;</span>
<a href="#l39.5"></a><span id="l39.5"> #include &quot;nsITimer.h&quot;</span>
<a href="#l39.6"></a><span id="l39.6"> #include &quot;nsIMailboxUrl.h&quot;</span>
<a href="#l39.7"></a><span id="l39.7"> #include &quot;nsIMsgMailNewsUrl.h&quot;</span>
<a href="#l39.8"></a><span id="l39.8"> #include &quot;nsIMsgFilterPlugin.h&quot;</span>
<a href="#l39.9"></a><span id="l39.9"> #include &quot;nsLocalUndoTxn.h&quot;</span>
<a href="#l39.10"></a><span id="l39.10"> #include &quot;nsIMessenger.h&quot;</span>
<a href="#l39.11"></a><span id="l39.11"> </span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-static PRLogModuleInfo* MailDirLog;</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+static mozilla::LazyLogModule MailDirLog(&quot;MailDirStore&quot;);</span>
<a href="#l39.14"></a><span id="l39.14"> </span>
<a href="#l39.15"></a><span id="l39.15"> nsMsgMaildirStore::nsMsgMaildirStore()</span>
<a href="#l39.16"></a><span id="l39.16"> {</span>
<a href="#l39.17"></a><span id="l39.17" class="difflineminus">-  MailDirLog = PR_NewLogModule(&quot;MailDirStore&quot;);</span>
<a href="#l39.18"></a><span id="l39.18"> }</span>
<a href="#l39.19"></a><span id="l39.19"> </span>
<a href="#l39.20"></a><span id="l39.20"> nsMsgMaildirStore::~nsMsgMaildirStore()</span>
<a href="#l39.21"></a><span id="l39.21"> {</span>
<a href="#l39.22"></a><span id="l39.22"> }</span>
<a href="#l39.23"></a><span id="l39.23"> </span>
<a href="#l39.24"></a><span id="l39.24"> NS_IMPL_ISUPPORTS(nsMsgMaildirStore, nsIMsgPluggableStore)</span>
<a href="#l39.25"></a><span id="l39.25"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/mailnews/local/src/nsPop3Protocol.cpp</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/mailnews/local/src/nsPop3Protocol.cpp</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -45,18 +45,18 @@</span>
<a href="#l40.4"></a><span id="l40.4"> #include &quot;nsIProxyInfo.h&quot;</span>
<a href="#l40.5"></a><span id="l40.5"> #include &quot;nsCRT.h&quot;</span>
<a href="#l40.6"></a><span id="l40.6"> #include &quot;mozilla/Services.h&quot;</span>
<a href="#l40.7"></a><span id="l40.7"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l40.8"></a><span id="l40.8"> #include &quot;mozilla/Attributes.h&quot;</span>
<a href="#l40.9"></a><span id="l40.9"> </span>
<a href="#l40.10"></a><span id="l40.10"> using namespace mozilla;</span>
<a href="#l40.11"></a><span id="l40.11"> </span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-PRLogModuleInfo *POP3LOGMODULE = nullptr;</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineminus">-#define POP3LOG(str) &quot;%s: [this=%p] &quot; str, POP3LOGMODULE-&gt;name, this</span>
<a href="#l40.14"></a><span id="l40.14" class="difflineplus">+static mozilla::LazyLogModule POP3LOGMODULE(&quot;POP3&quot;);</span>
<a href="#l40.15"></a><span id="l40.15" class="difflineplus">+#define POP3LOG(str) &quot;[this=%p] &quot; str, this</span>
<a href="#l40.16"></a><span id="l40.16"> </span>
<a href="#l40.17"></a><span id="l40.17"> static int</span>
<a href="#l40.18"></a><span id="l40.18"> net_pop3_remove_messages_marked_delete(PLHashEntry* he,</span>
<a href="#l40.19"></a><span id="l40.19">                                        int msgindex,</span>
<a href="#l40.20"></a><span id="l40.20">                                        void *arg)</span>
<a href="#l40.21"></a><span id="l40.21"> {</span>
<a href="#l40.22"></a><span id="l40.22">   Pop3UidlEntry *uidlEntry = (Pop3UidlEntry *) he-&gt;value;</span>
<a href="#l40.23"></a><span id="l40.23">   return (uidlEntry-&gt;status == DELETE_CHAR)</span>
<a href="#l40.24"></a><span id="l40.24" class="difflineat">@@ -456,18 +456,16 @@ nsPop3Protocol::nsPop3Protocol(nsIURI* a</span>
<a href="#l40.25"></a><span id="l40.25">   m_lineStreamBuffer(nullptr),</span>
<a href="#l40.26"></a><span id="l40.26">   m_pop3ConData(nullptr)</span>
<a href="#l40.27"></a><span id="l40.27"> {</span>
<a href="#l40.28"></a><span id="l40.28"> }</span>
<a href="#l40.29"></a><span id="l40.29"> </span>
<a href="#l40.30"></a><span id="l40.30"> nsresult nsPop3Protocol::Initialize(nsIURI * aURL)</span>
<a href="#l40.31"></a><span id="l40.31"> {</span>
<a href="#l40.32"></a><span id="l40.32">   nsresult rv = NS_OK;</span>
<a href="#l40.33"></a><span id="l40.33" class="difflineminus">-  if (!POP3LOGMODULE)</span>
<a href="#l40.34"></a><span id="l40.34" class="difflineminus">-    POP3LOGMODULE = PR_NewLogModule(&quot;POP3&quot;);</span>
<a href="#l40.35"></a><span id="l40.35"> </span>
<a href="#l40.36"></a><span id="l40.36">   MOZ_LOG(POP3LOGMODULE, LogLevel::Debug, (POP3LOG(&quot;Initialize()&quot;)));</span>
<a href="#l40.37"></a><span id="l40.37"> </span>
<a href="#l40.38"></a><span id="l40.38">   m_pop3ConData = (Pop3ConData *)PR_NEWZAP(Pop3ConData);</span>
<a href="#l40.39"></a><span id="l40.39">   if(!m_pop3ConData)</span>
<a href="#l40.40"></a><span id="l40.40">     return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l40.41"></a><span id="l40.41"> </span>
<a href="#l40.42"></a><span id="l40.42">   m_totalBytesReceived = 0;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/mailnews/local/src/nsPop3Sink.cpp</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/mailnews/local/src/nsPop3Sink.cpp</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -38,35 +38,33 @@</span>
<a href="#l41.4"></a><span id="l41.4"> #include &quot;nsMsgLocalCID.h&quot;</span>
<a href="#l41.5"></a><span id="l41.5"> #include &quot;mozilla/Services.h&quot;</span>
<a href="#l41.6"></a><span id="l41.6"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l41.7"></a><span id="l41.7"> </span>
<a href="#l41.8"></a><span id="l41.8"> /* for logging to Error Console */</span>
<a href="#l41.9"></a><span id="l41.9"> #include &quot;nsIScriptError.h&quot;</span>
<a href="#l41.10"></a><span id="l41.10"> #include &quot;nsIConsoleService.h&quot;</span>
<a href="#l41.11"></a><span id="l41.11"> </span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-extern PRLogModuleInfo *POP3LOGMODULE; // defined in nsPop3Protocol.cpp</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineminus">-#define POP3LOG(str) &quot;%s sink: [this=%p] &quot; str, POP3LOGMODULE-&gt;name, this</span>
<a href="#l41.14"></a><span id="l41.14" class="difflineplus">+static mozilla::LazyLogModule POP3LOGMODULE(&quot;POP3&quot;);</span>
<a href="#l41.15"></a><span id="l41.15" class="difflineplus">+#define POP3LOG(str) &quot;sink: [this=%p] &quot; str, this</span>
<a href="#l41.16"></a><span id="l41.16"> </span>
<a href="#l41.17"></a><span id="l41.17"> NS_IMPL_ISUPPORTS(nsPop3Sink, nsIPop3Sink)</span>
<a href="#l41.18"></a><span id="l41.18"> </span>
<a href="#l41.19"></a><span id="l41.19"> nsPop3Sink::nsPop3Sink()</span>
<a href="#l41.20"></a><span id="l41.20"> {</span>
<a href="#l41.21"></a><span id="l41.21">     m_authed = false;</span>
<a href="#l41.22"></a><span id="l41.22">     m_downloadingToTempFile = false;</span>
<a href="#l41.23"></a><span id="l41.23">     m_biffState = 0;</span>
<a href="#l41.24"></a><span id="l41.24">     m_numNewMessages = 0;</span>
<a href="#l41.25"></a><span id="l41.25">     m_numNewMessagesInFolder = 0;</span>
<a href="#l41.26"></a><span id="l41.26">     m_numMsgsDownloaded = 0;</span>
<a href="#l41.27"></a><span id="l41.27">     m_senderAuthed = false;</span>
<a href="#l41.28"></a><span id="l41.28">     m_outFileStream = nullptr;</span>
<a href="#l41.29"></a><span id="l41.29">     m_uidlDownload = false;</span>
<a href="#l41.30"></a><span id="l41.30">     m_buildMessageUri = false;</span>
<a href="#l41.31"></a><span id="l41.31" class="difflineminus">-    if (!POP3LOGMODULE)</span>
<a href="#l41.32"></a><span id="l41.32" class="difflineminus">-      POP3LOGMODULE = PR_NewLogModule(&quot;POP3&quot;);</span>
<a href="#l41.33"></a><span id="l41.33"> }</span>
<a href="#l41.34"></a><span id="l41.34"> </span>
<a href="#l41.35"></a><span id="l41.35"> nsPop3Sink::~nsPop3Sink()</span>
<a href="#l41.36"></a><span id="l41.36"> {</span>
<a href="#l41.37"></a><span id="l41.37">     MOZ_LOG(POP3LOGMODULE, mozilla::LogLevel::Debug,</span>
<a href="#l41.38"></a><span id="l41.38">             (POP3LOG(&quot;Calling ReleaseFolderLock from ~nsPop3Sink&quot;)));</span>
<a href="#l41.39"></a><span id="l41.39">     ReleaseFolderLock();</span>
<a href="#l41.40"></a><span id="l41.40"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/mailnews/mapi/mapihook/src/msgMapiHook.cpp</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/mailnews/mapi/mapihook/src/msgMapiHook.cpp</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -42,17 +42,17 @@</span>
<a href="#l42.4"></a><span id="l42.4"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l42.5"></a><span id="l42.5"> #include &quot;nsNetUtil.h&quot;</span>
<a href="#l42.6"></a><span id="l42.6"> #include &quot;mozilla/Services.h&quot;</span>
<a href="#l42.7"></a><span id="l42.7"> #include &quot;nsIArray.h&quot;</span>
<a href="#l42.8"></a><span id="l42.8"> #include &quot;nsArrayUtils.h&quot;</span>
<a href="#l42.9"></a><span id="l42.9"> #include &quot;nsEmbedCID.h&quot;</span>
<a href="#l42.10"></a><span id="l42.10"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l42.11"></a><span id="l42.11"> </span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-extern PRLogModuleInfo *MAPI;</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+static mozilla::LazyLogModule MAPI(&quot;MAPI&quot;);</span>
<a href="#l42.14"></a><span id="l42.14"> </span>
<a href="#l42.15"></a><span id="l42.15"> class nsMAPISendListener : public nsIMsgSendListener</span>
<a href="#l42.16"></a><span id="l42.16"> {</span>
<a href="#l42.17"></a><span id="l42.17"> public:</span>
<a href="#l42.18"></a><span id="l42.18"> </span>
<a href="#l42.19"></a><span id="l42.19">     // nsISupports interface</span>
<a href="#l42.20"></a><span id="l42.20">     NS_DECL_THREADSAFE_ISUPPORTS</span>
<a href="#l42.21"></a><span id="l42.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/mailnews/mapi/mapihook/src/msgMapiImp.cpp</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/mailnews/mapi/mapihook/src/msgMapiImp.cpp</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -31,24 +31,22 @@</span>
<a href="#l43.4"></a><span id="l43.4"> #include &quot;nsIFileStreams.h&quot;</span>
<a href="#l43.5"></a><span id="l43.5"> #include &quot;nsNetCID.h&quot;</span>
<a href="#l43.6"></a><span id="l43.6"> #include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l43.7"></a><span id="l43.7"> #include &quot;mozilla/mailnews/MimeHeaderParser.h&quot;</span>
<a href="#l43.8"></a><span id="l43.8"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l43.9"></a><span id="l43.9"> </span>
<a href="#l43.10"></a><span id="l43.10"> using namespace mozilla::mailnews;</span>
<a href="#l43.11"></a><span id="l43.11"> </span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-PRLogModuleInfo *MAPI;</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineplus">+static mozilla::LazyLogModule MAPI(&quot;MAPI&quot;);</span>
<a href="#l43.14"></a><span id="l43.14"> </span>
<a href="#l43.15"></a><span id="l43.15"> CMapiImp::CMapiImp()</span>
<a href="#l43.16"></a><span id="l43.16"> : m_cRef(1)</span>
<a href="#l43.17"></a><span id="l43.17"> {</span>
<a href="#l43.18"></a><span id="l43.18">     m_Lock = PR_NewLock();</span>
<a href="#l43.19"></a><span id="l43.19" class="difflineminus">-  if (!MAPI)</span>
<a href="#l43.20"></a><span id="l43.20" class="difflineminus">-    MAPI = PR_NewLogModule(&quot;MAPI&quot;);</span>
<a href="#l43.21"></a><span id="l43.21"> }</span>
<a href="#l43.22"></a><span id="l43.22"> </span>
<a href="#l43.23"></a><span id="l43.23"> CMapiImp::~CMapiImp() </span>
<a href="#l43.24"></a><span id="l43.24"> { </span>
<a href="#l43.25"></a><span id="l43.25">     if (m_Lock)</span>
<a href="#l43.26"></a><span id="l43.26">         PR_DestroyLock(m_Lock);</span>
<a href="#l43.27"></a><span id="l43.27"> }</span>
<a href="#l43.28"></a><span id="l43.28"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/mailnews/mime/emitters/nsMimeBaseEmitter.cpp</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/mailnews/mime/emitters/nsMimeBaseEmitter.cpp</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -27,17 +27,17 @@</span>
<a href="#l44.4"></a><span id="l44.4"> #include &quot;nsIMsgMailNewsUrl.h&quot;</span>
<a href="#l44.5"></a><span id="l44.5"> #include &quot;nsServiceManagerUtils.h&quot;</span>
<a href="#l44.6"></a><span id="l44.6"> #include &quot;nsComponentManagerUtils.h&quot;</span>
<a href="#l44.7"></a><span id="l44.7"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l44.8"></a><span id="l44.8"> #include &quot;nsTextFormatter.h&quot;</span>
<a href="#l44.9"></a><span id="l44.9"> #include &quot;mozilla/Services.h&quot;</span>
<a href="#l44.10"></a><span id="l44.10"> #include &lt;algorithm&gt;</span>
<a href="#l44.11"></a><span id="l44.11"> </span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-static PRLogModuleInfo * gMimeEmitterLogModule = nullptr;</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+static mozilla::LazyLogModule gMimeEmitterLogModule(&quot;MIME&quot;);</span>
<a href="#l44.14"></a><span id="l44.14"> </span>
<a href="#l44.15"></a><span id="l44.15"> #define   MIME_HEADER_URL      &quot;chrome://messenger/locale/mimeheader.properties&quot;</span>
<a href="#l44.16"></a><span id="l44.16"> #define   MIME_URL             &quot;chrome://messenger/locale/mime.properties&quot;</span>
<a href="#l44.17"></a><span id="l44.17"> </span>
<a href="#l44.18"></a><span id="l44.18"> NS_IMPL_ISUPPORTS(nsMimeBaseEmitter, nsIMimeEmitter, nsIInterfaceRequestor)</span>
<a href="#l44.19"></a><span id="l44.19"> </span>
<a href="#l44.20"></a><span id="l44.20"> nsMimeBaseEmitter::nsMimeBaseEmitter()</span>
<a href="#l44.21"></a><span id="l44.21"> {</span>
<a href="#l44.22"></a><span id="l44.22" class="difflineat">@@ -74,19 +74,16 @@ nsMimeBaseEmitter::nsMimeBaseEmitter()</span>
<a href="#l44.23"></a><span id="l44.23"> </span>
<a href="#l44.24"></a><span id="l44.24">   // Init the body...</span>
<a href="#l44.25"></a><span id="l44.25">   mBodyStarted = false;</span>
<a href="#l44.26"></a><span id="l44.26"> //  mBody = &quot;&quot;;</span>
<a href="#l44.27"></a><span id="l44.27"> </span>
<a href="#l44.28"></a><span id="l44.28">   // This is needed for conversion of I18N Strings...</span>
<a href="#l44.29"></a><span id="l44.29">   mUnicodeConverter = do_GetService(NS_MIME_CONVERTER_CONTRACTID);</span>
<a href="#l44.30"></a><span id="l44.30"> </span>
<a href="#l44.31"></a><span id="l44.31" class="difflineminus">-  if (!gMimeEmitterLogModule)</span>
<a href="#l44.32"></a><span id="l44.32" class="difflineminus">-    gMimeEmitterLogModule = PR_NewLogModule(&quot;MIME&quot;);</span>
<a href="#l44.33"></a><span id="l44.33" class="difflineminus">-</span>
<a href="#l44.34"></a><span id="l44.34">   // Do prefs last since we can live without this if it fails...</span>
<a href="#l44.35"></a><span id="l44.35">   nsCOMPtr&lt;nsIPrefBranch&gt; pPrefBranch(do_GetService(NS_PREFSERVICE_CONTRACTID));</span>
<a href="#l44.36"></a><span id="l44.36">   if (pPrefBranch)</span>
<a href="#l44.37"></a><span id="l44.37">     pPrefBranch-&gt;GetIntPref(&quot;mail.show_headers&quot;, &amp;mHeaderDisplayType);</span>
<a href="#l44.38"></a><span id="l44.38"> }</span>
<a href="#l44.39"></a><span id="l44.39"> </span>
<a href="#l44.40"></a><span id="l44.40"> nsMimeBaseEmitter::~nsMimeBaseEmitter(void)</span>
<a href="#l44.41"></a><span id="l44.41"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/mailnews/news/src/nsNNTPProtocol.cpp</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/mailnews/news/src/nsNNTPProtocol.cpp</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -105,32 +105,26 @@ using namespace mozilla;</span>
<a href="#l45.4"></a><span id="l45.4"> // and &quot;pushed&quot; authentication (if necessary),</span>
<a href="#l45.5"></a><span id="l45.5"> //#define HAVE_NNTP_EXTENSIONS</span>
<a href="#l45.6"></a><span id="l45.6"> </span>
<a href="#l45.7"></a><span id="l45.7"> // quiet compiler warnings by defining these function prototypes</span>
<a href="#l45.8"></a><span id="l45.8"> char *MSG_UnEscapeSearchUrl (const char *commandSpecificData);</span>
<a href="#l45.9"></a><span id="l45.9"> </span>
<a href="#l45.10"></a><span id="l45.10"> /* Logging stuff */</span>
<a href="#l45.11"></a><span id="l45.11"> </span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-PRLogModuleInfo* NNTP = NULL;</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+static mozilla::LazyLogModule NNTP(&quot;NNTP&quot;);</span>
<a href="#l45.14"></a><span id="l45.14"> #define out     LogLevel::Info</span>
<a href="#l45.15"></a><span id="l45.15"> </span>
<a href="#l45.16"></a><span id="l45.16"> #define NNTP_LOG_READ(buf) \</span>
<a href="#l45.17"></a><span id="l45.17" class="difflineminus">-if (NNTP==NULL) \</span>
<a href="#l45.18"></a><span id="l45.18" class="difflineminus">-    NNTP = PR_NewLogModule(&quot;NNTP&quot;); \</span>
<a href="#l45.19"></a><span id="l45.19"> MOZ_LOG(NNTP, out, (&quot;(%p) Receiving: %s&quot;, this, buf)) ;</span>
<a href="#l45.20"></a><span id="l45.20"> </span>
<a href="#l45.21"></a><span id="l45.21"> #define NNTP_LOG_WRITE(buf) \</span>
<a href="#l45.22"></a><span id="l45.22" class="difflineminus">-if (NNTP==NULL) \</span>
<a href="#l45.23"></a><span id="l45.23" class="difflineminus">-    NNTP = PR_NewLogModule(&quot;NNTP&quot;); \</span>
<a href="#l45.24"></a><span id="l45.24"> MOZ_LOG(NNTP, out, (&quot;(%p) Sending: %s&quot;, this, buf)) ;</span>
<a href="#l45.25"></a><span id="l45.25"> </span>
<a href="#l45.26"></a><span id="l45.26"> #define NNTP_LOG_NOTE(buf) \</span>
<a href="#l45.27"></a><span id="l45.27" class="difflineminus">-if (NNTP==NULL) \</span>
<a href="#l45.28"></a><span id="l45.28" class="difflineminus">-    NNTP = PR_NewLogModule(&quot;NNTP&quot;); \</span>
<a href="#l45.29"></a><span id="l45.29"> MOZ_LOG(NNTP, out, (&quot;(%p) %s&quot;,this, buf)) ;</span>
<a href="#l45.30"></a><span id="l45.30"> </span>
<a href="#l45.31"></a><span id="l45.31"> const char *const stateLabels[] = {</span>
<a href="#l45.32"></a><span id="l45.32"> &quot;NNTP_RESPONSE&quot;,</span>
<a href="#l45.33"></a><span id="l45.33"> #ifdef BLOCK_UNTIL_AVAILABLE_CONNECTION</span>
<a href="#l45.34"></a><span id="l45.34"> &quot;NNTP_BLOCK_UNTIL_CONNECTIONS_ARE_AVAILABLE&quot;,</span>
<a href="#l45.35"></a><span id="l45.35"> &quot;NNTP_CONNECTIONS_ARE_AVAILABLE&quot;,</span>
<a href="#l45.36"></a><span id="l45.36"> #endif</span>
<a href="#l45.37"></a><span id="l45.37" class="difflineat">@@ -264,19 +258,16 @@ NS_IMPL_ISUPPORTS_INHERITED(nsNNTPProtoc</span>
<a href="#l45.38"></a><span id="l45.38">   nsITimerCallback, nsICacheEntryOpenCallback, nsIMsgAsyncPromptListener, nsIProtocolProxyCallback)</span>
<a href="#l45.39"></a><span id="l45.39"> </span>
<a href="#l45.40"></a><span id="l45.40"> nsNNTPProtocol::nsNNTPProtocol(nsINntpIncomingServer *aServer, nsIURI *aURL,</span>
<a href="#l45.41"></a><span id="l45.41">                                nsIMsgWindow *aMsgWindow)</span>
<a href="#l45.42"></a><span id="l45.42"> : nsMsgProtocol(aURL),</span>
<a href="#l45.43"></a><span id="l45.43">   m_connectionBusy(false),</span>
<a href="#l45.44"></a><span id="l45.44">   m_nntpServer(aServer)</span>
<a href="#l45.45"></a><span id="l45.45"> {</span>
<a href="#l45.46"></a><span id="l45.46" class="difflineminus">-  if (!NNTP)</span>
<a href="#l45.47"></a><span id="l45.47" class="difflineminus">-    NNTP = PR_NewLogModule(&quot;NNTP&quot;);</span>
<a href="#l45.48"></a><span id="l45.48" class="difflineminus">-</span>
<a href="#l45.49"></a><span id="l45.49">   m_ProxyServer = nullptr;</span>
<a href="#l45.50"></a><span id="l45.50">   m_lineStreamBuffer = nullptr;</span>
<a href="#l45.51"></a><span id="l45.51">   m_responseText = nullptr;</span>
<a href="#l45.52"></a><span id="l45.52">   m_dataBuf = nullptr;</span>
<a href="#l45.53"></a><span id="l45.53"> </span>
<a href="#l45.54"></a><span id="l45.54">   m_cancelFromHdr = nullptr;</span>
<a href="#l45.55"></a><span id="l45.55">   m_cancelNewsgroups = nullptr;</span>
<a href="#l45.56"></a><span id="l45.56">   m_cancelDistribution = nullptr;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

