<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 26559:db283bd18902be05315471da36656dd2d678e25b</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ db283bd18902be05315471da36656dd2d678e25b" />
<meta property="og:url" content="/comm-central/rev/db283bd18902be05315471da36656dd2d678e25b" />
<meta property="og:description" content="Bug 1546364 - Fix line length indicator in db/ damaged be reformatting. rs=reformat DONTBUILD" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / db283bd18902be05315471da36656dd2d678e25b 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/db283bd18902be05315471da36656dd2d678e25b">shortlog</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/db283bd18902be05315471da36656dd2d678e25b">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b">files</a> |
changeset |
<a href="/comm-central/raw-rev/db283bd18902be05315471da36656dd2d678e25b">raw</a>  | <a href="/comm-central/archive/db283bd18902be05315471da36656dd2d678e25b.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1546364">Bug 1546364</a> - Fix line length indicator in db/ damaged be reformatting. rs=reformat DONTBUILD
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#74;&#111;&#114;&#103;&#32;&#75;&#32;&#60;&#106;&#111;&#114;&#103;&#107;&#64;&#106;&#111;&#114;&#103;&#107;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 09 May 2019 11:02:51 +0200</td></tr>

<tr>
 <td>changeset 26559</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/db283bd18902be05315471da36656dd2d678e25b">db283bd18902be05315471da36656dd2d678e25b</a></td>
</tr>



<tr>
<td>parent 26558</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/91500d83151e3ea9c26579efcdd6d277f9b8b1bb">91500d83151e3ea9c26579efcdd6d277f9b8b1bb</a>
</td>
</tr>

<tr>
<td>child 26560</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/f40eb5ec3bfa499adae77d2a656dc15061c3de96">f40eb5ec3bfa499adae77d2a656dc15061c3de96</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=db283bd18902be05315471da36656dd2d678e25b">15892</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Thu, 09 May 2019 09:09:20 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@db283bd18902 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=db283bd18902be05315471da36656dd2d678e25b">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=db283bd18902be05315471da36656dd2d678e25b&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=db283bd18902be05315471da36656dd2d678e25b&newProject=comm-central&newRevision=4cf00667dae322d437080f9deb74036ff89fa0c5&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=db283bd18902be05315471da36656dd2d678e25b&newProject=comm-central&newRevision=4cf00667dae322d437080f9deb74036ff89fa0c5&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=db283bd18902be05315471da36656dd2d678e25b&newProject=comm-central&newRevision=4cf00667dae322d437080f9deb74036ff89fa0c5&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28reformat%29&revcount=50">reformat</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1546364">1546364</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1546364">Bug 1546364</a> - Fix line length indicator in db/ damaged be reformatting. rs=reformat DONTBUILD
# ignore-this-changeset</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/public/mdb.h">db/mork/public/mdb.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/public/mdb.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/public/mdb.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/public/mdb.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/public/mdb.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/public/mdb.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/mork.h">db/mork/src/mork.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/mork.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/mork.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/mork.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/mork.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/mork.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkArray.cpp">db/mork/src/morkArray.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkArray.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkArray.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkArray.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkArray.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkArray.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkArray.h">db/mork/src/morkArray.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkArray.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkArray.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkArray.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkArray.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkArray.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtom.cpp">db/mork/src/morkAtom.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtom.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtom.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtom.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtom.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtom.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtom.h">db/mork/src/morkAtom.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtom.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtom.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtom.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtom.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtom.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomMap.cpp">db/mork/src/morkAtomMap.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomMap.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomMap.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomMap.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomMap.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomMap.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomMap.h">db/mork/src/morkAtomMap.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomMap.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomMap.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomMap.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomMap.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomMap.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomSpace.cpp">db/mork/src/morkAtomSpace.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomSpace.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomSpace.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomSpace.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomSpace.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomSpace.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomSpace.h">db/mork/src/morkAtomSpace.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomSpace.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomSpace.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomSpace.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomSpace.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkAtomSpace.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBead.cpp">db/mork/src/morkBead.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBead.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBead.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBead.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBead.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBead.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBead.h">db/mork/src/morkBead.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBead.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBead.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBead.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBead.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBead.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBlob.cpp">db/mork/src/morkBlob.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBlob.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBlob.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBlob.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBlob.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBlob.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBlob.h">db/mork/src/morkBlob.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBlob.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBlob.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBlob.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBlob.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBlob.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBuilder.cpp">db/mork/src/morkBuilder.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBuilder.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBuilder.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBuilder.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBuilder.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBuilder.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBuilder.h">db/mork/src/morkBuilder.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBuilder.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBuilder.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBuilder.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBuilder.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkBuilder.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCell.cpp">db/mork/src/morkCell.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCell.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCell.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCell.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCell.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCell.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCell.h">db/mork/src/morkCell.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCell.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCell.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCell.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCell.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCell.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCellObject.cpp">db/mork/src/morkCellObject.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCellObject.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCellObject.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCellObject.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCellObject.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCellObject.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCellObject.h">db/mork/src/morkCellObject.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCellObject.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCellObject.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCellObject.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCellObject.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCellObject.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCh.cpp">db/mork/src/morkCh.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCh.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCh.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCh.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCh.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCh.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkConfig.cpp">db/mork/src/morkConfig.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkConfig.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkConfig.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkConfig.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkConfig.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkConfig.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkConfig.h">db/mork/src/morkConfig.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkConfig.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkConfig.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkConfig.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkConfig.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkConfig.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCursor.cpp">db/mork/src/morkCursor.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCursor.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCursor.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCursor.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCursor.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCursor.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCursor.h">db/mork/src/morkCursor.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCursor.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCursor.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCursor.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCursor.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkCursor.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkEnv.cpp">db/mork/src/morkEnv.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkEnv.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkEnv.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkEnv.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkEnv.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkEnv.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkEnv.h">db/mork/src/morkEnv.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkEnv.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkEnv.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkEnv.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkEnv.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkEnv.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFactory.cpp">db/mork/src/morkFactory.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFactory.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFactory.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFactory.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFactory.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFactory.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFactory.h">db/mork/src/morkFactory.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFactory.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFactory.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFactory.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFactory.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFactory.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFile.cpp">db/mork/src/morkFile.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFile.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFile.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFile.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFile.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFile.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFile.h">db/mork/src/morkFile.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFile.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFile.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFile.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFile.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkFile.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkHandle.cpp">db/mork/src/morkHandle.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkHandle.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkHandle.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkHandle.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkHandle.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkHandle.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkHandle.h">db/mork/src/morkHandle.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkHandle.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkHandle.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkHandle.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkHandle.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkHandle.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkIntMap.cpp">db/mork/src/morkIntMap.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkIntMap.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkIntMap.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkIntMap.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkIntMap.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkIntMap.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkIntMap.h">db/mork/src/morkIntMap.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkIntMap.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkIntMap.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkIntMap.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkIntMap.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkIntMap.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkMap.cpp">db/mork/src/morkMap.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkMap.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkMap.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkMap.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkMap.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkMap.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkMap.h">db/mork/src/morkMap.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkMap.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkMap.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkMap.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkMap.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkMap.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNode.cpp">db/mork/src/morkNode.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNode.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNode.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNode.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNode.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNode.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNode.h">db/mork/src/morkNode.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNode.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNode.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNode.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNode.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNode.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNodeMap.cpp">db/mork/src/morkNodeMap.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNodeMap.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNodeMap.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNodeMap.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNodeMap.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNodeMap.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNodeMap.h">db/mork/src/morkNodeMap.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNodeMap.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNodeMap.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNodeMap.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNodeMap.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkNodeMap.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkObject.cpp">db/mork/src/morkObject.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkObject.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkObject.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkObject.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkObject.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkObject.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkObject.h">db/mork/src/morkObject.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkObject.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkObject.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkObject.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkObject.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkObject.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkParser.cpp">db/mork/src/morkParser.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkParser.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkParser.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkParser.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkParser.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkParser.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkParser.h">db/mork/src/morkParser.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkParser.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkParser.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkParser.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkParser.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkParser.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPool.cpp">db/mork/src/morkPool.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPool.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPool.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPool.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPool.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPool.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPool.h">db/mork/src/morkPool.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPool.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPool.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPool.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPool.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPool.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPortTableCursor.cpp">db/mork/src/morkPortTableCursor.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPortTableCursor.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPortTableCursor.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPortTableCursor.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPortTableCursor.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPortTableCursor.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPortTableCursor.h">db/mork/src/morkPortTableCursor.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPortTableCursor.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPortTableCursor.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPortTableCursor.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPortTableCursor.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkPortTableCursor.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkProbeMap.cpp">db/mork/src/morkProbeMap.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkProbeMap.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkProbeMap.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkProbeMap.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkProbeMap.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkProbeMap.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkProbeMap.h">db/mork/src/morkProbeMap.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkProbeMap.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkProbeMap.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkProbeMap.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkProbeMap.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkProbeMap.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkQuickSort.h">db/mork/src/morkQuickSort.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkQuickSort.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkQuickSort.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkQuickSort.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkQuickSort.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkQuickSort.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRow.cpp">db/mork/src/morkRow.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRow.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRow.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRow.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRow.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRow.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRow.h">db/mork/src/morkRow.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRow.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRow.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRow.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRow.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRow.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowCellCursor.cpp">db/mork/src/morkRowCellCursor.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowCellCursor.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowCellCursor.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowCellCursor.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowCellCursor.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowCellCursor.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowCellCursor.h">db/mork/src/morkRowCellCursor.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowCellCursor.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowCellCursor.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowCellCursor.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowCellCursor.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowCellCursor.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowMap.cpp">db/mork/src/morkRowMap.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowMap.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowMap.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowMap.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowMap.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowMap.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowMap.h">db/mork/src/morkRowMap.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowMap.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowMap.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowMap.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowMap.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowMap.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowObject.cpp">db/mork/src/morkRowObject.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowObject.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowObject.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowObject.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowObject.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowObject.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowObject.h">db/mork/src/morkRowObject.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowObject.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowObject.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowObject.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowObject.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowObject.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowSpace.cpp">db/mork/src/morkRowSpace.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowSpace.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowSpace.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowSpace.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowSpace.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowSpace.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowSpace.h">db/mork/src/morkRowSpace.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowSpace.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowSpace.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowSpace.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowSpace.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkRowSpace.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSearchRowCursor.cpp">db/mork/src/morkSearchRowCursor.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSearchRowCursor.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSearchRowCursor.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSearchRowCursor.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSearchRowCursor.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSearchRowCursor.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSearchRowCursor.h">db/mork/src/morkSearchRowCursor.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSearchRowCursor.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSearchRowCursor.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSearchRowCursor.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSearchRowCursor.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSearchRowCursor.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSink.cpp">db/mork/src/morkSink.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSink.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSink.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSink.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSink.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSink.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSink.h">db/mork/src/morkSink.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSink.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSink.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSink.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSink.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSink.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSpace.cpp">db/mork/src/morkSpace.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSpace.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSpace.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSpace.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSpace.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSpace.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSpace.h">db/mork/src/morkSpace.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSpace.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSpace.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSpace.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSpace.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkSpace.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStore.cpp">db/mork/src/morkStore.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStore.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStore.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStore.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStore.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStore.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStore.h">db/mork/src/morkStore.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStore.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStore.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStore.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStore.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStore.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStream.cpp">db/mork/src/morkStream.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStream.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStream.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStream.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStream.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStream.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStream.h">db/mork/src/morkStream.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStream.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStream.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStream.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStream.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkStream.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTable.cpp">db/mork/src/morkTable.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTable.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTable.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTable.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTable.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTable.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTable.h">db/mork/src/morkTable.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTable.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTable.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTable.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTable.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTable.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTableRowCursor.cpp">db/mork/src/morkTableRowCursor.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTableRowCursor.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTableRowCursor.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTableRowCursor.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTableRowCursor.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTableRowCursor.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTableRowCursor.h">db/mork/src/morkTableRowCursor.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTableRowCursor.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTableRowCursor.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTableRowCursor.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTableRowCursor.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkTableRowCursor.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkThumb.cpp">db/mork/src/morkThumb.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkThumb.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkThumb.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkThumb.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkThumb.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkThumb.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkThumb.h">db/mork/src/morkThumb.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkThumb.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkThumb.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkThumb.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkThumb.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkThumb.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkUniqRowCursor.h">db/mork/src/morkUniqRowCursor.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkUniqRowCursor.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkUniqRowCursor.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkUniqRowCursor.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkUniqRowCursor.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkUniqRowCursor.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkWriter.cpp">db/mork/src/morkWriter.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkWriter.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkWriter.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkWriter.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkWriter.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkWriter.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkWriter.h">db/mork/src/morkWriter.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkWriter.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkWriter.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkWriter.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkWriter.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkWriter.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkYarn.cpp">db/mork/src/morkYarn.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkYarn.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkYarn.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkYarn.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkYarn.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkYarn.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkYarn.h">db/mork/src/morkYarn.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkYarn.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkYarn.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkYarn.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkYarn.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkYarn.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkZone.cpp">db/mork/src/morkZone.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkZone.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkZone.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkZone.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkZone.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkZone.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkZone.h">db/mork/src/morkZone.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkZone.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkZone.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkZone.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkZone.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/morkZone.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/orkinHeap.cpp">db/mork/src/orkinHeap.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/orkinHeap.cpp">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/orkinHeap.cpp">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/orkinHeap.cpp">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/orkinHeap.cpp">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/orkinHeap.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/orkinHeap.h">db/mork/src/orkinHeap.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/orkinHeap.h">file</a> |
<a href="/comm-central/annotate/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/orkinHeap.h">annotate</a> |
<a href="/comm-central/diff/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/orkinHeap.h">diff</a> |
<a href="/comm-central/comparison/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/orkinHeap.h">comparison</a> |
<a href="/comm-central/log/db283bd18902be05315471da36656dd2d678e25b/db/mork/src/orkinHeap.h">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/db/mork/public/mdb.h</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/db/mork/public/mdb.h</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -37,17 +37,17 @@</span>
<a href="#l1.4"></a><span id="l1.4">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6"> #ifndef _MDB_</span>
<a href="#l1.7"></a><span id="l1.7"> #define _MDB_ 1</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9"> #include &quot;mozilla/Path.h&quot;</span>
<a href="#l1.10"></a><span id="l1.10"> #include &quot;nscore.h&quot;</span>
<a href="#l1.11"></a><span id="l1.11"> #include &quot;nsISupports.h&quot;</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l1.14"></a><span id="l1.14"> </span>
<a href="#l1.15"></a><span id="l1.15"> // { %%%%% begin scalar typedefs %%%%%</span>
<a href="#l1.16"></a><span id="l1.16"> typedef unsigned char mdb_u1;   // make sure this is one byte</span>
<a href="#l1.17"></a><span id="l1.17"> typedef unsigned short mdb_u2;  // make sure this is two bytes</span>
<a href="#l1.18"></a><span id="l1.18"> typedef short mdb_i2;           // make sure this is two bytes</span>
<a href="#l1.19"></a><span id="l1.19"> typedef uint32_t mdb_u4;        // make sure this is four bytes</span>
<a href="#l1.20"></a><span id="l1.20"> typedef int32_t mdb_i4;         // make sure this is four bytes</span>
<a href="#l1.21"></a><span id="l1.21"> typedef PRWord mdb_ip;          // make sure sizeof(mdb_ip) == sizeof(void*)</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineat">@@ -2549,11 +2549,11 @@ class nsIMdbCell</span>
<a href="#l1.23"></a><span id="l1.23"> </span>
<a href="#l1.24"></a><span id="l1.24">   // } ===== end nsIMdbCell methods =====</span>
<a href="#l1.25"></a><span id="l1.25"> };</span>
<a href="#l1.26"></a><span id="l1.26"> </span>
<a href="#l1.27"></a><span id="l1.27"> NS_DEFINE_STATIC_IID_ACCESSOR(nsIMdbCell, NS_IMDBTABLEROWCURSOR_IID)</span>
<a href="#l1.28"></a><span id="l1.28"> </span>
<a href="#l1.29"></a><span id="l1.29"> // } %%%%% end C++ abstract class interfaces %%%%%</span>
<a href="#l1.30"></a><span id="l1.30"> </span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l1.33"></a><span id="l1.33"> </span>
<a href="#l1.34"></a><span id="l1.34"> #endif /* _MDB_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/db/mork/src/mork.h</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/db/mork/src/mork.h</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -38,17 +38,17 @@</span>
<a href="#l2.4"></a><span id="l2.4"> #ifndef _MORK_</span>
<a href="#l2.5"></a><span id="l2.5"> #define _MORK_ 1</span>
<a href="#l2.6"></a><span id="l2.6"> </span>
<a href="#l2.7"></a><span id="l2.7"> #ifndef _MDB_</span>
<a href="#l2.8"></a><span id="l2.8"> #  include &quot;mdb.h&quot;</span>
<a href="#l2.9"></a><span id="l2.9"> #endif</span>
<a href="#l2.10"></a><span id="l2.10"> </span>
<a href="#l2.11"></a><span id="l2.11"> #include &quot;nscore.h&quot;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l2.14"></a><span id="l2.14"> </span>
<a href="#l2.15"></a><span id="l2.15"> // { %%%%% begin disable unused param warnings %%%%%</span>
<a href="#l2.16"></a><span id="l2.16"> #define MORK_USED_1(x) (void)(&amp;x)</span>
<a href="#l2.17"></a><span id="l2.17"> #define MORK_USED_2(x, y) \</span>
<a href="#l2.18"></a><span id="l2.18">   (void)(&amp;x);             \</span>
<a href="#l2.19"></a><span id="l2.19">   (void)(&amp;y);</span>
<a href="#l2.20"></a><span id="l2.20"> #define MORK_USED_3(x, y, z) \</span>
<a href="#l2.21"></a><span id="l2.21">   (void)(&amp;x);                \</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineat">@@ -245,11 +245,11 @@ class morkWriter;</span>
<a href="#l2.23"></a><span id="l2.23"> class morkZone;</span>
<a href="#l2.24"></a><span id="l2.24"> // } %%%%% end class forward defines %%%%%</span>
<a href="#l2.25"></a><span id="l2.25"> </span>
<a href="#l2.26"></a><span id="l2.26"> // include this config file last for platform &amp; environment specific stuff:</span>
<a href="#l2.27"></a><span id="l2.27"> #ifndef _MORKCONFIG_</span>
<a href="#l2.28"></a><span id="l2.28"> #  include &quot;morkConfig.h&quot;</span>
<a href="#l2.29"></a><span id="l2.29"> #endif</span>
<a href="#l2.30"></a><span id="l2.30"> </span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l2.33"></a><span id="l2.33"> </span>
<a href="#l2.34"></a><span id="l2.34"> #endif /* _MORK_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/db/mork/src/morkArray.cpp</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/db/mork/src/morkArray.cpp</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -20,17 +20,17 @@</span>
<a href="#l3.4"></a><span id="l3.4"> #ifndef _MORKENV_</span>
<a href="#l3.5"></a><span id="l3.5"> #  include &quot;morkEnv.h&quot;</span>
<a href="#l3.6"></a><span id="l3.6"> #endif</span>
<a href="#l3.7"></a><span id="l3.7"> </span>
<a href="#l3.8"></a><span id="l3.8"> #ifndef _MORKARRAY_</span>
<a href="#l3.9"></a><span id="l3.9"> #  include &quot;morkArray.h&quot;</span>
<a href="#l3.10"></a><span id="l3.10"> #endif</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l3.14"></a><span id="l3.14"> </span>
<a href="#l3.15"></a><span id="l3.15"> // ````` ````` ````` ````` `````</span>
<a href="#l3.16"></a><span id="l3.16"> // { ===== begin morkNode interface =====</span>
<a href="#l3.17"></a><span id="l3.17"> </span>
<a href="#l3.18"></a><span id="l3.18"> /*public virtual*/ void morkArray::CloseMorkNode(</span>
<a href="#l3.19"></a><span id="l3.19">     morkEnv* ev)  // CloseTable() only if open</span>
<a href="#l3.20"></a><span id="l3.20"> {</span>
<a href="#l3.21"></a><span id="l3.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineat">@@ -242,9 +242,9 @@ void morkArray::CutAllSlots(morkEnv* ev)</span>
<a href="#l3.23"></a><span id="l3.23">       this-&gt;FillBeyondSizeError(ev);</span>
<a href="#l3.24"></a><span id="l3.24">   } else</span>
<a href="#l3.25"></a><span id="l3.25">     this-&gt;NilSlotsAddressError(ev);</span>
<a href="#l3.26"></a><span id="l3.26"> </span>
<a href="#l3.27"></a><span id="l3.27">   ++mArray_Seed;</span>
<a href="#l3.28"></a><span id="l3.28">   mArray_Fill = 0;</span>
<a href="#l3.29"></a><span id="l3.29"> }</span>
<a href="#l3.30"></a><span id="l3.30"> </span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/db/mork/src/morkArray.h</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/db/mork/src/morkArray.h</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -9,17 +9,17 @@</span>
<a href="#l4.4"></a><span id="l4.4"> #ifndef _MORK_</span>
<a href="#l4.5"></a><span id="l4.5"> #  include &quot;mork.h&quot;</span>
<a href="#l4.6"></a><span id="l4.6"> #endif</span>
<a href="#l4.7"></a><span id="l4.7"> </span>
<a href="#l4.8"></a><span id="l4.8"> #ifndef _MORKNODE_</span>
<a href="#l4.9"></a><span id="l4.9"> #  include &quot;morkNode.h&quot;</span>
<a href="#l4.10"></a><span id="l4.10"> #endif</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l4.14"></a><span id="l4.14"> </span>
<a href="#l4.15"></a><span id="l4.15"> #define morkDerived_kArray /*i*/ 0x4179 /* ascii 'Ay' */</span>
<a href="#l4.16"></a><span id="l4.16"> </span>
<a href="#l4.17"></a><span id="l4.17"> class morkArray : public morkNode {  // row iterator</span>
<a href="#l4.18"></a><span id="l4.18"> </span>
<a href="#l4.19"></a><span id="l4.19">   // public: // slots inherited from morkObject (meant to inform only)</span>
<a href="#l4.20"></a><span id="l4.20">   // nsIMdbHeap*     mNode_Heap;</span>
<a href="#l4.21"></a><span id="l4.21">   // mork_able    mNode_Mutable; // can this node be modified?</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineat">@@ -87,11 +87,11 @@ class morkArray : public morkNode {  // </span>
<a href="#l4.23"></a><span id="l4.23">     morkNode::SlotWeakNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l4.24"></a><span id="l4.24">   }</span>
<a href="#l4.25"></a><span id="l4.25"> </span>
<a href="#l4.26"></a><span id="l4.26">   static void SlotStrongArray(morkArray* me, morkEnv* ev, morkArray** ioSlot) {</span>
<a href="#l4.27"></a><span id="l4.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l4.28"></a><span id="l4.28">   }</span>
<a href="#l4.29"></a><span id="l4.29"> };</span>
<a href="#l4.30"></a><span id="l4.30"> </span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l4.33"></a><span id="l4.33"> </span>
<a href="#l4.34"></a><span id="l4.34"> #endif /* _MORKTABLEROWCURSOR_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/db/mork/src/morkAtom.cpp</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/db/mork/src/morkAtom.cpp</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -22,17 +22,17 @@</span>
<a href="#l5.4"></a><span id="l5.4"> #ifndef _MORKENV_</span>
<a href="#l5.5"></a><span id="l5.5"> #  include &quot;morkEnv.h&quot;</span>
<a href="#l5.6"></a><span id="l5.6"> #endif</span>
<a href="#l5.7"></a><span id="l5.7"> </span>
<a href="#l5.8"></a><span id="l5.8"> #ifndef _MORKATOMSPACE_</span>
<a href="#l5.9"></a><span id="l5.9"> #  include &quot;morkAtomSpace.h&quot;</span>
<a href="#l5.10"></a><span id="l5.10"> #endif</span>
<a href="#l5.11"></a><span id="l5.11"> </span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l5.14"></a><span id="l5.14"> </span>
<a href="#l5.15"></a><span id="l5.15"> mork_bool morkAtom::GetYarn(mdbYarn* outYarn) const {</span>
<a href="#l5.16"></a><span id="l5.16">   const void* source = 0;</span>
<a href="#l5.17"></a><span id="l5.17">   mdb_fill fill = 0;</span>
<a href="#l5.18"></a><span id="l5.18">   mdb_cscode form = 0;</span>
<a href="#l5.19"></a><span id="l5.19">   outYarn-&gt;mYarn_More = 0;</span>
<a href="#l5.20"></a><span id="l5.20"> </span>
<a href="#l5.21"></a><span id="l5.21">   if (this-&gt;IsWeeBook()) {</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineat">@@ -421,9 +421,9 @@ void morkFarBookAtom::InitFarBookAtom(mo</span>
<a href="#l5.23"></a><span id="l5.23">       mFarBookAtom_Size = inBuf.mBuf_Fill;</span>
<a href="#l5.24"></a><span id="l5.24">       mFarBookAtom_Body = (mork_u1*)inBuf.mBuf_Body;</span>
<a href="#l5.25"></a><span id="l5.25">     } else</span>
<a href="#l5.26"></a><span id="l5.26">       this-&gt;ZeroAidError(ev);</span>
<a href="#l5.27"></a><span id="l5.27">   } else</span>
<a href="#l5.28"></a><span id="l5.28">     ev-&gt;NilPointerError();</span>
<a href="#l5.29"></a><span id="l5.29"> }</span>
<a href="#l5.30"></a><span id="l5.30"> </span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/db/mork/src/morkAtom.h</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/db/mork/src/morkAtom.h</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -5,17 +5,17 @@</span>
<a href="#l6.4"></a><span id="l6.4"> </span>
<a href="#l6.5"></a><span id="l6.5"> #ifndef _MORKATOM_</span>
<a href="#l6.6"></a><span id="l6.6"> #define _MORKATOM_ 1</span>
<a href="#l6.7"></a><span id="l6.7"> </span>
<a href="#l6.8"></a><span id="l6.8"> #ifndef _MORK_</span>
<a href="#l6.9"></a><span id="l6.9"> #  include &quot;mork.h&quot;</span>
<a href="#l6.10"></a><span id="l6.10"> #endif</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l6.14"></a><span id="l6.14"> </span>
<a href="#l6.15"></a><span id="l6.15"> #define morkAtom_kMaxByteSize 255       /* max for 8-bit integer */</span>
<a href="#l6.16"></a><span id="l6.16"> #define morkAtom_kForeverCellUses 0x0FF /* max for 8-bit integer */</span>
<a href="#l6.17"></a><span id="l6.17"> #define morkAtom_kMaxCellUses 0x07F     /* max for 7-bit integer */</span>
<a href="#l6.18"></a><span id="l6.18"> </span>
<a href="#l6.19"></a><span id="l6.19"> #define morkAtom_kKindWeeAnon 'a'  /* means morkWeeAnonAtom subclass */</span>
<a href="#l6.20"></a><span id="l6.20"> #define morkAtom_kKindBigAnon 'A'  /* means morkBigAnonAtom subclass */</span>
<a href="#l6.21"></a><span id="l6.21"> #define morkAtom_kKindWeeBook 'b'  /* means morkWeeBookAtom subclass */</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineat">@@ -352,11 +352,11 @@ class morkMaxBookAtom : public morkBigBo</span>
<a href="#l6.23"></a><span id="l6.23">     this-&gt;InitBigBookAtom(ev, inBuf, inForm, ioSpace, inAid);</span>
<a href="#l6.24"></a><span id="l6.24">   }</span>
<a href="#l6.25"></a><span id="l6.25"> </span>
<a href="#l6.26"></a><span id="l6.26">  private:  // copying is not allowed</span>
<a href="#l6.27"></a><span id="l6.27">   morkMaxBookAtom(const morkMaxBookAtom&amp; other);</span>
<a href="#l6.28"></a><span id="l6.28">   morkMaxBookAtom&amp; operator=(const morkMaxBookAtom&amp; other);</span>
<a href="#l6.29"></a><span id="l6.29"> };</span>
<a href="#l6.30"></a><span id="l6.30"> </span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l6.33"></a><span id="l6.33"> </span>
<a href="#l6.34"></a><span id="l6.34"> #endif /* _MORKATOM_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/db/mork/src/morkAtomMap.cpp</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/db/mork/src/morkAtomMap.cpp</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -34,17 +34,17 @@</span>
<a href="#l7.4"></a><span id="l7.4"> #ifndef _MORKINTMAP_</span>
<a href="#l7.5"></a><span id="l7.5"> #  include &quot;morkIntMap.h&quot;</span>
<a href="#l7.6"></a><span id="l7.6"> #endif</span>
<a href="#l7.7"></a><span id="l7.7"> </span>
<a href="#l7.8"></a><span id="l7.8"> #ifndef _MORKROW_</span>
<a href="#l7.9"></a><span id="l7.9"> #  include &quot;morkRow.h&quot;</span>
<a href="#l7.10"></a><span id="l7.10"> #endif</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l7.14"></a><span id="l7.14"> </span>
<a href="#l7.15"></a><span id="l7.15"> // ````` ````` ````` ````` `````</span>
<a href="#l7.16"></a><span id="l7.16"> // { ===== begin morkNode interface =====</span>
<a href="#l7.17"></a><span id="l7.17"> </span>
<a href="#l7.18"></a><span id="l7.18"> /*public virtual*/ void morkAtomAidMap::CloseMorkNode(</span>
<a href="#l7.19"></a><span id="l7.19">     morkEnv* ev)  // CloseAtomAidMap() only if open</span>
<a href="#l7.20"></a><span id="l7.20"> {</span>
<a href="#l7.21"></a><span id="l7.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineat">@@ -195,19 +195,19 @@ morkBookAtom* morkAtomAidMap::GetAid(mor</span>
<a href="#l7.23"></a><span id="l7.23">   this-&gt;MapAt(ev, &amp;key, &amp;oldKey, /*val*/ (void*)0);</span>
<a href="#l7.24"></a><span id="l7.24"> #else  /*MORK_ENABLE_PROBE_MAPS*/</span>
<a href="#l7.25"></a><span id="l7.25">   this-&gt;Get(ev, &amp;key, &amp;oldKey, /*val*/ (void*)0, (mork_change**)0);</span>
<a href="#l7.26"></a><span id="l7.26"> #endif /*MORK_ENABLE_PROBE_MAPS*/</span>
<a href="#l7.27"></a><span id="l7.27"> </span>
<a href="#l7.28"></a><span id="l7.28">   return oldKey;</span>
<a href="#l7.29"></a><span id="l7.29"> }</span>
<a href="#l7.30"></a><span id="l7.30"> </span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l7.33"></a><span id="l7.33"> </span>
<a href="#l7.34"></a><span id="l7.34" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l7.36"></a><span id="l7.36"> </span>
<a href="#l7.37"></a><span id="l7.37"> // ````` ````` ````` ````` `````</span>
<a href="#l7.38"></a><span id="l7.38"> // { ===== begin morkNode interface =====</span>
<a href="#l7.39"></a><span id="l7.39"> </span>
<a href="#l7.40"></a><span id="l7.40"> /*public virtual*/ void morkAtomBodyMap::CloseMorkNode(</span>
<a href="#l7.41"></a><span id="l7.41">     morkEnv* ev)  // CloseAtomBodyMap() only if open</span>
<a href="#l7.42"></a><span id="l7.42"> {</span>
<a href="#l7.43"></a><span id="l7.43">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineat">@@ -339,17 +339,17 @@ morkBookAtom* morkAtomBodyMap::GetAtom(m</span>
<a href="#l7.45"></a><span id="l7.45">   this-&gt;MapAt(ev, &amp;inAtom, &amp;key, /*val*/ (void*)0);</span>
<a href="#l7.46"></a><span id="l7.46"> #else  /*MORK_ENABLE_PROBE_MAPS*/</span>
<a href="#l7.47"></a><span id="l7.47">   this-&gt;Get(ev, &amp;inAtom, &amp;key, /*val*/ (void*)0, (mork_change**)0);</span>
<a href="#l7.48"></a><span id="l7.48"> #endif /*MORK_ENABLE_PROBE_MAPS*/</span>
<a href="#l7.49"></a><span id="l7.49"> </span>
<a href="#l7.50"></a><span id="l7.50">   return key;</span>
<a href="#l7.51"></a><span id="l7.51"> }</span>
<a href="#l7.52"></a><span id="l7.52"> </span>
<a href="#l7.53"></a><span id="l7.53" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l7.54"></a><span id="l7.54" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l7.55"></a><span id="l7.55"> </span>
<a href="#l7.56"></a><span id="l7.56"> morkAtomRowMap::~morkAtomRowMap() {}</span>
<a href="#l7.57"></a><span id="l7.57"> </span>
<a href="#l7.58"></a><span id="l7.58"> // I changed to sizeof(mork_ip) from sizeof(mork_aid) to fix a crash on</span>
<a href="#l7.59"></a><span id="l7.59"> // 64 bit machines.  I am not sure it was the right way to fix the problem,</span>
<a href="#l7.60"></a><span id="l7.60"> // but it does stop the crash.  Perhaps we should be using the</span>
<a href="#l7.61"></a><span id="l7.61"> // morkPointerMap instead?</span>
<a href="#l7.62"></a><span id="l7.62"> morkAtomRowMap::morkAtomRowMap(morkEnv* ev, const morkUsage&amp; inUsage,</span>
<a href="#l7.63"></a><span id="l7.63" class="difflineat">@@ -370,9 +370,9 @@ void morkAtomRowMap::AddRow(morkEnv* ev,</span>
<a href="#l7.64"></a><span id="l7.64"> </span>
<a href="#l7.65"></a><span id="l7.65"> void morkAtomRowMap::CutRow(morkEnv* ev, morkRow* ioRow)</span>
<a href="#l7.66"></a><span id="l7.66"> // cut ioRow only if it contains a cell in mAtomRowMap_IndexColumn.</span>
<a href="#l7.67"></a><span id="l7.67"> {</span>
<a href="#l7.68"></a><span id="l7.68">   mork_aid aid = ioRow-&gt;GetCellAtomAid(ev, mAtomRowMap_IndexColumn);</span>
<a href="#l7.69"></a><span id="l7.69">   if (aid) this-&gt;CutAid(ev, aid);</span>
<a href="#l7.70"></a><span id="l7.70"> }</span>
<a href="#l7.71"></a><span id="l7.71"> </span>
<a href="#l7.72"></a><span id="l7.72" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l7.73"></a><span id="l7.73" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/db/mork/src/morkAtomMap.h</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/db/mork/src/morkAtomMap.h</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -21,17 +21,17 @@</span>
<a href="#l8.4"></a><span id="l8.4"> #ifndef _MORKPROBEMAP_</span>
<a href="#l8.5"></a><span id="l8.5"> #  include &quot;morkProbeMap.h&quot;</span>
<a href="#l8.6"></a><span id="l8.6"> #endif</span>
<a href="#l8.7"></a><span id="l8.7"> </span>
<a href="#l8.8"></a><span id="l8.8"> #ifndef _MORKINTMAP_</span>
<a href="#l8.9"></a><span id="l8.9"> #  include &quot;morkIntMap.h&quot;</span>
<a href="#l8.10"></a><span id="l8.10"> #endif</span>
<a href="#l8.11"></a><span id="l8.11"> </span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l8.14"></a><span id="l8.14"> </span>
<a href="#l8.15"></a><span id="l8.15"> #define morkDerived_kAtomAidMap /*i*/ 0x6141 /* ascii 'aA' */</span>
<a href="#l8.16"></a><span id="l8.16"> </span>
<a href="#l8.17"></a><span id="l8.17"> #define morkAtomAidMap_kStartSlotCount 23</span>
<a href="#l8.18"></a><span id="l8.18"> </span>
<a href="#l8.19"></a><span id="l8.19"> /*| morkAtomAidMap: keys of morkBookAtom organized by atom ID</span>
<a href="#l8.20"></a><span id="l8.20"> |*/</span>
<a href="#l8.21"></a><span id="l8.21"> #ifdef MORK_ENABLE_PROBE_MAPS</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineat">@@ -159,19 +159,19 @@ class morkAtomAidMapIter : public morkMa</span>
<a href="#l8.23"></a><span id="l8.23">     return this-&gt;Here(ev, outAtomPtr, /*val*/ (void*)0);</span>
<a href="#l8.24"></a><span id="l8.24">   }</span>
<a href="#l8.25"></a><span id="l8.25"> </span>
<a href="#l8.26"></a><span id="l8.26">   mork_change* CutHereAtom(morkEnv* ev, morkBookAtom** outAtomPtr) {</span>
<a href="#l8.27"></a><span id="l8.27">     return this-&gt;CutHere(ev, outAtomPtr, /*val*/ (void*)0);</span>
<a href="#l8.28"></a><span id="l8.28">   }</span>
<a href="#l8.29"></a><span id="l8.29"> };</span>
<a href="#l8.30"></a><span id="l8.30"> </span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l8.33"></a><span id="l8.33"> </span>
<a href="#l8.34"></a><span id="l8.34" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l8.36"></a><span id="l8.36"> </span>
<a href="#l8.37"></a><span id="l8.37"> #define morkDerived_kAtomBodyMap /*i*/ 0x6142 /* ascii 'aB' */</span>
<a href="#l8.38"></a><span id="l8.38"> </span>
<a href="#l8.39"></a><span id="l8.39"> #define morkAtomBodyMap_kStartSlotCount 23</span>
<a href="#l8.40"></a><span id="l8.40"> </span>
<a href="#l8.41"></a><span id="l8.41"> /*| morkAtomBodyMap: keys of morkBookAtom organized by body bytes</span>
<a href="#l8.42"></a><span id="l8.42"> |*/</span>
<a href="#l8.43"></a><span id="l8.43"> #ifdef MORK_ENABLE_PROBE_MAPS</span>
<a href="#l8.44"></a><span id="l8.44" class="difflineat">@@ -296,17 +296,17 @@ class morkAtomBodyMapIter : public morkM</span>
<a href="#l8.45"></a><span id="l8.45">     return this-&gt;Here(ev, outAtomPtr, /*val*/ (void*)0);</span>
<a href="#l8.46"></a><span id="l8.46">   }</span>
<a href="#l8.47"></a><span id="l8.47"> </span>
<a href="#l8.48"></a><span id="l8.48">   mork_change* CutHereAtom(morkEnv* ev, morkBookAtom** outAtomPtr) {</span>
<a href="#l8.49"></a><span id="l8.49">     return this-&gt;CutHere(ev, outAtomPtr, /*val*/ (void*)0);</span>
<a href="#l8.50"></a><span id="l8.50">   }</span>
<a href="#l8.51"></a><span id="l8.51"> };</span>
<a href="#l8.52"></a><span id="l8.52"> </span>
<a href="#l8.53"></a><span id="l8.53" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l8.54"></a><span id="l8.54" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l8.55"></a><span id="l8.55"> </span>
<a href="#l8.56"></a><span id="l8.56"> #define morkDerived_kAtomRowMap /*i*/ 0x6152 /* ascii 'aR' */</span>
<a href="#l8.57"></a><span id="l8.57"> </span>
<a href="#l8.58"></a><span id="l8.58"> /*| morkAtomRowMap: maps morkAtom* -&gt; morkRow*</span>
<a href="#l8.59"></a><span id="l8.59"> |*/</span>
<a href="#l8.60"></a><span id="l8.60"> class morkAtomRowMap : public morkIntMap {  // for mapping atoms to rows</span>
<a href="#l8.61"></a><span id="l8.61"> </span>
<a href="#l8.62"></a><span id="l8.62">  public:</span>
<a href="#l8.63"></a><span id="l8.63" class="difflineat">@@ -384,11 +384,11 @@ class morkAtomRowMapIter : public morkMa</span>
<a href="#l8.64"></a><span id="l8.64">   }</span>
<a href="#l8.65"></a><span id="l8.65"> </span>
<a href="#l8.66"></a><span id="l8.66">   mork_change* CutHereAtomAndRow(morkEnv* ev, morkAtom** outAtom,</span>
<a href="#l8.67"></a><span id="l8.67">                                  morkRow** outRow) {</span>
<a href="#l8.68"></a><span id="l8.68">     return this-&gt;CutHere(ev, outAtom, outRow);</span>
<a href="#l8.69"></a><span id="l8.69">   }</span>
<a href="#l8.70"></a><span id="l8.70"> };</span>
<a href="#l8.71"></a><span id="l8.71"> </span>
<a href="#l8.72"></a><span id="l8.72" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l8.73"></a><span id="l8.73" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l8.74"></a><span id="l8.74"> </span>
<a href="#l8.75"></a><span id="l8.75"> #endif /* _MORKATOMMAP_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/db/mork/src/morkAtomSpace.cpp</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/db/mork/src/morkAtomSpace.cpp</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -42,17 +42,17 @@</span>
<a href="#l9.4"></a><span id="l9.4"> #ifndef _MORKSTORE_</span>
<a href="#l9.5"></a><span id="l9.5"> #  include &quot;morkStore.h&quot;</span>
<a href="#l9.6"></a><span id="l9.6"> #endif</span>
<a href="#l9.7"></a><span id="l9.7"> </span>
<a href="#l9.8"></a><span id="l9.8"> #ifndef _MORKATOM_</span>
<a href="#l9.9"></a><span id="l9.9"> #  include &quot;morkAtom.h&quot;</span>
<a href="#l9.10"></a><span id="l9.10"> #endif</span>
<a href="#l9.11"></a><span id="l9.11"> </span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l9.14"></a><span id="l9.14"> </span>
<a href="#l9.15"></a><span id="l9.15"> // ````` ````` ````` ````` `````</span>
<a href="#l9.16"></a><span id="l9.16"> // { ===== begin morkNode interface =====</span>
<a href="#l9.17"></a><span id="l9.17"> </span>
<a href="#l9.18"></a><span id="l9.18"> /*public virtual*/ void morkAtomSpace::CloseMorkNode(</span>
<a href="#l9.19"></a><span id="l9.19">     morkEnv* ev)  // CloseAtomSpace() only if open</span>
<a href="#l9.20"></a><span id="l9.20"> {</span>
<a href="#l9.21"></a><span id="l9.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineat">@@ -215,19 +215,19 @@ mork_aid morkAtomSpace::MakeNewAtomId(mo</span>
<a href="#l9.23"></a><span id="l9.23">       ++id;</span>
<a href="#l9.24"></a><span id="l9.24">     }</span>
<a href="#l9.25"></a><span id="l9.25">   }</span>
<a href="#l9.26"></a><span id="l9.26"> </span>
<a href="#l9.27"></a><span id="l9.27">   mAtomSpace_HighUnderId = id + 1;</span>
<a href="#l9.28"></a><span id="l9.28">   return outAid;</span>
<a href="#l9.29"></a><span id="l9.29"> }</span>
<a href="#l9.30"></a><span id="l9.30"> </span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l9.33"></a><span id="l9.33"> </span>
<a href="#l9.34"></a><span id="l9.34"> morkAtomSpaceMap::~morkAtomSpaceMap() {}</span>
<a href="#l9.35"></a><span id="l9.35"> </span>
<a href="#l9.36"></a><span id="l9.36"> morkAtomSpaceMap::morkAtomSpaceMap(morkEnv* ev, const morkUsage&amp; inUsage,</span>
<a href="#l9.37"></a><span id="l9.37">                                    nsIMdbHeap* ioHeap, nsIMdbHeap* ioSlotHeap)</span>
<a href="#l9.38"></a><span id="l9.38">     : morkNodeMap(ev, inUsage, ioHeap, ioSlotHeap) {</span>
<a href="#l9.39"></a><span id="l9.39">   if (ev-&gt;Good()) mNode_Derived = morkDerived_kAtomSpaceMap;</span>
<a href="#l9.40"></a><span id="l9.40"> }</span>
<a href="#l9.41"></a><span id="l9.41"> </span>
<a href="#l9.42"></a><span id="l9.42" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/db/mork/src/morkAtomSpace.h</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/db/mork/src/morkAtomSpace.h</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -21,17 +21,17 @@</span>
<a href="#l10.4"></a><span id="l10.4"> #ifndef _MORKATOMMAP_</span>
<a href="#l10.5"></a><span id="l10.5"> #  include &quot;morkAtomMap.h&quot;</span>
<a href="#l10.6"></a><span id="l10.6"> #endif</span>
<a href="#l10.7"></a><span id="l10.7"> </span>
<a href="#l10.8"></a><span id="l10.8"> #ifndef _MORKNODEMAP_</span>
<a href="#l10.9"></a><span id="l10.9"> #  include &quot;morkNodeMap.h&quot;</span>
<a href="#l10.10"></a><span id="l10.10"> #endif</span>
<a href="#l10.11"></a><span id="l10.11"> </span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l10.14"></a><span id="l10.14"> </span>
<a href="#l10.15"></a><span id="l10.15"> /*| kMinUnderId: the smallest ID we auto-assign to the 'under' namespace</span>
<a href="#l10.16"></a><span id="l10.16"> **| reserved for tokens expected to occur very frequently, such as the names</span>
<a href="#l10.17"></a><span id="l10.17"> **| of columns.  We reserve single byte ids in the ASCII range to correspond</span>
<a href="#l10.18"></a><span id="l10.18"> **| one-to-one to those tokens consisting single ASCII characters (so that</span>
<a href="#l10.19"></a><span id="l10.19"> **| this assignment is always known and constant).  So we start at 0x80, and</span>
<a href="#l10.20"></a><span id="l10.20"> **| then reserve the upper half of two hex digit ids and all the three hex</span>
<a href="#l10.21"></a><span id="l10.21"> **| digit IDs for the 'under' namespace for common tokens.</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineat">@@ -152,17 +152,17 @@ class morkAtomSpace : public morkSpace {</span>
<a href="#l10.23"></a><span id="l10.23">   }</span>
<a href="#l10.24"></a><span id="l10.24"> </span>
<a href="#l10.25"></a><span id="l10.25">   static void SlotStrongAtomSpace(morkAtomSpace* me, morkEnv* ev,</span>
<a href="#l10.26"></a><span id="l10.26">                                   morkAtomSpace** ioSlot) {</span>
<a href="#l10.27"></a><span id="l10.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l10.28"></a><span id="l10.28">   }</span>
<a href="#l10.29"></a><span id="l10.29"> };</span>
<a href="#l10.30"></a><span id="l10.30"> </span>
<a href="#l10.31"></a><span id="l10.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l10.33"></a><span id="l10.33"> </span>
<a href="#l10.34"></a><span id="l10.34"> #define morkDerived_kAtomSpaceMap /*i*/ 0x615A /* ascii 'aZ' */</span>
<a href="#l10.35"></a><span id="l10.35"> </span>
<a href="#l10.36"></a><span id="l10.36"> /*| morkAtomSpaceMap: maps mork_scope -&gt; morkAtomSpace</span>
<a href="#l10.37"></a><span id="l10.37"> |*/</span>
<a href="#l10.38"></a><span id="l10.38"> class morkAtomSpaceMap : public morkNodeMap {  // for mapping tokens to tables</span>
<a href="#l10.39"></a><span id="l10.39"> </span>
<a href="#l10.40"></a><span id="l10.40">  public:</span>
<a href="#l10.41"></a><span id="l10.41" class="difflineat">@@ -217,11 +217,11 @@ class morkAtomSpaceMapIter : public mork</span>
<a href="#l10.42"></a><span id="l10.42">   }</span>
<a href="#l10.43"></a><span id="l10.43"> </span>
<a href="#l10.44"></a><span id="l10.44">   mork_change* CutHereAtomSpace(morkEnv* ev, mork_scope* outScope,</span>
<a href="#l10.45"></a><span id="l10.45">                                 morkAtomSpace** outAtomSpace) {</span>
<a href="#l10.46"></a><span id="l10.46">     return this-&gt;CutHere(ev, outScope, outAtomSpace);</span>
<a href="#l10.47"></a><span id="l10.47">   }</span>
<a href="#l10.48"></a><span id="l10.48"> };</span>
<a href="#l10.49"></a><span id="l10.49"> </span>
<a href="#l10.50"></a><span id="l10.50" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l10.52"></a><span id="l10.52"> </span>
<a href="#l10.53"></a><span id="l10.53"> #endif /* _MORKATOMSPACE_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/db/mork/src/morkBead.cpp</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/db/mork/src/morkBead.cpp</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -18,17 +18,17 @@</span>
<a href="#l11.4"></a><span id="l11.4"> #ifndef _MORKENV_</span>
<a href="#l11.5"></a><span id="l11.5"> #  include &quot;morkEnv.h&quot;</span>
<a href="#l11.6"></a><span id="l11.6"> #endif</span>
<a href="#l11.7"></a><span id="l11.7"> </span>
<a href="#l11.8"></a><span id="l11.8"> #ifndef _MORKBEAD_</span>
<a href="#l11.9"></a><span id="l11.9"> #  include &quot;morkBead.h&quot;</span>
<a href="#l11.10"></a><span id="l11.10"> #endif</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l11.14"></a><span id="l11.14"> </span>
<a href="#l11.15"></a><span id="l11.15"> // ````` ````` ````` ````` `````</span>
<a href="#l11.16"></a><span id="l11.16"> // { ===== begin morkNode interface =====</span>
<a href="#l11.17"></a><span id="l11.17"> </span>
<a href="#l11.18"></a><span id="l11.18"> /*public virtual*/ void morkBead::CloseMorkNode(</span>
<a href="#l11.19"></a><span id="l11.19">     morkEnv* ev)  // CloseBead() only if open</span>
<a href="#l11.20"></a><span id="l11.20"> {</span>
<a href="#l11.21"></a><span id="l11.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineat">@@ -72,17 +72,17 @@ morkBead::morkBead(morkEnv* ev, const mo</span>
<a href="#l11.23"></a><span id="l11.23">     }</span>
<a href="#l11.24"></a><span id="l11.24">   } else</span>
<a href="#l11.25"></a><span id="l11.25">     this-&gt;NonNodeError(ev);</span>
<a href="#l11.26"></a><span id="l11.26"> }</span>
<a href="#l11.27"></a><span id="l11.27"> </span>
<a href="#l11.28"></a><span id="l11.28"> // } ===== end morkNode methods =====</span>
<a href="#l11.29"></a><span id="l11.29"> // ````` ````` ````` ````` `````</span>
<a href="#l11.30"></a><span id="l11.30"> </span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l11.33"></a><span id="l11.33"> </span>
<a href="#l11.34"></a><span id="l11.34"> // ````` ````` ````` ````` `````</span>
<a href="#l11.35"></a><span id="l11.35"> // { ===== begin morkNode interface =====</span>
<a href="#l11.36"></a><span id="l11.36"> </span>
<a href="#l11.37"></a><span id="l11.37"> /*public virtual*/ void morkBeadMap::CloseMorkNode(</span>
<a href="#l11.38"></a><span id="l11.38">     morkEnv* ev)  // CloseBeadMap() only if open</span>
<a href="#l11.39"></a><span id="l11.39"> {</span>
<a href="#l11.40"></a><span id="l11.40">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l11.41"></a><span id="l11.41" class="difflineat">@@ -198,17 +198,17 @@ mork_num morkBeadMap::CutAllBeads(morkEn</span>
<a href="#l11.42"></a><span id="l11.42"> }</span>
<a href="#l11.43"></a><span id="l11.43"> </span>
<a href="#l11.44"></a><span id="l11.44"> /*virtual*/ mork_u4 morkBeadMap::Hash(morkEnv* ev, const void* inKey) const {</span>
<a href="#l11.45"></a><span id="l11.45">   MORK_USED_1(ev);</span>
<a href="#l11.46"></a><span id="l11.46">   return (*(const morkBead**)inKey)-&gt;BeadHash();</span>
<a href="#l11.47"></a><span id="l11.47"> }</span>
<a href="#l11.48"></a><span id="l11.48"> // } ===== end morkMap poly interface =====</span>
<a href="#l11.49"></a><span id="l11.49"> </span>
<a href="#l11.50"></a><span id="l11.50" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l11.52"></a><span id="l11.52"> </span>
<a href="#l11.53"></a><span id="l11.53"> morkBead* morkBeadMapIter::FirstBead(morkEnv* ev) {</span>
<a href="#l11.54"></a><span id="l11.54">   morkBead* bead = 0;</span>
<a href="#l11.55"></a><span id="l11.55">   this-&gt;First(ev, &amp;bead, /*val*/ (void*)0);</span>
<a href="#l11.56"></a><span id="l11.56">   return bead;</span>
<a href="#l11.57"></a><span id="l11.57"> }</span>
<a href="#l11.58"></a><span id="l11.58"> </span>
<a href="#l11.59"></a><span id="l11.59"> morkBead* morkBeadMapIter::NextBead(morkEnv* ev) {</span>
<a href="#l11.60"></a><span id="l11.60" class="difflineat">@@ -222,19 +222,19 @@ morkBead* morkBeadMapIter::HereBead(mork</span>
<a href="#l11.61"></a><span id="l11.61">   this-&gt;Here(ev, &amp;bead, /*val*/ (void*)0);</span>
<a href="#l11.62"></a><span id="l11.62">   return bead;</span>
<a href="#l11.63"></a><span id="l11.63"> }</span>
<a href="#l11.64"></a><span id="l11.64"> </span>
<a href="#l11.65"></a><span id="l11.65"> void morkBeadMapIter::CutHereBead(morkEnv* ev) {</span>
<a href="#l11.66"></a><span id="l11.66">   this-&gt;CutHere(ev, /*key*/ (void*)0, /*val*/ (void*)0);</span>
<a href="#l11.67"></a><span id="l11.67"> }</span>
<a href="#l11.68"></a><span id="l11.68"> </span>
<a href="#l11.69"></a><span id="l11.69" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l11.70"></a><span id="l11.70" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l11.71"></a><span id="l11.71"> </span>
<a href="#l11.72"></a><span id="l11.72" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l11.73"></a><span id="l11.73" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l11.74"></a><span id="l11.74"> </span>
<a href="#l11.75"></a><span id="l11.75"> // ````` ````` ````` ````` `````</span>
<a href="#l11.76"></a><span id="l11.76"> // { ===== begin morkNode interface =====</span>
<a href="#l11.77"></a><span id="l11.77"> </span>
<a href="#l11.78"></a><span id="l11.78"> /*public virtual*/ void morkBeadProbeMap::CloseMorkNode(</span>
<a href="#l11.79"></a><span id="l11.79">     morkEnv* ev)  // CloseBeadProbeMap() if open</span>
<a href="#l11.80"></a><span id="l11.80"> {</span>
<a href="#l11.81"></a><span id="l11.81">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l11.82"></a><span id="l11.82" class="difflineat">@@ -353,9 +353,9 @@ mork_num morkBeadProbeMap::CutAllBeads(m</span>
<a href="#l11.83"></a><span id="l11.83">     b-&gt;CutStrongRef(ev);</span>
<a href="#l11.84"></a><span id="l11.84">     b = i.NextBead(ev);</span>
<a href="#l11.85"></a><span id="l11.85">   }</span>
<a href="#l11.86"></a><span id="l11.86">   this-&gt;MapCutAll(ev);</span>
<a href="#l11.87"></a><span id="l11.87"> </span>
<a href="#l11.88"></a><span id="l11.88">   return outSlots;</span>
<a href="#l11.89"></a><span id="l11.89"> }</span>
<a href="#l11.90"></a><span id="l11.90"> </span>
<a href="#l11.91"></a><span id="l11.91" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l11.92"></a><span id="l11.92" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/db/mork/src/morkBead.h</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/db/mork/src/morkBead.h</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -17,17 +17,17 @@</span>
<a href="#l12.4"></a><span id="l12.4"> #ifndef _MORKMAP_</span>
<a href="#l12.5"></a><span id="l12.5"> #  include &quot;morkMap.h&quot;</span>
<a href="#l12.6"></a><span id="l12.6"> #endif</span>
<a href="#l12.7"></a><span id="l12.7"> </span>
<a href="#l12.8"></a><span id="l12.8"> #ifndef _MORKPROBEMAP_</span>
<a href="#l12.9"></a><span id="l12.9"> #  include &quot;morkProbeMap.h&quot;</span>
<a href="#l12.10"></a><span id="l12.10"> #endif</span>
<a href="#l12.11"></a><span id="l12.11"> </span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l12.14"></a><span id="l12.14"> </span>
<a href="#l12.15"></a><span id="l12.15"> #define morkDerived_kBead /*i*/ 0x426F /* ascii 'Bo' */</span>
<a href="#l12.16"></a><span id="l12.16"> </span>
<a href="#l12.17"></a><span id="l12.17"> /*| morkBead: subclass of morkNode that adds knowledge of db suite factory</span>
<a href="#l12.18"></a><span id="l12.18"> **| and containing port to those objects that are exposed as instances of</span>
<a href="#l12.19"></a><span id="l12.19"> **| nsIMdbBead in the public interface.</span>
<a href="#l12.20"></a><span id="l12.20"> |*/</span>
<a href="#l12.21"></a><span id="l12.21"> class morkBead : public morkNode {</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineat">@@ -88,17 +88,17 @@ class morkBead : public morkNode {</span>
<a href="#l12.23"></a><span id="l12.23">     morkNode::SlotWeakNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l12.24"></a><span id="l12.24">   }</span>
<a href="#l12.25"></a><span id="l12.25"> </span>
<a href="#l12.26"></a><span id="l12.26">   static void SlotStrongBead(morkBead* me, morkEnv* ev, morkBead** ioSlot) {</span>
<a href="#l12.27"></a><span id="l12.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l12.28"></a><span id="l12.28">   }</span>
<a href="#l12.29"></a><span id="l12.29"> };</span>
<a href="#l12.30"></a><span id="l12.30"> </span>
<a href="#l12.31"></a><span id="l12.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l12.33"></a><span id="l12.33"> </span>
<a href="#l12.34"></a><span id="l12.34"> #define morkDerived_kBeadMap /*i*/ 0x744D /* ascii 'bM' */</span>
<a href="#l12.35"></a><span id="l12.35"> </span>
<a href="#l12.36"></a><span id="l12.36"> /*| morkBeadMap: maps bead -&gt; bead (key only using mBead_Color)</span>
<a href="#l12.37"></a><span id="l12.37"> |*/</span>
<a href="#l12.38"></a><span id="l12.38"> class morkBeadMap : public morkMap {</span>
<a href="#l12.39"></a><span id="l12.39">   // { ===== begin morkNode interface =====</span>
<a href="#l12.40"></a><span id="l12.40">  public:  // morkNode virtual methods</span>
<a href="#l12.41"></a><span id="l12.41" class="difflineat">@@ -151,17 +151,17 @@ class morkBeadMapIter : public morkMapIt</span>
<a href="#l12.42"></a><span id="l12.42">   }</span>
<a href="#l12.43"></a><span id="l12.43"> </span>
<a href="#l12.44"></a><span id="l12.44">   morkBead* FirstBead(morkEnv* ev);</span>
<a href="#l12.45"></a><span id="l12.45">   morkBead* NextBead(morkEnv* ev);</span>
<a href="#l12.46"></a><span id="l12.46">   morkBead* HereBead(morkEnv* ev);</span>
<a href="#l12.47"></a><span id="l12.47">   void CutHereBead(morkEnv* ev);</span>
<a href="#l12.48"></a><span id="l12.48"> };</span>
<a href="#l12.49"></a><span id="l12.49"> </span>
<a href="#l12.50"></a><span id="l12.50" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l12.51"></a><span id="l12.51" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l12.52"></a><span id="l12.52"> </span>
<a href="#l12.53"></a><span id="l12.53"> #define morkDerived_kBeadProbeMap /*i*/ 0x6D74 /* ascii 'mb' */</span>
<a href="#l12.54"></a><span id="l12.54"> </span>
<a href="#l12.55"></a><span id="l12.55"> /*| morkBeadProbeMap: maps bead -&gt; bead (key only using mBead_Color)</span>
<a href="#l12.56"></a><span id="l12.56"> |*/</span>
<a href="#l12.57"></a><span id="l12.57"> class morkBeadProbeMap : public morkProbeMap {</span>
<a href="#l12.58"></a><span id="l12.58">   // { ===== begin morkNode interface =====</span>
<a href="#l12.59"></a><span id="l12.59">  public:  // morkNode virtual methods</span>
<a href="#l12.60"></a><span id="l12.60" class="difflineat">@@ -234,11 +234,11 @@ class morkBeadProbeMapIter</span>
<a href="#l12.61"></a><span id="l12.61"> </span>
<a href="#l12.62"></a><span id="l12.62">   morkBead* FirstBead(morkEnv* ev) { return (morkBead*)this-&gt;IterFirstKey(ev); }</span>
<a href="#l12.63"></a><span id="l12.63"> </span>
<a href="#l12.64"></a><span id="l12.64">   morkBead* NextBead(morkEnv* ev) { return (morkBead*)this-&gt;IterNextKey(ev); }</span>
<a href="#l12.65"></a><span id="l12.65"> </span>
<a href="#l12.66"></a><span id="l12.66">   morkBead* HereBead(morkEnv* ev) { return (morkBead*)this-&gt;IterHereKey(ev); }</span>
<a href="#l12.67"></a><span id="l12.67"> };</span>
<a href="#l12.68"></a><span id="l12.68"> </span>
<a href="#l12.69"></a><span id="l12.69" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l12.70"></a><span id="l12.70" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l12.71"></a><span id="l12.71"> </span>
<a href="#l12.72"></a><span id="l12.72"> #endif /* _MORKBEAD_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/db/mork/src/morkBlob.cpp</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/db/mork/src/morkBlob.cpp</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -14,29 +14,29 @@</span>
<a href="#l13.4"></a><span id="l13.4"> #ifndef _MORKBLOB_</span>
<a href="#l13.5"></a><span id="l13.5"> #  include &quot;morkBlob.h&quot;</span>
<a href="#l13.6"></a><span id="l13.6"> #endif</span>
<a href="#l13.7"></a><span id="l13.7"> </span>
<a href="#l13.8"></a><span id="l13.8"> #ifndef _MORKENV_</span>
<a href="#l13.9"></a><span id="l13.9"> #  include &quot;morkEnv.h&quot;</span>
<a href="#l13.10"></a><span id="l13.10"> #endif</span>
<a href="#l13.11"></a><span id="l13.11"> </span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l13.14"></a><span id="l13.14"> </span>
<a href="#l13.15"></a><span id="l13.15"> /*static*/ void morkBuf::NilBufBodyError(morkEnv* ev) {</span>
<a href="#l13.16"></a><span id="l13.16">   ev-&gt;NewError(&quot;nil mBuf_Body&quot;);</span>
<a href="#l13.17"></a><span id="l13.17"> }</span>
<a href="#l13.18"></a><span id="l13.18"> </span>
<a href="#l13.19"></a><span id="l13.19" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l13.21"></a><span id="l13.21"> </span>
<a href="#l13.22"></a><span id="l13.22"> /*static*/ void morkBlob::BlobFillOverSizeError(morkEnv* ev) {</span>
<a href="#l13.23"></a><span id="l13.23">   ev-&gt;NewError(&quot;mBuf_Fill &gt; mBlob_Size&quot;);</span>
<a href="#l13.24"></a><span id="l13.24"> }</span>
<a href="#l13.25"></a><span id="l13.25"> </span>
<a href="#l13.26"></a><span id="l13.26" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l13.27"></a><span id="l13.27" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l13.28"></a><span id="l13.28"> </span>
<a href="#l13.29"></a><span id="l13.29"> mork_bool morkBlob::GrowBlob(morkEnv* ev, nsIMdbHeap* ioHeap,</span>
<a href="#l13.30"></a><span id="l13.30">                              mork_size inNewSize) {</span>
<a href="#l13.31"></a><span id="l13.31">   if (ioHeap) {</span>
<a href="#l13.32"></a><span id="l13.32">     if (!mBuf_Body)  // no body? implies zero sized?</span>
<a href="#l13.33"></a><span id="l13.33">       mBlob_Size = 0;</span>
<a href="#l13.34"></a><span id="l13.34"> </span>
<a href="#l13.35"></a><span id="l13.35">     if (mBuf_Fill &gt; mBlob_Size)  // fill more than size?</span>
<a href="#l13.36"></a><span id="l13.36" class="difflineat">@@ -65,17 +65,17 @@ mork_bool morkBlob::GrowBlob(morkEnv* ev</span>
<a href="#l13.37"></a><span id="l13.37">     ev-&gt;NilPointerError();</span>
<a href="#l13.38"></a><span id="l13.38"> </span>
<a href="#l13.39"></a><span id="l13.39">   if (ev-&gt;Good() &amp;&amp; mBlob_Size &lt; inNewSize)</span>
<a href="#l13.40"></a><span id="l13.40">     ev-&gt;NewError(&quot;mBlob_Size &lt; inNewSize&quot;);</span>
<a href="#l13.41"></a><span id="l13.41"> </span>
<a href="#l13.42"></a><span id="l13.42">   return ev-&gt;Good();</span>
<a href="#l13.43"></a><span id="l13.43"> }</span>
<a href="#l13.44"></a><span id="l13.44"> </span>
<a href="#l13.45"></a><span id="l13.45" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l13.46"></a><span id="l13.46" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l13.47"></a><span id="l13.47"> </span>
<a href="#l13.48"></a><span id="l13.48"> morkCoil::morkCoil(morkEnv* ev, nsIMdbHeap* ioHeap) {</span>
<a href="#l13.49"></a><span id="l13.49">   mBuf_Body = 0;</span>
<a href="#l13.50"></a><span id="l13.50">   mBuf_Fill = 0;</span>
<a href="#l13.51"></a><span id="l13.51">   mBlob_Size = 0;</span>
<a href="#l13.52"></a><span id="l13.52">   mText_Form = 0;</span>
<a href="#l13.53"></a><span id="l13.53">   mCoil_Heap = ioHeap;</span>
<a href="#l13.54"></a><span id="l13.54">   if (!ioHeap) ev-&gt;NilPointerError();</span>
<a href="#l13.55"></a><span id="l13.55" class="difflineat">@@ -88,9 +88,9 @@ void morkCoil::CloseCoil(morkEnv* ev) {</span>
<a href="#l13.56"></a><span id="l13.56">   mBuf_Body = 0;</span>
<a href="#l13.57"></a><span id="l13.57">   mCoil_Heap = 0;</span>
<a href="#l13.58"></a><span id="l13.58"> </span>
<a href="#l13.59"></a><span id="l13.59">   if (body &amp;&amp; heap) {</span>
<a href="#l13.60"></a><span id="l13.60">     heap-&gt;Free(ev-&gt;AsMdbEnv(), body);</span>
<a href="#l13.61"></a><span id="l13.61">   }</span>
<a href="#l13.62"></a><span id="l13.62"> }</span>
<a href="#l13.63"></a><span id="l13.63"> </span>
<a href="#l13.64"></a><span id="l13.64" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l13.65"></a><span id="l13.65" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/db/mork/src/morkBlob.h</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/db/mork/src/morkBlob.h</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -5,17 +5,17 @@</span>
<a href="#l14.4"></a><span id="l14.4"> </span>
<a href="#l14.5"></a><span id="l14.5"> #ifndef _MORKBLOB_</span>
<a href="#l14.6"></a><span id="l14.6"> #define _MORKBLOB_ 1</span>
<a href="#l14.7"></a><span id="l14.7"> </span>
<a href="#l14.8"></a><span id="l14.8"> #ifndef _MORK_</span>
<a href="#l14.9"></a><span id="l14.9"> #  include &quot;mork.h&quot;</span>
<a href="#l14.10"></a><span id="l14.10"> #endif</span>
<a href="#l14.11"></a><span id="l14.11"> </span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l14.14"></a><span id="l14.14"> </span>
<a href="#l14.15"></a><span id="l14.15"> /*| Buf: the minimum needed to describe location and content length.</span>
<a href="#l14.16"></a><span id="l14.16"> **| This is typically only enough to read from this buffer, since</span>
<a href="#l14.17"></a><span id="l14.17"> **| one cannot write effectively without knowing the size of a buf.</span>
<a href="#l14.18"></a><span id="l14.18"> |*/</span>
<a href="#l14.19"></a><span id="l14.19"> class morkBuf {  // subset of nsIMdbYarn slots</span>
<a href="#l14.20"></a><span id="l14.20">  public:</span>
<a href="#l14.21"></a><span id="l14.21">   void* mBuf_Body;      // space for holding any binary content</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineat">@@ -130,11 +130,11 @@ class morkCoil : public morkText {  // s</span>
<a href="#l14.23"></a><span id="l14.23">     return this-&gt;GrowBlob(ev, mCoil_Heap, inNewSize);</span>
<a href="#l14.24"></a><span id="l14.24">   }</span>
<a href="#l14.25"></a><span id="l14.25"> </span>
<a href="#l14.26"></a><span id="l14.26">  private:  // copying is not allowed</span>
<a href="#l14.27"></a><span id="l14.27">   morkCoil(const morkCoil&amp; other);</span>
<a href="#l14.28"></a><span id="l14.28">   morkCoil&amp; operator=(const morkCoil&amp; other);</span>
<a href="#l14.29"></a><span id="l14.29"> };</span>
<a href="#l14.30"></a><span id="l14.30"> </span>
<a href="#l14.31"></a><span id="l14.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l14.33"></a><span id="l14.33"> </span>
<a href="#l14.34"></a><span id="l14.34"> #endif /* _MORKBLOB_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/db/mork/src/morkBuilder.cpp</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/db/mork/src/morkBuilder.cpp</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -58,17 +58,17 @@</span>
<a href="#l15.4"></a><span id="l15.4"> #ifndef _MORKATOMSPACE_</span>
<a href="#l15.5"></a><span id="l15.5"> #  include &quot;morkAtomSpace.h&quot;</span>
<a href="#l15.6"></a><span id="l15.6"> #endif</span>
<a href="#l15.7"></a><span id="l15.7"> </span>
<a href="#l15.8"></a><span id="l15.8"> #ifndef _MORKROWSPACE_</span>
<a href="#l15.9"></a><span id="l15.9"> #  include &quot;morkRowSpace.h&quot;</span>
<a href="#l15.10"></a><span id="l15.10"> #endif</span>
<a href="#l15.11"></a><span id="l15.11"> </span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l15.14"></a><span id="l15.14"> </span>
<a href="#l15.15"></a><span id="l15.15"> // ````` ````` ````` ````` `````</span>
<a href="#l15.16"></a><span id="l15.16"> // { ===== begin morkNode interface =====</span>
<a href="#l15.17"></a><span id="l15.17"> </span>
<a href="#l15.18"></a><span id="l15.18"> /*public virtual*/ void morkBuilder::CloseMorkNode(</span>
<a href="#l15.19"></a><span id="l15.19">     morkEnv* ev)  // CloseBuilder() only if open</span>
<a href="#l15.20"></a><span id="l15.20"> {</span>
<a href="#l15.21"></a><span id="l15.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l15.22"></a><span id="l15.22" class="difflineat">@@ -884,9 +884,9 @@ morkCell* morkBuilder::AddBuilderCell(mo</span>
<a href="#l15.23"></a><span id="l15.23">         if (table)  // found or created such a table?</span>
<a href="#l15.24"></a><span id="l15.24">           table-&gt;AddTableGcUse(ev);</span>
<a href="#l15.25"></a><span id="l15.25">       }</span>
<a href="#l15.26"></a><span id="l15.26">     }</span>
<a href="#l15.27"></a><span id="l15.27">   } else</span>
<a href="#l15.28"></a><span id="l15.28">     this-&gt;NilBuilderCellError(ev);</span>
<a href="#l15.29"></a><span id="l15.29"> }</span>
<a href="#l15.30"></a><span id="l15.30"> </span>
<a href="#l15.31"></a><span id="l15.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l15.32"></a><span id="l15.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/db/mork/src/morkBuilder.h</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/db/mork/src/morkBuilder.h</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -9,17 +9,17 @@</span>
<a href="#l16.4"></a><span id="l16.4"> #ifndef _MORK_</span>
<a href="#l16.5"></a><span id="l16.5"> #  include &quot;mork.h&quot;</span>
<a href="#l16.6"></a><span id="l16.6"> #endif</span>
<a href="#l16.7"></a><span id="l16.7"> </span>
<a href="#l16.8"></a><span id="l16.8"> #ifndef _MORKPARSER_</span>
<a href="#l16.9"></a><span id="l16.9"> #  include &quot;morkParser.h&quot;</span>
<a href="#l16.10"></a><span id="l16.10"> #endif</span>
<a href="#l16.11"></a><span id="l16.11"> </span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l16.14"></a><span id="l16.14"> </span>
<a href="#l16.15"></a><span id="l16.15"> /*| kCellsVecSize: length of cell vector buffer inside morkBuilder</span>
<a href="#l16.16"></a><span id="l16.16"> |*/</span>
<a href="#l16.17"></a><span id="l16.17"> #define morkBuilder_kCellsVecSize 64</span>
<a href="#l16.18"></a><span id="l16.18"> </span>
<a href="#l16.19"></a><span id="l16.19"> #define morkBuilder_kDefaultBytesPerParseSegment 512 /* plausible to big */</span>
<a href="#l16.20"></a><span id="l16.20"> </span>
<a href="#l16.21"></a><span id="l16.21"> #define morkDerived_kBuilder /*i*/ 0x4275 /* ascii 'Bu' */</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineat">@@ -293,11 +293,11 @@ class morkBuilder /*d*/ : public morkPar</span>
<a href="#l16.23"></a><span id="l16.23">   }</span>
<a href="#l16.24"></a><span id="l16.24"> </span>
<a href="#l16.25"></a><span id="l16.25">   static void SlotStrongBuilder(morkBuilder* me, morkEnv* ev,</span>
<a href="#l16.26"></a><span id="l16.26">                                 morkBuilder** ioSlot) {</span>
<a href="#l16.27"></a><span id="l16.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l16.28"></a><span id="l16.28">   }</span>
<a href="#l16.29"></a><span id="l16.29"> };</span>
<a href="#l16.30"></a><span id="l16.30"> </span>
<a href="#l16.31"></a><span id="l16.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l16.33"></a><span id="l16.33"> </span>
<a href="#l16.34"></a><span id="l16.34"> #endif /* _MORKBUILDER_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/db/mork/src/morkCell.cpp</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/db/mork/src/morkCell.cpp</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -26,17 +26,17 @@</span>
<a href="#l17.4"></a><span id="l17.4"> #ifndef _MORKENV_</span>
<a href="#l17.5"></a><span id="l17.5"> #  include &quot;morkEnv.h&quot;</span>
<a href="#l17.6"></a><span id="l17.6"> #endif</span>
<a href="#l17.7"></a><span id="l17.7"> </span>
<a href="#l17.8"></a><span id="l17.8"> #ifndef _MORKCELL_</span>
<a href="#l17.9"></a><span id="l17.9"> #  include &quot;morkCell.h&quot;</span>
<a href="#l17.10"></a><span id="l17.10"> #endif</span>
<a href="#l17.11"></a><span id="l17.11"> </span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l17.14"></a><span id="l17.14"> </span>
<a href="#l17.15"></a><span id="l17.15"> void morkCell::SetYarn(morkEnv* ev, const mdbYarn* inYarn, morkStore* ioStore) {</span>
<a href="#l17.16"></a><span id="l17.16">   morkAtom* atom = ioStore-&gt;YarnToAtom(ev, inYarn, true /* create */);</span>
<a href="#l17.17"></a><span id="l17.17">   if (atom) this-&gt;SetAtom(ev, atom, ioStore-&gt;StorePool());  // refcounts atom</span>
<a href="#l17.18"></a><span id="l17.18"> }</span>
<a href="#l17.19"></a><span id="l17.19"> </span>
<a href="#l17.20"></a><span id="l17.20"> void morkCell::GetYarn(morkEnv* ev, mdbYarn* outYarn) const {</span>
<a href="#l17.21"></a><span id="l17.21">   MORK_USED_1(ev);</span>
<a href="#l17.22"></a><span id="l17.22" class="difflineat">@@ -91,9 +91,9 @@ void morkCell::SetAtom(morkEnv* ev, mork</span>
<a href="#l17.23"></a><span id="l17.23">       }</span>
<a href="#l17.24"></a><span id="l17.24">     }</span>
<a href="#l17.25"></a><span id="l17.25">     if (ioAtom) ioAtom-&gt;AddCellUse(ev);</span>
<a href="#l17.26"></a><span id="l17.26"> </span>
<a href="#l17.27"></a><span id="l17.27">     mCell_Atom = ioAtom;</span>
<a href="#l17.28"></a><span id="l17.28">   }</span>
<a href="#l17.29"></a><span id="l17.29"> }</span>
<a href="#l17.30"></a><span id="l17.30"> </span>
<a href="#l17.31"></a><span id="l17.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l17.32"></a><span id="l17.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/db/mork/src/morkCell.h</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/db/mork/src/morkCell.h</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -5,17 +5,17 @@</span>
<a href="#l18.4"></a><span id="l18.4"> </span>
<a href="#l18.5"></a><span id="l18.5"> #ifndef _MORKCELL_</span>
<a href="#l18.6"></a><span id="l18.6"> #define _MORKCELL_ 1</span>
<a href="#l18.7"></a><span id="l18.7"> </span>
<a href="#l18.8"></a><span id="l18.8"> #ifndef _MORK_</span>
<a href="#l18.9"></a><span id="l18.9"> #  include &quot;mork.h&quot;</span>
<a href="#l18.10"></a><span id="l18.10"> #endif</span>
<a href="#l18.11"></a><span id="l18.11"> </span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l18.14"></a><span id="l18.14"> </span>
<a href="#l18.15"></a><span id="l18.15"> #define morkDelta_kShift 8          /* 8 bit shift */</span>
<a href="#l18.16"></a><span id="l18.16"> #define morkDelta_kChangeMask 0x0FF /* low 8 bit mask */</span>
<a href="#l18.17"></a><span id="l18.17"> #define morkDelta_kColumnMask (~(mork_column)morkDelta_kChangeMask)</span>
<a href="#l18.18"></a><span id="l18.18"> #define morkDelta_Init(self, cl, ch) \</span>
<a href="#l18.19"></a><span id="l18.19">   ((self) = ((cl) &lt;&lt; morkDelta_kShift) | (ch))</span>
<a href="#l18.20"></a><span id="l18.20"> #define morkDelta_Change(self) ((mork_change)((self)&amp;morkDelta_kChangeMask))</span>
<a href="#l18.21"></a><span id="l18.21"> #define morkDelta_Column(self) ((self) &gt;&gt; morkDelta_kShift)</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineat">@@ -81,11 +81,11 @@ class morkCell {  // minimal cell format</span>
<a href="#l18.23"></a><span id="l18.23">   // before calling SetAtom().  But use count is one higher after SetAtom().</span>
<a href="#l18.24"></a><span id="l18.24"> </span>
<a href="#l18.25"></a><span id="l18.25">   void SetYarn(morkEnv* ev, const mdbYarn* inYarn, morkStore* ioStore);</span>
<a href="#l18.26"></a><span id="l18.26"> </span>
<a href="#l18.27"></a><span id="l18.27">   void AliasYarn(morkEnv* ev, mdbYarn* outYarn) const;</span>
<a href="#l18.28"></a><span id="l18.28">   void GetYarn(morkEnv* ev, mdbYarn* outYarn) const;</span>
<a href="#l18.29"></a><span id="l18.29"> };</span>
<a href="#l18.30"></a><span id="l18.30"> </span>
<a href="#l18.31"></a><span id="l18.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l18.32"></a><span id="l18.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l18.33"></a><span id="l18.33"> </span>
<a href="#l18.34"></a><span id="l18.34"> #endif /* _MORKCELL_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/db/mork/src/morkCellObject.cpp</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/db/mork/src/morkCellObject.cpp</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -38,17 +38,17 @@</span>
<a href="#l19.4"></a><span id="l19.4"> #ifndef _MORKCELL_</span>
<a href="#l19.5"></a><span id="l19.5"> #  include &quot;morkCell.h&quot;</span>
<a href="#l19.6"></a><span id="l19.6"> #endif</span>
<a href="#l19.7"></a><span id="l19.7"> </span>
<a href="#l19.8"></a><span id="l19.8"> #ifndef _MORKSTORE_</span>
<a href="#l19.9"></a><span id="l19.9"> #  include &quot;morkStore.h&quot;</span>
<a href="#l19.10"></a><span id="l19.10"> #endif</span>
<a href="#l19.11"></a><span id="l19.11"> </span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l19.14"></a><span id="l19.14"> </span>
<a href="#l19.15"></a><span id="l19.15"> // ````` ````` ````` ````` `````</span>
<a href="#l19.16"></a><span id="l19.16"> // { ===== begin morkNode interface =====</span>
<a href="#l19.17"></a><span id="l19.17"> </span>
<a href="#l19.18"></a><span id="l19.18"> /*public virtual*/ void morkCellObject::CloseMorkNode(</span>
<a href="#l19.19"></a><span id="l19.19">     morkEnv* ev)  // CloseCellObject() only if open</span>
<a href="#l19.20"></a><span id="l19.20"> {</span>
<a href="#l19.21"></a><span id="l19.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineat">@@ -445,9 +445,9 @@ morkCellObject::GetChildTable(  // acces</span>
<a href="#l19.23"></a><span id="l19.23"> {</span>
<a href="#l19.24"></a><span id="l19.24">   NS_ASSERTION(false, &quot;not implemented&quot;);</span>
<a href="#l19.25"></a><span id="l19.25">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l19.26"></a><span id="l19.26"> }</span>
<a href="#l19.27"></a><span id="l19.27"> // } ----- end children methods -----</span>
<a href="#l19.28"></a><span id="l19.28"> </span>
<a href="#l19.29"></a><span id="l19.29"> // } ===== end nsIMdbCell methods =====</span>
<a href="#l19.30"></a><span id="l19.30"> </span>
<a href="#l19.31"></a><span id="l19.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l19.32"></a><span id="l19.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/db/mork/src/morkCellObject.h</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/db/mork/src/morkCellObject.h</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -13,17 +13,17 @@</span>
<a href="#l20.4"></a><span id="l20.4"> #ifndef _MORKNODE_</span>
<a href="#l20.5"></a><span id="l20.5"> #  include &quot;morkNode.h&quot;</span>
<a href="#l20.6"></a><span id="l20.6"> #endif</span>
<a href="#l20.7"></a><span id="l20.7"> </span>
<a href="#l20.8"></a><span id="l20.8"> #ifndef _MORKOBJECT_</span>
<a href="#l20.9"></a><span id="l20.9"> #  include &quot;morkObject.h&quot;</span>
<a href="#l20.10"></a><span id="l20.10"> #endif</span>
<a href="#l20.11"></a><span id="l20.11"> </span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l20.14"></a><span id="l20.14"> </span>
<a href="#l20.15"></a><span id="l20.15"> #define morkDerived_kCellObject /*i*/ 0x634F /* ascii 'cO' */</span>
<a href="#l20.16"></a><span id="l20.16"> </span>
<a href="#l20.17"></a><span id="l20.17"> class morkCellObject : public morkObject,</span>
<a href="#l20.18"></a><span id="l20.18">                        public nsIMdbCell {  // blob attribute in column scope</span>
<a href="#l20.19"></a><span id="l20.19"> </span>
<a href="#l20.20"></a><span id="l20.20">   // public: // slots inherited from morkObject (meant to inform only)</span>
<a href="#l20.21"></a><span id="l20.21">   // nsIMdbHeap*     mNode_Heap;</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineat">@@ -170,11 +170,11 @@ class morkCellObject : public morkObject</span>
<a href="#l20.23"></a><span id="l20.23">   }</span>
<a href="#l20.24"></a><span id="l20.24"> </span>
<a href="#l20.25"></a><span id="l20.25">   static void SlotStrongCellObject(morkCellObject* me, morkEnv* ev,</span>
<a href="#l20.26"></a><span id="l20.26">                                    morkCellObject** ioSlot) {</span>
<a href="#l20.27"></a><span id="l20.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l20.28"></a><span id="l20.28">   }</span>
<a href="#l20.29"></a><span id="l20.29"> };</span>
<a href="#l20.30"></a><span id="l20.30"> </span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l20.33"></a><span id="l20.33"> </span>
<a href="#l20.34"></a><span id="l20.34"> #endif /* _MORKCELLOBJECT_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/db/mork/src/morkCh.cpp</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/db/mork/src/morkCh.cpp</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -46,17 +46,17 @@</span>
<a href="#l21.4"></a><span id="l21.4"> #ifndef _MORKCH_</span>
<a href="#l21.5"></a><span id="l21.5"> #  include &quot;morkCh.h&quot;</span>
<a href="#l21.6"></a><span id="l21.6"> #endif</span>
<a href="#l21.7"></a><span id="l21.7"> </span>
<a href="#l21.8"></a><span id="l21.8"> #ifndef _MORKENV_</span>
<a href="#l21.9"></a><span id="l21.9"> #  include &quot;morkEnv.h&quot;</span>
<a href="#l21.10"></a><span id="l21.10"> #endif</span>
<a href="#l21.11"></a><span id="l21.11"> </span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l21.14"></a><span id="l21.14"> </span>
<a href="#l21.15"></a><span id="l21.15"> /* this byte char predicate source file derives from public domain Mithril */</span>
<a href="#l21.16"></a><span id="l21.16"> /* (that means much of this has a copyright dedicated to the public domain) */</span>
<a href="#l21.17"></a><span id="l21.17"> </span>
<a href="#l21.18"></a><span id="l21.18"> /*============================================================================*/</span>
<a href="#l21.19"></a><span id="l21.19"> /* morkCh_Type */</span>
<a href="#l21.20"></a><span id="l21.20"> </span>
<a href="#l21.21"></a><span id="l21.21"> const mork_flags morkCh_Type[] = /* derives from public domain Mithril table */</span>
<a href="#l21.22"></a><span id="l21.22" class="difflineat">@@ -336,9 +336,9 @@ const mork_flags morkCh_Type[] = /* deri</span>
<a href="#l21.23"></a><span id="l21.23">         0,</span>
<a href="#l21.24"></a><span id="l21.24">         0,</span>
<a href="#l21.25"></a><span id="l21.25">         0,</span>
<a href="#l21.26"></a><span id="l21.26">         0,</span>
<a href="#l21.27"></a><span id="l21.27">         0,</span>
<a href="#l21.28"></a><span id="l21.28">         0,</span>
<a href="#l21.29"></a><span id="l21.29"> };</span>
<a href="#l21.30"></a><span id="l21.30"> </span>
<a href="#l21.31"></a><span id="l21.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l21.32"></a><span id="l21.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/db/mork/src/morkConfig.cpp</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/db/mork/src/morkConfig.cpp</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -10,17 +10,17 @@</span>
<a href="#l22.4"></a><span id="l22.4"> #ifndef _MORK_</span>
<a href="#l22.5"></a><span id="l22.5"> #  include &quot;mork.h&quot;</span>
<a href="#l22.6"></a><span id="l22.6"> #endif</span>
<a href="#l22.7"></a><span id="l22.7"> </span>
<a href="#l22.8"></a><span id="l22.8"> #ifndef _MORKCONFIG_</span>
<a href="#l22.9"></a><span id="l22.9"> #  include &quot;morkConfig.h&quot;</span>
<a href="#l22.10"></a><span id="l22.10"> #endif</span>
<a href="#l22.11"></a><span id="l22.11"> </span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l22.14"></a><span id="l22.14"> </span>
<a href="#l22.15"></a><span id="l22.15"> void mork_assertion_signal(const char* inMessage) { NS_ERROR(inMessage); }</span>
<a href="#l22.16"></a><span id="l22.16"> </span>
<a href="#l22.17"></a><span id="l22.17"> #ifdef MORK_PROVIDE_STDLIB</span>
<a href="#l22.18"></a><span id="l22.18"> </span>
<a href="#l22.19"></a><span id="l22.19"> MORK_LIB_IMPL(mork_i4)</span>
<a href="#l22.20"></a><span id="l22.20"> mork_memcmp(const void* inOne, const void* inTwo, mork_size inSize) {</span>
<a href="#l22.21"></a><span id="l22.21">   const mork_u1* t = (const mork_u1*)inTwo;</span>
<a href="#l22.22"></a><span id="l22.22" class="difflineat">@@ -165,9 +165,9 @@ mork_strlen(const void* inString) {</span>
<a href="#l22.23"></a><span id="l22.23">   while (*++s) /* preincrement is cheapest */</span>
<a href="#l22.24"></a><span id="l22.24">     ;          /* empty */</span>
<a href="#l22.25"></a><span id="l22.25"> </span>
<a href="#l22.26"></a><span id="l22.26">   return s - ((const mork_u1*)inString);  // distance from original address</span>
<a href="#l22.27"></a><span id="l22.27"> }</span>
<a href="#l22.28"></a><span id="l22.28"> </span>
<a href="#l22.29"></a><span id="l22.29"> #endif /*MORK_PROVIDE_STDLIB*/</span>
<a href="#l22.30"></a><span id="l22.30"> </span>
<a href="#l22.31"></a><span id="l22.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l22.32"></a><span id="l22.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/db/mork/src/morkConfig.h</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/db/mork/src/morkConfig.h</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -1,17 +1,17 @@</span>
<a href="#l23.4"></a><span id="l23.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-  */</span>
<a href="#l23.5"></a><span id="l23.5"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l23.6"></a><span id="l23.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l23.7"></a><span id="l23.7">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l23.8"></a><span id="l23.8"> </span>
<a href="#l23.9"></a><span id="l23.9"> #ifndef _MORKCONFIG_</span>
<a href="#l23.10"></a><span id="l23.10"> #define _MORKCONFIG_ 1</span>
<a href="#l23.11"></a><span id="l23.11"> </span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l23.14"></a><span id="l23.14"> </span>
<a href="#l23.15"></a><span id="l23.15"> // { %%%%% begin debug mode options in Mork %%%%%</span>
<a href="#l23.16"></a><span id="l23.16"> #define MORK_DEBUG 1</span>
<a href="#l23.17"></a><span id="l23.17"> // } %%%%% end debug mode options in Mork %%%%%</span>
<a href="#l23.18"></a><span id="l23.18"> </span>
<a href="#l23.19"></a><span id="l23.19"> #ifdef MORK_DEBUG</span>
<a href="#l23.20"></a><span id="l23.20"> #  define MORK_MAX_CODE_COMPILE 1</span>
<a href="#l23.21"></a><span id="l23.21"> #endif</span>
<a href="#l23.22"></a><span id="l23.22" class="difflineat">@@ -160,11 +160,11 @@ MORK_LIB(mork_size) mork_strlen(const vo</span>
<a href="#l23.23"></a><span id="l23.23"> #  define MORK_STRCPY(dest, src) mork_strcpy(dest, src)</span>
<a href="#l23.24"></a><span id="l23.24"> #  define MORK_STRCMP(one, two) mork_strcmp(one, two)</span>
<a href="#l23.25"></a><span id="l23.25"> #  define MORK_STRNCMP(one, two, length) mork_strncmp(one, two, length)</span>
<a href="#l23.26"></a><span id="l23.26"> #  define MORK_STRLEN(string) mork_strlen(string)</span>
<a href="#l23.27"></a><span id="l23.27"> #endif /*MORK_PROVIDE_STDLIB*/</span>
<a href="#l23.28"></a><span id="l23.28"> </span>
<a href="#l23.29"></a><span id="l23.29"> // } %%%%% end standard c utility methods %%%%%</span>
<a href="#l23.30"></a><span id="l23.30"> </span>
<a href="#l23.31"></a><span id="l23.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l23.32"></a><span id="l23.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l23.33"></a><span id="l23.33"> </span>
<a href="#l23.34"></a><span id="l23.34"> #endif /* _MORKCONFIG_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/db/mork/src/morkCursor.cpp</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/db/mork/src/morkCursor.cpp</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -22,17 +22,17 @@</span>
<a href="#l24.4"></a><span id="l24.4"> #ifndef _MORKENV_</span>
<a href="#l24.5"></a><span id="l24.5"> #  include &quot;morkEnv.h&quot;</span>
<a href="#l24.6"></a><span id="l24.6"> #endif</span>
<a href="#l24.7"></a><span id="l24.7"> </span>
<a href="#l24.8"></a><span id="l24.8"> #ifndef _MORKCURSOR_</span>
<a href="#l24.9"></a><span id="l24.9"> #  include &quot;morkCursor.h&quot;</span>
<a href="#l24.10"></a><span id="l24.10"> #endif</span>
<a href="#l24.11"></a><span id="l24.11"> </span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l24.14"></a><span id="l24.14"> </span>
<a href="#l24.15"></a><span id="l24.15"> // ````` ````` ````` ````` `````</span>
<a href="#l24.16"></a><span id="l24.16"> // { ===== begin morkNode interface =====</span>
<a href="#l24.17"></a><span id="l24.17"> </span>
<a href="#l24.18"></a><span id="l24.18"> /*public virtual*/ void morkCursor::CloseMorkNode(</span>
<a href="#l24.19"></a><span id="l24.19">     morkEnv* ev)  // CloseCursor() only if open</span>
<a href="#l24.20"></a><span id="l24.20"> {</span>
<a href="#l24.21"></a><span id="l24.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l24.22"></a><span id="l24.22" class="difflineat">@@ -165,9 +165,9 @@ morkCursor::SetDoFailOnSeedOutOfSync(nsI</span>
<a href="#l24.23"></a><span id="l24.23"> }</span>
<a href="#l24.24"></a><span id="l24.24"> </span>
<a href="#l24.25"></a><span id="l24.25"> NS_IMETHODIMP</span>
<a href="#l24.26"></a><span id="l24.26"> morkCursor::GetDoFailOnSeedOutOfSync(nsIMdbEnv* mev, mdb_bool* outFail) {</span>
<a href="#l24.27"></a><span id="l24.27">   NS_ASSERTION(false, &quot;not implemented&quot;);</span>
<a href="#l24.28"></a><span id="l24.28">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l24.29"></a><span id="l24.29"> }</span>
<a href="#l24.30"></a><span id="l24.30"> </span>
<a href="#l24.31"></a><span id="l24.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l24.32"></a><span id="l24.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/db/mork/src/morkCursor.h</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/db/mork/src/morkCursor.h</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -9,17 +9,17 @@</span>
<a href="#l25.4"></a><span id="l25.4"> #ifndef _MORK_</span>
<a href="#l25.5"></a><span id="l25.5"> #  include &quot;mork.h&quot;</span>
<a href="#l25.6"></a><span id="l25.6"> #endif</span>
<a href="#l25.7"></a><span id="l25.7"> </span>
<a href="#l25.8"></a><span id="l25.8"> #ifndef _MORKOBJECT_</span>
<a href="#l25.9"></a><span id="l25.9"> #  include &quot;morkObject.h&quot;</span>
<a href="#l25.10"></a><span id="l25.10"> #endif</span>
<a href="#l25.11"></a><span id="l25.11"> </span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l25.14"></a><span id="l25.14"> </span>
<a href="#l25.15"></a><span id="l25.15"> #define morkDerived_kCursor /*i*/ 0x4375 /* ascii 'Cu' */</span>
<a href="#l25.16"></a><span id="l25.16"> </span>
<a href="#l25.17"></a><span id="l25.17"> class morkCursor : public morkObject,</span>
<a href="#l25.18"></a><span id="l25.18">                    public nsIMdbCursor {  // collection iterator</span>
<a href="#l25.19"></a><span id="l25.19"> </span>
<a href="#l25.20"></a><span id="l25.20">   // public: // slots inherited from morkObject (meant to inform only)</span>
<a href="#l25.21"></a><span id="l25.21">   // nsIMdbHeap*     mNode_Heap;</span>
<a href="#l25.22"></a><span id="l25.22" class="difflineat">@@ -124,11 +124,11 @@ class morkCursor : public morkObject,</span>
<a href="#l25.23"></a><span id="l25.23">   }</span>
<a href="#l25.24"></a><span id="l25.24"> </span>
<a href="#l25.25"></a><span id="l25.25">   static void SlotStrongCursor(morkCursor* me, morkEnv* ev,</span>
<a href="#l25.26"></a><span id="l25.26">                                morkCursor** ioSlot) {</span>
<a href="#l25.27"></a><span id="l25.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l25.28"></a><span id="l25.28">   }</span>
<a href="#l25.29"></a><span id="l25.29"> };</span>
<a href="#l25.30"></a><span id="l25.30"> </span>
<a href="#l25.31"></a><span id="l25.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l25.32"></a><span id="l25.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l25.33"></a><span id="l25.33"> </span>
<a href="#l25.34"></a><span id="l25.34"> #endif /* _MORKCURSOR_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/db/mork/src/morkEnv.cpp</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/db/mork/src/morkEnv.cpp</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -24,17 +24,17 @@</span>
<a href="#l26.4"></a><span id="l26.4"> #endif</span>
<a href="#l26.5"></a><span id="l26.5"> </span>
<a href="#l26.6"></a><span id="l26.6"> #ifndef _MORKFACTORY_</span>
<a href="#l26.7"></a><span id="l26.7"> #  include &quot;morkFactory.h&quot;</span>
<a href="#l26.8"></a><span id="l26.8"> #endif</span>
<a href="#l26.9"></a><span id="l26.9"> </span>
<a href="#l26.10"></a><span id="l26.10"> #include &quot;mozilla/Char16.h&quot;</span>
<a href="#l26.11"></a><span id="l26.11"> </span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l26.14"></a><span id="l26.14"> </span>
<a href="#l26.15"></a><span id="l26.15"> // ````` ````` ````` ````` `````</span>
<a href="#l26.16"></a><span id="l26.16"> // { ===== begin morkNode interface =====</span>
<a href="#l26.17"></a><span id="l26.17"> </span>
<a href="#l26.18"></a><span id="l26.18"> /*public virtual*/ void morkEnv::CloseMorkNode(</span>
<a href="#l26.19"></a><span id="l26.19">     morkEnv* ev) /*i*/  // CloseEnv() only if open</span>
<a href="#l26.20"></a><span id="l26.20"> {</span>
<a href="#l26.21"></a><span id="l26.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l26.22"></a><span id="l26.22" class="difflineat">@@ -509,9 +509,9 @@ morkEnv::ClearWarnings()  // clear warni</span>
<a href="#l26.23"></a><span id="l26.23"> NS_IMETHODIMP</span>
<a href="#l26.24"></a><span id="l26.24"> morkEnv::ClearErrorsAndWarnings()  // clear both errors &amp; warnings</span>
<a href="#l26.25"></a><span id="l26.25"> {</span>
<a href="#l26.26"></a><span id="l26.26">   ClearMorkErrorsAndWarnings();</span>
<a href="#l26.27"></a><span id="l26.27">   return NS_OK;</span>
<a href="#l26.28"></a><span id="l26.28"> }</span>
<a href="#l26.29"></a><span id="l26.29"> // } ===== end nsIMdbEnv methods =====</span>
<a href="#l26.30"></a><span id="l26.30"> </span>
<a href="#l26.31"></a><span id="l26.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l26.32"></a><span id="l26.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/db/mork/src/morkEnv.h</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/db/mork/src/morkEnv.h</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -17,17 +17,17 @@</span>
<a href="#l27.4"></a><span id="l27.4"> #ifndef _MORKPOOL_</span>
<a href="#l27.5"></a><span id="l27.5"> #  include &quot;morkPool.h&quot;</span>
<a href="#l27.6"></a><span id="l27.6"> #endif</span>
<a href="#l27.7"></a><span id="l27.7"> </span>
<a href="#l27.8"></a><span id="l27.8"> // sean was here</span>
<a href="#l27.9"></a><span id="l27.9"> #include &quot;mozilla/Path.h&quot;</span>
<a href="#l27.10"></a><span id="l27.10"> #include &quot;nsError.h&quot;</span>
<a href="#l27.11"></a><span id="l27.11"> </span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l27.14"></a><span id="l27.14"> </span>
<a href="#l27.15"></a><span id="l27.15"> #define morkDerived_kEnv /*i*/ 0x4576 /* ascii 'Ev' */</span>
<a href="#l27.16"></a><span id="l27.16"> </span>
<a href="#l27.17"></a><span id="l27.17"> // use NS error codes to make Mork easier to use with the rest of mozilla</span>
<a href="#l27.18"></a><span id="l27.18"> #define morkEnv_kNoError NS_SUCCEEDED /* no error has happened */</span>
<a href="#l27.19"></a><span id="l27.19"> #define morkEnv_kNonEnvTypeError \</span>
<a href="#l27.20"></a><span id="l27.20">   NS_ERROR_FAILURE /* morkEnv::IsEnv() is false */</span>
<a href="#l27.21"></a><span id="l27.21"> </span>
<a href="#l27.22"></a><span id="l27.22" class="difflineat">@@ -211,11 +211,11 @@ class morkEnv : public morkObject, publi</span>
<a href="#l27.23"></a><span id="l27.23">         &quot; should not have a public destructor. &quot;                             \</span>
<a href="#l27.24"></a><span id="l27.24">         &quot;Try to make this class's destructor non-public. If that is really &quot; \</span>
<a href="#l27.25"></a><span id="l27.25">         &quot;not possible, you can whitelist this class by providing a &quot;         \</span>
<a href="#l27.26"></a><span id="l27.26">         &quot;HasDangerousPublicDestructor specialization for it.&quot;);</span>
<a href="#l27.27"></a><span id="l27.27"> #else</span>
<a href="#l27.28"></a><span id="l27.28"> #  define MOZ_ASSERT_TYPE_OK_FOR_REFCOUNTING(X)</span>
<a href="#l27.29"></a><span id="l27.29"> #endif</span>
<a href="#l27.30"></a><span id="l27.30"> </span>
<a href="#l27.31"></a><span id="l27.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l27.32"></a><span id="l27.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l27.33"></a><span id="l27.33"> </span>
<a href="#l27.34"></a><span id="l27.34"> #endif /* _MORKENV_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/db/mork/src/morkFactory.cpp</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/db/mork/src/morkFactory.cpp</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -41,17 +41,17 @@</span>
<a href="#l28.4"></a><span id="l28.4"> </span>
<a href="#l28.5"></a><span id="l28.5"> #ifndef _MORKTHUMB_</span>
<a href="#l28.6"></a><span id="l28.6"> #  include &quot;morkThumb.h&quot;</span>
<a href="#l28.7"></a><span id="l28.7"> #endif</span>
<a href="#l28.8"></a><span id="l28.8"> </span>
<a href="#l28.9"></a><span id="l28.9"> #ifndef _MORKWRITER_</span>
<a href="#l28.10"></a><span id="l28.10"> #  include &quot;morkWriter.h&quot;</span>
<a href="#l28.11"></a><span id="l28.11"> #endif</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l28.14"></a><span id="l28.14"> </span>
<a href="#l28.15"></a><span id="l28.15"> // ````` ````` ````` ````` `````</span>
<a href="#l28.16"></a><span id="l28.16"> // { ===== begin morkNode interface =====</span>
<a href="#l28.17"></a><span id="l28.17"> </span>
<a href="#l28.18"></a><span id="l28.18"> /*public virtual*/ void morkFactory::CloseMorkNode(</span>
<a href="#l28.19"></a><span id="l28.19">     morkEnv* ev) /*i*/  // CloseFactory() only if open</span>
<a href="#l28.20"></a><span id="l28.20"> {</span>
<a href="#l28.21"></a><span id="l28.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l28.22"></a><span id="l28.22" class="difflineat">@@ -513,9 +513,9 @@ morkFactory::CreateNewFileStore(  // cre</span>
<a href="#l28.23"></a><span id="l28.23">   }</span>
<a href="#l28.24"></a><span id="l28.24">   if (acqStore) *acqStore = outStore;</span>
<a href="#l28.25"></a><span id="l28.25">   return outErr;</span>
<a href="#l28.26"></a><span id="l28.26"> }</span>
<a href="#l28.27"></a><span id="l28.27"> // } ----- end store methods -----</span>
<a href="#l28.28"></a><span id="l28.28"> </span>
<a href="#l28.29"></a><span id="l28.29"> // } ===== end nsIMdbFactory methods =====</span>
<a href="#l28.30"></a><span id="l28.30"> </span>
<a href="#l28.31"></a><span id="l28.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l28.32"></a><span id="l28.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/db/mork/src/morkFactory.h</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/db/mork/src/morkFactory.h</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -17,17 +17,17 @@</span>
<a href="#l29.4"></a><span id="l29.4"> #ifndef _MORKOBJECT_</span>
<a href="#l29.5"></a><span id="l29.5"> #  include &quot;morkObject.h&quot;</span>
<a href="#l29.6"></a><span id="l29.6"> #endif</span>
<a href="#l29.7"></a><span id="l29.7"> </span>
<a href="#l29.8"></a><span id="l29.8"> #ifndef _ORKINHEAP_</span>
<a href="#l29.9"></a><span id="l29.9"> #  include &quot;orkinHeap.h&quot;</span>
<a href="#l29.10"></a><span id="l29.10"> #endif</span>
<a href="#l29.11"></a><span id="l29.11"> </span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l29.14"></a><span id="l29.14"> </span>
<a href="#l29.15"></a><span id="l29.15"> class nsIMdbFactory;</span>
<a href="#l29.16"></a><span id="l29.16"> </span>
<a href="#l29.17"></a><span id="l29.17"> #define morkDerived_kFactory /*i*/ 0x4663 /* ascii 'Fc' */</span>
<a href="#l29.18"></a><span id="l29.18"> #define morkFactory_kWeakRefCountBonus 0  /* try NOT to leak all factories */</span>
<a href="#l29.19"></a><span id="l29.19"> </span>
<a href="#l29.20"></a><span id="l29.20"> /*| morkFactory:</span>
<a href="#l29.21"></a><span id="l29.21"> |*/</span>
<a href="#l29.22"></a><span id="l29.22" class="difflineat">@@ -204,11 +204,11 @@ class morkFactory : public morkObject, p</span>
<a href="#l29.23"></a><span id="l29.23">   }</span>
<a href="#l29.24"></a><span id="l29.24"> </span>
<a href="#l29.25"></a><span id="l29.25">   static void SlotStrongFactory(morkFactory* me, morkEnv* ev,</span>
<a href="#l29.26"></a><span id="l29.26">                                 morkFactory** ioSlot) {</span>
<a href="#l29.27"></a><span id="l29.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l29.28"></a><span id="l29.28">   }</span>
<a href="#l29.29"></a><span id="l29.29"> };</span>
<a href="#l29.30"></a><span id="l29.30"> </span>
<a href="#l29.31"></a><span id="l29.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l29.32"></a><span id="l29.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l29.33"></a><span id="l29.33"> </span>
<a href="#l29.34"></a><span id="l29.34"> #endif /* _MORKFACTORY_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/db/mork/src/morkFile.cpp</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/db/mork/src/morkFile.cpp</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -26,17 +26,17 @@</span>
<a href="#l30.4"></a><span id="l30.4"> #ifdef MORK_WIN</span>
<a href="#l30.5"></a><span id="l30.5"> #  include &quot;io.h&quot;</span>
<a href="#l30.6"></a><span id="l30.6"> #  include &lt;windows.h&gt;</span>
<a href="#l30.7"></a><span id="l30.7"> #endif</span>
<a href="#l30.8"></a><span id="l30.8"> </span>
<a href="#l30.9"></a><span id="l30.9"> #include &quot;mozilla/Unused.h&quot;</span>
<a href="#l30.10"></a><span id="l30.10"> #include &quot;nsString.h&quot;</span>
<a href="#l30.11"></a><span id="l30.11"> </span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l30.14"></a><span id="l30.14"> </span>
<a href="#l30.15"></a><span id="l30.15"> // ````` ````` ````` ````` `````</span>
<a href="#l30.16"></a><span id="l30.16"> // { ===== begin morkNode interface =====</span>
<a href="#l30.17"></a><span id="l30.17"> </span>
<a href="#l30.18"></a><span id="l30.18"> /*public virtual*/ void morkFile::CloseMorkNode(</span>
<a href="#l30.19"></a><span id="l30.19">     morkEnv* ev)  // CloseFile() only if open</span>
<a href="#l30.20"></a><span id="l30.20"> {</span>
<a href="#l30.21"></a><span id="l30.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l30.22"></a><span id="l30.22" class="difflineat">@@ -730,9 +730,9 @@ morkStdioFile::Steal(nsIMdbEnv* ev, nsIM</span>
<a href="#l30.23"></a><span id="l30.23"> }</span>
<a href="#l30.24"></a><span id="l30.24"> </span>
<a href="#l30.25"></a><span id="l30.25"> #if defined(MORK_WIN)</span>
<a href="#l30.26"></a><span id="l30.26"> </span>
<a href="#l30.27"></a><span id="l30.27"> void mork_fileflush(FILE* file) { fflush(file); }</span>
<a href="#l30.28"></a><span id="l30.28"> </span>
<a href="#l30.29"></a><span id="l30.29"> #endif /*MORK_WIN*/</span>
<a href="#l30.30"></a><span id="l30.30"> </span>
<a href="#l30.31"></a><span id="l30.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l30.32"></a><span id="l30.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/db/mork/src/morkFile.h</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/db/mork/src/morkFile.h</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -47,17 +47,17 @@</span>
<a href="#l31.4"></a><span id="l31.4"> #endif</span>
<a href="#l31.5"></a><span id="l31.5"> </span>
<a href="#l31.6"></a><span id="l31.6"> #ifndef _MORKOBJECT_</span>
<a href="#l31.7"></a><span id="l31.7"> #  include &quot;morkObject.h&quot;</span>
<a href="#l31.8"></a><span id="l31.8"> #endif</span>
<a href="#l31.9"></a><span id="l31.9"> </span>
<a href="#l31.10"></a><span id="l31.10"> #include &quot;mozilla/Path.h&quot;</span>
<a href="#l31.11"></a><span id="l31.11"> </span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l31.14"></a><span id="l31.14"> </span>
<a href="#l31.15"></a><span id="l31.15"> /*=============================================================================</span>
<a href="#l31.16"></a><span id="l31.16">  * morkFile: abstract file interface</span>
<a href="#l31.17"></a><span id="l31.17">  */</span>
<a href="#l31.18"></a><span id="l31.18"> </span>
<a href="#l31.19"></a><span id="l31.19"> #define morkDerived_kFile /*i*/ 0x4669 /* ascii 'Fi' */</span>
<a href="#l31.20"></a><span id="l31.20"> </span>
<a href="#l31.21"></a><span id="l31.21"> class morkFile /*d*/ : public morkObject,</span>
<a href="#l31.22"></a><span id="l31.22" class="difflineat">@@ -350,11 +350,11 @@ class morkStdioFile /*d*/ : public morkF</span>
<a href="#l31.23"></a><span id="l31.23">   }</span>
<a href="#l31.24"></a><span id="l31.24"> </span>
<a href="#l31.25"></a><span id="l31.25">   static void SlotStrongStdioFile(morkStdioFile* me, morkEnv* ev,</span>
<a href="#l31.26"></a><span id="l31.26">                                   morkStdioFile** ioSlot) {</span>
<a href="#l31.27"></a><span id="l31.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l31.28"></a><span id="l31.28">   }</span>
<a href="#l31.29"></a><span id="l31.29"> };</span>
<a href="#l31.30"></a><span id="l31.30"> </span>
<a href="#l31.31"></a><span id="l31.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l31.32"></a><span id="l31.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l31.33"></a><span id="l31.33"> </span>
<a href="#l31.34"></a><span id="l31.34"> #endif /* _MORKFILE_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/db/mork/src/morkHandle.cpp</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/db/mork/src/morkHandle.cpp</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -22,17 +22,17 @@</span>
<a href="#l32.4"></a><span id="l32.4"> #ifndef _MORKPOOL_</span>
<a href="#l32.5"></a><span id="l32.5"> #  include &quot;morkPool.h&quot;</span>
<a href="#l32.6"></a><span id="l32.6"> #endif</span>
<a href="#l32.7"></a><span id="l32.7"> </span>
<a href="#l32.8"></a><span id="l32.8"> #ifndef _MORKHANDLE_</span>
<a href="#l32.9"></a><span id="l32.9"> #  include &quot;morkHandle.h&quot;</span>
<a href="#l32.10"></a><span id="l32.10"> #endif</span>
<a href="#l32.11"></a><span id="l32.11"> </span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l32.14"></a><span id="l32.14"> </span>
<a href="#l32.15"></a><span id="l32.15"> // ````` ````` ````` ````` `````</span>
<a href="#l32.16"></a><span id="l32.16"> // { ===== begin morkNode interface =====</span>
<a href="#l32.17"></a><span id="l32.17"> </span>
<a href="#l32.18"></a><span id="l32.18"> /*public virtual*/ void morkHandle::CloseMorkNode(</span>
<a href="#l32.19"></a><span id="l32.19">     morkEnv* ev)  // CloseHandle() only if open</span>
<a href="#l32.20"></a><span id="l32.20"> {</span>
<a href="#l32.21"></a><span id="l32.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l32.22"></a><span id="l32.22" class="difflineat">@@ -349,9 +349,9 @@ morkEnv* morkHandle::CanUseHandle(nsIMdb</span>
<a href="#l32.23"></a><span id="l32.23">   if (outOpen) *outOpen = this-&gt;IsOpenNode();</span>
<a href="#l32.24"></a><span id="l32.24"> </span>
<a href="#l32.25"></a><span id="l32.25">   return outErr;</span>
<a href="#l32.26"></a><span id="l32.26"> }</span>
<a href="#l32.27"></a><span id="l32.27"> // } ----- end ref counting -----</span>
<a href="#l32.28"></a><span id="l32.28"> </span>
<a href="#l32.29"></a><span id="l32.29"> // } ===== end nsIMdbObject methods =====</span>
<a href="#l32.30"></a><span id="l32.30"> </span>
<a href="#l32.31"></a><span id="l32.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l32.32"></a><span id="l32.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/db/mork/src/morkHandle.h</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/db/mork/src/morkHandle.h</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -17,17 +17,17 @@</span>
<a href="#l33.4"></a><span id="l33.4"> #ifndef _MORKDEQUE_</span>
<a href="#l33.5"></a><span id="l33.5"> #  include &quot;morkDeque.h&quot;</span>
<a href="#l33.6"></a><span id="l33.6"> #endif</span>
<a href="#l33.7"></a><span id="l33.7"> </span>
<a href="#l33.8"></a><span id="l33.8"> #ifndef _MORKPOOL_</span>
<a href="#l33.9"></a><span id="l33.9"> #  include &quot;morkPool.h&quot;</span>
<a href="#l33.10"></a><span id="l33.10"> #endif</span>
<a href="#l33.11"></a><span id="l33.11"> </span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l33.14"></a><span id="l33.14"> </span>
<a href="#l33.15"></a><span id="l33.15"> class morkPool;</span>
<a href="#l33.16"></a><span id="l33.16"> class morkObject;</span>
<a href="#l33.17"></a><span id="l33.17"> class morkFactory;</span>
<a href="#l33.18"></a><span id="l33.18"> </span>
<a href="#l33.19"></a><span id="l33.19"> #define morkDerived_kHandle /*i*/ 0x486E /* ascii 'Hn' */</span>
<a href="#l33.20"></a><span id="l33.20"> #define morkHandle_kTag 0x68416E44       /* ascii 'hAnD' */</span>
<a href="#l33.21"></a><span id="l33.21"> </span>
<a href="#l33.22"></a><span id="l33.22" class="difflineat">@@ -173,11 +173,11 @@ class morkHandleFrame {</span>
<a href="#l33.23"></a><span id="l33.23"> </span>
<a href="#l33.24"></a><span id="l33.24"> #define morkHandleFrame_kHandleOffset \</span>
<a href="#l33.25"></a><span id="l33.25">   mork_OffsetOf(morkHandleFrame, mHandleFrame_Handle)</span>
<a href="#l33.26"></a><span id="l33.26"> </span>
<a href="#l33.27"></a><span id="l33.27"> #define morkHandle_AsHandleFrame(h) \</span>
<a href="#l33.28"></a><span id="l33.28">   ((h)-&gt;mHandle_Block,              \</span>
<a href="#l33.29"></a><span id="l33.29">    ((morkHandleFrame*)(((mork_u1*)(h)) - morkHandleFrame_kHandleOffset)))</span>
<a href="#l33.30"></a><span id="l33.30"> </span>
<a href="#l33.31"></a><span id="l33.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l33.32"></a><span id="l33.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l33.33"></a><span id="l33.33"> </span>
<a href="#l33.34"></a><span id="l33.34"> #endif /* _MORKHANDLE_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/db/mork/src/morkIntMap.cpp</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/db/mork/src/morkIntMap.cpp</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -22,17 +22,17 @@</span>
<a href="#l34.4"></a><span id="l34.4"> #ifndef _MORKMAP_</span>
<a href="#l34.5"></a><span id="l34.5"> #  include &quot;morkMap.h&quot;</span>
<a href="#l34.6"></a><span id="l34.6"> #endif</span>
<a href="#l34.7"></a><span id="l34.7"> </span>
<a href="#l34.8"></a><span id="l34.8"> #ifndef _MORKINTMAP_</span>
<a href="#l34.9"></a><span id="l34.9"> #  include &quot;morkIntMap.h&quot;</span>
<a href="#l34.10"></a><span id="l34.10"> #endif</span>
<a href="#l34.11"></a><span id="l34.11"> </span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l34.14"></a><span id="l34.14"> </span>
<a href="#l34.15"></a><span id="l34.15"> // ````` ````` ````` ````` `````</span>
<a href="#l34.16"></a><span id="l34.16"> // { ===== begin morkNode interface =====</span>
<a href="#l34.17"></a><span id="l34.17"> </span>
<a href="#l34.18"></a><span id="l34.18"> /*public virtual*/ void morkIntMap::CloseMorkNode(</span>
<a href="#l34.19"></a><span id="l34.19">     morkEnv* ev)  // CloseIntMap() only if open</span>
<a href="#l34.20"></a><span id="l34.20"> {</span>
<a href="#l34.21"></a><span id="l34.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l34.22"></a><span id="l34.22" class="difflineat">@@ -111,17 +111,17 @@ void* morkIntMap::GetInt(morkEnv* ev, mo</span>
<a href="#l34.23"></a><span id="l34.23"> </span>
<a href="#l34.24"></a><span id="l34.24"> mork_bool morkIntMap::HasInt(morkEnv* ev, mork_u4 inKey)</span>
<a href="#l34.25"></a><span id="l34.25"> // Note the returned val does NOT have an increase in refcount for this.</span>
<a href="#l34.26"></a><span id="l34.26"> {</span>
<a href="#l34.27"></a><span id="l34.27">   return this-&gt;Get(ev, &amp;inKey, /*key*/ (void*)0, /*val*/ (void*)0,</span>
<a href="#l34.28"></a><span id="l34.28">                    (mork_change**)0);</span>
<a href="#l34.29"></a><span id="l34.29"> }</span>
<a href="#l34.30"></a><span id="l34.30"> </span>
<a href="#l34.31"></a><span id="l34.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l34.32"></a><span id="l34.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l34.33"></a><span id="l34.33"> </span>
<a href="#l34.34"></a><span id="l34.34"> #ifdef MORK_POINTER_MAP_IMPL</span>
<a href="#l34.35"></a><span id="l34.35"> </span>
<a href="#l34.36"></a><span id="l34.36"> // ````` ````` ````` ````` `````</span>
<a href="#l34.37"></a><span id="l34.37"> // { ===== begin morkNode interface =====</span>
<a href="#l34.38"></a><span id="l34.38"> </span>
<a href="#l34.39"></a><span id="l34.39"> /*public virtual*/ void morkPointerMap::CloseMorkNode(</span>
<a href="#l34.40"></a><span id="l34.40">     morkEnv* ev)  // ClosePointerMap() only if open</span>
<a href="#l34.41"></a><span id="l34.41" class="difflineat">@@ -204,9 +204,9 @@ void* morkPointerMap::GetPointer(morkEnv</span>
<a href="#l34.42"></a><span id="l34.42"> mork_bool morkPointerMap::HasPointer(morkEnv* ev, void* inKey)</span>
<a href="#l34.43"></a><span id="l34.43"> // Note the returned val does NOT have an increase in refcount for this.</span>
<a href="#l34.44"></a><span id="l34.44"> {</span>
<a href="#l34.45"></a><span id="l34.45">   return this-&gt;Get(ev, &amp;inKey, /*key*/ (void*)0, /*val*/ (void*)0,</span>
<a href="#l34.46"></a><span id="l34.46">                    (mork_change**)0);</span>
<a href="#l34.47"></a><span id="l34.47"> }</span>
<a href="#l34.48"></a><span id="l34.48"> #endif /*MORK_POINTER_MAP_IMPL*/</span>
<a href="#l34.49"></a><span id="l34.49"> </span>
<a href="#l34.50"></a><span id="l34.50" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l34.51"></a><span id="l34.51" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/db/mork/src/morkIntMap.h</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/db/mork/src/morkIntMap.h</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -13,17 +13,17 @@</span>
<a href="#l35.4"></a><span id="l35.4"> #ifndef _MORKNODE_</span>
<a href="#l35.5"></a><span id="l35.5"> #  include &quot;morkNode.h&quot;</span>
<a href="#l35.6"></a><span id="l35.6"> #endif</span>
<a href="#l35.7"></a><span id="l35.7"> </span>
<a href="#l35.8"></a><span id="l35.8"> #ifndef _MORKMAP_</span>
<a href="#l35.9"></a><span id="l35.9"> #  include &quot;morkMap.h&quot;</span>
<a href="#l35.10"></a><span id="l35.10"> #endif</span>
<a href="#l35.11"></a><span id="l35.11"> </span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l35.14"></a><span id="l35.14"> </span>
<a href="#l35.15"></a><span id="l35.15"> #define morkDerived_kIntMap /*i*/ 0x694D /* ascii 'iM' */</span>
<a href="#l35.16"></a><span id="l35.16"> </span>
<a href="#l35.17"></a><span id="l35.17"> #define morkIntMap_kStartSlotCount 256</span>
<a href="#l35.18"></a><span id="l35.18"> </span>
<a href="#l35.19"></a><span id="l35.19"> /*| morkIntMap: maps mork_token -&gt; morkNode</span>
<a href="#l35.20"></a><span id="l35.20"> |*/</span>
<a href="#l35.21"></a><span id="l35.21"> class morkIntMap : public morkMap {  // for mapping tokens to maps</span>
<a href="#l35.22"></a><span id="l35.22" class="difflineat">@@ -64,17 +64,17 @@ class morkIntMap : public morkMap {  // </span>
<a href="#l35.23"></a><span id="l35.23"> </span>
<a href="#l35.24"></a><span id="l35.24">   void* GetInt(morkEnv* ev, mork_u4 inKey);</span>
<a href="#l35.25"></a><span id="l35.25">   // Note the returned node does NOT have an increase in refcount for this.</span>
<a href="#l35.26"></a><span id="l35.26"> </span>
<a href="#l35.27"></a><span id="l35.27">   mork_bool HasInt(morkEnv* ev, mork_u4 inKey);</span>
<a href="#l35.28"></a><span id="l35.28">   // Note the returned node does NOT have an increase in refcount for this.</span>
<a href="#l35.29"></a><span id="l35.29"> };</span>
<a href="#l35.30"></a><span id="l35.30"> </span>
<a href="#l35.31"></a><span id="l35.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l35.32"></a><span id="l35.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l35.33"></a><span id="l35.33"> </span>
<a href="#l35.34"></a><span id="l35.34"> #ifdef MORK_POINTER_MAP_IMPL</span>
<a href="#l35.35"></a><span id="l35.35"> </span>
<a href="#l35.36"></a><span id="l35.36"> #  define morkDerived_kPointerMap /*i*/ 0x704D /* ascii 'pM' */</span>
<a href="#l35.37"></a><span id="l35.37"> </span>
<a href="#l35.38"></a><span id="l35.38"> #  define morkPointerMap_kStartSlotCount 256</span>
<a href="#l35.39"></a><span id="l35.39"> </span>
<a href="#l35.40"></a><span id="l35.40"> /*| morkPointerMap: maps void* -&gt; void*</span>
<a href="#l35.41"></a><span id="l35.41" class="difflineat">@@ -134,11 +134,11 @@ class morkPointerMap : public morkMap { </span>
<a href="#l35.42"></a><span id="l35.42"> </span>
<a href="#l35.43"></a><span id="l35.43">   static void SlotStrongIntMap(morkIntMap* me, morkEnv* ev,</span>
<a href="#l35.44"></a><span id="l35.44">                                morkIntMap** ioSlot) {</span>
<a href="#l35.45"></a><span id="l35.45">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l35.46"></a><span id="l35.46">   }</span>
<a href="#l35.47"></a><span id="l35.47"> };</span>
<a href="#l35.48"></a><span id="l35.48"> #endif /*MORK_POINTER_MAP_IMPL*/</span>
<a href="#l35.49"></a><span id="l35.49"> </span>
<a href="#l35.50"></a><span id="l35.50" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l35.51"></a><span id="l35.51" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l35.52"></a><span id="l35.52"> </span>
<a href="#l35.53"></a><span id="l35.53"> #endif /* _MORKINTMAP_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/db/mork/src/morkMap.cpp</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/db/mork/src/morkMap.cpp</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -82,17 +82,17 @@ void morkHashArrays::finalize(morkEnv* e</span>
<a href="#l36.4"></a><span id="l36.4">     if (mHashArrays_Keys) heap-&gt;Free(menv, mHashArrays_Keys);</span>
<a href="#l36.5"></a><span id="l36.5">     if (mHashArrays_Vals) heap-&gt;Free(menv, mHashArrays_Vals);</span>
<a href="#l36.6"></a><span id="l36.6">     if (mHashArrays_Assocs) heap-&gt;Free(menv, mHashArrays_Assocs);</span>
<a href="#l36.7"></a><span id="l36.7">     if (mHashArrays_Changes) heap-&gt;Free(menv, mHashArrays_Changes);</span>
<a href="#l36.8"></a><span id="l36.8">     if (mHashArrays_Buckets) heap-&gt;Free(menv, mHashArrays_Buckets);</span>
<a href="#l36.9"></a><span id="l36.9">   }</span>
<a href="#l36.10"></a><span id="l36.10"> }</span>
<a href="#l36.11"></a><span id="l36.11"> </span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l36.14"></a><span id="l36.14"> </span>
<a href="#l36.15"></a><span id="l36.15"> // ````` ````` ````` ````` `````</span>
<a href="#l36.16"></a><span id="l36.16"> // { ===== begin morkNode interface =====</span>
<a href="#l36.17"></a><span id="l36.17"> </span>
<a href="#l36.18"></a><span id="l36.18"> /*public virtual*/ void morkMap::CloseMorkNode(</span>
<a href="#l36.19"></a><span id="l36.19">     morkEnv* ev)  // CloseMap() only if open</span>
<a href="#l36.20"></a><span id="l36.20"> {</span>
<a href="#l36.21"></a><span id="l36.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l36.22"></a><span id="l36.22" class="difflineat">@@ -844,9 +844,9 @@ mork_change* morkMapIter::CutHere(morkEn</span>
<a href="#l36.23"></a><span id="l36.23">     } else</span>
<a href="#l36.24"></a><span id="l36.24">       map-&gt;NewIterOutOfSyncError(ev);</span>
<a href="#l36.25"></a><span id="l36.25">   } else</span>
<a href="#l36.26"></a><span id="l36.26">     map-&gt;NewBadMapError(ev);</span>
<a href="#l36.27"></a><span id="l36.27"> </span>
<a href="#l36.28"></a><span id="l36.28">   return outCutHere;</span>
<a href="#l36.29"></a><span id="l36.29"> }</span>
<a href="#l36.30"></a><span id="l36.30"> </span>
<a href="#l36.31"></a><span id="l36.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l36.32"></a><span id="l36.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/db/mork/src/morkMap.h</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/db/mork/src/morkMap.h</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -41,17 +41,17 @@</span>
<a href="#l37.4"></a><span id="l37.4"> #ifndef _MORK_</span>
<a href="#l37.5"></a><span id="l37.5"> #  include &quot;mork.h&quot;</span>
<a href="#l37.6"></a><span id="l37.6"> #endif</span>
<a href="#l37.7"></a><span id="l37.7"> </span>
<a href="#l37.8"></a><span id="l37.8"> #ifndef _MORKNODE_</span>
<a href="#l37.9"></a><span id="l37.9"> #  include &quot;morkNode.h&quot;</span>
<a href="#l37.10"></a><span id="l37.10"> #endif</span>
<a href="#l37.11"></a><span id="l37.11"> </span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l37.14"></a><span id="l37.14"> </span>
<a href="#l37.15"></a><span id="l37.15"> /* (These hash methods closely resemble those in public domain IronDoc.) */</span>
<a href="#l37.16"></a><span id="l37.16"> </span>
<a href="#l37.17"></a><span id="l37.17"> /*| Equal: equal for hash table. Note equal(a,b) implies hash(a)==hash(b).</span>
<a href="#l37.18"></a><span id="l37.18"> |*/</span>
<a href="#l37.19"></a><span id="l37.19"> typedef mork_bool (*morkMap_mEqual)(const morkMap* self, morkEnv* ev,</span>
<a href="#l37.20"></a><span id="l37.20">                                     const void* inKeyA, const void* inKeyB);</span>
<a href="#l37.21"></a><span id="l37.21"> </span>
<a href="#l37.22"></a><span id="l37.22" class="difflineat">@@ -369,11 +369,11 @@ class morkMapIter {  // iterator for has</span>
<a href="#l37.23"></a><span id="l37.23"> </span>
<a href="#l37.24"></a><span id="l37.24">   mork_change* First(morkEnv* ev, void* outKey, void* outVal);</span>
<a href="#l37.25"></a><span id="l37.25">   mork_change* Next(morkEnv* ev, void* outKey, void* outVal);</span>
<a href="#l37.26"></a><span id="l37.26">   mork_change* Here(morkEnv* ev, void* outKey, void* outVal);</span>
<a href="#l37.27"></a><span id="l37.27"> </span>
<a href="#l37.28"></a><span id="l37.28">   mork_change* CutHere(morkEnv* ev, void* outKey, void* outVal);</span>
<a href="#l37.29"></a><span id="l37.29"> };</span>
<a href="#l37.30"></a><span id="l37.30"> </span>
<a href="#l37.31"></a><span id="l37.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l37.32"></a><span id="l37.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l37.33"></a><span id="l37.33"> </span>
<a href="#l37.34"></a><span id="l37.34"> #endif /* _MORKMAP_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/db/mork/src/morkNode.cpp</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/db/mork/src/morkNode.cpp</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -127,17 +127,17 @@ morkUsage::morkUsage() {</span>
<a href="#l38.4"></a><span id="l38.4"> }</span>
<a href="#l38.5"></a><span id="l38.5"> </span>
<a href="#l38.6"></a><span id="l38.6"> morkUsage::morkUsage(mork_usage code) : mUsage_Code(code) {</span>
<a href="#l38.7"></a><span id="l38.7">   if (morkUsage_need_static_init()) {</span>
<a href="#l38.8"></a><span id="l38.8">     morkUsage::EnsureReadyStaticUsage();</span>
<a href="#l38.9"></a><span id="l38.9">   }</span>
<a href="#l38.10"></a><span id="l38.10"> }</span>
<a href="#l38.11"></a><span id="l38.11"> </span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l38.14"></a><span id="l38.14"> </span>
<a href="#l38.15"></a><span id="l38.15"> /*static*/ void* morkNode::MakeNew(size_t inSize, nsIMdbHeap&amp; ioHeap,</span>
<a href="#l38.16"></a><span id="l38.16">                                    morkEnv* ev) {</span>
<a href="#l38.17"></a><span id="l38.17">   void* node = 0;</span>
<a href="#l38.18"></a><span id="l38.18">   ioHeap.Alloc(ev-&gt;AsMdbEnv(), inSize, (void**)&amp;node);</span>
<a href="#l38.19"></a><span id="l38.19">   if (!node) ev-&gt;OutOfMemoryError();</span>
<a href="#l38.20"></a><span id="l38.20"> </span>
<a href="#l38.21"></a><span id="l38.21">   return node;</span>
<a href="#l38.22"></a><span id="l38.22" class="difflineat">@@ -542,9 +542,9 @@ static const char morkNode_kBroken[] = &quot;</span>
<a href="#l38.23"></a><span id="l38.23">       break;</span>
<a href="#l38.24"></a><span id="l38.24">     case morkUsage_kNone:</span>
<a href="#l38.25"></a><span id="l38.25">       outString = &quot;none&quot;;</span>
<a href="#l38.26"></a><span id="l38.26">       break;</span>
<a href="#l38.27"></a><span id="l38.27">   }</span>
<a href="#l38.28"></a><span id="l38.28">   return outString;</span>
<a href="#l38.29"></a><span id="l38.29"> }</span>
<a href="#l38.30"></a><span id="l38.30"> </span>
<a href="#l38.31"></a><span id="l38.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l38.32"></a><span id="l38.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/db/mork/src/morkNode.h</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/db/mork/src/morkNode.h</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -37,17 +37,17 @@</span>
<a href="#l39.4"></a><span id="l39.4"> </span>
<a href="#l39.5"></a><span id="l39.5"> #ifndef _MORKNODE_</span>
<a href="#l39.6"></a><span id="l39.6"> #define _MORKNODE_ 1</span>
<a href="#l39.7"></a><span id="l39.7"> </span>
<a href="#l39.8"></a><span id="l39.8"> #ifndef _MORK_</span>
<a href="#l39.9"></a><span id="l39.9"> #  include &quot;mork.h&quot;</span>
<a href="#l39.10"></a><span id="l39.10"> #endif</span>
<a href="#l39.11"></a><span id="l39.11"> </span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l39.14"></a><span id="l39.14"> </span>
<a href="#l39.15"></a><span id="l39.15"> #define morkUsage_kHeap 'h'</span>
<a href="#l39.16"></a><span id="l39.16"> #define morkUsage_kStack 's'</span>
<a href="#l39.17"></a><span id="l39.17"> #define morkUsage_kMember 'm'</span>
<a href="#l39.18"></a><span id="l39.18"> #define morkUsage_kGlobal 'g'</span>
<a href="#l39.19"></a><span id="l39.19"> #define morkUsage_kPool 'p'</span>
<a href="#l39.20"></a><span id="l39.20"> #define morkUsage_kNone 'n'</span>
<a href="#l39.21"></a><span id="l39.21"> </span>
<a href="#l39.22"></a><span id="l39.22" class="difflineat">@@ -77,17 +77,17 @@ class morkUsage {</span>
<a href="#l39.23"></a><span id="l39.23">   static const morkUsage&amp; GetHeap();    // kHeap, safe at static init time</span>
<a href="#l39.24"></a><span id="l39.24">   static const morkUsage&amp; GetStack();   // kStack, safe at static init time</span>
<a href="#l39.25"></a><span id="l39.25">   static const morkUsage&amp; GetMember();  // kMember, safe at static init time</span>
<a href="#l39.26"></a><span id="l39.26">   static const morkUsage&amp; GetGlobal();  // kGlobal, safe at static init time</span>
<a href="#l39.27"></a><span id="l39.27">   static const morkUsage&amp; GetPool();    // kPool, safe at static init time</span>
<a href="#l39.28"></a><span id="l39.28">   static const morkUsage&amp; GetNone();    // kNone, safe at static init time</span>
<a href="#l39.29"></a><span id="l39.29"> };</span>
<a href="#l39.30"></a><span id="l39.30"> </span>
<a href="#l39.31"></a><span id="l39.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l39.32"></a><span id="l39.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l39.33"></a><span id="l39.33"> </span>
<a href="#l39.34"></a><span id="l39.34"> #define morkNode_kMaxRefCount 0x0FFFF /* count sticks if it hits this */</span>
<a href="#l39.35"></a><span id="l39.35"> </span>
<a href="#l39.36"></a><span id="l39.36"> #define morkBase_kNode /*i*/ 0x4E64 /* ascii 'Nd' */</span>
<a href="#l39.37"></a><span id="l39.37"> </span>
<a href="#l39.38"></a><span id="l39.38"> /*| morkNode: several groups of two-byte integers that track the basic</span>
<a href="#l39.39"></a><span id="l39.39"> **| status of an object that can be used to compose in-memory graphs.</span>
<a href="#l39.40"></a><span id="l39.40"> **| This is the base class for nsIMdbObject (which adds members that fit</span>
<a href="#l39.41"></a><span id="l39.41" class="difflineat">@@ -280,11 +280,11 @@ nsIMdbHeap_SlotStrongHeap(nsIMdbHeap* se</span>
<a href="#l39.42"></a><span id="l39.42"> extern void  // utility method very similar to morkNode::SlotStrongNode():</span>
<a href="#l39.43"></a><span id="l39.43"> nsIMdbFile_SlotStrongFile(nsIMdbFile* self, morkEnv* ev, nsIMdbFile** ioSlot);</span>
<a href="#l39.44"></a><span id="l39.44"> // If *ioSlot is non-nil, that file is released by CutStrongRef() and</span>
<a href="#l39.45"></a><span id="l39.45"> // then zeroed out.  Then if self is non-nil, this is acquired by</span>
<a href="#l39.46"></a><span id="l39.46"> // calling AddStrongRef(), and if the return value shows success,</span>
<a href="#l39.47"></a><span id="l39.47"> // then self is put into slot *ioSlot.  Note self can be nil, so we take</span>
<a href="#l39.48"></a><span id="l39.48"> // expression 'nsIMdbFile_SlotStrongFile(0, ev, &amp;slot)'.</span>
<a href="#l39.49"></a><span id="l39.49"> </span>
<a href="#l39.50"></a><span id="l39.50" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l39.51"></a><span id="l39.51" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l39.52"></a><span id="l39.52"> </span>
<a href="#l39.53"></a><span id="l39.53"> #endif /* _MORKNODE_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/db/mork/src/morkNodeMap.cpp</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/db/mork/src/morkNodeMap.cpp</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -26,17 +26,17 @@</span>
<a href="#l40.4"></a><span id="l40.4"> #ifndef _MORKINTMAP_</span>
<a href="#l40.5"></a><span id="l40.5"> #  include &quot;morkIntMap.h&quot;</span>
<a href="#l40.6"></a><span id="l40.6"> #endif</span>
<a href="#l40.7"></a><span id="l40.7"> </span>
<a href="#l40.8"></a><span id="l40.8"> #ifndef _MORKNODEMAP_</span>
<a href="#l40.9"></a><span id="l40.9"> #  include &quot;morkNodeMap.h&quot;</span>
<a href="#l40.10"></a><span id="l40.10"> #endif</span>
<a href="#l40.11"></a><span id="l40.11"> </span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l40.14"></a><span id="l40.14"> </span>
<a href="#l40.15"></a><span id="l40.15"> // ````` ````` ````` ````` `````</span>
<a href="#l40.16"></a><span id="l40.16"> // { ===== begin morkNode interface =====</span>
<a href="#l40.17"></a><span id="l40.17"> </span>
<a href="#l40.18"></a><span id="l40.18"> /*public virtual*/ void morkNodeMap::CloseMorkNode(</span>
<a href="#l40.19"></a><span id="l40.19">     morkEnv* ev)  // CloseNodeMap() only if open</span>
<a href="#l40.20"></a><span id="l40.20"> {</span>
<a href="#l40.21"></a><span id="l40.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l40.22"></a><span id="l40.22" class="difflineat">@@ -131,9 +131,9 @@ mork_num morkNodeMap::CutAllNodes(morkEn</span>
<a href="#l40.23"></a><span id="l40.23">   for (c = i.FirstNode(ev, &amp;key, &amp;val); c; c = i.NextNode(ev, &amp;key, &amp;val)) {</span>
<a href="#l40.24"></a><span id="l40.24">     if (val) val-&gt;CutStrongRef(ev);</span>
<a href="#l40.25"></a><span id="l40.25">     i.CutHereNode(ev, /*key*/ (mork_token*)0, /*val*/ (morkNode**)0);</span>
<a href="#l40.26"></a><span id="l40.26">   }</span>
<a href="#l40.27"></a><span id="l40.27"> </span>
<a href="#l40.28"></a><span id="l40.28">   return outSlots;</span>
<a href="#l40.29"></a><span id="l40.29"> }</span>
<a href="#l40.30"></a><span id="l40.30"> </span>
<a href="#l40.31"></a><span id="l40.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l40.32"></a><span id="l40.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/db/mork/src/morkNodeMap.h</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/db/mork/src/morkNodeMap.h</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -17,17 +17,17 @@</span>
<a href="#l41.4"></a><span id="l41.4"> #ifndef _MORKMAP_</span>
<a href="#l41.5"></a><span id="l41.5"> #  include &quot;morkMap.h&quot;</span>
<a href="#l41.6"></a><span id="l41.6"> #endif</span>
<a href="#l41.7"></a><span id="l41.7"> </span>
<a href="#l41.8"></a><span id="l41.8"> #ifndef _MORKINTMAP_</span>
<a href="#l41.9"></a><span id="l41.9"> #  include &quot;morkIntMap.h&quot;</span>
<a href="#l41.10"></a><span id="l41.10"> #endif</span>
<a href="#l41.11"></a><span id="l41.11"> </span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l41.14"></a><span id="l41.14"> </span>
<a href="#l41.15"></a><span id="l41.15"> #define morkDerived_kNodeMap /*i*/ 0x6E4D /* ascii 'nM' */</span>
<a href="#l41.16"></a><span id="l41.16"> </span>
<a href="#l41.17"></a><span id="l41.17"> #define morkNodeMap_kStartSlotCount 512</span>
<a href="#l41.18"></a><span id="l41.18"> </span>
<a href="#l41.19"></a><span id="l41.19"> /*| morkNodeMap: maps mork_token -&gt; morkNode</span>
<a href="#l41.20"></a><span id="l41.20"> |*/</span>
<a href="#l41.21"></a><span id="l41.21"> class morkNodeMap : public morkIntMap {  // for mapping tokens to nodes</span>
<a href="#l41.22"></a><span id="l41.22" class="difflineat">@@ -91,11 +91,11 @@ class morkNodeMapIter : public morkMapIt</span>
<a href="#l41.23"></a><span id="l41.23">   }</span>
<a href="#l41.24"></a><span id="l41.24"> </span>
<a href="#l41.25"></a><span id="l41.25">   mork_change* CutHereNode(morkEnv* ev, mork_token* outToken,</span>
<a href="#l41.26"></a><span id="l41.26">                            morkNode** outNode) {</span>
<a href="#l41.27"></a><span id="l41.27">     return this-&gt;CutHere(ev, outToken, outNode);</span>
<a href="#l41.28"></a><span id="l41.28">   }</span>
<a href="#l41.29"></a><span id="l41.29"> };</span>
<a href="#l41.30"></a><span id="l41.30"> </span>
<a href="#l41.31"></a><span id="l41.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l41.32"></a><span id="l41.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l41.33"></a><span id="l41.33"> </span>
<a href="#l41.34"></a><span id="l41.34"> #endif /* _MORKNODEMAP_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/db/mork/src/morkObject.cpp</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/db/mork/src/morkObject.cpp</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -24,17 +24,17 @@</span>
<a href="#l42.4"></a><span id="l42.4"> #endif</span>
<a href="#l42.5"></a><span id="l42.5"> </span>
<a href="#l42.6"></a><span id="l42.6"> #ifndef _MORKHANDLE_</span>
<a href="#l42.7"></a><span id="l42.7"> #  include &quot;morkHandle.h&quot;</span>
<a href="#l42.8"></a><span id="l42.8"> #endif</span>
<a href="#l42.9"></a><span id="l42.9"> </span>
<a href="#l42.10"></a><span id="l42.10"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l42.11"></a><span id="l42.11"> </span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l42.14"></a><span id="l42.14"> </span>
<a href="#l42.15"></a><span id="l42.15"> NS_IMPL_ISUPPORTS(morkObject, nsIMdbObject)</span>
<a href="#l42.16"></a><span id="l42.16"> </span>
<a href="#l42.17"></a><span id="l42.17"> // ````` ````` ````` ````` `````</span>
<a href="#l42.18"></a><span id="l42.18"> // { ===== begin morkNode interface =====</span>
<a href="#l42.19"></a><span id="l42.19"> </span>
<a href="#l42.20"></a><span id="l42.20"> /*public virtual*/ void morkObject::CloseMorkNode(</span>
<a href="#l42.21"></a><span id="l42.21">     morkEnv* ev)  // CloseObject() only if open</span>
<a href="#l42.22"></a><span id="l42.22" class="difflineat">@@ -168,9 +168,9 @@ morkObject::IsFrozenMdbObject(nsIMdbEnv*</span>
<a href="#l42.23"></a><span id="l42.23">   return NS_OK;</span>
<a href="#l42.24"></a><span id="l42.24"> }</span>
<a href="#l42.25"></a><span id="l42.25"> </span>
<a href="#l42.26"></a><span id="l42.26"> // void morkObject::NewNilHandleError(morkEnv* ev) // mObject_Handle is nil</span>
<a href="#l42.27"></a><span id="l42.27"> //{</span>
<a href="#l42.28"></a><span id="l42.28"> //  ev-&gt;NewError(&quot;nil mObject_Handle&quot;);</span>
<a href="#l42.29"></a><span id="l42.29"> //}</span>
<a href="#l42.30"></a><span id="l42.30"> </span>
<a href="#l42.31"></a><span id="l42.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l42.32"></a><span id="l42.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/db/mork/src/morkObject.h</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/db/mork/src/morkObject.h</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -21,17 +21,17 @@</span>
<a href="#l43.4"></a><span id="l43.4"> #ifndef _MORKCONFIG_</span>
<a href="#l43.5"></a><span id="l43.5"> #  include &quot;morkConfig.h&quot;</span>
<a href="#l43.6"></a><span id="l43.6"> #endif</span>
<a href="#l43.7"></a><span id="l43.7"> </span>
<a href="#l43.8"></a><span id="l43.8"> #ifndef _ORKINHEAP_</span>
<a href="#l43.9"></a><span id="l43.9"> #  include &quot;orkinHeap.h&quot;</span>
<a href="#l43.10"></a><span id="l43.10"> #endif</span>
<a href="#l43.11"></a><span id="l43.11"> </span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l43.14"></a><span id="l43.14"> </span>
<a href="#l43.15"></a><span id="l43.15"> #define morkDerived_kObject /*i*/ 0x6F42 /* ascii 'oB' */</span>
<a href="#l43.16"></a><span id="l43.16"> </span>
<a href="#l43.17"></a><span id="l43.17"> /*| morkObject: subclass of morkNode that adds knowledge of db suite factory</span>
<a href="#l43.18"></a><span id="l43.18"> **| and containing port to those objects that are exposed as instances of</span>
<a href="#l43.19"></a><span id="l43.19"> **| nsIMdbObject in the public interface.</span>
<a href="#l43.20"></a><span id="l43.20"> |*/</span>
<a href="#l43.21"></a><span id="l43.21"> class morkObject : public morkBead, public nsIMdbObject {</span>
<a href="#l43.22"></a><span id="l43.22" class="difflineat">@@ -136,11 +136,11 @@ class morkObject : public morkBead, publ</span>
<a href="#l43.23"></a><span id="l43.23">   }</span>
<a href="#l43.24"></a><span id="l43.24"> </span>
<a href="#l43.25"></a><span id="l43.25">   static void SlotStrongObject(morkObject* me, morkEnv* ev,</span>
<a href="#l43.26"></a><span id="l43.26">                                morkObject** ioSlot) {</span>
<a href="#l43.27"></a><span id="l43.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l43.28"></a><span id="l43.28">   }</span>
<a href="#l43.29"></a><span id="l43.29"> };</span>
<a href="#l43.30"></a><span id="l43.30"> </span>
<a href="#l43.31"></a><span id="l43.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l43.32"></a><span id="l43.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l43.33"></a><span id="l43.33"> </span>
<a href="#l43.34"></a><span id="l43.34"> #endif /* _MORKOBJECT_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/db/mork/src/morkParser.cpp</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/db/mork/src/morkParser.cpp</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -42,17 +42,17 @@</span>
<a href="#l44.4"></a><span id="l44.4"> #ifndef _MORKCH_</span>
<a href="#l44.5"></a><span id="l44.5"> #  include &quot;morkCh.h&quot;</span>
<a href="#l44.6"></a><span id="l44.6"> #endif</span>
<a href="#l44.7"></a><span id="l44.7"> </span>
<a href="#l44.8"></a><span id="l44.8"> #ifndef _MORKSTORE_</span>
<a href="#l44.9"></a><span id="l44.9"> #  include &quot;morkStore.h&quot;</span>
<a href="#l44.10"></a><span id="l44.10"> #endif</span>
<a href="#l44.11"></a><span id="l44.11"> </span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l44.14"></a><span id="l44.14"> </span>
<a href="#l44.15"></a><span id="l44.15"> // ````` ````` ````` ````` `````</span>
<a href="#l44.16"></a><span id="l44.16"> // { ===== begin morkNode interface =====</span>
<a href="#l44.17"></a><span id="l44.17"> </span>
<a href="#l44.18"></a><span id="l44.18"> /*public virtual*/ void morkParser::CloseMorkNode(</span>
<a href="#l44.19"></a><span id="l44.19">     morkEnv* ev)  // CloseParser() only if open</span>
<a href="#l44.20"></a><span id="l44.20"> {</span>
<a href="#l44.21"></a><span id="l44.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l44.22"></a><span id="l44.22" class="difflineat">@@ -1323,9 +1323,9 @@ morkParser::ParseMore(    // return coun</span>
<a href="#l44.23"></a><span id="l44.23">     this-&gt;NonUsableParserError(ev);</span>
<a href="#l44.24"></a><span id="l44.24">     if (outDone) *outDone = morkBool_kTrue;</span>
<a href="#l44.25"></a><span id="l44.25">     if (outBroken) *outBroken = morkBool_kTrue;</span>
<a href="#l44.26"></a><span id="l44.26">     if (outPos) *outPos = 0;</span>
<a href="#l44.27"></a><span id="l44.27">   }</span>
<a href="#l44.28"></a><span id="l44.28">   return outCount;</span>
<a href="#l44.29"></a><span id="l44.29"> }</span>
<a href="#l44.30"></a><span id="l44.30"> </span>
<a href="#l44.31"></a><span id="l44.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l44.32"></a><span id="l44.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/db/mork/src/morkParser.h</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/db/mork/src/morkParser.h</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -21,17 +21,17 @@</span>
<a href="#l45.4"></a><span id="l45.4"> #ifndef _MORKYARN_</span>
<a href="#l45.5"></a><span id="l45.5"> #  include &quot;morkYarn.h&quot;</span>
<a href="#l45.6"></a><span id="l45.6"> #endif</span>
<a href="#l45.7"></a><span id="l45.7"> </span>
<a href="#l45.8"></a><span id="l45.8"> #ifndef _MORKCELL_</span>
<a href="#l45.9"></a><span id="l45.9"> #  include &quot;morkCell.h&quot;</span>
<a href="#l45.10"></a><span id="l45.10"> #endif</span>
<a href="#l45.11"></a><span id="l45.11"> </span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l45.14"></a><span id="l45.14"> </span>
<a href="#l45.15"></a><span id="l45.15"> /*=============================================================================</span>
<a href="#l45.16"></a><span id="l45.16">  * morkPlace: stream byte position and stream line count</span>
<a href="#l45.17"></a><span id="l45.17">  */</span>
<a href="#l45.18"></a><span id="l45.18"> </span>
<a href="#l45.19"></a><span id="l45.19"> class morkPlace {</span>
<a href="#l45.20"></a><span id="l45.20">  public:</span>
<a href="#l45.21"></a><span id="l45.21">   mork_pos mPlace_Pos;    // byte offset in an input stream</span>
<a href="#l45.22"></a><span id="l45.22" class="difflineat">@@ -537,11 +537,11 @@ class morkParser /*d*/ : public morkNode</span>
<a href="#l45.23"></a><span id="l45.23">   }</span>
<a href="#l45.24"></a><span id="l45.24"> </span>
<a href="#l45.25"></a><span id="l45.25">   static void SlotStrongParser(morkParser* me, morkEnv* ev,</span>
<a href="#l45.26"></a><span id="l45.26">                                morkParser** ioSlot) {</span>
<a href="#l45.27"></a><span id="l45.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l45.28"></a><span id="l45.28">   }</span>
<a href="#l45.29"></a><span id="l45.29"> };</span>
<a href="#l45.30"></a><span id="l45.30"> </span>
<a href="#l45.31"></a><span id="l45.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l45.32"></a><span id="l45.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l45.33"></a><span id="l45.33"> </span>
<a href="#l45.34"></a><span id="l45.34"> #endif /* _MORKPARSER_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/db/mork/src/morkPool.cpp</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/db/mork/src/morkPool.cpp</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -46,17 +46,17 @@</span>
<a href="#l46.4"></a><span id="l46.4"> #ifndef _MORKDEQUE_</span>
<a href="#l46.5"></a><span id="l46.5"> #  include &quot;morkDeque.h&quot;</span>
<a href="#l46.6"></a><span id="l46.6"> #endif</span>
<a href="#l46.7"></a><span id="l46.7"> </span>
<a href="#l46.8"></a><span id="l46.8"> #ifndef _MORKZONE_</span>
<a href="#l46.9"></a><span id="l46.9"> #  include &quot;morkZone.h&quot;</span>
<a href="#l46.10"></a><span id="l46.10"> #endif</span>
<a href="#l46.11"></a><span id="l46.11"> </span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l46.14"></a><span id="l46.14"> </span>
<a href="#l46.15"></a><span id="l46.15"> // ````` ````` ````` ````` `````</span>
<a href="#l46.16"></a><span id="l46.16"> // { ===== begin morkNode interface =====</span>
<a href="#l46.17"></a><span id="l46.17"> </span>
<a href="#l46.18"></a><span id="l46.18"> /*public virtual*/ void morkPool::CloseMorkNode(</span>
<a href="#l46.19"></a><span id="l46.19">     morkEnv* ev)  // ClosePool() only if open</span>
<a href="#l46.20"></a><span id="l46.20"> {</span>
<a href="#l46.21"></a><span id="l46.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l46.22"></a><span id="l46.22" class="difflineat">@@ -475,9 +475,9 @@ morkBookAtom* morkPool::NewFarBookAtomCo</span>
<a href="#l46.23"></a><span id="l46.23">     else</span>
<a href="#l46.24"></a><span id="l46.24">       ((morkWeeBookAtom*)newAtom)</span>
<a href="#l46.25"></a><span id="l46.25">           -&gt;InitWeeBookAtom(ev, buf, inAtom.mBookAtom_Space,</span>
<a href="#l46.26"></a><span id="l46.26">                             inAtom.mBookAtom_Id);</span>
<a href="#l46.27"></a><span id="l46.27">   }</span>
<a href="#l46.28"></a><span id="l46.28">   return newAtom;</span>
<a href="#l46.29"></a><span id="l46.29"> }</span>
<a href="#l46.30"></a><span id="l46.30"> </span>
<a href="#l46.31"></a><span id="l46.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l46.32"></a><span id="l46.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/db/mork/src/morkPool.h</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/db/mork/src/morkPool.h</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -13,17 +13,17 @@</span>
<a href="#l47.4"></a><span id="l47.4"> #ifndef _MORKDEQUE_</span>
<a href="#l47.5"></a><span id="l47.5"> #  include &quot;morkDeque.h&quot;</span>
<a href="#l47.6"></a><span id="l47.6"> #endif</span>
<a href="#l47.7"></a><span id="l47.7"> </span>
<a href="#l47.8"></a><span id="l47.8"> #ifndef _MORKNODE_</span>
<a href="#l47.9"></a><span id="l47.9"> #  include &quot;morkNode.h&quot;</span>
<a href="#l47.10"></a><span id="l47.10"> #endif</span>
<a href="#l47.11"></a><span id="l47.11"> </span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l47.14"></a><span id="l47.14"> </span>
<a href="#l47.15"></a><span id="l47.15"> class morkHandle;</span>
<a href="#l47.16"></a><span id="l47.16"> class morkHandleFrame;</span>
<a href="#l47.17"></a><span id="l47.17"> class morkHandleFace;  // just an opaque cookie type</span>
<a href="#l47.18"></a><span id="l47.18"> class morkBigBookAtom;</span>
<a href="#l47.19"></a><span id="l47.19"> class morkFarBookAtom;</span>
<a href="#l47.20"></a><span id="l47.20"> </span>
<a href="#l47.21"></a><span id="l47.21"> #define morkDerived_kPool /*i*/ 0x706C /* ascii 'pl' */</span>
<a href="#l47.22"></a><span id="l47.22" class="difflineat">@@ -152,11 +152,11 @@ class morkPool : public morkNode {</span>
<a href="#l47.23"></a><span id="l47.23">     morkNode::SlotWeakNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l47.24"></a><span id="l47.24">   }</span>
<a href="#l47.25"></a><span id="l47.25"> </span>
<a href="#l47.26"></a><span id="l47.26">   static void SlotStrongPool(morkPool* me, morkEnv* ev, morkPool** ioSlot) {</span>
<a href="#l47.27"></a><span id="l47.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l47.28"></a><span id="l47.28">   }</span>
<a href="#l47.29"></a><span id="l47.29"> };</span>
<a href="#l47.30"></a><span id="l47.30"> </span>
<a href="#l47.31"></a><span id="l47.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l47.32"></a><span id="l47.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l47.33"></a><span id="l47.33"> </span>
<a href="#l47.34"></a><span id="l47.34"> #endif /* _MORKPOOL_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/db/mork/src/morkPortTableCursor.cpp</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/db/mork/src/morkPortTableCursor.cpp</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -26,17 +26,17 @@</span>
<a href="#l48.4"></a><span id="l48.4"> #ifndef _MORKPORTTABLECURSOR_</span>
<a href="#l48.5"></a><span id="l48.5"> #  include &quot;morkPortTableCursor.h&quot;</span>
<a href="#l48.6"></a><span id="l48.6"> #endif</span>
<a href="#l48.7"></a><span id="l48.7"> </span>
<a href="#l48.8"></a><span id="l48.8"> #ifndef _MORKSTORE_</span>
<a href="#l48.9"></a><span id="l48.9"> #  include &quot;morkStore.h&quot;</span>
<a href="#l48.10"></a><span id="l48.10"> #endif</span>
<a href="#l48.11"></a><span id="l48.11"> </span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l48.14"></a><span id="l48.14"> </span>
<a href="#l48.15"></a><span id="l48.15"> // ````` ````` ````` ````` `````</span>
<a href="#l48.16"></a><span id="l48.16"> // { ===== begin morkNode interface =====</span>
<a href="#l48.17"></a><span id="l48.17"> </span>
<a href="#l48.18"></a><span id="l48.18"> /*public virtual*/ void morkPortTableCursor::CloseMorkNode(</span>
<a href="#l48.19"></a><span id="l48.19">     morkEnv* ev)  // ClosePortTableCursor() only if open</span>
<a href="#l48.20"></a><span id="l48.20"> {</span>
<a href="#l48.21"></a><span id="l48.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l48.22"></a><span id="l48.22" class="difflineat">@@ -373,9 +373,9 @@ morkPortTableCursor::NextTable(  // get </span>
<a href="#l48.23"></a><span id="l48.23">     if (table &amp;&amp; ev-&gt;Good()) outTable = table-&gt;AcquireTableHandle(ev);</span>
<a href="#l48.24"></a><span id="l48.24"> </span>
<a href="#l48.25"></a><span id="l48.25">     outErr = ev-&gt;AsErr();</span>
<a href="#l48.26"></a><span id="l48.26">   }</span>
<a href="#l48.27"></a><span id="l48.27">   if (acqTable) *acqTable = outTable;</span>
<a href="#l48.28"></a><span id="l48.28">   return outErr;</span>
<a href="#l48.29"></a><span id="l48.29"> }</span>
<a href="#l48.30"></a><span id="l48.30"> </span>
<a href="#l48.31"></a><span id="l48.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l48.32"></a><span id="l48.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/db/mork/src/morkPortTableCursor.h</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/db/mork/src/morkPortTableCursor.h</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -13,17 +13,17 @@</span>
<a href="#l49.4"></a><span id="l49.4"> #ifndef _MORKCURSOR_</span>
<a href="#l49.5"></a><span id="l49.5"> #  include &quot;morkCursor.h&quot;</span>
<a href="#l49.6"></a><span id="l49.6"> #endif</span>
<a href="#l49.7"></a><span id="l49.7"> </span>
<a href="#l49.8"></a><span id="l49.8"> #ifndef _MORKROWSPACE_</span>
<a href="#l49.9"></a><span id="l49.9"> #  include &quot;morkRowSpace.h&quot;</span>
<a href="#l49.10"></a><span id="l49.10"> #endif</span>
<a href="#l49.11"></a><span id="l49.11"> </span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l49.14"></a><span id="l49.14"> </span>
<a href="#l49.15"></a><span id="l49.15"> class orkinPortTableCursor;</span>
<a href="#l49.16"></a><span id="l49.16"> #define morkDerived_kPortTableCursor /*i*/ 0x7443 /* ascii 'tC' */</span>
<a href="#l49.17"></a><span id="l49.17"> </span>
<a href="#l49.18"></a><span id="l49.18"> class morkPortTableCursor : public morkCursor,</span>
<a href="#l49.19"></a><span id="l49.19">                             public nsIMdbPortTableCursor {  // row iterator</span>
<a href="#l49.20"></a><span id="l49.20">  public:</span>
<a href="#l49.21"></a><span id="l49.21">   NS_DECL_ISUPPORTS_INHERITED</span>
<a href="#l49.22"></a><span id="l49.22" class="difflineat">@@ -132,11 +132,11 @@ class morkPortTableCursor : public morkC</span>
<a href="#l49.23"></a><span id="l49.23">   }</span>
<a href="#l49.24"></a><span id="l49.24"> </span>
<a href="#l49.25"></a><span id="l49.25">   static void SlotStrongPortTableCursor(morkPortTableCursor* me, morkEnv* ev,</span>
<a href="#l49.26"></a><span id="l49.26">                                         morkPortTableCursor** ioSlot) {</span>
<a href="#l49.27"></a><span id="l49.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l49.28"></a><span id="l49.28">   }</span>
<a href="#l49.29"></a><span id="l49.29"> };</span>
<a href="#l49.30"></a><span id="l49.30"> </span>
<a href="#l49.31"></a><span id="l49.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l49.32"></a><span id="l49.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l49.33"></a><span id="l49.33"> </span>
<a href="#l49.34"></a><span id="l49.34"> #endif /* _MORKPORTTABLECURSOR_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/db/mork/src/morkProbeMap.cpp</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/db/mork/src/morkProbeMap.cpp</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -69,17 +69,17 @@ void morkMapScratch::halt_map_scratch(mo</span>
<a href="#l50.4"></a><span id="l50.4">   nsIMdbHeap* heap = sMapScratch_Heap;</span>
<a href="#l50.5"></a><span id="l50.5"> </span>
<a href="#l50.6"></a><span id="l50.6">   if (heap) {</span>
<a href="#l50.7"></a><span id="l50.7">     if (sMapScratch_Keys) heap-&gt;Free(ev-&gt;AsMdbEnv(), sMapScratch_Keys);</span>
<a href="#l50.8"></a><span id="l50.8">     if (sMapScratch_Vals) heap-&gt;Free(ev-&gt;AsMdbEnv(), sMapScratch_Vals);</span>
<a href="#l50.9"></a><span id="l50.9">   }</span>
<a href="#l50.10"></a><span id="l50.10"> }</span>
<a href="#l50.11"></a><span id="l50.11"> </span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l50.14"></a><span id="l50.14"> </span>
<a href="#l50.15"></a><span id="l50.15"> /*============================================================================*/</span>
<a href="#l50.16"></a><span id="l50.16"> /* morkProbeMap */</span>
<a href="#l50.17"></a><span id="l50.17"> </span>
<a href="#l50.18"></a><span id="l50.18"> void morkProbeMap::ProbeMapBadTagError(morkEnv* ev) const {</span>
<a href="#l50.19"></a><span id="l50.19">   ev-&gt;NewError(&quot;bad sProbeMap_Tag&quot;);</span>
<a href="#l50.20"></a><span id="l50.20"> }</span>
<a href="#l50.21"></a><span id="l50.21"> </span>
<a href="#l50.22"></a><span id="l50.22" class="difflineat">@@ -1001,17 +1001,17 @@ mork_change* morkProbeMapIter::Here(mork</span>
<a href="#l50.23"></a><span id="l50.23"> </span>
<a href="#l50.24"></a><span id="l50.24"> mork_change* morkProbeMapIter::CutHere(morkEnv* ev, void* outKey,</span>
<a href="#l50.25"></a><span id="l50.25">                                        void* outVal) {</span>
<a href="#l50.26"></a><span id="l50.26">   morkProbeMap::ProbeMapCutError(ev);</span>
<a href="#l50.27"></a><span id="l50.27"> </span>
<a href="#l50.28"></a><span id="l50.28">   return (mork_change*)0;</span>
<a href="#l50.29"></a><span id="l50.29"> }</span>
<a href="#l50.30"></a><span id="l50.30"> </span>
<a href="#l50.31"></a><span id="l50.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l50.32"></a><span id="l50.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l50.33"></a><span id="l50.33"> </span>
<a href="#l50.34"></a><span id="l50.34"> // NOTE: the following methods ONLY work for sMap_ValIsIP pointer values.</span>
<a href="#l50.35"></a><span id="l50.35"> // (Note the implied assumption that zero is never a good value pattern.)</span>
<a href="#l50.36"></a><span id="l50.36"> </span>
<a href="#l50.37"></a><span id="l50.37"> void* morkProbeMapIter::IterFirstVal(morkEnv* ev, void* outKey)</span>
<a href="#l50.38"></a><span id="l50.38"> // equivalent to { void* v=0; this-&gt;IterFirst(ev, outKey, &amp;v); return v; }</span>
<a href="#l50.39"></a><span id="l50.39"> {</span>
<a href="#l50.40"></a><span id="l50.40">   morkProbeMap* map = sProbeMapIter_Map;</span>
<a href="#l50.41"></a><span id="l50.41" class="difflineat">@@ -1099,9 +1099,9 @@ void* morkProbeMapIter::IterHereKey(mork</span>
<a href="#l50.42"></a><span id="l50.42">       this-&gt;IterHere(ev, &amp;k, (void*)0);</span>
<a href="#l50.43"></a><span id="l50.43">       return k;</span>
<a href="#l50.44"></a><span id="l50.44">     } else</span>
<a href="#l50.45"></a><span id="l50.45">       map-&gt;MapKeyIsNotIPError(ev);</span>
<a href="#l50.46"></a><span id="l50.46">   }</span>
<a href="#l50.47"></a><span id="l50.47">   return (void*)0;</span>
<a href="#l50.48"></a><span id="l50.48"> }</span>
<a href="#l50.49"></a><span id="l50.49"> </span>
<a href="#l50.50"></a><span id="l50.50" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l50.51"></a><span id="l50.51" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/db/mork/src/morkProbeMap.h</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/db/mork/src/morkProbeMap.h</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -46,31 +46,31 @@</span>
<a href="#l51.4"></a><span id="l51.4"> #ifndef _MORK_</span>
<a href="#l51.5"></a><span id="l51.5"> #  include &quot;mork.h&quot;</span>
<a href="#l51.6"></a><span id="l51.6"> #endif</span>
<a href="#l51.7"></a><span id="l51.7"> </span>
<a href="#l51.8"></a><span id="l51.8"> #ifndef _MORKNODE_</span>
<a href="#l51.9"></a><span id="l51.9"> #  include &quot;morkNode.h&quot;</span>
<a href="#l51.10"></a><span id="l51.10"> #endif</span>
<a href="#l51.11"></a><span id="l51.11"> </span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l51.14"></a><span id="l51.14"> </span>
<a href="#l51.15"></a><span id="l51.15"> class morkMapScratch {  // utility class used by map subclasses</span>
<a href="#l51.16"></a><span id="l51.16">  public:</span>
<a href="#l51.17"></a><span id="l51.17">   nsIMdbHeap* sMapScratch_Heap;  // cached sMap_Heap</span>
<a href="#l51.18"></a><span id="l51.18">   mork_count sMapScratch_Slots;  // cached sMap_Slots</span>
<a href="#l51.19"></a><span id="l51.19"> </span>
<a href="#l51.20"></a><span id="l51.20">   mork_u1* sMapScratch_Keys;  // cached sMap_Keys</span>
<a href="#l51.21"></a><span id="l51.21">   mork_u1* sMapScratch_Vals;  // cached sMap_Vals</span>
<a href="#l51.22"></a><span id="l51.22"> </span>
<a href="#l51.23"></a><span id="l51.23">  public:</span>
<a href="#l51.24"></a><span id="l51.24">   void halt_map_scratch(morkEnv* ev);</span>
<a href="#l51.25"></a><span id="l51.25"> };</span>
<a href="#l51.26"></a><span id="l51.26"> </span>
<a href="#l51.27"></a><span id="l51.27" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l51.28"></a><span id="l51.28" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l51.29"></a><span id="l51.29"> </span>
<a href="#l51.30"></a><span id="l51.30"> #define morkDerived_kProbeMap 0x7072 /* ascii 'pr' */</span>
<a href="#l51.31"></a><span id="l51.31"> #define morkProbeMap_kTag 0x70724D50 /* ascii 'prMP' */</span>
<a href="#l51.32"></a><span id="l51.32"> </span>
<a href="#l51.33"></a><span id="l51.33"> #define morkProbeMap_kLazyClearOnAdd ((mork_u1)'c')</span>
<a href="#l51.34"></a><span id="l51.34"> </span>
<a href="#l51.35"></a><span id="l51.35"> class morkProbeMap : public morkNode {</span>
<a href="#l51.36"></a><span id="l51.36">  protected:</span>
<a href="#l51.37"></a><span id="l51.37" class="difflineat">@@ -413,11 +413,11 @@ class morkProbeMapIter {</span>
<a href="#l51.38"></a><span id="l51.38">  public:  // simulation of the morkMapIter API for morkMap compatibility:</span>
<a href="#l51.39"></a><span id="l51.39">   mork_change* First(morkEnv* ev, void* outKey, void* outVal);</span>
<a href="#l51.40"></a><span id="l51.40">   mork_change* Next(morkEnv* ev, void* outKey, void* outVal);</span>
<a href="#l51.41"></a><span id="l51.41">   mork_change* Here(morkEnv* ev, void* outKey, void* outVal);</span>
<a href="#l51.42"></a><span id="l51.42"> </span>
<a href="#l51.43"></a><span id="l51.43">   mork_change* CutHere(morkEnv* ev, void* outKey, void* outVal);</span>
<a href="#l51.44"></a><span id="l51.44"> };</span>
<a href="#l51.45"></a><span id="l51.45"> </span>
<a href="#l51.46"></a><span id="l51.46" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l51.47"></a><span id="l51.47" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l51.48"></a><span id="l51.48"> </span>
<a href="#l51.49"></a><span id="l51.49"> #endif /* _MORKPROBEMAP_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/db/mork/src/morkQuickSort.h</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/db/mork/src/morkQuickSort.h</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -9,16 +9,16 @@</span>
<a href="#l52.4"></a><span id="l52.4"> #ifndef _MDB_</span>
<a href="#l52.5"></a><span id="l52.5"> #  include &quot;mdb.h&quot;</span>
<a href="#l52.6"></a><span id="l52.6"> #endif</span>
<a href="#l52.7"></a><span id="l52.7"> </span>
<a href="#l52.8"></a><span id="l52.8"> #ifndef _MORK_</span>
<a href="#l52.9"></a><span id="l52.9"> #  include &quot;mork.h&quot;</span>
<a href="#l52.10"></a><span id="l52.10"> #endif</span>
<a href="#l52.11"></a><span id="l52.11"> </span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l52.14"></a><span id="l52.14"> </span>
<a href="#l52.15"></a><span id="l52.15"> extern void morkQuickSort(mork_u1* ioVec, mork_u4 inCount, mork_u4 inSize,</span>
<a href="#l52.16"></a><span id="l52.16">                           mdbAny_Order inOrder, void* ioClosure);</span>
<a href="#l52.17"></a><span id="l52.17"> </span>
<a href="#l52.18"></a><span id="l52.18" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l52.19"></a><span id="l52.19" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l52.20"></a><span id="l52.20"> </span>
<a href="#l52.21"></a><span id="l52.21"> #endif /* _MORKQUICKSORT_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/db/mork/src/morkRow.cpp</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/db/mork/src/morkRow.cpp</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -46,17 +46,17 @@</span>
<a href="#l53.4"></a><span id="l53.4"> #ifndef _MORKSTORE_</span>
<a href="#l53.5"></a><span id="l53.5"> #  include &quot;morkStore.h&quot;</span>
<a href="#l53.6"></a><span id="l53.6"> #endif</span>
<a href="#l53.7"></a><span id="l53.7"> </span>
<a href="#l53.8"></a><span id="l53.8"> #ifndef _MORKROWCELLCURSOR_</span>
<a href="#l53.9"></a><span id="l53.9"> #  include &quot;morkRowCellCursor.h&quot;</span>
<a href="#l53.10"></a><span id="l53.10"> #endif</span>
<a href="#l53.11"></a><span id="l53.11"> </span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l53.14"></a><span id="l53.14"> </span>
<a href="#l53.15"></a><span id="l53.15"> // notifications regarding row changes:</span>
<a href="#l53.16"></a><span id="l53.16"> </span>
<a href="#l53.17"></a><span id="l53.17"> void morkRow::NoteRowAddCol(morkEnv* ev, mork_column inColumn) {</span>
<a href="#l53.18"></a><span id="l53.18">   if (!this-&gt;IsRowRewrite()) {</span>
<a href="#l53.19"></a><span id="l53.19">     mork_delta newDelta;</span>
<a href="#l53.20"></a><span id="l53.20">     morkDelta_Init(newDelta, inColumn, morkChange_kAdd);</span>
<a href="#l53.21"></a><span id="l53.21"> </span>
<a href="#l53.22"></a><span id="l53.22" class="difflineat">@@ -762,9 +762,9 @@ morkRowCellCursor* morkRow::NewRowCellCu</span>
<a href="#l53.23"></a><span id="l53.23">         }</span>
<a href="#l53.24"></a><span id="l53.24">         rowObj-&gt;Release();  // always cut ref (cursor has its own)</span>
<a href="#l53.25"></a><span id="l53.25">       }</span>
<a href="#l53.26"></a><span id="l53.26">     }</span>
<a href="#l53.27"></a><span id="l53.27">   }</span>
<a href="#l53.28"></a><span id="l53.28">   return outCursor;</span>
<a href="#l53.29"></a><span id="l53.29"> }</span>
<a href="#l53.30"></a><span id="l53.30"> </span>
<a href="#l53.31"></a><span id="l53.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l53.32"></a><span id="l53.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/db/mork/src/morkRow.h</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/db/mork/src/morkRow.h</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -9,17 +9,17 @@</span>
<a href="#l54.4"></a><span id="l54.4"> #ifndef _MORK_</span>
<a href="#l54.5"></a><span id="l54.5"> #  include &quot;mork.h&quot;</span>
<a href="#l54.6"></a><span id="l54.6"> #endif</span>
<a href="#l54.7"></a><span id="l54.7"> </span>
<a href="#l54.8"></a><span id="l54.8"> #ifndef _MORKCELL_</span>
<a href="#l54.9"></a><span id="l54.9"> #  include &quot;morkCell.h&quot;</span>
<a href="#l54.10"></a><span id="l54.10"> #endif</span>
<a href="#l54.11"></a><span id="l54.11"> </span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l54.14"></a><span id="l54.14"> </span>
<a href="#l54.15"></a><span id="l54.15"> class nsIMdbRow;</span>
<a href="#l54.16"></a><span id="l54.16"> class nsIMdbCell;</span>
<a href="#l54.17"></a><span id="l54.17"> #define morkDerived_kRow /*i*/ 0x5277 /* ascii 'Rw' */</span>
<a href="#l54.18"></a><span id="l54.18"> </span>
<a href="#l54.19"></a><span id="l54.19"> #define morkRow_kMaxGcUses 0x0FF   /* max for 8-bit unsigned int */</span>
<a href="#l54.20"></a><span id="l54.20"> #define morkRow_kMaxLength 0x0FFFF /* max for 16-bit unsigned int */</span>
<a href="#l54.21"></a><span id="l54.21"> #define morkRow_kMinusOneRid ((mork_rid)-1)</span>
<a href="#l54.22"></a><span id="l54.22" class="difflineat">@@ -198,11 +198,11 @@ class morkRow {  // row of cells</span>
<a href="#l54.23"></a><span id="l54.23">   static void NonRowTypeWarning(morkEnv* ev);</span>
<a href="#l54.24"></a><span id="l54.24">   static void GcUsesUnderflowWarning(morkEnv* ev);</span>
<a href="#l54.25"></a><span id="l54.25"> </span>
<a href="#l54.26"></a><span id="l54.26">  private:  // copying is not allowed</span>
<a href="#l54.27"></a><span id="l54.27">   morkRow(const morkRow&amp; other);</span>
<a href="#l54.28"></a><span id="l54.28">   morkRow&amp; operator=(const morkRow&amp; other);</span>
<a href="#l54.29"></a><span id="l54.29"> };</span>
<a href="#l54.30"></a><span id="l54.30"> </span>
<a href="#l54.31"></a><span id="l54.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l54.32"></a><span id="l54.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l54.33"></a><span id="l54.33"> </span>
<a href="#l54.34"></a><span id="l54.34"> #endif /* _MORKROW_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1" class="difflineminus">--- a/db/mork/src/morkRowCellCursor.cpp</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineplus">+++ b/db/mork/src/morkRowCellCursor.cpp</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineat">@@ -34,17 +34,17 @@</span>
<a href="#l55.4"></a><span id="l55.4"> #ifndef _MORKROWOBJECT_</span>
<a href="#l55.5"></a><span id="l55.5"> #  include &quot;morkRowObject.h&quot;</span>
<a href="#l55.6"></a><span id="l55.6"> #endif</span>
<a href="#l55.7"></a><span id="l55.7"> </span>
<a href="#l55.8"></a><span id="l55.8"> #ifndef _MORKROW_</span>
<a href="#l55.9"></a><span id="l55.9"> #  include &quot;morkRow.h&quot;</span>
<a href="#l55.10"></a><span id="l55.10"> #endif</span>
<a href="#l55.11"></a><span id="l55.11"> </span>
<a href="#l55.12"></a><span id="l55.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l55.13"></a><span id="l55.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l55.14"></a><span id="l55.14"> </span>
<a href="#l55.15"></a><span id="l55.15"> // ````` ````` ````` ````` `````</span>
<a href="#l55.16"></a><span id="l55.16"> // { ===== begin morkNode interface =====</span>
<a href="#l55.17"></a><span id="l55.17"> </span>
<a href="#l55.18"></a><span id="l55.18"> /*public virtual*/ void morkRowCellCursor::CloseMorkNode(</span>
<a href="#l55.19"></a><span id="l55.19">     morkEnv* ev)  // CloseRowCellCursor() only if open</span>
<a href="#l55.20"></a><span id="l55.20"> {</span>
<a href="#l55.21"></a><span id="l55.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l55.22"></a><span id="l55.22" class="difflineat">@@ -109,17 +109,17 @@ NS_IMPL_ISUPPORTS_INHERITED(morkRowCellC</span>
<a href="#l55.23"></a><span id="l55.23"> /*static*/ void morkRowCellCursor::NilRowObjectError(morkEnv* ev) {</span>
<a href="#l55.24"></a><span id="l55.24">   ev-&gt;NewError(&quot;nil mRowCellCursor_RowObject&quot;);</span>
<a href="#l55.25"></a><span id="l55.25"> }</span>
<a href="#l55.26"></a><span id="l55.26"> </span>
<a href="#l55.27"></a><span id="l55.27"> /*static*/ void morkRowCellCursor::NonRowCellCursorTypeError(morkEnv* ev) {</span>
<a href="#l55.28"></a><span id="l55.28">   ev-&gt;NewError(&quot;non morkRowCellCursor&quot;);</span>
<a href="#l55.29"></a><span id="l55.29"> }</span>
<a href="#l55.30"></a><span id="l55.30"> </span>
<a href="#l55.31"></a><span id="l55.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l55.32"></a><span id="l55.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l55.33"></a><span id="l55.33"> // { ----- begin attribute methods -----</span>
<a href="#l55.34"></a><span id="l55.34"> NS_IMETHODIMP</span>
<a href="#l55.35"></a><span id="l55.35"> morkRowCellCursor::SetRow(nsIMdbEnv* mev, nsIMdbRow* ioRow) {</span>
<a href="#l55.36"></a><span id="l55.36">   nsresult outErr = NS_OK;</span>
<a href="#l55.37"></a><span id="l55.37">   morkRow* row = 0;</span>
<a href="#l55.38"></a><span id="l55.38">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l55.39"></a><span id="l55.39">   if (ev) {</span>
<a href="#l55.40"></a><span id="l55.40">     row = (morkRow*)ioRow;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l56.1"></a><span id="l56.1" class="difflineminus">--- a/db/mork/src/morkRowCellCursor.h</span>
<a href="#l56.2"></a><span id="l56.2" class="difflineplus">+++ b/db/mork/src/morkRowCellCursor.h</span>
<a href="#l56.3"></a><span id="l56.3" class="difflineat">@@ -9,17 +9,17 @@</span>
<a href="#l56.4"></a><span id="l56.4"> #ifndef _MORK_</span>
<a href="#l56.5"></a><span id="l56.5"> #  include &quot;mork.h&quot;</span>
<a href="#l56.6"></a><span id="l56.6"> #endif</span>
<a href="#l56.7"></a><span id="l56.7"> </span>
<a href="#l56.8"></a><span id="l56.8"> #ifndef _MORKCURSOR_</span>
<a href="#l56.9"></a><span id="l56.9"> #  include &quot;morkCursor.h&quot;</span>
<a href="#l56.10"></a><span id="l56.10"> #endif</span>
<a href="#l56.11"></a><span id="l56.11"> </span>
<a href="#l56.12"></a><span id="l56.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l56.13"></a><span id="l56.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l56.14"></a><span id="l56.14"> </span>
<a href="#l56.15"></a><span id="l56.15"> class orkinRowCellCursor;</span>
<a href="#l56.16"></a><span id="l56.16"> #define morkDerived_kRowCellCursor /*i*/ 0x6343 /* ascii 'cC' */</span>
<a href="#l56.17"></a><span id="l56.17"> </span>
<a href="#l56.18"></a><span id="l56.18"> class morkRowCellCursor : public morkCursor,</span>
<a href="#l56.19"></a><span id="l56.19">                           public nsIMdbRowCellCursor {  // row iterator</span>
<a href="#l56.20"></a><span id="l56.20"> </span>
<a href="#l56.21"></a><span id="l56.21">   // public: // slots inherited from morkObject (meant to inform only)</span>
<a href="#l56.22"></a><span id="l56.22" class="difflineat">@@ -117,11 +117,11 @@ class morkRowCellCursor : public morkCur</span>
<a href="#l56.23"></a><span id="l56.23">   }</span>
<a href="#l56.24"></a><span id="l56.24"> </span>
<a href="#l56.25"></a><span id="l56.25">   static void SlotStrongRowCellCursor(morkRowCellCursor* me, morkEnv* ev,</span>
<a href="#l56.26"></a><span id="l56.26">                                       morkRowCellCursor** ioSlot) {</span>
<a href="#l56.27"></a><span id="l56.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l56.28"></a><span id="l56.28">   }</span>
<a href="#l56.29"></a><span id="l56.29"> };</span>
<a href="#l56.30"></a><span id="l56.30"> </span>
<a href="#l56.31"></a><span id="l56.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l56.32"></a><span id="l56.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l56.33"></a><span id="l56.33"> </span>
<a href="#l56.34"></a><span id="l56.34"> #endif /* _MORKROWCELLCURSOR_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l57.1"></a><span id="l57.1" class="difflineminus">--- a/db/mork/src/morkRowMap.cpp</span>
<a href="#l57.2"></a><span id="l57.2" class="difflineplus">+++ b/db/mork/src/morkRowMap.cpp</span>
<a href="#l57.3"></a><span id="l57.3" class="difflineat">@@ -26,17 +26,17 @@</span>
<a href="#l57.4"></a><span id="l57.4"> #ifndef _MORKROWMAP_</span>
<a href="#l57.5"></a><span id="l57.5"> #  include &quot;morkRowMap.h&quot;</span>
<a href="#l57.6"></a><span id="l57.6"> #endif</span>
<a href="#l57.7"></a><span id="l57.7"> </span>
<a href="#l57.8"></a><span id="l57.8"> #ifndef _MORKROW_</span>
<a href="#l57.9"></a><span id="l57.9"> #  include &quot;morkRow.h&quot;</span>
<a href="#l57.10"></a><span id="l57.10"> #endif</span>
<a href="#l57.11"></a><span id="l57.11"> </span>
<a href="#l57.12"></a><span id="l57.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l57.13"></a><span id="l57.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l57.14"></a><span id="l57.14"> </span>
<a href="#l57.15"></a><span id="l57.15"> // ````` ````` ````` ````` `````</span>
<a href="#l57.16"></a><span id="l57.16"> // { ===== begin morkNode interface =====</span>
<a href="#l57.17"></a><span id="l57.17"> </span>
<a href="#l57.18"></a><span id="l57.18"> /*public virtual*/ void morkRowMap::CloseMorkNode(</span>
<a href="#l57.19"></a><span id="l57.19">     morkEnv* ev)  // CloseRowMap() only if open</span>
<a href="#l57.20"></a><span id="l57.20"> {</span>
<a href="#l57.21"></a><span id="l57.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l57.22"></a><span id="l57.22" class="difflineat">@@ -124,17 +124,17 @@ morkRow* morkRowMap::GetOid(morkEnv* ev,</span>
<a href="#l57.23"></a><span id="l57.23"> </span>
<a href="#l57.24"></a><span id="l57.24"> morkRow* morkRowMap::GetRow(morkEnv* ev, const morkRow* ioRow) {</span>
<a href="#l57.25"></a><span id="l57.25">   morkRow* oldKey = 0;</span>
<a href="#l57.26"></a><span id="l57.26">   this-&gt;Get(ev, &amp;ioRow, &amp;oldKey, /*val*/ (void*)0, (mork_change**)0);</span>
<a href="#l57.27"></a><span id="l57.27"> </span>
<a href="#l57.28"></a><span id="l57.28">   return oldKey;</span>
<a href="#l57.29"></a><span id="l57.29"> }</span>
<a href="#l57.30"></a><span id="l57.30"> </span>
<a href="#l57.31"></a><span id="l57.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l57.32"></a><span id="l57.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l57.33"></a><span id="l57.33"> </span>
<a href="#l57.34"></a><span id="l57.34"> // ````` ````` ````` ````` `````</span>
<a href="#l57.35"></a><span id="l57.35"> // { ===== begin morkNode interface =====</span>
<a href="#l57.36"></a><span id="l57.36"> </span>
<a href="#l57.37"></a><span id="l57.37"> /*public virtual*/ void morkRowProbeMap::CloseMorkNode(</span>
<a href="#l57.38"></a><span id="l57.38">     morkEnv* ev)  // CloseRowProbeMap() only if open</span>
<a href="#l57.39"></a><span id="l57.39"> {</span>
<a href="#l57.40"></a><span id="l57.40">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l57.41"></a><span id="l57.41" class="difflineat">@@ -242,9 +242,9 @@ morkRow* morkRowProbeMap::GetOid(morkEnv</span>
<a href="#l57.42"></a><span id="l57.42"> </span>
<a href="#l57.43"></a><span id="l57.43"> morkRow* morkRowProbeMap::GetRow(morkEnv* ev, const morkRow* ioRow) {</span>
<a href="#l57.44"></a><span id="l57.44">   morkRow* oldKey = 0;</span>
<a href="#l57.45"></a><span id="l57.45">   this-&gt;MapAt(ev, &amp;ioRow, &amp;oldKey, /*val*/ (void*)0);</span>
<a href="#l57.46"></a><span id="l57.46"> </span>
<a href="#l57.47"></a><span id="l57.47">   return oldKey;</span>
<a href="#l57.48"></a><span id="l57.48"> }</span>
<a href="#l57.49"></a><span id="l57.49"> </span>
<a href="#l57.50"></a><span id="l57.50" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l57.51"></a><span id="l57.51" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l58.1"></a><span id="l58.1" class="difflineminus">--- a/db/mork/src/morkRowMap.h</span>
<a href="#l58.2"></a><span id="l58.2" class="difflineplus">+++ b/db/mork/src/morkRowMap.h</span>
<a href="#l58.3"></a><span id="l58.3" class="difflineat">@@ -17,17 +17,17 @@</span>
<a href="#l58.4"></a><span id="l58.4"> #ifndef _MORKMAP_</span>
<a href="#l58.5"></a><span id="l58.5"> #  include &quot;morkMap.h&quot;</span>
<a href="#l58.6"></a><span id="l58.6"> #endif</span>
<a href="#l58.7"></a><span id="l58.7"> </span>
<a href="#l58.8"></a><span id="l58.8"> #ifndef _MORKPROBEMAP_</span>
<a href="#l58.9"></a><span id="l58.9"> #  include &quot;morkProbeMap.h&quot;</span>
<a href="#l58.10"></a><span id="l58.10"> #endif</span>
<a href="#l58.11"></a><span id="l58.11"> </span>
<a href="#l58.12"></a><span id="l58.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l58.13"></a><span id="l58.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l58.14"></a><span id="l58.14"> </span>
<a href="#l58.15"></a><span id="l58.15"> #define morkDerived_kRowMap /*i*/ 0x724D /* ascii 'rM' */</span>
<a href="#l58.16"></a><span id="l58.16"> </span>
<a href="#l58.17"></a><span id="l58.17"> /*| morkRowMap: maps a set of morkRow by contained Oid</span>
<a href="#l58.18"></a><span id="l58.18"> |*/</span>
<a href="#l58.19"></a><span id="l58.19"> class morkRowMap : public morkMap {  // for mapping row IDs to rows</span>
<a href="#l58.20"></a><span id="l58.20"> </span>
<a href="#l58.21"></a><span id="l58.21">   // { ===== begin morkNode interface =====</span>
<a href="#l58.22"></a><span id="l58.22" class="difflineat">@@ -108,17 +108,17 @@ class morkRowMapIter : public morkMapIte</span>
<a href="#l58.23"></a><span id="l58.23">     return this-&gt;Here(ev, outRowPtr, /*val*/ (void*)0);</span>
<a href="#l58.24"></a><span id="l58.24">   }</span>
<a href="#l58.25"></a><span id="l58.25"> </span>
<a href="#l58.26"></a><span id="l58.26">   mork_change* CutHereRow(morkEnv* ev, morkRow** outRowPtr) {</span>
<a href="#l58.27"></a><span id="l58.27">     return this-&gt;CutHere(ev, outRowPtr, /*val*/ (void*)0);</span>
<a href="#l58.28"></a><span id="l58.28">   }</span>
<a href="#l58.29"></a><span id="l58.29"> };</span>
<a href="#l58.30"></a><span id="l58.30"> </span>
<a href="#l58.31"></a><span id="l58.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l58.32"></a><span id="l58.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l58.33"></a><span id="l58.33"> </span>
<a href="#l58.34"></a><span id="l58.34"> #define morkDerived_kRowProbeMap /*i*/ 0x726D /* ascii 'rm' */</span>
<a href="#l58.35"></a><span id="l58.35"> </span>
<a href="#l58.36"></a><span id="l58.36"> /*| morkRowProbeMap: maps a set of morkRow by contained Oid</span>
<a href="#l58.37"></a><span id="l58.37"> |*/</span>
<a href="#l58.38"></a><span id="l58.38"> class morkRowProbeMap : public morkProbeMap {  // for mapping row IDs to rows</span>
<a href="#l58.39"></a><span id="l58.39"> </span>
<a href="#l58.40"></a><span id="l58.40">   // { ===== begin morkNode interface =====</span>
<a href="#l58.41"></a><span id="l58.41" class="difflineat">@@ -218,11 +218,11 @@ class morkRowProbeMapIter : public morkP</span>
<a href="#l58.42"></a><span id="l58.42">     return this-&gt;Here(ev, outRowPtr, /*val*/ (void*)0);</span>
<a href="#l58.43"></a><span id="l58.43">   }</span>
<a href="#l58.44"></a><span id="l58.44"> </span>
<a href="#l58.45"></a><span id="l58.45">   mork_change* CutHereRow(morkEnv* ev, morkRow** outRowPtr) {</span>
<a href="#l58.46"></a><span id="l58.46">     return this-&gt;CutHere(ev, outRowPtr, /*val*/ (void*)0);</span>
<a href="#l58.47"></a><span id="l58.47">   }</span>
<a href="#l58.48"></a><span id="l58.48"> };</span>
<a href="#l58.49"></a><span id="l58.49"> </span>
<a href="#l58.50"></a><span id="l58.50" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l58.51"></a><span id="l58.51" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l58.52"></a><span id="l58.52"> </span>
<a href="#l58.53"></a><span id="l58.53"> #endif /* _MORKROWMAP_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l59.1"></a><span id="l59.1" class="difflineminus">--- a/db/mork/src/morkRowObject.cpp</span>
<a href="#l59.2"></a><span id="l59.2" class="difflineplus">+++ b/db/mork/src/morkRowObject.cpp</span>
<a href="#l59.3"></a><span id="l59.3" class="difflineat">@@ -34,17 +34,17 @@</span>
<a href="#l59.4"></a><span id="l59.4"> #ifndef _MORKCELLOBJECT_</span>
<a href="#l59.5"></a><span id="l59.5"> #  include &quot;morkCellObject.h&quot;</span>
<a href="#l59.6"></a><span id="l59.6"> #endif</span>
<a href="#l59.7"></a><span id="l59.7"> </span>
<a href="#l59.8"></a><span id="l59.8"> #ifndef _MORKROW_</span>
<a href="#l59.9"></a><span id="l59.9"> #  include &quot;morkRow.h&quot;</span>
<a href="#l59.10"></a><span id="l59.10"> #endif</span>
<a href="#l59.11"></a><span id="l59.11"> </span>
<a href="#l59.12"></a><span id="l59.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l59.13"></a><span id="l59.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l59.14"></a><span id="l59.14"> </span>
<a href="#l59.15"></a><span id="l59.15"> // ````` ````` ````` ````` `````</span>
<a href="#l59.16"></a><span id="l59.16"> // { ===== begin morkNode interface =====</span>
<a href="#l59.17"></a><span id="l59.17"> </span>
<a href="#l59.18"></a><span id="l59.18"> /*public virtual*/ void morkRowObject::CloseMorkNode(</span>
<a href="#l59.19"></a><span id="l59.19">     morkEnv* ev)  // CloseRowObject() only if open</span>
<a href="#l59.20"></a><span id="l59.20"> {</span>
<a href="#l59.21"></a><span id="l59.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l59.22"></a><span id="l59.22" class="difflineat">@@ -523,9 +523,9 @@ morkRowObject::SeekCellYarn(  // resembl</span>
<a href="#l59.23"></a><span id="l59.23"> }</span>
<a href="#l59.24"></a><span id="l59.24"> </span>
<a href="#l59.25"></a><span id="l59.25"> nsIMdbRow* morkRowObject::AcquireRowHandle(morkEnv* ev)  // mObject_Handle</span>
<a href="#l59.26"></a><span id="l59.26"> {</span>
<a href="#l59.27"></a><span id="l59.27">   AddRef();</span>
<a href="#l59.28"></a><span id="l59.28">   return this;</span>
<a href="#l59.29"></a><span id="l59.29"> }</span>
<a href="#l59.30"></a><span id="l59.30"> </span>
<a href="#l59.31"></a><span id="l59.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l59.32"></a><span id="l59.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l60.1"></a><span id="l60.1" class="difflineminus">--- a/db/mork/src/morkRowObject.h</span>
<a href="#l60.2"></a><span id="l60.2" class="difflineplus">+++ b/db/mork/src/morkRowObject.h</span>
<a href="#l60.3"></a><span id="l60.3" class="difflineat">@@ -9,17 +9,17 @@</span>
<a href="#l60.4"></a><span id="l60.4"> #ifndef _MORK_</span>
<a href="#l60.5"></a><span id="l60.5"> #  include &quot;mork.h&quot;</span>
<a href="#l60.6"></a><span id="l60.6"> #endif</span>
<a href="#l60.7"></a><span id="l60.7"> </span>
<a href="#l60.8"></a><span id="l60.8"> #ifndef _MORKOBJECT_</span>
<a href="#l60.9"></a><span id="l60.9"> #  include &quot;morkObject.h&quot;</span>
<a href="#l60.10"></a><span id="l60.10"> #endif</span>
<a href="#l60.11"></a><span id="l60.11"> </span>
<a href="#l60.12"></a><span id="l60.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l60.13"></a><span id="l60.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l60.14"></a><span id="l60.14"> </span>
<a href="#l60.15"></a><span id="l60.15"> class nsIMdbRow;</span>
<a href="#l60.16"></a><span id="l60.16"> #define morkDerived_kRowObject /*i*/ 0x724F /* ascii 'rO' */</span>
<a href="#l60.17"></a><span id="l60.17"> </span>
<a href="#l60.18"></a><span id="l60.18"> class morkRowObject : public morkObject, public nsIMdbRow {  //</span>
<a href="#l60.19"></a><span id="l60.19"> </span>
<a href="#l60.20"></a><span id="l60.20">  public:  // state is public because the entire Mork system is private</span>
<a href="#l60.21"></a><span id="l60.21">   NS_DECL_ISUPPORTS_INHERITED</span>
<a href="#l60.22"></a><span id="l60.22" class="difflineat">@@ -194,11 +194,11 @@ class morkRowObject : public morkObject,</span>
<a href="#l60.23"></a><span id="l60.23">   }</span>
<a href="#l60.24"></a><span id="l60.24"> </span>
<a href="#l60.25"></a><span id="l60.25">   static void SlotStrongRowObject(morkRowObject* me, morkEnv* ev,</span>
<a href="#l60.26"></a><span id="l60.26">                                   morkRowObject** ioSlot) {</span>
<a href="#l60.27"></a><span id="l60.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l60.28"></a><span id="l60.28">   }</span>
<a href="#l60.29"></a><span id="l60.29"> };</span>
<a href="#l60.30"></a><span id="l60.30"> </span>
<a href="#l60.31"></a><span id="l60.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l60.32"></a><span id="l60.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l60.33"></a><span id="l60.33"> </span>
<a href="#l60.34"></a><span id="l60.34"> #endif /* _MORKROWOBJECT_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l61.1"></a><span id="l61.1" class="difflineminus">--- a/db/mork/src/morkRowSpace.cpp</span>
<a href="#l61.2"></a><span id="l61.2" class="difflineplus">+++ b/db/mork/src/morkRowSpace.cpp</span>
<a href="#l61.3"></a><span id="l61.3" class="difflineat">@@ -58,17 +58,17 @@</span>
<a href="#l61.4"></a><span id="l61.4"> #ifndef _MORKATOMMAP_</span>
<a href="#l61.5"></a><span id="l61.5"> #  include &quot;morkAtomMap.h&quot;</span>
<a href="#l61.6"></a><span id="l61.6"> #endif</span>
<a href="#l61.7"></a><span id="l61.7"> </span>
<a href="#l61.8"></a><span id="l61.8"> #ifndef _MORKROWOBJECT_</span>
<a href="#l61.9"></a><span id="l61.9"> #  include &quot;morkRowObject.h&quot;</span>
<a href="#l61.10"></a><span id="l61.10"> #endif</span>
<a href="#l61.11"></a><span id="l61.11"> </span>
<a href="#l61.12"></a><span id="l61.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l61.13"></a><span id="l61.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l61.14"></a><span id="l61.14"> </span>
<a href="#l61.15"></a><span id="l61.15"> // ````` ````` ````` ````` `````</span>
<a href="#l61.16"></a><span id="l61.16"> // { ===== begin morkNode interface =====</span>
<a href="#l61.17"></a><span id="l61.17"> </span>
<a href="#l61.18"></a><span id="l61.18"> /*public virtual*/ void morkRowSpace::CloseMorkNode(</span>
<a href="#l61.19"></a><span id="l61.19">     morkEnv* ev)  // CloseRowSpace() only if open</span>
<a href="#l61.20"></a><span id="l61.20"> {</span>
<a href="#l61.21"></a><span id="l61.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l61.22"></a><span id="l61.22" class="difflineat">@@ -522,19 +522,19 @@ morkRow* morkRowSpace::NewRow(morkEnv* e</span>
<a href="#l61.23"></a><span id="l61.23">         }</span>
<a href="#l61.24"></a><span id="l61.24">       } else</span>
<a href="#l61.25"></a><span id="l61.25">         this-&gt;NilSpaceStoreError(ev);</span>
<a href="#l61.26"></a><span id="l61.26">     }</span>
<a href="#l61.27"></a><span id="l61.27">   }</span>
<a href="#l61.28"></a><span id="l61.28">   return outRow;</span>
<a href="#l61.29"></a><span id="l61.29"> }</span>
<a href="#l61.30"></a><span id="l61.30"> </span>
<a href="#l61.31"></a><span id="l61.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l61.32"></a><span id="l61.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l61.33"></a><span id="l61.33"> </span>
<a href="#l61.34"></a><span id="l61.34"> morkRowSpaceMap::~morkRowSpaceMap() {}</span>
<a href="#l61.35"></a><span id="l61.35"> </span>
<a href="#l61.36"></a><span id="l61.36"> morkRowSpaceMap::morkRowSpaceMap(morkEnv* ev, const morkUsage&amp; inUsage,</span>
<a href="#l61.37"></a><span id="l61.37">                                  nsIMdbHeap* ioHeap, nsIMdbHeap* ioSlotHeap)</span>
<a href="#l61.38"></a><span id="l61.38">     : morkNodeMap(ev, inUsage, ioHeap, ioSlotHeap) {</span>
<a href="#l61.39"></a><span id="l61.39">   if (ev-&gt;Good()) mNode_Derived = morkDerived_kRowSpaceMap;</span>
<a href="#l61.40"></a><span id="l61.40"> }</span>
<a href="#l61.41"></a><span id="l61.41"> </span>
<a href="#l61.42"></a><span id="l61.42" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l61.43"></a><span id="l61.43" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l62.1"></a><span id="l62.1" class="difflineminus">--- a/db/mork/src/morkRowSpace.h</span>
<a href="#l62.2"></a><span id="l62.2" class="difflineplus">+++ b/db/mork/src/morkRowSpace.h</span>
<a href="#l62.3"></a><span id="l62.3" class="difflineat">@@ -33,17 +33,17 @@</span>
<a href="#l62.4"></a><span id="l62.4"> #ifndef _MORKARRAY_</span>
<a href="#l62.5"></a><span id="l62.5"> #  include &quot;morkArray.h&quot;</span>
<a href="#l62.6"></a><span id="l62.6"> #endif</span>
<a href="#l62.7"></a><span id="l62.7"> </span>
<a href="#l62.8"></a><span id="l62.8"> #ifndef _MORKDEQUE_</span>
<a href="#l62.9"></a><span id="l62.9"> #  include &quot;morkDeque.h&quot;</span>
<a href="#l62.10"></a><span id="l62.10"> #endif</span>
<a href="#l62.11"></a><span id="l62.11"> </span>
<a href="#l62.12"></a><span id="l62.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l62.13"></a><span id="l62.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l62.14"></a><span id="l62.14"> </span>
<a href="#l62.15"></a><span id="l62.15"> #define morkDerived_kRowSpace /*i*/ 0x7253 /* ascii 'rS' */</span>
<a href="#l62.16"></a><span id="l62.16"> </span>
<a href="#l62.17"></a><span id="l62.17"> #define morkRowSpace_kStartRowMapSlotCount 11</span>
<a href="#l62.18"></a><span id="l62.18"> </span>
<a href="#l62.19"></a><span id="l62.19"> #define morkRowSpace_kMaxIndexCount 8   /* no more indexes than this */</span>
<a href="#l62.20"></a><span id="l62.20"> #define morkRowSpace_kPrimeCacheSize 17 /* should be prime number */</span>
<a href="#l62.21"></a><span id="l62.21"> </span>
<a href="#l62.22"></a><span id="l62.22" class="difflineat">@@ -168,17 +168,17 @@ class morkRowSpace : public morkSpace { </span>
<a href="#l62.23"></a><span id="l62.23">   }</span>
<a href="#l62.24"></a><span id="l62.24"> </span>
<a href="#l62.25"></a><span id="l62.25">   static void SlotStrongRowSpace(morkRowSpace* me, morkEnv* ev,</span>
<a href="#l62.26"></a><span id="l62.26">                                  morkRowSpace** ioSlot) {</span>
<a href="#l62.27"></a><span id="l62.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l62.28"></a><span id="l62.28">   }</span>
<a href="#l62.29"></a><span id="l62.29"> };</span>
<a href="#l62.30"></a><span id="l62.30"> </span>
<a href="#l62.31"></a><span id="l62.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l62.32"></a><span id="l62.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l62.33"></a><span id="l62.33"> </span>
<a href="#l62.34"></a><span id="l62.34"> #define morkDerived_kRowSpaceMap /*i*/ 0x725A /* ascii 'rZ' */</span>
<a href="#l62.35"></a><span id="l62.35"> </span>
<a href="#l62.36"></a><span id="l62.36"> /*| morkRowSpaceMap: maps mork_scope -&gt; morkRowSpace</span>
<a href="#l62.37"></a><span id="l62.37"> |*/</span>
<a href="#l62.38"></a><span id="l62.38"> class morkRowSpaceMap : public morkNodeMap {  // for mapping tokens to tables</span>
<a href="#l62.39"></a><span id="l62.39"> </span>
<a href="#l62.40"></a><span id="l62.40">  public:</span>
<a href="#l62.41"></a><span id="l62.41" class="difflineat">@@ -233,11 +233,11 @@ class morkRowSpaceMapIter : public morkM</span>
<a href="#l62.42"></a><span id="l62.42">   }</span>
<a href="#l62.43"></a><span id="l62.43"> </span>
<a href="#l62.44"></a><span id="l62.44">   mork_change* CutHereRowSpace(morkEnv* ev, mork_scope* outScope,</span>
<a href="#l62.45"></a><span id="l62.45">                                morkRowSpace** outRowSpace) {</span>
<a href="#l62.46"></a><span id="l62.46">     return this-&gt;CutHere(ev, outScope, outRowSpace);</span>
<a href="#l62.47"></a><span id="l62.47">   }</span>
<a href="#l62.48"></a><span id="l62.48"> };</span>
<a href="#l62.49"></a><span id="l62.49"> </span>
<a href="#l62.50"></a><span id="l62.50" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l62.51"></a><span id="l62.51" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l62.52"></a><span id="l62.52"> </span>
<a href="#l62.53"></a><span id="l62.53"> #endif /* _MORKROWSPACE_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l63.1"></a><span id="l63.1" class="difflineminus">--- a/db/mork/src/morkSearchRowCursor.cpp</span>
<a href="#l63.2"></a><span id="l63.2" class="difflineplus">+++ b/db/mork/src/morkSearchRowCursor.cpp</span>
<a href="#l63.3"></a><span id="l63.3" class="difflineat">@@ -38,17 +38,17 @@</span>
<a href="#l63.4"></a><span id="l63.4"> #ifndef _MORKTABLE_</span>
<a href="#l63.5"></a><span id="l63.5"> #  include &quot;morkTable.h&quot;</span>
<a href="#l63.6"></a><span id="l63.6"> #endif</span>
<a href="#l63.7"></a><span id="l63.7"> </span>
<a href="#l63.8"></a><span id="l63.8"> #ifndef _MORKROW_</span>
<a href="#l63.9"></a><span id="l63.9"> #  include &quot;morkRow.h&quot;</span>
<a href="#l63.10"></a><span id="l63.10"> #endif</span>
<a href="#l63.11"></a><span id="l63.11"> </span>
<a href="#l63.12"></a><span id="l63.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l63.13"></a><span id="l63.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l63.14"></a><span id="l63.14"> </span>
<a href="#l63.15"></a><span id="l63.15"> // ````` ````` ````` ````` `````</span>
<a href="#l63.16"></a><span id="l63.16"> // { ===== begin morkNode interface =====</span>
<a href="#l63.17"></a><span id="l63.17"> </span>
<a href="#l63.18"></a><span id="l63.18"> /*public virtual*/ void morkSearchRowCursor::CloseMorkNode(</span>
<a href="#l63.19"></a><span id="l63.19">     morkEnv* ev)  // CloseSearchRowCursor() only if open</span>
<a href="#l63.20"></a><span id="l63.20"> {</span>
<a href="#l63.21"></a><span id="l63.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l63.22"></a><span id="l63.22" class="difflineat">@@ -145,9 +145,9 @@ morkRow* morkSearchRowCursor::NextRow(mo</span>
<a href="#l63.23"></a><span id="l63.23">   if (table) {</span>
<a href="#l63.24"></a><span id="l63.24">   } else</span>
<a href="#l63.25"></a><span id="l63.25">     ev-&gt;NilPointerError();</span>
<a href="#l63.26"></a><span id="l63.26"> </span>
<a href="#l63.27"></a><span id="l63.27">   *outPos = pos;</span>
<a href="#l63.28"></a><span id="l63.28">   return outRow;</span>
<a href="#l63.29"></a><span id="l63.29"> }</span>
<a href="#l63.30"></a><span id="l63.30"> </span>
<a href="#l63.31"></a><span id="l63.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l63.32"></a><span id="l63.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l64.1"></a><span id="l64.1" class="difflineminus">--- a/db/mork/src/morkSearchRowCursor.h</span>
<a href="#l64.2"></a><span id="l64.2" class="difflineplus">+++ b/db/mork/src/morkSearchRowCursor.h</span>
<a href="#l64.3"></a><span id="l64.3" class="difflineat">@@ -17,17 +17,17 @@</span>
<a href="#l64.4"></a><span id="l64.4"> #ifndef _MORKTABLEROWCURSOR_</span>
<a href="#l64.5"></a><span id="l64.5"> #  include &quot;morkTableRowCursor.h&quot;</span>
<a href="#l64.6"></a><span id="l64.6"> #endif</span>
<a href="#l64.7"></a><span id="l64.7"> </span>
<a href="#l64.8"></a><span id="l64.8"> #ifndef _MORKMAP_</span>
<a href="#l64.9"></a><span id="l64.9"> #  include &quot;morkMap.h&quot;</span>
<a href="#l64.10"></a><span id="l64.10"> #endif</span>
<a href="#l64.11"></a><span id="l64.11"> </span>
<a href="#l64.12"></a><span id="l64.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l64.13"></a><span id="l64.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l64.14"></a><span id="l64.14"> </span>
<a href="#l64.15"></a><span id="l64.15"> class morkUniqRowCursor;</span>
<a href="#l64.16"></a><span id="l64.16"> class orkinTableRowCursor;</span>
<a href="#l64.17"></a><span id="l64.17"> // #define morkDerived_kSearchRowCursor  /*i*/ 0x7352 /* ascii 'sR' */</span>
<a href="#l64.18"></a><span id="l64.18"> </span>
<a href="#l64.19"></a><span id="l64.19"> class morkSearchRowCursor : public morkTableRowCursor {  // row iterator</span>
<a href="#l64.20"></a><span id="l64.20"> </span>
<a href="#l64.21"></a><span id="l64.21">   // public: // slots inherited from morkObject (meant to inform only)</span>
<a href="#l64.22"></a><span id="l64.22" class="difflineat">@@ -90,11 +90,11 @@ class morkSearchRowCursor : public morkT</span>
<a href="#l64.23"></a><span id="l64.23">   }</span>
<a href="#l64.24"></a><span id="l64.24"> </span>
<a href="#l64.25"></a><span id="l64.25">   static void SlotStrongSearchRowCursor(morkSearchRowCursor* me, morkEnv* ev,</span>
<a href="#l64.26"></a><span id="l64.26">                                         morkSearchRowCursor** ioSlot) {</span>
<a href="#l64.27"></a><span id="l64.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l64.28"></a><span id="l64.28">   }</span>
<a href="#l64.29"></a><span id="l64.29"> };</span>
<a href="#l64.30"></a><span id="l64.30"> </span>
<a href="#l64.31"></a><span id="l64.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l64.32"></a><span id="l64.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l64.33"></a><span id="l64.33"> </span>
<a href="#l64.34"></a><span id="l64.34"> #endif /* _MORKSEARCHROWCURSOR_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l65.1"></a><span id="l65.1" class="difflineminus">--- a/db/mork/src/morkSink.cpp</span>
<a href="#l65.2"></a><span id="l65.2" class="difflineplus">+++ b/db/mork/src/morkSink.cpp</span>
<a href="#l65.3"></a><span id="l65.3" class="difflineat">@@ -18,17 +18,17 @@</span>
<a href="#l65.4"></a><span id="l65.4"> #ifndef _MORKENV_</span>
<a href="#l65.5"></a><span id="l65.5"> #  include &quot;morkEnv.h&quot;</span>
<a href="#l65.6"></a><span id="l65.6"> #endif</span>
<a href="#l65.7"></a><span id="l65.7"> </span>
<a href="#l65.8"></a><span id="l65.8"> #ifndef _MORKBLOB_</span>
<a href="#l65.9"></a><span id="l65.9"> #  include &quot;morkBlob.h&quot;</span>
<a href="#l65.10"></a><span id="l65.10"> #endif</span>
<a href="#l65.11"></a><span id="l65.11"> </span>
<a href="#l65.12"></a><span id="l65.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l65.13"></a><span id="l65.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l65.14"></a><span id="l65.14"> </span>
<a href="#l65.15"></a><span id="l65.15"> /*virtual*/ morkSink::~morkSink() {</span>
<a href="#l65.16"></a><span id="l65.16">   mSink_At = 0;</span>
<a href="#l65.17"></a><span id="l65.17">   mSink_End = 0;</span>
<a href="#l65.18"></a><span id="l65.18"> }</span>
<a href="#l65.19"></a><span id="l65.19"> </span>
<a href="#l65.20"></a><span id="l65.20"> /*virtual*/ void morkSpool::FlushSink(</span>
<a href="#l65.21"></a><span id="l65.21">     morkEnv* ev)  // sync mSpool_Coil-&gt;mBuf_Fill</span>
<a href="#l65.22"></a><span id="l65.22" class="difflineat">@@ -239,9 +239,9 @@ mork_bool morkSpool::PutString(morkEnv* </span>
<a href="#l65.23"></a><span id="l65.23"> {</span>
<a href="#l65.24"></a><span id="l65.24">   if (inString) {</span>
<a href="#l65.25"></a><span id="l65.25">     mork_size size = strlen(inString);</span>
<a href="#l65.26"></a><span id="l65.26">     this-&gt;Write(ev, inString, size);</span>
<a href="#l65.27"></a><span id="l65.27">   }</span>
<a href="#l65.28"></a><span id="l65.28">   return ev-&gt;Good();</span>
<a href="#l65.29"></a><span id="l65.29"> }</span>
<a href="#l65.30"></a><span id="l65.30"> </span>
<a href="#l65.31"></a><span id="l65.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l65.32"></a><span id="l65.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l66.1"></a><span id="l66.1" class="difflineminus">--- a/db/mork/src/morkSink.h</span>
<a href="#l66.2"></a><span id="l66.2" class="difflineplus">+++ b/db/mork/src/morkSink.h</span>
<a href="#l66.3"></a><span id="l66.3" class="difflineat">@@ -9,17 +9,17 @@</span>
<a href="#l66.4"></a><span id="l66.4"> #ifndef _MORK_</span>
<a href="#l66.5"></a><span id="l66.5"> #  include &quot;mork.h&quot;</span>
<a href="#l66.6"></a><span id="l66.6"> #endif</span>
<a href="#l66.7"></a><span id="l66.7"> </span>
<a href="#l66.8"></a><span id="l66.8"> #ifndef _MORKBLOB_</span>
<a href="#l66.9"></a><span id="l66.9"> #  include &quot;morkBlob.h&quot;</span>
<a href="#l66.10"></a><span id="l66.10"> #endif</span>
<a href="#l66.11"></a><span id="l66.11"> </span>
<a href="#l66.12"></a><span id="l66.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l66.13"></a><span id="l66.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l66.14"></a><span id="l66.14"> </span>
<a href="#l66.15"></a><span id="l66.15"> /*| morkSink is intended to be a very cheap buffered i/o sink which</span>
<a href="#l66.16"></a><span id="l66.16"> **| writes to bufs and other strings a single byte at a time.  The</span>
<a href="#l66.17"></a><span id="l66.17"> **| basic idea is that writing a single byte has a very cheap average</span>
<a href="#l66.18"></a><span id="l66.18"> **| cost, because a polymophic function call need only occur when the</span>
<a href="#l66.19"></a><span id="l66.19"> **| space between At and End is exhausted.  The rest of the time a</span>
<a href="#l66.20"></a><span id="l66.20"> **| very cheap inline method will write a byte, and then bump a pointer.</span>
<a href="#l66.21"></a><span id="l66.21"> **|</span>
<a href="#l66.22"></a><span id="l66.22" class="difflineat">@@ -145,11 +145,11 @@ class morkSpool : public morkSink {  // </span>
<a href="#l66.23"></a><span id="l66.23">     return this-&gt;Write(ev, inBuffer.mBuf_Body, inBuffer.mBuf_Fill);</span>
<a href="#l66.24"></a><span id="l66.24">   }</span>
<a href="#l66.25"></a><span id="l66.25"> </span>
<a href="#l66.26"></a><span id="l66.26">   mork_bool PutString(morkEnv* ev, const char* inString);</span>
<a href="#l66.27"></a><span id="l66.27">   // call Write() with inBuf=inString and inSize=strlen(inString),</span>
<a href="#l66.28"></a><span id="l66.28">   // unless inString is null, in which case we then do nothing at all.</span>
<a href="#l66.29"></a><span id="l66.29"> };</span>
<a href="#l66.30"></a><span id="l66.30"> </span>
<a href="#l66.31"></a><span id="l66.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l66.32"></a><span id="l66.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l66.33"></a><span id="l66.33"> </span>
<a href="#l66.34"></a><span id="l66.34"> #endif /* _MORKSINK_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l67.1"></a><span id="l67.1" class="difflineminus">--- a/db/mork/src/morkSpace.cpp</span>
<a href="#l67.2"></a><span id="l67.2" class="difflineplus">+++ b/db/mork/src/morkSpace.cpp</span>
<a href="#l67.3"></a><span id="l67.3" class="difflineat">@@ -30,17 +30,17 @@</span>
<a href="#l67.4"></a><span id="l67.4"> #ifndef _MORKENV_</span>
<a href="#l67.5"></a><span id="l67.5"> #  include &quot;morkEnv.h&quot;</span>
<a href="#l67.6"></a><span id="l67.6"> #endif</span>
<a href="#l67.7"></a><span id="l67.7"> </span>
<a href="#l67.8"></a><span id="l67.8"> #ifndef _MORKSTORE_</span>
<a href="#l67.9"></a><span id="l67.9"> #  include &quot;morkStore.h&quot;</span>
<a href="#l67.10"></a><span id="l67.10"> #endif</span>
<a href="#l67.11"></a><span id="l67.11"> </span>
<a href="#l67.12"></a><span id="l67.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l67.13"></a><span id="l67.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l67.14"></a><span id="l67.14"> </span>
<a href="#l67.15"></a><span id="l67.15"> // ````` ````` ````` ````` `````</span>
<a href="#l67.16"></a><span id="l67.16"> // { ===== begin morkNode interface =====</span>
<a href="#l67.17"></a><span id="l67.17"> </span>
<a href="#l67.18"></a><span id="l67.18"> /*public virtual*/ void morkSpace::CloseMorkNode(</span>
<a href="#l67.19"></a><span id="l67.19">     morkEnv* ev)  // CloseSpace() only if open</span>
<a href="#l67.20"></a><span id="l67.20"> {</span>
<a href="#l67.21"></a><span id="l67.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l67.22"></a><span id="l67.22" class="difflineat">@@ -128,9 +128,9 @@ mork_bool morkSpace::MaybeDirtyStoreAndS</span>
<a href="#l67.23"></a><span id="l67.23">   if (mSpace_CanDirty) {</span>
<a href="#l67.24"></a><span id="l67.24">     this-&gt;SetSpaceDirty();</span>
<a href="#l67.25"></a><span id="l67.25">     return morkBool_kTrue;</span>
<a href="#l67.26"></a><span id="l67.26">   }</span>
<a href="#l67.27"></a><span id="l67.27"> </span>
<a href="#l67.28"></a><span id="l67.28">   return morkBool_kFalse;</span>
<a href="#l67.29"></a><span id="l67.29"> }</span>
<a href="#l67.30"></a><span id="l67.30"> </span>
<a href="#l67.31"></a><span id="l67.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l67.32"></a><span id="l67.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l68.1"></a><span id="l68.1" class="difflineminus">--- a/db/mork/src/morkSpace.h</span>
<a href="#l68.2"></a><span id="l68.2" class="difflineplus">+++ b/db/mork/src/morkSpace.h</span>
<a href="#l68.3"></a><span id="l68.3" class="difflineat">@@ -17,17 +17,17 @@</span>
<a href="#l68.4"></a><span id="l68.4"> #ifndef _MORKBEAD_</span>
<a href="#l68.5"></a><span id="l68.5"> #  include &quot;morkBead.h&quot;</span>
<a href="#l68.6"></a><span id="l68.6"> #endif</span>
<a href="#l68.7"></a><span id="l68.7"> </span>
<a href="#l68.8"></a><span id="l68.8"> #ifndef _MORKMAP_</span>
<a href="#l68.9"></a><span id="l68.9"> #  include &quot;morkMap.h&quot;</span>
<a href="#l68.10"></a><span id="l68.10"> #endif</span>
<a href="#l68.11"></a><span id="l68.11"> </span>
<a href="#l68.12"></a><span id="l68.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l68.13"></a><span id="l68.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l68.14"></a><span id="l68.14"> </span>
<a href="#l68.15"></a><span id="l68.15"> #define morkSpace_kInitialSpaceSlots /*i*/ 1024 /* default */</span>
<a href="#l68.16"></a><span id="l68.16"> #define morkDerived_kSpace /*i*/ 0x5370         /* ascii 'Sp' */</span>
<a href="#l68.17"></a><span id="l68.17"> </span>
<a href="#l68.18"></a><span id="l68.18"> /*| morkSpace:</span>
<a href="#l68.19"></a><span id="l68.19"> |*/</span>
<a href="#l68.20"></a><span id="l68.20"> class morkSpace : public morkBead {  //</span>
<a href="#l68.21"></a><span id="l68.21"> </span>
<a href="#l68.22"></a><span id="l68.22" class="difflineat">@@ -98,11 +98,11 @@ class morkSpace : public morkBead {  //</span>
<a href="#l68.23"></a><span id="l68.23">     morkNode::SlotWeakNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l68.24"></a><span id="l68.24">   }</span>
<a href="#l68.25"></a><span id="l68.25"> </span>
<a href="#l68.26"></a><span id="l68.26">   static void SlotStrongSpace(morkSpace* me, morkEnv* ev, morkSpace** ioSlot) {</span>
<a href="#l68.27"></a><span id="l68.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l68.28"></a><span id="l68.28">   }</span>
<a href="#l68.29"></a><span id="l68.29"> };</span>
<a href="#l68.30"></a><span id="l68.30"> </span>
<a href="#l68.31"></a><span id="l68.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l68.32"></a><span id="l68.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l68.33"></a><span id="l68.33"> </span>
<a href="#l68.34"></a><span id="l68.34"> #endif /* _MORKSPACE_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l69.1"></a><span id="l69.1" class="difflineminus">--- a/db/mork/src/morkStore.cpp</span>
<a href="#l69.2"></a><span id="l69.2" class="difflineplus">+++ b/db/mork/src/morkStore.cpp</span>
<a href="#l69.3"></a><span id="l69.3" class="difflineat">@@ -83,24 +83,24 @@</span>
<a href="#l69.4"></a><span id="l69.4"> #endif</span>
<a href="#l69.5"></a><span id="l69.5"> </span>
<a href="#l69.6"></a><span id="l69.6"> #ifndef _MORKPARSER_</span>
<a href="#l69.7"></a><span id="l69.7"> #  include &quot;morkParser.h&quot;</span>
<a href="#l69.8"></a><span id="l69.8"> #endif</span>
<a href="#l69.9"></a><span id="l69.9"> </span>
<a href="#l69.10"></a><span id="l69.10"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l69.11"></a><span id="l69.11"> </span>
<a href="#l69.12"></a><span id="l69.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l69.13"></a><span id="l69.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l69.14"></a><span id="l69.14"> </span>
<a href="#l69.15"></a><span id="l69.15"> // ````` ````` ````` ````` `````</span>
<a href="#l69.16"></a><span id="l69.16"> // { ===== begin morkNode interface =====</span>
<a href="#l69.17"></a><span id="l69.17"> </span>
<a href="#l69.18"></a><span id="l69.18" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l69.19"></a><span id="l69.19" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l69.20"></a><span id="l69.20"> </span>
<a href="#l69.21"></a><span id="l69.21" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l69.22"></a><span id="l69.22" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l69.23"></a><span id="l69.23"> </span>
<a href="#l69.24"></a><span id="l69.24"> // ````` ````` ````` ````` `````</span>
<a href="#l69.25"></a><span id="l69.25"> // { ===== begin morkNode interface =====</span>
<a href="#l69.26"></a><span id="l69.26"> </span>
<a href="#l69.27"></a><span id="l69.27"> /*public virtual*/ void morkStore::CloseMorkNode(</span>
<a href="#l69.28"></a><span id="l69.28">     morkEnv* ev)  // ClosePort() only if open</span>
<a href="#l69.29"></a><span id="l69.29"> {</span>
<a href="#l69.30"></a><span id="l69.30">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l69.31"></a><span id="l69.31" class="difflineat">@@ -1973,9 +1973,9 @@ morkStore::CompressCommit(   // commit a</span>
<a href="#l69.32"></a><span id="l69.32">   if (acqThumb) *acqThumb = outThumb;</span>
<a href="#l69.33"></a><span id="l69.33">   return outErr;</span>
<a href="#l69.34"></a><span id="l69.34"> }</span>
<a href="#l69.35"></a><span id="l69.35"> </span>
<a href="#l69.36"></a><span id="l69.36"> // } ----- end commit methods -----</span>
<a href="#l69.37"></a><span id="l69.37"> </span>
<a href="#l69.38"></a><span id="l69.38"> // } ===== end nsIMdbStore methods =====</span>
<a href="#l69.39"></a><span id="l69.39"> </span>
<a href="#l69.40"></a><span id="l69.40" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l69.41"></a><span id="l69.41" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l70.1"></a><span id="l70.1" class="difflineminus">--- a/db/mork/src/morkStore.h</span>
<a href="#l70.2"></a><span id="l70.2" class="difflineplus">+++ b/db/mork/src/morkStore.h</span>
<a href="#l70.3"></a><span id="l70.3" class="difflineat">@@ -33,17 +33,17 @@</span>
<a href="#l70.4"></a><span id="l70.4"> #ifndef _MORKROWSPACE_</span>
<a href="#l70.5"></a><span id="l70.5"> #  include &quot;morkRowSpace.h&quot;</span>
<a href="#l70.6"></a><span id="l70.6"> #endif</span>
<a href="#l70.7"></a><span id="l70.7"> </span>
<a href="#l70.8"></a><span id="l70.8"> #ifndef _MORKATOMSPACE_</span>
<a href="#l70.9"></a><span id="l70.9"> #  include &quot;morkAtomSpace.h&quot;</span>
<a href="#l70.10"></a><span id="l70.10"> #endif</span>
<a href="#l70.11"></a><span id="l70.11"> </span>
<a href="#l70.12"></a><span id="l70.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l70.13"></a><span id="l70.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l70.14"></a><span id="l70.14"> </span>
<a href="#l70.15"></a><span id="l70.15"> #define morkDerived_kPort /*i*/ 0x7054 /* ascii 'pT' */</span>
<a href="#l70.16"></a><span id="l70.16"> </span>
<a href="#l70.17"></a><span id="l70.17"> #define morkDerived_kStore /*i*/ 0x7354 /* ascii 'sT' */</span>
<a href="#l70.18"></a><span id="l70.18"> </span>
<a href="#l70.19"></a><span id="l70.19"> /*| kGroundColumnSpace: we use the 'column space' as the default scope</span>
<a href="#l70.20"></a><span id="l70.20"> **| for grounding column name IDs, and this is also the default scope for</span>
<a href="#l70.21"></a><span id="l70.21"> **| all other explicitly tokenized strings.</span>
<a href="#l70.22"></a><span id="l70.22" class="difflineat">@@ -760,11 +760,11 @@ class morkStore : public morkObject, pub</span>
<a href="#l70.23"></a><span id="l70.23">         *ioSlot = 0;</span>
<a href="#l70.24"></a><span id="l70.24">         store-&gt;Release();</span>
<a href="#l70.25"></a><span id="l70.25">       }</span>
<a href="#l70.26"></a><span id="l70.26">       if (me &amp;&amp; me-&gt;AddRef()) *ioSlot = me;</span>
<a href="#l70.27"></a><span id="l70.27">     }</span>
<a href="#l70.28"></a><span id="l70.28">   }</span>
<a href="#l70.29"></a><span id="l70.29"> };</span>
<a href="#l70.30"></a><span id="l70.30"> </span>
<a href="#l70.31"></a><span id="l70.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l70.32"></a><span id="l70.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l70.33"></a><span id="l70.33"> </span>
<a href="#l70.34"></a><span id="l70.34"> #endif /* _MORKSTORE_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l71.1"></a><span id="l71.1" class="difflineminus">--- a/db/mork/src/morkStream.cpp</span>
<a href="#l71.2"></a><span id="l71.2" class="difflineplus">+++ b/db/mork/src/morkStream.cpp</span>
<a href="#l71.3"></a><span id="l71.3" class="difflineat">@@ -22,17 +22,17 @@</span>
<a href="#l71.4"></a><span id="l71.4"> #ifndef _MORKENV_</span>
<a href="#l71.5"></a><span id="l71.5"> #  include &quot;morkEnv.h&quot;</span>
<a href="#l71.6"></a><span id="l71.6"> #endif</span>
<a href="#l71.7"></a><span id="l71.7"> </span>
<a href="#l71.8"></a><span id="l71.8"> #ifndef _MORKSTREAM_</span>
<a href="#l71.9"></a><span id="l71.9"> #  include &quot;morkStream.h&quot;</span>
<a href="#l71.10"></a><span id="l71.10"> #endif</span>
<a href="#l71.11"></a><span id="l71.11"> </span>
<a href="#l71.12"></a><span id="l71.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l71.13"></a><span id="l71.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l71.14"></a><span id="l71.14"> </span>
<a href="#l71.15"></a><span id="l71.15"> // ````` ````` ````` ````` `````</span>
<a href="#l71.16"></a><span id="l71.16"> // { ===== begin morkNode interface =====</span>
<a href="#l71.17"></a><span id="l71.17"> </span>
<a href="#l71.18"></a><span id="l71.18"> /*public virtual*/ void morkStream::CloseMorkNode(</span>
<a href="#l71.19"></a><span id="l71.19">     morkEnv* ev)  // CloseStream() only if open</span>
<a href="#l71.20"></a><span id="l71.20"> {</span>
<a href="#l71.21"></a><span id="l71.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l71.22"></a><span id="l71.22" class="difflineat">@@ -782,9 +782,9 @@ void morkStream::spill_buf(morkEnv* ev) </span>
<a href="#l71.23"></a><span id="l71.23"> #ifdef MORK_DEBUG</span>
<a href="#l71.24"></a><span id="l71.24">       ev-&gt;NewWarning(&quot;stream:spill:not:dirty&quot;);</span>
<a href="#l71.25"></a><span id="l71.25"> #endif /*MORK_DEBUG*/</span>
<a href="#l71.26"></a><span id="l71.26">     }</span>
<a href="#l71.27"></a><span id="l71.27">   } else</span>
<a href="#l71.28"></a><span id="l71.28">     this-&gt;NewFileDownError(ev);</span>
<a href="#l71.29"></a><span id="l71.29"> }</span>
<a href="#l71.30"></a><span id="l71.30"> </span>
<a href="#l71.31"></a><span id="l71.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l71.32"></a><span id="l71.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l72.1"></a><span id="l72.1" class="difflineminus">--- a/db/mork/src/morkStream.h</span>
<a href="#l72.2"></a><span id="l72.2" class="difflineplus">+++ b/db/mork/src/morkStream.h</span>
<a href="#l72.3"></a><span id="l72.3" class="difflineat">@@ -45,17 +45,17 @@</span>
<a href="#l72.4"></a><span id="l72.4"> #ifndef _MORKNODE_</span>
<a href="#l72.5"></a><span id="l72.5"> #  include &quot;morkNode.h&quot;</span>
<a href="#l72.6"></a><span id="l72.6"> #endif</span>
<a href="#l72.7"></a><span id="l72.7"> </span>
<a href="#l72.8"></a><span id="l72.8"> #ifndef _MORKFILE_</span>
<a href="#l72.9"></a><span id="l72.9"> #  include &quot;morkFile.h&quot;</span>
<a href="#l72.10"></a><span id="l72.10"> #endif</span>
<a href="#l72.11"></a><span id="l72.11"> </span>
<a href="#l72.12"></a><span id="l72.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l72.13"></a><span id="l72.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l72.14"></a><span id="l72.14"> </span>
<a href="#l72.15"></a><span id="l72.15"> /*=============================================================================</span>
<a href="#l72.16"></a><span id="l72.16">  * morkStream: buffered file i/o</span>
<a href="#l72.17"></a><span id="l72.17">  */</span>
<a href="#l72.18"></a><span id="l72.18"> </span>
<a href="#l72.19"></a><span id="l72.19"> /*| morkStream exists to define an morkFile subclass that provides buffered</span>
<a href="#l72.20"></a><span id="l72.20"> **| i/o for an underlying content file.  Naturally this arrangement only makes</span>
<a href="#l72.21"></a><span id="l72.21"> **| sense when the underlying content file is itself not efficiently buffered</span>
<a href="#l72.22"></a><span id="l72.22" class="difflineat">@@ -248,11 +248,11 @@ class morkStream /*d*/ : public morkFile</span>
<a href="#l72.23"></a><span id="l72.23">   }</span>
<a href="#l72.24"></a><span id="l72.24"> </span>
<a href="#l72.25"></a><span id="l72.25">   static void SlotStrongStream(morkStream* me, morkEnv* ev,</span>
<a href="#l72.26"></a><span id="l72.26">                                morkStream** ioSlot) {</span>
<a href="#l72.27"></a><span id="l72.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l72.28"></a><span id="l72.28">   }</span>
<a href="#l72.29"></a><span id="l72.29"> };</span>
<a href="#l72.30"></a><span id="l72.30"> </span>
<a href="#l72.31"></a><span id="l72.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l72.32"></a><span id="l72.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l72.33"></a><span id="l72.33"> </span>
<a href="#l72.34"></a><span id="l72.34"> #endif /* _MORKSTREAM_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l73.1"></a><span id="l73.1" class="difflineminus">--- a/db/mork/src/morkTable.cpp</span>
<a href="#l73.2"></a><span id="l73.2" class="difflineplus">+++ b/db/mork/src/morkTable.cpp</span>
<a href="#l73.3"></a><span id="l73.3" class="difflineat">@@ -46,17 +46,17 @@</span>
<a href="#l73.4"></a><span id="l73.4"> #ifndef _MORKTABLEROWCURSOR_</span>
<a href="#l73.5"></a><span id="l73.5"> #  include &quot;morkTableRowCursor.h&quot;</span>
<a href="#l73.6"></a><span id="l73.6"> #endif</span>
<a href="#l73.7"></a><span id="l73.7"> </span>
<a href="#l73.8"></a><span id="l73.8"> #ifndef _MORKROWOBJECT_</span>
<a href="#l73.9"></a><span id="l73.9"> #  include &quot;morkRowObject.h&quot;</span>
<a href="#l73.10"></a><span id="l73.10"> #endif</span>
<a href="#l73.11"></a><span id="l73.11"> </span>
<a href="#l73.12"></a><span id="l73.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l73.13"></a><span id="l73.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l73.14"></a><span id="l73.14"> </span>
<a href="#l73.15"></a><span id="l73.15"> // ````` ````` ````` ````` `````</span>
<a href="#l73.16"></a><span id="l73.16"> // { ===== begin morkNode interface =====</span>
<a href="#l73.17"></a><span id="l73.17"> </span>
<a href="#l73.18"></a><span id="l73.18"> /*public virtual*/ void morkTable::CloseMorkNode(</span>
<a href="#l73.19"></a><span id="l73.19">     morkEnv* ev) /*i*/  // CloseTable() only if open</span>
<a href="#l73.20"></a><span id="l73.20"> {</span>
<a href="#l73.21"></a><span id="l73.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l73.22"></a><span id="l73.22" class="difflineat">@@ -1346,17 +1346,17 @@ morkTableRowCursor* morkTable::NewTableR</span>
<a href="#l73.23"></a><span id="l73.23">         outCursor = cursor;</span>
<a href="#l73.24"></a><span id="l73.24">       else</span>
<a href="#l73.25"></a><span id="l73.25">         cursor-&gt;CutStrongRef((nsIMdbEnv*)ev);</span>
<a href="#l73.26"></a><span id="l73.26">     }</span>
<a href="#l73.27"></a><span id="l73.27">   }</span>
<a href="#l73.28"></a><span id="l73.28">   return outCursor;</span>
<a href="#l73.29"></a><span id="l73.29"> }</span>
<a href="#l73.30"></a><span id="l73.30"> </span>
<a href="#l73.31"></a><span id="l73.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l73.32"></a><span id="l73.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l73.33"></a><span id="l73.33"> </span>
<a href="#l73.34"></a><span id="l73.34"> morkTableChange::morkTableChange(morkEnv* ev, mork_change inChange,</span>
<a href="#l73.35"></a><span id="l73.35">                                  morkRow* ioRow)</span>
<a href="#l73.36"></a><span id="l73.36">     // use this constructor for inChange == morkChange_kAdd or morkChange_kCut</span>
<a href="#l73.37"></a><span id="l73.37">     : morkNext(),</span>
<a href="#l73.38"></a><span id="l73.38">       mTableChange_Row(ioRow),</span>
<a href="#l73.39"></a><span id="l73.39">       mTableChange_Pos(morkTableChange_kNone) {</span>
<a href="#l73.40"></a><span id="l73.40">   if (ioRow) {</span>
<a href="#l73.41"></a><span id="l73.41" class="difflineat">@@ -1392,24 +1392,24 @@ void morkTableChange::UnknownChangeError</span>
<a href="#l73.42"></a><span id="l73.42"> }</span>
<a href="#l73.43"></a><span id="l73.43"> </span>
<a href="#l73.44"></a><span id="l73.44"> void morkTableChange::NegativeMovePosError(morkEnv* ev) const</span>
<a href="#l73.45"></a><span id="l73.45"> // move must be non-neg position</span>
<a href="#l73.46"></a><span id="l73.46"> {</span>
<a href="#l73.47"></a><span id="l73.47">   ev-&gt;NewError(&quot;negative mTableChange_Pos for row move&quot;);</span>
<a href="#l73.48"></a><span id="l73.48"> }</span>
<a href="#l73.49"></a><span id="l73.49"> </span>
<a href="#l73.50"></a><span id="l73.50" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l73.51"></a><span id="l73.51" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l73.52"></a><span id="l73.52"> </span>
<a href="#l73.53"></a><span id="l73.53"> morkTableMap::~morkTableMap() {}</span>
<a href="#l73.54"></a><span id="l73.54"> </span>
<a href="#l73.55"></a><span id="l73.55"> morkTableMap::morkTableMap(morkEnv* ev, const morkUsage&amp; inUsage,</span>
<a href="#l73.56"></a><span id="l73.56">                            nsIMdbHeap* ioHeap, nsIMdbHeap* ioSlotHeap)</span>
<a href="#l73.57"></a><span id="l73.57"> #ifdef MORK_BEAD_OVER_NODE_MAPS</span>
<a href="#l73.58"></a><span id="l73.58">     : morkBeadMap(ev, inUsage, ioHeap, ioSlotHeap)</span>
<a href="#l73.59"></a><span id="l73.59"> #else  /*MORK_BEAD_OVER_NODE_MAPS*/</span>
<a href="#l73.60"></a><span id="l73.60">     : morkNodeMap(ev, inUsage, ioHeap, ioSlotHeap)</span>
<a href="#l73.61"></a><span id="l73.61"> #endif /*MORK_BEAD_OVER_NODE_MAPS*/</span>
<a href="#l73.62"></a><span id="l73.62"> {</span>
<a href="#l73.63"></a><span id="l73.63">   if (ev-&gt;Good()) mNode_Derived = morkDerived_kTableMap;</span>
<a href="#l73.64"></a><span id="l73.64"> }</span>
<a href="#l73.65"></a><span id="l73.65"> </span>
<a href="#l73.66"></a><span id="l73.66" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l73.67"></a><span id="l73.67" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l74.1"></a><span id="l74.1" class="difflineminus">--- a/db/mork/src/morkTable.h</span>
<a href="#l74.2"></a><span id="l74.2" class="difflineplus">+++ b/db/mork/src/morkTable.h</span>
<a href="#l74.3"></a><span id="l74.3" class="difflineat">@@ -37,17 +37,17 @@</span>
<a href="#l74.4"></a><span id="l74.4"> #ifndef _MORKPROBEMAP_</span>
<a href="#l74.5"></a><span id="l74.5"> #  include &quot;morkProbeMap.h&quot;</span>
<a href="#l74.6"></a><span id="l74.6"> #endif</span>
<a href="#l74.7"></a><span id="l74.7"> </span>
<a href="#l74.8"></a><span id="l74.8"> #ifndef _MORKBEAD_</span>
<a href="#l74.9"></a><span id="l74.9"> #  include &quot;morkBead.h&quot;</span>
<a href="#l74.10"></a><span id="l74.10"> #endif</span>
<a href="#l74.11"></a><span id="l74.11"> </span>
<a href="#l74.12"></a><span id="l74.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l74.13"></a><span id="l74.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l74.14"></a><span id="l74.14"> </span>
<a href="#l74.15"></a><span id="l74.15"> class nsIMdbTable;</span>
<a href="#l74.16"></a><span id="l74.16"> #define morkDerived_kTable /*i*/ 0x5462 /* ascii 'Tb' */</span>
<a href="#l74.17"></a><span id="l74.17"> </span>
<a href="#l74.18"></a><span id="l74.18"> /*| kStartRowArraySize: starting physical size of array for mTable_RowArray.</span>
<a href="#l74.19"></a><span id="l74.19"> **| We want this number very small, so that a table containing exactly one</span>
<a href="#l74.20"></a><span id="l74.20"> **| row member will not pay too significantly in space overhead.  But we want</span>
<a href="#l74.21"></a><span id="l74.21"> **| a number bigger than one, so there is some space for growth.</span>
<a href="#l74.22"></a><span id="l74.22" class="difflineat">@@ -582,17 +582,17 @@ class morkTable : public morkObject, pub</span>
<a href="#l74.23"></a><span id="l74.23">     morkNode::SlotWeakNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l74.24"></a><span id="l74.24">   }</span>
<a href="#l74.25"></a><span id="l74.25"> </span>
<a href="#l74.26"></a><span id="l74.26">   static void SlotStrongTable(morkTable* me, morkEnv* ev, morkTable** ioSlot) {</span>
<a href="#l74.27"></a><span id="l74.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l74.28"></a><span id="l74.28">   }</span>
<a href="#l74.29"></a><span id="l74.29"> };</span>
<a href="#l74.30"></a><span id="l74.30"> </span>
<a href="#l74.31"></a><span id="l74.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l74.32"></a><span id="l74.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l74.33"></a><span id="l74.33"> </span>
<a href="#l74.34"></a><span id="l74.34"> // use negative values for kCut and kAdd, to keep non-neg move pos distinct:</span>
<a href="#l74.35"></a><span id="l74.35"> #define morkTableChange_kCut ((mork_pos)-1)  /* shows row was cut */</span>
<a href="#l74.36"></a><span id="l74.36"> #define morkTableChange_kAdd ((mork_pos)-2)  /* shows row was added */</span>
<a href="#l74.37"></a><span id="l74.37"> #define morkTableChange_kNone ((mork_pos)-3) /* unknown change */</span>
<a href="#l74.38"></a><span id="l74.38"> </span>
<a href="#l74.39"></a><span id="l74.39"> class morkTableChange : public morkNext {</span>
<a href="#l74.40"></a><span id="l74.40">  public:  // state is public because the entire Mork system is private</span>
<a href="#l74.41"></a><span id="l74.41" class="difflineat">@@ -624,17 +624,17 @@ class morkTableChange : public morkNext </span>
<a href="#l74.42"></a><span id="l74.42"> </span>
<a href="#l74.43"></a><span id="l74.43">   mork_bool IsMoveRowTableChange() const { return (mTableChange_Pos &gt;= 0); }</span>
<a href="#l74.44"></a><span id="l74.44"> </span>
<a href="#l74.45"></a><span id="l74.45">  public:</span>
<a href="#l74.46"></a><span id="l74.46">   mork_pos GetMovePos() const { return mTableChange_Pos; }</span>
<a href="#l74.47"></a><span id="l74.47">   // GetMovePos() assumes that IsMoveRowTableChange() is true.</span>
<a href="#l74.48"></a><span id="l74.48"> };</span>
<a href="#l74.49"></a><span id="l74.49"> </span>
<a href="#l74.50"></a><span id="l74.50" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l74.51"></a><span id="l74.51" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l74.52"></a><span id="l74.52"> </span>
<a href="#l74.53"></a><span id="l74.53"> #define morkDerived_kTableMap /*i*/ 0x744D /* ascii 'tM' */</span>
<a href="#l74.54"></a><span id="l74.54"> </span>
<a href="#l74.55"></a><span id="l74.55"> /*| morkTableMap: maps mork_token -&gt; morkTable</span>
<a href="#l74.56"></a><span id="l74.56"> |*/</span>
<a href="#l74.57"></a><span id="l74.57"> #ifdef MORK_BEAD_OVER_NODE_MAPS</span>
<a href="#l74.58"></a><span id="l74.58"> class morkTableMap : public morkBeadMap {</span>
<a href="#l74.59"></a><span id="l74.59"> #else  /*MORK_BEAD_OVER_NODE_MAPS*/</span>
<a href="#l74.60"></a><span id="l74.60" class="difflineat">@@ -732,11 +732,11 @@ class morkTableMapIter : public morkMapI</span>
<a href="#l74.61"></a><span id="l74.61">   // cutting while iterating hash map might dirty the parent table:</span>
<a href="#l74.62"></a><span id="l74.62">   mork_change* CutHereTable(morkEnv* ev, mork_tid* outTid,</span>
<a href="#l74.63"></a><span id="l74.63">                             morkTable** outTable) {</span>
<a href="#l74.64"></a><span id="l74.64">     return this-&gt;CutHere(ev, outTid, outTable);</span>
<a href="#l74.65"></a><span id="l74.65">   }</span>
<a href="#l74.66"></a><span id="l74.66"> #endif /*MORK_BEAD_OVER_NODE_MAPS*/</span>
<a href="#l74.67"></a><span id="l74.67"> };</span>
<a href="#l74.68"></a><span id="l74.68"> </span>
<a href="#l74.69"></a><span id="l74.69" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l74.70"></a><span id="l74.70" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l74.71"></a><span id="l74.71"> </span>
<a href="#l74.72"></a><span id="l74.72"> #endif /* _MORKTABLE_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l75.1"></a><span id="l75.1" class="difflineminus">--- a/db/mork/src/morkTableRowCursor.cpp</span>
<a href="#l75.2"></a><span id="l75.2" class="difflineplus">+++ b/db/mork/src/morkTableRowCursor.cpp</span>
<a href="#l75.3"></a><span id="l75.3" class="difflineat">@@ -34,17 +34,17 @@</span>
<a href="#l75.4"></a><span id="l75.4"> #ifndef _MORKTABLE_</span>
<a href="#l75.5"></a><span id="l75.5"> #  include &quot;morkTable.h&quot;</span>
<a href="#l75.6"></a><span id="l75.6"> #endif</span>
<a href="#l75.7"></a><span id="l75.7"> </span>
<a href="#l75.8"></a><span id="l75.8"> #ifndef _MORKROW_</span>
<a href="#l75.9"></a><span id="l75.9"> #  include &quot;morkRow.h&quot;</span>
<a href="#l75.10"></a><span id="l75.10"> #endif</span>
<a href="#l75.11"></a><span id="l75.11"> </span>
<a href="#l75.12"></a><span id="l75.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l75.13"></a><span id="l75.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l75.14"></a><span id="l75.14"> </span>
<a href="#l75.15"></a><span id="l75.15"> // ````` ````` ````` ````` `````</span>
<a href="#l75.16"></a><span id="l75.16"> // { ===== begin morkNode interface =====</span>
<a href="#l75.17"></a><span id="l75.17"> </span>
<a href="#l75.18"></a><span id="l75.18"> /*public virtual*/ void morkTableRowCursor::CloseMorkNode(</span>
<a href="#l75.19"></a><span id="l75.19">     morkEnv* ev)  // CloseTableRowCursor() only if open</span>
<a href="#l75.20"></a><span id="l75.20"> {</span>
<a href="#l75.21"></a><span id="l75.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l75.22"></a><span id="l75.22" class="difflineat">@@ -402,9 +402,9 @@ morkRow* morkTableRowCursor::NextRow(mor</span>
<a href="#l75.23"></a><span id="l75.23">       table-&gt;NonOpenNodeError(ev);</span>
<a href="#l75.24"></a><span id="l75.24">   } else</span>
<a href="#l75.25"></a><span id="l75.25">     ev-&gt;NilPointerError();</span>
<a href="#l75.26"></a><span id="l75.26"> </span>
<a href="#l75.27"></a><span id="l75.27">   *outPos = pos;</span>
<a href="#l75.28"></a><span id="l75.28">   return outRow;</span>
<a href="#l75.29"></a><span id="l75.29"> }</span>
<a href="#l75.30"></a><span id="l75.30"> </span>
<a href="#l75.31"></a><span id="l75.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l75.32"></a><span id="l75.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l76.1"></a><span id="l76.1" class="difflineminus">--- a/db/mork/src/morkTableRowCursor.h</span>
<a href="#l76.2"></a><span id="l76.2" class="difflineplus">+++ b/db/mork/src/morkTableRowCursor.h</span>
<a href="#l76.3"></a><span id="l76.3" class="difflineat">@@ -13,17 +13,17 @@</span>
<a href="#l76.4"></a><span id="l76.4"> #ifndef _MORKCURSOR_</span>
<a href="#l76.5"></a><span id="l76.5"> #  include &quot;morkCursor.h&quot;</span>
<a href="#l76.6"></a><span id="l76.6"> #endif</span>
<a href="#l76.7"></a><span id="l76.7"> </span>
<a href="#l76.8"></a><span id="l76.8"> #ifndef _MORKMAP_</span>
<a href="#l76.9"></a><span id="l76.9"> #  include &quot;morkMap.h&quot;</span>
<a href="#l76.10"></a><span id="l76.10"> #endif</span>
<a href="#l76.11"></a><span id="l76.11"> </span>
<a href="#l76.12"></a><span id="l76.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l76.13"></a><span id="l76.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l76.14"></a><span id="l76.14"> </span>
<a href="#l76.15"></a><span id="l76.15"> class orkinTableRowCursor;</span>
<a href="#l76.16"></a><span id="l76.16"> #define morkDerived_kTableRowCursor /*i*/ 0x7243 /* ascii 'rC' */</span>
<a href="#l76.17"></a><span id="l76.17"> </span>
<a href="#l76.18"></a><span id="l76.18"> class morkTableRowCursor : public morkCursor,</span>
<a href="#l76.19"></a><span id="l76.19">                            public nsIMdbTableRowCursor {  // row iterator</span>
<a href="#l76.20"></a><span id="l76.20"> </span>
<a href="#l76.21"></a><span id="l76.21">   // public: // slots inherited from morkObject (meant to inform only)</span>
<a href="#l76.22"></a><span id="l76.22" class="difflineat">@@ -140,11 +140,11 @@ class morkTableRowCursor : public morkCu</span>
<a href="#l76.23"></a><span id="l76.23">   }</span>
<a href="#l76.24"></a><span id="l76.24"> </span>
<a href="#l76.25"></a><span id="l76.25">   static void SlotStrongTableRowCursor(morkTableRowCursor* me, morkEnv* ev,</span>
<a href="#l76.26"></a><span id="l76.26">                                        morkTableRowCursor** ioSlot) {</span>
<a href="#l76.27"></a><span id="l76.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l76.28"></a><span id="l76.28">   }</span>
<a href="#l76.29"></a><span id="l76.29"> };</span>
<a href="#l76.30"></a><span id="l76.30"> </span>
<a href="#l76.31"></a><span id="l76.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l76.32"></a><span id="l76.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l76.33"></a><span id="l76.33"> </span>
<a href="#l76.34"></a><span id="l76.34"> #endif /* _MORKTABLEROWCURSOR_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l77.1"></a><span id="l77.1" class="difflineminus">--- a/db/mork/src/morkThumb.cpp</span>
<a href="#l77.2"></a><span id="l77.2" class="difflineplus">+++ b/db/mork/src/morkThumb.cpp</span>
<a href="#l77.3"></a><span id="l77.3" class="difflineat">@@ -38,17 +38,17 @@</span>
<a href="#l77.4"></a><span id="l77.4"> #ifndef _MORKPARSER_</span>
<a href="#l77.5"></a><span id="l77.5"> #  include &quot;morkParser.h&quot;</span>
<a href="#l77.6"></a><span id="l77.6"> #endif</span>
<a href="#l77.7"></a><span id="l77.7"> </span>
<a href="#l77.8"></a><span id="l77.8"> #ifndef _MORKBUILDER_</span>
<a href="#l77.9"></a><span id="l77.9"> #  include &quot;morkBuilder.h&quot;</span>
<a href="#l77.10"></a><span id="l77.10"> #endif</span>
<a href="#l77.11"></a><span id="l77.11"> </span>
<a href="#l77.12"></a><span id="l77.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l77.13"></a><span id="l77.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l77.14"></a><span id="l77.14"> </span>
<a href="#l77.15"></a><span id="l77.15"> // ````` ````` ````` ````` `````</span>
<a href="#l77.16"></a><span id="l77.16"> // { ===== begin morkNode interface =====</span>
<a href="#l77.17"></a><span id="l77.17"> </span>
<a href="#l77.18"></a><span id="l77.18"> /*public virtual*/ void morkThumb::CloseMorkNode(</span>
<a href="#l77.19"></a><span id="l77.19">     morkEnv* ev)  // CloseThumb() only if open</span>
<a href="#l77.20"></a><span id="l77.20"> {</span>
<a href="#l77.21"></a><span id="l77.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l77.22"></a><span id="l77.22" class="difflineat">@@ -447,9 +447,9 @@ void morkThumb::DoMore_CloneSortColumn(m</span>
<a href="#l77.23"></a><span id="l77.23"> void morkThumb::DoMore_AddIndex(morkEnv* ev) {</span>
<a href="#l77.24"></a><span id="l77.24">   this-&gt;UnsupportedThumbMagicError(ev);</span>
<a href="#l77.25"></a><span id="l77.25"> }</span>
<a href="#l77.26"></a><span id="l77.26"> </span>
<a href="#l77.27"></a><span id="l77.27"> void morkThumb::DoMore_CutIndex(morkEnv* ev) {</span>
<a href="#l77.28"></a><span id="l77.28">   this-&gt;UnsupportedThumbMagicError(ev);</span>
<a href="#l77.29"></a><span id="l77.29"> }</span>
<a href="#l77.30"></a><span id="l77.30"> </span>
<a href="#l77.31"></a><span id="l77.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l77.32"></a><span id="l77.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l78.1"></a><span id="l78.1" class="difflineminus">--- a/db/mork/src/morkThumb.h</span>
<a href="#l78.2"></a><span id="l78.2" class="difflineplus">+++ b/db/mork/src/morkThumb.h</span>
<a href="#l78.3"></a><span id="l78.3" class="difflineat">@@ -13,17 +13,17 @@</span>
<a href="#l78.4"></a><span id="l78.4"> #ifndef _MORKNODE_</span>
<a href="#l78.5"></a><span id="l78.5"> #  include &quot;morkNode.h&quot;</span>
<a href="#l78.6"></a><span id="l78.6"> #endif</span>
<a href="#l78.7"></a><span id="l78.7"> </span>
<a href="#l78.8"></a><span id="l78.8"> #ifndef _MORKOBJECT_</span>
<a href="#l78.9"></a><span id="l78.9"> #  include &quot;morkObject.h&quot;</span>
<a href="#l78.10"></a><span id="l78.10"> #endif</span>
<a href="#l78.11"></a><span id="l78.11"> </span>
<a href="#l78.12"></a><span id="l78.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l78.13"></a><span id="l78.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l78.14"></a><span id="l78.14"> </span>
<a href="#l78.15"></a><span id="l78.15"> #define morkThumb_kMagic_OpenFilePort 1              /* factory method */</span>
<a href="#l78.16"></a><span id="l78.16"> #define morkThumb_kMagic_OpenFileStore 2             /* factory method */</span>
<a href="#l78.17"></a><span id="l78.17"> #define morkThumb_kMagic_ExportToFormat 3            /* port method */</span>
<a href="#l78.18"></a><span id="l78.18"> #define morkThumb_kMagic_ImportContent 4             /* store method */</span>
<a href="#l78.19"></a><span id="l78.19"> #define morkThumb_kMagic_LargeCommit 5               /* store method */</span>
<a href="#l78.20"></a><span id="l78.20"> #define morkThumb_kMagic_SessionCommit 6             /* store method */</span>
<a href="#l78.21"></a><span id="l78.21"> #define morkThumb_kMagic_CompressCommit 7            /* store method */</span>
<a href="#l78.22"></a><span id="l78.22" class="difflineat">@@ -166,11 +166,11 @@ class morkThumb : public morkObject, pub</span>
<a href="#l78.23"></a><span id="l78.23">     morkNode::SlotWeakNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l78.24"></a><span id="l78.24">   }</span>
<a href="#l78.25"></a><span id="l78.25"> </span>
<a href="#l78.26"></a><span id="l78.26">   static void SlotStrongThumb(morkThumb* me, morkEnv* ev, morkThumb** ioSlot) {</span>
<a href="#l78.27"></a><span id="l78.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l78.28"></a><span id="l78.28">   }</span>
<a href="#l78.29"></a><span id="l78.29"> };</span>
<a href="#l78.30"></a><span id="l78.30"> </span>
<a href="#l78.31"></a><span id="l78.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l78.32"></a><span id="l78.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l78.33"></a><span id="l78.33"> </span>
<a href="#l78.34"></a><span id="l78.34"> #endif /* _MORKTHUMB_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l79.1"></a><span id="l79.1" class="difflineminus">--- a/db/mork/src/morkUniqRowCursor.h</span>
<a href="#l79.2"></a><span id="l79.2" class="difflineplus">+++ b/db/mork/src/morkUniqRowCursor.h</span>
<a href="#l79.3"></a><span id="l79.3" class="difflineat">@@ -13,17 +13,17 @@</span>
<a href="#l79.4"></a><span id="l79.4"> #ifndef _MORKCURSOR_</span>
<a href="#l79.5"></a><span id="l79.5"> #  include &quot;morkCursor.h&quot;</span>
<a href="#l79.6"></a><span id="l79.6"> #endif</span>
<a href="#l79.7"></a><span id="l79.7"> </span>
<a href="#l79.8"></a><span id="l79.8"> #ifndef _MORKMAP_</span>
<a href="#l79.9"></a><span id="l79.9"> #  include &quot;morkMap.h&quot;</span>
<a href="#l79.10"></a><span id="l79.10"> #endif</span>
<a href="#l79.11"></a><span id="l79.11"> </span>
<a href="#l79.12"></a><span id="l79.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l79.13"></a><span id="l79.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l79.14"></a><span id="l79.14"> </span>
<a href="#l79.15"></a><span id="l79.15"> class orkinTableRowCursor;</span>
<a href="#l79.16"></a><span id="l79.16"> // #define morkDerived_kUniqRowCursor  /*i*/ 0x7352 /* ascii 'sR' */</span>
<a href="#l79.17"></a><span id="l79.17"> </span>
<a href="#l79.18"></a><span id="l79.18"> class morkUniqRowCursor : public morkTableRowCursor {  // row iterator</span>
<a href="#l79.19"></a><span id="l79.19"> </span>
<a href="#l79.20"></a><span id="l79.20">   // public: // slots inherited from morkObject (meant to inform only)</span>
<a href="#l79.21"></a><span id="l79.21">   // nsIMdbHeap*     mNode_Heap;</span>
<a href="#l79.22"></a><span id="l79.22" class="difflineat">@@ -79,11 +79,11 @@ class morkUniqRowCursor : public morkTab</span>
<a href="#l79.23"></a><span id="l79.23">   }</span>
<a href="#l79.24"></a><span id="l79.24"> </span>
<a href="#l79.25"></a><span id="l79.25">   static void SlotStrongUniqRowCursor(morkUniqRowCursor* me, morkEnv* ev,</span>
<a href="#l79.26"></a><span id="l79.26">                                       morkUniqRowCursor** ioSlot) {</span>
<a href="#l79.27"></a><span id="l79.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l79.28"></a><span id="l79.28">   }</span>
<a href="#l79.29"></a><span id="l79.29"> };</span>
<a href="#l79.30"></a><span id="l79.30"> </span>
<a href="#l79.31"></a><span id="l79.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l79.32"></a><span id="l79.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l79.33"></a><span id="l79.33"> </span>
<a href="#l79.34"></a><span id="l79.34"> #endif /* _MORKUNIQROWCURSOR_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l80.1"></a><span id="l80.1" class="difflineminus">--- a/db/mork/src/morkWriter.cpp</span>
<a href="#l80.2"></a><span id="l80.2" class="difflineplus">+++ b/db/mork/src/morkWriter.cpp</span>
<a href="#l80.3"></a><span id="l80.3" class="difflineat">@@ -70,17 +70,17 @@</span>
<a href="#l80.4"></a><span id="l80.4"> #ifndef _MORKATOM_</span>
<a href="#l80.5"></a><span id="l80.5"> #  include &quot;morkAtom.h&quot;</span>
<a href="#l80.6"></a><span id="l80.6"> #endif</span>
<a href="#l80.7"></a><span id="l80.7"> </span>
<a href="#l80.8"></a><span id="l80.8"> #ifndef _MORKCH_</span>
<a href="#l80.9"></a><span id="l80.9"> #  include &quot;morkCh.h&quot;</span>
<a href="#l80.10"></a><span id="l80.10"> #endif</span>
<a href="#l80.11"></a><span id="l80.11"> </span>
<a href="#l80.12"></a><span id="l80.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l80.13"></a><span id="l80.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l80.14"></a><span id="l80.14"> </span>
<a href="#l80.15"></a><span id="l80.15"> // ````` ````` ````` ````` `````</span>
<a href="#l80.16"></a><span id="l80.16"> // { ===== begin morkNode interface =====</span>
<a href="#l80.17"></a><span id="l80.17"> </span>
<a href="#l80.18"></a><span id="l80.18"> /*public virtual*/ void morkWriter::CloseMorkNode(</span>
<a href="#l80.19"></a><span id="l80.19">     morkEnv* ev)  // CloseTable() only if open</span>
<a href="#l80.20"></a><span id="l80.20"> {</span>
<a href="#l80.21"></a><span id="l80.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l80.22"></a><span id="l80.22" class="difflineat">@@ -1927,9 +1927,9 @@ mork_bool morkWriter::PutRow(morkEnv* ev</span>
<a href="#l80.23"></a><span id="l80.23"> </span>
<a href="#l80.24"></a><span id="l80.24">     ioRow-&gt;SetRowClean();  // try to do this at the very last</span>
<a href="#l80.25"></a><span id="l80.25">   } else</span>
<a href="#l80.26"></a><span id="l80.26">     ioRow-&gt;NonRowTypeWarning(ev);</span>
<a href="#l80.27"></a><span id="l80.27"> </span>
<a href="#l80.28"></a><span id="l80.28">   return ev-&gt;Good();</span>
<a href="#l80.29"></a><span id="l80.29"> }</span>
<a href="#l80.30"></a><span id="l80.30"> </span>
<a href="#l80.31"></a><span id="l80.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l80.32"></a><span id="l80.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l81.1"></a><span id="l81.1" class="difflineminus">--- a/db/mork/src/morkWriter.h</span>
<a href="#l81.2"></a><span id="l81.2" class="difflineplus">+++ b/db/mork/src/morkWriter.h</span>
<a href="#l81.3"></a><span id="l81.3" class="difflineat">@@ -37,17 +37,17 @@</span>
<a href="#l81.4"></a><span id="l81.4"> #ifndef _MORKROWSPACE_</span>
<a href="#l81.5"></a><span id="l81.5"> #  include &quot;morkRowSpace.h&quot;</span>
<a href="#l81.6"></a><span id="l81.6"> #endif</span>
<a href="#l81.7"></a><span id="l81.7"> </span>
<a href="#l81.8"></a><span id="l81.8"> #ifndef _MORKSTREAM_</span>
<a href="#l81.9"></a><span id="l81.9"> #  include &quot;morkStream.h&quot;</span>
<a href="#l81.10"></a><span id="l81.10"> #endif</span>
<a href="#l81.11"></a><span id="l81.11"> </span>
<a href="#l81.12"></a><span id="l81.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l81.13"></a><span id="l81.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l81.14"></a><span id="l81.14"> </span>
<a href="#l81.15"></a><span id="l81.15"> /* buffer size for stream */</span>
<a href="#l81.16"></a><span id="l81.16"> #define morkWriter_kStreamBufSize /*i*/ (16 * 1024)</span>
<a href="#l81.17"></a><span id="l81.17"> </span>
<a href="#l81.18"></a><span id="l81.18"> #define morkDerived_kWriter /*i*/ 0x5772 /* ascii 'Wr' */</span>
<a href="#l81.19"></a><span id="l81.19"> </span>
<a href="#l81.20"></a><span id="l81.20"> #define morkWriter_kPhaseNothingDone 0   /* nothing has yet been done */</span>
<a href="#l81.21"></a><span id="l81.21"> #define morkWriter_kPhaseDirtyAllDone 1  /* DirtyAll() is done */</span>
<a href="#l81.22"></a><span id="l81.22" class="difflineat">@@ -330,11 +330,11 @@ class morkWriter : public morkNode {  //</span>
<a href="#l81.23"></a><span id="l81.23">   }</span>
<a href="#l81.24"></a><span id="l81.24"> </span>
<a href="#l81.25"></a><span id="l81.25">   static void SlotStrongWriter(morkWriter* me, morkEnv* ev,</span>
<a href="#l81.26"></a><span id="l81.26">                                morkWriter** ioSlot) {</span>
<a href="#l81.27"></a><span id="l81.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l81.28"></a><span id="l81.28">   }</span>
<a href="#l81.29"></a><span id="l81.29"> };</span>
<a href="#l81.30"></a><span id="l81.30"> </span>
<a href="#l81.31"></a><span id="l81.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l81.32"></a><span id="l81.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l81.33"></a><span id="l81.33"> </span>
<a href="#l81.34"></a><span id="l81.34"> #endif /* _MORKTABLEROWCURSOR_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l82.1"></a><span id="l82.1" class="difflineminus">--- a/db/mork/src/morkYarn.cpp</span>
<a href="#l82.2"></a><span id="l82.2" class="difflineplus">+++ b/db/mork/src/morkYarn.cpp</span>
<a href="#l82.3"></a><span id="l82.3" class="difflineat">@@ -18,17 +18,17 @@</span>
<a href="#l82.4"></a><span id="l82.4"> #ifndef _MORKENV_</span>
<a href="#l82.5"></a><span id="l82.5"> #  include &quot;morkEnv.h&quot;</span>
<a href="#l82.6"></a><span id="l82.6"> #endif</span>
<a href="#l82.7"></a><span id="l82.7"> </span>
<a href="#l82.8"></a><span id="l82.8"> #ifndef _MORKYARN_</span>
<a href="#l82.9"></a><span id="l82.9"> #  include &quot;morkYarn.h&quot;</span>
<a href="#l82.10"></a><span id="l82.10"> #endif</span>
<a href="#l82.11"></a><span id="l82.11"> </span>
<a href="#l82.12"></a><span id="l82.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l82.13"></a><span id="l82.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l82.14"></a><span id="l82.14"> </span>
<a href="#l82.15"></a><span id="l82.15"> // ````` ````` ````` ````` `````</span>
<a href="#l82.16"></a><span id="l82.16"> // { ===== begin morkNode interface =====</span>
<a href="#l82.17"></a><span id="l82.17"> </span>
<a href="#l82.18"></a><span id="l82.18"> /*public virtual*/ void morkYarn::CloseMorkNode(</span>
<a href="#l82.19"></a><span id="l82.19">     morkEnv* ev) /*i*/  // CloseYarn() only if open</span>
<a href="#l82.20"></a><span id="l82.20"> {</span>
<a href="#l82.21"></a><span id="l82.21">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l82.22"></a><span id="l82.22" class="difflineat">@@ -62,9 +62,9 @@ morkYarn::morkYarn(morkEnv* ev, /*i*/</span>
<a href="#l82.23"></a><span id="l82.23"> </span>
<a href="#l82.24"></a><span id="l82.24"> // } ===== end morkNode methods =====</span>
<a href="#l82.25"></a><span id="l82.25"> // ````` ````` ````` ````` `````</span>
<a href="#l82.26"></a><span id="l82.26"> </span>
<a href="#l82.27"></a><span id="l82.27"> /*static*/ void morkYarn::NonYarnTypeError(morkEnv* ev) {</span>
<a href="#l82.28"></a><span id="l82.28">   ev-&gt;NewError(&quot;non morkYarn&quot;);</span>
<a href="#l82.29"></a><span id="l82.29"> }</span>
<a href="#l82.30"></a><span id="l82.30"> </span>
<a href="#l82.31"></a><span id="l82.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l82.32"></a><span id="l82.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l83.1"></a><span id="l83.1" class="difflineminus">--- a/db/mork/src/morkYarn.h</span>
<a href="#l83.2"></a><span id="l83.2" class="difflineplus">+++ b/db/mork/src/morkYarn.h</span>
<a href="#l83.3"></a><span id="l83.3" class="difflineat">@@ -5,17 +5,17 @@</span>
<a href="#l83.4"></a><span id="l83.4"> </span>
<a href="#l83.5"></a><span id="l83.5"> #ifndef _MORKYARN_</span>
<a href="#l83.6"></a><span id="l83.6"> #define _MORKYARN_ 1</span>
<a href="#l83.7"></a><span id="l83.7"> </span>
<a href="#l83.8"></a><span id="l83.8"> #ifndef _MORK_</span>
<a href="#l83.9"></a><span id="l83.9"> #  include &quot;mork.h&quot;</span>
<a href="#l83.10"></a><span id="l83.10"> #endif</span>
<a href="#l83.11"></a><span id="l83.11"> </span>
<a href="#l83.12"></a><span id="l83.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l83.13"></a><span id="l83.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l83.14"></a><span id="l83.14"> </span>
<a href="#l83.15"></a><span id="l83.15"> #define morkDerived_kYarn /*i*/ 0x7952 /* ascii 'yR' */</span>
<a href="#l83.16"></a><span id="l83.16"> </span>
<a href="#l83.17"></a><span id="l83.17"> /*| morkYarn: a reference counted nsIMdbYarn C struct.  This is for use in those</span>
<a href="#l83.18"></a><span id="l83.18"> **| few cases where single instances of reference counted buffers are needed</span>
<a href="#l83.19"></a><span id="l83.19"> **| in Mork, and we expect few enough instances that overhead is not a factor</span>
<a href="#l83.20"></a><span id="l83.20"> **| in decided whether to use such a thing.</span>
<a href="#l83.21"></a><span id="l83.21"> |*/</span>
<a href="#l83.22"></a><span id="l83.22" class="difflineat">@@ -65,11 +65,11 @@ class morkYarn : public morkNode {  // r</span>
<a href="#l83.23"></a><span id="l83.23">     morkNode::SlotWeakNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l83.24"></a><span id="l83.24">   }</span>
<a href="#l83.25"></a><span id="l83.25"> </span>
<a href="#l83.26"></a><span id="l83.26">   static void SlotStrongYarn(morkYarn* me, morkEnv* ev, morkYarn** ioSlot) {</span>
<a href="#l83.27"></a><span id="l83.27">     morkNode::SlotStrongNode((morkNode*)me, ev, (morkNode**)ioSlot);</span>
<a href="#l83.28"></a><span id="l83.28">   }</span>
<a href="#l83.29"></a><span id="l83.29"> };</span>
<a href="#l83.30"></a><span id="l83.30"> </span>
<a href="#l83.31"></a><span id="l83.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l83.32"></a><span id="l83.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l83.33"></a><span id="l83.33"> </span>
<a href="#l83.34"></a><span id="l83.34"> #endif /* _MORKYARN_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l84.1"></a><span id="l84.1" class="difflineminus">--- a/db/mork/src/morkZone.cpp</span>
<a href="#l84.2"></a><span id="l84.2" class="difflineplus">+++ b/db/mork/src/morkZone.cpp</span>
<a href="#l84.3"></a><span id="l84.3" class="difflineat">@@ -18,17 +18,17 @@</span>
<a href="#l84.4"></a><span id="l84.4"> #ifndef _MORKZONE_</span>
<a href="#l84.5"></a><span id="l84.5"> #  include &quot;morkZone.h&quot;</span>
<a href="#l84.6"></a><span id="l84.6"> #endif</span>
<a href="#l84.7"></a><span id="l84.7"> </span>
<a href="#l84.8"></a><span id="l84.8"> #ifndef _MORKENV_</span>
<a href="#l84.9"></a><span id="l84.9"> #  include &quot;morkEnv.h&quot;</span>
<a href="#l84.10"></a><span id="l84.10"> #endif</span>
<a href="#l84.11"></a><span id="l84.11"> </span>
<a href="#l84.12"></a><span id="l84.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l84.13"></a><span id="l84.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l84.14"></a><span id="l84.14"> </span>
<a href="#l84.15"></a><span id="l84.15"> // { ===== begin morkNode interface =====</span>
<a href="#l84.16"></a><span id="l84.16"> // public: // morkNode virtual methods</span>
<a href="#l84.17"></a><span id="l84.17"> void morkZone::CloseMorkNode(morkEnv* ev)  // CloseZone() only if open</span>
<a href="#l84.18"></a><span id="l84.18"> {</span>
<a href="#l84.19"></a><span id="l84.19">   if (this-&gt;IsOpenNode()) {</span>
<a href="#l84.20"></a><span id="l84.20">     this-&gt;MarkClosing();</span>
<a href="#l84.21"></a><span id="l84.21">     this-&gt;CloseZone(ev);</span>
<a href="#l84.22"></a><span id="l84.22" class="difflineat">@@ -440,17 +440,17 @@ void* morkZone::ZoneGrowRun(morkEnv* ev,</span>
<a href="#l84.23"></a><span id="l84.23"> </span>
<a href="#l84.24"></a><span id="l84.24"> #else  /*morkZone_CONFIG_ARENA*/</span>
<a href="#l84.25"></a><span id="l84.25">   void* outBlock = 0;</span>
<a href="#l84.26"></a><span id="l84.26">   mZone_Heap-&gt;Free(ev-&gt;AsMdbEnv(), ioRunBlock);</span>
<a href="#l84.27"></a><span id="l84.27">   return outBlock;</span>
<a href="#l84.28"></a><span id="l84.28"> #endif /*morkZone_CONFIG_ARENA*/</span>
<a href="#l84.29"></a><span id="l84.29"> }</span>
<a href="#l84.30"></a><span id="l84.30"> </span>
<a href="#l84.31"></a><span id="l84.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l84.32"></a><span id="l84.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l84.33"></a><span id="l84.33"> </span>
<a href="#l84.34"></a><span id="l84.34"> // { ===== begin nsIMdbHeap methods =====</span>
<a href="#l84.35"></a><span id="l84.35"> /*virtual*/ nsresult morkZone::Alloc(</span>
<a href="#l84.36"></a><span id="l84.36">     nsIMdbEnv* mev,   // allocate a piece of memory</span>
<a href="#l84.37"></a><span id="l84.37">     mdb_size inSize,  // requested size of new memory block</span>
<a href="#l84.38"></a><span id="l84.38">     void** outBlock)  // memory block of inSize bytes, or nil</span>
<a href="#l84.39"></a><span id="l84.39"> {</span>
<a href="#l84.40"></a><span id="l84.40">   nsresult outErr = NS_OK;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l85.1"></a><span id="l85.1" class="difflineminus">--- a/db/mork/src/morkZone.h</span>
<a href="#l85.2"></a><span id="l85.2" class="difflineplus">+++ b/db/mork/src/morkZone.h</span>
<a href="#l85.3"></a><span id="l85.3" class="difflineat">@@ -13,17 +13,17 @@</span>
<a href="#l85.4"></a><span id="l85.4"> #ifndef _MORKNODE_</span>
<a href="#l85.5"></a><span id="l85.5"> #  include &quot;morkNode.h&quot;</span>
<a href="#l85.6"></a><span id="l85.6"> #endif</span>
<a href="#l85.7"></a><span id="l85.7"> </span>
<a href="#l85.8"></a><span id="l85.8"> #ifndef _MORKDEQUE_</span>
<a href="#l85.9"></a><span id="l85.9"> #  include &quot;morkDeque.h&quot;</span>
<a href="#l85.10"></a><span id="l85.10"> #endif</span>
<a href="#l85.11"></a><span id="l85.11"> </span>
<a href="#l85.12"></a><span id="l85.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l85.13"></a><span id="l85.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l85.14"></a><span id="l85.14"> </span>
<a href="#l85.15"></a><span id="l85.15"> /*| CONFIG_DEBUG: do paranoid debug checks if defined.</span>
<a href="#l85.16"></a><span id="l85.16"> |*/</span>
<a href="#l85.17"></a><span id="l85.17"> #ifdef MORK_DEBUG</span>
<a href="#l85.18"></a><span id="l85.18"> #  define morkZone_CONFIG_DEBUG 1 /* debug paranoid if defined */</span>
<a href="#l85.19"></a><span id="l85.19"> #endif                            /*MORK_DEBUG*/</span>
<a href="#l85.20"></a><span id="l85.20"> </span>
<a href="#l85.21"></a><span id="l85.21"> /*| CONFIG_STATS: keep volume and usage statistics.</span>
<a href="#l85.22"></a><span id="l85.22" class="difflineat">@@ -55,17 +55,17 @@</span>
<a href="#l85.23"></a><span id="l85.23"> /*| morkZone_USE_TAG_SLOT: if this is defined, then define slot mRun_Tag</span>
<a href="#l85.24"></a><span id="l85.24"> **| in order to achieve eight byte alignment after the mRun_Next slot.</span>
<a href="#l85.25"></a><span id="l85.25"> |*/</span>
<a href="#l85.26"></a><span id="l85.26"> #if defined(morkZone_CONFIG_ALIGN_8) &amp;&amp; defined(morkZone_CONFIG_PTR_SIZE_4)</span>
<a href="#l85.27"></a><span id="l85.27"> #  define morkRun_USE_TAG_SLOT 1  /* need mRun_Tag slot inside morkRun */</span>
<a href="#l85.28"></a><span id="l85.28"> #  define morkHunk_USE_TAG_SLOT 1 /* need mHunk_Tag slot inside morkHunk */</span>
<a href="#l85.29"></a><span id="l85.29"> #endif</span>
<a href="#l85.30"></a><span id="l85.30"> </span>
<a href="#l85.31"></a><span id="l85.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l85.32"></a><span id="l85.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l85.33"></a><span id="l85.33"> </span>
<a href="#l85.34"></a><span id="l85.34"> #define morkRun_kTag ((mork_u4)0x6D52754E) /* ascii 'mRuN' */</span>
<a href="#l85.35"></a><span id="l85.35"> </span>
<a href="#l85.36"></a><span id="l85.36"> /*| morkRun: structure used by morkZone for sized blocks</span>
<a href="#l85.37"></a><span id="l85.37"> |*/</span>
<a href="#l85.38"></a><span id="l85.38"> class morkRun {</span>
<a href="#l85.39"></a><span id="l85.39">  protected:  // member variable slots</span>
<a href="#l85.40"></a><span id="l85.40"> #ifdef morkRun_USE_TAG_SLOT</span>
<a href="#l85.41"></a><span id="l85.41" class="difflineat">@@ -95,30 +95,30 @@ class morkRun {</span>
<a href="#l85.42"></a><span id="l85.42">     return (morkRun*)(((mork_u1*)ioBlock) - sizeof(morkRun));</span>
<a href="#l85.43"></a><span id="l85.43">   }</span>
<a href="#l85.44"></a><span id="l85.44"> </span>
<a href="#l85.45"></a><span id="l85.45">  public:  // typing &amp; errors</span>
<a href="#l85.46"></a><span id="l85.46">   static void BadRunTagError(morkEnv* ev);</span>
<a href="#l85.47"></a><span id="l85.47">   static void RunSizeAlignError(morkEnv* ev);</span>
<a href="#l85.48"></a><span id="l85.48"> };</span>
<a href="#l85.49"></a><span id="l85.49"> </span>
<a href="#l85.50"></a><span id="l85.50" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l85.51"></a><span id="l85.51" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l85.52"></a><span id="l85.52"> </span>
<a href="#l85.53"></a><span id="l85.53"> /*| morkOldRun: more space to record size when run is put into old free list</span>
<a href="#l85.54"></a><span id="l85.54"> |*/</span>
<a href="#l85.55"></a><span id="l85.55"> class morkOldRun : public morkRun {</span>
<a href="#l85.56"></a><span id="l85.56">  protected:  // need another size field when mRun_Next is used for linkage:</span>
<a href="#l85.57"></a><span id="l85.57">   mdb_size mOldRun_Size;</span>
<a href="#l85.58"></a><span id="l85.58"> </span>
<a href="#l85.59"></a><span id="l85.59">  public:  // size getter/setter</span>
<a href="#l85.60"></a><span id="l85.60">   mork_size OldSize() const { return mOldRun_Size; }</span>
<a href="#l85.61"></a><span id="l85.61">   void OldSetSize(mork_size inSize) { mOldRun_Size = inSize; }</span>
<a href="#l85.62"></a><span id="l85.62"> };</span>
<a href="#l85.63"></a><span id="l85.63"> </span>
<a href="#l85.64"></a><span id="l85.64" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l85.65"></a><span id="l85.65" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l85.66"></a><span id="l85.66"> </span>
<a href="#l85.67"></a><span id="l85.67"> #define morkHunk_kTag ((mork_u4)0x68556E4B) /* ascii 'hUnK' */</span>
<a href="#l85.68"></a><span id="l85.68"> </span>
<a href="#l85.69"></a><span id="l85.69"> /*| morkHunk: structure used by morkZone for heap allocations.</span>
<a href="#l85.70"></a><span id="l85.70"> |*/</span>
<a href="#l85.71"></a><span id="l85.71"> class morkHunk {</span>
<a href="#l85.72"></a><span id="l85.72">  protected:  // member variable slots</span>
<a href="#l85.73"></a><span id="l85.73"> #ifdef morkHunk_USE_TAG_SLOT</span>
<a href="#l85.74"></a><span id="l85.74" class="difflineat">@@ -142,17 +142,17 @@ class morkHunk {</span>
<a href="#l85.75"></a><span id="l85.75">   void HunkInitTag() { mHunk_Tag = morkHunk_kTag; }</span>
<a href="#l85.76"></a><span id="l85.76">   mork_bool HunkGoodTag() { return (mHunk_Tag == morkHunk_kTag); }</span>
<a href="#l85.77"></a><span id="l85.77"> #endif /* morkHunk_USE_TAG_SLOT */</span>
<a href="#l85.78"></a><span id="l85.78"> </span>
<a href="#l85.79"></a><span id="l85.79">  public:  // typing &amp; errors</span>
<a href="#l85.80"></a><span id="l85.80">   static void BadHunkTagWarning(morkEnv* ev);</span>
<a href="#l85.81"></a><span id="l85.81"> };</span>
<a href="#l85.82"></a><span id="l85.82"> </span>
<a href="#l85.83"></a><span id="l85.83" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l85.84"></a><span id="l85.84" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l85.85"></a><span id="l85.85"> </span>
<a href="#l85.86"></a><span id="l85.86"> /*| kNewHunkSize: the default size for a hunk, assuming we must allocate</span>
<a href="#l85.87"></a><span id="l85.87"> **| a new one whenever the free hunk list does not already have.  Note this</span>
<a href="#l85.88"></a><span id="l85.88"> **| number should not be changed without also considering suitable changes</span>
<a href="#l85.89"></a><span id="l85.89"> **| in the related kMaxHunkWaste and kMinHunkSize constants.</span>
<a href="#l85.90"></a><span id="l85.90"> |*/</span>
<a href="#l85.91"></a><span id="l85.91"> #define morkZone_kNewHunkSize ((mork_size)(64 * 1024)) /* 64K per hunk */</span>
<a href="#l85.92"></a><span id="l85.92"> </span>
<a href="#l85.93"></a><span id="l85.93" class="difflineat">@@ -303,11 +303,11 @@ class morkZone : public morkNode, public</span>
<a href="#l85.94"></a><span id="l85.94">   // } ===== end morkZone methods =====</span>
<a href="#l85.95"></a><span id="l85.95"> </span>
<a href="#l85.96"></a><span id="l85.96">  public:  // typing &amp; errors</span>
<a href="#l85.97"></a><span id="l85.97">   static void NonZoneTypeError(morkEnv* ev);</span>
<a href="#l85.98"></a><span id="l85.98">   static void NilZoneHeapError(morkEnv* ev);</span>
<a href="#l85.99"></a><span id="l85.99">   static void BadZoneTagError(morkEnv* ev);</span>
<a href="#l85.100"></a><span id="l85.100"> };</span>
<a href="#l85.101"></a><span id="l85.101"> </span>
<a href="#l85.102"></a><span id="l85.102" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l85.103"></a><span id="l85.103" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l85.104"></a><span id="l85.104"> </span>
<a href="#l85.105"></a><span id="l85.105"> #endif /* _MORKZONE_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l86.1"></a><span id="l86.1" class="difflineminus">--- a/db/mork/src/orkinHeap.cpp</span>
<a href="#l86.2"></a><span id="l86.2" class="difflineplus">+++ b/db/mork/src/orkinHeap.cpp</span>
<a href="#l86.3"></a><span id="l86.3" class="difflineat">@@ -18,17 +18,17 @@</span>
<a href="#l86.4"></a><span id="l86.4"> #ifndef _MORKENV_</span>
<a href="#l86.5"></a><span id="l86.5"> #  include &quot;morkEnv.h&quot;</span>
<a href="#l86.6"></a><span id="l86.6"> #endif</span>
<a href="#l86.7"></a><span id="l86.7"> </span>
<a href="#l86.8"></a><span id="l86.8"> #include &quot;nsIMemoryReporter.h&quot;</span>
<a href="#l86.9"></a><span id="l86.9"> </span>
<a href="#l86.10"></a><span id="l86.10"> #include &lt;stdlib.h&gt;</span>
<a href="#l86.11"></a><span id="l86.11"> </span>
<a href="#l86.12"></a><span id="l86.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l86.13"></a><span id="l86.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l86.14"></a><span id="l86.14"> </span>
<a href="#l86.15"></a><span id="l86.15"> orkinHeap::orkinHeap()  // does nothing</span>
<a href="#l86.16"></a><span id="l86.16">     : mUsedSize(0) {}</span>
<a href="#l86.17"></a><span id="l86.17"> </span>
<a href="#l86.18"></a><span id="l86.18"> /*virtual*/</span>
<a href="#l86.19"></a><span id="l86.19"> orkinHeap::~orkinHeap()  // does nothing</span>
<a href="#l86.20"></a><span id="l86.20"> {}</span>
<a href="#l86.21"></a><span id="l86.21"> </span>
<a href="#l86.22"></a><span id="l86.22" class="difflineat">@@ -64,9 +64,9 @@ MOZ_DEFINE_MALLOC_SIZE_OF_ON_FREE(MorkSi</span>
<a href="#l86.23"></a><span id="l86.23">     free(inBlock);</span>
<a href="#l86.24"></a><span id="l86.24">   }</span>
<a href="#l86.25"></a><span id="l86.25">   return NS_OK;</span>
<a href="#l86.26"></a><span id="l86.26"> }</span>
<a href="#l86.27"></a><span id="l86.27"> </span>
<a href="#l86.28"></a><span id="l86.28"> size_t orkinHeap::GetUsedSize() { return mUsedSize; }</span>
<a href="#l86.29"></a><span id="l86.29"> // } ===== end nsIMdbHeap methods =====</span>
<a href="#l86.30"></a><span id="l86.30"> </span>
<a href="#l86.31"></a><span id="l86.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l86.32"></a><span id="l86.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l87.1"></a><span id="l87.1" class="difflineminus">--- a/db/mork/src/orkinHeap.h</span>
<a href="#l87.2"></a><span id="l87.2" class="difflineplus">+++ b/db/mork/src/orkinHeap.h</span>
<a href="#l87.3"></a><span id="l87.3" class="difflineat">@@ -9,17 +9,17 @@</span>
<a href="#l87.4"></a><span id="l87.4"> #ifndef _MDB_</span>
<a href="#l87.5"></a><span id="l87.5"> #  include &quot;mdb.h&quot;</span>
<a href="#l87.6"></a><span id="l87.6"> #endif</span>
<a href="#l87.7"></a><span id="l87.7"> </span>
<a href="#l87.8"></a><span id="l87.8"> #ifndef _MORK_</span>
<a href="#l87.9"></a><span id="l87.9"> #  include &quot;mork.h&quot;</span>
<a href="#l87.10"></a><span id="l87.10"> #endif</span>
<a href="#l87.11"></a><span id="l87.11"> </span>
<a href="#l87.12"></a><span id="l87.12" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l87.13"></a><span id="l87.13" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l87.14"></a><span id="l87.14"> </span>
<a href="#l87.15"></a><span id="l87.15"> #define orkinHeap_kTag 0x68456150 /* ascii 'hEaP' */</span>
<a href="#l87.16"></a><span id="l87.16"> </span>
<a href="#l87.17"></a><span id="l87.17"> /*| orkinHeap:</span>
<a href="#l87.18"></a><span id="l87.18"> |*/</span>
<a href="#l87.19"></a><span id="l87.19"> class orkinHeap : public nsIMdbHeap {  //</span>
<a href="#l87.20"></a><span id="l87.20">  protected:</span>
<a href="#l87.21"></a><span id="l87.21">   size_t mUsedSize;</span>
<a href="#l87.22"></a><span id="l87.22" class="difflineat">@@ -40,11 +40,11 @@ class orkinHeap : public nsIMdbHeap {  /</span>
<a href="#l87.23"></a><span id="l87.23"> </span>
<a href="#l87.24"></a><span id="l87.24">   NS_IMETHOD Free(nsIMdbEnv* ev,  // free block allocated earlier by Alloc()</span>
<a href="#l87.25"></a><span id="l87.25">                   void* inBlock);</span>
<a href="#l87.26"></a><span id="l87.26"> </span>
<a href="#l87.27"></a><span id="l87.27">   virtual size_t GetUsedSize();</span>
<a href="#l87.28"></a><span id="l87.28">   // } ===== end nsIMdbHeap methods =====</span>
<a href="#l87.29"></a><span id="l87.29"> };</span>
<a href="#l87.30"></a><span id="l87.30"> </span>
<a href="#l87.31"></a><span id="l87.31" class="difflineminus">-// 3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l87.32"></a><span id="l87.32" class="difflineplus">+// 456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l87.33"></a><span id="l87.33"> </span>
<a href="#l87.34"></a><span id="l87.34"> #endif /* _ORKINHEAP_ */</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:32Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

