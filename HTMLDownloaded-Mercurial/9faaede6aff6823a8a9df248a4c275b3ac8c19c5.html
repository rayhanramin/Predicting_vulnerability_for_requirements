<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 21772:9faaede6aff6823a8a9df248a4c275b3ac8c19c5</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 9faaede6aff6823a8a9df248a4c275b3ac8c19c5" />
<meta property="og:url" content="/comm-central/rev/9faaede6aff6823a8a9df248a4c275b3ac8c19c5" />
<meta property="og:description" content="Bug 1380906 - Update Thunderbird for nsIStringBundle changes in bug 1380227. r=jorgk" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 9faaede6aff6823a8a9df248a4c275b3ac8c19c5 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/9faaede6aff6823a8a9df248a4c275b3ac8c19c5">shortlog</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/9faaede6aff6823a8a9df248a4c275b3ac8c19c5">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5">files</a> |
changeset |
<a href="/comm-central/raw-rev/9faaede6aff6823a8a9df248a4c275b3ac8c19c5">raw</a>  | <a href="/comm-central/archive/9faaede6aff6823a8a9df248a4c275b3ac8c19c5.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1380906">Bug 1380906</a> - Update Thunderbird for nsIStringBundle changes in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1380227">bug 1380227</a>. r=jorgk
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#78;&#105;&#99;&#104;&#111;&#108;&#97;&#115;&#32;&#78;&#101;&#116;&#104;&#101;&#114;&#99;&#111;&#116;&#101;&#32;&#60;&#110;&#110;&#101;&#116;&#104;&#101;&#114;&#99;&#111;&#116;&#101;&#64;&#109;&#111;&#122;&#105;&#108;&#108;&#97;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 14 Jul 2017 12:55:40 +1000</td></tr>

<tr>
 <td>changeset 21772</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/9faaede6aff6823a8a9df248a4c275b3ac8c19c5">9faaede6aff6823a8a9df248a4c275b3ac8c19c5</a></td>
</tr>



<tr>
<td>parent 21771</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/7be30a48e5cf2c7d70fadb1f348879c17806c5f5">7be30a48e5cf2c7d70fadb1f348879c17806c5f5</a>
</td>
</tr>

<tr>
<td>child 21773</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/6b9b94ad31c9801780a8fabbf49434fbf53870a8">6b9b94ad31c9801780a8fabbf49434fbf53870a8</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=9faaede6aff6823a8a9df248a4c275b3ac8c19c5">13285</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Fri, 14 Jul 2017 12:44:11 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@9faaede6aff6 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=9faaede6aff6823a8a9df248a4c275b3ac8c19c5">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=9faaede6aff6823a8a9df248a4c275b3ac8c19c5&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=9faaede6aff6823a8a9df248a4c275b3ac8c19c5&newProject=comm-central&newRevision=9faaede6aff6823a8a9df248a4c275b3ac8c19c5&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=9faaede6aff6823a8a9df248a4c275b3ac8c19c5&newProject=comm-central&newRevision=9faaede6aff6823a8a9df248a4c275b3ac8c19c5&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=9faaede6aff6823a8a9df248a4c275b3ac8c19c5&newProject=comm-central&newRevision=9faaede6aff6823a8a9df248a4c275b3ac8c19c5&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28jorgk%29&revcount=50">jorgk</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1380906">1380906</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1380227">1380227</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1380906">Bug 1380906</a> - Update Thunderbird for nsIStringBundle changes in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1380227">bug 1380227</a>. r=jorgk</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mail/components/shell/nsMailGNOMEIntegration.cpp">mail/components/shell/nsMailGNOMEIntegration.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mail/components/shell/nsMailGNOMEIntegration.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mail/components/shell/nsMailGNOMEIntegration.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mail/components/shell/nsMailGNOMEIntegration.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mail/components/shell/nsMailGNOMEIntegration.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mail/components/shell/nsMailGNOMEIntegration.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbCardProperty.cpp">mailnews/addrbook/src/nsAbCardProperty.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbCardProperty.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbCardProperty.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbCardProperty.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbCardProperty.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbCardProperty.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp">mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbLDAPListenerBase.cpp">mailnews/addrbook/src/nsAbLDAPListenerBase.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbLDAPListenerBase.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbLDAPListenerBase.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbLDAPListenerBase.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbLDAPListenerBase.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbLDAPListenerBase.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbManager.cpp">mailnews/addrbook/src/nsAbManager.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbManager.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbManager.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbManager.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbManager.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbManager.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbView.cpp">mailnews/addrbook/src/nsAbView.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbView.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbView.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbView.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbView.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAbView.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAddbookProtocolHandler.cpp">mailnews/addrbook/src/nsAddbookProtocolHandler.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAddbookProtocolHandler.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAddbookProtocolHandler.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAddbookProtocolHandler.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAddbookProtocolHandler.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAddbookProtocolHandler.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAddrDatabase.cpp">mailnews/addrbook/src/nsAddrDatabase.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAddrDatabase.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAddrDatabase.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAddrDatabase.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAddrDatabase.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/addrbook/src/nsAddrDatabase.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/search/src/nsMsgFilter.cpp">mailnews/base/search/src/nsMsgFilter.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/search/src/nsMsgFilter.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/search/src/nsMsgFilter.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/search/src/nsMsgFilter.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/search/src/nsMsgFilter.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/search/src/nsMsgFilter.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/search/src/nsMsgFilterService.cpp">mailnews/base/search/src/nsMsgFilterService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/search/src/nsMsgFilterService.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/search/src/nsMsgFilterService.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/search/src/nsMsgFilterService.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/search/src/nsMsgFilterService.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/search/src/nsMsgFilterService.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessenger.cpp">mailnews/base/src/nsMessenger.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessenger.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessenger.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessenger.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessenger.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessenger.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessengerOSXIntegration.mm">mailnews/base/src/nsMessengerOSXIntegration.mm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessengerOSXIntegration.mm">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessengerOSXIntegration.mm">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessengerOSXIntegration.mm">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessengerOSXIntegration.mm">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessengerOSXIntegration.mm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessengerUnixIntegration.cpp">mailnews/base/src/nsMessengerUnixIntegration.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessengerUnixIntegration.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessengerUnixIntegration.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessengerUnixIntegration.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessengerUnixIntegration.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessengerUnixIntegration.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessengerWinIntegration.cpp">mailnews/base/src/nsMessengerWinIntegration.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessengerWinIntegration.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessengerWinIntegration.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessengerWinIntegration.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessengerWinIntegration.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMessengerWinIntegration.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgAccountManager.cpp">mailnews/base/src/nsMsgAccountManager.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgAccountManager.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgAccountManager.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgAccountManager.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgAccountManager.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgAccountManager.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgAccountManagerDS.cpp">mailnews/base/src/nsMsgAccountManagerDS.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgAccountManagerDS.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgAccountManagerDS.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgAccountManagerDS.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgAccountManagerDS.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgAccountManagerDS.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgDBView.cpp">mailnews/base/src/nsMsgDBView.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgDBView.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgDBView.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgDBView.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgDBView.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgDBView.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgFolderCompactor.cpp">mailnews/base/src/nsMsgFolderCompactor.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgFolderCompactor.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgFolderCompactor.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgFolderCompactor.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgFolderCompactor.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgFolderCompactor.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgFolderDataSource.cpp">mailnews/base/src/nsMsgFolderDataSource.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgFolderDataSource.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgFolderDataSource.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgFolderDataSource.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgFolderDataSource.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgFolderDataSource.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgOfflineManager.cpp">mailnews/base/src/nsMsgOfflineManager.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgOfflineManager.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgOfflineManager.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgOfflineManager.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgOfflineManager.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgOfflineManager.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgPrintEngine.cpp">mailnews/base/src/nsMsgPrintEngine.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgPrintEngine.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgPrintEngine.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgPrintEngine.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgPrintEngine.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgPrintEngine.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgStatusFeedback.cpp">mailnews/base/src/nsMsgStatusFeedback.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgStatusFeedback.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgStatusFeedback.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgStatusFeedback.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgStatusFeedback.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsMsgStatusFeedback.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsSpamSettings.cpp">mailnews/base/src/nsSpamSettings.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsSpamSettings.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsSpamSettings.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsSpamSettings.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsSpamSettings.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/src/nsSpamSettings.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgDBFolder.cpp">mailnews/base/util/nsMsgDBFolder.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgDBFolder.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgDBFolder.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgDBFolder.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgDBFolder.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgDBFolder.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgIncomingServer.cpp">mailnews/base/util/nsMsgIncomingServer.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgIncomingServer.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgIncomingServer.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgIncomingServer.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgIncomingServer.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgIncomingServer.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgProtocol.cpp">mailnews/base/util/nsMsgProtocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgProtocol.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgProtocol.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgProtocol.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgProtocol.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgProtocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgUtils.cpp">mailnews/base/util/nsMsgUtils.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgUtils.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgUtils.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgUtils.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgUtils.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/base/util/nsMsgUtils.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsComposeStrings.cpp">mailnews/compose/src/nsComposeStrings.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsComposeStrings.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsComposeStrings.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsComposeStrings.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsComposeStrings.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsComposeStrings.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsComposeStrings.h">mailnews/compose/src/nsComposeStrings.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsComposeStrings.h">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsComposeStrings.h">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsComposeStrings.h">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsComposeStrings.h">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsComposeStrings.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgAttachmentHandler.cpp">mailnews/compose/src/nsMsgAttachmentHandler.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgAttachmentHandler.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgAttachmentHandler.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgAttachmentHandler.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgAttachmentHandler.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgAttachmentHandler.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgCompUtils.cpp">mailnews/compose/src/nsMsgCompUtils.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgCompUtils.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgCompUtils.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgCompUtils.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgCompUtils.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgCompUtils.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgCompose.cpp">mailnews/compose/src/nsMsgCompose.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgCompose.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgCompose.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgCompose.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgCompose.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgCompose.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgPrompts.cpp">mailnews/compose/src/nsMsgPrompts.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgPrompts.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgPrompts.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgPrompts.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgPrompts.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgPrompts.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgPrompts.h">mailnews/compose/src/nsMsgPrompts.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgPrompts.h">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgPrompts.h">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgPrompts.h">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgPrompts.h">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgPrompts.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSend.cpp">mailnews/compose/src/nsMsgSend.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSend.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSend.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSend.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSend.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSend.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSend.h">mailnews/compose/src/nsMsgSend.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSend.h">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSend.h">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSend.h">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSend.h">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSend.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSendLater.cpp">mailnews/compose/src/nsMsgSendLater.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSendLater.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSendLater.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSendLater.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSendLater.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSendLater.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSendReport.cpp">mailnews/compose/src/nsMsgSendReport.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSendReport.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSendReport.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSendReport.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSendReport.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsMsgSendReport.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsSmtpProtocol.cpp">mailnews/compose/src/nsSmtpProtocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsSmtpProtocol.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsSmtpProtocol.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsSmtpProtocol.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsSmtpProtocol.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsSmtpProtocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsSmtpProtocol.h">mailnews/compose/src/nsSmtpProtocol.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsSmtpProtocol.h">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsSmtpProtocol.h">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsSmtpProtocol.h">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsSmtpProtocol.h">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/compose/src/nsSmtpProtocol.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp">mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/mdn/src/nsMsgMdnGenerator.h">mailnews/extensions/mdn/src/nsMsgMdnGenerator.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/mdn/src/nsMsgMdnGenerator.h">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/mdn/src/nsMsgMdnGenerator.h">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/mdn/src/nsMsgMdnGenerator.h">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/mdn/src/nsMsgMdnGenerator.h">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/mdn/src/nsMsgMdnGenerator.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">mailnews/extensions/smime/src/nsMsgComposeSecure.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/smime/src/nsMsgComposeSecure.h">mailnews/extensions/smime/src/nsMsgComposeSecure.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/smime/src/nsMsgComposeSecure.h">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/smime/src/nsMsgComposeSecure.h">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/smime/src/nsMsgComposeSecure.h">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/smime/src/nsMsgComposeSecure.h">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/extensions/smime/src/nsMsgComposeSecure.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapIncomingServer.cpp">mailnews/imap/src/nsImapIncomingServer.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapIncomingServer.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapIncomingServer.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapIncomingServer.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapIncomingServer.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapIncomingServer.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapMailFolder.cpp">mailnews/imap/src/nsImapMailFolder.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapMailFolder.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapMailFolder.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapMailFolder.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapMailFolder.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapMailFolder.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapProtocol.cpp">mailnews/imap/src/nsImapProtocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapProtocol.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapProtocol.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapProtocol.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapProtocol.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapProtocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapProtocol.h">mailnews/imap/src/nsImapProtocol.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapProtocol.h">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapProtocol.h">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapProtocol.h">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapProtocol.h">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapProtocol.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapService.cpp">mailnews/imap/src/nsImapService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapService.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapService.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapService.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapService.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapService.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapStringBundle.cpp">mailnews/imap/src/nsImapStringBundle.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapStringBundle.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapStringBundle.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapStringBundle.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapStringBundle.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/imap/src/nsImapStringBundle.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/applemail/src/nsAppleMailImport.cpp">mailnews/import/applemail/src/nsAppleMailImport.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/applemail/src/nsAppleMailImport.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/applemail/src/nsAppleMailImport.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/applemail/src/nsAppleMailImport.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/applemail/src/nsAppleMailImport.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/applemail/src/nsAppleMailImport.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/becky/src/nsBeckyMail.cpp">mailnews/import/becky/src/nsBeckyMail.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/becky/src/nsBeckyMail.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/becky/src/nsBeckyMail.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/becky/src/nsBeckyMail.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/becky/src/nsBeckyMail.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/becky/src/nsBeckyMail.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/becky/src/nsBeckyStringBundle.cpp">mailnews/import/becky/src/nsBeckyStringBundle.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/becky/src/nsBeckyStringBundle.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/becky/src/nsBeckyStringBundle.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/becky/src/nsBeckyStringBundle.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/becky/src/nsBeckyStringBundle.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/becky/src/nsBeckyStringBundle.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/becky/src/nsBeckyStringBundle.h">mailnews/import/becky/src/nsBeckyStringBundle.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/becky/src/nsBeckyStringBundle.h">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/becky/src/nsBeckyStringBundle.h">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/becky/src/nsBeckyStringBundle.h">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/becky/src/nsBeckyStringBundle.h">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/becky/src/nsBeckyStringBundle.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/src/nsImportMail.cpp">mailnews/import/src/nsImportMail.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/src/nsImportMail.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/src/nsImportMail.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/src/nsImportMail.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/src/nsImportMail.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/src/nsImportMail.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/src/nsImportStringBundle.cpp">mailnews/import/src/nsImportStringBundle.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/src/nsImportStringBundle.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/src/nsImportStringBundle.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/src/nsImportStringBundle.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/src/nsImportStringBundle.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/import/src/nsImportStringBundle.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/intl/nsCharsetConverterManager.cpp">mailnews/intl/nsCharsetConverterManager.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/intl/nsCharsetConverterManager.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/intl/nsCharsetConverterManager.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/intl/nsCharsetConverterManager.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/intl/nsCharsetConverterManager.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/intl/nsCharsetConverterManager.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsLocalMailFolder.cpp">mailnews/local/src/nsLocalMailFolder.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsLocalMailFolder.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsLocalMailFolder.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsLocalMailFolder.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsLocalMailFolder.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsLocalMailFolder.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsMovemailService.cpp">mailnews/local/src/nsMovemailService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsMovemailService.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsMovemailService.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsMovemailService.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsMovemailService.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsMovemailService.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsParseMailbox.cpp">mailnews/local/src/nsParseMailbox.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsParseMailbox.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsParseMailbox.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsParseMailbox.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsParseMailbox.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsParseMailbox.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Protocol.cpp">mailnews/local/src/nsPop3Protocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Protocol.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Protocol.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Protocol.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Protocol.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Protocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Protocol.h">mailnews/local/src/nsPop3Protocol.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Protocol.h">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Protocol.h">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Protocol.h">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Protocol.h">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Protocol.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Service.cpp">mailnews/local/src/nsPop3Service.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Service.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Service.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Service.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Service.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Service.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Sink.cpp">mailnews/local/src/nsPop3Sink.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Sink.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Sink.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Sink.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Sink.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/local/src/nsPop3Sink.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mapi/mapihook/src/msgMapiHook.cpp">mailnews/mapi/mapihook/src/msgMapiHook.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mapi/mapihook/src/msgMapiHook.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mapi/mapihook/src/msgMapiHook.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mapi/mapihook/src/msgMapiHook.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mapi/mapihook/src/msgMapiHook.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mapi/mapihook/src/msgMapiHook.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/cthandlers/pgpmime/nsPgpMimeProxy.cpp">mailnews/mime/cthandlers/pgpmime/nsPgpMimeProxy.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/cthandlers/pgpmime/nsPgpMimeProxy.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/cthandlers/pgpmime/nsPgpMimeProxy.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/cthandlers/pgpmime/nsPgpMimeProxy.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/cthandlers/pgpmime/nsPgpMimeProxy.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/cthandlers/pgpmime/nsPgpMimeProxy.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/emitters/nsMimeBaseEmitter.cpp">mailnews/mime/emitters/nsMimeBaseEmitter.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/emitters/nsMimeBaseEmitter.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/emitters/nsMimeBaseEmitter.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/emitters/nsMimeBaseEmitter.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/emitters/nsMimeBaseEmitter.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/emitters/nsMimeBaseEmitter.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/emitters/nsMimeHtmlEmitter.cpp">mailnews/mime/emitters/nsMimeHtmlEmitter.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/emitters/nsMimeHtmlEmitter.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/emitters/nsMimeHtmlEmitter.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/emitters/nsMimeHtmlEmitter.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/emitters/nsMimeHtmlEmitter.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/emitters/nsMimeHtmlEmitter.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/src/mimemoz2.cpp">mailnews/mime/src/mimemoz2.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/src/mimemoz2.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/src/mimemoz2.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/src/mimemoz2.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/src/mimemoz2.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/mime/src/mimemoz2.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNNTPNewsgroupList.cpp">mailnews/news/src/nsNNTPNewsgroupList.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNNTPNewsgroupList.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNNTPNewsgroupList.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNNTPNewsgroupList.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNNTPNewsgroupList.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNNTPNewsgroupList.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNNTPProtocol.cpp">mailnews/news/src/nsNNTPProtocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNNTPProtocol.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNNTPProtocol.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNNTPProtocol.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNNTPProtocol.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNNTPProtocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNewsDownloader.cpp">mailnews/news/src/nsNewsDownloader.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNewsDownloader.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNewsDownloader.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNewsDownloader.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNewsDownloader.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNewsDownloader.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNewsFolder.cpp">mailnews/news/src/nsNewsFolder.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNewsFolder.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNewsFolder.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNewsFolder.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNewsFolder.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNewsFolder.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNntpIncomingServer.cpp">mailnews/news/src/nsNntpIncomingServer.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNntpIncomingServer.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNntpIncomingServer.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNntpIncomingServer.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNntpIncomingServer.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/mailnews/news/src/nsNntpIncomingServer.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/suite/shell/src/nsGNOMEShellService.cpp">suite/shell/src/nsGNOMEShellService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/suite/shell/src/nsGNOMEShellService.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/suite/shell/src/nsGNOMEShellService.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/suite/shell/src/nsGNOMEShellService.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/suite/shell/src/nsGNOMEShellService.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/suite/shell/src/nsGNOMEShellService.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/suite/shell/src/nsWindowsShellService.cpp">suite/shell/src/nsWindowsShellService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/suite/shell/src/nsWindowsShellService.cpp">file</a> |
<a href="/comm-central/annotate/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/suite/shell/src/nsWindowsShellService.cpp">annotate</a> |
<a href="/comm-central/diff/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/suite/shell/src/nsWindowsShellService.cpp">diff</a> |
<a href="/comm-central/comparison/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/suite/shell/src/nsWindowsShellService.cpp">comparison</a> |
<a href="/comm-central/log/9faaede6aff6823a8a9df248a4c275b3ac8c19c5/suite/shell/src/nsWindowsShellService.cpp">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/components/shell/nsMailGNOMEIntegration.cpp</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/components/shell/nsMailGNOMEIntegration.cpp</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -304,17 +304,17 @@ nsMailGNOMEIntegration::MakeDefault(cons</span>
<a href="#l1.4"></a><span id="l1.4">       mozilla::services::GetStringBundleService();</span>
<a href="#l1.5"></a><span id="l1.5">     NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l1.6"></a><span id="l1.6"> </span>
<a href="#l1.7"></a><span id="l1.7">     nsCOMPtr&lt;nsIStringBundle&gt; brandBundle;</span>
<a href="#l1.8"></a><span id="l1.8">     rv = bundleService-&gt;CreateBundle(BRAND_PROPERTIES, getter_AddRefs(brandBundle));</span>
<a href="#l1.9"></a><span id="l1.9">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11">     nsString brandShortName;</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-    brandBundle-&gt;GetStringFromName(u&quot;brandShortName&quot;,</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    brandBundle-&gt;GetStringFromName(&quot;brandShortName&quot;,</span>
<a href="#l1.14"></a><span id="l1.14">                                    getter_Copies(brandShortName));</span>
<a href="#l1.15"></a><span id="l1.15"> </span>
<a href="#l1.16"></a><span id="l1.16">     // use brandShortName as the application id.</span>
<a href="#l1.17"></a><span id="l1.17">     NS_ConvertUTF16toUTF8 id(brandShortName);</span>
<a href="#l1.18"></a><span id="l1.18"> </span>
<a href="#l1.19"></a><span id="l1.19">     nsCOMPtr&lt;nsIGIOMimeApp&gt; app;</span>
<a href="#l1.20"></a><span id="l1.20">     rv = giovfs-&gt;CreateAppFromCommand(mAppPath, id, getter_AddRefs(app));</span>
<a href="#l1.21"></a><span id="l1.21">     NS_ENSURE_SUCCESS(rv, rv);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbCardProperty.cpp</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbCardProperty.cpp</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -728,17 +728,17 @@ nsresult nsAbCardProperty::ConvertToBase</span>
<a href="#l2.4"></a><span id="l2.4">   // Get Address Book string and set it as title of XML document</span>
<a href="#l2.5"></a><span id="l2.5">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l2.6"></a><span id="l2.6">   nsCOMPtr&lt;nsIStringBundleService&gt; stringBundleService =</span>
<a href="#l2.7"></a><span id="l2.7">     mozilla::services::GetStringBundleService();</span>
<a href="#l2.8"></a><span id="l2.8">   if (stringBundleService) {</span>
<a href="#l2.9"></a><span id="l2.9">     rv = stringBundleService-&gt;CreateBundle(sAddrbookProperties, getter_AddRefs(bundle));</span>
<a href="#l2.10"></a><span id="l2.10">     if (NS_SUCCEEDED(rv)) {</span>
<a href="#l2.11"></a><span id="l2.11">       nsString addrBook;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-      rv = bundle-&gt;GetStringFromName(u&quot;addressBook&quot;, getter_Copies(addrBook));</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+      rv = bundle-&gt;GetStringFromName(&quot;addressBook&quot;, getter_Copies(addrBook));</span>
<a href="#l2.14"></a><span id="l2.14">       if (NS_SUCCEEDED(rv)) {</span>
<a href="#l2.15"></a><span id="l2.15">         xmlStr.AppendLiteral(&quot;&lt;title xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&quot;);</span>
<a href="#l2.16"></a><span id="l2.16">         xmlStr.Append(addrBook);</span>
<a href="#l2.17"></a><span id="l2.17">         xmlStr.AppendLiteral(&quot;&lt;/title&gt;\n&quot;);</span>
<a href="#l2.18"></a><span id="l2.18">       }</span>
<a href="#l2.19"></a><span id="l2.19">     }</span>
<a href="#l2.20"></a><span id="l2.20">   }</span>
<a href="#l2.21"></a><span id="l2.21"> </span>
<a href="#l2.22"></a><span id="l2.22" class="difflineat">@@ -820,17 +820,17 @@ nsresult nsAbCardProperty::ConvertToXMLP</span>
<a href="#l2.23"></a><span id="l2.23">   }</span>
<a href="#l2.24"></a><span id="l2.24">   else {</span>
<a href="#l2.25"></a><span id="l2.25">     rv = AppendSection(CUSTOM_ATTRS_ARRAY, sizeof(CUSTOM_ATTRS_ARRAY)/sizeof(AppendItem), NS_LITERAL_STRING(&quot;headingDescription&quot;),</span>
<a href="#l2.26"></a><span id="l2.26">          bundle, conv, xmlStr);</span>
<a href="#l2.27"></a><span id="l2.27"> </span>
<a href="#l2.28"></a><span id="l2.28">     xmlStr.AppendLiteral(&quot;&lt;section&gt;&lt;sectiontitle&gt;&quot;);</span>
<a href="#l2.29"></a><span id="l2.29"> </span>
<a href="#l2.30"></a><span id="l2.30">     nsString headingAddresses;</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-    rv = bundle-&gt;GetStringFromName(u&quot;headingAddresses&quot;, getter_Copies(headingAddresses));</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+    rv = bundle-&gt;GetStringFromName(&quot;headingAddresses&quot;, getter_Copies(headingAddresses));</span>
<a href="#l2.33"></a><span id="l2.33">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l2.34"></a><span id="l2.34"> </span>
<a href="#l2.35"></a><span id="l2.35">     xmlStr.Append(headingAddresses);</span>
<a href="#l2.36"></a><span id="l2.36">     xmlStr.AppendLiteral(&quot;&lt;/sectiontitle&gt;&quot;);</span>
<a href="#l2.37"></a><span id="l2.37"> </span>
<a href="#l2.38"></a><span id="l2.38">     nsCOMPtr&lt;nsIAbManager&gt; abManager = do_GetService(NS_ABMANAGER_CONTRACTID, &amp;rv);</span>
<a href="#l2.39"></a><span id="l2.39">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l2.40"></a><span id="l2.40"> </span>
<a href="#l2.41"></a><span id="l2.41" class="difflineat">@@ -908,17 +908,17 @@ nsresult nsAbCardProperty::AppendSection</span>
<a href="#l2.42"></a><span id="l2.42">   for (i=0;i&lt;aCount;i++) {</span>
<a href="#l2.43"></a><span id="l2.43">     rv = GetPropertyAsAString(aArray[i].mColumn, attrValue);</span>
<a href="#l2.44"></a><span id="l2.44">     if (NS_SUCCEEDED(rv) &amp;&amp; !attrValue.IsEmpty())</span>
<a href="#l2.45"></a><span id="l2.45">       sectionIsEmpty = false;</span>
<a href="#l2.46"></a><span id="l2.46">   }</span>
<a href="#l2.47"></a><span id="l2.47"> </span>
<a href="#l2.48"></a><span id="l2.48">   if (!sectionIsEmpty &amp;&amp; !aHeading.IsEmpty()) {</span>
<a href="#l2.49"></a><span id="l2.49">     nsString heading;</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineminus">-    rv = aBundle-&gt;GetStringFromName(aHeading.get(), getter_Copies(heading));</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineplus">+    rv = aBundle-&gt;GetStringFromName(NS_ConvertUTF16toUTF8(aHeading).get(), getter_Copies(heading));</span>
<a href="#l2.52"></a><span id="l2.52">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l2.53"></a><span id="l2.53"> </span>
<a href="#l2.54"></a><span id="l2.54">     aResult.AppendLiteral(&quot;&lt;sectiontitle&gt;&quot;);</span>
<a href="#l2.55"></a><span id="l2.55">     aResult.Append(heading);</span>
<a href="#l2.56"></a><span id="l2.56">     aResult.AppendLiteral(&quot;&lt;/sectiontitle&gt;&quot;);</span>
<a href="#l2.57"></a><span id="l2.57">   }</span>
<a href="#l2.58"></a><span id="l2.58"> </span>
<a href="#l2.59"></a><span id="l2.59">   for (i=0;i&lt;aCount;i++) {</span>
<a href="#l2.60"></a><span id="l2.60" class="difflineat">@@ -986,17 +986,17 @@ nsresult nsAbCardProperty::AppendLabel(c</span>
<a href="#l2.61"></a><span id="l2.61">   nsresult rv;</span>
<a href="#l2.62"></a><span id="l2.62">   nsString label, attrValue;</span>
<a href="#l2.63"></a><span id="l2.63"> </span>
<a href="#l2.64"></a><span id="l2.64">   rv = GetPropertyAsAString(aItem.mColumn, attrValue);</span>
<a href="#l2.65"></a><span id="l2.65"> </span>
<a href="#l2.66"></a><span id="l2.66">   if (NS_FAILED(rv) || attrValue.IsEmpty())</span>
<a href="#l2.67"></a><span id="l2.67">     return NS_OK;</span>
<a href="#l2.68"></a><span id="l2.68"> </span>
<a href="#l2.69"></a><span id="l2.69" class="difflineminus">-  rv = aBundle-&gt;GetStringFromName(NS_ConvertUTF8toUTF16(aItem.mLabel).get(), getter_Copies(label));</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineplus">+  rv = aBundle-&gt;GetStringFromName(aItem.mLabel, getter_Copies(label));</span>
<a href="#l2.71"></a><span id="l2.71">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l2.72"></a><span id="l2.72"> </span>
<a href="#l2.73"></a><span id="l2.73">   aResult.AppendLiteral(&quot;&lt;labelrow&gt;&lt;label&gt;&quot;);</span>
<a href="#l2.74"></a><span id="l2.74"> </span>
<a href="#l2.75"></a><span id="l2.75">   aResult.Append(label);</span>
<a href="#l2.76"></a><span id="l2.76">   aResult.AppendLiteral(&quot;: &lt;/label&gt;&quot;);</span>
<a href="#l2.77"></a><span id="l2.77"> </span>
<a href="#l2.78"></a><span id="l2.78">   rv = AppendLine(aItem, aConv, aResult);</span>
<a href="#l2.79"></a><span id="l2.79" class="difflineat">@@ -1043,28 +1043,28 @@ nsresult nsAbCardProperty::AppendCitySta</span>
<a href="#l2.80"></a><span id="l2.80"> </span>
<a href="#l2.81"></a><span id="l2.81">   rv = AppendLine(item, aConv, zipResult);</span>
<a href="#l2.82"></a><span id="l2.82">   NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l2.83"></a><span id="l2.83"> </span>
<a href="#l2.84"></a><span id="l2.84">   nsString formattedString;</span>
<a href="#l2.85"></a><span id="l2.85"> </span>
<a href="#l2.86"></a><span id="l2.86">   if (!cityResult.IsEmpty() &amp;&amp; !stateResult.IsEmpty() &amp;&amp; !zipResult.IsEmpty()) {</span>
<a href="#l2.87"></a><span id="l2.87">     const char16_t *formatStrings[] = { cityResult.get(), stateResult.get(), zipResult.get() };</span>
<a href="#l2.88"></a><span id="l2.88" class="difflineminus">-    rv = aBundle-&gt;FormatStringFromName(u&quot;cityAndStateAndZip&quot;, formatStrings, ArrayLength(formatStrings), getter_Copies(formattedString));</span>
<a href="#l2.89"></a><span id="l2.89" class="difflineplus">+    rv = aBundle-&gt;FormatStringFromName(&quot;cityAndStateAndZip&quot;, formatStrings, ArrayLength(formatStrings), getter_Copies(formattedString));</span>
<a href="#l2.90"></a><span id="l2.90">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l2.91"></a><span id="l2.91">   }</span>
<a href="#l2.92"></a><span id="l2.92">   else if (!cityResult.IsEmpty() &amp;&amp; !stateResult.IsEmpty() &amp;&amp; zipResult.IsEmpty()) {</span>
<a href="#l2.93"></a><span id="l2.93">     const char16_t *formatStrings[] = { cityResult.get(), stateResult.get() };</span>
<a href="#l2.94"></a><span id="l2.94" class="difflineminus">-    rv = aBundle-&gt;FormatStringFromName(u&quot;cityAndStateNoZip&quot;, formatStrings, ArrayLength(formatStrings), getter_Copies(formattedString));</span>
<a href="#l2.95"></a><span id="l2.95" class="difflineplus">+    rv = aBundle-&gt;FormatStringFromName(&quot;cityAndStateNoZip&quot;, formatStrings, ArrayLength(formatStrings), getter_Copies(formattedString));</span>
<a href="#l2.96"></a><span id="l2.96">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l2.97"></a><span id="l2.97">   }</span>
<a href="#l2.98"></a><span id="l2.98">   else if ((!cityResult.IsEmpty() &amp;&amp; stateResult.IsEmpty() &amp;&amp; !zipResult.IsEmpty()) ||</span>
<a href="#l2.99"></a><span id="l2.99">           (cityResult.IsEmpty() &amp;&amp; !stateResult.IsEmpty() &amp;&amp; !zipResult.IsEmpty())) {</span>
<a href="#l2.100"></a><span id="l2.100">     const char16_t *formatStrings[] = { cityResult.IsEmpty() ? stateResult.get() : cityResult.get(), zipResult.get() };</span>
<a href="#l2.101"></a><span id="l2.101" class="difflineminus">-    rv = aBundle-&gt;FormatStringFromName(u&quot;cityOrStateAndZip&quot;, formatStrings, ArrayLength(formatStrings), getter_Copies(formattedString));</span>
<a href="#l2.102"></a><span id="l2.102" class="difflineplus">+    rv = aBundle-&gt;FormatStringFromName(&quot;cityOrStateAndZip&quot;, formatStrings, ArrayLength(formatStrings), getter_Copies(formattedString));</span>
<a href="#l2.103"></a><span id="l2.103">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l2.104"></a><span id="l2.104">   }</span>
<a href="#l2.105"></a><span id="l2.105">   else {</span>
<a href="#l2.106"></a><span id="l2.106">     if (!cityResult.IsEmpty())</span>
<a href="#l2.107"></a><span id="l2.107">       formattedString = cityResult;</span>
<a href="#l2.108"></a><span id="l2.108">     else if (!stateResult.IsEmpty())</span>
<a href="#l2.109"></a><span id="l2.109">       formattedString = stateResult;</span>
<a href="#l2.110"></a><span id="l2.110">     else</span>
<a href="#l2.111"></a><span id="l2.111" class="difflineat">@@ -1108,23 +1108,23 @@ NS_IMETHODIMP nsAbCardProperty::Generate</span>
<a href="#l2.112"></a><span id="l2.112">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l2.113"></a><span id="l2.113">     }</span>
<a href="#l2.114"></a><span id="l2.114"> </span>
<a href="#l2.115"></a><span id="l2.115">     nsString result;</span>
<a href="#l2.116"></a><span id="l2.116"> </span>
<a href="#l2.117"></a><span id="l2.117">     if (aGenerateFormat == GENERATE_LAST_FIRST_ORDER) {</span>
<a href="#l2.118"></a><span id="l2.118">       const char16_t *stringParams[2] = {lastName.get(), firstName.get()};</span>
<a href="#l2.119"></a><span id="l2.119"> </span>
<a href="#l2.120"></a><span id="l2.120" class="difflineminus">-      rv = bundle-&gt;FormatStringFromName(u&quot;lastFirstFormat&quot;,</span>
<a href="#l2.121"></a><span id="l2.121" class="difflineplus">+      rv = bundle-&gt;FormatStringFromName(&quot;lastFirstFormat&quot;,</span>
<a href="#l2.122"></a><span id="l2.122">                                         stringParams, 2, getter_Copies(result));</span>
<a href="#l2.123"></a><span id="l2.123">     }</span>
<a href="#l2.124"></a><span id="l2.124">     else {</span>
<a href="#l2.125"></a><span id="l2.125">       const char16_t *stringParams[2] = {firstName.get(), lastName.get()};</span>
<a href="#l2.126"></a><span id="l2.126"> </span>
<a href="#l2.127"></a><span id="l2.127" class="difflineminus">-      rv = bundle-&gt;FormatStringFromName(u&quot;firstLastFormat&quot;,</span>
<a href="#l2.128"></a><span id="l2.128" class="difflineplus">+      rv = bundle-&gt;FormatStringFromName(&quot;firstLastFormat&quot;,</span>
<a href="#l2.129"></a><span id="l2.129">                                         stringParams, 2, getter_Copies(result));</span>
<a href="#l2.130"></a><span id="l2.130">     }</span>
<a href="#l2.131"></a><span id="l2.131">     NS_ENSURE_SUCCESS(rv, rv); </span>
<a href="#l2.132"></a><span id="l2.132"> </span>
<a href="#l2.133"></a><span id="l2.133">     aResult.Assign(result);</span>
<a href="#l2.134"></a><span id="l2.134">   }</span>
<a href="#l2.135"></a><span id="l2.135"> </span>
<a href="#l2.136"></a><span id="l2.136">   if (aResult.IsEmpty())</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -256,22 +256,22 @@ nsresult nsAbLDAPProcessChangeLogData::G</span>
<a href="#l3.4"></a><span id="l3.4">       mozilla::services::GetStringBundleService();</span>
<a href="#l3.5"></a><span id="l3.5">     NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l3.6"></a><span id="l3.6">     nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l3.7"></a><span id="l3.7">     rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/addressbook/addressBook.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l3.8"></a><span id="l3.8">     if (NS_FAILED (rv)) </span>
<a href="#l3.9"></a><span id="l3.9">         return rv ;</span>
<a href="#l3.10"></a><span id="l3.10"> </span>
<a href="#l3.11"></a><span id="l3.11">     nsString title;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-    rv = bundle-&gt;GetStringFromName(u&quot;AuthDlgTitle&quot;, getter_Copies(title));</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+    rv = bundle-&gt;GetStringFromName(&quot;AuthDlgTitle&quot;, getter_Copies(title));</span>
<a href="#l3.14"></a><span id="l3.14">     if (NS_FAILED (rv)) </span>
<a href="#l3.15"></a><span id="l3.15">         return rv ;</span>
<a href="#l3.16"></a><span id="l3.16"> </span>
<a href="#l3.17"></a><span id="l3.17">     nsString desc;</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineminus">-    rv = bundle-&gt;GetStringFromName(u&quot;AuthDlgDesc&quot;, getter_Copies(desc));</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+    rv = bundle-&gt;GetStringFromName(&quot;AuthDlgDesc&quot;, getter_Copies(desc));</span>
<a href="#l3.20"></a><span id="l3.20">     if (NS_FAILED (rv)) </span>
<a href="#l3.21"></a><span id="l3.21">         return rv ;</span>
<a href="#l3.22"></a><span id="l3.22"> </span>
<a href="#l3.23"></a><span id="l3.23">     nsString username;</span>
<a href="#l3.24"></a><span id="l3.24">     nsString password;</span>
<a href="#l3.25"></a><span id="l3.25">     bool btnResult = false;</span>
<a href="#l3.26"></a><span id="l3.26"> 	rv = dialog-&gt;PromptUsernameAndPassword(title, desc, </span>
<a href="#l3.27"></a><span id="l3.27">                                             NS_ConvertUTF8toUTF16(serverUri).get(), </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbLDAPListenerBase.cpp</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbLDAPListenerBase.cpp</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -95,17 +95,17 @@ NS_IMETHODIMP nsAbLDAPListenerBase::OnLD</span>
<a href="#l4.4"></a><span id="l4.4">                &quot;bundle chrome://mozldap/locale/ldap.properties&quot;);</span>
<a href="#l4.5"></a><span id="l4.5">       InitFailed();</span>
<a href="#l4.6"></a><span id="l4.6">       return rv;</span>
<a href="#l4.7"></a><span id="l4.7">     }</span>
<a href="#l4.8"></a><span id="l4.8"> </span>
<a href="#l4.9"></a><span id="l4.9">     // get the title for the authentication prompt</span>
<a href="#l4.10"></a><span id="l4.10">     //</span>
<a href="#l4.11"></a><span id="l4.11">     nsString authPromptTitle;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-    rv = ldapBundle-&gt;GetStringFromName(u&quot;authPromptTitle&quot;,</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+    rv = ldapBundle-&gt;GetStringFromName(&quot;authPromptTitle&quot;,</span>
<a href="#l4.14"></a><span id="l4.14">                                        getter_Copies(authPromptTitle));</span>
<a href="#l4.15"></a><span id="l4.15">     if (NS_FAILED(rv))</span>
<a href="#l4.16"></a><span id="l4.16">     {</span>
<a href="#l4.17"></a><span id="l4.17">       NS_ERROR(&quot;nsAbLDAPListenerBase::OnLDAPInit(): error getting&quot;</span>
<a href="#l4.18"></a><span id="l4.18">                &quot;'authPromptTitle' string from bundle &quot;</span>
<a href="#l4.19"></a><span id="l4.19">                &quot;chrome://mozldap/locale/ldap.properties&quot;);</span>
<a href="#l4.20"></a><span id="l4.20">       InitFailed();</span>
<a href="#l4.21"></a><span id="l4.21">       return rv;</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineat">@@ -128,17 +128,17 @@ NS_IMETHODIMP nsAbLDAPListenerBase::OnLD</span>
<a href="#l4.23"></a><span id="l4.23">     // which is the default compiler for Mozilla on linux at the moment.</span>
<a href="#l4.24"></a><span id="l4.24">     //</span>
<a href="#l4.25"></a><span id="l4.25">     NS_ConvertASCIItoUTF16 hostTemp(host);</span>
<a href="#l4.26"></a><span id="l4.26">     const char16_t *hostArray[1] = { hostTemp.get() };</span>
<a href="#l4.27"></a><span id="l4.27"> </span>
<a href="#l4.28"></a><span id="l4.28">     // format the hostname into the authprompt text string</span>
<a href="#l4.29"></a><span id="l4.29">     //</span>
<a href="#l4.30"></a><span id="l4.30">     nsString authPromptText;</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">-    rv = ldapBundle-&gt;FormatStringFromName(u&quot;authPromptText&quot;,</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+    rv = ldapBundle-&gt;FormatStringFromName(&quot;authPromptText&quot;,</span>
<a href="#l4.33"></a><span id="l4.33">                                           hostArray,</span>
<a href="#l4.34"></a><span id="l4.34">                                           sizeof(hostArray) / sizeof(const char16_t *),</span>
<a href="#l4.35"></a><span id="l4.35">                                           getter_Copies(authPromptText));</span>
<a href="#l4.36"></a><span id="l4.36">     if (NS_FAILED(rv))</span>
<a href="#l4.37"></a><span id="l4.37">     {</span>
<a href="#l4.38"></a><span id="l4.38">       NS_ERROR(&quot;nsAbLDAPListenerBase::OnLDAPInit():&quot;</span>
<a href="#l4.39"></a><span id="l4.39">                &quot;error getting 'authPromptText' string from bundle &quot;</span>
<a href="#l4.40"></a><span id="l4.40">                &quot;chrome://mozldap/locale/ldap.properties&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbManager.cpp</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbManager.cpp</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -539,53 +539,53 @@ NS_IMETHODIMP nsAbManager::ExportAddress</span>
<a href="#l5.4"></a><span id="l5.4">   rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/addressbook/addressBook.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l5.5"></a><span id="l5.5">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l5.6"></a><span id="l5.6"> </span>
<a href="#l5.7"></a><span id="l5.7">   nsString dirName;</span>
<a href="#l5.8"></a><span id="l5.8">   aDirectory-&gt;GetDirName(dirName);</span>
<a href="#l5.9"></a><span id="l5.9">   const char16_t *formatStrings[] = { dirName.get() };</span>
<a href="#l5.10"></a><span id="l5.10"> </span>
<a href="#l5.11"></a><span id="l5.11">   nsString title;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-  rv = bundle-&gt;FormatStringFromName(u&quot;ExportAddressBookNameTitle&quot;, formatStrings,</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+  rv = bundle-&gt;FormatStringFromName(&quot;ExportAddressBookNameTitle&quot;, formatStrings,</span>
<a href="#l5.14"></a><span id="l5.14">                                     ArrayLength(formatStrings), getter_Copies(title));</span>
<a href="#l5.15"></a><span id="l5.15">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l5.16"></a><span id="l5.16"> </span>
<a href="#l5.17"></a><span id="l5.17">   rv = filePicker-&gt;Init(aParentWin, title, nsIFilePicker::modeSave);</span>
<a href="#l5.18"></a><span id="l5.18">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l5.19"></a><span id="l5.19"> </span>
<a href="#l5.20"></a><span id="l5.20">   filePicker-&gt;SetDefaultString(dirName);</span>
<a href="#l5.21"></a><span id="l5.21"> </span>
<a href="#l5.22"></a><span id="l5.22">   nsString filterString;</span>
<a href="#l5.23"></a><span id="l5.23"> </span>
<a href="#l5.24"></a><span id="l5.24">   // CSV: System charset and UTF-8.</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineminus">-  rv = bundle-&gt;GetStringFromName(u&quot;CSVFilesSysCharset&quot;, getter_Copies(filterString));</span>
<a href="#l5.26"></a><span id="l5.26" class="difflineplus">+  rv = bundle-&gt;GetStringFromName(&quot;CSVFilesSysCharset&quot;, getter_Copies(filterString));</span>
<a href="#l5.27"></a><span id="l5.27">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l5.28"></a><span id="l5.28">   rv = filePicker-&gt;AppendFilter(filterString, NS_LITERAL_STRING(&quot;*.csv&quot;));</span>
<a href="#l5.29"></a><span id="l5.29">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l5.30"></a><span id="l5.30" class="difflineminus">-  rv = bundle-&gt;GetStringFromName(u&quot;CSVFilesUTF8&quot;, getter_Copies(filterString));</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineplus">+  rv = bundle-&gt;GetStringFromName(&quot;CSVFilesUTF8&quot;, getter_Copies(filterString));</span>
<a href="#l5.32"></a><span id="l5.32">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l5.33"></a><span id="l5.33">   rv = filePicker-&gt;AppendFilter(filterString, NS_LITERAL_STRING(&quot;*.csv&quot;));</span>
<a href="#l5.34"></a><span id="l5.34">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l5.35"></a><span id="l5.35"> </span>
<a href="#l5.36"></a><span id="l5.36">   // Tab separated: System charset and UTF-8.</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineminus">-  rv = bundle-&gt;GetStringFromName(u&quot;TABFilesSysCharset&quot;, getter_Copies(filterString));</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineplus">+  rv = bundle-&gt;GetStringFromName(&quot;TABFilesSysCharset&quot;, getter_Copies(filterString));</span>
<a href="#l5.39"></a><span id="l5.39">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l5.40"></a><span id="l5.40">   rv = filePicker-&gt;AppendFilter(filterString, NS_LITERAL_STRING(&quot;*.tab; *.txt&quot;));</span>
<a href="#l5.41"></a><span id="l5.41">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l5.42"></a><span id="l5.42" class="difflineminus">-  rv = bundle-&gt;GetStringFromName(u&quot;TABFilesUTF8&quot;, getter_Copies(filterString));</span>
<a href="#l5.43"></a><span id="l5.43" class="difflineplus">+  rv = bundle-&gt;GetStringFromName(&quot;TABFilesUTF8&quot;, getter_Copies(filterString));</span>
<a href="#l5.44"></a><span id="l5.44">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l5.45"></a><span id="l5.45">   rv = filePicker-&gt;AppendFilter(filterString, NS_LITERAL_STRING(&quot;*.tab; *.txt&quot;));</span>
<a href="#l5.46"></a><span id="l5.46">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l5.47"></a><span id="l5.47"> </span>
<a href="#l5.48"></a><span id="l5.48" class="difflineminus">-  rv = bundle-&gt;GetStringFromName(u&quot;VCFFiles&quot;, getter_Copies(filterString));</span>
<a href="#l5.49"></a><span id="l5.49" class="difflineplus">+  rv = bundle-&gt;GetStringFromName(&quot;VCFFiles&quot;, getter_Copies(filterString));</span>
<a href="#l5.50"></a><span id="l5.50">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l5.51"></a><span id="l5.51">   rv = filePicker-&gt;AppendFilter(filterString, NS_LITERAL_STRING(&quot;*.vcf&quot;));</span>
<a href="#l5.52"></a><span id="l5.52">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l5.53"></a><span id="l5.53"> </span>
<a href="#l5.54"></a><span id="l5.54" class="difflineminus">-  rv = bundle-&gt;GetStringFromName(u&quot;LDIFFiles&quot;, getter_Copies(filterString));</span>
<a href="#l5.55"></a><span id="l5.55" class="difflineplus">+  rv = bundle-&gt;GetStringFromName(&quot;LDIFFiles&quot;, getter_Copies(filterString));</span>
<a href="#l5.56"></a><span id="l5.56">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l5.57"></a><span id="l5.57">   rv = filePicker-&gt;AppendFilter(filterString, NS_LITERAL_STRING(&quot;*.ldi; *.ldif&quot;));</span>
<a href="#l5.58"></a><span id="l5.58">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l5.59"></a><span id="l5.59"> </span>
<a href="#l5.60"></a><span id="l5.60">   int16_t dialogResult;</span>
<a href="#l5.61"></a><span id="l5.61">   filePicker-&gt;Show(&amp;dialogResult);</span>
<a href="#l5.62"></a><span id="l5.62"> </span>
<a href="#l5.63"></a><span id="l5.63">   if (dialogResult == nsIFilePicker::returnCancel)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbView.cpp</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbView.cpp</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -1301,22 +1301,22 @@ NS_IMETHODIMP nsAbView::SwapFirstNameLas</span>
<a href="#l6.4"></a><span id="l6.4"> </span>
<a href="#l6.5"></a><span id="l6.5">           // Generate display name using the new order</span>
<a href="#l6.6"></a><span id="l6.6">           if (displayNameAutoGeneration &amp;&amp;</span>
<a href="#l6.7"></a><span id="l6.7">               !fn.IsEmpty() &amp;&amp; !ln.IsEmpty())</span>
<a href="#l6.8"></a><span id="l6.8">           {</span>
<a href="#l6.9"></a><span id="l6.9">             nsString dnLnFn;</span>
<a href="#l6.10"></a><span id="l6.10">             nsString dnFnLn;</span>
<a href="#l6.11"></a><span id="l6.11">             const char16_t *nameString[2];</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-            const char16_t *formatString;</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+            const char *formatString;</span>
<a href="#l6.14"></a><span id="l6.14"> </span>
<a href="#l6.15"></a><span id="l6.15">             // The format should stays the same before/after we swap the names</span>
<a href="#l6.16"></a><span id="l6.16">             formatString = displayNameLastnamefirst ?</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineminus">-                              u&quot;lastFirstFormat&quot; :</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineminus">-                              u&quot;firstLastFormat&quot;;</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineplus">+                              &quot;lastFirstFormat&quot; :</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineplus">+                              &quot;firstLastFormat&quot;;</span>
<a href="#l6.21"></a><span id="l6.21"> </span>
<a href="#l6.22"></a><span id="l6.22">             // Generate both ln/fn and fn/ln combination since we need both later</span>
<a href="#l6.23"></a><span id="l6.23">             // to check to see if the current display name was edited</span>
<a href="#l6.24"></a><span id="l6.24">             // note that fn/ln still hold the values before the swap</span>
<a href="#l6.25"></a><span id="l6.25">             nameString[0] = ln.get();</span>
<a href="#l6.26"></a><span id="l6.26">             nameString[1] = fn.get();</span>
<a href="#l6.27"></a><span id="l6.27">             rv = bundle-&gt;FormatStringFromName(formatString,</span>
<a href="#l6.28"></a><span id="l6.28">                                               nameString, 2, getter_Copies(dnLnFn));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAddbookProtocolHandler.cpp</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAddbookProtocolHandler.cpp</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -282,17 +282,17 @@ nsAddbookProtocolHandler::BuildDirectory</span>
<a href="#l7.4"></a><span id="l7.4">   // Get Address Book string and set it as title of XML document</span>
<a href="#l7.5"></a><span id="l7.5">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l7.6"></a><span id="l7.6">   nsCOMPtr&lt;nsIStringBundleService&gt; stringBundleService =</span>
<a href="#l7.7"></a><span id="l7.7">     mozilla::services::GetStringBundleService();</span>
<a href="#l7.8"></a><span id="l7.8">   if (stringBundleService) {</span>
<a href="#l7.9"></a><span id="l7.9">     rv = stringBundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/addressbook/addressBook.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l7.10"></a><span id="l7.10">     if (NS_SUCCEEDED(rv)) {</span>
<a href="#l7.11"></a><span id="l7.11">       nsString addrBook;</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-      rv = bundle-&gt;GetStringFromName(u&quot;addressBook&quot;, getter_Copies(addrBook));</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+      rv = bundle-&gt;GetStringFromName(&quot;addressBook&quot;, getter_Copies(addrBook));</span>
<a href="#l7.14"></a><span id="l7.14">       if (NS_SUCCEEDED(rv)) {</span>
<a href="#l7.15"></a><span id="l7.15">         aOutput.AppendLiteral(&quot;&lt;title xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&quot;);</span>
<a href="#l7.16"></a><span id="l7.16">         aOutput.Append(addrBook);</span>
<a href="#l7.17"></a><span id="l7.17">         aOutput.AppendLiteral(&quot;&lt;/title&gt;\n&quot;);</span>
<a href="#l7.18"></a><span id="l7.18">       }</span>
<a href="#l7.19"></a><span id="l7.19">     }</span>
<a href="#l7.20"></a><span id="l7.20">   }</span>
<a href="#l7.21"></a><span id="l7.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAddrDatabase.cpp</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAddrDatabase.cpp</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -406,22 +406,22 @@ nsresult nsAddrDatabase::DisplayAlert(co</span>
<a href="#l8.4"></a><span id="l8.4">     mozilla::services::GetStringBundleService();</span>
<a href="#l8.5"></a><span id="l8.5">   NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l8.6"></a><span id="l8.6"> </span>
<a href="#l8.7"></a><span id="l8.7">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l8.8"></a><span id="l8.8">   rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/addressbook/addressBook.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l8.9"></a><span id="l8.9">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l8.10"></a><span id="l8.10"> </span>
<a href="#l8.11"></a><span id="l8.11">   nsString alertMessage;</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-  rv = bundle-&gt;FormatStringFromName(alertStringName, formatStrings, numFormatStrings,</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+  rv = bundle-&gt;FormatStringFromName(NS_ConvertUTF16toUTF8(alertStringName).get(), formatStrings, numFormatStrings,</span>
<a href="#l8.14"></a><span id="l8.14">     getter_Copies(alertMessage));</span>
<a href="#l8.15"></a><span id="l8.15">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l8.16"></a><span id="l8.16"> </span>
<a href="#l8.17"></a><span id="l8.17">   nsString alertTitle;</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineminus">-  rv = bundle-&gt;GetStringFromName(titleName, getter_Copies(alertTitle));</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineplus">+  rv = bundle-&gt;GetStringFromName(NS_ConvertUTF16toUTF8(titleName).get(), getter_Copies(alertTitle));</span>
<a href="#l8.20"></a><span id="l8.20">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l8.21"></a><span id="l8.21"> </span>
<a href="#l8.22"></a><span id="l8.22">   nsCOMPtr&lt;nsIPromptService&gt; prompter =</span>
<a href="#l8.23"></a><span id="l8.23">       do_GetService(NS_PROMPTSERVICE_CONTRACTID, &amp;rv);</span>
<a href="#l8.24"></a><span id="l8.24">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l8.25"></a><span id="l8.25"> </span>
<a href="#l8.26"></a><span id="l8.26">   return prompter-&gt;Alert(nullptr /* we don't know the parent window */, alertTitle.get(), alertMessage.get());</span>
<a href="#l8.27"></a><span id="l8.27"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mailnews/base/search/src/nsMsgFilter.cpp</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mailnews/base/search/src/nsMsgFilter.cpp</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -572,28 +572,28 @@ nsMsgFilter::LogRuleHitGeneric(nsIMsgRul</span>
<a href="#l9.4"></a><span id="l9.4">       PR_snprintf(tcode, sizeof(tcode), &quot;0x%08x&quot;, aRcode);</span>
<a href="#l9.5"></a><span id="l9.5"> </span>
<a href="#l9.6"></a><span id="l9.6">       NS_ConvertASCIItoUTF16 tcode16(tcode) ;</span>
<a href="#l9.7"></a><span id="l9.7">       NS_ConvertASCIItoUTF16 tErrmsg16(aErrmsg) ;</span>
<a href="#l9.8"></a><span id="l9.8"> </span>
<a href="#l9.9"></a><span id="l9.9">       const char16_t *logErrorFormatStrings[2] = { tErrmsg16.get(),  tcode16.get()};</span>
<a href="#l9.10"></a><span id="l9.10">       nsString filterFailureWarningPrefix;</span>
<a href="#l9.11"></a><span id="l9.11">       rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-                      u&quot;filterFailureWarningPrefix&quot;,</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+                      &quot;filterFailureWarningPrefix&quot;,</span>
<a href="#l9.14"></a><span id="l9.14">                       logErrorFormatStrings, 2,</span>
<a href="#l9.15"></a><span id="l9.15">                       getter_Copies(filterFailureWarningPrefix));</span>
<a href="#l9.16"></a><span id="l9.16">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l9.17"></a><span id="l9.17">       buffer += NS_ConvertUTF16toUTF8(filterFailureWarningPrefix);</span>
<a href="#l9.18"></a><span id="l9.18">       buffer += &quot;\n&quot;;</span>
<a href="#l9.19"></a><span id="l9.19">     }</span>
<a href="#l9.20"></a><span id="l9.20"> </span>
<a href="#l9.21"></a><span id="l9.21">     const char16_t *filterLogDetectFormatStrings[4] = { filterName.get(), authorValue.get(), subjectValue.get(), dateValue.get() };</span>
<a href="#l9.22"></a><span id="l9.22">     nsString filterLogDetectStr;</span>
<a href="#l9.23"></a><span id="l9.23">     rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineminus">-      u&quot;filterLogDetectStr&quot;,</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineplus">+      &quot;filterLogDetectStr&quot;,</span>
<a href="#l9.26"></a><span id="l9.26">       filterLogDetectFormatStrings, 4,</span>
<a href="#l9.27"></a><span id="l9.27">       getter_Copies(filterLogDetectStr));</span>
<a href="#l9.28"></a><span id="l9.28">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l9.29"></a><span id="l9.29"> </span>
<a href="#l9.30"></a><span id="l9.30">     buffer += NS_ConvertUTF16toUTF8(filterLogDetectStr);</span>
<a href="#l9.31"></a><span id="l9.31">     buffer +=  &quot;\n&quot;;</span>
<a href="#l9.32"></a><span id="l9.32"> </span>
<a href="#l9.33"></a><span id="l9.33">     if (actionType == nsMsgFilterAction::MoveToFolder ||</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineat">@@ -606,41 +606,41 @@ nsMsgFilter::LogRuleHitGeneric(nsIMsgRul</span>
<a href="#l9.35"></a><span id="l9.35">       nsCString msgId;</span>
<a href="#l9.36"></a><span id="l9.36">       aMsgHdr-&gt;GetMessageId(getter_Copies(msgId));</span>
<a href="#l9.37"></a><span id="l9.37">       NS_ConvertASCIItoUTF16 msgIdValue(msgId);</span>
<a href="#l9.38"></a><span id="l9.38"> </span>
<a href="#l9.39"></a><span id="l9.39">       const char16_t *logMoveFormatStrings[2] = { msgIdValue.get(), actionFolderUriValue.get() };</span>
<a href="#l9.40"></a><span id="l9.40">       nsString logMoveStr;</span>
<a href="#l9.41"></a><span id="l9.41">       rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l9.42"></a><span id="l9.42">         (actionType == nsMsgFilterAction::MoveToFolder) ?</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineminus">-          u&quot;logMoveStr&quot; : u&quot;logCopyStr&quot;,</span>
<a href="#l9.44"></a><span id="l9.44" class="difflineplus">+          &quot;logMoveStr&quot; : &quot;logCopyStr&quot;,</span>
<a href="#l9.45"></a><span id="l9.45">         logMoveFormatStrings, 2,</span>
<a href="#l9.46"></a><span id="l9.46">         getter_Copies(logMoveStr));</span>
<a href="#l9.47"></a><span id="l9.47">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l9.48"></a><span id="l9.48"> </span>
<a href="#l9.49"></a><span id="l9.49">       buffer += NS_ConvertUTF16toUTF8(logMoveStr);</span>
<a href="#l9.50"></a><span id="l9.50">     }</span>
<a href="#l9.51"></a><span id="l9.51">     else if (actionType == nsMsgFilterAction::Custom)</span>
<a href="#l9.52"></a><span id="l9.52">     {</span>
<a href="#l9.53"></a><span id="l9.53">       nsCOMPtr&lt;nsIMsgFilterCustomAction&gt; customAction;</span>
<a href="#l9.54"></a><span id="l9.54">       nsAutoString filterActionName;</span>
<a href="#l9.55"></a><span id="l9.55">       rv = aFilterAction-&gt;GetCustomAction(getter_AddRefs(customAction));</span>
<a href="#l9.56"></a><span id="l9.56">       if (NS_SUCCEEDED(rv) &amp;&amp; customAction)</span>
<a href="#l9.57"></a><span id="l9.57">         customAction-&gt;GetName(filterActionName);</span>
<a href="#l9.58"></a><span id="l9.58">       if (filterActionName.IsEmpty())</span>
<a href="#l9.59"></a><span id="l9.59">         bundle-&gt;GetStringFromName(</span>
<a href="#l9.60"></a><span id="l9.60" class="difflineminus">-                  u&quot;filterMissingCustomAction&quot;,</span>
<a href="#l9.61"></a><span id="l9.61" class="difflineplus">+                  &quot;filterMissingCustomAction&quot;,</span>
<a href="#l9.62"></a><span id="l9.62">                   getter_Copies(filterActionName));</span>
<a href="#l9.63"></a><span id="l9.63">       buffer += NS_ConvertUTF16toUTF8(filterActionName);</span>
<a href="#l9.64"></a><span id="l9.64">     }</span>
<a href="#l9.65"></a><span id="l9.65">     else</span>
<a href="#l9.66"></a><span id="l9.66">     {</span>
<a href="#l9.67"></a><span id="l9.67">       nsString actionValue;</span>
<a href="#l9.68"></a><span id="l9.68" class="difflineminus">-      nsAutoString filterActionID;</span>
<a href="#l9.69"></a><span id="l9.69" class="difflineminus">-      filterActionID = NS_LITERAL_STRING(&quot;filterAction&quot;);</span>
<a href="#l9.70"></a><span id="l9.70" class="difflineplus">+      nsAutoCString filterActionID;</span>
<a href="#l9.71"></a><span id="l9.71" class="difflineplus">+      filterActionID = NS_LITERAL_CSTRING(&quot;filterAction&quot;);</span>
<a href="#l9.72"></a><span id="l9.72">       filterActionID.AppendInt(actionType);</span>
<a href="#l9.73"></a><span id="l9.73">       rv = bundle-&gt;GetStringFromName(filterActionID.get(), getter_Copies(actionValue));</span>
<a href="#l9.74"></a><span id="l9.74">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l9.75"></a><span id="l9.75"> </span>
<a href="#l9.76"></a><span id="l9.76">       buffer += NS_ConvertUTF16toUTF8(actionValue);</span>
<a href="#l9.77"></a><span id="l9.77">     }</span>
<a href="#l9.78"></a><span id="l9.78">     buffer += &quot;\n&quot;;</span>
<a href="#l9.79"></a><span id="l9.79"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mailnews/base/search/src/nsMsgFilterService.cpp</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mailnews/base/search/src/nsMsgFilterService.cpp</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -211,17 +211,17 @@ nsresult nsMsgFilterService::AlertBackin</span>
<a href="#l10.4"></a><span id="l10.4"> nsresult //Do not use this routine if you have to call it very often because it creates a new bundle each time</span>
<a href="#l10.5"></a><span id="l10.5"> nsMsgFilterService::GetStringFromBundle(const char *aMsgName, char16_t **aResult)</span>
<a href="#l10.6"></a><span id="l10.6"> {</span>
<a href="#l10.7"></a><span id="l10.7">   NS_ENSURE_ARG_POINTER(aResult);</span>
<a href="#l10.8"></a><span id="l10.8"> </span>
<a href="#l10.9"></a><span id="l10.9">   nsCOMPtr &lt;nsIStringBundle&gt; bundle;</span>
<a href="#l10.10"></a><span id="l10.10">   nsresult rv = GetFilterStringBundle(getter_AddRefs(bundle));</span>
<a href="#l10.11"></a><span id="l10.11">   if (NS_SUCCEEDED(rv) &amp;&amp; bundle)</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-    rv = bundle-&gt;GetStringFromName(NS_ConvertASCIItoUTF16(aMsgName).get(), aResult);</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+    rv = bundle-&gt;GetStringFromName(aMsgName, aResult);</span>
<a href="#l10.14"></a><span id="l10.14">   return rv;</span>
<a href="#l10.15"></a><span id="l10.15"> </span>
<a href="#l10.16"></a><span id="l10.16"> }</span>
<a href="#l10.17"></a><span id="l10.17"> </span>
<a href="#l10.18"></a><span id="l10.18"> nsresult</span>
<a href="#l10.19"></a><span id="l10.19"> nsMsgFilterService::GetFilterStringBundle(nsIStringBundle **aBundle)</span>
<a href="#l10.20"></a><span id="l10.20"> {</span>
<a href="#l10.21"></a><span id="l10.21">   NS_ENSURE_ARG_POINTER(aBundle);</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineat">@@ -1176,17 +1176,17 @@ bool nsMsgFilterAfterTheFact::ContinueEx</span>
<a href="#l10.23"></a><span id="l10.23">   nsString filterName;</span>
<a href="#l10.24"></a><span id="l10.24">   m_curFilter-&gt;GetFilterName(filterName);</span>
<a href="#l10.25"></a><span id="l10.25">   nsString formatString;</span>
<a href="#l10.26"></a><span id="l10.26">   nsString confirmText;</span>
<a href="#l10.27"></a><span id="l10.27">   const char16_t *formatStrings[] =</span>
<a href="#l10.28"></a><span id="l10.28">   {</span>
<a href="#l10.29"></a><span id="l10.29">     filterName.get()</span>
<a href="#l10.30"></a><span id="l10.30">   };</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineminus">-  nsresult rv = bundle-&gt;FormatStringFromName(u&quot;continueFilterExecution&quot;,</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+  nsresult rv = bundle-&gt;FormatStringFromName(&quot;continueFilterExecution&quot;,</span>
<a href="#l10.33"></a><span id="l10.33">                                              formatStrings, 1, getter_Copies(confirmText));</span>
<a href="#l10.34"></a><span id="l10.34">   if (NS_FAILED(rv))</span>
<a href="#l10.35"></a><span id="l10.35">     return false;</span>
<a href="#l10.36"></a><span id="l10.36">   bool returnVal = false;</span>
<a href="#l10.37"></a><span id="l10.37">   (void) DisplayConfirmationPrompt(m_msgWindow, confirmText.get(), &amp;returnVal);</span>
<a href="#l10.38"></a><span id="l10.38">   return returnVal;</span>
<a href="#l10.39"></a><span id="l10.39"> }</span>
<a href="#l10.40"></a><span id="l10.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mailnews/base/src/nsMessenger.cpp</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mailnews/base/src/nsMessenger.cpp</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -321,17 +321,17 @@ nsMessenger::PromptIfFileExists(nsIFile </span>
<a href="#l11.4"></a><span id="l11.4">     file-&gt;GetPath(path);</span>
<a href="#l11.5"></a><span id="l11.5">     const char16_t *pathFormatStrings[] = { path.get() };</span>
<a href="#l11.6"></a><span id="l11.6"> </span>
<a href="#l11.7"></a><span id="l11.7">     if (!mStringBundle)</span>
<a href="#l11.8"></a><span id="l11.8">     {</span>
<a href="#l11.9"></a><span id="l11.9">       rv = InitStringBundle();</span>
<a href="#l11.10"></a><span id="l11.10">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l11.11"></a><span id="l11.11">     }</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-    rv = mStringBundle-&gt;FormatStringFromName(u&quot;fileExists&quot;,</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+    rv = mStringBundle-&gt;FormatStringFromName(&quot;fileExists&quot;,</span>
<a href="#l11.14"></a><span id="l11.14">                                              pathFormatStrings, 1,</span>
<a href="#l11.15"></a><span id="l11.15">                                              getter_Copies(errorMessage));</span>
<a href="#l11.16"></a><span id="l11.16">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l11.17"></a><span id="l11.17">     rv = dialog-&gt;Confirm(nullptr, errorMessage.get(), &amp;dialogResult);</span>
<a href="#l11.18"></a><span id="l11.18">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l11.19"></a><span id="l11.19"> </span>
<a href="#l11.20"></a><span id="l11.20">     if (dialogResult)</span>
<a href="#l11.21"></a><span id="l11.21">     {</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineat">@@ -839,17 +839,17 @@ nsMessenger::SaveOneAttachment(const cha</span>
<a href="#l11.23"></a><span id="l11.23">     {</span>
<a href="#l11.24"></a><span id="l11.24">       rv = InitStringBundle();</span>
<a href="#l11.25"></a><span id="l11.25">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l11.26"></a><span id="l11.26">     }</span>
<a href="#l11.27"></a><span id="l11.27"> </span>
<a href="#l11.28"></a><span id="l11.28">     nsString filterName;</span>
<a href="#l11.29"></a><span id="l11.29">     const char16_t *extensionParam[] = { extension.get() };</span>
<a href="#l11.30"></a><span id="l11.30">     rv = mStringBundle-&gt;FormatStringFromName(</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-      u&quot;saveAsType&quot;, extensionParam, 1, getter_Copies(filterName));</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+      &quot;saveAsType&quot;, extensionParam, 1, getter_Copies(filterName));</span>
<a href="#l11.33"></a><span id="l11.33">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l11.34"></a><span id="l11.34"> </span>
<a href="#l11.35"></a><span id="l11.35">     extension.Insert(NS_LITERAL_STRING(&quot;*.&quot;), 0);</span>
<a href="#l11.36"></a><span id="l11.36">     filePicker-&gt;AppendFilter(filterName, extension);</span>
<a href="#l11.37"></a><span id="l11.37">   }</span>
<a href="#l11.38"></a><span id="l11.38"> </span>
<a href="#l11.39"></a><span id="l11.39">   filePicker-&gt;AppendFilters(nsIFilePicker::filterAll);</span>
<a href="#l11.40"></a><span id="l11.40"> </span>
<a href="#l11.41"></a><span id="l11.41" class="difflineat">@@ -2040,17 +2040,17 @@ nsMessenger::GetString(const nsString&amp; a</span>
<a href="#l11.42"></a><span id="l11.42"> {</span>
<a href="#l11.43"></a><span id="l11.43">   nsresult rv;</span>
<a href="#l11.44"></a><span id="l11.44">   aValue.Truncate();</span>
<a href="#l11.45"></a><span id="l11.45"> </span>
<a href="#l11.46"></a><span id="l11.46">   if (!mStringBundle)</span>
<a href="#l11.47"></a><span id="l11.47">     rv = InitStringBundle();</span>
<a href="#l11.48"></a><span id="l11.48"> </span>
<a href="#l11.49"></a><span id="l11.49">   if (mStringBundle)</span>
<a href="#l11.50"></a><span id="l11.50" class="difflineminus">-    rv = mStringBundle-&gt;GetStringFromName(aStringName.get(), getter_Copies(aValue));</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineplus">+    rv = mStringBundle-&gt;GetStringFromName(NS_ConvertUTF16toUTF8(aStringName).get(), getter_Copies(aValue));</span>
<a href="#l11.52"></a><span id="l11.52">   else</span>
<a href="#l11.53"></a><span id="l11.53">     rv = NS_ERROR_FAILURE;</span>
<a href="#l11.54"></a><span id="l11.54"> </span>
<a href="#l11.55"></a><span id="l11.55">   if (NS_FAILED(rv) || aValue.IsEmpty())</span>
<a href="#l11.56"></a><span id="l11.56">     aValue = aStringName;</span>
<a href="#l11.57"></a><span id="l11.57">   return;</span>
<a href="#l11.58"></a><span id="l11.58"> }</span>
<a href="#l11.59"></a><span id="l11.59"> </span>
<a href="#l11.60"></a><span id="l11.60" class="difflineat">@@ -3065,18 +3065,18 @@ nsMessenger::PromptIfDeleteAttachments(b</span>
<a href="#l11.61"></a><span id="l11.61">     ConvertAndSanitizeFileName(aDisplayNameArray[u], displayString);</span>
<a href="#l11.62"></a><span id="l11.62">     attachmentList.Append(displayString);</span>
<a href="#l11.63"></a><span id="l11.63">     attachmentList.Append(char16_t('\n'));</span>
<a href="#l11.64"></a><span id="l11.64">   }</span>
<a href="#l11.65"></a><span id="l11.65">   const char16_t *formatStrings[] = { attachmentList.get() };</span>
<a href="#l11.66"></a><span id="l11.66"> </span>
<a href="#l11.67"></a><span id="l11.67">   // format the message and display</span>
<a href="#l11.68"></a><span id="l11.68">   nsString promptMessage;</span>
<a href="#l11.69"></a><span id="l11.69" class="difflineminus">-  const char16_t * propertyName = aSaveFirst ?</span>
<a href="#l11.70"></a><span id="l11.70" class="difflineminus">-    u&quot;detachAttachments&quot; : u&quot;deleteAttachments&quot;;</span>
<a href="#l11.71"></a><span id="l11.71" class="difflineplus">+  const char * propertyName = aSaveFirst ?</span>
<a href="#l11.72"></a><span id="l11.72" class="difflineplus">+    &quot;detachAttachments&quot; : &quot;deleteAttachments&quot;;</span>
<a href="#l11.73"></a><span id="l11.73">   rv = mStringBundle-&gt;FormatStringFromName(propertyName, formatStrings, 1,getter_Copies(promptMessage));</span>
<a href="#l11.74"></a><span id="l11.74">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l11.75"></a><span id="l11.75"> </span>
<a href="#l11.76"></a><span id="l11.76">   bool dialogResult = false;</span>
<a href="#l11.77"></a><span id="l11.77">   rv = dialog-&gt;Confirm(nullptr, promptMessage.get(), &amp;dialogResult);</span>
<a href="#l11.78"></a><span id="l11.78">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l11.79"></a><span id="l11.79"> </span>
<a href="#l11.80"></a><span id="l11.80">   return dialogResult ? NS_OK : NS_ERROR_FAILURE;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mailnews/base/src/nsMessengerOSXIntegration.mm</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mailnews/base/src/nsMessengerOSXIntegration.mm</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -328,28 +328,28 @@ nsMessengerOSXIntegration::FillToolTipIn</span>
<a href="#l12.4"></a><span id="l12.4">       nsCString uri;</span>
<a href="#l12.5"></a><span id="l12.5">       aFolder-&gt;GetURI(uri);</span>
<a href="#l12.6"></a><span id="l12.6"> </span>
<a href="#l12.7"></a><span id="l12.7">       if (numNotDisplayed &gt; 0)</span>
<a href="#l12.8"></a><span id="l12.8">       {</span>
<a href="#l12.9"></a><span id="l12.9">         nsAutoString numNotDisplayedText;</span>
<a href="#l12.10"></a><span id="l12.10">         numNotDisplayedText.AppendInt(numNotDisplayed);</span>
<a href="#l12.11"></a><span id="l12.11">         const char16_t *formatStrings[3] = { numNewMsgsText.get(), authors.get(), numNotDisplayedText.get() };</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-        bundle-&gt;FormatStringFromName(u&quot;macBiffNotification_messages_extra&quot;,</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+        bundle-&gt;FormatStringFromName(&quot;macBiffNotification_messages_extra&quot;,</span>
<a href="#l12.14"></a><span id="l12.14">                                      formatStrings,</span>
<a href="#l12.15"></a><span id="l12.15">                                      3,</span>
<a href="#l12.16"></a><span id="l12.16">                                      getter_Copies(finalText));</span>
<a href="#l12.17"></a><span id="l12.17">       }</span>
<a href="#l12.18"></a><span id="l12.18">       else</span>
<a href="#l12.19"></a><span id="l12.19">       {</span>
<a href="#l12.20"></a><span id="l12.20">         const char16_t *formatStrings[2] = { numNewMsgsText.get(), authors.get() };</span>
<a href="#l12.21"></a><span id="l12.21"> </span>
<a href="#l12.22"></a><span id="l12.22">         if (aNewCount == 1)</span>
<a href="#l12.23"></a><span id="l12.23">         {</span>
<a href="#l12.24"></a><span id="l12.24" class="difflineminus">-          bundle-&gt;FormatStringFromName(u&quot;macBiffNotification_message&quot;,</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineplus">+          bundle-&gt;FormatStringFromName(&quot;macBiffNotification_message&quot;,</span>
<a href="#l12.26"></a><span id="l12.26">                                        formatStrings,</span>
<a href="#l12.27"></a><span id="l12.27">                                        2,</span>
<a href="#l12.28"></a><span id="l12.28">                                        getter_Copies(finalText));</span>
<a href="#l12.29"></a><span id="l12.29">           // Since there is only 1 message, use the most recent mail's URI instead of the folder's</span>
<a href="#l12.30"></a><span id="l12.30">           nsCOMPtr&lt;nsIMsgDatabase&gt; db;</span>
<a href="#l12.31"></a><span id="l12.31">           rv = aFolder-&gt;GetMsgDatabase(getter_AddRefs(db));</span>
<a href="#l12.32"></a><span id="l12.32">           if (NS_SUCCEEDED(rv) &amp;&amp; db)</span>
<a href="#l12.33"></a><span id="l12.33">           {</span>
<a href="#l12.34"></a><span id="l12.34" class="difflineat">@@ -363,17 +363,17 @@ nsMessengerOSXIntegration::FillToolTipIn</span>
<a href="#l12.35"></a><span id="l12.35">                                        getter_AddRefs(hdr));</span>
<a href="#l12.36"></a><span id="l12.36">               if (NS_SUCCEEDED(rv) &amp;&amp; hdr)</span>
<a href="#l12.37"></a><span id="l12.37">                 aFolder-&gt;GetUriForMsg(hdr, uri);</span>
<a href="#l12.38"></a><span id="l12.38">             }</span>
<a href="#l12.39"></a><span id="l12.39">             NS_Free(newMessageKeys);</span>
<a href="#l12.40"></a><span id="l12.40">           }</span>
<a href="#l12.41"></a><span id="l12.41">         }</span>
<a href="#l12.42"></a><span id="l12.42">         else</span>
<a href="#l12.43"></a><span id="l12.43" class="difflineminus">-          bundle-&gt;FormatStringFromName(u&quot;macBiffNotification_messages&quot;,</span>
<a href="#l12.44"></a><span id="l12.44" class="difflineplus">+          bundle-&gt;FormatStringFromName(&quot;macBiffNotification_messages&quot;,</span>
<a href="#l12.45"></a><span id="l12.45">                                        formatStrings,</span>
<a href="#l12.46"></a><span id="l12.46">                                        2,</span>
<a href="#l12.47"></a><span id="l12.47">                                        getter_Copies(finalText));</span>
<a href="#l12.48"></a><span id="l12.48">       }</span>
<a href="#l12.49"></a><span id="l12.49">       ShowAlertMessage(accountName, finalText, uri);</span>
<a href="#l12.50"></a><span id="l12.50">     } // if we got a bundle</span>
<a href="#l12.51"></a><span id="l12.51">   } // if we got a folder</span>
<a href="#l12.52"></a><span id="l12.52"> }</span>
<a href="#l12.53"></a><span id="l12.53" class="difflineat">@@ -621,17 +621,17 @@ nsMessengerOSXIntegration::GetNewMailAut</span>
<a href="#l12.54"></a><span id="l12.54">     if (!bundle)</span>
<a href="#l12.55"></a><span id="l12.55">       return NS_ERROR_FAILURE;</span>
<a href="#l12.56"></a><span id="l12.56"> </span>
<a href="#l12.57"></a><span id="l12.57">     uint32_t *newMessageKeys;</span>
<a href="#l12.58"></a><span id="l12.58">     rv = db-&gt;GetNewList(&amp;numNewKeys, &amp;newMessageKeys);</span>
<a href="#l12.59"></a><span id="l12.59">     if (NS_SUCCEEDED(rv))</span>
<a href="#l12.60"></a><span id="l12.60">     {</span>
<a href="#l12.61"></a><span id="l12.61">       nsString listSeparator;</span>
<a href="#l12.62"></a><span id="l12.62" class="difflineminus">-      bundle-&gt;GetStringFromName(u&quot;macBiffNotification_separator&quot;, getter_Copies(listSeparator));</span>
<a href="#l12.63"></a><span id="l12.63" class="difflineplus">+      bundle-&gt;GetStringFromName(&quot;macBiffNotification_separator&quot;, getter_Copies(listSeparator));</span>
<a href="#l12.64"></a><span id="l12.64"> </span>
<a href="#l12.65"></a><span id="l12.65">       int32_t displayed = 0;</span>
<a href="#l12.66"></a><span id="l12.66">       for (int32_t i = numNewKeys - 1; i &gt;= 0; i--, aNewCount--)</span>
<a href="#l12.67"></a><span id="l12.67">       {</span>
<a href="#l12.68"></a><span id="l12.68">         if (0 == aNewCount || displayed == kMaxDisplayCount)</span>
<a href="#l12.69"></a><span id="l12.69">           break;</span>
<a href="#l12.70"></a><span id="l12.70"> </span>
<a href="#l12.71"></a><span id="l12.71">         nsCOMPtr&lt;nsIMsgDBHdr&gt; hdr;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mailnews/base/src/nsMessengerUnixIntegration.cpp</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mailnews/base/src/nsMessengerUnixIntegration.cpp</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -171,18 +171,18 @@ nsMessengerUnixIntegration::BuildNotific</span>
<a href="#l13.4"></a><span id="l13.4">   numNewMsgsText.AppendInt(numNewMessages);</span>
<a href="#l13.5"></a><span id="l13.5"> </span>
<a href="#l13.6"></a><span id="l13.6">   const char16_t *formatStrings[] =</span>
<a href="#l13.7"></a><span id="l13.7">   {</span>
<a href="#l13.8"></a><span id="l13.8">     accountName.get(), numNewMsgsText.get()</span>
<a href="#l13.9"></a><span id="l13.9">   };</span>
<a href="#l13.10"></a><span id="l13.10"> </span>
<a href="#l13.11"></a><span id="l13.11">   aBundle-&gt;FormatStringFromName(numNewMessages == 1 ?</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-                                  u&quot;newMailNotification_message&quot; :</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineminus">-                                  u&quot;newMailNotification_messages&quot;,</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+                                  &quot;newMailNotification_message&quot; :</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineplus">+                                  &quot;newMailNotification_messages&quot;,</span>
<a href="#l13.16"></a><span id="l13.16">                                 formatStrings, 2, getter_Copies(aTitle));</span>
<a href="#l13.17"></a><span id="l13.17">   return true;</span>
<a href="#l13.18"></a><span id="l13.18"> }</span>
<a href="#l13.19"></a><span id="l13.19"> </span>
<a href="#l13.20"></a><span id="l13.20"> /* This comparator lets us sort an nsCOMArray of nsIMsgDBHdr's by</span>
<a href="#l13.21"></a><span id="l13.21">  * their dateInSeconds attributes in ascending order.</span>
<a href="#l13.22"></a><span id="l13.22">  */</span>
<a href="#l13.23"></a><span id="l13.23"> static int</span>
<a href="#l13.24"></a><span id="l13.24" class="difflineat">@@ -290,17 +290,17 @@ nsMessengerUnixIntegration::BuildNotific</span>
<a href="#l13.25"></a><span id="l13.25"> </span>
<a href="#l13.26"></a><span id="l13.26">   if (showSubject &amp;&amp; showSender)</span>
<a href="#l13.27"></a><span id="l13.27">   {</span>
<a href="#l13.28"></a><span id="l13.28">     nsString msgTitle;</span>
<a href="#l13.29"></a><span id="l13.29">     const char16_t *formatStrings[] =</span>
<a href="#l13.30"></a><span id="l13.30">     {</span>
<a href="#l13.31"></a><span id="l13.31">       subject.get(), author.get()</span>
<a href="#l13.32"></a><span id="l13.32">     };</span>
<a href="#l13.33"></a><span id="l13.33" class="difflineminus">-    aBundle-&gt;FormatStringFromName(u&quot;newMailNotification_messagetitle&quot;,</span>
<a href="#l13.34"></a><span id="l13.34" class="difflineplus">+    aBundle-&gt;FormatStringFromName(&quot;newMailNotification_messagetitle&quot;,</span>
<a href="#l13.35"></a><span id="l13.35">         formatStrings, 2, getter_Copies(msgTitle));</span>
<a href="#l13.36"></a><span id="l13.36">     alertBody.Append(msgTitle);</span>
<a href="#l13.37"></a><span id="l13.37">   }</span>
<a href="#l13.38"></a><span id="l13.38">   else if (showSubject)</span>
<a href="#l13.39"></a><span id="l13.39">     alertBody.Append(subject);</span>
<a href="#l13.40"></a><span id="l13.40">   else if (showSender)</span>
<a href="#l13.41"></a><span id="l13.41">     alertBody.Append(author);</span>
<a href="#l13.42"></a><span id="l13.42"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mailnews/base/src/nsMessengerWinIntegration.cpp</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mailnews/base/src/nsMessengerWinIntegration.cpp</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -676,19 +676,19 @@ void nsMessengerWinIntegration::FillTool</span>
<a href="#l14.4"></a><span id="l14.4"> </span>
<a href="#l14.5"></a><span id="l14.5">         const char16_t *formatStrings[] =</span>
<a href="#l14.6"></a><span id="l14.6">         {</span>
<a href="#l14.7"></a><span id="l14.7">           numNewMsgsText.get(),</span>
<a href="#l14.8"></a><span id="l14.8">         };</span>
<a href="#l14.9"></a><span id="l14.9"> </span>
<a href="#l14.10"></a><span id="l14.10">         nsString finalText;</span>
<a href="#l14.11"></a><span id="l14.11">         if (numNewMessages == 1)</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-          bundle-&gt;FormatStringFromName(u&quot;biffNotification_message&quot;, formatStrings, 1, getter_Copies(finalText));</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+          bundle-&gt;FormatStringFromName(&quot;biffNotification_message&quot;, formatStrings, 1, getter_Copies(finalText));</span>
<a href="#l14.14"></a><span id="l14.14">         else</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineminus">-          bundle-&gt;FormatStringFromName(u&quot;biffNotification_messages&quot;, formatStrings, 1, getter_Copies(finalText));</span>
<a href="#l14.16"></a><span id="l14.16" class="difflineplus">+          bundle-&gt;FormatStringFromName(&quot;biffNotification_messages&quot;, formatStrings, 1, getter_Copies(finalText));</span>
<a href="#l14.17"></a><span id="l14.17"> </span>
<a href="#l14.18"></a><span id="l14.18">         // the alert message is special...we actually only want to show the first account with</span>
<a href="#l14.19"></a><span id="l14.19">         // new mail in the alert.</span>
<a href="#l14.20"></a><span id="l14.20">         if (animatedAlertText.IsEmpty()) // if we haven't filled in the animated alert text yet</span>
<a href="#l14.21"></a><span id="l14.21">           animatedAlertText = finalText;</span>
<a href="#l14.22"></a><span id="l14.22"> </span>
<a href="#l14.23"></a><span id="l14.23">         toolTipLine.Append(accountName);</span>
<a href="#l14.24"></a><span id="l14.24">         toolTipLine.Append(' ');</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mailnews/base/src/nsMsgAccountManager.cpp</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgAccountManager.cpp</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -1280,17 +1280,17 @@ nsMsgAccountManager::LoadAccounts()</span>
<a href="#l15.4"></a><span id="l15.4">        * duplicate account. It checks that the server is not deferred to the</span>
<a href="#l15.5"></a><span id="l15.5">        * duplicate account. If it is, then it looks up the information for the</span>
<a href="#l15.6"></a><span id="l15.6">        * duplicate account's server (username, hostName, type), and finds an</span>
<a href="#l15.7"></a><span id="l15.7">        * account with a server with the same username, hostname, and type, and</span>
<a href="#l15.8"></a><span id="l15.8">        * if it finds one, defers to that account instead. Generally, this will</span>
<a href="#l15.9"></a><span id="l15.9">        * be a Local Folders account, since 2.0 has a bug where duplicate Local</span>
<a href="#l15.10"></a><span id="l15.10">        * Folders accounts are created.</span>
<a href="#l15.11"></a><span id="l15.11">        */</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-      nsCOMPtr&lt;nsIMsgIncomingServer&gt;&amp; server = iter.Data();    // njn: rename</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+      nsCOMPtr&lt;nsIMsgIncomingServer&gt;&amp; server = iter.Data();</span>
<a href="#l15.14"></a><span id="l15.14">       nsCString type;</span>
<a href="#l15.15"></a><span id="l15.15">       server-&gt;GetType(type);</span>
<a href="#l15.16"></a><span id="l15.16">       if (type.EqualsLiteral(&quot;pop3&quot;))</span>
<a href="#l15.17"></a><span id="l15.17">       {</span>
<a href="#l15.18"></a><span id="l15.18">         nsCString deferredToAccount;</span>
<a href="#l15.19"></a><span id="l15.19">         // Get the pref directly, because the GetDeferredToAccount accessor</span>
<a href="#l15.20"></a><span id="l15.20">         // attempts to fix broken deferrals, but we know more about what the</span>
<a href="#l15.21"></a><span id="l15.21">         // deferred to account was.</span>
<a href="#l15.22"></a><span id="l15.22" class="difflineat">@@ -2295,17 +2295,17 @@ nsresult nsMsgAccountManager::GetLocalFo</span>
<a href="#l15.23"></a><span id="l15.23">   nsCOMPtr&lt;nsIStringBundleService&gt; sBundleService =</span>
<a href="#l15.24"></a><span id="l15.24">     mozilla::services::GetStringBundleService();</span>
<a href="#l15.25"></a><span id="l15.25">   NS_ENSURE_TRUE(sBundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l15.26"></a><span id="l15.26"> </span>
<a href="#l15.27"></a><span id="l15.27">   rv = sBundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/messenger.properties&quot;,</span>
<a href="#l15.28"></a><span id="l15.28">                                     getter_AddRefs(bundle));</span>
<a href="#l15.29"></a><span id="l15.29">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l15.30"></a><span id="l15.30"> </span>
<a href="#l15.31"></a><span id="l15.31" class="difflineminus">-  return bundle-&gt;GetStringFromName(u&quot;localFolders&quot;, getter_Copies(localFoldersName));</span>
<a href="#l15.32"></a><span id="l15.32" class="difflineplus">+  return bundle-&gt;GetStringFromName(&quot;localFolders&quot;, getter_Copies(localFoldersName));</span>
<a href="#l15.33"></a><span id="l15.33"> }</span>
<a href="#l15.34"></a><span id="l15.34"> </span>
<a href="#l15.35"></a><span id="l15.35"> NS_IMETHODIMP</span>
<a href="#l15.36"></a><span id="l15.36"> nsMsgAccountManager::CreateLocalMailAccount()</span>
<a href="#l15.37"></a><span id="l15.37"> {</span>
<a href="#l15.38"></a><span id="l15.38">   // create the server</span>
<a href="#l15.39"></a><span id="l15.39">   nsCOMPtr&lt;nsIMsgIncomingServer&gt; server;</span>
<a href="#l15.40"></a><span id="l15.40">   nsresult rv = CreateIncomingServer(NS_LITERAL_CSTRING(&quot;nobody&quot;),</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mailnews/base/src/nsMsgAccountManagerDS.cpp</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgAccountManagerDS.cpp</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -276,36 +276,36 @@ nsMsgAccountManagerDataSource::GetTarget</span>
<a href="#l16.4"></a><span id="l16.4">   if (property == kNC_Name || property == kNC_FolderTreeName ||</span>
<a href="#l16.5"></a><span id="l16.5">       property == kNC_FolderTreeSimpleName) </span>
<a href="#l16.6"></a><span id="l16.6">   {</span>
<a href="#l16.7"></a><span id="l16.7">     rv = getStringBundle();</span>
<a href="#l16.8"></a><span id="l16.8">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l16.9"></a><span id="l16.9"> </span>
<a href="#l16.10"></a><span id="l16.10">     nsString pageTitle;</span>
<a href="#l16.11"></a><span id="l16.11">     if (source == kNC_PageTitleServer)</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-      mStringBundle-&gt;GetStringFromName(u&quot;prefPanel-server&quot;,</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+      mStringBundle-&gt;GetStringFromName(&quot;prefPanel-server&quot;,</span>
<a href="#l16.14"></a><span id="l16.14">                                        getter_Copies(pageTitle));</span>
<a href="#l16.15"></a><span id="l16.15"> </span>
<a href="#l16.16"></a><span id="l16.16">     else if (source == kNC_PageTitleCopies)</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineminus">-      mStringBundle-&gt;GetStringFromName(u&quot;prefPanel-copies&quot;,</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineplus">+      mStringBundle-&gt;GetStringFromName(&quot;prefPanel-copies&quot;,</span>
<a href="#l16.19"></a><span id="l16.19">                                        getter_Copies(pageTitle));</span>
<a href="#l16.20"></a><span id="l16.20">     else if (source == kNC_PageTitleSynchronization)</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineminus">-      mStringBundle-&gt;GetStringFromName(u&quot;prefPanel-synchronization&quot;,</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineplus">+      mStringBundle-&gt;GetStringFromName(&quot;prefPanel-synchronization&quot;,</span>
<a href="#l16.23"></a><span id="l16.23">                                        getter_Copies(pageTitle));</span>
<a href="#l16.24"></a><span id="l16.24">     else if (source == kNC_PageTitleDiskSpace)</span>
<a href="#l16.25"></a><span id="l16.25" class="difflineminus">-      mStringBundle-&gt;GetStringFromName(u&quot;prefPanel-diskspace&quot;,</span>
<a href="#l16.26"></a><span id="l16.26" class="difflineplus">+      mStringBundle-&gt;GetStringFromName(&quot;prefPanel-diskspace&quot;,</span>
<a href="#l16.27"></a><span id="l16.27">                                        getter_Copies(pageTitle));</span>
<a href="#l16.28"></a><span id="l16.28">     else if (source == kNC_PageTitleAddressing)</span>
<a href="#l16.29"></a><span id="l16.29" class="difflineminus">-      mStringBundle-&gt;GetStringFromName(u&quot;prefPanel-addressing&quot;,</span>
<a href="#l16.30"></a><span id="l16.30" class="difflineplus">+      mStringBundle-&gt;GetStringFromName(&quot;prefPanel-addressing&quot;,</span>
<a href="#l16.31"></a><span id="l16.31">                                        getter_Copies(pageTitle));</span>
<a href="#l16.32"></a><span id="l16.32">     else if (source == kNC_PageTitleSMTP)</span>
<a href="#l16.33"></a><span id="l16.33" class="difflineminus">-      mStringBundle-&gt;GetStringFromName(u&quot;prefPanel-smtp&quot;,</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineplus">+      mStringBundle-&gt;GetStringFromName(&quot;prefPanel-smtp&quot;,</span>
<a href="#l16.35"></a><span id="l16.35">                                        getter_Copies(pageTitle));</span>
<a href="#l16.36"></a><span id="l16.36">     else if (source == kNC_PageTitleJunk)</span>
<a href="#l16.37"></a><span id="l16.37" class="difflineminus">-      mStringBundle-&gt;GetStringFromName(u&quot;prefPanel-junk&quot;,</span>
<a href="#l16.38"></a><span id="l16.38" class="difflineplus">+      mStringBundle-&gt;GetStringFromName(&quot;prefPanel-junk&quot;,</span>
<a href="#l16.39"></a><span id="l16.39">                                        getter_Copies(pageTitle));</span>
<a href="#l16.40"></a><span id="l16.40"> </span>
<a href="#l16.41"></a><span id="l16.41">     else {</span>
<a href="#l16.42"></a><span id="l16.42">       // if it's a server, use the pretty name</span>
<a href="#l16.43"></a><span id="l16.43">       nsCOMPtr&lt;nsIMsgFolder&gt; folder = do_QueryInterface(source, &amp;rv);</span>
<a href="#l16.44"></a><span id="l16.44">       if (NS_SUCCEEDED(rv) &amp;&amp; folder) {</span>
<a href="#l16.45"></a><span id="l16.45">         bool isServer;</span>
<a href="#l16.46"></a><span id="l16.46">         rv = folder-&gt;GetIsServer(&amp;isServer);</span>
<a href="#l16.47"></a><span id="l16.47" class="difflineat">@@ -341,19 +341,19 @@ nsMsgAccountManagerDataSource::GetTarget</span>
<a href="#l16.48"></a><span id="l16.48">         bundleURL += (sourceValue + strlen(NC_RDF_PAGETITLE_PREFIX));</span>
<a href="#l16.49"></a><span id="l16.49">         bundleURL += &quot;.properties&quot;;</span>
<a href="#l16.50"></a><span id="l16.50"> </span>
<a href="#l16.51"></a><span id="l16.51">         nsCOMPtr &lt;nsIStringBundle&gt; bundle;</span>
<a href="#l16.52"></a><span id="l16.52">         rv = strBundleService-&gt;CreateBundle(bundleURL.get(), getter_AddRefs(bundle));</span>
<a href="#l16.53"></a><span id="l16.53"> </span>
<a href="#l16.54"></a><span id="l16.54">         NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l16.55"></a><span id="l16.55"> </span>
<a href="#l16.56"></a><span id="l16.56" class="difflineminus">-        nsAutoString panelTitleName;</span>
<a href="#l16.57"></a><span id="l16.57" class="difflineplus">+        nsAutoCString panelTitleName;</span>
<a href="#l16.58"></a><span id="l16.58">         panelTitleName.AssignLiteral(&quot;prefPanel-&quot;);</span>
<a href="#l16.59"></a><span id="l16.59" class="difflineminus">-        panelTitleName.Append(NS_ConvertASCIItoUTF16(sourceValue + strlen(NC_RDF_PAGETITLE_PREFIX)));</span>
<a href="#l16.60"></a><span id="l16.60" class="difflineplus">+        panelTitleName.Append(sourceValue + strlen(NC_RDF_PAGETITLE_PREFIX));</span>
<a href="#l16.61"></a><span id="l16.61">         bundle-&gt;GetStringFromName(panelTitleName.get(), getter_Copies(pageTitle));</span>
<a href="#l16.62"></a><span id="l16.62">       }</span>
<a href="#l16.63"></a><span id="l16.63">     }</span>
<a href="#l16.64"></a><span id="l16.64">     str = pageTitle.get();</span>
<a href="#l16.65"></a><span id="l16.65">   }</span>
<a href="#l16.66"></a><span id="l16.66">   else if (property == kNC_PageTag) {</span>
<a href="#l16.67"></a><span id="l16.67">     // do NOT localize these strings. these are the urls of the XUL files</span>
<a href="#l16.68"></a><span id="l16.68">     if (source == kNC_PageTitleServer)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mailnews/base/src/nsMsgDBView.cpp</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgDBView.cpp</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -218,17 +218,17 @@ char16_t * nsMsgDBView::GetString(const </span>
<a href="#l17.4"></a><span id="l17.4">     static const char propertyURL[] = MESSENGER_STRING_URL;</span>
<a href="#l17.5"></a><span id="l17.5">     nsCOMPtr&lt;nsIStringBundleService&gt; sBundleService =</span>
<a href="#l17.6"></a><span id="l17.6">       mozilla::services::GetStringBundleService();</span>
<a href="#l17.7"></a><span id="l17.7">     if (sBundleService)</span>
<a href="#l17.8"></a><span id="l17.8">       res = sBundleService-&gt;CreateBundle(propertyURL, getter_AddRefs(mMessengerStringBundle));</span>
<a href="#l17.9"></a><span id="l17.9">   }</span>
<a href="#l17.10"></a><span id="l17.10"> </span>
<a href="#l17.11"></a><span id="l17.11">   if (mMessengerStringBundle)</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-    res = mMessengerStringBundle-&gt;GetStringFromName(aStringName, &amp;ptrv);</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+    res = mMessengerStringBundle-&gt;GetStringFromName(NS_ConvertUTF16toUTF8(aStringName).get(), &amp;ptrv);</span>
<a href="#l17.14"></a><span id="l17.14"> </span>
<a href="#l17.15"></a><span id="l17.15">   if ( NS_SUCCEEDED(res) &amp;&amp; (ptrv) )</span>
<a href="#l17.16"></a><span id="l17.16">     return ptrv;</span>
<a href="#l17.17"></a><span id="l17.17">   else</span>
<a href="#l17.18"></a><span id="l17.18">     return NS_strdup(aStringName);</span>
<a href="#l17.19"></a><span id="l17.19"> }</span>
<a href="#l17.20"></a><span id="l17.20"> </span>
<a href="#l17.21"></a><span id="l17.21"> // helper function used to fetch localized strings from the prefs</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mailnews/base/src/nsMsgFolderCompactor.cpp</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgFolderCompactor.cpp</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -338,17 +338,17 @@ nsresult nsFolderCompactState::ShowStatu</span>
<a href="#l18.4"></a><span id="l18.4">     rv = server-&gt;GetPrettyName(accountName);</span>
<a href="#l18.5"></a><span id="l18.5">     if (NS_FAILED(rv))</span>
<a href="#l18.6"></a><span id="l18.6">       break;</span>
<a href="#l18.7"></a><span id="l18.7">     nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l18.8"></a><span id="l18.8">     rv = GetBaseStringBundle(getter_AddRefs(bundle));</span>
<a href="#l18.9"></a><span id="l18.9">     if (NS_FAILED(rv))</span>
<a href="#l18.10"></a><span id="l18.10">       break;</span>
<a href="#l18.11"></a><span id="l18.11">     const char16_t *params[] = { accountName.get(), aMsg.get() };</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-    rv = bundle-&gt;FormatStringFromName(u&quot;statusMessage&quot;,</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+    rv = bundle-&gt;FormatStringFromName(&quot;statusMessage&quot;,</span>
<a href="#l18.14"></a><span id="l18.14">                                       params, 2, getter_Copies(statusMessage));</span>
<a href="#l18.15"></a><span id="l18.15">   } while (false);</span>
<a href="#l18.16"></a><span id="l18.16"> </span>
<a href="#l18.17"></a><span id="l18.17">   // If fetching any of the needed info failed, just show the original message.</span>
<a href="#l18.18"></a><span id="l18.18">   if (NS_FAILED(rv))</span>
<a href="#l18.19"></a><span id="l18.19">     statusMessage.Assign(aMsg);</span>
<a href="#l18.20"></a><span id="l18.20">   return statusFeedback-&gt;SetStatusString(statusMessage);</span>
<a href="#l18.21"></a><span id="l18.21"> }</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineat">@@ -682,17 +682,17 @@ void nsFolderCompactState::ShowDoneStatu</span>
<a href="#l18.23"></a><span id="l18.23">   {</span>
<a href="#l18.24"></a><span id="l18.24">     nsString statusString;</span>
<a href="#l18.25"></a><span id="l18.25">     nsCOMPtr &lt;nsIStringBundle&gt; bundle;</span>
<a href="#l18.26"></a><span id="l18.26">     nsresult rv = GetBaseStringBundle(getter_AddRefs(bundle));</span>
<a href="#l18.27"></a><span id="l18.27">     NS_ENSURE_SUCCESS_VOID(rv);</span>
<a href="#l18.28"></a><span id="l18.28">     nsAutoString expungedAmount;</span>
<a href="#l18.29"></a><span id="l18.29">     FormatFileSize(m_totalExpungedBytes, true, expungedAmount);</span>
<a href="#l18.30"></a><span id="l18.30">     const char16_t* params[] = { expungedAmount.get() };</span>
<a href="#l18.31"></a><span id="l18.31" class="difflineminus">-    rv = bundle-&gt;FormatStringFromName(u&quot;compactingDone&quot;,</span>
<a href="#l18.32"></a><span id="l18.32" class="difflineplus">+    rv = bundle-&gt;FormatStringFromName(&quot;compactingDone&quot;,</span>
<a href="#l18.33"></a><span id="l18.33">                                       params, 1, getter_Copies(statusString));</span>
<a href="#l18.34"></a><span id="l18.34"> </span>
<a href="#l18.35"></a><span id="l18.35">     if (!statusString.IsEmpty() &amp;&amp; NS_SUCCEEDED(rv))</span>
<a href="#l18.36"></a><span id="l18.36">       ShowStatusMsg(statusString);</span>
<a href="#l18.37"></a><span id="l18.37">   }</span>
<a href="#l18.38"></a><span id="l18.38"> }</span>
<a href="#l18.39"></a><span id="l18.39"> </span>
<a href="#l18.40"></a><span id="l18.40"> nsresult</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mailnews/base/src/nsMsgFolderDataSource.cpp</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgFolderDataSource.cpp</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -1982,17 +1982,17 @@ nsresult nsMsgFolderDataSource::DoDelete</span>
<a href="#l19.4"></a><span id="l19.4">         NS_ENSURE_ARG_POINTER(msgWindow);</span>
<a href="#l19.5"></a><span id="l19.5">         nsCOMPtr&lt;nsIStringBundleService&gt; sBundleService =</span>
<a href="#l19.6"></a><span id="l19.6">           mozilla::services::GetStringBundleService();</span>
<a href="#l19.7"></a><span id="l19.7">         NS_ENSURE_TRUE(sBundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l19.8"></a><span id="l19.8">         nsCOMPtr&lt;nsIStringBundle&gt; sMessengerStringBundle;</span>
<a href="#l19.9"></a><span id="l19.9">         nsString confirmMsg;</span>
<a href="#l19.10"></a><span id="l19.10">         rv = sBundleService-&gt;CreateBundle(MESSENGER_STRING_URL, getter_AddRefs(sMessengerStringBundle));</span>
<a href="#l19.11"></a><span id="l19.11">         NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-        sMessengerStringBundle-&gt;GetStringFromName(u&quot;confirmSavedSearchDeleteMessage&quot;, getter_Copies(confirmMsg));</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+        sMessengerStringBundle-&gt;GetStringFromName(&quot;confirmSavedSearchDeleteMessage&quot;, getter_Copies(confirmMsg));</span>
<a href="#l19.14"></a><span id="l19.14"> </span>
<a href="#l19.15"></a><span id="l19.15">         nsCOMPtr&lt;nsIPrompt&gt; dialog;</span>
<a href="#l19.16"></a><span id="l19.16">         rv = msgWindow-&gt;GetPromptDialog(getter_AddRefs(dialog));</span>
<a href="#l19.17"></a><span id="l19.17">         if (NS_SUCCEEDED(rv))</span>
<a href="#l19.18"></a><span id="l19.18">         {</span>
<a href="#l19.19"></a><span id="l19.19">           bool dialogResult;</span>
<a href="#l19.20"></a><span id="l19.20">           rv = dialog-&gt;Confirm(nullptr, confirmMsg.get(), &amp;dialogResult);</span>
<a href="#l19.21"></a><span id="l19.21">           if (!dialogResult)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mailnews/base/src/nsMsgOfflineManager.cpp</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgOfflineManager.cpp</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -244,17 +244,17 @@ nsresult nsMsgOfflineManager::ShowStatus</span>
<a href="#l20.4"></a><span id="l20.4">     nsCOMPtr&lt;nsIStringBundleService&gt; sBundleService = </span>
<a href="#l20.5"></a><span id="l20.5">       mozilla::services::GetStringBundleService();</span>
<a href="#l20.6"></a><span id="l20.6">     NS_ENSURE_TRUE(sBundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l20.7"></a><span id="l20.7">     sBundleService-&gt;CreateBundle(MESSENGER_STRING_URL, getter_AddRefs(mStringBundle));</span>
<a href="#l20.8"></a><span id="l20.8">     return NS_OK;</span>
<a href="#l20.9"></a><span id="l20.9">   }</span>
<a href="#l20.10"></a><span id="l20.10"> </span>
<a href="#l20.11"></a><span id="l20.11">   nsString statusString;</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-  nsresult res = mStringBundle-&gt;GetStringFromName(NS_ConvertASCIItoUTF16(statusMsgName).get(),</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+  nsresult res = mStringBundle-&gt;GetStringFromName(statusMsgName,</span>
<a href="#l20.14"></a><span id="l20.14"> 						  getter_Copies(statusString));</span>
<a href="#l20.15"></a><span id="l20.15"> </span>
<a href="#l20.16"></a><span id="l20.16">   if (NS_SUCCEEDED(res) &amp;&amp; m_statusFeedback)</span>
<a href="#l20.17"></a><span id="l20.17">     m_statusFeedback-&gt;ShowStatusString(statusString);</span>
<a href="#l20.18"></a><span id="l20.18"> </span>
<a href="#l20.19"></a><span id="l20.19">   return res;</span>
<a href="#l20.20"></a><span id="l20.20"> }</span>
<a href="#l20.21"></a><span id="l20.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mailnews/base/src/nsMsgPrintEngine.cpp</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgPrintEngine.cpp</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -568,17 +568,17 @@ nsMsgPrintEngine::GetString(const char16</span>
<a href="#l21.4"></a><span id="l21.4"> </span>
<a href="#l21.5"></a><span id="l21.5">     nsCOMPtr&lt;nsIStringBundleService&gt; sBundleService = </span>
<a href="#l21.6"></a><span id="l21.6">       mozilla::services::GetStringBundleService();</span>
<a href="#l21.7"></a><span id="l21.7">     if (sBundleService)</span>
<a href="#l21.8"></a><span id="l21.8">       sBundleService-&gt;CreateBundle(propertyURL, getter_AddRefs(mStringBundle));</span>
<a href="#l21.9"></a><span id="l21.9">   }</span>
<a href="#l21.10"></a><span id="l21.10"> </span>
<a href="#l21.11"></a><span id="l21.11">   if (mStringBundle)</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-    mStringBundle-&gt;GetStringFromName(aStringName, getter_Copies(outStr));</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+    mStringBundle-&gt;GetStringFromName(NS_ConvertUTF16toUTF8(aStringName).get(), getter_Copies(outStr));</span>
<a href="#l21.14"></a><span id="l21.14">   return;</span>
<a href="#l21.15"></a><span id="l21.15"> }</span>
<a href="#l21.16"></a><span id="l21.16"> </span>
<a href="#l21.17"></a><span id="l21.17"> //-----------------------------------------------------------</span>
<a href="#l21.18"></a><span id="l21.18"> void</span>
<a href="#l21.19"></a><span id="l21.19"> nsMsgPrintEngine::PrintMsgWindow()</span>
<a href="#l21.20"></a><span id="l21.20"> {</span>
<a href="#l21.21"></a><span id="l21.21">   const char* kMsgKeys[] = {&quot;PrintingMessage&quot;,  &quot;PrintPreviewMessage&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mailnews/base/src/nsMsgStatusFeedback.cpp</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgStatusFeedback.cpp</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -82,17 +82,17 @@ nsMsgStatusFeedback::OnStateChange(nsIWe</span>
<a href="#l22.4"></a><span id="l22.4">   NS_ENSURE_TRUE(mBundle, NS_ERROR_NULL_POINTER);</span>
<a href="#l22.5"></a><span id="l22.5">   if (aProgressStateFlags &amp; STATE_IS_NETWORK)</span>
<a href="#l22.6"></a><span id="l22.6">   {</span>
<a href="#l22.7"></a><span id="l22.7">     if (aProgressStateFlags &amp; STATE_START)</span>
<a href="#l22.8"></a><span id="l22.8">     {</span>
<a href="#l22.9"></a><span id="l22.9">       m_lastPercent = 0;</span>
<a href="#l22.10"></a><span id="l22.10">       StartMeteors();</span>
<a href="#l22.11"></a><span id="l22.11">       nsString loadingDocument;</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-      rv = mBundle-&gt;GetStringFromName(u&quot;documentLoading&quot;,</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+      rv = mBundle-&gt;GetStringFromName(&quot;documentLoading&quot;,</span>
<a href="#l22.14"></a><span id="l22.14">                                       getter_Copies(loadingDocument));</span>
<a href="#l22.15"></a><span id="l22.15">       if (NS_SUCCEEDED(rv))</span>
<a href="#l22.16"></a><span id="l22.16">         ShowStatusString(loadingDocument);</span>
<a href="#l22.17"></a><span id="l22.17">     }</span>
<a href="#l22.18"></a><span id="l22.18">     else if (aProgressStateFlags &amp; STATE_STOP)</span>
<a href="#l22.19"></a><span id="l22.19">     {</span>
<a href="#l22.20"></a><span id="l22.20">       // if we are loading message for display purposes, this STATE_STOP notification is </span>
<a href="#l22.21"></a><span id="l22.21">       // the only notification we get when layout is actually done rendering the message. We need</span>
<a href="#l22.22"></a><span id="l22.22" class="difflineat">@@ -136,17 +136,17 @@ nsMsgStatusFeedback::OnStateChange(nsIWe</span>
<a href="#l22.23"></a><span id="l22.23">               if (msgFolder &amp;&amp; msgHdr)</span>
<a href="#l22.24"></a><span id="l22.24">                 msgFolder-&gt;NotifyPropertyFlagChanged(msgHdr, m_msgLoadedAtom, 0, 1);</span>
<a href="#l22.25"></a><span id="l22.25">             }</span>
<a href="#l22.26"></a><span id="l22.26">           }</span>
<a href="#l22.27"></a><span id="l22.27">         }</span>
<a href="#l22.28"></a><span id="l22.28">       }</span>
<a href="#l22.29"></a><span id="l22.29">       StopMeteors();</span>
<a href="#l22.30"></a><span id="l22.30">       nsString documentDone;</span>
<a href="#l22.31"></a><span id="l22.31" class="difflineminus">-      rv = mBundle-&gt;GetStringFromName(u&quot;documentDone&quot;,</span>
<a href="#l22.32"></a><span id="l22.32" class="difflineplus">+      rv = mBundle-&gt;GetStringFromName(&quot;documentDone&quot;,</span>
<a href="#l22.33"></a><span id="l22.33">                                       getter_Copies(documentDone));</span>
<a href="#l22.34"></a><span id="l22.34">       if (NS_SUCCEEDED(rv))</span>
<a href="#l22.35"></a><span id="l22.35">         ShowStatusString(documentDone);</span>
<a href="#l22.36"></a><span id="l22.36">     }</span>
<a href="#l22.37"></a><span id="l22.37">   }</span>
<a href="#l22.38"></a><span id="l22.38">   return NS_OK;</span>
<a href="#l22.39"></a><span id="l22.39"> }</span>
<a href="#l22.40"></a><span id="l22.40"> </span>
<a href="#l22.41"></a><span id="l22.41" class="difflineat">@@ -286,17 +286,17 @@ NS_IMETHODIMP nsMsgStatusFeedback::OnSta</span>
<a href="#l22.42"></a><span id="l22.42">   nsString statusMessage;</span>
<a href="#l22.43"></a><span id="l22.43">   if (!str.IsEmpty() &amp;&amp; str.Find(accountName) == kNotFound)</span>
<a href="#l22.44"></a><span id="l22.44">   {</span>
<a href="#l22.45"></a><span id="l22.45">     nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l22.46"></a><span id="l22.46">     rv = sbs-&gt;CreateBundle(MSGS_URL, getter_AddRefs(bundle));</span>
<a href="#l22.47"></a><span id="l22.47">     const char16_t *params[] = { accountName.get(),</span>
<a href="#l22.48"></a><span id="l22.48">                                   str.get() };</span>
<a href="#l22.49"></a><span id="l22.49">     rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l22.50"></a><span id="l22.50" class="difflineminus">-      u&quot;statusMessage&quot;,</span>
<a href="#l22.51"></a><span id="l22.51" class="difflineplus">+      &quot;statusMessage&quot;,</span>
<a href="#l22.52"></a><span id="l22.52">       params, 2, getter_Copies(statusMessage));</span>
<a href="#l22.53"></a><span id="l22.53">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l22.54"></a><span id="l22.54">   }</span>
<a href="#l22.55"></a><span id="l22.55">   else</span>
<a href="#l22.56"></a><span id="l22.56">   {</span>
<a href="#l22.57"></a><span id="l22.57">     statusMessage.Assign(str);</span>
<a href="#l22.58"></a><span id="l22.58">   }</span>
<a href="#l22.59"></a><span id="l22.59">   return ShowStatusString(statusMessage);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mailnews/base/src/nsSpamSettings.cpp</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mailnews/base/src/nsSpamSettings.cpp</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -669,17 +669,17 @@ NS_IMETHODIMP nsSpamSettings::LogJunkHit</span>
<a href="#l23.4"></a><span id="l23.4">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l23.5"></a><span id="l23.5">   rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/filter.properties&quot;,</span>
<a href="#l23.6"></a><span id="l23.6">     getter_AddRefs(bundle));</span>
<a href="#l23.7"></a><span id="l23.7">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l23.8"></a><span id="l23.8"> </span>
<a href="#l23.9"></a><span id="l23.9">   const char16_t *junkLogDetectFormatStrings[3] = { authorValue.get(), subjectValue.get(), dateValue.get() };</span>
<a href="#l23.10"></a><span id="l23.10">   nsString junkLogDetectStr;</span>
<a href="#l23.11"></a><span id="l23.11">   rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-    u&quot;junkLogDetectStr&quot;,</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+    &quot;junkLogDetectStr&quot;,</span>
<a href="#l23.14"></a><span id="l23.14">     junkLogDetectFormatStrings, 3,</span>
<a href="#l23.15"></a><span id="l23.15">     getter_Copies(junkLogDetectStr));</span>
<a href="#l23.16"></a><span id="l23.16">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l23.17"></a><span id="l23.17"> </span>
<a href="#l23.18"></a><span id="l23.18">   buffer += NS_ConvertUTF16toUTF8(junkLogDetectStr);</span>
<a href="#l23.19"></a><span id="l23.19">   buffer +=  &quot;\n&quot;;</span>
<a href="#l23.20"></a><span id="l23.20"> </span>
<a href="#l23.21"></a><span id="l23.21">   if (aMoveMessage) {</span>
<a href="#l23.22"></a><span id="l23.22" class="difflineat">@@ -691,17 +691,17 @@ NS_IMETHODIMP nsSpamSettings::LogJunkHit</span>
<a href="#l23.23"></a><span id="l23.23">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l23.24"></a><span id="l23.24"> </span>
<a href="#l23.25"></a><span id="l23.25">     NS_ConvertASCIItoUTF16 msgIdValue(msgId);</span>
<a href="#l23.26"></a><span id="l23.26">     NS_ConvertASCIItoUTF16 junkFolderURIValue(junkFolderURI);</span>
<a href="#l23.27"></a><span id="l23.27"> </span>
<a href="#l23.28"></a><span id="l23.28">     const char16_t *logMoveFormatStrings[2] = { msgIdValue.get(), junkFolderURIValue.get() };</span>
<a href="#l23.29"></a><span id="l23.29">     nsString logMoveStr;</span>
<a href="#l23.30"></a><span id="l23.30">     rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l23.31"></a><span id="l23.31" class="difflineminus">-      u&quot;logMoveStr&quot;,</span>
<a href="#l23.32"></a><span id="l23.32" class="difflineplus">+      &quot;logMoveStr&quot;,</span>
<a href="#l23.33"></a><span id="l23.33">       logMoveFormatStrings, 2,</span>
<a href="#l23.34"></a><span id="l23.34">       getter_Copies(logMoveStr));</span>
<a href="#l23.35"></a><span id="l23.35">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l23.36"></a><span id="l23.36"> </span>
<a href="#l23.37"></a><span id="l23.37">     buffer += NS_ConvertUTF16toUTF8(logMoveStr);</span>
<a href="#l23.38"></a><span id="l23.38">     buffer += &quot;\n&quot;;</span>
<a href="#l23.39"></a><span id="l23.39">   }</span>
<a href="#l23.40"></a><span id="l23.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mailnews/base/util/nsMsgDBFolder.cpp</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mailnews/base/util/nsMsgDBFolder.cpp</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -1916,25 +1916,25 @@ nsresult nsMsgDBFolder::HandleAutoCompac</span>
<a href="#l24.4"></a><span id="l24.4">           NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l24.5"></a><span id="l24.5">           nsString dialogTitle;</span>
<a href="#l24.6"></a><span id="l24.6">           nsString confirmString;</span>
<a href="#l24.7"></a><span id="l24.7">           nsString checkboxText;</span>
<a href="#l24.8"></a><span id="l24.8">           nsString buttonCompactNowText;</span>
<a href="#l24.9"></a><span id="l24.9">           nsAutoString compactSize;</span>
<a href="#l24.10"></a><span id="l24.10">           FormatFileSize(totalExpungedBytes, true, compactSize);</span>
<a href="#l24.11"></a><span id="l24.11">           const char16_t* params[] = { compactSize.get() };</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-          rv = bundle-&gt;GetStringFromName(u&quot;autoCompactAllFoldersTitle&quot;, getter_Copies(dialogTitle));</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+          rv = bundle-&gt;GetStringFromName(&quot;autoCompactAllFoldersTitle&quot;, getter_Copies(dialogTitle));</span>
<a href="#l24.14"></a><span id="l24.14">           NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l24.15"></a><span id="l24.15" class="difflineminus">-          rv = bundle-&gt;FormatStringFromName(u&quot;autoCompactAllFoldersText&quot;,</span>
<a href="#l24.16"></a><span id="l24.16" class="difflineplus">+          rv = bundle-&gt;FormatStringFromName(&quot;autoCompactAllFoldersText&quot;,</span>
<a href="#l24.17"></a><span id="l24.17">                                             params, 1, getter_Copies(confirmString));</span>
<a href="#l24.18"></a><span id="l24.18">           NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l24.19"></a><span id="l24.19" class="difflineminus">-          rv = bundle-&gt;GetStringFromName(u&quot;autoCompactAlwaysAskCheckbox&quot;,</span>
<a href="#l24.20"></a><span id="l24.20" class="difflineplus">+          rv = bundle-&gt;GetStringFromName(&quot;autoCompactAlwaysAskCheckbox&quot;,</span>
<a href="#l24.21"></a><span id="l24.21">                                          getter_Copies(checkboxText));</span>
<a href="#l24.22"></a><span id="l24.22">           NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l24.23"></a><span id="l24.23" class="difflineminus">-          rv = bundle-&gt;GetStringFromName(u&quot;compactNowButton&quot;,</span>
<a href="#l24.24"></a><span id="l24.24" class="difflineplus">+          rv = bundle-&gt;GetStringFromName(&quot;compactNowButton&quot;,</span>
<a href="#l24.25"></a><span id="l24.25">                                          getter_Copies(buttonCompactNowText));</span>
<a href="#l24.26"></a><span id="l24.26">           NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l24.27"></a><span id="l24.27">           bool alwaysAsk = true; // &quot;Always ask...&quot; - checked by default.</span>
<a href="#l24.28"></a><span id="l24.28">           int32_t buttonPressed = 0;</span>
<a href="#l24.29"></a><span id="l24.29"> </span>
<a href="#l24.30"></a><span id="l24.30">           nsCOMPtr&lt;nsIPrompt&gt; dialog;</span>
<a href="#l24.31"></a><span id="l24.31">           rv = aWindow-&gt;GetPromptDialog(getter_AddRefs(dialog));</span>
<a href="#l24.32"></a><span id="l24.32">           NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l24.33"></a><span id="l24.33" class="difflineat">@@ -2920,37 +2920,37 @@ nsMsgDBFolder::initializeStrings()</span>
<a href="#l24.34"></a><span id="l24.34">   nsCOMPtr&lt;nsIStringBundleService&gt; bundleService =</span>
<a href="#l24.35"></a><span id="l24.35">     mozilla::services::GetStringBundleService();</span>
<a href="#l24.36"></a><span id="l24.36">   NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l24.37"></a><span id="l24.37">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l24.38"></a><span id="l24.38">   rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/messenger.properties&quot;,</span>
<a href="#l24.39"></a><span id="l24.39">                                    getter_AddRefs(bundle));</span>
<a href="#l24.40"></a><span id="l24.40">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l24.41"></a><span id="l24.41"> </span>
<a href="#l24.42"></a><span id="l24.42" class="difflineminus">-  bundle-&gt;GetStringFromName(u&quot;inboxFolderName&quot;,</span>
<a href="#l24.43"></a><span id="l24.43" class="difflineplus">+  bundle-&gt;GetStringFromName(&quot;inboxFolderName&quot;,</span>
<a href="#l24.44"></a><span id="l24.44">                             &amp;kLocalizedInboxName);</span>
<a href="#l24.45"></a><span id="l24.45" class="difflineminus">-  bundle-&gt;GetStringFromName(u&quot;trashFolderName&quot;,</span>
<a href="#l24.46"></a><span id="l24.46" class="difflineplus">+  bundle-&gt;GetStringFromName(&quot;trashFolderName&quot;,</span>
<a href="#l24.47"></a><span id="l24.47">                             &amp;kLocalizedTrashName);</span>
<a href="#l24.48"></a><span id="l24.48" class="difflineminus">-  bundle-&gt;GetStringFromName(u&quot;sentFolderName&quot;,</span>
<a href="#l24.49"></a><span id="l24.49" class="difflineplus">+  bundle-&gt;GetStringFromName(&quot;sentFolderName&quot;,</span>
<a href="#l24.50"></a><span id="l24.50">                             &amp;kLocalizedSentName);</span>
<a href="#l24.51"></a><span id="l24.51" class="difflineminus">-  bundle-&gt;GetStringFromName(u&quot;draftsFolderName&quot;,</span>
<a href="#l24.52"></a><span id="l24.52" class="difflineplus">+  bundle-&gt;GetStringFromName(&quot;draftsFolderName&quot;,</span>
<a href="#l24.53"></a><span id="l24.53">                             &amp;kLocalizedDraftsName);</span>
<a href="#l24.54"></a><span id="l24.54" class="difflineminus">-  bundle-&gt;GetStringFromName(u&quot;templatesFolderName&quot;,</span>
<a href="#l24.55"></a><span id="l24.55" class="difflineplus">+  bundle-&gt;GetStringFromName(&quot;templatesFolderName&quot;,</span>
<a href="#l24.56"></a><span id="l24.56">                             &amp;kLocalizedTemplatesName);</span>
<a href="#l24.57"></a><span id="l24.57" class="difflineminus">-  bundle-&gt;GetStringFromName(u&quot;junkFolderName&quot;,</span>
<a href="#l24.58"></a><span id="l24.58" class="difflineplus">+  bundle-&gt;GetStringFromName(&quot;junkFolderName&quot;,</span>
<a href="#l24.59"></a><span id="l24.59">                             &amp;kLocalizedJunkName);</span>
<a href="#l24.60"></a><span id="l24.60" class="difflineminus">-  bundle-&gt;GetStringFromName(u&quot;outboxFolderName&quot;,</span>
<a href="#l24.61"></a><span id="l24.61" class="difflineplus">+  bundle-&gt;GetStringFromName(&quot;outboxFolderName&quot;,</span>
<a href="#l24.62"></a><span id="l24.62">                             &amp;kLocalizedUnsentName);</span>
<a href="#l24.63"></a><span id="l24.63" class="difflineminus">-  bundle-&gt;GetStringFromName(u&quot;archivesFolderName&quot;,</span>
<a href="#l24.64"></a><span id="l24.64" class="difflineplus">+  bundle-&gt;GetStringFromName(&quot;archivesFolderName&quot;,</span>
<a href="#l24.65"></a><span id="l24.65">                             &amp;kLocalizedArchivesName);</span>
<a href="#l24.66"></a><span id="l24.66"> </span>
<a href="#l24.67"></a><span id="l24.67">   nsCOMPtr&lt;nsIStringBundle&gt; brandBundle;</span>
<a href="#l24.68"></a><span id="l24.68">   rv = bundleService-&gt;CreateBundle(&quot;chrome://branding/locale/brand.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l24.69"></a><span id="l24.69">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l24.70"></a><span id="l24.70" class="difflineminus">-  bundle-&gt;GetStringFromName(u&quot;brandShortName&quot;,</span>
<a href="#l24.71"></a><span id="l24.71" class="difflineplus">+  bundle-&gt;GetStringFromName(&quot;brandShortName&quot;,</span>
<a href="#l24.72"></a><span id="l24.72">                             &amp;kLocalizedBrandShortName);</span>
<a href="#l24.73"></a><span id="l24.73">   return NS_OK;</span>
<a href="#l24.74"></a><span id="l24.74"> }</span>
<a href="#l24.75"></a><span id="l24.75"> </span>
<a href="#l24.76"></a><span id="l24.76"> nsresult</span>
<a href="#l24.77"></a><span id="l24.77"> nsMsgDBFolder::createCollationKeyGenerator()</span>
<a href="#l24.78"></a><span id="l24.78"> {</span>
<a href="#l24.79"></a><span id="l24.79">   nsresult rv = NS_OK;</span>
<a href="#l24.80"></a><span id="l24.80" class="difflineat">@@ -3850,17 +3850,17 @@ nsMsgDBFolder::ConfirmAutoFolderRename(n</span>
<a href="#l24.81"></a><span id="l24.81">   const char16_t *formatStrings[] =</span>
<a href="#l24.82"></a><span id="l24.82">   {</span>
<a href="#l24.83"></a><span id="l24.83">     aOldName.get(),</span>
<a href="#l24.84"></a><span id="l24.84">     folderName.get(),</span>
<a href="#l24.85"></a><span id="l24.85">     aNewName.get()</span>
<a href="#l24.86"></a><span id="l24.86">   };</span>
<a href="#l24.87"></a><span id="l24.87"> </span>
<a href="#l24.88"></a><span id="l24.88">   nsString confirmString;</span>
<a href="#l24.89"></a><span id="l24.89" class="difflineminus">-  rv = bundle-&gt;FormatStringFromName(u&quot;confirmDuplicateFolderRename&quot;,</span>
<a href="#l24.90"></a><span id="l24.90" class="difflineplus">+  rv = bundle-&gt;FormatStringFromName(&quot;confirmDuplicateFolderRename&quot;,</span>
<a href="#l24.91"></a><span id="l24.91">                                     formatStrings, 3, getter_Copies(confirmString));</span>
<a href="#l24.92"></a><span id="l24.92">   if (NS_WARN_IF(NS_FAILED(rv))) {</span>
<a href="#l24.93"></a><span id="l24.93">     return false;</span>
<a href="#l24.94"></a><span id="l24.94">   }</span>
<a href="#l24.95"></a><span id="l24.95"> </span>
<a href="#l24.96"></a><span id="l24.96">   bool confirmed = false;</span>
<a href="#l24.97"></a><span id="l24.97">   rv = ThrowConfirmationPrompt(msgWindow, confirmString, &amp;confirmed);</span>
<a href="#l24.98"></a><span id="l24.98">   if (NS_WARN_IF(NS_FAILED(rv))) {</span>
<a href="#l24.99"></a><span id="l24.99" class="difflineat">@@ -5198,17 +5198,17 @@ nsMsgDBFolder::GetBaseStringBundle(nsISt</span>
<a href="#l24.100"></a><span id="l24.100"> </span>
<a href="#l24.101"></a><span id="l24.101"> nsresult //Do not use this routine if you have to call it very often because it creates a new bundle each time</span>
<a href="#l24.102"></a><span id="l24.102"> nsMsgDBFolder::GetStringFromBundle(const char *msgName, nsString&amp; aResult)</span>
<a href="#l24.103"></a><span id="l24.103"> {</span>
<a href="#l24.104"></a><span id="l24.104">   nsresult rv;</span>
<a href="#l24.105"></a><span id="l24.105">   nsCOMPtr &lt;nsIStringBundle&gt; bundle;</span>
<a href="#l24.106"></a><span id="l24.106">   rv = GetBaseStringBundle(getter_AddRefs(bundle));</span>
<a href="#l24.107"></a><span id="l24.107">   if (NS_SUCCEEDED(rv) &amp;&amp; bundle)</span>
<a href="#l24.108"></a><span id="l24.108" class="difflineminus">-    rv = bundle-&gt;GetStringFromName(NS_ConvertASCIItoUTF16(msgName).get(), getter_Copies(aResult));</span>
<a href="#l24.109"></a><span id="l24.109" class="difflineplus">+    rv = bundle-&gt;GetStringFromName(msgName, getter_Copies(aResult));</span>
<a href="#l24.110"></a><span id="l24.110">   return rv;</span>
<a href="#l24.111"></a><span id="l24.111"> }</span>
<a href="#l24.112"></a><span id="l24.112"> </span>
<a href="#l24.113"></a><span id="l24.113"> nsresult</span>
<a href="#l24.114"></a><span id="l24.114"> nsMsgDBFolder::ThrowConfirmationPrompt(nsIMsgWindow *msgWindow, const nsAString&amp; confirmString, bool *confirmed)</span>
<a href="#l24.115"></a><span id="l24.115"> {</span>
<a href="#l24.116"></a><span id="l24.116">   if (msgWindow)</span>
<a href="#l24.117"></a><span id="l24.117">   {</span>
<a href="#l24.118"></a><span id="l24.118" class="difflineat">@@ -5235,17 +5235,17 @@ nsMsgDBFolder::GetStringWithFolderNameFr</span>
<a href="#l24.119"></a><span id="l24.119">     GetName(folderName);</span>
<a href="#l24.120"></a><span id="l24.120">     const char16_t *formatStrings[] =</span>
<a href="#l24.121"></a><span id="l24.121">     {</span>
<a href="#l24.122"></a><span id="l24.122">       folderName.get(),</span>
<a href="#l24.123"></a><span id="l24.123">       kLocalizedBrandShortName</span>
<a href="#l24.124"></a><span id="l24.124">     };</span>
<a href="#l24.125"></a><span id="l24.125"> </span>
<a href="#l24.126"></a><span id="l24.126">     nsString resultStr;</span>
<a href="#l24.127"></a><span id="l24.127" class="difflineminus">-    rv = bundle-&gt;FormatStringFromName(NS_ConvertASCIItoUTF16(msgName).get(),</span>
<a href="#l24.128"></a><span id="l24.128" class="difflineplus">+    rv = bundle-&gt;FormatStringFromName(msgName,</span>
<a href="#l24.129"></a><span id="l24.129">                                       formatStrings, 2, getter_Copies(resultStr));</span>
<a href="#l24.130"></a><span id="l24.130">     if (NS_SUCCEEDED(rv))</span>
<a href="#l24.131"></a><span id="l24.131">       aResult.Assign(resultStr);</span>
<a href="#l24.132"></a><span id="l24.132">   }</span>
<a href="#l24.133"></a><span id="l24.133">   return rv;</span>
<a href="#l24.134"></a><span id="l24.134"> }</span>
<a href="#l24.135"></a><span id="l24.135"> </span>
<a href="#l24.136"></a><span id="l24.136"> NS_IMETHODIMP nsMsgDBFolder::ConfirmFolderDeletionForFilter(nsIMsgWindow *msgWindow, bool *confirmed)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mailnews/base/util/nsMsgIncomingServer.cpp</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mailnews/base/util/nsMsgIncomingServer.cpp</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -1637,18 +1637,18 @@ NS_IMETHODIMP nsMsgIncomingServer::Displ</span>
<a href="#l25.4"></a><span id="l25.4"> </span>
<a href="#l25.5"></a><span id="l25.5">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l25.6"></a><span id="l25.6">   nsresult rv = bundleService-&gt;CreateBundle(BASE_MSGS_URL, getter_AddRefs(bundle));</span>
<a href="#l25.7"></a><span id="l25.7">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l25.8"></a><span id="l25.8">   if (bundle)</span>
<a href="#l25.9"></a><span id="l25.9">   {</span>
<a href="#l25.10"></a><span id="l25.10">     nsString errorMsgTitle;</span>
<a href="#l25.11"></a><span id="l25.11">     nsString errorMsgBody;</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-    bundle-&gt;GetStringFromName(u&quot;nocachedbodybody2&quot;, getter_Copies(errorMsgBody));</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineminus">-    bundle-&gt;GetStringFromName(u&quot;nocachedbodytitle&quot;, getter_Copies(errorMsgTitle));</span>
<a href="#l25.14"></a><span id="l25.14" class="difflineplus">+    bundle-&gt;GetStringFromName(&quot;nocachedbodybody2&quot;, getter_Copies(errorMsgBody));</span>
<a href="#l25.15"></a><span id="l25.15" class="difflineplus">+    bundle-&gt;GetStringFromName(&quot;nocachedbodytitle&quot;, getter_Copies(errorMsgTitle));</span>
<a href="#l25.16"></a><span id="l25.16">     aMsgWindow-&gt;DisplayHTMLInMessagePane(errorMsgTitle, errorMsgBody, true);</span>
<a href="#l25.17"></a><span id="l25.17">   }</span>
<a href="#l25.18"></a><span id="l25.18"> </span>
<a href="#l25.19"></a><span id="l25.19">   return NS_OK;</span>
<a href="#l25.20"></a><span id="l25.20"> }</span>
<a href="#l25.21"></a><span id="l25.21"> </span>
<a href="#l25.22"></a><span id="l25.22"> // Called only during the migration process. A unique name is generated for the</span>
<a href="#l25.23"></a><span id="l25.23"> // migrated account.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mailnews/base/util/nsMsgProtocol.cpp</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mailnews/base/util/nsMsgProtocol.cpp</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -1546,15 +1546,15 @@ char16_t *FormatStringWithHostNameByName</span>
<a href="#l26.4"></a><span id="l26.4">   NS_ENSURE_SUCCESS(rv, nullptr);</span>
<a href="#l26.5"></a><span id="l26.5"> </span>
<a href="#l26.6"></a><span id="l26.6">   nsCString hostName;</span>
<a href="#l26.7"></a><span id="l26.7">   rv = server-&gt;GetRealHostName(hostName);</span>
<a href="#l26.8"></a><span id="l26.8">   NS_ENSURE_SUCCESS(rv, nullptr);</span>
<a href="#l26.9"></a><span id="l26.9"> </span>
<a href="#l26.10"></a><span id="l26.10">   NS_ConvertASCIItoUTF16 hostStr(hostName);</span>
<a href="#l26.11"></a><span id="l26.11">   const char16_t *params[] = { hostStr.get() };</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-  rv = sBundle-&gt;FormatStringFromName(stringName, params, 1, &amp;ptrv);</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+  rv = sBundle-&gt;FormatStringFromName(NS_ConvertUTF16toUTF8(stringName).get(), params, 1, &amp;ptrv);</span>
<a href="#l26.14"></a><span id="l26.14">   NS_ENSURE_SUCCESS(rv, nullptr);</span>
<a href="#l26.15"></a><span id="l26.15"> </span>
<a href="#l26.16"></a><span id="l26.16">   return ptrv;</span>
<a href="#l26.17"></a><span id="l26.17"> }</span>
<a href="#l26.18"></a><span id="l26.18"> </span>
<a href="#l26.19"></a><span id="l26.19"> // vim: ts=2 sw=2</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mailnews/base/util/nsMsgUtils.cpp</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mailnews/base/util/nsMsgUtils.cpp</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -473,23 +473,21 @@ nsresult NS_MsgHashIfNecessary(nsAutoStr</span>
<a href="#l27.4"></a><span id="l27.4">     name.Append(NS_ConvertASCIItoUTF16(hashedname));</span>
<a href="#l27.5"></a><span id="l27.5">   }</span>
<a href="#l27.6"></a><span id="l27.6"> </span>
<a href="#l27.7"></a><span id="l27.7">   return NS_OK;</span>
<a href="#l27.8"></a><span id="l27.8"> }</span>
<a href="#l27.9"></a><span id="l27.9"> </span>
<a href="#l27.10"></a><span id="l27.10"> nsresult FormatFileSize(int64_t size, bool useKB, nsAString &amp;formattedSize)</span>
<a href="#l27.11"></a><span id="l27.11"> {</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-  NS_NAMED_LITERAL_STRING(byteAbbr, &quot;byteAbbreviation2&quot;);</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineminus">-  NS_NAMED_LITERAL_STRING(kbAbbr,   &quot;kiloByteAbbreviation2&quot;);</span>
<a href="#l27.14"></a><span id="l27.14" class="difflineminus">-  NS_NAMED_LITERAL_STRING(mbAbbr,   &quot;megaByteAbbreviation2&quot;);</span>
<a href="#l27.15"></a><span id="l27.15" class="difflineminus">-  NS_NAMED_LITERAL_STRING(gbAbbr,   &quot;gigaByteAbbreviation2&quot;);</span>
<a href="#l27.16"></a><span id="l27.16" class="difflineminus">-</span>
<a href="#l27.17"></a><span id="l27.17" class="difflineminus">-  const char16_t *sizeAbbrNames[] = {</span>
<a href="#l27.18"></a><span id="l27.18" class="difflineminus">-    byteAbbr.get(), kbAbbr.get(), mbAbbr.get(), gbAbbr.get()</span>
<a href="#l27.19"></a><span id="l27.19" class="difflineplus">+  const char *sizeAbbrNames[] = {</span>
<a href="#l27.20"></a><span id="l27.20" class="difflineplus">+    &quot;byteAbbreviation2&quot;,</span>
<a href="#l27.21"></a><span id="l27.21" class="difflineplus">+    &quot;kiloByteAbbreviation2&quot;,</span>
<a href="#l27.22"></a><span id="l27.22" class="difflineplus">+    &quot;megaByteAbbreviation2&quot;,</span>
<a href="#l27.23"></a><span id="l27.23" class="difflineplus">+    &quot;gigaByteAbbreviation2&quot;,</span>
<a href="#l27.24"></a><span id="l27.24">   };</span>
<a href="#l27.25"></a><span id="l27.25"> </span>
<a href="#l27.26"></a><span id="l27.26">   nsresult rv;</span>
<a href="#l27.27"></a><span id="l27.27"> </span>
<a href="#l27.28"></a><span id="l27.28">   nsCOMPtr&lt;nsIStringBundleService&gt; bundleSvc =</span>
<a href="#l27.29"></a><span id="l27.29">     mozilla::services::GetStringBundleService();</span>
<a href="#l27.30"></a><span id="l27.30">   NS_ENSURE_TRUE(bundleSvc, NS_ERROR_UNEXPECTED);</span>
<a href="#l27.31"></a><span id="l27.31"> </span>
<a href="#l27.32"></a><span id="l27.32" class="difflineat">@@ -1760,43 +1758,43 @@ NS_MSG_BASE nsresult MsgPromptLoginFaile</span>
<a href="#l27.33"></a><span id="l27.33">                                getter_AddRefs(bundle));</span>
<a href="#l27.34"></a><span id="l27.34">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l27.35"></a><span id="l27.35"> </span>
<a href="#l27.36"></a><span id="l27.36">   nsString message;</span>
<a href="#l27.37"></a><span id="l27.37">   NS_ConvertUTF8toUTF16 hostNameUTF16(aHostname);</span>
<a href="#l27.38"></a><span id="l27.38">   NS_ConvertUTF8toUTF16 userNameUTF16(aUsername);</span>
<a href="#l27.39"></a><span id="l27.39">   const char16_t *formatStrings[] = { hostNameUTF16.get(), userNameUTF16.get() };</span>
<a href="#l27.40"></a><span id="l27.40"> </span>
<a href="#l27.41"></a><span id="l27.41" class="difflineminus">-  rv = bundle-&gt;FormatStringFromName(u&quot;mailServerLoginFailed2&quot;,</span>
<a href="#l27.42"></a><span id="l27.42" class="difflineplus">+  rv = bundle-&gt;FormatStringFromName(&quot;mailServerLoginFailed2&quot;,</span>
<a href="#l27.43"></a><span id="l27.43">                                     formatStrings, 2,</span>
<a href="#l27.44"></a><span id="l27.44">                                     getter_Copies(message));</span>
<a href="#l27.45"></a><span id="l27.45">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l27.46"></a><span id="l27.46"> </span>
<a href="#l27.47"></a><span id="l27.47">   nsString title;</span>
<a href="#l27.48"></a><span id="l27.48">   if (aAccountname.IsEmpty()) {</span>
<a href="#l27.49"></a><span id="l27.49">     // Account name may be empty e.g. on a SMTP server.</span>
<a href="#l27.50"></a><span id="l27.50">     rv = bundle-&gt;GetStringFromName(</span>
<a href="#l27.51"></a><span id="l27.51" class="difflineminus">-      u&quot;mailServerLoginFailedTitle&quot;, getter_Copies(title));</span>
<a href="#l27.52"></a><span id="l27.52" class="difflineplus">+      &quot;mailServerLoginFailedTitle&quot;, getter_Copies(title));</span>
<a href="#l27.53"></a><span id="l27.53">   } else {</span>
<a href="#l27.54"></a><span id="l27.54">     const char16_t *formatStrings[] = { aAccountname.BeginReading() };</span>
<a href="#l27.55"></a><span id="l27.55">     rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l27.56"></a><span id="l27.56" class="difflineminus">-      u&quot;mailServerLoginFailedTitleWithAccount&quot;,</span>
<a href="#l27.57"></a><span id="l27.57" class="difflineplus">+      &quot;mailServerLoginFailedTitleWithAccount&quot;,</span>
<a href="#l27.58"></a><span id="l27.58">       formatStrings, 1, getter_Copies(title));</span>
<a href="#l27.59"></a><span id="l27.59">   }</span>
<a href="#l27.60"></a><span id="l27.60">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l27.61"></a><span id="l27.61"> </span>
<a href="#l27.62"></a><span id="l27.62">   nsString button0;</span>
<a href="#l27.63"></a><span id="l27.63">   rv = bundle-&gt;GetStringFromName(</span>
<a href="#l27.64"></a><span id="l27.64" class="difflineminus">-    u&quot;mailServerLoginFailedRetryButton&quot;,</span>
<a href="#l27.65"></a><span id="l27.65" class="difflineplus">+    &quot;mailServerLoginFailedRetryButton&quot;,</span>
<a href="#l27.66"></a><span id="l27.66">     getter_Copies(button0));</span>
<a href="#l27.67"></a><span id="l27.67">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l27.68"></a><span id="l27.68"> </span>
<a href="#l27.69"></a><span id="l27.69">   nsString button2;</span>
<a href="#l27.70"></a><span id="l27.70">   rv = bundle-&gt;GetStringFromName(</span>
<a href="#l27.71"></a><span id="l27.71" class="difflineminus">-    u&quot;mailServerLoginFailedEnterNewPasswordButton&quot;,</span>
<a href="#l27.72"></a><span id="l27.72" class="difflineplus">+    &quot;mailServerLoginFailedEnterNewPasswordButton&quot;,</span>
<a href="#l27.73"></a><span id="l27.73">     getter_Copies(button2));</span>
<a href="#l27.74"></a><span id="l27.74">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l27.75"></a><span id="l27.75"> </span>
<a href="#l27.76"></a><span id="l27.76">   bool dummyValue = false;</span>
<a href="#l27.77"></a><span id="l27.77">   return dialog-&gt;ConfirmEx(</span>
<a href="#l27.78"></a><span id="l27.78">     title.get(), message.get(),</span>
<a href="#l27.79"></a><span id="l27.79">     (nsIPrompt::BUTTON_TITLE_IS_STRING * nsIPrompt::BUTTON_POS_0) +</span>
<a href="#l27.80"></a><span id="l27.80">     (nsIPrompt::BUTTON_TITLE_CANCEL * nsIPrompt::BUTTON_POS_1) +</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mailnews/compose/src/nsComposeStrings.cpp</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mailnews/compose/src/nsComposeStrings.cpp</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -1,116 +1,116 @@</span>
<a href="#l28.4"></a><span id="l28.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l28.5"></a><span id="l28.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l28.6"></a><span id="l28.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l28.7"></a><span id="l28.7"> </span>
<a href="#l28.8"></a><span id="l28.8"> #include &quot;nsComposeStrings.h&quot;</span>
<a href="#l28.9"></a><span id="l28.9"> </span>
<a href="#l28.10"></a><span id="l28.10" class="difflineminus">-const char16_t* errorStringNameForErrorCode(nsresult aCode)</span>
<a href="#l28.11"></a><span id="l28.11" class="difflineplus">+const char* errorStringNameForErrorCode(nsresult aCode)</span>
<a href="#l28.12"></a><span id="l28.12"> {</span>
<a href="#l28.13"></a><span id="l28.13"> #ifdef __GNUC__</span>
<a href="#l28.14"></a><span id="l28.14"> // Temporary workaroung until bug 783526 is fixed.</span>
<a href="#l28.15"></a><span id="l28.15"> #pragma GCC diagnostic push</span>
<a href="#l28.16"></a><span id="l28.16"> #pragma GCC diagnostic ignored &quot;-Wswitch&quot;</span>
<a href="#l28.17"></a><span id="l28.17"> #endif</span>
<a href="#l28.18"></a><span id="l28.18">   switch(aCode)</span>
<a href="#l28.19"></a><span id="l28.19">   {</span>
<a href="#l28.20"></a><span id="l28.20">     case NS_MSG_UNABLE_TO_OPEN_FILE:</span>
<a href="#l28.21"></a><span id="l28.21" class="difflineminus">-      return u&quot;unableToOpenFile&quot;;</span>
<a href="#l28.22"></a><span id="l28.22" class="difflineplus">+      return &quot;unableToOpenFile&quot;;</span>
<a href="#l28.23"></a><span id="l28.23">     case NS_MSG_UNABLE_TO_OPEN_TMP_FILE:</span>
<a href="#l28.24"></a><span id="l28.24" class="difflineminus">-      return u&quot;unableToOpenTmpFile&quot;;</span>
<a href="#l28.25"></a><span id="l28.25" class="difflineplus">+      return &quot;unableToOpenTmpFile&quot;;</span>
<a href="#l28.26"></a><span id="l28.26">     case NS_MSG_UNABLE_TO_SAVE_TEMPLATE:</span>
<a href="#l28.27"></a><span id="l28.27" class="difflineminus">-      return u&quot;unableToSaveTemplate&quot;;</span>
<a href="#l28.28"></a><span id="l28.28" class="difflineplus">+      return &quot;unableToSaveTemplate&quot;;</span>
<a href="#l28.29"></a><span id="l28.29">     case NS_MSG_UNABLE_TO_SAVE_DRAFT:</span>
<a href="#l28.30"></a><span id="l28.30" class="difflineminus">-      return u&quot;unableToSaveDraft&quot;;</span>
<a href="#l28.31"></a><span id="l28.31" class="difflineplus">+      return &quot;unableToSaveDraft&quot;;</span>
<a href="#l28.32"></a><span id="l28.32">     case NS_MSG_COULDNT_OPEN_FCC_FOLDER:</span>
<a href="#l28.33"></a><span id="l28.33" class="difflineminus">-      return u&quot;couldntOpenFccFolder&quot;;</span>
<a href="#l28.34"></a><span id="l28.34" class="difflineplus">+      return &quot;couldntOpenFccFolder&quot;;</span>
<a href="#l28.35"></a><span id="l28.35">     case NS_MSG_NO_SENDER:</span>
<a href="#l28.36"></a><span id="l28.36" class="difflineminus">-      return u&quot;noSender&quot;;</span>
<a href="#l28.37"></a><span id="l28.37" class="difflineplus">+      return &quot;noSender&quot;;</span>
<a href="#l28.38"></a><span id="l28.38">     case NS_MSG_NO_RECIPIENTS:</span>
<a href="#l28.39"></a><span id="l28.39" class="difflineminus">-      return u&quot;noRecipients&quot;;</span>
<a href="#l28.40"></a><span id="l28.40" class="difflineplus">+      return &quot;noRecipients&quot;;</span>
<a href="#l28.41"></a><span id="l28.41">     case NS_MSG_ERROR_WRITING_FILE:</span>
<a href="#l28.42"></a><span id="l28.42" class="difflineminus">-      return u&quot;errorWritingFile&quot;;</span>
<a href="#l28.43"></a><span id="l28.43" class="difflineplus">+      return &quot;errorWritingFile&quot;;</span>
<a href="#l28.44"></a><span id="l28.44">     case NS_ERROR_SENDING_FROM_COMMAND:</span>
<a href="#l28.45"></a><span id="l28.45" class="difflineminus">-      return u&quot;errorSendingFromCommand&quot;;</span>
<a href="#l28.46"></a><span id="l28.46" class="difflineplus">+      return &quot;errorSendingFromCommand&quot;;</span>
<a href="#l28.47"></a><span id="l28.47">     case NS_ERROR_SENDING_DATA_COMMAND:</span>
<a href="#l28.48"></a><span id="l28.48" class="difflineminus">-      return u&quot;errorSendingDataCommand&quot;;</span>
<a href="#l28.49"></a><span id="l28.49" class="difflineplus">+      return &quot;errorSendingDataCommand&quot;;</span>
<a href="#l28.50"></a><span id="l28.50">     case NS_ERROR_SENDING_MESSAGE:</span>
<a href="#l28.51"></a><span id="l28.51" class="difflineminus">-      return u&quot;errorSendingMessage&quot;;</span>
<a href="#l28.52"></a><span id="l28.52" class="difflineplus">+      return &quot;errorSendingMessage&quot;;</span>
<a href="#l28.53"></a><span id="l28.53">     case NS_ERROR_POST_FAILED:</span>
<a href="#l28.54"></a><span id="l28.54" class="difflineminus">-      return u&quot;postFailed&quot;;</span>
<a href="#l28.55"></a><span id="l28.55" class="difflineplus">+      return &quot;postFailed&quot;;</span>
<a href="#l28.56"></a><span id="l28.56">     case NS_ERROR_QUEUED_DELIVERY_FAILED:</span>
<a href="#l28.57"></a><span id="l28.57" class="difflineminus">-      return u&quot;errorQueuedDeliveryFailed&quot;;</span>
<a href="#l28.58"></a><span id="l28.58" class="difflineplus">+      return &quot;errorQueuedDeliveryFailed&quot;;</span>
<a href="#l28.59"></a><span id="l28.59">     case NS_ERROR_SEND_FAILED:</span>
<a href="#l28.60"></a><span id="l28.60" class="difflineminus">-      return u&quot;sendFailed&quot;;</span>
<a href="#l28.61"></a><span id="l28.61" class="difflineplus">+      return &quot;sendFailed&quot;;</span>
<a href="#l28.62"></a><span id="l28.62">     case NS_ERROR_SMTP_SERVER_ERROR:</span>
<a href="#l28.63"></a><span id="l28.63" class="difflineminus">-      return u&quot;smtpServerError&quot;;</span>
<a href="#l28.64"></a><span id="l28.64" class="difflineplus">+      return &quot;smtpServerError&quot;;</span>
<a href="#l28.65"></a><span id="l28.65">     case NS_MSG_UNABLE_TO_SEND_LATER:</span>
<a href="#l28.66"></a><span id="l28.66" class="difflineminus">-      return u&quot;unableToSendLater&quot;;</span>
<a href="#l28.67"></a><span id="l28.67" class="difflineplus">+      return &quot;unableToSendLater&quot;;</span>
<a href="#l28.68"></a><span id="l28.68">     case NS_ERROR_COMMUNICATIONS_ERROR:</span>
<a href="#l28.69"></a><span id="l28.69" class="difflineminus">-      return u&quot;communicationsError&quot;;</span>
<a href="#l28.70"></a><span id="l28.70" class="difflineplus">+      return &quot;communicationsError&quot;;</span>
<a href="#l28.71"></a><span id="l28.71">     case NS_ERROR_BUT_DONT_SHOW_ALERT:</span>
<a href="#l28.72"></a><span id="l28.72" class="difflineminus">-      return u&quot;dontShowAlert&quot;;</span>
<a href="#l28.73"></a><span id="l28.73" class="difflineplus">+      return &quot;dontShowAlert&quot;;</span>
<a href="#l28.74"></a><span id="l28.74">     case NS_ERROR_TCP_READ_ERROR:</span>
<a href="#l28.75"></a><span id="l28.75" class="difflineminus">-      return u&quot;tcpReadError&quot;;</span>
<a href="#l28.76"></a><span id="l28.76" class="difflineplus">+      return &quot;tcpReadError&quot;;</span>
<a href="#l28.77"></a><span id="l28.77">     case NS_ERROR_COULD_NOT_GET_USERS_MAIL_ADDRESS:</span>
<a href="#l28.78"></a><span id="l28.78" class="difflineminus">-      return u&quot;couldNotGetUsersMailAddress&quot;;</span>
<a href="#l28.79"></a><span id="l28.79" class="difflineplus">+      return &quot;couldNotGetUsersMailAddress&quot;;</span>
<a href="#l28.80"></a><span id="l28.80">     case NS_ERROR_MIME_MPART_ATTACHMENT_ERROR:</span>
<a href="#l28.81"></a><span id="l28.81" class="difflineminus">-      return u&quot;mimeMpartAttachmentError&quot;;</span>
<a href="#l28.82"></a><span id="l28.82" class="difflineplus">+      return &quot;mimeMpartAttachmentError&quot;;</span>
<a href="#l28.83"></a><span id="l28.83">     case NS_MSG_FAILED_COPY_OPERATION:</span>
<a href="#l28.84"></a><span id="l28.84" class="difflineminus">-      return u&quot;failedCopyOperation&quot;;</span>
<a href="#l28.85"></a><span id="l28.85" class="difflineplus">+      return &quot;failedCopyOperation&quot;;</span>
<a href="#l28.86"></a><span id="l28.86">     case NS_ERROR_NNTP_NO_CROSS_POSTING:</span>
<a href="#l28.87"></a><span id="l28.87" class="difflineminus">-      return u&quot;nntpNoCrossPosting&quot;;</span>
<a href="#l28.88"></a><span id="l28.88" class="difflineplus">+      return &quot;nntpNoCrossPosting&quot;;</span>
<a href="#l28.89"></a><span id="l28.89">     case NS_MSG_CANCELLING:</span>
<a href="#l28.90"></a><span id="l28.90" class="difflineminus">-      return u&quot;msgCancelling&quot;;</span>
<a href="#l28.91"></a><span id="l28.91" class="difflineplus">+      return &quot;msgCancelling&quot;;</span>
<a href="#l28.92"></a><span id="l28.92">     case NS_ERROR_SEND_FAILED_BUT_NNTP_OK:</span>
<a href="#l28.93"></a><span id="l28.93" class="difflineminus">-      return u&quot;sendFailedButNntpOk&quot;;</span>
<a href="#l28.94"></a><span id="l28.94" class="difflineplus">+      return &quot;sendFailedButNntpOk&quot;;</span>
<a href="#l28.95"></a><span id="l28.95">     case NS_MSG_ERROR_READING_FILE:</span>
<a href="#l28.96"></a><span id="l28.96" class="difflineminus">-      return u&quot;errorReadingFile&quot;;</span>
<a href="#l28.97"></a><span id="l28.97" class="difflineplus">+      return &quot;errorReadingFile&quot;;</span>
<a href="#l28.98"></a><span id="l28.98">     case NS_MSG_ERROR_ATTACHING_FILE:</span>
<a href="#l28.99"></a><span id="l28.99" class="difflineminus">-      return u&quot;errorAttachingFile&quot;;</span>
<a href="#l28.100"></a><span id="l28.100" class="difflineplus">+      return &quot;errorAttachingFile&quot;;</span>
<a href="#l28.101"></a><span id="l28.101">     case NS_ERROR_SMTP_GREETING:</span>
<a href="#l28.102"></a><span id="l28.102" class="difflineminus">-      return u&quot;incorrectSmtpGreeting&quot;;</span>
<a href="#l28.103"></a><span id="l28.103" class="difflineplus">+      return &quot;incorrectSmtpGreeting&quot;;</span>
<a href="#l28.104"></a><span id="l28.104">     case NS_ERROR_SENDING_RCPT_COMMAND:</span>
<a href="#l28.105"></a><span id="l28.105" class="difflineminus">-      return u&quot;errorSendingRcptCommand&quot;;</span>
<a href="#l28.106"></a><span id="l28.106" class="difflineplus">+      return &quot;errorSendingRcptCommand&quot;;</span>
<a href="#l28.107"></a><span id="l28.107">     case NS_ERROR_STARTTLS_FAILED_EHLO_STARTTLS:</span>
<a href="#l28.108"></a><span id="l28.108" class="difflineminus">-      return u&quot;startTlsFailed&quot;;</span>
<a href="#l28.109"></a><span id="l28.109" class="difflineplus">+      return &quot;startTlsFailed&quot;;</span>
<a href="#l28.110"></a><span id="l28.110">     case NS_ERROR_SMTP_PASSWORD_UNDEFINED:</span>
<a href="#l28.111"></a><span id="l28.111" class="difflineminus">-      return u&quot;smtpPasswordUndefined&quot;;</span>
<a href="#l28.112"></a><span id="l28.112" class="difflineplus">+      return &quot;smtpPasswordUndefined&quot;;</span>
<a href="#l28.113"></a><span id="l28.113">     case NS_ERROR_SMTP_TEMP_SIZE_EXCEEDED:</span>
<a href="#l28.114"></a><span id="l28.114" class="difflineminus">-      return u&quot;smtpTempSizeExceeded&quot;;</span>
<a href="#l28.115"></a><span id="l28.115" class="difflineplus">+      return &quot;smtpTempSizeExceeded&quot;;</span>
<a href="#l28.116"></a><span id="l28.116">     case NS_ERROR_SMTP_PERM_SIZE_EXCEEDED_1:</span>
<a href="#l28.117"></a><span id="l28.117" class="difflineminus">-      return u&quot;smtpPermSizeExceeded1&quot;;</span>
<a href="#l28.118"></a><span id="l28.118" class="difflineplus">+      return &quot;smtpPermSizeExceeded1&quot;;</span>
<a href="#l28.119"></a><span id="l28.119">     case NS_ERROR_SMTP_PERM_SIZE_EXCEEDED_2:</span>
<a href="#l28.120"></a><span id="l28.120" class="difflineminus">-      return u&quot;smtpPermSizeExceeded2&quot;;</span>
<a href="#l28.121"></a><span id="l28.121" class="difflineplus">+      return &quot;smtpPermSizeExceeded2&quot;;</span>
<a href="#l28.122"></a><span id="l28.122">     case NS_ERROR_SMTP_SEND_FAILED_UNKNOWN_SERVER:</span>
<a href="#l28.123"></a><span id="l28.123" class="difflineminus">-      return u&quot;smtpSendFailedUnknownServer&quot;;</span>
<a href="#l28.124"></a><span id="l28.124" class="difflineplus">+      return &quot;smtpSendFailedUnknownServer&quot;;</span>
<a href="#l28.125"></a><span id="l28.125">     case NS_ERROR_SMTP_SEND_FAILED_REFUSED:</span>
<a href="#l28.126"></a><span id="l28.126" class="difflineminus">-      return u&quot;smtpSendRequestRefused&quot;;</span>
<a href="#l28.127"></a><span id="l28.127" class="difflineplus">+      return &quot;smtpSendRequestRefused&quot;;</span>
<a href="#l28.128"></a><span id="l28.128">     case NS_ERROR_SMTP_SEND_FAILED_INTERRUPTED:</span>
<a href="#l28.129"></a><span id="l28.129" class="difflineminus">-      return u&quot;smtpSendInterrupted&quot;;</span>
<a href="#l28.130"></a><span id="l28.130" class="difflineplus">+      return &quot;smtpSendInterrupted&quot;;</span>
<a href="#l28.131"></a><span id="l28.131">     case NS_ERROR_SMTP_SEND_FAILED_TIMEOUT:</span>
<a href="#l28.132"></a><span id="l28.132" class="difflineminus">-      return u&quot;smtpSendTimeout&quot;;</span>
<a href="#l28.133"></a><span id="l28.133" class="difflineplus">+      return &quot;smtpSendTimeout&quot;;</span>
<a href="#l28.134"></a><span id="l28.134">     case NS_ERROR_SMTP_SEND_FAILED_UNKNOWN_REASON:</span>
<a href="#l28.135"></a><span id="l28.135" class="difflineminus">-      return u&quot;smtpSendFailedUnknownReason&quot;;</span>
<a href="#l28.136"></a><span id="l28.136" class="difflineplus">+      return &quot;smtpSendFailedUnknownReason&quot;;</span>
<a href="#l28.137"></a><span id="l28.137">     case NS_ERROR_SMTP_AUTH_CHANGE_ENCRYPT_TO_PLAIN_NO_SSL:</span>
<a href="#l28.138"></a><span id="l28.138" class="difflineminus">-      return u&quot;smtpHintAuthEncryptToPlainNoSsl&quot;;</span>
<a href="#l28.139"></a><span id="l28.139" class="difflineplus">+      return &quot;smtpHintAuthEncryptToPlainNoSsl&quot;;</span>
<a href="#l28.140"></a><span id="l28.140">     case NS_ERROR_SMTP_AUTH_CHANGE_ENCRYPT_TO_PLAIN_SSL:</span>
<a href="#l28.141"></a><span id="l28.141" class="difflineminus">-      return u&quot;smtpHintAuthEncryptToPlainSsl&quot;;</span>
<a href="#l28.142"></a><span id="l28.142" class="difflineplus">+      return &quot;smtpHintAuthEncryptToPlainSsl&quot;;</span>
<a href="#l28.143"></a><span id="l28.143">     case NS_ERROR_SMTP_AUTH_CHANGE_PLAIN_TO_ENCRYPT:</span>
<a href="#l28.144"></a><span id="l28.144" class="difflineminus">-      return u&quot;smtpHintAuthPlainToEncrypt&quot;;</span>
<a href="#l28.145"></a><span id="l28.145" class="difflineplus">+      return &quot;smtpHintAuthPlainToEncrypt&quot;;</span>
<a href="#l28.146"></a><span id="l28.146">     case NS_ERROR_SMTP_AUTH_FAILURE:</span>
<a href="#l28.147"></a><span id="l28.147" class="difflineminus">-      return u&quot;smtpAuthFailure&quot;;</span>
<a href="#l28.148"></a><span id="l28.148" class="difflineplus">+      return &quot;smtpAuthFailure&quot;;</span>
<a href="#l28.149"></a><span id="l28.149">     case NS_ERROR_SMTP_AUTH_GSSAPI:</span>
<a href="#l28.150"></a><span id="l28.150" class="difflineminus">-      return u&quot;smtpAuthGssapi&quot;;</span>
<a href="#l28.151"></a><span id="l28.151" class="difflineplus">+      return &quot;smtpAuthGssapi&quot;;</span>
<a href="#l28.152"></a><span id="l28.152">     case NS_ERROR_SMTP_AUTH_MECH_NOT_SUPPORTED:</span>
<a href="#l28.153"></a><span id="l28.153" class="difflineminus">-      return u&quot;smtpAuthMechNotSupported&quot;;</span>
<a href="#l28.154"></a><span id="l28.154" class="difflineplus">+      return &quot;smtpAuthMechNotSupported&quot;;</span>
<a href="#l28.155"></a><span id="l28.155">     case NS_ERROR_SMTP_AUTH_NOT_SUPPORTED:</span>
<a href="#l28.156"></a><span id="l28.156" class="difflineminus">-      return u&quot;smtpAuthenticationNotSupported&quot;;</span>
<a href="#l28.157"></a><span id="l28.157" class="difflineplus">+      return &quot;smtpAuthenticationNotSupported&quot;;</span>
<a href="#l28.158"></a><span id="l28.158">     case NS_ERROR_ILLEGAL_LOCALPART:</span>
<a href="#l28.159"></a><span id="l28.159" class="difflineminus">-      return u&quot;illegalLocalPart&quot;;</span>
<a href="#l28.160"></a><span id="l28.160" class="difflineplus">+      return &quot;illegalLocalPart&quot;;</span>
<a href="#l28.161"></a><span id="l28.161">     default:</span>
<a href="#l28.162"></a><span id="l28.162" class="difflineminus">-      return u&quot;sendFailed&quot;;</span>
<a href="#l28.163"></a><span id="l28.163" class="difflineplus">+      return &quot;sendFailed&quot;;</span>
<a href="#l28.164"></a><span id="l28.164">   }</span>
<a href="#l28.165"></a><span id="l28.165"> #ifdef __GNUC__</span>
<a href="#l28.166"></a><span id="l28.166"> #pragma GCC diagnostic pop</span>
<a href="#l28.167"></a><span id="l28.167"> #endif</span>
<a href="#l28.168"></a><span id="l28.168"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mailnews/compose/src/nsComposeStrings.h</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mailnews/compose/src/nsComposeStrings.h</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -67,11 +67,11 @@</span>
<a href="#l29.4"></a><span id="l29.4"> #define NS_ERROR_SMTP_AUTH_CHANGE_PLAIN_TO_ENCRYPT         NS_MSG_GENERATE_FAILURE(12596)</span>
<a href="#l29.5"></a><span id="l29.5"> #define NS_ERROR_SMTP_AUTH_FAILURE                  NS_MSG_GENERATE_FAILURE(12597)</span>
<a href="#l29.6"></a><span id="l29.6"> #define NS_ERROR_SMTP_AUTH_GSSAPI                   NS_MSG_GENERATE_FAILURE(12598)</span>
<a href="#l29.7"></a><span id="l29.7"> #define NS_ERROR_SMTP_AUTH_MECH_NOT_SUPPORTED       NS_MSG_GENERATE_FAILURE(12599)</span>
<a href="#l29.8"></a><span id="l29.8"> #define NS_ERROR_SMTP_AUTH_NOT_SUPPORTED            NS_MSG_GENERATE_FAILURE(12600)</span>
<a href="#l29.9"></a><span id="l29.9"> </span>
<a href="#l29.10"></a><span id="l29.10"> #define NS_ERROR_ILLEGAL_LOCALPART                  NS_MSG_GENERATE_FAILURE(12601)</span>
<a href="#l29.11"></a><span id="l29.11"> </span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-const char16_t* errorStringNameForErrorCode(nsresult aCode);</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+const char* errorStringNameForErrorCode(nsresult aCode);</span>
<a href="#l29.14"></a><span id="l29.14"> </span>
<a href="#l29.15"></a><span id="l29.15"> #endif /* _nsComposeStrings_H__ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgAttachmentHandler.cpp</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgAttachmentHandler.cpp</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -1160,20 +1160,20 @@ nsMsgAttachmentHandler::UrlExit(nsresult</span>
<a href="#l30.4"></a><span id="l30.4">         params = unescapedUrl;</span>
<a href="#l30.5"></a><span id="l30.5">     }</span>
<a href="#l30.6"></a><span id="l30.6">     else</span>
<a href="#l30.7"></a><span id="l30.7">       params.AssignLiteral(&quot;?&quot;);</span>
<a href="#l30.8"></a><span id="l30.8"> </span>
<a href="#l30.9"></a><span id="l30.9">     NS_ConvertUTF8toUTF16 UTF16params(params);</span>
<a href="#l30.10"></a><span id="l30.10">     const char16_t* formatParams[] = { UTF16params.get() };</span>
<a href="#l30.11"></a><span id="l30.11">     if (mode == nsIMsgSend::nsMsgSaveAsDraft || mode == nsIMsgSend::nsMsgSaveAsTemplate)</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-      bundle-&gt;FormatStringFromName(u&quot;failureOnObjectEmbeddingWhileSaving&quot;,</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+      bundle-&gt;FormatStringFromName(&quot;failureOnObjectEmbeddingWhileSaving&quot;,</span>
<a href="#l30.14"></a><span id="l30.14">                                    formatParams, 1, getter_Copies(msg));</span>
<a href="#l30.15"></a><span id="l30.15">     else</span>
<a href="#l30.16"></a><span id="l30.16" class="difflineminus">-      bundle-&gt;FormatStringFromName(u&quot;failureOnObjectEmbeddingWhileSending&quot;,</span>
<a href="#l30.17"></a><span id="l30.17" class="difflineplus">+      bundle-&gt;FormatStringFromName(&quot;failureOnObjectEmbeddingWhileSending&quot;,</span>
<a href="#l30.18"></a><span id="l30.18">                                    formatParams, 1, getter_Copies(msg));</span>
<a href="#l30.19"></a><span id="l30.19"> </span>
<a href="#l30.20"></a><span id="l30.20">     nsCOMPtr&lt;nsIPrompt&gt; aPrompt;</span>
<a href="#l30.21"></a><span id="l30.21">     if (m_mime_delivery_state)</span>
<a href="#l30.22"></a><span id="l30.22">       m_mime_delivery_state-&gt;GetDefaultPrompt(getter_AddRefs(aPrompt));</span>
<a href="#l30.23"></a><span id="l30.23">     nsMsgAskBooleanQuestionByString(aPrompt, msg.get(), &amp;keepOnGoing);</span>
<a href="#l30.24"></a><span id="l30.24"> </span>
<a href="#l30.25"></a><span id="l30.25">     if (keepOnGoing)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgCompUtils.cpp</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgCompUtils.cpp</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -434,17 +434,17 @@ nsresult mime_generate_headers(nsIMsgCom</span>
<a href="#l31.4"></a><span id="l31.4">           mozilla::services::GetStringBundleService();</span>
<a href="#l31.5"></a><span id="l31.5">         if (stringService)</span>
<a href="#l31.6"></a><span id="l31.6">         {</span>
<a href="#l31.7"></a><span id="l31.7">           nsCOMPtr&lt;nsIStringBundle&gt; composeStringBundle;</span>
<a href="#l31.8"></a><span id="l31.8">           rv = stringService-&gt;CreateBundle(&quot;chrome://messenger/locale/messengercompose/composeMsgs.properties&quot;, getter_AddRefs(composeStringBundle));</span>
<a href="#l31.9"></a><span id="l31.9">           if (NS_SUCCEEDED(rv))</span>
<a href="#l31.10"></a><span id="l31.10">           {</span>
<a href="#l31.11"></a><span id="l31.11">             nsString undisclosedRecipients;</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-            rv = composeStringBundle-&gt;GetStringFromName(u&quot;undisclosedRecipients&quot;,</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+            rv = composeStringBundle-&gt;GetStringFromName(&quot;undisclosedRecipients&quot;,</span>
<a href="#l31.14"></a><span id="l31.14">                                                         getter_Copies(undisclosedRecipients));</span>
<a href="#l31.15"></a><span id="l31.15">             if (NS_SUCCEEDED(rv) &amp;&amp; !undisclosedRecipients.IsEmpty())</span>
<a href="#l31.16"></a><span id="l31.16">             {</span>
<a href="#l31.17"></a><span id="l31.17">               nsCOMPtr&lt;nsIMsgHeaderParser&gt; headerParser(</span>
<a href="#l31.18"></a><span id="l31.18">                 mozilla::services::GetHeaderParser());</span>
<a href="#l31.19"></a><span id="l31.19">               nsCOMPtr&lt;msgIAddressObject&gt; group;</span>
<a href="#l31.20"></a><span id="l31.20">               headerParser-&gt;MakeGroupObject(undisclosedRecipients,</span>
<a href="#l31.21"></a><span id="l31.21">                 nullptr, 0, getter_AddRefs(group));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgCompose.cpp</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgCompose.cpp</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -1489,28 +1489,28 @@ NS_IMETHODIMP nsMsgCompose::SendMsg(MSG_</span>
<a href="#l32.4"></a><span id="l32.4">     else</span>
<a href="#l32.5"></a><span id="l32.5">     {</span>
<a href="#l32.6"></a><span id="l32.6">       /* If we come here it's because we got an error before we could intialize a</span>
<a href="#l32.7"></a><span id="l32.7">          send report! Let's try our best...</span>
<a href="#l32.8"></a><span id="l32.8">       */</span>
<a href="#l32.9"></a><span id="l32.9">       switch (deliverMode)</span>
<a href="#l32.10"></a><span id="l32.10">       {</span>
<a href="#l32.11"></a><span id="l32.11">         case nsIMsgCompDeliverMode::Later:</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-          nsMsgDisplayMessageByName(prompt, u&quot;unableToSendLater&quot;);</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+          nsMsgDisplayMessageByName(prompt, &quot;unableToSendLater&quot;);</span>
<a href="#l32.14"></a><span id="l32.14">           break;</span>
<a href="#l32.15"></a><span id="l32.15">         case nsIMsgCompDeliverMode::AutoSaveAsDraft:</span>
<a href="#l32.16"></a><span id="l32.16">         case nsIMsgCompDeliverMode::SaveAsDraft:</span>
<a href="#l32.17"></a><span id="l32.17" class="difflineminus">-          nsMsgDisplayMessageByName(prompt, u&quot;unableToSaveDraft&quot;);</span>
<a href="#l32.18"></a><span id="l32.18" class="difflineplus">+          nsMsgDisplayMessageByName(prompt, &quot;unableToSaveDraft&quot;);</span>
<a href="#l32.19"></a><span id="l32.19">           break;</span>
<a href="#l32.20"></a><span id="l32.20">         case nsIMsgCompDeliverMode::SaveAsTemplate:</span>
<a href="#l32.21"></a><span id="l32.21" class="difflineminus">-          nsMsgDisplayMessageByName(prompt, u&quot;unableToSaveTemplate&quot;);</span>
<a href="#l32.22"></a><span id="l32.22" class="difflineplus">+          nsMsgDisplayMessageByName(prompt, &quot;unableToSaveTemplate&quot;);</span>
<a href="#l32.23"></a><span id="l32.23">           break;</span>
<a href="#l32.24"></a><span id="l32.24"> </span>
<a href="#l32.25"></a><span id="l32.25">         default:</span>
<a href="#l32.26"></a><span id="l32.26" class="difflineminus">-          nsMsgDisplayMessageByName(prompt, u&quot;sendFailed&quot;);</span>
<a href="#l32.27"></a><span id="l32.27" class="difflineplus">+          nsMsgDisplayMessageByName(prompt, &quot;sendFailed&quot;);</span>
<a href="#l32.28"></a><span id="l32.28">           break;</span>
<a href="#l32.29"></a><span id="l32.29">       }</span>
<a href="#l32.30"></a><span id="l32.30">     }</span>
<a href="#l32.31"></a><span id="l32.31"> </span>
<a href="#l32.32"></a><span id="l32.32">     if (progress)</span>
<a href="#l32.33"></a><span id="l32.33">       progress-&gt;CloseProgressDialog(true);</span>
<a href="#l32.34"></a><span id="l32.34">   }</span>
<a href="#l32.35"></a><span id="l32.35"> </span>
<a href="#l32.36"></a><span id="l32.36" class="difflineat">@@ -2177,17 +2177,17 @@ nsresult nsMsgCompose::CreateMessage(con</span>
<a href="#l32.37"></a><span id="l32.37">                 nsresult rv;</span>
<a href="#l32.38"></a><span id="l32.38">                 nsCOMPtr&lt;nsIStringBundleService&gt; bundleService =</span>
<a href="#l32.39"></a><span id="l32.39">                   mozilla::services::GetStringBundleService();</span>
<a href="#l32.40"></a><span id="l32.40">                 NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l32.41"></a><span id="l32.41">                 nsCOMPtr&lt;nsIStringBundle&gt; composeBundle;</span>
<a href="#l32.42"></a><span id="l32.42">                 rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/messengercompose/composeMsgs.properties&quot;,</span>
<a href="#l32.43"></a><span id="l32.43">                                                  getter_AddRefs(composeBundle));</span>
<a href="#l32.44"></a><span id="l32.44">                 NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l32.45"></a><span id="l32.45" class="difflineminus">-                composeBundle-&gt;GetStringFromName(u&quot;messageAttachmentSafeName&quot;,</span>
<a href="#l32.46"></a><span id="l32.46" class="difflineplus">+                composeBundle-&gt;GetStringFromName(&quot;messageAttachmentSafeName&quot;,</span>
<a href="#l32.47"></a><span id="l32.47">                                                  getter_Copies(sanitizedSubj));</span>
<a href="#l32.48"></a><span id="l32.48">               }</span>
<a href="#l32.49"></a><span id="l32.49">               else</span>
<a href="#l32.50"></a><span id="l32.50">                 sanitizedSubj.Assign(subject);</span>
<a href="#l32.51"></a><span id="l32.51"> </span>
<a href="#l32.52"></a><span id="l32.52">               // set the file size</span>
<a href="#l32.53"></a><span id="l32.53">               uint32_t messageSize;</span>
<a href="#l32.54"></a><span id="l32.54">               msgHdr-&gt;GetMessageSize(&amp;messageSize);</span>
<a href="#l32.55"></a><span id="l32.55" class="difflineat">@@ -2848,17 +2848,17 @@ NS_IMETHODIMP QuotingOutputStreamListene</span>
<a href="#l32.56"></a><span id="l32.56">         {</span>
<a href="#l32.57"></a><span id="l32.57">           nsCOMPtr&lt;mozIDOMWindowProxy&gt; domWindow;</span>
<a href="#l32.58"></a><span id="l32.58">           nsCOMPtr&lt;nsIPrompt&gt; prompt;</span>
<a href="#l32.59"></a><span id="l32.59">           compose-&gt;GetDomWindow(getter_AddRefs(domWindow));</span>
<a href="#l32.60"></a><span id="l32.60">           NS_ENSURE_TRUE(domWindow, NS_ERROR_FAILURE);</span>
<a href="#l32.61"></a><span id="l32.61">           nsCOMPtr&lt;nsPIDOMWindowOuter&gt; composeWindow = nsPIDOMWindowOuter::From(domWindow);</span>
<a href="#l32.62"></a><span id="l32.62">           if (composeWindow)</span>
<a href="#l32.63"></a><span id="l32.63">             composeWindow-&gt;GetPrompter(getter_AddRefs(prompt));</span>
<a href="#l32.64"></a><span id="l32.64" class="difflineminus">-          nsMsgDisplayMessageByName(prompt, u&quot;followupToSenderMessage&quot;);</span>
<a href="#l32.65"></a><span id="l32.65" class="difflineplus">+          nsMsgDisplayMessageByName(prompt, &quot;followupToSenderMessage&quot;);</span>
<a href="#l32.66"></a><span id="l32.66"> </span>
<a href="#l32.67"></a><span id="l32.67">           if (!replyTo.IsEmpty())</span>
<a href="#l32.68"></a><span id="l32.68">           {</span>
<a href="#l32.69"></a><span id="l32.69">             compFields-&gt;SetTo(replyTo);</span>
<a href="#l32.70"></a><span id="l32.70">           }</span>
<a href="#l32.71"></a><span id="l32.71">           else</span>
<a href="#l32.72"></a><span id="l32.72">           {</span>
<a href="#l32.73"></a><span id="l32.73">             // If reply-to is empty, use the From header to fetch the original</span>
<a href="#l32.74"></a><span id="l32.74" class="difflineat">@@ -4051,17 +4051,17 @@ NS_IMETHODIMP nsMsgComposeSendListener::</span>
<a href="#l32.75"></a><span id="l32.75">             mozilla::services::GetStringBundleService();</span>
<a href="#l32.76"></a><span id="l32.76">           NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l32.77"></a><span id="l32.77">           nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l32.78"></a><span id="l32.78">           rv = bundleService-&gt;CreateBundle(</span>
<a href="#l32.79"></a><span id="l32.79">             &quot;chrome://messenger/locale/messengercompose/composeMsgs.properties&quot;,</span>
<a href="#l32.80"></a><span id="l32.80">             getter_AddRefs(bundle));</span>
<a href="#l32.81"></a><span id="l32.81">           NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l32.82"></a><span id="l32.82">           nsString msg;</span>
<a href="#l32.83"></a><span id="l32.83" class="difflineminus">-          bundle-&gt;GetStringFromName(u&quot;msgCancelling&quot;, getter_Copies(msg));</span>
<a href="#l32.84"></a><span id="l32.84" class="difflineplus">+          bundle-&gt;GetStringFromName(&quot;msgCancelling&quot;, getter_Copies(msg));</span>
<a href="#l32.85"></a><span id="l32.85">           progress-&gt;OnStatusChange(nullptr, nullptr, NS_OK, msg.get());</span>
<a href="#l32.86"></a><span id="l32.86">         }</span>
<a href="#l32.87"></a><span id="l32.87">       }</span>
<a href="#l32.88"></a><span id="l32.88"> </span>
<a href="#l32.89"></a><span id="l32.89">       nsCOMPtr&lt;nsIMsgSend&gt; msgSend;</span>
<a href="#l32.90"></a><span id="l32.90">       msgCompose-&gt;GetMessageSend(getter_AddRefs(msgSend));</span>
<a href="#l32.91"></a><span id="l32.91">       if (msgSend)</span>
<a href="#l32.92"></a><span id="l32.92">         msgSend-&gt;Abort();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgPrompts.cpp</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgPrompts.cpp</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -10,34 +10,34 @@</span>
<a href="#l33.4"></a><span id="l33.4"> #include &quot;nsMsgCompCID.h&quot;</span>
<a href="#l33.5"></a><span id="l33.5"> #include &quot;nsComposeStrings.h&quot;</span>
<a href="#l33.6"></a><span id="l33.6"> #include &quot;nsIStringBundle.h&quot;</span>
<a href="#l33.7"></a><span id="l33.7"> #include &quot;nsServiceManagerUtils.h&quot;</span>
<a href="#l33.8"></a><span id="l33.8"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l33.9"></a><span id="l33.9"> #include &quot;mozilla/Services.h&quot;</span>
<a href="#l33.10"></a><span id="l33.10"> </span>
<a href="#l33.11"></a><span id="l33.11"> nsresult</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-nsMsgGetMessageByName(const char16_t* aName, nsString&amp; aResult)</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+nsMsgGetMessageByName(const char* aName, nsString&amp; aResult)</span>
<a href="#l33.14"></a><span id="l33.14"> {</span>
<a href="#l33.15"></a><span id="l33.15">   nsresult rv;</span>
<a href="#l33.16"></a><span id="l33.16">   nsCOMPtr&lt;nsIStringBundleService&gt; bundleService =</span>
<a href="#l33.17"></a><span id="l33.17">     mozilla::services::GetStringBundleService();</span>
<a href="#l33.18"></a><span id="l33.18">   NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l33.19"></a><span id="l33.19"> </span>
<a href="#l33.20"></a><span id="l33.20">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l33.21"></a><span id="l33.21">   rv = bundleService-&gt;CreateBundle(</span>
<a href="#l33.22"></a><span id="l33.22">     &quot;chrome://messenger/locale/messengercompose/composeMsgs.properties&quot;,</span>
<a href="#l33.23"></a><span id="l33.23">     getter_AddRefs(bundle));</span>
<a href="#l33.24"></a><span id="l33.24">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l33.25"></a><span id="l33.25"> </span>
<a href="#l33.26"></a><span id="l33.26">   return bundle-&gt;GetStringFromName(aName, getter_Copies(aResult));</span>
<a href="#l33.27"></a><span id="l33.27"> }</span>
<a href="#l33.28"></a><span id="l33.28"> </span>
<a href="#l33.29"></a><span id="l33.29"> static nsresult</span>
<a href="#l33.30"></a><span id="l33.30" class="difflineminus">-nsMsgBuildMessageByName(const char16_t *aName, nsIFile *aFile, nsString&amp; aResult)</span>
<a href="#l33.31"></a><span id="l33.31" class="difflineplus">+nsMsgBuildMessageByName(const char *aName, nsIFile *aFile, nsString&amp; aResult)</span>
<a href="#l33.32"></a><span id="l33.32"> {</span>
<a href="#l33.33"></a><span id="l33.33">   NS_ENSURE_ARG_POINTER(aFile);</span>
<a href="#l33.34"></a><span id="l33.34">   nsresult rv;</span>
<a href="#l33.35"></a><span id="l33.35">   nsCOMPtr&lt;nsIStringBundleService&gt; bundleService =</span>
<a href="#l33.36"></a><span id="l33.36">     mozilla::services::GetStringBundleService();</span>
<a href="#l33.37"></a><span id="l33.37">   NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l33.38"></a><span id="l33.38"> </span>
<a href="#l33.39"></a><span id="l33.39">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l33.40"></a><span id="l33.40" class="difflineat">@@ -49,27 +49,27 @@ nsMsgBuildMessageByName(const char16_t *</span>
<a href="#l33.41"></a><span id="l33.41"> </span>
<a href="#l33.42"></a><span id="l33.42">   const char16_t *params[1] = {path.get()};</span>
<a href="#l33.43"></a><span id="l33.43">   return bundle-&gt;FormatStringFromName(aName, params, 1, getter_Copies(aResult));</span>
<a href="#l33.44"></a><span id="l33.44"> }</span>
<a href="#l33.45"></a><span id="l33.45"> </span>
<a href="#l33.46"></a><span id="l33.46"> nsresult</span>
<a href="#l33.47"></a><span id="l33.47"> nsMsgBuildMessageWithFile(nsIFile *aFile, nsString&amp; aResult)</span>
<a href="#l33.48"></a><span id="l33.48"> {</span>
<a href="#l33.49"></a><span id="l33.49" class="difflineminus">-  return nsMsgBuildMessageByName(u&quot;unableToOpenFile&quot;, aFile, aResult);</span>
<a href="#l33.50"></a><span id="l33.50" class="difflineplus">+  return nsMsgBuildMessageByName(&quot;unableToOpenFile&quot;, aFile, aResult);</span>
<a href="#l33.51"></a><span id="l33.51"> }</span>
<a href="#l33.52"></a><span id="l33.52"> </span>
<a href="#l33.53"></a><span id="l33.53"> nsresult</span>
<a href="#l33.54"></a><span id="l33.54"> nsMsgBuildMessageWithTmpFile(nsIFile *aFile, nsString&amp; aResult)</span>
<a href="#l33.55"></a><span id="l33.55"> {</span>
<a href="#l33.56"></a><span id="l33.56" class="difflineminus">-  return nsMsgBuildMessageByName(u&quot;unableToOpenTmpFile&quot;, aFile, aResult);</span>
<a href="#l33.57"></a><span id="l33.57" class="difflineplus">+  return nsMsgBuildMessageByName(&quot;unableToOpenTmpFile&quot;, aFile, aResult);</span>
<a href="#l33.58"></a><span id="l33.58"> }</span>
<a href="#l33.59"></a><span id="l33.59"> </span>
<a href="#l33.60"></a><span id="l33.60"> nsresult</span>
<a href="#l33.61"></a><span id="l33.61" class="difflineminus">-nsMsgDisplayMessageByName(nsIPrompt *aPrompt, const char16_t* aName, const char16_t *windowTitle)</span>
<a href="#l33.62"></a><span id="l33.62" class="difflineplus">+nsMsgDisplayMessageByName(nsIPrompt *aPrompt, const char* aName, const char16_t *windowTitle)</span>
<a href="#l33.63"></a><span id="l33.63"> {</span>
<a href="#l33.64"></a><span id="l33.64">   nsString msg;</span>
<a href="#l33.65"></a><span id="l33.65">   nsMsgGetMessageByName(aName, msg);</span>
<a href="#l33.66"></a><span id="l33.66">   return nsMsgDisplayMessageByString(aPrompt, msg.get(), windowTitle);</span>
<a href="#l33.67"></a><span id="l33.67"> }</span>
<a href="#l33.68"></a><span id="l33.68"> </span>
<a href="#l33.69"></a><span id="l33.69"> nsresult</span>
<a href="#l33.70"></a><span id="l33.70"> nsMsgDisplayMessageByString(nsIPrompt * aPrompt, const char16_t * msg, const char16_t * windowTitle)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgPrompts.h</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgPrompts.h</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -7,16 +7,16 @@</span>
<a href="#l34.4"></a><span id="l34.4"> #define _nsMsgPrompts_H_</span>
<a href="#l34.5"></a><span id="l34.5"> </span>
<a href="#l34.6"></a><span id="l34.6"> #include &quot;nscore.h&quot;</span>
<a href="#l34.7"></a><span id="l34.7"> #include &quot;nsError.h&quot;</span>
<a href="#l34.8"></a><span id="l34.8"> #include &quot;nsString.h&quot;</span>
<a href="#l34.9"></a><span id="l34.9"> </span>
<a href="#l34.10"></a><span id="l34.10"> class nsIPrompt;</span>
<a href="#l34.11"></a><span id="l34.11"> </span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-nsresult      nsMsgGetMessageByName(const char16_t* aName, nsString&amp; aResult);</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+nsresult      nsMsgGetMessageByName(const char* aName, nsString&amp; aResult);</span>
<a href="#l34.14"></a><span id="l34.14"> nsresult      nsMsgBuildMessageWithFile(nsIFile * aFile, nsString&amp; aResult);</span>
<a href="#l34.15"></a><span id="l34.15"> nsresult      nsMsgBuildMessageWithTmpFile(nsIFile * aFile, nsString&amp; aResult);</span>
<a href="#l34.16"></a><span id="l34.16" class="difflineminus">-nsresult      nsMsgDisplayMessageByName(nsIPrompt *aPrompt, const char16_t *aName, const char16_t *windowTitle = nullptr);</span>
<a href="#l34.17"></a><span id="l34.17" class="difflineplus">+nsresult      nsMsgDisplayMessageByName(nsIPrompt *aPrompt, const char *aName, const char16_t *windowTitle = nullptr);</span>
<a href="#l34.18"></a><span id="l34.18"> nsresult      nsMsgDisplayMessageByString(nsIPrompt * aPrompt, const char16_t * msg, const char16_t * windowTitle = nullptr);</span>
<a href="#l34.19"></a><span id="l34.19"> nsresult      nsMsgAskBooleanQuestionByString(nsIPrompt * aPrompt, const char16_t * msg, bool *answer, const char16_t * windowTitle = nullptr);</span>
<a href="#l34.20"></a><span id="l34.20"> </span>
<a href="#l34.21"></a><span id="l34.21"> #endif /* _nsMsgPrompts_H_ */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgSend.cpp</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgSend.cpp</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -558,17 +558,17 @@ nsMsgComposeAndSend::GatherMimeAttachmen</span>
<a href="#l35.4"></a><span id="l35.4"> </span>
<a href="#l35.5"></a><span id="l35.5">   /* Kludge to avoid having to allocate memory on the toy computers... */</span>
<a href="#l35.6"></a><span id="l35.6">   buffer = mime_get_stream_write_buffer();</span>
<a href="#l35.7"></a><span id="l35.7">   if (! buffer)</span>
<a href="#l35.8"></a><span id="l35.8">     goto FAILMEM;</span>
<a href="#l35.9"></a><span id="l35.9"> </span>
<a href="#l35.10"></a><span id="l35.10">   NS_ASSERTION (m_attachment_pending_count == 0, &quot;m_attachment_pending_count != 0&quot;);</span>
<a href="#l35.11"></a><span id="l35.11"> </span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-  mComposeBundle-&gt;GetStringFromName(u&quot;assemblingMessage&quot;,</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+  mComposeBundle-&gt;GetStringFromName(&quot;assemblingMessage&quot;,</span>
<a href="#l35.14"></a><span id="l35.14">                                     getter_Copies(msg));</span>
<a href="#l35.15"></a><span id="l35.15">   SetStatusMessage( msg );</span>
<a href="#l35.16"></a><span id="l35.16"> </span>
<a href="#l35.17"></a><span id="l35.17">   /* First, open the message file.</span>
<a href="#l35.18"></a><span id="l35.18">   */</span>
<a href="#l35.19"></a><span id="l35.19">   rv = nsMsgCreateTempFile(&quot;nsemail.eml&quot;, getter_AddRefs(mTempFile));</span>
<a href="#l35.20"></a><span id="l35.20">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l35.21"></a><span id="l35.21"> </span>
<a href="#l35.22"></a><span id="l35.22" class="difflineat">@@ -925,17 +925,17 @@ nsMsgComposeAndSend::GatherMimeAttachmen</span>
<a href="#l35.23"></a><span id="l35.23">         if (m_attachments[i]-&gt;mMHTMLPart)</span>
<a href="#l35.24"></a><span id="l35.24">           PreProcessPart(m_attachments[i], m_related_part);</span>
<a href="#l35.25"></a><span id="l35.25">       }</span>
<a href="#l35.26"></a><span id="l35.26">     }</span>
<a href="#l35.27"></a><span id="l35.27"> </span>
<a href="#l35.28"></a><span id="l35.28">   }</span>
<a href="#l35.29"></a><span id="l35.29"> </span>
<a href="#l35.30"></a><span id="l35.30">   // Tell the user we are creating the message...</span>
<a href="#l35.31"></a><span id="l35.31" class="difflineminus">-  mComposeBundle-&gt;GetStringFromName(u&quot;creatingMailMessage&quot;,</span>
<a href="#l35.32"></a><span id="l35.32" class="difflineplus">+  mComposeBundle-&gt;GetStringFromName(&quot;creatingMailMessage&quot;,</span>
<a href="#l35.33"></a><span id="l35.33">                                     getter_Copies(msg));</span>
<a href="#l35.34"></a><span id="l35.34">   SetStatusMessage( msg );</span>
<a href="#l35.35"></a><span id="l35.35"> </span>
<a href="#l35.36"></a><span id="l35.36">   // OK, now actually write the structure we've carefully built up.</span>
<a href="#l35.37"></a><span id="l35.37">   status = toppart-&gt;Write();</span>
<a href="#l35.38"></a><span id="l35.38">   if (NS_FAILED(status))</span>
<a href="#l35.39"></a><span id="l35.39">     goto FAIL;</span>
<a href="#l35.40"></a><span id="l35.40"> </span>
<a href="#l35.41"></a><span id="l35.41" class="difflineat">@@ -968,17 +968,17 @@ nsMsgComposeAndSend::GatherMimeAttachmen</span>
<a href="#l35.42"></a><span id="l35.42">     rv = mTempFile-&gt;GetFileSize(&amp;fileSize);</span>
<a href="#l35.43"></a><span id="l35.43">     if (NS_FAILED(rv) || fileSize == 0)</span>
<a href="#l35.44"></a><span id="l35.44">     {</span>
<a href="#l35.45"></a><span id="l35.45">       status = NS_MSG_ERROR_WRITING_FILE;</span>
<a href="#l35.46"></a><span id="l35.46">       goto FAIL;</span>
<a href="#l35.47"></a><span id="l35.47">     }</span>
<a href="#l35.48"></a><span id="l35.48">   }</span>
<a href="#l35.49"></a><span id="l35.49"> </span>
<a href="#l35.50"></a><span id="l35.50" class="difflineminus">-  mComposeBundle-&gt;GetStringFromName(u&quot;assemblingMessageDone&quot;,</span>
<a href="#l35.51"></a><span id="l35.51" class="difflineplus">+  mComposeBundle-&gt;GetStringFromName(&quot;assemblingMessageDone&quot;,</span>
<a href="#l35.52"></a><span id="l35.52">                                     getter_Copies(msg));</span>
<a href="#l35.53"></a><span id="l35.53">   SetStatusMessage(msg);</span>
<a href="#l35.54"></a><span id="l35.54"> </span>
<a href="#l35.55"></a><span id="l35.55">   if (m_dont_deliver_p &amp;&amp; mListener)</span>
<a href="#l35.56"></a><span id="l35.56">   {</span>
<a href="#l35.57"></a><span id="l35.57">     //</span>
<a href="#l35.58"></a><span id="l35.58">     // Need to ditch the file spec here so that we don't delete the</span>
<a href="#l35.59"></a><span id="l35.59">     // file, since in this case, the caller wants the file</span>
<a href="#l35.60"></a><span id="l35.60" class="difflineat">@@ -2520,17 +2520,17 @@ nsMsgComposeAndSend::HackAttachments(nsI</span>
<a href="#l35.61"></a><span id="l35.61">       if (!params.IsEmpty()) {</span>
<a href="#l35.62"></a><span id="l35.62">         formatParams[0] = params.get();</span>
<a href="#l35.63"></a><span id="l35.63">       } else if (m_attachments[i]-&gt;mURL) {</span>
<a href="#l35.64"></a><span id="l35.64">         nsCString asciiSpec;</span>
<a href="#l35.65"></a><span id="l35.65">         m_attachments[i]-&gt;mURL-&gt;GetAsciiSpec(asciiSpec);</span>
<a href="#l35.66"></a><span id="l35.66">         attachmentFileName.AssignASCII(asciiSpec.get());</span>
<a href="#l35.67"></a><span id="l35.67">         formatParams[0] = attachmentFileName.get();</span>
<a href="#l35.68"></a><span id="l35.68">       }</span>
<a href="#l35.69"></a><span id="l35.69" class="difflineminus">-      mComposeBundle-&gt;FormatStringFromName(u&quot;gatheringAttachment&quot;,</span>
<a href="#l35.70"></a><span id="l35.70" class="difflineplus">+      mComposeBundle-&gt;FormatStringFromName(&quot;gatheringAttachment&quot;,</span>
<a href="#l35.71"></a><span id="l35.71">                                            formatParams, 1, getter_Copies(msg));</span>
<a href="#l35.72"></a><span id="l35.72"> </span>
<a href="#l35.73"></a><span id="l35.73">       if (!msg.IsEmpty())</span>
<a href="#l35.74"></a><span id="l35.74">       {</span>
<a href="#l35.75"></a><span id="l35.75">         SetStatusMessage(msg);</span>
<a href="#l35.76"></a><span id="l35.76">       }</span>
<a href="#l35.77"></a><span id="l35.77"> </span>
<a href="#l35.78"></a><span id="l35.78">       /* As SnarfAttachment will call GatherMimeAttachments when it will be done (this is an async process),</span>
<a href="#l35.79"></a><span id="l35.79" class="difflineat">@@ -2548,17 +2548,17 @@ nsMsgComposeAndSend::HackAttachments(nsI</span>
<a href="#l35.80"></a><span id="l35.80">           m_attachments[i]-&gt;mURL-&gt;GetAsciiSpec(asciiSpec);</span>
<a href="#l35.81"></a><span id="l35.81">           attachmentFileName.AssignASCII(asciiSpec.get());</span>
<a href="#l35.82"></a><span id="l35.82">           rv = NS_OK;</span>
<a href="#l35.83"></a><span id="l35.83">         }</span>
<a href="#l35.84"></a><span id="l35.84">         if (NS_SUCCEEDED(rv))</span>
<a href="#l35.85"></a><span id="l35.85">         {</span>
<a href="#l35.86"></a><span id="l35.86">           nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l35.87"></a><span id="l35.87">           const char16_t *params[] = { attachmentFileName.get() };</span>
<a href="#l35.88"></a><span id="l35.88" class="difflineminus">-          mComposeBundle-&gt;FormatStringFromName(u&quot;errorAttachingFile&quot;,</span>
<a href="#l35.89"></a><span id="l35.89" class="difflineplus">+          mComposeBundle-&gt;FormatStringFromName(&quot;errorAttachingFile&quot;,</span>
<a href="#l35.90"></a><span id="l35.90">                                                params, 1,</span>
<a href="#l35.91"></a><span id="l35.91">                                                getter_Copies(errorMsg));</span>
<a href="#l35.92"></a><span id="l35.92">           mSendReport-&gt;SetMessage(nsIMsgSendReport::process_Current, errorMsg.get(), false);</span>
<a href="#l35.93"></a><span id="l35.93">           mSendReport-&gt;SetError(nsIMsgSendReport::process_Current,</span>
<a href="#l35.94"></a><span id="l35.94">                                 NS_MSG_ERROR_ATTACHING_FILE,</span>
<a href="#l35.95"></a><span id="l35.95">                                 false);</span>
<a href="#l35.96"></a><span id="l35.96">         }</span>
<a href="#l35.97"></a><span id="l35.97">         return NS_MSG_ERROR_ATTACHING_FILE;</span>
<a href="#l35.98"></a><span id="l35.98" class="difflineat">@@ -3040,17 +3040,17 @@ nsMsgComposeAndSend::Init(</span>
<a href="#l35.99"></a><span id="l35.99">       mozilla::services::GetStringBundleService();</span>
<a href="#l35.100"></a><span id="l35.100">     NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l35.101"></a><span id="l35.101">     nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l35.102"></a><span id="l35.102">     rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/messengercompose/composeMsgs.properties&quot;, getter_AddRefs(mComposeBundle));</span>
<a href="#l35.103"></a><span id="l35.103">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l35.104"></a><span id="l35.104">   }</span>
<a href="#l35.105"></a><span id="l35.105"> </span>
<a href="#l35.106"></a><span id="l35.106">   // Tell the user we are assembling the message...</span>
<a href="#l35.107"></a><span id="l35.107" class="difflineminus">-  mComposeBundle-&gt;GetStringFromName(u&quot;assemblingMailInformation&quot;, getter_Copies(msg));</span>
<a href="#l35.108"></a><span id="l35.108" class="difflineplus">+  mComposeBundle-&gt;GetStringFromName(&quot;assemblingMailInformation&quot;, getter_Copies(msg));</span>
<a href="#l35.109"></a><span id="l35.109">   SetStatusMessage(msg);</span>
<a href="#l35.110"></a><span id="l35.110">   if (mSendReport)</span>
<a href="#l35.111"></a><span id="l35.111">     mSendReport-&gt;SetCurrentProcess(nsIMsgSendReport::process_BuildMessage);</span>
<a href="#l35.112"></a><span id="l35.112"> </span>
<a href="#l35.113"></a><span id="l35.113">   //</span>
<a href="#l35.114"></a><span id="l35.114">   // The Init() method should initialize a send operation for full</span>
<a href="#l35.115"></a><span id="l35.115">   // blown create and send operations as well as just the &quot;send a file&quot;</span>
<a href="#l35.116"></a><span id="l35.116">   // operations.</span>
<a href="#l35.117"></a><span id="l35.117" class="difflineat">@@ -3243,17 +3243,17 @@ nsMsgComposeAndSend::DeliverMessage()</span>
<a href="#l35.118"></a><span id="l35.118"> </span>
<a href="#l35.119"></a><span id="l35.119">   if ((mMessageWarningSize &gt; 0) &amp;&amp; (fileSize &gt; mMessageWarningSize) &amp;&amp; (mGUINotificationEnabled))</span>
<a href="#l35.120"></a><span id="l35.120">   {</span>
<a href="#l35.121"></a><span id="l35.121">     bool abortTheSend = false;</span>
<a href="#l35.122"></a><span id="l35.122">     nsString msg;</span>
<a href="#l35.123"></a><span id="l35.123">     nsAutoString formattedFileSize;</span>
<a href="#l35.124"></a><span id="l35.124">     FormatFileSize(fileSize, true, formattedFileSize);</span>
<a href="#l35.125"></a><span id="l35.125">     const char16_t* params[] = { formattedFileSize.get() };</span>
<a href="#l35.126"></a><span id="l35.126" class="difflineminus">-    mComposeBundle-&gt;FormatStringFromName(u&quot;largeMessageSendWarning&quot;,</span>
<a href="#l35.127"></a><span id="l35.127" class="difflineplus">+    mComposeBundle-&gt;FormatStringFromName(&quot;largeMessageSendWarning&quot;,</span>
<a href="#l35.128"></a><span id="l35.128">                                          params, 1, getter_Copies(msg));</span>
<a href="#l35.129"></a><span id="l35.129"> </span>
<a href="#l35.130"></a><span id="l35.130">     if (!msg.IsEmpty())</span>
<a href="#l35.131"></a><span id="l35.131">     {</span>
<a href="#l35.132"></a><span id="l35.132">       nsCOMPtr&lt;nsIPrompt&gt; prompt;</span>
<a href="#l35.133"></a><span id="l35.133">       GetDefaultPrompt(getter_AddRefs(prompt));</span>
<a href="#l35.134"></a><span id="l35.134">       nsMsgAskBooleanQuestionByString(prompt, msg.get(), &amp;abortTheSend);</span>
<a href="#l35.135"></a><span id="l35.135">       if (!abortTheSend)</span>
<a href="#l35.136"></a><span id="l35.136" class="difflineat">@@ -3402,17 +3402,17 @@ nsMsgComposeAndSend::DeliverFileAsMail()</span>
<a href="#l35.137"></a><span id="l35.137">     // to the top most mail window...after all, that's where we are going to be sending status</span>
<a href="#l35.138"></a><span id="l35.138">     // update information too....</span>
<a href="#l35.139"></a><span id="l35.139"> </span>
<a href="#l35.140"></a><span id="l35.140">     nsCOMPtr&lt;nsIInterfaceRequestor&gt; callbacks;</span>
<a href="#l35.141"></a><span id="l35.141">     GetNotificationCallbacks(getter_AddRefs(callbacks));</span>
<a href="#l35.142"></a><span id="l35.142"> </span>
<a href="#l35.143"></a><span id="l35.143">     // Tell the user we are sending the message!</span>
<a href="#l35.144"></a><span id="l35.144">     nsString msg;</span>
<a href="#l35.145"></a><span id="l35.145" class="difflineminus">-    mComposeBundle-&gt;GetStringFromName(u&quot;sendingMessage&quot;, getter_Copies(msg));</span>
<a href="#l35.146"></a><span id="l35.146" class="difflineplus">+    mComposeBundle-&gt;GetStringFromName(&quot;sendingMessage&quot;, getter_Copies(msg));</span>
<a href="#l35.147"></a><span id="l35.147">     SetStatusMessage(msg);</span>
<a href="#l35.148"></a><span id="l35.148">     nsCOMPtr&lt;nsIMsgStatusFeedback&gt; msgStatus (do_QueryInterface(mSendProgress));</span>
<a href="#l35.149"></a><span id="l35.149">     // if the sendProgress isn't set, let's use the member variable.</span>
<a href="#l35.150"></a><span id="l35.150">     if (!msgStatus)</span>
<a href="#l35.151"></a><span id="l35.151">       msgStatus = do_QueryInterface(mStatusFeedback);</span>
<a href="#l35.152"></a><span id="l35.152"> </span>
<a href="#l35.153"></a><span id="l35.153">     nsCOMPtr&lt;nsIURI&gt; runningUrl;</span>
<a href="#l35.154"></a><span id="l35.154">     rv = smtpService-&gt;SendMailMessage(mTempFile, buf, mUserIdentity,</span>
<a href="#l35.155"></a><span id="l35.155" class="difflineat">@@ -3451,17 +3451,17 @@ nsMsgComposeAndSend::DeliverFileAsNews()</span>
<a href="#l35.156"></a><span id="l35.156">   if (NS_SUCCEEDED(rv) &amp;&amp; nntpService)</span>
<a href="#l35.157"></a><span id="l35.157">   {</span>
<a href="#l35.158"></a><span id="l35.158">     MsgDeliveryListener *deliveryListener = new MsgDeliveryListener(this, true);</span>
<a href="#l35.159"></a><span id="l35.159">     if (!deliveryListener)</span>
<a href="#l35.160"></a><span id="l35.160">       return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l35.161"></a><span id="l35.161"> </span>
<a href="#l35.162"></a><span id="l35.162">     // Tell the user we are posting the message!</span>
<a href="#l35.163"></a><span id="l35.163">     nsString msg;</span>
<a href="#l35.164"></a><span id="l35.164" class="difflineminus">-    mComposeBundle-&gt;GetStringFromName(u&quot;postingMessage&quot;,</span>
<a href="#l35.165"></a><span id="l35.165" class="difflineplus">+    mComposeBundle-&gt;GetStringFromName(&quot;postingMessage&quot;,</span>
<a href="#l35.166"></a><span id="l35.166">                                       getter_Copies(msg));</span>
<a href="#l35.167"></a><span id="l35.167">     SetStatusMessage(msg);</span>
<a href="#l35.168"></a><span id="l35.168"> </span>
<a href="#l35.169"></a><span id="l35.169">     nsCOMPtr &lt;nsIMsgMailSession&gt; mailSession = do_GetService(NS_MSGMAILSESSION_CONTRACTID, &amp;rv);</span>
<a href="#l35.170"></a><span id="l35.170">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l35.171"></a><span id="l35.171"> </span>
<a href="#l35.172"></a><span id="l35.172">     // JFD TODO: we should use GetDefaultPrompt instead</span>
<a href="#l35.173"></a><span id="l35.173">     nsCOMPtr&lt;nsIMsgWindow&gt; msgWindow;</span>
<a href="#l35.174"></a><span id="l35.174" class="difflineat">@@ -3501,31 +3501,31 @@ nsMsgComposeAndSend::Fail(nsresult aFail</span>
<a href="#l35.175"></a><span id="l35.175">       }</span>
<a href="#l35.176"></a><span id="l35.176">       mSendReport-&gt;SetError(nsIMsgSendReport::process_Current, aFailureCode, false);</span>
<a href="#l35.177"></a><span id="l35.177">       mSendReport-&gt;SetMessage(nsIMsgSendReport::process_Current, aErrorMsg, false);</span>
<a href="#l35.178"></a><span id="l35.178">       mSendReport-&gt;DisplayReport(prompt, true, true, aResult);</span>
<a href="#l35.179"></a><span id="l35.179">     }</span>
<a href="#l35.180"></a><span id="l35.180">     else</span>
<a href="#l35.181"></a><span id="l35.181">     {</span>
<a href="#l35.182"></a><span id="l35.182">       if (aFailureCode != NS_ERROR_BUT_DONT_SHOW_ALERT)</span>
<a href="#l35.183"></a><span id="l35.183" class="difflineminus">-        nsMsgDisplayMessageByName(prompt, u&quot;sendFailed&quot;);</span>
<a href="#l35.184"></a><span id="l35.184" class="difflineplus">+        nsMsgDisplayMessageByName(prompt, &quot;sendFailed&quot;);</span>
<a href="#l35.185"></a><span id="l35.185">     }</span>
<a href="#l35.186"></a><span id="l35.186">   }</span>
<a href="#l35.187"></a><span id="l35.187"> </span>
<a href="#l35.188"></a><span id="l35.188">   if (NS_SUCCEEDED(m_status))</span>
<a href="#l35.189"></a><span id="l35.189">     m_status = NS_ERROR_BUT_DONT_SHOW_ALERT;</span>
<a href="#l35.190"></a><span id="l35.190"> </span>
<a href="#l35.191"></a><span id="l35.191">   //Stop any pending process...</span>
<a href="#l35.192"></a><span id="l35.192">   Abort();</span>
<a href="#l35.193"></a><span id="l35.193"> </span>
<a href="#l35.194"></a><span id="l35.194">   return NS_OK;</span>
<a href="#l35.195"></a><span id="l35.195"> }</span>
<a href="#l35.196"></a><span id="l35.196"> </span>
<a href="#l35.197"></a><span id="l35.197"> nsresult</span>
<a href="#l35.198"></a><span id="l35.198" class="difflineminus">-nsMsgComposeAndSend::FormatStringWithSMTPHostNameByName(const char16_t* aMsgName, char16_t **aString)</span>
<a href="#l35.199"></a><span id="l35.199" class="difflineplus">+nsMsgComposeAndSend::FormatStringWithSMTPHostNameByName(const char* aMsgName, char16_t **aString)</span>
<a href="#l35.200"></a><span id="l35.200"> {</span>
<a href="#l35.201"></a><span id="l35.201">   NS_ENSURE_ARG(aString);</span>
<a href="#l35.202"></a><span id="l35.202"> </span>
<a href="#l35.203"></a><span id="l35.203">   nsresult rv;</span>
<a href="#l35.204"></a><span id="l35.204">   nsCOMPtr&lt;nsISmtpService&gt; smtpService(do_GetService(NS_SMTPSERVICE_CONTRACTID, &amp;rv));</span>
<a href="#l35.205"></a><span id="l35.205">   NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l35.206"></a><span id="l35.206"> </span>
<a href="#l35.207"></a><span id="l35.207">   // Get the smtp hostname and format the string.</span>
<a href="#l35.208"></a><span id="l35.208" class="difflineat">@@ -3545,17 +3545,17 @@ nsMsgComposeAndSend::FormatStringWithSMT</span>
<a href="#l35.209"></a><span id="l35.209"> </span>
<a href="#l35.210"></a><span id="l35.210"> void</span>
<a href="#l35.211"></a><span id="l35.211"> nsMsgComposeAndSend::DoDeliveryExitProcessing(nsIURI * aUri, nsresult aExitCode, bool aCheckForMail)</span>
<a href="#l35.212"></a><span id="l35.212"> {</span>
<a href="#l35.213"></a><span id="l35.213">   // If we fail on the news delivery, no sense in going on so just notify</span>
<a href="#l35.214"></a><span id="l35.214">   // the user and exit.</span>
<a href="#l35.215"></a><span id="l35.215">   if (NS_FAILED(aExitCode))</span>
<a href="#l35.216"></a><span id="l35.216">   {</span>
<a href="#l35.217"></a><span id="l35.217" class="difflineminus">-    const char16_t* exitString = errorStringNameForErrorCode(aExitCode);</span>
<a href="#l35.218"></a><span id="l35.218" class="difflineplus">+    const char* exitString = errorStringNameForErrorCode(aExitCode);</span>
<a href="#l35.219"></a><span id="l35.219">     nsString eMsg;</span>
<a href="#l35.220"></a><span id="l35.220">     if (aExitCode == NS_ERROR_SMTP_SEND_FAILED_UNKNOWN_SERVER ||</span>
<a href="#l35.221"></a><span id="l35.221">         aExitCode == NS_ERROR_SMTP_SEND_FAILED_UNKNOWN_REASON ||</span>
<a href="#l35.222"></a><span id="l35.222">         aExitCode == NS_ERROR_SMTP_SEND_FAILED_REFUSED ||</span>
<a href="#l35.223"></a><span id="l35.223">         aExitCode == NS_ERROR_SMTP_SEND_FAILED_INTERRUPTED ||</span>
<a href="#l35.224"></a><span id="l35.224">         aExitCode == NS_ERROR_SMTP_SEND_FAILED_TIMEOUT ||</span>
<a href="#l35.225"></a><span id="l35.225">         aExitCode == NS_ERROR_SMTP_PASSWORD_UNDEFINED ||</span>
<a href="#l35.226"></a><span id="l35.226">         aExitCode == NS_ERROR_SMTP_AUTH_FAILURE ||</span>
<a href="#l35.227"></a><span id="l35.227" class="difflineat">@@ -3830,19 +3830,19 @@ NS_IMETHODIMP</span>
<a href="#l35.228"></a><span id="l35.228"> nsMsgComposeAndSend::NotifyListenerOnStopCopy(nsresult aStatus)</span>
<a href="#l35.229"></a><span id="l35.229"> {</span>
<a href="#l35.230"></a><span id="l35.230">   // This is one per copy so make sure we clean this up first.</span>
<a href="#l35.231"></a><span id="l35.231">   mCopyObj = nullptr;</span>
<a href="#l35.232"></a><span id="l35.232"> </span>
<a href="#l35.233"></a><span id="l35.233">   // Set a status message...</span>
<a href="#l35.234"></a><span id="l35.234">   nsString msg;</span>
<a href="#l35.235"></a><span id="l35.235">   if (NS_SUCCEEDED(aStatus))</span>
<a href="#l35.236"></a><span id="l35.236" class="difflineminus">-    mComposeBundle-&gt;GetStringFromName(u&quot;copyMessageComplete&quot;, getter_Copies(msg));</span>
<a href="#l35.237"></a><span id="l35.237" class="difflineplus">+    mComposeBundle-&gt;GetStringFromName(&quot;copyMessageComplete&quot;, getter_Copies(msg));</span>
<a href="#l35.238"></a><span id="l35.238">   else</span>
<a href="#l35.239"></a><span id="l35.239" class="difflineminus">-    mComposeBundle-&gt;GetStringFromName(u&quot;copyMessageFailed&quot;, getter_Copies(msg));</span>
<a href="#l35.240"></a><span id="l35.240" class="difflineplus">+    mComposeBundle-&gt;GetStringFromName(&quot;copyMessageFailed&quot;, getter_Copies(msg));</span>
<a href="#l35.241"></a><span id="l35.241"> </span>
<a href="#l35.242"></a><span id="l35.242">   SetStatusMessage(msg);</span>
<a href="#l35.243"></a><span id="l35.243">   nsCOMPtr&lt;nsIPrompt&gt; prompt;</span>
<a href="#l35.244"></a><span id="l35.244">   GetDefaultPrompt(getter_AddRefs(prompt));</span>
<a href="#l35.245"></a><span id="l35.245"> </span>
<a href="#l35.246"></a><span id="l35.246">   if (NS_FAILED(aStatus))</span>
<a href="#l35.247"></a><span id="l35.247">   {</span>
<a href="#l35.248"></a><span id="l35.248">     nsresult rv;</span>
<a href="#l35.249"></a><span id="l35.249" class="difflineat">@@ -3893,42 +3893,42 @@ nsMsgComposeAndSend::NotifyListenerOnSto</span>
<a href="#l35.250"></a><span id="l35.250">     const char16_t *formatStrings[] = { mSavedToFolderName.get(), accountName.get(),</span>
<a href="#l35.251"></a><span id="l35.251">                                         localFoldersAccountName.get() };</span>
<a href="#l35.252"></a><span id="l35.252"> </span>
<a href="#l35.253"></a><span id="l35.253">     nsString msg;</span>
<a href="#l35.254"></a><span id="l35.254">     switch (m_deliver_mode)</span>
<a href="#l35.255"></a><span id="l35.255">     {</span>
<a href="#l35.256"></a><span id="l35.256">       case nsMsgDeliverNow:</span>
<a href="#l35.257"></a><span id="l35.257">       case nsMsgSendUnsent:</span>
<a href="#l35.258"></a><span id="l35.258" class="difflineminus">-        rv = bundle-&gt;FormatStringFromName(u&quot;promptToSaveSentLocally&quot;,</span>
<a href="#l35.259"></a><span id="l35.259" class="difflineplus">+        rv = bundle-&gt;FormatStringFromName(&quot;promptToSaveSentLocally&quot;,</span>
<a href="#l35.260"></a><span id="l35.260">                                           formatStrings, 3,</span>
<a href="#l35.261"></a><span id="l35.261">                                           getter_Copies(msg));</span>
<a href="#l35.262"></a><span id="l35.262">         break;</span>
<a href="#l35.263"></a><span id="l35.263">       case nsMsgSaveAsDraft:</span>
<a href="#l35.264"></a><span id="l35.264" class="difflineminus">-        rv = bundle-&gt;FormatStringFromName(u&quot;promptToSaveDraftLocally&quot;,</span>
<a href="#l35.265"></a><span id="l35.265" class="difflineplus">+        rv = bundle-&gt;FormatStringFromName(&quot;promptToSaveDraftLocally&quot;,</span>
<a href="#l35.266"></a><span id="l35.266">                                           formatStrings, 3,</span>
<a href="#l35.267"></a><span id="l35.267">                                           getter_Copies(msg));</span>
<a href="#l35.268"></a><span id="l35.268">         break;</span>
<a href="#l35.269"></a><span id="l35.269">       case nsMsgSaveAsTemplate:</span>
<a href="#l35.270"></a><span id="l35.270" class="difflineminus">-        rv = bundle-&gt;FormatStringFromName(u&quot;promptToSaveTemplateLocally&quot;,</span>
<a href="#l35.271"></a><span id="l35.271" class="difflineplus">+        rv = bundle-&gt;FormatStringFromName(&quot;promptToSaveTemplateLocally&quot;,</span>
<a href="#l35.272"></a><span id="l35.272">                                           formatStrings, 3,</span>
<a href="#l35.273"></a><span id="l35.273">                                           getter_Copies(msg));</span>
<a href="#l35.274"></a><span id="l35.274">         break;</span>
<a href="#l35.275"></a><span id="l35.275">       default:</span>
<a href="#l35.276"></a><span id="l35.276">         rv = NS_ERROR_UNEXPECTED;</span>
<a href="#l35.277"></a><span id="l35.277">     }</span>
<a href="#l35.278"></a><span id="l35.278">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l35.279"></a><span id="l35.279">     int32_t buttonPressed = 0;</span>
<a href="#l35.280"></a><span id="l35.280">     bool showCheckBox = false;</span>
<a href="#l35.281"></a><span id="l35.281">     uint32_t buttonFlags = (nsIPrompt::BUTTON_POS_0 * nsIPrompt::BUTTON_TITLE_IS_STRING) +</span>
<a href="#l35.282"></a><span id="l35.282">                            (nsIPrompt::BUTTON_POS_1 * nsIPrompt::BUTTON_TITLE_CANCEL) +</span>
<a href="#l35.283"></a><span id="l35.283">                            (nsIPrompt::BUTTON_POS_2 * nsIPrompt::BUTTON_TITLE_SAVE);</span>
<a href="#l35.284"></a><span id="l35.284">     nsString dialogTitle, buttonLabelRetry;</span>
<a href="#l35.285"></a><span id="l35.285" class="difflineminus">-    bundle-&gt;GetStringFromName(u&quot;SaveDialogTitle&quot;, getter_Copies(dialogTitle));</span>
<a href="#l35.286"></a><span id="l35.286" class="difflineminus">-    bundle-&gt;GetStringFromName(u&quot;buttonLabelRetry&quot;, getter_Copies(buttonLabelRetry));</span>
<a href="#l35.287"></a><span id="l35.287" class="difflineplus">+    bundle-&gt;GetStringFromName(&quot;SaveDialogTitle&quot;, getter_Copies(dialogTitle));</span>
<a href="#l35.288"></a><span id="l35.288" class="difflineplus">+    bundle-&gt;GetStringFromName(&quot;buttonLabelRetry&quot;, getter_Copies(buttonLabelRetry));</span>
<a href="#l35.289"></a><span id="l35.289">     prompt-&gt;ConfirmEx(dialogTitle.get(), msg.get(), buttonFlags, buttonLabelRetry.get(),</span>
<a href="#l35.290"></a><span id="l35.290">                       nullptr, nullptr, nullptr, &amp;showCheckBox, &amp;buttonPressed);</span>
<a href="#l35.291"></a><span id="l35.291">     if (buttonPressed == 0)</span>
<a href="#l35.292"></a><span id="l35.292">     {</span>
<a href="#l35.293"></a><span id="l35.293">       // retry button clicked</span>
<a href="#l35.294"></a><span id="l35.294">       mSendProgress = nullptr; // this was canceled, so we need to clear it.</span>
<a href="#l35.295"></a><span id="l35.295">       return SendToMagicFolder(m_deliver_mode);</span>
<a href="#l35.296"></a><span id="l35.296">     }</span>
<a href="#l35.297"></a><span id="l35.297" class="difflineat">@@ -3947,17 +3947,17 @@ nsMsgComposeAndSend::NotifyListenerOnSto</span>
<a href="#l35.298"></a><span id="l35.298">                      nullptr,</span>
<a href="#l35.299"></a><span id="l35.299">                      mCompFields-&gt;GetNewspostUrl());</span>
<a href="#l35.300"></a><span id="l35.300"> </span>
<a href="#l35.301"></a><span id="l35.301">       if (NS_FAILED(rv))</span>
<a href="#l35.302"></a><span id="l35.302">       {</span>
<a href="#l35.303"></a><span id="l35.303">         // Save to Local Folders failed. Inform the user.</span>
<a href="#l35.304"></a><span id="l35.304">         nsCOMPtr&lt;nsIPrompt&gt; prompt;</span>
<a href="#l35.305"></a><span id="l35.305">         GetDefaultPrompt(getter_AddRefs(prompt));</span>
<a href="#l35.306"></a><span id="l35.306" class="difflineminus">-        nsMsgDisplayMessageByName(prompt, u&quot;saveToLocalFoldersFailed&quot;);</span>
<a href="#l35.307"></a><span id="l35.307" class="difflineplus">+        nsMsgDisplayMessageByName(prompt, &quot;saveToLocalFoldersFailed&quot;);</span>
<a href="#l35.308"></a><span id="l35.308">       }</span>
<a href="#l35.309"></a><span id="l35.309">     }</span>
<a href="#l35.310"></a><span id="l35.310"> </span>
<a href="#l35.311"></a><span id="l35.311">     // Failure detected when user saved to default folder and the user did not</span>
<a href="#l35.312"></a><span id="l35.312">     // retry; instead the user saved to Local Folders or canceled the save. So</span>
<a href="#l35.313"></a><span id="l35.313">     // just call Fail() with a success code so that it doesn't prompt the user</span>
<a href="#l35.314"></a><span id="l35.314">     // again since the user already knows about the failure and has reacted.</span>
<a href="#l35.315"></a><span id="l35.315">     Fail(NS_OK, nullptr, &amp;aStatus);</span>
<a href="#l35.316"></a><span id="l35.316" class="difflineat">@@ -4012,25 +4012,25 @@ nsMsgComposeAndSend::FilterSentMessage()</span>
<a href="#l35.317"></a><span id="l35.317"> }</span>
<a href="#l35.318"></a><span id="l35.318"> </span>
<a href="#l35.319"></a><span id="l35.319"> NS_IMETHODIMP</span>
<a href="#l35.320"></a><span id="l35.320"> nsMsgComposeAndSend::OnStopOperation(nsresult aStatus)</span>
<a href="#l35.321"></a><span id="l35.321"> {</span>
<a href="#l35.322"></a><span id="l35.322">   // Set a status message...</span>
<a href="#l35.323"></a><span id="l35.323">   nsString msg;</span>
<a href="#l35.324"></a><span id="l35.324">   if (NS_SUCCEEDED(aStatus))</span>
<a href="#l35.325"></a><span id="l35.325" class="difflineminus">-    mComposeBundle-&gt;GetStringFromName(u&quot;filterMessageComplete&quot;, getter_Copies(msg));</span>
<a href="#l35.326"></a><span id="l35.326" class="difflineplus">+    mComposeBundle-&gt;GetStringFromName(&quot;filterMessageComplete&quot;, getter_Copies(msg));</span>
<a href="#l35.327"></a><span id="l35.327">   else</span>
<a href="#l35.328"></a><span id="l35.328" class="difflineminus">-    mComposeBundle-&gt;GetStringFromName(u&quot;filterMessageFailed&quot;, getter_Copies(msg));</span>
<a href="#l35.329"></a><span id="l35.329" class="difflineplus">+    mComposeBundle-&gt;GetStringFromName(&quot;filterMessageFailed&quot;, getter_Copies(msg));</span>
<a href="#l35.330"></a><span id="l35.330"> </span>
<a href="#l35.331"></a><span id="l35.331">   SetStatusMessage(msg);</span>
<a href="#l35.332"></a><span id="l35.332"> </span>
<a href="#l35.333"></a><span id="l35.333">   if (NS_FAILED(aStatus))</span>
<a href="#l35.334"></a><span id="l35.334">   {</span>
<a href="#l35.335"></a><span id="l35.335" class="difflineminus">-    nsresult rv = mComposeBundle-&gt;GetStringFromName(u&quot;errorFilteringMsg&quot;, getter_Copies(msg));</span>
<a href="#l35.336"></a><span id="l35.336" class="difflineplus">+    nsresult rv = mComposeBundle-&gt;GetStringFromName(&quot;errorFilteringMsg&quot;, getter_Copies(msg));</span>
<a href="#l35.337"></a><span id="l35.337">     if (NS_SUCCEEDED(rv))</span>
<a href="#l35.338"></a><span id="l35.338">     {</span>
<a href="#l35.339"></a><span id="l35.339">       nsCOMPtr&lt;nsIPrompt&gt; prompt;</span>
<a href="#l35.340"></a><span id="l35.340">       GetDefaultPrompt(getter_AddRefs(prompt));</span>
<a href="#l35.341"></a><span id="l35.341">       nsMsgDisplayMessageByString(prompt, msg.get(), nullptr);</span>
<a href="#l35.342"></a><span id="l35.342">     }</span>
<a href="#l35.343"></a><span id="l35.343"> </span>
<a href="#l35.344"></a><span id="l35.344">     // We failed, however, give Fail a success code so that it doesn't prompt</span>
<a href="#l35.345"></a><span id="l35.345" class="difflineat">@@ -4479,17 +4479,17 @@ nsMsgComposeAndSend::MimeDoFCC(nsIFile  </span>
<a href="#l35.346"></a><span id="l35.346">   {</span>
<a href="#l35.347"></a><span id="l35.347">     GetFolderURIFromUserPrefs(mode, mUserIdentity, tmpUri);</span>
<a href="#l35.348"></a><span id="l35.348">   }</span>
<a href="#l35.349"></a><span id="l35.349">   status = MessageFolderIsLocal(mUserIdentity, mode, tmpUri.get(), &amp;folderIsLocal);</span>
<a href="#l35.350"></a><span id="l35.350">   if (NS_FAILED(status))</span>
<a href="#l35.351"></a><span id="l35.351">     goto FAIL;</span>
<a href="#l35.352"></a><span id="l35.352"> </span>
<a href="#l35.353"></a><span id="l35.353">   // Tell the user we are copying the message...</span>
<a href="#l35.354"></a><span id="l35.354" class="difflineminus">-  mComposeBundle-&gt;GetStringFromName(u&quot;copyMessageStart&quot;,</span>
<a href="#l35.355"></a><span id="l35.355" class="difflineplus">+  mComposeBundle-&gt;GetStringFromName(&quot;copyMessageStart&quot;,</span>
<a href="#l35.356"></a><span id="l35.356">                                     getter_Copies(msg));</span>
<a href="#l35.357"></a><span id="l35.357">   if (!msg.IsEmpty())</span>
<a href="#l35.358"></a><span id="l35.358">   {</span>
<a href="#l35.359"></a><span id="l35.359">     nsCOMPtr&lt;nsIRDFService&gt; rdfService = do_GetService(kRDFServiceCID);</span>
<a href="#l35.360"></a><span id="l35.360">     if (rdfService)</span>
<a href="#l35.361"></a><span id="l35.361">     {</span>
<a href="#l35.362"></a><span id="l35.362">       nsCOMPtr&lt;nsIRDFResource&gt; res;</span>
<a href="#l35.363"></a><span id="l35.363">       rdfService-&gt;GetResource(tmpUri, getter_AddRefs(res));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgSend.h</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgSend.h</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -184,17 +184,17 @@ public:</span>
<a href="#l36.4"></a><span id="l36.4">   nsMsgComposeAndSend();</span>
<a href="#l36.5"></a><span id="l36.5"> </span>
<a href="#l36.6"></a><span id="l36.6"> </span>
<a href="#l36.7"></a><span id="l36.7">   // Delivery and completion callback routines...</span>
<a href="#l36.8"></a><span id="l36.8">   NS_IMETHOD  DeliverMessage();</span>
<a href="#l36.9"></a><span id="l36.9">   NS_IMETHOD  DeliverFileAsMail();</span>
<a href="#l36.10"></a><span id="l36.10">   NS_IMETHOD  DeliverFileAsNews();</span>
<a href="#l36.11"></a><span id="l36.11">   void        DoDeliveryExitProcessing(nsIURI * aUrl, nsresult aExitCode, bool aCheckForMail);</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-  nsresult    FormatStringWithSMTPHostNameByName(const char16_t* aMsgName, char16_t **aString);</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+  nsresult    FormatStringWithSMTPHostNameByName(const char* aMsgName, char16_t **aString);</span>
<a href="#l36.14"></a><span id="l36.14"> </span>
<a href="#l36.15"></a><span id="l36.15">   nsresult    DoFcc();</span>
<a href="#l36.16"></a><span id="l36.16">   nsresult    StartMessageCopyOperation(nsIFile          *aFileSpec,</span>
<a href="#l36.17"></a><span id="l36.17">                                         nsMsgDeliverMode mode,</span>
<a href="#l36.18"></a><span id="l36.18">                                         const nsCString&amp; dest_uri);</span>
<a href="#l36.19"></a><span id="l36.19"> </span>
<a href="#l36.20"></a><span id="l36.20"> </span>
<a href="#l36.21"></a><span id="l36.21">   nsresult SendToMagicFolder(nsMsgDeliverMode flag);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgSendLater.cpp</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgSendLater.cpp</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -246,17 +246,17 @@ nsMsgSendLater::OnStopRequest(nsIRequest</span>
<a href="#l37.4"></a><span id="l37.4">     nsCOMPtr&lt;nsIPrompt&gt; promptObject;</span>
<a href="#l37.5"></a><span id="l37.5">     if (channel)</span>
<a href="#l37.6"></a><span id="l37.6">     {</span>
<a href="#l37.7"></a><span id="l37.7">       channel-&gt;GetURI(getter_AddRefs(uri));</span>
<a href="#l37.8"></a><span id="l37.8">       nsCOMPtr&lt;nsISmtpUrl&gt; smtpUrl (do_QueryInterface(uri));</span>
<a href="#l37.9"></a><span id="l37.9">       if (smtpUrl)</span>
<a href="#l37.10"></a><span id="l37.10">         smtpUrl-&gt;GetPrompt(getter_AddRefs(promptObject));</span>
<a href="#l37.11"></a><span id="l37.11">     }</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-    nsMsgDisplayMessageByName(promptObject, u&quot;errorQueuedDeliveryFailed&quot;);</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+    nsMsgDisplayMessageByName(promptObject, &quot;errorQueuedDeliveryFailed&quot;);</span>
<a href="#l37.14"></a><span id="l37.14"> </span>
<a href="#l37.15"></a><span id="l37.15">     // Getting the data failed, but we will still keep trying to send the rest...</span>
<a href="#l37.16"></a><span id="l37.16">     rv = StartNextMailFileSend(status);</span>
<a href="#l37.17"></a><span id="l37.17">     if (NS_FAILED(rv))</span>
<a href="#l37.18"></a><span id="l37.18">       EndSendMessages(rv, nullptr, mTotalSendCount, mTotalSentSuccessfully);</span>
<a href="#l37.19"></a><span id="l37.19">   }</span>
<a href="#l37.20"></a><span id="l37.20"> </span>
<a href="#l37.21"></a><span id="l37.21">   return rv;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgSendReport.cpp</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgSendReport.cpp</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -286,17 +286,17 @@ NS_IMETHODIMP nsMsgSendReport::DisplayRe</span>
<a href="#l38.4"></a><span id="l38.4">       case NS_ERROR_SEND_FAILED_BUT_NNTP_OK:</span>
<a href="#l38.5"></a><span id="l38.5">       case NS_MSG_FAILED_COPY_OPERATION:</span>
<a href="#l38.6"></a><span id="l38.6">       case NS_MSG_UNABLE_TO_SEND_LATER:</span>
<a href="#l38.7"></a><span id="l38.7">       case NS_MSG_UNABLE_TO_SAVE_DRAFT:</span>
<a href="#l38.8"></a><span id="l38.8">       case NS_MSG_UNABLE_TO_SAVE_TEMPLATE:</span>
<a href="#l38.9"></a><span id="l38.9">         //Ignore, don't need to repeat ourself.</span>
<a href="#l38.10"></a><span id="l38.10">         break;</span>
<a href="#l38.11"></a><span id="l38.11">       default:</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-        const char16_t* errorString = errorStringNameForErrorCode(currError);</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+        const char* errorString = errorStringNameForErrorCode(currError);</span>
<a href="#l38.14"></a><span id="l38.14">         nsMsgGetMessageByName(errorString, currMessage);</span>
<a href="#l38.15"></a><span id="l38.15">         break;</span>
<a href="#l38.16"></a><span id="l38.16">     }</span>
<a href="#l38.17"></a><span id="l38.17"> #ifdef __GNUC__</span>
<a href="#l38.18"></a><span id="l38.18"> #pragma GCC diagnostic pop</span>
<a href="#l38.19"></a><span id="l38.19"> #endif</span>
<a href="#l38.20"></a><span id="l38.20">   }</span>
<a href="#l38.21"></a><span id="l38.21"> </span>
<a href="#l38.22"></a><span id="l38.22" class="difflineat">@@ -305,56 +305,56 @@ NS_IMETHODIMP nsMsgSendReport::DisplayRe</span>
<a href="#l38.23"></a><span id="l38.23">     // SMTP is taking care of it's own error message and will return NS_ERROR_BUT_DONT_SHOW_ALERT as error code.</span>
<a href="#l38.24"></a><span id="l38.24">     // In that case, we must not show an alert ourself.</span>
<a href="#l38.25"></a><span id="l38.25">     if (currError == NS_ERROR_BUT_DONT_SHOW_ALERT)</span>
<a href="#l38.26"></a><span id="l38.26">     {</span>
<a href="#l38.27"></a><span id="l38.27">       mAlreadyDisplayReport = true;</span>
<a href="#l38.28"></a><span id="l38.28">       return NS_OK;</span>
<a href="#l38.29"></a><span id="l38.29">     }</span>
<a href="#l38.30"></a><span id="l38.30"> </span>
<a href="#l38.31"></a><span id="l38.31" class="difflineminus">-    bundle-&gt;GetStringFromName(u&quot;sendMessageErrorTitle&quot;,</span>
<a href="#l38.32"></a><span id="l38.32" class="difflineplus">+    bundle-&gt;GetStringFromName(&quot;sendMessageErrorTitle&quot;,</span>
<a href="#l38.33"></a><span id="l38.33">                               getter_Copies(dialogTitle));</span>
<a href="#l38.34"></a><span id="l38.34"> </span>
<a href="#l38.35"></a><span id="l38.35" class="difflineminus">-    const char16_t* preStrName = u&quot;sendFailed&quot;;</span>
<a href="#l38.36"></a><span id="l38.36" class="difflineplus">+    const char* preStrName = &quot;sendFailed&quot;;</span>
<a href="#l38.37"></a><span id="l38.37">     bool askToGoBackToCompose = false;</span>
<a href="#l38.38"></a><span id="l38.38">     switch (mCurrentProcess)</span>
<a href="#l38.39"></a><span id="l38.39">     {</span>
<a href="#l38.40"></a><span id="l38.40">       case process_BuildMessage :</span>
<a href="#l38.41"></a><span id="l38.41" class="difflineminus">-        preStrName = u&quot;sendFailed&quot;;</span>
<a href="#l38.42"></a><span id="l38.42" class="difflineplus">+        preStrName = &quot;sendFailed&quot;;</span>
<a href="#l38.43"></a><span id="l38.43">         askToGoBackToCompose = false;</span>
<a href="#l38.44"></a><span id="l38.44">         break;</span>
<a href="#l38.45"></a><span id="l38.45">       case process_NNTP :</span>
<a href="#l38.46"></a><span id="l38.46" class="difflineminus">-        preStrName = u&quot;sendFailed&quot;;</span>
<a href="#l38.47"></a><span id="l38.47" class="difflineplus">+        preStrName = &quot;sendFailed&quot;;</span>
<a href="#l38.48"></a><span id="l38.48">         askToGoBackToCompose = false;</span>
<a href="#l38.49"></a><span id="l38.49">         break;</span>
<a href="#l38.50"></a><span id="l38.50">       case process_SMTP :</span>
<a href="#l38.51"></a><span id="l38.51">         bool nntpProceeded;</span>
<a href="#l38.52"></a><span id="l38.52">         mProcessReport[process_NNTP]-&gt;GetProceeded(&amp;nntpProceeded);</span>
<a href="#l38.53"></a><span id="l38.53">         if (nntpProceeded)</span>
<a href="#l38.54"></a><span id="l38.54" class="difflineminus">-          preStrName = u&quot;sendFailedButNntpOk&quot;;</span>
<a href="#l38.55"></a><span id="l38.55" class="difflineplus">+          preStrName = &quot;sendFailedButNntpOk&quot;;</span>
<a href="#l38.56"></a><span id="l38.56">         else</span>
<a href="#l38.57"></a><span id="l38.57" class="difflineminus">-          preStrName = u&quot;sendFailed&quot;;</span>
<a href="#l38.58"></a><span id="l38.58" class="difflineplus">+          preStrName = &quot;sendFailed&quot;;</span>
<a href="#l38.59"></a><span id="l38.59">         askToGoBackToCompose = false;</span>
<a href="#l38.60"></a><span id="l38.60">         break;</span>
<a href="#l38.61"></a><span id="l38.61">       case process_Copy:</span>
<a href="#l38.62"></a><span id="l38.62" class="difflineminus">-        preStrName = u&quot;failedCopyOperation&quot;;</span>
<a href="#l38.63"></a><span id="l38.63" class="difflineplus">+        preStrName = &quot;failedCopyOperation&quot;;</span>
<a href="#l38.64"></a><span id="l38.64">         askToGoBackToCompose = (mDeliveryMode == nsIMsgCompDeliverMode::Now);</span>
<a href="#l38.65"></a><span id="l38.65">         break;</span>
<a href="#l38.66"></a><span id="l38.66">       case process_FCC:</span>
<a href="#l38.67"></a><span id="l38.67" class="difflineminus">-        preStrName = u&quot;failedCopyOperation&quot;;</span>
<a href="#l38.68"></a><span id="l38.68" class="difflineplus">+        preStrName = &quot;failedCopyOperation&quot;;</span>
<a href="#l38.69"></a><span id="l38.69">         askToGoBackToCompose = (mDeliveryMode == nsIMsgCompDeliverMode::Now);</span>
<a href="#l38.70"></a><span id="l38.70">         break;</span>
<a href="#l38.71"></a><span id="l38.71">     }</span>
<a href="#l38.72"></a><span id="l38.72">     bundle-&gt;GetStringFromName(preStrName, getter_Copies(dialogMessage));</span>
<a href="#l38.73"></a><span id="l38.73"> </span>
<a href="#l38.74"></a><span id="l38.74">     //Do we already have an error message?</span>
<a href="#l38.75"></a><span id="l38.75">     if (!askToGoBackToCompose &amp;&amp; currMessage.IsEmpty())</span>
<a href="#l38.76"></a><span id="l38.76">     {</span>
<a href="#l38.77"></a><span id="l38.77">       //we don't have an error description but we can put a generic explanation</span>
<a href="#l38.78"></a><span id="l38.78" class="difflineminus">-      bundle-&gt;GetStringFromName(u&quot;genericFailureExplanation&quot;,</span>
<a href="#l38.79"></a><span id="l38.79" class="difflineplus">+      bundle-&gt;GetStringFromName(&quot;genericFailureExplanation&quot;,</span>
<a href="#l38.80"></a><span id="l38.80">                                 getter_Copies(currMessage));</span>
<a href="#l38.81"></a><span id="l38.81">     }</span>
<a href="#l38.82"></a><span id="l38.82"> </span>
<a href="#l38.83"></a><span id="l38.83">     if (!currMessage.IsEmpty())</span>
<a href="#l38.84"></a><span id="l38.84">     {</span>
<a href="#l38.85"></a><span id="l38.85">       //Don't need to repeat ourself!</span>
<a href="#l38.86"></a><span id="l38.86">       if (!currMessage.Equals(dialogMessage))</span>
<a href="#l38.87"></a><span id="l38.87">       {</span>
<a href="#l38.88"></a><span id="l38.88" class="difflineat">@@ -363,67 +363,67 @@ NS_IMETHODIMP nsMsgSendReport::DisplayRe</span>
<a href="#l38.89"></a><span id="l38.89">         dialogMessage.Append(currMessage);</span>
<a href="#l38.90"></a><span id="l38.90">       }</span>
<a href="#l38.91"></a><span id="l38.91">     }</span>
<a href="#l38.92"></a><span id="l38.92"> </span>
<a href="#l38.93"></a><span id="l38.93">     if (askToGoBackToCompose)</span>
<a href="#l38.94"></a><span id="l38.94">     {</span>
<a href="#l38.95"></a><span id="l38.95">       bool oopsGiveMeBackTheComposeWindow = true;</span>
<a href="#l38.96"></a><span id="l38.96">       nsString text1;</span>
<a href="#l38.97"></a><span id="l38.97" class="difflineminus">-      bundle-&gt;GetStringFromName(u&quot;returnToComposeWindowQuestion&quot;,</span>
<a href="#l38.98"></a><span id="l38.98" class="difflineplus">+      bundle-&gt;GetStringFromName(&quot;returnToComposeWindowQuestion&quot;,</span>
<a href="#l38.99"></a><span id="l38.99">                                 getter_Copies(text1));</span>
<a href="#l38.100"></a><span id="l38.100">       if (!dialogMessage.IsEmpty())</span>
<a href="#l38.101"></a><span id="l38.101">         dialogMessage.AppendLiteral(&quot;\n&quot;);</span>
<a href="#l38.102"></a><span id="l38.102">       dialogMessage.Append(text1);</span>
<a href="#l38.103"></a><span id="l38.103">       nsMsgAskBooleanQuestionByString(prompt, dialogMessage.get(), &amp;oopsGiveMeBackTheComposeWindow, dialogTitle.get());</span>
<a href="#l38.104"></a><span id="l38.104">       if (!oopsGiveMeBackTheComposeWindow)</span>
<a href="#l38.105"></a><span id="l38.105">         *_retval = NS_OK;</span>
<a href="#l38.106"></a><span id="l38.106">     }</span>
<a href="#l38.107"></a><span id="l38.107">     else</span>
<a href="#l38.108"></a><span id="l38.108">       nsMsgDisplayMessageByString(prompt, dialogMessage.get(), dialogTitle.get());</span>
<a href="#l38.109"></a><span id="l38.109">   }</span>
<a href="#l38.110"></a><span id="l38.110">   else</span>
<a href="#l38.111"></a><span id="l38.111">   {</span>
<a href="#l38.112"></a><span id="l38.112" class="difflineminus">-    const char16_t* title;</span>
<a href="#l38.113"></a><span id="l38.113" class="difflineminus">-    const char16_t* messageName;</span>
<a href="#l38.114"></a><span id="l38.114" class="difflineplus">+    const char* title;</span>
<a href="#l38.115"></a><span id="l38.115" class="difflineplus">+    const char* messageName;</span>
<a href="#l38.116"></a><span id="l38.116"> </span>
<a href="#l38.117"></a><span id="l38.117">     switch (mDeliveryMode)</span>
<a href="#l38.118"></a><span id="l38.118">     {</span>
<a href="#l38.119"></a><span id="l38.119">       case nsIMsgCompDeliverMode::Later:</span>
<a href="#l38.120"></a><span id="l38.120" class="difflineminus">-        title = u&quot;sendLaterErrorTitle&quot;;</span>
<a href="#l38.121"></a><span id="l38.121" class="difflineminus">-        messageName = u&quot;unableToSendLater&quot;;</span>
<a href="#l38.122"></a><span id="l38.122" class="difflineplus">+        title = &quot;sendLaterErrorTitle&quot;;</span>
<a href="#l38.123"></a><span id="l38.123" class="difflineplus">+        messageName = &quot;unableToSendLater&quot;;</span>
<a href="#l38.124"></a><span id="l38.124">         break;</span>
<a href="#l38.125"></a><span id="l38.125"> </span>
<a href="#l38.126"></a><span id="l38.126">       case nsIMsgCompDeliverMode::AutoSaveAsDraft:</span>
<a href="#l38.127"></a><span id="l38.127">       case nsIMsgCompDeliverMode::SaveAsDraft:</span>
<a href="#l38.128"></a><span id="l38.128" class="difflineminus">-        title = u&quot;saveDraftErrorTitle&quot;;</span>
<a href="#l38.129"></a><span id="l38.129" class="difflineminus">-        messageName = u&quot;unableToSaveDraft&quot;;</span>
<a href="#l38.130"></a><span id="l38.130" class="difflineplus">+        title = &quot;saveDraftErrorTitle&quot;;</span>
<a href="#l38.131"></a><span id="l38.131" class="difflineplus">+        messageName = &quot;unableToSaveDraft&quot;;</span>
<a href="#l38.132"></a><span id="l38.132">         break;</span>
<a href="#l38.133"></a><span id="l38.133"> </span>
<a href="#l38.134"></a><span id="l38.134">       case nsIMsgCompDeliverMode::SaveAsTemplate:</span>
<a href="#l38.135"></a><span id="l38.135" class="difflineminus">-        title = u&quot;saveTemplateErrorTitle&quot;;</span>
<a href="#l38.136"></a><span id="l38.136" class="difflineminus">-        messageName = u&quot;unableToSaveTemplate&quot;;</span>
<a href="#l38.137"></a><span id="l38.137" class="difflineplus">+        title = &quot;saveTemplateErrorTitle&quot;;</span>
<a href="#l38.138"></a><span id="l38.138" class="difflineplus">+        messageName = &quot;unableToSaveTemplate&quot;;</span>
<a href="#l38.139"></a><span id="l38.139">         break;</span>
<a href="#l38.140"></a><span id="l38.140"> </span>
<a href="#l38.141"></a><span id="l38.141">       default:</span>
<a href="#l38.142"></a><span id="l38.142">         /* This should never happen! */</span>
<a href="#l38.143"></a><span id="l38.143" class="difflineminus">-        title = u&quot;sendMessageErrorTitle&quot;;</span>
<a href="#l38.144"></a><span id="l38.144" class="difflineminus">-        messageName = u&quot;sendFailed&quot;;</span>
<a href="#l38.145"></a><span id="l38.145" class="difflineplus">+        title = &quot;sendMessageErrorTitle&quot;;</span>
<a href="#l38.146"></a><span id="l38.146" class="difflineplus">+        messageName = &quot;sendFailed&quot;;</span>
<a href="#l38.147"></a><span id="l38.147">         break;</span>
<a href="#l38.148"></a><span id="l38.148">     }</span>
<a href="#l38.149"></a><span id="l38.149"> </span>
<a href="#l38.150"></a><span id="l38.150">     bundle-&gt;GetStringFromName(title, getter_Copies(dialogTitle));</span>
<a href="#l38.151"></a><span id="l38.151">     bundle-&gt;GetStringFromName(messageName,</span>
<a href="#l38.152"></a><span id="l38.152">                               getter_Copies(dialogMessage));</span>
<a href="#l38.153"></a><span id="l38.153"> </span>
<a href="#l38.154"></a><span id="l38.154">     //Do we have an error message...</span>
<a href="#l38.155"></a><span id="l38.155">     if (currMessage.IsEmpty())</span>
<a href="#l38.156"></a><span id="l38.156">     {</span>
<a href="#l38.157"></a><span id="l38.157">       //we don't have an error description but we can put a generic explanation</span>
<a href="#l38.158"></a><span id="l38.158" class="difflineminus">-      bundle-&gt;GetStringFromName(u&quot;genericFailureExplanation&quot;,</span>
<a href="#l38.159"></a><span id="l38.159" class="difflineplus">+      bundle-&gt;GetStringFromName(&quot;genericFailureExplanation&quot;,</span>
<a href="#l38.160"></a><span id="l38.160">                                 getter_Copies(currMessage));</span>
<a href="#l38.161"></a><span id="l38.161">     }</span>
<a href="#l38.162"></a><span id="l38.162"> </span>
<a href="#l38.163"></a><span id="l38.163">     if (!currMessage.IsEmpty())</span>
<a href="#l38.164"></a><span id="l38.164">     {</span>
<a href="#l38.165"></a><span id="l38.165">       if (!dialogMessage.IsEmpty())</span>
<a href="#l38.166"></a><span id="l38.166">         dialogMessage.Append(char16_t('\n'));</span>
<a href="#l38.167"></a><span id="l38.167">       dialogMessage.Append(currMessage);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/mailnews/compose/src/nsSmtpProtocol.cpp</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/mailnews/compose/src/nsSmtpProtocol.cpp</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -89,26 +89,26 @@ nsresult nsExplainErrorDetails(nsISmtpUr</span>
<a href="#l39.4"></a><span id="l39.4">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l39.5"></a><span id="l39.5">   nsresult rv = bundleService-&gt;CreateBundle(</span>
<a href="#l39.6"></a><span id="l39.6">     &quot;chrome://messenger/locale/messengercompose/composeMsgs.properties&quot;,</span>
<a href="#l39.7"></a><span id="l39.7">     getter_AddRefs(bundle));</span>
<a href="#l39.8"></a><span id="l39.8">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l39.9"></a><span id="l39.9"> </span>
<a href="#l39.10"></a><span id="l39.10">   va_start (args, aCode);</span>
<a href="#l39.11"></a><span id="l39.11"> </span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-  const char16_t* exitString;</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+  const char* exitString;</span>
<a href="#l39.14"></a><span id="l39.14"> #ifdef __GNUC__</span>
<a href="#l39.15"></a><span id="l39.15"> // Temporary workaroung until bug 783526 is fixed.</span>
<a href="#l39.16"></a><span id="l39.16"> #pragma GCC diagnostic push</span>
<a href="#l39.17"></a><span id="l39.17"> #pragma GCC diagnostic ignored &quot;-Wswitch&quot;</span>
<a href="#l39.18"></a><span id="l39.18"> #endif</span>
<a href="#l39.19"></a><span id="l39.19">   switch (aCode)</span>
<a href="#l39.20"></a><span id="l39.20">   {</span>
<a href="#l39.21"></a><span id="l39.21">     case NS_ERROR_ILLEGAL_LOCALPART:</span>
<a href="#l39.22"></a><span id="l39.22" class="difflineminus">-      bundle-&gt;GetStringFromName(u&quot;errorIllegalLocalPart&quot;,</span>
<a href="#l39.23"></a><span id="l39.23" class="difflineplus">+      bundle-&gt;GetStringFromName(&quot;errorIllegalLocalPart&quot;,</span>
<a href="#l39.24"></a><span id="l39.24">                                 getter_Copies(eMsg));</span>
<a href="#l39.25"></a><span id="l39.25">       msg = nsTextFormatter::vsmprintf(eMsg.get(), args);</span>
<a href="#l39.26"></a><span id="l39.26">       break;</span>
<a href="#l39.27"></a><span id="l39.27">     case NS_ERROR_SMTP_SERVER_ERROR:</span>
<a href="#l39.28"></a><span id="l39.28">     case NS_ERROR_TCP_READ_ERROR:</span>
<a href="#l39.29"></a><span id="l39.29">     case NS_ERROR_SMTP_TEMP_SIZE_EXCEEDED:</span>
<a href="#l39.30"></a><span id="l39.30">     case NS_ERROR_SMTP_PERM_SIZE_EXCEEDED_1:</span>
<a href="#l39.31"></a><span id="l39.31">     case NS_ERROR_SMTP_PERM_SIZE_EXCEEDED_2:</span>
<a href="#l39.32"></a><span id="l39.32" class="difflineat">@@ -118,17 +118,17 @@ nsresult nsExplainErrorDetails(nsISmtpUr</span>
<a href="#l39.33"></a><span id="l39.33">     case NS_ERROR_SENDING_MESSAGE:</span>
<a href="#l39.34"></a><span id="l39.34">     case NS_ERROR_SMTP_GREETING:</span>
<a href="#l39.35"></a><span id="l39.35">       exitString = errorStringNameForErrorCode(aCode);</span>
<a href="#l39.36"></a><span id="l39.36">       bundle-&gt;GetStringFromName(exitString, getter_Copies(eMsg));</span>
<a href="#l39.37"></a><span id="l39.37">       msg = nsTextFormatter::vsmprintf(eMsg.get(), args);</span>
<a href="#l39.38"></a><span id="l39.38">       break;</span>
<a href="#l39.39"></a><span id="l39.39">     default:</span>
<a href="#l39.40"></a><span id="l39.40">       NS_WARNING(&quot;falling to default error code&quot;);</span>
<a href="#l39.41"></a><span id="l39.41" class="difflineminus">-      bundle-&gt;GetStringFromName(u&quot;communicationsError&quot;, getter_Copies(eMsg));</span>
<a href="#l39.42"></a><span id="l39.42" class="difflineplus">+      bundle-&gt;GetStringFromName(&quot;communicationsError&quot;, getter_Copies(eMsg));</span>
<a href="#l39.43"></a><span id="l39.43">       msg = nsTextFormatter::smprintf(eMsg.get(), aCode);</span>
<a href="#l39.44"></a><span id="l39.44">       break;</span>
<a href="#l39.45"></a><span id="l39.45">   }</span>
<a href="#l39.46"></a><span id="l39.46"> #ifdef __GNUC__</span>
<a href="#l39.47"></a><span id="l39.47"> #pragma GCC diagnostic pop</span>
<a href="#l39.48"></a><span id="l39.48"> #endif</span>
<a href="#l39.49"></a><span id="l39.49"> </span>
<a href="#l39.50"></a><span id="l39.50">   if (msg)</span>
<a href="#l39.51"></a><span id="l39.51" class="difflineat">@@ -567,17 +567,17 @@ NS_IMETHODIMP nsSmtpProtocol::OnStopRequ</span>
<a href="#l39.52"></a><span id="l39.52"> </span>
<a href="#l39.53"></a><span id="l39.53">   return rv;</span>
<a href="#l39.54"></a><span id="l39.54"> }</span>
<a href="#l39.55"></a><span id="l39.55"> </span>
<a href="#l39.56"></a><span id="l39.56"> /////////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l39.57"></a><span id="l39.57"> // End of nsIStreamListenerSupport</span>
<a href="#l39.58"></a><span id="l39.58"> //////////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l39.59"></a><span id="l39.59"> </span>
<a href="#l39.60"></a><span id="l39.60" class="difflineminus">-void nsSmtpProtocol::UpdateStatus(const char16_t* aStatusName)</span>
<a href="#l39.61"></a><span id="l39.61" class="difflineplus">+void nsSmtpProtocol::UpdateStatus(const char* aStatusName)</span>
<a href="#l39.62"></a><span id="l39.62"> {</span>
<a href="#l39.63"></a><span id="l39.63">   if (m_statusFeedback)</span>
<a href="#l39.64"></a><span id="l39.64">   {</span>
<a href="#l39.65"></a><span id="l39.65">     nsCOMPtr&lt;nsIStringBundleService&gt; bundleService =</span>
<a href="#l39.66"></a><span id="l39.66">       mozilla::services::GetStringBundleService();</span>
<a href="#l39.67"></a><span id="l39.67">     if (!bundleService) return;</span>
<a href="#l39.68"></a><span id="l39.68">     nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l39.69"></a><span id="l39.69">     nsresult rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/messengercompose/composeMsgs.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l39.70"></a><span id="l39.70" class="difflineat">@@ -1843,17 +1843,17 @@ nsresult nsSmtpProtocol::SendDataRespons</span>
<a href="#l39.71"></a><span id="l39.71"> </span>
<a href="#l39.72"></a><span id="l39.72">     m_urlErrorState = NS_ERROR_BUT_DONT_SHOW_ALERT;</span>
<a href="#l39.73"></a><span id="l39.73">     return(NS_ERROR_SENDING_DATA_COMMAND);</span>
<a href="#l39.74"></a><span id="l39.74">   }</span>
<a href="#l39.75"></a><span id="l39.75"> </span>
<a href="#l39.76"></a><span id="l39.76">   m_nextState = SMTP_SEND_POST_DATA;</span>
<a href="#l39.77"></a><span id="l39.77">   ClearFlag(SMTP_PAUSE_FOR_READ);   /* send data directly */</span>
<a href="#l39.78"></a><span id="l39.78"> </span>
<a href="#l39.79"></a><span id="l39.79" class="difflineminus">-  UpdateStatus(u&quot;smtpDeliveringMail&quot;);</span>
<a href="#l39.80"></a><span id="l39.80" class="difflineplus">+  UpdateStatus(&quot;smtpDeliveringMail&quot;);</span>
<a href="#l39.81"></a><span id="l39.81"> </span>
<a href="#l39.82"></a><span id="l39.82">   {</span>
<a href="#l39.83"></a><span id="l39.83"> //      m_runningURL-&gt;GetBodySize(&amp;m_totalMessageSize);</span>
<a href="#l39.84"></a><span id="l39.84">   }</span>
<a href="#l39.85"></a><span id="l39.85">   return(status);</span>
<a href="#l39.86"></a><span id="l39.86"> }</span>
<a href="#l39.87"></a><span id="l39.87"> </span>
<a href="#l39.88"></a><span id="l39.88"> void nsSmtpProtocol::SendMessageInFile()</span>
<a href="#l39.89"></a><span id="l39.89" class="difflineat">@@ -1866,17 +1866,17 @@ void nsSmtpProtocol::SendMessageInFile()</span>
<a href="#l39.90"></a><span id="l39.90">     // in some windows header file</span>
<a href="#l39.91"></a><span id="l39.91">     nsMsgAsyncWriteProtocol::PostMessage(url, file);</span>
<a href="#l39.92"></a><span id="l39.92"> </span>
<a href="#l39.93"></a><span id="l39.93">   SetFlag(SMTP_PAUSE_FOR_READ);</span>
<a href="#l39.94"></a><span id="l39.94"> </span>
<a href="#l39.95"></a><span id="l39.95">   // for now, we are always done at this point..we aren't making multiple calls</span>
<a href="#l39.96"></a><span id="l39.96">   // to post data...</span>
<a href="#l39.97"></a><span id="l39.97"> </span>
<a href="#l39.98"></a><span id="l39.98" class="difflineminus">-  UpdateStatus(u&quot;smtpDeliveringMail&quot;);</span>
<a href="#l39.99"></a><span id="l39.99" class="difflineplus">+  UpdateStatus(&quot;smtpDeliveringMail&quot;);</span>
<a href="#l39.100"></a><span id="l39.100">   m_nextState = SMTP_RESPONSE;</span>
<a href="#l39.101"></a><span id="l39.101">   m_nextStateAfterResponse = SMTP_SEND_MESSAGE_RESPONSE;</span>
<a href="#l39.102"></a><span id="l39.102"> }</span>
<a href="#l39.103"></a><span id="l39.103"> </span>
<a href="#l39.104"></a><span id="l39.104"> void nsSmtpProtocol::SendPostData()</span>
<a href="#l39.105"></a><span id="l39.105"> {</span>
<a href="#l39.106"></a><span id="l39.106"> 	// mscott: as a first pass, I'm writing everything at once and am not</span>
<a href="#l39.107"></a><span id="l39.107"> 	// doing it in chunks...</span>
<a href="#l39.108"></a><span id="l39.108" class="difflineat">@@ -1911,17 +1911,17 @@ nsresult nsSmtpProtocol::SendMessageResp</span>
<a href="#l39.109"></a><span id="l39.109">                                                             NS_ERROR_SENDING_MESSAGE,</span>
<a href="#l39.110"></a><span id="l39.110">                                                             m_responseText.get());</span>
<a href="#l39.111"></a><span id="l39.111">     NS_ASSERTION(NS_SUCCEEDED(rv), &quot;failed to explain SMTP error&quot;);</span>
<a href="#l39.112"></a><span id="l39.112"> </span>
<a href="#l39.113"></a><span id="l39.113">     m_urlErrorState = NS_ERROR_BUT_DONT_SHOW_ALERT;</span>
<a href="#l39.114"></a><span id="l39.114">     return(NS_ERROR_SENDING_MESSAGE);</span>
<a href="#l39.115"></a><span id="l39.115">   }</span>
<a href="#l39.116"></a><span id="l39.116"> </span>
<a href="#l39.117"></a><span id="l39.117" class="difflineminus">-  UpdateStatus(u&quot;smtpMailSent&quot;);</span>
<a href="#l39.118"></a><span id="l39.118" class="difflineplus">+  UpdateStatus(&quot;smtpMailSent&quot;);</span>
<a href="#l39.119"></a><span id="l39.119"> </span>
<a href="#l39.120"></a><span id="l39.120">   /* else */</span>
<a href="#l39.121"></a><span id="l39.121">   return SendQuit();</span>
<a href="#l39.122"></a><span id="l39.122"> }</span>
<a href="#l39.123"></a><span id="l39.123"> </span>
<a href="#l39.124"></a><span id="l39.124"> nsresult nsSmtpProtocol::SendQuit(SmtpState aNextStateAfterResponse)</span>
<a href="#l39.125"></a><span id="l39.125"> {</span>
<a href="#l39.126"></a><span id="l39.126">   m_sendDone = true;</span>
<a href="#l39.127"></a><span id="l39.127" class="difflineat">@@ -2214,31 +2214,31 @@ nsSmtpProtocol::PromptForPassword(nsISmt</span>
<a href="#l39.128"></a><span id="l39.128"> </span>
<a href="#l39.129"></a><span id="l39.129">   nsCOMPtr&lt;nsIStringBundle&gt; composeStringBundle;</span>
<a href="#l39.130"></a><span id="l39.130">   nsresult rv = stringService-&gt;CreateBundle(&quot;chrome://messenger/locale/messengercompose/composeMsgs.properties&quot;, getter_AddRefs(composeStringBundle));</span>
<a href="#l39.131"></a><span id="l39.131">   NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l39.132"></a><span id="l39.132"> </span>
<a href="#l39.133"></a><span id="l39.133">   nsString passwordPromptString;</span>
<a href="#l39.134"></a><span id="l39.134">   if(formatStrings[1])</span>
<a href="#l39.135"></a><span id="l39.135">     rv = composeStringBundle-&gt;FormatStringFromName(</span>
<a href="#l39.136"></a><span id="l39.136" class="difflineminus">-      u&quot;smtpEnterPasswordPromptWithUsername&quot;,</span>
<a href="#l39.137"></a><span id="l39.137" class="difflineplus">+      &quot;smtpEnterPasswordPromptWithUsername&quot;,</span>
<a href="#l39.138"></a><span id="l39.138">       formatStrings, 2, getter_Copies(passwordPromptString));</span>
<a href="#l39.139"></a><span id="l39.139">   else</span>
<a href="#l39.140"></a><span id="l39.140">     rv = composeStringBundle-&gt;FormatStringFromName(</span>
<a href="#l39.141"></a><span id="l39.141" class="difflineminus">-      u&quot;smtpEnterPasswordPrompt&quot;,</span>
<a href="#l39.142"></a><span id="l39.142" class="difflineplus">+      &quot;smtpEnterPasswordPrompt&quot;,</span>
<a href="#l39.143"></a><span id="l39.143">       formatStrings, 1, getter_Copies(passwordPromptString));</span>
<a href="#l39.144"></a><span id="l39.144">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l39.145"></a><span id="l39.145"> </span>
<a href="#l39.146"></a><span id="l39.146">   nsCOMPtr&lt;nsIAuthPrompt&gt; netPrompt;</span>
<a href="#l39.147"></a><span id="l39.147">   rv = aSmtpUrl-&gt;GetAuthPrompt(getter_AddRefs(netPrompt));</span>
<a href="#l39.148"></a><span id="l39.148">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l39.149"></a><span id="l39.149"> </span>
<a href="#l39.150"></a><span id="l39.150">   nsString passwordTitle;</span>
<a href="#l39.151"></a><span id="l39.151">   rv = composeStringBundle-&gt;GetStringFromName(</span>
<a href="#l39.152"></a><span id="l39.152" class="difflineminus">-    u&quot;smtpEnterPasswordPromptTitle&quot;,</span>
<a href="#l39.153"></a><span id="l39.153" class="difflineplus">+    &quot;smtpEnterPasswordPromptTitle&quot;,</span>
<a href="#l39.154"></a><span id="l39.154">     getter_Copies(passwordTitle));</span>
<a href="#l39.155"></a><span id="l39.155">   NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l39.156"></a><span id="l39.156"> </span>
<a href="#l39.157"></a><span id="l39.157">   rv = aSmtpServer-&gt;GetPasswordWithUI(passwordPromptString.get(), passwordTitle.get(),</span>
<a href="#l39.158"></a><span id="l39.158">     netPrompt, aPassword);</span>
<a href="#l39.159"></a><span id="l39.159">   NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l39.160"></a><span id="l39.160">   return rv;</span>
<a href="#l39.161"></a><span id="l39.161"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/mailnews/compose/src/nsSmtpProtocol.h</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/mailnews/compose/src/nsSmtpProtocol.h</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -160,17 +160,17 @@ private:</span>
<a href="#l40.4"></a><span id="l40.4">     nsresult LoadUrlInternal(nsIURI *aURL, nsISupports *aConsumer);</span>
<a href="#l40.5"></a><span id="l40.5">     virtual nsresult ProcessProtocolState(nsIURI * url, nsIInputStream * inputStream, </span>
<a href="#l40.6"></a><span id="l40.6">                                           uint64_t sourceOffset, uint32_t length) override;</span>
<a href="#l40.7"></a><span id="l40.7"> </span>
<a href="#l40.8"></a><span id="l40.8">     ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l40.9"></a><span id="l40.9">     // Communication methods --&gt; Reading and writing protocol</span>
<a href="#l40.10"></a><span id="l40.10">     ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l40.11"></a><span id="l40.11"> </span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-    void UpdateStatus(const char16_t* aStatusName);</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+    void UpdateStatus(const char* aStatusName);</span>
<a href="#l40.14"></a><span id="l40.14">     void UpdateStatusWithString(const char16_t * aStatusString);</span>
<a href="#l40.15"></a><span id="l40.15"> </span>
<a href="#l40.16"></a><span id="l40.16">     ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l40.17"></a><span id="l40.17">     // Protocol Methods --&gt; This protocol is state driven so each protocol method is </span>
<a href="#l40.18"></a><span id="l40.18">     //						designed to re-act to the current &quot;state&quot;. I've attempted to </span>
<a href="#l40.19"></a><span id="l40.19">     //						group them together based on functionality. </span>
<a href="#l40.20"></a><span id="l40.20">     ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l40.21"></a><span id="l40.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -69,25 +69,25 @@ NS_IMETHODIMP nsMsgMailView::GetPrettyNa</span>
<a href="#l41.4"></a><span id="l41.4">                                     getter_AddRefs(mBundle));</span>
<a href="#l41.5"></a><span id="l41.5">     }</span>
<a href="#l41.6"></a><span id="l41.6"> </span>
<a href="#l41.7"></a><span id="l41.7">     NS_ENSURE_TRUE(mBundle, NS_ERROR_FAILURE);</span>
<a href="#l41.8"></a><span id="l41.8"> </span>
<a href="#l41.9"></a><span id="l41.9">     // see if mName has an associated pretty name inside our string bundle and if so, use that as the pretty name</span>
<a href="#l41.10"></a><span id="l41.10">     // otherwise just return mName</span>
<a href="#l41.11"></a><span id="l41.11">     if (mName.EqualsLiteral(kDefaultViewPeopleIKnow))</span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-        rv = mBundle-&gt;GetStringFromName(u&quot;mailViewPeopleIKnow&quot;, aMailViewName);</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+        rv = mBundle-&gt;GetStringFromName(&quot;mailViewPeopleIKnow&quot;, aMailViewName);</span>
<a href="#l41.14"></a><span id="l41.14">     else if (mName.EqualsLiteral(kDefaultViewRecent))</span>
<a href="#l41.15"></a><span id="l41.15" class="difflineminus">-        rv = mBundle-&gt;GetStringFromName(u&quot;mailViewRecentMail&quot;, aMailViewName);</span>
<a href="#l41.16"></a><span id="l41.16" class="difflineplus">+        rv = mBundle-&gt;GetStringFromName(&quot;mailViewRecentMail&quot;, aMailViewName);</span>
<a href="#l41.17"></a><span id="l41.17">     else if (mName.EqualsLiteral(kDefaultViewFiveDays))</span>
<a href="#l41.18"></a><span id="l41.18" class="difflineminus">-        rv = mBundle-&gt;GetStringFromName(u&quot;mailViewLastFiveDays&quot;, aMailViewName);</span>
<a href="#l41.19"></a><span id="l41.19" class="difflineplus">+        rv = mBundle-&gt;GetStringFromName(&quot;mailViewLastFiveDays&quot;, aMailViewName);</span>
<a href="#l41.20"></a><span id="l41.20">     else if (mName.EqualsLiteral(kDefaultViewNotJunk))</span>
<a href="#l41.21"></a><span id="l41.21" class="difflineminus">-        rv = mBundle-&gt;GetStringFromName(u&quot;mailViewNotJunk&quot;, aMailViewName);</span>
<a href="#l41.22"></a><span id="l41.22" class="difflineplus">+        rv = mBundle-&gt;GetStringFromName(&quot;mailViewNotJunk&quot;, aMailViewName);</span>
<a href="#l41.23"></a><span id="l41.23">     else if (mName.EqualsLiteral(kDefaultViewHasAttachments))</span>
<a href="#l41.24"></a><span id="l41.24" class="difflineminus">-        rv = mBundle-&gt;GetStringFromName(u&quot;mailViewHasAttachments&quot;, aMailViewName);</span>
<a href="#l41.25"></a><span id="l41.25" class="difflineplus">+        rv = mBundle-&gt;GetStringFromName(&quot;mailViewHasAttachments&quot;, aMailViewName);</span>
<a href="#l41.26"></a><span id="l41.26">     else</span>
<a href="#l41.27"></a><span id="l41.27">         *aMailViewName = ToNewUnicode(mName);</span>
<a href="#l41.28"></a><span id="l41.28"> </span>
<a href="#l41.29"></a><span id="l41.29">     return rv;</span>
<a href="#l41.30"></a><span id="l41.30"> }</span>
<a href="#l41.31"></a><span id="l41.31"> </span>
<a href="#l41.32"></a><span id="l41.32"> NS_IMETHODIMP nsMsgMailView::GetSearchTerms(nsIMutableArray **aSearchTerms)</span>
<a href="#l41.33"></a><span id="l41.33"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -94,17 +94,17 @@ nsMsgMdnGenerator::nsMsgMdnGenerator()</span>
<a href="#l42.4"></a><span id="l42.4">     m_outsideDomainOp = eNeverSendOp;</span>
<a href="#l42.5"></a><span id="l42.5">     m_otherOp = eNeverSendOp;</span>
<a href="#l42.6"></a><span id="l42.6"> }</span>
<a href="#l42.7"></a><span id="l42.7"> </span>
<a href="#l42.8"></a><span id="l42.8"> nsMsgMdnGenerator::~nsMsgMdnGenerator()</span>
<a href="#l42.9"></a><span id="l42.9"> {</span>
<a href="#l42.10"></a><span id="l42.10"> }</span>
<a href="#l42.11"></a><span id="l42.11"> </span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-nsresult nsMsgMdnGenerator::FormatStringFromName(const char16_t *aName,</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+nsresult nsMsgMdnGenerator::FormatStringFromName(const char *aName,</span>
<a href="#l42.14"></a><span id="l42.14">                                                  const char16_t *aString,</span>
<a href="#l42.15"></a><span id="l42.15">                                                  char16_t **aResultString)</span>
<a href="#l42.16"></a><span id="l42.16"> {</span>
<a href="#l42.17"></a><span id="l42.17">     DEBUG_MDN(&quot;nsMsgMdnGenerator::FormatStringFromName&quot;);</span>
<a href="#l42.18"></a><span id="l42.18"> </span>
<a href="#l42.19"></a><span id="l42.19">     nsCOMPtr&lt;nsIStringBundleService&gt; bundleService =</span>
<a href="#l42.20"></a><span id="l42.20">       mozilla::services::GetStringBundleService();</span>
<a href="#l42.21"></a><span id="l42.21">     NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l42.22"></a><span id="l42.22" class="difflineat">@@ -116,17 +116,17 @@ nsresult nsMsgMdnGenerator::FormatString</span>
<a href="#l42.23"></a><span id="l42.23"> </span>
<a href="#l42.24"></a><span id="l42.24">     const char16_t *formatStrings[1] = { aString };</span>
<a href="#l42.25"></a><span id="l42.25">     rv = bundle-&gt;FormatStringFromName(aName,</span>
<a href="#l42.26"></a><span id="l42.26">                     formatStrings, 1, aResultString);</span>
<a href="#l42.27"></a><span id="l42.27">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l42.28"></a><span id="l42.28">     return rv;</span>
<a href="#l42.29"></a><span id="l42.29"> }</span>
<a href="#l42.30"></a><span id="l42.30"> </span>
<a href="#l42.31"></a><span id="l42.31" class="difflineminus">-nsresult nsMsgMdnGenerator::GetStringFromName(const char16_t *aName,</span>
<a href="#l42.32"></a><span id="l42.32" class="difflineplus">+nsresult nsMsgMdnGenerator::GetStringFromName(const char *aName,</span>
<a href="#l42.33"></a><span id="l42.33">                                                char16_t **aResultString)</span>
<a href="#l42.34"></a><span id="l42.34"> {</span>
<a href="#l42.35"></a><span id="l42.35">     DEBUG_MDN(&quot;nsMsgMdnGenerator::GetStringFromName&quot;);</span>
<a href="#l42.36"></a><span id="l42.36"> </span>
<a href="#l42.37"></a><span id="l42.37">     nsCOMPtr&lt;nsIStringBundleService&gt; bundleService =</span>
<a href="#l42.38"></a><span id="l42.38">       mozilla::services::GetStringBundleService();</span>
<a href="#l42.39"></a><span id="l42.39">     NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l42.40"></a><span id="l42.40"> </span>
<a href="#l42.41"></a><span id="l42.41" class="difflineat">@@ -467,17 +467,17 @@ nsresult nsMsgMdnGenerator::CreateFirstP</span>
<a href="#l42.42"></a><span id="l42.42">     // convert fullName to UTF8 before passing it to MakeMimeAddress</span>
<a href="#l42.43"></a><span id="l42.43">     MakeMimeAddress(NS_ConvertUTF16toUTF8(fullName), m_email, fullAddress);</span>
<a href="#l42.44"></a><span id="l42.44"> </span>
<a href="#l42.45"></a><span id="l42.45">     convbuf = nsMsgI18NEncodeMimePartIIStr(fullAddress.get(),</span>
<a href="#l42.46"></a><span id="l42.46">         true, m_charset.get(), 0, conformToStandard);</span>
<a href="#l42.47"></a><span id="l42.47"> </span>
<a href="#l42.48"></a><span id="l42.48">     parm = PR_smprintf(&quot;From: %s&quot; CRLF, convbuf ? convbuf : m_email.get());</span>
<a href="#l42.49"></a><span id="l42.49"> </span>
<a href="#l42.50"></a><span id="l42.50" class="difflineminus">-    rv = FormatStringFromName(u&quot;MsgMdnMsgSentTo&quot;, NS_ConvertASCIItoUTF16(m_email).get(),</span>
<a href="#l42.51"></a><span id="l42.51" class="difflineplus">+    rv = FormatStringFromName(&quot;MsgMdnMsgSentTo&quot;, NS_ConvertASCIItoUTF16(m_email).get(),</span>
<a href="#l42.52"></a><span id="l42.52">                             getter_Copies(firstPart1));</span>
<a href="#l42.53"></a><span id="l42.53">     if (NS_FAILED(rv))</span>
<a href="#l42.54"></a><span id="l42.54">         return rv;</span>
<a href="#l42.55"></a><span id="l42.55"> </span>
<a href="#l42.56"></a><span id="l42.56">     PUSH_N_FREE_STRING (parm);</span>
<a href="#l42.57"></a><span id="l42.57"> </span>
<a href="#l42.58"></a><span id="l42.58">     PR_Free(convbuf);</span>
<a href="#l42.59"></a><span id="l42.59"> </span>
<a href="#l42.60"></a><span id="l42.60" class="difflineat">@@ -489,42 +489,42 @@ nsresult nsMsgMdnGenerator::CreateFirstP</span>
<a href="#l42.61"></a><span id="l42.61">       PUSH_N_FREE_STRING(tmpBuffer);</span>
<a href="#l42.62"></a><span id="l42.62">     }</span>
<a href="#l42.63"></a><span id="l42.63"> </span>
<a href="#l42.64"></a><span id="l42.64">     nsString receipt_string;</span>
<a href="#l42.65"></a><span id="l42.65">     switch (m_disposeType)</span>
<a href="#l42.66"></a><span id="l42.66">     {</span>
<a href="#l42.67"></a><span id="l42.67">     case nsIMsgMdnGenerator::eDisplayed:</span>
<a href="#l42.68"></a><span id="l42.68">         rv = GetStringFromName(</span>
<a href="#l42.69"></a><span id="l42.69" class="difflineminus">-            u&quot;MdnDisplayedReceipt&quot;,</span>
<a href="#l42.70"></a><span id="l42.70" class="difflineplus">+            &quot;MdnDisplayedReceipt&quot;,</span>
<a href="#l42.71"></a><span id="l42.71">             getter_Copies(receipt_string));</span>
<a href="#l42.72"></a><span id="l42.72">         break;</span>
<a href="#l42.73"></a><span id="l42.73">     case nsIMsgMdnGenerator::eDispatched:</span>
<a href="#l42.74"></a><span id="l42.74">         rv = GetStringFromName(</span>
<a href="#l42.75"></a><span id="l42.75" class="difflineminus">-            u&quot;MdnDispatchedReceipt&quot;,</span>
<a href="#l42.76"></a><span id="l42.76" class="difflineplus">+            &quot;MdnDispatchedReceipt&quot;,</span>
<a href="#l42.77"></a><span id="l42.77">             getter_Copies(receipt_string));</span>
<a href="#l42.78"></a><span id="l42.78">         break;</span>
<a href="#l42.79"></a><span id="l42.79">     case nsIMsgMdnGenerator::eProcessed:</span>
<a href="#l42.80"></a><span id="l42.80">         rv = GetStringFromName(</span>
<a href="#l42.81"></a><span id="l42.81" class="difflineminus">-            u&quot;MdnProcessedReceipt&quot;,</span>
<a href="#l42.82"></a><span id="l42.82" class="difflineplus">+            &quot;MdnProcessedReceipt&quot;,</span>
<a href="#l42.83"></a><span id="l42.83">             getter_Copies(receipt_string));</span>
<a href="#l42.84"></a><span id="l42.84">         break;</span>
<a href="#l42.85"></a><span id="l42.85">     case nsIMsgMdnGenerator::eDeleted:</span>
<a href="#l42.86"></a><span id="l42.86">         rv = GetStringFromName(</span>
<a href="#l42.87"></a><span id="l42.87" class="difflineminus">-            u&quot;MdnDeletedReceipt&quot;,</span>
<a href="#l42.88"></a><span id="l42.88" class="difflineplus">+            &quot;MdnDeletedReceipt&quot;,</span>
<a href="#l42.89"></a><span id="l42.89">             getter_Copies(receipt_string));</span>
<a href="#l42.90"></a><span id="l42.90">         break;</span>
<a href="#l42.91"></a><span id="l42.91">     case nsIMsgMdnGenerator::eDenied:</span>
<a href="#l42.92"></a><span id="l42.92">         rv = GetStringFromName(</span>
<a href="#l42.93"></a><span id="l42.93" class="difflineminus">-            u&quot;MdnDeniedReceipt&quot;,</span>
<a href="#l42.94"></a><span id="l42.94" class="difflineplus">+            &quot;MdnDeniedReceipt&quot;,</span>
<a href="#l42.95"></a><span id="l42.95">             getter_Copies(receipt_string));</span>
<a href="#l42.96"></a><span id="l42.96">         break;</span>
<a href="#l42.97"></a><span id="l42.97">     case nsIMsgMdnGenerator::eFailed:</span>
<a href="#l42.98"></a><span id="l42.98">         rv = GetStringFromName(</span>
<a href="#l42.99"></a><span id="l42.99" class="difflineminus">-            u&quot;MdnFailedReceipt&quot;,</span>
<a href="#l42.100"></a><span id="l42.100" class="difflineplus">+            &quot;MdnFailedReceipt&quot;,</span>
<a href="#l42.101"></a><span id="l42.101">             getter_Copies(receipt_string));</span>
<a href="#l42.102"></a><span id="l42.102">         break;</span>
<a href="#l42.103"></a><span id="l42.103">     default:</span>
<a href="#l42.104"></a><span id="l42.104">         rv = NS_ERROR_INVALID_ARG;</span>
<a href="#l42.105"></a><span id="l42.105">         break;</span>
<a href="#l42.106"></a><span id="l42.106">     }</span>
<a href="#l42.107"></a><span id="l42.107"> </span>
<a href="#l42.108"></a><span id="l42.108">     if (NS_FAILED(rv))</span>
<a href="#l42.109"></a><span id="l42.109" class="difflineat">@@ -590,42 +590,42 @@ report-type=disposition-notification;\r\</span>
<a href="#l42.110"></a><span id="l42.110">         tmpBuffer = PR_smprintf(&quot;%s&quot; CRLF CRLF, NS_ConvertUTF16toUTF8(firstPart1).get());</span>
<a href="#l42.111"></a><span id="l42.111">         PUSH_N_FREE_STRING(tmpBuffer);</span>
<a href="#l42.112"></a><span id="l42.112">     }</span>
<a href="#l42.113"></a><span id="l42.113"> </span>
<a href="#l42.114"></a><span id="l42.114">     switch (m_disposeType)</span>
<a href="#l42.115"></a><span id="l42.115">     {</span>
<a href="#l42.116"></a><span id="l42.116">     case nsIMsgMdnGenerator::eDisplayed:</span>
<a href="#l42.117"></a><span id="l42.117">         rv = GetStringFromName(</span>
<a href="#l42.118"></a><span id="l42.118" class="difflineminus">-            u&quot;MsgMdnDisplayed&quot;,</span>
<a href="#l42.119"></a><span id="l42.119" class="difflineplus">+            &quot;MsgMdnDisplayed&quot;,</span>
<a href="#l42.120"></a><span id="l42.120">             getter_Copies(firstPart2));</span>
<a href="#l42.121"></a><span id="l42.121">         break;</span>
<a href="#l42.122"></a><span id="l42.122">     case nsIMsgMdnGenerator::eDispatched:</span>
<a href="#l42.123"></a><span id="l42.123">         rv = GetStringFromName(</span>
<a href="#l42.124"></a><span id="l42.124" class="difflineminus">-            u&quot;MsgMdnDispatched&quot;,</span>
<a href="#l42.125"></a><span id="l42.125" class="difflineplus">+            &quot;MsgMdnDispatched&quot;,</span>
<a href="#l42.126"></a><span id="l42.126">             getter_Copies(firstPart2));</span>
<a href="#l42.127"></a><span id="l42.127">         break;</span>
<a href="#l42.128"></a><span id="l42.128">     case nsIMsgMdnGenerator::eProcessed:</span>
<a href="#l42.129"></a><span id="l42.129">         rv = GetStringFromName(</span>
<a href="#l42.130"></a><span id="l42.130" class="difflineminus">-            u&quot;MsgMdnProcessed&quot;,</span>
<a href="#l42.131"></a><span id="l42.131" class="difflineplus">+            &quot;MsgMdnProcessed&quot;,</span>
<a href="#l42.132"></a><span id="l42.132">             getter_Copies(firstPart2));</span>
<a href="#l42.133"></a><span id="l42.133">         break;</span>
<a href="#l42.134"></a><span id="l42.134">     case nsIMsgMdnGenerator::eDeleted:</span>
<a href="#l42.135"></a><span id="l42.135">         rv = GetStringFromName(</span>
<a href="#l42.136"></a><span id="l42.136" class="difflineminus">-            u&quot;MsgMdnDeleted&quot;,</span>
<a href="#l42.137"></a><span id="l42.137" class="difflineplus">+            &quot;MsgMdnDeleted&quot;,</span>
<a href="#l42.138"></a><span id="l42.138">             getter_Copies(firstPart2));</span>
<a href="#l42.139"></a><span id="l42.139">         break;</span>
<a href="#l42.140"></a><span id="l42.140">     case nsIMsgMdnGenerator::eDenied:</span>
<a href="#l42.141"></a><span id="l42.141">         rv = GetStringFromName(</span>
<a href="#l42.142"></a><span id="l42.142" class="difflineminus">-            u&quot;MsgMdnDenied&quot;,</span>
<a href="#l42.143"></a><span id="l42.143" class="difflineplus">+            &quot;MsgMdnDenied&quot;,</span>
<a href="#l42.144"></a><span id="l42.144">             getter_Copies(firstPart2));</span>
<a href="#l42.145"></a><span id="l42.145">         break;</span>
<a href="#l42.146"></a><span id="l42.146">     case nsIMsgMdnGenerator::eFailed:</span>
<a href="#l42.147"></a><span id="l42.147">         rv = GetStringFromName(</span>
<a href="#l42.148"></a><span id="l42.148" class="difflineminus">-            u&quot;MsgMdnFailed&quot;,</span>
<a href="#l42.149"></a><span id="l42.149" class="difflineplus">+            &quot;MsgMdnFailed&quot;,</span>
<a href="#l42.150"></a><span id="l42.150">             getter_Copies(firstPart2));</span>
<a href="#l42.151"></a><span id="l42.151">         break;</span>
<a href="#l42.152"></a><span id="l42.152">     default:</span>
<a href="#l42.153"></a><span id="l42.153">         rv = NS_ERROR_INVALID_ARG;</span>
<a href="#l42.154"></a><span id="l42.154">         break;</span>
<a href="#l42.155"></a><span id="l42.155">     }</span>
<a href="#l42.156"></a><span id="l42.156"> </span>
<a href="#l42.157"></a><span id="l42.157">     if (NS_FAILED(rv))</span>
<a href="#l42.158"></a><span id="l42.158" class="difflineat">@@ -1073,35 +1073,35 @@ NS_IMETHODIMP nsMsgMdnGenerator::OnStopR</span>
<a href="#l42.159"></a><span id="l42.159"> </span>
<a href="#l42.160"></a><span id="l42.160">     DEBUG_MDN(&quot;nsMsgMdnGenerator::OnStopRunningUrl&quot;);</span>
<a href="#l42.161"></a><span id="l42.161">     if (m_file)</span>
<a href="#l42.162"></a><span id="l42.162">       m_file-&gt;Remove(false);</span>
<a href="#l42.163"></a><span id="l42.163"> </span>
<a href="#l42.164"></a><span id="l42.164">     if (NS_SUCCEEDED(aExitCode))</span>
<a href="#l42.165"></a><span id="l42.165">       return NS_OK;</span>
<a href="#l42.166"></a><span id="l42.166"> </span>
<a href="#l42.167"></a><span id="l42.167" class="difflineminus">-    const char16_t* exitString;</span>
<a href="#l42.168"></a><span id="l42.168" class="difflineplus">+    const char* exitString;</span>
<a href="#l42.169"></a><span id="l42.169"> </span>
<a href="#l42.170"></a><span id="l42.170">     switch (aExitCode)</span>
<a href="#l42.171"></a><span id="l42.171">     {</span>
<a href="#l42.172"></a><span id="l42.172">       case NS_ERROR_UNKNOWN_HOST:</span>
<a href="#l42.173"></a><span id="l42.173">       case NS_ERROR_UNKNOWN_PROXY_HOST:</span>
<a href="#l42.174"></a><span id="l42.174" class="difflineminus">-        exitString = u&quot;smtpSendFailedUnknownServer&quot;;</span>
<a href="#l42.175"></a><span id="l42.175" class="difflineplus">+        exitString = &quot;smtpSendFailedUnknownServer&quot;;</span>
<a href="#l42.176"></a><span id="l42.176">         break;</span>
<a href="#l42.177"></a><span id="l42.177">       case NS_ERROR_CONNECTION_REFUSED:</span>
<a href="#l42.178"></a><span id="l42.178">       case NS_ERROR_PROXY_CONNECTION_REFUSED:</span>
<a href="#l42.179"></a><span id="l42.179" class="difflineminus">-        exitString = u&quot;smtpSendRequestRefused&quot;;</span>
<a href="#l42.180"></a><span id="l42.180" class="difflineplus">+        exitString = &quot;smtpSendRequestRefused&quot;;</span>
<a href="#l42.181"></a><span id="l42.181">         break;</span>
<a href="#l42.182"></a><span id="l42.182">       case NS_ERROR_NET_INTERRUPT:</span>
<a href="#l42.183"></a><span id="l42.183">       case NS_ERROR_ABORT: // we have no proper string for error code NS_ERROR_ABORT in compose bundle</span>
<a href="#l42.184"></a><span id="l42.184" class="difflineminus">-        exitString = u&quot;smtpSendInterrupted&quot;;</span>
<a href="#l42.185"></a><span id="l42.185" class="difflineplus">+        exitString = &quot;smtpSendInterrupted&quot;;</span>
<a href="#l42.186"></a><span id="l42.186">         break;</span>
<a href="#l42.187"></a><span id="l42.187">       case NS_ERROR_NET_TIMEOUT:</span>
<a href="#l42.188"></a><span id="l42.188">       case NS_ERROR_NET_RESET:</span>
<a href="#l42.189"></a><span id="l42.189" class="difflineminus">-        exitString = u&quot;smtpSendTimeout&quot;;</span>
<a href="#l42.190"></a><span id="l42.190" class="difflineplus">+        exitString = &quot;smtpSendTimeout&quot;;</span>
<a href="#l42.191"></a><span id="l42.191">         break;</span>
<a href="#l42.192"></a><span id="l42.192">       default:</span>
<a href="#l42.193"></a><span id="l42.193">         exitString = errorStringNameForErrorCode(aExitCode);</span>
<a href="#l42.194"></a><span id="l42.194">         break;</span>
<a href="#l42.195"></a><span id="l42.195">     }</span>
<a href="#l42.196"></a><span id="l42.196"> </span>
<a href="#l42.197"></a><span id="l42.197">     nsCOMPtr&lt;nsISmtpService&gt; smtpService(do_GetService(NS_SMTPSERVICE_CONTRACTID, &amp;rv));</span>
<a href="#l42.198"></a><span id="l42.198">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l42.199"></a><span id="l42.199" class="difflineat">@@ -1125,17 +1125,17 @@ NS_IMETHODIMP nsMsgMdnGenerator::OnStopR</span>
<a href="#l42.200"></a><span id="l42.200">     rv = bundleService-&gt;CreateBundle(</span>
<a href="#l42.201"></a><span id="l42.201">       &quot;chrome://messenger/locale/messengercompose/composeMsgs.properties&quot;,</span>
<a href="#l42.202"></a><span id="l42.202">       getter_AddRefs(bundle));</span>
<a href="#l42.203"></a><span id="l42.203">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l42.204"></a><span id="l42.204"> </span>
<a href="#l42.205"></a><span id="l42.205">     nsString failed_msg, dialogTitle;</span>
<a href="#l42.206"></a><span id="l42.206"> </span>
<a href="#l42.207"></a><span id="l42.207">     bundle-&gt;FormatStringFromName(exitString, params, 1, getter_Copies(failed_msg));</span>
<a href="#l42.208"></a><span id="l42.208" class="difflineminus">-    bundle-&gt;GetStringFromName(u&quot;sendMessageErrorTitle&quot;, getter_Copies(dialogTitle));</span>
<a href="#l42.209"></a><span id="l42.209" class="difflineplus">+    bundle-&gt;GetStringFromName(&quot;sendMessageErrorTitle&quot;, getter_Copies(dialogTitle));</span>
<a href="#l42.210"></a><span id="l42.210"> </span>
<a href="#l42.211"></a><span id="l42.211">     nsCOMPtr&lt;nsIPrompt&gt; dialog;</span>
<a href="#l42.212"></a><span id="l42.212">     rv = m_window-&gt;GetPromptDialog(getter_AddRefs(dialog));</span>
<a href="#l42.213"></a><span id="l42.213">     if (NS_SUCCEEDED(rv))</span>
<a href="#l42.214"></a><span id="l42.214">       dialog-&gt;Alert(dialogTitle.get(),failed_msg.get());</span>
<a href="#l42.215"></a><span id="l42.215"> </span>
<a href="#l42.216"></a><span id="l42.216">     return NS_OK;</span>
<a href="#l42.217"></a><span id="l42.217"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/mailnews/extensions/mdn/src/nsMsgMdnGenerator.h</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/mailnews/extensions/mdn/src/nsMsgMdnGenerator.h</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -47,18 +47,18 @@ private:</span>
<a href="#l43.4"></a><span id="l43.4"> </span>
<a href="#l43.5"></a><span id="l43.5">   nsresult CreateMdnMsg();</span>
<a href="#l43.6"></a><span id="l43.6">   nsresult CreateFirstPart();</span>
<a href="#l43.7"></a><span id="l43.7">   nsresult CreateSecondPart();</span>
<a href="#l43.8"></a><span id="l43.8">   nsresult CreateThirdPart();</span>
<a href="#l43.9"></a><span id="l43.9">   nsresult SendMdnMsg();</span>
<a href="#l43.10"></a><span id="l43.10"> </span>
<a href="#l43.11"></a><span id="l43.11">   // string bundle helper methods</span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-  nsresult GetStringFromName(const char16_t *aName, char16_t **aResultString);</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineminus">-  nsresult FormatStringFromName(const char16_t *aName,</span>
<a href="#l43.14"></a><span id="l43.14" class="difflineplus">+  nsresult GetStringFromName(const char *aName, char16_t **aResultString);</span>
<a href="#l43.15"></a><span id="l43.15" class="difflineplus">+  nsresult FormatStringFromName(const char *aName,</span>
<a href="#l43.16"></a><span id="l43.16">                                 const char16_t *aString,</span>
<a href="#l43.17"></a><span id="l43.17">                                 char16_t **aResultString);</span>
<a href="#l43.18"></a><span id="l43.18"> </span>
<a href="#l43.19"></a><span id="l43.19">   // other helper methods</span>
<a href="#l43.20"></a><span id="l43.20">   nsresult InitAndProcess(bool *needToAskUser);</span>
<a href="#l43.21"></a><span id="l43.21">   nsresult OutputAllHeaders();</span>
<a href="#l43.22"></a><span id="l43.22">   nsresult WriteString(const char *str);</span>
<a href="#l43.23"></a><span id="l43.23"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -185,22 +185,22 @@ nsresult nsMsgComposeSecure::GetSMIMEBun</span>
<a href="#l44.4"></a><span id="l44.4">                                                   nsString &amp;outString)</span>
<a href="#l44.5"></a><span id="l44.5"> {</span>
<a href="#l44.6"></a><span id="l44.6">   outString.Truncate();</span>
<a href="#l44.7"></a><span id="l44.7"> </span>
<a href="#l44.8"></a><span id="l44.8">   NS_ENSURE_ARG_POINTER(name);</span>
<a href="#l44.9"></a><span id="l44.9"> </span>
<a href="#l44.10"></a><span id="l44.10">   NS_ENSURE_TRUE(InitializeSMIMEBundle(), NS_ERROR_FAILURE);</span>
<a href="#l44.11"></a><span id="l44.11"> </span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-  return mSMIMEBundle-&gt;GetStringFromName(name, getter_Copies(outString));</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+  return mSMIMEBundle-&gt;GetStringFromName(NS_ConvertUTF16toUTF8(name).get(), getter_Copies(outString));</span>
<a href="#l44.14"></a><span id="l44.14"> }</span>
<a href="#l44.15"></a><span id="l44.15"> </span>
<a href="#l44.16"></a><span id="l44.16"> nsresult</span>
<a href="#l44.17"></a><span id="l44.17"> nsMsgComposeSecure::</span>
<a href="#l44.18"></a><span id="l44.18" class="difflineminus">-SMIMEBundleFormatStringFromName(const char16_t *name,</span>
<a href="#l44.19"></a><span id="l44.19" class="difflineplus">+SMIMEBundleFormatStringFromName(const char *name,</span>
<a href="#l44.20"></a><span id="l44.20">                                 const char16_t **params,</span>
<a href="#l44.21"></a><span id="l44.21">                                 uint32_t numParams,</span>
<a href="#l44.22"></a><span id="l44.22">                                 char16_t **outString)</span>
<a href="#l44.23"></a><span id="l44.23"> {</span>
<a href="#l44.24"></a><span id="l44.24">   NS_ENSURE_ARG_POINTER(name);</span>
<a href="#l44.25"></a><span id="l44.25"> </span>
<a href="#l44.26"></a><span id="l44.26">   if (!InitializeSMIMEBundle())</span>
<a href="#l44.27"></a><span id="l44.27">     return NS_ERROR_FAILURE;</span>
<a href="#l44.28"></a><span id="l44.28" class="difflineat">@@ -238,17 +238,17 @@ void nsMsgComposeSecure::SetError(nsIMsg</span>
<a href="#l44.29"></a><span id="l44.29">   if (NS_SUCCEEDED(res) &amp;&amp; !errorString.IsEmpty())</span>
<a href="#l44.30"></a><span id="l44.30">   {</span>
<a href="#l44.31"></a><span id="l44.31">     sendReport-&gt;SetMessage(nsIMsgSendReport::process_Current,</span>
<a href="#l44.32"></a><span id="l44.32">                            errorString.get(),</span>
<a href="#l44.33"></a><span id="l44.33">                            true);</span>
<a href="#l44.34"></a><span id="l44.34">   }</span>
<a href="#l44.35"></a><span id="l44.35"> }</span>
<a href="#l44.36"></a><span id="l44.36"> </span>
<a href="#l44.37"></a><span id="l44.37" class="difflineminus">-void nsMsgComposeSecure::SetErrorWithParam(nsIMsgSendReport *sendReport, const char16_t *bundle_string, const char *param)</span>
<a href="#l44.38"></a><span id="l44.38" class="difflineplus">+void nsMsgComposeSecure::SetErrorWithParam(nsIMsgSendReport *sendReport, const char *bundle_string, const char *param)</span>
<a href="#l44.39"></a><span id="l44.39"> {</span>
<a href="#l44.40"></a><span id="l44.40">   if (!sendReport || !bundle_string || !param)</span>
<a href="#l44.41"></a><span id="l44.41">     return;</span>
<a href="#l44.42"></a><span id="l44.42"> </span>
<a href="#l44.43"></a><span id="l44.43">   if (mErrorAlreadyReported)</span>
<a href="#l44.44"></a><span id="l44.44">     return;</span>
<a href="#l44.45"></a><span id="l44.45"> </span>
<a href="#l44.46"></a><span id="l44.46">   mErrorAlreadyReported = true;</span>
<a href="#l44.47"></a><span id="l44.47" class="difflineat">@@ -554,17 +554,17 @@ nsresult nsMsgComposeSecure::MimeInitEnc</span>
<a href="#l44.48"></a><span id="l44.48">   nsCOMPtr&lt;nsIStringBundle&gt; sMIMEBundle;</span>
<a href="#l44.49"></a><span id="l44.49">   nsString mime_smime_enc_content_desc;</span>
<a href="#l44.50"></a><span id="l44.50"> </span>
<a href="#l44.51"></a><span id="l44.51">   bundleSvc-&gt;CreateBundle(SMIME_STRBUNDLE_URL, getter_AddRefs(sMIMEBundle));</span>
<a href="#l44.52"></a><span id="l44.52"> </span>
<a href="#l44.53"></a><span id="l44.53">   if (!sMIMEBundle)</span>
<a href="#l44.54"></a><span id="l44.54">     return NS_ERROR_FAILURE;</span>
<a href="#l44.55"></a><span id="l44.55"> </span>
<a href="#l44.56"></a><span id="l44.56" class="difflineminus">-  sMIMEBundle-&gt;GetStringFromName(u&quot;mime_smimeEncryptedContentDesc&quot;,</span>
<a href="#l44.57"></a><span id="l44.57" class="difflineplus">+  sMIMEBundle-&gt;GetStringFromName(&quot;mime_smimeEncryptedContentDesc&quot;,</span>
<a href="#l44.58"></a><span id="l44.58">                                  getter_Copies(mime_smime_enc_content_desc));</span>
<a href="#l44.59"></a><span id="l44.59">   NS_ConvertUTF16toUTF8 enc_content_desc_utf8(mime_smime_enc_content_desc);</span>
<a href="#l44.60"></a><span id="l44.60"> </span>
<a href="#l44.61"></a><span id="l44.61">   nsCOMPtr&lt;nsIMimeConverter&gt; mimeConverter =</span>
<a href="#l44.62"></a><span id="l44.62">      do_GetService(NS_MIME_CONVERTER_CONTRACTID, &amp;rv);</span>
<a href="#l44.63"></a><span id="l44.63">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l44.64"></a><span id="l44.64">   nsCString encodedContentDescription;</span>
<a href="#l44.65"></a><span id="l44.65">   mimeConverter-&gt;EncodeMimePartIIStr_UTF8(enc_content_desc_utf8, false, &quot;UTF-8&quot;,</span>
<a href="#l44.66"></a><span id="l44.66" class="difflineat">@@ -670,17 +670,17 @@ nsresult nsMsgComposeSecure::MimeFinishM</span>
<a href="#l44.67"></a><span id="l44.67">   nsCOMPtr&lt;nsIStringBundle&gt; sMIMEBundle;</span>
<a href="#l44.68"></a><span id="l44.68">   nsString mime_smime_sig_content_desc;</span>
<a href="#l44.69"></a><span id="l44.69"> </span>
<a href="#l44.70"></a><span id="l44.70">   bundleSvc-&gt;CreateBundle(SMIME_STRBUNDLE_URL, getter_AddRefs(sMIMEBundle));</span>
<a href="#l44.71"></a><span id="l44.71"> </span>
<a href="#l44.72"></a><span id="l44.72">   if (!sMIMEBundle)</span>
<a href="#l44.73"></a><span id="l44.73">     return NS_ERROR_FAILURE;</span>
<a href="#l44.74"></a><span id="l44.74"> </span>
<a href="#l44.75"></a><span id="l44.75" class="difflineminus">-  sMIMEBundle-&gt;GetStringFromName(u&quot;mime_smimeSignatureContentDesc&quot;,</span>
<a href="#l44.76"></a><span id="l44.76" class="difflineplus">+  sMIMEBundle-&gt;GetStringFromName(&quot;mime_smimeSignatureContentDesc&quot;,</span>
<a href="#l44.77"></a><span id="l44.77">                                  getter_Copies(mime_smime_sig_content_desc));</span>
<a href="#l44.78"></a><span id="l44.78"> </span>
<a href="#l44.79"></a><span id="l44.79">   NS_ConvertUTF16toUTF8 sig_content_desc_utf8(mime_smime_sig_content_desc);</span>
<a href="#l44.80"></a><span id="l44.80"> </span>
<a href="#l44.81"></a><span id="l44.81">   /* Compute the hash...</span>
<a href="#l44.82"></a><span id="l44.82">    */</span>
<a href="#l44.83"></a><span id="l44.83"> </span>
<a href="#l44.84"></a><span id="l44.84">   nsAutoCString hashString;</span>
<a href="#l44.85"></a><span id="l44.85" class="difflineat">@@ -965,17 +965,17 @@ nsresult nsMsgComposeSecure::MimeCryptoH</span>
<a href="#l44.86"></a><span id="l44.86">       ToLowerCase(mailboxes[i], mailbox_lowercase);</span>
<a href="#l44.87"></a><span id="l44.87">       nsCOMPtr&lt;nsIX509Cert&gt; cert;</span>
<a href="#l44.88"></a><span id="l44.88">       res = certdb-&gt;FindCertByEmailAddress(mailbox_lowercase,</span>
<a href="#l44.89"></a><span id="l44.89">                                            getter_AddRefs(cert));</span>
<a href="#l44.90"></a><span id="l44.90">       if (NS_FAILED(res)) {</span>
<a href="#l44.91"></a><span id="l44.91">         // Failure to find a valid encryption cert is fatal.</span>
<a href="#l44.92"></a><span id="l44.92">         // Here I assume that mailbox is ascii rather than utf8.</span>
<a href="#l44.93"></a><span id="l44.93">         SetErrorWithParam(sendReport,</span>
<a href="#l44.94"></a><span id="l44.94" class="difflineminus">-                          u&quot;MissingRecipientEncryptionCert&quot;,</span>
<a href="#l44.95"></a><span id="l44.95" class="difflineplus">+                          &quot;MissingRecipientEncryptionCert&quot;,</span>
<a href="#l44.96"></a><span id="l44.96">                           mailboxes[i].get());</span>
<a href="#l44.97"></a><span id="l44.97"> </span>
<a href="#l44.98"></a><span id="l44.98">         return res;</span>
<a href="#l44.99"></a><span id="l44.99">       }</span>
<a href="#l44.100"></a><span id="l44.100"> </span>
<a href="#l44.101"></a><span id="l44.101">     /* #### see if recipient requests `signedData'.</span>
<a href="#l44.102"></a><span id="l44.102">      if (...) no_clearsigning_p = true;</span>
<a href="#l44.103"></a><span id="l44.103">      (This is the only reason we even bother looking up the certs</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/mailnews/extensions/smime/src/nsMsgComposeSecure.h</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/mailnews/extensions/smime/src/nsMsgComposeSecure.h</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -63,17 +63,17 @@ private:</span>
<a href="#l45.4"></a><span id="l45.4">   virtual ~nsMsgComposeSecure();</span>
<a href="#l45.5"></a><span id="l45.5">   typedef mozilla::mailnews::MimeEncoder MimeEncoder;</span>
<a href="#l45.6"></a><span id="l45.6">   nsresult MimeInitMultipartSigned(bool aOuter, nsIMsgSendReport *sendReport);</span>
<a href="#l45.7"></a><span id="l45.7">   nsresult MimeInitEncryption(bool aSign, nsIMsgSendReport *sendReport);</span>
<a href="#l45.8"></a><span id="l45.8">   nsresult MimeFinishMultipartSigned (bool aOuter, nsIMsgSendReport *sendReport);</span>
<a href="#l45.9"></a><span id="l45.9">   nsresult MimeFinishEncryption (bool aSign, nsIMsgSendReport *sendReport);</span>
<a href="#l45.10"></a><span id="l45.10">   nsresult MimeCryptoHackCerts(const char *aRecipients, nsIMsgSendReport *sendReport, bool aEncrypt, bool aSign, nsIMsgIdentity *aIdentity);</span>
<a href="#l45.11"></a><span id="l45.11">   bool InitializeSMIMEBundle();</span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-  nsresult SMIMEBundleFormatStringFromName(const char16_t *name,</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+  nsresult SMIMEBundleFormatStringFromName(const char *name,</span>
<a href="#l45.14"></a><span id="l45.14"> 					   const char16_t **params,</span>
<a href="#l45.15"></a><span id="l45.15"> 					   uint32_t numParams,</span>
<a href="#l45.16"></a><span id="l45.16"> 					   char16_t **outString);</span>
<a href="#l45.17"></a><span id="l45.17">   nsresult ExtractEncryptionState(nsIMsgIdentity * aIdentity, nsIMsgCompFields * aComposeFields, bool * aSignMessage, bool * aEncrypt);</span>
<a href="#l45.18"></a><span id="l45.18"> </span>
<a href="#l45.19"></a><span id="l45.19">   mimeDeliveryCryptoState mCryptoState;</span>
<a href="#l45.20"></a><span id="l45.20">   nsCOMPtr&lt;nsIOutputStream&gt; mStream;</span>
<a href="#l45.21"></a><span id="l45.21">   int16_t mHashType;</span>
<a href="#l45.22"></a><span id="l45.22" class="difflineat">@@ -95,12 +95,12 @@ private:</span>
<a href="#l45.23"></a><span id="l45.23">   bool mIsDraft;</span>
<a href="#l45.24"></a><span id="l45.24"> </span>
<a href="#l45.25"></a><span id="l45.25">   enum {eBufferSize = 8192};</span>
<a href="#l45.26"></a><span id="l45.26">   char *mBuffer;</span>
<a href="#l45.27"></a><span id="l45.27">   uint32_t mBufferedBytes;</span>
<a href="#l45.28"></a><span id="l45.28"> </span>
<a href="#l45.29"></a><span id="l45.29">   bool mErrorAlreadyReported;</span>
<a href="#l45.30"></a><span id="l45.30">   void SetError(nsIMsgSendReport *sendReport, const char16_t *bundle_string);</span>
<a href="#l45.31"></a><span id="l45.31" class="difflineminus">-  void SetErrorWithParam(nsIMsgSendReport *sendReport, const char16_t *bundle_string, const char *param);</span>
<a href="#l45.32"></a><span id="l45.32" class="difflineplus">+  void SetErrorWithParam(nsIMsgSendReport *sendReport, const char *bundle_string, const char *param);</span>
<a href="#l45.33"></a><span id="l45.33"> };</span>
<a href="#l45.34"></a><span id="l45.34"> </span>
<a href="#l45.35"></a><span id="l45.35"> #endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/mailnews/imap/src/nsImapIncomingServer.cpp</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapIncomingServer.cpp</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -1861,17 +1861,17 @@ nsImapIncomingServer::FEAlert(const nsAS</span>
<a href="#l46.4"></a><span id="l46.4">     nsresult rv = GetPrettyName(hostName);</span>
<a href="#l46.5"></a><span id="l46.5">     if (NS_SUCCEEDED(rv))</span>
<a href="#l46.6"></a><span id="l46.6">     {</span>
<a href="#l46.7"></a><span id="l46.7">       nsString message;</span>
<a href="#l46.8"></a><span id="l46.8">       nsString tempString(aAlertString);</span>
<a href="#l46.9"></a><span id="l46.9">       const char16_t *params[] = { hostName.get(), tempString.get() };</span>
<a href="#l46.10"></a><span id="l46.10"> </span>
<a href="#l46.11"></a><span id="l46.11">       rv = m_stringBundle-&gt;FormatStringFromName(</span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-        u&quot;imapServerAlert&quot;,</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+        &quot;imapServerAlert&quot;,</span>
<a href="#l46.14"></a><span id="l46.14">         params, 2, getter_Copies(message));</span>
<a href="#l46.15"></a><span id="l46.15">       if (NS_SUCCEEDED(rv))</span>
<a href="#l46.16"></a><span id="l46.16">         return AlertUser(message, aUrl);</span>
<a href="#l46.17"></a><span id="l46.17">     }</span>
<a href="#l46.18"></a><span id="l46.18">   }</span>
<a href="#l46.19"></a><span id="l46.19">   return AlertUser(aAlertString, aUrl);</span>
<a href="#l46.20"></a><span id="l46.20"> }</span>
<a href="#l46.21"></a><span id="l46.21"> </span>
<a href="#l46.22"></a><span id="l46.22" class="difflineat">@@ -1900,17 +1900,17 @@ nsImapIncomingServer::FEAlertWithName(co</span>
<a href="#l46.23"></a><span id="l46.23">   if (m_stringBundle)</span>
<a href="#l46.24"></a><span id="l46.24">   {</span>
<a href="#l46.25"></a><span id="l46.25">     nsAutoString hostName;</span>
<a href="#l46.26"></a><span id="l46.26">     nsresult rv = GetPrettyName(hostName);</span>
<a href="#l46.27"></a><span id="l46.27">     if (NS_SUCCEEDED(rv))</span>
<a href="#l46.28"></a><span id="l46.28">     {</span>
<a href="#l46.29"></a><span id="l46.29">       const char16_t *params[] = { hostName.get() };</span>
<a href="#l46.30"></a><span id="l46.30">       rv = m_stringBundle-&gt;FormatStringFromName(</span>
<a href="#l46.31"></a><span id="l46.31" class="difflineminus">-        NS_ConvertASCIItoUTF16(aMsgName).get(),</span>
<a href="#l46.32"></a><span id="l46.32" class="difflineplus">+        aMsgName,</span>
<a href="#l46.33"></a><span id="l46.33">         params, 1,getter_Copies(message));</span>
<a href="#l46.34"></a><span id="l46.34">       if (NS_SUCCEEDED(rv))</span>
<a href="#l46.35"></a><span id="l46.35">         return AlertUser(message, aUrl);</span>
<a href="#l46.36"></a><span id="l46.36">     }</span>
<a href="#l46.37"></a><span id="l46.37">   }</span>
<a href="#l46.38"></a><span id="l46.38"> </span>
<a href="#l46.39"></a><span id="l46.39">   // Error condition</span>
<a href="#l46.40"></a><span id="l46.40">   message.AssignLiteral(&quot;String Name &quot;);</span>
<a href="#l46.41"></a><span id="l46.41" class="difflineat">@@ -1946,17 +1946,17 @@ NS_IMETHODIMP  nsImapIncomingServer::FEA</span>
<a href="#l46.42"></a><span id="l46.42"> </span>
<a href="#l46.43"></a><span id="l46.43">   const char16_t *formatStrings[] =</span>
<a href="#l46.44"></a><span id="l46.44">   {</span>
<a href="#l46.45"></a><span id="l46.45">     hostName.get(),</span>
<a href="#l46.46"></a><span id="l46.46">     nullptr,</span>
<a href="#l46.47"></a><span id="l46.47">     nullptr</span>
<a href="#l46.48"></a><span id="l46.48">   };</span>
<a href="#l46.49"></a><span id="l46.49"> </span>
<a href="#l46.50"></a><span id="l46.50" class="difflineminus">-  nsString msgName;</span>
<a href="#l46.51"></a><span id="l46.51" class="difflineplus">+  const char* msgName;</span>
<a href="#l46.52"></a><span id="l46.52">   int32_t numStrings;</span>
<a href="#l46.53"></a><span id="l46.53">   nsString fullMessage;</span>
<a href="#l46.54"></a><span id="l46.54">   nsCOMPtr&lt;nsIImapUrl&gt; imapUrl = do_QueryInterface(aUrl);</span>
<a href="#l46.55"></a><span id="l46.55">   NS_ENSURE_TRUE(imapUrl, NS_ERROR_INVALID_ARG);</span>
<a href="#l46.56"></a><span id="l46.56"> </span>
<a href="#l46.57"></a><span id="l46.57">   nsImapState imapState;</span>
<a href="#l46.58"></a><span id="l46.58">   nsImapAction imapAction;</span>
<a href="#l46.59"></a><span id="l46.59"> </span>
<a href="#l46.60"></a><span id="l46.60" class="difflineat">@@ -1969,32 +1969,32 @@ NS_IMETHODIMP  nsImapIncomingServer::FEA</span>
<a href="#l46.61"></a><span id="l46.61">   nsCOMPtr&lt;nsIMsgFolder&gt; folder;</span>
<a href="#l46.62"></a><span id="l46.62">   if (imapState == nsIImapUrl::nsImapSelectedState ||</span>
<a href="#l46.63"></a><span id="l46.63">       imapAction == nsIImapUrl::nsImapFolderStatus)</span>
<a href="#l46.64"></a><span id="l46.64">   {</span>
<a href="#l46.65"></a><span id="l46.65">     aUrl-&gt;GetFolder(getter_AddRefs(folder));</span>
<a href="#l46.66"></a><span id="l46.66">     if (folder)</span>
<a href="#l46.67"></a><span id="l46.67">       folder-&gt;GetPrettyName(folderName);</span>
<a href="#l46.68"></a><span id="l46.68">     numStrings = 3;</span>
<a href="#l46.69"></a><span id="l46.69" class="difflineminus">-    msgName.AssignLiteral(&quot;imapFolderCommandFailed&quot;);</span>
<a href="#l46.70"></a><span id="l46.70" class="difflineplus">+    msgName = &quot;imapFolderCommandFailed&quot;;</span>
<a href="#l46.71"></a><span id="l46.71">     formatStrings[1] = folderName.get();</span>
<a href="#l46.72"></a><span id="l46.72">   }</span>
<a href="#l46.73"></a><span id="l46.73">   else</span>
<a href="#l46.74"></a><span id="l46.74">   {</span>
<a href="#l46.75"></a><span id="l46.75" class="difflineminus">-    msgName.AssignLiteral(&quot;imapServerCommandFailed&quot;);</span>
<a href="#l46.76"></a><span id="l46.76" class="difflineplus">+    msgName = &quot;imapServerCommandFailed&quot;;</span>
<a href="#l46.77"></a><span id="l46.77">     numStrings = 2;</span>
<a href="#l46.78"></a><span id="l46.78">   }</span>
<a href="#l46.79"></a><span id="l46.79"> </span>
<a href="#l46.80"></a><span id="l46.80">   formatStrings[numStrings -1] = unicodeMsg.get();</span>
<a href="#l46.81"></a><span id="l46.81"> </span>
<a href="#l46.82"></a><span id="l46.82">   nsresult rv = GetStringBundle();</span>
<a href="#l46.83"></a><span id="l46.83">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l46.84"></a><span id="l46.84">   if (m_stringBundle)</span>
<a href="#l46.85"></a><span id="l46.85">   {</span>
<a href="#l46.86"></a><span id="l46.86" class="difflineminus">-    rv = m_stringBundle-&gt;FormatStringFromName(msgName.get(),</span>
<a href="#l46.87"></a><span id="l46.87" class="difflineplus">+    rv = m_stringBundle-&gt;FormatStringFromName(msgName,</span>
<a href="#l46.88"></a><span id="l46.88">       formatStrings, numStrings, getter_Copies(fullMessage));</span>
<a href="#l46.89"></a><span id="l46.89">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l46.90"></a><span id="l46.90">   }</span>
<a href="#l46.91"></a><span id="l46.91"> </span>
<a href="#l46.92"></a><span id="l46.92">   return AlertUser(fullMessage, aUrl);</span>
<a href="#l46.93"></a><span id="l46.93"> }</span>
<a href="#l46.94"></a><span id="l46.94"> </span>
<a href="#l46.95"></a><span id="l46.95"> #define IMAP_MSGS_URL       &quot;chrome://messenger/locale/imapMsgs.properties&quot;</span>
<a href="#l46.96"></a><span id="l46.96" class="difflineat">@@ -2013,19 +2013,17 @@ nsresult nsImapIncomingServer::GetString</span>
<a href="#l46.97"></a><span id="l46.97"> NS_IMETHODIMP</span>
<a href="#l46.98"></a><span id="l46.98"> nsImapIncomingServer::GetImapStringByName(const char* msgName, nsAString&amp; aString)</span>
<a href="#l46.99"></a><span id="l46.99"> {</span>
<a href="#l46.100"></a><span id="l46.100">   nsresult rv = NS_OK;</span>
<a href="#l46.101"></a><span id="l46.101">   GetStringBundle();</span>
<a href="#l46.102"></a><span id="l46.102">   if (m_stringBundle)</span>
<a href="#l46.103"></a><span id="l46.103">   {</span>
<a href="#l46.104"></a><span id="l46.104">     nsString res_str;</span>
<a href="#l46.105"></a><span id="l46.105" class="difflineminus">-    rv = m_stringBundle-&gt;GetStringFromName(</span>
<a href="#l46.106"></a><span id="l46.106" class="difflineminus">-       NS_ConvertASCIItoUTF16(msgName).get(),</span>
<a href="#l46.107"></a><span id="l46.107" class="difflineminus">-       getter_Copies(res_str));</span>
<a href="#l46.108"></a><span id="l46.108" class="difflineplus">+    rv = m_stringBundle-&gt;GetStringFromName(msgName, getter_Copies(res_str));</span>
<a href="#l46.109"></a><span id="l46.109">     aString.Assign(res_str);</span>
<a href="#l46.110"></a><span id="l46.110">     if (NS_SUCCEEDED(rv))</span>
<a href="#l46.111"></a><span id="l46.111">       return rv;</span>
<a href="#l46.112"></a><span id="l46.112">   }</span>
<a href="#l46.113"></a><span id="l46.113">   aString.AssignLiteral(&quot;String Name &quot;);</span>
<a href="#l46.114"></a><span id="l46.114">   // mscott: FIX ME</span>
<a href="#l46.115"></a><span id="l46.115">   aString.AppendASCII(msgName);</span>
<a href="#l46.116"></a><span id="l46.116">   return NS_OK;</span>
<a href="#l46.117"></a><span id="l46.117" class="difflineat">@@ -2202,17 +2200,17 @@ nsImapIncomingServer::PromptPassword(nsI</span>
<a href="#l46.118"></a><span id="l46.118"> </span>
<a href="#l46.119"></a><span id="l46.119">   NS_ConvertASCIItoUTF16 finalUserName(userName);</span>
<a href="#l46.120"></a><span id="l46.120">   NS_ConvertASCIItoUTF16 finalHostName(hostName);</span>
<a href="#l46.121"></a><span id="l46.121"> </span>
<a href="#l46.122"></a><span id="l46.122">   const char16_t *formatStrings[] = { finalUserName.get(), finalHostName.get() };</span>
<a href="#l46.123"></a><span id="l46.123"> </span>
<a href="#l46.124"></a><span id="l46.124">   nsString passwordText;</span>
<a href="#l46.125"></a><span id="l46.125">   rv = m_stringBundle-&gt;FormatStringFromName(</span>
<a href="#l46.126"></a><span id="l46.126" class="difflineminus">-    u&quot;imapEnterServerPasswordPrompt&quot;,</span>
<a href="#l46.127"></a><span id="l46.127" class="difflineplus">+    &quot;imapEnterServerPasswordPrompt&quot;,</span>
<a href="#l46.128"></a><span id="l46.128">     formatStrings, 2, getter_Copies(passwordText));</span>
<a href="#l46.129"></a><span id="l46.129">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l46.130"></a><span id="l46.130"> </span>
<a href="#l46.131"></a><span id="l46.131">   rv = GetPasswordWithUI(passwordText, passwordTitle, aMsgWindow, aPassword);</span>
<a href="#l46.132"></a><span id="l46.132">   if (NS_SUCCEEDED(rv))</span>
<a href="#l46.133"></a><span id="l46.133">     m_password = aPassword;</span>
<a href="#l46.134"></a><span id="l46.134">   return rv;</span>
<a href="#l46.135"></a><span id="l46.135"> }</span>
<a href="#l46.136"></a><span id="l46.136" class="difflineat">@@ -2941,17 +2939,17 @@ nsImapIncomingServer::GetFormattedString</span>
<a href="#l46.137"></a><span id="l46.137">   nsresult rv = GetStringBundle();</span>
<a href="#l46.138"></a><span id="l46.138">   if (m_stringBundle)</span>
<a href="#l46.139"></a><span id="l46.139">   {</span>
<a href="#l46.140"></a><span id="l46.140">     nsString tmpVal (aValue);</span>
<a href="#l46.141"></a><span id="l46.141">     const char16_t *formatStrings[] = { tmpVal.get() };</span>
<a href="#l46.142"></a><span id="l46.142"> </span>
<a href="#l46.143"></a><span id="l46.143">     nsString result;</span>
<a href="#l46.144"></a><span id="l46.144">     rv = m_stringBundle-&gt;FormatStringFromName(</span>
<a href="#l46.145"></a><span id="l46.145" class="difflineminus">-      NS_ConvertASCIItoUTF16(aName).get(),</span>
<a href="#l46.146"></a><span id="l46.146" class="difflineplus">+      aName,</span>
<a href="#l46.147"></a><span id="l46.147">       formatStrings, 1, getter_Copies(result));</span>
<a href="#l46.148"></a><span id="l46.148">     aResult.Assign(result);</span>
<a href="#l46.149"></a><span id="l46.149">   }</span>
<a href="#l46.150"></a><span id="l46.150">   return rv;</span>
<a href="#l46.151"></a><span id="l46.151"> }</span>
<a href="#l46.152"></a><span id="l46.152"> </span>
<a href="#l46.153"></a><span id="l46.153"> nsresult</span>
<a href="#l46.154"></a><span id="l46.154"> nsImapIncomingServer::GetPrefForServerAttribute(const char *prefSuffix, bool *prefValue)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/mailnews/imap/src/nsImapMailFolder.cpp</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapMailFolder.cpp</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -1602,30 +1602,30 @@ NS_IMETHODIMP nsImapMailFolder::Rename (</span>
<a href="#l47.4"></a><span id="l47.4">       if (NS_SUCCEEDED(rv) &amp;&amp; bundle)</span>
<a href="#l47.5"></a><span id="l47.5">       {</span>
<a href="#l47.6"></a><span id="l47.6">         const char16_t *formatStrings[] =</span>
<a href="#l47.7"></a><span id="l47.7">         {</span>
<a href="#l47.8"></a><span id="l47.8">           (const char16_t*)(intptr_t)m_hierarchyDelimiter</span>
<a href="#l47.9"></a><span id="l47.9">         };</span>
<a href="#l47.10"></a><span id="l47.10">         nsString alertString;</span>
<a href="#l47.11"></a><span id="l47.11">         rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-          u&quot;imapSpecialChar&quot;,</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineplus">+          &quot;imapSpecialChar&quot;,</span>
<a href="#l47.14"></a><span id="l47.14">           formatStrings, 1, getter_Copies(alertString));</span>
<a href="#l47.15"></a><span id="l47.15">         nsCOMPtr&lt;nsIPrompt&gt; dialog(do_GetInterface(docShell));</span>
<a href="#l47.16"></a><span id="l47.16">         // setting up the dialog title</span>
<a href="#l47.17"></a><span id="l47.17">         nsCOMPtr&lt;nsIMsgIncomingServer&gt; server;</span>
<a href="#l47.18"></a><span id="l47.18">         rv = GetServer(getter_AddRefs(server));</span>
<a href="#l47.19"></a><span id="l47.19">         NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l47.20"></a><span id="l47.20">         nsString dialogTitle;</span>
<a href="#l47.21"></a><span id="l47.21">         nsString accountName;</span>
<a href="#l47.22"></a><span id="l47.22">         rv = server-&gt;GetPrettyName(accountName);</span>
<a href="#l47.23"></a><span id="l47.23">         NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l47.24"></a><span id="l47.24">         const char16_t *titleParams[] = { accountName.get() };</span>
<a href="#l47.25"></a><span id="l47.25">         rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l47.26"></a><span id="l47.26" class="difflineminus">-          u&quot;imapAlertDialogTitle&quot;,</span>
<a href="#l47.27"></a><span id="l47.27" class="difflineplus">+          &quot;imapAlertDialogTitle&quot;,</span>
<a href="#l47.28"></a><span id="l47.28">           titleParams, 1, getter_Copies(dialogTitle));</span>
<a href="#l47.29"></a><span id="l47.29"> </span>
<a href="#l47.30"></a><span id="l47.30">         if (dialog &amp;&amp; !alertString.IsEmpty())</span>
<a href="#l47.31"></a><span id="l47.31">           dialog-&gt;Alert(dialogTitle.get(), alertString.get());</span>
<a href="#l47.32"></a><span id="l47.32">       }</span>
<a href="#l47.33"></a><span id="l47.33">     }</span>
<a href="#l47.34"></a><span id="l47.34">     return NS_ERROR_FAILURE;</span>
<a href="#l47.35"></a><span id="l47.35">   }</span>
<a href="#l47.36"></a><span id="l47.36" class="difflineat">@@ -2424,30 +2424,30 @@ nsImapMailFolder::DeleteSubFolders(nsIAr</span>
<a href="#l47.37"></a><span id="l47.37"> </span>
<a href="#l47.38"></a><span id="l47.38">     nsAutoString folderName;</span>
<a href="#l47.39"></a><span id="l47.39">     rv = curFolder-&gt;GetName(folderName);</span>
<a href="#l47.40"></a><span id="l47.40">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l47.41"></a><span id="l47.41">     const char16_t *formatStrings[1] = { folderName.get() };</span>
<a href="#l47.42"></a><span id="l47.42"> </span>
<a href="#l47.43"></a><span id="l47.43">     nsAutoString deleteFolderDialogTitle;</span>
<a href="#l47.44"></a><span id="l47.44">     rv = bundle-&gt;GetStringFromName(</span>
<a href="#l47.45"></a><span id="l47.45" class="difflineminus">-      u&quot;imapDeleteFolderDialogTitle&quot;,</span>
<a href="#l47.46"></a><span id="l47.46" class="difflineplus">+      &quot;imapDeleteFolderDialogTitle&quot;,</span>
<a href="#l47.47"></a><span id="l47.47">       getter_Copies(deleteFolderDialogTitle));</span>
<a href="#l47.48"></a><span id="l47.48">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l47.49"></a><span id="l47.49"> </span>
<a href="#l47.50"></a><span id="l47.50">     nsAutoString deleteFolderButtonLabel;</span>
<a href="#l47.51"></a><span id="l47.51">     rv = bundle-&gt;GetStringFromName(</span>
<a href="#l47.52"></a><span id="l47.52" class="difflineminus">-      u&quot;imapDeleteFolderButtonLabel&quot;,</span>
<a href="#l47.53"></a><span id="l47.53" class="difflineplus">+      &quot;imapDeleteFolderButtonLabel&quot;,</span>
<a href="#l47.54"></a><span id="l47.54">       getter_Copies(deleteFolderButtonLabel));</span>
<a href="#l47.55"></a><span id="l47.55">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l47.56"></a><span id="l47.56"> </span>
<a href="#l47.57"></a><span id="l47.57">     nsAutoString confirmationStr;</span>
<a href="#l47.58"></a><span id="l47.58">     rv = bundle-&gt;FormatStringFromName((deleteNoTrash) ?</span>
<a href="#l47.59"></a><span id="l47.59" class="difflineminus">-        u&quot;imapDeleteNoTrash&quot; :</span>
<a href="#l47.60"></a><span id="l47.60" class="difflineminus">-        u&quot;imapMoveFolderToTrash&quot;,</span>
<a href="#l47.61"></a><span id="l47.61" class="difflineplus">+        &quot;imapDeleteNoTrash&quot; :</span>
<a href="#l47.62"></a><span id="l47.62" class="difflineplus">+        &quot;imapMoveFolderToTrash&quot;,</span>
<a href="#l47.63"></a><span id="l47.63">       formatStrings, 1, getter_Copies(confirmationStr));</span>
<a href="#l47.64"></a><span id="l47.64">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l47.65"></a><span id="l47.65">     if (!msgWindow)</span>
<a href="#l47.66"></a><span id="l47.66">       return NS_ERROR_NULL_POINTER;</span>
<a href="#l47.67"></a><span id="l47.67">     nsCOMPtr&lt;nsIDocShell&gt; docShell;</span>
<a href="#l47.68"></a><span id="l47.68">     msgWindow-&gt;GetRootDocShell(getter_AddRefs(docShell));</span>
<a href="#l47.69"></a><span id="l47.69">     nsCOMPtr&lt;nsIPrompt&gt; dialog;</span>
<a href="#l47.70"></a><span id="l47.70">     if (docShell)</span>
<a href="#l47.71"></a><span id="l47.71" class="difflineat">@@ -6058,17 +6058,17 @@ nsImapMailFolder::FillInFolderProps(nsIM</span>
<a href="#l47.72"></a><span id="l47.72">     }</span>
<a href="#l47.73"></a><span id="l47.73">     else</span>
<a href="#l47.74"></a><span id="l47.74">     {</span>
<a href="#l47.75"></a><span id="l47.75">       // is this right? It doesn't leak, does it?</span>
<a href="#l47.76"></a><span id="l47.76">       CopyASCIItoUTF16(owner, uniOwner);</span>
<a href="#l47.77"></a><span id="l47.77">     }</span>
<a href="#l47.78"></a><span id="l47.78">     const char16_t *params[] = { uniOwner.get() };</span>
<a href="#l47.79"></a><span id="l47.79">     rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l47.80"></a><span id="l47.80" class="difflineminus">-      u&quot;imapOtherUsersFolderTypeDescription&quot;,</span>
<a href="#l47.81"></a><span id="l47.81" class="difflineplus">+      &quot;imapOtherUsersFolderTypeDescription&quot;,</span>
<a href="#l47.82"></a><span id="l47.82">       params, 1, getter_Copies(folderTypeDesc));</span>
<a href="#l47.83"></a><span id="l47.83">   }</span>
<a href="#l47.84"></a><span id="l47.84">   else if (GetFolderACL()-&gt;GetIsFolderShared())</span>
<a href="#l47.85"></a><span id="l47.85">   {</span>
<a href="#l47.86"></a><span id="l47.86">     folderTypeStringID = &quot;imapPersonalSharedFolderTypeName&quot;;</span>
<a href="#l47.87"></a><span id="l47.87">     folderTypeDescStringID = &quot;imapPersonalSharedFolderTypeDescription&quot;;</span>
<a href="#l47.88"></a><span id="l47.88">   }</span>
<a href="#l47.89"></a><span id="l47.89">   else</span>
<a href="#l47.90"></a><span id="l47.90" class="difflineat">@@ -6589,90 +6589,90 @@ nsresult nsMsgIMAPFolderACL::CreateACLRi</span>
<a href="#l47.91"></a><span id="l47.91"> {</span>
<a href="#l47.92"></a><span id="l47.92">   nsString curRight;</span>
<a href="#l47.93"></a><span id="l47.93">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l47.94"></a><span id="l47.94">   nsresult rv = IMAPGetStringBundle(getter_AddRefs(bundle));</span>
<a href="#l47.95"></a><span id="l47.95">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l47.96"></a><span id="l47.96"> </span>
<a href="#l47.97"></a><span id="l47.97">   if (GetDoIHaveFullRightsForFolder()) {</span>
<a href="#l47.98"></a><span id="l47.98">     nsAutoString result;</span>
<a href="#l47.99"></a><span id="l47.99" class="difflineminus">-    rv = bundle-&gt;GetStringFromName(u&quot;imapAclFullRights&quot;,</span>
<a href="#l47.100"></a><span id="l47.100" class="difflineplus">+    rv = bundle-&gt;GetStringFromName(&quot;imapAclFullRights&quot;,</span>
<a href="#l47.101"></a><span id="l47.101">                                    getter_Copies(result));</span>
<a href="#l47.102"></a><span id="l47.102">     aRightsString.Assign(result);</span>
<a href="#l47.103"></a><span id="l47.103">     return rv;</span>
<a href="#l47.104"></a><span id="l47.104">   }</span>
<a href="#l47.105"></a><span id="l47.105">   else</span>
<a href="#l47.106"></a><span id="l47.106">   {</span>
<a href="#l47.107"></a><span id="l47.107">     if (GetCanIReadFolder())</span>
<a href="#l47.108"></a><span id="l47.108">     {</span>
<a href="#l47.109"></a><span id="l47.109" class="difflineminus">-      bundle-&gt;GetStringFromName(u&quot;imapAclReadRight&quot;,</span>
<a href="#l47.110"></a><span id="l47.110" class="difflineplus">+      bundle-&gt;GetStringFromName(&quot;imapAclReadRight&quot;,</span>
<a href="#l47.111"></a><span id="l47.111">                                 getter_Copies(curRight));</span>
<a href="#l47.112"></a><span id="l47.112">       aRightsString.Append(curRight);</span>
<a href="#l47.113"></a><span id="l47.113">     }</span>
<a href="#l47.114"></a><span id="l47.114">     if (GetCanIWriteFolder())</span>
<a href="#l47.115"></a><span id="l47.115">     {</span>
<a href="#l47.116"></a><span id="l47.116">       if (!aRightsString.IsEmpty()) aRightsString.AppendLiteral(&quot;, &quot;);</span>
<a href="#l47.117"></a><span id="l47.117" class="difflineminus">-      bundle-&gt;GetStringFromName(u&quot;imapAclWriteRight&quot;,</span>
<a href="#l47.118"></a><span id="l47.118" class="difflineplus">+      bundle-&gt;GetStringFromName(&quot;imapAclWriteRight&quot;,</span>
<a href="#l47.119"></a><span id="l47.119">                                 getter_Copies(curRight));</span>
<a href="#l47.120"></a><span id="l47.120">       aRightsString.Append(curRight);</span>
<a href="#l47.121"></a><span id="l47.121">     }</span>
<a href="#l47.122"></a><span id="l47.122">     if (GetCanIInsertInFolder())</span>
<a href="#l47.123"></a><span id="l47.123">     {</span>
<a href="#l47.124"></a><span id="l47.124">       if (!aRightsString.IsEmpty()) aRightsString.AppendLiteral(&quot;, &quot;);</span>
<a href="#l47.125"></a><span id="l47.125" class="difflineminus">-      bundle-&gt;GetStringFromName(u&quot;imapAclInsertRight&quot;,</span>
<a href="#l47.126"></a><span id="l47.126" class="difflineplus">+      bundle-&gt;GetStringFromName(&quot;imapAclInsertRight&quot;,</span>
<a href="#l47.127"></a><span id="l47.127">                                 getter_Copies(curRight));</span>
<a href="#l47.128"></a><span id="l47.128">       aRightsString.Append(curRight);</span>
<a href="#l47.129"></a><span id="l47.129">     }</span>
<a href="#l47.130"></a><span id="l47.130">     if (GetCanILookupFolder())</span>
<a href="#l47.131"></a><span id="l47.131">     {</span>
<a href="#l47.132"></a><span id="l47.132">       if (!aRightsString.IsEmpty()) aRightsString.AppendLiteral(&quot;, &quot;);</span>
<a href="#l47.133"></a><span id="l47.133" class="difflineminus">-      bundle-&gt;GetStringFromName(u&quot;imapAclLookupRight&quot;,</span>
<a href="#l47.134"></a><span id="l47.134" class="difflineplus">+      bundle-&gt;GetStringFromName(&quot;imapAclLookupRight&quot;,</span>
<a href="#l47.135"></a><span id="l47.135">                                 getter_Copies(curRight));</span>
<a href="#l47.136"></a><span id="l47.136">       aRightsString.Append(curRight);</span>
<a href="#l47.137"></a><span id="l47.137">     }</span>
<a href="#l47.138"></a><span id="l47.138">     if (GetCanIStoreSeenInFolder())</span>
<a href="#l47.139"></a><span id="l47.139">     {</span>
<a href="#l47.140"></a><span id="l47.140">       if (!aRightsString.IsEmpty()) aRightsString.AppendLiteral(&quot;, &quot;);</span>
<a href="#l47.141"></a><span id="l47.141" class="difflineminus">-      bundle-&gt;GetStringFromName(u&quot;imapAclSeenRight&quot;,</span>
<a href="#l47.142"></a><span id="l47.142" class="difflineplus">+      bundle-&gt;GetStringFromName(&quot;imapAclSeenRight&quot;,</span>
<a href="#l47.143"></a><span id="l47.143">                                 getter_Copies(curRight));</span>
<a href="#l47.144"></a><span id="l47.144">       aRightsString.Append(curRight);</span>
<a href="#l47.145"></a><span id="l47.145">     }</span>
<a href="#l47.146"></a><span id="l47.146">     if (GetCanIDeleteInFolder())</span>
<a href="#l47.147"></a><span id="l47.147">     {</span>
<a href="#l47.148"></a><span id="l47.148">       if (!aRightsString.IsEmpty()) aRightsString.AppendLiteral(&quot;, &quot;);</span>
<a href="#l47.149"></a><span id="l47.149" class="difflineminus">-      bundle-&gt;GetStringFromName(u&quot;imapAclDeleteRight&quot;,</span>
<a href="#l47.150"></a><span id="l47.150" class="difflineplus">+      bundle-&gt;GetStringFromName(&quot;imapAclDeleteRight&quot;,</span>
<a href="#l47.151"></a><span id="l47.151">                                 getter_Copies(curRight));</span>
<a href="#l47.152"></a><span id="l47.152">       aRightsString.Append(curRight);</span>
<a href="#l47.153"></a><span id="l47.153">     }</span>
<a href="#l47.154"></a><span id="l47.154">     if (GetCanIExpungeFolder())</span>
<a href="#l47.155"></a><span id="l47.155">     {</span>
<a href="#l47.156"></a><span id="l47.156">       if (!aRightsString.IsEmpty())</span>
<a href="#l47.157"></a><span id="l47.157">         aRightsString.AppendLiteral(&quot;, &quot;);</span>
<a href="#l47.158"></a><span id="l47.158" class="difflineminus">-      bundle-&gt;GetStringFromName(u&quot;imapAclExpungeRight&quot;,</span>
<a href="#l47.159"></a><span id="l47.159" class="difflineplus">+      bundle-&gt;GetStringFromName(&quot;imapAclExpungeRight&quot;,</span>
<a href="#l47.160"></a><span id="l47.160">                                 getter_Copies(curRight));</span>
<a href="#l47.161"></a><span id="l47.161">       aRightsString.Append(curRight);</span>
<a href="#l47.162"></a><span id="l47.162">     }</span>
<a href="#l47.163"></a><span id="l47.163">     if (GetCanICreateSubfolder())</span>
<a href="#l47.164"></a><span id="l47.164">     {</span>
<a href="#l47.165"></a><span id="l47.165">       if (!aRightsString.IsEmpty()) aRightsString.AppendLiteral(&quot;, &quot;);</span>
<a href="#l47.166"></a><span id="l47.166" class="difflineminus">-      bundle-&gt;GetStringFromName(u&quot;imapAclCreateRight&quot;,</span>
<a href="#l47.167"></a><span id="l47.167" class="difflineplus">+      bundle-&gt;GetStringFromName(&quot;imapAclCreateRight&quot;,</span>
<a href="#l47.168"></a><span id="l47.168">                                 getter_Copies(curRight));</span>
<a href="#l47.169"></a><span id="l47.169">       aRightsString.Append(curRight);</span>
<a href="#l47.170"></a><span id="l47.170">     }</span>
<a href="#l47.171"></a><span id="l47.171">     if (GetCanIPostToFolder())</span>
<a href="#l47.172"></a><span id="l47.172">     {</span>
<a href="#l47.173"></a><span id="l47.173">       if (!aRightsString.IsEmpty()) aRightsString.AppendLiteral(&quot;, &quot;);</span>
<a href="#l47.174"></a><span id="l47.174" class="difflineminus">-      bundle-&gt;GetStringFromName(u&quot;imapAclPostRight&quot;,</span>
<a href="#l47.175"></a><span id="l47.175" class="difflineplus">+      bundle-&gt;GetStringFromName(&quot;imapAclPostRight&quot;,</span>
<a href="#l47.176"></a><span id="l47.176">                                 getter_Copies(curRight));</span>
<a href="#l47.177"></a><span id="l47.177">       aRightsString.Append(curRight);</span>
<a href="#l47.178"></a><span id="l47.178">     }</span>
<a href="#l47.179"></a><span id="l47.179">     if (GetCanIAdministerFolder())</span>
<a href="#l47.180"></a><span id="l47.180">     {</span>
<a href="#l47.181"></a><span id="l47.181">       if (!aRightsString.IsEmpty()) aRightsString.AppendLiteral(&quot;, &quot;);</span>
<a href="#l47.182"></a><span id="l47.182" class="difflineminus">-      bundle-&gt;GetStringFromName(u&quot;imapAclAdministerRight&quot;,</span>
<a href="#l47.183"></a><span id="l47.183" class="difflineplus">+      bundle-&gt;GetStringFromName(&quot;imapAclAdministerRight&quot;,</span>
<a href="#l47.184"></a><span id="l47.184">                                 getter_Copies(curRight));</span>
<a href="#l47.185"></a><span id="l47.185">       aRightsString.Append(curRight);</span>
<a href="#l47.186"></a><span id="l47.186">     }</span>
<a href="#l47.187"></a><span id="l47.187">   }</span>
<a href="#l47.188"></a><span id="l47.188">   return rv;</span>
<a href="#l47.189"></a><span id="l47.189"> }</span>
<a href="#l47.190"></a><span id="l47.190"> </span>
<a href="#l47.191"></a><span id="l47.191"> NS_IMETHODIMP nsImapMailFolder::GetFilePath(nsIFile ** aPathName)</span>
<a href="#l47.192"></a><span id="l47.192" class="difflineat">@@ -8209,17 +8209,17 @@ nsImapMailFolder::CopyStreamMessage(nsIM</span>
<a href="#l47.193"></a><span id="l47.193">                                             totalMsgString.get(),</span>
<a href="#l47.194"></a><span id="l47.194">                                             dstFolderName.get()</span>
<a href="#l47.195"></a><span id="l47.195">                                             };</span>
<a href="#l47.196"></a><span id="l47.196"> </span>
<a href="#l47.197"></a><span id="l47.197">       nsCOMPtr &lt;nsIStringBundle&gt; bundle;</span>
<a href="#l47.198"></a><span id="l47.198">       rv = IMAPGetStringBundle(getter_AddRefs(bundle));</span>
<a href="#l47.199"></a><span id="l47.199">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l47.200"></a><span id="l47.200">       rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l47.201"></a><span id="l47.201" class="difflineminus">-        u&quot;imapCopyingMessageOf2&quot;,</span>
<a href="#l47.202"></a><span id="l47.202" class="difflineplus">+        &quot;imapCopyingMessageOf2&quot;,</span>
<a href="#l47.203"></a><span id="l47.203">         formatStrings, 3, getter_Copies(progressText));</span>
<a href="#l47.204"></a><span id="l47.204">       nsCOMPtr &lt;nsIMsgStatusFeedback&gt; statusFeedback;</span>
<a href="#l47.205"></a><span id="l47.205">       if (m_copyState-&gt;m_msgWindow)</span>
<a href="#l47.206"></a><span id="l47.206">         m_copyState-&gt;m_msgWindow-&gt;GetStatusFeedback(getter_AddRefs(statusFeedback));</span>
<a href="#l47.207"></a><span id="l47.207">       if (statusFeedback)</span>
<a href="#l47.208"></a><span id="l47.208">       {</span>
<a href="#l47.209"></a><span id="l47.209">         statusFeedback-&gt;ShowStatusString(progressText);</span>
<a href="#l47.210"></a><span id="l47.210">         int32_t percent;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/mailnews/imap/src/nsImapProtocol.cpp</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapProtocol.cpp</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -555,17 +555,17 @@ nsImapProtocol::Initialize(nsIImapHostSe</span>
<a href="#l48.4"></a><span id="l48.4">   m_hostSessionList = aHostSessionList; // no ref count...host session list has life time &gt; connection</span>
<a href="#l48.5"></a><span id="l48.5">   m_parser.SetHostSessionList(aHostSessionList);</span>
<a href="#l48.6"></a><span id="l48.6">   m_parser.SetFlagState(m_flagState);</span>
<a href="#l48.7"></a><span id="l48.7"> </span>
<a href="#l48.8"></a><span id="l48.8">   // Initialize the empty mime part string on the main thread.</span>
<a href="#l48.9"></a><span id="l48.9">   rv = IMAPGetStringBundle(getter_AddRefs(m_bundle));</span>
<a href="#l48.10"></a><span id="l48.10">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l48.11"></a><span id="l48.11"> </span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-  rv = m_bundle-&gt;GetStringFromName(u&quot;imapEmptyMimePart&quot;,</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineplus">+  rv = m_bundle-&gt;GetStringFromName(&quot;imapEmptyMimePart&quot;,</span>
<a href="#l48.14"></a><span id="l48.14">     getter_Copies(m_emptyMimePartString));</span>
<a href="#l48.15"></a><span id="l48.15">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l48.16"></a><span id="l48.16"> </span>
<a href="#l48.17"></a><span id="l48.17">   // Now initialize the thread for the connection</span>
<a href="#l48.18"></a><span id="l48.18">   if (m_thread == nullptr)</span>
<a href="#l48.19"></a><span id="l48.19">   {</span>
<a href="#l48.20"></a><span id="l48.20">     nsresult rv = NS_NewThread(getter_AddRefs(m_iThread), this);</span>
<a href="#l48.21"></a><span id="l48.21">     if (NS_FAILED(rv))</span>
<a href="#l48.22"></a><span id="l48.22" class="difflineat">@@ -5196,23 +5196,23 @@ void nsImapProtocol::ResetProgressInfo()</span>
<a href="#l48.23"></a><span id="l48.23"> </span>
<a href="#l48.24"></a><span id="l48.24"> void nsImapProtocol::SetProgressString(uint32_t aStringIndex)</span>
<a href="#l48.25"></a><span id="l48.25"> {</span>
<a href="#l48.26"></a><span id="l48.26">   m_stringIndex = aStringIndex;</span>
<a href="#l48.27"></a><span id="l48.27">   MOZ_ASSERT(m_stringIndex &lt;= IMAP_EMPTY_STRING_INDEX);</span>
<a href="#l48.28"></a><span id="l48.28">   switch (m_stringIndex)</span>
<a href="#l48.29"></a><span id="l48.29">   {</span>
<a href="#l48.30"></a><span id="l48.30">     case IMAP_HEADERS_STRING_INDEX:</span>
<a href="#l48.31"></a><span id="l48.31" class="difflineminus">-      m_progressStringName = u&quot;imapReceivingMessageHeaders3&quot;;</span>
<a href="#l48.32"></a><span id="l48.32" class="difflineplus">+      m_progressStringName = &quot;imapReceivingMessageHeaders3&quot;;</span>
<a href="#l48.33"></a><span id="l48.33">       break;</span>
<a href="#l48.34"></a><span id="l48.34">     case IMAP_MESSAGES_STRING_INDEX:</span>
<a href="#l48.35"></a><span id="l48.35" class="difflineminus">-      m_progressStringName = u&quot;imapFolderReceivingMessageOf3&quot;;</span>
<a href="#l48.36"></a><span id="l48.36" class="difflineplus">+      m_progressStringName = &quot;imapFolderReceivingMessageOf3&quot;;</span>
<a href="#l48.37"></a><span id="l48.37">       break;</span>
<a href="#l48.38"></a><span id="l48.38">     case IMAP_FLAGS_STRING_INDEX:</span>
<a href="#l48.39"></a><span id="l48.39" class="difflineminus">-      m_progressStringName = u&quot;imapReceivingMessageFlags3&quot;;</span>
<a href="#l48.40"></a><span id="l48.40" class="difflineplus">+      m_progressStringName = &quot;imapReceivingMessageFlags3&quot;;</span>
<a href="#l48.41"></a><span id="l48.41">       break;</span>
<a href="#l48.42"></a><span id="l48.42">     case IMAP_EMPTY_STRING_INDEX:</span>
<a href="#l48.43"></a><span id="l48.43">     default:</span>
<a href="#l48.44"></a><span id="l48.44">       break;</span>
<a href="#l48.45"></a><span id="l48.45">   }</span>
<a href="#l48.46"></a><span id="l48.46"> }</span>
<a href="#l48.47"></a><span id="l48.47"> </span>
<a href="#l48.48"></a><span id="l48.48"> void</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/mailnews/imap/src/nsImapProtocol.h</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapProtocol.h</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -640,17 +640,17 @@ private:</span>
<a href="#l49.4"></a><span id="l49.4">   nsCString m_logonCookie;</span>
<a href="#l49.5"></a><span id="l49.5">   int16_t m_logonPort;</span>
<a href="#l49.6"></a><span id="l49.6">   </span>
<a href="#l49.7"></a><span id="l49.7">   nsString mAcceptLanguages;</span>
<a href="#l49.8"></a><span id="l49.8">   </span>
<a href="#l49.9"></a><span id="l49.9">   // progress stuff</span>
<a href="#l49.10"></a><span id="l49.10">   void SetProgressString(uint32_t aStringIndex);</span>
<a href="#l49.11"></a><span id="l49.11">   </span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-  nsString      m_progressStringName;</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineplus">+  nsCString     m_progressStringName;</span>
<a href="#l49.14"></a><span id="l49.14">   uint32_t      m_stringIndex;</span>
<a href="#l49.15"></a><span id="l49.15">   int32_t       m_progressCurrentNumber[IMAP_NUMBER_OF_PROGRESS_STRINGS];</span>
<a href="#l49.16"></a><span id="l49.16">   int32_t       m_progressExpectedNumber;</span>
<a href="#l49.17"></a><span id="l49.17">   nsCString     m_lastProgressStringName;</span>
<a href="#l49.18"></a><span id="l49.18">   int32_t       m_lastPercent;</span>
<a href="#l49.19"></a><span id="l49.19">   int64_t       m_lastProgressTime;</span>
<a href="#l49.20"></a><span id="l49.20">   nsCOMPtr&lt;nsIStringBundle&gt; m_bundle;</span>
<a href="#l49.21"></a><span id="l49.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/mailnews/imap/src/nsImapService.cpp</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapService.cpp</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -2744,17 +2744,17 @@ NS_IMETHODIMP nsImapService::NewChannel2</span>
<a href="#l50.4"></a><span id="l50.4">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l50.5"></a><span id="l50.5">         // need to convert folder name from mod-utf7 to unicode</span>
<a href="#l50.6"></a><span id="l50.6">       nsAutoString unescapedName;</span>
<a href="#l50.7"></a><span id="l50.7">       if (NS_FAILED(CopyMUTF7toUTF16(fullFolderName, unescapedName)))</span>
<a href="#l50.8"></a><span id="l50.8">         CopyASCIItoUTF16(fullFolderName, unescapedName);</span>
<a href="#l50.9"></a><span id="l50.9">       const char16_t *formatStrings[1] = { unescapedName.get() };</span>
<a href="#l50.10"></a><span id="l50.10"> </span>
<a href="#l50.11"></a><span id="l50.11">       rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-        u&quot;imapSubscribePrompt&quot;,</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineplus">+        &quot;imapSubscribePrompt&quot;,</span>
<a href="#l50.14"></a><span id="l50.14">         formatStrings, 1, getter_Copies(confirmText));</span>
<a href="#l50.15"></a><span id="l50.15">       NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l50.16"></a><span id="l50.16"> </span>
<a href="#l50.17"></a><span id="l50.17">       bool confirmResult = false;</span>
<a href="#l50.18"></a><span id="l50.18">       rv = dialog-&gt;Confirm(nullptr, confirmText.get(), &amp;confirmResult);</span>
<a href="#l50.19"></a><span id="l50.19">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l50.20"></a><span id="l50.20"> </span>
<a href="#l50.21"></a><span id="l50.21">       if (confirmResult)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/mailnews/imap/src/nsImapStringBundle.cpp</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapStringBundle.cpp</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -17,18 +17,17 @@</span>
<a href="#l51.4"></a><span id="l51.4"> </span>
<a href="#l51.5"></a><span id="l51.5"> extern &quot;C&quot; </span>
<a href="#l51.6"></a><span id="l51.6"> nsresult</span>
<a href="#l51.7"></a><span id="l51.7"> IMAPGetStringByName(const char* stringName, char16_t **aString)</span>
<a href="#l51.8"></a><span id="l51.8"> {</span>
<a href="#l51.9"></a><span id="l51.9">   nsCOMPtr &lt;nsIStringBundle&gt; sBundle;</span>
<a href="#l51.10"></a><span id="l51.10">   nsresult rv = IMAPGetStringBundle(getter_AddRefs(sBundle));</span>
<a href="#l51.11"></a><span id="l51.11">   if (NS_SUCCEEDED(rv) &amp;&amp; sBundle)</span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-    rv = sBundle-&gt;GetStringFromName(NS_ConvertASCIItoUTF16(stringName).get(),</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineminus">-                                    aString);</span>
<a href="#l51.14"></a><span id="l51.14" class="difflineplus">+    rv = sBundle-&gt;GetStringFromName(stringName, aString);</span>
<a href="#l51.15"></a><span id="l51.15">   return rv;</span>
<a href="#l51.16"></a><span id="l51.16"> }</span>
<a href="#l51.17"></a><span id="l51.17"> </span>
<a href="#l51.18"></a><span id="l51.18"> nsresult</span>
<a href="#l51.19"></a><span id="l51.19"> IMAPGetStringBundle(nsIStringBundle **aBundle)</span>
<a href="#l51.20"></a><span id="l51.20"> {</span>
<a href="#l51.21"></a><span id="l51.21">   nsresult rv=NS_OK;</span>
<a href="#l51.22"></a><span id="l51.22">   nsCOMPtr&lt;nsIStringBundleService&gt; stringService =</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/mailnews/import/applemail/src/nsAppleMailImport.cpp</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/mailnews/import/applemail/src/nsAppleMailImport.cpp</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -52,23 +52,23 @@ nsAppleMailImportModule::~nsAppleMailImp</span>
<a href="#l52.4"></a><span id="l52.4"> </span>
<a href="#l52.5"></a><span id="l52.5"> </span>
<a href="#l52.6"></a><span id="l52.6"> NS_IMPL_ISUPPORTS(nsAppleMailImportModule, nsIImportModule)</span>
<a href="#l52.7"></a><span id="l52.7"> </span>
<a href="#l52.8"></a><span id="l52.8"> </span>
<a href="#l52.9"></a><span id="l52.9"> NS_IMETHODIMP nsAppleMailImportModule::GetName(char16_t **aName)</span>
<a href="#l52.10"></a><span id="l52.10"> {</span>
<a href="#l52.11"></a><span id="l52.11">   return mBundle ?</span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-    mBundle-&gt;GetStringFromName(u&quot;ApplemailImportName&quot;, aName) : NS_ERROR_FAILURE;</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineplus">+    mBundle-&gt;GetStringFromName(&quot;ApplemailImportName&quot;, aName) : NS_ERROR_FAILURE;</span>
<a href="#l52.14"></a><span id="l52.14"> }</span>
<a href="#l52.15"></a><span id="l52.15"> </span>
<a href="#l52.16"></a><span id="l52.16"> NS_IMETHODIMP nsAppleMailImportModule::GetDescription(char16_t **aName)</span>
<a href="#l52.17"></a><span id="l52.17"> {</span>
<a href="#l52.18"></a><span id="l52.18">   return mBundle ?</span>
<a href="#l52.19"></a><span id="l52.19" class="difflineminus">-    mBundle-&gt;GetStringFromName(u&quot;ApplemailImportDescription&quot;, aName) : NS_ERROR_FAILURE;</span>
<a href="#l52.20"></a><span id="l52.20" class="difflineplus">+    mBundle-&gt;GetStringFromName(&quot;ApplemailImportDescription&quot;, aName) : NS_ERROR_FAILURE;</span>
<a href="#l52.21"></a><span id="l52.21"> }</span>
<a href="#l52.22"></a><span id="l52.22"> </span>
<a href="#l52.23"></a><span id="l52.23"> NS_IMETHODIMP nsAppleMailImportModule::GetSupports(char **aSupports)</span>
<a href="#l52.24"></a><span id="l52.24"> {</span>
<a href="#l52.25"></a><span id="l52.25">   NS_ENSURE_ARG_POINTER(aSupports);</span>
<a href="#l52.26"></a><span id="l52.26">   *aSupports = strdup(NS_IMPORT_MAIL_STR);</span>
<a href="#l52.27"></a><span id="l52.27">   return NS_OK;</span>
<a href="#l52.28"></a><span id="l52.28"> }</span>
<a href="#l52.29"></a><span id="l52.29" class="difflineat">@@ -91,17 +91,17 @@ NS_IMETHODIMP nsAppleMailImportModule::G</span>
<a href="#l52.30"></a><span id="l52.30">     nsCOMPtr&lt;nsIImportMail&gt; mail(do_CreateInstance(NS_APPLEMAILIMPL_CONTRACTID, &amp;rv));</span>
<a href="#l52.31"></a><span id="l52.31">     if (NS_SUCCEEDED(rv)) {</span>
<a href="#l52.32"></a><span id="l52.32">       nsCOMPtr&lt;nsIImportService&gt; impSvc(do_GetService(NS_IMPORTSERVICE_CONTRACTID, &amp;rv));</span>
<a href="#l52.33"></a><span id="l52.33">       if (NS_SUCCEEDED(rv)) {</span>
<a href="#l52.34"></a><span id="l52.34">         nsCOMPtr&lt;nsIImportGeneric&gt; generic;</span>
<a href="#l52.35"></a><span id="l52.35">         rv = impSvc-&gt;CreateNewGenericMail(getter_AddRefs(generic));</span>
<a href="#l52.36"></a><span id="l52.36">         if (NS_SUCCEEDED(rv)) {</span>
<a href="#l52.37"></a><span id="l52.37">           nsAutoString name;</span>
<a href="#l52.38"></a><span id="l52.38" class="difflineminus">-          rv = mBundle-&gt;GetStringFromName(u&quot;ApplemailImportName&quot;, getter_Copies(name));</span>
<a href="#l52.39"></a><span id="l52.39" class="difflineplus">+          rv = mBundle-&gt;GetStringFromName(&quot;ApplemailImportName&quot;, getter_Copies(name));</span>
<a href="#l52.40"></a><span id="l52.40">           NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l52.41"></a><span id="l52.41"> </span>
<a href="#l52.42"></a><span id="l52.42">           nsCOMPtr&lt;nsISupportsString&gt; nameString(do_CreateInstance(NS_SUPPORTS_STRING_CONTRACTID, &amp;rv));</span>
<a href="#l52.43"></a><span id="l52.43">           NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l52.44"></a><span id="l52.44">           nameString-&gt;SetData(name);</span>
<a href="#l52.45"></a><span id="l52.45"> </span>
<a href="#l52.46"></a><span id="l52.46">           generic-&gt;SetData(&quot;name&quot;, nameString);</span>
<a href="#l52.47"></a><span id="l52.47">           generic-&gt;SetData(&quot;mailInterface&quot;, mail);</span>
<a href="#l52.48"></a><span id="l52.48" class="difflineat">@@ -582,17 +582,17 @@ nsAppleMailImportMail::ImportMailbox(nsI</span>
<a href="#l52.49"></a><span id="l52.49"> }</span>
<a href="#l52.50"></a><span id="l52.50"> </span>
<a href="#l52.51"></a><span id="l52.51"> void nsAppleMailImportMail::ReportStatus(const char16_t* aErrorName, nsString &amp;aName,</span>
<a href="#l52.52"></a><span id="l52.52">                                          nsAString &amp;aStream)</span>
<a href="#l52.53"></a><span id="l52.53"> {</span>
<a href="#l52.54"></a><span id="l52.54">   // get (and format, if needed) the error string from the bundle</span>
<a href="#l52.55"></a><span id="l52.55">   nsAutoString outString;</span>
<a href="#l52.56"></a><span id="l52.56">   const char16_t *fmt = { aName.get() };</span>
<a href="#l52.57"></a><span id="l52.57" class="difflineminus">-  nsresult rv = mBundle-&gt;FormatStringFromName(aErrorName, &amp;fmt, 1, getter_Copies(outString));</span>
<a href="#l52.58"></a><span id="l52.58" class="difflineplus">+  nsresult rv = mBundle-&gt;FormatStringFromName(NS_ConvertUTF16toUTF8(aErrorName).get(), &amp;fmt, 1, getter_Copies(outString));</span>
<a href="#l52.59"></a><span id="l52.59">   // write it out the stream</span>
<a href="#l52.60"></a><span id="l52.60">   if (NS_SUCCEEDED(rv)) {</span>
<a href="#l52.61"></a><span id="l52.61">     aStream.Append(outString);</span>
<a href="#l52.62"></a><span id="l52.62">     aStream.Append(char16_t('\n'));</span>
<a href="#l52.63"></a><span id="l52.63">   }</span>
<a href="#l52.64"></a><span id="l52.64"> }</span>
<a href="#l52.65"></a><span id="l52.65"> </span>
<a href="#l52.66"></a><span id="l52.66"> void nsAppleMailImportMail::SetLogs(const nsAString &amp;aSuccess, const nsAString &amp;aError, char16_t **aOutSuccess, char16_t **aOutError)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/mailnews/import/becky/src/nsBeckyMail.cpp</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/mailnews/import/becky/src/nsBeckyMail.cpp</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -610,17 +610,17 @@ nsBeckyMail::ImportMailbox(nsIImportMail</span>
<a href="#l53.4"></a><span id="l53.4">   mReadBytes = finalSize;</span>
<a href="#l53.5"></a><span id="l53.5"> </span>
<a href="#l53.6"></a><span id="l53.6">   nsAutoString name;</span>
<a href="#l53.7"></a><span id="l53.7">   aSource-&gt;GetDisplayName(getter_Copies(name));</span>
<a href="#l53.8"></a><span id="l53.8"> </span>
<a href="#l53.9"></a><span id="l53.9">   nsAutoString successMessage;</span>
<a href="#l53.10"></a><span id="l53.10">   const char16_t *format = { name.get() };</span>
<a href="#l53.11"></a><span id="l53.11">   rv =</span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-      nsBeckyStringBundle::FormatStringFromName(u&quot;BeckyImportMailboxSuccess&quot;,</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineplus">+      nsBeckyStringBundle::FormatStringFromName(&quot;BeckyImportMailboxSuccess&quot;,</span>
<a href="#l53.14"></a><span id="l53.14">                                                 &amp;format,</span>
<a href="#l53.15"></a><span id="l53.15">                                                 1,</span>
<a href="#l53.16"></a><span id="l53.16">                                                 getter_Copies(successMessage));</span>
<a href="#l53.17"></a><span id="l53.17">   successMessage.AppendLiteral(&quot;\n&quot;);</span>
<a href="#l53.18"></a><span id="l53.18">   *aSuccessLog = ToNewUnicode(successMessage);</span>
<a href="#l53.19"></a><span id="l53.19"> </span>
<a href="#l53.20"></a><span id="l53.20">   return rv;</span>
<a href="#l53.21"></a><span id="l53.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/mailnews/import/becky/src/nsBeckyStringBundle.cpp</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/mailnews/import/becky/src/nsBeckyStringBundle.cpp</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -35,29 +35,29 @@ nsBeckyStringBundle::GetStringBundle(voi</span>
<a href="#l54.4"></a><span id="l54.4"> void</span>
<a href="#l54.5"></a><span id="l54.5"> nsBeckyStringBundle::EnsureStringBundle(void)</span>
<a href="#l54.6"></a><span id="l54.6"> {</span>
<a href="#l54.7"></a><span id="l54.7">   if (!mBundle)</span>
<a href="#l54.8"></a><span id="l54.8">     (void) GetStringBundle();</span>
<a href="#l54.9"></a><span id="l54.9"> }</span>
<a href="#l54.10"></a><span id="l54.10"> </span>
<a href="#l54.11"></a><span id="l54.11"> char16_t *</span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-nsBeckyStringBundle::GetStringByName(const char16_t *aName)</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineplus">+nsBeckyStringBundle::GetStringByName(const char *aName)</span>
<a href="#l54.14"></a><span id="l54.14"> {</span>
<a href="#l54.15"></a><span id="l54.15">   EnsureStringBundle();</span>
<a href="#l54.16"></a><span id="l54.16"> </span>
<a href="#l54.17"></a><span id="l54.17">   char16_t *string = nullptr;</span>
<a href="#l54.18"></a><span id="l54.18">   if (mBundle)</span>
<a href="#l54.19"></a><span id="l54.19">     mBundle-&gt;GetStringFromName(aName, &amp;string);</span>
<a href="#l54.20"></a><span id="l54.20"> </span>
<a href="#l54.21"></a><span id="l54.21">   return string;</span>
<a href="#l54.22"></a><span id="l54.22"> }</span>
<a href="#l54.23"></a><span id="l54.23"> </span>
<a href="#l54.24"></a><span id="l54.24"> nsresult</span>
<a href="#l54.25"></a><span id="l54.25" class="difflineminus">-nsBeckyStringBundle::FormatStringFromName(const char16_t *name,</span>
<a href="#l54.26"></a><span id="l54.26" class="difflineplus">+nsBeckyStringBundle::FormatStringFromName(const char *name,</span>
<a href="#l54.27"></a><span id="l54.27">                                           const char16_t **params,</span>
<a href="#l54.28"></a><span id="l54.28">                                           uint32_t length,</span>
<a href="#l54.29"></a><span id="l54.29">                                           char16_t **_retval)</span>
<a href="#l54.30"></a><span id="l54.30"> {</span>
<a href="#l54.31"></a><span id="l54.31">   EnsureStringBundle();</span>
<a href="#l54.32"></a><span id="l54.32"> </span>
<a href="#l54.33"></a><span id="l54.33">   return mBundle-&gt;FormatStringFromName(name,</span>
<a href="#l54.34"></a><span id="l54.34">                                        params,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1" class="difflineminus">--- a/mailnews/import/becky/src/nsBeckyStringBundle.h</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineplus">+++ b/mailnews/import/becky/src/nsBeckyStringBundle.h</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineat">@@ -5,18 +5,18 @@</span>
<a href="#l55.4"></a><span id="l55.4"> #define _nsBeckyStringBundle_H__</span>
<a href="#l55.5"></a><span id="l55.5"> </span>
<a href="#l55.6"></a><span id="l55.6"> #include &quot;nsString.h&quot;</span>
<a href="#l55.7"></a><span id="l55.7"> </span>
<a href="#l55.8"></a><span id="l55.8"> class nsIStringBundle;</span>
<a href="#l55.9"></a><span id="l55.9"> </span>
<a href="#l55.10"></a><span id="l55.10"> class nsBeckyStringBundle final {</span>
<a href="#l55.11"></a><span id="l55.11"> public:</span>
<a href="#l55.12"></a><span id="l55.12" class="difflineminus">-  static char16_t *GetStringByName(const char16_t *name);</span>
<a href="#l55.13"></a><span id="l55.13" class="difflineminus">-  static nsresult FormatStringFromName(const char16_t *name,</span>
<a href="#l55.14"></a><span id="l55.14" class="difflineplus">+  static char16_t *GetStringByName(const char *name);</span>
<a href="#l55.15"></a><span id="l55.15" class="difflineplus">+  static nsresult FormatStringFromName(const char *name,</span>
<a href="#l55.16"></a><span id="l55.16">                                        const char16_t **params,</span>
<a href="#l55.17"></a><span id="l55.17">                                        uint32_t length,</span>
<a href="#l55.18"></a><span id="l55.18">                                        char16_t **_retval);</span>
<a href="#l55.19"></a><span id="l55.19">   static nsIStringBundle * GetStringBundle(void); // don't release</span>
<a href="#l55.20"></a><span id="l55.20">   static void EnsureStringBundle(void);</span>
<a href="#l55.21"></a><span id="l55.21">   static void Cleanup(void);</span>
<a href="#l55.22"></a><span id="l55.22"> private:</span>
<a href="#l55.23"></a><span id="l55.23">   static nsIStringBundle *mBundle;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l56.1"></a><span id="l56.1" class="difflineminus">--- a/mailnews/import/src/nsImportMail.cpp</span>
<a href="#l56.2"></a><span id="l56.2" class="difflineplus">+++ b/mailnews/import/src/nsImportMail.cpp</span>
<a href="#l56.3"></a><span id="l56.3" class="difflineat">@@ -898,22 +898,22 @@ bool nsImportGenericMail::CreateFolder(n</span>
<a href="#l56.4"></a><span id="l56.4">   if (!bundleService)</span>
<a href="#l56.5"></a><span id="l56.5">       return false;</span>
<a href="#l56.6"></a><span id="l56.6">   rv = bundleService-&gt;CreateBundle(IMPORT_MSGS_URL, getter_AddRefs(bundle));</span>
<a href="#l56.7"></a><span id="l56.7">   if (NS_FAILED(rv))</span>
<a href="#l56.8"></a><span id="l56.8">       return false;</span>
<a href="#l56.9"></a><span id="l56.9">   nsString folderName;</span>
<a href="#l56.10"></a><span id="l56.10">   if (!m_pName.IsEmpty()) {</span>
<a href="#l56.11"></a><span id="l56.11">     const char16_t *moduleName[] = { m_pName.get() };</span>
<a href="#l56.12"></a><span id="l56.12" class="difflineminus">-    rv = bundle-&gt;FormatStringFromName(u&quot;ImportModuleFolderName&quot;,</span>
<a href="#l56.13"></a><span id="l56.13" class="difflineplus">+    rv = bundle-&gt;FormatStringFromName(&quot;ImportModuleFolderName&quot;,</span>
<a href="#l56.14"></a><span id="l56.14">                                       moduleName, 1,</span>
<a href="#l56.15"></a><span id="l56.15">                                       getter_Copies(folderName));</span>
<a href="#l56.16"></a><span id="l56.16">   }</span>
<a href="#l56.17"></a><span id="l56.17">   else {</span>
<a href="#l56.18"></a><span id="l56.18" class="difflineminus">-    rv = bundle-&gt;GetStringFromName(u&quot;DefaultFolderName&quot;,</span>
<a href="#l56.19"></a><span id="l56.19" class="difflineplus">+    rv = bundle-&gt;GetStringFromName(&quot;DefaultFolderName&quot;,</span>
<a href="#l56.20"></a><span id="l56.20">                                    getter_Copies(folderName));</span>
<a href="#l56.21"></a><span id="l56.21">   }</span>
<a href="#l56.22"></a><span id="l56.22">   if (NS_FAILED(rv)) {</span>
<a href="#l56.23"></a><span id="l56.23">       IMPORT_LOG0(&quot;*** Failed to get Folder Name!\n&quot;);</span>
<a href="#l56.24"></a><span id="l56.24">       return false;</span>
<a href="#l56.25"></a><span id="l56.25">   }</span>
<a href="#l56.26"></a><span id="l56.26">   nsCOMPtr &lt;nsIMsgAccountManager&gt; accMgr = do_GetService(NS_MSGACCOUNTMANAGER_CONTRACTID, &amp;rv);</span>
<a href="#l56.27"></a><span id="l56.27">   if (NS_FAILED(rv)) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l57.1"></a><span id="l57.1" class="difflineminus">--- a/mailnews/import/src/nsImportStringBundle.cpp</span>
<a href="#l57.2"></a><span id="l57.2" class="difflineplus">+++ b/mailnews/import/src/nsImportStringBundle.cpp</span>
<a href="#l57.3"></a><span id="l57.3" class="difflineat">@@ -60,18 +60,17 @@ void nsImportStringBundle::GetStringByNa</span>
<a href="#l57.4"></a><span id="l57.4"> }</span>
<a href="#l57.5"></a><span id="l57.5"> </span>
<a href="#l57.6"></a><span id="l57.6"> char16_t *nsImportStringBundle::GetStringByName(const char *aName,</span>
<a href="#l57.7"></a><span id="l57.7">                                                  nsIStringBundle *aBundle)</span>
<a href="#l57.8"></a><span id="l57.8"> {</span>
<a href="#l57.9"></a><span id="l57.9">   if (aBundle)</span>
<a href="#l57.10"></a><span id="l57.10">   {</span>
<a href="#l57.11"></a><span id="l57.11">     char16_t *ptrv = nullptr;</span>
<a href="#l57.12"></a><span id="l57.12" class="difflineminus">-    nsresult rv = aBundle-&gt;GetStringFromName(</span>
<a href="#l57.13"></a><span id="l57.13" class="difflineminus">-        NS_ConvertUTF8toUTF16(aName).get(), &amp;ptrv);</span>
<a href="#l57.14"></a><span id="l57.14" class="difflineplus">+    nsresult rv = aBundle-&gt;GetStringFromName(aName, &amp;ptrv);</span>
<a href="#l57.15"></a><span id="l57.15"> </span>
<a href="#l57.16"></a><span id="l57.16">     if (NS_SUCCEEDED(rv) &amp;&amp; ptrv)</span>
<a href="#l57.17"></a><span id="l57.17">       return ptrv;</span>
<a href="#l57.18"></a><span id="l57.18">   }</span>
<a href="#l57.19"></a><span id="l57.19"> </span>
<a href="#l57.20"></a><span id="l57.20">   nsString resultString(NS_LITERAL_STRING(&quot;[StringName &quot;));</span>
<a href="#l57.21"></a><span id="l57.21">   resultString.Append(NS_ConvertUTF8toUTF16(aName).get());</span>
<a href="#l57.22"></a><span id="l57.22">   resultString.AppendLiteral(&quot;?]&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l58.1"></a><span id="l58.1" class="difflineminus">--- a/mailnews/intl/nsCharsetConverterManager.cpp</span>
<a href="#l58.2"></a><span id="l58.2" class="difflineplus">+++ b/mailnews/intl/nsCharsetConverterManager.cpp</span>
<a href="#l58.3"></a><span id="l58.3" class="difflineat">@@ -57,23 +57,23 @@ nsresult LoadExtensibleBundle(const char</span>
<a href="#l58.4"></a><span id="l58.4"> }</span>
<a href="#l58.5"></a><span id="l58.5"> </span>
<a href="#l58.6"></a><span id="l58.6"> static</span>
<a href="#l58.7"></a><span id="l58.7"> nsresult GetBundleValue(nsIStringBundle * aBundle,</span>
<a href="#l58.8"></a><span id="l58.8">                         const char * aName,</span>
<a href="#l58.9"></a><span id="l58.9">                         const nsString&amp; aProp,</span>
<a href="#l58.10"></a><span id="l58.10">                         char16_t ** aResult)</span>
<a href="#l58.11"></a><span id="l58.11"> {</span>
<a href="#l58.12"></a><span id="l58.12" class="difflineminus">-  nsAutoString key; </span>
<a href="#l58.13"></a><span id="l58.13" class="difflineplus">+  nsAutoString key;</span>
<a href="#l58.14"></a><span id="l58.14"> </span>
<a href="#l58.15"></a><span id="l58.15">   key.AssignWithConversion(aName);</span>
<a href="#l58.16"></a><span id="l58.16">   ToLowerCase(key); // we lowercase the main comparison key</span>
<a href="#l58.17"></a><span id="l58.17">   key.Append(aProp);</span>
<a href="#l58.18"></a><span id="l58.18"> </span>
<a href="#l58.19"></a><span id="l58.19" class="difflineminus">-  return aBundle-&gt;GetStringFromName(key.get(), aResult);</span>
<a href="#l58.20"></a><span id="l58.20" class="difflineplus">+  return aBundle-&gt;GetStringFromName(NS_ConvertUTF16toUTF8(key).get(), aResult);</span>
<a href="#l58.21"></a><span id="l58.21"> }</span>
<a href="#l58.22"></a><span id="l58.22"> </span>
<a href="#l58.23"></a><span id="l58.23"> static</span>
<a href="#l58.24"></a><span id="l58.24"> nsresult GetBundleValue(nsIStringBundle * aBundle,</span>
<a href="#l58.25"></a><span id="l58.25">                         const char * aName,</span>
<a href="#l58.26"></a><span id="l58.26">                         const nsString&amp; aProp,</span>
<a href="#l58.27"></a><span id="l58.27">                         nsAString&amp; aResult)</span>
<a href="#l58.28"></a><span id="l58.28"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l59.1"></a><span id="l59.1" class="difflineminus">--- a/mailnews/local/src/nsLocalMailFolder.cpp</span>
<a href="#l59.2"></a><span id="l59.2" class="difflineplus">+++ b/mailnews/local/src/nsLocalMailFolder.cpp</span>
<a href="#l59.3"></a><span id="l59.3" class="difflineat">@@ -842,29 +842,29 @@ nsresult nsMsgLocalMailFolder::ConfirmFo</span>
<a href="#l59.4"></a><span id="l59.4"> </span>
<a href="#l59.5"></a><span id="l59.5">       nsAutoString folderName;</span>
<a href="#l59.6"></a><span id="l59.6">       rv = aFolder-&gt;GetName(folderName);</span>
<a href="#l59.7"></a><span id="l59.7">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l59.8"></a><span id="l59.8">       const char16_t *formatStrings[1] = { folderName.get() };</span>
<a href="#l59.9"></a><span id="l59.9"> </span>
<a href="#l59.10"></a><span id="l59.10">       nsAutoString deleteFolderDialogTitle;</span>
<a href="#l59.11"></a><span id="l59.11">       rv = bundle-&gt;GetStringFromName(</span>
<a href="#l59.12"></a><span id="l59.12" class="difflineminus">-        u&quot;pop3DeleteFolderDialogTitle&quot;,</span>
<a href="#l59.13"></a><span id="l59.13" class="difflineplus">+        &quot;pop3DeleteFolderDialogTitle&quot;,</span>
<a href="#l59.14"></a><span id="l59.14">         getter_Copies(deleteFolderDialogTitle));</span>
<a href="#l59.15"></a><span id="l59.15">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l59.16"></a><span id="l59.16"> </span>
<a href="#l59.17"></a><span id="l59.17">       nsAutoString deleteFolderButtonLabel;</span>
<a href="#l59.18"></a><span id="l59.18">       rv = bundle-&gt;GetStringFromName(</span>
<a href="#l59.19"></a><span id="l59.19" class="difflineminus">-        u&quot;pop3DeleteFolderButtonLabel&quot;,</span>
<a href="#l59.20"></a><span id="l59.20" class="difflineplus">+        &quot;pop3DeleteFolderButtonLabel&quot;,</span>
<a href="#l59.21"></a><span id="l59.21">         getter_Copies(deleteFolderButtonLabel));</span>
<a href="#l59.22"></a><span id="l59.22">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l59.23"></a><span id="l59.23"> </span>
<a href="#l59.24"></a><span id="l59.24">       nsAutoString confirmationStr;</span>
<a href="#l59.25"></a><span id="l59.25">       rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l59.26"></a><span id="l59.26" class="difflineminus">-        u&quot;pop3MoveFolderToTrash&quot;, formatStrings, 1,</span>
<a href="#l59.27"></a><span id="l59.27" class="difflineplus">+        &quot;pop3MoveFolderToTrash&quot;, formatStrings, 1,</span>
<a href="#l59.28"></a><span id="l59.28">         getter_Copies(confirmationStr));</span>
<a href="#l59.29"></a><span id="l59.29">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l59.30"></a><span id="l59.30"> </span>
<a href="#l59.31"></a><span id="l59.31">       nsCOMPtr&lt;nsIPrompt&gt; dialog(do_GetInterface(docShell));</span>
<a href="#l59.32"></a><span id="l59.32">       if (dialog)</span>
<a href="#l59.33"></a><span id="l59.33">       {</span>
<a href="#l59.34"></a><span id="l59.34">         int32_t buttonPressed = 0;</span>
<a href="#l59.35"></a><span id="l59.35">         // Default the dialog to &quot;cancel&quot;.</span>
<a href="#l59.36"></a><span id="l59.36" class="difflineat">@@ -3319,18 +3319,18 @@ nsresult nsMsgLocalMailFolder::DisplayMo</span>
<a href="#l59.37"></a><span id="l59.37">       numMsgSoFarString.AppendInt((mCopyState-&gt;m_copyingMultipleMessages) ? mCopyState-&gt;m_curCopyIndex : 1);</span>
<a href="#l59.38"></a><span id="l59.38"> </span>
<a href="#l59.39"></a><span id="l59.39">       nsAutoString totalMessagesString;</span>
<a href="#l59.40"></a><span id="l59.40">       totalMessagesString.AppendInt(mCopyState-&gt;m_totalMsgCount);</span>
<a href="#l59.41"></a><span id="l59.41">       nsString finalString;</span>
<a href="#l59.42"></a><span id="l59.42">       const char16_t * stringArray[] = { numMsgSoFarString.get(), totalMessagesString.get(), folderName.get() };</span>
<a href="#l59.43"></a><span id="l59.43">       rv = mCopyState-&gt;m_stringBundle-&gt;FormatStringFromName(</span>
<a href="#l59.44"></a><span id="l59.44">         (mCopyState-&gt;m_isMove) ?</span>
<a href="#l59.45"></a><span id="l59.45" class="difflineminus">-        u&quot;movingMessagesStatus&quot; :</span>
<a href="#l59.46"></a><span id="l59.46" class="difflineminus">-        u&quot;copyingMessagesStatus&quot;,</span>
<a href="#l59.47"></a><span id="l59.47" class="difflineplus">+        &quot;movingMessagesStatus&quot; :</span>
<a href="#l59.48"></a><span id="l59.48" class="difflineplus">+        &quot;copyingMessagesStatus&quot;,</span>
<a href="#l59.49"></a><span id="l59.49">         stringArray, 3, getter_Copies(finalString));</span>
<a href="#l59.50"></a><span id="l59.50">       int64_t nowMS = PR_IntervalToMilliseconds(PR_IntervalNow());</span>
<a href="#l59.51"></a><span id="l59.51"> </span>
<a href="#l59.52"></a><span id="l59.52">       // only update status/progress every half second</span>
<a href="#l59.53"></a><span id="l59.53">       if (nowMS - mCopyState-&gt;m_lastProgressTime &lt; 500 &amp;&amp;</span>
<a href="#l59.54"></a><span id="l59.54">           mCopyState-&gt;m_curCopyIndex &lt; mCopyState-&gt;m_totalMsgCount)</span>
<a href="#l59.55"></a><span id="l59.55">         return NS_OK;</span>
<a href="#l59.56"></a><span id="l59.56"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l60.1"></a><span id="l60.1" class="difflineminus">--- a/mailnews/local/src/nsMovemailService.cpp</span>
<a href="#l60.2"></a><span id="l60.2" class="difflineplus">+++ b/mailnews/local/src/nsMovemailService.cpp</span>
<a href="#l60.3"></a><span id="l60.3" class="difflineat">@@ -132,20 +132,20 @@ nsMovemailService::Error(const char* err</span>
<a href="#l60.4"></a><span id="l60.4">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l60.5"></a><span id="l60.5">   rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/localMsgs.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l60.6"></a><span id="l60.6">   if (NS_FAILED(rv))</span>
<a href="#l60.7"></a><span id="l60.7">     return;</span>
<a href="#l60.8"></a><span id="l60.8"> </span>
<a href="#l60.9"></a><span id="l60.9">   nsString errStr;</span>
<a href="#l60.10"></a><span id="l60.10">   // Format the error string if necessary</span>
<a href="#l60.11"></a><span id="l60.11">   if (params)</span>
<a href="#l60.12"></a><span id="l60.12" class="difflineminus">-    bundle-&gt;FormatStringFromName(NS_ConvertASCIItoUTF16(errorCode).get(),</span>
<a href="#l60.13"></a><span id="l60.13" class="difflineplus">+    bundle-&gt;FormatStringFromName(errorCode,</span>
<a href="#l60.14"></a><span id="l60.14">                                  params, length, getter_Copies(errStr));</span>
<a href="#l60.15"></a><span id="l60.15">   else</span>
<a href="#l60.16"></a><span id="l60.16" class="difflineminus">-    bundle-&gt;GetStringFromName(NS_ConvertASCIItoUTF16(errorCode).get(),</span>
<a href="#l60.17"></a><span id="l60.17" class="difflineplus">+    bundle-&gt;GetStringFromName(errorCode,</span>
<a href="#l60.18"></a><span id="l60.18">                               getter_Copies(errStr));</span>
<a href="#l60.19"></a><span id="l60.19"> </span>
<a href="#l60.20"></a><span id="l60.20">   if (!errStr.IsEmpty()) {</span>
<a href="#l60.21"></a><span id="l60.21">     dialog-&gt;Alert(nullptr, errStr.get());</span>
<a href="#l60.22"></a><span id="l60.22">   }</span>
<a href="#l60.23"></a><span id="l60.23"> }</span>
<a href="#l60.24"></a><span id="l60.24"> </span>
<a href="#l60.25"></a><span id="l60.25"> SpoolLock::SpoolLock(nsACString *aSpoolName, int aSeconds,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l61.1"></a><span id="l61.1" class="difflineminus">--- a/mailnews/local/src/nsParseMailbox.cpp</span>
<a href="#l61.2"></a><span id="l61.2" class="difflineplus">+++ b/mailnews/local/src/nsParseMailbox.cpp</span>
<a href="#l61.3"></a><span id="l61.3" class="difflineat">@@ -289,17 +289,17 @@ void nsMsgMailboxParser::UpdateStatusTex</span>
<a href="#l61.4"></a><span id="l61.4">     if (!bundleService)</span>
<a href="#l61.5"></a><span id="l61.5">       return;</span>
<a href="#l61.6"></a><span id="l61.6">     nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l61.7"></a><span id="l61.7">     rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/localMsgs.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l61.8"></a><span id="l61.8">     if (NS_FAILED(rv))</span>
<a href="#l61.9"></a><span id="l61.9">       return;</span>
<a href="#l61.10"></a><span id="l61.10">     nsString finalString;</span>
<a href="#l61.11"></a><span id="l61.11">     const char16_t * stringArray[] = { m_folderName.get() };</span>
<a href="#l61.12"></a><span id="l61.12" class="difflineminus">-    rv = bundle-&gt;FormatStringFromName(NS_ConvertASCIItoUTF16(stringName).get(),</span>
<a href="#l61.13"></a><span id="l61.13" class="difflineplus">+    rv = bundle-&gt;FormatStringFromName(stringName,</span>
<a href="#l61.14"></a><span id="l61.14">                                       stringArray, 1, getter_Copies(finalString));</span>
<a href="#l61.15"></a><span id="l61.15">     m_statusFeedback-&gt;ShowStatusString(finalString);</span>
<a href="#l61.16"></a><span id="l61.16">   }</span>
<a href="#l61.17"></a><span id="l61.17"> }</span>
<a href="#l61.18"></a><span id="l61.18"> </span>
<a href="#l61.19"></a><span id="l61.19"> void nsMsgMailboxParser::UpdateProgressPercent ()</span>
<a href="#l61.20"></a><span id="l61.20"> {</span>
<a href="#l61.21"></a><span id="l61.21">   if (m_statusFeedback &amp;&amp; m_graph_progress_total != 0)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l62.1"></a><span id="l62.1" class="difflineminus">--- a/mailnews/local/src/nsPop3Protocol.cpp</span>
<a href="#l62.2"></a><span id="l62.2" class="difflineplus">+++ b/mailnews/local/src/nsPop3Protocol.cpp</span>
<a href="#l62.3"></a><span id="l62.3" class="difflineat">@@ -647,26 +647,25 @@ nsresult nsPop3Protocol::FormatCounterSt</span>
<a href="#l62.4"></a><span id="l62.4">   nsAutoString count2String;</span>
<a href="#l62.5"></a><span id="l62.5">   count2String.AppendInt(count2);</span>
<a href="#l62.6"></a><span id="l62.6"> </span>
<a href="#l62.7"></a><span id="l62.7">   const char16_t *formatStrings[] = {</span>
<a href="#l62.8"></a><span id="l62.8">     count1String.get(),</span>
<a href="#l62.9"></a><span id="l62.9">     count2String.get()</span>
<a href="#l62.10"></a><span id="l62.10">   };</span>
<a href="#l62.11"></a><span id="l62.11"> </span>
<a href="#l62.12"></a><span id="l62.12" class="difflineminus">-  return mLocalBundle-&gt;FormatStringFromName(stringName.get(),</span>
<a href="#l62.13"></a><span id="l62.13" class="difflineplus">+  return mLocalBundle-&gt;FormatStringFromName(NS_ConvertUTF16toUTF8(stringName).get(),</span>
<a href="#l62.14"></a><span id="l62.14">                                             formatStrings, 2,</span>
<a href="#l62.15"></a><span id="l62.15">                                             getter_Copies(resultString));</span>
<a href="#l62.16"></a><span id="l62.16"> }</span>
<a href="#l62.17"></a><span id="l62.17"> </span>
<a href="#l62.18"></a><span id="l62.18" class="difflineminus">-void nsPop3Protocol::UpdateStatus(const char16_t *aStatusName)</span>
<a href="#l62.19"></a><span id="l62.19" class="difflineplus">+void nsPop3Protocol::UpdateStatus(const char *aStatusName)</span>
<a href="#l62.20"></a><span id="l62.20"> {</span>
<a href="#l62.21"></a><span id="l62.21">   nsString statusMessage;</span>
<a href="#l62.22"></a><span id="l62.22" class="difflineminus">-  mLocalBundle-&gt;GetStringFromName(aStatusName,</span>
<a href="#l62.23"></a><span id="l62.23" class="difflineminus">-                                  getter_Copies(statusMessage));</span>
<a href="#l62.24"></a><span id="l62.24" class="difflineplus">+  mLocalBundle-&gt;GetStringFromName(aStatusName, getter_Copies(statusMessage));</span>
<a href="#l62.25"></a><span id="l62.25">   UpdateStatusWithString(statusMessage.get());</span>
<a href="#l62.26"></a><span id="l62.26"> }</span>
<a href="#l62.27"></a><span id="l62.27"> </span>
<a href="#l62.28"></a><span id="l62.28"> void nsPop3Protocol::UpdateStatusWithString(const char16_t *aStatusString)</span>
<a href="#l62.29"></a><span id="l62.29"> {</span>
<a href="#l62.30"></a><span id="l62.30">     if (mProgressEventSink)</span>
<a href="#l62.31"></a><span id="l62.31">     {</span>
<a href="#l62.32"></a><span id="l62.32">       mozilla::DebugOnly&lt;nsresult&gt; rv =</span>
<a href="#l62.33"></a><span id="l62.33" class="difflineat">@@ -887,29 +886,29 @@ NS_IMETHODIMP nsPop3Protocol::OnPromptSt</span>
<a href="#l62.34"></a><span id="l62.34">           // As we're async, calling ProcessProtocolState gets things going</span>
<a href="#l62.35"></a><span id="l62.35">           // again.</span>
<a href="#l62.36"></a><span id="l62.36">           ProcessProtocolState(nullptr, nullptr, 0, 0);</span>
<a href="#l62.37"></a><span id="l62.37">           return NS_OK;</span>
<a href="#l62.38"></a><span id="l62.38">         }</span>
<a href="#l62.39"></a><span id="l62.39">       }</span>
<a href="#l62.40"></a><span id="l62.40">     }</span>
<a href="#l62.41"></a><span id="l62.41">     mLocalBundle-&gt;FormatStringFromName(</span>
<a href="#l62.42"></a><span id="l62.42" class="difflineminus">-      u&quot;pop3PreviouslyEnteredPasswordIsInvalidPrompt&quot;,</span>
<a href="#l62.43"></a><span id="l62.43" class="difflineplus">+      &quot;pop3PreviouslyEnteredPasswordIsInvalidPrompt&quot;,</span>
<a href="#l62.44"></a><span id="l62.44">       passwordParams, 2, getter_Copies(passwordPrompt));</span>
<a href="#l62.45"></a><span id="l62.45">   }</span>
<a href="#l62.46"></a><span id="l62.46">   else</span>
<a href="#l62.47"></a><span id="l62.47">     // Otherwise this is the first time we've asked about the server's</span>
<a href="#l62.48"></a><span id="l62.48">     // password so show a first time prompt.</span>
<a href="#l62.49"></a><span id="l62.49">     mLocalBundle-&gt;FormatStringFromName(</span>
<a href="#l62.50"></a><span id="l62.50" class="difflineminus">-      u&quot;pop3EnterPasswordPrompt&quot;,</span>
<a href="#l62.51"></a><span id="l62.51" class="difflineplus">+      &quot;pop3EnterPasswordPrompt&quot;,</span>
<a href="#l62.52"></a><span id="l62.52">       passwordParams, 2, getter_Copies(passwordPrompt));</span>
<a href="#l62.53"></a><span id="l62.53"> </span>
<a href="#l62.54"></a><span id="l62.54">   nsString passwordTitle;</span>
<a href="#l62.55"></a><span id="l62.55">   mLocalBundle-&gt;GetStringFromName(</span>
<a href="#l62.56"></a><span id="l62.56" class="difflineminus">-    u&quot;pop3EnterPasswordPromptTitle&quot;,</span>
<a href="#l62.57"></a><span id="l62.57" class="difflineplus">+    &quot;pop3EnterPasswordPromptTitle&quot;,</span>
<a href="#l62.58"></a><span id="l62.58">     getter_Copies(passwordTitle));</span>
<a href="#l62.59"></a><span id="l62.59"> </span>
<a href="#l62.60"></a><span id="l62.60">   // Now go and get the password.</span>
<a href="#l62.61"></a><span id="l62.61">   if (!passwordPrompt.IsEmpty() &amp;&amp; !passwordTitle.IsEmpty())</span>
<a href="#l62.62"></a><span id="l62.62">     rv = server-&gt;GetPasswordWithUI(passwordPrompt, passwordTitle,</span>
<a href="#l62.63"></a><span id="l62.63">                                     msgWindow, passwordResult);</span>
<a href="#l62.64"></a><span id="l62.64">   ClearFlag(POP3_PASSWORD_FAILED|POP3_AUTH_FAILURE);</span>
<a href="#l62.65"></a><span id="l62.65"> </span>
<a href="#l62.66"></a><span id="l62.66" class="difflineat">@@ -1323,37 +1322,37 @@ nsPop3Protocol::Error(const char* err_co</span>
<a href="#l62.67"></a><span id="l62.67">     // so print out that error message!</span>
<a href="#l62.68"></a><span id="l62.68">     nsCOMPtr&lt;nsIMsgIncomingServer&gt; server = do_QueryInterface(m_pop3Server);</span>
<a href="#l62.69"></a><span id="l62.69">     nsString accountName;</span>
<a href="#l62.70"></a><span id="l62.70">     nsresult rv = server-&gt;GetPrettyName(accountName);</span>
<a href="#l62.71"></a><span id="l62.71">     NS_ENSURE_SUCCESS(rv, -1);</span>
<a href="#l62.72"></a><span id="l62.72">     const char16_t *titleParams[] = { accountName.get() };</span>
<a href="#l62.73"></a><span id="l62.73">     nsString dialogTitle;</span>
<a href="#l62.74"></a><span id="l62.74">     mLocalBundle-&gt;FormatStringFromName(</span>
<a href="#l62.75"></a><span id="l62.75" class="difflineminus">-      u&quot;pop3ErrorDialogTitle&quot;,</span>
<a href="#l62.76"></a><span id="l62.76" class="difflineplus">+      &quot;pop3ErrorDialogTitle&quot;,</span>
<a href="#l62.77"></a><span id="l62.77">       titleParams, 1, getter_Copies(dialogTitle));</span>
<a href="#l62.78"></a><span id="l62.78">     nsCOMPtr&lt;nsIMsgMailNewsUrl&gt; mailnewsUrl = do_QueryInterface(m_url, &amp;rv);</span>
<a href="#l62.79"></a><span id="l62.79">     // we handle &quot;pop3TmpDownloadError&quot; earlier...</span>
<a href="#l62.80"></a><span id="l62.80">     if (strcmp(err_code, &quot;pop3TmpDownloadError&quot;) &amp;&amp; NS_SUCCEEDED(rv))</span>
<a href="#l62.81"></a><span id="l62.81">     {</span>
<a href="#l62.82"></a><span id="l62.82">         nsCOMPtr&lt;nsIMsgWindow&gt; msgWindow;</span>
<a href="#l62.83"></a><span id="l62.83">         nsCOMPtr&lt;nsIPrompt&gt; dialog;</span>
<a href="#l62.84"></a><span id="l62.84">         rv = mailnewsUrl-&gt;GetMsgWindow(getter_AddRefs(msgWindow)); //it is ok to have null msgWindow, for example when biffing</span>
<a href="#l62.85"></a><span id="l62.85">         if (NS_SUCCEEDED(rv) &amp;&amp; msgWindow)</span>
<a href="#l62.86"></a><span id="l62.86">         {</span>
<a href="#l62.87"></a><span id="l62.87">             rv = msgWindow-&gt;GetPromptDialog(getter_AddRefs(dialog));</span>
<a href="#l62.88"></a><span id="l62.88">             if (NS_SUCCEEDED(rv))</span>
<a href="#l62.89"></a><span id="l62.89">             {</span>
<a href="#l62.90"></a><span id="l62.90">               nsString alertString;</span>
<a href="#l62.91"></a><span id="l62.91">               // Format the alert string if parameter list isn't empty</span>
<a href="#l62.92"></a><span id="l62.92">               if (params)</span>
<a href="#l62.93"></a><span id="l62.93" class="difflineminus">-                mLocalBundle-&gt;FormatStringFromName(NS_ConvertASCIItoUTF16(err_code).get(),</span>
<a href="#l62.94"></a><span id="l62.94" class="difflineplus">+                mLocalBundle-&gt;FormatStringFromName(err_code,</span>
<a href="#l62.95"></a><span id="l62.95">                                                    params, length, getter_Copies(alertString));</span>
<a href="#l62.96"></a><span id="l62.96">               else</span>
<a href="#l62.97"></a><span id="l62.97" class="difflineminus">-                mLocalBundle-&gt;GetStringFromName(NS_ConvertASCIItoUTF16(err_code).get(),</span>
<a href="#l62.98"></a><span id="l62.98" class="difflineplus">+                mLocalBundle-&gt;GetStringFromName(err_code,</span>
<a href="#l62.99"></a><span id="l62.99">                                                 getter_Copies(alertString));</span>
<a href="#l62.100"></a><span id="l62.100">               if (m_pop3ConData-&gt;command_succeeded)  //not a server error message</span>
<a href="#l62.101"></a><span id="l62.101">                 dialog-&gt;Alert(dialogTitle.get(), alertString.get());</span>
<a href="#l62.102"></a><span id="l62.102">               else</span>
<a href="#l62.103"></a><span id="l62.103">               {</span>
<a href="#l62.104"></a><span id="l62.104">                 nsString serverSaidPrefix;</span>
<a href="#l62.105"></a><span id="l62.105">                 nsCOMPtr&lt;nsIMsgIncomingServer&gt; server = do_QueryInterface(m_pop3Server);</span>
<a href="#l62.106"></a><span id="l62.106">                 nsCString hostName;</span>
<a href="#l62.107"></a><span id="l62.107" class="difflineat">@@ -1361,17 +1360,17 @@ nsPop3Protocol::Error(const char* err_co</span>
<a href="#l62.108"></a><span id="l62.108">                 if (server)</span>
<a href="#l62.109"></a><span id="l62.109">                   rv = server-&gt;GetRealHostName(hostName);</span>
<a href="#l62.110"></a><span id="l62.110">                 if (NS_SUCCEEDED(rv))</span>
<a href="#l62.111"></a><span id="l62.111">                 {</span>
<a href="#l62.112"></a><span id="l62.112">                   nsAutoString hostStr;</span>
<a href="#l62.113"></a><span id="l62.113">                   CopyASCIItoUTF16(hostName, hostStr);</span>
<a href="#l62.114"></a><span id="l62.114">                   const char16_t *params[] = { hostStr.get() };</span>
<a href="#l62.115"></a><span id="l62.115">                   mLocalBundle-&gt;FormatStringFromName(</span>
<a href="#l62.116"></a><span id="l62.116" class="difflineminus">-                    u&quot;pop3ServerSaid&quot;,</span>
<a href="#l62.117"></a><span id="l62.117" class="difflineplus">+                    &quot;pop3ServerSaid&quot;,</span>
<a href="#l62.118"></a><span id="l62.118">                     params, 1, getter_Copies(serverSaidPrefix));</span>
<a href="#l62.119"></a><span id="l62.119">                 }</span>
<a href="#l62.120"></a><span id="l62.120"> </span>
<a href="#l62.121"></a><span id="l62.121">                 nsAutoString message(alertString);</span>
<a href="#l62.122"></a><span id="l62.122">                 message.AppendLiteral(&quot; &quot;);</span>
<a href="#l62.123"></a><span id="l62.123">                 message.Append(serverSaidPrefix);</span>
<a href="#l62.124"></a><span id="l62.124">                 message.AppendLiteral(&quot; &quot;);</span>
<a href="#l62.125"></a><span id="l62.125">                 message.Append(NS_ConvertASCIItoUTF16(m_commandResponse));</span>
<a href="#l62.126"></a><span id="l62.126" class="difflineat">@@ -3510,17 +3509,17 @@ nsPop3Protocol::TopResponse(nsIInputStre</span>
<a href="#l62.127"></a><span id="l62.127">   So just go download the whole thing, and warn the user.</span>
<a href="#l62.128"></a><span id="l62.128"> </span>
<a href="#l62.129"></a><span id="l62.129">     Note that the progress bar will not be accurate in this case.</span>
<a href="#l62.130"></a><span id="l62.130">     Oops. #### */</span>
<a href="#l62.131"></a><span id="l62.131">     m_pop3ConData-&gt;truncating_cur_msg = false;</span>
<a href="#l62.132"></a><span id="l62.132"> </span>
<a href="#l62.133"></a><span id="l62.133">     nsString statusTemplate;</span>
<a href="#l62.134"></a><span id="l62.134">     mLocalBundle-&gt;GetStringFromName(</span>
<a href="#l62.135"></a><span id="l62.135" class="difflineminus">-      u&quot;pop3ServerDoesNotSupportTopCommand&quot;,</span>
<a href="#l62.136"></a><span id="l62.136" class="difflineplus">+      &quot;pop3ServerDoesNotSupportTopCommand&quot;,</span>
<a href="#l62.137"></a><span id="l62.137">       getter_Copies(statusTemplate));</span>
<a href="#l62.138"></a><span id="l62.138">     if (!statusTemplate.IsEmpty())</span>
<a href="#l62.139"></a><span id="l62.139">     {</span>
<a href="#l62.140"></a><span id="l62.140">       nsAutoCString hostName;</span>
<a href="#l62.141"></a><span id="l62.141">       char16_t * statusString = nullptr;</span>
<a href="#l62.142"></a><span id="l62.142">       m_url-&gt;GetHost(hostName);</span>
<a href="#l62.143"></a><span id="l62.143"> </span>
<a href="#l62.144"></a><span id="l62.144">       statusString = nsTextFormatter::smprintf(statusTemplate.get(), hostName.get());</span>
<a href="#l62.145"></a><span id="l62.145" class="difflineat">@@ -3888,17 +3887,17 @@ nsresult nsPop3Protocol::ProcessProtocol</span>
<a href="#l62.146"></a><span id="l62.146">       status = AuthNtlmResponse();</span>
<a href="#l62.147"></a><span id="l62.147">       break;</span>
<a href="#l62.148"></a><span id="l62.148"> </span>
<a href="#l62.149"></a><span id="l62.149">     case POP3_AUTH_GSSAPI:</span>
<a href="#l62.150"></a><span id="l62.150">       status = AuthGSSAPI();</span>
<a href="#l62.151"></a><span id="l62.151">       break;</span>
<a href="#l62.152"></a><span id="l62.152"> </span>
<a href="#l62.153"></a><span id="l62.153">     case POP3_AUTH_GSSAPI_FIRST:</span>
<a href="#l62.154"></a><span id="l62.154" class="difflineminus">-      UpdateStatus(u&quot;hostContact&quot;);</span>
<a href="#l62.155"></a><span id="l62.155" class="difflineplus">+      UpdateStatus(&quot;hostContact&quot;);</span>
<a href="#l62.156"></a><span id="l62.156">       status = AuthGSSAPIResponse(true);</span>
<a href="#l62.157"></a><span id="l62.157">       break;</span>
<a href="#l62.158"></a><span id="l62.158"> </span>
<a href="#l62.159"></a><span id="l62.159">     case POP3_AUTH_GSSAPI_STEP:</span>
<a href="#l62.160"></a><span id="l62.160">       status = AuthGSSAPIResponse(false);</span>
<a href="#l62.161"></a><span id="l62.161">       break;</span>
<a href="#l62.162"></a><span id="l62.162"> </span>
<a href="#l62.163"></a><span id="l62.163">     case POP3_SEND_USERNAME:</span>
<a href="#l62.164"></a><span id="l62.164" class="difflineat">@@ -3906,17 +3905,17 @@ nsresult nsPop3Protocol::ProcessProtocol</span>
<a href="#l62.165"></a><span id="l62.165">         status = -1;</span>
<a href="#l62.166"></a><span id="l62.166">       break;</span>
<a href="#l62.167"></a><span id="l62.167"> </span>
<a href="#l62.168"></a><span id="l62.168">     case POP3_OBTAIN_PASSWORD_BEFORE_USERNAME:</span>
<a href="#l62.169"></a><span id="l62.169">       status = -1;</span>
<a href="#l62.170"></a><span id="l62.170">       break;</span>
<a href="#l62.171"></a><span id="l62.171"> </span>
<a href="#l62.172"></a><span id="l62.172">     case POP3_FINISH_OBTAIN_PASSWORD_BEFORE_USERNAME:</span>
<a href="#l62.173"></a><span id="l62.173" class="difflineminus">-      UpdateStatus(u&quot;hostContact&quot;);</span>
<a href="#l62.174"></a><span id="l62.174" class="difflineplus">+      UpdateStatus(&quot;hostContact&quot;);</span>
<a href="#l62.175"></a><span id="l62.175">       status = SendUsername();</span>
<a href="#l62.176"></a><span id="l62.176">       break;</span>
<a href="#l62.177"></a><span id="l62.177"> </span>
<a href="#l62.178"></a><span id="l62.178">     case POP3_SEND_PASSWORD:</span>
<a href="#l62.179"></a><span id="l62.179">       if (NS_FAILED(StartGetAsyncPassword(POP3_OBTAIN_PASSWORD_BEFORE_PASSWORD)))</span>
<a href="#l62.180"></a><span id="l62.180">         status = -1;</span>
<a href="#l62.181"></a><span id="l62.181">       break;</span>
<a href="#l62.182"></a><span id="l62.182"> </span>
<a href="#l62.183"></a><span id="l62.183" class="difflineat">@@ -4014,17 +4013,17 @@ nsresult nsPop3Protocol::ProcessProtocol</span>
<a href="#l62.184"></a><span id="l62.184">         bug 54116), so instead we put the &quot;no new messages&quot; or</span>
<a href="#l62.185"></a><span id="l62.185">         &quot;retrieved x new messages&quot;</span>
<a href="#l62.186"></a><span id="l62.186">         in the status line.  Unfortunately, this tends to be running</span>
<a href="#l62.187"></a><span id="l62.187">         in a progress pane, so we try to get the real pane and</span>
<a href="#l62.188"></a><span id="l62.188">           show the message there. */</span>
<a href="#l62.189"></a><span id="l62.189"> </span>
<a href="#l62.190"></a><span id="l62.190">           if (m_totalDownloadSize &lt;= 0)</span>
<a href="#l62.191"></a><span id="l62.191">           {</span>
<a href="#l62.192"></a><span id="l62.192" class="difflineminus">-            UpdateStatus(u&quot;noNewMessages&quot;);</span>
<a href="#l62.193"></a><span id="l62.193" class="difflineplus">+            UpdateStatus(&quot;noNewMessages&quot;);</span>
<a href="#l62.194"></a><span id="l62.194">             /* There are no new messages.  */</span>
<a href="#l62.195"></a><span id="l62.195">           }</span>
<a href="#l62.196"></a><span id="l62.196">           else</span>
<a href="#l62.197"></a><span id="l62.197">           {</span>
<a href="#l62.198"></a><span id="l62.198">             nsString statusString;</span>
<a href="#l62.199"></a><span id="l62.199">             nsresult rv = FormatCounterString(NS_LITERAL_STRING(&quot;receivedMsgs&quot;),</span>
<a href="#l62.200"></a><span id="l62.200">                                               m_pop3ConData-&gt;real_new_counter - 1,</span>
<a href="#l62.201"></a><span id="l62.201">                                               m_pop3ConData-&gt;really_new_messages,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l63.1"></a><span id="l63.1" class="difflineminus">--- a/mailnews/local/src/nsPop3Protocol.h</span>
<a href="#l63.2"></a><span id="l63.2" class="difflineplus">+++ b/mailnews/local/src/nsPop3Protocol.h</span>
<a href="#l63.3"></a><span id="l63.3" class="difflineat">@@ -294,17 +294,17 @@ private:</span>
<a href="#l63.4"></a><span id="l63.4">   nsCString m_commandResponse;</span>
<a href="#l63.5"></a><span id="l63.5">   nsCString m_GSSAPICache;</span>
<a href="#l63.6"></a><span id="l63.6"> </span>
<a href="#l63.7"></a><span id="l63.7">   // Used for asynchronous password prompts to store the password temporarily.</span>
<a href="#l63.8"></a><span id="l63.8">   nsCString m_passwordResult;</span>
<a href="#l63.9"></a><span id="l63.9"> </span>
<a href="#l63.10"></a><span id="l63.10">   // progress state information</span>
<a href="#l63.11"></a><span id="l63.11">   void UpdateProgressPercent(int64_t totalDone, int64_t total);</span>
<a href="#l63.12"></a><span id="l63.12" class="difflineminus">-  void UpdateStatus(const char16_t *aStatusName);</span>
<a href="#l63.13"></a><span id="l63.13" class="difflineplus">+  void UpdateStatus(const char *aStatusName);</span>
<a href="#l63.14"></a><span id="l63.14">   void UpdateStatusWithString(const char16_t *aString);</span>
<a href="#l63.15"></a><span id="l63.15">   nsresult FormatCounterString(const nsString &amp;stringName,</span>
<a href="#l63.16"></a><span id="l63.16">                                uint32_t count1,</span>
<a href="#l63.17"></a><span id="l63.17">                                uint32_t count2,</span>
<a href="#l63.18"></a><span id="l63.18">                                nsString &amp;resultString);</span>
<a href="#l63.19"></a><span id="l63.19"> </span>
<a href="#l63.20"></a><span id="l63.20">   int32_t m_bytesInMsgReceived;</span>
<a href="#l63.21"></a><span id="l63.21">   int64_t m_totalFolderSize;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l64.1"></a><span id="l64.1" class="difflineminus">--- a/mailnews/local/src/nsPop3Service.cpp</span>
<a href="#l64.2"></a><span id="l64.2" class="difflineplus">+++ b/mailnews/local/src/nsPop3Service.cpp</span>
<a href="#l64.3"></a><span id="l64.3" class="difflineat">@@ -461,20 +461,20 @@ void nsPop3Service::AlertServerBusy(nsIM</span>
<a href="#l64.4"></a><span id="l64.4">   NS_ENSURE_SUCCESS_VOID(rv);</span>
<a href="#l64.5"></a><span id="l64.5">   rv = server-&gt;GetPrettyName(accountName);</span>
<a href="#l64.6"></a><span id="l64.6">   NS_ENSURE_SUCCESS_VOID(rv);</span>
<a href="#l64.7"></a><span id="l64.7"> </span>
<a href="#l64.8"></a><span id="l64.8">   const char16_t *params[] = { accountName.get() };</span>
<a href="#l64.9"></a><span id="l64.9">   nsString alertString;</span>
<a href="#l64.10"></a><span id="l64.10">   nsString dialogTitle;</span>
<a href="#l64.11"></a><span id="l64.11">   bundle-&gt;FormatStringFromName(</span>
<a href="#l64.12"></a><span id="l64.12" class="difflineminus">-    u&quot;pop3ServerBusy&quot;,</span>
<a href="#l64.13"></a><span id="l64.13" class="difflineplus">+    &quot;pop3ServerBusy&quot;,</span>
<a href="#l64.14"></a><span id="l64.14">     params, 1, getter_Copies(alertString));</span>
<a href="#l64.15"></a><span id="l64.15">   bundle-&gt;FormatStringFromName(</span>
<a href="#l64.16"></a><span id="l64.16" class="difflineminus">-    u&quot;pop3ErrorDialogTitle&quot;,</span>
<a href="#l64.17"></a><span id="l64.17" class="difflineplus">+    &quot;pop3ErrorDialogTitle&quot;,</span>
<a href="#l64.18"></a><span id="l64.18">     params, 1, getter_Copies(dialogTitle));</span>
<a href="#l64.19"></a><span id="l64.19">   if (!alertString.IsEmpty())</span>
<a href="#l64.20"></a><span id="l64.20">     dialog-&gt;Alert(dialogTitle.get(), alertString.get());</span>
<a href="#l64.21"></a><span id="l64.21"> }</span>
<a href="#l64.22"></a><span id="l64.22"> </span>
<a href="#l64.23"></a><span id="l64.23"> NS_IMETHODIMP nsPop3Service::NewChannel(nsIURI *aURI, nsIChannel **_retval)</span>
<a href="#l64.24"></a><span id="l64.24"> {</span>
<a href="#l64.25"></a><span id="l64.25">   return NewChannel2(aURI, nullptr, _retval);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l65.1"></a><span id="l65.1" class="difflineminus">--- a/mailnews/local/src/nsPop3Sink.cpp</span>
<a href="#l65.2"></a><span id="l65.2" class="difflineplus">+++ b/mailnews/local/src/nsPop3Sink.cpp</span>
<a href="#l65.3"></a><span id="l65.3" class="difflineat">@@ -763,17 +763,17 @@ nsresult nsPop3Sink::HandleTempDownloadF</span>
<a href="#l65.4"></a><span id="l65.4">   rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/localMsgs.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l65.5"></a><span id="l65.5">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l65.6"></a><span id="l65.6">   nsString fromStr, subjectStr, confirmString;</span>
<a href="#l65.7"></a><span id="l65.7"> </span>
<a href="#l65.8"></a><span id="l65.8">   m_newMailParser-&gt;m_newMsgHdr-&gt;GetMime2DecodedSubject(subjectStr);</span>
<a href="#l65.9"></a><span id="l65.9">   m_newMailParser-&gt;m_newMsgHdr-&gt;GetMime2DecodedAuthor(fromStr);</span>
<a href="#l65.10"></a><span id="l65.10">   const char16_t *params[] = { fromStr.get(), subjectStr.get() };</span>
<a href="#l65.11"></a><span id="l65.11">   bundle-&gt;FormatStringFromName(</span>
<a href="#l65.12"></a><span id="l65.12" class="difflineminus">-    u&quot;pop3TmpDownloadError&quot;,</span>
<a href="#l65.13"></a><span id="l65.13" class="difflineplus">+    &quot;pop3TmpDownloadError&quot;,</span>
<a href="#l65.14"></a><span id="l65.14">     params, 2, getter_Copies(confirmString));</span>
<a href="#l65.15"></a><span id="l65.15">   nsCOMPtr&lt;mozIDOMWindowProxy&gt; parentWindow;</span>
<a href="#l65.16"></a><span id="l65.16">   nsCOMPtr&lt;nsIPromptService&gt; promptService = do_GetService(NS_PROMPTSERVICE_CONTRACTID);</span>
<a href="#l65.17"></a><span id="l65.17">   nsCOMPtr&lt;nsIDocShell&gt; docShell;</span>
<a href="#l65.18"></a><span id="l65.18">   if (msgWindow)</span>
<a href="#l65.19"></a><span id="l65.19">   {</span>
<a href="#l65.20"></a><span id="l65.20">     (void) msgWindow-&gt;GetRootDocShell(getter_AddRefs(docShell));</span>
<a href="#l65.21"></a><span id="l65.21">     parentWindow = do_QueryInterface(docShell);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l66.1"></a><span id="l66.1" class="difflineminus">--- a/mailnews/mapi/mapihook/src/msgMapiHook.cpp</span>
<a href="#l66.2"></a><span id="l66.2" class="difflineplus">+++ b/mailnews/mapi/mapihook/src/msgMapiHook.cpp</span>
<a href="#l66.3"></a><span id="l66.3" class="difflineat">@@ -142,49 +142,44 @@ bool nsMapiHook::DisplayLoginDialog(bool</span>
<a href="#l66.4"></a><span id="l66.4">     nsCOMPtr&lt;nsIStringBundle&gt; brandBundle;</span>
<a href="#l66.5"></a><span id="l66.5">     rv = bundleService-&gt;CreateBundle(</span>
<a href="#l66.6"></a><span id="l66.6">                     &quot;chrome://branding/locale/brand.properties&quot;,</span>
<a href="#l66.7"></a><span id="l66.7">                     getter_AddRefs(brandBundle));</span>
<a href="#l66.8"></a><span id="l66.8">     if (NS_FAILED(rv)) return false;</span>
<a href="#l66.9"></a><span id="l66.9"> </span>
<a href="#l66.10"></a><span id="l66.10">     nsString brandName;</span>
<a href="#l66.11"></a><span id="l66.11">     rv = brandBundle-&gt;GetStringFromName(</span>
<a href="#l66.12"></a><span id="l66.12" class="difflineminus">-                       u&quot;brandFullName&quot;,</span>
<a href="#l66.13"></a><span id="l66.13" class="difflineplus">+                       &quot;brandFullName&quot;,</span>
<a href="#l66.14"></a><span id="l66.14">                        getter_Copies(brandName));</span>
<a href="#l66.15"></a><span id="l66.15">     if (NS_FAILED(rv)) return false;</span>
<a href="#l66.16"></a><span id="l66.16"> </span>
<a href="#l66.17"></a><span id="l66.17">     nsString loginTitle;</span>
<a href="#l66.18"></a><span id="l66.18">     const char16_t *brandStrings[] = { brandName.get() };</span>
<a href="#l66.19"></a><span id="l66.19" class="difflineminus">-    NS_NAMED_LITERAL_STRING(loginTitlePropertyTag, &quot;loginTitle&quot;);</span>
<a href="#l66.20"></a><span id="l66.20" class="difflineminus">-    const char16_t *dTitlePropertyTag = loginTitlePropertyTag.get();</span>
<a href="#l66.21"></a><span id="l66.21" class="difflineminus">-    rv = bundle-&gt;FormatStringFromName(dTitlePropertyTag, brandStrings, 1,</span>
<a href="#l66.22"></a><span id="l66.22" class="difflineplus">+    rv = bundle-&gt;FormatStringFromName(&quot;loginTitle&quot;, brandStrings, 1,</span>
<a href="#l66.23"></a><span id="l66.23">                                       getter_Copies(loginTitle));</span>
<a href="#l66.24"></a><span id="l66.24">     if (NS_FAILED(rv)) return false;</span>
<a href="#l66.25"></a><span id="l66.25"> </span>
<a href="#l66.26"></a><span id="l66.26">     if (aLogin)</span>
<a href="#l66.27"></a><span id="l66.27">     {</span>
<a href="#l66.28"></a><span id="l66.28">       nsString loginText;</span>
<a href="#l66.29"></a><span id="l66.29" class="difflineminus">-      rv = bundle-&gt;GetStringFromName(u&quot;loginTextwithName&quot;,</span>
<a href="#l66.30"></a><span id="l66.30" class="difflineplus">+      rv = bundle-&gt;GetStringFromName(&quot;loginTextwithName&quot;,</span>
<a href="#l66.31"></a><span id="l66.31">                                      getter_Copies(loginText));</span>
<a href="#l66.32"></a><span id="l66.32">       if (NS_FAILED(rv) || loginText.IsEmpty()) return false;</span>
<a href="#l66.33"></a><span id="l66.33"> </span>
<a href="#l66.34"></a><span id="l66.34">       bool dummyValue = false;</span>
<a href="#l66.35"></a><span id="l66.35">       rv = dlgService-&gt;PromptUsernameAndPassword(nullptr, loginTitle.get(),</span>
<a href="#l66.36"></a><span id="l66.36">                                                  loginText.get(), aUsername, aPassword,</span>
<a href="#l66.37"></a><span id="l66.37">                                                  nullptr, &amp;dummyValue, &amp;btnResult);</span>
<a href="#l66.38"></a><span id="l66.38">     }</span>
<a href="#l66.39"></a><span id="l66.39">     else</span>
<a href="#l66.40"></a><span id="l66.40">     {</span>
<a href="#l66.41"></a><span id="l66.41">       //nsString loginString;</span>
<a href="#l66.42"></a><span id="l66.42">       nsString loginText;</span>
<a href="#l66.43"></a><span id="l66.43">       const char16_t *userNameStrings[] = { *aUsername };</span>
<a href="#l66.44"></a><span id="l66.44" class="difflineminus">-</span>
<a href="#l66.45"></a><span id="l66.45" class="difflineminus">-      NS_NAMED_LITERAL_STRING(loginTextPropertyTag, &quot;loginText&quot;);</span>
<a href="#l66.46"></a><span id="l66.46" class="difflineminus">-      const char16_t *dpropertyTag = loginTextPropertyTag.get();</span>
<a href="#l66.47"></a><span id="l66.47" class="difflineminus">-      rv = bundle-&gt;FormatStringFromName(dpropertyTag, userNameStrings, 1,</span>
<a href="#l66.48"></a><span id="l66.48" class="difflineplus">+      rv = bundle-&gt;FormatStringFromName(&quot;loginText&quot;, userNameStrings, 1,</span>
<a href="#l66.49"></a><span id="l66.49">                                         getter_Copies(loginText));</span>
<a href="#l66.50"></a><span id="l66.50">       if (NS_FAILED(rv)) return false;</span>
<a href="#l66.51"></a><span id="l66.51"> </span>
<a href="#l66.52"></a><span id="l66.52">       bool dummyValue = false;</span>
<a href="#l66.53"></a><span id="l66.53">       rv = dlgService-&gt;PromptPassword(nullptr, loginTitle.get(), loginText.get(),</span>
<a href="#l66.54"></a><span id="l66.54">                                       aPassword, nullptr, &amp;dummyValue, &amp;btnResult);</span>
<a href="#l66.55"></a><span id="l66.55">     }</span>
<a href="#l66.56"></a><span id="l66.56">   }</span>
<a href="#l66.57"></a><span id="l66.57" class="difflineat">@@ -251,23 +246,23 @@ nsMapiHook::IsBlindSendAllowed()</span>
<a href="#l66.58"></a><span id="l66.58">     mozilla::services::GetStringBundleService();</span>
<a href="#l66.59"></a><span id="l66.59">   if (!bundleService) return false;</span>
<a href="#l66.60"></a><span id="l66.60"> </span>
<a href="#l66.61"></a><span id="l66.61">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l66.62"></a><span id="l66.62">   rv = bundleService-&gt;CreateBundle(MAPI_PROPERTIES_CHROME, getter_AddRefs(bundle));</span>
<a href="#l66.63"></a><span id="l66.63">   if (NS_FAILED(rv) || !bundle) return false;</span>
<a href="#l66.64"></a><span id="l66.64"> </span>
<a href="#l66.65"></a><span id="l66.65">   nsString warningMsg;</span>
<a href="#l66.66"></a><span id="l66.66" class="difflineminus">-  rv = bundle-&gt;GetStringFromName(u&quot;mapiBlindSendWarning&quot;,</span>
<a href="#l66.67"></a><span id="l66.67" class="difflineminus">-                                      getter_Copies(warningMsg));</span>
<a href="#l66.68"></a><span id="l66.68" class="difflineplus">+  rv = bundle-&gt;GetStringFromName(&quot;mapiBlindSendWarning&quot;,</span>
<a href="#l66.69"></a><span id="l66.69" class="difflineplus">+                                 getter_Copies(warningMsg));</span>
<a href="#l66.70"></a><span id="l66.70">   if (NS_FAILED(rv)) return false;</span>
<a href="#l66.71"></a><span id="l66.71"> </span>
<a href="#l66.72"></a><span id="l66.72">   nsString dontShowAgainMessage;</span>
<a href="#l66.73"></a><span id="l66.73" class="difflineminus">-  rv = bundle-&gt;GetStringFromName(u&quot;mapiBlindSendDontShowAgain&quot;,</span>
<a href="#l66.74"></a><span id="l66.74" class="difflineminus">-                                      getter_Copies(dontShowAgainMessage));</span>
<a href="#l66.75"></a><span id="l66.75" class="difflineplus">+  rv = bundle-&gt;GetStringFromName(&quot;mapiBlindSendDontShowAgain&quot;,</span>
<a href="#l66.76"></a><span id="l66.76" class="difflineplus">+                                 getter_Copies(dontShowAgainMessage));</span>
<a href="#l66.77"></a><span id="l66.77">   if (NS_FAILED(rv)) return false;</span>
<a href="#l66.78"></a><span id="l66.78"> </span>
<a href="#l66.79"></a><span id="l66.79">   nsCOMPtr&lt;nsIPromptService&gt; dlgService(do_GetService(NS_PROMPTSERVICE_CONTRACTID, &amp;rv));</span>
<a href="#l66.80"></a><span id="l66.80">   if (NS_FAILED(rv) || !dlgService) return false;</span>
<a href="#l66.81"></a><span id="l66.81"> </span>
<a href="#l66.82"></a><span id="l66.82">   bool continueToWarn = true;</span>
<a href="#l66.83"></a><span id="l66.83">   bool okayToContinue = false;</span>
<a href="#l66.84"></a><span id="l66.84">   dlgService-&gt;ConfirmCheck(nullptr, nullptr, warningMsg.get(), dontShowAgainMessage.get(), &amp;continueToWarn, &amp;okayToContinue);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l67.1"></a><span id="l67.1" class="difflineminus">--- a/mailnews/mime/cthandlers/pgpmime/nsPgpMimeProxy.cpp</span>
<a href="#l67.2"></a><span id="l67.2" class="difflineplus">+++ b/mailnews/mime/cthandlers/pgpmime/nsPgpMimeProxy.cpp</span>
<a href="#l67.3"></a><span id="l67.3" class="difflineat">@@ -53,17 +53,17 @@ static void MimePgpe_free (void *);</span>
<a href="#l67.4"></a><span id="l67.4"> </span>
<a href="#l67.5"></a><span id="l67.5"> /* Returns a string describing the location of the part (like &quot;2.5.3&quot;).</span>
<a href="#l67.6"></a><span id="l67.6">    This is not a full URL, just a part-number.</span>
<a href="#l67.7"></a><span id="l67.7">  */</span>
<a href="#l67.8"></a><span id="l67.8"> static nsCString determineMimePart(MimeObject* obj);</span>
<a href="#l67.9"></a><span id="l67.9"> </span>
<a href="#l67.10"></a><span id="l67.10"> </span>
<a href="#l67.11"></a><span id="l67.11"> #define PGPMIME_PROPERTIES_URL        &quot;chrome://messenger/locale/pgpmime.properties&quot;</span>
<a href="#l67.12"></a><span id="l67.12" class="difflineminus">-#define PGPMIME_STR_NOT_SUPPORTED_ID  u&quot;pgpMimeNeedsAddon&quot;</span>
<a href="#l67.13"></a><span id="l67.13" class="difflineplus">+#define PGPMIME_STR_NOT_SUPPORTED_ID  &quot;pgpMimeNeedsAddon&quot;</span>
<a href="#l67.14"></a><span id="l67.14"> #define PGPMIME_URL_PREF              &quot;mail.pgpmime.addon_url&quot;</span>
<a href="#l67.15"></a><span id="l67.15"> </span>
<a href="#l67.16"></a><span id="l67.16"> static void PgpMimeGetNeedsAddonString(nsCString &amp;aResult)</span>
<a href="#l67.17"></a><span id="l67.17"> {</span>
<a href="#l67.18"></a><span id="l67.18">   aResult.AssignLiteral(&quot;???&quot;);</span>
<a href="#l67.19"></a><span id="l67.19"> </span>
<a href="#l67.20"></a><span id="l67.20">   nsCOMPtr&lt;nsIStringBundleService&gt; stringBundleService =</span>
<a href="#l67.21"></a><span id="l67.21">     mozilla::services::GetStringBundleService();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l68.1"></a><span id="l68.1" class="difflineminus">--- a/mailnews/mime/emitters/nsMimeBaseEmitter.cpp</span>
<a href="#l68.2"></a><span id="l68.2" class="difflineplus">+++ b/mailnews/mime/emitters/nsMimeBaseEmitter.cpp</span>
<a href="#l68.3"></a><span id="l68.3" class="difflineat">@@ -203,17 +203,17 @@ nsMimeBaseEmitter::MimeGetStringByName(c</span>
<a href="#l68.4"></a><span id="l68.4">       res = sBundleService-&gt;CreateBundle(propertyURL, getter_AddRefs(m_headerStringBundle));</span>
<a href="#l68.5"></a><span id="l68.5">     }</span>
<a href="#l68.6"></a><span id="l68.6">   }</span>
<a href="#l68.7"></a><span id="l68.7"> </span>
<a href="#l68.8"></a><span id="l68.8">   if (m_headerStringBundle)</span>
<a href="#l68.9"></a><span id="l68.9">   {</span>
<a href="#l68.10"></a><span id="l68.10">     nsString val;</span>
<a href="#l68.11"></a><span id="l68.11"> </span>
<a href="#l68.12"></a><span id="l68.12" class="difflineminus">-    res = m_headerStringBundle-&gt;GetStringFromName(NS_ConvertASCIItoUTF16(aHeaderName).get(),</span>
<a href="#l68.13"></a><span id="l68.13" class="difflineplus">+    res = m_headerStringBundle-&gt;GetStringFromName(aHeaderName,</span>
<a href="#l68.14"></a><span id="l68.14">                                                   getter_Copies(val));</span>
<a href="#l68.15"></a><span id="l68.15"> </span>
<a href="#l68.16"></a><span id="l68.16">     if (NS_FAILED(res))</span>
<a href="#l68.17"></a><span id="l68.17">       return nullptr;</span>
<a href="#l68.18"></a><span id="l68.18"> </span>
<a href="#l68.19"></a><span id="l68.19">     // Here we need to return a new copy of the string</span>
<a href="#l68.20"></a><span id="l68.20">     // This returns a UTF-8 string so the caller needs to perform a conversion</span>
<a href="#l68.21"></a><span id="l68.21">     // if this is used as UCS-2 (e.g. cannot do nsString(utfStr);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l69.1"></a><span id="l69.1" class="difflineminus">--- a/mailnews/mime/emitters/nsMimeHtmlEmitter.cpp</span>
<a href="#l69.2"></a><span id="l69.2" class="difflineplus">+++ b/mailnews/mime/emitters/nsMimeHtmlEmitter.cpp</span>
<a href="#l69.3"></a><span id="l69.3" class="difflineat">@@ -433,17 +433,17 @@ nsMimeHtmlDisplayEmitter::StartAttachmen</span>
<a href="#l69.4"></a><span id="l69.4">       NS_ENSURE_TRUE(bundleSvc, NS_ERROR_UNEXPECTED);</span>
<a href="#l69.5"></a><span id="l69.5"> </span>
<a href="#l69.6"></a><span id="l69.6">       nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l69.7"></a><span id="l69.7">       rv = bundleSvc-&gt;CreateBundle(&quot;chrome://messenger/locale/messenger.properties&quot;,</span>
<a href="#l69.8"></a><span id="l69.8">                                    getter_AddRefs(bundle));</span>
<a href="#l69.9"></a><span id="l69.9">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l69.10"></a><span id="l69.10"> </span>
<a href="#l69.11"></a><span id="l69.11">       nsString attachmentsHeader;</span>
<a href="#l69.12"></a><span id="l69.12" class="difflineminus">-      bundle-&gt;GetStringFromName(u&quot;attachmentsPrintHeader&quot;,</span>
<a href="#l69.13"></a><span id="l69.13" class="difflineplus">+      bundle-&gt;GetStringFromName(&quot;attachmentsPrintHeader&quot;,</span>
<a href="#l69.14"></a><span id="l69.14">                                 getter_Copies(attachmentsHeader)); </span>
<a href="#l69.15"></a><span id="l69.15"> </span>
<a href="#l69.16"></a><span id="l69.16">       UtilityWrite(&quot;&lt;legend class=\&quot;mimeAttachmentHeaderName\&quot;&gt;&quot;);</span>
<a href="#l69.17"></a><span id="l69.17">       nsCString escapedName;</span>
<a href="#l69.18"></a><span id="l69.18">       escapedName.Adopt(MsgEscapeHTML(NS_ConvertUTF16toUTF8(attachmentsHeader).get()));</span>
<a href="#l69.19"></a><span id="l69.19">       UtilityWrite(escapedName.get());</span>
<a href="#l69.20"></a><span id="l69.20">       UtilityWrite(&quot;&lt;/legend&gt;&quot;);</span>
<a href="#l69.21"></a><span id="l69.21">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l70.1"></a><span id="l70.1" class="difflineminus">--- a/mailnews/mime/src/mimemoz2.cpp</span>
<a href="#l70.2"></a><span id="l70.2" class="difflineplus">+++ b/mailnews/mime/src/mimemoz2.cpp</span>
<a href="#l70.3"></a><span id="l70.3" class="difflineat">@@ -1921,17 +1921,17 @@ MimeGetStringByName(const char16_t *stri</span>
<a href="#l70.4"></a><span id="l70.4">   nsCOMPtr&lt;nsIStringBundleService&gt; stringBundleService =</span>
<a href="#l70.5"></a><span id="l70.5">     do_GetService(NS_STRINGBUNDLE_CONTRACTID);</span>
<a href="#l70.6"></a><span id="l70.6"> </span>
<a href="#l70.7"></a><span id="l70.7">   nsCOMPtr&lt;nsIStringBundle&gt; stringBundle;</span>
<a href="#l70.8"></a><span id="l70.8">   stringBundleService-&gt;CreateBundle(MIME_URL, getter_AddRefs(stringBundle));</span>
<a href="#l70.9"></a><span id="l70.9">   if (stringBundle)</span>
<a href="#l70.10"></a><span id="l70.10">   {</span>
<a href="#l70.11"></a><span id="l70.11">     nsString v;</span>
<a href="#l70.12"></a><span id="l70.12" class="difflineminus">-    if (NS_SUCCEEDED(stringBundle-&gt;GetStringFromName(stringName, getter_Copies(v))))</span>
<a href="#l70.13"></a><span id="l70.13" class="difflineplus">+    if (NS_SUCCEEDED(stringBundle-&gt;GetStringFromName(NS_ConvertUTF16toUTF8(stringName).get(), getter_Copies(v))))</span>
<a href="#l70.14"></a><span id="l70.14">       return ToNewUTF8String(v);</span>
<a href="#l70.15"></a><span id="l70.15">   }</span>
<a href="#l70.16"></a><span id="l70.16"> </span>
<a href="#l70.17"></a><span id="l70.17">   return strdup(&quot;???&quot;);</span>
<a href="#l70.18"></a><span id="l70.18"> }</span>
<a href="#l70.19"></a><span id="l70.19"> </span>
<a href="#l70.20"></a><span id="l70.20"> void</span>
<a href="#l70.21"></a><span id="l70.21"> ResetChannelCharset(MimeObject *obj)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l71.1"></a><span id="l71.1" class="difflineminus">--- a/mailnews/news/src/nsNNTPNewsgroupList.cpp</span>
<a href="#l71.2"></a><span id="l71.2" class="difflineplus">+++ b/mailnews/news/src/nsNNTPNewsgroupList.cpp</span>
<a href="#l71.3"></a><span id="l71.3" class="difflineat">@@ -312,17 +312,17 @@ nsNNTPNewsgroupList::GetRangeOfArtsToDow</span>
<a href="#l71.4"></a><span id="l71.4">     nsCOMPtr&lt;nsIStringBundleService&gt; bundleService =</span>
<a href="#l71.5"></a><span id="l71.5">       mozilla::services::GetStringBundleService();</span>
<a href="#l71.6"></a><span id="l71.6">     NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l71.7"></a><span id="l71.7"> </span>
<a href="#l71.8"></a><span id="l71.8">     nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l71.9"></a><span id="l71.9">     rv = bundleService-&gt;CreateBundle(NEWS_MSGS_URL, getter_AddRefs(bundle));</span>
<a href="#l71.10"></a><span id="l71.10">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l71.11"></a><span id="l71.11"> </span>
<a href="#l71.12"></a><span id="l71.12" class="difflineminus">-    rv = bundle-&gt;GetStringFromName(u&quot;noNewMessages&quot;, getter_Copies(statusString));</span>
<a href="#l71.13"></a><span id="l71.13" class="difflineplus">+    rv = bundle-&gt;GetStringFromName(&quot;noNewMessages&quot;, getter_Copies(statusString));</span>
<a href="#l71.14"></a><span id="l71.14">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l71.15"></a><span id="l71.15"> </span>
<a href="#l71.16"></a><span id="l71.16">     SetProgressStatus(statusString.get());</span>
<a href="#l71.17"></a><span id="l71.17">   }</span>
<a href="#l71.18"></a><span id="l71.18"> </span>
<a href="#l71.19"></a><span id="l71.19">   if (maxextra &lt;= 0 || last_possible &lt; first_possible || last_possible &lt; 1)</span>
<a href="#l71.20"></a><span id="l71.20">   {</span>
<a href="#l71.21"></a><span id="l71.21">     *status=0;</span>
<a href="#l71.22"></a><span id="l71.22" class="difflineat">@@ -881,17 +881,17 @@ nsNNTPNewsgroupList::FinishXOVERLINE(int</span>
<a href="#l71.23"></a><span id="l71.23">         mozilla::services::GetStringBundleService();</span>
<a href="#l71.24"></a><span id="l71.24">       NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l71.25"></a><span id="l71.25"> </span>
<a href="#l71.26"></a><span id="l71.26">       nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l71.27"></a><span id="l71.27">       rv = bundleService-&gt;CreateBundle(NEWS_MSGS_URL, getter_AddRefs(bundle));</span>
<a href="#l71.28"></a><span id="l71.28">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l71.29"></a><span id="l71.29"> </span>
<a href="#l71.30"></a><span id="l71.30">       const char16_t *formatStrings[2] = { firstStr.get(), lastStr.get() };</span>
<a href="#l71.31"></a><span id="l71.31" class="difflineminus">-      rv = bundle-&gt;FormatStringFromName(u&quot;downloadingArticles&quot;, formatStrings, 2, getter_Copies(statusString));</span>
<a href="#l71.32"></a><span id="l71.32" class="difflineplus">+      rv = bundle-&gt;FormatStringFromName(&quot;downloadingArticles&quot;, formatStrings, 2, getter_Copies(statusString));</span>
<a href="#l71.33"></a><span id="l71.33">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l71.34"></a><span id="l71.34"> </span>
<a href="#l71.35"></a><span id="l71.35">       SetProgressStatus(statusString.get());</span>
<a href="#l71.36"></a><span id="l71.36">     }</span>
<a href="#l71.37"></a><span id="l71.37">   }</span>
<a href="#l71.38"></a><span id="l71.38"> </span>
<a href="#l71.39"></a><span id="l71.39">   if (newstatus)</span>
<a href="#l71.40"></a><span id="l71.40">     *newstatus=0;</span>
<a href="#l71.41"></a><span id="l71.41" class="difflineat">@@ -1248,17 +1248,17 @@ nsNNTPNewsgroupList::SetProgressStatus(c</span>
<a href="#l71.42"></a><span id="l71.42">       nsString statusMessage;</span>
<a href="#l71.43"></a><span id="l71.43">       nsCOMPtr&lt;nsIStringBundleService&gt; sbs =</span>
<a href="#l71.44"></a><span id="l71.44">         mozilla::services::GetStringBundleService();</span>
<a href="#l71.45"></a><span id="l71.45">       nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l71.46"></a><span id="l71.46">       rv = sbs-&gt;CreateBundle(MSGS_URL,</span>
<a href="#l71.47"></a><span id="l71.47">                              getter_AddRefs(bundle));</span>
<a href="#l71.48"></a><span id="l71.48">       NS_ENSURE_SUCCESS_VOID(rv);</span>
<a href="#l71.49"></a><span id="l71.49">       const char16_t *params[] = { accountName.get(), aMessage };</span>
<a href="#l71.50"></a><span id="l71.50" class="difflineminus">-      bundle-&gt;FormatStringFromName(u&quot;statusMessage&quot;,</span>
<a href="#l71.51"></a><span id="l71.51" class="difflineplus">+      bundle-&gt;FormatStringFromName(&quot;statusMessage&quot;,</span>
<a href="#l71.52"></a><span id="l71.52">                                    params, 2, getter_Copies(statusMessage));</span>
<a href="#l71.53"></a><span id="l71.53"> </span>
<a href="#l71.54"></a><span id="l71.54">       feedback-&gt;ShowStatusString(statusMessage);</span>
<a href="#l71.55"></a><span id="l71.55">     }</span>
<a href="#l71.56"></a><span id="l71.56">   }</span>
<a href="#l71.57"></a><span id="l71.57"> }</span>
<a href="#l71.58"></a><span id="l71.58"> </span>
<a href="#l71.59"></a><span id="l71.59"> void</span>
<a href="#l71.60"></a><span id="l71.60" class="difflineat">@@ -1290,24 +1290,24 @@ nsNNTPNewsgroupList::UpdateStatus(bool f</span>
<a href="#l71.61"></a><span id="l71.61">   if (!NS_SUCCEEDED(rv))</span>
<a href="#l71.62"></a><span id="l71.62">     return;</span>
<a href="#l71.63"></a><span id="l71.63"> </span>
<a href="#l71.64"></a><span id="l71.64">   if (filtering)</span>
<a href="#l71.65"></a><span id="l71.65">   {</span>
<a href="#l71.66"></a><span id="l71.66">     NS_ConvertUTF8toUTF16 header(m_filterHeaders[m_currentXHDRIndex]);</span>
<a href="#l71.67"></a><span id="l71.67">     const char16_t *formatStrings[4] = { header.get(),</span>
<a href="#l71.68"></a><span id="l71.68">       numDownloadedStr.get(), totalToDownloadStr.get(), newsgroupName.get() };</span>
<a href="#l71.69"></a><span id="l71.69" class="difflineminus">-    rv = bundle-&gt;FormatStringFromName(u&quot;newNewsgroupFilteringHeaders&quot;,</span>
<a href="#l71.70"></a><span id="l71.70" class="difflineplus">+    rv = bundle-&gt;FormatStringFromName(&quot;newNewsgroupFilteringHeaders&quot;,</span>
<a href="#l71.71"></a><span id="l71.71">       formatStrings, 4, getter_Copies(statusString));</span>
<a href="#l71.72"></a><span id="l71.72">   }</span>
<a href="#l71.73"></a><span id="l71.73">   else</span>
<a href="#l71.74"></a><span id="l71.74">   {</span>
<a href="#l71.75"></a><span id="l71.75">     const char16_t *formatStrings[3] = { numDownloadedStr.get(),</span>
<a href="#l71.76"></a><span id="l71.76">       totalToDownloadStr.get(), newsgroupName.get() };</span>
<a href="#l71.77"></a><span id="l71.77" class="difflineminus">-    rv = bundle-&gt;FormatStringFromName(u&quot;newNewsgroupHeaders&quot;,</span>
<a href="#l71.78"></a><span id="l71.78" class="difflineplus">+    rv = bundle-&gt;FormatStringFromName(&quot;newNewsgroupHeaders&quot;,</span>
<a href="#l71.79"></a><span id="l71.79">       formatStrings, 3, getter_Copies(statusString));</span>
<a href="#l71.80"></a><span id="l71.80">   }</span>
<a href="#l71.81"></a><span id="l71.81">   if (!NS_SUCCEEDED(rv))</span>
<a href="#l71.82"></a><span id="l71.82">     return;</span>
<a href="#l71.83"></a><span id="l71.83"> </span>
<a href="#l71.84"></a><span id="l71.84">   SetProgressStatus(statusString.get());</span>
<a href="#l71.85"></a><span id="l71.85">   m_lastStatusUpdate = PR_Now();</span>
<a href="#l71.86"></a><span id="l71.86"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l72.1"></a><span id="l72.1" class="difflineminus">--- a/mailnews/news/src/nsNNTPProtocol.cpp</span>
<a href="#l72.2"></a><span id="l72.2" class="difflineplus">+++ b/mailnews/news/src/nsNNTPProtocol.cpp</span>
<a href="#l72.3"></a><span id="l72.3" class="difflineat">@@ -1014,17 +1014,17 @@ nsresult nsNNTPProtocol::LoadUrl(nsIURI </span>
<a href="#l72.4"></a><span id="l72.4">       nsAutoString unescapedName;</span>
<a href="#l72.5"></a><span id="l72.5">       rv = NS_MsgDecodeUnescapeURLPath(group, unescapedName);</span>
<a href="#l72.6"></a><span id="l72.6">       NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l72.7"></a><span id="l72.7"> </span>
<a href="#l72.8"></a><span id="l72.8">       bundleService-&gt;CreateBundle(NEWS_MSGS_URL, getter_AddRefs(bundle));</span>
<a href="#l72.9"></a><span id="l72.9">       const char16_t *formatStrings[1] = { unescapedName.get() };</span>
<a href="#l72.10"></a><span id="l72.10"> </span>
<a href="#l72.11"></a><span id="l72.11">       rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l72.12"></a><span id="l72.12" class="difflineminus">-        u&quot;autoSubscribeText&quot;, formatStrings, 1,</span>
<a href="#l72.13"></a><span id="l72.13" class="difflineplus">+        &quot;autoSubscribeText&quot;, formatStrings, 1,</span>
<a href="#l72.14"></a><span id="l72.14">         getter_Copies(confirmText));</span>
<a href="#l72.15"></a><span id="l72.15">       NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l72.16"></a><span id="l72.16"> </span>
<a href="#l72.17"></a><span id="l72.17">       bool confirmResult = false;</span>
<a href="#l72.18"></a><span id="l72.18">       rv = dialog-&gt;Confirm(nullptr, confirmText.get(), &amp;confirmResult);</span>
<a href="#l72.19"></a><span id="l72.19">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l72.20"></a><span id="l72.20"> </span>
<a href="#l72.21"></a><span id="l72.21">       if (confirmResult)</span>
<a href="#l72.22"></a><span id="l72.22" class="difflineat">@@ -2806,17 +2806,17 @@ nsresult nsNNTPProtocol::ReadNewsList(ns</span>
<a href="#l72.23"></a><span id="l72.23">       char rate_buf[RATE_STR_BUF_LEN];</span>
<a href="#l72.24"></a><span id="l72.24">       PR_snprintf(rate_buf,RATE_STR_BUF_LEN,&quot;%.1f&quot;, rate);</span>
<a href="#l72.25"></a><span id="l72.25"> </span>
<a href="#l72.26"></a><span id="l72.26">       nsAutoString numGroupsStr;</span>
<a href="#l72.27"></a><span id="l72.27">       numGroupsStr.AppendInt(mNumGroupsListed);</span>
<a href="#l72.28"></a><span id="l72.28">       NS_ConvertASCIItoUTF16 rateStr(rate_buf);</span>
<a href="#l72.29"></a><span id="l72.29"> </span>
<a href="#l72.30"></a><span id="l72.30">       const char16_t *formatStrings[3] = { numGroupsStr.get(), bytesStr.get(), rateStr.get()};</span>
<a href="#l72.31"></a><span id="l72.31" class="difflineminus">-      rv = bundle-&gt;FormatStringFromName(u&quot;bytesReceived&quot;,</span>
<a href="#l72.32"></a><span id="l72.32" class="difflineplus">+      rv = bundle-&gt;FormatStringFromName(&quot;bytesReceived&quot;,</span>
<a href="#l72.33"></a><span id="l72.33">         formatStrings, 3,</span>
<a href="#l72.34"></a><span id="l72.34">         getter_Copies(statusString));</span>
<a href="#l72.35"></a><span id="l72.35"> </span>
<a href="#l72.36"></a><span id="l72.36">       rv = msgStatusFeedback-&gt;ShowStatusString(statusString);</span>
<a href="#l72.37"></a><span id="l72.37">       if (NS_FAILED(rv)) {</span>
<a href="#l72.38"></a><span id="l72.38">         PR_Free(lineToFree);</span>
<a href="#l72.39"></a><span id="l72.39">         return rv;</span>
<a href="#l72.40"></a><span id="l72.40">       }</span>
<a href="#l72.41"></a><span id="l72.41" class="difflineat">@@ -3410,21 +3410,18 @@ nsresult nsNNTPProtocol::GetNewsStringBy</span>
<a href="#l72.42"></a><span id="l72.42">     NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l72.43"></a><span id="l72.43"> </span>
<a href="#l72.44"></a><span id="l72.44">     rv = bundleService-&gt;CreateBundle(NEWS_MSGS_URL, getter_AddRefs(m_stringBundle));</span>
<a href="#l72.45"></a><span id="l72.45">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l72.46"></a><span id="l72.46">   }</span>
<a href="#l72.47"></a><span id="l72.47"> </span>
<a href="#l72.48"></a><span id="l72.48">   if (m_stringBundle)</span>
<a href="#l72.49"></a><span id="l72.49">   {</span>
<a href="#l72.50"></a><span id="l72.50" class="difflineminus">-    nsAutoString unicodeName;</span>
<a href="#l72.51"></a><span id="l72.51" class="difflineminus">-    CopyASCIItoUTF16(nsDependentCString(aName), unicodeName);</span>
<a href="#l72.52"></a><span id="l72.52" class="difflineminus">-</span>
<a href="#l72.53"></a><span id="l72.53">     char16_t *ptrv = nullptr;</span>
<a href="#l72.54"></a><span id="l72.54" class="difflineminus">-    rv = m_stringBundle-&gt;GetStringFromName(unicodeName.get(), &amp;ptrv);</span>
<a href="#l72.55"></a><span id="l72.55" class="difflineplus">+    rv = m_stringBundle-&gt;GetStringFromName(aName, &amp;ptrv);</span>
<a href="#l72.56"></a><span id="l72.56"> </span>
<a href="#l72.57"></a><span id="l72.57">     if (NS_FAILED(rv))</span>
<a href="#l72.58"></a><span id="l72.58">     {</span>
<a href="#l72.59"></a><span id="l72.59">       resultString.AssignLiteral(&quot;[StringName&quot;);</span>
<a href="#l72.60"></a><span id="l72.60">       resultString.Append(NS_ConvertASCIItoUTF16(aName));</span>
<a href="#l72.61"></a><span id="l72.61">       resultString.AppendLiteral(&quot;?]&quot;);</span>
<a href="#l72.62"></a><span id="l72.62">       *aString = ToNewUnicode(resultString);</span>
<a href="#l72.63"></a><span id="l72.63">     }</span>
<a href="#l72.64"></a><span id="l72.64" class="difflineat">@@ -3578,17 +3575,17 @@ nsresult nsNNTPProtocol::DoCancel()</span>
<a href="#l72.65"></a><span id="l72.65">   NS_ENSURE_TRUE(bundleService, NS_ERROR_OUT_OF_MEMORY);</span>
<a href="#l72.66"></a><span id="l72.66"> </span>
<a href="#l72.67"></a><span id="l72.67">   nsCOMPtr&lt;nsIStringBundle&gt; brandBundle;</span>
<a href="#l72.68"></a><span id="l72.68">   bundleService-&gt;CreateBundle(&quot;chrome://branding/locale/brand.properties&quot;,</span>
<a href="#l72.69"></a><span id="l72.69">                               getter_AddRefs(brandBundle));</span>
<a href="#l72.70"></a><span id="l72.70">   NS_ENSURE_TRUE(brandBundle, NS_ERROR_FAILURE);</span>
<a href="#l72.71"></a><span id="l72.71"> </span>
<a href="#l72.72"></a><span id="l72.72">   nsString brandFullName;</span>
<a href="#l72.73"></a><span id="l72.73" class="difflineminus">-  rv = brandBundle-&gt;GetStringFromName(u&quot;brandFullName&quot;,</span>
<a href="#l72.74"></a><span id="l72.74" class="difflineplus">+  rv = brandBundle-&gt;GetStringFromName(&quot;brandFullName&quot;,</span>
<a href="#l72.75"></a><span id="l72.75">                                       getter_Copies(brandFullName));</span>
<a href="#l72.76"></a><span id="l72.76">   NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l72.77"></a><span id="l72.77">   NS_ConvertUTF16toUTF8 appName(brandFullName);</span>
<a href="#l72.78"></a><span id="l72.78"> </span>
<a href="#l72.79"></a><span id="l72.79">   newsgroups = m_cancelNewsgroups;</span>
<a href="#l72.80"></a><span id="l72.80">   distribution = m_cancelDistribution;</span>
<a href="#l72.81"></a><span id="l72.81">   id = m_cancelID;</span>
<a href="#l72.82"></a><span id="l72.82">   nsCString oldFrom(m_cancelFromHdr);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l73.1"></a><span id="l73.1" class="difflineminus">--- a/mailnews/news/src/nsNewsDownloader.cpp</span>
<a href="#l73.2"></a><span id="l73.2" class="difflineplus">+++ b/mailnews/news/src/nsNewsDownloader.cpp</span>
<a href="#l73.3"></a><span id="l73.3" class="difflineat">@@ -192,17 +192,17 @@ bool nsNewsDownloader::GetNextHdrToRetri</span>
<a href="#l73.4"></a><span id="l73.4">     nsAutoString totalStr;</span>
<a href="#l73.5"></a><span id="l73.5">     totalStr.AppendInt(int(m_keysToDownload.Length()));</span>
<a href="#l73.6"></a><span id="l73.6">     nsString prettyName;</span>
<a href="#l73.7"></a><span id="l73.7">     nsString statusString;</span>
<a href="#l73.8"></a><span id="l73.8"> </span>
<a href="#l73.9"></a><span id="l73.9">     m_folder-&gt;GetPrettyName(prettyName);</span>
<a href="#l73.10"></a><span id="l73.10"> </span>
<a href="#l73.11"></a><span id="l73.11">     const char16_t *formatStrings[3] = { firstStr.get(), totalStr.get(), prettyName.get() };</span>
<a href="#l73.12"></a><span id="l73.12" class="difflineminus">-    rv = bundle-&gt;FormatStringFromName(u&quot;downloadingArticlesForOffline&quot;,</span>
<a href="#l73.13"></a><span id="l73.13" class="difflineplus">+    rv = bundle-&gt;FormatStringFromName(&quot;downloadingArticlesForOffline&quot;,</span>
<a href="#l73.14"></a><span id="l73.14">                                       formatStrings, 3, getter_Copies(statusString));</span>
<a href="#l73.15"></a><span id="l73.15">     NS_ENSURE_SUCCESS(rv, false);</span>
<a href="#l73.16"></a><span id="l73.16">     ShowProgress(statusString.get(), percent);</span>
<a href="#l73.17"></a><span id="l73.17">     return true;</span>
<a href="#l73.18"></a><span id="l73.18">   }</span>
<a href="#l73.19"></a><span id="l73.19">   NS_ASSERTION(false, &quot;shouldn't get here if we're not downloading from keys.&quot;);</span>
<a href="#l73.20"></a><span id="l73.20">   return false;  // shouldn't get here if we're not downloading from keys.</span>
<a href="#l73.21"></a><span id="l73.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l74.1"></a><span id="l74.1" class="difflineminus">--- a/mailnews/news/src/nsNewsFolder.cpp</span>
<a href="#l74.2"></a><span id="l74.2" class="difflineplus">+++ b/mailnews/news/src/nsNewsFolder.cpp</span>
<a href="#l74.3"></a><span id="l74.3" class="difflineat">@@ -1231,17 +1231,17 @@ nsMsgNewsFolder::GetAuthenticationCreden</span>
<a href="#l74.4"></a><span id="l74.4">       if (!dialog) return NS_ERROR_FAILURE;</span>
<a href="#l74.5"></a><span id="l74.5">     }</span>
<a href="#l74.6"></a><span id="l74.6"> </span>
<a href="#l74.7"></a><span id="l74.7">     NS_ASSERTION(dialog, &quot;We didn't get a net prompt&quot;);</span>
<a href="#l74.8"></a><span id="l74.8">     if (dialog)</span>
<a href="#l74.9"></a><span id="l74.9">     {</span>
<a href="#l74.10"></a><span id="l74.10">       // Format the prompt text strings</span>
<a href="#l74.11"></a><span id="l74.11">       nsString promptTitle, promptText;</span>
<a href="#l74.12"></a><span id="l74.12" class="difflineminus">-      bundle-&gt;GetStringFromName(u&quot;enterUserPassTitle&quot;,</span>
<a href="#l74.13"></a><span id="l74.13" class="difflineplus">+      bundle-&gt;GetStringFromName(&quot;enterUserPassTitle&quot;,</span>
<a href="#l74.14"></a><span id="l74.14">         getter_Copies(promptTitle));</span>
<a href="#l74.15"></a><span id="l74.15"> </span>
<a href="#l74.16"></a><span id="l74.16">       nsString serverName;</span>
<a href="#l74.17"></a><span id="l74.17">       nsCOMPtr&lt;nsIMsgIncomingServer&gt; server;</span>
<a href="#l74.18"></a><span id="l74.18">       rv = GetServer(getter_AddRefs(server));</span>
<a href="#l74.19"></a><span id="l74.19">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l74.20"></a><span id="l74.20"> </span>
<a href="#l74.21"></a><span id="l74.21">       server-&gt;GetPrettyName(serverName);</span>
<a href="#l74.22"></a><span id="l74.22" class="difflineat">@@ -1253,21 +1253,21 @@ nsMsgNewsFolder::GetAuthenticationCreden</span>
<a href="#l74.23"></a><span id="l74.23">       bool singleSignon = true;</span>
<a href="#l74.24"></a><span id="l74.24">       nntpServer-&gt;GetSingleSignon(&amp;singleSignon);</span>
<a href="#l74.25"></a><span id="l74.25"> </span>
<a href="#l74.26"></a><span id="l74.26">       const char16_t *params[2];</span>
<a href="#l74.27"></a><span id="l74.27">       params[0] = mName.get();</span>
<a href="#l74.28"></a><span id="l74.28">       params[1] = serverName.get();</span>
<a href="#l74.29"></a><span id="l74.29">       if (singleSignon)</span>
<a href="#l74.30"></a><span id="l74.30">         bundle-&gt;FormatStringFromName(</span>
<a href="#l74.31"></a><span id="l74.31" class="difflineminus">-          u&quot;enterUserPassServer&quot;,</span>
<a href="#l74.32"></a><span id="l74.32" class="difflineplus">+          &quot;enterUserPassServer&quot;,</span>
<a href="#l74.33"></a><span id="l74.33">           &amp;params[1], 1, getter_Copies(promptText));</span>
<a href="#l74.34"></a><span id="l74.34">       else</span>
<a href="#l74.35"></a><span id="l74.35">         bundle-&gt;FormatStringFromName(</span>
<a href="#l74.36"></a><span id="l74.36" class="difflineminus">-          u&quot;enterUserPassGroup&quot;,</span>
<a href="#l74.37"></a><span id="l74.37" class="difflineplus">+          &quot;enterUserPassGroup&quot;,</span>
<a href="#l74.38"></a><span id="l74.38">           params, 2, getter_Copies(promptText));</span>
<a href="#l74.39"></a><span id="l74.39"> </span>
<a href="#l74.40"></a><span id="l74.40">       // Fill the signon url for the dialog</span>
<a href="#l74.41"></a><span id="l74.41">       nsString signonURL;</span>
<a href="#l74.42"></a><span id="l74.42">       rv = CreateNewsgroupUrlForSignon(nullptr, signonURL);</span>
<a href="#l74.43"></a><span id="l74.43">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l74.44"></a><span id="l74.44"> </span>
<a href="#l74.45"></a><span id="l74.45">       // Prefill saved username/password</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l75.1"></a><span id="l75.1" class="difflineminus">--- a/mailnews/news/src/nsNntpIncomingServer.cpp</span>
<a href="#l75.2"></a><span id="l75.2" class="difflineplus">+++ b/mailnews/news/src/nsNntpIncomingServer.cpp</span>
<a href="#l75.3"></a><span id="l75.3" class="difflineat">@@ -1575,17 +1575,17 @@ nsNntpIncomingServer::GroupNotFound(nsIM</span>
<a href="#l75.4"></a><span id="l75.4">   NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l75.5"></a><span id="l75.5"> </span>
<a href="#l75.6"></a><span id="l75.6">   NS_ConvertUTF8toUTF16 hostStr(hostname);</span>
<a href="#l75.7"></a><span id="l75.7"> </span>
<a href="#l75.8"></a><span id="l75.8">   nsString groupName(aName);</span>
<a href="#l75.9"></a><span id="l75.9">   const char16_t *formatStrings[2] = { groupName.get(), hostStr.get() };</span>
<a href="#l75.10"></a><span id="l75.10">   nsString confirmText;</span>
<a href="#l75.11"></a><span id="l75.11">   rv = bundle-&gt;FormatStringFromName(</span>
<a href="#l75.12"></a><span id="l75.12" class="difflineminus">-                    u&quot;autoUnsubscribeText&quot;,</span>
<a href="#l75.13"></a><span id="l75.13" class="difflineplus">+                    &quot;autoUnsubscribeText&quot;,</span>
<a href="#l75.14"></a><span id="l75.14">                     formatStrings, 2,</span>
<a href="#l75.15"></a><span id="l75.15">                     getter_Copies(confirmText));</span>
<a href="#l75.16"></a><span id="l75.16">   NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l75.17"></a><span id="l75.17"> </span>
<a href="#l75.18"></a><span id="l75.18">   bool confirmResult = false;</span>
<a href="#l75.19"></a><span id="l75.19">   rv = prompt-&gt;Confirm(nullptr, confirmText.get(), &amp;confirmResult);</span>
<a href="#l75.20"></a><span id="l75.20">   NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l75.21"></a><span id="l75.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l76.1"></a><span id="l76.1" class="difflineminus">--- a/suite/shell/src/nsGNOMEShellService.cpp</span>
<a href="#l76.2"></a><span id="l76.2" class="difflineplus">+++ b/suite/shell/src/nsGNOMEShellService.cpp</span>
<a href="#l76.3"></a><span id="l76.3" class="difflineat">@@ -89,17 +89,17 @@ GetBrandName(nsACString&amp; aBrandName)</span>
<a href="#l76.4"></a><span id="l76.4">   nsCOMPtr&lt;nsIStringBundleService&gt; bundleService(do_GetService(&quot;@mozilla.org/intl/stringbundle;1&quot;, &amp;rv));</span>
<a href="#l76.5"></a><span id="l76.5">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l76.6"></a><span id="l76.6"> </span>
<a href="#l76.7"></a><span id="l76.7">   nsCOMPtr&lt;nsIStringBundle&gt; brandBundle;</span>
<a href="#l76.8"></a><span id="l76.8">   rv = bundleService-&gt;CreateBundle(BRAND_PROPERTIES, getter_AddRefs(brandBundle));</span>
<a href="#l76.9"></a><span id="l76.9">   NS_ENSURE_TRUE(brandBundle, rv);</span>
<a href="#l76.10"></a><span id="l76.10"> </span>
<a href="#l76.11"></a><span id="l76.11">   nsString brandName;</span>
<a href="#l76.12"></a><span id="l76.12" class="difflineminus">-  rv = brandBundle-&gt;GetStringFromName(u&quot;brandShortName&quot;,</span>
<a href="#l76.13"></a><span id="l76.13" class="difflineplus">+  rv = brandBundle-&gt;GetStringFromName(&quot;brandShortName&quot;,</span>
<a href="#l76.14"></a><span id="l76.14">                                       getter_Copies(brandName));</span>
<a href="#l76.15"></a><span id="l76.15">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l76.16"></a><span id="l76.16"> </span>
<a href="#l76.17"></a><span id="l76.17">   CopyUTF16toUTF8(brandName, aBrandName);</span>
<a href="#l76.18"></a><span id="l76.18">   return rv;</span>
<a href="#l76.19"></a><span id="l76.19"> }</span>
<a href="#l76.20"></a><span id="l76.20"> </span>
<a href="#l76.21"></a><span id="l76.21"> nsresult</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l77.1"></a><span id="l77.1" class="difflineminus">--- a/suite/shell/src/nsWindowsShellService.cpp</span>
<a href="#l77.2"></a><span id="l77.2" class="difflineplus">+++ b/suite/shell/src/nsWindowsShellService.cpp</span>
<a href="#l77.3"></a><span id="l77.3" class="difflineat">@@ -776,17 +776,17 @@ nsWindowsShellService::SetDesktopBackgro</span>
<a href="#l77.4"></a><span id="l77.4">   nsCOMPtr&lt;nsIStringBundle&gt; shellBundle;</span>
<a href="#l77.5"></a><span id="l77.5">   rv = bundleService-&gt;CreateBundle(SHELLSERVICE_PROPERTIES,</span>
<a href="#l77.6"></a><span id="l77.6">                                    getter_AddRefs(shellBundle));</span>
<a href="#l77.7"></a><span id="l77.7">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l77.8"></a><span id="l77.8"> </span>
<a href="#l77.9"></a><span id="l77.9">   // e.g. &quot;Desktop Background.bmp&quot;</span>
<a href="#l77.10"></a><span id="l77.10">   nsString fileLeafName;</span>
<a href="#l77.11"></a><span id="l77.11">   rv = shellBundle-&gt;GetStringFromName</span>
<a href="#l77.12"></a><span id="l77.12" class="difflineminus">-                      (u&quot;desktopBackgroundLeafNameWin&quot;,</span>
<a href="#l77.13"></a><span id="l77.13" class="difflineplus">+                      (&quot;desktopBackgroundLeafNameWin&quot;,</span>
<a href="#l77.14"></a><span id="l77.14">                        getter_Copies(fileLeafName));</span>
<a href="#l77.15"></a><span id="l77.15">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l77.16"></a><span id="l77.16"> </span>
<a href="#l77.17"></a><span id="l77.17">   // get the profile root directory</span>
<a href="#l77.18"></a><span id="l77.18">   nsCOMPtr&lt;nsIFile&gt; file;</span>
<a href="#l77.19"></a><span id="l77.19">   rv = NS_GetSpecialDirectory(NS_APP_APPLICATION_REGISTRY_DIR,</span>
<a href="#l77.20"></a><span id="l77.20">                               getter_AddRefs(file));</span>
<a href="#l77.21"></a><span id="l77.21">   NS_ENSURE_SUCCESS(rv, rv);</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

