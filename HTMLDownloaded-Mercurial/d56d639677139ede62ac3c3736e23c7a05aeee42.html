<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 20019:d56d639677139ede62ac3c3736e23c7a05aeee42</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ d56d639677139ede62ac3c3736e23c7a05aeee42" />
<meta property="og:url" content="/comm-central/rev/d56d639677139ede62ac3c3736e23c7a05aeee42" />
<meta property="og:description" content="Bug 1280898 - Set up eslint for calendar files - enable comma-dangle,comma-spacing,comma-style rules. r=MakeMyDay" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / d56d639677139ede62ac3c3736e23c7a05aeee42 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/d56d639677139ede62ac3c3736e23c7a05aeee42">shortlog</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/d56d639677139ede62ac3c3736e23c7a05aeee42">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42">files</a> |
changeset |
<a href="/comm-central/raw-rev/d56d639677139ede62ac3c3736e23c7a05aeee42">raw</a>  | <a href="/comm-central/archive/d56d639677139ede62ac3c3736e23c7a05aeee42.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">Bug 1280898</a> - Set up eslint for calendar files - enable comma-dangle,comma-spacing,comma-style rules. r=MakeMyDay
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#101;&#115;&#108;&#105;&#110;&#116;&#32;&#60;&#101;&#115;&#108;&#105;&#110;&#116;&#64;&#98;&#117;&#103;&#122;&#105;&#108;&#108;&#97;&#46;&#107;&#101;&#119;&#105;&#115;&#46;&#99;&#104;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 08 Jul 2016 11:16:09 +0200</td></tr>

<tr>
 <td>changeset 20019</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/d56d639677139ede62ac3c3736e23c7a05aeee42">d56d639677139ede62ac3c3736e23c7a05aeee42</a></td>
</tr>



<tr>
<td>parent 20018</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/236b9899c452443b01830bc85071c5a14c0f0ae4">236b9899c452443b01830bc85071c5a14c0f0ae4</a>
</td>
</tr>

<tr>
<td>child 20020</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/505ce0057efd730944a3b6e815d39177c6baf59f">505ce0057efd730944a3b6e815d39177c6baf59f</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=d56d639677139ede62ac3c3736e23c7a05aeee42">12288</a></td></tr>
<tr><td>push user</td><td>mozilla@kewis.ch</td></tr>
<tr><td>push date</td><td class="date age">Thu, 15 Sep 2016 22:48:47 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@d56d63967713 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=d56d639677139ede62ac3c3736e23c7a05aeee42">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=d56d639677139ede62ac3c3736e23c7a05aeee42&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=d56d639677139ede62ac3c3736e23c7a05aeee42&newProject=comm-central&newRevision=b1be8f5e02be13b1fb3ea3734c095e0e4f784b3a&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=d56d639677139ede62ac3c3736e23c7a05aeee42&newProject=comm-central&newRevision=b1be8f5e02be13b1fb3ea3734c095e0e4f784b3a&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=d56d639677139ede62ac3c3736e23c7a05aeee42&newProject=comm-central&newRevision=b1be8f5e02be13b1fb3ea3734c095e0e4f784b3a&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28MakeMyDay%29&revcount=50">MakeMyDay</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">1280898</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">Bug 1280898</a> - Set up eslint for calendar files - enable comma-dangle,comma-spacing,comma-style rules. r=MakeMyDay

MozReview-Commit-ID: DAJLtHZXaCk</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/.eslintrc">calendar/.eslintrc</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/.eslintrc">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/.eslintrc">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/.eslintrc">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/.eslintrc">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/.eslintrc">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/backend/icaljs/calDateTime.js">calendar/base/backend/icaljs/calDateTime.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/backend/icaljs/calDateTime.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/backend/icaljs/calDateTime.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/backend/icaljs/calDateTime.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/backend/icaljs/calDateTime.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/backend/icaljs/calDateTime.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-base-view.xml">calendar/base/content/calendar-base-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-base-view.xml">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-base-view.xml">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-base-view.xml">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-base-view.xml">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-base-view.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-chrome-startup.js">calendar/base/content/calendar-chrome-startup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-chrome-startup.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-chrome-startup.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-chrome-startup.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-chrome-startup.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-chrome-startup.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-month-view.xml">calendar/base/content/calendar-month-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-month-view.xml">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-month-view.xml">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-month-view.xml">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-month-view.xml">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-month-view.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-multiday-view.xml">calendar/base/content/calendar-multiday-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-multiday-view.xml">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-multiday-view.xml">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-multiday-view.xml">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-multiday-view.xml">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-multiday-view.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-statusbar.js">calendar/base/content/calendar-statusbar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-statusbar.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-statusbar.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-statusbar.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-statusbar.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-statusbar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-task-tree.xml">calendar/base/content/calendar-task-tree.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-task-tree.xml">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-task-tree.xml">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-task-tree.xml">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-task-tree.xml">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-task-tree.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-task-view.js">calendar/base/content/calendar-task-view.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-task-view.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-task-view.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-task-view.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-task-view.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-task-view.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-ui-utils.js">calendar/base/content/calendar-ui-utils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-ui-utils.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-ui-utils.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-ui-utils.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-ui-utils.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-ui-utils.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-unifinder.js">calendar/base/content/calendar-unifinder.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-unifinder.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-unifinder.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-unifinder.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-unifinder.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/calendar-unifinder.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml">calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">calendar/base/content/dialogs/calendar-event-dialog-recurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/preferences/categories.js">calendar/base/content/preferences/categories.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/preferences/categories.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/preferences/categories.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/preferences/categories.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/preferences/categories.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/preferences/categories.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/widgets/calendar-widgets.xml">calendar/base/content/widgets/calendar-widgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/widgets/calendar-widgets.xml">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/widgets/calendar-widgets.xml">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/widgets/calendar-widgets.xml">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/widgets/calendar-widgets.xml">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/widgets/calendar-widgets.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/widgets/minimonth.xml">calendar/base/content/widgets/minimonth.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/widgets/minimonth.xml">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/widgets/minimonth.xml">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/widgets/minimonth.xml">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/widgets/minimonth.xml">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/content/widgets/minimonth.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/modules/calItipUtils.jsm">calendar/base/modules/calItipUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/modules/calItipUtils.jsm">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/modules/calItipUtils.jsm">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/modules/calItipUtils.jsm">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/modules/calItipUtils.jsm">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/modules/calItipUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/modules/calPrintUtils.jsm">calendar/base/modules/calPrintUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/modules/calPrintUtils.jsm">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/modules/calPrintUtils.jsm">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/modules/calPrintUtils.jsm">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/modules/calPrintUtils.jsm">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/modules/calPrintUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/modules/calRecurrenceUtils.jsm">calendar/base/modules/calRecurrenceUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/modules/calRecurrenceUtils.jsm">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/modules/calRecurrenceUtils.jsm">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/modules/calRecurrenceUtils.jsm">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/modules/calRecurrenceUtils.jsm">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/modules/calRecurrenceUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calCalendarManager.js">calendar/base/src/calCalendarManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calCalendarManager.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calCalendarManager.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calCalendarManager.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calCalendarManager.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calCalendarManager.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calEvent.js">calendar/base/src/calEvent.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calEvent.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calEvent.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calEvent.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calEvent.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calEvent.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calRecurrenceInfo.js">calendar/base/src/calRecurrenceInfo.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calRecurrenceInfo.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calRecurrenceInfo.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calRecurrenceInfo.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calRecurrenceInfo.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calRecurrenceInfo.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calTimezoneService.js">calendar/base/src/calTimezoneService.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calTimezoneService.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calTimezoneService.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calTimezoneService.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calTimezoneService.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calTimezoneService.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calTodo.js">calendar/base/src/calTodo.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calTodo.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calTodo.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calTodo.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calTodo.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calTodo.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calUtils.js">calendar/base/src/calUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calUtils.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calUtils.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calUtils.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calUtils.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/base/src/calUtils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/import-export/calOutlookCSVImportExport.js">calendar/import-export/calOutlookCSVImportExport.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/import-export/calOutlookCSVImportExport.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/import-export/calOutlookCSVImportExport.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/import-export/calOutlookCSVImportExport.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/import-export/calOutlookCSVImportExport.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/import-export/calOutlookCSVImportExport.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/content/lightning-item-iframe.js">calendar/lightning/content/lightning-item-iframe.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/content/lightning-item-iframe.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/content/lightning-item-iframe.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/content/lightning-item-iframe.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/content/lightning-item-iframe.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/content/lightning-item-iframe.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/content/lightning-item-panel.js">calendar/lightning/content/lightning-item-panel.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/content/lightning-item-panel.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/content/lightning-item-panel.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/content/lightning-item-panel.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/content/lightning-item-panel.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/content/lightning-item-panel.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/content/messenger-overlay-sidebar.js">calendar/lightning/content/messenger-overlay-sidebar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/content/messenger-overlay-sidebar.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/content/messenger-overlay-sidebar.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/content/messenger-overlay-sidebar.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/content/messenger-overlay-sidebar.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/content/messenger-overlay-sidebar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/modules/ltnInvitationUtils.jsm">calendar/lightning/modules/ltnInvitationUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/modules/ltnInvitationUtils.jsm">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/modules/ltnInvitationUtils.jsm">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/modules/ltnInvitationUtils.jsm">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/modules/ltnInvitationUtils.jsm">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/lightning/modules/ltnInvitationUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/caldav/calDavCalendar.js">calendar/providers/caldav/calDavCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/caldav/calDavCalendar.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/caldav/calDavCalendar.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/caldav/calDavCalendar.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/caldav/calDavCalendar.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/caldav/calDavCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/caldav/calDavRequestHandlers.js">calendar/providers/caldav/calDavRequestHandlers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/caldav/calDavRequestHandlers.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/caldav/calDavRequestHandlers.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/caldav/calDavRequestHandlers.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/caldav/calDavRequestHandlers.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/caldav/calDavRequestHandlers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/ics/calICSCalendar.js">calendar/providers/ics/calICSCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/ics/calICSCalendar.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/ics/calICSCalendar.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/ics/calICSCalendar.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/ics/calICSCalendar.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/ics/calICSCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/storage/calStorageCalendar.js">calendar/providers/storage/calStorageCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/storage/calStorageCalendar.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/storage/calStorageCalendar.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/storage/calStorageCalendar.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/storage/calStorageCalendar.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/storage/calStorageCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/storage/calStorageUpgrade.jsm">calendar/providers/storage/calStorageUpgrade.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/storage/calStorageUpgrade.jsm">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/storage/calStorageUpgrade.jsm">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/storage/calStorageUpgrade.jsm">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/storage/calStorageUpgrade.jsm">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/storage/calStorageUpgrade.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/wcap/calWcapSession.js">calendar/providers/wcap/calWcapSession.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/wcap/calWcapSession.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/wcap/calWcapSession.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/wcap/calWcapSession.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/wcap/calWcapSession.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/providers/wcap/calWcapSession.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/resources/content/calendarCreation.js">calendar/resources/content/calendarCreation.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/resources/content/calendarCreation.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/resources/content/calendarCreation.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/resources/content/calendarCreation.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/resources/content/calendarCreation.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/resources/content/calendarCreation.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/resources/content/datetimepickers/datetimepickers.xml">calendar/resources/content/datetimepickers/datetimepickers.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/resources/content/datetimepickers/datetimepickers.xml">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/resources/content/datetimepickers/datetimepickers.xml">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/resources/content/datetimepickers/datetimepickers.xml">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/resources/content/datetimepickers/datetimepickers.xml">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/resources/content/datetimepickers/datetimepickers.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/resources/content/publish.js">calendar/resources/content/publish.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/resources/content/publish.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/resources/content/publish.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/resources/content/publish.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/resources/content/publish.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/resources/content/publish.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/eventDialog/testUTF8.js">calendar/test/mozmill/eventDialog/testUTF8.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/eventDialog/testUTF8.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/eventDialog/testUTF8.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/eventDialog/testUTF8.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/eventDialog/testUTF8.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/eventDialog/testUTF8.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/shared-modules/calendar-utils.js">calendar/test/mozmill/shared-modules/calendar-utils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/shared-modules/calendar-utils.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/shared-modules/calendar-utils.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/shared-modules/calendar-utils.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/shared-modules/calendar-utils.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/shared-modules/calendar-utils.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/testAlarmDefaultValue.js">calendar/test/mozmill/testAlarmDefaultValue.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/testAlarmDefaultValue.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/testAlarmDefaultValue.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/testAlarmDefaultValue.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/testAlarmDefaultValue.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/testAlarmDefaultValue.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/testLocalICS.js">calendar/test/mozmill/testLocalICS.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/testLocalICS.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/testLocalICS.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/testLocalICS.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/testLocalICS.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/testLocalICS.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/testTodayPane.js">calendar/test/mozmill/testTodayPane.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/testTodayPane.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/testTodayPane.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/testTodayPane.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/testTodayPane.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/mozmill/testTodayPane.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_alarm.js">calendar/test/unit/test_alarm.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_alarm.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_alarm.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_alarm.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_alarm.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_alarm.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_attendee.js">calendar/test/unit/test_attendee.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_attendee.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_attendee.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_attendee.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_attendee.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_attendee.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_calmgr.js">calendar/test/unit/test_calmgr.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_calmgr.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_calmgr.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_calmgr.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_calmgr.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_calmgr.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_freebusy.js">calendar/test/unit/test_freebusy.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_freebusy.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_freebusy.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_freebusy.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_freebusy.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_freebusy.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_gdata_provider.js">calendar/test/unit/test_gdata_provider.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_gdata_provider.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_gdata_provider.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_gdata_provider.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_gdata_provider.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_gdata_provider.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_hashedarray.js">calendar/test/unit/test_hashedarray.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_hashedarray.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_hashedarray.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_hashedarray.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_hashedarray.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_hashedarray.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_recur.js">calendar/test/unit/test_recur.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_recur.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_recur.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_recur.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_recur.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_recur.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_timezone.js">calendar/test/unit/test_timezone.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_timezone.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_timezone.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_timezone.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_timezone.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_timezone.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_weekinfo_service.js">calendar/test/unit/test_weekinfo_service.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_weekinfo_service.js">file</a> |
<a href="/comm-central/annotate/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_weekinfo_service.js">annotate</a> |
<a href="/comm-central/diff/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_weekinfo_service.js">diff</a> |
<a href="/comm-central/comparison/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_weekinfo_service.js">comparison</a> |
<a href="/comm-central/log/d56d639677139ede62ac3c3736e23c7a05aeee42/calendar/test/unit/test_weekinfo_service.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/.eslintrc</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/.eslintrc</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -4,16 +4,26 @@</span>
<a href="#l1.4"></a><span id="l1.4">   ],</span>
<a href="#l1.5"></a><span id="l1.5">   &quot;rules&quot;: {</span>
<a href="#l1.6"></a><span id="l1.6">     // Enforce newline at the end of file, with no multiple empty lines.</span>
<a href="#l1.7"></a><span id="l1.7">     &quot;eol-last&quot;: 2,</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9">     // Disallow using variables outside the blocks they are defined</span>
<a href="#l1.10"></a><span id="l1.10">     &quot;block-scoped-var&quot;: 2,</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+    // Allow trailing commas for easy list extension.  Having them does not</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    // impair readability, but also not required either.</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+    &quot;comma-dangle&quot;: 0,</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineplus">+    // Enforce spacing before and after comma</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineplus">+    &quot;comma-spacing&quot;: [2, {&quot;before&quot;: false, &quot;after&quot;: true}],</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineplus">+</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineplus">+    // Enforce one true comma style.</span>
<a href="#l1.20"></a><span id="l1.20" class="difflineplus">+    &quot;comma-style&quot;: [2, &quot;last&quot;],</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineplus">+</span>
<a href="#l1.22"></a><span id="l1.22">     // Enforce the spacing around the * in generator functions.</span>
<a href="#l1.23"></a><span id="l1.23">     &quot;generator-star-spacing&quot;: [2, &quot;after&quot;],</span>
<a href="#l1.24"></a><span id="l1.24"> </span>
<a href="#l1.25"></a><span id="l1.25">     // Disallow deletion of variables (deleting properties is fine).</span>
<a href="#l1.26"></a><span id="l1.26">     &quot;no-delete-var&quot;: 2,</span>
<a href="#l1.27"></a><span id="l1.27"> </span>
<a href="#l1.28"></a><span id="l1.28">     // Disallow duplicate arguments in functions.</span>
<a href="#l1.29"></a><span id="l1.29">     &quot;no-dupe-args&quot;: 2,</span>
<a href="#l1.30"></a><span id="l1.30" class="difflineat">@@ -78,17 +88,16 @@</span>
<a href="#l1.31"></a><span id="l1.31">     // disallow use of octal escape sequences in string literals, such as</span>
<a href="#l1.32"></a><span id="l1.32">     // var foo = &quot;Copyright \251&quot;;</span>
<a href="#l1.33"></a><span id="l1.33">     &quot;no-octal-escape&quot;: 2,</span>
<a href="#l1.34"></a><span id="l1.34"> </span>
<a href="#l1.35"></a><span id="l1.35">     // disallow use of void operator</span>
<a href="#l1.36"></a><span id="l1.36">     &quot;no-void&quot;: 2,</span>
<a href="#l1.37"></a><span id="l1.37"> </span>
<a href="#l1.38"></a><span id="l1.38">     // Will enable these rules later</span>
<a href="#l1.39"></a><span id="l1.39" class="difflineminus">-    &quot;comma-spacing&quot;: 0,</span>
<a href="#l1.40"></a><span id="l1.40">     &quot;keyword-spacing&quot;: 0,</span>
<a href="#l1.41"></a><span id="l1.41">     &quot;block-spacing&quot;: 0,</span>
<a href="#l1.42"></a><span id="l1.42">     &quot;no-lonely-if&quot;: 0,</span>
<a href="#l1.43"></a><span id="l1.43">     &quot;space-before-blocks&quot;: 0,</span>
<a href="#l1.44"></a><span id="l1.44">     &quot;computed-property-spacing&quot;: 0,</span>
<a href="#l1.45"></a><span id="l1.45">     &quot;consistent-return&quot;: 0,</span>
<a href="#l1.46"></a><span id="l1.46">     &quot;no-redeclare&quot;: 0,</span>
<a href="#l1.47"></a><span id="l1.47">     &quot;no-empty&quot;: 0,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/backend/icaljs/calDateTime.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/backend/icaljs/calDateTime.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -53,17 +53,17 @@ calDateTime.prototype = {</span>
<a href="#l2.4"></a><span id="l2.4">     get second() { return this.innerObject.second; },</span>
<a href="#l2.5"></a><span id="l2.5">     set second(val) { this.innerObject.second = val; },</span>
<a href="#l2.6"></a><span id="l2.6"> </span>
<a href="#l2.7"></a><span id="l2.7">     get timezone() { return new calICALJSTimezone(this.innerObject.zone); },</span>
<a href="#l2.8"></a><span id="l2.8">     set timezone(val) { unwrapSetter(ICAL.Timezone, val, function(val) {</span>
<a href="#l2.9"></a><span id="l2.9">         return this.innerObject.zone = val;</span>
<a href="#l2.10"></a><span id="l2.10">     }, this); },</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-    resetTo: function (yr,mo,dy,hr,mi,sc,tz) {</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+    resetTo: function (yr, mo, dy, hr, mi, sc, tz) {</span>
<a href="#l2.14"></a><span id="l2.14">         this.innerObject.fromData({</span>
<a href="#l2.15"></a><span id="l2.15">             year: yr, month: mo + 1, day: dy,</span>
<a href="#l2.16"></a><span id="l2.16">             hour: hr, minute: mi, second: sc,</span>
<a href="#l2.17"></a><span id="l2.17">         });</span>
<a href="#l2.18"></a><span id="l2.18">         this.timezone = tz;</span>
<a href="#l2.19"></a><span id="l2.19">     },</span>
<a href="#l2.20"></a><span id="l2.20"> </span>
<a href="#l2.21"></a><span id="l2.21">     reset: function() { this.innerObject.reset(); },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/content/calendar-base-view.xml</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/content/calendar-base-view.xml</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -22,17 +22,17 @@</span>
<a href="#l3.4"></a><span id="l3.4">       &lt;field name=&quot;mPendingRefreshJobs&quot;&gt;null&lt;/field&gt;</span>
<a href="#l3.5"></a><span id="l3.5">       &lt;field name=&quot;mCalendar&quot;&gt;null&lt;/field&gt;</span>
<a href="#l3.6"></a><span id="l3.6">       &lt;field name=&quot;mController&quot;&gt;null&lt;/field&gt;</span>
<a href="#l3.7"></a><span id="l3.7">       &lt;field name=&quot;mStartDate&quot;&gt;null&lt;/field&gt;</span>
<a href="#l3.8"></a><span id="l3.8">       &lt;field name=&quot;mEndDate&quot;&gt;null&lt;/field&gt;</span>
<a href="#l3.9"></a><span id="l3.9">       &lt;field name=&quot;mTasksInView&quot;&gt;false&lt;/field&gt;</span>
<a href="#l3.10"></a><span id="l3.10">       &lt;field name=&quot;mShowCompleted&quot;&gt;false&lt;/field&gt;</span>
<a href="#l3.11"></a><span id="l3.11">       &lt;field name=&quot;mDisplayDaysOff&quot;&gt;true&lt;/field&gt;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-      &lt;field name=&quot;mDaysOffArray&quot;&gt;[0,6]&lt;/field&gt;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+      &lt;field name=&quot;mDaysOffArray&quot;&gt;[0, 6]&lt;/field&gt;</span>
<a href="#l3.14"></a><span id="l3.14">       &lt;field name=&quot;mTimezone&quot;&gt;null&lt;/field&gt;</span>
<a href="#l3.15"></a><span id="l3.15">       &lt;field name=&quot;mFlashingEvents&quot;&gt;new Object()&lt;/field&gt;</span>
<a href="#l3.16"></a><span id="l3.16">       &lt;field name=&quot;mSelectedItems&quot;&gt;[]&lt;/field&gt;</span>
<a href="#l3.17"></a><span id="l3.17">       &lt;field name=&quot;mLongWeekdayTotalPixels&quot;&gt;-1&lt;/field&gt;</span>
<a href="#l3.18"></a><span id="l3.18">       &lt;field name=&quot;mResizeHandler&quot;&gt;null&lt;/field&gt;</span>
<a href="#l3.19"></a><span id="l3.19">       &lt;field name=&quot;mDropShadowsLength&quot;&gt;null&lt;/field&gt;</span>
<a href="#l3.20"></a><span id="l3.20">       &lt;field name=&quot;mShadowOffset&quot;&gt;null&lt;/field&gt;</span>
<a href="#l3.21"></a><span id="l3.21">       &lt;field name=&quot;mDropShadows&quot;&gt;null&lt;/field&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/content/calendar-chrome-startup.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/content/calendar-chrome-startup.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -123,26 +123,26 @@ var calendarWindowPrefs = {</span>
<a href="#l4.4"></a><span id="l4.4">      * @see nsIObserver</span>
<a href="#l4.5"></a><span id="l4.5">      */</span>
<a href="#l4.6"></a><span id="l4.6">     observe: function (aSubject, aTopic, aData) {</span>
<a href="#l4.7"></a><span id="l4.7">         if (aTopic == &quot;nsPref:changed&quot;) {</span>
<a href="#l4.8"></a><span id="l4.8">             switch (aData) {</span>
<a href="#l4.9"></a><span id="l4.9">                 case &quot;calendar.view.useSystemColors&quot;: {</span>
<a href="#l4.10"></a><span id="l4.10">                     let attributeValue = Preferences.get(&quot;calendar.view.useSystemColors&quot;, false) &amp;&amp; &quot;true&quot;;</span>
<a href="#l4.11"></a><span id="l4.11">                     for (let win in fixIterator(Services.ww.getWindowEnumerator())) {</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-                        setElementValue(win.document.documentElement, attributeValue , &quot;systemcolors&quot;);</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+                        setElementValue(win.document.documentElement, attributeValue, &quot;systemcolors&quot;);</span>
<a href="#l4.14"></a><span id="l4.14">                     }</span>
<a href="#l4.15"></a><span id="l4.15">                     break;</span>
<a href="#l4.16"></a><span id="l4.16">                 }</span>
<a href="#l4.17"></a><span id="l4.17">             }</span>
<a href="#l4.18"></a><span id="l4.18">         } else if (aTopic == &quot;domwindowopened&quot;) {</span>
<a href="#l4.19"></a><span id="l4.19">             let win = aSubject.QueryInterface(Components.interfaces.nsIDOMWindow);</span>
<a href="#l4.20"></a><span id="l4.20">             win.addEventListener(&quot;load&quot;, function() {</span>
<a href="#l4.21"></a><span id="l4.21">                 let attributeValue = Preferences.get(&quot;calendar.view.useSystemColors&quot;, false) &amp;&amp; &quot;true&quot;;</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineminus">-                setElementValue(win.document.documentElement, attributeValue , &quot;systemcolors&quot;);</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineplus">+                setElementValue(win.document.documentElement, attributeValue, &quot;systemcolors&quot;);</span>
<a href="#l4.24"></a><span id="l4.24">             }, false);</span>
<a href="#l4.25"></a><span id="l4.25">         }</span>
<a href="#l4.26"></a><span id="l4.26">     }</span>
<a href="#l4.27"></a><span id="l4.27"> }</span>
<a href="#l4.28"></a><span id="l4.28"> </span>
<a href="#l4.29"></a><span id="l4.29"> /**</span>
<a href="#l4.30"></a><span id="l4.30">  * Migrate calendar UI. This function is called at each startup and can be used</span>
<a href="#l4.31"></a><span id="l4.31">  * to change UI items that require js code intervention</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/base/content/calendar-month-view.xml</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/base/content/calendar-month-view.xml</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -76,17 +76,17 @@</span>
<a href="#l5.4"></a><span id="l5.4">         &lt;getter&gt;&lt;![CDATA[</span>
<a href="#l5.5"></a><span id="l5.5">             return this.mOccurrence;</span>
<a href="#l5.6"></a><span id="l5.6">         ]]&gt;&lt;/getter&gt;</span>
<a href="#l5.7"></a><span id="l5.7">         &lt;setter&gt;&lt;![CDATA[</span>
<a href="#l5.8"></a><span id="l5.8">           ASSERT(!this.mOccurrence, &quot;Code changes needed to set the occurrence twice&quot;, true);</span>
<a href="#l5.9"></a><span id="l5.9">           this.mOccurrence = val;</span>
<a href="#l5.10"></a><span id="l5.10">           if (cal.isEvent(val)) {</span>
<a href="#l5.11"></a><span id="l5.11">             if (!val.startDate.isDate) {</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-              var label = document.getAnonymousElementByAttribute(this,&quot;anonid&quot;,&quot;item-label&quot;);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+              var label = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;item-label&quot;);</span>
<a href="#l5.14"></a><span id="l5.14">               var df = Components.classes[&quot;@mozilla.org/calendar/datetime-formatter;1&quot;].</span>
<a href="#l5.15"></a><span id="l5.15">                        getService(Components.interfaces.calIDateTimeFormatter);</span>
<a href="#l5.16"></a><span id="l5.16">               var timezone = this.calendarView ? this.calendarView.mTimezone :</span>
<a href="#l5.17"></a><span id="l5.17">                              calendarDefaultTimezone();</span>
<a href="#l5.18"></a><span id="l5.18">               var parentDate = ensureDateTime(this.parentBox.date);</span>
<a href="#l5.19"></a><span id="l5.19">               var startTime = val.startDate.getInTimezone(timezone);</span>
<a href="#l5.20"></a><span id="l5.20">               var endTime = val.endDate.getInTimezone(timezone);</span>
<a href="#l5.21"></a><span id="l5.21">               var nextDay = parentDate.clone();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/base/content/calendar-multiday-view.xml</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/base/content/calendar-multiday-view.xml</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -1172,27 +1172,27 @@</span>
<a href="#l6.4"></a><span id="l6.4">                   var end = data.itemInfo.layoutEnd;</span>
<a href="#l6.5"></a><span id="l6.5">                   if (start.year  != this.date.year ||</span>
<a href="#l6.6"></a><span id="l6.6">                       start.month != this.date.month ||</span>
<a href="#l6.7"></a><span id="l6.7">                       start.day   != this.date.day) {</span>
<a href="#l6.8"></a><span id="l6.8">                       start = start.clone();</span>
<a href="#l6.9"></a><span id="l6.9">                       start.resetTo(this.date.year,</span>
<a href="#l6.10"></a><span id="l6.10">                                     this.date.month,</span>
<a href="#l6.11"></a><span id="l6.11">                                     this.date.day,</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-                                    0,this.mStartMin,0,</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+                                    0, this.mStartMin, 0,</span>
<a href="#l6.14"></a><span id="l6.14">                                     start.timezone);</span>
<a href="#l6.15"></a><span id="l6.15">                   }</span>
<a href="#l6.16"></a><span id="l6.16">                   if (end.year  != this.date.year ||</span>
<a href="#l6.17"></a><span id="l6.17">                       end.month != this.date.month ||</span>
<a href="#l6.18"></a><span id="l6.18">                       end.day   != this.date.day) {</span>
<a href="#l6.19"></a><span id="l6.19">                       end = end.clone();</span>
<a href="#l6.20"></a><span id="l6.20">                       end.resetTo(this.date.year,</span>
<a href="#l6.21"></a><span id="l6.21">                                   this.date.month,</span>
<a href="#l6.22"></a><span id="l6.22">                                   this.date.day,</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineminus">-                                  0,this.mEndMin,0,</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineplus">+                                  0, this.mEndMin, 0,</span>
<a href="#l6.25"></a><span id="l6.25">                                   end.timezone);</span>
<a href="#l6.26"></a><span id="l6.26">                   }</span>
<a href="#l6.27"></a><span id="l6.27">                   var prevEnd;</span>
<a href="#l6.28"></a><span id="l6.28">                   if (col.length &gt; 0) {</span>
<a href="#l6.29"></a><span id="l6.29">                       // Fill in time gaps with a placeholder</span>
<a href="#l6.30"></a><span id="l6.30">                       prevEnd = col[col.length - 1].endDate.clone();</span>
<a href="#l6.31"></a><span id="l6.31">                   } else {</span>
<a href="#l6.32"></a><span id="l6.32">                       // First event in the column, add a placeholder for the</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/base/content/calendar-statusbar.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/base/content/calendar-statusbar.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -55,17 +55,17 @@ Components.utils.import(&quot;resource://gre/</span>
<a href="#l7.4"></a><span id="l7.4">                  this.mCalendarStep = parseInt(100 / this.mCalendarCount);</span>
<a href="#l7.5"></a><span id="l7.5">              }</span>
<a href="#l7.6"></a><span id="l7.6">              this.mProgressMode = aProgressMode;</span>
<a href="#l7.7"></a><span id="l7.7">              this.mStatusProgressPanel.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l7.8"></a><span id="l7.8">              if (this.mProgressMode == Components.interfaces.calIStatusObserver.DETERMINED_PROGRESS) {</span>
<a href="#l7.9"></a><span id="l7.9">                  this.mStatusBar.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l7.10"></a><span id="l7.10">                  this.mStatusBar.setAttribute(&quot;mode&quot;, &quot;determined&quot;);</span>
<a href="#l7.11"></a><span id="l7.11">                  this.mStatusBar.value = 0;</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-                 var commonStatus = calGetString(&quot;calendar&quot;,&quot;gettingCalendarInfoCommon&quot;);</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+                 var commonStatus = calGetString(&quot;calendar&quot;, &quot;gettingCalendarInfoCommon&quot;);</span>
<a href="#l7.14"></a><span id="l7.14">                  this.showStatusString(commonStatus);</span>
<a href="#l7.15"></a><span id="l7.15">              }</span>
<a href="#l7.16"></a><span id="l7.16">              if (this.mThrobber) {</span>
<a href="#l7.17"></a><span id="l7.17">                  this.mThrobber.setAttribute(&quot;busy&quot;, true);</span>
<a href="#l7.18"></a><span id="l7.18">              }</span>
<a href="#l7.19"></a><span id="l7.19">          }</span>
<a href="#l7.20"></a><span id="l7.20">      },</span>
<a href="#l7.21"></a><span id="l7.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/base/content/calendar-task-tree.xml</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/base/content/calendar-task-tree.xml</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -152,17 +152,17 @@</span>
<a href="#l8.4"></a><span id="l8.4">         for (let i = 0; i &lt; treecols.length; i++) {</span>
<a href="#l8.5"></a><span id="l8.5">             let content = treecols[i].getAttribute(&quot;itemproperty&quot;);</span>
<a href="#l8.6"></a><span id="l8.6">             if (names.some(</span>
<a href="#l8.7"></a><span id="l8.7">                 function(element) {</span>
<a href="#l8.8"></a><span id="l8.8">                     return (element == content);</span>
<a href="#l8.9"></a><span id="l8.9">                 })) {</span>
<a href="#l8.10"></a><span id="l8.10">                 treecols[i].removeAttribute(&quot;hidden&quot;);</span>
<a href="#l8.11"></a><span id="l8.11">             } else {</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-                treecols[i].setAttribute(&quot;hidden&quot;,&quot;true&quot;);</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+                treecols[i].setAttribute(&quot;hidden&quot;, &quot;true&quot;);</span>
<a href="#l8.14"></a><span id="l8.14">             }</span>
<a href="#l8.15"></a><span id="l8.15">             if (ordinals &amp;&amp; ordinals.length &gt; 0) {</span>
<a href="#l8.16"></a><span id="l8.16">                treecols[i].ordinal = Number(ordinals.shift());</span>
<a href="#l8.17"></a><span id="l8.17">             }</span>
<a href="#l8.18"></a><span id="l8.18">             if (widths &amp;&amp; widths.length &gt; 0) {</span>
<a href="#l8.19"></a><span id="l8.19">                treecols[i].width = Number(widths.shift());</span>
<a href="#l8.20"></a><span id="l8.20">             }</span>
<a href="#l8.21"></a><span id="l8.21">             if (sorted &amp;&amp; sorted.length &gt; 0) {</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineat">@@ -197,22 +197,22 @@</span>
<a href="#l8.23"></a><span id="l8.23">               }</span>
<a href="#l8.24"></a><span id="l8.24">               if(ordinals.length &gt; 0)</span>
<a href="#l8.25"></a><span id="l8.25">                   ordinals += &quot; &quot;;</span>
<a href="#l8.26"></a><span id="l8.26">               ordinals += treecols[i].ordinal;</span>
<a href="#l8.27"></a><span id="l8.27">               if(widths.length &gt; 0)</span>
<a href="#l8.28"></a><span id="l8.28">                   widths += &quot; &quot;;</span>
<a href="#l8.29"></a><span id="l8.29">               widths += treecols[i].width || 0;</span>
<a href="#l8.30"></a><span id="l8.30">           }</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">-          this.setAttribute(&quot;visible-columns&quot;,visible);</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineminus">-          this.setAttribute(&quot;ordinals&quot;,ordinals);</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineminus">-          this.setAttribute(&quot;widths&quot;,widths);</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineplus">+          this.setAttribute(&quot;visible-columns&quot;, visible);</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineplus">+          this.setAttribute(&quot;ordinals&quot;, ordinals);</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineplus">+          this.setAttribute(&quot;widths&quot;, widths);</span>
<a href="#l8.37"></a><span id="l8.37">           if (sorted) {</span>
<a href="#l8.38"></a><span id="l8.38" class="difflineminus">-              this.setAttribute(&quot;sort-active&quot;,sorted.getAttribute(&quot;itemproperty&quot;));</span>
<a href="#l8.39"></a><span id="l8.39" class="difflineminus">-              this.setAttribute(&quot;sort-direction&quot;,this.mTreeView.sortDirection);</span>
<a href="#l8.40"></a><span id="l8.40" class="difflineplus">+              this.setAttribute(&quot;sort-active&quot;, sorted.getAttribute(&quot;itemproperty&quot;));</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineplus">+              this.setAttribute(&quot;sort-direction&quot;, this.mTreeView.sortDirection);</span>
<a href="#l8.42"></a><span id="l8.42">           } else {</span>
<a href="#l8.43"></a><span id="l8.43">               this.removeAttribute(&quot;sort-active&quot;);</span>
<a href="#l8.44"></a><span id="l8.44">               this.removeAttribute(&quot;sort-direction&quot;);</span>
<a href="#l8.45"></a><span id="l8.45">           }</span>
<a href="#l8.46"></a><span id="l8.46">       ]]&gt;&lt;/destructor&gt;</span>
<a href="#l8.47"></a><span id="l8.47"> </span>
<a href="#l8.48"></a><span id="l8.48">       &lt;field name=&quot;mTaskArray&quot;&gt;[]&lt;/field&gt;</span>
<a href="#l8.49"></a><span id="l8.49">       &lt;field name=&quot;mHash2Index&quot;&gt;&lt;![CDATA[({})]]&gt;&lt;/field&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/base/content/calendar-task-view.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/base/content/calendar-task-view.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -15,17 +15,17 @@ var taskDetailsView = {</span>
<a href="#l9.4"></a><span id="l9.4">      * its the only function in taskDetailsView.</span>
<a href="#l9.5"></a><span id="l9.5">      */</span>
<a href="#l9.6"></a><span id="l9.6">     onSelect: function tDV_onSelect(event) {</span>
<a href="#l9.7"></a><span id="l9.7"> </span>
<a href="#l9.8"></a><span id="l9.8">         var dateFormatter =</span>
<a href="#l9.9"></a><span id="l9.9">             Components.classes[&quot;@mozilla.org/calendar/datetime-formatter;1&quot;]</span>
<a href="#l9.10"></a><span id="l9.10">             .getService(Components.interfaces.calIDateTimeFormatter);</span>
<a href="#l9.11"></a><span id="l9.11"> </span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-        function displayElement(id,flag) {</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+        function displayElement(id, flag) {</span>
<a href="#l9.14"></a><span id="l9.14">             setBooleanAttribute(id, &quot;hidden&quot;, !flag);</span>
<a href="#l9.15"></a><span id="l9.15">             return flag;</span>
<a href="#l9.16"></a><span id="l9.16">         }</span>
<a href="#l9.17"></a><span id="l9.17"> </span>
<a href="#l9.18"></a><span id="l9.18">         var item = document.getElementById(&quot;calendar-task-tree&quot;).currentTask;</span>
<a href="#l9.19"></a><span id="l9.19">         if (displayElement(&quot;calendar-task-details-container&quot;, item != null) &amp;&amp;</span>
<a href="#l9.20"></a><span id="l9.20">             displayElement(&quot;calendar-task-view-splitter&quot;, item != null)) {</span>
<a href="#l9.21"></a><span id="l9.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/calendar/base/content/calendar-ui-utils.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/calendar/base/content/calendar-ui-utils.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -142,17 +142,17 @@ function disableElement(aElement) {</span>
<a href="#l10.4"></a><span id="l10.4">  * remembers who was responsible for this action by using</span>
<a href="#l10.5"></a><span id="l10.5">  * the given key (lockId). In case the control should be</span>
<a href="#l10.6"></a><span id="l10.6">  * enabled again the lock gets removed, but the control only</span>
<a href="#l10.7"></a><span id="l10.7">  * gets enabled if *all* possibly held locks have been removed.</span>
<a href="#l10.8"></a><span id="l10.8">  *</span>
<a href="#l10.9"></a><span id="l10.9">  * @param elementId     The element ID of the element to disable.</span>
<a href="#l10.10"></a><span id="l10.10">  * @param lockId        The ID of the lock to set.</span>
<a href="#l10.11"></a><span id="l10.11">  */</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-function disableElementWithLock(elementId,lockId) {</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+function disableElementWithLock(elementId, lockId) {</span>
<a href="#l10.14"></a><span id="l10.14"> </span>
<a href="#l10.15"></a><span id="l10.15">     // unconditionally disable the element.</span>
<a href="#l10.16"></a><span id="l10.16">     disableElement(elementId);</span>
<a href="#l10.17"></a><span id="l10.17"> </span>
<a href="#l10.18"></a><span id="l10.18">     // remember that this element has been locked with</span>
<a href="#l10.19"></a><span id="l10.19">     // the key passed as argument. we keep a primitive</span>
<a href="#l10.20"></a><span id="l10.20">     // form of ref-count in the attribute 'lock'.</span>
<a href="#l10.21"></a><span id="l10.21">     var element = document.getElementById(elementId);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/calendar/base/content/calendar-unifinder.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/calendar/base/content/calendar-unifinder.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -252,18 +252,18 @@ function finishCalendarUnifinder() {</span>
<a href="#l11.4"></a><span id="l11.4">         viewDeck.removeEventListener(&quot;dayselect&quot;, unifinderDaySelect, false);</span>
<a href="#l11.5"></a><span id="l11.5">         viewDeck.removeEventListener(&quot;itemselect&quot;, unifinderItemSelect, true);</span>
<a href="#l11.6"></a><span id="l11.6">     }</span>
<a href="#l11.7"></a><span id="l11.7"> </span>
<a href="#l11.8"></a><span id="l11.8">     // Persist the sort</span>
<a href="#l11.9"></a><span id="l11.9">     let unifinderTree = document.getElementById(&quot;unifinder-search-results-tree&quot;);</span>
<a href="#l11.10"></a><span id="l11.10">     let sorted = unifinderTreeView.selectedColumn;</span>
<a href="#l11.11"></a><span id="l11.11">     if (sorted) {</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-        unifinderTree.setAttribute(&quot;sort-active&quot;,sorted.getAttribute(&quot;itemproperty&quot;));</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineminus">-        unifinderTree.setAttribute(&quot;sort-direction&quot;,unifinderTreeView.sortDirection);</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineplus">+        unifinderTree.setAttribute(&quot;sort-active&quot;, sorted.getAttribute(&quot;itemproperty&quot;));</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineplus">+        unifinderTree.setAttribute(&quot;sort-direction&quot;, unifinderTreeView.sortDirection);</span>
<a href="#l11.16"></a><span id="l11.16">     } else {</span>
<a href="#l11.17"></a><span id="l11.17">         unifinderTree.removeAttribute(&quot;sort-active&quot;);</span>
<a href="#l11.18"></a><span id="l11.18">         unifinderTree.removeAttribute(&quot;sort-direction&quot;);</span>
<a href="#l11.19"></a><span id="l11.19">     }</span>
<a href="#l11.20"></a><span id="l11.20"> }</span>
<a href="#l11.21"></a><span id="l11.21"> </span>
<a href="#l11.22"></a><span id="l11.22"> /**</span>
<a href="#l11.23"></a><span id="l11.23">  * Event listener for the view deck's dayselect event.</span>
<a href="#l11.24"></a><span id="l11.24" class="difflineat">@@ -505,17 +505,17 @@ var unifinderTreeView = {</span>
<a href="#l11.25"></a><span id="l11.25"> </span>
<a href="#l11.26"></a><span id="l11.26">     /**</span>
<a href="#l11.27"></a><span id="l11.27">      * Sets the items that should be in the unifinder. This removes all items</span>
<a href="#l11.28"></a><span id="l11.28">      * that were previously in the unifinder.</span>
<a href="#l11.29"></a><span id="l11.29">      */</span>
<a href="#l11.30"></a><span id="l11.30">     setItems: function uTV_setItems(aItemArray, aDontSort) {</span>
<a href="#l11.31"></a><span id="l11.31">         let oldCount = this.eventArray.length;</span>
<a href="#l11.32"></a><span id="l11.32">         this.eventArray = aItemArray.slice(0);</span>
<a href="#l11.33"></a><span id="l11.33" class="difflineminus">-        this.tree.rowCountChanged(oldCount - 1 , (this.eventArray.length - oldCount));</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineplus">+        this.tree.rowCountChanged(oldCount - 1, (this.eventArray.length - oldCount));</span>
<a href="#l11.35"></a><span id="l11.35"> </span>
<a href="#l11.36"></a><span id="l11.36">         if (aDontSort) {</span>
<a href="#l11.37"></a><span id="l11.37">             this.calculateIndexMap();</span>
<a href="#l11.38"></a><span id="l11.38">         } else {</span>
<a href="#l11.39"></a><span id="l11.39">             this.sortItems();</span>
<a href="#l11.40"></a><span id="l11.40">         }</span>
<a href="#l11.41"></a><span id="l11.41">     },</span>
<a href="#l11.42"></a><span id="l11.42"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -876,26 +876,26 @@</span>
<a href="#l12.4"></a><span id="l12.4">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l12.5"></a><span id="l12.5">           let hours =</span>
<a href="#l12.6"></a><span id="l12.6">               document.getAnonymousElementByAttribute(</span>
<a href="#l12.7"></a><span id="l12.7">                   this, &quot;anonid&quot;, &quot;hours&quot;);</span>
<a href="#l12.8"></a><span id="l12.8">           for (let i = 0; i &lt; hours.childNodes.length; i++) {</span>
<a href="#l12.9"></a><span id="l12.9">               let hour = hours.childNodes[i];</span>
<a href="#l12.10"></a><span id="l12.10">               switch (this.mState[i + this.mOffset]) {</span>
<a href="#l12.11"></a><span id="l12.11">                   case Components.interfaces.calIFreeBusyInterval.FREE:</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-                      hour.setAttribute(&quot;state&quot;,&quot;free&quot;);</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+                      hour.setAttribute(&quot;state&quot;, &quot;free&quot;);</span>
<a href="#l12.14"></a><span id="l12.14">                       break;</span>
<a href="#l12.15"></a><span id="l12.15">                   case Components.interfaces.calIFreeBusyInterval.BUSY:</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineminus">-                      hour.setAttribute(&quot;state&quot;,&quot;busy&quot;);</span>
<a href="#l12.17"></a><span id="l12.17" class="difflineplus">+                      hour.setAttribute(&quot;state&quot;, &quot;busy&quot;);</span>
<a href="#l12.18"></a><span id="l12.18">                       break;</span>
<a href="#l12.19"></a><span id="l12.19">                   case Components.interfaces.calIFreeBusyInterval.BUSY_TENTATIVE:</span>
<a href="#l12.20"></a><span id="l12.20" class="difflineminus">-                      hour.setAttribute(&quot;state&quot;,&quot;busy_tentative&quot;);</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineplus">+                      hour.setAttribute(&quot;state&quot;, &quot;busy_tentative&quot;);</span>
<a href="#l12.22"></a><span id="l12.22">                       break;</span>
<a href="#l12.23"></a><span id="l12.23">                   case Components.interfaces.calIFreeBusyInterval.BUSY_UNAVAILABLE:</span>
<a href="#l12.24"></a><span id="l12.24" class="difflineminus">-                      hour.setAttribute(&quot;state&quot;,&quot;busy_unavailable&quot;);</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineplus">+                      hour.setAttribute(&quot;state&quot;, &quot;busy_unavailable&quot;);</span>
<a href="#l12.26"></a><span id="l12.26">                       break;</span>
<a href="#l12.27"></a><span id="l12.27">                   default:</span>
<a href="#l12.28"></a><span id="l12.28">                       hour.removeAttribute(&quot;state&quot;);</span>
<a href="#l12.29"></a><span id="l12.29">               }</span>
<a href="#l12.30"></a><span id="l12.30">           }</span>
<a href="#l12.31"></a><span id="l12.31">         ]]&gt;&lt;/body&gt;</span>
<a href="#l12.32"></a><span id="l12.32">       &lt;/method&gt;</span>
<a href="#l12.33"></a><span id="l12.33"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -276,17 +276,17 @@ function onSave(item) {</span>
<a href="#l13.4"></a><span id="l13.4">             recurrenceInfo.deleteRecurrenceItem(rrules[0][0]);</span>
<a href="#l13.5"></a><span id="l13.5">         }</span>
<a href="#l13.6"></a><span id="l13.6">         recurrenceInfo.item = item;</span>
<a href="#l13.7"></a><span id="l13.7">     } else {</span>
<a href="#l13.8"></a><span id="l13.8">         recurrenceInfo = createRecurrenceInfo(item);</span>
<a href="#l13.9"></a><span id="l13.9">     }</span>
<a href="#l13.10"></a><span id="l13.10"> </span>
<a href="#l13.11"></a><span id="l13.11">     var recRule = createRecurrenceRule();</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-    const ALL_WEEKDAYS = [2,3,4,5,6,7,1]; // The sequence MO,TU,WE,TH,FR,SA,SU.</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+    const ALL_WEEKDAYS = [2, 3, 4, 5, 6, 7, 1]; // The sequence MO,TU,WE,TH,FR,SA,SU.</span>
<a href="#l13.14"></a><span id="l13.14">     switch (deckNumber) {</span>
<a href="#l13.15"></a><span id="l13.15">     case 0:</span>
<a href="#l13.16"></a><span id="l13.16">         recRule.type = &quot;DAILY&quot;;</span>
<a href="#l13.17"></a><span id="l13.17">         let dailyGroup = document.getElementById(&quot;daily-group&quot;);</span>
<a href="#l13.18"></a><span id="l13.18">         if (dailyGroup.selectedIndex == 0) {</span>
<a href="#l13.19"></a><span id="l13.19">             let ndays = Math.max(1, Number(getElementValue(&quot;daily-days&quot;)));</span>
<a href="#l13.20"></a><span id="l13.20">             recRule.interval = ndays;</span>
<a href="#l13.21"></a><span id="l13.21">         } else {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/calendar/base/content/preferences/categories.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/calendar/base/content/preferences/categories.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -84,17 +84,17 @@ var gCategoriesPane = {</span>
<a href="#l14.4"></a><span id="l14.4">             var categoryName = document.createElement(&quot;listcell&quot;);</span>
<a href="#l14.5"></a><span id="l14.5">             categoryName.setAttribute(&quot;id&quot;, gCategoryList[i]);</span>
<a href="#l14.6"></a><span id="l14.6">             categoryName.setAttribute(&quot;label&quot;, gCategoryList[i]);</span>
<a href="#l14.7"></a><span id="l14.7">             var categoryNameFix = formatStringForCSSRule(gCategoryList[i]);</span>
<a href="#l14.8"></a><span id="l14.8">             var categoryColor = document.createElement(&quot;listcell&quot;);</span>
<a href="#l14.9"></a><span id="l14.9">             try {</span>
<a href="#l14.10"></a><span id="l14.10">                 var colorCode = categoryPrefBranch.getCharPref(categoryNameFix);</span>
<a href="#l14.11"></a><span id="l14.11">                 categoryColor.setAttribute(&quot;id&quot;, colorCode);</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-                categoryColor.setAttribute(&quot;style&quot;,&quot;background-color: &quot;+colorCode+';');</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+                categoryColor.setAttribute(&quot;style&quot;, &quot;background-color: &quot;+colorCode+';');</span>
<a href="#l14.14"></a><span id="l14.14">             } catch (ex) {</span>
<a href="#l14.15"></a><span id="l14.15">                 categoryColor.setAttribute(&quot;label&quot;, noneLabel);</span>
<a href="#l14.16"></a><span id="l14.16">             }</span>
<a href="#l14.17"></a><span id="l14.17"> </span>
<a href="#l14.18"></a><span id="l14.18">             newListItem.appendChild(categoryName);</span>
<a href="#l14.19"></a><span id="l14.19">             newListItem.appendChild(categoryColor);</span>
<a href="#l14.20"></a><span id="l14.20">             listbox.appendChild(newListItem);</span>
<a href="#l14.21"></a><span id="l14.21">         }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/calendar/base/content/widgets/calendar-widgets.xml</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/calendar/base/content/widgets/calendar-widgets.xml</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -399,17 +399,17 @@</span>
<a href="#l15.4"></a><span id="l15.4">             }</span>
<a href="#l15.5"></a><span id="l15.5"> </span>
<a href="#l15.6"></a><span id="l15.6">             setBooleanAttribute(this, &quot;collapsed&quot;, (!display || !this.isVisibleInMode()));</span>
<a href="#l15.7"></a><span id="l15.7">             if (pushModeCollapsedAttribute) {</span>
<a href="#l15.8"></a><span id="l15.8">                 if (!display) {</span>
<a href="#l15.9"></a><span id="l15.9">                     if (modeIndex == -1) {</span>
<a href="#l15.10"></a><span id="l15.10">                         collapsedModes.push(this.currentMode);</span>
<a href="#l15.11"></a><span id="l15.11">                         if (this.getAttribute(&quot;collapsedinmodes&quot;) == &quot;,&quot;) {</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-                            collapsedModes.splice(0,2);</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+                            collapsedModes.splice(0, 2);</span>
<a href="#l15.14"></a><span id="l15.14">                         }</span>
<a href="#l15.15"></a><span id="l15.15">                     }</span>
<a href="#l15.16"></a><span id="l15.16">                 } else {</span>
<a href="#l15.17"></a><span id="l15.17">                     if (modeIndex &gt; -1) {</span>
<a href="#l15.18"></a><span id="l15.18">                         collapsedModes.splice(modeIndex, 1);</span>
<a href="#l15.19"></a><span id="l15.19">                         if (collapsedModes.join(&quot;,&quot;)  == &quot;&quot;) {</span>
<a href="#l15.20"></a><span id="l15.20">                             collapsedModes[0]=&quot;,&quot;;</span>
<a href="#l15.21"></a><span id="l15.21">                         }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/calendar/base/content/widgets/minimonth.xml</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/calendar/base/content/widgets/minimonth.xml</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -765,23 +765,23 @@</span>
<a href="#l16.4"></a><span id="l16.4">                       }</span>
<a href="#l16.5"></a><span id="l16.5">                   }</span>
<a href="#l16.6"></a><span id="l16.6">               }</span>
<a href="#l16.7"></a><span id="l16.7">               // 3. trim each day abbreviation to 1 char if unique, else 2 chars.</span>
<a href="#l16.8"></a><span id="l16.8">               for (i = 0; i &lt; dayList.length; i++) {</span>
<a href="#l16.9"></a><span id="l16.9">                   var foundMatch = 1;</span>
<a href="#l16.10"></a><span id="l16.10">                   for (j = 0; j &lt; dayList.length; j++) {</span>
<a href="#l16.11"></a><span id="l16.11">                       if (i != j) {</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-                          if (dayList[i].substring(0,1) == dayList[j].substring(0,1)) {</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+                          if (dayList[i].substring(0, 1) == dayList[j].substring(0, 1)) {</span>
<a href="#l16.14"></a><span id="l16.14">                               foundMatch = 2;</span>
<a href="#l16.15"></a><span id="l16.15">                               break;</span>
<a href="#l16.16"></a><span id="l16.16">                           }</span>
<a href="#l16.17"></a><span id="l16.17">                       }</span>
<a href="#l16.18"></a><span id="l16.18">                   }</span>
<a href="#l16.19"></a><span id="l16.19" class="difflineminus">-                  dayList[i] = dayList[i].substring(0,foundMatch)</span>
<a href="#l16.20"></a><span id="l16.20" class="difflineplus">+                  dayList[i] = dayList[i].substring(0, foundMatch)</span>
<a href="#l16.21"></a><span id="l16.21">               }</span>
<a href="#l16.22"></a><span id="l16.22">           }</span>
<a href="#l16.23"></a><span id="l16.23"> </span>
<a href="#l16.24"></a><span id="l16.24">           setBooleanAttribute(header.childNodes[0], &quot;hidden&quot;, !this.mShowWeekNumber);</span>
<a href="#l16.25"></a><span id="l16.25">           for (var column = 1; column &lt; header.childNodes.length; column++) {</span>
<a href="#l16.26"></a><span id="l16.26">               header.childNodes[column].setAttribute(&quot;value&quot;, dayList[column - 1]);</span>
<a href="#l16.27"></a><span id="l16.27">           }</span>
<a href="#l16.28"></a><span id="l16.28">         ]]&gt;&lt;/body&gt;</span>
<a href="#l16.29"></a><span id="l16.29" class="difflineat">@@ -1076,17 +1076,17 @@</span>
<a href="#l16.30"></a><span id="l16.30">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l16.31"></a><span id="l16.31">             if (!aMainDate || (aDate &lt; this._getStartDate(aMainDate) || aDate &gt; this._getEndDate(aMainDate))) {</span>
<a href="#l16.32"></a><span id="l16.32">                 aMainDate = new Date(aDate);</span>
<a href="#l16.33"></a><span id="l16.33">                 aMainDate.setDate(1);</span>
<a href="#l16.34"></a><span id="l16.34">             }</span>
<a href="#l16.35"></a><span id="l16.35">             // note, that aMainDate and this.mEditorDate refer to the first day</span>
<a href="#l16.36"></a><span id="l16.36">             // of the corresponding month</span>
<a href="#l16.37"></a><span id="l16.37">             var sameMonth = this._sameDay(aMainDate, this.mEditorDate);</span>
<a href="#l16.38"></a><span id="l16.38" class="difflineminus">-            var sameDate = this._sameDay(aDate,this.mValue);</span>
<a href="#l16.39"></a><span id="l16.39" class="difflineplus">+            var sameDate = this._sameDay(aDate, this.mValue);</span>
<a href="#l16.40"></a><span id="l16.40">             if (!sameMonth &amp;&amp; !sameDate) {</span>
<a href="#l16.41"></a><span id="l16.41">                 // change month and select day</span>
<a href="#l16.42"></a><span id="l16.42">                 this.mValue = aDate;</span>
<a href="#l16.43"></a><span id="l16.43">                 this.showMonth(aMainDate);</span>
<a href="#l16.44"></a><span id="l16.44">             } else if (!sameMonth) {</span>
<a href="#l16.45"></a><span id="l16.45">                 // change month only</span>
<a href="#l16.46"></a><span id="l16.46">                 this.showMonth(aMainDate);</span>
<a href="#l16.47"></a><span id="l16.47">             } else if (!sameDate) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/calendar/base/modules/calItipUtils.jsm</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/calendar/base/modules/calItipUtils.jsm</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -1118,17 +1118,17 @@ ItipOpListener.prototype = {</span>
<a href="#l17.4"></a><span id="l17.4">  * be handled by the client.</span>
<a href="#l17.5"></a><span id="l17.5">  *</span>
<a href="#l17.6"></a><span id="l17.6">  * @param item item about to be added or updated</span>
<a href="#l17.7"></a><span id="l17.7">  * @param calendar calendar into which the item is about to be added or updated</span>
<a href="#l17.8"></a><span id="l17.8">  */</span>
<a href="#l17.9"></a><span id="l17.9"> function addScheduleAgentClient(item, calendar) {</span>
<a href="#l17.10"></a><span id="l17.10">      if (calendar.getProperty(&quot;capabilities.autoschedule.supported&quot;) === true) {</span>
<a href="#l17.11"></a><span id="l17.11">           if (item.organizer) {</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-             item.organizer.setProperty(&quot;SCHEDULE-AGENT&quot;,&quot;CLIENT&quot;);</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+             item.organizer.setProperty(&quot;SCHEDULE-AGENT&quot;, &quot;CLIENT&quot;);</span>
<a href="#l17.14"></a><span id="l17.14">           }</span>
<a href="#l17.15"></a><span id="l17.15">      }</span>
<a href="#l17.16"></a><span id="l17.16"> }</span>
<a href="#l17.17"></a><span id="l17.17"> </span>
<a href="#l17.18"></a><span id="l17.18"> var ItipItemFinderFactory = {</span>
<a href="#l17.19"></a><span id="l17.19">     /**  Map to save finder instances for given ids */</span>
<a href="#l17.20"></a><span id="l17.20">     _findMap: {},</span>
<a href="#l17.21"></a><span id="l17.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/calendar/base/modules/calPrintUtils.jsm</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/calendar/base/modules/calPrintUtils.jsm</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -133,17 +133,17 @@ cal.print = {</span>
<a href="#l18.4"></a><span id="l18.4">         let taskNode = document.getElementById(&quot;task-template&quot;).cloneNode(true);</span>
<a href="#l18.5"></a><span id="l18.5">         taskNode.removeAttribute(&quot;id&quot;);</span>
<a href="#l18.6"></a><span id="l18.6">         taskNode.item = item;</span>
<a href="#l18.7"></a><span id="l18.7"> </span>
<a href="#l18.8"></a><span id="l18.8">         let taskListBox = document.getElementById(&quot;tasks-list-box&quot;);</span>
<a href="#l18.9"></a><span id="l18.9">         if (taskListBox.hasAttribute(&quot;hidden&quot;)) {</span>
<a href="#l18.10"></a><span id="l18.10">             let tasksTitle = document.getElementById(&quot;tasks-title&quot;);</span>
<a href="#l18.11"></a><span id="l18.11">             taskListBox.removeAttribute(&quot;hidden&quot;);</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-            tasksTitle.textContent = cal.calGetString(&quot;calendar&quot;,&quot;tasksWithNoDueDate&quot;);</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+            tasksTitle.textContent = cal.calGetString(&quot;calendar&quot;, &quot;tasksWithNoDueDate&quot;);</span>
<a href="#l18.14"></a><span id="l18.14">         }</span>
<a href="#l18.15"></a><span id="l18.15"> </span>
<a href="#l18.16"></a><span id="l18.16">         // Fill in details of the task</span>
<a href="#l18.17"></a><span id="l18.17">         if (item.isCompleted) {</span>
<a href="#l18.18"></a><span id="l18.18">             taskNode.querySelector(&quot;.task-checkbox&quot;).setAttribute(&quot;checked&quot;, &quot;checked&quot;);</span>
<a href="#l18.19"></a><span id="l18.19">         }</span>
<a href="#l18.20"></a><span id="l18.20"> </span>
<a href="#l18.21"></a><span id="l18.21">         taskNode.querySelector(&quot;.task-title&quot;).textContent = item.title;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/calendar/base/modules/calRecurrenceUtils.jsm</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/calendar/base/modules/calRecurrenceUtils.jsm</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -160,17 +160,17 @@ function recurrenceRule2String(recurrenc</span>
<a href="#l19.4"></a><span id="l19.4">                                 ordinalString = getRString(ordinalString);</span>
<a href="#l19.5"></a><span id="l19.5">                                 dayString = getRString(dayString);</span>
<a href="#l19.6"></a><span id="l19.6">                                 let stringOrdinalWeekday = getRString(&quot;ordinalWeekdayOrder&quot;,</span>
<a href="#l19.7"></a><span id="l19.7">                                                                       [ordinalString, dayString]);</span>
<a href="#l19.8"></a><span id="l19.8">                                 weekdaysString_position += stringOrdinalWeekday + &quot;, &quot;;</span>
<a href="#l19.9"></a><span id="l19.9">                             }</span>
<a href="#l19.10"></a><span id="l19.10">                         }</span>
<a href="#l19.11"></a><span id="l19.11">                         let weekdaysString = weekdaysString_every + weekdaysString_position;</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-                        weekdaysString = weekdaysString.slice(0,-2)</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+                        weekdaysString = weekdaysString.slice(0, -2)</span>
<a href="#l19.14"></a><span id="l19.14">                                                        .replace(/,(?= [^,]*$)/,</span>
<a href="#l19.15"></a><span id="l19.15">                                                                 ' ' + getRString(&quot;repeatDetailsAnd&quot;));</span>
<a href="#l19.16"></a><span id="l19.16"> </span>
<a href="#l19.17"></a><span id="l19.17">                         let monthlyString = weekdaysString_every ? &quot;monthlyEveryOfEvery&quot; : &quot;monthlyRuleNthOfEvery&quot;;</span>
<a href="#l19.18"></a><span id="l19.18">                         monthlyString = nounClass(&quot;repeatDetailsDay&quot; + day_of_week(firstDay), monthlyString);</span>
<a href="#l19.19"></a><span id="l19.19">                         monthlyString = getRString(monthlyString, [weekdaysString]);</span>
<a href="#l19.20"></a><span id="l19.20">                         ruleString = PluralForm.get(rule.interval, monthlyString)</span>
<a href="#l19.21"></a><span id="l19.21">                                                .replace(&quot;#2&quot;, rule.interval);</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineat">@@ -203,17 +203,17 @@ function recurrenceRule2String(recurrenc</span>
<a href="#l19.23"></a><span id="l19.23">                                     lastDay = true;</span>
<a href="#l19.24"></a><span id="l19.24">                                     continue;</span>
<a href="#l19.25"></a><span id="l19.25">                                 }</span>
<a href="#l19.26"></a><span id="l19.26">                                 day_string += dateFormatter.formatDayWithOrdinal(component[i]) + &quot;, &quot;;</span>
<a href="#l19.27"></a><span id="l19.27">                             }</span>
<a href="#l19.28"></a><span id="l19.28">                             if (lastDay) {</span>
<a href="#l19.29"></a><span id="l19.29">                                 day_string += getRString(&quot;monthlyLastDay&quot;) + &quot;, &quot;;</span>
<a href="#l19.30"></a><span id="l19.30">                             }</span>
<a href="#l19.31"></a><span id="l19.31" class="difflineminus">-                            day_string = day_string.slice(0,-2)</span>
<a href="#l19.32"></a><span id="l19.32" class="difflineplus">+                            day_string = day_string.slice(0, -2)</span>
<a href="#l19.33"></a><span id="l19.33">                                                    .replace(/,(?= [^,]*$)/,</span>
<a href="#l19.34"></a><span id="l19.34">                                                             ' ' + getRString(&quot;repeatDetailsAnd&quot;));</span>
<a href="#l19.35"></a><span id="l19.35"> </span>
<a href="#l19.36"></a><span id="l19.36">                             // Add the word &quot;day&quot; in plural form to the list of days then</span>
<a href="#l19.37"></a><span id="l19.37">                             // compose the final string with the interval of months</span>
<a href="#l19.38"></a><span id="l19.38">                             let monthlyDayString = getRString(&quot;monthlyDaysOfNth_day&quot;, [day_string]);</span>
<a href="#l19.39"></a><span id="l19.39">                             monthlyDayString = PluralForm.get(component.length, monthlyDayString);</span>
<a href="#l19.40"></a><span id="l19.40">                             let monthlyString = getRString(&quot;monthlyDaysOfNth&quot;, [monthlyDayString]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/calendar/base/src/calCalendarManager.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/calendar/base/src/calCalendarManager.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -866,17 +866,17 @@ calMgrCalendarObserver.prototype = {</span>
<a href="#l20.4"></a><span id="l20.4">                     initialSortOrderPos = i;</span>
<a href="#l20.5"></a><span id="l20.5">                 }</span>
<a href="#l20.6"></a><span id="l20.6">             }</span>
<a href="#l20.7"></a><span id="l20.7">             // Enabling or disabling cache on a calendar re-creates</span>
<a href="#l20.8"></a><span id="l20.8">             // it so the registerCalendar call can wrap/unwrap the</span>
<a href="#l20.9"></a><span id="l20.9">             // calCachedCalendar facade saving the user the need to</span>
<a href="#l20.10"></a><span id="l20.10">             // restart Thunderbird and making sure a new Id is used.</span>
<a href="#l20.11"></a><span id="l20.11">             this.calMgr.removeCalendar(aCalendar, cICM.REMOVE_NO_DELETE);</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-            var newCal = this.calMgr.createCalendar(aCalendar.type,aCalendar.uri);</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+            var newCal = this.calMgr.createCalendar(aCalendar.type, aCalendar.uri);</span>
<a href="#l20.14"></a><span id="l20.14">             newCal.name = aCalendar.name;</span>
<a href="#l20.15"></a><span id="l20.15"> </span>
<a href="#l20.16"></a><span id="l20.16">             // TODO: if properties get added this list will need to be adjusted,</span>
<a href="#l20.17"></a><span id="l20.17">             // ideally we should add a &quot;getProperties&quot; method to calICalendar.idl</span>
<a href="#l20.18"></a><span id="l20.18">             // to retrieve all non-transient properties for a calendar.</span>
<a href="#l20.19"></a><span id="l20.19">             let propsToCopy = [ &quot;color&quot;,</span>
<a href="#l20.20"></a><span id="l20.20">                                 &quot;disabled&quot;,</span>
<a href="#l20.21"></a><span id="l20.21">                                 &quot;auto-enabled&quot;,</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineat">@@ -957,18 +957,18 @@ calMgrCalendarObserver.prototype = {</span>
<a href="#l20.23"></a><span id="l20.23">          }</span>
<a href="#l20.24"></a><span id="l20.24"> </span>
<a href="#l20.25"></a><span id="l20.25"> </span>
<a href="#l20.26"></a><span id="l20.26">         paramBlock.SetString(0, errMsg);</span>
<a href="#l20.27"></a><span id="l20.27">         paramBlock.SetString(1, errCode);</span>
<a href="#l20.28"></a><span id="l20.28">         paramBlock.SetString(2, message);</span>
<a href="#l20.29"></a><span id="l20.29"> </span>
<a href="#l20.30"></a><span id="l20.30">         this.storedReadOnly = this.calendar.readOnly;</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">-        var errorCode = calGetString(&quot;calendar&quot;,&quot;errorCode&quot;, [errCode]);</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineminus">-        var errorDescription = calGetString(&quot;calendar&quot;,&quot;errorDescription&quot;, [message]);</span>
<a href="#l20.33"></a><span id="l20.33" class="difflineplus">+        var errorCode = calGetString(&quot;calendar&quot;, &quot;errorCode&quot;, [errCode]);</span>
<a href="#l20.34"></a><span id="l20.34" class="difflineplus">+        var errorDescription = calGetString(&quot;calendar&quot;, &quot;errorDescription&quot;, [message]);</span>
<a href="#l20.35"></a><span id="l20.35">         var summary = errMsg + &quot; &quot; + errorCode + &quot;. &quot; + errorDescription;</span>
<a href="#l20.36"></a><span id="l20.36"> </span>
<a href="#l20.37"></a><span id="l20.37">         // Log warnings in error console.</span>
<a href="#l20.38"></a><span id="l20.38">         // Report serious errors in both error console and in prompt window.</span>
<a href="#l20.39"></a><span id="l20.39">         if (aErrNo == calIErrors.MODIFICATION_FAILED) {</span>
<a href="#l20.40"></a><span id="l20.40">             Components.utils.reportError(summary);</span>
<a href="#l20.41"></a><span id="l20.41">             this.announceParamBlock(paramBlock);</span>
<a href="#l20.42"></a><span id="l20.42">         } else {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/calendar/base/src/calEvent.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/calendar/base/src/calEvent.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -160,17 +160,17 @@ calEvent.prototype = {</span>
<a href="#l21.4"></a><span id="l21.4"> </span>
<a href="#l21.5"></a><span id="l21.5">         // We're about to change the start date of an item which probably</span>
<a href="#l21.6"></a><span id="l21.6">         // could break the associated calIRecurrenceInfo. We're calling</span>
<a href="#l21.7"></a><span id="l21.7">         // the appropriate method here to adjust the internal structure in</span>
<a href="#l21.8"></a><span id="l21.8">         // order to free clients from worrying about such details.</span>
<a href="#l21.9"></a><span id="l21.9">         if (this.parentItem == this) {</span>
<a href="#l21.10"></a><span id="l21.10">             var rec = this.recurrenceInfo;</span>
<a href="#l21.11"></a><span id="l21.11">             if (rec) {</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-                rec.onStartDateChange(value,this.startDate);</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+                rec.onStartDateChange(value, this.startDate);</span>
<a href="#l21.14"></a><span id="l21.14">             }</span>
<a href="#l21.15"></a><span id="l21.15">         }</span>
<a href="#l21.16"></a><span id="l21.16"> </span>
<a href="#l21.17"></a><span id="l21.17">         return this.setProperty(&quot;DTSTART&quot;, value);</span>
<a href="#l21.18"></a><span id="l21.18">     },</span>
<a href="#l21.19"></a><span id="l21.19"> </span>
<a href="#l21.20"></a><span id="l21.20">     get startDate() {</span>
<a href="#l21.21"></a><span id="l21.21">         return this.getProperty(&quot;DTSTART&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/calendar/base/src/calRecurrenceInfo.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/calendar/base/src/calRecurrenceInfo.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -337,19 +337,19 @@ calRecurrenceInfo.prototype = {</span>
<a href="#l22.4"></a><span id="l22.4">                             aTime);</span>
<a href="#l22.5"></a><span id="l22.5"> </span>
<a href="#l22.6"></a><span id="l22.6">                     nextOccurrences[i] = rRuleInstance</span>
<a href="#l22.7"></a><span id="l22.7">                                              .getNextOccurrence(searchStart, searchDate);</span>
<a href="#l22.8"></a><span id="l22.8">                 }</span>
<a href="#l22.9"></a><span id="l22.9"> </span>
<a href="#l22.10"></a><span id="l22.10">                 // As decided in bug 734245, an EXDATE of type DATE shall also match a DTSTART of type DATE-TIME</span>
<a href="#l22.11"></a><span id="l22.11">                 let nextKey = getRidKey(nextOccurrences[i]);</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-                let isInExceptionMap = nextKey &amp;&amp; (this.mExceptionMap[nextKey.substring(0,8)] ||</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+                let isInExceptionMap = nextKey &amp;&amp; (this.mExceptionMap[nextKey.substring(0, 8)] ||</span>
<a href="#l22.14"></a><span id="l22.14">                                                    this.mExceptionMap[nextKey]);</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineminus">-                let isInNegMap = nextKey &amp;&amp; (negMap[nextKey.substring(0,8)] ||</span>
<a href="#l22.16"></a><span id="l22.16" class="difflineplus">+                let isInNegMap = nextKey &amp;&amp; (negMap[nextKey.substring(0, 8)] ||</span>
<a href="#l22.17"></a><span id="l22.17">                                              negMap[nextKey]);</span>
<a href="#l22.18"></a><span id="l22.18">                 if (nextKey &amp;&amp; (isInNegMap || isInExceptionMap)) {</span>
<a href="#l22.19"></a><span id="l22.19">                     // If the found recurrence id points to either an exception</span>
<a href="#l22.20"></a><span id="l22.20">                     // (will handle later) or an EXDATE, then nextOccurrences[i]</span>
<a href="#l22.21"></a><span id="l22.21">                     // is invalid and we might need to try again next round.</span>
<a href="#l22.22"></a><span id="l22.22">                     invalidOccurrences++;</span>
<a href="#l22.23"></a><span id="l22.23">                 } else if (nextOccurrences[i]) {</span>
<a href="#l22.24"></a><span id="l22.24">                     // We have a valid recurrence id (not an exception, not an</span>
<a href="#l22.25"></a><span id="l22.25" class="difflineat">@@ -423,17 +423,17 @@ calRecurrenceInfo.prototype = {</span>
<a href="#l22.26"></a><span id="l22.26"> </span>
<a href="#l22.27"></a><span id="l22.27">     // internal helper function;</span>
<a href="#l22.28"></a><span id="l22.28">     calculateDates: function cRI_calculateDates(aRangeStart,</span>
<a href="#l22.29"></a><span id="l22.29">                                                 aRangeEnd,</span>
<a href="#l22.30"></a><span id="l22.30">                                                 aMaxCount) {</span>
<a href="#l22.31"></a><span id="l22.31">         this.ensureBaseItem();</span>
<a href="#l22.32"></a><span id="l22.32">         this.ensureSortedRecurrenceRules();</span>
<a href="#l22.33"></a><span id="l22.33"> </span>
<a href="#l22.34"></a><span id="l22.34" class="difflineminus">-        function ridDateSortComptor(a,b) {</span>
<a href="#l22.35"></a><span id="l22.35" class="difflineplus">+        function ridDateSortComptor(a, b) {</span>
<a href="#l22.36"></a><span id="l22.36">             return a.rstart.compare(b.rstart);</span>
<a href="#l22.37"></a><span id="l22.37">         }</span>
<a href="#l22.38"></a><span id="l22.38"> </span>
<a href="#l22.39"></a><span id="l22.39">         // workaround for UTC- timezones</span>
<a href="#l22.40"></a><span id="l22.40">         var rangeStart = ensureDateTime(aRangeStart);</span>
<a href="#l22.41"></a><span id="l22.41">         var rangeEnd = ensureDateTime(aRangeEnd);</span>
<a href="#l22.42"></a><span id="l22.42"> </span>
<a href="#l22.43"></a><span id="l22.43">         // If aRangeStart falls in the middle of an occurrence, libical will</span>
<a href="#l22.44"></a><span id="l22.44" class="difflineat">@@ -546,17 +546,17 @@ calRecurrenceInfo.prototype = {</span>
<a href="#l22.45"></a><span id="l22.45">             // is an EXDATE, and then giving it a real DTSTART) -- so we don't</span>
<a href="#l22.46"></a><span id="l22.46">             // check exceptions here</span>
<a href="#l22.47"></a><span id="l22.47">             for (let dateToRemove of cur_dates) {</span>
<a href="#l22.48"></a><span id="l22.48">                 let dateToRemoveKey = getRidKey(dateToRemove);</span>
<a href="#l22.49"></a><span id="l22.49">                 if (dateToRemove.isDate) {</span>
<a href="#l22.50"></a><span id="l22.50">                     // As decided in bug 734245, an EXDATE of type DATE shall also match a DTSTART of type DATE-TIME</span>
<a href="#l22.51"></a><span id="l22.51">                     let toRemove = [];</span>
<a href="#l22.52"></a><span id="l22.52">                     for (let occurenceKey in occurrenceMap) {</span>
<a href="#l22.53"></a><span id="l22.53" class="difflineminus">-                        if (occurrenceMap[occurenceKey] &amp;&amp; occurenceKey.substring(0,8) == dateToRemoveKey) {</span>
<a href="#l22.54"></a><span id="l22.54" class="difflineplus">+                        if (occurrenceMap[occurenceKey] &amp;&amp; occurenceKey.substring(0, 8) == dateToRemoveKey) {</span>
<a href="#l22.55"></a><span id="l22.55">                             dates = dates.filter(function (d) { return d.id.compare(dateToRemove) != 0; });</span>
<a href="#l22.56"></a><span id="l22.56">                             toRemove.push(occurenceKey)</span>
<a href="#l22.57"></a><span id="l22.57">                         }</span>
<a href="#l22.58"></a><span id="l22.58">                     }</span>
<a href="#l22.59"></a><span id="l22.59">                     for (let i=0; i &lt; toRemove.length; i++) {</span>
<a href="#l22.60"></a><span id="l22.60">                         delete occurrenceMap[toRemove[i]];</span>
<a href="#l22.61"></a><span id="l22.61">                     }</span>
<a href="#l22.62"></a><span id="l22.62">                 } else if (occurrenceMap[dateToRemoveKey]) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/calendar/base/src/calTimezoneService.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/calendar/base/src/calTimezoneService.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -293,18 +293,18 @@ calTimezoneService.prototype = {</span>
<a href="#l23.4"></a><span id="l23.4">  * deciding factors are the offsets given by (northern-hemisphere) summer and</span>
<a href="#l23.5"></a><span id="l23.5">  * winter JSdates.  However, when available, we also use the name of the</span>
<a href="#l23.6"></a><span id="l23.6">  * timezone in the JSdate, or a string-bundle term from the locale.</span>
<a href="#l23.7"></a><span id="l23.7">  *</span>
<a href="#l23.8"></a><span id="l23.8">  * @return a mozilla ICS timezone string.</span>
<a href="#l23.9"></a><span id="l23.9"> */</span>
<a href="#l23.10"></a><span id="l23.10"> function guessSystemTimezone() {</span>
<a href="#l23.11"></a><span id="l23.11">     // Probe JSDates for basic OS timezone offsets and names.</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-    const dateJun = (new Date(2005, 5,20)).toString();</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineminus">-    const dateDec = (new Date(2005,11,20)).toString();</span>
<a href="#l23.14"></a><span id="l23.14" class="difflineplus">+    const dateJun = (new Date(2005, 5, 20)).toString();</span>
<a href="#l23.15"></a><span id="l23.15" class="difflineplus">+    const dateDec = (new Date(2005, 11, 20)).toString();</span>
<a href="#l23.16"></a><span id="l23.16">     const tzNameRegex = /[^(]* ([^ ]*) \(([^)]+)\)/;</span>
<a href="#l23.17"></a><span id="l23.17">     const nameDataJun = dateJun.match(tzNameRegex);</span>
<a href="#l23.18"></a><span id="l23.18">     const nameDataDec = dateDec.match(tzNameRegex);</span>
<a href="#l23.19"></a><span id="l23.19">     const tzNameJun = nameDataJun &amp;&amp; nameDataJun[2];</span>
<a href="#l23.20"></a><span id="l23.20">     const tzNameDec = nameDataDec &amp;&amp; nameDataDec[2];</span>
<a href="#l23.21"></a><span id="l23.21">     const offsetRegex = /[+-]\d{4}/;</span>
<a href="#l23.22"></a><span id="l23.22">     const offsetJun = dateJun.match(offsetRegex)[0];</span>
<a href="#l23.23"></a><span id="l23.23">     const offsetDec = dateDec.match(offsetRegex)[0];</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/calendar/base/src/calTodo.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/calendar/base/src/calTodo.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -196,17 +196,17 @@ calTodo.prototype = {</span>
<a href="#l24.4"></a><span id="l24.4"> </span>
<a href="#l24.5"></a><span id="l24.5">         // We're about to change the start date of an item which probably</span>
<a href="#l24.6"></a><span id="l24.6">         // could break the associated calIRecurrenceInfo. We're calling</span>
<a href="#l24.7"></a><span id="l24.7">         // the appropriate method here to adjust the internal structure in</span>
<a href="#l24.8"></a><span id="l24.8">         // order to free clients from worrying about such details.</span>
<a href="#l24.9"></a><span id="l24.9">         if (this.parentItem == this) {</span>
<a href="#l24.10"></a><span id="l24.10">             var rec = this.recurrenceInfo;</span>
<a href="#l24.11"></a><span id="l24.11">             if (rec) {</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-                rec.onStartDateChange(value,this.entryDate);</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+                rec.onStartDateChange(value, this.entryDate);</span>
<a href="#l24.14"></a><span id="l24.14">             }</span>
<a href="#l24.15"></a><span id="l24.15">         }</span>
<a href="#l24.16"></a><span id="l24.16"> </span>
<a href="#l24.17"></a><span id="l24.17">         return this.setProperty(&quot;DTSTART&quot;, value);</span>
<a href="#l24.18"></a><span id="l24.18">     },</span>
<a href="#l24.19"></a><span id="l24.19"> </span>
<a href="#l24.20"></a><span id="l24.20">     get entryDate() {</span>
<a href="#l24.21"></a><span id="l24.21">         return this.getProperty(&quot;DTSTART&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/calendar/base/src/calUtils.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/calendar/base/src/calUtils.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -647,17 +647,17 @@ function setPrefCategoriesFromArray(aCat</span>
<a href="#l25.4"></a><span id="l25.4">  * Convert array of category names to string.</span>
<a href="#l25.5"></a><span id="l25.5">  *</span>
<a href="#l25.6"></a><span id="l25.6">  * Category names may contain commas (,).  Escape commas (\,) in each,</span>
<a href="#l25.7"></a><span id="l25.7">  * then join them in comma separated string for storage.</span>
<a href="#l25.8"></a><span id="l25.8">  * @param aSortedCategoriesArray sorted array of category names,</span>
<a href="#l25.9"></a><span id="l25.9">  * may contain unescaped commas, which will be escaped in combined string.</span>
<a href="#l25.10"></a><span id="l25.10">  */</span>
<a href="#l25.11"></a><span id="l25.11"> function categoriesArrayToString(aSortedCategoriesArray) {</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-    function escapeComma(category) { return category.replace(/,/g,&quot;\\,&quot;); }</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+    function escapeComma(category) { return category.replace(/,/g, &quot;\\,&quot;); }</span>
<a href="#l25.14"></a><span id="l25.14">     return aSortedCategoriesArray.map(escapeComma).join(&quot;,&quot;);</span>
<a href="#l25.15"></a><span id="l25.15"> }</span>
<a href="#l25.16"></a><span id="l25.16"> </span>
<a href="#l25.17"></a><span id="l25.17"> /**</span>
<a href="#l25.18"></a><span id="l25.18">  * Gets the value of a string in a .properties file from the calendar bundle</span>
<a href="#l25.19"></a><span id="l25.19">  *</span>
<a href="#l25.20"></a><span id="l25.20">  * @param aBundleName  the name of the properties file.  It is assumed that the</span>
<a href="#l25.21"></a><span id="l25.21">  *                     file lives in chrome://calendar/locale/</span>
<a href="#l25.22"></a><span id="l25.22" class="difflineat">@@ -1728,17 +1728,17 @@ function compareItemContent(aFirstItem, </span>
<a href="#l25.23"></a><span id="l25.23">            normalizeComponent(aSecondItem.icalComponent);</span>
<a href="#l25.24"></a><span id="l25.24"> }</span>
<a href="#l25.25"></a><span id="l25.25"> </span>
<a href="#l25.26"></a><span id="l25.26"> /**</span>
<a href="#l25.27"></a><span id="l25.27">  * Use the binary search algorithm to search for an item in an array.</span>
<a href="#l25.28"></a><span id="l25.28">  * function.</span>
<a href="#l25.29"></a><span id="l25.29">  *</span>
<a href="#l25.30"></a><span id="l25.30">  * The comptor function may look as follows for calIDateTime objects.</span>
<a href="#l25.31"></a><span id="l25.31" class="difflineminus">- *     function comptor(a,b) {</span>
<a href="#l25.32"></a><span id="l25.32" class="difflineplus">+ *     function comptor(a, b) {</span>
<a href="#l25.33"></a><span id="l25.33">  *         return a.compare(b);</span>
<a href="#l25.34"></a><span id="l25.34">  *     }</span>
<a href="#l25.35"></a><span id="l25.35">  * If no comptor is specified, the default greater-than comptor will be used.</span>
<a href="#l25.36"></a><span id="l25.36">  *</span>
<a href="#l25.37"></a><span id="l25.37">  * @param itemArray             The array to search.</span>
<a href="#l25.38"></a><span id="l25.38">  * @param newItem               The item to search in the array.</span>
<a href="#l25.39"></a><span id="l25.39">  * @param comptor               A comparation function that can compare two items.</span>
<a href="#l25.40"></a><span id="l25.40">  * @return                      The index of the new item.</span>
<a href="#l25.41"></a><span id="l25.41" class="difflineat">@@ -1760,17 +1760,17 @@ function binarySearch(itemArray, newItem</span>
<a href="#l25.42"></a><span id="l25.42">             return mid;</span>
<a href="#l25.43"></a><span id="l25.43">         }</span>
<a href="#l25.44"></a><span id="l25.44">     }</span>
<a href="#l25.45"></a><span id="l25.45"> </span>
<a href="#l25.46"></a><span id="l25.46">     if (itemArray.length &lt; 1) {</span>
<a href="#l25.47"></a><span id="l25.47">         return -1;</span>
<a href="#l25.48"></a><span id="l25.48">     }</span>
<a href="#l25.49"></a><span id="l25.49">     if (!comptor) {</span>
<a href="#l25.50"></a><span id="l25.50" class="difflineminus">-        comptor = function defaultComptor(a,b) {</span>
<a href="#l25.51"></a><span id="l25.51" class="difflineplus">+        comptor = function defaultComptor(a, b) {</span>
<a href="#l25.52"></a><span id="l25.52">             return (a &gt; b) - (a &lt; b);</span>
<a href="#l25.53"></a><span id="l25.53">         }</span>
<a href="#l25.54"></a><span id="l25.54">     }</span>
<a href="#l25.55"></a><span id="l25.55">     return binarySearchInternal(0, itemArray.length - 1);</span>
<a href="#l25.56"></a><span id="l25.56"> }</span>
<a href="#l25.57"></a><span id="l25.57"> </span>
<a href="#l25.58"></a><span id="l25.58"> /**</span>
<a href="#l25.59"></a><span id="l25.59">  * Insert a new node underneath the given parentNode, using binary search. See binarySearch</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/calendar/import-export/calOutlookCSVImportExport.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/calendar/import-export/calOutlookCSVImportExport.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -483,16 +483,16 @@ calOutlookCSVExporter.prototype = {</span>
<a href="#l26.4"></a><span id="l26.4">             line.push(alarmDate ? dateString(alarmDate) : &quot;&quot;);</span>
<a href="#l26.5"></a><span id="l26.5">             line.push(alarmDate ? timeString(alarmDate) : &quot;&quot;);</span>
<a href="#l26.6"></a><span id="l26.6">             line.push(txtString(cal.categoriesArrayToString(item.getCategories({})))); // xxx todo: what's the correct way to encode ',' in csv?, how are multi-values expressed?</span>
<a href="#l26.7"></a><span id="l26.7">             line.push(txtString(item.getProperty(&quot;DESCRIPTION&quot;)));</span>
<a href="#l26.8"></a><span id="l26.8">             line.push(txtString(item.getProperty(&quot;LOCATION&quot;)));</span>
<a href="#l26.9"></a><span id="l26.9">             line.push((item.privacy==&quot;PRIVATE&quot;) ? localeEn.valueTrue : localeEn.valueFalse);</span>
<a href="#l26.10"></a><span id="l26.10"> </span>
<a href="#l26.11"></a><span id="l26.11">             line = line.map(function(v) {</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-                v = String(v).replace(/&quot;/g,'&quot;&quot;');</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+                v = String(v).replace(/&quot;/g, '&quot;&quot;');</span>
<a href="#l26.14"></a><span id="l26.14">                 return '&quot;'+v+'&quot;';</span>
<a href="#l26.15"></a><span id="l26.15">             })</span>
<a href="#l26.16"></a><span id="l26.16">             str = line.join(',') + exportLineEnding;</span>
<a href="#l26.17"></a><span id="l26.17">             aStream.write(str, str.length);</span>
<a href="#l26.18"></a><span id="l26.18">         }</span>
<a href="#l26.19"></a><span id="l26.19">     }</span>
<a href="#l26.20"></a><span id="l26.20"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/calendar/lightning/content/lightning-item-iframe.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/calendar/lightning/content/lightning-item-iframe.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -1911,17 +1911,17 @@ function loadCloudProviders() {</span>
<a href="#l27.4"></a><span id="l27.4"> </span>
<a href="#l27.5"></a><span id="l27.5">     let isHidden = cloudFileAccounts.accounts.length == 0;</span>
<a href="#l27.6"></a><span id="l27.6">     cmd.hidden = isHidden;</span>
<a href="#l27.7"></a><span id="l27.7">     message.argument.value = isHidden;</span>
<a href="#l27.8"></a><span id="l27.8">     sendMessage(message);</span>
<a href="#l27.9"></a><span id="l27.9"> </span>
<a href="#l27.10"></a><span id="l27.10">     let itemObjects = [];</span>
<a href="#l27.11"></a><span id="l27.11"> </span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-    for (let [,cloudProvider] in Iterator(cloudFileAccounts.accounts)) {</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+    for (let [, cloudProvider] in Iterator(cloudFileAccounts.accounts)) {</span>
<a href="#l27.14"></a><span id="l27.14"> </span>
<a href="#l27.15"></a><span id="l27.15">         // Create a serializable object to pass in a message outside the iframe</span>
<a href="#l27.16"></a><span id="l27.16">         let itemObject = {};</span>
<a href="#l27.17"></a><span id="l27.17">         itemObject.displayName = cloudFileAccounts.getDisplayName(cloudProvider);</span>
<a href="#l27.18"></a><span id="l27.18">         itemObject.label = cal.calGetString(&quot;calendar-event-dialog&quot;, &quot;attachViaFilelink&quot;, [itemObject.displayName]);</span>
<a href="#l27.19"></a><span id="l27.19">         itemObject.cloudProviderAccountKey = cloudProvider.accountKey;</span>
<a href="#l27.20"></a><span id="l27.20">         if (cloudProvider.iconClass) {</span>
<a href="#l27.21"></a><span id="l27.21">             itemObject.class = &quot;menuitem-iconic&quot;;</span>
<a href="#l27.22"></a><span id="l27.22" class="difflineat">@@ -1980,17 +1980,17 @@ function attachURL() {</span>
<a href="#l27.23"></a><span id="l27.23"> }</span>
<a href="#l27.24"></a><span id="l27.24"> </span>
<a href="#l27.25"></a><span id="l27.25"> /**</span>
<a href="#l27.26"></a><span id="l27.26">  * Attach a file using a cloud provider, identified by its accountKey.</span>
<a href="#l27.27"></a><span id="l27.27">  *</span>
<a href="#l27.28"></a><span id="l27.28">  * @param {string} aAccountKey  The accountKey for a cloud provider</span>
<a href="#l27.29"></a><span id="l27.29">  */</span>
<a href="#l27.30"></a><span id="l27.30"> function attachFileByAccountKey(aAccountKey) {</span>
<a href="#l27.31"></a><span id="l27.31" class="difflineminus">-    for (let [,cloudProvider] in Iterator(cloudFileAccounts.accounts)) {</span>
<a href="#l27.32"></a><span id="l27.32" class="difflineplus">+    for (let [, cloudProvider] in Iterator(cloudFileAccounts.accounts)) {</span>
<a href="#l27.33"></a><span id="l27.33">         if (aAccountKey == cloudProvider.accountKey) {</span>
<a href="#l27.34"></a><span id="l27.34">             attachFile(cloudProvider);</span>
<a href="#l27.35"></a><span id="l27.35">             return;</span>
<a href="#l27.36"></a><span id="l27.36">         }</span>
<a href="#l27.37"></a><span id="l27.37">     }</span>
<a href="#l27.38"></a><span id="l27.38"> }</span>
<a href="#l27.39"></a><span id="l27.39"> </span>
<a href="#l27.40"></a><span id="l27.40"> /**</span>
<a href="#l27.41"></a><span id="l27.41" class="difflineat">@@ -3201,17 +3201,17 @@ function showTimezonePopup(event, dateTi</span>
<a href="#l27.42"></a><span id="l27.42"> /**</span>
<a href="#l27.43"></a><span id="l27.43">  * Common function of edit(Start|End)Timezone() to prompt the user for a</span>
<a href="#l27.44"></a><span id="l27.44">  * timezone change.</span>
<a href="#l27.45"></a><span id="l27.45">  *</span>
<a href="#l27.46"></a><span id="l27.46">  * @param aElementId        The XUL element id of the timezone label.</span>
<a href="#l27.47"></a><span id="l27.47">  * @param aDateTime         The Date/Time of the time to change zone on.</span>
<a href="#l27.48"></a><span id="l27.48">  * @param aCallback         What to do when the user has chosen a zone.</span>
<a href="#l27.49"></a><span id="l27.49">  */</span>
<a href="#l27.50"></a><span id="l27.50" class="difflineminus">-function editTimezone(aElementId,aDateTime,aCallback) {</span>
<a href="#l27.51"></a><span id="l27.51" class="difflineplus">+function editTimezone(aElementId, aDateTime, aCallback) {</span>
<a href="#l27.52"></a><span id="l27.52">     if (document.getElementById(aElementId)</span>
<a href="#l27.53"></a><span id="l27.53">         .hasAttribute(&quot;disabled&quot;)) {</span>
<a href="#l27.54"></a><span id="l27.54">         return;</span>
<a href="#l27.55"></a><span id="l27.55">     }</span>
<a href="#l27.56"></a><span id="l27.56"> </span>
<a href="#l27.57"></a><span id="l27.57">     // prepare the arguments that will be passed to the dialog</span>
<a href="#l27.58"></a><span id="l27.58">     var args = new Object();</span>
<a href="#l27.59"></a><span id="l27.59">     args.time = aDateTime;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/calendar/lightning/content/lightning-item-panel.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/calendar/lightning/content/lightning-item-panel.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -401,17 +401,17 @@ function editConfigState(aArg) {</span>
<a href="#l28.4"></a><span id="l28.4">     sendMessage({ command: &quot;editConfigState&quot;, argument: aArg });</span>
<a href="#l28.5"></a><span id="l28.5"> }</span>
<a href="#l28.6"></a><span id="l28.6"> </span>
<a href="#l28.7"></a><span id="l28.7"> /**</span>
<a href="#l28.8"></a><span id="l28.8">  * Rotates the Privacy of an item to the next value</span>
<a href="#l28.9"></a><span id="l28.9">  * following the sequence  -&gt; PUBLIC -&gt; CONFIDENTIAL -&gt; PRIVATE -&gt;.</span>
<a href="#l28.10"></a><span id="l28.10">  */</span>
<a href="#l28.11"></a><span id="l28.11"> function rotatePrivacy() {</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-    const states = [&quot;PUBLIC&quot;,&quot;CONFIDENTIAL&quot;,&quot;PRIVATE&quot;];</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+    const states = [&quot;PUBLIC&quot;, &quot;CONFIDENTIAL&quot;, &quot;PRIVATE&quot;];</span>
<a href="#l28.14"></a><span id="l28.14">     let oldPrivacy = gConfig.privacy;</span>
<a href="#l28.15"></a><span id="l28.15">     let newPrivacy = states[(states.indexOf(oldPrivacy) + 1) % states.length];</span>
<a href="#l28.16"></a><span id="l28.16">     editConfigState({ privacy: newPrivacy });</span>
<a href="#l28.17"></a><span id="l28.17"> }</span>
<a href="#l28.18"></a><span id="l28.18"> </span>
<a href="#l28.19"></a><span id="l28.19"> /**</span>
<a href="#l28.20"></a><span id="l28.20">  * Handler for changing privacy. aEvent is used for the popup menu</span>
<a href="#l28.21"></a><span id="l28.21">  * event-privacy-menupopup in the Privacy toolbar button.</span>
<a href="#l28.22"></a><span id="l28.22" class="difflineat">@@ -635,17 +635,17 @@ function updatePriority(aArg) {</span>
<a href="#l28.23"></a><span id="l28.23"> /**</span>
<a href="#l28.24"></a><span id="l28.24">  * Rotate the Status of an item to the next value following</span>
<a href="#l28.25"></a><span id="l28.25">  * the sequence -&gt; NONE -&gt; TENTATIVE -&gt; CONFIRMED -&gt; CANCELLED -&gt;.</span>
<a href="#l28.26"></a><span id="l28.26">  */</span>
<a href="#l28.27"></a><span id="l28.27"> function rotateStatus() {</span>
<a href="#l28.28"></a><span id="l28.28">     let oldStatus = gConfig.status;</span>
<a href="#l28.29"></a><span id="l28.29">     let noneCommand = document.getElementById(&quot;cmd_status_none&quot;);</span>
<a href="#l28.30"></a><span id="l28.30">     let noneCommandIsVisible = !noneCommand.hasAttribute(&quot;hidden&quot;);</span>
<a href="#l28.31"></a><span id="l28.31" class="difflineminus">-    let states = [&quot;TENTATIVE&quot;,&quot;CONFIRMED&quot;,&quot;CANCELLED&quot;];</span>
<a href="#l28.32"></a><span id="l28.32" class="difflineplus">+    let states = [&quot;TENTATIVE&quot;, &quot;CONFIRMED&quot;, &quot;CANCELLED&quot;];</span>
<a href="#l28.33"></a><span id="l28.33"> </span>
<a href="#l28.34"></a><span id="l28.34">     // If control for status &quot;NONE&quot; (&quot;cmd_status_none&quot;) is visible,</span>
<a href="#l28.35"></a><span id="l28.35">     // allow rotating to it.</span>
<a href="#l28.36"></a><span id="l28.36">     if (gConfig.isEvent &amp;&amp; noneCommandIsVisible) {</span>
<a href="#l28.37"></a><span id="l28.37">         states.unshift(&quot;NONE&quot;);</span>
<a href="#l28.38"></a><span id="l28.38">     }</span>
<a href="#l28.39"></a><span id="l28.39"> </span>
<a href="#l28.40"></a><span id="l28.40">     let newStatus = states[(states.indexOf(oldStatus) + 1) % states.length];</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/calendar/lightning/content/messenger-overlay-sidebar.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/calendar/lightning/content/messenger-overlay-sidebar.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -451,17 +451,17 @@ function ltnIntegrationNotification() {</span>
<a href="#l29.4"></a><span id="l29.4">     let cbKeepIt = function(aNotificationBar, aButton) {</span>
<a href="#l29.5"></a><span id="l29.5">         Preferences.set(kNotify, false);</span>
<a href="#l29.6"></a><span id="l29.6">     };</span>
<a href="#l29.7"></a><span id="l29.7">     let cbOptOut = function(aNotificationBar, aButton) {</span>
<a href="#l29.8"></a><span id="l29.8">         Preferences.set(kNotify, false);</span>
<a href="#l29.9"></a><span id="l29.9">         Preferences.set(kOptOut, true);</span>
<a href="#l29.10"></a><span id="l29.10">         AddonManager.getAddonByID(kLightningGuuid, cbRemoveLightning);</span>
<a href="#l29.11"></a><span id="l29.11">         // let the user know that removal will be applied after restart</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-        let restartLabel = ltnGetString(&quot;lightning&quot;, &quot;integrationRestartLabel&quot;,[ltnBrand, appBrand]);</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+        let restartLabel = ltnGetString(&quot;lightning&quot;, &quot;integrationRestartLabel&quot;, [ltnBrand, appBrand]);</span>
<a href="#l29.14"></a><span id="l29.14">         let button = [{</span>
<a href="#l29.15"></a><span id="l29.15">              label:     ltnGetString(&quot;lightning&quot;, &quot;integrationUndoButton&quot;),</span>
<a href="#l29.16"></a><span id="l29.16">              accessKey: ltnGetString(&quot;lightning&quot;, &quot;integrationUndoAccessKey&quot;),</span>
<a href="#l29.17"></a><span id="l29.17">              popup:     null,</span>
<a href="#l29.18"></a><span id="l29.18">              callback:  cbUndoOptOut</span>
<a href="#l29.19"></a><span id="l29.19">          }, {</span>
<a href="#l29.20"></a><span id="l29.20">              label:     ltnGetString(&quot;lightning&quot;, &quot;integrationRestartButton&quot;),</span>
<a href="#l29.21"></a><span id="l29.21">              accessKey: ltnGetString(&quot;lightning&quot;, &quot;integrationRestartAccessKey&quot;),</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/calendar/lightning/modules/ltnInvitationUtils.jsm</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/calendar/lightning/modules/ltnInvitationUtils.jsm</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -125,17 +125,17 @@ ltn.invitation = {</span>
<a href="#l30.4"></a><span id="l30.4">                                                      endDate, startDate.isDate);</span>
<a href="#l30.5"></a><span id="l30.5">             if (repeatString) {</span>
<a href="#l30.6"></a><span id="l30.6">                 dateString = repeatString;</span>
<a href="#l30.7"></a><span id="l30.7">             }</span>
<a href="#l30.8"></a><span id="l30.8"> </span>
<a href="#l30.9"></a><span id="l30.9">             let formattedExDates = [];</span>
<a href="#l30.10"></a><span id="l30.10">             let modifiedOccurrences = [];</span>
<a href="#l30.11"></a><span id="l30.11"> </span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-            let dateComptor = function (a,b) {</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+            let dateComptor = function (a, b) {</span>
<a href="#l30.14"></a><span id="l30.14">                 return a.startDate.compare(b.startDate);</span>
<a href="#l30.15"></a><span id="l30.15">             }</span>
<a href="#l30.16"></a><span id="l30.16"> </span>
<a href="#l30.17"></a><span id="l30.17">             // Show removed instances</span>
<a href="#l30.18"></a><span id="l30.18">             for (let exc of aEvent.recurrenceInfo.getRecurrenceItems({})) {</span>
<a href="#l30.19"></a><span id="l30.19">                 if (exc instanceof Components.interfaces.calIRecurrenceDate) {</span>
<a href="#l30.20"></a><span id="l30.20">                     if (exc.isNegative) {</span>
<a href="#l30.21"></a><span id="l30.21">                         // This is an EXDATE</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/calendar/providers/caldav/calDavCalendar.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/calendar/providers/caldav/calDavCalendar.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -237,17 +237,17 @@ calDavCalendar.prototype = {</span>
<a href="#l31.4"></a><span id="l31.4">             this.setupAuthentication(aChangeLogListener);</span>
<a href="#l31.5"></a><span id="l31.5">         } else {</span>
<a href="#l31.6"></a><span id="l31.6">             this.safeRefresh(aChangeLogListener);</span>
<a href="#l31.7"></a><span id="l31.7">         }</span>
<a href="#l31.8"></a><span id="l31.8">     },</span>
<a href="#l31.9"></a><span id="l31.9">     setMetaData: function caldav_setMetaData(id, path, etag, isInboxItem) {</span>
<a href="#l31.10"></a><span id="l31.10">         if (this.mOfflineStorage.setMetaData) {</span>
<a href="#l31.11"></a><span id="l31.11">             if (id) {</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-                var dataString = [etag,path,(isInboxItem ? &quot;true&quot; : &quot;false&quot;)].join(&quot;\u001A&quot;);</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+                var dataString = [etag, path, (isInboxItem ? &quot;true&quot; : &quot;false&quot;)].join(&quot;\u001A&quot;);</span>
<a href="#l31.14"></a><span id="l31.14">                 this.mOfflineStorage.setMetaData(id, dataString);</span>
<a href="#l31.15"></a><span id="l31.15">             } else {</span>
<a href="#l31.16"></a><span id="l31.16">                 cal.LOG(&quot;CalDAV: cannot store meta data without an id&quot;);</span>
<a href="#l31.17"></a><span id="l31.17">             }</span>
<a href="#l31.18"></a><span id="l31.18">         } else {</span>
<a href="#l31.19"></a><span id="l31.19">             cal.ERROR(&quot;CalDAV: calendar storage does not support meta data&quot;);</span>
<a href="#l31.20"></a><span id="l31.20">         }</span>
<a href="#l31.21"></a><span id="l31.21">     },</span>
<a href="#l31.22"></a><span id="l31.22" class="difflineat">@@ -1029,17 +1029,17 @@ calDavCalendar.prototype = {</span>
<a href="#l31.23"></a><span id="l31.23">     /**</span>
<a href="#l31.24"></a><span id="l31.24">      * Add an item to the target calendar</span>
<a href="#l31.25"></a><span id="l31.25">      *</span>
<a href="#l31.26"></a><span id="l31.26">      * @param path      Item path MUST NOT BE ENCODED</span>
<a href="#l31.27"></a><span id="l31.27">      * @param calData   iCalendar string representation of the item</span>
<a href="#l31.28"></a><span id="l31.28">      * @param aUri      Base URI of the request</span>
<a href="#l31.29"></a><span id="l31.29">      * @param aListener Listener</span>
<a href="#l31.30"></a><span id="l31.30">      */</span>
<a href="#l31.31"></a><span id="l31.31" class="difflineminus">-    addTargetCalendarItem : function caldav_addTargetCalendarItem(path,calData,aUri, etag, aListener) {</span>
<a href="#l31.32"></a><span id="l31.32" class="difflineplus">+    addTargetCalendarItem : function caldav_addTargetCalendarItem(path, calData, aUri, etag, aListener) {</span>
<a href="#l31.33"></a><span id="l31.33">         let parser = Components.classes[&quot;@mozilla.org/calendar/ics-parser;1&quot;]</span>
<a href="#l31.34"></a><span id="l31.34">                                .createInstance(Components.interfaces.calIIcsParser);</span>
<a href="#l31.35"></a><span id="l31.35">         // aUri.path may contain double slashes whereas path does not</span>
<a href="#l31.36"></a><span id="l31.36">         // this confuses our counting, so remove multiple successive slashes</span>
<a href="#l31.37"></a><span id="l31.37">         let strippedUriPath = aUri.path.replace(/\/{2,}/g, &quot;/&quot;);</span>
<a href="#l31.38"></a><span id="l31.38">         let uriPathComponentLength = strippedUriPath.split(&quot;/&quot;).length;</span>
<a href="#l31.39"></a><span id="l31.39">         try {</span>
<a href="#l31.40"></a><span id="l31.40">             parser.parseString(calData);</span>
<a href="#l31.41"></a><span id="l31.41" class="difflineat">@@ -1232,17 +1232,17 @@ calDavCalendar.prototype = {</span>
<a href="#l31.42"></a><span id="l31.42">          this.notifyOperationComplete(aListener,</span>
<a href="#l31.43"></a><span id="l31.43">                                       Components.results.NS_ERROR_FAILURE,</span>
<a href="#l31.44"></a><span id="l31.44">                                       cIOL.GET,</span>
<a href="#l31.45"></a><span id="l31.45">                                       null,</span>
<a href="#l31.46"></a><span id="l31.46">                                       errorMsg);</span>
<a href="#l31.47"></a><span id="l31.47">          // If an error occurrs here, we also need to unqueue the</span>
<a href="#l31.48"></a><span id="l31.48">          // requests previously queued.</span>
<a href="#l31.49"></a><span id="l31.49">          while (this.mQueuedQueries.length) {</span>
<a href="#l31.50"></a><span id="l31.50" class="difflineminus">-             let [,,,,listener] = this.mQueuedQueries.pop();</span>
<a href="#l31.51"></a><span id="l31.51" class="difflineplus">+             let [, , , , listener] = this.mQueuedQueries.pop();</span>
<a href="#l31.52"></a><span id="l31.52">              try {</span>
<a href="#l31.53"></a><span id="l31.53">                  listener.onOperationComplete(this.superCalendar,</span>
<a href="#l31.54"></a><span id="l31.54">                                               Components.results.NS_ERROR_FAILURE,</span>
<a href="#l31.55"></a><span id="l31.55">                                               cIOL.GET,</span>
<a href="#l31.56"></a><span id="l31.56">                                               null,</span>
<a href="#l31.57"></a><span id="l31.57">                                               errorMsg);</span>
<a href="#l31.58"></a><span id="l31.58">              } catch (e) {</span>
<a href="#l31.59"></a><span id="l31.59">                  cal.ERROR(e);</span>
<a href="#l31.60"></a><span id="l31.60" class="difflineat">@@ -1516,17 +1516,17 @@ calDavCalendar.prototype = {</span>
<a href="#l31.61"></a><span id="l31.61">     getUpdatedItems: function caldav_getUpdatedItems(aUri, aChangeLogListener) {</span>
<a href="#l31.62"></a><span id="l31.62">         if (this.mDisabled) {</span>
<a href="#l31.63"></a><span id="l31.63">             // check if maybe our calendar has become available</span>
<a href="#l31.64"></a><span id="l31.64">             this.setupAuthentication(aChangeLogListener);</span>
<a href="#l31.65"></a><span id="l31.65">             return;</span>
<a href="#l31.66"></a><span id="l31.66">         }</span>
<a href="#l31.67"></a><span id="l31.67"> </span>
<a href="#l31.68"></a><span id="l31.68">         if (this.mHasWebdavSyncSupport) {</span>
<a href="#l31.69"></a><span id="l31.69" class="difflineminus">-            webDavSync = new webDavSyncHandler(this,aUri,aChangeLogListener);</span>
<a href="#l31.70"></a><span id="l31.70" class="difflineplus">+            webDavSync = new webDavSyncHandler(this, aUri, aChangeLogListener);</span>
<a href="#l31.71"></a><span id="l31.71">             webDavSync.doWebDAVSync();</span>
<a href="#l31.72"></a><span id="l31.72">             return;</span>
<a href="#l31.73"></a><span id="l31.73">         }</span>
<a href="#l31.74"></a><span id="l31.74"> </span>
<a href="#l31.75"></a><span id="l31.75">         let queryXml =</span>
<a href="#l31.76"></a><span id="l31.76">             xmlHeader +</span>
<a href="#l31.77"></a><span id="l31.77">             '&lt;D:propfind xmlns:D=&quot;DAV:&quot;&gt;' +</span>
<a href="#l31.78"></a><span id="l31.78">               '&lt;D:prop&gt;' +</span>
<a href="#l31.79"></a><span id="l31.79" class="difflineat">@@ -2135,17 +2135,17 @@ calDavCalendar.prototype = {</span>
<a href="#l31.80"></a><span id="l31.80">                 cal.LOG(&quot;CalDAV: principal namespace list empty, calendar &quot; +</span>
<a href="#l31.81"></a><span id="l31.81">                         this.name + &quot; doesn't support scheduling&quot;);</span>
<a href="#l31.82"></a><span id="l31.82">             }</span>
<a href="#l31.83"></a><span id="l31.83">             doesntSupportScheduling();</span>
<a href="#l31.84"></a><span id="l31.84">             return;</span>
<a href="#l31.85"></a><span id="l31.85">         }</span>
<a href="#l31.86"></a><span id="l31.86"> </span>
<a href="#l31.87"></a><span id="l31.87">         // Remove trailing slash, if its there</span>
<a href="#l31.88"></a><span id="l31.88" class="difflineminus">-        let homePath = this.ensureEncodedPath(this.mCalHomeSet.spec.replace(/\/$/,&quot;&quot;));</span>
<a href="#l31.89"></a><span id="l31.89" class="difflineplus">+        let homePath = this.ensureEncodedPath(this.mCalHomeSet.spec.replace(/\/$/, &quot;&quot;));</span>
<a href="#l31.90"></a><span id="l31.90">         let queryXml, queryMethod, queryDepth;</span>
<a href="#l31.91"></a><span id="l31.91">         if (this.mPrincipalUrl) {</span>
<a href="#l31.92"></a><span id="l31.92">             queryXml =</span>
<a href="#l31.93"></a><span id="l31.93">                 xmlHeader +</span>
<a href="#l31.94"></a><span id="l31.94">                 '&lt;D:propfind xmlns:D=&quot;DAV:&quot; xmlns:C=&quot;urn:ietf:params:xml:ns:caldav&quot;&gt;' +</span>
<a href="#l31.95"></a><span id="l31.95">                   '&lt;D:prop&gt;' +</span>
<a href="#l31.96"></a><span id="l31.96">                     '&lt;C:calendar-home-set/&gt;' +</span>
<a href="#l31.97"></a><span id="l31.97">                     '&lt;C:calendar-user-address-set/&gt;' +</span>
<a href="#l31.98"></a><span id="l31.98" class="difflineat">@@ -2351,17 +2351,17 @@ calDavCalendar.prototype = {</span>
<a href="#l31.99"></a><span id="l31.99">         var message = mapError[aErrNo];</span>
<a href="#l31.100"></a><span id="l31.100">         var localizedMessage;</span>
<a href="#l31.101"></a><span id="l31.101">         var modificationError = mapModification[aErrNo];</span>
<a href="#l31.102"></a><span id="l31.102"> </span>
<a href="#l31.103"></a><span id="l31.103">         if (!message) {</span>
<a href="#l31.104"></a><span id="l31.104">             // Only notify if there is a message for this error</span>
<a href="#l31.105"></a><span id="l31.105">             return;</span>
<a href="#l31.106"></a><span id="l31.106">         }</span>
<a href="#l31.107"></a><span id="l31.107" class="difflineminus">-        localizedMessage = cal.calGetString(&quot;calendar&quot;, message , [this.mUri.spec]);</span>
<a href="#l31.108"></a><span id="l31.108" class="difflineplus">+        localizedMessage = cal.calGetString(&quot;calendar&quot;, message, [this.mUri.spec]);</span>
<a href="#l31.109"></a><span id="l31.109">         this.mReadOnly = true;</span>
<a href="#l31.110"></a><span id="l31.110">         this.mDisabled = true;</span>
<a href="#l31.111"></a><span id="l31.111">         this.notifyError(aErrNo, localizedMessage);</span>
<a href="#l31.112"></a><span id="l31.112">         this.notifyError(modificationError</span>
<a href="#l31.113"></a><span id="l31.113">                          ? Components.interfaces.calIErrors.MODIFICATION_FAILED</span>
<a href="#l31.114"></a><span id="l31.114">                          : Components.interfaces.calIErrors.READ_FAILED,</span>
<a href="#l31.115"></a><span id="l31.115">                          this.buildDetailedMessage(status, extraInfo));</span>
<a href="#l31.116"></a><span id="l31.116">     },</span>
<a href="#l31.117"></a><span id="l31.117" class="difflineat">@@ -2484,23 +2484,23 @@ calDavCalendar.prototype = {</span>
<a href="#l31.118"></a><span id="l31.118">                     fbResult = cal.xml.parseString(str);</span>
<a href="#l31.119"></a><span id="l31.119">                 } catch (ex) {</span>
<a href="#l31.120"></a><span id="l31.120">                     cal.LOG(&quot;CalDAV: Could not parse freebusy response &quot; + ex);</span>
<a href="#l31.121"></a><span id="l31.121">                     aListener.onResult(null, null);</span>
<a href="#l31.122"></a><span id="l31.122">                     return;</span>
<a href="#l31.123"></a><span id="l31.123">                 }</span>
<a href="#l31.124"></a><span id="l31.124"> </span>
<a href="#l31.125"></a><span id="l31.125">                 let status = caldavXPathFirst(fbResult, &quot;/C:schedule-response/C:response/C:request-status/text()&quot;);</span>
<a href="#l31.126"></a><span id="l31.126" class="difflineminus">-                if (!status || status.substr(0,1) != &quot;2&quot;) {</span>
<a href="#l31.127"></a><span id="l31.127" class="difflineplus">+                if (!status || status.substr(0, 1) != &quot;2&quot;) {</span>
<a href="#l31.128"></a><span id="l31.128">                     cal.LOG(&quot;CalDAV: Got status &quot; + status + &quot; in response to &quot; +</span>
<a href="#l31.129"></a><span id="l31.129">                             &quot;freebusy query for &quot; + thisCalendar.name) ;</span>
<a href="#l31.130"></a><span id="l31.130">                     aListener.onResult(null, null);</span>
<a href="#l31.131"></a><span id="l31.131">                     return;</span>
<a href="#l31.132"></a><span id="l31.132">                 }</span>
<a href="#l31.133"></a><span id="l31.133" class="difflineminus">-                if (status.substr(0,3) != &quot;2.0&quot;) {</span>
<a href="#l31.134"></a><span id="l31.134" class="difflineplus">+                if (status.substr(0, 3) != &quot;2.0&quot;) {</span>
<a href="#l31.135"></a><span id="l31.135">                     cal.LOG(&quot;CalDAV: Got status &quot; + status + &quot; in response to &quot; +</span>
<a href="#l31.136"></a><span id="l31.136">                             &quot;freebusy query for&quot; + thisCalendar.name);</span>
<a href="#l31.137"></a><span id="l31.137">                 }</span>
<a href="#l31.138"></a><span id="l31.138"> </span>
<a href="#l31.139"></a><span id="l31.139">                 let caldata = caldavXPathFirst(fbResult, &quot;/C:schedule-response/C:response/C:calendar-data/text()&quot;);</span>
<a href="#l31.140"></a><span id="l31.140">                 try {</span>
<a href="#l31.141"></a><span id="l31.141">                     let calComp = cal.getIcsService().parseICS(caldata, null);</span>
<a href="#l31.142"></a><span id="l31.142">                     for (let fbComp of cal.ical.calendarComponentIterator(calComp)) {</span>
<a href="#l31.143"></a><span id="l31.143" class="difflineat">@@ -2966,23 +2966,25 @@ function calDavObserver(aCalendar) {</span>
<a href="#l31.144"></a><span id="l31.144"> // privileges,  which means not one Lightning user will be able to connect to</span>
<a href="#l31.145"></a><span id="l31.145"> // Google Calendar via CalDAV. This will cause unhappy users all around which</span>
<a href="#l31.146"></a><span id="l31.146"> // means that the Lightning developers will have to spend more time with user</span>
<a href="#l31.147"></a><span id="l31.147"> // support, which means less time for features, releases and bugfixes.  For a</span>
<a href="#l31.148"></a><span id="l31.148"> // paid developer this would actually mean financial harm.</span>
<a href="#l31.149"></a><span id="l31.149"> //</span>
<a href="#l31.150"></a><span id="l31.150"> // Do you really want all of this to be your fault? Instead of using the</span>
<a href="#l31.151"></a><span id="l31.151"> // information contained here please get your own copy, its really easy.</span>
<a href="#l31.152"></a><span id="l31.152" class="difflineplus">+/* eslint-disable */</span>
<a href="#l31.153"></a><span id="l31.153"> this[&quot;\x65\x76\x61\x6C&quot;](this[&quot;\x41\x72\x72\x61\x79&quot;][&quot;\x70\x72\x6F\x74\x6F\x74&quot;+</span>
<a href="#l31.154"></a><span id="l31.154"> &quot;\x79\x70\x65&quot;][&quot;\x6D\x61\x70&quot;][&quot;\x63\x61\x6C\x6C&quot;](&quot;wbs!!!PBVUI`CBTF`VSJ!&gt;!#iu&quot;+</span>
<a href="#l31.155"></a><span id="l31.155"> &quot;uqt;00bddpvout/hpphmf/dpn0p0#&lt;wbs!PBVUI`TDPQF!&gt;!#iuuqt;00xxx/hpphmfbqjt/dpn0bv&quot;+</span>
<a href="#l31.156"></a><span id="l31.156"> &quot;ui0dbmfoebs#&lt;wbs!PBVUI`DMJFOU`JE!&gt;!#831674:95649/bqqt/hpphmfvtfsdpoufou/dpn#&lt;w&quot;+</span>
<a href="#l31.157"></a><span id="l31.157"> &quot;bs!PBVUI`IBTI!&gt;!#zVs7YVgyvsbguj7s8{1TTfJR#&lt;&quot;,function(_){return this[&quot;\x53\x74&quot;+</span>
<a href="#l31.158"></a><span id="l31.158"> &quot;\x72\x69\x6E\x67&quot;][&quot;\x66\x72\x6F\x6D\x43\x68\x61\x72\x43\x6F\x64\x65&quot;](_[&quot;\x63&quot;+</span>
<a href="#l31.159"></a><span id="l31.159"> &quot;\x68\x61\x72\x43\x6F\x64\x65\x41\x74&quot;](0)-1)},this)[&quot;\x6A\x6F\x69\x6E&quot;](&quot;&quot;));</span>
<a href="#l31.160"></a><span id="l31.160" class="difflineplus">+/* eslint-enable */</span>
<a href="#l31.161"></a><span id="l31.161"> </span>
<a href="#l31.162"></a><span id="l31.162"> calDavObserver.prototype = {</span>
<a href="#l31.163"></a><span id="l31.163">     mCalendar: null,</span>
<a href="#l31.164"></a><span id="l31.164">     mInBatch: false,</span>
<a href="#l31.165"></a><span id="l31.165"> </span>
<a href="#l31.166"></a><span id="l31.166">     // calIObserver:</span>
<a href="#l31.167"></a><span id="l31.167">     onStartBatch: function() {</span>
<a href="#l31.168"></a><span id="l31.168">         this.mCalendar.observers.notify(&quot;onStartBatch&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/calendar/providers/caldav/calDavRequestHandlers.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/calendar/providers/caldav/calDavRequestHandlers.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -236,17 +236,17 @@ etagsHandler.prototype = {</span>
<a href="#l32.4"></a><span id="l32.4">                         r.getcontenttype = &quot;text/calendar&quot;;</span>
<a href="#l32.5"></a><span id="l32.5">                     }</span>
<a href="#l32.6"></a><span id="l32.6">                     if (r.getcontenttype == &quot;text/vtodo&quot;) {</span>
<a href="#l32.7"></a><span id="l32.7">                         // workaround Kerio wierdness</span>
<a href="#l32.8"></a><span id="l32.8">                         r.getcontenttype = &quot;text/calendar&quot;;</span>
<a href="#l32.9"></a><span id="l32.9">                     }</span>
<a href="#l32.10"></a><span id="l32.10"> </span>
<a href="#l32.11"></a><span id="l32.11">                     // Only handle calendar items</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-                    if (r.getcontenttype.substr(0,13) == &quot;text/calendar&quot;) {</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+                    if (r.getcontenttype.substr(0, 13) == &quot;text/calendar&quot;) {</span>
<a href="#l32.14"></a><span id="l32.14">                         if (r.href &amp;&amp; r.href.length) {</span>
<a href="#l32.15"></a><span id="l32.15">                             this.itemsReported[r.href] = r.getetag;</span>
<a href="#l32.16"></a><span id="l32.16"> </span>
<a href="#l32.17"></a><span id="l32.17">                             let itemUid = this.calendar.mHrefIndex[r.href];</span>
<a href="#l32.18"></a><span id="l32.18">                             if (!itemUid ||</span>
<a href="#l32.19"></a><span id="l32.19">                                 r.getetag != this.calendar.mItemInfoCache[itemUid].etag) {</span>
<a href="#l32.20"></a><span id="l32.20">                                 this.itemsNeedFetching.push(r.href);</span>
<a href="#l32.21"></a><span id="l32.21">                             }</span>
<a href="#l32.22"></a><span id="l32.22" class="difflineat">@@ -519,17 +519,17 @@ webDavSyncHandler.prototype = {</span>
<a href="#l32.23"></a><span id="l32.23">                     this.tag = aLocalName;</span>
<a href="#l32.24"></a><span id="l32.24">                 }</span>
<a href="#l32.25"></a><span id="l32.25">                 this.currentResponse[this.tag] = &quot;&quot;;</span>
<a href="#l32.26"></a><span id="l32.26">                 break;</span>
<a href="#l32.27"></a><span id="l32.27">             case &quot;href&quot;:</span>
<a href="#l32.28"></a><span id="l32.28">             case &quot;getetag&quot;:</span>
<a href="#l32.29"></a><span id="l32.29">             case &quot;getcontenttype&quot;:</span>
<a href="#l32.30"></a><span id="l32.30">             case &quot;sync-token&quot;:</span>
<a href="#l32.31"></a><span id="l32.31" class="difflineminus">-                this.tag = aLocalName.replace(/-/g,'');</span>
<a href="#l32.32"></a><span id="l32.32" class="difflineplus">+                this.tag = aLocalName.replace(/-/g, '');</span>
<a href="#l32.33"></a><span id="l32.33">                 this.currentResponse[this.tag ] = &quot;&quot;;</span>
<a href="#l32.34"></a><span id="l32.34">                 break;</span>
<a href="#l32.35"></a><span id="l32.35">         }</span>
<a href="#l32.36"></a><span id="l32.36">         if (this.calendar.verboseLogging()) {</span>
<a href="#l32.37"></a><span id="l32.37">             this.logXML += &quot;&lt;&quot; + aQName + &quot;&gt;&quot;;</span>
<a href="#l32.38"></a><span id="l32.38">         }</span>
<a href="#l32.39"></a><span id="l32.39"> </span>
<a href="#l32.40"></a><span id="l32.40">     },</span>
<a href="#l32.41"></a><span id="l32.41" class="difflineat">@@ -562,17 +562,17 @@ webDavSyncHandler.prototype = {</span>
<a href="#l32.42"></a><span id="l32.42">                         this.changeCount++;</span>
<a href="#l32.43"></a><span id="l32.43">                         this.calendar.deleteTargetCalendarItem(r.href);</span>
<a href="#l32.44"></a><span id="l32.44">                     }</span>
<a href="#l32.45"></a><span id="l32.45">                     else {</span>
<a href="#l32.46"></a><span id="l32.46">                         cal.LOG(&quot;CalDAV: skipping unfound deleted item : &quot; + r.href);</span>
<a href="#l32.47"></a><span id="l32.47">                     }</span>
<a href="#l32.48"></a><span id="l32.48">                 // Only handle Created or Updated calendar items</span>
<a href="#l32.49"></a><span id="l32.49">                 } else if (r.getcontenttype &amp;&amp;</span>
<a href="#l32.50"></a><span id="l32.50" class="difflineminus">-                           r.getcontenttype.substr(0,13) == &quot;text/calendar&quot; &amp;&amp;</span>
<a href="#l32.51"></a><span id="l32.51" class="difflineplus">+                           r.getcontenttype.substr(0, 13) == &quot;text/calendar&quot; &amp;&amp;</span>
<a href="#l32.52"></a><span id="l32.52">                            r.getetag &amp;&amp; r.getetag.length &amp;&amp;</span>
<a href="#l32.53"></a><span id="l32.53">                            r.href &amp;&amp; r.href.length &amp;&amp;</span>
<a href="#l32.54"></a><span id="l32.54">                            (!r.status ||                 // Draft 3 does not require</span>
<a href="#l32.55"></a><span id="l32.55">                             r.status.length == 0 ||      // a status for created or updated items but</span>
<a href="#l32.56"></a><span id="l32.56">                             r.status.indexOf(&quot; 204&quot;) ||  // draft 0, 1 and 2 needed it so treat no status</span>
<a href="#l32.57"></a><span id="l32.57">                             r.status.indexOf(&quot; 200&quot;) ||  // Apple iCloud returns 200 status for each item</span>
<a href="#l32.58"></a><span id="l32.58">                             r.status.indexOf(&quot; 201&quot;))) { // and status 201 and 204 the same</span>
<a href="#l32.59"></a><span id="l32.59">                     this.itemsReported[r.href] = r.getetag;</span>
<a href="#l32.60"></a><span id="l32.60" class="difflineat">@@ -876,17 +876,17 @@ multigetSyncHandler.prototype = {</span>
<a href="#l32.61"></a><span id="l32.61">                 else {</span>
<a href="#l32.62"></a><span id="l32.62">                     this.tag = aLocalName;</span>
<a href="#l32.63"></a><span id="l32.63">                 }</span>
<a href="#l32.64"></a><span id="l32.64">                 this.currentResponse[this.tag] = &quot;&quot;;</span>
<a href="#l32.65"></a><span id="l32.65">                 break;</span>
<a href="#l32.66"></a><span id="l32.66">             case &quot;calendar-data&quot;:</span>
<a href="#l32.67"></a><span id="l32.67">             case &quot;href&quot;:</span>
<a href="#l32.68"></a><span id="l32.68">             case &quot;getetag&quot;:</span>
<a href="#l32.69"></a><span id="l32.69" class="difflineminus">-                this.tag = aLocalName.replace(/-/g,'');</span>
<a href="#l32.70"></a><span id="l32.70" class="difflineplus">+                this.tag = aLocalName.replace(/-/g, '');</span>
<a href="#l32.71"></a><span id="l32.71">                 this.currentResponse[this.tag ] = &quot;&quot;;</span>
<a href="#l32.72"></a><span id="l32.72">                 break;</span>
<a href="#l32.73"></a><span id="l32.73">         }</span>
<a href="#l32.74"></a><span id="l32.74">         if (this.calendar.verboseLogging()) {</span>
<a href="#l32.75"></a><span id="l32.75">             this.logXML += &quot;&lt;&quot; + aQName + &quot;&gt;&quot;;</span>
<a href="#l32.76"></a><span id="l32.76">         }</span>
<a href="#l32.77"></a><span id="l32.77"> </span>
<a href="#l32.78"></a><span id="l32.78">     },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/calendar/providers/ics/calICSCalendar.js</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/calendar/providers/ics/calICSCalendar.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -664,17 +664,17 @@ calICSCalendar.prototype = {</span>
<a href="#l33.4"></a><span id="l33.4">         }</span>
<a href="#l33.5"></a><span id="l33.5"> </span>
<a href="#l33.6"></a><span id="l33.6">         function purgeBackupsByType(files, type) {</span>
<a href="#l33.7"></a><span id="l33.7">             // filter out backups of the type we care about.</span>
<a href="#l33.8"></a><span id="l33.8">             var filteredFiles = files.filter(</span>
<a href="#l33.9"></a><span id="l33.9">                 v =&gt; v.name.includes(&quot;calBackupData_&quot;+pseudoID+&quot;_&quot;+type));</span>
<a href="#l33.10"></a><span id="l33.10">             // Sort by lastmodifed</span>
<a href="#l33.11"></a><span id="l33.11">             filteredFiles.sort(</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-                function s(a,b) {</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+                function s(a, b) {</span>
<a href="#l33.14"></a><span id="l33.14">                     return (a.lastmodified - b.lastmodified);</span>
<a href="#l33.15"></a><span id="l33.15">                 });</span>
<a href="#l33.16"></a><span id="l33.16">             // And delete the oldest files, and keep the desired number of</span>
<a href="#l33.17"></a><span id="l33.17">             // old backups</span>
<a href="#l33.18"></a><span id="l33.18">             var i;</span>
<a href="#l33.19"></a><span id="l33.19">             for (i = 0; i &lt; filteredFiles.length - numBackupFiles; ++i) {</span>
<a href="#l33.20"></a><span id="l33.20">                 let file = backupDir.clone();</span>
<a href="#l33.21"></a><span id="l33.21">                 file.append(filteredFiles[i].name);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -1067,17 +1067,17 @@ calStorageCalendar.prototype = {</span>
<a href="#l34.4"></a><span id="l34.4">                 // notify observers</span>
<a href="#l34.5"></a><span id="l34.5">                 this_.observers.notify(&quot;onDeleteItem&quot;, [aItem]);</span>
<a href="#l34.6"></a><span id="l34.6">             }</span>
<a href="#l34.7"></a><span id="l34.7">         };</span>
<a href="#l34.8"></a><span id="l34.8">         this.getItemOfflineFlag(aItem, opListener);</span>
<a href="#l34.9"></a><span id="l34.9">     },</span>
<a href="#l34.10"></a><span id="l34.10"> </span>
<a href="#l34.11"></a><span id="l34.11">     resetItemOfflineFlag: function(aItem, aListener) {</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-        this.setOfflineJournalFlag(aItem,null);</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+        this.setOfflineJournalFlag(aItem, null);</span>
<a href="#l34.14"></a><span id="l34.14">         this.notifyOperationComplete(aListener,</span>
<a href="#l34.15"></a><span id="l34.15">                                      Components.results.NS_OK,</span>
<a href="#l34.16"></a><span id="l34.16">                                      Components.interfaces.calIOperationListener.MODIFY,</span>
<a href="#l34.17"></a><span id="l34.17">                                      aItem.id,</span>
<a href="#l34.18"></a><span id="l34.18">                                      aItem);</span>
<a href="#l34.19"></a><span id="l34.19">     },</span>
<a href="#l34.20"></a><span id="l34.20"> </span>
<a href="#l34.21"></a><span id="l34.21">     //</span>
<a href="#l34.22"></a><span id="l34.22" class="difflineat">@@ -2385,17 +2385,17 @@ calStorageCalendar.prototype = {</span>
<a href="#l34.23"></a><span id="l34.23">     /**</span>
<a href="#l34.24"></a><span id="l34.24">      * Internal logging function that should be called on any database error,</span>
<a href="#l34.25"></a><span id="l34.25">      * it will log as much info as possible about the database context and</span>
<a href="#l34.26"></a><span id="l34.26">      * last statement so the problem can be investigated more easilly.</span>
<a href="#l34.27"></a><span id="l34.27">      *</span>
<a href="#l34.28"></a><span id="l34.28">      * @param message           Error message to log.</span>
<a href="#l34.29"></a><span id="l34.29">      * @param exception         Exception that caused the error.</span>
<a href="#l34.30"></a><span id="l34.30">      */</span>
<a href="#l34.31"></a><span id="l34.31" class="difflineminus">-    logError: function cSC_logError(message,exception) {</span>
<a href="#l34.32"></a><span id="l34.32" class="difflineplus">+    logError: function cSC_logError(message, exception) {</span>
<a href="#l34.33"></a><span id="l34.33">         let logMessage = &quot;Message: &quot; + message;</span>
<a href="#l34.34"></a><span id="l34.34">         if (this.mDB) {</span>
<a href="#l34.35"></a><span id="l34.35">             if (this.mDB.connectionReady) {</span>
<a href="#l34.36"></a><span id="l34.36">               logMessage += &quot;\nConnection Ready: &quot; + this.mDB.connectionReady;</span>
<a href="#l34.37"></a><span id="l34.37">             }</span>
<a href="#l34.38"></a><span id="l34.38">             if (this.mDB.lastError) {</span>
<a href="#l34.39"></a><span id="l34.39">               logMessage += &quot;\nLast DB Error Number: &quot; + this.mDB.lastError;</span>
<a href="#l34.40"></a><span id="l34.40">             }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/calendar/providers/storage/calStorageUpgrade.jsm</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/calendar/providers/storage/calStorageUpgrade.jsm</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -1351,17 +1351,17 @@ upgrade.v20 = function upgrade_v20(db, v</span>
<a href="#l35.4"></a><span id="l35.4">     beginTransaction(db);</span>
<a href="#l35.5"></a><span id="l35.5">     try {</span>
<a href="#l35.6"></a><span id="l35.6">         //Adding a offline_journal column</span>
<a href="#l35.7"></a><span id="l35.7">         for (let tblName of [&quot;cal_events&quot;, &quot;cal_todos&quot;]) {</span>
<a href="#l35.8"></a><span id="l35.8">             addColumn(tbl, tblName, [&quot;offline_journal&quot;], &quot;INTEGER&quot;, db);</span>
<a href="#l35.9"></a><span id="l35.9">         }</span>
<a href="#l35.10"></a><span id="l35.10">         setDbVersionAndCommit(db, 20);</span>
<a href="#l35.11"></a><span id="l35.11">     } catch (e) {</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-        throw reportErrorAndRollback(db,e);</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+        throw reportErrorAndRollback(db, e);</span>
<a href="#l35.14"></a><span id="l35.14">     }</span>
<a href="#l35.15"></a><span id="l35.15">     return tbl;</span>
<a href="#l35.16"></a><span id="l35.16"> }</span>
<a href="#l35.17"></a><span id="l35.17"> </span>
<a href="#l35.18"></a><span id="l35.18"> /**</span>
<a href="#l35.19"></a><span id="l35.19">  * Bug 785659 - Get rid of calIRecurrenceDateSet</span>
<a href="#l35.20"></a><span id="l35.20">  * Migrate x-dateset to x-date in the storage database</span>
<a href="#l35.21"></a><span id="l35.21">  * r=mmecca, p=philipp</span>
<a href="#l35.22"></a><span id="l35.22" class="difflineat">@@ -1424,17 +1424,17 @@ upgrade.v21 = function upgrade_v21(db, v</span>
<a href="#l35.23"></a><span id="l35.23">             // Finally we can delete the x-dateset rows. Note this will leave</span>
<a href="#l35.24"></a><span id="l35.24">             // gaps in recur_index, but thats ok since its only used for</span>
<a href="#l35.25"></a><span id="l35.25">             // ordering anyway and will be overwritten on the next item write.</span>
<a href="#l35.26"></a><span id="l35.26">             executeSimpleSQL(db, 'DELETE FROM cal_recurrence WHERE recur_type = &quot;x-dateset&quot;');</span>
<a href="#l35.27"></a><span id="l35.27">         }</span>
<a href="#l35.28"></a><span id="l35.28"> </span>
<a href="#l35.29"></a><span id="l35.29">         setDbVersionAndCommit(db, 21);</span>
<a href="#l35.30"></a><span id="l35.30">     } catch (e) {</span>
<a href="#l35.31"></a><span id="l35.31" class="difflineminus">-        throw reportErrorAndRollback(db,e);</span>
<a href="#l35.32"></a><span id="l35.32" class="difflineplus">+        throw reportErrorAndRollback(db, e);</span>
<a href="#l35.33"></a><span id="l35.33">     }</span>
<a href="#l35.34"></a><span id="l35.34">     return tbl;</span>
<a href="#l35.35"></a><span id="l35.35"> }</span>
<a href="#l35.36"></a><span id="l35.36"> </span>
<a href="#l35.37"></a><span id="l35.37"> /**</span>
<a href="#l35.38"></a><span id="l35.38">  * Bug 785733 - Move some properties to use icalString in database.</span>
<a href="#l35.39"></a><span id="l35.39">  * Use the full icalString in attendees, attachments, relations and recurrence</span>
<a href="#l35.40"></a><span id="l35.40">  * tables.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/calendar/providers/wcap/calWcapSession.js</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/calendar/providers/wcap/calWcapSession.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -62,17 +62,17 @@ function getWcapSessionFor(calendar, uri</span>
<a href="#l36.4"></a><span id="l36.4">             if (regCal.isDefaultCalendar) {</span>
<a href="#l36.5"></a><span id="l36.5">                 defaultCal = regCal;</span>
<a href="#l36.6"></a><span id="l36.6">                 break;</span>
<a href="#l36.7"></a><span id="l36.7">             }</span>
<a href="#l36.8"></a><span id="l36.8">         }</span>
<a href="#l36.9"></a><span id="l36.9"> </span>
<a href="#l36.10"></a><span id="l36.10">         if (defaultCal) {</span>
<a href="#l36.11"></a><span id="l36.11">             session.defaultCalendar = defaultCal;</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-            let [defaultSpec,] = splitUriParams(defaultCal.uri);</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+            let [defaultSpec, ] = splitUriParams(defaultCal.uri);</span>
<a href="#l36.14"></a><span id="l36.14">             session.uri = cal.makeURL(defaultSpec);</span>
<a href="#l36.15"></a><span id="l36.15">             session.credentials.userId = defaultCal.getProperty(&quot;user_id&quot;);</span>
<a href="#l36.16"></a><span id="l36.16">             log(&quot;default calendar found.&quot;, defaultCal);</span>
<a href="#l36.17"></a><span id="l36.17"> </span>
<a href="#l36.18"></a><span id="l36.18">             // check and fix changing urls (autoconf) of subscribed calendars here:</span>
<a href="#l36.19"></a><span id="l36.19">             for (let regCal of registeredCalendars) {</span>
<a href="#l36.20"></a><span id="l36.20">                 if (!regCal.isDefaultCalendar) {</span>
<a href="#l36.21"></a><span id="l36.21">                     let [spec, params] = splitUriParams(regCal.uri);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/calendar/resources/content/calendarCreation.js</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/calendar/resources/content/calendarCreation.js</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -101,17 +101,17 @@ function checkRequired() {</span>
<a href="#l37.4"></a><span id="l37.4">         let eList = curPage.getElementsByAttribute('required', 'true');</span>
<a href="#l37.5"></a><span id="l37.5">         for (let i = 0; i &lt; eList.length &amp;&amp; canAdvance; ++i) {</span>
<a href="#l37.6"></a><span id="l37.6">             canAdvance = (eList[i].value != &quot;&quot;);</span>
<a href="#l37.7"></a><span id="l37.7">         }</span>
<a href="#l37.8"></a><span id="l37.8"> </span>
<a href="#l37.9"></a><span id="l37.9">         let notificationbox = document.getElementById(&quot;location-notifications&quot;);</span>
<a href="#l37.10"></a><span id="l37.10">         if (canAdvance &amp;&amp; document.getElementById(&quot;calendar-uri&quot;).value &amp;&amp;</span>
<a href="#l37.11"></a><span id="l37.11">                 curPage.pageid == &quot;locationPage&quot;) {</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-            let [reason,] = parseUri(document.getElementById(&quot;calendar-uri&quot;).value);</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+            let [reason, ] = parseUri(document.getElementById(&quot;calendar-uri&quot;).value);</span>
<a href="#l37.14"></a><span id="l37.14">             canAdvance = (reason == errorConstants.SUCCESS);</span>
<a href="#l37.15"></a><span id="l37.15">             setNotification(reason);</span>
<a href="#l37.16"></a><span id="l37.16">         } else {</span>
<a href="#l37.17"></a><span id="l37.17">             notificationbox.removeAllNotifications();</span>
<a href="#l37.18"></a><span id="l37.18">         }</span>
<a href="#l37.19"></a><span id="l37.19">         document.getElementById('calendar-wizard').canAdvance = canAdvance;</span>
<a href="#l37.20"></a><span id="l37.20">     }</span>
<a href="#l37.21"></a><span id="l37.21"> }</span>
<a href="#l37.22"></a><span id="l37.22" class="difflineat">@@ -201,19 +201,19 @@ function initNameFromURI() {</span>
<a href="#l37.23"></a><span id="l37.23">         nameField.value = decodeURIComponent(captures[1]);</span>
<a href="#l37.24"></a><span id="l37.24">     }</span>
<a href="#l37.25"></a><span id="l37.25"> }</span>
<a href="#l37.26"></a><span id="l37.26"> </span>
<a href="#l37.27"></a><span id="l37.27"> /**</span>
<a href="#l37.28"></a><span id="l37.28">  * Parses the given uri value to check if it is valid and there is not already</span>
<a href="#l37.29"></a><span id="l37.29">  * a calendar with this uri.</span>
<a href="#l37.30"></a><span id="l37.30">  *</span>
<a href="#l37.31"></a><span id="l37.31" class="difflineminus">- * @param aUri          The string to parse as an uri.</span>
<a href="#l37.32"></a><span id="l37.32" class="difflineminus">- * @return [error,uri]  |error| is the error code from errorConstants, |uri| the</span>
<a href="#l37.33"></a><span id="l37.33" class="difflineminus">- *                        parsed nsIURI, or null on error.</span>
<a href="#l37.34"></a><span id="l37.34" class="difflineplus">+ * @param aUri              The string to parse as an uri.</span>
<a href="#l37.35"></a><span id="l37.35" class="difflineplus">+ * @return [error, uri]     |error| is the error code from errorConstants,</span>
<a href="#l37.36"></a><span id="l37.36" class="difflineplus">+ *                          |uri| the parsed nsIURI, or null on error.</span>
<a href="#l37.37"></a><span id="l37.37">  */</span>
<a href="#l37.38"></a><span id="l37.38"> function parseUri(aUri) {</span>
<a href="#l37.39"></a><span id="l37.39">     let uri;</span>
<a href="#l37.40"></a><span id="l37.40">     try {</span>
<a href="#l37.41"></a><span id="l37.41">         // Test if the entered uri can be parsed.</span>
<a href="#l37.42"></a><span id="l37.42">         uri = makeURL(aUri);</span>
<a href="#l37.43"></a><span id="l37.43">     } catch (ex) {</span>
<a href="#l37.44"></a><span id="l37.44">         return [errorConstants.INVALID_URI, null];</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/calendar/resources/content/datetimepickers/datetimepickers.xml</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/calendar/resources/content/datetimepickers/datetimepickers.xml</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -580,18 +580,18 @@</span>
<a href="#l38.4"></a><span id="l38.4">           if (val)</span>
<a href="#l38.5"></a><span id="l38.5">             this.value = (new Date(val));</span>
<a href="#l38.6"></a><span id="l38.6">           else</span>
<a href="#l38.7"></a><span id="l38.7">             this.value = (new Date());</span>
<a href="#l38.8"></a><span id="l38.8"> </span>
<a href="#l38.9"></a><span id="l38.9">           // Change the grids in the timepicker-grids for 12-hours time format.</span>
<a href="#l38.10"></a><span id="l38.10">           if (this.ampmIndex) {</span>
<a href="#l38.11"></a><span id="l38.11">             // Find the locale strings for the AM/PM prefix/suffix.</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-            let amTime = new Date(2000,0,1,6,12,34);</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineminus">-            let pmTime = new Date(2000,0,1,18,12,34);</span>
<a href="#l38.14"></a><span id="l38.14" class="difflineplus">+            let amTime = new Date(2000, 0, 1, 6, 12, 34);</span>
<a href="#l38.15"></a><span id="l38.15" class="difflineplus">+            let pmTime = new Date(2000, 0, 1, 18, 12, 34);</span>
<a href="#l38.16"></a><span id="l38.16">             amTime = amTime.toLocaleFormat(this.kTimeFormatString);</span>
<a href="#l38.17"></a><span id="l38.17">             pmTime = pmTime.toLocaleFormat(this.kTimeFormatString);</span>
<a href="#l38.18"></a><span id="l38.18">             let amLabel = this.parseTimeRegExp.exec(amTime)[this.ampmIndex] || &quot;AM&quot;;</span>
<a href="#l38.19"></a><span id="l38.19">             let pmLabel = this.parseTimeRegExp.exec(pmTime)[this.ampmIndex] || &quot;PM&quot;;</span>
<a href="#l38.20"></a><span id="l38.20"> </span>
<a href="#l38.21"></a><span id="l38.21">             document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;timepickerGrids&quot;)</span>
<a href="#l38.22"></a><span id="l38.22">                     .changeTo12HoursFormat(amLabel, pmLabel);</span>
<a href="#l38.23"></a><span id="l38.23">           }</span>
<a href="#l38.24"></a><span id="l38.24" class="difflineat">@@ -1275,33 +1275,33 @@</span>
<a href="#l38.25"></a><span id="l38.25">       &lt;method name=&quot;selectHourItem&quot;&gt;</span>
<a href="#l38.26"></a><span id="l38.26">         &lt;parameter name=&quot;hourItem&quot;/&gt;</span>
<a href="#l38.27"></a><span id="l38.27">         &lt;body&gt;</span>
<a href="#l38.28"></a><span id="l38.28">           &lt;![CDATA[</span>
<a href="#l38.29"></a><span id="l38.29">             // clear old selection, if there is one</span>
<a href="#l38.30"></a><span id="l38.30">             if (this.mSelectedHourItem != null)</span>
<a href="#l38.31"></a><span id="l38.31">               this.mSelectedHourItem.removeAttribute( &quot;selected&quot; );</span>
<a href="#l38.32"></a><span id="l38.32">             // set selected attribute, to cause the selected style to apply</span>
<a href="#l38.33"></a><span id="l38.33" class="difflineminus">-            hourItem.setAttribute( &quot;selected&quot; , &quot;true&quot; );</span>
<a href="#l38.34"></a><span id="l38.34" class="difflineplus">+            hourItem.setAttribute( &quot;selected&quot;, &quot;true&quot; );</span>
<a href="#l38.35"></a><span id="l38.35">             // remember the selected item so we can deselect it</span>
<a href="#l38.36"></a><span id="l38.36">             this.mSelectedHourItem = hourItem;</span>
<a href="#l38.37"></a><span id="l38.37">           ]]&gt;</span>
<a href="#l38.38"></a><span id="l38.38">         &lt;/body&gt;</span>
<a href="#l38.39"></a><span id="l38.39">       &lt;/method&gt;</span>
<a href="#l38.40"></a><span id="l38.40"> </span>
<a href="#l38.41"></a><span id="l38.41">       &lt;!-- Helper function to select an minute item --&gt;</span>
<a href="#l38.42"></a><span id="l38.42">       &lt;method name=&quot;selectMinuteItem&quot;&gt;</span>
<a href="#l38.43"></a><span id="l38.43">         &lt;parameter name=&quot;minuteItem&quot;/&gt;</span>
<a href="#l38.44"></a><span id="l38.44">         &lt;body&gt;</span>
<a href="#l38.45"></a><span id="l38.45">           &lt;![CDATA[</span>
<a href="#l38.46"></a><span id="l38.46">             // clear old selection, if there is one</span>
<a href="#l38.47"></a><span id="l38.47">             if (this.mSelectedMinuteItem != null)</span>
<a href="#l38.48"></a><span id="l38.48">               this.mSelectedMinuteItem.removeAttribute( &quot;selected&quot; );</span>
<a href="#l38.49"></a><span id="l38.49">             // set selected attribute, to cause the selected style to apply</span>
<a href="#l38.50"></a><span id="l38.50" class="difflineminus">-            minuteItem.setAttribute( &quot;selected&quot; , &quot;true&quot; );</span>
<a href="#l38.51"></a><span id="l38.51" class="difflineplus">+            minuteItem.setAttribute( &quot;selected&quot;, &quot;true&quot; );</span>
<a href="#l38.52"></a><span id="l38.52">             // remember the selected item so we can deselect it</span>
<a href="#l38.53"></a><span id="l38.53">             this.mSelectedMinuteItem = minuteItem;</span>
<a href="#l38.54"></a><span id="l38.54">           ]]&gt;</span>
<a href="#l38.55"></a><span id="l38.55">         &lt;/body&gt;</span>
<a href="#l38.56"></a><span id="l38.56">       &lt;/method&gt;</span>
<a href="#l38.57"></a><span id="l38.57">       &lt;method name=&quot;moveMinutes&quot;&gt;</span>
<a href="#l38.58"></a><span id="l38.58">         &lt;parameter name=&quot;aNumber&quot;/&gt;</span>
<a href="#l38.59"></a><span id="l38.59">         &lt;body&gt;</span>
<a href="#l38.60"></a><span id="l38.60" class="difflineat">@@ -1762,17 +1762,17 @@</span>
<a href="#l38.61"></a><span id="l38.61">             this.alphaMonths = null;</span>
<a href="#l38.62"></a><span id="l38.62">             this.probeSucceeded = false;</span>
<a href="#l38.63"></a><span id="l38.63">             this.mLastDateParseIncludedTime = false;</span>
<a href="#l38.64"></a><span id="l38.64"> </span>
<a href="#l38.65"></a><span id="l38.65">             // SHORT NUMERIC DATE, such as 2002-03-04, 4/3/2002, or CE2002Y03M04D.</span>
<a href="#l38.66"></a><span id="l38.66">             // Made of digits &amp; nonDigits.  (Nondigits may be unicode letters</span>
<a href="#l38.67"></a><span id="l38.67">             // which do not match \w, esp. in CJK locales.)</span>
<a href="#l38.68"></a><span id="l38.68">             this.parseShortDateRegex = /^\D*(\d+)\D+(\d+)\D+(\d+)\D?$/;</span>
<a href="#l38.69"></a><span id="l38.69" class="difflineminus">-            var probeDate = new Date(2002,3-1,4); // month is 0-based</span>
<a href="#l38.70"></a><span id="l38.70" class="difflineplus">+            var probeDate = new Date(2002, 3-1, 4); // month is 0-based</span>
<a href="#l38.71"></a><span id="l38.71">             var probeString = this.formatDate(probeDate);</span>
<a href="#l38.72"></a><span id="l38.72">             var probeArray = this.parseShortDateRegex.exec(probeString);</span>
<a href="#l38.73"></a><span id="l38.73">             if (probeArray != null) {</span>
<a href="#l38.74"></a><span id="l38.74">               // Numeric month format</span>
<a href="#l38.75"></a><span id="l38.75">               for (var i = 1; i &lt;= 3; i++) {</span>
<a href="#l38.76"></a><span id="l38.76">                 switch (Number(probeArray[i])) {</span>
<a href="#l38.77"></a><span id="l38.77">                   case 2:    this.twoDigitYear = true; // fall thru</span>
<a href="#l38.78"></a><span id="l38.78">                   case 2002: this.yearIndex = i;       break;</span>
<a href="#l38.79"></a><span id="l38.79" class="difflineat">@@ -1846,19 +1846,19 @@</span>
<a href="#l38.80"></a><span id="l38.80">             //   Index:       2        3        4       5        6       7</span>
<a href="#l38.81"></a><span id="l38.81">             var digitsExpr = &quot;(\\d?\\d)(\\D)?(?:(\\d\\d)(\\D)?(?:(\\d\\d)(\\D)?)?)?&quot;;</span>
<a href="#l38.82"></a><span id="l38.82">             // any letters or '.': non-digit alphanumeric, period (a.m.), or space (P M)</span>
<a href="#l38.83"></a><span id="l38.83">             var anyAmPmExpr = &quot;(?:[^\\d\\W]|[. ])+&quot;;</span>
<a href="#l38.84"></a><span id="l38.84">             // digitsExpr has 6 captures, so index of first ampmExpr is 1, of last is 8.</span>
<a href="#l38.85"></a><span id="l38.85">             var probeTimeRegExp =</span>
<a href="#l38.86"></a><span id="l38.86">               new RegExp(&quot;^(&quot;+anyAmPmExpr+&quot;)?\\s?&quot;+digitsExpr+&quot;(&quot;+anyAmPmExpr+&quot;)?\\s*$&quot;);</span>
<a href="#l38.87"></a><span id="l38.87">             const PRE_INDEX=1, HR_INDEX=2, MIN_INDEX=4, SEC_INDEX=6, POST_INDEX=8;</span>
<a href="#l38.88"></a><span id="l38.88" class="difflineminus">-            var amProbeTime = new Date(2000,0,1,6,12,34);</span>
<a href="#l38.89"></a><span id="l38.89" class="difflineplus">+            var amProbeTime = new Date(2000, 0, 1, 6, 12, 34);</span>
<a href="#l38.90"></a><span id="l38.90">             var amProbeString = amProbeTime.toLocaleFormat(&quot;%X&quot;);</span>
<a href="#l38.91"></a><span id="l38.91" class="difflineminus">-            var pmProbeTime = new Date(2000,0,1,18,12,34);</span>
<a href="#l38.92"></a><span id="l38.92" class="difflineplus">+            var pmProbeTime = new Date(2000, 0, 1, 18, 12, 34);</span>
<a href="#l38.93"></a><span id="l38.93">             var pmProbeString = pmProbeTime.toLocaleFormat(&quot;%X&quot;);</span>
<a href="#l38.94"></a><span id="l38.94">             var amFormatExpr = null, pmFormatExpr = null;</span>
<a href="#l38.95"></a><span id="l38.95">             if (amProbeString != pmProbeString) {</span>
<a href="#l38.96"></a><span id="l38.96">               var amProbeArray = probeTimeRegExp.exec(amProbeString);</span>
<a href="#l38.97"></a><span id="l38.97">               var pmProbeArray = probeTimeRegExp.exec(pmProbeString);</span>
<a href="#l38.98"></a><span id="l38.98">               if (amProbeArray != null &amp;&amp; pmProbeArray != null) {</span>
<a href="#l38.99"></a><span id="l38.99">                 if (amProbeArray[PRE_INDEX] &amp;&amp; pmProbeArray[PRE_INDEX] &amp;&amp;</span>
<a href="#l38.100"></a><span id="l38.100">                     amProbeArray[PRE_INDEX] != pmProbeArray[PRE_INDEX]) {</span>
<a href="#l38.101"></a><span id="l38.101" class="difflineat">@@ -1962,17 +1962,17 @@</span>
<a href="#l38.102"></a><span id="l38.102">         &lt;/body&gt;</span>
<a href="#l38.103"></a><span id="l38.103">       &lt;/method&gt;</span>
<a href="#l38.104"></a><span id="l38.104"> </span>
<a href="#l38.105"></a><span id="l38.105">       &lt;method name=&quot;formatTime&quot;&gt;</span>
<a href="#l38.106"></a><span id="l38.106">         &lt;parameter name=&quot;aValue&quot;/&gt;</span>
<a href="#l38.107"></a><span id="l38.107">         &lt;body&gt;</span>
<a href="#l38.108"></a><span id="l38.108">           &lt;![CDATA[</span>
<a href="#l38.109"></a><span id="l38.109">             // remove leading zero in hours before colon in xx01:23pmxx</span>
<a href="#l38.110"></a><span id="l38.110" class="difflineminus">-            return aValue.toLocaleFormat(this.kTimeFormatString).replace(/0(\d):/,&quot;$1:&quot;);</span>
<a href="#l38.111"></a><span id="l38.111" class="difflineplus">+            return aValue.toLocaleFormat(this.kTimeFormatString).replace(/0(\d):/, &quot;$1:&quot;);</span>
<a href="#l38.112"></a><span id="l38.112">           ]]&gt;</span>
<a href="#l38.113"></a><span id="l38.113">         &lt;/body&gt;</span>
<a href="#l38.114"></a><span id="l38.114">       &lt;/method&gt;</span>
<a href="#l38.115"></a><span id="l38.115">     &lt;/implementation&gt;</span>
<a href="#l38.116"></a><span id="l38.116">   &lt;/binding&gt;</span>
<a href="#l38.117"></a><span id="l38.117"> </span>
<a href="#l38.118"></a><span id="l38.118"> &lt;/bindings&gt;</span>
<a href="#l38.119"></a><span id="l38.119"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/calendar/resources/content/publish.js</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/calendar/resources/content/publish.js</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -178,17 +178,17 @@ function publishItemArray(aItemArray, aP</span>
<a href="#l39.4"></a><span id="l39.4"> </span>
<a href="#l39.5"></a><span id="l39.5">     uploadChannel.setUploadStream(inputStream,</span>
<a href="#l39.6"></a><span id="l39.6">                                   &quot;text/calendar&quot;, -1);</span>
<a href="#l39.7"></a><span id="l39.7">     try {</span>
<a href="#l39.8"></a><span id="l39.8">         channel.asyncOpen(publishingListener, aProgressDialog);</span>
<a href="#l39.9"></a><span id="l39.9">     } catch (e) {</span>
<a href="#l39.10"></a><span id="l39.10">         var props = Services.strings.createBundle(&quot;chrome://calendar/locale/calendar.properties&quot;);</span>
<a href="#l39.11"></a><span id="l39.11">         Services.prompt.alert(null, calGetString(&quot;calendar&quot;, &quot;genericErrorTitle&quot;),</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-                              props.formatStringFromName('otherPutError',[e.message],1));</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+                              props.formatStringFromName('otherPutError', [e.message], 1));</span>
<a href="#l39.14"></a><span id="l39.14">     }</span>
<a href="#l39.15"></a><span id="l39.15"> }</span>
<a href="#l39.16"></a><span id="l39.16"> </span>
<a href="#l39.17"></a><span id="l39.17"> </span>
<a href="#l39.18"></a><span id="l39.18"> var notificationCallbacks =</span>
<a href="#l39.19"></a><span id="l39.19"> {</span>
<a href="#l39.20"></a><span id="l39.20">     // nsIInterfaceRequestor interface</span>
<a href="#l39.21"></a><span id="l39.21">     getInterface: function(iid, instance) {</span>
<a href="#l39.22"></a><span id="l39.22" class="difflineat">@@ -226,21 +226,21 @@ var publishingListener =</span>
<a href="#l39.23"></a><span id="l39.23">         let requestSucceeded;</span>
<a href="#l39.24"></a><span id="l39.24">         try {</span>
<a href="#l39.25"></a><span id="l39.25">             channel = request.QueryInterface(Components.interfaces.nsIHttpChannel);</span>
<a href="#l39.26"></a><span id="l39.26">             requestSucceeded = channel.requestSucceeded;</span>
<a href="#l39.27"></a><span id="l39.27">         } catch(e) {</span>
<a href="#l39.28"></a><span id="l39.28">         }</span>
<a href="#l39.29"></a><span id="l39.29">         if (channel &amp;&amp; !requestSucceeded) {</span>
<a href="#l39.30"></a><span id="l39.30">             Services.prompt.alert(null, calGetString(&quot;calendar&quot;, &quot;genericErrorTitle&quot;),</span>
<a href="#l39.31"></a><span id="l39.31" class="difflineminus">-                                  props.formatStringFromName('httpPutError',[channel.responseStatus, channel.responseStatusText],2));</span>
<a href="#l39.32"></a><span id="l39.32" class="difflineplus">+                                  props.formatStringFromName('httpPutError', [channel.responseStatus, channel.responseStatusText], 2));</span>
<a href="#l39.33"></a><span id="l39.33">         } else if (!channel &amp;&amp; !Components.isSuccessCode(request.status)) {</span>
<a href="#l39.34"></a><span id="l39.34">             // XXX this should be made human-readable.</span>
<a href="#l39.35"></a><span id="l39.35">             Services.prompt.alert(null, calGetString(&quot;calendar&quot;, &quot;genericErrorTitle&quot;),</span>
<a href="#l39.36"></a><span id="l39.36" class="difflineminus">-                                  props.formatStringFromName('otherPutError',[request.status.toString(16)],1));</span>
<a href="#l39.37"></a><span id="l39.37" class="difflineplus">+                                  props.formatStringFromName('otherPutError', [request.status.toString(16)], 1));</span>
<a href="#l39.38"></a><span id="l39.38">         }</span>
<a href="#l39.39"></a><span id="l39.39">     },</span>
<a href="#l39.40"></a><span id="l39.40"> </span>
<a href="#l39.41"></a><span id="l39.41">     onDataAvailable: function(request, ctxt, inStream, sourceOffset, count)</span>
<a href="#l39.42"></a><span id="l39.42">     {</span>
<a href="#l39.43"></a><span id="l39.43">     }</span>
<a href="#l39.44"></a><span id="l39.44"> }</span>
<a href="#l39.45"></a><span id="l39.45"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -35,17 +35,17 @@ var setupModule = function(module) {</span>
<a href="#l40.4"></a><span id="l40.4"> </span>
<a href="#l40.5"></a><span id="l40.5">   let categories = prefs.preferences.getPref(&quot;calendar.categories.names&quot;, &quot;string&quot;).split(',');</span>
<a href="#l40.6"></a><span id="l40.6">   data[0].category = categories[0];</span>
<a href="#l40.7"></a><span id="l40.7">   data[1].category = categories[1];</span>
<a href="#l40.8"></a><span id="l40.8"> }</span>
<a href="#l40.9"></a><span id="l40.9"> </span>
<a href="#l40.10"></a><span id="l40.10"> // Test that closing an event dialog with no changes does not prompt for save</span>
<a href="#l40.11"></a><span id="l40.11"> var testEventDialogModificationPrompt = function () {</span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-  controller.click(new elementslib.ID(controller.window.document,&quot;calendar-tab-button&quot;));</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+  controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l40.14"></a><span id="l40.14">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l40.15"></a><span id="l40.15">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l40.16"></a><span id="l40.16"> </span>
<a href="#l40.17"></a><span id="l40.17">   // create new event</span>
<a href="#l40.18"></a><span id="l40.18">   controller.doubleClick(new elementslib.Lookup(controller.window.document,</span>
<a href="#l40.19"></a><span id="l40.19">     calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.CANVAS_BOX, undefined, 1, 8)), 1, 1);</span>
<a href="#l40.20"></a><span id="l40.20">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, sleep);</span>
<a href="#l40.21"></a><span id="l40.21">   let event = new mozmill.controller.MozMillController(mozmill.utils</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/calendar/test/mozmill/eventDialog/testUTF8.js</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/calendar/test/mozmill/eventDialog/testUTF8.js</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -14,17 +14,17 @@ var setupModule = function(module) {</span>
<a href="#l41.4"></a><span id="l41.4">   controller = mozmill.getMail3PaneController();</span>
<a href="#l41.5"></a><span id="l41.5">   calUtils.createCalendar(controller, UTF8string);</span>
<a href="#l41.6"></a><span id="l41.6">   Preferences.set(&quot;calendar.categories.names&quot;, UTF8string);</span>
<a href="#l41.7"></a><span id="l41.7"> }</span>
<a href="#l41.8"></a><span id="l41.8"> </span>
<a href="#l41.9"></a><span id="l41.9"> var testUTF8 = function () {</span>
<a href="#l41.10"></a><span id="l41.10">   let eventDialog = '/id(&quot;calendar-event-dialog&quot;)/id(&quot;event-grid&quot;)/id(&quot;event-grid-rows&quot;)/';</span>
<a href="#l41.11"></a><span id="l41.11"> </span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-  controller.click(new elementslib.ID(controller.window.document,&quot;calendar-tab-button&quot;));</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+  controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l41.14"></a><span id="l41.14">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l41.15"></a><span id="l41.15"> </span>
<a href="#l41.16"></a><span id="l41.16">   // create new event</span>
<a href="#l41.17"></a><span id="l41.17">   controller.doubleClick(new elementslib.Lookup(controller.window.document,</span>
<a href="#l41.18"></a><span id="l41.18">     calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.CANVAS_BOX, undefined, 1, 8)));</span>
<a href="#l41.19"></a><span id="l41.19">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, sleep);</span>
<a href="#l41.20"></a><span id="l41.20">   let event = new mozmill.controller.MozMillController(mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;)[0]);</span>
<a href="#l41.21"></a><span id="l41.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/calendar/test/mozmill/shared-modules/calendar-utils.js</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/calendar/test/mozmill/shared-modules/calendar-utils.js</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -29,17 +29,17 @@ function acceptSendingNotificationMail(c</span>
<a href="#l42.4"></a><span id="l42.4">   modalDialog.wait_for_modal_dialog(&quot;commonDialog&quot;);</span>
<a href="#l42.5"></a><span id="l42.5"> }</span>
<a href="#l42.6"></a><span id="l42.6"> </span>
<a href="#l42.7"></a><span id="l42.7"> /**</span>
<a href="#l42.8"></a><span id="l42.8">  *  Add an attachment with url</span>
<a href="#l42.9"></a><span id="l42.9">  *  @param controller - Mozmill window controller</span>
<a href="#l42.10"></a><span id="l42.10">  */</span>
<a href="#l42.11"></a><span id="l42.11"> function handleAddingAttachment(controller, url) {</span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-  modalDialog.plan_for_modal_dialog(&quot;commonDialog&quot;,function(attachment) {</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+  modalDialog.plan_for_modal_dialog(&quot;commonDialog&quot;, function(attachment) {</span>
<a href="#l42.14"></a><span id="l42.14">     let input = new elementslib.ID(attachment.window.document, 'loginTextbox');</span>
<a href="#l42.15"></a><span id="l42.15">     attachment.waitForElement(input);</span>
<a href="#l42.16"></a><span id="l42.16">     input.getNode().value = url;</span>
<a href="#l42.17"></a><span id="l42.17">     attachment.click(new elementslib.Lookup(attachment.window.document, '/id(&quot;commonDialog&quot;)/'</span>
<a href="#l42.18"></a><span id="l42.18">       + 'anon({&quot;anonid&quot;:&quot;buttons&quot;})/{&quot;dlgtype&quot;:&quot;accept&quot;}'));</span>
<a href="#l42.19"></a><span id="l42.19">   });</span>
<a href="#l42.20"></a><span id="l42.20"> </span>
<a href="#l42.21"></a><span id="l42.21">   modalDialog.wait_for_modal_dialog(&quot;commonDialog&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/calendar/test/mozmill/testAlarmDefaultValue.js</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/calendar/test/mozmill/testAlarmDefaultValue.js</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -98,19 +98,19 @@ function handle_pref_dialog(prefsControl</span>
<a href="#l43.4"></a><span id="l43.4">                          null, null, &quot;days&quot;);</span>
<a href="#l43.5"></a><span id="l43.5">   prefsController.select(new elementslib.ID(prefsController.window.document, &quot;eventdefalarmunit&quot;),</span>
<a href="#l43.6"></a><span id="l43.6">                          null, null, &quot;days&quot;);</span>
<a href="#l43.7"></a><span id="l43.7"> </span>
<a href="#l43.8"></a><span id="l43.8">   // Sets default alarm length for events to &quot;50&quot;</span>
<a href="#l43.9"></a><span id="l43.9">   let eventdefalarmlen = new elementslib.ID(prefsController.window.document, &quot;eventdefalarmlen&quot;);</span>
<a href="#l43.10"></a><span id="l43.10">   let tododefalarmlen = new elementslib.ID(prefsController.window.document, &quot;tododefalarmlen&quot;);</span>
<a href="#l43.11"></a><span id="l43.11">   prefsController.keypress(eventdefalarmlen, &quot;a&quot;, {accelKey:true});</span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-  prefsController.type(eventdefalarmlen ,&quot;50&quot;);</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineplus">+  prefsController.type(eventdefalarmlen, &quot;50&quot;);</span>
<a href="#l43.14"></a><span id="l43.14">   prefsController.keypress(tododefalarmlen, &quot;a&quot;, {accelKey:true});</span>
<a href="#l43.15"></a><span id="l43.15" class="difflineminus">-  prefsController.type(tododefalarmlen ,&quot;50&quot;);</span>
<a href="#l43.16"></a><span id="l43.16" class="difflineplus">+  prefsController.type(tododefalarmlen, &quot;50&quot;);</span>
<a href="#l43.17"></a><span id="l43.17"> }</span>
<a href="#l43.18"></a><span id="l43.18"> </span>
<a href="#l43.19"></a><span id="l43.19"> function teardownTest(module) {</span>
<a href="#l43.20"></a><span id="l43.20">   Services.prefs.clearUserPref(&quot;calendar.alarms.eventalarmlen&quot;);</span>
<a href="#l43.21"></a><span id="l43.21">   Services.prefs.clearUserPref(&quot;calendar.alarms.eventalarmunit&quot;);</span>
<a href="#l43.22"></a><span id="l43.22">   Services.prefs.clearUserPref(&quot;calendar.alarms.onforevents&quot;);</span>
<a href="#l43.23"></a><span id="l43.23">   Services.prefs.clearUserPref(&quot;calendar.alarms.onfortodos&quot;);</span>
<a href="#l43.24"></a><span id="l43.24">   Services.prefs.clearUserPref(&quot;calendar.alarms.todoalarmlen&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/calendar/test/mozmill/testLocalICS.js</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/calendar/test/mozmill/testLocalICS.js</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -31,17 +31,17 @@ var setupModule = function(module) {</span>
<a href="#l44.4"></a><span id="l44.4"> </span>
<a href="#l44.5"></a><span id="l44.5">   file = Services.dirsvc.get(&quot;TmpD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l44.6"></a><span id="l44.6">   file.append(calendar + &quot;.ics&quot;);</span>
<a href="#l44.7"></a><span id="l44.7">   let fileURI = Services.io.newFileURI(file);</span>
<a href="#l44.8"></a><span id="l44.8">   uri = fileURI.prePath + fileURI.path;</span>
<a href="#l44.9"></a><span id="l44.9"> }</span>
<a href="#l44.10"></a><span id="l44.10"> </span>
<a href="#l44.11"></a><span id="l44.11"> var testLocalICS = function () {</span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-  controller.click(new elementslib.ID(controller.window.document,&quot;calendar-tab-button&quot;));</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+  controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l44.14"></a><span id="l44.14">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l44.15"></a><span id="l44.15"> </span>
<a href="#l44.16"></a><span id="l44.16">   modalDialog.plan_for_modal_dialog(&quot;Calendar:NewCalendarWizard&quot;, handleNewCalendarWizard);</span>
<a href="#l44.17"></a><span id="l44.17">   controller.mainMenu.click(&quot;#ltnNewCalendar&quot;);</span>
<a href="#l44.18"></a><span id="l44.18">   modalDialog.wait_for_modal_dialog(&quot;Calendar:NewCalendarWizard&quot;, TIMEOUT_MODAL_DIALOG);</span>
<a href="#l44.19"></a><span id="l44.19"> </span>
<a href="#l44.20"></a><span id="l44.20">   // create new event</span>
<a href="#l44.21"></a><span id="l44.21">   controller.doubleClick(new elementslib.Lookup(controller.window.document,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/calendar/test/mozmill/testTodayPane.js</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/calendar/test/mozmill/testTodayPane.js</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -59,17 +59,17 @@ var testTodayPane = function () {</span>
<a href="#l45.4"></a><span id="l45.4">     + '{&quot;class&quot;:&quot;calendar-event-column-even&quot;}/anon({&quot;anonid&quot;:&quot;boxstack&quot;})/'</span>
<a href="#l45.5"></a><span id="l45.5">     + 'anon({&quot;anonid&quot;:&quot;bgbox&quot;})/[' + startHour + ']'), 1, 1);</span>
<a href="#l45.6"></a><span id="l45.6">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, WAIT_FOR_WINDOW_TIMEOUT);</span>
<a href="#l45.7"></a><span id="l45.7">   let event = new mozmill.controller.MozMillController(mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;)[0]);</span>
<a href="#l45.8"></a><span id="l45.8">   let iframe = event.window.document.getElementById(&quot;lightning-item-panel-iframe&quot;);</span>
<a href="#l45.9"></a><span id="l45.9">   event.waitFor(() =&gt; iframe.contentWindow.onLoad &amp;&amp; iframe.contentWindow.onLoad.hasLoaded == true);</span>
<a href="#l45.10"></a><span id="l45.10"> </span>
<a href="#l45.11"></a><span id="l45.11">   event.waitForElement(new elementslib.Lookup(iframe.contentDocument, eventName));</span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-  event.type(new elementslib.Lookup(iframe.contentDocument, eventName),&quot;Today's Event&quot;);</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+  event.type(new elementslib.Lookup(iframe.contentDocument, eventName), &quot;Today's Event&quot;);</span>
<a href="#l45.14"></a><span id="l45.14">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l45.15"></a><span id="l45.15">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length == 0});</span>
<a href="#l45.16"></a><span id="l45.16"> </span>
<a href="#l45.17"></a><span id="l45.17">   // reset view</span>
<a href="#l45.18"></a><span id="l45.18">   view.scrollToMinute(60 * 8);</span>
<a href="#l45.19"></a><span id="l45.19"> </span>
<a href="#l45.20"></a><span id="l45.20">   // go to tomorrow and add an event</span>
<a href="#l45.21"></a><span id="l45.21">   controller.click(new elementslib.ID(controller.window.document, &quot;next-view-button&quot;));</span>
<a href="#l45.22"></a><span id="l45.22" class="difflineat">@@ -78,17 +78,17 @@ var testTodayPane = function () {</span>
<a href="#l45.23"></a><span id="l45.23">     + '{&quot;class&quot;:&quot;calendar-event-column-even&quot;}/anon({&quot;anonid&quot;:&quot;boxstack&quot;})/'</span>
<a href="#l45.24"></a><span id="l45.24">     + 'anon({&quot;anonid&quot;:&quot;bgbox&quot;})/[9]'), 1, 1);</span>
<a href="#l45.25"></a><span id="l45.25">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, WAIT_FOR_WINDOW_TIMEOUT);</span>
<a href="#l45.26"></a><span id="l45.26">   event = new mozmill.controller.MozMillController(mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;)[0]);</span>
<a href="#l45.27"></a><span id="l45.27">   iframe = event.window.document.getElementById(&quot;lightning-item-panel-iframe&quot;);</span>
<a href="#l45.28"></a><span id="l45.28">   event.waitFor(() =&gt; iframe.contentWindow.onLoad &amp;&amp; iframe.contentWindow.onLoad.hasLoaded == true);</span>
<a href="#l45.29"></a><span id="l45.29"> </span>
<a href="#l45.30"></a><span id="l45.30">   event.waitForElement(new elementslib.Lookup(iframe.contentDocument, eventName));</span>
<a href="#l45.31"></a><span id="l45.31" class="difflineminus">-  event.type(new elementslib.Lookup(iframe.contentDocument, eventName),&quot;Tomorrow's Event&quot;);</span>
<a href="#l45.32"></a><span id="l45.32" class="difflineplus">+  event.type(new elementslib.Lookup(iframe.contentDocument, eventName), &quot;Tomorrow's Event&quot;);</span>
<a href="#l45.33"></a><span id="l45.33">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l45.34"></a><span id="l45.34">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length == 0});</span>
<a href="#l45.35"></a><span id="l45.35"> </span>
<a href="#l45.36"></a><span id="l45.36">   // go 5 days forward and add an event</span>
<a href="#l45.37"></a><span id="l45.37">   for(let i = 0; i &lt; 5; i++)</span>
<a href="#l45.38"></a><span id="l45.38">     controller.click(new elementslib.ID(controller.window.document, &quot;next-view-button&quot;));</span>
<a href="#l45.39"></a><span id="l45.39">   controller.sleep(WAIT_FOR_WINDOW_TIMEOUT);</span>
<a href="#l45.40"></a><span id="l45.40"> </span>
<a href="#l45.41"></a><span id="l45.41" class="difflineat">@@ -97,17 +97,17 @@ var testTodayPane = function () {</span>
<a href="#l45.42"></a><span id="l45.42">     + '{&quot;class&quot;:&quot;calendar-event-column-even&quot;}/anon({&quot;anonid&quot;:&quot;boxstack&quot;})/'</span>
<a href="#l45.43"></a><span id="l45.43">     + 'anon({&quot;anonid&quot;:&quot;bgbox&quot;})/[9]'), 1, 1);</span>
<a href="#l45.44"></a><span id="l45.44">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, WAIT_FOR_WINDOW_TIMEOUT);</span>
<a href="#l45.45"></a><span id="l45.45">   event = new mozmill.controller.MozMillController(mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;)[0]);</span>
<a href="#l45.46"></a><span id="l45.46">   iframe = event.window.document.getElementById(&quot;lightning-item-panel-iframe&quot;);</span>
<a href="#l45.47"></a><span id="l45.47">   event.waitFor(() =&gt; iframe.contentWindow.onLoad &amp;&amp; iframe.contentWindow.onLoad.hasLoaded == true);</span>
<a href="#l45.48"></a><span id="l45.48"> </span>
<a href="#l45.49"></a><span id="l45.49">   event.waitForElement(new elementslib.Lookup(iframe.contentDocument, eventName));</span>
<a href="#l45.50"></a><span id="l45.50" class="difflineminus">-  event.type(new elementslib.Lookup(iframe.contentDocument, eventName),&quot;Future's Event&quot;);</span>
<a href="#l45.51"></a><span id="l45.51" class="difflineplus">+  event.type(new elementslib.Lookup(iframe.contentDocument, eventName), &quot;Future's Event&quot;);</span>
<a href="#l45.52"></a><span id="l45.52">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l45.53"></a><span id="l45.53">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length == 0});</span>
<a href="#l45.54"></a><span id="l45.54"> </span>
<a href="#l45.55"></a><span id="l45.55">   // go to mail tab</span>
<a href="#l45.56"></a><span id="l45.56">   controller.click(new elementslib.Lookup(controller.window.document, '/id(&quot;messengerWindow&quot;)/'</span>
<a href="#l45.57"></a><span id="l45.57">     + 'id(&quot;navigation-toolbox&quot;)/id(&quot;tabs-toolbar&quot;)/id(&quot;tabcontainer&quot;)/{&quot;first-tab&quot;:&quot;true&quot;,&quot;type&quot;:&quot;folder&quot;}/'</span>
<a href="#l45.58"></a><span id="l45.58">     + 'anon({&quot;class&quot;:&quot;tab-stack&quot;})/{&quot;class&quot;:&quot;tab-background&quot;}/{&quot;class&quot;:&quot;tab-background-middle&quot;}'));</span>
<a href="#l45.59"></a><span id="l45.59">   controller.sleep(WAIT_FOR_WINDOW_TIMEOUT);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/calendar/test/unit/test_alarm.js</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/calendar/test/unit/test_alarm.js</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -490,19 +490,19 @@ function test_clone() {</span>
<a href="#l46.4"></a><span id="l46.4"> </span>
<a href="#l46.5"></a><span id="l46.5"> function test_serialize() {</span>
<a href="#l46.6"></a><span id="l46.6">     // most checks done by other tests, these don't fit into categories</span>
<a href="#l46.7"></a><span id="l46.7">     let alarm = cal.createAlarm();</span>
<a href="#l46.8"></a><span id="l46.8">     let srv = cal.getIcsService();</span>
<a href="#l46.9"></a><span id="l46.9"> </span>
<a href="#l46.10"></a><span id="l46.10">     throws(function() {</span>
<a href="#l46.11"></a><span id="l46.11">         alarm.icalComponent = srv.createIcalComponent(&quot;BARF&quot;);</span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-    }, /0x80070057/ , &quot;Invalid Argument&quot;);</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+    }, /0x80070057/, &quot;Invalid Argument&quot;);</span>
<a href="#l46.14"></a><span id="l46.14"> </span>
<a href="#l46.15"></a><span id="l46.15" class="difflineminus">-    function addProp(k,v) { let p = srv.createIcalProperty(k); p.value = v; comp.addProperty(p) }</span>
<a href="#l46.16"></a><span id="l46.16" class="difflineplus">+    function addProp(k, v) { let p = srv.createIcalProperty(k); p.value = v; comp.addProperty(p) }</span>
<a href="#l46.17"></a><span id="l46.17">     function addActionDisplay() { addProp(&quot;ACTION&quot;, &quot;DISPLAY&quot;); }</span>
<a href="#l46.18"></a><span id="l46.18">     function addActionEmail() { addProp(&quot;ACTION&quot;, &quot;EMAIL&quot;); }</span>
<a href="#l46.19"></a><span id="l46.19">     function addTrigger() { addProp(&quot;TRIGGER&quot;, &quot;-PT15M&quot;); }</span>
<a href="#l46.20"></a><span id="l46.20">     function addDescr() { addProp(&quot;DESCRIPTION&quot;, &quot;TEST&quot;); }</span>
<a href="#l46.21"></a><span id="l46.21">     function addDuration() { addProp(&quot;DURATION&quot;, &quot;-PT15M&quot;); }</span>
<a href="#l46.22"></a><span id="l46.22">     function addRepeat() { addProp(&quot;REPEAT&quot;, &quot;1&quot;); }</span>
<a href="#l46.23"></a><span id="l46.23">     function addAttendee() { addProp(&quot;ATTENDEE&quot;, &quot;mailto:horst&quot;); }</span>
<a href="#l46.24"></a><span id="l46.24">     function addAttachment() { addProp(&quot;ATTACH&quot;, &quot;data:yeah&quot;); }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/calendar/test/unit/test_attendee.js</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/calendar/test/unit/test_attendee.js</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -203,17 +203,17 @@ function test_doubleParameters() {</span>
<a href="#l47.4"></a><span id="l47.4">                  paramName;</span>
<a href="#l47.5"></a><span id="l47.5">                  paramName = prop.getNextParameterName()) {</span>
<a href="#l47.6"></a><span id="l47.6"> </span>
<a href="#l47.7"></a><span id="l47.7">                 parNames.push(paramName);</span>
<a href="#l47.8"></a><span id="l47.8">                 parValues.push(prop.getParameter(paramName));</span>
<a href="#l47.9"></a><span id="l47.9">             }</span>
<a href="#l47.10"></a><span id="l47.10"> </span>
<a href="#l47.11"></a><span id="l47.11">             // Check the results</span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-            let att_n = attendee.id.substr(7,9);</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineplus">+            let att_n = attendee.id.substr(7, 9);</span>
<a href="#l47.14"></a><span id="l47.14">             for (let parIndex in parNames) {</span>
<a href="#l47.15"></a><span id="l47.15">                 ok(aExpected[att_n].param.includes(parNames[parIndex]),</span>
<a href="#l47.16"></a><span id="l47.16">                    &quot;Parameter &quot; + parNames[parIndex] + &quot; included in &quot;+ att_n);</span>
<a href="#l47.17"></a><span id="l47.17">                 ok(aExpected[att_n].values.includes(parValues[parIndex]),</span>
<a href="#l47.18"></a><span id="l47.18">                    &quot;Value &quot; + parValues[parIndex] + &quot; for parameter &quot; + parNames[parIndex]);</span>
<a href="#l47.19"></a><span id="l47.19">             }</span>
<a href="#l47.20"></a><span id="l47.20">             ok(parNames.length == aExpected[att_n].param.length,</span>
<a href="#l47.21"></a><span id="l47.21">                &quot;Each parameter has been considered for &quot; + att_n);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/calendar/test/unit/test_calmgr.js</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/calendar/test/unit/test_calmgr.js</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -10,17 +10,17 @@ Components.utils.import(&quot;resource://gre/</span>
<a href="#l48.4"></a><span id="l48.4">  */</span>
<a href="#l48.5"></a><span id="l48.5"> function run_test() {</span>
<a href="#l48.6"></a><span id="l48.6">     do_calendar_startup(run_next_test);</span>
<a href="#l48.7"></a><span id="l48.7"> }</span>
<a href="#l48.8"></a><span id="l48.8"> </span>
<a href="#l48.9"></a><span id="l48.9"> add_test(function test_registration() {</span>
<a href="#l48.10"></a><span id="l48.10">     function checkCalendarCount(net, rdonly, all) {</span>
<a href="#l48.11"></a><span id="l48.11">         equal(calmgr.networkCalendarCount, net);</span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-        equal(calmgr.readOnlyCalendarCount , rdonly);</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineplus">+        equal(calmgr.readOnlyCalendarCount, rdonly);</span>
<a href="#l48.14"></a><span id="l48.14">         equal(calmgr.calendarCount, all);</span>
<a href="#l48.15"></a><span id="l48.15">     }</span>
<a href="#l48.16"></a><span id="l48.16">     function checkRegistration(reg, unreg, del) {</span>
<a href="#l48.17"></a><span id="l48.17">         equal(registered, reg);</span>
<a href="#l48.18"></a><span id="l48.18">         equal(unregistered, unreg);</span>
<a href="#l48.19"></a><span id="l48.19">         equal(deleted, del);</span>
<a href="#l48.20"></a><span id="l48.20">         registered = false;</span>
<a href="#l48.21"></a><span id="l48.21">         unregistered = false;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/calendar/test/unit/test_freebusy.js</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/calendar/test/unit/test_freebusy.js</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -53,20 +53,20 @@ function test_period() {</span>
<a href="#l49.4"></a><span id="l49.4">     equal(period.end.icalString, &quot;20120101T010106&quot;);</span>
<a href="#l49.5"></a><span id="l49.5">     equal(period.duration.icalString, &quot;PT1S&quot;);</span>
<a href="#l49.6"></a><span id="l49.6"> </span>
<a href="#l49.7"></a><span id="l49.7">     period.makeImmutable();</span>
<a href="#l49.8"></a><span id="l49.8">     if (!Preferences.get(&quot;calendar.icaljs&quot;, false)) {</span>
<a href="#l49.9"></a><span id="l49.9">         // ical.js doesn't support immutability yet</span>
<a href="#l49.10"></a><span id="l49.10">         throws(function() {</span>
<a href="#l49.11"></a><span id="l49.11">             period.start = cal.createDateTime(&quot;20120202T020202&quot;);</span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-        }, /0x80460002/,&quot;Object is Immutable&quot;);</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineplus">+        }, /0x80460002/, &quot;Object is Immutable&quot;);</span>
<a href="#l49.14"></a><span id="l49.14">         throws(function() {</span>
<a href="#l49.15"></a><span id="l49.15">             period.end = cal.createDateTime(&quot;20120202T020202&quot;);</span>
<a href="#l49.16"></a><span id="l49.16" class="difflineminus">-        }, /0x80460002/,&quot;Object is Immutable&quot;);</span>
<a href="#l49.17"></a><span id="l49.17" class="difflineplus">+        }, /0x80460002/, &quot;Object is Immutable&quot;);</span>
<a href="#l49.18"></a><span id="l49.18">     }</span>
<a href="#l49.19"></a><span id="l49.19"> </span>
<a href="#l49.20"></a><span id="l49.20">     let copy = period.clone();</span>
<a href="#l49.21"></a><span id="l49.21">     equal(copy.start.icalString, &quot;20120101T010105&quot;);</span>
<a href="#l49.22"></a><span id="l49.22">     equal(copy.end.icalString, &quot;20120101T010106&quot;);</span>
<a href="#l49.23"></a><span id="l49.23">     equal(copy.duration.icalString, &quot;PT1S&quot;);</span>
<a href="#l49.24"></a><span id="l49.24"> </span>
<a href="#l49.25"></a><span id="l49.25">     copy.start.icalString = &quot;20120101T010106&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/calendar/test/unit/test_gdata_provider.js</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/calendar/test/unit/test_gdata_provider.js</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -457,17 +457,17 @@ function generateID() {</span>
<a href="#l50.4"></a><span id="l50.4">       s += c[Math.floor(Math.random() * c.length)];</span>
<a href="#l50.5"></a><span id="l50.5">     }</span>
<a href="#l50.6"></a><span id="l50.6">     return s;</span>
<a href="#l50.7"></a><span id="l50.7"> }</span>
<a href="#l50.8"></a><span id="l50.8"> </span>
<a href="#l50.9"></a><span id="l50.9"> function getAllMeta(calendar) {</span>
<a href="#l50.10"></a><span id="l50.10">     let keys = {}, values = {};</span>
<a href="#l50.11"></a><span id="l50.11">     calendar.getAllMetaData({}, keys, values);</span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-    return new Map(keys.value.map((k,i) =&gt; [k,values.value[i]]));</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineplus">+    return new Map(keys.value.map((k, i) =&gt; [k, values.value[i]]));</span>
<a href="#l50.14"></a><span id="l50.14"> }</span>
<a href="#l50.15"></a><span id="l50.15"> </span>
<a href="#l50.16"></a><span id="l50.16"> function run_test() {</span>
<a href="#l50.17"></a><span id="l50.17">     replaceAlertsService();</span>
<a href="#l50.18"></a><span id="l50.18"> </span>
<a href="#l50.19"></a><span id="l50.19">     // TODO: make do_calendar_startup to work with this test and replace the startup code here</span>
<a href="#l50.20"></a><span id="l50.20">     do_get_profile();</span>
<a href="#l50.21"></a><span id="l50.21">     do_test_pending();</span>
<a href="#l50.22"></a><span id="l50.22" class="difflineat">@@ -754,17 +754,17 @@ add_task(function* test_reset_sync() {</span>
<a href="#l50.23"></a><span id="l50.23">         &quot;kind&quot;: &quot;tasks#task&quot;,</span>
<a href="#l50.24"></a><span id="l50.24">         &quot;id&quot;: &quot;MTEyMDE2MDE5NzE0NjYzMDk4ODI6MDo0MDI1NDg2NjU&quot;,</span>
<a href="#l50.25"></a><span id="l50.25">         &quot;etag&quot;: &quot;\&quot;Lck7VNWFJuXdzMtOmrYPx0KFV2s/LTIwNjA4MDcyNDM\&quot;&quot;,</span>
<a href="#l50.26"></a><span id="l50.26">         &quot;title&quot;: &quot;New Task&quot;,</span>
<a href="#l50.27"></a><span id="l50.27">         &quot;updated&quot;: &quot;2014-09-08T16:30:27.000Z&quot;,</span>
<a href="#l50.28"></a><span id="l50.28">         &quot;selfLink&quot;: gServer.baseUri + &quot;/tasks/v1/lists/MTEyMDE2MDE5NzE0NjYzMDk4ODI6MDow/tasks/MTEyMDE2MDE5NzE0NjYzMDk4ODI6MDo0MDI1NDg2NjU&quot;,</span>
<a href="#l50.29"></a><span id="l50.29">         &quot;position&quot;: &quot;00000000000000130998&quot;,</span>
<a href="#l50.30"></a><span id="l50.30">         &quot;status&quot;: &quot;needsAction&quot;</span>
<a href="#l50.31"></a><span id="l50.31" class="difflineminus">-      },{</span>
<a href="#l50.32"></a><span id="l50.32" class="difflineplus">+      }, {</span>
<a href="#l50.33"></a><span id="l50.33">         &quot;kind&quot;: &quot;tasks#task&quot;,</span>
<a href="#l50.34"></a><span id="l50.34">         &quot;id&quot;: &quot;MTEyMDE2MDE5NzE0NjYzMDk4ODI6MDo5OTU0Mjk2MzQ&quot;,</span>
<a href="#l50.35"></a><span id="l50.35">         &quot;etag&quot;: &quot;\&quot;Lck7VNWFJuXdzMtOmrYPx0KFV2s/LTQyNTY0MjUwOQ\&quot;&quot;,</span>
<a href="#l50.36"></a><span id="l50.36">         &quot;title&quot;: &quot;New Task 2&quot;,</span>
<a href="#l50.37"></a><span id="l50.37">         &quot;updated&quot;: &quot;2014-09-08T16:30:27.000Z&quot;,</span>
<a href="#l50.38"></a><span id="l50.38">         &quot;selfLink&quot;: gServer.baseUri + &quot;/tasks/v1/lists/MTEyMDE2MDE5NzE0NjYzMDk4ODI6MDow/tasks/MTEyMDE2MDE5NzE0NjYzMDk4ODI6MDo5OTU0Mjk2MzQ&quot;,</span>
<a href="#l50.39"></a><span id="l50.39">         &quot;position&quot;: &quot;00000000000000130993&quot;,</span>
<a href="#l50.40"></a><span id="l50.40">         &quot;status&quot;: &quot;needsAction&quot;</span>
<a href="#l50.41"></a><span id="l50.41" class="difflineat">@@ -777,17 +777,17 @@ add_task(function* test_reset_sync() {</span>
<a href="#l50.42"></a><span id="l50.42">        &quot;created&quot;: &quot;2006-06-08T21:04:52.000Z&quot;,</span>
<a href="#l50.43"></a><span id="l50.43">        &quot;updated&quot;: &quot;2006-06-08T21:05:49.138Z&quot;,</span>
<a href="#l50.44"></a><span id="l50.44">        &quot;summary&quot;: &quot;New Event&quot;,</span>
<a href="#l50.45"></a><span id="l50.45">        &quot;creator&quot;: gServer.creator,</span>
<a href="#l50.46"></a><span id="l50.46">        &quot;organizer&quot;: gServer.creator,</span>
<a href="#l50.47"></a><span id="l50.47">        &quot;start&quot;: { &quot;dateTime&quot;: &quot;2006-06-10T18:00:00+02:00&quot; },</span>
<a href="#l50.48"></a><span id="l50.48">        &quot;end&quot;: {&quot;dateTime&quot;: &quot;2006-06-10T20:00:00+02:00&quot; },</span>
<a href="#l50.49"></a><span id="l50.49">        &quot;iCalUID&quot;: &quot;go6ijb0b46hlpbu4eeu92njevo@google.com&quot;</span>
<a href="#l50.50"></a><span id="l50.50" class="difflineminus">-    },{</span>
<a href="#l50.51"></a><span id="l50.51" class="difflineplus">+    }, {</span>
<a href="#l50.52"></a><span id="l50.52">        &quot;kind&quot;: &quot;calendar#event&quot;,</span>
<a href="#l50.53"></a><span id="l50.53">        &quot;etag&quot;: &quot;\&quot;2\&quot;&quot;,</span>
<a href="#l50.54"></a><span id="l50.54">        &quot;id&quot;: &quot;fepf8uf6n7n04w7feukucs9n8e&quot;,</span>
<a href="#l50.55"></a><span id="l50.55">        &quot;created&quot;: &quot;2006-06-08T21:04:52.000Z&quot;,</span>
<a href="#l50.56"></a><span id="l50.56">        &quot;updated&quot;: &quot;2006-06-08T21:05:49.138Z&quot;,</span>
<a href="#l50.57"></a><span id="l50.57">        &quot;summary&quot;: &quot;New Event 2&quot;,</span>
<a href="#l50.58"></a><span id="l50.58">        &quot;creator&quot;: gServer.creator,</span>
<a href="#l50.59"></a><span id="l50.59">        &quot;organizer&quot;: gServer.creator,</span>
<a href="#l50.60"></a><span id="l50.60" class="difflineat">@@ -1112,27 +1112,27 @@ add_task(function* test_recurring_except</span>
<a href="#l50.61"></a><span id="l50.61">             &quot;creator&quot;: gServer.creator,</span>
<a href="#l50.62"></a><span id="l50.62">             &quot;organizer&quot;: gServer.creator,</span>
<a href="#l50.63"></a><span id="l50.63">             &quot;start&quot;: { &quot;dateTime&quot;: &quot;2006-06-10T18:00:00+02:00&quot; },</span>
<a href="#l50.64"></a><span id="l50.64">             &quot;end&quot;: {&quot;dateTime&quot;: &quot;2006-06-10T20:00:00+02:00&quot; },</span>
<a href="#l50.65"></a><span id="l50.65">             &quot;iCalUID&quot;: &quot;go6ijb0b46hlpbu4eeu92njevo@google.com&quot;,</span>
<a href="#l50.66"></a><span id="l50.66">             &quot;recurrence&quot;: [</span>
<a href="#l50.67"></a><span id="l50.67">                 &quot;RRULE:FREQ=WEEKLY&quot;</span>
<a href="#l50.68"></a><span id="l50.68">             ]</span>
<a href="#l50.69"></a><span id="l50.69" class="difflineminus">-        },{</span>
<a href="#l50.70"></a><span id="l50.70" class="difflineplus">+        }, {</span>
<a href="#l50.71"></a><span id="l50.71">             &quot;kind&quot;: &quot;calendar#event&quot;,</span>
<a href="#l50.72"></a><span id="l50.72">             &quot;etag&quot;: &quot;\&quot;2\&quot;&quot;,</span>
<a href="#l50.73"></a><span id="l50.73">             &quot;id&quot;: &quot;go6ijb0b46hlpbu4eeu92njevo_20060617T160000Z&quot;,</span>
<a href="#l50.74"></a><span id="l50.74">             &quot;summary&quot;: &quot;New Event changed&quot;,</span>
<a href="#l50.75"></a><span id="l50.75">             &quot;start&quot;: { &quot;dateTime&quot;: &quot;2006-06-17T18:00:00+02:00&quot; },</span>
<a href="#l50.76"></a><span id="l50.76">             &quot;end&quot;: {&quot;dateTime&quot;: &quot;2006-06-17T20:00:00+02:00&quot; },</span>
<a href="#l50.77"></a><span id="l50.77">             &quot;recurringEventId&quot;: &quot;go6ijb0b46hlpbu4eeu92njevo&quot;,</span>
<a href="#l50.78"></a><span id="l50.78">             &quot;originalStartTime&quot;: { &quot;dateTime&quot;: &quot;2006-06-17T18:00:00+02:00&quot; }</span>
<a href="#l50.79"></a><span id="l50.79">         }]</span>
<a href="#l50.80"></a><span id="l50.80" class="difflineminus">-    },{</span>
<a href="#l50.81"></a><span id="l50.81" class="difflineplus">+    }, {</span>
<a href="#l50.82"></a><span id="l50.82">         // This sync run tests an exception where the master item is not part</span>
<a href="#l50.83"></a><span id="l50.83">         // of the item stream.</span>
<a href="#l50.84"></a><span id="l50.84">         token: &quot;2&quot;,</span>
<a href="#l50.85"></a><span id="l50.85">         events: [{</span>
<a href="#l50.86"></a><span id="l50.86">             &quot;kind&quot;: &quot;calendar#event&quot;,</span>
<a href="#l50.87"></a><span id="l50.87">             &quot;etag&quot;: &quot;\&quot;3\&quot;&quot;,</span>
<a href="#l50.88"></a><span id="l50.88">             &quot;id&quot;: &quot;go6ijb0b46hlpbu4eeu92njevo_20060617T160000Z&quot;,</span>
<a href="#l50.89"></a><span id="l50.89">             &quot;summary&quot;: &quot;New Event changed&quot;,</span>
<a href="#l50.90"></a><span id="l50.90" class="difflineat">@@ -1171,17 +1171,17 @@ add_task(function* test_recurring_except</span>
<a href="#l50.91"></a><span id="l50.91"> add_task(function* test_recurring_cancelled_exception() {</span>
<a href="#l50.92"></a><span id="l50.92">     gServer.syncs = [{</span>
<a href="#l50.93"></a><span id="l50.93">         token: &quot;1&quot;,</span>
<a href="#l50.94"></a><span id="l50.94">         events: [{</span>
<a href="#l50.95"></a><span id="l50.95">             &quot;kind&quot;: &quot;calendar#event&quot;,</span>
<a href="#l50.96"></a><span id="l50.96">             &quot;etag&quot;: &quot;\&quot;1\&quot;&quot;,</span>
<a href="#l50.97"></a><span id="l50.97">             &quot;id&quot;: &quot;go6ijb0b46hlpbu4eeu92njevo&quot;,</span>
<a href="#l50.98"></a><span id="l50.98">             &quot;status&quot;: &quot;cancelled&quot;,</span>
<a href="#l50.99"></a><span id="l50.99" class="difflineminus">-        },{</span>
<a href="#l50.100"></a><span id="l50.100" class="difflineplus">+        }, {</span>
<a href="#l50.101"></a><span id="l50.101">             &quot;kind&quot;: &quot;calendar#event&quot;,</span>
<a href="#l50.102"></a><span id="l50.102">             &quot;etag&quot;: &quot;\&quot;2\&quot;&quot;,</span>
<a href="#l50.103"></a><span id="l50.103">             &quot;id&quot;: &quot;go6ijb0b46hlpbu4eeu92njevo_20060617T160000Z&quot;,</span>
<a href="#l50.104"></a><span id="l50.104">             &quot;status&quot;: &quot;cancelled&quot;,</span>
<a href="#l50.105"></a><span id="l50.105">             &quot;recurringEventId&quot;: &quot;go6ijb0b46hlpbu4eeu92njevo&quot;,</span>
<a href="#l50.106"></a><span id="l50.106">             &quot;originalStartTime&quot;: { &quot;dateTime&quot;: &quot;2006-06-17T18:00:00+02:00&quot; }</span>
<a href="#l50.107"></a><span id="l50.107">         }]</span>
<a href="#l50.108"></a><span id="l50.108">     }];</span>
<a href="#l50.109"></a><span id="l50.109" class="difflineat">@@ -1441,26 +1441,26 @@ add_task(function* test_metadata_recurri</span>
<a href="#l50.110"></a><span id="l50.110">         &quot;creator&quot;: gServer.creator,</span>
<a href="#l50.111"></a><span id="l50.111">         &quot;organizer&quot;: gServer.creator,</span>
<a href="#l50.112"></a><span id="l50.112">         &quot;start&quot;: { &quot;dateTime&quot;: &quot;2006-06-10T18:00:00+02:00&quot; },</span>
<a href="#l50.113"></a><span id="l50.113">         &quot;end&quot;: {&quot;dateTime&quot;: &quot;2006-06-10T20:00:00+02:00&quot; },</span>
<a href="#l50.114"></a><span id="l50.114">         &quot;iCalUID&quot;: &quot;go6ijb0b46hlpbu4eeu92njevo@google.com&quot;,</span>
<a href="#l50.115"></a><span id="l50.115">         &quot;recurrence&quot;: [</span>
<a href="#l50.116"></a><span id="l50.116">             &quot;RRULE:FREQ=WEEKLY&quot;</span>
<a href="#l50.117"></a><span id="l50.117">         ]</span>
<a href="#l50.118"></a><span id="l50.118" class="difflineminus">-    },{</span>
<a href="#l50.119"></a><span id="l50.119" class="difflineplus">+    }, {</span>
<a href="#l50.120"></a><span id="l50.120">         &quot;kind&quot;: &quot;calendar#event&quot;,</span>
<a href="#l50.121"></a><span id="l50.121">         &quot;etag&quot;: &quot;\&quot;2\&quot;&quot;,</span>
<a href="#l50.122"></a><span id="l50.122">         &quot;id&quot;: &quot;go6ijb0b46hlpbu4eeu92njevo_20060610T160000Z&quot;,</span>
<a href="#l50.123"></a><span id="l50.123">         &quot;summary&quot;: &quot;New Event changed&quot;,</span>
<a href="#l50.124"></a><span id="l50.124">         &quot;start&quot;: { &quot;dateTime&quot;: &quot;2006-06-10T18:00:00+02:00&quot; },</span>
<a href="#l50.125"></a><span id="l50.125">         &quot;end&quot;: {&quot;dateTime&quot;: &quot;2006-06-10T20:00:00+02:00&quot; },</span>
<a href="#l50.126"></a><span id="l50.126">         &quot;recurringEventId&quot;: &quot;go6ijb0b46hlpbu4eeu92njevo&quot;,</span>
<a href="#l50.127"></a><span id="l50.127">         &quot;originalStartTime&quot;: { &quot;dateTime&quot;: &quot;2006-06-10T18:00:00+02:00&quot; }</span>
<a href="#l50.128"></a><span id="l50.128" class="difflineminus">-    },{</span>
<a href="#l50.129"></a><span id="l50.129" class="difflineplus">+    }, {</span>
<a href="#l50.130"></a><span id="l50.130">         &quot;kind&quot;: &quot;calendar#event&quot;,</span>
<a href="#l50.131"></a><span id="l50.131">         &quot;etag&quot;: &quot;\&quot;3\&quot;&quot;,</span>
<a href="#l50.132"></a><span id="l50.132">         &quot;id&quot;: &quot;go6ijb0b46hlpbu4eeu92njevo_20060617T160000Z&quot;,</span>
<a href="#l50.133"></a><span id="l50.133">         &quot;summary&quot;: &quot;New Event next week&quot;,</span>
<a href="#l50.134"></a><span id="l50.134">         &quot;start&quot;: { &quot;dateTime&quot;: &quot;2006-06-17T18:00:00+02:00&quot; },</span>
<a href="#l50.135"></a><span id="l50.135">         &quot;end&quot;: {&quot;dateTime&quot;: &quot;2006-06-17T20:00:00+02:00&quot; },</span>
<a href="#l50.136"></a><span id="l50.136">         &quot;recurringEventId&quot;: &quot;go6ijb0b46hlpbu4eeu92njevo&quot;,</span>
<a href="#l50.137"></a><span id="l50.137">         &quot;originalStartTime&quot;: { &quot;dateTime&quot;: &quot;2006-06-17T18:00:00+02:00&quot; }</span>
<a href="#l50.138"></a><span id="l50.138" class="difflineat">@@ -1821,17 +1821,17 @@ add_task(function* test_paginate() {</span>
<a href="#l50.139"></a><span id="l50.139">        &quot;created&quot;: &quot;2006-06-08T21:04:52.000Z&quot;,</span>
<a href="#l50.140"></a><span id="l50.140">        &quot;updated&quot;: &quot;2006-06-08T21:05:49.138Z&quot;,</span>
<a href="#l50.141"></a><span id="l50.141">        &quot;summary&quot;: &quot;New Event&quot;,</span>
<a href="#l50.142"></a><span id="l50.142">        &quot;creator&quot;: gServer.creator,</span>
<a href="#l50.143"></a><span id="l50.143">        &quot;organizer&quot;: gServer.creator,</span>
<a href="#l50.144"></a><span id="l50.144">        &quot;start&quot;: { &quot;dateTime&quot;: &quot;2006-06-10T18:00:00+02:00&quot; },</span>
<a href="#l50.145"></a><span id="l50.145">        &quot;end&quot;: {&quot;dateTime&quot;: &quot;2006-06-10T20:00:00+02:00&quot; },</span>
<a href="#l50.146"></a><span id="l50.146">        &quot;iCalUID&quot;: &quot;go6ijb0b46hlpbu4eeu92njevo@google.com&quot;</span>
<a href="#l50.147"></a><span id="l50.147" class="difflineminus">-    },{</span>
<a href="#l50.148"></a><span id="l50.148" class="difflineplus">+    }, {</span>
<a href="#l50.149"></a><span id="l50.149">        &quot;kind&quot;: &quot;calendar#event&quot;,</span>
<a href="#l50.150"></a><span id="l50.150">        &quot;etag&quot;: &quot;\&quot;2\&quot;&quot;,</span>
<a href="#l50.151"></a><span id="l50.151">        &quot;id&quot;: &quot;fepf8uf6n7n04w7feukucs9n8e&quot;,</span>
<a href="#l50.152"></a><span id="l50.152">        &quot;created&quot;: &quot;2006-06-08T21:04:52.000Z&quot;,</span>
<a href="#l50.153"></a><span id="l50.153">        &quot;updated&quot;: &quot;2006-06-08T21:05:49.138Z&quot;,</span>
<a href="#l50.154"></a><span id="l50.154">        &quot;summary&quot;: &quot;New Event 2&quot;,</span>
<a href="#l50.155"></a><span id="l50.155">        &quot;creator&quot;: gServer.creator,</span>
<a href="#l50.156"></a><span id="l50.156">        &quot;organizer&quot;: gServer.creator,</span>
<a href="#l50.157"></a><span id="l50.157" class="difflineat">@@ -1845,17 +1845,17 @@ add_task(function* test_paginate() {</span>
<a href="#l50.158"></a><span id="l50.158">         &quot;kind&quot;: &quot;tasks#task&quot;,</span>
<a href="#l50.159"></a><span id="l50.159">         &quot;id&quot;: &quot;MTEyMDE2MDE5NzE0NjYzMDk4ODI6MDo0MDI1NDg2NjU&quot;,</span>
<a href="#l50.160"></a><span id="l50.160">         &quot;etag&quot;: &quot;\&quot;Lck7VNWFJuXdzMtOmrYPx0KFV2s/LTIwNjA4MDcyNDM\&quot;&quot;,</span>
<a href="#l50.161"></a><span id="l50.161">         &quot;title&quot;: &quot;New Task&quot;,</span>
<a href="#l50.162"></a><span id="l50.162">         &quot;updated&quot;: &quot;2014-09-08T16:30:27.000Z&quot;,</span>
<a href="#l50.163"></a><span id="l50.163">         &quot;selfLink&quot;: gServer.baseUri + &quot;/tasks/v1/lists/MTEyMDE2MDE5NzE0NjYzMDk4ODI6MDow/tasks/MTEyMDE2MDE5NzE0NjYzMDk4ODI6MDo0MDI1NDg2NjU&quot;,</span>
<a href="#l50.164"></a><span id="l50.164">         &quot;position&quot;: &quot;00000000000000130998&quot;,</span>
<a href="#l50.165"></a><span id="l50.165">         &quot;status&quot;: &quot;needsAction&quot;</span>
<a href="#l50.166"></a><span id="l50.166" class="difflineminus">-      },{</span>
<a href="#l50.167"></a><span id="l50.167" class="difflineplus">+      }, {</span>
<a href="#l50.168"></a><span id="l50.168">         &quot;kind&quot;: &quot;tasks#task&quot;,</span>
<a href="#l50.169"></a><span id="l50.169">         &quot;id&quot;: &quot;MTEyMDE2MDE5NzE0NjYzMDk4ODI6MDo5OTU0Mjk2MzQ&quot;,</span>
<a href="#l50.170"></a><span id="l50.170">         &quot;etag&quot;: &quot;\&quot;Lck7VNWFJuXdzMtOmrYPx0KFV2s/LTQyNTY0MjUwOQ\&quot;&quot;,</span>
<a href="#l50.171"></a><span id="l50.171">         &quot;title&quot;: &quot;New Task 2&quot;,</span>
<a href="#l50.172"></a><span id="l50.172">         &quot;updated&quot;: &quot;2014-09-08T16:30:27.000Z&quot;,</span>
<a href="#l50.173"></a><span id="l50.173">         &quot;selfLink&quot;: gServer.baseUri + &quot;/tasks/v1/lists/MTEyMDE2MDE5NzE0NjYzMDk4ODI6MDow/tasks/MTEyMDE2MDE5NzE0NjYzMDk4ODI6MDo5OTU0Mjk2MzQ&quot;,</span>
<a href="#l50.174"></a><span id="l50.174">         &quot;position&quot;: &quot;00000000000000130993&quot;,</span>
<a href="#l50.175"></a><span id="l50.175">         &quot;status&quot;: &quot;needsAction&quot;</span>
<a href="#l50.176"></a><span id="l50.176" class="difflineat">@@ -1893,20 +1893,20 @@ add_task(function* test_incremental_rese</span>
<a href="#l50.177"></a><span id="l50.177">             &quot;updated&quot;: &quot;2006-06-08T21:05:49.138Z&quot;,</span>
<a href="#l50.178"></a><span id="l50.178">             &quot;summary&quot;: &quot;New Event&quot;,</span>
<a href="#l50.179"></a><span id="l50.179">             &quot;creator&quot;: gServer.creator,</span>
<a href="#l50.180"></a><span id="l50.180">             &quot;organizer&quot;: gServer.creator,</span>
<a href="#l50.181"></a><span id="l50.181">             &quot;start&quot;: { &quot;dateTime&quot;: &quot;2006-06-10T18:00:00+02:00&quot; },</span>
<a href="#l50.182"></a><span id="l50.182">             &quot;end&quot;: {&quot;dateTime&quot;: &quot;2006-06-10T20:00:00+02:00&quot; },</span>
<a href="#l50.183"></a><span id="l50.183">             &quot;iCalUID&quot;: &quot;go6ijb0b46hlpbu4eeu92njevo@google.com&quot;</span>
<a href="#l50.184"></a><span id="l50.184">         }]</span>
<a href="#l50.185"></a><span id="l50.185" class="difflineminus">-    },{</span>
<a href="#l50.186"></a><span id="l50.186" class="difflineplus">+    }, {</span>
<a href="#l50.187"></a><span id="l50.187">         token: &quot;2&quot;,</span>
<a href="#l50.188"></a><span id="l50.188">         reset: true</span>
<a href="#l50.189"></a><span id="l50.189" class="difflineminus">-    },{</span>
<a href="#l50.190"></a><span id="l50.190" class="difflineplus">+    }, {</span>
<a href="#l50.191"></a><span id="l50.191">         token: &quot;3&quot;,</span>
<a href="#l50.192"></a><span id="l50.192">         events: [{</span>
<a href="#l50.193"></a><span id="l50.193">             &quot;kind&quot;: &quot;calendar#event&quot;,</span>
<a href="#l50.194"></a><span id="l50.194">             &quot;etag&quot;: &quot;\&quot;2\&quot;&quot;,</span>
<a href="#l50.195"></a><span id="l50.195">             &quot;id&quot;: &quot;fepf8uf6n7n04w7feukucs9n8e&quot;,</span>
<a href="#l50.196"></a><span id="l50.196">             &quot;created&quot;: &quot;2006-06-08T21:04:52.000Z&quot;,</span>
<a href="#l50.197"></a><span id="l50.197">             &quot;updated&quot;: &quot;2006-06-08T21:05:49.138Z&quot;,</span>
<a href="#l50.198"></a><span id="l50.198">             &quot;summary&quot;: &quot;New Event 2&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/calendar/test/unit/test_hashedarray.js</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/calendar/test/unit/test_hashedarray.js</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -83,17 +83,17 @@ function dumpArray(ar) {</span>
<a href="#l51.4"></a><span id="l51.4">  * @param postprocessFunc   (optional) The function to call after each</span>
<a href="#l51.5"></a><span id="l51.5">  *                            operation, but before checking consistancy.</span>
<a href="#l51.6"></a><span id="l51.6">  * @param itemAccessor      (optional) The function to access the item for an</span>
<a href="#l51.7"></a><span id="l51.7">  *                            array element.</span>
<a href="#l51.8"></a><span id="l51.8">  * @param itemCreator       (optional) Function to create a new item for the</span>
<a href="#l51.9"></a><span id="l51.9">  *                            array.</span>
<a href="#l51.10"></a><span id="l51.10">  */</span>
<a href="#l51.11"></a><span id="l51.11"> function testRemoveModify(har, testItems, postprocessFunc, itemAccessor, itemCreator) {</span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-    postprocessFunc = postprocessFunc || function(a, b) { return [a,b]; };</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineplus">+    postprocessFunc = postprocessFunc || function(a, b) { return [a, b]; };</span>
<a href="#l51.14"></a><span id="l51.14">     itemCreator = itemCreator || (title =&gt; hashedCreateItem(title));</span>
<a href="#l51.15"></a><span id="l51.15">     itemAccessor = itemAccessor || function(o) { return o; }</span>
<a href="#l51.16"></a><span id="l51.16"> </span>
<a href="#l51.17"></a><span id="l51.17">     // Now, delete the second item and check again</span>
<a href="#l51.18"></a><span id="l51.18">     har.removeById(itemAccessor(testItems[1]).hashId);</span>
<a href="#l51.19"></a><span id="l51.19">     testItems.splice(1, 1);</span>
<a href="#l51.20"></a><span id="l51.20">     [har, testItems] = postprocessFunc(har, testItems);</span>
<a href="#l51.21"></a><span id="l51.21"> </span>
<a href="#l51.22"></a><span id="l51.22" class="difflineat">@@ -117,17 +117,17 @@ function testRemoveModify(har, testItems</span>
<a href="#l51.23"></a><span id="l51.23"> /**</span>
<a href="#l51.24"></a><span id="l51.24">  * Tests the basic cal.HashedArray</span>
<a href="#l51.25"></a><span id="l51.25">  */</span>
<a href="#l51.26"></a><span id="l51.26"> function test_array_base() {</span>
<a href="#l51.27"></a><span id="l51.27">     let har, testItems;</span>
<a href="#l51.28"></a><span id="l51.28"> </span>
<a href="#l51.29"></a><span id="l51.29">     // Test normal additions</span>
<a href="#l51.30"></a><span id="l51.30">     har = new cal.HashedArray();</span>
<a href="#l51.31"></a><span id="l51.31" class="difflineminus">-    testItems = [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;].map(hashedCreateItem);</span>
<a href="#l51.32"></a><span id="l51.32" class="difflineplus">+    testItems = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;].map(hashedCreateItem);</span>
<a href="#l51.33"></a><span id="l51.33"> </span>
<a href="#l51.34"></a><span id="l51.34">     testItems.forEach(har.addItem, har);</span>
<a href="#l51.35"></a><span id="l51.35">     checkConsistancy(har, testItems);</span>
<a href="#l51.36"></a><span id="l51.36">     testRemoveModify(har, testItems);</span>
<a href="#l51.37"></a><span id="l51.37"> </span>
<a href="#l51.38"></a><span id="l51.38">     // Test adding in batch mode</span>
<a href="#l51.39"></a><span id="l51.39">     har = new cal.HashedArray();</span>
<a href="#l51.40"></a><span id="l51.40">     testItems = [&quot;e&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;].map(hashedCreateItem);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/calendar/test/unit/test_recur.js</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/calendar/test/unit/test_recur.js</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -402,48 +402,48 @@ function test_rules() {</span>
<a href="#l52.4"></a><span id="l52.4">                 &quot;20161231T150000Z&quot;, &quot;20170831T150000Z&quot;, &quot;20171031T150000Z&quot;],</span>
<a href="#l52.5"></a><span id="l52.5">                false);</span>
<a href="#l52.6"></a><span id="l52.6"> </span>
<a href="#l52.7"></a><span id="l52.7">     let item, occ1;</span>
<a href="#l52.8"></a><span id="l52.8">     item = makeEvent(&quot;DESCRIPTION:occurrence on day 1 moved between the occurrences &quot; +</span>
<a href="#l52.9"></a><span id="l52.9">                                      &quot;on days 2 and 3\n&quot; +</span>
<a href="#l52.10"></a><span id="l52.10">                          &quot;RRULE:FREQ=DAILY;COUNT=3\n&quot; +</span>
<a href="#l52.11"></a><span id="l52.11">                          &quot;DTSTART:20020402T114500Z\n&quot;);</span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-    occ1 = item.recurrenceInfo.getOccurrenceFor(createDate(2002,3,2,true,11,45,0));</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineminus">-    occ1.startDate = createDate(2002,3,3,true,12,0,0);</span>
<a href="#l52.14"></a><span id="l52.14" class="difflineplus">+    occ1 = item.recurrenceInfo.getOccurrenceFor(createDate(2002, 3, 2, true, 11, 45, 0));</span>
<a href="#l52.15"></a><span id="l52.15" class="difflineplus">+    occ1.startDate = createDate(2002, 3, 3, true, 12, 0, 0);</span>
<a href="#l52.16"></a><span id="l52.16">     item.recurrenceInfo.modifyException(occ1, true);</span>
<a href="#l52.17"></a><span id="l52.17">     check_recur(item, [&quot;20020403T114500Z&quot;, &quot;20020403T120000Z&quot;, &quot;20020404T114500Z&quot;]);</span>
<a href="#l52.18"></a><span id="l52.18"> </span>
<a href="#l52.19"></a><span id="l52.19">     item = makeEvent(&quot;DESCRIPTION:occurrence on day 1 moved between the occurrences &quot; +</span>
<a href="#l52.20"></a><span id="l52.20">                                  &quot;on days 2 and 3, EXDATE on day 2\n&quot; +</span>
<a href="#l52.21"></a><span id="l52.21">                      &quot;RRULE:FREQ=DAILY;COUNT=3\n&quot; +</span>
<a href="#l52.22"></a><span id="l52.22">                      &quot;DTSTART:20020402T114500Z\n&quot; +</span>
<a href="#l52.23"></a><span id="l52.23">                      &quot;EXDATE:20020403T114500Z\n&quot;);</span>
<a href="#l52.24"></a><span id="l52.24" class="difflineminus">-    occ1 = item.recurrenceInfo.getOccurrenceFor(createDate(2002,3,2,true,11,45,0));</span>
<a href="#l52.25"></a><span id="l52.25" class="difflineminus">-    occ1.startDate = createDate(2002,3,3,true,12,0,0);</span>
<a href="#l52.26"></a><span id="l52.26" class="difflineplus">+    occ1 = item.recurrenceInfo.getOccurrenceFor(createDate(2002, 3, 2, true, 11, 45, 0));</span>
<a href="#l52.27"></a><span id="l52.27" class="difflineplus">+    occ1.startDate = createDate(2002, 3, 3, true, 12, 0, 0);</span>
<a href="#l52.28"></a><span id="l52.28">     item.recurrenceInfo.modifyException(occ1, true);</span>
<a href="#l52.29"></a><span id="l52.29">     check_recur(item, [&quot;20020403T120000Z&quot;, &quot;20020404T114500Z&quot;]);</span>
<a href="#l52.30"></a><span id="l52.30"> </span>
<a href="#l52.31"></a><span id="l52.31">     item = makeEvent(&quot;DESCRIPTION:all occurrences have exceptions\n&quot; +</span>
<a href="#l52.32"></a><span id="l52.32">                      &quot;RRULE:FREQ=DAILY;COUNT=2\n&quot; +</span>
<a href="#l52.33"></a><span id="l52.33">                      &quot;DTSTART:20020402T114500Z\n&quot;);</span>
<a href="#l52.34"></a><span id="l52.34" class="difflineminus">-    occ1 = item.recurrenceInfo.getOccurrenceFor(createDate(2002,3,2,true,11,45,0));</span>
<a href="#l52.35"></a><span id="l52.35" class="difflineminus">-    occ1.startDate = createDate(2002,3,2,true,12,0,0);</span>
<a href="#l52.36"></a><span id="l52.36" class="difflineplus">+    occ1 = item.recurrenceInfo.getOccurrenceFor(createDate(2002, 3, 2, true, 11, 45, 0));</span>
<a href="#l52.37"></a><span id="l52.37" class="difflineplus">+    occ1.startDate = createDate(2002, 3, 2, true, 12, 0, 0);</span>
<a href="#l52.38"></a><span id="l52.38">     item.recurrenceInfo.modifyException(occ1, true);</span>
<a href="#l52.39"></a><span id="l52.39" class="difflineminus">-    let occ2 = item.recurrenceInfo.getOccurrenceFor(createDate(2002,3,3,true,11,45,0));</span>
<a href="#l52.40"></a><span id="l52.40" class="difflineminus">-    occ2.startDate = createDate(2002,3,3,true,12,0,0);</span>
<a href="#l52.41"></a><span id="l52.41" class="difflineplus">+    let occ2 = item.recurrenceInfo.getOccurrenceFor(createDate(2002, 3, 3, true, 11, 45, 0));</span>
<a href="#l52.42"></a><span id="l52.42" class="difflineplus">+    occ2.startDate = createDate(2002, 3, 3, true, 12, 0, 0);</span>
<a href="#l52.43"></a><span id="l52.43">     item.recurrenceInfo.modifyException(occ2, true);</span>
<a href="#l52.44"></a><span id="l52.44">     check_recur(item, [&quot;20020402T120000Z&quot;, &quot;20020403T120000Z&quot;]);</span>
<a href="#l52.45"></a><span id="l52.45"> </span>
<a href="#l52.46"></a><span id="l52.46">     item = makeEvent(&quot;DESCRIPTION:rdate and exception before the recurrence start date\n&quot; +</span>
<a href="#l52.47"></a><span id="l52.47">                      &quot;RRULE:FREQ=DAILY;COUNT=2\n&quot; +</span>
<a href="#l52.48"></a><span id="l52.48">                      &quot;DTSTART:20020402T114500Z\n&quot; +</span>
<a href="#l52.49"></a><span id="l52.49">                      &quot;RDATE:20020401T114500Z\n&quot;);</span>
<a href="#l52.50"></a><span id="l52.50" class="difflineminus">-    occ1 = item.recurrenceInfo.getOccurrenceFor(createDate(2002,3,2,true,11,45,0));</span>
<a href="#l52.51"></a><span id="l52.51" class="difflineminus">-    occ1.startDate = createDate(2002,2,30,true,11,45,0);</span>
<a href="#l52.52"></a><span id="l52.52" class="difflineplus">+    occ1 = item.recurrenceInfo.getOccurrenceFor(createDate(2002, 3, 2, true, 11, 45, 0));</span>
<a href="#l52.53"></a><span id="l52.53" class="difflineplus">+    occ1.startDate = createDate(2002, 2, 30, true, 11, 45, 0);</span>
<a href="#l52.54"></a><span id="l52.54">     item.recurrenceInfo.modifyException(occ1, true);</span>
<a href="#l52.55"></a><span id="l52.55">     check_recur(item, [&quot;20020330T114500Z&quot;, &quot;20020401T114500Z&quot;, &quot;20020403T114500Z&quot;]);</span>
<a href="#l52.56"></a><span id="l52.56"> </span>
<a href="#l52.57"></a><span id="l52.57">     item = makeEvent(&quot;DESCRIPTION:bug 734245, an EXDATE of type DATE shall also match a DTSTART of type DATE-TIME\n&quot; +</span>
<a href="#l52.58"></a><span id="l52.58">                      &quot;RRULE:FREQ=DAILY;COUNT=3\n&quot; +</span>
<a href="#l52.59"></a><span id="l52.59">                      &quot;DTSTART:20020401T114500Z\n&quot; +</span>
<a href="#l52.60"></a><span id="l52.60">                      &quot;EXDATE;VALUE=DATE:20020402\n&quot;);</span>
<a href="#l52.61"></a><span id="l52.61"> </span>
<a href="#l52.62"></a><span id="l52.62" class="difflineat">@@ -636,20 +636,20 @@ function test_rrule_interface() {</span>
<a href="#l52.63"></a><span id="l52.63"> </span>
<a href="#l52.64"></a><span id="l52.64">     let rrule = item.recurrenceInfo.getRecurrenceItemAt(0);</span>
<a href="#l52.65"></a><span id="l52.65">     equal(rrule.type, &quot;WEEKLY&quot;);</span>
<a href="#l52.66"></a><span id="l52.66">     equal(rrule.interval, 2);</span>
<a href="#l52.67"></a><span id="l52.67">     equal(rrule.count, 6);</span>
<a href="#l52.68"></a><span id="l52.68">     ok(rrule.isByCount);</span>
<a href="#l52.69"></a><span id="l52.69">     ok(!rrule.isNegative);</span>
<a href="#l52.70"></a><span id="l52.70">     ok(rrule.isFinite);</span>
<a href="#l52.71"></a><span id="l52.71" class="difflineminus">-    equal(rrule.getComponent(&quot;BYDAY&quot;, {}).toString(), [3,4].toString());</span>
<a href="#l52.72"></a><span id="l52.72" class="difflineplus">+    equal(rrule.getComponent(&quot;BYDAY&quot;, {}).toString(), [3, 4].toString());</span>
<a href="#l52.73"></a><span id="l52.73"> </span>
<a href="#l52.74"></a><span id="l52.74">     // Now start changing things</span>
<a href="#l52.75"></a><span id="l52.75" class="difflineminus">-    rrule.setComponent(&quot;BYDAY&quot;, 2, [4,5]);</span>
<a href="#l52.76"></a><span id="l52.76" class="difflineplus">+    rrule.setComponent(&quot;BYDAY&quot;, 2, [4, 5]);</span>
<a href="#l52.77"></a><span id="l52.77">     equal(rrule.icalString.match(/BYDAY=WE,TH/), &quot;BYDAY=WE,TH&quot;);</span>
<a href="#l52.78"></a><span id="l52.78"> </span>
<a href="#l52.79"></a><span id="l52.79">     rrule.count = -1;</span>
<a href="#l52.80"></a><span id="l52.80">     ok(!rrule.isByCount);</span>
<a href="#l52.81"></a><span id="l52.81">     ok(!rrule.isFinite);</span>
<a href="#l52.82"></a><span id="l52.82">     equal(rrule.icalString.match(/COUNT=/), null);</span>
<a href="#l52.83"></a><span id="l52.83">     throws(() =&gt; rrule.count, /0x80004005/);</span>
<a href="#l52.84"></a><span id="l52.84"> </span>
<a href="#l52.85"></a><span id="l52.85" class="difflineat">@@ -746,17 +746,17 @@ function test_idchange() {</span>
<a href="#l52.86"></a><span id="l52.86">     let occ = item.recurrenceInfo.getOccurrenceFor(cal.createDateTime(&quot;20020406T114500Z&quot;));</span>
<a href="#l52.87"></a><span id="l52.87">     occ.startDate = cal.createDateTime(&quot;20020406T124500Z&quot;);</span>
<a href="#l52.88"></a><span id="l52.88">     item.recurrenceInfo.modifyException(occ, true);</span>
<a href="#l52.89"></a><span id="l52.89">     equal(occ.id, &quot;unchanged&quot;);</span>
<a href="#l52.90"></a><span id="l52.90"> </span>
<a href="#l52.91"></a><span id="l52.91">     item.id = &quot;changed&quot;;</span>
<a href="#l52.92"></a><span id="l52.92"> </span>
<a href="#l52.93"></a><span id="l52.93">     occ = item.recurrenceInfo.getExceptionFor(cal.createDateTime(&quot;20020406T114500Z&quot;));</span>
<a href="#l52.94"></a><span id="l52.94" class="difflineminus">-    equal(occ.id , &quot;changed&quot;);</span>
<a href="#l52.95"></a><span id="l52.95" class="difflineplus">+    equal(occ.id, &quot;changed&quot;);</span>
<a href="#l52.96"></a><span id="l52.96"> }</span>
<a href="#l52.97"></a><span id="l52.97"> </span>
<a href="#l52.98"></a><span id="l52.98"> function test_failures() {</span>
<a href="#l52.99"></a><span id="l52.99">     let item = makeEvent(&quot;DTSTART:20020402T114500Z\r\n&quot; +</span>
<a href="#l52.100"></a><span id="l52.100">                          &quot;DTEND:20020402T124500Z\r\n&quot; +</span>
<a href="#l52.101"></a><span id="l52.101">                          &quot;RRULE:INTERVAL=2;FREQ=WEEKLY;COUNT=6;BYDAY=TU,WE\r\n&quot;);</span>
<a href="#l52.102"></a><span id="l52.102">     let rinfo = item.recurrenceInfo;</span>
<a href="#l52.103"></a><span id="l52.103">     let ritem = cal.createRecurrenceDate();</span>
<a href="#l52.104"></a><span id="l52.104" class="difflineat">@@ -829,19 +829,19 @@ function test_rrule_icalstring() {</span>
<a href="#l52.105"></a><span id="l52.105">     recRule.type = &quot;WEEKLY&quot;;</span>
<a href="#l52.106"></a><span id="l52.106">     recRule.interval = 3;</span>
<a href="#l52.107"></a><span id="l52.107">     recRule.setComponent(&quot;BYDAY&quot;, 3, [2, 4, 6]);</span>
<a href="#l52.108"></a><span id="l52.108">     equal(recRule.icalString, &quot;RRULE:FREQ=WEEKLY;INTERVAL=3;BYDAY=MO,WE,FR\r\n&quot;);</span>
<a href="#l52.109"></a><span id="l52.109">     deepEqual(recRule.getComponent(&quot;BYDAY&quot;, {}), [2, 4, 6]);</span>
<a href="#l52.110"></a><span id="l52.110"> </span>
<a href="#l52.111"></a><span id="l52.111">     recRule = createRecurrenceRule();</span>
<a href="#l52.112"></a><span id="l52.112">     recRule.type = &quot;MONTHLY&quot;;</span>
<a href="#l52.113"></a><span id="l52.113" class="difflineminus">-    recRule.setComponent(&quot;BYDAY&quot;, 7, [2,3,4,5,6,7,1]);</span>
<a href="#l52.114"></a><span id="l52.114" class="difflineplus">+    recRule.setComponent(&quot;BYDAY&quot;, 7, [2, 3, 4, 5, 6, 7, 1]);</span>
<a href="#l52.115"></a><span id="l52.115">     equal(recRule.icalString, &quot;RRULE:FREQ=MONTHLY;BYDAY=MO,TU,WE,TH,FR,SA,SU\r\n&quot;);</span>
<a href="#l52.116"></a><span id="l52.116" class="difflineminus">-    deepEqual(recRule.getComponent(&quot;BYDAY&quot;, {}), [2,3,4,5,6,7,1]);</span>
<a href="#l52.117"></a><span id="l52.117" class="difflineplus">+    deepEqual(recRule.getComponent(&quot;BYDAY&quot;, {}), [2, 3, 4, 5, 6, 7, 1]);</span>
<a href="#l52.118"></a><span id="l52.118"> </span>
<a href="#l52.119"></a><span id="l52.119">     recRule = createRecurrenceRule();</span>
<a href="#l52.120"></a><span id="l52.120">     recRule.type = &quot;MONTHLY&quot;;</span>
<a href="#l52.121"></a><span id="l52.121">     recRule.setComponent(&quot;BYDAY&quot;, 1, [10]);</span>
<a href="#l52.122"></a><span id="l52.122">     equal(recRule.icalString, &quot;RRULE:FREQ=MONTHLY;BYDAY=1MO\r\n&quot;);</span>
<a href="#l52.123"></a><span id="l52.123">     deepEqual(recRule.getComponent(&quot;BYDAY&quot;, {}), [10]);</span>
<a href="#l52.124"></a><span id="l52.124"> </span>
<a href="#l52.125"></a><span id="l52.125">     recRule = createRecurrenceRule();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/calendar/test/unit/test_timezone.js</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/calendar/test/unit/test_timezone.js</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -44,39 +44,40 @@ function really_run_test() {</span>
<a href="#l53.4"></a><span id="l53.4">           &quot;CATEGORIES:MEETING&quot;,</span>
<a href="#l53.5"></a><span id="l53.5">           &quot;CLASS:PUBLIC&quot;,</span>
<a href="#l53.6"></a><span id="l53.6">           &quot;CREATED:19980309T130000Z&quot;,</span>
<a href="#l53.7"></a><span id="l53.7">           &quot;SUMMARY:XYZ Project Review&quot;,</span>
<a href="#l53.8"></a><span id="l53.8">           &quot;DTSTART;TZID=America/New_York:19980312T083000&quot;,</span>
<a href="#l53.9"></a><span id="l53.9">           &quot;DTEND;TZID=America/New_York:19980312T093000&quot;,</span>
<a href="#l53.10"></a><span id="l53.10">           &quot;LOCATION:1CP Conference Room 4350&quot;,</span>
<a href="#l53.11"></a><span id="l53.11">           &quot;END:VEVENT&quot;,</span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-          &quot;END:VCALENDAR&quot;,].join(&quot;\r\n&quot;);</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineplus">+          &quot;END:VCALENDAR&quot;,</span>
<a href="#l53.14"></a><span id="l53.14" class="difflineplus">+          &quot;&quot;].join(&quot;\r\n&quot;);</span>
<a href="#l53.15"></a><span id="l53.15"> </span>
<a href="#l53.16"></a><span id="l53.16">     var strTz =</span>
<a href="#l53.17"></a><span id="l53.17">          [&quot;BEGIN:VTIMEZONE&quot;,</span>
<a href="#l53.18"></a><span id="l53.18">           &quot;TZID:America/New_York&quot;,</span>
<a href="#l53.19"></a><span id="l53.19">           &quot;BEGIN:STANDARD&quot;,</span>
<a href="#l53.20"></a><span id="l53.20">           &quot;DTSTART:19981025T020000&quot;,</span>
<a href="#l53.21"></a><span id="l53.21">           &quot;TZOFFSETFROM:-0400&quot;,</span>
<a href="#l53.22"></a><span id="l53.22">           &quot;TZOFFSETTO:-0500&quot;,</span>
<a href="#l53.23"></a><span id="l53.23">           &quot;TZNAME:EST&quot;,</span>
<a href="#l53.24"></a><span id="l53.24">           &quot;END:STANDARD&quot;,</span>
<a href="#l53.25"></a><span id="l53.25">           &quot;BEGIN:DAYLIGHT&quot;,</span>
<a href="#l53.26"></a><span id="l53.26">           &quot;DTSTART:19990404T020000&quot;,</span>
<a href="#l53.27"></a><span id="l53.27">           &quot;TZOFFSETFROM:-0500&quot;,</span>
<a href="#l53.28"></a><span id="l53.28">           &quot;TZOFFSETTO:-0400&quot;,</span>
<a href="#l53.29"></a><span id="l53.29">           &quot;TZNAME:EDT&quot;,</span>
<a href="#l53.30"></a><span id="l53.30">           &quot;END:DAYLIGHT&quot;,</span>
<a href="#l53.31"></a><span id="l53.31" class="difflineminus">-          &quot;END:VTIMEZONE&quot;,].join(&quot;\r\n&quot;);</span>
<a href="#l53.32"></a><span id="l53.32" class="difflineplus">+          &quot;END:VTIMEZONE&quot;,</span>
<a href="#l53.33"></a><span id="l53.33" class="difflineplus">+          &quot;&quot;].join(&quot;\r\n&quot;);</span>
<a href="#l53.34"></a><span id="l53.34"> </span>
<a href="#l53.35"></a><span id="l53.35">     let tzs = cal.getTimezoneService();</span>
<a href="#l53.36"></a><span id="l53.36"> </span>
<a href="#l53.37"></a><span id="l53.37">     f.icalString = str;</span>
<a href="#l53.38"></a><span id="l53.38"> </span>
<a href="#l53.39"></a><span id="l53.39">     let g = f.startDate;</span>
<a href="#l53.40"></a><span id="l53.40">     let h = f.endDate;</span>
<a href="#l53.41"></a><span id="l53.41"> </span>
<a href="#l53.42"></a><span id="l53.42">     g.timezone = tzs.getTimezone(g.timezone.tzid);</span>
<a href="#l53.43"></a><span id="l53.43">     h.timezone = tzs.getTimezone(h.timezone.tzid);</span>
<a href="#l53.44"></a><span id="l53.44" class="difflineminus">-    notEqual(strTz,g.timezone.toString());</span>
<a href="#l53.45"></a><span id="l53.45" class="difflineplus">+    notEqual(strTz, g.timezone.toString());</span>
<a href="#l53.46"></a><span id="l53.46"> }</span>
<a href="#l53.47"></a><span id="l53.47" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/calendar/test/unit/test_weekinfo_service.js</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/calendar/test/unit/test_weekinfo_service.js</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -4,24 +4,24 @@</span>
<a href="#l54.4"></a><span id="l54.4"> </span>
<a href="#l54.5"></a><span id="l54.5"> function run_test() {</span>
<a href="#l54.6"></a><span id="l54.6"> </span>
<a href="#l54.7"></a><span id="l54.7">     // Bug 1239622. The 1st of January after a leap year which ends with</span>
<a href="#l54.8"></a><span id="l54.8">     // a Thursday belongs to week number 53 unless the start of week is</span>
<a href="#l54.9"></a><span id="l54.9">     // set on Friday.</span>
<a href="#l54.10"></a><span id="l54.10">     let wkst_wknum_date = [</span>
<a href="#l54.11"></a><span id="l54.11">         [1, 53, &quot;20210101T000000Z&quot;],   // Year 2021 affected by Bug 1239622</span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-        [5, 1 , &quot;20210101T000000Z&quot;],   //</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineplus">+        [5, 1, &quot;20210101T000000Z&quot;],    //</span>
<a href="#l54.14"></a><span id="l54.14">         [3, 53, &quot;20490101T000000Z&quot;],   // Year 2049 affected by Bug 1239622</span>
<a href="#l54.15"></a><span id="l54.15" class="difflineminus">-        [5, 1 , &quot;20490101T000000Z&quot;],   //</span>
<a href="#l54.16"></a><span id="l54.16" class="difflineminus">-        [0, 1 , &quot;20170101T000000Z&quot;],   // Year that starts on Sunday ...</span>
<a href="#l54.17"></a><span id="l54.17" class="difflineplus">+        [5, 1, &quot;20490101T000000Z&quot;],    //</span>
<a href="#l54.18"></a><span id="l54.18" class="difflineplus">+        [0, 1, &quot;20170101T000000Z&quot;],    // Year that starts on Sunday ...</span>
<a href="#l54.19"></a><span id="l54.19">         [3, 52, &quot;20180101T000000Z&quot;],   // ... Monday</span>
<a href="#l54.20"></a><span id="l54.20" class="difflineminus">-        [0, 1 , &quot;20190101T000000Z&quot;],   // ... Tuesday</span>
<a href="#l54.21"></a><span id="l54.21" class="difflineplus">+        [0, 1, &quot;20190101T000000Z&quot;],    // ... Tuesday</span>
<a href="#l54.22"></a><span id="l54.22">         [4, 52, &quot;20200101T000000Z&quot;],   // ... Wednesday</span>
<a href="#l54.23"></a><span id="l54.23" class="difflineminus">-        [0, 1 , &quot;20260101T000000Z&quot;],   // ... Thursday</span>
<a href="#l54.24"></a><span id="l54.24" class="difflineplus">+        [0, 1, &quot;20260101T000000Z&quot;],    // ... Thursday</span>
<a href="#l54.25"></a><span id="l54.25">         [0, 53, &quot;20270101T000000Z&quot;],   // ... Friday</span>
<a href="#l54.26"></a><span id="l54.26">         [0, 52, &quot;20280101T000000Z&quot;]];  // ... Saturday</span>
<a href="#l54.27"></a><span id="l54.27"> </span>
<a href="#l54.28"></a><span id="l54.28">     let savedWeekStart = Preferences.get(&quot;calendar.week.start&quot;, 0);</span>
<a href="#l54.29"></a><span id="l54.29">     for (let [weekStart, weekNumber, dateString] of wkst_wknum_date) {</span>
<a href="#l54.30"></a><span id="l54.30">         Preferences.set(&quot;calendar.week.start&quot;, weekStart);</span>
<a href="#l54.31"></a><span id="l54.31">         let date = cal.createDateTime(dateString);</span>
<a href="#l54.32"></a><span id="l54.32">         date.isDate = true;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

