<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 28413:d96b359f3c446b0a4c27b05d05581fb69d9f5331</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ d96b359f3c446b0a4c27b05d05581fb69d9f5331" />
<meta property="og:url" content="/comm-central/rev/d96b359f3c446b0a4c27b05d05581fb69d9f5331" />
<meta property="og:description" content="Bug 1571681 - Fix and enable remaining mochitests that were copied from mozmill; r=mkmelin" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / d96b359f3c446b0a4c27b05d05581fb69d9f5331 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/d96b359f3c446b0a4c27b05d05581fb69d9f5331">shortlog</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/d96b359f3c446b0a4c27b05d05581fb69d9f5331">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/d96b359f3c446b0a4c27b05d05581fb69d9f5331">files</a> |
changeset |
<a href="/comm-central/raw-rev/d96b359f3c446b0a4c27b05d05581fb69d9f5331">raw</a>  | <a href="/comm-central/archive/d96b359f3c446b0a4c27b05d05581fb69d9f5331.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1571681">Bug 1571681</a> - Fix and enable remaining mochitests that were copied from mozmill; r=mkmelin
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#71;&#101;&#111;&#102;&#102;&#32;&#76;&#97;&#110;&#107;&#111;&#119;&#32;&#60;&#103;&#101;&#111;&#102;&#102;&#64;&#100;&#97;&#114;&#107;&#116;&#114;&#111;&#106;&#97;&#110;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 10 Dec 2019 22:24:43 +1300</td></tr>

<tr>
 <td>changeset 28413</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/d96b359f3c446b0a4c27b05d05581fb69d9f5331">d96b359f3c446b0a4c27b05d05581fb69d9f5331</a></td>
</tr>



<tr>
<td>parent 28412</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/1be1e6dac3864d2aa8f09065017b60233e0bd6cd">1be1e6dac3864d2aa8f09065017b60233e0bd6cd</a>
</td>
</tr>

<tr>
<td>child 28414</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/89fbfe35a1f5d2d1aba9b5768752209f8ddc87aa">89fbfe35a1f5d2d1aba9b5768752209f8ddc87aa</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=d96b359f3c446b0a4c27b05d05581fb69d9f5331">16825</a></td></tr>
<tr><td>push user</td><td>geoff@darktrojan.net</td></tr>
<tr><td>push date</td><td class="date age">Thu, 19 Dec 2019 21:57:09 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@164933b1df70 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=164933b1df705b2545d414840282b2506bf78918">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=164933b1df705b2545d414840282b2506bf78918&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=164933b1df705b2545d414840282b2506bf78918&newProject=comm-central&newRevision=d96b359f3c446b0a4c27b05d05581fb69d9f5331&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=164933b1df705b2545d414840282b2506bf78918&newProject=comm-central&newRevision=d96b359f3c446b0a4c27b05d05581fb69d9f5331&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=164933b1df705b2545d414840282b2506bf78918&newProject=comm-central&newRevision=d96b359f3c446b0a4c27b05d05581fb69d9f5331&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28mkmelin%29&revcount=50">mkmelin</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1571681">1571681</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1571681">Bug 1571681</a> - Fix and enable remaining mochitests that were copied from mozmill; r=mkmelin</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/browser.ini">mail/test/browser/folder-tree-modes/browser.ini</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/browser.ini">file</a> |
<a href="/comm-central/annotate/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/browser.ini">annotate</a> |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/browser.ini">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/browser.ini">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/browser.ini">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/browser_customFolderTreeMode.js">mail/test/browser/folder-tree-modes/browser_customFolderTreeMode.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/browser_customFolderTreeMode.js">file</a> |
<a href="/comm-central/annotate/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/browser_customFolderTreeMode.js">annotate</a> |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/browser_customFolderTreeMode.js">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/browser_customFolderTreeMode.js">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/browser_customFolderTreeMode.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/browser_customSmartFolder.js">mail/test/browser/folder-tree-modes/browser_customSmartFolder.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/browser_customSmartFolder.js">file</a> |
<a href="/comm-central/annotate/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/browser_customSmartFolder.js">annotate</a> |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/browser_customSmartFolder.js">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/browser_customSmartFolder.js">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/browser_customSmartFolder.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/test-extension/bootstrap.js">mail/test/browser/folder-tree-modes/test-extension/bootstrap.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/test-extension/bootstrap.js">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/test-extension/bootstrap.js">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/test-extension/bootstrap.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/test-extension/chrome.manifest">mail/test/browser/folder-tree-modes/test-extension/chrome.manifest</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/test-extension/chrome.manifest">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/test-extension/chrome.manifest">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/test-extension/chrome.manifest">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/test-extension/manifest.json">mail/test/browser/folder-tree-modes/test-extension/manifest.json</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/test-extension/manifest.json">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/test-extension/manifest.json">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/folder-tree-modes/test-extension/manifest.json">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/instrumentation/browser.ini">mail/test/browser/instrumentation/browser.ini</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/instrumentation/browser.ini">file</a> |
<a href="/comm-central/annotate/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/instrumentation/browser.ini">annotate</a> |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/instrumentation/browser.ini">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/instrumentation/browser.ini">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/instrumentation/browser.ini">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/instrumentation/browser_instrumentSetup.js">mail/test/browser/instrumentation/browser_instrumentSetup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/instrumentation/browser_instrumentSetup.js">file</a> |
<a href="/comm-central/annotate/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/instrumentation/browser_instrumentSetup.js">annotate</a> |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/instrumentation/browser_instrumentSetup.js">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/instrumentation/browser_instrumentSetup.js">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/instrumentation/browser_instrumentSetup.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/browser.ini">mail/test/browser/newmailaccount/browser.ini</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/browser.ini">file</a> |
<a href="/comm-central/annotate/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/browser.ini">annotate</a> |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/browser.ini">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/browser.ini">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/browser.ini">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/browser_newmailaccount.js">mail/test/browser/newmailaccount/browser_newmailaccount.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/browser_newmailaccount.js">file</a> |
<a href="/comm-central/annotate/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/browser_newmailaccount.js">annotate</a> |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/browser_newmailaccount.js">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/browser_newmailaccount.js">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/browser_newmailaccount.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerList">mail/test/browser/newmailaccount/html/providerList</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerList">file</a> |
<a href="/comm-central/annotate/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerList">annotate</a> |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerList">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerList">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerList">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerListIncomplete">mail/test/browser/newmailaccount/html/providerListIncomplete</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerListIncomplete">file</a> |
<a href="/comm-central/annotate/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerListIncomplete">annotate</a> |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerListIncomplete">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerListIncomplete">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerListIncomplete">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerListNoOtherLangs">mail/test/browser/newmailaccount/html/providerListNoOtherLangs</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerListNoOtherLangs">file</a> |
<a href="/comm-central/annotate/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerListNoOtherLangs">annotate</a> |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerListNoOtherLangs">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerListNoOtherLangs">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerListNoOtherLangs">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerListWildcard">mail/test/browser/newmailaccount/html/providerListWildcard</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerListWildcard">file</a> |
<a href="/comm-central/annotate/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerListWildcard">annotate</a> |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerListWildcard">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerListWildcard">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/newmailaccount/html/providerListWildcard">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/override-main-menu-collapse/browser.ini">mail/test/browser/override-main-menu-collapse/browser.ini</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/override-main-menu-collapse/browser.ini">file</a> |
<a href="/comm-central/annotate/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/override-main-menu-collapse/browser.ini">annotate</a> |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/override-main-menu-collapse/browser.ini">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/override-main-menu-collapse/browser.ini">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/override-main-menu-collapse/browser.ini">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/override-main-menu-collapse/browser_overrideMainmenuCollapse.js">mail/test/browser/override-main-menu-collapse/browser_overrideMainmenuCollapse.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/override-main-menu-collapse/browser_overrideMainmenuCollapse.js">file</a> |
<a href="/comm-central/annotate/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/override-main-menu-collapse/browser_overrideMainmenuCollapse.js">annotate</a> |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/override-main-menu-collapse/browser_overrideMainmenuCollapse.js">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/override-main-menu-collapse/browser_overrideMainmenuCollapse.js">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/override-main-menu-collapse/browser_overrideMainmenuCollapse.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/session-store/browser.ini">mail/test/browser/session-store/browser.ini</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/session-store/browser.ini">file</a> |
<a href="/comm-central/annotate/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/session-store/browser.ini">annotate</a> |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/session-store/browser.ini">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/session-store/browser.ini">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/session-store/browser.ini">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/session-store/browser_sessionStore.js">mail/test/browser/session-store/browser_sessionStore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/session-store/browser_sessionStore.js">file</a> |
<a href="/comm-central/annotate/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/session-store/browser_sessionStore.js">annotate</a> |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/session-store/browser_sessionStore.js">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/session-store/browser_sessionStore.js">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/session-store/browser_sessionStore.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/startup-firstrun/browser.ini">mail/test/browser/startup-firstrun/browser.ini</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/startup-firstrun/browser.ini">file</a> |
<a href="/comm-central/annotate/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/startup-firstrun/browser.ini">annotate</a> |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/startup-firstrun/browser.ini">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/startup-firstrun/browser.ini">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/startup-firstrun/browser.ini">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/startup-firstrun/browser_menubarCollapsed.js">mail/test/browser/startup-firstrun/browser_menubarCollapsed.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/startup-firstrun/browser_menubarCollapsed.js">file</a> |
<a href="/comm-central/annotate/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/startup-firstrun/browser_menubarCollapsed.js">annotate</a> |
<a href="/comm-central/diff/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/startup-firstrun/browser_menubarCollapsed.js">diff</a> |
<a href="/comm-central/comparison/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/startup-firstrun/browser_menubarCollapsed.js">comparison</a> |
<a href="/comm-central/log/d96b359f3c446b0a4c27b05d05581fb69d9f5331/mail/test/browser/startup-firstrun/browser_menubarCollapsed.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/test/browser/folder-tree-modes/browser.ini</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/test/browser/folder-tree-modes/browser.ini</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -41,14 +41,12 @@ prefs =</span>
<a href="#l1.4"></a><span id="l1.4">   mail.startup.enabledMailCheckOnce=true</span>
<a href="#l1.5"></a><span id="l1.5">   mail.winsearch.firstRunDone=true</span>
<a href="#l1.6"></a><span id="l1.6">   mailnews.start_page.override_url=about:blank</span>
<a href="#l1.7"></a><span id="l1.7">   mailnews.start_page.url=about:blank</span>
<a href="#l1.8"></a><span id="l1.8"> subsuite = thunderbird</span>
<a href="#l1.9"></a><span id="l1.9"> support-files = test-extension/**</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11"> [browser_customFolderTreeMode.js]</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-skip-if = true</span>
<a href="#l1.13"></a><span id="l1.13"> [browser_customSmartFolder.js]</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineminus">-skip-if = true</span>
<a href="#l1.15"></a><span id="l1.15"> [browser_modeSwitching.js]</span>
<a href="#l1.16"></a><span id="l1.16"> [browser_smartFolders.js]</span>
<a href="#l1.17"></a><span id="l1.17"> [browser_unreadFolders.js]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/test/browser/folder-tree-modes/browser_customFolderTreeMode.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/test/browser/folder-tree-modes/browser_customFolderTreeMode.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -20,29 +20,63 @@ var {</span>
<a href="#l2.4"></a><span id="l2.4">   &quot;resource://testing-common/mozmill/FolderDisplayHelpers.jsm&quot;</span>
<a href="#l2.5"></a><span id="l2.5"> );</span>
<a href="#l2.6"></a><span id="l2.6"> var {</span>
<a href="#l2.7"></a><span id="l2.7">   close_window,</span>
<a href="#l2.8"></a><span id="l2.8">   plan_for_new_window,</span>
<a href="#l2.9"></a><span id="l2.9">   wait_for_new_window,</span>
<a href="#l2.10"></a><span id="l2.10"> } = ChromeUtils.import(&quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;);</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+var { ExtensionSupport } = ChromeUtils.import(</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+  &quot;resource:///modules/ExtensionSupport.jsm&quot;</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+);</span>
<a href="#l2.15"></a><span id="l2.15"> var { MailServices } = ChromeUtils.import(</span>
<a href="#l2.16"></a><span id="l2.16">   &quot;resource:///modules/MailServices.jsm&quot;</span>
<a href="#l2.17"></a><span id="l2.17"> );</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19"> var gInbox;</span>
<a href="#l2.20"></a><span id="l2.20"> </span>
<a href="#l2.21"></a><span id="l2.21"> add_task(function setupModule(module) {</span>
<a href="#l2.22"></a><span id="l2.22">   let server = MailServices.accounts.FindServer(</span>
<a href="#l2.23"></a><span id="l2.23">     &quot;tinderbox&quot;,</span>
<a href="#l2.24"></a><span id="l2.24">     FAKE_SERVER_HOSTNAME,</span>
<a href="#l2.25"></a><span id="l2.25">     &quot;pop3&quot;</span>
<a href="#l2.26"></a><span id="l2.26">   );</span>
<a href="#l2.27"></a><span id="l2.27">   gInbox = get_special_folder(Ci.nsMsgFolderFlags.Inbox, false, server);</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineplus">+</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineplus">+  ExtensionSupport.registerWindowListener(&quot;mochitest&quot;, {</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineplus">+    chromeURLs: [&quot;chrome://messenger/content/messenger.xul&quot;],</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineplus">+    onLoadWindow(aWindow) {</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+      let testFolderTreeMode = {</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineplus">+        __proto__: aWindow.IFolderTreeMode,</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineplus">+        generateMap(aFTV) {</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineplus">+          var { MailServices } = ChromeUtils.import(</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineplus">+            &quot;resource:///modules/MailServices.jsm&quot;</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineplus">+          );</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineplus">+          // Pick the tinderbox@foo.invalid inbox and use it as the only folder</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineplus">+          let server = MailServices.accounts.FindServer(</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineplus">+            &quot;tinderbox&quot;,</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineplus">+            &quot;tinderbox123&quot;,</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineplus">+            &quot;pop3&quot;</span>
<a href="#l2.43"></a><span id="l2.43" class="difflineplus">+          );</span>
<a href="#l2.44"></a><span id="l2.44" class="difflineplus">+          let item = new aWindow.ftvItem(</span>
<a href="#l2.45"></a><span id="l2.45" class="difflineplus">+            server.rootFolder.getChildNamed(&quot;Inbox&quot;)</span>
<a href="#l2.46"></a><span id="l2.46" class="difflineplus">+          );</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineplus">+          item.__defineGetter__(&quot;children&quot;, () =&gt; []);</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineplus">+          return [item];</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineplus">+        },</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineplus">+      };</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineplus">+</span>
<a href="#l2.52"></a><span id="l2.52" class="difflineplus">+      aWindow.gFolderTreeView.registerFolderTreeMode(</span>
<a href="#l2.53"></a><span id="l2.53" class="difflineplus">+        &quot;testmode&quot;,</span>
<a href="#l2.54"></a><span id="l2.54" class="difflineplus">+        testFolderTreeMode,</span>
<a href="#l2.55"></a><span id="l2.55" class="difflineplus">+        &quot;Test Mode&quot;</span>
<a href="#l2.56"></a><span id="l2.56" class="difflineplus">+      );</span>
<a href="#l2.57"></a><span id="l2.57" class="difflineplus">+    },</span>
<a href="#l2.58"></a><span id="l2.58" class="difflineplus">+  });</span>
<a href="#l2.59"></a><span id="l2.59"> });</span>
<a href="#l2.60"></a><span id="l2.60"> </span>
<a href="#l2.61"></a><span id="l2.61"> // Provided by the extension in test-extension</span>
<a href="#l2.62"></a><span id="l2.62"> var kTestModeID = &quot;testmode&quot;;</span>
<a href="#l2.63"></a><span id="l2.63"> </span>
<a href="#l2.64"></a><span id="l2.64"> /**</span>
<a href="#l2.65"></a><span id="l2.65">  * Switch to the mode and verify that it displays correctly.</span>
<a href="#l2.66"></a><span id="l2.66">  */</span>
<a href="#l2.67"></a><span id="l2.67" class="difflineat">@@ -72,8 +106,18 @@ add_task(function test_open_new_window_w</span>
<a href="#l2.68"></a><span id="l2.68"> });</span>
<a href="#l2.69"></a><span id="l2.69"> </span>
<a href="#l2.70"></a><span id="l2.70"> /**</span>
<a href="#l2.71"></a><span id="l2.71">  * Switch back to all folders.</span>
<a href="#l2.72"></a><span id="l2.72">  */</span>
<a href="#l2.73"></a><span id="l2.73"> add_task(function test_switch_to_all_folders() {</span>
<a href="#l2.74"></a><span id="l2.74">   mc.folderTreeView.mode = &quot;all&quot;;</span>
<a href="#l2.75"></a><span id="l2.75"> });</span>
<a href="#l2.76"></a><span id="l2.76" class="difflineplus">+</span>
<a href="#l2.77"></a><span id="l2.77" class="difflineplus">+registerCleanupFunction(() =&gt; {</span>
<a href="#l2.78"></a><span id="l2.78" class="difflineplus">+  ExtensionSupport.unregisterWindowListener(&quot;mochitest&quot;);</span>
<a href="#l2.79"></a><span id="l2.79" class="difflineplus">+  Assert.report(</span>
<a href="#l2.80"></a><span id="l2.80" class="difflineplus">+    false,</span>
<a href="#l2.81"></a><span id="l2.81" class="difflineplus">+    undefined,</span>
<a href="#l2.82"></a><span id="l2.82" class="difflineplus">+    undefined,</span>
<a href="#l2.83"></a><span id="l2.83" class="difflineplus">+    &quot;Test ran to completion successfully&quot;</span>
<a href="#l2.84"></a><span id="l2.84" class="difflineplus">+  );</span>
<a href="#l2.85"></a><span id="l2.85" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/test/browser/folder-tree-modes/browser_customSmartFolder.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/test/browser/folder-tree-modes/browser_customSmartFolder.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -75,16 +75,17 @@ add_task(function setupModule(module) {</span>
<a href="#l3.4"></a><span id="l3.4"> /**</span>
<a href="#l3.5"></a><span id="l3.5">  * Switch to the smart folder mode, get the smart inbox.</span>
<a href="#l3.6"></a><span id="l3.6">  */</span>
<a href="#l3.7"></a><span id="l3.7"> add_task(function test_switch_to_smart_folder_mode() {</span>
<a href="#l3.8"></a><span id="l3.8">   mc.folderTreeView.mode = &quot;smart&quot;;</span>
<a href="#l3.9"></a><span id="l3.9">   assert_folder_mode(&quot;smart&quot;);</span>
<a href="#l3.10"></a><span id="l3.10"> </span>
<a href="#l3.11"></a><span id="l3.11">   smartFolderA = get_smart_folder_named(smartParentNameA);</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+  SimpleTest.expectUncaughtException();</span>
<a href="#l3.13"></a><span id="l3.13">   mc.folderTreeView.selectFolder(smartFolderA);</span>
<a href="#l3.14"></a><span id="l3.14"> });</span>
<a href="#l3.15"></a><span id="l3.15"> </span>
<a href="#l3.16"></a><span id="l3.16"> add_task(function test_cache_property() {</span>
<a href="#l3.17"></a><span id="l3.17">   if (mc.window.getSmartFolderName(subfolderA) != smartParentNameA) {</span>
<a href="#l3.18"></a><span id="l3.18">     throw new Error(&quot;smartFolderName A cache property not set&quot;);</span>
<a href="#l3.19"></a><span id="l3.19">   }</span>
<a href="#l3.20"></a><span id="l3.20">   if (mc.window.getSmartFolderName(subfolderB) != smartParentNameB) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1">deleted file mode 100644</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineminus">--- a/mail/test/browser/folder-tree-modes/test-extension/bootstrap.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineplus">+++ /dev/null</span>
<a href="#l4.4"></a><span id="l4.4" class="difflineat">@@ -1,53 +0,0 @@</span>
<a href="#l4.5"></a><span id="l4.5" class="difflineminus">-/* -*- Mode: JavaScript; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l4.6"></a><span id="l4.6" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l4.7"></a><span id="l4.7" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l4.8"></a><span id="l4.8" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l4.9"></a><span id="l4.9" class="difflineminus">-</span>
<a href="#l4.10"></a><span id="l4.10" class="difflineminus">-&quot;use strict&quot;;</span>
<a href="#l4.11"></a><span id="l4.11" class="difflineminus">-</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-var { ExtensionSupport } = ChromeUtils.import(</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-  &quot;resource:///modules/ExtensionSupport.jsm&quot;</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-);</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineminus">-</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineminus">-// const addonID = &quot;testfoldertreemode@mozilla.org&quot;;</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineminus">-</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineminus">-function install() {}</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineminus">-</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineminus">-function uninstall() {}</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineminus">-</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineminus">-function startup(data, reason) {</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineminus">-  ExtensionSupport.registerWindowListener(data.id, {</span>
<a href="#l4.24"></a><span id="l4.24" class="difflineminus">-    chromeURLs: [&quot;chrome://messenger/content/messenger.xul&quot;],</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineminus">-    onLoadWindow: setupFolderMode,</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineminus">-  });</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineminus">-}</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineminus">-</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineminus">-function shutdown(data, reason) {</span>
<a href="#l4.30"></a><span id="l4.30" class="difflineminus">-  ExtensionSupport.unregisterWindowListener(data.id);</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">-}</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineminus">-</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineminus">-function setupFolderMode(aWindow) {</span>
<a href="#l4.34"></a><span id="l4.34" class="difflineminus">-  let testFolderTreeMode = {</span>
<a href="#l4.35"></a><span id="l4.35" class="difflineminus">-    __proto__: aWindow.IFolderTreeMode,</span>
<a href="#l4.36"></a><span id="l4.36" class="difflineminus">-    generateMap(aFTV) {</span>
<a href="#l4.37"></a><span id="l4.37" class="difflineminus">-      var { MailServices } = ChromeUtils.import(</span>
<a href="#l4.38"></a><span id="l4.38" class="difflineminus">-        &quot;resource:///modules/MailServices.jsm&quot;</span>
<a href="#l4.39"></a><span id="l4.39" class="difflineminus">-      );</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineminus">-      // Pick the tinderbox@foo.invalid inbox and use it as the only folder</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineminus">-      let server = MailServices.accounts.FindServer(</span>
<a href="#l4.42"></a><span id="l4.42" class="difflineminus">-        &quot;tinderbox&quot;,</span>
<a href="#l4.43"></a><span id="l4.43" class="difflineminus">-        &quot;tinderbox123&quot;,</span>
<a href="#l4.44"></a><span id="l4.44" class="difflineminus">-        &quot;pop3&quot;</span>
<a href="#l4.45"></a><span id="l4.45" class="difflineminus">-      );</span>
<a href="#l4.46"></a><span id="l4.46" class="difflineminus">-      let item = new aWindow.ftvItem(server.rootFolder.getChildNamed(&quot;Inbox&quot;));</span>
<a href="#l4.47"></a><span id="l4.47" class="difflineminus">-      item.__defineGetter__(&quot;children&quot;, () =&gt; []);</span>
<a href="#l4.48"></a><span id="l4.48" class="difflineminus">-      return [item];</span>
<a href="#l4.49"></a><span id="l4.49" class="difflineminus">-    },</span>
<a href="#l4.50"></a><span id="l4.50" class="difflineminus">-  };</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineminus">-</span>
<a href="#l4.52"></a><span id="l4.52" class="difflineminus">-  aWindow.gFolderTreeView.registerFolderTreeMode(</span>
<a href="#l4.53"></a><span id="l4.53" class="difflineminus">-    &quot;testmode&quot;,</span>
<a href="#l4.54"></a><span id="l4.54" class="difflineminus">-    testFolderTreeMode,</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineminus">-    &quot;Test Mode&quot;</span>
<a href="#l4.56"></a><span id="l4.56" class="difflineminus">-  );</span>
<a href="#l4.57"></a><span id="l4.57" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1">deleted file mode 100644</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1">deleted file mode 100644</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineminus">--- a/mail/test/browser/folder-tree-modes/test-extension/manifest.json</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineplus">+++ /dev/null</span>
<a href="#l6.4"></a><span id="l6.4" class="difflineat">@@ -1,14 +0,0 @@</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineminus">-{</span>
<a href="#l6.6"></a><span id="l6.6" class="difflineminus">-  &quot;manifest_version&quot;: 2,</span>
<a href="#l6.7"></a><span id="l6.7" class="difflineminus">-  &quot;applications&quot;: {</span>
<a href="#l6.8"></a><span id="l6.8" class="difflineminus">-    &quot;gecko&quot;: {</span>
<a href="#l6.9"></a><span id="l6.9" class="difflineminus">-      &quot;id&quot;: &quot;testfoldertreemode@mozilla.org&quot;</span>
<a href="#l6.10"></a><span id="l6.10" class="difflineminus">-    }</span>
<a href="#l6.11"></a><span id="l6.11" class="difflineminus">-  },</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-  &quot;name&quot;: &quot;Test Folder Modes&quot;,</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-  &quot;version&quot;: &quot;1.0&quot;,</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineminus">-  &quot;description&quot;: &quot;Provides a custom folder tree mode to be used by tests&quot;,</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineminus">-  &quot;legacy&quot;: {</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineminus">-    &quot;type&quot;: &quot;bootstrap&quot;</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineminus">-  }</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/test/browser/instrumentation/browser.ini</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/test/browser/instrumentation/browser.ini</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -1,17 +1,17 @@</span>
<a href="#l7.4"></a><span id="l7.4"> [DEFAULT]</span>
<a href="#l7.5"></a><span id="l7.5"> prefs =</span>
<a href="#l7.6"></a><span id="l7.6">   ldap_2.servers.osx.description=</span>
<a href="#l7.7"></a><span id="l7.7">   ldap_2.servers.osx.dirType=-1</span>
<a href="#l7.8"></a><span id="l7.8">   ldap_2.servers.osx.uri=</span>
<a href="#l7.9"></a><span id="l7.9">   mail.provider.enabled=false</span>
<a href="#l7.10"></a><span id="l7.10" class="difflineplus">+  mail.provider.suppress_dialog_on_startup=true</span>
<a href="#l7.11"></a><span id="l7.11">   mail.spotlight.firstRunDone=true</span>
<a href="#l7.12"></a><span id="l7.12">   mail.winsearch.firstRunDone=true</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+  mail.wizard.logging.dump=All</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+  mailnews.auto_config.addons_url=about:blank</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+  mailnews.auto_config_url=about:blank</span>
<a href="#l7.16"></a><span id="l7.16">   mailnews.start_page.override_url=about:blank</span>
<a href="#l7.17"></a><span id="l7.17">   mailnews.start_page.url=about:blank</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineminus">-  mail.wizard.logging.dump=All</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineminus">-  mailnews.auto_config_url=http://mochi.test:8888/browser/comm/mail/test/browser/account/xml</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineminus">-  mailnews.auto_config.addons_url=about:blank</span>
<a href="#l7.21"></a><span id="l7.21"> subsuite = thunderbird</span>
<a href="#l7.22"></a><span id="l7.22"> </span>
<a href="#l7.23"></a><span id="l7.23"> [browser_instrumentSetup.js]</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineminus">-skip-if = true</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/test/browser/instrumentation/browser_instrumentSetup.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/test/browser/instrumentation/browser_instrumentSetup.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -3,16 +3,19 @@</span>
<a href="#l8.4"></a><span id="l8.4">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l8.5"></a><span id="l8.5"> </span>
<a href="#l8.6"></a><span id="l8.6"> &quot;use strict&quot;;</span>
<a href="#l8.7"></a><span id="l8.7"> </span>
<a href="#l8.8"></a><span id="l8.8"> var elib = ChromeUtils.import(</span>
<a href="#l8.9"></a><span id="l8.9">   &quot;resource://testing-common/mozmill/elementslib.jsm&quot;</span>
<a href="#l8.10"></a><span id="l8.10"> );</span>
<a href="#l8.11"></a><span id="l8.11"> </span>
<a href="#l8.12"></a><span id="l8.12" class="difflineplus">+var { open_mail_account_setup_wizard } = ChromeUtils.import(</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+  &quot;resource://testing-common/mozmill/AccountManagerHelpers.jsm&quot;</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineplus">+);</span>
<a href="#l8.15"></a><span id="l8.15"> var { mc } = ChromeUtils.import(</span>
<a href="#l8.16"></a><span id="l8.16">   &quot;resource://testing-common/mozmill/FolderDisplayHelpers.jsm&quot;</span>
<a href="#l8.17"></a><span id="l8.17"> );</span>
<a href="#l8.18"></a><span id="l8.18"> var { input_value } = ChromeUtils.import(</span>
<a href="#l8.19"></a><span id="l8.19">   &quot;resource://testing-common/mozmill/KeyboardHelpers.jsm&quot;</span>
<a href="#l8.20"></a><span id="l8.20"> );</span>
<a href="#l8.21"></a><span id="l8.21"> var {</span>
<a href="#l8.22"></a><span id="l8.22">   plan_for_window_close,</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineat">@@ -26,48 +29,60 @@ var { MailServices } = ChromeUtils.impor</span>
<a href="#l8.24"></a><span id="l8.24"> );</span>
<a href="#l8.25"></a><span id="l8.25"> </span>
<a href="#l8.26"></a><span id="l8.26"> var user = {</span>
<a href="#l8.27"></a><span id="l8.27">   name: &quot;Roger Sterling&quot;,</span>
<a href="#l8.28"></a><span id="l8.28">   email: &quot;roger.sterling@example.com&quot;,</span>
<a href="#l8.29"></a><span id="l8.29">   incomingHost: &quot;testin.example.com&quot;,</span>
<a href="#l8.30"></a><span id="l8.30">   outgoingHost: &quot;testout.example.com&quot;,</span>
<a href="#l8.31"></a><span id="l8.31"> };</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineplus">+const PREF_NAME = &quot;mailnews.auto_config_url&quot;;</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineplus">+const PREF_VALUE = Services.prefs.getCharPref(PREF_NAME);</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineplus">+</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineplus">+add_task(function setupModule(module) {</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineplus">+  let url =</span>
<a href="#l8.37"></a><span id="l8.37" class="difflineplus">+    &quot;http://mochi.test:8888/browser/comm/mail/test/browser/account/xml/&quot;;</span>
<a href="#l8.38"></a><span id="l8.38" class="difflineplus">+  Services.prefs.setCharPref(PREF_NAME, url);</span>
<a href="#l8.39"></a><span id="l8.39" class="difflineplus">+});</span>
<a href="#l8.40"></a><span id="l8.40" class="difflineplus">+</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l8.42"></a><span id="l8.42" class="difflineplus">+  Services.prefs.setCharPref(PREF_NAME, PREF_VALUE);</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineplus">+});</span>
<a href="#l8.44"></a><span id="l8.44"> </span>
<a href="#l8.45"></a><span id="l8.45"> add_task(function test_mail_account_setup() {</span>
<a href="#l8.46"></a><span id="l8.46" class="difflineminus">-  let awc = wait_for_existing_window(&quot;mail:autoconfig&quot;);</span>
<a href="#l8.47"></a><span id="l8.47" class="difflineplus">+  open_mail_account_setup_wizard(function(awc) {</span>
<a href="#l8.48"></a><span id="l8.48" class="difflineplus">+    // Input user's account information</span>
<a href="#l8.49"></a><span id="l8.49" class="difflineplus">+    awc.e(&quot;realname&quot;).focus();</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineplus">+    input_value(awc, user.name);</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineplus">+    awc.keypress(null, &quot;VK_TAB&quot;, {});</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineplus">+    input_value(awc, user.email);</span>
<a href="#l8.53"></a><span id="l8.53"> </span>
<a href="#l8.54"></a><span id="l8.54" class="difflineminus">-  // Input user's account information</span>
<a href="#l8.55"></a><span id="l8.55" class="difflineminus">-  awc.e(&quot;realname&quot;).focus();</span>
<a href="#l8.56"></a><span id="l8.56" class="difflineminus">-  input_value(awc, user.name);</span>
<a href="#l8.57"></a><span id="l8.57" class="difflineminus">-  awc.keypress(null, &quot;VK_TAB&quot;, {});</span>
<a href="#l8.58"></a><span id="l8.58" class="difflineminus">-  input_value(awc, user.email);</span>
<a href="#l8.59"></a><span id="l8.59" class="difflineminus">-</span>
<a href="#l8.60"></a><span id="l8.60" class="difflineminus">-  // Load the autoconfig file from http://localhost:433**/autoconfig/example.com</span>
<a href="#l8.61"></a><span id="l8.61" class="difflineminus">-  awc.e(&quot;next_button&quot;).click();</span>
<a href="#l8.62"></a><span id="l8.62" class="difflineplus">+    // Load the autoconfig file from http://localhost:433**/autoconfig/example.com</span>
<a href="#l8.63"></a><span id="l8.63" class="difflineplus">+    awc.e(&quot;next_button&quot;).click();</span>
<a href="#l8.64"></a><span id="l8.64"> </span>
<a href="#l8.65"></a><span id="l8.65" class="difflineminus">-  // XXX: This should probably use a notification, once we fix bug 561143.</span>
<a href="#l8.66"></a><span id="l8.66" class="difflineminus">-  awc.waitFor(</span>
<a href="#l8.67"></a><span id="l8.67" class="difflineminus">-    () =&gt; awc.window.gEmailConfigWizard._currentConfig != null,</span>
<a href="#l8.68"></a><span id="l8.68" class="difflineminus">-    &quot;Timeout waiting for current config to become non-null&quot;,</span>
<a href="#l8.69"></a><span id="l8.69" class="difflineminus">-    8000,</span>
<a href="#l8.70"></a><span id="l8.70" class="difflineminus">-    600</span>
<a href="#l8.71"></a><span id="l8.71" class="difflineminus">-  );</span>
<a href="#l8.72"></a><span id="l8.72" class="difflineminus">-  plan_for_window_close(awc);</span>
<a href="#l8.73"></a><span id="l8.73" class="difflineminus">-  awc.e(&quot;create_button&quot;).click();</span>
<a href="#l8.74"></a><span id="l8.74" class="difflineplus">+    // XXX: This should probably use a notification, once we fix bug 561143.</span>
<a href="#l8.75"></a><span id="l8.75" class="difflineplus">+    awc.waitFor(</span>
<a href="#l8.76"></a><span id="l8.76" class="difflineplus">+      () =&gt; awc.window.gEmailConfigWizard._currentConfig != null,</span>
<a href="#l8.77"></a><span id="l8.77" class="difflineplus">+      &quot;Timeout waiting for current config to become non-null&quot;,</span>
<a href="#l8.78"></a><span id="l8.78" class="difflineplus">+      8000,</span>
<a href="#l8.79"></a><span id="l8.79" class="difflineplus">+      600</span>
<a href="#l8.80"></a><span id="l8.80" class="difflineplus">+    );</span>
<a href="#l8.81"></a><span id="l8.81" class="difflineplus">+    plan_for_window_close(awc);</span>
<a href="#l8.82"></a><span id="l8.82" class="difflineplus">+    awc.e(&quot;create_button&quot;).click();</span>
<a href="#l8.83"></a><span id="l8.83"> </span>
<a href="#l8.84"></a><span id="l8.84" class="difflineminus">-  let events = mc.window.MailInstrumentation._currentState.events;</span>
<a href="#l8.85"></a><span id="l8.85" class="difflineminus">-  wait_for_window_close();</span>
<a href="#l8.86"></a><span id="l8.86" class="difflineplus">+    let events = mc.window.MailInstrumentation._currentState.events;</span>
<a href="#l8.87"></a><span id="l8.87" class="difflineplus">+    wait_for_window_close();</span>
<a href="#l8.88"></a><span id="l8.88"> </span>
<a href="#l8.89"></a><span id="l8.89" class="difflineminus">-  // we expect to have accountAdded and smtpServerAdded events.</span>
<a href="#l8.90"></a><span id="l8.90" class="difflineminus">-  if (!events.accountAdded.data) {</span>
<a href="#l8.91"></a><span id="l8.91" class="difflineminus">-    throw new Error(&quot;failed to add an account&quot;);</span>
<a href="#l8.92"></a><span id="l8.92" class="difflineminus">-  } else if (!events.smtpServerAdded.data) {</span>
<a href="#l8.93"></a><span id="l8.93" class="difflineminus">-    throw new Error(&quot;failed to add an smtp server&quot;);</span>
<a href="#l8.94"></a><span id="l8.94" class="difflineminus">-  }</span>
<a href="#l8.95"></a><span id="l8.95" class="difflineplus">+    // we expect to have accountAdded and smtpServerAdded events.</span>
<a href="#l8.96"></a><span id="l8.96" class="difflineplus">+    if (!events.accountAdded.data) {</span>
<a href="#l8.97"></a><span id="l8.97" class="difflineplus">+      throw new Error(&quot;failed to add an account&quot;);</span>
<a href="#l8.98"></a><span id="l8.98" class="difflineplus">+    } else if (!events.smtpServerAdded.data) {</span>
<a href="#l8.99"></a><span id="l8.99" class="difflineplus">+      throw new Error(&quot;failed to add an smtp server&quot;);</span>
<a href="#l8.100"></a><span id="l8.100" class="difflineplus">+    }</span>
<a href="#l8.101"></a><span id="l8.101" class="difflineplus">+  });</span>
<a href="#l8.102"></a><span id="l8.102"> });</span>
<a href="#l8.103"></a><span id="l8.103"> </span>
<a href="#l8.104"></a><span id="l8.104"> // Remove the accounts we added.</span>
<a href="#l8.105"></a><span id="l8.105"> registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l8.106"></a><span id="l8.106">   let incomingServer = MailServices.accounts.FindServer(</span>
<a href="#l8.107"></a><span id="l8.107">     &quot;roger.sterling&quot;,</span>
<a href="#l8.108"></a><span id="l8.108">     user.incomingHost,</span>
<a href="#l8.109"></a><span id="l8.109">     &quot;pop3&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/test/browser/newmailaccount/browser.ini</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/test/browser/newmailaccount/browser.ini</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -1,15 +1,17 @@</span>
<a href="#l9.4"></a><span id="l9.4"> [DEFAULT]</span>
<a href="#l9.5"></a><span id="l9.5"> prefs =</span>
<a href="#l9.6"></a><span id="l9.6" class="difflineplus">+  browser.tabs.remote.autostart=false</span>
<a href="#l9.7"></a><span id="l9.7">   ldap_2.servers.osx.description=</span>
<a href="#l9.8"></a><span id="l9.8">   ldap_2.servers.osx.dirType=-1</span>
<a href="#l9.9"></a><span id="l9.9">   ldap_2.servers.osx.uri=</span>
<a href="#l9.10"></a><span id="l9.10">   mail.provider.suppress_dialog_on_startup=true</span>
<a href="#l9.11"></a><span id="l9.11">   mail.spotlight.firstRunDone=true</span>
<a href="#l9.12"></a><span id="l9.12">   mail.winsearch.firstRunDone=true</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+  mailnews.auto_config.addons_url=about:blank</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineplus">+  mailnews.auto_config_url=about:blank</span>
<a href="#l9.15"></a><span id="l9.15">   mailnews.start_page.override_url=about:blank</span>
<a href="#l9.16"></a><span id="l9.16">   mailnews.start_page.url=about:blank</span>
<a href="#l9.17"></a><span id="l9.17"> subsuite = thunderbird</span>
<a href="#l9.18"></a><span id="l9.18"> support-files = html/**</span>
<a href="#l9.19"></a><span id="l9.19"> </span>
<a href="#l9.20"></a><span id="l9.20"> [browser_newmailaccount.js]</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineminus">-skip-if = true</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/test/browser/newmailaccount/browser_newmailaccount.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/test/browser/newmailaccount/browser_newmailaccount.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -68,33 +68,35 @@ var { MailServices } = ChromeUtils.impor</span>
<a href="#l10.4"></a><span id="l10.4"> // so we get the right path for the resources.</span>
<a href="#l10.5"></a><span id="l10.5"> var url =</span>
<a href="#l10.6"></a><span id="l10.6">   &quot;http://mochi.test:8888/browser/comm/mail/test/browser/newmailaccount/html/&quot;;</span>
<a href="#l10.7"></a><span id="l10.7"> var kProvisionerUrl =</span>
<a href="#l10.8"></a><span id="l10.8">   &quot;chrome://messenger/content/newmailaccount/accountProvisioner.xhtml&quot;;</span>
<a href="#l10.9"></a><span id="l10.9"> var kProvisionerEnabledPref = &quot;mail.provider.enabled&quot;;</span>
<a href="#l10.10"></a><span id="l10.10"> var kSuggestFromNamePref = &quot;mail.provider.suggestFromName&quot;;</span>
<a href="#l10.11"></a><span id="l10.11"> var kProviderListPref = &quot;mail.provider.providerList&quot;;</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-var kDefaultServerPort = 8888;</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-var kDefaultServerRoot = &quot;http://mochi.test:&quot; + kDefaultServerPort;</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineplus">+var kDefaultServerPort = 4444;</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineplus">+var kDefaultServerRoot = &quot;http://localhost:&quot; + kDefaultServerPort;</span>
<a href="#l10.16"></a><span id="l10.16"> </span>
<a href="#l10.17"></a><span id="l10.17"> Services.prefs.setCharPref(kProviderListPref, url + &quot;providerList&quot;);</span>
<a href="#l10.18"></a><span id="l10.18"> Services.prefs.setCharPref(kSuggestFromNamePref, url + &quot;suggestFromName&quot;);</span>
<a href="#l10.19"></a><span id="l10.19"> </span>
<a href="#l10.20"></a><span id="l10.20"> // Here's a name that we'll type in later on.  It's a global const because</span>
<a href="#l10.21"></a><span id="l10.21"> // we'll be using it in several distinct modal dialog event loops.</span>
<a href="#l10.22"></a><span id="l10.22"> var NAME = &quot;Leonard Shelby&quot;;</span>
<a href="#l10.23"></a><span id="l10.23"> </span>
<a href="#l10.24"></a><span id="l10.24"> // Record what the original value of the mail.provider.enabled pref is so</span>
<a href="#l10.25"></a><span id="l10.25"> // that we can put it back once the tests are done.</span>
<a href="#l10.26"></a><span id="l10.26"> var gProvisionerEnabled = Services.prefs.getBoolPref(kProvisionerEnabledPref);</span>
<a href="#l10.27"></a><span id="l10.27"> var gOldAcceptLangs = Services.locale.requestedLocales;</span>
<a href="#l10.28"></a><span id="l10.28"> var gNumAccounts;</span>
<a href="#l10.29"></a><span id="l10.29"> </span>
<a href="#l10.30"></a><span id="l10.30"> add_task(function setupModule(module) {</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineplus">+  requestLongerTimeout(2);</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+</span>
<a href="#l10.33"></a><span id="l10.33">   // Make sure we enable the Account Provisioner.</span>
<a href="#l10.34"></a><span id="l10.34">   Services.prefs.setBoolPref(kProvisionerEnabledPref, true);</span>
<a href="#l10.35"></a><span id="l10.35">   // Restrict the user's language to just en-US</span>
<a href="#l10.36"></a><span id="l10.36">   Services.locale.requestedLocales = [&quot;en-US&quot;];</span>
<a href="#l10.37"></a><span id="l10.37"> </span>
<a href="#l10.38"></a><span id="l10.38">   // Add a &quot;bar&quot; search engine that we can switch to be the default.</span>
<a href="#l10.39"></a><span id="l10.39">   let engineAdded = false;</span>
<a href="#l10.40"></a><span id="l10.40">   Services.search</span>
<a href="#l10.41"></a><span id="l10.41" class="difflineat">@@ -143,28 +145,28 @@ function test_get_an_account(aCloseAndRe</span>
<a href="#l10.42"></a><span id="l10.42">   open_provisioner_window();</span>
<a href="#l10.43"></a><span id="l10.43">   wait_for_modal_dialog(&quot;AccountCreation&quot;);</span>
<a href="#l10.44"></a><span id="l10.44"> </span>
<a href="#l10.45"></a><span id="l10.45">   // Once we're here, subtest_get_an_account has completed, and we're waiting</span>
<a href="#l10.46"></a><span id="l10.46">   // for a content tab to load for the account order form.</span>
<a href="#l10.47"></a><span id="l10.47"> </span>
<a href="#l10.48"></a><span id="l10.48">   // Make sure the page is loaded.</span>
<a href="#l10.49"></a><span id="l10.49">   wait_for_content_tab_load(undefined, function(aURL) {</span>
<a href="#l10.50"></a><span id="l10.50" class="difflineminus">-    return aURL.host == &quot;localhost&quot;;</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineplus">+    return aURL.host == &quot;mochi.test&quot;;</span>
<a href="#l10.52"></a><span id="l10.52">   });</span>
<a href="#l10.53"></a><span id="l10.53"> </span>
<a href="#l10.54"></a><span id="l10.54">   let tab = mc.tabmail.currentTabInfo;</span>
<a href="#l10.55"></a><span id="l10.55"> </span>
<a href="#l10.56"></a><span id="l10.56">   if (aCloseAndRestore) {</span>
<a href="#l10.57"></a><span id="l10.57">     // Close the account provisioner tab, and then restore it...</span>
<a href="#l10.58"></a><span id="l10.58">     mc.tabmail.closeTab(mc.tabmail.currentTabInfo);</span>
<a href="#l10.59"></a><span id="l10.59">     mc.tabmail.undoCloseTab();</span>
<a href="#l10.60"></a><span id="l10.60">     // Wait for the page to be loaded again...</span>
<a href="#l10.61"></a><span id="l10.61">     wait_for_content_tab_load(undefined, function(aURL) {</span>
<a href="#l10.62"></a><span id="l10.62" class="difflineminus">-      return aURL.host == &quot;localhost&quot;;</span>
<a href="#l10.63"></a><span id="l10.63" class="difflineplus">+      return aURL.host == &quot;mochi.test&quot;;</span>
<a href="#l10.64"></a><span id="l10.64">     });</span>
<a href="#l10.65"></a><span id="l10.65">     tab = mc.tabmail.currentTabInfo;</span>
<a href="#l10.66"></a><span id="l10.66">   }</span>
<a href="#l10.67"></a><span id="l10.67"> </span>
<a href="#l10.68"></a><span id="l10.68">   // Record how many accounts we start with.</span>
<a href="#l10.69"></a><span id="l10.69">   gNumAccounts = nAccounts();</span>
<a href="#l10.70"></a><span id="l10.70"> </span>
<a href="#l10.71"></a><span id="l10.71">   // Plan for the account provisioner window to re-open, and then run the</span>
<a href="#l10.72"></a><span id="l10.72" class="difflineat">@@ -996,17 +998,17 @@ function get_to_order_form(aAddress) {</span>
<a href="#l10.73"></a><span id="l10.73">   open_provisioner_window();</span>
<a href="#l10.74"></a><span id="l10.74">   wait_for_modal_dialog(&quot;AccountCreation&quot;);</span>
<a href="#l10.75"></a><span id="l10.75"> </span>
<a href="#l10.76"></a><span id="l10.76">   // Once we're here, subtest_get_an_account has completed, and we're waiting</span>
<a href="#l10.77"></a><span id="l10.77">   // for a content tab to load for the account order form.</span>
<a href="#l10.78"></a><span id="l10.78"> </span>
<a href="#l10.79"></a><span id="l10.79">   // Make sure the page is loaded.</span>
<a href="#l10.80"></a><span id="l10.80">   wait_for_content_tab_load(undefined, function(aURL) {</span>
<a href="#l10.81"></a><span id="l10.81" class="difflineminus">-    return aURL.host == &quot;localhost&quot;;</span>
<a href="#l10.82"></a><span id="l10.82" class="difflineplus">+    return aURL.host == &quot;mochi.test&quot;;</span>
<a href="#l10.83"></a><span id="l10.83">   });</span>
<a href="#l10.84"></a><span id="l10.84"> }</span>
<a href="#l10.85"></a><span id="l10.85"> </span>
<a href="#l10.86"></a><span id="l10.86"> /**</span>
<a href="#l10.87"></a><span id="l10.87">  * Fills in the Account Provisioner dialog to get us to the order form.</span>
<a href="#l10.88"></a><span id="l10.88">  */</span>
<a href="#l10.89"></a><span id="l10.89"> function sub_get_to_order_form(aController, aAddress) {</span>
<a href="#l10.90"></a><span id="l10.90">   wait_for_provider_list_loaded(aController);</span>
<a href="#l10.91"></a><span id="l10.91" class="difflineat">@@ -1064,17 +1066,19 @@ add_task(function test_internal_link_ope</span>
<a href="#l10.92"></a><span id="l10.92">   let tab = mc.tabmail.currentTabInfo;</span>
<a href="#l10.93"></a><span id="l10.93">   let doc = tab.browser.contentWindow.document;</span>
<a href="#l10.94"></a><span id="l10.94"> </span>
<a href="#l10.95"></a><span id="l10.95">   // Click on the internal link.</span>
<a href="#l10.96"></a><span id="l10.96">   mc.click(new elib.Elem(doc.getElementById(&quot;internal&quot;)));</span>
<a href="#l10.97"></a><span id="l10.97"> </span>
<a href="#l10.98"></a><span id="l10.98">   // We should load the target page in the current tab browser.</span>
<a href="#l10.99"></a><span id="l10.99">   wait_for_browser_load(tab.browser, function(aURL) {</span>
<a href="#l10.100"></a><span id="l10.100" class="difflineminus">-    return aURL.host == &quot;localhost&quot; &amp;&amp; aURL.pathQueryRef == &quot;/target.html&quot;;</span>
<a href="#l10.101"></a><span id="l10.101" class="difflineplus">+    return (</span>
<a href="#l10.102"></a><span id="l10.102" class="difflineplus">+      aURL.host == &quot;mochi.test&quot; &amp;&amp; aURL.pathQueryRef.endsWith(&quot;/target.html&quot;)</span>
<a href="#l10.103"></a><span id="l10.103" class="difflineplus">+    );</span>
<a href="#l10.104"></a><span id="l10.104">   });</span>
<a href="#l10.105"></a><span id="l10.105">   // Now close the tab.</span>
<a href="#l10.106"></a><span id="l10.106">   mc.tabmail.closeTab(tab);</span>
<a href="#l10.107"></a><span id="l10.107"> });</span>
<a href="#l10.108"></a><span id="l10.108"> </span>
<a href="#l10.109"></a><span id="l10.109"> /**</span>
<a href="#l10.110"></a><span id="l10.110">  * Test that window.open in the order form opens in new content tabs.</span>
<a href="#l10.111"></a><span id="l10.111">  */</span>
<a href="#l10.112"></a><span id="l10.112" class="difflineat">@@ -1083,17 +1087,19 @@ add_task(function test_window_open_link_</span>
<a href="#l10.113"></a><span id="l10.113"> </span>
<a href="#l10.114"></a><span id="l10.114">   let tab = mc.tabmail.currentTabInfo;</span>
<a href="#l10.115"></a><span id="l10.115">   let doc = tab.browser.contentWindow.document;</span>
<a href="#l10.116"></a><span id="l10.116"> </span>
<a href="#l10.117"></a><span id="l10.117">   // First, click on the Javascript link - this should open in a new content</span>
<a href="#l10.118"></a><span id="l10.118">   // tab and be focused.</span>
<a href="#l10.119"></a><span id="l10.119">   let newTabLink = doc.getElementById(&quot;newtab&quot;);</span>
<a href="#l10.120"></a><span id="l10.120">   open_content_tab_with_click(newTabLink, function(aURL) {</span>
<a href="#l10.121"></a><span id="l10.121" class="difflineminus">-    return aURL.host == &quot;localhost&quot; &amp;&amp; aURL.pathQueryRef == &quot;/target.html&quot;;</span>
<a href="#l10.122"></a><span id="l10.122" class="difflineplus">+    return (</span>
<a href="#l10.123"></a><span id="l10.123" class="difflineplus">+      aURL.host == &quot;mochi.test&quot; &amp;&amp; aURL.pathQueryRef.endsWith(&quot;/target.html&quot;)</span>
<a href="#l10.124"></a><span id="l10.124" class="difflineplus">+    );</span>
<a href="#l10.125"></a><span id="l10.125">   });</span>
<a href="#l10.126"></a><span id="l10.126"> </span>
<a href="#l10.127"></a><span id="l10.127">   // Close the new tab.</span>
<a href="#l10.128"></a><span id="l10.128">   let newTab = mc.tabmail.currentTabInfo;</span>
<a href="#l10.129"></a><span id="l10.129">   mc.tabmail.closeTab(newTab);</span>
<a href="#l10.130"></a><span id="l10.130">   mc.tabmail.closeTab(tab);</span>
<a href="#l10.131"></a><span id="l10.131"> });</span>
<a href="#l10.132"></a><span id="l10.132"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/test/browser/newmailaccount/html/providerList</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/test/browser/newmailaccount/html/providerList</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -6,55 +6,55 @@</span>
<a href="#l11.4"></a><span id="l11.4">   &quot;tos_url&quot;: &quot;http://www.example.com/foo-tos&quot;,</span>
<a href="#l11.5"></a><span id="l11.5">   &quot;privacy_url&quot;: &quot;http://www.example.com/foo-privacy&quot;,</span>
<a href="#l11.6"></a><span id="l11.6">   &quot;search_engine&quot;: &quot;foo&quot;</span>
<a href="#l11.7"></a><span id="l11.7">  },</span>
<a href="#l11.8"></a><span id="l11.8">  {&quot;id&quot;: &quot;bar&quot;,</span>
<a href="#l11.9"></a><span id="l11.9">   &quot;label&quot;: &quot;bar&quot;,</span>
<a href="#l11.10"></a><span id="l11.10">   &quot;paid&quot;: false,</span>
<a href="#l11.11"></a><span id="l11.11">   &quot;languages&quot; : [&quot;en-US&quot;, &quot;fr-FR&quot;],</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-  &quot;api&quot;: &quot;http://localhost:43336/registration.html&quot;,</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+  &quot;api&quot;: &quot;http://mochi.test:8888/browser/comm/mail/test/browser/newmailaccount/html/registration.html&quot;,</span>
<a href="#l11.14"></a><span id="l11.14">   &quot;tos_url&quot;: &quot;http://www.example.com/bar-tos&quot;,</span>
<a href="#l11.15"></a><span id="l11.15">   &quot;privacy_url&quot;: &quot;http://www.example.com/bar-privacy&quot;,</span>
<a href="#l11.16"></a><span id="l11.16">   &quot;search_engine&quot;: &quot;bar&quot;</span>
<a href="#l11.17"></a><span id="l11.17">  },</span>
<a href="#l11.18"></a><span id="l11.18">  {&quot;id&quot;: &quot;French&quot;,</span>
<a href="#l11.19"></a><span id="l11.19">   &quot;label&quot;: &quot;French Provider&quot;,</span>
<a href="#l11.20"></a><span id="l11.20">   &quot;paid&quot;: false,</span>
<a href="#l11.21"></a><span id="l11.21">   &quot;languages&quot; : [&quot;fr-FR&quot;],</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineminus">-  &quot;api&quot;: &quot;http://localhost:43336/registration.html&quot;,</span>
<a href="#l11.23"></a><span id="l11.23" class="difflineplus">+  &quot;api&quot;: &quot;http://mochi.test:8888/browser/comm/mail/test/browser/newmailaccount/html/registration.html&quot;,</span>
<a href="#l11.24"></a><span id="l11.24">   &quot;tos_url&quot;: &quot;http://www.example.com/French-tos&quot;,</span>
<a href="#l11.25"></a><span id="l11.25">   &quot;privacy_url&quot;: &quot;http://www.example.com/French-privacy&quot;,</span>
<a href="#l11.26"></a><span id="l11.26">   &quot;search_engine&quot;: &quot;French&quot;</span>
<a href="#l11.27"></a><span id="l11.27">  },</span>
<a href="#l11.28"></a><span id="l11.28">  {&quot;id&quot;: &quot;German&quot;,</span>
<a href="#l11.29"></a><span id="l11.29">   &quot;label&quot;: &quot;German Provider&quot;,</span>
<a href="#l11.30"></a><span id="l11.30">   &quot;paid&quot;: false,</span>
<a href="#l11.31"></a><span id="l11.31">   &quot;languages&quot; : [&quot;de-DE&quot;],</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineminus">-  &quot;api&quot;: &quot;http://localhost:43336/registration.html&quot;,</span>
<a href="#l11.33"></a><span id="l11.33" class="difflineplus">+  &quot;api&quot;: &quot;http://mochi.test:8888/browser/comm/mail/test/browser/newmailaccount/html/registration.html&quot;,</span>
<a href="#l11.34"></a><span id="l11.34">   &quot;tos_url&quot;: &quot;http://www.example.com/German-tos&quot;,</span>
<a href="#l11.35"></a><span id="l11.35">   &quot;privacy_url&quot;: &quot;http://www.example.com/German-privacy&quot;,</span>
<a href="#l11.36"></a><span id="l11.36">   &quot;search_engine&quot;: &quot;German&quot;</span>
<a href="#l11.37"></a><span id="l11.37">  },</span>
<a href="#l11.38"></a><span id="l11.38">  {&quot;id&quot;: &quot;corrupt&quot;,</span>
<a href="#l11.39"></a><span id="l11.39">   &quot;label&quot;: &quot;Corrupt Provider&quot;,</span>
<a href="#l11.40"></a><span id="l11.40">   &quot;paid&quot;: false,</span>
<a href="#l11.41"></a><span id="l11.41">   &quot;languages&quot; : [&quot;en-US&quot;],</span>
<a href="#l11.42"></a><span id="l11.42" class="difflineminus">-  &quot;api&quot;: &quot;http://localhost:43336/registrationCorrupt.html&quot;,</span>
<a href="#l11.43"></a><span id="l11.43" class="difflineplus">+  &quot;api&quot;: &quot;http://mochi.test:8888/browser/comm/mail/test/browser/newmailaccount/html/registrationCorrupt.html&quot;,</span>
<a href="#l11.44"></a><span id="l11.44">   &quot;tos_url&quot;: &quot;http://www.example.com/corrupt-tos&quot;,</span>
<a href="#l11.45"></a><span id="l11.45">   &quot;privacy_url&quot;: &quot;http://www.example.com/corrupt-privacy&quot;</span>
<a href="#l11.46"></a><span id="l11.46">  },</span>
<a href="#l11.47"></a><span id="l11.47">  {&quot;id&quot;: &quot;err&quot;,</span>
<a href="#l11.48"></a><span id="l11.48">   &quot;label&quot;: &quot;Error Provider&quot;,</span>
<a href="#l11.49"></a><span id="l11.49">   &quot;paid&quot;: false,</span>
<a href="#l11.50"></a><span id="l11.50">   &quot;languages&quot; : [&quot;en-US&quot;],</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineminus">-  &quot;api&quot;: &quot;http://localhost:43336/registrationError.html&quot;,</span>
<a href="#l11.52"></a><span id="l11.52" class="difflineplus">+  &quot;api&quot;: &quot;http://mochi.test:8888/browser/comm/mail/test/browser/newmailaccount/html/registrationError.html&quot;,</span>
<a href="#l11.53"></a><span id="l11.53">   &quot;tos_url&quot;: &quot;http://www.example.com/err-tos&quot;,</span>
<a href="#l11.54"></a><span id="l11.54">   &quot;privacy_url&quot;: &quot;http://www.example.com/err-privacy&quot;</span>
<a href="#l11.55"></a><span id="l11.55">  },</span>
<a href="#l11.56"></a><span id="l11.56">  {&quot;id&quot;: &quot;multi&quot;,</span>
<a href="#l11.57"></a><span id="l11.57">   &quot;label&quot;: &quot;multi&quot;,</span>
<a href="#l11.58"></a><span id="l11.58">   &quot;paid&quot;: true,</span>
<a href="#l11.59"></a><span id="l11.59">   &quot;languages&quot; : [&quot;en-US&quot;],</span>
<a href="#l11.60"></a><span id="l11.60" class="difflineminus">-  &quot;api&quot;: &quot;http://localhost:43336/registration.html&quot;,</span>
<a href="#l11.61"></a><span id="l11.61" class="difflineplus">+  &quot;api&quot;: &quot;http://mochi.test:8888/browser/comm/mail/test/browser/newmailaccount/html/registration.html&quot;,</span>
<a href="#l11.62"></a><span id="l11.62">   &quot;tos_url&quot;: &quot;http://www.example.com/bar-tos&quot;,</span>
<a href="#l11.63"></a><span id="l11.63">   &quot;privacy_url&quot;: &quot;http://www.example.com/bar-privacy&quot;</span>
<a href="#l11.64"></a><span id="l11.64">  }]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/test/browser/newmailaccount/html/providerListIncomplete</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/test/browser/newmailaccount/html/providerListIncomplete</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -6,36 +6,36 @@</span>
<a href="#l12.4"></a><span id="l12.4">   &quot;tos_url&quot;: &quot;http://www.example.com/tos&quot;,</span>
<a href="#l12.5"></a><span id="l12.5">   &quot;privacy_url&quot;: &quot;http://www.example.com/privacy&quot;,</span>
<a href="#l12.6"></a><span id="l12.6">   &quot;search_engine&quot;: &quot;foo&quot;</span>
<a href="#l12.7"></a><span id="l12.7">  },</span>
<a href="#l12.8"></a><span id="l12.8">  {&quot;id&quot;: &quot;bar&quot;,</span>
<a href="#l12.9"></a><span id="l12.9">   &quot;label&quot;: &quot;bar&quot;,</span>
<a href="#l12.10"></a><span id="l12.10">   &quot;paid&quot;: false,</span>
<a href="#l12.11"></a><span id="l12.11">   &quot;languages&quot; : [&quot;en-US&quot;, &quot;fr-FR&quot;],</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-  &quot;api&quot;: &quot;http://localhost:43336/registration.html&quot;,</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+  &quot;api&quot;: &quot;http://mochi.test:8888/browser/comm/mail/test/browser/newmailaccount/html/registration.html&quot;,</span>
<a href="#l12.14"></a><span id="l12.14">   &quot;tos_url&quot;: &quot;http://www.example.com/tos&quot;,</span>
<a href="#l12.15"></a><span id="l12.15">   &quot;privacy_url&quot;: &quot;http://www.example.com/privacy&quot;,</span>
<a href="#l12.16"></a><span id="l12.16">   &quot;search_engine&quot;: &quot;bar&quot;</span>
<a href="#l12.17"></a><span id="l12.17">  },</span>
<a href="#l12.18"></a><span id="l12.18">  {&quot;id&quot;: &quot;French&quot;,</span>
<a href="#l12.19"></a><span id="l12.19">   &quot;label&quot;: &quot;French Provider&quot;,</span>
<a href="#l12.20"></a><span id="l12.20">   &quot;paid&quot;: false,</span>
<a href="#l12.21"></a><span id="l12.21">   &quot;languages&quot; : [&quot;fr-FR&quot;],</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineminus">-  &quot;api&quot;: &quot;http://localhost:43336/registration.html&quot;,</span>
<a href="#l12.23"></a><span id="l12.23" class="difflineplus">+  &quot;api&quot;: &quot;http://mochi.test:8888/browser/comm/mail/test/browser/newmailaccount/html/registration.html&quot;,</span>
<a href="#l12.24"></a><span id="l12.24">   &quot;tos_url&quot;: &quot;http://www.example.com/tos&quot;,</span>
<a href="#l12.25"></a><span id="l12.25">   &quot;privacy_url&quot;: &quot;http://www.example.com/privacy&quot;,</span>
<a href="#l12.26"></a><span id="l12.26">   &quot;search_engine&quot;: &quot;French&quot;</span>
<a href="#l12.27"></a><span id="l12.27">  },</span>
<a href="#l12.28"></a><span id="l12.28">  {&quot;id&quot;: &quot;German&quot;,</span>
<a href="#l12.29"></a><span id="l12.29">   &quot;label&quot;: &quot;German Provider&quot;,</span>
<a href="#l12.30"></a><span id="l12.30">   &quot;paid&quot;: false,</span>
<a href="#l12.31"></a><span id="l12.31">   &quot;languages&quot; : [&quot;de-DE&quot;],</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineminus">-  &quot;api&quot;: &quot;http://localhost:43336/registration.html&quot;,</span>
<a href="#l12.33"></a><span id="l12.33" class="difflineplus">+  &quot;api&quot;: &quot;http://mochi.test:8888/browser/comm/mail/test/browser/newmailaccount/html/registration.html&quot;,</span>
<a href="#l12.34"></a><span id="l12.34">   &quot;tos_url&quot;: &quot;http://www.example.com/tos&quot;,</span>
<a href="#l12.35"></a><span id="l12.35">   &quot;privacy_url&quot;: &quot;http://www.example.com/privacy&quot;,</span>
<a href="#l12.36"></a><span id="l12.36">   &quot;search_engine&quot;: &quot;German&quot;</span>
<a href="#l12.37"></a><span id="l12.37"> },</span>
<a href="#l12.38"></a><span id="l12.38">  {&quot;id&quot;: &quot;corrupt&quot;,</span>
<a href="#l12.39"></a><span id="l12.39">   &quot;label&quot;: &quot;Corrupt Provider&quot;,</span>
<a href="#l12.40"></a><span id="l12.40">   &quot;languages&quot; : [&quot;en-US&quot;],</span>
<a href="#l12.41"></a><span id="l12.41" class="difflineminus">-  &quot;api&quot;: &quot;http://localhost:43336/registrationCorrupt.html&quot;</span>
<a href="#l12.42"></a><span id="l12.42" class="difflineplus">+  &quot;api&quot;: &quot;http://mochi.test:8888/browser/comm/mail/test/browser/newmailaccount/html/registrationCorrupt.html&quot;</span>
<a href="#l12.43"></a><span id="l12.43"> }]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mail/test/browser/newmailaccount/html/providerListNoOtherLangs</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mail/test/browser/newmailaccount/html/providerListNoOtherLangs</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -6,23 +6,23 @@</span>
<a href="#l13.4"></a><span id="l13.4">   &quot;tos_url&quot;: &quot;http://www.example.com/foo-tos&quot;,</span>
<a href="#l13.5"></a><span id="l13.5">   &quot;privacy_url&quot;: &quot;http://www.example.com/foo-privacy&quot;,</span>
<a href="#l13.6"></a><span id="l13.6">   &quot;search_engine&quot;: &quot;foo&quot;</span>
<a href="#l13.7"></a><span id="l13.7">  },</span>
<a href="#l13.8"></a><span id="l13.8">  {&quot;id&quot;: &quot;bar&quot;,</span>
<a href="#l13.9"></a><span id="l13.9">   &quot;label&quot;: &quot;bar&quot;,</span>
<a href="#l13.10"></a><span id="l13.10">   &quot;paid&quot;: false,</span>
<a href="#l13.11"></a><span id="l13.11">   &quot;languages&quot; : [&quot;en-US&quot;],</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-  &quot;api&quot;: &quot;http://localhost:43336/registration.html&quot;,</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+  &quot;api&quot;: &quot;http://mochi.test:8888/browser/comm/mail/test/browser/newmailaccount/html/registration.html&quot;,</span>
<a href="#l13.14"></a><span id="l13.14">   &quot;tos_url&quot;: &quot;http://www.example.com/bar-tos&quot;,</span>
<a href="#l13.15"></a><span id="l13.15">   &quot;privacy_url&quot;: &quot;http://www.example.com/bar-privacy&quot;,</span>
<a href="#l13.16"></a><span id="l13.16">   &quot;search_engine&quot;: &quot;bar&quot;</span>
<a href="#l13.17"></a><span id="l13.17">  },</span>
<a href="#l13.18"></a><span id="l13.18">  {&quot;id&quot;: &quot;corrupt&quot;,</span>
<a href="#l13.19"></a><span id="l13.19">   &quot;label&quot;: &quot;Corrupt Provider&quot;,</span>
<a href="#l13.20"></a><span id="l13.20">   &quot;paid&quot;: false,</span>
<a href="#l13.21"></a><span id="l13.21">   &quot;languages&quot; : [&quot;en-US&quot;],</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineminus">-  &quot;api&quot;: &quot;http://localhost:43336/registrationCorrupt.html&quot;,</span>
<a href="#l13.23"></a><span id="l13.23" class="difflineplus">+  &quot;api&quot;: &quot;http://mochi.test:8888/browser/comm/mail/test/browser/newmailaccount/html/registrationCorrupt.html&quot;,</span>
<a href="#l13.24"></a><span id="l13.24">   &quot;tos_url&quot;: &quot;http://www.example.com/corrupt-tos&quot;,</span>
<a href="#l13.25"></a><span id="l13.25">   &quot;privacy_url&quot;: &quot;http://www.example.com/corrupt-privacy&quot;</span>
<a href="#l13.26"></a><span id="l13.26"> }</span>
<a href="#l13.27"></a><span id="l13.27"> </span>
<a href="#l13.28"></a><span id="l13.28"> ]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mail/test/browser/newmailaccount/html/providerListWildcard</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mail/test/browser/newmailaccount/html/providerListWildcard</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -15,23 +15,23 @@</span>
<a href="#l14.4"></a><span id="l14.4">   &quot;tos_url&quot;: &quot;http://www.example.com/foo-tos&quot;,</span>
<a href="#l14.5"></a><span id="l14.5">   &quot;privacy_url&quot;: &quot;http://www.example.com/foo-privacy&quot;,</span>
<a href="#l14.6"></a><span id="l14.6">   &quot;search_engine&quot;: &quot;otherUniversal&quot;</span>
<a href="#l14.7"></a><span id="l14.7">  },</span>
<a href="#l14.8"></a><span id="l14.8">  {&quot;id&quot;: &quot;French&quot;,</span>
<a href="#l14.9"></a><span id="l14.9">   &quot;label&quot;: &quot;French Provider&quot;,</span>
<a href="#l14.10"></a><span id="l14.10">   &quot;paid&quot;: false,</span>
<a href="#l14.11"></a><span id="l14.11">   &quot;languages&quot; : [&quot;fr-FR&quot;],</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-  &quot;api&quot;: &quot;http://localhost:43336/registration.html&quot;,</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+  &quot;api&quot;: &quot;http://mochi.test:8888/browser/comm/mail/test/browser/newmailaccount/html/registration.html&quot;,</span>
<a href="#l14.14"></a><span id="l14.14">   &quot;tos_url&quot;: &quot;http://www.example.com/French-tos&quot;,</span>
<a href="#l14.15"></a><span id="l14.15">   &quot;privacy_url&quot;: &quot;http://www.example.com/French-privacy&quot;,</span>
<a href="#l14.16"></a><span id="l14.16">   &quot;search_engine&quot;: &quot;French&quot;</span>
<a href="#l14.17"></a><span id="l14.17">  },</span>
<a href="#l14.18"></a><span id="l14.18">  {&quot;id&quot;: &quot;German&quot;,</span>
<a href="#l14.19"></a><span id="l14.19">   &quot;label&quot;: &quot;German Provider&quot;,</span>
<a href="#l14.20"></a><span id="l14.20">   &quot;paid&quot;: false,</span>
<a href="#l14.21"></a><span id="l14.21">   &quot;languages&quot; : [&quot;de-DE&quot;],</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineminus">-  &quot;api&quot;: &quot;http://localhost:43336/registration.html&quot;,</span>
<a href="#l14.23"></a><span id="l14.23" class="difflineplus">+  &quot;api&quot;: &quot;http://mochi.test:8888/browser/comm/mail/test/browser/newmailaccount/html/registration.html&quot;,</span>
<a href="#l14.24"></a><span id="l14.24">   &quot;tos_url&quot;: &quot;http://www.example.com/German-tos&quot;,</span>
<a href="#l14.25"></a><span id="l14.25">   &quot;privacy_url&quot;: &quot;http://www.example.com/German-privacy&quot;,</span>
<a href="#l14.26"></a><span id="l14.26">   &quot;search_engine&quot;: &quot;German&quot;</span>
<a href="#l14.27"></a><span id="l14.27">  }</span>
<a href="#l14.28"></a><span id="l14.28"> ]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/test/browser/override-main-menu-collapse/browser.ini</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/test/browser/override-main-menu-collapse/browser.ini</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -1,15 +1,15 @@</span>
<a href="#l15.4"></a><span id="l15.4"> [DEFAULT]</span>
<a href="#l15.5"></a><span id="l15.5"> prefs =</span>
<a href="#l15.6"></a><span id="l15.6">   ldap_2.servers.osx.description=</span>
<a href="#l15.7"></a><span id="l15.7">   ldap_2.servers.osx.dirType=-1</span>
<a href="#l15.8"></a><span id="l15.8">   ldap_2.servers.osx.uri=</span>
<a href="#l15.9"></a><span id="l15.9" class="difflineplus">+  mail.main_menu.collapse_by_default=false</span>
<a href="#l15.10"></a><span id="l15.10">   mail.provider.suppress_dialog_on_startup=true</span>
<a href="#l15.11"></a><span id="l15.11">   mail.spotlight.firstRunDone=true</span>
<a href="#l15.12"></a><span id="l15.12">   mail.winsearch.firstRunDone=true</span>
<a href="#l15.13"></a><span id="l15.13">   mailnews.start_page.override_url=about:blank</span>
<a href="#l15.14"></a><span id="l15.14">   mailnews.start_page.url=about:blank</span>
<a href="#l15.15"></a><span id="l15.15"> subsuite = thunderbird</span>
<a href="#l15.16"></a><span id="l15.16"> </span>
<a href="#l15.17"></a><span id="l15.17"> [browser_overrideMainmenuCollapse.js]</span>
<a href="#l15.18"></a><span id="l15.18" class="difflineminus">-skip-if = true</span>
<a href="#l15.19"></a><span id="l15.19" class="difflineminus">-# skip-if = os == &quot;mac&quot;</span>
<a href="#l15.20"></a><span id="l15.20" class="difflineplus">+skip-if = os == &quot;mac&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mail/test/browser/override-main-menu-collapse/browser_overrideMainmenuCollapse.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mail/test/browser/override-main-menu-collapse/browser_overrideMainmenuCollapse.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -5,47 +5,17 @@</span>
<a href="#l16.4"></a><span id="l16.4"> /**</span>
<a href="#l16.5"></a><span id="l16.5">  * Tests that the main menu will NOT be collapsed by default if Thunderbird</span>
<a href="#l16.6"></a><span id="l16.6">  * starts with no accounts created, and mail.main_menu.collapse_by_default set</span>
<a href="#l16.7"></a><span id="l16.7">  * to false.</span>
<a href="#l16.8"></a><span id="l16.8">  */</span>
<a href="#l16.9"></a><span id="l16.9"> </span>
<a href="#l16.10"></a><span id="l16.10"> &quot;use strict&quot;;</span>
<a href="#l16.11"></a><span id="l16.11"> </span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-var { mc } = ChromeUtils.import(</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">-  &quot;resource://testing-common/mozmill/FolderDisplayHelpers.jsm&quot;</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineminus">-);</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineminus">-var { close_window, wait_for_existing_window } = ChromeUtils.import(</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineminus">-  &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineminus">-);</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineminus">-</span>
<a href="#l16.19"></a><span id="l16.19"> var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l16.20"></a><span id="l16.20"> </span>
<a href="#l16.21"></a><span id="l16.21"> add_task(function test_main_menu_not_collapsed() {</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineminus">-  // Due to random oranges on slower machines, we need to ensure that startup</span>
<a href="#l16.23"></a><span id="l16.23" class="difflineminus">-  // is complete before running this test.</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineminus">-  let done = false;</span>
<a href="#l16.25"></a><span id="l16.25" class="difflineminus">-  let observer = {</span>
<a href="#l16.26"></a><span id="l16.26" class="difflineminus">-    observe(aSubject, aTopic, aData) {</span>
<a href="#l16.27"></a><span id="l16.27" class="difflineminus">-      if (aTopic == &quot;mail-startup-done&quot;) {</span>
<a href="#l16.28"></a><span id="l16.28" class="difflineminus">-        done = true;</span>
<a href="#l16.29"></a><span id="l16.29" class="difflineminus">-      }</span>
<a href="#l16.30"></a><span id="l16.30" class="difflineminus">-    },</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineminus">-  };</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineminus">-  Services.obs.addObserver(observer, &quot;mail-startup-done&quot;);</span>
<a href="#l16.33"></a><span id="l16.33" class="difflineminus">-</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineminus">-  // Since no accounts were set up, and the account provisoner was disabled</span>
<a href="#l16.35"></a><span id="l16.35" class="difflineminus">-  // in prefs.js, the wizard will show up. Find it, and close it. This will</span>
<a href="#l16.36"></a><span id="l16.36" class="difflineminus">-  // cause mail-startup-done to eventually be fired.</span>
<a href="#l16.37"></a><span id="l16.37" class="difflineminus">-  let wizard = wait_for_existing_window(&quot;mail:autoconfig&quot;);</span>
<a href="#l16.38"></a><span id="l16.38" class="difflineminus">-  close_window(wizard);</span>
<a href="#l16.39"></a><span id="l16.39" class="difflineminus">-</span>
<a href="#l16.40"></a><span id="l16.40" class="difflineminus">-  // Spin the event loop until mail-startup-done is fired.</span>
<a href="#l16.41"></a><span id="l16.41" class="difflineminus">-  mc.waitFor(() =&gt; done);</span>
<a href="#l16.42"></a><span id="l16.42" class="difflineminus">-</span>
<a href="#l16.43"></a><span id="l16.43" class="difflineminus">-  let mainMenu = mc.e(&quot;mail-toolbar-menubar2&quot;);</span>
<a href="#l16.44"></a><span id="l16.44" class="difflineplus">+  let mainMenu = document.getElementById(&quot;mail-toolbar-menubar2&quot;);</span>
<a href="#l16.45"></a><span id="l16.45">   Assert.ok(</span>
<a href="#l16.46"></a><span id="l16.46">     !mainMenu.hasAttribute(&quot;autohide&quot;),</span>
<a href="#l16.47"></a><span id="l16.47">     &quot;The main menu should not have the autohide attribute.&quot;</span>
<a href="#l16.48"></a><span id="l16.48">   );</span>
<a href="#l16.49"></a><span id="l16.49" class="difflineminus">-</span>
<a href="#l16.50"></a><span id="l16.50" class="difflineminus">-  Services.obs.removeObserver(observer, &quot;mail-startup-done&quot;);</span>
<a href="#l16.51"></a><span id="l16.51"> });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mail/test/browser/session-store/browser.ini</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mail/test/browser/session-store/browser.ini</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -6,9 +6,8 @@ prefs =</span>
<a href="#l17.4"></a><span id="l17.4">   mail.provider.suppress_dialog_on_startup=true</span>
<a href="#l17.5"></a><span id="l17.5">   mail.spotlight.firstRunDone=true</span>
<a href="#l17.6"></a><span id="l17.6">   mail.winsearch.firstRunDone=true</span>
<a href="#l17.7"></a><span id="l17.7">   mailnews.start_page.override_url=about:blank</span>
<a href="#l17.8"></a><span id="l17.8">   mailnews.start_page.url=about:blank</span>
<a href="#l17.9"></a><span id="l17.9"> subsuite = thunderbird</span>
<a href="#l17.10"></a><span id="l17.10"> </span>
<a href="#l17.11"></a><span id="l17.11"> [browser_sessionStore.js]</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-skip-if = true</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mail/test/browser/session-store/browser_sessionStore.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mail/test/browser/session-store/browser_sessionStore.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -125,17 +125,18 @@ add_task(function setupModule(module) {</span>
<a href="#l18.4"></a><span id="l18.4">   // Opt out of calendar promotion so we don't show the &quot;ligthing now</span>
<a href="#l18.5"></a><span id="l18.5">   // integrated&quot; notification bar (which gives us unexpected heights).</span>
<a href="#l18.6"></a><span id="l18.6">   Services.prefs.setBoolPref(&quot;calendar.integration.notify&quot;, false);</span>
<a href="#l18.7"></a><span id="l18.7"> });</span>
<a href="#l18.8"></a><span id="l18.8"> </span>
<a href="#l18.9"></a><span id="l18.9"> registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l18.10"></a><span id="l18.10">   folderA.server.rootFolder.propagateDelete(folderA, true, null);</span>
<a href="#l18.11"></a><span id="l18.11">   folderB.server.rootFolder.propagateDelete(folderB, true, null);</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-  Services.prefs.clearUserPref(&quot;calendar.integration.notify&quot;);</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineplus">+  Services.startup.quit(Ci.nsIAppStartup.eAttemptQuit);</span>
<a href="#l18.15"></a><span id="l18.15"> });</span>
<a href="#l18.16"></a><span id="l18.16"> </span>
<a href="#l18.17"></a><span id="l18.17"> add_task(function test_periodic_session_persistence_simple() {</span>
<a href="#l18.18"></a><span id="l18.18">   // delete the session file if it exists</span>
<a href="#l18.19"></a><span id="l18.19">   let sessionFile = SessionStoreManager.sessionFile;</span>
<a href="#l18.20"></a><span id="l18.20">   if (sessionFile.exists()) {</span>
<a href="#l18.21"></a><span id="l18.21">     sessionFile.remove(false);</span>
<a href="#l18.22"></a><span id="l18.22">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mail/test/browser/startup-firstrun/browser.ini</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mail/test/browser/startup-firstrun/browser.ini</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -7,10 +7,9 @@ prefs =</span>
<a href="#l19.4"></a><span id="l19.4">   mail.provider.suppress_dialog_on_startup=true</span>
<a href="#l19.5"></a><span id="l19.5">   mail.spotlight.firstRunDone=true</span>
<a href="#l19.6"></a><span id="l19.6">   mail.winsearch.firstRunDone=true</span>
<a href="#l19.7"></a><span id="l19.7">   mailnews.start_page.override_url=about:blank</span>
<a href="#l19.8"></a><span id="l19.8">   mailnews.start_page.url=about:blank</span>
<a href="#l19.9"></a><span id="l19.9"> subsuite = thunderbird</span>
<a href="#l19.10"></a><span id="l19.10"> </span>
<a href="#l19.11"></a><span id="l19.11"> [browser_menubarCollapsed.js]</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-skip-if = true</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineminus">-# skip-if = os == &quot;mac&quot;</span>
<a href="#l19.14"></a><span id="l19.14" class="difflineplus">+skip-if = os == &quot;mac&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mail/test/browser/startup-firstrun/browser_menubarCollapsed.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mail/test/browser/startup-firstrun/browser_menubarCollapsed.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -4,48 +4,18 @@</span>
<a href="#l20.4"></a><span id="l20.4"> </span>
<a href="#l20.5"></a><span id="l20.5"> /**</span>
<a href="#l20.6"></a><span id="l20.6">  * Tests that the main menu will be collapsed by default if Thunderbird starts</span>
<a href="#l20.7"></a><span id="l20.7">  * with no accounts created.</span>
<a href="#l20.8"></a><span id="l20.8">  */</span>
<a href="#l20.9"></a><span id="l20.9"> </span>
<a href="#l20.10"></a><span id="l20.10"> &quot;use strict&quot;;</span>
<a href="#l20.11"></a><span id="l20.11"> </span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-var { mc } = ChromeUtils.import(</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineminus">-  &quot;resource://testing-common/mozmill/FolderDisplayHelpers.jsm&quot;</span>
<a href="#l20.14"></a><span id="l20.14" class="difflineminus">-);</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineminus">-var { close_window, wait_for_existing_window } = ChromeUtils.import(</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineminus">-  &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineminus">-);</span>
<a href="#l20.18"></a><span id="l20.18" class="difflineminus">-</span>
<a href="#l20.19"></a><span id="l20.19"> var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l20.20"></a><span id="l20.20"> </span>
<a href="#l20.21"></a><span id="l20.21"> add_task(function test_main_menu_collapsed() {</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineminus">-  // Due to random oranges on slower machines, we need to ensure that startup</span>
<a href="#l20.23"></a><span id="l20.23" class="difflineminus">-  // is complete before running this test.</span>
<a href="#l20.24"></a><span id="l20.24" class="difflineminus">-  let done = false;</span>
<a href="#l20.25"></a><span id="l20.25" class="difflineminus">-  let observer = {</span>
<a href="#l20.26"></a><span id="l20.26" class="difflineminus">-    observe(aSubject, aTopic, aData) {</span>
<a href="#l20.27"></a><span id="l20.27" class="difflineminus">-      if (aTopic == &quot;mail-startup-done&quot;) {</span>
<a href="#l20.28"></a><span id="l20.28" class="difflineminus">-        done = true;</span>
<a href="#l20.29"></a><span id="l20.29" class="difflineminus">-      }</span>
<a href="#l20.30"></a><span id="l20.30" class="difflineminus">-    },</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">-  };</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineminus">-  Services.obs.addObserver(observer, &quot;mail-startup-done&quot;);</span>
<a href="#l20.33"></a><span id="l20.33" class="difflineminus">-</span>
<a href="#l20.34"></a><span id="l20.34" class="difflineminus">-  // Since no accounts were set up, and the account provisioner was disabled</span>
<a href="#l20.35"></a><span id="l20.35" class="difflineminus">-  // in prefs.js, the wizard will show up. Find it, and close it. This will</span>
<a href="#l20.36"></a><span id="l20.36" class="difflineminus">-  // cause mail-startup-done to eventually be fired.</span>
<a href="#l20.37"></a><span id="l20.37" class="difflineminus">-  let wizard = wait_for_existing_window(&quot;mail:autoconfig&quot;);</span>
<a href="#l20.38"></a><span id="l20.38" class="difflineminus">-  close_window(wizard);</span>
<a href="#l20.39"></a><span id="l20.39" class="difflineminus">-</span>
<a href="#l20.40"></a><span id="l20.40" class="difflineminus">-  // Spin the event loop until mail-startup-done is fired.</span>
<a href="#l20.41"></a><span id="l20.41" class="difflineminus">-  mc.waitFor(() =&gt; done);</span>
<a href="#l20.42"></a><span id="l20.42" class="difflineminus">-</span>
<a href="#l20.43"></a><span id="l20.43" class="difflineminus">-  let mainMenu = mc.e(&quot;mail-toolbar-menubar2&quot;);</span>
<a href="#l20.44"></a><span id="l20.44" class="difflineplus">+  let mainMenu = document.getElementById(&quot;mail-toolbar-menubar2&quot;);</span>
<a href="#l20.45"></a><span id="l20.45">   Assert.equal(</span>
<a href="#l20.46"></a><span id="l20.46">     mainMenu.getAttribute(&quot;autohide&quot;),</span>
<a href="#l20.47"></a><span id="l20.47">     &quot;true&quot;,</span>
<a href="#l20.48"></a><span id="l20.48">     &quot;The main menu should have the autohide attribute set to true.&quot;</span>
<a href="#l20.49"></a><span id="l20.49">   );</span>
<a href="#l20.50"></a><span id="l20.50" class="difflineminus">-</span>
<a href="#l20.51"></a><span id="l20.51" class="difflineminus">-  Services.obs.removeObserver(observer, &quot;mail-startup-done&quot;);</span>
<a href="#l20.52"></a><span id="l20.52"> });</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:31Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

