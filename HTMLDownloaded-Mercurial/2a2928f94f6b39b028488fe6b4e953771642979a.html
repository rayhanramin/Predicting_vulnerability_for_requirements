<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 27831:2a2928f94f6b39b028488fe6b4e953771642979a</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 2a2928f94f6b39b028488fe6b4e953771642979a" />
<meta property="og:url" content="/comm-central/rev/2a2928f94f6b39b028488fe6b4e953771642979a" />
<meta property="og:description" content="Bug 1585162 - Convert calendar Mozmill tests to Mochitest; r=pmorris" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 2a2928f94f6b39b028488fe6b4e953771642979a 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/2a2928f94f6b39b028488fe6b4e953771642979a">shortlog</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/2a2928f94f6b39b028488fe6b4e953771642979a">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a">files</a> |
changeset |
<a href="/comm-central/raw-rev/2a2928f94f6b39b028488fe6b4e953771642979a">raw</a>  | <a href="/comm-central/archive/2a2928f94f6b39b028488fe6b4e953771642979a.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1585162">Bug 1585162</a> - Convert calendar Mozmill tests to Mochitest; r=pmorris
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#71;&#101;&#111;&#102;&#102;&#32;&#76;&#97;&#110;&#107;&#111;&#119;&#32;&#60;&#103;&#101;&#111;&#102;&#102;&#64;&#100;&#97;&#114;&#107;&#116;&#114;&#111;&#106;&#97;&#110;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 27 Sep 2019 16:00:10 +1200</td></tr>

<tr>
 <td>changeset 27831</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/2a2928f94f6b39b028488fe6b4e953771642979a">2a2928f94f6b39b028488fe6b4e953771642979a</a></td>
</tr>



<tr>
<td>parent 27830</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/d85a8ba1bbd28de53fe3e1a96042c3536369c5ad">d85a8ba1bbd28de53fe3e1a96042c3536369c5ad</a>
</td>
</tr>

<tr>
<td>child 27832</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/7cd8521f4423f9c5c86aa03ab58ef73960737352">7cd8521f4423f9c5c86aa03ab58ef73960737352</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=2a2928f94f6b39b028488fe6b4e953771642979a">16505</a></td></tr>
<tr><td>push user</td><td>geoff@darktrojan.net</td></tr>
<tr><td>push date</td><td class="date age">Thu, 03 Oct 2019 07:27:11 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@2a2928f94f6b [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=2a2928f94f6b39b028488fe6b4e953771642979a">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=2a2928f94f6b39b028488fe6b4e953771642979a&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=2a2928f94f6b39b028488fe6b4e953771642979a&newProject=comm-central&newRevision=2a2928f94f6b39b028488fe6b4e953771642979a&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=2a2928f94f6b39b028488fe6b4e953771642979a&newProject=comm-central&newRevision=2a2928f94f6b39b028488fe6b4e953771642979a&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=2a2928f94f6b39b028488fe6b4e953771642979a&newProject=comm-central&newRevision=2a2928f94f6b39b028488fe6b4e953771642979a&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28pmorris%29&revcount=50">pmorris</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1585162">1585162</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1585162">Bug 1585162</a> - Convert calendar Mozmill tests to Mochitest; r=pmorris</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/.eslintrc.js">.eslintrc.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/.eslintrc.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/.eslintrc.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/.eslintrc.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/.eslintrc.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/.eslintrc.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/.eslintrc.js">calendar/.eslintrc.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/.eslintrc.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/.eslintrc.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/.eslintrc.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/.eslintrc.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/.eslintrc.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/lightning/Makefile.in">calendar/lightning/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/lightning/Makefile.in">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/lightning/Makefile.in">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/lightning/Makefile.in">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/lightning/Makefile.in">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/lightning/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser.ini">calendar/test/browser/browser.ini</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser.ini">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser.ini">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser.ini">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser.ini">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser.ini">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_basicFunctionality.js">calendar/test/browser/browser_basicFunctionality.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_basicFunctionality.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_basicFunctionality.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_basicFunctionality.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_basicFunctionality.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_basicFunctionality.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_localICS.js">calendar/test/browser/browser_localICS.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_localICS.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_localICS.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_localICS.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_localICS.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_localICS.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_timezones.js">calendar/test/browser/browser_timezones.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_timezones.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_timezones.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_timezones.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_timezones.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_timezones.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_todayPane.js">calendar/test/browser/browser_todayPane.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_todayPane.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_todayPane.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_todayPane.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_todayPane.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/browser_todayPane.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser.ini">calendar/test/browser/eventDialog/browser.ini</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser.ini">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser.ini">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser.ini">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser.ini">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser.ini">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_alarmDialog.js">calendar/test/browser/eventDialog/browser_alarmDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_alarmDialog.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_alarmDialog.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_alarmDialog.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_alarmDialog.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_alarmDialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_eventDialog.js">calendar/test/browser/eventDialog/browser_eventDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_eventDialog.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_eventDialog.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_eventDialog.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_eventDialog.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_eventDialog.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_eventDialogModificationPrompt.js">calendar/test/browser/eventDialog/browser_eventDialogModificationPrompt.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_eventDialogModificationPrompt.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_eventDialogModificationPrompt.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_eventDialogModificationPrompt.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_eventDialogModificationPrompt.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_eventDialogModificationPrompt.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_eventDialogSize.js">calendar/test/browser/eventDialog/browser_eventDialogSize.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_eventDialogSize.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_eventDialogSize.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_eventDialogSize.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_eventDialogSize.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_eventDialogSize.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_utf8.js">calendar/test/browser/eventDialog/browser_utf8.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_utf8.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_utf8.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_utf8.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_utf8.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/eventDialog/browser_utf8.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/invitations/browser.ini">calendar/test/browser/invitations/browser.ini</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/invitations/browser.ini">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/invitations/browser.ini">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/invitations/browser.ini">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/invitations/browser.ini">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/invitations/browser.ini">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/invitations/browser_imipBarEmail.js">calendar/test/browser/invitations/browser_imipBarEmail.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/invitations/browser_imipBarEmail.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/invitations/browser_imipBarEmail.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/invitations/browser_imipBarEmail.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/invitations/browser_imipBarEmail.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/invitations/browser_imipBarEmail.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/invitations/message-containing-event.eml">calendar/test/browser/invitations/message-containing-event.eml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/invitations/message-containing-event.eml">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/invitations/message-containing-event.eml">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/invitations/message-containing-event.eml">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/invitations/message-containing-event.eml">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/invitations/message-containing-event.eml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/preferences/browser.ini">calendar/test/browser/preferences/browser.ini</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/preferences/browser.ini">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/preferences/browser.ini">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/preferences/browser.ini">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/preferences/browser.ini">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/preferences/browser.ini">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/preferences/browser_alarmDefaultValue.js">calendar/test/browser/preferences/browser_alarmDefaultValue.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/preferences/browser_alarmDefaultValue.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/preferences/browser_alarmDefaultValue.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/preferences/browser_alarmDefaultValue.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/preferences/browser_alarmDefaultValue.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/preferences/browser_alarmDefaultValue.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/preferences/browser_categoryColors.js">calendar/test/browser/preferences/browser_categoryColors.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/preferences/browser_categoryColors.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/preferences/browser_categoryColors.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/preferences/browser_categoryColors.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/preferences/browser_categoryColors.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/preferences/browser_categoryColors.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser.ini">calendar/test/browser/recurrence/browser.ini</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser.ini">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser.ini">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser.ini">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser.ini">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser.ini">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_annual.js">calendar/test/browser/recurrence/browser_annual.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_annual.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_annual.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_annual.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_annual.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_annual.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_biweekly.js">calendar/test/browser/recurrence/browser_biweekly.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_biweekly.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_biweekly.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_biweekly.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_biweekly.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_biweekly.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_daily.js">calendar/test/browser/recurrence/browser_daily.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_daily.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_daily.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_daily.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_daily.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_daily.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_lastDayOfMonth.js">calendar/test/browser/recurrence/browser_lastDayOfMonth.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_lastDayOfMonth.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_lastDayOfMonth.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_lastDayOfMonth.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_lastDayOfMonth.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_lastDayOfMonth.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_weeklyN.js">calendar/test/browser/recurrence/browser_weeklyN.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_weeklyN.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_weeklyN.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_weeklyN.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_weeklyN.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_weeklyN.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_weeklyUntil.js">calendar/test/browser/recurrence/browser_weeklyUntil.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_weeklyUntil.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_weeklyUntil.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_weeklyUntil.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_weeklyUntil.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_weeklyUntil.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_weeklyWithException.js">calendar/test/browser/recurrence/browser_weeklyWithException.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_weeklyWithException.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_weeklyWithException.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_weeklyWithException.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_weeklyWithException.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrence/browser_weeklyWithException.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser.ini">calendar/test/browser/recurrenceRotated/browser.ini</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser.ini">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser.ini">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser.ini">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser.ini">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser.ini">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_annual.js">calendar/test/browser/recurrenceRotated/browser_annual.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_annual.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_annual.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_annual.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_annual.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_annual.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_biweekly.js">calendar/test/browser/recurrenceRotated/browser_biweekly.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_biweekly.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_biweekly.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_biweekly.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_biweekly.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_biweekly.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_daily.js">calendar/test/browser/recurrenceRotated/browser_daily.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_daily.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_daily.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_daily.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_daily.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_daily.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_lastDayOfMonth.js">calendar/test/browser/recurrenceRotated/browser_lastDayOfMonth.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_lastDayOfMonth.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_lastDayOfMonth.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_lastDayOfMonth.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_lastDayOfMonth.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_lastDayOfMonth.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_weeklyN.js">calendar/test/browser/recurrenceRotated/browser_weeklyN.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_weeklyN.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_weeklyN.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_weeklyN.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_weeklyN.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_weeklyN.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_weeklyUntil.js">calendar/test/browser/recurrenceRotated/browser_weeklyUntil.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_weeklyUntil.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_weeklyUntil.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_weeklyUntil.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_weeklyUntil.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_weeklyUntil.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_weeklyWithException.js">calendar/test/browser/recurrenceRotated/browser_weeklyWithException.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_weeklyWithException.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_weeklyWithException.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_weeklyWithException.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_weeklyWithException.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/recurrenceRotated/browser_weeklyWithException.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser.ini">calendar/test/browser/views/browser.ini</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser.ini">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser.ini">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser.ini">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser.ini">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser.ini">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_dayView.js">calendar/test/browser/views/browser_dayView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_dayView.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_dayView.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_dayView.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_dayView.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_dayView.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_monthView.js">calendar/test/browser/views/browser_monthView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_monthView.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_monthView.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_monthView.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_monthView.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_monthView.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_multiweekView.js">calendar/test/browser/views/browser_multiweekView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_multiweekView.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_multiweekView.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_multiweekView.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_multiweekView.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_multiweekView.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_taskView.js">calendar/test/browser/views/browser_taskView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_taskView.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_taskView.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_taskView.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_taskView.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_taskView.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_weekView.js">calendar/test/browser/views/browser_weekView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_weekView.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_weekView.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_weekView.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_weekView.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/browser/views/browser_weekView.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/modules/CalendarUtils.jsm">calendar/test/modules/CalendarUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/modules/CalendarUtils.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/modules/CalendarUtils.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/modules/CalendarUtils.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/modules/CalendarUtils.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/modules/CalendarUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/modules/ItemEditingHelpers.jsm">calendar/test/modules/ItemEditingHelpers.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/modules/ItemEditingHelpers.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/modules/ItemEditingHelpers.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/modules/ItemEditingHelpers.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/modules/ItemEditingHelpers.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/modules/ItemEditingHelpers.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/moz.build">calendar/test/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/moz.build">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/moz.build">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/moz.build">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/moz.build">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/.eslintrc.js">calendar/test/mozmill/.eslintrc.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/.eslintrc.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/.eslintrc.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/.eslintrc.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/Makefile.in">calendar/test/mozmill/Makefile.in</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/Makefile.in">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/Makefile.in">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testAnnualRecurrence.js">calendar/test/mozmill/cal-recurrence/testAnnualRecurrence.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testAnnualRecurrence.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testAnnualRecurrence.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testAnnualRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testBiweeklyRecurrence.js">calendar/test/mozmill/cal-recurrence/testBiweeklyRecurrence.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testBiweeklyRecurrence.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testBiweeklyRecurrence.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testBiweeklyRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testDailyRecurrence.js">calendar/test/mozmill/cal-recurrence/testDailyRecurrence.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testDailyRecurrence.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testDailyRecurrence.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testDailyRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testLastDayOfMonthRecurrence.js">calendar/test/mozmill/cal-recurrence/testLastDayOfMonthRecurrence.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testLastDayOfMonthRecurrence.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testLastDayOfMonthRecurrence.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testLastDayOfMonthRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testWeeklyNRecurrence.js">calendar/test/mozmill/cal-recurrence/testWeeklyNRecurrence.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testWeeklyNRecurrence.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testWeeklyNRecurrence.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testWeeklyNRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testWeeklyUntilRecurrence.js">calendar/test/mozmill/cal-recurrence/testWeeklyUntilRecurrence.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testWeeklyUntilRecurrence.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testWeeklyUntilRecurrence.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testWeeklyUntilRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testWeeklyWithExceptionRecurrence.js">calendar/test/mozmill/cal-recurrence/testWeeklyWithExceptionRecurrence.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testWeeklyWithExceptionRecurrence.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testWeeklyWithExceptionRecurrence.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/cal-recurrence/testWeeklyWithExceptionRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testAlarmDialog.js">calendar/test/mozmill/eventDialog/testAlarmDialog.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testAlarmDialog.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testAlarmDialog.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testAlarmDialog.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testEventDialog.js">calendar/test/mozmill/eventDialog/testEventDialog.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testEventDialog.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testEventDialog.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testEventDialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testEventDialogSize.js">calendar/test/mozmill/eventDialog/testEventDialogSize.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testEventDialogSize.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testEventDialogSize.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testEventDialogSize.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testUTF8.js">calendar/test/mozmill/eventDialog/testUTF8.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testUTF8.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testUTF8.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/eventDialog/testUTF8.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/invitations/message-containing-event.eml">calendar/test/mozmill/invitations/message-containing-event.eml</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/invitations/message-containing-event.eml">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/invitations/message-containing-event.eml">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/invitations/message-containing-event.eml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/invitations/test-imip-bar-eml.js">calendar/test/mozmill/invitations/test-imip-bar-eml.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/invitations/test-imip-bar-eml.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/invitations/test-imip-bar-eml.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/invitations/test-imip-bar-eml.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/moz.build">calendar/test/mozmill/moz.build</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/moz.build">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/moz.build">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/mozmilltests.list">calendar/test/mozmill/mozmilltests.list</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/mozmilltests.list">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/mozmilltests.list">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/mozmilltests.list">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/preferences/testAlarmDefaultValue.js">calendar/test/mozmill/preferences/testAlarmDefaultValue.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/preferences/testAlarmDefaultValue.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/preferences/testAlarmDefaultValue.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/preferences/testAlarmDefaultValue.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/preferences/testCategoryColors.js">calendar/test/mozmill/preferences/testCategoryColors.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/preferences/testCategoryColors.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/preferences/testCategoryColors.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/preferences/testCategoryColors.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js">calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js">calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js">calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js">calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js">calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/shared-modules/CalendarUtils.jsm">calendar/test/mozmill/shared-modules/CalendarUtils.jsm</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/shared-modules/CalendarUtils.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/shared-modules/CalendarUtils.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/shared-modules/CalendarUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/shared-modules/ItemEditingHelpers.jsm">calendar/test/mozmill/shared-modules/ItemEditingHelpers.jsm</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/shared-modules/ItemEditingHelpers.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/shared-modules/ItemEditingHelpers.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/shared-modules/ItemEditingHelpers.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/shared-modules/moz.build">calendar/test/mozmill/shared-modules/moz.build</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/shared-modules/moz.build">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/shared-modules/moz.build">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/shared-modules/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/testBasicFunctionality.js">calendar/test/mozmill/testBasicFunctionality.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/testBasicFunctionality.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/testBasicFunctionality.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/testBasicFunctionality.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/testLocalICS.js">calendar/test/mozmill/testLocalICS.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/testLocalICS.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/testLocalICS.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/testLocalICS.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/testTimezones.js">calendar/test/mozmill/testTimezones.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/testTimezones.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/testTimezones.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/testTimezones.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/testTodayPane.js">calendar/test/mozmill/testTodayPane.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/testTodayPane.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/testTodayPane.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/testTodayPane.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testDayView.js">calendar/test/mozmill/views/testDayView.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testDayView.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testDayView.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testDayView.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testMonthView.js">calendar/test/mozmill/views/testMonthView.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testMonthView.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testMonthView.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testMonthView.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testMultiweekView.js">calendar/test/mozmill/views/testMultiweekView.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testMultiweekView.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testMultiweekView.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testMultiweekView.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testTaskView.js">calendar/test/mozmill/views/testTaskView.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testTaskView.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testTaskView.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testTaskView.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testWeekView.js">calendar/test/mozmill/views/testWeekView.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testWeekView.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testWeekView.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/calendar/test/mozmill/views/testWeekView.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/moz.build">mail/test/mozmill/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/moz.build">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/moz.build">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/moz.build">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/moz.build">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/runtest.py">mail/test/mozmill/runtest.py</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/runtest.py">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/runtest.py">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/runtest.py">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/runtest.py">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/runtest.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/AccountManagerHelpers.jsm">mail/test/mozmill/shared-modules/AccountManagerHelpers.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/AccountManagerHelpers.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/AccountManagerHelpers.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/AccountManagerHelpers.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/AccountManagerHelpers.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/AccountManagerHelpers.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/CloudfileHelpers.jsm">mail/test/mozmill/shared-modules/CloudfileHelpers.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/CloudfileHelpers.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/CloudfileHelpers.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/CloudfileHelpers.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/CloudfileHelpers.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/CloudfileHelpers.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/ComposeHelpers.jsm">mail/test/mozmill/shared-modules/ComposeHelpers.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/ComposeHelpers.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/ComposeHelpers.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/ComposeHelpers.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/ComposeHelpers.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/ComposeHelpers.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/ContentTabHelpers.jsm">mail/test/mozmill/shared-modules/ContentTabHelpers.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/ContentTabHelpers.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/ContentTabHelpers.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/ContentTabHelpers.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/ContentTabHelpers.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/ContentTabHelpers.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/CustomizationHelpers.jsm">mail/test/mozmill/shared-modules/CustomizationHelpers.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/CustomizationHelpers.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/CustomizationHelpers.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/CustomizationHelpers.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/CustomizationHelpers.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/CustomizationHelpers.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/FolderDisplayHelpers.jsm">mail/test/mozmill/shared-modules/FolderDisplayHelpers.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/FolderDisplayHelpers.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/FolderDisplayHelpers.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/FolderDisplayHelpers.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/FolderDisplayHelpers.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/FolderDisplayHelpers.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/JunkHelpers.jsm">mail/test/mozmill/shared-modules/JunkHelpers.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/JunkHelpers.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/JunkHelpers.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/JunkHelpers.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/JunkHelpers.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/JunkHelpers.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/MessageHelpers.jsm">mail/test/mozmill/shared-modules/MessageHelpers.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/MessageHelpers.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/MessageHelpers.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/MessageHelpers.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/MessageHelpers.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/MessageHelpers.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/MouseEventHelpers.jsm">mail/test/mozmill/shared-modules/MouseEventHelpers.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/MouseEventHelpers.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/MouseEventHelpers.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/MouseEventHelpers.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/MouseEventHelpers.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/MouseEventHelpers.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/NewMailAccountHelpers.jsm">mail/test/mozmill/shared-modules/NewMailAccountHelpers.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/NewMailAccountHelpers.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/NewMailAccountHelpers.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/NewMailAccountHelpers.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/NewMailAccountHelpers.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/NewMailAccountHelpers.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/PrefTabHelpers.jsm">mail/test/mozmill/shared-modules/PrefTabHelpers.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/PrefTabHelpers.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/PrefTabHelpers.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/PrefTabHelpers.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/PrefTabHelpers.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/PrefTabHelpers.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/WindowHelpers.jsm">mail/test/mozmill/shared-modules/WindowHelpers.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/WindowHelpers.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/WindowHelpers.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/WindowHelpers.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/WindowHelpers.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/mozmill/shared-modules/WindowHelpers.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/__init__.py">mail/test/resources/mozmill/mozmill/__init__.py</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/__init__.py">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/__init__.py">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/__init__.py">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/__init__.py">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/__init__.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/bootstrap.js">mail/test/resources/mozmill/mozmill/extension/bootstrap.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/bootstrap.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/bootstrap.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/bootstrap.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/bootstrap.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/bootstrap.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/controller.jsm">mail/test/resources/mozmill/mozmill/extension/content/modules/controller.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/controller.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/controller.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/controller.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/controller.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/controller.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/elementslib.jsm">mail/test/resources/mozmill/mozmill/extension/content/modules/elementslib.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/elementslib.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/elementslib.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/elementslib.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/elementslib.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/elementslib.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/events.jsm">mail/test/resources/mozmill/mozmill/extension/content/modules/events.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/events.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/events.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/events.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/events.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/events.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/frame.jsm">mail/test/resources/mozmill/mozmill/extension/content/modules/frame.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/frame.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/frame.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/frame.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/frame.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/frame.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/init.jsm">mail/test/resources/mozmill/mozmill/extension/content/modules/init.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/init.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/init.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/init.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/init.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/init.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/jum.jsm">mail/test/resources/mozmill/mozmill/extension/content/modules/jum.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/jum.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/jum.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/jum.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/jum.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/jum.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/mozmill.jsm">mail/test/resources/mozmill/mozmill/extension/content/modules/mozmill.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/mozmill.jsm">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/mozmill.jsm">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/mozmill.jsm">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/mozmill.jsm">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/modules/mozmill.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/overlay.js">mail/test/resources/mozmill/mozmill/extension/content/overlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/overlay.js">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/overlay.js">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/overlay.js">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/overlay.js">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/mozmill/extension/content/overlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/setup.py">mail/test/resources/mozmill/setup.py</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/setup.py">file</a> |
<a href="/comm-central/annotate/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/setup.py">annotate</a> |
<a href="/comm-central/diff/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/setup.py">diff</a> |
<a href="/comm-central/comparison/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/setup.py">comparison</a> |
<a href="/comm-central/log/2a2928f94f6b39b028488fe6b4e953771642979a/mail/test/resources/mozmill/setup.py">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/.eslintrc.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/.eslintrc.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -103,11 +103,15 @@ module.exports = {</span>
<a href="#l1.4"></a><span id="l1.4">             vars: &quot;local&quot;,</span>
<a href="#l1.5"></a><span id="l1.5">           },</span>
<a href="#l1.6"></a><span id="l1.6">         ],</span>
<a href="#l1.7"></a><span id="l1.7">       },</span>
<a href="#l1.8"></a><span id="l1.8">     },</span>
<a href="#l1.9"></a><span id="l1.9">     {</span>
<a href="#l1.10"></a><span id="l1.10">       ...browserTestConfig,</span>
<a href="#l1.11"></a><span id="l1.11">       files: browserTestPaths.map(path =&gt; `${path}**`),</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+      rules: {</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+        &quot;func-names&quot;: &quot;off&quot;,</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+        &quot;mozilla/import-headjs-globals&quot;: &quot;error&quot;,</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+      },</span>
<a href="#l1.16"></a><span id="l1.16">     },</span>
<a href="#l1.17"></a><span id="l1.17">   ],</span>
<a href="#l1.18"></a><span id="l1.18"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/.eslintrc.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/.eslintrc.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -383,19 +383,16 @@ module.exports = {</span>
<a href="#l2.4"></a><span id="l2.4">     &quot;consistent-this&quot;: [2, &quot;self&quot;],</span>
<a href="#l2.5"></a><span id="l2.5"> </span>
<a href="#l2.6"></a><span id="l2.6">     // Disallow unnecessary .call() and .apply()</span>
<a href="#l2.7"></a><span id="l2.7">     &quot;no-useless-call&quot;: 2,</span>
<a href="#l2.8"></a><span id="l2.8"> </span>
<a href="#l2.9"></a><span id="l2.9">     // Require dot notation when accessing properties</span>
<a href="#l2.10"></a><span id="l2.10">     &quot;dot-notation&quot;: 2,</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-    // Disallow named function expressions</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-    &quot;func-names&quot;: [2, &quot;never&quot;],</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-</span>
<a href="#l2.15"></a><span id="l2.15">     // Enforce placing object properties on separate lines</span>
<a href="#l2.16"></a><span id="l2.16">     &quot;object-property-newline&quot;: [2, { allowMultiplePropertiesPerLine: true }],</span>
<a href="#l2.17"></a><span id="l2.17"> </span>
<a href="#l2.18"></a><span id="l2.18">     // Do Not Require Object Literal Shorthand Syntax</span>
<a href="#l2.19"></a><span id="l2.19">     // (Override the parent eslintrc setting for this.)</span>
<a href="#l2.20"></a><span id="l2.20">     &quot;object-shorthand&quot;: &quot;off&quot;,</span>
<a href="#l2.21"></a><span id="l2.21"> </span>
<a href="#l2.22"></a><span id="l2.22">     // Disallow whitespace before properties</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/lightning/Makefile.in</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/lightning/Makefile.in</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -19,25 +19,15 @@ ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l3.4"></a><span id="l3.4"> 	$(NSINSTALL) -D $(final_dest)</span>
<a href="#l3.5"></a><span id="l3.5"> 	$(call copy_dir,$(FINAL_TARGET),$(final_dest))</span>
<a href="#l3.6"></a><span id="l3.6"> else</span>
<a href="#l3.7"></a><span id="l3.7"> 	$(NSINSTALL) -D $(final_parent)</span>
<a href="#l3.8"></a><span id="l3.8"> 	ln -s $(ABS_DIST)/xpi-stage/lightning $(final_dest)</span>
<a href="#l3.9"></a><span id="l3.9"> endif</span>
<a href="#l3.10"></a><span id="l3.10"> endif # MOZ_ARTIFACT_BUILDS</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-PKG_STAGE = $(DIST)/test-stage</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineminus">-# stage mozmill tests and shared modules. Cross your fingers that there are no</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineminus">-# name conflicts between calendar/ and mail/</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineminus">-stage-mozmill:</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineminus">-	$(NSINSTALL) -D $(PKG_STAGE)/mozmill/shared-modules</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineminus">-	(cd $(commtopsrcdir)/calendar/test/mozmill &amp;&amp; tar $(TAR_CREATE_FLAGS) - `cat $(commtopsrcdir)/calendar/test/mozmill/mozmilltests.list`) | (cd $(PKG_STAGE)/mozmill &amp;&amp; tar -xf -)</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineminus">-	(cd $(commtopsrcdir)/calendar/test/mozmill/shared-modules &amp;&amp; tar $(TAR_CREATE_FLAGS) - *) | (cd $(PKG_STAGE)/mozmill/shared-modules &amp;&amp; tar -xf -)</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineminus">-	$(call py_action,buildlist,$(PKG_STAGE)/mozmill/mozmilltests.list $(shell cat $(commtopsrcdir)/calendar/test/mozmill/mozmilltests.list))</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineminus">-</span>
<a href="#l3.22"></a><span id="l3.22"> # This is the target that should be called externally</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineminus">-stage-package: stage-mozmill</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineplus">+stage-package:</span>
<a href="#l3.25"></a><span id="l3.25"> ifdef MOZ_ARTIFACT_BUILDS</span>
<a href="#l3.26"></a><span id="l3.26"> 	$(PYTHON) -u $(MOZILLA_DIR)/build/upload.py $(DIST)/xpi-stage/$(XPI_PKGNAME).xpi</span>
<a href="#l3.27"></a><span id="l3.27"> else</span>
<a href="#l3.28"></a><span id="l3.28"> 	$(PYTHON) -u $(MOZILLA_DIR)/build/upload.py $(final_parent)/$(XPI_PKGNAME).xpi</span>
<a href="#l3.29"></a><span id="l3.29"> endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/test/browser/browser.ini</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/test/browser/browser.ini</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -7,11 +7,15 @@ prefs =</span>
<a href="#l4.4"></a><span id="l4.4">   mail.provider.suppress_dialog_on_startup=true</span>
<a href="#l4.5"></a><span id="l4.5">   mail.spotlight.firstRunDone=true</span>
<a href="#l4.6"></a><span id="l4.6">   mail.winsearch.firstRunDone=true</span>
<a href="#l4.7"></a><span id="l4.7">   mailnews.start_page.override_url=about:blank</span>
<a href="#l4.8"></a><span id="l4.8">   mailnews.start_page.url=about:blank</span>
<a href="#l4.9"></a><span id="l4.9"> subsuite = thunderbird</span>
<a href="#l4.10"></a><span id="l4.10"> support-files = data/**</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+[browser_basicFunctionality.js]</span>
<a href="#l4.13"></a><span id="l4.13"> [browser_calendarList.js]</span>
<a href="#l4.14"></a><span id="l4.14"> [browser_import.js]</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+[browser_localICS.js]</span>
<a href="#l4.16"></a><span id="l4.16"> [browser_tabs.js]</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+[browser_timezones.js]</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+[browser_todayPane.js]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1">old mode 100755</span>
<a href="#l5.2"></a><span id="l5.2">new mode 100644</span>
<a href="#l5.3"></a><span id="l5.3">rename from calendar/test/mozmill/testBasicFunctionality.js</span>
<a href="#l5.4"></a><span id="l5.4">rename to calendar/test/browser/browser_basicFunctionality.js</span>
<a href="#l5.5"></a><span id="l5.5" class="difflineminus">--- a/calendar/test/mozmill/testBasicFunctionality.js</span>
<a href="#l5.6"></a><span id="l5.6" class="difflineplus">+++ b/calendar/test/browser/browser_basicFunctionality.js</span>
<a href="#l5.7"></a><span id="l5.7" class="difflineat">@@ -1,40 +1,37 @@</span>
<a href="#l5.8"></a><span id="l5.8"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l5.9"></a><span id="l5.9">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l5.10"></a><span id="l5.10">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l5.11"></a><span id="l5.11"> </span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+var {</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineplus">+  CALENDARLIST,</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineplus">+  CALENDAR_PANEL,</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineplus">+  DAYBOX,</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineplus">+  DAY_VIEW,</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineplus">+  MINIMONTH,</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineplus">+  TIMEOUT_MODAL_DIALOG,</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineplus">+  deleteCalendars,</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineplus">+  handleNewCalendarWizard,</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineplus">+  helpersForController,</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineplus">+  switchToView,</span>
<a href="#l5.26"></a><span id="l5.26" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l5.27"></a><span id="l5.27"> var { plan_for_modal_dialog, wait_for_modal_dialog } = ChromeUtils.import(</span>
<a href="#l5.28"></a><span id="l5.28">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l5.29"></a><span id="l5.29"> );</span>
<a href="#l5.30"></a><span id="l5.30"> </span>
<a href="#l5.31"></a><span id="l5.31"> var { cal } = ChromeUtils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l5.32"></a><span id="l5.32"> </span>
<a href="#l5.33"></a><span id="l5.33" class="difflineminus">-var TIMEOUT_MODAL_DIALOG, CALENDARNAME, CALENDAR_PANEL, DAY_VIEW, DAYBOX, MINIMONTH, CALENDARLIST;</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineminus">-var helpersForController, switchToView, deleteCalendars, handleNewCalendarWizard;</span>
<a href="#l5.35"></a><span id="l5.35" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineplus">+var { eid, lookup } = helpersForController(controller);</span>
<a href="#l5.37"></a><span id="l5.37"> </span>
<a href="#l5.38"></a><span id="l5.38" class="difflineminus">-function setupModule(module) {</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l5.40"></a><span id="l5.40" class="difflineminus">-  ({</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineminus">-    TIMEOUT_MODAL_DIALOG,</span>
<a href="#l5.42"></a><span id="l5.42" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l5.43"></a><span id="l5.43" class="difflineminus">-    CALENDAR_PANEL,</span>
<a href="#l5.44"></a><span id="l5.44" class="difflineminus">-    DAY_VIEW,</span>
<a href="#l5.45"></a><span id="l5.45" class="difflineminus">-    DAYBOX,</span>
<a href="#l5.46"></a><span id="l5.46" class="difflineminus">-    MINIMONTH,</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineminus">-    CALENDARLIST,</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineminus">-    helpersForController,</span>
<a href="#l5.49"></a><span id="l5.49" class="difflineminus">-    switchToView,</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineminus">-    deleteCalendars,</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineminus">-    handleNewCalendarWizard,</span>
<a href="#l5.52"></a><span id="l5.52" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l5.53"></a><span id="l5.53" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l5.54"></a><span id="l5.54" class="difflineminus">-}</span>
<a href="#l5.55"></a><span id="l5.55" class="difflineminus">-</span>
<a href="#l5.56"></a><span id="l5.56" class="difflineminus">-function testSmokeTest() {</span>
<a href="#l5.57"></a><span id="l5.57" class="difflineplus">+add_task(function testBasicFunctionality() {</span>
<a href="#l5.58"></a><span id="l5.58">   let dateFormatter = cal.getDateFormatter();</span>
<a href="#l5.59"></a><span id="l5.59"> </span>
<a href="#l5.60"></a><span id="l5.60">   // Check for minimonth.</span>
<a href="#l5.61"></a><span id="l5.61">   controller.waitForElement(eid(&quot;calMinimonth&quot;));</span>
<a href="#l5.62"></a><span id="l5.62">   // Every month has a first.</span>
<a href="#l5.63"></a><span id="l5.63">   controller.assertNode(</span>
<a href="#l5.64"></a><span id="l5.64">     lookup(`</span>
<a href="#l5.65"></a><span id="l5.65">         ${MINIMONTH}/{&quot;class&quot;:&quot;minimonth-calendar minimonth-cal-box&quot;}/[1]/{&quot;aria-label&quot;:&quot;1&quot;}</span>
<a href="#l5.66"></a><span id="l5.66" class="difflineat">@@ -86,13 +83,13 @@ function testSmokeTest() {</span>
<a href="#l5.67"></a><span id="l5.67">   // Create test calendar.</span>
<a href="#l5.68"></a><span id="l5.68">   plan_for_modal_dialog(&quot;Calendar:NewCalendarWizard&quot;, wizard =&gt; {</span>
<a href="#l5.69"></a><span id="l5.69">     handleNewCalendarWizard(wizard, CALENDARNAME);</span>
<a href="#l5.70"></a><span id="l5.70">   });</span>
<a href="#l5.71"></a><span id="l5.71">   let calendarList = lookup(CALENDARLIST);</span>
<a href="#l5.72"></a><span id="l5.72">   // This double-click must be inside the list but below the list items.</span>
<a href="#l5.73"></a><span id="l5.73">   controller.doubleClick(calendarList);</span>
<a href="#l5.74"></a><span id="l5.74">   wait_for_modal_dialog(&quot;Calendar:NewCalendarWizard&quot;, TIMEOUT_MODAL_DIALOG);</span>
<a href="#l5.75"></a><span id="l5.75" class="difflineminus">-}</span>
<a href="#l5.76"></a><span id="l5.76" class="difflineplus">+});</span>
<a href="#l5.77"></a><span id="l5.77"> </span>
<a href="#l5.78"></a><span id="l5.78" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l5.79"></a><span id="l5.79" class="difflineplus">+registerCleanupFunction(function teardownModule() {</span>
<a href="#l5.80"></a><span id="l5.80">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l5.81"></a><span id="l5.81" class="difflineminus">-}</span>
<a href="#l5.82"></a><span id="l5.82" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1">old mode 100755</span>
<a href="#l6.2"></a><span id="l6.2">new mode 100644</span>
<a href="#l6.3"></a><span id="l6.3">rename from calendar/test/mozmill/testLocalICS.js</span>
<a href="#l6.4"></a><span id="l6.4">rename to calendar/test/browser/browser_localICS.js</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineminus">--- a/calendar/test/mozmill/testLocalICS.js</span>
<a href="#l6.6"></a><span id="l6.6" class="difflineplus">+++ b/calendar/test/browser/browser_localICS.js</span>
<a href="#l6.7"></a><span id="l6.7" class="difflineat">@@ -1,61 +1,57 @@</span>
<a href="#l6.8"></a><span id="l6.8"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l6.9"></a><span id="l6.9">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l6.10"></a><span id="l6.10">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+var {</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineplus">+  EVENT_BOX,</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineplus">+  TIMEOUT_MODAL_DIALOG,</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineplus">+  deleteCalendars,</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineplus">+  handleNewCalendarWizard,</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineplus">+  helpersForController,</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineplus">+var { setData } = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;);</span>
<a href="#l6.24"></a><span id="l6.24"> var { plan_for_modal_dialog, wait_for_modal_dialog } = ChromeUtils.import(</span>
<a href="#l6.25"></a><span id="l6.25">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l6.26"></a><span id="l6.26"> );</span>
<a href="#l6.27"></a><span id="l6.27"> </span>
<a href="#l6.28"></a><span id="l6.28"> var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l6.29"></a><span id="l6.29"> </span>
<a href="#l6.30"></a><span id="l6.30" class="difflineminus">-var TIMEOUT_MODAL_DIALOG, CANVAS_BOX, EVENT_BOX;</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">-var helpersForController, invokeEventDialog, deleteCalendars, handleNewCalendarWizard;</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineminus">-var setData;</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineplus">+var { lookupEventBox } = helpersForController(controller);</span>
<a href="#l6.35"></a><span id="l6.35"> </span>
<a href="#l6.36"></a><span id="l6.36"> const HOUR = 8;</span>
<a href="#l6.37"></a><span id="l6.37" class="difflineminus">-var calendarName, calendarTitle, calendarFile;</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineminus">-</span>
<a href="#l6.39"></a><span id="l6.39" class="difflineminus">-function setupModule(module) {</span>
<a href="#l6.40"></a><span id="l6.40" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l6.41"></a><span id="l6.41"> </span>
<a href="#l6.42"></a><span id="l6.42" class="difflineminus">-  ({</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineminus">-    TIMEOUT_MODAL_DIALOG,</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l6.45"></a><span id="l6.45" class="difflineminus">-    EVENT_BOX,</span>
<a href="#l6.46"></a><span id="l6.46" class="difflineminus">-    helpersForController,</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineminus">-    deleteCalendars,</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineminus">-    handleNewCalendarWizard,</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l6.52"></a><span id="l6.52" class="difflineplus">+// Unique name needed as deleting a calendar only unsubscribes from it and</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineplus">+// if same file were used on next testrun then previously created event</span>
<a href="#l6.54"></a><span id="l6.54" class="difflineplus">+// would show up.</span>
<a href="#l6.55"></a><span id="l6.55" class="difflineplus">+var calendarName = String(Date.now());</span>
<a href="#l6.56"></a><span id="l6.56" class="difflineplus">+var calendarFile = Services.dirsvc.get(&quot;TmpD&quot;, Ci.nsIFile);</span>
<a href="#l6.57"></a><span id="l6.57" class="difflineplus">+calendarFile.append(calendarName + &quot;.ics&quot;);</span>
<a href="#l6.58"></a><span id="l6.58"> </span>
<a href="#l6.59"></a><span id="l6.59" class="difflineminus">-  ({ setData } = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;));</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineminus">-  // Unique name needed as deleting a calendar only unsubscribes from it and</span>
<a href="#l6.61"></a><span id="l6.61" class="difflineminus">-  // if same file were used on next testrun then previously created event</span>
<a href="#l6.62"></a><span id="l6.62" class="difflineminus">-  // would show up.</span>
<a href="#l6.63"></a><span id="l6.63" class="difflineminus">-  calendarName = calendarTitle = new Date().getTime() + &quot;&quot;;</span>
<a href="#l6.64"></a><span id="l6.64" class="difflineminus">-  calendarFile = Services.dirsvc.get(&quot;TmpD&quot;, Ci.nsIFile);</span>
<a href="#l6.65"></a><span id="l6.65" class="difflineminus">-  calendarFile.append(calendarName + &quot;.ics&quot;);</span>
<a href="#l6.66"></a><span id="l6.66" class="difflineminus">-}</span>
<a href="#l6.67"></a><span id="l6.67" class="difflineplus">+add_task(async function testLocalICS() {</span>
<a href="#l6.68"></a><span id="l6.68" class="difflineplus">+  await setCalendarView(&quot;day&quot;);</span>
<a href="#l6.69"></a><span id="l6.69"> </span>
<a href="#l6.70"></a><span id="l6.70" class="difflineminus">-function testLocalICS() {</span>
<a href="#l6.71"></a><span id="l6.71">   plan_for_modal_dialog(&quot;Calendar:NewCalendarWizard&quot;, wizard =&gt; {</span>
<a href="#l6.72"></a><span id="l6.72">     handleNewCalendarWizard(wizard, calendarName, { network: { format: &quot;ics&quot; } });</span>
<a href="#l6.73"></a><span id="l6.73">   });</span>
<a href="#l6.74"></a><span id="l6.74">   controller.mainMenu.click(&quot;#ltnNewCalendar&quot;);</span>
<a href="#l6.75"></a><span id="l6.75">   wait_for_modal_dialog(&quot;Calendar:NewCalendarWizard&quot;, TIMEOUT_MODAL_DIALOG);</span>
<a href="#l6.76"></a><span id="l6.76"> </span>
<a href="#l6.77"></a><span id="l6.77">   // Create new event.</span>
<a href="#l6.78"></a><span id="l6.78">   let box = lookupEventBox(&quot;day&quot;, CANVAS_BOX, null, 1, HOUR);</span>
<a href="#l6.79"></a><span id="l6.79">   invokeEventDialog(controller, box, (event, iframe) =&gt; {</span>
<a href="#l6.80"></a><span id="l6.80">     let { eid: eventid } = helpersForController(event);</span>
<a href="#l6.81"></a><span id="l6.81"> </span>
<a href="#l6.82"></a><span id="l6.82" class="difflineminus">-    setData(event, iframe, { title: calendarTitle, calendar: calendarName });</span>
<a href="#l6.83"></a><span id="l6.83" class="difflineplus">+    setData(event, iframe, { title: calendarName, calendar: calendarName });</span>
<a href="#l6.84"></a><span id="l6.84"> </span>
<a href="#l6.85"></a><span id="l6.85">     // save</span>
<a href="#l6.86"></a><span id="l6.86">     event.click(eventid(&quot;button-saveandclose&quot;));</span>
<a href="#l6.87"></a><span id="l6.87">   });</span>
<a href="#l6.88"></a><span id="l6.88"> </span>
<a href="#l6.89"></a><span id="l6.89">   // Assert presence in view.</span>
<a href="#l6.90"></a><span id="l6.90">   controller.waitForElement(</span>
<a href="#l6.91"></a><span id="l6.91">     lookupEventBox(</span>
<a href="#l6.92"></a><span id="l6.92" class="difflineat">@@ -84,14 +80,14 @@ function testLocalICS() {</span>
<a href="#l6.93"></a><span id="l6.93">   // Read the calendar file and check for the summary.</span>
<a href="#l6.94"></a><span id="l6.94">   fstream.init(calendarFile, -1, 0, 0);</span>
<a href="#l6.95"></a><span id="l6.95">   cstream.init(fstream, &quot;UTF-8&quot;, 0, 0);</span>
<a href="#l6.96"></a><span id="l6.96"> </span>
<a href="#l6.97"></a><span id="l6.97">   let str = {};</span>
<a href="#l6.98"></a><span id="l6.98">   cstream.readString(-1, str);</span>
<a href="#l6.99"></a><span id="l6.99">   cstream.close();</span>
<a href="#l6.100"></a><span id="l6.100"> </span>
<a href="#l6.101"></a><span id="l6.101" class="difflineminus">-  controller.assert(() =&gt; str.value.includes(&quot;SUMMARY:&quot; + calendarTitle));</span>
<a href="#l6.102"></a><span id="l6.102" class="difflineminus">-}</span>
<a href="#l6.103"></a><span id="l6.103" class="difflineplus">+  controller.assert(() =&gt; str.value.includes(&quot;SUMMARY:&quot; + calendarName));</span>
<a href="#l6.104"></a><span id="l6.104" class="difflineplus">+});</span>
<a href="#l6.105"></a><span id="l6.105"> </span>
<a href="#l6.106"></a><span id="l6.106" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l6.107"></a><span id="l6.107" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l6.108"></a><span id="l6.108">   deleteCalendars(controller, calendarName);</span>
<a href="#l6.109"></a><span id="l6.109" class="difflineminus">-}</span>
<a href="#l6.110"></a><span id="l6.110" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1">old mode 100755</span>
<a href="#l7.2"></a><span id="l7.2">new mode 100644</span>
<a href="#l7.3"></a><span id="l7.3">rename from calendar/test/mozmill/testTimezones.js</span>
<a href="#l7.4"></a><span id="l7.4">rename to calendar/test/browser/browser_timezones.js</span>
<a href="#l7.5"></a><span id="l7.5" class="difflineminus">--- a/calendar/test/mozmill/testTimezones.js</span>
<a href="#l7.6"></a><span id="l7.6" class="difflineplus">+++ b/calendar/test/browser/browser_timezones.js</span>
<a href="#l7.7"></a><span id="l7.7" class="difflineat">@@ -1,16 +1,33 @@</span>
<a href="#l7.8"></a><span id="l7.8"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l7.9"></a><span id="l7.9">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l7.10"></a><span id="l7.10">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-var CANVAS_BOX, DAY_VIEW;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-var helpersForController, invokeEventDialog, switchToView, goToDate;</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineminus">-var findEventsInNode, viewForward, viewBack;</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineminus">-var setData;</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineplus">+requestLongerTimeout(3);</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineplus">+</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineplus">+</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineplus">+var {</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineplus">+  DAY_VIEW,</span>
<a href="#l7.23"></a><span id="l7.23" class="difflineplus">+  helpersForController,</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineplus">+  switchToView,</span>
<a href="#l7.26"></a><span id="l7.26" class="difflineplus">+  goToDate,</span>
<a href="#l7.27"></a><span id="l7.27" class="difflineplus">+  findEventsInNode,</span>
<a href="#l7.28"></a><span id="l7.28" class="difflineplus">+  viewForward,</span>
<a href="#l7.29"></a><span id="l7.29" class="difflineplus">+  viewBack,</span>
<a href="#l7.30"></a><span id="l7.30" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineplus">+var { setData } = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;);</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineplus">+var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineplus">+</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineplus">+var { eid, lookupEventBox } = helpersForController(controller);</span>
<a href="#l7.37"></a><span id="l7.37"> </span>
<a href="#l7.38"></a><span id="l7.38"> var DATES = [</span>
<a href="#l7.39"></a><span id="l7.39">   [2009, 1, 1],</span>
<a href="#l7.40"></a><span id="l7.40">   [2009, 4, 2],</span>
<a href="#l7.41"></a><span id="l7.41">   [2009, 4, 16],</span>
<a href="#l7.42"></a><span id="l7.42">   [2009, 4, 30],</span>
<a href="#l7.43"></a><span id="l7.43">   [2009, 7, 2],</span>
<a href="#l7.44"></a><span id="l7.44">   [2009, 10, 15],</span>
<a href="#l7.45"></a><span id="l7.45" class="difflineat">@@ -24,41 +41,22 @@ var TIMEZONES = [</span>
<a href="#l7.46"></a><span id="l7.46">   &quot;America/Phoenix&quot;,</span>
<a href="#l7.47"></a><span id="l7.47">   &quot;America/Los_Angeles&quot;,</span>
<a href="#l7.48"></a><span id="l7.48">   &quot;America/Argentina/Buenos_Aires&quot;,</span>
<a href="#l7.49"></a><span id="l7.49">   &quot;Europe/Paris&quot;,</span>
<a href="#l7.50"></a><span id="l7.50">   &quot;Asia/Kathmandu&quot;,</span>
<a href="#l7.51"></a><span id="l7.51">   &quot;Australia/Adelaide&quot;,</span>
<a href="#l7.52"></a><span id="l7.52"> ];</span>
<a href="#l7.53"></a><span id="l7.53"> </span>
<a href="#l7.54"></a><span id="l7.54" class="difflineminus">-var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineplus">+add_task(async function testTimezones1_SetGMT() {</span>
<a href="#l7.56"></a><span id="l7.56" class="difflineplus">+  Services.prefs.setStringPref(&quot;calendar.timezone.local&quot;, &quot;Europe/London&quot;);</span>
<a href="#l7.57"></a><span id="l7.57" class="difflineplus">+  await setCalendarView(&quot;day&quot;);</span>
<a href="#l7.58"></a><span id="l7.58" class="difflineplus">+});</span>
<a href="#l7.59"></a><span id="l7.59"> </span>
<a href="#l7.60"></a><span id="l7.60" class="difflineminus">-function setupModule(module) {</span>
<a href="#l7.61"></a><span id="l7.61" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l7.62"></a><span id="l7.62" class="difflineminus">-  ({</span>
<a href="#l7.63"></a><span id="l7.63" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l7.64"></a><span id="l7.64" class="difflineminus">-    DAY_VIEW,</span>
<a href="#l7.65"></a><span id="l7.65" class="difflineminus">-    helpersForController,</span>
<a href="#l7.66"></a><span id="l7.66" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l7.67"></a><span id="l7.67" class="difflineminus">-    switchToView,</span>
<a href="#l7.68"></a><span id="l7.68" class="difflineminus">-    goToDate,</span>
<a href="#l7.69"></a><span id="l7.69" class="difflineminus">-    findEventsInNode,</span>
<a href="#l7.70"></a><span id="l7.70" class="difflineminus">-    viewForward,</span>
<a href="#l7.71"></a><span id="l7.71" class="difflineminus">-    viewBack,</span>
<a href="#l7.72"></a><span id="l7.72" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l7.73"></a><span id="l7.73" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l7.74"></a><span id="l7.74" class="difflineminus">-</span>
<a href="#l7.75"></a><span id="l7.75" class="difflineminus">-  ({ setData } = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;));</span>
<a href="#l7.76"></a><span id="l7.76" class="difflineminus">-}</span>
<a href="#l7.77"></a><span id="l7.77" class="difflineminus">-</span>
<a href="#l7.78"></a><span id="l7.78" class="difflineminus">-function testTimezones1_SetGMT() {</span>
<a href="#l7.79"></a><span id="l7.79" class="difflineminus">-  Services.prefs.setStringPref(&quot;calendar.timezone.local&quot;, &quot;Europe/London&quot;);</span>
<a href="#l7.80"></a><span id="l7.80" class="difflineminus">-}</span>
<a href="#l7.81"></a><span id="l7.81" class="difflineminus">-</span>
<a href="#l7.82"></a><span id="l7.82" class="difflineminus">-function testTimezones2_CreateEvents() {</span>
<a href="#l7.83"></a><span id="l7.83" class="difflineplus">+add_task(function testTimezones2_CreateEvents() {</span>
<a href="#l7.84"></a><span id="l7.84">   goToDate(controller, 2009, 1, 1);</span>
<a href="#l7.85"></a><span id="l7.85"> </span>
<a href="#l7.86"></a><span id="l7.86">   // Create weekly recurring events in all TIMEZONES.</span>
<a href="#l7.87"></a><span id="l7.87">   let times = [[4, 30], [5, 0], [3, 0], [3, 0], [9, 0], [14, 0], [19, 45], [1, 30]];</span>
<a href="#l7.88"></a><span id="l7.88">   let time = new Date();</span>
<a href="#l7.89"></a><span id="l7.89">   for (let i = 0; i &lt; TIMEZONES.length; i++) {</span>
<a href="#l7.90"></a><span id="l7.90">     let eventBox = lookupEventBox(&quot;day&quot;, CANVAS_BOX, null, 1, i + 11);</span>
<a href="#l7.91"></a><span id="l7.91">     invokeEventDialog(controller, eventBox, (event, iframe) =&gt; {</span>
<a href="#l7.92"></a><span id="l7.92" class="difflineat">@@ -74,38 +72,38 @@ function testTimezones2_CreateEvents() {</span>
<a href="#l7.93"></a><span id="l7.93">         timezone: TIMEZONES[i],</span>
<a href="#l7.94"></a><span id="l7.94">       });</span>
<a href="#l7.95"></a><span id="l7.95"> </span>
<a href="#l7.96"></a><span id="l7.96">       // save</span>
<a href="#l7.97"></a><span id="l7.97">       let { eid: eventid } = helpersForController(event);</span>
<a href="#l7.98"></a><span id="l7.98">       event.click(eventid(&quot;button-saveandclose&quot;));</span>
<a href="#l7.99"></a><span id="l7.99">     });</span>
<a href="#l7.100"></a><span id="l7.100">   }</span>
<a href="#l7.101"></a><span id="l7.101" class="difflineminus">-}</span>
<a href="#l7.102"></a><span id="l7.102" class="difflineplus">+});</span>
<a href="#l7.103"></a><span id="l7.103"> </span>
<a href="#l7.104"></a><span id="l7.104" class="difflineminus">-function testTimezones3_checkStJohns() {</span>
<a href="#l7.105"></a><span id="l7.105" class="difflineplus">+add_task(function testTimezones3_checkStJohns() {</span>
<a href="#l7.106"></a><span id="l7.106">   Services.prefs.setStringPref(&quot;calendar.timezone.local&quot;, &quot;America/St_Johns&quot;);</span>
<a href="#l7.107"></a><span id="l7.107">   let times = [</span>
<a href="#l7.108"></a><span id="l7.108">     [[4, 30], [5, 30], [6, 30], [7, 30], [8, 30], [9, 30], [10, 30], [11, 30]],</span>
<a href="#l7.109"></a><span id="l7.109">     [[4, 30], [6, 30], [7, 30], [7, 30], [9, 30], [9, 30], [11, 30], [12, 30]],</span>
<a href="#l7.110"></a><span id="l7.110">     [[4, 30], [6, 30], [7, 30], [7, 30], [9, 30], [9, 30], [11, 30], [13, 30]],</span>
<a href="#l7.111"></a><span id="l7.111">     [[4, 30], [6, 30], [7, 30], [7, 30], [9, 30], [9, 30], [11, 30], [13, 30]],</span>
<a href="#l7.112"></a><span id="l7.112">     [[4, 30], [6, 30], [7, 30], [7, 30], [9, 30], [9, 30], [11, 30], [13, 30]],</span>
<a href="#l7.113"></a><span id="l7.113">     [[4, 30], [6, 30], [7, 30], [7, 30], [9, 30], [9, 30], [11, 30], [12, 30]],</span>
<a href="#l7.114"></a><span id="l7.114">     [[4, 30], [6, 30], [7, 30], [7, 30], [9, 30], [10, 30], [11, 30], [12, 30]],</span>
<a href="#l7.115"></a><span id="l7.115">     [[4, 30], [5, 30], [6, 30], [7, 30], [8, 30], [9, 30], [10, 30], [11, 30]],</span>
<a href="#l7.116"></a><span id="l7.116">   ];</span>
<a href="#l7.117"></a><span id="l7.117">   controller.click(eid(&quot;calendar-tab-button&quot;));</span>
<a href="#l7.118"></a><span id="l7.118">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l7.119"></a><span id="l7.119">   goToDate(controller, 2009, 1, 1);</span>
<a href="#l7.120"></a><span id="l7.120"> </span>
<a href="#l7.121"></a><span id="l7.121" class="difflineminus">-  verify(controller, DATES, TIMEZONES, times);</span>
<a href="#l7.122"></a><span id="l7.122" class="difflineminus">-}</span>
<a href="#l7.123"></a><span id="l7.123" class="difflineplus">+  verify(DATES, TIMEZONES, times);</span>
<a href="#l7.124"></a><span id="l7.124" class="difflineplus">+});</span>
<a href="#l7.125"></a><span id="l7.125"> </span>
<a href="#l7.126"></a><span id="l7.126" class="difflineminus">-function testTimezones4_checkCaracas() {</span>
<a href="#l7.127"></a><span id="l7.127" class="difflineplus">+add_task(function testTimezones4_checkCaracas() {</span>
<a href="#l7.128"></a><span id="l7.128">   Services.prefs.setStringPref(&quot;calendar.timezone.local&quot;, &quot;America/Caracas&quot;);</span>
<a href="#l7.129"></a><span id="l7.129">   // This is actually incorrect. Venezuela shifted clocks forward 30 minutes</span>
<a href="#l7.130"></a><span id="l7.130">   // in 2016, but our code doesn't handle historical timezones.</span>
<a href="#l7.131"></a><span id="l7.131">   let times = [</span>
<a href="#l7.132"></a><span id="l7.132">     [[4, 0], [5, 0], [6, 0], [7, 0], [8, 0], [9, 0], [10, 0], [11, 0]],</span>
<a href="#l7.133"></a><span id="l7.133">     [[3, 0], [5, 0], [6, 0], [6, 0], [8, 0], [8, 0], [10, 0], [11, 0]],</span>
<a href="#l7.134"></a><span id="l7.134">     [[3, 0], [5, 0], [6, 0], [6, 0], [8, 0], [8, 0], [10, 0], [12, 0]],</span>
<a href="#l7.135"></a><span id="l7.135">     [[3, 0], [5, 0], [6, 0], [6, 0], [8, 0], [8, 0], [10, 0], [12, 0]],</span>
<a href="#l7.136"></a><span id="l7.136" class="difflineat">@@ -113,136 +111,134 @@ function testTimezones4_checkCaracas() {</span>
<a href="#l7.137"></a><span id="l7.137">     [[3, 0], [5, 0], [6, 0], [6, 0], [8, 0], [8, 0], [10, 0], [11, 0]],</span>
<a href="#l7.138"></a><span id="l7.138">     [[3, 0], [5, 0], [6, 0], [6, 0], [8, 0], [9, 0], [10, 0], [11, 0]],</span>
<a href="#l7.139"></a><span id="l7.139">     [[4, 0], [5, 0], [6, 0], [7, 0], [8, 0], [9, 0], [10, 0], [11, 0]],</span>
<a href="#l7.140"></a><span id="l7.140">   ];</span>
<a href="#l7.141"></a><span id="l7.141">   controller.click(eid(&quot;calendar-tab-button&quot;));</span>
<a href="#l7.142"></a><span id="l7.142">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l7.143"></a><span id="l7.143">   goToDate(controller, 2009, 1, 1);</span>
<a href="#l7.144"></a><span id="l7.144"> </span>
<a href="#l7.145"></a><span id="l7.145" class="difflineminus">-  verify(controller, DATES, TIMEZONES, times);</span>
<a href="#l7.146"></a><span id="l7.146" class="difflineminus">-}</span>
<a href="#l7.147"></a><span id="l7.147" class="difflineplus">+  verify(DATES, TIMEZONES, times);</span>
<a href="#l7.148"></a><span id="l7.148" class="difflineplus">+});</span>
<a href="#l7.149"></a><span id="l7.149"> </span>
<a href="#l7.150"></a><span id="l7.150" class="difflineminus">-function testTimezones5_checkPhoenix() {</span>
<a href="#l7.151"></a><span id="l7.151" class="difflineplus">+add_task(function testTimezones5_checkPhoenix() {</span>
<a href="#l7.152"></a><span id="l7.152">   Services.prefs.setStringPref(&quot;calendar.timezone.local&quot;, &quot;America/Phoenix&quot;);</span>
<a href="#l7.153"></a><span id="l7.153">   let times = [</span>
<a href="#l7.154"></a><span id="l7.154">     [[1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0]],</span>
<a href="#l7.155"></a><span id="l7.155">     [[0, 0], [2, 0], [3, 0], [3, 0], [5, 0], [5, 0], [7, 0], [8, 0]],</span>
<a href="#l7.156"></a><span id="l7.156">     [[0, 0], [2, 0], [3, 0], [3, 0], [5, 0], [5, 0], [7, 0], [9, 0]],</span>
<a href="#l7.157"></a><span id="l7.157">     [[0, 0], [2, 0], [3, 0], [3, 0], [5, 0], [5, 0], [7, 0], [9, 0]],</span>
<a href="#l7.158"></a><span id="l7.158">     [[0, 0], [2, 0], [3, 0], [3, 0], [5, 0], [5, 0], [7, 0], [9, 0]],</span>
<a href="#l7.159"></a><span id="l7.159">     [[0, 0], [2, 0], [3, 0], [3, 0], [5, 0], [5, 0], [7, 0], [8, 0]],</span>
<a href="#l7.160"></a><span id="l7.160">     [[0, 0], [2, 0], [3, 0], [3, 0], [5, 0], [6, 0], [7, 0], [8, 0]],</span>
<a href="#l7.161"></a><span id="l7.161">     [[1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0]],</span>
<a href="#l7.162"></a><span id="l7.162">   ];</span>
<a href="#l7.163"></a><span id="l7.163">   controller.click(eid(&quot;calendar-tab-button&quot;));</span>
<a href="#l7.164"></a><span id="l7.164">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l7.165"></a><span id="l7.165">   goToDate(controller, 2009, 1, 1);</span>
<a href="#l7.166"></a><span id="l7.166"> </span>
<a href="#l7.167"></a><span id="l7.167" class="difflineminus">-  verify(controller, DATES, TIMEZONES, times);</span>
<a href="#l7.168"></a><span id="l7.168" class="difflineminus">-}</span>
<a href="#l7.169"></a><span id="l7.169" class="difflineplus">+  verify(DATES, TIMEZONES, times);</span>
<a href="#l7.170"></a><span id="l7.170" class="difflineplus">+});</span>
<a href="#l7.171"></a><span id="l7.171"> </span>
<a href="#l7.172"></a><span id="l7.172" class="difflineminus">-function testTimezones6_checkLosAngeles() {</span>
<a href="#l7.173"></a><span id="l7.173" class="difflineplus">+add_task(function testTimezones6_checkLosAngeles() {</span>
<a href="#l7.174"></a><span id="l7.174">   Services.prefs.setStringPref(&quot;calendar.timezone.local&quot;, &quot;America/Los_Angeles&quot;);</span>
<a href="#l7.175"></a><span id="l7.175">   let times = [</span>
<a href="#l7.176"></a><span id="l7.176">     [[0, 0], [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0]],</span>
<a href="#l7.177"></a><span id="l7.177">     [[0, 0], [2, 0], [3, 0], [3, 0], [5, 0], [5, 0], [7, 0], [8, 0]],</span>
<a href="#l7.178"></a><span id="l7.178">     [[0, 0], [2, 0], [3, 0], [3, 0], [5, 0], [5, 0], [7, 0], [9, 0]],</span>
<a href="#l7.179"></a><span id="l7.179">     [[0, 0], [2, 0], [3, 0], [3, 0], [5, 0], [5, 0], [7, 0], [9, 0]],</span>
<a href="#l7.180"></a><span id="l7.180">     [[0, 0], [2, 0], [3, 0], [3, 0], [5, 0], [5, 0], [7, 0], [9, 0]],</span>
<a href="#l7.181"></a><span id="l7.181">     [[0, 0], [2, 0], [3, 0], [3, 0], [5, 0], [5, 0], [7, 0], [8, 0]],</span>
<a href="#l7.182"></a><span id="l7.182">     [[0, 0], [2, 0], [3, 0], [3, 0], [5, 0], [6, 0], [7, 0], [8, 0]],</span>
<a href="#l7.183"></a><span id="l7.183">     [[0, 0], [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0]],</span>
<a href="#l7.184"></a><span id="l7.184">   ];</span>
<a href="#l7.185"></a><span id="l7.185">   controller.click(eid(&quot;calendar-tab-button&quot;));</span>
<a href="#l7.186"></a><span id="l7.186">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l7.187"></a><span id="l7.187">   goToDate(controller, 2009, 1, 1);</span>
<a href="#l7.188"></a><span id="l7.188"> </span>
<a href="#l7.189"></a><span id="l7.189" class="difflineminus">-  verify(controller, DATES, TIMEZONES, times);</span>
<a href="#l7.190"></a><span id="l7.190" class="difflineminus">-}</span>
<a href="#l7.191"></a><span id="l7.191" class="difflineplus">+  verify(DATES, TIMEZONES, times);</span>
<a href="#l7.192"></a><span id="l7.192" class="difflineplus">+});</span>
<a href="#l7.193"></a><span id="l7.193"> </span>
<a href="#l7.194"></a><span id="l7.194" class="difflineminus">-function testTimezones7_checkBuenosAires() {</span>
<a href="#l7.195"></a><span id="l7.195" class="difflineplus">+add_task(function testTimezones7_checkBuenosAires() {</span>
<a href="#l7.196"></a><span id="l7.196">   Services.prefs.setStringPref(&quot;calendar.timezone.local&quot;, &quot;America/Argentina/Buenos_Aires&quot;);</span>
<a href="#l7.197"></a><span id="l7.197">   let times = [</span>
<a href="#l7.198"></a><span id="l7.198">     [[5, 0], [6, 0], [7, 0], [8, 0], [9, 0], [10, 0], [11, 0], [12, 0]],</span>
<a href="#l7.199"></a><span id="l7.199">     [[4, 0], [6, 0], [7, 0], [7, 0], [9, 0], [9, 0], [11, 0], [12, 0]],</span>
<a href="#l7.200"></a><span id="l7.200">     [[4, 0], [6, 0], [7, 0], [7, 0], [9, 0], [9, 0], [11, 0], [13, 0]],</span>
<a href="#l7.201"></a><span id="l7.201">     [[4, 0], [6, 0], [7, 0], [7, 0], [9, 0], [9, 0], [11, 0], [13, 0]],</span>
<a href="#l7.202"></a><span id="l7.202">     [[4, 0], [6, 0], [7, 0], [7, 0], [9, 0], [9, 0], [11, 0], [13, 0]],</span>
<a href="#l7.203"></a><span id="l7.203">     [[4, 0], [6, 0], [7, 0], [7, 0], [9, 0], [9, 0], [11, 0], [12, 0]],</span>
<a href="#l7.204"></a><span id="l7.204">     [[4, 0], [6, 0], [7, 0], [7, 0], [9, 0], [10, 0], [11, 0], [12, 0]],</span>
<a href="#l7.205"></a><span id="l7.205">     [[5, 0], [6, 0], [7, 0], [8, 0], [9, 0], [10, 0], [11, 0], [12, 0]],</span>
<a href="#l7.206"></a><span id="l7.206">   ];</span>
<a href="#l7.207"></a><span id="l7.207">   controller.click(eid(&quot;calendar-tab-button&quot;));</span>
<a href="#l7.208"></a><span id="l7.208">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l7.209"></a><span id="l7.209">   goToDate(controller, 2009, 1, 1);</span>
<a href="#l7.210"></a><span id="l7.210"> </span>
<a href="#l7.211"></a><span id="l7.211" class="difflineminus">-  verify(controller, DATES, TIMEZONES, times);</span>
<a href="#l7.212"></a><span id="l7.212" class="difflineminus">-}</span>
<a href="#l7.213"></a><span id="l7.213" class="difflineplus">+  verify(DATES, TIMEZONES, times);</span>
<a href="#l7.214"></a><span id="l7.214" class="difflineplus">+});</span>
<a href="#l7.215"></a><span id="l7.215"> </span>
<a href="#l7.216"></a><span id="l7.216" class="difflineminus">-function testTimezones8_checkParis() {</span>
<a href="#l7.217"></a><span id="l7.217" class="difflineplus">+add_task(function testTimezones8_checkParis() {</span>
<a href="#l7.218"></a><span id="l7.218">   Services.prefs.setStringPref(&quot;calendar.timezone.local&quot;, &quot;Europe/Paris&quot;);</span>
<a href="#l7.219"></a><span id="l7.219">   let times = [</span>
<a href="#l7.220"></a><span id="l7.220">     [[9, 0], [10, 0], [11, 0], [12, 0], [13, 0], [14, 0], [15, 0], [16, 0]],</span>
<a href="#l7.221"></a><span id="l7.221">     [[9, 0], [11, 0], [12, 0], [12, 0], [14, 0], [14, 0], [16, 0], [17, 0]],</span>
<a href="#l7.222"></a><span id="l7.222">     [[9, 0], [11, 0], [12, 0], [12, 0], [14, 0], [14, 0], [16, 0], [18, 0]],</span>
<a href="#l7.223"></a><span id="l7.223">     [[9, 0], [11, 0], [12, 0], [12, 0], [14, 0], [14, 0], [16, 0], [18, 0]],</span>
<a href="#l7.224"></a><span id="l7.224">     [[9, 0], [11, 0], [12, 0], [12, 0], [14, 0], [14, 0], [16, 0], [18, 0]],</span>
<a href="#l7.225"></a><span id="l7.225">     [[9, 0], [11, 0], [12, 0], [12, 0], [14, 0], [14, 0], [16, 0], [17, 0]],</span>
<a href="#l7.226"></a><span id="l7.226">     [[8, 0], [10, 0], [11, 0], [11, 0], [13, 0], [14, 0], [15, 0], [16, 0]],</span>
<a href="#l7.227"></a><span id="l7.227">     [[9, 0], [10, 0], [11, 0], [12, 0], [13, 0], [14, 0], [15, 0], [16, 0]],</span>
<a href="#l7.228"></a><span id="l7.228">   ];</span>
<a href="#l7.229"></a><span id="l7.229">   controller.click(eid(&quot;calendar-tab-button&quot;));</span>
<a href="#l7.230"></a><span id="l7.230">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l7.231"></a><span id="l7.231">   goToDate(controller, 2009, 1, 1);</span>
<a href="#l7.232"></a><span id="l7.232"> </span>
<a href="#l7.233"></a><span id="l7.233" class="difflineminus">-  verify(controller, DATES, TIMEZONES, times);</span>
<a href="#l7.234"></a><span id="l7.234" class="difflineminus">-}</span>
<a href="#l7.235"></a><span id="l7.235" class="difflineplus">+  verify(DATES, TIMEZONES, times);</span>
<a href="#l7.236"></a><span id="l7.236" class="difflineplus">+});</span>
<a href="#l7.237"></a><span id="l7.237"> </span>
<a href="#l7.238"></a><span id="l7.238" class="difflineminus">-function testTimezones9_checkKathmandu() {</span>
<a href="#l7.239"></a><span id="l7.239" class="difflineplus">+add_task(function testTimezones9_checkKathmandu() {</span>
<a href="#l7.240"></a><span id="l7.240">   Services.prefs.setStringPref(&quot;calendar.timezone.local&quot;, &quot;Asia/Kathmandu&quot;);</span>
<a href="#l7.241"></a><span id="l7.241">   let times = [</span>
<a href="#l7.242"></a><span id="l7.242">     [[13, 45], [14, 45], [15, 45], [16, 45], [17, 45], [18, 45], [19, 45], [20, 45]],</span>
<a href="#l7.243"></a><span id="l7.243">     [[12, 45], [14, 45], [15, 45], [15, 45], [17, 45], [17, 45], [19, 45], [20, 45]],</span>
<a href="#l7.244"></a><span id="l7.244">     [[12, 45], [14, 45], [15, 45], [15, 45], [17, 45], [17, 45], [19, 45], [21, 45]],</span>
<a href="#l7.245"></a><span id="l7.245">     [[12, 45], [14, 45], [15, 45], [15, 45], [17, 45], [17, 45], [19, 45], [21, 45]],</span>
<a href="#l7.246"></a><span id="l7.246">     [[12, 45], [14, 45], [15, 45], [15, 45], [17, 45], [17, 45], [19, 45], [21, 45]],</span>
<a href="#l7.247"></a><span id="l7.247">     [[12, 45], [14, 45], [15, 45], [15, 45], [17, 45], [17, 45], [19, 45], [20, 45]],</span>
<a href="#l7.248"></a><span id="l7.248">     [[12, 45], [14, 45], [15, 45], [15, 45], [17, 45], [18, 45], [19, 45], [20, 45]],</span>
<a href="#l7.249"></a><span id="l7.249">     [[13, 45], [14, 45], [15, 45], [16, 45], [17, 45], [18, 45], [19, 45], [20, 45]],</span>
<a href="#l7.250"></a><span id="l7.250">   ];</span>
<a href="#l7.251"></a><span id="l7.251">   controller.click(eid(&quot;calendar-tab-button&quot;));</span>
<a href="#l7.252"></a><span id="l7.252">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l7.253"></a><span id="l7.253">   goToDate(controller, 2009, 1, 1);</span>
<a href="#l7.254"></a><span id="l7.254"> </span>
<a href="#l7.255"></a><span id="l7.255" class="difflineminus">-  verify(controller, DATES, TIMEZONES, times);</span>
<a href="#l7.256"></a><span id="l7.256" class="difflineminus">-}</span>
<a href="#l7.257"></a><span id="l7.257" class="difflineplus">+  verify(DATES, TIMEZONES, times);</span>
<a href="#l7.258"></a><span id="l7.258" class="difflineplus">+});</span>
<a href="#l7.259"></a><span id="l7.259"> </span>
<a href="#l7.260"></a><span id="l7.260" class="difflineminus">-function testTimezones10_checkAdelaide() {</span>
<a href="#l7.261"></a><span id="l7.261" class="difflineplus">+add_task(function testTimezones10_checkAdelaide() {</span>
<a href="#l7.262"></a><span id="l7.262">   Services.prefs.setStringPref(&quot;calendar.timezone.local&quot;, &quot;Australia/Adelaide&quot;);</span>
<a href="#l7.263"></a><span id="l7.263">   let times = [</span>
<a href="#l7.264"></a><span id="l7.264">     [[18, 30], [19, 30], [20, 30], [21, 30], [22, 30], [23, 30], [0, 30, +1], [1, 30, +1]],</span>
<a href="#l7.265"></a><span id="l7.265">     [[17, 30], [19, 30], [20, 30], [20, 30], [22, 30], [22, 30], [0, 30, +1], [1, 30, +1]],</span>
<a href="#l7.266"></a><span id="l7.266">     [[16, 30], [18, 30], [19, 30], [19, 30], [21, 30], [21, 30], [23, 30], [1, 30, +1]],</span>
<a href="#l7.267"></a><span id="l7.267">     [[16, 30], [18, 30], [19, 30], [19, 30], [21, 30], [21, 30], [23, 30], [1, 30, +1]],</span>
<a href="#l7.268"></a><span id="l7.268">     [[16, 30], [18, 30], [19, 30], [19, 30], [21, 30], [21, 30], [23, 30], [1, 30, +1]],</span>
<a href="#l7.269"></a><span id="l7.269">     [[17, 30], [19, 30], [20, 30], [20, 30], [22, 30], [22, 30], [0, 30, +1], [1, 30, +1]],</span>
<a href="#l7.270"></a><span id="l7.270">     [[17, 30], [19, 30], [20, 30], [20, 30], [22, 30], [23, 30], [0, 30, +1], [1, 30, +1]],</span>
<a href="#l7.271"></a><span id="l7.271">     [[18, 30], [19, 30], [20, 30], [21, 30], [22, 30], [23, 30], [0, 30, +1], [1, 30, +1]],</span>
<a href="#l7.272"></a><span id="l7.272">   ];</span>
<a href="#l7.273"></a><span id="l7.273">   controller.click(eid(&quot;calendar-tab-button&quot;));</span>
<a href="#l7.274"></a><span id="l7.274">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l7.275"></a><span id="l7.275">   goToDate(controller, 2009, 1, 1);</span>
<a href="#l7.276"></a><span id="l7.276"> </span>
<a href="#l7.277"></a><span id="l7.277" class="difflineminus">-  verify(controller, DATES, TIMEZONES, times);</span>
<a href="#l7.278"></a><span id="l7.278" class="difflineminus">-}</span>
<a href="#l7.279"></a><span id="l7.279" class="difflineplus">+  verify(DATES, TIMEZONES, times);</span>
<a href="#l7.280"></a><span id="l7.280" class="difflineplus">+});</span>
<a href="#l7.281"></a><span id="l7.281"> </span>
<a href="#l7.282"></a><span id="l7.282" class="difflineminus">-function teardownModule(module) {}</span>
<a href="#l7.283"></a><span id="l7.283" class="difflineminus">-</span>
<a href="#l7.284"></a><span id="l7.284" class="difflineminus">-function verify(controller, dates, timezones, times) {</span>
<a href="#l7.285"></a><span id="l7.285" class="difflineplus">+function verify(dates, timezones, times) {</span>
<a href="#l7.286"></a><span id="l7.286">   function* datetimes() {</span>
<a href="#l7.287"></a><span id="l7.287">     for (let idx = 0; idx &lt; dates.length; idx++) {</span>
<a href="#l7.288"></a><span id="l7.288">       yield [dates[idx][0], dates[idx][1], dates[idx][2], times[idx]];</span>
<a href="#l7.289"></a><span id="l7.289">     }</span>
<a href="#l7.290"></a><span id="l7.290">   }</span>
<a href="#l7.291"></a><span id="l7.291"> </span>
<a href="#l7.292"></a><span id="l7.292">   let { lookup } = helpersForController(controller);</span>
<a href="#l7.293"></a><span id="l7.293"> </span>
<a href="#l7.294"></a><span id="l7.294" class="difflineat">@@ -303,8 +299,12 @@ function verify(controller, dates, timez</span>
<a href="#l7.295"></a><span id="l7.295">       if (day != undefined &amp;&amp; day == -1) {</span>
<a href="#l7.296"></a><span id="l7.296">         viewForward(controller, 1);</span>
<a href="#l7.297"></a><span id="l7.297">       }</span>
<a href="#l7.298"></a><span id="l7.298"> </span>
<a href="#l7.299"></a><span id="l7.299">       controller.assert(() =&gt; eventNodes.some(node =&gt; Math.abs(timeY - node) &lt; allowedDifference));</span>
<a href="#l7.300"></a><span id="l7.300">     }</span>
<a href="#l7.301"></a><span id="l7.301">   }</span>
<a href="#l7.302"></a><span id="l7.302"> }</span>
<a href="#l7.303"></a><span id="l7.303" class="difflineplus">+</span>
<a href="#l7.304"></a><span id="l7.304" class="difflineplus">+registerCleanupFunction(() =&gt; {</span>
<a href="#l7.305"></a><span id="l7.305" class="difflineplus">+  Services.prefs.clearUserPref(&quot;calendar.timezone.local&quot;);</span>
<a href="#l7.306"></a><span id="l7.306" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">old mode 100755</span>
<a href="#l8.2"></a><span id="l8.2">new mode 100644</span>
<a href="#l8.3"></a><span id="l8.3">rename from calendar/test/mozmill/testTodayPane.js</span>
<a href="#l8.4"></a><span id="l8.4">rename to calendar/test/browser/browser_todayPane.js</span>
<a href="#l8.5"></a><span id="l8.5" class="difflineminus">--- a/calendar/test/mozmill/testTodayPane.js</span>
<a href="#l8.6"></a><span id="l8.6" class="difflineplus">+++ b/calendar/test/browser/browser_todayPane.js</span>
<a href="#l8.7"></a><span id="l8.7" class="difflineat">@@ -1,42 +1,39 @@</span>
<a href="#l8.8"></a><span id="l8.8"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l8.9"></a><span id="l8.9">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l8.10"></a><span id="l8.10">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l8.11"></a><span id="l8.11"> </span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-var CALENDARNAME, CANVAS_BOX, DAY_VIEW, LABELDAYBOX, TODAY_BUTTON, TODAY_PANE, AGENDA_LISTBOX;</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-var helpersForController, invokeEventDialog, viewForward, createCalendar;</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineminus">-var deleteCalendars;</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">-var setData;</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineplus">+</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineplus">+var {</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineplus">+  AGENDA_LISTBOX,</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineplus">+  DAY_VIEW,</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineplus">+  LABELDAYBOX,</span>
<a href="#l8.24"></a><span id="l8.24" class="difflineplus">+  TODAY_BUTTON,</span>
<a href="#l8.25"></a><span id="l8.25" class="difflineplus">+  TODAY_PANE,</span>
<a href="#l8.26"></a><span id="l8.26" class="difflineplus">+  createCalendar,</span>
<a href="#l8.27"></a><span id="l8.27" class="difflineplus">+  deleteCalendars,</span>
<a href="#l8.28"></a><span id="l8.28" class="difflineplus">+  helpersForController,</span>
<a href="#l8.29"></a><span id="l8.29" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l8.30"></a><span id="l8.30" class="difflineplus">+  viewForward,</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineplus">+var { setData } = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;);</span>
<a href="#l8.33"></a><span id="l8.33"> </span>
<a href="#l8.34"></a><span id="l8.34"> var { cal } = ChromeUtils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l8.35"></a><span id="l8.35"> </span>
<a href="#l8.36"></a><span id="l8.36" class="difflineminus">-function setupModule(module) {</span>
<a href="#l8.37"></a><span id="l8.37" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l8.38"></a><span id="l8.38" class="difflineminus">-  ({</span>
<a href="#l8.39"></a><span id="l8.39" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l8.40"></a><span id="l8.40" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineminus">-    DAY_VIEW,</span>
<a href="#l8.42"></a><span id="l8.42" class="difflineminus">-    LABELDAYBOX,</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineminus">-    TODAY_BUTTON,</span>
<a href="#l8.44"></a><span id="l8.44" class="difflineminus">-    TODAY_PANE,</span>
<a href="#l8.45"></a><span id="l8.45" class="difflineminus">-    AGENDA_LISTBOX,</span>
<a href="#l8.46"></a><span id="l8.46" class="difflineminus">-    helpersForController,</span>
<a href="#l8.47"></a><span id="l8.47" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l8.48"></a><span id="l8.48" class="difflineminus">-    viewForward,</span>
<a href="#l8.49"></a><span id="l8.49" class="difflineminus">-    createCalendar,</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineminus">-    deleteCalendars,</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l8.53"></a><span id="l8.53" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l8.54"></a><span id="l8.54" class="difflineplus">+var { eid, lookup, lookupEventBox, sleep } = helpersForController(controller);</span>
<a href="#l8.55"></a><span id="l8.55"> </span>
<a href="#l8.56"></a><span id="l8.56" class="difflineminus">-  ({ setData } = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;));</span>
<a href="#l8.57"></a><span id="l8.57" class="difflineplus">+add_task(async function testTodayPane() {</span>
<a href="#l8.58"></a><span id="l8.58">   createCalendar(controller, CALENDARNAME);</span>
<a href="#l8.59"></a><span id="l8.59" class="difflineminus">-}</span>
<a href="#l8.60"></a><span id="l8.60" class="difflineplus">+  await setCalendarView(&quot;day&quot;);</span>
<a href="#l8.61"></a><span id="l8.61"> </span>
<a href="#l8.62"></a><span id="l8.62" class="difflineminus">-function testTodayPane() {</span>
<a href="#l8.63"></a><span id="l8.63">   let createEvent = (hour, name) =&gt; {</span>
<a href="#l8.64"></a><span id="l8.64">     let eventBox = lookupEventBox(&quot;day&quot;, CANVAS_BOX, null, 1, hour);</span>
<a href="#l8.65"></a><span id="l8.65">     invokeEventDialog(controller, eventBox, (event, iframe) =&gt; {</span>
<a href="#l8.66"></a><span id="l8.66">       let { eid: eventid } = helpersForController(event);</span>
<a href="#l8.67"></a><span id="l8.67"> </span>
<a href="#l8.68"></a><span id="l8.68">       setData(event, iframe, { title: name });</span>
<a href="#l8.69"></a><span id="l8.69">       event.click(eventid(&quot;button-saveandclose&quot;));</span>
<a href="#l8.70"></a><span id="l8.70">     });</span>
<a href="#l8.71"></a><span id="l8.71" class="difflineat">@@ -82,35 +79,36 @@ function testTodayPane() {</span>
<a href="#l8.72"></a><span id="l8.72"> </span>
<a href="#l8.73"></a><span id="l8.73">   // Verify today pane open.</span>
<a href="#l8.74"></a><span id="l8.74">   controller.assertNotDOMProperty(lookup(TODAY_PANE), &quot;collapsed&quot;);</span>
<a href="#l8.75"></a><span id="l8.75"> </span>
<a href="#l8.76"></a><span id="l8.76">   // Verify today pane's date.</span>
<a href="#l8.77"></a><span id="l8.77">   controller.assertValue(eid(&quot;datevalue-label&quot;), new Date().getDate());</span>
<a href="#l8.78"></a><span id="l8.78"> </span>
<a href="#l8.79"></a><span id="l8.79">   let expandArrow = `</span>
<a href="#l8.80"></a><span id="l8.80" class="difflineminus">-        anon({&quot;class&quot;:&quot;agenda-checkbox treenode-checkbox&quot;})/anon({&quot;class&quot;:&quot;checkbox-check&quot;})</span>
<a href="#l8.81"></a><span id="l8.81" class="difflineplus">+        {&quot;class&quot;:&quot;agenda-checkbox treenode-checkbox&quot;}/{&quot;class&quot;:&quot;checkbox-check&quot;}</span>
<a href="#l8.82"></a><span id="l8.82">     `;</span>
<a href="#l8.83"></a><span id="l8.83">   // Tomorrow and soon are collapsed by default.</span>
<a href="#l8.84"></a><span id="l8.84">   controller.click(lookup(`${AGENDA_LISTBOX}/id(&quot;tomorrow-header&quot;)/${expandArrow}`));</span>
<a href="#l8.85"></a><span id="l8.85" class="difflineplus">+  sleep();</span>
<a href="#l8.86"></a><span id="l8.86">   controller.click(lookup(`${AGENDA_LISTBOX}/id(&quot;nextweek-header&quot;)/${expandArrow}`));</span>
<a href="#l8.87"></a><span id="l8.87">   sleep();</span>
<a href="#l8.88"></a><span id="l8.88"> </span>
<a href="#l8.89"></a><span id="l8.89">   // Verify events shown in today pane.</span>
<a href="#l8.90"></a><span id="l8.90">   let now = new Date();</span>
<a href="#l8.91"></a><span id="l8.91">   now.setHours(startHour);</span>
<a href="#l8.92"></a><span id="l8.92">   now.setMinutes(0);</span>
<a href="#l8.93"></a><span id="l8.93">   let dtz = cal.dtz.defaultTimezone;</span>
<a href="#l8.94"></a><span id="l8.94">   let probeDate = cal.dtz.jsDateToDateTime(now, dtz);</span>
<a href="#l8.95"></a><span id="l8.95">   let dateFormatter = cal.getDateFormatter();</span>
<a href="#l8.96"></a><span id="l8.96">   let startTime = dateFormatter.formatTime(probeDate);</span>
<a href="#l8.97"></a><span id="l8.97"> </span>
<a href="#l8.98"></a><span id="l8.98">   let eventStart = `</span>
<a href="#l8.99"></a><span id="l8.99" class="difflineminus">-        anon({&quot;class&quot;:&quot;agenda-container-box&quot;})/anon({&quot;class&quot;:&quot;agenda-description&quot;})/[0]/</span>
<a href="#l8.100"></a><span id="l8.100" class="difflineminus">-        anon({&quot;class&quot;:&quot;agenda-event-start&quot;})</span>
<a href="#l8.101"></a><span id="l8.101" class="difflineplus">+        {&quot;class&quot;:&quot;agenda-container-box&quot;}/{&quot;class&quot;:&quot;agenda-description&quot;}/[0]/</span>
<a href="#l8.102"></a><span id="l8.102" class="difflineplus">+        {&quot;class&quot;:&quot;agenda-event-start&quot;}</span>
<a href="#l8.103"></a><span id="l8.103">     `;</span>
<a href="#l8.104"></a><span id="l8.104">   controller.assertText(</span>
<a href="#l8.105"></a><span id="l8.105">     lookup(`${AGENDA_LISTBOX}/[2]/${eventStart}`),</span>
<a href="#l8.106"></a><span id="l8.106">     startTime + &quot; Today's Event&quot;</span>
<a href="#l8.107"></a><span id="l8.107">   );</span>
<a href="#l8.108"></a><span id="l8.108"> </span>
<a href="#l8.109"></a><span id="l8.109">   let tomorrow = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 9, 0);</span>
<a href="#l8.110"></a><span id="l8.110">   probeDate = cal.dtz.jsDateToDateTime(tomorrow, dtz);</span>
<a href="#l8.111"></a><span id="l8.111" class="difflineat">@@ -125,18 +123,18 @@ function testTodayPane() {</span>
<a href="#l8.112"></a><span id="l8.112">   startTime = dateFormatter.formatDateTime(probeDate);</span>
<a href="#l8.113"></a><span id="l8.113"> </span>
<a href="#l8.114"></a><span id="l8.114">   // Future event's start time.</span>
<a href="#l8.115"></a><span id="l8.115">   controller.assertText(lookup(`${AGENDA_LISTBOX}/[6]/${eventStart}`), startTime);</span>
<a href="#l8.116"></a><span id="l8.116"> </span>
<a href="#l8.117"></a><span id="l8.117">   // Future event's title.</span>
<a href="#l8.118"></a><span id="l8.118">   controller.assertText(</span>
<a href="#l8.119"></a><span id="l8.119">     lookup(`</span>
<a href="#l8.120"></a><span id="l8.120" class="difflineminus">-        ${AGENDA_LISTBOX}/[6]/anon({&quot;class&quot;:&quot;agenda-container-box&quot;})/</span>
<a href="#l8.121"></a><span id="l8.121" class="difflineminus">-        anon({&quot;class&quot;:&quot;agenda-description&quot;})/anon({&quot;class&quot;:&quot;agenda-event-title&quot;})</span>
<a href="#l8.122"></a><span id="l8.122" class="difflineplus">+        ${AGENDA_LISTBOX}/[6]/{&quot;class&quot;:&quot;agenda-container-box&quot;}/</span>
<a href="#l8.123"></a><span id="l8.123" class="difflineplus">+        {&quot;class&quot;:&quot;agenda-description&quot;}/{&quot;class&quot;:&quot;agenda-event-title&quot;}</span>
<a href="#l8.124"></a><span id="l8.124">     `),</span>
<a href="#l8.125"></a><span id="l8.125">     &quot;Future Event&quot;</span>
<a href="#l8.126"></a><span id="l8.126">   );</span>
<a href="#l8.127"></a><span id="l8.127"> </span>
<a href="#l8.128"></a><span id="l8.128">   // Delete events.</span>
<a href="#l8.129"></a><span id="l8.129">   controller.click(lookup(`${AGENDA_LISTBOX}/[2]`));</span>
<a href="#l8.130"></a><span id="l8.130"> </span>
<a href="#l8.131"></a><span id="l8.131">   controller.keypress(eid(&quot;agenda-listbox&quot;), &quot;VK_DELETE&quot;, {});</span>
<a href="#l8.132"></a><span id="l8.132" class="difflineat">@@ -162,37 +160,37 @@ function testTodayPane() {</span>
<a href="#l8.133"></a><span id="l8.133">   controller.click(eid(&quot;calendar-status-todaypane-button&quot;));</span>
<a href="#l8.134"></a><span id="l8.134">   controller.assertNotDOMProperty(lookup(TODAY_PANE), &quot;collapsed&quot;);</span>
<a href="#l8.135"></a><span id="l8.135">   controller.click(lookup(`${AGENDA_LISTBOX}/id(&quot;tomorrow-header&quot;)/${expandArrow}`));</span>
<a href="#l8.136"></a><span id="l8.136">   controller.click(lookup(`${AGENDA_LISTBOX}/id(&quot;nextweek-header&quot;)/${expandArrow}`));</span>
<a href="#l8.137"></a><span id="l8.137">   sleep();</span>
<a href="#l8.138"></a><span id="l8.138"> </span>
<a href="#l8.139"></a><span id="l8.139">   // Verify tomorrow and soon collapsed.</span>
<a href="#l8.140"></a><span id="l8.140">   tomorrow = lookup(`</span>
<a href="#l8.141"></a><span id="l8.141" class="difflineminus">-        ${AGENDA_LISTBOX}/[1]/anon({&quot;class&quot;:&quot;agenda-checkbox treenode-checkbox&quot;})</span>
<a href="#l8.142"></a><span id="l8.142" class="difflineplus">+        ${AGENDA_LISTBOX}/[1]/{&quot;class&quot;:&quot;agenda-checkbox treenode-checkbox&quot;}</span>
<a href="#l8.143"></a><span id="l8.143">     `).getNode();</span>
<a href="#l8.144"></a><span id="l8.144"> </span>
<a href="#l8.145"></a><span id="l8.145">   let soon = lookup(`</span>
<a href="#l8.146"></a><span id="l8.146" class="difflineminus">-        ${AGENDA_LISTBOX}/[2]/anon({&quot;class&quot;:&quot;agenda-checkbox treenode-checkbox&quot;})</span>
<a href="#l8.147"></a><span id="l8.147" class="difflineplus">+        ${AGENDA_LISTBOX}/[2]/{&quot;class&quot;:&quot;agenda-checkbox treenode-checkbox&quot;}</span>
<a href="#l8.148"></a><span id="l8.148">     `).getNode();</span>
<a href="#l8.149"></a><span id="l8.149"> </span>
<a href="#l8.150"></a><span id="l8.150">   // TODO This is failing, which might actually be an error in our code!</span>
<a href="#l8.151"></a><span id="l8.151">   // controller.assert(() =&gt; {</span>
<a href="#l8.152"></a><span id="l8.152">   //     return !tomorrow.hasAttribute(&quot;checked&quot;) || tomorrow.getAttribute(&quot;checked&quot;) != &quot;true&quot;;</span>
<a href="#l8.153"></a><span id="l8.153">   // });</span>
<a href="#l8.154"></a><span id="l8.154">   controller.assert(() =&gt; {</span>
<a href="#l8.155"></a><span id="l8.155">     return !soon.hasAttribute(&quot;checked&quot;) || soon.getAttribute(&quot;checked&quot;) != &quot;true&quot;;</span>
<a href="#l8.156"></a><span id="l8.156">   });</span>
<a href="#l8.157"></a><span id="l8.157" class="difflineminus">-}</span>
<a href="#l8.158"></a><span id="l8.158" class="difflineplus">+});</span>
<a href="#l8.159"></a><span id="l8.159"> </span>
<a href="#l8.160"></a><span id="l8.160"> function getIsoDate() {</span>
<a href="#l8.161"></a><span id="l8.161">   let currDate = new Date();</span>
<a href="#l8.162"></a><span id="l8.162">   let month = (currDate.getMonth() + 1).toString().padStart(2, &quot;0&quot;);</span>
<a href="#l8.163"></a><span id="l8.163">   let day = currDate</span>
<a href="#l8.164"></a><span id="l8.164">     .getDate()</span>
<a href="#l8.165"></a><span id="l8.165">     .toString()</span>
<a href="#l8.166"></a><span id="l8.166">     .padStart(2, &quot;0&quot;);</span>
<a href="#l8.167"></a><span id="l8.167">   return `${currDate.getFullYear()}${month}${day}`;</span>
<a href="#l8.168"></a><span id="l8.168"> }</span>
<a href="#l8.169"></a><span id="l8.169"> </span>
<a href="#l8.170"></a><span id="l8.170" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l8.171"></a><span id="l8.171" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l8.172"></a><span id="l8.172">   deleteCalendars(controller, &quot;Mozmill&quot;);</span>
<a href="#l8.173"></a><span id="l8.173" class="difflineminus">-}</span>
<a href="#l8.174"></a><span id="l8.174" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1">copy from calendar/test/browser/browser.ini</span>
<a href="#l9.2"></a><span id="l9.2">copy to calendar/test/browser/eventDialog/browser.ini</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineminus">--- a/calendar/test/browser/browser.ini</span>
<a href="#l9.4"></a><span id="l9.4" class="difflineplus">+++ b/calendar/test/browser/eventDialog/browser.ini</span>
<a href="#l9.5"></a><span id="l9.5" class="difflineat">@@ -1,17 +1,18 @@</span>
<a href="#l9.6"></a><span id="l9.6"> [default]</span>
<a href="#l9.7"></a><span id="l9.7" class="difflineminus">-head = head.js</span>
<a href="#l9.8"></a><span id="l9.8" class="difflineplus">+head = ../head.js</span>
<a href="#l9.9"></a><span id="l9.9"> prefs =</span>
<a href="#l9.10"></a><span id="l9.10">   ldap_2.servers.osx.description=</span>
<a href="#l9.11"></a><span id="l9.11">   ldap_2.servers.osx.dirType=-1</span>
<a href="#l9.12"></a><span id="l9.12">   ldap_2.servers.osx.uri=</span>
<a href="#l9.13"></a><span id="l9.13">   mail.provider.suppress_dialog_on_startup=true</span>
<a href="#l9.14"></a><span id="l9.14">   mail.spotlight.firstRunDone=true</span>
<a href="#l9.15"></a><span id="l9.15">   mail.winsearch.firstRunDone=true</span>
<a href="#l9.16"></a><span id="l9.16">   mailnews.start_page.override_url=about:blank</span>
<a href="#l9.17"></a><span id="l9.17">   mailnews.start_page.url=about:blank</span>
<a href="#l9.18"></a><span id="l9.18"> subsuite = thunderbird</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineminus">-support-files = data/**</span>
<a href="#l9.20"></a><span id="l9.20"> </span>
<a href="#l9.21"></a><span id="l9.21" class="difflineminus">-[browser_calendarList.js]</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineminus">-[browser_import.js]</span>
<a href="#l9.23"></a><span id="l9.23" class="difflineminus">-[browser_tabs.js]</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineplus">+[browser_alarmDialog.js]</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineplus">+[browser_eventDialog.js]</span>
<a href="#l9.26"></a><span id="l9.26" class="difflineplus">+[browser_eventDialogModificationPrompt.js]</span>
<a href="#l9.27"></a><span id="l9.27" class="difflineplus">+[browser_eventDialogSize.js]</span>
<a href="#l9.28"></a><span id="l9.28" class="difflineplus">+[browser_utf8.js]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1">rename from calendar/test/mozmill/eventDialog/testAlarmDialog.js</span>
<a href="#l10.2"></a><span id="l10.2">rename to calendar/test/browser/eventDialog/browser_alarmDialog.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineminus">--- a/calendar/test/mozmill/eventDialog/testAlarmDialog.js</span>
<a href="#l10.4"></a><span id="l10.4" class="difflineplus">+++ b/calendar/test/browser/eventDialog/browser_alarmDialog.js</span>
<a href="#l10.5"></a><span id="l10.5" class="difflineat">@@ -1,48 +1,40 @@</span>
<a href="#l10.6"></a><span id="l10.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l10.7"></a><span id="l10.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l10.8"></a><span id="l10.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l10.9"></a><span id="l10.9"> </span>
<a href="#l10.10"></a><span id="l10.10" class="difflineminus">-var { plan_for_modal_dialog, wait_for_modal_dialog } = ChromeUtils.import(</span>
<a href="#l10.11"></a><span id="l10.11" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineplus">+</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+var {</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineplus">+  ALLDAY,</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineplus">+  EVENTPATH,</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineplus">+  TIMEOUT_MODAL_DIALOG,</span>
<a href="#l10.18"></a><span id="l10.18" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l10.19"></a><span id="l10.19" class="difflineplus">+  createCalendar,</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineplus">+  deleteCalendars,</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineplus">+  goToDate,</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineplus">+  helpersForController,</span>
<a href="#l10.23"></a><span id="l10.23" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l10.24"></a><span id="l10.24" class="difflineplus">+  switchToView,</span>
<a href="#l10.25"></a><span id="l10.25" class="difflineplus">+  viewForward,</span>
<a href="#l10.26"></a><span id="l10.26" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l10.27"></a><span id="l10.27" class="difflineplus">+var { setData } = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;);</span>
<a href="#l10.28"></a><span id="l10.28" class="difflineplus">+var { close_window, plan_for_modal_dialog, wait_for_modal_dialog } = ChromeUtils.import(</span>
<a href="#l10.29"></a><span id="l10.29">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l10.30"></a><span id="l10.30"> );</span>
<a href="#l10.31"></a><span id="l10.31"> </span>
<a href="#l10.32"></a><span id="l10.32" class="difflineminus">-var TIMEOUT_MODAL_DIALOG, CALENDARNAME, EVENTPATH, ALLDAY;</span>
<a href="#l10.33"></a><span id="l10.33" class="difflineminus">-var helpersForController, switchToView, goToDate, lookupEventBox;</span>
<a href="#l10.34"></a><span id="l10.34" class="difflineminus">-var invokeEventDialog, viewForward, closeAllEventDialogs, deleteCalendars;</span>
<a href="#l10.35"></a><span id="l10.35" class="difflineminus">-var createCalendar;</span>
<a href="#l10.36"></a><span id="l10.36" class="difflineminus">-var setData;</span>
<a href="#l10.37"></a><span id="l10.37" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l10.38"></a><span id="l10.38" class="difflineplus">+var { lookupEventBox } = helpersForController(controller);</span>
<a href="#l10.39"></a><span id="l10.39"> </span>
<a href="#l10.40"></a><span id="l10.40" class="difflineminus">-function setupModule(module) {</span>
<a href="#l10.41"></a><span id="l10.41" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l10.42"></a><span id="l10.42" class="difflineminus">-  ({</span>
<a href="#l10.43"></a><span id="l10.43" class="difflineminus">-    TIMEOUT_MODAL_DIALOG,</span>
<a href="#l10.44"></a><span id="l10.44" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l10.45"></a><span id="l10.45" class="difflineminus">-    EVENTPATH,</span>
<a href="#l10.46"></a><span id="l10.46" class="difflineminus">-    ALLDAY,</span>
<a href="#l10.47"></a><span id="l10.47" class="difflineminus">-    helpersForController,</span>
<a href="#l10.48"></a><span id="l10.48" class="difflineminus">-    switchToView,</span>
<a href="#l10.49"></a><span id="l10.49" class="difflineminus">-    goToDate,</span>
<a href="#l10.50"></a><span id="l10.50" class="difflineminus">-    lookupEventBox,</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l10.52"></a><span id="l10.52" class="difflineminus">-    viewForward,</span>
<a href="#l10.53"></a><span id="l10.53" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l10.54"></a><span id="l10.54" class="difflineminus">-    deleteCalendars,</span>
<a href="#l10.55"></a><span id="l10.55" class="difflineminus">-    createCalendar,</span>
<a href="#l10.56"></a><span id="l10.56" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l10.57"></a><span id="l10.57" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l10.58"></a><span id="l10.58" class="difflineminus">-</span>
<a href="#l10.59"></a><span id="l10.59" class="difflineminus">-  ({ setData } = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;));</span>
<a href="#l10.60"></a><span id="l10.60" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l10.61"></a><span id="l10.61" class="difflineminus">-}</span>
<a href="#l10.62"></a><span id="l10.62" class="difflineminus">-</span>
<a href="#l10.63"></a><span id="l10.63" class="difflineminus">-function testAlarmDialog() {</span>
<a href="#l10.64"></a><span id="l10.64" class="difflineplus">+add_task(function testAlarmDialog() {</span>
<a href="#l10.65"></a><span id="l10.65">   let now = new Date();</span>
<a href="#l10.66"></a><span id="l10.66"> </span>
<a href="#l10.67"></a><span id="l10.67" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l10.68"></a><span id="l10.68">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l10.69"></a><span id="l10.69">   goToDate(controller, now.getFullYear(), now.getMonth() + 1, now.getDate());</span>
<a href="#l10.70"></a><span id="l10.70">   viewForward(controller, 1);</span>
<a href="#l10.71"></a><span id="l10.71"> </span>
<a href="#l10.72"></a><span id="l10.72">   controller.click(lookupEventBox(&quot;day&quot;, ALLDAY, undefined, 1));</span>
<a href="#l10.73"></a><span id="l10.73">   controller.mainMenu.click(&quot;#ltnNewEvent&quot;);</span>
<a href="#l10.74"></a><span id="l10.74"> </span>
<a href="#l10.75"></a><span id="l10.75">   // Create a new all-day event tomorrow.</span>
<a href="#l10.76"></a><span id="l10.76" class="difflineat">@@ -80,14 +72,21 @@ function testAlarmDialog() {</span>
<a href="#l10.77"></a><span id="l10.77"> </span>
<a href="#l10.78"></a><span id="l10.78">       alarm.waitThenClick(snoozeAllButton);</span>
<a href="#l10.79"></a><span id="l10.79">       menuitems[5].click();</span>
<a href="#l10.80"></a><span id="l10.80">     });</span>
<a href="#l10.81"></a><span id="l10.81"> </span>
<a href="#l10.82"></a><span id="l10.82">     event.click(eventid(&quot;button-saveandclose&quot;));</span>
<a href="#l10.83"></a><span id="l10.83">   });</span>
<a href="#l10.84"></a><span id="l10.84">   wait_for_modal_dialog(&quot;Calendar:AlarmWindow&quot;, TIMEOUT_MODAL_DIALOG);</span>
<a href="#l10.85"></a><span id="l10.85" class="difflineminus">-}</span>
<a href="#l10.86"></a><span id="l10.86"> </span>
<a href="#l10.87"></a><span id="l10.87" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l10.88"></a><span id="l10.88" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l10.89"></a><span id="l10.89" class="difflineplus">+});</span>
<a href="#l10.90"></a><span id="l10.90" class="difflineplus">+</span>
<a href="#l10.91"></a><span id="l10.91" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l10.92"></a><span id="l10.92">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l10.93"></a><span id="l10.93">   closeAllEventDialogs();</span>
<a href="#l10.94"></a><span id="l10.94" class="difflineminus">-}</span>
<a href="#l10.95"></a><span id="l10.95" class="difflineplus">+</span>
<a href="#l10.96"></a><span id="l10.96" class="difflineplus">+  // TODO: fix this error message.</span>
<a href="#l10.97"></a><span id="l10.97" class="difflineplus">+  for (let win of mozmill.utils.getWindows(&quot;Calendar:ErrorPrompt&quot;)) {</span>
<a href="#l10.98"></a><span id="l10.98" class="difflineplus">+    close_window(win);</span>
<a href="#l10.99"></a><span id="l10.99" class="difflineplus">+  }</span>
<a href="#l10.100"></a><span id="l10.100" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">old mode 100755</span>
<a href="#l11.2"></a><span id="l11.2">new mode 100644</span>
<a href="#l11.3"></a><span id="l11.3">rename from calendar/test/mozmill/eventDialog/testEventDialog.js</span>
<a href="#l11.4"></a><span id="l11.4">rename to calendar/test/browser/eventDialog/browser_eventDialog.js</span>
<a href="#l11.5"></a><span id="l11.5" class="difflineminus">--- a/calendar/test/mozmill/eventDialog/testEventDialog.js</span>
<a href="#l11.6"></a><span id="l11.6" class="difflineplus">+++ b/calendar/test/browser/eventDialog/browser_eventDialog.js</span>
<a href="#l11.7"></a><span id="l11.7" class="difflineat">@@ -1,65 +1,55 @@</span>
<a href="#l11.8"></a><span id="l11.8"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l11.9"></a><span id="l11.9">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l11.10"></a><span id="l11.10">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-var { plan_for_modal_dialog, wait_for_modal_dialog } = ChromeUtils.import(</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineplus">+</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineplus">+var {</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineplus">+  EVENTPATH,</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineplus">+  EVENT_BOX,</span>
<a href="#l11.20"></a><span id="l11.20" class="difflineplus">+  TIMEOUT_MODAL_DIALOG,</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineplus">+  checkAlarmIcon,</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l11.23"></a><span id="l11.23" class="difflineplus">+  createCalendar,</span>
<a href="#l11.24"></a><span id="l11.24" class="difflineplus">+  deleteCalendars,</span>
<a href="#l11.25"></a><span id="l11.25" class="difflineplus">+  goToDate,</span>
<a href="#l11.26"></a><span id="l11.26" class="difflineplus">+  handleOccurrencePrompt,</span>
<a href="#l11.27"></a><span id="l11.27" class="difflineplus">+  helpersForController,</span>
<a href="#l11.28"></a><span id="l11.28" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l11.29"></a><span id="l11.29" class="difflineplus">+  switchToView,</span>
<a href="#l11.30"></a><span id="l11.30" class="difflineplus">+  viewBack,</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+var { ATTENDEES_ROW, EVENT_TABPANELS, helpersForEditUI, setData } = ChromeUtils.import(</span>
<a href="#l11.33"></a><span id="l11.33" class="difflineplus">+  &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineplus">+);</span>
<a href="#l11.35"></a><span id="l11.35" class="difflineplus">+var { close_window, plan_for_modal_dialog, wait_for_modal_dialog } = ChromeUtils.import(</span>
<a href="#l11.36"></a><span id="l11.36">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l11.37"></a><span id="l11.37"> );</span>
<a href="#l11.38"></a><span id="l11.38"> </span>
<a href="#l11.39"></a><span id="l11.39"> var { cal } = ChromeUtils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l11.40"></a><span id="l11.40"> </span>
<a href="#l11.41"></a><span id="l11.41" class="difflineminus">-var TIMEOUT_MODAL_DIALOG, CALENDARNAME, EVENTPATH, EVENT_BOX, CANVAS_BOX;</span>
<a href="#l11.42"></a><span id="l11.42" class="difflineminus">-var helpersForController, handleOccurrencePrompt, switchToView, goToDate, lookupEventBox;</span>
<a href="#l11.43"></a><span id="l11.43" class="difflineminus">-var invokeEventDialog, checkAlarmIcon, viewBack, closeAllEventDialogs, deleteCalendars;</span>
<a href="#l11.44"></a><span id="l11.44" class="difflineminus">-var createCalendar;</span>
<a href="#l11.45"></a><span id="l11.45" class="difflineminus">-var EVENT_TABPANELS, ATTENDEES_ROW;</span>
<a href="#l11.46"></a><span id="l11.46" class="difflineminus">-var helpersForEditUI, setData;</span>
<a href="#l11.47"></a><span id="l11.47" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l11.48"></a><span id="l11.48" class="difflineplus">+var { eid, lookup, lookupEventBox } = helpersForController(controller);</span>
<a href="#l11.49"></a><span id="l11.49"> </span>
<a href="#l11.50"></a><span id="l11.50"> const EVENTTITLE = &quot;Event&quot;;</span>
<a href="#l11.51"></a><span id="l11.51"> const EVENTLOCATION = &quot;Location&quot;;</span>
<a href="#l11.52"></a><span id="l11.52"> const EVENTDESCRIPTION = &quot;Event Description&quot;;</span>
<a href="#l11.53"></a><span id="l11.53"> const EVENTATTENDEE = &quot;foo@bar.com&quot;;</span>
<a href="#l11.54"></a><span id="l11.54"> const EVENTURL = &quot;http://mozilla.org/&quot;;</span>
<a href="#l11.55"></a><span id="l11.55"> var firstDay;</span>
<a href="#l11.56"></a><span id="l11.56"> </span>
<a href="#l11.57"></a><span id="l11.57" class="difflineminus">-function setupModule(module) {</span>
<a href="#l11.58"></a><span id="l11.58" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l11.59"></a><span id="l11.59" class="difflineminus">-  ({</span>
<a href="#l11.60"></a><span id="l11.60" class="difflineminus">-    TIMEOUT_MODAL_DIALOG,</span>
<a href="#l11.61"></a><span id="l11.61" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l11.62"></a><span id="l11.62" class="difflineminus">-    EVENTPATH,</span>
<a href="#l11.63"></a><span id="l11.63" class="difflineminus">-    EVENT_BOX,</span>
<a href="#l11.64"></a><span id="l11.64" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l11.65"></a><span id="l11.65" class="difflineminus">-    helpersForController,</span>
<a href="#l11.66"></a><span id="l11.66" class="difflineminus">-    handleOccurrencePrompt,</span>
<a href="#l11.67"></a><span id="l11.67" class="difflineminus">-    switchToView,</span>
<a href="#l11.68"></a><span id="l11.68" class="difflineminus">-    goToDate,</span>
<a href="#l11.69"></a><span id="l11.69" class="difflineminus">-    lookupEventBox,</span>
<a href="#l11.70"></a><span id="l11.70" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l11.71"></a><span id="l11.71" class="difflineminus">-    checkAlarmIcon,</span>
<a href="#l11.72"></a><span id="l11.72" class="difflineminus">-    viewBack,</span>
<a href="#l11.73"></a><span id="l11.73" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l11.74"></a><span id="l11.74" class="difflineminus">-    deleteCalendars,</span>
<a href="#l11.75"></a><span id="l11.75" class="difflineminus">-    createCalendar,</span>
<a href="#l11.76"></a><span id="l11.76" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l11.77"></a><span id="l11.77" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l11.78"></a><span id="l11.78" class="difflineminus">-</span>
<a href="#l11.79"></a><span id="l11.79" class="difflineminus">-  ({ EVENT_TABPANELS, ATTENDEES_ROW, helpersForEditUI, setData } = ChromeUtils.import(</span>
<a href="#l11.80"></a><span id="l11.80" class="difflineminus">-    &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l11.81"></a><span id="l11.81" class="difflineminus">-  ));</span>
<a href="#l11.82"></a><span id="l11.82" class="difflineminus">-</span>
<a href="#l11.83"></a><span id="l11.83" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l11.84"></a><span id="l11.84" class="difflineminus">-}</span>
<a href="#l11.85"></a><span id="l11.85" class="difflineminus">-</span>
<a href="#l11.86"></a><span id="l11.86" class="difflineminus">-function testEventDialog() {</span>
<a href="#l11.87"></a><span id="l11.87" class="difflineplus">+add_task(function testEventDialog() {</span>
<a href="#l11.88"></a><span id="l11.88">   let dateFormatter = cal.getDateFormatter();</span>
<a href="#l11.89"></a><span id="l11.89">   let now = new Date();</span>
<a href="#l11.90"></a><span id="l11.90"> </span>
<a href="#l11.91"></a><span id="l11.91" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l11.92"></a><span id="l11.92">   // Since from other tests we may be elsewhere, make sure we start today.</span>
<a href="#l11.93"></a><span id="l11.93">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l11.94"></a><span id="l11.94">   goToDate(controller, now.getFullYear(), now.getMonth() + 1, now.getDate());</span>
<a href="#l11.95"></a><span id="l11.95">   viewBack(controller, 1);</span>
<a href="#l11.96"></a><span id="l11.96"> </span>
<a href="#l11.97"></a><span id="l11.97">   // Open month view.</span>
<a href="#l11.98"></a><span id="l11.98">   switchToView(controller, &quot;month&quot;);</span>
<a href="#l11.99"></a><span id="l11.99">   firstDay = controller.window.currentView().startDay;</span>
<a href="#l11.100"></a><span id="l11.100" class="difflineat">@@ -222,18 +212,19 @@ function testEventDialog() {</span>
<a href="#l11.101"></a><span id="l11.101"> </span>
<a href="#l11.102"></a><span id="l11.102">   for (let row = 2; row &lt;= 3; row++) {</span>
<a href="#l11.103"></a><span id="l11.103">     for (let col = 1; col &lt;= 7; col++) {</span>
<a href="#l11.104"></a><span id="l11.104">       controller.waitForElementNotPresent(</span>
<a href="#l11.105"></a><span id="l11.105">         lookupEventBox(&quot;month&quot;, CANVAS_BOX, row, col, null, EVENTPATH)</span>
<a href="#l11.106"></a><span id="l11.106">       );</span>
<a href="#l11.107"></a><span id="l11.107">     }</span>
<a href="#l11.108"></a><span id="l11.108">   }</span>
<a href="#l11.109"></a><span id="l11.109" class="difflineminus">-}</span>
<a href="#l11.110"></a><span id="l11.110" class="difflineminus">-testEventDialog.EXCLUDED_PLATFORMS = [&quot;darwin&quot;]; // Bug 1513181</span>
<a href="#l11.111"></a><span id="l11.111" class="difflineplus">+</span>
<a href="#l11.112"></a><span id="l11.112" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l11.113"></a><span id="l11.113" class="difflineplus">+});</span>
<a href="#l11.114"></a><span id="l11.114"> </span>
<a href="#l11.115"></a><span id="l11.115"> function checkTooltip(row, col, startTime, endTime) {</span>
<a href="#l11.116"></a><span id="l11.116">   let item = lookupEventBox(&quot;month&quot;, CANVAS_BOX, row, col, null, EVENTPATH);</span>
<a href="#l11.117"></a><span id="l11.117"> </span>
<a href="#l11.118"></a><span id="l11.118">   let toolTip = '/id(&quot;messengerWindow&quot;)/id(&quot;calendar-popupset&quot;)/id(&quot;itemTooltip&quot;)';</span>
<a href="#l11.119"></a><span id="l11.119">   let toolTipNode = lookup(toolTip).getNode();</span>
<a href="#l11.120"></a><span id="l11.120">   toolTipNode.ownerGlobal.onMouseOverItem({ currentTarget: item.getNode() });</span>
<a href="#l11.121"></a><span id="l11.121"> </span>
<a href="#l11.122"></a><span id="l11.122" class="difflineat">@@ -254,12 +245,17 @@ function checkTooltip(row, col, startTim</span>
<a href="#l11.123"></a><span id="l11.123">     dump(`${text} / ${startDate} ${startTime} -\n`);</span>
<a href="#l11.124"></a><span id="l11.124">     return text.includes(`${startDate} ${startTime}  `);</span>
<a href="#l11.125"></a><span id="l11.125">   });</span>
<a href="#l11.126"></a><span id="l11.126"> </span>
<a href="#l11.127"></a><span id="l11.127">   // This could be on the next day if it is 00:00.</span>
<a href="#l11.128"></a><span id="l11.128">   controller.assert(() =&gt; dateTime.getNode().textContent.endsWith(endTime));</span>
<a href="#l11.129"></a><span id="l11.129"> }</span>
<a href="#l11.130"></a><span id="l11.130"> </span>
<a href="#l11.131"></a><span id="l11.131" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l11.132"></a><span id="l11.132" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l11.133"></a><span id="l11.133">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l11.134"></a><span id="l11.134">   closeAllEventDialogs();</span>
<a href="#l11.135"></a><span id="l11.135" class="difflineminus">-}</span>
<a href="#l11.136"></a><span id="l11.136" class="difflineplus">+</span>
<a href="#l11.137"></a><span id="l11.137" class="difflineplus">+  // TODO: fix this error message.</span>
<a href="#l11.138"></a><span id="l11.138" class="difflineplus">+  for (let win of mozmill.utils.getWindows(&quot;Calendar:ErrorPrompt&quot;)) {</span>
<a href="#l11.139"></a><span id="l11.139" class="difflineplus">+    close_window(win);</span>
<a href="#l11.140"></a><span id="l11.140" class="difflineplus">+  }</span>
<a href="#l11.141"></a><span id="l11.141" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">old mode 100755</span>
<a href="#l12.2"></a><span id="l12.2">new mode 100644</span>
<a href="#l12.3"></a><span id="l12.3">rename from calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js</span>
<a href="#l12.4"></a><span id="l12.4">rename to calendar/test/browser/eventDialog/browser_eventDialogModificationPrompt.js</span>
<a href="#l12.5"></a><span id="l12.5" class="difflineminus">--- a/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js</span>
<a href="#l12.6"></a><span id="l12.6" class="difflineplus">+++ b/calendar/test/browser/eventDialog/browser_eventDialogModificationPrompt.js</span>
<a href="#l12.7"></a><span id="l12.7" class="difflineat">@@ -1,67 +1,57 @@</span>
<a href="#l12.8"></a><span id="l12.8"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l12.9"></a><span id="l12.9">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l12.10"></a><span id="l12.10">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l12.11"></a><span id="l12.11"> </span>
<a href="#l12.12"></a><span id="l12.12" class="difflineplus">+requestLongerTimeout(2);</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineplus">+</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineplus">+var {</span>
<a href="#l12.17"></a><span id="l12.17" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l12.18"></a><span id="l12.18" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l12.19"></a><span id="l12.19" class="difflineplus">+  EVENTPATH,</span>
<a href="#l12.20"></a><span id="l12.20" class="difflineplus">+  EVENT_BOX,</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineplus">+  createCalendar,</span>
<a href="#l12.23"></a><span id="l12.23" class="difflineplus">+  deleteCalendars,</span>
<a href="#l12.24"></a><span id="l12.24" class="difflineplus">+  goToDate,</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineplus">+  helpersForController,</span>
<a href="#l12.26"></a><span id="l12.26" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l12.27"></a><span id="l12.27" class="difflineplus">+  switchToView,</span>
<a href="#l12.28"></a><span id="l12.28" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l12.29"></a><span id="l12.29" class="difflineplus">+var { setData } = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;);</span>
<a href="#l12.30"></a><span id="l12.30" class="difflineplus">+var { mark_failure } = ChromeUtils.import(</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineplus">+  &quot;resource://testing-common/mozmill/FolderDisplayHelpers.jsm&quot;</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineplus">+);</span>
<a href="#l12.33"></a><span id="l12.33" class="difflineplus">+</span>
<a href="#l12.34"></a><span id="l12.34"> var { plan_for_modal_dialog, wait_for_modal_dialog } = ChromeUtils.import(</span>
<a href="#l12.35"></a><span id="l12.35">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l12.36"></a><span id="l12.36"> );</span>
<a href="#l12.37"></a><span id="l12.37"> </span>
<a href="#l12.38"></a><span id="l12.38"> var { cal } = ChromeUtils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l12.39"></a><span id="l12.39"> </span>
<a href="#l12.40"></a><span id="l12.40" class="difflineminus">-var CALENDARNAME, EVENT_BOX, CANVAS_BOX, EVENTPATH;</span>
<a href="#l12.41"></a><span id="l12.41" class="difflineminus">-var helpersForController,</span>
<a href="#l12.42"></a><span id="l12.42" class="difflineminus">-  switchToView,</span>
<a href="#l12.43"></a><span id="l12.43" class="difflineminus">-  invokeEventDialog,</span>
<a href="#l12.44"></a><span id="l12.44" class="difflineminus">-  createCalendar,</span>
<a href="#l12.45"></a><span id="l12.45" class="difflineminus">-  closeAllEventDialogs,</span>
<a href="#l12.46"></a><span id="l12.46" class="difflineminus">-  deleteCalendars;</span>
<a href="#l12.47"></a><span id="l12.47" class="difflineminus">-var goToDate;</span>
<a href="#l12.48"></a><span id="l12.48" class="difflineminus">-var setData;</span>
<a href="#l12.49"></a><span id="l12.49" class="difflineminus">-var mark_failure;</span>
<a href="#l12.50"></a><span id="l12.50" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l12.51"></a><span id="l12.51" class="difflineplus">+var { eid, lookupEventBox } = helpersForController(controller);</span>
<a href="#l12.52"></a><span id="l12.52"> </span>
<a href="#l12.53"></a><span id="l12.53"> const TIMEOUT_COMMON_DIALOG = 3000;</span>
<a href="#l12.54"></a><span id="l12.54"> var savePromptAppeared = false;</span>
<a href="#l12.55"></a><span id="l12.55"> var failPoints = {</span>
<a href="#l12.56"></a><span id="l12.56">   first: &quot;no change&quot;,</span>
<a href="#l12.57"></a><span id="l12.57">   second: &quot;change all and back&quot;,</span>
<a href="#l12.58"></a><span id="l12.58">   third: [&quot;1st pass&quot;, &quot;2nd pass&quot;, &quot;3rd pass&quot;, &quot;4th pass&quot;, &quot;5th pass&quot;],</span>
<a href="#l12.59"></a><span id="l12.59"> };</span>
<a href="#l12.60"></a><span id="l12.60"> </span>
<a href="#l12.61"></a><span id="l12.61"> var { date1, date2, date3, data, newlines } = setupData();</span>
<a href="#l12.62"></a><span id="l12.62"> </span>
<a href="#l12.63"></a><span id="l12.63" class="difflineminus">-function setupModule(module) {</span>
<a href="#l12.64"></a><span id="l12.64" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l12.65"></a><span id="l12.65" class="difflineminus">-  ({</span>
<a href="#l12.66"></a><span id="l12.66" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l12.67"></a><span id="l12.67" class="difflineminus">-    EVENT_BOX,</span>
<a href="#l12.68"></a><span id="l12.68" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l12.69"></a><span id="l12.69" class="difflineminus">-    EVENTPATH,</span>
<a href="#l12.70"></a><span id="l12.70" class="difflineminus">-    helpersForController,</span>
<a href="#l12.71"></a><span id="l12.71" class="difflineminus">-    switchToView,</span>
<a href="#l12.72"></a><span id="l12.72" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l12.73"></a><span id="l12.73" class="difflineminus">-    createCalendar,</span>
<a href="#l12.74"></a><span id="l12.74" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l12.75"></a><span id="l12.75" class="difflineminus">-    deleteCalendars,</span>
<a href="#l12.76"></a><span id="l12.76" class="difflineminus">-    goToDate,</span>
<a href="#l12.77"></a><span id="l12.77" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l12.78"></a><span id="l12.78" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l12.79"></a><span id="l12.79" class="difflineminus">-</span>
<a href="#l12.80"></a><span id="l12.80" class="difflineminus">-  ({ setData } = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;));</span>
<a href="#l12.81"></a><span id="l12.81" class="difflineminus">-  ({ mark_failure } = ChromeUtils.import(</span>
<a href="#l12.82"></a><span id="l12.82" class="difflineminus">-    &quot;resource://testing-common/mozmill/FolderDisplayHelpers.jsm&quot;</span>
<a href="#l12.83"></a><span id="l12.83" class="difflineminus">-  ));</span>
<a href="#l12.84"></a><span id="l12.84" class="difflineminus">-</span>
<a href="#l12.85"></a><span id="l12.85" class="difflineplus">+// Test that closing an event dialog with no changes does not prompt for save.</span>
<a href="#l12.86"></a><span id="l12.86" class="difflineplus">+add_task(function testEventDialogModificationPrompt() {</span>
<a href="#l12.87"></a><span id="l12.87" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l12.88"></a><span id="l12.88">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l12.89"></a><span id="l12.89" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l12.90"></a><span id="l12.90" class="difflineminus">-}</span>
<a href="#l12.91"></a><span id="l12.91" class="difflineminus">-</span>
<a href="#l12.92"></a><span id="l12.92" class="difflineminus">-// Test that closing an event dialog with no changes does not prompt for save.</span>
<a href="#l12.93"></a><span id="l12.93" class="difflineminus">-function testEventDialogModificationPrompt() {</span>
<a href="#l12.94"></a><span id="l12.94">   goToDate(controller, 2009, 1, 1);</span>
<a href="#l12.95"></a><span id="l12.95"> </span>
<a href="#l12.96"></a><span id="l12.96">   let createbox = lookupEventBox(&quot;day&quot;, CANVAS_BOX, null, 1, 8);</span>
<a href="#l12.97"></a><span id="l12.97">   let eventbox = lookupEventBox(&quot;day&quot;, EVENT_BOX, null, 1, null, EVENTPATH);</span>
<a href="#l12.98"></a><span id="l12.98"> </span>
<a href="#l12.99"></a><span id="l12.99">   // Create new event.</span>
<a href="#l12.100"></a><span id="l12.100">   invokeEventDialog(controller, createbox, (event, iframe) =&gt; {</span>
<a href="#l12.101"></a><span id="l12.101">     let { eid: eventid } = helpersForController(event);</span>
<a href="#l12.102"></a><span id="l12.102" class="difflineat">@@ -136,34 +126,35 @@ function testEventDialogModificationProm</span>
<a href="#l12.103"></a><span id="l12.103">     });</span>
<a href="#l12.104"></a><span id="l12.104"> </span>
<a href="#l12.105"></a><span id="l12.105">     // Delete it.</span>
<a href="#l12.106"></a><span id="l12.106">     // XXX Somehow the event is selected at this point, this didn't use to</span>
<a href="#l12.107"></a><span id="l12.107">     // be the case and can't be reproduced manually.</span>
<a href="#l12.108"></a><span id="l12.108">     controller.keypress(eid(&quot;day-view&quot;), &quot;VK_DELETE&quot;, {});</span>
<a href="#l12.109"></a><span id="l12.109">     controller.waitForElementNotPresent(eventbox);</span>
<a href="#l12.110"></a><span id="l12.110">   }</span>
<a href="#l12.111"></a><span id="l12.111" class="difflineminus">-}</span>
<a href="#l12.112"></a><span id="l12.112" class="difflineminus">-testEventDialogModificationPrompt.EXCLUDED_PLATFORMS = [&quot;darwin&quot;];</span>
<a href="#l12.113"></a><span id="l12.113"> </span>
<a href="#l12.114"></a><span id="l12.114" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l12.115"></a><span id="l12.115" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l12.116"></a><span id="l12.116" class="difflineplus">+});</span>
<a href="#l12.117"></a><span id="l12.117" class="difflineplus">+</span>
<a href="#l12.118"></a><span id="l12.118" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l12.119"></a><span id="l12.119">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l12.120"></a><span id="l12.120">   if (savePromptAppeared) {</span>
<a href="#l12.121"></a><span id="l12.121">     mark_failure([</span>
<a href="#l12.122"></a><span id="l12.122">       &quot;Save Prompt unexpectedly appeared on: &quot;,</span>
<a href="#l12.123"></a><span id="l12.123">       failPoints.first,</span>
<a href="#l12.124"></a><span id="l12.124">       failPoints.second,</span>
<a href="#l12.125"></a><span id="l12.125">       failPoints.third,</span>
<a href="#l12.126"></a><span id="l12.126">     ]);</span>
<a href="#l12.127"></a><span id="l12.127">   }</span>
<a href="#l12.128"></a><span id="l12.128">   closeAllEventDialogs();</span>
<a href="#l12.129"></a><span id="l12.129" class="difflineminus">-}</span>
<a href="#l12.130"></a><span id="l12.130" class="difflineplus">+});</span>
<a href="#l12.131"></a><span id="l12.131"> </span>
<a href="#l12.132"></a><span id="l12.132" class="difflineminus">-function handleSavePrompt(controller) {</span>
<a href="#l12.133"></a><span id="l12.133" class="difflineminus">-  let { lookup: cdlglookup } = helpersForController(controller);</span>
<a href="#l12.134"></a><span id="l12.134" class="difflineplus">+function handleSavePrompt(dialogController) {</span>
<a href="#l12.135"></a><span id="l12.135" class="difflineplus">+  let { lookup: cdlglookup } = helpersForController(dialogController);</span>
<a href="#l12.136"></a><span id="l12.136">   // Unexpected prompt, thus the test has already failed.</span>
<a href="#l12.137"></a><span id="l12.137">   // Can't trigger a failure though, because the following click wouldn't</span>
<a href="#l12.138"></a><span id="l12.138">   // be executed. So remembering it.</span>
<a href="#l12.139"></a><span id="l12.139">   savePromptAppeared = true;</span>
<a href="#l12.140"></a><span id="l12.140"> </span>
<a href="#l12.141"></a><span id="l12.141">   // application close is blocked without it</span>
<a href="#l12.142"></a><span id="l12.142">   controller.waitThenClick(</span>
<a href="#l12.143"></a><span id="l12.143">     cdlglookup(`</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">old mode 100755</span>
<a href="#l13.2"></a><span id="l13.2">new mode 100644</span>
<a href="#l13.3"></a><span id="l13.3">rename from calendar/test/mozmill/eventDialog/testEventDialogSize.js</span>
<a href="#l13.4"></a><span id="l13.4">rename to calendar/test/browser/eventDialog/browser_eventDialogSize.js</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineminus">--- a/calendar/test/mozmill/eventDialog/testEventDialogSize.js</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineplus">+++ b/calendar/test/browser/eventDialog/browser_eventDialogSize.js</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineat">@@ -1,36 +1,35 @@</span>
<a href="#l13.8"></a><span id="l13.8"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l13.9"></a><span id="l13.9">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l13.10"></a><span id="l13.10">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l13.11"></a><span id="l13.11"> </span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-var helpersForController, invokeEventDialog, createCalendar, closeAllEventDialogs, deleteCalendars;</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineminus">-var CALENDARNAME;</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineplus">+</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineplus">+var {</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineplus">+  createCalendar,</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineplus">+  deleteCalendars,</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineplus">+  helpersForController,</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l13.23"></a><span id="l13.23" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l13.24"></a><span id="l13.24"> </span>
<a href="#l13.25"></a><span id="l13.25"> var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l13.26"></a><span id="l13.26"> </span>
<a href="#l13.27"></a><span id="l13.27" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l13.28"></a><span id="l13.28" class="difflineplus">+</span>
<a href="#l13.29"></a><span id="l13.29"> const SMALL_TOLERANCE = 5;</span>
<a href="#l13.30"></a><span id="l13.30"> const LARGE_TOLERANCE = 10;</span>
<a href="#l13.31"></a><span id="l13.31"> </span>
<a href="#l13.32"></a><span id="l13.32" class="difflineminus">-function setupModule(module) {</span>
<a href="#l13.33"></a><span id="l13.33" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l13.34"></a><span id="l13.34" class="difflineminus">-  ({</span>
<a href="#l13.35"></a><span id="l13.35" class="difflineminus">-    helpersForController,</span>
<a href="#l13.36"></a><span id="l13.36" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l13.37"></a><span id="l13.37" class="difflineminus">-    createCalendar,</span>
<a href="#l13.38"></a><span id="l13.38" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l13.39"></a><span id="l13.39" class="difflineminus">-    deleteCalendars,</span>
<a href="#l13.40"></a><span id="l13.40" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l13.41"></a><span id="l13.41" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l13.42"></a><span id="l13.42" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l13.43"></a><span id="l13.43" class="difflineplus">+add_task(function setupModule(module) {</span>
<a href="#l13.44"></a><span id="l13.44" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l13.45"></a><span id="l13.45" class="difflineplus">+});</span>
<a href="#l13.46"></a><span id="l13.46"> </span>
<a href="#l13.47"></a><span id="l13.47" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l13.48"></a><span id="l13.48" class="difflineminus">-}</span>
<a href="#l13.49"></a><span id="l13.49" class="difflineminus">-</span>
<a href="#l13.50"></a><span id="l13.50" class="difflineminus">-function testEventDialog() {</span>
<a href="#l13.51"></a><span id="l13.51" class="difflineplus">+add_task(function testEventDialog() {</span>
<a href="#l13.52"></a><span id="l13.52">   dump(&quot;#ltnNewEvent click\n&quot;);</span>
<a href="#l13.53"></a><span id="l13.53">   controller.mainMenu.click(&quot;#ltnNewEvent&quot;);</span>
<a href="#l13.54"></a><span id="l13.54">   invokeEventDialog(controller, null, (event, iframe) =&gt; {</span>
<a href="#l13.55"></a><span id="l13.55">     checkLargeEnough(event, iframe);</span>
<a href="#l13.56"></a><span id="l13.56"> </span>
<a href="#l13.57"></a><span id="l13.57">     // Much larger than necessary.</span>
<a href="#l13.58"></a><span id="l13.58">     event.window.resizeTo(640, 690);</span>
<a href="#l13.59"></a><span id="l13.59">     checkWithinTolerance(event.window.outerWidth, 640);</span>
<a href="#l13.60"></a><span id="l13.60" class="difflineat">@@ -67,19 +66,21 @@ function testEventDialog() {</span>
<a href="#l13.61"></a><span id="l13.61">     event.window.resizeTo(640, 690);</span>
<a href="#l13.62"></a><span id="l13.62">     checkWithinTolerance(event.window.outerWidth, 640);</span>
<a href="#l13.63"></a><span id="l13.63">     checkWithinTolerance(event.window.outerHeight, 690);</span>
<a href="#l13.64"></a><span id="l13.64">     event.keypress(null, &quot;VK_ESCAPE&quot;, {});</span>
<a href="#l13.65"></a><span id="l13.65">   });</span>
<a href="#l13.66"></a><span id="l13.66"> </span>
<a href="#l13.67"></a><span id="l13.67">   checkWithinTolerance(getPersistedValue(&quot;event&quot;, &quot;width&quot;), 640, LARGE_TOLERANCE);</span>
<a href="#l13.68"></a><span id="l13.68">   checkWithinTolerance(getPersistedValue(&quot;event&quot;, &quot;height&quot;), 690, LARGE_TOLERANCE);</span>
<a href="#l13.69"></a><span id="l13.69" class="difflineminus">-}</span>
<a href="#l13.70"></a><span id="l13.70"> </span>
<a href="#l13.71"></a><span id="l13.71" class="difflineminus">-function testTaskDialog() {</span>
<a href="#l13.72"></a><span id="l13.72" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l13.73"></a><span id="l13.73" class="difflineplus">+});</span>
<a href="#l13.74"></a><span id="l13.74" class="difflineplus">+</span>
<a href="#l13.75"></a><span id="l13.75" class="difflineplus">+add_task(function testTaskDialog() {</span>
<a href="#l13.76"></a><span id="l13.76">   dump(&quot;#ltnNewTask click\n&quot;);</span>
<a href="#l13.77"></a><span id="l13.77">   controller.mainMenu.click(&quot;#ltnNewTask&quot;);</span>
<a href="#l13.78"></a><span id="l13.78">   invokeEventDialog(controller, null, (task, iframe) =&gt; {</span>
<a href="#l13.79"></a><span id="l13.79">     checkWithinTolerance(getPersistedValue(&quot;event&quot;, &quot;width&quot;), 640, LARGE_TOLERANCE);</span>
<a href="#l13.80"></a><span id="l13.80">     checkWithinTolerance(getPersistedValue(&quot;event&quot;, &quot;height&quot;), 690, LARGE_TOLERANCE);</span>
<a href="#l13.81"></a><span id="l13.81"> </span>
<a href="#l13.82"></a><span id="l13.82">     checkLargeEnough(task, iframe);</span>
<a href="#l13.83"></a><span id="l13.83"> </span>
<a href="#l13.84"></a><span id="l13.84" class="difflineat">@@ -116,22 +117,24 @@ function testTaskDialog() {</span>
<a href="#l13.85"></a><span id="l13.85">     checkLargeEnough(task, iframe);</span>
<a href="#l13.86"></a><span id="l13.86"> </span>
<a href="#l13.87"></a><span id="l13.87">     // Much larger than necessary.</span>
<a href="#l13.88"></a><span id="l13.88">     task.window.resizeTo(650, 700);</span>
<a href="#l13.89"></a><span id="l13.89">     checkWithinTolerance(task.window.outerWidth, 650);</span>
<a href="#l13.90"></a><span id="l13.90">     checkWithinTolerance(task.window.outerHeight, 700);</span>
<a href="#l13.91"></a><span id="l13.91">     task.keypress(null, &quot;VK_ESCAPE&quot;, {});</span>
<a href="#l13.92"></a><span id="l13.92">   });</span>
<a href="#l13.93"></a><span id="l13.93" class="difflineminus">-}</span>
<a href="#l13.94"></a><span id="l13.94"> </span>
<a href="#l13.95"></a><span id="l13.95" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l13.96"></a><span id="l13.96" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l13.97"></a><span id="l13.97" class="difflineplus">+});</span>
<a href="#l13.98"></a><span id="l13.98" class="difflineplus">+</span>
<a href="#l13.99"></a><span id="l13.99" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l13.100"></a><span id="l13.100">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l13.101"></a><span id="l13.101">   closeAllEventDialogs();</span>
<a href="#l13.102"></a><span id="l13.102" class="difflineminus">-}</span>
<a href="#l13.103"></a><span id="l13.103" class="difflineplus">+});</span>
<a href="#l13.104"></a><span id="l13.104"> </span>
<a href="#l13.105"></a><span id="l13.105"> // Check the dialog is resized large enough to hold the iframe.</span>
<a href="#l13.106"></a><span id="l13.106"> function checkLargeEnough(outer, inner) {</span>
<a href="#l13.107"></a><span id="l13.107">   let { eid: outerId } = helpersForController(outer);</span>
<a href="#l13.108"></a><span id="l13.108"> </span>
<a href="#l13.109"></a><span id="l13.109">   let iframeNode = outerId(&quot;lightning-item-panel-iframe&quot;).getNode();</span>
<a href="#l13.110"></a><span id="l13.110">   let { scrollWidth, scrollHeight } = inner.window.document.documentElement;</span>
<a href="#l13.111"></a><span id="l13.111">   outer.waitFor(() =&gt; {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1">old mode 100755</span>
<a href="#l14.2"></a><span id="l14.2">new mode 100644</span>
<a href="#l14.3"></a><span id="l14.3">rename from calendar/test/mozmill/eventDialog/testUTF8.js</span>
<a href="#l14.4"></a><span id="l14.4">rename to calendar/test/browser/eventDialog/browser_utf8.js</span>
<a href="#l14.5"></a><span id="l14.5" class="difflineminus">--- a/calendar/test/mozmill/eventDialog/testUTF8.js</span>
<a href="#l14.6"></a><span id="l14.6" class="difflineplus">+++ b/calendar/test/browser/eventDialog/browser_utf8.js</span>
<a href="#l14.7"></a><span id="l14.7" class="difflineat">@@ -1,47 +1,38 @@</span>
<a href="#l14.8"></a><span id="l14.8"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l14.9"></a><span id="l14.9">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l14.10"></a><span id="l14.10">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l14.11"></a><span id="l14.11"> </span>
<a href="#l14.12"></a><span id="l14.12" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineplus">+var {</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l14.16"></a><span id="l14.16" class="difflineplus">+  EVENT_BOX,</span>
<a href="#l14.17"></a><span id="l14.17" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l14.18"></a><span id="l14.18" class="difflineplus">+  createCalendar,</span>
<a href="#l14.19"></a><span id="l14.19" class="difflineplus">+  deleteCalendars,</span>
<a href="#l14.20"></a><span id="l14.20" class="difflineplus">+  helpersForController,</span>
<a href="#l14.21"></a><span id="l14.21" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineplus">+  switchToView,</span>
<a href="#l14.23"></a><span id="l14.23" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l14.24"></a><span id="l14.24" class="difflineplus">+var { setData } = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;);</span>
<a href="#l14.25"></a><span id="l14.25" class="difflineplus">+</span>
<a href="#l14.26"></a><span id="l14.26"> var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l14.27"></a><span id="l14.27"> </span>
<a href="#l14.28"></a><span id="l14.28" class="difflineminus">-var EVENT_BOX, CANVAS_BOX;</span>
<a href="#l14.29"></a><span id="l14.29" class="difflineminus">-var helpersForController,</span>
<a href="#l14.30"></a><span id="l14.30" class="difflineminus">-  switchToView,</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineminus">-  invokeEventDialog,</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineminus">-  closeAllEventDialogs,</span>
<a href="#l14.33"></a><span id="l14.33" class="difflineminus">-  createCalendar,</span>
<a href="#l14.34"></a><span id="l14.34" class="difflineminus">-  deleteCalendars;</span>
<a href="#l14.35"></a><span id="l14.35" class="difflineminus">-var setData;</span>
<a href="#l14.36"></a><span id="l14.36" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l14.37"></a><span id="l14.37" class="difflineplus">+var { lookupEventBox } = helpersForController(controller);</span>
<a href="#l14.38"></a><span id="l14.38"> </span>
<a href="#l14.39"></a><span id="l14.39"> var UTF8STRING = &quot;      &quot;;</span>
<a href="#l14.40"></a><span id="l14.40"> </span>
<a href="#l14.41"></a><span id="l14.41" class="difflineminus">-function setupModule(module) {</span>
<a href="#l14.42"></a><span id="l14.42" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l14.43"></a><span id="l14.43" class="difflineminus">-  ({</span>
<a href="#l14.44"></a><span id="l14.44" class="difflineminus">-    EVENT_BOX,</span>
<a href="#l14.45"></a><span id="l14.45" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l14.46"></a><span id="l14.46" class="difflineminus">-    helpersForController,</span>
<a href="#l14.47"></a><span id="l14.47" class="difflineminus">-    switchToView,</span>
<a href="#l14.48"></a><span id="l14.48" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l14.49"></a><span id="l14.49" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l14.50"></a><span id="l14.50" class="difflineminus">-    createCalendar,</span>
<a href="#l14.51"></a><span id="l14.51" class="difflineminus">-    deleteCalendars,</span>
<a href="#l14.52"></a><span id="l14.52" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l14.53"></a><span id="l14.53" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l14.54"></a><span id="l14.54" class="difflineplus">+add_task(function testUTF8() {</span>
<a href="#l14.55"></a><span id="l14.55" class="difflineplus">+  Services.prefs.setStringPref(&quot;calendar.categories.names&quot;, UTF8STRING);</span>
<a href="#l14.56"></a><span id="l14.56" class="difflineplus">+  createCalendar(controller, UTF8STRING);</span>
<a href="#l14.57"></a><span id="l14.57" class="difflineplus">+  switchToView(controller, &quot;day&quot;);</span>
<a href="#l14.58"></a><span id="l14.58"> </span>
<a href="#l14.59"></a><span id="l14.59" class="difflineminus">-  ({ setData } = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;));</span>
<a href="#l14.60"></a><span id="l14.60" class="difflineminus">-</span>
<a href="#l14.61"></a><span id="l14.61" class="difflineminus">-  switchToView(controller, &quot;day&quot;);</span>
<a href="#l14.62"></a><span id="l14.62" class="difflineminus">-  createCalendar(controller, UTF8STRING);</span>
<a href="#l14.63"></a><span id="l14.63" class="difflineminus">-  Services.prefs.setStringPref(&quot;calendar.categories.names&quot;, UTF8STRING);</span>
<a href="#l14.64"></a><span id="l14.64" class="difflineminus">-}</span>
<a href="#l14.65"></a><span id="l14.65" class="difflineminus">-</span>
<a href="#l14.66"></a><span id="l14.66" class="difflineminus">-function testUTF8() {</span>
<a href="#l14.67"></a><span id="l14.67">   // Create new event.</span>
<a href="#l14.68"></a><span id="l14.68">   let eventBox = lookupEventBox(&quot;day&quot;, CANVAS_BOX, null, 1, 8);</span>
<a href="#l14.69"></a><span id="l14.69">   invokeEventDialog(controller, eventBox, (event, iframe) =&gt; {</span>
<a href="#l14.70"></a><span id="l14.70">     let { eid: eventid } = helpersForController(event);</span>
<a href="#l14.71"></a><span id="l14.71"> </span>
<a href="#l14.72"></a><span id="l14.72">     // Fill in name, location, description.</span>
<a href="#l14.73"></a><span id="l14.73">     setData(event, iframe, {</span>
<a href="#l14.74"></a><span id="l14.74">       title: UTF8STRING,</span>
<a href="#l14.75"></a><span id="l14.75" class="difflineat">@@ -68,16 +59,17 @@ function testUTF8() {</span>
<a href="#l14.76"></a><span id="l14.76">       iframeId(&quot;item-categories&quot;).getNode().querySelector(`</span>
<a href="#l14.77"></a><span id="l14.77">             menuitem[label=&quot;${UTF8STRING}&quot;][checked]</span>
<a href="#l14.78"></a><span id="l14.78">         `)</span>
<a href="#l14.79"></a><span id="l14.79">     );</span>
<a href="#l14.80"></a><span id="l14.80"> </span>
<a href="#l14.81"></a><span id="l14.81">     // Escape the event window.</span>
<a href="#l14.82"></a><span id="l14.82">     event.keypress(null, &quot;VK_ESCAPE&quot;, {});</span>
<a href="#l14.83"></a><span id="l14.83">   });</span>
<a href="#l14.84"></a><span id="l14.84" class="difflineminus">-}</span>
<a href="#l14.85"></a><span id="l14.85" class="difflineminus">-testUTF8.EXCLUDED_PLATFORMS = [&quot;darwin&quot;];</span>
<a href="#l14.86"></a><span id="l14.86"> </span>
<a href="#l14.87"></a><span id="l14.87" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l14.88"></a><span id="l14.88" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l14.89"></a><span id="l14.89" class="difflineplus">+});</span>
<a href="#l14.90"></a><span id="l14.90" class="difflineplus">+</span>
<a href="#l14.91"></a><span id="l14.91" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l14.92"></a><span id="l14.92">   deleteCalendars(controller, UTF8STRING);</span>
<a href="#l14.93"></a><span id="l14.93">   Services.prefs.clearUserPref(&quot;calendar.categories.names&quot;);</span>
<a href="#l14.94"></a><span id="l14.94">   closeAllEventDialogs();</span>
<a href="#l14.95"></a><span id="l14.95" class="difflineminus">-}</span>
<a href="#l14.96"></a><span id="l14.96" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1">copy from calendar/test/browser/browser.ini</span>
<a href="#l15.2"></a><span id="l15.2">copy to calendar/test/browser/invitations/browser.ini</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineminus">--- a/calendar/test/browser/browser.ini</span>
<a href="#l15.4"></a><span id="l15.4" class="difflineplus">+++ b/calendar/test/browser/invitations/browser.ini</span>
<a href="#l15.5"></a><span id="l15.5" class="difflineat">@@ -1,17 +1,16 @@</span>
<a href="#l15.6"></a><span id="l15.6"> [default]</span>
<a href="#l15.7"></a><span id="l15.7" class="difflineminus">-head = head.js</span>
<a href="#l15.8"></a><span id="l15.8" class="difflineplus">+head = ../head.js</span>
<a href="#l15.9"></a><span id="l15.9"> prefs =</span>
<a href="#l15.10"></a><span id="l15.10" class="difflineplus">+  browser.tabs.remote.autostart=false # e10s</span>
<a href="#l15.11"></a><span id="l15.11">   ldap_2.servers.osx.description=</span>
<a href="#l15.12"></a><span id="l15.12">   ldap_2.servers.osx.dirType=-1</span>
<a href="#l15.13"></a><span id="l15.13">   ldap_2.servers.osx.uri=</span>
<a href="#l15.14"></a><span id="l15.14">   mail.provider.suppress_dialog_on_startup=true</span>
<a href="#l15.15"></a><span id="l15.15">   mail.spotlight.firstRunDone=true</span>
<a href="#l15.16"></a><span id="l15.16">   mail.winsearch.firstRunDone=true</span>
<a href="#l15.17"></a><span id="l15.17">   mailnews.start_page.override_url=about:blank</span>
<a href="#l15.18"></a><span id="l15.18">   mailnews.start_page.url=about:blank</span>
<a href="#l15.19"></a><span id="l15.19"> subsuite = thunderbird</span>
<a href="#l15.20"></a><span id="l15.20" class="difflineminus">-support-files = data/**</span>
<a href="#l15.21"></a><span id="l15.21"> </span>
<a href="#l15.22"></a><span id="l15.22" class="difflineminus">-[browser_calendarList.js]</span>
<a href="#l15.23"></a><span id="l15.23" class="difflineminus">-[browser_import.js]</span>
<a href="#l15.24"></a><span id="l15.24" class="difflineminus">-[browser_tabs.js]</span>
<a href="#l15.25"></a><span id="l15.25" class="difflineplus">+[browser_imipBarEmail.js]</span>
<a href="#l15.26"></a><span id="l15.26" class="difflineplus">+support-files = message-containing-event.eml</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1">rename from calendar/test/mozmill/invitations/test-imip-bar-eml.js</span>
<a href="#l16.2"></a><span id="l16.2">rename to calendar/test/browser/invitations/browser_imipBarEmail.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineminus">--- a/calendar/test/mozmill/invitations/test-imip-bar-eml.js</span>
<a href="#l16.4"></a><span id="l16.4" class="difflineplus">+++ b/calendar/test/browser/invitations/browser_imipBarEmail.js</span>
<a href="#l16.5"></a><span id="l16.5" class="difflineat">@@ -1,34 +1,42 @@</span>
<a href="#l16.6"></a><span id="l16.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l16.7"></a><span id="l16.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l16.8"></a><span id="l16.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l16.9"></a><span id="l16.9"> </span>
<a href="#l16.10"></a><span id="l16.10"> /**</span>
<a href="#l16.11"></a><span id="l16.11">  * Test that the IMIP bar behaves properly for eml files.</span>
<a href="#l16.12"></a><span id="l16.12">  */</span>
<a href="#l16.13"></a><span id="l16.13"> </span>
<a href="#l16.14"></a><span id="l16.14" class="difflineminus">-var os = ChromeUtils.import(&quot;chrome://mozmill/content/stdlib/os.jsm&quot;);</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineminus">-</span>
<a href="#l16.16"></a><span id="l16.16"> var { open_message_from_file } = ChromeUtils.import(</span>
<a href="#l16.17"></a><span id="l16.17">   &quot;resource://testing-common/mozmill/FolderDisplayHelpers.jsm&quot;</span>
<a href="#l16.18"></a><span id="l16.18"> );</span>
<a href="#l16.19"></a><span id="l16.19"> var { close_window } = ChromeUtils.import(&quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;);</span>
<a href="#l16.20"></a><span id="l16.20"> </span>
<a href="#l16.21"></a><span id="l16.21" class="difflineplus">+function getFileFromChromeURL(leafName) {</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineplus">+  let ChromeRegistry = Cc[&quot;@mozilla.org/chrome/chrome-registry;1&quot;].getService(Ci.nsIChromeRegistry);</span>
<a href="#l16.23"></a><span id="l16.23" class="difflineplus">+</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineplus">+  let url = Services.io.newURI(getRootDirectory(gTestPath) + leafName);</span>
<a href="#l16.25"></a><span id="l16.25" class="difflineplus">+  info(url.spec);</span>
<a href="#l16.26"></a><span id="l16.26" class="difflineplus">+  let fileURL = ChromeRegistry.convertChromeURL(url).QueryInterface(Ci.nsIFileURL);</span>
<a href="#l16.27"></a><span id="l16.27" class="difflineplus">+  return fileURL.file;</span>
<a href="#l16.28"></a><span id="l16.28" class="difflineplus">+}</span>
<a href="#l16.29"></a><span id="l16.29" class="difflineplus">+</span>
<a href="#l16.30"></a><span id="l16.30"> /**</span>
<a href="#l16.31"></a><span id="l16.31">  * Test that when opening a message containing an event, the IMIP bar shows.</span>
<a href="#l16.32"></a><span id="l16.32">  */</span>
<a href="#l16.33"></a><span id="l16.33" class="difflineminus">-function test_event_from_eml() {</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineminus">-  let thisFilePath = os.getFileForPath(__file__);</span>
<a href="#l16.35"></a><span id="l16.35" class="difflineminus">-  let file = os.getFileForPath(os.abspath(&quot;./message-containing-event.eml&quot;, thisFilePath));</span>
<a href="#l16.36"></a><span id="l16.36" class="difflineplus">+add_task(function test_event_from_eml() {</span>
<a href="#l16.37"></a><span id="l16.37" class="difflineplus">+  let file = getFileFromChromeURL(&quot;message-containing-event.eml&quot;);</span>
<a href="#l16.38"></a><span id="l16.38"> </span>
<a href="#l16.39"></a><span id="l16.39">   let msgc = open_message_from_file(file);</span>
<a href="#l16.40"></a><span id="l16.40"> </span>
<a href="#l16.41"></a><span id="l16.41">   msgc.waitFor(() =&gt; {</span>
<a href="#l16.42"></a><span id="l16.42">     let bar = msgc.window.document.getElementById(&quot;imip-bar&quot;);</span>
<a href="#l16.43"></a><span id="l16.43">     if (!bar) {</span>
<a href="#l16.44"></a><span id="l16.44">       throw new Error(&quot;Couldn't find imip-bar in DOM.&quot;);</span>
<a href="#l16.45"></a><span id="l16.45">     }</span>
<a href="#l16.46"></a><span id="l16.46">     return bar.collapsed === false;</span>
<a href="#l16.47"></a><span id="l16.47">   }, &quot;Timed out waiting for IMIP bar to show&quot;);</span>
<a href="#l16.48"></a><span id="l16.48"> </span>
<a href="#l16.49"></a><span id="l16.49">   close_window(msgc);</span>
<a href="#l16.50"></a><span id="l16.50" class="difflineminus">-}</span>
<a href="#l16.51"></a><span id="l16.51" class="difflineplus">+</span>
<a href="#l16.52"></a><span id="l16.52" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l16.53"></a><span id="l16.53" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1">rename from calendar/test/mozmill/invitations/message-containing-event.eml</span>
<a href="#l17.2"></a><span id="l17.2">rename to calendar/test/browser/invitations/message-containing-event.eml</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1">copy from calendar/test/browser/browser.ini</span>
<a href="#l18.2"></a><span id="l18.2">copy to calendar/test/browser/preferences/browser.ini</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineminus">--- a/calendar/test/browser/browser.ini</span>
<a href="#l18.4"></a><span id="l18.4" class="difflineplus">+++ b/calendar/test/browser/preferences/browser.ini</span>
<a href="#l18.5"></a><span id="l18.5" class="difflineat">@@ -1,17 +1,15 @@</span>
<a href="#l18.6"></a><span id="l18.6"> [default]</span>
<a href="#l18.7"></a><span id="l18.7" class="difflineminus">-head = head.js</span>
<a href="#l18.8"></a><span id="l18.8" class="difflineplus">+head = ../head.js</span>
<a href="#l18.9"></a><span id="l18.9"> prefs =</span>
<a href="#l18.10"></a><span id="l18.10">   ldap_2.servers.osx.description=</span>
<a href="#l18.11"></a><span id="l18.11">   ldap_2.servers.osx.dirType=-1</span>
<a href="#l18.12"></a><span id="l18.12">   ldap_2.servers.osx.uri=</span>
<a href="#l18.13"></a><span id="l18.13">   mail.provider.suppress_dialog_on_startup=true</span>
<a href="#l18.14"></a><span id="l18.14">   mail.spotlight.firstRunDone=true</span>
<a href="#l18.15"></a><span id="l18.15">   mail.winsearch.firstRunDone=true</span>
<a href="#l18.16"></a><span id="l18.16">   mailnews.start_page.override_url=about:blank</span>
<a href="#l18.17"></a><span id="l18.17">   mailnews.start_page.url=about:blank</span>
<a href="#l18.18"></a><span id="l18.18"> subsuite = thunderbird</span>
<a href="#l18.19"></a><span id="l18.19" class="difflineminus">-support-files = data/**</span>
<a href="#l18.20"></a><span id="l18.20"> </span>
<a href="#l18.21"></a><span id="l18.21" class="difflineminus">-[browser_calendarList.js]</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineminus">-[browser_import.js]</span>
<a href="#l18.23"></a><span id="l18.23" class="difflineminus">-[browser_tabs.js]</span>
<a href="#l18.24"></a><span id="l18.24" class="difflineplus">+[browser_alarmDefaultValue.js]</span>
<a href="#l18.25"></a><span id="l18.25" class="difflineplus">+[browser_categoryColors.js]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1">old mode 100755</span>
<a href="#l19.2"></a><span id="l19.2">new mode 100644</span>
<a href="#l19.3"></a><span id="l19.3">rename from calendar/test/mozmill/preferences/testAlarmDefaultValue.js</span>
<a href="#l19.4"></a><span id="l19.4">rename to calendar/test/browser/preferences/browser_alarmDefaultValue.js</span>
<a href="#l19.5"></a><span id="l19.5" class="difflineminus">--- a/calendar/test/mozmill/preferences/testAlarmDefaultValue.js</span>
<a href="#l19.6"></a><span id="l19.6" class="difflineplus">+++ b/calendar/test/browser/preferences/browser_alarmDefaultValue.js</span>
<a href="#l19.7"></a><span id="l19.7" class="difflineat">@@ -1,48 +1,43 @@</span>
<a href="#l19.8"></a><span id="l19.8"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l19.9"></a><span id="l19.9">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l19.10"></a><span id="l19.10">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l19.11"></a><span id="l19.11"> </span>
<a href="#l19.12"></a><span id="l19.12"> /**</span>
<a href="#l19.13"></a><span id="l19.13">  * Test default alarm settings for events and tasks</span>
<a href="#l19.14"></a><span id="l19.14">  */</span>
<a href="#l19.15"></a><span id="l19.15"> </span>
<a href="#l19.16"></a><span id="l19.16" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l19.17"></a><span id="l19.17" class="difflineplus">+</span>
<a href="#l19.18"></a><span id="l19.18" class="difflineplus">+var {</span>
<a href="#l19.19"></a><span id="l19.19" class="difflineplus">+  helpersForController,</span>
<a href="#l19.20"></a><span id="l19.20" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l19.21"></a><span id="l19.21" class="difflineplus">+  openLightningPrefs,</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineplus">+  closeLightningPrefs,</span>
<a href="#l19.23"></a><span id="l19.23" class="difflineplus">+  menulistSelect,</span>
<a href="#l19.24"></a><span id="l19.24" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l19.25"></a><span id="l19.25" class="difflineplus">+var { content_tab_e, content_tab_eid } = ChromeUtils.import(</span>
<a href="#l19.26"></a><span id="l19.26" class="difflineplus">+  &quot;resource://testing-common/mozmill/ContentTabHelpers.jsm&quot;</span>
<a href="#l19.27"></a><span id="l19.27" class="difflineplus">+);</span>
<a href="#l19.28"></a><span id="l19.28"> var { plan_for_modal_dialog, wait_for_modal_dialog } = ChromeUtils.import(</span>
<a href="#l19.29"></a><span id="l19.29">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l19.30"></a><span id="l19.30"> );</span>
<a href="#l19.31"></a><span id="l19.31"> </span>
<a href="#l19.32"></a><span id="l19.32"> var { cal } = ChromeUtils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l19.33"></a><span id="l19.33"> var { PluralForm } = ChromeUtils.import(&quot;resource://gre/modules/PluralForm.jsm&quot;);</span>
<a href="#l19.34"></a><span id="l19.34"> var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l19.35"></a><span id="l19.35"> </span>
<a href="#l19.36"></a><span id="l19.36"> const DEFVALUE = 43;</span>
<a href="#l19.37"></a><span id="l19.37"> </span>
<a href="#l19.38"></a><span id="l19.38" class="difflineminus">-var helpersForController, invokeEventDialog, openLightningPrefs, closeLightningPrefs;</span>
<a href="#l19.39"></a><span id="l19.39" class="difflineminus">-var menulistSelect;</span>
<a href="#l19.40"></a><span id="l19.40" class="difflineminus">-var content_tab_e, content_tab_eid;</span>
<a href="#l19.41"></a><span id="l19.41" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l19.42"></a><span id="l19.42"> </span>
<a href="#l19.43"></a><span id="l19.43"> var prefTab = null;</span>
<a href="#l19.44"></a><span id="l19.44"> </span>
<a href="#l19.45"></a><span id="l19.45" class="difflineminus">-function setupModule(module) {</span>
<a href="#l19.46"></a><span id="l19.46" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l19.47"></a><span id="l19.47" class="difflineminus">-  ({</span>
<a href="#l19.48"></a><span id="l19.48" class="difflineminus">-    helpersForController,</span>
<a href="#l19.49"></a><span id="l19.49" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l19.50"></a><span id="l19.50" class="difflineminus">-    openLightningPrefs,</span>
<a href="#l19.51"></a><span id="l19.51" class="difflineminus">-    closeLightningPrefs,</span>
<a href="#l19.52"></a><span id="l19.52" class="difflineminus">-    menulistSelect,</span>
<a href="#l19.53"></a><span id="l19.53" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l19.54"></a><span id="l19.54" class="difflineminus">-</span>
<a href="#l19.55"></a><span id="l19.55" class="difflineminus">-  ({ content_tab_e, content_tab_eid } = ChromeUtils.import(</span>
<a href="#l19.56"></a><span id="l19.56" class="difflineminus">-    &quot;resource://testing-common/mozmill/ContentTabHelpers.jsm&quot;</span>
<a href="#l19.57"></a><span id="l19.57" class="difflineminus">-  ));</span>
<a href="#l19.58"></a><span id="l19.58" class="difflineminus">-}</span>
<a href="#l19.59"></a><span id="l19.59" class="difflineminus">-</span>
<a href="#l19.60"></a><span id="l19.60" class="difflineminus">-function testDefaultAlarms() {</span>
<a href="#l19.61"></a><span id="l19.61" class="difflineplus">+add_task(function testDefaultAlarms() {</span>
<a href="#l19.62"></a><span id="l19.62">   let localeUnitString = cal.l10n.getCalString(&quot;unitDays&quot;);</span>
<a href="#l19.63"></a><span id="l19.63">   let unitString = PluralForm.get(DEFVALUE, localeUnitString).replace(&quot;#1&quot;, DEFVALUE);</span>
<a href="#l19.64"></a><span id="l19.64">   let alarmString = (...args) =&gt; cal.l10n.getString(&quot;calendar-alarms&quot;, ...args);</span>
<a href="#l19.65"></a><span id="l19.65">   let originStringEvent = alarmString(&quot;reminderCustomOriginBeginBeforeEvent&quot;);</span>
<a href="#l19.66"></a><span id="l19.66">   let originStringTask = alarmString(&quot;reminderCustomOriginBeginBeforeTask&quot;);</span>
<a href="#l19.67"></a><span id="l19.67">   let expectedEventReminder = alarmString(&quot;reminderCustomTitle&quot;, [unitString, originStringEvent]);</span>
<a href="#l19.68"></a><span id="l19.68">   let expectedTaskReminder = alarmString(&quot;reminderCustomTitle&quot;, [unitString, originStringTask]);</span>
<a href="#l19.69"></a><span id="l19.69"> </span>
<a href="#l19.70"></a><span id="l19.70" class="difflineat">@@ -84,17 +79,17 @@ function testDefaultAlarms() {</span>
<a href="#l19.71"></a><span id="l19.71"> </span>
<a href="#l19.72"></a><span id="l19.72">     plan_for_modal_dialog(&quot;Calendar:EventDialog:Reminder&quot;, handleReminderDialog);</span>
<a href="#l19.73"></a><span id="l19.73">     task.click(reminderDetailsVisible);</span>
<a href="#l19.74"></a><span id="l19.74">     wait_for_modal_dialog(&quot;Calendar:EventDialog:Reminder&quot;);</span>
<a href="#l19.75"></a><span id="l19.75"> </span>
<a href="#l19.76"></a><span id="l19.76">     // Close the task dialog.</span>
<a href="#l19.77"></a><span id="l19.77">     task.window.close();</span>
<a href="#l19.78"></a><span id="l19.78">   });</span>
<a href="#l19.79"></a><span id="l19.79" class="difflineminus">-}</span>
<a href="#l19.80"></a><span id="l19.80" class="difflineplus">+});</span>
<a href="#l19.81"></a><span id="l19.81"> </span>
<a href="#l19.82"></a><span id="l19.82"> function handlePrefTab(tab) {</span>
<a href="#l19.83"></a><span id="l19.83">   prefTab = tab;</span>
<a href="#l19.84"></a><span id="l19.84"> </span>
<a href="#l19.85"></a><span id="l19.85">   let { replaceText } = helpersForController(controller);</span>
<a href="#l19.86"></a><span id="l19.86">   // Scroll to the reminder groupbox</span>
<a href="#l19.87"></a><span id="l19.87">   content_tab_e(tab, &quot;defaultsnoozelength&quot;).scrollIntoView();</span>
<a href="#l19.88"></a><span id="l19.88"> </span>
<a href="#l19.89"></a><span id="l19.89" class="difflineat">@@ -115,37 +110,37 @@ function handlePrefTab(tab) {</span>
<a href="#l19.90"></a><span id="l19.90"> }</span>
<a href="#l19.91"></a><span id="l19.91"> </span>
<a href="#l19.92"></a><span id="l19.92"> function handleReminderDialog(reminders) {</span>
<a href="#l19.93"></a><span id="l19.93">   let { eid: remindersid, replaceText } = helpersForController(reminders);</span>
<a href="#l19.94"></a><span id="l19.94"> </span>
<a href="#l19.95"></a><span id="l19.95">   let listbox = remindersid(&quot;reminder-listbox&quot;);</span>
<a href="#l19.96"></a><span id="l19.96">   let listboxElement = remindersid(&quot;reminder-listbox&quot;).getNode();</span>
<a href="#l19.97"></a><span id="l19.97">   reminders.waitFor(() =&gt; listboxElement.selectedCount == 1);</span>
<a href="#l19.98"></a><span id="l19.98" class="difflineminus">-  reminders.assert(() =&gt; listboxElement.selectedItem.reminder.offset.days == DEFVALUE);</span>
<a href="#l19.99"></a><span id="l19.99" class="difflineplus">+  Assert.equal(listboxElement.selectedItem.reminder.offset.days, DEFVALUE);</span>
<a href="#l19.100"></a><span id="l19.100"> </span>
<a href="#l19.101"></a><span id="l19.101">   reminders.click(remindersid(&quot;reminder-new-button&quot;));</span>
<a href="#l19.102"></a><span id="l19.102">   reminders.waitFor(() =&gt; listboxElement.itemCount == 2);</span>
<a href="#l19.103"></a><span id="l19.103" class="difflineminus">-  reminders.assert(() =&gt; listboxElement.selectedCount == 1);</span>
<a href="#l19.104"></a><span id="l19.104" class="difflineminus">-  reminders.assert(() =&gt; listboxElement.selectedItem.reminder.offset.days == DEFVALUE);</span>
<a href="#l19.105"></a><span id="l19.105" class="difflineplus">+  Assert.equal(listboxElement.selectedCount, 1);</span>
<a href="#l19.106"></a><span id="l19.106" class="difflineplus">+  Assert.equal(listboxElement.selectedItem.reminder.offset.days, DEFVALUE);</span>
<a href="#l19.107"></a><span id="l19.107"> </span>
<a href="#l19.108"></a><span id="l19.108">   replaceText(remindersid(&quot;reminder-length&quot;), &quot;20&quot;);</span>
<a href="#l19.109"></a><span id="l19.109" class="difflineminus">-  reminders.assert(() =&gt; listboxElement.selectedItem.reminder.offset.days == 20);</span>
<a href="#l19.110"></a><span id="l19.110" class="difflineplus">+  Assert.equal(listboxElement.selectedItem.reminder.offset.days, 20);</span>
<a href="#l19.111"></a><span id="l19.111"> </span>
<a href="#l19.112"></a><span id="l19.112">   reminders.click(listbox);</span>
<a href="#l19.113"></a><span id="l19.113">   reminders.keypress(listbox, &quot;VK_UP&quot;, {});</span>
<a href="#l19.114"></a><span id="l19.114">   reminders.waitFor(() =&gt; listboxElement.selectedIndex == 0);</span>
<a href="#l19.115"></a><span id="l19.115"> </span>
<a href="#l19.116"></a><span id="l19.116" class="difflineminus">-  reminders.assert(() =&gt; listboxElement.selectedItem.reminder.offset.days == DEFVALUE);</span>
<a href="#l19.117"></a><span id="l19.117" class="difflineplus">+  Assert.equal(listboxElement.selectedItem.reminder.offset.days, DEFVALUE);</span>
<a href="#l19.118"></a><span id="l19.118"> </span>
<a href="#l19.119"></a><span id="l19.119">   reminders.window.close();</span>
<a href="#l19.120"></a><span id="l19.120"> }</span>
<a href="#l19.121"></a><span id="l19.121"> </span>
<a href="#l19.122"></a><span id="l19.122" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l19.123"></a><span id="l19.123" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l19.124"></a><span id="l19.124">   Services.prefs.clearUserPref(&quot;calendar.alarms.eventalarmlen&quot;);</span>
<a href="#l19.125"></a><span id="l19.125">   Services.prefs.clearUserPref(&quot;calendar.alarms.eventalarmunit&quot;);</span>
<a href="#l19.126"></a><span id="l19.126">   Services.prefs.clearUserPref(&quot;calendar.alarms.todoalarmlen&quot;);</span>
<a href="#l19.127"></a><span id="l19.127">   Services.prefs.clearUserPref(&quot;calendar.alarms.todoalarmunit&quot;);</span>
<a href="#l19.128"></a><span id="l19.128"> </span>
<a href="#l19.129"></a><span id="l19.129">   if (prefTab) {</span>
<a href="#l19.130"></a><span id="l19.130">     closeLightningPrefs(prefTab);</span>
<a href="#l19.131"></a><span id="l19.131">   }</span>
<a href="#l19.132"></a><span id="l19.132" class="difflineminus">-}</span>
<a href="#l19.133"></a><span id="l19.133" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1">rename from calendar/test/mozmill/preferences/testCategoryColors.js</span>
<a href="#l20.2"></a><span id="l20.2">rename to calendar/test/browser/preferences/browser_categoryColors.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineminus">--- a/calendar/test/mozmill/preferences/testCategoryColors.js</span>
<a href="#l20.4"></a><span id="l20.4" class="difflineplus">+++ b/calendar/test/browser/preferences/browser_categoryColors.js</span>
<a href="#l20.5"></a><span id="l20.5" class="difflineat">@@ -1,43 +1,38 @@</span>
<a href="#l20.6"></a><span id="l20.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l20.7"></a><span id="l20.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l20.8"></a><span id="l20.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l20.9"></a><span id="l20.9"> </span>
<a href="#l20.10"></a><span id="l20.10" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l20.11"></a><span id="l20.11" class="difflineplus">+</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineplus">+var { helpersForController, openLightningPrefs, closeLightningPrefs } = ChromeUtils.import(</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+  &quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;</span>
<a href="#l20.14"></a><span id="l20.14" class="difflineplus">+);</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineplus">+var { content_tab_e, content_tab_eid } = ChromeUtils.import(</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineplus">+  &quot;resource://testing-common/mozmill/ContentTabHelpers.jsm&quot;</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineplus">+);</span>
<a href="#l20.18"></a><span id="l20.18"> var { wait_for_frame_load } = ChromeUtils.import(</span>
<a href="#l20.19"></a><span id="l20.19">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l20.20"></a><span id="l20.20"> );</span>
<a href="#l20.21"></a><span id="l20.21"> </span>
<a href="#l20.22"></a><span id="l20.22" class="difflineminus">-var helpersForController, openLightningPrefs, closeLightningPrefs;</span>
<a href="#l20.23"></a><span id="l20.23" class="difflineminus">-var content_tab_e, content_tab_eid;</span>
<a href="#l20.24"></a><span id="l20.24" class="difflineminus">-</span>
<a href="#l20.25"></a><span id="l20.25" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l20.26"></a><span id="l20.26"> var prefTab = null;</span>
<a href="#l20.27"></a><span id="l20.27"> </span>
<a href="#l20.28"></a><span id="l20.28" class="difflineminus">-function setupModule(module) {</span>
<a href="#l20.29"></a><span id="l20.29" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l20.30"></a><span id="l20.30" class="difflineminus">-  ({ helpersForController, openLightningPrefs, closeLightningPrefs } = ChromeUtils.import(</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">-    &quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineminus">-  ));</span>
<a href="#l20.33"></a><span id="l20.33" class="difflineminus">-</span>
<a href="#l20.34"></a><span id="l20.34" class="difflineminus">-  ({ content_tab_e, content_tab_eid } = ChromeUtils.import(</span>
<a href="#l20.35"></a><span id="l20.35" class="difflineminus">-    &quot;resource://testing-common/mozmill/ContentTabHelpers.jsm&quot;</span>
<a href="#l20.36"></a><span id="l20.36" class="difflineminus">-  ));</span>
<a href="#l20.37"></a><span id="l20.37" class="difflineminus">-}</span>
<a href="#l20.38"></a><span id="l20.38" class="difflineminus">-</span>
<a href="#l20.39"></a><span id="l20.39" class="difflineminus">-function testCategoryColors() {</span>
<a href="#l20.40"></a><span id="l20.40" class="difflineplus">+add_task(function testCategoryColors() {</span>
<a href="#l20.41"></a><span id="l20.41">   openLightningPrefs(tab =&gt; {</span>
<a href="#l20.42"></a><span id="l20.42">     prefTab = tab;</span>
<a href="#l20.43"></a><span id="l20.43"> </span>
<a href="#l20.44"></a><span id="l20.44">     let listBox = content_tab_e(tab, &quot;categorieslist&quot;);</span>
<a href="#l20.45"></a><span id="l20.45">     listBox.scrollIntoView();</span>
<a href="#l20.46"></a><span id="l20.46" class="difflineminus">-    controller.assert(() =&gt; listBox.itemChildren.length == 22);</span>
<a href="#l20.47"></a><span id="l20.47" class="difflineplus">+    Assert.equal(listBox.itemChildren.length, 22);</span>
<a href="#l20.48"></a><span id="l20.48"> </span>
<a href="#l20.49"></a><span id="l20.49">     for (let item of listBox.itemChildren) {</span>
<a href="#l20.50"></a><span id="l20.50">       dump(`${item.firstElementChild.value}: ${item.lastElementChild.style.backgroundColor}\n`);</span>
<a href="#l20.51"></a><span id="l20.51" class="difflineminus">-      controller.assert(() =&gt; item.lastElementChild.style.backgroundColor);</span>
<a href="#l20.52"></a><span id="l20.52" class="difflineplus">+      Assert.ok(item.lastElementChild.style.backgroundColor);</span>
<a href="#l20.53"></a><span id="l20.53">     }</span>
<a href="#l20.54"></a><span id="l20.54"> </span>
<a href="#l20.55"></a><span id="l20.55">     controller.click(content_tab_eid(tab, &quot;categorieslist&quot;), 5, 5);</span>
<a href="#l20.56"></a><span id="l20.56">     controller.click(content_tab_eid(tab, &quot;editCButton&quot;));</span>
<a href="#l20.57"></a><span id="l20.57"> </span>
<a href="#l20.58"></a><span id="l20.58">     let editFrame = wait_for_frame_load(</span>
<a href="#l20.59"></a><span id="l20.59">       tab.browser.contentDocument.getElementById(&quot;dialogOverlay-0&quot;).querySelector(&quot;browser&quot;),</span>
<a href="#l20.60"></a><span id="l20.60">       &quot;chrome://calendar/content/preferences/editCategory.xul&quot;</span>
<a href="#l20.61"></a><span id="l20.61" class="difflineat">@@ -48,18 +43,18 @@ function testCategoryColors() {</span>
<a href="#l20.62"></a><span id="l20.62">     editFrame.e(&quot;categoryColor&quot;).value = &quot;#00CC00&quot;;</span>
<a href="#l20.63"></a><span id="l20.63">     editFrame.click(</span>
<a href="#l20.64"></a><span id="l20.64">       lookup(`</span>
<a href="#l20.65"></a><span id="l20.65">             id(&quot;editCategory&quot;)/shadow/{&quot;class&quot;:&quot;dialog-button-box&quot;}/{&quot;dlgtype&quot;:&quot;accept&quot;}</span>
<a href="#l20.66"></a><span id="l20.66">         `)</span>
<a href="#l20.67"></a><span id="l20.67">     );</span>
<a href="#l20.68"></a><span id="l20.68"> </span>
<a href="#l20.69"></a><span id="l20.69">     let listItem = listBox.itemChildren[listBox.itemCount - 1];</span>
<a href="#l20.70"></a><span id="l20.70" class="difflineminus">-    controller.assert(() =&gt; listItem.firstElementChild.value == &quot;ZZZ Mozmill&quot;);</span>
<a href="#l20.71"></a><span id="l20.71" class="difflineminus">-    controller.assert(() =&gt; listItem.lastElementChild.style.backgroundColor == &quot;rgb(0, 204, 0)&quot;);</span>
<a href="#l20.72"></a><span id="l20.72" class="difflineplus">+    Assert.equal(listItem.firstElementChild.value, &quot;ZZZ Mozmill&quot;);</span>
<a href="#l20.73"></a><span id="l20.73" class="difflineplus">+    Assert.equal(listItem.lastElementChild.style.backgroundColor, &quot;rgb(0, 204, 0)&quot;);</span>
<a href="#l20.74"></a><span id="l20.74">   }, controller);</span>
<a href="#l20.75"></a><span id="l20.75" class="difflineminus">-}</span>
<a href="#l20.76"></a><span id="l20.76" class="difflineplus">+});</span>
<a href="#l20.77"></a><span id="l20.77"> </span>
<a href="#l20.78"></a><span id="l20.78" class="difflineminus">-function teardownModule() {</span>
<a href="#l20.79"></a><span id="l20.79" class="difflineplus">+registerCleanupFunction(function teardownModule() {</span>
<a href="#l20.80"></a><span id="l20.80">   if (prefTab) {</span>
<a href="#l20.81"></a><span id="l20.81">     closeLightningPrefs(prefTab);</span>
<a href="#l20.82"></a><span id="l20.82">   }</span>
<a href="#l20.83"></a><span id="l20.83" class="difflineminus">-}</span>
<a href="#l20.84"></a><span id="l20.84" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1">copy from calendar/test/browser/browser.ini</span>
<a href="#l21.2"></a><span id="l21.2">copy to calendar/test/browser/recurrence/browser.ini</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineminus">--- a/calendar/test/browser/browser.ini</span>
<a href="#l21.4"></a><span id="l21.4" class="difflineplus">+++ b/calendar/test/browser/recurrence/browser.ini</span>
<a href="#l21.5"></a><span id="l21.5" class="difflineat">@@ -1,17 +1,20 @@</span>
<a href="#l21.6"></a><span id="l21.6"> [default]</span>
<a href="#l21.7"></a><span id="l21.7" class="difflineminus">-head = head.js</span>
<a href="#l21.8"></a><span id="l21.8" class="difflineplus">+head = ../head.js</span>
<a href="#l21.9"></a><span id="l21.9"> prefs =</span>
<a href="#l21.10"></a><span id="l21.10">   ldap_2.servers.osx.description=</span>
<a href="#l21.11"></a><span id="l21.11">   ldap_2.servers.osx.dirType=-1</span>
<a href="#l21.12"></a><span id="l21.12">   ldap_2.servers.osx.uri=</span>
<a href="#l21.13"></a><span id="l21.13">   mail.provider.suppress_dialog_on_startup=true</span>
<a href="#l21.14"></a><span id="l21.14">   mail.spotlight.firstRunDone=true</span>
<a href="#l21.15"></a><span id="l21.15">   mail.winsearch.firstRunDone=true</span>
<a href="#l21.16"></a><span id="l21.16">   mailnews.start_page.override_url=about:blank</span>
<a href="#l21.17"></a><span id="l21.17">   mailnews.start_page.url=about:blank</span>
<a href="#l21.18"></a><span id="l21.18"> subsuite = thunderbird</span>
<a href="#l21.19"></a><span id="l21.19" class="difflineminus">-support-files = data/**</span>
<a href="#l21.20"></a><span id="l21.20"> </span>
<a href="#l21.21"></a><span id="l21.21" class="difflineminus">-[browser_calendarList.js]</span>
<a href="#l21.22"></a><span id="l21.22" class="difflineminus">-[browser_import.js]</span>
<a href="#l21.23"></a><span id="l21.23" class="difflineminus">-[browser_tabs.js]</span>
<a href="#l21.24"></a><span id="l21.24" class="difflineplus">+[browser_annual.js]</span>
<a href="#l21.25"></a><span id="l21.25" class="difflineplus">+[browser_biweekly.js]</span>
<a href="#l21.26"></a><span id="l21.26" class="difflineplus">+[browser_daily.js]</span>
<a href="#l21.27"></a><span id="l21.27" class="difflineplus">+[browser_lastDayOfMonth.js]</span>
<a href="#l21.28"></a><span id="l21.28" class="difflineplus">+[browser_weeklyN.js]</span>
<a href="#l21.29"></a><span id="l21.29" class="difflineplus">+[browser_weeklyUntil.js]</span>
<a href="#l21.30"></a><span id="l21.30" class="difflineplus">+[browser_weeklyWithException.js]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1">rename from calendar/test/mozmill/cal-recurrence/testAnnualRecurrence.js</span>
<a href="#l22.2"></a><span id="l22.2">rename to calendar/test/browser/recurrence/browser_annual.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineminus">--- a/calendar/test/mozmill/cal-recurrence/testAnnualRecurrence.js</span>
<a href="#l22.4"></a><span id="l22.4" class="difflineplus">+++ b/calendar/test/browser/recurrence/browser_annual.js</span>
<a href="#l22.5"></a><span id="l22.5" class="difflineat">@@ -1,43 +1,39 @@</span>
<a href="#l22.6"></a><span id="l22.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l22.7"></a><span id="l22.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l22.8"></a><span id="l22.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l22.9"></a><span id="l22.9"> </span>
<a href="#l22.10"></a><span id="l22.10" class="difflineminus">-var CALENDARNAME, EVENTPATH, CANVAS_BOX, ALLDAY;</span>
<a href="#l22.11"></a><span id="l22.11" class="difflineminus">-var helpersForController, handleOccurrencePrompt, switchToView, goToDate, invokeEventDialog;</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-var closeAllEventDialogs, deleteCalendars, createCalendar, menulistSelect;</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l22.14"></a><span id="l22.14" class="difflineplus">+</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineplus">+var {</span>
<a href="#l22.16"></a><span id="l22.16" class="difflineplus">+  ALLDAY,</span>
<a href="#l22.17"></a><span id="l22.17" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l22.18"></a><span id="l22.18" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l22.19"></a><span id="l22.19" class="difflineplus">+  EVENTPATH,</span>
<a href="#l22.20"></a><span id="l22.20" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l22.21"></a><span id="l22.21" class="difflineplus">+  createCalendar,</span>
<a href="#l22.22"></a><span id="l22.22" class="difflineplus">+  deleteCalendars,</span>
<a href="#l22.23"></a><span id="l22.23" class="difflineplus">+  goToDate,</span>
<a href="#l22.24"></a><span id="l22.24" class="difflineplus">+  handleOccurrencePrompt,</span>
<a href="#l22.25"></a><span id="l22.25" class="difflineplus">+  helpersForController,</span>
<a href="#l22.26"></a><span id="l22.26" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l22.27"></a><span id="l22.27" class="difflineplus">+  menulistSelect,</span>
<a href="#l22.28"></a><span id="l22.28" class="difflineplus">+  switchToView,</span>
<a href="#l22.29"></a><span id="l22.29" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l22.30"></a><span id="l22.30" class="difflineplus">+</span>
<a href="#l22.31"></a><span id="l22.31" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l22.32"></a><span id="l22.32" class="difflineplus">+var { getEventBoxPath, lookup, lookupEventBox } = helpersForController(controller);</span>
<a href="#l22.33"></a><span id="l22.33"> </span>
<a href="#l22.34"></a><span id="l22.34"> const STARTYEAR = 1950;</span>
<a href="#l22.35"></a><span id="l22.35"> const EPOCH = 1970;</span>
<a href="#l22.36"></a><span id="l22.36"> </span>
<a href="#l22.37"></a><span id="l22.37" class="difflineminus">-function setupModule(module) {</span>
<a href="#l22.38"></a><span id="l22.38" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l22.39"></a><span id="l22.39" class="difflineminus">-  ({</span>
<a href="#l22.40"></a><span id="l22.40" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l22.41"></a><span id="l22.41" class="difflineminus">-    EVENTPATH,</span>
<a href="#l22.42"></a><span id="l22.42" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l22.43"></a><span id="l22.43" class="difflineminus">-    ALLDAY,</span>
<a href="#l22.44"></a><span id="l22.44" class="difflineminus">-    helpersForController,</span>
<a href="#l22.45"></a><span id="l22.45" class="difflineminus">-    handleOccurrencePrompt,</span>
<a href="#l22.46"></a><span id="l22.46" class="difflineminus">-    switchToView,</span>
<a href="#l22.47"></a><span id="l22.47" class="difflineminus">-    goToDate,</span>
<a href="#l22.48"></a><span id="l22.48" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l22.49"></a><span id="l22.49" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l22.50"></a><span id="l22.50" class="difflineminus">-    deleteCalendars,</span>
<a href="#l22.51"></a><span id="l22.51" class="difflineminus">-    createCalendar,</span>
<a href="#l22.52"></a><span id="l22.52" class="difflineminus">-    menulistSelect,</span>
<a href="#l22.53"></a><span id="l22.53" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l22.54"></a><span id="l22.54" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l22.55"></a><span id="l22.55" class="difflineminus">-</span>
<a href="#l22.56"></a><span id="l22.56" class="difflineplus">+add_task(function testAnnualRecurrence() {</span>
<a href="#l22.57"></a><span id="l22.57" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l22.58"></a><span id="l22.58">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l22.59"></a><span id="l22.59" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l22.60"></a><span id="l22.60" class="difflineminus">-}</span>
<a href="#l22.61"></a><span id="l22.61" class="difflineminus">-</span>
<a href="#l22.62"></a><span id="l22.62" class="difflineminus">-function testAnnualRecurrence() {</span>
<a href="#l22.63"></a><span id="l22.63">   goToDate(controller, STARTYEAR, 1, 1);</span>
<a href="#l22.64"></a><span id="l22.64"> </span>
<a href="#l22.65"></a><span id="l22.65">   // Create yearly recurring all-day event.</span>
<a href="#l22.66"></a><span id="l22.66">   let eventBox = lookupEventBox(&quot;day&quot;, ALLDAY, null, 1, null);</span>
<a href="#l22.67"></a><span id="l22.67">   invokeEventDialog(controller, eventBox, (event, iframe) =&gt; {</span>
<a href="#l22.68"></a><span id="l22.68">     let { eid: eventid } = helpersForController(event);</span>
<a href="#l22.69"></a><span id="l22.69"> </span>
<a href="#l22.70"></a><span id="l22.70">     menulistSelect(eventid(&quot;item-repeat&quot;), &quot;yearly&quot;, event);</span>
<a href="#l22.71"></a><span id="l22.71" class="difflineat">@@ -70,14 +66,16 @@ function testAnnualRecurrence() {</span>
<a href="#l22.72"></a><span id="l22.72">   // Delete event.</span>
<a href="#l22.73"></a><span id="l22.73">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l22.74"></a><span id="l22.74">   goToDate(controller, checkYears[0], 1, 1);</span>
<a href="#l22.75"></a><span id="l22.75">   const boxPath = getEventBoxPath(&quot;day&quot;, ALLDAY, null, 1, null) + EVENTPATH;</span>
<a href="#l22.76"></a><span id="l22.76">   const box = lookup(boxPath);</span>
<a href="#l22.77"></a><span id="l22.77">   controller.click(box);</span>
<a href="#l22.78"></a><span id="l22.78">   handleOccurrencePrompt(controller, box, &quot;delete&quot;, true);</span>
<a href="#l22.79"></a><span id="l22.79">   controller.waitForElementNotPresent(box);</span>
<a href="#l22.80"></a><span id="l22.80" class="difflineminus">-}</span>
<a href="#l22.81"></a><span id="l22.81"> </span>
<a href="#l22.82"></a><span id="l22.82" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l22.83"></a><span id="l22.83" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l22.84"></a><span id="l22.84" class="difflineplus">+});</span>
<a href="#l22.85"></a><span id="l22.85" class="difflineplus">+</span>
<a href="#l22.86"></a><span id="l22.86" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l22.87"></a><span id="l22.87">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l22.88"></a><span id="l22.88">   closeAllEventDialogs();</span>
<a href="#l22.89"></a><span id="l22.89" class="difflineminus">-}</span>
<a href="#l22.90"></a><span id="l22.90" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1">rename from calendar/test/mozmill/cal-recurrence/testBiweeklyRecurrence.js</span>
<a href="#l23.2"></a><span id="l23.2">rename to calendar/test/browser/recurrence/browser_biweekly.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineminus">--- a/calendar/test/mozmill/cal-recurrence/testBiweeklyRecurrence.js</span>
<a href="#l23.4"></a><span id="l23.4" class="difflineplus">+++ b/calendar/test/browser/recurrence/browser_biweekly.js</span>
<a href="#l23.5"></a><span id="l23.5" class="difflineat">@@ -1,43 +1,39 @@</span>
<a href="#l23.6"></a><span id="l23.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l23.7"></a><span id="l23.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l23.8"></a><span id="l23.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l23.9"></a><span id="l23.9"> </span>
<a href="#l23.10"></a><span id="l23.10" class="difflineminus">-var CALENDARNAME, EVENTPATH, EVENT_BOX, CANVAS_BOX;</span>
<a href="#l23.11"></a><span id="l23.11" class="difflineminus">-var helpersForController, handleOccurrencePrompt, switchToView, goToDate, invokeEventDialog;</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-var viewForward, closeAllEventDialogs, deleteCalendars, createCalendar, menulistSelect;</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l23.14"></a><span id="l23.14" class="difflineplus">+</span>
<a href="#l23.15"></a><span id="l23.15" class="difflineplus">+var {</span>
<a href="#l23.16"></a><span id="l23.16" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l23.17"></a><span id="l23.17" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l23.18"></a><span id="l23.18" class="difflineplus">+  EVENTPATH,</span>
<a href="#l23.19"></a><span id="l23.19" class="difflineplus">+  EVENT_BOX,</span>
<a href="#l23.20"></a><span id="l23.20" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l23.21"></a><span id="l23.21" class="difflineplus">+  createCalendar,</span>
<a href="#l23.22"></a><span id="l23.22" class="difflineplus">+  deleteCalendars,</span>
<a href="#l23.23"></a><span id="l23.23" class="difflineplus">+  goToDate,</span>
<a href="#l23.24"></a><span id="l23.24" class="difflineplus">+  handleOccurrencePrompt,</span>
<a href="#l23.25"></a><span id="l23.25" class="difflineplus">+  helpersForController,</span>
<a href="#l23.26"></a><span id="l23.26" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l23.27"></a><span id="l23.27" class="difflineplus">+  menulistSelect,</span>
<a href="#l23.28"></a><span id="l23.28" class="difflineplus">+  switchToView,</span>
<a href="#l23.29"></a><span id="l23.29" class="difflineplus">+  viewForward,</span>
<a href="#l23.30"></a><span id="l23.30" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l23.31"></a><span id="l23.31" class="difflineplus">+</span>
<a href="#l23.32"></a><span id="l23.32" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l23.33"></a><span id="l23.33" class="difflineplus">+var { lookupEventBox } = helpersForController(controller);</span>
<a href="#l23.34"></a><span id="l23.34"> </span>
<a href="#l23.35"></a><span id="l23.35"> const HOUR = 8;</span>
<a href="#l23.36"></a><span id="l23.36"> </span>
<a href="#l23.37"></a><span id="l23.37" class="difflineminus">-function setupModule(module) {</span>
<a href="#l23.38"></a><span id="l23.38" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l23.39"></a><span id="l23.39" class="difflineminus">-  ({</span>
<a href="#l23.40"></a><span id="l23.40" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l23.41"></a><span id="l23.41" class="difflineminus">-    EVENTPATH,</span>
<a href="#l23.42"></a><span id="l23.42" class="difflineminus">-    EVENT_BOX,</span>
<a href="#l23.43"></a><span id="l23.43" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l23.44"></a><span id="l23.44" class="difflineminus">-    helpersForController,</span>
<a href="#l23.45"></a><span id="l23.45" class="difflineminus">-    handleOccurrencePrompt,</span>
<a href="#l23.46"></a><span id="l23.46" class="difflineminus">-    switchToView,</span>
<a href="#l23.47"></a><span id="l23.47" class="difflineminus">-    goToDate,</span>
<a href="#l23.48"></a><span id="l23.48" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l23.49"></a><span id="l23.49" class="difflineminus">-    viewForward,</span>
<a href="#l23.50"></a><span id="l23.50" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l23.51"></a><span id="l23.51" class="difflineminus">-    deleteCalendars,</span>
<a href="#l23.52"></a><span id="l23.52" class="difflineminus">-    createCalendar,</span>
<a href="#l23.53"></a><span id="l23.53" class="difflineminus">-    menulistSelect,</span>
<a href="#l23.54"></a><span id="l23.54" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l23.55"></a><span id="l23.55" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l23.56"></a><span id="l23.56" class="difflineminus">-</span>
<a href="#l23.57"></a><span id="l23.57" class="difflineplus">+add_task(function testBiweeklyRecurrence() {</span>
<a href="#l23.58"></a><span id="l23.58" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l23.59"></a><span id="l23.59">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l23.60"></a><span id="l23.60" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l23.61"></a><span id="l23.61" class="difflineminus">-}</span>
<a href="#l23.62"></a><span id="l23.62" class="difflineminus">-</span>
<a href="#l23.63"></a><span id="l23.63" class="difflineminus">-function testBiweeklyRecurrence() {</span>
<a href="#l23.64"></a><span id="l23.64">   goToDate(controller, 2009, 1, 31);</span>
<a href="#l23.65"></a><span id="l23.65"> </span>
<a href="#l23.66"></a><span id="l23.66">   // Create biweekly event.</span>
<a href="#l23.67"></a><span id="l23.67">   let eventBox = lookupEventBox(&quot;day&quot;, CANVAS_BOX, null, 1, HOUR);</span>
<a href="#l23.68"></a><span id="l23.68">   invokeEventDialog(controller, eventBox, (event, iframe) =&gt; {</span>
<a href="#l23.69"></a><span id="l23.69">     let { eid: eventid } = helpersForController(event);</span>
<a href="#l23.70"></a><span id="l23.70"> </span>
<a href="#l23.71"></a><span id="l23.71">     menulistSelect(eventid(&quot;item-repeat&quot;), &quot;bi.weekly&quot;, event);</span>
<a href="#l23.72"></a><span id="l23.72" class="difflineat">@@ -89,14 +85,16 @@ function testBiweeklyRecurrence() {</span>
<a href="#l23.73"></a><span id="l23.73">   controller.waitForElement(lookupEventBox(&quot;month&quot;, CANVAS_BOX, 2, 7, null, EVENTPATH));</span>
<a href="#l23.74"></a><span id="l23.74">   controller.assertNode(lookupEventBox(&quot;month&quot;, CANVAS_BOX, 4, 7, null, EVENTPATH));</span>
<a href="#l23.75"></a><span id="l23.75"> </span>
<a href="#l23.76"></a><span id="l23.76">   // Delete event.</span>
<a href="#l23.77"></a><span id="l23.77">   let box = lookupEventBox(&quot;month&quot;, CANVAS_BOX, 4, 7, null, EVENTPATH);</span>
<a href="#l23.78"></a><span id="l23.78">   controller.click(box);</span>
<a href="#l23.79"></a><span id="l23.79">   handleOccurrencePrompt(controller, box, &quot;delete&quot;, true);</span>
<a href="#l23.80"></a><span id="l23.80">   controller.waitForElementNotPresent(box);</span>
<a href="#l23.81"></a><span id="l23.81" class="difflineminus">-}</span>
<a href="#l23.82"></a><span id="l23.82"> </span>
<a href="#l23.83"></a><span id="l23.83" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l23.84"></a><span id="l23.84" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l23.85"></a><span id="l23.85" class="difflineplus">+});</span>
<a href="#l23.86"></a><span id="l23.86" class="difflineplus">+</span>
<a href="#l23.87"></a><span id="l23.87" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l23.88"></a><span id="l23.88">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l23.89"></a><span id="l23.89">   closeAllEventDialogs();</span>
<a href="#l23.90"></a><span id="l23.90" class="difflineminus">-}</span>
<a href="#l23.91"></a><span id="l23.91" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1">rename from calendar/test/mozmill/cal-recurrence/testDailyRecurrence.js</span>
<a href="#l24.2"></a><span id="l24.2">rename to calendar/test/browser/recurrence/browser_daily.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineminus">--- a/calendar/test/mozmill/cal-recurrence/testDailyRecurrence.js</span>
<a href="#l24.4"></a><span id="l24.4" class="difflineplus">+++ b/calendar/test/browser/recurrence/browser_daily.js</span>
<a href="#l24.5"></a><span id="l24.5" class="difflineat">@@ -1,47 +1,41 @@</span>
<a href="#l24.6"></a><span id="l24.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l24.7"></a><span id="l24.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l24.8"></a><span id="l24.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l24.9"></a><span id="l24.9"> </span>
<a href="#l24.10"></a><span id="l24.10" class="difflineminus">-var CALENDARNAME, EVENTPATH, EVENT_BOX, CANVAS_BOX;</span>
<a href="#l24.11"></a><span id="l24.11" class="difflineminus">-var helpersForController, handleOccurrencePrompt, invokeEventDialog, switchToView, goToDate;</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-var viewForward, viewBack, closeAllEventDialogs, createCalendar, deleteCalendars, menulistSelect;</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineminus">-var setData;</span>
<a href="#l24.14"></a><span id="l24.14" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l24.15"></a><span id="l24.15" class="difflineplus">+</span>
<a href="#l24.16"></a><span id="l24.16" class="difflineplus">+var {</span>
<a href="#l24.17"></a><span id="l24.17" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l24.18"></a><span id="l24.18" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l24.19"></a><span id="l24.19" class="difflineplus">+  EVENTPATH,</span>
<a href="#l24.20"></a><span id="l24.20" class="difflineplus">+  EVENT_BOX,</span>
<a href="#l24.21"></a><span id="l24.21" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l24.22"></a><span id="l24.22" class="difflineplus">+  createCalendar,</span>
<a href="#l24.23"></a><span id="l24.23" class="difflineplus">+  deleteCalendars,</span>
<a href="#l24.24"></a><span id="l24.24" class="difflineplus">+  goToDate,</span>
<a href="#l24.25"></a><span id="l24.25" class="difflineplus">+  handleOccurrencePrompt,</span>
<a href="#l24.26"></a><span id="l24.26" class="difflineplus">+  helpersForController,</span>
<a href="#l24.27"></a><span id="l24.27" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l24.28"></a><span id="l24.28" class="difflineplus">+  menulistSelect,</span>
<a href="#l24.29"></a><span id="l24.29" class="difflineplus">+  switchToView,</span>
<a href="#l24.30"></a><span id="l24.30" class="difflineplus">+  viewBack,</span>
<a href="#l24.31"></a><span id="l24.31" class="difflineplus">+  viewForward,</span>
<a href="#l24.32"></a><span id="l24.32" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l24.33"></a><span id="l24.33" class="difflineplus">+var { setData } = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;);</span>
<a href="#l24.34"></a><span id="l24.34" class="difflineplus">+</span>
<a href="#l24.35"></a><span id="l24.35" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l24.36"></a><span id="l24.36" class="difflineplus">+var { lookupEventBox } = helpersForController(controller);</span>
<a href="#l24.37"></a><span id="l24.37"> </span>
<a href="#l24.38"></a><span id="l24.38"> const HOUR = 8;</span>
<a href="#l24.39"></a><span id="l24.39"> </span>
<a href="#l24.40"></a><span id="l24.40" class="difflineminus">-function setupModule(module) {</span>
<a href="#l24.41"></a><span id="l24.41" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l24.42"></a><span id="l24.42" class="difflineminus">-  ({</span>
<a href="#l24.43"></a><span id="l24.43" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l24.44"></a><span id="l24.44" class="difflineminus">-    EVENTPATH,</span>
<a href="#l24.45"></a><span id="l24.45" class="difflineminus">-    EVENT_BOX,</span>
<a href="#l24.46"></a><span id="l24.46" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l24.47"></a><span id="l24.47" class="difflineminus">-    helpersForController,</span>
<a href="#l24.48"></a><span id="l24.48" class="difflineminus">-    handleOccurrencePrompt,</span>
<a href="#l24.49"></a><span id="l24.49" class="difflineminus">-    switchToView,</span>
<a href="#l24.50"></a><span id="l24.50" class="difflineminus">-    goToDate,</span>
<a href="#l24.51"></a><span id="l24.51" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l24.52"></a><span id="l24.52" class="difflineminus">-    viewForward,</span>
<a href="#l24.53"></a><span id="l24.53" class="difflineminus">-    viewBack,</span>
<a href="#l24.54"></a><span id="l24.54" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l24.55"></a><span id="l24.55" class="difflineminus">-    deleteCalendars,</span>
<a href="#l24.56"></a><span id="l24.56" class="difflineminus">-    createCalendar,</span>
<a href="#l24.57"></a><span id="l24.57" class="difflineminus">-    menulistSelect,</span>
<a href="#l24.58"></a><span id="l24.58" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l24.59"></a><span id="l24.59" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l24.60"></a><span id="l24.60" class="difflineminus">-</span>
<a href="#l24.61"></a><span id="l24.61" class="difflineminus">-  ({ setData } = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;));</span>
<a href="#l24.62"></a><span id="l24.62" class="difflineminus">-</span>
<a href="#l24.63"></a><span id="l24.63" class="difflineplus">+add_task(function testDailyRecurrence() {</span>
<a href="#l24.64"></a><span id="l24.64" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l24.65"></a><span id="l24.65">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l24.66"></a><span id="l24.66" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l24.67"></a><span id="l24.67" class="difflineminus">-}</span>
<a href="#l24.68"></a><span id="l24.68" class="difflineminus">-</span>
<a href="#l24.69"></a><span id="l24.69" class="difflineminus">-function testDailyRecurrence() {</span>
<a href="#l24.70"></a><span id="l24.70">   goToDate(controller, 2009, 1, 1);</span>
<a href="#l24.71"></a><span id="l24.71"> </span>
<a href="#l24.72"></a><span id="l24.72">   // Create daily event.</span>
<a href="#l24.73"></a><span id="l24.73">   let eventBox = lookupEventBox(&quot;day&quot;, CANVAS_BOX, null, 1, HOUR);</span>
<a href="#l24.74"></a><span id="l24.74">   invokeEventDialog(controller, eventBox, (event, iframe) =&gt; {</span>
<a href="#l24.75"></a><span id="l24.75">     let { eid: eventid } = helpersForController(event);</span>
<a href="#l24.76"></a><span id="l24.76"> </span>
<a href="#l24.77"></a><span id="l24.77">     setData(event, iframe, { repeat: &quot;daily&quot;, repeatuntil: new Date(2009, 2, 20) });</span>
<a href="#l24.78"></a><span id="l24.78" class="difflineat">@@ -171,14 +165,16 @@ function testDailyRecurrence() {</span>
<a href="#l24.79"></a><span id="l24.79">     controller.assertNodeNotExist(lookupEventBox(&quot;month&quot;, EVENT_BOX, i, 7, null, EVENTPATH));</span>
<a href="#l24.80"></a><span id="l24.80">   }</span>
<a href="#l24.81"></a><span id="l24.81"> </span>
<a href="#l24.82"></a><span id="l24.82">   // Delete event.</span>
<a href="#l24.83"></a><span id="l24.83">   day = lookupEventBox(&quot;month&quot;, CANVAS_BOX, 1, 5, null, EVENTPATH);</span>
<a href="#l24.84"></a><span id="l24.84">   controller.click(day);</span>
<a href="#l24.85"></a><span id="l24.85">   handleOccurrencePrompt(controller, day, &quot;delete&quot;, true);</span>
<a href="#l24.86"></a><span id="l24.86">   controller.waitForElementNotPresent(day);</span>
<a href="#l24.87"></a><span id="l24.87" class="difflineminus">-}</span>
<a href="#l24.88"></a><span id="l24.88"> </span>
<a href="#l24.89"></a><span id="l24.89" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l24.90"></a><span id="l24.90" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l24.91"></a><span id="l24.91" class="difflineplus">+});</span>
<a href="#l24.92"></a><span id="l24.92" class="difflineplus">+</span>
<a href="#l24.93"></a><span id="l24.93" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l24.94"></a><span id="l24.94">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l24.95"></a><span id="l24.95">   closeAllEventDialogs();</span>
<a href="#l24.96"></a><span id="l24.96" class="difflineminus">-}</span>
<a href="#l24.97"></a><span id="l24.97" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1">rename from calendar/test/mozmill/cal-recurrence/testLastDayOfMonthRecurrence.js</span>
<a href="#l25.2"></a><span id="l25.2">rename to calendar/test/browser/recurrence/browser_lastDayOfMonth.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineminus">--- a/calendar/test/mozmill/cal-recurrence/testLastDayOfMonthRecurrence.js</span>
<a href="#l25.4"></a><span id="l25.4" class="difflineplus">+++ b/calendar/test/browser/recurrence/browser_lastDayOfMonth.js</span>
<a href="#l25.5"></a><span id="l25.5" class="difflineat">@@ -1,52 +1,45 @@</span>
<a href="#l25.6"></a><span id="l25.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l25.7"></a><span id="l25.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l25.8"></a><span id="l25.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l25.9"></a><span id="l25.9"> </span>
<a href="#l25.10"></a><span id="l25.10" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l25.11"></a><span id="l25.11" class="difflineplus">+</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineplus">+var {</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l25.14"></a><span id="l25.14" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l25.15"></a><span id="l25.15" class="difflineplus">+  EVENTPATH,</span>
<a href="#l25.16"></a><span id="l25.16" class="difflineplus">+  EVENT_BOX,</span>
<a href="#l25.17"></a><span id="l25.17" class="difflineplus">+  TIMEOUT_MODAL_DIALOG,</span>
<a href="#l25.18"></a><span id="l25.18" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l25.19"></a><span id="l25.19" class="difflineplus">+  createCalendar,</span>
<a href="#l25.20"></a><span id="l25.20" class="difflineplus">+  deleteCalendars,</span>
<a href="#l25.21"></a><span id="l25.21" class="difflineplus">+  goToDate,</span>
<a href="#l25.22"></a><span id="l25.22" class="difflineplus">+  handleOccurrencePrompt,</span>
<a href="#l25.23"></a><span id="l25.23" class="difflineplus">+  helpersForController,</span>
<a href="#l25.24"></a><span id="l25.24" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l25.25"></a><span id="l25.25" class="difflineplus">+  menulistSelect,</span>
<a href="#l25.26"></a><span id="l25.26" class="difflineplus">+  switchToView,</span>
<a href="#l25.27"></a><span id="l25.27" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l25.28"></a><span id="l25.28" class="difflineplus">+var { REC_DLG_ACCEPT } = ChromeUtils.import(</span>
<a href="#l25.29"></a><span id="l25.29" class="difflineplus">+  &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l25.30"></a><span id="l25.30" class="difflineplus">+);</span>
<a href="#l25.31"></a><span id="l25.31"> var { plan_for_modal_dialog, wait_for_modal_dialog } = ChromeUtils.import(</span>
<a href="#l25.32"></a><span id="l25.32">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l25.33"></a><span id="l25.33"> );</span>
<a href="#l25.34"></a><span id="l25.34"> </span>
<a href="#l25.35"></a><span id="l25.35" class="difflineminus">-var TIMEOUT_MODAL_DIALOG, CALENDARNAME, EVENTPATH, EVENT_BOX, CANVAS_BOX;</span>
<a href="#l25.36"></a><span id="l25.36" class="difflineminus">-var helpersForController, handleOccurrencePrompt, switchToView, goToDate;</span>
<a href="#l25.37"></a><span id="l25.37" class="difflineminus">-var invokeEventDialog, closeAllEventDialogs, deleteCalendars, createCalendar, menulistSelect;</span>
<a href="#l25.38"></a><span id="l25.38" class="difflineminus">-var REC_DLG_ACCEPT;</span>
<a href="#l25.39"></a><span id="l25.39" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l25.40"></a><span id="l25.40" class="difflineplus">+var { lookupEventBox } = helpersForController(controller);</span>
<a href="#l25.41"></a><span id="l25.41"> </span>
<a href="#l25.42"></a><span id="l25.42"> const HOUR = 8;</span>
<a href="#l25.43"></a><span id="l25.43"> </span>
<a href="#l25.44"></a><span id="l25.44" class="difflineminus">-function setupModule(module) {</span>
<a href="#l25.45"></a><span id="l25.45" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l25.46"></a><span id="l25.46" class="difflineminus">-  ({</span>
<a href="#l25.47"></a><span id="l25.47" class="difflineminus">-    TIMEOUT_MODAL_DIALOG,</span>
<a href="#l25.48"></a><span id="l25.48" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l25.49"></a><span id="l25.49" class="difflineminus">-    EVENTPATH,</span>
<a href="#l25.50"></a><span id="l25.50" class="difflineminus">-    EVENT_BOX,</span>
<a href="#l25.51"></a><span id="l25.51" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l25.52"></a><span id="l25.52" class="difflineminus">-    helpersForController,</span>
<a href="#l25.53"></a><span id="l25.53" class="difflineminus">-    handleOccurrencePrompt,</span>
<a href="#l25.54"></a><span id="l25.54" class="difflineminus">-    switchToView,</span>
<a href="#l25.55"></a><span id="l25.55" class="difflineminus">-    goToDate,</span>
<a href="#l25.56"></a><span id="l25.56" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l25.57"></a><span id="l25.57" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l25.58"></a><span id="l25.58" class="difflineminus">-    deleteCalendars,</span>
<a href="#l25.59"></a><span id="l25.59" class="difflineminus">-    createCalendar,</span>
<a href="#l25.60"></a><span id="l25.60" class="difflineminus">-    menulistSelect,</span>
<a href="#l25.61"></a><span id="l25.61" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l25.62"></a><span id="l25.62" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l25.63"></a><span id="l25.63" class="difflineminus">-</span>
<a href="#l25.64"></a><span id="l25.64" class="difflineminus">-  ({ REC_DLG_ACCEPT } = ChromeUtils.import(</span>
<a href="#l25.65"></a><span id="l25.65" class="difflineminus">-    &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l25.66"></a><span id="l25.66" class="difflineminus">-  ));</span>
<a href="#l25.67"></a><span id="l25.67" class="difflineminus">-</span>
<a href="#l25.68"></a><span id="l25.68" class="difflineplus">+add_task(function testLastDayOfMonthRecurrence() {</span>
<a href="#l25.69"></a><span id="l25.69" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l25.70"></a><span id="l25.70">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l25.71"></a><span id="l25.71" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l25.72"></a><span id="l25.72" class="difflineminus">-}</span>
<a href="#l25.73"></a><span id="l25.73" class="difflineminus">-</span>
<a href="#l25.74"></a><span id="l25.74" class="difflineminus">-function testLastDayOfMonthRecurrence() {</span>
<a href="#l25.75"></a><span id="l25.75">   goToDate(controller, 2008, 1, 31); // Start with a leap year.</span>
<a href="#l25.76"></a><span id="l25.76"> </span>
<a href="#l25.77"></a><span id="l25.77">   // Create monthly recurring event.</span>
<a href="#l25.78"></a><span id="l25.78">   let eventBox = lookupEventBox(&quot;day&quot;, CANVAS_BOX, null, 1, HOUR);</span>
<a href="#l25.79"></a><span id="l25.79">   invokeEventDialog(controller, eventBox, (event, iframe) =&gt; {</span>
<a href="#l25.80"></a><span id="l25.80">     let { eid: eventid } = helpersForController(event);</span>
<a href="#l25.81"></a><span id="l25.81"> </span>
<a href="#l25.82"></a><span id="l25.82">     plan_for_modal_dialog(&quot;Calendar:EventDialog:Recurrence&quot;, setRecurrence);</span>
<a href="#l25.83"></a><span id="l25.83" class="difflineat">@@ -103,17 +96,19 @@ function testLastDayOfMonthRecurrence() </span>
<a href="#l25.84"></a><span id="l25.84"> </span>
<a href="#l25.85"></a><span id="l25.85">   // Delete event.</span>
<a href="#l25.86"></a><span id="l25.86">   goToDate(controller, checkingData[0][0], checkingData[0][1], checkingData[0][2]);</span>
<a href="#l25.87"></a><span id="l25.87">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l25.88"></a><span id="l25.88">   let box = lookupEventBox(&quot;day&quot;, EVENT_BOX, null, 1, null, EVENTPATH);</span>
<a href="#l25.89"></a><span id="l25.89">   controller.waitThenClick(box);</span>
<a href="#l25.90"></a><span id="l25.90">   handleOccurrencePrompt(controller, box, &quot;delete&quot;, true);</span>
<a href="#l25.91"></a><span id="l25.91">   controller.waitForElementNotPresent(box);</span>
<a href="#l25.92"></a><span id="l25.92" class="difflineminus">-}</span>
<a href="#l25.93"></a><span id="l25.93" class="difflineplus">+</span>
<a href="#l25.94"></a><span id="l25.94" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l25.95"></a><span id="l25.95" class="difflineplus">+});</span>
<a href="#l25.96"></a><span id="l25.96"> </span>
<a href="#l25.97"></a><span id="l25.97"> function setRecurrence(recurrence) {</span>
<a href="#l25.98"></a><span id="l25.98">   let { sleep: recsleep, lookup: reclookup, eid: recid } = helpersForController(recurrence);</span>
<a href="#l25.99"></a><span id="l25.99"> </span>
<a href="#l25.100"></a><span id="l25.100">   // monthly</span>
<a href="#l25.101"></a><span id="l25.101">   menulistSelect(recid(&quot;period-list&quot;), &quot;2&quot;, recurrence);</span>
<a href="#l25.102"></a><span id="l25.102"> </span>
<a href="#l25.103"></a><span id="l25.103">   // last day of month</span>
<a href="#l25.104"></a><span id="l25.104" class="difflineat">@@ -121,12 +116,12 @@ function setRecurrence(recurrence) {</span>
<a href="#l25.105"></a><span id="l25.105">   menulistSelect(recid(&quot;monthly-ordinal&quot;), &quot;-1&quot;, recurrence);</span>
<a href="#l25.106"></a><span id="l25.106">   menulistSelect(recid(&quot;monthly-weekday&quot;), &quot;-1&quot;, recurrence);</span>
<a href="#l25.107"></a><span id="l25.107">   recsleep();</span>
<a href="#l25.108"></a><span id="l25.108"> </span>
<a href="#l25.109"></a><span id="l25.109">   // Close dialog.</span>
<a href="#l25.110"></a><span id="l25.110">   recurrence.click(reclookup(REC_DLG_ACCEPT));</span>
<a href="#l25.111"></a><span id="l25.111"> }</span>
<a href="#l25.112"></a><span id="l25.112"> </span>
<a href="#l25.113"></a><span id="l25.113" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l25.114"></a><span id="l25.114" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l25.115"></a><span id="l25.115">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l25.116"></a><span id="l25.116">   closeAllEventDialogs();</span>
<a href="#l25.117"></a><span id="l25.117" class="difflineminus">-}</span>
<a href="#l25.118"></a><span id="l25.118" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1">rename from calendar/test/mozmill/cal-recurrence/testWeeklyNRecurrence.js</span>
<a href="#l26.2"></a><span id="l26.2">rename to calendar/test/browser/recurrence/browser_weeklyN.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineminus">--- a/calendar/test/mozmill/cal-recurrence/testWeeklyNRecurrence.js</span>
<a href="#l26.4"></a><span id="l26.4" class="difflineplus">+++ b/calendar/test/browser/recurrence/browser_weeklyN.js</span>
<a href="#l26.5"></a><span id="l26.5" class="difflineat">@@ -1,55 +1,48 @@</span>
<a href="#l26.6"></a><span id="l26.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l26.7"></a><span id="l26.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l26.8"></a><span id="l26.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l26.9"></a><span id="l26.9"> </span>
<a href="#l26.10"></a><span id="l26.10" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l26.11"></a><span id="l26.11" class="difflineplus">+</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineplus">+var {</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l26.14"></a><span id="l26.14" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l26.15"></a><span id="l26.15" class="difflineplus">+  EVENTPATH,</span>
<a href="#l26.16"></a><span id="l26.16" class="difflineplus">+  EVENT_BOX,</span>
<a href="#l26.17"></a><span id="l26.17" class="difflineplus">+  TIMEOUT_MODAL_DIALOG,</span>
<a href="#l26.18"></a><span id="l26.18" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l26.19"></a><span id="l26.19" class="difflineplus">+  createCalendar,</span>
<a href="#l26.20"></a><span id="l26.20" class="difflineplus">+  deleteCalendars,</span>
<a href="#l26.21"></a><span id="l26.21" class="difflineplus">+  goToDate,</span>
<a href="#l26.22"></a><span id="l26.22" class="difflineplus">+  handleOccurrencePrompt,</span>
<a href="#l26.23"></a><span id="l26.23" class="difflineplus">+  helpersForController,</span>
<a href="#l26.24"></a><span id="l26.24" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l26.25"></a><span id="l26.25" class="difflineplus">+  menulistSelect,</span>
<a href="#l26.26"></a><span id="l26.26" class="difflineplus">+  switchToView,</span>
<a href="#l26.27"></a><span id="l26.27" class="difflineplus">+  viewForward,</span>
<a href="#l26.28"></a><span id="l26.28" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l26.29"></a><span id="l26.29" class="difflineplus">+var { REC_DLG_ACCEPT, REC_DLG_DAYS } = ChromeUtils.import(</span>
<a href="#l26.30"></a><span id="l26.30" class="difflineplus">+  &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l26.31"></a><span id="l26.31" class="difflineplus">+);</span>
<a href="#l26.32"></a><span id="l26.32"> var { plan_for_modal_dialog, wait_for_modal_dialog } = ChromeUtils.import(</span>
<a href="#l26.33"></a><span id="l26.33">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l26.34"></a><span id="l26.34"> );</span>
<a href="#l26.35"></a><span id="l26.35"> </span>
<a href="#l26.36"></a><span id="l26.36"> var { cal } = ChromeUtils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l26.37"></a><span id="l26.37"> </span>
<a href="#l26.38"></a><span id="l26.38" class="difflineminus">-var TIMEOUT_MODAL_DIALOG, CALENDARNAME, EVENTPATH, EVENT_BOX, CANVAS_BOX;</span>
<a href="#l26.39"></a><span id="l26.39" class="difflineminus">-var helpersForController, handleOccurrencePrompt, switchToView, goToDate, invokeEventDialog;</span>
<a href="#l26.40"></a><span id="l26.40" class="difflineminus">-var viewForward, deleteCalendars, closeAllEventDialogs, createCalendar, menulistSelect;</span>
<a href="#l26.41"></a><span id="l26.41" class="difflineminus">-var REC_DLG_ACCEPT, REC_DLG_DAYS;</span>
<a href="#l26.42"></a><span id="l26.42" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l26.43"></a><span id="l26.43" class="difflineplus">+var { lookupEventBox } = helpersForController(controller);</span>
<a href="#l26.44"></a><span id="l26.44"> </span>
<a href="#l26.45"></a><span id="l26.45"> const HOUR = 8;</span>
<a href="#l26.46"></a><span id="l26.46"> </span>
<a href="#l26.47"></a><span id="l26.47" class="difflineminus">-function setupModule(module) {</span>
<a href="#l26.48"></a><span id="l26.48" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l26.49"></a><span id="l26.49" class="difflineminus">-  ({</span>
<a href="#l26.50"></a><span id="l26.50" class="difflineminus">-    TIMEOUT_MODAL_DIALOG,</span>
<a href="#l26.51"></a><span id="l26.51" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l26.52"></a><span id="l26.52" class="difflineminus">-    EVENTPATH,</span>
<a href="#l26.53"></a><span id="l26.53" class="difflineminus">-    EVENT_BOX,</span>
<a href="#l26.54"></a><span id="l26.54" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l26.55"></a><span id="l26.55" class="difflineminus">-    helpersForController,</span>
<a href="#l26.56"></a><span id="l26.56" class="difflineminus">-    handleOccurrencePrompt,</span>
<a href="#l26.57"></a><span id="l26.57" class="difflineminus">-    switchToView,</span>
<a href="#l26.58"></a><span id="l26.58" class="difflineminus">-    goToDate,</span>
<a href="#l26.59"></a><span id="l26.59" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l26.60"></a><span id="l26.60" class="difflineminus">-    viewForward,</span>
<a href="#l26.61"></a><span id="l26.61" class="difflineminus">-    deleteCalendars,</span>
<a href="#l26.62"></a><span id="l26.62" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l26.63"></a><span id="l26.63" class="difflineminus">-    createCalendar,</span>
<a href="#l26.64"></a><span id="l26.64" class="difflineminus">-    menulistSelect,</span>
<a href="#l26.65"></a><span id="l26.65" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l26.66"></a><span id="l26.66" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l26.67"></a><span id="l26.67" class="difflineminus">-</span>
<a href="#l26.68"></a><span id="l26.68" class="difflineminus">-  ({ REC_DLG_ACCEPT, REC_DLG_DAYS } = ChromeUtils.import(</span>
<a href="#l26.69"></a><span id="l26.69" class="difflineminus">-    &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l26.70"></a><span id="l26.70" class="difflineminus">-  ));</span>
<a href="#l26.71"></a><span id="l26.71" class="difflineminus">-</span>
<a href="#l26.72"></a><span id="l26.72" class="difflineplus">+add_task(function testWeeklyNRecurrence() {</span>
<a href="#l26.73"></a><span id="l26.73" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l26.74"></a><span id="l26.74">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l26.75"></a><span id="l26.75" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l26.76"></a><span id="l26.76" class="difflineminus">-}</span>
<a href="#l26.77"></a><span id="l26.77" class="difflineminus">-</span>
<a href="#l26.78"></a><span id="l26.78" class="difflineminus">-function testWeeklyNRecurrence() {</span>
<a href="#l26.79"></a><span id="l26.79">   goToDate(controller, 2009, 1, 5);</span>
<a href="#l26.80"></a><span id="l26.80"> </span>
<a href="#l26.81"></a><span id="l26.81">   // Create weekly recurring event.</span>
<a href="#l26.82"></a><span id="l26.82">   let eventBox = lookupEventBox(&quot;day&quot;, CANVAS_BOX, null, 1, HOUR);</span>
<a href="#l26.83"></a><span id="l26.83">   invokeEventDialog(controller, eventBox, (event, iframe) =&gt; {</span>
<a href="#l26.84"></a><span id="l26.84">     let { eid: eventid } = helpersForController(event);</span>
<a href="#l26.85"></a><span id="l26.85"> </span>
<a href="#l26.86"></a><span id="l26.86">     plan_for_modal_dialog(&quot;Calendar:EventDialog:Recurrence&quot;, setRecurrence);</span>
<a href="#l26.87"></a><span id="l26.87" class="difflineat">@@ -94,17 +87,19 @@ function testWeeklyNRecurrence() {</span>
<a href="#l26.88"></a><span id="l26.88">   switchToView(controller, &quot;month&quot;);</span>
<a href="#l26.89"></a><span id="l26.89">   checkMultiWeekView(&quot;month&quot;);</span>
<a href="#l26.90"></a><span id="l26.90"> </span>
<a href="#l26.91"></a><span id="l26.91">   // Delete event.</span>
<a href="#l26.92"></a><span id="l26.92">   box = lookupEventBox(&quot;month&quot;, CANVAS_BOX, 2, 2, null, EVENTPATH);</span>
<a href="#l26.93"></a><span id="l26.93">   controller.click(box);</span>
<a href="#l26.94"></a><span id="l26.94">   handleOccurrencePrompt(controller, box, &quot;delete&quot;, true);</span>
<a href="#l26.95"></a><span id="l26.95">   controller.waitForElementNotPresent(box);</span>
<a href="#l26.96"></a><span id="l26.96" class="difflineminus">-}</span>
<a href="#l26.97"></a><span id="l26.97" class="difflineplus">+</span>
<a href="#l26.98"></a><span id="l26.98" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l26.99"></a><span id="l26.99" class="difflineplus">+});</span>
<a href="#l26.100"></a><span id="l26.100"> </span>
<a href="#l26.101"></a><span id="l26.101"> function setRecurrence(recurrence) {</span>
<a href="#l26.102"></a><span id="l26.102">   let { sleep: recsleep, lookup: reclookup, eid: recid } = helpersForController(recurrence);</span>
<a href="#l26.103"></a><span id="l26.103"> </span>
<a href="#l26.104"></a><span id="l26.104">   // weekly</span>
<a href="#l26.105"></a><span id="l26.105">   recurrence.waitForElement(recid(&quot;period-list&quot;));</span>
<a href="#l26.106"></a><span id="l26.106">   menulistSelect(recid(&quot;period-list&quot;), &quot;1&quot;, recurrence);</span>
<a href="#l26.107"></a><span id="l26.107">   recsleep();</span>
<a href="#l26.108"></a><span id="l26.108" class="difflineat">@@ -143,12 +138,12 @@ function checkMultiWeekView(view) {</span>
<a href="#l26.109"></a><span id="l26.109">   for (let i = 2; i &lt; 6; i++) {</span>
<a href="#l26.110"></a><span id="l26.110">     controller.assertNode(lookupEventBox(view, CANVAS_BOX, week, i, null, EVENTPATH));</span>
<a href="#l26.111"></a><span id="l26.111">   }</span>
<a href="#l26.112"></a><span id="l26.112"> </span>
<a href="#l26.113"></a><span id="l26.113">   // Saturday</span>
<a href="#l26.114"></a><span id="l26.114">   controller.assertNodeNotExist(lookupEventBox(view, CANVAS_BOX, week, 7, null, EVENTPATH));</span>
<a href="#l26.115"></a><span id="l26.115"> }</span>
<a href="#l26.116"></a><span id="l26.116"> </span>
<a href="#l26.117"></a><span id="l26.117" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l26.118"></a><span id="l26.118" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l26.119"></a><span id="l26.119">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l26.120"></a><span id="l26.120">   closeAllEventDialogs();</span>
<a href="#l26.121"></a><span id="l26.121" class="difflineminus">-}</span>
<a href="#l26.122"></a><span id="l26.122" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1">rename from calendar/test/mozmill/cal-recurrence/testWeeklyUntilRecurrence.js</span>
<a href="#l27.2"></a><span id="l27.2">rename to calendar/test/browser/recurrence/browser_weeklyUntil.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineminus">--- a/calendar/test/mozmill/cal-recurrence/testWeeklyUntilRecurrence.js</span>
<a href="#l27.4"></a><span id="l27.4" class="difflineplus">+++ b/calendar/test/browser/recurrence/browser_weeklyUntil.js</span>
<a href="#l27.5"></a><span id="l27.5" class="difflineat">@@ -1,57 +1,50 @@</span>
<a href="#l27.6"></a><span id="l27.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l27.7"></a><span id="l27.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l27.8"></a><span id="l27.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l27.9"></a><span id="l27.9"> </span>
<a href="#l27.10"></a><span id="l27.10" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l27.11"></a><span id="l27.11" class="difflineplus">+</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineplus">+var {</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l27.14"></a><span id="l27.14" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l27.15"></a><span id="l27.15" class="difflineplus">+  EVENTPATH,</span>
<a href="#l27.16"></a><span id="l27.16" class="difflineplus">+  EVENT_BOX,</span>
<a href="#l27.17"></a><span id="l27.17" class="difflineplus">+  SHORT_SLEEP,</span>
<a href="#l27.18"></a><span id="l27.18" class="difflineplus">+  TIMEOUT_MODAL_DIALOG,</span>
<a href="#l27.19"></a><span id="l27.19" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l27.20"></a><span id="l27.20" class="difflineplus">+  createCalendar,</span>
<a href="#l27.21"></a><span id="l27.21" class="difflineplus">+  deleteCalendars,</span>
<a href="#l27.22"></a><span id="l27.22" class="difflineplus">+  goToDate,</span>
<a href="#l27.23"></a><span id="l27.23" class="difflineplus">+  handleOccurrencePrompt,</span>
<a href="#l27.24"></a><span id="l27.24" class="difflineplus">+  helpersForController,</span>
<a href="#l27.25"></a><span id="l27.25" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l27.26"></a><span id="l27.26" class="difflineplus">+  menulistSelect,</span>
<a href="#l27.27"></a><span id="l27.27" class="difflineplus">+  switchToView,</span>
<a href="#l27.28"></a><span id="l27.28" class="difflineplus">+  viewForward,</span>
<a href="#l27.29"></a><span id="l27.29" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l27.30"></a><span id="l27.30" class="difflineplus">+var { REC_DLG_ACCEPT, REC_DLG_DAYS, REC_DLG_UNTIL_INPUT } = ChromeUtils.import(</span>
<a href="#l27.31"></a><span id="l27.31" class="difflineplus">+  &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l27.32"></a><span id="l27.32" class="difflineplus">+);</span>
<a href="#l27.33"></a><span id="l27.33"> var { plan_for_modal_dialog, wait_for_modal_dialog } = ChromeUtils.import(</span>
<a href="#l27.34"></a><span id="l27.34">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l27.35"></a><span id="l27.35"> );</span>
<a href="#l27.36"></a><span id="l27.36"> </span>
<a href="#l27.37"></a><span id="l27.37"> var { cal } = ChromeUtils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l27.38"></a><span id="l27.38"> </span>
<a href="#l27.39"></a><span id="l27.39" class="difflineminus">-var SHORT_SLEEP, TIMEOUT_MODAL_DIALOG, CALENDARNAME, EVENTPATH, EVENT_BOX, CANVAS_BOX;</span>
<a href="#l27.40"></a><span id="l27.40" class="difflineminus">-var helpersForController, handleOccurrencePrompt, switchToView, goToDate, invokeEventDialog;</span>
<a href="#l27.41"></a><span id="l27.41" class="difflineminus">-var viewForward, closeAllEventDialogs, deleteCalendars, createCalendar, menulistSelect;</span>
<a href="#l27.42"></a><span id="l27.42" class="difflineminus">-var REC_DLG_DAYS, REC_DLG_ACCEPT, REC_DLG_UNTIL_INPUT;</span>
<a href="#l27.43"></a><span id="l27.43" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l27.44"></a><span id="l27.44" class="difflineplus">+var { lookupEventBox } = helpersForController(controller);</span>
<a href="#l27.45"></a><span id="l27.45"> </span>
<a href="#l27.46"></a><span id="l27.46"> const ENDDATE = new Date(2009, 0, 26); // Last Monday in month.</span>
<a href="#l27.47"></a><span id="l27.47"> const HOUR = 8;</span>
<a href="#l27.48"></a><span id="l27.48"> </span>
<a href="#l27.49"></a><span id="l27.49" class="difflineminus">-function setupModule(module) {</span>
<a href="#l27.50"></a><span id="l27.50" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l27.51"></a><span id="l27.51" class="difflineminus">-  ({</span>
<a href="#l27.52"></a><span id="l27.52" class="difflineminus">-    SHORT_SLEEP,</span>
<a href="#l27.53"></a><span id="l27.53" class="difflineminus">-    TIMEOUT_MODAL_DIALOG,</span>
<a href="#l27.54"></a><span id="l27.54" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l27.55"></a><span id="l27.55" class="difflineminus">-    EVENTPATH,</span>
<a href="#l27.56"></a><span id="l27.56" class="difflineminus">-    EVENT_BOX,</span>
<a href="#l27.57"></a><span id="l27.57" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l27.58"></a><span id="l27.58" class="difflineminus">-    helpersForController,</span>
<a href="#l27.59"></a><span id="l27.59" class="difflineminus">-    handleOccurrencePrompt,</span>
<a href="#l27.60"></a><span id="l27.60" class="difflineminus">-    switchToView,</span>
<a href="#l27.61"></a><span id="l27.61" class="difflineminus">-    goToDate,</span>
<a href="#l27.62"></a><span id="l27.62" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l27.63"></a><span id="l27.63" class="difflineminus">-    viewForward,</span>
<a href="#l27.64"></a><span id="l27.64" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l27.65"></a><span id="l27.65" class="difflineminus">-    deleteCalendars,</span>
<a href="#l27.66"></a><span id="l27.66" class="difflineminus">-    createCalendar,</span>
<a href="#l27.67"></a><span id="l27.67" class="difflineminus">-    menulistSelect,</span>
<a href="#l27.68"></a><span id="l27.68" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l27.69"></a><span id="l27.69" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l27.70"></a><span id="l27.70" class="difflineminus">-</span>
<a href="#l27.71"></a><span id="l27.71" class="difflineminus">-  ({ REC_DLG_DAYS, REC_DLG_ACCEPT, REC_DLG_UNTIL_INPUT } = ChromeUtils.import(</span>
<a href="#l27.72"></a><span id="l27.72" class="difflineminus">-    &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l27.73"></a><span id="l27.73" class="difflineminus">-  ));</span>
<a href="#l27.74"></a><span id="l27.74" class="difflineminus">-</span>
<a href="#l27.75"></a><span id="l27.75" class="difflineplus">+add_task(function testWeeklyUntilRecurrence() {</span>
<a href="#l27.76"></a><span id="l27.76" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l27.77"></a><span id="l27.77">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l27.78"></a><span id="l27.78" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l27.79"></a><span id="l27.79" class="difflineminus">-}</span>
<a href="#l27.80"></a><span id="l27.80" class="difflineminus">-</span>
<a href="#l27.81"></a><span id="l27.81" class="difflineminus">-function testWeeklyUntilRecurrence() {</span>
<a href="#l27.82"></a><span id="l27.82">   goToDate(controller, 2009, 1, 5); // Monday</span>
<a href="#l27.83"></a><span id="l27.83"> </span>
<a href="#l27.84"></a><span id="l27.84">   // Create weekly recurring event.</span>
<a href="#l27.85"></a><span id="l27.85">   let eventBox = lookupEventBox(&quot;day&quot;, CANVAS_BOX, null, 1, HOUR);</span>
<a href="#l27.86"></a><span id="l27.86">   invokeEventDialog(controller, eventBox, (event, iframe) =&gt; {</span>
<a href="#l27.87"></a><span id="l27.87">     let { eid: eventid } = helpersForController(event);</span>
<a href="#l27.88"></a><span id="l27.88"> </span>
<a href="#l27.89"></a><span id="l27.89">     plan_for_modal_dialog(&quot;Calendar:EventDialog:Recurrence&quot;, setRecurrence);</span>
<a href="#l27.90"></a><span id="l27.90" class="difflineat">@@ -117,17 +110,19 @@ function testWeeklyUntilRecurrence() {</span>
<a href="#l27.91"></a><span id="l27.91">   goToDate(controller, 2009, 1, 5);</span>
<a href="#l27.92"></a><span id="l27.92">   checkMultiWeekView(&quot;month&quot;);</span>
<a href="#l27.93"></a><span id="l27.93"> </span>
<a href="#l27.94"></a><span id="l27.94">   // Delete event.</span>
<a href="#l27.95"></a><span id="l27.95">   box = lookupEventBox(&quot;month&quot;, CANVAS_BOX, 2, 2, null, EVENTPATH);</span>
<a href="#l27.96"></a><span id="l27.96">   controller.click(box);</span>
<a href="#l27.97"></a><span id="l27.97">   handleOccurrencePrompt(controller, box, &quot;delete&quot;, true);</span>
<a href="#l27.98"></a><span id="l27.98">   controller.waitForElementNotPresent(box);</span>
<a href="#l27.99"></a><span id="l27.99" class="difflineminus">-}</span>
<a href="#l27.100"></a><span id="l27.100" class="difflineplus">+</span>
<a href="#l27.101"></a><span id="l27.101" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l27.102"></a><span id="l27.102" class="difflineplus">+});</span>
<a href="#l27.103"></a><span id="l27.103"> </span>
<a href="#l27.104"></a><span id="l27.104"> function setRecurrence(recurrence) {</span>
<a href="#l27.105"></a><span id="l27.105">   let { sleep: recsleep, lookup: reclookup, eid: recid } = helpersForController(recurrence);</span>
<a href="#l27.106"></a><span id="l27.106"> </span>
<a href="#l27.107"></a><span id="l27.107">   // weekly</span>
<a href="#l27.108"></a><span id="l27.108">   recurrence.waitForElement(recid(&quot;period-list&quot;));</span>
<a href="#l27.109"></a><span id="l27.109">   menulistSelect(recid(&quot;period-list&quot;), &quot;1&quot;, recurrence);</span>
<a href="#l27.110"></a><span id="l27.110"> </span>
<a href="#l27.111"></a><span id="l27.111" class="difflineat">@@ -184,12 +179,12 @@ function checkMultiWeekView(view) {</span>
<a href="#l27.112"></a><span id="l27.112"> </span>
<a href="#l27.113"></a><span id="l27.113">   // Monday, last occurrence</span>
<a href="#l27.114"></a><span id="l27.114">   controller.assertNode(lookupEventBox(view, CANVAS_BOX, startWeek + 3, 2, null, EVENTPATH));</span>
<a href="#l27.115"></a><span id="l27.115"> </span>
<a href="#l27.116"></a><span id="l27.116">   // Wednesday</span>
<a href="#l27.117"></a><span id="l27.117">   controller.assertNodeNotExist(lookupEventBox(view, EVENT_BOX, startWeek + 3, 4, null, EVENTPATH));</span>
<a href="#l27.118"></a><span id="l27.118"> }</span>
<a href="#l27.119"></a><span id="l27.119"> </span>
<a href="#l27.120"></a><span id="l27.120" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l27.121"></a><span id="l27.121" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l27.122"></a><span id="l27.122">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l27.123"></a><span id="l27.123">   closeAllEventDialogs();</span>
<a href="#l27.124"></a><span id="l27.124" class="difflineminus">-}</span>
<a href="#l27.125"></a><span id="l27.125" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1">rename from calendar/test/mozmill/cal-recurrence/testWeeklyWithExceptionRecurrence.js</span>
<a href="#l28.2"></a><span id="l28.2">rename to calendar/test/browser/recurrence/browser_weeklyWithException.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineminus">--- a/calendar/test/mozmill/cal-recurrence/testWeeklyWithExceptionRecurrence.js</span>
<a href="#l28.4"></a><span id="l28.4" class="difflineplus">+++ b/calendar/test/browser/recurrence/browser_weeklyWithException.js</span>
<a href="#l28.5"></a><span id="l28.5" class="difflineat">@@ -1,61 +1,55 @@</span>
<a href="#l28.6"></a><span id="l28.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l28.7"></a><span id="l28.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l28.8"></a><span id="l28.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l28.9"></a><span id="l28.9"> </span>
<a href="#l28.10"></a><span id="l28.10" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l28.11"></a><span id="l28.11" class="difflineplus">+</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineplus">+var {</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l28.14"></a><span id="l28.14" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l28.15"></a><span id="l28.15" class="difflineplus">+  DAY_VIEW,</span>
<a href="#l28.16"></a><span id="l28.16" class="difflineplus">+  EVENTPATH,</span>
<a href="#l28.17"></a><span id="l28.17" class="difflineplus">+  EVENT_BOX,</span>
<a href="#l28.18"></a><span id="l28.18" class="difflineplus">+  TIMEOUT_MODAL_DIALOG,</span>
<a href="#l28.19"></a><span id="l28.19" class="difflineplus">+  WEEK_VIEW,</span>
<a href="#l28.20"></a><span id="l28.20" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l28.21"></a><span id="l28.21" class="difflineplus">+  createCalendar,</span>
<a href="#l28.22"></a><span id="l28.22" class="difflineplus">+  deleteCalendars,</span>
<a href="#l28.23"></a><span id="l28.23" class="difflineplus">+  goToDate,</span>
<a href="#l28.24"></a><span id="l28.24" class="difflineplus">+  handleOccurrencePrompt,</span>
<a href="#l28.25"></a><span id="l28.25" class="difflineplus">+  helpersForController,</span>
<a href="#l28.26"></a><span id="l28.26" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l28.27"></a><span id="l28.27" class="difflineplus">+  menulistSelect,</span>
<a href="#l28.28"></a><span id="l28.28" class="difflineplus">+  switchToView,</span>
<a href="#l28.29"></a><span id="l28.29" class="difflineplus">+  viewForward,</span>
<a href="#l28.30"></a><span id="l28.30" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l28.31"></a><span id="l28.31" class="difflineplus">+var {</span>
<a href="#l28.32"></a><span id="l28.32" class="difflineplus">+  REC_DLG_ACCEPT,</span>
<a href="#l28.33"></a><span id="l28.33" class="difflineplus">+  REC_DLG_DAYS,</span>
<a href="#l28.34"></a><span id="l28.34" class="difflineplus">+  REPEAT_DETAILS,</span>
<a href="#l28.35"></a><span id="l28.35" class="difflineplus">+  helpersForEditUI,</span>
<a href="#l28.36"></a><span id="l28.36" class="difflineplus">+  setData,</span>
<a href="#l28.37"></a><span id="l28.37" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;);</span>
<a href="#l28.38"></a><span id="l28.38"> var { plan_for_modal_dialog, wait_for_modal_dialog } = ChromeUtils.import(</span>
<a href="#l28.39"></a><span id="l28.39">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l28.40"></a><span id="l28.40"> );</span>
<a href="#l28.41"></a><span id="l28.41"> </span>
<a href="#l28.42"></a><span id="l28.42" class="difflineminus">-var TIMEOUT_MODAL_DIALOG, CALENDARNAME, EVENT_BOX, CANVAS_BOX;</span>
<a href="#l28.43"></a><span id="l28.43" class="difflineminus">-var DAY_VIEW, WEEK_VIEW, EVENTPATH;</span>
<a href="#l28.44"></a><span id="l28.44" class="difflineminus">-var helpersForController, handleOccurrencePrompt, switchToView, goToDate;</span>
<a href="#l28.45"></a><span id="l28.45" class="difflineminus">-var invokeEventDialog, viewForward, closeAllEventDialogs, deleteCalendars, createCalendar;</span>
<a href="#l28.46"></a><span id="l28.46" class="difflineminus">-var menulistSelect;</span>
<a href="#l28.47"></a><span id="l28.47" class="difflineminus">-var REPEAT_DETAILS, REC_DLG_ACCEPT, REC_DLG_DAYS;</span>
<a href="#l28.48"></a><span id="l28.48" class="difflineminus">-var helpersForEditUI, setData;</span>
<a href="#l28.49"></a><span id="l28.49" class="difflineplus">+var { cal } = ChromeUtils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l28.50"></a><span id="l28.50"> </span>
<a href="#l28.51"></a><span id="l28.51" class="difflineminus">-var { cal } = ChromeUtils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l28.52"></a><span id="l28.52" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l28.53"></a><span id="l28.53" class="difflineplus">+var { lookup, lookupEventBox } = helpersForController(controller);</span>
<a href="#l28.54"></a><span id="l28.54"> </span>
<a href="#l28.55"></a><span id="l28.55"> const HOUR = 8;</span>
<a href="#l28.56"></a><span id="l28.56"> const STARTDATE = new Date(2009, 0, 6);</span>
<a href="#l28.57"></a><span id="l28.57"> </span>
<a href="#l28.58"></a><span id="l28.58" class="difflineminus">-function setupModule(module) {</span>
<a href="#l28.59"></a><span id="l28.59" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l28.60"></a><span id="l28.60" class="difflineminus">-  ({</span>
<a href="#l28.61"></a><span id="l28.61" class="difflineminus">-    TIMEOUT_MODAL_DIALOG,</span>
<a href="#l28.62"></a><span id="l28.62" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l28.63"></a><span id="l28.63" class="difflineminus">-    EVENT_BOX,</span>
<a href="#l28.64"></a><span id="l28.64" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l28.65"></a><span id="l28.65" class="difflineminus">-    EVENTPATH,</span>
<a href="#l28.66"></a><span id="l28.66" class="difflineminus">-    DAY_VIEW,</span>
<a href="#l28.67"></a><span id="l28.67" class="difflineminus">-    WEEK_VIEW,</span>
<a href="#l28.68"></a><span id="l28.68" class="difflineminus">-    helpersForController,</span>
<a href="#l28.69"></a><span id="l28.69" class="difflineminus">-    handleOccurrencePrompt,</span>
<a href="#l28.70"></a><span id="l28.70" class="difflineminus">-    switchToView,</span>
<a href="#l28.71"></a><span id="l28.71" class="difflineminus">-    goToDate,</span>
<a href="#l28.72"></a><span id="l28.72" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l28.73"></a><span id="l28.73" class="difflineminus">-    viewForward,</span>
<a href="#l28.74"></a><span id="l28.74" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l28.75"></a><span id="l28.75" class="difflineminus">-    deleteCalendars,</span>
<a href="#l28.76"></a><span id="l28.76" class="difflineminus">-    createCalendar,</span>
<a href="#l28.77"></a><span id="l28.77" class="difflineminus">-    menulistSelect,</span>
<a href="#l28.78"></a><span id="l28.78" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l28.79"></a><span id="l28.79" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l28.80"></a><span id="l28.80" class="difflineminus">-</span>
<a href="#l28.81"></a><span id="l28.81" class="difflineminus">-  ({ REPEAT_DETAILS, REC_DLG_ACCEPT, REC_DLG_DAYS, helpersForEditUI, setData } = ChromeUtils.import(</span>
<a href="#l28.82"></a><span id="l28.82" class="difflineminus">-    &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l28.83"></a><span id="l28.83" class="difflineminus">-  ));</span>
<a href="#l28.84"></a><span id="l28.84" class="difflineminus">-</span>
<a href="#l28.85"></a><span id="l28.85" class="difflineplus">+add_task(function testWeeklyWithExceptionRecurrence() {</span>
<a href="#l28.86"></a><span id="l28.86" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l28.87"></a><span id="l28.87">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l28.88"></a><span id="l28.88" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l28.89"></a><span id="l28.89" class="difflineminus">-}</span>
<a href="#l28.90"></a><span id="l28.90" class="difflineminus">-</span>
<a href="#l28.91"></a><span id="l28.91" class="difflineminus">-function testWeeklyWithExceptionRecurrence() {</span>
<a href="#l28.92"></a><span id="l28.92">   goToDate(controller, 2009, 1, 5);</span>
<a href="#l28.93"></a><span id="l28.93"> </span>
<a href="#l28.94"></a><span id="l28.94">   // Create weekly recurring event.</span>
<a href="#l28.95"></a><span id="l28.95">   let eventBox = lookupEventBox(&quot;day&quot;, CANVAS_BOX, null, 1, HOUR);</span>
<a href="#l28.96"></a><span id="l28.96">   invokeEventDialog(controller, eventBox, (event, iframe) =&gt; {</span>
<a href="#l28.97"></a><span id="l28.97">     let { eid: eventid } = helpersForController(event);</span>
<a href="#l28.98"></a><span id="l28.98"> </span>
<a href="#l28.99"></a><span id="l28.99">     event.waitForElement(eventid(&quot;item-repeat&quot;));</span>
<a href="#l28.100"></a><span id="l28.100" class="difflineat">@@ -180,17 +174,19 @@ function testWeeklyWithExceptionRecurren</span>
<a href="#l28.101"></a><span id="l28.101"> </span>
<a href="#l28.102"></a><span id="l28.102">   // delete event</span>
<a href="#l28.103"></a><span id="l28.103">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l28.104"></a><span id="l28.104">   goToDate(controller, 2009, 1, 12);</span>
<a href="#l28.105"></a><span id="l28.105">   path = lookupEventBox(&quot;day&quot;, EVENT_BOX, null, 1, null, EVENTPATH);</span>
<a href="#l28.106"></a><span id="l28.106">   controller.click(path);</span>
<a href="#l28.107"></a><span id="l28.107">   handleOccurrencePrompt(controller, path, &quot;delete&quot;, true);</span>
<a href="#l28.108"></a><span id="l28.108">   controller.waitForElementNotPresent(path);</span>
<a href="#l28.109"></a><span id="l28.109" class="difflineminus">-}</span>
<a href="#l28.110"></a><span id="l28.110" class="difflineplus">+</span>
<a href="#l28.111"></a><span id="l28.111" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l28.112"></a><span id="l28.112" class="difflineplus">+});</span>
<a href="#l28.113"></a><span id="l28.113"> </span>
<a href="#l28.114"></a><span id="l28.114"> function setRecurrence(recurrence) {</span>
<a href="#l28.115"></a><span id="l28.115">   let { lookup: reclookup, eid: recid } = helpersForController(recurrence);</span>
<a href="#l28.116"></a><span id="l28.116"> </span>
<a href="#l28.117"></a><span id="l28.117">   // weekly</span>
<a href="#l28.118"></a><span id="l28.118">   menulistSelect(recid(&quot;period-list&quot;), &quot;1&quot;, recurrence);</span>
<a href="#l28.119"></a><span id="l28.119"> </span>
<a href="#l28.120"></a><span id="l28.120">   let mon = cal.l10n.getDateFmtString(&quot;day.2.Mmm&quot;);</span>
<a href="#l28.121"></a><span id="l28.121" class="difflineat">@@ -266,12 +262,12 @@ function checkMultiWeekView(view) {</span>
<a href="#l28.122"></a><span id="l28.122">   assertNodeLookup(view, CANVAS_BOX, startWeek + 1, 2, null, EVENTPATH);</span>
<a href="#l28.123"></a><span id="l28.123">   assertNodeLookup(view, CANVAS_BOX, startWeek + 1, 3, null, EVENTPATH);</span>
<a href="#l28.124"></a><span id="l28.124">   assertNodeLookup(view, CANVAS_BOX, startWeek + 1, 4, null, EVENTPATH);</span>
<a href="#l28.125"></a><span id="l28.125">   assertNodeNotExistLookup(view, EVENT_BOX, startWeek + 1, 5, null, EVENTPATH);</span>
<a href="#l28.126"></a><span id="l28.126">   assertNodeLookup(view, CANVAS_BOX, startWeek + 1, 6, null, EVENTPATH);</span>
<a href="#l28.127"></a><span id="l28.127">   assertNodeNotExistLookup(view, EVENT_BOX, startWeek + 1, 7, null, EVENTPATH);</span>
<a href="#l28.128"></a><span id="l28.128"> }</span>
<a href="#l28.129"></a><span id="l28.129"> </span>
<a href="#l28.130"></a><span id="l28.130" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l28.131"></a><span id="l28.131" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l28.132"></a><span id="l28.132">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l28.133"></a><span id="l28.133">   closeAllEventDialogs();</span>
<a href="#l28.134"></a><span id="l28.134" class="difflineminus">-}</span>
<a href="#l28.135"></a><span id="l28.135" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1">copy from calendar/test/browser/browser.ini</span>
<a href="#l29.2"></a><span id="l29.2">copy to calendar/test/browser/recurrenceRotated/browser.ini</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineminus">--- a/calendar/test/browser/browser.ini</span>
<a href="#l29.4"></a><span id="l29.4" class="difflineplus">+++ b/calendar/test/browser/recurrenceRotated/browser.ini</span>
<a href="#l29.5"></a><span id="l29.5" class="difflineat">@@ -1,17 +1,20 @@</span>
<a href="#l29.6"></a><span id="l29.6"> [default]</span>
<a href="#l29.7"></a><span id="l29.7" class="difflineminus">-head = head.js</span>
<a href="#l29.8"></a><span id="l29.8" class="difflineplus">+head = ../head.js</span>
<a href="#l29.9"></a><span id="l29.9"> prefs =</span>
<a href="#l29.10"></a><span id="l29.10">   ldap_2.servers.osx.description=</span>
<a href="#l29.11"></a><span id="l29.11">   ldap_2.servers.osx.dirType=-1</span>
<a href="#l29.12"></a><span id="l29.12">   ldap_2.servers.osx.uri=</span>
<a href="#l29.13"></a><span id="l29.13">   mail.provider.suppress_dialog_on_startup=true</span>
<a href="#l29.14"></a><span id="l29.14">   mail.spotlight.firstRunDone=true</span>
<a href="#l29.15"></a><span id="l29.15">   mail.winsearch.firstRunDone=true</span>
<a href="#l29.16"></a><span id="l29.16">   mailnews.start_page.override_url=about:blank</span>
<a href="#l29.17"></a><span id="l29.17">   mailnews.start_page.url=about:blank</span>
<a href="#l29.18"></a><span id="l29.18"> subsuite = thunderbird</span>
<a href="#l29.19"></a><span id="l29.19" class="difflineminus">-support-files = data/**</span>
<a href="#l29.20"></a><span id="l29.20"> </span>
<a href="#l29.21"></a><span id="l29.21" class="difflineminus">-[browser_calendarList.js]</span>
<a href="#l29.22"></a><span id="l29.22" class="difflineminus">-[browser_import.js]</span>
<a href="#l29.23"></a><span id="l29.23" class="difflineminus">-[browser_tabs.js]</span>
<a href="#l29.24"></a><span id="l29.24" class="difflineplus">+[browser_annual.js]</span>
<a href="#l29.25"></a><span id="l29.25" class="difflineplus">+[browser_biweekly.js]</span>
<a href="#l29.26"></a><span id="l29.26" class="difflineplus">+[browser_daily.js]</span>
<a href="#l29.27"></a><span id="l29.27" class="difflineplus">+[browser_lastDayOfMonth.js]</span>
<a href="#l29.28"></a><span id="l29.28" class="difflineplus">+[browser_weeklyN.js]</span>
<a href="#l29.29"></a><span id="l29.29" class="difflineplus">+[browser_weeklyUntil.js]</span>
<a href="#l29.30"></a><span id="l29.30" class="difflineplus">+[browser_weeklyWithException.js]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1">rename from calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js</span>
<a href="#l30.2"></a><span id="l30.2">rename to calendar/test/browser/recurrenceRotated/browser_annual.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js</span>
<a href="#l30.4"></a><span id="l30.4" class="difflineplus">+++ b/calendar/test/browser/recurrenceRotated/browser_annual.js</span>
<a href="#l30.5"></a><span id="l30.5" class="difflineat">@@ -1,47 +1,44 @@</span>
<a href="#l30.6"></a><span id="l30.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l30.7"></a><span id="l30.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l30.8"></a><span id="l30.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l30.9"></a><span id="l30.9"> </span>
<a href="#l30.10"></a><span id="l30.10" class="difflineminus">-var CALENDARNAME, EVENTPATH, CANVAS_BOX, ALLDAY;</span>
<a href="#l30.11"></a><span id="l30.11" class="difflineminus">-var helpersForController, handleOccurrencePrompt, switchToView, goToDate;</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-var invokeEventDialog, closeAllEventDialogs, deleteCalendars, createCalendar, menulistSelect;</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l30.14"></a><span id="l30.14" class="difflineplus">+</span>
<a href="#l30.15"></a><span id="l30.15" class="difflineplus">+var {</span>
<a href="#l30.16"></a><span id="l30.16" class="difflineplus">+  ALLDAY,</span>
<a href="#l30.17"></a><span id="l30.17" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l30.18"></a><span id="l30.18" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l30.19"></a><span id="l30.19" class="difflineplus">+  EVENTPATH,</span>
<a href="#l30.20"></a><span id="l30.20" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l30.21"></a><span id="l30.21" class="difflineplus">+  createCalendar,</span>
<a href="#l30.22"></a><span id="l30.22" class="difflineplus">+  deleteCalendars,</span>
<a href="#l30.23"></a><span id="l30.23" class="difflineplus">+  goToDate,</span>
<a href="#l30.24"></a><span id="l30.24" class="difflineplus">+  handleOccurrencePrompt,</span>
<a href="#l30.25"></a><span id="l30.25" class="difflineplus">+  helpersForController,</span>
<a href="#l30.26"></a><span id="l30.26" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l30.27"></a><span id="l30.27" class="difflineplus">+  menulistSelect,</span>
<a href="#l30.28"></a><span id="l30.28" class="difflineplus">+  switchToView,</span>
<a href="#l30.29"></a><span id="l30.29" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l30.30"></a><span id="l30.30" class="difflineplus">+</span>
<a href="#l30.31"></a><span id="l30.31" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l30.32"></a><span id="l30.32" class="difflineplus">+var { eid, getEventBoxPath, lookup, lookupEventBox } = helpersForController(controller);</span>
<a href="#l30.33"></a><span id="l30.33"> </span>
<a href="#l30.34"></a><span id="l30.34"> const STARTYEAR = 1950;</span>
<a href="#l30.35"></a><span id="l30.35"> const EPOCH = 1970;</span>
<a href="#l30.36"></a><span id="l30.36"> </span>
<a href="#l30.37"></a><span id="l30.37" class="difflineminus">-function setupModule(module) {</span>
<a href="#l30.38"></a><span id="l30.38" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l30.39"></a><span id="l30.39" class="difflineminus">-  ({</span>
<a href="#l30.40"></a><span id="l30.40" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l30.41"></a><span id="l30.41" class="difflineminus">-    EVENTPATH,</span>
<a href="#l30.42"></a><span id="l30.42" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l30.43"></a><span id="l30.43" class="difflineminus">-    ALLDAY,</span>
<a href="#l30.44"></a><span id="l30.44" class="difflineminus">-    helpersForController,</span>
<a href="#l30.45"></a><span id="l30.45" class="difflineminus">-    handleOccurrencePrompt,</span>
<a href="#l30.46"></a><span id="l30.46" class="difflineminus">-    switchToView,</span>
<a href="#l30.47"></a><span id="l30.47" class="difflineminus">-    goToDate,</span>
<a href="#l30.48"></a><span id="l30.48" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l30.49"></a><span id="l30.49" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l30.50"></a><span id="l30.50" class="difflineminus">-    deleteCalendars,</span>
<a href="#l30.51"></a><span id="l30.51" class="difflineminus">-    createCalendar,</span>
<a href="#l30.52"></a><span id="l30.52" class="difflineminus">-    menulistSelect,</span>
<a href="#l30.53"></a><span id="l30.53" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l30.54"></a><span id="l30.54" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l30.55"></a><span id="l30.55" class="difflineplus">+add_task(function testAnnualRecurrence() {</span>
<a href="#l30.56"></a><span id="l30.56" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l30.57"></a><span id="l30.57" class="difflineplus">+  switchToView(controller, &quot;day&quot;);</span>
<a href="#l30.58"></a><span id="l30.58" class="difflineplus">+  goToDate(controller, STARTYEAR, 1, 1);</span>
<a href="#l30.59"></a><span id="l30.59"> </span>
<a href="#l30.60"></a><span id="l30.60" class="difflineminus">-  switchToView(controller, &quot;day&quot;);</span>
<a href="#l30.61"></a><span id="l30.61" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l30.62"></a><span id="l30.62">   // Rotate view.</span>
<a href="#l30.63"></a><span id="l30.63">   controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l30.64"></a><span id="l30.64">   controller.waitFor(() =&gt; eid(&quot;day-view&quot;).getNode().orient == &quot;horizontal&quot;);</span>
<a href="#l30.65"></a><span id="l30.65" class="difflineminus">-}</span>
<a href="#l30.66"></a><span id="l30.66" class="difflineminus">-</span>
<a href="#l30.67"></a><span id="l30.67" class="difflineminus">-function testAnnualRecurrence() {</span>
<a href="#l30.68"></a><span id="l30.68" class="difflineminus">-  goToDate(controller, STARTYEAR, 1, 1);</span>
<a href="#l30.69"></a><span id="l30.69"> </span>
<a href="#l30.70"></a><span id="l30.70">   // Create yearly recurring all-day event.</span>
<a href="#l30.71"></a><span id="l30.71">   let eventBox = lookupEventBox(&quot;day&quot;, ALLDAY, null, 1, null);</span>
<a href="#l30.72"></a><span id="l30.72">   invokeEventDialog(controller, eventBox, (event, iframe) =&gt; {</span>
<a href="#l30.73"></a><span id="l30.73">     let { eid: eventid } = helpersForController(event);</span>
<a href="#l30.74"></a><span id="l30.74"> </span>
<a href="#l30.75"></a><span id="l30.75">     menulistSelect(eventid(&quot;item-repeat&quot;), &quot;yearly&quot;, event);</span>
<a href="#l30.76"></a><span id="l30.76">     event.click(eventid(&quot;button-saveandclose&quot;));</span>
<a href="#l30.77"></a><span id="l30.77" class="difflineat">@@ -73,19 +70,21 @@ function testAnnualRecurrence() {</span>
<a href="#l30.78"></a><span id="l30.78">   // Delete event.</span>
<a href="#l30.79"></a><span id="l30.79">   goToDate(controller, checkYears[0], 1, 1);</span>
<a href="#l30.80"></a><span id="l30.80">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l30.81"></a><span id="l30.81">   const boxPath = getEventBoxPath(&quot;day&quot;, ALLDAY, null, 1, null) + EVENTPATH;</span>
<a href="#l30.82"></a><span id="l30.82">   const box = lookup(boxPath);</span>
<a href="#l30.83"></a><span id="l30.83">   controller.click(box);</span>
<a href="#l30.84"></a><span id="l30.84">   handleOccurrencePrompt(controller, box, &quot;delete&quot;, true);</span>
<a href="#l30.85"></a><span id="l30.85">   controller.waitForElementNotPresent(box);</span>
<a href="#l30.86"></a><span id="l30.86" class="difflineminus">-}</span>
<a href="#l30.87"></a><span id="l30.87"> </span>
<a href="#l30.88"></a><span id="l30.88" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l30.89"></a><span id="l30.89" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l30.90"></a><span id="l30.90" class="difflineplus">+});</span>
<a href="#l30.91"></a><span id="l30.91" class="difflineplus">+</span>
<a href="#l30.92"></a><span id="l30.92" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l30.93"></a><span id="l30.93">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l30.94"></a><span id="l30.94">   // Reset view.</span>
<a href="#l30.95"></a><span id="l30.95">   if (eid(&quot;day-view&quot;).getNode().orient == &quot;horizontal&quot;) {</span>
<a href="#l30.96"></a><span id="l30.96">     controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l30.97"></a><span id="l30.97">   }</span>
<a href="#l30.98"></a><span id="l30.98">   controller.waitFor(() =&gt; eid(&quot;day-view&quot;).getNode().orient == &quot;vertical&quot;);</span>
<a href="#l30.99"></a><span id="l30.99">   closeAllEventDialogs();</span>
<a href="#l30.100"></a><span id="l30.100" class="difflineminus">-}</span>
<a href="#l30.101"></a><span id="l30.101" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1">rename from calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js</span>
<a href="#l31.2"></a><span id="l31.2">rename to calendar/test/browser/recurrenceRotated/browser_biweekly.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js</span>
<a href="#l31.4"></a><span id="l31.4" class="difflineplus">+++ b/calendar/test/browser/recurrenceRotated/browser_biweekly.js</span>
<a href="#l31.5"></a><span id="l31.5" class="difflineat">@@ -1,52 +1,44 @@</span>
<a href="#l31.6"></a><span id="l31.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l31.7"></a><span id="l31.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l31.8"></a><span id="l31.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l31.9"></a><span id="l31.9"> </span>
<a href="#l31.10"></a><span id="l31.10" class="difflineminus">-var CALENDARNAME, EVENTPATH, EVENT_BOX, CANVAS_BOX;</span>
<a href="#l31.11"></a><span id="l31.11" class="difflineminus">-var helpersForController, handleOccurrencePrompt, switchToView, goToDate;</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-var invokeEventDialog,</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l31.14"></a><span id="l31.14" class="difflineplus">+</span>
<a href="#l31.15"></a><span id="l31.15" class="difflineplus">+var {</span>
<a href="#l31.16"></a><span id="l31.16" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l31.17"></a><span id="l31.17" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l31.18"></a><span id="l31.18" class="difflineplus">+  EVENTPATH,</span>
<a href="#l31.19"></a><span id="l31.19" class="difflineplus">+  EVENT_BOX,</span>
<a href="#l31.20"></a><span id="l31.20" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l31.21"></a><span id="l31.21" class="difflineplus">+  createCalendar,</span>
<a href="#l31.22"></a><span id="l31.22" class="difflineplus">+  deleteCalendars,</span>
<a href="#l31.23"></a><span id="l31.23" class="difflineplus">+  goToDate,</span>
<a href="#l31.24"></a><span id="l31.24" class="difflineplus">+  handleOccurrencePrompt,</span>
<a href="#l31.25"></a><span id="l31.25" class="difflineplus">+  helpersForController,</span>
<a href="#l31.26"></a><span id="l31.26" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l31.27"></a><span id="l31.27" class="difflineplus">+  menulistSelect,</span>
<a href="#l31.28"></a><span id="l31.28" class="difflineplus">+  switchToView,</span>
<a href="#l31.29"></a><span id="l31.29">   viewForward,</span>
<a href="#l31.30"></a><span id="l31.30" class="difflineminus">-  createCalendar,</span>
<a href="#l31.31"></a><span id="l31.31" class="difflineminus">-  closeAllEventDialogs,</span>
<a href="#l31.32"></a><span id="l31.32" class="difflineminus">-  deleteCalendars,</span>
<a href="#l31.33"></a><span id="l31.33" class="difflineminus">-  menulistSelect;</span>
<a href="#l31.34"></a><span id="l31.34" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l31.35"></a><span id="l31.35" class="difflineplus">+</span>
<a href="#l31.36"></a><span id="l31.36" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l31.37"></a><span id="l31.37" class="difflineplus">+var { eid, lookupEventBox } = helpersForController(controller);</span>
<a href="#l31.38"></a><span id="l31.38"> </span>
<a href="#l31.39"></a><span id="l31.39"> const HOUR = 8;</span>
<a href="#l31.40"></a><span id="l31.40"> </span>
<a href="#l31.41"></a><span id="l31.41" class="difflineminus">-function setupModule(module) {</span>
<a href="#l31.42"></a><span id="l31.42" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l31.43"></a><span id="l31.43" class="difflineminus">-  ({</span>
<a href="#l31.44"></a><span id="l31.44" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l31.45"></a><span id="l31.45" class="difflineminus">-    EVENTPATH,</span>
<a href="#l31.46"></a><span id="l31.46" class="difflineminus">-    EVENT_BOX,</span>
<a href="#l31.47"></a><span id="l31.47" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l31.48"></a><span id="l31.48" class="difflineminus">-    helpersForController,</span>
<a href="#l31.49"></a><span id="l31.49" class="difflineminus">-    handleOccurrencePrompt,</span>
<a href="#l31.50"></a><span id="l31.50" class="difflineminus">-    switchToView,</span>
<a href="#l31.51"></a><span id="l31.51" class="difflineminus">-    goToDate,</span>
<a href="#l31.52"></a><span id="l31.52" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l31.53"></a><span id="l31.53" class="difflineminus">-    viewForward,</span>
<a href="#l31.54"></a><span id="l31.54" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l31.55"></a><span id="l31.55" class="difflineminus">-    deleteCalendars,</span>
<a href="#l31.56"></a><span id="l31.56" class="difflineminus">-    createCalendar,</span>
<a href="#l31.57"></a><span id="l31.57" class="difflineminus">-    menulistSelect,</span>
<a href="#l31.58"></a><span id="l31.58" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l31.59"></a><span id="l31.59" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l31.60"></a><span id="l31.60" class="difflineplus">+add_task(function testBiweeklyRecurrence() {</span>
<a href="#l31.61"></a><span id="l31.61" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l31.62"></a><span id="l31.62" class="difflineplus">+  switchToView(controller, &quot;day&quot;);</span>
<a href="#l31.63"></a><span id="l31.63" class="difflineplus">+  goToDate(controller, 2009, 1, 31);</span>
<a href="#l31.64"></a><span id="l31.64"> </span>
<a href="#l31.65"></a><span id="l31.65" class="difflineminus">-  switchToView(controller, &quot;day&quot;);</span>
<a href="#l31.66"></a><span id="l31.66" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l31.67"></a><span id="l31.67" class="difflineminus">-  // rotate view</span>
<a href="#l31.68"></a><span id="l31.68" class="difflineplus">+  // Rotate view.</span>
<a href="#l31.69"></a><span id="l31.69">   controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l31.70"></a><span id="l31.70">   controller.waitFor(() =&gt; eid(&quot;day-view&quot;).getNode().orient == &quot;horizontal&quot;);</span>
<a href="#l31.71"></a><span id="l31.71" class="difflineminus">-}</span>
<a href="#l31.72"></a><span id="l31.72" class="difflineminus">-</span>
<a href="#l31.73"></a><span id="l31.73" class="difflineminus">-function testBiweeklyRecurrence() {</span>
<a href="#l31.74"></a><span id="l31.74" class="difflineminus">-  goToDate(controller, 2009, 1, 31);</span>
<a href="#l31.75"></a><span id="l31.75"> </span>
<a href="#l31.76"></a><span id="l31.76">   // Create biweekly event.</span>
<a href="#l31.77"></a><span id="l31.77">   let eventBox = lookupEventBox(&quot;day&quot;, CANVAS_BOX, null, 1, HOUR);</span>
<a href="#l31.78"></a><span id="l31.78">   invokeEventDialog(controller, eventBox, (event, iframe) =&gt; {</span>
<a href="#l31.79"></a><span id="l31.79">     let { eid: eventid } = helpersForController(event);</span>
<a href="#l31.80"></a><span id="l31.80"> </span>
<a href="#l31.81"></a><span id="l31.81">     menulistSelect(eventid(&quot;item-repeat&quot;), &quot;bi.weekly&quot;, event);</span>
<a href="#l31.82"></a><span id="l31.82">     event.click(eventid(&quot;button-saveandclose&quot;));</span>
<a href="#l31.83"></a><span id="l31.83" class="difflineat">@@ -98,20 +90,22 @@ function testBiweeklyRecurrence() {</span>
<a href="#l31.84"></a><span id="l31.84">   controller.waitForElement(lookupEventBox(&quot;month&quot;, CANVAS_BOX, 2, 7, null, EVENTPATH));</span>
<a href="#l31.85"></a><span id="l31.85">   controller.assertNode(lookupEventBox(&quot;month&quot;, CANVAS_BOX, 4, 7, null, EVENTPATH));</span>
<a href="#l31.86"></a><span id="l31.86"> </span>
<a href="#l31.87"></a><span id="l31.87">   // Delete event.</span>
<a href="#l31.88"></a><span id="l31.88">   let box = lookupEventBox(&quot;month&quot;, CANVAS_BOX, 4, 7, null, EVENTPATH);</span>
<a href="#l31.89"></a><span id="l31.89">   controller.click(box);</span>
<a href="#l31.90"></a><span id="l31.90">   handleOccurrencePrompt(controller, box, &quot;delete&quot;, true);</span>
<a href="#l31.91"></a><span id="l31.91">   controller.waitForElementNotPresent(box);</span>
<a href="#l31.92"></a><span id="l31.92" class="difflineminus">-}</span>
<a href="#l31.93"></a><span id="l31.93"> </span>
<a href="#l31.94"></a><span id="l31.94" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l31.95"></a><span id="l31.95" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l31.96"></a><span id="l31.96" class="difflineplus">+});</span>
<a href="#l31.97"></a><span id="l31.97" class="difflineplus">+</span>
<a href="#l31.98"></a><span id="l31.98" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l31.99"></a><span id="l31.99">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l31.100"></a><span id="l31.100">   // Reset view.</span>
<a href="#l31.101"></a><span id="l31.101">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l31.102"></a><span id="l31.102">   if (eid(&quot;day-view&quot;).getNode().orient == &quot;horizontal&quot;) {</span>
<a href="#l31.103"></a><span id="l31.103">     controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l31.104"></a><span id="l31.104">   }</span>
<a href="#l31.105"></a><span id="l31.105">   controller.waitFor(() =&gt; eid(&quot;day-view&quot;).getNode().orient == &quot;vertical&quot;);</span>
<a href="#l31.106"></a><span id="l31.106">   closeAllEventDialogs();</span>
<a href="#l31.107"></a><span id="l31.107" class="difflineminus">-}</span>
<a href="#l31.108"></a><span id="l31.108" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1">rename from calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js</span>
<a href="#l32.2"></a><span id="l32.2">rename to calendar/test/browser/recurrenceRotated/browser_daily.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js</span>
<a href="#l32.4"></a><span id="l32.4" class="difflineplus">+++ b/calendar/test/browser/recurrenceRotated/browser_daily.js</span>
<a href="#l32.5"></a><span id="l32.5" class="difflineat">@@ -1,53 +1,46 @@</span>
<a href="#l32.6"></a><span id="l32.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l32.7"></a><span id="l32.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l32.8"></a><span id="l32.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l32.9"></a><span id="l32.9"> </span>
<a href="#l32.10"></a><span id="l32.10" class="difflineminus">-var CALENDARNAME, EVENTPATH, EVENT_BOX, CANVAS_BOX;</span>
<a href="#l32.11"></a><span id="l32.11" class="difflineminus">-var helpersForController, invokeEventDialog, createCalendar, closeAllEventDialogs, deleteCalendars;</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-var switchToView, goToDate, viewForward, viewBack, handleOccurrencePrompt;</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineminus">-var menulistSelect;</span>
<a href="#l32.14"></a><span id="l32.14" class="difflineminus">-var setData;</span>
<a href="#l32.15"></a><span id="l32.15" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l32.16"></a><span id="l32.16" class="difflineplus">+</span>
<a href="#l32.17"></a><span id="l32.17" class="difflineplus">+var {</span>
<a href="#l32.18"></a><span id="l32.18" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l32.19"></a><span id="l32.19" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l32.20"></a><span id="l32.20" class="difflineplus">+  EVENTPATH,</span>
<a href="#l32.21"></a><span id="l32.21" class="difflineplus">+  EVENT_BOX,</span>
<a href="#l32.22"></a><span id="l32.22" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l32.23"></a><span id="l32.23" class="difflineplus">+  createCalendar,</span>
<a href="#l32.24"></a><span id="l32.24" class="difflineplus">+  deleteCalendars,</span>
<a href="#l32.25"></a><span id="l32.25" class="difflineplus">+  goToDate,</span>
<a href="#l32.26"></a><span id="l32.26" class="difflineplus">+  handleOccurrencePrompt,</span>
<a href="#l32.27"></a><span id="l32.27" class="difflineplus">+  helpersForController,</span>
<a href="#l32.28"></a><span id="l32.28" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l32.29"></a><span id="l32.29" class="difflineplus">+  menulistSelect,</span>
<a href="#l32.30"></a><span id="l32.30" class="difflineplus">+  switchToView,</span>
<a href="#l32.31"></a><span id="l32.31" class="difflineplus">+  viewBack,</span>
<a href="#l32.32"></a><span id="l32.32" class="difflineplus">+  viewForward,</span>
<a href="#l32.33"></a><span id="l32.33" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l32.34"></a><span id="l32.34" class="difflineplus">+var { setData } = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;);</span>
<a href="#l32.35"></a><span id="l32.35" class="difflineplus">+</span>
<a href="#l32.36"></a><span id="l32.36" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l32.37"></a><span id="l32.37" class="difflineplus">+var { eid, lookupEventBox } = helpersForController(controller);</span>
<a href="#l32.38"></a><span id="l32.38"> </span>
<a href="#l32.39"></a><span id="l32.39"> const HOUR = 8;</span>
<a href="#l32.40"></a><span id="l32.40"> </span>
<a href="#l32.41"></a><span id="l32.41" class="difflineminus">-function setupModule(module) {</span>
<a href="#l32.42"></a><span id="l32.42" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l32.43"></a><span id="l32.43" class="difflineminus">-  ({</span>
<a href="#l32.44"></a><span id="l32.44" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l32.45"></a><span id="l32.45" class="difflineminus">-    EVENTPATH,</span>
<a href="#l32.46"></a><span id="l32.46" class="difflineminus">-    EVENT_BOX,</span>
<a href="#l32.47"></a><span id="l32.47" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l32.48"></a><span id="l32.48" class="difflineminus">-    helpersForController,</span>
<a href="#l32.49"></a><span id="l32.49" class="difflineminus">-    handleOccurrencePrompt,</span>
<a href="#l32.50"></a><span id="l32.50" class="difflineminus">-    switchToView,</span>
<a href="#l32.51"></a><span id="l32.51" class="difflineminus">-    goToDate,</span>
<a href="#l32.52"></a><span id="l32.52" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l32.53"></a><span id="l32.53" class="difflineminus">-    viewForward,</span>
<a href="#l32.54"></a><span id="l32.54" class="difflineminus">-    viewBack,</span>
<a href="#l32.55"></a><span id="l32.55" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l32.56"></a><span id="l32.56" class="difflineminus">-    deleteCalendars,</span>
<a href="#l32.57"></a><span id="l32.57" class="difflineminus">-    createCalendar,</span>
<a href="#l32.58"></a><span id="l32.58" class="difflineminus">-    menulistSelect,</span>
<a href="#l32.59"></a><span id="l32.59" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l32.60"></a><span id="l32.60" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l32.61"></a><span id="l32.61" class="difflineminus">-</span>
<a href="#l32.62"></a><span id="l32.62" class="difflineminus">-  ({ setData } = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;));</span>
<a href="#l32.63"></a><span id="l32.63" class="difflineminus">-</span>
<a href="#l32.64"></a><span id="l32.64" class="difflineplus">+add_task(function testDailyRecurrence() {</span>
<a href="#l32.65"></a><span id="l32.65" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l32.66"></a><span id="l32.66">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l32.67"></a><span id="l32.67" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l32.68"></a><span id="l32.68" class="difflineplus">+  goToDate(controller, 2009, 1, 1);</span>
<a href="#l32.69"></a><span id="l32.69"> </span>
<a href="#l32.70"></a><span id="l32.70">   // Rotate view.</span>
<a href="#l32.71"></a><span id="l32.71">   controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l32.72"></a><span id="l32.72">   controller.waitFor(() =&gt; eid(&quot;day-view&quot;).getNode().orient == &quot;horizontal&quot;);</span>
<a href="#l32.73"></a><span id="l32.73" class="difflineminus">-}</span>
<a href="#l32.74"></a><span id="l32.74" class="difflineminus">-</span>
<a href="#l32.75"></a><span id="l32.75" class="difflineminus">-function testDailyRecurrence() {</span>
<a href="#l32.76"></a><span id="l32.76" class="difflineminus">-  goToDate(controller, 2009, 1, 1);</span>
<a href="#l32.77"></a><span id="l32.77"> </span>
<a href="#l32.78"></a><span id="l32.78">   // Create daily event.</span>
<a href="#l32.79"></a><span id="l32.79">   let eventBox = lookupEventBox(&quot;day&quot;, CANVAS_BOX, null, 1, HOUR);</span>
<a href="#l32.80"></a><span id="l32.80">   invokeEventDialog(controller, eventBox, (event, iframe) =&gt; {</span>
<a href="#l32.81"></a><span id="l32.81">     let { eid: eventid } = helpersForController(event);</span>
<a href="#l32.82"></a><span id="l32.82"> </span>
<a href="#l32.83"></a><span id="l32.83">     setData(event, iframe, { repeat: &quot;daily&quot;, repeatuntil: new Date(2009, 2, 20) });</span>
<a href="#l32.84"></a><span id="l32.84">     event.click(eventid(&quot;button-saveandclose&quot;));</span>
<a href="#l32.85"></a><span id="l32.85" class="difflineat">@@ -175,20 +168,22 @@ function testDailyRecurrence() {</span>
<a href="#l32.86"></a><span id="l32.86">     controller.assertNodeNotExist(lookupEventBox(&quot;month&quot;, CANVAS_BOX, i, 7, null, EVENTPATH));</span>
<a href="#l32.87"></a><span id="l32.87">   }</span>
<a href="#l32.88"></a><span id="l32.88"> </span>
<a href="#l32.89"></a><span id="l32.89">   // Delete event.</span>
<a href="#l32.90"></a><span id="l32.90">   day = lookupEventBox(&quot;month&quot;, CANVAS_BOX, 1, 5, null, EVENTPATH);</span>
<a href="#l32.91"></a><span id="l32.91">   controller.click(day);</span>
<a href="#l32.92"></a><span id="l32.92">   handleOccurrencePrompt(controller, day, &quot;delete&quot;, true);</span>
<a href="#l32.93"></a><span id="l32.93">   controller.waitForElementNotPresent(day);</span>
<a href="#l32.94"></a><span id="l32.94" class="difflineminus">-}</span>
<a href="#l32.95"></a><span id="l32.95"> </span>
<a href="#l32.96"></a><span id="l32.96" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l32.97"></a><span id="l32.97" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l32.98"></a><span id="l32.98" class="difflineplus">+});</span>
<a href="#l32.99"></a><span id="l32.99" class="difflineplus">+</span>
<a href="#l32.100"></a><span id="l32.100" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l32.101"></a><span id="l32.101">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l32.102"></a><span id="l32.102">   // Reset view.</span>
<a href="#l32.103"></a><span id="l32.103">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l32.104"></a><span id="l32.104">   if (eid(&quot;day-view&quot;).getNode().orient == &quot;horizontal&quot;) {</span>
<a href="#l32.105"></a><span id="l32.105">     controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l32.106"></a><span id="l32.106">   }</span>
<a href="#l32.107"></a><span id="l32.107">   controller.waitFor(() =&gt; eid(&quot;day-view&quot;).getNode().orient == &quot;vertical&quot;);</span>
<a href="#l32.108"></a><span id="l32.108">   closeAllEventDialogs();</span>
<a href="#l32.109"></a><span id="l32.109" class="difflineminus">-}</span>
<a href="#l32.110"></a><span id="l32.110" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1">rename from calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js</span>
<a href="#l33.2"></a><span id="l33.2">rename to calendar/test/browser/recurrenceRotated/browser_lastDayOfMonth.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js</span>
<a href="#l33.4"></a><span id="l33.4" class="difflineplus">+++ b/calendar/test/browser/recurrenceRotated/browser_lastDayOfMonth.js</span>
<a href="#l33.5"></a><span id="l33.5" class="difflineat">@@ -1,57 +1,51 @@</span>
<a href="#l33.6"></a><span id="l33.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l33.7"></a><span id="l33.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l33.8"></a><span id="l33.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l33.9"></a><span id="l33.9"> </span>
<a href="#l33.10"></a><span id="l33.10" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l33.11"></a><span id="l33.11" class="difflineplus">+</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineplus">+var {</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l33.14"></a><span id="l33.14" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l33.15"></a><span id="l33.15" class="difflineplus">+  EVENTPATH,</span>
<a href="#l33.16"></a><span id="l33.16" class="difflineplus">+  EVENT_BOX,</span>
<a href="#l33.17"></a><span id="l33.17" class="difflineplus">+  TIMEOUT_MODAL_DIALOG,</span>
<a href="#l33.18"></a><span id="l33.18" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l33.19"></a><span id="l33.19" class="difflineplus">+  createCalendar,</span>
<a href="#l33.20"></a><span id="l33.20" class="difflineplus">+  deleteCalendars,</span>
<a href="#l33.21"></a><span id="l33.21" class="difflineplus">+  goToDate,</span>
<a href="#l33.22"></a><span id="l33.22" class="difflineplus">+  handleOccurrencePrompt,</span>
<a href="#l33.23"></a><span id="l33.23" class="difflineplus">+  helpersForController,</span>
<a href="#l33.24"></a><span id="l33.24" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l33.25"></a><span id="l33.25" class="difflineplus">+  menulistSelect,</span>
<a href="#l33.26"></a><span id="l33.26" class="difflineplus">+  switchToView,</span>
<a href="#l33.27"></a><span id="l33.27" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l33.28"></a><span id="l33.28" class="difflineplus">+var { REC_DLG_ACCEPT } = ChromeUtils.import(</span>
<a href="#l33.29"></a><span id="l33.29" class="difflineplus">+  &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l33.30"></a><span id="l33.30" class="difflineplus">+);</span>
<a href="#l33.31"></a><span id="l33.31"> var { plan_for_modal_dialog, wait_for_modal_dialog } = ChromeUtils.import(</span>
<a href="#l33.32"></a><span id="l33.32">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l33.33"></a><span id="l33.33"> );</span>
<a href="#l33.34"></a><span id="l33.34"> </span>
<a href="#l33.35"></a><span id="l33.35" class="difflineminus">-var TIMEOUT_MODAL_DIALOG, CALENDARNAME, EVENTPATH, EVENT_BOX, CANVAS_BOX;</span>
<a href="#l33.36"></a><span id="l33.36" class="difflineminus">-var helpersForController, handleOccurrencePrompt, switchToView, goToDate;</span>
<a href="#l33.37"></a><span id="l33.37" class="difflineminus">-var invokeEventDialog, closeAllEventDialogs, deleteCalendars, createCalendar, menulistSelect;</span>
<a href="#l33.38"></a><span id="l33.38" class="difflineminus">-var REC_DLG_ACCEPT;</span>
<a href="#l33.39"></a><span id="l33.39" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l33.40"></a><span id="l33.40" class="difflineplus">+var { eid, lookupEventBox } = helpersForController(controller);</span>
<a href="#l33.41"></a><span id="l33.41"> </span>
<a href="#l33.42"></a><span id="l33.42"> const HOUR = 8;</span>
<a href="#l33.43"></a><span id="l33.43"> </span>
<a href="#l33.44"></a><span id="l33.44" class="difflineminus">-function setupModule(module) {</span>
<a href="#l33.45"></a><span id="l33.45" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l33.46"></a><span id="l33.46" class="difflineminus">-  ({</span>
<a href="#l33.47"></a><span id="l33.47" class="difflineminus">-    TIMEOUT_MODAL_DIALOG,</span>
<a href="#l33.48"></a><span id="l33.48" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l33.49"></a><span id="l33.49" class="difflineminus">-    EVENTPATH,</span>
<a href="#l33.50"></a><span id="l33.50" class="difflineminus">-    EVENT_BOX,</span>
<a href="#l33.51"></a><span id="l33.51" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l33.52"></a><span id="l33.52" class="difflineminus">-    helpersForController,</span>
<a href="#l33.53"></a><span id="l33.53" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l33.54"></a><span id="l33.54" class="difflineminus">-    createCalendar,</span>
<a href="#l33.55"></a><span id="l33.55" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l33.56"></a><span id="l33.56" class="difflineminus">-    deleteCalendars,</span>
<a href="#l33.57"></a><span id="l33.57" class="difflineminus">-    switchToView,</span>
<a href="#l33.58"></a><span id="l33.58" class="difflineminus">-    goToDate,</span>
<a href="#l33.59"></a><span id="l33.59" class="difflineminus">-    handleOccurrencePrompt,</span>
<a href="#l33.60"></a><span id="l33.60" class="difflineminus">-    menulistSelect,</span>
<a href="#l33.61"></a><span id="l33.61" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l33.62"></a><span id="l33.62" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l33.63"></a><span id="l33.63" class="difflineplus">+add_task(function testLastDayOfMonthRecurrence() {</span>
<a href="#l33.64"></a><span id="l33.64" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l33.65"></a><span id="l33.65" class="difflineplus">+  switchToView(controller, &quot;day&quot;);</span>
<a href="#l33.66"></a><span id="l33.66" class="difflineplus">+  goToDate(controller, 2008, 1, 31); // Start with a leap year.</span>
<a href="#l33.67"></a><span id="l33.67"> </span>
<a href="#l33.68"></a><span id="l33.68" class="difflineminus">-  ({ REC_DLG_ACCEPT } = ChromeUtils.import(</span>
<a href="#l33.69"></a><span id="l33.69" class="difflineminus">-    &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l33.70"></a><span id="l33.70" class="difflineminus">-  ));</span>
<a href="#l33.71"></a><span id="l33.71" class="difflineminus">-</span>
<a href="#l33.72"></a><span id="l33.72" class="difflineminus">-  switchToView(controller, &quot;day&quot;);</span>
<a href="#l33.73"></a><span id="l33.73" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l33.74"></a><span id="l33.74">   // Rotate view.</span>
<a href="#l33.75"></a><span id="l33.75">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l33.76"></a><span id="l33.76">   controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l33.77"></a><span id="l33.77">   controller.waitFor(() =&gt; eid(&quot;day-view&quot;).getNode().orient == &quot;horizontal&quot;);</span>
<a href="#l33.78"></a><span id="l33.78" class="difflineminus">-}</span>
<a href="#l33.79"></a><span id="l33.79" class="difflineminus">-</span>
<a href="#l33.80"></a><span id="l33.80" class="difflineminus">-function testLastDayOfMonthRecurrence() {</span>
<a href="#l33.81"></a><span id="l33.81" class="difflineminus">-  goToDate(controller, 2008, 1, 31); // Start with a leap year.</span>
<a href="#l33.82"></a><span id="l33.82"> </span>
<a href="#l33.83"></a><span id="l33.83">   // Create monthly recurring event.</span>
<a href="#l33.84"></a><span id="l33.84">   let eventBox = lookupEventBox(&quot;day&quot;, CANVAS_BOX, null, 1, HOUR);</span>
<a href="#l33.85"></a><span id="l33.85">   invokeEventDialog(controller, eventBox, (event, iframe) =&gt; {</span>
<a href="#l33.86"></a><span id="l33.86">     let { eid: eventid } = helpersForController(event);</span>
<a href="#l33.87"></a><span id="l33.87"> </span>
<a href="#l33.88"></a><span id="l33.88">     plan_for_modal_dialog(&quot;Calendar:EventDialog:Recurrence&quot;, setRecurrence);</span>
<a href="#l33.89"></a><span id="l33.89">     menulistSelect(eventid(&quot;item-repeat&quot;), &quot;custom&quot;, event);</span>
<a href="#l33.90"></a><span id="l33.90" class="difflineat">@@ -107,17 +101,19 @@ function testLastDayOfMonthRecurrence() </span>
<a href="#l33.91"></a><span id="l33.91"> </span>
<a href="#l33.92"></a><span id="l33.92">   // Delete event.</span>
<a href="#l33.93"></a><span id="l33.93">   goToDate(controller, checkingData[0][0], checkingData[0][1], checkingData[0][2]);</span>
<a href="#l33.94"></a><span id="l33.94">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l33.95"></a><span id="l33.95">   let box = lookupEventBox(&quot;day&quot;, EVENT_BOX, null, 1, null, EVENTPATH);</span>
<a href="#l33.96"></a><span id="l33.96">   controller.waitThenClick(box);</span>
<a href="#l33.97"></a><span id="l33.97">   handleOccurrencePrompt(controller, box, &quot;delete&quot;, true);</span>
<a href="#l33.98"></a><span id="l33.98">   controller.waitForElementNotPresent(box);</span>
<a href="#l33.99"></a><span id="l33.99" class="difflineminus">-}</span>
<a href="#l33.100"></a><span id="l33.100" class="difflineplus">+</span>
<a href="#l33.101"></a><span id="l33.101" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l33.102"></a><span id="l33.102" class="difflineplus">+});</span>
<a href="#l33.103"></a><span id="l33.103"> </span>
<a href="#l33.104"></a><span id="l33.104"> function setRecurrence(recurrence) {</span>
<a href="#l33.105"></a><span id="l33.105">   let { sleep: recsleep, lookup: reclookup, eid: recid } = helpersForController(recurrence);</span>
<a href="#l33.106"></a><span id="l33.106"> </span>
<a href="#l33.107"></a><span id="l33.107">   // monthly</span>
<a href="#l33.108"></a><span id="l33.108">   menulistSelect(recid(&quot;period-list&quot;), &quot;2&quot;, recurrence);</span>
<a href="#l33.109"></a><span id="l33.109"> </span>
<a href="#l33.110"></a><span id="l33.110">   // last day of month</span>
<a href="#l33.111"></a><span id="l33.111" class="difflineat">@@ -125,18 +121,18 @@ function setRecurrence(recurrence) {</span>
<a href="#l33.112"></a><span id="l33.112">   menulistSelect(recid(&quot;monthly-ordinal&quot;), &quot;-1&quot;, recurrence);</span>
<a href="#l33.113"></a><span id="l33.113">   menulistSelect(recid(&quot;monthly-weekday&quot;), &quot;-1&quot;, recurrence);</span>
<a href="#l33.114"></a><span id="l33.114">   recsleep();</span>
<a href="#l33.115"></a><span id="l33.115"> </span>
<a href="#l33.116"></a><span id="l33.116">   // Close dialog.</span>
<a href="#l33.117"></a><span id="l33.117">   recurrence.click(reclookup(REC_DLG_ACCEPT));</span>
<a href="#l33.118"></a><span id="l33.118"> }</span>
<a href="#l33.119"></a><span id="l33.119"> </span>
<a href="#l33.120"></a><span id="l33.120" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l33.121"></a><span id="l33.121" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l33.122"></a><span id="l33.122">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l33.123"></a><span id="l33.123">   // Reset view.</span>
<a href="#l33.124"></a><span id="l33.124">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l33.125"></a><span id="l33.125">   if (eid(&quot;day-view&quot;).getNode().orient == &quot;horizontal&quot;) {</span>
<a href="#l33.126"></a><span id="l33.126">     controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l33.127"></a><span id="l33.127">   }</span>
<a href="#l33.128"></a><span id="l33.128">   controller.waitFor(() =&gt; eid(&quot;day-view&quot;).getNode().orient == &quot;vertical&quot;);</span>
<a href="#l33.129"></a><span id="l33.129">   closeAllEventDialogs();</span>
<a href="#l33.130"></a><span id="l33.130" class="difflineminus">-}</span>
<a href="#l33.131"></a><span id="l33.131" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1">rename from calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js</span>
<a href="#l34.2"></a><span id="l34.2">rename to calendar/test/browser/recurrenceRotated/browser_weeklyN.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js</span>
<a href="#l34.4"></a><span id="l34.4" class="difflineplus">+++ b/calendar/test/browser/recurrenceRotated/browser_weeklyN.js</span>
<a href="#l34.5"></a><span id="l34.5" class="difflineat">@@ -1,64 +1,53 @@</span>
<a href="#l34.6"></a><span id="l34.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l34.7"></a><span id="l34.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l34.8"></a><span id="l34.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l34.9"></a><span id="l34.9"> </span>
<a href="#l34.10"></a><span id="l34.10" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l34.11"></a><span id="l34.11" class="difflineplus">+</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineplus">+var {</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l34.14"></a><span id="l34.14" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l34.15"></a><span id="l34.15" class="difflineplus">+  EVENTPATH,</span>
<a href="#l34.16"></a><span id="l34.16" class="difflineplus">+  EVENT_BOX,</span>
<a href="#l34.17"></a><span id="l34.17" class="difflineplus">+  TIMEOUT_MODAL_DIALOG,</span>
<a href="#l34.18"></a><span id="l34.18" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l34.19"></a><span id="l34.19" class="difflineplus">+  createCalendar,</span>
<a href="#l34.20"></a><span id="l34.20" class="difflineplus">+  deleteCalendars,</span>
<a href="#l34.21"></a><span id="l34.21" class="difflineplus">+  goToDate,</span>
<a href="#l34.22"></a><span id="l34.22" class="difflineplus">+  handleOccurrencePrompt,</span>
<a href="#l34.23"></a><span id="l34.23" class="difflineplus">+  helpersForController,</span>
<a href="#l34.24"></a><span id="l34.24" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l34.25"></a><span id="l34.25" class="difflineplus">+  menulistSelect,</span>
<a href="#l34.26"></a><span id="l34.26" class="difflineplus">+  switchToView,</span>
<a href="#l34.27"></a><span id="l34.27" class="difflineplus">+  viewForward,</span>
<a href="#l34.28"></a><span id="l34.28" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l34.29"></a><span id="l34.29" class="difflineplus">+var { REC_DLG_ACCEPT, REC_DLG_DAYS } = ChromeUtils.import(</span>
<a href="#l34.30"></a><span id="l34.30" class="difflineplus">+  &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l34.31"></a><span id="l34.31" class="difflineplus">+);</span>
<a href="#l34.32"></a><span id="l34.32"> var { plan_for_modal_dialog, wait_for_modal_dialog } = ChromeUtils.import(</span>
<a href="#l34.33"></a><span id="l34.33">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l34.34"></a><span id="l34.34"> );</span>
<a href="#l34.35"></a><span id="l34.35"> </span>
<a href="#l34.36"></a><span id="l34.36"> var { cal } = ChromeUtils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l34.37"></a><span id="l34.37"> </span>
<a href="#l34.38"></a><span id="l34.38" class="difflineminus">-var TIMEOUT_MODAL_DIALOG, CALENDARNAME, EVENTPATH, EVENT_BOX, CANVAS_BOX;</span>
<a href="#l34.39"></a><span id="l34.39" class="difflineminus">-var helpersForController, handleOccurrencePrompt, switchToView, goToDate;</span>
<a href="#l34.40"></a><span id="l34.40" class="difflineminus">-var invokeEventDialog,</span>
<a href="#l34.41"></a><span id="l34.41" class="difflineminus">-  viewForward,</span>
<a href="#l34.42"></a><span id="l34.42" class="difflineminus">-  closeAllEventDialogs,</span>
<a href="#l34.43"></a><span id="l34.43" class="difflineminus">-  deleteCalendars,</span>
<a href="#l34.44"></a><span id="l34.44" class="difflineminus">-  createCalendar,</span>
<a href="#l34.45"></a><span id="l34.45" class="difflineminus">-  menulistSelect;</span>
<a href="#l34.46"></a><span id="l34.46" class="difflineminus">-var REC_DLG_ACCEPT, REC_DLG_DAYS;</span>
<a href="#l34.47"></a><span id="l34.47" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l34.48"></a><span id="l34.48" class="difflineplus">+var { eid, lookupEventBox } = helpersForController(controller);</span>
<a href="#l34.49"></a><span id="l34.49"> </span>
<a href="#l34.50"></a><span id="l34.50"> const HOUR = 8;</span>
<a href="#l34.51"></a><span id="l34.51"> </span>
<a href="#l34.52"></a><span id="l34.52" class="difflineminus">-function setupModule(module) {</span>
<a href="#l34.53"></a><span id="l34.53" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l34.54"></a><span id="l34.54" class="difflineminus">-  ({</span>
<a href="#l34.55"></a><span id="l34.55" class="difflineminus">-    TIMEOUT_MODAL_DIALOG,</span>
<a href="#l34.56"></a><span id="l34.56" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l34.57"></a><span id="l34.57" class="difflineminus">-    EVENTPATH,</span>
<a href="#l34.58"></a><span id="l34.58" class="difflineminus">-    EVENT_BOX,</span>
<a href="#l34.59"></a><span id="l34.59" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l34.60"></a><span id="l34.60" class="difflineminus">-    helpersForController,</span>
<a href="#l34.61"></a><span id="l34.61" class="difflineminus">-    handleOccurrencePrompt,</span>
<a href="#l34.62"></a><span id="l34.62" class="difflineminus">-    switchToView,</span>
<a href="#l34.63"></a><span id="l34.63" class="difflineminus">-    goToDate,</span>
<a href="#l34.64"></a><span id="l34.64" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l34.65"></a><span id="l34.65" class="difflineminus">-    viewForward,</span>
<a href="#l34.66"></a><span id="l34.66" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l34.67"></a><span id="l34.67" class="difflineminus">-    deleteCalendars,</span>
<a href="#l34.68"></a><span id="l34.68" class="difflineminus">-    createCalendar,</span>
<a href="#l34.69"></a><span id="l34.69" class="difflineminus">-    menulistSelect,</span>
<a href="#l34.70"></a><span id="l34.70" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l34.71"></a><span id="l34.71" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l34.72"></a><span id="l34.72" class="difflineplus">+add_task(function testWeeklyNRecurrence() {</span>
<a href="#l34.73"></a><span id="l34.73" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l34.74"></a><span id="l34.74" class="difflineplus">+  switchToView(controller, &quot;day&quot;);</span>
<a href="#l34.75"></a><span id="l34.75" class="difflineplus">+  goToDate(controller, 2009, 1, 5);</span>
<a href="#l34.76"></a><span id="l34.76"> </span>
<a href="#l34.77"></a><span id="l34.77" class="difflineminus">-  ({ REC_DLG_ACCEPT, REC_DLG_DAYS } = ChromeUtils.import(</span>
<a href="#l34.78"></a><span id="l34.78" class="difflineminus">-    &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l34.79"></a><span id="l34.79" class="difflineminus">-  ));</span>
<a href="#l34.80"></a><span id="l34.80" class="difflineminus">-</span>
<a href="#l34.81"></a><span id="l34.81" class="difflineminus">-  switchToView(controller, &quot;day&quot;);</span>
<a href="#l34.82"></a><span id="l34.82" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l34.83"></a><span id="l34.83">   // Rotate view.</span>
<a href="#l34.84"></a><span id="l34.84">   controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l34.85"></a><span id="l34.85">   controller.waitFor(() =&gt; eid(&quot;day-view&quot;).getNode().orient == &quot;horizontal&quot;);</span>
<a href="#l34.86"></a><span id="l34.86" class="difflineminus">-}</span>
<a href="#l34.87"></a><span id="l34.87" class="difflineminus">-</span>
<a href="#l34.88"></a><span id="l34.88" class="difflineminus">-function testWeeklyNRecurrence() {</span>
<a href="#l34.89"></a><span id="l34.89" class="difflineminus">-  goToDate(controller, 2009, 1, 5);</span>
<a href="#l34.90"></a><span id="l34.90"> </span>
<a href="#l34.91"></a><span id="l34.91">   // Create weekly recurring event.</span>
<a href="#l34.92"></a><span id="l34.92">   let eventBox = lookupEventBox(&quot;day&quot;, CANVAS_BOX, null, 1, HOUR);</span>
<a href="#l34.93"></a><span id="l34.93">   invokeEventDialog(controller, eventBox, (event, iframe) =&gt; {</span>
<a href="#l34.94"></a><span id="l34.94">     let { eid: eventid } = helpersForController(event);</span>
<a href="#l34.95"></a><span id="l34.95"> </span>
<a href="#l34.96"></a><span id="l34.96">     plan_for_modal_dialog(&quot;Calendar:EventDialog:Recurrence&quot;, setRecurrence);</span>
<a href="#l34.97"></a><span id="l34.97">     event.waitForElement(eventid(&quot;item-repeat&quot;));</span>
<a href="#l34.98"></a><span id="l34.98" class="difflineat">@@ -102,17 +91,19 @@ function testWeeklyNRecurrence() {</span>
<a href="#l34.99"></a><span id="l34.99">   switchToView(controller, &quot;month&quot;);</span>
<a href="#l34.100"></a><span id="l34.100">   checkMultiWeekView(&quot;month&quot;);</span>
<a href="#l34.101"></a><span id="l34.101"> </span>
<a href="#l34.102"></a><span id="l34.102">   // Delete event.</span>
<a href="#l34.103"></a><span id="l34.103">   box = lookupEventBox(&quot;month&quot;, CANVAS_BOX, 2, 2, null, EVENTPATH);</span>
<a href="#l34.104"></a><span id="l34.104">   controller.click(box);</span>
<a href="#l34.105"></a><span id="l34.105">   handleOccurrencePrompt(controller, box, &quot;delete&quot;, true);</span>
<a href="#l34.106"></a><span id="l34.106">   controller.waitForElementNotPresent(box);</span>
<a href="#l34.107"></a><span id="l34.107" class="difflineminus">-}</span>
<a href="#l34.108"></a><span id="l34.108" class="difflineplus">+</span>
<a href="#l34.109"></a><span id="l34.109" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l34.110"></a><span id="l34.110" class="difflineplus">+});</span>
<a href="#l34.111"></a><span id="l34.111"> </span>
<a href="#l34.112"></a><span id="l34.112"> function setRecurrence(recurrence) {</span>
<a href="#l34.113"></a><span id="l34.113">   let { sleep: recsleep, lookup: reclookup, eid: recid } = helpersForController(recurrence);</span>
<a href="#l34.114"></a><span id="l34.114"> </span>
<a href="#l34.115"></a><span id="l34.115">   // weekly</span>
<a href="#l34.116"></a><span id="l34.116">   recurrence.waitForElement(recid(&quot;period-list&quot;));</span>
<a href="#l34.117"></a><span id="l34.117">   menulistSelect(recid(&quot;period-list&quot;), &quot;1&quot;, recurrence);</span>
<a href="#l34.118"></a><span id="l34.118">   recsleep();</span>
<a href="#l34.119"></a><span id="l34.119" class="difflineat">@@ -151,18 +142,18 @@ function checkMultiWeekView(view) {</span>
<a href="#l34.120"></a><span id="l34.120">   for (let i = 2; i &lt; 6; i++) {</span>
<a href="#l34.121"></a><span id="l34.121">     controller.assertNode(lookupEventBox(view, CANVAS_BOX, week, i, null, EVENTPATH));</span>
<a href="#l34.122"></a><span id="l34.122">   }</span>
<a href="#l34.123"></a><span id="l34.123"> </span>
<a href="#l34.124"></a><span id="l34.124">   // Saturday</span>
<a href="#l34.125"></a><span id="l34.125">   controller.assertNodeNotExist(lookupEventBox(view, CANVAS_BOX, week, 7, null, EVENTPATH));</span>
<a href="#l34.126"></a><span id="l34.126"> }</span>
<a href="#l34.127"></a><span id="l34.127"> </span>
<a href="#l34.128"></a><span id="l34.128" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l34.129"></a><span id="l34.129" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l34.130"></a><span id="l34.130">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l34.131"></a><span id="l34.131">   // Reset view.</span>
<a href="#l34.132"></a><span id="l34.132">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l34.133"></a><span id="l34.133">   if (eid(&quot;day-view&quot;).getNode().orient == &quot;horizontal&quot;) {</span>
<a href="#l34.134"></a><span id="l34.134">     controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l34.135"></a><span id="l34.135">   }</span>
<a href="#l34.136"></a><span id="l34.136">   controller.waitFor(() =&gt; eid(&quot;day-view&quot;).getNode().orient == &quot;vertical&quot;);</span>
<a href="#l34.137"></a><span id="l34.137">   closeAllEventDialogs();</span>
<a href="#l34.138"></a><span id="l34.138" class="difflineminus">-}</span>
<a href="#l34.139"></a><span id="l34.139" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1">rename from calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js</span>
<a href="#l35.2"></a><span id="l35.2">rename to calendar/test/browser/recurrenceRotated/browser_weeklyUntil.js</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js</span>
<a href="#l35.4"></a><span id="l35.4" class="difflineplus">+++ b/calendar/test/browser/recurrenceRotated/browser_weeklyUntil.js</span>
<a href="#l35.5"></a><span id="l35.5" class="difflineat">@@ -1,32 +1,35 @@</span>
<a href="#l35.6"></a><span id="l35.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l35.7"></a><span id="l35.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l35.8"></a><span id="l35.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l35.9"></a><span id="l35.9"> </span>
<a href="#l35.10"></a><span id="l35.10" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l35.11"></a><span id="l35.11" class="difflineplus">+</span>
<a href="#l35.12"></a><span id="l35.12"> var { plan_for_modal_dialog, wait_for_modal_dialog } = ChromeUtils.import(</span>
<a href="#l35.13"></a><span id="l35.13">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l35.14"></a><span id="l35.14"> );</span>
<a href="#l35.15"></a><span id="l35.15"> </span>
<a href="#l35.16"></a><span id="l35.16"> var { cal } = ChromeUtils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l35.17"></a><span id="l35.17"> </span>
<a href="#l35.18"></a><span id="l35.18"> var SHORT_SLEEP, TIMEOUT_MODAL_DIALOG, CALENDARNAME, EVENTPATH, EVENT_BOX, CANVAS_BOX;</span>
<a href="#l35.19"></a><span id="l35.19"> var helpersForController, handleOccurrencePrompt, switchToView, goToDate;</span>
<a href="#l35.20"></a><span id="l35.20"> var invokeEventDialog,</span>
<a href="#l35.21"></a><span id="l35.21">   viewForward,</span>
<a href="#l35.22"></a><span id="l35.22">   closeAllEventDialogs,</span>
<a href="#l35.23"></a><span id="l35.23">   deleteCalendars,</span>
<a href="#l35.24"></a><span id="l35.24">   createCalendar,</span>
<a href="#l35.25"></a><span id="l35.25">   menulistSelect;</span>
<a href="#l35.26"></a><span id="l35.26"> var REC_DLG_DAYS, REC_DLG_ACCEPT, REC_DLG_UNTIL_INPUT;</span>
<a href="#l35.27"></a><span id="l35.27" class="difflineplus">+var controller, eid, lookupEventBox;</span>
<a href="#l35.28"></a><span id="l35.28"> </span>
<a href="#l35.29"></a><span id="l35.29"> const ENDDATE = new Date(2009, 0, 26); // last Monday in month</span>
<a href="#l35.30"></a><span id="l35.30"> const HOUR = 8;</span>
<a href="#l35.31"></a><span id="l35.31"> </span>
<a href="#l35.32"></a><span id="l35.32" class="difflineminus">-function setupModule(module) {</span>
<a href="#l35.33"></a><span id="l35.33" class="difflineplus">+add_task(function setupModule(module) {</span>
<a href="#l35.34"></a><span id="l35.34">   controller = mozmill.getMail3PaneController();</span>
<a href="#l35.35"></a><span id="l35.35">   ({</span>
<a href="#l35.36"></a><span id="l35.36">     SHORT_SLEEP,</span>
<a href="#l35.37"></a><span id="l35.37">     TIMEOUT_MODAL_DIALOG,</span>
<a href="#l35.38"></a><span id="l35.38">     CALENDARNAME,</span>
<a href="#l35.39"></a><span id="l35.39">     EVENTPATH,</span>
<a href="#l35.40"></a><span id="l35.40">     EVENT_BOX,</span>
<a href="#l35.41"></a><span id="l35.41">     CANVAS_BOX,</span>
<a href="#l35.42"></a><span id="l35.42" class="difflineat">@@ -36,30 +39,30 @@ function setupModule(module) {</span>
<a href="#l35.43"></a><span id="l35.43">     goToDate,</span>
<a href="#l35.44"></a><span id="l35.44">     invokeEventDialog,</span>
<a href="#l35.45"></a><span id="l35.45">     viewForward,</span>
<a href="#l35.46"></a><span id="l35.46">     closeAllEventDialogs,</span>
<a href="#l35.47"></a><span id="l35.47">     deleteCalendars,</span>
<a href="#l35.48"></a><span id="l35.48">     createCalendar,</span>
<a href="#l35.49"></a><span id="l35.49">     menulistSelect,</span>
<a href="#l35.50"></a><span id="l35.50">   } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l35.51"></a><span id="l35.51" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l35.52"></a><span id="l35.52" class="difflineplus">+  ({ eid, lookupEventBox } = helpersForController(controller));</span>
<a href="#l35.53"></a><span id="l35.53"> </span>
<a href="#l35.54"></a><span id="l35.54">   ({ REC_DLG_DAYS, REC_DLG_ACCEPT, REC_DLG_UNTIL_INPUT } = ChromeUtils.import(</span>
<a href="#l35.55"></a><span id="l35.55">     &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l35.56"></a><span id="l35.56">   ));</span>
<a href="#l35.57"></a><span id="l35.57"> </span>
<a href="#l35.58"></a><span id="l35.58">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l35.59"></a><span id="l35.59">   createCalendar(controller, CALENDARNAME);</span>
<a href="#l35.60"></a><span id="l35.60">   // Rotate view.</span>
<a href="#l35.61"></a><span id="l35.61">   controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l35.62"></a><span id="l35.62">   controller.waitFor(() =&gt; eid(&quot;day-view&quot;).getNode().orient == &quot;horizontal&quot;);</span>
<a href="#l35.63"></a><span id="l35.63" class="difflineminus">-}</span>
<a href="#l35.64"></a><span id="l35.64" class="difflineplus">+});</span>
<a href="#l35.65"></a><span id="l35.65"> </span>
<a href="#l35.66"></a><span id="l35.66" class="difflineminus">-function testWeeklyUntilRecurrence() {</span>
<a href="#l35.67"></a><span id="l35.67" class="difflineplus">+add_task(function testWeeklyUntilRecurrence() {</span>
<a href="#l35.68"></a><span id="l35.68">   goToDate(controller, 2009, 1, 5); // Monday</span>
<a href="#l35.69"></a><span id="l35.69"> </span>
<a href="#l35.70"></a><span id="l35.70">   // Create weekly recurring event.</span>
<a href="#l35.71"></a><span id="l35.71">   let eventBox = lookupEventBox(&quot;day&quot;, CANVAS_BOX, null, 1, HOUR);</span>
<a href="#l35.72"></a><span id="l35.72">   invokeEventDialog(controller, eventBox, (event, iframe) =&gt; {</span>
<a href="#l35.73"></a><span id="l35.73">     let { eid: eventid } = helpersForController(event);</span>
<a href="#l35.74"></a><span id="l35.74"> </span>
<a href="#l35.75"></a><span id="l35.75">     plan_for_modal_dialog(&quot;Calendar:EventDialog:Recurrence&quot;, setRecurrence);</span>
<a href="#l35.76"></a><span id="l35.76" class="difflineat">@@ -125,17 +128,19 @@ function testWeeklyUntilRecurrence() {</span>
<a href="#l35.77"></a><span id="l35.77">   goToDate(controller, 2009, 1, 5);</span>
<a href="#l35.78"></a><span id="l35.78">   checkMultiWeekView(&quot;month&quot;);</span>
<a href="#l35.79"></a><span id="l35.79"> </span>
<a href="#l35.80"></a><span id="l35.80">   // Delete event.</span>
<a href="#l35.81"></a><span id="l35.81">   box = lookupEventBox(&quot;month&quot;, CANVAS_BOX, 2, 2, null, EVENTPATH);</span>
<a href="#l35.82"></a><span id="l35.82">   controller.click(box);</span>
<a href="#l35.83"></a><span id="l35.83">   handleOccurrencePrompt(controller, box, &quot;delete&quot;, true);</span>
<a href="#l35.84"></a><span id="l35.84">   controller.waitForElementNotPresent(box);</span>
<a href="#l35.85"></a><span id="l35.85" class="difflineminus">-}</span>
<a href="#l35.86"></a><span id="l35.86" class="difflineplus">+</span>
<a href="#l35.87"></a><span id="l35.87" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l35.88"></a><span id="l35.88" class="difflineplus">+});</span>
<a href="#l35.89"></a><span id="l35.89"> </span>
<a href="#l35.90"></a><span id="l35.90"> function setRecurrence(recurrence) {</span>
<a href="#l35.91"></a><span id="l35.91">   let { sleep: recsleep, lookup: reclookup, eid: recid } = helpersForController(recurrence);</span>
<a href="#l35.92"></a><span id="l35.92"> </span>
<a href="#l35.93"></a><span id="l35.93">   // weekly</span>
<a href="#l35.94"></a><span id="l35.94">   recurrence.waitForElement(recid(&quot;period-list&quot;));</span>
<a href="#l35.95"></a><span id="l35.95">   menulistSelect(recid(&quot;period-list&quot;), &quot;1&quot;, recurrence);</span>
<a href="#l35.96"></a><span id="l35.96"> </span>
<a href="#l35.97"></a><span id="l35.97" class="difflineat">@@ -194,18 +199,18 @@ function checkMultiWeekView(view) {</span>
<a href="#l35.98"></a><span id="l35.98">   controller.assertNode(lookupEventBox(view, CANVAS_BOX, startWeek + 3, 2, null, EVENTPATH));</span>
<a href="#l35.99"></a><span id="l35.99"> </span>
<a href="#l35.100"></a><span id="l35.100">   // Wednesday</span>
<a href="#l35.101"></a><span id="l35.101">   controller.assertNodeNotExist(</span>
<a href="#l35.102"></a><span id="l35.102">     lookupEventBox(view, CANVAS_BOX, startWeek + 3, 4, null, EVENTPATH)</span>
<a href="#l35.103"></a><span id="l35.103">   );</span>
<a href="#l35.104"></a><span id="l35.104"> }</span>
<a href="#l35.105"></a><span id="l35.105"> </span>
<a href="#l35.106"></a><span id="l35.106" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l35.107"></a><span id="l35.107" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l35.108"></a><span id="l35.108">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l35.109"></a><span id="l35.109">   // Reset view.</span>
<a href="#l35.110"></a><span id="l35.110">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l35.111"></a><span id="l35.111">   if (eid(&quot;day-view&quot;).getNode().orient == &quot;horizontal&quot;) {</span>
<a href="#l35.112"></a><span id="l35.112">     controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l35.113"></a><span id="l35.113">   }</span>
<a href="#l35.114"></a><span id="l35.114">   controller.waitFor(() =&gt; eid(&quot;day-view&quot;).getNode().orient == &quot;vertical&quot;);</span>
<a href="#l35.115"></a><span id="l35.115">   closeAllEventDialogs();</span>
<a href="#l35.116"></a><span id="l35.116" class="difflineminus">-}</span>
<a href="#l35.117"></a><span id="l35.117" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1">rename from calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js</span>
<a href="#l36.2"></a><span id="l36.2">rename to calendar/test/browser/recurrenceRotated/browser_weeklyWithException.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js</span>
<a href="#l36.4"></a><span id="l36.4" class="difflineplus">+++ b/calendar/test/browser/recurrenceRotated/browser_weeklyWithException.js</span>
<a href="#l36.5"></a><span id="l36.5" class="difflineat">@@ -1,65 +1,60 @@</span>
<a href="#l36.6"></a><span id="l36.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l36.7"></a><span id="l36.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l36.8"></a><span id="l36.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l36.9"></a><span id="l36.9"> </span>
<a href="#l36.10"></a><span id="l36.10" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l36.11"></a><span id="l36.11" class="difflineplus">+</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineplus">+var {</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l36.14"></a><span id="l36.14" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l36.15"></a><span id="l36.15" class="difflineplus">+  DAY_VIEW,</span>
<a href="#l36.16"></a><span id="l36.16" class="difflineplus">+  EVENTPATH,</span>
<a href="#l36.17"></a><span id="l36.17" class="difflineplus">+  EVENT_BOX,</span>
<a href="#l36.18"></a><span id="l36.18" class="difflineplus">+  TIMEOUT_MODAL_DIALOG,</span>
<a href="#l36.19"></a><span id="l36.19" class="difflineplus">+  WEEK_VIEW,</span>
<a href="#l36.20"></a><span id="l36.20" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l36.21"></a><span id="l36.21" class="difflineplus">+  createCalendar,</span>
<a href="#l36.22"></a><span id="l36.22" class="difflineplus">+  deleteCalendars,</span>
<a href="#l36.23"></a><span id="l36.23" class="difflineplus">+  goToDate,</span>
<a href="#l36.24"></a><span id="l36.24" class="difflineplus">+  handleOccurrencePrompt,</span>
<a href="#l36.25"></a><span id="l36.25" class="difflineplus">+  helpersForController,</span>
<a href="#l36.26"></a><span id="l36.26" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l36.27"></a><span id="l36.27" class="difflineplus">+  menulistSelect,</span>
<a href="#l36.28"></a><span id="l36.28" class="difflineplus">+  switchToView,</span>
<a href="#l36.29"></a><span id="l36.29" class="difflineplus">+  viewForward,</span>
<a href="#l36.30"></a><span id="l36.30" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l36.31"></a><span id="l36.31" class="difflineplus">+var {</span>
<a href="#l36.32"></a><span id="l36.32" class="difflineplus">+  REC_DLG_ACCEPT,</span>
<a href="#l36.33"></a><span id="l36.33" class="difflineplus">+  REC_DLG_DAYS,</span>
<a href="#l36.34"></a><span id="l36.34" class="difflineplus">+  REPEAT_DETAILS,</span>
<a href="#l36.35"></a><span id="l36.35" class="difflineplus">+  helpersForEditUI,</span>
<a href="#l36.36"></a><span id="l36.36" class="difflineplus">+  setData,</span>
<a href="#l36.37"></a><span id="l36.37" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;);</span>
<a href="#l36.38"></a><span id="l36.38"> var { plan_for_modal_dialog, wait_for_modal_dialog } = ChromeUtils.import(</span>
<a href="#l36.39"></a><span id="l36.39">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l36.40"></a><span id="l36.40"> );</span>
<a href="#l36.41"></a><span id="l36.41"> </span>
<a href="#l36.42"></a><span id="l36.42" class="difflineminus">-var TIMEOUT_MODAL_DIALOG, CALENDARNAME, EVENT_BOX, CANVAS_BOX;</span>
<a href="#l36.43"></a><span id="l36.43" class="difflineminus">-var DAY_VIEW, WEEK_VIEW, EVENTPATH;</span>
<a href="#l36.44"></a><span id="l36.44" class="difflineminus">-var helpersForController, handleOccurrencePrompt, switchToView, goToDate;</span>
<a href="#l36.45"></a><span id="l36.45" class="difflineminus">-var invokeEventDialog, viewForward, closeAllEventDialogs, deleteCalendars, createCalendar;</span>
<a href="#l36.46"></a><span id="l36.46" class="difflineminus">-var menulistSelect;</span>
<a href="#l36.47"></a><span id="l36.47" class="difflineminus">-var REPEAT_DETAILS, REC_DLG_ACCEPT, REC_DLG_DAYS;</span>
<a href="#l36.48"></a><span id="l36.48" class="difflineminus">-var helpersForEditUI, setData;</span>
<a href="#l36.49"></a><span id="l36.49" class="difflineplus">+var { cal } = ChromeUtils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l36.50"></a><span id="l36.50"> </span>
<a href="#l36.51"></a><span id="l36.51" class="difflineminus">-var { cal } = ChromeUtils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l36.52"></a><span id="l36.52" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l36.53"></a><span id="l36.53" class="difflineplus">+var { eid, lookup, lookupEventBox } = helpersForController(controller);</span>
<a href="#l36.54"></a><span id="l36.54"> </span>
<a href="#l36.55"></a><span id="l36.55"> const HOUR = 8;</span>
<a href="#l36.56"></a><span id="l36.56"> const STARTDATE = new Date(2009, 0, 6);</span>
<a href="#l36.57"></a><span id="l36.57"> </span>
<a href="#l36.58"></a><span id="l36.58" class="difflineminus">-function setupModule(module) {</span>
<a href="#l36.59"></a><span id="l36.59" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l36.60"></a><span id="l36.60" class="difflineminus">-  ({</span>
<a href="#l36.61"></a><span id="l36.61" class="difflineminus">-    TIMEOUT_MODAL_DIALOG,</span>
<a href="#l36.62"></a><span id="l36.62" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l36.63"></a><span id="l36.63" class="difflineminus">-    EVENT_BOX,</span>
<a href="#l36.64"></a><span id="l36.64" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l36.65"></a><span id="l36.65" class="difflineminus">-    EVENTPATH,</span>
<a href="#l36.66"></a><span id="l36.66" class="difflineminus">-    DAY_VIEW,</span>
<a href="#l36.67"></a><span id="l36.67" class="difflineminus">-    WEEK_VIEW,</span>
<a href="#l36.68"></a><span id="l36.68" class="difflineminus">-    helpersForController,</span>
<a href="#l36.69"></a><span id="l36.69" class="difflineminus">-    handleOccurrencePrompt,</span>
<a href="#l36.70"></a><span id="l36.70" class="difflineminus">-    switchToView,</span>
<a href="#l36.71"></a><span id="l36.71" class="difflineminus">-    goToDate,</span>
<a href="#l36.72"></a><span id="l36.72" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l36.73"></a><span id="l36.73" class="difflineminus">-    viewForward,</span>
<a href="#l36.74"></a><span id="l36.74" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l36.75"></a><span id="l36.75" class="difflineminus">-    deleteCalendars,</span>
<a href="#l36.76"></a><span id="l36.76" class="difflineminus">-    createCalendar,</span>
<a href="#l36.77"></a><span id="l36.77" class="difflineminus">-    menulistSelect,</span>
<a href="#l36.78"></a><span id="l36.78" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l36.79"></a><span id="l36.79" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l36.80"></a><span id="l36.80" class="difflineplus">+add_task(function testWeeklyWithExceptionRecurrence() {</span>
<a href="#l36.81"></a><span id="l36.81" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l36.82"></a><span id="l36.82" class="difflineplus">+  switchToView(controller, &quot;day&quot;);</span>
<a href="#l36.83"></a><span id="l36.83" class="difflineplus">+  goToDate(controller, 2009, 1, 5);</span>
<a href="#l36.84"></a><span id="l36.84"> </span>
<a href="#l36.85"></a><span id="l36.85" class="difflineminus">-  ({ REPEAT_DETAILS, REC_DLG_ACCEPT, REC_DLG_DAYS, helpersForEditUI, setData } = ChromeUtils.import(</span>
<a href="#l36.86"></a><span id="l36.86" class="difflineminus">-    &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l36.87"></a><span id="l36.87" class="difflineminus">-  ));</span>
<a href="#l36.88"></a><span id="l36.88" class="difflineminus">-</span>
<a href="#l36.89"></a><span id="l36.89" class="difflineminus">-  switchToView(controller, &quot;day&quot;);</span>
<a href="#l36.90"></a><span id="l36.90" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l36.91"></a><span id="l36.91">   // Rotate view.</span>
<a href="#l36.92"></a><span id="l36.92">   controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l36.93"></a><span id="l36.93">   controller.waitFor(() =&gt; eid(&quot;day-view&quot;).getNode().orient == &quot;horizontal&quot;);</span>
<a href="#l36.94"></a><span id="l36.94" class="difflineminus">-}</span>
<a href="#l36.95"></a><span id="l36.95" class="difflineminus">-</span>
<a href="#l36.96"></a><span id="l36.96" class="difflineminus">-function testWeeklyWithExceptionRecurrence() {</span>
<a href="#l36.97"></a><span id="l36.97" class="difflineminus">-  goToDate(controller, 2009, 1, 5);</span>
<a href="#l36.98"></a><span id="l36.98"> </span>
<a href="#l36.99"></a><span id="l36.99">   // Create weekly recurring event.</span>
<a href="#l36.100"></a><span id="l36.100">   let eventBox = lookupEventBox(&quot;day&quot;, CANVAS_BOX, null, 1, HOUR);</span>
<a href="#l36.101"></a><span id="l36.101">   invokeEventDialog(controller, eventBox, (event, iframe) =&gt; {</span>
<a href="#l36.102"></a><span id="l36.102">     let { eid: eventid } = helpersForController(event);</span>
<a href="#l36.103"></a><span id="l36.103"> </span>
<a href="#l36.104"></a><span id="l36.104">     event.waitForElement(eventid(&quot;item-repeat&quot;));</span>
<a href="#l36.105"></a><span id="l36.105">     plan_for_modal_dialog(&quot;Calendar:EventDialog:Recurrence&quot;, setRecurrence);</span>
<a href="#l36.106"></a><span id="l36.106" class="difflineat">@@ -183,17 +178,19 @@ function testWeeklyWithExceptionRecurren</span>
<a href="#l36.107"></a><span id="l36.107"> </span>
<a href="#l36.108"></a><span id="l36.108">   // Delete event.</span>
<a href="#l36.109"></a><span id="l36.109">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l36.110"></a><span id="l36.110">   goToDate(controller, 2009, 1, 12);</span>
<a href="#l36.111"></a><span id="l36.111">   path = lookupEventBox(&quot;day&quot;, EVENT_BOX, null, 1, null, EVENTPATH);</span>
<a href="#l36.112"></a><span id="l36.112">   controller.click(path);</span>
<a href="#l36.113"></a><span id="l36.113">   handleOccurrencePrompt(controller, path, &quot;delete&quot;, true);</span>
<a href="#l36.114"></a><span id="l36.114">   controller.waitForElementNotPresent(path);</span>
<a href="#l36.115"></a><span id="l36.115" class="difflineminus">-}</span>
<a href="#l36.116"></a><span id="l36.116" class="difflineplus">+</span>
<a href="#l36.117"></a><span id="l36.117" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l36.118"></a><span id="l36.118" class="difflineplus">+});</span>
<a href="#l36.119"></a><span id="l36.119"> </span>
<a href="#l36.120"></a><span id="l36.120"> function setRecurrence(recurrence) {</span>
<a href="#l36.121"></a><span id="l36.121">   let { lookup: reclookup, eid: recid } = helpersForController(recurrence);</span>
<a href="#l36.122"></a><span id="l36.122"> </span>
<a href="#l36.123"></a><span id="l36.123">   // weekly</span>
<a href="#l36.124"></a><span id="l36.124">   menulistSelect(recid(&quot;period-list&quot;), &quot;1&quot;, recurrence);</span>
<a href="#l36.125"></a><span id="l36.125"> </span>
<a href="#l36.126"></a><span id="l36.126">   let mon = cal.l10n.getDateFmtString(&quot;day.2.Mmm&quot;);</span>
<a href="#l36.127"></a><span id="l36.127" class="difflineat">@@ -269,19 +266,19 @@ function checkMultiWeekView(view) {</span>
<a href="#l36.128"></a><span id="l36.128">   assertNodeLookup(view, CANVAS_BOX, startWeek + 1, 2, null, EVENTPATH);</span>
<a href="#l36.129"></a><span id="l36.129">   assertNodeLookup(view, CANVAS_BOX, startWeek + 1, 3, null, EVENTPATH);</span>
<a href="#l36.130"></a><span id="l36.130">   assertNodeLookup(view, CANVAS_BOX, startWeek + 1, 4, null, EVENTPATH);</span>
<a href="#l36.131"></a><span id="l36.131">   assertNodeNotExistLookup(view, EVENT_BOX, startWeek + 1, 5, null, EVENTPATH);</span>
<a href="#l36.132"></a><span id="l36.132">   assertNodeLookup(view, CANVAS_BOX, startWeek + 1, 6, null, EVENTPATH);</span>
<a href="#l36.133"></a><span id="l36.133">   assertNodeNotExistLookup(view, EVENT_BOX, startWeek + 1, 7, null, EVENTPATH);</span>
<a href="#l36.134"></a><span id="l36.134"> }</span>
<a href="#l36.135"></a><span id="l36.135"> </span>
<a href="#l36.136"></a><span id="l36.136" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l36.137"></a><span id="l36.137" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l36.138"></a><span id="l36.138">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l36.139"></a><span id="l36.139"> </span>
<a href="#l36.140"></a><span id="l36.140">   // Reset view.</span>
<a href="#l36.141"></a><span id="l36.141">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l36.142"></a><span id="l36.142">   if (eid(&quot;day-view&quot;).getNode().orient == &quot;horizontal&quot;) {</span>
<a href="#l36.143"></a><span id="l36.143">     controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l36.144"></a><span id="l36.144">   }</span>
<a href="#l36.145"></a><span id="l36.145">   controller.waitFor(() =&gt; eid(&quot;day-view&quot;).getNode().orient == &quot;vertical&quot;);</span>
<a href="#l36.146"></a><span id="l36.146">   closeAllEventDialogs();</span>
<a href="#l36.147"></a><span id="l36.147" class="difflineminus">-}</span>
<a href="#l36.148"></a><span id="l36.148" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1">copy from calendar/test/browser/browser.ini</span>
<a href="#l37.2"></a><span id="l37.2">copy to calendar/test/browser/views/browser.ini</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineminus">--- a/calendar/test/browser/browser.ini</span>
<a href="#l37.4"></a><span id="l37.4" class="difflineplus">+++ b/calendar/test/browser/views/browser.ini</span>
<a href="#l37.5"></a><span id="l37.5" class="difflineat">@@ -1,17 +1,18 @@</span>
<a href="#l37.6"></a><span id="l37.6"> [default]</span>
<a href="#l37.7"></a><span id="l37.7" class="difflineminus">-head = head.js</span>
<a href="#l37.8"></a><span id="l37.8" class="difflineplus">+head = ../head.js</span>
<a href="#l37.9"></a><span id="l37.9"> prefs =</span>
<a href="#l37.10"></a><span id="l37.10">   ldap_2.servers.osx.description=</span>
<a href="#l37.11"></a><span id="l37.11">   ldap_2.servers.osx.dirType=-1</span>
<a href="#l37.12"></a><span id="l37.12">   ldap_2.servers.osx.uri=</span>
<a href="#l37.13"></a><span id="l37.13">   mail.provider.suppress_dialog_on_startup=true</span>
<a href="#l37.14"></a><span id="l37.14">   mail.spotlight.firstRunDone=true</span>
<a href="#l37.15"></a><span id="l37.15">   mail.winsearch.firstRunDone=true</span>
<a href="#l37.16"></a><span id="l37.16">   mailnews.start_page.override_url=about:blank</span>
<a href="#l37.17"></a><span id="l37.17">   mailnews.start_page.url=about:blank</span>
<a href="#l37.18"></a><span id="l37.18"> subsuite = thunderbird</span>
<a href="#l37.19"></a><span id="l37.19" class="difflineminus">-support-files = data/**</span>
<a href="#l37.20"></a><span id="l37.20"> </span>
<a href="#l37.21"></a><span id="l37.21" class="difflineminus">-[browser_calendarList.js]</span>
<a href="#l37.22"></a><span id="l37.22" class="difflineminus">-[browser_import.js]</span>
<a href="#l37.23"></a><span id="l37.23" class="difflineminus">-[browser_tabs.js]</span>
<a href="#l37.24"></a><span id="l37.24" class="difflineplus">+[browser_dayView.js]</span>
<a href="#l37.25"></a><span id="l37.25" class="difflineplus">+[browser_monthView.js]</span>
<a href="#l37.26"></a><span id="l37.26" class="difflineplus">+[browser_multiweekView.js]</span>
<a href="#l37.27"></a><span id="l37.27" class="difflineplus">+[browser_taskView.js]</span>
<a href="#l37.28"></a><span id="l37.28" class="difflineplus">+[browser_weekView.js]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1">rename from calendar/test/mozmill/views/testDayView.js</span>
<a href="#l38.2"></a><span id="l38.2">rename to calendar/test/browser/views/browser_dayView.js</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineminus">--- a/calendar/test/mozmill/views/testDayView.js</span>
<a href="#l38.4"></a><span id="l38.4" class="difflineplus">+++ b/calendar/test/browser/views/browser_dayView.js</span>
<a href="#l38.5"></a><span id="l38.5" class="difflineat">@@ -1,54 +1,47 @@</span>
<a href="#l38.6"></a><span id="l38.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l38.7"></a><span id="l38.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l38.8"></a><span id="l38.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l38.9"></a><span id="l38.9"> </span>
<a href="#l38.10"></a><span id="l38.10" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l38.11"></a><span id="l38.11" class="difflineplus">+</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineplus">+var {</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l38.14"></a><span id="l38.14" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l38.15"></a><span id="l38.15" class="difflineplus">+  DAY_VIEW,</span>
<a href="#l38.16"></a><span id="l38.16" class="difflineplus">+  EVENTPATH,</span>
<a href="#l38.17"></a><span id="l38.17" class="difflineplus">+  EVENT_BOX,</span>
<a href="#l38.18"></a><span id="l38.18" class="difflineplus">+  LABELDAYBOX,</span>
<a href="#l38.19"></a><span id="l38.19" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l38.20"></a><span id="l38.20" class="difflineplus">+  createCalendar,</span>
<a href="#l38.21"></a><span id="l38.21" class="difflineplus">+  deleteCalendars,</span>
<a href="#l38.22"></a><span id="l38.22" class="difflineplus">+  getEventDetails,</span>
<a href="#l38.23"></a><span id="l38.23" class="difflineplus">+  goToDate,</span>
<a href="#l38.24"></a><span id="l38.24" class="difflineplus">+  helpersForController,</span>
<a href="#l38.25"></a><span id="l38.25" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l38.26"></a><span id="l38.26" class="difflineplus">+  switchToView,</span>
<a href="#l38.27"></a><span id="l38.27" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l38.28"></a><span id="l38.28" class="difflineplus">+var { helpersForEditUI, setData } = ChromeUtils.import(</span>
<a href="#l38.29"></a><span id="l38.29" class="difflineplus">+  &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l38.30"></a><span id="l38.30" class="difflineplus">+);</span>
<a href="#l38.31"></a><span id="l38.31" class="difflineplus">+</span>
<a href="#l38.32"></a><span id="l38.32"> var { cal } = ChromeUtils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l38.33"></a><span id="l38.33"> </span>
<a href="#l38.34"></a><span id="l38.34" class="difflineminus">-var CALENDARNAME, CANVAS_BOX, EVENT_BOX, DAY_VIEW, LABELDAYBOX, EVENTPATH;</span>
<a href="#l38.35"></a><span id="l38.35" class="difflineminus">-var helpersForController, switchToView, invokeEventDialog, getEventDetails, createCalendar;</span>
<a href="#l38.36"></a><span id="l38.36" class="difflineminus">-var closeAllEventDialogs, deleteCalendars, goToDate, lookupEventBox;</span>
<a href="#l38.37"></a><span id="l38.37" class="difflineminus">-var helpersForEditUI, setData;</span>
<a href="#l38.38"></a><span id="l38.38" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l38.39"></a><span id="l38.39" class="difflineplus">+var { lookup, lookupEventBox } = helpersForController(controller);</span>
<a href="#l38.40"></a><span id="l38.40"> </span>
<a href="#l38.41"></a><span id="l38.41"> const TITLE1 = &quot;Day View Event&quot;;</span>
<a href="#l38.42"></a><span id="l38.42"> const TITLE2 = &quot;Day View Event Changed&quot;;</span>
<a href="#l38.43"></a><span id="l38.43"> const DESC = &quot;Day View Event Description&quot;;</span>
<a href="#l38.44"></a><span id="l38.44"> </span>
<a href="#l38.45"></a><span id="l38.45" class="difflineminus">-function setupModule(module) {</span>
<a href="#l38.46"></a><span id="l38.46" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l38.47"></a><span id="l38.47" class="difflineminus">-  ({</span>
<a href="#l38.48"></a><span id="l38.48" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l38.49"></a><span id="l38.49" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l38.50"></a><span id="l38.50" class="difflineminus">-    EVENT_BOX,</span>
<a href="#l38.51"></a><span id="l38.51" class="difflineminus">-    DAY_VIEW,</span>
<a href="#l38.52"></a><span id="l38.52" class="difflineminus">-    LABELDAYBOX,</span>
<a href="#l38.53"></a><span id="l38.53" class="difflineminus">-    EVENTPATH,</span>
<a href="#l38.54"></a><span id="l38.54" class="difflineminus">-    helpersForController,</span>
<a href="#l38.55"></a><span id="l38.55" class="difflineminus">-    switchToView,</span>
<a href="#l38.56"></a><span id="l38.56" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l38.57"></a><span id="l38.57" class="difflineminus">-    getEventDetails,</span>
<a href="#l38.58"></a><span id="l38.58" class="difflineminus">-    createCalendar,</span>
<a href="#l38.59"></a><span id="l38.59" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l38.60"></a><span id="l38.60" class="difflineminus">-    deleteCalendars,</span>
<a href="#l38.61"></a><span id="l38.61" class="difflineminus">-    goToDate,</span>
<a href="#l38.62"></a><span id="l38.62" class="difflineminus">-    lookupEventBox,</span>
<a href="#l38.63"></a><span id="l38.63" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l38.64"></a><span id="l38.64" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l38.65"></a><span id="l38.65" class="difflineminus">-</span>
<a href="#l38.66"></a><span id="l38.66" class="difflineminus">-  ({ helpersForEditUI, setData } = ChromeUtils.import(</span>
<a href="#l38.67"></a><span id="l38.67" class="difflineminus">-    &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l38.68"></a><span id="l38.68" class="difflineminus">-  ));</span>
<a href="#l38.69"></a><span id="l38.69" class="difflineplus">+add_task(function testDayView() {</span>
<a href="#l38.70"></a><span id="l38.70" class="difflineplus">+  let dateFormatter = cal.getDateFormatter();</span>
<a href="#l38.71"></a><span id="l38.71"> </span>
<a href="#l38.72"></a><span id="l38.72">   createCalendar(controller, CALENDARNAME);</span>
<a href="#l38.73"></a><span id="l38.73" class="difflineminus">-}</span>
<a href="#l38.74"></a><span id="l38.74" class="difflineminus">-</span>
<a href="#l38.75"></a><span id="l38.75" class="difflineminus">-function testDayView() {</span>
<a href="#l38.76"></a><span id="l38.76" class="difflineminus">-  let dateFormatter = cal.getDateFormatter();</span>
<a href="#l38.77"></a><span id="l38.77" class="difflineminus">-</span>
<a href="#l38.78"></a><span id="l38.78">   switchToView(controller, &quot;day&quot;);</span>
<a href="#l38.79"></a><span id="l38.79">   goToDate(controller, 2009, 1, 1);</span>
<a href="#l38.80"></a><span id="l38.80"> </span>
<a href="#l38.81"></a><span id="l38.81">   // Verify date in view.</span>
<a href="#l38.82"></a><span id="l38.82">   let day = lookup(`${DAY_VIEW}/${LABELDAYBOX}/{&quot;flex&quot;:&quot;1&quot;}`);</span>
<a href="#l38.83"></a><span id="l38.83">   controller.waitFor(() =&gt; day.getNode().mDate.icalString == &quot;20090101&quot;);</span>
<a href="#l38.84"></a><span id="l38.84"> </span>
<a href="#l38.85"></a><span id="l38.85">   // Create event at 8 AM.</span>
<a href="#l38.86"></a><span id="l38.86" class="difflineat">@@ -100,14 +93,16 @@ function testDayView() {</span>
<a href="#l38.87"></a><span id="l38.87">   );</span>
<a href="#l38.88"></a><span id="l38.88">   controller.waitForElement(eventName);</span>
<a href="#l38.89"></a><span id="l38.89">   controller.waitFor(() =&gt; eventName.getNode().textContent == TITLE2);</span>
<a href="#l38.90"></a><span id="l38.90"> </span>
<a href="#l38.91"></a><span id="l38.91">   // Delete event</span>
<a href="#l38.92"></a><span id="l38.92">   controller.click(eventBox);</span>
<a href="#l38.93"></a><span id="l38.93">   controller.keypress(eventBox, &quot;VK_DELETE&quot;, {});</span>
<a href="#l38.94"></a><span id="l38.94">   controller.waitForElementNotPresent(eventBox);</span>
<a href="#l38.95"></a><span id="l38.95" class="difflineminus">-}</span>
<a href="#l38.96"></a><span id="l38.96"> </span>
<a href="#l38.97"></a><span id="l38.97" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l38.98"></a><span id="l38.98" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l38.99"></a><span id="l38.99" class="difflineplus">+});</span>
<a href="#l38.100"></a><span id="l38.100" class="difflineplus">+</span>
<a href="#l38.101"></a><span id="l38.101" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l38.102"></a><span id="l38.102">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l38.103"></a><span id="l38.103">   closeAllEventDialogs();</span>
<a href="#l38.104"></a><span id="l38.104" class="difflineminus">-}</span>
<a href="#l38.105"></a><span id="l38.105" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1">rename from calendar/test/mozmill/views/testMonthView.js</span>
<a href="#l39.2"></a><span id="l39.2">rename to calendar/test/browser/views/browser_monthView.js</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineminus">--- a/calendar/test/mozmill/views/testMonthView.js</span>
<a href="#l39.4"></a><span id="l39.4" class="difflineplus">+++ b/calendar/test/browser/views/browser_monthView.js</span>
<a href="#l39.5"></a><span id="l39.5" class="difflineat">@@ -1,51 +1,45 @@</span>
<a href="#l39.6"></a><span id="l39.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l39.7"></a><span id="l39.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l39.8"></a><span id="l39.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l39.9"></a><span id="l39.9"> </span>
<a href="#l39.10"></a><span id="l39.10" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l39.11"></a><span id="l39.11" class="difflineplus">+</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineplus">+var {</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l39.14"></a><span id="l39.14" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l39.15"></a><span id="l39.15" class="difflineplus">+  EVENTPATH,</span>
<a href="#l39.16"></a><span id="l39.16" class="difflineplus">+  MONTH_VIEW,</span>
<a href="#l39.17"></a><span id="l39.17" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l39.18"></a><span id="l39.18" class="difflineplus">+  createCalendar,</span>
<a href="#l39.19"></a><span id="l39.19" class="difflineplus">+  deleteCalendars,</span>
<a href="#l39.20"></a><span id="l39.20" class="difflineplus">+  getEventDetails,</span>
<a href="#l39.21"></a><span id="l39.21" class="difflineplus">+  goToDate,</span>
<a href="#l39.22"></a><span id="l39.22" class="difflineplus">+  helpersForController,</span>
<a href="#l39.23"></a><span id="l39.23" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l39.24"></a><span id="l39.24" class="difflineplus">+  switchToView,</span>
<a href="#l39.25"></a><span id="l39.25" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l39.26"></a><span id="l39.26" class="difflineplus">+var { helpersForEditUI, setData } = ChromeUtils.import(</span>
<a href="#l39.27"></a><span id="l39.27" class="difflineplus">+  &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l39.28"></a><span id="l39.28" class="difflineplus">+);</span>
<a href="#l39.29"></a><span id="l39.29" class="difflineplus">+</span>
<a href="#l39.30"></a><span id="l39.30"> var { cal } = ChromeUtils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l39.31"></a><span id="l39.31"> </span>
<a href="#l39.32"></a><span id="l39.32" class="difflineminus">-var CALENDARNAME, CANVAS_BOX, MONTH_VIEW, EVENTPATH;</span>
<a href="#l39.33"></a><span id="l39.33" class="difflineminus">-var helpersForController, switchToView, invokeEventDialog, getEventDetails, createCalendar;</span>
<a href="#l39.34"></a><span id="l39.34" class="difflineminus">-var closeAllEventDialogs, deleteCalendars, goToDate, lookupEventBox;</span>
<a href="#l39.35"></a><span id="l39.35" class="difflineminus">-var helpersForEditUI, setData;</span>
<a href="#l39.36"></a><span id="l39.36" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l39.37"></a><span id="l39.37" class="difflineplus">+var { lookup, lookupEventBox } = helpersForController(controller);</span>
<a href="#l39.38"></a><span id="l39.38"> </span>
<a href="#l39.39"></a><span id="l39.39"> const TITLE1 = &quot;Month View Event&quot;;</span>
<a href="#l39.40"></a><span id="l39.40"> const TITLE2 = &quot;Month View Event Changed&quot;;</span>
<a href="#l39.41"></a><span id="l39.41"> const DESC = &quot;Month View Event Description&quot;;</span>
<a href="#l39.42"></a><span id="l39.42"> </span>
<a href="#l39.43"></a><span id="l39.43" class="difflineminus">-function setupModule(module) {</span>
<a href="#l39.44"></a><span id="l39.44" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l39.45"></a><span id="l39.45" class="difflineminus">-  ({</span>
<a href="#l39.46"></a><span id="l39.46" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l39.47"></a><span id="l39.47" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l39.48"></a><span id="l39.48" class="difflineminus">-    MONTH_VIEW,</span>
<a href="#l39.49"></a><span id="l39.49" class="difflineminus">-    EVENTPATH,</span>
<a href="#l39.50"></a><span id="l39.50" class="difflineminus">-    helpersForController,</span>
<a href="#l39.51"></a><span id="l39.51" class="difflineminus">-    switchToView,</span>
<a href="#l39.52"></a><span id="l39.52" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l39.53"></a><span id="l39.53" class="difflineminus">-    getEventDetails,</span>
<a href="#l39.54"></a><span id="l39.54" class="difflineminus">-    createCalendar,</span>
<a href="#l39.55"></a><span id="l39.55" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l39.56"></a><span id="l39.56" class="difflineminus">-    deleteCalendars,</span>
<a href="#l39.57"></a><span id="l39.57" class="difflineminus">-    goToDate,</span>
<a href="#l39.58"></a><span id="l39.58" class="difflineminus">-    lookupEventBox,</span>
<a href="#l39.59"></a><span id="l39.59" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l39.60"></a><span id="l39.60" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l39.61"></a><span id="l39.61" class="difflineminus">-</span>
<a href="#l39.62"></a><span id="l39.62" class="difflineminus">-  ({ helpersForEditUI, setData } = ChromeUtils.import(</span>
<a href="#l39.63"></a><span id="l39.63" class="difflineminus">-    &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l39.64"></a><span id="l39.64" class="difflineminus">-  ));</span>
<a href="#l39.65"></a><span id="l39.65" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l39.66"></a><span id="l39.66" class="difflineminus">-}</span>
<a href="#l39.67"></a><span id="l39.67" class="difflineminus">-</span>
<a href="#l39.68"></a><span id="l39.68" class="difflineminus">-function testMonthView() {</span>
<a href="#l39.69"></a><span id="l39.69" class="difflineplus">+add_task(function testMonthView() {</span>
<a href="#l39.70"></a><span id="l39.70">   let dateFormatter = cal.getDateFormatter();</span>
<a href="#l39.71"></a><span id="l39.71"> </span>
<a href="#l39.72"></a><span id="l39.72" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l39.73"></a><span id="l39.73">   switchToView(controller, &quot;month&quot;);</span>
<a href="#l39.74"></a><span id="l39.74">   goToDate(controller, 2009, 1, 1);</span>
<a href="#l39.75"></a><span id="l39.75"> </span>
<a href="#l39.76"></a><span id="l39.76">   // Verify date.</span>
<a href="#l39.77"></a><span id="l39.77">   let day = lookup(`</span>
<a href="#l39.78"></a><span id="l39.78">         ${MONTH_VIEW}/{&quot;class&quot;:&quot;mainbox&quot;}/{&quot;class&quot;:&quot;monthgrid&quot;}/</span>
<a href="#l39.79"></a><span id="l39.79">         {&quot;class&quot;:&quot;monthgridrows&quot;}/[0]/{&quot;selected&quot;:&quot;true&quot;}</span>
<a href="#l39.80"></a><span id="l39.80">     `);</span>
<a href="#l39.81"></a><span id="l39.81" class="difflineat">@@ -104,14 +98,16 @@ function testMonthView() {</span>
<a href="#l39.82"></a><span id="l39.82"> </span>
<a href="#l39.83"></a><span id="l39.83">   controller.waitForElement(eventName);</span>
<a href="#l39.84"></a><span id="l39.84">   controller.waitFor(() =&gt; eventName.getNode().value == TITLE2);</span>
<a href="#l39.85"></a><span id="l39.85"> </span>
<a href="#l39.86"></a><span id="l39.86">   // Delete event.</span>
<a href="#l39.87"></a><span id="l39.87">   controller.click(eventBox);</span>
<a href="#l39.88"></a><span id="l39.88">   controller.keypress(eventBox, &quot;VK_DELETE&quot;, {});</span>
<a href="#l39.89"></a><span id="l39.89">   controller.waitForElementNotPresent(eventBox);</span>
<a href="#l39.90"></a><span id="l39.90" class="difflineminus">-}</span>
<a href="#l39.91"></a><span id="l39.91"> </span>
<a href="#l39.92"></a><span id="l39.92" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l39.93"></a><span id="l39.93" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l39.94"></a><span id="l39.94" class="difflineplus">+});</span>
<a href="#l39.95"></a><span id="l39.95" class="difflineplus">+</span>
<a href="#l39.96"></a><span id="l39.96" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l39.97"></a><span id="l39.97">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l39.98"></a><span id="l39.98">   closeAllEventDialogs();</span>
<a href="#l39.99"></a><span id="l39.99" class="difflineminus">-}</span>
<a href="#l39.100"></a><span id="l39.100" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1">rename from calendar/test/mozmill/views/testMultiweekView.js</span>
<a href="#l40.2"></a><span id="l40.2">rename to calendar/test/browser/views/browser_multiweekView.js</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineminus">--- a/calendar/test/mozmill/views/testMultiweekView.js</span>
<a href="#l40.4"></a><span id="l40.4" class="difflineplus">+++ b/calendar/test/browser/views/browser_multiweekView.js</span>
<a href="#l40.5"></a><span id="l40.5" class="difflineat">@@ -1,51 +1,45 @@</span>
<a href="#l40.6"></a><span id="l40.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l40.7"></a><span id="l40.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l40.8"></a><span id="l40.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l40.9"></a><span id="l40.9"> </span>
<a href="#l40.10"></a><span id="l40.10" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l40.11"></a><span id="l40.11" class="difflineplus">+</span>
<a href="#l40.12"></a><span id="l40.12" class="difflineplus">+var {</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l40.14"></a><span id="l40.14" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l40.15"></a><span id="l40.15" class="difflineplus">+  EVENTPATH,</span>
<a href="#l40.16"></a><span id="l40.16" class="difflineplus">+  MULTIWEEK_VIEW,</span>
<a href="#l40.17"></a><span id="l40.17" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l40.18"></a><span id="l40.18" class="difflineplus">+  createCalendar,</span>
<a href="#l40.19"></a><span id="l40.19" class="difflineplus">+  deleteCalendars,</span>
<a href="#l40.20"></a><span id="l40.20" class="difflineplus">+  getEventDetails,</span>
<a href="#l40.21"></a><span id="l40.21" class="difflineplus">+  goToDate,</span>
<a href="#l40.22"></a><span id="l40.22" class="difflineplus">+  helpersForController,</span>
<a href="#l40.23"></a><span id="l40.23" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l40.24"></a><span id="l40.24" class="difflineplus">+  switchToView,</span>
<a href="#l40.25"></a><span id="l40.25" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l40.26"></a><span id="l40.26" class="difflineplus">+var { helpersForEditUI, setData } = ChromeUtils.import(</span>
<a href="#l40.27"></a><span id="l40.27" class="difflineplus">+  &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l40.28"></a><span id="l40.28" class="difflineplus">+);</span>
<a href="#l40.29"></a><span id="l40.29" class="difflineplus">+</span>
<a href="#l40.30"></a><span id="l40.30"> var { cal } = ChromeUtils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l40.31"></a><span id="l40.31"> </span>
<a href="#l40.32"></a><span id="l40.32" class="difflineminus">-var CALENDARNAME, CANVAS_BOX, MULTIWEEK_VIEW, EVENTPATH;</span>
<a href="#l40.33"></a><span id="l40.33" class="difflineminus">-var helpersForController, switchToView, invokeEventDialog, getEventDetails, createCalendar;</span>
<a href="#l40.34"></a><span id="l40.34" class="difflineminus">-var closeAllEventDialogs, deleteCalendars, goToDate, lookupEventBox;</span>
<a href="#l40.35"></a><span id="l40.35" class="difflineminus">-var helpersForEditUI, setData;</span>
<a href="#l40.36"></a><span id="l40.36" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l40.37"></a><span id="l40.37" class="difflineplus">+var { lookup, lookupEventBox } = helpersForController(controller);</span>
<a href="#l40.38"></a><span id="l40.38"> </span>
<a href="#l40.39"></a><span id="l40.39"> const TITLE1 = &quot;Multiweek View Event&quot;;</span>
<a href="#l40.40"></a><span id="l40.40"> const TITLE2 = &quot;Multiweek View Event Changed&quot;;</span>
<a href="#l40.41"></a><span id="l40.41"> const DESC = &quot;Multiweek View Event Description&quot;;</span>
<a href="#l40.42"></a><span id="l40.42"> </span>
<a href="#l40.43"></a><span id="l40.43" class="difflineminus">-function setupModule(module) {</span>
<a href="#l40.44"></a><span id="l40.44" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l40.45"></a><span id="l40.45" class="difflineminus">-  ({</span>
<a href="#l40.46"></a><span id="l40.46" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l40.47"></a><span id="l40.47" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l40.48"></a><span id="l40.48" class="difflineminus">-    MULTIWEEK_VIEW,</span>
<a href="#l40.49"></a><span id="l40.49" class="difflineminus">-    EVENTPATH,</span>
<a href="#l40.50"></a><span id="l40.50" class="difflineminus">-    helpersForController,</span>
<a href="#l40.51"></a><span id="l40.51" class="difflineminus">-    switchToView,</span>
<a href="#l40.52"></a><span id="l40.52" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l40.53"></a><span id="l40.53" class="difflineminus">-    getEventDetails,</span>
<a href="#l40.54"></a><span id="l40.54" class="difflineminus">-    createCalendar,</span>
<a href="#l40.55"></a><span id="l40.55" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l40.56"></a><span id="l40.56" class="difflineminus">-    deleteCalendars,</span>
<a href="#l40.57"></a><span id="l40.57" class="difflineminus">-    goToDate,</span>
<a href="#l40.58"></a><span id="l40.58" class="difflineminus">-    lookupEventBox,</span>
<a href="#l40.59"></a><span id="l40.59" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l40.60"></a><span id="l40.60" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l40.61"></a><span id="l40.61" class="difflineminus">-</span>
<a href="#l40.62"></a><span id="l40.62" class="difflineminus">-  ({ helpersForEditUI, setData } = ChromeUtils.import(</span>
<a href="#l40.63"></a><span id="l40.63" class="difflineminus">-    &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l40.64"></a><span id="l40.64" class="difflineminus">-  ));</span>
<a href="#l40.65"></a><span id="l40.65" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l40.66"></a><span id="l40.66" class="difflineminus">-}</span>
<a href="#l40.67"></a><span id="l40.67" class="difflineminus">-</span>
<a href="#l40.68"></a><span id="l40.68" class="difflineminus">-function testMultiWeekView() {</span>
<a href="#l40.69"></a><span id="l40.69" class="difflineplus">+add_task(function setupModule(module) {</span>
<a href="#l40.70"></a><span id="l40.70">   let dateFormatter = cal.getDateFormatter();</span>
<a href="#l40.71"></a><span id="l40.71"> </span>
<a href="#l40.72"></a><span id="l40.72" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l40.73"></a><span id="l40.73">   switchToView(controller, &quot;multiweek&quot;);</span>
<a href="#l40.74"></a><span id="l40.74">   goToDate(controller, 2009, 1, 1);</span>
<a href="#l40.75"></a><span id="l40.75"> </span>
<a href="#l40.76"></a><span id="l40.76">   // Verify date.</span>
<a href="#l40.77"></a><span id="l40.77">   let day = lookup(`</span>
<a href="#l40.78"></a><span id="l40.78">         ${MULTIWEEK_VIEW}/{&quot;class&quot;:&quot;mainbox&quot;}/{&quot;class&quot;:&quot;monthgrid&quot;}/</span>
<a href="#l40.79"></a><span id="l40.79">         {&quot;class&quot;:&quot;monthgridrows&quot;}/[0]/{&quot;selected&quot;:&quot;true&quot;}</span>
<a href="#l40.80"></a><span id="l40.80">     `);</span>
<a href="#l40.81"></a><span id="l40.81" class="difflineat">@@ -105,14 +99,16 @@ function testMultiWeekView() {</span>
<a href="#l40.82"></a><span id="l40.82"> </span>
<a href="#l40.83"></a><span id="l40.83">   controller.waitForElement(eventName);</span>
<a href="#l40.84"></a><span id="l40.84">   controller.waitFor(() =&gt; eventName.getNode().value == TITLE2);</span>
<a href="#l40.85"></a><span id="l40.85"> </span>
<a href="#l40.86"></a><span id="l40.86">   // Delete event.</span>
<a href="#l40.87"></a><span id="l40.87">   controller.click(eventBox);</span>
<a href="#l40.88"></a><span id="l40.88">   controller.keypress(eventBox, &quot;VK_DELETE&quot;, {});</span>
<a href="#l40.89"></a><span id="l40.89">   controller.waitForElementNotPresent(eventBox);</span>
<a href="#l40.90"></a><span id="l40.90" class="difflineminus">-}</span>
<a href="#l40.91"></a><span id="l40.91"> </span>
<a href="#l40.92"></a><span id="l40.92" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l40.93"></a><span id="l40.93" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l40.94"></a><span id="l40.94" class="difflineplus">+});</span>
<a href="#l40.95"></a><span id="l40.95" class="difflineplus">+</span>
<a href="#l40.96"></a><span id="l40.96" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l40.97"></a><span id="l40.97">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l40.98"></a><span id="l40.98">   closeAllEventDialogs();</span>
<a href="#l40.99"></a><span id="l40.99" class="difflineminus">-}</span>
<a href="#l40.100"></a><span id="l40.100" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1">rename from calendar/test/mozmill/views/testTaskView.js</span>
<a href="#l41.2"></a><span id="l41.2">rename to calendar/test/browser/views/browser_taskView.js</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineminus">--- a/calendar/test/mozmill/views/testTaskView.js</span>
<a href="#l41.4"></a><span id="l41.4" class="difflineplus">+++ b/calendar/test/browser/views/browser_taskView.js</span>
<a href="#l41.5"></a><span id="l41.5" class="difflineat">@@ -1,42 +1,38 @@</span>
<a href="#l41.6"></a><span id="l41.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l41.7"></a><span id="l41.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l41.8"></a><span id="l41.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l41.9"></a><span id="l41.9"> </span>
<a href="#l41.10"></a><span id="l41.10" class="difflineminus">-var CALENDARNAME, CALENDARLIST, TASK_VIEW;</span>
<a href="#l41.11"></a><span id="l41.11" class="difflineminus">-var helpersForController, invokeEventDialog, createCalendar, closeAllEventDialogs, deleteCalendars;</span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-var setData;</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l41.14"></a><span id="l41.14" class="difflineplus">+</span>
<a href="#l41.15"></a><span id="l41.15" class="difflineplus">+var {</span>
<a href="#l41.16"></a><span id="l41.16" class="difflineplus">+  CALENDARLIST,</span>
<a href="#l41.17"></a><span id="l41.17" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l41.18"></a><span id="l41.18" class="difflineplus">+  TASK_VIEW,</span>
<a href="#l41.19"></a><span id="l41.19" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l41.20"></a><span id="l41.20" class="difflineplus">+  createCalendar,</span>
<a href="#l41.21"></a><span id="l41.21" class="difflineplus">+  deleteCalendars,</span>
<a href="#l41.22"></a><span id="l41.22" class="difflineplus">+  helpersForController,</span>
<a href="#l41.23"></a><span id="l41.23" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l41.24"></a><span id="l41.24" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l41.25"></a><span id="l41.25" class="difflineplus">+var { setData } = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;);</span>
<a href="#l41.26"></a><span id="l41.26" class="difflineplus">+</span>
<a href="#l41.27"></a><span id="l41.27" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l41.28"></a><span id="l41.28" class="difflineplus">+var { eid, lookup, sleep } = helpersForController(controller);</span>
<a href="#l41.29"></a><span id="l41.29"> </span>
<a href="#l41.30"></a><span id="l41.30"> const TITLE = &quot;Task&quot;;</span>
<a href="#l41.31"></a><span id="l41.31"> const DESCRIPTION = &quot;1. Do A\n2. Do B&quot;;</span>
<a href="#l41.32"></a><span id="l41.32"> const PERCENTCOMPLETE = &quot;50&quot;;</span>
<a href="#l41.33"></a><span id="l41.33" class="difflineminus">-var CALENDARID;</span>
<a href="#l41.34"></a><span id="l41.34" class="difflineminus">-</span>
<a href="#l41.35"></a><span id="l41.35" class="difflineminus">-function setupModule(module) {</span>
<a href="#l41.36"></a><span id="l41.36" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l41.37"></a><span id="l41.37" class="difflineminus">-  ({</span>
<a href="#l41.38"></a><span id="l41.38" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l41.39"></a><span id="l41.39" class="difflineminus">-    CALENDARLIST,</span>
<a href="#l41.40"></a><span id="l41.40" class="difflineminus">-    TASK_VIEW,</span>
<a href="#l41.41"></a><span id="l41.41" class="difflineminus">-    helpersForController,</span>
<a href="#l41.42"></a><span id="l41.42" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l41.43"></a><span id="l41.43" class="difflineminus">-    createCalendar,</span>
<a href="#l41.44"></a><span id="l41.44" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l41.45"></a><span id="l41.45" class="difflineminus">-    deleteCalendars,</span>
<a href="#l41.46"></a><span id="l41.46" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l41.47"></a><span id="l41.47" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l41.48"></a><span id="l41.48" class="difflineminus">-</span>
<a href="#l41.49"></a><span id="l41.49" class="difflineminus">-  ({ setData } = ChromeUtils.import(&quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;));</span>
<a href="#l41.50"></a><span id="l41.50" class="difflineminus">-  CALENDARID = createCalendar(controller, CALENDARNAME);</span>
<a href="#l41.51"></a><span id="l41.51" class="difflineminus">-}</span>
<a href="#l41.52"></a><span id="l41.52"> </span>
<a href="#l41.53"></a><span id="l41.53"> // Mozmill doesn't support trees yet, therefore completed checkbox and line-through style are not</span>
<a href="#l41.54"></a><span id="l41.54"> // checked.</span>
<a href="#l41.55"></a><span id="l41.55" class="difflineminus">-function testTaskView() {</span>
<a href="#l41.56"></a><span id="l41.56" class="difflineplus">+add_task(function setupModule(module) {</span>
<a href="#l41.57"></a><span id="l41.57" class="difflineplus">+  let CALENDARID = createCalendar(controller, CALENDARNAME);</span>
<a href="#l41.58"></a><span id="l41.58" class="difflineplus">+</span>
<a href="#l41.59"></a><span id="l41.59">   // paths</span>
<a href="#l41.60"></a><span id="l41.60">   let treeChildren = `${TASK_VIEW}/[1]/id(&quot;calendar-task-tree&quot;)/{&quot;class&quot;:&quot;calendar-task-treechildren&quot;}`;</span>
<a href="#l41.61"></a><span id="l41.61">   let taskTree = TASK_VIEW + '[1]/id(&quot;calendar-task-tree&quot;)';</span>
<a href="#l41.62"></a><span id="l41.62">   let toolTip = '/id(&quot;messengerWindow&quot;)/id(&quot;calendar-popupset&quot;)/id(&quot;taskTreeTooltip&quot;)';</span>
<a href="#l41.63"></a><span id="l41.63">   let toolTipTable = toolTip + '/{&quot;class&quot;:&quot;tooltipBox&quot;}/{&quot;class&quot;:&quot;tooltipHeaderTable&quot;}/';</span>
<a href="#l41.64"></a><span id="l41.64"> </span>
<a href="#l41.65"></a><span id="l41.65">   // Open task view.</span>
<a href="#l41.66"></a><span id="l41.66">   controller.click(eid(&quot;task-tab-button&quot;));</span>
<a href="#l41.67"></a><span id="l41.67" class="difflineat">@@ -144,14 +140,16 @@ function testTaskView() {</span>
<a href="#l41.68"></a><span id="l41.68">   controller.assertJSProperty(toolTipStatus, &quot;textContent&quot;, &quot;Completed&quot;);</span>
<a href="#l41.69"></a><span id="l41.69"> </span>
<a href="#l41.70"></a><span id="l41.70">   // Delete task and verify.</span>
<a href="#l41.71"></a><span id="l41.71">   controller.click(eid(&quot;calendar-delete-task-button&quot;));</span>
<a href="#l41.72"></a><span id="l41.72">   controller.waitFor(() =&gt; taskTreeNode.mTaskArray.length == 0, &quot;Task did not delete&quot;);</span>
<a href="#l41.73"></a><span id="l41.73"> </span>
<a href="#l41.74"></a><span id="l41.74">   let tabmail = controller.window.document.getElementById(&quot;tabmail&quot;);</span>
<a href="#l41.75"></a><span id="l41.75">   tabmail.closeTab(tabmail.currentTabInfo);</span>
<a href="#l41.76"></a><span id="l41.76" class="difflineminus">-}</span>
<a href="#l41.77"></a><span id="l41.77"> </span>
<a href="#l41.78"></a><span id="l41.78" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l41.79"></a><span id="l41.79" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l41.80"></a><span id="l41.80" class="difflineplus">+});</span>
<a href="#l41.81"></a><span id="l41.81" class="difflineplus">+</span>
<a href="#l41.82"></a><span id="l41.82" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l41.83"></a><span id="l41.83">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l41.84"></a><span id="l41.84">   closeAllEventDialogs();</span>
<a href="#l41.85"></a><span id="l41.85" class="difflineminus">-}</span>
<a href="#l41.86"></a><span id="l41.86" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1">rename from calendar/test/mozmill/views/testWeekView.js</span>
<a href="#l42.2"></a><span id="l42.2">rename to calendar/test/browser/views/browser_weekView.js</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineminus">--- a/calendar/test/mozmill/views/testWeekView.js</span>
<a href="#l42.4"></a><span id="l42.4" class="difflineplus">+++ b/calendar/test/browser/views/browser_weekView.js</span>
<a href="#l42.5"></a><span id="l42.5" class="difflineat">@@ -1,52 +1,46 @@</span>
<a href="#l42.6"></a><span id="l42.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l42.7"></a><span id="l42.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l42.8"></a><span id="l42.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l42.9"></a><span id="l42.9"> </span>
<a href="#l42.10"></a><span id="l42.10" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l42.11"></a><span id="l42.11" class="difflineplus">+</span>
<a href="#l42.12"></a><span id="l42.12" class="difflineplus">+var {</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+  CALENDARNAME,</span>
<a href="#l42.14"></a><span id="l42.14" class="difflineplus">+  CANVAS_BOX,</span>
<a href="#l42.15"></a><span id="l42.15" class="difflineplus">+  EVENTPATH,</span>
<a href="#l42.16"></a><span id="l42.16" class="difflineplus">+  EVENT_BOX,</span>
<a href="#l42.17"></a><span id="l42.17" class="difflineplus">+  WEEK_VIEW,</span>
<a href="#l42.18"></a><span id="l42.18" class="difflineplus">+  closeAllEventDialogs,</span>
<a href="#l42.19"></a><span id="l42.19" class="difflineplus">+  createCalendar,</span>
<a href="#l42.20"></a><span id="l42.20" class="difflineplus">+  deleteCalendars,</span>
<a href="#l42.21"></a><span id="l42.21" class="difflineplus">+  getEventDetails,</span>
<a href="#l42.22"></a><span id="l42.22" class="difflineplus">+  goToDate,</span>
<a href="#l42.23"></a><span id="l42.23" class="difflineplus">+  helpersForController,</span>
<a href="#l42.24"></a><span id="l42.24" class="difflineplus">+  invokeEventDialog,</span>
<a href="#l42.25"></a><span id="l42.25" class="difflineplus">+  switchToView,</span>
<a href="#l42.26"></a><span id="l42.26" class="difflineplus">+} = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l42.27"></a><span id="l42.27" class="difflineplus">+var { helpersForEditUI, setData } = ChromeUtils.import(</span>
<a href="#l42.28"></a><span id="l42.28" class="difflineplus">+  &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l42.29"></a><span id="l42.29" class="difflineplus">+);</span>
<a href="#l42.30"></a><span id="l42.30" class="difflineplus">+</span>
<a href="#l42.31"></a><span id="l42.31"> var { cal } = ChromeUtils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l42.32"></a><span id="l42.32"> </span>
<a href="#l42.33"></a><span id="l42.33" class="difflineminus">-var CALENDARNAME, CANVAS_BOX, EVENT_BOX, WEEK_VIEW, EVENTPATH;</span>
<a href="#l42.34"></a><span id="l42.34" class="difflineminus">-var helpersForController, switchToView, invokeEventDialog, getEventDetails, createCalendar;</span>
<a href="#l42.35"></a><span id="l42.35" class="difflineminus">-var closeAllEventDialogs, deleteCalendars, goToDate, lookupEventBox;</span>
<a href="#l42.36"></a><span id="l42.36" class="difflineminus">-var helpersForEditUI, setData;</span>
<a href="#l42.37"></a><span id="l42.37" class="difflineplus">+var controller = mozmill.getMail3PaneController();</span>
<a href="#l42.38"></a><span id="l42.38" class="difflineplus">+var { lookup, lookupEventBox } = helpersForController(controller);</span>
<a href="#l42.39"></a><span id="l42.39"> </span>
<a href="#l42.40"></a><span id="l42.40"> var TITLE1 = &quot;Week View Event&quot;;</span>
<a href="#l42.41"></a><span id="l42.41"> var TITLE2 = &quot;Week View Event Changed&quot;;</span>
<a href="#l42.42"></a><span id="l42.42"> var DESC = &quot;Week View Event Description&quot;;</span>
<a href="#l42.43"></a><span id="l42.43"> </span>
<a href="#l42.44"></a><span id="l42.44" class="difflineminus">-function setupModule(module) {</span>
<a href="#l42.45"></a><span id="l42.45" class="difflineminus">-  controller = mozmill.getMail3PaneController();</span>
<a href="#l42.46"></a><span id="l42.46" class="difflineminus">-  ({</span>
<a href="#l42.47"></a><span id="l42.47" class="difflineminus">-    CALENDARNAME,</span>
<a href="#l42.48"></a><span id="l42.48" class="difflineminus">-    CANVAS_BOX,</span>
<a href="#l42.49"></a><span id="l42.49" class="difflineminus">-    EVENT_BOX,</span>
<a href="#l42.50"></a><span id="l42.50" class="difflineminus">-    WEEK_VIEW,</span>
<a href="#l42.51"></a><span id="l42.51" class="difflineminus">-    EVENTPATH,</span>
<a href="#l42.52"></a><span id="l42.52" class="difflineminus">-    helpersForController,</span>
<a href="#l42.53"></a><span id="l42.53" class="difflineminus">-    switchToView,</span>
<a href="#l42.54"></a><span id="l42.54" class="difflineminus">-    invokeEventDialog,</span>
<a href="#l42.55"></a><span id="l42.55" class="difflineminus">-    getEventDetails,</span>
<a href="#l42.56"></a><span id="l42.56" class="difflineminus">-    createCalendar,</span>
<a href="#l42.57"></a><span id="l42.57" class="difflineminus">-    closeAllEventDialogs,</span>
<a href="#l42.58"></a><span id="l42.58" class="difflineminus">-    deleteCalendars,</span>
<a href="#l42.59"></a><span id="l42.59" class="difflineminus">-    goToDate,</span>
<a href="#l42.60"></a><span id="l42.60" class="difflineminus">-    lookupEventBox,</span>
<a href="#l42.61"></a><span id="l42.61" class="difflineminus">-  } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;));</span>
<a href="#l42.62"></a><span id="l42.62" class="difflineminus">-  Object.assign(module, helpersForController(controller));</span>
<a href="#l42.63"></a><span id="l42.63" class="difflineminus">-</span>
<a href="#l42.64"></a><span id="l42.64" class="difflineminus">-  ({ helpersForEditUI, setData } = ChromeUtils.import(</span>
<a href="#l42.65"></a><span id="l42.65" class="difflineminus">-    &quot;resource://testing-common/mozmill/ItemEditingHelpers.jsm&quot;</span>
<a href="#l42.66"></a><span id="l42.66" class="difflineminus">-  ));</span>
<a href="#l42.67"></a><span id="l42.67" class="difflineminus">-  createCalendar(controller, CALENDARNAME);</span>
<a href="#l42.68"></a><span id="l42.68" class="difflineminus">-}</span>
<a href="#l42.69"></a><span id="l42.69" class="difflineminus">-</span>
<a href="#l42.70"></a><span id="l42.70" class="difflineminus">-function testWeekView() {</span>
<a href="#l42.71"></a><span id="l42.71" class="difflineplus">+add_task(function testWeekView() {</span>
<a href="#l42.72"></a><span id="l42.72">   let dateFormatter = cal.getDateFormatter();</span>
<a href="#l42.73"></a><span id="l42.73"> </span>
<a href="#l42.74"></a><span id="l42.74" class="difflineplus">+  createCalendar(controller, CALENDARNAME);</span>
<a href="#l42.75"></a><span id="l42.75">   switchToView(controller, &quot;week&quot;);</span>
<a href="#l42.76"></a><span id="l42.76">   goToDate(controller, 2009, 1, 1);</span>
<a href="#l42.77"></a><span id="l42.77"> </span>
<a href="#l42.78"></a><span id="l42.78">   // Verify date.</span>
<a href="#l42.79"></a><span id="l42.79">   let day = lookup(`</span>
<a href="#l42.80"></a><span id="l42.80">         ${WEEK_VIEW}/{&quot;class&quot;:&quot;mainbox&quot;}/{&quot;class&quot;:&quot;headerbox&quot;}/</span>
<a href="#l42.81"></a><span id="l42.81">         {&quot;class&quot;:&quot;headerdaybox&quot;}/{&quot;selected&quot;:&quot;true&quot;}</span>
<a href="#l42.82"></a><span id="l42.82">     `);</span>
<a href="#l42.83"></a><span id="l42.83" class="difflineat">@@ -102,14 +96,16 @@ function testWeekView() {</span>
<a href="#l42.84"></a><span id="l42.84">   );</span>
<a href="#l42.85"></a><span id="l42.85">   controller.waitForElement(eventName);</span>
<a href="#l42.86"></a><span id="l42.86">   controller.waitFor(() =&gt; eventName.getNode().textContent == TITLE2);</span>
<a href="#l42.87"></a><span id="l42.87"> </span>
<a href="#l42.88"></a><span id="l42.88">   // Delete event.</span>
<a href="#l42.89"></a><span id="l42.89">   controller.click(eventBox);</span>
<a href="#l42.90"></a><span id="l42.90">   controller.keypress(eventBox, &quot;VK_DELETE&quot;, {});</span>
<a href="#l42.91"></a><span id="l42.91">   controller.waitForElementNotPresent(eventBox);</span>
<a href="#l42.92"></a><span id="l42.92" class="difflineminus">-}</span>
<a href="#l42.93"></a><span id="l42.93"> </span>
<a href="#l42.94"></a><span id="l42.94" class="difflineminus">-function teardownModule(module) {</span>
<a href="#l42.95"></a><span id="l42.95" class="difflineplus">+  Assert.ok(true, &quot;Test ran to completion&quot;);</span>
<a href="#l42.96"></a><span id="l42.96" class="difflineplus">+});</span>
<a href="#l42.97"></a><span id="l42.97" class="difflineplus">+</span>
<a href="#l42.98"></a><span id="l42.98" class="difflineplus">+registerCleanupFunction(function teardownModule(module) {</span>
<a href="#l42.99"></a><span id="l42.99">   deleteCalendars(controller, CALENDARNAME);</span>
<a href="#l42.100"></a><span id="l42.100">   closeAllEventDialogs();</span>
<a href="#l42.101"></a><span id="l42.101" class="difflineminus">-}</span>
<a href="#l42.102"></a><span id="l42.102" class="difflineplus">+});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1">rename from calendar/test/mozmill/shared-modules/CalendarUtils.jsm</span>
<a href="#l43.2"></a><span id="l43.2">rename to calendar/test/modules/CalendarUtils.jsm</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineminus">--- a/calendar/test/mozmill/shared-modules/CalendarUtils.jsm</span>
<a href="#l43.4"></a><span id="l43.4" class="difflineplus">+++ b/calendar/test/modules/CalendarUtils.jsm</span>
<a href="#l43.5"></a><span id="l43.5" class="difflineat">@@ -41,19 +41,19 @@ this.EXPORTED_SYMBOLS = [</span>
<a href="#l43.6"></a><span id="l43.6">   &quot;createCalendar&quot;,</span>
<a href="#l43.7"></a><span id="l43.7">   &quot;handleNewCalendarWizard&quot;,</span>
<a href="#l43.8"></a><span id="l43.8">   &quot;findEventsInNode&quot;,</span>
<a href="#l43.9"></a><span id="l43.9">   &quot;openLightningPrefs&quot;,</span>
<a href="#l43.10"></a><span id="l43.10">   &quot;closeLightningPrefs&quot;,</span>
<a href="#l43.11"></a><span id="l43.11">   &quot;menulistSelect&quot;,</span>
<a href="#l43.12"></a><span id="l43.12"> ];</span>
<a href="#l43.13"></a><span id="l43.13"> </span>
<a href="#l43.14"></a><span id="l43.14" class="difflineminus">-var elementslib = ChromeUtils.import(&quot;chrome://mozmill/content/modules/elementslib.jsm&quot;);</span>
<a href="#l43.15"></a><span id="l43.15" class="difflineminus">-var mozmill = ChromeUtils.import(&quot;chrome://mozmill/content/modules/mozmill.jsm&quot;);</span>
<a href="#l43.16"></a><span id="l43.16" class="difflineminus">-var utils = ChromeUtils.import(&quot;chrome://mozmill/content/modules/utils.jsm&quot;);</span>
<a href="#l43.17"></a><span id="l43.17" class="difflineplus">+var elementslib = ChromeUtils.import(&quot;resource://testing-common/mozmill/elementslib.jsm&quot;);</span>
<a href="#l43.18"></a><span id="l43.18" class="difflineplus">+var mozmill = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l43.19"></a><span id="l43.19" class="difflineplus">+var utils = ChromeUtils.import(&quot;resource://testing-common/mozmill/utils.jsm&quot;);</span>
<a href="#l43.20"></a><span id="l43.20"> </span>
<a href="#l43.21"></a><span id="l43.21"> var { close_pref_tab, open_pref_tab } = ChromeUtils.import(</span>
<a href="#l43.22"></a><span id="l43.22">   &quot;resource://testing-common/mozmill/PrefTabHelpers.jsm&quot;</span>
<a href="#l43.23"></a><span id="l43.23"> );</span>
<a href="#l43.24"></a><span id="l43.24"> var { close_window, plan_for_modal_dialog, wait_for_modal_dialog } = ChromeUtils.import(</span>
<a href="#l43.25"></a><span id="l43.25">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l43.26"></a><span id="l43.26"> );</span>
<a href="#l43.27"></a><span id="l43.27"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1">rename from calendar/test/mozmill/shared-modules/ItemEditingHelpers.jsm</span>
<a href="#l44.2"></a><span id="l44.2">rename to calendar/test/modules/ItemEditingHelpers.jsm</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineminus">--- a/calendar/test/mozmill/shared-modules/ItemEditingHelpers.jsm</span>
<a href="#l44.4"></a><span id="l44.4" class="difflineplus">+++ b/calendar/test/modules/ItemEditingHelpers.jsm</span>
<a href="#l44.5"></a><span id="l44.5" class="difflineat">@@ -17,17 +17,17 @@ this.EXPORTED_SYMBOLS = [</span>
<a href="#l44.6"></a><span id="l44.6">   &quot;helpersForEditUI&quot;,</span>
<a href="#l44.7"></a><span id="l44.7">   &quot;setData&quot;,</span>
<a href="#l44.8"></a><span id="l44.8">   &quot;setReminderMenulist&quot;,</span>
<a href="#l44.9"></a><span id="l44.9">   &quot;setCategories&quot;,</span>
<a href="#l44.10"></a><span id="l44.10">   &quot;handleAddingAttachment&quot;,</span>
<a href="#l44.11"></a><span id="l44.11">   &quot;setTimezone&quot;,</span>
<a href="#l44.12"></a><span id="l44.12"> ];</span>
<a href="#l44.13"></a><span id="l44.13"> </span>
<a href="#l44.14"></a><span id="l44.14" class="difflineminus">-var elementslib = ChromeUtils.import(&quot;chrome://mozmill/content/modules/elementslib.jsm&quot;);</span>
<a href="#l44.15"></a><span id="l44.15" class="difflineplus">+var elementslib = ChromeUtils.import(&quot;resource://testing-common/mozmill/elementslib.jsm&quot;);</span>
<a href="#l44.16"></a><span id="l44.16"> </span>
<a href="#l44.17"></a><span id="l44.17"> var {</span>
<a href="#l44.18"></a><span id="l44.18">   helpersForController,</span>
<a href="#l44.19"></a><span id="l44.19">   menulistSelect,</span>
<a href="#l44.20"></a><span id="l44.20">   SHORT_SLEEP,</span>
<a href="#l44.21"></a><span id="l44.21">   TIMEOUT_MODAL_DIALOG,</span>
<a href="#l44.22"></a><span id="l44.22"> } = ChromeUtils.import(&quot;resource://testing-common/mozmill/CalendarUtils.jsm&quot;);</span>
<a href="#l44.23"></a><span id="l44.23"> var { mark_failure } = ChromeUtils.import(</span>
<a href="#l44.24"></a><span id="l44.24" class="difflineat">@@ -469,17 +469,18 @@ function setCategories(dialog, iframe, c</span>
<a href="#l44.25"></a><span id="l44.25">       }</span>
<a href="#l44.26"></a><span id="l44.26">       if (set &amp;&amp; !item.getAttribute(&quot;checked&quot;)) {</span>
<a href="#l44.27"></a><span id="l44.27">         item.setAttribute(&quot;checked&quot;, true);</span>
<a href="#l44.28"></a><span id="l44.28">       } else if (!set &amp;&amp; item.getAttribute(&quot;checked&quot;)) {</span>
<a href="#l44.29"></a><span id="l44.29">         item.removeAttribute(&quot;checked&quot;);</span>
<a href="#l44.30"></a><span id="l44.30">       }</span>
<a href="#l44.31"></a><span id="l44.31">     }</span>
<a href="#l44.32"></a><span id="l44.32">   }</span>
<a href="#l44.33"></a><span id="l44.33" class="difflineminus">-  dialog.click(categoryMenulist);</span>
<a href="#l44.34"></a><span id="l44.34" class="difflineplus">+  categoryList.getNode().hidePopup();</span>
<a href="#l44.35"></a><span id="l44.35" class="difflineplus">+  dialog.click(iframeid(&quot;item-title&quot;));</span>
<a href="#l44.36"></a><span id="l44.36"> }</span>
<a href="#l44.37"></a><span id="l44.37"> </span>
<a href="#l44.38"></a><span id="l44.38"> /**</span>
<a href="#l44.39"></a><span id="l44.39">  * Add an URL attachment.</span>
<a href="#l44.40"></a><span id="l44.40">  *</span>
<a href="#l44.41"></a><span id="l44.41">  * @param controller        Mozmill window controller</span>
<a href="#l44.42"></a><span id="l44.42">  * @param url               URL to be added</span>
<a href="#l44.43"></a><span id="l44.43">  */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/calendar/test/moz.build</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/calendar/test/moz.build</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -1,15 +1,24 @@</span>
<a href="#l45.4"></a><span id="l45.4"> # vim: set filetype=python:</span>
<a href="#l45.5"></a><span id="l45.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l45.6"></a><span id="l45.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l45.7"></a><span id="l45.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l45.8"></a><span id="l45.8"> </span>
<a href="#l45.9"></a><span id="l45.9" class="difflineminus">-DIRS += ['mozmill']</span>
<a href="#l45.10"></a><span id="l45.10" class="difflineminus">-</span>
<a href="#l45.11"></a><span id="l45.11"> BROWSER_CHROME_MANIFESTS += [</span>
<a href="#l45.12"></a><span id="l45.12">     'browser/browser.ini',</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+    'browser/eventDialog/browser.ini',</span>
<a href="#l45.14"></a><span id="l45.14" class="difflineplus">+    'browser/invitations/browser.ini',</span>
<a href="#l45.15"></a><span id="l45.15" class="difflineplus">+    'browser/preferences/browser.ini',</span>
<a href="#l45.16"></a><span id="l45.16" class="difflineplus">+    'browser/recurrence/browser.ini',</span>
<a href="#l45.17"></a><span id="l45.17" class="difflineplus">+    'browser/recurrenceRotated/browser.ini',</span>
<a href="#l45.18"></a><span id="l45.18" class="difflineplus">+    'browser/views/browser.ini',</span>
<a href="#l45.19"></a><span id="l45.19" class="difflineplus">+]</span>
<a href="#l45.20"></a><span id="l45.20" class="difflineplus">+</span>
<a href="#l45.21"></a><span id="l45.21" class="difflineplus">+TESTING_JS_MODULES.mozmill += [</span>
<a href="#l45.22"></a><span id="l45.22" class="difflineplus">+    'modules/CalendarUtils.jsm',</span>
<a href="#l45.23"></a><span id="l45.23" class="difflineplus">+    'modules/ItemEditingHelpers.jsm',</span>
<a href="#l45.24"></a><span id="l45.24"> ]</span>
<a href="#l45.25"></a><span id="l45.25"> </span>
<a href="#l45.26"></a><span id="l45.26"> XPCSHELL_TESTS_MANIFESTS += [</span>
<a href="#l45.27"></a><span id="l45.27">     'unit/xpcshell-icaljs.ini',</span>
<a href="#l45.28"></a><span id="l45.28">     'unit/xpcshell-libical.ini',</span>
<a href="#l45.29"></a><span id="l45.29"> ]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1">deleted file mode 100644</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineminus">--- a/calendar/test/mozmill/.eslintrc.js</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineplus">+++ /dev/null</span>
<a href="#l46.4"></a><span id="l46.4" class="difflineat">@@ -1,38 +0,0 @@</span>
<a href="#l46.5"></a><span id="l46.5" class="difflineminus">-&quot;use strict&quot;;</span>
<a href="#l46.6"></a><span id="l46.6" class="difflineminus">-</span>
<a href="#l46.7"></a><span id="l46.7" class="difflineminus">-module.exports = {</span>
<a href="#l46.8"></a><span id="l46.8" class="difflineminus">-  globals: {</span>
<a href="#l46.9"></a><span id="l46.9" class="difflineminus">-    __file__: true,</span>
<a href="#l46.10"></a><span id="l46.10" class="difflineminus">-    elementslib: true,</span>
<a href="#l46.11"></a><span id="l46.11" class="difflineminus">-    controller: true,</span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-    mozmill: true,</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineminus">-    utils: true,</span>
<a href="#l46.14"></a><span id="l46.14" class="difflineminus">-    require: true,</span>
<a href="#l46.15"></a><span id="l46.15" class="difflineminus">-    exports: true,</span>
<a href="#l46.16"></a><span id="l46.16" class="difflineminus">-    module: true,</span>
<a href="#l46.17"></a><span id="l46.17" class="difflineminus">-    registeredFunctions: true,</span>
<a href="#l46.18"></a><span id="l46.18" class="difflineminus">-    collector: true,</span>
<a href="#l46.19"></a><span id="l46.19" class="difflineminus">-    persisted: true,</span>
<a href="#l46.20"></a><span id="l46.20" class="difflineminus">-</span>
<a href="#l46.21"></a><span id="l46.21" class="difflineminus">-    lookup: true,</span>
<a href="#l46.22"></a><span id="l46.22" class="difflineminus">-    eid: true,</span>
<a href="#l46.23"></a><span id="l46.23" class="difflineminus">-    xpath: true,</span>
<a href="#l46.24"></a><span id="l46.24" class="difflineminus">-    sleep: true,</span>
<a href="#l46.25"></a><span id="l46.25" class="difflineminus">-    getEventBoxPath: true,</span>
<a href="#l46.26"></a><span id="l46.26" class="difflineminus">-    lookupEventBox: true,</span>
<a href="#l46.27"></a><span id="l46.27" class="difflineminus">-    iframeLookup: true,</span>
<a href="#l46.28"></a><span id="l46.28" class="difflineminus">-    getDateTimePicker: true,</span>
<a href="#l46.29"></a><span id="l46.29" class="difflineminus">-  },</span>
<a href="#l46.30"></a><span id="l46.30" class="difflineminus">-  rules: {</span>
<a href="#l46.31"></a><span id="l46.31" class="difflineminus">-    // Allow mozmill test methods to be used without warning</span>
<a href="#l46.32"></a><span id="l46.32" class="difflineminus">-    &quot;no-unused-vars&quot;: [</span>
<a href="#l46.33"></a><span id="l46.33" class="difflineminus">-      2,</span>
<a href="#l46.34"></a><span id="l46.34" class="difflineminus">-      {</span>
<a href="#l46.35"></a><span id="l46.35" class="difflineminus">-        vars: &quot;all&quot;,</span>
<a href="#l46.36"></a><span id="l46.36" class="difflineminus">-        args: &quot;none&quot;,</span>
<a href="#l46.37"></a><span id="l46.37" class="difflineminus">-        varsIgnorePattern:</span>
<a href="#l46.38"></a><span id="l46.38" class="difflineminus">-          &quot;(MODULE_NAME|MODULE_REQUIRES|RELATIVE_ROOT|setupModule|installInto|teardownModule|^test[A-Z_].*)&quot;,</span>
<a href="#l46.39"></a><span id="l46.39" class="difflineminus">-      },</span>
<a href="#l46.40"></a><span id="l46.40" class="difflineminus">-    ],</span>
<a href="#l46.41"></a><span id="l46.41" class="difflineminus">-  },</span>
<a href="#l46.42"></a><span id="l46.42" class="difflineminus">-};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1">deleted file mode 100644</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineminus">--- a/calendar/test/mozmill/Makefile.in</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineplus">+++ /dev/null</span>
<a href="#l47.4"></a><span id="l47.4" class="difflineat">@@ -1,48 +0,0 @@</span>
<a href="#l47.5"></a><span id="l47.5" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l47.6"></a><span id="l47.6" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l47.7"></a><span id="l47.7" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l47.8"></a><span id="l47.8" class="difflineminus">-</span>
<a href="#l47.9"></a><span id="l47.9" class="difflineminus">-MOZMILLDIR=$(topobjdir)/_tests/mozmill</span>
<a href="#l47.10"></a><span id="l47.10" class="difflineminus">-ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l47.11"></a><span id="l47.11" class="difflineminus">-VIRTUALENV_BIN = $(topobjdir)/_virtualenvs/init/Scripts</span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-else</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineminus">-VIRTUALENV_BIN = $(topobjdir)/_virtualenvs/init/bin</span>
<a href="#l47.14"></a><span id="l47.14" class="difflineminus">-endif</span>
<a href="#l47.15"></a><span id="l47.15" class="difflineminus">-MOZMILLPYTHON = $(abspath $(VIRTUALENV_BIN)/python$(BIN_SUFFIX))</span>
<a href="#l47.16"></a><span id="l47.16" class="difflineminus">-</span>
<a href="#l47.17"></a><span id="l47.17" class="difflineminus">-ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))</span>
<a href="#l47.18"></a><span id="l47.18" class="difflineminus">-# Mac options</span>
<a href="#l47.19"></a><span id="l47.19" class="difflineminus">-APP_NAME = $(MOZ_APP_DISPLAYNAME)</span>
<a href="#l47.20"></a><span id="l47.20" class="difflineminus">-ifdef MOZ_DEBUG</span>
<a href="#l47.21"></a><span id="l47.21" class="difflineminus">-APP_NAME := $(APP_NAME)Debug</span>
<a href="#l47.22"></a><span id="l47.22" class="difflineminus">-endif</span>
<a href="#l47.23"></a><span id="l47.23" class="difflineminus">-MOZMILLPROGRAM = $(ABS_DIST)/$(APP_NAME).app/</span>
<a href="#l47.24"></a><span id="l47.24" class="difflineminus">-else</span>
<a href="#l47.25"></a><span id="l47.25" class="difflineminus">-# Non-mac options</span>
<a href="#l47.26"></a><span id="l47.26" class="difflineminus">-MOZMILLPROGRAM = $(ABS_DIST)/bin/thunderbird$(BIN_SUFFIX)</span>
<a href="#l47.27"></a><span id="l47.27" class="difflineminus">-endif</span>
<a href="#l47.28"></a><span id="l47.28" class="difflineminus">-</span>
<a href="#l47.29"></a><span id="l47.29" class="difflineminus">-check-no-solo = $(foreach solo,SOLO_TEST SOLO_FILE,$(if $($(solo)),$(error $(subst SOLOVAR,$(solo),$(1)))))</span>
<a href="#l47.30"></a><span id="l47.30" class="difflineminus">-find-solo-test = $(if $(and $(SOLO_TEST),$(SOLO_FILE)),$(error Both SOLO_TEST and SOLO_FILE are specified. You may only specify one.),$(if $(SOLO_TEST),$(SOLO_TEST),$(if $(SOLO_FILE),$(SOLO_FILE),$(error SOLO_TEST or SOLO_FILE needs to be specified.))))</span>
<a href="#l47.31"></a><span id="l47.31" class="difflineminus">-</span>
<a href="#l47.32"></a><span id="l47.32" class="difflineminus">-include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l47.33"></a><span id="l47.33" class="difflineminus">-</span>
<a href="#l47.34"></a><span id="l47.34" class="difflineminus">-mozmill:</span>
<a href="#l47.35"></a><span id="l47.35" class="difflineminus">-	unset PYTHONHOME &amp;&amp; cd $(MOZMILLDIR) &amp;&amp; unset MACOSX_DEPLOYMENT_TARGET &amp;&amp; \</span>
<a href="#l47.36"></a><span id="l47.36" class="difflineminus">-	$(MOZMILLPYTHON) runtestlist.py --list=$(srcdir)/mozmilltests.list \</span>
<a href="#l47.37"></a><span id="l47.37" class="difflineminus">-	--binary=&quot;$(MOZMILLPROGRAM)&quot; \</span>
<a href="#l47.38"></a><span id="l47.38" class="difflineminus">-	--dir=$(abspath $(MOZMILLDIR))/stage \</span>
<a href="#l47.39"></a><span id="l47.39" class="difflineminus">-	--symbols-path=$(ABS_DIST)/crashreporter-symbols \</span>
<a href="#l47.40"></a><span id="l47.40" class="difflineminus">-	--testing-modules-dir=$(topobjdir)/_tests/modules \</span>
<a href="#l47.41"></a><span id="l47.41" class="difflineminus">-	$(MOZMILL_EXTRA)</span>
<a href="#l47.42"></a><span id="l47.42" class="difflineminus">-</span>
<a href="#l47.43"></a><span id="l47.43" class="difflineminus">-mozmill-one: solo-test = $(find-solo-test)</span>
<a href="#l47.44"></a><span id="l47.44" class="difflineminus">-mozmill-one:</span>
<a href="#l47.45"></a><span id="l47.45" class="difflineminus">-	unset PYTHONHOME &amp;&amp; cd $(MOZMILLDIR) &amp;&amp; unset MACOSX_DEPLOYMENT_TARGET &amp;&amp; \</span>
<a href="#l47.46"></a><span id="l47.46" class="difflineminus">-	$(MOZMILLPYTHON) runtest.py \</span>
<a href="#l47.47"></a><span id="l47.47" class="difflineminus">-	--test=$(abspath $(MOZMILLDIR))/stage/$(solo-test) \</span>
<a href="#l47.48"></a><span id="l47.48" class="difflineminus">-	--binary=&quot;$(MOZMILLPROGRAM)&quot; \</span>
<a href="#l47.49"></a><span id="l47.49" class="difflineminus">-	--symbols-path=$(ABS_DIST)/crashreporter-symbols \</span>
<a href="#l47.50"></a><span id="l47.50" class="difflineminus">-	--testing-modules-dir=$(topobjdir)/_tests/modules \</span>
<a href="#l47.51"></a><span id="l47.51" class="difflineminus">-	$(MOZMILL_EXTRA)</span>
<a href="#l47.52"></a><span id="l47.52" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1">deleted file mode 100644</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineminus">--- a/calendar/test/mozmill/moz.build</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineplus">+++ /dev/null</span>
<a href="#l48.4"></a><span id="l48.4" class="difflineat">@@ -1,22 +0,0 @@</span>
<a href="#l48.5"></a><span id="l48.5" class="difflineminus">-# vim: set filetype=python:</span>
<a href="#l48.6"></a><span id="l48.6" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l48.7"></a><span id="l48.7" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l48.8"></a><span id="l48.8" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l48.9"></a><span id="l48.9" class="difflineminus">-</span>
<a href="#l48.10"></a><span id="l48.10" class="difflineminus">-# Copies the files in this folder to a staging directory in the objdir.</span>
<a href="#l48.11"></a><span id="l48.11" class="difflineminus">-TEST_HARNESS_FILES.mozmill.stage += [</span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-    'cal-recurrence/*',</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineminus">-    'eventDialog/*',</span>
<a href="#l48.14"></a><span id="l48.14" class="difflineminus">-    'invitations/*',</span>
<a href="#l48.15"></a><span id="l48.15" class="difflineminus">-    'preferences/*',</span>
<a href="#l48.16"></a><span id="l48.16" class="difflineminus">-    'recurrenceRotated/*',</span>
<a href="#l48.17"></a><span id="l48.17" class="difflineminus">-    'testBasicFunctionality.js',</span>
<a href="#l48.18"></a><span id="l48.18" class="difflineminus">-    'testLocalICS.js',</span>
<a href="#l48.19"></a><span id="l48.19" class="difflineminus">-    'testTimezones.js',</span>
<a href="#l48.20"></a><span id="l48.20" class="difflineminus">-    'testTodayPane.js',</span>
<a href="#l48.21"></a><span id="l48.21" class="difflineminus">-    'views/*',</span>
<a href="#l48.22"></a><span id="l48.22" class="difflineminus">-]</span>
<a href="#l48.23"></a><span id="l48.23" class="difflineminus">-</span>
<a href="#l48.24"></a><span id="l48.24" class="difflineminus">-DIRS += [</span>
<a href="#l48.25"></a><span id="l48.25" class="difflineminus">-    'shared-modules',</span>
<a href="#l48.26"></a><span id="l48.26" class="difflineminus">-]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1">deleted file mode 100755</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineminus">--- a/calendar/test/mozmill/mozmilltests.list</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineplus">+++ /dev/null</span>
<a href="#l49.4"></a><span id="l49.4" class="difflineat">@@ -1,10 +0,0 @@</span>
<a href="#l49.5"></a><span id="l49.5" class="difflineminus">-cal-recurrence</span>
<a href="#l49.6"></a><span id="l49.6" class="difflineminus">-eventDialog</span>
<a href="#l49.7"></a><span id="l49.7" class="difflineminus">-invitations</span>
<a href="#l49.8"></a><span id="l49.8" class="difflineminus">-preferences</span>
<a href="#l49.9"></a><span id="l49.9" class="difflineminus">-recurrenceRotated</span>
<a href="#l49.10"></a><span id="l49.10" class="difflineminus">-testBasicFunctionality.js</span>
<a href="#l49.11"></a><span id="l49.11" class="difflineminus">-testLocalICS.js</span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-testTimezones.js</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineminus">-testTodayPane.js</span>
<a href="#l49.14"></a><span id="l49.14" class="difflineminus">-views</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1">deleted file mode 100644</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineminus">--- a/calendar/test/mozmill/shared-modules/moz.build</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineplus">+++ /dev/null</span>
<a href="#l50.4"></a><span id="l50.4" class="difflineat">@@ -1,9 +0,0 @@</span>
<a href="#l50.5"></a><span id="l50.5" class="difflineminus">-# vim: set filetype=python:</span>
<a href="#l50.6"></a><span id="l50.6" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l50.7"></a><span id="l50.7" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l50.8"></a><span id="l50.8" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l50.9"></a><span id="l50.9" class="difflineminus">-</span>
<a href="#l50.10"></a><span id="l50.10" class="difflineminus">-TESTING_JS_MODULES.mozmill += [</span>
<a href="#l50.11"></a><span id="l50.11" class="difflineminus">-    'CalendarUtils.jsm',</span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-    'ItemEditingHelpers.jsm',</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineminus">-]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/mail/test/mozmill/moz.build</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/mail/test/mozmill/moz.build</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -41,8 +41,26 @@ TEST_HARNESS_FILES.mozmill.resources += </span>
<a href="#l51.4"></a><span id="l51.4">     'test/resources/messageInjection.js',</span>
<a href="#l51.5"></a><span id="l51.5">     'test/resources/messageModifier.js',</span>
<a href="#l51.6"></a><span id="l51.6">     'test/resources/smimeUtils.jsm',</span>
<a href="#l51.7"></a><span id="l51.7"> ])</span>
<a href="#l51.8"></a><span id="l51.8"> </span>
<a href="#l51.9"></a><span id="l51.9"> DIRS += [</span>
<a href="#l51.10"></a><span id="l51.10">     'shared-modules',</span>
<a href="#l51.11"></a><span id="l51.11"> ]</span>
<a href="#l51.12"></a><span id="l51.12" class="difflineplus">+</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineplus">+TESTING_JS_MODULES.mozmill += [</span>
<a href="#l51.14"></a><span id="l51.14" class="difflineplus">+    '../resources/mozmill/mozmill/extension/content/modules/controller.jsm',</span>
<a href="#l51.15"></a><span id="l51.15" class="difflineplus">+    '../resources/mozmill/mozmill/extension/content/modules/elementslib.jsm',</span>
<a href="#l51.16"></a><span id="l51.16" class="difflineplus">+    '../resources/mozmill/mozmill/extension/content/modules/events.jsm',</span>
<a href="#l51.17"></a><span id="l51.17" class="difflineplus">+    '../resources/mozmill/mozmill/extension/content/modules/frame.jsm',</span>
<a href="#l51.18"></a><span id="l51.18" class="difflineplus">+    '../resources/mozmill/mozmill/extension/content/modules/init.jsm',</span>
<a href="#l51.19"></a><span id="l51.19" class="difflineplus">+    '../resources/mozmill/mozmill/extension/content/modules/jum.jsm',</span>
<a href="#l51.20"></a><span id="l51.20" class="difflineplus">+    '../resources/mozmill/mozmill/extension/content/modules/mozmill.jsm',</span>
<a href="#l51.21"></a><span id="l51.21" class="difflineplus">+    '../resources/mozmill/mozmill/extension/content/modules/utils.jsm',</span>
<a href="#l51.22"></a><span id="l51.22" class="difflineplus">+    '../resources/mozmill/mozmill/extension/content/stdlib/arrays.jsm',</span>
<a href="#l51.23"></a><span id="l51.23" class="difflineplus">+    '../resources/mozmill/mozmill/extension/content/stdlib/dom.jsm',</span>
<a href="#l51.24"></a><span id="l51.24" class="difflineplus">+    '../resources/mozmill/mozmill/extension/content/stdlib/EventUtils.jsm',</span>
<a href="#l51.25"></a><span id="l51.25" class="difflineplus">+    '../resources/mozmill/mozmill/extension/content/stdlib/httpd.jsm',</span>
<a href="#l51.26"></a><span id="l51.26" class="difflineplus">+    '../resources/mozmill/mozmill/extension/content/stdlib/os.jsm',</span>
<a href="#l51.27"></a><span id="l51.27" class="difflineplus">+    '../resources/mozmill/mozmill/extension/content/stdlib/securable-module.jsm',</span>
<a href="#l51.28"></a><span id="l51.28" class="difflineplus">+    '../resources/mozmill/mozmill/extension/content/stdlib/strings.jsm',</span>
<a href="#l51.29"></a><span id="l51.29" class="difflineplus">+]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/mail/test/mozmill/runtest.py</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/mail/test/mozmill/runtest.py</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -26,17 +26,16 @@ sys.path.append(SCRIPT_DIRECTORY)</span>
<a href="#l52.4"></a><span id="l52.4"> </span>
<a href="#l52.5"></a><span id="l52.5"> PROFILE_DIR = os.path.join(tempfile.gettempdir(), 'mozmillprofile')</span>
<a href="#l52.6"></a><span id="l52.6"> SYMBOLS_PATH = None</span>
<a href="#l52.7"></a><span id="l52.7"> PLUGINS_PATH = None</span>
<a href="#l52.8"></a><span id="l52.8"> # XXX This breaks any semblance of test runner modularity, and only works</span>
<a href="#l52.9"></a><span id="l52.9"> # because we know that we run MozMill only once per process. This needs to be</span>
<a href="#l52.10"></a><span id="l52.10"> # fixed if that ever changes.</span>
<a href="#l52.11"></a><span id="l52.11"> TEST_NAME = None</span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-TESTING_MODULES_DIR = None</span>
<a href="#l52.13"></a><span id="l52.13"> </span>
<a href="#l52.14"></a><span id="l52.14"> # The name of the (optional) module that tests can define as a wrapper (e.g. to</span>
<a href="#l52.15"></a><span id="l52.15"> # run before Thunderbird is started)</span>
<a href="#l52.16"></a><span id="l52.16"> WRAPPER_MODULE_NAME = &quot;wrapper&quot;</span>
<a href="#l52.17"></a><span id="l52.17"> </span>
<a href="#l52.18"></a><span id="l52.18"> # The wrapper module (if any) for the test. Just like TEST_NAME, this breaks any</span>
<a href="#l52.19"></a><span id="l52.19"> # semblance of modularity.</span>
<a href="#l52.20"></a><span id="l52.20"> wrapper = None</span>
<a href="#l52.21"></a><span id="l52.21" class="difflineat">@@ -330,25 +329,22 @@ class ThunderTestMozmill(mozmill.MozMill</span>
<a href="#l52.22"></a><span id="l52.22">                     subprocess.check_call([self.VNC_SERVER_PATH,</span>
<a href="#l52.23"></a><span id="l52.23">                                            '-kill', ':99'])</span>
<a href="#l52.24"></a><span id="l52.24">             except Exception, ex:</span>
<a href="#l52.25"></a><span id="l52.25">                 print '!!! Exception during killing VNC server:', ex</span>
<a href="#l52.26"></a><span id="l52.26"> </span>
<a href="#l52.27"></a><span id="l52.27"> </span>
<a href="#l52.28"></a><span id="l52.28"> def monkeypatched_15_run_tests(self, tests, sleeptime=0):</span>
<a href="#l52.29"></a><span id="l52.29">     frame = mozmill.jsbridge.JSObject(self.bridge,</span>
<a href="#l52.30"></a><span id="l52.30" class="difflineminus">-                &quot;ChromeUtils.import('chrome://mozmill/content/modules/frame.jsm')&quot;)</span>
<a href="#l52.31"></a><span id="l52.31" class="difflineplus">+                &quot;ChromeUtils.import('resource://testing-common/mozmill/frame.jsm')&quot;)</span>
<a href="#l52.32"></a><span id="l52.32">     sleep(sleeptime)</span>
<a href="#l52.33"></a><span id="l52.33"> </span>
<a href="#l52.34"></a><span id="l52.34">     # transfer persisted data</span>
<a href="#l52.35"></a><span id="l52.35">     frame.persisted = self.persisted</span>
<a href="#l52.36"></a><span id="l52.36"> </span>
<a href="#l52.37"></a><span id="l52.37" class="difflineminus">-    frame.registerModule(&quot;testing-common&quot;,</span>
<a href="#l52.38"></a><span id="l52.38" class="difflineminus">-        os.path.normpath(TESTING_MODULES_DIR))</span>
<a href="#l52.39"></a><span id="l52.39" class="difflineminus">-</span>
<a href="#l52.40"></a><span id="l52.40">     if len(tests) == 1 and not os.path.isdir(tests[0]):</span>
<a href="#l52.41"></a><span id="l52.41">         # tests[0] isn't necessarily an abspath'd path, so do that now</span>
<a href="#l52.42"></a><span id="l52.42">         test = os.path.abspath(tests[0])</span>
<a href="#l52.43"></a><span id="l52.43">         frame.runTestFile(test)</span>
<a href="#l52.44"></a><span id="l52.44">     else:</span>
<a href="#l52.45"></a><span id="l52.45">         # run the test files</span>
<a href="#l52.46"></a><span id="l52.46">         for test_dir in self.test_dirs:</span>
<a href="#l52.47"></a><span id="l52.47">             frame.runTestDirectory(test_dir)</span>
<a href="#l52.48"></a><span id="l52.48" class="difflineat">@@ -371,17 +367,17 @@ class ThunderTestCLI(mozmill.CLI):</span>
<a href="#l52.49"></a><span id="l52.49">                           help=&quot;The path to the symbol files from build_symbols&quot;)</span>
<a href="#l52.50"></a><span id="l52.50">         parser.add_option('--plugins-path', default=None, dest=&quot;plugins&quot;,</span>
<a href="#l52.51"></a><span id="l52.51">                           help=&quot;The path to the plugins directory for the created profile&quot;)</span>
<a href="#l52.52"></a><span id="l52.52">         parser.add_option('--testing-modules-dir', default=None,</span>
<a href="#l52.53"></a><span id="l52.53">                           dest=&quot;testingmodules&quot;,</span>
<a href="#l52.54"></a><span id="l52.54">                           help=&quot;The path to the testing modules directory&quot;)</span>
<a href="#l52.55"></a><span id="l52.55"> </span>
<a href="#l52.56"></a><span id="l52.56">     def __init__(self, *args, **kwargs):</span>
<a href="#l52.57"></a><span id="l52.57" class="difflineminus">-        global SYMBOLS_PATH, PLUGINS_PATH, TEST_NAME, TESTING_MODULES_DIR</span>
<a href="#l52.58"></a><span id="l52.58" class="difflineplus">+        global SYMBOLS_PATH, PLUGINS_PATH, TEST_NAME</span>
<a href="#l52.59"></a><span id="l52.59"> </span>
<a href="#l52.60"></a><span id="l52.60">         # note: we previously hardcoded a JS bridge timeout of 300 seconds,</span>
<a href="#l52.61"></a><span id="l52.61">         # but the default is now 90 seconds...</span>
<a href="#l52.62"></a><span id="l52.62">         mozmill.CLI.__init__(self, *args, **kwargs)</span>
<a href="#l52.63"></a><span id="l52.63"> </span>
<a href="#l52.64"></a><span id="l52.64">         # Mozrunner expects the filename on OS X to point to the executable, but</span>
<a href="#l52.65"></a><span id="l52.65">         # we only have the directory passed in. Remedy this.</span>
<a href="#l52.66"></a><span id="l52.66">         if (sys.platform == 'darwin' and</span>
<a href="#l52.67"></a><span id="l52.67" class="difflineat">@@ -391,17 +387,17 @@ class ThunderTestCLI(mozmill.CLI):</span>
<a href="#l52.68"></a><span id="l52.68"> </span>
<a href="#l52.69"></a><span id="l52.69">         # Add these manually after the fact. No way to override the defaults</span>
<a href="#l52.70"></a><span id="l52.70">         # from mozrunner that I can see.</span>
<a href="#l52.71"></a><span id="l52.71">         self.runner_class = ThunderTestRunner</span>
<a href="#l52.72"></a><span id="l52.72">         self.profile_class = ThunderTestProfile</span>
<a href="#l52.73"></a><span id="l52.73"> </span>
<a href="#l52.74"></a><span id="l52.74">         SYMBOLS_PATH = self.options.symbols</span>
<a href="#l52.75"></a><span id="l52.75">         PLUGINS_PATH = self.options.plugins</span>
<a href="#l52.76"></a><span id="l52.76" class="difflineminus">-        TESTING_MODULES_DIR = self.options.testingmodules</span>
<a href="#l52.77"></a><span id="l52.77" class="difflineplus">+        os.environ['TESTING_MODULES_DIR'] = self.options.testingmodules</span>
<a href="#l52.78"></a><span id="l52.78">         if isinstance(self.options.test, basestring):</span>
<a href="#l52.79"></a><span id="l52.79">             test_paths = [self.options.test]</span>
<a href="#l52.80"></a><span id="l52.80">         else:</span>
<a href="#l52.81"></a><span id="l52.81">             test_paths = self.options.test</span>
<a href="#l52.82"></a><span id="l52.82">         TEST_NAME = ', '.join([os.path.basename(t) for t in test_paths])</span>
<a href="#l52.83"></a><span id="l52.83"> </span>
<a href="#l52.84"></a><span id="l52.84">         test_dirs = self.test_dirs = []</span>
<a href="#l52.85"></a><span id="l52.85">         for test_file in test_paths:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/AccountManagerHelpers.jsm</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/AccountManagerHelpers.jsm</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -9,19 +9,19 @@ this.EXPORTED_SYMBOLS = [</span>
<a href="#l53.4"></a><span id="l53.4">   &quot;open_advanced_settings_from_account_wizard&quot;,</span>
<a href="#l53.5"></a><span id="l53.5">   &quot;open_mail_account_setup_wizard&quot;,</span>
<a href="#l53.6"></a><span id="l53.6">   &quot;click_account_tree_row&quot;,</span>
<a href="#l53.7"></a><span id="l53.7">   &quot;get_account_tree_row&quot;,</span>
<a href="#l53.8"></a><span id="l53.8">   &quot;remove_account&quot;,</span>
<a href="#l53.9"></a><span id="l53.9"> ];</span>
<a href="#l53.10"></a><span id="l53.10"> </span>
<a href="#l53.11"></a><span id="l53.11"> var elib = ChromeUtils.import(</span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-  &quot;chrome://mozmill/content/modules/elementslib.jsm&quot;</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineplus">+  &quot;resource://testing-common/mozmill/elementslib.jsm&quot;</span>
<a href="#l53.14"></a><span id="l53.14"> );</span>
<a href="#l53.15"></a><span id="l53.15" class="difflineminus">-var utils = ChromeUtils.import(&quot;chrome://mozmill/content/modules/utils.jsm&quot;);</span>
<a href="#l53.16"></a><span id="l53.16" class="difflineplus">+var utils = ChromeUtils.import(&quot;resource://testing-common/mozmill/utils.jsm&quot;);</span>
<a href="#l53.17"></a><span id="l53.17"> </span>
<a href="#l53.18"></a><span id="l53.18"> var fdh = ChromeUtils.import(</span>
<a href="#l53.19"></a><span id="l53.19">   &quot;resource://testing-common/mozmill/FolderDisplayHelpers.jsm&quot;</span>
<a href="#l53.20"></a><span id="l53.20"> );</span>
<a href="#l53.21"></a><span id="l53.21"> var wh = ChromeUtils.import(</span>
<a href="#l53.22"></a><span id="l53.22">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l53.23"></a><span id="l53.23"> );</span>
<a href="#l53.24"></a><span id="l53.24"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/CloudfileHelpers.jsm</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/CloudfileHelpers.jsm</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -13,17 +13,17 @@ this.EXPORTED_SYMBOLS = [</span>
<a href="#l54.4"></a><span id="l54.4"> </span>
<a href="#l54.5"></a><span id="l54.5"> var fdh = ChromeUtils.import(</span>
<a href="#l54.6"></a><span id="l54.6">   &quot;resource://testing-common/mozmill/FolderDisplayHelpers.jsm&quot;</span>
<a href="#l54.7"></a><span id="l54.7"> );</span>
<a href="#l54.8"></a><span id="l54.8"> </span>
<a href="#l54.9"></a><span id="l54.9"> var { cloudFileAccounts } = ChromeUtils.import(</span>
<a href="#l54.10"></a><span id="l54.10">   &quot;resource:///modules/cloudFileAccounts.jsm&quot;</span>
<a href="#l54.11"></a><span id="l54.11"> );</span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-var os = ChromeUtils.import(&quot;chrome://mozmill/content/stdlib/os.jsm&quot;);</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineplus">+var os = ChromeUtils.import(&quot;resource://testing-common/mozmill/os.jsm&quot;);</span>
<a href="#l54.14"></a><span id="l54.14"> </span>
<a href="#l54.15"></a><span id="l54.15"> var kDefaults = {</span>
<a href="#l54.16"></a><span id="l54.16">   type: &quot;default&quot;,</span>
<a href="#l54.17"></a><span id="l54.17">   iconURL: &quot;chrome://messenger/content/extension.svg&quot;,</span>
<a href="#l54.18"></a><span id="l54.18">   accountKey: null,</span>
<a href="#l54.19"></a><span id="l54.19">   settingsURL: &quot;&quot;,</span>
<a href="#l54.20"></a><span id="l54.20">   managementURL: &quot;&quot;,</span>
<a href="#l54.21"></a><span id="l54.21">   authErr: cloudFileAccounts.constants.authErr,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/ComposeHelpers.jsm</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/ComposeHelpers.jsm</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineat">@@ -25,19 +25,19 @@ this.EXPORTED_SYMBOLS = [</span>
<a href="#l55.4"></a><span id="l55.4">   &quot;delete_attachment&quot;,</span>
<a href="#l55.5"></a><span id="l55.5">   &quot;get_compose_body&quot;,</span>
<a href="#l55.6"></a><span id="l55.6">   &quot;type_in_composer&quot;,</span>
<a href="#l55.7"></a><span id="l55.7">   &quot;assert_previous_text&quot;,</span>
<a href="#l55.8"></a><span id="l55.8">   &quot;get_msg_source&quot;,</span>
<a href="#l55.9"></a><span id="l55.9"> ];</span>
<a href="#l55.10"></a><span id="l55.10"> </span>
<a href="#l55.11"></a><span id="l55.11"> var elib = ChromeUtils.import(</span>
<a href="#l55.12"></a><span id="l55.12" class="difflineminus">-  &quot;chrome://mozmill/content/modules/elementslib.jsm&quot;</span>
<a href="#l55.13"></a><span id="l55.13" class="difflineplus">+  &quot;resource://testing-common/mozmill/elementslib.jsm&quot;</span>
<a href="#l55.14"></a><span id="l55.14"> );</span>
<a href="#l55.15"></a><span id="l55.15" class="difflineminus">-var utils = ChromeUtils.import(&quot;chrome://mozmill/content/modules/utils.jsm&quot;);</span>
<a href="#l55.16"></a><span id="l55.16" class="difflineplus">+var utils = ChromeUtils.import(&quot;resource://testing-common/mozmill/utils.jsm&quot;);</span>
<a href="#l55.17"></a><span id="l55.17"> </span>
<a href="#l55.18"></a><span id="l55.18"> var folderDisplayHelper = ChromeUtils.import(</span>
<a href="#l55.19"></a><span id="l55.19">   &quot;resource://testing-common/mozmill/FolderDisplayHelpers.jsm&quot;</span>
<a href="#l55.20"></a><span id="l55.20"> );</span>
<a href="#l55.21"></a><span id="l55.21"> var windowHelper = ChromeUtils.import(</span>
<a href="#l55.22"></a><span id="l55.22">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l55.23"></a><span id="l55.23"> );</span>
<a href="#l55.24"></a><span id="l55.24"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l56.1"></a><span id="l56.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/ContentTabHelpers.jsm</span>
<a href="#l56.2"></a><span id="l56.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/ContentTabHelpers.jsm</span>
<a href="#l56.3"></a><span id="l56.3" class="difflineat">@@ -27,19 +27,19 @@ this.EXPORTED_SYMBOLS = [</span>
<a href="#l56.4"></a><span id="l56.4">   &quot;updateBlocklist&quot;,</span>
<a href="#l56.5"></a><span id="l56.5">   &quot;setAndUpdateBlocklist&quot;,</span>
<a href="#l56.6"></a><span id="l56.6">   &quot;resetBlocklist&quot;,</span>
<a href="#l56.7"></a><span id="l56.7">   &quot;gMockExtProtSvcReg&quot;,</span>
<a href="#l56.8"></a><span id="l56.8">   &quot;gMockExtProtSvc&quot;,</span>
<a href="#l56.9"></a><span id="l56.9"> ];</span>
<a href="#l56.10"></a><span id="l56.10"> </span>
<a href="#l56.11"></a><span id="l56.11"> var elib = ChromeUtils.import(</span>
<a href="#l56.12"></a><span id="l56.12" class="difflineminus">-  &quot;chrome://mozmill/content/modules/elementslib.jsm&quot;</span>
<a href="#l56.13"></a><span id="l56.13" class="difflineplus">+  &quot;resource://testing-common/mozmill/elementslib.jsm&quot;</span>
<a href="#l56.14"></a><span id="l56.14"> );</span>
<a href="#l56.15"></a><span id="l56.15" class="difflineminus">-var utils = ChromeUtils.import(&quot;chrome://mozmill/content/modules/utils.jsm&quot;);</span>
<a href="#l56.16"></a><span id="l56.16" class="difflineplus">+var utils = ChromeUtils.import(&quot;resource://testing-common/mozmill/utils.jsm&quot;);</span>
<a href="#l56.17"></a><span id="l56.17"> </span>
<a href="#l56.18"></a><span id="l56.18"> var folderDisplayHelper = ChromeUtils.import(</span>
<a href="#l56.19"></a><span id="l56.19">   &quot;resource://testing-common/mozmill/FolderDisplayHelpers.jsm&quot;</span>
<a href="#l56.20"></a><span id="l56.20"> );</span>
<a href="#l56.21"></a><span id="l56.21"> var { MockObjectReplacer } = ChromeUtils.import(</span>
<a href="#l56.22"></a><span id="l56.22">   &quot;resource://testing-common/mozmill/MockObjectHelpers.jsm&quot;</span>
<a href="#l56.23"></a><span id="l56.23"> );</span>
<a href="#l56.24"></a><span id="l56.24"> var wh = ChromeUtils.import(</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l57.1"></a><span id="l57.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/CustomizationHelpers.jsm</span>
<a href="#l57.2"></a><span id="l57.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/CustomizationHelpers.jsm</span>
<a href="#l57.3"></a><span id="l57.3" class="difflineat">@@ -2,17 +2,17 @@</span>
<a href="#l57.4"></a><span id="l57.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this file,</span>
<a href="#l57.5"></a><span id="l57.5">  * You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l57.6"></a><span id="l57.6"> </span>
<a href="#l57.7"></a><span id="l57.7"> &quot;use strict&quot;;</span>
<a href="#l57.8"></a><span id="l57.8"> </span>
<a href="#l57.9"></a><span id="l57.9"> this.EXPORTED_SYMBOLS = [&quot;CustomizeDialogHelper&quot;];</span>
<a href="#l57.10"></a><span id="l57.10"> </span>
<a href="#l57.11"></a><span id="l57.11"> var elib = ChromeUtils.import(</span>
<a href="#l57.12"></a><span id="l57.12" class="difflineminus">-  &quot;chrome://mozmill/content/modules/elementslib.jsm&quot;</span>
<a href="#l57.13"></a><span id="l57.13" class="difflineplus">+  &quot;resource://testing-common/mozmill/elementslib.jsm&quot;</span>
<a href="#l57.14"></a><span id="l57.14"> );</span>
<a href="#l57.15"></a><span id="l57.15"> </span>
<a href="#l57.16"></a><span id="l57.16"> var fdh = ChromeUtils.import(</span>
<a href="#l57.17"></a><span id="l57.17">   &quot;resource://testing-common/mozmill/FolderDisplayHelpers.jsm&quot;</span>
<a href="#l57.18"></a><span id="l57.18"> );</span>
<a href="#l57.19"></a><span id="l57.19"> var wh = ChromeUtils.import(</span>
<a href="#l57.20"></a><span id="l57.20">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l57.21"></a><span id="l57.21"> );</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l58.1"></a><span id="l58.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/FolderDisplayHelpers.jsm</span>
<a href="#l58.2"></a><span id="l58.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/FolderDisplayHelpers.jsm</span>
<a href="#l58.3"></a><span id="l58.3" class="difflineat">@@ -152,24 +152,24 @@ this.EXPORTED_SYMBOLS = [</span>
<a href="#l58.4"></a><span id="l58.4">   &quot;wait_for_all_messages_to_load&quot;,</span>
<a href="#l58.5"></a><span id="l58.5">   &quot;wait_for_blank_content_pane&quot;,</span>
<a href="#l58.6"></a><span id="l58.6">   &quot;wait_for_folder_events&quot;,</span>
<a href="#l58.7"></a><span id="l58.7">   &quot;wait_for_message_display_completion&quot;,</span>
<a href="#l58.8"></a><span id="l58.8">   &quot;wait_for_popup_to_open&quot;,</span>
<a href="#l58.9"></a><span id="l58.9"> ];</span>
<a href="#l58.10"></a><span id="l58.10"> </span>
<a href="#l58.11"></a><span id="l58.11"> var EventUtils = ChromeUtils.import(</span>
<a href="#l58.12"></a><span id="l58.12" class="difflineminus">-  &quot;chrome://mozmill/content/stdlib/EventUtils.jsm&quot;</span>
<a href="#l58.13"></a><span id="l58.13" class="difflineplus">+  &quot;resource://testing-common/mozmill/EventUtils.jsm&quot;</span>
<a href="#l58.14"></a><span id="l58.14"> );</span>
<a href="#l58.15"></a><span id="l58.15"> var controller = ChromeUtils.import(</span>
<a href="#l58.16"></a><span id="l58.16" class="difflineminus">-  &quot;chrome://mozmill/content/modules/controller.jsm&quot;</span>
<a href="#l58.17"></a><span id="l58.17" class="difflineplus">+  &quot;resource://testing-common/mozmill/controller.jsm&quot;</span>
<a href="#l58.18"></a><span id="l58.18"> );</span>
<a href="#l58.19"></a><span id="l58.19" class="difflineminus">-var frame = ChromeUtils.import(&quot;chrome://mozmill/content/modules/frame.jsm&quot;);</span>
<a href="#l58.20"></a><span id="l58.20" class="difflineminus">-var os = ChromeUtils.import(&quot;chrome://mozmill/content/stdlib/os.jsm&quot;);</span>
<a href="#l58.21"></a><span id="l58.21" class="difflineminus">-var utils = ChromeUtils.import(&quot;chrome://mozmill/content/modules/utils.jsm&quot;);</span>
<a href="#l58.22"></a><span id="l58.22" class="difflineplus">+var frame = ChromeUtils.import(&quot;resource://testing-common/mozmill/frame.jsm&quot;);</span>
<a href="#l58.23"></a><span id="l58.23" class="difflineplus">+var os = ChromeUtils.import(&quot;resource://testing-common/mozmill/os.jsm&quot;);</span>
<a href="#l58.24"></a><span id="l58.24" class="difflineplus">+var utils = ChromeUtils.import(&quot;resource://testing-common/mozmill/utils.jsm&quot;);</span>
<a href="#l58.25"></a><span id="l58.25"> </span>
<a href="#l58.26"></a><span id="l58.26"> // the windowHelper module</span>
<a href="#l58.27"></a><span id="l58.27"> var windowHelper = ChromeUtils.import(</span>
<a href="#l58.28"></a><span id="l58.28">   &quot;resource://testing-common/mozmill/WindowHelpers.jsm&quot;</span>
<a href="#l58.29"></a><span id="l58.29"> );</span>
<a href="#l58.30"></a><span id="l58.30"> </span>
<a href="#l58.31"></a><span id="l58.31"> var { Log4Moz } = ChromeUtils.import(&quot;resource:///modules/gloda/log4moz.js&quot;);</span>
<a href="#l58.32"></a><span id="l58.32"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l59.1"></a><span id="l59.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/JunkHelpers.jsm</span>
<a href="#l59.2"></a><span id="l59.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/JunkHelpers.jsm</span>
<a href="#l59.3"></a><span id="l59.3" class="difflineat">@@ -5,19 +5,19 @@</span>
<a href="#l59.4"></a><span id="l59.4"> &quot;use strict&quot;;</span>
<a href="#l59.5"></a><span id="l59.5"> </span>
<a href="#l59.6"></a><span id="l59.6"> this.EXPORTED_SYMBOLS = [</span>
<a href="#l59.7"></a><span id="l59.7">   &quot;mark_selected_messages_as_junk&quot;,</span>
<a href="#l59.8"></a><span id="l59.8">   &quot;delete_mail_marked_as_junk&quot;,</span>
<a href="#l59.9"></a><span id="l59.9"> ];</span>
<a href="#l59.10"></a><span id="l59.10"> </span>
<a href="#l59.11"></a><span id="l59.11"> var elib = ChromeUtils.import(</span>
<a href="#l59.12"></a><span id="l59.12" class="difflineminus">-  &quot;chrome://mozmill/content/modules/elementslib.jsm&quot;</span>
<a href="#l59.13"></a><span id="l59.13" class="difflineplus">+  &quot;resource://testing-common/mozmill/elementslib.jsm&quot;</span>
<a href="#l59.14"></a><span id="l59.14"> );</span>
<a href="#l59.15"></a><span id="l59.15" class="difflineminus">-var utils = ChromeUtils.import(&quot;chrome://mozmill/content/modules/utils.jsm&quot;);</span>
<a href="#l59.16"></a><span id="l59.16" class="difflineplus">+var utils = ChromeUtils.import(&quot;resource://testing-common/mozmill/utils.jsm&quot;);</span>
<a href="#l59.17"></a><span id="l59.17"> </span>
<a href="#l59.18"></a><span id="l59.18"> var folderDisplayHelper = ChromeUtils.import(</span>
<a href="#l59.19"></a><span id="l59.19">   &quot;resource://testing-common/mozmill/FolderDisplayHelpers.jsm&quot;</span>
<a href="#l59.20"></a><span id="l59.20"> );</span>
<a href="#l59.21"></a><span id="l59.21"> var mc = folderDisplayHelper.mc;</span>
<a href="#l59.22"></a><span id="l59.22"> var mark_failure = folderDisplayHelper.mark_failure;</span>
<a href="#l59.23"></a><span id="l59.23"> </span>
<a href="#l59.24"></a><span id="l59.24"> /**</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l60.1"></a><span id="l60.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/MessageHelpers.jsm</span>
<a href="#l60.2"></a><span id="l60.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/MessageHelpers.jsm</span>
<a href="#l60.3"></a><span id="l60.3" class="difflineat">@@ -5,18 +5,18 @@</span>
<a href="#l60.4"></a><span id="l60.4"> /*</span>
<a href="#l60.5"></a><span id="l60.5">  * Helpers to deal with message (nsIMsgDBHdr) parsing.</span>
<a href="#l60.6"></a><span id="l60.6">  */</span>
<a href="#l60.7"></a><span id="l60.7"> </span>
<a href="#l60.8"></a><span id="l60.8"> &quot;use strict&quot;;</span>
<a href="#l60.9"></a><span id="l60.9"> </span>
<a href="#l60.10"></a><span id="l60.10"> this.EXPORTED_SYMBOLS = [&quot;to_mime_message&quot;];</span>
<a href="#l60.11"></a><span id="l60.11"> </span>
<a href="#l60.12"></a><span id="l60.12" class="difflineminus">-var frame = ChromeUtils.import(&quot;chrome://mozmill/content/modules/frame.jsm&quot;);</span>
<a href="#l60.13"></a><span id="l60.13" class="difflineminus">-var utils = ChromeUtils.import(&quot;chrome://mozmill/content/modules/utils.jsm&quot;);</span>
<a href="#l60.14"></a><span id="l60.14" class="difflineplus">+var frame = ChromeUtils.import(&quot;resource://testing-common/mozmill/frame.jsm&quot;);</span>
<a href="#l60.15"></a><span id="l60.15" class="difflineplus">+var utils = ChromeUtils.import(&quot;resource://testing-common/mozmill/utils.jsm&quot;);</span>
<a href="#l60.16"></a><span id="l60.16"> </span>
<a href="#l60.17"></a><span id="l60.17"> var { MsgHdrToMimeMessage } = ChromeUtils.import(</span>
<a href="#l60.18"></a><span id="l60.18">   &quot;resource:///modules/gloda/mimemsg.js&quot;</span>
<a href="#l60.19"></a><span id="l60.19"> );</span>
<a href="#l60.20"></a><span id="l60.20"> </span>
<a href="#l60.21"></a><span id="l60.21"> /**</span>
<a href="#l60.22"></a><span id="l60.22">  * Given a message header, converts it to a MimeMessage. If aCallback throws,</span>
<a href="#l60.23"></a><span id="l60.23">  * the test will be marked failed. See the documentation for MsgHdrToMimeMessage</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l61.1"></a><span id="l61.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/MouseEventHelpers.jsm</span>
<a href="#l61.2"></a><span id="l61.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/MouseEventHelpers.jsm</span>
<a href="#l61.3"></a><span id="l61.3" class="difflineat">@@ -8,17 +8,17 @@ this.EXPORTED_SYMBOLS = [</span>
<a href="#l61.4"></a><span id="l61.4">   &quot;drag_n_drop_element&quot;,</span>
<a href="#l61.5"></a><span id="l61.5">   &quot;synthesize_drag_start&quot;,</span>
<a href="#l61.6"></a><span id="l61.6">   &quot;synthesize_drag_over&quot;,</span>
<a href="#l61.7"></a><span id="l61.7">   &quot;synthesize_drag_end&quot;,</span>
<a href="#l61.8"></a><span id="l61.8">   &quot;synthesize_drop&quot;,</span>
<a href="#l61.9"></a><span id="l61.9"> ];</span>
<a href="#l61.10"></a><span id="l61.10"> </span>
<a href="#l61.11"></a><span id="l61.11"> var EventUtils = ChromeUtils.import(</span>
<a href="#l61.12"></a><span id="l61.12" class="difflineminus">-  &quot;chrome://mozmill/content/stdlib/EventUtils.jsm&quot;</span>
<a href="#l61.13"></a><span id="l61.13" class="difflineplus">+  &quot;resource://testing-common/mozmill/EventUtils.jsm&quot;</span>
<a href="#l61.14"></a><span id="l61.14"> );</span>
<a href="#l61.15"></a><span id="l61.15"> </span>
<a href="#l61.16"></a><span id="l61.16"> var fdh = ChromeUtils.import(</span>
<a href="#l61.17"></a><span id="l61.17">   &quot;resource://testing-common/mozmill/FolderDisplayHelpers.jsm&quot;</span>
<a href="#l61.18"></a><span id="l61.18"> );</span>
<a href="#l61.19"></a><span id="l61.19"> </span>
<a href="#l61.20"></a><span id="l61.20"> /**</span>
<a href="#l61.21"></a><span id="l61.21">  * Execute a drag and drop session.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l62.1"></a><span id="l62.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/NewMailAccountHelpers.jsm</span>
<a href="#l62.2"></a><span id="l62.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/NewMailAccountHelpers.jsm</span>
<a href="#l62.3"></a><span id="l62.3" class="difflineat">@@ -14,17 +14,17 @@ this.EXPORTED_SYMBOLS = [</span>
<a href="#l62.4"></a><span id="l62.4">   &quot;wait_for_search_results&quot;,</span>
<a href="#l62.5"></a><span id="l62.5">   &quot;gConsoleListener&quot;,</span>
<a href="#l62.6"></a><span id="l62.6">   &quot;wait_to_be_offline&quot;,</span>
<a href="#l62.7"></a><span id="l62.7">   &quot;remove_email_account&quot;,</span>
<a href="#l62.8"></a><span id="l62.8">   &quot;type_in_search_name&quot;,</span>
<a href="#l62.9"></a><span id="l62.9"> ];</span>
<a href="#l62.10"></a><span id="l62.10"> </span>
<a href="#l62.11"></a><span id="l62.11"> var elib = ChromeUtils.import(</span>
<a href="#l62.12"></a><span id="l62.12" class="difflineminus">-  &quot;chrome://mozmill/content/modules/elementslib.jsm&quot;</span>
<a href="#l62.13"></a><span id="l62.13" class="difflineplus">+  &quot;resource://testing-common/mozmill/elementslib.jsm&quot;</span>
<a href="#l62.14"></a><span id="l62.14"> );</span>
<a href="#l62.15"></a><span id="l62.15"> </span>
<a href="#l62.16"></a><span id="l62.16"> var dh = ChromeUtils.import(&quot;resource://testing-common/mozmill/DOMHelpers.jsm&quot;);</span>
<a href="#l62.17"></a><span id="l62.17"> var fdh = ChromeUtils.import(</span>
<a href="#l62.18"></a><span id="l62.18">   &quot;resource://testing-common/mozmill/FolderDisplayHelpers.jsm&quot;</span>
<a href="#l62.19"></a><span id="l62.19"> );</span>
<a href="#l62.20"></a><span id="l62.20"> var { input_value } = ChromeUtils.import(</span>
<a href="#l62.21"></a><span id="l62.21">   &quot;resource://testing-common/mozmill/KeyboardHelpers.jsm&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l63.1"></a><span id="l63.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/PrefTabHelpers.jsm</span>
<a href="#l63.2"></a><span id="l63.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/PrefTabHelpers.jsm</span>
<a href="#l63.3"></a><span id="l63.3" class="difflineat">@@ -6,17 +6,17 @@</span>
<a href="#l63.4"></a><span id="l63.4"> /*</span>
<a href="#l63.5"></a><span id="l63.5">  * Helpers to deal with the preferences tab.</span>
<a href="#l63.6"></a><span id="l63.6">  */</span>
<a href="#l63.7"></a><span id="l63.7"> </span>
<a href="#l63.8"></a><span id="l63.8"> &quot;use strict&quot;;</span>
<a href="#l63.9"></a><span id="l63.9"> </span>
<a href="#l63.10"></a><span id="l63.10"> this.EXPORTED_SYMBOLS = [&quot;close_pref_tab&quot;, &quot;open_pref_tab&quot;];</span>
<a href="#l63.11"></a><span id="l63.11"> </span>
<a href="#l63.12"></a><span id="l63.12" class="difflineminus">-var utils = ChromeUtils.import(&quot;chrome://mozmill/content/modules/utils.jsm&quot;);</span>
<a href="#l63.13"></a><span id="l63.13" class="difflineplus">+var utils = ChromeUtils.import(&quot;resource://testing-common/mozmill/utils.jsm&quot;);</span>
<a href="#l63.14"></a><span id="l63.14"> </span>
<a href="#l63.15"></a><span id="l63.15"> var fdh = ChromeUtils.import(</span>
<a href="#l63.16"></a><span id="l63.16">   &quot;resource://testing-common/mozmill/FolderDisplayHelpers.jsm&quot;</span>
<a href="#l63.17"></a><span id="l63.17"> );</span>
<a href="#l63.18"></a><span id="l63.18"> var cth = ChromeUtils.import(</span>
<a href="#l63.19"></a><span id="l63.19">   &quot;resource://testing-common/mozmill/ContentTabHelpers.jsm&quot;</span>
<a href="#l63.20"></a><span id="l63.20"> );</span>
<a href="#l63.21"></a><span id="l63.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l64.1"></a><span id="l64.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/WindowHelpers.jsm</span>
<a href="#l64.2"></a><span id="l64.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/WindowHelpers.jsm</span>
<a href="#l64.3"></a><span id="l64.3" class="difflineat">@@ -30,23 +30,23 @@ this.EXPORTED_SYMBOLS = [</span>
<a href="#l64.4"></a><span id="l64.4"> </span>
<a href="#l64.5"></a><span id="l64.5"> var { fixIterator } = ChromeUtils.import(</span>
<a href="#l64.6"></a><span id="l64.6">   &quot;resource:///modules/iteratorUtils.jsm&quot;</span>
<a href="#l64.7"></a><span id="l64.7"> );</span>
<a href="#l64.8"></a><span id="l64.8"> var { NetUtil } = ChromeUtils.import(&quot;resource://gre/modules/NetUtil.jsm&quot;);</span>
<a href="#l64.9"></a><span id="l64.9"> var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l64.10"></a><span id="l64.10"> </span>
<a href="#l64.11"></a><span id="l64.11"> var controller = ChromeUtils.import(</span>
<a href="#l64.12"></a><span id="l64.12" class="difflineminus">-  &quot;chrome://mozmill/content/modules/controller.jsm&quot;</span>
<a href="#l64.13"></a><span id="l64.13" class="difflineplus">+  &quot;resource://testing-common/mozmill/controller.jsm&quot;</span>
<a href="#l64.14"></a><span id="l64.14"> );</span>
<a href="#l64.15"></a><span id="l64.15"> var elib = ChromeUtils.import(</span>
<a href="#l64.16"></a><span id="l64.16" class="difflineminus">-  &quot;chrome://mozmill/content/modules/elementslib.jsm&quot;</span>
<a href="#l64.17"></a><span id="l64.17" class="difflineplus">+  &quot;resource://testing-common/mozmill/elementslib.jsm&quot;</span>
<a href="#l64.18"></a><span id="l64.18"> );</span>
<a href="#l64.19"></a><span id="l64.19" class="difflineminus">-var frame = ChromeUtils.import(&quot;chrome://mozmill/content/modules/frame.jsm&quot;);</span>
<a href="#l64.20"></a><span id="l64.20" class="difflineminus">-var utils = ChromeUtils.import(&quot;chrome://mozmill/content/modules/utils.jsm&quot;);</span>
<a href="#l64.21"></a><span id="l64.21" class="difflineplus">+var frame = ChromeUtils.import(&quot;resource://testing-common/mozmill/frame.jsm&quot;);</span>
<a href="#l64.22"></a><span id="l64.22" class="difflineplus">+var utils = ChromeUtils.import(&quot;resource://testing-common/mozmill/utils.jsm&quot;);</span>
<a href="#l64.23"></a><span id="l64.23"> </span>
<a href="#l64.24"></a><span id="l64.24"> /**</span>
<a href="#l64.25"></a><span id="l64.25">  * Timeout to use when waiting for the first window ever to load.  This is</span>
<a href="#l64.26"></a><span id="l64.26">  *  long because we are basically waiting for the entire app startup process.</span>
<a href="#l64.27"></a><span id="l64.27">  */</span>
<a href="#l64.28"></a><span id="l64.28"> var FIRST_WINDOW_EVER_TIMEOUT_MS = 30000;</span>
<a href="#l64.29"></a><span id="l64.29"> /**</span>
<a href="#l64.30"></a><span id="l64.30">  * Interval to check if the window has shown up for the first window ever to</span>
<a href="#l64.31"></a><span id="l64.31" class="difflineat">@@ -163,20 +163,17 @@ function getWindowTypeForXulWindow(aXULW</span>
<a href="#l64.32"></a><span id="l64.32"> </span>
<a href="#l64.33"></a><span id="l64.33"> /**</span>
<a href="#l64.34"></a><span id="l64.34">  * Return the unique id we annotated onto this XUL window during</span>
<a href="#l64.35"></a><span id="l64.35">  *  augment_controller.</span>
<a href="#l64.36"></a><span id="l64.36">  */</span>
<a href="#l64.37"></a><span id="l64.37"> function getUniqueIdForXulWindow(aXULWindow) {</span>
<a href="#l64.38"></a><span id="l64.38">   // html case</span>
<a href="#l64.39"></a><span id="l64.39">   if (aXULWindow.document &amp;&amp; aXULWindow.document.documentElement) {</span>
<a href="#l64.40"></a><span id="l64.40" class="difflineminus">-    if (!(UNIQUE_WINDOW_ID_ATTR in aXULWindow.document.defaultView)) {</span>
<a href="#l64.41"></a><span id="l64.41" class="difflineminus">-      return &quot;no attr html&quot;;</span>
<a href="#l64.42"></a><span id="l64.42" class="difflineminus">-    }</span>
<a href="#l64.43"></a><span id="l64.43" class="difflineminus">-    return aXULWindow.document.defaultView[UNIQUE_WINDOW_ID_ATTR];</span>
<a href="#l64.44"></a><span id="l64.44" class="difflineplus">+    return &quot;no attr html&quot;;</span>
<a href="#l64.45"></a><span id="l64.45">   }</span>
<a href="#l64.46"></a><span id="l64.46"> </span>
<a href="#l64.47"></a><span id="l64.47">   // XUL case</span>
<a href="#l64.48"></a><span id="l64.48">   let docshell = aXULWindow.docShell;</span>
<a href="#l64.49"></a><span id="l64.49">   // we need the docshell to exist...</span>
<a href="#l64.50"></a><span id="l64.50">   if (!docshell) {</span>
<a href="#l64.51"></a><span id="l64.51">     return &quot;no docshell&quot;;</span>
<a href="#l64.52"></a><span id="l64.52">   }</span>
<a href="#l64.53"></a><span id="l64.53" class="difflineat">@@ -190,20 +187,16 @@ function getUniqueIdForXulWindow(aXULWin</span>
<a href="#l64.54"></a><span id="l64.54">   // now we're cooking! let's get the document...</span>
<a href="#l64.55"></a><span id="l64.55">   let outerDoc = docshell.contentViewer.DOMDocument;</span>
<a href="#l64.56"></a><span id="l64.56">   // and make sure it's not blank.  that's also an intermediate state.</span>
<a href="#l64.57"></a><span id="l64.57">   if (outerDoc.location.href == &quot;about:blank&quot;) {</span>
<a href="#l64.58"></a><span id="l64.58">     return &quot;about:blank&quot;;</span>
<a href="#l64.59"></a><span id="l64.59">   }</span>
<a href="#l64.60"></a><span id="l64.60"> </span>
<a href="#l64.61"></a><span id="l64.61">   // finally, we can now have a windowtype!</span>
<a href="#l64.62"></a><span id="l64.62" class="difflineminus">-  let win = outerDoc.defaultView;</span>
<a href="#l64.63"></a><span id="l64.63" class="difflineminus">-  if (UNIQUE_WINDOW_ID_ATTR in win) {</span>
<a href="#l64.64"></a><span id="l64.64" class="difflineminus">-    return win[UNIQUE_WINDOW_ID_ATTR];</span>
<a href="#l64.65"></a><span id="l64.65" class="difflineminus">-  }</span>
<a href="#l64.66"></a><span id="l64.66">   return &quot;no attr xul&quot;;</span>
<a href="#l64.67"></a><span id="l64.67"> }</span>
<a href="#l64.68"></a><span id="l64.68"> </span>
<a href="#l64.69"></a><span id="l64.69"> var WindowWatcher = {</span>
<a href="#l64.70"></a><span id="l64.70">   _inited: false,</span>
<a href="#l64.71"></a><span id="l64.71">   _firstWindowOpened: false,</span>
<a href="#l64.72"></a><span id="l64.72">   ensureInited: function WindowWatcher_ensureInited() {</span>
<a href="#l64.73"></a><span id="l64.73">     if (this._inited) {</span>
<a href="#l64.74"></a><span id="l64.74" class="difflineat">@@ -1407,109 +1400,16 @@ var PerWindowTypeAugmentations = {</span>
<a href="#l64.75"></a><span id="l64.75">     onAugment(aController) {</span>
<a href="#l64.76"></a><span id="l64.76">       // -- turn off summarization's stabilization logic for now by setting the</span>
<a href="#l64.77"></a><span id="l64.77">       //  timer interval to 0.  We do need to make sure that we drain the event</span>
<a href="#l64.78"></a><span id="l64.78">       //  queue after performing anything that will summarize, but use of</span>
<a href="#l64.79"></a><span id="l64.79">       //  assert_selected_and_displayed in test-folder-display-helpers should</span>
<a href="#l64.80"></a><span id="l64.80">       //  handle that.</span>
<a href="#l64.81"></a><span id="l64.81">       aController.window.MessageDisplayWidget.prototype.SUMMARIZATION_SELECTION_STABILITY_INTERVAL_MS = 0;</span>
<a href="#l64.82"></a><span id="l64.82">     },</span>
<a href="#l64.83"></a><span id="l64.83" class="difflineminus">-</span>
<a href="#l64.84"></a><span id="l64.84" class="difflineminus">-    /**</span>
<a href="#l64.85"></a><span id="l64.85" class="difflineminus">-     * Used to wrap methods on a class prototype in order to generate</span>
<a href="#l64.86"></a><span id="l64.86" class="difflineminus">-     *  mark_action data about the call.</span>
<a href="#l64.87"></a><span id="l64.87" class="difflineminus">-     */</span>
<a href="#l64.88"></a><span id="l64.88" class="difflineminus">-    debugTrace: [</span>
<a href="#l64.89"></a><span id="l64.89" class="difflineminus">-      // wrap 3pane unload function to notice when it explodes</span>
<a href="#l64.90"></a><span id="l64.90" class="difflineminus">-      {</span>
<a href="#l64.91"></a><span id="l64.91" class="difflineminus">-        method: &quot;OnUnloadMessenger&quot;,</span>
<a href="#l64.92"></a><span id="l64.92" class="difflineminus">-        onGlobal: true,</span>
<a href="#l64.93"></a><span id="l64.93" class="difflineminus">-        reportAs: &quot;OnUnloadMessenger&quot;,</span>
<a href="#l64.94"></a><span id="l64.94" class="difflineminus">-      },</span>
<a href="#l64.95"></a><span id="l64.95" class="difflineminus">-      // goDoCommand command gobbling notification</span>
<a href="#l64.96"></a><span id="l64.96" class="difflineminus">-      {</span>
<a href="#l64.97"></a><span id="l64.97" class="difflineminus">-        method: &quot;goDoCommand&quot;,</span>
<a href="#l64.98"></a><span id="l64.98" class="difflineminus">-        onGlobal: true,</span>
<a href="#l64.99"></a><span id="l64.99" class="difflineminus">-        doBefore(command) {</span>
<a href="#l64.100"></a><span id="l64.100" class="difflineminus">-          let controller = this.top.document.commandDispatcher.getControllerForCommand(</span>
<a href="#l64.101"></a><span id="l64.101" class="difflineminus">-            command</span>
<a href="#l64.102"></a><span id="l64.102" class="difflineminus">-          );</span>
<a href="#l64.103"></a><span id="l64.103" class="difflineminus">-          if (controller &amp;&amp; !controller.isCommandEnabled(command)) {</span>
<a href="#l64.104"></a><span id="l64.104" class="difflineminus">-            mark_action(&quot;winhelp&quot;, &quot;goDoCommand&quot;, [</span>
<a href="#l64.105"></a><span id="l64.105" class="difflineminus">-              &quot;about to ignore command because it's disabled:&quot;,</span>
<a href="#l64.106"></a><span id="l64.106" class="difflineminus">-              command,</span>
<a href="#l64.107"></a><span id="l64.107" class="difflineminus">-            ]);</span>
<a href="#l64.108"></a><span id="l64.108" class="difflineminus">-          }</span>
<a href="#l64.109"></a><span id="l64.109" class="difflineminus">-        },</span>
<a href="#l64.110"></a><span id="l64.110" class="difflineminus">-      },</span>
<a href="#l64.111"></a><span id="l64.111" class="difflineminus">-      // DefaultController command gobbling notification</span>
<a href="#l64.112"></a><span id="l64.112" class="difflineminus">-      {</span>
<a href="#l64.113"></a><span id="l64.113" class="difflineminus">-        method: &quot;doCommand&quot;,</span>
<a href="#l64.114"></a><span id="l64.114" class="difflineminus">-        onObject: &quot;DefaultController&quot;,</span>
<a href="#l64.115"></a><span id="l64.115" class="difflineminus">-        doBefore(command) {</span>
<a href="#l64.116"></a><span id="l64.116" class="difflineminus">-          if (!this.isCommandEnabled(command)) {</span>
<a href="#l64.117"></a><span id="l64.117" class="difflineminus">-            mark_action(&quot;winhelp&quot;, &quot;DC_doCommand&quot;, [</span>
<a href="#l64.118"></a><span id="l64.118" class="difflineminus">-              &quot;about to ignore command because it's disabled:&quot;,</span>
<a href="#l64.119"></a><span id="l64.119" class="difflineminus">-              command,</span>
<a href="#l64.120"></a><span id="l64.120" class="difflineminus">-            ]);</span>
<a href="#l64.121"></a><span id="l64.121" class="difflineminus">-          }</span>
<a href="#l64.122"></a><span id="l64.122" class="difflineminus">-        },</span>
<a href="#l64.123"></a><span id="l64.123" class="difflineminus">-      },</span>
<a href="#l64.124"></a><span id="l64.124" class="difflineminus">-      // FolderDisplayWidget command invocations</span>
<a href="#l64.125"></a><span id="l64.125" class="difflineminus">-      {</span>
<a href="#l64.126"></a><span id="l64.126" class="difflineminus">-        method: &quot;doCommand&quot;,</span>
<a href="#l64.127"></a><span id="l64.127" class="difflineminus">-        onConstructor: &quot;FolderDisplayWidget&quot;,</span>
<a href="#l64.128"></a><span id="l64.128" class="difflineminus">-        reportAs: &quot;FDW_doCommand&quot;,</span>
<a href="#l64.129"></a><span id="l64.129" class="difflineminus">-      },</span>
<a href="#l64.130"></a><span id="l64.130" class="difflineminus">-      {</span>
<a href="#l64.131"></a><span id="l64.131" class="difflineminus">-        method: &quot;doCommandWithFolder&quot;,</span>
<a href="#l64.132"></a><span id="l64.132" class="difflineminus">-        onConstructor: &quot;FolderDisplayWidget&quot;,</span>
<a href="#l64.133"></a><span id="l64.133" class="difflineminus">-        reportAs: &quot;FDW_doCommandWithFolder&quot;,</span>
<a href="#l64.134"></a><span id="l64.134" class="difflineminus">-      },</span>
<a href="#l64.135"></a><span id="l64.135" class="difflineminus">-      // MessageDisplayWidget annotation</span>
<a href="#l64.136"></a><span id="l64.136" class="difflineminus">-      {</span>
<a href="#l64.137"></a><span id="l64.137" class="difflineminus">-        method: &quot;onLoadStarted&quot;,</span>
<a href="#l64.138"></a><span id="l64.138" class="difflineminus">-        onConstructor: &quot;MessageDisplayWidget&quot;,</span>
<a href="#l64.139"></a><span id="l64.139" class="difflineminus">-        doBefore() {</span>
<a href="#l64.140"></a><span id="l64.140" class="difflineminus">-          mark_action(&quot;winhelp&quot;, &quot;MD_onLoadStarted&quot;, [</span>
<a href="#l64.141"></a><span id="l64.141" class="difflineminus">-            &quot;singleMessageDisplay?&quot;,</span>
<a href="#l64.142"></a><span id="l64.142" class="difflineminus">-            this.singleMessageDisplay,</span>
<a href="#l64.143"></a><span id="l64.143" class="difflineminus">-          ]);</span>
<a href="#l64.144"></a><span id="l64.144" class="difflineminus">-        },</span>
<a href="#l64.145"></a><span id="l64.145" class="difflineminus">-      },</span>
<a href="#l64.146"></a><span id="l64.146" class="difflineminus">-      {</span>
<a href="#l64.147"></a><span id="l64.147" class="difflineminus">-        method: &quot;onLoadCompleted&quot;,</span>
<a href="#l64.148"></a><span id="l64.148" class="difflineminus">-        onConstructor: &quot;MessageDisplayWidget&quot;,</span>
<a href="#l64.149"></a><span id="l64.149" class="difflineminus">-        doBefore() {</span>
<a href="#l64.150"></a><span id="l64.150" class="difflineminus">-          mark_action(&quot;winhelp&quot;, &quot;MD_onLoadCompleted&quot;, [</span>
<a href="#l64.151"></a><span id="l64.151" class="difflineminus">-            &quot;singleMessageDisplay?&quot;,</span>
<a href="#l64.152"></a><span id="l64.152" class="difflineminus">-            this.singleMessageDisplay,</span>
<a href="#l64.153"></a><span id="l64.153" class="difflineminus">-          ]);</span>
<a href="#l64.154"></a><span id="l64.154" class="difflineminus">-        },</span>
<a href="#l64.155"></a><span id="l64.155" class="difflineminus">-      },</span>
<a href="#l64.156"></a><span id="l64.156" class="difflineminus">-      // Message summarization annotations</span>
<a href="#l64.157"></a><span id="l64.157" class="difflineminus">-      {</span>
<a href="#l64.158"></a><span id="l64.158" class="difflineminus">-        method: &quot;summarizeThread&quot;,</span>
<a href="#l64.159"></a><span id="l64.159" class="difflineminus">-        onGlobal: true,</span>
<a href="#l64.160"></a><span id="l64.160" class="difflineminus">-        reportAs: &quot;summarizeThread&quot;,</span>
<a href="#l64.161"></a><span id="l64.161" class="difflineminus">-        showArgs: false,</span>
<a href="#l64.162"></a><span id="l64.162" class="difflineminus">-      },</span>
<a href="#l64.163"></a><span id="l64.163" class="difflineminus">-      {</span>
<a href="#l64.164"></a><span id="l64.164" class="difflineminus">-        method: &quot;summarizeMultipleSelection&quot;,</span>
<a href="#l64.165"></a><span id="l64.165" class="difflineminus">-        onGlobal: true,</span>
<a href="#l64.166"></a><span id="l64.166" class="difflineminus">-        reportAs: &quot;summarizeMultipleSelection&quot;,</span>
<a href="#l64.167"></a><span id="l64.167" class="difflineminus">-        showArgs: false,</span>
<a href="#l64.168"></a><span id="l64.168" class="difflineminus">-      },</span>
<a href="#l64.169"></a><span id="l64.169" class="difflineminus">-      {</span>
<a href="#l64.170"></a><span id="l64.170" class="difflineminus">-        method: &quot;summarizeFolder&quot;,</span>
<a href="#l64.171"></a><span id="l64.171" class="difflineminus">-        onGlobal: true,</span>
<a href="#l64.172"></a><span id="l64.172" class="difflineminus">-        reportAs: &quot;summarizeFolder&quot;,</span>
<a href="#l64.173"></a><span id="l64.173" class="difflineminus">-        showArgs: false,</span>
<a href="#l64.174"></a><span id="l64.174" class="difflineminus">-      },</span>
<a href="#l64.175"></a><span id="l64.175" class="difflineminus">-    ],</span>
<a href="#l64.176"></a><span id="l64.176">   },</span>
<a href="#l64.177"></a><span id="l64.177"> </span>
<a href="#l64.178"></a><span id="l64.178">   /**</span>
<a href="#l64.179"></a><span id="l64.179">    * Standalone message window.</span>
<a href="#l64.180"></a><span id="l64.180">    */</span>
<a href="#l64.181"></a><span id="l64.181">   &quot;mail:messageWindow&quot;: {</span>
<a href="#l64.182"></a><span id="l64.182">     elementsToExpose: {</span>
<a href="#l64.183"></a><span id="l64.183">       contentPane: &quot;messagepane&quot;,</span>
<a href="#l64.184"></a><span id="l64.184" class="difflineat">@@ -1583,77 +1483,21 @@ function _augment_helper(aController, aA</span>
<a href="#l64.185"></a><span id="l64.185">   }</span>
<a href="#l64.186"></a><span id="l64.186">   if (aAugmentDef.methods) {</span>
<a href="#l64.187"></a><span id="l64.187">     for (let key in aAugmentDef.methods) {</span>
<a href="#l64.188"></a><span id="l64.188">       let value = aAugmentDef.methods[key];</span>
<a href="#l64.189"></a><span id="l64.189">       aController[key] = value;</span>
<a href="#l64.190"></a><span id="l64.190">     }</span>
<a href="#l64.191"></a><span id="l64.191">   }</span>
<a href="#l64.192"></a><span id="l64.192"> </span>
<a href="#l64.193"></a><span id="l64.193" class="difflineminus">-  if (aAugmentDef.debugTrace) {</span>
<a href="#l64.194"></a><span id="l64.194" class="difflineminus">-    let win = aController.window;</span>
<a href="#l64.195"></a><span id="l64.195" class="difflineminus">-    for (let traceDef of aAugmentDef.debugTrace) {</span>
<a href="#l64.196"></a><span id="l64.196" class="difflineminus">-      let baseObj, useThis;</span>
<a href="#l64.197"></a><span id="l64.197" class="difflineminus">-      // - Get the object that actually has the method to wrap</span>
<a href="#l64.198"></a><span id="l64.198" class="difflineminus">-      if (traceDef.hasOwnProperty(&quot;onGlobal&quot;)) {</span>
<a href="#l64.199"></a><span id="l64.199" class="difflineminus">-        baseObj = win;</span>
<a href="#l64.200"></a><span id="l64.200" class="difflineminus">-        useThis = false;</span>
<a href="#l64.201"></a><span id="l64.201" class="difflineminus">-      } else if (traceDef.hasOwnProperty(&quot;onConstructor&quot;)) {</span>
<a href="#l64.202"></a><span id="l64.202" class="difflineminus">-        baseObj = win[traceDef.onConstructor].prototype;</span>
<a href="#l64.203"></a><span id="l64.203" class="difflineminus">-        useThis = true;</span>
<a href="#l64.204"></a><span id="l64.204" class="difflineminus">-      } else if (traceDef.hasOwnProperty(&quot;onObject&quot;)) {</span>
<a href="#l64.205"></a><span id="l64.205" class="difflineminus">-        baseObj = win[traceDef.onObject];</span>
<a href="#l64.206"></a><span id="l64.206" class="difflineminus">-        useThis = false;</span>
<a href="#l64.207"></a><span id="l64.207" class="difflineminus">-      } else {</span>
<a href="#l64.208"></a><span id="l64.208" class="difflineminus">-        // ignore/bail if unsupported type</span>
<a href="#l64.209"></a><span id="l64.209" class="difflineminus">-        continue;</span>
<a href="#l64.210"></a><span id="l64.210" class="difflineminus">-      }</span>
<a href="#l64.211"></a><span id="l64.211" class="difflineminus">-</span>
<a href="#l64.212"></a><span id="l64.212" class="difflineminus">-      // - compute/set the wrapped attr, bailing if it's already there</span>
<a href="#l64.213"></a><span id="l64.213" class="difflineminus">-      let wrappedName = &quot;__traceWrapped_&quot; + traceDef.method;</span>
<a href="#l64.214"></a><span id="l64.214" class="difflineminus">-      // bail if we/someone have already wrapped it.</span>
<a href="#l64.215"></a><span id="l64.215" class="difflineminus">-      if (baseObj.hasOwnProperty(wrappedName)) {</span>
<a href="#l64.216"></a><span id="l64.216" class="difflineminus">-        continue;</span>
<a href="#l64.217"></a><span id="l64.217" class="difflineminus">-      }</span>
<a href="#l64.218"></a><span id="l64.218" class="difflineminus">-      let origFunc = baseObj[traceDef.method];</span>
<a href="#l64.219"></a><span id="l64.219" class="difflineminus">-      let reportAs = traceDef.reportAs; // latch</span>
<a href="#l64.220"></a><span id="l64.220" class="difflineminus">-      let showArgs = &quot;showArgs&quot; in traceDef ? traceDef.showArgs : true;</span>
<a href="#l64.221"></a><span id="l64.221" class="difflineminus">-      baseObj[wrappedName] = origFunc;</span>
<a href="#l64.222"></a><span id="l64.222" class="difflineminus">-</span>
<a href="#l64.223"></a><span id="l64.223" class="difflineminus">-      // - create the trace func based on the definition and apply</span>
<a href="#l64.224"></a><span id="l64.224" class="difflineminus">-      let traceFunc;</span>
<a href="#l64.225"></a><span id="l64.225" class="difflineminus">-      if (traceDef.hasOwnProperty(&quot;doBefore&quot;)) {</span>
<a href="#l64.226"></a><span id="l64.226" class="difflineminus">-        let beforeFunc = traceDef.doBefore;</span>
<a href="#l64.227"></a><span id="l64.227" class="difflineminus">-        traceFunc = function(...aArgs) {</span>
<a href="#l64.228"></a><span id="l64.228" class="difflineminus">-          beforeFunc.apply(useThis ? this : baseObj, aArgs);</span>
<a href="#l64.229"></a><span id="l64.229" class="difflineminus">-          return origFunc.apply(this, aArgs);</span>
<a href="#l64.230"></a><span id="l64.230" class="difflineminus">-        };</span>
<a href="#l64.231"></a><span id="l64.231" class="difflineminus">-      } else {</span>
<a href="#l64.232"></a><span id="l64.232" class="difflineminus">-        traceFunc = function(...aArgs) {</span>
<a href="#l64.233"></a><span id="l64.233" class="difflineminus">-          mark_action(&quot;winhelp&quot;, reportAs, showArgs ? aArgs : []);</span>
<a href="#l64.234"></a><span id="l64.234" class="difflineminus">-          try {</span>
<a href="#l64.235"></a><span id="l64.235" class="difflineminus">-            return origFunc.apply(this, aArgs);</span>
<a href="#l64.236"></a><span id="l64.236" class="difflineminus">-          } catch (ex) {</span>
<a href="#l64.237"></a><span id="l64.237" class="difflineminus">-            mark_failure([&quot;exception in&quot;, reportAs, &quot;ex:&quot;, ex]);</span>
<a href="#l64.238"></a><span id="l64.238" class="difflineminus">-            // re-throw it; someone might care!</span>
<a href="#l64.239"></a><span id="l64.239" class="difflineminus">-            throw ex;</span>
<a href="#l64.240"></a><span id="l64.240" class="difflineminus">-          }</span>
<a href="#l64.241"></a><span id="l64.241" class="difflineminus">-        };</span>
<a href="#l64.242"></a><span id="l64.242" class="difflineminus">-      }</span>
<a href="#l64.243"></a><span id="l64.243" class="difflineminus">-      baseObj[traceDef.method] = traceFunc;</span>
<a href="#l64.244"></a><span id="l64.244" class="difflineminus">-    }</span>
<a href="#l64.245"></a><span id="l64.245" class="difflineminus">-  }</span>
<a href="#l64.246"></a><span id="l64.246" class="difflineminus">-</span>
<a href="#l64.247"></a><span id="l64.247">   if (aAugmentDef.onAugment) {</span>
<a href="#l64.248"></a><span id="l64.248">     aAugmentDef.onAugment(aController);</span>
<a href="#l64.249"></a><span id="l64.249">   }</span>
<a href="#l64.250"></a><span id="l64.250"> }</span>
<a href="#l64.251"></a><span id="l64.251"> </span>
<a href="#l64.252"></a><span id="l64.252" class="difflineminus">-var UNIQUE_WINDOW_ID_ATTR = &quot;__winHelper_uniqueId&quot;;</span>
<a href="#l64.253"></a><span id="l64.253" class="difflineminus">-</span>
<a href="#l64.254"></a><span id="l64.254"> /**</span>
<a href="#l64.255"></a><span id="l64.255">  * Given something you would find on event.target (should be a DOM node /</span>
<a href="#l64.256"></a><span id="l64.256">  *  DOM window), attempt to describe the hierarchy of that thing all the way</span>
<a href="#l64.257"></a><span id="l64.257">  *  to the outermost enclosing window.  This is intended to solve the problem</span>
<a href="#l64.258"></a><span id="l64.258">  *  where our event target can be the &quot;Window&quot; of an iframe, which is not</span>
<a href="#l64.259"></a><span id="l64.259">  *  very enlightening.  We really want to know the frameElement and what</span>
<a href="#l64.260"></a><span id="l64.260">  *  window it lives in.</span>
<a href="#l64.261"></a><span id="l64.261">  *</span>
<a href="#l64.262"></a><span id="l64.262" class="difflineat">@@ -1741,24 +1585,17 @@ function _findFrameElementForWindowInWin</span>
<a href="#l64.263"></a><span id="l64.263">  *  tell the difference between otherwise similar windows.</span>
<a href="#l64.264"></a><span id="l64.264">  */</span>
<a href="#l64.265"></a><span id="l64.265"> function getWindowDescribeyFromEvent(event) {</span>
<a href="#l64.266"></a><span id="l64.266">   var target = event.target;</span>
<a href="#l64.267"></a><span id="l64.267">   // assume it's a window if there's no ownerDocument attribute</span>
<a href="#l64.268"></a><span id="l64.268">   var win = &quot;ownerGlobal&quot; in target ? target.ownerGlobal : target;</span>
<a href="#l64.269"></a><span id="l64.269">   var owningWin = win.docShell.rootTreeItem.domWindow;</span>
<a href="#l64.270"></a><span id="l64.270">   var docElem = owningWin.document.documentElement;</span>
<a href="#l64.271"></a><span id="l64.271" class="difflineminus">-  return (</span>
<a href="#l64.272"></a><span id="l64.272" class="difflineminus">-    (getWindowTypeOrId(docElem) || &quot;mysterious&quot;) +</span>
<a href="#l64.273"></a><span id="l64.273" class="difflineminus">-    &quot; (&quot; +</span>
<a href="#l64.274"></a><span id="l64.274" class="difflineminus">-    (UNIQUE_WINDOW_ID_ATTR in owningWin</span>
<a href="#l64.275"></a><span id="l64.275" class="difflineminus">-      ? owningWin[UNIQUE_WINDOW_ID_ATTR]</span>
<a href="#l64.276"></a><span id="l64.276" class="difflineminus">-      : &quot;n/a&quot;) +</span>
<a href="#l64.277"></a><span id="l64.277" class="difflineminus">-    &quot;)&quot;</span>
<a href="#l64.278"></a><span id="l64.278" class="difflineminus">-  );</span>
<a href="#l64.279"></a><span id="l64.279" class="difflineplus">+  return (getWindowTypeOrId(docElem) || &quot;mysterious&quot;) + &quot; (n/a)&quot;;</span>
<a href="#l64.280"></a><span id="l64.280"> }</span>
<a href="#l64.281"></a><span id="l64.281"> </span>
<a href="#l64.282"></a><span id="l64.282"> function __peek_activate_handler(event) {</span>
<a href="#l64.283"></a><span id="l64.283">   mark_action(&quot;winhelp&quot;, event.type, [getWindowDescribeyFromEvent(event)]);</span>
<a href="#l64.284"></a><span id="l64.284">   return true;</span>
<a href="#l64.285"></a><span id="l64.285"> }</span>
<a href="#l64.286"></a><span id="l64.286"> </span>
<a href="#l64.287"></a><span id="l64.287"> function __peek_focus_handler(event) {</span>
<a href="#l64.288"></a><span id="l64.288" class="difflineat">@@ -1912,18 +1749,16 @@ function __popup_hidden(event) {</span>
<a href="#l64.289"></a><span id="l64.289">     &quot;target:&quot;,</span>
<a href="#l64.290"></a><span id="l64.290">     normalize_for_json(event.target),</span>
<a href="#l64.291"></a><span id="l64.291">     &quot;current target:&quot;,</span>
<a href="#l64.292"></a><span id="l64.292">     normalize_for_json(event.target),</span>
<a href="#l64.293"></a><span id="l64.293">   ]);</span>
<a href="#l64.294"></a><span id="l64.294">   return true;</span>
<a href="#l64.295"></a><span id="l64.295"> }</span>
<a href="#l64.296"></a><span id="l64.296"> </span>
<a href="#l64.297"></a><span id="l64.297" class="difflineminus">-var gNextOneUpUniqueID = 0;</span>
<a href="#l64.298"></a><span id="l64.298" class="difflineminus">-</span>
<a href="#l64.299"></a><span id="l64.299"> /**</span>
<a href="#l64.300"></a><span id="l64.300">  * controller.js in mozmill actually has its own extension mechanism,</span>
<a href="#l64.301"></a><span id="l64.301">  *  controllerAdditions.  Unfortunately, it does not make its stuff public at</span>
<a href="#l64.302"></a><span id="l64.302">  *  this time.  In the future we can change ourselves to just use that</span>
<a href="#l64.303"></a><span id="l64.303">  *  mechanism.</span>
<a href="#l64.304"></a><span id="l64.304">  */</span>
<a href="#l64.305"></a><span id="l64.305"> function augment_controller(aController, aWindowType) {</span>
<a href="#l64.306"></a><span id="l64.306">   if (aWindowType === undefined) {</span>
<a href="#l64.307"></a><span id="l64.307" class="difflineat">@@ -1937,18 +1772,16 @@ function augment_controller(aController,</span>
<a href="#l64.308"></a><span id="l64.308">     _augment_helper(aController, PerWindowTypeAugmentations[aWindowType]);</span>
<a href="#l64.309"></a><span id="l64.309">   }</span>
<a href="#l64.310"></a><span id="l64.310"> </span>
<a href="#l64.311"></a><span id="l64.311">   // Add a bunch of listeners to generate mark_action events to provide</span>
<a href="#l64.312"></a><span id="l64.312">   //  context for what is actually going on.</span>
<a href="#l64.313"></a><span id="l64.313">   try {</span>
<a href="#l64.314"></a><span id="l64.314">     let doc = aController.window.document;</span>
<a href="#l64.315"></a><span id="l64.315"> </span>
<a href="#l64.316"></a><span id="l64.316" class="difflineminus">-    aController.window[UNIQUE_WINDOW_ID_ATTR] = gNextOneUpUniqueID++;</span>
<a href="#l64.317"></a><span id="l64.317" class="difflineminus">-</span>
<a href="#l64.318"></a><span id="l64.318">     // - window activation / deactivation</span>
<a href="#l64.319"></a><span id="l64.319">     aController.window.addEventListener(</span>
<a href="#l64.320"></a><span id="l64.320">       &quot;activate&quot;,</span>
<a href="#l64.321"></a><span id="l64.321">       __peek_activate_handler,</span>
<a href="#l64.322"></a><span id="l64.322">       true</span>
<a href="#l64.323"></a><span id="l64.323">     );</span>
<a href="#l64.324"></a><span id="l64.324">     aController.window.addEventListener(</span>
<a href="#l64.325"></a><span id="l64.325">       &quot;deactivate&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l65.1"></a><span id="l65.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/__init__.py</span>
<a href="#l65.2"></a><span id="l65.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/__init__.py</span>
<a href="#l65.3"></a><span id="l65.3" class="difflineat">@@ -62,17 +62,17 @@ import mozrunner</span>
<a href="#l65.4"></a><span id="l65.4"> </span>
<a href="#l65.5"></a><span id="l65.5"> from time import sleep</span>
<a href="#l65.6"></a><span id="l65.6"> </span>
<a href="#l65.7"></a><span id="l65.7"> logger = logging.getLogger('mozmill')</span>
<a href="#l65.8"></a><span id="l65.8"> basedir = os.path.abspath(os.path.dirname(__file__))</span>
<a href="#l65.9"></a><span id="l65.9"> </span>
<a href="#l65.10"></a><span id="l65.10"> extension_path = os.path.join(basedir, 'extension')</span>
<a href="#l65.11"></a><span id="l65.11"> </span>
<a href="#l65.12"></a><span id="l65.12" class="difflineminus">-mozmillModuleJs = &quot;ChromeUtils.import('chrome://mozmill/content/modules/mozmill.jsm')&quot;</span>
<a href="#l65.13"></a><span id="l65.13" class="difflineplus">+mozmillModuleJs = &quot;ChromeUtils.import('resource://testing-common/mozmill/mozmill.jsm')&quot;</span>
<a href="#l65.14"></a><span id="l65.14"> </span>
<a href="#l65.15"></a><span id="l65.15"> try:</span>
<a href="#l65.16"></a><span id="l65.16">     import pkg_resources</span>
<a href="#l65.17"></a><span id="l65.17">     version = pkg_resources.get_distribution('mozmill').version</span>
<a href="#l65.18"></a><span id="l65.18"> except:</span>
<a href="#l65.19"></a><span id="l65.19">     # pkg_resources not available</span>
<a href="#l65.20"></a><span id="l65.20">     version = None</span>
<a href="#l65.21"></a><span id="l65.21"> </span>
<a href="#l65.22"></a><span id="l65.22" class="difflineat">@@ -264,17 +264,17 @@ class MozMill(object):</span>
<a href="#l65.23"></a><span id="l65.23">         - test : test files or directories to run</span>
<a href="#l65.24"></a><span id="l65.24">         - sleeptime : initial time to sleep [s] (not sure why the default is 4)</span>
<a href="#l65.25"></a><span id="l65.25">         &quot;&quot;&quot;</span>
<a href="#l65.26"></a><span id="l65.26"> </span>
<a href="#l65.27"></a><span id="l65.27">         tests = self.find_tests(tests)</span>
<a href="#l65.28"></a><span id="l65.28">         self.tests.extend(tests)</span>
<a href="#l65.29"></a><span id="l65.29"> </span>
<a href="#l65.30"></a><span id="l65.30">         frame = jsbridge.JSObject(self.bridge,</span>
<a href="#l65.31"></a><span id="l65.31" class="difflineminus">-                                  &quot;ChromeUtils.import('chrome://mozmill/content/modules/frame.jsm')&quot;)</span>
<a href="#l65.32"></a><span id="l65.32" class="difflineplus">+                                  &quot;ChromeUtils.import('resource://testing-common/mozmill/frame.jsm')&quot;)</span>
<a href="#l65.33"></a><span id="l65.33">         sleep(sleeptime)</span>
<a href="#l65.34"></a><span id="l65.34"> </span>
<a href="#l65.35"></a><span id="l65.35">         # transfer persisted data</span>
<a href="#l65.36"></a><span id="l65.36">         frame.persisted = self.persisted</span>
<a href="#l65.37"></a><span id="l65.37"> </span>
<a href="#l65.38"></a><span id="l65.38">         # run the test files</span>
<a href="#l65.39"></a><span id="l65.39">         for test in tests:</span>
<a href="#l65.40"></a><span id="l65.40">             frame.runTestFile(test)</span>
<a href="#l65.41"></a><span id="l65.41" class="difflineat">@@ -568,17 +568,17 @@ class MozMillRestart(MozMill):</span>
<a href="#l65.42"></a><span id="l65.42"> </span>
<a href="#l65.43"></a><span id="l65.43">         # if user_restart we don't need to start the browser back up</span>
<a href="#l65.44"></a><span id="l65.44">         if self.currentShutdownMode != self.shutdownModes.user_restart:</span>
<a href="#l65.45"></a><span id="l65.45">             self.runner.start()</span>
<a href="#l65.46"></a><span id="l65.46"> </span>
<a href="#l65.47"></a><span id="l65.47">         self.create_network()</span>
<a href="#l65.48"></a><span id="l65.48">         self.appinfo = self.get_appinfo(self.bridge)</span>
<a href="#l65.49"></a><span id="l65.49">         frame = jsbridge.JSObject(self.bridge,</span>
<a href="#l65.50"></a><span id="l65.50" class="difflineminus">-                                  &quot;ChromeUtils.import('chrome://mozmill/content/modules/frame.jsm')&quot;)</span>
<a href="#l65.51"></a><span id="l65.51" class="difflineplus">+                                  &quot;ChromeUtils.import('resource://testing-common/mozmill/frame.jsm')&quot;)</span>
<a href="#l65.52"></a><span id="l65.52">         return frame</span>
<a href="#l65.53"></a><span id="l65.53"> </span>
<a href="#l65.54"></a><span id="l65.54">     def run_dir(self, test_dir, sleeptime=0):</span>
<a href="#l65.55"></a><span id="l65.55">         &quot;&quot;&quot;run a directory of restart tests resetting the profile per directory&quot;&quot;&quot;</span>
<a href="#l65.56"></a><span id="l65.56"> </span>
<a href="#l65.57"></a><span id="l65.57">         # TODO:  document this behaviour!</span>
<a href="#l65.58"></a><span id="l65.58">         if os.path.isfile(os.path.join(test_dir, 'testPre.js')):</span>
<a href="#l65.59"></a><span id="l65.59">             pre_test = os.path.join(test_dir, 'testPre.js')</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l66.1"></a><span id="l66.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/bootstrap.js</span>
<a href="#l66.2"></a><span id="l66.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/bootstrap.js</span>
<a href="#l66.3"></a><span id="l66.3" class="difflineat">@@ -8,16 +8,30 @@ var { ExtensionSupport } = ChromeUtils.i</span>
<a href="#l66.4"></a><span id="l66.4"> );</span>
<a href="#l66.5"></a><span id="l66.5"> var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l66.6"></a><span id="l66.6"> </span>
<a href="#l66.7"></a><span id="l66.7"> function install() {}</span>
<a href="#l66.8"></a><span id="l66.8"> </span>
<a href="#l66.9"></a><span id="l66.9"> function uninstall() {}</span>
<a href="#l66.10"></a><span id="l66.10"> </span>
<a href="#l66.11"></a><span id="l66.11"> function startup(data, reason) {</span>
<a href="#l66.12"></a><span id="l66.12" class="difflineplus">+  let env = Cc[&quot;@mozilla.org/process/environment;1&quot;].getService(</span>
<a href="#l66.13"></a><span id="l66.13" class="difflineplus">+    Ci.nsIEnvironment</span>
<a href="#l66.14"></a><span id="l66.14" class="difflineplus">+  );</span>
<a href="#l66.15"></a><span id="l66.15" class="difflineplus">+  let protocolHandler = Services.io</span>
<a href="#l66.16"></a><span id="l66.16" class="difflineplus">+    .getProtocolHandler(&quot;resource&quot;)</span>
<a href="#l66.17"></a><span id="l66.17" class="difflineplus">+    .QueryInterface(Ci.nsIResProtocolHandler);</span>
<a href="#l66.18"></a><span id="l66.18" class="difflineplus">+</span>
<a href="#l66.19"></a><span id="l66.19" class="difflineplus">+  let modulesFile = Cc[&quot;@mozilla.org/file/local;1&quot;].createInstance(Ci.nsIFile);</span>
<a href="#l66.20"></a><span id="l66.20" class="difflineplus">+  modulesFile.initWithPath(env.get(&quot;TESTING_MODULES_DIR&quot;));</span>
<a href="#l66.21"></a><span id="l66.21" class="difflineplus">+  protocolHandler.setSubstitution(</span>
<a href="#l66.22"></a><span id="l66.22" class="difflineplus">+    &quot;testing-common&quot;,</span>
<a href="#l66.23"></a><span id="l66.23" class="difflineplus">+    Services.io.newFileURI(modulesFile)</span>
<a href="#l66.24"></a><span id="l66.24" class="difflineplus">+  );</span>
<a href="#l66.25"></a><span id="l66.25" class="difflineplus">+</span>
<a href="#l66.26"></a><span id="l66.26">   loadDefaultPrefs();</span>
<a href="#l66.27"></a><span id="l66.27"> </span>
<a href="#l66.28"></a><span id="l66.28">   ExtensionSupport.registerWindowListener(data.id, {</span>
<a href="#l66.29"></a><span id="l66.29">     chromeURLs: [&quot;chrome://messenger/content/messenger.xul&quot;],</span>
<a href="#l66.30"></a><span id="l66.30">     onLoadWindow: setupUI,</span>
<a href="#l66.31"></a><span id="l66.31">   });</span>
<a href="#l66.32"></a><span id="l66.32"> }</span>
<a href="#l66.33"></a><span id="l66.33"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l67.1"></a><span id="l67.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/modules/controller.jsm</span>
<a href="#l67.2"></a><span id="l67.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/modules/controller.jsm</span>
<a href="#l67.3"></a><span id="l67.3" class="difflineat">@@ -42,25 +42,25 @@ var EXPORTED_SYMBOLS = [</span>
<a href="#l67.4"></a><span id="l67.4">   &quot;MozMillController&quot;,</span>
<a href="#l67.5"></a><span id="l67.5">   &quot;MozMillAsyncTest&quot;,</span>
<a href="#l67.6"></a><span id="l67.6">   &quot;globalEventRegistry&quot;,</span>
<a href="#l67.7"></a><span id="l67.7">   &quot;sleep&quot;,</span>
<a href="#l67.8"></a><span id="l67.8">   &quot;windowMap&quot;,</span>
<a href="#l67.9"></a><span id="l67.9"> ];</span>
<a href="#l67.10"></a><span id="l67.10"> </span>
<a href="#l67.11"></a><span id="l67.11"> var EventUtils = ChromeUtils.import(</span>
<a href="#l67.12"></a><span id="l67.12" class="difflineminus">-  &quot;chrome://mozmill/content/stdlib/EventUtils.jsm&quot;</span>
<a href="#l67.13"></a><span id="l67.13" class="difflineplus">+  &quot;resource://testing-common/mozmill/EventUtils.jsm&quot;</span>
<a href="#l67.14"></a><span id="l67.14"> );</span>
<a href="#l67.15"></a><span id="l67.15"> </span>
<a href="#l67.16"></a><span id="l67.16" class="difflineminus">-var events = ChromeUtils.import(&quot;chrome://mozmill/content/modules/events.jsm&quot;);</span>
<a href="#l67.17"></a><span id="l67.17" class="difflineminus">-var utils = ChromeUtils.import(&quot;chrome://mozmill/content/modules/utils.jsm&quot;);</span>
<a href="#l67.18"></a><span id="l67.18" class="difflineplus">+var events = ChromeUtils.import(&quot;resource://testing-common/mozmill/events.jsm&quot;);</span>
<a href="#l67.19"></a><span id="l67.19" class="difflineplus">+var utils = ChromeUtils.import(&quot;resource://testing-common/mozmill/utils.jsm&quot;);</span>
<a href="#l67.20"></a><span id="l67.20"> var elementslib = ChromeUtils.import(</span>
<a href="#l67.21"></a><span id="l67.21" class="difflineminus">-  &quot;chrome://mozmill/content/modules/elementslib.jsm&quot;</span>
<a href="#l67.22"></a><span id="l67.22" class="difflineplus">+  &quot;resource://testing-common/mozmill/elementslib.jsm&quot;</span>
<a href="#l67.23"></a><span id="l67.23"> );</span>
<a href="#l67.24"></a><span id="l67.24" class="difflineminus">-var frame = ChromeUtils.import(&quot;chrome://mozmill/content/modules/frame.jsm&quot;);</span>
<a href="#l67.25"></a><span id="l67.25" class="difflineplus">+var frame = ChromeUtils.import(&quot;resource://testing-common/mozmill/frame.jsm&quot;);</span>
<a href="#l67.26"></a><span id="l67.26"> </span>
<a href="#l67.27"></a><span id="l67.27"> // The window map which is used to store information e.g. loaded state of each</span>
<a href="#l67.28"></a><span id="l67.28"> // open chrome and content window.</span>
<a href="#l67.29"></a><span id="l67.29"> var windowMap = {</span>
<a href="#l67.30"></a><span id="l67.30">   _windows: {},</span>
<a href="#l67.31"></a><span id="l67.31"> </span>
<a href="#l67.32"></a><span id="l67.32">   contains(aWindowId) {</span>
<a href="#l67.33"></a><span id="l67.33">     return aWindowId in this._windows;</span>
<a href="#l67.34"></a><span id="l67.34" class="difflineat">@@ -342,17 +342,17 @@ var MenuTree = function(aWindow, aMenu) </span>
<a href="#l67.35"></a><span id="l67.35">     }</span>
<a href="#l67.36"></a><span id="l67.36">   }</span>
<a href="#l67.37"></a><span id="l67.37"> };</span>
<a href="#l67.38"></a><span id="l67.38"> </span>
<a href="#l67.39"></a><span id="l67.39"> var MozMillController = function(window) {</span>
<a href="#l67.40"></a><span id="l67.40">   this.window = window;</span>
<a href="#l67.41"></a><span id="l67.41"> </span>
<a href="#l67.42"></a><span id="l67.42">   this.mozmillModule = ChromeUtils.import(</span>
<a href="#l67.43"></a><span id="l67.43" class="difflineminus">-    &quot;chrome://mozmill/content/modules/mozmill.jsm&quot;</span>
<a href="#l67.44"></a><span id="l67.44" class="difflineplus">+    &quot;resource://testing-common/mozmill/mozmill.jsm&quot;</span>
<a href="#l67.45"></a><span id="l67.45">   );</span>
<a href="#l67.46"></a><span id="l67.46"> </span>
<a href="#l67.47"></a><span id="l67.47">   utils.waitFor(</span>
<a href="#l67.48"></a><span id="l67.48">     function() {</span>
<a href="#l67.49"></a><span id="l67.49">       return window != null &amp;&amp; this.isLoaded();</span>
<a href="#l67.50"></a><span id="l67.50">     },</span>
<a href="#l67.51"></a><span id="l67.51">     &quot;controller(): Window could not be initialized.&quot;,</span>
<a href="#l67.52"></a><span id="l67.52">     undefined,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l68.1"></a><span id="l68.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/modules/elementslib.jsm</span>
<a href="#l68.2"></a><span id="l68.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/modules/elementslib.jsm</span>
<a href="#l68.3"></a><span id="l68.3" class="difflineat">@@ -47,18 +47,20 @@ var EXPORTED_SYMBOLS = [</span>
<a href="#l68.4"></a><span id="l68.4">   &quot;AnonXPath&quot;,</span>
<a href="#l68.5"></a><span id="l68.5">   &quot;Lookup&quot;,</span>
<a href="#l68.6"></a><span id="l68.6">   &quot;_byID&quot;,</span>
<a href="#l68.7"></a><span id="l68.7">   &quot;_byName&quot;,</span>
<a href="#l68.8"></a><span id="l68.8">   &quot;_byAttrib&quot;,</span>
<a href="#l68.9"></a><span id="l68.9">   &quot;_byAnonAttrib&quot;,</span>
<a href="#l68.10"></a><span id="l68.10"> ];</span>
<a href="#l68.11"></a><span id="l68.11"> </span>
<a href="#l68.12"></a><span id="l68.12" class="difflineminus">-var utils = ChromeUtils.import(&quot;chrome://mozmill/content/modules/utils.jsm&quot;);</span>
<a href="#l68.13"></a><span id="l68.13" class="difflineminus">-var strings = ChromeUtils.import(&quot;chrome://mozmill/content/stdlib/strings.jsm&quot;);</span>
<a href="#l68.14"></a><span id="l68.14" class="difflineplus">+var utils = ChromeUtils.import(&quot;resource://testing-common/mozmill/utils.jsm&quot;);</span>
<a href="#l68.15"></a><span id="l68.15" class="difflineplus">+var strings = ChromeUtils.import(</span>
<a href="#l68.16"></a><span id="l68.16" class="difflineplus">+  &quot;resource://testing-common/mozmill/strings.jsm&quot;</span>
<a href="#l68.17"></a><span id="l68.17" class="difflineplus">+);</span>
<a href="#l68.18"></a><span id="l68.18"> </span>
<a href="#l68.19"></a><span id="l68.19"> var countQuotes = function(str) {</span>
<a href="#l68.20"></a><span id="l68.20">   var count = 0;</span>
<a href="#l68.21"></a><span id="l68.21">   var i = 0;</span>
<a href="#l68.22"></a><span id="l68.22">   while (i &lt; str.length) {</span>
<a href="#l68.23"></a><span id="l68.23">     i = str.indexOf('&quot;', i);</span>
<a href="#l68.24"></a><span id="l68.24">     if (i != -1) {</span>
<a href="#l68.25"></a><span id="l68.25">       count++;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l69.1"></a><span id="l69.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/modules/events.jsm</span>
<a href="#l69.2"></a><span id="l69.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/modules/events.jsm</span>
<a href="#l69.3"></a><span id="l69.3" class="difflineat">@@ -42,22 +42,22 @@ var EXPORTED_SYMBOLS = [</span>
<a href="#l69.4"></a><span id="l69.4">   &quot;triggerEvent&quot;,</span>
<a href="#l69.5"></a><span id="l69.5">   &quot;getKeyCodeFromKeySequence&quot;,</span>
<a href="#l69.6"></a><span id="l69.6">   &quot;triggerKeyEvent&quot;,</span>
<a href="#l69.7"></a><span id="l69.7">   &quot;triggerMouseEvent&quot;,</span>
<a href="#l69.8"></a><span id="l69.8">   &quot;fakeOpenPopup&quot;,</span>
<a href="#l69.9"></a><span id="l69.9"> ];</span>
<a href="#l69.10"></a><span id="l69.10"> </span>
<a href="#l69.11"></a><span id="l69.11"> var EventUtils = ChromeUtils.import(</span>
<a href="#l69.12"></a><span id="l69.12" class="difflineminus">-  &quot;chrome://mozmill/content/stdlib/EventUtils.jsm&quot;</span>
<a href="#l69.13"></a><span id="l69.13" class="difflineplus">+  &quot;resource://testing-common/mozmill/EventUtils.jsm&quot;</span>
<a href="#l69.14"></a><span id="l69.14"> );</span>
<a href="#l69.15"></a><span id="l69.15"> </span>
<a href="#l69.16"></a><span id="l69.16" class="difflineminus">-var utils = ChromeUtils.import(&quot;chrome://mozmill/content/modules/utils.jsm&quot;);</span>
<a href="#l69.17"></a><span id="l69.17" class="difflineplus">+var utils = ChromeUtils.import(&quot;resource://testing-common/mozmill/utils.jsm&quot;);</span>
<a href="#l69.18"></a><span id="l69.18"> </span>
<a href="#l69.19"></a><span id="l69.19" class="difflineminus">-// var logging = ChromeUtils.import(&quot;chrome://mozmill/content/stdlib/logging.jsm&quot;);</span>
<a href="#l69.20"></a><span id="l69.20" class="difflineplus">+// var logging = ChromeUtils.import(&quot;resource://testing-common/mozmill/logging.jsm&quot;);</span>
<a href="#l69.21"></a><span id="l69.21"> </span>
<a href="#l69.22"></a><span id="l69.22"> // var eventsLogger = logging.getLogger('eventsLogger');</span>
<a href="#l69.23"></a><span id="l69.23"> </span>
<a href="#l69.24"></a><span id="l69.24"> var createEventObject = function(</span>
<a href="#l69.25"></a><span id="l69.25">   element,</span>
<a href="#l69.26"></a><span id="l69.26">   controlKeyDown,</span>
<a href="#l69.27"></a><span id="l69.27">   altKeyDown,</span>
<a href="#l69.28"></a><span id="l69.28">   shiftKeyDown,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l70.1"></a><span id="l70.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/modules/frame.jsm</span>
<a href="#l70.2"></a><span id="l70.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/modules/frame.jsm</span>
<a href="#l70.3"></a><span id="l70.3" class="difflineat">@@ -47,23 +47,23 @@ var EXPORTED_SYMBOLS = [</span>
<a href="#l70.4"></a><span id="l70.4">   &quot;log&quot;,</span>
<a href="#l70.5"></a><span id="l70.5">   &quot;getThread&quot;,</span>
<a href="#l70.6"></a><span id="l70.6">   &quot;timers&quot;,</span>
<a href="#l70.7"></a><span id="l70.7">   &quot;persisted&quot;,</span>
<a href="#l70.8"></a><span id="l70.8">   &quot;registerModule&quot;,</span>
<a href="#l70.9"></a><span id="l70.9"> ];</span>
<a href="#l70.10"></a><span id="l70.10"> </span>
<a href="#l70.11"></a><span id="l70.11"> var { HttpServer } = ChromeUtils.import(</span>
<a href="#l70.12"></a><span id="l70.12" class="difflineminus">-  &quot;chrome://mozmill/content/stdlib/httpd.jsm&quot;</span>
<a href="#l70.13"></a><span id="l70.13" class="difflineplus">+  &quot;resource://testing-common/mozmill/httpd.jsm&quot;</span>
<a href="#l70.14"></a><span id="l70.14"> );</span>
<a href="#l70.15"></a><span id="l70.15"> </span>
<a href="#l70.16"></a><span id="l70.16" class="difflineminus">-var os = ChromeUtils.import(&quot;chrome://mozmill/content/stdlib/os.jsm&quot;);</span>
<a href="#l70.17"></a><span id="l70.17" class="difflineminus">-var utils = ChromeUtils.import(&quot;chrome://mozmill/content/modules/utils.jsm&quot;);</span>
<a href="#l70.18"></a><span id="l70.18" class="difflineplus">+var os = ChromeUtils.import(&quot;resource://testing-common/mozmill/os.jsm&quot;);</span>
<a href="#l70.19"></a><span id="l70.19" class="difflineplus">+var utils = ChromeUtils.import(&quot;resource://testing-common/mozmill/utils.jsm&quot;);</span>
<a href="#l70.20"></a><span id="l70.20"> var securableModule = ChromeUtils.import(</span>
<a href="#l70.21"></a><span id="l70.21" class="difflineminus">-  &quot;chrome://mozmill/content/stdlib/securable-module.jsm&quot;</span>
<a href="#l70.22"></a><span id="l70.22" class="difflineplus">+  &quot;resource://testing-common/mozmill/securable-module.jsm&quot;</span>
<a href="#l70.23"></a><span id="l70.23"> );</span>
<a href="#l70.24"></a><span id="l70.24"> </span>
<a href="#l70.25"></a><span id="l70.25"> var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l70.26"></a><span id="l70.26"> var systemPrincipal = Services.scriptSecurityManager.getSystemPrincipal();</span>
<a href="#l70.27"></a><span id="l70.27"> </span>
<a href="#l70.28"></a><span id="l70.28"> var backstage = this;</span>
<a href="#l70.29"></a><span id="l70.29"> </span>
<a href="#l70.30"></a><span id="l70.30"> var registeredFunctions = {};</span>
<a href="#l70.31"></a><span id="l70.31" class="difflineat">@@ -80,22 +80,22 @@ var arrayRemove = function(array, from, </span>
<a href="#l70.32"></a><span id="l70.32"> </span>
<a href="#l70.33"></a><span id="l70.33"> var mozmill = undefined;</span>
<a href="#l70.34"></a><span id="l70.34"> var elementslib = undefined;</span>
<a href="#l70.35"></a><span id="l70.35"> var modules = undefined;</span>
<a href="#l70.36"></a><span id="l70.36"> </span>
<a href="#l70.37"></a><span id="l70.37"> var loadTestResources = function() {</span>
<a href="#l70.38"></a><span id="l70.38">   if (mozmill == undefined) {</span>
<a href="#l70.39"></a><span id="l70.39">     mozmill = ChromeUtils.import(</span>
<a href="#l70.40"></a><span id="l70.40" class="difflineminus">-      &quot;chrome://mozmill/content/modules/mozmill.jsm&quot;</span>
<a href="#l70.41"></a><span id="l70.41" class="difflineplus">+      &quot;resource://testing-common/mozmill/mozmill.jsm&quot;</span>
<a href="#l70.42"></a><span id="l70.42">     );</span>
<a href="#l70.43"></a><span id="l70.43">   }</span>
<a href="#l70.44"></a><span id="l70.44">   if (elementslib == undefined) {</span>
<a href="#l70.45"></a><span id="l70.45">     elementslib = ChromeUtils.import(</span>
<a href="#l70.46"></a><span id="l70.46" class="difflineminus">-      &quot;chrome://mozmill/content/modules/elementslib.jsm&quot;</span>
<a href="#l70.47"></a><span id="l70.47" class="difflineplus">+      &quot;resource://testing-common/mozmill/elementslib.jsm&quot;</span>
<a href="#l70.48"></a><span id="l70.48">     );</span>
<a href="#l70.49"></a><span id="l70.49">   }</span>
<a href="#l70.50"></a><span id="l70.50"> };</span>
<a href="#l70.51"></a><span id="l70.51"> </span>
<a href="#l70.52"></a><span id="l70.52"> var loadFile = function(path, collector) {</span>
<a href="#l70.53"></a><span id="l70.53">   var file = Cc[&quot;@mozilla.org/file/local;1&quot;].createInstance(Ci.nsIFile);</span>
<a href="#l70.54"></a><span id="l70.54">   file.initWithPath(path);</span>
<a href="#l70.55"></a><span id="l70.55">   var uri = Services.io.newFileURI(file).spec;</span>
<a href="#l70.56"></a><span id="l70.56" class="difflineat">@@ -374,17 +374,17 @@ function Collector() {</span>
<a href="#l70.57"></a><span id="l70.57">   this.test_modules_by_filename = {};</span>
<a href="#l70.58"></a><span id="l70.58">   this.test_modules_by_name = {};</span>
<a href="#l70.59"></a><span id="l70.59">   this.requirements_run = {};</span>
<a href="#l70.60"></a><span id="l70.60">   this.all_requirements = [];</span>
<a href="#l70.61"></a><span id="l70.61">   this.loaded_directories = [];</span>
<a href="#l70.62"></a><span id="l70.62">   this.testing = [];</span>
<a href="#l70.63"></a><span id="l70.63">   this.httpd_started = false;</span>
<a href="#l70.64"></a><span id="l70.64">   this.http_port = 43336;</span>
<a href="#l70.65"></a><span id="l70.65" class="difflineminus">-  // var logging = ChromeUtils.import(&quot;chrome://mozmill/content/stdlib/logging.jsm&quot;);</span>
<a href="#l70.66"></a><span id="l70.66" class="difflineplus">+  // var logging = ChromeUtils.import(&quot;resource://testing-common/mozmill/logging.jsm&quot;);</span>
<a href="#l70.67"></a><span id="l70.67">   // this.logger = new logging.Logger('Collector');</span>
<a href="#l70.68"></a><span id="l70.68"> }</span>
<a href="#l70.69"></a><span id="l70.69"> </span>
<a href="#l70.70"></a><span id="l70.70"> Collector.prototype.getModule = function(name) {</span>
<a href="#l70.71"></a><span id="l70.71">   return this.test_modules_by_name[name];</span>
<a href="#l70.72"></a><span id="l70.72"> };</span>
<a href="#l70.73"></a><span id="l70.73"> </span>
<a href="#l70.74"></a><span id="l70.74"> Collector.prototype.getServer = function(port, basePath) {</span>
<a href="#l70.75"></a><span id="l70.75" class="difflineat">@@ -548,19 +548,19 @@ AppQuitObserver.prototype = {</span>
<a href="#l70.76"></a><span id="l70.76">     Services.obs.removeObserver(this, &quot;quit-application&quot;);</span>
<a href="#l70.77"></a><span id="l70.77">   },</span>
<a href="#l70.78"></a><span id="l70.78"> };</span>
<a href="#l70.79"></a><span id="l70.79"> </span>
<a href="#l70.80"></a><span id="l70.80"> function Runner(collector, invokedFromIDE) {</span>
<a href="#l70.81"></a><span id="l70.81">   this.collector = collector;</span>
<a href="#l70.82"></a><span id="l70.82">   this.invokedFromIDE = invokedFromIDE;</span>
<a href="#l70.83"></a><span id="l70.83">   events.fireEvent(&quot;startRunner&quot;, true);</span>
<a href="#l70.84"></a><span id="l70.84" class="difflineminus">-  // var logging = ChromeUtils.import(&quot;chrome://mozmill/content/stdlib/logging.jsm&quot;);</span>
<a href="#l70.85"></a><span id="l70.85" class="difflineplus">+  // var logging = ChromeUtils.import(&quot;resource://testing-common/mozmill/logging.jsm&quot;);</span>
<a href="#l70.86"></a><span id="l70.86">   // this.logger = new logging.Logger('Runner');</span>
<a href="#l70.87"></a><span id="l70.87" class="difflineminus">-  var m = ChromeUtils.import(&quot;chrome://mozmill/content/modules/mozmill.jsm&quot;);</span>
<a href="#l70.88"></a><span id="l70.88" class="difflineplus">+  var m = ChromeUtils.import(&quot;resource://testing-common/mozmill/mozmill.jsm&quot;);</span>
<a href="#l70.89"></a><span id="l70.89">   this.platform = m.platform;</span>
<a href="#l70.90"></a><span id="l70.90"> }</span>
<a href="#l70.91"></a><span id="l70.91"> Runner.prototype.runTestDirectory = function(directory) {</span>
<a href="#l70.92"></a><span id="l70.92">   this.collector.initTestDirectory(directory);</span>
<a href="#l70.93"></a><span id="l70.93"> </span>
<a href="#l70.94"></a><span id="l70.94">   for (var i in this.collector.test_modules_by_filename) {</span>
<a href="#l70.95"></a><span id="l70.95">     var test = this.collector.test_modules_by_filename[i];</span>
<a href="#l70.96"></a><span id="l70.96">     if (test.status != &quot;done&quot;) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l71.1"></a><span id="l71.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/modules/init.jsm</span>
<a href="#l71.2"></a><span id="l71.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/modules/init.jsm</span>
<a href="#l71.3"></a><span id="l71.3" class="difflineat">@@ -37,22 +37,22 @@</span>
<a href="#l71.4"></a><span id="l71.4">  *</span>
<a href="#l71.5"></a><span id="l71.5">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l71.6"></a><span id="l71.6"> </span>
<a href="#l71.7"></a><span id="l71.7"> var EXPORTED_SYMBOLS = [&quot;mozmill&quot;];</span>
<a href="#l71.8"></a><span id="l71.8"> </span>
<a href="#l71.9"></a><span id="l71.9"> const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l71.10"></a><span id="l71.10"> </span>
<a href="#l71.11"></a><span id="l71.11"> const controller = ChromeUtils.import(</span>
<a href="#l71.12"></a><span id="l71.12" class="difflineminus">-  &quot;chrome://mozmill/content/modules/controller.jsm&quot;</span>
<a href="#l71.13"></a><span id="l71.13" class="difflineplus">+  &quot;resource://testing-common/mozmill/controller.jsm&quot;</span>
<a href="#l71.14"></a><span id="l71.14"> );</span>
<a href="#l71.15"></a><span id="l71.15"> const mozmill = ChromeUtils.import(</span>
<a href="#l71.16"></a><span id="l71.16" class="difflineminus">-  &quot;chrome://mozmill/content/modules/mozmill.jsm&quot;</span>
<a href="#l71.17"></a><span id="l71.17" class="difflineplus">+  &quot;resource://testing-common/mozmill/mozmill.jsm&quot;</span>
<a href="#l71.18"></a><span id="l71.18"> );</span>
<a href="#l71.19"></a><span id="l71.19" class="difflineminus">-const utils = ChromeUtils.import(&quot;chrome://mozmill/content/modules/utils.jsm&quot;);</span>
<a href="#l71.20"></a><span id="l71.20" class="difflineplus">+const utils = ChromeUtils.import(&quot;resource://testing-common/mozmill/utils.jsm&quot;);</span>
<a href="#l71.21"></a><span id="l71.21"> </span>
<a href="#l71.22"></a><span id="l71.22"> // Observer when a new top-level window is ready</span>
<a href="#l71.23"></a><span id="l71.23"> var windowReadyObserver = {</span>
<a href="#l71.24"></a><span id="l71.24">   observe(subject, topic, data) {</span>
<a href="#l71.25"></a><span id="l71.25">     attachEventListeners(subject);</span>
<a href="#l71.26"></a><span id="l71.26">   },</span>
<a href="#l71.27"></a><span id="l71.27"> };</span>
<a href="#l71.28"></a><span id="l71.28"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l72.1"></a><span id="l72.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/modules/jum.jsm</span>
<a href="#l72.2"></a><span id="l72.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/modules/jum.jsm</span>
<a href="#l72.3"></a><span id="l72.3" class="difflineat">@@ -46,17 +46,17 @@ var EXPORTED_SYMBOLS = [</span>
<a href="#l72.4"></a><span id="l72.4">   &quot;assertUndefined&quot;,</span>
<a href="#l72.5"></a><span id="l72.5">   &quot;assertNotUndefined&quot;,</span>
<a href="#l72.6"></a><span id="l72.6">   &quot;assertNaN&quot;,</span>
<a href="#l72.7"></a><span id="l72.7">   &quot;assertNotNaN&quot;,</span>
<a href="#l72.8"></a><span id="l72.8">   &quot;fail&quot;,</span>
<a href="#l72.9"></a><span id="l72.9">   &quot;pass&quot;,</span>
<a href="#l72.10"></a><span id="l72.10"> ];</span>
<a href="#l72.11"></a><span id="l72.11"> </span>
<a href="#l72.12"></a><span id="l72.12" class="difflineminus">-var frame = ChromeUtils.import(&quot;chrome://mozmill/content/modules/frame.jsm&quot;);</span>
<a href="#l72.13"></a><span id="l72.13" class="difflineplus">+var frame = ChromeUtils.import(&quot;resource://testing-common/mozmill/frame.jsm&quot;);</span>
<a href="#l72.14"></a><span id="l72.14"> </span>
<a href="#l72.15"></a><span id="l72.15"> var ifJSONable = function(v) {</span>
<a href="#l72.16"></a><span id="l72.16">   if (typeof v == &quot;function&quot;) {</span>
<a href="#l72.17"></a><span id="l72.17">     return undefined;</span>
<a href="#l72.18"></a><span id="l72.18">   }</span>
<a href="#l72.19"></a><span id="l72.19">   return v;</span>
<a href="#l72.20"></a><span id="l72.20"> };</span>
<a href="#l72.21"></a><span id="l72.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l73.1"></a><span id="l73.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/modules/mozmill.jsm</span>
<a href="#l73.2"></a><span id="l73.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/modules/mozmill.jsm</span>
<a href="#l73.3"></a><span id="l73.3" class="difflineat">@@ -61,27 +61,28 @@ var EXPORTED_SYMBOLS = [</span>
<a href="#l73.4"></a><span id="l73.4">   &quot;isLinux&quot;,</span>
<a href="#l73.5"></a><span id="l73.5">   &quot;isWindows&quot;,</span>
<a href="#l73.6"></a><span id="l73.6">   &quot;appInfo&quot;,</span>
<a href="#l73.7"></a><span id="l73.7">   &quot;locale&quot;,</span>
<a href="#l73.8"></a><span id="l73.8"> ];</span>
<a href="#l73.9"></a><span id="l73.9"> </span>
<a href="#l73.10"></a><span id="l73.10"> const { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l73.11"></a><span id="l73.11"> </span>
<a href="#l73.12"></a><span id="l73.12" class="difflineplus">+ChromeUtils.import(&quot;resource://testing-common/mozmill/init.jsm&quot;);</span>
<a href="#l73.13"></a><span id="l73.13"> var controller = ChromeUtils.import(</span>
<a href="#l73.14"></a><span id="l73.14" class="difflineminus">-  &quot;chrome://mozmill/content/modules/controller.jsm&quot;</span>
<a href="#l73.15"></a><span id="l73.15" class="difflineplus">+  &quot;resource://testing-common/mozmill/controller.jsm&quot;</span>
<a href="#l73.16"></a><span id="l73.16"> );</span>
<a href="#l73.17"></a><span id="l73.17" class="difflineminus">-var events = ChromeUtils.import(&quot;chrome://mozmill/content/modules/events.jsm&quot;);</span>
<a href="#l73.18"></a><span id="l73.18" class="difflineminus">-var utils = ChromeUtils.import(&quot;chrome://mozmill/content/modules/utils.jsm&quot;);</span>
<a href="#l73.19"></a><span id="l73.19" class="difflineplus">+var events = ChromeUtils.import(&quot;resource://testing-common/mozmill/events.jsm&quot;);</span>
<a href="#l73.20"></a><span id="l73.20" class="difflineplus">+var utils = ChromeUtils.import(&quot;resource://testing-common/mozmill/utils.jsm&quot;);</span>
<a href="#l73.21"></a><span id="l73.21"> var elementslib = ChromeUtils.import(</span>
<a href="#l73.22"></a><span id="l73.22" class="difflineminus">-  &quot;chrome://mozmill/content/modules/elementslib.jsm&quot;</span>
<a href="#l73.23"></a><span id="l73.23" class="difflineplus">+  &quot;resource://testing-common/mozmill/elementslib.jsm&quot;</span>
<a href="#l73.24"></a><span id="l73.24"> );</span>
<a href="#l73.25"></a><span id="l73.25" class="difflineminus">-var frame = ChromeUtils.import(&quot;chrome://mozmill/content/modules/frame.jsm&quot;);</span>
<a href="#l73.26"></a><span id="l73.26" class="difflineplus">+var frame = ChromeUtils.import(&quot;resource://testing-common/mozmill/frame.jsm&quot;);</span>
<a href="#l73.27"></a><span id="l73.27"> </span>
<a href="#l73.28"></a><span id="l73.28" class="difflineminus">-var os = ChromeUtils.import(&quot;chrome://mozmill/content/stdlib/os.jsm&quot;);</span>
<a href="#l73.29"></a><span id="l73.29" class="difflineplus">+var os = ChromeUtils.import(&quot;resource://testing-common/mozmill/os.jsm&quot;);</span>
<a href="#l73.30"></a><span id="l73.30"> </span>
<a href="#l73.31"></a><span id="l73.31"> var platform = os.getPlatform();</span>
<a href="#l73.32"></a><span id="l73.32"> </span>
<a href="#l73.33"></a><span id="l73.33"> var isMac = false;</span>
<a href="#l73.34"></a><span id="l73.34"> var isWindows = false;</span>
<a href="#l73.35"></a><span id="l73.35"> var isLinux = false;</span>
<a href="#l73.36"></a><span id="l73.36"> </span>
<a href="#l73.37"></a><span id="l73.37"> if (platform == &quot;darwin&quot;) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l74.1"></a><span id="l74.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/overlay.js</span>
<a href="#l74.2"></a><span id="l74.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/overlay.js</span>
<a href="#l74.3"></a><span id="l74.3" class="difflineat">@@ -31,19 +31,17 @@</span>
<a href="#l74.4"></a><span id="l74.4">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l74.5"></a><span id="l74.5">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l74.6"></a><span id="l74.6">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l74.7"></a><span id="l74.7">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l74.8"></a><span id="l74.8">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l74.9"></a><span id="l74.9">  *</span>
<a href="#l74.10"></a><span id="l74.10">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l74.11"></a><span id="l74.11"> </span>
<a href="#l74.12"></a><span id="l74.12" class="difflineminus">-var mozmillInit = ChromeUtils.import(</span>
<a href="#l74.13"></a><span id="l74.13" class="difflineminus">-  &quot;chrome://mozmill/content/modules/init.jsm&quot;</span>
<a href="#l74.14"></a><span id="l74.14" class="difflineminus">-);</span>
<a href="#l74.15"></a><span id="l74.15" class="difflineplus">+ChromeUtils.import(&quot;resource://testing-common/mozmill/init.jsm&quot;);</span>
<a href="#l74.16"></a><span id="l74.16"> </span>
<a href="#l74.17"></a><span id="l74.17"> var MozMill = {</span>
<a href="#l74.18"></a><span id="l74.18">   onLoad() {</span>
<a href="#l74.19"></a><span id="l74.19">     this.initialized = true;</span>
<a href="#l74.20"></a><span id="l74.20">   },</span>
<a href="#l74.21"></a><span id="l74.21"> };</span>
<a href="#l74.22"></a><span id="l74.22"> </span>
<a href="#l74.23"></a><span id="l74.23"> window.addEventListener(&quot;load&quot;, function(e) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l75.1"></a><span id="l75.1" class="difflineminus">--- a/mail/test/resources/mozmill/setup.py</span>
<a href="#l75.2"></a><span id="l75.2" class="difflineplus">+++ b/mail/test/resources/mozmill/setup.py</span>
<a href="#l75.3"></a><span id="l75.3" class="difflineat">@@ -36,17 +36,17 @@</span>
<a href="#l75.4"></a><span id="l75.4"> # ***** END LICENSE BLOCK *****</span>
<a href="#l75.5"></a><span id="l75.5"> </span>
<a href="#l75.6"></a><span id="l75.6"> from setuptools import setup, find_packages</span>
<a href="#l75.7"></a><span id="l75.7"> </span>
<a href="#l75.8"></a><span id="l75.8"> desc = &quot;&quot;&quot;UI Automation tool for Mozilla applications.&quot;&quot;&quot;</span>
<a href="#l75.9"></a><span id="l75.9"> summ = &quot;&quot;&quot;A tool for full UI automation of Mozilla applications.&quot;&quot;&quot;</span>
<a href="#l75.10"></a><span id="l75.10"> </span>
<a href="#l75.11"></a><span id="l75.11"> PACKAGE_NAME = &quot;mozmill_thunderbird&quot;</span>
<a href="#l75.12"></a><span id="l75.12" class="difflineminus">-PACKAGE_VERSION = &quot;1.6.4&quot;</span>
<a href="#l75.13"></a><span id="l75.13" class="difflineplus">+PACKAGE_VERSION = &quot;1.7&quot;</span>
<a href="#l75.14"></a><span id="l75.14"> </span>
<a href="#l75.15"></a><span id="l75.15"> setup(name=PACKAGE_NAME,</span>
<a href="#l75.16"></a><span id="l75.16">       version=PACKAGE_VERSION,</span>
<a href="#l75.17"></a><span id="l75.17">       description=desc,</span>
<a href="#l75.18"></a><span id="l75.18">       long_description=summ,</span>
<a href="#l75.19"></a><span id="l75.19">       author='Mozilla, Mikeal Rogers',</span>
<a href="#l75.20"></a><span id="l75.20">       author_email='mikeal.rogers@gmail.com',</span>
<a href="#l75.21"></a><span id="l75.21">       url='http://github.com/mozautomation/mozmill',</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:33Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

