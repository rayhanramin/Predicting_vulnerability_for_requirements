<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 11922:af56cbb736574c1f9e2ce3234ab8193a79e9f2a0</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ af56cbb736574c1f9e2ce3234ab8193a79e9f2a0" />
<meta property="og:url" content="/comm-central/rev/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0" />
<meta property="og:description" content="Bug 533314 - Tests: Use only invalid mail addresses like foo@foo.invalid instead of foo@invalid.com. r=mbanner" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / af56cbb736574c1f9e2ce3234ab8193a79e9f2a0 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0">shortlog</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0">files</a> |
changeset |
<a href="/comm-central/raw-rev/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0">raw</a>  | <a href="/comm-central/archive/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=533314">Bug 533314</a> - Tests: Use only invalid mail addresses like foo@foo.invalid instead of foo@invalid.com. r=mbanner
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#83;&#101;&#98;&#97;&#115;&#116;&#105;&#97;&#110;&#32;&#72;&#101;&#110;&#103;&#115;&#116;&#32;&#60;&#97;&#114;&#99;&#104;&#97;&#101;&#111;&#112;&#116;&#101;&#114;&#121;&#120;&#64;&#99;&#111;&#111;&#108;&#101;&#45;&#102;&#105;&#108;&#101;&#115;&#46;&#100;&#101;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 28 Dec 2012 10:32:53 +0100</td></tr>

<tr>
 <td>changeset 11922</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0">af56cbb736574c1f9e2ce3234ab8193a79e9f2a0</a></td>
</tr>



<tr>
<td>parent 11921</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/46eff8f0474d89e529700ccf74f0195202723201">46eff8f0474d89e529700ccf74f0195202723201</a>
</td>
</tr>

<tr>
<td>child 11923</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/c52e29d0ff20f216261fe39f33e423c3f3381e89">c52e29d0ff20f216261fe39f33e423c3f3381e89</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=af56cbb736574c1f9e2ce3234ab8193a79e9f2a0">8876</a></td></tr>
<tr><td>push user</td><td>ryanvm@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Thu, 07 Feb 2013 20:39:52 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@af56cbb73657 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=af56cbb736574c1f9e2ce3234ab8193a79e9f2a0">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=af56cbb736574c1f9e2ce3234ab8193a79e9f2a0&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=af56cbb736574c1f9e2ce3234ab8193a79e9f2a0&newProject=comm-central&newRevision=af56cbb736574c1f9e2ce3234ab8193a79e9f2a0&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=af56cbb736574c1f9e2ce3234ab8193a79e9f2a0&newProject=comm-central&newRevision=af56cbb736574c1f9e2ce3234ab8193a79e9f2a0&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=af56cbb736574c1f9e2ce3234ab8193a79e9f2a0&newProject=comm-central&newRevision=af56cbb736574c1f9e2ce3234ab8193a79e9f2a0&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28mbanner%29&revcount=50">mbanner</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=533314">533314</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=533314">Bug 533314</a> - Tests: Use only invalid mail addresses like foo@foo.invalid instead of foo@invalid.com. r=mbanner</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/base/content/mailCommands.js">mail/base/content/mailCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/base/content/mailCommands.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/base/content/mailCommands.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/base/content/mailCommands.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/base/content/mailCommands.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/base/content/mailCommands.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/base/content/msgHdrViewOverlay.js">mail/base/content/msgHdrViewOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/base/content/msgHdrViewOverlay.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/base/content/msgHdrViewOverlay.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/base/content/msgHdrViewOverlay.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/base/content/msgHdrViewOverlay.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/base/content/msgHdrViewOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/account/test-account-actions.js">mail/test/mozmill/account/test-account-actions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/account/test-account-actions.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/account/test-account-actions.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/account/test-account-actions.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/account/test-account-actions.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/account/test-account-actions.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/addrbook/test-address-book.js">mail/test/mozmill/addrbook/test-address-book.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/addrbook/test-address-book.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/addrbook/test-address-book.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/addrbook/test-address-book.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/addrbook/test-address-book.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/addrbook/test-address-book.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/composition/test-forwarded-content.js">mail/test/mozmill/composition/test-forwarded-content.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/composition/test-forwarded-content.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/composition/test-forwarded-content.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/composition/test-forwarded-content.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/composition/test-forwarded-content.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/composition/test-forwarded-content.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/crypto/test-smime-mimemsg-representation.js">mail/test/mozmill/crypto/test-smime-mimemsg-representation.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/crypto/test-smime-mimemsg-representation.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/crypto/test-smime-mimemsg-representation.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/crypto/test-smime-mimemsg-representation.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/crypto/test-smime-mimemsg-representation.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/crypto/test-smime-mimemsg-representation.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-display/test-display-name.js">mail/test/mozmill/folder-display/test-display-name.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-display/test-display-name.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-display/test-display-name.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-display/test-display-name.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-display/test-display-name.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-display/test-display-name.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-display/test-folder-names-in-favorite-mode.js">mail/test/mozmill/folder-display/test-folder-names-in-favorite-mode.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-display/test-folder-names-in-favorite-mode.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-display/test-folder-names-in-favorite-mode.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-display/test-folder-names-in-favorite-mode.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-display/test-folder-names-in-favorite-mode.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-display/test-folder-names-in-favorite-mode.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-tree-modes/test-extension/chrome/content/overlay.js">mail/test/mozmill/folder-tree-modes/test-extension/chrome/content/overlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-tree-modes/test-extension/chrome/content/overlay.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-tree-modes/test-extension/chrome/content/overlay.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-tree-modes/test-extension/chrome/content/overlay.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-tree-modes/test-extension/chrome/content/overlay.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-tree-modes/test-extension/chrome/content/overlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-widget/test-message-filters.js">mail/test/mozmill/folder-widget/test-message-filters.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-widget/test-message-filters.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-widget/test-message-filters.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-widget/test-message-filters.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-widget/test-message-filters.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/folder-widget/test-message-filters.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/message-header/test-reply-to-list-from-address-selection.js">mail/test/mozmill/message-header/test-reply-to-list-from-address-selection.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/message-header/test-reply-to-list-from-address-selection.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/message-header/test-reply-to-list-from-address-selection.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/message-header/test-reply-to-list-from-address-selection.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/message-header/test-reply-to-list-from-address-selection.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/message-header/test-reply-to-list-from-address-selection.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/multiple-identities/test-display-names.js">mail/test/mozmill/multiple-identities/test-display-names.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/multiple-identities/test-display-names.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/multiple-identities/test-display-names.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/multiple-identities/test-display-names.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/multiple-identities/test-display-names.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/multiple-identities/test-display-names.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/html/badSuggestFromName">mail/test/mozmill/newmailaccount/html/badSuggestFromName</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/html/badSuggestFromName">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/html/badSuggestFromName">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/html/badSuggestFromName">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/html/badSuggestFromName">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/html/badSuggestFromName">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/html/registration.html">mail/test/mozmill/newmailaccount/html/registration.html</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/html/registration.html">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/html/registration.html">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/html/registration.html">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/html/registration.html">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/html/registration.html">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/html/suggestFromName">mail/test/mozmill/newmailaccount/html/suggestFromName</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/html/suggestFromName">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/html/suggestFromName">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/html/suggestFromName">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/html/suggestFromName">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/html/suggestFromName">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/test-newmailaccount.js">mail/test/mozmill/newmailaccount/test-newmailaccount.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/test-newmailaccount.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/test-newmailaccount.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/test-newmailaccount.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/test-newmailaccount.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/newmailaccount/test-newmailaccount.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/notification/test-notification.js">mail/test/mozmill/notification/test-notification.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/notification/test-notification.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/notification/test-notification.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/notification/test-notification.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/notification/test-notification.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/notification/test-notification.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/quick-filter-bar/test-filter-logic.js">mail/test/mozmill/quick-filter-bar/test-filter-logic.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/quick-filter-bar/test-filter-logic.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/quick-filter-bar/test-filter-logic.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/quick-filter-bar/test-filter-logic.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/quick-filter-bar/test-filter-logic.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/quick-filter-bar/test-filter-logic.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/runtest.py">mail/test/mozmill/runtest.py</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/runtest.py">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/runtest.py">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/runtest.py">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/runtest.py">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/runtest.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/shared-modules/test-address-book-helpers.js">mail/test/mozmill/shared-modules/test-address-book-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/shared-modules/test-address-book-helpers.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/shared-modules/test-address-book-helpers.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/shared-modules/test-address-book-helpers.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/shared-modules/test-address-book-helpers.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/shared-modules/test-address-book-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/shared-modules/test-nntp-helpers.js">mail/test/mozmill/shared-modules/test-nntp-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/shared-modules/test-nntp-helpers.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/shared-modules/test-nntp-helpers.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/shared-modules/test-nntp-helpers.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/shared-modules/test-nntp-helpers.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mail/test/mozmill/shared-modules/test-nntp-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/data/autocomplete.mab">mailnews/addrbook/test/unit/data/autocomplete.mab</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/data/autocomplete.mab">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/data/autocomplete.mab">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/data/autocomplete.mab">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/data/autocomplete.mab">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/data/autocomplete.mab">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/data/cardForEmail.mab">mailnews/addrbook/test/unit/data/cardForEmail.mab</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/data/cardForEmail.mab">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/data/cardForEmail.mab">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/data/cardForEmail.mab">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/data/cardForEmail.mab">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/data/cardForEmail.mab">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_basic_nsIAbCard.js">mailnews/addrbook/test/unit/test_basic_nsIAbCard.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_basic_nsIAbCard.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_basic_nsIAbCard.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_basic_nsIAbCard.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_basic_nsIAbCard.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_basic_nsIAbCard.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_collection.js">mailnews/addrbook/test/unit/test_collection.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_collection.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_collection.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_collection.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_collection.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_collection.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_db_enumerator.js">mailnews/addrbook/test/unit/test_db_enumerator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_db_enumerator.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_db_enumerator.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_db_enumerator.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_db_enumerator.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_db_enumerator.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_notifications.js">mailnews/addrbook/test/unit/test_notifications.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_notifications.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_notifications.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_notifications.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_notifications.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_notifications.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteMyDomain.js">mailnews/addrbook/test/unit/test_nsAbAutoCompleteMyDomain.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteMyDomain.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteMyDomain.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteMyDomain.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteMyDomain.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteMyDomain.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch1.js">mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch1.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch1.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch1.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch1.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch1.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch1.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch2.js">mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch2.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch2.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch2.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch2.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch2.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch2.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch3.js">mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch3.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch3.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch3.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch3.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch3.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch3.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/prefs/content/ispUtils.js">mailnews/base/prefs/content/ispUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/prefs/content/ispUtils.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/prefs/content/ispUtils.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/prefs/content/ispUtils.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/prefs/content/ispUtils.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/prefs/content/ispUtils.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/test/unit/test_bug404489.js">mailnews/base/test/unit/test_bug404489.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/test/unit/test_bug404489.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/test/unit/test_bug404489.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/test/unit/test_bug404489.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/test/unit/test_bug404489.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/test/unit/test_bug404489.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/test/unit/test_junkWhitelisting.js">mailnews/base/test/unit/test_junkWhitelisting.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/test/unit/test_junkWhitelisting.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/test/unit/test_junkWhitelisting.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/test/unit/test_junkWhitelisting.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/test/unit/test_junkWhitelisting.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/test/unit/test_junkWhitelisting.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/test/unit/test_viewSortByAddresses.js">mailnews/base/test/unit/test_viewSortByAddresses.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/test/unit/test_viewSortByAddresses.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/test/unit/test_viewSortByAddresses.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/test/unit/test_viewSortByAddresses.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/test/unit/test_viewSortByAddresses.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/base/test/unit/test_viewSortByAddresses.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/data/429891_testcase.eml">mailnews/compose/test/unit/data/429891_testcase.eml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/data/429891_testcase.eml">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/data/429891_testcase.eml">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/data/429891_testcase.eml">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/data/429891_testcase.eml">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/data/429891_testcase.eml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/data/message1.eml">mailnews/compose/test/unit/data/message1.eml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/data/message1.eml">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/data/message1.eml">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/data/message1.eml">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/data/message1.eml">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/data/message1.eml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_bug155172.js">mailnews/compose/test/unit/test_bug155172.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_bug155172.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_bug155172.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_bug155172.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_bug155172.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_bug155172.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_bug235432.js">mailnews/compose/test/unit/test_bug235432.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_bug235432.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_bug235432.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_bug235432.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_bug235432.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_bug235432.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_bug474774.js">mailnews/compose/test/unit/test_bug474774.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_bug474774.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_bug474774.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_bug474774.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_bug474774.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_bug474774.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_nsMsgCompose1.js">mailnews/compose/test/unit/test_nsMsgCompose1.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_nsMsgCompose1.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_nsMsgCompose1.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_nsMsgCompose1.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_nsMsgCompose1.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_nsMsgCompose1.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendBackground.js">mailnews/compose/test/unit/test_sendBackground.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendBackground.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendBackground.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendBackground.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendBackground.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendBackground.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMailAddressIDN.js">mailnews/compose/test/unit/test_sendMailAddressIDN.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMailAddressIDN.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMailAddressIDN.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMailAddressIDN.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMailAddressIDN.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMailAddressIDN.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMailMessage.js">mailnews/compose/test/unit/test_sendMailMessage.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMailMessage.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMailMessage.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMailMessage.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMailMessage.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMailMessage.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageFile.js">mailnews/compose/test/unit/test_sendMessageFile.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageFile.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageFile.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageFile.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageFile.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageFile.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageLater.js">mailnews/compose/test/unit/test_sendMessageLater.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageLater.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageLater.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageLater.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageLater.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageLater.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageLater2.js">mailnews/compose/test/unit/test_sendMessageLater2.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageLater2.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageLater2.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageLater2.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageLater2.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageLater2.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageLater3.js">mailnews/compose/test/unit/test_sendMessageLater3.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageLater3.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageLater3.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageLater3.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageLater3.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_sendMessageLater3.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpAuthMethods.js">mailnews/compose/test/unit/test_smtpAuthMethods.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpAuthMethods.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpAuthMethods.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpAuthMethods.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpAuthMethods.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpAuthMethods.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPassword.js">mailnews/compose/test/unit/test_smtpPassword.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPassword.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPassword.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPassword.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPassword.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPassword.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPasswordFailure1.js">mailnews/compose/test/unit/test_smtpPasswordFailure1.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPasswordFailure1.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPasswordFailure1.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPasswordFailure1.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPasswordFailure1.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPasswordFailure1.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPasswordFailure2.js">mailnews/compose/test/unit/test_smtpPasswordFailure2.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPasswordFailure2.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPasswordFailure2.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPasswordFailure2.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPasswordFailure2.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPasswordFailure2.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPasswordFailure3.js">mailnews/compose/test/unit/test_smtpPasswordFailure3.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPasswordFailure3.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPasswordFailure3.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPasswordFailure3.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPasswordFailure3.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/compose/test/unit/test_smtpPasswordFailure3.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/modules/datastore.js">mailnews/db/gloda/modules/datastore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/modules/datastore.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/modules/datastore.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/modules/datastore.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/modules/datastore.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/modules/datastore.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/modules/gloda.js">mailnews/db/gloda/modules/gloda.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/modules/gloda.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/modules/gloda.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/modules/gloda.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/modules/gloda.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/modules/gloda.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/modules/utils.js">mailnews/db/gloda/modules/utils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/modules/utils.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/modules/utils.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/modules/utils.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/modules/utils.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/modules/utils.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/base_gloda_content.js">mailnews/db/gloda/test/unit/base_gloda_content.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/base_gloda_content.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/base_gloda_content.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/base_gloda_content.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/base_gloda_content.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/base_gloda_content.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/test_index_addressbook.js">mailnews/db/gloda/test/unit/test_index_addressbook.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/test_index_addressbook.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/test_index_addressbook.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/test_index_addressbook.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/test_index_addressbook.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/test_index_addressbook.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/test_mime_attachments_size.js">mailnews/db/gloda/test/unit/test_mime_attachments_size.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/test_mime_attachments_size.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/test_mime_attachments_size.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/test_mime_attachments_size.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/test_mime_attachments_size.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/test_mime_attachments_size.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/test_mime_emitter.js">mailnews/db/gloda/test/unit/test_mime_emitter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/test_mime_emitter.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/test_mime_emitter.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/test_mime_emitter.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/test_mime_emitter.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/db/gloda/test/unit/test_mime_emitter.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/extensions/mdn/test/unit/test_askuser.js">mailnews/extensions/mdn/test/unit/test_askuser.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/extensions/mdn/test/unit/test_askuser.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/extensions/mdn/test/unit/test_askuser.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/extensions/mdn/test/unit/test_askuser.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/extensions/mdn/test/unit/test_askuser.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/extensions/mdn/test/unit/test_askuser.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/extensions/mdn/test/unit/test_mdnFlags.js">mailnews/extensions/mdn/test/unit/test_mdnFlags.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/extensions/mdn/test/unit/test_mdnFlags.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/extensions/mdn/test/unit/test_mdnFlags.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/extensions/mdn/test/unit/test_mdnFlags.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/extensions/mdn/test/unit/test_mdnFlags.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/extensions/mdn/test/unit/test_mdnFlags.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">mailnews/imap/test/unit/test_imapStoreMsgOffline.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/imap/test/unit/test_offlineCopy.js">mailnews/imap/test/unit/test_offlineCopy.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/imap/test/unit/test_offlineCopy.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/imap/test/unit/test_offlineCopy.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/imap/test/unit/test_offlineCopy.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/imap/test/unit/test_offlineCopy.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/imap/test/unit/test_offlineCopy.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/eudora/src/nsEudoraCompose.cpp">mailnews/import/eudora/src/nsEudoraCompose.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/eudora/src/nsEudoraCompose.cpp">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/eudora/src/nsEudoraCompose.cpp">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/eudora/src/nsEudoraCompose.cpp">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/eudora/src/nsEudoraCompose.cpp">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/eudora/src/nsEudoraCompose.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/oexpress/nsOE5File.cpp">mailnews/import/oexpress/nsOE5File.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/oexpress/nsOE5File.cpp">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/oexpress/nsOE5File.cpp">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/oexpress/nsOE5File.cpp">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/oexpress/nsOE5File.cpp">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/oexpress/nsOE5File.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/outlook/src/nsOutlookCompose.cpp">mailnews/import/outlook/src/nsOutlookCompose.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/outlook/src/nsOutlookCompose.cpp">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/outlook/src/nsOutlookCompose.cpp">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/outlook/src/nsOutlookCompose.cpp">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/outlook/src/nsOutlookCompose.cpp">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/outlook/src/nsOutlookCompose.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/WindowsLiveMail/MicrosoftCommunities/account%7B2E23%7D.oeaccount">mailnews/import/test/unit/resources/WindowsLiveMail/MicrosoftCommunities/account{2E23}.oeaccount</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/WindowsLiveMail/MicrosoftCommunities/account%7B2E23%7D.oeaccount">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/WindowsLiveMail/MicrosoftCommunities/account%7B2E23%7D.oeaccount">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/WindowsLiveMail/MicrosoftCommunities/account%7B2E23%7D.oeaccount">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/WindowsLiveMail/MicrosoftCommunities/account%7B2E23%7D.oeaccount">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/WindowsLiveMail/MicrosoftCommunities/account%7B2E23%7D.oeaccount">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/WindowsLiveMail/donhallimap/donhallimap%7Btestimap%7D.oeaccount">mailnews/import/test/unit/resources/WindowsLiveMail/donhallimap/donhallimap{testimap}.oeaccount</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/WindowsLiveMail/donhallimap/donhallimap%7Btestimap%7D.oeaccount">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/WindowsLiveMail/donhallimap/donhallimap%7Btestimap%7D.oeaccount">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/WindowsLiveMail/donhallimap/donhallimap%7Btestimap%7D.oeaccount">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/WindowsLiveMail/donhallimap/donhallimap%7Btestimap%7D.oeaccount">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/WindowsLiveMail/donhallimap/donhallimap%7Btestimap%7D.oeaccount">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/WindowsLiveMail/donhallnntp/donhallnntp%7Btestnntp%7D.oeaccount">mailnews/import/test/unit/resources/WindowsLiveMail/donhallnntp/donhallnntp{testnntp}.oeaccount</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/WindowsLiveMail/donhallnntp/donhallnntp%7Btestnntp%7D.oeaccount">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/WindowsLiveMail/donhallnntp/donhallnntp%7Btestnntp%7D.oeaccount">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/WindowsLiveMail/donhallnntp/donhallnntp%7Btestnntp%7D.oeaccount">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/WindowsLiveMail/donhallnntp/donhallnntp%7Btestnntp%7D.oeaccount">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/WindowsLiveMail/donhallnntp/donhallnntp%7Btestnntp%7D.oeaccount">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/addressbook.json">mailnews/import/test/unit/resources/addressbook.json</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/addressbook.json">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/addressbook.json">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/addressbook.json">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/addressbook.json">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/addressbook.json">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/basic_vcard_addressbook.vcf">mailnews/import/test/unit/resources/basic_vcard_addressbook.vcf</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/basic_vcard_addressbook.vcf">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/basic_vcard_addressbook.vcf">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/basic_vcard_addressbook.vcf">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/basic_vcard_addressbook.vcf">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/basic_vcard_addressbook.vcf">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/emptylines_vcard_addressbook.vcf">mailnews/import/test/unit/resources/emptylines_vcard_addressbook.vcf</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/emptylines_vcard_addressbook.vcf">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/emptylines_vcard_addressbook.vcf">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/emptylines_vcard_addressbook.vcf">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/emptylines_vcard_addressbook.vcf">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/resources/emptylines_vcard_addressbook.vcf">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/test_winmail.js">mailnews/import/test/unit/test_winmail.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/test_winmail.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/test_winmail.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/test_winmail.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/test_winmail.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/import/test/unit/test_winmail.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/local/src/nsPop3Protocol.cpp">mailnews/local/src/nsPop3Protocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/local/src/nsPop3Protocol.cpp">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/local/src/nsPop3Protocol.cpp">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/local/src/nsPop3Protocol.cpp">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/local/src/nsPop3Protocol.cpp">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/local/src/nsPop3Protocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/local/test/unit/data/movemailspool">mailnews/local/test/unit/data/movemailspool</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/local/test/unit/data/movemailspool">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/local/test/unit/data/movemailspool">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/local/test/unit/data/movemailspool">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/local/test/unit/data/movemailspool">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/local/test/unit/data/movemailspool">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/local/test/unit/test_msgIDParsing.js">mailnews/local/test/unit/test_msgIDParsing.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/local/test/unit/test_msgIDParsing.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/local/test/unit/test_msgIDParsing.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/local/test/unit/test_msgIDParsing.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/local/test/unit/test_msgIDParsing.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/local/test/unit/test_msgIDParsing.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_EncodeMimePartIIStr_UTF8.js">mailnews/mime/test/unit/test_EncodeMimePartIIStr_UTF8.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_EncodeMimePartIIStr_UTF8.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_EncodeMimePartIIStr_UTF8.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_EncodeMimePartIIStr_UTF8.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_EncodeMimePartIIStr_UTF8.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_EncodeMimePartIIStr_UTF8.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_nsIMsgHeaderParser1.js">mailnews/mime/test/unit/test_nsIMsgHeaderParser1.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_nsIMsgHeaderParser1.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_nsIMsgHeaderParser1.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_nsIMsgHeaderParser1.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_nsIMsgHeaderParser1.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_nsIMsgHeaderParser1.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_nsIMsgHeaderParser2.js">mailnews/mime/test/unit/test_nsIMsgHeaderParser2.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_nsIMsgHeaderParser2.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_nsIMsgHeaderParser2.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_nsIMsgHeaderParser2.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_nsIMsgHeaderParser2.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_nsIMsgHeaderParser2.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_nsIMsgHeaderParser3.js">mailnews/mime/test/unit/test_nsIMsgHeaderParser3.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_nsIMsgHeaderParser3.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_nsIMsgHeaderParser3.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_nsIMsgHeaderParser3.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_nsIMsgHeaderParser3.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/mime/test/unit/test_nsIMsgHeaderParser3.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/news/test/unit/head_server_setup.js">mailnews/news/test/unit/head_server_setup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/news/test/unit/head_server_setup.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/news/test/unit/head_server_setup.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/news/test/unit/head_server_setup.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/news/test/unit/head_server_setup.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/news/test/unit/head_server_setup.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/news/test/unit/test_internalUris.js">mailnews/news/test/unit/test_internalUris.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/news/test/unit/test_internalUris.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/news/test/unit/test_internalUris.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/news/test/unit/test_internalUris.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/news/test/unit/test_internalUris.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/news/test/unit/test_internalUris.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/news/test/unit/test_server.js">mailnews/news/test/unit/test_server.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/news/test/unit/test_server.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/news/test/unit/test_server.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/news/test/unit/test_server.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/news/test/unit/test_server.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/news/test/unit/test_server.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/abLists1.mab">mailnews/test/data/abLists1.mab</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/abLists1.mab">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/abLists1.mab">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/abLists1.mab">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/abLists1.mab">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/abLists1.mab">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/bug460636">mailnews/test/data/bug460636</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/bug460636">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/bug460636">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/bug460636">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/bug460636">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/bug460636">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/bug505221">mailnews/test/data/bug505221</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/bug505221">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/bug505221">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/bug505221">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/bug505221">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/bug505221">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/bugmail19">mailnews/test/data/bugmail19</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/bugmail19">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/bugmail19">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/bugmail19">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/bugmail19">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/bugmail19">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/external-attach-test">mailnews/test/data/external-attach-test</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/external-attach-test">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/external-attach-test">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/external-attach-test">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/external-attach-test">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/external-attach-test">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/image-attach-test">mailnews/test/data/image-attach-test</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/image-attach-test">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/image-attach-test">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/image-attach-test">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/image-attach-test">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/data/image-attach-test">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/performance/bloat/mailnewsTestPrefs.js">mailnews/test/performance/bloat/mailnewsTestPrefs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/performance/bloat/mailnewsTestPrefs.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/performance/bloat/mailnewsTestPrefs.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/performance/bloat/mailnewsTestPrefs.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/performance/bloat/mailnewsTestPrefs.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/performance/bloat/mailnewsTestPrefs.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/resources/messageInjection.js">mailnews/test/resources/messageInjection.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/resources/messageInjection.js">file</a> |
<a href="/comm-central/annotate/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/resources/messageInjection.js">annotate</a> |
<a href="/comm-central/diff/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/resources/messageInjection.js">diff</a> |
<a href="/comm-central/comparison/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/resources/messageInjection.js">comparison</a> |
<a href="/comm-central/log/af56cbb736574c1f9e2ce3234ab8193a79e9f2a0/mailnews/test/resources/messageInjection.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/base/content/mailCommands.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/base/content/mailCommands.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -126,18 +126,18 @@ function GetNextNMessages(folder)</span>
<a href="#l1.4"></a><span id="l1.4"> </span>
<a href="#l1.5"></a><span id="l1.5"> /**</span>
<a href="#l1.6"></a><span id="l1.6">  * Figure out the message key from the message uri.</span>
<a href="#l1.7"></a><span id="l1.7">  * @param uri string defining internal storage</span>
<a href="#l1.8"></a><span id="l1.8">  */</span>
<a href="#l1.9"></a><span id="l1.9"> function GetMsgKeyFromURI(uri) {</span>
<a href="#l1.10"></a><span id="l1.10">   // Format of 'uri' : protocol://email/folder#key?params</span>
<a href="#l1.11"></a><span id="l1.11">   //                   '?params' are optional</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-  //   ex : mailbox-message://john%2Edoe@pop.isp.com/Drafts#123456?fetchCompleteMessage=true</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineminus">-  //   ex : mailbox-message://john%2Edoe@pop.isp.com/Drafts#12345</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+  //   ex : mailbox-message://john%2Edoe@pop.isp.invalid/Drafts#123456?fetchCompleteMessage=true</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+  //   ex : mailbox-message://john%2Edoe@pop.isp.invalid/Drafts#12345</span>
<a href="#l1.16"></a><span id="l1.16">   // We keep only the part after '#' and before an optional '?'.</span>
<a href="#l1.17"></a><span id="l1.17">   // The regexp expects 'key' to be an integer (a serie of digits) : '\d+'.</span>
<a href="#l1.18"></a><span id="l1.18">   let match = /.+#(\d+)/.exec(uri);</span>
<a href="#l1.19"></a><span id="l1.19">   return (match) ? match[1] : null;</span>
<a href="#l1.20"></a><span id="l1.20"> }</span>
<a href="#l1.21"></a><span id="l1.21"> </span>
<a href="#l1.22"></a><span id="l1.22"> // type is a nsIMsgCompType and format is a nsIMsgCompFormat</span>
<a href="#l1.23"></a><span id="l1.23"> function ComposeMessage(type, format, folder, messageArray)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/base/content/msgHdrViewOverlay.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/base/content/msgHdrViewOverlay.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -102,17 +102,17 @@ const gEmailAddressHeaderNames = [&quot;from&quot;</span>
<a href="#l2.4"></a><span id="l2.4"> var gExpandedHeaderView  = {};</span>
<a href="#l2.5"></a><span id="l2.5"> </span>
<a href="#l2.6"></a><span id="l2.6"> /**</span>
<a href="#l2.7"></a><span id="l2.7">  * This is an array of header name and value pairs for the currently displayed</span>
<a href="#l2.8"></a><span id="l2.8">  * message. It's purely a data object and has no view information. View</span>
<a href="#l2.9"></a><span id="l2.9">  * information is contained in the view objects.</span>
<a href="#l2.10"></a><span id="l2.10">  * For a given entry in this array you can ask for:</span>
<a href="#l2.11"></a><span id="l2.11">  * .headerName   name of the header (i.e. 'to'). Always stored in lower case</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">- * .headerValue  value of the header &quot;johndoe@netscape.net&quot;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+ * .headerValue  value of the header &quot;johndoe@example.com&quot;</span>
<a href="#l2.14"></a><span id="l2.14">  */</span>
<a href="#l2.15"></a><span id="l2.15"> var currentHeaderData = {};</span>
<a href="#l2.16"></a><span id="l2.16"> </span>
<a href="#l2.17"></a><span id="l2.17"> /**</span>
<a href="#l2.18"></a><span id="l2.18">  * CurrentAttachments is an array of AttachmentInfo objects.</span>
<a href="#l2.19"></a><span id="l2.19">  */</span>
<a href="#l2.20"></a><span id="l2.20"> var currentAttachments = new Array();</span>
<a href="#l2.21"></a><span id="l2.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/test/mozmill/account/test-account-actions.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/test/mozmill/account/test-account-actions.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -30,17 +30,17 @@ function setupModule(module) {</span>
<a href="#l3.4"></a><span id="l3.4">   identity.email = &quot;tinderbox@example.com&quot;;</span>
<a href="#l3.5"></a><span id="l3.5"> </span>
<a href="#l3.6"></a><span id="l3.6">   imapAccount = MailServices.accounts.createAccount();</span>
<a href="#l3.7"></a><span id="l3.7">   imapAccount.incomingServer = imapServer;</span>
<a href="#l3.8"></a><span id="l3.8">   imapAccount.addIdentity(identity);</span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10">   // Create a NNTP server</span>
<a href="#l3.11"></a><span id="l3.11">   let nntpServer = MailServices.accounts</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-    .createIncomingServer(null, &quot;example.nntp.com&quot;, &quot;nntp&quot;)</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+    .createIncomingServer(null, &quot;example.nntp.invalid&quot;, &quot;nntp&quot;)</span>
<a href="#l3.14"></a><span id="l3.14">     .QueryInterface(Components.interfaces.nsINntpIncomingServer);</span>
<a href="#l3.15"></a><span id="l3.15"> </span>
<a href="#l3.16"></a><span id="l3.16">   identity = MailServices.accounts.createIdentity();</span>
<a href="#l3.17"></a><span id="l3.17">   identity.email = &quot;tinderbox2@example.com&quot;;</span>
<a href="#l3.18"></a><span id="l3.18"> </span>
<a href="#l3.19"></a><span id="l3.19">   nntpAccount = MailServices.accounts.createAccount();</span>
<a href="#l3.20"></a><span id="l3.20">   nntpAccount.incomingServer = nntpServer;</span>
<a href="#l3.21"></a><span id="l3.21">   nntpAccount.addIdentity(identity);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/test/mozmill/addrbook/test-address-book.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/test/mozmill/addrbook/test-address-book.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -147,17 +147,17 @@ function test_persist_collapsed_and_expa</span>
<a href="#l4.4"></a><span id="l4.4">  * a confirm prompt.</span>
<a href="#l4.5"></a><span id="l4.5">  */</span>
<a href="#l4.6"></a><span id="l4.6"> function test_deleting_contact_causes_confirm_prompt()</span>
<a href="#l4.7"></a><span id="l4.7"> {</span>
<a href="#l4.8"></a><span id="l4.8">   // Register the Mock Prompt Service</span>
<a href="#l4.9"></a><span id="l4.9">   gMockPromptService.register();</span>
<a href="#l4.10"></a><span id="l4.10"> </span>
<a href="#l4.11"></a><span id="l4.11">   // Create a contact that we'll try to delete</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-  let contact1 = create_contact(&quot;test@nobody.com&quot;, &quot;Sammy Jenkis&quot;, true);</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+  let contact1 = create_contact(&quot;test@example.com&quot;, &quot;Sammy Jenkis&quot;, true);</span>
<a href="#l4.14"></a><span id="l4.14">   let toDelete = [contact1];</span>
<a href="#l4.15"></a><span id="l4.15"> </span>
<a href="#l4.16"></a><span id="l4.16">   let bundle = Services.strings</span>
<a href="#l4.17"></a><span id="l4.17">                        .createBundle(&quot;chrome://messenger/locale/addressbook/addressBook.properties&quot;)</span>
<a href="#l4.18"></a><span id="l4.18">   let confirmSingle = bundle.GetStringFromName(&quot;confirmDeleteContact&quot;);</span>
<a href="#l4.19"></a><span id="l4.19">   // Add some contacts to the address book</span>
<a href="#l4.20"></a><span id="l4.20">   load_contacts_into_address_book(addrBook1, toDelete);</span>
<a href="#l4.21"></a><span id="l4.21">   select_address_book(addrBook1);</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineat">@@ -206,19 +206,19 @@ function test_deleting_contact_causes_co</span>
<a href="#l4.23"></a><span id="l4.23">  * a confirm prompt.</span>
<a href="#l4.24"></a><span id="l4.24">  */</span>
<a href="#l4.25"></a><span id="l4.25"> function test_deleting_contacts_causes_confirm_prompt()</span>
<a href="#l4.26"></a><span id="l4.26"> {</span>
<a href="#l4.27"></a><span id="l4.27">   // Register the Mock Prompt Service</span>
<a href="#l4.28"></a><span id="l4.28">   gMockPromptService.register();</span>
<a href="#l4.29"></a><span id="l4.29"> </span>
<a href="#l4.30"></a><span id="l4.30">   // Create some contacts that we'll try to delete.</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">-  let contact2 = create_contact(&quot;test2@nobody.com&quot;, &quot;Leonard Shelby&quot;, true);</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineminus">-  let contact3 = create_contact(&quot;test3@nobody.com&quot;, &quot;John Edward Gammell&quot;, true);</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineminus">-  let contact4 = create_contact(&quot;test4@nobody.com&quot;, &quot;Natalie&quot;, true);</span>
<a href="#l4.34"></a><span id="l4.34" class="difflineplus">+  let contact2 = create_contact(&quot;test2@example.com&quot;, &quot;Leonard Shelby&quot;, true);</span>
<a href="#l4.35"></a><span id="l4.35" class="difflineplus">+  let contact3 = create_contact(&quot;test3@example.com&quot;, &quot;John Edward Gammell&quot;, true);</span>
<a href="#l4.36"></a><span id="l4.36" class="difflineplus">+  let contact4 = create_contact(&quot;test4@example.com&quot;, &quot;Natalie&quot;, true);</span>
<a href="#l4.37"></a><span id="l4.37"> </span>
<a href="#l4.38"></a><span id="l4.38">   let toDelete = [contact2, contact3, contact4];</span>
<a href="#l4.39"></a><span id="l4.39"> </span>
<a href="#l4.40"></a><span id="l4.40">   let bundle = Services.strings</span>
<a href="#l4.41"></a><span id="l4.41">                        .createBundle(&quot;chrome://messenger/locale/addressbook/addressBook.properties&quot;)</span>
<a href="#l4.42"></a><span id="l4.42">   let confirmMultiple = bundle.GetStringFromName(&quot;confirmDeleteContacts&quot;);</span>
<a href="#l4.43"></a><span id="l4.43"> </span>
<a href="#l4.44"></a><span id="l4.44">   // Add some contacts to the address book</span>
<a href="#l4.45"></a><span id="l4.45" class="difflineat">@@ -322,20 +322,20 @@ function test_writing_to_mailing_list() </span>
<a href="#l4.46"></a><span id="l4.46"> </span>
<a href="#l4.47"></a><span id="l4.47">   // Create a new mailing list, and add it to one of our</span>
<a href="#l4.48"></a><span id="l4.48">   // address books</span>
<a href="#l4.49"></a><span id="l4.49">   let newList = create_mailing_list(&quot;Some Mailing List&quot;);</span>
<a href="#l4.50"></a><span id="l4.50">   let addedList = addrBook1.addMailList(newList);</span>
<a href="#l4.51"></a><span id="l4.51">   let mlURI = addedList.URI;</span>
<a href="#l4.52"></a><span id="l4.52"> </span>
<a href="#l4.53"></a><span id="l4.53">   // Create some contacts that we'll try to contact</span>
<a href="#l4.54"></a><span id="l4.54" class="difflineminus">-  let contacts = [create_contact(&quot;test2@nobody.com&quot;, &quot;Leonard Shelby&quot;, true),</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineminus">-                  create_contact(&quot;test3@nobody.com&quot;, &quot;John Edward Gammell&quot;,</span>
<a href="#l4.56"></a><span id="l4.56" class="difflineplus">+  let contacts = [create_contact(&quot;test2@example.com&quot;, &quot;Leonard Shelby&quot;, true),</span>
<a href="#l4.57"></a><span id="l4.57" class="difflineplus">+                  create_contact(&quot;test3@example.com&quot;, &quot;John Edward Gammell&quot;,</span>
<a href="#l4.58"></a><span id="l4.58">                                  true),</span>
<a href="#l4.59"></a><span id="l4.59" class="difflineminus">-                  create_contact(&quot;test4@nobody.com&quot;, &quot;Natalie&quot;, true),];</span>
<a href="#l4.60"></a><span id="l4.60" class="difflineplus">+                  create_contact(&quot;test4@example.com&quot;, &quot;Natalie&quot;, true),];</span>
<a href="#l4.61"></a><span id="l4.61"> </span>
<a href="#l4.62"></a><span id="l4.62">   load_contacts_into_mailing_list(addedList, contacts);</span>
<a href="#l4.63"></a><span id="l4.63"> </span>
<a href="#l4.64"></a><span id="l4.64">   // Ensure that addrBook1 is expanded</span>
<a href="#l4.65"></a><span id="l4.65">   set_address_book_expanded(addrBook1);</span>
<a href="#l4.66"></a><span id="l4.66"> </span>
<a href="#l4.67"></a><span id="l4.67">   // Now select the mailing list in the tree...</span>
<a href="#l4.68"></a><span id="l4.68">   select_address_book(addedList);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/test/mozmill/composition/test-forwarded-content.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/test/mozmill/composition/test-forwarded-content.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -26,17 +26,17 @@ var setupModule = function(module) {</span>
<a href="#l5.4"></a><span id="l5.4">   folderHelper.installInto(module);</span>
<a href="#l5.5"></a><span id="l5.5">   windowHelper = collector.getModule(&quot;window-helpers&quot;);</span>
<a href="#l5.6"></a><span id="l5.6">   windowHelper.installInto(module);</span>
<a href="#l5.7"></a><span id="l5.7">   composeHelper = collector.getModule(&quot;compose-helpers&quot;);</span>
<a href="#l5.8"></a><span id="l5.8">   composeHelper.installInto(module);</span>
<a href="#l5.9"></a><span id="l5.9"> </span>
<a href="#l5.10"></a><span id="l5.10">   folder = folderHelper.create_folder(&quot;Forward Content Testing&quot;);</span>
<a href="#l5.11"></a><span id="l5.11">   add_message_to_folder(folder, create_message({</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-    subject: &quot;something like &lt;foo@bar&gt;&quot;,</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+    subject: &quot;something like &lt;foo@example&gt;&quot;,</span>
<a href="#l5.14"></a><span id="l5.14">     body: {body: &quot;Testing bug 397021!&quot;},</span>
<a href="#l5.15"></a><span id="l5.15">   }));</span>
<a href="#l5.16"></a><span id="l5.16"> }</span>
<a href="#l5.17"></a><span id="l5.17"> </span>
<a href="#l5.18"></a><span id="l5.18"> /**</span>
<a href="#l5.19"></a><span id="l5.19">  * Test that the subject is set properly in the forwarded message content</span>
<a href="#l5.20"></a><span id="l5.20">  * when you hit forward.</span>
<a href="#l5.21"></a><span id="l5.21">  */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/test/mozmill/crypto/test-smime-mimemsg-representation.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/test/mozmill/crypto/test-smime-mimemsg-representation.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -17,18 +17,18 @@ function setupModule(module) {</span>
<a href="#l6.4"></a><span id="l6.4">   let fdh = collector.getModule(&quot;folder-display-helpers&quot;);</span>
<a href="#l6.5"></a><span id="l6.5">   fdh.installInto(module);</span>
<a href="#l6.6"></a><span id="l6.6">   let mh = collector.getModule(&quot;message-helpers&quot;);</span>
<a href="#l6.7"></a><span id="l6.7">   mh.installInto(module);</span>
<a href="#l6.8"></a><span id="l6.8"> </span>
<a href="#l6.9"></a><span id="l6.9">   folder = create_folder(&quot;SMIME_A&quot;);</span>
<a href="#l6.10"></a><span id="l6.10"> </span>
<a href="#l6.11"></a><span id="l6.11">   let msg = create_encrypted_smime_message({</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-    from: [&quot;Tinderbox&quot;, &quot;tinderbox@invalid.com&quot;],</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-    to: [[&quot;Tinderbox&quot;, &quot;tinderbox@invalid.com&quot;]],</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+    from: [&quot;Tinderbox&quot;, &quot;tinderbox@foo.invalid&quot;],</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+    to: [[&quot;Tinderbox&quot;, &quot;tinderbox@foo.invalid&quot;]],</span>
<a href="#l6.16"></a><span id="l6.16">     subject: &quot;Albertine disparue (La Fugitive)&quot;,</span>
<a href="#l6.17"></a><span id="l6.17">     body: { body: encrypted_blurb },</span>
<a href="#l6.18"></a><span id="l6.18">   });</span>
<a href="#l6.19"></a><span id="l6.19">   add_message_to_folder(folder, msg);</span>
<a href="#l6.20"></a><span id="l6.20"> }</span>
<a href="#l6.21"></a><span id="l6.21"> </span>
<a href="#l6.22"></a><span id="l6.22"> function test_smime_mimemsg() {</span>
<a href="#l6.23"></a><span id="l6.23">   be_in_folder(folder);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/test/mozmill/folder-display/test-display-name.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/test/mozmill/folder-display/test-display-name.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -15,23 +15,23 @@ var folder;</span>
<a href="#l7.4"></a><span id="l7.4"> </span>
<a href="#l7.5"></a><span id="l7.5"> function setupModule(module) {</span>
<a href="#l7.6"></a><span id="l7.6">   let fdh = collector.getModule(&quot;folder-display-helpers&quot;);</span>
<a href="#l7.7"></a><span id="l7.7">   fdh.installInto(module);</span>
<a href="#l7.8"></a><span id="l7.8"> </span>
<a href="#l7.9"></a><span id="l7.9">   folder = create_folder(&quot;DisplayNameA&quot;);</span>
<a href="#l7.10"></a><span id="l7.10"> </span>
<a href="#l7.11"></a><span id="l7.11">   add_message_to_folder(folder, create_message({</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-    clobberHeaders: {from: &quot;Carter Burke &lt;cburke@wyutani.com&gt;&quot;},</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+    clobberHeaders: {from: &quot;Carter Burke &lt;cburke@wyutani.invalid&gt;&quot;},</span>
<a href="#l7.14"></a><span id="l7.14">   }));</span>
<a href="#l7.15"></a><span id="l7.15">   add_message_to_folder(folder, create_message({</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineminus">-    clobberHeaders: {from: '&quot;Ellen Ripley&quot; &lt;eripley@wyutani.com&gt;'},</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineplus">+    clobberHeaders: {from: '&quot;Ellen Ripley&quot; &lt;eripley@wyutani.invalid&gt;'},</span>
<a href="#l7.18"></a><span id="l7.18">   }));</span>
<a href="#l7.19"></a><span id="l7.19">   add_message_to_folder(folder, create_message({</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineminus">-    clobberHeaders: {from: &quot;'Dwayne Hicks' &lt;dhicks@uscmc.mil&gt;&quot;},</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineplus">+    clobberHeaders: {from: &quot;'Dwayne Hicks' &lt;dhicks@uscmc.invalid&gt;&quot;},</span>
<a href="#l7.22"></a><span id="l7.22">   }));</span>
<a href="#l7.23"></a><span id="l7.23"> }</span>
<a href="#l7.24"></a><span id="l7.24"> </span>
<a href="#l7.25"></a><span id="l7.25"> function check_display_name(index, expectedName) {</span>
<a href="#l7.26"></a><span id="l7.26">   be_in_folder(folder);</span>
<a href="#l7.27"></a><span id="l7.27"> </span>
<a href="#l7.28"></a><span id="l7.28">   // Select the nth message</span>
<a href="#l7.29"></a><span id="l7.29">   let curMessage = select_click_row(index);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/test/mozmill/folder-display/test-folder-names-in-favorite-mode.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/test/mozmill/folder-display/test-folder-names-in-favorite-mode.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -28,18 +28,18 @@ function test_folder_names_in_favorite_p</span>
<a href="#l8.4"></a><span id="l8.4">   fDup1.flags |= Ci.nsMsgFolderFlags.Favorite;</span>
<a href="#l8.5"></a><span id="l8.5">   fDup2.flags |= Ci.nsMsgFolderFlags.Favorite;</span>
<a href="#l8.6"></a><span id="l8.6">   fDup3.flags |= Ci.nsMsgFolderFlags.Favorite;</span>
<a href="#l8.7"></a><span id="l8.7">   inbox.flags &amp;= ~Ci.nsMsgFolderFlags.Favorite;</span>
<a href="#l8.8"></a><span id="l8.8"> </span>
<a href="#l8.9"></a><span id="l8.9">   mc.window.gFolderTreeView.mode = &quot;favorite&quot;;</span>
<a href="#l8.10"></a><span id="l8.10"> </span>
<a href="#l8.11"></a><span id="l8.11">   assert_folder_at_index_as(0, &quot;duplicatedName - Local Folders&quot;);</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-  assert_folder_at_index_as(1, &quot;duplicatedName - tinderbox@invalid.com&quot;);</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-  assert_folder_at_index_as(2, &quot;duplicatedName - tinderbox@invalid.com&quot;);</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineplus">+  assert_folder_at_index_as(1, &quot;duplicatedName - tinderbox@foo.invalid&quot;);</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineplus">+  assert_folder_at_index_as(2, &quot;duplicatedName - tinderbox@foo.invalid&quot;);</span>
<a href="#l8.16"></a><span id="l8.16">   assert_folder_at_index_as(3, &quot;uniqueName&quot;);</span>
<a href="#l8.17"></a><span id="l8.17"> </span>
<a href="#l8.18"></a><span id="l8.18">   // Reset the flags to the state they were previously.</span>
<a href="#l8.19"></a><span id="l8.19">   fUnique.flags &amp;= ~Ci.nsMsgFolderFlags.Favorite;</span>
<a href="#l8.20"></a><span id="l8.20">   fDup1.flags &amp;= ~Ci.nsMsgFolderFlags.Favorite;</span>
<a href="#l8.21"></a><span id="l8.21">   fDup2.flags &amp;= ~Ci.nsMsgFolderFlags.Favorite;</span>
<a href="#l8.22"></a><span id="l8.22">   fDup3.flags &amp;= ~Ci.nsMsgFolderFlags.Favorite;</span>
<a href="#l8.23"></a><span id="l8.23">   inbox.flags |= Ci.nsMsgFolderFlags.Favorite;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/test/mozmill/folder-tree-modes/test-extension/chrome/content/overlay.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/test/mozmill/folder-tree-modes/test-extension/chrome/content/overlay.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -2,17 +2,17 @@</span>
<a href="#l9.4"></a><span id="l9.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l9.5"></a><span id="l9.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l9.6"></a><span id="l9.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l9.7"></a><span id="l9.7"> </span>
<a href="#l9.8"></a><span id="l9.8"> (function () {</span>
<a href="#l9.9"></a><span id="l9.9">    var testFolderTreeMode = {</span>
<a href="#l9.10"></a><span id="l9.10">      __proto__: IFolderTreeMode,</span>
<a href="#l9.11"></a><span id="l9.11">      generateMap: function testFolderTreeMode_generateMap(aFTV) {</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-       // Pick the tinderbox@invalid.com inbox and use it as the only folder</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+       // Pick the tinderbox@foo.invalid inbox and use it as the only folder</span>
<a href="#l9.14"></a><span id="l9.14">        let acctMgr =</span>
<a href="#l9.15"></a><span id="l9.15">          Components.classes[&quot;@mozilla.org/messenger/account-manager;1&quot;]</span>
<a href="#l9.16"></a><span id="l9.16">            .getService(Components.interfaces.nsIMsgAccountManager);</span>
<a href="#l9.17"></a><span id="l9.17">        let server = acctMgr.FindServer(&quot;tinderbox&quot;, &quot;tinderbox&quot;, &quot;pop3&quot;);</span>
<a href="#l9.18"></a><span id="l9.18">        let item = new ftvItem(server.rootFolder.getChildNamed(&quot;Inbox&quot;));</span>
<a href="#l9.19"></a><span id="l9.19">        item.__defineGetter__(&quot;children&quot;, function () []);</span>
<a href="#l9.20"></a><span id="l9.20">        return [item];</span>
<a href="#l9.21"></a><span id="l9.21">      },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/test/mozmill/folder-widget/test-message-filters.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/test/mozmill/folder-widget/test-message-filters.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -135,17 +135,17 @@ function create_simple_filter() {</span>
<a href="#l10.4"></a><span id="l10.4">     let searchAttr = fec.e(&quot;searchAttr0&quot;);</span>
<a href="#l10.5"></a><span id="l10.5">     let attrList = fec.window.document.getAnonymousNodes(searchAttr)[0];</span>
<a href="#l10.6"></a><span id="l10.6">     attrList.value = Components.interfaces.nsMsgSearchAttrib.To;</span>
<a href="#l10.7"></a><span id="l10.7">     let searchOp = fec.e(&quot;searchOp0&quot;);</span>
<a href="#l10.8"></a><span id="l10.8">     let opList = fec.window.document.getAnonymousNodes(searchOp)[0];</span>
<a href="#l10.9"></a><span id="l10.9">     opList.value = Components.interfaces.nsMsgSearchOp.Is;</span>
<a href="#l10.10"></a><span id="l10.10">     let searchValList = fec.e(&quot;searchVal0&quot;);</span>
<a href="#l10.11"></a><span id="l10.11">     let searchVal = fec.window.document.getAnonymousNodes(searchValList)[0];</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-    searchVal.setAttribute(&quot;value&quot;, &quot;test@invalid.com&quot;);</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+    searchVal.setAttribute(&quot;value&quot;, &quot;test@foo.invalid&quot;);</span>
<a href="#l10.14"></a><span id="l10.14"> </span>
<a href="#l10.15"></a><span id="l10.15">     let filterActions = fec.e(&quot;filterActionList&quot;);</span>
<a href="#l10.16"></a><span id="l10.16">     let firstAction = filterActions.getItemAtIndex(0);</span>
<a href="#l10.17"></a><span id="l10.17">     firstAction.setAttribute(&quot;value&quot;, &quot;markasflagged&quot;);</span>
<a href="#l10.18"></a><span id="l10.18">     fec.e(&quot;FilterEditor&quot;).acceptDialog();</span>
<a href="#l10.19"></a><span id="l10.19">   }</span>
<a href="#l10.20"></a><span id="l10.20"> </span>
<a href="#l10.21"></a><span id="l10.21">   // Let's open the filter editor.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/test/mozmill/message-header/test-reply-to-list-from-address-selection.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/test/mozmill/message-header/test-reply-to-list-from-address-selection.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -15,17 +15,17 @@ var MODULE_REQUIRES = ['folder-display-h</span>
<a href="#l11.4"></a><span id="l11.4"> var folderHelper = null;</span>
<a href="#l11.5"></a><span id="l11.5"> var windowindowHelperelper = null;</span>
<a href="#l11.6"></a><span id="l11.6"> var composeHelper = null;</span>
<a href="#l11.7"></a><span id="l11.7"> </span>
<a href="#l11.8"></a><span id="l11.8"> var testFolder = null;</span>
<a href="#l11.9"></a><span id="l11.9"> var msgHdr = null;</span>
<a href="#l11.10"></a><span id="l11.10"> var replyToListWindow = null;</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-var identityString1 = &quot;tinderbox_correct_identity@invalid.com&quot;;</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+var identityString1 = &quot;tinderbox_correct_identity@foo.invalid&quot;;</span>
<a href="#l11.14"></a><span id="l11.14"> </span>
<a href="#l11.15"></a><span id="l11.15"> var setupModule = function (module) {</span>
<a href="#l11.16"></a><span id="l11.16"> </span>
<a href="#l11.17"></a><span id="l11.17">   folderHelper = collector.getModule('folder-display-helpers');</span>
<a href="#l11.18"></a><span id="l11.18">   folderHelper.installInto(module);</span>
<a href="#l11.19"></a><span id="l11.19">   windowHelper = collector.getModule('window-helpers');</span>
<a href="#l11.20"></a><span id="l11.20">   windowHelper.installInto(module);</span>
<a href="#l11.21"></a><span id="l11.21">   composeHelper = collector.getModule('compose-helpers');</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineat">@@ -38,19 +38,19 @@ var setupModule = function (module) {</span>
<a href="#l11.23"></a><span id="l11.23"> var addMessageToFolder = function (aFolder) {</span>
<a href="#l11.24"></a><span id="l11.24">   var msgId = Cc[&quot;@mozilla.org/uuid-generator;1&quot;]</span>
<a href="#l11.25"></a><span id="l11.25">                 .getService(Ci.nsIUUIDGenerator)</span>
<a href="#l11.26"></a><span id="l11.26">                 .generateUUID() + &quot;@mozillamessaging.invalid&quot;;</span>
<a href="#l11.27"></a><span id="l11.27"> </span>
<a href="#l11.28"></a><span id="l11.28">   var source = &quot;From - Sat Nov  1 12:39:54 2008\n&quot; +</span>
<a href="#l11.29"></a><span id="l11.29">                 &quot;X-Mozilla-Status: 0001\n&quot; +</span>
<a href="#l11.30"></a><span id="l11.30">                 &quot;X-Mozilla-Status2: 00000000\n&quot; +</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-                &quot;Delivered-To: &lt;tinderbox_identity333@invalid.com&gt;\n&quot; +</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+                &quot;Delivered-To: &lt;tinderbox_identity333@foo.invalid&gt;\n&quot; +</span>
<a href="#l11.33"></a><span id="l11.33">                 &quot;Delivered-To: &lt;&quot; + identityString1 + &quot;&gt;\n&quot; +</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineminus">-                &quot;Delivered-To: &lt;tinderbox_identity555@invalid.com&gt;\n&quot; +</span>
<a href="#l11.35"></a><span id="l11.35" class="difflineplus">+                &quot;Delivered-To: &lt;tinderbox_identity555@foo.invalid&gt;\n&quot; +</span>
<a href="#l11.36"></a><span id="l11.36">                 &quot;Message-ID: &lt;&quot; + msgId + &quot;&gt;\n&quot; +</span>
<a href="#l11.37"></a><span id="l11.37">                 &quot;Date: Wed, 11 Jun 2008 20:32:02 -0400\n&quot; +</span>
<a href="#l11.38"></a><span id="l11.38">                 &quot;From: Tester &lt;tests@mozillamessaging.invalid&gt;\n&quot; +</span>
<a href="#l11.39"></a><span id="l11.39">                 &quot;User-Agent: Thunderbird 3.0a2pre (Macintosh/2008052122)\n&quot; +</span>
<a href="#l11.40"></a><span id="l11.40">                 &quot;MIME-Version: 1.0\n&quot; +</span>
<a href="#l11.41"></a><span id="l11.41">                 &quot;List-ID: &lt;list.mozillamessaging.invalid&gt;\n&quot; +</span>
<a href="#l11.42"></a><span id="l11.42">                 &quot;List-Post: &lt;list.mozillamessaging.invalid&gt;, \n&quot; +</span>
<a href="#l11.43"></a><span id="l11.43">                 &quot;    &lt;mailto: list@mozillamessaging.invalid&gt;\n&quot; +</span>
<a href="#l11.44"></a><span id="l11.44" class="difflineat">@@ -69,17 +69,17 @@ var addMessageToFolder = function (aFold</span>
<a href="#l11.45"></a><span id="l11.45"> }</span>
<a href="#l11.46"></a><span id="l11.46"> </span>
<a href="#l11.47"></a><span id="l11.47"> var addIdentitiesAndFolder = function() {</span>
<a href="#l11.48"></a><span id="l11.48">   var acctMgr = Cc[&quot;@mozilla.org/messenger/account-manager;1&quot;]</span>
<a href="#l11.49"></a><span id="l11.49">                 .getService(Ci.nsIMsgAccountManager);</span>
<a href="#l11.50"></a><span id="l11.50"> </span>
<a href="#l11.51"></a><span id="l11.51">   var identity2 = acctMgr.createIdentity();</span>
<a href="#l11.52"></a><span id="l11.52">   //identity.fullName = &quot;Tinderbox_Identity1&quot;;</span>
<a href="#l11.53"></a><span id="l11.53" class="difflineminus">-  identity2.email=&quot;tinderbox_identity1@invalid.com&quot;;</span>
<a href="#l11.54"></a><span id="l11.54" class="difflineplus">+  identity2.email=&quot;tinderbox_identity1@foo.invalid&quot;;</span>
<a href="#l11.55"></a><span id="l11.55"> </span>
<a href="#l11.56"></a><span id="l11.56">   var identity = acctMgr.createIdentity();</span>
<a href="#l11.57"></a><span id="l11.57">   //identity.fullName = &quot;Tinderbox_Identity1&quot;;</span>
<a href="#l11.58"></a><span id="l11.58">   identity.email = identityString1;</span>
<a href="#l11.59"></a><span id="l11.59"> </span>
<a href="#l11.60"></a><span id="l11.60">   var server = acctMgr.createIncomingServer(&quot;nobody&quot;,</span>
<a href="#l11.61"></a><span id="l11.61">                                             &quot;Test Local Folders&quot;, &quot;pop3&quot;);</span>
<a href="#l11.62"></a><span id="l11.62">   let localRoot = server.rootFolder.QueryInterface(Ci.nsIMsgLocalMailFolder);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/test/mozmill/multiple-identities/test-display-names.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/test/mozmill/multiple-identities/test-display-names.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -11,18 +11,18 @@ var MODULE_NAME = &quot;test-display-names&quot;;</span>
<a href="#l12.4"></a><span id="l12.4"> var RELATIVE_ROOT = &quot;../shared-modules&quot;;</span>
<a href="#l12.5"></a><span id="l12.5"> var MODULE_REQUIRES = [&quot;folder-display-helpers&quot;, &quot;address-book-helpers&quot;];</span>
<a href="#l12.6"></a><span id="l12.6"> </span>
<a href="#l12.7"></a><span id="l12.7"> var folder;</span>
<a href="#l12.8"></a><span id="l12.8"> var decoyFolder;</span>
<a href="#l12.9"></a><span id="l12.9"> var acctMgr;</span>
<a href="#l12.10"></a><span id="l12.10"> var localAccount;</span>
<a href="#l12.11"></a><span id="l12.11"> var secondIdentity;</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-var myEmail = &quot;sender@nul.nul&quot;; // Dictated by messagerInjector.js</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineminus">-var friendEmail = &quot;carl@sagan.com&quot;;</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineplus">+var myEmail = &quot;sender@nul.invalid&quot;; // Dictated by messagerInjector.js</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineplus">+var friendEmail = &quot;carl@sagan.invalid&quot;;</span>
<a href="#l12.16"></a><span id="l12.16"> var friendName = &quot;Carl Sagan&quot;;</span>
<a href="#l12.17"></a><span id="l12.17"> var headertoFieldMe;</span>
<a href="#l12.18"></a><span id="l12.18"> var collectedAddresses;</span>
<a href="#l12.19"></a><span id="l12.19"> </span>
<a href="#l12.20"></a><span id="l12.20"> function setupModule(module) {</span>
<a href="#l12.21"></a><span id="l12.21">   let fdh = collector.getModule(&quot;folder-display-helpers&quot;);</span>
<a href="#l12.22"></a><span id="l12.22">   fdh.installInto(module);</span>
<a href="#l12.23"></a><span id="l12.23">   let abh = collector.getModule(&quot;address-book-helpers&quot;);</span>
<a href="#l12.24"></a><span id="l12.24" class="difflineat">@@ -44,17 +44,17 @@ function setupModule(module) {</span>
<a href="#l12.25"></a><span id="l12.25">   for (let i = localAccount.identities.length - 1; i &gt;= 0; i--) {</span>
<a href="#l12.26"></a><span id="l12.26">     let identity = localAccount.identities.queryElementAt(i, Ci.nsIMsgIdentity);</span>
<a href="#l12.27"></a><span id="l12.27">     if (identity.email != myEmail)</span>
<a href="#l12.28"></a><span id="l12.28">       localAccount.removeIdentity(identity);</span>
<a href="#l12.29"></a><span id="l12.29">   }</span>
<a href="#l12.30"></a><span id="l12.30"> </span>
<a href="#l12.31"></a><span id="l12.31">   // 3) Create a second identity and hold onto it for later</span>
<a href="#l12.32"></a><span id="l12.32">   secondIdentity = acctMgr.createIdentity();</span>
<a href="#l12.33"></a><span id="l12.33" class="difflineminus">-  secondIdentity.email = &quot;nobody@nowhere.com&quot;;</span>
<a href="#l12.34"></a><span id="l12.34" class="difflineplus">+  secondIdentity.email = &quot;nobody@nowhere.invalid&quot;;</span>
<a href="#l12.35"></a><span id="l12.35"> </span>
<a href="#l12.36"></a><span id="l12.36">   folder = create_folder(&quot;DisplayNamesA&quot;);</span>
<a href="#l12.37"></a><span id="l12.37">   decoyFolder = create_folder(&quot;DisplayNamesB&quot;);</span>
<a href="#l12.38"></a><span id="l12.38"> </span>
<a href="#l12.39"></a><span id="l12.39">   add_message_to_folder(folder, create_message({to: [[&quot;&quot;, myEmail]] }));</span>
<a href="#l12.40"></a><span id="l12.40">   add_message_to_folder(folder, create_message({from: [&quot;&quot;, friendEmail] }));</span>
<a href="#l12.41"></a><span id="l12.41">   add_message_to_folder(folder, create_message({from: [friendName, friendEmail] }));</span>
<a href="#l12.42"></a><span id="l12.42"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mail/test/mozmill/newmailaccount/html/badSuggestFromName</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mail/test/mozmill/newmailaccount/html/badSuggestFromName</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -1,4 +1,4 @@</span>
<a href="#l13.4"></a><span id="l13.4"> </span>
<a href="#l13.5"></a><span id="l13.5" class="difflineminus">-[{&quot;product&quot;: &quot;personalized_email&quot;, &quot;addresses&quot;: [&quot;green@bar.com&quot;,</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineminus">-&quot;green_llama@bar.com&quot;, &quot;gllama@bar.cbar&quot;}, {&quot;product&quot;:</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineplus">+[{&quot;product&quot;: &quot;personalized_email&quot;, &quot;addresses&quot;: [&quot;green@foo.invalid&quot;,</span>
<a href="#l13.8"></a><span id="l13.8" class="difflineplus">+&quot;green_llama@foo.invalid&quot;, &quot;gllama@bar.cbar&quot;}, {&quot;product&quot;:</span>
<a href="#l13.9"></a><span id="l13.9"> , &quot;price&quot;: &quot;20.00&quot;, &quot;provider&quot;: &quot;fo&quot;]w</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mail/test/mozmill/newmailaccount/html/registration.html</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mail/test/mozmill/newmailaccount/html/registration.html</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -6,17 +6,17 @@</span>
<a href="#l14.4"></a><span id="l14.4">   &lt;/head&gt;</span>
<a href="#l14.5"></a><span id="l14.5">   &lt;body&gt;</span>
<a href="#l14.6"></a><span id="l14.6">     &lt;div class=&quot;title&quot;&gt;Local version&lt;/div&gt;</span>
<a href="#l14.7"></a><span id="l14.7">     &lt;div class=&quot;content&quot;&gt;</span>
<a href="#l14.8"></a><span id="l14.8">       &lt;form action=&quot;config.xml&quot; method=&quot;GET&quot;&gt;</span>
<a href="#l14.9"></a><span id="l14.9">          &lt;p&gt;</span>
<a href="#l14.10"></a><span id="l14.10">          First name: &lt;input value=&quot;Green&quot; id=&quot;first&quot; name=&quot;firstname&quot; type=&quot;text&quot;&gt;&lt;br&gt;</span>
<a href="#l14.11"></a><span id="l14.11">          Last name: &lt;input value=&quot;Llama&quot; id=&quot;last&quot; name=&quot;lastname&quot; type=&quot;text&quot;&gt;&lt;br&gt;</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-         Email: &lt;input value=&quot;da.green.llama@bar.com&quot; id=&quot;email&quot; name=&quot;email&quot; type=&quot;text&quot;&gt;&lt;br&gt;</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+         Email: &lt;input value=&quot;da.green.llama@foo.invalid&quot; id=&quot;email&quot; name=&quot;email&quot; type=&quot;text&quot;&gt;&lt;br&gt;</span>
<a href="#l14.14"></a><span id="l14.14">          &lt;input value=&quot;Send&quot; type=&quot;submit&quot;&gt;</span>
<a href="#l14.15"></a><span id="l14.15">          &lt;/p&gt;</span>
<a href="#l14.16"></a><span id="l14.16">       &lt;/form&gt;</span>
<a href="#l14.17"></a><span id="l14.17">       &lt;a id=&quot;external&quot; href=&quot;target.html&quot; target=&quot;_blank&quot;&gt;Should open externally&lt;/a&gt;</span>
<a href="#l14.18"></a><span id="l14.18">       &lt;a id=&quot;internal&quot; href=&quot;target.html&quot;&gt;Should open internally&lt;/a&gt;</span>
<a href="#l14.19"></a><span id="l14.19">       &lt;p id=&quot;newtab&quot; onclick=&quot;window.open('target.html');&quot;&gt;</span>
<a href="#l14.20"></a><span id="l14.20">         Should open in a new content tab.</span>
<a href="#l14.21"></a><span id="l14.21">       &lt;/p&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/test/mozmill/newmailaccount/html/suggestFromName</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/test/mozmill/newmailaccount/html/suggestFromName</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -1,13 +1,13 @@</span>
<a href="#l15.4"></a><span id="l15.4"> [{&quot;product&quot;: &quot;personalized_email&quot;, &quot;addresses&quot;: [&quot;green@example.com&quot;,</span>
<a href="#l15.5"></a><span id="l15.5"> &quot;green_llama@example.com&quot;, &quot;gllama@example.com&quot;], &quot;succeeded&quot;: true, &quot;quote&quot;:</span>
<a href="#l15.6"></a><span id="l15.6"> &quot;b28acb3c0a464d33af22&quot;, &quot;price&quot;: 0, &quot;provider&quot;: &quot;bar&quot;}, {&quot;product&quot;:</span>
<a href="#l15.7"></a><span id="l15.7"> &quot;personalized_email&quot;, &quot;addresses&quot;: [&quot;green-bar@example.com&quot;, &quot;me-bar@example.com&quot;,</span>
<a href="#l15.8"></a><span id="l15.8" class="difflineminus">-&quot;green-bar@madeup.nul&quot;, &quot;green@bar.nul&quot;, &quot;green@barexample.nul&quot;,</span>
<a href="#l15.9"></a><span id="l15.9" class="difflineminus">-&quot;greenbar@greenllama.nul&quot;, &quot;mebar@greenllama.nul&quot;], &quot;succeeded&quot;: true, &quot;quote&quot;:</span>
<a href="#l15.10"></a><span id="l15.10" class="difflineplus">+&quot;green-bar@madeup.invalid&quot;, &quot;green@bar.invalid&quot;, &quot;green@barexample.invalid&quot;,</span>
<a href="#l15.11"></a><span id="l15.11" class="difflineplus">+&quot;greenbar@greenllama.invalid&quot;, &quot;mebar@greenllama.invalid&quot;], &quot;succeeded&quot;: true, &quot;quote&quot;:</span>
<a href="#l15.12"></a><span id="l15.12"> &quot;3f93e48679ab46a49475&quot;, &quot;price&quot;: &quot;20.00&quot;, &quot;provider&quot;: &quot;foo&quot;},</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineminus">-{&quot;product&quot;: &quot;personalized_email&quot;, &quot;addresses&quot;: [&quot;corrupt@corrupt.nul&quot;],</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineplus">+{&quot;product&quot;: &quot;personalized_email&quot;, &quot;addresses&quot;: [&quot;corrupt@corrupt.invalid&quot;],</span>
<a href="#l15.15"></a><span id="l15.15"> &quot;succeeded&quot;: true, &quot;quote&quot;: &quot;abcdefg&quot;, &quot;price&quot;: 0, &quot;provider&quot;: &quot;corrupt&quot;},</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineminus">-{&quot;product&quot;: &quot;personalized_email&quot;, &quot;addresses&quot;: [&quot;error@error.nul&quot;],</span>
<a href="#l15.17"></a><span id="l15.17" class="difflineplus">+{&quot;product&quot;: &quot;personalized_email&quot;, &quot;addresses&quot;: [&quot;error@error.invalid&quot;],</span>
<a href="#l15.18"></a><span id="l15.18"> &quot;succeeded&quot;: true, &quot;quote&quot;: &quot;abcdefg&quot;, &quot;price&quot;: 0, &quot;provider&quot;: &quot;err&quot;},</span>
<a href="#l15.19"></a><span id="l15.19"> {&quot;addresses&quot;: [&quot;default@example.com&quot;, {&quot;address&quot;: &quot;cheap@example.com&quot;, &quot;price&quot;: &quot;0&quot;},</span>
<a href="#l15.20"></a><span id="l15.20"> {&quot;address&quot;: &quot;expensive@example.com&quot;, &quot;price&quot;: &quot;$20.00&quot;}], &quot;succeeded&quot;: true, &quot;price&quot;: &quot;$20-$0&quot;, &quot;provider&quot;: &quot;multi&quot;}]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mail/test/mozmill/newmailaccount/test-newmailaccount.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mail/test/mozmill/newmailaccount/test-newmailaccount.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -603,17 +603,17 @@ function subtest_shows_error_on_empty_su</span>
<a href="#l16.4"></a><span id="l16.4"> </span>
<a href="#l16.5"></a><span id="l16.5"> /**</span>
<a href="#l16.6"></a><span id="l16.6">  * Tests that if a provider returns broken or erroneous XML back</span>
<a href="#l16.7"></a><span id="l16.7">  * to the user after account registration, that we log the error</span>
<a href="#l16.8"></a><span id="l16.8">  * in the error console.</span>
<a href="#l16.9"></a><span id="l16.9">  */</span>
<a href="#l16.10"></a><span id="l16.10"> function test_throws_console_error_on_corrupt_XML() {</span>
<a href="#l16.11"></a><span id="l16.11">   // Open the provisioner - once opened, let subtest_get_an_account run.</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-  get_to_order_form(&quot;corrupt@corrupt.nul&quot;);</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+  get_to_order_form(&quot;corrupt@corrupt.invalid&quot;);</span>
<a href="#l16.14"></a><span id="l16.14">   let tab = mc.tabmail.currentTabInfo;</span>
<a href="#l16.15"></a><span id="l16.15"> </span>
<a href="#l16.16"></a><span id="l16.16">   // Record how many accounts we start with.</span>
<a href="#l16.17"></a><span id="l16.17">   gNumAccounts = nAccounts();</span>
<a href="#l16.18"></a><span id="l16.18"> </span>
<a href="#l16.19"></a><span id="l16.19">   gConsoleListener.reset();</span>
<a href="#l16.20"></a><span id="l16.20">   gConsoleListener.listenFor(&quot;Problem interpreting provider XML:&quot;);</span>
<a href="#l16.21"></a><span id="l16.21"> </span>
<a href="#l16.22"></a><span id="l16.22" class="difflineat">@@ -992,17 +992,17 @@ function test_external_link_opening_beha</span>
<a href="#l16.23"></a><span id="l16.23"> </span>
<a href="#l16.24"></a><span id="l16.24"> /**</span>
<a href="#l16.25"></a><span id="l16.25">  * Test that if the provider returns XML that we can't turn into an account,</span>
<a href="#l16.26"></a><span id="l16.26">  * then we error out and go back to the Account Provisioner dialog.</span>
<a href="#l16.27"></a><span id="l16.27">  */</span>
<a href="#l16.28"></a><span id="l16.28"> function test_return_to_provisioner_on_error_XML() {</span>
<a href="#l16.29"></a><span id="l16.29">   const kOriginalTabNum = mc.tabmail.tabContainer.childNodes.length;</span>
<a href="#l16.30"></a><span id="l16.30"> </span>
<a href="#l16.31"></a><span id="l16.31" class="difflineminus">-  get_to_order_form(&quot;error@error.nul&quot;);</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineplus">+  get_to_order_form(&quot;error@error.invalid&quot;);</span>
<a href="#l16.33"></a><span id="l16.33"> </span>
<a href="#l16.34"></a><span id="l16.34">   let tab = mc.tabmail.currentTabInfo;</span>
<a href="#l16.35"></a><span id="l16.35">   let doc = tab.browser.contentWindow.document;</span>
<a href="#l16.36"></a><span id="l16.36"> </span>
<a href="#l16.37"></a><span id="l16.37">   plan_for_modal_dialog(&quot;AccountCreation&quot;, close_dialog_immediately);</span>
<a href="#l16.38"></a><span id="l16.38"> </span>
<a href="#l16.39"></a><span id="l16.39">   // Click the OK button to order the account.</span>
<a href="#l16.40"></a><span id="l16.40">   let btn = tab.browser.contentWindow.document.querySelector(&quot;input[value=Send]&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mail/test/mozmill/notification/test-notification.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mail/test/mozmill/notification/test-notification.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -103,17 +103,17 @@ function setupModule(module) {</span>
<a href="#l17.4"></a><span id="l17.4">   // Ensure we have enabled new mail notifications</span>
<a href="#l17.5"></a><span id="l17.5">   remember_and_set_bool_pref(&quot;mail.biff.show_alert&quot;, true);</span>
<a href="#l17.6"></a><span id="l17.6"> </span>
<a href="#l17.7"></a><span id="l17.7">   MailServices.accounts.localFoldersServer.performingBiff = true;</span>
<a href="#l17.8"></a><span id="l17.8"> </span>
<a href="#l17.9"></a><span id="l17.9">   // Create a second identity to check cross-account</span>
<a href="#l17.10"></a><span id="l17.10">   // notifications.</span>
<a href="#l17.11"></a><span id="l17.11">   var identity2 = MailServices.accounts.createIdentity();</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-  identity2.email = &quot;new-account@invalid.com&quot;;</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+  identity2.email = &quot;new-account@foo.invalid&quot;;</span>
<a href="#l17.14"></a><span id="l17.14"> </span>
<a href="#l17.15"></a><span id="l17.15">   var server = MailServices.accounts</span>
<a href="#l17.16"></a><span id="l17.16">                            .createIncomingServer(&quot;nobody&quot;,</span>
<a href="#l17.17"></a><span id="l17.17">                                                  &quot;Test Local Folders&quot;, &quot;pop3&quot;);</span>
<a href="#l17.18"></a><span id="l17.18"> </span>
<a href="#l17.19"></a><span id="l17.19">   server.performingBiff = true;</span>
<a href="#l17.20"></a><span id="l17.20"> </span>
<a href="#l17.21"></a><span id="l17.21">   // Create the target folders</span>
<a href="#l17.22"></a><span id="l17.22" class="difflineat">@@ -326,17 +326,17 @@ test_hide_subject.EXCLUDED_PLATFORMS = [</span>
<a href="#l17.23"></a><span id="l17.23"> /**</span>
<a href="#l17.24"></a><span id="l17.24">  * Test that we can show just the message sender in the notification.</span>
<a href="#l17.25"></a><span id="l17.25">  */</span>
<a href="#l17.26"></a><span id="l17.26"> function test_show_only_subject() {</span>
<a href="#l17.27"></a><span id="l17.27">   Services.prefs.setBoolPref(&quot;mail.biff.alert.show_preview&quot;, false);</span>
<a href="#l17.28"></a><span id="l17.28">   Services.prefs.setBoolPref(&quot;mail.biff.alert.show_sender&quot;, false);</span>
<a href="#l17.29"></a><span id="l17.29">   Services.prefs.setBoolPref(&quot;mail.biff.alert.show_subject&quot;, true);</span>
<a href="#l17.30"></a><span id="l17.30"> </span>
<a href="#l17.31"></a><span id="l17.31" class="difflineminus">-  let sender = [&quot;John Cleese&quot;, &quot;john@cleese.net&quot;];</span>
<a href="#l17.32"></a><span id="l17.32" class="difflineplus">+  let sender = [&quot;John Cleese&quot;, &quot;john@cleese.invalid&quot;];</span>
<a href="#l17.33"></a><span id="l17.33">   let subject = &quot;This should not be displayed&quot;;</span>
<a href="#l17.34"></a><span id="l17.34">   let messageBody = &quot;My message preview&quot;;</span>
<a href="#l17.35"></a><span id="l17.35"> </span>
<a href="#l17.36"></a><span id="l17.36">   make_gradually_newer_sets_in_folder(gFolder,</span>
<a href="#l17.37"></a><span id="l17.37">                                       [{count: 1,</span>
<a href="#l17.38"></a><span id="l17.38">                                         from: sender,</span>
<a href="#l17.39"></a><span id="l17.39">                                         subject: subject,</span>
<a href="#l17.40"></a><span id="l17.40">                                         body: {body: messageBody}}]);</span>
<a href="#l17.41"></a><span id="l17.41" class="difflineat">@@ -351,32 +351,32 @@ function test_show_only_subject() {</span>
<a href="#l17.42"></a><span id="l17.42"> }</span>
<a href="#l17.43"></a><span id="l17.43"> test_show_only_subject.EXCLUDED_PLATFORMS = ['winnt', 'darwin'];</span>
<a href="#l17.44"></a><span id="l17.44"> </span>
<a href="#l17.45"></a><span id="l17.45"> </span>
<a href="#l17.46"></a><span id="l17.46"> /**</span>
<a href="#l17.47"></a><span id="l17.47">  * Test that we can show the message sender in the notification.</span>
<a href="#l17.48"></a><span id="l17.48">  */</span>
<a href="#l17.49"></a><span id="l17.49"> function test_show_sender() {</span>
<a href="#l17.50"></a><span id="l17.50" class="difflineminus">-  let sender = [&quot;John Cleese&quot;, &quot;john@cleese.net&quot;];</span>
<a href="#l17.51"></a><span id="l17.51" class="difflineplus">+  let sender = [&quot;John Cleese&quot;, &quot;john@cleese.invalid&quot;];</span>
<a href="#l17.52"></a><span id="l17.52">   make_gradually_newer_sets_in_folder(gFolder,</span>
<a href="#l17.53"></a><span id="l17.53">                                       [{count: 1,</span>
<a href="#l17.54"></a><span id="l17.54">                                         from: sender}]);</span>
<a href="#l17.55"></a><span id="l17.55">   assert_true(gMockAlertsService._didNotify, &quot;Should have notified&quot;);</span>
<a href="#l17.56"></a><span id="l17.56">   assert_true(gMockAlertsService._text.search(sender[0]) != -1,</span>
<a href="#l17.57"></a><span id="l17.57">               &quot;Should have displayed the sender&quot;);</span>
<a href="#l17.58"></a><span id="l17.58"> }</span>
<a href="#l17.59"></a><span id="l17.59"> test_show_sender.EXCLUDED_PLATFORMS = ['winnt', 'darwin'];</span>
<a href="#l17.60"></a><span id="l17.60"> </span>
<a href="#l17.61"></a><span id="l17.61"> /**</span>
<a href="#l17.62"></a><span id="l17.62">  * Test that we can hide the message sender in the notification.</span>
<a href="#l17.63"></a><span id="l17.63">  */</span>
<a href="#l17.64"></a><span id="l17.64"> function test_hide_sender() {</span>
<a href="#l17.65"></a><span id="l17.65">   Services.prefs.setBoolPref(&quot;mail.biff.alert.show_sender&quot;, false);</span>
<a href="#l17.66"></a><span id="l17.66" class="difflineminus">-  let sender = [&quot;John Cleese&quot;, &quot;john@cleese.net&quot;];</span>
<a href="#l17.67"></a><span id="l17.67" class="difflineplus">+  let sender = [&quot;John Cleese&quot;, &quot;john@cleese.invalid&quot;];</span>
<a href="#l17.68"></a><span id="l17.68">   make_gradually_newer_sets_in_folder(gFolder,</span>
<a href="#l17.69"></a><span id="l17.69">                                       [{count: 1,</span>
<a href="#l17.70"></a><span id="l17.70">                                         from: sender}]);</span>
<a href="#l17.71"></a><span id="l17.71">   assert_true(gMockAlertsService._didNotify, &quot;Should have notified&quot;);</span>
<a href="#l17.72"></a><span id="l17.72">   assert_equals(gMockAlertsService._text.search(sender[0]), -1,</span>
<a href="#l17.73"></a><span id="l17.73">                 &quot;Should not have displayed the sender&quot;);</span>
<a href="#l17.74"></a><span id="l17.74"> }</span>
<a href="#l17.75"></a><span id="l17.75"> test_hide_sender.EXCLUDED_PLATFORMS = ['winnt', 'darwin'];</span>
<a href="#l17.76"></a><span id="l17.76" class="difflineat">@@ -384,17 +384,17 @@ test_hide_sender.EXCLUDED_PLATFORMS = ['</span>
<a href="#l17.77"></a><span id="l17.77"> /**</span>
<a href="#l17.78"></a><span id="l17.78">  * Test that we can show just the message sender in the notification.</span>
<a href="#l17.79"></a><span id="l17.79">  */</span>
<a href="#l17.80"></a><span id="l17.80"> function test_show_only_sender() {</span>
<a href="#l17.81"></a><span id="l17.81">   Services.prefs.setBoolPref(&quot;mail.biff.alert.show_preview&quot;, false);</span>
<a href="#l17.82"></a><span id="l17.82">   Services.prefs.setBoolPref(&quot;mail.biff.alert.show_sender&quot;, true);</span>
<a href="#l17.83"></a><span id="l17.83">   Services.prefs.setBoolPref(&quot;mail.biff.alert.show_subject&quot;, false);</span>
<a href="#l17.84"></a><span id="l17.84"> </span>
<a href="#l17.85"></a><span id="l17.85" class="difflineminus">-  let sender = [&quot;John Cleese&quot;, &quot;john@cleese.net&quot;];</span>
<a href="#l17.86"></a><span id="l17.86" class="difflineplus">+  let sender = [&quot;John Cleese&quot;, &quot;john@cleese.invalid&quot;];</span>
<a href="#l17.87"></a><span id="l17.87">   let subject = &quot;This should not be displayed&quot;;</span>
<a href="#l17.88"></a><span id="l17.88">   let messageBody = &quot;My message preview&quot;;</span>
<a href="#l17.89"></a><span id="l17.89"> </span>
<a href="#l17.90"></a><span id="l17.90">   make_gradually_newer_sets_in_folder(gFolder,</span>
<a href="#l17.91"></a><span id="l17.91">                                       [{count: 1,</span>
<a href="#l17.92"></a><span id="l17.92">                                         from: sender,</span>
<a href="#l17.93"></a><span id="l17.93">                                         subject: subject,</span>
<a href="#l17.94"></a><span id="l17.94">                                         body: {body: messageBody}}]);</span>
<a href="#l17.95"></a><span id="l17.95" class="difflineat">@@ -442,17 +442,17 @@ test_hide_preview.EXCLUDED_PLATFORMS = [</span>
<a href="#l17.96"></a><span id="l17.96"> /**</span>
<a href="#l17.97"></a><span id="l17.97">  * Test that we can show justthe message preview in the notification.</span>
<a href="#l17.98"></a><span id="l17.98">  */</span>
<a href="#l17.99"></a><span id="l17.99"> function test_show_only_preview() {</span>
<a href="#l17.100"></a><span id="l17.100">   Services.prefs.setBoolPref(&quot;mail.biff.alert.show_preview&quot;, true);</span>
<a href="#l17.101"></a><span id="l17.101">   Services.prefs.setBoolPref(&quot;mail.biff.alert.show_sender&quot;, false);</span>
<a href="#l17.102"></a><span id="l17.102">   Services.prefs.setBoolPref(&quot;mail.biff.alert.show_subject&quot;, false);</span>
<a href="#l17.103"></a><span id="l17.103"> </span>
<a href="#l17.104"></a><span id="l17.104" class="difflineminus">-  let sender = [&quot;John Cleese&quot;, &quot;john@cleese.net&quot;];</span>
<a href="#l17.105"></a><span id="l17.105" class="difflineplus">+  let sender = [&quot;John Cleese&quot;, &quot;john@cleese.invalid&quot;];</span>
<a href="#l17.106"></a><span id="l17.106">   let subject = &quot;This should not be displayed&quot;;</span>
<a href="#l17.107"></a><span id="l17.107">   let messageBody = &quot;My message preview&quot;;</span>
<a href="#l17.108"></a><span id="l17.108">   make_gradually_newer_sets_in_folder(gFolder,</span>
<a href="#l17.109"></a><span id="l17.109">                                       [{count: 1,</span>
<a href="#l17.110"></a><span id="l17.110">                                         from: sender,</span>
<a href="#l17.111"></a><span id="l17.111">                                         subject: subject,</span>
<a href="#l17.112"></a><span id="l17.112">                                         body: {body: messageBody}}]);</span>
<a href="#l17.113"></a><span id="l17.113">   assert_true(gMockAlertsService._didNotify, &quot;Should have notified&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mail/test/mozmill/quick-filter-bar/test-filter-logic.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mail/test/mozmill/quick-filter-bar/test-filter-logic.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -105,17 +105,17 @@ function add_email_to_address_book(aEmai</span>
<a href="#l18.4"></a><span id="l18.4">     }</span>
<a href="#l18.5"></a><span id="l18.5">   }</span>
<a href="#l18.6"></a><span id="l18.6"> </span>
<a href="#l18.7"></a><span id="l18.7">   throw new Error(&quot;Unable to find any suitable address book.&quot;);</span>
<a href="#l18.8"></a><span id="l18.8"> }</span>
<a href="#l18.9"></a><span id="l18.9"> </span>
<a href="#l18.10"></a><span id="l18.10"> function test_filter_in_address_book() {</span>
<a href="#l18.11"></a><span id="l18.11">   let bookSetDef = {</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-    from: [&quot;Qbert Q Qbington&quot;, &quot;q@q.q&quot;],</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+    from: [&quot;Qbert Q Qbington&quot;, &quot;q@q.invalid&quot;],</span>
<a href="#l18.14"></a><span id="l18.14">     count: 1</span>
<a href="#l18.15"></a><span id="l18.15">   };</span>
<a href="#l18.16"></a><span id="l18.16">   add_email_to_address_book(bookSetDef.from[1]);</span>
<a href="#l18.17"></a><span id="l18.17">   let folder = create_folder(&quot;MesssageFilterBarInAddressBook&quot;);</span>
<a href="#l18.18"></a><span id="l18.18">   let [setBook, setNoBook] = make_new_sets_in_folder(folder,</span>
<a href="#l18.19"></a><span id="l18.19">                                [bookSetDef, {count: 1}]);</span>
<a href="#l18.20"></a><span id="l18.20">   be_in_folder(folder);</span>
<a href="#l18.21"></a><span id="l18.21">   toggle_boolean_constraints(&quot;addrbook&quot;);</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineat">@@ -162,17 +162,17 @@ function test_filter_tags() {</span>
<a href="#l18.23"></a><span id="l18.23"> </span>
<a href="#l18.24"></a><span id="l18.24">   toggle_boolean_constraints(&quot;tags&quot;); // no constraints</span>
<a href="#l18.25"></a><span id="l18.25">   toggle_boolean_constraints(&quot;tags&quot;); // should be any tag (not tagC!)</span>
<a href="#l18.26"></a><span id="l18.26">   assert_messages_in_view([setTagA, setTagB, setTagAB, setTagC]);</span>
<a href="#l18.27"></a><span id="l18.27"> }</span>
<a href="#l18.28"></a><span id="l18.28"> </span>
<a href="#l18.29"></a><span id="l18.29"> function test_filter_text_single_word_and_predicates() {</span>
<a href="#l18.30"></a><span id="l18.30">   let folder = create_folder(&quot;QuickFilterBarTextSingleWord&quot;);</span>
<a href="#l18.31"></a><span id="l18.31" class="difflineminus">-  let whoFoo = [&quot;zabba&quot;, &quot;foo@madeup.nul&quot;];</span>
<a href="#l18.32"></a><span id="l18.32" class="difflineplus">+  let whoFoo = [&quot;zabba&quot;, &quot;foo@madeup.invalid&quot;];</span>
<a href="#l18.33"></a><span id="l18.33">   let [setInert, setSenderFoo, setRecipientsFoo, setSubjectFoo, setBodyFoo] =</span>
<a href="#l18.34"></a><span id="l18.34">     make_new_sets_in_folder(folder, [</span>
<a href="#l18.35"></a><span id="l18.35">       {count: 1}, {count:1, from: whoFoo}, {count: 1, to: [whoFoo]},</span>
<a href="#l18.36"></a><span id="l18.36">       {count: 1, subject: &quot;foo&quot;}, {count: 1, body: {body: &quot;foo&quot;}}]);</span>
<a href="#l18.37"></a><span id="l18.37">   be_in_folder(folder);</span>
<a href="#l18.38"></a><span id="l18.38"> </span>
<a href="#l18.39"></a><span id="l18.39">   // by default, sender/recipients/subject are selected</span>
<a href="#l18.40"></a><span id="l18.40">   assert_text_constraints_checked(&quot;sender&quot;, &quot;recipients&quot;, &quot;subject&quot;);</span>
<a href="#l18.41"></a><span id="l18.41" class="difflineat">@@ -217,18 +217,18 @@ function test_filter_text_single_word_an</span>
<a href="#l18.42"></a><span id="l18.42">  *  This means that given &quot;foo bar&quot; we should be able to match &quot;bar foo&quot; in</span>
<a href="#l18.43"></a><span id="l18.43">  *  a subject and &quot;foo&quot; in the sender and &quot;bar&quot; in the recipient.  And that</span>
<a href="#l18.44"></a><span id="l18.44">  *  constitutes sufficient positive coverage, although we also want to make</span>
<a href="#l18.45"></a><span id="l18.45">  *  sure that just a single term match is insufficient.</span>
<a href="#l18.46"></a><span id="l18.46">  */</span>
<a href="#l18.47"></a><span id="l18.47"> function test_filter_text_multi_word() {</span>
<a href="#l18.48"></a><span id="l18.48">   let folder = create_folder(&quot;QuickFilterBarTextMultiWord&quot;);</span>
<a href="#l18.49"></a><span id="l18.49"> </span>
<a href="#l18.50"></a><span id="l18.50" class="difflineminus">-  let whoFoo = [&quot;foo&quot;, &quot;zabba@madeup.nul&quot;];</span>
<a href="#l18.51"></a><span id="l18.51" class="difflineminus">-  let whoBar = [&quot;zabba&quot;, &quot;bar@madeup.nul&quot;];</span>
<a href="#l18.52"></a><span id="l18.52" class="difflineplus">+  let whoFoo = [&quot;foo&quot;, &quot;zabba@madeup.invalid&quot;];</span>
<a href="#l18.53"></a><span id="l18.53" class="difflineplus">+  let whoBar = [&quot;zabba&quot;, &quot;bar@madeup.invalid&quot;];</span>
<a href="#l18.54"></a><span id="l18.54">   let [setInert, setPeepMatch, setSubjReverse, setSubjectJustFoo] =</span>
<a href="#l18.55"></a><span id="l18.55">     make_new_sets_in_folder(folder, [</span>
<a href="#l18.56"></a><span id="l18.56">       {count: 1}, {count:1, from: whoFoo, to: [whoBar]},</span>
<a href="#l18.57"></a><span id="l18.57">       {count: 1, subject: &quot;bar foo&quot;}, {count: 1, from: whoFoo}]);</span>
<a href="#l18.58"></a><span id="l18.58">   be_in_folder(folder);</span>
<a href="#l18.59"></a><span id="l18.59"> </span>
<a href="#l18.60"></a><span id="l18.60">   // (precondition)</span>
<a href="#l18.61"></a><span id="l18.61">   assert_text_constraints_checked(&quot;sender&quot;, &quot;recipients&quot;, &quot;subject&quot;);</span>
<a href="#l18.62"></a><span id="l18.62" class="difflineat">@@ -238,18 +238,18 @@ function test_filter_text_multi_word() {</span>
<a href="#l18.63"></a><span id="l18.63"> }</span>
<a href="#l18.64"></a><span id="l18.64"> </span>
<a href="#l18.65"></a><span id="l18.65"> /**</span>
<a href="#l18.66"></a><span id="l18.66">  * Make sure that when dropping all constraints on toggle off or changing</span>
<a href="#l18.67"></a><span id="l18.67">  *  folders that we persist/propagate the state of the</span>
<a href="#l18.68"></a><span id="l18.68">  *  sender/recipients/subject/body toggle buttons.</span>
<a href="#l18.69"></a><span id="l18.69">  */</span>
<a href="#l18.70"></a><span id="l18.70"> function test_filter_text_constraints_propagate() {</span>
<a href="#l18.71"></a><span id="l18.71" class="difflineminus">-  let whoFoo = [&quot;foo&quot;, &quot;zabba@madeup.nul&quot;];</span>
<a href="#l18.72"></a><span id="l18.72" class="difflineminus">-  let whoBar = [&quot;zabba&quot;, &quot;bar@madeup.nul&quot;];</span>
<a href="#l18.73"></a><span id="l18.73" class="difflineplus">+  let whoFoo = [&quot;foo&quot;, &quot;zabba@madeup.invalid&quot;];</span>
<a href="#l18.74"></a><span id="l18.74" class="difflineplus">+  let whoBar = [&quot;zabba&quot;, &quot;bar@madeup.invalid&quot;];</span>
<a href="#l18.75"></a><span id="l18.75"> </span>
<a href="#l18.76"></a><span id="l18.76">   let folderOne = create_folder(&quot;QuickFilterBarTextPropagate1&quot;);</span>
<a href="#l18.77"></a><span id="l18.77">   let [setSubjFoo, setWhoFoo] = make_new_sets_in_folder(folderOne,</span>
<a href="#l18.78"></a><span id="l18.78">     [{count: 1, subject: &quot;foo&quot;}, {count: 1, from: whoFoo}]);</span>
<a href="#l18.79"></a><span id="l18.79">   let folderTwo = create_folder(&quot;QuickFilterBarTextPropagate2&quot;);</span>
<a href="#l18.80"></a><span id="l18.80">   let [setSubjBar, setWhoBar] = make_new_sets_in_folder(folderTwo,</span>
<a href="#l18.81"></a><span id="l18.81">     [{count: 1, subject: &quot;bar&quot;}, {count: 1, from: whoBar}]);</span>
<a href="#l18.82"></a><span id="l18.82"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mail/test/mozmill/runtest.py</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mail/test/mozmill/runtest.py</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -136,49 +136,49 @@ class ThunderTestProfile(mozrunner.Thund</span>
<a href="#l19.4"></a><span id="l19.4">         'mail.account.account3.server' :  &quot;server3&quot;,</span>
<a href="#l19.5"></a><span id="l19.5">         'mail.accountmanager.accounts' :  &quot;account1,account2,account3&quot;,</span>
<a href="#l19.6"></a><span id="l19.6">         'mail.accountmanager.defaultaccount' :  &quot;account2&quot;,</span>
<a href="#l19.7"></a><span id="l19.7">         'mail.accountmanager.localfoldersserver' :  &quot;server1&quot;,</span>
<a href="#l19.8"></a><span id="l19.8">         'mail.identity.id1.fullName' :  &quot;Tinderbox&quot;,</span>
<a href="#l19.9"></a><span id="l19.9">         'mail.identity.id1.htmlSigFormat' : False,</span>
<a href="#l19.10"></a><span id="l19.10">         'mail.identity.id1.htmlSigText' : &quot;Tinderbox is soo 90ies&quot;,</span>
<a href="#l19.11"></a><span id="l19.11">         'mail.identity.id1.smtpServer' :  &quot;smtp1&quot;,</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-        'mail.identity.id1.useremail' :  &quot;tinderbox@invalid.com&quot;,</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+        'mail.identity.id1.useremail' :  &quot;tinderbox@foo.invalid&quot;,</span>
<a href="#l19.14"></a><span id="l19.14">         'mail.identity.id1.valid' :  True,</span>
<a href="#l19.15"></a><span id="l19.15">         'mail.identity.id2.fullName' : &quot;Tinderboxpushlog&quot;,</span>
<a href="#l19.16"></a><span id="l19.16">         'mail.identity.id2.htmlSigFormat' : True,</span>
<a href="#l19.17"></a><span id="l19.17">         'mail.identity.id2.htmlSigText' : &quot;Tinderboxpushlog is the new &lt;b&gt;hotness!&lt;/b&gt;&quot;,</span>
<a href="#l19.18"></a><span id="l19.18">         'mail.identity.id2.smtpServer' : &quot;smtp1&quot;,</span>
<a href="#l19.19"></a><span id="l19.19" class="difflineminus">-        'mail.identity.id2.useremail' : &quot;tinderboxpushlog@invalid.com&quot;,</span>
<a href="#l19.20"></a><span id="l19.20" class="difflineplus">+        'mail.identity.id2.useremail' : &quot;tinderboxpushlog@foo.invalid&quot;,</span>
<a href="#l19.21"></a><span id="l19.21">         'mail.identity.id2.valid' : True,</span>
<a href="#l19.22"></a><span id="l19.22">         'mail.server.server1.directory-rel' :  &quot;[ProfD]Mail/Local Folders&quot;,</span>
<a href="#l19.23"></a><span id="l19.23">         'mail.server.server1.hostname' :  &quot;Local Folders&quot;,</span>
<a href="#l19.24"></a><span id="l19.24">         'mail.server.server1.name' :  &quot;Local Folders&quot;,</span>
<a href="#l19.25"></a><span id="l19.25">         'mail.server.server1.type' :  &quot;none&quot;,</span>
<a href="#l19.26"></a><span id="l19.26">         'mail.server.server1.userName' :  &quot;nobody&quot;,</span>
<a href="#l19.27"></a><span id="l19.27">         'mail.server.server2.check_new_mail' :  False,</span>
<a href="#l19.28"></a><span id="l19.28">         'mail.server.server2.directory-rel' :  &quot;[ProfD]Mail/tinderbox&quot;,</span>
<a href="#l19.29"></a><span id="l19.29">         'mail.server.server2.download_on_biff' :  True,</span>
<a href="#l19.30"></a><span id="l19.30">         'mail.server.server2.hostname' :  &quot;tinderbox&quot;,</span>
<a href="#l19.31"></a><span id="l19.31">         'mail.server.server2.login_at_startup' :  False,</span>
<a href="#l19.32"></a><span id="l19.32" class="difflineminus">-        'mail.server.server2.name' :  &quot;tinderbox@invalid.com&quot;,</span>
<a href="#l19.33"></a><span id="l19.33" class="difflineplus">+        'mail.server.server2.name' :  &quot;tinderbox@foo.invalid&quot;,</span>
<a href="#l19.34"></a><span id="l19.34">         'mail.server.server2.type' :  &quot;pop3&quot;,</span>
<a href="#l19.35"></a><span id="l19.35">         'mail.server.server2.userName' :  &quot;tinderbox&quot;,</span>
<a href="#l19.36"></a><span id="l19.36">         'mail.server.server2.whiteListAbURI': &quot;&quot;,</span>
<a href="#l19.37"></a><span id="l19.37">         'mail.server.server3.hostname' :  &quot;prpl-irc&quot;,</span>
<a href="#l19.38"></a><span id="l19.38">         'mail.server.server3.imAccount' :  &quot;account1&quot;,</span>
<a href="#l19.39"></a><span id="l19.39">         'mail.server.server3.type' :  &quot;im&quot;,</span>
<a href="#l19.40"></a><span id="l19.40" class="difflineminus">-        'mail.server.server3.userName' :  &quot;mozmilltest@irc.mozilla.org&quot;,</span>
<a href="#l19.41"></a><span id="l19.41" class="difflineplus">+        'mail.server.server3.userName' :  &quot;mozmilltest@irc.mozilla.invalid&quot;,</span>
<a href="#l19.42"></a><span id="l19.42">         'mail.smtp.defaultserver' :  &quot;smtp1&quot;,</span>
<a href="#l19.43"></a><span id="l19.43">         'mail.smtpserver.smtp1.hostname' :  &quot;tinderbox&quot;,</span>
<a href="#l19.44"></a><span id="l19.44">         'mail.smtpserver.smtp1.username' :  &quot;tinderbox&quot;,</span>
<a href="#l19.45"></a><span id="l19.45">         'mail.smtpservers' :  &quot;smtp1&quot;,</span>
<a href="#l19.46"></a><span id="l19.46">         'messenger.account.account1.autoLogin' :  False,</span>
<a href="#l19.47"></a><span id="l19.47">         'messenger.account.account1.firstConnectionState' :  1,</span>
<a href="#l19.48"></a><span id="l19.48" class="difflineminus">-        'messenger.account.account1.name' :  &quot;mozmilltest@irc.mozilla.org&quot;,</span>
<a href="#l19.49"></a><span id="l19.49" class="difflineplus">+        'messenger.account.account1.name' :  &quot;mozmilltest@irc.mozilla.invalid&quot;,</span>
<a href="#l19.50"></a><span id="l19.50">         'messenger.account.account1.prpl' :  &quot;prpl-irc&quot;,</span>
<a href="#l19.51"></a><span id="l19.51">         'messenger.accounts' :  &quot;account1&quot;,</span>
<a href="#l19.52"></a><span id="l19.52">     }</span>
<a href="#l19.53"></a><span id="l19.53"> </span>
<a href="#l19.54"></a><span id="l19.54">     def create_new_profile(self, binary):</span>
<a href="#l19.55"></a><span id="l19.55">         '''</span>
<a href="#l19.56"></a><span id="l19.56">         We always put our profile in the same location.  We only clear it out</span>
<a href="#l19.57"></a><span id="l19.57">         when we are creating a new profile so that we can go in after the run</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-address-book-helpers.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-address-book-helpers.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -240,17 +240,17 @@ function get_mailing_list_from_address_b</span>
<a href="#l20.4"></a><span id="l20.4"> /* Given some address book, adds a collection of contacts to that</span>
<a href="#l20.5"></a><span id="l20.5">  * address book.</span>
<a href="#l20.6"></a><span id="l20.6">  * @param aAddressBook an address book to add the contacts to</span>
<a href="#l20.7"></a><span id="l20.7">  * @param aContacts a collection of nsIAbCards, or contacts,</span>
<a href="#l20.8"></a><span id="l20.8">  *                  where each contact has members &quot;email&quot;</span>
<a href="#l20.9"></a><span id="l20.9">  *                  and &quot;displayName&quot;</span>
<a href="#l20.10"></a><span id="l20.10">  *</span>
<a href="#l20.11"></a><span id="l20.11">  *                  Example:</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">- *                  [{email: 'test@test.com', displayName: 'Sammy Jenkis'}]</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+ *                  [{email: 'test@example.com', displayName: 'Sammy Jenkis'}]</span>
<a href="#l20.14"></a><span id="l20.14">  */</span>
<a href="#l20.15"></a><span id="l20.15"> function load_contacts_into_address_book(aAddressBook, aContacts)</span>
<a href="#l20.16"></a><span id="l20.16"> {</span>
<a href="#l20.17"></a><span id="l20.17">   for each (contact in aContacts) {</span>
<a href="#l20.18"></a><span id="l20.18"> </span>
<a href="#l20.19"></a><span id="l20.19">     if (!(contact instanceof Ci.nsIAbCard))</span>
<a href="#l20.20"></a><span id="l20.20">       contact = create_contact(contact.email,</span>
<a href="#l20.21"></a><span id="l20.21">                                contact.displayName, true);</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineat">@@ -262,17 +262,17 @@ function load_contacts_into_address_book</span>
<a href="#l20.23"></a><span id="l20.23"> /* Given some mailing list, adds a collection of contacts to that</span>
<a href="#l20.24"></a><span id="l20.24">  * mailing list.</span>
<a href="#l20.25"></a><span id="l20.25">  * @param aMailingList a mailing list to add the contacts to</span>
<a href="#l20.26"></a><span id="l20.26">  * @param aContacts a collection of contacts, where each contact is either</span>
<a href="#l20.27"></a><span id="l20.27">  *                  an nsIAbCard, or an object with members &quot;email&quot; and</span>
<a href="#l20.28"></a><span id="l20.28">  *                  &quot;displayName&quot;</span>
<a href="#l20.29"></a><span id="l20.29">  *</span>
<a href="#l20.30"></a><span id="l20.30">  *                  Example:</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">- *                  [{email: 'test@test.com', displayName: 'Sammy Jenkis'}]</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineplus">+ *                  [{email: 'test@example.com', displayName: 'Sammy Jenkis'}]</span>
<a href="#l20.33"></a><span id="l20.33">  */</span>
<a href="#l20.34"></a><span id="l20.34"> function load_contacts_into_mailing_list(aMailingList, aContacts)</span>
<a href="#l20.35"></a><span id="l20.35"> {</span>
<a href="#l20.36"></a><span id="l20.36">   // Surprise! A mailing list is just a super special type of address</span>
<a href="#l20.37"></a><span id="l20.37">   // book.</span>
<a href="#l20.38"></a><span id="l20.38">   load_contacts_into_address_book(aMailingList, aContacts);</span>
<a href="#l20.39"></a><span id="l20.39"> }</span>
<a href="#l20.40"></a><span id="l20.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-nntp-helpers.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-nntp-helpers.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -19,17 +19,17 @@ const RELATIVE_ROOT = '../shared-modules</span>
<a href="#l21.4"></a><span id="l21.4"> </span>
<a href="#l21.5"></a><span id="l21.5"> const MODULES_REQUIRES = ['folder-display-helpers', 'window-helpers'];</span>
<a href="#l21.6"></a><span id="l21.6"> </span>
<a href="#l21.7"></a><span id="l21.7"> const kSimpleNewsArticle =</span>
<a href="#l21.8"></a><span id="l21.8">   &quot;From: John Doe &lt;john.doe@example.com&gt;\n&quot;+</span>
<a href="#l21.9"></a><span id="l21.9">   &quot;Date: Sat, 24 Mar 1990 10:59:24 -0500\n&quot;+</span>
<a href="#l21.10"></a><span id="l21.10">   &quot;Newsgroups: test.subscribe.simple\n&quot;+</span>
<a href="#l21.11"></a><span id="l21.11">   &quot;Subject: H2G2 -- What does it mean?\n&quot;+</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-  &quot;Message-ID: &lt;TSS1@nntp.test&gt;\n&quot;+</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+  &quot;Message-ID: &lt;TSS1@nntp.invalid&gt;\n&quot;+</span>
<a href="#l21.14"></a><span id="l21.14">   &quot;\n&quot;+</span>
<a href="#l21.15"></a><span id="l21.15">   &quot;What does the acronym H2G2 stand for? I've seen it before...\n&quot;;</span>
<a href="#l21.16"></a><span id="l21.16"> </span>
<a href="#l21.17"></a><span id="l21.17"> // The groups to set up on the fake server.</span>
<a href="#l21.18"></a><span id="l21.18"> // It is an array of tuples, where the first element is the group name and the</span>
<a href="#l21.19"></a><span id="l21.19"> // second element is whether or not we should subscribe to it.</span>
<a href="#l21.20"></a><span id="l21.20"> var groups = [</span>
<a href="#l21.21"></a><span id="l21.21">   [&quot;test.empty&quot;, false],</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mailnews/addrbook/test/unit/data/autocomplete.mab</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mailnews/addrbook/test/unit/data/autocomplete.mab</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -18,21 +18,21 @@</span>
<a href="#l22.4"></a><span id="l22.4">   (9D=HomeZipCode)(9E=HomeCountry)(9F=WorkAddress)(A0=WorkAddress2)</span>
<a href="#l22.5"></a><span id="l22.5">   (A1=WorkCity)(A2=WorkState)(A3=WorkZipCode)(A4=WorkCountry)</span>
<a href="#l22.6"></a><span id="l22.6">   (A5=JobTitle)(A6=Department)(A7=Company)(A8=_AimScreenName)</span>
<a href="#l22.7"></a><span id="l22.7">   (A9=AnniversaryYear)(AA=AnniversaryMonth)(AB=AnniversaryDay)</span>
<a href="#l22.8"></a><span id="l22.8">   (AC=SpouseName)(AD=FamilyName)(AE=DefaultAddress)(AF=Category)</span>
<a href="#l22.9"></a><span id="l22.9">   (B0=WebPage1)(B1=WebPage2)(B2=BirthYear)(B3=BirthMonth)(B4=BirthDay)</span>
<a href="#l22.10"></a><span id="l22.10">   (B5=Custom1)(B6=Custom2)(B7=Custom3)&gt;</span>
<a href="#l22.11"></a><span id="l22.11"> </span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-&lt;(A8=8)(81=firs)(82=lastn)(83=)(84=d)(85=ni)(86=ema@invalid.com)(80=0)</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineminus">-  (87=1)(88=first)(89=l)(8A=di)(8B=nic)(8C=emai@invalid.com)(8D=2)(8E=f)</span>
<a href="#l22.14"></a><span id="l22.14" class="difflineminus">-  (8F=la)(90=dis)(91=nick)(92=email@invalid.com)(93=3)(94=fi)(95=las)</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineminus">-  (96=disp)(97=nickn)(98=e@invalid.com)(99=4)(9A=fir)(9B=last)(9C=displ)</span>
<a href="#l22.16"></a><span id="l22.16" class="difflineminus">-  (9D=n)(9E=em@invalid.com)(9F=5)(A0=t)(A1=list)(A2=6)(A3=te)(A4=lis)</span>
<a href="#l22.17"></a><span id="l22.17" class="difflineplus">+&lt;(A8=8)(81=firs)(82=lastn)(83=)(84=d)(85=ni)(86=ema@foo.invalid)(80=0)</span>
<a href="#l22.18"></a><span id="l22.18" class="difflineplus">+  (87=1)(88=first)(89=l)(8A=di)(8B=nic)(8C=emai@foo.invalid)(8D=2)(8E=f)</span>
<a href="#l22.19"></a><span id="l22.19" class="difflineplus">+  (8F=la)(90=dis)(91=nick)(92=email@foo.invalid)(93=3)(94=fi)(95=las)</span>
<a href="#l22.20"></a><span id="l22.20" class="difflineplus">+  (96=disp)(97=nickn)(98=e@foo.invalid)(99=4)(9A=fir)(9B=last)(9C=displ)</span>
<a href="#l22.21"></a><span id="l22.21" class="difflineplus">+  (9D=n)(9E=em@foo.invalid)(9F=5)(A0=t)(A1=list)(A2=6)(A3=te)(A4=lis)</span>
<a href="#l22.22"></a><span id="l22.22">   (A5=7)(A6=tes)(A7=li)&gt;</span>
<a href="#l22.23"></a><span id="l22.23"> {1:^80 {(k^BE:c)(s=9)} </span>
<a href="#l22.24"></a><span id="l22.24">   [1:^82(^BD=8)]</span>
<a href="#l22.25"></a><span id="l22.25">   [1(^83^81)(^84^82)(^85=)(^86=)(^87=d)(^88=ni)(^89^86)(^8A^86)(^8B=)</span>
<a href="#l22.26"></a><span id="l22.26">     (^8C=0)(^8D=0)(^8E=0)(^8F=)(^90=)(^91=)(^92=)(^93=)(^94=)(^95=)</span>
<a href="#l22.27"></a><span id="l22.27">     (^96=)(^97=)(^98=)(^99=)(^9A=)(^9B=)(^9C=)(^9D=)(^9E=)(^9F=)(^A0=)</span>
<a href="#l22.28"></a><span id="l22.28">     (^A1=)(^A2=)(^A3=)(^A4=)(^A5=)(^A6=)(^A7=)(^A8=)(^A9=)(^AA=)(^AB=)</span>
<a href="#l22.29"></a><span id="l22.29">     (^AC=)(^AD=)(^AE=)(^AF=)(^B0=)(^B1=)(^B2=)(^B3=)(^B4=)(^B5=)(^B6=)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mailnews/addrbook/test/unit/data/cardForEmail.mab</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mailnews/addrbook/test/unit/data/cardForEmail.mab</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -28,18 +28,18 @@</span>
<a href="#l23.4"></a><span id="l23.4">   (90=HomeCountry1)(91=WorkPhone1)(92=PrimaryEmail1@test.invalid)(93</span>
<a href="#l23.5"></a><span id="l23.5">     =HomeAddress11)(94=primaryemail1@test.invalid)(95=WorkCity1)(96</span>
<a href="#l23.6"></a><span id="l23.6">     =SecondEmail1$C3$90@test.invalid)(97=HomeZipCode1)(98=Custom31)</span>
<a href="#l23.7"></a><span id="l23.7">   (99=FaxNumber1)(9A=Custom11)(9B=HomePhone1)(9C=FirstName1)(9D=HomeCity1)</span>
<a href="#l23.8"></a><span id="l23.8">   (9E=PagerNumber1)(9F=CellularNumber1)(A0=WorkAddress21)(A1=WorkState1)</span>
<a href="#l23.9"></a><span id="l23.9">   (A2=HomeAddress21)(A3=http://WebPage21)(A4=Notes1)(A5=Custom21)(A6</span>
<a href="#l23.10"></a><span id="l23.10">     =Department1)(A7=WorkCountry1)(A8=HomeState1)(A9=JobTitle1)(AA</span>
<a href="#l23.11"></a><span id="l23.11">     =Organization1)(B0=1245128765)(B1=johnd)(B2=John Doe)(B3=Doe)(B4</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-    =john.doe@mailinator.com)(B5=John)(AD=3)(B6=janed)(B7=Jane Doe)</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineminus">-  (B8=jane.doe@mailinator.com)(B9=Jane)&gt;</span>
<a href="#l23.14"></a><span id="l23.14" class="difflineplus">+    =john.doe@mailinator.invalid)(B5=John)(AD=3)(B6=janed)(B7=Jane Doe)</span>
<a href="#l23.15"></a><span id="l23.15" class="difflineplus">+  (B8=jane.doe@mailinator.invalid)(B9=Jane)&gt;</span>
<a href="#l23.16"></a><span id="l23.16"> {1:^80 {(k^BC:c)(s=9)} </span>
<a href="#l23.17"></a><span id="l23.17">   [1:^82(^BB=4)]</span>
<a href="#l23.18"></a><span id="l23.18">   [1(^84^81)(^C3=1)(^87^83)(^8E=0)(^8D=0)(^83^84)(^8C=0)(^B8=0)(^B9=1)</span>
<a href="#l23.19"></a><span id="l23.19">     (^89=)(^8A=)]</span>
<a href="#l23.20"></a><span id="l23.20">   [2(^B0=)(^84^86)(^B6^87)(^8D=0)(^B8^88)(^B9=2)(^AF^8A)(^88^8B)(^87^8C)</span>
<a href="#l23.21"></a><span id="l23.21">     (^A3^8D)(^A8^8E)(^85=)(^9F^8F)(^9E^90)(^8F^91)(^89^92)(^99^93)(^8A^94)</span>
<a href="#l23.22"></a><span id="l23.22">     (^A1^95)(^8E=1)(^8B^96)(^9D^97)(^B5^98)(^91^99)(^B3^9A)(^90^9B)</span>
<a href="#l23.23"></a><span id="l23.23">     (^83^9C)(^9B^9D)(^92^9E)(^93^9F)(^8C=0)(^A0^A0)(^A2^A1)(^B2=)(^9A^A2)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mailnews/addrbook/test/unit/test_basic_nsIAbCard.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mailnews/addrbook/test/unit/test_basic_nsIAbCard.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -2,19 +2,19 @@</span>
<a href="#l24.4"></a><span id="l24.4"> /*</span>
<a href="#l24.5"></a><span id="l24.5">  * Test suite for basic nsIAbCard functions.</span>
<a href="#l24.6"></a><span id="l24.6">  */</span>
<a href="#l24.7"></a><span id="l24.7"> </span>
<a href="#l24.8"></a><span id="l24.8"> // Intersperse these with UTF-8 values to check we handle them correctly.</span>
<a href="#l24.9"></a><span id="l24.9"> const kFNValue = &quot;testFirst\u00D0&quot;;</span>
<a href="#l24.10"></a><span id="l24.10"> const kLNValue = &quot;testLast&quot;;</span>
<a href="#l24.11"></a><span id="l24.11"> const kDNValue = &quot;testDisplay\u00D1&quot;;</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-const kEmailValue = &quot;testEmail\u00D2@invalid.com&quot;;</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineminus">-const kEmailValueLC = &quot;testemail\u00D2@invalid.com&quot;;</span>
<a href="#l24.14"></a><span id="l24.14" class="difflineminus">-const kEmailValue2 = &quot;test@test.invalid.com&quot;;</span>
<a href="#l24.15"></a><span id="l24.15" class="difflineplus">+const kEmailValue = &quot;testEmail\u00D2@foo.invalid&quot;;</span>
<a href="#l24.16"></a><span id="l24.16" class="difflineplus">+const kEmailValueLC = &quot;testemail\u00D2@foo.invalid&quot;;</span>
<a href="#l24.17"></a><span id="l24.17" class="difflineplus">+const kEmailValue2 = &quot;test@test.foo.invalid&quot;;</span>
<a href="#l24.18"></a><span id="l24.18"> // Email without the @ or anything after it.</span>
<a href="#l24.19"></a><span id="l24.19"> const kEmailReducedValue = &quot;testEmail\u00D2&quot;;</span>
<a href="#l24.20"></a><span id="l24.20"> const kCompanyValue = &quot;Test\u00D0 Company&quot;;</span>
<a href="#l24.21"></a><span id="l24.21"> </span>
<a href="#l24.22"></a><span id="l24.22"> function run_test() {</span>
<a href="#l24.23"></a><span id="l24.23">   // Create a new card</span>
<a href="#l24.24"></a><span id="l24.24">   var card = Components.classes[&quot;@mozilla.org/addressbook/cardproperty;1&quot;]</span>
<a href="#l24.25"></a><span id="l24.25">                        .createInstance(Components.interfaces.nsIAbCard);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mailnews/addrbook/test/unit/test_collection.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mailnews/addrbook/test/unit/test_collection.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -12,47 +12,47 @@ const nsIAbPMF = Components.interfaces.n</span>
<a href="#l25.4"></a><span id="l25.4"> </span>
<a href="#l25.5"></a><span id="l25.5"> // Source fields (emailHeader/mailFormat) and expected results for use for</span>
<a href="#l25.6"></a><span id="l25.6"> // testing the addition of new addresses to the database.</span>
<a href="#l25.7"></a><span id="l25.7"> //</span>
<a href="#l25.8"></a><span id="l25.8"> // Note: these email addresses should be different to allow collecting an</span>
<a href="#l25.9"></a><span id="l25.9"> // address to add a different card each time.</span>
<a href="#l25.10"></a><span id="l25.10"> var addEmailChecks =</span>
<a href="#l25.11"></a><span id="l25.11">   // First 3 items aimed at basic collection and mail format.</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-  [ { emailHeader: &quot;test0@invalid.com&quot;,</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineminus">-      primaryEmail: &quot;test0@invalid.com&quot;,</span>
<a href="#l25.14"></a><span id="l25.14" class="difflineplus">+  [ { emailHeader: &quot;test0@foo.invalid&quot;,</span>
<a href="#l25.15"></a><span id="l25.15" class="difflineplus">+      primaryEmail: &quot;test0@foo.invalid&quot;,</span>
<a href="#l25.16"></a><span id="l25.16">       mailFormat: nsIAbPMF.unknown,</span>
<a href="#l25.17"></a><span id="l25.17">       displayName: &quot;&quot;,</span>
<a href="#l25.18"></a><span id="l25.18">       firstName: &quot;&quot;,</span>
<a href="#l25.19"></a><span id="l25.19">       lastName: &quot;&quot;,</span>
<a href="#l25.20"></a><span id="l25.20">       screenName: &quot;&quot; },</span>
<a href="#l25.21"></a><span id="l25.21" class="difflineminus">-    { emailHeader: &quot;test1@invalid.com&quot;,</span>
<a href="#l25.22"></a><span id="l25.22" class="difflineminus">-      primaryEmail: &quot;test1@invalid.com&quot;,</span>
<a href="#l25.23"></a><span id="l25.23" class="difflineplus">+    { emailHeader: &quot;test1@foo.invalid&quot;,</span>
<a href="#l25.24"></a><span id="l25.24" class="difflineplus">+      primaryEmail: &quot;test1@foo.invalid&quot;,</span>
<a href="#l25.25"></a><span id="l25.25">       mailFormat: nsIAbPMF.plaintext,</span>
<a href="#l25.26"></a><span id="l25.26">       displayName: &quot;&quot;,</span>
<a href="#l25.27"></a><span id="l25.27">       firstName: &quot;&quot;,</span>
<a href="#l25.28"></a><span id="l25.28">       lastName: &quot;&quot;,</span>
<a href="#l25.29"></a><span id="l25.29">       screenName: &quot;&quot; },</span>
<a href="#l25.30"></a><span id="l25.30" class="difflineminus">-    { emailHeader: &quot;test2@invalid.com&quot;,</span>
<a href="#l25.31"></a><span id="l25.31" class="difflineminus">-      primaryEmail: &quot;test2@invalid.com&quot;,</span>
<a href="#l25.32"></a><span id="l25.32" class="difflineplus">+    { emailHeader: &quot;test2@foo.invalid&quot;,</span>
<a href="#l25.33"></a><span id="l25.33" class="difflineplus">+      primaryEmail: &quot;test2@foo.invalid&quot;,</span>
<a href="#l25.34"></a><span id="l25.34">       mailFormat: nsIAbPMF.html,</span>
<a href="#l25.35"></a><span id="l25.35">       displayName: &quot;&quot;,</span>
<a href="#l25.36"></a><span id="l25.36">       firstName: &quot;&quot;,</span>
<a href="#l25.37"></a><span id="l25.37">       lastName: &quot;&quot;,</span>
<a href="#l25.38"></a><span id="l25.38">       screenName: &quot;&quot; },</span>
<a href="#l25.39"></a><span id="l25.39">     // UTF-8 based addresses (bug 407564)</span>
<a href="#l25.40"></a><span id="l25.40" class="difflineminus">-    { emailHeader: &quot;test0@\u00D0.com&quot;,</span>
<a href="#l25.41"></a><span id="l25.41" class="difflineminus">-      primaryEmail: &quot;test0@\u00D0.com&quot;,</span>
<a href="#l25.42"></a><span id="l25.42" class="difflineplus">+    { emailHeader: &quot;test0@\u00D0.invalid&quot;,</span>
<a href="#l25.43"></a><span id="l25.43" class="difflineplus">+      primaryEmail: &quot;test0@\u00D0.invalid&quot;,</span>
<a href="#l25.44"></a><span id="l25.44">       mailFormat: nsIAbPMF.unknown,</span>
<a href="#l25.45"></a><span id="l25.45">       displayName: &quot;&quot;,</span>
<a href="#l25.46"></a><span id="l25.46">       firstName: &quot;&quot;,</span>
<a href="#l25.47"></a><span id="l25.47">       lastName: &quot;&quot;,</span>
<a href="#l25.48"></a><span id="l25.48">       screenName: &quot;&quot; },</span>
<a href="#l25.49"></a><span id="l25.49" class="difflineminus">-    { emailHeader: &quot;test0\u00D0@invalid.com&quot;,</span>
<a href="#l25.50"></a><span id="l25.50" class="difflineminus">-      primaryEmail: &quot;test0\u00D0@invalid.com&quot;,</span>
<a href="#l25.51"></a><span id="l25.51" class="difflineplus">+    { emailHeader: &quot;test0\u00D0@foo.invalid&quot;,</span>
<a href="#l25.52"></a><span id="l25.52" class="difflineplus">+      primaryEmail: &quot;test0\u00D0@foo.invalid&quot;,</span>
<a href="#l25.53"></a><span id="l25.53">       mailFormat: nsIAbPMF.unknown,</span>
<a href="#l25.54"></a><span id="l25.54">       displayName: &quot;&quot;,</span>
<a href="#l25.55"></a><span id="l25.55">       firstName: &quot;&quot;,</span>
<a href="#l25.56"></a><span id="l25.56">       lastName: &quot;&quot;,</span>
<a href="#l25.57"></a><span id="l25.57">       screenName: &quot;&quot; },</span>
<a href="#l25.58"></a><span id="l25.58">     // Screen names</span>
<a href="#l25.59"></a><span id="l25.59">     { emailHeader: &quot;invalid\u00D00@aol.com&quot;,</span>
<a href="#l25.60"></a><span id="l25.60">       primaryEmail: &quot;invalid\u00D00@aol.com&quot;,</span>
<a href="#l25.61"></a><span id="l25.61" class="difflineat">@@ -71,112 +71,112 @@ var addEmailChecks =</span>
<a href="#l25.62"></a><span id="l25.62">     { emailHeader: &quot;invalid2\u00D00@netscape.net&quot;,</span>
<a href="#l25.63"></a><span id="l25.63">       primaryEmail: &quot;invalid2\u00D00@netscape.net&quot;,</span>
<a href="#l25.64"></a><span id="l25.64">       mailFormat: nsIAbPMF.unknown,</span>
<a href="#l25.65"></a><span id="l25.65">       displayName: &quot;&quot;,</span>
<a href="#l25.66"></a><span id="l25.66">       firstName: &quot;&quot;,</span>
<a href="#l25.67"></a><span id="l25.67">       lastName: &quot;&quot;,</span>
<a href="#l25.68"></a><span id="l25.68">       screenName: &quot;invalid2\u00D00&quot; },</span>
<a href="#l25.69"></a><span id="l25.69">     // Collection of names</span>
<a href="#l25.70"></a><span id="l25.70" class="difflineminus">-    { emailHeader: &quot;Test User &lt;test3@invalid.com&gt;&quot;,</span>
<a href="#l25.71"></a><span id="l25.71" class="difflineminus">-      primaryEmail: &quot;test3@invalid.com&quot;,</span>
<a href="#l25.72"></a><span id="l25.72" class="difflineplus">+    { emailHeader: &quot;Test User &lt;test3@foo.invalid&gt;&quot;,</span>
<a href="#l25.73"></a><span id="l25.73" class="difflineplus">+      primaryEmail: &quot;test3@foo.invalid&quot;,</span>
<a href="#l25.74"></a><span id="l25.74">       mailFormat: nsIAbPMF.unknown,</span>
<a href="#l25.75"></a><span id="l25.75">       displayName: &quot;Test User&quot;,</span>
<a href="#l25.76"></a><span id="l25.76">       firstName: &quot;Test&quot;,</span>
<a href="#l25.77"></a><span id="l25.77">       lastName: &quot;User&quot;,</span>
<a href="#l25.78"></a><span id="l25.78">       screenName: &quot;&quot; },</span>
<a href="#l25.79"></a><span id="l25.79" class="difflineminus">-    { emailHeader: &quot;Test &lt;test4@invalid.com&gt;&quot;,</span>
<a href="#l25.80"></a><span id="l25.80" class="difflineminus">-      primaryEmail: &quot;test4@invalid.com&quot;,</span>
<a href="#l25.81"></a><span id="l25.81" class="difflineplus">+    { emailHeader: &quot;Test &lt;test4@foo.invalid&gt;&quot;,</span>
<a href="#l25.82"></a><span id="l25.82" class="difflineplus">+      primaryEmail: &quot;test4@foo.invalid&quot;,</span>
<a href="#l25.83"></a><span id="l25.83">       mailFormat: nsIAbPMF.unknown,</span>
<a href="#l25.84"></a><span id="l25.84">       displayName: &quot;Test&quot;,</span>
<a href="#l25.85"></a><span id="l25.85">       firstName: &quot;&quot;,</span>
<a href="#l25.86"></a><span id="l25.86">       lastName: &quot;&quot;,</span>
<a href="#l25.87"></a><span id="l25.87">       screenName: &quot;&quot; },</span>
<a href="#l25.88"></a><span id="l25.88">     // Collection of names with UTF-8 specific items</span>
<a href="#l25.89"></a><span id="l25.89" class="difflineminus">-    { emailHeader: &quot;Test\u00D0 User &lt;test5@invalid.com&gt;&quot;,</span>
<a href="#l25.90"></a><span id="l25.90" class="difflineminus">-      primaryEmail: &quot;test5@invalid.com&quot;,</span>
<a href="#l25.91"></a><span id="l25.91" class="difflineplus">+    { emailHeader: &quot;Test\u00D0 User &lt;test5@foo.invalid&gt;&quot;,</span>
<a href="#l25.92"></a><span id="l25.92" class="difflineplus">+      primaryEmail: &quot;test5@foo.invalid&quot;,</span>
<a href="#l25.93"></a><span id="l25.93">       mailFormat: nsIAbPMF.unknown,</span>
<a href="#l25.94"></a><span id="l25.94">       displayName: &quot;Test\u00D0 User&quot;,</span>
<a href="#l25.95"></a><span id="l25.95">       firstName: &quot;Test\u00D0&quot;,</span>
<a href="#l25.96"></a><span id="l25.96">       lastName: &quot;User&quot;,</span>
<a href="#l25.97"></a><span id="l25.97">       screenName: &quot;&quot; },</span>
<a href="#l25.98"></a><span id="l25.98" class="difflineminus">-    { emailHeader: &quot;Test\u00D0 &lt;test6@invalid.com&gt;&quot;,</span>
<a href="#l25.99"></a><span id="l25.99" class="difflineminus">-      primaryEmail: &quot;test6@invalid.com&quot;,</span>
<a href="#l25.100"></a><span id="l25.100" class="difflineplus">+    { emailHeader: &quot;Test\u00D0 &lt;test6@foo.invalid&gt;&quot;,</span>
<a href="#l25.101"></a><span id="l25.101" class="difflineplus">+      primaryEmail: &quot;test6@foo.invalid&quot;,</span>
<a href="#l25.102"></a><span id="l25.102">       mailFormat: nsIAbPMF.unknown,</span>
<a href="#l25.103"></a><span id="l25.103">       displayName: &quot;Test\u00D0&quot;,</span>
<a href="#l25.104"></a><span id="l25.104">       firstName: &quot;&quot;,</span>
<a href="#l25.105"></a><span id="l25.105">       lastName: &quot;&quot;,</span>
<a href="#l25.106"></a><span id="l25.106">       screenName: &quot;&quot; },</span>
<a href="#l25.107"></a><span id="l25.107">     ];</span>
<a href="#l25.108"></a><span id="l25.108"> </span>
<a href="#l25.109"></a><span id="l25.109"> // Source fields (emailHeader/mailFormat) and expected results for use for</span>
<a href="#l25.110"></a><span id="l25.110"> // testing the modification of cards in the database.</span>
<a href="#l25.111"></a><span id="l25.111"> //</span>
<a href="#l25.112"></a><span id="l25.112"> // Note: these sets re-use some of the ones for ease of definition.</span>
<a href="#l25.113"></a><span id="l25.113"> var modifyEmailChecks =</span>
<a href="#l25.114"></a><span id="l25.114">   // No display name/other details. Add details and modify mail format.</span>
<a href="#l25.115"></a><span id="l25.115" class="difflineminus">-  [ { emailHeader: &quot;Modify User\u00D0 &lt;test0@\u00D0.com&gt;&quot;,</span>
<a href="#l25.116"></a><span id="l25.116" class="difflineminus">-      primaryEmail: &quot;test0@\u00D0.com&quot;,</span>
<a href="#l25.117"></a><span id="l25.117" class="difflineplus">+  [ { emailHeader: &quot;Modify User\u00D0 &lt;test0@\u00D0.invalid&gt;&quot;,</span>
<a href="#l25.118"></a><span id="l25.118" class="difflineplus">+      primaryEmail: &quot;test0@\u00D0.invalid&quot;,</span>
<a href="#l25.119"></a><span id="l25.119">       mailFormat: nsIAbPMF.html,</span>
<a href="#l25.120"></a><span id="l25.120">       displayName: &quot;Modify User\u00D0&quot;,</span>
<a href="#l25.121"></a><span id="l25.121">       firstName: &quot;Modify&quot;,</span>
<a href="#l25.122"></a><span id="l25.122">       lastName: &quot;User\u00D0&quot;,</span>
<a href="#l25.123"></a><span id="l25.123">       screenName: &quot;&quot; },</span>
<a href="#l25.124"></a><span id="l25.124" class="difflineminus">-    { emailHeader: &quot;Modify &lt;test0\u00D0@invalid.com&gt;&quot;,</span>
<a href="#l25.125"></a><span id="l25.125" class="difflineminus">-      primaryEmail: &quot;test0\u00D0@invalid.com&quot;,</span>
<a href="#l25.126"></a><span id="l25.126" class="difflineplus">+    { emailHeader: &quot;Modify &lt;test0\u00D0@foo.invalid&gt;&quot;,</span>
<a href="#l25.127"></a><span id="l25.127" class="difflineplus">+      primaryEmail: &quot;test0\u00D0@foo.invalid&quot;,</span>
<a href="#l25.128"></a><span id="l25.128">       mailFormat: nsIAbPMF.plaintext,</span>
<a href="#l25.129"></a><span id="l25.129">       displayName: &quot;Modify&quot;,</span>
<a href="#l25.130"></a><span id="l25.130">       firstName: &quot;&quot;,</span>
<a href="#l25.131"></a><span id="l25.131">       lastName: &quot;&quot;,</span>
<a href="#l25.132"></a><span id="l25.132">       screenName: &quot;&quot; },</span>
<a href="#l25.133"></a><span id="l25.133">     // No modification of existing cards with display names</span>
<a href="#l25.134"></a><span id="l25.134" class="difflineminus">-    { emailHeader: &quot;Modify2 User\u00D02 &lt;test0@\u00D0.com&gt;&quot;,</span>
<a href="#l25.135"></a><span id="l25.135" class="difflineminus">-      primaryEmail: &quot;test0@\u00D0.com&quot;,</span>
<a href="#l25.136"></a><span id="l25.136" class="difflineplus">+    { emailHeader: &quot;Modify2 User\u00D02 &lt;test0@\u00D0.invalid&gt;&quot;,</span>
<a href="#l25.137"></a><span id="l25.137" class="difflineplus">+      primaryEmail: &quot;test0@\u00D0.invalid&quot;,</span>
<a href="#l25.138"></a><span id="l25.138">       mailFormat: nsIAbPMF.html,</span>
<a href="#l25.139"></a><span id="l25.139">       displayName: &quot;Modify User\u00D0&quot;,</span>
<a href="#l25.140"></a><span id="l25.140">       firstName: &quot;Modify&quot;,</span>
<a href="#l25.141"></a><span id="l25.141">       lastName: &quot;User\u00D0&quot;,</span>
<a href="#l25.142"></a><span id="l25.142">       screenName: &quot;&quot; },</span>
<a href="#l25.143"></a><span id="l25.143" class="difflineminus">-    { emailHeader: &quot;Modify3 &lt;test0\u00D0@invalid.com&gt;&quot;,</span>
<a href="#l25.144"></a><span id="l25.144" class="difflineminus">-      primaryEmail: &quot;test0\u00D0@invalid.com&quot;,</span>
<a href="#l25.145"></a><span id="l25.145" class="difflineplus">+    { emailHeader: &quot;Modify3 &lt;test0\u00D0@foo.invalid&gt;&quot;,</span>
<a href="#l25.146"></a><span id="l25.146" class="difflineplus">+      primaryEmail: &quot;test0\u00D0@foo.invalid&quot;,</span>
<a href="#l25.147"></a><span id="l25.147">       mailFormat: nsIAbPMF.plaintext,</span>
<a href="#l25.148"></a><span id="l25.148">       displayName: &quot;Modify&quot;,</span>
<a href="#l25.149"></a><span id="l25.149">       firstName: &quot;&quot;,</span>
<a href="#l25.150"></a><span id="l25.150">       lastName: &quot;&quot;,</span>
<a href="#l25.151"></a><span id="l25.151">       screenName: &quot;&quot; },</span>
<a href="#l25.152"></a><span id="l25.152">     // Check no modification of cards for mail format where format is not</span>
<a href="#l25.153"></a><span id="l25.153">     // &quot;unknown&quot;.</span>
<a href="#l25.154"></a><span id="l25.154" class="difflineminus">-    { emailHeader: &quot;Modify User\u00D0 &lt;test0@\u00D0.com&gt;&quot;,</span>
<a href="#l25.155"></a><span id="l25.155" class="difflineminus">-      primaryEmail: &quot;test0@\u00D0.com&quot;,</span>
<a href="#l25.156"></a><span id="l25.156" class="difflineplus">+    { emailHeader: &quot;Modify User\u00D0 &lt;test0@\u00D0.invalid&gt;&quot;,</span>
<a href="#l25.157"></a><span id="l25.157" class="difflineplus">+      primaryEmail: &quot;test0@\u00D0.invalid&quot;,</span>
<a href="#l25.158"></a><span id="l25.158">       mailFormat: nsIAbPMF.plaintext,</span>
<a href="#l25.159"></a><span id="l25.159">       mailFormatOut: nsIAbPMF.html,</span>
<a href="#l25.160"></a><span id="l25.160">       displayName: &quot;Modify User\u00D0&quot;,</span>
<a href="#l25.161"></a><span id="l25.161">       firstName: &quot;Modify&quot;,</span>
<a href="#l25.162"></a><span id="l25.162">       lastName: &quot;User\u00D0&quot;,</span>
<a href="#l25.163"></a><span id="l25.163">       screenName: &quot;&quot; },</span>
<a href="#l25.164"></a><span id="l25.164" class="difflineminus">-    { emailHeader: &quot;Modify &lt;test0\u00D0@invalid.com&gt;&quot;,</span>
<a href="#l25.165"></a><span id="l25.165" class="difflineminus">-      primaryEmail: &quot;test0\u00D0@invalid.com&quot;,</span>
<a href="#l25.166"></a><span id="l25.166" class="difflineplus">+    { emailHeader: &quot;Modify &lt;test0\u00D0@foo.invalid&gt;&quot;,</span>
<a href="#l25.167"></a><span id="l25.167" class="difflineplus">+      primaryEmail: &quot;test0\u00D0@foo.invalid&quot;,</span>
<a href="#l25.168"></a><span id="l25.168">       mailFormat: nsIAbPMF.html,</span>
<a href="#l25.169"></a><span id="l25.169">       mailFormatOut: nsIAbPMF.plaintext,</span>
<a href="#l25.170"></a><span id="l25.170">       displayName: &quot;Modify&quot;,</span>
<a href="#l25.171"></a><span id="l25.171">       firstName: &quot;&quot;,</span>
<a href="#l25.172"></a><span id="l25.172">       lastName: &quot;&quot;,</span>
<a href="#l25.173"></a><span id="l25.173">       screenName: &quot;&quot; },</span>
<a href="#l25.174"></a><span id="l25.174">     // No modification of cards with email in second email address.</span>
<a href="#l25.175"></a><span id="l25.175" class="difflineminus">-    { emailHeader: &quot;Modify Secondary &lt;usersec\u00D0@invalid.com&gt;&quot;,</span>
<a href="#l25.176"></a><span id="l25.176" class="difflineminus">-      primaryEmail: &quot;userprim\u00D0@invalid.com&quot;,</span>
<a href="#l25.177"></a><span id="l25.177" class="difflineminus">-      secondEmail: &quot;usersec\u00D0@invalid.com&quot;,</span>
<a href="#l25.178"></a><span id="l25.178" class="difflineplus">+    { emailHeader: &quot;Modify Secondary &lt;usersec\u00D0@foo.invalid&gt;&quot;,</span>
<a href="#l25.179"></a><span id="l25.179" class="difflineplus">+      primaryEmail: &quot;userprim\u00D0@foo.invalid&quot;,</span>
<a href="#l25.180"></a><span id="l25.180" class="difflineplus">+      secondEmail: &quot;usersec\u00D0@foo.invalid&quot;,</span>
<a href="#l25.181"></a><span id="l25.181">       mailFormat: nsIAbPMF.unknown,</span>
<a href="#l25.182"></a><span id="l25.182">       displayName: &quot;&quot;,</span>
<a href="#l25.183"></a><span id="l25.183">       firstName: &quot;&quot;,</span>
<a href="#l25.184"></a><span id="l25.184">       lastName: &quot;&quot;,</span>
<a href="#l25.185"></a><span id="l25.185">       screenName: &quot;&quot; },</span>
<a href="#l25.186"></a><span id="l25.186" class="difflineminus">-    { emailHeader: &quot;Modify &lt;usersec\u00D0@invalid.com&gt;&quot;,</span>
<a href="#l25.187"></a><span id="l25.187" class="difflineminus">-      primaryEmail: &quot;userprim\u00D0@invalid.com&quot;,</span>
<a href="#l25.188"></a><span id="l25.188" class="difflineminus">-      secondEmail: &quot;usersec\u00D0@invalid.com&quot;,</span>
<a href="#l25.189"></a><span id="l25.189" class="difflineplus">+    { emailHeader: &quot;Modify &lt;usersec\u00D0@foo.invalid&gt;&quot;,</span>
<a href="#l25.190"></a><span id="l25.190" class="difflineplus">+      primaryEmail: &quot;userprim\u00D0@foo.invalid&quot;,</span>
<a href="#l25.191"></a><span id="l25.191" class="difflineplus">+      secondEmail: &quot;usersec\u00D0@foo.invalid&quot;,</span>
<a href="#l25.192"></a><span id="l25.192">       mailFormat: nsIAbPMF.html,</span>
<a href="#l25.193"></a><span id="l25.193">       mailFormatOut: nsIAbPMF.unknown,</span>
<a href="#l25.194"></a><span id="l25.194">       displayName: &quot;&quot;,</span>
<a href="#l25.195"></a><span id="l25.195">       firstName: &quot;&quot;,</span>
<a href="#l25.196"></a><span id="l25.196">       lastName: &quot;&quot;,</span>
<a href="#l25.197"></a><span id="l25.197">       screenName: &quot;&quot; },</span>
<a href="#l25.198"></a><span id="l25.198">    ];</span>
<a href="#l25.199"></a><span id="l25.199"> </span>
<a href="#l25.200"></a><span id="l25.200" class="difflineat">@@ -319,18 +319,18 @@ function run_test()</span>
<a href="#l25.201"></a><span id="l25.201"> </span>
<a href="#l25.202"></a><span id="l25.202">   // Test - Try and modify various emails and formats.</span>
<a href="#l25.203"></a><span id="l25.203"> </span>
<a href="#l25.204"></a><span id="l25.204">   // Add a basic card with just primary and second email to allow testing</span>
<a href="#l25.205"></a><span id="l25.205">   // of the case where we don't modify when second email is matching.</span>
<a href="#l25.206"></a><span id="l25.206">   card = Components.classes[&quot;@mozilla.org/addressbook/cardproperty;1&quot;]</span>
<a href="#l25.207"></a><span id="l25.207">                    .createInstance(Components.interfaces.nsIAbCard);</span>
<a href="#l25.208"></a><span id="l25.208"> </span>
<a href="#l25.209"></a><span id="l25.209" class="difflineminus">-  card.primaryEmail = &quot;userprim\u00D0@invalid.com&quot;;</span>
<a href="#l25.210"></a><span id="l25.210" class="difflineminus">-  card.setProperty(&quot;SecondEmail&quot;, &quot;usersec\u00D0@invalid.com&quot;);</span>
<a href="#l25.211"></a><span id="l25.211" class="difflineplus">+  card.primaryEmail = &quot;userprim\u00D0@foo.invalid&quot;;</span>
<a href="#l25.212"></a><span id="l25.212" class="difflineplus">+  card.setProperty(&quot;SecondEmail&quot;, &quot;usersec\u00D0@foo.invalid&quot;);</span>
<a href="#l25.213"></a><span id="l25.213"> </span>
<a href="#l25.214"></a><span id="l25.214">   collectChecker.AB.addCard(card);</span>
<a href="#l25.215"></a><span id="l25.215"> </span>
<a href="#l25.216"></a><span id="l25.216">   collectChecker.part = 0;</span>
<a href="#l25.217"></a><span id="l25.217"> </span>
<a href="#l25.218"></a><span id="l25.218">   modifyEmailChecks.forEach(collectChecker.checkAddress, collectChecker);</span>
<a href="#l25.219"></a><span id="l25.219"> </span>
<a href="#l25.220"></a><span id="l25.220">   // Test collectSingleAddress - Note: because the above tests test</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mailnews/addrbook/test/unit/test_db_enumerator.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mailnews/addrbook/test/unit/test_db_enumerator.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -1,16 +1,16 @@</span>
<a href="#l26.4"></a><span id="l26.4"> /**</span>
<a href="#l26.5"></a><span id="l26.5">  * This test verifies that we don't crash if we have an enumerator on an</span>
<a href="#l26.6"></a><span id="l26.6">  * addr database and delete the underlying directory, which forces the ab</span>
<a href="#l26.7"></a><span id="l26.7">  * closed.</span>
<a href="#l26.8"></a><span id="l26.8">  */</span>
<a href="#l26.9"></a><span id="l26.9"> var ab_prefix       = &quot;test-537815-&quot;;</span>
<a href="#l26.10"></a><span id="l26.10"> var re_prefix       = new RegExp(ab_prefix)</span>
<a href="#l26.11"></a><span id="l26.11" class="difflineminus">-var card_properties = { FirstName: &quot;01-first-3&quot;, LastName: &quot;02-last&quot;, PrimaryEmail: &quot;08-email-1@zindus.com&quot; };</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineplus">+var card_properties = { FirstName: &quot;01-first-3&quot;, LastName: &quot;02-last&quot;, PrimaryEmail: &quot;08-email-1@zindus.invalid&quot; };</span>
<a href="#l26.13"></a><span id="l26.13"> var max_addressbooks = 10;</span>
<a href="#l26.14"></a><span id="l26.14"> </span>
<a href="#l26.15"></a><span id="l26.15"> function bug_537815_fixture_setup()</span>
<a href="#l26.16"></a><span id="l26.16"> {</span>
<a href="#l26.17"></a><span id="l26.17">   let i, key;</span>
<a href="#l26.18"></a><span id="l26.18"> </span>
<a href="#l26.19"></a><span id="l26.19">   for (i = 1; i &lt;= max_addressbooks; i++) {</span>
<a href="#l26.20"></a><span id="l26.20">     let ab_name = ab_prefix + i;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mailnews/addrbook/test/unit/test_notifications.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mailnews/addrbook/test/unit/test_notifications.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -42,17 +42,17 @@ function run_test() {</span>
<a href="#l27.4"></a><span id="l27.4">   abListener.maxResults = 1;</span>
<a href="#l27.5"></a><span id="l27.5"> </span>
<a href="#l27.6"></a><span id="l27.6">   // Test - add a card</span>
<a href="#l27.7"></a><span id="l27.7"> </span>
<a href="#l27.8"></a><span id="l27.8">   var card = Cc[&quot;@mozilla.org/addressbook/cardproperty;1&quot;]</span>
<a href="#l27.9"></a><span id="l27.9">                .createInstance(Ci.nsIAbCard);</span>
<a href="#l27.10"></a><span id="l27.10"> </span>
<a href="#l27.11"></a><span id="l27.11">   card.firstName = &quot;test&quot;;</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-  card.primaryEmail = &quot;test@invalid.com&quot;;</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+  card.primaryEmail = &quot;test@foo.invalid&quot;;</span>
<a href="#l27.14"></a><span id="l27.14"> </span>
<a href="#l27.15"></a><span id="l27.15">   var newCard = AB.addCard(card);</span>
<a href="#l27.16"></a><span id="l27.16"> </span>
<a href="#l27.17"></a><span id="l27.17">   do_check_true(newCard instanceof Ci.nsIAbCard);</span>
<a href="#l27.18"></a><span id="l27.18">   do_check_eq(abListener.result[0][0], &quot;onItemAdded&quot;);</span>
<a href="#l27.19"></a><span id="l27.19">   do_check_eq(abListener.result[0][1], AB);</span>
<a href="#l27.20"></a><span id="l27.20">   do_check_eq(abListener.result[0][2], newCard);</span>
<a href="#l27.21"></a><span id="l27.21">   abListener.result = [];</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mailnews/addrbook/test/unit/test_nsAbAutoCompleteMyDomain.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mailnews/addrbook/test/unit/test_nsAbAutoCompleteMyDomain.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -25,17 +25,17 @@ function run_test() {</span>
<a href="#l28.4"></a><span id="l28.4"> </span>
<a href="#l28.5"></a><span id="l28.5">   var obs = new acObserver();</span>
<a href="#l28.6"></a><span id="l28.6"> </span>
<a href="#l28.7"></a><span id="l28.7">   // Set up an identity in the account manager with the default settings</span>
<a href="#l28.8"></a><span id="l28.8">   let identity = MailServices.accounts.createIdentity();</span>
<a href="#l28.9"></a><span id="l28.9"> </span>
<a href="#l28.10"></a><span id="l28.10">   // Initially disable autocomplete</span>
<a href="#l28.11"></a><span id="l28.11">   identity.autocompleteToMyDomain = false;</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-  identity.email = &quot;myemail@invalid.com&quot;;</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+  identity.email = &quot;myemail@foo.invalid&quot;;</span>
<a href="#l28.14"></a><span id="l28.14"> </span>
<a href="#l28.15"></a><span id="l28.15">   // Test - Valid search - this should return no results (autocomplete disabled)</span>
<a href="#l28.16"></a><span id="l28.16">   acs.startSearch(&quot;test&quot;, identity.key, null, obs);</span>
<a href="#l28.17"></a><span id="l28.17"> </span>
<a href="#l28.18"></a><span id="l28.18">   do_check_eq(obs._search, acs);</span>
<a href="#l28.19"></a><span id="l28.19">   do_check_eq(obs._result.searchString, &quot;test&quot;);</span>
<a href="#l28.20"></a><span id="l28.20">   do_check_eq(obs._result.searchResult, ACR.RESULT_FAILURE);</span>
<a href="#l28.21"></a><span id="l28.21">   do_check_eq(obs._result.errorDescription, null);</span>
<a href="#l28.22"></a><span id="l28.22" class="difflineat">@@ -93,14 +93,14 @@ function run_test() {</span>
<a href="#l28.23"></a><span id="l28.23">   acs.startSearch(&quot;test1&quot;, identity.key, null, obs);</span>
<a href="#l28.24"></a><span id="l28.24"> </span>
<a href="#l28.25"></a><span id="l28.25">   do_check_eq(obs._search, acs);</span>
<a href="#l28.26"></a><span id="l28.26">   do_check_eq(obs._result.searchString, &quot;test1&quot;);</span>
<a href="#l28.27"></a><span id="l28.27">   do_check_eq(obs._result.searchResult, ACR.RESULT_SUCCESS);</span>
<a href="#l28.28"></a><span id="l28.28">   do_check_eq(obs._result.errorDescription, null);</span>
<a href="#l28.29"></a><span id="l28.29">   do_check_eq(obs._result.matchCount, 1);</span>
<a href="#l28.30"></a><span id="l28.30"> </span>
<a href="#l28.31"></a><span id="l28.31" class="difflineminus">-  do_check_eq(obs._result.getValueAt(0), &quot;test1@invalid.com&quot;);</span>
<a href="#l28.32"></a><span id="l28.32" class="difflineminus">-  do_check_eq(obs._result.getLabelAt(0), &quot;test1@invalid.com&quot;);</span>
<a href="#l28.33"></a><span id="l28.33" class="difflineplus">+  do_check_eq(obs._result.getValueAt(0), &quot;test1@foo.invalid&quot;);</span>
<a href="#l28.34"></a><span id="l28.34" class="difflineplus">+  do_check_eq(obs._result.getLabelAt(0), &quot;test1@foo.invalid&quot;);</span>
<a href="#l28.35"></a><span id="l28.35">   do_check_eq(obs._result.getCommentAt(0), null);</span>
<a href="#l28.36"></a><span id="l28.36">   do_check_eq(obs._result.getStyleAt(0), &quot;default-match&quot;);</span>
<a href="#l28.37"></a><span id="l28.37">   do_check_eq(obs._result.getImageAt(0), null);</span>
<a href="#l28.38"></a><span id="l28.38"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch1.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch1.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -7,21 +7,21 @@</span>
<a href="#l29.4"></a><span id="l29.4"> </span>
<a href="#l29.5"></a><span id="l29.5"> const ACR = Components.interfaces.nsIAutoCompleteResult;</span>
<a href="#l29.6"></a><span id="l29.6"> </span>
<a href="#l29.7"></a><span id="l29.7"> // Input and results arrays for the autocomplete tests. This are potentially</span>
<a href="#l29.8"></a><span id="l29.8"> // more complicated than really required, but it was easier to do them</span>
<a href="#l29.9"></a><span id="l29.9"> // on a pattern rather just doing the odd spot check.</span>
<a href="#l29.10"></a><span id="l29.10"> //</span>
<a href="#l29.11"></a><span id="l29.11"> // Note the expected arrays are in expected sort order as well.</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-const results = [ { email: &quot;d &lt;ema@invalid.com&gt;&quot;, dirName: kPABData.dirName },</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineminus">-                  { email: &quot;di &lt;emai@invalid.com&gt;&quot;, dirName: kPABData.dirName },</span>
<a href="#l29.14"></a><span id="l29.14" class="difflineminus">-                  { email: &quot;dis &lt;email@invalid.com&gt;&quot;, dirName: kPABData.dirName },</span>
<a href="#l29.15"></a><span id="l29.15" class="difflineminus">-                  { email: &quot;disp &lt;e@invalid.com&gt;&quot;, dirName: kPABData.dirName },</span>
<a href="#l29.16"></a><span id="l29.16" class="difflineminus">-                  { email: &quot;displ &lt;em@invalid.com&gt;&quot;, dirName: kPABData.dirName },</span>
<a href="#l29.17"></a><span id="l29.17" class="difflineplus">+const results = [ { email: &quot;d &lt;ema@foo.invalid&gt;&quot;, dirName: kPABData.dirName },</span>
<a href="#l29.18"></a><span id="l29.18" class="difflineplus">+                  { email: &quot;di &lt;emai@foo.invalid&gt;&quot;, dirName: kPABData.dirName },</span>
<a href="#l29.19"></a><span id="l29.19" class="difflineplus">+                  { email: &quot;dis &lt;email@foo.invalid&gt;&quot;, dirName: kPABData.dirName },</span>
<a href="#l29.20"></a><span id="l29.20" class="difflineplus">+                  { email: &quot;disp &lt;e@foo.invalid&gt;&quot;, dirName: kPABData.dirName },</span>
<a href="#l29.21"></a><span id="l29.21" class="difflineplus">+                  { email: &quot;displ &lt;em@foo.invalid&gt;&quot;, dirName: kPABData.dirName },</span>
<a href="#l29.22"></a><span id="l29.22">                   { email: &quot;DisplayName1 &lt;PrimaryEmail1@test.invalid&gt;&quot;,</span>
<a href="#l29.23"></a><span id="l29.23">                     dirName: kCABData.dirName },</span>
<a href="#l29.24"></a><span id="l29.24">                   { email: &quot;t &lt;list&gt;&quot;, dirName: kPABData.dirName },</span>
<a href="#l29.25"></a><span id="l29.25">                   { email: &quot;te &lt;lis&gt;&quot;, dirName: kPABData.dirName },</span>
<a href="#l29.26"></a><span id="l29.26">                   { email: &quot;tes &lt;li&gt;&quot;, dirName: kPABData.dirName },</span>
<a href="#l29.27"></a><span id="l29.27">                   { email: &quot;test &lt;l&gt;&quot;, dirName: kPABData.dirName } ];</span>
<a href="#l29.28"></a><span id="l29.28"> </span>
<a href="#l29.29"></a><span id="l29.29"> const firstNames = [ { search: &quot;f&quot;,      expected: [5, 0, 1, 2, 3, 4] },</span>
<a href="#l29.30"></a><span id="l29.30" class="difflineat">@@ -160,52 +160,52 @@ function run_test() {</span>
<a href="#l29.31"></a><span id="l29.31"> </span>
<a href="#l29.32"></a><span id="l29.32">   do_check_eq(obs._search, acs);</span>
<a href="#l29.33"></a><span id="l29.33">   do_check_eq(obs._result.searchString, &quot;email&quot;);</span>
<a href="#l29.34"></a><span id="l29.34">   do_check_eq(obs._result.searchResult, ACR.RESULT_SUCCESS);</span>
<a href="#l29.35"></a><span id="l29.35">   do_check_eq(obs._result.errorDescription, null);</span>
<a href="#l29.36"></a><span id="l29.36">   do_check_eq(obs._result.matchCount, 1);</span>
<a href="#l29.37"></a><span id="l29.37">   do_check_eq(obs._result.defaultIndex, 0);</span>
<a href="#l29.38"></a><span id="l29.38"> </span>
<a href="#l29.39"></a><span id="l29.39" class="difflineminus">-  do_check_eq(obs._result.getValueAt(0), &quot;dis &lt;email@invalid.com&gt;&quot;);</span>
<a href="#l29.40"></a><span id="l29.40" class="difflineminus">-  do_check_eq(obs._result.getLabelAt(0), &quot;dis &lt;email@invalid.com&gt;&quot;);</span>
<a href="#l29.41"></a><span id="l29.41" class="difflineplus">+  do_check_eq(obs._result.getValueAt(0), &quot;dis &lt;email@foo.invalid&gt;&quot;);</span>
<a href="#l29.42"></a><span id="l29.42" class="difflineplus">+  do_check_eq(obs._result.getLabelAt(0), &quot;dis &lt;email@foo.invalid&gt;&quot;);</span>
<a href="#l29.43"></a><span id="l29.43">   do_check_eq(obs._result.getCommentAt(0), &quot;&quot;);</span>
<a href="#l29.44"></a><span id="l29.44">   do_check_eq(obs._result.getStyleAt(0), &quot;local-abook&quot;);</span>
<a href="#l29.45"></a><span id="l29.45">   do_check_eq(obs._result.getImageAt(0), &quot;&quot;);</span>
<a href="#l29.46"></a><span id="l29.46"> </span>
<a href="#l29.47"></a><span id="l29.47">   // Now quick-check with the address book name in the comment column.</span>
<a href="#l29.48"></a><span id="l29.48">   Services.prefs.setIntPref(&quot;mail.autoComplete.commentColumn&quot;, 1);</span>
<a href="#l29.49"></a><span id="l29.49"> </span>
<a href="#l29.50"></a><span id="l29.50">   acs.startSearch(&quot;email&quot;, null, null, obs);</span>
<a href="#l29.51"></a><span id="l29.51"> </span>
<a href="#l29.52"></a><span id="l29.52">   do_check_eq(obs._search, acs);</span>
<a href="#l29.53"></a><span id="l29.53">   do_check_eq(obs._result.searchString, &quot;email&quot;);</span>
<a href="#l29.54"></a><span id="l29.54">   do_check_eq(obs._result.searchResult, ACR.RESULT_SUCCESS);</span>
<a href="#l29.55"></a><span id="l29.55">   do_check_eq(obs._result.errorDescription, null);</span>
<a href="#l29.56"></a><span id="l29.56">   do_check_eq(obs._result.matchCount, 1);</span>
<a href="#l29.57"></a><span id="l29.57">   do_check_eq(obs._result.defaultIndex, 0);</span>
<a href="#l29.58"></a><span id="l29.58"> </span>
<a href="#l29.59"></a><span id="l29.59" class="difflineminus">-  do_check_eq(obs._result.getValueAt(0), &quot;dis &lt;email@invalid.com&gt;&quot;);</span>
<a href="#l29.60"></a><span id="l29.60" class="difflineminus">-  do_check_eq(obs._result.getLabelAt(0), &quot;dis &lt;email@invalid.com&gt;&quot;);</span>
<a href="#l29.61"></a><span id="l29.61" class="difflineplus">+  do_check_eq(obs._result.getValueAt(0), &quot;dis &lt;email@foo.invalid&gt;&quot;);</span>
<a href="#l29.62"></a><span id="l29.62" class="difflineplus">+  do_check_eq(obs._result.getLabelAt(0), &quot;dis &lt;email@foo.invalid&gt;&quot;);</span>
<a href="#l29.63"></a><span id="l29.63">   do_check_eq(obs._result.getCommentAt(0), kPABData.dirName);</span>
<a href="#l29.64"></a><span id="l29.64">   do_check_eq(obs._result.getStyleAt(0), &quot;local-abook&quot;);</span>
<a href="#l29.65"></a><span id="l29.65">   do_check_eq(obs._result.getImageAt(0), &quot;&quot;);</span>
<a href="#l29.66"></a><span id="l29.66"> </span>
<a href="#l29.67"></a><span id="l29.67">   // Check input with different case</span>
<a href="#l29.68"></a><span id="l29.68">   acs.startSearch(&quot;EMAIL&quot;, null, null, obs);</span>
<a href="#l29.69"></a><span id="l29.69"> </span>
<a href="#l29.70"></a><span id="l29.70">   do_check_eq(obs._search, acs);</span>
<a href="#l29.71"></a><span id="l29.71">   do_check_eq(obs._result.searchString, &quot;EMAIL&quot;);</span>
<a href="#l29.72"></a><span id="l29.72">   do_check_eq(obs._result.searchResult, ACR.RESULT_SUCCESS);</span>
<a href="#l29.73"></a><span id="l29.73">   do_check_eq(obs._result.errorDescription, null);</span>
<a href="#l29.74"></a><span id="l29.74">   do_check_eq(obs._result.matchCount, 1);</span>
<a href="#l29.75"></a><span id="l29.75">   do_check_eq(obs._result.defaultIndex, 0);</span>
<a href="#l29.76"></a><span id="l29.76"> </span>
<a href="#l29.77"></a><span id="l29.77" class="difflineminus">-  do_check_eq(obs._result.getValueAt(0), &quot;dis &lt;email@invalid.com&gt;&quot;);</span>
<a href="#l29.78"></a><span id="l29.78" class="difflineminus">-  do_check_eq(obs._result.getLabelAt(0), &quot;dis &lt;email@invalid.com&gt;&quot;);</span>
<a href="#l29.79"></a><span id="l29.79" class="difflineplus">+  do_check_eq(obs._result.getValueAt(0), &quot;dis &lt;email@foo.invalid&gt;&quot;);</span>
<a href="#l29.80"></a><span id="l29.80" class="difflineplus">+  do_check_eq(obs._result.getLabelAt(0), &quot;dis &lt;email@foo.invalid&gt;&quot;);</span>
<a href="#l29.81"></a><span id="l29.81">   do_check_eq(obs._result.getCommentAt(0), kPABData.dirName);</span>
<a href="#l29.82"></a><span id="l29.82">   do_check_eq(obs._result.getStyleAt(0), &quot;local-abook&quot;);</span>
<a href="#l29.83"></a><span id="l29.83">   do_check_eq(obs._result.getImageAt(0), &quot;&quot;);</span>
<a href="#l29.84"></a><span id="l29.84"> </span>
<a href="#l29.85"></a><span id="l29.85"> </span>
<a href="#l29.86"></a><span id="l29.86">   // Now check multiple matches</span>
<a href="#l29.87"></a><span id="l29.87">   function checkInputItem(element, index, array) {</span>
<a href="#l29.88"></a><span id="l29.88">     print(&quot;Checking &quot; + element.search);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch2.js</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch2.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -74,27 +74,27 @@ nsAbAutoCompleteResult.prototype = {</span>
<a href="#l30.4"></a><span id="l30.4"> </span>
<a href="#l30.5"></a><span id="l30.5"> function createCard(chars, popularity) {</span>
<a href="#l30.6"></a><span id="l30.6">   var card = Components.classes[&quot;@mozilla.org/addressbook/cardproperty;1&quot;]</span>
<a href="#l30.7"></a><span id="l30.7">                        .createInstance(Components.interfaces.nsIAbCard);</span>
<a href="#l30.8"></a><span id="l30.8"> </span>
<a href="#l30.9"></a><span id="l30.9">   card.firstName = &quot;firstName&quot;.slice(0, chars);</span>
<a href="#l30.10"></a><span id="l30.10">   card.lastName = &quot;lastName&quot;.slice(0, chars);</span>
<a href="#l30.11"></a><span id="l30.11">   card.displayName = &quot;displayName&quot;.slice(0, chars);</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-  card.primaryEmail = &quot;email&quot;.slice(0, chars) + &quot;@invalid.com&quot;;</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+  card.primaryEmail = &quot;email&quot;.slice(0, chars) + &quot;@foo.invalid&quot;;</span>
<a href="#l30.14"></a><span id="l30.14">   card.setProperty(&quot;NickName&quot;, &quot;nickName&quot;.slice(0, chars));</span>
<a href="#l30.15"></a><span id="l30.15"> </span>
<a href="#l30.16"></a><span id="l30.16">   return card;</span>
<a href="#l30.17"></a><span id="l30.17"> }</span>
<a href="#l30.18"></a><span id="l30.18"> </span>
<a href="#l30.19"></a><span id="l30.19"> const lastSearchCards = [ createCard(1, 0), createCard(2, 0), createCard(3, 0) ];</span>
<a href="#l30.20"></a><span id="l30.20"> </span>
<a href="#l30.21"></a><span id="l30.21" class="difflineminus">-const results = [ { email: &quot;d &lt;e@invalid.com&gt;&quot;, dirName: kPABData.dirName },</span>
<a href="#l30.22"></a><span id="l30.22" class="difflineminus">-                  { email: &quot;di &lt;em@invalid.com&gt;&quot;, dirName: kPABData.dirName },</span>
<a href="#l30.23"></a><span id="l30.23" class="difflineminus">-                  { email: &quot;dis &lt;ema@invalid.com&gt;&quot;, dirName: kPABData.dirName } ];</span>
<a href="#l30.24"></a><span id="l30.24" class="difflineplus">+const results = [ { email: &quot;d &lt;e@foo.invalid&gt;&quot;, dirName: kPABData.dirName },</span>
<a href="#l30.25"></a><span id="l30.25" class="difflineplus">+                  { email: &quot;di &lt;em@foo.invalid&gt;&quot;, dirName: kPABData.dirName },</span>
<a href="#l30.26"></a><span id="l30.26" class="difflineplus">+                  { email: &quot;dis &lt;ema@foo.invalid&gt;&quot;, dirName: kPABData.dirName } ];</span>
<a href="#l30.27"></a><span id="l30.27"> </span>
<a href="#l30.28"></a><span id="l30.28"> const firstNames = [ { search: &quot;fi&quot;,     expected: [1, 2] },</span>
<a href="#l30.29"></a><span id="l30.29">                      { search: &quot;fir&quot;,    expected: [2] } ];</span>
<a href="#l30.30"></a><span id="l30.30"> </span>
<a href="#l30.31"></a><span id="l30.31"> const lastNames = [ { search: &quot;la&quot;,     expected: [1, 2] },</span>
<a href="#l30.32"></a><span id="l30.32">                     { search: &quot;las&quot;,    expected: [2] } ];</span>
<a href="#l30.33"></a><span id="l30.33"> </span>
<a href="#l30.34"></a><span id="l30.34"> const displayNames = [ { search: &quot;d&quot;,      expected: [5, 0, 1, 2, 3, 4] },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch3.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mailnews/addrbook/test/unit/test_nsAbAutoCompleteSearch3.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -1,30 +1,30 @@</span>
<a href="#l31.4"></a><span id="l31.4"> /* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l31.5"></a><span id="l31.5"> /*</span>
<a href="#l31.6"></a><span id="l31.6">  * Third Test suite for nsAbAutoCompleteSearch - test for duplicate elimination</span>
<a href="#l31.7"></a><span id="l31.7">  */</span>
<a href="#l31.8"></a><span id="l31.8"> </span>
<a href="#l31.9"></a><span id="l31.9"> const ACR = Components.interfaces.nsIAutoCompleteResult;</span>
<a href="#l31.10"></a><span id="l31.10"> </span>
<a href="#l31.11"></a><span id="l31.11"> const cards = [</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-  { email: &quot;test@invalid.com&quot;, displayName: &quot;&quot;,</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineminus">-    popularityIndex: 0, firstName: &quot;test0&quot;, value: &quot;test@invalid.com&quot; },</span>
<a href="#l31.14"></a><span id="l31.14" class="difflineminus">-  { email: &quot;test@invalid.com&quot;, displayName: &quot;&quot;,</span>
<a href="#l31.15"></a><span id="l31.15" class="difflineminus">-    popularityIndex: 1, firstName: &quot;test1&quot;, value: &quot;test@invalid.com&quot; },</span>
<a href="#l31.16"></a><span id="l31.16" class="difflineminus">-  { email: &quot;abc@invalid.com&quot;, displayName: &quot;&quot;,</span>
<a href="#l31.17"></a><span id="l31.17" class="difflineminus">-    popularityIndex: 1, firstName: &quot;test2&quot;, value: &quot;abc@invalid.com&quot; },</span>
<a href="#l31.18"></a><span id="l31.18" class="difflineminus">-  { email: &quot;foo1@invalid.com&quot;, displayName: &quot;d&quot;,</span>
<a href="#l31.19"></a><span id="l31.19" class="difflineminus">-    popularityIndex: 0, firstName: &quot;first1&quot;, value: &quot;d &lt;foo1@invalid.com&gt;&quot; },</span>
<a href="#l31.20"></a><span id="l31.20" class="difflineminus">-  { email: &quot;foo2@invalid.com&quot;, displayName: &quot;di&quot;,</span>
<a href="#l31.21"></a><span id="l31.21" class="difflineminus">-    popularityIndex: 1, firstName: &quot;first1&quot;, value: &quot;di &lt;foo2@invalid.com&gt;&quot; },</span>
<a href="#l31.22"></a><span id="l31.22" class="difflineminus">-  { email: &quot;foo3@invalid.com&quot;, displayName: &quot;dis&quot;,</span>
<a href="#l31.23"></a><span id="l31.23" class="difflineminus">-    popularityIndex: 2, firstName: &quot;first2&quot;, value: &quot;dis &lt;foo3@invalid.com&gt;&quot; },</span>
<a href="#l31.24"></a><span id="l31.24" class="difflineminus">-  { email: &quot;foo2@invalid.com&quot;, displayName: &quot;di&quot;,</span>
<a href="#l31.25"></a><span id="l31.25" class="difflineminus">-    popularityIndex: 3, firstName: &quot;first2&quot;, value: &quot;di &lt;foo2@invalid.com&gt;&quot; }</span>
<a href="#l31.26"></a><span id="l31.26" class="difflineplus">+  { email: &quot;test@foo.invalid&quot;, displayName: &quot;&quot;,</span>
<a href="#l31.27"></a><span id="l31.27" class="difflineplus">+    popularityIndex: 0, firstName: &quot;test0&quot;, value: &quot;test@foo.invalid&quot; },</span>
<a href="#l31.28"></a><span id="l31.28" class="difflineplus">+  { email: &quot;test@foo.invalid&quot;, displayName: &quot;&quot;,</span>
<a href="#l31.29"></a><span id="l31.29" class="difflineplus">+    popularityIndex: 1, firstName: &quot;test1&quot;, value: &quot;test@foo.invalid&quot; },</span>
<a href="#l31.30"></a><span id="l31.30" class="difflineplus">+  { email: &quot;abc@foo.invalid&quot;, displayName: &quot;&quot;,</span>
<a href="#l31.31"></a><span id="l31.31" class="difflineplus">+    popularityIndex: 1, firstName: &quot;test2&quot;, value: &quot;abc@foo.invalid&quot; },</span>
<a href="#l31.32"></a><span id="l31.32" class="difflineplus">+  { email: &quot;foo1@foo.invalid&quot;, displayName: &quot;d&quot;,</span>
<a href="#l31.33"></a><span id="l31.33" class="difflineplus">+    popularityIndex: 0, firstName: &quot;first1&quot;, value: &quot;d &lt;foo1@foo.invalid&gt;&quot; },</span>
<a href="#l31.34"></a><span id="l31.34" class="difflineplus">+  { email: &quot;foo2@foo.invalid&quot;, displayName: &quot;di&quot;,</span>
<a href="#l31.35"></a><span id="l31.35" class="difflineplus">+    popularityIndex: 1, firstName: &quot;first1&quot;, value: &quot;di &lt;foo2@foo.invalid&gt;&quot; },</span>
<a href="#l31.36"></a><span id="l31.36" class="difflineplus">+  { email: &quot;foo3@foo.invalid&quot;, displayName: &quot;dis&quot;,</span>
<a href="#l31.37"></a><span id="l31.37" class="difflineplus">+    popularityIndex: 2, firstName: &quot;first2&quot;, value: &quot;dis &lt;foo3@foo.invalid&gt;&quot; },</span>
<a href="#l31.38"></a><span id="l31.38" class="difflineplus">+  { email: &quot;foo2@foo.invalid&quot;, displayName: &quot;di&quot;,</span>
<a href="#l31.39"></a><span id="l31.39" class="difflineplus">+    popularityIndex: 3, firstName: &quot;first2&quot;, value: &quot;di &lt;foo2@foo.invalid&gt;&quot; }</span>
<a href="#l31.40"></a><span id="l31.40"> ];</span>
<a href="#l31.41"></a><span id="l31.41"> </span>
<a href="#l31.42"></a><span id="l31.42"> const duplicates = [</span>
<a href="#l31.43"></a><span id="l31.43">   { search: &quot;test&quot;, expected: [2, 1] },</span>
<a href="#l31.44"></a><span id="l31.44">   { search: &quot;first&quot;, expected: [6, 5, 3] }</span>
<a href="#l31.45"></a><span id="l31.45"> ];</span>
<a href="#l31.46"></a><span id="l31.46"> </span>
<a href="#l31.47"></a><span id="l31.47"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/mailnews/base/prefs/content/ispUtils.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/mailnews/base/prefs/content/ispUtils.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -30,44 +30,44 @@ function getIspDefaultsForUri(domainURI)</span>
<a href="#l32.4"></a><span id="l32.4">         ispDefaults = rdf.GetDataSource(&quot;rdf:ispdefaults&quot;);</span>
<a href="#l32.5"></a><span id="l32.5"> </span>
<a href="#l32.6"></a><span id="l32.6">     var domainRes = rdf.GetResource(domainURI);</span>
<a href="#l32.7"></a><span id="l32.7"> </span>
<a href="#l32.8"></a><span id="l32.8">     var result = dataSourceToObject(ispDefaults, domainRes);</span>
<a href="#l32.9"></a><span id="l32.9"> </span>
<a href="#l32.10"></a><span id="l32.10">     if (!result) return null;</span>
<a href="#l32.11"></a><span id="l32.11"> </span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-    // The domainURI should be in the format domain:aol.com. (Where </span>
<a href="#l32.13"></a><span id="l32.13" class="difflineminus">-    // aol.com is the domain name to use for all email addresses). If</span>
<a href="#l32.14"></a><span id="l32.14" class="difflineplus">+    // The domainURI should be in the format domain:example.com. (Where </span>
<a href="#l32.15"></a><span id="l32.15" class="difflineplus">+    // example.com is the domain name to use for all email addresses). If</span>
<a href="#l32.16"></a><span id="l32.16">     // it does not match this pattern, then it is possible no domain</span>
<a href="#l32.17"></a><span id="l32.17">     // has been specified, so we should leave it uninitialized.</span>
<a href="#l32.18"></a><span id="l32.18">     if (domainURI.startsWith(&quot;domain:&quot;)) {</span>
<a href="#l32.19"></a><span id="l32.19">         // add this extra attribute which is the domain itself</span>
<a href="#l32.20"></a><span id="l32.20">         var domainData = domainURI.split(':');</span>
<a href="#l32.21"></a><span id="l32.21">         if (domainData.length &gt; 1) {</span>
<a href="#l32.22"></a><span id="l32.22">           // To faciltate distributing two different account types for one ISP,</span>
<a href="#l32.23"></a><span id="l32.23">           // it's possible to add parameters to the domain URI </span>
<a href="#l32.24"></a><span id="l32.24" class="difflineminus">-          // - e.g. domain:gmail.com?type=imap.</span>
<a href="#l32.25"></a><span id="l32.25" class="difflineplus">+          // - e.g. domain:example.com?type=imap.</span>
<a href="#l32.26"></a><span id="l32.26">           // This is necessary so RDF doesn't think they're the same.</span>
<a href="#l32.27"></a><span id="l32.27"> </span>
<a href="#l32.28"></a><span id="l32.28">           // Save the domain, but only the part up to the (possible) question mark.</span>
<a href="#l32.29"></a><span id="l32.29">           result.domain = domainData[1].replace(/\?.*/, &quot;&quot;);</span>
<a href="#l32.30"></a><span id="l32.30">         }</span>
<a href="#l32.31"></a><span id="l32.31">     }</span>
<a href="#l32.32"></a><span id="l32.32">     return result;</span>
<a href="#l32.33"></a><span id="l32.33"> }</span>
<a href="#l32.34"></a><span id="l32.34"> </span>
<a href="#l32.35"></a><span id="l32.35"> // construct an ISP's domain URI based on it's domain</span>
<a href="#l32.36"></a><span id="l32.36" class="difflineminus">-// (i.e. turns isp.com -&gt; domain:isp.com)</span>
<a href="#l32.37"></a><span id="l32.37" class="difflineplus">+// (i.e. turns example.com -&gt; domain:example.com)</span>
<a href="#l32.38"></a><span id="l32.38"> function getIspDefaultsForDomain(domain) {</span>
<a href="#l32.39"></a><span id="l32.39">     domainURI = &quot;domain:&quot; + domain;</span>
<a href="#l32.40"></a><span id="l32.40">     return getIspDefaultsForUri(domainURI);</span>
<a href="#l32.41"></a><span id="l32.41"> }</span>
<a href="#l32.42"></a><span id="l32.42"> </span>
<a href="#l32.43"></a><span id="l32.43" class="difflineminus">-// Given an email address (like &quot;joe@isp.com&quot;) look up </span>
<a href="#l32.44"></a><span id="l32.44" class="difflineplus">+// Given an email address (like &quot;joe@example.com&quot;) look up </span>
<a href="#l32.45"></a><span id="l32.45"> function getIspDefaultsForEmail(email) {</span>
<a href="#l32.46"></a><span id="l32.46"> </span>
<a href="#l32.47"></a><span id="l32.47">     var emailData = getEmailInfo(email);</span>
<a href="#l32.48"></a><span id="l32.48"> </span>
<a href="#l32.49"></a><span id="l32.49">     var ispData = null;</span>
<a href="#l32.50"></a><span id="l32.50">     if (emailData)</span>
<a href="#l32.51"></a><span id="l32.51">         ispData = getIspDefaultsForDomain(emailData.domain);</span>
<a href="#l32.52"></a><span id="l32.52"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mailnews/base/test/unit/test_bug404489.js</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_bug404489.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -36,17 +36,17 @@ var Tests =</span>
<a href="#l33.4"></a><span id="l33.4"> </span>
<a href="#l33.5"></a><span id="l33.5">   This is the main fix of bug 404489, that we can use Sender as a header</span>
<a href="#l33.6"></a><span id="l33.6">   */</span>
<a href="#l33.7"></a><span id="l33.7">   { testValue: &quot;iamthesender&quot;,</span>
<a href="#l33.8"></a><span id="l33.8">     attrib: gFirstHeader + 1,</span>
<a href="#l33.9"></a><span id="l33.9">     op: Contains,</span>
<a href="#l33.10"></a><span id="l33.10">     count: 1},</span>
<a href="#l33.11"></a><span id="l33.11">   /* test header:</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-  From: bugzilla-daemon@mozilla.org</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+  From: bugzilla-daemon@mozilla.invalid</span>
<a href="#l33.14"></a><span id="l33.14"> </span>
<a href="#l33.15"></a><span id="l33.15">   Here we show that the &quot;From&quot; header does not fire tests for the</span>
<a href="#l33.16"></a><span id="l33.16">   &quot;Sender&quot; arbitrary headers, but does fire the standard test</span>
<a href="#l33.17"></a><span id="l33.17">   for nsMsgSenderAttrib.Sender</span>
<a href="#l33.18"></a><span id="l33.18">   */</span>
<a href="#l33.19"></a><span id="l33.19">   { testValue: &quot;bugzilla&quot;,</span>
<a href="#l33.20"></a><span id="l33.20">     attrib: gFirstHeader + 1,</span>
<a href="#l33.21"></a><span id="l33.21">     op: Contains,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mailnews/base/test/unit/test_junkWhitelisting.js</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_junkWhitelisting.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -145,17 +145,17 @@ function doChecks(server)</span>
<a href="#l34.4"></a><span id="l34.4">   identity.email = &quot;iAmNotTheSender@test.invalid&quot;;</span>
<a href="#l34.5"></a><span id="l34.5">   account.addIdentity(identity);</span>
<a href="#l34.6"></a><span id="l34.6"> </span>
<a href="#l34.7"></a><span id="l34.7">   // setup account and identify for the deferred-from fake server</span>
<a href="#l34.8"></a><span id="l34.8">   let fakeAccount = accountManager.createAccount();</span>
<a href="#l34.9"></a><span id="l34.9">   fakeAccount.incomingServer = gPOP3Pump.fakeServer;</span>
<a href="#l34.10"></a><span id="l34.10">   let fakeIdentity = accountManager.createIdentity();</span>
<a href="#l34.11"></a><span id="l34.11">   // start with an email that does not match</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-  fakeIdentity.email = &quot;iAmNotTheSender@wrong.domain&quot;;</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+  fakeIdentity.email = &quot;iAmNotTheSender@wrong.invalid&quot;;</span>
<a href="#l34.14"></a><span id="l34.14">   fakeAccount.addIdentity(fakeIdentity);</span>
<a href="#l34.15"></a><span id="l34.15"> </span>
<a href="#l34.16"></a><span id="l34.16">   // gPOP3Pump delivers messages to the local inbox regardless of other</span>
<a href="#l34.17"></a><span id="l34.17">   // settings. But because we are testing here one of those other settings,</span>
<a href="#l34.18"></a><span id="l34.18">   // let's just pretend that it works like the real POP3 stuff, and set</span>
<a href="#l34.19"></a><span id="l34.19">   // the correct setting for deferring.</span>
<a href="#l34.20"></a><span id="l34.20">   gPOP3Pump.fakeServer.setCharValue(&quot;deferred_to_account&quot;, &quot;account1&quot;);</span>
<a href="#l34.21"></a><span id="l34.21"> </span>
<a href="#l34.22"></a><span id="l34.22" class="difflineat">@@ -181,20 +181,20 @@ function doChecks(server)</span>
<a href="#l34.23"></a><span id="l34.23">   do_check_false(spamSettings.checkWhiteList(hdrs[kDomainTest]));</span>
<a href="#l34.24"></a><span id="l34.24"> </span>
<a href="#l34.25"></a><span id="l34.25">   // stop suppressing identity users</span>
<a href="#l34.26"></a><span id="l34.26">   server.setBoolValue(&quot;inhibitWhiteListingIdentityUser&quot;, false);</span>
<a href="#l34.27"></a><span id="l34.27">   spamSettings.initialize(server);</span>
<a href="#l34.28"></a><span id="l34.28">   do_check_true(spamSettings.checkWhiteList(hdrs[kDomainTest]));</span>
<a href="#l34.29"></a><span id="l34.29"> </span>
<a href="#l34.30"></a><span id="l34.30">   // remove the matching email from the fake identity</span>
<a href="#l34.31"></a><span id="l34.31" class="difflineminus">-  fakeIdentity.email = &quot;iAmNotTheSender@wrong.domain&quot;;</span>
<a href="#l34.32"></a><span id="l34.32" class="difflineplus">+  fakeIdentity.email = &quot;iAmNotTheSender@wrong.invalid&quot;;</span>
<a href="#l34.33"></a><span id="l34.33"> </span>
<a href="#l34.34"></a><span id="l34.34">   // add a fully non-matching domain to the identity</span>
<a href="#l34.35"></a><span id="l34.35" class="difflineminus">-  identity.email = &quot;PrimaryEmail1@wrong.domain&quot;;</span>
<a href="#l34.36"></a><span id="l34.36" class="difflineplus">+  identity.email = &quot;PrimaryEmail1@wrong.invalid&quot;;</span>
<a href="#l34.37"></a><span id="l34.37"> </span>
<a href="#l34.38"></a><span id="l34.38">   // suppress whitelist by matching domain</span>
<a href="#l34.39"></a><span id="l34.39">   server.setBoolValue(&quot;inhibitWhiteListingIdentityDomain&quot;, true);</span>
<a href="#l34.40"></a><span id="l34.40">   spamSettings.initialize(server);</span>
<a href="#l34.41"></a><span id="l34.41">   // but domain still does not match</span>
<a href="#l34.42"></a><span id="l34.42">   do_check_true(spamSettings.checkWhiteList(hdrs[kDomainTest]));</span>
<a href="#l34.43"></a><span id="l34.43"> </span>
<a href="#l34.44"></a><span id="l34.44">   // add a matching email to the identity, in the domain (mixing case)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/mailnews/base/test/unit/test_viewSortByAddresses.js</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_viewSortByAddresses.js</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -18,20 +18,20 @@ var gMessageGenerator = new MessageGener</span>
<a href="#l35.4"></a><span id="l35.4"> var gScenarioFactory = new MessageScenarioFactory(gMessageGenerator);</span>
<a href="#l35.5"></a><span id="l35.5"> </span>
<a href="#l35.6"></a><span id="l35.6"> Services.prefs.setBoolPref(&quot;mail.showCondensedAddresses&quot;, true);</span>
<a href="#l35.7"></a><span id="l35.7"> </span>
<a href="#l35.8"></a><span id="l35.8"> var gTestFolder;</span>
<a href="#l35.9"></a><span id="l35.9"> </span>
<a href="#l35.10"></a><span id="l35.10"> // Setup the display name to be opposite of alphabetic order of e-mail address.</span>
<a href="#l35.11"></a><span id="l35.11"> const cards = [</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-  { email: &quot;aaa@b.com&quot;, displayName: &quot;4&quot; },</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineminus">-  { email: &quot;ccc@d.com&quot;, displayName: &quot;3&quot; },</span>
<a href="#l35.14"></a><span id="l35.14" class="difflineminus">-  { email: &quot;eee@f.com&quot;, displayName: &quot;2&quot; },</span>
<a href="#l35.15"></a><span id="l35.15" class="difflineminus">-  { email: &quot;ggg@h.com&quot;, displayName: &quot;1&quot; },</span>
<a href="#l35.16"></a><span id="l35.16" class="difflineplus">+  { email: &quot;aaa@b.invalid&quot;, displayName: &quot;4&quot; },</span>
<a href="#l35.17"></a><span id="l35.17" class="difflineplus">+  { email: &quot;ccc@d.invalid&quot;, displayName: &quot;3&quot; },</span>
<a href="#l35.18"></a><span id="l35.18" class="difflineplus">+  { email: &quot;eee@f.invalid&quot;, displayName: &quot;2&quot; },</span>
<a href="#l35.19"></a><span id="l35.19" class="difflineplus">+  { email: &quot;ggg@h.invalid&quot;, displayName: &quot;1&quot; },</span>
<a href="#l35.20"></a><span id="l35.20"> ];</span>
<a href="#l35.21"></a><span id="l35.21"> </span>
<a href="#l35.22"></a><span id="l35.22"> function run_test() {</span>
<a href="#l35.23"></a><span id="l35.23">   configure_message_injection({mode: &quot;local&quot;});</span>
<a href="#l35.24"></a><span id="l35.24"> </span>
<a href="#l35.25"></a><span id="l35.25">   // Ensure all the directories are initialised.</span>
<a href="#l35.26"></a><span id="l35.26">   MailServices.ab.directories;</span>
<a href="#l35.27"></a><span id="l35.27"> </span>
<a href="#l35.28"></a><span id="l35.28" class="difflineat">@@ -48,18 +48,18 @@ function run_test() {</span>
<a href="#l35.29"></a><span id="l35.29">   }</span>
<a href="#l35.30"></a><span id="l35.30"> </span>
<a href="#l35.31"></a><span id="l35.31">   // Add address to addressbook so we can set display name and verify that</span>
<a href="#l35.32"></a><span id="l35.32">   // the view uses the display name for display and sorting.</span>
<a href="#l35.33"></a><span id="l35.33">   cards.forEach(createAndAddCard);</span>
<a href="#l35.34"></a><span id="l35.34"> </span>
<a href="#l35.35"></a><span id="l35.35">   // build up a couple message with addresses in the ab.</span>
<a href="#l35.36"></a><span id="l35.36">   let messages = [];</span>
<a href="#l35.37"></a><span id="l35.37" class="difflineminus">-  messages = messages.concat(gMessageGenerator.makeMessage({from: [&quot;aaa&quot;, &quot;aaa@b.com&quot;], to: [[&quot;ccc&quot;, &quot;ccc@d.com&quot;]]}));</span>
<a href="#l35.38"></a><span id="l35.38" class="difflineminus">-  messages = messages.concat(gMessageGenerator.makeMessage({from: [&quot;eee&quot;, &quot;eee@f.com&quot;], to: [[&quot;ggg&quot;, &quot;ggg@h.com&quot;]]}));</span>
<a href="#l35.39"></a><span id="l35.39" class="difflineplus">+  messages = messages.concat(gMessageGenerator.makeMessage({from: [&quot;aaa&quot;, &quot;aaa@b.invalid&quot;], to: [[&quot;ccc&quot;, &quot;ccc@d.invalid&quot;]]}));</span>
<a href="#l35.40"></a><span id="l35.40" class="difflineplus">+  messages = messages.concat(gMessageGenerator.makeMessage({from: [&quot;eee&quot;, &quot;eee@f.invalid&quot;], to: [[&quot;ggg&quot;, &quot;ggg@h.invalid&quot;]]}));</span>
<a href="#l35.41"></a><span id="l35.41"> </span>
<a href="#l35.42"></a><span id="l35.42">   let msgSet = new SyntheticMessageSet(messages);</span>
<a href="#l35.43"></a><span id="l35.43"> </span>
<a href="#l35.44"></a><span id="l35.44">   do_test_pending();</span>
<a href="#l35.45"></a><span id="l35.45"> </span>
<a href="#l35.46"></a><span id="l35.46">   gTestFolder = make_empty_folder();</span>
<a href="#l35.47"></a><span id="l35.47">   add_sets_to_folders(gTestFolder, [msgSet]);</span>
<a href="#l35.48"></a><span id="l35.48">   // - create the view</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/mailnews/compose/test/unit/data/429891_testcase.eml</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/mailnews/compose/test/unit/data/429891_testcase.eml</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l36.4"></a><span id="l36.4" class="difflineminus">-From: Invalid User &lt;invalid@invalid.com&gt;</span>
<a href="#l36.5"></a><span id="l36.5" class="difflineminus">-To: Invalid User &lt;to@invalid.com&gt;</span>
<a href="#l36.6"></a><span id="l36.6" class="difflineplus">+From: Invalid User &lt;invalid@foo.invalid&gt;</span>
<a href="#l36.7"></a><span id="l36.7" class="difflineplus">+To: Invalid User &lt;to@foo.invalid&gt;</span>
<a href="#l36.8"></a><span id="l36.8"> Subject: Big email</span>
<a href="#l36.9"></a><span id="l36.9"> </span>
<a href="#l36.10"></a><span id="l36.10"> 012345678901234567890123456789012345678901234567890123456789</span>
<a href="#l36.11"></a><span id="l36.11"> 012345678901234567890123456789012345678901234567890123456789</span>
<a href="#l36.12"></a><span id="l36.12"> 012345678901234567890123456789012345678901234567890123456789</span>
<a href="#l36.13"></a><span id="l36.13"> 012345678901234567890123456789012345678901234567890123456789</span>
<a href="#l36.14"></a><span id="l36.14"> 012345678901234567890123456789012345678901234567890123456789</span>
<a href="#l36.15"></a><span id="l36.15"> 012345678901234567890123456789012345678901234567890123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/mailnews/compose/test/unit/data/message1.eml</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/mailnews/compose/test/unit/data/message1.eml</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -1,7 +1,7 @@</span>
<a href="#l37.4"></a><span id="l37.4" class="difflineminus">-From: from@invalid.com</span>
<a href="#l37.5"></a><span id="l37.5" class="difflineminus">-To: to@invalid.com</span>
<a href="#l37.6"></a><span id="l37.6" class="difflineplus">+From: from@foo.invalid</span>
<a href="#l37.7"></a><span id="l37.7" class="difflineplus">+To: to@foo.invalid</span>
<a href="#l37.8"></a><span id="l37.8"> Subject: test mail</span>
<a href="#l37.9"></a><span id="l37.9"> </span>
<a href="#l37.10"></a><span id="l37.10"> this email is in dos format because that is what the interface requires</span>
<a href="#l37.11"></a><span id="l37.11"> </span>
<a href="#l37.12"></a><span id="l37.12"> test message</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_bug155172.js</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_bug155172.js</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -16,18 +16,18 @@ function confirmEx(aDialogTitle, aText, </span>
<a href="#l38.4"></a><span id="l38.4"> function promptPasswordPS(aParent, aDialogTitle, aText, aPassword,</span>
<a href="#l38.5"></a><span id="l38.5">                           aCheckMsg, aCheckState) {</span>
<a href="#l38.6"></a><span id="l38.6">   aPassword.value = gNewPassword;</span>
<a href="#l38.7"></a><span id="l38.7">   return true;</span>
<a href="#l38.8"></a><span id="l38.8"> }</span>
<a href="#l38.9"></a><span id="l38.9"> </span>
<a href="#l38.10"></a><span id="l38.10"> var server;</span>
<a href="#l38.11"></a><span id="l38.11"> </span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-const kSender = &quot;from@invalid.com&quot;;</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineminus">-const kTo = &quot;to@invalid.com&quot;;</span>
<a href="#l38.14"></a><span id="l38.14" class="difflineplus">+const kSender = &quot;from@foo.invalid&quot;;</span>
<a href="#l38.15"></a><span id="l38.15" class="difflineplus">+const kTo = &quot;to@foo.invalid&quot;;</span>
<a href="#l38.16"></a><span id="l38.16"> const kUsername = &quot;test.smtp@fakeserver&quot;;</span>
<a href="#l38.17"></a><span id="l38.17"> // kPassword 2 is the one defined in signons-mailnews1.8.txt, the other one</span>
<a href="#l38.18"></a><span id="l38.18"> // is intentionally wrong.</span>
<a href="#l38.19"></a><span id="l38.19"> const kPassword1 = &quot;wrong&quot;;</span>
<a href="#l38.20"></a><span id="l38.20"> const kPassword2 = &quot;smtptest&quot;;</span>
<a href="#l38.21"></a><span id="l38.21"> </span>
<a href="#l38.22"></a><span id="l38.22"> function run_test() {</span>
<a href="#l38.23"></a><span id="l38.23">   registerAlertTestUtils();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_bug235432.js</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_bug235432.js</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -3,18 +3,18 @@</span>
<a href="#l39.4"></a><span id="l39.4">  * Test for bug 235432</span>
<a href="#l39.5"></a><span id="l39.5">  */</span>
<a href="#l39.6"></a><span id="l39.6"> </span>
<a href="#l39.7"></a><span id="l39.7"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l39.8"></a><span id="l39.8"> </span>
<a href="#l39.9"></a><span id="l39.9"> var testmail = do_get_file(&quot;data/message1.eml&quot;);</span>
<a href="#l39.10"></a><span id="l39.10"> var expectedTemporaryFile;</span>
<a href="#l39.11"></a><span id="l39.11"> </span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-const kSender = &quot;from@invalid.com&quot;;</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineminus">-const kTo = &quot;to@invalid.com&quot;;</span>
<a href="#l39.14"></a><span id="l39.14" class="difflineplus">+const kSender = &quot;from@foo.invalid&quot;;</span>
<a href="#l39.15"></a><span id="l39.15" class="difflineplus">+const kTo = &quot;to@foo.invalid&quot;;</span>
<a href="#l39.16"></a><span id="l39.16"> </span>
<a href="#l39.17"></a><span id="l39.17"> var msgSend = Cc[&quot;@mozilla.org/messengercompose/send;1&quot;]</span>
<a href="#l39.18"></a><span id="l39.18">                 .createInstance(Ci.nsIMsgSend);</span>
<a href="#l39.19"></a><span id="l39.19"> </span>
<a href="#l39.20"></a><span id="l39.20"> var gCopyListener =</span>
<a href="#l39.21"></a><span id="l39.21"> {</span>
<a href="#l39.22"></a><span id="l39.22">   callbackFunction: null,</span>
<a href="#l39.23"></a><span id="l39.23">   copiedMessageHeaderKeys: [],</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_bug474774.js</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_bug474774.js</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -7,18 +7,18 @@ var type = null;</span>
<a href="#l40.4"></a><span id="l40.4"> var test = null;</span>
<a href="#l40.5"></a><span id="l40.5"> var server;</span>
<a href="#l40.6"></a><span id="l40.6"> var sentFolder;</span>
<a href="#l40.7"></a><span id="l40.7"> var originalData;</span>
<a href="#l40.8"></a><span id="l40.8"> var finished = false;</span>
<a href="#l40.9"></a><span id="l40.9"> var identity = null;</span>
<a href="#l40.10"></a><span id="l40.10"> var testFile = do_get_file(&quot;data/429891_testcase.eml&quot;);</span>
<a href="#l40.11"></a><span id="l40.11"> </span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-const kSender = &quot;from@invalid.com&quot;;</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineminus">-const kTo = &quot;to@invalid.com&quot;;</span>
<a href="#l40.14"></a><span id="l40.14" class="difflineplus">+const kSender = &quot;from@foo.invalid&quot;;</span>
<a href="#l40.15"></a><span id="l40.15" class="difflineplus">+const kTo = &quot;to@foo.invalid&quot;;</span>
<a href="#l40.16"></a><span id="l40.16"> </span>
<a href="#l40.17"></a><span id="l40.17"> var msgSendLater = Cc[&quot;@mozilla.org/messengercompose/sendlater;1&quot;]</span>
<a href="#l40.18"></a><span id="l40.18">   .getService(Ci.nsIMsgSendLater);</span>
<a href="#l40.19"></a><span id="l40.19"> </span>
<a href="#l40.20"></a><span id="l40.20"> // This listener handles the post-sending of the actual message and checks the</span>
<a href="#l40.21"></a><span id="l40.21"> // sequence and ensures the data is correct.</span>
<a href="#l40.22"></a><span id="l40.22"> function msll() {</span>
<a href="#l40.23"></a><span id="l40.23"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_nsMsgCompose1.js</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_nsMsgCompose1.js</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -71,20 +71,20 @@ function run_test() {</span>
<a href="#l41.4"></a><span id="l41.4">   msgCompose = Components.classes[MsgComposeContractID]</span>
<a href="#l41.5"></a><span id="l41.5">                          .createInstance(nsIMsgCompose);</span>
<a href="#l41.6"></a><span id="l41.6"> </span>
<a href="#l41.7"></a><span id="l41.7">   // Set up some basic fields for compose.</span>
<a href="#l41.8"></a><span id="l41.8">   var fields = Components.classes[MsgComposeFieldsContractID]</span>
<a href="#l41.9"></a><span id="l41.9">                          .createInstance(nsIMsgCompFields);</span>
<a href="#l41.10"></a><span id="l41.10"> </span>
<a href="#l41.11"></a><span id="l41.11">   // These aren't in the address book copied above.</span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-  fields.from = &quot;test1@invalid1.com&quot;;</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineminus">-  fields.to = &quot;test2@invalid1.com&quot;;</span>
<a href="#l41.14"></a><span id="l41.14" class="difflineminus">-  fields.cc = &quot;test3@invalid1.com&quot;;</span>
<a href="#l41.15"></a><span id="l41.15" class="difflineminus">-  fields.bcc = &quot;test4@invalid1.com&quot;;</span>
<a href="#l41.16"></a><span id="l41.16" class="difflineplus">+  fields.from = &quot;test1@foo1.invalid&quot;;</span>
<a href="#l41.17"></a><span id="l41.17" class="difflineplus">+  fields.to = &quot;test2@foo1.invalid&quot;;</span>
<a href="#l41.18"></a><span id="l41.18" class="difflineplus">+  fields.cc = &quot;test3@foo1.invalid&quot;;</span>
<a href="#l41.19"></a><span id="l41.19" class="difflineplus">+  fields.bcc = &quot;test4@foo1.invalid&quot;;</span>
<a href="#l41.20"></a><span id="l41.20"> </span>
<a href="#l41.21"></a><span id="l41.21">   // Set up some params</span>
<a href="#l41.22"></a><span id="l41.22">   params = Components.classes[MsgComposeParamsContractID]</span>
<a href="#l41.23"></a><span id="l41.23">                      .createInstance(nsIMsgComposeParams);</span>
<a href="#l41.24"></a><span id="l41.24"> </span>
<a href="#l41.25"></a><span id="l41.25">   params.composeFields = fields;</span>
<a href="#l41.26"></a><span id="l41.26"> </span>
<a href="#l41.27"></a><span id="l41.27">   msgCompose.initialize(params);</span>
<a href="#l41.28"></a><span id="l41.28" class="difflineat">@@ -96,61 +96,61 @@ function run_test() {</span>
<a href="#l41.29"></a><span id="l41.29">               nsIAbPreferMailFormat.unknown);</span>
<a href="#l41.30"></a><span id="l41.30"> </span>
<a href="#l41.31"></a><span id="l41.31">   do_check_eq(nonHTMLRecipients.value, &quot;&quot;);</span>
<a href="#l41.32"></a><span id="l41.32"> </span>
<a href="#l41.33"></a><span id="l41.33">   do_check_eq(msgCompose.checkAndPopulateRecipients(true, true,</span>
<a href="#l41.34"></a><span id="l41.34">                                                       nonHTMLRecipients),</span>
<a href="#l41.35"></a><span id="l41.35">               nsIAbPreferMailFormat.unknown);</span>
<a href="#l41.36"></a><span id="l41.36"> </span>
<a href="#l41.37"></a><span id="l41.37" class="difflineminus">-  do_check_eq(nonHTMLRecipients.value, &quot;test2@invalid1.com,test3@invalid1.com,test4@invalid1.com&quot;);</span>
<a href="#l41.38"></a><span id="l41.38" class="difflineplus">+  do_check_eq(nonHTMLRecipients.value, &quot;test2@foo1.invalid,test3@foo1.invalid,test4@foo1.invalid&quot;);</span>
<a href="#l41.39"></a><span id="l41.39"> </span>
<a href="#l41.40"></a><span id="l41.40" class="difflineminus">-  do_check_eq(fields.to, &quot;test2@invalid1.com&quot;);</span>
<a href="#l41.41"></a><span id="l41.41" class="difflineminus">-  do_check_eq(fields.cc, &quot;test3@invalid1.com&quot;);</span>
<a href="#l41.42"></a><span id="l41.42" class="difflineminus">-  do_check_eq(fields.bcc, &quot;test4@invalid1.com&quot;);</span>
<a href="#l41.43"></a><span id="l41.43" class="difflineplus">+  do_check_eq(fields.to, &quot;test2@foo1.invalid&quot;);</span>
<a href="#l41.44"></a><span id="l41.44" class="difflineplus">+  do_check_eq(fields.cc, &quot;test3@foo1.invalid&quot;);</span>
<a href="#l41.45"></a><span id="l41.45" class="difflineplus">+  do_check_eq(fields.bcc, &quot;test4@foo1.invalid&quot;);</span>
<a href="#l41.46"></a><span id="l41.46"> </span>
<a href="#l41.47"></a><span id="l41.47">   // Test - checkAndPopulateRecipients with plain text.</span>
<a href="#l41.48"></a><span id="l41.48"> </span>
<a href="#l41.49"></a><span id="l41.49" class="difflineminus">-  checkPopulate(&quot;test4@invalid.com&quot;, &quot;test4@invalid.com&quot;,</span>
<a href="#l41.50"></a><span id="l41.50" class="difflineminus">-                nsIAbPreferMailFormat.plaintext, &quot;test4@invalid.com&quot;);</span>
<a href="#l41.51"></a><span id="l41.51" class="difflineplus">+  checkPopulate(&quot;test4@foo.invalid&quot;, &quot;test4@foo.invalid&quot;,</span>
<a href="#l41.52"></a><span id="l41.52" class="difflineplus">+                nsIAbPreferMailFormat.plaintext, &quot;test4@foo.invalid&quot;);</span>
<a href="#l41.53"></a><span id="l41.53"> </span>
<a href="#l41.54"></a><span id="l41.54">   // Test - checkAndPopulateRecipients with html.</span>
<a href="#l41.55"></a><span id="l41.55"> </span>
<a href="#l41.56"></a><span id="l41.56" class="difflineminus">-  checkPopulate(&quot;test5@invalid.com&quot;, &quot;&quot;, nsIAbPreferMailFormat.html,</span>
<a href="#l41.57"></a><span id="l41.57" class="difflineminus">-                &quot;test5@invalid.com&quot;);</span>
<a href="#l41.58"></a><span id="l41.58" class="difflineplus">+  checkPopulate(&quot;test5@foo.invalid&quot;, &quot;&quot;, nsIAbPreferMailFormat.html,</span>
<a href="#l41.59"></a><span id="l41.59" class="difflineplus">+                &quot;test5@foo.invalid&quot;);</span>
<a href="#l41.60"></a><span id="l41.60"> </span>
<a href="#l41.61"></a><span id="l41.61">   // Test - checkAndPopulateRecipients with a list of three items.</span>
<a href="#l41.62"></a><span id="l41.62"> </span>
<a href="#l41.63"></a><span id="l41.63">   checkPopulate(&quot;TestList1 &lt;TestList1&gt;&quot;,</span>
<a href="#l41.64"></a><span id="l41.64" class="difflineminus">-                &quot;test1@invalid.com,test2@invalid.com,test3@invalid.com&quot;,</span>
<a href="#l41.65"></a><span id="l41.65" class="difflineplus">+                &quot;test1@foo.invalid,test2@foo.invalid,test3@foo.invalid&quot;,</span>
<a href="#l41.66"></a><span id="l41.66">                 nsIAbPreferMailFormat.unknown,</span>
<a href="#l41.67"></a><span id="l41.67" class="difflineminus">-                &quot;test1@invalid.com,test2@invalid.com,test3@invalid.com&quot;);</span>
<a href="#l41.68"></a><span id="l41.68" class="difflineplus">+                &quot;test1@foo.invalid,test2@foo.invalid,test3@foo.invalid&quot;);</span>
<a href="#l41.69"></a><span id="l41.69"> </span>
<a href="#l41.70"></a><span id="l41.70">   // Test - checkAndPopulateRecipients with a list of one item.</span>
<a href="#l41.71"></a><span id="l41.71"> </span>
<a href="#l41.72"></a><span id="l41.72" class="difflineminus">-  checkPopulate(&quot;TestList2 &lt;TestList2&gt;&quot;, &quot;test4@invalid.com&quot;,</span>
<a href="#l41.73"></a><span id="l41.73" class="difflineminus">-                nsIAbPreferMailFormat.plaintext, &quot;test4@invalid.com&quot;);</span>
<a href="#l41.74"></a><span id="l41.74" class="difflineplus">+  checkPopulate(&quot;TestList2 &lt;TestList2&gt;&quot;, &quot;test4@foo.invalid&quot;,</span>
<a href="#l41.75"></a><span id="l41.75" class="difflineplus">+                nsIAbPreferMailFormat.plaintext, &quot;test4@foo.invalid&quot;);</span>
<a href="#l41.76"></a><span id="l41.76"> </span>
<a href="#l41.77"></a><span id="l41.77">   checkPopulate(&quot;TestList3 &lt;TestList3&gt;&quot;, &quot;&quot;,</span>
<a href="#l41.78"></a><span id="l41.78" class="difflineminus">-                nsIAbPreferMailFormat.html, &quot;test5@invalid.com&quot;);</span>
<a href="#l41.79"></a><span id="l41.79" class="difflineplus">+                nsIAbPreferMailFormat.html, &quot;test5@foo.invalid&quot;);</span>
<a href="#l41.80"></a><span id="l41.80"> </span>
<a href="#l41.81"></a><span id="l41.81">   // Test - checkAndPopulateRecipients with items from multiple address books.</span>
<a href="#l41.82"></a><span id="l41.82"> </span>
<a href="#l41.83"></a><span id="l41.83">   checkPopulate(&quot;TestList1 &lt;TestList1&gt;, test3@com.invalid&quot;,</span>
<a href="#l41.84"></a><span id="l41.84" class="difflineminus">-                &quot;test1@invalid.com,test2@invalid.com,test3@invalid.com,test3@com.invalid&quot;,</span>
<a href="#l41.85"></a><span id="l41.85" class="difflineplus">+                &quot;test1@foo.invalid,test2@foo.invalid,test3@foo.invalid,test3@com.invalid&quot;,</span>
<a href="#l41.86"></a><span id="l41.86">                 nsIAbPreferMailFormat.unknown,</span>
<a href="#l41.87"></a><span id="l41.87" class="difflineminus">-                &quot;test1@invalid.com,test2@invalid.com,test3@invalid.com,test3@com.invalid&quot;);</span>
<a href="#l41.88"></a><span id="l41.88" class="difflineplus">+                &quot;test1@foo.invalid,test2@foo.invalid,test3@foo.invalid,test3@com.invalid&quot;);</span>
<a href="#l41.89"></a><span id="l41.89"> </span>
<a href="#l41.90"></a><span id="l41.90">   checkPopulate(&quot;TestList2 &lt;TestList2&gt;, ListTest2 &lt;ListTest2&gt;&quot;,</span>
<a href="#l41.91"></a><span id="l41.91" class="difflineminus">-                &quot;test4@invalid.com,test4@com.invalid&quot;,</span>
<a href="#l41.92"></a><span id="l41.92" class="difflineplus">+                &quot;test4@foo.invalid,test4@com.invalid&quot;,</span>
<a href="#l41.93"></a><span id="l41.93">                 nsIAbPreferMailFormat.plaintext,</span>
<a href="#l41.94"></a><span id="l41.94" class="difflineminus">-                &quot;test4@invalid.com,test4@com.invalid&quot;);</span>
<a href="#l41.95"></a><span id="l41.95" class="difflineplus">+                &quot;test4@foo.invalid,test4@com.invalid&quot;);</span>
<a href="#l41.96"></a><span id="l41.96"> </span>
<a href="#l41.97"></a><span id="l41.97">   checkPopulate(&quot;TestList3 &lt;TestList3&gt;, ListTest1 &lt;ListTest1&gt;&quot;,</span>
<a href="#l41.98"></a><span id="l41.98">                 &quot;test1@com.invalid,test2@com.invalid,test3@com.invalid&quot;,</span>
<a href="#l41.99"></a><span id="l41.99">                 nsIAbPreferMailFormat.unknown,</span>
<a href="#l41.100"></a><span id="l41.100" class="difflineminus">-                &quot;test5@invalid.com,test1@com.invalid,test2@com.invalid,test3@com.invalid&quot;);</span>
<a href="#l41.101"></a><span id="l41.101" class="difflineplus">+                &quot;test5@foo.invalid,test1@com.invalid,test2@com.invalid,test3@com.invalid&quot;);</span>
<a href="#l41.102"></a><span id="l41.102">                 </span>
<a href="#l41.103"></a><span id="l41.103">   // test bug 254519 rfc 2047 encoding</span>
<a href="#l41.104"></a><span id="l41.104" class="difflineminus">-  checkPopulate(&quot;=?iso-8859-1?Q?Sure=F6name=2C_Forename__Dr=2E?= &lt;pb@bieringer.de&gt;&quot;, &quot;pb@bieringer.de&quot;,</span>
<a href="#l41.105"></a><span id="l41.105" class="difflineplus">+  checkPopulate(&quot;=?iso-8859-1?Q?Sure=F6name=2C_Forename__Dr=2E?= &lt;pb@bieringer.invalid&gt;&quot;, &quot;pb@bieringer.invalid&quot;,</span>
<a href="#l41.106"></a><span id="l41.106">                 nsIAbPreferMailFormat.unknown,</span>
<a href="#l41.107"></a><span id="l41.107" class="difflineminus">-                &quot;\&quot;Sure\u00F6name, Forename  Dr.\&quot; &lt;pb@bieringer.de&gt;&quot;);</span>
<a href="#l41.108"></a><span id="l41.108" class="difflineplus">+                &quot;\&quot;Sure\u00F6name, Forename  Dr.\&quot; &lt;pb@bieringer.invalid&gt;&quot;);</span>
<a href="#l41.109"></a><span id="l41.109"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_sendBackground.js</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_sendBackground.js</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -7,18 +7,18 @@ var test = null;</span>
<a href="#l42.4"></a><span id="l42.4"> var server;</span>
<a href="#l42.5"></a><span id="l42.5"> var sentFolder;</span>
<a href="#l42.6"></a><span id="l42.6"> var originalData;</span>
<a href="#l42.7"></a><span id="l42.7"> var finished = false;</span>
<a href="#l42.8"></a><span id="l42.8"> var identity = null;</span>
<a href="#l42.9"></a><span id="l42.9"> var testFile1 = do_get_file(&quot;data/429891_testcase.eml&quot;);</span>
<a href="#l42.10"></a><span id="l42.10"> var testFile2 = do_get_file(&quot;data/message1.eml&quot;);</span>
<a href="#l42.11"></a><span id="l42.11"> </span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-const kSender = &quot;from@invalid.com&quot;;</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineminus">-const kTo = &quot;to@invalid.com&quot;;</span>
<a href="#l42.14"></a><span id="l42.14" class="difflineplus">+const kSender = &quot;from@foo.invalid&quot;;</span>
<a href="#l42.15"></a><span id="l42.15" class="difflineplus">+const kTo = &quot;to@foo.invalid&quot;;</span>
<a href="#l42.16"></a><span id="l42.16"> </span>
<a href="#l42.17"></a><span id="l42.17"> var gMsgSendLater;</span>
<a href="#l42.18"></a><span id="l42.18"> </span>
<a href="#l42.19"></a><span id="l42.19"> // This listener handles the post-sending of the actual message and checks the</span>
<a href="#l42.20"></a><span id="l42.20"> // sequence and ensures the data is correct.</span>
<a href="#l42.21"></a><span id="l42.21"> function msll() {</span>
<a href="#l42.22"></a><span id="l42.22"> }</span>
<a href="#l42.23"></a><span id="l42.23"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_sendMailAddressIDN.js</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_sendMailAddressIDN.js</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -8,21 +8,21 @@ var type = null;</span>
<a href="#l43.4"></a><span id="l43.4"> var test = null;</span>
<a href="#l43.5"></a><span id="l43.5"> var server;</span>
<a href="#l43.6"></a><span id="l43.6"> var finished = false;</span>
<a href="#l43.7"></a><span id="l43.7"> </span>
<a href="#l43.8"></a><span id="l43.8"> var sentFolder;</span>
<a href="#l43.9"></a><span id="l43.9"> var originalData;</span>
<a href="#l43.10"></a><span id="l43.10"> var expectedAlertMessage;</span>
<a href="#l43.11"></a><span id="l43.11"> </span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-const kSender     = &quot;from@invalid.com&quot;;</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineminus">-const kToASCII    = &quot;to@invalid.com&quot;;</span>
<a href="#l43.14"></a><span id="l43.14" class="difflineminus">-const kToValid    = &quot;to@v\u00E4lid.invalid.com&quot;;</span>
<a href="#l43.15"></a><span id="l43.15" class="difflineminus">-const kToValidACE = &quot;to@xn--vlid-loa.invalid.com&quot;;</span>
<a href="#l43.16"></a><span id="l43.16" class="difflineminus">-const kToInvalid  = &quot;b\u00F8rken.to@invalid.invalid.com&quot;;</span>
<a href="#l43.17"></a><span id="l43.17" class="difflineplus">+const kSender     = &quot;from@foo.invalid&quot;;</span>
<a href="#l43.18"></a><span id="l43.18" class="difflineplus">+const kToASCII    = &quot;to@foo.invalid&quot;;</span>
<a href="#l43.19"></a><span id="l43.19" class="difflineplus">+const kToValid    = &quot;to@v\u00E4lid.foo.invalid&quot;;</span>
<a href="#l43.20"></a><span id="l43.20" class="difflineplus">+const kToValidACE = &quot;to@xn--vlid-loa.foo.invalid&quot;;</span>
<a href="#l43.21"></a><span id="l43.21" class="difflineplus">+const kToInvalid  = &quot;b\u00F8rken.to@invalid.foo.invalid&quot;;</span>
<a href="#l43.22"></a><span id="l43.22"> const NS_ERROR_BUT_DONT_SHOW_ALERT = 0x805530ef;</span>
<a href="#l43.23"></a><span id="l43.23"> </span>
<a href="#l43.24"></a><span id="l43.24"> </span>
<a href="#l43.25"></a><span id="l43.25"> // nsIPrompt</span>
<a href="#l43.26"></a><span id="l43.26"> function alert(aDialogText, aText)</span>
<a href="#l43.27"></a><span id="l43.27"> {</span>
<a href="#l43.28"></a><span id="l43.28">   // we should only get here for the kToInvalid test case</span>
<a href="#l43.29"></a><span id="l43.29">   do_check_eq(test, kToInvalid);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_sendMailMessage.js</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_sendMailMessage.js</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -4,18 +4,18 @@</span>
<a href="#l44.4"></a><span id="l44.4">  *</span>
<a href="#l44.5"></a><span id="l44.5">  * This test currently consists of verifying the correct protocol sequence</span>
<a href="#l44.6"></a><span id="l44.6">  * between mailnews and SMTP server. It does not check the data of the message</span>
<a href="#l44.7"></a><span id="l44.7">  * either side of the link, it will be extended later to do that.</span>
<a href="#l44.8"></a><span id="l44.8">  */</span>
<a href="#l44.9"></a><span id="l44.9"> var test = null;</span>
<a href="#l44.10"></a><span id="l44.10"> var server;</span>
<a href="#l44.11"></a><span id="l44.11"> </span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-const kSender = &quot;from@invalid.com&quot;;</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineminus">-const kTo = &quot;to@invalid.com&quot;;</span>
<a href="#l44.14"></a><span id="l44.14" class="difflineplus">+const kSender = &quot;from@foo.invalid&quot;;</span>
<a href="#l44.15"></a><span id="l44.15" class="difflineplus">+const kTo = &quot;to@foo.invalid&quot;;</span>
<a href="#l44.16"></a><span id="l44.16"> const kUsername = &quot;testsmtp&quot;;</span>
<a href="#l44.17"></a><span id="l44.17"> const kPassword = &quot;smtptest&quot;;</span>
<a href="#l44.18"></a><span id="l44.18"> </span>
<a href="#l44.19"></a><span id="l44.19"> function test_RFC2821() {</span>
<a href="#l44.20"></a><span id="l44.20"> </span>
<a href="#l44.21"></a><span id="l44.21">   // Test file</span>
<a href="#l44.22"></a><span id="l44.22">   var testFile = do_get_file(&quot;data/message1.eml&quot;);</span>
<a href="#l44.23"></a><span id="l44.23"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_sendMessageFile.js</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_sendMessageFile.js</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -12,18 +12,18 @@</span>
<a href="#l45.4"></a><span id="l45.4">  */</span>
<a href="#l45.5"></a><span id="l45.5"> var type = null;</span>
<a href="#l45.6"></a><span id="l45.6"> var test = null;</span>
<a href="#l45.7"></a><span id="l45.7"> var server;</span>
<a href="#l45.8"></a><span id="l45.8"> var sentFolder;</span>
<a href="#l45.9"></a><span id="l45.9"> var originalData;</span>
<a href="#l45.10"></a><span id="l45.10"> var finished = false;</span>
<a href="#l45.11"></a><span id="l45.11"> </span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-const kSender = &quot;from@invalid.com&quot;;</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineminus">-const kTo = &quot;to@invalid.com&quot;;</span>
<a href="#l45.14"></a><span id="l45.14" class="difflineplus">+const kSender = &quot;from@foo.invalid&quot;;</span>
<a href="#l45.15"></a><span id="l45.15" class="difflineplus">+const kTo = &quot;to@foo.invalid&quot;;</span>
<a href="#l45.16"></a><span id="l45.16"> </span>
<a href="#l45.17"></a><span id="l45.17"> function msl() {}</span>
<a href="#l45.18"></a><span id="l45.18"> </span>
<a href="#l45.19"></a><span id="l45.19"> msl.prototype = {</span>
<a href="#l45.20"></a><span id="l45.20">   // nsIMsgSendListener</span>
<a href="#l45.21"></a><span id="l45.21">   onStartSending: function (aMsgID, aMsgSize) {</span>
<a href="#l45.22"></a><span id="l45.22">   },</span>
<a href="#l45.23"></a><span id="l45.23">   onProgress: function (aMsgID, aProgress, aProgressMax) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_sendMessageLater.js</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_sendMessageLater.js</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -14,18 +14,18 @@ var type = null;</span>
<a href="#l46.4"></a><span id="l46.4"> var test = null;</span>
<a href="#l46.5"></a><span id="l46.5"> var server;</span>
<a href="#l46.6"></a><span id="l46.6"> var sentFolder;</span>
<a href="#l46.7"></a><span id="l46.7"> var originalData;</span>
<a href="#l46.8"></a><span id="l46.8"> var finished = false;</span>
<a href="#l46.9"></a><span id="l46.9"> var identity = null;</span>
<a href="#l46.10"></a><span id="l46.10"> var testFile = do_get_file(&quot;data/429891_testcase.eml&quot;);</span>
<a href="#l46.11"></a><span id="l46.11"> </span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-const kSender = &quot;from@invalid.com&quot;;</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineminus">-const kTo = &quot;to@invalid.com&quot;;</span>
<a href="#l46.14"></a><span id="l46.14" class="difflineplus">+const kSender = &quot;from@foo.invalid&quot;;</span>
<a href="#l46.15"></a><span id="l46.15" class="difflineplus">+const kTo = &quot;to@foo.invalid&quot;;</span>
<a href="#l46.16"></a><span id="l46.16"> </span>
<a href="#l46.17"></a><span id="l46.17"> var msgSendLater = Cc[&quot;@mozilla.org/messengercompose/sendlater;1&quot;]</span>
<a href="#l46.18"></a><span id="l46.18">   .getService(Ci.nsIMsgSendLater);</span>
<a href="#l46.19"></a><span id="l46.19"> </span>
<a href="#l46.20"></a><span id="l46.20"> // This listener handles the post-sending of the actual message and checks the</span>
<a href="#l46.21"></a><span id="l46.21"> // sequence and ensures the data is correct.</span>
<a href="#l46.22"></a><span id="l46.22"> function msll() {</span>
<a href="#l46.23"></a><span id="l46.23"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_sendMessageLater2.js</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_sendMessageLater2.js</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -31,18 +31,18 @@ var gCurTestNum = 0;</span>
<a href="#l47.4"></a><span id="l47.4"> var gLastSentMessage = 0;</span>
<a href="#l47.5"></a><span id="l47.5"> </span>
<a href="#l47.6"></a><span id="l47.6"> // gMessageSendStatus</span>
<a href="#l47.7"></a><span id="l47.7"> // 0 = initial value</span>
<a href="#l47.8"></a><span id="l47.8"> // 1 = send completed before exiting sendUnsentMessages</span>
<a href="#l47.9"></a><span id="l47.9"> // 2 = sendUnsentMessages has exited.</span>
<a href="#l47.10"></a><span id="l47.10"> var gMessageSendStatus = 0;</span>
<a href="#l47.11"></a><span id="l47.11"> </span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-const kSender = &quot;from@invalid.com&quot;;</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineminus">-const kTo = &quot;to@invalid.com&quot;;</span>
<a href="#l47.14"></a><span id="l47.14" class="difflineplus">+const kSender = &quot;from@foo.invalid&quot;;</span>
<a href="#l47.15"></a><span id="l47.15" class="difflineplus">+const kTo = &quot;to@foo.invalid&quot;;</span>
<a href="#l47.16"></a><span id="l47.16"> </span>
<a href="#l47.17"></a><span id="l47.17"> var msgSendLater = Cc[&quot;@mozilla.org/messengercompose/sendlater;1&quot;]</span>
<a href="#l47.18"></a><span id="l47.18">                      .getService(Ci.nsIMsgSendLater);</span>
<a href="#l47.19"></a><span id="l47.19"> </span>
<a href="#l47.20"></a><span id="l47.20"> // This listener handles the post-sending of the actual message and checks the</span>
<a href="#l47.21"></a><span id="l47.21"> // sequence and ensures the data is correct.</span>
<a href="#l47.22"></a><span id="l47.22"> function msll() {</span>
<a href="#l47.23"></a><span id="l47.23"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_sendMessageLater3.js</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_sendMessageLater3.js</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -15,18 +15,18 @@ var test = null;</span>
<a href="#l48.4"></a><span id="l48.4"> var server;</span>
<a href="#l48.5"></a><span id="l48.5"> var sentFolder;</span>
<a href="#l48.6"></a><span id="l48.6"> var transaction;</span>
<a href="#l48.7"></a><span id="l48.7"> var originalData;</span>
<a href="#l48.8"></a><span id="l48.8"> var finished = false;</span>
<a href="#l48.9"></a><span id="l48.9"> var identity = null;</span>
<a href="#l48.10"></a><span id="l48.10"> var testFile = do_get_file(&quot;data/429891_testcase.eml&quot;);</span>
<a href="#l48.11"></a><span id="l48.11"> </span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-const kSender = &quot;from@invalid.com&quot;;</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineminus">-const kTo = &quot;to@invalid.com&quot;;</span>
<a href="#l48.14"></a><span id="l48.14" class="difflineplus">+const kSender = &quot;from@foo.invalid&quot;;</span>
<a href="#l48.15"></a><span id="l48.15" class="difflineplus">+const kTo = &quot;to@foo.invalid&quot;;</span>
<a href="#l48.16"></a><span id="l48.16"> </span>
<a href="#l48.17"></a><span id="l48.17"> var msgSendLater = Cc[&quot;@mozilla.org/messengercompose/sendlater;1&quot;]</span>
<a href="#l48.18"></a><span id="l48.18">   .getService(Ci.nsIMsgSendLater);</span>
<a href="#l48.19"></a><span id="l48.19"> </span>
<a href="#l48.20"></a><span id="l48.20"> function alert(aDialogTitle, aText) {</span>
<a href="#l48.21"></a><span id="l48.21">   dump(&quot;Hiding Alert {\n&quot; + aText + &quot;\n} End Alert\n&quot;);</span>
<a href="#l48.22"></a><span id="l48.22"> }</span>
<a href="#l48.23"></a><span id="l48.23"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_smtpAuthMethods.js</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_smtpAuthMethods.js</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -9,18 +9,18 @@ var server;</span>
<a href="#l49.4"></a><span id="l49.4"> var kAuthSchemes;</span>
<a href="#l49.5"></a><span id="l49.5"> var smtpServer;</span>
<a href="#l49.6"></a><span id="l49.6"> var smtpService;</span>
<a href="#l49.7"></a><span id="l49.7"> var testFile;</span>
<a href="#l49.8"></a><span id="l49.8"> var identity;</span>
<a href="#l49.9"></a><span id="l49.9"> </span>
<a href="#l49.10"></a><span id="l49.10"> const kUsername = &quot;fred&quot;;</span>
<a href="#l49.11"></a><span id="l49.11"> const kPassword = &quot;wilma&quot;;</span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-const kSender = &quot;from@invalid.com&quot;;</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineminus">-const kTo = &quot;to@invalid.com&quot;;</span>
<a href="#l49.14"></a><span id="l49.14" class="difflineplus">+const kSender = &quot;from@foo.invalid&quot;;</span>
<a href="#l49.15"></a><span id="l49.15" class="difflineplus">+const kTo = &quot;to@foo.invalid&quot;;</span>
<a href="#l49.16"></a><span id="l49.16"> const MAILFROM = &quot;MAIL FROM:&lt;&quot; + kSender + &quot;&gt; SIZE=155&quot;;</span>
<a href="#l49.17"></a><span id="l49.17"> const RCPTTO = &quot;RCPT TO:&lt;&quot; + kTo + &quot;&gt;&quot;;</span>
<a href="#l49.18"></a><span id="l49.18"> const AUTHPLAIN = &quot;AUTH PLAIN &quot; + AuthPLAIN.encodeLine(kUsername, kPassword);</span>
<a href="#l49.19"></a><span id="l49.19"> </span>
<a href="#l49.20"></a><span id="l49.20"> var tests = [</span>
<a href="#l49.21"></a><span id="l49.21">   { title: &quot;Cleartext password, with server supporting AUTH PLAIN, LOGIN, and CRAM&quot;,</span>
<a href="#l49.22"></a><span id="l49.22">     clientAuthMethod : Ci.nsMsgAuthMethod.passwordCleartext,</span>
<a href="#l49.23"></a><span id="l49.23">     serverAuthMethods : [ &quot;PLAIN&quot;, &quot;LOGIN&quot;, &quot;CRAM-MD5&quot; ],</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_smtpPassword.js</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_smtpPassword.js</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -1,17 +1,17 @@</span>
<a href="#l50.4"></a><span id="l50.4"> /* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l50.5"></a><span id="l50.5"> /**</span>
<a href="#l50.6"></a><span id="l50.6">  * Authentication tests for SMTP.</span>
<a href="#l50.7"></a><span id="l50.7">  */</span>
<a href="#l50.8"></a><span id="l50.8"> </span>
<a href="#l50.9"></a><span id="l50.9"> var server;</span>
<a href="#l50.10"></a><span id="l50.10"> </span>
<a href="#l50.11"></a><span id="l50.11" class="difflineminus">-const kSender = &quot;from@invalid.com&quot;;</span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-const kTo = &quot;to@invalid.com&quot;;</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineplus">+const kSender = &quot;from@foo.invalid&quot;;</span>
<a href="#l50.14"></a><span id="l50.14" class="difflineplus">+const kTo = &quot;to@foo.invalid&quot;;</span>
<a href="#l50.15"></a><span id="l50.15"> const kUsername = &quot;testsmtp&quot;;</span>
<a href="#l50.16"></a><span id="l50.16"> // This is the same as in the signons file.</span>
<a href="#l50.17"></a><span id="l50.17"> const kPassword = &quot;smtptest&quot;;</span>
<a href="#l50.18"></a><span id="l50.18"> </span>
<a href="#l50.19"></a><span id="l50.19"> function run_test() {</span>
<a href="#l50.20"></a><span id="l50.20">   function createHandler(d) {</span>
<a href="#l50.21"></a><span id="l50.21">     var handler = new SMTP_RFC2821_handler(d);</span>
<a href="#l50.22"></a><span id="l50.22">     // Username needs to match signons.txt</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_smtpPasswordFailure1.js</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_smtpPasswordFailure1.js</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -13,18 +13,18 @@</span>
<a href="#l51.4"></a><span id="l51.4"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l51.5"></a><span id="l51.5"> Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l51.6"></a><span id="l51.6"> </span>
<a href="#l51.7"></a><span id="l51.7"> load(&quot;../../../resources/alertTestUtils.js&quot;);</span>
<a href="#l51.8"></a><span id="l51.8"> </span>
<a href="#l51.9"></a><span id="l51.9"> var server;</span>
<a href="#l51.10"></a><span id="l51.10"> var attempt = 0;</span>
<a href="#l51.11"></a><span id="l51.11"> </span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-const kSender = &quot;from@invalid.com&quot;;</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineminus">-const kTo = &quot;to@invalid.com&quot;;</span>
<a href="#l51.14"></a><span id="l51.14" class="difflineplus">+const kSender = &quot;from@foo.invalid&quot;;</span>
<a href="#l51.15"></a><span id="l51.15" class="difflineplus">+const kTo = &quot;to@foo.invalid&quot;;</span>
<a href="#l51.16"></a><span id="l51.16"> const kUsername = &quot;testsmtp&quot;;</span>
<a href="#l51.17"></a><span id="l51.17"> // This is the same as in the signons file.</span>
<a href="#l51.18"></a><span id="l51.18"> const kInvalidPassword = &quot;smtptest&quot;;</span>
<a href="#l51.19"></a><span id="l51.19"> const kValidPassword = &quot;smtptest1&quot;;</span>
<a href="#l51.20"></a><span id="l51.20"> </span>
<a href="#l51.21"></a><span id="l51.21"> function alert(aDialogText, aText)</span>
<a href="#l51.22"></a><span id="l51.22"> {</span>
<a href="#l51.23"></a><span id="l51.23">   // The first few attempts may prompt about the password problem, the last</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_smtpPasswordFailure2.js</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_smtpPasswordFailure2.js</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -13,18 +13,18 @@</span>
<a href="#l52.4"></a><span id="l52.4"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l52.5"></a><span id="l52.5"> Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l52.6"></a><span id="l52.6"> </span>
<a href="#l52.7"></a><span id="l52.7"> load(&quot;../../../resources/alertTestUtils.js&quot;);</span>
<a href="#l52.8"></a><span id="l52.8"> </span>
<a href="#l52.9"></a><span id="l52.9"> var server;</span>
<a href="#l52.10"></a><span id="l52.10"> var attempt = 0;</span>
<a href="#l52.11"></a><span id="l52.11"> </span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-const kSender = &quot;from@invalid.com&quot;;</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineminus">-const kTo = &quot;to@invalid.com&quot;;</span>
<a href="#l52.14"></a><span id="l52.14" class="difflineplus">+const kSender = &quot;from@foo.invalid&quot;;</span>
<a href="#l52.15"></a><span id="l52.15" class="difflineplus">+const kTo = &quot;to@foo.invalid&quot;;</span>
<a href="#l52.16"></a><span id="l52.16"> const kUsername = &quot;testsmtp&quot;;</span>
<a href="#l52.17"></a><span id="l52.17"> // This is the same as in the signons file.</span>
<a href="#l52.18"></a><span id="l52.18"> const kInvalidPassword = &quot;smtptest&quot;;</span>
<a href="#l52.19"></a><span id="l52.19"> const kValidPassword = &quot;smtptest1&quot;;</span>
<a href="#l52.20"></a><span id="l52.20"> </span>
<a href="#l52.21"></a><span id="l52.21"> function alert(aDialogText, aText)</span>
<a href="#l52.22"></a><span id="l52.22"> {</span>
<a href="#l52.23"></a><span id="l52.23">   // The first few attempts may prompt about the password problem, the last</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_smtpPasswordFailure3.js</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_smtpPasswordFailure3.js</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -11,18 +11,18 @@</span>
<a href="#l53.4"></a><span id="l53.4"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l53.5"></a><span id="l53.5"> Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l53.6"></a><span id="l53.6"> </span>
<a href="#l53.7"></a><span id="l53.7"> load(&quot;../../../resources/alertTestUtils.js&quot;);</span>
<a href="#l53.8"></a><span id="l53.8"> </span>
<a href="#l53.9"></a><span id="l53.9"> var server;</span>
<a href="#l53.10"></a><span id="l53.10"> var attempt = 0;</span>
<a href="#l53.11"></a><span id="l53.11"> </span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-const kSender = &quot;from@invalid.com&quot;;</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineminus">-const kTo = &quot;to@invalid.com&quot;;</span>
<a href="#l53.14"></a><span id="l53.14" class="difflineplus">+const kSender = &quot;from@foo.invalid&quot;;</span>
<a href="#l53.15"></a><span id="l53.15" class="difflineplus">+const kTo = &quot;to@foo.invalid&quot;;</span>
<a href="#l53.16"></a><span id="l53.16"> const kUsername = &quot;testsmtp&quot;;</span>
<a href="#l53.17"></a><span id="l53.17"> // This is the same as in the signons file.</span>
<a href="#l53.18"></a><span id="l53.18"> const kInvalidPassword = &quot;smtptest&quot;;</span>
<a href="#l53.19"></a><span id="l53.19"> const kValidPassword = &quot;smtptest1&quot;;</span>
<a href="#l53.20"></a><span id="l53.20"> </span>
<a href="#l53.21"></a><span id="l53.21"> function alert(aDialogText, aText)</span>
<a href="#l53.22"></a><span id="l53.22"> {</span>
<a href="#l53.23"></a><span id="l53.23">   // The first few attempts may prompt about the password problem, the last</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/mailnews/db/gloda/modules/datastore.js</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/mailnews/db/gloda/modules/datastore.js</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -3940,17 +3940,17 @@ var GlodaDatastore = {</span>
<a href="#l54.4"></a><span id="l54.4">     this.__defineGetter__(&quot;_selectIdentityByKindValueStatement&quot;,</span>
<a href="#l54.5"></a><span id="l54.5">       function() statement);</span>
<a href="#l54.6"></a><span id="l54.6">     return this._selectIdentityByKindValueStatement;</span>
<a href="#l54.7"></a><span id="l54.7">   },</span>
<a href="#l54.8"></a><span id="l54.8"> </span>
<a href="#l54.9"></a><span id="l54.9">   /**</span>
<a href="#l54.10"></a><span id="l54.10">    * Synchronous lookup of an identity by kind and value, only for use by</span>
<a href="#l54.11"></a><span id="l54.11">    *  the legacy gloda core code that creates a concept of &quot;me&quot;.</span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-   *  Ex: (email, foo@bar.com)</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineplus">+   *  Ex: (email, foo@example.com)</span>
<a href="#l54.14"></a><span id="l54.14">    */</span>
<a href="#l54.15"></a><span id="l54.15">   getIdentity: function gloda_ds_getIdentity(aKind, aValue) {</span>
<a href="#l54.16"></a><span id="l54.16">     let identity = GlodaCollectionManager.cacheLookupOneByUniqueValue(</span>
<a href="#l54.17"></a><span id="l54.17">       GlodaIdentity.prototype.NOUN_ID, aKind + &quot;@&quot; + aValue);</span>
<a href="#l54.18"></a><span id="l54.18"> </span>
<a href="#l54.19"></a><span id="l54.19">     let ibkv = this._selectIdentityByKindValueStatement;</span>
<a href="#l54.20"></a><span id="l54.20">     ibkv.bindStringParameter(0, aKind);</span>
<a href="#l54.21"></a><span id="l54.21">     ibkv.bindStringParameter(1, aValue);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1" class="difflineminus">--- a/mailnews/db/gloda/modules/gloda.js</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineplus">+++ b/mailnews/db/gloda/modules/gloda.js</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineat">@@ -366,17 +366,17 @@ var Gloda = {</span>
<a href="#l55.4"></a><span id="l55.4">    *</span>
<a href="#l55.5"></a><span id="l55.5">    * We normalize all e-mail addresses to be lowercase as a normative measure.</span>
<a href="#l55.6"></a><span id="l55.6">    *</span>
<a href="#l55.7"></a><span id="l55.7">    * @param aCallbackHandle The GlodaIndexer callback handle (or equivalent)</span>
<a href="#l55.8"></a><span id="l55.8">    *   that you are operating under.</span>
<a href="#l55.9"></a><span id="l55.9">    * @param ... One or more strings.  Each string can contain zero or more</span>
<a href="#l55.10"></a><span id="l55.10">    *   e-mail addresses with display name.  If more than one address is given,</span>
<a href="#l55.11"></a><span id="l55.11">    *   they should be comma-delimited.  For example</span>
<a href="#l55.12"></a><span id="l55.12" class="difflineminus">-   *   '&quot;Bob Smith&quot; &lt;bob@smith.com&gt;' is an address with display name.  Mime</span>
<a href="#l55.13"></a><span id="l55.13" class="difflineplus">+   *   '&quot;Bob Smith&quot; &lt;bob@example.com&gt;' is an address with display name.  Mime</span>
<a href="#l55.14"></a><span id="l55.14">    *   header decoding is performed, but is ignorant of any folder-level</span>
<a href="#l55.15"></a><span id="l55.15">    *   character set overrides.</span>
<a href="#l55.16"></a><span id="l55.16">    * @returns via the callback handle mechanism, a list containing one sub-list</span>
<a href="#l55.17"></a><span id="l55.17">    *   for each string argument passed.  Each sub-list containts zero or more</span>
<a href="#l55.18"></a><span id="l55.18">    *   GlodaIdentity instances corresponding to the addresses provided.</span>
<a href="#l55.19"></a><span id="l55.19">    */</span>
<a href="#l55.20"></a><span id="l55.20">   getOrCreateMailIdentities:</span>
<a href="#l55.21"></a><span id="l55.21">       function gloda_ns_getOrCreateMailIdentities(aCallbackHandle) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l56.1"></a><span id="l56.1" class="difflineminus">--- a/mailnews/db/gloda/modules/utils.js</span>
<a href="#l56.2"></a><span id="l56.2" class="difflineplus">+++ b/mailnews/db/gloda/modules/utils.js</span>
<a href="#l56.3"></a><span id="l56.3" class="difflineat">@@ -31,26 +31,26 @@ var GlodaUtils = {</span>
<a href="#l56.4"></a><span id="l56.4">     return this._mimeConverter.decodeMimeHeader(aString, null, false, true);</span>
<a href="#l56.5"></a><span id="l56.5">   },</span>
<a href="#l56.6"></a><span id="l56.6"> </span>
<a href="#l56.7"></a><span id="l56.7">   _headerParser: null,</span>
<a href="#l56.8"></a><span id="l56.8"> </span>
<a href="#l56.9"></a><span id="l56.9">   /**</span>
<a href="#l56.10"></a><span id="l56.10">    * Parses an RFC 2822 list of e-mail addresses and returns an object with</span>
<a href="#l56.11"></a><span id="l56.11">    *  4 attributes, as described below.  We will use the example of the user</span>
<a href="#l56.12"></a><span id="l56.12" class="difflineminus">-   *  passing an argument of '&quot;Bob Smith&quot; &lt;bob@company.com&gt;'.</span>
<a href="#l56.13"></a><span id="l56.13" class="difflineplus">+   *  passing an argument of '&quot;Bob Smith&quot; &lt;bob@example.com&gt;'.</span>
<a href="#l56.14"></a><span id="l56.14">    *</span>
<a href="#l56.15"></a><span id="l56.15">    * This method (by way of nsIMsgHeaderParser) takes care of decoding mime</span>
<a href="#l56.16"></a><span id="l56.16">    *  headers, but is not aware of folder-level character set overrides.</span>
<a href="#l56.17"></a><span id="l56.17">    *</span>
<a href="#l56.18"></a><span id="l56.18">    * count: the number of addresses parsed. (ex: 1)</span>
<a href="#l56.19"></a><span id="l56.19" class="difflineminus">-   * addresses: a list of e-mail addresses (ex: [&quot;bob@company.com&quot;])</span>
<a href="#l56.20"></a><span id="l56.20" class="difflineplus">+   * addresses: a list of e-mail addresses (ex: [&quot;bob@example.com&quot;])</span>
<a href="#l56.21"></a><span id="l56.21">    * names: a list of names (ex: [&quot;Bob Smith&quot;])</span>
<a href="#l56.22"></a><span id="l56.22">    * fullAddresses: aka the list of name and e-mail together (ex: ['&quot;Bob Smith&quot;</span>
<a href="#l56.23"></a><span id="l56.23" class="difflineminus">-   *  &lt;bob@company.com&gt;']).</span>
<a href="#l56.24"></a><span id="l56.24" class="difflineplus">+   *  &lt;bob@example.com&gt;']).</span>
<a href="#l56.25"></a><span id="l56.25">    *</span>
<a href="#l56.26"></a><span id="l56.26">    * This method is a convenience wrapper around nsIMsgHeaderParser.</span>
<a href="#l56.27"></a><span id="l56.27">    */</span>
<a href="#l56.28"></a><span id="l56.28">   parseMailAddresses: function gloda_utils_parseMailAddresses(aMailAddresses) {</span>
<a href="#l56.29"></a><span id="l56.29">     if (this._headerParser == null) {</span>
<a href="#l56.30"></a><span id="l56.30">       this._headerParser = Cc[&quot;@mozilla.org/messenger/headerparser;1&quot;].</span>
<a href="#l56.31"></a><span id="l56.31">                            getService(Ci.nsIMsgHeaderParser);</span>
<a href="#l56.32"></a><span id="l56.32">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l57.1"></a><span id="l57.1" class="difflineminus">--- a/mailnews/db/gloda/test/unit/base_gloda_content.js</span>
<a href="#l57.2"></a><span id="l57.2" class="difflineplus">+++ b/mailnews/db/gloda/test/unit/base_gloda_content.js</span>
<a href="#l57.3"></a><span id="l57.3" class="difflineat">@@ -76,17 +76,17 @@ var messageInfos = [</span>
<a href="#l57.4"></a><span id="l57.4">            [false, &quot;&quot;],</span>
<a href="#l57.5"></a><span id="l57.5">            [false, &quot;&gt; I like hats!&quot;],</span>
<a href="#l57.6"></a><span id="l57.6">            [false, &quot;&gt; How bout you?&quot;],</span>
<a href="#l57.7"></a><span id="l57.7">            [false, &quot;&quot;],</span>
<a href="#l57.8"></a><span id="l57.8">            [true, &quot;Verily!&quot;]]</span>
<a href="#l57.9"></a><span id="l57.9">   },</span>
<a href="#l57.10"></a><span id="l57.10">   {</span>
<a href="#l57.11"></a><span id="l57.11">     name: &quot;german style&quot;,</span>
<a href="#l57.12"></a><span id="l57.12" class="difflineminus">-    bode: [[false, &quot;Mark Banner &lt;bugzilla@standard8.plus.com&gt; wrote:&quot;],</span>
<a href="#l57.13"></a><span id="l57.13" class="difflineplus">+    bode: [[false, &quot;Mark Banner &lt;bugzilla@standard8.plus.invalid&gt; wrote:&quot;],</span>
<a href="#l57.14"></a><span id="l57.14">            [false, &quot;\xa0&quot;],</span>
<a href="#l57.15"></a><span id="l57.15">            [false, &quot;&gt; We haven't nailed anything down in detail yet, depending on how we are &quot;],</span>
<a href="#l57.16"></a><span id="l57.16">            [true, &quot;That sounds great and would definitely be appreciated by localizers.&quot;],</span>
<a href="#l57.17"></a><span id="l57.17">            [false, &quot;&quot;]]</span>
<a href="#l57.18"></a><span id="l57.18">   },</span>
<a href="#l57.19"></a><span id="l57.19">   {</span>
<a href="#l57.20"></a><span id="l57.20">     name: &quot;tortuous interference&quot;,</span>
<a href="#l57.21"></a><span id="l57.21">     bode: [[false, &quot;&gt; wrote&quot;],</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l58.1"></a><span id="l58.1" class="difflineminus">--- a/mailnews/db/gloda/test/unit/test_index_addressbook.js</span>
<a href="#l58.2"></a><span id="l58.2" class="difflineplus">+++ b/mailnews/db/gloda/test/unit/test_index_addressbook.js</span>
<a href="#l58.3"></a><span id="l58.3" class="difflineat">@@ -45,17 +45,17 @@ function delete_card(aEmailAddress) {</span>
<a href="#l58.4"></a><span id="l58.4">     .deleteCards(cardArray);</span>
<a href="#l58.5"></a><span id="l58.5"> }</span>
<a href="#l58.6"></a><span id="l58.6"> </span>
<a href="#l58.7"></a><span id="l58.7"> function get_cached_gloda_identity_for_email(aEmailAddress) {</span>
<a href="#l58.8"></a><span id="l58.8">   return GlodaCollectionManager.cacheLookupOneByUniqueValue(</span>
<a href="#l58.9"></a><span id="l58.9">     Gloda.NOUN_IDENTITY, &quot;email@&quot; + aEmailAddress.toLowerCase());</span>
<a href="#l58.10"></a><span id="l58.10"> }</span>
<a href="#l58.11"></a><span id="l58.11"> </span>
<a href="#l58.12"></a><span id="l58.12" class="difflineminus">-const EMAIL_ADDRESS = &quot;all.over@the.world&quot;;</span>
<a href="#l58.13"></a><span id="l58.13" class="difflineplus">+const EMAIL_ADDRESS = &quot;all.over@the.world.invalid&quot;;</span>
<a href="#l58.14"></a><span id="l58.14"> const DISPLAY_NAME = &quot;every day&quot;;</span>
<a href="#l58.15"></a><span id="l58.15"> </span>
<a href="#l58.16"></a><span id="l58.16"> let identityCollection;</span>
<a href="#l58.17"></a><span id="l58.17"> </span>
<a href="#l58.18"></a><span id="l58.18"> /**</span>
<a href="#l58.19"></a><span id="l58.19">  * Create an e-mail so the identity can exist.</span>
<a href="#l58.20"></a><span id="l58.20">  */</span>
<a href="#l58.21"></a><span id="l58.21"> function setup_create_identity() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l59.1"></a><span id="l59.1" class="difflineminus">--- a/mailnews/db/gloda/test/unit/test_mime_attachments_size.js</span>
<a href="#l59.2"></a><span id="l59.2" class="difflineplus">+++ b/mailnews/db/gloda/test/unit/test_mime_attachments_size.js</span>
<a href="#l59.3"></a><span id="l59.3" class="difflineat">@@ -122,17 +122,17 @@ var tachUU = {filename: 'john.doe', cont</span>
<a href="#l59.4"></a><span id="l59.4"> </span>
<a href="#l59.5"></a><span id="l59.5"> var tachApplication = {filename: 'funky.funk',</span>
<a href="#l59.6"></a><span id="l59.6">                        contentType: 'application/x-funky',</span>
<a href="#l59.7"></a><span id="l59.7">                        encoding: 'base64',</span>
<a href="#l59.8"></a><span id="l59.8">                        body: b64Text};</span>
<a href="#l59.9"></a><span id="l59.9"> </span>
<a href="#l59.10"></a><span id="l59.10"> var relImage = {contentType: 'image/png',</span>
<a href="#l59.11"></a><span id="l59.11">                 encoding: 'base64', charset: null, format: null,</span>
<a href="#l59.12"></a><span id="l59.12" class="difflineminus">-                contentId: 'part1.foo@bar.com',</span>
<a href="#l59.13"></a><span id="l59.13" class="difflineplus">+                contentId: 'part1.foo@bar.invalid',</span>
<a href="#l59.14"></a><span id="l59.14">                 body: b64Text};</span>
<a href="#l59.15"></a><span id="l59.15"> </span>
<a href="#l59.16"></a><span id="l59.16"> var tachVCard = {filename: 'bob.vcf', contentType: 'text/x-vcard',</span>
<a href="#l59.17"></a><span id="l59.17">                  encoding: '7bit', body: 'begin:vcard\nfn:Bob\nend:vcard\n'};</span>
<a href="#l59.18"></a><span id="l59.18"> var partTachVCard = new SyntheticPartLeaf(tachVCard.body, tachVCard);</span>
<a href="#l59.19"></a><span id="l59.19"> </span>
<a href="#l59.20"></a><span id="l59.20"> var partRelImage = new SyntheticPartLeaf(relImage.body, relImage);</span>
<a href="#l59.21"></a><span id="l59.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l60.1"></a><span id="l60.1" class="difflineminus">--- a/mailnews/db/gloda/test/unit/test_mime_emitter.js</span>
<a href="#l60.2"></a><span id="l60.2" class="difflineplus">+++ b/mailnews/db/gloda/test/unit/test_mime_emitter.js</span>
<a href="#l60.3"></a><span id="l60.3" class="difflineat">@@ -94,17 +94,17 @@ var partTachInlineText = new SyntheticPa</span>
<a href="#l60.4"></a><span id="l60.4"> </span>
<a href="#l60.5"></a><span id="l60.5"> var tachImage = {filename: 'bob.png', contentType: 'image/png',</span>
<a href="#l60.6"></a><span id="l60.6">                  encoding: 'base64', charset: null, format: null,</span>
<a href="#l60.7"></a><span id="l60.7">                  body: 'YWJj\n'};</span>
<a href="#l60.8"></a><span id="l60.8"> var partTachImage = new SyntheticPartLeaf(tachImage.body, tachImage);</span>
<a href="#l60.9"></a><span id="l60.9"> </span>
<a href="#l60.10"></a><span id="l60.10"> var relImage = {contentType: 'image/png',</span>
<a href="#l60.11"></a><span id="l60.11">                 encoding: 'base64', charset: null, format: null,</span>
<a href="#l60.12"></a><span id="l60.12" class="difflineminus">-                contentId: 'part1.foo@bar.com',</span>
<a href="#l60.13"></a><span id="l60.13" class="difflineplus">+                contentId: 'part1.foo@bar.invalid',</span>
<a href="#l60.14"></a><span id="l60.14">                 body: 'YWJj\n'};</span>
<a href="#l60.15"></a><span id="l60.15"> var partRelImage = new SyntheticPartLeaf(relImage.body, relImage);</span>
<a href="#l60.16"></a><span id="l60.16"> </span>
<a href="#l60.17"></a><span id="l60.17"> var tachVCard = {filename: 'bob.vcf', contentType: 'text/x-vcard',</span>
<a href="#l60.18"></a><span id="l60.18">                  encoding: '7bit', body: 'begin:vcard\nfn:Bob\nend:vcard\n'};</span>
<a href="#l60.19"></a><span id="l60.19"> var partTachVCard = new SyntheticPartLeaf(tachVCard.body, tachVCard);</span>
<a href="#l60.20"></a><span id="l60.20"> </span>
<a href="#l60.21"></a><span id="l60.21"> var tachApplication = {filename: 'funky.funk',</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l61.1"></a><span id="l61.1" class="difflineminus">--- a/mailnews/extensions/mdn/test/unit/test_askuser.js</span>
<a href="#l61.2"></a><span id="l61.2" class="difflineplus">+++ b/mailnews/extensions/mdn/test/unit/test_askuser.js</span>
<a href="#l61.3"></a><span id="l61.3" class="difflineat">@@ -4,25 +4,25 @@ var gMessenger = Cc[&quot;@mozilla.org/messen</span>
<a href="#l61.4"></a><span id="l61.4">                    createInstance(Ci.nsIMessenger);</span>
<a href="#l61.5"></a><span id="l61.5"> </span>
<a href="#l61.6"></a><span id="l61.6"> loadLocalMailAccount();</span>
<a href="#l61.7"></a><span id="l61.7"> </span>
<a href="#l61.8"></a><span id="l61.8"> let acctMgr = Cc[&quot;@mozilla.org/messenger/account-manager;1&quot;]</span>
<a href="#l61.9"></a><span id="l61.9">                .getService(Ci.nsIMsgAccountManager);</span>
<a href="#l61.10"></a><span id="l61.10"> let localAccount = acctMgr.FindAccountForServer(gLocalIncomingServer);</span>
<a href="#l61.11"></a><span id="l61.11"> let identity = acctMgr.createIdentity();</span>
<a href="#l61.12"></a><span id="l61.12" class="difflineminus">-identity.email = &quot;bob@t2.exemple.net&quot;;</span>
<a href="#l61.13"></a><span id="l61.13" class="difflineplus">+identity.email = &quot;bob@t2.example.net&quot;;</span>
<a href="#l61.14"></a><span id="l61.14"> localAccount.addIdentity(identity);</span>
<a href="#l61.15"></a><span id="l61.15"> localAccount.defaultIdentity = identity;</span>
<a href="#l61.16"></a><span id="l61.16"> </span>
<a href="#l61.17"></a><span id="l61.17"> function run_test()</span>
<a href="#l61.18"></a><span id="l61.18"> {</span>
<a href="#l61.19"></a><span id="l61.19">   var headers = </span>
<a href="#l61.20"></a><span id="l61.20">     &quot;from: alice@t1.example.com\r\n&quot; + </span>
<a href="#l61.21"></a><span id="l61.21" class="difflineminus">-    &quot;to: bob@t2.exemple.net\r\n&quot; + </span>
<a href="#l61.22"></a><span id="l61.22" class="difflineplus">+    &quot;to: bob@t2.example.net\r\n&quot; + </span>
<a href="#l61.23"></a><span id="l61.23">     &quot;return-path: alice@t1.example.com\r\n&quot; +</span>
<a href="#l61.24"></a><span id="l61.24">     &quot;Disposition-Notification-To: alice@t1.example.com\r\n&quot;;</span>
<a href="#l61.25"></a><span id="l61.25"> </span>
<a href="#l61.26"></a><span id="l61.26">   let mimeHdr = Components.classes[&quot;@mozilla.org/messenger/mimeheaders;1&quot;]</span>
<a href="#l61.27"></a><span id="l61.27">                   .createInstance(Components.interfaces.nsIMimeHeaders);</span>
<a href="#l61.28"></a><span id="l61.28">   mimeHdr.initialize(headers);</span>
<a href="#l61.29"></a><span id="l61.29">   let receivedHeader = mimeHdr.extractHeader(&quot;To&quot;, false);</span>
<a href="#l61.30"></a><span id="l61.30">   dump(receivedHeader+&quot;\n&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l62.1"></a><span id="l62.1" class="difflineminus">--- a/mailnews/extensions/mdn/test/unit/test_mdnFlags.js</span>
<a href="#l62.2"></a><span id="l62.2" class="difflineplus">+++ b/mailnews/extensions/mdn/test/unit/test_mdnFlags.js</span>
<a href="#l62.3"></a><span id="l62.3" class="difflineat">@@ -10,27 +10,27 @@ var gMessenger = Cc[&quot;@mozilla.org/messen</span>
<a href="#l62.4"></a><span id="l62.4">                    createInstance(Ci.nsIMessenger);</span>
<a href="#l62.5"></a><span id="l62.5"> </span>
<a href="#l62.6"></a><span id="l62.6"> loadLocalMailAccount();</span>
<a href="#l62.7"></a><span id="l62.7"> </span>
<a href="#l62.8"></a><span id="l62.8"> let acctMgr = Cc[&quot;@mozilla.org/messenger/account-manager;1&quot;]</span>
<a href="#l62.9"></a><span id="l62.9">                .getService(Ci.nsIMsgAccountManager);</span>
<a href="#l62.10"></a><span id="l62.10"> let localAccount = acctMgr.FindAccountForServer(gLocalIncomingServer);</span>
<a href="#l62.11"></a><span id="l62.11"> let identity = acctMgr.createIdentity();</span>
<a href="#l62.12"></a><span id="l62.12" class="difflineminus">-identity.email = &quot;bob@t2.exemple.net&quot;;</span>
<a href="#l62.13"></a><span id="l62.13" class="difflineplus">+identity.email = &quot;bob@t2.example.net&quot;;</span>
<a href="#l62.14"></a><span id="l62.14"> localAccount.addIdentity(identity);</span>
<a href="#l62.15"></a><span id="l62.15"> localAccount.defaultIdentity = identity;</span>
<a href="#l62.16"></a><span id="l62.16"> </span>
<a href="#l62.17"></a><span id="l62.17"> </span>
<a href="#l62.18"></a><span id="l62.18"> </span>
<a href="#l62.19"></a><span id="l62.19"> function run_test()</span>
<a href="#l62.20"></a><span id="l62.20"> {</span>
<a href="#l62.21"></a><span id="l62.21">   var headers = </span>
<a href="#l62.22"></a><span id="l62.22">     &quot;from: alice@t1.example.com\r\n&quot; +</span>
<a href="#l62.23"></a><span id="l62.23" class="difflineminus">-    &quot;to: bob@t2.exemple.net\r\n&quot; +</span>
<a href="#l62.24"></a><span id="l62.24" class="difflineplus">+    &quot;to: bob@t2.example.net\r\n&quot; +</span>
<a href="#l62.25"></a><span id="l62.25">     &quot;return-path: alice@t1.example.com\r\n&quot; +</span>
<a href="#l62.26"></a><span id="l62.26">     &quot;Disposition-Notification-To: alice@t1.example.com\r\n&quot;;</span>
<a href="#l62.27"></a><span id="l62.27"> </span>
<a href="#l62.28"></a><span id="l62.28">   let mimeHdr = Components.classes[&quot;@mozilla.org/messenger/mimeheaders;1&quot;]</span>
<a href="#l62.29"></a><span id="l62.29">                   .createInstance(Components.interfaces.nsIMimeHeaders);</span>
<a href="#l62.30"></a><span id="l62.30">   mimeHdr.initialize(headers);</span>
<a href="#l62.31"></a><span id="l62.31">   let receivedHeader = mimeHdr.extractHeader(&quot;To&quot;, false);</span>
<a href="#l62.32"></a><span id="l62.32"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l63.1"></a><span id="l63.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapStoreMsgOffline.js</span>
<a href="#l63.2"></a><span id="l63.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapStoreMsgOffline.js</span>
<a href="#l63.3"></a><span id="l63.3" class="difflineat">@@ -22,19 +22,19 @@ load(&quot;../../../resources/IMAPpump.js&quot;);</span>
<a href="#l63.4"></a><span id="l63.4"> var gMessageGenerator = new MessageGenerator();</span>
<a href="#l63.5"></a><span id="l63.5"> var gScenarioFactory = new MessageScenarioFactory(gMessageGenerator);</span>
<a href="#l63.6"></a><span id="l63.6"> </span>
<a href="#l63.7"></a><span id="l63.7"> const nsMsgMessageFlags = Ci.nsMsgMessageFlags;</span>
<a href="#l63.8"></a><span id="l63.8"> </span>
<a href="#l63.9"></a><span id="l63.9"> var gMsgFile1 = do_get_file(&quot;../../../data/bugmail10&quot;);</span>
<a href="#l63.10"></a><span id="l63.10"> const gMsgId1 = &quot;200806061706.m56H6RWT004933@mrapp54.mozilla.org&quot;;</span>
<a href="#l63.11"></a><span id="l63.11"> var gMsgFile2 = do_get_file(&quot;../../../data/image-attach-test&quot;);</span>
<a href="#l63.12"></a><span id="l63.12" class="difflineminus">-const gMsgId2 = &quot;4A947F73.5030709@xxx.com&quot;;</span>
<a href="#l63.13"></a><span id="l63.13" class="difflineplus">+const gMsgId2 = &quot;4A947F73.5030709@example.com&quot;;</span>
<a href="#l63.14"></a><span id="l63.14"> var gMsgFile3 = do_get_file(&quot;../../../data/external-attach-test&quot;);</span>
<a href="#l63.15"></a><span id="l63.15" class="difflineminus">-const gMsgId3 = &quot;876TY.5030709@xxx.com&quot;;</span>
<a href="#l63.16"></a><span id="l63.16" class="difflineplus">+const gMsgId3 = &quot;876TY.5030709@example.com&quot;;</span>
<a href="#l63.17"></a><span id="l63.17"> </span>
<a href="#l63.18"></a><span id="l63.18"> var gFirstNewMsg;</span>
<a href="#l63.19"></a><span id="l63.19"> var gFirstMsgSize;</span>
<a href="#l63.20"></a><span id="l63.20"> var gImapInboxOfflineStoreSize;</span>
<a href="#l63.21"></a><span id="l63.21"> </span>
<a href="#l63.22"></a><span id="l63.22"> // We use this as a display consumer</span>
<a href="#l63.23"></a><span id="l63.23"> var streamListener =</span>
<a href="#l63.24"></a><span id="l63.24"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l64.1"></a><span id="l64.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_offlineCopy.js</span>
<a href="#l64.2"></a><span id="l64.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_offlineCopy.js</span>
<a href="#l64.3"></a><span id="l64.3" class="difflineat">@@ -18,22 +18,22 @@ load(&quot;../../../resources/mailTestUtils.j</span>
<a href="#l64.4"></a><span id="l64.4"> load(&quot;../../../resources/asyncTestUtils.js&quot;);</span>
<a href="#l64.5"></a><span id="l64.5"> load(&quot;../../../resources/IMAPpump.js&quot;);</span>
<a href="#l64.6"></a><span id="l64.6"> </span>
<a href="#l64.7"></a><span id="l64.7"> const nsMsgMessageFlags = Ci.nsMsgMessageFlags;</span>
<a href="#l64.8"></a><span id="l64.8"> </span>
<a href="#l64.9"></a><span id="l64.9"> var gMsgFile1 = do_get_file(&quot;../../../data/bugmail10&quot;);</span>
<a href="#l64.10"></a><span id="l64.10"> const gMsgId1 = &quot;200806061706.m56H6RWT004933@mrapp54.mozilla.org&quot;;</span>
<a href="#l64.11"></a><span id="l64.11"> var gMsgFile2 = do_get_file(&quot;../../../data/image-attach-test&quot;);</span>
<a href="#l64.12"></a><span id="l64.12" class="difflineminus">-const gMsgId2 = &quot;4A947F73.5030709@xxx.com&quot;;</span>
<a href="#l64.13"></a><span id="l64.13" class="difflineplus">+const gMsgId2 = &quot;4A947F73.5030709@example.com&quot;;</span>
<a href="#l64.14"></a><span id="l64.14"> var gMessages = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l64.15"></a><span id="l64.15"> var gMsgFile3 = do_get_file(&quot;../../../data/SpamAssassinYes&quot;);</span>
<a href="#l64.16"></a><span id="l64.16"> var gMsg3Id = &quot;bugmail7.m47LtAEf007543@mrapp51.mozilla.org&quot;;</span>
<a href="#l64.17"></a><span id="l64.17"> var gMsgFile4 = do_get_file(&quot;../../../data/bug460636&quot;);</span>
<a href="#l64.18"></a><span id="l64.18" class="difflineminus">-var gMsg4Id = &quot;foo.12345@bar&quot;;</span>
<a href="#l64.19"></a><span id="l64.19" class="difflineplus">+var gMsg4Id = &quot;foo.12345@example&quot;;</span>
<a href="#l64.20"></a><span id="l64.20"> </span>
<a href="#l64.21"></a><span id="l64.21"> var gFolder1;</span>
<a href="#l64.22"></a><span id="l64.22"> </span>
<a href="#l64.23"></a><span id="l64.23"> // Adds some messages directly to a mailbox (eg new mail)</span>
<a href="#l64.24"></a><span id="l64.24"> function addMessagesToServer(messages, mailbox, localFolder)</span>
<a href="#l64.25"></a><span id="l64.25"> {</span>
<a href="#l64.26"></a><span id="l64.26">   // For every message we have, we need to convert it to a file:/// URI</span>
<a href="#l64.27"></a><span id="l64.27">   messages.forEach(function (message)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l65.1"></a><span id="l65.1" class="difflineminus">--- a/mailnews/import/eudora/src/nsEudoraCompose.cpp</span>
<a href="#l65.2"></a><span id="l65.2" class="difflineplus">+++ b/mailnews/import/eudora/src/nsEudoraCompose.cpp</span>
<a href="#l65.3"></a><span id="l65.3" class="difflineat">@@ -48,21 +48,21 @@ static NS_DEFINE_CID(kMsgCompFieldsCID, </span>
<a href="#l65.4"></a><span id="l65.4"> #define kHungAbortCount 1000</span>
<a href="#l65.5"></a><span id="l65.5"> </span>
<a href="#l65.6"></a><span id="l65.6"> // Define maximum possible length for content type sanity check</span>
<a href="#l65.7"></a><span id="l65.7"> #define kContentTypeLengthSanityCheck 32</span>
<a href="#l65.8"></a><span id="l65.8"> </span>
<a href="#l65.9"></a><span id="l65.9"> </span>
<a href="#l65.10"></a><span id="l65.10"> #ifdef IMPORT_DEBUG</span>
<a href="#l65.11"></a><span id="l65.11"> static char *p_test_headers =</span>
<a href="#l65.12"></a><span id="l65.12" class="difflineminus">-&quot;Received: from netppl.fi (IDENT:monitor@get.freebsd.because.microsoftsucks.net [209.3.31.115])\n\</span>
<a href="#l65.13"></a><span id="l65.13" class="difflineminus">- by mail4.sirius.com (8.9.1/8.9.1) with SMTP id PAA27232;\n\</span>
<a href="#l65.14"></a><span id="l65.14" class="difflineplus">+&quot;Received: from netppl.invalid (IDENT:monitor@get.freebsd.because.microsoftsucks.invalid [209.3.31.115])\n\</span>
<a href="#l65.15"></a><span id="l65.15" class="difflineplus">+ by mail4.sirius.invalid (8.9.1/8.9.1) with SMTP id PAA27232;\n\</span>
<a href="#l65.16"></a><span id="l65.16">  Mon, 17 May 1999 15:27:43 -0700 (PDT)\n\</span>
<a href="#l65.17"></a><span id="l65.17" class="difflineminus">-Message-ID: &lt;ikGD3jRTsKklU.Ggm2HmE2A1Jsqd0p@netppl.fi&gt;\n\</span>
<a href="#l65.18"></a><span id="l65.18" class="difflineminus">-From: \&quot;adsales@qualityservice.com\&quot; &lt;adsales@qualityservice.com&gt;\n\</span>
<a href="#l65.19"></a><span id="l65.19" class="difflineplus">+Message-ID: &lt;ikGD3jRTsKklU.Ggm2HmE2A1Jsqd0p@netppl.invalid&gt;\n\</span>
<a href="#l65.20"></a><span id="l65.20" class="difflineplus">+From: \&quot;adsales@qualityservice.invalid\&quot; &lt;adsales@qualityservice.invalid&gt;\n\</span>
<a href="#l65.21"></a><span id="l65.21"> Subject: Re: Your College Diploma (36822)\n\</span>
<a href="#l65.22"></a><span id="l65.22"> Date: Mon, 17 May 1999 15:09:29 -0400 (EDT)\n\</span>
<a href="#l65.23"></a><span id="l65.23"> MIME-Version: 1.0\n\</span>
<a href="#l65.24"></a><span id="l65.24"> Content-Type: TEXT/PLAIN; charset=\&quot;US-ASCII\&quot;\n\</span>
<a href="#l65.25"></a><span id="l65.25"> Content-Transfer-Encoding: 7bit\n\</span>
<a href="#l65.26"></a><span id="l65.26"> X-UIDL: 19990517.152941\n\</span>
<a href="#l65.27"></a><span id="l65.27"> Status: RO&quot;;</span>
<a href="#l65.28"></a><span id="l65.28"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l66.1"></a><span id="l66.1" class="difflineminus">--- a/mailnews/import/oexpress/nsOE5File.cpp</span>
<a href="#l66.2"></a><span id="l66.2" class="difflineplus">+++ b/mailnews/import/oexpress/nsOE5File.cpp</span>
<a href="#l66.3"></a><span id="l66.3" class="difflineat">@@ -448,17 +448,17 @@ nsresult nsOE5File::ImportMailbox(uint32</span>
<a href="#l66.4"></a><span id="l66.4"> </span>
<a href="#l66.5"></a><span id="l66.5">       // Always end a msg with CRLF. This will make sure that OE msgs without body is</span>
<a href="#l66.6"></a><span id="l66.6">       // correctly recognized as msgs. Otherwise, we'll end up with the following in</span>
<a href="#l66.7"></a><span id="l66.7">       // the msg folder where the 2nd msg starts right after the headers of the 1st msg:</span>
<a href="#l66.8"></a><span id="l66.8">       //</span>
<a href="#l66.9"></a><span id="l66.9">       // From - Jan 1965 00:00:00     &lt;&lt;&lt;--- 1st msg starts here</span>
<a href="#l66.10"></a><span id="l66.10">       // Subject: Test msg</span>
<a href="#l66.11"></a><span id="l66.11">       // . . . (more headers)</span>
<a href="#l66.12"></a><span id="l66.12" class="difflineminus">-      // To: &lt;someone@netscape.com&gt;</span>
<a href="#l66.13"></a><span id="l66.13" class="difflineplus">+      // To: &lt;someone@example.com&gt;</span>
<a href="#l66.14"></a><span id="l66.14">       // From - Jan 1965 00:00:00     &lt;&lt;&lt;--- 2nd msg starts here</span>
<a href="#l66.15"></a><span id="l66.15">       // Subject: How are you</span>
<a href="#l66.16"></a><span id="l66.16">       // . . .(more headers)</span>
<a href="#l66.17"></a><span id="l66.17">       //</span>
<a href="#l66.18"></a><span id="l66.18">       // In this case, the 1st msg is not recognized as a msg (it's skipped)</span>
<a href="#l66.19"></a><span id="l66.19">       // when you open the folder.</span>
<a href="#l66.20"></a><span id="l66.20">       rv = outputStream-&gt;Write(&quot;\x0D\x0A&quot;, 2, &amp;written);</span>
<a href="#l66.21"></a><span id="l66.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l67.1"></a><span id="l67.1" class="difflineminus">--- a/mailnews/import/outlook/src/nsOutlookCompose.cpp</span>
<a href="#l67.2"></a><span id="l67.2" class="difflineplus">+++ b/mailnews/import/outlook/src/nsOutlookCompose.cpp</span>
<a href="#l67.3"></a><span id="l67.3" class="difflineat">@@ -47,21 +47,21 @@ static NS_DEFINE_CID(kMsgCompFieldsCID, </span>
<a href="#l67.4"></a><span id="l67.4"> </span>
<a href="#l67.5"></a><span id="l67.5"> // We need to do some calculations to set these numbers to something reasonable!</span>
<a href="#l67.6"></a><span id="l67.6"> // Unless of course, CreateAndSendMessage will NEVER EVER leave us in the lurch</span>
<a href="#l67.7"></a><span id="l67.7"> #define kHungCount 100000</span>
<a href="#l67.8"></a><span id="l67.8"> #define kHungAbortCount 1000</span>
<a href="#l67.9"></a><span id="l67.9"> </span>
<a href="#l67.10"></a><span id="l67.10"> #ifdef IMPORT_DEBUG</span>
<a href="#l67.11"></a><span id="l67.11"> static const char *p_test_headers =</span>
<a href="#l67.12"></a><span id="l67.12" class="difflineminus">-&quot;Received: from netppl.fi (IDENT:monitor@get.freebsd.because.microsoftsucks.net [209.3.31.115])\n\</span>
<a href="#l67.13"></a><span id="l67.13" class="difflineminus">- by mail4.sirius.com (8.9.1/8.9.1) with SMTP id PAA27232;\n\</span>
<a href="#l67.14"></a><span id="l67.14" class="difflineplus">+&quot;Received: from netppl.invalid (IDENT:monitor@get.freebsd.because.microsoftsucks.invalid [209.3.31.115])\n\</span>
<a href="#l67.15"></a><span id="l67.15" class="difflineplus">+ by mail4.sirius.invalid (8.9.1/8.9.1) with SMTP id PAA27232;\n\</span>
<a href="#l67.16"></a><span id="l67.16">  Mon, 17 May 1999 15:27:43 -0700 (PDT)\n\</span>
<a href="#l67.17"></a><span id="l67.17" class="difflineminus">-Message-ID: &lt;ikGD3jRTsKklU.Ggm2HmE2A1Jsqd0p@netppl.fi&gt;\n\</span>
<a href="#l67.18"></a><span id="l67.18" class="difflineminus">-From: \&quot;adsales@qualityservice.com\&quot; &lt;adsales@qualityservice.com&gt;\n\</span>
<a href="#l67.19"></a><span id="l67.19" class="difflineplus">+Message-ID: &lt;ikGD3jRTsKklU.Ggm2HmE2A1Jsqd0p@netppl.invalid&gt;\n\</span>
<a href="#l67.20"></a><span id="l67.20" class="difflineplus">+From: \&quot;adsales@qualityservice.invalid\&quot; &lt;adsales@qualityservice.invalid&gt;\n\</span>
<a href="#l67.21"></a><span id="l67.21"> Subject: Re: Your College Diploma (36822)\n\</span>
<a href="#l67.22"></a><span id="l67.22"> Date: Mon, 17 May 1999 15:09:29 -0400 (EDT)\n\</span>
<a href="#l67.23"></a><span id="l67.23"> MIME-Version: 1.0\n\</span>
<a href="#l67.24"></a><span id="l67.24"> Content-Type: TEXT/PLAIN; charset=\&quot;US-ASCII\&quot;\n\</span>
<a href="#l67.25"></a><span id="l67.25"> Content-Transfer-Encoding: 7bit\n\</span>
<a href="#l67.26"></a><span id="l67.26"> X-UIDL: 19990517.152941\n\</span>
<a href="#l67.27"></a><span id="l67.27"> Status: RO&quot;;</span>
<a href="#l67.28"></a><span id="l67.28"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l68.1"></a><span id="l68.1">index 545d6470daa4afb357602a857c5b241e8a6d43c2..b1b278658ab7d13609200673646fc9d3e90672a2</span>
<a href="#l68.2"></a><span id="l68.2">GIT binary patch
literal 698
zc$|%rUrPc(6vfYT(03SmZ`Fh{*c8*3pe)jedXaK97Thh|)#}SvzqxJ?4jOTpKX&gt;lA
z_neuz-(Rsh`cS61oK~7@p+c!%mFr9gYA8~j)e*@x;XEOl&gt;&amp;2o=m73`g)UjbYYHMG6
zigg9Pz@9)()g{yCF3Bt_jH@gTqGJun%E)qfpL%2GxrTaVZc{l0y#QY@W?-Cp&gt;@v((
zNI6N3-DzZN2}f-wOQ`0O^TH5!a3^&gt;rs3cHxt_v!3b*l$cb;Nm7Cx&amp;k^o&gt;A5^##7#}
zVG4Ft4i)t5^&gt;bnqyNmb6+-1$asiUuZU8ACJD(V~7G}gbXh1&gt;&amp;dq#F=J&gt;xFekZ2yU}
idfklK*MDb?@WTIztYcQ(cg`*`Roi)fyQlV#{`mp(Idc90</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l69.1"></a><span id="l69.1">index 7ff7a664d9143fc911045e1e9bbb4668ddd2cd10..c23cf25d175026f7901572527c79bde05aa99868</span>
<a href="#l69.2"></a><span id="l69.2">GIT binary patch
literal 4454
zc$~dh?~l?z5S`B^{tu1c?+3YPVuE)^1S3X;0EWabO%LkXSXx3k?#@46eLHP)?9$op
ziZM-E=+3&lt;Nc6MfW;P&lt;aCUC{%rD5ZdQ6w`(ZN+_p{-p~u`&amp;?%kc8DJ!%1&gt;P?)n$azf
z-qDu6(Fv?xvCS1-(sO!7UHSz30#^jfn0oM3zIX84RyIL(b&amp;b)GKErDTuK?d3X^l^c
zYf4{nzXZS1_8m4Ut^}45Y`SzN;+TAI86m^S0(RwGLz-1wI%}WiG@=Qfiu+u&lt;E|}Gh
zW^xY^nI4T{G38j75pSNUnpuK5p3;34bA`XgJ%@FH_v-DABat93N=-Aqtl|rBl!aT=
zb%sOVHXfxaL7ddA9&lt;7n?G;-&lt;wGTRtxH$b;BT;Q$AQv2CgZGjBiu$rc|_nB2Ynyh5T
zxgT@B+h_V3)v5F9zB0!I7CG0_J3Lclft;;FsJ(&amp;JgTd8|VPCtlvQ@_WL{s;)t&gt;F#|
zPI#YNR#~;?s3%-Yy3)dPMg6etnO5#&amp;L)&gt;GmSK+h{wO_F3cbIi{WLZ@oqY?J}t)rTK
zdtHT$WXp{W&gt;{h%7hVadK_Zb66oi+FTec7^un&gt;pixXp2X}JBEEXGg+U!+Up?1_w&gt;lD
zY{Rn6FNR&amp;rd9w7*McrG@NLLnF=LbIZf8f&amp;q)mNXKE*fjkK=ah~xuBccKH_b}=Whs{
z+GE7sfqeEit)nZFsbIn}%q!11dZw6t%vEXQcf)aIAK-*obN(O4uH%^O`=d%}#2u53
z?Ip7{`&lt;dudti#N)iz}dhi?=&gt;qTr&lt;9`!oQ2N`L^-+c5!xpna!n(&gt;!7&gt;QIiwy=kLj^J
zoDZ6;#J`7=d}R)G))YWZIhWfqq+iYdef9fF=ajHy_7UQ83#$yCKk&lt;C}g=E(;*J&gt;pI
zT3Ic+o_2Iu*&lt;f!U@1Zi5yn@BSE}_@X^&lt;P!7%q8nn``(%&gt;B;?uuU&amp;TJ`wn|IDoAJt&amp;
c71FHqu%=8u+b;2MdO}~s`k#(7hyObM0Mez&gt;ZU6uP</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l70.1"></a><span id="l70.1">index e9b5fc8196d4209d1c93c099259f5b803f076392..65872dcdbe105b231b7ce78878629fc713103418</span>
<a href="#l70.2"></a><span id="l70.2">GIT binary patch
literal 2728
zc$}qHO;6iE5Pj!L{SQ{}g+Qd9Qa(hg!l4k6AS5mpBmpeNj+GE-`s3TanYD#&gt;*&lt;IV9
zmHf3c@4cCw+4aA_103Qvax9SG8FQ?#MusH{e8(5;VFx|l6V4Qv^81Xl1s-&amp;EgD2eM
zE3Lk%%^?o(8J{q~FWRp;ZfQBkF+Ih1L(iwmCaK22nN4v{ubf^9-?k|EBwS&lt;M@OnUg
z(e_B21xKMiB~f;RI4&lt;9bA{3mN($2)1Vp4J0tV3Mm0++lCch4GqWsRe`+~*t&lt;jA${|
zT$_yhBNfaS=5U8slXJl@d0o&lt;4zRTBV%|yn$h#EhBSj81_#G+l+ZHBkLO+2D1W1cc9
z-bORM=jF2f!)zm}T@gLTu+R1DJ1n(deAT9`u$8Lut$mlMn$f~aCbW&gt;8FSQF}tbO9y
zytZ$cV@SI-Q5Rg_ZDWlLtN2f=-n2PGSYh@H=H-D_1wH@p{@Pt}9oJU3Bt$d)V(V!}
z4=ek@`CF~Rl)KK1V^!^UvF&lt;r~S09JD!ul?0QEHE*8hv}kcIA9TcNYzABz3p{q=nRI
zsr4haQ+_cT%xcB;n||wp7T;4A8mVNWOPAZ8afY&gt;OX=2#-FuZ!kcCU={g;u-Sb^P_(
zd$Uiuez7Pd%eiJX&lt;=??lPlyqHWu;&amp;Aeb#Wwy3w^k^qulK$3{C`ax-sLEq*^2y=E_~
z6C&gt;3&gt;o*Z`_PSeL=XVrb;&gt;#(-WZO;5NqMLl?)($x4vsvqS#@zF&gt;8*=@xxZC1y@jr+U
B!P@`;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l71.1"></a><span id="l71.1" class="difflineminus">--- a/mailnews/import/test/unit/resources/addressbook.json</span>
<a href="#l71.2"></a><span id="l71.2" class="difflineplus">+++ b/mailnews/import/test/unit/resources/addressbook.json</span>
<a href="#l71.3"></a><span id="l71.3" class="difflineat">@@ -76,23 +76,23 @@</span>
<a href="#l71.4"></a><span id="l71.4">     } </span>
<a href="#l71.5"></a><span id="l71.5">   ],</span>
<a href="#l71.6"></a><span id="l71.6">   &quot;vcard_import&quot; :</span>
<a href="#l71.7"></a><span id="l71.7">   [</span>
<a href="#l71.8"></a><span id="l71.8">     {</span>
<a href="#l71.9"></a><span id="l71.9">       &quot;DisplayName&quot;      : &quot;John Doe&quot;,</span>
<a href="#l71.10"></a><span id="l71.10">       &quot;FirstName&quot;        : &quot;John&quot;,</span>
<a href="#l71.11"></a><span id="l71.11">       &quot;LastName&quot;         : &quot;Doe&quot;,</span>
<a href="#l71.12"></a><span id="l71.12" class="difflineminus">-      &quot;PrimaryEmail&quot;     : &quot;john.doe@genericemail.com&quot;</span>
<a href="#l71.13"></a><span id="l71.13" class="difflineplus">+      &quot;PrimaryEmail&quot;     : &quot;john.doe@genericemail.invalid&quot;</span>
<a href="#l71.14"></a><span id="l71.14">     },</span>
<a href="#l71.15"></a><span id="l71.15">     {</span>
<a href="#l71.16"></a><span id="l71.16">       &quot;DisplayName&quot;      : &quot;Jane Doe&quot;,</span>
<a href="#l71.17"></a><span id="l71.17">       &quot;FirstName&quot;        : &quot;Jane&quot;,</span>
<a href="#l71.18"></a><span id="l71.18">       &quot;LastName&quot;         : &quot;Doe&quot;,</span>
<a href="#l71.19"></a><span id="l71.19" class="difflineminus">-      &quot;PrimaryEmail&quot;     : &quot;jane.doe@genericemail.com&quot;</span>
<a href="#l71.20"></a><span id="l71.20" class="difflineplus">+      &quot;PrimaryEmail&quot;     : &quot;jane.doe@genericemail.invalid&quot;</span>
<a href="#l71.21"></a><span id="l71.21">     }</span>
<a href="#l71.22"></a><span id="l71.22">   ],</span>
<a href="#l71.23"></a><span id="l71.23">   &quot;csv_import&quot; :</span>
<a href="#l71.24"></a><span id="l71.24">   [</span>
<a href="#l71.25"></a><span id="l71.25">     {</span>
<a href="#l71.26"></a><span id="l71.26">       &quot;DisplayName&quot;      : &quot;John Doe&quot;,</span>
<a href="#l71.27"></a><span id="l71.27">       &quot;FirstName&quot;        : &quot;John&quot;,</span>
<a href="#l71.28"></a><span id="l71.28">       &quot;LastName&quot;         : &quot;Doe&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l72.1"></a><span id="l72.1" class="difflineminus">--- a/mailnews/import/test/unit/resources/basic_vcard_addressbook.vcf</span>
<a href="#l72.2"></a><span id="l72.2" class="difflineplus">+++ b/mailnews/import/test/unit/resources/basic_vcard_addressbook.vcf</span>
<a href="#l72.3"></a><span id="l72.3" class="difflineat">@@ -1,12 +1,12 @@</span>
<a href="#l72.4"></a><span id="l72.4"> BEGIN:VCARD</span>
<a href="#l72.5"></a><span id="l72.5"> VERSION:2.1</span>
<a href="#l72.6"></a><span id="l72.6"> FN:John Doe</span>
<a href="#l72.7"></a><span id="l72.7"> N:Doe;John;;;</span>
<a href="#l72.8"></a><span id="l72.8" class="difflineminus">-EMAIL;TYPE=INTERNET:john.doe@genericemail.com</span>
<a href="#l72.9"></a><span id="l72.9" class="difflineplus">+EMAIL;TYPE=INTERNET:john.doe@genericemail.invalid</span>
<a href="#l72.10"></a><span id="l72.10"> END:VCARD</span>
<a href="#l72.11"></a><span id="l72.11"> BEGIN:VCARD</span>
<a href="#l72.12"></a><span id="l72.12"> VERSION:2.1</span>
<a href="#l72.13"></a><span id="l72.13"> FN:Jane Doe</span>
<a href="#l72.14"></a><span id="l72.14"> N:Doe;Jane;;;</span>
<a href="#l72.15"></a><span id="l72.15" class="difflineminus">-EMAIL;TYPE=INTERNET:jane.doe@genericemail.com</span>
<a href="#l72.16"></a><span id="l72.16" class="difflineplus">+EMAIL;TYPE=INTERNET:jane.doe@genericemail.invalid</span>
<a href="#l72.17"></a><span id="l72.17"> END:VCARD</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l73.1"></a><span id="l73.1" class="difflineminus">--- a/mailnews/import/test/unit/resources/emptylines_vcard_addressbook.vcf</span>
<a href="#l73.2"></a><span id="l73.2" class="difflineplus">+++ b/mailnews/import/test/unit/resources/emptylines_vcard_addressbook.vcf</span>
<a href="#l73.3"></a><span id="l73.3" class="difflineat">@@ -1,18 +1,18 @@</span>
<a href="#l73.4"></a><span id="l73.4"> </span>
<a href="#l73.5"></a><span id="l73.5"> </span>
<a href="#l73.6"></a><span id="l73.6"> BEGIN:VCARD</span>
<a href="#l73.7"></a><span id="l73.7"> VERSION:2.1</span>
<a href="#l73.8"></a><span id="l73.8"> FN:John Doe</span>
<a href="#l73.9"></a><span id="l73.9"> N:Doe;John;;;</span>
<a href="#l73.10"></a><span id="l73.10" class="difflineminus">-EMAIL;TYPE=INTERNET:john.doe@genericemail.com</span>
<a href="#l73.11"></a><span id="l73.11" class="difflineplus">+EMAIL;TYPE=INTERNET:john.doe@genericemail.invalid</span>
<a href="#l73.12"></a><span id="l73.12"> END:VCARD</span>
<a href="#l73.13"></a><span id="l73.13"> </span>
<a href="#l73.14"></a><span id="l73.14"> </span>
<a href="#l73.15"></a><span id="l73.15"> BEGIN:VCARD</span>
<a href="#l73.16"></a><span id="l73.16"> VERSION:2.1</span>
<a href="#l73.17"></a><span id="l73.17"> FN:Jane Doe</span>
<a href="#l73.18"></a><span id="l73.18"> N:Doe;Jane;;;</span>
<a href="#l73.19"></a><span id="l73.19" class="difflineminus">-EMAIL;TYPE=INTERNET:jane.doe@genericemail.com</span>
<a href="#l73.20"></a><span id="l73.20" class="difflineplus">+EMAIL;TYPE=INTERNET:jane.doe@genericemail.invalid</span>
<a href="#l73.21"></a><span id="l73.21"> END:VCARD</span>
<a href="#l73.22"></a><span id="l73.22"> </span>
<a href="#l73.23"></a><span id="l73.23"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l74.1"></a><span id="l74.1" class="difflineminus">--- a/mailnews/import/test/unit/test_winmail.js</span>
<a href="#l74.2"></a><span id="l74.2" class="difflineplus">+++ b/mailnews/import/test/unit/test_winmail.js</span>
<a href="#l74.3"></a><span id="l74.3" class="difflineat">@@ -52,17 +52,17 @@ let expectedNewsMozillaOrgAccount = {</span>
<a href="#l74.4"></a><span id="l74.4">     organization: '',</span>
<a href="#l74.5"></a><span id="l74.5">     email: 'mozillanews@invalid.invalid',</span>
<a href="#l74.6"></a><span id="l74.6">   },</span>
<a href="#l74.7"></a><span id="l74.7"> };</span>
<a href="#l74.8"></a><span id="l74.8"> </span>
<a href="#l74.9"></a><span id="l74.9"> let expectedMicrosoftCommunitiesAccount = {</span>
<a href="#l74.10"></a><span id="l74.10">   incomingServer: {</span>
<a href="#l74.11"></a><span id="l74.11">     type: 'nntp',</span>
<a href="#l74.12"></a><span id="l74.12" class="difflineminus">-    hostName: 'testmsnews.microsoft.com',</span>
<a href="#l74.13"></a><span id="l74.13" class="difflineplus">+    hostName: 'testmsnews.microsoft.invalid',</span>
<a href="#l74.14"></a><span id="l74.14">     prettyName: 'Microsoft Communities Test',</span>
<a href="#l74.15"></a><span id="l74.15">     port: 119,</span>
<a href="#l74.16"></a><span id="l74.16">     socketType: 0,</span>
<a href="#l74.17"></a><span id="l74.17">     isSecure: false,</span>
<a href="#l74.18"></a><span id="l74.18">     authMethod: Ci.nsMsgAuthMethod.passwordCleartext,</span>
<a href="#l74.19"></a><span id="l74.19">     doBiff: false,</span>
<a href="#l74.20"></a><span id="l74.20">     biffMinutes: 10, // default value</span>
<a href="#l74.21"></a><span id="l74.21">   },</span>
<a href="#l74.22"></a><span id="l74.22" class="difflineat">@@ -70,55 +70,55 @@ let expectedMicrosoftCommunitiesAccount </span>
<a href="#l74.23"></a><span id="l74.23">     fullName: '',</span>
<a href="#l74.24"></a><span id="l74.24">     organization: '',</span>
<a href="#l74.25"></a><span id="l74.25">   },</span>
<a href="#l74.26"></a><span id="l74.26"> };</span>
<a href="#l74.27"></a><span id="l74.27"> </span>
<a href="#l74.28"></a><span id="l74.28"> let expectedDonHallNntpAccount = {</span>
<a href="#l74.29"></a><span id="l74.29">   incomingServer: {</span>
<a href="#l74.30"></a><span id="l74.30">     type: 'nntp',</span>
<a href="#l74.31"></a><span id="l74.31" class="difflineminus">-    hostName: 'news.wingtiptoys.com',</span>
<a href="#l74.32"></a><span id="l74.32" class="difflineplus">+    hostName: 'news.wingtiptoys.invalid',</span>
<a href="#l74.33"></a><span id="l74.33">     prettyName: 'donhallnntp',</span>
<a href="#l74.34"></a><span id="l74.34">     port: 563,</span>
<a href="#l74.35"></a><span id="l74.35">     username: 'don',</span>
<a href="#l74.36"></a><span id="l74.36">     isSecure: false,</span>
<a href="#l74.37"></a><span id="l74.37">     authMethod: Ci.nsMsgAuthMethod.secure,</span>
<a href="#l74.38"></a><span id="l74.38">     socketType: 0,</span>
<a href="#l74.39"></a><span id="l74.39">     doBiff: false,</span>
<a href="#l74.40"></a><span id="l74.40">     biffMinutes: 10, // default value</span>
<a href="#l74.41"></a><span id="l74.41">   },</span>
<a href="#l74.42"></a><span id="l74.42">   identity: {</span>
<a href="#l74.43"></a><span id="l74.43">     fullName: 'Don Hall',</span>
<a href="#l74.44"></a><span id="l74.44">     organization: 'Wingtip Toys',</span>
<a href="#l74.45"></a><span id="l74.45" class="difflineminus">-    email: 'don@wingtiptoys.com',</span>
<a href="#l74.46"></a><span id="l74.46" class="difflineminus">-    replyTo: 'don@wingtiptoys.com',</span>
<a href="#l74.47"></a><span id="l74.47" class="difflineplus">+    email: 'don@wingtiptoys.invalid',</span>
<a href="#l74.48"></a><span id="l74.48" class="difflineplus">+    replyTo: 'don@wingtiptoys.invalid',</span>
<a href="#l74.49"></a><span id="l74.49">   },</span>
<a href="#l74.50"></a><span id="l74.50"> };</span>
<a href="#l74.51"></a><span id="l74.51"> </span>
<a href="#l74.52"></a><span id="l74.52"> let expectedDonHallImapAccount = {</span>
<a href="#l74.53"></a><span id="l74.53">   incomingServer: {</span>
<a href="#l74.54"></a><span id="l74.54">     type: 'imap',</span>
<a href="#l74.55"></a><span id="l74.55" class="difflineminus">-    hostName: 'mail.wingtiptoys.com',</span>
<a href="#l74.56"></a><span id="l74.56" class="difflineplus">+    hostName: 'mail.wingtiptoys.invalid',</span>
<a href="#l74.57"></a><span id="l74.57">     prettyName: 'donhallimap',</span>
<a href="#l74.58"></a><span id="l74.58">     port: 993,</span>
<a href="#l74.59"></a><span id="l74.59">     isSecure: true,</span>
<a href="#l74.60"></a><span id="l74.60">     doBiff: true,</span>
<a href="#l74.61"></a><span id="l74.61">     biffMinutes: 2,</span>
<a href="#l74.62"></a><span id="l74.62">     username: 'don',</span>
<a href="#l74.63"></a><span id="l74.63">     authMethod: Ci.nsMsgAuthMethod.secure,</span>
<a href="#l74.64"></a><span id="l74.64">     socketType: 0,</span>
<a href="#l74.65"></a><span id="l74.65">   },</span>
<a href="#l74.66"></a><span id="l74.66">   identity: {</span>
<a href="#l74.67"></a><span id="l74.67">     fullName: 'Don Hall',</span>
<a href="#l74.68"></a><span id="l74.68">     organization: 'Wingtip Toys',</span>
<a href="#l74.69"></a><span id="l74.69" class="difflineminus">-    email: 'don@wingtiptoys.com',</span>
<a href="#l74.70"></a><span id="l74.70" class="difflineminus">-    replyTo: 'don@wingtiptoys.com',</span>
<a href="#l74.71"></a><span id="l74.71" class="difflineplus">+    email: 'don@wingtiptoys.invalid',</span>
<a href="#l74.72"></a><span id="l74.72" class="difflineplus">+    replyTo: 'don@wingtiptoys.invalid',</span>
<a href="#l74.73"></a><span id="l74.73">   },</span>
<a href="#l74.74"></a><span id="l74.74">   smtpServer: {</span>
<a href="#l74.75"></a><span id="l74.75" class="difflineminus">-    hostname: 'smtp.wingtiptoys.com',</span>
<a href="#l74.76"></a><span id="l74.76" class="difflineplus">+    hostname: 'smtp.wingtiptoys.invalid',</span>
<a href="#l74.77"></a><span id="l74.77">     username: 'don',</span>
<a href="#l74.78"></a><span id="l74.78">     port: 25,</span>
<a href="#l74.79"></a><span id="l74.79">     socketType: Ci.nsMsgSocketType.SSL,</span>
<a href="#l74.80"></a><span id="l74.80">     authMethod: Ci.nsMsgAuthMethod.secure,</span>
<a href="#l74.81"></a><span id="l74.81">   }</span>
<a href="#l74.82"></a><span id="l74.82"> };</span>
<a href="#l74.83"></a><span id="l74.83"> </span>
<a href="#l74.84"></a><span id="l74.84"> let expectedAccounts = [expectedPop3TestTestAccount,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l75.1"></a><span id="l75.1" class="difflineminus">--- a/mailnews/local/src/nsPop3Protocol.cpp</span>
<a href="#l75.2"></a><span id="l75.2" class="difflineplus">+++ b/mailnews/local/src/nsPop3Protocol.cpp</span>
<a href="#l75.3"></a><span id="l75.3" class="difflineat">@@ -2562,18 +2562,18 @@ int32_t nsPop3Protocol::HandleNoUidListA</span>
<a href="#l75.4"></a><span id="l75.4">  *  Some mail servers support a similar command:</span>
<a href="#l75.5"></a><span id="l75.5">  *</span>
<a href="#l75.6"></a><span id="l75.6">  *    XTND XLST Message-Id</span>
<a href="#l75.7"></a><span id="l75.7">  *</span>
<a href="#l75.8"></a><span id="l75.8">  *  Here is a sample transaction from a QUALCOMM server</span>
<a href="#l75.9"></a><span id="l75.9"> </span>
<a href="#l75.10"></a><span id="l75.10">  &gt;&gt;XTND XLST Message-Id</span>
<a href="#l75.11"></a><span id="l75.11">  &lt;&lt;+OK xlst command accepted; headers coming.</span>
<a href="#l75.12"></a><span id="l75.12" class="difflineminus">- &lt;&lt;1 Message-ID: &lt;3117E4DC.2699@netscape.com&gt;</span>
<a href="#l75.13"></a><span id="l75.13" class="difflineminus">- &lt;&lt;2 Message-Id: &lt;199602062335.PAA19215@lemon.mcom.com&gt;</span>
<a href="#l75.14"></a><span id="l75.14" class="difflineplus">+ &lt;&lt;1 Message-ID: &lt;3117E4DC.2699@netscape.invalid&gt;</span>
<a href="#l75.15"></a><span id="l75.15" class="difflineplus">+ &lt;&lt;2 Message-Id: &lt;199602062335.PAA19215@lemon.example.com&gt;</span>
<a href="#l75.16"></a><span id="l75.16"> </span>
<a href="#l75.17"></a><span id="l75.17">  * This function will send the xtnd command and put us into the</span>
<a href="#l75.18"></a><span id="l75.18">  * POP3_GET_XTND_XLST_MSGID state</span>
<a href="#l75.19"></a><span id="l75.19">  *</span>
<a href="#l75.20"></a><span id="l75.20"> */</span>
<a href="#l75.21"></a><span id="l75.21"> int32_t nsPop3Protocol::SendXtndXlstMsgid()</span>
<a href="#l75.22"></a><span id="l75.22"> {</span>
<a href="#l75.23"></a><span id="l75.23">   if (TestCapFlag(POP3_HAS_XTND_XLST | POP3_XTND_XLST_UNDEFINED))</span>
<a href="#l75.24"></a><span id="l75.24" class="difflineat">@@ -2635,17 +2635,17 @@ nsPop3Protocol::GetXtndXlstMsgid(nsIInpu</span>
<a href="#l75.25"></a><span id="l75.25">     PR_Free(line);</span>
<a href="#l75.26"></a><span id="l75.26">     return ln;</span>
<a href="#l75.27"></a><span id="l75.27">   }</span>
<a href="#l75.28"></a><span id="l75.28"> </span>
<a href="#l75.29"></a><span id="l75.29">   PR_LOG(POP3LOGMODULE, PR_LOG_ALWAYS,(&quot;RECV: %s&quot;, line));</span>
<a href="#l75.30"></a><span id="l75.30"> </span>
<a href="#l75.31"></a><span id="l75.31">   /* parse the line returned from the list command</span>
<a href="#l75.32"></a><span id="l75.32">   * it looks like</span>
<a href="#l75.33"></a><span id="l75.33" class="difflineminus">-  * 1 Message-ID: &lt;3117E4DC.2699@netscape.com&gt;</span>
<a href="#l75.34"></a><span id="l75.34" class="difflineplus">+  * 1 Message-ID: &lt;3117E4DC.2699@example.com&gt;</span>
<a href="#l75.35"></a><span id="l75.35">   *</span>
<a href="#l75.36"></a><span id="l75.36">   * list data is terminated by a &quot;.CRLF&quot; line</span>
<a href="#l75.37"></a><span id="l75.37">   */</span>
<a href="#l75.38"></a><span id="l75.38">   if (!PL_strcmp(line, &quot;.&quot;))</span>
<a href="#l75.39"></a><span id="l75.39">   {</span>
<a href="#l75.40"></a><span id="l75.40">     // limit the list if fewer entries than given in STAT response</span>
<a href="#l75.41"></a><span id="l75.41">     if(m_listpos &lt; m_pop3ConData-&gt;number_of_messages)</span>
<a href="#l75.42"></a><span id="l75.42">       m_pop3ConData-&gt;number_of_messages = m_listpos;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l76.1"></a><span id="l76.1" class="difflineminus">--- a/mailnews/local/test/unit/data/movemailspool</span>
<a href="#l76.2"></a><span id="l76.2" class="difflineplus">+++ b/mailnews/local/test/unit/data/movemailspool</span>
<a href="#l76.3"></a><span id="l76.3" class="difflineat">@@ -129,26 +129,26 @@ X-Bugzilla-Severity: enhancement</span>
<a href="#l76.4"></a><span id="l76.4"> X-Bugzilla-Who: bugmail@example.org</span>
<a href="#l76.5"></a><span id="l76.5"> X-Bugzilla-Status: NEW</span>
<a href="#l76.6"></a><span id="l76.6"> X-Bugzilla-Priority: --</span>
<a href="#l76.7"></a><span id="l76.7"> X-Bugzilla-Assigned-To: nobody@mozilla.org</span>
<a href="#l76.8"></a><span id="l76.8"> X-Bugzilla-Target-Milestone: ---</span>
<a href="#l76.9"></a><span id="l76.9"> X-Bugzilla-Changed-Fields: Blocks</span>
<a href="#l76.10"></a><span id="l76.10"> In-Reply-To: &lt;bug-397009-254728@https.bugzilla.mozilla.org/&gt;</span>
<a href="#l76.11"></a><span id="l76.11"> References: &lt;bug-397009-254728@https.bugzilla.mozilla.org/&gt;</span>
<a href="#l76.12"></a><span id="l76.12" class="difflineminus">-	&lt;4DC2493C.4060403@gmx.com&gt;</span>
<a href="#l76.13"></a><span id="l76.13" class="difflineminus">-	&lt;BANLkTin2w8LJxYGHV3_5NpFbsiBhrP96XA@mail.gmail.com&gt;</span>
<a href="#l76.14"></a><span id="l76.14" class="difflineplus">+	&lt;4DC2493C.4060403@gmx.invalid&gt;</span>
<a href="#l76.15"></a><span id="l76.15" class="difflineplus">+	&lt;BANLkTin2w8LJxYGHV3_5NpFbsiBhrP96XA@mail.gmail.invalid&gt;</span>
<a href="#l76.16"></a><span id="l76.16"> 	&lt;175221688.20110506234025@my_localhost&gt;</span>
<a href="#l76.17"></a><span id="l76.17" class="difflineminus">-	&lt;201105072315.25120@thufir.ingo-kloecker.de&gt;</span>
<a href="#l76.18"></a><span id="l76.18" class="difflineminus">-	&lt;BANLkTinacQCd+mZ7fL1THLK55X2+u9g5-w@mail.gmail.com&gt;</span>
<a href="#l76.19"></a><span id="l76.19" class="difflineplus">+	&lt;201105072315.25120@thufir.ingo-kloecker.invalid&gt;</span>
<a href="#l76.20"></a><span id="l76.20" class="difflineplus">+	&lt;BANLkTinacQCd+mZ7fL1THLK55X2+u9g5-w@mail.gmail.invalid&gt;</span>
<a href="#l76.21"></a><span id="l76.21"> 	&lt;05433510.20110507224940@my_localhost&gt;</span>
<a href="#l76.22"></a><span id="l76.22" class="difflineminus">-	&lt;4DC5C015.7050800@sixdemonbag.org&gt;</span>
<a href="#l76.23"></a><span id="l76.23" class="difflineminus">-	&lt;BANLkTinv7NvPG9gE1Fha+X+6ZkHzdXdRdg@mail.gmail.com&gt;</span>
<a href="#l76.24"></a><span id="l76.24" class="difflineminus">-	&lt;BANLkTi=6zDTsYymc+bUTwPOM2AohJD2wfA@mail.gmail.com&gt;</span>
<a href="#l76.25"></a><span id="l76.25" class="difflineminus">-Reply-To: FOO &lt;bar@foo.com&gt;</span>
<a href="#l76.26"></a><span id="l76.26" class="difflineplus">+	&lt;4DC5C015.7050800@sixdemonbag.invalid&gt;</span>
<a href="#l76.27"></a><span id="l76.27" class="difflineplus">+	&lt;BANLkTinv7NvPG9gE1Fha+X+6ZkHzdXdRdg@mail.gmail.invalid&gt;</span>
<a href="#l76.28"></a><span id="l76.28" class="difflineplus">+	&lt;BANLkTi=6zDTsYymc+bUTwPOM2AohJD2wfA@mail.gmail.invalid&gt;</span>
<a href="#l76.29"></a><span id="l76.29" class="difflineplus">+Reply-To: FOO &lt;bar@foo.invalid&gt;</span>
<a href="#l76.30"></a><span id="l76.30"> List-Id: Help and discussion among users of GnuPG &lt;gnupg-users.gnupg.org&gt;</span>
<a href="#l76.31"></a><span id="l76.31"> Content-Type: text/plain; charset=&quot;UTF-8&quot;</span>
<a href="#l76.32"></a><span id="l76.32"> MIME-Version: 1.0</span>
<a href="#l76.33"></a><span id="l76.33"> </span>
<a href="#l76.34"></a><span id="l76.34"> Do not reply to this email.  You can add comments to this bug at</span>
<a href="#l76.35"></a><span id="l76.35"> https://bugzilla.mozilla.org/show_bug.cgi?id=397009</span>
<a href="#l76.36"></a><span id="l76.36"> </span>
<a href="#l76.37"></a><span id="l76.37"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l77.1"></a><span id="l77.1" class="difflineminus">--- a/mailnews/local/test/unit/test_msgIDParsing.js</span>
<a href="#l77.2"></a><span id="l77.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_msgIDParsing.js</span>
<a href="#l77.3"></a><span id="l77.3" class="difflineat">@@ -8,24 +8,24 @@ var gMessenger = Cc[&quot;@mozilla.org/messen</span>
<a href="#l77.4"></a><span id="l77.4">                    createInstance(Ci.nsIMessenger);</span>
<a href="#l77.5"></a><span id="l77.5"> </span>
<a href="#l77.6"></a><span id="l77.6"> loadLocalMailAccount();</span>
<a href="#l77.7"></a><span id="l77.7"> </span>
<a href="#l77.8"></a><span id="l77.8"> let acctMgr = Cc[&quot;@mozilla.org/messenger/account-manager;1&quot;]</span>
<a href="#l77.9"></a><span id="l77.9">                .getService(Ci.nsIMsgAccountManager);</span>
<a href="#l77.10"></a><span id="l77.10"> let localAccount = acctMgr.FindAccountForServer(gLocalIncomingServer);</span>
<a href="#l77.11"></a><span id="l77.11"> let identity = acctMgr.createIdentity();</span>
<a href="#l77.12"></a><span id="l77.12" class="difflineminus">-identity.email = &quot;bob@t2.exemple.net&quot;;</span>
<a href="#l77.13"></a><span id="l77.13" class="difflineplus">+identity.email = &quot;bob@t2.example.net&quot;;</span>
<a href="#l77.14"></a><span id="l77.14"> localAccount.addIdentity(identity);</span>
<a href="#l77.15"></a><span id="l77.15"> localAccount.defaultIdentity = identity;</span>
<a href="#l77.16"></a><span id="l77.16"> </span>
<a href="#l77.17"></a><span id="l77.17"> function run_test()</span>
<a href="#l77.18"></a><span id="l77.18"> {</span>
<a href="#l77.19"></a><span id="l77.19">   var headers = </span>
<a href="#l77.20"></a><span id="l77.20">     &quot;from: alice@t1.example.com\r\n&quot; + </span>
<a href="#l77.21"></a><span id="l77.21" class="difflineminus">-    &quot;to: bob@t2.exemple.net\r\n&quot; + </span>
<a href="#l77.22"></a><span id="l77.22" class="difflineplus">+    &quot;to: bob@t2.example.net\r\n&quot; + </span>
<a href="#l77.23"></a><span id="l77.23">     &quot;message-id:   \r\n   &lt;abcmessageid&gt;\r\n&quot;;</span>
<a href="#l77.24"></a><span id="l77.24"> </span>
<a href="#l77.25"></a><span id="l77.25">   let localFolder = gLocalInboxFolder.QueryInterface(Ci.nsIMsgLocalMailFolder);</span>
<a href="#l77.26"></a><span id="l77.26">   gLocalInboxFolder.addMessage(&quot;From \r\n&quot;+ headers + &quot;\r\nhello\r\n&quot;);</span>
<a href="#l77.27"></a><span id="l77.27">   var msgHdr = gLocalInboxFolder.GetMessageHeader(0);</span>
<a href="#l77.28"></a><span id="l77.28">   do_check_eq(msgHdr.messageId, &quot;abcmessageid&quot;);</span>
<a href="#l77.29"></a><span id="l77.29"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l78.1"></a><span id="l78.1" class="difflineminus">--- a/mailnews/mime/test/unit/test_EncodeMimePartIIStr_UTF8.js</span>
<a href="#l78.2"></a><span id="l78.2" class="difflineplus">+++ b/mailnews/mime/test/unit/test_EncodeMimePartIIStr_UTF8.js</span>
<a href="#l78.3"></a><span id="l78.3" class="difflineat">@@ -11,17 +11,17 @@ function run_test() {</span>
<a href="#l78.4"></a><span id="l78.4">   var i;</span>
<a href="#l78.5"></a><span id="l78.5"> </span>
<a href="#l78.6"></a><span id="l78.6">   var checks =</span>
<a href="#l78.7"></a><span id="l78.7">   [</span>
<a href="#l78.8"></a><span id="l78.8">     [&quot;&quot;, false, &quot;&quot;],</span>
<a href="#l78.9"></a><span id="l78.9">     [&quot;\u0436&quot;, false, &quot;=?UTF-8?B?0LY=?=&quot;], //CYRILLIC SMALL LETTER ZHE</span>
<a href="#l78.10"></a><span id="l78.10">     [&quot;IamASCII&quot;, false, &quot;IamASCII&quot;],</span>
<a href="#l78.11"></a><span id="l78.11">     // Although an invalid email, we shouldn't crash on it (bug 479206)</span>
<a href="#l78.12"></a><span id="l78.12" class="difflineminus">-    [&quot;crash test@invalid.com&gt;&quot;, true, &quot;crash test@invalid.com&gt;&quot;],</span>
<a href="#l78.13"></a><span id="l78.13" class="difflineplus">+    [&quot;crash test@foo.invalid&gt;&quot;, true, &quot;crash test@foo.invalid&gt;&quot;],</span>
<a href="#l78.14"></a><span id="l78.14">   ];</span>
<a href="#l78.15"></a><span id="l78.15"> </span>
<a href="#l78.16"></a><span id="l78.16">   for (i = 0; i &lt; checks.length; ++i)</span>
<a href="#l78.17"></a><span id="l78.17">   {</span>
<a href="#l78.18"></a><span id="l78.18">     do_check_eq(</span>
<a href="#l78.19"></a><span id="l78.19">       converter.encodeMimePartIIStr_UTF8(checks[i][0], checks[i][1], &quot;UTF-8&quot;, 0, 72),</span>
<a href="#l78.20"></a><span id="l78.20">       checks[i][2]);</span>
<a href="#l78.21"></a><span id="l78.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l79.1"></a><span id="l79.1" class="difflineminus">--- a/mailnews/mime/test/unit/test_nsIMsgHeaderParser1.js</span>
<a href="#l79.2"></a><span id="l79.2" class="difflineplus">+++ b/mailnews/mime/test/unit/test_nsIMsgHeaderParser1.js</span>
<a href="#l79.3"></a><span id="l79.3" class="difflineat">@@ -6,20 +6,20 @@</span>
<a href="#l79.4"></a><span id="l79.4"> function run_test() {</span>
<a href="#l79.5"></a><span id="l79.5">   var i;</span>
<a href="#l79.6"></a><span id="l79.6"> </span>
<a href="#l79.7"></a><span id="l79.7">   var parser = Components.classes[&quot;@mozilla.org/messenger/headerparser;1&quot;]</span>
<a href="#l79.8"></a><span id="l79.8">                          .getService(Components.interfaces.nsIMsgHeaderParser);</span>
<a href="#l79.9"></a><span id="l79.9"> </span>
<a href="#l79.10"></a><span id="l79.10">   var checks =</span>
<a href="#l79.11"></a><span id="l79.11">   [</span>
<a href="#l79.12"></a><span id="l79.12" class="difflineminus">-    [&quot;&quot;, &quot;test@invalid.com&quot;, &quot;test@invalid.com&quot;],</span>
<a href="#l79.13"></a><span id="l79.13" class="difflineminus">-    [&quot;Test&quot;, &quot;test@invalid.com&quot;, &quot;Test &lt;test@invalid.com&gt;&quot;],</span>
<a href="#l79.14"></a><span id="l79.14" class="difflineminus">-    [&quot;Test&quot;, &quot;\&quot;abc!x.yz\&quot;@invalid.com&quot;, &quot;Test &lt;\&quot;abc!x.yz\&quot;@invalid.com&gt;&quot;],</span>
<a href="#l79.15"></a><span id="l79.15" class="difflineminus">-    [&quot;Test&quot;, &quot;test.user@invalid.com&quot;, &quot;Test &lt;test.user@invalid.com&gt;&quot;],</span>
<a href="#l79.16"></a><span id="l79.16" class="difflineplus">+    [&quot;&quot;, &quot;test@foo.invalid&quot;, &quot;test@foo.invalid&quot;],</span>
<a href="#l79.17"></a><span id="l79.17" class="difflineplus">+    [&quot;Test&quot;, &quot;test@foo.invalid&quot;, &quot;Test &lt;test@foo.invalid&gt;&quot;],</span>
<a href="#l79.18"></a><span id="l79.18" class="difflineplus">+    [&quot;Test&quot;, &quot;\&quot;abc!x.yz\&quot;@foo.invalid&quot;, &quot;Test &lt;\&quot;abc!x.yz\&quot;@foo.invalid&gt;&quot;],</span>
<a href="#l79.19"></a><span id="l79.19" class="difflineplus">+    [&quot;Test&quot;, &quot;test.user@foo.invalid&quot;, &quot;Test &lt;test.user@foo.invalid&gt;&quot;],</span>
<a href="#l79.20"></a><span id="l79.20">     [&quot;Test&quot;, &quot;test@[xyz!]&quot;, &quot;Test &lt;test@[xyz!]&gt;&quot;],</span>
<a href="#l79.21"></a><span id="l79.21">     // Based on RFC 2822 A.1.1</span>
<a href="#l79.22"></a><span id="l79.22">     [&quot;John Doe&quot;, &quot;jdoe@machine.example&quot;, &quot;John Doe &lt;jdoe@machine.example&gt;&quot;],</span>
<a href="#l79.23"></a><span id="l79.23">     // Next 2 tests Based on RFC 2822 A.1.2</span>
<a href="#l79.24"></a><span id="l79.24">     [&quot;Joe Q. Public&quot;, &quot;john.q.public@example.com&quot;,</span>
<a href="#l79.25"></a><span id="l79.25">      &quot;\&quot;Joe Q. Public\&quot; &lt;john.q.public@example.com&gt;&quot;],</span>
<a href="#l79.26"></a><span id="l79.26">     [&quot;Giant; \&quot;Big\&quot; Box&quot;, &quot;sysservices@example.net&quot;,</span>
<a href="#l79.27"></a><span id="l79.27">      &quot;\&quot;Giant; \\\&quot;Big\\\&quot; Box\&quot; &lt;sysservices@example.net&gt;&quot;],</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l80.1"></a><span id="l80.1" class="difflineminus">--- a/mailnews/mime/test/unit/test_nsIMsgHeaderParser2.js</span>
<a href="#l80.2"></a><span id="l80.2" class="difflineplus">+++ b/mailnews/mime/test/unit/test_nsIMsgHeaderParser2.js</span>
<a href="#l80.3"></a><span id="l80.3" class="difflineat">@@ -14,44 +14,44 @@ function run_test() {</span>
<a href="#l80.4"></a><span id="l80.4"> </span>
<a href="#l80.5"></a><span id="l80.5">   // In this array, the sub arrays consist of the following elements:</span>
<a href="#l80.6"></a><span id="l80.6">   // 0: input string</span>
<a href="#l80.7"></a><span id="l80.7">   // 1: expected output from extractHeaderAddressMailboxes</span>
<a href="#l80.8"></a><span id="l80.8">   // 2: expected output from extractHeaderAddressNames</span>
<a href="#l80.9"></a><span id="l80.9">   // 3: expected output from extractHeaderAddressName</span>
<a href="#l80.10"></a><span id="l80.10">   const checks =</span>
<a href="#l80.11"></a><span id="l80.11">   [</span>
<a href="#l80.12"></a><span id="l80.12" class="difflineminus">-    [&quot;abc@invalid.com&quot;,</span>
<a href="#l80.13"></a><span id="l80.13" class="difflineminus">-     &quot;abc@invalid.com&quot;,</span>
<a href="#l80.14"></a><span id="l80.14" class="difflineminus">-     &quot;abc@invalid.com&quot;,</span>
<a href="#l80.15"></a><span id="l80.15" class="difflineminus">-     &quot;abc@invalid.com&quot; ],</span>
<a href="#l80.16"></a><span id="l80.16" class="difflineminus">-    [&quot;foo &lt;ghj@invalid.com&gt;&quot;,</span>
<a href="#l80.17"></a><span id="l80.17" class="difflineminus">-     &quot;ghj@invalid.com&quot;,</span>
<a href="#l80.18"></a><span id="l80.18" class="difflineplus">+    [&quot;abc@foo.invalid&quot;,</span>
<a href="#l80.19"></a><span id="l80.19" class="difflineplus">+     &quot;abc@foo.invalid&quot;,</span>
<a href="#l80.20"></a><span id="l80.20" class="difflineplus">+     &quot;abc@foo.invalid&quot;,</span>
<a href="#l80.21"></a><span id="l80.21" class="difflineplus">+     &quot;abc@foo.invalid&quot; ],</span>
<a href="#l80.22"></a><span id="l80.22" class="difflineplus">+    [&quot;foo &lt;ghj@foo.invalid&gt;&quot;,</span>
<a href="#l80.23"></a><span id="l80.23" class="difflineplus">+     &quot;ghj@foo.invalid&quot;,</span>
<a href="#l80.24"></a><span id="l80.24">      &quot;foo&quot;,</span>
<a href="#l80.25"></a><span id="l80.25">      &quot;foo&quot; ],</span>
<a href="#l80.26"></a><span id="l80.26" class="difflineminus">-    [&quot;abc@invalid.com, foo &lt;ghj@invalid.com&gt;&quot;,</span>
<a href="#l80.27"></a><span id="l80.27" class="difflineminus">-     &quot;abc@invalid.com, ghj@invalid.com&quot;,</span>
<a href="#l80.28"></a><span id="l80.28" class="difflineminus">-     &quot;abc@invalid.com, foo&quot;,</span>
<a href="#l80.29"></a><span id="l80.29" class="difflineminus">-     &quot;abc@invalid.com&quot; ],</span>
<a href="#l80.30"></a><span id="l80.30" class="difflineplus">+    [&quot;abc@foo.invalid, foo &lt;ghj@foo.invalid&gt;&quot;,</span>
<a href="#l80.31"></a><span id="l80.31" class="difflineplus">+     &quot;abc@foo.invalid, ghj@foo.invalid&quot;,</span>
<a href="#l80.32"></a><span id="l80.32" class="difflineplus">+     &quot;abc@foo.invalid, foo&quot;,</span>
<a href="#l80.33"></a><span id="l80.33" class="difflineplus">+     &quot;abc@foo.invalid&quot; ],</span>
<a href="#l80.34"></a><span id="l80.34">     [&quot;foo bar &lt;foo@bar.invalid&gt;&quot;,</span>
<a href="#l80.35"></a><span id="l80.35">      &quot;foo@bar.invalid&quot;,</span>
<a href="#l80.36"></a><span id="l80.36">      &quot;foo bar&quot;,</span>
<a href="#l80.37"></a><span id="l80.37">      &quot;foo bar&quot; ],</span>
<a href="#l80.38"></a><span id="l80.38" class="difflineminus">-    [&quot;foo bar &lt;foo@bar.invalid&gt;, abc@invalid.com, foo &lt;ghj@invalid.com&gt;&quot;,</span>
<a href="#l80.39"></a><span id="l80.39" class="difflineminus">-     &quot;foo@bar.invalid, abc@invalid.com, ghj@invalid.com&quot;,</span>
<a href="#l80.40"></a><span id="l80.40" class="difflineminus">-     &quot;foo bar, abc@invalid.com, foo&quot;,</span>
<a href="#l80.41"></a><span id="l80.41" class="difflineplus">+    [&quot;foo bar &lt;foo@bar.invalid&gt;, abc@foo.invalid, foo &lt;ghj@foo.invalid&gt;&quot;,</span>
<a href="#l80.42"></a><span id="l80.42" class="difflineplus">+     &quot;foo@bar.invalid, abc@foo.invalid, ghj@foo.invalid&quot;,</span>
<a href="#l80.43"></a><span id="l80.43" class="difflineplus">+     &quot;foo bar, abc@foo.invalid, foo&quot;,</span>
<a href="#l80.44"></a><span id="l80.44">      &quot;foo bar&quot; ],</span>
<a href="#l80.45"></a><span id="l80.45">     // UTF-8 names</span>
<a href="#l80.46"></a><span id="l80.46" class="difflineminus">-    [&quot;foo\u00D0 bar &lt;foo@bar.invalid&gt;, \u00F6foo &lt;ghj@invalid.com&gt;&quot;,</span>
<a href="#l80.47"></a><span id="l80.47" class="difflineminus">-     &quot;foo@bar.invalid, ghj@invalid.com&quot;,</span>
<a href="#l80.48"></a><span id="l80.48" class="difflineplus">+    [&quot;foo\u00D0 bar &lt;foo@bar.invalid&gt;, \u00F6foo &lt;ghj@foo.invalid&gt;&quot;,</span>
<a href="#l80.49"></a><span id="l80.49" class="difflineplus">+     &quot;foo@bar.invalid, ghj@foo.invalid&quot;,</span>
<a href="#l80.50"></a><span id="l80.50">      &quot;foo\u00D0 bar, \u00F6foo&quot;,</span>
<a href="#l80.51"></a><span id="l80.51">      &quot;foo\u00D0 bar&quot; ],</span>
<a href="#l80.52"></a><span id="l80.52">     // More complicated examples drawn from RFC 2822</span>
<a href="#l80.53"></a><span id="l80.53" class="difflineminus">-    [&quot;\&quot;Joe Q. Public\&quot; &lt;john.q.public@example.com&gt;,Test &lt;\&quot;abc!x.yz\&quot;@invalid.com&gt;, Test &lt;test@[xyz!]&gt;,\&quot;Giant; \\\&quot;Big\\\&quot; Box\&quot; &lt;sysservices@example.net&gt;&quot;,</span>
<a href="#l80.54"></a><span id="l80.54" class="difflineminus">-     &quot;john.q.public@example.com, \&quot;abc!x.yz\&quot;@invalid.com, test@[xyz!], sysservices@example.net&quot;,</span>
<a href="#l80.55"></a><span id="l80.55" class="difflineplus">+    [&quot;\&quot;Joe Q. Public\&quot; &lt;john.q.public@example.com&gt;,Test &lt;\&quot;abc!x.yz\&quot;@foo.invalid&gt;, Test &lt;test@[xyz!]&gt;,\&quot;Giant; \\\&quot;Big\\\&quot; Box\&quot; &lt;sysservices@example.net&gt;&quot;,</span>
<a href="#l80.56"></a><span id="l80.56" class="difflineplus">+     &quot;john.q.public@example.com, \&quot;abc!x.yz\&quot;@foo.invalid, test@[xyz!], sysservices@example.net&quot;,</span>
<a href="#l80.57"></a><span id="l80.57">      &quot;\&quot;Joe Q. Public\&quot;, Test, Test, \&quot;Giant; \\\&quot;Big\\\&quot; Box\&quot;&quot;,</span>
<a href="#l80.58"></a><span id="l80.58">      // extractHeaderAddressName returns unquoted names, hence the difference.</span>
<a href="#l80.59"></a><span id="l80.59">      &quot;Joe Q. Public&quot; ],</span>
<a href="#l80.60"></a><span id="l80.60">     // Bug 549931</span>
<a href="#l80.61"></a><span id="l80.61">     [&quot;Undisclosed recipients:;&quot;,</span>
<a href="#l80.62"></a><span id="l80.62">      &quot;\&quot;Undisclosed recipients:;\&quot;&quot;, // Mailboxes</span>
<a href="#l80.63"></a><span id="l80.63">      &quot;\&quot;Undisclosed recipients:;\&quot;&quot;, // Address Names</span>
<a href="#l80.64"></a><span id="l80.64">      &quot;Undisclosed recipients:;&quot;] // Address Name</span>
<a href="#l80.65"></a><span id="l80.65" class="difflineat">@@ -60,17 +60,17 @@ function run_test() {</span>
<a href="#l80.66"></a><span id="l80.66">   // this used to cause memory read overruns</span>
<a href="#l80.67"></a><span id="l80.67">   let addresses = {}, names = {}, fullAddresses = {};</span>
<a href="#l80.68"></a><span id="l80.68">   parser.parseHeadersWithArray(&quot;\&quot; \&quot;@a a;b&quot;, addresses, names, fullAddresses);</span>
<a href="#l80.69"></a><span id="l80.69"> </span>
<a href="#l80.70"></a><span id="l80.70">   // This checks that the mime header parser doesn't march past the end</span>
<a href="#l80.71"></a><span id="l80.71">   // of strings with &quot;:;&quot; in them. The second &quot;:;&quot; is required to force the</span>
<a href="#l80.72"></a><span id="l80.72">   // parser to keep going.</span>
<a href="#l80.73"></a><span id="l80.73">   do_check_eq(parser.extractHeaderAddressMailboxes(</span>
<a href="#l80.74"></a><span id="l80.74" class="difflineminus">-    &quot;undisclosed-recipients:;\0:; foo &lt;ghj@veryveryveryverylongveryveryveryveryinvalidaddress.com&gt;&quot;),</span>
<a href="#l80.75"></a><span id="l80.75" class="difflineplus">+    &quot;undisclosed-recipients:;\0:; foo &lt;ghj@veryveryveryverylongveryveryveryveryinvalidaddress.invalid&gt;&quot;),</span>
<a href="#l80.76"></a><span id="l80.76">               &quot;undisclosed-recipients:;&quot;);</span>
<a href="#l80.77"></a><span id="l80.77"> </span>
<a href="#l80.78"></a><span id="l80.78">   do_check_eq(parser.extractHeaderAddressMailboxes(&quot;&lt;a;a@invalid&quot;), &quot;&quot;);</span>
<a href="#l80.79"></a><span id="l80.79"> </span>
<a href="#l80.80"></a><span id="l80.80">   // Test - empty strings</span>
<a href="#l80.81"></a><span id="l80.81"> </span>
<a href="#l80.82"></a><span id="l80.82">   do_check_eq(parser.extractHeaderAddressMailboxes(&quot;&quot;), &quot;&quot;);</span>
<a href="#l80.83"></a><span id="l80.83">   do_check_eq(parser.extractHeaderAddressNames(&quot;&quot;), &quot;&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l81.1"></a><span id="l81.1" class="difflineminus">--- a/mailnews/mime/test/unit/test_nsIMsgHeaderParser3.js</span>
<a href="#l81.2"></a><span id="l81.2" class="difflineplus">+++ b/mailnews/mime/test/unit/test_nsIMsgHeaderParser3.js</span>
<a href="#l81.3"></a><span id="l81.3" class="difflineat">@@ -1,62 +1,62 @@</span>
<a href="#l81.4"></a><span id="l81.4"> /* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l81.5"></a><span id="l81.5"> /*</span>
<a href="#l81.6"></a><span id="l81.6">  * Test suite for nsIMsgHeaderParser function removeDuplicateAddresses:</span>
<a href="#l81.7"></a><span id="l81.7">  */</span>
<a href="#l81.8"></a><span id="l81.8"> </span>
<a href="#l81.9"></a><span id="l81.9"> function run_test() {</span>
<a href="#l81.10"></a><span id="l81.10">   const checks =</span>
<a href="#l81.11"></a><span id="l81.11">   [</span>
<a href="#l81.12"></a><span id="l81.12" class="difflineminus">-    { addrs: &quot;test@invalid.com&quot;,</span>
<a href="#l81.13"></a><span id="l81.13" class="difflineplus">+    { addrs: &quot;test@foo.invalid&quot;,</span>
<a href="#l81.14"></a><span id="l81.14">       otherAddrs: &quot;&quot;,</span>
<a href="#l81.15"></a><span id="l81.15" class="difflineminus">-      expectedResult: &quot;test@invalid.com&quot; },</span>
<a href="#l81.16"></a><span id="l81.16" class="difflineminus">-    { addrs: &quot;foo bar &lt;test@invalid.com&gt;&quot;,</span>
<a href="#l81.17"></a><span id="l81.17" class="difflineplus">+      expectedResult: &quot;test@foo.invalid&quot; },</span>
<a href="#l81.18"></a><span id="l81.18" class="difflineplus">+    { addrs: &quot;foo bar &lt;test@foo.invalid&gt;&quot;,</span>
<a href="#l81.19"></a><span id="l81.19">       otherAddrs: &quot;&quot;,</span>
<a href="#l81.20"></a><span id="l81.20" class="difflineminus">-      expectedResult: &quot;foo bar &lt;test@invalid.com&gt;&quot; },</span>
<a href="#l81.21"></a><span id="l81.21" class="difflineminus">-    { addrs: &quot;foo bar &lt;test@invalid.com&gt;, abc@invalid.com&quot;,</span>
<a href="#l81.22"></a><span id="l81.22" class="difflineplus">+      expectedResult: &quot;foo bar &lt;test@foo.invalid&gt;&quot; },</span>
<a href="#l81.23"></a><span id="l81.23" class="difflineplus">+    { addrs: &quot;foo bar &lt;test@foo.invalid&gt;, abc@foo.invalid&quot;,</span>
<a href="#l81.24"></a><span id="l81.24">       otherAddrs: &quot;&quot;,</span>
<a href="#l81.25"></a><span id="l81.25" class="difflineminus">-      expectedResult: &quot;foo bar &lt;test@invalid.com&gt;, abc@invalid.com&quot; },</span>
<a href="#l81.26"></a><span id="l81.26" class="difflineminus">-    { addrs: &quot;foo bar &lt;test@invalid.com&gt;, abc@invalid.com, test &lt;test@invalid.com&gt;&quot;,</span>
<a href="#l81.27"></a><span id="l81.27" class="difflineplus">+      expectedResult: &quot;foo bar &lt;test@foo.invalid&gt;, abc@foo.invalid&quot; },</span>
<a href="#l81.28"></a><span id="l81.28" class="difflineplus">+    { addrs: &quot;foo bar &lt;test@foo.invalid&gt;, abc@foo.invalid, test &lt;test@foo.invalid&gt;&quot;,</span>
<a href="#l81.29"></a><span id="l81.29">       otherAddrs: &quot;&quot;,</span>
<a href="#l81.30"></a><span id="l81.30" class="difflineminus">-      expectedResult: &quot;foo bar &lt;test@invalid.com&gt;, abc@invalid.com&quot; },</span>
<a href="#l81.31"></a><span id="l81.31" class="difflineminus">-    { addrs: &quot;foo bar &lt;test@invalid.com&gt;&quot;,</span>
<a href="#l81.32"></a><span id="l81.32" class="difflineminus">-      otherAddrs: &quot;abc@invalid.com&quot;,</span>
<a href="#l81.33"></a><span id="l81.33" class="difflineminus">-      expectedResult: &quot;foo bar &lt;test@invalid.com&gt;&quot; },</span>
<a href="#l81.34"></a><span id="l81.34" class="difflineminus">-    { addrs: &quot;foo bar &lt;test@invalid.com&gt;&quot;,</span>
<a href="#l81.35"></a><span id="l81.35" class="difflineminus">-      otherAddrs: &quot;foo bar &lt;test@invalid.com&gt;&quot;,</span>
<a href="#l81.36"></a><span id="l81.36" class="difflineplus">+      expectedResult: &quot;foo bar &lt;test@foo.invalid&gt;, abc@foo.invalid&quot; },</span>
<a href="#l81.37"></a><span id="l81.37" class="difflineplus">+    { addrs: &quot;foo bar &lt;test@foo.invalid&gt;&quot;,</span>
<a href="#l81.38"></a><span id="l81.38" class="difflineplus">+      otherAddrs: &quot;abc@foo.invalid&quot;,</span>
<a href="#l81.39"></a><span id="l81.39" class="difflineplus">+      expectedResult: &quot;foo bar &lt;test@foo.invalid&gt;&quot; },</span>
<a href="#l81.40"></a><span id="l81.40" class="difflineplus">+    { addrs: &quot;foo bar &lt;test@foo.invalid&gt;&quot;,</span>
<a href="#l81.41"></a><span id="l81.41" class="difflineplus">+      otherAddrs: &quot;foo bar &lt;test@foo.invalid&gt;&quot;,</span>
<a href="#l81.42"></a><span id="l81.42">       expectedResult: null },</span>
<a href="#l81.43"></a><span id="l81.43" class="difflineminus">-    { addrs: &quot;foo bar &lt;test@invalid.com&gt;, abc@invalid.com&quot;,</span>
<a href="#l81.44"></a><span id="l81.44" class="difflineminus">-      otherAddrs: &quot;foo bar &lt;test@invalid.com&gt;&quot;,</span>
<a href="#l81.45"></a><span id="l81.45" class="difflineminus">-      expectedResult: &quot;abc@invalid.com&quot; },</span>
<a href="#l81.46"></a><span id="l81.46" class="difflineminus">-    { addrs: &quot;foo bar &lt;test@invalid.com&gt;, abc@invalid.com&quot;,</span>
<a href="#l81.47"></a><span id="l81.47" class="difflineminus">-      otherAddrs: &quot;abc@invalid.com&quot;,</span>
<a href="#l81.48"></a><span id="l81.48" class="difflineminus">-      expectedResult: &quot;foo bar &lt;test@invalid.com&gt;&quot; },</span>
<a href="#l81.49"></a><span id="l81.49" class="difflineminus">-    { addrs: &quot;foo bar &lt;test@invalid.com&gt;, abc@invalid.com, test &lt;test@invalid.com&gt;&quot;,</span>
<a href="#l81.50"></a><span id="l81.50" class="difflineminus">-      otherAddrs: &quot;abc@invalid.com&quot;,</span>
<a href="#l81.51"></a><span id="l81.51" class="difflineminus">-      expectedResult: &quot;foo bar &lt;test@invalid.com&gt;&quot; },</span>
<a href="#l81.52"></a><span id="l81.52" class="difflineplus">+    { addrs: &quot;foo bar &lt;test@foo.invalid&gt;, abc@foo.invalid&quot;,</span>
<a href="#l81.53"></a><span id="l81.53" class="difflineplus">+      otherAddrs: &quot;foo bar &lt;test@foo.invalid&gt;&quot;,</span>
<a href="#l81.54"></a><span id="l81.54" class="difflineplus">+      expectedResult: &quot;abc@foo.invalid&quot; },</span>
<a href="#l81.55"></a><span id="l81.55" class="difflineplus">+    { addrs: &quot;foo bar &lt;test@foo.invalid&gt;, abc@foo.invalid&quot;,</span>
<a href="#l81.56"></a><span id="l81.56" class="difflineplus">+      otherAddrs: &quot;abc@foo.invalid&quot;,</span>
<a href="#l81.57"></a><span id="l81.57" class="difflineplus">+      expectedResult: &quot;foo bar &lt;test@foo.invalid&gt;&quot; },</span>
<a href="#l81.58"></a><span id="l81.58" class="difflineplus">+    { addrs: &quot;foo bar &lt;test@foo.invalid&gt;, abc@foo.invalid, test &lt;test@foo.invalid&gt;&quot;,</span>
<a href="#l81.59"></a><span id="l81.59" class="difflineplus">+      otherAddrs: &quot;abc@foo.invalid&quot;,</span>
<a href="#l81.60"></a><span id="l81.60" class="difflineplus">+      expectedResult: &quot;foo bar &lt;test@foo.invalid&gt;&quot; },</span>
<a href="#l81.61"></a><span id="l81.61">     // UTF-8 names</span>
<a href="#l81.62"></a><span id="l81.62" class="difflineminus">-    { addrs: &quot;foo\u00D0 bar &lt;foo@bar.invalid&gt;, \u00F6foo &lt;ghj@invalid.com&gt;&quot;,</span>
<a href="#l81.63"></a><span id="l81.63" class="difflineplus">+    { addrs: &quot;foo\u00D0 bar &lt;foo@bar.invalid&gt;, \u00F6foo &lt;ghj@foo.invalid&gt;&quot;,</span>
<a href="#l81.64"></a><span id="l81.64">       otherAddrs: &quot;&quot;,</span>
<a href="#l81.65"></a><span id="l81.65" class="difflineminus">-      expectedResult: &quot;foo\u00D0 bar &lt;foo@bar.invalid&gt;, \u00F6foo &lt;ghj@invalid.com&gt;&quot; },</span>
<a href="#l81.66"></a><span id="l81.66" class="difflineminus">-    { addrs: &quot;foo\u00D0 bar &lt;foo@bar.invalid&gt;, \u00F6foo &lt;ghj@invalid.com&gt;&quot;,</span>
<a href="#l81.67"></a><span id="l81.67" class="difflineplus">+      expectedResult: &quot;foo\u00D0 bar &lt;foo@bar.invalid&gt;, \u00F6foo &lt;ghj@foo.invalid&gt;&quot; },</span>
<a href="#l81.68"></a><span id="l81.68" class="difflineplus">+    { addrs: &quot;foo\u00D0 bar &lt;foo@bar.invalid&gt;, \u00F6foo &lt;ghj@foo.invalid&gt;&quot;,</span>
<a href="#l81.69"></a><span id="l81.69">       otherAddrs: &quot;foo\u00D0 bar &lt;foo@bar.invalid&gt;&quot;,</span>
<a href="#l81.70"></a><span id="l81.70" class="difflineminus">-      expectedResult: &quot;\u00F6foo &lt;ghj@invalid.com&gt;&quot; },</span>
<a href="#l81.71"></a><span id="l81.71" class="difflineminus">-    { addrs: &quot;foo\u00D0 bar &lt;foo@bar.invalid&gt;, \u00F6foo &lt;ghj@invalid.com&gt;, foo\u00D0 bar &lt;foo@bar.invalid&gt;&quot;,</span>
<a href="#l81.72"></a><span id="l81.72" class="difflineminus">-      otherAddrs: &quot;\u00F6foo &lt;ghj@invalid.com&gt;&quot;,</span>
<a href="#l81.73"></a><span id="l81.73" class="difflineplus">+      expectedResult: &quot;\u00F6foo &lt;ghj@foo.invalid&gt;&quot; },</span>
<a href="#l81.74"></a><span id="l81.74" class="difflineplus">+    { addrs: &quot;foo\u00D0 bar &lt;foo@bar.invalid&gt;, \u00F6foo &lt;ghj@foo.invalid&gt;, foo\u00D0 bar &lt;foo@bar.invalid&gt;&quot;,</span>
<a href="#l81.75"></a><span id="l81.75" class="difflineplus">+      otherAddrs: &quot;\u00F6foo &lt;ghj@foo.invalid&gt;&quot;,</span>
<a href="#l81.76"></a><span id="l81.76">       expectedResult: &quot;foo\u00D0 bar &lt;foo@bar.invalid&gt;&quot; }</span>
<a href="#l81.77"></a><span id="l81.77">   ];</span>
<a href="#l81.78"></a><span id="l81.78"> </span>
<a href="#l81.79"></a><span id="l81.79">   // Test - empty strings</span>
<a href="#l81.80"></a><span id="l81.80"> </span>
<a href="#l81.81"></a><span id="l81.81">   var parser = Components.classes[&quot;@mozilla.org/messenger/headerparser;1&quot;]</span>
<a href="#l81.82"></a><span id="l81.82">                          .getService(Components.interfaces.nsIMsgHeaderParser);</span>
<a href="#l81.83"></a><span id="l81.83"> </span>
<a href="#l81.84"></a><span id="l81.84">   do_check_eq(parser.removeDuplicateAddresses(&quot;&quot;, &quot;&quot;), &quot;&quot;);</span>
<a href="#l81.85"></a><span id="l81.85" class="difflineminus">-  do_check_eq(parser.removeDuplicateAddresses(&quot;&quot;, &quot;test@invalid.com&quot;), &quot;&quot;);</span>
<a href="#l81.86"></a><span id="l81.86" class="difflineplus">+  do_check_eq(parser.removeDuplicateAddresses(&quot;&quot;, &quot;test@foo.invalid&quot;), &quot;&quot;);</span>
<a href="#l81.87"></a><span id="l81.87"> </span>
<a href="#l81.88"></a><span id="l81.88">   // Test - removeDuplicateAddresses</span>
<a href="#l81.89"></a><span id="l81.89"> </span>
<a href="#l81.90"></a><span id="l81.90">   for (let i = 0; i &lt; checks.length; ++i) {</span>
<a href="#l81.91"></a><span id="l81.91">     dump(&quot;Test &quot; + i + &quot;\n&quot;);</span>
<a href="#l81.92"></a><span id="l81.92">     do_check_eq(parser.removeDuplicateAddresses(checks[i].addrs,</span>
<a href="#l81.93"></a><span id="l81.93"> 						checks[i].otherAddrs),</span>
<a href="#l81.94"></a><span id="l81.94"> 		checks[i].expectedResult);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l82.1"></a><span id="l82.1" class="difflineminus">--- a/mailnews/news/test/unit/head_server_setup.js</span>
<a href="#l82.2"></a><span id="l82.2" class="difflineplus">+++ b/mailnews/news/test/unit/head_server_setup.js</span>
<a href="#l82.3"></a><span id="l82.3" class="difflineat">@@ -6,17 +6,17 @@ load(&quot;../../../fakeserver/nntpd.js&quot;);</span>
<a href="#l82.4"></a><span id="l82.4"> load(&quot;../../../resources/mailDirService.js&quot;);</span>
<a href="#l82.5"></a><span id="l82.5"> load(&quot;../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l82.6"></a><span id="l82.6"> </span>
<a href="#l82.7"></a><span id="l82.7"> const kSimpleNewsArticle =</span>
<a href="#l82.8"></a><span id="l82.8">   &quot;From: John Doe &lt;john.doe@example.com&gt;\n&quot;+</span>
<a href="#l82.9"></a><span id="l82.9">   &quot;Date: Sat, 24 Mar 1990 10:59:24 -0500\n&quot;+</span>
<a href="#l82.10"></a><span id="l82.10">   &quot;Newsgroups: test.subscribe.simple\n&quot;+</span>
<a href="#l82.11"></a><span id="l82.11">   &quot;Subject: H2G2 -- What does it mean?\n&quot;+</span>
<a href="#l82.12"></a><span id="l82.12" class="difflineminus">-  &quot;Message-ID: &lt;TSS1@nntp.test&gt;\n&quot;+</span>
<a href="#l82.13"></a><span id="l82.13" class="difflineplus">+  &quot;Message-ID: &lt;TSS1@nntp.invalid&gt;\n&quot;+</span>
<a href="#l82.14"></a><span id="l82.14">   &quot;\n&quot;+</span>
<a href="#l82.15"></a><span id="l82.15">   &quot;What does the acronym H2G2 stand for? I've seen it before...\n&quot;;</span>
<a href="#l82.16"></a><span id="l82.16"> </span>
<a href="#l82.17"></a><span id="l82.17"> // The groups to set up on the fake server.</span>
<a href="#l82.18"></a><span id="l82.18"> // It is an array of tuples, where the first element is the group name and the</span>
<a href="#l82.19"></a><span id="l82.19"> // second element is whether or not we should subscribe to it.</span>
<a href="#l82.20"></a><span id="l82.20"> var groups = [</span>
<a href="#l82.21"></a><span id="l82.21">   [&quot;misc.test&quot;, false],</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l83.1"></a><span id="l83.1" class="difflineminus">--- a/mailnews/news/test/unit/test_internalUris.js</span>
<a href="#l83.2"></a><span id="l83.2" class="difflineplus">+++ b/mailnews/news/test/unit/test_internalUris.js</span>
<a href="#l83.3"></a><span id="l83.3" class="difflineat">@@ -178,17 +178,17 @@ function test_postMessage() {</span>
<a href="#l83.4"></a><span id="l83.4"> </span>
<a href="#l83.5"></a><span id="l83.5"> // Not tested because it requires UI, and this is insufficient, I think.</span>
<a href="#l83.6"></a><span id="l83.6"> function test_forwardInline() {</span>
<a href="#l83.7"></a><span id="l83.7">   // This tests mime_parse_stream_complete via forwarding inline</span>
<a href="#l83.8"></a><span id="l83.8">   let composeSvc = Cc['@mozilla.org/messengercompose;1']</span>
<a href="#l83.9"></a><span id="l83.9">                      .getService(Ci.nsIMsgComposeService);</span>
<a href="#l83.10"></a><span id="l83.10">   let folder = localserver.rootFolder.getChildNamed(&quot;test.filter&quot;);</span>
<a href="#l83.11"></a><span id="l83.11">   let hdr = folder.msgDatabase.GetMsgHdrForKey(1);</span>
<a href="#l83.12"></a><span id="l83.12" class="difflineminus">-  composeSvc.forwardMessage(&quot;a@b.c&quot;, hdr, null,</span>
<a href="#l83.13"></a><span id="l83.13" class="difflineplus">+  composeSvc.forwardMessage(&quot;a@b.invalid&quot;, hdr, null,</span>
<a href="#l83.14"></a><span id="l83.14">     localserver, Ci.nsIMsgComposeService.kForwardInline);</span>
<a href="#l83.15"></a><span id="l83.15"> }</span>
<a href="#l83.16"></a><span id="l83.16"> </span>
<a href="#l83.17"></a><span id="l83.17"> function test_escapedName() {</span>
<a href="#l83.18"></a><span id="l83.18">   // This does a few tests to make sure our internal URIs work for newsgroups</span>
<a href="#l83.19"></a><span id="l83.19">   // with names that need escaping</span>
<a href="#l83.20"></a><span id="l83.20">   let evilName = &quot;test.malformed&amp;name&quot;;</span>
<a href="#l83.21"></a><span id="l83.21">   daemon.addGroup(evilName);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l84.1"></a><span id="l84.1" class="difflineminus">--- a/mailnews/news/test/unit/test_server.js</span>
<a href="#l84.2"></a><span id="l84.2" class="difflineplus">+++ b/mailnews/news/test/unit/test_server.js</span>
<a href="#l84.3"></a><span id="l84.3" class="difflineat">@@ -50,21 +50,21 @@ function testRFC977() {</span>
<a href="#l84.4"></a><span id="l84.4">     server.performTest();</span>
<a href="#l84.5"></a><span id="l84.5">     transaction = server.playTransaction();</span>
<a href="#l84.6"></a><span id="l84.6">     do_check_transaction(transaction, [&quot;MODE READER&quot;,</span>
<a href="#l84.7"></a><span id="l84.7">       &quot;GROUP test.subscribe.empty&quot;]);</span>
<a href="#l84.8"></a><span id="l84.8"> </span>
<a href="#l84.9"></a><span id="l84.9">     // Test - getting an article</span>
<a href="#l84.10"></a><span id="l84.10">     test = &quot;news:MESSAGE_ID&quot;;</span>
<a href="#l84.11"></a><span id="l84.11">     server.resetTest();</span>
<a href="#l84.12"></a><span id="l84.12" class="difflineminus">-    setupProtocolTest(NNTP_PORT, prefix+&quot;TSS1@nntp.test&quot;);</span>
<a href="#l84.13"></a><span id="l84.13" class="difflineplus">+    setupProtocolTest(NNTP_PORT, prefix+&quot;TSS1@nntp.invalid&quot;);</span>
<a href="#l84.14"></a><span id="l84.14">     server.performTest();</span>
<a href="#l84.15"></a><span id="l84.15">     transaction = server.playTransaction();</span>
<a href="#l84.16"></a><span id="l84.16">     do_check_transaction(transaction, [&quot;MODE READER&quot;,</span>
<a href="#l84.17"></a><span id="l84.17" class="difflineminus">-        &quot;ARTICLE &lt;TSS1@nntp.test&gt;&quot;]);</span>
<a href="#l84.18"></a><span id="l84.18" class="difflineplus">+        &quot;ARTICLE &lt;TSS1@nntp.invalid&gt;&quot;]);</span>
<a href="#l84.19"></a><span id="l84.19"> </span>
<a href="#l84.20"></a><span id="l84.20">     // Test - news expiration</span>
<a href="#l84.21"></a><span id="l84.21">     test = &quot;news:GROUP?list-ids&quot;;</span>
<a href="#l84.22"></a><span id="l84.22">     server.resetTest();</span>
<a href="#l84.23"></a><span id="l84.23">     setupProtocolTest(NNTP_PORT, prefix+&quot;test.filter?list-ids&quot;);</span>
<a href="#l84.24"></a><span id="l84.24">     server.performTest();</span>
<a href="#l84.25"></a><span id="l84.25">     transaction = server.playTransaction();</span>
<a href="#l84.26"></a><span id="l84.26">     do_check_transaction(transaction, [&quot;MODE READER&quot;,</span>
<a href="#l84.27"></a><span id="l84.27" class="difflineat">@@ -99,17 +99,17 @@ function testConnectionLimit() {</span>
<a href="#l84.28"></a><span id="l84.28">   server.start(NNTP_PORT);</span>
<a href="#l84.29"></a><span id="l84.29"> </span>
<a href="#l84.30"></a><span id="l84.30">   var prefix = &quot;news://localhost:&quot;+NNTP_PORT+&quot;/&quot;;</span>
<a href="#l84.31"></a><span id="l84.31">   var transaction;</span>
<a href="#l84.32"></a><span id="l84.32"> </span>
<a href="#l84.33"></a><span id="l84.33">   // To test make connections limit, we run two URIs simultaneously.</span>
<a href="#l84.34"></a><span id="l84.34">   var url = URLCreator.newURI(prefix+&quot;*&quot;, null, null);</span>
<a href="#l84.35"></a><span id="l84.35">   _server.loadNewsUrl(url, null, null);</span>
<a href="#l84.36"></a><span id="l84.36" class="difflineminus">-  setupProtocolTest(NNTP_PORT, prefix+&quot;TSS1@nntp.test&quot;);</span>
<a href="#l84.37"></a><span id="l84.37" class="difflineplus">+  setupProtocolTest(NNTP_PORT, prefix+&quot;TSS1@nntp.invalid&quot;);</span>
<a href="#l84.38"></a><span id="l84.38">   server.performTest();</span>
<a href="#l84.39"></a><span id="l84.39">   // We should have length one... which means this must be a transaction object,</span>
<a href="#l84.40"></a><span id="l84.40">   // containing only us and them</span>
<a href="#l84.41"></a><span id="l84.41">   do_check_true('us' in server.playTransaction());</span>
<a href="#l84.42"></a><span id="l84.42">   server.stop();</span>
<a href="#l84.43"></a><span id="l84.43"> </span>
<a href="#l84.44"></a><span id="l84.44">   var thread = gThreadManager.currentThread;</span>
<a href="#l84.45"></a><span id="l84.45">   while (thread.hasPendingEvents())</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l85.1"></a><span id="l85.1" class="difflineminus">--- a/mailnews/test/data/abLists1.mab</span>
<a href="#l85.2"></a><span id="l85.2" class="difflineplus">+++ b/mailnews/test/data/abLists1.mab</span>
<a href="#l85.3"></a><span id="l85.3" class="difflineat">@@ -18,19 +18,19 @@</span>
<a href="#l85.4"></a><span id="l85.4">   (9D=HomeZipCode)(9E=HomeCountry)(9F=WorkAddress)(A0=WorkAddress2)</span>
<a href="#l85.5"></a><span id="l85.5">   (A1=WorkCity)(A2=WorkState)(A3=WorkZipCode)(A4=WorkCountry)</span>
<a href="#l85.6"></a><span id="l85.6">   (A5=JobTitle)(A6=Department)(A7=Company)(A8=_AimScreenName)</span>
<a href="#l85.7"></a><span id="l85.7">   (A9=AnniversaryYear)(AA=AnniversaryMonth)(AB=AnniversaryDay)</span>
<a href="#l85.8"></a><span id="l85.8">   (AC=SpouseName)(AD=FamilyName)(AE=DefaultAddress)(AF=Category)</span>
<a href="#l85.9"></a><span id="l85.9">   (B0=WebPage1)(B1=WebPage2)(B2=BirthYear)(B3=BirthMonth)(B4=BirthDay)</span>
<a href="#l85.10"></a><span id="l85.10">   (B5=Custom1)(B6=Custom2)(B7=Custom3)&gt;</span>
<a href="#l85.11"></a><span id="l85.11"> </span>
<a href="#l85.12"></a><span id="l85.12" class="difflineminus">-&lt;(90=6)(81=)(82=test1@invalid.com)(80=0)(83=1)(84=test2@invalid.com)</span>
<a href="#l85.13"></a><span id="l85.13" class="difflineminus">-  (85=2)(86=test3@invalid.com)(87=3)(88=test4@invalid.com)(8C=4791024e)</span>
<a href="#l85.14"></a><span id="l85.14" class="difflineminus">-  (89=4)(8A=test5@invalid.com)(8D=47910253)(8B=5)(8E=TestList1)(8F</span>
<a href="#l85.15"></a><span id="l85.15" class="difflineplus">+&lt;(90=6)(81=)(82=test1@foo.invalid)(80=0)(83=1)(84=test2@foo.invalid)</span>
<a href="#l85.16"></a><span id="l85.16" class="difflineplus">+  (85=2)(86=test3@foo.invalid)(87=3)(88=test4@foo.invalid)(8C=4791024e)</span>
<a href="#l85.17"></a><span id="l85.17" class="difflineplus">+  (89=4)(8A=test5@foo.invalid)(8D=47910253)(8B=5)(8E=TestList1)(8F</span>
<a href="#l85.18"></a><span id="l85.18">     =testlist1)&gt;</span>
<a href="#l85.19"></a><span id="l85.19"> {1:^80 {(k^BE:c)(s=9)} </span>
<a href="#l85.20"></a><span id="l85.20">   [1:^82(^BD=6)]</span>
<a href="#l85.21"></a><span id="l85.21">   [1(^83=)(^84=)(^85=)(^86=)(^87=)(^88=)(^89^82)(^8A^82)(^8B=)(^8C=0)</span>
<a href="#l85.22"></a><span id="l85.22">     (^8D=0)(^8E=0)(^8F=)(^90=)(^91=)(^92=)(^93=)(^94=)(^95=)(^96=)(^97=)</span>
<a href="#l85.23"></a><span id="l85.23">     (^98=)(^99=)(^9A=)(^9B=)(^9C=)(^9D=)(^9E=)(^9F=)(^A0=)(^A1=)(^A2=)</span>
<a href="#l85.24"></a><span id="l85.24">     (^A3=)(^A4=)(^A5=)(^A6=)(^A7=)(^A8=)(^A9=)(^AA=)(^AB=)(^AC=)(^AD=)</span>
<a href="#l85.25"></a><span id="l85.25">     (^AE=)(^AF=)(^B0=)(^B1=)(^B2=)(^B3=)(^B4=)(^B5=)(^B6=)(^B7=)(^B8=)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l86.1"></a><span id="l86.1" class="difflineminus">--- a/mailnews/test/data/bug460636</span>
<a href="#l86.2"></a><span id="l86.2" class="difflineplus">+++ b/mailnews/test/data/bug460636</span>
<a href="#l86.3"></a><span id="l86.3" class="difflineat">@@ -1,9 +1,9 @@</span>
<a href="#l86.4"></a><span id="l86.4" class="difflineminus">-Message-ID: &lt;foo.12345@bar&gt;</span>
<a href="#l86.5"></a><span id="l86.5" class="difflineplus">+Message-ID: &lt;foo.12345@example&gt;</span>
<a href="#l86.6"></a><span id="l86.6"> Date: Sun, 19 Oct 2008 08:00:00 +0000</span>
<a href="#l86.7"></a><span id="l86.7"> From: Me &lt;me@example.net&gt;</span>
<a href="#l86.8"></a><span id="l86.8"> To: You &lt;you@example.org&gt;</span>
<a href="#l86.9"></a><span id="l86.9"> Subject: Test message</span>
<a href="#l86.10"></a><span id="l86.10"> </span>
<a href="#l86.11"></a><span id="l86.11"> When this message is stored on an IMAP server and subsequently saved</span>
<a href="#l86.12"></a><span id="l86.12"> in Thunderbird as a .eml file, a spurious new line will appear after</span>
<a href="#l86.13"></a><span id="l86.13"> line 110 (caused by an erroneously inserted LF character).</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l87.1"></a><span id="l87.1" class="difflineminus">--- a/mailnews/test/data/bug505221</span>
<a href="#l87.2"></a><span id="l87.2" class="difflineplus">+++ b/mailnews/test/data/bug505221</span>
<a href="#l87.3"></a><span id="l87.3" class="difflineat">@@ -1,13 +1,13 @@</span>
<a href="#l87.4"></a><span id="l87.4"> From - Mon Jan 1 00:00:00 1965</span>
<a href="#l87.5"></a><span id="l87.5"> X-Mozilla-Status: 0001</span>
<a href="#l87.6"></a><span id="l87.6"> X-Mozilla-Status2: 10000000</span>
<a href="#l87.7"></a><span id="l87.7"> From: &lt;aaa bbb&gt;</span>
<a href="#l87.8"></a><span id="l87.8" class="difflineminus">-To: &lt;aaa@bb.com&gt;</span>
<a href="#l87.9"></a><span id="l87.9" class="difflineplus">+To: &lt;aaa@bb.invalid&gt;</span>
<a href="#l87.10"></a><span id="l87.10"> Subject: xxx</span>
<a href="#l87.11"></a><span id="l87.11"> Date: Tue, 9 Dec 2008 16:49:02 +0200</span>
<a href="#l87.12"></a><span id="l87.12"> MIME-Version: 1.0</span>
<a href="#l87.13"></a><span id="l87.13"> Content-Type: multipart/mixed;</span>
<a href="#l87.14"></a><span id="l87.14"> 	boundary=&quot;----=_NextPart_000_36B5_01C9DB8C.9514C300&quot;</span>
<a href="#l87.15"></a><span id="l87.15"> X-Priority: 3</span>
<a href="#l87.16"></a><span id="l87.16"> X-MSMail-Priority: Normal</span>
<a href="#l87.17"></a><span id="l87.17"> X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180</span>
<a href="#l87.18"></a><span id="l87.18" class="difflineat">@@ -29,17 +29,17 @@ charset=3Dus-ascii&quot;&gt;</span>
<a href="#l87.19"></a><span id="l87.19"> &lt;BODY&gt; bbb</span>
<a href="#l87.20"></a><span id="l87.20"> &lt;/BODY&gt;&lt;/HTML&gt;</span>
<a href="#l87.21"></a><span id="l87.21"> ------=_NextPart_000_36B5_01C9DB8C.9514C300</span>
<a href="#l87.22"></a><span id="l87.22"> Content-Type: message/rfc822</span>
<a href="#l87.23"></a><span id="l87.23"> Content-Transfer-Encoding: 7bit</span>
<a href="#l87.24"></a><span id="l87.24"> Content-Disposition: attachment</span>
<a href="#l87.25"></a><span id="l87.25"> </span>
<a href="#l87.26"></a><span id="l87.26"> From: &lt;sys admin&gt;</span>
<a href="#l87.27"></a><span id="l87.27" class="difflineminus">-To: &lt;dd@ee.com&gt;</span>
<a href="#l87.28"></a><span id="l87.28" class="difflineplus">+To: &lt;dd@ee.invalid&gt;</span>
<a href="#l87.29"></a><span id="l87.29"> Subject: yyy</span>
<a href="#l87.30"></a><span id="l87.30"> Date: Sun, 7 Dec 2008 17:53:47 +0200</span>
<a href="#l87.31"></a><span id="l87.31"> MIME-Version: 1.0</span>
<a href="#l87.32"></a><span id="l87.32"> Content-Type: message/rfc822</span>
<a href="#l87.33"></a><span id="l87.33"> Content-Transfer-Encoding: 7bit</span>
<a href="#l87.34"></a><span id="l87.34"> Content-Disposition: attachment</span>
<a href="#l87.35"></a><span id="l87.35"> X-Priority: 3</span>
<a href="#l87.36"></a><span id="l87.36"> X-MSMail-Priority: Normal</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l88.1"></a><span id="l88.1" class="difflineminus">--- a/mailnews/test/data/bugmail19</span>
<a href="#l88.2"></a><span id="l88.2" class="difflineplus">+++ b/mailnews/test/data/bugmail19</span>
<a href="#l88.3"></a><span id="l88.3" class="difflineat">@@ -21,26 +21,26 @@ X-Bugzilla-Severity: enhancement</span>
<a href="#l88.4"></a><span id="l88.4"> X-Bugzilla-Who: bugmail@example.org</span>
<a href="#l88.5"></a><span id="l88.5"> X-Bugzilla-Status: NEW</span>
<a href="#l88.6"></a><span id="l88.6"> X-Bugzilla-Priority: --</span>
<a href="#l88.7"></a><span id="l88.7"> X-Bugzilla-Assigned-To: nobody@mozilla.org</span>
<a href="#l88.8"></a><span id="l88.8"> X-Bugzilla-Target-Milestone: ---</span>
<a href="#l88.9"></a><span id="l88.9"> X-Bugzilla-Changed-Fields: Blocks</span>
<a href="#l88.10"></a><span id="l88.10"> In-Reply-To: &lt;bug-397009-254728@https.bugzilla.mozilla.org/&gt;</span>
<a href="#l88.11"></a><span id="l88.11"> References: &lt;bug-397009-254728@https.bugzilla.mozilla.org/&gt;</span>
<a href="#l88.12"></a><span id="l88.12" class="difflineminus">-	&lt;4DC2493C.4060403@gmx.com&gt;</span>
<a href="#l88.13"></a><span id="l88.13" class="difflineminus">-	&lt;BANLkTin2w8LJxYGHV3_5NpFbsiBhrP96XA@mail.gmail.com&gt;</span>
<a href="#l88.14"></a><span id="l88.14" class="difflineplus">+	&lt;4DC2493C.4060403@gmx.invalid&gt;</span>
<a href="#l88.15"></a><span id="l88.15" class="difflineplus">+	&lt;BANLkTin2w8LJxYGHV3_5NpFbsiBhrP96XA@mail.gmail.invalid&gt;</span>
<a href="#l88.16"></a><span id="l88.16"> 	&lt;175221688.20110506234025@my_localhost&gt;</span>
<a href="#l88.17"></a><span id="l88.17" class="difflineminus">-	&lt;201105072315.25120@thufir.ingo-kloecker.de&gt;</span>
<a href="#l88.18"></a><span id="l88.18" class="difflineminus">-	&lt;BANLkTinacQCd+mZ7fL1THLK55X2+u9g5-w@mail.gmail.com&gt;</span>
<a href="#l88.19"></a><span id="l88.19" class="difflineplus">+	&lt;201105072315.25120@thufir.ingo-kloecker.invalid&gt;</span>
<a href="#l88.20"></a><span id="l88.20" class="difflineplus">+	&lt;BANLkTinacQCd+mZ7fL1THLK55X2+u9g5-w@mail.gmail.invalid&gt;</span>
<a href="#l88.21"></a><span id="l88.21"> 	&lt;05433510.20110507224940@my_localhost&gt;</span>
<a href="#l88.22"></a><span id="l88.22" class="difflineminus">-	&lt;4DC5C015.7050800@sixdemonbag.org&gt;</span>
<a href="#l88.23"></a><span id="l88.23" class="difflineminus">-	&lt;BANLkTinv7NvPG9gE1Fha+X+6ZkHzdXdRdg@mail.gmail.com&gt;</span>
<a href="#l88.24"></a><span id="l88.24" class="difflineminus">-	&lt;BANLkTi=6zDTsYymc+bUTwPOM2AohJD2wfA@mail.gmail.com&gt;</span>
<a href="#l88.25"></a><span id="l88.25" class="difflineminus">-Reply-To: FOO &lt;bar@foo.com&gt;</span>
<a href="#l88.26"></a><span id="l88.26" class="difflineplus">+	&lt;4DC5C015.7050800@sixdemonbag.invalid&gt;</span>
<a href="#l88.27"></a><span id="l88.27" class="difflineplus">+	&lt;BANLkTinv7NvPG9gE1Fha+X+6ZkHzdXdRdg@mail.gmail.invalid&gt;</span>
<a href="#l88.28"></a><span id="l88.28" class="difflineplus">+	&lt;BANLkTi=6zDTsYymc+bUTwPOM2AohJD2wfA@mail.gmail.invalid&gt;</span>
<a href="#l88.29"></a><span id="l88.29" class="difflineplus">+Reply-To: FOO &lt;bar@foo.invalid&gt;</span>
<a href="#l88.30"></a><span id="l88.30"> List-Id: Help and discussion among users of GnuPG &lt;gnupg-users.gnupg.org&gt;</span>
<a href="#l88.31"></a><span id="l88.31"> Content-Type: text/plain; charset=&quot;UTF-8&quot;</span>
<a href="#l88.32"></a><span id="l88.32"> MIME-Version: 1.0</span>
<a href="#l88.33"></a><span id="l88.33"> </span>
<a href="#l88.34"></a><span id="l88.34"> Do not reply to this email.  You can add comments to this bug at</span>
<a href="#l88.35"></a><span id="l88.35"> https://bugzilla.mozilla.org/show_bug.cgi?id=397009</span>
<a href="#l88.36"></a><span id="l88.36"> </span>
<a href="#l88.37"></a><span id="l88.37"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l89.1"></a><span id="l89.1" class="difflineminus">--- a/mailnews/test/data/external-attach-test</span>
<a href="#l89.2"></a><span id="l89.2" class="difflineplus">+++ b/mailnews/test/data/external-attach-test</span>
<a href="#l89.3"></a><span id="l89.3" class="difflineat">@@ -1,14 +1,14 @@</span>
<a href="#l89.4"></a><span id="l89.4"> From - Fri Aug 26 16:47:38 2008</span>
<a href="#l89.5"></a><span id="l89.5"> X-Identity-Key: id2</span>
<a href="#l89.6"></a><span id="l89.6" class="difflineminus">-Message-ID: &lt;876TY.5030709@xxx.com&gt;</span>
<a href="#l89.7"></a><span id="l89.7" class="difflineplus">+Message-ID: &lt;876TY.5030709@example.com&gt;</span>
<a href="#l89.8"></a><span id="l89.8"> Date: Tue, 26 Aug 2009 17:18:59 -0700</span>
<a href="#l89.9"></a><span id="l89.9" class="difflineminus">-From: Foo Bar &lt;xxx@xxx.com&gt;</span>
<a href="#l89.10"></a><span id="l89.10" class="difflineminus">-Reply-To: xxx@xxx.com</span>
<a href="#l89.11"></a><span id="l89.11" class="difflineplus">+From: Foo Bar &lt;xxx@example.com&gt;</span>
<a href="#l89.12"></a><span id="l89.12" class="difflineplus">+Reply-To: xxx@example.com</span>
<a href="#l89.13"></a><span id="l89.13"> User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.1.3pre) Gecko/20090817 Shredder/3.0b4pre</span>
<a href="#l89.14"></a><span id="l89.14"> MIME-Version: 1.0</span>
<a href="#l89.15"></a><span id="l89.15"> To: asfd@asdf</span>
<a href="#l89.16"></a><span id="l89.16"> Subject: external attach test</span>
<a href="#l89.17"></a><span id="l89.17"> Content-Type: multipart/mixed;</span>
<a href="#l89.18"></a><span id="l89.18">  boundary=&quot;------------080903080202020605050108&quot;</span>
<a href="#l89.19"></a><span id="l89.19"> </span>
<a href="#l89.20"></a><span id="l89.20"> This is a multi-part message in MIME format.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l90.1"></a><span id="l90.1" class="difflineminus">--- a/mailnews/test/data/image-attach-test</span>
<a href="#l90.2"></a><span id="l90.2" class="difflineplus">+++ b/mailnews/test/data/image-attach-test</span>
<a href="#l90.3"></a><span id="l90.3" class="difflineat">@@ -1,14 +1,14 @@</span>
<a href="#l90.4"></a><span id="l90.4"> From - Fri May 20 16:47:38 2008</span>
<a href="#l90.5"></a><span id="l90.5"> X-Identity-Key: id2</span>
<a href="#l90.6"></a><span id="l90.6" class="difflineminus">-Message-ID: &lt;4A947F73.5030709@xxx.com&gt;</span>
<a href="#l90.7"></a><span id="l90.7" class="difflineplus">+Message-ID: &lt;4A947F73.5030709@example.com&gt;</span>
<a href="#l90.8"></a><span id="l90.8"> Date: Tue, 25 Aug 2009 17:18:59 -0700</span>
<a href="#l90.9"></a><span id="l90.9" class="difflineminus">-From: Foo Bar &lt;xxx@xxx.com&gt;</span>
<a href="#l90.10"></a><span id="l90.10" class="difflineminus">-Reply-To: xxx@xxx.com</span>
<a href="#l90.11"></a><span id="l90.11" class="difflineplus">+From: Foo Bar &lt;xxx@example.com&gt;</span>
<a href="#l90.12"></a><span id="l90.12" class="difflineplus">+Reply-To: xxx@example.com</span>
<a href="#l90.13"></a><span id="l90.13"> User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.1.3pre) Gecko/20090817 Shredder/3.0b4pre</span>
<a href="#l90.14"></a><span id="l90.14"> MIME-Version: 1.0</span>
<a href="#l90.15"></a><span id="l90.15"> To: asfd@asdf</span>
<a href="#l90.16"></a><span id="l90.16"> Subject: image attach test</span>
<a href="#l90.17"></a><span id="l90.17"> Content-Type: multipart/mixed;</span>
<a href="#l90.18"></a><span id="l90.18">  boundary=&quot;------------080903080202020605050108&quot;</span>
<a href="#l90.19"></a><span id="l90.19"> </span>
<a href="#l90.20"></a><span id="l90.20"> This is a multi-part message in MIME format.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l91.1"></a><span id="l91.1" class="difflineminus">--- a/mailnews/test/performance/bloat/mailnewsTestPrefs.js</span>
<a href="#l91.2"></a><span id="l91.2" class="difflineplus">+++ b/mailnews/test/performance/bloat/mailnewsTestPrefs.js</span>
<a href="#l91.3"></a><span id="l91.3" class="difflineat">@@ -11,31 +11,31 @@ user_pref(&quot;extensions.autoDisableScopes&quot;</span>
<a href="#l91.4"></a><span id="l91.4"> user_pref(&quot;mail.account.account1.server&quot;, &quot;server1&quot;);</span>
<a href="#l91.5"></a><span id="l91.5"> user_pref(&quot;mail.account.account2.identities&quot;, &quot;id1&quot;);</span>
<a href="#l91.6"></a><span id="l91.6"> user_pref(&quot;mail.account.account2.server&quot;, &quot;server2&quot;);</span>
<a href="#l91.7"></a><span id="l91.7"> user_pref(&quot;mail.accountmanager.accounts&quot;, &quot;account1,account2&quot;);</span>
<a href="#l91.8"></a><span id="l91.8"> user_pref(&quot;mail.accountmanager.defaultaccount&quot;, &quot;account2&quot;);</span>
<a href="#l91.9"></a><span id="l91.9"> user_pref(&quot;mail.accountmanager.localfoldersserver&quot;, &quot;server1&quot;);</span>
<a href="#l91.10"></a><span id="l91.10"> user_pref(&quot;mail.identity.id1.fullName&quot;, &quot;Tinderbox&quot;);</span>
<a href="#l91.11"></a><span id="l91.11"> user_pref(&quot;mail.identity.id1.smtpServer&quot;, &quot;smtp1&quot;);</span>
<a href="#l91.12"></a><span id="l91.12" class="difflineminus">-user_pref(&quot;mail.identity.id1.useremail&quot;, &quot;tinderbox@invalid.com&quot;);</span>
<a href="#l91.13"></a><span id="l91.13" class="difflineplus">+user_pref(&quot;mail.identity.id1.useremail&quot;, &quot;tinderbox@foo.invalid&quot;);</span>
<a href="#l91.14"></a><span id="l91.14"> user_pref(&quot;mail.identity.id1.valid&quot;, true);</span>
<a href="#l91.15"></a><span id="l91.15"> user_pref(&quot;mail.root.none-rel&quot;, &quot;[ProfD]Mail&quot;);</span>
<a href="#l91.16"></a><span id="l91.16"> user_pref(&quot;mail.root.pop3-rel&quot;, &quot;[ProfD]Mail&quot;);</span>
<a href="#l91.17"></a><span id="l91.17"> user_pref(&quot;mail.server.server1.directory-rel&quot;, &quot;[ProfD]Mail/Local Folders&quot;);</span>
<a href="#l91.18"></a><span id="l91.18"> user_pref(&quot;mail.server.server1.hostname&quot;, &quot;Local Folders&quot;);</span>
<a href="#l91.19"></a><span id="l91.19"> user_pref(&quot;mail.server.server1.name&quot;, &quot;Local Folders&quot;);</span>
<a href="#l91.20"></a><span id="l91.20"> user_pref(&quot;mail.server.server1.type&quot;, &quot;none&quot;);</span>
<a href="#l91.21"></a><span id="l91.21"> user_pref(&quot;mail.server.server1.userName&quot;, &quot;nobody&quot;);</span>
<a href="#l91.22"></a><span id="l91.22"> user_pref(&quot;mail.server.server2.check_new_mail&quot;, false);</span>
<a href="#l91.23"></a><span id="l91.23"> user_pref(&quot;mail.server.server2.directory-rel&quot;, &quot;[ProfD]Mail/tinderbox&quot;);</span>
<a href="#l91.24"></a><span id="l91.24"> user_pref(&quot;mail.server.server2.download_on_biff&quot;, true);</span>
<a href="#l91.25"></a><span id="l91.25"> user_pref(&quot;mail.server.server2.hostname&quot;, &quot;tinderbox&quot;);</span>
<a href="#l91.26"></a><span id="l91.26"> user_pref(&quot;mail.server.server2.login_at_startup&quot;, false);</span>
<a href="#l91.27"></a><span id="l91.27" class="difflineminus">-user_pref(&quot;mail.server.server2.name&quot;, &quot;tinderbox@invalid.com&quot;);</span>
<a href="#l91.28"></a><span id="l91.28" class="difflineplus">+user_pref(&quot;mail.server.server2.name&quot;, &quot;tinderbox@foo.invalid&quot;);</span>
<a href="#l91.29"></a><span id="l91.29"> user_pref(&quot;mail.server.server2.type&quot;, &quot;pop3&quot;);</span>
<a href="#l91.30"></a><span id="l91.30"> user_pref(&quot;mail.server.server2.userName&quot;, &quot;tinderbox&quot;);</span>
<a href="#l91.31"></a><span id="l91.31"> user_pref(&quot;mail.smtp.defaultserver&quot;, &quot;smtp1&quot;);</span>
<a href="#l91.32"></a><span id="l91.32"> user_pref(&quot;mail.smtpserver.smtp1.hostname&quot;, &quot;tinderbox&quot;);</span>
<a href="#l91.33"></a><span id="l91.33"> user_pref(&quot;mail.smtpserver.smtp1.username&quot;, &quot;tinderbox&quot;);</span>
<a href="#l91.34"></a><span id="l91.34"> user_pref(&quot;mail.smtpservers&quot;, &quot;smtp1&quot;);</span>
<a href="#l91.35"></a><span id="l91.35"> user_pref(&quot;mail.startup.enabledMailCheckOnce&quot;, true);</span>
<a href="#l91.36"></a><span id="l91.36"> user_pref(&quot;mailnews.start_page_override.mstone&quot;, &quot;ignore&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l92.1"></a><span id="l92.1" class="difflineminus">--- a/mailnews/test/resources/messageInjection.js</span>
<a href="#l92.2"></a><span id="l92.2" class="difflineplus">+++ b/mailnews/test/resources/messageInjection.js</span>
<a href="#l92.3"></a><span id="l92.3" class="difflineat">@@ -71,17 +71,17 @@ function configure_message_injection(aIn</span>
<a href="#l92.4"></a><span id="l92.4">     }</span>
<a href="#l92.5"></a><span id="l92.5"> </span>
<a href="#l92.6"></a><span id="l92.6">     let localAccount = acctMgr.FindAccountForServer(acctMgr.localFoldersServer);</span>
<a href="#l92.7"></a><span id="l92.7"> </span>
<a href="#l92.8"></a><span id="l92.8">     // We need an identity or we get angry warnings.</span>
<a href="#l92.9"></a><span id="l92.9">     let identity = acctMgr.createIdentity();</span>
<a href="#l92.10"></a><span id="l92.10">     // We need an email to protect against random code assuming it exists and</span>
<a href="#l92.11"></a><span id="l92.11">     // throwing exceptions.</span>
<a href="#l92.12"></a><span id="l92.12" class="difflineminus">-    identity.email = &quot;sender@nul.nul&quot;;</span>
<a href="#l92.13"></a><span id="l92.13" class="difflineplus">+    identity.email = &quot;sender@nul.invalid&quot;;</span>
<a href="#l92.14"></a><span id="l92.14">     localAccount.addIdentity(identity);</span>
<a href="#l92.15"></a><span id="l92.15">     localAccount.defaultIdentity = identity;</span>
<a href="#l92.16"></a><span id="l92.16"> </span>
<a href="#l92.17"></a><span id="l92.17">     mis.incomingServer = acctMgr.localFoldersServer;</span>
<a href="#l92.18"></a><span id="l92.18">     // Note: Inbox is not created automatically when there is no deferred server,</span>
<a href="#l92.19"></a><span id="l92.19">     // so we need to create it.</span>
<a href="#l92.20"></a><span id="l92.20">     mis.rootFolder = mis.incomingServer.rootMsgFolder;</span>
<a href="#l92.21"></a><span id="l92.21">     mis.rootFolder.createSubfolder(&quot;Inbox&quot;, null);</span>
<a href="#l92.22"></a><span id="l92.22" class="difflineat">@@ -123,17 +123,17 @@ function configure_message_injection(aIn</span>
<a href="#l92.23"></a><span id="l92.23">     // we need a local account for the IMAP server to have its sent messages in</span>
<a href="#l92.24"></a><span id="l92.24">     acctMgr.createLocalMailAccount();</span>
<a href="#l92.25"></a><span id="l92.25"> </span>
<a href="#l92.26"></a><span id="l92.26">     // We need an identity so that updateFolder doesn't fail</span>
<a href="#l92.27"></a><span id="l92.27">     let localAccount = acctMgr.createAccount();</span>
<a href="#l92.28"></a><span id="l92.28">     let identity = acctMgr.createIdentity();</span>
<a href="#l92.29"></a><span id="l92.29">     // We need an email to protect against random code assuming it exists and</span>
<a href="#l92.30"></a><span id="l92.30">     // throwing exceptions.</span>
<a href="#l92.31"></a><span id="l92.31" class="difflineminus">-    identity.email = &quot;sender@nul.nul&quot;;</span>
<a href="#l92.32"></a><span id="l92.32" class="difflineplus">+    identity.email = &quot;sender@nul.invalid&quot;;</span>
<a href="#l92.33"></a><span id="l92.33">     localAccount.addIdentity(identity);</span>
<a href="#l92.34"></a><span id="l92.34">     localAccount.defaultIdentity = identity;</span>
<a href="#l92.35"></a><span id="l92.35">     localAccount.incomingServer = mis.incomingServer;</span>
<a href="#l92.36"></a><span id="l92.36">     acctMgr.defaultAccount = localAccount;</span>
<a href="#l92.37"></a><span id="l92.37"> </span>
<a href="#l92.38"></a><span id="l92.38">     // Let's also have another account, using the same identity</span>
<a href="#l92.39"></a><span id="l92.39">     let imapAccount = acctMgr.createAccount();</span>
<a href="#l92.40"></a><span id="l92.40">     imapAccount.addIdentity(identity);</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

