<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 24621:448242e81ceb4e0e7e2a41b894b7c5add870288d</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 448242e81ceb4e0e7e2a41b894b7c5add870288d" />
<meta property="og:url" content="/comm-central/rev/448242e81ceb4e0e7e2a41b894b7c5add870288d" />
<meta property="og:description" content="Bug 1487832 - Port 1486739 - fix up mail/ for eslint comma-dangle rule. r=jorgk" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 448242e81ceb4e0e7e2a41b894b7c5add870288d 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/448242e81ceb4e0e7e2a41b894b7c5add870288d">shortlog</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/448242e81ceb4e0e7e2a41b894b7c5add870288d">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d">files</a> |
changeset |
<a href="/comm-central/raw-rev/448242e81ceb4e0e7e2a41b894b7c5add870288d">raw</a>  | <a href="/comm-central/archive/448242e81ceb4e0e7e2a41b894b7c5add870288d.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1487832">Bug 1487832</a> - Port 1486739 - fix up mail/ for eslint comma-dangle rule. r=jorgk
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#77;&#97;&#103;&#110;&#117;&#115;&#32;&#77;&#101;&#108;&#105;&#110;&#32;&#60;&#109;&#107;&#109;&#101;&#108;&#105;&#110;&#43;&#109;&#111;&#122;&#105;&#108;&#108;&#97;&#64;&#105;&#107;&#105;&#46;&#102;&#105;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 31 Aug 2018 23:41:01 +0300</td></tr>

<tr>
 <td>changeset 24621</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/448242e81ceb4e0e7e2a41b894b7c5add870288d">448242e81ceb4e0e7e2a41b894b7c5add870288d</a></td>
</tr>



<tr>
<td>parent 24620</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/ca3c8293178296e91daaa6c2952cbb719c94eb5c">ca3c8293178296e91daaa6c2952cbb719c94eb5c</a>
</td>
</tr>

<tr>
<td>child 24622</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/6a4de283730322e244ccd7690c31d1456c443af7">6a4de283730322e244ccd7690c31d1456c443af7</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=448242e81ceb4e0e7e2a41b894b7c5add870288d">14815</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Fri, 31 Aug 2018 22:54:15 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@6a4de2837303 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=6a4de283730322e244ccd7690c31d1456c443af7">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=6a4de283730322e244ccd7690c31d1456c443af7&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=6a4de283730322e244ccd7690c31d1456c443af7&newProject=comm-central&newRevision=448242e81ceb4e0e7e2a41b894b7c5add870288d&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=6a4de283730322e244ccd7690c31d1456c443af7&newProject=comm-central&newRevision=448242e81ceb4e0e7e2a41b894b7c5add870288d&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=6a4de283730322e244ccd7690c31d1456c443af7&newProject=comm-central&newRevision=448242e81ceb4e0e7e2a41b894b7c5add870288d&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28jorgk%29&revcount=50">jorgk</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1487832">1487832</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1486739">1486739</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1487832">Bug 1487832</a> - Port 1486739 - fix up mail/ for eslint comma-dangle rule. r=jorgk</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/about-support/content/aboutSupport.js">mail/components/about-support/content/aboutSupport.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/about-support/content/aboutSupport.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/about-support/content/aboutSupport.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/about-support/content/aboutSupport.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/about-support/content/aboutSupport.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/about-support/content/aboutSupport.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/about-support/content/accounts.js">mail/components/about-support/content/accounts.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/about-support/content/accounts.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/about-support/content/accounts.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/about-support/content/accounts.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/about-support/content/accounts.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/about-support/content/accounts.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/fetchhttp.js">mail/components/accountcreation/content/fetchhttp.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/fetchhttp.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/fetchhttp.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/fetchhttp.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/fetchhttp.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/fetchhttp.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/guessConfig.js">mail/components/accountcreation/content/guessConfig.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/guessConfig.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/guessConfig.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/guessConfig.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/guessConfig.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/guessConfig.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/readFromXML.js">mail/components/accountcreation/content/readFromXML.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/readFromXML.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/readFromXML.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/readFromXML.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/readFromXML.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/readFromXML.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/sanitizeDatatypes.js">mail/components/accountcreation/content/sanitizeDatatypes.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/sanitizeDatatypes.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/sanitizeDatatypes.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/sanitizeDatatypes.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/sanitizeDatatypes.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/sanitizeDatatypes.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/util.js">mail/components/accountcreation/content/util.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/util.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/util.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/util.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/util.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/accountcreation/content/util.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/.eslintrc.js">mail/components/addrbook/content/.eslintrc.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/.eslintrc.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/.eslintrc.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/.eslintrc.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/.eslintrc.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/.eslintrc.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abCard.js">mail/components/addrbook/content/abCard.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abCard.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abCard.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abCard.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abCard.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abCard.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abCardView.js">mail/components/addrbook/content/abCardView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abCardView.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abCardView.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abCardView.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abCardView.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abCardView.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abCommon.js">mail/components/addrbook/content/abCommon.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abCommon.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abCommon.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abCommon.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abCommon.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abCommon.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abTrees.js">mail/components/addrbook/content/abTrees.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abTrees.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abTrees.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abTrees.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abTrees.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/abTrees.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/addressbook.js">mail/components/addrbook/content/addressbook.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/addressbook.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/addressbook.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/addressbook.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/addressbook.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/addrbook/content/addressbook.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/devtools/devtools-loader.js">mail/components/devtools/devtools-loader.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/devtools/devtools-loader.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/devtools/devtools-loader.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/devtools/devtools-loader.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/devtools/devtools-loader.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/devtools/devtools-loader.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/devtools/tb-root-actor.js">mail/components/devtools/tb-root-actor.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/devtools/tb-root-actor.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/devtools/tb-root-actor.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/devtools/tb-root-actor.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/devtools/tb-root-actor.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/devtools/tb-root-actor.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/downloads/content/aboutDownloads.js">mail/components/downloads/content/aboutDownloads.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/downloads/content/aboutDownloads.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/downloads/content/aboutDownloads.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/downloads/content/aboutDownloads.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/downloads/content/aboutDownloads.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/downloads/content/aboutDownloads.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/child/ext-mail.js">mail/components/extensions/child/ext-mail.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/child/ext-mail.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/child/ext-mail.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/child/ext-mail.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/child/ext-mail.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/child/ext-mail.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-legacy.js">mail/components/extensions/parent/ext-legacy.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-legacy.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-legacy.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-legacy.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-legacy.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-legacy.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-mail.js">mail/components/extensions/parent/ext-mail.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-mail.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-mail.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-mail.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-mail.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-mail.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-tabs.js">mail/components/extensions/parent/ext-tabs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-tabs.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-tabs.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-tabs.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-tabs.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-tabs.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-windows.js">mail/components/extensions/parent/ext-windows.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-windows.js">file</a> |
<a href="/comm-central/annotate/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-windows.js">annotate</a> |
<a href="/comm-central/diff/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-windows.js">diff</a> |
<a href="/comm-central/comparison/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-windows.js">comparison</a> |
<a href="/comm-central/log/448242e81ceb4e0e7e2a41b894b7c5add870288d/mail/components/extensions/parent/ext-windows.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/components/about-support/content/aboutSupport.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/components/about-support/content/aboutSupport.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -214,19 +214,19 @@ var snapshotFormatters = {</span>
<a href="#l1.4"></a><span id="l1.4">       } else {</span>
<a href="#l1.5"></a><span id="l1.5">         let minutesPassed = Math.max(Math.round(timePassed / (60 * 1000)), 1);</span>
<a href="#l1.6"></a><span id="l1.6">         let minutesPassedString = strings.GetStringFromName(&quot;crashesTimeMinutes&quot;);</span>
<a href="#l1.7"></a><span id="l1.7">         formattedDate = PluralForm.get(minutesPassed, minutesPassedString)</span>
<a href="#l1.8"></a><span id="l1.8">                                   .replace(&quot;#1&quot;, minutesPassed);</span>
<a href="#l1.9"></a><span id="l1.9">       }</span>
<a href="#l1.10"></a><span id="l1.10">       return $.new(&quot;tr&quot;, [</span>
<a href="#l1.11"></a><span id="l1.11">         $.new(&quot;td&quot;, [</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-          $.new(&quot;a&quot;, crash.id, null, {href: reportURL + crash.id})</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+          $.new(&quot;a&quot;, crash.id, null, {href: reportURL + crash.id}),</span>
<a href="#l1.14"></a><span id="l1.14">         ]),</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineminus">-        $.new(&quot;td&quot;, formattedDate)</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineplus">+        $.new(&quot;td&quot;, formattedDate),</span>
<a href="#l1.17"></a><span id="l1.17">       ]);</span>
<a href="#l1.18"></a><span id="l1.18">     }));</span>
<a href="#l1.19"></a><span id="l1.19">   },</span>
<a href="#l1.20"></a><span id="l1.20"> </span>
<a href="#l1.21"></a><span id="l1.21">   extensions: function extensions(data) {</span>
<a href="#l1.22"></a><span id="l1.22">     $.append($(&quot;extensions-tbody&quot;), data.map(function(extension) {</span>
<a href="#l1.23"></a><span id="l1.23">       return $.new(&quot;tr&quot;, [</span>
<a href="#l1.24"></a><span id="l1.24">         $.new(&quot;td&quot;, extension.name),</span>
<a href="#l1.25"></a><span id="l1.25" class="difflineat">@@ -559,17 +559,17 @@ var snapshotFormatters = {</span>
<a href="#l1.26"></a><span id="l1.26">       }</span>
<a href="#l1.27"></a><span id="l1.27">       addRow(id, &quot;gpuActive&quot;, strings.GetStringFromName(active));</span>
<a href="#l1.28"></a><span id="l1.28">       addRows(id, trs);</span>
<a href="#l1.29"></a><span id="l1.29">     }</span>
<a href="#l1.30"></a><span id="l1.30">     showGpu(&quot;gpu-1&quot;, &quot;&quot;);</span>
<a href="#l1.31"></a><span id="l1.31">     showGpu(&quot;gpu-2&quot;, &quot;2&quot;);</span>
<a href="#l1.32"></a><span id="l1.32"> </span>
<a href="#l1.33"></a><span id="l1.33">     // Remove adapter keys.</span>
<a href="#l1.34"></a><span id="l1.34" class="difflineminus">-    for (let [prop, /* key */] of adapterKeys) {</span>
<a href="#l1.35"></a><span id="l1.35" class="difflineplus">+    for (let [prop /* key */] of adapterKeys) {</span>
<a href="#l1.36"></a><span id="l1.36">       delete data[prop];</span>
<a href="#l1.37"></a><span id="l1.37">       delete data[prop + &quot;2&quot;];</span>
<a href="#l1.38"></a><span id="l1.38">     }</span>
<a href="#l1.39"></a><span id="l1.39">     delete data.isGPU2Active;</span>
<a href="#l1.40"></a><span id="l1.40"> </span>
<a href="#l1.41"></a><span id="l1.41">     let featureLog = data.featureLog;</span>
<a href="#l1.42"></a><span id="l1.42">     delete data.featureLog;</span>
<a href="#l1.43"></a><span id="l1.43"> </span>
<a href="#l1.44"></a><span id="l1.44" class="difflineat">@@ -787,17 +787,17 @@ var snapshotFormatters = {</span>
<a href="#l1.45"></a><span id="l1.45"> </span>
<a href="#l1.46"></a><span id="l1.46">   libraryVersions: function libraryVersions(data) {</span>
<a href="#l1.47"></a><span id="l1.47">     let strings = stringBundle();</span>
<a href="#l1.48"></a><span id="l1.48">     let trs = [</span>
<a href="#l1.49"></a><span id="l1.49">       $.new(&quot;tr&quot;, [</span>
<a href="#l1.50"></a><span id="l1.50">         $.new(&quot;th&quot;, &quot;&quot;),</span>
<a href="#l1.51"></a><span id="l1.51">         $.new(&quot;th&quot;, strings.GetStringFromName(&quot;minLibVersions&quot;)),</span>
<a href="#l1.52"></a><span id="l1.52">         $.new(&quot;th&quot;, strings.GetStringFromName(&quot;loadedLibVersions&quot;)),</span>
<a href="#l1.53"></a><span id="l1.53" class="difflineminus">-      ])</span>
<a href="#l1.54"></a><span id="l1.54" class="difflineplus">+      ]),</span>
<a href="#l1.55"></a><span id="l1.55">     ];</span>
<a href="#l1.56"></a><span id="l1.56">     sortedArrayFromObject(data).forEach(</span>
<a href="#l1.57"></a><span id="l1.57">       function([name, val]) {</span>
<a href="#l1.58"></a><span id="l1.58">         trs.push($.new(&quot;tr&quot;, [</span>
<a href="#l1.59"></a><span id="l1.59">           $.new(&quot;td&quot;, name),</span>
<a href="#l1.60"></a><span id="l1.60">           $.new(&quot;td&quot;, val.minVersion),</span>
<a href="#l1.61"></a><span id="l1.61">           $.new(&quot;td&quot;, val.version),</span>
<a href="#l1.62"></a><span id="l1.62">         ]));</span>
<a href="#l1.63"></a><span id="l1.63" class="difflineat">@@ -874,17 +874,17 @@ var snapshotFormatters = {</span>
<a href="#l1.64"></a><span id="l1.64">       JSON.stringify(data.localeService.regionalPrefs);</span>
<a href="#l1.65"></a><span id="l1.65">     $(&quot;intl-locale-default&quot;).textContent =</span>
<a href="#l1.66"></a><span id="l1.66">       JSON.stringify(data.localeService.defaultLocale);</span>
<a href="#l1.67"></a><span id="l1.67"> </span>
<a href="#l1.68"></a><span id="l1.68">     $(&quot;intl-osprefs-systemlocales&quot;).textContent =</span>
<a href="#l1.69"></a><span id="l1.69">       JSON.stringify(data.osPrefs.systemLocales);</span>
<a href="#l1.70"></a><span id="l1.70">     $(&quot;intl-osprefs-regionalprefs&quot;).textContent =</span>
<a href="#l1.71"></a><span id="l1.71">       JSON.stringify(data.osPrefs.regionalPrefsLocales);</span>
<a href="#l1.72"></a><span id="l1.72" class="difflineminus">-  }</span>
<a href="#l1.73"></a><span id="l1.73" class="difflineplus">+  },</span>
<a href="#l1.74"></a><span id="l1.74"> };</span>
<a href="#l1.75"></a><span id="l1.75"> </span>
<a href="#l1.76"></a><span id="l1.76"> var $ = document.getElementById.bind(document);</span>
<a href="#l1.77"></a><span id="l1.77"> </span>
<a href="#l1.78"></a><span id="l1.78"> $.new = function $_new(tag, textContentOrChildren, className, attributes) {</span>
<a href="#l1.79"></a><span id="l1.79">   let elt = document.createElement(tag);</span>
<a href="#l1.80"></a><span id="l1.80">   if (className)</span>
<a href="#l1.81"></a><span id="l1.81">     elt.className = className;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/components/about-support/content/accounts.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/components/about-support/content/accounts.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -37,17 +37,17 @@ var gAuthMethodProperties = new Map([</span>
<a href="#l2.4"></a><span id="l2.4">   [ Ci.nsMsgAuthMethod.old,               &quot;authOld&quot; ],</span>
<a href="#l2.5"></a><span id="l2.5">   [ Ci.nsMsgAuthMethod.passwordCleartext, &quot;authPasswordCleartextViaSSL&quot; ],</span>
<a href="#l2.6"></a><span id="l2.6">   [ Ci.nsMsgAuthMethod.passwordEncrypted, &quot;authPasswordEncrypted&quot; ],</span>
<a href="#l2.7"></a><span id="l2.7">   [ Ci.nsMsgAuthMethod.GSSAPI,            &quot;authKerberos&quot; ],</span>
<a href="#l2.8"></a><span id="l2.8">   [ Ci.nsMsgAuthMethod.NTLM,              &quot;authNTLM&quot; ],</span>
<a href="#l2.9"></a><span id="l2.9">   [ Ci.nsMsgAuthMethod.External,          &quot;authExternal&quot; ],</span>
<a href="#l2.10"></a><span id="l2.10">   [ Ci.nsMsgAuthMethod.secure,            &quot;authAnySecure&quot; ],</span>
<a href="#l2.11"></a><span id="l2.11">   [ Ci.nsMsgAuthMethod.anything,          &quot;authAny&quot; ],</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-  [ Ci.nsMsgAuthMethod.OAuth2,            &quot;authOAuth2&quot; ]</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+  [ Ci.nsMsgAuthMethod.OAuth2,            &quot;authOAuth2&quot; ],</span>
<a href="#l2.14"></a><span id="l2.14"> ]);</span>
<a href="#l2.15"></a><span id="l2.15"> </span>
<a href="#l2.16"></a><span id="l2.16"> var AboutSupport = {</span>
<a href="#l2.17"></a><span id="l2.17">   /**</span>
<a href="#l2.18"></a><span id="l2.18">    * Gets details about SMTP servers for a given nsIMsgAccount.</span>
<a href="#l2.19"></a><span id="l2.19">    *</span>
<a href="#l2.20"></a><span id="l2.20">    * @returns An array of records, each record containing the name and other details</span>
<a href="#l2.21"></a><span id="l2.21">    *          about one SMTP server.</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineat">@@ -145,17 +145,17 @@ var AboutSupport = {</span>
<a href="#l2.23"></a><span id="l2.23">                            gAuthMethods[aIndex] : aIndex);</span>
<a href="#l2.24"></a><span id="l2.24">     if (gAuthMethodProperties.has(parseInt(aIndex))) {</span>
<a href="#l2.25"></a><span id="l2.25">       prettyAuthMethod =</span>
<a href="#l2.26"></a><span id="l2.26">         gMessengerBundle.GetStringFromName(gAuthMethodProperties.get(parseInt(aIndex)));</span>
<a href="#l2.27"></a><span id="l2.27">     } else {</span>
<a href="#l2.28"></a><span id="l2.28">       prettyAuthMethod = plainAuthMethod;</span>
<a href="#l2.29"></a><span id="l2.29">     }</span>
<a href="#l2.30"></a><span id="l2.30">     return {localized: prettyAuthMethod, neutral: plainAuthMethod};</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-  }</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+  },</span>
<a href="#l2.33"></a><span id="l2.33"> };</span>
<a href="#l2.34"></a><span id="l2.34"> </span>
<a href="#l2.35"></a><span id="l2.35"> function createParentElement(tagName, childElems) {</span>
<a href="#l2.36"></a><span id="l2.36">   let elem = document.createElement(tagName);</span>
<a href="#l2.37"></a><span id="l2.37">   appendChildren(elem, childElems);</span>
<a href="#l2.38"></a><span id="l2.38">   return elem;</span>
<a href="#l2.39"></a><span id="l2.39"> }</span>
<a href="#l2.40"></a><span id="l2.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/components/accountcreation/content/fetchhttp.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/components/accountcreation/content/fetchhttp.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -209,17 +209,17 @@ FetchHTTP.prototype =</span>
<a href="#l3.4"></a><span id="l3.4">   },</span>
<a href="#l3.5"></a><span id="l3.5">   /**</span>
<a href="#l3.6"></a><span id="l3.6">    * Allows caller or lib to be notified when the call is done.</span>
<a href="#l3.7"></a><span id="l3.7">    * This is useful to enable and disable a Cancel button in the UI,</span>
<a href="#l3.8"></a><span id="l3.8">    * which allows to cancel the network request.</span>
<a href="#l3.9"></a><span id="l3.9">    */</span>
<a href="#l3.10"></a><span id="l3.10">   setFinishedCallback(finishedCallback) {</span>
<a href="#l3.11"></a><span id="l3.11">     this._finishedCallback = finishedCallback;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-  }</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+  },</span>
<a href="#l3.14"></a><span id="l3.14"> };</span>
<a href="#l3.15"></a><span id="l3.15"> </span>
<a href="#l3.16"></a><span id="l3.16"> function CancelledException(msg) {</span>
<a href="#l3.17"></a><span id="l3.17">   Exception.call(this, msg);</span>
<a href="#l3.18"></a><span id="l3.18"> }</span>
<a href="#l3.19"></a><span id="l3.19"> CancelledException.prototype = Object.create(Exception.prototype);</span>
<a href="#l3.20"></a><span id="l3.20"> CancelledException.prototype.constructor = CancelledException;</span>
<a href="#l3.21"></a><span id="l3.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/components/accountcreation/content/guessConfig.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/components/accountcreation/content/guessConfig.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -97,17 +97,17 @@ function guessConfig(domain, progressCal</span>
<a href="#l4.4"></a><span id="l4.4">     resultConfig.outgoing.port = 587;</span>
<a href="#l4.5"></a><span id="l4.5">     resultConfig.outgoing.auth = Ci.nsMsgAuthMethod.passwordCleartext;</span>
<a href="#l4.6"></a><span id="l4.6">     resultConfig.incomingAlternatives.push({</span>
<a href="#l4.7"></a><span id="l4.7">       hostname: &quot;mail.&quot; + domain,</span>
<a href="#l4.8"></a><span id="l4.8">       username: resultConfig.identity.emailAddress,</span>
<a href="#l4.9"></a><span id="l4.9">       type: &quot;pop3&quot;,</span>
<a href="#l4.10"></a><span id="l4.10">       port: 110,</span>
<a href="#l4.11"></a><span id="l4.11">       socketType: 3,</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-      auth: Ci.nsMsgAuthMethod.passwordCleartext</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+      auth: Ci.nsMsgAuthMethod.passwordCleartext,</span>
<a href="#l4.14"></a><span id="l4.14">     });</span>
<a href="#l4.15"></a><span id="l4.15">     successCallback(resultConfig);</span>
<a href="#l4.16"></a><span id="l4.16">     return null;</span>
<a href="#l4.17"></a><span id="l4.17">   }</span>
<a href="#l4.18"></a><span id="l4.18">   var progress = function(thisTry) {</span>
<a href="#l4.19"></a><span id="l4.19">     progressCallback(protocolToString(thisTry.protocol), thisTry.hostname,</span>
<a href="#l4.20"></a><span id="l4.20">                      thisTry.port, sslConvertToSocketType(thisTry.ssl), false,</span>
<a href="#l4.21"></a><span id="l4.21">                      resultConfig);</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineat">@@ -1024,17 +1024,17 @@ function SocketUtil(hostname, port, ssl,</span>
<a href="#l4.23"></a><span id="l4.23">           this.data.push(inputData);</span>
<a href="#l4.24"></a><span id="l4.24">           if (index &lt; commands.length) {</span>
<a href="#l4.25"></a><span id="l4.25">             // Send the next request to the server.</span>
<a href="#l4.26"></a><span id="l4.26">             let outputData = commands[index++];</span>
<a href="#l4.27"></a><span id="l4.27">             outstream.write(outputData, outputData.length);</span>
<a href="#l4.28"></a><span id="l4.28">           }</span>
<a href="#l4.29"></a><span id="l4.29">         }</span>
<a href="#l4.30"></a><span id="l4.30">       } catch (e) { _error(e); }</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">-    }</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+    },</span>
<a href="#l4.33"></a><span id="l4.33">   };</span>
<a href="#l4.34"></a><span id="l4.34"> </span>
<a href="#l4.35"></a><span id="l4.35">   try {</span>
<a href="#l4.36"></a><span id="l4.36">     var pump = Cc[&quot;@mozilla.org/network/input-stream-pump;1&quot;]</span>
<a href="#l4.37"></a><span id="l4.37">         .createInstance(Ci.nsIInputStreamPump);</span>
<a href="#l4.38"></a><span id="l4.38"> </span>
<a href="#l4.39"></a><span id="l4.39">     pump.init(stream, 0, 0, false);</span>
<a href="#l4.40"></a><span id="l4.40">     pump.asyncRead(dataListener, null);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/components/accountcreation/content/readFromXML.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/components/accountcreation/content/readFromXML.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -211,17 +211,17 @@ function readFromXML(clientConfigXML) {</span>
<a href="#l5.4"></a><span id="l5.4"> </span>
<a href="#l5.5"></a><span id="l5.5">   d.inputFields = [];</span>
<a href="#l5.6"></a><span id="l5.6">   for (let inputField of array_or_undef(xml.$inputField)) {</span>
<a href="#l5.7"></a><span id="l5.7">     try {</span>
<a href="#l5.8"></a><span id="l5.8">       var fieldset =</span>
<a href="#l5.9"></a><span id="l5.9">       {</span>
<a href="#l5.10"></a><span id="l5.10">         varname: sanitize.alphanumdash(inputField[&quot;@key&quot;]).toUpperCase(),</span>
<a href="#l5.11"></a><span id="l5.11">         displayName: sanitize.label(inputField[&quot;@label&quot;]),</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-        exampleValue: sanitize.label(inputField.value)</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+        exampleValue: sanitize.label(inputField.value),</span>
<a href="#l5.14"></a><span id="l5.14">       };</span>
<a href="#l5.15"></a><span id="l5.15">       d.inputFields.push(fieldset);</span>
<a href="#l5.16"></a><span id="l5.16">     } catch (e) { logException(e); } // for now, don't throw,</span>
<a href="#l5.17"></a><span id="l5.17">         // because we don't support custom fields yet anyways.</span>
<a href="#l5.18"></a><span id="l5.18">   }</span>
<a href="#l5.19"></a><span id="l5.19"> </span>
<a href="#l5.20"></a><span id="l5.20">   return d;</span>
<a href="#l5.21"></a><span id="l5.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/components/accountcreation/content/sanitizeDatatypes.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/components/accountcreation/content/sanitizeDatatypes.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -172,17 +172,17 @@ var sanitize =</span>
<a href="#l6.4"></a><span id="l6.4">     for (var inputValue in mapping) {</span>
<a href="#l6.5"></a><span id="l6.5">       if (inputValue == unchecked)</span>
<a href="#l6.6"></a><span id="l6.6">         return mapping[inputValue];</span>
<a href="#l6.7"></a><span id="l6.7">     }</span>
<a href="#l6.8"></a><span id="l6.8">     // value is bad</span>
<a href="#l6.9"></a><span id="l6.9">     if (typeof(defaultValue) == &quot;undefined&quot;)</span>
<a href="#l6.10"></a><span id="l6.10">       throw new MalformedException(&quot;allowed_value.error&quot;, unchecked);</span>
<a href="#l6.11"></a><span id="l6.11">     return defaultValue;</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-  }</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+  },</span>
<a href="#l6.14"></a><span id="l6.14"> };</span>
<a href="#l6.15"></a><span id="l6.15"> </span>
<a href="#l6.16"></a><span id="l6.16"> function MalformedException(msgID, uncheckedBadValue) {</span>
<a href="#l6.17"></a><span id="l6.17">   var stringBundle = getStringBundle(</span>
<a href="#l6.18"></a><span id="l6.18">       &quot;chrome://messenger/locale/accountCreationUtil.properties&quot;);</span>
<a href="#l6.19"></a><span id="l6.19">   var msg = stringBundle.GetStringFromName(msgID);</span>
<a href="#l6.20"></a><span id="l6.20">   if (kDebug)</span>
<a href="#l6.21"></a><span id="l6.21">     msg += &quot; (bad value: &quot; + uncheckedBadValue + &quot;)&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/components/accountcreation/content/util.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/components/accountcreation/content/util.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -116,17 +116,17 @@ function Exception(msg) {</span>
<a href="#l7.4"></a><span id="l7.4"> }</span>
<a href="#l7.5"></a><span id="l7.5"> Exception.prototype =</span>
<a href="#l7.6"></a><span id="l7.6"> {</span>
<a href="#l7.7"></a><span id="l7.7">   get message() {</span>
<a href="#l7.8"></a><span id="l7.8">     return this._message;</span>
<a href="#l7.9"></a><span id="l7.9">   },</span>
<a href="#l7.10"></a><span id="l7.10">   toString() {</span>
<a href="#l7.11"></a><span id="l7.11">     return this._message;</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-  }</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+  },</span>
<a href="#l7.14"></a><span id="l7.14"> };</span>
<a href="#l7.15"></a><span id="l7.15"> </span>
<a href="#l7.16"></a><span id="l7.16"> function NotReached(msg) {</span>
<a href="#l7.17"></a><span id="l7.17">   Exception.call(this, msg); // call super constructor</span>
<a href="#l7.18"></a><span id="l7.18">   logException(this);</span>
<a href="#l7.19"></a><span id="l7.19"> }</span>
<a href="#l7.20"></a><span id="l7.20"> // Make NotReached extend Exception.</span>
<a href="#l7.21"></a><span id="l7.21"> NotReached.prototype = Object.create(Exception.prototype);</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineat">@@ -137,17 +137,17 @@ NotReached.prototype.constructor = NotRe</span>
<a href="#l7.23"></a><span id="l7.23">  * The async function will return an object of this type (a subtype)</span>
<a href="#l7.24"></a><span id="l7.24">  * and you can call cancel() when you feel like killing the function.</span>
<a href="#l7.25"></a><span id="l7.25">  */</span>
<a href="#l7.26"></a><span id="l7.26"> function Abortable() {</span>
<a href="#l7.27"></a><span id="l7.27"> }</span>
<a href="#l7.28"></a><span id="l7.28"> Abortable.prototype =</span>
<a href="#l7.29"></a><span id="l7.29"> {</span>
<a href="#l7.30"></a><span id="l7.30">   cancel() {</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-  }</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+  },</span>
<a href="#l7.33"></a><span id="l7.33"> };</span>
<a href="#l7.34"></a><span id="l7.34"> </span>
<a href="#l7.35"></a><span id="l7.35"> /**</span>
<a href="#l7.36"></a><span id="l7.36">  * Utility implementation, for allowing to abort a setTimeout.</span>
<a href="#l7.37"></a><span id="l7.37">  * Use like: return new TimeoutAbortable(setTimeout(function(){ ... }, 0));</span>
<a href="#l7.38"></a><span id="l7.38">  * @param setTimeoutID {Integer}  Return value of setTimeout()</span>
<a href="#l7.39"></a><span id="l7.39">  */</span>
<a href="#l7.40"></a><span id="l7.40"> function TimeoutAbortable(setTimeoutID) {</span>
<a href="#l7.41"></a><span id="l7.41" class="difflineat">@@ -183,17 +183,17 @@ SuccessiveAbortable.prototype = {</span>
<a href="#l7.42"></a><span id="l7.42">   set current(abortable) {</span>
<a href="#l7.43"></a><span id="l7.43">     assert(abortable instanceof Abortable || abortable == null,</span>
<a href="#l7.44"></a><span id="l7.44">         &quot;need an Abortable object (or null)&quot;);</span>
<a href="#l7.45"></a><span id="l7.45">     this._current = abortable;</span>
<a href="#l7.46"></a><span id="l7.46">   },</span>
<a href="#l7.47"></a><span id="l7.47">   cancel() {</span>
<a href="#l7.48"></a><span id="l7.48">     if (this._current)</span>
<a href="#l7.49"></a><span id="l7.49">       this._current.cancel();</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineminus">-  }</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineplus">+  },</span>
<a href="#l7.52"></a><span id="l7.52"> };</span>
<a href="#l7.53"></a><span id="l7.53"> </span>
<a href="#l7.54"></a><span id="l7.54"> function deepCopy(org) {</span>
<a href="#l7.55"></a><span id="l7.55">   if (typeof(org) == &quot;undefined&quot;)</span>
<a href="#l7.56"></a><span id="l7.56">     return undefined;</span>
<a href="#l7.57"></a><span id="l7.57">   if (org == null)</span>
<a href="#l7.58"></a><span id="l7.58">     return null;</span>
<a href="#l7.59"></a><span id="l7.59">   if (typeof(org) == &quot;string&quot;)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/components/addrbook/content/.eslintrc.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/components/addrbook/content/.eslintrc.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -45,10 +45,10 @@ module.exports = { // eslint-disable-lin</span>
<a href="#l8.4"></a><span id="l8.4">     &quot;GetSelectedAbCards&quot;: true,</span>
<a href="#l8.5"></a><span id="l8.5">     &quot;GetSelectedAddresses&quot;: true,</span>
<a href="#l8.6"></a><span id="l8.6">     &quot;GetSelectedCardIndex&quot;: true,</span>
<a href="#l8.7"></a><span id="l8.7">     &quot;GetSelectedCardTypes&quot;: true,</span>
<a href="#l8.8"></a><span id="l8.8">     &quot;ResultsPaneController&quot;: true,</span>
<a href="#l8.9"></a><span id="l8.9">     &quot;SelectFirstCard&quot;: true,</span>
<a href="#l8.10"></a><span id="l8.10">     &quot;SetAbView&quot;: true,</span>
<a href="#l8.11"></a><span id="l8.11">     &quot;SortAndUpdateIndicators&quot;: true,</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-  }</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+  },</span>
<a href="#l8.14"></a><span id="l8.14"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/components/addrbook/content/abCard.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/components/addrbook/content/abCard.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -60,17 +60,17 @@ var kVcardFields =</span>
<a href="#l9.4"></a><span id="l9.4">          [&quot;Gtalk&quot;, &quot;_GoogleTalk&quot;],</span>
<a href="#l9.5"></a><span id="l9.5">          [&quot;AIM&quot;, &quot;_AimScreenName&quot;],</span>
<a href="#l9.6"></a><span id="l9.6">          [&quot;Yahoo&quot;, &quot;_Yahoo&quot;],</span>
<a href="#l9.7"></a><span id="l9.7">          [&quot;Skype&quot;, &quot;_Skype&quot;],</span>
<a href="#l9.8"></a><span id="l9.8">          [&quot;QQ&quot;, &quot;_QQ&quot;],</span>
<a href="#l9.9"></a><span id="l9.9">          [&quot;MSN&quot;, &quot;_MSN&quot;],</span>
<a href="#l9.10"></a><span id="l9.10">          [&quot;ICQ&quot;, &quot;_ICQ&quot;],</span>
<a href="#l9.11"></a><span id="l9.11">          [&quot;XMPP&quot;, &quot;_JabberId&quot;],</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-         [&quot;IRC&quot;, &quot;_IRC&quot;]</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+         [&quot;IRC&quot;, &quot;_IRC&quot;],</span>
<a href="#l9.14"></a><span id="l9.14">         ];</span>
<a href="#l9.15"></a><span id="l9.15"> </span>
<a href="#l9.16"></a><span id="l9.16"> var gEditCard;</span>
<a href="#l9.17"></a><span id="l9.17"> var gOnSaveListeners = [];</span>
<a href="#l9.18"></a><span id="l9.18"> var gOnLoadListeners = [];</span>
<a href="#l9.19"></a><span id="l9.19"> var gOkCallback = null;</span>
<a href="#l9.20"></a><span id="l9.20"> var gHideABPicker = false;</span>
<a href="#l9.21"></a><span id="l9.21"> var gPhotoHandlers = {};</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineat">@@ -1131,17 +1131,17 @@ var gPhotoDownloadUI = (function() {</span>
<a href="#l9.23"></a><span id="l9.23">     elProgressbar.value = percent;</span>
<a href="#l9.24"></a><span id="l9.24">     elProgressLabel.value = gAddressBookBundle.getString(&quot;stateImageSave&quot;);</span>
<a href="#l9.25"></a><span id="l9.25">   }</span>
<a href="#l9.26"></a><span id="l9.26"> </span>
<a href="#l9.27"></a><span id="l9.27">   return {</span>
<a href="#l9.28"></a><span id="l9.28">     onStart,</span>
<a href="#l9.29"></a><span id="l9.29">     onSuccess,</span>
<a href="#l9.30"></a><span id="l9.30">     onError,</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-    onProgress</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+    onProgress,</span>
<a href="#l9.33"></a><span id="l9.33">   };</span>
<a href="#l9.34"></a><span id="l9.34"> })();</span>
<a href="#l9.35"></a><span id="l9.35"> </span>
<a href="#l9.36"></a><span id="l9.36"> /* A photo handler defines the behaviour of the contact editor</span>
<a href="#l9.37"></a><span id="l9.37">  * for a particular photo type. Each photo handler must implement</span>
<a href="#l9.38"></a><span id="l9.38">  * the following interface:</span>
<a href="#l9.39"></a><span id="l9.39">  *</span>
<a href="#l9.40"></a><span id="l9.40">  * onLoad: function(aCard, aDocument):</span>
<a href="#l9.41"></a><span id="l9.41" class="difflineat">@@ -1200,17 +1200,17 @@ var genericPhotoHandler = {</span>
<a href="#l9.42"></a><span id="l9.42">   onSave(aCard, aDocument) {</span>
<a href="#l9.43"></a><span id="l9.43">     // XXX TODO: this ignores any other value from the generic photos</span>
<a href="#l9.44"></a><span id="l9.44">     // menulist than &quot;default&quot;.</span>
<a href="#l9.45"></a><span id="l9.45"> </span>
<a href="#l9.46"></a><span id="l9.46">     // Update contact</span>
<a href="#l9.47"></a><span id="l9.47">     aCard.setProperty(&quot;PhotoName&quot;, &quot;&quot;);</span>
<a href="#l9.48"></a><span id="l9.48">     aCard.setProperty(&quot;PhotoURI&quot;, &quot;&quot;);</span>
<a href="#l9.49"></a><span id="l9.49">     return true;</span>
<a href="#l9.50"></a><span id="l9.50" class="difflineminus">-  }</span>
<a href="#l9.51"></a><span id="l9.51" class="difflineplus">+  },</span>
<a href="#l9.52"></a><span id="l9.52"> };</span>
<a href="#l9.53"></a><span id="l9.53"> </span>
<a href="#l9.54"></a><span id="l9.54"> var filePhotoHandler = {</span>
<a href="#l9.55"></a><span id="l9.55">   onLoad(aCard, aDocument) {</span>
<a href="#l9.56"></a><span id="l9.56">     let photoURI = aCard.getProperty(&quot;PhotoURI&quot;, &quot;&quot;);</span>
<a href="#l9.57"></a><span id="l9.57">     let file;</span>
<a href="#l9.58"></a><span id="l9.58">     try {</span>
<a href="#l9.59"></a><span id="l9.59">       // The original file may not exist anymore, but we still display it.</span>
<a href="#l9.60"></a><span id="l9.60" class="difflineat">@@ -1282,17 +1282,17 @@ var filePhotoHandler = {</span>
<a href="#l9.61"></a><span id="l9.61">                             .QueryInterface(Ci.nsIFileProtocolHandler)</span>
<a href="#l9.62"></a><span id="l9.62">                             .getURLSpecFromFile(photoFile);</span>
<a href="#l9.63"></a><span id="l9.63">     if (photoFile) {</span>
<a href="#l9.64"></a><span id="l9.64">       photoElem.style.backgroundImage = &quot;url(moz-icon://&quot; + photoSpec + &quot;?size=16)&quot;;</span>
<a href="#l9.65"></a><span id="l9.65">       photoElem.value = photoFile.leafName;</span>
<a href="#l9.66"></a><span id="l9.66">     } else {</span>
<a href="#l9.67"></a><span id="l9.67">       photoElem.value = &quot;&quot;;</span>
<a href="#l9.68"></a><span id="l9.68">     }</span>
<a href="#l9.69"></a><span id="l9.69" class="difflineminus">-  }</span>
<a href="#l9.70"></a><span id="l9.70" class="difflineplus">+  },</span>
<a href="#l9.71"></a><span id="l9.71"> };</span>
<a href="#l9.72"></a><span id="l9.72"> </span>
<a href="#l9.73"></a><span id="l9.73"> var webPhotoHandler = {</span>
<a href="#l9.74"></a><span id="l9.74">   onLoad(aCard, aDocument) {</span>
<a href="#l9.75"></a><span id="l9.75">     let photoURI = aCard.getProperty(&quot;PhotoURI&quot;, null);</span>
<a href="#l9.76"></a><span id="l9.76"> </span>
<a href="#l9.77"></a><span id="l9.77">     if (!photoURI)</span>
<a href="#l9.78"></a><span id="l9.78">       return false;</span>
<a href="#l9.79"></a><span id="l9.79" class="difflineat">@@ -1337,17 +1337,17 @@ var webPhotoHandler = {</span>
<a href="#l9.80"></a><span id="l9.80">   onSave(aCard, aDocument) {</span>
<a href="#l9.81"></a><span id="l9.81">     // Update contact</span>
<a href="#l9.82"></a><span id="l9.82">     if (gNewPhoto) {</span>
<a href="#l9.83"></a><span id="l9.83">       let photoURI = aDocument.getElementById(&quot;PhotoURI&quot;).value;</span>
<a href="#l9.84"></a><span id="l9.84">       aCard.setProperty(&quot;PhotoName&quot;, gNewPhoto);</span>
<a href="#l9.85"></a><span id="l9.85">       aCard.setProperty(&quot;PhotoURI&quot;, photoURI);</span>
<a href="#l9.86"></a><span id="l9.86">     }</span>
<a href="#l9.87"></a><span id="l9.87">     return true;</span>
<a href="#l9.88"></a><span id="l9.88" class="difflineminus">-  }</span>
<a href="#l9.89"></a><span id="l9.89" class="difflineplus">+  },</span>
<a href="#l9.90"></a><span id="l9.90"> };</span>
<a href="#l9.91"></a><span id="l9.91"> </span>
<a href="#l9.92"></a><span id="l9.92"> function newPhotoAdded(aPhotoName, aCard) {</span>
<a href="#l9.93"></a><span id="l9.93">   // If we had the photo saved locally, shedule it for removal if card is saved.</span>
<a href="#l9.94"></a><span id="l9.94">   gOldPhotos.push(gNewPhoto !== null ? gNewPhoto : aCard.getProperty(&quot;PhotoName&quot;, null));</span>
<a href="#l9.95"></a><span id="l9.95">   gNewPhoto = aPhotoName;</span>
<a href="#l9.96"></a><span id="l9.96"> }</span>
<a href="#l9.97"></a><span id="l9.97"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/components/addrbook/content/abCardView.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/components/addrbook/content/abCardView.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -182,17 +182,17 @@ function DisplayCardViewPane(realCard) {</span>
<a href="#l10.4"></a><span id="l10.4">   // This will become neater when bug 312116 is fixed...</span>
<a href="#l10.5"></a><span id="l10.5">   // (card.property instead of card.getProperty(&quot;Property&quot;))</span>
<a href="#l10.6"></a><span id="l10.6">   var card = { getProperty(prop) {</span>
<a href="#l10.7"></a><span id="l10.7">                  return realCard.getProperty(prop, &quot;&quot;);</span>
<a href="#l10.8"></a><span id="l10.8">                },</span>
<a href="#l10.9"></a><span id="l10.9">                primaryEmail: realCard.primaryEmail,</span>
<a href="#l10.10"></a><span id="l10.10">                displayName: realCard.displayName,</span>
<a href="#l10.11"></a><span id="l10.11">                isMailList: realCard.isMailList,</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-               mailListURI: realCard.mailListURI</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+               mailListURI: realCard.mailListURI,</span>
<a href="#l10.14"></a><span id="l10.14">   };</span>
<a href="#l10.15"></a><span id="l10.15"> </span>
<a href="#l10.16"></a><span id="l10.16">   var data = top.cvData;</span>
<a href="#l10.17"></a><span id="l10.17">   var visible;</span>
<a href="#l10.18"></a><span id="l10.18"> </span>
<a href="#l10.19"></a><span id="l10.19">   // Contact photo</span>
<a href="#l10.20"></a><span id="l10.20">   displayPhoto(card, cvData.cvPhoto);</span>
<a href="#l10.21"></a><span id="l10.21"> </span>
<a href="#l10.22"></a><span id="l10.22" class="difflineat">@@ -515,18 +515,18 @@ function HandleLink(node, label, value, </span>
<a href="#l10.23"></a><span id="l10.23"> </span>
<a href="#l10.24"></a><span id="l10.24">   return visible;</span>
<a href="#l10.25"></a><span id="l10.25"> }</span>
<a href="#l10.26"></a><span id="l10.26"> </span>
<a href="#l10.27"></a><span id="l10.27"> function OpenURLWithHistory(url) {</span>
<a href="#l10.28"></a><span id="l10.28">   PlacesUtils.history.insert({</span>
<a href="#l10.29"></a><span id="l10.29">     url,</span>
<a href="#l10.30"></a><span id="l10.30">     visits: [{</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineminus">-      date: new Date()</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineminus">-    }]</span>
<a href="#l10.33"></a><span id="l10.33" class="difflineplus">+      date: new Date(),</span>
<a href="#l10.34"></a><span id="l10.34" class="difflineplus">+    }],</span>
<a href="#l10.35"></a><span id="l10.35">   }).catch(Cu.reportError);</span>
<a href="#l10.36"></a><span id="l10.36">   try {</span>
<a href="#l10.37"></a><span id="l10.37">     var messenger = Cc[&quot;@mozilla.org/messenger;1&quot;].createInstance();</span>
<a href="#l10.38"></a><span id="l10.38">     messenger = messenger.QueryInterface(Ci.nsIMessenger);</span>
<a href="#l10.39"></a><span id="l10.39">     messenger.launchExternalURL(url);</span>
<a href="#l10.40"></a><span id="l10.40">   } catch (ex) {}</span>
<a href="#l10.41"></a><span id="l10.41"> }</span>
<a href="#l10.42"></a><span id="l10.42"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/components/addrbook/content/abCommon.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/components/addrbook/content/abCommon.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -185,17 +185,17 @@ var DirPaneController =</span>
<a href="#l11.4"></a><span id="l11.4">         break;</span>
<a href="#l11.5"></a><span id="l11.5">     }</span>
<a href="#l11.6"></a><span id="l11.6">   },</span>
<a href="#l11.7"></a><span id="l11.7"> </span>
<a href="#l11.8"></a><span id="l11.8">   onEvent(event) {</span>
<a href="#l11.9"></a><span id="l11.9">     // on blur events set the menu item texts back to the normal values</span>
<a href="#l11.10"></a><span id="l11.10">     if (event == &quot;blur&quot;)</span>
<a href="#l11.11"></a><span id="l11.11">       goSetMenuValue(&quot;cmd_delete&quot;, &quot;valueDefault&quot;);</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-  }</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+  },</span>
<a href="#l11.14"></a><span id="l11.14"> };</span>
<a href="#l11.15"></a><span id="l11.15"> </span>
<a href="#l11.16"></a><span id="l11.16"> function SendCommandToResultsPane(command) {</span>
<a href="#l11.17"></a><span id="l11.17">   ResultsPaneController.doCommand(command);</span>
<a href="#l11.18"></a><span id="l11.18"> </span>
<a href="#l11.19"></a><span id="l11.19">   // if we are sending the command so the results pane</span>
<a href="#l11.20"></a><span id="l11.20">   // we should focus the results pane</span>
<a href="#l11.21"></a><span id="l11.21">   gAbResultsTree.focus();</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineat">@@ -999,17 +999,17 @@ var gImageDownloader = (function() {</span>
<a href="#l11.23"></a><span id="l11.23">             } else if (callbackError) {</span>
<a href="#l11.24"></a><span id="l11.24">               callbackError(ERROR_UNAVAILABLE);</span>
<a href="#l11.25"></a><span id="l11.25">             }</span>
<a href="#l11.26"></a><span id="l11.26">           } catch (err) {</span>
<a href="#l11.27"></a><span id="l11.27">             // The nsIHttpChannel interface is not available - just proceed</span>
<a href="#l11.28"></a><span id="l11.28">             verifyImage();</span>
<a href="#l11.29"></a><span id="l11.29">           }</span>
<a href="#l11.30"></a><span id="l11.30">         }</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-      }</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+      },</span>
<a href="#l11.33"></a><span id="l11.33">     };</span>
<a href="#l11.34"></a><span id="l11.34"> </span>
<a href="#l11.35"></a><span id="l11.35">     let source;</span>
<a href="#l11.36"></a><span id="l11.36">     try {</span>
<a href="#l11.37"></a><span id="l11.37">       source = Services.io.newURI(aURI);</span>
<a href="#l11.38"></a><span id="l11.38">     } catch (err) {</span>
<a href="#l11.39"></a><span id="l11.39">       if (callbackError) {</span>
<a href="#l11.40"></a><span id="l11.40">         callbackError(ERROR_INVALID_URI);</span>
<a href="#l11.41"></a><span id="l11.41" class="difflineat">@@ -1156,17 +1156,17 @@ var gImageDownloader = (function() {</span>
<a href="#l11.42"></a><span id="l11.42">     downloader.progressListener = {</span>
<a href="#l11.43"></a><span id="l11.43">       onStateChange(aWebProgress, aRequest, aFlag, aStatus) {</span>
<a href="#l11.44"></a><span id="l11.44">         if ((aFlag &amp; Ci.nsIWebProgressListener.STATE_STOP) &amp;&amp;</span>
<a href="#l11.45"></a><span id="l11.45">             !(aFlag &amp; Ci.nsIWebProgressListener.STATE_IS_REQUEST)) {</span>
<a href="#l11.46"></a><span id="l11.46">           if (callbackSuccess) {</span>
<a href="#l11.47"></a><span id="l11.47">             callbackSuccess(file.leafName);</span>
<a href="#l11.48"></a><span id="l11.48">           }</span>
<a href="#l11.49"></a><span id="l11.49">         }</span>
<a href="#l11.50"></a><span id="l11.50" class="difflineminus">-      }</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineplus">+      },</span>
<a href="#l11.52"></a><span id="l11.52">     };</span>
<a href="#l11.53"></a><span id="l11.53"> </span>
<a href="#l11.54"></a><span id="l11.54">     // Obtain the privacy context of the browser window that the URL</span>
<a href="#l11.55"></a><span id="l11.55">     // we are downloading comes from. If, and only if, the URL is not</span>
<a href="#l11.56"></a><span id="l11.56">     // related to a window, null should be used instead.</span>
<a href="#l11.57"></a><span id="l11.57">     let privacy = PrivateBrowsingUtils.privacyContextFromWindow(window);</span>
<a href="#l11.58"></a><span id="l11.58">     downloader.saveURI(source, null, null, null, null, null, target, privacy);</span>
<a href="#l11.59"></a><span id="l11.59">   }</span>
<a href="#l11.60"></a><span id="l11.60" class="difflineat">@@ -1176,17 +1176,17 @@ var gImageDownloader = (function() {</span>
<a href="#l11.61"></a><span id="l11.61">     cancelSave,</span>
<a href="#l11.62"></a><span id="l11.62">     savePhoto,</span>
<a href="#l11.63"></a><span id="l11.63">     STATE_TRANSFERRING,</span>
<a href="#l11.64"></a><span id="l11.64">     STATE_RESIZING,</span>
<a href="#l11.65"></a><span id="l11.65">     STATE_OK,</span>
<a href="#l11.66"></a><span id="l11.66">     ERROR_UNAVAILABLE,</span>
<a href="#l11.67"></a><span id="l11.67">     ERROR_INVALID_URI,</span>
<a href="#l11.68"></a><span id="l11.68">     ERROR_INVALID_IMG,</span>
<a href="#l11.69"></a><span id="l11.69" class="difflineminus">-    ERROR_SAVE</span>
<a href="#l11.70"></a><span id="l11.70" class="difflineplus">+    ERROR_SAVE,</span>
<a href="#l11.71"></a><span id="l11.71">   };</span>
<a href="#l11.72"></a><span id="l11.72"> })();</span>
<a href="#l11.73"></a><span id="l11.73"> </span>
<a href="#l11.74"></a><span id="l11.74"> </span>
<a href="#l11.75"></a><span id="l11.75"> /**</span>
<a href="#l11.76"></a><span id="l11.76">  * Validates the given year and returns it, if it looks sane.</span>
<a href="#l11.77"></a><span id="l11.77">  * Returns kDefaultYear (a leap year), if no valid date is given.</span>
<a href="#l11.78"></a><span id="l11.78">  * This ensures that month/day calculations still work.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/components/addrbook/content/abTrees.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/components/addrbook/content/abTrees.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -133,17 +133,17 @@ abDirTreeItem.prototype = {</span>
<a href="#l12.4"></a><span id="l12.4">     let properties = [];</span>
<a href="#l12.5"></a><span id="l12.5">     if (this._directory.isMailList)</span>
<a href="#l12.6"></a><span id="l12.6">       properties.push(&quot;IsMailList-true&quot;);</span>
<a href="#l12.7"></a><span id="l12.7">     if (this._directory.isRemote)</span>
<a href="#l12.8"></a><span id="l12.8">       properties.push(&quot;IsRemote-true&quot;);</span>
<a href="#l12.9"></a><span id="l12.9">     if (this._directory.isSecure)</span>
<a href="#l12.10"></a><span id="l12.10">       properties.push(&quot;IsSecure-true&quot;);</span>
<a href="#l12.11"></a><span id="l12.11">     return properties.join(&quot; &quot;);</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-  }</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+  },</span>
<a href="#l12.14"></a><span id="l12.14"> };</span>
<a href="#l12.15"></a><span id="l12.15"> </span>
<a href="#l12.16"></a><span id="l12.16"> /**</span>
<a href="#l12.17"></a><span id="l12.17">  * Our actual implementation of nsITreeView.</span>
<a href="#l12.18"></a><span id="l12.18">  */</span>
<a href="#l12.19"></a><span id="l12.19"> function directoryTreeView() {}</span>
<a href="#l12.20"></a><span id="l12.20"> directoryTreeView.prototype = {</span>
<a href="#l12.21"></a><span id="l12.21">   __proto__: new PROTO_TREE_VIEW(),</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineat">@@ -272,12 +272,12 @@ directoryTreeView.prototype = {</span>
<a href="#l12.23"></a><span id="l12.23">       return;</span>
<a href="#l12.24"></a><span id="l12.24"> </span>
<a href="#l12.25"></a><span id="l12.25">     for (let i in this._rowMap) {</span>
<a href="#l12.26"></a><span id="l12.26">       if (this._rowMap[i]._directory == aItem) {</span>
<a href="#l12.27"></a><span id="l12.27">         this._tree.invalidateRow(i);</span>
<a href="#l12.28"></a><span id="l12.28">         break;</span>
<a href="#l12.29"></a><span id="l12.29">       }</span>
<a href="#l12.30"></a><span id="l12.30">     }</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineminus">-  }</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineplus">+  },</span>
<a href="#l12.33"></a><span id="l12.33"> };</span>
<a href="#l12.34"></a><span id="l12.34"> </span>
<a href="#l12.35"></a><span id="l12.35"> var gDirectoryTreeView = new directoryTreeView();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mail/components/addrbook/content/addressbook.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mail/components/addrbook/content/addressbook.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -112,17 +112,17 @@ var gAddressBookAbListener = {</span>
<a href="#l13.4"></a><span id="l13.4">         // Now select the new item.</span>
<a href="#l13.5"></a><span id="l13.5">         gDirTree.view.selection.select(newRow);</span>
<a href="#l13.6"></a><span id="l13.6">       }</span>
<a href="#l13.7"></a><span id="l13.7">     } catch (ex) {</span>
<a href="#l13.8"></a><span id="l13.8">     }</span>
<a href="#l13.9"></a><span id="l13.9">   },</span>
<a href="#l13.10"></a><span id="l13.10">   onItemPropertyChanged(item, property, oldValue, newValue) {</span>
<a href="#l13.11"></a><span id="l13.11">     // will not be called</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-  }</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+  },</span>
<a href="#l13.14"></a><span id="l13.14"> };</span>
<a href="#l13.15"></a><span id="l13.15"> </span>
<a href="#l13.16"></a><span id="l13.16"> function OnUnloadAddressBook() {</span>
<a href="#l13.17"></a><span id="l13.17">   // If there's no default startupURI, save the last used URI as new startupURI.</span>
<a href="#l13.18"></a><span id="l13.18">   let saveLastURIasStartupURI = !Services.prefs.getBoolPref(&quot;mail.addr_book.view.startupURIisDefault&quot;);</span>
<a href="#l13.19"></a><span id="l13.19">   if (saveLastURIasStartupURI) {</span>
<a href="#l13.20"></a><span id="l13.20">     let selectedDirURI = getSelectedDirectoryURI();</span>
<a href="#l13.21"></a><span id="l13.21">     Services.prefs.setCharPref(&quot;mail.addr_book.view.startupURI&quot;, selectedDirURI);</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineat">@@ -144,17 +144,17 @@ function OnUnloadAddressBook() {</span>
<a href="#l13.23"></a><span id="l13.23"> }</span>
<a href="#l13.24"></a><span id="l13.24"> </span>
<a href="#l13.25"></a><span id="l13.25"> var gAddressBookAbViewListener = {</span>
<a href="#l13.26"></a><span id="l13.26">   onSelectionChanged() {</span>
<a href="#l13.27"></a><span id="l13.27">     ResultsPaneSelectionChanged();</span>
<a href="#l13.28"></a><span id="l13.28">   },</span>
<a href="#l13.29"></a><span id="l13.29">   onCountChanged(total) {</span>
<a href="#l13.30"></a><span id="l13.30">     SetStatusText(total);</span>
<a href="#l13.31"></a><span id="l13.31" class="difflineminus">-  }</span>
<a href="#l13.32"></a><span id="l13.32" class="difflineplus">+  },</span>
<a href="#l13.33"></a><span id="l13.33"> };</span>
<a href="#l13.34"></a><span id="l13.34"> </span>
<a href="#l13.35"></a><span id="l13.35"> function GetAbViewListener() {</span>
<a href="#l13.36"></a><span id="l13.36">   return gAddressBookAbViewListener;</span>
<a href="#l13.37"></a><span id="l13.37"> }</span>
<a href="#l13.38"></a><span id="l13.38"> </span>
<a href="#l13.39"></a><span id="l13.39"> // we won't show the window until the onload() handler is finished</span>
<a href="#l13.40"></a><span id="l13.40"> // so we do this trick (suggested by hyatt / blaker)</span>
<a href="#l13.41"></a><span id="l13.41" class="difflineat">@@ -817,17 +817,17 @@ var abResultsController = {</span>
<a href="#l13.42"></a><span id="l13.42">         let hasAIM = selectedCard.getProperty(&quot;_AimScreenName&quot;, &quot;&quot;);</span>
<a href="#l13.43"></a><span id="l13.43"> </span>
<a href="#l13.44"></a><span id="l13.44">         return isIMContact || hasAIM;</span>
<a href="#l13.45"></a><span id="l13.45">       },</span>
<a href="#l13.46"></a><span id="l13.46"> </span>
<a href="#l13.47"></a><span id="l13.47">       doCommand() {</span>
<a href="#l13.48"></a><span id="l13.48">         AbIMSelected();</span>
<a href="#l13.49"></a><span id="l13.49">       },</span>
<a href="#l13.50"></a><span id="l13.50" class="difflineminus">-    }</span>
<a href="#l13.51"></a><span id="l13.51" class="difflineplus">+    },</span>
<a href="#l13.52"></a><span id="l13.52">   },</span>
<a href="#l13.53"></a><span id="l13.53"> </span>
<a href="#l13.54"></a><span id="l13.54">   supportsCommand(aCommand) {</span>
<a href="#l13.55"></a><span id="l13.55">     return (aCommand in this.commands);</span>
<a href="#l13.56"></a><span id="l13.56">   },</span>
<a href="#l13.57"></a><span id="l13.57"> </span>
<a href="#l13.58"></a><span id="l13.58">   isCommandEnabled(aCommand) {</span>
<a href="#l13.59"></a><span id="l13.59">     if (!this.supportsCommand(aCommand))</span>
<a href="#l13.60"></a><span id="l13.60" class="difflineat">@@ -840,10 +840,10 @@ var abResultsController = {</span>
<a href="#l13.61"></a><span id="l13.61">     if (!this.supportsCommand(aCommand))</span>
<a href="#l13.62"></a><span id="l13.62">       return;</span>
<a href="#l13.63"></a><span id="l13.63">     let cmd = this.commands[aCommand];</span>
<a href="#l13.64"></a><span id="l13.64">     if (!cmd.isEnabled())</span>
<a href="#l13.65"></a><span id="l13.65">       return;</span>
<a href="#l13.66"></a><span id="l13.66">     cmd.doCommand();</span>
<a href="#l13.67"></a><span id="l13.67">   },</span>
<a href="#l13.68"></a><span id="l13.68"> </span>
<a href="#l13.69"></a><span id="l13.69" class="difflineminus">-  onEvent(aEvent) {}</span>
<a href="#l13.70"></a><span id="l13.70" class="difflineplus">+  onEvent(aEvent) {},</span>
<a href="#l13.71"></a><span id="l13.71"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mail/components/devtools/devtools-loader.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mail/components/devtools/devtools-loader.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -38,26 +38,26 @@ DevToolsStartup.prototype = {</span>
<a href="#l14.4"></a><span id="l14.4">     var { DebuggerServer } = require(&quot;devtools/server/main&quot;);</span>
<a href="#l14.5"></a><span id="l14.5">     var { gDevTools } = require(&quot;devtools/client/framework/devtools&quot;);</span>
<a href="#l14.6"></a><span id="l14.6"> </span>
<a href="#l14.7"></a><span id="l14.7">     if (DebuggerServer.chromeWindowType != &quot;mail:3pane&quot;) {</span>
<a href="#l14.8"></a><span id="l14.8">       // Set up the server chrome window type, make sure it can't be set</span>
<a href="#l14.9"></a><span id="l14.9">       Object.defineProperty(DebuggerServer, &quot;chromeWindowType&quot;, {</span>
<a href="#l14.10"></a><span id="l14.10">         get: () =&gt; &quot;mail:3pane&quot;,</span>
<a href="#l14.11"></a><span id="l14.11">         set: () =&gt; {},</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-        configurable: true</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+        configurable: true,</span>
<a href="#l14.14"></a><span id="l14.14">       });</span>
<a href="#l14.15"></a><span id="l14.15">     }</span>
<a href="#l14.16"></a><span id="l14.16"> </span>
<a href="#l14.17"></a><span id="l14.17">     if (gDevTools.chromeWindowType != &quot;mail:3pane&quot;) {</span>
<a href="#l14.18"></a><span id="l14.18">       // Set up the client chrome window type, make sure it can't be set</span>
<a href="#l14.19"></a><span id="l14.19">       Object.defineProperty(gDevTools, &quot;chromeWindowType&quot;, {</span>
<a href="#l14.20"></a><span id="l14.20">         get: () =&gt; &quot;mail:3pane&quot;,</span>
<a href="#l14.21"></a><span id="l14.21">         set: () =&gt; {},</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineminus">-        configurable: true</span>
<a href="#l14.23"></a><span id="l14.23" class="difflineplus">+        configurable: true,</span>
<a href="#l14.24"></a><span id="l14.24">       });</span>
<a href="#l14.25"></a><span id="l14.25">     }</span>
<a href="#l14.26"></a><span id="l14.26"> </span>
<a href="#l14.27"></a><span id="l14.27">     // Make the loader visible to the debugger by default and for the already</span>
<a href="#l14.28"></a><span id="l14.28">     // loaded instance. Thunderbird now also provides the Browser Toolbox for</span>
<a href="#l14.29"></a><span id="l14.29">     // chrome debugging, which uses its own separate loader instance.</span>
<a href="#l14.30"></a><span id="l14.30">     DevToolsLoader.prototype.invisibleToDebugger = false;</span>
<a href="#l14.31"></a><span id="l14.31">     devtools.invisibleToDebugger = false;</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineat">@@ -68,15 +68,15 @@ DevToolsStartup.prototype = {</span>
<a href="#l14.33"></a><span id="l14.33">       DebuggerServer.registerActors({ browser: true, root: true, tab: true, windowType: &quot;mail:3pane&quot; });</span>
<a href="#l14.34"></a><span id="l14.34">     }</span>
<a href="#l14.35"></a><span id="l14.35"> </span>
<a href="#l14.36"></a><span id="l14.36">     if (!DebuggerServer.createRootActor.isMailRootActor) {</span>
<a href="#l14.37"></a><span id="l14.37">       // Register the Thunderbird root actor</span>
<a href="#l14.38"></a><span id="l14.38">       DebuggerServer.registerModule(&quot;resource:///modules/tb-root-actor.js&quot;, {</span>
<a href="#l14.39"></a><span id="l14.39">         prefix: &quot;tb-root-actor&quot;,</span>
<a href="#l14.40"></a><span id="l14.40">         constructor: &quot;RootActor&quot;,</span>
<a href="#l14.41"></a><span id="l14.41" class="difflineminus">-        type: { global: true }</span>
<a href="#l14.42"></a><span id="l14.42" class="difflineplus">+        type: { global: true },</span>
<a href="#l14.43"></a><span id="l14.43">       });</span>
<a href="#l14.44"></a><span id="l14.44">     }</span>
<a href="#l14.45"></a><span id="l14.45" class="difflineminus">-  }</span>
<a href="#l14.46"></a><span id="l14.46" class="difflineplus">+  },</span>
<a href="#l14.47"></a><span id="l14.47"> };</span>
<a href="#l14.48"></a><span id="l14.48"> </span>
<a href="#l14.49"></a><span id="l14.49"> this.NSGetFactory = XPCOMUtils.generateNSGetFactory([DevToolsStartup]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/components/devtools/tb-root-actor.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/components/devtools/tb-root-actor.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -253,17 +253,17 @@ TBTabList.prototype = {</span>
<a href="#l15.4"></a><span id="l15.4"> </span>
<a href="#l15.5"></a><span id="l15.5">       if (shouldNotify) {</span>
<a href="#l15.6"></a><span id="l15.6">         this._notifyListChanged();</span>
<a href="#l15.7"></a><span id="l15.7">       }</span>
<a href="#l15.8"></a><span id="l15.8">       this._checkListening();</span>
<a href="#l15.9"></a><span id="l15.9">     }, &quot;TBTabList.prototype.onCloseWindow's delayed body&quot;), 0);</span>
<a href="#l15.10"></a><span id="l15.10">   }, &quot;TBTabList.prototype.onCloseWindow&quot;),</span>
<a href="#l15.11"></a><span id="l15.11"> </span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-  onWindowTitleChange() {}</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+  onWindowTitleChange() {},</span>
<a href="#l15.14"></a><span id="l15.14"> };</span>
<a href="#l15.15"></a><span id="l15.15"> </span>
<a href="#l15.16"></a><span id="l15.16"> exports.register = function(handle) {</span>
<a href="#l15.17"></a><span id="l15.17">   handle.setRootActor(createRootActor);</span>
<a href="#l15.18"></a><span id="l15.18"> };</span>
<a href="#l15.19"></a><span id="l15.19"> </span>
<a href="#l15.20"></a><span id="l15.20"> exports.unregister = function(handle) {</span>
<a href="#l15.21"></a><span id="l15.21">   handle.setRootActor(null);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mail/components/downloads/content/aboutDownloads.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mail/components/downloads/content/aboutDownloads.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -159,18 +159,18 @@ var DownloadsView = {</span>
<a href="#l16.4"></a><span id="l16.4"> </span>
<a href="#l16.5"></a><span id="l16.5">   updateCommands() {</span>
<a href="#l16.6"></a><span id="l16.6">     this.commands.forEach(goUpdateCommand);</span>
<a href="#l16.7"></a><span id="l16.7">     DownloadItem.prototype.commands.forEach(goUpdateCommand);</span>
<a href="#l16.8"></a><span id="l16.8">   },</span>
<a href="#l16.9"></a><span id="l16.9"> </span>
<a href="#l16.10"></a><span id="l16.10">   commands: [</span>
<a href="#l16.11"></a><span id="l16.11">     &quot;msgDownloadsCmd_clearDownloads&quot;,</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-    &quot;msgDownloadsCmd_searchDownloads&quot;</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">-  ]</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineplus">+    &quot;msgDownloadsCmd_searchDownloads&quot;,</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineplus">+  ],</span>
<a href="#l16.16"></a><span id="l16.16"> };</span>
<a href="#l16.17"></a><span id="l16.17"> </span>
<a href="#l16.18"></a><span id="l16.18"> function DownloadItem(aDownload) {</span>
<a href="#l16.19"></a><span id="l16.19">   this._download = aDownload;</span>
<a href="#l16.20"></a><span id="l16.20">   this._updateFromDownload();</span>
<a href="#l16.21"></a><span id="l16.21"> </span>
<a href="#l16.22"></a><span id="l16.22">   if (aDownload._unknownProperties &amp;&amp; aDownload._unknownProperties.sender) {</span>
<a href="#l16.23"></a><span id="l16.23">     this._sender = aDownload._unknownProperties.sender;</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineat">@@ -183,17 +183,17 @@ function DownloadItem(aDownload) {</span>
<a href="#l16.25"></a><span id="l16.25">   this._filePath = aDownload.target.path;</span>
<a href="#l16.26"></a><span id="l16.26"> }</span>
<a href="#l16.27"></a><span id="l16.27"> </span>
<a href="#l16.28"></a><span id="l16.28"> var kDownloadStatePropertyNames = [</span>
<a href="#l16.29"></a><span id="l16.29">   &quot;stopped&quot;,</span>
<a href="#l16.30"></a><span id="l16.30">   &quot;succeeded&quot;,</span>
<a href="#l16.31"></a><span id="l16.31">   &quot;canceled&quot;,</span>
<a href="#l16.32"></a><span id="l16.32">   &quot;error&quot;,</span>
<a href="#l16.33"></a><span id="l16.33" class="difflineminus">-  &quot;startTime&quot;</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineplus">+  &quot;startTime&quot;,</span>
<a href="#l16.35"></a><span id="l16.35"> ];</span>
<a href="#l16.36"></a><span id="l16.36"> </span>
<a href="#l16.37"></a><span id="l16.37"> DownloadItem.prototype = {</span>
<a href="#l16.38"></a><span id="l16.38">   _htmlEscape(s) {</span>
<a href="#l16.39"></a><span id="l16.39">     s = s.replace(/&amp;/g, &quot;&amp;amp;&quot;);</span>
<a href="#l16.40"></a><span id="l16.40">     s = s.replace(/&gt;/g, &quot;&amp;gt;&quot;);</span>
<a href="#l16.41"></a><span id="l16.41">     s = s.replace(/&lt;/g, &quot;&amp;lt;&quot;);</span>
<a href="#l16.42"></a><span id="l16.42">     s = s.replace(/&quot;/g, &quot;&amp;quot;&quot;);</span>
<a href="#l16.43"></a><span id="l16.43" class="difflineat">@@ -322,11 +322,11 @@ DownloadItem.prototype = {</span>
<a href="#l16.44"></a><span id="l16.44">         this.remove();</span>
<a href="#l16.45"></a><span id="l16.45">         break;</span>
<a href="#l16.46"></a><span id="l16.46">     }</span>
<a href="#l16.47"></a><span id="l16.47">   },</span>
<a href="#l16.48"></a><span id="l16.48"> </span>
<a href="#l16.49"></a><span id="l16.49">   commands: [</span>
<a href="#l16.50"></a><span id="l16.50">     &quot;msgDownloadsCmd_remove&quot;,</span>
<a href="#l16.51"></a><span id="l16.51">     &quot;msgDownloadsCmd_open&quot;,</span>
<a href="#l16.52"></a><span id="l16.52" class="difflineminus">-    &quot;msgDownloadsCmd_show&quot;</span>
<a href="#l16.53"></a><span id="l16.53" class="difflineminus">-  ]</span>
<a href="#l16.54"></a><span id="l16.54" class="difflineplus">+    &quot;msgDownloadsCmd_show&quot;,</span>
<a href="#l16.55"></a><span id="l16.55" class="difflineplus">+  ],</span>
<a href="#l16.56"></a><span id="l16.56"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mail/components/extensions/child/ext-mail.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mail/components/extensions/child/ext-mail.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -6,10 +6,10 @@</span>
<a href="#l17.4"></a><span id="l17.4"> </span>
<a href="#l17.5"></a><span id="l17.5"> extensions.registerModules({</span>
<a href="#l17.6"></a><span id="l17.6">   tabs: {</span>
<a href="#l17.7"></a><span id="l17.7">     url: &quot;chrome://messenger/content/child/ext-tabs.js&quot;,</span>
<a href="#l17.8"></a><span id="l17.8">     scopes: [&quot;addon_child&quot;],</span>
<a href="#l17.9"></a><span id="l17.9">     paths: [</span>
<a href="#l17.10"></a><span id="l17.10">       [&quot;tabs&quot;],</span>
<a href="#l17.11"></a><span id="l17.11">     ],</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-  }</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+  },</span>
<a href="#l17.14"></a><span id="l17.14"> });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mail/components/extensions/parent/ext-legacy.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mail/components/extensions/parent/ext-legacy.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -57,17 +57,17 @@ this.legacy = class extends ExtensionAPI</span>
<a href="#l18.4"></a><span id="l18.4">     // Load chrome.manifest</span>
<a href="#l18.5"></a><span id="l18.5">     let appinfo = Services.appinfo;</span>
<a href="#l18.6"></a><span id="l18.6">     let options = {</span>
<a href="#l18.7"></a><span id="l18.7">       application: appinfo.ID,</span>
<a href="#l18.8"></a><span id="l18.8">       appversion: appinfo.version,</span>
<a href="#l18.9"></a><span id="l18.9">       platformversion: appinfo.platformVersion,</span>
<a href="#l18.10"></a><span id="l18.10">       os: appinfo.OS,</span>
<a href="#l18.11"></a><span id="l18.11">       osversion: Services.sysinfo.getProperty(&quot;version&quot;),</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-      abi: appinfo.XPCOMABI</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+      abi: appinfo.XPCOMABI,</span>
<a href="#l18.14"></a><span id="l18.14">     };</span>
<a href="#l18.15"></a><span id="l18.15">     let loader = async (filename) =&gt; {</span>
<a href="#l18.16"></a><span id="l18.16">       let url = this.extension.getURL(filename);</span>
<a href="#l18.17"></a><span id="l18.17">       return fetch(url).then(response =&gt; response.text());</span>
<a href="#l18.18"></a><span id="l18.18">     };</span>
<a href="#l18.19"></a><span id="l18.19">     let chromeManifest = new ChromeManifest(loader, options);</span>
<a href="#l18.20"></a><span id="l18.20">     await chromeManifest.parse(&quot;chrome.manifest&quot;);</span>
<a href="#l18.21"></a><span id="l18.21"> </span>
<a href="#l18.22"></a><span id="l18.22" class="difflineat">@@ -94,19 +94,19 @@ this.legacy = class extends ExtensionAPI</span>
<a href="#l18.23"></a><span id="l18.23">       }</span>
<a href="#l18.24"></a><span id="l18.24">     }</span>
<a href="#l18.25"></a><span id="l18.25"> </span>
<a href="#l18.26"></a><span id="l18.26">     let documentObserver = {</span>
<a href="#l18.27"></a><span id="l18.27">       observe(document) {</span>
<a href="#l18.28"></a><span id="l18.28">         if (ExtensionCommon.instanceOf(document, &quot;XULDocument&quot;)) {</span>
<a href="#l18.29"></a><span id="l18.29">           Overlays.load(chromeManifest, document.defaultView);</span>
<a href="#l18.30"></a><span id="l18.30">         }</span>
<a href="#l18.31"></a><span id="l18.31" class="difflineminus">-      }</span>
<a href="#l18.32"></a><span id="l18.32" class="difflineplus">+      },</span>
<a href="#l18.33"></a><span id="l18.33">     };</span>
<a href="#l18.34"></a><span id="l18.34">     Services.obs.addObserver(documentObserver, &quot;chrome-document-loaded&quot;);</span>
<a href="#l18.35"></a><span id="l18.35"> </span>
<a href="#l18.36"></a><span id="l18.36">     this.extension.callOnClose({</span>
<a href="#l18.37"></a><span id="l18.37">       close: () =&gt; {</span>
<a href="#l18.38"></a><span id="l18.38">         Services.obs.removeObserver(documentObserver, &quot;chrome-document-loaded&quot;);</span>
<a href="#l18.39"></a><span id="l18.39" class="difflineminus">-      }</span>
<a href="#l18.40"></a><span id="l18.40" class="difflineplus">+      },</span>
<a href="#l18.41"></a><span id="l18.41">     });</span>
<a href="#l18.42"></a><span id="l18.42">   }</span>
<a href="#l18.43"></a><span id="l18.43"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mail/components/extensions/parent/ext-mail.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mail/components/extensions/parent/ext-mail.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -418,17 +418,17 @@ class TabTracker extends TabTrackerBase </span>
<a href="#l19.4"></a><span id="l19.4">    *</span>
<a href="#l19.5"></a><span id="l19.5">    * @param {NativeTabInfo} nativeTabInfo   The tab info which has been activated.</span>
<a href="#l19.6"></a><span id="l19.6">    */</span>
<a href="#l19.7"></a><span id="l19.7">   emitActivated(nativeTabInfo) {</span>
<a href="#l19.8"></a><span id="l19.8">     let browser = getTabBrowser(nativeTabInfo);</span>
<a href="#l19.9"></a><span id="l19.9"> </span>
<a href="#l19.10"></a><span id="l19.10">     this.emit(&quot;tab-activated&quot;, {</span>
<a href="#l19.11"></a><span id="l19.11">       tabId: this.getId(nativeTabInfo),</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-      windowId: windowTracker.getId(browser.ownerGlobal)</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+      windowId: windowTracker.getId(browser.ownerGlobal),</span>
<a href="#l19.14"></a><span id="l19.14">     });</span>
<a href="#l19.15"></a><span id="l19.15">   }</span>
<a href="#l19.16"></a><span id="l19.16"> </span>
<a href="#l19.17"></a><span id="l19.17">   /**</span>
<a href="#l19.18"></a><span id="l19.18">    * Emits a &quot;tab-attached&quot; event for the given tab info.</span>
<a href="#l19.19"></a><span id="l19.19">    *</span>
<a href="#l19.20"></a><span id="l19.20">    * @param {NativeTabInfo} nativeTabInfo   The tab info which is being attached.</span>
<a href="#l19.21"></a><span id="l19.21">    */</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineat">@@ -486,17 +486,17 @@ class TabTracker extends TabTrackerBase </span>
<a href="#l19.23"></a><span id="l19.23">    * Returns tab id and window id for the given browser element.</span>
<a href="#l19.24"></a><span id="l19.24">    *</span>
<a href="#l19.25"></a><span id="l19.25">    * @param {Element} browser                       The browser element to check</span>
<a href="#l19.26"></a><span id="l19.26">    * @return {{ tabId:Integer, windowId:Integer }}  The browsing data for the element</span>
<a href="#l19.27"></a><span id="l19.27">    */</span>
<a href="#l19.28"></a><span id="l19.28">   getBrowserData(browser) {</span>
<a href="#l19.29"></a><span id="l19.29">     return {</span>
<a href="#l19.30"></a><span id="l19.30">       tabId: this.getBrowserTabId(browser),</span>
<a href="#l19.31"></a><span id="l19.31" class="difflineminus">-      windowId: windowTracker.getId(browser.ownerGlobal)</span>
<a href="#l19.32"></a><span id="l19.32" class="difflineplus">+      windowId: windowTracker.getId(browser.ownerGlobal),</span>
<a href="#l19.33"></a><span id="l19.33">     };</span>
<a href="#l19.34"></a><span id="l19.34">   }</span>
<a href="#l19.35"></a><span id="l19.35"> </span>
<a href="#l19.36"></a><span id="l19.36">   /**</span>
<a href="#l19.37"></a><span id="l19.37">    * Returns the active tab info for the given window</span>
<a href="#l19.38"></a><span id="l19.38">    *</span>
<a href="#l19.39"></a><span id="l19.39">    * @property {?NativeTabInfo} activeTab       The active tab</span>
<a href="#l19.40"></a><span id="l19.40">    * @readonly</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mail/components/extensions/parent/ext-tabs.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mail/components/extensions/parent/ext-tabs.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -66,17 +66,17 @@ let tabListener = {</span>
<a href="#l20.4"></a><span id="l20.4">           (browser.innerWindowID || browser.currentURI.spec === &quot;about:blank&quot;)) {</span>
<a href="#l20.5"></a><span id="l20.5">         deferred.resolve(nativeTabInfo);</span>
<a href="#l20.6"></a><span id="l20.6">       } else {</span>
<a href="#l20.7"></a><span id="l20.7">         this.initTabReady();</span>
<a href="#l20.8"></a><span id="l20.8">         this.tabReadyPromises.set(nativeTabInfo, deferred);</span>
<a href="#l20.9"></a><span id="l20.9">       }</span>
<a href="#l20.10"></a><span id="l20.10">     }</span>
<a href="#l20.11"></a><span id="l20.11">     return deferred.promise;</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-  }</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+  },</span>
<a href="#l20.14"></a><span id="l20.14"> };</span>
<a href="#l20.15"></a><span id="l20.15"> </span>
<a href="#l20.16"></a><span id="l20.16"> // Attributes and properties used in the TabsUpdateFilterManager.</span>
<a href="#l20.17"></a><span id="l20.17"> const allAttrs = new Set([&quot;favIconUrl&quot;, &quot;title&quot;]);</span>
<a href="#l20.18"></a><span id="l20.18"> const allProperties = new Set([</span>
<a href="#l20.19"></a><span id="l20.19">   &quot;favIconUrl&quot;,</span>
<a href="#l20.20"></a><span id="l20.20">   &quot;status&quot;,</span>
<a href="#l20.21"></a><span id="l20.21">   &quot;title&quot;,</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineat">@@ -270,32 +270,32 @@ this.tabs = class extends ExtensionAPI {</span>
<a href="#l20.23"></a><span id="l20.23">             let listener = (eventName, event) =&gt; {</span>
<a href="#l20.24"></a><span id="l20.24">               fire.async(event);</span>
<a href="#l20.25"></a><span id="l20.25">             };</span>
<a href="#l20.26"></a><span id="l20.26"> </span>
<a href="#l20.27"></a><span id="l20.27">             tabTracker.on(&quot;tab-activated&quot;, listener);</span>
<a href="#l20.28"></a><span id="l20.28">             return () =&gt; {</span>
<a href="#l20.29"></a><span id="l20.29">               tabTracker.off(&quot;tab-activated&quot;, listener);</span>
<a href="#l20.30"></a><span id="l20.30">             };</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">-          }</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineplus">+          },</span>
<a href="#l20.33"></a><span id="l20.33">         }).api(),</span>
<a href="#l20.34"></a><span id="l20.34"> </span>
<a href="#l20.35"></a><span id="l20.35">         onCreated: new EventManager({</span>
<a href="#l20.36"></a><span id="l20.36">           context,</span>
<a href="#l20.37"></a><span id="l20.37">           name: &quot;tabs.onCreated&quot;,</span>
<a href="#l20.38"></a><span id="l20.38">           register: fire =&gt; {</span>
<a href="#l20.39"></a><span id="l20.39">             let listener = (eventName, event) =&gt; {</span>
<a href="#l20.40"></a><span id="l20.40">               fire.async(tabManager.convert(event.nativeTabInfo, event.currentTab));</span>
<a href="#l20.41"></a><span id="l20.41">             };</span>
<a href="#l20.42"></a><span id="l20.42"> </span>
<a href="#l20.43"></a><span id="l20.43">             tabTracker.on(&quot;tab-created&quot;, listener);</span>
<a href="#l20.44"></a><span id="l20.44">             return () =&gt; {</span>
<a href="#l20.45"></a><span id="l20.45">               tabTracker.off(&quot;tab-created&quot;, listener);</span>
<a href="#l20.46"></a><span id="l20.46">             };</span>
<a href="#l20.47"></a><span id="l20.47" class="difflineminus">-          }</span>
<a href="#l20.48"></a><span id="l20.48" class="difflineplus">+          },</span>
<a href="#l20.49"></a><span id="l20.49">         }).api(),</span>
<a href="#l20.50"></a><span id="l20.50"> </span>
<a href="#l20.51"></a><span id="l20.51">         onAttached: new EventManager({</span>
<a href="#l20.52"></a><span id="l20.52">           context,</span>
<a href="#l20.53"></a><span id="l20.53">           name: &quot;tabs.onAttached&quot;,</span>
<a href="#l20.54"></a><span id="l20.54">           register: fire =&gt; {</span>
<a href="#l20.55"></a><span id="l20.55">             let listener = (eventName, event) =&gt; {</span>
<a href="#l20.56"></a><span id="l20.56">               fire.async(event.tabId, { newWindowId: event.newWindowId, newPosition: event.newPosition });</span>
<a href="#l20.57"></a><span id="l20.57" class="difflineat">@@ -330,40 +330,40 @@ this.tabs = class extends ExtensionAPI {</span>
<a href="#l20.58"></a><span id="l20.58">             let listener = (eventName, event) =&gt; {</span>
<a href="#l20.59"></a><span id="l20.59">               fire.async(event.tabId, { windowId: event.windowId, isWindowClosing: event.isWindowClosing });</span>
<a href="#l20.60"></a><span id="l20.60">             };</span>
<a href="#l20.61"></a><span id="l20.61"> </span>
<a href="#l20.62"></a><span id="l20.62">             tabTracker.on(&quot;tab-removed&quot;, listener);</span>
<a href="#l20.63"></a><span id="l20.63">             return () =&gt; {</span>
<a href="#l20.64"></a><span id="l20.64">               tabTracker.off(&quot;tab-removed&quot;, listener);</span>
<a href="#l20.65"></a><span id="l20.65">             };</span>
<a href="#l20.66"></a><span id="l20.66" class="difflineminus">-          }</span>
<a href="#l20.67"></a><span id="l20.67" class="difflineplus">+          },</span>
<a href="#l20.68"></a><span id="l20.68">         }).api(),</span>
<a href="#l20.69"></a><span id="l20.69"> </span>
<a href="#l20.70"></a><span id="l20.70">         onMoved: new EventManager({</span>
<a href="#l20.71"></a><span id="l20.71">           context,</span>
<a href="#l20.72"></a><span id="l20.72">           name: &quot;tabs.onMoved&quot;,</span>
<a href="#l20.73"></a><span id="l20.73">           register: fire =&gt; {</span>
<a href="#l20.74"></a><span id="l20.74">             let moveListener = event =&gt; {</span>
<a href="#l20.75"></a><span id="l20.75">               let nativeTab = event.originalTarget;</span>
<a href="#l20.76"></a><span id="l20.76">               let nativeTabInfo = event.detail.tabInfo;</span>
<a href="#l20.77"></a><span id="l20.77">               let tabmail = nativeTab.ownerDocument.getElementById(&quot;tabmail&quot;);</span>
<a href="#l20.78"></a><span id="l20.78"> </span>
<a href="#l20.79"></a><span id="l20.79">               fire.async(tabTracker.getId(nativeTabInfo), {</span>
<a href="#l20.80"></a><span id="l20.80">                 windowId: windowTracker.getId(nativeTab.ownerGlobal),</span>
<a href="#l20.81"></a><span id="l20.81">                 fromIndex: event.detail.idx,</span>
<a href="#l20.82"></a><span id="l20.82" class="difflineminus">-                toIndex: tabmail.tabInfo.indexOf(nativeTabInfo)</span>
<a href="#l20.83"></a><span id="l20.83" class="difflineplus">+                toIndex: tabmail.tabInfo.indexOf(nativeTabInfo),</span>
<a href="#l20.84"></a><span id="l20.84">               });</span>
<a href="#l20.85"></a><span id="l20.85">             };</span>
<a href="#l20.86"></a><span id="l20.86"> </span>
<a href="#l20.87"></a><span id="l20.87">             windowTracker.addListener(&quot;TabMove&quot;, moveListener);</span>
<a href="#l20.88"></a><span id="l20.88">             return () =&gt; {</span>
<a href="#l20.89"></a><span id="l20.89">               windowTracker.removeListener(&quot;TabMove&quot;, moveListener);</span>
<a href="#l20.90"></a><span id="l20.90">             };</span>
<a href="#l20.91"></a><span id="l20.91" class="difflineminus">-          }</span>
<a href="#l20.92"></a><span id="l20.92" class="difflineplus">+          },</span>
<a href="#l20.93"></a><span id="l20.93">         }).api(),</span>
<a href="#l20.94"></a><span id="l20.94"> </span>
<a href="#l20.95"></a><span id="l20.95">         onUpdated: new TabsUpdateFilterEventManager(context).api(),</span>
<a href="#l20.96"></a><span id="l20.96"> </span>
<a href="#l20.97"></a><span id="l20.97">         async create(createProperties) {</span>
<a href="#l20.98"></a><span id="l20.98">           let window = createProperties.windowId === null</span>
<a href="#l20.99"></a><span id="l20.99">               ? windowTracker.topNormalWindow</span>
<a href="#l20.100"></a><span id="l20.100">               : windowTracker.getWindow(createProperties.windowId, context);</span>
<a href="#l20.101"></a><span id="l20.101" class="difflineat">@@ -384,17 +384,17 @@ this.tabs = class extends ExtensionAPI {</span>
<a href="#l20.102"></a><span id="l20.102">           if (createProperties.active) {</span>
<a href="#l20.103"></a><span id="l20.103">             active = createProperties.active;</span>
<a href="#l20.104"></a><span id="l20.104">           }</span>
<a href="#l20.105"></a><span id="l20.105"> </span>
<a href="#l20.106"></a><span id="l20.106">           tabListener.initTabReady();</span>
<a href="#l20.107"></a><span id="l20.107"> </span>
<a href="#l20.108"></a><span id="l20.108">           let nativeTabInfo = tabmail.openTab(&quot;contentTab&quot;, {</span>
<a href="#l20.109"></a><span id="l20.109">             contentPage: url || &quot;about:blank&quot;,</span>
<a href="#l20.110"></a><span id="l20.110" class="difflineminus">-            background: !active</span>
<a href="#l20.111"></a><span id="l20.111" class="difflineplus">+            background: !active,</span>
<a href="#l20.112"></a><span id="l20.112">           });</span>
<a href="#l20.113"></a><span id="l20.113"> </span>
<a href="#l20.114"></a><span id="l20.114">           if (createProperties.index) {</span>
<a href="#l20.115"></a><span id="l20.115">             tabmail.moveTabTo(nativeTabInfo, createProperties.index);</span>
<a href="#l20.116"></a><span id="l20.116">             tabmail.updateCurrentTab();</span>
<a href="#l20.117"></a><span id="l20.117">           }</span>
<a href="#l20.118"></a><span id="l20.118"> </span>
<a href="#l20.119"></a><span id="l20.119">           if (createProperties.url &amp;&amp; createProperties.url !== &quot;about:blank&quot;) {</span>
<a href="#l20.120"></a><span id="l20.120" class="difflineat">@@ -605,13 +605,13 @@ this.tabs = class extends ExtensionAPI {</span>
<a href="#l20.121"></a><span id="l20.121">           state.state.duplicate = true;</span>
<a href="#l20.122"></a><span id="l20.122"> </span>
<a href="#l20.123"></a><span id="l20.123">           if (mode.tabs.length &amp;&amp; mode.tabs.length == mode.maxTabs) {</span>
<a href="#l20.124"></a><span id="l20.124">             throw new ExtensionError(`Maximum number of ${state.mode} tabs reached`);</span>
<a href="#l20.125"></a><span id="l20.125">           } else {</span>
<a href="#l20.126"></a><span id="l20.126">             tabmail.restoreTab(state);</span>
<a href="#l20.127"></a><span id="l20.127">             return tabManager.convert(mode.tabs[mode.tabs.length - 1]);</span>
<a href="#l20.128"></a><span id="l20.128">           }</span>
<a href="#l20.129"></a><span id="l20.129" class="difflineminus">-        }</span>
<a href="#l20.130"></a><span id="l20.130" class="difflineminus">-      }</span>
<a href="#l20.131"></a><span id="l20.131" class="difflineplus">+        },</span>
<a href="#l20.132"></a><span id="l20.132" class="difflineplus">+      },</span>
<a href="#l20.133"></a><span id="l20.133">     };</span>
<a href="#l20.134"></a><span id="l20.134">   }</span>
<a href="#l20.135"></a><span id="l20.135"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mail/components/extensions/parent/ext-windows.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mail/components/extensions/parent/ext-windows.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -39,17 +39,17 @@ this.windows = class extends ExtensionAP</span>
<a href="#l21.4"></a><span id="l21.4">               });</span>
<a href="#l21.5"></a><span id="l21.5">             };</span>
<a href="#l21.6"></a><span id="l21.6">             windowTracker.addListener(&quot;focus&quot;, listener);</span>
<a href="#l21.7"></a><span id="l21.7">             windowTracker.addListener(&quot;blur&quot;, listener);</span>
<a href="#l21.8"></a><span id="l21.8">             return () =&gt; {</span>
<a href="#l21.9"></a><span id="l21.9">               windowTracker.removeListener(&quot;focus&quot;, listener);</span>
<a href="#l21.10"></a><span id="l21.10">               windowTracker.removeListener(&quot;blur&quot;, listener);</span>
<a href="#l21.11"></a><span id="l21.11">             };</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-          }</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+          },</span>
<a href="#l21.14"></a><span id="l21.14">         }).api(),</span>
<a href="#l21.15"></a><span id="l21.15"> </span>
<a href="#l21.16"></a><span id="l21.16">         get(windowId, getInfo) {</span>
<a href="#l21.17"></a><span id="l21.17">           let window = windowTracker.getWindow(windowId, context);</span>
<a href="#l21.18"></a><span id="l21.18">           if (!window) {</span>
<a href="#l21.19"></a><span id="l21.19">             return Promise.reject({ message: `Invalid window ID: ${windowId}` });</span>
<a href="#l21.20"></a><span id="l21.20">           }</span>
<a href="#l21.21"></a><span id="l21.21">           return Promise.resolve(windowManager.convert(window, getInfo));</span>
<a href="#l21.22"></a><span id="l21.22" class="difflineat">@@ -83,17 +83,17 @@ this.windows = class extends ExtensionAP</span>
<a href="#l21.23"></a><span id="l21.23">             }</span>
<a href="#l21.24"></a><span id="l21.24">             createData.state = &quot;normal&quot;;</span>
<a href="#l21.25"></a><span id="l21.25">           }</span>
<a href="#l21.26"></a><span id="l21.26"> </span>
<a href="#l21.27"></a><span id="l21.27">           let createWindowArgs = (urls) =&gt; {</span>
<a href="#l21.28"></a><span id="l21.28">             let args = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l21.29"></a><span id="l21.29">             let actionData = {</span>
<a href="#l21.30"></a><span id="l21.30">               action: &quot;open&quot;,</span>
<a href="#l21.31"></a><span id="l21.31" class="difflineminus">-              tabs: urls.map(url =&gt; ({ tabType: &quot;contentTab&quot;, tabParams: { contentPage: url } }))</span>
<a href="#l21.32"></a><span id="l21.32" class="difflineplus">+              tabs: urls.map(url =&gt; ({ tabType: &quot;contentTab&quot;, tabParams: { contentPage: url } })),</span>
<a href="#l21.33"></a><span id="l21.33">             };</span>
<a href="#l21.34"></a><span id="l21.34">             actionData.wrappedJSObject = actionData;</span>
<a href="#l21.35"></a><span id="l21.35">             args.appendElement(null);</span>
<a href="#l21.36"></a><span id="l21.36">             args.appendElement(actionData);</span>
<a href="#l21.37"></a><span id="l21.37">             return args;</span>
<a href="#l21.38"></a><span id="l21.38">           };</span>
<a href="#l21.39"></a><span id="l21.39"> </span>
<a href="#l21.40"></a><span id="l21.40">           let window;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:33Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

