<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 21213:e474c682bc73ff980a0716d4239aaa4e959b1657</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ e474c682bc73ff980a0716d4239aaa4e959b1657" />
<meta property="og:url" content="/comm-central/rev/e474c682bc73ff980a0716d4239aaa4e959b1657" />
<meta property="og:description" content="Bug 1339811 - Align troubleshooting information (about:support) with M-C. r=jorgk,aceman" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / e474c682bc73ff980a0716d4239aaa4e959b1657 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/e474c682bc73ff980a0716d4239aaa4e959b1657">shortlog</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/e474c682bc73ff980a0716d4239aaa4e959b1657">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/e474c682bc73ff980a0716d4239aaa4e959b1657">files</a> |
changeset |
<a href="/comm-central/raw-rev/e474c682bc73ff980a0716d4239aaa4e959b1657">raw</a>  | <a href="/comm-central/archive/e474c682bc73ff980a0716d4239aaa4e959b1657.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1339811">Bug 1339811</a> - Align troubleshooting information (about:support) with M-C. r=jorgk,aceman
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#82;&#105;&#99;&#104;&#97;&#114;&#100;&#32;&#77;&#97;&#114;&#116;&#105;&#32;&#60;&#114;&#105;&#99;&#104;&#97;&#114;&#100;&#46;&#109;&#97;&#114;&#116;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Sun, 19 Feb 2017 21:51:19 +0100</td></tr>

<tr>
 <td>changeset 21213</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/e474c682bc73ff980a0716d4239aaa4e959b1657">e474c682bc73ff980a0716d4239aaa4e959b1657</a></td>
</tr>



<tr>
<td>parent 21212</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/bbeb17bcfd6ef5651d91c444d29601e1d883c18a">bbeb17bcfd6ef5651d91c444d29601e1d883c18a</a>
</td>
</tr>

<tr>
<td>child 21214</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/996f420f761c3d6b022e3c0834ca1f6ba6ab3efd">996f420f761c3d6b022e3c0834ca1f6ba6ab3efd</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=e474c682bc73ff980a0716d4239aaa4e959b1657">12888</a></td></tr>
<tr><td>push user</td><td>acelists@atlas.sk</td></tr>
<tr><td>push date</td><td class="date age">Sat, 25 Feb 2017 18:43:31 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@996f420f761c [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=996f420f761c3d6b022e3c0834ca1f6ba6ab3efd">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=996f420f761c3d6b022e3c0834ca1f6ba6ab3efd&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=996f420f761c3d6b022e3c0834ca1f6ba6ab3efd&newProject=comm-central&newRevision=303fc1060ea8baa6ec931edb12f9a09c5a48cce1&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=996f420f761c3d6b022e3c0834ca1f6ba6ab3efd&newProject=comm-central&newRevision=303fc1060ea8baa6ec931edb12f9a09c5a48cce1&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=996f420f761c3d6b022e3c0834ca1f6ba6ab3efd&newProject=comm-central&newRevision=303fc1060ea8baa6ec931edb12f9a09c5a48cce1&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28jorgk%29&revcount=50">jorgk</a>, <a href="/comm-central/log?rev=reviewer%28aceman%29&revcount=50">aceman</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1339811">1339811</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1339811">Bug 1339811</a> - Align troubleshooting information (about:support) with M-C. r=jorgk,aceman</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/app/profile/all-thunderbird.js">mail/app/profile/all-thunderbird.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/app/profile/all-thunderbird.js">file</a> |
<a href="/comm-central/annotate/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/app/profile/all-thunderbird.js">annotate</a> |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/app/profile/all-thunderbird.js">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/app/profile/all-thunderbird.js">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/app/profile/all-thunderbird.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/base/content/baseMenuOverlay.xul">mail/base/content/baseMenuOverlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/base/content/baseMenuOverlay.xul">file</a> |
<a href="/comm-central/annotate/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/base/content/baseMenuOverlay.xul">annotate</a> |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/base/content/baseMenuOverlay.xul">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/base/content/baseMenuOverlay.xul">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/base/content/baseMenuOverlay.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/base/content/mailCore.js">mail/base/content/mailCore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/base/content/mailCore.js">file</a> |
<a href="/comm-central/annotate/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/base/content/mailCore.js">annotate</a> |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/base/content/mailCore.js">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/base/content/mailCore.js">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/base/content/mailCore.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/base/content/mailWindowOverlay.xul">mail/base/content/mailWindowOverlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/base/content/mailWindowOverlay.xul">file</a> |
<a href="/comm-central/annotate/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/base/content/mailWindowOverlay.xul">annotate</a> |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/base/content/mailWindowOverlay.xul">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/base/content/mailWindowOverlay.xul">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/base/content/mailWindowOverlay.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/aboutSupport.js">mail/components/about-support/aboutSupport.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/aboutSupport.js">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/aboutSupport.js">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/aboutSupport.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/a11y.js">mail/components/about-support/content/a11y.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/a11y.js">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/a11y.js">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/a11y.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/aboutSupport.js">mail/components/about-support/content/aboutSupport.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/aboutSupport.js">file</a> |
<a href="/comm-central/annotate/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/aboutSupport.js">annotate</a> |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/aboutSupport.js">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/aboutSupport.js">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/aboutSupport.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/aboutSupport.xhtml">mail/components/about-support/content/aboutSupport.xhtml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/aboutSupport.xhtml">file</a> |
<a href="/comm-central/annotate/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/aboutSupport.xhtml">annotate</a> |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/aboutSupport.xhtml">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/aboutSupport.xhtml">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/aboutSupport.xhtml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/accounts.js">mail/components/about-support/content/accounts.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/accounts.js">file</a> |
<a href="/comm-central/annotate/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/accounts.js">annotate</a> |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/accounts.js">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/accounts.js">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/accounts.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/crashes.js">mail/components/about-support/content/crashes.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/crashes.js">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/crashes.js">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/crashes.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/export.js">mail/components/about-support/content/export.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/export.js">file</a> |
<a href="/comm-central/annotate/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/export.js">annotate</a> |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/export.js">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/export.js">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/export.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/extensions.js">mail/components/about-support/content/extensions.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/extensions.js">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/extensions.js">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/extensions.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/gfx.js">mail/components/about-support/content/gfx.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/gfx.js">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/gfx.js">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/gfx.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/init.js">mail/components/about-support/content/init.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/init.js">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/init.js">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/init.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/js.js">mail/components/about-support/content/js.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/js.js">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/js.js">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/js.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/libversions.js">mail/components/about-support/content/libversions.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/libversions.js">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/libversions.js">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/libversions.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/overlay.js">mail/components/about-support/content/overlay.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/overlay.js">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/overlay.js">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/overlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/overlay.xul">mail/components/about-support/content/overlay.xul</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/overlay.xul">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/overlay.xul">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/overlay.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/prefs.js">mail/components/about-support/content/prefs.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/prefs.js">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/prefs.js">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/prefs.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/show-private.css">mail/components/about-support/content/show-private.css</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/show-private.css">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/show-private.css">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/content/show-private.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/jar.mn">mail/components/about-support/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/jar.mn">file</a> |
<a href="/comm-central/annotate/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/jar.mn">annotate</a> |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/jar.mn">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/jar.mn">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/moz.build">mail/components/about-support/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/moz.build">file</a> |
<a href="/comm-central/annotate/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/moz.build">annotate</a> |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/moz.build">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/moz.build">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/components/about-support/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/linux/jar.mn">mail/themes/linux/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/linux/jar.mn">file</a> |
<a href="/comm-central/annotate/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/linux/jar.mn">annotate</a> |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/linux/jar.mn">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/linux/jar.mn">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/linux/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/osx/jar.mn">mail/themes/osx/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/osx/jar.mn">file</a> |
<a href="/comm-central/annotate/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/osx/jar.mn">annotate</a> |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/osx/jar.mn">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/osx/jar.mn">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/osx/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/shared/mail/aboutSupport.css">mail/themes/shared/mail/aboutSupport.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/shared/mail/aboutSupport.css">file</a> |
<a href="/comm-central/annotate/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/shared/mail/aboutSupport.css">annotate</a> |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/shared/mail/aboutSupport.css">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/shared/mail/aboutSupport.css">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/shared/mail/aboutSupport.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/windows/jar.mn">mail/themes/windows/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/windows/jar.mn">file</a> |
<a href="/comm-central/annotate/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/windows/jar.mn">annotate</a> |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/windows/jar.mn">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/windows/jar.mn">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/windows/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/windows/mail/aboutSupport.css">mail/themes/windows/mail/aboutSupport.css</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/windows/mail/aboutSupport.css">diff</a> |
<a href="/comm-central/comparison/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/windows/mail/aboutSupport.css">comparison</a> |
<a href="/comm-central/log/e474c682bc73ff980a0716d4239aaa4e959b1657/mail/themes/windows/mail/aboutSupport.css">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/app/profile/all-thunderbird.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/app/profile/all-thunderbird.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -860,8 +860,17 @@ pref(&quot;mail.pgpmime.addon_url&quot;, &quot;https://</span>
<a href="#l1.4"></a><span id="l1.4"> pref(&quot;mail.main_menu.collapse_by_default&quot;, true);</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6"> // If set to true, when saving a message to a file, use underscore</span>
<a href="#l1.7"></a><span id="l1.7"> // instead of space in the file name.</span>
<a href="#l1.8"></a><span id="l1.8"> pref(&quot;mail.save_msg_filename_underscores_for_space&quot;, false);</span>
<a href="#l1.9"></a><span id="l1.9"> </span>
<a href="#l1.10"></a><span id="l1.10"> // calendar promotion status</span>
<a href="#l1.11"></a><span id="l1.11"> pref(&quot;mail.calendar-integration.opt-out&quot;, false);</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+#ifdef MOZ_CONTENT_SANDBOX</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+// This controls the strength of the Windows content process sandbox for testing</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+// purposes. This will require a restart.</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineplus">+// On windows these levels are:</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineplus">+// See - security/sandbox/win/src/sandboxbroker/sandboxBroker.cpp</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineplus">+// SetSecurityLevelForContentProcess() for what the different settings mean.</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineplus">+pref(&quot;security.sandbox.content.level&quot;, 0);</span>
<a href="#l1.20"></a><span id="l1.20" class="difflineplus">+#endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/base/content/baseMenuOverlay.xul</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/base/content/baseMenuOverlay.xul</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -41,16 +41,21 @@</span>
<a href="#l2.4"></a><span id="l2.4">                 key=&quot;key_openHelp&quot;/&gt;</span>
<a href="#l2.5"></a><span id="l2.5"> #endif</span>
<a href="#l2.6"></a><span id="l2.6">       &lt;menuitem id=&quot;whatsNew&quot;</span>
<a href="#l2.7"></a><span id="l2.7">                 label=&quot;&amp;whatsNewCmd.label;&quot; accesskey=&quot;&amp;whatsNewCmd.accesskey;&quot;</span>
<a href="#l2.8"></a><span id="l2.8">                 oncommand=&quot;openWhatsNew();&quot;/&gt;</span>
<a href="#l2.9"></a><span id="l2.9">       &lt;menuitem id=&quot;releaseNotes&quot;</span>
<a href="#l2.10"></a><span id="l2.10">                 label=&quot;&amp;releaseCmd2.label;&quot; accesskey=&quot;&amp;releaseCmd2.accesskey;&quot;</span>
<a href="#l2.11"></a><span id="l2.11">                 oncommand=&quot;openFormattedURL('app.releaseNotesURL');&quot;/&gt;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+      &lt;menuitem id=&quot;aboutsupport_open&quot;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+                label=&quot;&amp;helpTroubleshootingInfo.label;&quot;</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+                accesskey=&quot;&amp;helpTroubleshootingInfo.accesskey;&quot;</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+                insertafter=&quot;menu_openHelp&quot;</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineplus">+                oncommand=&quot;openAboutSupport();&quot; /&gt;</span>
<a href="#l2.17"></a><span id="l2.17">       &lt;menuseparator id=&quot;functionsSeparator&quot;/&gt;</span>
<a href="#l2.18"></a><span id="l2.18">       &lt;menuitem id=&quot;helpSafeMode&quot;</span>
<a href="#l2.19"></a><span id="l2.19">                 label=&quot;&amp;helpSafeMode.label;&quot;</span>
<a href="#l2.20"></a><span id="l2.20">                 accesskey=&quot;&amp;helpSafeMode.accesskey;&quot;</span>
<a href="#l2.21"></a><span id="l2.21">                 oncommand=&quot;safeModeRestart();&quot;/&gt;</span>
<a href="#l2.22"></a><span id="l2.22"> #ifndef XP_MACOSX</span>
<a href="#l2.23"></a><span id="l2.23">       &lt;menuseparator id=&quot;aboutSeparator&quot;/&gt;</span>
<a href="#l2.24"></a><span id="l2.24"> #endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/base/content/mailCore.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/base/content/mailCore.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -587,16 +587,25 @@ function openFormattedURL(aPrefName)</span>
<a href="#l3.4"></a><span id="l3.4">   var uri = Services.io.newURI(urlToOpen);</span>
<a href="#l3.5"></a><span id="l3.5"> </span>
<a href="#l3.6"></a><span id="l3.6">   var protocolSvc = Components.classes[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l3.7"></a><span id="l3.7">                               .getService(Components.interfaces.nsIExternalProtocolService);</span>
<a href="#l3.8"></a><span id="l3.8">   protocolSvc.loadURI(uri);</span>
<a href="#l3.9"></a><span id="l3.9"> }</span>
<a href="#l3.10"></a><span id="l3.10"> </span>
<a href="#l3.11"></a><span id="l3.11"> /**</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+ * Opens the Troubleshooting page in a new tab.</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+ */</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+function openAboutSupport() {</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+  let tabmail = document.getElementById(&quot;tabmail&quot;);</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+  tabmail.openTab(&quot;contentTab&quot;, {contentPage: &quot;about:support&quot;,</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+                  clickHandler: &quot;specialTabs.aboutClickHandler(event);&quot; });</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+}</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+/**</span>
<a href="#l3.21"></a><span id="l3.21">  * Prompt the user to restart the browser in safe mode.</span>
<a href="#l3.22"></a><span id="l3.22">  */</span>
<a href="#l3.23"></a><span id="l3.23"> function safeModeRestart()</span>
<a href="#l3.24"></a><span id="l3.24"> {</span>
<a href="#l3.25"></a><span id="l3.25">   // prompt the user to confirm</span>
<a href="#l3.26"></a><span id="l3.26">   let bundle = Services.strings.createBundle(</span>
<a href="#l3.27"></a><span id="l3.27">     &quot;chrome://messenger/locale/messenger.properties&quot;);</span>
<a href="#l3.28"></a><span id="l3.28">   let promptTitle = bundle.GetStringFromName(&quot;safeModeRestartPromptTitle&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/base/content/mailWindowOverlay.xul</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/base/content/mailWindowOverlay.xul</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -2185,17 +2185,17 @@</span>
<a href="#l4.4"></a><span id="l4.4">                         label=&quot;&amp;whatsNewCmd.label;&quot;</span>
<a href="#l4.5"></a><span id="l4.5">                         oncommand=&quot;openWhatsNew();&quot;/&gt;</span>
<a href="#l4.6"></a><span id="l4.6">               &lt;menuitem id=&quot;appmenu_releaseNotes&quot;</span>
<a href="#l4.7"></a><span id="l4.7">                         label=&quot;&amp;releaseCmd2.label;&quot;</span>
<a href="#l4.8"></a><span id="l4.8">                         oncommand=&quot;openFormattedURL('app.releaseNotesURL');&quot;/&gt;</span>
<a href="#l4.9"></a><span id="l4.9">               &lt;menuseparator/&gt;</span>
<a href="#l4.10"></a><span id="l4.10">               &lt;menuitem id=&quot;appmenu_troubleshootingInfo&quot;</span>
<a href="#l4.11"></a><span id="l4.11">                         label=&quot;&amp;helpTroubleshootingInfo.label;&quot;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-                        oncommand=&quot;AboutSupportOverlay.openInNewTab();&quot;/&gt;</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+                        oncommand=&quot;openAboutSupport();&quot;/&gt;</span>
<a href="#l4.14"></a><span id="l4.14">               &lt;menuseparator/&gt;</span>
<a href="#l4.15"></a><span id="l4.15">               &lt;menuitem id=&quot;appmenu_safeMode&quot;</span>
<a href="#l4.16"></a><span id="l4.16">                   label=&quot;&amp;helpSafeMode.label;&quot;</span>
<a href="#l4.17"></a><span id="l4.17">                   oncommand=&quot;safeModeRestart();&quot;/&gt;</span>
<a href="#l4.18"></a><span id="l4.18">               &lt;menuseparator/&gt;</span>
<a href="#l4.19"></a><span id="l4.19">               &lt;menuitem id=&quot;appmenu_about&quot;</span>
<a href="#l4.20"></a><span id="l4.20">                   label=&quot;&amp;aboutMenuCmd.label;&quot;</span>
<a href="#l4.21"></a><span id="l4.21">                   oncommand=&quot;openAboutDialog();&quot;/&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1">deleted file mode 100644</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineminus">--- a/mail/components/about-support/aboutSupport.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineplus">+++ /dev/null</span>
<a href="#l5.4"></a><span id="l5.4" class="difflineat">@@ -1,154 +0,0 @@</span>
<a href="#l5.5"></a><span id="l5.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l5.6"></a><span id="l5.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l5.7"></a><span id="l5.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l5.8"></a><span id="l5.8" class="difflineminus">-</span>
<a href="#l5.9"></a><span id="l5.9" class="difflineminus">-var EXPORTED_SYMBOLS = [&quot;AboutSupport&quot;];</span>
<a href="#l5.10"></a><span id="l5.10" class="difflineminus">-</span>
<a href="#l5.11"></a><span id="l5.11" class="difflineminus">-var Cc = Components.classes;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-var Ci = Components.interfaces;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineminus">-// Platform-specific includes</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineminus">-if (&quot;@mozilla.org/windows-registry-key;1&quot; in Components.classes)</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineminus">-  Components.utils.import(&quot;resource:///modules/aboutSupportWin32.js&quot;);</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineminus">-else if (&quot;nsILocalFileMac&quot; in Components.interfaces)</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineminus">-  Components.utils.import(&quot;resource:///modules/aboutSupportMac.js&quot;);</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineminus">-else</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineminus">-  Components.utils.import(&quot;resource:///modules/aboutSupportUnix.js&quot;);</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineminus">-</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineminus">-Components.utils.import(&quot;resource:///modules/iteratorUtils.jsm&quot;);</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineminus">-Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineminus">-Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineminus">-</span>
<a href="#l5.26"></a><span id="l5.26" class="difflineminus">-var gMessengerBundle = Services.strings.createBundle(</span>
<a href="#l5.27"></a><span id="l5.27" class="difflineminus">-  &quot;chrome://messenger/locale/messenger.properties&quot;);</span>
<a href="#l5.28"></a><span id="l5.28" class="difflineminus">-</span>
<a href="#l5.29"></a><span id="l5.29" class="difflineminus">-var gSocketTypes = {};</span>
<a href="#l5.30"></a><span id="l5.30" class="difflineminus">-for (let [str, index] of Object.entries(Ci.nsMsgSocketType))</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">-  gSocketTypes[index] = str;</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineminus">-</span>
<a href="#l5.33"></a><span id="l5.33" class="difflineminus">-var gAuthMethods = {};</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineminus">-for (let [str, index] of Object.entries(Ci.nsMsgAuthMethod))</span>
<a href="#l5.35"></a><span id="l5.35" class="difflineminus">-  gAuthMethods[index] = str;</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineminus">-</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineminus">-// l10n properties in messenger.properties corresponding to each auth method</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineminus">-var gAuthMethodProperties = {</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineminus">-  &quot;1&quot;: &quot;authOld&quot;,</span>
<a href="#l5.40"></a><span id="l5.40" class="difflineminus">-  &quot;2&quot;: &quot;authPasswordCleartextInsecurely&quot;,</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineminus">-  &quot;3&quot;: &quot;authPasswordCleartextViaSSL&quot;,</span>
<a href="#l5.42"></a><span id="l5.42" class="difflineminus">-  &quot;4&quot;: &quot;authPasswordEncrypted&quot;,</span>
<a href="#l5.43"></a><span id="l5.43" class="difflineminus">-  &quot;5&quot;: &quot;authKerberos&quot;,</span>
<a href="#l5.44"></a><span id="l5.44" class="difflineminus">-  &quot;6&quot;: &quot;authNTLM&quot;,</span>
<a href="#l5.45"></a><span id="l5.45" class="difflineminus">-  &quot;8&quot;: &quot;authAnySecure&quot;</span>
<a href="#l5.46"></a><span id="l5.46" class="difflineminus">-};</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineminus">-</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineminus">-var AboutSupport = {</span>
<a href="#l5.49"></a><span id="l5.49" class="difflineminus">-  __proto__: AboutSupportPlatform,</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineminus">-</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineminus">-  /**</span>
<a href="#l5.52"></a><span id="l5.52" class="difflineminus">-   * Gets details about SMTP servers for a given nsIMsgAccount.</span>
<a href="#l5.53"></a><span id="l5.53" class="difflineminus">-   *</span>
<a href="#l5.54"></a><span id="l5.54" class="difflineminus">-   * @returns An array of records, each record containing the name and other details</span>
<a href="#l5.55"></a><span id="l5.55" class="difflineminus">-   *          about one SMTP server.</span>
<a href="#l5.56"></a><span id="l5.56" class="difflineminus">-   */</span>
<a href="#l5.57"></a><span id="l5.57" class="difflineminus">-  _getSMTPDetails: function AboutSupport__getSMTPDetails(aAccount) {</span>
<a href="#l5.58"></a><span id="l5.58" class="difflineminus">-    let identities = aAccount.identities;</span>
<a href="#l5.59"></a><span id="l5.59" class="difflineminus">-    let defaultIdentity = aAccount.defaultIdentity;</span>
<a href="#l5.60"></a><span id="l5.60" class="difflineminus">-    let smtpDetails = [];</span>
<a href="#l5.61"></a><span id="l5.61" class="difflineminus">-</span>
<a href="#l5.62"></a><span id="l5.62" class="difflineminus">-    for (let identity in fixIterator(identities, Ci.nsIMsgIdentity)) {</span>
<a href="#l5.63"></a><span id="l5.63" class="difflineminus">-      let isDefault = identity == defaultIdentity;</span>
<a href="#l5.64"></a><span id="l5.64" class="difflineminus">-      let smtpServer = {};</span>
<a href="#l5.65"></a><span id="l5.65" class="difflineminus">-      MailServices.smtp.getServerByIdentity(identity, smtpServer);</span>
<a href="#l5.66"></a><span id="l5.66" class="difflineminus">-      smtpDetails.push({identityName: identity.identityName,</span>
<a href="#l5.67"></a><span id="l5.67" class="difflineminus">-                        name: smtpServer.value.displayname,</span>
<a href="#l5.68"></a><span id="l5.68" class="difflineminus">-                        authMethod: smtpServer.value.authMethod,</span>
<a href="#l5.69"></a><span id="l5.69" class="difflineminus">-                        socketType: smtpServer.value.socketType,</span>
<a href="#l5.70"></a><span id="l5.70" class="difflineminus">-                        isDefault: isDefault});</span>
<a href="#l5.71"></a><span id="l5.71" class="difflineminus">-    }</span>
<a href="#l5.72"></a><span id="l5.72" class="difflineminus">-</span>
<a href="#l5.73"></a><span id="l5.73" class="difflineminus">-    return smtpDetails;</span>
<a href="#l5.74"></a><span id="l5.74" class="difflineminus">-  },</span>
<a href="#l5.75"></a><span id="l5.75" class="difflineminus">-</span>
<a href="#l5.76"></a><span id="l5.76" class="difflineminus">-  /**</span>
<a href="#l5.77"></a><span id="l5.77" class="difflineminus">-   * Returns account details as an array of records.</span>
<a href="#l5.78"></a><span id="l5.78" class="difflineminus">-   */</span>
<a href="#l5.79"></a><span id="l5.79" class="difflineminus">-  getAccountDetails: function AboutSupport_getAccountDetails() {</span>
<a href="#l5.80"></a><span id="l5.80" class="difflineminus">-    let accountDetails = [];</span>
<a href="#l5.81"></a><span id="l5.81" class="difflineminus">-    let accounts = MailServices.accounts.accounts;</span>
<a href="#l5.82"></a><span id="l5.82" class="difflineminus">-</span>
<a href="#l5.83"></a><span id="l5.83" class="difflineminus">-    for (let account in fixIterator(accounts, Ci.nsIMsgAccount)) {</span>
<a href="#l5.84"></a><span id="l5.84" class="difflineminus">-      let server = account.incomingServer;</span>
<a href="#l5.85"></a><span id="l5.85" class="difflineminus">-      accountDetails.push({</span>
<a href="#l5.86"></a><span id="l5.86" class="difflineminus">-        key: account.key,</span>
<a href="#l5.87"></a><span id="l5.87" class="difflineminus">-        name: server.prettyName,</span>
<a href="#l5.88"></a><span id="l5.88" class="difflineminus">-        hostDetails: &quot;(&quot; + server.type + &quot;) &quot; + server.realHostName +</span>
<a href="#l5.89"></a><span id="l5.89" class="difflineminus">-                     (server.port != -1 ? (&quot;:&quot; + server.port) : &quot;&quot;),</span>
<a href="#l5.90"></a><span id="l5.90" class="difflineminus">-        socketType: server.socketType,</span>
<a href="#l5.91"></a><span id="l5.91" class="difflineminus">-        authMethod: server.authMethod,</span>
<a href="#l5.92"></a><span id="l5.92" class="difflineminus">-        smtpServers: this._getSMTPDetails(account),</span>
<a href="#l5.93"></a><span id="l5.93" class="difflineminus">-      });</span>
<a href="#l5.94"></a><span id="l5.94" class="difflineminus">-    }</span>
<a href="#l5.95"></a><span id="l5.95" class="difflineminus">-</span>
<a href="#l5.96"></a><span id="l5.96" class="difflineminus">-    function idCompare(accountA, accountB) {</span>
<a href="#l5.97"></a><span id="l5.97" class="difflineminus">-      let regex = /^account([0-9]+)$/;</span>
<a href="#l5.98"></a><span id="l5.98" class="difflineminus">-      let regexA = regex.exec(accountA.key);</span>
<a href="#l5.99"></a><span id="l5.99" class="difflineminus">-      let regexB = regex.exec(accountB.key);</span>
<a href="#l5.100"></a><span id="l5.100" class="difflineminus">-      // There's an off chance that the account ID isn't in the standard</span>
<a href="#l5.101"></a><span id="l5.101" class="difflineminus">-      // accountN form. If so, use the standard string compare against a fixed</span>
<a href="#l5.102"></a><span id="l5.102" class="difflineminus">-      // string (&quot;account&quot;) to avoid correctness issues.</span>
<a href="#l5.103"></a><span id="l5.103" class="difflineminus">-      if (!regexA || !regexB) {</span>
<a href="#l5.104"></a><span id="l5.104" class="difflineminus">-        let keyA = regexA ? &quot;account&quot; : accountA.key;</span>
<a href="#l5.105"></a><span id="l5.105" class="difflineminus">-        let keyB = regexB ? &quot;account&quot; : accountB.key;</span>
<a href="#l5.106"></a><span id="l5.106" class="difflineminus">-        return keyA.localeCompare(keyB);</span>
<a href="#l5.107"></a><span id="l5.107" class="difflineminus">-      }</span>
<a href="#l5.108"></a><span id="l5.108" class="difflineminus">-      let idA = parseInt(regexA[1]);</span>
<a href="#l5.109"></a><span id="l5.109" class="difflineminus">-      let idB = parseInt(regexB[1]);</span>
<a href="#l5.110"></a><span id="l5.110" class="difflineminus">-      return idA - idB;</span>
<a href="#l5.111"></a><span id="l5.111" class="difflineminus">-    }</span>
<a href="#l5.112"></a><span id="l5.112" class="difflineminus">-</span>
<a href="#l5.113"></a><span id="l5.113" class="difflineminus">-    // Sort accountDetails by account ID.</span>
<a href="#l5.114"></a><span id="l5.114" class="difflineminus">-    accountDetails.sort(idCompare);</span>
<a href="#l5.115"></a><span id="l5.115" class="difflineminus">-    return accountDetails;</span>
<a href="#l5.116"></a><span id="l5.116" class="difflineminus">-  },</span>
<a href="#l5.117"></a><span id="l5.117" class="difflineminus">-</span>
<a href="#l5.118"></a><span id="l5.118" class="difflineminus">-  /**</span>
<a href="#l5.119"></a><span id="l5.119" class="difflineminus">-   * Returns the corresponding text for a given socket type index. The text is</span>
<a href="#l5.120"></a><span id="l5.120" class="difflineminus">-   * returned as a record with &quot;localized&quot; and &quot;neutral&quot; entries.</span>
<a href="#l5.121"></a><span id="l5.121" class="difflineminus">-   */</span>
<a href="#l5.122"></a><span id="l5.122" class="difflineminus">-  getSocketTypeText: function AboutSupport_getSocketTypeText(aIndex) {</span>
<a href="#l5.123"></a><span id="l5.123" class="difflineminus">-    let plainSocketType = (aIndex in gSocketTypes ?</span>
<a href="#l5.124"></a><span id="l5.124" class="difflineminus">-                           gSocketTypes[aIndex] : aIndex);</span>
<a href="#l5.125"></a><span id="l5.125" class="difflineminus">-    let prettySocketType;</span>
<a href="#l5.126"></a><span id="l5.126" class="difflineminus">-    try {</span>
<a href="#l5.127"></a><span id="l5.127" class="difflineminus">-      prettySocketType = gMessengerBundle.GetStringFromName(</span>
<a href="#l5.128"></a><span id="l5.128" class="difflineminus">-        &quot;smtpServer-ConnectionSecurityType-&quot; + aIndex);</span>
<a href="#l5.129"></a><span id="l5.129" class="difflineminus">-    }</span>
<a href="#l5.130"></a><span id="l5.130" class="difflineminus">-    catch (e) {</span>
<a href="#l5.131"></a><span id="l5.131" class="difflineminus">-      if (e.result == Components.results.NS_ERROR_FAILURE) {</span>
<a href="#l5.132"></a><span id="l5.132" class="difflineminus">-        // The string wasn't found in the bundle. Make do without it.</span>
<a href="#l5.133"></a><span id="l5.133" class="difflineminus">-        prettySocketType = plainSocketType;</span>
<a href="#l5.134"></a><span id="l5.134" class="difflineminus">-      } else {</span>
<a href="#l5.135"></a><span id="l5.135" class="difflineminus">-        throw e;</span>
<a href="#l5.136"></a><span id="l5.136" class="difflineminus">-      }</span>
<a href="#l5.137"></a><span id="l5.137" class="difflineminus">-    }</span>
<a href="#l5.138"></a><span id="l5.138" class="difflineminus">-    return {localized: prettySocketType, neutral: plainSocketType};</span>
<a href="#l5.139"></a><span id="l5.139" class="difflineminus">-  },</span>
<a href="#l5.140"></a><span id="l5.140" class="difflineminus">-</span>
<a href="#l5.141"></a><span id="l5.141" class="difflineminus">-  /**</span>
<a href="#l5.142"></a><span id="l5.142" class="difflineminus">-   * Returns the corresponding text for a given authentication method index. The</span>
<a href="#l5.143"></a><span id="l5.143" class="difflineminus">-   * text is returned as a record with &quot;localized&quot; and &quot;neutral&quot; entries.</span>
<a href="#l5.144"></a><span id="l5.144" class="difflineminus">-   */</span>
<a href="#l5.145"></a><span id="l5.145" class="difflineminus">-  getAuthMethodText: function AboutSupport_getAuthMethodText(aIndex) {</span>
<a href="#l5.146"></a><span id="l5.146" class="difflineminus">-    let prettyAuthMethod;</span>
<a href="#l5.147"></a><span id="l5.147" class="difflineminus">-    let plainAuthMethod = (aIndex in gAuthMethods ?</span>
<a href="#l5.148"></a><span id="l5.148" class="difflineminus">-                           gAuthMethods[aIndex] : aIndex);</span>
<a href="#l5.149"></a><span id="l5.149" class="difflineminus">-    if (aIndex in gAuthMethodProperties) {</span>
<a href="#l5.150"></a><span id="l5.150" class="difflineminus">-      prettyAuthMethod =</span>
<a href="#l5.151"></a><span id="l5.151" class="difflineminus">-        gMessengerBundle.GetStringFromName(gAuthMethodProperties[aIndex]);</span>
<a href="#l5.152"></a><span id="l5.152" class="difflineminus">-    }</span>
<a href="#l5.153"></a><span id="l5.153" class="difflineminus">-    else {</span>
<a href="#l5.154"></a><span id="l5.154" class="difflineminus">-      prettyAuthMethod = plainAuthMethod;</span>
<a href="#l5.155"></a><span id="l5.155" class="difflineminus">-    }</span>
<a href="#l5.156"></a><span id="l5.156" class="difflineminus">-    return {localized: prettyAuthMethod, neutral: plainAuthMethod};</span>
<a href="#l5.157"></a><span id="l5.157" class="difflineminus">-  }</span>
<a href="#l5.158"></a><span id="l5.158" class="difflineminus">-};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1">deleted file mode 100644</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineminus">--- a/mail/components/about-support/content/a11y.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineplus">+++ /dev/null</span>
<a href="#l6.4"></a><span id="l6.4" class="difflineat">@@ -1,26 +0,0 @@</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l6.6"></a><span id="l6.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l6.7"></a><span id="l6.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l6.8"></a><span id="l6.8" class="difflineminus">-</span>
<a href="#l6.9"></a><span id="l6.9" class="difflineminus">-&quot;use strict&quot;;</span>
<a href="#l6.10"></a><span id="l6.10" class="difflineminus">-</span>
<a href="#l6.11"></a><span id="l6.11" class="difflineminus">-function populateAccessibilitySection() {</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-  var active;</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-  try {</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineminus">-    active = Components.manager.QueryInterface(Ci.nsIServiceManager)</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineminus">-      .isServiceInstantiatedByContractID(</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineminus">-        &quot;@mozilla.org/accessibilityService;1&quot;,</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineminus">-        Ci.nsISupports);</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineminus">-  } catch (ex) {</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineminus">-    active = false;</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineminus">-  }</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineminus">-</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineminus">-  document.getElementById(&quot;a11y-activated&quot;).textContent = active ? &quot;1&quot; : &quot;0&quot;;</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineminus">-</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineminus">-  var forceDisabled = 0;</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineminus">-  forceDisabled = Services.prefs.getIntPref(&quot;accessibility.force_disabled&quot;);</span>
<a href="#l6.26"></a><span id="l6.26" class="difflineminus">-</span>
<a href="#l6.27"></a><span id="l6.27" class="difflineminus">-  document.getElementById(&quot;a11y-force-disabled&quot;).textContent</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineminus">-    = (forceDisabled == -1) ? &quot;never&quot; :</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineminus">-  ((forceDisabled == 1) ? &quot;1&quot; : &quot;0&quot;);</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1">new file mode 100644</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineminus">--- /dev/null</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineplus">+++ b/mail/components/about-support/content/aboutSupport.js</span>
<a href="#l7.4"></a><span id="l7.4" class="difflineat">@@ -0,0 +1,1108 @@</span>
<a href="#l7.5"></a><span id="l7.5" class="difflineplus">+/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l7.6"></a><span id="l7.6" class="difflineplus">+ * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l7.7"></a><span id="l7.7" class="difflineplus">+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l7.8"></a><span id="l7.8" class="difflineplus">+</span>
<a href="#l7.9"></a><span id="l7.9" class="difflineplus">+/* This file is a copy of mozilla/toolkit/content/aboutSupport.js with</span>
<a href="#l7.10"></a><span id="l7.10" class="difflineplus">+   modifications for TB. */</span>
<a href="#l7.11"></a><span id="l7.11" class="difflineplus">+</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+&quot;use strict&quot;;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+var { classes: Cc, interfaces: Ci, utils: Cu } = Components;</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineplus">+Cu.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineplus">+Cu.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineplus">+Cu.import(&quot;resource://gre/modules/Troubleshoot.jsm&quot;);</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineplus">+Cu.import(&quot;resource://gre/modules/ResetProfile.jsm&quot;);</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineplus">+Cu.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineplus">+// added for TB</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineplus">+Cu.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l7.23"></a><span id="l7.23" class="difflineplus">+</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineplus">+// Platform-specific includes</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineplus">+if (&quot;@mozilla.org/windows-registry-key;1&quot; in Cc)</span>
<a href="#l7.26"></a><span id="l7.26" class="difflineplus">+  Cu.import(&quot;resource:///modules/aboutSupportWin32.js&quot;);</span>
<a href="#l7.27"></a><span id="l7.27" class="difflineplus">+else if (&quot;nsILocalFileMac&quot; in Ci)</span>
<a href="#l7.28"></a><span id="l7.28" class="difflineplus">+  Cu.import(&quot;resource:///modules/aboutSupportMac.js&quot;);</span>
<a href="#l7.29"></a><span id="l7.29" class="difflineplus">+else</span>
<a href="#l7.30"></a><span id="l7.30" class="difflineplus">+  Cu.import(&quot;resource:///modules/aboutSupportUnix.js&quot;);</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineplus">+// end of TB addition</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineplus">+XPCOMUtils.defineLazyModuleGetter(this, &quot;PluralForm&quot;,</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineplus">+                                  &quot;resource://gre/modules/PluralForm.jsm&quot;);</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineplus">+XPCOMUtils.defineLazyModuleGetter(this, &quot;PlacesDBUtils&quot;,</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineplus">+                                  &quot;resource://gre/modules/PlacesDBUtils.jsm&quot;);</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineplus">+</span>
<a href="#l7.38"></a><span id="l7.38" class="difflineplus">+// added for TB</span>
<a href="#l7.39"></a><span id="l7.39" class="difflineplus">+/* Node classes. All of these are mutually exclusive. */</span>
<a href="#l7.40"></a><span id="l7.40" class="difflineplus">+</span>
<a href="#l7.41"></a><span id="l7.41" class="difflineplus">+// Any nodes marked with this class will be considered part of the UI only,</span>
<a href="#l7.42"></a><span id="l7.42" class="difflineplus">+// and therefore will not be copied.</span>
<a href="#l7.43"></a><span id="l7.43" class="difflineplus">+var CLASS_DATA_UIONLY = &quot;data-uionly&quot;;</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineplus">+</span>
<a href="#l7.45"></a><span id="l7.45" class="difflineplus">+// Any nodes marked with this class will be considered private and will be</span>
<a href="#l7.46"></a><span id="l7.46" class="difflineplus">+// hidden if the user requests only public data to be shown or copied.</span>
<a href="#l7.47"></a><span id="l7.47" class="difflineplus">+var CLASS_DATA_PRIVATE = &quot;data-private&quot;;</span>
<a href="#l7.48"></a><span id="l7.48" class="difflineplus">+</span>
<a href="#l7.49"></a><span id="l7.49" class="difflineplus">+// Any nodes marked with this class will only be displayed when the user chooses</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineplus">+// to not display private data.</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineplus">+var CLASS_DATA_PUBLIC = &quot;data-public&quot;;</span>
<a href="#l7.52"></a><span id="l7.52" class="difflineplus">+// end of TB addition</span>
<a href="#l7.53"></a><span id="l7.53" class="difflineplus">+window.addEventListener(&quot;load&quot;, function onload(event) {</span>
<a href="#l7.54"></a><span id="l7.54" class="difflineplus">+  try {</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineplus">+  window.removeEventListener(&quot;load&quot;, onload);</span>
<a href="#l7.56"></a><span id="l7.56" class="difflineplus">+  Troubleshoot.snapshot(function(snapshot) {</span>
<a href="#l7.57"></a><span id="l7.57" class="difflineplus">+    for (let prop in snapshotFormatters)</span>
<a href="#l7.58"></a><span id="l7.58" class="difflineplus">+      snapshotFormatters[prop](snapshot[prop]);</span>
<a href="#l7.59"></a><span id="l7.59" class="difflineplus">+  });</span>
<a href="#l7.60"></a><span id="l7.60" class="difflineplus">+  populateActionBox();</span>
<a href="#l7.61"></a><span id="l7.61" class="difflineplus">+  setupEventListeners();</span>
<a href="#l7.62"></a><span id="l7.62" class="difflineplus">+  } catch (e) {</span>
<a href="#l7.63"></a><span id="l7.63" class="difflineplus">+    Cu.reportError(&quot;stack of load error for about:support: &quot; + e + &quot;: &quot; + e.stack);</span>
<a href="#l7.64"></a><span id="l7.64" class="difflineplus">+  }</span>
<a href="#l7.65"></a><span id="l7.65" class="difflineplus">+  // added for TB</span>
<a href="#l7.66"></a><span id="l7.66" class="difflineplus">+  populateAccountsSection();</span>
<a href="#l7.67"></a><span id="l7.67" class="difflineplus">+});</span>
<a href="#l7.68"></a><span id="l7.68" class="difflineplus">+</span>
<a href="#l7.69"></a><span id="l7.69" class="difflineplus">+// Each property in this object corresponds to a property in Troubleshoot.jsm's</span>
<a href="#l7.70"></a><span id="l7.70" class="difflineplus">+// snapshot data.  Each function is passed its property's corresponding data,</span>
<a href="#l7.71"></a><span id="l7.71" class="difflineplus">+// and it's the function's job to update the page with it.</span>
<a href="#l7.72"></a><span id="l7.72" class="difflineplus">+var snapshotFormatters = {</span>
<a href="#l7.73"></a><span id="l7.73" class="difflineplus">+</span>
<a href="#l7.74"></a><span id="l7.74" class="difflineplus">+  application: function application(data) {</span>
<a href="#l7.75"></a><span id="l7.75" class="difflineplus">+    let strings = stringBundle();</span>
<a href="#l7.76"></a><span id="l7.76" class="difflineplus">+    $(&quot;application-box&quot;).textContent = data.name;</span>
<a href="#l7.77"></a><span id="l7.77" class="difflineplus">+    $(&quot;useragent-box&quot;).textContent = data.userAgent;</span>
<a href="#l7.78"></a><span id="l7.78" class="difflineplus">+    $(&quot;os-box&quot;).textContent = data.osVersion;</span>
<a href="#l7.79"></a><span id="l7.79" class="difflineplus">+    $(&quot;supportLink&quot;).href = data.supportURL;</span>
<a href="#l7.80"></a><span id="l7.80" class="difflineplus">+    let version = AppConstants.MOZ_APP_VERSION_DISPLAY;</span>
<a href="#l7.81"></a><span id="l7.81" class="difflineplus">+    if (data.vendor)</span>
<a href="#l7.82"></a><span id="l7.82" class="difflineplus">+      version += &quot; (&quot; + data.vendor + &quot;)&quot;;</span>
<a href="#l7.83"></a><span id="l7.83" class="difflineplus">+    $(&quot;version-box&quot;).textContent = version;</span>
<a href="#l7.84"></a><span id="l7.84" class="difflineplus">+    $(&quot;buildid-box&quot;).textContent = data.buildID;</span>
<a href="#l7.85"></a><span id="l7.85" class="difflineplus">+    if (data.updateChannel)</span>
<a href="#l7.86"></a><span id="l7.86" class="difflineplus">+      $(&quot;updatechannel-box&quot;).textContent = data.updateChannel;</span>
<a href="#l7.87"></a><span id="l7.87" class="difflineplus">+</span>
<a href="#l7.88"></a><span id="l7.88" class="difflineplus">+    let statusText = strings.GetStringFromName(&quot;multiProcessStatus.unknown&quot;);</span>
<a href="#l7.89"></a><span id="l7.89" class="difflineplus">+</span>
<a href="#l7.90"></a><span id="l7.90" class="difflineplus">+    // Whitelist of known values with string descriptions:</span>
<a href="#l7.91"></a><span id="l7.91" class="difflineplus">+    switch (data.autoStartStatus) {</span>
<a href="#l7.92"></a><span id="l7.92" class="difflineplus">+      case 0:</span>
<a href="#l7.93"></a><span id="l7.93" class="difflineplus">+      case 1:</span>
<a href="#l7.94"></a><span id="l7.94" class="difflineplus">+      case 2:</span>
<a href="#l7.95"></a><span id="l7.95" class="difflineplus">+      case 4:</span>
<a href="#l7.96"></a><span id="l7.96" class="difflineplus">+      case 6:</span>
<a href="#l7.97"></a><span id="l7.97" class="difflineplus">+      case 7:</span>
<a href="#l7.98"></a><span id="l7.98" class="difflineplus">+      case 8:</span>
<a href="#l7.99"></a><span id="l7.99" class="difflineplus">+        statusText = strings.GetStringFromName(&quot;multiProcessStatus.&quot; + data.autoStartStatus);</span>
<a href="#l7.100"></a><span id="l7.100" class="difflineplus">+        break;</span>
<a href="#l7.101"></a><span id="l7.101" class="difflineplus">+</span>
<a href="#l7.102"></a><span id="l7.102" class="difflineplus">+      case 10:</span>
<a href="#l7.103"></a><span id="l7.103" class="difflineplus">+        statusText = (Services.appinfo.OS == &quot;Darwin&quot; ? &quot;OS X 10.6 - 10.8&quot; : &quot;Windows XP&quot;);</span>
<a href="#l7.104"></a><span id="l7.104" class="difflineplus">+        break;</span>
<a href="#l7.105"></a><span id="l7.105" class="difflineplus">+    }</span>
<a href="#l7.106"></a><span id="l7.106" class="difflineplus">+</span>
<a href="#l7.107"></a><span id="l7.107" class="difflineplus">+    $(&quot;multiprocess-box&quot;).textContent = strings.formatStringFromName(&quot;multiProcessWindows&quot;,</span>
<a href="#l7.108"></a><span id="l7.108" class="difflineplus">+      [data.numRemoteWindows, data.numTotalWindows, statusText], 3);</span>
<a href="#l7.109"></a><span id="l7.109" class="difflineplus">+</span>
<a href="#l7.110"></a><span id="l7.110" class="difflineplus">+    let keyGoogleFound = data.keyGoogleFound ? &quot;found&quot; : &quot;missing&quot;;</span>
<a href="#l7.111"></a><span id="l7.111" class="difflineplus">+    $(&quot;key-google-box&quot;).textContent = strings.GetStringFromName(keyGoogleFound);</span>
<a href="#l7.112"></a><span id="l7.112" class="difflineplus">+</span>
<a href="#l7.113"></a><span id="l7.113" class="difflineplus">+    let keyMozillaFound = data.keyMozillaFound ? &quot;found&quot; : &quot;missing&quot;;</span>
<a href="#l7.114"></a><span id="l7.114" class="difflineplus">+    $(&quot;key-mozilla-box&quot;).textContent = strings.GetStringFromName(keyMozillaFound);</span>
<a href="#l7.115"></a><span id="l7.115" class="difflineplus">+</span>
<a href="#l7.116"></a><span id="l7.116" class="difflineplus">+    $(&quot;safemode-box&quot;).textContent = data.safeMode;</span>
<a href="#l7.117"></a><span id="l7.117" class="difflineplus">+</span>
<a href="#l7.118"></a><span id="l7.118" class="difflineplus">+    // added for TB</span>
<a href="#l7.119"></a><span id="l7.119" class="difflineplus">+    // Add profile path as private info into the page.</span>
<a href="#l7.120"></a><span id="l7.120" class="difflineplus">+    let currProfD = Services.dirsvc.get(&quot;ProfD&quot;, Ci.nsIFile);</span>
<a href="#l7.121"></a><span id="l7.121" class="difflineplus">+    let profElem = document.getElementById(&quot;profile-dir-button&quot;).parentNode;</span>
<a href="#l7.122"></a><span id="l7.122" class="difflineplus">+    let profDirNode = document.createElement(&quot;span&quot;);</span>
<a href="#l7.123"></a><span id="l7.123" class="difflineplus">+    profDirNode.setAttribute(&quot;class&quot;, CLASS_DATA_PRIVATE);</span>
<a href="#l7.124"></a><span id="l7.124" class="difflineplus">+    let profLinkNode = document.createElement(&quot;a&quot;);</span>
<a href="#l7.125"></a><span id="l7.125" class="difflineplus">+    profLinkNode.setAttribute(&quot;href&quot;, Services.io.newFileURI(currProfD).spec);</span>
<a href="#l7.126"></a><span id="l7.126" class="difflineplus">+    profLinkNode.setAttribute(&quot;onclick&quot;, &quot;openProfileDirectory(); event.preventDefault();&quot;);</span>
<a href="#l7.127"></a><span id="l7.127" class="difflineplus">+    let profPathNode = document.createTextNode(currProfD.path);</span>
<a href="#l7.128"></a><span id="l7.128" class="difflineplus">+    profLinkNode.appendChild(profPathNode);</span>
<a href="#l7.129"></a><span id="l7.129" class="difflineplus">+    profDirNode.appendChild(profLinkNode);</span>
<a href="#l7.130"></a><span id="l7.130" class="difflineplus">+    profElem.appendChild(profDirNode);</span>
<a href="#l7.131"></a><span id="l7.131" class="difflineplus">+    profElem.appendChild(document.createTextNode(&quot; &quot;));</span>
<a href="#l7.132"></a><span id="l7.132" class="difflineplus">+</span>
<a href="#l7.133"></a><span id="l7.133" class="difflineplus">+    // Show type of filesystem detected.</span>
<a href="#l7.134"></a><span id="l7.134" class="difflineplus">+    let fsType;</span>
<a href="#l7.135"></a><span id="l7.135" class="difflineplus">+    try {</span>
<a href="#l7.136"></a><span id="l7.136" class="difflineplus">+      fsType = AboutSupportPlatform.getFileSystemType(currProfD);</span>
<a href="#l7.137"></a><span id="l7.137" class="difflineplus">+      let bundle = Services.strings.createBundle(</span>
<a href="#l7.138"></a><span id="l7.138" class="difflineplus">+        &quot;chrome://messenger/locale/aboutSupportMail.properties&quot;);</span>
<a href="#l7.139"></a><span id="l7.139" class="difflineplus">+      let fsText = bundle.GetStringFromName(&quot;fsType.&quot; + fsType);</span>
<a href="#l7.140"></a><span id="l7.140" class="difflineplus">+      let fsTextNode = document.createElement(&quot;span&quot;);</span>
<a href="#l7.141"></a><span id="l7.141" class="difflineplus">+      fsTextNode.textContent = fsText;</span>
<a href="#l7.142"></a><span id="l7.142" class="difflineplus">+      profElem.appendChild(fsTextNode);</span>
<a href="#l7.143"></a><span id="l7.143" class="difflineplus">+    }</span>
<a href="#l7.144"></a><span id="l7.144" class="difflineplus">+    catch (x) {</span>
<a href="#l7.145"></a><span id="l7.145" class="difflineplus">+      Components.utils.reportError(x);</span>
<a href="#l7.146"></a><span id="l7.146" class="difflineplus">+    }</span>
<a href="#l7.147"></a><span id="l7.147" class="difflineplus">+    // end of TB addition</span>
<a href="#l7.148"></a><span id="l7.148" class="difflineplus">+  },</span>
<a href="#l7.149"></a><span id="l7.149" class="difflineplus">+</span>
<a href="#l7.150"></a><span id="l7.150" class="difflineplus">+  crashes: function crashes(data) {</span>
<a href="#l7.151"></a><span id="l7.151" class="difflineplus">+    if (!AppConstants.MOZ_CRASHREPORTER)</span>
<a href="#l7.152"></a><span id="l7.152" class="difflineplus">+      return;</span>
<a href="#l7.153"></a><span id="l7.153" class="difflineplus">+</span>
<a href="#l7.154"></a><span id="l7.154" class="difflineplus">+    let strings = stringBundle();</span>
<a href="#l7.155"></a><span id="l7.155" class="difflineplus">+    let daysRange = Troubleshoot.kMaxCrashAge / (24 * 60 * 60 * 1000);</span>
<a href="#l7.156"></a><span id="l7.156" class="difflineplus">+    $(&quot;crashes-title&quot;).textContent =</span>
<a href="#l7.157"></a><span id="l7.157" class="difflineplus">+      PluralForm.get(daysRange, strings.GetStringFromName(&quot;crashesTitle&quot;))</span>
<a href="#l7.158"></a><span id="l7.158" class="difflineplus">+                .replace(&quot;#1&quot;, daysRange);</span>
<a href="#l7.159"></a><span id="l7.159" class="difflineplus">+    let reportURL;</span>
<a href="#l7.160"></a><span id="l7.160" class="difflineplus">+    try {</span>
<a href="#l7.161"></a><span id="l7.161" class="difflineplus">+      reportURL = Services.prefs.getCharPref(&quot;breakpad.reportURL&quot;);</span>
<a href="#l7.162"></a><span id="l7.162" class="difflineplus">+      // Ignore any non http/https urls</span>
<a href="#l7.163"></a><span id="l7.163" class="difflineplus">+      if (!/^https?:/i.test(reportURL))</span>
<a href="#l7.164"></a><span id="l7.164" class="difflineplus">+        reportURL = null;</span>
<a href="#l7.165"></a><span id="l7.165" class="difflineplus">+    } catch (e) { }</span>
<a href="#l7.166"></a><span id="l7.166" class="difflineplus">+    if (!reportURL) {</span>
<a href="#l7.167"></a><span id="l7.167" class="difflineplus">+      $(&quot;crashes-noConfig&quot;).style.display = &quot;block&quot;;</span>
<a href="#l7.168"></a><span id="l7.168" class="difflineplus">+      $(&quot;crashes-noConfig&quot;).classList.remove(&quot;no-copy&quot;);</span>
<a href="#l7.169"></a><span id="l7.169" class="difflineplus">+      return;</span>
<a href="#l7.170"></a><span id="l7.170" class="difflineplus">+    }</span>
<a href="#l7.171"></a><span id="l7.171" class="difflineplus">+    $(&quot;crashes-allReports&quot;).style.display = &quot;block&quot;;</span>
<a href="#l7.172"></a><span id="l7.172" class="difflineplus">+    $(&quot;crashes-allReports&quot;).classList.remove(&quot;no-copy&quot;);</span>
<a href="#l7.173"></a><span id="l7.173" class="difflineplus">+</span>
<a href="#l7.174"></a><span id="l7.174" class="difflineplus">+    if (data.pending &gt; 0) {</span>
<a href="#l7.175"></a><span id="l7.175" class="difflineplus">+      $(&quot;crashes-allReportsWithPending&quot;).textContent =</span>
<a href="#l7.176"></a><span id="l7.176" class="difflineplus">+        PluralForm.get(data.pending, strings.GetStringFromName(&quot;pendingReports&quot;))</span>
<a href="#l7.177"></a><span id="l7.177" class="difflineplus">+                  .replace(&quot;#1&quot;, data.pending);</span>
<a href="#l7.178"></a><span id="l7.178" class="difflineplus">+    }</span>
<a href="#l7.179"></a><span id="l7.179" class="difflineplus">+</span>
<a href="#l7.180"></a><span id="l7.180" class="difflineplus">+    let dateNow = new Date();</span>
<a href="#l7.181"></a><span id="l7.181" class="difflineplus">+    $.append($(&quot;crashes-tbody&quot;), data.submitted.map(function(crash) {</span>
<a href="#l7.182"></a><span id="l7.182" class="difflineplus">+      let date = new Date(crash.date);</span>
<a href="#l7.183"></a><span id="l7.183" class="difflineplus">+      let timePassed = dateNow - date;</span>
<a href="#l7.184"></a><span id="l7.184" class="difflineplus">+      let formattedDate;</span>
<a href="#l7.185"></a><span id="l7.185" class="difflineplus">+      if (timePassed &gt;= 24 * 60 * 60 * 1000) {</span>
<a href="#l7.186"></a><span id="l7.186" class="difflineplus">+        let daysPassed = Math.round(timePassed / (24 * 60 * 60 * 1000));</span>
<a href="#l7.187"></a><span id="l7.187" class="difflineplus">+        let daysPassedString = strings.GetStringFromName(&quot;crashesTimeDays&quot;);</span>
<a href="#l7.188"></a><span id="l7.188" class="difflineplus">+        formattedDate = PluralForm.get(daysPassed, daysPassedString)</span>
<a href="#l7.189"></a><span id="l7.189" class="difflineplus">+                                  .replace(&quot;#1&quot;, daysPassed);</span>
<a href="#l7.190"></a><span id="l7.190" class="difflineplus">+      } else if (timePassed &gt;= 60 * 60 * 1000) {</span>
<a href="#l7.191"></a><span id="l7.191" class="difflineplus">+        let hoursPassed = Math.round(timePassed / (60 * 60 * 1000));</span>
<a href="#l7.192"></a><span id="l7.192" class="difflineplus">+        let hoursPassedString = strings.GetStringFromName(&quot;crashesTimeHours&quot;);</span>
<a href="#l7.193"></a><span id="l7.193" class="difflineplus">+        formattedDate = PluralForm.get(hoursPassed, hoursPassedString)</span>
<a href="#l7.194"></a><span id="l7.194" class="difflineplus">+                                  .replace(&quot;#1&quot;, hoursPassed);</span>
<a href="#l7.195"></a><span id="l7.195" class="difflineplus">+      } else {</span>
<a href="#l7.196"></a><span id="l7.196" class="difflineplus">+        let minutesPassed = Math.max(Math.round(timePassed / (60 * 1000)), 1);</span>
<a href="#l7.197"></a><span id="l7.197" class="difflineplus">+        let minutesPassedString = strings.GetStringFromName(&quot;crashesTimeMinutes&quot;);</span>
<a href="#l7.198"></a><span id="l7.198" class="difflineplus">+        formattedDate = PluralForm.get(minutesPassed, minutesPassedString)</span>
<a href="#l7.199"></a><span id="l7.199" class="difflineplus">+                                  .replace(&quot;#1&quot;, minutesPassed);</span>
<a href="#l7.200"></a><span id="l7.200" class="difflineplus">+      }</span>
<a href="#l7.201"></a><span id="l7.201" class="difflineplus">+      return $.new(&quot;tr&quot;, [</span>
<a href="#l7.202"></a><span id="l7.202" class="difflineplus">+        $.new(&quot;td&quot;, [</span>
<a href="#l7.203"></a><span id="l7.203" class="difflineplus">+          $.new(&quot;a&quot;, crash.id, null, {href : reportURL + crash.id})</span>
<a href="#l7.204"></a><span id="l7.204" class="difflineplus">+        ]),</span>
<a href="#l7.205"></a><span id="l7.205" class="difflineplus">+        $.new(&quot;td&quot;, formattedDate)</span>
<a href="#l7.206"></a><span id="l7.206" class="difflineplus">+      ]);</span>
<a href="#l7.207"></a><span id="l7.207" class="difflineplus">+    }));</span>
<a href="#l7.208"></a><span id="l7.208" class="difflineplus">+  },</span>
<a href="#l7.209"></a><span id="l7.209" class="difflineplus">+</span>
<a href="#l7.210"></a><span id="l7.210" class="difflineplus">+  extensions: function extensions(data) {</span>
<a href="#l7.211"></a><span id="l7.211" class="difflineplus">+    $.append($(&quot;extensions-tbody&quot;), data.map(function(extension) {</span>
<a href="#l7.212"></a><span id="l7.212" class="difflineplus">+      return $.new(&quot;tr&quot;, [</span>
<a href="#l7.213"></a><span id="l7.213" class="difflineplus">+        $.new(&quot;td&quot;, extension.name),</span>
<a href="#l7.214"></a><span id="l7.214" class="difflineplus">+        $.new(&quot;td&quot;, extension.version),</span>
<a href="#l7.215"></a><span id="l7.215" class="difflineplus">+        $.new(&quot;td&quot;, extension.isActive),</span>
<a href="#l7.216"></a><span id="l7.216" class="difflineplus">+        $.new(&quot;td&quot;, extension.id),</span>
<a href="#l7.217"></a><span id="l7.217" class="difflineplus">+      ]);</span>
<a href="#l7.218"></a><span id="l7.218" class="difflineplus">+    }));</span>
<a href="#l7.219"></a><span id="l7.219" class="difflineplus">+  },</span>
<a href="#l7.220"></a><span id="l7.220" class="difflineplus">+/* Not used by TB</span>
<a href="#l7.221"></a><span id="l7.221" class="difflineplus">+  experiments: function experiments(data) {</span>
<a href="#l7.222"></a><span id="l7.222" class="difflineplus">+    $.append($(&quot;experiments-tbody&quot;), data.map(function(experiment) {</span>
<a href="#l7.223"></a><span id="l7.223" class="difflineplus">+      return $.new(&quot;tr&quot;, [</span>
<a href="#l7.224"></a><span id="l7.224" class="difflineplus">+        $.new(&quot;td&quot;, experiment.name),</span>
<a href="#l7.225"></a><span id="l7.225" class="difflineplus">+        $.new(&quot;td&quot;, experiment.id),</span>
<a href="#l7.226"></a><span id="l7.226" class="difflineplus">+        $.new(&quot;td&quot;, experiment.description),</span>
<a href="#l7.227"></a><span id="l7.227" class="difflineplus">+        $.new(&quot;td&quot;, experiment.active),</span>
<a href="#l7.228"></a><span id="l7.228" class="difflineplus">+        $.new(&quot;td&quot;, experiment.endDate),</span>
<a href="#l7.229"></a><span id="l7.229" class="difflineplus">+        $.new(&quot;td&quot;, [</span>
<a href="#l7.230"></a><span id="l7.230" class="difflineplus">+          $.new(&quot;a&quot;, experiment.detailURL, null, {href : experiment.detailURL, })</span>
<a href="#l7.231"></a><span id="l7.231" class="difflineplus">+        ]),</span>
<a href="#l7.232"></a><span id="l7.232" class="difflineplus">+        $.new(&quot;td&quot;, experiment.branch),</span>
<a href="#l7.233"></a><span id="l7.233" class="difflineplus">+      ]);</span>
<a href="#l7.234"></a><span id="l7.234" class="difflineplus">+    }));</span>
<a href="#l7.235"></a><span id="l7.235" class="difflineplus">+  },</span>
<a href="#l7.236"></a><span id="l7.236" class="difflineplus">+*/</span>
<a href="#l7.237"></a><span id="l7.237" class="difflineplus">+  modifiedPreferences: function modifiedPreferences(data) {</span>
<a href="#l7.238"></a><span id="l7.238" class="difflineplus">+    $.append($(&quot;prefs-tbody&quot;), sortedArrayFromObject(data).map(</span>
<a href="#l7.239"></a><span id="l7.239" class="difflineplus">+      function([name, value]) {</span>
<a href="#l7.240"></a><span id="l7.240" class="difflineplus">+        return $.new(&quot;tr&quot;, [</span>
<a href="#l7.241"></a><span id="l7.241" class="difflineplus">+          $.new(&quot;td&quot;, name, &quot;pref-name&quot;),</span>
<a href="#l7.242"></a><span id="l7.242" class="difflineplus">+          // Very long preference values can cause users problems when they</span>
<a href="#l7.243"></a><span id="l7.243" class="difflineplus">+          // copy and paste them into some text editors.  Long values generally</span>
<a href="#l7.244"></a><span id="l7.244" class="difflineplus">+          // aren't useful anyway, so truncate them to a reasonable length.</span>
<a href="#l7.245"></a><span id="l7.245" class="difflineplus">+          $.new(&quot;td&quot;, String(value).substr(0, 120), &quot;pref-value&quot;),</span>
<a href="#l7.246"></a><span id="l7.246" class="difflineplus">+        ]);</span>
<a href="#l7.247"></a><span id="l7.247" class="difflineplus">+      }</span>
<a href="#l7.248"></a><span id="l7.248" class="difflineplus">+    ));</span>
<a href="#l7.249"></a><span id="l7.249" class="difflineplus">+  },</span>
<a href="#l7.250"></a><span id="l7.250" class="difflineplus">+</span>
<a href="#l7.251"></a><span id="l7.251" class="difflineplus">+  lockedPreferences: function lockedPreferences(data) {</span>
<a href="#l7.252"></a><span id="l7.252" class="difflineplus">+    $.append($(&quot;locked-prefs-tbody&quot;), sortedArrayFromObject(data).map(</span>
<a href="#l7.253"></a><span id="l7.253" class="difflineplus">+      function([name, value]) {</span>
<a href="#l7.254"></a><span id="l7.254" class="difflineplus">+        return $.new(&quot;tr&quot;, [</span>
<a href="#l7.255"></a><span id="l7.255" class="difflineplus">+          $.new(&quot;td&quot;, name, &quot;pref-name&quot;),</span>
<a href="#l7.256"></a><span id="l7.256" class="difflineplus">+          $.new(&quot;td&quot;, String(value).substr(0, 120), &quot;pref-value&quot;),</span>
<a href="#l7.257"></a><span id="l7.257" class="difflineplus">+        ]);</span>
<a href="#l7.258"></a><span id="l7.258" class="difflineplus">+      }</span>
<a href="#l7.259"></a><span id="l7.259" class="difflineplus">+    ));</span>
<a href="#l7.260"></a><span id="l7.260" class="difflineplus">+  },</span>
<a href="#l7.261"></a><span id="l7.261" class="difflineplus">+</span>
<a href="#l7.262"></a><span id="l7.262" class="difflineplus">+  graphics: function graphics(data) {</span>
<a href="#l7.263"></a><span id="l7.263" class="difflineplus">+    let strings = stringBundle();</span>
<a href="#l7.264"></a><span id="l7.264" class="difflineplus">+</span>
<a href="#l7.265"></a><span id="l7.265" class="difflineplus">+    function localizedMsg(msgArray) {</span>
<a href="#l7.266"></a><span id="l7.266" class="difflineplus">+      let nameOrMsg = msgArray.shift();</span>
<a href="#l7.267"></a><span id="l7.267" class="difflineplus">+      if (msgArray.length) {</span>
<a href="#l7.268"></a><span id="l7.268" class="difflineplus">+        // formatStringFromName logs an NS_ASSERTION failure otherwise that says</span>
<a href="#l7.269"></a><span id="l7.269" class="difflineplus">+        // &quot;use GetStringFromName&quot;.  Lame.</span>
<a href="#l7.270"></a><span id="l7.270" class="difflineplus">+        try {</span>
<a href="#l7.271"></a><span id="l7.271" class="difflineplus">+          return strings.formatStringFromName(nameOrMsg, msgArray,</span>
<a href="#l7.272"></a><span id="l7.272" class="difflineplus">+                                              msgArray.length);</span>
<a href="#l7.273"></a><span id="l7.273" class="difflineplus">+        } catch (err) {</span>
<a href="#l7.274"></a><span id="l7.274" class="difflineplus">+          // Throws if nameOrMsg is not a name in the bundle.  This shouldn't</span>
<a href="#l7.275"></a><span id="l7.275" class="difflineplus">+          // actually happen though, since msgArray.length &gt; 1 =&gt; nameOrMsg is a</span>
<a href="#l7.276"></a><span id="l7.276" class="difflineplus">+          // name in the bundle, not a message, and the remaining msgArray</span>
<a href="#l7.277"></a><span id="l7.277" class="difflineplus">+          // elements are parameters.</span>
<a href="#l7.278"></a><span id="l7.278" class="difflineplus">+          return nameOrMsg;</span>
<a href="#l7.279"></a><span id="l7.279" class="difflineplus">+        }</span>
<a href="#l7.280"></a><span id="l7.280" class="difflineplus">+      }</span>
<a href="#l7.281"></a><span id="l7.281" class="difflineplus">+      try {</span>
<a href="#l7.282"></a><span id="l7.282" class="difflineplus">+        return strings.GetStringFromName(nameOrMsg);</span>
<a href="#l7.283"></a><span id="l7.283" class="difflineplus">+      } catch (err) {</span>
<a href="#l7.284"></a><span id="l7.284" class="difflineplus">+        // Throws if nameOrMsg is not a name in the bundle.</span>
<a href="#l7.285"></a><span id="l7.285" class="difflineplus">+      }</span>
<a href="#l7.286"></a><span id="l7.286" class="difflineplus">+      return nameOrMsg;</span>
<a href="#l7.287"></a><span id="l7.287" class="difflineplus">+    }</span>
<a href="#l7.288"></a><span id="l7.288" class="difflineplus">+</span>
<a href="#l7.289"></a><span id="l7.289" class="difflineplus">+    // Read APZ info out of data.info, stripping it out in the process.</span>
<a href="#l7.290"></a><span id="l7.290" class="difflineplus">+    let apzInfo = [];</span>
<a href="#l7.291"></a><span id="l7.291" class="difflineplus">+    let formatApzInfo = function(info) {</span>
<a href="#l7.292"></a><span id="l7.292" class="difflineplus">+      let out = [];</span>
<a href="#l7.293"></a><span id="l7.293" class="difflineplus">+      for (let type of [&quot;Wheel&quot;, &quot;Touch&quot;, &quot;Drag&quot;]) {</span>
<a href="#l7.294"></a><span id="l7.294" class="difflineplus">+        let key = &quot;Apz&quot; + type + &quot;Input&quot;;</span>
<a href="#l7.295"></a><span id="l7.295" class="difflineplus">+</span>
<a href="#l7.296"></a><span id="l7.296" class="difflineplus">+        if (!(key in info))</span>
<a href="#l7.297"></a><span id="l7.297" class="difflineplus">+          continue;</span>
<a href="#l7.298"></a><span id="l7.298" class="difflineplus">+</span>
<a href="#l7.299"></a><span id="l7.299" class="difflineplus">+        delete info[key];</span>
<a href="#l7.300"></a><span id="l7.300" class="difflineplus">+</span>
<a href="#l7.301"></a><span id="l7.301" class="difflineplus">+        let message = localizedMsg([type.toLowerCase() + &quot;Enabled&quot;]);</span>
<a href="#l7.302"></a><span id="l7.302" class="difflineplus">+        out.push(message);</span>
<a href="#l7.303"></a><span id="l7.303" class="difflineplus">+      }</span>
<a href="#l7.304"></a><span id="l7.304" class="difflineplus">+</span>
<a href="#l7.305"></a><span id="l7.305" class="difflineplus">+      return out;</span>
<a href="#l7.306"></a><span id="l7.306" class="difflineplus">+    };</span>
<a href="#l7.307"></a><span id="l7.307" class="difflineplus">+</span>
<a href="#l7.308"></a><span id="l7.308" class="difflineplus">+    // Create a &lt;tr&gt; element with key and value columns.</span>
<a href="#l7.309"></a><span id="l7.309" class="difflineplus">+    //</span>
<a href="#l7.310"></a><span id="l7.310" class="difflineplus">+    // @key      Text in the key column. Localized automatically, unless starts with &quot;#&quot;.</span>
<a href="#l7.311"></a><span id="l7.311" class="difflineplus">+    // @value    Text in the value column. Not localized.</span>
<a href="#l7.312"></a><span id="l7.312" class="difflineplus">+    function buildRow(key, value) {</span>
<a href="#l7.313"></a><span id="l7.313" class="difflineplus">+      let title;</span>
<a href="#l7.314"></a><span id="l7.314" class="difflineplus">+      if (key[0] == &quot;#&quot;) {</span>
<a href="#l7.315"></a><span id="l7.315" class="difflineplus">+        title = key.substr(1);</span>
<a href="#l7.316"></a><span id="l7.316" class="difflineplus">+      } else {</span>
<a href="#l7.317"></a><span id="l7.317" class="difflineplus">+        try {</span>
<a href="#l7.318"></a><span id="l7.318" class="difflineplus">+          title = strings.GetStringFromName(key);</span>
<a href="#l7.319"></a><span id="l7.319" class="difflineplus">+        } catch (e) {</span>
<a href="#l7.320"></a><span id="l7.320" class="difflineplus">+          title = key;</span>
<a href="#l7.321"></a><span id="l7.321" class="difflineplus">+        }</span>
<a href="#l7.322"></a><span id="l7.322" class="difflineplus">+      }</span>
<a href="#l7.323"></a><span id="l7.323" class="difflineplus">+      let td = $.new(&quot;td&quot;, value);</span>
<a href="#l7.324"></a><span id="l7.324" class="difflineplus">+      td.style[&quot;white-space&quot;] = &quot;pre-wrap&quot;;</span>
<a href="#l7.325"></a><span id="l7.325" class="difflineplus">+</span>
<a href="#l7.326"></a><span id="l7.326" class="difflineplus">+      return $.new(&quot;tr&quot;, [</span>
<a href="#l7.327"></a><span id="l7.327" class="difflineplus">+        $.new(&quot;th&quot;, title, &quot;column&quot;),</span>
<a href="#l7.328"></a><span id="l7.328" class="difflineplus">+        td,</span>
<a href="#l7.329"></a><span id="l7.329" class="difflineplus">+      ]);</span>
<a href="#l7.330"></a><span id="l7.330" class="difflineplus">+    }</span>
<a href="#l7.331"></a><span id="l7.331" class="difflineplus">+</span>
<a href="#l7.332"></a><span id="l7.332" class="difflineplus">+    // @where    The name in &quot;graphics-&lt;name&gt;-tbody&quot;, of the element to append to.</span>
<a href="#l7.333"></a><span id="l7.333" class="difflineplus">+    // @trs      Array of row elements.</span>
<a href="#l7.334"></a><span id="l7.334" class="difflineplus">+    function addRows(where, trs) {</span>
<a href="#l7.335"></a><span id="l7.335" class="difflineplus">+      $.append($(&quot;graphics-&quot; + where + &quot;-tbody&quot;), trs);</span>
<a href="#l7.336"></a><span id="l7.336" class="difflineplus">+    }</span>
<a href="#l7.337"></a><span id="l7.337" class="difflineplus">+</span>
<a href="#l7.338"></a><span id="l7.338" class="difflineplus">+    // Build and append a row.</span>
<a href="#l7.339"></a><span id="l7.339" class="difflineplus">+    //</span>
<a href="#l7.340"></a><span id="l7.340" class="difflineplus">+    // @where    The name in &quot;graphics-&lt;name&gt;-tbody&quot;, of the element to append to.</span>
<a href="#l7.341"></a><span id="l7.341" class="difflineplus">+    function addRow(where, key, value) {</span>
<a href="#l7.342"></a><span id="l7.342" class="difflineplus">+      addRows(where, [buildRow(key, value)]);</span>
<a href="#l7.343"></a><span id="l7.343" class="difflineplus">+    }</span>
<a href="#l7.344"></a><span id="l7.344" class="difflineplus">+    if (data.clearTypeParameters !== undefined) {</span>
<a href="#l7.345"></a><span id="l7.345" class="difflineplus">+      addRow(&quot;diagnostics&quot;, &quot;clearTypeParameters&quot;, data.clearTypeParameters);</span>
<a href="#l7.346"></a><span id="l7.346" class="difflineplus">+    }</span>
<a href="#l7.347"></a><span id="l7.347" class="difflineplus">+    if (&quot;info&quot; in data) {</span>
<a href="#l7.348"></a><span id="l7.348" class="difflineplus">+      apzInfo = formatApzInfo(data.info);</span>
<a href="#l7.349"></a><span id="l7.349" class="difflineplus">+</span>
<a href="#l7.350"></a><span id="l7.350" class="difflineplus">+      let trs = sortedArrayFromObject(data.info).map(function([prop, val]) {</span>
<a href="#l7.351"></a><span id="l7.351" class="difflineplus">+        return $.new(&quot;tr&quot;, [</span>
<a href="#l7.352"></a><span id="l7.352" class="difflineplus">+          $.new(&quot;th&quot;, prop, &quot;column&quot;),</span>
<a href="#l7.353"></a><span id="l7.353" class="difflineplus">+          $.new(&quot;td&quot;, String(val)),</span>
<a href="#l7.354"></a><span id="l7.354" class="difflineplus">+        ]);</span>
<a href="#l7.355"></a><span id="l7.355" class="difflineplus">+      });</span>
<a href="#l7.356"></a><span id="l7.356" class="difflineplus">+      addRows(&quot;diagnostics&quot;, trs);</span>
<a href="#l7.357"></a><span id="l7.357" class="difflineplus">+</span>
<a href="#l7.358"></a><span id="l7.358" class="difflineplus">+      delete data.info;</span>
<a href="#l7.359"></a><span id="l7.359" class="difflineplus">+    }</span>
<a href="#l7.360"></a><span id="l7.360" class="difflineplus">+</span>
<a href="#l7.361"></a><span id="l7.361" class="difflineplus">+    if (AppConstants.NIGHTLY_BUILD || AppConstants.MOZ_DEV_EDITION) {</span>
<a href="#l7.362"></a><span id="l7.362" class="difflineplus">+      let windowUtils = window.QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l7.363"></a><span id="l7.363" class="difflineplus">+                              .getInterface(Ci.nsIDOMWindowUtils);</span>
<a href="#l7.364"></a><span id="l7.364" class="difflineplus">+      let gpuProcessPid = windowUtils.gpuProcessPid;</span>
<a href="#l7.365"></a><span id="l7.365" class="difflineplus">+</span>
<a href="#l7.366"></a><span id="l7.366" class="difflineplus">+      if (gpuProcessPid != -1) {</span>
<a href="#l7.367"></a><span id="l7.367" class="difflineplus">+        let gpuProcessKillButton = $.new(&quot;button&quot;);</span>
<a href="#l7.368"></a><span id="l7.368" class="difflineplus">+</span>
<a href="#l7.369"></a><span id="l7.369" class="difflineplus">+        gpuProcessKillButton.addEventListener(&quot;click&quot;, function() {</span>
<a href="#l7.370"></a><span id="l7.370" class="difflineplus">+          windowUtils.terminateGPUProcess();</span>
<a href="#l7.371"></a><span id="l7.371" class="difflineplus">+        });</span>
<a href="#l7.372"></a><span id="l7.372" class="difflineplus">+</span>
<a href="#l7.373"></a><span id="l7.373" class="difflineplus">+        gpuProcessKillButton.textContent = strings.GetStringFromName(&quot;gpuProcessKillButton&quot;);</span>
<a href="#l7.374"></a><span id="l7.374" class="difflineplus">+        addRow(&quot;diagnostics&quot;, &quot;GPUProcessPid&quot;, gpuProcessPid);</span>
<a href="#l7.375"></a><span id="l7.375" class="difflineplus">+        addRow(&quot;diagnostics&quot;, &quot;GPUProcess&quot;, [gpuProcessKillButton]);</span>
<a href="#l7.376"></a><span id="l7.376" class="difflineplus">+      }</span>
<a href="#l7.377"></a><span id="l7.377" class="difflineplus">+    }</span>
<a href="#l7.378"></a><span id="l7.378" class="difflineplus">+</span>
<a href="#l7.379"></a><span id="l7.379" class="difflineplus">+    // graphics-failures-tbody tbody</span>
<a href="#l7.380"></a><span id="l7.380" class="difflineplus">+    if (&quot;failures&quot; in data) {</span>
<a href="#l7.381"></a><span id="l7.381" class="difflineplus">+      // If indices is there, it should be the same length as failures,</span>
<a href="#l7.382"></a><span id="l7.382" class="difflineplus">+      // (see Troubleshoot.jsm) but we check anyway:</span>
<a href="#l7.383"></a><span id="l7.383" class="difflineplus">+      if (&quot;indices&quot; in data &amp;&amp; data.failures.length == data.indices.length) {</span>
<a href="#l7.384"></a><span id="l7.384" class="difflineplus">+        let combined = [];</span>
<a href="#l7.385"></a><span id="l7.385" class="difflineplus">+        for (let i = 0; i &lt; data.failures.length; i++) {</span>
<a href="#l7.386"></a><span id="l7.386" class="difflineplus">+          let assembled = assembleFromGraphicsFailure(i, data);</span>
<a href="#l7.387"></a><span id="l7.387" class="difflineplus">+          combined.push(assembled);</span>
<a href="#l7.388"></a><span id="l7.388" class="difflineplus">+        }</span>
<a href="#l7.389"></a><span id="l7.389" class="difflineplus">+        combined.sort(function(a, b) {</span>
<a href="#l7.390"></a><span id="l7.390" class="difflineplus">+            if (a.index &lt; b.index) return -1;</span>
<a href="#l7.391"></a><span id="l7.391" class="difflineplus">+            if (a.index &gt; b.index) return 1;</span>
<a href="#l7.392"></a><span id="l7.392" class="difflineplus">+            return 0;</span>
<a href="#l7.393"></a><span id="l7.393" class="difflineplus">+        });</span>
<a href="#l7.394"></a><span id="l7.394" class="difflineplus">+        $.append($(&quot;graphics-failures-tbody&quot;),</span>
<a href="#l7.395"></a><span id="l7.395" class="difflineplus">+                 combined.map(function(val) {</span>
<a href="#l7.396"></a><span id="l7.396" class="difflineplus">+                   return $.new(&quot;tr&quot;, [$.new(&quot;th&quot;, val.header, &quot;column&quot;),</span>
<a href="#l7.397"></a><span id="l7.397" class="difflineplus">+                                       $.new(&quot;td&quot;, val.message)]);</span>
<a href="#l7.398"></a><span id="l7.398" class="difflineplus">+                 }));</span>
<a href="#l7.399"></a><span id="l7.399" class="difflineplus">+        delete data.indices;</span>
<a href="#l7.400"></a><span id="l7.400" class="difflineplus">+      } else {</span>
<a href="#l7.401"></a><span id="l7.401" class="difflineplus">+        $.append($(&quot;graphics-failures-tbody&quot;),</span>
<a href="#l7.402"></a><span id="l7.402" class="difflineplus">+          [$.new(&quot;tr&quot;, [$.new(&quot;th&quot;, &quot;LogFailure&quot;, &quot;column&quot;),</span>
<a href="#l7.403"></a><span id="l7.403" class="difflineplus">+                        $.new(&quot;td&quot;, data.failures.map(function(val) {</span>
<a href="#l7.404"></a><span id="l7.404" class="difflineplus">+                          return $.new(&quot;p&quot;, val);</span>
<a href="#l7.405"></a><span id="l7.405" class="difflineplus">+                       }))])]);</span>
<a href="#l7.406"></a><span id="l7.406" class="difflineplus">+      }</span>
<a href="#l7.407"></a><span id="l7.407" class="difflineplus">+    } else {</span>
<a href="#l7.408"></a><span id="l7.408" class="difflineplus">+      $(&quot;graphics-failures-tbody&quot;).style.display = &quot;none&quot;;</span>
<a href="#l7.409"></a><span id="l7.409" class="difflineplus">+    }</span>
<a href="#l7.410"></a><span id="l7.410" class="difflineplus">+</span>
<a href="#l7.411"></a><span id="l7.411" class="difflineplus">+    // Add a new row to the table, and take the key (or keys) out of data.</span>
<a href="#l7.412"></a><span id="l7.412" class="difflineplus">+    //</span>
<a href="#l7.413"></a><span id="l7.413" class="difflineplus">+    // @where        Table section to add to.</span>
<a href="#l7.414"></a><span id="l7.414" class="difflineplus">+    // @key          Data key to use.</span>
<a href="#l7.415"></a><span id="l7.415" class="difflineplus">+    // @colKey       The localization key to use, if different from key.</span>
<a href="#l7.416"></a><span id="l7.416" class="difflineplus">+    function addRowFromKey(where, key, colKey) {</span>
<a href="#l7.417"></a><span id="l7.417" class="difflineplus">+      if (!(key in data))</span>
<a href="#l7.418"></a><span id="l7.418" class="difflineplus">+        return;</span>
<a href="#l7.419"></a><span id="l7.419" class="difflineplus">+      colKey = colKey || key;</span>
<a href="#l7.420"></a><span id="l7.420" class="difflineplus">+</span>
<a href="#l7.421"></a><span id="l7.421" class="difflineplus">+      let value;</span>
<a href="#l7.422"></a><span id="l7.422" class="difflineplus">+      let messageKey = key + &quot;Message&quot;;</span>
<a href="#l7.423"></a><span id="l7.423" class="difflineplus">+      if (messageKey in data) {</span>
<a href="#l7.424"></a><span id="l7.424" class="difflineplus">+        value = localizedMsg(data[messageKey]);</span>
<a href="#l7.425"></a><span id="l7.425" class="difflineplus">+        delete data[messageKey];</span>
<a href="#l7.426"></a><span id="l7.426" class="difflineplus">+      } else {</span>
<a href="#l7.427"></a><span id="l7.427" class="difflineplus">+        value = data[key];</span>
<a href="#l7.428"></a><span id="l7.428" class="difflineplus">+      }</span>
<a href="#l7.429"></a><span id="l7.429" class="difflineplus">+      delete data[key];</span>
<a href="#l7.430"></a><span id="l7.430" class="difflineplus">+</span>
<a href="#l7.431"></a><span id="l7.431" class="difflineplus">+      if (value) {</span>
<a href="#l7.432"></a><span id="l7.432" class="difflineplus">+        addRow(where, colKey, value);</span>
<a href="#l7.433"></a><span id="l7.433" class="difflineplus">+      }</span>
<a href="#l7.434"></a><span id="l7.434" class="difflineplus">+    }</span>
<a href="#l7.435"></a><span id="l7.435" class="difflineplus">+</span>
<a href="#l7.436"></a><span id="l7.436" class="difflineplus">+    // graphics-features-tbody</span>
<a href="#l7.437"></a><span id="l7.437" class="difflineplus">+</span>
<a href="#l7.438"></a><span id="l7.438" class="difflineplus">+    let compositor = data.windowLayerManagerRemote</span>
<a href="#l7.439"></a><span id="l7.439" class="difflineplus">+                     ? data.windowLayerManagerType</span>
<a href="#l7.440"></a><span id="l7.440" class="difflineplus">+                     : &quot;BasicLayers (&quot; + strings.GetStringFromName(&quot;mainThreadNoOMTC&quot;) + &quot;)&quot;;</span>
<a href="#l7.441"></a><span id="l7.441" class="difflineplus">+    addRow(&quot;features&quot;, &quot;compositing&quot;, compositor);</span>
<a href="#l7.442"></a><span id="l7.442" class="difflineplus">+    delete data.windowLayerManagerRemote;</span>
<a href="#l7.443"></a><span id="l7.443" class="difflineplus">+    delete data.windowLayerManagerType;</span>
<a href="#l7.444"></a><span id="l7.444" class="difflineplus">+    delete data.numTotalWindows;</span>
<a href="#l7.445"></a><span id="l7.445" class="difflineplus">+    delete data.numAcceleratedWindows;</span>
<a href="#l7.446"></a><span id="l7.446" class="difflineplus">+    delete data.numAcceleratedWindowsMessage;</span>
<a href="#l7.447"></a><span id="l7.447" class="difflineplus">+</span>
<a href="#l7.448"></a><span id="l7.448" class="difflineplus">+    addRow(&quot;features&quot;, &quot;asyncPanZoom&quot;,</span>
<a href="#l7.449"></a><span id="l7.449" class="difflineplus">+           apzInfo.length</span>
<a href="#l7.450"></a><span id="l7.450" class="difflineplus">+           ? apzInfo.join(&quot;; &quot;)</span>
<a href="#l7.451"></a><span id="l7.451" class="difflineplus">+           : localizedMsg([&quot;apzNone&quot;]));</span>
<a href="#l7.452"></a><span id="l7.452" class="difflineplus">+    addRowFromKey(&quot;features&quot;, &quot;webgl1WSIInfo&quot;);</span>
<a href="#l7.453"></a><span id="l7.453" class="difflineplus">+    addRowFromKey(&quot;features&quot;, &quot;webgl1Renderer&quot;);</span>
<a href="#l7.454"></a><span id="l7.454" class="difflineplus">+    addRowFromKey(&quot;features&quot;, &quot;webgl1Version&quot;);</span>
<a href="#l7.455"></a><span id="l7.455" class="difflineplus">+    addRowFromKey(&quot;features&quot;, &quot;webgl1DriverExtensions&quot;);</span>
<a href="#l7.456"></a><span id="l7.456" class="difflineplus">+    addRowFromKey(&quot;features&quot;, &quot;webgl1Extensions&quot;);</span>
<a href="#l7.457"></a><span id="l7.457" class="difflineplus">+    addRowFromKey(&quot;features&quot;, &quot;webgl2WSIInfo&quot;);</span>
<a href="#l7.458"></a><span id="l7.458" class="difflineplus">+    addRowFromKey(&quot;features&quot;, &quot;webgl2Renderer&quot;);</span>
<a href="#l7.459"></a><span id="l7.459" class="difflineplus">+    addRowFromKey(&quot;features&quot;, &quot;webgl2Version&quot;);</span>
<a href="#l7.460"></a><span id="l7.460" class="difflineplus">+    addRowFromKey(&quot;features&quot;, &quot;webgl2DriverExtensions&quot;);</span>
<a href="#l7.461"></a><span id="l7.461" class="difflineplus">+    addRowFromKey(&quot;features&quot;, &quot;webgl2Extensions&quot;);</span>
<a href="#l7.462"></a><span id="l7.462" class="difflineplus">+    addRowFromKey(&quot;features&quot;, &quot;supportsHardwareH264&quot;, &quot;hardwareH264&quot;);</span>
<a href="#l7.463"></a><span id="l7.463" class="difflineplus">+    addRowFromKey(&quot;features&quot;, &quot;currentAudioBackend&quot;, &quot;audioBackend&quot;);</span>
<a href="#l7.464"></a><span id="l7.464" class="difflineplus">+    addRowFromKey(&quot;features&quot;, &quot;direct2DEnabled&quot;, &quot;#Direct2D&quot;);</span>
<a href="#l7.465"></a><span id="l7.465" class="difflineplus">+</span>
<a href="#l7.466"></a><span id="l7.466" class="difflineplus">+    if (&quot;directWriteEnabled&quot; in data) {</span>
<a href="#l7.467"></a><span id="l7.467" class="difflineplus">+      let message = data.directWriteEnabled;</span>
<a href="#l7.468"></a><span id="l7.468" class="difflineplus">+      if (&quot;directWriteVersion&quot; in data)</span>
<a href="#l7.469"></a><span id="l7.469" class="difflineplus">+        message += &quot; (&quot; + data.directWriteVersion + &quot;)&quot;;</span>
<a href="#l7.470"></a><span id="l7.470" class="difflineplus">+      addRow(&quot;features&quot;, &quot;#DirectWrite&quot;, message);</span>
<a href="#l7.471"></a><span id="l7.471" class="difflineplus">+      delete data.directWriteEnabled;</span>
<a href="#l7.472"></a><span id="l7.472" class="difflineplus">+      delete data.directWriteVersion;</span>
<a href="#l7.473"></a><span id="l7.473" class="difflineplus">+    }</span>
<a href="#l7.474"></a><span id="l7.474" class="difflineplus">+</span>
<a href="#l7.475"></a><span id="l7.475" class="difflineplus">+    // Adapter tbodies.</span>
<a href="#l7.476"></a><span id="l7.476" class="difflineplus">+    let adapterKeys = [</span>
<a href="#l7.477"></a><span id="l7.477" class="difflineplus">+      [&quot;adapterDescription&quot;, &quot;gpuDescription&quot;],</span>
<a href="#l7.478"></a><span id="l7.478" class="difflineplus">+      [&quot;adapterVendorID&quot;, &quot;gpuVendorID&quot;],</span>
<a href="#l7.479"></a><span id="l7.479" class="difflineplus">+      [&quot;adapterDeviceID&quot;, &quot;gpuDeviceID&quot;],</span>
<a href="#l7.480"></a><span id="l7.480" class="difflineplus">+      [&quot;driverVersion&quot;, &quot;gpuDriverVersion&quot;],</span>
<a href="#l7.481"></a><span id="l7.481" class="difflineplus">+      [&quot;driverDate&quot;, &quot;gpuDriverDate&quot;],</span>
<a href="#l7.482"></a><span id="l7.482" class="difflineplus">+      [&quot;adapterDrivers&quot;, &quot;gpuDrivers&quot;],</span>
<a href="#l7.483"></a><span id="l7.483" class="difflineplus">+      [&quot;adapterSubsysID&quot;, &quot;gpuSubsysID&quot;],</span>
<a href="#l7.484"></a><span id="l7.484" class="difflineplus">+      [&quot;adapterRAM&quot;, &quot;gpuRAM&quot;],</span>
<a href="#l7.485"></a><span id="l7.485" class="difflineplus">+    ];</span>
<a href="#l7.486"></a><span id="l7.486" class="difflineplus">+</span>
<a href="#l7.487"></a><span id="l7.487" class="difflineplus">+    function showGpu(id, suffix) {</span>
<a href="#l7.488"></a><span id="l7.488" class="difflineplus">+      function get(prop) {</span>
<a href="#l7.489"></a><span id="l7.489" class="difflineplus">+        return data[prop + suffix];</span>
<a href="#l7.490"></a><span id="l7.490" class="difflineplus">+      }</span>
<a href="#l7.491"></a><span id="l7.491" class="difflineplus">+</span>
<a href="#l7.492"></a><span id="l7.492" class="difflineplus">+      let trs = [];</span>
<a href="#l7.493"></a><span id="l7.493" class="difflineplus">+      for (let [prop, key] of adapterKeys) {</span>
<a href="#l7.494"></a><span id="l7.494" class="difflineplus">+        let value = get(prop);</span>
<a href="#l7.495"></a><span id="l7.495" class="difflineplus">+        if (value === undefined || value === &quot;&quot;)</span>
<a href="#l7.496"></a><span id="l7.496" class="difflineplus">+          continue;</span>
<a href="#l7.497"></a><span id="l7.497" class="difflineplus">+        trs.push(buildRow(key, value));</span>
<a href="#l7.498"></a><span id="l7.498" class="difflineplus">+      }</span>
<a href="#l7.499"></a><span id="l7.499" class="difflineplus">+</span>
<a href="#l7.500"></a><span id="l7.500" class="difflineplus">+      if (trs.length == 0) {</span>
<a href="#l7.501"></a><span id="l7.501" class="difflineplus">+        $(&quot;graphics-&quot; + id + &quot;-tbody&quot;).style.display = &quot;none&quot;;</span>
<a href="#l7.502"></a><span id="l7.502" class="difflineplus">+        return;</span>
<a href="#l7.503"></a><span id="l7.503" class="difflineplus">+      }</span>
<a href="#l7.504"></a><span id="l7.504" class="difflineplus">+</span>
<a href="#l7.505"></a><span id="l7.505" class="difflineplus">+      let active = &quot;yes&quot;;</span>
<a href="#l7.506"></a><span id="l7.506" class="difflineplus">+      if (&quot;isGPU2Active&quot; in data &amp;&amp; ((suffix == &quot;2&quot;) != data.isGPU2Active)) {</span>
<a href="#l7.507"></a><span id="l7.507" class="difflineplus">+        active = &quot;no&quot;;</span>
<a href="#l7.508"></a><span id="l7.508" class="difflineplus">+      }</span>
<a href="#l7.509"></a><span id="l7.509" class="difflineplus">+      addRow(id, &quot;gpuActive&quot;, strings.GetStringFromName(active));</span>
<a href="#l7.510"></a><span id="l7.510" class="difflineplus">+      addRows(id, trs);</span>
<a href="#l7.511"></a><span id="l7.511" class="difflineplus">+    }</span>
<a href="#l7.512"></a><span id="l7.512" class="difflineplus">+    showGpu(&quot;gpu-1&quot;, &quot;&quot;);</span>
<a href="#l7.513"></a><span id="l7.513" class="difflineplus">+    showGpu(&quot;gpu-2&quot;, &quot;2&quot;);</span>
<a href="#l7.514"></a><span id="l7.514" class="difflineplus">+</span>
<a href="#l7.515"></a><span id="l7.515" class="difflineplus">+    // Remove adapter keys.</span>
<a href="#l7.516"></a><span id="l7.516" class="difflineplus">+    for (let [prop, /* key */] of adapterKeys) {</span>
<a href="#l7.517"></a><span id="l7.517" class="difflineplus">+      delete data[prop];</span>
<a href="#l7.518"></a><span id="l7.518" class="difflineplus">+      delete data[prop + &quot;2&quot;];</span>
<a href="#l7.519"></a><span id="l7.519" class="difflineplus">+    }</span>
<a href="#l7.520"></a><span id="l7.520" class="difflineplus">+    delete data.isGPU2Active;</span>
<a href="#l7.521"></a><span id="l7.521" class="difflineplus">+</span>
<a href="#l7.522"></a><span id="l7.522" class="difflineplus">+    let featureLog = data.featureLog;</span>
<a href="#l7.523"></a><span id="l7.523" class="difflineplus">+    delete data.featureLog;</span>
<a href="#l7.524"></a><span id="l7.524" class="difflineplus">+</span>
<a href="#l7.525"></a><span id="l7.525" class="difflineplus">+    let features = [];</span>
<a href="#l7.526"></a><span id="l7.526" class="difflineplus">+    for (let feature of featureLog.features) {</span>
<a href="#l7.527"></a><span id="l7.527" class="difflineplus">+      // Only add interesting decisions - ones that were not automatic based on</span>
<a href="#l7.528"></a><span id="l7.528" class="difflineplus">+      // all.js/gfxPrefs defaults.</span>
<a href="#l7.529"></a><span id="l7.529" class="difflineplus">+      if (feature.log.length &gt; 1 || feature.log[0].status != &quot;available&quot;) {</span>
<a href="#l7.530"></a><span id="l7.530" class="difflineplus">+        features.push(feature);</span>
<a href="#l7.531"></a><span id="l7.531" class="difflineplus">+      }</span>
<a href="#l7.532"></a><span id="l7.532" class="difflineplus">+    }</span>
<a href="#l7.533"></a><span id="l7.533" class="difflineplus">+</span>
<a href="#l7.534"></a><span id="l7.534" class="difflineplus">+    if (features.length) {</span>
<a href="#l7.535"></a><span id="l7.535" class="difflineplus">+      for (let feature of features) {</span>
<a href="#l7.536"></a><span id="l7.536" class="difflineplus">+        let trs = [];</span>
<a href="#l7.537"></a><span id="l7.537" class="difflineplus">+        for (let entry of feature.log) {</span>
<a href="#l7.538"></a><span id="l7.538" class="difflineplus">+          if (entry.type == &quot;default&quot; &amp;&amp; entry.status == &quot;available&quot;)</span>
<a href="#l7.539"></a><span id="l7.539" class="difflineplus">+            continue;</span>
<a href="#l7.540"></a><span id="l7.540" class="difflineplus">+</span>
<a href="#l7.541"></a><span id="l7.541" class="difflineplus">+          let contents;</span>
<a href="#l7.542"></a><span id="l7.542" class="difflineplus">+          if (entry.message.length &gt; 0 &amp;&amp; entry.message[0] == &quot;#&quot;) {</span>
<a href="#l7.543"></a><span id="l7.543" class="difflineplus">+            // This is a failure ID. See nsIGfxInfo.idl.</span>
<a href="#l7.544"></a><span id="l7.544" class="difflineplus">+            let m = /#BLOCKLIST_FEATURE_FAILURE_BUG_(\d+)/.exec(entry.message);</span>
<a href="#l7.545"></a><span id="l7.545" class="difflineplus">+            if (m) {</span>
<a href="#l7.546"></a><span id="l7.546" class="difflineplus">+              let bugSpan = $.new(&quot;span&quot;);</span>
<a href="#l7.547"></a><span id="l7.547" class="difflineplus">+              bugSpan.textContent = strings.GetStringFromName(&quot;blocklistedBug&quot;) + &quot;; &quot;;</span>
<a href="#l7.548"></a><span id="l7.548" class="difflineplus">+</span>
<a href="#l7.549"></a><span id="l7.549" class="difflineplus">+              let bugHref = $.new(&quot;a&quot;);</span>
<a href="#l7.550"></a><span id="l7.550" class="difflineplus">+              bugHref.href = &quot;https://bugzilla.mozilla.org/show_bug.cgi?id=&quot; + m[1];</span>
<a href="#l7.551"></a><span id="l7.551" class="difflineplus">+              bugHref.textContent = strings.formatStringFromName(&quot;bugLink&quot;, [m[1]], 1);</span>
<a href="#l7.552"></a><span id="l7.552" class="difflineplus">+</span>
<a href="#l7.553"></a><span id="l7.553" class="difflineplus">+              contents = [bugSpan, bugHref];</span>
<a href="#l7.554"></a><span id="l7.554" class="difflineplus">+            } else {</span>
<a href="#l7.555"></a><span id="l7.555" class="difflineplus">+              contents = strings.formatStringFromName(</span>
<a href="#l7.556"></a><span id="l7.556" class="difflineplus">+                &quot;unknownFailure&quot;, [entry.message.substr(1)], 1);</span>
<a href="#l7.557"></a><span id="l7.557" class="difflineplus">+            }</span>
<a href="#l7.558"></a><span id="l7.558" class="difflineplus">+          } else {</span>
<a href="#l7.559"></a><span id="l7.559" class="difflineplus">+            contents = entry.status + &quot; by &quot; + entry.type + &quot;: &quot; + entry.message;</span>
<a href="#l7.560"></a><span id="l7.560" class="difflineplus">+          }</span>
<a href="#l7.561"></a><span id="l7.561" class="difflineplus">+</span>
<a href="#l7.562"></a><span id="l7.562" class="difflineplus">+          trs.push($.new(&quot;tr&quot;, [</span>
<a href="#l7.563"></a><span id="l7.563" class="difflineplus">+            $.new(&quot;td&quot;, contents),</span>
<a href="#l7.564"></a><span id="l7.564" class="difflineplus">+          ]));</span>
<a href="#l7.565"></a><span id="l7.565" class="difflineplus">+        }</span>
<a href="#l7.566"></a><span id="l7.566" class="difflineplus">+        addRow(&quot;decisions&quot;, feature.name, [$.new(&quot;table&quot;, trs)]);</span>
<a href="#l7.567"></a><span id="l7.567" class="difflineplus">+      }</span>
<a href="#l7.568"></a><span id="l7.568" class="difflineplus">+    } else {</span>
<a href="#l7.569"></a><span id="l7.569" class="difflineplus">+      $(&quot;graphics-decisions-tbody&quot;).style.display = &quot;none&quot;;</span>
<a href="#l7.570"></a><span id="l7.570" class="difflineplus">+    }</span>
<a href="#l7.571"></a><span id="l7.571" class="difflineplus">+</span>
<a href="#l7.572"></a><span id="l7.572" class="difflineplus">+    if (featureLog.fallbacks.length) {</span>
<a href="#l7.573"></a><span id="l7.573" class="difflineplus">+      for (let fallback of featureLog.fallbacks) {</span>
<a href="#l7.574"></a><span id="l7.574" class="difflineplus">+        addRow(&quot;workarounds&quot;, fallback.name, fallback.message);</span>
<a href="#l7.575"></a><span id="l7.575" class="difflineplus">+      }</span>
<a href="#l7.576"></a><span id="l7.576" class="difflineplus">+    } else {</span>
<a href="#l7.577"></a><span id="l7.577" class="difflineplus">+      $(&quot;graphics-workarounds-tbody&quot;).style.display = &quot;none&quot;;</span>
<a href="#l7.578"></a><span id="l7.578" class="difflineplus">+    }</span>
<a href="#l7.579"></a><span id="l7.579" class="difflineplus">+</span>
<a href="#l7.580"></a><span id="l7.580" class="difflineplus">+    let crashGuards = data.crashGuards;</span>
<a href="#l7.581"></a><span id="l7.581" class="difflineplus">+    delete data.crashGuards;</span>
<a href="#l7.582"></a><span id="l7.582" class="difflineplus">+</span>
<a href="#l7.583"></a><span id="l7.583" class="difflineplus">+    if (crashGuards.length) {</span>
<a href="#l7.584"></a><span id="l7.584" class="difflineplus">+      for (let guard of crashGuards) {</span>
<a href="#l7.585"></a><span id="l7.585" class="difflineplus">+        let resetButton = $.new(&quot;button&quot;);</span>
<a href="#l7.586"></a><span id="l7.586" class="difflineplus">+        let onClickReset = function() {</span>
<a href="#l7.587"></a><span id="l7.587" class="difflineplus">+          Services.prefs.setIntPref(guard.prefName, 0);</span>
<a href="#l7.588"></a><span id="l7.588" class="difflineplus">+          resetButton.removeEventListener(&quot;click&quot;, onClickReset);</span>
<a href="#l7.589"></a><span id="l7.589" class="difflineplus">+          resetButton.disabled = true;</span>
<a href="#l7.590"></a><span id="l7.590" class="difflineplus">+        };</span>
<a href="#l7.591"></a><span id="l7.591" class="difflineplus">+</span>
<a href="#l7.592"></a><span id="l7.592" class="difflineplus">+        resetButton.textContent = strings.GetStringFromName(&quot;resetOnNextRestart&quot;);</span>
<a href="#l7.593"></a><span id="l7.593" class="difflineplus">+        resetButton.addEventListener(&quot;click&quot;, onClickReset);</span>
<a href="#l7.594"></a><span id="l7.594" class="difflineplus">+</span>
<a href="#l7.595"></a><span id="l7.595" class="difflineplus">+        addRow(&quot;crashguards&quot;, guard.type + &quot;CrashGuard&quot;, [resetButton]);</span>
<a href="#l7.596"></a><span id="l7.596" class="difflineplus">+      }</span>
<a href="#l7.597"></a><span id="l7.597" class="difflineplus">+    } else {</span>
<a href="#l7.598"></a><span id="l7.598" class="difflineplus">+      $(&quot;graphics-crashguards-tbody&quot;).style.display = &quot;none&quot;;</span>
<a href="#l7.599"></a><span id="l7.599" class="difflineplus">+    }</span>
<a href="#l7.600"></a><span id="l7.600" class="difflineplus">+</span>
<a href="#l7.601"></a><span id="l7.601" class="difflineplus">+    // Now that we're done, grab any remaining keys in data and drop them into</span>
<a href="#l7.602"></a><span id="l7.602" class="difflineplus">+    // the diagnostics section.</span>
<a href="#l7.603"></a><span id="l7.603" class="difflineplus">+    for (let key in data) {</span>
<a href="#l7.604"></a><span id="l7.604" class="difflineplus">+      let value = data[key];</span>
<a href="#l7.605"></a><span id="l7.605" class="difflineplus">+      if (Array.isArray(value)) {</span>
<a href="#l7.606"></a><span id="l7.606" class="difflineplus">+        value = localizedMsg(value);</span>
<a href="#l7.607"></a><span id="l7.607" class="difflineplus">+      }</span>
<a href="#l7.608"></a><span id="l7.608" class="difflineplus">+      addRow(&quot;diagnostics&quot;, key, value);</span>
<a href="#l7.609"></a><span id="l7.609" class="difflineplus">+    }</span>
<a href="#l7.610"></a><span id="l7.610" class="difflineplus">+  },</span>
<a href="#l7.611"></a><span id="l7.611" class="difflineplus">+</span>
<a href="#l7.612"></a><span id="l7.612" class="difflineplus">+  javaScript: function javaScript(data) {</span>
<a href="#l7.613"></a><span id="l7.613" class="difflineplus">+    $(&quot;javascript-incremental-gc&quot;).textContent = data.incrementalGCEnabled;</span>
<a href="#l7.614"></a><span id="l7.614" class="difflineplus">+  },</span>
<a href="#l7.615"></a><span id="l7.615" class="difflineplus">+</span>
<a href="#l7.616"></a><span id="l7.616" class="difflineplus">+  accessibility: function accessibility(data) {</span>
<a href="#l7.617"></a><span id="l7.617" class="difflineplus">+    $(&quot;a11y-activated&quot;).textContent = data.isActive;</span>
<a href="#l7.618"></a><span id="l7.618" class="difflineplus">+    $(&quot;a11y-force-disabled&quot;).textContent = data.forceDisabled || 0;</span>
<a href="#l7.619"></a><span id="l7.619" class="difflineplus">+  },</span>
<a href="#l7.620"></a><span id="l7.620" class="difflineplus">+</span>
<a href="#l7.621"></a><span id="l7.621" class="difflineplus">+  libraryVersions: function libraryVersions(data) {</span>
<a href="#l7.622"></a><span id="l7.622" class="difflineplus">+    let strings = stringBundle();</span>
<a href="#l7.623"></a><span id="l7.623" class="difflineplus">+    let trs = [</span>
<a href="#l7.624"></a><span id="l7.624" class="difflineplus">+      $.new(&quot;tr&quot;, [</span>
<a href="#l7.625"></a><span id="l7.625" class="difflineplus">+        $.new(&quot;th&quot;, &quot;&quot;),</span>
<a href="#l7.626"></a><span id="l7.626" class="difflineplus">+        $.new(&quot;th&quot;, strings.GetStringFromName(&quot;minLibVersions&quot;)),</span>
<a href="#l7.627"></a><span id="l7.627" class="difflineplus">+        $.new(&quot;th&quot;, strings.GetStringFromName(&quot;loadedLibVersions&quot;)),</span>
<a href="#l7.628"></a><span id="l7.628" class="difflineplus">+      ])</span>
<a href="#l7.629"></a><span id="l7.629" class="difflineplus">+    ];</span>
<a href="#l7.630"></a><span id="l7.630" class="difflineplus">+    sortedArrayFromObject(data).forEach(</span>
<a href="#l7.631"></a><span id="l7.631" class="difflineplus">+      function([name, val]) {</span>
<a href="#l7.632"></a><span id="l7.632" class="difflineplus">+        trs.push($.new(&quot;tr&quot;, [</span>
<a href="#l7.633"></a><span id="l7.633" class="difflineplus">+          $.new(&quot;td&quot;, name),</span>
<a href="#l7.634"></a><span id="l7.634" class="difflineplus">+          $.new(&quot;td&quot;, val.minVersion),</span>
<a href="#l7.635"></a><span id="l7.635" class="difflineplus">+          $.new(&quot;td&quot;, val.version),</span>
<a href="#l7.636"></a><span id="l7.636" class="difflineplus">+        ]));</span>
<a href="#l7.637"></a><span id="l7.637" class="difflineplus">+      }</span>
<a href="#l7.638"></a><span id="l7.638" class="difflineplus">+    );</span>
<a href="#l7.639"></a><span id="l7.639" class="difflineplus">+    $.append($(&quot;libversions-tbody&quot;), trs);</span>
<a href="#l7.640"></a><span id="l7.640" class="difflineplus">+  },</span>
<a href="#l7.641"></a><span id="l7.641" class="difflineplus">+</span>
<a href="#l7.642"></a><span id="l7.642" class="difflineplus">+  userJS: function userJS(data) {</span>
<a href="#l7.643"></a><span id="l7.643" class="difflineplus">+    if (!data.exists)</span>
<a href="#l7.644"></a><span id="l7.644" class="difflineplus">+      return;</span>
<a href="#l7.645"></a><span id="l7.645" class="difflineplus">+    let userJSFile = Services.dirsvc.get(&quot;PrefD&quot;, Ci.nsIFile);</span>
<a href="#l7.646"></a><span id="l7.646" class="difflineplus">+    userJSFile.append(&quot;user.js&quot;);</span>
<a href="#l7.647"></a><span id="l7.647" class="difflineplus">+    $(&quot;prefs-user-js-link&quot;).href = Services.io.newFileURI(userJSFile).spec;</span>
<a href="#l7.648"></a><span id="l7.648" class="difflineplus">+    $(&quot;prefs-user-js-section&quot;).style.display = &quot;&quot;;</span>
<a href="#l7.649"></a><span id="l7.649" class="difflineplus">+    // Clear the no-copy class</span>
<a href="#l7.650"></a><span id="l7.650" class="difflineplus">+    $(&quot;prefs-user-js-section&quot;).className = &quot;&quot;;</span>
<a href="#l7.651"></a><span id="l7.651" class="difflineplus">+  },</span>
<a href="#l7.652"></a><span id="l7.652" class="difflineplus">+</span>
<a href="#l7.653"></a><span id="l7.653" class="difflineplus">+  sandbox: function sandbox(data) {</span>
<a href="#l7.654"></a><span id="l7.654" class="difflineplus">+    if (!AppConstants.MOZ_SANDBOX)</span>
<a href="#l7.655"></a><span id="l7.655" class="difflineplus">+      return;</span>
<a href="#l7.656"></a><span id="l7.656" class="difflineplus">+</span>
<a href="#l7.657"></a><span id="l7.657" class="difflineplus">+    let strings = stringBundle();</span>
<a href="#l7.658"></a><span id="l7.658" class="difflineplus">+    let tbody = $(&quot;sandbox-tbody&quot;);</span>
<a href="#l7.659"></a><span id="l7.659" class="difflineplus">+    for (let key in data) {</span>
<a href="#l7.660"></a><span id="l7.660" class="difflineplus">+      // Simplify the display a little in the common case.</span>
<a href="#l7.661"></a><span id="l7.661" class="difflineplus">+      if (key === &quot;hasPrivilegedUserNamespaces&quot; &amp;&amp;</span>
<a href="#l7.662"></a><span id="l7.662" class="difflineplus">+          data[key] === data[&quot;hasUserNamespaces&quot;]) {</span>
<a href="#l7.663"></a><span id="l7.663" class="difflineplus">+        continue;</span>
<a href="#l7.664"></a><span id="l7.664" class="difflineplus">+      }</span>
<a href="#l7.665"></a><span id="l7.665" class="difflineplus">+      if (key === &quot;syscallLog&quot;) {</span>
<a href="#l7.666"></a><span id="l7.666" class="difflineplus">+        // Not in this table.</span>
<a href="#l7.667"></a><span id="l7.667" class="difflineplus">+        continue;</span>
<a href="#l7.668"></a><span id="l7.668" class="difflineplus">+      }</span>
<a href="#l7.669"></a><span id="l7.669" class="difflineplus">+      tbody.appendChild($.new(&quot;tr&quot;, [</span>
<a href="#l7.670"></a><span id="l7.670" class="difflineplus">+        $.new(&quot;th&quot;, strings.GetStringFromName(key), &quot;column&quot;),</span>
<a href="#l7.671"></a><span id="l7.671" class="difflineplus">+        $.new(&quot;td&quot;, data[key]),</span>
<a href="#l7.672"></a><span id="l7.672" class="difflineplus">+      ]));</span>
<a href="#l7.673"></a><span id="l7.673" class="difflineplus">+    }</span>
<a href="#l7.674"></a><span id="l7.674" class="difflineplus">+</span>
<a href="#l7.675"></a><span id="l7.675" class="difflineplus">+    if (AppConstants.platform == &quot;linux&quot;) {</span>
<a href="#l7.676"></a><span id="l7.676" class="difflineplus">+      let syscallBody = $(&quot;sandbox-syscalls-tbody&quot;);</span>
<a href="#l7.677"></a><span id="l7.677" class="difflineplus">+      let argsHead = $(&quot;sandbox-syscalls-argshead&quot;);</span>
<a href="#l7.678"></a><span id="l7.678" class="difflineplus">+      for (let syscall of data.syscallLog) {</span>
<a href="#l7.679"></a><span id="l7.679" class="difflineplus">+        if (argsHead.colSpan &lt; syscall.args.length) {</span>
<a href="#l7.680"></a><span id="l7.680" class="difflineplus">+          argsHead.colSpan = syscall.args.length;</span>
<a href="#l7.681"></a><span id="l7.681" class="difflineplus">+        }</span>
<a href="#l7.682"></a><span id="l7.682" class="difflineplus">+        let cells = [</span>
<a href="#l7.683"></a><span id="l7.683" class="difflineplus">+          $.new(&quot;td&quot;, syscall.index, &quot;integer&quot;),</span>
<a href="#l7.684"></a><span id="l7.684" class="difflineplus">+          $.new(&quot;td&quot;, syscall.msecAgo / 1000),</span>
<a href="#l7.685"></a><span id="l7.685" class="difflineplus">+          $.new(&quot;td&quot;, syscall.pid, &quot;integer&quot;),</span>
<a href="#l7.686"></a><span id="l7.686" class="difflineplus">+          $.new(&quot;td&quot;, syscall.tid, &quot;integer&quot;),</span>
<a href="#l7.687"></a><span id="l7.687" class="difflineplus">+          $.new(&quot;td&quot;, strings.GetStringFromName(&quot;sandboxProcType.&quot; +</span>
<a href="#l7.688"></a><span id="l7.688" class="difflineplus">+                                                syscall.procType)),</span>
<a href="#l7.689"></a><span id="l7.689" class="difflineplus">+          $.new(&quot;td&quot;, syscall.syscall, &quot;integer&quot;),</span>
<a href="#l7.690"></a><span id="l7.690" class="difflineplus">+        ];</span>
<a href="#l7.691"></a><span id="l7.691" class="difflineplus">+        for (let arg of syscall.args) {</span>
<a href="#l7.692"></a><span id="l7.692" class="difflineplus">+          cells.push($.new(&quot;td&quot;, arg, &quot;integer&quot;));</span>
<a href="#l7.693"></a><span id="l7.693" class="difflineplus">+        }</span>
<a href="#l7.694"></a><span id="l7.694" class="difflineplus">+        syscallBody.appendChild($.new(&quot;tr&quot;, cells));</span>
<a href="#l7.695"></a><span id="l7.695" class="difflineplus">+      }</span>
<a href="#l7.696"></a><span id="l7.696" class="difflineplus">+    }</span>
<a href="#l7.697"></a><span id="l7.697" class="difflineplus">+  },</span>
<a href="#l7.698"></a><span id="l7.698" class="difflineplus">+};</span>
<a href="#l7.699"></a><span id="l7.699" class="difflineplus">+</span>
<a href="#l7.700"></a><span id="l7.700" class="difflineplus">+var $ = document.getElementById.bind(document);</span>
<a href="#l7.701"></a><span id="l7.701" class="difflineplus">+</span>
<a href="#l7.702"></a><span id="l7.702" class="difflineplus">+$.new = function $_new(tag, textContentOrChildren, className, attributes) {</span>
<a href="#l7.703"></a><span id="l7.703" class="difflineplus">+  let elt = document.createElement(tag);</span>
<a href="#l7.704"></a><span id="l7.704" class="difflineplus">+  if (className)</span>
<a href="#l7.705"></a><span id="l7.705" class="difflineplus">+    elt.className = className;</span>
<a href="#l7.706"></a><span id="l7.706" class="difflineplus">+  if (attributes) {</span>
<a href="#l7.707"></a><span id="l7.707" class="difflineplus">+    for (let attrName in attributes)</span>
<a href="#l7.708"></a><span id="l7.708" class="difflineplus">+      elt.setAttribute(attrName, attributes[attrName]);</span>
<a href="#l7.709"></a><span id="l7.709" class="difflineplus">+  }</span>
<a href="#l7.710"></a><span id="l7.710" class="difflineplus">+  if (Array.isArray(textContentOrChildren))</span>
<a href="#l7.711"></a><span id="l7.711" class="difflineplus">+    this.append(elt, textContentOrChildren);</span>
<a href="#l7.712"></a><span id="l7.712" class="difflineplus">+  else</span>
<a href="#l7.713"></a><span id="l7.713" class="difflineplus">+    elt.textContent = String(textContentOrChildren);</span>
<a href="#l7.714"></a><span id="l7.714" class="difflineplus">+  return elt;</span>
<a href="#l7.715"></a><span id="l7.715" class="difflineplus">+};</span>
<a href="#l7.716"></a><span id="l7.716" class="difflineplus">+</span>
<a href="#l7.717"></a><span id="l7.717" class="difflineplus">+$.append = function $_append(parent, children) {</span>
<a href="#l7.718"></a><span id="l7.718" class="difflineplus">+  children.forEach(c =&gt; parent.appendChild(c));</span>
<a href="#l7.719"></a><span id="l7.719" class="difflineplus">+};</span>
<a href="#l7.720"></a><span id="l7.720" class="difflineplus">+</span>
<a href="#l7.721"></a><span id="l7.721" class="difflineplus">+function stringBundle() {</span>
<a href="#l7.722"></a><span id="l7.722" class="difflineplus">+  return Services.strings.createBundle(</span>
<a href="#l7.723"></a><span id="l7.723" class="difflineplus">+           &quot;chrome://global/locale/aboutSupport.properties&quot;);</span>
<a href="#l7.724"></a><span id="l7.724" class="difflineplus">+}</span>
<a href="#l7.725"></a><span id="l7.725" class="difflineplus">+</span>
<a href="#l7.726"></a><span id="l7.726" class="difflineplus">+function assembleFromGraphicsFailure(i, data) {</span>
<a href="#l7.727"></a><span id="l7.727" class="difflineplus">+  // Only cover the cases we have today; for example, we do not have</span>
<a href="#l7.728"></a><span id="l7.728" class="difflineplus">+  // log failures that assert and we assume the log level is 1/error.</span>
<a href="#l7.729"></a><span id="l7.729" class="difflineplus">+  let message = data.failures[i];</span>
<a href="#l7.730"></a><span id="l7.730" class="difflineplus">+  let index = data.indices[i];</span>
<a href="#l7.731"></a><span id="l7.731" class="difflineplus">+  let what = &quot;&quot;;</span>
<a href="#l7.732"></a><span id="l7.732" class="difflineplus">+  if (message.search(/\[GFX1-\]: \(LF\)/) == 0) {</span>
<a href="#l7.733"></a><span id="l7.733" class="difflineplus">+    // Non-asserting log failure - the message is substring(14)</span>
<a href="#l7.734"></a><span id="l7.734" class="difflineplus">+    what = &quot;LogFailure&quot;;</span>
<a href="#l7.735"></a><span id="l7.735" class="difflineplus">+    message = message.substring(14);</span>
<a href="#l7.736"></a><span id="l7.736" class="difflineplus">+  } else if (message.search(/\[GFX1-\]: /) == 0) {</span>
<a href="#l7.737"></a><span id="l7.737" class="difflineplus">+    // Non-asserting - the message is substring(9)</span>
<a href="#l7.738"></a><span id="l7.738" class="difflineplus">+    what = &quot;Error&quot;;</span>
<a href="#l7.739"></a><span id="l7.739" class="difflineplus">+    message = message.substring(9);</span>
<a href="#l7.740"></a><span id="l7.740" class="difflineplus">+  } else if (message.search(/\[GFX1\]: /) == 0) {</span>
<a href="#l7.741"></a><span id="l7.741" class="difflineplus">+    // Asserting - the message is substring(8)</span>
<a href="#l7.742"></a><span id="l7.742" class="difflineplus">+    what = &quot;Assert&quot;;</span>
<a href="#l7.743"></a><span id="l7.743" class="difflineplus">+    message = message.substring(8);</span>
<a href="#l7.744"></a><span id="l7.744" class="difflineplus">+  }</span>
<a href="#l7.745"></a><span id="l7.745" class="difflineplus">+  let assembled = {&quot;index&quot; : index,</span>
<a href="#l7.746"></a><span id="l7.746" class="difflineplus">+                   &quot;header&quot; : (&quot;(#&quot; + index + &quot;) &quot; + what),</span>
<a href="#l7.747"></a><span id="l7.747" class="difflineplus">+                   &quot;message&quot; : message};</span>
<a href="#l7.748"></a><span id="l7.748" class="difflineplus">+  return assembled;</span>
<a href="#l7.749"></a><span id="l7.749" class="difflineplus">+}</span>
<a href="#l7.750"></a><span id="l7.750" class="difflineplus">+</span>
<a href="#l7.751"></a><span id="l7.751" class="difflineplus">+function sortedArrayFromObject(obj) {</span>
<a href="#l7.752"></a><span id="l7.752" class="difflineplus">+  let tuples = [];</span>
<a href="#l7.753"></a><span id="l7.753" class="difflineplus">+  for (let prop in obj)</span>
<a href="#l7.754"></a><span id="l7.754" class="difflineplus">+    tuples.push([prop, obj[prop]]);</span>
<a href="#l7.755"></a><span id="l7.755" class="difflineplus">+  tuples.sort(([prop1, v1], [prop2, v2]) =&gt; prop1.localeCompare(prop2));</span>
<a href="#l7.756"></a><span id="l7.756" class="difflineplus">+  return tuples;</span>
<a href="#l7.757"></a><span id="l7.757" class="difflineplus">+}</span>
<a href="#l7.758"></a><span id="l7.758" class="difflineplus">+</span>
<a href="#l7.759"></a><span id="l7.759" class="difflineplus">+function copyRawDataToClipboard(button) {</span>
<a href="#l7.760"></a><span id="l7.760" class="difflineplus">+  if (button)</span>
<a href="#l7.761"></a><span id="l7.761" class="difflineplus">+    button.disabled = true;</span>
<a href="#l7.762"></a><span id="l7.762" class="difflineplus">+  try {</span>
<a href="#l7.763"></a><span id="l7.763" class="difflineplus">+    Troubleshoot.snapshot(function(snapshot) {</span>
<a href="#l7.764"></a><span id="l7.764" class="difflineplus">+      if (button)</span>
<a href="#l7.765"></a><span id="l7.765" class="difflineplus">+        button.disabled = false;</span>
<a href="#l7.766"></a><span id="l7.766" class="difflineplus">+      let str = Cc[&quot;@mozilla.org/supports-string;1&quot;].</span>
<a href="#l7.767"></a><span id="l7.767" class="difflineplus">+                createInstance(Ci.nsISupportsString);</span>
<a href="#l7.768"></a><span id="l7.768" class="difflineplus">+      str.data = JSON.stringify(snapshot, undefined, 2);</span>
<a href="#l7.769"></a><span id="l7.769" class="difflineplus">+      let transferable = Cc[&quot;@mozilla.org/widget/transferable;1&quot;].</span>
<a href="#l7.770"></a><span id="l7.770" class="difflineplus">+                         createInstance(Ci.nsITransferable);</span>
<a href="#l7.771"></a><span id="l7.771" class="difflineplus">+      transferable.init(getLoadContext());</span>
<a href="#l7.772"></a><span id="l7.772" class="difflineplus">+      transferable.addDataFlavor(&quot;text/unicode&quot;);</span>
<a href="#l7.773"></a><span id="l7.773" class="difflineplus">+      transferable.setTransferData(&quot;text/unicode&quot;, str, str.data.length * 2);</span>
<a href="#l7.774"></a><span id="l7.774" class="difflineplus">+      Cc[&quot;@mozilla.org/widget/clipboard;1&quot;].</span>
<a href="#l7.775"></a><span id="l7.775" class="difflineplus">+        getService(Ci.nsIClipboard).</span>
<a href="#l7.776"></a><span id="l7.776" class="difflineplus">+        setData(transferable, null, Ci.nsIClipboard.kGlobalClipboard);</span>
<a href="#l7.777"></a><span id="l7.777" class="difflineplus">+      if (AppConstants.platform == &quot;android&quot;) {</span>
<a href="#l7.778"></a><span id="l7.778" class="difflineplus">+        // Present a toast notification.</span>
<a href="#l7.779"></a><span id="l7.779" class="difflineplus">+        let message = {</span>
<a href="#l7.780"></a><span id="l7.780" class="difflineplus">+          type: &quot;Toast:Show&quot;,</span>
<a href="#l7.781"></a><span id="l7.781" class="difflineplus">+          message: stringBundle().GetStringFromName(&quot;rawDataCopied&quot;),</span>
<a href="#l7.782"></a><span id="l7.782" class="difflineplus">+          duration: &quot;short&quot;</span>
<a href="#l7.783"></a><span id="l7.783" class="difflineplus">+        };</span>
<a href="#l7.784"></a><span id="l7.784" class="difflineplus">+        Services.androidBridge.handleGeckoMessage(message);</span>
<a href="#l7.785"></a><span id="l7.785" class="difflineplus">+      }</span>
<a href="#l7.786"></a><span id="l7.786" class="difflineplus">+    });</span>
<a href="#l7.787"></a><span id="l7.787" class="difflineplus">+  } catch (err) {</span>
<a href="#l7.788"></a><span id="l7.788" class="difflineplus">+    if (button)</span>
<a href="#l7.789"></a><span id="l7.789" class="difflineplus">+      button.disabled = false;</span>
<a href="#l7.790"></a><span id="l7.790" class="difflineplus">+    throw err;</span>
<a href="#l7.791"></a><span id="l7.791" class="difflineplus">+  }</span>
<a href="#l7.792"></a><span id="l7.792" class="difflineplus">+}</span>
<a href="#l7.793"></a><span id="l7.793" class="difflineplus">+</span>
<a href="#l7.794"></a><span id="l7.794" class="difflineplus">+function getLoadContext() {</span>
<a href="#l7.795"></a><span id="l7.795" class="difflineplus">+  return window.QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l7.796"></a><span id="l7.796" class="difflineplus">+               .getInterface(Ci.nsIWebNavigation)</span>
<a href="#l7.797"></a><span id="l7.797" class="difflineplus">+               .QueryInterface(Ci.nsILoadContext);</span>
<a href="#l7.798"></a><span id="l7.798" class="difflineplus">+}</span>
<a href="#l7.799"></a><span id="l7.799" class="difflineplus">+</span>
<a href="#l7.800"></a><span id="l7.800" class="difflineplus">+function copyContentsToClipboard() {</span>
<a href="#l7.801"></a><span id="l7.801" class="difflineplus">+  // Get the HTML and text representations for the important part of the page.</span>
<a href="#l7.802"></a><span id="l7.802" class="difflineplus">+  let contentsDiv = $(&quot;contents&quot;);</span>
<a href="#l7.803"></a><span id="l7.803" class="difflineplus">+  let dataHtml = contentsDiv.innerHTML;</span>
<a href="#l7.804"></a><span id="l7.804" class="difflineplus">+  let dataText = createTextForElement(contentsDiv);</span>
<a href="#l7.805"></a><span id="l7.805" class="difflineplus">+</span>
<a href="#l7.806"></a><span id="l7.806" class="difflineplus">+  // We can't use plain strings, we have to use nsSupportsString.</span>
<a href="#l7.807"></a><span id="l7.807" class="difflineplus">+  let supportsStringClass = Cc[&quot;@mozilla.org/supports-string;1&quot;];</span>
<a href="#l7.808"></a><span id="l7.808" class="difflineplus">+  let ssHtml = supportsStringClass.createInstance(Ci.nsISupportsString);</span>
<a href="#l7.809"></a><span id="l7.809" class="difflineplus">+  let ssText = supportsStringClass.createInstance(Ci.nsISupportsString);</span>
<a href="#l7.810"></a><span id="l7.810" class="difflineplus">+</span>
<a href="#l7.811"></a><span id="l7.811" class="difflineplus">+  let transferable = Cc[&quot;@mozilla.org/widget/transferable;1&quot;]</span>
<a href="#l7.812"></a><span id="l7.812" class="difflineplus">+                       .createInstance(Ci.nsITransferable);</span>
<a href="#l7.813"></a><span id="l7.813" class="difflineplus">+  transferable.init(getLoadContext());</span>
<a href="#l7.814"></a><span id="l7.814" class="difflineplus">+</span>
<a href="#l7.815"></a><span id="l7.815" class="difflineplus">+  // Add the HTML flavor.</span>
<a href="#l7.816"></a><span id="l7.816" class="difflineplus">+  transferable.addDataFlavor(&quot;text/html&quot;);</span>
<a href="#l7.817"></a><span id="l7.817" class="difflineplus">+  ssHtml.data = dataHtml;</span>
<a href="#l7.818"></a><span id="l7.818" class="difflineplus">+  transferable.setTransferData(&quot;text/html&quot;, ssHtml, dataHtml.length * 2);</span>
<a href="#l7.819"></a><span id="l7.819" class="difflineplus">+</span>
<a href="#l7.820"></a><span id="l7.820" class="difflineplus">+  // Add the plain text flavor.</span>
<a href="#l7.821"></a><span id="l7.821" class="difflineplus">+  transferable.addDataFlavor(&quot;text/unicode&quot;);</span>
<a href="#l7.822"></a><span id="l7.822" class="difflineplus">+  ssText.data = dataText;</span>
<a href="#l7.823"></a><span id="l7.823" class="difflineplus">+  transferable.setTransferData(&quot;text/unicode&quot;, ssText, dataText.length * 2);</span>
<a href="#l7.824"></a><span id="l7.824" class="difflineplus">+</span>
<a href="#l7.825"></a><span id="l7.825" class="difflineplus">+  // Store the data into the clipboard.</span>
<a href="#l7.826"></a><span id="l7.826" class="difflineplus">+  let clipboard = Cc[&quot;@mozilla.org/widget/clipboard;1&quot;]</span>
<a href="#l7.827"></a><span id="l7.827" class="difflineplus">+                    .getService(Ci.nsIClipboard);</span>
<a href="#l7.828"></a><span id="l7.828" class="difflineplus">+  clipboard.setData(transferable, null, clipboard.kGlobalClipboard);</span>
<a href="#l7.829"></a><span id="l7.829" class="difflineplus">+</span>
<a href="#l7.830"></a><span id="l7.830" class="difflineplus">+  if (AppConstants.platform == &quot;android&quot;) {</span>
<a href="#l7.831"></a><span id="l7.831" class="difflineplus">+    // Present a toast notification.</span>
<a href="#l7.832"></a><span id="l7.832" class="difflineplus">+    let message = {</span>
<a href="#l7.833"></a><span id="l7.833" class="difflineplus">+      type: &quot;Toast:Show&quot;,</span>
<a href="#l7.834"></a><span id="l7.834" class="difflineplus">+      message: stringBundle().GetStringFromName(&quot;textCopied&quot;),</span>
<a href="#l7.835"></a><span id="l7.835" class="difflineplus">+      duration: &quot;short&quot;</span>
<a href="#l7.836"></a><span id="l7.836" class="difflineplus">+    };</span>
<a href="#l7.837"></a><span id="l7.837" class="difflineplus">+    Services.androidBridge.handleGeckoMessage(message);</span>
<a href="#l7.838"></a><span id="l7.838" class="difflineplus">+  }</span>
<a href="#l7.839"></a><span id="l7.839" class="difflineplus">+}</span>
<a href="#l7.840"></a><span id="l7.840" class="difflineplus">+</span>
<a href="#l7.841"></a><span id="l7.841" class="difflineplus">+// Return the plain text representation of an element.  Do a little bit</span>
<a href="#l7.842"></a><span id="l7.842" class="difflineplus">+// of pretty-printing to make it human-readable.</span>
<a href="#l7.843"></a><span id="l7.843" class="difflineplus">+function createTextForElement(elem) {</span>
<a href="#l7.844"></a><span id="l7.844" class="difflineplus">+  let serializer = new Serializer();</span>
<a href="#l7.845"></a><span id="l7.845" class="difflineplus">+  let text = serializer.serialize(elem);</span>
<a href="#l7.846"></a><span id="l7.846" class="difflineplus">+</span>
<a href="#l7.847"></a><span id="l7.847" class="difflineplus">+  // Actual CR/LF pairs are needed for some Windows text editors.</span>
<a href="#l7.848"></a><span id="l7.848" class="difflineplus">+  if (AppConstants.platform == &quot;win&quot;) {</span>
<a href="#l7.849"></a><span id="l7.849" class="difflineplus">+    text = text.replace(/\n/g, &quot;\r\n&quot;);</span>
<a href="#l7.850"></a><span id="l7.850" class="difflineplus">+  }</span>
<a href="#l7.851"></a><span id="l7.851" class="difflineplus">+</span>
<a href="#l7.852"></a><span id="l7.852" class="difflineplus">+  return text;</span>
<a href="#l7.853"></a><span id="l7.853" class="difflineplus">+}</span>
<a href="#l7.854"></a><span id="l7.854" class="difflineplus">+</span>
<a href="#l7.855"></a><span id="l7.855" class="difflineplus">+function Serializer() {</span>
<a href="#l7.856"></a><span id="l7.856" class="difflineplus">+}</span>
<a href="#l7.857"></a><span id="l7.857" class="difflineplus">+</span>
<a href="#l7.858"></a><span id="l7.858" class="difflineplus">+Serializer.prototype = {</span>
<a href="#l7.859"></a><span id="l7.859" class="difflineplus">+</span>
<a href="#l7.860"></a><span id="l7.860" class="difflineplus">+  serialize(rootElem) {</span>
<a href="#l7.861"></a><span id="l7.861" class="difflineplus">+    this._lines = [];</span>
<a href="#l7.862"></a><span id="l7.862" class="difflineplus">+    this._startNewLine();</span>
<a href="#l7.863"></a><span id="l7.863" class="difflineplus">+    this._serializeElement(rootElem);</span>
<a href="#l7.864"></a><span id="l7.864" class="difflineplus">+    this._startNewLine();</span>
<a href="#l7.865"></a><span id="l7.865" class="difflineplus">+    return this._lines.join(&quot;\n&quot;).trim() + &quot;\n&quot;;</span>
<a href="#l7.866"></a><span id="l7.866" class="difflineplus">+  },</span>
<a href="#l7.867"></a><span id="l7.867" class="difflineplus">+</span>
<a href="#l7.868"></a><span id="l7.868" class="difflineplus">+  // The current line is always the line that writing will start at next.  When</span>
<a href="#l7.869"></a><span id="l7.869" class="difflineplus">+  // an element is serialized, the current line is updated to be the line at</span>
<a href="#l7.870"></a><span id="l7.870" class="difflineplus">+  // which the next element should be written.</span>
<a href="#l7.871"></a><span id="l7.871" class="difflineplus">+  get _currentLine() {</span>
<a href="#l7.872"></a><span id="l7.872" class="difflineplus">+    return this._lines.length ? this._lines[this._lines.length - 1] : null;</span>
<a href="#l7.873"></a><span id="l7.873" class="difflineplus">+  },</span>
<a href="#l7.874"></a><span id="l7.874" class="difflineplus">+</span>
<a href="#l7.875"></a><span id="l7.875" class="difflineplus">+  set _currentLine(val) {</span>
<a href="#l7.876"></a><span id="l7.876" class="difflineplus">+    return this._lines[this._lines.length - 1] = val;</span>
<a href="#l7.877"></a><span id="l7.877" class="difflineplus">+  },</span>
<a href="#l7.878"></a><span id="l7.878" class="difflineplus">+</span>
<a href="#l7.879"></a><span id="l7.879" class="difflineplus">+  _serializeElement(elem) {</span>
<a href="#l7.880"></a><span id="l7.880" class="difflineplus">+    if (this._ignoreElement(elem))</span>
<a href="#l7.881"></a><span id="l7.881" class="difflineplus">+      return;</span>
<a href="#l7.882"></a><span id="l7.882" class="difflineplus">+</span>
<a href="#l7.883"></a><span id="l7.883" class="difflineplus">+    // table</span>
<a href="#l7.884"></a><span id="l7.884" class="difflineplus">+    if (elem.localName == &quot;table&quot;) {</span>
<a href="#l7.885"></a><span id="l7.885" class="difflineplus">+      this._serializeTable(elem);</span>
<a href="#l7.886"></a><span id="l7.886" class="difflineplus">+      return;</span>
<a href="#l7.887"></a><span id="l7.887" class="difflineplus">+    }</span>
<a href="#l7.888"></a><span id="l7.888" class="difflineplus">+</span>
<a href="#l7.889"></a><span id="l7.889" class="difflineplus">+    // all other elements</span>
<a href="#l7.890"></a><span id="l7.890" class="difflineplus">+</span>
<a href="#l7.891"></a><span id="l7.891" class="difflineplus">+    let hasText = false;</span>
<a href="#l7.892"></a><span id="l7.892" class="difflineplus">+    for (let child of elem.childNodes) {</span>
<a href="#l7.893"></a><span id="l7.893" class="difflineplus">+      if (child.nodeType == Node.TEXT_NODE) {</span>
<a href="#l7.894"></a><span id="l7.894" class="difflineplus">+        let text = this._nodeText(child);</span>
<a href="#l7.895"></a><span id="l7.895" class="difflineplus">+        this._appendText(text);</span>
<a href="#l7.896"></a><span id="l7.896" class="difflineplus">+        hasText = hasText || !!text.trim();</span>
<a href="#l7.897"></a><span id="l7.897" class="difflineplus">+      } else if (child.nodeType == Node.ELEMENT_NODE)</span>
<a href="#l7.898"></a><span id="l7.898" class="difflineplus">+        this._serializeElement(child);</span>
<a href="#l7.899"></a><span id="l7.899" class="difflineplus">+    }</span>
<a href="#l7.900"></a><span id="l7.900" class="difflineplus">+</span>
<a href="#l7.901"></a><span id="l7.901" class="difflineplus">+    // For headings, draw a &quot;line&quot; underneath them so they stand out.</span>
<a href="#l7.902"></a><span id="l7.902" class="difflineplus">+    if (/^h[0-9]+$/.test(elem.localName)) {</span>
<a href="#l7.903"></a><span id="l7.903" class="difflineplus">+      let headerText = (this._currentLine || &quot;&quot;).trim();</span>
<a href="#l7.904"></a><span id="l7.904" class="difflineplus">+      if (headerText) {</span>
<a href="#l7.905"></a><span id="l7.905" class="difflineplus">+        this._startNewLine();</span>
<a href="#l7.906"></a><span id="l7.906" class="difflineplus">+        this._appendText(&quot;-&quot;.repeat(headerText.length));</span>
<a href="#l7.907"></a><span id="l7.907" class="difflineplus">+      }</span>
<a href="#l7.908"></a><span id="l7.908" class="difflineplus">+    }</span>
<a href="#l7.909"></a><span id="l7.909" class="difflineplus">+</span>
<a href="#l7.910"></a><span id="l7.910" class="difflineplus">+    // Add a blank line underneath block elements but only if they contain text.</span>
<a href="#l7.911"></a><span id="l7.911" class="difflineplus">+    if (hasText) {</span>
<a href="#l7.912"></a><span id="l7.912" class="difflineplus">+      let display = window.getComputedStyle(elem).getPropertyValue(&quot;display&quot;);</span>
<a href="#l7.913"></a><span id="l7.913" class="difflineplus">+      if (display == &quot;block&quot;) {</span>
<a href="#l7.914"></a><span id="l7.914" class="difflineplus">+        this._startNewLine();</span>
<a href="#l7.915"></a><span id="l7.915" class="difflineplus">+        this._startNewLine();</span>
<a href="#l7.916"></a><span id="l7.916" class="difflineplus">+      }</span>
<a href="#l7.917"></a><span id="l7.917" class="difflineplus">+    }</span>
<a href="#l7.918"></a><span id="l7.918" class="difflineplus">+  },</span>
<a href="#l7.919"></a><span id="l7.919" class="difflineplus">+</span>
<a href="#l7.920"></a><span id="l7.920" class="difflineplus">+  _startNewLine(lines) {</span>
<a href="#l7.921"></a><span id="l7.921" class="difflineplus">+    let currLine = this._currentLine;</span>
<a href="#l7.922"></a><span id="l7.922" class="difflineplus">+    if (currLine) {</span>
<a href="#l7.923"></a><span id="l7.923" class="difflineplus">+      // The current line is not empty.  Trim it.</span>
<a href="#l7.924"></a><span id="l7.924" class="difflineplus">+      this._currentLine = currLine.trim();</span>
<a href="#l7.925"></a><span id="l7.925" class="difflineplus">+      if (!this._currentLine)</span>
<a href="#l7.926"></a><span id="l7.926" class="difflineplus">+        // The current line became empty.  Discard it.</span>
<a href="#l7.927"></a><span id="l7.927" class="difflineplus">+        this._lines.pop();</span>
<a href="#l7.928"></a><span id="l7.928" class="difflineplus">+    }</span>
<a href="#l7.929"></a><span id="l7.929" class="difflineplus">+    this._lines.push(&quot;&quot;);</span>
<a href="#l7.930"></a><span id="l7.930" class="difflineplus">+  },</span>
<a href="#l7.931"></a><span id="l7.931" class="difflineplus">+</span>
<a href="#l7.932"></a><span id="l7.932" class="difflineplus">+  _appendText(text, lines) {</span>
<a href="#l7.933"></a><span id="l7.933" class="difflineplus">+    this._currentLine += text;</span>
<a href="#l7.934"></a><span id="l7.934" class="difflineplus">+  },</span>
<a href="#l7.935"></a><span id="l7.935" class="difflineplus">+</span>
<a href="#l7.936"></a><span id="l7.936" class="difflineplus">+  _isHiddenSubHeading(th) {</span>
<a href="#l7.937"></a><span id="l7.937" class="difflineplus">+    return th.parentNode.parentNode.style.display == &quot;none&quot;;</span>
<a href="#l7.938"></a><span id="l7.938" class="difflineplus">+  },</span>
<a href="#l7.939"></a><span id="l7.939" class="difflineplus">+</span>
<a href="#l7.940"></a><span id="l7.940" class="difflineplus">+  _serializeTable(table) {</span>
<a href="#l7.941"></a><span id="l7.941" class="difflineplus">+    // Collect the table's column headings if in fact there are any.  First</span>
<a href="#l7.942"></a><span id="l7.942" class="difflineplus">+    // check thead.  If there's no thead, check the first tr.</span>
<a href="#l7.943"></a><span id="l7.943" class="difflineplus">+    let colHeadings = {};</span>
<a href="#l7.944"></a><span id="l7.944" class="difflineplus">+    let tableHeadingElem = table.querySelector(&quot;thead&quot;);</span>
<a href="#l7.945"></a><span id="l7.945" class="difflineplus">+    if (!tableHeadingElem)</span>
<a href="#l7.946"></a><span id="l7.946" class="difflineplus">+      tableHeadingElem = table.querySelector(&quot;tr&quot;);</span>
<a href="#l7.947"></a><span id="l7.947" class="difflineplus">+    if (tableHeadingElem) {</span>
<a href="#l7.948"></a><span id="l7.948" class="difflineplus">+      let tableHeadingCols = tableHeadingElem.querySelectorAll(&quot;th,td&quot;);</span>
<a href="#l7.949"></a><span id="l7.949" class="difflineplus">+      // If there's a contiguous run of th's in the children starting from the</span>
<a href="#l7.950"></a><span id="l7.950" class="difflineplus">+      // rightmost child, then consider them to be column headings.</span>
<a href="#l7.951"></a><span id="l7.951" class="difflineplus">+      for (let i = tableHeadingCols.length - 1; i &gt;= 0; i--) {</span>
<a href="#l7.952"></a><span id="l7.952" class="difflineplus">+        let col = tableHeadingCols[i];</span>
<a href="#l7.953"></a><span id="l7.953" class="difflineplus">+        if (col.localName != &quot;th&quot; || col.classList.contains(&quot;title-column&quot;))</span>
<a href="#l7.954"></a><span id="l7.954" class="difflineplus">+          break;</span>
<a href="#l7.955"></a><span id="l7.955" class="difflineplus">+        colHeadings[i] = this._nodeText(col).trim();</span>
<a href="#l7.956"></a><span id="l7.956" class="difflineplus">+      }</span>
<a href="#l7.957"></a><span id="l7.957" class="difflineplus">+    }</span>
<a href="#l7.958"></a><span id="l7.958" class="difflineplus">+    let hasColHeadings = Object.keys(colHeadings).length &gt; 0;</span>
<a href="#l7.959"></a><span id="l7.959" class="difflineplus">+    if (!hasColHeadings)</span>
<a href="#l7.960"></a><span id="l7.960" class="difflineplus">+      tableHeadingElem = null;</span>
<a href="#l7.961"></a><span id="l7.961" class="difflineplus">+</span>
<a href="#l7.962"></a><span id="l7.962" class="difflineplus">+    let trs = table.querySelectorAll(&quot;table &gt; tr, tbody &gt; tr&quot;);</span>
<a href="#l7.963"></a><span id="l7.963" class="difflineplus">+    let startRow =</span>
<a href="#l7.964"></a><span id="l7.964" class="difflineplus">+      tableHeadingElem &amp;&amp; tableHeadingElem.localName == &quot;tr&quot; ? 1 : 0;</span>
<a href="#l7.965"></a><span id="l7.965" class="difflineplus">+</span>
<a href="#l7.966"></a><span id="l7.966" class="difflineplus">+    if (startRow &gt;= trs.length)</span>
<a href="#l7.967"></a><span id="l7.967" class="difflineplus">+      // The table's empty.</span>
<a href="#l7.968"></a><span id="l7.968" class="difflineplus">+      return;</span>
<a href="#l7.969"></a><span id="l7.969" class="difflineplus">+</span>
<a href="#l7.970"></a><span id="l7.970" class="difflineplus">+    if (hasColHeadings &amp;&amp; !this._ignoreElement(tableHeadingElem)) {</span>
<a href="#l7.971"></a><span id="l7.971" class="difflineplus">+      // Use column headings.  Print each tr as a multi-line chunk like:</span>
<a href="#l7.972"></a><span id="l7.972" class="difflineplus">+      //   Heading 1: Column 1 value</span>
<a href="#l7.973"></a><span id="l7.973" class="difflineplus">+      //   Heading 2: Column 2 value</span>
<a href="#l7.974"></a><span id="l7.974" class="difflineplus">+      for (let i = startRow; i &lt; trs.length; i++) {</span>
<a href="#l7.975"></a><span id="l7.975" class="difflineplus">+        if (this._ignoreElement(trs[i]))</span>
<a href="#l7.976"></a><span id="l7.976" class="difflineplus">+          continue;</span>
<a href="#l7.977"></a><span id="l7.977" class="difflineplus">+        let children = trs[i].querySelectorAll(&quot;td&quot;);</span>
<a href="#l7.978"></a><span id="l7.978" class="difflineplus">+        for (let j = 0; j &lt; children.length; j++) {</span>
<a href="#l7.979"></a><span id="l7.979" class="difflineplus">+          let text = &quot;&quot;;</span>
<a href="#l7.980"></a><span id="l7.980" class="difflineplus">+          if (colHeadings[j])</span>
<a href="#l7.981"></a><span id="l7.981" class="difflineplus">+            text += colHeadings[j] + &quot;: &quot;;</span>
<a href="#l7.982"></a><span id="l7.982" class="difflineplus">+          text += this._nodeText(children[j]).trim();</span>
<a href="#l7.983"></a><span id="l7.983" class="difflineplus">+          this._appendText(text);</span>
<a href="#l7.984"></a><span id="l7.984" class="difflineplus">+          this._startNewLine();</span>
<a href="#l7.985"></a><span id="l7.985" class="difflineplus">+        }</span>
<a href="#l7.986"></a><span id="l7.986" class="difflineplus">+        this._startNewLine();</span>
<a href="#l7.987"></a><span id="l7.987" class="difflineplus">+      }</span>
<a href="#l7.988"></a><span id="l7.988" class="difflineplus">+      return;</span>
<a href="#l7.989"></a><span id="l7.989" class="difflineplus">+    }</span>
<a href="#l7.990"></a><span id="l7.990" class="difflineplus">+</span>
<a href="#l7.991"></a><span id="l7.991" class="difflineplus">+    // Don't use column headings.  Assume the table has only two columns and</span>
<a href="#l7.992"></a><span id="l7.992" class="difflineplus">+    // print each tr in a single line like:</span>
<a href="#l7.993"></a><span id="l7.993" class="difflineplus">+    //   Column 1 value: Column 2 value</span>
<a href="#l7.994"></a><span id="l7.994" class="difflineplus">+    for (let i = startRow; i &lt; trs.length; i++) {</span>
<a href="#l7.995"></a><span id="l7.995" class="difflineplus">+      if (this._ignoreElement(trs[i]))</span>
<a href="#l7.996"></a><span id="l7.996" class="difflineplus">+        continue;</span>
<a href="#l7.997"></a><span id="l7.997" class="difflineplus">+      let children = trs[i].querySelectorAll(&quot;th,td&quot;);</span>
<a href="#l7.998"></a><span id="l7.998" class="difflineplus">+      let rowHeading = this._nodeText(children[0]).trim();</span>
<a href="#l7.999"></a><span id="l7.999" class="difflineplus">+      if (children[0].classList.contains(&quot;title-column&quot;)) {</span>
<a href="#l7.1000"></a><span id="l7.1000" class="difflineplus">+        if (!this._isHiddenSubHeading(children[0]))</span>
<a href="#l7.1001"></a><span id="l7.1001" class="difflineplus">+          this._appendText(rowHeading);</span>
<a href="#l7.1002"></a><span id="l7.1002" class="difflineplus">+      } else if (children.length == 1) {</span>
<a href="#l7.1003"></a><span id="l7.1003" class="difflineplus">+        // This is a single-cell row.</span>
<a href="#l7.1004"></a><span id="l7.1004" class="difflineplus">+        this._appendText(rowHeading);</span>
<a href="#l7.1005"></a><span id="l7.1005" class="difflineplus">+      } else {</span>
<a href="#l7.1006"></a><span id="l7.1006" class="difflineplus">+        let childTables = trs[i].querySelectorAll(&quot;table&quot;);</span>
<a href="#l7.1007"></a><span id="l7.1007" class="difflineplus">+        if (childTables.length) {</span>
<a href="#l7.1008"></a><span id="l7.1008" class="difflineplus">+          // If we have child tables, don't use nodeText - its trs are already</span>
<a href="#l7.1009"></a><span id="l7.1009" class="difflineplus">+          // queued up from querySelectorAll earlier.</span>
<a href="#l7.1010"></a><span id="l7.1010" class="difflineplus">+          this._appendText(rowHeading + &quot;: &quot;);</span>
<a href="#l7.1011"></a><span id="l7.1011" class="difflineplus">+        } else {</span>
<a href="#l7.1012"></a><span id="l7.1012" class="difflineplus">+          this._appendText(rowHeading + &quot;: &quot; + this._nodeText(children[1]).trim());</span>
<a href="#l7.1013"></a><span id="l7.1013" class="difflineplus">+        }</span>
<a href="#l7.1014"></a><span id="l7.1014" class="difflineplus">+      }</span>
<a href="#l7.1015"></a><span id="l7.1015" class="difflineplus">+      this._startNewLine();</span>
<a href="#l7.1016"></a><span id="l7.1016" class="difflineplus">+    }</span>
<a href="#l7.1017"></a><span id="l7.1017" class="difflineplus">+    this._startNewLine();</span>
<a href="#l7.1018"></a><span id="l7.1018" class="difflineplus">+  },</span>
<a href="#l7.1019"></a><span id="l7.1019" class="difflineplus">+</span>
<a href="#l7.1020"></a><span id="l7.1020" class="difflineplus">+  _ignoreElement(elem) {</span>
<a href="#l7.1021"></a><span id="l7.1021" class="difflineplus">+    return elem.classList.contains(&quot;no-copy&quot;);</span>
<a href="#l7.1022"></a><span id="l7.1022" class="difflineplus">+  },</span>
<a href="#l7.1023"></a><span id="l7.1023" class="difflineplus">+</span>
<a href="#l7.1024"></a><span id="l7.1024" class="difflineplus">+  _nodeText(node) {</span>
<a href="#l7.1025"></a><span id="l7.1025" class="difflineplus">+    return node.textContent.replace(/\s+/g, &quot; &quot;);</span>
<a href="#l7.1026"></a><span id="l7.1026" class="difflineplus">+  },</span>
<a href="#l7.1027"></a><span id="l7.1027" class="difflineplus">+};</span>
<a href="#l7.1028"></a><span id="l7.1028" class="difflineplus">+</span>
<a href="#l7.1029"></a><span id="l7.1029" class="difflineplus">+function openProfileDirectory() {</span>
<a href="#l7.1030"></a><span id="l7.1030" class="difflineplus">+  // Get the profile directory.</span>
<a href="#l7.1031"></a><span id="l7.1031" class="difflineplus">+  let currProfD = Services.dirsvc.get(&quot;ProfD&quot;, Ci.nsIFile);</span>
<a href="#l7.1032"></a><span id="l7.1032" class="difflineplus">+  let profileDir = currProfD.path;</span>
<a href="#l7.1033"></a><span id="l7.1033" class="difflineplus">+</span>
<a href="#l7.1034"></a><span id="l7.1034" class="difflineplus">+  // Show the profile directory.</span>
<a href="#l7.1035"></a><span id="l7.1035" class="difflineplus">+  let nsLocalFile = Components.Constructor(&quot;@mozilla.org/file/local;1&quot;,</span>
<a href="#l7.1036"></a><span id="l7.1036" class="difflineplus">+                                           &quot;nsILocalFile&quot;, &quot;initWithPath&quot;);</span>
<a href="#l7.1037"></a><span id="l7.1037" class="difflineplus">+  new nsLocalFile(profileDir).reveal();</span>
<a href="#l7.1038"></a><span id="l7.1038" class="difflineplus">+}</span>
<a href="#l7.1039"></a><span id="l7.1039" class="difflineplus">+</span>
<a href="#l7.1040"></a><span id="l7.1040" class="difflineplus">+/**</span>
<a href="#l7.1041"></a><span id="l7.1041" class="difflineplus">+ * Profile reset is only supported for the default profile if the appropriate migrator exists.</span>
<a href="#l7.1042"></a><span id="l7.1042" class="difflineplus">+ */</span>
<a href="#l7.1043"></a><span id="l7.1043" class="difflineplus">+function populateActionBox() {</span>
<a href="#l7.1044"></a><span id="l7.1044" class="difflineplus">+  if (ResetProfile.resetSupported()) {</span>
<a href="#l7.1045"></a><span id="l7.1045" class="difflineplus">+    $(&quot;reset-box&quot;).style.display = &quot;block&quot;;</span>
<a href="#l7.1046"></a><span id="l7.1046" class="difflineplus">+    $(&quot;action-box&quot;).style.display = &quot;block&quot;;</span>
<a href="#l7.1047"></a><span id="l7.1047" class="difflineplus">+  }</span>
<a href="#l7.1048"></a><span id="l7.1048" class="difflineplus">+  if (!Services.appinfo.inSafeMode) {</span>
<a href="#l7.1049"></a><span id="l7.1049" class="difflineplus">+    $(&quot;safe-mode-box&quot;).style.display = &quot;block&quot;;</span>
<a href="#l7.1050"></a><span id="l7.1050" class="difflineplus">+    $(&quot;action-box&quot;).style.display = &quot;block&quot;;</span>
<a href="#l7.1051"></a><span id="l7.1051" class="difflineplus">+  }</span>
<a href="#l7.1052"></a><span id="l7.1052" class="difflineplus">+}</span>
<a href="#l7.1053"></a><span id="l7.1053" class="difflineplus">+</span>
<a href="#l7.1054"></a><span id="l7.1054" class="difflineplus">+// Prompt user to restart the browser in safe mode</span>
<a href="#l7.1055"></a><span id="l7.1055" class="difflineplus">+function safeModeRestart() {</span>
<a href="#l7.1056"></a><span id="l7.1056" class="difflineplus">+  let cancelQuit = Cc[&quot;@mozilla.org/supports-PRBool;1&quot;]</span>
<a href="#l7.1057"></a><span id="l7.1057" class="difflineplus">+                     .createInstance(Ci.nsISupportsPRBool);</span>
<a href="#l7.1058"></a><span id="l7.1058" class="difflineplus">+  Services.obs.notifyObservers(cancelQuit, &quot;quit-application-requested&quot;, &quot;restart&quot;);</span>
<a href="#l7.1059"></a><span id="l7.1059" class="difflineplus">+</span>
<a href="#l7.1060"></a><span id="l7.1060" class="difflineplus">+  if (!cancelQuit.data) {</span>
<a href="#l7.1061"></a><span id="l7.1061" class="difflineplus">+    Services.startup.restartInSafeMode(Ci.nsIAppStartup.eAttemptQuit);</span>
<a href="#l7.1062"></a><span id="l7.1062" class="difflineplus">+  }</span>
<a href="#l7.1063"></a><span id="l7.1063" class="difflineplus">+}</span>
<a href="#l7.1064"></a><span id="l7.1064" class="difflineplus">+</span>
<a href="#l7.1065"></a><span id="l7.1065" class="difflineplus">+//added for TB</span>
<a href="#l7.1066"></a><span id="l7.1066" class="difflineplus">+function onShowPrivateDataChange(aCheckbox) {</span>
<a href="#l7.1067"></a><span id="l7.1067" class="difflineplus">+  document.getElementById(&quot;about-support-private&quot;).disabled = aCheckbox.checked;</span>
<a href="#l7.1068"></a><span id="l7.1068" class="difflineplus">+}</span>
<a href="#l7.1069"></a><span id="l7.1069" class="difflineplus">+</span>
<a href="#l7.1070"></a><span id="l7.1070" class="difflineplus">+/**</span>
<a href="#l7.1071"></a><span id="l7.1071" class="difflineplus">+ * Set up event listeners for buttons.</span>
<a href="#l7.1072"></a><span id="l7.1072" class="difflineplus">+ */</span>
<a href="#l7.1073"></a><span id="l7.1073" class="difflineplus">+function setupEventListeners() {</span>
<a href="#l7.1074"></a><span id="l7.1074" class="difflineplus">+  $(&quot;show-update-history-button&quot;).addEventListener(&quot;click&quot;, function(event) {</span>
<a href="#l7.1075"></a><span id="l7.1075" class="difflineplus">+    var prompter = Cc[&quot;@mozilla.org/updates/update-prompt;1&quot;].createInstance(Ci.nsIUpdatePrompt);</span>
<a href="#l7.1076"></a><span id="l7.1076" class="difflineplus">+      prompter.showUpdateHistory(window);</span>
<a href="#l7.1077"></a><span id="l7.1077" class="difflineplus">+  });</span>
<a href="#l7.1078"></a><span id="l7.1078" class="difflineplus">+/* not used by TB</span>
<a href="#l7.1079"></a><span id="l7.1079" class="difflineplus">+  $(&quot;reset-box-button&quot;).addEventListener(&quot;click&quot;, function(event) {</span>
<a href="#l7.1080"></a><span id="l7.1080" class="difflineplus">+    ResetProfile.openConfirmationDialog(window);</span>
<a href="#l7.1081"></a><span id="l7.1081" class="difflineplus">+  });</span>
<a href="#l7.1082"></a><span id="l7.1082" class="difflineplus">+  $(&quot;copy-raw-data-to-clipboard&quot;).addEventListener(&quot;click&quot;, function(event) {</span>
<a href="#l7.1083"></a><span id="l7.1083" class="difflineplus">+    copyRawDataToClipboard(this);</span>
<a href="#l7.1084"></a><span id="l7.1084" class="difflineplus">+  });</span>
<a href="#l7.1085"></a><span id="l7.1085" class="difflineplus">+*/</span>
<a href="#l7.1086"></a><span id="l7.1086" class="difflineplus">+  $(&quot;copy-to-clipboard&quot;).addEventListener(&quot;click&quot;, function(event) {</span>
<a href="#l7.1087"></a><span id="l7.1087" class="difflineplus">+    copyContentsToClipboard();</span>
<a href="#l7.1088"></a><span id="l7.1088" class="difflineplus">+  });</span>
<a href="#l7.1089"></a><span id="l7.1089" class="difflineplus">+  // added for TB</span>
<a href="#l7.1090"></a><span id="l7.1090" class="difflineplus">+  $(&quot;send-via-email&quot;).addEventListener(&quot;click&quot;, function(event) {</span>
<a href="#l7.1091"></a><span id="l7.1091" class="difflineplus">+    sendViaEmail();</span>
<a href="#l7.1092"></a><span id="l7.1092" class="difflineplus">+  });</span>
<a href="#l7.1093"></a><span id="l7.1093" class="difflineplus">+  // end of TB addition</span>
<a href="#l7.1094"></a><span id="l7.1094" class="difflineplus">+  $(&quot;profile-dir-button&quot;).addEventListener(&quot;click&quot;, function(event) {</span>
<a href="#l7.1095"></a><span id="l7.1095" class="difflineplus">+    openProfileDirectory();</span>
<a href="#l7.1096"></a><span id="l7.1096" class="difflineplus">+  });</span>
<a href="#l7.1097"></a><span id="l7.1097" class="difflineplus">+  $(&quot;restart-in-safe-mode-button&quot;).addEventListener(&quot;click&quot;, function(event) {</span>
<a href="#l7.1098"></a><span id="l7.1098" class="difflineplus">+    if (Services.obs.enumerateObservers(&quot;restart-in-safe-mode&quot;).hasMoreElements()) {</span>
<a href="#l7.1099"></a><span id="l7.1099" class="difflineplus">+      Services.obs.notifyObservers(null, &quot;restart-in-safe-mode&quot;, &quot;&quot;);</span>
<a href="#l7.1100"></a><span id="l7.1100" class="difflineplus">+    } else {</span>
<a href="#l7.1101"></a><span id="l7.1101" class="difflineplus">+      safeModeRestart();</span>
<a href="#l7.1102"></a><span id="l7.1102" class="difflineplus">+    }</span>
<a href="#l7.1103"></a><span id="l7.1103" class="difflineplus">+  });</span>
<a href="#l7.1104"></a><span id="l7.1104" class="difflineplus">+  $(&quot;verify-place-integrity-button&quot;).addEventListener(&quot;click&quot;, function(event) {</span>
<a href="#l7.1105"></a><span id="l7.1105" class="difflineplus">+    PlacesDBUtils.checkAndFixDatabase(function(aLog) {</span>
<a href="#l7.1106"></a><span id="l7.1106" class="difflineplus">+      let msg = aLog.join(&quot;\n&quot;);</span>
<a href="#l7.1107"></a><span id="l7.1107" class="difflineplus">+      $(&quot;verify-place-result&quot;).style.display = &quot;block&quot;;</span>
<a href="#l7.1108"></a><span id="l7.1108" class="difflineplus">+      $(&quot;verify-place-result&quot;).classList.remove(&quot;no-copy&quot;);</span>
<a href="#l7.1109"></a><span id="l7.1109" class="difflineplus">+      $(&quot;verify-place-result&quot;).textContent = msg;</span>
<a href="#l7.1110"></a><span id="l7.1110" class="difflineplus">+    });</span>
<a href="#l7.1111"></a><span id="l7.1111" class="difflineplus">+  });</span>
<a href="#l7.1112"></a><span id="l7.1112" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/components/about-support/content/aboutSupport.xhtml</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/components/about-support/content/aboutSupport.xhtml</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -1,84 +1,100 @@</span>
<a href="#l8.4"></a><span id="l8.4"> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<a href="#l8.5"></a><span id="l8.5"> &lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l8.6"></a><span id="l8.6">   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l8.7"></a><span id="l8.7">   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l8.8"></a><span id="l8.8"> </span>
<a href="#l8.9"></a><span id="l8.9" class="difflineplus">+&lt;!-- This file is a copy of mozilla/toolkit/content/aboutSupport.xhtml with</span>
<a href="#l8.10"></a><span id="l8.10" class="difflineplus">+     modifications for TB. --&gt;</span>
<a href="#l8.11"></a><span id="l8.11" class="difflineplus">+</span>
<a href="#l8.12"></a><span id="l8.12"> &lt;!DOCTYPE html [</span>
<a href="#l8.13"></a><span id="l8.13">   &lt;!ENTITY % htmlDTD PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;DTD/xhtml1-strict.dtd&quot;&gt; %htmlDTD;</span>
<a href="#l8.14"></a><span id="l8.14">   &lt;!ENTITY % globalDTD SYSTEM &quot;chrome://global/locale/global.dtd&quot;&gt; %globalDTD;</span>
<a href="#l8.15"></a><span id="l8.15">   &lt;!ENTITY % brandDTD SYSTEM &quot;chrome://branding/locale/brand.dtd&quot;&gt; %brandDTD;</span>
<a href="#l8.16"></a><span id="l8.16">   &lt;!ENTITY % aboutSupportDTD SYSTEM &quot;chrome://global/locale/aboutSupport.dtd&quot;&gt; %aboutSupportDTD;</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineplus">+  &lt;!ENTITY % resetProfileDTD SYSTEM &quot;chrome://global/locale/resetProfile.dtd&quot;&gt; %resetProfileDTD;</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineplus">+&lt;!-- Added for TB --&gt;</span>
<a href="#l8.19"></a><span id="l8.19">   &lt;!ENTITY % aboutSupportMailDTD SYSTEM &quot;chrome://messenger/locale/aboutSupportMail.dtd&quot;&gt; %aboutSupportMailDTD;</span>
<a href="#l8.20"></a><span id="l8.20"> ]&gt;</span>
<a href="#l8.21"></a><span id="l8.21"> </span>
<a href="#l8.22"></a><span id="l8.22"> &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;</span>
<a href="#l8.23"></a><span id="l8.23">   &lt;head&gt;</span>
<a href="#l8.24"></a><span id="l8.24">     &lt;title&gt;&amp;aboutSupport.pageTitle;&lt;/title&gt;</span>
<a href="#l8.25"></a><span id="l8.25"> </span>
<a href="#l8.26"></a><span id="l8.26">     &lt;link rel=&quot;icon&quot; type=&quot;image/png&quot; id=&quot;favicon&quot;</span>
<a href="#l8.27"></a><span id="l8.27">           href=&quot;chrome://branding/content/icon48.png&quot;/&gt;</span>
<a href="#l8.28"></a><span id="l8.28">     &lt;link rel=&quot;stylesheet&quot; href=&quot;chrome://global/skin/in-content/common.css&quot;</span>
<a href="#l8.29"></a><span id="l8.29">           type=&quot;text/css&quot;/&gt;</span>
<a href="#l8.30"></a><span id="l8.30">     &lt;link rel=&quot;stylesheet&quot; href=&quot;chrome://global/skin/aboutSupport.css&quot;</span>
<a href="#l8.31"></a><span id="l8.31">           type=&quot;text/css&quot;/&gt;</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineplus">+&lt;!-- Added for TB --&gt;</span>
<a href="#l8.33"></a><span id="l8.33">     &lt;link rel=&quot;stylesheet&quot; href=&quot;chrome://messenger/skin/aboutSupport.css&quot;</span>
<a href="#l8.34"></a><span id="l8.34">           type=&quot;text/css&quot;/&gt;</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineminus">-    &lt;link rel=&quot;stylesheet&quot; href=&quot;chrome://messenger/content/about-support/show-private.css&quot;</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineminus">-          type=&quot;text/css&quot;/&gt;</span>
<a href="#l8.37"></a><span id="l8.37">     &lt;!-- Private data is hidden by default. --&gt;</span>
<a href="#l8.38"></a><span id="l8.38">     &lt;link rel=&quot;stylesheet&quot; href=&quot;chrome://messenger/content/about-support/hide-private.css&quot;</span>
<a href="#l8.39"></a><span id="l8.39">           type=&quot;text/css&quot; id=&quot;about-support-private&quot;/&gt;</span>
<a href="#l8.40"></a><span id="l8.40" class="difflineminus">-</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineplus">+&lt;!-- End of TB addition --&gt;</span>
<a href="#l8.42"></a><span id="l8.42">     &lt;script type=&quot;application/javascript;version=1.7&quot;</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineminus">-            src=&quot;chrome://messenger/content/about-support/init.js&quot;/&gt;</span>
<a href="#l8.44"></a><span id="l8.44" class="difflineplus">+            src=&quot;chrome://messenger/content/about-support/aboutSupport.js&quot;/&gt;</span>
<a href="#l8.45"></a><span id="l8.45" class="difflineplus">+    &lt;script type=&quot;application/javascript;version=1.7&quot;</span>
<a href="#l8.46"></a><span id="l8.46" class="difflineplus">+            src=&quot;chrome://global/content/resetProfile.js&quot;/&gt;</span>
<a href="#l8.47"></a><span id="l8.47" class="difflineplus">+&lt;!-- Added for TB --&gt;</span>
<a href="#l8.48"></a><span id="l8.48">     &lt;script type=&quot;application/javascript;version=1.7&quot;</span>
<a href="#l8.49"></a><span id="l8.49">             src=&quot;chrome://messenger/content/about-support/accounts.js&quot;/&gt;</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineminus">-#ifdef MOZ_CRASHREPORTER</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineminus">-    &lt;script type=&quot;application/javascript;version=1.7&quot;</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineminus">-            src=&quot;chrome://messenger/content/about-support/crashes.js&quot;/&gt;</span>
<a href="#l8.53"></a><span id="l8.53" class="difflineminus">-#endif</span>
<a href="#l8.54"></a><span id="l8.54" class="difflineminus">-    &lt;script type=&quot;application/javascript;version=1.7&quot;</span>
<a href="#l8.55"></a><span id="l8.55" class="difflineminus">-            src=&quot;chrome://messenger/content/about-support/extensions.js&quot;/&gt;</span>
<a href="#l8.56"></a><span id="l8.56" class="difflineminus">-    &lt;script type=&quot;application/javascript;version=1.7&quot;</span>
<a href="#l8.57"></a><span id="l8.57" class="difflineminus">-            src=&quot;chrome://messenger/content/about-support/prefs.js&quot;/&gt;</span>
<a href="#l8.58"></a><span id="l8.58" class="difflineminus">-    &lt;script type=&quot;application/javascript;version=1.7&quot;</span>
<a href="#l8.59"></a><span id="l8.59" class="difflineminus">-            src=&quot;chrome://messenger/content/about-support/gfx.js&quot;/&gt;</span>
<a href="#l8.60"></a><span id="l8.60" class="difflineminus">-    &lt;script type=&quot;application/javascript;version=1.7&quot;</span>
<a href="#l8.61"></a><span id="l8.61" class="difflineminus">-            src=&quot;chrome://messenger/content/about-support/js.js&quot;/&gt;</span>
<a href="#l8.62"></a><span id="l8.62" class="difflineminus">-    &lt;script type=&quot;application/javascript;version=1.7&quot;</span>
<a href="#l8.63"></a><span id="l8.63" class="difflineminus">-            src=&quot;chrome://messenger/content/about-support/a11y.js&quot;/&gt;</span>
<a href="#l8.64"></a><span id="l8.64" class="difflineminus">-    &lt;script type=&quot;application/javascript;version=1.7&quot;</span>
<a href="#l8.65"></a><span id="l8.65" class="difflineminus">-            src=&quot;chrome://messenger/content/about-support/libversions.js&quot;/&gt;</span>
<a href="#l8.66"></a><span id="l8.66">     &lt;script type=&quot;application/javascript;version=1.7&quot;</span>
<a href="#l8.67"></a><span id="l8.67">             src=&quot;chrome://messenger/content/about-support/export.js&quot;/&gt;</span>
<a href="#l8.68"></a><span id="l8.68" class="difflineplus">+&lt;!-- End of TB addition --&gt;</span>
<a href="#l8.69"></a><span id="l8.69">   &lt;/head&gt;</span>
<a href="#l8.70"></a><span id="l8.70"> </span>
<a href="#l8.71"></a><span id="l8.71">   &lt;body dir=&quot;&amp;locale.dir;&quot;&gt;</span>
<a href="#l8.72"></a><span id="l8.72"> </span>
<a href="#l8.73"></a><span id="l8.73" class="difflineplus">+#ifndef ANDROID</span>
<a href="#l8.74"></a><span id="l8.74" class="difflineplus">+    &lt;div id=&quot;action-box&quot;&gt;</span>
<a href="#l8.75"></a><span id="l8.75" class="difflineplus">+      &lt;div id=&quot;reset-box&quot;&gt;</span>
<a href="#l8.76"></a><span id="l8.76" class="difflineplus">+        &lt;h3&gt;&amp;refreshProfile.title;&lt;/h3&gt;</span>
<a href="#l8.77"></a><span id="l8.77" class="difflineplus">+        &lt;button id=&quot;reset-box-button&quot;&gt;</span>
<a href="#l8.78"></a><span id="l8.78" class="difflineplus">+          &amp;refreshProfile.button.label;</span>
<a href="#l8.79"></a><span id="l8.79" class="difflineplus">+        &lt;/button&gt;</span>
<a href="#l8.80"></a><span id="l8.80" class="difflineplus">+      &lt;/div&gt;</span>
<a href="#l8.81"></a><span id="l8.81" class="difflineplus">+      &lt;div id=&quot;safe-mode-box&quot;&gt;</span>
<a href="#l8.82"></a><span id="l8.82" class="difflineplus">+        &lt;h3&gt;&amp;aboutSupport.safeModeTitle;&lt;/h3&gt;</span>
<a href="#l8.83"></a><span id="l8.83" class="difflineplus">+        &lt;button id=&quot;restart-in-safe-mode-button&quot;&gt;</span>
<a href="#l8.84"></a><span id="l8.84" class="difflineplus">+          &amp;aboutSupport.restartInSafeMode.label;</span>
<a href="#l8.85"></a><span id="l8.85" class="difflineplus">+        &lt;/button&gt;</span>
<a href="#l8.86"></a><span id="l8.86" class="difflineplus">+      &lt;/div&gt;</span>
<a href="#l8.87"></a><span id="l8.87" class="difflineplus">+    &lt;/div&gt;</span>
<a href="#l8.88"></a><span id="l8.88" class="difflineplus">+#endif</span>
<a href="#l8.89"></a><span id="l8.89" class="difflineplus">+</span>
<a href="#l8.90"></a><span id="l8.90">     &lt;h1&gt;</span>
<a href="#l8.91"></a><span id="l8.91">       &amp;aboutSupport.pageTitle;</span>
<a href="#l8.92"></a><span id="l8.92">     &lt;/h1&gt;</span>
<a href="#l8.93"></a><span id="l8.93"> </span>
<a href="#l8.94"></a><span id="l8.94">     &lt;div class=&quot;page-subtitle&quot;&gt;</span>
<a href="#l8.95"></a><span id="l8.95">         &amp;aboutSupport.pageSubtitle;</span>
<a href="#l8.96"></a><span id="l8.96">     &lt;/div&gt;</span>
<a href="#l8.97"></a><span id="l8.97"> </span>
<a href="#l8.98"></a><span id="l8.98">     &lt;div&gt;</span>
<a href="#l8.99"></a><span id="l8.99" class="difflineminus">-      &lt;button onclick=&quot;copyToClipboard()&quot;&gt;</span>
<a href="#l8.100"></a><span id="l8.100" class="difflineplus">+&lt;!-- Not used on TB</span>
<a href="#l8.101"></a><span id="l8.101" class="difflineplus">+      &lt;button id=&quot;copy-raw-data-to-clipboard&quot;&gt;</span>
<a href="#l8.102"></a><span id="l8.102" class="difflineplus">+        &amp;aboutSupport.copyRawDataToClipboard.label;</span>
<a href="#l8.103"></a><span id="l8.103" class="difflineplus">+      &lt;/button&gt;</span>
<a href="#l8.104"></a><span id="l8.104" class="difflineplus">+ --&gt;</span>
<a href="#l8.105"></a><span id="l8.105" class="difflineplus">+      &lt;button id=&quot;copy-to-clipboard&quot;&gt;</span>
<a href="#l8.106"></a><span id="l8.106">         &amp;aboutSupport.copyTextToClipboard.label;</span>
<a href="#l8.107"></a><span id="l8.107">       &lt;/button&gt;</span>
<a href="#l8.108"></a><span id="l8.108" class="difflineminus">-      &lt;button id=&quot;button-send-via-email&quot; onclick=&quot;sendViaEmail()&quot;&gt;</span>
<a href="#l8.109"></a><span id="l8.109" class="difflineplus">+&lt;!-- Added for TB --&gt;</span>
<a href="#l8.110"></a><span id="l8.110" class="difflineplus">+      &lt;button id=&quot;send-via-email&quot;&gt;</span>
<a href="#l8.111"></a><span id="l8.111">         &amp;aboutSupport.sendViaEmail.label;</span>
<a href="#l8.112"></a><span id="l8.112">       &lt;/button&gt;</span>
<a href="#l8.113"></a><span id="l8.113">       &lt;input type=&quot;checkbox&quot; id=&quot;check-show-private-data&quot; class=&quot;data-uionly&quot;</span>
<a href="#l8.114"></a><span id="l8.114">              onchange=&quot;onShowPrivateDataChange(this);&quot; /&gt;</span>
<a href="#l8.115"></a><span id="l8.115">       &lt;label for=&quot;check-show-private-data&quot;&gt;&amp;aboutSupport.showPrivateData.mainText;</span>
<a href="#l8.116"></a><span id="l8.116">       &lt;span class=&quot;gray-text&quot;&gt;&amp;aboutSupport.showPrivateData.explanationText;&lt;/span&gt;&lt;/label&gt;</span>
<a href="#l8.117"></a><span id="l8.117" class="difflineplus">+&lt;!-- End of TB addition --&gt;</span>
<a href="#l8.118"></a><span id="l8.118">     &lt;/div&gt;</span>
<a href="#l8.119"></a><span id="l8.119"> </span>
<a href="#l8.120"></a><span id="l8.120">     &lt;div id=&quot;contents&quot;&gt;</span>
<a href="#l8.121"></a><span id="l8.121"> </span>
<a href="#l8.122"></a><span id="l8.122">       &lt;!-- - - - - - - - - - - - - - - - - - - - - --&gt;</span>
<a href="#l8.123"></a><span id="l8.123"> </span>
<a href="#l8.124"></a><span id="l8.124">       &lt;h2 class=&quot;major-section&quot;&gt;</span>
<a href="#l8.125"></a><span id="l8.125">         &amp;aboutSupport.appBasicsTitle;</span>
<a href="#l8.126"></a><span id="l8.126" class="difflineat">@@ -101,108 +117,193 @@</span>
<a href="#l8.127"></a><span id="l8.127">             &lt;/th&gt;</span>
<a href="#l8.128"></a><span id="l8.128"> </span>
<a href="#l8.129"></a><span id="l8.129">             &lt;td id=&quot;version-box&quot;&gt;</span>
<a href="#l8.130"></a><span id="l8.130">             &lt;/td&gt;</span>
<a href="#l8.131"></a><span id="l8.131">           &lt;/tr&gt;</span>
<a href="#l8.132"></a><span id="l8.132"> </span>
<a href="#l8.133"></a><span id="l8.133">           &lt;tr&gt;</span>
<a href="#l8.134"></a><span id="l8.134">             &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l8.135"></a><span id="l8.135" class="difflineplus">+              &amp;aboutSupport.appBasicsBuildID;</span>
<a href="#l8.136"></a><span id="l8.136" class="difflineplus">+              &lt;/th&gt;</span>
<a href="#l8.137"></a><span id="l8.137" class="difflineplus">+            &lt;td id=&quot;buildid-box&quot;&gt;&lt;/td&gt;</span>
<a href="#l8.138"></a><span id="l8.138" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.139"></a><span id="l8.139" class="difflineplus">+</span>
<a href="#l8.140"></a><span id="l8.140" class="difflineplus">+#ifndef ANDROID</span>
<a href="#l8.141"></a><span id="l8.141" class="difflineplus">+          &lt;tr class=&quot;no-copy&quot;&gt;</span>
<a href="#l8.142"></a><span id="l8.142" class="difflineplus">+            &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l8.143"></a><span id="l8.143" class="difflineplus">+              &amp;aboutSupport.appBasicsUpdateHistory;</span>
<a href="#l8.144"></a><span id="l8.144" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.145"></a><span id="l8.145" class="difflineplus">+</span>
<a href="#l8.146"></a><span id="l8.146" class="difflineplus">+            &lt;td&gt;</span>
<a href="#l8.147"></a><span id="l8.147" class="difflineplus">+              &lt;button id=&quot;show-update-history-button&quot;&gt;</span>
<a href="#l8.148"></a><span id="l8.148" class="difflineplus">+                &amp;aboutSupport.appBasicsShowUpdateHistory;</span>
<a href="#l8.149"></a><span id="l8.149" class="difflineplus">+              &lt;/button&gt;</span>
<a href="#l8.150"></a><span id="l8.150" class="difflineplus">+            &lt;/td&gt;</span>
<a href="#l8.151"></a><span id="l8.151" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.152"></a><span id="l8.152" class="difflineplus">+#endif</span>
<a href="#l8.153"></a><span id="l8.153" class="difflineplus">+</span>
<a href="#l8.154"></a><span id="l8.154" class="difflineplus">+#ifdef MOZ_UPDATER</span>
<a href="#l8.155"></a><span id="l8.155" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l8.156"></a><span id="l8.156" class="difflineplus">+            &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l8.157"></a><span id="l8.157" class="difflineplus">+              &amp;aboutSupport.appBasicsUpdateChannel;</span>
<a href="#l8.158"></a><span id="l8.158" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.159"></a><span id="l8.159" class="difflineplus">+            &lt;td id=&quot;updatechannel-box&quot;&gt;&lt;/td&gt;</span>
<a href="#l8.160"></a><span id="l8.160" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.161"></a><span id="l8.161" class="difflineplus">+#endif</span>
<a href="#l8.162"></a><span id="l8.162" class="difflineplus">+</span>
<a href="#l8.163"></a><span id="l8.163" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l8.164"></a><span id="l8.164" class="difflineplus">+            &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l8.165"></a><span id="l8.165">               &amp;aboutSupport.appBasicsUserAgent;</span>
<a href="#l8.166"></a><span id="l8.166">             &lt;/th&gt;</span>
<a href="#l8.167"></a><span id="l8.167"> </span>
<a href="#l8.168"></a><span id="l8.168">             &lt;td id=&quot;useragent-box&quot;&gt;</span>
<a href="#l8.169"></a><span id="l8.169">             &lt;/td&gt;</span>
<a href="#l8.170"></a><span id="l8.170">           &lt;/tr&gt;</span>
<a href="#l8.171"></a><span id="l8.171"> </span>
<a href="#l8.172"></a><span id="l8.172">           &lt;tr&gt;</span>
<a href="#l8.173"></a><span id="l8.173">             &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l8.174"></a><span id="l8.174" class="difflineplus">+              &amp;aboutSupport.appBasicsOS;</span>
<a href="#l8.175"></a><span id="l8.175" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.176"></a><span id="l8.176" class="difflineplus">+</span>
<a href="#l8.177"></a><span id="l8.177" class="difflineplus">+            &lt;td id=&quot;os-box&quot;&gt;</span>
<a href="#l8.178"></a><span id="l8.178" class="difflineplus">+            &lt;/td&gt;</span>
<a href="#l8.179"></a><span id="l8.179" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.180"></a><span id="l8.180" class="difflineplus">+</span>
<a href="#l8.181"></a><span id="l8.181" class="difflineplus">+          &lt;tr id=&quot;profile-row&quot; class=&quot;no-copy&quot;&gt;</span>
<a href="#l8.182"></a><span id="l8.182" class="difflineplus">+            &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l8.183"></a><span id="l8.183"> #ifdef XP_WIN</span>
<a href="#l8.184"></a><span id="l8.184">               &amp;aboutSupport.appBasicsProfileDirWinMac;</span>
<a href="#l8.185"></a><span id="l8.185"> #else</span>
<a href="#l8.186"></a><span id="l8.186"> #ifdef XP_MACOSX</span>
<a href="#l8.187"></a><span id="l8.187">               &amp;aboutSupport.appBasicsProfileDirWinMac;</span>
<a href="#l8.188"></a><span id="l8.188"> #else</span>
<a href="#l8.189"></a><span id="l8.189">               &amp;aboutSupport.appBasicsProfileDir;</span>
<a href="#l8.190"></a><span id="l8.190"> #endif</span>
<a href="#l8.191"></a><span id="l8.191"> #endif</span>
<a href="#l8.192"></a><span id="l8.192">             &lt;/th&gt;</span>
<a href="#l8.193"></a><span id="l8.193"> </span>
<a href="#l8.194"></a><span id="l8.194">             &lt;td&gt;</span>
<a href="#l8.195"></a><span id="l8.195" class="difflineminus">-              &lt;div id=&quot;profile-dir-button-box&quot; class=&quot;data-public&quot;&gt;</span>
<a href="#l8.196"></a><span id="l8.196" class="difflineminus">-                &lt;button onclick=&quot;openProfileDirectory()&quot;&gt;</span>
<a href="#l8.197"></a><span id="l8.197" class="difflineplus">+              &lt;button id=&quot;profile-dir-button&quot;&gt;</span>
<a href="#l8.198"></a><span id="l8.198"> #ifdef XP_WIN</span>
<a href="#l8.199"></a><span id="l8.199" class="difflineminus">-                  &amp;aboutSupport.showWin2.label;</span>
<a href="#l8.200"></a><span id="l8.200" class="difflineplus">+                &amp;aboutSupport.showWin2.label;</span>
<a href="#l8.201"></a><span id="l8.201"> #else</span>
<a href="#l8.202"></a><span id="l8.202"> #ifdef XP_MACOSX</span>
<a href="#l8.203"></a><span id="l8.203" class="difflineminus">-                  &amp;aboutSupport.showMac.label;</span>
<a href="#l8.204"></a><span id="l8.204" class="difflineplus">+                &amp;aboutSupport.showMac.label;</span>
<a href="#l8.205"></a><span id="l8.205"> #else</span>
<a href="#l8.206"></a><span id="l8.206" class="difflineminus">-                  &amp;aboutSupport.showDir.label;</span>
<a href="#l8.207"></a><span id="l8.207" class="difflineplus">+                &amp;aboutSupport.showDir.label;</span>
<a href="#l8.208"></a><span id="l8.208"> #endif</span>
<a href="#l8.209"></a><span id="l8.209"> #endif</span>
<a href="#l8.210"></a><span id="l8.210" class="difflineminus">-                &lt;/button&gt;</span>
<a href="#l8.211"></a><span id="l8.211" class="difflineminus">-              &lt;/div&gt;</span>
<a href="#l8.212"></a><span id="l8.212" class="difflineminus">-              &lt;span id=&quot;profile-dir-box&quot; class=&quot;data-private&quot;&gt;&lt;/span&gt;</span>
<a href="#l8.213"></a><span id="l8.213" class="difflineminus">-              &lt;span id=&quot;profile-fs-type-box&quot;&gt;&lt;/span&gt;</span>
<a href="#l8.214"></a><span id="l8.214" class="difflineplus">+               &lt;/button&gt;</span>
<a href="#l8.215"></a><span id="l8.215">             &lt;/td&gt;</span>
<a href="#l8.216"></a><span id="l8.216">           &lt;/tr&gt;</span>
<a href="#l8.217"></a><span id="l8.217"> </span>
<a href="#l8.218"></a><span id="l8.218" class="difflineminus">-          &lt;tr&gt;</span>
<a href="#l8.219"></a><span id="l8.219" class="difflineminus">-            &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l8.220"></a><span id="l8.220" class="difflineminus">-              &amp;aboutSupport.appBasicsAppBuildID;</span>
<a href="#l8.221"></a><span id="l8.221" class="difflineminus">-            &lt;/th&gt;</span>
<a href="#l8.222"></a><span id="l8.222" class="difflineminus">-</span>
<a href="#l8.223"></a><span id="l8.223" class="difflineminus">-            &lt;td id=&quot;buildid-box&quot;&gt;</span>
<a href="#l8.224"></a><span id="l8.224" class="difflineminus">-            &lt;/td&gt;</span>
<a href="#l8.225"></a><span id="l8.225" class="difflineminus">-          &lt;/tr&gt;</span>
<a href="#l8.226"></a><span id="l8.226" class="difflineminus">-</span>
<a href="#l8.227"></a><span id="l8.227" class="difflineminus">-          &lt;tr&gt;</span>
<a href="#l8.228"></a><span id="l8.228" class="difflineplus">+          &lt;tr class=&quot;no-copy&quot;&gt;</span>
<a href="#l8.229"></a><span id="l8.229">             &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l8.230"></a><span id="l8.230">               &amp;aboutSupport.appBasicsEnabledPlugins;</span>
<a href="#l8.231"></a><span id="l8.231">             &lt;/th&gt;</span>
<a href="#l8.232"></a><span id="l8.232"> </span>
<a href="#l8.233"></a><span id="l8.233">             &lt;td&gt;</span>
<a href="#l8.234"></a><span id="l8.234">               &lt;a href=&quot;about:plugins&quot; target=&quot;_blank&quot;&gt;about:plugins&lt;/a&gt;</span>
<a href="#l8.235"></a><span id="l8.235">             &lt;/td&gt;</span>
<a href="#l8.236"></a><span id="l8.236">           &lt;/tr&gt;</span>
<a href="#l8.237"></a><span id="l8.237"> </span>
<a href="#l8.238"></a><span id="l8.238" class="difflineminus">-          &lt;tr&gt;</span>
<a href="#l8.239"></a><span id="l8.239" class="difflineplus">+          &lt;tr class=&quot;no-copy&quot;&gt;</span>
<a href="#l8.240"></a><span id="l8.240">             &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l8.241"></a><span id="l8.241">               &amp;aboutSupport.appBasicsBuildConfig;</span>
<a href="#l8.242"></a><span id="l8.242">             &lt;/th&gt;</span>
<a href="#l8.243"></a><span id="l8.243"> </span>
<a href="#l8.244"></a><span id="l8.244">             &lt;td&gt;</span>
<a href="#l8.245"></a><span id="l8.245">               &lt;a href=&quot;about:buildconfig&quot; target=&quot;_blank&quot;&gt;about:buildconfig&lt;/a&gt;</span>
<a href="#l8.246"></a><span id="l8.246">             &lt;/td&gt;</span>
<a href="#l8.247"></a><span id="l8.247">           &lt;/tr&gt;</span>
<a href="#l8.248"></a><span id="l8.248"> </span>
<a href="#l8.249"></a><span id="l8.249" class="difflineminus">-          &lt;tr&gt;</span>
<a href="#l8.250"></a><span id="l8.250" class="difflineplus">+          &lt;tr class=&quot;no-copy&quot;&gt;</span>
<a href="#l8.251"></a><span id="l8.251">             &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l8.252"></a><span id="l8.252">               &amp;aboutSupport.appBasicsMemoryUse;</span>
<a href="#l8.253"></a><span id="l8.253">             &lt;/th&gt;</span>
<a href="#l8.254"></a><span id="l8.254"> </span>
<a href="#l8.255"></a><span id="l8.255">             &lt;td&gt;</span>
<a href="#l8.256"></a><span id="l8.256">               &lt;a href=&quot;about:memory&quot; target=&quot;_blank&quot;&gt;about:memory&lt;/a&gt;</span>
<a href="#l8.257"></a><span id="l8.257">             &lt;/td&gt;</span>
<a href="#l8.258"></a><span id="l8.258">           &lt;/tr&gt;</span>
<a href="#l8.259"></a><span id="l8.259"> </span>
<a href="#l8.260"></a><span id="l8.260" class="difflineplus">+          &lt;tr class=&quot;no-copy&quot;&gt;</span>
<a href="#l8.261"></a><span id="l8.261" class="difflineplus">+            &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l8.262"></a><span id="l8.262" class="difflineplus">+              &amp;aboutSupport.appBasicsPerformance;</span>
<a href="#l8.263"></a><span id="l8.263" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.264"></a><span id="l8.264" class="difflineplus">+</span>
<a href="#l8.265"></a><span id="l8.265" class="difflineplus">+            &lt;td&gt;</span>
<a href="#l8.266"></a><span id="l8.266" class="difflineplus">+              &lt;a href=&quot;about:performance&quot; target=&quot;_blank&quot;&gt;about:performance&lt;/a&gt;</span>
<a href="#l8.267"></a><span id="l8.267" class="difflineplus">+            &lt;/td&gt;</span>
<a href="#l8.268"></a><span id="l8.268" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.269"></a><span id="l8.269" class="difflineplus">+</span>
<a href="#l8.270"></a><span id="l8.270" class="difflineplus">+          &lt;tr class=&quot;no-copy&quot;&gt;</span>
<a href="#l8.271"></a><span id="l8.271" class="difflineplus">+            &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l8.272"></a><span id="l8.272" class="difflineplus">+              &amp;aboutSupport.appBasicsServiceWorkers;</span>
<a href="#l8.273"></a><span id="l8.273" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.274"></a><span id="l8.274" class="difflineplus">+</span>
<a href="#l8.275"></a><span id="l8.275" class="difflineplus">+            &lt;td&gt;</span>
<a href="#l8.276"></a><span id="l8.276" class="difflineplus">+              &lt;a href=&quot;about:serviceworkers&quot; target=&quot;_blank&quot;&gt;about:serviceworkers&lt;/a&gt;</span>
<a href="#l8.277"></a><span id="l8.277" class="difflineplus">+            &lt;/td&gt;</span>
<a href="#l8.278"></a><span id="l8.278" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.279"></a><span id="l8.279" class="difflineplus">+</span>
<a href="#l8.280"></a><span id="l8.280">           &lt;tr&gt;</span>
<a href="#l8.281"></a><span id="l8.281">             &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l8.282"></a><span id="l8.282" class="difflineplus">+              &amp;aboutSupport.appBasicsMultiProcessSupport;</span>
<a href="#l8.283"></a><span id="l8.283" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.284"></a><span id="l8.284" class="difflineplus">+</span>
<a href="#l8.285"></a><span id="l8.285" class="difflineplus">+            &lt;td id=&quot;multiprocess-box&quot;&gt;</span>
<a href="#l8.286"></a><span id="l8.286" class="difflineplus">+            &lt;/td&gt;</span>
<a href="#l8.287"></a><span id="l8.287" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.288"></a><span id="l8.288" class="difflineplus">+</span>
<a href="#l8.289"></a><span id="l8.289" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l8.290"></a><span id="l8.290" class="difflineplus">+            &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l8.291"></a><span id="l8.291" class="difflineplus">+              &amp;aboutSupport.appBasicsKeyGoogle;</span>
<a href="#l8.292"></a><span id="l8.292" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.293"></a><span id="l8.293" class="difflineplus">+</span>
<a href="#l8.294"></a><span id="l8.294" class="difflineplus">+            &lt;td id=&quot;key-google-box&quot;&gt;</span>
<a href="#l8.295"></a><span id="l8.295" class="difflineplus">+            &lt;/td&gt;</span>
<a href="#l8.296"></a><span id="l8.296" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.297"></a><span id="l8.297" class="difflineplus">+</span>
<a href="#l8.298"></a><span id="l8.298" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l8.299"></a><span id="l8.299" class="difflineplus">+            &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l8.300"></a><span id="l8.300" class="difflineplus">+              &amp;aboutSupport.appBasicsKeyMozilla;</span>
<a href="#l8.301"></a><span id="l8.301" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.302"></a><span id="l8.302" class="difflineplus">+</span>
<a href="#l8.303"></a><span id="l8.303" class="difflineplus">+            &lt;td id=&quot;key-mozilla-box&quot;&gt;</span>
<a href="#l8.304"></a><span id="l8.304" class="difflineplus">+            &lt;/td&gt;</span>
<a href="#l8.305"></a><span id="l8.305" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.306"></a><span id="l8.306" class="difflineplus">+</span>
<a href="#l8.307"></a><span id="l8.307" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l8.308"></a><span id="l8.308" class="difflineplus">+            &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l8.309"></a><span id="l8.309" class="difflineplus">+              &amp;aboutSupport.appBasicsSafeMode;</span>
<a href="#l8.310"></a><span id="l8.310" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.311"></a><span id="l8.311" class="difflineplus">+</span>
<a href="#l8.312"></a><span id="l8.312" class="difflineplus">+            &lt;td id=&quot;safemode-box&quot;&gt;</span>
<a href="#l8.313"></a><span id="l8.313" class="difflineplus">+            &lt;/td&gt;</span>
<a href="#l8.314"></a><span id="l8.314" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.315"></a><span id="l8.315" class="difflineplus">+</span>
<a href="#l8.316"></a><span id="l8.316" class="difflineplus">+#ifndef ANDROID</span>
<a href="#l8.317"></a><span id="l8.317" class="difflineplus">+          &lt;tr class=&quot;no-copy&quot;&gt;</span>
<a href="#l8.318"></a><span id="l8.318" class="difflineplus">+            &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l8.319"></a><span id="l8.319">               &amp;aboutSupport.appBasicsProfiles;</span>
<a href="#l8.320"></a><span id="l8.320">             &lt;/th&gt;</span>
<a href="#l8.321"></a><span id="l8.321"> </span>
<a href="#l8.322"></a><span id="l8.322">             &lt;td&gt;</span>
<a href="#l8.323"></a><span id="l8.323">               &lt;a href=&quot;about:profiles&quot; target=&quot;_blank&quot;&gt;about:profiles&lt;/a&gt;</span>
<a href="#l8.324"></a><span id="l8.324">             &lt;/td&gt;</span>
<a href="#l8.325"></a><span id="l8.325">           &lt;/tr&gt;</span>
<a href="#l8.326"></a><span id="l8.326" class="difflineplus">+#endif</span>
<a href="#l8.327"></a><span id="l8.327" class="difflineplus">+</span>
<a href="#l8.328"></a><span id="l8.328">         &lt;/tbody&gt;</span>
<a href="#l8.329"></a><span id="l8.329">       &lt;/table&gt;</span>
<a href="#l8.330"></a><span id="l8.330"> </span>
<a href="#l8.331"></a><span id="l8.331">       &lt;!-- - - - - - - - - - - - - - - - - - - - - --&gt;</span>
<a href="#l8.332"></a><span id="l8.332" class="difflineminus">-</span>
<a href="#l8.333"></a><span id="l8.333" class="difflineplus">+&lt;!-- Added for TB --&gt;</span>
<a href="#l8.334"></a><span id="l8.334">       &lt;h2 class=&quot;major-section&quot;&gt;</span>
<a href="#l8.335"></a><span id="l8.335">         &amp;aboutSupport.accountsTitle;</span>
<a href="#l8.336"></a><span id="l8.336">       &lt;/h2&gt;</span>
<a href="#l8.337"></a><span id="l8.337"> </span>
<a href="#l8.338"></a><span id="l8.338">       &lt;table id=&quot;accounts-table&quot;&gt;</span>
<a href="#l8.339"></a><span id="l8.339">         &lt;thead&gt;</span>
<a href="#l8.340"></a><span id="l8.340">           &lt;tr&gt;</span>
<a href="#l8.341"></a><span id="l8.341">             &lt;th rowspan=&quot;2&quot;&gt;</span>
<a href="#l8.342"></a><span id="l8.342" class="difflineat">@@ -256,21 +357,21 @@</span>
<a href="#l8.343"></a><span id="l8.343">               &amp;aboutSupport.accountsDefault;</span>
<a href="#l8.344"></a><span id="l8.344">             &lt;/th&gt;</span>
<a href="#l8.345"></a><span id="l8.345">           &lt;/tr&gt;</span>
<a href="#l8.346"></a><span id="l8.346">         &lt;/thead&gt;</span>
<a href="#l8.347"></a><span id="l8.347"> </span>
<a href="#l8.348"></a><span id="l8.348">         &lt;tbody id=&quot;accounts-tbody&quot;&gt;</span>
<a href="#l8.349"></a><span id="l8.349">         &lt;/tbody&gt;</span>
<a href="#l8.350"></a><span id="l8.350">       &lt;/table&gt;</span>
<a href="#l8.351"></a><span id="l8.351" class="difflineplus">+&lt;!-- End of TB addition --&gt;</span>
<a href="#l8.352"></a><span id="l8.352"> </span>
<a href="#l8.353"></a><span id="l8.353">       &lt;!-- - - - - - - - - - - - - - - - - - - - - --&gt;</span>
<a href="#l8.354"></a><span id="l8.354"> #ifdef MOZ_CRASHREPORTER</span>
<a href="#l8.355"></a><span id="l8.355" class="difflineminus">-</span>
<a href="#l8.356"></a><span id="l8.356" class="difflineminus">-      &lt;h2 class=&quot;major-section&quot;&gt;</span>
<a href="#l8.357"></a><span id="l8.357" class="difflineplus">+      &lt;h2 class=&quot;major-section&quot; id=&quot;crashes-title&quot;&gt;</span>
<a href="#l8.358"></a><span id="l8.358">         &amp;aboutSupport.crashes.title;</span>
<a href="#l8.359"></a><span id="l8.359">       &lt;/h2&gt;</span>
<a href="#l8.360"></a><span id="l8.360"> </span>
<a href="#l8.361"></a><span id="l8.361">       &lt;table id=&quot;crashes-table&quot;&gt;</span>
<a href="#l8.362"></a><span id="l8.362">         &lt;thead&gt;</span>
<a href="#l8.363"></a><span id="l8.363">           &lt;tr&gt;</span>
<a href="#l8.364"></a><span id="l8.364">             &lt;th&gt;</span>
<a href="#l8.365"></a><span id="l8.365">               &amp;aboutSupport.crashes.id;</span>
<a href="#l8.366"></a><span id="l8.366" class="difflineat">@@ -278,23 +379,23 @@</span>
<a href="#l8.367"></a><span id="l8.367">             &lt;th&gt;</span>
<a href="#l8.368"></a><span id="l8.368">               &amp;aboutSupport.crashes.sendDate;</span>
<a href="#l8.369"></a><span id="l8.369">             &lt;/th&gt;</span>
<a href="#l8.370"></a><span id="l8.370">           &lt;/tr&gt;</span>
<a href="#l8.371"></a><span id="l8.371">         &lt;/thead&gt;</span>
<a href="#l8.372"></a><span id="l8.372">         &lt;tbody id=&quot;crashes-tbody&quot;&gt;</span>
<a href="#l8.373"></a><span id="l8.373">         &lt;/tbody&gt;</span>
<a href="#l8.374"></a><span id="l8.374">       &lt;/table&gt;</span>
<a href="#l8.375"></a><span id="l8.375" class="difflineminus">-      &lt;p id=&quot;crashes-allReports&quot; class=&quot;data-uionly&quot; style=&quot;display: none&quot;&gt;</span>
<a href="#l8.376"></a><span id="l8.376" class="difflineminus">-        &lt;a href=&quot;about:crashes&quot; id=&quot;crashes-allReportsWithPending&quot; style=&quot;display: block&quot; target=&quot;_blank&quot;&gt;&amp;aboutSupport.crashes.allReports;&lt;/a&gt;</span>
<a href="#l8.377"></a><span id="l8.377" class="difflineplus">+      &lt;p id=&quot;crashes-allReports&quot; class=&quot;hidden no-copy&quot;&gt;</span>
<a href="#l8.378"></a><span id="l8.378" class="difflineplus">+        &lt;a href=&quot;about:crashes&quot; id=&quot;crashes-allReportsWithPending&quot; class=&quot;block&quot; target=&quot;_blank&quot;&gt;&amp;aboutSupport.crashes.allReports;&lt;/a&gt;</span>
<a href="#l8.379"></a><span id="l8.379">       &lt;/p&gt;</span>
<a href="#l8.380"></a><span id="l8.380" class="difflineminus">-      &lt;p id=&quot;crashes-noConfig&quot; class=&quot;data-uionly&quot; style=&quot;display: none&quot;&gt;&amp;aboutSupport.crashes.noConfig;&lt;/p&gt;</span>
<a href="#l8.381"></a><span id="l8.381" class="difflineplus">+      &lt;p id=&quot;crashes-noConfig&quot; class=&quot;hidden no-copy&quot;&gt;&amp;aboutSupport.crashes.noConfig;&lt;/p&gt;</span>
<a href="#l8.382"></a><span id="l8.382"> </span>
<a href="#l8.383"></a><span id="l8.383" class="difflineplus">+#endif</span>
<a href="#l8.384"></a><span id="l8.384">       &lt;!-- - - - - - - - - - - - - - - - - - - - - --&gt;</span>
<a href="#l8.385"></a><span id="l8.385" class="difflineminus">-#endif</span>
<a href="#l8.386"></a><span id="l8.386"> </span>
<a href="#l8.387"></a><span id="l8.387">       &lt;h2 class=&quot;major-section&quot;&gt;</span>
<a href="#l8.388"></a><span id="l8.388">         &amp;aboutSupport.extensionsTitle;</span>
<a href="#l8.389"></a><span id="l8.389">       &lt;/h2&gt;</span>
<a href="#l8.390"></a><span id="l8.390"> </span>
<a href="#l8.391"></a><span id="l8.391">       &lt;table id=&quot;extensions-table&quot;&gt;</span>
<a href="#l8.392"></a><span id="l8.392">         &lt;thead&gt;</span>
<a href="#l8.393"></a><span id="l8.393">           &lt;tr&gt;</span>
<a href="#l8.394"></a><span id="l8.394" class="difflineat">@@ -314,50 +415,154 @@</span>
<a href="#l8.395"></a><span id="l8.395">         &lt;/thead&gt;</span>
<a href="#l8.396"></a><span id="l8.396">         &lt;tbody id=&quot;extensions-tbody&quot;&gt;</span>
<a href="#l8.397"></a><span id="l8.397">         &lt;/tbody&gt;</span>
<a href="#l8.398"></a><span id="l8.398">       &lt;/table&gt;</span>
<a href="#l8.399"></a><span id="l8.399"> </span>
<a href="#l8.400"></a><span id="l8.400">       &lt;!-- - - - - - - - - - - - - - - - - - - - - --&gt;</span>
<a href="#l8.401"></a><span id="l8.401"> </span>
<a href="#l8.402"></a><span id="l8.402">       &lt;h2 class=&quot;major-section&quot;&gt;</span>
<a href="#l8.403"></a><span id="l8.403" class="difflineplus">+        &amp;aboutSupport.graphicsTitle;</span>
<a href="#l8.404"></a><span id="l8.404" class="difflineplus">+      &lt;/h2&gt;</span>
<a href="#l8.405"></a><span id="l8.405" class="difflineplus">+</span>
<a href="#l8.406"></a><span id="l8.406" class="difflineplus">+      &lt;table&gt;</span>
<a href="#l8.407"></a><span id="l8.407" class="difflineplus">+        &lt;tbody id=&quot;graphics-features-tbody&quot;&gt;</span>
<a href="#l8.408"></a><span id="l8.408" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l8.409"></a><span id="l8.409" class="difflineplus">+            &lt;th colspan=&quot;2&quot; class=&quot;title-column&quot;&gt;</span>
<a href="#l8.410"></a><span id="l8.410" class="difflineplus">+              &amp;aboutSupport.graphicsFeaturesTitle;</span>
<a href="#l8.411"></a><span id="l8.411" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.412"></a><span id="l8.412" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.413"></a><span id="l8.413" class="difflineplus">+        &lt;/tbody&gt;</span>
<a href="#l8.414"></a><span id="l8.414" class="difflineplus">+</span>
<a href="#l8.415"></a><span id="l8.415" class="difflineplus">+        &lt;tbody id=&quot;graphics-tbody&quot;&gt;</span>
<a href="#l8.416"></a><span id="l8.416" class="difflineplus">+        &lt;/tbody&gt;</span>
<a href="#l8.417"></a><span id="l8.417" class="difflineplus">+</span>
<a href="#l8.418"></a><span id="l8.418" class="difflineplus">+        &lt;tbody id=&quot;graphics-gpu-1-tbody&quot;&gt;</span>
<a href="#l8.419"></a><span id="l8.419" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l8.420"></a><span id="l8.420" class="difflineplus">+            &lt;th colspan=&quot;2&quot; class=&quot;title-column&quot;&gt;</span>
<a href="#l8.421"></a><span id="l8.421" class="difflineplus">+              &amp;aboutSupport.graphicsGPU1Title;</span>
<a href="#l8.422"></a><span id="l8.422" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.423"></a><span id="l8.423" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.424"></a><span id="l8.424" class="difflineplus">+        &lt;/tbody&gt;</span>
<a href="#l8.425"></a><span id="l8.425" class="difflineplus">+</span>
<a href="#l8.426"></a><span id="l8.426" class="difflineplus">+        &lt;tbody id=&quot;graphics-gpu-2-tbody&quot;&gt;</span>
<a href="#l8.427"></a><span id="l8.427" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l8.428"></a><span id="l8.428" class="difflineplus">+            &lt;th colspan=&quot;2&quot; class=&quot;title-column&quot;&gt;</span>
<a href="#l8.429"></a><span id="l8.429" class="difflineplus">+              &amp;aboutSupport.graphicsGPU2Title;</span>
<a href="#l8.430"></a><span id="l8.430" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.431"></a><span id="l8.431" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.432"></a><span id="l8.432" class="difflineplus">+        &lt;/tbody&gt;</span>
<a href="#l8.433"></a><span id="l8.433" class="difflineplus">+</span>
<a href="#l8.434"></a><span id="l8.434" class="difflineplus">+        &lt;tbody id=&quot;graphics-diagnostics-tbody&quot;&gt;</span>
<a href="#l8.435"></a><span id="l8.435" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l8.436"></a><span id="l8.436" class="difflineplus">+            &lt;th colspan=&quot;2&quot; class=&quot;title-column&quot;&gt;</span>
<a href="#l8.437"></a><span id="l8.437" class="difflineplus">+              &amp;aboutSupport.graphicsDiagnosticsTitle;</span>
<a href="#l8.438"></a><span id="l8.438" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.439"></a><span id="l8.439" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.440"></a><span id="l8.440" class="difflineplus">+        &lt;/tbody&gt;</span>
<a href="#l8.441"></a><span id="l8.441" class="difflineplus">+</span>
<a href="#l8.442"></a><span id="l8.442" class="difflineplus">+        &lt;tbody id=&quot;graphics-decisions-tbody&quot;&gt;</span>
<a href="#l8.443"></a><span id="l8.443" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l8.444"></a><span id="l8.444" class="difflineplus">+            &lt;th colspan=&quot;2&quot; class=&quot;title-column&quot;&gt;</span>
<a href="#l8.445"></a><span id="l8.445" class="difflineplus">+              &amp;aboutSupport.graphicsDecisionLogTitle;</span>
<a href="#l8.446"></a><span id="l8.446" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.447"></a><span id="l8.447" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.448"></a><span id="l8.448" class="difflineplus">+        &lt;/tbody&gt;</span>
<a href="#l8.449"></a><span id="l8.449" class="difflineplus">+</span>
<a href="#l8.450"></a><span id="l8.450" class="difflineplus">+        &lt;tbody id=&quot;graphics-crashguards-tbody&quot;&gt;</span>
<a href="#l8.451"></a><span id="l8.451" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l8.452"></a><span id="l8.452" class="difflineplus">+            &lt;th colspan=&quot;2&quot; class=&quot;title-column&quot;&gt;</span>
<a href="#l8.453"></a><span id="l8.453" class="difflineplus">+              &amp;aboutSupport.graphicsCrashGuardsTitle;</span>
<a href="#l8.454"></a><span id="l8.454" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.455"></a><span id="l8.455" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.456"></a><span id="l8.456" class="difflineplus">+        &lt;/tbody&gt;</span>
<a href="#l8.457"></a><span id="l8.457" class="difflineplus">+</span>
<a href="#l8.458"></a><span id="l8.458" class="difflineplus">+        &lt;tbody id=&quot;graphics-workarounds-tbody&quot;&gt;</span>
<a href="#l8.459"></a><span id="l8.459" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l8.460"></a><span id="l8.460" class="difflineplus">+            &lt;th colspan=&quot;2&quot; class=&quot;title-column&quot;&gt;</span>
<a href="#l8.461"></a><span id="l8.461" class="difflineplus">+              &amp;aboutSupport.graphicsWorkaroundsTitle;</span>
<a href="#l8.462"></a><span id="l8.462" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.463"></a><span id="l8.463" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.464"></a><span id="l8.464" class="difflineplus">+        &lt;/tbody&gt;</span>
<a href="#l8.465"></a><span id="l8.465" class="difflineplus">+</span>
<a href="#l8.466"></a><span id="l8.466" class="difflineplus">+        &lt;tbody id=&quot;graphics-failures-tbody&quot;&gt;</span>
<a href="#l8.467"></a><span id="l8.467" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l8.468"></a><span id="l8.468" class="difflineplus">+            &lt;th colspan=&quot;2&quot; class=&quot;title-column&quot;&gt;</span>
<a href="#l8.469"></a><span id="l8.469" class="difflineplus">+              &amp;aboutSupport.graphicsFailureLogTitle;</span>
<a href="#l8.470"></a><span id="l8.470" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.471"></a><span id="l8.471" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.472"></a><span id="l8.472" class="difflineplus">+        &lt;/tbody&gt;</span>
<a href="#l8.473"></a><span id="l8.473" class="difflineplus">+      &lt;/table&gt;</span>
<a href="#l8.474"></a><span id="l8.474" class="difflineplus">+</span>
<a href="#l8.475"></a><span id="l8.475" class="difflineplus">+      &lt;!-- - - - - - - - - - - - - - - - - - - - - --&gt;</span>
<a href="#l8.476"></a><span id="l8.476" class="difflineplus">+</span>
<a href="#l8.477"></a><span id="l8.477" class="difflineplus">+      &lt;h2 class=&quot;major-section&quot;&gt;</span>
<a href="#l8.478"></a><span id="l8.478">         &amp;aboutSupport.modifiedKeyPrefsTitle;</span>
<a href="#l8.479"></a><span id="l8.479">       &lt;/h2&gt;</span>
<a href="#l8.480"></a><span id="l8.480"> </span>
<a href="#l8.481"></a><span id="l8.481">       &lt;table class=&quot;prefs-table&quot;&gt;</span>
<a href="#l8.482"></a><span id="l8.482" class="difflineminus">-        &lt;thead&gt;</span>
<a href="#l8.483"></a><span id="l8.483" class="difflineminus">-          &lt;tr&gt;</span>
<a href="#l8.484"></a><span id="l8.484" class="difflineminus">-            &lt;th class=&quot;name&quot;&gt;</span>
<a href="#l8.485"></a><span id="l8.485" class="difflineminus">-              &amp;aboutSupport.modifiedPrefsName;</span>
<a href="#l8.486"></a><span id="l8.486" class="difflineminus">-            &lt;/th&gt;</span>
<a href="#l8.487"></a><span id="l8.487" class="difflineplus">+        &lt;thead class=&quot;no-copy&quot;&gt;</span>
<a href="#l8.488"></a><span id="l8.488" class="difflineplus">+          &lt;th class=&quot;name&quot;&gt;</span>
<a href="#l8.489"></a><span id="l8.489" class="difflineplus">+            &amp;aboutSupport.modifiedPrefsName;</span>
<a href="#l8.490"></a><span id="l8.490" class="difflineplus">+          &lt;/th&gt;</span>
<a href="#l8.491"></a><span id="l8.491"> </span>
<a href="#l8.492"></a><span id="l8.492" class="difflineminus">-            &lt;th class=&quot;value&quot;&gt;</span>
<a href="#l8.493"></a><span id="l8.493" class="difflineminus">-              &amp;aboutSupport.modifiedPrefsValue;</span>
<a href="#l8.494"></a><span id="l8.494" class="difflineminus">-            &lt;/th&gt;</span>
<a href="#l8.495"></a><span id="l8.495" class="difflineminus">-          &lt;/tr&gt;</span>
<a href="#l8.496"></a><span id="l8.496" class="difflineplus">+          &lt;th class=&quot;value&quot;&gt;</span>
<a href="#l8.497"></a><span id="l8.497" class="difflineplus">+            &amp;aboutSupport.modifiedPrefsValue;</span>
<a href="#l8.498"></a><span id="l8.498" class="difflineplus">+          &lt;/th&gt;</span>
<a href="#l8.499"></a><span id="l8.499">         &lt;/thead&gt;</span>
<a href="#l8.500"></a><span id="l8.500"> </span>
<a href="#l8.501"></a><span id="l8.501">         &lt;tbody id=&quot;prefs-tbody&quot;&gt;</span>
<a href="#l8.502"></a><span id="l8.502">         &lt;/tbody&gt;</span>
<a href="#l8.503"></a><span id="l8.503">       &lt;/table&gt;</span>
<a href="#l8.504"></a><span id="l8.504"> </span>
<a href="#l8.505"></a><span id="l8.505" class="difflineplus">+      &lt;section id=&quot;prefs-user-js-section&quot; class=&quot;hidden no-copy&quot;&gt;</span>
<a href="#l8.506"></a><span id="l8.506" class="difflineplus">+        &lt;h3&gt;&amp;aboutSupport.userJSTitle;&lt;/h3&gt;</span>
<a href="#l8.507"></a><span id="l8.507" class="difflineplus">+        &lt;p&gt;&amp;aboutSupport.userJSDescription;&lt;/p&gt;</span>
<a href="#l8.508"></a><span id="l8.508" class="difflineplus">+      &lt;/section&gt;</span>
<a href="#l8.509"></a><span id="l8.509" class="difflineplus">+</span>
<a href="#l8.510"></a><span id="l8.510">       &lt;!-- - - - - - - - - - - - - - - - - - - - - --&gt;</span>
<a href="#l8.511"></a><span id="l8.511" class="difflineplus">+</span>
<a href="#l8.512"></a><span id="l8.512">       &lt;h2 class=&quot;major-section&quot;&gt;</span>
<a href="#l8.513"></a><span id="l8.513" class="difflineminus">-        &amp;aboutSupport.graphicsTitle;</span>
<a href="#l8.514"></a><span id="l8.514" class="difflineplus">+        &amp;aboutSupport.lockedKeyPrefsTitle;</span>
<a href="#l8.515"></a><span id="l8.515" class="difflineplus">+      &lt;/h2&gt;</span>
<a href="#l8.516"></a><span id="l8.516" class="difflineplus">+</span>
<a href="#l8.517"></a><span id="l8.517" class="difflineplus">+      &lt;table class=&quot;prefs-table&quot;&gt;</span>
<a href="#l8.518"></a><span id="l8.518" class="difflineplus">+        &lt;thead class=&quot;no-copy&quot;&gt;</span>
<a href="#l8.519"></a><span id="l8.519" class="difflineplus">+          &lt;th class=&quot;name&quot;&gt;</span>
<a href="#l8.520"></a><span id="l8.520" class="difflineplus">+            &amp;aboutSupport.lockedPrefsName;</span>
<a href="#l8.521"></a><span id="l8.521" class="difflineplus">+          &lt;/th&gt;</span>
<a href="#l8.522"></a><span id="l8.522" class="difflineplus">+</span>
<a href="#l8.523"></a><span id="l8.523" class="difflineplus">+          &lt;th class=&quot;value&quot;&gt;</span>
<a href="#l8.524"></a><span id="l8.524" class="difflineplus">+            &amp;aboutSupport.lockedPrefsValue;</span>
<a href="#l8.525"></a><span id="l8.525" class="difflineplus">+          &lt;/th&gt;</span>
<a href="#l8.526"></a><span id="l8.526" class="difflineplus">+        &lt;/thead&gt;</span>
<a href="#l8.527"></a><span id="l8.527" class="difflineplus">+</span>
<a href="#l8.528"></a><span id="l8.528" class="difflineplus">+        &lt;tbody id=&quot;locked-prefs-tbody&quot;&gt;</span>
<a href="#l8.529"></a><span id="l8.529" class="difflineplus">+        &lt;/tbody&gt;</span>
<a href="#l8.530"></a><span id="l8.530" class="difflineplus">+      &lt;/table&gt;</span>
<a href="#l8.531"></a><span id="l8.531" class="difflineplus">+</span>
<a href="#l8.532"></a><span id="l8.532" class="difflineplus">+      &lt;!-- - - - - - - - - - - - - - - - - - - - - --&gt;</span>
<a href="#l8.533"></a><span id="l8.533" class="difflineplus">+</span>
<a href="#l8.534"></a><span id="l8.534" class="difflineplus">+      &lt;h2 class=&quot;major-section&quot;&gt;</span>
<a href="#l8.535"></a><span id="l8.535" class="difflineplus">+        &amp;aboutSupport.placeDatabaseTitle;</span>
<a href="#l8.536"></a><span id="l8.536">       &lt;/h2&gt;</span>
<a href="#l8.537"></a><span id="l8.537"> </span>
<a href="#l8.538"></a><span id="l8.538">       &lt;table&gt;</span>
<a href="#l8.539"></a><span id="l8.539" class="difflineminus">-        &lt;tbody id=&quot;graphics-tbody&quot;&gt;</span>
<a href="#l8.540"></a><span id="l8.540" class="difflineminus">-        &lt;/tbody&gt;</span>
<a href="#l8.541"></a><span id="l8.541" class="difflineplus">+        &lt;tr class=&quot;no-copy&quot;&gt;</span>
<a href="#l8.542"></a><span id="l8.542" class="difflineplus">+          &lt;th class=&quot;column&quot;&gt;</span>
<a href="#l8.543"></a><span id="l8.543" class="difflineplus">+            &amp;aboutSupport.placeDatabaseIntegrity;</span>
<a href="#l8.544"></a><span id="l8.544" class="difflineplus">+          &lt;/th&gt;</span>
<a href="#l8.545"></a><span id="l8.545"> </span>
<a href="#l8.546"></a><span id="l8.546" class="difflineminus">-        &lt;tbody id=&quot;graphics-info-properties&quot;&gt;</span>
<a href="#l8.547"></a><span id="l8.547" class="difflineminus">-        &lt;/tbody&gt;</span>
<a href="#l8.548"></a><span id="l8.548" class="difflineminus">-</span>
<a href="#l8.549"></a><span id="l8.549" class="difflineminus">-        &lt;tbody id=&quot;graphics-failures-tbody&quot;&gt;</span>
<a href="#l8.550"></a><span id="l8.550" class="difflineminus">-        &lt;/tbody&gt;</span>
<a href="#l8.551"></a><span id="l8.551" class="difflineplus">+          &lt;td&gt;</span>
<a href="#l8.552"></a><span id="l8.552" class="difflineplus">+            &lt;button id=&quot;verify-place-integrity-button&quot;&gt;</span>
<a href="#l8.553"></a><span id="l8.553" class="difflineplus">+              &amp;aboutSupport.placeDatabaseVerifyIntegrity;</span>
<a href="#l8.554"></a><span id="l8.554" class="difflineplus">+            &lt;/button&gt;</span>
<a href="#l8.555"></a><span id="l8.555" class="difflineplus">+            &lt;pre id=&quot;verify-place-result&quot; class=&quot;hidden no-copy&quot;&gt;&lt;/pre&gt;</span>
<a href="#l8.556"></a><span id="l8.556" class="difflineplus">+          &lt;/td&gt;</span>
<a href="#l8.557"></a><span id="l8.557" class="difflineplus">+        &lt;/tr&gt;</span>
<a href="#l8.558"></a><span id="l8.558">       &lt;/table&gt;</span>
<a href="#l8.559"></a><span id="l8.559"> </span>
<a href="#l8.560"></a><span id="l8.560">       &lt;!-- - - - - - - - - - - - - - - - - - - - - --&gt;</span>
<a href="#l8.561"></a><span id="l8.561">       &lt;h2 class=&quot;major-section&quot;&gt;</span>
<a href="#l8.562"></a><span id="l8.562">         &amp;aboutSupport.jsTitle;</span>
<a href="#l8.563"></a><span id="l8.563">       &lt;/h2&gt;</span>
<a href="#l8.564"></a><span id="l8.564"> </span>
<a href="#l8.565"></a><span id="l8.565">       &lt;table&gt;</span>
<a href="#l8.566"></a><span id="l8.566" class="difflineat">@@ -404,13 +609,94 @@</span>
<a href="#l8.567"></a><span id="l8.567">         &amp;aboutSupport.libraryVersionsTitle;</span>
<a href="#l8.568"></a><span id="l8.568">       &lt;/h2&gt;</span>
<a href="#l8.569"></a><span id="l8.569"> </span>
<a href="#l8.570"></a><span id="l8.570">       &lt;table&gt;</span>
<a href="#l8.571"></a><span id="l8.571">         &lt;tbody id=&quot;libversions-tbody&quot;&gt;</span>
<a href="#l8.572"></a><span id="l8.572">         &lt;/tbody&gt;</span>
<a href="#l8.573"></a><span id="l8.573">       &lt;/table&gt;</span>
<a href="#l8.574"></a><span id="l8.574"> </span>
<a href="#l8.575"></a><span id="l8.575" class="difflineplus">+      &lt;!-- Not used by TB</span>
<a href="#l8.576"></a><span id="l8.576" class="difflineplus">+      &lt;h2 class=&quot;major-section&quot;&gt;</span>
<a href="#l8.577"></a><span id="l8.577" class="difflineplus">+        &amp;aboutSupport.experimentsTitle;</span>
<a href="#l8.578"></a><span id="l8.578" class="difflineplus">+      &lt;/h2&gt;</span>
<a href="#l8.579"></a><span id="l8.579" class="difflineplus">+</span>
<a href="#l8.580"></a><span id="l8.580" class="difflineplus">+      &lt;table&gt;</span>
<a href="#l8.581"></a><span id="l8.581" class="difflineplus">+        &lt;thead&gt;</span>
<a href="#l8.582"></a><span id="l8.582" class="difflineplus">+          &lt;tr&gt;</span>
<a href="#l8.583"></a><span id="l8.583" class="difflineplus">+            &lt;th&gt;</span>
<a href="#l8.584"></a><span id="l8.584" class="difflineplus">+              &amp;aboutSupport.experimentName;</span>
<a href="#l8.585"></a><span id="l8.585" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.586"></a><span id="l8.586" class="difflineplus">+            &lt;th&gt;</span>
<a href="#l8.587"></a><span id="l8.587" class="difflineplus">+              &amp;aboutSupport.experimentId;</span>
<a href="#l8.588"></a><span id="l8.588" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.589"></a><span id="l8.589" class="difflineplus">+            &lt;th&gt;</span>
<a href="#l8.590"></a><span id="l8.590" class="difflineplus">+              &amp;aboutSupport.experimentDescription;</span>
<a href="#l8.591"></a><span id="l8.591" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.592"></a><span id="l8.592" class="difflineplus">+            &lt;th&gt;</span>
<a href="#l8.593"></a><span id="l8.593" class="difflineplus">+              &amp;aboutSupport.experimentActive;</span>
<a href="#l8.594"></a><span id="l8.594" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.595"></a><span id="l8.595" class="difflineplus">+            &lt;th&gt;</span>
<a href="#l8.596"></a><span id="l8.596" class="difflineplus">+              &amp;aboutSupport.experimentEndDate;</span>
<a href="#l8.597"></a><span id="l8.597" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.598"></a><span id="l8.598" class="difflineplus">+            &lt;th&gt;</span>
<a href="#l8.599"></a><span id="l8.599" class="difflineplus">+              &amp;aboutSupport.experimentHomepage;</span>
<a href="#l8.600"></a><span id="l8.600" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.601"></a><span id="l8.601" class="difflineplus">+            &lt;th&gt;</span>
<a href="#l8.602"></a><span id="l8.602" class="difflineplus">+              &amp;aboutSupport.experimentBranch;</span>
<a href="#l8.603"></a><span id="l8.603" class="difflineplus">+            &lt;/th&gt;</span>
<a href="#l8.604"></a><span id="l8.604" class="difflineplus">+          &lt;/tr&gt;</span>
<a href="#l8.605"></a><span id="l8.605" class="difflineplus">+        &lt;/thead&gt;</span>
<a href="#l8.606"></a><span id="l8.606" class="difflineplus">+        &lt;tbody id=&quot;experiments-tbody&quot;&gt;</span>
<a href="#l8.607"></a><span id="l8.607" class="difflineplus">+        &lt;/tbody&gt;</span>
<a href="#l8.608"></a><span id="l8.608" class="difflineplus">+      &lt;/table&gt;</span>
<a href="#l8.609"></a><span id="l8.609" class="difflineplus">+      --&gt;</span>
<a href="#l8.610"></a><span id="l8.610" class="difflineplus">+      &lt;!-- - - - - - - - - - - - - - - - - - - - - --&gt;</span>
<a href="#l8.611"></a><span id="l8.611" class="difflineplus">+</span>
<a href="#l8.612"></a><span id="l8.612" class="difflineplus">+#if defined(MOZ_SANDBOX)</span>
<a href="#l8.613"></a><span id="l8.613" class="difflineplus">+      &lt;h2 class=&quot;major-section&quot; id=&quot;sandbox&quot;&gt;</span>
<a href="#l8.614"></a><span id="l8.614" class="difflineplus">+	&amp;aboutSupport.sandboxTitle;</span>
<a href="#l8.615"></a><span id="l8.615" class="difflineplus">+      &lt;/h2&gt;</span>
<a href="#l8.616"></a><span id="l8.616" class="difflineplus">+</span>
<a href="#l8.617"></a><span id="l8.617" class="difflineplus">+      &lt;table&gt;</span>
<a href="#l8.618"></a><span id="l8.618" class="difflineplus">+	&lt;tbody id=&quot;sandbox-tbody&quot;&gt;</span>
<a href="#l8.619"></a><span id="l8.619" class="difflineplus">+	&lt;/tbody&gt;</span>
<a href="#l8.620"></a><span id="l8.620" class="difflineplus">+      &lt;/table&gt;</span>
<a href="#l8.621"></a><span id="l8.621" class="difflineplus">+</span>
<a href="#l8.622"></a><span id="l8.622" class="difflineplus">+#if defined(XP_LINUX)</span>
<a href="#l8.623"></a><span id="l8.623" class="difflineplus">+      &lt;h4&gt;&amp;aboutSupport.sandboxSyscallLogTitle;&lt;/h4&gt;</span>
<a href="#l8.624"></a><span id="l8.624" class="difflineplus">+      &lt;table&gt;</span>
<a href="#l8.625"></a><span id="l8.625" class="difflineplus">+	&lt;thead&gt;</span>
<a href="#l8.626"></a><span id="l8.626" class="difflineplus">+	  &lt;tr&gt;</span>
<a href="#l8.627"></a><span id="l8.627" class="difflineplus">+	    &lt;th&gt;</span>
<a href="#l8.628"></a><span id="l8.628" class="difflineplus">+	      &amp;aboutSupport.sandboxSyscallIndex;</span>
<a href="#l8.629"></a><span id="l8.629" class="difflineplus">+	    &lt;/th&gt;</span>
<a href="#l8.630"></a><span id="l8.630" class="difflineplus">+	    &lt;th&gt;</span>
<a href="#l8.631"></a><span id="l8.631" class="difflineplus">+	      &amp;aboutSupport.sandboxSyscallAge;</span>
<a href="#l8.632"></a><span id="l8.632" class="difflineplus">+	    &lt;/th&gt;</span>
<a href="#l8.633"></a><span id="l8.633" class="difflineplus">+	    &lt;th&gt;</span>
<a href="#l8.634"></a><span id="l8.634" class="difflineplus">+	      &amp;aboutSupport.sandboxSyscallPID;</span>
<a href="#l8.635"></a><span id="l8.635" class="difflineplus">+	    &lt;/th&gt;</span>
<a href="#l8.636"></a><span id="l8.636" class="difflineplus">+	    &lt;th&gt;</span>
<a href="#l8.637"></a><span id="l8.637" class="difflineplus">+	      &amp;aboutSupport.sandboxSyscallTID;</span>
<a href="#l8.638"></a><span id="l8.638" class="difflineplus">+	    &lt;/th&gt;</span>
<a href="#l8.639"></a><span id="l8.639" class="difflineplus">+	    &lt;th&gt;</span>
<a href="#l8.640"></a><span id="l8.640" class="difflineplus">+	      &amp;aboutSupport.sandboxSyscallProcType;</span>
<a href="#l8.641"></a><span id="l8.641" class="difflineplus">+	    &lt;/th&gt;</span>
<a href="#l8.642"></a><span id="l8.642" class="difflineplus">+	    &lt;th&gt;</span>
<a href="#l8.643"></a><span id="l8.643" class="difflineplus">+	      &amp;aboutSupport.sandboxSyscallNumber;</span>
<a href="#l8.644"></a><span id="l8.644" class="difflineplus">+	    &lt;/th&gt;</span>
<a href="#l8.645"></a><span id="l8.645" class="difflineplus">+	    &lt;th id=&quot;sandbox-syscalls-argshead&quot;&gt;</span>
<a href="#l8.646"></a><span id="l8.646" class="difflineplus">+	      &amp;aboutSupport.sandboxSyscallArgs;</span>
<a href="#l8.647"></a><span id="l8.647" class="difflineplus">+	    &lt;/th&gt;</span>
<a href="#l8.648"></a><span id="l8.648" class="difflineplus">+	    &lt;/tr&gt;</span>
<a href="#l8.649"></a><span id="l8.649" class="difflineplus">+	&lt;/thead&gt;</span>
<a href="#l8.650"></a><span id="l8.650" class="difflineplus">+	&lt;tbody id=&quot;sandbox-syscalls-tbody&quot;&gt;</span>
<a href="#l8.651"></a><span id="l8.651" class="difflineplus">+	&lt;/tbody&gt;</span>
<a href="#l8.652"></a><span id="l8.652" class="difflineplus">+      &lt;/table&gt;</span>
<a href="#l8.653"></a><span id="l8.653" class="difflineplus">+#endif</span>
<a href="#l8.654"></a><span id="l8.654" class="difflineplus">+#endif</span>
<a href="#l8.655"></a><span id="l8.655" class="difflineplus">+</span>
<a href="#l8.656"></a><span id="l8.656">     &lt;/div&gt;</span>
<a href="#l8.657"></a><span id="l8.657"> </span>
<a href="#l8.658"></a><span id="l8.658">   &lt;/body&gt;</span>
<a href="#l8.659"></a><span id="l8.659"> </span>
<a href="#l8.660"></a><span id="l8.660"> &lt;/html&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/components/about-support/content/accounts.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/components/about-support/content/accounts.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -1,14 +1,177 @@</span>
<a href="#l9.4"></a><span id="l9.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l9.5"></a><span id="l9.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l9.6"></a><span id="l9.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l9.7"></a><span id="l9.7"> </span>
<a href="#l9.8"></a><span id="l9.8"> &quot;use strict&quot;;</span>
<a href="#l9.9"></a><span id="l9.9"> </span>
<a href="#l9.10"></a><span id="l9.10" class="difflineplus">+var { interfaces: Ci, utils: Cu } = Components;</span>
<a href="#l9.11"></a><span id="l9.11" class="difflineplus">+</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+Components.utils.import(&quot;resource:///modules/iteratorUtils.jsm&quot;);</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineplus">+var gMessengerBundle = Services.strings.createBundle(</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineplus">+  &quot;chrome://messenger/locale/messenger.properties&quot;);</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineplus">+</span>
<a href="#l9.17"></a><span id="l9.17" class="difflineplus">+var gSocketTypes = {};</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineplus">+for (let [str, index] of Object.entries(Ci.nsMsgSocketType))</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineplus">+  gSocketTypes[index] = str;</span>
<a href="#l9.20"></a><span id="l9.20" class="difflineplus">+</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineplus">+var gAuthMethods = {};</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineplus">+for (let [str, index] of Object.entries(Ci.nsMsgAuthMethod))</span>
<a href="#l9.23"></a><span id="l9.23" class="difflineplus">+  gAuthMethods[index] = str;</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineplus">+</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineplus">+// l10n properties in messenger.properties corresponding to each auth method</span>
<a href="#l9.26"></a><span id="l9.26" class="difflineplus">+var gAuthMethodProperties = {</span>
<a href="#l9.27"></a><span id="l9.27" class="difflineplus">+  &quot;1&quot;: &quot;authOld&quot;,</span>
<a href="#l9.28"></a><span id="l9.28" class="difflineplus">+  &quot;2&quot;: &quot;authPasswordCleartextInsecurely&quot;,</span>
<a href="#l9.29"></a><span id="l9.29" class="difflineplus">+  &quot;3&quot;: &quot;authPasswordCleartextViaSSL&quot;,</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineplus">+  &quot;4&quot;: &quot;authPasswordEncrypted&quot;,</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineplus">+  &quot;5&quot;: &quot;authKerberos&quot;,</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+  &quot;6&quot;: &quot;authNTLM&quot;,</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineplus">+  &quot;8&quot;: &quot;authAnySecure&quot;</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineplus">+};</span>
<a href="#l9.35"></a><span id="l9.35" class="difflineplus">+</span>
<a href="#l9.36"></a><span id="l9.36" class="difflineplus">+var AboutSupport = {</span>
<a href="#l9.37"></a><span id="l9.37" class="difflineplus">+  /**</span>
<a href="#l9.38"></a><span id="l9.38" class="difflineplus">+   * Gets details about SMTP servers for a given nsIMsgAccount.</span>
<a href="#l9.39"></a><span id="l9.39" class="difflineplus">+   *</span>
<a href="#l9.40"></a><span id="l9.40" class="difflineplus">+   * @returns An array of records, each record containing the name and other details</span>
<a href="#l9.41"></a><span id="l9.41" class="difflineplus">+   *          about one SMTP server.</span>
<a href="#l9.42"></a><span id="l9.42" class="difflineplus">+   */</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineplus">+  _getSMTPDetails: function AboutSupport__getSMTPDetails(aAccount) {</span>
<a href="#l9.44"></a><span id="l9.44" class="difflineplus">+    let identities = aAccount.identities;</span>
<a href="#l9.45"></a><span id="l9.45" class="difflineplus">+    let defaultIdentity = aAccount.defaultIdentity;</span>
<a href="#l9.46"></a><span id="l9.46" class="difflineplus">+    let smtpDetails = [];</span>
<a href="#l9.47"></a><span id="l9.47" class="difflineplus">+</span>
<a href="#l9.48"></a><span id="l9.48" class="difflineplus">+    for (let identity in fixIterator(identities, Ci.nsIMsgIdentity)) {</span>
<a href="#l9.49"></a><span id="l9.49" class="difflineplus">+      let isDefault = identity == defaultIdentity;</span>
<a href="#l9.50"></a><span id="l9.50" class="difflineplus">+      let smtpServer = {};</span>
<a href="#l9.51"></a><span id="l9.51" class="difflineplus">+      MailServices.smtp.getServerByIdentity(identity, smtpServer);</span>
<a href="#l9.52"></a><span id="l9.52" class="difflineplus">+      smtpDetails.push({identityName: identity.identityName,</span>
<a href="#l9.53"></a><span id="l9.53" class="difflineplus">+                        name: smtpServer.value.displayname,</span>
<a href="#l9.54"></a><span id="l9.54" class="difflineplus">+                        authMethod: smtpServer.value.authMethod,</span>
<a href="#l9.55"></a><span id="l9.55" class="difflineplus">+                        socketType: smtpServer.value.socketType,</span>
<a href="#l9.56"></a><span id="l9.56" class="difflineplus">+                        isDefault: isDefault});</span>
<a href="#l9.57"></a><span id="l9.57" class="difflineplus">+    }</span>
<a href="#l9.58"></a><span id="l9.58" class="difflineplus">+</span>
<a href="#l9.59"></a><span id="l9.59" class="difflineplus">+    return smtpDetails;</span>
<a href="#l9.60"></a><span id="l9.60" class="difflineplus">+  },</span>
<a href="#l9.61"></a><span id="l9.61" class="difflineplus">+</span>
<a href="#l9.62"></a><span id="l9.62" class="difflineplus">+  /**</span>
<a href="#l9.63"></a><span id="l9.63" class="difflineplus">+   * Returns account details as an array of records.</span>
<a href="#l9.64"></a><span id="l9.64" class="difflineplus">+   */</span>
<a href="#l9.65"></a><span id="l9.65" class="difflineplus">+  getAccountDetails: function AboutSupport_getAccountDetails() {</span>
<a href="#l9.66"></a><span id="l9.66" class="difflineplus">+    let accountDetails = [];</span>
<a href="#l9.67"></a><span id="l9.67" class="difflineplus">+    let accounts = MailServices.accounts.accounts;</span>
<a href="#l9.68"></a><span id="l9.68" class="difflineplus">+</span>
<a href="#l9.69"></a><span id="l9.69" class="difflineplus">+    for (let account in fixIterator(accounts, Ci.nsIMsgAccount)) {</span>
<a href="#l9.70"></a><span id="l9.70" class="difflineplus">+      let server = account.incomingServer;</span>
<a href="#l9.71"></a><span id="l9.71" class="difflineplus">+      accountDetails.push({</span>
<a href="#l9.72"></a><span id="l9.72" class="difflineplus">+        key: account.key,</span>
<a href="#l9.73"></a><span id="l9.73" class="difflineplus">+        name: server.prettyName,</span>
<a href="#l9.74"></a><span id="l9.74" class="difflineplus">+        hostDetails: &quot;(&quot; + server.type + &quot;) &quot; + server.realHostName +</span>
<a href="#l9.75"></a><span id="l9.75" class="difflineplus">+                     (server.port != -1 ? (&quot;:&quot; + server.port) : &quot;&quot;),</span>
<a href="#l9.76"></a><span id="l9.76" class="difflineplus">+        socketType: server.socketType,</span>
<a href="#l9.77"></a><span id="l9.77" class="difflineplus">+        authMethod: server.authMethod,</span>
<a href="#l9.78"></a><span id="l9.78" class="difflineplus">+        smtpServers: this._getSMTPDetails(account),</span>
<a href="#l9.79"></a><span id="l9.79" class="difflineplus">+      });</span>
<a href="#l9.80"></a><span id="l9.80" class="difflineplus">+    }</span>
<a href="#l9.81"></a><span id="l9.81" class="difflineplus">+</span>
<a href="#l9.82"></a><span id="l9.82" class="difflineplus">+    function idCompare(accountA, accountB) {</span>
<a href="#l9.83"></a><span id="l9.83" class="difflineplus">+      let regex = /^account([0-9]+)$/;</span>
<a href="#l9.84"></a><span id="l9.84" class="difflineplus">+      let regexA = regex.exec(accountA.key);</span>
<a href="#l9.85"></a><span id="l9.85" class="difflineplus">+      let regexB = regex.exec(accountB.key);</span>
<a href="#l9.86"></a><span id="l9.86" class="difflineplus">+      // There's an off chance that the account ID isn't in the standard</span>
<a href="#l9.87"></a><span id="l9.87" class="difflineplus">+      // accountN form. If so, use the standard string compare against a fixed</span>
<a href="#l9.88"></a><span id="l9.88" class="difflineplus">+      // string (&quot;account&quot;) to avoid correctness issues.</span>
<a href="#l9.89"></a><span id="l9.89" class="difflineplus">+      if (!regexA || !regexB) {</span>
<a href="#l9.90"></a><span id="l9.90" class="difflineplus">+        let keyA = regexA ? &quot;account&quot; : accountA.key;</span>
<a href="#l9.91"></a><span id="l9.91" class="difflineplus">+        let keyB = regexB ? &quot;account&quot; : accountB.key;</span>
<a href="#l9.92"></a><span id="l9.92" class="difflineplus">+        return keyA.localeCompare(keyB);</span>
<a href="#l9.93"></a><span id="l9.93" class="difflineplus">+      }</span>
<a href="#l9.94"></a><span id="l9.94" class="difflineplus">+      let idA = parseInt(regexA[1]);</span>
<a href="#l9.95"></a><span id="l9.95" class="difflineplus">+      let idB = parseInt(regexB[1]);</span>
<a href="#l9.96"></a><span id="l9.96" class="difflineplus">+      return idA - idB;</span>
<a href="#l9.97"></a><span id="l9.97" class="difflineplus">+    }</span>
<a href="#l9.98"></a><span id="l9.98" class="difflineplus">+</span>
<a href="#l9.99"></a><span id="l9.99" class="difflineplus">+    // Sort accountDetails by account ID.</span>
<a href="#l9.100"></a><span id="l9.100" class="difflineplus">+    accountDetails.sort(idCompare);</span>
<a href="#l9.101"></a><span id="l9.101" class="difflineplus">+    return accountDetails;</span>
<a href="#l9.102"></a><span id="l9.102" class="difflineplus">+  },</span>
<a href="#l9.103"></a><span id="l9.103" class="difflineplus">+</span>
<a href="#l9.104"></a><span id="l9.104" class="difflineplus">+  /**</span>
<a href="#l9.105"></a><span id="l9.105" class="difflineplus">+   * Returns the corresponding text for a given socket type index. The text is</span>
<a href="#l9.106"></a><span id="l9.106" class="difflineplus">+   * returned as a record with &quot;localized&quot; and &quot;neutral&quot; entries.</span>
<a href="#l9.107"></a><span id="l9.107" class="difflineplus">+   */</span>
<a href="#l9.108"></a><span id="l9.108" class="difflineplus">+  getSocketTypeText: function AboutSupport_getSocketTypeText(aIndex) {</span>
<a href="#l9.109"></a><span id="l9.109" class="difflineplus">+    let plainSocketType = (aIndex in gSocketTypes ?</span>
<a href="#l9.110"></a><span id="l9.110" class="difflineplus">+                           gSocketTypes[aIndex] : aIndex);</span>
<a href="#l9.111"></a><span id="l9.111" class="difflineplus">+    let prettySocketType;</span>
<a href="#l9.112"></a><span id="l9.112" class="difflineplus">+    try {</span>
<a href="#l9.113"></a><span id="l9.113" class="difflineplus">+      prettySocketType = gMessengerBundle.GetStringFromName(</span>
<a href="#l9.114"></a><span id="l9.114" class="difflineplus">+        &quot;smtpServer-ConnectionSecurityType-&quot; + aIndex);</span>
<a href="#l9.115"></a><span id="l9.115" class="difflineplus">+    }</span>
<a href="#l9.116"></a><span id="l9.116" class="difflineplus">+    catch (e) {</span>
<a href="#l9.117"></a><span id="l9.117" class="difflineplus">+      if (e.result == Components.results.NS_ERROR_FAILURE) {</span>
<a href="#l9.118"></a><span id="l9.118" class="difflineplus">+        // The string wasn't found in the bundle. Make do without it.</span>
<a href="#l9.119"></a><span id="l9.119" class="difflineplus">+        prettySocketType = plainSocketType;</span>
<a href="#l9.120"></a><span id="l9.120" class="difflineplus">+      } else {</span>
<a href="#l9.121"></a><span id="l9.121" class="difflineplus">+        throw e;</span>
<a href="#l9.122"></a><span id="l9.122" class="difflineplus">+      }</span>
<a href="#l9.123"></a><span id="l9.123" class="difflineplus">+    }</span>
<a href="#l9.124"></a><span id="l9.124" class="difflineplus">+    return {localized: prettySocketType, neutral: plainSocketType};</span>
<a href="#l9.125"></a><span id="l9.125" class="difflineplus">+  },</span>
<a href="#l9.126"></a><span id="l9.126" class="difflineplus">+</span>
<a href="#l9.127"></a><span id="l9.127" class="difflineplus">+  /**</span>
<a href="#l9.128"></a><span id="l9.128" class="difflineplus">+   * Returns the corresponding text for a given authentication method index. The</span>
<a href="#l9.129"></a><span id="l9.129" class="difflineplus">+   * text is returned as a record with &quot;localized&quot; and &quot;neutral&quot; entries.</span>
<a href="#l9.130"></a><span id="l9.130" class="difflineplus">+   */</span>
<a href="#l9.131"></a><span id="l9.131" class="difflineplus">+  getAuthMethodText: function AboutSupport_getAuthMethodText(aIndex) {</span>
<a href="#l9.132"></a><span id="l9.132" class="difflineplus">+    let prettyAuthMethod;</span>
<a href="#l9.133"></a><span id="l9.133" class="difflineplus">+    let plainAuthMethod = (aIndex in gAuthMethods ?</span>
<a href="#l9.134"></a><span id="l9.134" class="difflineplus">+                           gAuthMethods[aIndex] : aIndex);</span>
<a href="#l9.135"></a><span id="l9.135" class="difflineplus">+    if (aIndex in gAuthMethodProperties) {</span>
<a href="#l9.136"></a><span id="l9.136" class="difflineplus">+      prettyAuthMethod =</span>
<a href="#l9.137"></a><span id="l9.137" class="difflineplus">+        gMessengerBundle.GetStringFromName(gAuthMethodProperties[aIndex]);</span>
<a href="#l9.138"></a><span id="l9.138" class="difflineplus">+    }</span>
<a href="#l9.139"></a><span id="l9.139" class="difflineplus">+    else {</span>
<a href="#l9.140"></a><span id="l9.140" class="difflineplus">+      prettyAuthMethod = plainAuthMethod;</span>
<a href="#l9.141"></a><span id="l9.141" class="difflineplus">+    }</span>
<a href="#l9.142"></a><span id="l9.142" class="difflineplus">+    return {localized: prettyAuthMethod, neutral: plainAuthMethod};</span>
<a href="#l9.143"></a><span id="l9.143" class="difflineplus">+  }</span>
<a href="#l9.144"></a><span id="l9.144" class="difflineplus">+};</span>
<a href="#l9.145"></a><span id="l9.145" class="difflineplus">+</span>
<a href="#l9.146"></a><span id="l9.146" class="difflineplus">+function createParentElement(tagName, childElems) {</span>
<a href="#l9.147"></a><span id="l9.147" class="difflineplus">+  let elem = document.createElement(tagName);</span>
<a href="#l9.148"></a><span id="l9.148" class="difflineplus">+  appendChildren(elem, childElems);</span>
<a href="#l9.149"></a><span id="l9.149" class="difflineplus">+  return elem;</span>
<a href="#l9.150"></a><span id="l9.150" class="difflineplus">+}</span>
<a href="#l9.151"></a><span id="l9.151" class="difflineplus">+</span>
<a href="#l9.152"></a><span id="l9.152" class="difflineplus">+function createElement(tagName, textContent, opt_attributes, opt_copyData) {</span>
<a href="#l9.153"></a><span id="l9.153" class="difflineplus">+  if (opt_attributes == null)</span>
<a href="#l9.154"></a><span id="l9.154" class="difflineplus">+    opt_attributes = {};</span>
<a href="#l9.155"></a><span id="l9.155" class="difflineplus">+  let elem = document.createElement(tagName);</span>
<a href="#l9.156"></a><span id="l9.156" class="difflineplus">+  elem.textContent = textContent;</span>
<a href="#l9.157"></a><span id="l9.157" class="difflineplus">+  for (let key in opt_attributes) {</span>
<a href="#l9.158"></a><span id="l9.158" class="difflineplus">+    elem.setAttribute(key, &quot;&quot; + opt_attributes[key]);</span>
<a href="#l9.159"></a><span id="l9.159" class="difflineplus">+  }</span>
<a href="#l9.160"></a><span id="l9.160" class="difflineplus">+</span>
<a href="#l9.161"></a><span id="l9.161" class="difflineplus">+  if (opt_copyData != null) {</span>
<a href="#l9.162"></a><span id="l9.162" class="difflineplus">+    elem.dataset.copyData = opt_copyData;</span>
<a href="#l9.163"></a><span id="l9.163" class="difflineplus">+  }</span>
<a href="#l9.164"></a><span id="l9.164" class="difflineplus">+</span>
<a href="#l9.165"></a><span id="l9.165" class="difflineplus">+  return elem;</span>
<a href="#l9.166"></a><span id="l9.166" class="difflineplus">+}</span>
<a href="#l9.167"></a><span id="l9.167" class="difflineplus">+</span>
<a href="#l9.168"></a><span id="l9.168" class="difflineplus">+function appendChildren(parentElem, childNodes) {</span>
<a href="#l9.169"></a><span id="l9.169" class="difflineplus">+  for (let i = 0; i &lt; childNodes.length; i++)</span>
<a href="#l9.170"></a><span id="l9.170" class="difflineplus">+    parentElem.appendChild(childNodes[i]);</span>
<a href="#l9.171"></a><span id="l9.171" class="difflineplus">+}</span>
<a href="#l9.172"></a><span id="l9.172" class="difflineplus">+</span>
<a href="#l9.173"></a><span id="l9.173"> /**</span>
<a href="#l9.174"></a><span id="l9.174">  * Coerces x into a string.</span>
<a href="#l9.175"></a><span id="l9.175">  */</span>
<a href="#l9.176"></a><span id="l9.176"> function toStr(x) {</span>
<a href="#l9.177"></a><span id="l9.177">   return &quot;&quot; + x;</span>
<a href="#l9.178"></a><span id="l9.178"> }</span>
<a href="#l9.179"></a><span id="l9.179"> </span>
<a href="#l9.180"></a><span id="l9.180"> /**</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1">deleted file mode 100644</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineminus">--- a/mail/components/about-support/content/crashes.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineplus">+++ /dev/null</span>
<a href="#l10.4"></a><span id="l10.4" class="difflineat">@@ -1,89 +0,0 @@</span>
<a href="#l10.5"></a><span id="l10.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l10.6"></a><span id="l10.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l10.7"></a><span id="l10.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l10.8"></a><span id="l10.8" class="difflineminus">-</span>
<a href="#l10.9"></a><span id="l10.9" class="difflineminus">-&quot;use strict&quot;;</span>
<a href="#l10.10"></a><span id="l10.10" class="difflineminus">-</span>
<a href="#l10.11"></a><span id="l10.11" class="difflineminus">-Components.utils.import(&quot;resource://gre/modules/CrashReports.jsm&quot;);</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-/**</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineminus">- * Get list of crashes and show 5 most recent.*/</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineminus">-</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineminus">-var kCrashesMaxCount = 5;</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineminus">-</span>
<a href="#l10.18"></a><span id="l10.18" class="difflineminus">-function populateCrashesSection() {</span>
<a href="#l10.19"></a><span id="l10.19" class="difflineminus">-  let reportURL;</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineminus">-  try {</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineminus">-    reportURL = Services.prefs.getCharPref(&quot;breakpad.reportURL&quot;);</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineminus">-    // Ignore any non http/https urls</span>
<a href="#l10.23"></a><span id="l10.23" class="difflineminus">-    if (!/^https?:/i.test(reportURL))</span>
<a href="#l10.24"></a><span id="l10.24" class="difflineminus">-      reportURL = null;</span>
<a href="#l10.25"></a><span id="l10.25" class="difflineminus">-  }</span>
<a href="#l10.26"></a><span id="l10.26" class="difflineminus">-  catch (e) { }</span>
<a href="#l10.27"></a><span id="l10.27" class="difflineminus">-  if (!reportURL) {</span>
<a href="#l10.28"></a><span id="l10.28" class="difflineminus">-    let noConfig = document.getElementById(&quot;crashes-noConfig&quot;)</span>
<a href="#l10.29"></a><span id="l10.29" class="difflineminus">-    noConfig.style.display = &quot;block&quot;;</span>
<a href="#l10.30"></a><span id="l10.30" class="difflineminus">-    noConfig.classList.remove(&quot;no-copy&quot;);</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineminus">-    return;</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineminus">-  }</span>
<a href="#l10.33"></a><span id="l10.33" class="difflineminus">-  else {</span>
<a href="#l10.34"></a><span id="l10.34" class="difflineminus">-    let allReports = document.getElementById(&quot;crashes-allReports&quot;)</span>
<a href="#l10.35"></a><span id="l10.35" class="difflineminus">-    allReports.style.display = &quot;block&quot;;</span>
<a href="#l10.36"></a><span id="l10.36" class="difflineminus">-    allReports.classList.remove(&quot;no-copy&quot;);</span>
<a href="#l10.37"></a><span id="l10.37" class="difflineminus">-  }</span>
<a href="#l10.38"></a><span id="l10.38" class="difflineminus">-</span>
<a href="#l10.39"></a><span id="l10.39" class="difflineminus">-  let reports = CrashReports.getReports();</span>
<a href="#l10.40"></a><span id="l10.40" class="difflineminus">-  let reportsSubmitted = [];</span>
<a href="#l10.41"></a><span id="l10.41" class="difflineminus">-  let reportsPendingCount = 0;</span>
<a href="#l10.42"></a><span id="l10.42" class="difflineminus">-  for (let report of reports)</span>
<a href="#l10.43"></a><span id="l10.43" class="difflineminus">-  {</span>
<a href="#l10.44"></a><span id="l10.44" class="difflineminus">-    if (!report.pending)</span>
<a href="#l10.45"></a><span id="l10.45" class="difflineminus">-    {</span>
<a href="#l10.46"></a><span id="l10.46" class="difflineminus">-      reportsSubmitted.push(report);</span>
<a href="#l10.47"></a><span id="l10.47" class="difflineminus">-      if (reportsSubmitted.length == kCrashesMaxCount)</span>
<a href="#l10.48"></a><span id="l10.48" class="difflineminus">-        break;</span>
<a href="#l10.49"></a><span id="l10.49" class="difflineminus">-    }</span>
<a href="#l10.50"></a><span id="l10.50" class="difflineminus">-    else</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineminus">-    {</span>
<a href="#l10.52"></a><span id="l10.52" class="difflineminus">-      reportsPendingCount++;</span>
<a href="#l10.53"></a><span id="l10.53" class="difflineminus">-    }</span>
<a href="#l10.54"></a><span id="l10.54" class="difflineminus">-  }</span>
<a href="#l10.55"></a><span id="l10.55" class="difflineminus">-</span>
<a href="#l10.56"></a><span id="l10.56" class="difflineminus">-  let dateFormat = Components.classes[&quot;@mozilla.org/intl/scriptabledateformat;1&quot;]</span>
<a href="#l10.57"></a><span id="l10.57" class="difflineminus">-                             .getService(Components.interfaces.nsIScriptableDateFormat);</span>
<a href="#l10.58"></a><span id="l10.58" class="difflineminus">-  let crashesBody = document.getElementById(&quot;crashes-tbody&quot;);</span>
<a href="#l10.59"></a><span id="l10.59" class="difflineminus">-  for (let report of reportsSubmitted)</span>
<a href="#l10.60"></a><span id="l10.60" class="difflineminus">-  {</span>
<a href="#l10.61"></a><span id="l10.61" class="difflineminus">-    let tr = document.createElement(&quot;tr&quot;);</span>
<a href="#l10.62"></a><span id="l10.62" class="difflineminus">-    let cellCrashLink = document.createElement(&quot;td&quot;);</span>
<a href="#l10.63"></a><span id="l10.63" class="difflineminus">-    let anchor = document.createElement(&quot;a&quot;);</span>
<a href="#l10.64"></a><span id="l10.64" class="difflineminus">-    anchor.setAttribute(&quot;href&quot;, reportURL + report.id);</span>
<a href="#l10.65"></a><span id="l10.65" class="difflineminus">-    anchor.textContent = report.id;</span>
<a href="#l10.66"></a><span id="l10.66" class="difflineminus">-    cellCrashLink.appendChild(anchor);</span>
<a href="#l10.67"></a><span id="l10.67" class="difflineminus">-    tr.appendChild(cellCrashLink);</span>
<a href="#l10.68"></a><span id="l10.68" class="difflineminus">-    let dateSubmitted = new Date(report.date);</span>
<a href="#l10.69"></a><span id="l10.69" class="difflineminus">-    let cellDate = document.createElement(&quot;td&quot;);</span>
<a href="#l10.70"></a><span id="l10.70" class="difflineminus">-    cellDate.textContent = dateFormat.FormatDate(&quot;&quot;, dateFormat.dateFormatShort,</span>
<a href="#l10.71"></a><span id="l10.71" class="difflineminus">-                                                 dateSubmitted.getFullYear(),</span>
<a href="#l10.72"></a><span id="l10.72" class="difflineminus">-                                                 dateSubmitted.getMonth() + 1,</span>
<a href="#l10.73"></a><span id="l10.73" class="difflineminus">-                                                 dateSubmitted.getDate());</span>
<a href="#l10.74"></a><span id="l10.74" class="difflineminus">-    tr.appendChild(cellDate);</span>
<a href="#l10.75"></a><span id="l10.75" class="difflineminus">-    crashesBody.appendChild(tr);</span>
<a href="#l10.76"></a><span id="l10.76" class="difflineminus">-  }</span>
<a href="#l10.77"></a><span id="l10.77" class="difflineminus">-}</span>
<a href="#l10.78"></a><span id="l10.78" class="difflineminus">-</span>
<a href="#l10.79"></a><span id="l10.79" class="difflineminus">-/**</span>
<a href="#l10.80"></a><span id="l10.80" class="difflineminus">- * Returns a plaintext representation of extension data.</span>
<a href="#l10.81"></a><span id="l10.81" class="difflineminus">- */</span>
<a href="#l10.82"></a><span id="l10.82" class="difflineminus">-</span>
<a href="#l10.83"></a><span id="l10.83" class="difflineminus">-function getCrashesText(aIndent) {</span>
<a href="#l10.84"></a><span id="l10.84" class="difflineminus">-  let crashesData = &quot;&quot;;</span>
<a href="#l10.85"></a><span id="l10.85" class="difflineminus">-  let recentCrashesSubmitted = document.querySelectorAll(&quot;#crashes-tbody &gt; tr&quot;);</span>
<a href="#l10.86"></a><span id="l10.86" class="difflineminus">-  for (let i = 0; i &lt; recentCrashesSubmitted.length; i++)</span>
<a href="#l10.87"></a><span id="l10.87" class="difflineminus">-  {</span>
<a href="#l10.88"></a><span id="l10.88" class="difflineminus">-    let tds = recentCrashesSubmitted.item(i).querySelectorAll(&quot;td&quot;);</span>
<a href="#l10.89"></a><span id="l10.89" class="difflineminus">-    crashesData += aIndent.repeat(2) + tds.item(0).firstChild.href +</span>
<a href="#l10.90"></a><span id="l10.90" class="difflineminus">-                   &quot; (&quot; + tds.item(1).textContent + &quot;)\n&quot;;</span>
<a href="#l10.91"></a><span id="l10.91" class="difflineminus">-  }</span>
<a href="#l10.92"></a><span id="l10.92" class="difflineminus">-  return crashesData;</span>
<a href="#l10.93"></a><span id="l10.93" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/components/about-support/content/export.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/components/about-support/content/export.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -167,17 +167,16 @@ function createTextForElement(elem, aHid</span>
<a href="#l11.4"></a><span id="l11.4"> </span>
<a href="#l11.5"></a><span id="l11.5"> /**</span>
<a href="#l11.6"></a><span id="l11.6">  * Elements to replace entirely with custom text. Keys are element ids, values</span>
<a href="#l11.7"></a><span id="l11.7">  * are functions that return the text. The functions themselves are defined in</span>
<a href="#l11.8"></a><span id="l11.8">  * the files for their respective sections.</span>
<a href="#l11.9"></a><span id="l11.9">  */</span>
<a href="#l11.10"></a><span id="l11.10"> var gElementsToReplace = {</span>
<a href="#l11.11"></a><span id="l11.11">   &quot;accounts-table&quot;: getAccountsText,</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-  &quot;extensions-table&quot;: getExtensionsText,</span>
<a href="#l11.13"></a><span id="l11.13"> };</span>
<a href="#l11.14"></a><span id="l11.14"> </span>
<a href="#l11.15"></a><span id="l11.15"> function generateTextForElement(elem, aHidePrivateData, indent,</span>
<a href="#l11.16"></a><span id="l11.16">                                 textFragmentAccumulator) {</span>
<a href="#l11.17"></a><span id="l11.17">   // Add a little extra spacing around most elements.</span>
<a href="#l11.18"></a><span id="l11.18">   if (![&quot;td&quot;, &quot;th&quot;, &quot;span&quot;, &quot;a&quot;].includes(elem.tagName))</span>
<a href="#l11.19"></a><span id="l11.19">     textFragmentAccumulator.push(&quot;\n&quot;);</span>
<a href="#l11.20"></a><span id="l11.20"> </span>
<a href="#l11.21"></a><span id="l11.21" class="difflineat">@@ -233,8 +232,24 @@ function generateTextForTextNode(node, i</span>
<a href="#l11.22"></a><span id="l11.22">   if (!prevNode || prevNode.nodeType == Node.TEXT_NODE)</span>
<a href="#l11.23"></a><span id="l11.23">     textFragmentAccumulator.push(&quot;\n&quot; + indent);</span>
<a href="#l11.24"></a><span id="l11.24"> </span>
<a href="#l11.25"></a><span id="l11.25">   // Trim the text node's text content and add proper indentation after</span>
<a href="#l11.26"></a><span id="l11.26">   // any internal line breaks.</span>
<a href="#l11.27"></a><span id="l11.27">   let text = node.textContent.trim().replace(/\n/g, &quot;\n&quot; + indent);</span>
<a href="#l11.28"></a><span id="l11.28">   textFragmentAccumulator.push(text);</span>
<a href="#l11.29"></a><span id="l11.29"> }</span>
<a href="#l11.30"></a><span id="l11.30" class="difflineplus">+</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineplus">+/**</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+ * Returns a plaintext representation of crashes data.</span>
<a href="#l11.33"></a><span id="l11.33" class="difflineplus">+ */</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineplus">+</span>
<a href="#l11.35"></a><span id="l11.35" class="difflineplus">+function getCrashesText(aIndent) {</span>
<a href="#l11.36"></a><span id="l11.36" class="difflineplus">+  let crashesData = &quot;&quot;;</span>
<a href="#l11.37"></a><span id="l11.37" class="difflineplus">+  let recentCrashesSubmitted = document.querySelectorAll(&quot;#crashes-tbody &gt; tr&quot;);</span>
<a href="#l11.38"></a><span id="l11.38" class="difflineplus">+  for (let i = 0; i &lt; recentCrashesSubmitted.length; i++)</span>
<a href="#l11.39"></a><span id="l11.39" class="difflineplus">+  {</span>
<a href="#l11.40"></a><span id="l11.40" class="difflineplus">+    let tds = recentCrashesSubmitted.item(i).querySelectorAll(&quot;td&quot;);</span>
<a href="#l11.41"></a><span id="l11.41" class="difflineplus">+    crashesData += aIndent.repeat(2) + tds.item(0).firstChild.href +</span>
<a href="#l11.42"></a><span id="l11.42" class="difflineplus">+                   &quot; (&quot; + tds.item(1).textContent + &quot;)\n&quot;;</span>
<a href="#l11.43"></a><span id="l11.43" class="difflineplus">+  }</span>
<a href="#l11.44"></a><span id="l11.44" class="difflineplus">+  return crashesData;</span>
<a href="#l11.45"></a><span id="l11.45" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">deleted file mode 100644</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineminus">--- a/mail/components/about-support/content/extensions.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineplus">+++ /dev/null</span>
<a href="#l12.4"></a><span id="l12.4" class="difflineat">@@ -1,55 +0,0 @@</span>
<a href="#l12.5"></a><span id="l12.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l12.6"></a><span id="l12.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l12.7"></a><span id="l12.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l12.8"></a><span id="l12.8" class="difflineminus">-</span>
<a href="#l12.9"></a><span id="l12.9" class="difflineminus">-&quot;use strict&quot;;</span>
<a href="#l12.10"></a><span id="l12.10" class="difflineminus">-</span>
<a href="#l12.11"></a><span id="l12.11" class="difflineminus">-/**</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">- * A list of extensions. This is assigned to by</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineminus">- * populateExtensionsSection. There's a potential race condition here, but it's</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineminus">- * not really going to happen in practice.</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineminus">- */</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineminus">-var gExtensions;</span>
<a href="#l12.17"></a><span id="l12.17" class="difflineminus">-</span>
<a href="#l12.18"></a><span id="l12.18" class="difflineminus">-/**</span>
<a href="#l12.19"></a><span id="l12.19" class="difflineminus">- * A list of fields for each extension.</span>
<a href="#l12.20"></a><span id="l12.20" class="difflineminus">- */</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineminus">-var gExtensionDetails = [&quot;name&quot;, &quot;version&quot;, &quot;isActive&quot;, &quot;id&quot;];</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineminus">-</span>
<a href="#l12.23"></a><span id="l12.23" class="difflineminus">-function populateExtensionsSection() {</span>
<a href="#l12.24"></a><span id="l12.24" class="difflineminus">-  AddonManager.getAddonsByTypes([&quot;extension&quot;], function (extensions) {</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineminus">-    extensions.sort(function(a,b) {</span>
<a href="#l12.26"></a><span id="l12.26" class="difflineminus">-      if (a.isActive != b.isActive)</span>
<a href="#l12.27"></a><span id="l12.27" class="difflineminus">-        return b.isActive ? 1 : -1;</span>
<a href="#l12.28"></a><span id="l12.28" class="difflineminus">-      let lc = a.name.localeCompare(b.name);</span>
<a href="#l12.29"></a><span id="l12.29" class="difflineminus">-      if (lc != 0)</span>
<a href="#l12.30"></a><span id="l12.30" class="difflineminus">-        return lc;</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineminus">-      if (a.version != b.version)</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineminus">-        return a.version &gt; b.version ? 1 : -1;</span>
<a href="#l12.33"></a><span id="l12.33" class="difflineminus">-      return 0;</span>
<a href="#l12.34"></a><span id="l12.34" class="difflineminus">-    });</span>
<a href="#l12.35"></a><span id="l12.35" class="difflineminus">-</span>
<a href="#l12.36"></a><span id="l12.36" class="difflineminus">-    gExtensions = extensions;</span>
<a href="#l12.37"></a><span id="l12.37" class="difflineminus">-    let trExtensions = [];</span>
<a href="#l12.38"></a><span id="l12.38" class="difflineminus">-    for (let i = 0; i &lt; extensions.length; i++) {</span>
<a href="#l12.39"></a><span id="l12.39" class="difflineminus">-      let extension = extensions[i];</span>
<a href="#l12.40"></a><span id="l12.40" class="difflineminus">-      let extensionTDs = gExtensionDetails.map(prop =&gt;</span>
<a href="#l12.41"></a><span id="l12.41" class="difflineminus">-                          createElement(&quot;td&quot;, extension[prop]));</span>
<a href="#l12.42"></a><span id="l12.42" class="difflineminus">-      let tr = createParentElement(&quot;tr&quot;, extensionTDs);</span>
<a href="#l12.43"></a><span id="l12.43" class="difflineminus">-      trExtensions.push(tr);</span>
<a href="#l12.44"></a><span id="l12.44" class="difflineminus">-    }</span>
<a href="#l12.45"></a><span id="l12.45" class="difflineminus">-    appendChildren(document.getElementById(&quot;extensions-tbody&quot;), trExtensions);</span>
<a href="#l12.46"></a><span id="l12.46" class="difflineminus">-  });</span>
<a href="#l12.47"></a><span id="l12.47" class="difflineminus">-}</span>
<a href="#l12.48"></a><span id="l12.48" class="difflineminus">-</span>
<a href="#l12.49"></a><span id="l12.49" class="difflineminus">-/**</span>
<a href="#l12.50"></a><span id="l12.50" class="difflineminus">- * Returns a plaintext representation of extension data.</span>
<a href="#l12.51"></a><span id="l12.51" class="difflineminus">- */</span>
<a href="#l12.52"></a><span id="l12.52" class="difflineminus">-function getExtensionsText(aHidePrivateData, aIndent) {</span>
<a href="#l12.53"></a><span id="l12.53" class="difflineminus">-  let extensionData = [];</span>
<a href="#l12.54"></a><span id="l12.54" class="difflineminus">-  for (let extension of gExtensions) {</span>
<a href="#l12.55"></a><span id="l12.55" class="difflineminus">-    extensionData.push(aIndent +</span>
<a href="#l12.56"></a><span id="l12.56" class="difflineminus">-                       gExtensionDetails.map(prop =&gt; extension[prop]).join(&quot;, &quot;));</span>
<a href="#l12.57"></a><span id="l12.57" class="difflineminus">-  }</span>
<a href="#l12.58"></a><span id="l12.58" class="difflineminus">-  return extensionData.join(&quot;\n&quot;);</span>
<a href="#l12.59"></a><span id="l12.59" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">deleted file mode 100644</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineminus">--- a/mail/components/about-support/content/gfx.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineplus">+++ /dev/null</span>
<a href="#l13.4"></a><span id="l13.4" class="difflineat">@@ -1,279 +0,0 @@</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l13.8"></a><span id="l13.8" class="difflineminus">-</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineminus">-&quot;use strict&quot;;</span>
<a href="#l13.10"></a><span id="l13.10" class="difflineminus">-</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineminus">-Components.utils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineminus">-</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineminus">-function populateGraphicsSection() {</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineminus">-  function assembleFromGraphicsFailure(i, data)</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineminus">-  {</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineminus">-    // Only cover the cases we have today; for example, we do not have</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineminus">-    // log failures that assert and we assume the log level is 1/error.</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineminus">-    let message = data.failures[i];</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineminus">-    let index = data.indices[i];</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineminus">-    let what = &quot;&quot;;</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineminus">-    if (message.search(/\[GFX1-\]: \(LF\)/) == 0) {</span>
<a href="#l13.23"></a><span id="l13.23" class="difflineminus">-      // Non-asserting log failure - the message is substring(14)</span>
<a href="#l13.24"></a><span id="l13.24" class="difflineminus">-      what = &quot;LogFailure&quot;;</span>
<a href="#l13.25"></a><span id="l13.25" class="difflineminus">-      message = message.substring(14);</span>
<a href="#l13.26"></a><span id="l13.26" class="difflineminus">-    } else if (message.search(/\[GFX1-\]: /) == 0) {</span>
<a href="#l13.27"></a><span id="l13.27" class="difflineminus">-      // Non-asserting - the message is substring(9)</span>
<a href="#l13.28"></a><span id="l13.28" class="difflineminus">-      what = &quot;Error&quot;;</span>
<a href="#l13.29"></a><span id="l13.29" class="difflineminus">-      message = message.substring(9);</span>
<a href="#l13.30"></a><span id="l13.30" class="difflineminus">-    } else if (message.search(/\[GFX1\]: /) == 0) {</span>
<a href="#l13.31"></a><span id="l13.31" class="difflineminus">-      // Asserting - the message is substring(8)</span>
<a href="#l13.32"></a><span id="l13.32" class="difflineminus">-      what = &quot;Assert&quot;;</span>
<a href="#l13.33"></a><span id="l13.33" class="difflineminus">-      message = message.substring(8);</span>
<a href="#l13.34"></a><span id="l13.34" class="difflineminus">-    }</span>
<a href="#l13.35"></a><span id="l13.35" class="difflineminus">-    let assembled = {&quot;index&quot; : index,</span>
<a href="#l13.36"></a><span id="l13.36" class="difflineminus">-                    &quot;header&quot; : (&quot;(#&quot; + index + &quot;) &quot; + what),</span>
<a href="#l13.37"></a><span id="l13.37" class="difflineminus">-                    &quot;message&quot; : message};</span>
<a href="#l13.38"></a><span id="l13.38" class="difflineminus">-    return assembled;</span>
<a href="#l13.39"></a><span id="l13.39" class="difflineminus">-  }</span>
<a href="#l13.40"></a><span id="l13.40" class="difflineminus">-  </span>
<a href="#l13.41"></a><span id="l13.41" class="difflineminus">-</span>
<a href="#l13.42"></a><span id="l13.42" class="difflineminus">-  function createHeader(name)</span>
<a href="#l13.43"></a><span id="l13.43" class="difflineminus">-  {</span>
<a href="#l13.44"></a><span id="l13.44" class="difflineminus">-    let elem = createElement(&quot;th&quot;, name);</span>
<a href="#l13.45"></a><span id="l13.45" class="difflineminus">-    elem.className = &quot;column&quot;;</span>
<a href="#l13.46"></a><span id="l13.46" class="difflineminus">-    return elem;</span>
<a href="#l13.47"></a><span id="l13.47" class="difflineminus">-  }</span>
<a href="#l13.48"></a><span id="l13.48" class="difflineminus">-</span>
<a href="#l13.49"></a><span id="l13.49" class="difflineminus">-  function pushHeaderRow(table, displayName)</span>
<a href="#l13.50"></a><span id="l13.50" class="difflineminus">-  {</span>
<a href="#l13.51"></a><span id="l13.51" class="difflineminus">-    let header = createHeader(displayName);</span>
<a href="#l13.52"></a><span id="l13.52" class="difflineminus">-    header.colSpan = 2;</span>
<a href="#l13.53"></a><span id="l13.53" class="difflineminus">-    table.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l13.54"></a><span id="l13.54" class="difflineminus">-      header,</span>
<a href="#l13.55"></a><span id="l13.55" class="difflineminus">-    ]));</span>
<a href="#l13.56"></a><span id="l13.56" class="difflineminus">-  }</span>
<a href="#l13.57"></a><span id="l13.57" class="difflineminus">-</span>
<a href="#l13.58"></a><span id="l13.58" class="difflineminus">-  function pushInfoRow(table, name, value, displayName)</span>
<a href="#l13.59"></a><span id="l13.59" class="difflineminus">-  {</span>
<a href="#l13.60"></a><span id="l13.60" class="difflineminus">-    if(value) {</span>
<a href="#l13.61"></a><span id="l13.61" class="difflineminus">-      let string = displayName || bundle.GetStringFromName(name);</span>
<a href="#l13.62"></a><span id="l13.62" class="difflineminus">-      table.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l13.63"></a><span id="l13.63" class="difflineminus">-        createHeader(string),</span>
<a href="#l13.64"></a><span id="l13.64" class="difflineminus">-        createElement(&quot;td&quot;, value),</span>
<a href="#l13.65"></a><span id="l13.65" class="difflineminus">-      ]));</span>
<a href="#l13.66"></a><span id="l13.66" class="difflineminus">-    }</span>
<a href="#l13.67"></a><span id="l13.67" class="difflineminus">-  }</span>
<a href="#l13.68"></a><span id="l13.68" class="difflineminus">-</span>
<a href="#l13.69"></a><span id="l13.69" class="difflineminus">-  function pushLiteralInfoRow(table, name, value)</span>
<a href="#l13.70"></a><span id="l13.70" class="difflineminus">-  {</span>
<a href="#l13.71"></a><span id="l13.71" class="difflineminus">-    table.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l13.72"></a><span id="l13.72" class="difflineminus">-      createHeader(name),</span>
<a href="#l13.73"></a><span id="l13.73" class="difflineminus">-      createElement(&quot;td&quot;, value),</span>
<a href="#l13.74"></a><span id="l13.74" class="difflineminus">-    ]));</span>
<a href="#l13.75"></a><span id="l13.75" class="difflineminus">-  }</span>
<a href="#l13.76"></a><span id="l13.76" class="difflineminus">-</span>
<a href="#l13.77"></a><span id="l13.77" class="difflineminus">-  function errorMessageForFeature(feature) {</span>
<a href="#l13.78"></a><span id="l13.78" class="difflineminus">-    var errorMessage;</span>
<a href="#l13.79"></a><span id="l13.79" class="difflineminus">-    var status;</span>
<a href="#l13.80"></a><span id="l13.80" class="difflineminus">-    try {</span>
<a href="#l13.81"></a><span id="l13.81" class="difflineminus">-      status = gfxInfo.getFeatureStatus(feature);</span>
<a href="#l13.82"></a><span id="l13.82" class="difflineminus">-    } catch(e) {}</span>
<a href="#l13.83"></a><span id="l13.83" class="difflineminus">-    switch (status) {</span>
<a href="#l13.84"></a><span id="l13.84" class="difflineminus">-      case gfxInfo.FEATURE_BLOCKED_DEVICE:</span>
<a href="#l13.85"></a><span id="l13.85" class="difflineminus">-      case gfxInfo.FEATURE_DISCOURAGED:</span>
<a href="#l13.86"></a><span id="l13.86" class="difflineminus">-        errorMessage = bundle.GetStringFromName(&quot;blockedGfxCard&quot;);</span>
<a href="#l13.87"></a><span id="l13.87" class="difflineminus">-        break;</span>
<a href="#l13.88"></a><span id="l13.88" class="difflineminus">-      case gfxInfo.FEATURE_BLOCKED_OS_VERSION:</span>
<a href="#l13.89"></a><span id="l13.89" class="difflineminus">-        errorMessage = bundle.GetStringFromName(&quot;blockedOSVersion&quot;);</span>
<a href="#l13.90"></a><span id="l13.90" class="difflineminus">-        break;</span>
<a href="#l13.91"></a><span id="l13.91" class="difflineminus">-      case gfxInfo.FEATURE_BLOCKED_DRIVER_VERSION:</span>
<a href="#l13.92"></a><span id="l13.92" class="difflineminus">-        var suggestedDriverVersion;</span>
<a href="#l13.93"></a><span id="l13.93" class="difflineminus">-        try {</span>
<a href="#l13.94"></a><span id="l13.94" class="difflineminus">-          suggestedDriverVersion = gfxInfo.getFeatureSuggestedDriverVersion(feature);</span>
<a href="#l13.95"></a><span id="l13.95" class="difflineminus">-        } catch(e) {}</span>
<a href="#l13.96"></a><span id="l13.96" class="difflineminus">-        if (suggestedDriverVersion)</span>
<a href="#l13.97"></a><span id="l13.97" class="difflineminus">-          errorMessage = bundle.formatStringFromName(&quot;tryNewerDriver&quot;, [suggestedDriverVersion], 1);</span>
<a href="#l13.98"></a><span id="l13.98" class="difflineminus">-        else</span>
<a href="#l13.99"></a><span id="l13.99" class="difflineminus">-          errorMessage = bundle.GetStringFromName(&quot;blockedDriver&quot;);</span>
<a href="#l13.100"></a><span id="l13.100" class="difflineminus">-        break;</span>
<a href="#l13.101"></a><span id="l13.101" class="difflineminus">-    }</span>
<a href="#l13.102"></a><span id="l13.102" class="difflineminus">-    return errorMessage;</span>
<a href="#l13.103"></a><span id="l13.103" class="difflineminus">-  }</span>
<a href="#l13.104"></a><span id="l13.104" class="difflineminus">-</span>
<a href="#l13.105"></a><span id="l13.105" class="difflineminus">-  function pushFeatureInfoRow(table, name, feature, isEnabled, message, displayName) {</span>
<a href="#l13.106"></a><span id="l13.106" class="difflineminus">-    message = message || isEnabled;</span>
<a href="#l13.107"></a><span id="l13.107" class="difflineminus">-    if (!isEnabled) {</span>
<a href="#l13.108"></a><span id="l13.108" class="difflineminus">-      var errorMessage = errorMessageForFeature(feature);</span>
<a href="#l13.109"></a><span id="l13.109" class="difflineminus">-      if (errorMessage)</span>
<a href="#l13.110"></a><span id="l13.110" class="difflineminus">-        message = errorMessage;</span>
<a href="#l13.111"></a><span id="l13.111" class="difflineminus">-    }</span>
<a href="#l13.112"></a><span id="l13.112" class="difflineminus">-    let string = displayName || bundle.GetStringFromName(name);</span>
<a href="#l13.113"></a><span id="l13.113" class="difflineminus">-    table.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l13.114"></a><span id="l13.114" class="difflineminus">-      createHeader(string),</span>
<a href="#l13.115"></a><span id="l13.115" class="difflineminus">-      createElement(&quot;td&quot;, message),</span>
<a href="#l13.116"></a><span id="l13.116" class="difflineminus">-    ]));</span>
<a href="#l13.117"></a><span id="l13.117" class="difflineminus">-  }</span>
<a href="#l13.118"></a><span id="l13.118" class="difflineminus">-</span>
<a href="#l13.119"></a><span id="l13.119" class="difflineminus">-  function hexValueToString(value)</span>
<a href="#l13.120"></a><span id="l13.120" class="difflineminus">-  {</span>
<a href="#l13.121"></a><span id="l13.121" class="difflineminus">-    return value</span>
<a href="#l13.122"></a><span id="l13.122" class="difflineminus">-           ? String('0000' + value.toString(16)).slice(-4)</span>
<a href="#l13.123"></a><span id="l13.123" class="difflineminus">-           : null;</span>
<a href="#l13.124"></a><span id="l13.124" class="difflineminus">-  }</span>
<a href="#l13.125"></a><span id="l13.125" class="difflineminus">-</span>
<a href="#l13.126"></a><span id="l13.126" class="difflineminus">-  let bundle = Services.strings.createBundle(&quot;chrome://global/locale/aboutSupport.properties&quot;);</span>
<a href="#l13.127"></a><span id="l13.127" class="difflineminus">-  let graphics_tbody = document.getElementById(&quot;graphics-tbody&quot;);</span>
<a href="#l13.128"></a><span id="l13.128" class="difflineminus">-</span>
<a href="#l13.129"></a><span id="l13.129" class="difflineminus">-  var gfxInfo = null;</span>
<a href="#l13.130"></a><span id="l13.130" class="difflineminus">-  try {</span>
<a href="#l13.131"></a><span id="l13.131" class="difflineminus">-    // nsIGfxInfo is currently only implemented on Windows</span>
<a href="#l13.132"></a><span id="l13.132" class="difflineminus">-    gfxInfo = Cc[&quot;@mozilla.org/gfx/info;1&quot;].getService(Ci.nsIGfxInfo);</span>
<a href="#l13.133"></a><span id="l13.133" class="difflineminus">-  } catch(e) {}</span>
<a href="#l13.134"></a><span id="l13.134" class="difflineminus">-</span>
<a href="#l13.135"></a><span id="l13.135" class="difflineminus">-  if (gfxInfo) {</span>
<a href="#l13.136"></a><span id="l13.136" class="difflineminus">-    let trGraphics = [];</span>
<a href="#l13.137"></a><span id="l13.137" class="difflineminus">-    pushHeaderRow(trGraphics, &quot;GPU #1&quot;);</span>
<a href="#l13.138"></a><span id="l13.138" class="difflineminus">-    pushInfoRow(trGraphics, &quot;gpuDescription&quot;, gfxInfo.adapterDescription);</span>
<a href="#l13.139"></a><span id="l13.139" class="difflineminus">-    pushInfoRow(trGraphics, &quot;gpuVendorID&quot;, gfxInfo.adapterVendorID);</span>
<a href="#l13.140"></a><span id="l13.140" class="difflineminus">-    pushInfoRow(trGraphics, &quot;gpuDeviceID&quot;, gfxInfo.adapterDeviceID);</span>
<a href="#l13.141"></a><span id="l13.141" class="difflineminus">-    pushInfoRow(trGraphics, &quot;gpuRAM&quot;, gfxInfo.adapterRAM);</span>
<a href="#l13.142"></a><span id="l13.142" class="difflineminus">-    pushInfoRow(trGraphics, &quot;gpuDrivers&quot;, gfxInfo.adapterDriver);</span>
<a href="#l13.143"></a><span id="l13.143" class="difflineminus">-    pushInfoRow(trGraphics, &quot;gpuDriverVersion&quot;, gfxInfo.adapterDriverVersion);</span>
<a href="#l13.144"></a><span id="l13.144" class="difflineminus">-    pushInfoRow(trGraphics, &quot;gpuDriverDate&quot;, gfxInfo.adapterDriverDate);</span>
<a href="#l13.145"></a><span id="l13.145" class="difflineminus">-</span>
<a href="#l13.146"></a><span id="l13.146" class="difflineminus">-    if (AppConstants.platform == &quot;win&quot;) {</span>
<a href="#l13.147"></a><span id="l13.147" class="difflineminus">-      if(gfxInfo.adapterDescription2) {</span>
<a href="#l13.148"></a><span id="l13.148" class="difflineminus">-        pushHeaderRow(trGraphics, &quot;GPU #2&quot;);</span>
<a href="#l13.149"></a><span id="l13.149" class="difflineminus">-        pushInfoRow(trGraphics, &quot;gpuDescription&quot;, gfxInfo.adapterDescription2);</span>
<a href="#l13.150"></a><span id="l13.150" class="difflineminus">-        pushInfoRow(trGraphics, &quot;gpuVendorID&quot;, gfxInfo.adapterVendorID2);</span>
<a href="#l13.151"></a><span id="l13.151" class="difflineminus">-        pushInfoRow(trGraphics, &quot;gpuDeviceID&quot;, gfxInfo.adapterDeviceID2);</span>
<a href="#l13.152"></a><span id="l13.152" class="difflineminus">-        pushInfoRow(trGraphics, &quot;gpuRAM&quot;, gfxInfo.adapterRAM2);</span>
<a href="#l13.153"></a><span id="l13.153" class="difflineminus">-        pushInfoRow(trGraphics, &quot;gpuDrivers&quot;, gfxInfo.adapterDriver2);</span>
<a href="#l13.154"></a><span id="l13.154" class="difflineminus">-        pushInfoRow(trGraphics, &quot;gpuDriverVersion&quot;, gfxInfo.adapterDriverVersion2);</span>
<a href="#l13.155"></a><span id="l13.155" class="difflineminus">-        pushInfoRow(trGraphics, &quot;gpuDriverDate&quot;, gfxInfo.adapterDriverDate2);</span>
<a href="#l13.156"></a><span id="l13.156" class="difflineminus">-        pushInfoRow(trGraphics, &quot;active&quot;, gfxInfo.isGPU2Active);</span>
<a href="#l13.157"></a><span id="l13.157" class="difflineminus">-      }</span>
<a href="#l13.158"></a><span id="l13.158" class="difflineminus">-    }</span>
<a href="#l13.159"></a><span id="l13.159" class="difflineminus">-</span>
<a href="#l13.160"></a><span id="l13.160" class="difflineminus">-    pushHeaderRow(trGraphics, &quot;Features&quot;);</span>
<a href="#l13.161"></a><span id="l13.161" class="difflineminus">-</span>
<a href="#l13.162"></a><span id="l13.162" class="difflineminus">-    if (AppConstants.platform == &quot;win&quot;) {</span>
<a href="#l13.163"></a><span id="l13.163" class="difflineminus">-      let version = Services.sysinfo.getProperty(&quot;version&quot;);</span>
<a href="#l13.164"></a><span id="l13.164" class="difflineminus">-      let isWindowsVistaOrHigher = (parseFloat(version) &gt;= 6.0);</span>
<a href="#l13.165"></a><span id="l13.165" class="difflineminus">-      if (isWindowsVistaOrHigher) {</span>
<a href="#l13.166"></a><span id="l13.166" class="difflineminus">-        let d2dEnabled = &quot;false&quot;;</span>
<a href="#l13.167"></a><span id="l13.167" class="difflineminus">-        try {</span>
<a href="#l13.168"></a><span id="l13.168" class="difflineminus">-          d2dEnabled = gfxInfo.D2DEnabled;</span>
<a href="#l13.169"></a><span id="l13.169" class="difflineminus">-        } catch(e) {}</span>
<a href="#l13.170"></a><span id="l13.170" class="difflineminus">-        pushFeatureInfoRow(trGraphics, &quot;direct2DEnabled&quot;, gfxInfo.FEATURE_DIRECT2D, d2dEnabled, null, &quot;Direct2D&quot;);</span>
<a href="#l13.171"></a><span id="l13.171" class="difflineminus">-</span>
<a href="#l13.172"></a><span id="l13.172" class="difflineminus">-        let dwEnabled = &quot;false&quot;;</span>
<a href="#l13.173"></a><span id="l13.173" class="difflineminus">-        try {</span>
<a href="#l13.174"></a><span id="l13.174" class="difflineminus">-          dwEnabled = gfxInfo.DWriteEnabled + &quot; (&quot; + gfxInfo.DWriteVersion + &quot;)&quot;;</span>
<a href="#l13.175"></a><span id="l13.175" class="difflineminus">-        } catch(e) {}</span>
<a href="#l13.176"></a><span id="l13.176" class="difflineminus">-        pushInfoRow(trGraphics, &quot;directWriteEnabled&quot;, dwEnabled, &quot;DirectWrite&quot;);</span>
<a href="#l13.177"></a><span id="l13.177" class="difflineminus">-</span>
<a href="#l13.178"></a><span id="l13.178" class="difflineminus">-        let cleartypeParams = &quot;&quot;;</span>
<a href="#l13.179"></a><span id="l13.179" class="difflineminus">-        try {</span>
<a href="#l13.180"></a><span id="l13.180" class="difflineminus">-          cleartypeParams = gfxInfo.cleartypeParameters;</span>
<a href="#l13.181"></a><span id="l13.181" class="difflineminus">-          pushInfoRow(trGraphics, &quot;clearTypeParameters&quot;, cleartypeParams);</span>
<a href="#l13.182"></a><span id="l13.182" class="difflineminus">-        } catch(e) {}</span>
<a href="#l13.183"></a><span id="l13.183" class="difflineminus">-      }</span>
<a href="#l13.184"></a><span id="l13.184" class="difflineminus">-    }</span>
<a href="#l13.185"></a><span id="l13.185" class="difflineminus">-</span>
<a href="#l13.186"></a><span id="l13.186" class="difflineminus">-    var webglrenderer;</span>
<a href="#l13.187"></a><span id="l13.187" class="difflineminus">-    var webglenabled;</span>
<a href="#l13.188"></a><span id="l13.188" class="difflineminus">-    try {</span>
<a href="#l13.189"></a><span id="l13.189" class="difflineminus">-      webglrenderer = gfxInfo.getWebGLParameter(&quot;full-renderer&quot;);</span>
<a href="#l13.190"></a><span id="l13.190" class="difflineminus">-      webglenabled = true;</span>
<a href="#l13.191"></a><span id="l13.191" class="difflineminus">-    } catch (e) {</span>
<a href="#l13.192"></a><span id="l13.192" class="difflineminus">-      webglrenderer = false;</span>
<a href="#l13.193"></a><span id="l13.193" class="difflineminus">-      webglenabled = false;</span>
<a href="#l13.194"></a><span id="l13.194" class="difflineminus">-    }</span>
<a href="#l13.195"></a><span id="l13.195" class="difflineminus">-</span>
<a href="#l13.196"></a><span id="l13.196" class="difflineminus">-    let webglfeature = gfxInfo.FEATURE_WEBGL_OPENGL;</span>
<a href="#l13.197"></a><span id="l13.197" class="difflineminus">-    if (AppConstants.platform == &quot;win&quot;) {</span>
<a href="#l13.198"></a><span id="l13.198" class="difflineminus">-      // If ANGLE is not available but OpenGL is, we want to report on the OpenGL feature, because that's what's going to get used.</span>
<a href="#l13.199"></a><span id="l13.199" class="difflineminus">-      // In all other cases we want to report on the ANGLE feature.</span>
<a href="#l13.200"></a><span id="l13.200" class="difflineminus">-      webglfeature = gfxInfo.FEATURE_WEBGL_ANGLE;</span>
<a href="#l13.201"></a><span id="l13.201" class="difflineminus">-      if (gfxInfo.getFeatureStatus(gfxInfo.FEATURE_WEBGL_ANGLE)  != gfxInfo.FEATURE_STATUS_OK &amp;&amp;</span>
<a href="#l13.202"></a><span id="l13.202" class="difflineminus">-          gfxInfo.getFeatureStatus(gfxInfo.FEATURE_WEBGL_OPENGL) == gfxInfo.FEATURE_STATUS_OK)</span>
<a href="#l13.203"></a><span id="l13.203" class="difflineminus">-        webglfeature = gfxInfo.FEATURE_WEBGL_OPENGL;</span>
<a href="#l13.204"></a><span id="l13.204" class="difflineminus">-    }</span>
<a href="#l13.205"></a><span id="l13.205" class="difflineminus">-    pushFeatureInfoRow(trGraphics, &quot;webgl1Renderer&quot;, webglfeature, webglenabled, webglrenderer);</span>
<a href="#l13.206"></a><span id="l13.206" class="difflineminus">-</span>
<a href="#l13.207"></a><span id="l13.207" class="difflineminus">-    appendChildren(graphics_tbody, trGraphics);</span>
<a href="#l13.208"></a><span id="l13.208" class="difflineminus">-</span>
<a href="#l13.209"></a><span id="l13.209" class="difflineminus">-    // display registered graphics properties</span>
<a href="#l13.210"></a><span id="l13.210" class="difflineminus">-    let graphics_info_properties = document.getElementById(&quot;graphics-info-properties&quot;);</span>
<a href="#l13.211"></a><span id="l13.211" class="difflineminus">-    var info = gfxInfo.getInfo();</span>
<a href="#l13.212"></a><span id="l13.212" class="difflineminus">-    let trGraphicsProperties = [];</span>
<a href="#l13.213"></a><span id="l13.213" class="difflineminus">-    for (var property in info) {</span>
<a href="#l13.214"></a><span id="l13.214" class="difflineminus">-      pushLiteralInfoRow(trGraphicsProperties, property, info[property]);</span>
<a href="#l13.215"></a><span id="l13.215" class="difflineminus">-    }</span>
<a href="#l13.216"></a><span id="l13.216" class="difflineminus">-    appendChildren(graphics_info_properties, trGraphicsProperties);</span>
<a href="#l13.217"></a><span id="l13.217" class="difflineminus">-</span>
<a href="#l13.218"></a><span id="l13.218" class="difflineminus">-    // display any failures that have occurred</span>
<a href="#l13.219"></a><span id="l13.219" class="difflineminus">-    let graphics_failures_tbody = document.getElementById(&quot;graphics-failures-tbody&quot;);</span>
<a href="#l13.220"></a><span id="l13.220" class="difflineminus">-</span>
<a href="#l13.221"></a><span id="l13.221" class="difflineminus">-    let data = {};</span>
<a href="#l13.222"></a><span id="l13.222" class="difflineminus">-</span>
<a href="#l13.223"></a><span id="l13.223" class="difflineminus">-    let failureCount = {};</span>
<a href="#l13.224"></a><span id="l13.224" class="difflineminus">-    let failureIndices = {};</span>
<a href="#l13.225"></a><span id="l13.225" class="difflineminus">-</span>
<a href="#l13.226"></a><span id="l13.226" class="difflineminus">-    let failures = gfxInfo.getFailures(failureCount, failureIndices);</span>
<a href="#l13.227"></a><span id="l13.227" class="difflineminus">-    if (failures.length) {</span>
<a href="#l13.228"></a><span id="l13.228" class="difflineminus">-      data.failures = failures;</span>
<a href="#l13.229"></a><span id="l13.229" class="difflineminus">-      if (failureIndices.value.length == failures.length) {</span>
<a href="#l13.230"></a><span id="l13.230" class="difflineminus">-        data.indices = failureIndices.value;</span>
<a href="#l13.231"></a><span id="l13.231" class="difflineminus">-      }</span>
<a href="#l13.232"></a><span id="l13.232" class="difflineminus">-    }</span>
<a href="#l13.233"></a><span id="l13.233" class="difflineminus">-    if (&quot;failures&quot; in data) {</span>
<a href="#l13.234"></a><span id="l13.234" class="difflineminus">-      let trGraphicsFailures;</span>
<a href="#l13.235"></a><span id="l13.235" class="difflineminus">-      // If indices is there, it should be the same length as failures,</span>
<a href="#l13.236"></a><span id="l13.236" class="difflineminus">-      // (see Troubleshoot.jsm) but we check anyway:</span>
<a href="#l13.237"></a><span id="l13.237" class="difflineminus">-      if (&quot;indices&quot; in data &amp;&amp; data.failures.length == data.indices.length) {</span>
<a href="#l13.238"></a><span id="l13.238" class="difflineminus">-        let combined = [];</span>
<a href="#l13.239"></a><span id="l13.239" class="difflineminus">-        for (let i = 0; i &lt; data.failures.length; i++) {</span>
<a href="#l13.240"></a><span id="l13.240" class="difflineminus">-          let assembled = assembleFromGraphicsFailure(i, data);</span>
<a href="#l13.241"></a><span id="l13.241" class="difflineminus">-          combined.push(assembled);</span>
<a href="#l13.242"></a><span id="l13.242" class="difflineminus">-        }</span>
<a href="#l13.243"></a><span id="l13.243" class="difflineminus">-        combined.sort(function(a,b) {</span>
<a href="#l13.244"></a><span id="l13.244" class="difflineminus">-            if (a.index &lt; b.index) return -1;</span>
<a href="#l13.245"></a><span id="l13.245" class="difflineminus">-            if (a.index &gt; b.index) return 1;</span>
<a href="#l13.246"></a><span id="l13.246" class="difflineminus">-            return 0;});</span>
<a href="#l13.247"></a><span id="l13.247" class="difflineminus">-        trGraphicsFailures = combined.map(function(val) {</span>
<a href="#l13.248"></a><span id="l13.248" class="difflineminus">-                                 return createParentElement(&quot;tr&quot;, [</span>
<a href="#l13.249"></a><span id="l13.249" class="difflineminus">-                                     createElement(&quot;th&quot;, val.header, {class: &quot;column&quot;}),</span>
<a href="#l13.250"></a><span id="l13.250" class="difflineminus">-                                     createElement(&quot;td&quot;, val.message),</span>
<a href="#l13.251"></a><span id="l13.251" class="difflineminus">-                                 ]);</span>
<a href="#l13.252"></a><span id="l13.252" class="difflineminus">-                             });</span>
<a href="#l13.253"></a><span id="l13.253" class="difflineminus">-      } else {</span>
<a href="#l13.254"></a><span id="l13.254" class="difflineminus">-        trGraphicsFailures = createParentElement(&quot;tr&quot;, [</span>
<a href="#l13.255"></a><span id="l13.255" class="difflineminus">-                                 createElement(&quot;th&quot;, &quot;LogFailure&quot;, {class: &quot;column&quot;}),</span>
<a href="#l13.256"></a><span id="l13.256" class="difflineminus">-                                 createParentElement(&quot;td&quot;, data.failures.map(val =&gt;</span>
<a href="#l13.257"></a><span id="l13.257" class="difflineminus">-                                     createElement(&quot;p&quot;, val)</span>
<a href="#l13.258"></a><span id="l13.258" class="difflineminus">-                             ))]);</span>
<a href="#l13.259"></a><span id="l13.259" class="difflineminus">-      }</span>
<a href="#l13.260"></a><span id="l13.260" class="difflineminus">-</span>
<a href="#l13.261"></a><span id="l13.261" class="difflineminus">-      appendChildren(graphics_failures_tbody, trGraphicsFailures);</span>
<a href="#l13.262"></a><span id="l13.262" class="difflineminus">-    }</span>
<a href="#l13.263"></a><span id="l13.263" class="difflineminus">-  }</span>
<a href="#l13.264"></a><span id="l13.264" class="difflineminus">-</span>
<a href="#l13.265"></a><span id="l13.265" class="difflineminus">-  let windows = Services.ww.getWindowEnumerator();</span>
<a href="#l13.266"></a><span id="l13.266" class="difflineminus">-  let acceleratedWindows = 0;</span>
<a href="#l13.267"></a><span id="l13.267" class="difflineminus">-  let totalWindows = 0;</span>
<a href="#l13.268"></a><span id="l13.268" class="difflineminus">-  let mgrType;</span>
<a href="#l13.269"></a><span id="l13.269" class="difflineminus">-  while (windows.hasMoreElements()) {</span>
<a href="#l13.270"></a><span id="l13.270" class="difflineminus">-    totalWindows++;</span>
<a href="#l13.271"></a><span id="l13.271" class="difflineminus">-</span>
<a href="#l13.272"></a><span id="l13.272" class="difflineminus">-    let awindow = windows.getNext().QueryInterface(Ci.nsIInterfaceRequestor);</span>
<a href="#l13.273"></a><span id="l13.273" class="difflineminus">-    let windowutils = awindow.getInterface(Ci.nsIDOMWindowUtils);</span>
<a href="#l13.274"></a><span id="l13.274" class="difflineminus">-    try {</span>
<a href="#l13.275"></a><span id="l13.275" class="difflineminus">-      if (windowutils.layerManagerType != &quot;Basic&quot;) {</span>
<a href="#l13.276"></a><span id="l13.276" class="difflineminus">-        acceleratedWindows++;</span>
<a href="#l13.277"></a><span id="l13.277" class="difflineminus">-        mgrType = windowutils.layerManagerType;</span>
<a href="#l13.278"></a><span id="l13.278" class="difflineminus">-      }</span>
<a href="#l13.279"></a><span id="l13.279" class="difflineminus">-    } catch (e) {</span>
<a href="#l13.280"></a><span id="l13.280" class="difflineminus">-      continue;</span>
<a href="#l13.281"></a><span id="l13.281" class="difflineminus">-    }</span>
<a href="#l13.282"></a><span id="l13.282" class="difflineminus">-  }</span>
<a href="#l13.283"></a><span id="l13.283" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1">deleted file mode 100644</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineminus">--- a/mail/components/about-support/content/init.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineplus">+++ /dev/null</span>
<a href="#l14.4"></a><span id="l14.4" class="difflineat">@@ -1,120 +0,0 @@</span>
<a href="#l14.5"></a><span id="l14.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l14.6"></a><span id="l14.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l14.7"></a><span id="l14.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l14.8"></a><span id="l14.8" class="difflineminus">-</span>
<a href="#l14.9"></a><span id="l14.9" class="difflineminus">-&quot;use strict&quot;;</span>
<a href="#l14.10"></a><span id="l14.10" class="difflineminus">-</span>
<a href="#l14.11"></a><span id="l14.11" class="difflineminus">-var Cc = Components.classes;</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-var Ci = Components.interfaces;</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineminus">-</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineminus">-Components.utils.import(&quot;resource:///modules/iteratorUtils.jsm&quot;);</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineminus">-Components.utils.import(&quot;resource://gre/modules/AddonManager.jsm&quot;);</span>
<a href="#l14.16"></a><span id="l14.16" class="difflineminus">-Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l14.17"></a><span id="l14.17" class="difflineminus">-Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l14.18"></a><span id="l14.18" class="difflineminus">-Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l14.19"></a><span id="l14.19" class="difflineminus">-Components.utils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l14.20"></a><span id="l14.20" class="difflineminus">-</span>
<a href="#l14.21"></a><span id="l14.21" class="difflineminus">-Components.utils.import(&quot;resource:///modules/aboutSupport.js&quot;);</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineminus">-</span>
<a href="#l14.23"></a><span id="l14.23" class="difflineminus">-/* Node classes. All of these are mutually exclusive. */</span>
<a href="#l14.24"></a><span id="l14.24" class="difflineminus">-</span>
<a href="#l14.25"></a><span id="l14.25" class="difflineminus">-// Any nodes marked with this class will be considered part of the UI only,</span>
<a href="#l14.26"></a><span id="l14.26" class="difflineminus">-// and therefore will not be copied.</span>
<a href="#l14.27"></a><span id="l14.27" class="difflineminus">-var CLASS_DATA_UIONLY = &quot;data-uionly&quot;;</span>
<a href="#l14.28"></a><span id="l14.28" class="difflineminus">-</span>
<a href="#l14.29"></a><span id="l14.29" class="difflineminus">-// Any nodes marked with this class will be considered private and will be</span>
<a href="#l14.30"></a><span id="l14.30" class="difflineminus">-// hidden if the user requests only public data to be shown or copied.</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineminus">-var CLASS_DATA_PRIVATE = &quot;data-private&quot;;</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineminus">-</span>
<a href="#l14.33"></a><span id="l14.33" class="difflineminus">-// Any nodes marked with this class will only be displayed when the user chooses</span>
<a href="#l14.34"></a><span id="l14.34" class="difflineminus">-// to not display private data.</span>
<a href="#l14.35"></a><span id="l14.35" class="difflineminus">-var CLASS_DATA_PUBLIC = &quot;data-public&quot;;</span>
<a href="#l14.36"></a><span id="l14.36" class="difflineminus">-</span>
<a href="#l14.37"></a><span id="l14.37" class="difflineminus">-window.onload = function () {</span>
<a href="#l14.38"></a><span id="l14.38" class="difflineminus">-  // Get the support URL.</span>
<a href="#l14.39"></a><span id="l14.39" class="difflineminus">-  let supportUrl = Services.urlFormatter.formatURLPref(&quot;app.support.baseURL&quot;);</span>
<a href="#l14.40"></a><span id="l14.40" class="difflineminus">-</span>
<a href="#l14.41"></a><span id="l14.41" class="difflineminus">-  // Update the application basics section.</span>
<a href="#l14.42"></a><span id="l14.42" class="difflineminus">-  document.getElementById(&quot;application-box&quot;).textContent = Services.appinfo.name;</span>
<a href="#l14.43"></a><span id="l14.43" class="difflineminus">-  document.getElementById(&quot;version-box&quot;).textContent = Services.appinfo.version;</span>
<a href="#l14.44"></a><span id="l14.44" class="difflineminus">-  document.getElementById(&quot;useragent-box&quot;).textContent = navigator.userAgent;</span>
<a href="#l14.45"></a><span id="l14.45" class="difflineminus">-  document.getElementById(&quot;supportLink&quot;).href = supportUrl;</span>
<a href="#l14.46"></a><span id="l14.46" class="difflineminus">-  let currProfD = Services.dirsvc.get(&quot;ProfD&quot;, Ci.nsIFile);</span>
<a href="#l14.47"></a><span id="l14.47" class="difflineminus">-  appendChildren(document.getElementById(&quot;profile-dir-box&quot;),</span>
<a href="#l14.48"></a><span id="l14.48" class="difflineminus">-    [createElement(&quot;a&quot;, currProfD.path,</span>
<a href="#l14.49"></a><span id="l14.49" class="difflineminus">-      {&quot;href&quot;: Services.io.newFileURI(currProfD).spec,</span>
<a href="#l14.50"></a><span id="l14.50" class="difflineminus">-       &quot;onclick&quot;: &quot;openProfileDirectory(); event.preventDefault();&quot;</span>
<a href="#l14.51"></a><span id="l14.51" class="difflineminus">-      })]);</span>
<a href="#l14.52"></a><span id="l14.52" class="difflineminus">-</span>
<a href="#l14.53"></a><span id="l14.53" class="difflineminus">-  let fsType;</span>
<a href="#l14.54"></a><span id="l14.54" class="difflineminus">-  try {</span>
<a href="#l14.55"></a><span id="l14.55" class="difflineminus">-    fsType = AboutSupport.getFileSystemType(currProfD);</span>
<a href="#l14.56"></a><span id="l14.56" class="difflineminus">-  }</span>
<a href="#l14.57"></a><span id="l14.57" class="difflineminus">-  catch (x) {</span>
<a href="#l14.58"></a><span id="l14.58" class="difflineminus">-    Components.utils.reportError(x);</span>
<a href="#l14.59"></a><span id="l14.59" class="difflineminus">-  }</span>
<a href="#l14.60"></a><span id="l14.60" class="difflineminus">-</span>
<a href="#l14.61"></a><span id="l14.61" class="difflineminus">-  if (fsType) {</span>
<a href="#l14.62"></a><span id="l14.62" class="difflineminus">-    let bundle = Services.strings.createBundle(</span>
<a href="#l14.63"></a><span id="l14.63" class="difflineminus">-      &quot;chrome://messenger/locale/aboutSupportMail.properties&quot;);</span>
<a href="#l14.64"></a><span id="l14.64" class="difflineminus">-    let fsText = bundle.GetStringFromName(&quot;fsType.&quot; + fsType);</span>
<a href="#l14.65"></a><span id="l14.65" class="difflineminus">-    document.getElementById(&quot;profile-fs-type-box&quot;).textContent = fsText;</span>
<a href="#l14.66"></a><span id="l14.66" class="difflineminus">-  }</span>
<a href="#l14.67"></a><span id="l14.67" class="difflineminus">-</span>
<a href="#l14.68"></a><span id="l14.68" class="difflineminus">-  document.getElementById(&quot;buildid-box&quot;).textContent = Services.appinfo.appBuildID;</span>
<a href="#l14.69"></a><span id="l14.69" class="difflineminus">-</span>
<a href="#l14.70"></a><span id="l14.70" class="difflineminus">-  // Update the other sections.</span>
<a href="#l14.71"></a><span id="l14.71" class="difflineminus">-  populateAccountsSection();</span>
<a href="#l14.72"></a><span id="l14.72" class="difflineminus">-  populatePreferencesSection();</span>
<a href="#l14.73"></a><span id="l14.73" class="difflineminus">-</span>
<a href="#l14.74"></a><span id="l14.74" class="difflineminus">-  if (AppConstants.MOZ_CRASHREPORTER)</span>
<a href="#l14.75"></a><span id="l14.75" class="difflineminus">-    populateCrashesSection();</span>
<a href="#l14.76"></a><span id="l14.76" class="difflineminus">-</span>
<a href="#l14.77"></a><span id="l14.77" class="difflineminus">-  populateExtensionsSection();</span>
<a href="#l14.78"></a><span id="l14.78" class="difflineminus">-  populateGraphicsSection();</span>
<a href="#l14.79"></a><span id="l14.79" class="difflineminus">-  populateJavaScriptSection();</span>
<a href="#l14.80"></a><span id="l14.80" class="difflineminus">-  populateAccessibilitySection();</span>
<a href="#l14.81"></a><span id="l14.81" class="difflineminus">-  populateLibVersionsSection();</span>
<a href="#l14.82"></a><span id="l14.82" class="difflineminus">-}</span>
<a href="#l14.83"></a><span id="l14.83" class="difflineminus">-</span>
<a href="#l14.84"></a><span id="l14.84" class="difflineminus">-function onShowPrivateDataChange(aCheckbox) {</span>
<a href="#l14.85"></a><span id="l14.85" class="difflineminus">-  document.getElementById(&quot;about-support-private&quot;).disabled = aCheckbox.checked;</span>
<a href="#l14.86"></a><span id="l14.86" class="difflineminus">-}</span>
<a href="#l14.87"></a><span id="l14.87" class="difflineminus">-</span>
<a href="#l14.88"></a><span id="l14.88" class="difflineminus">-function createParentElement(tagName, childElems) {</span>
<a href="#l14.89"></a><span id="l14.89" class="difflineminus">-  let elem = document.createElement(tagName);</span>
<a href="#l14.90"></a><span id="l14.90" class="difflineminus">-  appendChildren(elem, childElems);</span>
<a href="#l14.91"></a><span id="l14.91" class="difflineminus">-  return elem;</span>
<a href="#l14.92"></a><span id="l14.92" class="difflineminus">-}</span>
<a href="#l14.93"></a><span id="l14.93" class="difflineminus">-</span>
<a href="#l14.94"></a><span id="l14.94" class="difflineminus">-function createElement(tagName, textContent, opt_attributes, opt_copyData) {</span>
<a href="#l14.95"></a><span id="l14.95" class="difflineminus">-  if (opt_attributes == null)</span>
<a href="#l14.96"></a><span id="l14.96" class="difflineminus">-    opt_attributes = {};</span>
<a href="#l14.97"></a><span id="l14.97" class="difflineminus">-  let elem = document.createElement(tagName);</span>
<a href="#l14.98"></a><span id="l14.98" class="difflineminus">-  elem.textContent = textContent;</span>
<a href="#l14.99"></a><span id="l14.99" class="difflineminus">-  for (let key in opt_attributes) {</span>
<a href="#l14.100"></a><span id="l14.100" class="difflineminus">-    elem.setAttribute(key, &quot;&quot; + opt_attributes[key]);</span>
<a href="#l14.101"></a><span id="l14.101" class="difflineminus">-  }</span>
<a href="#l14.102"></a><span id="l14.102" class="difflineminus">-</span>
<a href="#l14.103"></a><span id="l14.103" class="difflineminus">-  if (opt_copyData != null) {</span>
<a href="#l14.104"></a><span id="l14.104" class="difflineminus">-    elem.dataset.copyData = opt_copyData;</span>
<a href="#l14.105"></a><span id="l14.105" class="difflineminus">-  }</span>
<a href="#l14.106"></a><span id="l14.106" class="difflineminus">-</span>
<a href="#l14.107"></a><span id="l14.107" class="difflineminus">-  return elem;</span>
<a href="#l14.108"></a><span id="l14.108" class="difflineminus">-}</span>
<a href="#l14.109"></a><span id="l14.109" class="difflineminus">-</span>
<a href="#l14.110"></a><span id="l14.110" class="difflineminus">-function appendChildren(parentElem, childNodes) {</span>
<a href="#l14.111"></a><span id="l14.111" class="difflineminus">-  for (let i = 0; i &lt; childNodes.length; i++)</span>
<a href="#l14.112"></a><span id="l14.112" class="difflineminus">-    parentElem.appendChild(childNodes[i]);</span>
<a href="#l14.113"></a><span id="l14.113" class="difflineminus">-}</span>
<a href="#l14.114"></a><span id="l14.114" class="difflineminus">-</span>
<a href="#l14.115"></a><span id="l14.115" class="difflineminus">-function openProfileDirectory() {</span>
<a href="#l14.116"></a><span id="l14.116" class="difflineminus">-  // Get the profile directory.</span>
<a href="#l14.117"></a><span id="l14.117" class="difflineminus">-  let currProfD = Services.dirsvc.get(&quot;ProfD&quot;, Ci.nsIFile);</span>
<a href="#l14.118"></a><span id="l14.118" class="difflineminus">-  let profileDir = currProfD.path;</span>
<a href="#l14.119"></a><span id="l14.119" class="difflineminus">-</span>
<a href="#l14.120"></a><span id="l14.120" class="difflineminus">-  // Show the profile directory.</span>
<a href="#l14.121"></a><span id="l14.121" class="difflineminus">-  let nsLocalFile = Components.Constructor(&quot;@mozilla.org/file/local;1&quot;,</span>
<a href="#l14.122"></a><span id="l14.122" class="difflineminus">-                                           &quot;nsILocalFile&quot;, &quot;initWithPath&quot;);</span>
<a href="#l14.123"></a><span id="l14.123" class="difflineminus">-  new nsLocalFile(profileDir).reveal();</span>
<a href="#l14.124"></a><span id="l14.124" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1">deleted file mode 100644</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineminus">--- a/mail/components/about-support/content/js.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineplus">+++ /dev/null</span>
<a href="#l15.4"></a><span id="l15.4" class="difflineat">@@ -1,12 +0,0 @@</span>
<a href="#l15.5"></a><span id="l15.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l15.6"></a><span id="l15.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l15.7"></a><span id="l15.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l15.8"></a><span id="l15.8" class="difflineminus">-</span>
<a href="#l15.9"></a><span id="l15.9" class="difflineminus">-&quot;use strict&quot;;</span>
<a href="#l15.10"></a><span id="l15.10" class="difflineminus">-</span>
<a href="#l15.11"></a><span id="l15.11" class="difflineminus">- function populateJavaScriptSection() {</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-  let enabled = window.QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineminus">-        .getInterface(Ci.nsIDOMWindowUtils)</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineminus">-        .isIncrementalGCEnabled();</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineminus">-  document.getElementById(&quot;javascript-incremental-gc&quot;).textContent = enabled ? &quot;1&quot; : &quot;0&quot;;</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1">deleted file mode 100644</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineminus">--- a/mail/components/about-support/content/libversions.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineplus">+++ /dev/null</span>
<a href="#l16.4"></a><span id="l16.4" class="difflineat">@@ -1,40 +0,0 @@</span>
<a href="#l16.5"></a><span id="l16.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l16.6"></a><span id="l16.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l16.7"></a><span id="l16.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l16.8"></a><span id="l16.8" class="difflineminus">-</span>
<a href="#l16.9"></a><span id="l16.9" class="difflineminus">-&quot;use strict&quot;;</span>
<a href="#l16.10"></a><span id="l16.10" class="difflineminus">-</span>
<a href="#l16.11"></a><span id="l16.11" class="difflineminus">-function populateLibVersionsSection() {</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-  function pushInfoRow(table, name, value, value2)</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">-  {</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineminus">-    table.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineminus">-      createElement(&quot;td&quot;, name),</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineminus">-      createElement(&quot;td&quot;, value),</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineminus">-      createElement(&quot;td&quot;, value2),</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineminus">-    ]));</span>
<a href="#l16.19"></a><span id="l16.19" class="difflineminus">-  }</span>
<a href="#l16.20"></a><span id="l16.20" class="difflineminus">-</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineminus">-  var v = null;</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineminus">-  try { // just to be safe</span>
<a href="#l16.23"></a><span id="l16.23" class="difflineminus">-    v = Cc[&quot;@mozilla.org/security/nssversion;1&quot;].getService(Ci.nsINSSVersion);</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineminus">-  } catch(e) {}</span>
<a href="#l16.25"></a><span id="l16.25" class="difflineminus">-  if (!v)</span>
<a href="#l16.26"></a><span id="l16.26" class="difflineminus">-    return;</span>
<a href="#l16.27"></a><span id="l16.27" class="difflineminus">-</span>
<a href="#l16.28"></a><span id="l16.28" class="difflineminus">-  let bundle = Services.strings.createBundle(&quot;chrome://global/locale/aboutSupport.properties&quot;);</span>
<a href="#l16.29"></a><span id="l16.29" class="difflineminus">-  let libversions_tbody = document.getElementById(&quot;libversions-tbody&quot;);</span>
<a href="#l16.30"></a><span id="l16.30" class="difflineminus">-</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineminus">-  let trLibs = [];</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineminus">-  trLibs.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l16.33"></a><span id="l16.33" class="difflineminus">-    createElement(&quot;th&quot;, &quot;&quot;),</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineminus">-    createElement(&quot;th&quot;, bundle.GetStringFromName(&quot;minLibVersions&quot;)),</span>
<a href="#l16.35"></a><span id="l16.35" class="difflineminus">-    createElement(&quot;th&quot;, bundle.GetStringFromName(&quot;loadedLibVersions&quot;)),</span>
<a href="#l16.36"></a><span id="l16.36" class="difflineminus">-  ]));</span>
<a href="#l16.37"></a><span id="l16.37" class="difflineminus">-  pushInfoRow(trLibs, &quot;NSPR&quot;, v.NSPR_MinVersion, v.NSPR_Version);</span>
<a href="#l16.38"></a><span id="l16.38" class="difflineminus">-  pushInfoRow(trLibs, &quot;NSS&quot;, v.NSS_MinVersion, v.NSS_Version);</span>
<a href="#l16.39"></a><span id="l16.39" class="difflineminus">-  pushInfoRow(trLibs, &quot;NSS Util&quot;, v.NSSUTIL_MinVersion, v.NSSUTIL_Version);</span>
<a href="#l16.40"></a><span id="l16.40" class="difflineminus">-  pushInfoRow(trLibs, &quot;NSS SSL&quot;, v.NSSSSL_MinVersion, v.NSSSSL_Version);</span>
<a href="#l16.41"></a><span id="l16.41" class="difflineminus">-  pushInfoRow(trLibs, &quot;NSS S/MIME&quot;, v.NSSSMIME_MinVersion, v.NSSSMIME_Version);</span>
<a href="#l16.42"></a><span id="l16.42" class="difflineminus">-</span>
<a href="#l16.43"></a><span id="l16.43" class="difflineminus">-  appendChildren(libversions_tbody, trLibs);</span>
<a href="#l16.44"></a><span id="l16.44" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1">deleted file mode 100644</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineminus">--- a/mail/components/about-support/content/overlay.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineplus">+++ /dev/null</span>
<a href="#l17.4"></a><span id="l17.4" class="difflineat">@@ -1,14 +0,0 @@</span>
<a href="#l17.5"></a><span id="l17.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l17.6"></a><span id="l17.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l17.7"></a><span id="l17.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l17.8"></a><span id="l17.8" class="difflineminus">-</span>
<a href="#l17.9"></a><span id="l17.9" class="difflineminus">-&quot;use strict&quot;;</span>
<a href="#l17.10"></a><span id="l17.10" class="difflineminus">-</span>
<a href="#l17.11"></a><span id="l17.11" class="difflineminus">-var AboutSupportOverlay = {</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-  openInNewTab: function AboutSupportOverlay_openInNewTab() {</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineminus">-    let tabmail = document.getElementById(&quot;tabmail&quot;);</span>
<a href="#l17.14"></a><span id="l17.14" class="difflineminus">-    tabmail.openTab(&quot;contentTab&quot;,</span>
<a href="#l17.15"></a><span id="l17.15" class="difflineminus">-                    {contentPage: &quot;about:support&quot;,</span>
<a href="#l17.16"></a><span id="l17.16" class="difflineminus">-                     clickHandler: &quot;specialTabs.aboutClickHandler(event);&quot; });</span>
<a href="#l17.17"></a><span id="l17.17" class="difflineminus">-  }</span>
<a href="#l17.18"></a><span id="l17.18" class="difflineminus">-};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1">deleted file mode 100644</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineminus">--- a/mail/components/about-support/content/overlay.xul</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineplus">+++ /dev/null</span>
<a href="#l18.4"></a><span id="l18.4" class="difflineat">@@ -1,21 +0,0 @@</span>
<a href="#l18.5"></a><span id="l18.5" class="difflineminus">-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<a href="#l18.6"></a><span id="l18.6" class="difflineminus">-&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l18.7"></a><span id="l18.7" class="difflineminus">-  - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l18.8"></a><span id="l18.8" class="difflineminus">-  - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l18.9"></a><span id="l18.9" class="difflineminus">-</span>
<a href="#l18.10"></a><span id="l18.10" class="difflineminus">-&lt;!DOCTYPE overlay [</span>
<a href="#l18.11"></a><span id="l18.11" class="difflineminus">-&lt;!ENTITY % baseMenuOverlayDTD SYSTEM &quot;chrome://messenger/locale/baseMenuOverlay.dtd&quot;&gt; %baseMenuOverlayDTD;</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-]&gt;</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineminus">-</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineminus">-&lt;overlay id=&quot;tb-about-support-overlay&quot;</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineminus">-         xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l18.16"></a><span id="l18.16" class="difflineminus">-  &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://messenger/content/about-support/overlay.js&quot; /&gt;</span>
<a href="#l18.17"></a><span id="l18.17" class="difflineminus">-  &lt;menupopup id=&quot;menu_HelpPopup&quot;&gt;</span>
<a href="#l18.18"></a><span id="l18.18" class="difflineminus">-    &lt;menuitem id=&quot;aboutsupport_open&quot;</span>
<a href="#l18.19"></a><span id="l18.19" class="difflineminus">-              label=&quot;&amp;helpTroubleshootingInfo.label;&quot;</span>
<a href="#l18.20"></a><span id="l18.20" class="difflineminus">-              accesskey=&quot;&amp;helpTroubleshootingInfo.accesskey;&quot;</span>
<a href="#l18.21"></a><span id="l18.21" class="difflineminus">-              insertafter=&quot;menu_openHelp&quot;</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineminus">-              oncommand=&quot;AboutSupportOverlay.openInNewTab();&quot; /&gt;</span>
<a href="#l18.23"></a><span id="l18.23" class="difflineminus">-  &lt;/menupopup&gt;</span>
<a href="#l18.24"></a><span id="l18.24" class="difflineminus">-</span>
<a href="#l18.25"></a><span id="l18.25" class="difflineminus">-&lt;/overlay&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1">deleted file mode 100644</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineminus">--- a/mail/components/about-support/content/prefs.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineplus">+++ /dev/null</span>
<a href="#l19.4"></a><span id="l19.4" class="difflineat">@@ -1,149 +0,0 @@</span>
<a href="#l19.5"></a><span id="l19.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l19.6"></a><span id="l19.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l19.7"></a><span id="l19.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l19.8"></a><span id="l19.8" class="difflineminus">-</span>
<a href="#l19.9"></a><span id="l19.9" class="difflineminus">-&quot;use strict&quot;;</span>
<a href="#l19.10"></a><span id="l19.10" class="difflineminus">-</span>
<a href="#l19.11"></a><span id="l19.11" class="difflineminus">-var ELLIPSIS = Services.prefs.getComplexValue(&quot;intl.ellipsis&quot;,</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-                                                Ci.nsIPrefLocalizedString).data;</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineminus">-</span>
<a href="#l19.14"></a><span id="l19.14" class="difflineminus">-// We use a preferences whitelist to make sure we only show preferences that</span>
<a href="#l19.15"></a><span id="l19.15" class="difflineminus">-// are useful for support and won't compromise the user's privacy.  Note that</span>
<a href="#l19.16"></a><span id="l19.16" class="difflineminus">-// entries are *prefixes*: for example, &quot;accessibility.&quot; applies to all prefs</span>
<a href="#l19.17"></a><span id="l19.17" class="difflineminus">-// under the &quot;accessibility.*&quot; branch.</span>
<a href="#l19.18"></a><span id="l19.18" class="difflineminus">-var PREFS_WHITELIST = [</span>
<a href="#l19.19"></a><span id="l19.19" class="difflineminus">-  // core prefs</span>
<a href="#l19.20"></a><span id="l19.20" class="difflineminus">-  &quot;accessibility.&quot;,</span>
<a href="#l19.21"></a><span id="l19.21" class="difflineminus">-  &quot;browser.cache.&quot;,</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineminus">-  &quot;browser.display.&quot;,</span>
<a href="#l19.23"></a><span id="l19.23" class="difflineminus">-  &quot;browser.fixup.&quot;,</span>
<a href="#l19.24"></a><span id="l19.24" class="difflineminus">-  &quot;browser.history_expire_&quot;,</span>
<a href="#l19.25"></a><span id="l19.25" class="difflineminus">-  &quot;browser.link.open_newwindow&quot;,</span>
<a href="#l19.26"></a><span id="l19.26" class="difflineminus">-  &quot;browser.mousewheel.&quot;,</span>
<a href="#l19.27"></a><span id="l19.27" class="difflineminus">-  &quot;browser.places.&quot;,</span>
<a href="#l19.28"></a><span id="l19.28" class="difflineminus">-  &quot;browser.privatebrowsing.&quot;,</span>
<a href="#l19.29"></a><span id="l19.29" class="difflineminus">-  &quot;browser.search.context.loadInBackground&quot;,</span>
<a href="#l19.30"></a><span id="l19.30" class="difflineminus">-  &quot;browser.search.log&quot;,</span>
<a href="#l19.31"></a><span id="l19.31" class="difflineminus">-  &quot;browser.search.openintab&quot;,</span>
<a href="#l19.32"></a><span id="l19.32" class="difflineminus">-  &quot;browser.search.param&quot;,</span>
<a href="#l19.33"></a><span id="l19.33" class="difflineminus">-  &quot;browser.search.searchEnginesURL&quot;,</span>
<a href="#l19.34"></a><span id="l19.34" class="difflineminus">-  &quot;browser.search.suggest.enabled&quot;,</span>
<a href="#l19.35"></a><span id="l19.35" class="difflineminus">-  &quot;browser.search.update&quot;,</span>
<a href="#l19.36"></a><span id="l19.36" class="difflineminus">-  &quot;browser.search.useDBForOrder&quot;,</span>
<a href="#l19.37"></a><span id="l19.37" class="difflineminus">-  &quot;browser.sessionstore.&quot;,</span>
<a href="#l19.38"></a><span id="l19.38" class="difflineminus">-  &quot;browser.startup.homepage&quot;,</span>
<a href="#l19.39"></a><span id="l19.39" class="difflineminus">-  &quot;browser.tabs.&quot;,</span>
<a href="#l19.40"></a><span id="l19.40" class="difflineminus">-  &quot;browser.zoom.&quot;,</span>
<a href="#l19.41"></a><span id="l19.41" class="difflineminus">-  &quot;dom.&quot;,</span>
<a href="#l19.42"></a><span id="l19.42" class="difflineminus">-  &quot;extensions.checkCompatibility&quot;,</span>
<a href="#l19.43"></a><span id="l19.43" class="difflineminus">-  &quot;extensions.lastAppVersion&quot;,</span>
<a href="#l19.44"></a><span id="l19.44" class="difflineminus">-  &quot;font.&quot;,</span>
<a href="#l19.45"></a><span id="l19.45" class="difflineminus">-  &quot;general.autoScroll&quot;,</span>
<a href="#l19.46"></a><span id="l19.46" class="difflineminus">-  &quot;general.useragent.&quot;,</span>
<a href="#l19.47"></a><span id="l19.47" class="difflineminus">-  &quot;gfx.&quot;,</span>
<a href="#l19.48"></a><span id="l19.48" class="difflineminus">-  &quot;html5.&quot;,</span>
<a href="#l19.49"></a><span id="l19.49" class="difflineminus">-  &quot;image.mem.&quot;,</span>
<a href="#l19.50"></a><span id="l19.50" class="difflineminus">-  &quot;javascript.&quot;,</span>
<a href="#l19.51"></a><span id="l19.51" class="difflineminus">-  &quot;keyword.&quot;,</span>
<a href="#l19.52"></a><span id="l19.52" class="difflineminus">-  &quot;layers.&quot;,</span>
<a href="#l19.53"></a><span id="l19.53" class="difflineminus">-  &quot;layout.css.dpi&quot;,</span>
<a href="#l19.54"></a><span id="l19.54" class="difflineminus">-  &quot;media.&quot;,</span>
<a href="#l19.55"></a><span id="l19.55" class="difflineminus">-  &quot;mousewheel.&quot;,</span>
<a href="#l19.56"></a><span id="l19.56" class="difflineminus">-  &quot;network.&quot;,</span>
<a href="#l19.57"></a><span id="l19.57" class="difflineminus">-  &quot;permissions.default.image&quot;,</span>
<a href="#l19.58"></a><span id="l19.58" class="difflineminus">-  &quot;places.&quot;,</span>
<a href="#l19.59"></a><span id="l19.59" class="difflineminus">-  &quot;plugin.&quot;,</span>
<a href="#l19.60"></a><span id="l19.60" class="difflineminus">-  &quot;plugins.&quot;,</span>
<a href="#l19.61"></a><span id="l19.61" class="difflineminus">-  &quot;print.&quot;,</span>
<a href="#l19.62"></a><span id="l19.62" class="difflineminus">-  &quot;privacy.&quot;,</span>
<a href="#l19.63"></a><span id="l19.63" class="difflineminus">-  &quot;security.&quot;,</span>
<a href="#l19.64"></a><span id="l19.64" class="difflineminus">-  &quot;svg.&quot;,</span>
<a href="#l19.65"></a><span id="l19.65" class="difflineminus">-  &quot;toolkit.startup.recent_crashes&quot;,</span>
<a href="#l19.66"></a><span id="l19.66" class="difflineminus">-  &quot;webgl.&quot;,</span>
<a href="#l19.67"></a><span id="l19.67" class="difflineminus">-  // mail-specific prefs</span>
<a href="#l19.68"></a><span id="l19.68" class="difflineminus">-  &quot;mail.openMessageBehavior.&quot;,</span>
<a href="#l19.69"></a><span id="l19.69" class="difflineminus">-  &quot;mail.spotlight.&quot;,</span>
<a href="#l19.70"></a><span id="l19.70" class="difflineminus">-  &quot;mail.winsearch.&quot;,</span>
<a href="#l19.71"></a><span id="l19.71" class="difflineminus">-  &quot;mailnews.database.&quot;,</span>
<a href="#l19.72"></a><span id="l19.72" class="difflineminus">-];</span>
<a href="#l19.73"></a><span id="l19.73" class="difflineminus">-</span>
<a href="#l19.74"></a><span id="l19.74" class="difflineminus">-// The blacklist, unlike the whitelist, is a list of regular expressions.</span>
<a href="#l19.75"></a><span id="l19.75" class="difflineminus">-var PREFS_BLACKLIST = [</span>
<a href="#l19.76"></a><span id="l19.76" class="difflineminus">-  /^network[.]proxy[.]/,</span>
<a href="#l19.77"></a><span id="l19.77" class="difflineminus">-  /[.]print_to_filename$/,</span>
<a href="#l19.78"></a><span id="l19.78" class="difflineminus">-  /[.]lastFolderIndexedUri/,</span>
<a href="#l19.79"></a><span id="l19.79" class="difflineminus">-];</span>
<a href="#l19.80"></a><span id="l19.80" class="difflineminus">-</span>
<a href="#l19.81"></a><span id="l19.81" class="difflineminus">-function populatePreferencesSection() {</span>
<a href="#l19.82"></a><span id="l19.82" class="difflineminus">-  let modifiedPrefs = getModifiedPrefs();</span>
<a href="#l19.83"></a><span id="l19.83" class="difflineminus">-</span>
<a href="#l19.84"></a><span id="l19.84" class="difflineminus">-  function comparePrefs(pref1, pref2) {</span>
<a href="#l19.85"></a><span id="l19.85" class="difflineminus">-    return pref1.name.localeCompare(pref2.name);</span>
<a href="#l19.86"></a><span id="l19.86" class="difflineminus">-  }</span>
<a href="#l19.87"></a><span id="l19.87" class="difflineminus">-</span>
<a href="#l19.88"></a><span id="l19.88" class="difflineminus">-  modifiedPrefs.sort(comparePrefs);</span>
<a href="#l19.89"></a><span id="l19.89" class="difflineminus">-</span>
<a href="#l19.90"></a><span id="l19.90" class="difflineminus">-  let trPrefs = [];</span>
<a href="#l19.91"></a><span id="l19.91" class="difflineminus">-  modifiedPrefs.forEach(function (pref) {</span>
<a href="#l19.92"></a><span id="l19.92" class="difflineminus">-    let tdName = createElement(&quot;td&quot;, pref.name, {&quot;class&quot;: &quot;pref-name&quot;});</span>
<a href="#l19.93"></a><span id="l19.93" class="difflineminus">-    let tdValue = createElement(&quot;td&quot;, formatPrefValue(pref.value),</span>
<a href="#l19.94"></a><span id="l19.94" class="difflineminus">-                                {&quot;class&quot;: &quot;pref-value&quot;});</span>
<a href="#l19.95"></a><span id="l19.95" class="difflineminus">-    let tr = createParentElement(&quot;tr&quot;, [tdName, tdValue]);</span>
<a href="#l19.96"></a><span id="l19.96" class="difflineminus">-    trPrefs.push(tr);</span>
<a href="#l19.97"></a><span id="l19.97" class="difflineminus">-  });</span>
<a href="#l19.98"></a><span id="l19.98" class="difflineminus">-</span>
<a href="#l19.99"></a><span id="l19.99" class="difflineminus">-  appendChildren(document.getElementById(&quot;prefs-tbody&quot;), trPrefs);</span>
<a href="#l19.100"></a><span id="l19.100" class="difflineminus">-}</span>
<a href="#l19.101"></a><span id="l19.101" class="difflineminus">-</span>
<a href="#l19.102"></a><span id="l19.102" class="difflineminus">-function formatPrefValue(prefValue) {</span>
<a href="#l19.103"></a><span id="l19.103" class="difflineminus">-  // Some pref values are really long and don't have spaces.  This can cause</span>
<a href="#l19.104"></a><span id="l19.104" class="difflineminus">-  // problems when copying and pasting into some WYSIWYG editors.  In general</span>
<a href="#l19.105"></a><span id="l19.105" class="difflineminus">-  // the exact contents of really long pref values aren't particularly useful,</span>
<a href="#l19.106"></a><span id="l19.106" class="difflineminus">-  // so we truncate them to some reasonable length.</span>
<a href="#l19.107"></a><span id="l19.107" class="difflineminus">-  let maxPrefValueLen = 120;</span>
<a href="#l19.108"></a><span id="l19.108" class="difflineminus">-  let text = &quot;&quot; + prefValue;</span>
<a href="#l19.109"></a><span id="l19.109" class="difflineminus">-  if (text.length &gt; maxPrefValueLen)</span>
<a href="#l19.110"></a><span id="l19.110" class="difflineminus">-    text = text.substring(0, maxPrefValueLen) + ELLIPSIS;</span>
<a href="#l19.111"></a><span id="l19.111" class="difflineminus">-  return text;</span>
<a href="#l19.112"></a><span id="l19.112" class="difflineminus">-}</span>
<a href="#l19.113"></a><span id="l19.113" class="difflineminus">-</span>
<a href="#l19.114"></a><span id="l19.114" class="difflineminus">-function getModifiedPrefs() {</span>
<a href="#l19.115"></a><span id="l19.115" class="difflineminus">-  // We use the low-level prefs API to identify prefs that have been</span>
<a href="#l19.116"></a><span id="l19.116" class="difflineminus">-  // modified, rather than extApplication.js::prefs.all since the latter is</span>
<a href="#l19.117"></a><span id="l19.117" class="difflineminus">-  // much, much slower. extApplication.js::prefs.all also gets slower each</span>
<a href="#l19.118"></a><span id="l19.118" class="difflineminus">-  // time it's called.  See bug 517312.</span>
<a href="#l19.119"></a><span id="l19.119" class="difflineminus">-  function GetPref(name) {</span>
<a href="#l19.120"></a><span id="l19.120" class="difflineminus">-    let type = Services.prefs.getPrefType(name);</span>
<a href="#l19.121"></a><span id="l19.121" class="difflineminus">-    switch (type) {</span>
<a href="#l19.122"></a><span id="l19.122" class="difflineminus">-      case Services.prefs.PREF_STRING:</span>
<a href="#l19.123"></a><span id="l19.123" class="difflineminus">-        return Services.prefs.getCharPref(name);</span>
<a href="#l19.124"></a><span id="l19.124" class="difflineminus">-      case Services.prefs.PREF_INT:</span>
<a href="#l19.125"></a><span id="l19.125" class="difflineminus">-        return Services.prefs.getIntPref(name);</span>
<a href="#l19.126"></a><span id="l19.126" class="difflineminus">-      case Services.prefs.PREF_BOOL:</span>
<a href="#l19.127"></a><span id="l19.127" class="difflineminus">-        return Services.prefs.getBoolPref(name);</span>
<a href="#l19.128"></a><span id="l19.128" class="difflineminus">-      default:</span>
<a href="#l19.129"></a><span id="l19.129" class="difflineminus">-        throw new Error(&quot;Unknown type&quot;);</span>
<a href="#l19.130"></a><span id="l19.130" class="difflineminus">-    }</span>
<a href="#l19.131"></a><span id="l19.131" class="difflineminus">-  }</span>
<a href="#l19.132"></a><span id="l19.132" class="difflineminus">-</span>
<a href="#l19.133"></a><span id="l19.133" class="difflineminus">-  let prefNames = getWhitelistedPrefNames();</span>
<a href="#l19.134"></a><span id="l19.134" class="difflineminus">-  prefNames = prefNames.filter(prefName =&gt; (Services.prefs.prefHasUserValue(prefName)</span>
<a href="#l19.135"></a><span id="l19.135" class="difflineminus">-                                            &amp;&amp; !isBlacklisted(prefName)));</span>
<a href="#l19.136"></a><span id="l19.136" class="difflineminus">-  let prefs = [];</span>
<a href="#l19.137"></a><span id="l19.137" class="difflineminus">-  prefNames.forEach(prefName =&gt;</span>
<a href="#l19.138"></a><span id="l19.138" class="difflineminus">-                    prefs.push({ name: prefName, value: GetPref(prefName) }));</span>
<a href="#l19.139"></a><span id="l19.139" class="difflineminus">-  return prefs;</span>
<a href="#l19.140"></a><span id="l19.140" class="difflineminus">-}</span>
<a href="#l19.141"></a><span id="l19.141" class="difflineminus">-</span>
<a href="#l19.142"></a><span id="l19.142" class="difflineminus">-function getWhitelistedPrefNames() {</span>
<a href="#l19.143"></a><span id="l19.143" class="difflineminus">-  let results = [];</span>
<a href="#l19.144"></a><span id="l19.144" class="difflineminus">-  PREFS_WHITELIST.forEach(function (prefStem) {</span>
<a href="#l19.145"></a><span id="l19.145" class="difflineminus">-    let prefNames = Services.prefs.getChildList(prefStem, {});</span>
<a href="#l19.146"></a><span id="l19.146" class="difflineminus">-    results = results.concat(prefNames);</span>
<a href="#l19.147"></a><span id="l19.147" class="difflineminus">-  });</span>
<a href="#l19.148"></a><span id="l19.148" class="difflineminus">-  return results;</span>
<a href="#l19.149"></a><span id="l19.149" class="difflineminus">-}</span>
<a href="#l19.150"></a><span id="l19.150" class="difflineminus">-</span>
<a href="#l19.151"></a><span id="l19.151" class="difflineminus">-function isBlacklisted(prefName) {</span>
<a href="#l19.152"></a><span id="l19.152" class="difflineminus">-  return PREFS_BLACKLIST.some(re =&gt; re.test(prefName));</span>
<a href="#l19.153"></a><span id="l19.153" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1">deleted file mode 100644</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineminus">--- a/mail/components/about-support/content/show-private.css</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineplus">+++ /dev/null</span>
<a href="#l20.4"></a><span id="l20.4" class="difflineat">@@ -1,7 +0,0 @@</span>
<a href="#l20.5"></a><span id="l20.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l20.6"></a><span id="l20.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l20.7"></a><span id="l20.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l20.8"></a><span id="l20.8" class="difflineminus">-</span>
<a href="#l20.9"></a><span id="l20.9" class="difflineminus">-.data-public {</span>
<a href="#l20.10"></a><span id="l20.10" class="difflineminus">-  display: none;</span>
<a href="#l20.11"></a><span id="l20.11" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mail/components/about-support/jar.mn</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mail/components/about-support/jar.mn</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -1,23 +1,10 @@</span>
<a href="#l21.4"></a><span id="l21.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l21.5"></a><span id="l21.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l21.6"></a><span id="l21.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l21.7"></a><span id="l21.7"> </span>
<a href="#l21.8"></a><span id="l21.8"> messenger.jar:</span>
<a href="#l21.9"></a><span id="l21.9" class="difflineminus">-%   overlay chrome://messenger/content/messenger.xul           chrome://messenger/content/about-support/overlay.xul</span>
<a href="#l21.10"></a><span id="l21.10">     content/messenger/about-support/hide-private.css           (content/hide-private.css)</span>
<a href="#l21.11"></a><span id="l21.11" class="difflineminus">-    content/messenger/about-support/show-private.css           (content/show-private.css)</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-    content/messenger/about-support/init.js                    (content/init.js)</span>
<a href="#l21.13"></a><span id="l21.13">     content/messenger/about-support/accounts.js                (content/accounts.js)</span>
<a href="#l21.14"></a><span id="l21.14" class="difflineminus">-#ifdef MOZ_CRASHREPORTER</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineminus">-    content/messenger/about-support/crashes.js                 (content/crashes.js)</span>
<a href="#l21.16"></a><span id="l21.16" class="difflineminus">-#endif</span>
<a href="#l21.17"></a><span id="l21.17" class="difflineminus">-    content/messenger/about-support/extensions.js              (content/extensions.js)</span>
<a href="#l21.18"></a><span id="l21.18" class="difflineminus">-    content/messenger/about-support/prefs.js                   (content/prefs.js)</span>
<a href="#l21.19"></a><span id="l21.19" class="difflineminus">-    content/messenger/about-support/gfx.js                     (content/gfx.js)</span>
<a href="#l21.20"></a><span id="l21.20" class="difflineminus">-    content/messenger/about-support/js.js                      (content/js.js)</span>
<a href="#l21.21"></a><span id="l21.21" class="difflineminus">-    content/messenger/about-support/a11y.js                    (content/a11y.js)</span>
<a href="#l21.22"></a><span id="l21.22" class="difflineminus">-    content/messenger/about-support/libversions.js             (content/libversions.js)</span>
<a href="#l21.23"></a><span id="l21.23">     content/messenger/about-support/export.js                  (content/export.js)</span>
<a href="#l21.24"></a><span id="l21.24"> *   content/messenger/about-support/aboutSupport.xhtml         (content/aboutSupport.xhtml)</span>
<a href="#l21.25"></a><span id="l21.25" class="difflineminus">-    content/messenger/about-support/overlay.js                 (content/overlay.js)</span>
<a href="#l21.26"></a><span id="l21.26" class="difflineminus">-    content/messenger/about-support/overlay.xul                (content/overlay.xul)</span>
<a href="#l21.27"></a><span id="l21.27" class="difflineplus">+    content/messenger/about-support/aboutSupport.js            (content/aboutSupport.js)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mail/components/about-support/moz.build</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mail/components/about-support/moz.build</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -1,17 +1,13 @@</span>
<a href="#l22.4"></a><span id="l22.4"> # vim: set filetype=python:</span>
<a href="#l22.5"></a><span id="l22.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l22.6"></a><span id="l22.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l22.7"></a><span id="l22.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l22.8"></a><span id="l22.8"> </span>
<a href="#l22.9"></a><span id="l22.9" class="difflineminus">-EXTRA_JS_MODULES += [</span>
<a href="#l22.10"></a><span id="l22.10" class="difflineminus">-    'aboutSupport.js',</span>
<a href="#l22.11"></a><span id="l22.11" class="difflineminus">-]</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-</span>
<a href="#l22.13"></a><span id="l22.13"> if CONFIG['MOZ_WIDGET_TOOLKIT'] == 'windows':</span>
<a href="#l22.14"></a><span id="l22.14">     EXTRA_JS_MODULES += ['aboutSupportWin32.js']</span>
<a href="#l22.15"></a><span id="l22.15"> elif CONFIG['MOZ_WIDGET_TOOLKIT'] == 'cocoa':</span>
<a href="#l22.16"></a><span id="l22.16">     EXTRA_JS_MODULES += ['aboutSupportMac.js']</span>
<a href="#l22.17"></a><span id="l22.17"> else:</span>
<a href="#l22.18"></a><span id="l22.18">     EXTRA_JS_MODULES += ['aboutSupportUnix.js']</span>
<a href="#l22.19"></a><span id="l22.19"> </span>
<a href="#l22.20"></a><span id="l22.20"> JAR_MANIFESTS += ['jar.mn']</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mail/themes/linux/jar.mn</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mail/themes/linux/jar.mn</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -1,17 +1,17 @@</span>
<a href="#l23.4"></a><span id="l23.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l23.5"></a><span id="l23.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l23.6"></a><span id="l23.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l23.7"></a><span id="l23.7"> </span>
<a href="#l23.8"></a><span id="l23.8"> classic.jar:</span>
<a href="#l23.9"></a><span id="l23.9">   skin/classic/communicator/smileys.css                       (mail/smileys.css)</span>
<a href="#l23.10"></a><span id="l23.10"> % skin messenger classic/1.0 %skin/classic/messenger/</span>
<a href="#l23.11"></a><span id="l23.11">   skin/classic/messenger/primaryToolbar.css                   (mail/primaryToolbar.css)</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-  skin/classic/messenger/aboutSupport.css                     (../windows/mail/aboutSupport.css)</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+  skin/classic/messenger/aboutSupport.css                     (../shared/mail/aboutSupport.css)</span>
<a href="#l23.14"></a><span id="l23.14">   skin/classic/messenger/accountCentral.css                   (mail/accountCentral.css)</span>
<a href="#l23.15"></a><span id="l23.15">   skin/classic/messenger/accountCreation.css                  (mail/accountCreation.css)</span>
<a href="#l23.16"></a><span id="l23.16">   skin/classic/messenger/accountManage.css                    (mail/accountManage.css)</span>
<a href="#l23.17"></a><span id="l23.17">   skin/classic/messenger/accountWizard.css                    (mail/accountWizard.css)</span>
<a href="#l23.18"></a><span id="l23.18"> * skin/classic/messenger/chat.css                             (mail/chat.css)</span>
<a href="#l23.19"></a><span id="l23.19">   skin/classic/messenger/userIcon.png                         (mail/userIcon.png)</span>
<a href="#l23.20"></a><span id="l23.20"> * skin/classic/messenger/imAccounts.css                       (../../components/im/themes/imAccounts.css)</span>
<a href="#l23.21"></a><span id="l23.21"> * skin/classic/messenger/imAccountWizard.css                  (../../components/im/themes/imAccountWizard.css)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mail/themes/osx/jar.mn</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mail/themes/osx/jar.mn</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -6,17 +6,17 @@ classic.jar:</span>
<a href="#l24.4"></a><span id="l24.4"> % skin messenger classic/1.0 %skin/classic/messenger/</span>
<a href="#l24.5"></a><span id="l24.5">   skin/classic/messenger/glodaFacetView.css                      (mail/glodaFacetView.css)</span>
<a href="#l24.6"></a><span id="l24.6">   skin/classic/messenger/multimessageview.css                    (mail/multimessageview.css)</span>
<a href="#l24.7"></a><span id="l24.7">   skin/classic/messenger/dialogs.css                             (mail/dialogs.css)</span>
<a href="#l24.8"></a><span id="l24.8">   skin/classic/messenger/messenger.css                           (mail/messenger.css)</span>
<a href="#l24.9"></a><span id="l24.9">   skin/classic/messenger/aboutNetError.css                       (../shared/mail/aboutNetError.css)</span>
<a href="#l24.10"></a><span id="l24.10">   skin/classic/messenger/messengerLWTheme.css                    (../shared/mail/messengerLWTheme.css)</span>
<a href="#l24.11"></a><span id="l24.11">   skin/classic/messenger/primaryToolbar.css                      (mail/primaryToolbar.css)</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-  skin/classic/messenger/aboutSupport.css                        (../windows/mail/aboutSupport.css)</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+  skin/classic/messenger/aboutSupport.css                        (../shared/mail/aboutSupport.css)</span>
<a href="#l24.14"></a><span id="l24.14">   skin/classic/messenger/accountCentral.css                      (mail/accountCentral.css)</span>
<a href="#l24.15"></a><span id="l24.15">   skin/classic/messenger/accountCreation.css                     (mail/accountCreation.css)</span>
<a href="#l24.16"></a><span id="l24.16">   skin/classic/messenger/accountManage.css                       (mail/accountManage.css)</span>
<a href="#l24.17"></a><span id="l24.17">   skin/classic/messenger/accountWizard.css                       (mail/accountWizard.css)</span>
<a href="#l24.18"></a><span id="l24.18"> * skin/classic/messenger/chat.css                                (mail/chat.css)</span>
<a href="#l24.19"></a><span id="l24.19">   skin/classic/messenger/userIcon.png                            (mail/userIcon.png)</span>
<a href="#l24.20"></a><span id="l24.20">   skin/classic/messenger/noise.png                               (mail/noise.png)</span>
<a href="#l24.21"></a><span id="l24.21"> * skin/classic/messenger/imAccounts.css                          (../../components/im/themes/imAccounts.css)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1">rename from mail/themes/windows/mail/aboutSupport.css</span>
<a href="#l25.2"></a><span id="l25.2">rename to mail/themes/shared/mail/aboutSupport.css</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineminus">--- a/mail/themes/windows/mail/aboutSupport.css</span>
<a href="#l25.4"></a><span id="l25.4" class="difflineplus">+++ b/mail/themes/shared/mail/aboutSupport.css</span>
<a href="#l25.5"></a><span id="l25.5" class="difflineat">@@ -1,12 +1,24 @@</span>
<a href="#l25.6"></a><span id="l25.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l25.7"></a><span id="l25.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l25.8"></a><span id="l25.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l25.9"></a><span id="l25.9"> </span>
<a href="#l25.10"></a><span id="l25.10" class="difflineplus">+.data-public {</span>
<a href="#l25.11"></a><span id="l25.11" class="difflineplus">+  display: none;</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineplus">+}</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+</span>
<a href="#l25.14"></a><span id="l25.14" class="difflineplus">+#safe-mode-box &gt; h3 {</span>
<a href="#l25.15"></a><span id="l25.15" class="difflineplus">+  margin-top: 0;</span>
<a href="#l25.16"></a><span id="l25.16" class="difflineplus">+}</span>
<a href="#l25.17"></a><span id="l25.17" class="difflineplus">+</span>
<a href="#l25.18"></a><span id="l25.18" class="difflineplus">+#check-show-private-data {</span>
<a href="#l25.19"></a><span id="l25.19" class="difflineplus">+  margin-bottom: -0.5em;</span>
<a href="#l25.20"></a><span id="l25.20" class="difflineplus">+}</span>
<a href="#l25.21"></a><span id="l25.21" class="difflineplus">+</span>
<a href="#l25.22"></a><span id="l25.22"> .gray-text {</span>
<a href="#l25.23"></a><span id="l25.23">   color: #888;</span>
<a href="#l25.24"></a><span id="l25.24"> }</span>
<a href="#l25.25"></a><span id="l25.25"> </span>
<a href="#l25.26"></a><span id="l25.26"> .thead-level2 &gt; th {</span>
<a href="#l25.27"></a><span id="l25.27">   background-color: #ebebeb;</span>
<a href="#l25.28"></a><span id="l25.28">   color: #333;</span>
<a href="#l25.29"></a><span id="l25.29"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mail/themes/windows/jar.mn</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mail/themes/windows/jar.mn</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -24,17 +24,17 @@ classic.jar:</span>
<a href="#l26.4"></a><span id="l26.4">   skin/classic/communicator/icons/smileys/smiley-cool.png          (mail/icons/smiley-cool.png)</span>
<a href="#l26.5"></a><span id="l26.5">   skin/classic/communicator/icons/smileys/smiley-money-mouth.png   (mail/icons/smiley-money-mouth.png)</span>
<a href="#l26.6"></a><span id="l26.6">   skin/classic/communicator/icons/smileys/smiley-foot-in-mouth.png (mail/icons/smiley-foot-in-mouth.png)</span>
<a href="#l26.7"></a><span id="l26.7">   skin/classic/communicator/icons/smileys/smiley-innocent.png      (mail/icons/smiley-innocent.png)</span>
<a href="#l26.8"></a><span id="l26.8">   skin/classic/communicator/icons/smileys/smiley-cry.png           (mail/icons/smiley-cry.png)</span>
<a href="#l26.9"></a><span id="l26.9">   skin/classic/communicator/icons/smileys/smiley-sealed.png        (mail/icons/smiley-sealed.png)</span>
<a href="#l26.10"></a><span id="l26.10"> % skin messenger classic/1.0 %skin/classic/messenger/</span>
<a href="#l26.11"></a><span id="l26.11">   skin/classic/messenger/primaryToolbar.css                   (mail/primaryToolbar.css)</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-  skin/classic/messenger/aboutSupport.css                     (mail/aboutSupport.css)</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+  skin/classic/messenger/aboutSupport.css                     (../shared/mail/aboutSupport.css)</span>
<a href="#l26.14"></a><span id="l26.14">   skin/classic/messenger/accountCentral.css                   (mail/accountCentral.css)</span>
<a href="#l26.15"></a><span id="l26.15">   skin/classic/messenger/accountCreation.css                  (mail/accountCreation.css)</span>
<a href="#l26.16"></a><span id="l26.16">   skin/classic/messenger/accountManage.css                    (mail/accountManage.css)</span>
<a href="#l26.17"></a><span id="l26.17">   skin/classic/messenger/accountWizard.css                    (mail/accountWizard.css)</span>
<a href="#l26.18"></a><span id="l26.18"> * skin/classic/messenger/chat.css                             (mail/chat.css)</span>
<a href="#l26.19"></a><span id="l26.19">   skin/classic/messenger/userIcon.png                         (mail/userIcon.png)</span>
<a href="#l26.20"></a><span id="l26.20"> * skin/classic/messenger/imAccounts.css                       (../../components/im/themes/imAccounts.css)</span>
<a href="#l26.21"></a><span id="l26.21"> * skin/classic/messenger/imAccountWizard.css                  (../../components/im/themes/imAccountWizard.css)</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

