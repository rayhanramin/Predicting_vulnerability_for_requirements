<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 23508:4b2c136f620aef6724029210bdbcb49ad30a5cd2</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 4b2c136f620aef6724029210bdbcb49ad30a5cd2" />
<meta property="og:url" content="/comm-central/rev/4b2c136f620aef6724029210bdbcb49ad30a5cd2" />
<meta property="og:description" content="Bug 1436605 - Replace remaining Components.interface/Components.utils uses with Ci/Cu in mail, chat, common and mailnews. r=jorgk" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 4b2c136f620aef6724029210bdbcb49ad30a5cd2 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/4b2c136f620aef6724029210bdbcb49ad30a5cd2">shortlog</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/4b2c136f620aef6724029210bdbcb49ad30a5cd2">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/4b2c136f620aef6724029210bdbcb49ad30a5cd2">files</a> |
changeset |
<a href="/comm-central/raw-rev/4b2c136f620aef6724029210bdbcb49ad30a5cd2">raw</a>  | <a href="/comm-central/archive/4b2c136f620aef6724029210bdbcb49ad30a5cd2.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1436605">Bug 1436605</a> - Replace remaining Components.interface/Components.utils uses with Ci/Cu in mail, chat, common and mailnews. r=jorgk
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#97;&#99;&#101;&#109;&#97;&#110;&#32;&#60;&#97;&#99;&#101;&#108;&#105;&#115;&#116;&#115;&#64;&#97;&#116;&#108;&#97;&#115;&#46;&#115;&#107;&#62;</td></tr>
<tr><td></td><td class="date age">Mon, 12 Mar 2018 16:32:00 +0100</td></tr>

<tr>
 <td>changeset 23508</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/4b2c136f620aef6724029210bdbcb49ad30a5cd2">4b2c136f620aef6724029210bdbcb49ad30a5cd2</a></td>
</tr>



<tr>
<td>parent 23507</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/c3a61fde32601481c7be55ba15ed60814f093075">c3a61fde32601481c7be55ba15ed60814f093075</a>
</td>
</tr>

<tr>
<td>child 23509</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/8853a3eec03cab09359883f74c1659aaf9241035">8853a3eec03cab09359883f74c1659aaf9241035</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=4b2c136f620aef6724029210bdbcb49ad30a5cd2">14190</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Tue, 13 Mar 2018 16:48:45 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@8853a3eec03c [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=8853a3eec03cab09359883f74c1659aaf9241035">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=8853a3eec03cab09359883f74c1659aaf9241035&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=8853a3eec03cab09359883f74c1659aaf9241035&newProject=comm-central&newRevision=4b2c136f620aef6724029210bdbcb49ad30a5cd2&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=8853a3eec03cab09359883f74c1659aaf9241035&newProject=comm-central&newRevision=4b2c136f620aef6724029210bdbcb49ad30a5cd2&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=8853a3eec03cab09359883f74c1659aaf9241035&newProject=comm-central&newRevision=4b2c136f620aef6724029210bdbcb49ad30a5cd2&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28jorgk%29&revcount=50">jorgk</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1436605">1436605</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1436605">Bug 1436605</a> - Replace remaining Components.interface/Components.utils uses with Ci/Cu in mail, chat, common and mailnews. r=jorgk</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/chat/content/convbrowser.xml">chat/content/convbrowser.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4b2c136f620aef6724029210bdbcb49ad30a5cd2/chat/content/convbrowser.xml">file</a> |
<a href="/comm-central/annotate/4b2c136f620aef6724029210bdbcb49ad30a5cd2/chat/content/convbrowser.xml">annotate</a> |
<a href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/chat/content/convbrowser.xml">diff</a> |
<a href="/comm-central/comparison/4b2c136f620aef6724029210bdbcb49ad30a5cd2/chat/content/convbrowser.xml">comparison</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2/chat/content/convbrowser.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/common/bindings/preferences.xml">common/bindings/preferences.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4b2c136f620aef6724029210bdbcb49ad30a5cd2/common/bindings/preferences.xml">file</a> |
<a href="/comm-central/annotate/4b2c136f620aef6724029210bdbcb49ad30a5cd2/common/bindings/preferences.xml">annotate</a> |
<a href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/common/bindings/preferences.xml">diff</a> |
<a href="/comm-central/comparison/4b2c136f620aef6724029210bdbcb49ad30a5cd2/common/bindings/preferences.xml">comparison</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2/common/bindings/preferences.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/mailWidgets.xml">mail/base/content/mailWidgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/mailWidgets.xml">file</a> |
<a href="/comm-central/annotate/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/mailWidgets.xml">annotate</a> |
<a href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/mailWidgets.xml">diff</a> |
<a href="/comm-central/comparison/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/mailWidgets.xml">comparison</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/mailWidgets.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/mailWindowOverlay.xul">mail/base/content/mailWindowOverlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/mailWindowOverlay.xul">file</a> |
<a href="/comm-central/annotate/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/mailWindowOverlay.xul">annotate</a> |
<a href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/mailWindowOverlay.xul">diff</a> |
<a href="/comm-central/comparison/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/mailWindowOverlay.xul">comparison</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/mailWindowOverlay.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/search.xml">mail/base/content/search.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/search.xml">file</a> |
<a href="/comm-central/annotate/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/search.xml">annotate</a> |
<a href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/search.xml">diff</a> |
<a href="/comm-central/comparison/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/search.xml">comparison</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/search.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/tabmail.xml">mail/base/content/tabmail.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/tabmail.xml">file</a> |
<a href="/comm-central/annotate/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/tabmail.xml">annotate</a> |
<a href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/tabmail.xml">diff</a> |
<a href="/comm-central/comparison/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/tabmail.xml">comparison</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/base/content/tabmail.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/components/cloudfile/nsIMsgCloudFileProvider.idl">mail/components/cloudfile/nsIMsgCloudFileProvider.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/components/cloudfile/nsIMsgCloudFileProvider.idl">file</a> |
<a href="/comm-central/annotate/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/components/cloudfile/nsIMsgCloudFileProvider.idl">annotate</a> |
<a href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/components/cloudfile/nsIMsgCloudFileProvider.idl">diff</a> |
<a href="/comm-central/comparison/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/components/cloudfile/nsIMsgCloudFileProvider.idl">comparison</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/components/cloudfile/nsIMsgCloudFileProvider.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/components/compose/content/MsgComposeCommands.js">mail/components/compose/content/MsgComposeCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/components/compose/content/MsgComposeCommands.js">file</a> |
<a href="/comm-central/annotate/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/components/compose/content/MsgComposeCommands.js">annotate</a> |
<a href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/components/compose/content/MsgComposeCommands.js">diff</a> |
<a href="/comm-central/comparison/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/components/compose/content/MsgComposeCommands.js">comparison</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/components/compose/content/MsgComposeCommands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/components/newmailaccount/content/uriListener.js">mail/components/newmailaccount/content/uriListener.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/components/newmailaccount/content/uriListener.js">file</a> |
<a href="/comm-central/annotate/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/components/newmailaccount/content/uriListener.js">annotate</a> |
<a href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/components/newmailaccount/content/uriListener.js">diff</a> |
<a href="/comm-central/comparison/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/components/newmailaccount/content/uriListener.js">comparison</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/components/newmailaccount/content/uriListener.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/mozmill/shared-modules/test-mock-object-helpers.js">mail/test/mozmill/shared-modules/test-mock-object-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/mozmill/shared-modules/test-mock-object-helpers.js">file</a> |
<a href="/comm-central/annotate/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/mozmill/shared-modules/test-mock-object-helpers.js">annotate</a> |
<a href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/mozmill/shared-modules/test-mock-object-helpers.js">diff</a> |
<a href="/comm-central/comparison/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/mozmill/shared-modules/test-mock-object-helpers.js">comparison</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/mozmill/shared-modules/test-mock-object-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/resources/jsbridge/jsbridge/__init__.py">mail/test/resources/jsbridge/jsbridge/__init__.py</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/resources/jsbridge/jsbridge/__init__.py">file</a> |
<a href="/comm-central/annotate/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/resources/jsbridge/jsbridge/__init__.py">annotate</a> |
<a href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/resources/jsbridge/jsbridge/__init__.py">diff</a> |
<a href="/comm-central/comparison/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/resources/jsbridge/jsbridge/__init__.py">comparison</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/resources/jsbridge/jsbridge/__init__.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/resources/mozmill/mozmill/extension/content/rec.js">mail/test/resources/mozmill/mozmill/extension/content/rec.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/resources/mozmill/mozmill/extension/content/rec.js">file</a> |
<a href="/comm-central/annotate/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/resources/mozmill/mozmill/extension/content/rec.js">annotate</a> |
<a href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/resources/mozmill/mozmill/extension/content/rec.js">diff</a> |
<a href="/comm-central/comparison/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/resources/mozmill/mozmill/extension/content/rec.js">comparison</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/resources/mozmill/mozmill/extension/content/rec.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/resources/mozmill/patches/eventUtils.patch">mail/test/resources/mozmill/patches/eventUtils.patch</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/resources/mozmill/patches/eventUtils.patch">diff</a> |
<a href="/comm-central/comparison/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/resources/mozmill/patches/eventUtils.patch">comparison</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mail/test/resources/mozmill/patches/eventUtils.patch">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/addrbook/content/abDragDrop.js">mailnews/addrbook/content/abDragDrop.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/addrbook/content/abDragDrop.js">file</a> |
<a href="/comm-central/annotate/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/addrbook/content/abDragDrop.js">annotate</a> |
<a href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/addrbook/content/abDragDrop.js">diff</a> |
<a href="/comm-central/comparison/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/addrbook/content/abDragDrop.js">comparison</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/addrbook/content/abDragDrop.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/base/search/content/FilterEditor.js">mailnews/base/search/content/FilterEditor.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/base/search/content/FilterEditor.js">file</a> |
<a href="/comm-central/annotate/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/base/search/content/FilterEditor.js">annotate</a> |
<a href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/base/search/content/FilterEditor.js">diff</a> |
<a href="/comm-central/comparison/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/base/search/content/FilterEditor.js">comparison</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/base/search/content/FilterEditor.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/db/gloda/content/glodacomplete.xml">mailnews/db/gloda/content/glodacomplete.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/db/gloda/content/glodacomplete.xml">file</a> |
<a href="/comm-central/annotate/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/db/gloda/content/glodacomplete.xml">annotate</a> |
<a href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/db/gloda/content/glodacomplete.xml">diff</a> |
<a href="/comm-central/comparison/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/db/gloda/content/glodacomplete.xml">comparison</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/db/gloda/content/glodacomplete.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/db/gloda/modules/index_msg.js">mailnews/db/gloda/modules/index_msg.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/db/gloda/modules/index_msg.js">file</a> |
<a href="/comm-central/annotate/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/db/gloda/modules/index_msg.js">annotate</a> |
<a href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/db/gloda/modules/index_msg.js">diff</a> |
<a href="/comm-central/comparison/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/db/gloda/modules/index_msg.js">comparison</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/db/gloda/modules/index_msg.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/db/gloda/modules/log4moz.js">mailnews/db/gloda/modules/log4moz.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/db/gloda/modules/log4moz.js">file</a> |
<a href="/comm-central/annotate/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/db/gloda/modules/log4moz.js">annotate</a> |
<a href="/comm-central/diff/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/db/gloda/modules/log4moz.js">diff</a> |
<a href="/comm-central/comparison/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/db/gloda/modules/log4moz.js">comparison</a> |
<a href="/comm-central/log/4b2c136f620aef6724029210bdbcb49ad30a5cd2/mailnews/db/gloda/modules/log4moz.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/chat/content/convbrowser.xml</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/chat/content/convbrowser.xml</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -95,17 +95,17 @@</span>
<a href="#l1.4"></a><span id="l1.4">             return owner.frameLoader.messageManager;</span>
<a href="#l1.5"></a><span id="l1.5">           ]]&gt;</span>
<a href="#l1.6"></a><span id="l1.6">         &lt;/getter&gt;</span>
<a href="#l1.7"></a><span id="l1.7">       &lt;/property&gt;</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9">       &lt;field name=&quot;_webNavigation&quot;&gt;null&lt;/field&gt;</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11">       &lt;property name=&quot;webNavigation&quot;</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-                onget=&quot;return this._webNavigation || (this._webNavigation = this.docShell.QueryInterface(Components.interfaces.nsIWebNavigation));&quot;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+                onget=&quot;return this._webNavigation || (this._webNavigation = this.docShell.QueryInterface(Ci.nsIWebNavigation));&quot;</span>
<a href="#l1.14"></a><span id="l1.14">                 readonly=&quot;true&quot;/&gt;</span>
<a href="#l1.15"></a><span id="l1.15"> </span>
<a href="#l1.16"></a><span id="l1.16">       &lt;field name=&quot;_finder&quot;&gt;null&lt;/field&gt;</span>
<a href="#l1.17"></a><span id="l1.17"> </span>
<a href="#l1.18"></a><span id="l1.18">       &lt;property name=&quot;finder&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l1.19"></a><span id="l1.19">         &lt;getter&gt;&lt;![CDATA[</span>
<a href="#l1.20"></a><span id="l1.20">           if (!this._finder) {</span>
<a href="#l1.21"></a><span id="l1.21">             if (!this.docShell)</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineat">@@ -139,23 +139,23 @@</span>
<a href="#l1.23"></a><span id="l1.23">         &lt;/getter&gt;</span>
<a href="#l1.24"></a><span id="l1.24">       &lt;/property&gt;</span>
<a href="#l1.25"></a><span id="l1.25"> </span>
<a href="#l1.26"></a><span id="l1.26">       &lt;field name=&quot;_lastSearchString&quot;&gt;null&lt;/field&gt;</span>
<a href="#l1.27"></a><span id="l1.27">       &lt;field name=&quot;_lastSearchHighlight&quot;&gt;false&lt;/field&gt;</span>
<a href="#l1.28"></a><span id="l1.28"> </span>
<a href="#l1.29"></a><span id="l1.29">       &lt;property name=&quot;webProgress&quot;</span>
<a href="#l1.30"></a><span id="l1.30">                 readonly=&quot;true&quot;</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-                onget=&quot;return this.docShell.QueryInterface(Components.interfaces.nsIInterfaceRequestor).getInterface(Components.interfaces.nsIWebProgress);&quot;/&gt;</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+                onget=&quot;return this.docShell.QueryInterface(Ci.nsIInterfaceRequestor).getInterface(Ci.nsIWebProgress);&quot;/&gt;</span>
<a href="#l1.33"></a><span id="l1.33"> </span>
<a href="#l1.34"></a><span id="l1.34">       &lt;field name=&quot;_contentWindow&quot;&gt;null&lt;/field&gt;</span>
<a href="#l1.35"></a><span id="l1.35"> </span>
<a href="#l1.36"></a><span id="l1.36">       &lt;property name=&quot;contentWindow&quot;</span>
<a href="#l1.37"></a><span id="l1.37">                 readonly=&quot;true&quot;</span>
<a href="#l1.38"></a><span id="l1.38" class="difflineminus">-                onget=&quot;return this._contentWindow || (this._contentWindow = this.docShell.QueryInterface(Components.interfaces.nsIInterfaceRequestor).getInterface(Components.interfaces.nsIDOMWindow));&quot;/&gt;</span>
<a href="#l1.39"></a><span id="l1.39" class="difflineplus">+                onget=&quot;return this._contentWindow || (this._contentWindow = this.docShell.QueryInterface(Ci.nsIInterfaceRequestor).getInterface(Ci.nsIDOMWindow));&quot;/&gt;</span>
<a href="#l1.40"></a><span id="l1.40"> </span>
<a href="#l1.41"></a><span id="l1.41">       &lt;property name=&quot;contentWindowAsCPOW&quot;</span>
<a href="#l1.42"></a><span id="l1.42">                 readonly=&quot;true&quot;</span>
<a href="#l1.43"></a><span id="l1.43">                 onget=&quot;return this.contentWindow;&quot;/&gt;</span>
<a href="#l1.44"></a><span id="l1.44"> </span>
<a href="#l1.45"></a><span id="l1.45">       &lt;property name=&quot;contentDocument&quot;</span>
<a href="#l1.46"></a><span id="l1.46">                 onget=&quot;return this.webNavigation.document;&quot;</span>
<a href="#l1.47"></a><span id="l1.47">                 readonly=&quot;true&quot;/&gt;</span>
<a href="#l1.48"></a><span id="l1.48" class="difflineat">@@ -1298,20 +1298,20 @@</span>
<a href="#l1.49"></a><span id="l1.49">             Cc[&quot;@mozilla.org/uriloader/external-protocol-service;1&quot;]</span>
<a href="#l1.50"></a><span id="l1.50">               .getService(Ci.nsIExternalProtocolService)</span>
<a href="#l1.51"></a><span id="l1.51">               .loadURI(uri);</span>
<a href="#l1.52"></a><span id="l1.52">           }</span>
<a href="#l1.53"></a><span id="l1.53">         ]]&gt;</span>
<a href="#l1.54"></a><span id="l1.54">       &lt;/handler&gt;</span>
<a href="#l1.55"></a><span id="l1.55"> </span>
<a href="#l1.56"></a><span id="l1.56">       &lt;handler event=&quot;keypress&quot; modifiers=&quot;shift&quot; keycode=&quot;VK_PAGE_UP&quot;</span>
<a href="#l1.57"></a><span id="l1.57" class="difflineminus">-               action=&quot;this.docShell.QueryInterface(Components.interfaces.nsITextScroll).scrollByPages(-1);&quot;/&gt;</span>
<a href="#l1.58"></a><span id="l1.58" class="difflineplus">+               action=&quot;this.docShell.QueryInterface(Ci.nsITextScroll).scrollByPages(-1);&quot;/&gt;</span>
<a href="#l1.59"></a><span id="l1.59"> </span>
<a href="#l1.60"></a><span id="l1.60">       &lt;handler event=&quot;keypress&quot; modifiers=&quot;shift&quot; keycode=&quot;VK_PAGE_DOWN&quot;</span>
<a href="#l1.61"></a><span id="l1.61" class="difflineminus">-               action=&quot;this.docShell.QueryInterface(Components.interfaces.nsITextScroll).scrollByPages(1);&quot;/&gt;</span>
<a href="#l1.62"></a><span id="l1.62" class="difflineplus">+               action=&quot;this.docShell.QueryInterface(Ci.nsITextScroll).scrollByPages(1);&quot;/&gt;</span>
<a href="#l1.63"></a><span id="l1.63"> </span>
<a href="#l1.64"></a><span id="l1.64">       &lt;handler event=&quot;keypress&quot; modifiers=&quot;alt&quot; keycode=&quot;VK_PAGE_UP&quot;</span>
<a href="#l1.65"></a><span id="l1.65">                action=&quot;this.scrollToPreviousSection();&quot;/&gt;</span>
<a href="#l1.66"></a><span id="l1.66"> </span>
<a href="#l1.67"></a><span id="l1.67">       &lt;handler event=&quot;keypress&quot; modifiers=&quot;alt&quot; keycode=&quot;VK_PAGE_DOWN&quot;</span>
<a href="#l1.68"></a><span id="l1.68">                action=&quot;this.scrollToNextSection();&quot;/&gt;</span>
<a href="#l1.69"></a><span id="l1.69"> </span>
<a href="#l1.70"></a><span id="l1.70">       &lt;handler event=&quot;keypress&quot; keycode=&quot;VK_HOME&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/common/bindings/preferences.xml</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/common/bindings/preferences.xml</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -77,29 +77,26 @@</span>
<a href="#l2.4"></a><span id="l2.4">           } catch (e) {</span>
<a href="#l2.5"></a><span id="l2.5">             Cu.reportError(e);</span>
<a href="#l2.6"></a><span id="l2.6">           }</span>
<a href="#l2.7"></a><span id="l2.7">         ]]&gt;</span>
<a href="#l2.8"></a><span id="l2.8">         &lt;/body&gt;</span>
<a href="#l2.9"></a><span id="l2.9">       &lt;/method&gt;</span>
<a href="#l2.10"></a><span id="l2.10"> </span>
<a href="#l2.11"></a><span id="l2.11">       &lt;field name=&quot;service&quot;&gt;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-        Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-                  .getService(Components.interfaces.nsIPrefService);</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+        Cc[&quot;@mozilla.org/preferences-service;1&quot;].getService(Ci.nsIPrefService);</span>
<a href="#l2.15"></a><span id="l2.15">       &lt;/field&gt;</span>
<a href="#l2.16"></a><span id="l2.16">       &lt;field name=&quot;rootBranch&quot;&gt;</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineminus">-        Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineminus">-                  .getService(Components.interfaces.nsIPrefBranch);</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+        Cc[&quot;@mozilla.org/preferences-service;1&quot;].getService(Ci.nsIPrefBranch);</span>
<a href="#l2.20"></a><span id="l2.20">       &lt;/field&gt;</span>
<a href="#l2.21"></a><span id="l2.21">       &lt;field name=&quot;defaultBranch&quot;&gt;</span>
<a href="#l2.22"></a><span id="l2.22">         this.service.getDefaultBranch(&quot;&quot;);</span>
<a href="#l2.23"></a><span id="l2.23">       &lt;/field&gt;</span>
<a href="#l2.24"></a><span id="l2.24">       &lt;field name=&quot;rootBranchInternal&quot;&gt;</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineminus">-        Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineminus">-                  .getService(Components.interfaces.nsIPrefBranch);</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineplus">+        Cc[&quot;@mozilla.org/preferences-service;1&quot;].getService(Ci.nsIPrefBranch);</span>
<a href="#l2.28"></a><span id="l2.28">       &lt;/field&gt;</span>
<a href="#l2.29"></a><span id="l2.29">       &lt;property name=&quot;type&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l2.30"></a><span id="l2.30">         &lt;getter&gt;</span>
<a href="#l2.31"></a><span id="l2.31">           &lt;![CDATA[</span>
<a href="#l2.32"></a><span id="l2.32">             return document.documentElement.type || &quot;&quot;;</span>
<a href="#l2.33"></a><span id="l2.33">           ]]&gt;</span>
<a href="#l2.34"></a><span id="l2.34">         &lt;/getter&gt;</span>
<a href="#l2.35"></a><span id="l2.35">       &lt;/property&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/base/content/mailWidgets.xml</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/base/content/mailWidgets.xml</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -1672,17 +1672,17 @@</span>
<a href="#l3.4"></a><span id="l3.4">       &lt;/constructor&gt;</span>
<a href="#l3.5"></a><span id="l3.5">     &lt;/implementation&gt;</span>
<a href="#l3.6"></a><span id="l3.6">   &lt;/binding&gt;</span>
<a href="#l3.7"></a><span id="l3.7"> </span>
<a href="#l3.8"></a><span id="l3.8">   &lt;!-- searchoperator - Contains, Is Less than, etc --&gt;</span>
<a href="#l3.9"></a><span id="l3.9">   &lt;binding id=&quot;searchoperator&quot; name=&quot;searchOperator&quot;</span>
<a href="#l3.10"></a><span id="l3.10">            extends=&quot;chrome://messenger/content/mailWidgets.xml#search-menulist-abstract&quot;&gt;</span>
<a href="#l3.11"></a><span id="l3.11">     &lt;implementation&gt;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-      &lt;field name=&quot;searchAttribute&quot;&gt;Components.interfaces.nsMsgSearchAttrib.Default&lt;/field&gt;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+      &lt;field name=&quot;searchAttribute&quot;&gt;Ci.nsMsgSearchAttrib.Default&lt;/field&gt;</span>
<a href="#l3.14"></a><span id="l3.14">       &lt;field name=&quot;stringBundle&quot;&gt;</span>
<a href="#l3.15"></a><span id="l3.15">         &lt;![CDATA[</span>
<a href="#l3.16"></a><span id="l3.16">           this.Services.strings.createBundle(&quot;chrome://messenger/locale/search-operators.properties&quot;)</span>
<a href="#l3.17"></a><span id="l3.17">         ]]&gt;</span>
<a href="#l3.18"></a><span id="l3.18">       &lt;/field&gt;</span>
<a href="#l3.19"></a><span id="l3.19">       &lt;property name=&quot;valueLabel&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l3.20"></a><span id="l3.20">         &lt;getter&gt;</span>
<a href="#l3.21"></a><span id="l3.21">           &lt;![CDATA[</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/base/content/mailWindowOverlay.xul</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/base/content/mailWindowOverlay.xul</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -2276,19 +2276,19 @@</span>
<a href="#l4.4"></a><span id="l4.4">               observes=&quot;cmd_createFilterFromPopup&quot;/&gt;</span>
<a href="#l4.5"></a><span id="l4.5">   &lt;/menupopup&gt;</span>
<a href="#l4.6"></a><span id="l4.6"> </span>
<a href="#l4.7"></a><span id="l4.7">   &lt;menupopup id=&quot;copyPopup&quot;&gt;</span>
<a href="#l4.8"></a><span id="l4.8">     &lt;menuitem id=&quot;copyMenuitem&quot;</span>
<a href="#l4.9"></a><span id="l4.9">               label=&quot;&amp;copyCmd.label;&quot;</span>
<a href="#l4.10"></a><span id="l4.10">               accesskey=&quot;&amp;copyCmd.accesskey;&quot;</span>
<a href="#l4.11"></a><span id="l4.11">               tooltiptext=&quot;&amp;copyCmd.label;&quot;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-              oncommand=&quot;Components.classes['@mozilla.org/widget/clipboardhelper;1']</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-                         .getService(Components.interfaces.nsIClipboardHelper)</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-                         .copyString(window.getSelection().isCollapsed ?</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+              oncommand=&quot;Cc['@mozilla.org/widget/clipboardhelper;1']</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+                           .getService(Ci.nsIClipboardHelper)</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+                           .copyString(window.getSelection().isCollapsed ?</span>
<a href="#l4.18"></a><span id="l4.18">                              document.popupNode.textContent :</span>
<a href="#l4.19"></a><span id="l4.19">                              window.getSelection().toString());&quot;/&gt;</span>
<a href="#l4.20"></a><span id="l4.20">     &lt;menuitem id=&quot;createFilterFromMenuItem&quot; label=&quot;&amp;CreateFilterFrom.label;&quot;</span>
<a href="#l4.21"></a><span id="l4.21">               accesskey=&quot;&amp;CreateFilterFrom.accesskey;&quot;</span>
<a href="#l4.22"></a><span id="l4.22">               oncommand=&quot;CreateFilter(this.parentNode.triggerNode.parentNode, gMessageDisplay.displayedMessage)&quot;</span>
<a href="#l4.23"></a><span id="l4.23">               observes=&quot;cmd_createFilterFromPopup&quot;/&gt;</span>
<a href="#l4.24"></a><span id="l4.24">   &lt;/menupopup&gt;</span>
<a href="#l4.25"></a><span id="l4.25"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/base/content/search.xml</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/base/content/search.xml</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -63,17 +63,17 @@</span>
<a href="#l5.4"></a><span id="l5.4">                                  (AppConstants.platform == &quot;macosx&quot;) ?</span>
<a href="#l5.5"></a><span id="l5.5">                                   &quot;keyLabelMac&quot; : &quot;keyLabelNonMac&quot;)));</span>
<a href="#l5.6"></a><span id="l5.6"> </span>
<a href="#l5.7"></a><span id="l5.7">           Services.prefs.addObserver(&quot;mailnews.database.global.indexer.enabled&quot;,</span>
<a href="#l5.8"></a><span id="l5.8">                                      this._prefObserver);</span>
<a href="#l5.9"></a><span id="l5.9"> </span>
<a href="#l5.10"></a><span id="l5.10">           this.glodaCompleter =</span>
<a href="#l5.11"></a><span id="l5.11">             Cc[&quot;@mozilla.org/autocomplete/search;1?name=gloda&quot;]</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-              .getService()</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+              .getService(Ci.nsIAutoCompleteSearch)</span>
<a href="#l5.14"></a><span id="l5.14">               .wrappedJSObject;</span>
<a href="#l5.15"></a><span id="l5.15">           Services.obs.addObserver(this, &quot;autocomplete-did-enter-text&quot;);</span>
<a href="#l5.16"></a><span id="l5.16"> </span>
<a href="#l5.17"></a><span id="l5.17">           this.glodaEnabled =</span>
<a href="#l5.18"></a><span id="l5.18">             Services.prefs.getBoolPref(&quot;mailnews.database.global.indexer.enabled&quot;);</span>
<a href="#l5.19"></a><span id="l5.19">           this.collapsed = !this.glodaEnabled;</span>
<a href="#l5.20"></a><span id="l5.20"> </span>
<a href="#l5.21"></a><span id="l5.21">           // make sure we set our emptytext here from the get-go</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineat">@@ -96,34 +96,33 @@</span>
<a href="#l5.23"></a><span id="l5.23"> </span>
<a href="#l5.24"></a><span id="l5.24">       &lt;field name=&quot;_prefObserver&quot;&gt;({</span>
<a href="#l5.25"></a><span id="l5.25">         inputSearch: this,</span>
<a href="#l5.26"></a><span id="l5.26">         observe: function(subject, topic, data)</span>
<a href="#l5.27"></a><span id="l5.27">         {</span>
<a href="#l5.28"></a><span id="l5.28">           ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l5.29"></a><span id="l5.29"> </span>
<a href="#l5.30"></a><span id="l5.30">           if (topic == &quot;nsPref:changed&quot;) {</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">-            subject.QueryInterface(Components.interfaces.nsIPrefBranch);</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+            subject.QueryInterface(Ci.nsIPrefBranch);</span>
<a href="#l5.33"></a><span id="l5.33">             switch (data) {</span>
<a href="#l5.34"></a><span id="l5.34">             case &quot;mailnews.database.global.indexer.enabled&quot;:</span>
<a href="#l5.35"></a><span id="l5.35">               this.inputSearch.glodaEnabled =</span>
<a href="#l5.36"></a><span id="l5.36">                 Services.prefs.getBoolPref(</span>
<a href="#l5.37"></a><span id="l5.37">                   &quot;mailnews.database.global.indexer.enabled&quot;);</span>
<a href="#l5.38"></a><span id="l5.38">               this.inputSearch.collapsed = !this.inputSearch.glodaEnabled;</span>
<a href="#l5.39"></a><span id="l5.39">               break;</span>
<a href="#l5.40"></a><span id="l5.40">             }</span>
<a href="#l5.41"></a><span id="l5.41">           }</span>
<a href="#l5.42"></a><span id="l5.42">         },</span>
<a href="#l5.43"></a><span id="l5.43"> </span>
<a href="#l5.44"></a><span id="l5.44">         QueryInterface: function(aIID)</span>
<a href="#l5.45"></a><span id="l5.45">         {</span>
<a href="#l5.46"></a><span id="l5.46" class="difflineminus">-          if (aIID.equals(Components.interfaces.nsIObserver) ||</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineminus">-              aIID.equals(Components.interfaces.nsISupports))</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineplus">+          if (aIID.equals(Ci.nsIObserver) || aIID.equals(Ci.nsISupports))</span>
<a href="#l5.49"></a><span id="l5.49">             return this;</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineminus">-          throw Components.results.NS_NOINTERFACE;</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+          throw Cr.NS_NOINTERFACE;</span>
<a href="#l5.52"></a><span id="l5.52">         }</span>
<a href="#l5.53"></a><span id="l5.53">         });</span>
<a href="#l5.54"></a><span id="l5.54">       &lt;/field&gt;</span>
<a href="#l5.55"></a><span id="l5.55">       &lt;field name=&quot;glodaCompleter&quot;&gt;null&lt;/field&gt;</span>
<a href="#l5.56"></a><span id="l5.56">       &lt;property name=&quot;menupopup&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l5.57"></a><span id="l5.57">         &lt;getter&gt;&lt;![CDATA[</span>
<a href="#l5.58"></a><span id="l5.58">           return document.getAnonymousElementByAttribute(</span>
<a href="#l5.59"></a><span id="l5.59">                    this, 'anonid', 'quick-search-menupopup');</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/base/content/tabmail.xml</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/base/content/tabmail.xml</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -1803,49 +1803,49 @@</span>
<a href="#l6.4"></a><span id="l6.4">       &lt;field name=&quot;mToolbar&quot;&gt;</span>
<a href="#l6.5"></a><span id="l6.5">         document.getElementById(this.getAttribute(&quot;tabtoolbar&quot;));</span>
<a href="#l6.6"></a><span id="l6.6">       &lt;/field&gt;</span>
<a href="#l6.7"></a><span id="l6.7"> </span>
<a href="#l6.8"></a><span id="l6.8">       &lt;field name=&quot;mCollapseToolbar&quot;&gt;</span>
<a href="#l6.9"></a><span id="l6.9">         document.getElementById(this.getAttribute(&quot;collapsetoolbar&quot;));</span>
<a href="#l6.10"></a><span id="l6.10">       &lt;/field&gt;</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-     &lt;field name=&quot;_prefObserver&quot;&gt;({</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+      &lt;field name=&quot;_prefObserver&quot;&gt;&lt;![CDATA[</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+        ({</span>
<a href="#l6.15"></a><span id="l6.15">         tabbox: this,</span>
<a href="#l6.16"></a><span id="l6.16"> </span>
<a href="#l6.17"></a><span id="l6.17">         observe: function(subject, topic, data)</span>
<a href="#l6.18"></a><span id="l6.18">         {</span>
<a href="#l6.19"></a><span id="l6.19">           if (topic == &quot;nsPref:changed&quot;) {</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineminus">-            subject.QueryInterface(Components.interfaces.nsIPrefBranch);</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineplus">+            subject.QueryInterface(Ci.nsIPrefBranch);</span>
<a href="#l6.22"></a><span id="l6.22">             switch (data) {</span>
<a href="#l6.23"></a><span id="l6.23">             case &quot;mail.tabs.closeButtons&quot;:</span>
<a href="#l6.24"></a><span id="l6.24">               this.tabbox.mCloseButtons = subject.getIntPref(&quot;mail.tabs.closeButtons&quot;);</span>
<a href="#l6.25"></a><span id="l6.25">               this.tabbox._updateCloseButtons();</span>
<a href="#l6.26"></a><span id="l6.26">               break;</span>
<a href="#l6.27"></a><span id="l6.27">             case &quot;mail.tabs.autoHide&quot;:</span>
<a href="#l6.28"></a><span id="l6.28">               this.tabbox.mAutoHide = subject.getBoolPref(&quot;mail.tabs.autoHide&quot;);</span>
<a href="#l6.29"></a><span id="l6.29">               break;</span>
<a href="#l6.30"></a><span id="l6.30">             }</span>
<a href="#l6.31"></a><span id="l6.31">           }</span>
<a href="#l6.32"></a><span id="l6.32">         },</span>
<a href="#l6.33"></a><span id="l6.33"> </span>
<a href="#l6.34"></a><span id="l6.34">         QueryInterface: function(aIID)</span>
<a href="#l6.35"></a><span id="l6.35">         {</span>
<a href="#l6.36"></a><span id="l6.36" class="difflineminus">-          if (aIID.equals(Components.interfaces.nsIObserver) ||</span>
<a href="#l6.37"></a><span id="l6.37" class="difflineminus">-              aIID.equals(Components.interfaces.nsISupports))</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineplus">+          if (aIID.equals(Ci.nsIObserver) || aIID.equals(Ci.nsISupports))</span>
<a href="#l6.39"></a><span id="l6.39">             return this;</span>
<a href="#l6.40"></a><span id="l6.40" class="difflineminus">-          throw Components.results.NS_NOINTERFACE;</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineplus">+          throw Cr.NS_NOINTERFACE;</span>
<a href="#l6.42"></a><span id="l6.42">         }</span>
<a href="#l6.43"></a><span id="l6.43">         });</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineplus">+        ]]&gt;</span>
<a href="#l6.45"></a><span id="l6.45">       &lt;/field&gt;</span>
<a href="#l6.46"></a><span id="l6.46"> </span>
<a href="#l6.47"></a><span id="l6.47">       &lt;field name=&quot;_tabDropIndicator&quot;&gt;</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineminus">-        document.getAnonymousElementByAttribute(</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineminus">-            this,</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineminus">-            &quot;anonid&quot;, &quot;tab-drop-indicator&quot;);</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineplus">+        document.getAnonymousElementByAttribute(this, &quot;anonid&quot;,</span>
<a href="#l6.52"></a><span id="l6.52" class="difflineplus">+                                                &quot;tab-drop-indicator&quot;);</span>
<a href="#l6.53"></a><span id="l6.53">       &lt;/field&gt;</span>
<a href="#l6.54"></a><span id="l6.54"> </span>
<a href="#l6.55"></a><span id="l6.55">       &lt;field name=&quot;_dragOverDelay&quot;&gt;350&lt;/field&gt;</span>
<a href="#l6.56"></a><span id="l6.56">       &lt;field name=&quot;_dragTime&quot;&gt;0&lt;/field&gt;</span>
<a href="#l6.57"></a><span id="l6.57"> </span>
<a href="#l6.58"></a><span id="l6.58">       &lt;field name=&quot;mTabMinWidth&quot;&gt;100&lt;/field&gt;</span>
<a href="#l6.59"></a><span id="l6.59">       &lt;field name=&quot;mTabMaxWidth&quot;&gt;250&lt;/field&gt;</span>
<a href="#l6.60"></a><span id="l6.60">       &lt;field name=&quot;mTabClipWidth&quot;&gt;140&lt;/field&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/components/cloudfile/nsIMsgCloudFileProvider.idl</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/components/cloudfile/nsIMsgCloudFileProvider.idl</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -77,17 +77,17 @@ interface nsIMsgCloudFileProvider : nsIS</span>
<a href="#l7.4"></a><span id="l7.4">    * process of creating one. There will probably have to be some sort of</span>
<a href="#l7.5"></a><span id="l7.5">    * validation on the part of the user before the account is created.</span>
<a href="#l7.6"></a><span id="l7.6">    * If not, this will throw NS_ERROR_NOT_IMPLEMENTED.</span>
<a href="#l7.7"></a><span id="l7.7">    *</span>
<a href="#l7.8"></a><span id="l7.8">    * If the REST call succeeds, aCallback.onStopRequest will get called back</span>
<a href="#l7.9"></a><span id="l7.9">    * with an http status. Generally, status between 200 and 300 is OK,</span>
<a href="#l7.10"></a><span id="l7.10">    * otherwise, an error occurred which is * probably specific to the provider.</span>
<a href="#l7.11"></a><span id="l7.11">    * If the request fails completely, onStopRequest will get called with</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-   * Components.results.NS_ERROR_FAILURE</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+   * Cr.NS_ERROR_FAILURE</span>
<a href="#l7.14"></a><span id="l7.14">    * @throws nsIMsgCloudFileProvider.offlineErr if we are offline.</span>
<a href="#l7.15"></a><span id="l7.15">    */</span>
<a href="#l7.16"></a><span id="l7.16">   void createNewAccount(in ACString aEmailAddress, in ACString aPassword,</span>
<a href="#l7.17"></a><span id="l7.17">                         in ACString aFirstName, in ACString aLastName,</span>
<a href="#l7.18"></a><span id="l7.18">                         in nsIRequestObserver aCallback);</span>
<a href="#l7.19"></a><span id="l7.19"> </span>
<a href="#l7.20"></a><span id="l7.20">   void createExistingAccount(in nsIRequestObserver aCallback);</span>
<a href="#l7.21"></a><span id="l7.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -5496,17 +5496,17 @@ nsAttachmentOpener.prototype =</span>
<a href="#l8.4"></a><span id="l8.4">   doContent: function(contentType, isContentPreferred, request, contentHandler)</span>
<a href="#l8.5"></a><span id="l8.5">   {</span>
<a href="#l8.6"></a><span id="l8.6">     // If we came here to display an attached message, make sure we provide a type.</span>
<a href="#l8.7"></a><span id="l8.7">     if (/[?&amp;]part=/i.test(request.URI.query)) {</span>
<a href="#l8.8"></a><span id="l8.8">       let newQuery = request.URI.query + &quot;&amp;type=message/rfc822&quot;;</span>
<a href="#l8.9"></a><span id="l8.9">       request.URI = request.URI.mutate().setQuery(newQuery).finalize();</span>
<a href="#l8.10"></a><span id="l8.10">     }</span>
<a href="#l8.11"></a><span id="l8.11">     let newHandler = Cc[&quot;@mozilla.org/uriloader/content-handler;1?type=application/x-message-display&quot;]</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-                       .createInstance(Components.interfaces.nsIContentHandler);</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+                       .createInstance(Ci.nsIContentHandler);</span>
<a href="#l8.14"></a><span id="l8.14">     newHandler.handleContent(&quot;application/x-message-display&quot;, this, request);</span>
<a href="#l8.15"></a><span id="l8.15">     return true;</span>
<a href="#l8.16"></a><span id="l8.16">   },</span>
<a href="#l8.17"></a><span id="l8.17"> </span>
<a href="#l8.18"></a><span id="l8.18">   isPreferred: function(contentType, desiredContentType)</span>
<a href="#l8.19"></a><span id="l8.19">   {</span>
<a href="#l8.20"></a><span id="l8.20">     if (contentType == &quot;message/rfc822&quot;)</span>
<a href="#l8.21"></a><span id="l8.21">       return true;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/components/newmailaccount/content/uriListener.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/components/newmailaccount/content/uriListener.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -35,18 +35,18 @@ function httpRequestObserver(aBrowser, a</span>
<a href="#l9.4"></a><span id="l9.4"> </span>
<a href="#l9.5"></a><span id="l9.5"> httpRequestObserver.prototype = {</span>
<a href="#l9.6"></a><span id="l9.6">   observe: function(aSubject, aTopic, aData) {</span>
<a href="#l9.7"></a><span id="l9.7">     if (aTopic != &quot;http-on-examine-response&quot; &amp;&amp;</span>
<a href="#l9.8"></a><span id="l9.8">         aTopic != &quot;http-on-examine-cached-response&quot;)</span>
<a href="#l9.9"></a><span id="l9.9">       return;</span>
<a href="#l9.10"></a><span id="l9.10"> </span>
<a href="#l9.11"></a><span id="l9.11">     if (!(aSubject instanceof Ci.nsIHttpChannel)) {</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-      Component.utils.reportError(&quot;Failed to get a nsIHttpChannel when &quot;</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineminus">-                                  + &quot;observing http-on-examine-response&quot;);</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineplus">+      Cu.reportError(&quot;Failed to get a nsIHttpChannel when &quot;</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineplus">+                     + &quot;observing http-on-examine-response&quot;);</span>
<a href="#l9.16"></a><span id="l9.16">       return;</span>
<a href="#l9.17"></a><span id="l9.17">     }</span>
<a href="#l9.18"></a><span id="l9.18"> </span>
<a href="#l9.19"></a><span id="l9.19">     let contentType = &quot;&quot;;</span>
<a href="#l9.20"></a><span id="l9.20">     try {</span>
<a href="#l9.21"></a><span id="l9.21">       contentType = aSubject.getResponseHeader(&quot;Content-Type&quot;);</span>
<a href="#l9.22"></a><span id="l9.22">     } catch(e) {</span>
<a href="#l9.23"></a><span id="l9.23">       // If we couldn't get the response header, which can happen,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-mock-object-helpers.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-mock-object-helpers.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -53,17 +53,17 @@ MockObjectRegisterer.prototype = {</span>
<a href="#l10.4"></a><span id="l10.4">  *        The ContractID of the component to replace, for example</span>
<a href="#l10.5"></a><span id="l10.5">  *        &quot;@mozilla.org/filepicker;1&quot;.</span>
<a href="#l10.6"></a><span id="l10.6">  *</span>
<a href="#l10.7"></a><span id="l10.7">  * @param aReplacementCtor</span>
<a href="#l10.8"></a><span id="l10.8">  *        The constructor function for the JavaScript object that will be</span>
<a href="#l10.9"></a><span id="l10.9">  *        created every time createInstance is called. This object must</span>
<a href="#l10.10"></a><span id="l10.10">  *        implement QueryInterface and provide the XPCOM interfaces required by</span>
<a href="#l10.11"></a><span id="l10.11">  *        the specified ContractID (for example</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">- *        Components.interfaces.nsIFilePicker).</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+ *        Ci.nsIFilePicker).</span>
<a href="#l10.14"></a><span id="l10.14">  */</span>
<a href="#l10.15"></a><span id="l10.15"> </span>
<a href="#l10.16"></a><span id="l10.16"> function MockObjectReplacer(aContractID, aReplacementCtor) {</span>
<a href="#l10.17"></a><span id="l10.17">   this._contractID = aContractID;</span>
<a href="#l10.18"></a><span id="l10.18">   this._replacementCtor = aReplacementCtor;</span>
<a href="#l10.19"></a><span id="l10.19"> }</span>
<a href="#l10.20"></a><span id="l10.20"> </span>
<a href="#l10.21"></a><span id="l10.21"> MockObjectReplacer.prototype = {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/test/resources/jsbridge/jsbridge/__init__.py</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/test/resources/jsbridge/jsbridge/__init__.py</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -47,17 +47,17 @@ from jsobjects import JSObject</span>
<a href="#l11.4"></a><span id="l11.4"> </span>
<a href="#l11.5"></a><span id="l11.5"> import mozrunner</span>
<a href="#l11.6"></a><span id="l11.6"> </span>
<a href="#l11.7"></a><span id="l11.7"> settings_env = 'JSBRIDGE_SETTINGS_FILE'</span>
<a href="#l11.8"></a><span id="l11.8"> </span>
<a href="#l11.9"></a><span id="l11.9"> parent = os.path.abspath(os.path.dirname(__file__))</span>
<a href="#l11.10"></a><span id="l11.10"> extension_path = os.path.join(parent, 'extension')</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-window_string = &quot;Components.classes['@mozilla.org/appshell/window-mediator;1'].getService(Components.interfaces.nsIWindowMediator).getMostRecentWindow('')&quot;</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+window_string = &quot;Cc['@mozilla.org/appshell/window-mediator;1'].getService(Ci.nsIWindowMediator).getMostRecentWindow('')&quot;</span>
<a href="#l11.14"></a><span id="l11.14"> </span>
<a href="#l11.15"></a><span id="l11.15"> wait_to_create_timeout = 60</span>
<a href="#l11.16"></a><span id="l11.16"> </span>
<a href="#l11.17"></a><span id="l11.17"> def wait_and_create_network(host, port, timeout=wait_to_create_timeout):</span>
<a href="#l11.18"></a><span id="l11.18">     ttl = 0</span>
<a href="#l11.19"></a><span id="l11.19">     while ttl &lt; timeout:</span>
<a href="#l11.20"></a><span id="l11.20">         try:</span>
<a href="#l11.21"></a><span id="l11.21">             s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineat">@@ -171,16 +171,9 @@ class CLI(mozrunner.CLI):</span>
<a href="#l11.23"></a><span id="l11.23">         port = int(self.options.port)</span>
<a href="#l11.24"></a><span id="l11.24">         host = '127.0.0.1'</span>
<a href="#l11.25"></a><span id="l11.25">         self.back_channel, self.bridge = wait_and_create_network(host, port, timeout)</span>
<a href="#l11.26"></a><span id="l11.26"> </span>
<a href="#l11.27"></a><span id="l11.27"> def cli():</span>
<a href="#l11.28"></a><span id="l11.28">     CLI().run()</span>
<a href="#l11.29"></a><span id="l11.29"> </span>
<a href="#l11.30"></a><span id="l11.30"> def getBrowserWindow(bridge):</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-    return JSObject(bridge, &quot;Components.classes['@mozilla.org/appshell/window-mediator;1'].getService(Components.interfaces.nsIWindowMediator).getMostRecentWindow('')&quot;)</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineminus">-    </span>
<a href="#l11.33"></a><span id="l11.33" class="difflineminus">-</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineminus">-</span>
<a href="#l11.35"></a><span id="l11.35" class="difflineminus">-</span>
<a href="#l11.36"></a><span id="l11.36" class="difflineminus">-</span>
<a href="#l11.37"></a><span id="l11.37" class="difflineminus">-</span>
<a href="#l11.38"></a><span id="l11.38" class="difflineminus">-</span>
<a href="#l11.39"></a><span id="l11.39" class="difflineplus">+    return JSObject(bridge, &quot;Cc['@mozilla.org/appshell/window-mediator;1'].getService(Ci.nsIWindowMediator).getMostRecentWindow('')&quot;)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/rec.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/rec.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -277,18 +277,17 @@ RecorderConnector.prototype.on = functio</span>
<a href="#l12.4"></a><span id="l12.4">   }</span>
<a href="#l12.5"></a><span id="l12.5"> </span>
<a href="#l12.6"></a><span id="l12.6">   var mmWindows = utils.getWindows('navigator:browser');</span>
<a href="#l12.7"></a><span id="l12.7">   if (mmWindows.length != 0){</span>
<a href="#l12.8"></a><span id="l12.8">     mmWindows[0].focus();</span>
<a href="#l12.9"></a><span id="l12.9">   }</span>
<a href="#l12.10"></a><span id="l12.10"> </span>
<a href="#l12.11"></a><span id="l12.11">   var observerService =</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-    Components.classes[&quot;@mozilla.org/observer-service;1&quot;]</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineminus">-      .getService(Components.interfaces.nsIObserverService);</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineplus">+    Cc[&quot;@mozilla.org/observer-service;1&quot;].getService(Ci.nsIObserverService);</span>
<a href="#l12.15"></a><span id="l12.15"> </span>
<a href="#l12.16"></a><span id="l12.16">   //Attach the new window open listener</span>
<a href="#l12.17"></a><span id="l12.17">   observerService.addObserver(this.observer, &quot;toplevel-window-ready&quot;, false);</span>
<a href="#l12.18"></a><span id="l12.18"> </span>
<a href="#l12.19"></a><span id="l12.19">   currentRecorderArray = [];</span>
<a href="#l12.20"></a><span id="l12.20"> };</span>
<a href="#l12.21"></a><span id="l12.21"> </span>
<a href="#l12.22"></a><span id="l12.22"> RecorderConnector.prototype.off = function() {</span>
<a href="#l12.23"></a><span id="l12.23" class="difflineat">@@ -304,18 +303,17 @@ RecorderConnector.prototype.off = functi</span>
<a href="#l12.24"></a><span id="l12.24">     this.unbindListeners(win);</span>
<a href="#l12.25"></a><span id="l12.25">   }</span>
<a href="#l12.26"></a><span id="l12.26">   var r = getRecordedScript(currentRecorderArray);</span>
<a href="#l12.27"></a><span id="l12.27"> </span>
<a href="#l12.28"></a><span id="l12.28">   editor.setContent(r);</span>
<a href="#l12.29"></a><span id="l12.29">   currentRecorderArray = [];</span>
<a href="#l12.30"></a><span id="l12.30">   //remove new window listener</span>
<a href="#l12.31"></a><span id="l12.31">   var observerService =</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineminus">-    Components.classes[&quot;@mozilla.org/observer-service;1&quot;]</span>
<a href="#l12.33"></a><span id="l12.33" class="difflineminus">-      .getService(Components.interfaces.nsIObserverService);</span>
<a href="#l12.34"></a><span id="l12.34" class="difflineplus">+    Cc[&quot;@mozilla.org/observer-service;1&quot;].getService(Ci.nsIObserverService);</span>
<a href="#l12.35"></a><span id="l12.35">   try { observerService.removeObserver(this.observer, &quot;toplevel-window-ready&quot;); }</span>
<a href="#l12.36"></a><span id="l12.36">   catch(err){}</span>
<a href="#l12.37"></a><span id="l12.37"> };</span>
<a href="#l12.38"></a><span id="l12.38"> </span>
<a href="#l12.39"></a><span id="l12.39"> var MozMillrec = new RecorderConnector();</span>
<a href="#l12.40"></a><span id="l12.40"> </span>
<a href="#l12.41"></a><span id="l12.41"> // Scoping bug workarounds</span>
<a href="#l12.42"></a><span id="l12.42"> var enableRec = function () {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">deleted file mode 100644</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineminus">--- a/mail/test/resources/mozmill/patches/eventUtils.patch</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineplus">+++ /dev/null</span>
<a href="#l13.4"></a><span id="l13.4" class="difflineat">@@ -1,218 +0,0 @@</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineminus">-diff --git a/mozmill/mozmill/extension/resource/stdlib/EventUtils.js b/mozmill/mozmill/extension/resource/stdlib/EventUtils.js</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineminus">-index 27fbbc7..0329d47 100644</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineminus">---- a/mozmill/mozmill/extension/resource/stdlib/EventUtils.js</span>
<a href="#l13.8"></a><span id="l13.8" class="difflineminus">-+++ b/mozmill/mozmill/extension/resource/stdlib/EventUtils.js</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineminus">-@@ -1,3 +1,24 @@</span>
<a href="#l13.10"></a><span id="l13.10" class="difflineminus">-+// Export all available functions for Mozmill</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineminus">-+var EXPORTED_SYMBOLS = [&quot;sendMouseEvent&quot;, &quot;sendChar&quot;, &quot;sendString&quot;, &quot;sendKey&quot;,</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-+                         &quot;__doEventDispatch&quot;, &quot;_parseModifiers&quot;, &quot;synthesizeMouse&quot;,</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineminus">-+                         &quot;synthesizeMouseScroll&quot;, &quot;synthesizeKey&quot;, &quot;_expectEvent&quot;,</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineminus">-+                         &quot;_checkExpectedEvent&quot;, &quot;synthesizeMouseExpectEvent&quot;,</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineminus">-+                         &quot;synthesizeDragStart&quot;, &quot;synthesizeDrop&quot;,</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineminus">-+                         &quot;disableNonTestMouseEvents&quot;, &quot;_getDOMWindowUtils&quot;,</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineminus">-+                         &quot;synthesizeComposition&quot;, &quot;synthesizeText&quot;,</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineminus">-+                         &quot;synthesizeQuerySelectedText&quot;, &quot;synthesizeQueryTextContent&quot;,</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineminus">-+                         &quot;synthesizeQueryCaretRect&quot;, &quot;synthesizeQueryTextRect&quot;,</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineminus">-+                         &quot;synthesizeQueryEditorRect&quot;, &quot;synthesizeCharAtPoint&quot;,</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineminus">-+                         &quot;synthesizeSelectionSet&quot;];</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineminus">-+</span>
<a href="#l13.23"></a><span id="l13.23" class="difflineminus">-+/**</span>
<a href="#l13.24"></a><span id="l13.24" class="difflineminus">-+ * Get the array with available key events</span>
<a href="#l13.25"></a><span id="l13.25" class="difflineminus">-+ */</span>
<a href="#l13.26"></a><span id="l13.26" class="difflineminus">-+function getKeyEvent(aWindow) {</span>
<a href="#l13.27"></a><span id="l13.27" class="difflineminus">-+  var win = aWindow.wrappedJSObject ? aWindow.wrappedJSObject : aWindow;</span>
<a href="#l13.28"></a><span id="l13.28" class="difflineminus">-+  return win.KeyEvent;</span>
<a href="#l13.29"></a><span id="l13.29" class="difflineminus">-+}</span>
<a href="#l13.30"></a><span id="l13.30" class="difflineminus">-+</span>
<a href="#l13.31"></a><span id="l13.31" class="difflineminus">- /**</span>
<a href="#l13.32"></a><span id="l13.32" class="difflineminus">-  * EventUtils provides some utility methods for creating and sending DOM events.</span>
<a href="#l13.33"></a><span id="l13.33" class="difflineminus">-  * Current methods:</span>
<a href="#l13.34"></a><span id="l13.34" class="difflineminus">-@@ -29,9 +50,6 @@ function sendMouseEvent(aEvent, aTarget, aWindow) {</span>
<a href="#l13.35"></a><span id="l13.35" class="difflineminus">-     aTarget = aWindow.document.getElementById(aTarget);</span>
<a href="#l13.36"></a><span id="l13.36" class="difflineminus">-   }</span>
<a href="#l13.37"></a><span id="l13.37" class="difflineminus">- </span>
<a href="#l13.38"></a><span id="l13.38" class="difflineminus">--  // For events to trigger the UA's default actions they need to be &quot;trusted&quot;</span>
<a href="#l13.39"></a><span id="l13.39" class="difflineminus">--  netscape.security.PrivilegeManager.enablePrivilege('UniversalBrowserWrite');</span>
<a href="#l13.40"></a><span id="l13.40" class="difflineminus">--</span>
<a href="#l13.41"></a><span id="l13.41" class="difflineminus">-   var event = aWindow.document.createEvent('MouseEvent');</span>
<a href="#l13.42"></a><span id="l13.42" class="difflineminus">- </span>
<a href="#l13.43"></a><span id="l13.43" class="difflineminus">-   var typeArg          = aEvent.type;</span>
<a href="#l13.44"></a><span id="l13.44" class="difflineminus">-@@ -107,14 +125,17 @@ function sendString(aStr, aTarget) {</span>
<a href="#l13.45"></a><span id="l13.45" class="difflineminus">-  * Returns true if the keypress event was accepted (no calls to preventDefault</span>
<a href="#l13.46"></a><span id="l13.46" class="difflineminus">-  * or anything like that), false otherwise.</span>
<a href="#l13.47"></a><span id="l13.47" class="difflineminus">-  */</span>
<a href="#l13.48"></a><span id="l13.48" class="difflineminus">--function sendKey(aKey, aTarget) {</span>
<a href="#l13.49"></a><span id="l13.49" class="difflineminus">-+function sendKey(aKey, aTarget, aWindow) {</span>
<a href="#l13.50"></a><span id="l13.50" class="difflineminus">-+  if (!aWindow)</span>
<a href="#l13.51"></a><span id="l13.51" class="difflineminus">-+    aWindow = window;</span>
<a href="#l13.52"></a><span id="l13.52" class="difflineminus">-+</span>
<a href="#l13.53"></a><span id="l13.53" class="difflineminus">-   keyName = &quot;DOM_VK_&quot; + aKey.toUpperCase();</span>
<a href="#l13.54"></a><span id="l13.54" class="difflineminus">- </span>
<a href="#l13.55"></a><span id="l13.55" class="difflineminus">--  if (!KeyEvent[keyName]) {</span>
<a href="#l13.56"></a><span id="l13.56" class="difflineminus">-+  if (!getKeyEvent(aWindow)[keyName]) {</span>
<a href="#l13.57"></a><span id="l13.57" class="difflineminus">-     throw &quot;Unknown key: &quot; + keyName;</span>
<a href="#l13.58"></a><span id="l13.58" class="difflineminus">-   }</span>
<a href="#l13.59"></a><span id="l13.59" class="difflineminus">- </span>
<a href="#l13.60"></a><span id="l13.60" class="difflineminus">--  return __doEventDispatch(aTarget, 0, KeyEvent[keyName], false);</span>
<a href="#l13.61"></a><span id="l13.61" class="difflineminus">-+  return __doEventDispatch(aTarget, 0, getKeyEvent(aWindow)[keyName], false);</span>
<a href="#l13.62"></a><span id="l13.62" class="difflineminus">- }</span>
<a href="#l13.63"></a><span id="l13.63" class="difflineminus">- </span>
<a href="#l13.64"></a><span id="l13.64" class="difflineminus">- /**</span>
<a href="#l13.65"></a><span id="l13.65" class="difflineminus">-@@ -130,9 +151,6 @@ function __doEventDispatch(aTarget, aCharCode, aKeyCode, aHasShift) {</span>
<a href="#l13.66"></a><span id="l13.66" class="difflineminus">-     aTarget = &quot;target&quot;;</span>
<a href="#l13.67"></a><span id="l13.67" class="difflineminus">-   }</span>
<a href="#l13.68"></a><span id="l13.68" class="difflineminus">- </span>
<a href="#l13.69"></a><span id="l13.69" class="difflineminus">--  // Make our events trusted</span>
<a href="#l13.70"></a><span id="l13.70" class="difflineminus">--  netscape.security.PrivilegeManager.enablePrivilege(&quot;UniversalXPConnect&quot;);</span>
<a href="#l13.71"></a><span id="l13.71" class="difflineminus">--</span>
<a href="#l13.72"></a><span id="l13.72" class="difflineminus">-   var event = document.createEvent(&quot;KeyEvents&quot;);</span>
<a href="#l13.73"></a><span id="l13.73" class="difflineminus">-   event.initKeyEvent(&quot;keydown&quot;, true, true, document.defaultView,</span>
<a href="#l13.74"></a><span id="l13.74" class="difflineminus">-                      false, false, aHasShift, false,</span>
<a href="#l13.75"></a><span id="l13.75" class="difflineminus">-@@ -171,6 +189,10 @@ function __doEventDispatch(aTarget, aCharCode, aKeyCode, aHasShift) {</span>
<a href="#l13.76"></a><span id="l13.76" class="difflineminus">-  */</span>
<a href="#l13.77"></a><span id="l13.77" class="difflineminus">- function _parseModifiers(aEvent)</span>
<a href="#l13.78"></a><span id="l13.78" class="difflineminus">- {</span>
<a href="#l13.79"></a><span id="l13.79" class="difflineminus">-+  var hwindow = Components.classes[&quot;@mozilla.org/appshell/appShellService;1&quot;]</span>
<a href="#l13.80"></a><span id="l13.80" class="difflineminus">-+                          .getService(Components.interfaces.nsIAppShellService)</span>
<a href="#l13.81"></a><span id="l13.81" class="difflineminus">-+                          .hiddenDOMWindow;</span>
<a href="#l13.82"></a><span id="l13.82" class="difflineminus">-+</span>
<a href="#l13.83"></a><span id="l13.83" class="difflineminus">-   const masks = Components.interfaces.nsIDOMNSEvent;</span>
<a href="#l13.84"></a><span id="l13.84" class="difflineminus">-   var mval = 0;</span>
<a href="#l13.85"></a><span id="l13.85" class="difflineminus">-   if (aEvent.shiftKey)</span>
<a href="#l13.86"></a><span id="l13.86" class="difflineminus">-@@ -182,8 +204,8 @@ function _parseModifiers(aEvent)</span>
<a href="#l13.87"></a><span id="l13.87" class="difflineminus">-   if (aEvent.metaKey)</span>
<a href="#l13.88"></a><span id="l13.88" class="difflineminus">-     mval |= masks.META_MASK;</span>
<a href="#l13.89"></a><span id="l13.89" class="difflineminus">-   if (aEvent.accelKey)</span>
<a href="#l13.90"></a><span id="l13.90" class="difflineminus">--    mval |= (navigator.platform.indexOf(&quot;Mac&quot;) &gt;= 0) ? masks.META_MASK :</span>
<a href="#l13.91"></a><span id="l13.91" class="difflineminus">--                                                       masks.CONTROL_MASK;</span>
<a href="#l13.92"></a><span id="l13.92" class="difflineminus">-+    mval |= (hwindow.navigator.platform.indexOf(&quot;Mac&quot;) &gt;= 0) ? masks.META_MASK :</span>
<a href="#l13.93"></a><span id="l13.93" class="difflineminus">-+                                                               masks.CONTROL_MASK;</span>
<a href="#l13.94"></a><span id="l13.94" class="difflineminus">- </span>
<a href="#l13.95"></a><span id="l13.95" class="difflineminus">-   return mval;</span>
<a href="#l13.96"></a><span id="l13.96" class="difflineminus">- }</span>
<a href="#l13.97"></a><span id="l13.97" class="difflineminus">-@@ -203,8 +225,6 @@ function _parseModifiers(aEvent)</span>
<a href="#l13.98"></a><span id="l13.98" class="difflineminus">-  */</span>
<a href="#l13.99"></a><span id="l13.99" class="difflineminus">- function synthesizeMouse(aTarget, aOffsetX, aOffsetY, aEvent, aWindow)</span>
<a href="#l13.100"></a><span id="l13.100" class="difflineminus">- {</span>
<a href="#l13.101"></a><span id="l13.101" class="difflineminus">--  netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');</span>
<a href="#l13.102"></a><span id="l13.102" class="difflineminus">--</span>
<a href="#l13.103"></a><span id="l13.103" class="difflineminus">-   if (!aWindow)</span>
<a href="#l13.104"></a><span id="l13.104" class="difflineminus">-     aWindow = window;</span>
<a href="#l13.105"></a><span id="l13.105" class="difflineminus">- </span>
<a href="#l13.106"></a><span id="l13.106" class="difflineminus">-@@ -253,8 +273,6 @@ function synthesizeMouse(aTarget, aOffsetX, aOffsetY, aEvent, aWindow)</span>
<a href="#l13.107"></a><span id="l13.107" class="difflineminus">-  */</span>
<a href="#l13.108"></a><span id="l13.108" class="difflineminus">- function synthesizeMouseScroll(aTarget, aOffsetX, aOffsetY, aEvent, aWindow)</span>
<a href="#l13.109"></a><span id="l13.109" class="difflineminus">- {</span>
<a href="#l13.110"></a><span id="l13.110" class="difflineminus">--  netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');</span>
<a href="#l13.111"></a><span id="l13.111" class="difflineminus">--</span>
<a href="#l13.112"></a><span id="l13.112" class="difflineminus">-   if (!aWindow)</span>
<a href="#l13.113"></a><span id="l13.113" class="difflineminus">-     aWindow = window;</span>
<a href="#l13.114"></a><span id="l13.114" class="difflineminus">- </span>
<a href="#l13.115"></a><span id="l13.115" class="difflineminus">-@@ -302,8 +320,6 @@ function synthesizeMouseScroll(aTarget, aOffsetX, aOffsetY, aEvent, aWindow)</span>
<a href="#l13.116"></a><span id="l13.116" class="difflineminus">-  */</span>
<a href="#l13.117"></a><span id="l13.117" class="difflineminus">- function synthesizeKey(aKey, aEvent, aWindow)</span>
<a href="#l13.118"></a><span id="l13.118" class="difflineminus">- {</span>
<a href="#l13.119"></a><span id="l13.119" class="difflineminus">--  netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');</span>
<a href="#l13.120"></a><span id="l13.120" class="difflineminus">--</span>
<a href="#l13.121"></a><span id="l13.121" class="difflineminus">-   if (!aWindow)</span>
<a href="#l13.122"></a><span id="l13.122" class="difflineminus">-     aWindow = window;</span>
<a href="#l13.123"></a><span id="l13.123" class="difflineminus">- </span>
<a href="#l13.124"></a><span id="l13.124" class="difflineminus">-@@ -312,7 +328,7 @@ function synthesizeKey(aKey, aEvent, aWindow)</span>
<a href="#l13.125"></a><span id="l13.125" class="difflineminus">-   if (utils) {</span>
<a href="#l13.126"></a><span id="l13.126" class="difflineminus">-     var keyCode = 0, charCode = 0;</span>
<a href="#l13.127"></a><span id="l13.127" class="difflineminus">-     if (aKey.indexOf(&quot;VK_&quot;) == 0)</span>
<a href="#l13.128"></a><span id="l13.128" class="difflineminus">--      keyCode = KeyEvent[&quot;DOM_&quot; + aKey];</span>
<a href="#l13.129"></a><span id="l13.129" class="difflineminus">-+      keyCode = getKeyEvent(aWindow)[&quot;DOM_&quot; + aKey];</span>
<a href="#l13.130"></a><span id="l13.130" class="difflineminus">-     else</span>
<a href="#l13.131"></a><span id="l13.131" class="difflineminus">-       charCode = aKey.charCodeAt(0);</span>
<a href="#l13.132"></a><span id="l13.132" class="difflineminus">- </span>
<a href="#l13.133"></a><span id="l13.133" class="difflineminus">-@@ -555,8 +571,6 @@ function synthesizeDrop(srcElement, destElement, dragData, dropEffect, aWindow)</span>
<a href="#l13.134"></a><span id="l13.134" class="difflineminus">- </span>
<a href="#l13.135"></a><span id="l13.135" class="difflineminus">- function disableNonTestMouseEvents(aDisable)</span>
<a href="#l13.136"></a><span id="l13.136" class="difflineminus">- {</span>
<a href="#l13.137"></a><span id="l13.137" class="difflineminus">--  netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');</span>
<a href="#l13.138"></a><span id="l13.138" class="difflineminus">--</span>
<a href="#l13.139"></a><span id="l13.139" class="difflineminus">-   var utils =</span>
<a href="#l13.140"></a><span id="l13.140" class="difflineminus">-     window.QueryInterface(Components.interfaces.nsIInterfaceRequestor).</span>
<a href="#l13.141"></a><span id="l13.141" class="difflineminus">-            getInterface(Components.interfaces.nsIDOMWindowUtils);</span>
<a href="#l13.142"></a><span id="l13.142" class="difflineminus">-@@ -582,8 +596,6 @@ function _getDOMWindowUtils(aWindow)</span>
<a href="#l13.143"></a><span id="l13.143" class="difflineminus">-  */</span>
<a href="#l13.144"></a><span id="l13.144" class="difflineminus">- function synthesizeComposition(aIsCompositionStart, aWindow)</span>
<a href="#l13.145"></a><span id="l13.145" class="difflineminus">- {</span>
<a href="#l13.146"></a><span id="l13.146" class="difflineminus">--  netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');</span>
<a href="#l13.147"></a><span id="l13.147" class="difflineminus">--</span>
<a href="#l13.148"></a><span id="l13.148" class="difflineminus">-   var utils = _getDOMWindowUtils(aWindow);</span>
<a href="#l13.149"></a><span id="l13.149" class="difflineminus">-   if (!utils) {</span>
<a href="#l13.150"></a><span id="l13.150" class="difflineminus">-     return;</span>
<a href="#l13.151"></a><span id="l13.151" class="difflineminus">-@@ -635,8 +647,6 @@ function synthesizeComposition(aIsCompositionStart, aWindow)</span>
<a href="#l13.152"></a><span id="l13.152" class="difflineminus">-  */</span>
<a href="#l13.153"></a><span id="l13.153" class="difflineminus">- function synthesizeText(aEvent, aWindow)</span>
<a href="#l13.154"></a><span id="l13.154" class="difflineminus">- {</span>
<a href="#l13.155"></a><span id="l13.155" class="difflineminus">--  netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');</span>
<a href="#l13.156"></a><span id="l13.156" class="difflineminus">--</span>
<a href="#l13.157"></a><span id="l13.157" class="difflineminus">-   var utils = _getDOMWindowUtils(aWindow);</span>
<a href="#l13.158"></a><span id="l13.158" class="difflineminus">-   if (!utils) {</span>
<a href="#l13.159"></a><span id="l13.159" class="difflineminus">-     return;</span>
<a href="#l13.160"></a><span id="l13.160" class="difflineminus">-@@ -685,8 +695,6 @@ function synthesizeText(aEvent, aWindow)</span>
<a href="#l13.161"></a><span id="l13.161" class="difflineminus">-  */</span>
<a href="#l13.162"></a><span id="l13.162" class="difflineminus">- function synthesizeQuerySelectedText(aWindow)</span>
<a href="#l13.163"></a><span id="l13.163" class="difflineminus">- {</span>
<a href="#l13.164"></a><span id="l13.164" class="difflineminus">--  netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');</span>
<a href="#l13.165"></a><span id="l13.165" class="difflineminus">--</span>
<a href="#l13.166"></a><span id="l13.166" class="difflineminus">-   var utils = _getDOMWindowUtils(aWindow);</span>
<a href="#l13.167"></a><span id="l13.167" class="difflineminus">-   if (!utils) {</span>
<a href="#l13.168"></a><span id="l13.168" class="difflineminus">-     return nullptr;</span>
<a href="#l13.169"></a><span id="l13.169" class="difflineminus">-@@ -707,8 +715,6 @@ function synthesizeQuerySelectedText(aWindow)</span>
<a href="#l13.170"></a><span id="l13.170" class="difflineminus">-  */</span>
<a href="#l13.171"></a><span id="l13.171" class="difflineminus">- function synthesizeQueryTextContent(aOffset, aLength, aWindow)</span>
<a href="#l13.172"></a><span id="l13.172" class="difflineminus">- {</span>
<a href="#l13.173"></a><span id="l13.173" class="difflineminus">--  netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');</span>
<a href="#l13.174"></a><span id="l13.174" class="difflineminus">--</span>
<a href="#l13.175"></a><span id="l13.175" class="difflineminus">-   var utils = _getDOMWindowUtils(aWindow);</span>
<a href="#l13.176"></a><span id="l13.176" class="difflineminus">-   if (!utils) {</span>
<a href="#l13.177"></a><span id="l13.177" class="difflineminus">-     return nullptr;</span>
<a href="#l13.178"></a><span id="l13.178" class="difflineminus">-@@ -728,8 +734,6 @@ function synthesizeQueryTextContent(aOffset, aLength, aWindow)</span>
<a href="#l13.179"></a><span id="l13.179" class="difflineminus">-  */</span>
<a href="#l13.180"></a><span id="l13.180" class="difflineminus">- function synthesizeQueryCaretRect(aOffset, aWindow)</span>
<a href="#l13.181"></a><span id="l13.181" class="difflineminus">- {</span>
<a href="#l13.182"></a><span id="l13.182" class="difflineminus">--  netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');</span>
<a href="#l13.183"></a><span id="l13.183" class="difflineminus">--</span>
<a href="#l13.184"></a><span id="l13.184" class="difflineminus">-   var utils = _getDOMWindowUtils(aWindow);</span>
<a href="#l13.185"></a><span id="l13.185" class="difflineminus">-   if (!utils) {</span>
<a href="#l13.186"></a><span id="l13.186" class="difflineminus">-     return nullptr;</span>
<a href="#l13.187"></a><span id="l13.187" class="difflineminus">-@@ -751,8 +755,6 @@ function synthesizeQueryCaretRect(aOffset, aWindow)</span>
<a href="#l13.188"></a><span id="l13.188" class="difflineminus">-  */</span>
<a href="#l13.189"></a><span id="l13.189" class="difflineminus">- function synthesizeQueryTextRect(aOffset, aLength, aWindow)</span>
<a href="#l13.190"></a><span id="l13.190" class="difflineminus">- {</span>
<a href="#l13.191"></a><span id="l13.191" class="difflineminus">--  netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');</span>
<a href="#l13.192"></a><span id="l13.192" class="difflineminus">--</span>
<a href="#l13.193"></a><span id="l13.193" class="difflineminus">-   var utils = _getDOMWindowUtils(aWindow);</span>
<a href="#l13.194"></a><span id="l13.194" class="difflineminus">-   if (!utils) {</span>
<a href="#l13.195"></a><span id="l13.195" class="difflineminus">-     return nullptr;</span>
<a href="#l13.196"></a><span id="l13.196" class="difflineminus">-@@ -770,8 +772,6 @@ function synthesizeQueryTextRect(aOffset, aLength, aWindow)</span>
<a href="#l13.197"></a><span id="l13.197" class="difflineminus">-  */</span>
<a href="#l13.198"></a><span id="l13.198" class="difflineminus">- function synthesizeQueryEditorRect(aWindow)</span>
<a href="#l13.199"></a><span id="l13.199" class="difflineminus">- {</span>
<a href="#l13.200"></a><span id="l13.200" class="difflineminus">--  netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');</span>
<a href="#l13.201"></a><span id="l13.201" class="difflineminus">--</span>
<a href="#l13.202"></a><span id="l13.202" class="difflineminus">-   var utils = _getDOMWindowUtils(aWindow);</span>
<a href="#l13.203"></a><span id="l13.203" class="difflineminus">-   if (!utils) {</span>
<a href="#l13.204"></a><span id="l13.204" class="difflineminus">-     return nullptr;</span>
<a href="#l13.205"></a><span id="l13.205" class="difflineminus">-@@ -789,8 +789,6 @@ function synthesizeQueryEditorRect(aWindow)</span>
<a href="#l13.206"></a><span id="l13.206" class="difflineminus">-  */</span>
<a href="#l13.207"></a><span id="l13.207" class="difflineminus">- function synthesizeCharAtPoint(aX, aY, aWindow)</span>
<a href="#l13.208"></a><span id="l13.208" class="difflineminus">- {</span>
<a href="#l13.209"></a><span id="l13.209" class="difflineminus">--  netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');</span>
<a href="#l13.210"></a><span id="l13.210" class="difflineminus">--</span>
<a href="#l13.211"></a><span id="l13.211" class="difflineminus">-   var utils = _getDOMWindowUtils(aWindow);</span>
<a href="#l13.212"></a><span id="l13.212" class="difflineminus">-   if (!utils) {</span>
<a href="#l13.213"></a><span id="l13.213" class="difflineminus">-     return nullptr;</span>
<a href="#l13.214"></a><span id="l13.214" class="difflineminus">-@@ -813,8 +811,6 @@ function synthesizeCharAtPoint(aX, aY, aWindow)</span>
<a href="#l13.215"></a><span id="l13.215" class="difflineminus">-  */</span>
<a href="#l13.216"></a><span id="l13.216" class="difflineminus">- function synthesizeSelectionSet(aOffset, aLength, aReverse, aWindow)</span>
<a href="#l13.217"></a><span id="l13.217" class="difflineminus">- {</span>
<a href="#l13.218"></a><span id="l13.218" class="difflineminus">--  netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');</span>
<a href="#l13.219"></a><span id="l13.219" class="difflineminus">--</span>
<a href="#l13.220"></a><span id="l13.220" class="difflineminus">-   var utils = _getDOMWindowUtils(aWindow);</span>
<a href="#l13.221"></a><span id="l13.221" class="difflineminus">-   if (!utils) {</span>
<a href="#l13.222"></a><span id="l13.222" class="difflineminus">-     return false;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mailnews/addrbook/content/abDragDrop.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mailnews/addrbook/content/abDragDrop.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -165,18 +165,17 @@ var abDirTreeObserver = {</span>
<a href="#l14.4"></a><span id="l14.4">       return false;</span>
<a href="#l14.5"></a><span id="l14.5"> </span>
<a href="#l14.6"></a><span id="l14.6">     // XXX Due to bug 373125/bug 349044 we can't specify a default action,</span>
<a href="#l14.7"></a><span id="l14.7">     // so we default to move and this means that the user would have to press</span>
<a href="#l14.8"></a><span id="l14.8">     // ctrl to copy which most users don't realise.</span>
<a href="#l14.9"></a><span id="l14.9">     //</span>
<a href="#l14.10"></a><span id="l14.10">     // If target directory is a mailing list, then only allow copies.</span>
<a href="#l14.11"></a><span id="l14.11">     //    if (targetDirectory.isMailList &amp;&amp;</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-    //   dragSession.dragAction != Components.interfaces.</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineminus">-    //                             nsIDragService.DRAGDROP_ACTION_COPY)</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineplus">+    //   dragSession.dragAction != Ci.nsIDragService.DRAGDROP_ACTION_COPY)</span>
<a href="#l14.15"></a><span id="l14.15">     //return false;</span>
<a href="#l14.16"></a><span id="l14.16"> </span>
<a href="#l14.17"></a><span id="l14.17">     var srcDirectory = GetDirectoryFromURI(srcURI);</span>
<a href="#l14.18"></a><span id="l14.18"> </span>
<a href="#l14.19"></a><span id="l14.19">     // Only allow copy from read-only directories.</span>
<a href="#l14.20"></a><span id="l14.20">     if (srcDirectory.readOnly &amp;&amp;</span>
<a href="#l14.21"></a><span id="l14.21">         dragSession.dragAction != Ci.</span>
<a href="#l14.22"></a><span id="l14.22">                                   nsIDragService.DRAGDROP_ACTION_COPY)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mailnews/base/search/content/FilterEditor.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mailnews/base/search/content/FilterEditor.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -288,17 +288,17 @@ function initializeFilterTypeSelector()</span>
<a href="#l15.4"></a><span id="l15.4">     menuitemBeforePlugins: document.getElementById(&quot;runBeforePlugins&quot;),</span>
<a href="#l15.5"></a><span id="l15.5">     menuitemAfterPlugins: document.getElementById(&quot;runAfterPlugins&quot;),</span>
<a href="#l15.6"></a><span id="l15.6"> </span>
<a href="#l15.7"></a><span id="l15.7">     checkBoxArchive: document.getElementById(&quot;runArchive&quot;),</span>
<a href="#l15.8"></a><span id="l15.8">     checkBoxOutgoing: document.getElementById(&quot;runOutgoing&quot;),</span>
<a href="#l15.9"></a><span id="l15.9"> </span>
<a href="#l15.10"></a><span id="l15.10">     /**</span>
<a href="#l15.11"></a><span id="l15.11">      * Returns the currently set filter type (checkboxes) in terms</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-     * of a Components.interfaces.nsMsgFilterType value.</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+     * of a Ci.nsMsgFilterType value.</span>
<a href="#l15.14"></a><span id="l15.14">      */</span>
<a href="#l15.15"></a><span id="l15.15">     getType: function()</span>
<a href="#l15.16"></a><span id="l15.16">     {</span>
<a href="#l15.17"></a><span id="l15.17">       let type = nsMsgFilterType.None;</span>
<a href="#l15.18"></a><span id="l15.18"> </span>
<a href="#l15.19"></a><span id="l15.19">       if (this.checkBoxManual.checked)</span>
<a href="#l15.20"></a><span id="l15.20">         type |= nsMsgFilterType.Manual;</span>
<a href="#l15.21"></a><span id="l15.21"> </span>
<a href="#l15.22"></a><span id="l15.22" class="difflineat">@@ -323,17 +323,17 @@ function initializeFilterTypeSelector()</span>
<a href="#l15.23"></a><span id="l15.23"> </span>
<a href="#l15.24"></a><span id="l15.24">       return type;</span>
<a href="#l15.25"></a><span id="l15.25">     },</span>
<a href="#l15.26"></a><span id="l15.26"> </span>
<a href="#l15.27"></a><span id="l15.27">     /**</span>
<a href="#l15.28"></a><span id="l15.28">      * Sets the checkboxes to represent the filter type passed in.</span>
<a href="#l15.29"></a><span id="l15.29">      *</span>
<a href="#l15.30"></a><span id="l15.30">      * @param aType  the filter type to set in terms</span>
<a href="#l15.31"></a><span id="l15.31" class="difflineminus">-     *               of Components.interfaces.nsMsgFilterType values.</span>
<a href="#l15.32"></a><span id="l15.32" class="difflineplus">+     *               of Ci.nsMsgFilterType values.</span>
<a href="#l15.33"></a><span id="l15.33">      */</span>
<a href="#l15.34"></a><span id="l15.34">     setType: function(aType)</span>
<a href="#l15.35"></a><span id="l15.35">     {</span>
<a href="#l15.36"></a><span id="l15.36">       // If there is no type (event) requested, force &quot;when manually run&quot;</span>
<a href="#l15.37"></a><span id="l15.37">       if (aType == nsMsgFilterType.None)</span>
<a href="#l15.38"></a><span id="l15.38">         aType = nsMsgFilterType.Manual;</span>
<a href="#l15.39"></a><span id="l15.39"> </span>
<a href="#l15.40"></a><span id="l15.40">       this.checkBoxManual.checked   = aType &amp; nsMsgFilterType.Manual;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mailnews/db/gloda/content/glodacomplete.xml</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mailnews/db/gloda/content/glodacomplete.xml</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -24,28 +24,28 @@</span>
<a href="#l16.4"></a><span id="l16.4"> </span>
<a href="#l16.5"></a><span id="l16.5">             var existingItemsCount = this.richlistbox.childNodes.length;</span>
<a href="#l16.6"></a><span id="l16.6">             var item;</span>
<a href="#l16.7"></a><span id="l16.7"> </span>
<a href="#l16.8"></a><span id="l16.8">             // trim the leading/trailing whitespace</span>
<a href="#l16.9"></a><span id="l16.9">             var trimmedSearchString = controller.searchString.trim();</span>
<a href="#l16.10"></a><span id="l16.10"> </span>
<a href="#l16.11"></a><span id="l16.11">             // Unescape the URI spec for showing as an entry in the popup</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-            let url = Cc[&quot;@mozilla.org/intl/texttosuburi;1&quot;].</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">-              getService(Ci.nsITextToSubURI).</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineminus">-              unEscapeURIForUI(&quot;UTF-8&quot;, controller.getValueAt(this._currentIndex));</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineplus">+            let url = Cc[&quot;@mozilla.org/intl/texttosuburi;1&quot;]</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineplus">+                        .getService(Ci.nsITextToSubURI)</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineplus">+                        .unEscapeURIForUI(&quot;UTF-8&quot;, controller.getValueAt(this._currentIndex));</span>
<a href="#l16.18"></a><span id="l16.18"> </span>
<a href="#l16.19"></a><span id="l16.19">             // Unlike our superclass, we create nodes every time because we have</span>
<a href="#l16.20"></a><span id="l16.20">             //  heterogeneous results and we cannot rely on the XBL bindings to</span>
<a href="#l16.21"></a><span id="l16.21">             //  to change fast enough.</span>
<a href="#l16.22"></a><span id="l16.22">             item = document.createElementNS(&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;, &quot;richlistitem&quot;);</span>
<a href="#l16.23"></a><span id="l16.23"> </span>
<a href="#l16.24"></a><span id="l16.24" class="difflineminus">-            var glodaCompleter =  Cc[&quot;@mozilla.org/autocomplete/search;1?name=gloda&quot;].</span>
<a href="#l16.25"></a><span id="l16.25" class="difflineminus">-              getService(). //Components.interfaces.nsIAutoCompleteSearch)</span>
<a href="#l16.26"></a><span id="l16.26" class="difflineminus">-              wrappedJSObject;</span>
<a href="#l16.27"></a><span id="l16.27" class="difflineplus">+            let glodaCompleter = Cc[&quot;@mozilla.org/autocomplete/search;1?name=gloda&quot;]</span>
<a href="#l16.28"></a><span id="l16.28" class="difflineplus">+                                   .getService(Ci.nsIAutoCompleteSearch)</span>
<a href="#l16.29"></a><span id="l16.29" class="difflineplus">+                                   .wrappedJSObject;</span>
<a href="#l16.30"></a><span id="l16.30">             var result = glodaCompleter.curResult;</span>
<a href="#l16.31"></a><span id="l16.31"> </span>
<a href="#l16.32"></a><span id="l16.32">             // set these attributes before we set the class</span>
<a href="#l16.33"></a><span id="l16.33">             // so that we can use them from the contructor</span>
<a href="#l16.34"></a><span id="l16.34">             var row = result.getObjectAt(this._currentIndex);</span>
<a href="#l16.35"></a><span id="l16.35">             var obj = row.item;</span>
<a href="#l16.36"></a><span id="l16.36">             item.setAttribute(&quot;text&quot;, trimmedSearchString);</span>
<a href="#l16.37"></a><span id="l16.37">             item.setAttribute(&quot;type&quot;, result.getStyleAt(this._currentIndex));</span>
<a href="#l16.38"></a><span id="l16.38" class="difflineat">@@ -57,17 +57,17 @@</span>
<a href="#l16.39"></a><span id="l16.39">             item.className = &quot;autocomplete-richlistitem&quot;;</span>
<a href="#l16.40"></a><span id="l16.40">             this.richlistbox.appendChild(item);</span>
<a href="#l16.41"></a><span id="l16.41"> </span>
<a href="#l16.42"></a><span id="l16.42">             this._currentIndex++;</span>
<a href="#l16.43"></a><span id="l16.43">           }</span>
<a href="#l16.44"></a><span id="l16.44"> </span>
<a href="#l16.45"></a><span id="l16.45">           // yield after each batch of items so that typing the url bar is responsive</span>
<a href="#l16.46"></a><span id="l16.46">           setTimeout(() =&gt; this._appendCurrentResult(), 0);</span>
<a href="#l16.47"></a><span id="l16.47" class="difflineminus">-        ]]&gt;</span>
<a href="#l16.48"></a><span id="l16.48" class="difflineplus">+          ]]&gt;</span>
<a href="#l16.49"></a><span id="l16.49">         &lt;/body&gt;</span>
<a href="#l16.50"></a><span id="l16.50">       &lt;/method&gt;</span>
<a href="#l16.51"></a><span id="l16.51">       &lt;method name=&quot;_invalidate&quot;&gt;</span>
<a href="#l16.52"></a><span id="l16.52">         &lt;body&gt;</span>
<a href="#l16.53"></a><span id="l16.53">           &lt;![CDATA[</span>
<a href="#l16.54"></a><span id="l16.54">           setTimeout(() =&gt; this.adjustHeight(), 0);</span>
<a href="#l16.55"></a><span id="l16.55"> </span>
<a href="#l16.56"></a><span id="l16.56">           // remove all child nodes because we never want to reuse them.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mailnews/db/gloda/modules/index_msg.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mailnews/db/gloda/modules/index_msg.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -27,17 +27,17 @@ ChromeUtils.import(&quot;resource:///modules/</span>
<a href="#l17.4"></a><span id="l17.4"> ChromeUtils.import(&quot;resource:///modules/gloda/gloda.js&quot;);</span>
<a href="#l17.5"></a><span id="l17.5"> ChromeUtils.import(&quot;resource:///modules/gloda/collection.js&quot;);</span>
<a href="#l17.6"></a><span id="l17.6"> ChromeUtils.import(&quot;resource:///modules/gloda/connotent.js&quot;);</span>
<a href="#l17.7"></a><span id="l17.7"> </span>
<a href="#l17.8"></a><span id="l17.8"> ChromeUtils.import(&quot;resource:///modules/gloda/indexer.js&quot;);</span>
<a href="#l17.9"></a><span id="l17.9"> </span>
<a href="#l17.10"></a><span id="l17.10"> ChromeUtils.import(&quot;resource:///modules/gloda/mimemsg.js&quot;);</span>
<a href="#l17.11"></a><span id="l17.11"> </span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-// Components.results does not have mailnews error codes!</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+// Cr does not have mailnews error codes!</span>
<a href="#l17.14"></a><span id="l17.14"> var NS_MSG_ERROR_FOLDER_SUMMARY_OUT_OF_DATE = 0x80550005;</span>
<a href="#l17.15"></a><span id="l17.15"> </span>
<a href="#l17.16"></a><span id="l17.16"> var GLODA_MESSAGE_ID_PROPERTY = &quot;gloda-id&quot;;</span>
<a href="#l17.17"></a><span id="l17.17"> /**</span>
<a href="#l17.18"></a><span id="l17.18">  * Message header property to track dirty status; one of</span>
<a href="#l17.19"></a><span id="l17.19">  *  |GlodaIndexer.kMessageClean|, |GlodaIndexer.kMessageDirty|,</span>
<a href="#l17.20"></a><span id="l17.20">  *  |GlodaIndexer.kMessageFilthy|.</span>
<a href="#l17.21"></a><span id="l17.21">  */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mailnews/db/gloda/modules/log4moz.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mailnews/db/gloda/modules/log4moz.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -668,17 +668,17 @@ TimeAwareMemoryBucketAppender.prototype </span>
<a href="#l18.4"></a><span id="l18.4"> </span>
<a href="#l18.5"></a><span id="l18.5"> function ConsoleAppender(formatter) {</span>
<a href="#l18.6"></a><span id="l18.6">   this._name = &quot;ConsoleAppender&quot;;</span>
<a href="#l18.7"></a><span id="l18.7">   this._formatter = formatter;</span>
<a href="#l18.8"></a><span id="l18.8"> }</span>
<a href="#l18.9"></a><span id="l18.9"> ConsoleAppender.prototype = {</span>
<a href="#l18.10"></a><span id="l18.10">   __proto__: Appender.prototype,</span>
<a href="#l18.11"></a><span id="l18.11"> </span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-  // override to send Error and higher level messages to Components.utils.reportError()</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+  // override to send Error and higher level messages to Cu.reportError()</span>
<a href="#l18.14"></a><span id="l18.14">   append: function CApp_append(message) {</span>
<a href="#l18.15"></a><span id="l18.15">     let stringMessage = this._formatter.format(message);</span>
<a href="#l18.16"></a><span id="l18.16">     if (message.level &gt; Log4Moz.Level.Warn) {</span>
<a href="#l18.17"></a><span id="l18.17">       Cu.reportError(stringMessage);</span>
<a href="#l18.18"></a><span id="l18.18">     }</span>
<a href="#l18.19"></a><span id="l18.19">     this.doAppend(stringMessage);</span>
<a href="#l18.20"></a><span id="l18.20">   },</span>
<a href="#l18.21"></a><span id="l18.21"> </span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

