<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 25502:c39f35e517ffbffb547206b9b7f6c5eede04c46b</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ c39f35e517ffbffb547206b9b7f6c5eede04c46b" />
<meta property="og:url" content="/comm-central/rev/c39f35e517ffbffb547206b9b7f6c5eede04c46b" />
<meta property="og:description" content="Bug 1517040 - Port bug 1472558: fork richlistbox.xml until we have our code converted. rs=bustage-fix,jorgk" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / c39f35e517ffbffb547206b9b7f6c5eede04c46b 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/c39f35e517ffbffb547206b9b7f6c5eede04c46b">shortlog</a> |
<a href="/comm-central/log/c39f35e517ffbffb547206b9b7f6c5eede04c46b">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/c39f35e517ffbffb547206b9b7f6c5eede04c46b">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/c39f35e517ffbffb547206b9b7f6c5eede04c46b">files</a> |
changeset |
<a href="/comm-central/raw-rev/c39f35e517ffbffb547206b9b7f6c5eede04c46b">raw</a>  | <a href="/comm-central/archive/c39f35e517ffbffb547206b9b7f6c5eede04c46b.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1517040">Bug 1517040</a> - Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1472558">bug 1472558</a>: fork richlistbox.xml until we have our code converted. rs=bustage-fix,jorgk
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#65;&#114;&#115;&#104;&#97;&#100;&#32;&#75;&#104;&#97;&#110;&#32;&#60;&#97;&#114;&#115;&#104;&#100;&#107;&#104;&#110;&#49;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 04 Jan 2019 21:32:40 +0530</td></tr>

<tr>
 <td>changeset 25502</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/c39f35e517ffbffb547206b9b7f6c5eede04c46b">c39f35e517ffbffb547206b9b7f6c5eede04c46b</a></td>
</tr>



<tr>
<td>parent 25501</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/c6f13700602be09a6a59af8c6ff8d797b2c63a97">c6f13700602be09a6a59af8c6ff8d797b2c63a97</a>
</td>
</tr>

<tr>
<td>child 25503</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/fc3f22843429e674e2271d5a6381def607e44afb">fc3f22843429e674e2271d5a6381def607e44afb</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=c39f35e517ffbffb547206b9b7f6c5eede04c46b">15304</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Fri, 04 Jan 2019 18:33:23 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@c39f35e517ff [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=c39f35e517ffbffb547206b9b7f6c5eede04c46b">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=c39f35e517ffbffb547206b9b7f6c5eede04c46b&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=c39f35e517ffbffb547206b9b7f6c5eede04c46b&newProject=comm-central&newRevision=c39f35e517ffbffb547206b9b7f6c5eede04c46b&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=c39f35e517ffbffb547206b9b7f6c5eede04c46b&newProject=comm-central&newRevision=c39f35e517ffbffb547206b9b7f6c5eede04c46b&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=c39f35e517ffbffb547206b9b7f6c5eede04c46b&newProject=comm-central&newRevision=c39f35e517ffbffb547206b9b7f6c5eede04c46b&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28bustage-fix%29&revcount=50">bustage-fix</a>, <a href="/comm-central/log?rev=reviewer%28jorgk%29&revcount=50">jorgk</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1517040">1517040</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1472558">1472558</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1517040">Bug 1517040</a> - Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1472558">bug 1472558</a>: fork richlistbox.xml until we have our code converted. rs=bustage-fix,jorgk</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml">calendar/base/content/dialogs/calendar-event-dialog-attendees.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml">file</a> |
<a href="/comm-central/annotate/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml">annotate</a> |
<a href="/comm-central/diff/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml">diff</a> |
<a href="/comm-central/comparison/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml">comparison</a> |
<a href="/comm-central/log/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml">calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml">file</a> |
<a href="/comm-central/annotate/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml">annotate</a> |
<a href="/comm-central/diff/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml">diff</a> |
<a href="/comm-central/comparison/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml">comparison</a> |
<a href="/comm-central/log/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/dialogs/calendar-invitations-list.xml">calendar/base/content/dialogs/calendar-invitations-list.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/dialogs/calendar-invitations-list.xml">file</a> |
<a href="/comm-central/annotate/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/dialogs/calendar-invitations-list.xml">annotate</a> |
<a href="/comm-central/diff/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/dialogs/calendar-invitations-list.xml">diff</a> |
<a href="/comm-central/comparison/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/dialogs/calendar-invitations-list.xml">comparison</a> |
<a href="/comm-central/log/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/dialogs/calendar-invitations-list.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/widgets/calendar-subscriptions-list.xml">calendar/base/content/widgets/calendar-subscriptions-list.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/widgets/calendar-subscriptions-list.xml">file</a> |
<a href="/comm-central/annotate/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/widgets/calendar-subscriptions-list.xml">annotate</a> |
<a href="/comm-central/diff/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/widgets/calendar-subscriptions-list.xml">diff</a> |
<a href="/comm-central/comparison/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/widgets/calendar-subscriptions-list.xml">comparison</a> |
<a href="/comm-central/log/c39f35e517ffbffb547206b9b7f6c5eede04c46b/calendar/base/content/widgets/calendar-subscriptions-list.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c39f35e517ffbffb547206b9b7f6c5eede04c46b/common/bindings/richlistbox.xml">common/bindings/richlistbox.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c39f35e517ffbffb547206b9b7f6c5eede04c46b/common/bindings/richlistbox.xml">file</a> |
<a href="/comm-central/annotate/c39f35e517ffbffb547206b9b7f6c5eede04c46b/common/bindings/richlistbox.xml">annotate</a> |
<a href="/comm-central/diff/c39f35e517ffbffb547206b9b7f6c5eede04c46b/common/bindings/richlistbox.xml">diff</a> |
<a href="/comm-central/comparison/c39f35e517ffbffb547206b9b7f6c5eede04c46b/common/bindings/richlistbox.xml">comparison</a> |
<a href="/comm-central/log/c39f35e517ffbffb547206b9b7f6c5eede04c46b/common/bindings/richlistbox.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c39f35e517ffbffb547206b9b7f6c5eede04c46b/mail/base/content/aboutAddonsExtra.js">mail/base/content/aboutAddonsExtra.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c39f35e517ffbffb547206b9b7f6c5eede04c46b/mail/base/content/aboutAddonsExtra.js">file</a> |
<a href="/comm-central/annotate/c39f35e517ffbffb547206b9b7f6c5eede04c46b/mail/base/content/aboutAddonsExtra.js">annotate</a> |
<a href="/comm-central/diff/c39f35e517ffbffb547206b9b7f6c5eede04c46b/mail/base/content/aboutAddonsExtra.js">diff</a> |
<a href="/comm-central/comparison/c39f35e517ffbffb547206b9b7f6c5eede04c46b/mail/base/content/aboutAddonsExtra.js">comparison</a> |
<a href="/comm-central/log/c39f35e517ffbffb547206b9b7f6c5eede04c46b/mail/base/content/aboutAddonsExtra.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c39f35e517ffbffb547206b9b7f6c5eede04c46b/mail/base/content/mailWidgets.xml">mail/base/content/mailWidgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c39f35e517ffbffb547206b9b7f6c5eede04c46b/mail/base/content/mailWidgets.xml">file</a> |
<a href="/comm-central/annotate/c39f35e517ffbffb547206b9b7f6c5eede04c46b/mail/base/content/mailWidgets.xml">annotate</a> |
<a href="/comm-central/diff/c39f35e517ffbffb547206b9b7f6c5eede04c46b/mail/base/content/mailWidgets.xml">diff</a> |
<a href="/comm-central/comparison/c39f35e517ffbffb547206b9b7f6c5eede04c46b/mail/base/content/mailWidgets.xml">comparison</a> |
<a href="/comm-central/log/c39f35e517ffbffb547206b9b7f6c5eede04c46b/mail/base/content/mailWidgets.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c39f35e517ffbffb547206b9b7f6c5eede04c46b/mail/base/jar.mn">mail/base/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c39f35e517ffbffb547206b9b7f6c5eede04c46b/mail/base/jar.mn">file</a> |
<a href="/comm-central/annotate/c39f35e517ffbffb547206b9b7f6c5eede04c46b/mail/base/jar.mn">annotate</a> |
<a href="/comm-central/diff/c39f35e517ffbffb547206b9b7f6c5eede04c46b/mail/base/jar.mn">diff</a> |
<a href="/comm-central/comparison/c39f35e517ffbffb547206b9b7f6c5eede04c46b/mail/base/jar.mn">comparison</a> |
<a href="/comm-central/log/c39f35e517ffbffb547206b9b7f6c5eede04c46b/mail/base/jar.mn">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -7,17 +7,17 @@</span>
<a href="#l1.4"></a><span id="l1.4">   &lt;!ENTITY % dtd1 SYSTEM &quot;chrome://calendar/locale/global.dtd&quot; &gt; %dtd1;</span>
<a href="#l1.5"></a><span id="l1.5">   &lt;!ENTITY % dtd2 SYSTEM &quot;chrome://calendar/locale/calendar.dtd&quot; &gt; %dtd2;</span>
<a href="#l1.6"></a><span id="l1.6">   &lt;!ENTITY % dtd3 SYSTEM &quot;chrome://calendar/locale/calendar-event-dialog.dtd&quot;&gt; %dtd3;</span>
<a href="#l1.7"></a><span id="l1.7"> ]&gt;</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9"> &lt;bindings xmlns=&quot;http://www.mozilla.org/xbl&quot;</span>
<a href="#l1.10"></a><span id="l1.10">           xmlns:xbl=&quot;http://www.mozilla.org/xbl&quot;</span>
<a href="#l1.11"></a><span id="l1.11">           xmlns:xul=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-  &lt;binding id=&quot;attendees-list&quot; extends=&quot;chrome://global/content/bindings/richlistbox.xml#richlistbox&quot;&gt;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+  &lt;binding id=&quot;attendees-list&quot; extends=&quot;chrome://messenger/content/richlistbox.xml#xbl-richlistbox&quot;&gt;</span>
<a href="#l1.14"></a><span id="l1.14">     &lt;implementation&gt;</span>
<a href="#l1.15"></a><span id="l1.15">       &lt;field name=&quot;mMaxAttendees&quot;&gt;0&lt;/field&gt;</span>
<a href="#l1.16"></a><span id="l1.16">       &lt;field name=&quot;mContentHeight&quot;&gt;0&lt;/field&gt;</span>
<a href="#l1.17"></a><span id="l1.17">       &lt;field name=&quot;mRowHeight&quot;&gt;0&lt;/field&gt;</span>
<a href="#l1.18"></a><span id="l1.18">       &lt;field name=&quot;mNumColumns&quot;&gt;3&lt;/field&gt;</span>
<a href="#l1.19"></a><span id="l1.19">       &lt;field name=&quot;mIsOffline&quot;&gt;0&lt;/field&gt;</span>
<a href="#l1.20"></a><span id="l1.20">       &lt;field name=&quot;mIsReadOnly&quot;&gt;false&lt;/field&gt;</span>
<a href="#l1.21"></a><span id="l1.21">       &lt;field name=&quot;mIsInvitation&quot;&gt;false&lt;/field&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -210,17 +210,17 @@</span>
<a href="#l2.4"></a><span id="l2.4">             }</span>
<a href="#l2.5"></a><span id="l2.5"> </span>
<a href="#l2.6"></a><span id="l2.6">             return val;</span>
<a href="#l2.7"></a><span id="l2.7">         ]]&gt;&lt;/setter&gt;</span>
<a href="#l2.8"></a><span id="l2.8">       &lt;/property&gt;</span>
<a href="#l2.9"></a><span id="l2.9">     &lt;/implementation&gt;</span>
<a href="#l2.10"></a><span id="l2.10">   &lt;/binding&gt;</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-  &lt;binding id=&quot;freebusy-timebar&quot; extends=&quot;chrome://global/content/bindings/richlistbox.xml#richlistbox&quot;&gt;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+  &lt;binding id=&quot;freebusy-timebar&quot; extends=&quot;chrome://messenger/content/richlistbox.xml#xbl-richlistbox&quot;&gt;</span>
<a href="#l2.14"></a><span id="l2.14">     &lt;implementation&gt;</span>
<a href="#l2.15"></a><span id="l2.15">       &lt;field name=&quot;mNumDays&quot;&gt;0&lt;/field&gt;</span>
<a href="#l2.16"></a><span id="l2.16">       &lt;field name=&quot;mRange&quot;&gt;0&lt;/field&gt;</span>
<a href="#l2.17"></a><span id="l2.17">       &lt;field name=&quot;mStartDate&quot;&gt;null&lt;/field&gt;</span>
<a href="#l2.18"></a><span id="l2.18">       &lt;field name=&quot;mEndDate&quot;&gt;null&lt;/field&gt;</span>
<a href="#l2.19"></a><span id="l2.19">       &lt;field name=&quot;mDayOffset&quot;&gt;0&lt;/field&gt;</span>
<a href="#l2.20"></a><span id="l2.20">       &lt;field name=&quot;mScrollOffset&quot;&gt;0&lt;/field&gt;</span>
<a href="#l2.21"></a><span id="l2.21">       &lt;field name=&quot;mStartHour&quot;&gt;0&lt;/field&gt;</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineat">@@ -891,17 +891,17 @@</span>
<a href="#l2.23"></a><span id="l2.23">                 this.mStartHour = Preferences.get(&quot;calendar.view.daystarthour&quot;, 8);</span>
<a href="#l2.24"></a><span id="l2.24">                 this.mEndHour = Preferences.get(&quot;calendar.view.dayendhour&quot;, 19);</span>
<a href="#l2.25"></a><span id="l2.25">             }</span>
<a href="#l2.26"></a><span id="l2.26">         ]]&gt;&lt;/body&gt;</span>
<a href="#l2.27"></a><span id="l2.27">       &lt;/method&gt;</span>
<a href="#l2.28"></a><span id="l2.28">     &lt;/implementation&gt;</span>
<a href="#l2.29"></a><span id="l2.29">   &lt;/binding&gt;</span>
<a href="#l2.30"></a><span id="l2.30"> </span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-  &lt;binding id=&quot;freebusy-grid&quot; extends=&quot;chrome://global/content/bindings/richlistbox.xml#richlistbox&quot;&gt;</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+  &lt;binding id=&quot;freebusy-grid&quot; extends=&quot;chrome://messenger/content/richlistbox.xml#xbl-richlistbox&quot;&gt;</span>
<a href="#l2.33"></a><span id="l2.33">     &lt;implementation&gt;</span>
<a href="#l2.34"></a><span id="l2.34">       &lt;field name=&quot;mContentHeight&quot;&gt;0&lt;/field&gt;</span>
<a href="#l2.35"></a><span id="l2.35">       &lt;field name=&quot;mRowHeight&quot;&gt;0&lt;/field&gt;</span>
<a href="#l2.36"></a><span id="l2.36">       &lt;field name=&quot;mMaxFreeBusy&quot;&gt;0&lt;/field&gt;</span>
<a href="#l2.37"></a><span id="l2.37">       &lt;field name=&quot;mPendingRequests&quot;&gt;null&lt;/field&gt;</span>
<a href="#l2.38"></a><span id="l2.38">       &lt;field name=&quot;mStartDate&quot;&gt;null&lt;/field&gt;</span>
<a href="#l2.39"></a><span id="l2.39">       &lt;field name=&quot;mEndDate&quot;&gt;null&lt;/field&gt;</span>
<a href="#l2.40"></a><span id="l2.40">       &lt;field name=&quot;mScrollOffset&quot;&gt;0&lt;/field&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-invitations-list.xml</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-invitations-list.xml</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -7,17 +7,17 @@</span>
<a href="#l3.4"></a><span id="l3.4">   &lt;!ENTITY % dtd1 SYSTEM &quot;chrome://calendar/locale/calendar-invitations-dialog.dtd&quot; &gt;  %dtd1;</span>
<a href="#l3.5"></a><span id="l3.5"> ]&gt;</span>
<a href="#l3.6"></a><span id="l3.6"> </span>
<a href="#l3.7"></a><span id="l3.7"> &lt;bindings id=&quot;calendar-invitations-list-bindings&quot;</span>
<a href="#l3.8"></a><span id="l3.8">           xmlns=&quot;http://www.mozilla.org/xbl&quot;</span>
<a href="#l3.9"></a><span id="l3.9">           xmlns:xul=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l3.10"></a><span id="l3.10">           xmlns:xbl=&quot;http://www.mozilla.org/xbl&quot;&gt;</span>
<a href="#l3.11"></a><span id="l3.11">   &lt;binding id=&quot;calendar-invitations-richlistbox&quot;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-           extends=&quot;chrome://global/content/bindings/richlistbox.xml#richlistbox&quot;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+           extends=&quot;chrome://messenger/content/richlistbox.xml#xbl-richlistbox&quot;</span>
<a href="#l3.14"></a><span id="l3.14">            xbl:inherits=&quot;flex&quot;&gt;</span>
<a href="#l3.15"></a><span id="l3.15">     &lt;implementation&gt;</span>
<a href="#l3.16"></a><span id="l3.16">       &lt;!-- methods --&gt;</span>
<a href="#l3.17"></a><span id="l3.17">       &lt;method name=&quot;addCalendarItem&quot;&gt;</span>
<a href="#l3.18"></a><span id="l3.18">         &lt;parameter name=&quot;aItem&quot;/&gt;</span>
<a href="#l3.19"></a><span id="l3.19">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l3.20"></a><span id="l3.20">             let newNode = createXULElement(&quot;calendar-invitations-richlistitem&quot;);</span>
<a href="#l3.21"></a><span id="l3.21">             this.appendChild(newNode);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/content/widgets/calendar-subscriptions-list.xml</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/content/widgets/calendar-subscriptions-list.xml</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -6,17 +6,17 @@</span>
<a href="#l4.4"></a><span id="l4.4"> </span>
<a href="#l4.5"></a><span id="l4.5"> &lt;bindings id=&quot;calendar-subscriptions-list-bindings&quot;</span>
<a href="#l4.6"></a><span id="l4.6">           xmlns=&quot;http://www.mozilla.org/xbl&quot;</span>
<a href="#l4.7"></a><span id="l4.7">           xmlns:html=&quot;http://www.w3.org/1999/xhtml&quot;</span>
<a href="#l4.8"></a><span id="l4.8">           xmlns:xul=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l4.9"></a><span id="l4.9">           xmlns:xbl=&quot;http://www.mozilla.org/xbl&quot;&gt;</span>
<a href="#l4.10"></a><span id="l4.10"> </span>
<a href="#l4.11"></a><span id="l4.11">   &lt;binding id=&quot;calendar-subscriptions-richlistbox&quot;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-           extends=&quot;chrome://global/content/bindings/richlistbox.xml#richlistbox&quot;</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+           extends=&quot;chrome://messenger/content/richlistbox.xml#xbl-richlistbox&quot;</span>
<a href="#l4.14"></a><span id="l4.14">            xbl:inherits=&quot;flex&quot;&gt;</span>
<a href="#l4.15"></a><span id="l4.15"> </span>
<a href="#l4.16"></a><span id="l4.16">     &lt;implementation&gt;</span>
<a href="#l4.17"></a><span id="l4.17">       &lt;method name=&quot;addCalendar&quot;&gt;</span>
<a href="#l4.18"></a><span id="l4.18">         &lt;parameter name=&quot;aCalendar&quot;/&gt;</span>
<a href="#l4.19"></a><span id="l4.19">         &lt;parameter name=&quot;bSubscribed&quot;/&gt;</span>
<a href="#l4.20"></a><span id="l4.20">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l4.21"></a><span id="l4.21">             let newNode = createXULElement(&quot;calendar-subscriptions-richlistitem&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1">new file mode 100644</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineminus">--- /dev/null</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineplus">+++ b/common/bindings/richlistbox.xml</span>
<a href="#l5.4"></a><span id="l5.4" class="difflineat">@@ -0,0 +1,958 @@</span>
<a href="#l5.5"></a><span id="l5.5" class="difflineplus">+&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l5.6"></a><span id="l5.6" class="difflineplus">+</span>
<a href="#l5.7"></a><span id="l5.7" class="difflineplus">+&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l5.8"></a><span id="l5.8" class="difflineplus">+   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l5.9"></a><span id="l5.9" class="difflineplus">+   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l5.10"></a><span id="l5.10" class="difflineplus">+</span>
<a href="#l5.11"></a><span id="l5.11" class="difflineplus">+&lt;!-- This file relies on these specific Chrome/XBL globals --&gt;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+&lt;!-- globals ChromeNodeList --&gt;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+&lt;bindings id=&quot;richlistboxBindings&quot;</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineplus">+          xmlns=&quot;http://www.mozilla.org/xbl&quot;</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+          xmlns:xul=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineplus">+          xmlns:xbl=&quot;http://www.mozilla.org/xbl&quot;&gt;</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineplus">+</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineplus">+  &lt;binding id=&quot;xbl-richlistbox&quot;</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineplus">+           extends=&quot;chrome://global/content/bindings/general.xml#basecontrol&quot;&gt;</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineplus">+    &lt;content&gt;</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineplus">+      &lt;children includes=&quot;listheader&quot;/&gt;</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineplus">+      &lt;xul:scrollbox allowevents=&quot;true&quot; orient=&quot;vertical&quot; anonid=&quot;main-box&quot;</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineplus">+                     flex=&quot;1&quot; style=&quot;overflow: auto;&quot; xbl:inherits=&quot;dir,pack&quot;&gt;</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineplus">+        &lt;children/&gt;</span>
<a href="#l5.26"></a><span id="l5.26" class="difflineplus">+      &lt;/xul:scrollbox&gt;</span>
<a href="#l5.27"></a><span id="l5.27" class="difflineplus">+    &lt;/content&gt;</span>
<a href="#l5.28"></a><span id="l5.28" class="difflineplus">+</span>
<a href="#l5.29"></a><span id="l5.29" class="difflineplus">+    &lt;implementation implements=&quot;nsIDOMXULMultiSelectControlElement&quot;&gt;</span>
<a href="#l5.30"></a><span id="l5.30" class="difflineplus">+      &lt;field name=&quot;_scrollbox&quot;&gt;</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineplus">+        document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;main-box&quot;);</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l5.33"></a><span id="l5.33" class="difflineplus">+      &lt;constructor&gt;</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.35"></a><span id="l5.35" class="difflineplus">+          this._refreshSelection();</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineplus">+      &lt;/constructor&gt;</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineplus">+</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineplus">+      &lt;method name=&quot;_fireOnSelect&quot;&gt;</span>
<a href="#l5.40"></a><span id="l5.40" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l5.42"></a><span id="l5.42" class="difflineplus">+            // make sure not to modify last-selected when suppressing select events</span>
<a href="#l5.43"></a><span id="l5.43" class="difflineplus">+            // (otherwise we'll lose the selection when a template gets rebuilt)</span>
<a href="#l5.44"></a><span id="l5.44" class="difflineplus">+            if (this._suppressOnSelect || this.suppressOnSelect)</span>
<a href="#l5.45"></a><span id="l5.45" class="difflineplus">+              return;</span>
<a href="#l5.46"></a><span id="l5.46" class="difflineplus">+</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineplus">+            // remember the current item and all selected items with IDs</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineplus">+            var state = this.currentItem ? this.currentItem.id : &quot;&quot;;</span>
<a href="#l5.49"></a><span id="l5.49" class="difflineplus">+            if (this.selType == &quot;multiple&quot; &amp;&amp; this.selectedCount) {</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineplus">+              let getId = function(aItem) { return aItem.id; };</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+              state += &quot; &quot; + [...this.selectedItems].filter(getId).map(getId).join(&quot; &quot;);</span>
<a href="#l5.52"></a><span id="l5.52" class="difflineplus">+            }</span>
<a href="#l5.53"></a><span id="l5.53" class="difflineplus">+            if (state)</span>
<a href="#l5.54"></a><span id="l5.54" class="difflineplus">+              this.setAttribute(&quot;last-selected&quot;, state);</span>
<a href="#l5.55"></a><span id="l5.55" class="difflineplus">+            else</span>
<a href="#l5.56"></a><span id="l5.56" class="difflineplus">+              this.removeAttribute(&quot;last-selected&quot;);</span>
<a href="#l5.57"></a><span id="l5.57" class="difflineplus">+</span>
<a href="#l5.58"></a><span id="l5.58" class="difflineplus">+            // preserve the index just in case no IDs are available</span>
<a href="#l5.59"></a><span id="l5.59" class="difflineplus">+            if (this.currentIndex &gt; -1)</span>
<a href="#l5.60"></a><span id="l5.60" class="difflineplus">+              this._currentIndex = this.currentIndex + 1;</span>
<a href="#l5.61"></a><span id="l5.61" class="difflineplus">+</span>
<a href="#l5.62"></a><span id="l5.62" class="difflineplus">+            var event = document.createEvent(&quot;Events&quot;);</span>
<a href="#l5.63"></a><span id="l5.63" class="difflineplus">+            event.initEvent(&quot;select&quot;, true, true);</span>
<a href="#l5.64"></a><span id="l5.64" class="difflineplus">+            this.dispatchEvent(event);</span>
<a href="#l5.65"></a><span id="l5.65" class="difflineplus">+</span>
<a href="#l5.66"></a><span id="l5.66" class="difflineplus">+            // always call this (allows a commandupdater without controller)</span>
<a href="#l5.67"></a><span id="l5.67" class="difflineplus">+            document.commandDispatcher.updateCommands(&quot;richlistbox-select&quot;);</span>
<a href="#l5.68"></a><span id="l5.68" class="difflineplus">+          ]]&gt;</span>
<a href="#l5.69"></a><span id="l5.69" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.70"></a><span id="l5.70" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.71"></a><span id="l5.71" class="difflineplus">+</span>
<a href="#l5.72"></a><span id="l5.72" class="difflineplus">+      &lt;!-- We override base-listbox here because those methods don't take dir</span>
<a href="#l5.73"></a><span id="l5.73" class="difflineplus">+           into account on listbox (which doesn't support dir yet) --&gt;</span>
<a href="#l5.74"></a><span id="l5.74" class="difflineplus">+      &lt;method name=&quot;getNextItem&quot;&gt;</span>
<a href="#l5.75"></a><span id="l5.75" class="difflineplus">+        &lt;parameter name=&quot;aStartItem&quot;/&gt;</span>
<a href="#l5.76"></a><span id="l5.76" class="difflineplus">+        &lt;parameter name=&quot;aDelta&quot;/&gt;</span>
<a href="#l5.77"></a><span id="l5.77" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.78"></a><span id="l5.78" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.79"></a><span id="l5.79" class="difflineplus">+          var prop = this.dir == &quot;reverse&quot; &amp;&amp; this._mayReverse ?</span>
<a href="#l5.80"></a><span id="l5.80" class="difflineplus">+                                                &quot;previousSibling&quot; :</span>
<a href="#l5.81"></a><span id="l5.81" class="difflineplus">+                                                &quot;nextSibling&quot;;</span>
<a href="#l5.82"></a><span id="l5.82" class="difflineplus">+          while (aStartItem) {</span>
<a href="#l5.83"></a><span id="l5.83" class="difflineplus">+            aStartItem = aStartItem[prop];</span>
<a href="#l5.84"></a><span id="l5.84" class="difflineplus">+            if (aStartItem &amp;&amp; aStartItem.localName == &quot;richlistitem&quot; &amp;&amp;</span>
<a href="#l5.85"></a><span id="l5.85" class="difflineplus">+                (!this._userSelecting || this._canUserSelect(aStartItem))) {</span>
<a href="#l5.86"></a><span id="l5.86" class="difflineplus">+              --aDelta;</span>
<a href="#l5.87"></a><span id="l5.87" class="difflineplus">+              if (aDelta == 0)</span>
<a href="#l5.88"></a><span id="l5.88" class="difflineplus">+                return aStartItem;</span>
<a href="#l5.89"></a><span id="l5.89" class="difflineplus">+            }</span>
<a href="#l5.90"></a><span id="l5.90" class="difflineplus">+          }</span>
<a href="#l5.91"></a><span id="l5.91" class="difflineplus">+          return null;</span>
<a href="#l5.92"></a><span id="l5.92" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.93"></a><span id="l5.93" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.94"></a><span id="l5.94" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.95"></a><span id="l5.95" class="difflineplus">+</span>
<a href="#l5.96"></a><span id="l5.96" class="difflineplus">+      &lt;method name=&quot;getPreviousItem&quot;&gt;</span>
<a href="#l5.97"></a><span id="l5.97" class="difflineplus">+        &lt;parameter name=&quot;aStartItem&quot;/&gt;</span>
<a href="#l5.98"></a><span id="l5.98" class="difflineplus">+        &lt;parameter name=&quot;aDelta&quot;/&gt;</span>
<a href="#l5.99"></a><span id="l5.99" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.100"></a><span id="l5.100" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.101"></a><span id="l5.101" class="difflineplus">+          var prop = this.dir == &quot;reverse&quot; &amp;&amp; this._mayReverse ?</span>
<a href="#l5.102"></a><span id="l5.102" class="difflineplus">+                                                &quot;nextSibling&quot; :</span>
<a href="#l5.103"></a><span id="l5.103" class="difflineplus">+                                                &quot;previousSibling&quot;;</span>
<a href="#l5.104"></a><span id="l5.104" class="difflineplus">+          while (aStartItem) {</span>
<a href="#l5.105"></a><span id="l5.105" class="difflineplus">+            aStartItem = aStartItem[prop];</span>
<a href="#l5.106"></a><span id="l5.106" class="difflineplus">+            if (aStartItem &amp;&amp; aStartItem.localName == &quot;richlistitem&quot; &amp;&amp;</span>
<a href="#l5.107"></a><span id="l5.107" class="difflineplus">+                (!this._userSelecting || this._canUserSelect(aStartItem))) {</span>
<a href="#l5.108"></a><span id="l5.108" class="difflineplus">+              --aDelta;</span>
<a href="#l5.109"></a><span id="l5.109" class="difflineplus">+              if (aDelta == 0)</span>
<a href="#l5.110"></a><span id="l5.110" class="difflineplus">+                return aStartItem;</span>
<a href="#l5.111"></a><span id="l5.111" class="difflineplus">+            }</span>
<a href="#l5.112"></a><span id="l5.112" class="difflineplus">+          }</span>
<a href="#l5.113"></a><span id="l5.113" class="difflineplus">+          return null;</span>
<a href="#l5.114"></a><span id="l5.114" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.115"></a><span id="l5.115" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.116"></a><span id="l5.116" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.117"></a><span id="l5.117" class="difflineplus">+</span>
<a href="#l5.118"></a><span id="l5.118" class="difflineplus">+      &lt;method name=&quot;appendItem&quot;&gt;</span>
<a href="#l5.119"></a><span id="l5.119" class="difflineplus">+        &lt;parameter name=&quot;aLabel&quot;/&gt;</span>
<a href="#l5.120"></a><span id="l5.120" class="difflineplus">+        &lt;parameter name=&quot;aValue&quot;/&gt;</span>
<a href="#l5.121"></a><span id="l5.121" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.122"></a><span id="l5.122" class="difflineplus">+          var item =</span>
<a href="#l5.123"></a><span id="l5.123" class="difflineplus">+            this.ownerDocument.createXULElement(&quot;richlistitem&quot;);</span>
<a href="#l5.124"></a><span id="l5.124" class="difflineplus">+          item.setAttribute(&quot;value&quot;, aValue);</span>
<a href="#l5.125"></a><span id="l5.125" class="difflineplus">+</span>
<a href="#l5.126"></a><span id="l5.126" class="difflineplus">+          var label = this.ownerDocument.createXULElement(&quot;label&quot;);</span>
<a href="#l5.127"></a><span id="l5.127" class="difflineplus">+          label.setAttribute(&quot;value&quot;, aLabel);</span>
<a href="#l5.128"></a><span id="l5.128" class="difflineplus">+          label.setAttribute(&quot;flex&quot;, &quot;1&quot;);</span>
<a href="#l5.129"></a><span id="l5.129" class="difflineplus">+          label.setAttribute(&quot;crop&quot;, &quot;end&quot;);</span>
<a href="#l5.130"></a><span id="l5.130" class="difflineplus">+          item.appendChild(label);</span>
<a href="#l5.131"></a><span id="l5.131" class="difflineplus">+</span>
<a href="#l5.132"></a><span id="l5.132" class="difflineplus">+          this.appendChild(item);</span>
<a href="#l5.133"></a><span id="l5.133" class="difflineplus">+</span>
<a href="#l5.134"></a><span id="l5.134" class="difflineplus">+          return item;</span>
<a href="#l5.135"></a><span id="l5.135" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.136"></a><span id="l5.136" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.137"></a><span id="l5.137" class="difflineplus">+</span>
<a href="#l5.138"></a><span id="l5.138" class="difflineplus">+      &lt;!-- nsIDOMXULSelectControlElement --&gt;</span>
<a href="#l5.139"></a><span id="l5.139" class="difflineplus">+      &lt;property name=&quot;selectedItem&quot;</span>
<a href="#l5.140"></a><span id="l5.140" class="difflineplus">+                onset=&quot;this.selectItem(val);&quot;&gt;</span>
<a href="#l5.141"></a><span id="l5.141" class="difflineplus">+        &lt;getter&gt;</span>
<a href="#l5.142"></a><span id="l5.142" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.143"></a><span id="l5.143" class="difflineplus">+          return this.selectedItems.length &gt; 0 ? this.selectedItems[0] : null;</span>
<a href="#l5.144"></a><span id="l5.144" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.145"></a><span id="l5.145" class="difflineplus">+        &lt;/getter&gt;</span>
<a href="#l5.146"></a><span id="l5.146" class="difflineplus">+      &lt;/property&gt;</span>
<a href="#l5.147"></a><span id="l5.147" class="difflineplus">+</span>
<a href="#l5.148"></a><span id="l5.148" class="difflineplus">+      &lt;!-- nsIDOMXULSelectControlElement --&gt;</span>
<a href="#l5.149"></a><span id="l5.149" class="difflineplus">+      &lt;property name=&quot;selectedIndex&quot;&gt;</span>
<a href="#l5.150"></a><span id="l5.150" class="difflineplus">+        &lt;getter&gt;</span>
<a href="#l5.151"></a><span id="l5.151" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.152"></a><span id="l5.152" class="difflineplus">+          if (this.selectedItems.length &gt; 0)</span>
<a href="#l5.153"></a><span id="l5.153" class="difflineplus">+            return this.getIndexOfItem(this.selectedItems[0]);</span>
<a href="#l5.154"></a><span id="l5.154" class="difflineplus">+          return -1;</span>
<a href="#l5.155"></a><span id="l5.155" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.156"></a><span id="l5.156" class="difflineplus">+        &lt;/getter&gt;</span>
<a href="#l5.157"></a><span id="l5.157" class="difflineplus">+        &lt;setter&gt;</span>
<a href="#l5.158"></a><span id="l5.158" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.159"></a><span id="l5.159" class="difflineplus">+          if (val &gt;= 0) {</span>
<a href="#l5.160"></a><span id="l5.160" class="difflineplus">+            // This is a micro-optimization so that a call to getIndexOfItem or</span>
<a href="#l5.161"></a><span id="l5.161" class="difflineplus">+            // getItemAtIndex caused by _fireOnSelect (especially for derived</span>
<a href="#l5.162"></a><span id="l5.162" class="difflineplus">+            // widgets) won't loop the children.</span>
<a href="#l5.163"></a><span id="l5.163" class="difflineplus">+            this._selecting = {</span>
<a href="#l5.164"></a><span id="l5.164" class="difflineplus">+              item: this.getItemAtIndex(val),</span>
<a href="#l5.165"></a><span id="l5.165" class="difflineplus">+              index: val,</span>
<a href="#l5.166"></a><span id="l5.166" class="difflineplus">+            };</span>
<a href="#l5.167"></a><span id="l5.167" class="difflineplus">+            this.selectItem(this._selecting.item);</span>
<a href="#l5.168"></a><span id="l5.168" class="difflineplus">+            delete this._selecting;</span>
<a href="#l5.169"></a><span id="l5.169" class="difflineplus">+          } else {</span>
<a href="#l5.170"></a><span id="l5.170" class="difflineplus">+            this.clearSelection();</span>
<a href="#l5.171"></a><span id="l5.171" class="difflineplus">+            this.currentItem = null;</span>
<a href="#l5.172"></a><span id="l5.172" class="difflineplus">+          }</span>
<a href="#l5.173"></a><span id="l5.173" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.174"></a><span id="l5.174" class="difflineplus">+        &lt;/setter&gt;</span>
<a href="#l5.175"></a><span id="l5.175" class="difflineplus">+      &lt;/property&gt;</span>
<a href="#l5.176"></a><span id="l5.176" class="difflineplus">+</span>
<a href="#l5.177"></a><span id="l5.177" class="difflineplus">+      &lt;!-- nsIDOMXULSelectControlElement --&gt;</span>
<a href="#l5.178"></a><span id="l5.178" class="difflineplus">+      &lt;property name=&quot;value&quot;&gt;</span>
<a href="#l5.179"></a><span id="l5.179" class="difflineplus">+        &lt;getter&gt;</span>
<a href="#l5.180"></a><span id="l5.180" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.181"></a><span id="l5.181" class="difflineplus">+          if (this.selectedItems.length &gt; 0)</span>
<a href="#l5.182"></a><span id="l5.182" class="difflineplus">+            return this.selectedItem.value;</span>
<a href="#l5.183"></a><span id="l5.183" class="difflineplus">+          return null;</span>
<a href="#l5.184"></a><span id="l5.184" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.185"></a><span id="l5.185" class="difflineplus">+        &lt;/getter&gt;</span>
<a href="#l5.186"></a><span id="l5.186" class="difflineplus">+        &lt;setter&gt;</span>
<a href="#l5.187"></a><span id="l5.187" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.188"></a><span id="l5.188" class="difflineplus">+          var kids = this.getElementsByAttribute(&quot;value&quot;, val);</span>
<a href="#l5.189"></a><span id="l5.189" class="difflineplus">+          if (kids &amp;&amp; kids.item(0))</span>
<a href="#l5.190"></a><span id="l5.190" class="difflineplus">+            this.selectItem(kids[0]);</span>
<a href="#l5.191"></a><span id="l5.191" class="difflineplus">+          return val;</span>
<a href="#l5.192"></a><span id="l5.192" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.193"></a><span id="l5.193" class="difflineplus">+        &lt;/setter&gt;</span>
<a href="#l5.194"></a><span id="l5.194" class="difflineplus">+      &lt;/property&gt;</span>
<a href="#l5.195"></a><span id="l5.195" class="difflineplus">+</span>
<a href="#l5.196"></a><span id="l5.196" class="difflineplus">+      &lt;!-- nsIDOMXULSelectControlElement --&gt;</span>
<a href="#l5.197"></a><span id="l5.197" class="difflineplus">+      &lt;property name=&quot;itemCount&quot; readonly=&quot;true&quot;</span>
<a href="#l5.198"></a><span id="l5.198" class="difflineplus">+                onget=&quot;return this.itemChildren.length&quot;/&gt;</span>
<a href="#l5.199"></a><span id="l5.199" class="difflineplus">+</span>
<a href="#l5.200"></a><span id="l5.200" class="difflineplus">+      &lt;!-- nsIDOMXULSelectControlElement --&gt;</span>
<a href="#l5.201"></a><span id="l5.201" class="difflineplus">+      &lt;method name=&quot;getIndexOfItem&quot;&gt;</span>
<a href="#l5.202"></a><span id="l5.202" class="difflineplus">+        &lt;parameter name=&quot;aItem&quot;/&gt;</span>
<a href="#l5.203"></a><span id="l5.203" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.204"></a><span id="l5.204" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l5.205"></a><span id="l5.205" class="difflineplus">+            // don't search the children, if we're looking for none of them</span>
<a href="#l5.206"></a><span id="l5.206" class="difflineplus">+            if (aItem == null)</span>
<a href="#l5.207"></a><span id="l5.207" class="difflineplus">+              return -1;</span>
<a href="#l5.208"></a><span id="l5.208" class="difflineplus">+            if (this._selecting &amp;&amp; this._selecting.item == aItem)</span>
<a href="#l5.209"></a><span id="l5.209" class="difflineplus">+              return this._selecting.index;</span>
<a href="#l5.210"></a><span id="l5.210" class="difflineplus">+            return this.itemChildren.indexOf(aItem);</span>
<a href="#l5.211"></a><span id="l5.211" class="difflineplus">+          ]]&gt;</span>
<a href="#l5.212"></a><span id="l5.212" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.213"></a><span id="l5.213" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.214"></a><span id="l5.214" class="difflineplus">+</span>
<a href="#l5.215"></a><span id="l5.215" class="difflineplus">+      &lt;!-- nsIDOMXULSelectControlElement --&gt;</span>
<a href="#l5.216"></a><span id="l5.216" class="difflineplus">+      &lt;method name=&quot;getItemAtIndex&quot;&gt;</span>
<a href="#l5.217"></a><span id="l5.217" class="difflineplus">+        &lt;parameter name=&quot;aIndex&quot;/&gt;</span>
<a href="#l5.218"></a><span id="l5.218" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.219"></a><span id="l5.219" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l5.220"></a><span id="l5.220" class="difflineplus">+            if (this._selecting &amp;&amp; this._selecting.index == aIndex)</span>
<a href="#l5.221"></a><span id="l5.221" class="difflineplus">+              return this._selecting.item;</span>
<a href="#l5.222"></a><span id="l5.222" class="difflineplus">+            return this.itemChildren[aIndex] || null;</span>
<a href="#l5.223"></a><span id="l5.223" class="difflineplus">+          ]]&gt;</span>
<a href="#l5.224"></a><span id="l5.224" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.225"></a><span id="l5.225" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.226"></a><span id="l5.226" class="difflineplus">+</span>
<a href="#l5.227"></a><span id="l5.227" class="difflineplus">+      &lt;!-- nsIDOMXULMultiSelectControlElement --&gt;</span>
<a href="#l5.228"></a><span id="l5.228" class="difflineplus">+      &lt;property name=&quot;selType&quot;</span>
<a href="#l5.229"></a><span id="l5.229" class="difflineplus">+                onget=&quot;return this.getAttribute('seltype');&quot;</span>
<a href="#l5.230"></a><span id="l5.230" class="difflineplus">+                onset=&quot;this.setAttribute('seltype', val); return val;&quot;/&gt;</span>
<a href="#l5.231"></a><span id="l5.231" class="difflineplus">+</span>
<a href="#l5.232"></a><span id="l5.232" class="difflineplus">+      &lt;!-- nsIDOMXULMultiSelectControlElement --&gt;</span>
<a href="#l5.233"></a><span id="l5.233" class="difflineplus">+      &lt;property name=&quot;currentItem&quot; onget=&quot;return this._currentItem;&quot;&gt;</span>
<a href="#l5.234"></a><span id="l5.234" class="difflineplus">+        &lt;setter&gt;</span>
<a href="#l5.235"></a><span id="l5.235" class="difflineplus">+          if (this._currentItem == val)</span>
<a href="#l5.236"></a><span id="l5.236" class="difflineplus">+            return val;</span>
<a href="#l5.237"></a><span id="l5.237" class="difflineplus">+</span>
<a href="#l5.238"></a><span id="l5.238" class="difflineplus">+          if (this._currentItem)</span>
<a href="#l5.239"></a><span id="l5.239" class="difflineplus">+            this._currentItem.current = false;</span>
<a href="#l5.240"></a><span id="l5.240" class="difflineplus">+          this._currentItem = val;</span>
<a href="#l5.241"></a><span id="l5.241" class="difflineplus">+</span>
<a href="#l5.242"></a><span id="l5.242" class="difflineplus">+          if (val)</span>
<a href="#l5.243"></a><span id="l5.243" class="difflineplus">+            val.current = true;</span>
<a href="#l5.244"></a><span id="l5.244" class="difflineplus">+</span>
<a href="#l5.245"></a><span id="l5.245" class="difflineplus">+          return val;</span>
<a href="#l5.246"></a><span id="l5.246" class="difflineplus">+        &lt;/setter&gt;</span>
<a href="#l5.247"></a><span id="l5.247" class="difflineplus">+      &lt;/property&gt;</span>
<a href="#l5.248"></a><span id="l5.248" class="difflineplus">+</span>
<a href="#l5.249"></a><span id="l5.249" class="difflineplus">+      &lt;!-- nsIDOMXULMultiSelectControlElement --&gt;</span>
<a href="#l5.250"></a><span id="l5.250" class="difflineplus">+      &lt;property name=&quot;currentIndex&quot;&gt;</span>
<a href="#l5.251"></a><span id="l5.251" class="difflineplus">+        &lt;getter&gt;</span>
<a href="#l5.252"></a><span id="l5.252" class="difflineplus">+          return this.currentItem ? this.getIndexOfItem(this.currentItem) : -1;</span>
<a href="#l5.253"></a><span id="l5.253" class="difflineplus">+        &lt;/getter&gt;</span>
<a href="#l5.254"></a><span id="l5.254" class="difflineplus">+        &lt;setter&gt;</span>
<a href="#l5.255"></a><span id="l5.255" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.256"></a><span id="l5.256" class="difflineplus">+          if (val &gt;= 0)</span>
<a href="#l5.257"></a><span id="l5.257" class="difflineplus">+            this.currentItem = this.getItemAtIndex(val);</span>
<a href="#l5.258"></a><span id="l5.258" class="difflineplus">+          else</span>
<a href="#l5.259"></a><span id="l5.259" class="difflineplus">+            this.currentItem = null;</span>
<a href="#l5.260"></a><span id="l5.260" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.261"></a><span id="l5.261" class="difflineplus">+        &lt;/setter&gt;</span>
<a href="#l5.262"></a><span id="l5.262" class="difflineplus">+      &lt;/property&gt;</span>
<a href="#l5.263"></a><span id="l5.263" class="difflineplus">+</span>
<a href="#l5.264"></a><span id="l5.264" class="difflineplus">+      &lt;!-- nsIDOMXULMultiSelectControlElement --&gt;</span>
<a href="#l5.265"></a><span id="l5.265" class="difflineplus">+      &lt;field name=&quot;selectedItems&quot;&gt;new ChromeNodeList()&lt;/field&gt;</span>
<a href="#l5.266"></a><span id="l5.266" class="difflineplus">+</span>
<a href="#l5.267"></a><span id="l5.267" class="difflineplus">+      &lt;!-- nsIDOMXULMultiSelectControlElement --&gt;</span>
<a href="#l5.268"></a><span id="l5.268" class="difflineplus">+      &lt;method name=&quot;addItemToSelection&quot;&gt;</span>
<a href="#l5.269"></a><span id="l5.269" class="difflineplus">+        &lt;parameter name=&quot;aItem&quot;/&gt;</span>
<a href="#l5.270"></a><span id="l5.270" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.271"></a><span id="l5.271" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.272"></a><span id="l5.272" class="difflineplus">+          if (this.selType != &quot;multiple&quot; &amp;&amp; this.selectedCount)</span>
<a href="#l5.273"></a><span id="l5.273" class="difflineplus">+            return;</span>
<a href="#l5.274"></a><span id="l5.274" class="difflineplus">+</span>
<a href="#l5.275"></a><span id="l5.275" class="difflineplus">+          if (aItem.selected)</span>
<a href="#l5.276"></a><span id="l5.276" class="difflineplus">+            return;</span>
<a href="#l5.277"></a><span id="l5.277" class="difflineplus">+</span>
<a href="#l5.278"></a><span id="l5.278" class="difflineplus">+          this.selectedItems.append(aItem);</span>
<a href="#l5.279"></a><span id="l5.279" class="difflineplus">+          aItem.selected = true;</span>
<a href="#l5.280"></a><span id="l5.280" class="difflineplus">+</span>
<a href="#l5.281"></a><span id="l5.281" class="difflineplus">+          this._fireOnSelect();</span>
<a href="#l5.282"></a><span id="l5.282" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.283"></a><span id="l5.283" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.284"></a><span id="l5.284" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.285"></a><span id="l5.285" class="difflineplus">+</span>
<a href="#l5.286"></a><span id="l5.286" class="difflineplus">+      &lt;!-- nsIDOMXULMultiSelectControlElement --&gt;</span>
<a href="#l5.287"></a><span id="l5.287" class="difflineplus">+      &lt;method name=&quot;removeItemFromSelection&quot;&gt;</span>
<a href="#l5.288"></a><span id="l5.288" class="difflineplus">+        &lt;parameter name=&quot;aItem&quot;/&gt;</span>
<a href="#l5.289"></a><span id="l5.289" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.290"></a><span id="l5.290" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.291"></a><span id="l5.291" class="difflineplus">+          if (!aItem.selected)</span>
<a href="#l5.292"></a><span id="l5.292" class="difflineplus">+            return;</span>
<a href="#l5.293"></a><span id="l5.293" class="difflineplus">+</span>
<a href="#l5.294"></a><span id="l5.294" class="difflineplus">+          this.selectedItems.remove(aItem);</span>
<a href="#l5.295"></a><span id="l5.295" class="difflineplus">+          aItem.selected = false;</span>
<a href="#l5.296"></a><span id="l5.296" class="difflineplus">+          this._fireOnSelect();</span>
<a href="#l5.297"></a><span id="l5.297" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.298"></a><span id="l5.298" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.299"></a><span id="l5.299" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.300"></a><span id="l5.300" class="difflineplus">+</span>
<a href="#l5.301"></a><span id="l5.301" class="difflineplus">+      &lt;!-- nsIDOMXULMultiSelectControlElement --&gt;</span>
<a href="#l5.302"></a><span id="l5.302" class="difflineplus">+      &lt;method name=&quot;toggleItemSelection&quot;&gt;</span>
<a href="#l5.303"></a><span id="l5.303" class="difflineplus">+        &lt;parameter name=&quot;aItem&quot;/&gt;</span>
<a href="#l5.304"></a><span id="l5.304" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.305"></a><span id="l5.305" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.306"></a><span id="l5.306" class="difflineplus">+          if (aItem.selected)</span>
<a href="#l5.307"></a><span id="l5.307" class="difflineplus">+            this.removeItemFromSelection(aItem);</span>
<a href="#l5.308"></a><span id="l5.308" class="difflineplus">+          else</span>
<a href="#l5.309"></a><span id="l5.309" class="difflineplus">+            this.addItemToSelection(aItem);</span>
<a href="#l5.310"></a><span id="l5.310" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.311"></a><span id="l5.311" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.312"></a><span id="l5.312" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.313"></a><span id="l5.313" class="difflineplus">+</span>
<a href="#l5.314"></a><span id="l5.314" class="difflineplus">+      &lt;!-- nsIDOMXULMultiSelectControlElement --&gt;</span>
<a href="#l5.315"></a><span id="l5.315" class="difflineplus">+      &lt;method name=&quot;selectItem&quot;&gt;</span>
<a href="#l5.316"></a><span id="l5.316" class="difflineplus">+        &lt;parameter name=&quot;aItem&quot;/&gt;</span>
<a href="#l5.317"></a><span id="l5.317" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.318"></a><span id="l5.318" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.319"></a><span id="l5.319" class="difflineplus">+          if (!aItem)</span>
<a href="#l5.320"></a><span id="l5.320" class="difflineplus">+            return;</span>
<a href="#l5.321"></a><span id="l5.321" class="difflineplus">+</span>
<a href="#l5.322"></a><span id="l5.322" class="difflineplus">+          if (this.selectedItems.length == 1 &amp;&amp; this.selectedItems[0] == aItem)</span>
<a href="#l5.323"></a><span id="l5.323" class="difflineplus">+            return;</span>
<a href="#l5.324"></a><span id="l5.324" class="difflineplus">+</span>
<a href="#l5.325"></a><span id="l5.325" class="difflineplus">+          this._selectionStart = null;</span>
<a href="#l5.326"></a><span id="l5.326" class="difflineplus">+</span>
<a href="#l5.327"></a><span id="l5.327" class="difflineplus">+          var suppress = this._suppressOnSelect;</span>
<a href="#l5.328"></a><span id="l5.328" class="difflineplus">+          this._suppressOnSelect = true;</span>
<a href="#l5.329"></a><span id="l5.329" class="difflineplus">+</span>
<a href="#l5.330"></a><span id="l5.330" class="difflineplus">+          this.clearSelection();</span>
<a href="#l5.331"></a><span id="l5.331" class="difflineplus">+          this.addItemToSelection(aItem);</span>
<a href="#l5.332"></a><span id="l5.332" class="difflineplus">+          this.currentItem = aItem;</span>
<a href="#l5.333"></a><span id="l5.333" class="difflineplus">+</span>
<a href="#l5.334"></a><span id="l5.334" class="difflineplus">+          this._suppressOnSelect = suppress;</span>
<a href="#l5.335"></a><span id="l5.335" class="difflineplus">+          this._fireOnSelect();</span>
<a href="#l5.336"></a><span id="l5.336" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.337"></a><span id="l5.337" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.338"></a><span id="l5.338" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.339"></a><span id="l5.339" class="difflineplus">+</span>
<a href="#l5.340"></a><span id="l5.340" class="difflineplus">+      &lt;!-- nsIDOMXULMultiSelectControlElement --&gt;</span>
<a href="#l5.341"></a><span id="l5.341" class="difflineplus">+      &lt;method name=&quot;selectItemRange&quot;&gt;</span>
<a href="#l5.342"></a><span id="l5.342" class="difflineplus">+        &lt;parameter name=&quot;aStartItem&quot;/&gt;</span>
<a href="#l5.343"></a><span id="l5.343" class="difflineplus">+        &lt;parameter name=&quot;aEndItem&quot;/&gt;</span>
<a href="#l5.344"></a><span id="l5.344" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.345"></a><span id="l5.345" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.346"></a><span id="l5.346" class="difflineplus">+          if (this.selType != &quot;multiple&quot;)</span>
<a href="#l5.347"></a><span id="l5.347" class="difflineplus">+            return;</span>
<a href="#l5.348"></a><span id="l5.348" class="difflineplus">+</span>
<a href="#l5.349"></a><span id="l5.349" class="difflineplus">+          if (!aStartItem)</span>
<a href="#l5.350"></a><span id="l5.350" class="difflineplus">+            aStartItem = this._selectionStart ?</span>
<a href="#l5.351"></a><span id="l5.351" class="difflineplus">+              this._selectionStart : this.currentItem;</span>
<a href="#l5.352"></a><span id="l5.352" class="difflineplus">+</span>
<a href="#l5.353"></a><span id="l5.353" class="difflineplus">+          if (!aStartItem)</span>
<a href="#l5.354"></a><span id="l5.354" class="difflineplus">+            aStartItem = aEndItem;</span>
<a href="#l5.355"></a><span id="l5.355" class="difflineplus">+</span>
<a href="#l5.356"></a><span id="l5.356" class="difflineplus">+          var suppressSelect = this._suppressOnSelect;</span>
<a href="#l5.357"></a><span id="l5.357" class="difflineplus">+          this._suppressOnSelect = true;</span>
<a href="#l5.358"></a><span id="l5.358" class="difflineplus">+</span>
<a href="#l5.359"></a><span id="l5.359" class="difflineplus">+          this._selectionStart = aStartItem;</span>
<a href="#l5.360"></a><span id="l5.360" class="difflineplus">+</span>
<a href="#l5.361"></a><span id="l5.361" class="difflineplus">+          var currentItem;</span>
<a href="#l5.362"></a><span id="l5.362" class="difflineplus">+          var startIndex = this.getIndexOfItem(aStartItem);</span>
<a href="#l5.363"></a><span id="l5.363" class="difflineplus">+          var endIndex = this.getIndexOfItem(aEndItem);</span>
<a href="#l5.364"></a><span id="l5.364" class="difflineplus">+          if (endIndex &lt; startIndex) {</span>
<a href="#l5.365"></a><span id="l5.365" class="difflineplus">+            currentItem = aEndItem;</span>
<a href="#l5.366"></a><span id="l5.366" class="difflineplus">+            aEndItem = aStartItem;</span>
<a href="#l5.367"></a><span id="l5.367" class="difflineplus">+            aStartItem = currentItem;</span>
<a href="#l5.368"></a><span id="l5.368" class="difflineplus">+          } else {</span>
<a href="#l5.369"></a><span id="l5.369" class="difflineplus">+            currentItem = aStartItem;</span>
<a href="#l5.370"></a><span id="l5.370" class="difflineplus">+          }</span>
<a href="#l5.371"></a><span id="l5.371" class="difflineplus">+</span>
<a href="#l5.372"></a><span id="l5.372" class="difflineplus">+          while (currentItem) {</span>
<a href="#l5.373"></a><span id="l5.373" class="difflineplus">+            this.addItemToSelection(currentItem);</span>
<a href="#l5.374"></a><span id="l5.374" class="difflineplus">+            if (currentItem == aEndItem) {</span>
<a href="#l5.375"></a><span id="l5.375" class="difflineplus">+              currentItem = this.getNextItem(currentItem, 1);</span>
<a href="#l5.376"></a><span id="l5.376" class="difflineplus">+              break;</span>
<a href="#l5.377"></a><span id="l5.377" class="difflineplus">+            }</span>
<a href="#l5.378"></a><span id="l5.378" class="difflineplus">+            currentItem = this.getNextItem(currentItem, 1);</span>
<a href="#l5.379"></a><span id="l5.379" class="difflineplus">+          }</span>
<a href="#l5.380"></a><span id="l5.380" class="difflineplus">+</span>
<a href="#l5.381"></a><span id="l5.381" class="difflineplus">+          // Clear around new selection</span>
<a href="#l5.382"></a><span id="l5.382" class="difflineplus">+          // Don't use clearSelection() because it causes a lot of noise</span>
<a href="#l5.383"></a><span id="l5.383" class="difflineplus">+          // with respect to selection removed notifications used by the</span>
<a href="#l5.384"></a><span id="l5.384" class="difflineplus">+          // accessibility API support.</span>
<a href="#l5.385"></a><span id="l5.385" class="difflineplus">+          var userSelecting = this._userSelecting;</span>
<a href="#l5.386"></a><span id="l5.386" class="difflineplus">+          this._userSelecting = false; // that's US automatically unselecting</span>
<a href="#l5.387"></a><span id="l5.387" class="difflineplus">+          for (; currentItem; currentItem = this.getNextItem(currentItem, 1))</span>
<a href="#l5.388"></a><span id="l5.388" class="difflineplus">+            this.removeItemFromSelection(currentItem);</span>
<a href="#l5.389"></a><span id="l5.389" class="difflineplus">+</span>
<a href="#l5.390"></a><span id="l5.390" class="difflineplus">+          for (currentItem = this.getItemAtIndex(0); currentItem != aStartItem;</span>
<a href="#l5.391"></a><span id="l5.391" class="difflineplus">+               currentItem = this.getNextItem(currentItem, 1))</span>
<a href="#l5.392"></a><span id="l5.392" class="difflineplus">+            this.removeItemFromSelection(currentItem);</span>
<a href="#l5.393"></a><span id="l5.393" class="difflineplus">+          this._userSelecting = userSelecting;</span>
<a href="#l5.394"></a><span id="l5.394" class="difflineplus">+</span>
<a href="#l5.395"></a><span id="l5.395" class="difflineplus">+          this._suppressOnSelect = suppressSelect;</span>
<a href="#l5.396"></a><span id="l5.396" class="difflineplus">+</span>
<a href="#l5.397"></a><span id="l5.397" class="difflineplus">+          this._fireOnSelect();</span>
<a href="#l5.398"></a><span id="l5.398" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.399"></a><span id="l5.399" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.400"></a><span id="l5.400" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.401"></a><span id="l5.401" class="difflineplus">+</span>
<a href="#l5.402"></a><span id="l5.402" class="difflineplus">+      &lt;!-- nsIDOMXULMultiSelectControlElement --&gt;</span>
<a href="#l5.403"></a><span id="l5.403" class="difflineplus">+      &lt;method name=&quot;selectAll&quot;&gt;</span>
<a href="#l5.404"></a><span id="l5.404" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.405"></a><span id="l5.405" class="difflineplus">+          this._selectionStart = null;</span>
<a href="#l5.406"></a><span id="l5.406" class="difflineplus">+</span>
<a href="#l5.407"></a><span id="l5.407" class="difflineplus">+          var suppress = this._suppressOnSelect;</span>
<a href="#l5.408"></a><span id="l5.408" class="difflineplus">+          this._suppressOnSelect = true;</span>
<a href="#l5.409"></a><span id="l5.409" class="difflineplus">+</span>
<a href="#l5.410"></a><span id="l5.410" class="difflineplus">+          var item = this.getItemAtIndex(0);</span>
<a href="#l5.411"></a><span id="l5.411" class="difflineplus">+          while (item) {</span>
<a href="#l5.412"></a><span id="l5.412" class="difflineplus">+            this.addItemToSelection(item);</span>
<a href="#l5.413"></a><span id="l5.413" class="difflineplus">+            item = this.getNextItem(item, 1);</span>
<a href="#l5.414"></a><span id="l5.414" class="difflineplus">+          }</span>
<a href="#l5.415"></a><span id="l5.415" class="difflineplus">+</span>
<a href="#l5.416"></a><span id="l5.416" class="difflineplus">+          this._suppressOnSelect = suppress;</span>
<a href="#l5.417"></a><span id="l5.417" class="difflineplus">+          this._fireOnSelect();</span>
<a href="#l5.418"></a><span id="l5.418" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.419"></a><span id="l5.419" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.420"></a><span id="l5.420" class="difflineplus">+</span>
<a href="#l5.421"></a><span id="l5.421" class="difflineplus">+      &lt;!-- nsIDOMXULMultiSelectControlElement --&gt;</span>
<a href="#l5.422"></a><span id="l5.422" class="difflineplus">+      &lt;method name=&quot;invertSelection&quot;&gt;</span>
<a href="#l5.423"></a><span id="l5.423" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.424"></a><span id="l5.424" class="difflineplus">+          this._selectionStart = null;</span>
<a href="#l5.425"></a><span id="l5.425" class="difflineplus">+</span>
<a href="#l5.426"></a><span id="l5.426" class="difflineplus">+          var suppress = this._suppressOnSelect;</span>
<a href="#l5.427"></a><span id="l5.427" class="difflineplus">+          this._suppressOnSelect = true;</span>
<a href="#l5.428"></a><span id="l5.428" class="difflineplus">+</span>
<a href="#l5.429"></a><span id="l5.429" class="difflineplus">+          var item = this.getItemAtIndex(0);</span>
<a href="#l5.430"></a><span id="l5.430" class="difflineplus">+          while (item) {</span>
<a href="#l5.431"></a><span id="l5.431" class="difflineplus">+            if (item.selected)</span>
<a href="#l5.432"></a><span id="l5.432" class="difflineplus">+              this.removeItemFromSelection(item);</span>
<a href="#l5.433"></a><span id="l5.433" class="difflineplus">+            else</span>
<a href="#l5.434"></a><span id="l5.434" class="difflineplus">+              this.addItemToSelection(item);</span>
<a href="#l5.435"></a><span id="l5.435" class="difflineplus">+            item = this.getNextItem(item, 1);</span>
<a href="#l5.436"></a><span id="l5.436" class="difflineplus">+          }</span>
<a href="#l5.437"></a><span id="l5.437" class="difflineplus">+</span>
<a href="#l5.438"></a><span id="l5.438" class="difflineplus">+          this._suppressOnSelect = suppress;</span>
<a href="#l5.439"></a><span id="l5.439" class="difflineplus">+          this._fireOnSelect();</span>
<a href="#l5.440"></a><span id="l5.440" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.441"></a><span id="l5.441" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.442"></a><span id="l5.442" class="difflineplus">+</span>
<a href="#l5.443"></a><span id="l5.443" class="difflineplus">+      &lt;!-- nsIDOMXULMultiSelectControlElement --&gt;</span>
<a href="#l5.444"></a><span id="l5.444" class="difflineplus">+      &lt;method name=&quot;clearSelection&quot;&gt;</span>
<a href="#l5.445"></a><span id="l5.445" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.446"></a><span id="l5.446" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.447"></a><span id="l5.447" class="difflineplus">+          if (this.selectedItems) {</span>
<a href="#l5.448"></a><span id="l5.448" class="difflineplus">+            while (this.selectedItems.length &gt; 0) {</span>
<a href="#l5.449"></a><span id="l5.449" class="difflineplus">+              let item = this.selectedItems[0];</span>
<a href="#l5.450"></a><span id="l5.450" class="difflineplus">+              item.selected = false;</span>
<a href="#l5.451"></a><span id="l5.451" class="difflineplus">+              this.selectedItems.remove(item);</span>
<a href="#l5.452"></a><span id="l5.452" class="difflineplus">+            }</span>
<a href="#l5.453"></a><span id="l5.453" class="difflineplus">+          }</span>
<a href="#l5.454"></a><span id="l5.454" class="difflineplus">+</span>
<a href="#l5.455"></a><span id="l5.455" class="difflineplus">+          this._selectionStart = null;</span>
<a href="#l5.456"></a><span id="l5.456" class="difflineplus">+          this._fireOnSelect();</span>
<a href="#l5.457"></a><span id="l5.457" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.458"></a><span id="l5.458" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.459"></a><span id="l5.459" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.460"></a><span id="l5.460" class="difflineplus">+</span>
<a href="#l5.461"></a><span id="l5.461" class="difflineplus">+      &lt;!-- nsIDOMXULMultiSelectControlElement --&gt;</span>
<a href="#l5.462"></a><span id="l5.462" class="difflineplus">+      &lt;property name=&quot;selectedCount&quot; readonly=&quot;true&quot;</span>
<a href="#l5.463"></a><span id="l5.463" class="difflineplus">+                onget=&quot;return this.selectedItems.length;&quot;/&gt;</span>
<a href="#l5.464"></a><span id="l5.464" class="difflineplus">+</span>
<a href="#l5.465"></a><span id="l5.465" class="difflineplus">+      &lt;!-- nsIDOMXULMultiSelectControlElement --&gt;</span>
<a href="#l5.466"></a><span id="l5.466" class="difflineplus">+      &lt;method name=&quot;getSelectedItem&quot;&gt;</span>
<a href="#l5.467"></a><span id="l5.467" class="difflineplus">+        &lt;parameter name=&quot;aIndex&quot;/&gt;</span>
<a href="#l5.468"></a><span id="l5.468" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.469"></a><span id="l5.469" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.470"></a><span id="l5.470" class="difflineplus">+          return aIndex &lt; this.selectedItems.length ?</span>
<a href="#l5.471"></a><span id="l5.471" class="difflineplus">+            this.selectedItems[aIndex] : null;</span>
<a href="#l5.472"></a><span id="l5.472" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.473"></a><span id="l5.473" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.474"></a><span id="l5.474" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.475"></a><span id="l5.475" class="difflineplus">+</span>
<a href="#l5.476"></a><span id="l5.476" class="difflineplus">+      &lt;method name=&quot;ensureIndexIsVisible&quot;&gt;</span>
<a href="#l5.477"></a><span id="l5.477" class="difflineplus">+        &lt;parameter name=&quot;aIndex&quot;/&gt;</span>
<a href="#l5.478"></a><span id="l5.478" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.479"></a><span id="l5.479" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l5.480"></a><span id="l5.480" class="difflineplus">+            return this.ensureElementIsVisible(this.getItemAtIndex(aIndex));</span>
<a href="#l5.481"></a><span id="l5.481" class="difflineplus">+          ]]&gt;</span>
<a href="#l5.482"></a><span id="l5.482" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.483"></a><span id="l5.483" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.484"></a><span id="l5.484" class="difflineplus">+</span>
<a href="#l5.485"></a><span id="l5.485" class="difflineplus">+      &lt;method name=&quot;ensureElementIsVisible&quot;&gt;</span>
<a href="#l5.486"></a><span id="l5.486" class="difflineplus">+        &lt;parameter name=&quot;aElement&quot;/&gt;</span>
<a href="#l5.487"></a><span id="l5.487" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.488"></a><span id="l5.488" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l5.489"></a><span id="l5.489" class="difflineplus">+            if (!aElement)</span>
<a href="#l5.490"></a><span id="l5.490" class="difflineplus">+              return;</span>
<a href="#l5.491"></a><span id="l5.491" class="difflineplus">+            var targetRect = aElement.getBoundingClientRect();</span>
<a href="#l5.492"></a><span id="l5.492" class="difflineplus">+            var scrollRect = this._scrollbox.getBoundingClientRect();</span>
<a href="#l5.493"></a><span id="l5.493" class="difflineplus">+            var offset = targetRect.top - scrollRect.top;</span>
<a href="#l5.494"></a><span id="l5.494" class="difflineplus">+            if (offset &gt;= 0) {</span>
<a href="#l5.495"></a><span id="l5.495" class="difflineplus">+              // scrollRect.bottom wouldn't take a horizontal scroll bar into account</span>
<a href="#l5.496"></a><span id="l5.496" class="difflineplus">+              let scrollRectBottom = scrollRect.top + this._scrollbox.clientHeight;</span>
<a href="#l5.497"></a><span id="l5.497" class="difflineplus">+              offset = targetRect.bottom - scrollRectBottom;</span>
<a href="#l5.498"></a><span id="l5.498" class="difflineplus">+              if (offset &lt;= 0)</span>
<a href="#l5.499"></a><span id="l5.499" class="difflineplus">+                return;</span>
<a href="#l5.500"></a><span id="l5.500" class="difflineplus">+            }</span>
<a href="#l5.501"></a><span id="l5.501" class="difflineplus">+            this._scrollbox.scrollTop += offset;</span>
<a href="#l5.502"></a><span id="l5.502" class="difflineplus">+          ]]&gt;</span>
<a href="#l5.503"></a><span id="l5.503" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.504"></a><span id="l5.504" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.505"></a><span id="l5.505" class="difflineplus">+</span>
<a href="#l5.506"></a><span id="l5.506" class="difflineplus">+      &lt;method name=&quot;scrollToIndex&quot;&gt;</span>
<a href="#l5.507"></a><span id="l5.507" class="difflineplus">+        &lt;parameter name=&quot;aIndex&quot;/&gt;</span>
<a href="#l5.508"></a><span id="l5.508" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.509"></a><span id="l5.509" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l5.510"></a><span id="l5.510" class="difflineplus">+            var item = this.getItemAtIndex(aIndex);</span>
<a href="#l5.511"></a><span id="l5.511" class="difflineplus">+            if (item)</span>
<a href="#l5.512"></a><span id="l5.512" class="difflineplus">+              this._scrollbox.scrollToElement(item);</span>
<a href="#l5.513"></a><span id="l5.513" class="difflineplus">+          ]]&gt;</span>
<a href="#l5.514"></a><span id="l5.514" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.515"></a><span id="l5.515" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.516"></a><span id="l5.516" class="difflineplus">+</span>
<a href="#l5.517"></a><span id="l5.517" class="difflineplus">+      &lt;method name=&quot;getIndexOfFirstVisibleRow&quot;&gt;</span>
<a href="#l5.518"></a><span id="l5.518" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.519"></a><span id="l5.519" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l5.520"></a><span id="l5.520" class="difflineplus">+            var children = this.itemChildren;</span>
<a href="#l5.521"></a><span id="l5.521" class="difflineplus">+</span>
<a href="#l5.522"></a><span id="l5.522" class="difflineplus">+            for (var ix = 0; ix &lt; children.length; ix++)</span>
<a href="#l5.523"></a><span id="l5.523" class="difflineplus">+              if (this._isItemVisible(children[ix]))</span>
<a href="#l5.524"></a><span id="l5.524" class="difflineplus">+                return ix;</span>
<a href="#l5.525"></a><span id="l5.525" class="difflineplus">+</span>
<a href="#l5.526"></a><span id="l5.526" class="difflineplus">+            return -1;</span>
<a href="#l5.527"></a><span id="l5.527" class="difflineplus">+          ]]&gt;</span>
<a href="#l5.528"></a><span id="l5.528" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.529"></a><span id="l5.529" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.530"></a><span id="l5.530" class="difflineplus">+</span>
<a href="#l5.531"></a><span id="l5.531" class="difflineplus">+      &lt;method name=&quot;getRowCount&quot;&gt;</span>
<a href="#l5.532"></a><span id="l5.532" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.533"></a><span id="l5.533" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l5.534"></a><span id="l5.534" class="difflineplus">+            return this.itemChildren.length;</span>
<a href="#l5.535"></a><span id="l5.535" class="difflineplus">+          ]]&gt;</span>
<a href="#l5.536"></a><span id="l5.536" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.537"></a><span id="l5.537" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.538"></a><span id="l5.538" class="difflineplus">+</span>
<a href="#l5.539"></a><span id="l5.539" class="difflineplus">+      &lt;method name=&quot;scrollOnePage&quot;&gt;</span>
<a href="#l5.540"></a><span id="l5.540" class="difflineplus">+        &lt;parameter name=&quot;aDirection&quot;/&gt; &lt;!-- Must be -1 or 1 --&gt;</span>
<a href="#l5.541"></a><span id="l5.541" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.542"></a><span id="l5.542" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l5.543"></a><span id="l5.543" class="difflineplus">+            var children = this.itemChildren;</span>
<a href="#l5.544"></a><span id="l5.544" class="difflineplus">+</span>
<a href="#l5.545"></a><span id="l5.545" class="difflineplus">+            if (children.length == 0)</span>
<a href="#l5.546"></a><span id="l5.546" class="difflineplus">+              return 0;</span>
<a href="#l5.547"></a><span id="l5.547" class="difflineplus">+</span>
<a href="#l5.548"></a><span id="l5.548" class="difflineplus">+            // If nothing is selected, we just select the first element</span>
<a href="#l5.549"></a><span id="l5.549" class="difflineplus">+            // at the extreme we're moving away from</span>
<a href="#l5.550"></a><span id="l5.550" class="difflineplus">+            if (!this.currentItem)</span>
<a href="#l5.551"></a><span id="l5.551" class="difflineplus">+              return aDirection == -1 ? children.length : 0;</span>
<a href="#l5.552"></a><span id="l5.552" class="difflineplus">+</span>
<a href="#l5.553"></a><span id="l5.553" class="difflineplus">+            // If the current item is visible, scroll by one page so that</span>
<a href="#l5.554"></a><span id="l5.554" class="difflineplus">+            // the new current item is at approximately the same position as</span>
<a href="#l5.555"></a><span id="l5.555" class="difflineplus">+            // the existing current item.</span>
<a href="#l5.556"></a><span id="l5.556" class="difflineplus">+            if (this._isItemVisible(this.currentItem))</span>
<a href="#l5.557"></a><span id="l5.557" class="difflineplus">+              this._scrollbox.scrollBy(0, this._scrollbox.boxObject.height * aDirection);</span>
<a href="#l5.558"></a><span id="l5.558" class="difflineplus">+</span>
<a href="#l5.559"></a><span id="l5.559" class="difflineplus">+            // Figure out, how many items fully fit into the view port</span>
<a href="#l5.560"></a><span id="l5.560" class="difflineplus">+            // (including the currently selected one), and determine</span>
<a href="#l5.561"></a><span id="l5.561" class="difflineplus">+            // the index of the first one lying (partially) outside</span>
<a href="#l5.562"></a><span id="l5.562" class="difflineplus">+            var height = this._scrollbox.boxObject.height;</span>
<a href="#l5.563"></a><span id="l5.563" class="difflineplus">+            var startBorder = this.currentItem.boxObject.y;</span>
<a href="#l5.564"></a><span id="l5.564" class="difflineplus">+            if (aDirection == -1)</span>
<a href="#l5.565"></a><span id="l5.565" class="difflineplus">+              startBorder += this.currentItem.boxObject.height;</span>
<a href="#l5.566"></a><span id="l5.566" class="difflineplus">+</span>
<a href="#l5.567"></a><span id="l5.567" class="difflineplus">+            var index = this.currentIndex;</span>
<a href="#l5.568"></a><span id="l5.568" class="difflineplus">+            for (var ix = index; 0 &lt;= ix &amp;&amp; ix &lt; children.length; ix += aDirection) {</span>
<a href="#l5.569"></a><span id="l5.569" class="difflineplus">+              var boxObject = children[ix].boxObject;</span>
<a href="#l5.570"></a><span id="l5.570" class="difflineplus">+              if (boxObject.height == 0)</span>
<a href="#l5.571"></a><span id="l5.571" class="difflineplus">+                continue; // hidden children have a y of 0</span>
<a href="#l5.572"></a><span id="l5.572" class="difflineplus">+              var endBorder = boxObject.y + (aDirection == -1 ? boxObject.height : 0);</span>
<a href="#l5.573"></a><span id="l5.573" class="difflineplus">+              if ((endBorder - startBorder) * aDirection &gt; height)</span>
<a href="#l5.574"></a><span id="l5.574" class="difflineplus">+                break; // we've reached the desired distance</span>
<a href="#l5.575"></a><span id="l5.575" class="difflineplus">+              index = ix;</span>
<a href="#l5.576"></a><span id="l5.576" class="difflineplus">+            }</span>
<a href="#l5.577"></a><span id="l5.577" class="difflineplus">+</span>
<a href="#l5.578"></a><span id="l5.578" class="difflineplus">+            return index != this.currentIndex ? index - this.currentIndex : aDirection;</span>
<a href="#l5.579"></a><span id="l5.579" class="difflineplus">+          ]]&gt;</span>
<a href="#l5.580"></a><span id="l5.580" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.581"></a><span id="l5.581" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.582"></a><span id="l5.582" class="difflineplus">+</span>
<a href="#l5.583"></a><span id="l5.583" class="difflineplus">+      &lt;property name=&quot;itemChildren&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l5.584"></a><span id="l5.584" class="difflineplus">+        &lt;getter&gt;</span>
<a href="#l5.585"></a><span id="l5.585" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l5.586"></a><span id="l5.586" class="difflineplus">+            let children = Array.from(this.children)</span>
<a href="#l5.587"></a><span id="l5.587" class="difflineplus">+                                .filter(node =&gt; node.localName == &quot;richlistitem&quot;);</span>
<a href="#l5.588"></a><span id="l5.588" class="difflineplus">+            if (this.dir == &quot;reverse&quot; &amp;&amp; this._mayReverse) {</span>
<a href="#l5.589"></a><span id="l5.589" class="difflineplus">+              children.reverse();</span>
<a href="#l5.590"></a><span id="l5.590" class="difflineplus">+            }</span>
<a href="#l5.591"></a><span id="l5.591" class="difflineplus">+            return children;</span>
<a href="#l5.592"></a><span id="l5.592" class="difflineplus">+          ]]&gt;</span>
<a href="#l5.593"></a><span id="l5.593" class="difflineplus">+        &lt;/getter&gt;</span>
<a href="#l5.594"></a><span id="l5.594" class="difflineplus">+      &lt;/property&gt;</span>
<a href="#l5.595"></a><span id="l5.595" class="difflineplus">+</span>
<a href="#l5.596"></a><span id="l5.596" class="difflineplus">+      &lt;method name=&quot;_refreshSelection&quot;&gt;</span>
<a href="#l5.597"></a><span id="l5.597" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.598"></a><span id="l5.598" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l5.599"></a><span id="l5.599" class="difflineplus">+            // when this method is called, we know that either the currentItem</span>
<a href="#l5.600"></a><span id="l5.600" class="difflineplus">+            // and selectedItems we have are null (ctor) or a reference to an</span>
<a href="#l5.601"></a><span id="l5.601" class="difflineplus">+            // element no longer in the DOM (template).</span>
<a href="#l5.602"></a><span id="l5.602" class="difflineplus">+</span>
<a href="#l5.603"></a><span id="l5.603" class="difflineplus">+            // first look for the last-selected attribute</span>
<a href="#l5.604"></a><span id="l5.604" class="difflineplus">+            var state = this.getAttribute(&quot;last-selected&quot;);</span>
<a href="#l5.605"></a><span id="l5.605" class="difflineplus">+            if (state) {</span>
<a href="#l5.606"></a><span id="l5.606" class="difflineplus">+              var ids = state.split(&quot; &quot;);</span>
<a href="#l5.607"></a><span id="l5.607" class="difflineplus">+</span>
<a href="#l5.608"></a><span id="l5.608" class="difflineplus">+              var suppressSelect = this._suppressOnSelect;</span>
<a href="#l5.609"></a><span id="l5.609" class="difflineplus">+              this._suppressOnSelect = true;</span>
<a href="#l5.610"></a><span id="l5.610" class="difflineplus">+              this.clearSelection();</span>
<a href="#l5.611"></a><span id="l5.611" class="difflineplus">+              for (let i = 1; i &lt; ids.length; i++) {</span>
<a href="#l5.612"></a><span id="l5.612" class="difflineplus">+                var selectedItem = document.getElementById(ids[i]);</span>
<a href="#l5.613"></a><span id="l5.613" class="difflineplus">+                if (selectedItem)</span>
<a href="#l5.614"></a><span id="l5.614" class="difflineplus">+                  this.addItemToSelection(selectedItem);</span>
<a href="#l5.615"></a><span id="l5.615" class="difflineplus">+              }</span>
<a href="#l5.616"></a><span id="l5.616" class="difflineplus">+</span>
<a href="#l5.617"></a><span id="l5.617" class="difflineplus">+              var currentItem = document.getElementById(ids[0]);</span>
<a href="#l5.618"></a><span id="l5.618" class="difflineplus">+              if (!currentItem &amp;&amp; this._currentIndex)</span>
<a href="#l5.619"></a><span id="l5.619" class="difflineplus">+                currentItem = this.getItemAtIndex(Math.min(</span>
<a href="#l5.620"></a><span id="l5.620" class="difflineplus">+                  this._currentIndex - 1, this.getRowCount()));</span>
<a href="#l5.621"></a><span id="l5.621" class="difflineplus">+              if (currentItem) {</span>
<a href="#l5.622"></a><span id="l5.622" class="difflineplus">+                this.currentItem = currentItem;</span>
<a href="#l5.623"></a><span id="l5.623" class="difflineplus">+                if (this.selType != &quot;multiple&quot; &amp;&amp; this.selectedCount == 0)</span>
<a href="#l5.624"></a><span id="l5.624" class="difflineplus">+                  this.selectedItem = currentItem;</span>
<a href="#l5.625"></a><span id="l5.625" class="difflineplus">+</span>
<a href="#l5.626"></a><span id="l5.626" class="difflineplus">+                if (this._scrollbox.boxObject.height) {</span>
<a href="#l5.627"></a><span id="l5.627" class="difflineplus">+                  this.ensureElementIsVisible(currentItem);</span>
<a href="#l5.628"></a><span id="l5.628" class="difflineplus">+                } else {</span>
<a href="#l5.629"></a><span id="l5.629" class="difflineplus">+                  // XXX hack around a bug in ensureElementIsVisible as it will</span>
<a href="#l5.630"></a><span id="l5.630" class="difflineplus">+                  // scroll beyond the last element, bug 493645.</span>
<a href="#l5.631"></a><span id="l5.631" class="difflineplus">+                  var previousElement = this.dir == &quot;reverse&quot; ? currentItem.nextElementSibling :</span>
<a href="#l5.632"></a><span id="l5.632" class="difflineplus">+                                                                currentItem.previousElementSibling;</span>
<a href="#l5.633"></a><span id="l5.633" class="difflineplus">+                  this.ensureElementIsVisible(previousElement);</span>
<a href="#l5.634"></a><span id="l5.634" class="difflineplus">+                }</span>
<a href="#l5.635"></a><span id="l5.635" class="difflineplus">+              }</span>
<a href="#l5.636"></a><span id="l5.636" class="difflineplus">+              this._suppressOnSelect = suppressSelect;</span>
<a href="#l5.637"></a><span id="l5.637" class="difflineplus">+              // XXX actually it's just a refresh, but at least</span>
<a href="#l5.638"></a><span id="l5.638" class="difflineplus">+              // the Extensions manager expects this:</span>
<a href="#l5.639"></a><span id="l5.639" class="difflineplus">+              this._fireOnSelect();</span>
<a href="#l5.640"></a><span id="l5.640" class="difflineplus">+              return;</span>
<a href="#l5.641"></a><span id="l5.641" class="difflineplus">+            }</span>
<a href="#l5.642"></a><span id="l5.642" class="difflineplus">+</span>
<a href="#l5.643"></a><span id="l5.643" class="difflineplus">+            // try to restore the selected items according to their IDs</span>
<a href="#l5.644"></a><span id="l5.644" class="difflineplus">+            // (applies after a template rebuild, if last-selected was not set)</span>
<a href="#l5.645"></a><span id="l5.645" class="difflineplus">+            if (this.selectedItems) {</span>
<a href="#l5.646"></a><span id="l5.646" class="difflineplus">+              let itemIds = [];</span>
<a href="#l5.647"></a><span id="l5.647" class="difflineplus">+              for (let i = this.selectedCount - 1; i &gt;= 0; i--) {</span>
<a href="#l5.648"></a><span id="l5.648" class="difflineplus">+                let selectedItem = this.selectedItems[i];</span>
<a href="#l5.649"></a><span id="l5.649" class="difflineplus">+                itemIds.push(selectedItem.id);</span>
<a href="#l5.650"></a><span id="l5.650" class="difflineplus">+                this.selectedItems.remove(selectedItem);</span>
<a href="#l5.651"></a><span id="l5.651" class="difflineplus">+              }</span>
<a href="#l5.652"></a><span id="l5.652" class="difflineplus">+              for (let i = 0; i &lt; itemIds.length; i++) {</span>
<a href="#l5.653"></a><span id="l5.653" class="difflineplus">+                let selectedItem = document.getElementById(itemIds[i]);</span>
<a href="#l5.654"></a><span id="l5.654" class="difflineplus">+                if (selectedItem) {</span>
<a href="#l5.655"></a><span id="l5.655" class="difflineplus">+                  this.selectedItems.append(selectedItem);</span>
<a href="#l5.656"></a><span id="l5.656" class="difflineplus">+                }</span>
<a href="#l5.657"></a><span id="l5.657" class="difflineplus">+              }</span>
<a href="#l5.658"></a><span id="l5.658" class="difflineplus">+            }</span>
<a href="#l5.659"></a><span id="l5.659" class="difflineplus">+            if (this.currentItem &amp;&amp; this.currentItem.id)</span>
<a href="#l5.660"></a><span id="l5.660" class="difflineplus">+              this.currentItem = document.getElementById(this.currentItem.id);</span>
<a href="#l5.661"></a><span id="l5.661" class="difflineplus">+            else</span>
<a href="#l5.662"></a><span id="l5.662" class="difflineplus">+              this.currentItem = null;</span>
<a href="#l5.663"></a><span id="l5.663" class="difflineplus">+</span>
<a href="#l5.664"></a><span id="l5.664" class="difflineplus">+            // if we have no previously current item or if the above check fails to</span>
<a href="#l5.665"></a><span id="l5.665" class="difflineplus">+            // find the previous nodes (which causes it to clear selection)</span>
<a href="#l5.666"></a><span id="l5.666" class="difflineplus">+            if (!this.currentItem &amp;&amp; this.selectedCount == 0) {</span>
<a href="#l5.667"></a><span id="l5.667" class="difflineplus">+              this.currentIndex = this._currentIndex ? this._currentIndex - 1 : 0;</span>
<a href="#l5.668"></a><span id="l5.668" class="difflineplus">+</span>
<a href="#l5.669"></a><span id="l5.669" class="difflineplus">+              // cf. listbox constructor:</span>
<a href="#l5.670"></a><span id="l5.670" class="difflineplus">+              // select items according to their attributes</span>
<a href="#l5.671"></a><span id="l5.671" class="difflineplus">+              var children = this.itemChildren;</span>
<a href="#l5.672"></a><span id="l5.672" class="difflineplus">+              for (let i = 0; i &lt; children.length; ++i) {</span>
<a href="#l5.673"></a><span id="l5.673" class="difflineplus">+                if (children[i].getAttribute(&quot;selected&quot;) == &quot;true&quot;)</span>
<a href="#l5.674"></a><span id="l5.674" class="difflineplus">+                  this.selectedItems.append(children[i]);</span>
<a href="#l5.675"></a><span id="l5.675" class="difflineplus">+              }</span>
<a href="#l5.676"></a><span id="l5.676" class="difflineplus">+            }</span>
<a href="#l5.677"></a><span id="l5.677" class="difflineplus">+</span>
<a href="#l5.678"></a><span id="l5.678" class="difflineplus">+            if (this.selType != &quot;multiple&quot; &amp;&amp; this.selectedCount == 0)</span>
<a href="#l5.679"></a><span id="l5.679" class="difflineplus">+              this.selectedItem = this.currentItem;</span>
<a href="#l5.680"></a><span id="l5.680" class="difflineplus">+          ]]&gt;</span>
<a href="#l5.681"></a><span id="l5.681" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.682"></a><span id="l5.682" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.683"></a><span id="l5.683" class="difflineplus">+</span>
<a href="#l5.684"></a><span id="l5.684" class="difflineplus">+      &lt;method name=&quot;_isItemVisible&quot;&gt;</span>
<a href="#l5.685"></a><span id="l5.685" class="difflineplus">+        &lt;parameter name=&quot;aItem&quot;/&gt;</span>
<a href="#l5.686"></a><span id="l5.686" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.687"></a><span id="l5.687" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l5.688"></a><span id="l5.688" class="difflineplus">+            if (!aItem)</span>
<a href="#l5.689"></a><span id="l5.689" class="difflineplus">+              return false;</span>
<a href="#l5.690"></a><span id="l5.690" class="difflineplus">+</span>
<a href="#l5.691"></a><span id="l5.691" class="difflineplus">+            var y = this._scrollbox.scrollTop + this._scrollbox.boxObject.y;</span>
<a href="#l5.692"></a><span id="l5.692" class="difflineplus">+</span>
<a href="#l5.693"></a><span id="l5.693" class="difflineplus">+            // Partially visible items are also considered visible</span>
<a href="#l5.694"></a><span id="l5.694" class="difflineplus">+            return (aItem.boxObject.y + aItem.boxObject.height &gt; y) &amp;&amp;</span>
<a href="#l5.695"></a><span id="l5.695" class="difflineplus">+                   (aItem.boxObject.y &lt; y + this._scrollbox.boxObject.height);</span>
<a href="#l5.696"></a><span id="l5.696" class="difflineplus">+          ]]&gt;</span>
<a href="#l5.697"></a><span id="l5.697" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.698"></a><span id="l5.698" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.699"></a><span id="l5.699" class="difflineplus">+</span>
<a href="#l5.700"></a><span id="l5.700" class="difflineplus">+      &lt;property name=&quot;suppressOnSelect&quot;</span>
<a href="#l5.701"></a><span id="l5.701" class="difflineplus">+                onget=&quot;return this.getAttribute('suppressonselect') == 'true';&quot;</span>
<a href="#l5.702"></a><span id="l5.702" class="difflineplus">+                onset=&quot;this.setAttribute('suppressonselect', val);&quot;/&gt;</span>
<a href="#l5.703"></a><span id="l5.703" class="difflineplus">+</span>
<a href="#l5.704"></a><span id="l5.704" class="difflineplus">+      &lt;property name=&quot;_selectDelay&quot;</span>
<a href="#l5.705"></a><span id="l5.705" class="difflineplus">+                onset=&quot;this.setAttribute('_selectDelay', val);&quot;</span>
<a href="#l5.706"></a><span id="l5.706" class="difflineplus">+                onget=&quot;return this.getAttribute('_selectDelay') || 50;&quot;/&gt;</span>
<a href="#l5.707"></a><span id="l5.707" class="difflineplus">+</span>
<a href="#l5.708"></a><span id="l5.708" class="difflineplus">+      &lt;method name=&quot;moveByOffset&quot;&gt;</span>
<a href="#l5.709"></a><span id="l5.709" class="difflineplus">+        &lt;parameter name=&quot;aOffset&quot;/&gt;</span>
<a href="#l5.710"></a><span id="l5.710" class="difflineplus">+        &lt;parameter name=&quot;aIsSelecting&quot;/&gt;</span>
<a href="#l5.711"></a><span id="l5.711" class="difflineplus">+        &lt;parameter name=&quot;aIsSelectingRange&quot;/&gt;</span>
<a href="#l5.712"></a><span id="l5.712" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.713"></a><span id="l5.713" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.714"></a><span id="l5.714" class="difflineplus">+          if ((aIsSelectingRange || !aIsSelecting) &amp;&amp;</span>
<a href="#l5.715"></a><span id="l5.715" class="difflineplus">+              this.selType != &quot;multiple&quot;)</span>
<a href="#l5.716"></a><span id="l5.716" class="difflineplus">+            return;</span>
<a href="#l5.717"></a><span id="l5.717" class="difflineplus">+</span>
<a href="#l5.718"></a><span id="l5.718" class="difflineplus">+          var newIndex = this.currentIndex + aOffset;</span>
<a href="#l5.719"></a><span id="l5.719" class="difflineplus">+          if (newIndex &lt; 0)</span>
<a href="#l5.720"></a><span id="l5.720" class="difflineplus">+            newIndex = 0;</span>
<a href="#l5.721"></a><span id="l5.721" class="difflineplus">+</span>
<a href="#l5.722"></a><span id="l5.722" class="difflineplus">+          var numItems = this.getRowCount();</span>
<a href="#l5.723"></a><span id="l5.723" class="difflineplus">+          if (newIndex &gt; numItems - 1)</span>
<a href="#l5.724"></a><span id="l5.724" class="difflineplus">+            newIndex = numItems - 1;</span>
<a href="#l5.725"></a><span id="l5.725" class="difflineplus">+</span>
<a href="#l5.726"></a><span id="l5.726" class="difflineplus">+          var newItem = this.getItemAtIndex(newIndex);</span>
<a href="#l5.727"></a><span id="l5.727" class="difflineplus">+          // make sure that the item is actually visible/selectable</span>
<a href="#l5.728"></a><span id="l5.728" class="difflineplus">+          if (this._userSelecting &amp;&amp; newItem &amp;&amp; !this._canUserSelect(newItem))</span>
<a href="#l5.729"></a><span id="l5.729" class="difflineplus">+            newItem =</span>
<a href="#l5.730"></a><span id="l5.730" class="difflineplus">+              aOffset &gt; 0 ? this.getNextItem(newItem, 1) || this.getPreviousItem(newItem, 1) :</span>
<a href="#l5.731"></a><span id="l5.731" class="difflineplus">+                            this.getPreviousItem(newItem, 1) || this.getNextItem(newItem, 1);</span>
<a href="#l5.732"></a><span id="l5.732" class="difflineplus">+          if (newItem) {</span>
<a href="#l5.733"></a><span id="l5.733" class="difflineplus">+            this.ensureIndexIsVisible(this.getIndexOfItem(newItem));</span>
<a href="#l5.734"></a><span id="l5.734" class="difflineplus">+            if (aIsSelectingRange)</span>
<a href="#l5.735"></a><span id="l5.735" class="difflineplus">+              this.selectItemRange(null, newItem);</span>
<a href="#l5.736"></a><span id="l5.736" class="difflineplus">+            else if (aIsSelecting)</span>
<a href="#l5.737"></a><span id="l5.737" class="difflineplus">+              this.selectItem(newItem);</span>
<a href="#l5.738"></a><span id="l5.738" class="difflineplus">+</span>
<a href="#l5.739"></a><span id="l5.739" class="difflineplus">+            this.currentItem = newItem;</span>
<a href="#l5.740"></a><span id="l5.740" class="difflineplus">+          }</span>
<a href="#l5.741"></a><span id="l5.741" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.742"></a><span id="l5.742" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.743"></a><span id="l5.743" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.744"></a><span id="l5.744" class="difflineplus">+</span>
<a href="#l5.745"></a><span id="l5.745" class="difflineplus">+      &lt;method name=&quot;_moveByOffsetFromUserEvent&quot;&gt;</span>
<a href="#l5.746"></a><span id="l5.746" class="difflineplus">+        &lt;parameter name=&quot;aOffset&quot;/&gt;</span>
<a href="#l5.747"></a><span id="l5.747" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l5.748"></a><span id="l5.748" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.749"></a><span id="l5.749" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.750"></a><span id="l5.750" class="difflineplus">+          if (!aEvent.defaultPrevented) {</span>
<a href="#l5.751"></a><span id="l5.751" class="difflineplus">+            this._userSelecting = true;</span>
<a href="#l5.752"></a><span id="l5.752" class="difflineplus">+            this._mayReverse = true;</span>
<a href="#l5.753"></a><span id="l5.753" class="difflineplus">+            this.moveByOffset(aOffset, !aEvent.ctrlKey, aEvent.shiftKey);</span>
<a href="#l5.754"></a><span id="l5.754" class="difflineplus">+            this._userSelecting = false;</span>
<a href="#l5.755"></a><span id="l5.755" class="difflineplus">+            this._mayReverse = false;</span>
<a href="#l5.756"></a><span id="l5.756" class="difflineplus">+            aEvent.preventDefault();</span>
<a href="#l5.757"></a><span id="l5.757" class="difflineplus">+          }</span>
<a href="#l5.758"></a><span id="l5.758" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.759"></a><span id="l5.759" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.760"></a><span id="l5.760" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.761"></a><span id="l5.761" class="difflineplus">+</span>
<a href="#l5.762"></a><span id="l5.762" class="difflineplus">+      &lt;method name=&quot;_canUserSelect&quot;&gt;</span>
<a href="#l5.763"></a><span id="l5.763" class="difflineplus">+        &lt;parameter name=&quot;aItem&quot;/&gt;</span>
<a href="#l5.764"></a><span id="l5.764" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.765"></a><span id="l5.765" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.766"></a><span id="l5.766" class="difflineplus">+          var style = document.defaultView.getComputedStyle(aItem);</span>
<a href="#l5.767"></a><span id="l5.767" class="difflineplus">+          return style.display != &quot;none&quot; &amp;&amp; style.visibility == &quot;visible&quot;;</span>
<a href="#l5.768"></a><span id="l5.768" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.769"></a><span id="l5.769" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.770"></a><span id="l5.770" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.771"></a><span id="l5.771" class="difflineplus">+</span>
<a href="#l5.772"></a><span id="l5.772" class="difflineplus">+      &lt;method name=&quot;_selectTimeoutHandler&quot;&gt;</span>
<a href="#l5.773"></a><span id="l5.773" class="difflineplus">+        &lt;parameter name=&quot;aMe&quot;/&gt;</span>
<a href="#l5.774"></a><span id="l5.774" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.775"></a><span id="l5.775" class="difflineplus">+          aMe._fireOnSelect();</span>
<a href="#l5.776"></a><span id="l5.776" class="difflineplus">+          aMe._selectTimeout = null;</span>
<a href="#l5.777"></a><span id="l5.777" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.778"></a><span id="l5.778" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.779"></a><span id="l5.779" class="difflineplus">+</span>
<a href="#l5.780"></a><span id="l5.780" class="difflineplus">+      &lt;method name=&quot;timedSelect&quot;&gt;</span>
<a href="#l5.781"></a><span id="l5.781" class="difflineplus">+        &lt;parameter name=&quot;aItem&quot;/&gt;</span>
<a href="#l5.782"></a><span id="l5.782" class="difflineplus">+        &lt;parameter name=&quot;aTimeout&quot;/&gt;</span>
<a href="#l5.783"></a><span id="l5.783" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.784"></a><span id="l5.784" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.785"></a><span id="l5.785" class="difflineplus">+          var suppress = this._suppressOnSelect;</span>
<a href="#l5.786"></a><span id="l5.786" class="difflineplus">+          if (aTimeout != -1)</span>
<a href="#l5.787"></a><span id="l5.787" class="difflineplus">+            this._suppressOnSelect = true;</span>
<a href="#l5.788"></a><span id="l5.788" class="difflineplus">+</span>
<a href="#l5.789"></a><span id="l5.789" class="difflineplus">+          this.selectItem(aItem);</span>
<a href="#l5.790"></a><span id="l5.790" class="difflineplus">+</span>
<a href="#l5.791"></a><span id="l5.791" class="difflineplus">+          this._suppressOnSelect = suppress;</span>
<a href="#l5.792"></a><span id="l5.792" class="difflineplus">+</span>
<a href="#l5.793"></a><span id="l5.793" class="difflineplus">+          if (aTimeout != -1) {</span>
<a href="#l5.794"></a><span id="l5.794" class="difflineplus">+            if (this._selectTimeout)</span>
<a href="#l5.795"></a><span id="l5.795" class="difflineplus">+              window.clearTimeout(this._selectTimeout);</span>
<a href="#l5.796"></a><span id="l5.796" class="difflineplus">+            this._selectTimeout =</span>
<a href="#l5.797"></a><span id="l5.797" class="difflineplus">+              window.setTimeout(this._selectTimeoutHandler, aTimeout, this);</span>
<a href="#l5.798"></a><span id="l5.798" class="difflineplus">+          }</span>
<a href="#l5.799"></a><span id="l5.799" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.800"></a><span id="l5.800" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.801"></a><span id="l5.801" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.802"></a><span id="l5.802" class="difflineplus">+</span>
<a href="#l5.803"></a><span id="l5.803" class="difflineplus">+      &lt;field name=&quot;_currentIndex&quot;&gt;null&lt;/field&gt;</span>
<a href="#l5.804"></a><span id="l5.804" class="difflineplus">+      &lt;field name=&quot;_lastKeyTime&quot;&gt;0&lt;/field&gt;</span>
<a href="#l5.805"></a><span id="l5.805" class="difflineplus">+      &lt;field name=&quot;_incrementalString&quot;&gt;&quot;&quot;&lt;/field&gt;</span>
<a href="#l5.806"></a><span id="l5.806" class="difflineplus">+      &lt;field name=&quot;_suppressOnSelect&quot;&gt;false&lt;/field&gt;</span>
<a href="#l5.807"></a><span id="l5.807" class="difflineplus">+      &lt;field name=&quot;_userSelecting&quot;&gt;false&lt;/field&gt;</span>
<a href="#l5.808"></a><span id="l5.808" class="difflineplus">+      &lt;field name=&quot;_mayReverse&quot;&gt;false&lt;/field&gt;</span>
<a href="#l5.809"></a><span id="l5.809" class="difflineplus">+      &lt;field name=&quot;_selectTimeout&quot;&gt;null&lt;/field&gt;</span>
<a href="#l5.810"></a><span id="l5.810" class="difflineplus">+      &lt;field name=&quot;_currentItem&quot;&gt;null&lt;/field&gt;</span>
<a href="#l5.811"></a><span id="l5.811" class="difflineplus">+      &lt;field name=&quot;_selectionStart&quot;&gt;null&lt;/field&gt;</span>
<a href="#l5.812"></a><span id="l5.812" class="difflineplus">+</span>
<a href="#l5.813"></a><span id="l5.813" class="difflineplus">+      &lt;!-- For backwards-compatibility and for convenience.</span>
<a href="#l5.814"></a><span id="l5.814" class="difflineplus">+        Use ensureElementIsVisible instead --&gt;</span>
<a href="#l5.815"></a><span id="l5.815" class="difflineplus">+      &lt;method name=&quot;ensureSelectedElementIsVisible&quot;&gt;</span>
<a href="#l5.816"></a><span id="l5.816" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l5.817"></a><span id="l5.817" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l5.818"></a><span id="l5.818" class="difflineplus">+            return this.ensureElementIsVisible(this.selectedItem);</span>
<a href="#l5.819"></a><span id="l5.819" class="difflineplus">+          ]]&gt;</span>
<a href="#l5.820"></a><span id="l5.820" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l5.821"></a><span id="l5.821" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l5.822"></a><span id="l5.822" class="difflineplus">+    &lt;/implementation&gt;</span>
<a href="#l5.823"></a><span id="l5.823" class="difflineplus">+</span>
<a href="#l5.824"></a><span id="l5.824" class="difflineplus">+    &lt;handlers&gt;</span>
<a href="#l5.825"></a><span id="l5.825" class="difflineplus">+      &lt;handler event=&quot;keypress&quot; keycode=&quot;VK_UP&quot; modifiers=&quot;control shift any&quot;</span>
<a href="#l5.826"></a><span id="l5.826" class="difflineplus">+               action=&quot;this._moveByOffsetFromUserEvent(-1, event);&quot;</span>
<a href="#l5.827"></a><span id="l5.827" class="difflineplus">+               group=&quot;system&quot;/&gt;</span>
<a href="#l5.828"></a><span id="l5.828" class="difflineplus">+</span>
<a href="#l5.829"></a><span id="l5.829" class="difflineplus">+      &lt;handler event=&quot;keypress&quot; keycode=&quot;VK_DOWN&quot; modifiers=&quot;control shift any&quot;</span>
<a href="#l5.830"></a><span id="l5.830" class="difflineplus">+               action=&quot;this._moveByOffsetFromUserEvent(1, event);&quot;</span>
<a href="#l5.831"></a><span id="l5.831" class="difflineplus">+               group=&quot;system&quot;/&gt;</span>
<a href="#l5.832"></a><span id="l5.832" class="difflineplus">+</span>
<a href="#l5.833"></a><span id="l5.833" class="difflineplus">+      &lt;handler event=&quot;keypress&quot; keycode=&quot;VK_HOME&quot; modifiers=&quot;control shift any&quot;</span>
<a href="#l5.834"></a><span id="l5.834" class="difflineplus">+               group=&quot;system&quot;&gt;</span>
<a href="#l5.835"></a><span id="l5.835" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.836"></a><span id="l5.836" class="difflineplus">+          this._mayReverse = true;</span>
<a href="#l5.837"></a><span id="l5.837" class="difflineplus">+          this._moveByOffsetFromUserEvent(-this.currentIndex, event);</span>
<a href="#l5.838"></a><span id="l5.838" class="difflineplus">+          this._mayReverse = false;</span>
<a href="#l5.839"></a><span id="l5.839" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.840"></a><span id="l5.840" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l5.841"></a><span id="l5.841" class="difflineplus">+</span>
<a href="#l5.842"></a><span id="l5.842" class="difflineplus">+      &lt;handler event=&quot;keypress&quot; keycode=&quot;VK_END&quot; modifiers=&quot;control shift any&quot;</span>
<a href="#l5.843"></a><span id="l5.843" class="difflineplus">+               group=&quot;system&quot;&gt;</span>
<a href="#l5.844"></a><span id="l5.844" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.845"></a><span id="l5.845" class="difflineplus">+          this._mayReverse = true;</span>
<a href="#l5.846"></a><span id="l5.846" class="difflineplus">+          this._moveByOffsetFromUserEvent(this.getRowCount() - this.currentIndex - 1, event);</span>
<a href="#l5.847"></a><span id="l5.847" class="difflineplus">+          this._mayReverse = false;</span>
<a href="#l5.848"></a><span id="l5.848" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.849"></a><span id="l5.849" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l5.850"></a><span id="l5.850" class="difflineplus">+</span>
<a href="#l5.851"></a><span id="l5.851" class="difflineplus">+      &lt;handler event=&quot;keypress&quot; keycode=&quot;VK_PAGE_UP&quot; modifiers=&quot;control shift any&quot;</span>
<a href="#l5.852"></a><span id="l5.852" class="difflineplus">+               group=&quot;system&quot;&gt;</span>
<a href="#l5.853"></a><span id="l5.853" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.854"></a><span id="l5.854" class="difflineplus">+          this._mayReverse = true;</span>
<a href="#l5.855"></a><span id="l5.855" class="difflineplus">+          this._moveByOffsetFromUserEvent(this.scrollOnePage(-1), event);</span>
<a href="#l5.856"></a><span id="l5.856" class="difflineplus">+          this._mayReverse = false;</span>
<a href="#l5.857"></a><span id="l5.857" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.858"></a><span id="l5.858" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l5.859"></a><span id="l5.859" class="difflineplus">+</span>
<a href="#l5.860"></a><span id="l5.860" class="difflineplus">+      &lt;handler event=&quot;keypress&quot; keycode=&quot;VK_PAGE_DOWN&quot; modifiers=&quot;control shift any&quot;</span>
<a href="#l5.861"></a><span id="l5.861" class="difflineplus">+               group=&quot;system&quot;&gt;</span>
<a href="#l5.862"></a><span id="l5.862" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.863"></a><span id="l5.863" class="difflineplus">+          this._mayReverse = true;</span>
<a href="#l5.864"></a><span id="l5.864" class="difflineplus">+          this._moveByOffsetFromUserEvent(this.scrollOnePage(1), event);</span>
<a href="#l5.865"></a><span id="l5.865" class="difflineplus">+          this._mayReverse = false;</span>
<a href="#l5.866"></a><span id="l5.866" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.867"></a><span id="l5.867" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l5.868"></a><span id="l5.868" class="difflineplus">+</span>
<a href="#l5.869"></a><span id="l5.869" class="difflineplus">+      &lt;handler event=&quot;keypress&quot; key=&quot; &quot; modifiers=&quot;control&quot; phase=&quot;target&quot;&gt;</span>
<a href="#l5.870"></a><span id="l5.870" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.871"></a><span id="l5.871" class="difflineplus">+          if (this.currentItem &amp;&amp; this.selType == &quot;multiple&quot;)</span>
<a href="#l5.872"></a><span id="l5.872" class="difflineplus">+            this.toggleItemSelection(this.currentItem);</span>
<a href="#l5.873"></a><span id="l5.873" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.874"></a><span id="l5.874" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l5.875"></a><span id="l5.875" class="difflineplus">+</span>
<a href="#l5.876"></a><span id="l5.876" class="difflineplus">+      &lt;handler event=&quot;focus&quot;&gt;</span>
<a href="#l5.877"></a><span id="l5.877" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.878"></a><span id="l5.878" class="difflineplus">+          if (this.getRowCount() &gt; 0) {</span>
<a href="#l5.879"></a><span id="l5.879" class="difflineplus">+            if (this.currentIndex == -1) {</span>
<a href="#l5.880"></a><span id="l5.880" class="difflineplus">+              this.currentIndex = this.getIndexOfFirstVisibleRow();</span>
<a href="#l5.881"></a><span id="l5.881" class="difflineplus">+              let currentItem = this.getItemAtIndex(this.currentIndex);</span>
<a href="#l5.882"></a><span id="l5.882" class="difflineplus">+              if (currentItem) {</span>
<a href="#l5.883"></a><span id="l5.883" class="difflineplus">+                this.selectItem(currentItem);</span>
<a href="#l5.884"></a><span id="l5.884" class="difflineplus">+              }</span>
<a href="#l5.885"></a><span id="l5.885" class="difflineplus">+            } else {</span>
<a href="#l5.886"></a><span id="l5.886" class="difflineplus">+              this.currentItem._fireEvent(&quot;DOMMenuItemActive&quot;);</span>
<a href="#l5.887"></a><span id="l5.887" class="difflineplus">+            }</span>
<a href="#l5.888"></a><span id="l5.888" class="difflineplus">+          }</span>
<a href="#l5.889"></a><span id="l5.889" class="difflineplus">+          this._lastKeyTime = 0;</span>
<a href="#l5.890"></a><span id="l5.890" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.891"></a><span id="l5.891" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l5.892"></a><span id="l5.892" class="difflineplus">+</span>
<a href="#l5.893"></a><span id="l5.893" class="difflineplus">+      &lt;handler event=&quot;keypress&quot; phase=&quot;target&quot;&gt;</span>
<a href="#l5.894"></a><span id="l5.894" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.895"></a><span id="l5.895" class="difflineplus">+          if (!event.charCode || event.altKey || event.ctrlKey || event.metaKey)</span>
<a href="#l5.896"></a><span id="l5.896" class="difflineplus">+            return;</span>
<a href="#l5.897"></a><span id="l5.897" class="difflineplus">+</span>
<a href="#l5.898"></a><span id="l5.898" class="difflineplus">+          if (event.timeStamp - this._lastKeyTime &gt; 1000)</span>
<a href="#l5.899"></a><span id="l5.899" class="difflineplus">+            this._incrementalString = &quot;&quot;;</span>
<a href="#l5.900"></a><span id="l5.900" class="difflineplus">+</span>
<a href="#l5.901"></a><span id="l5.901" class="difflineplus">+          var key = String.fromCharCode(event.charCode).toLowerCase();</span>
<a href="#l5.902"></a><span id="l5.902" class="difflineplus">+          this._incrementalString += key;</span>
<a href="#l5.903"></a><span id="l5.903" class="difflineplus">+          this._lastKeyTime = event.timeStamp;</span>
<a href="#l5.904"></a><span id="l5.904" class="difflineplus">+</span>
<a href="#l5.905"></a><span id="l5.905" class="difflineplus">+          // If all letters in the incremental string are the same, just</span>
<a href="#l5.906"></a><span id="l5.906" class="difflineplus">+          // try to match the first one</span>
<a href="#l5.907"></a><span id="l5.907" class="difflineplus">+          var incrementalString = /^(.)\1+$/.test(this._incrementalString) ?</span>
<a href="#l5.908"></a><span id="l5.908" class="difflineplus">+                                  RegExp.$1 : this._incrementalString;</span>
<a href="#l5.909"></a><span id="l5.909" class="difflineplus">+          var length = incrementalString.length;</span>
<a href="#l5.910"></a><span id="l5.910" class="difflineplus">+</span>
<a href="#l5.911"></a><span id="l5.911" class="difflineplus">+          var rowCount = this.getRowCount();</span>
<a href="#l5.912"></a><span id="l5.912" class="difflineplus">+          var l = this.selectedItems.length;</span>
<a href="#l5.913"></a><span id="l5.913" class="difflineplus">+          var start = l &gt; 0 ? this.getIndexOfItem(this.selectedItems[l - 1]) : -1;</span>
<a href="#l5.914"></a><span id="l5.914" class="difflineplus">+          // start from the first element if none was selected or from the one</span>
<a href="#l5.915"></a><span id="l5.915" class="difflineplus">+          // following the selected one if it's a new or a repeated-letter search</span>
<a href="#l5.916"></a><span id="l5.916" class="difflineplus">+          if (start == -1 || length == 1)</span>
<a href="#l5.917"></a><span id="l5.917" class="difflineplus">+            start++;</span>
<a href="#l5.918"></a><span id="l5.918" class="difflineplus">+</span>
<a href="#l5.919"></a><span id="l5.919" class="difflineplus">+          for (var i = 0; i &lt; rowCount; i++) {</span>
<a href="#l5.920"></a><span id="l5.920" class="difflineplus">+            var k = (start + i) % rowCount;</span>
<a href="#l5.921"></a><span id="l5.921" class="difflineplus">+            var listitem = this.getItemAtIndex(k);</span>
<a href="#l5.922"></a><span id="l5.922" class="difflineplus">+            if (!this._canUserSelect(listitem))</span>
<a href="#l5.923"></a><span id="l5.923" class="difflineplus">+              continue;</span>
<a href="#l5.924"></a><span id="l5.924" class="difflineplus">+            // allow richlistitems to specify the string being searched for</span>
<a href="#l5.925"></a><span id="l5.925" class="difflineplus">+            var searchText = &quot;searchLabel&quot; in listitem ? listitem.searchLabel :</span>
<a href="#l5.926"></a><span id="l5.926" class="difflineplus">+                             listitem.getAttribute(&quot;label&quot;); // (see also bug 250123)</span>
<a href="#l5.927"></a><span id="l5.927" class="difflineplus">+            searchText = searchText.substring(0, length).toLowerCase();</span>
<a href="#l5.928"></a><span id="l5.928" class="difflineplus">+            if (searchText == incrementalString) {</span>
<a href="#l5.929"></a><span id="l5.929" class="difflineplus">+              this.ensureIndexIsVisible(k);</span>
<a href="#l5.930"></a><span id="l5.930" class="difflineplus">+              this.timedSelect(listitem, this._selectDelay);</span>
<a href="#l5.931"></a><span id="l5.931" class="difflineplus">+              break;</span>
<a href="#l5.932"></a><span id="l5.932" class="difflineplus">+            }</span>
<a href="#l5.933"></a><span id="l5.933" class="difflineplus">+          }</span>
<a href="#l5.934"></a><span id="l5.934" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.935"></a><span id="l5.935" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l5.936"></a><span id="l5.936" class="difflineplus">+</span>
<a href="#l5.937"></a><span id="l5.937" class="difflineplus">+      &lt;handler event=&quot;click&quot;&gt;</span>
<a href="#l5.938"></a><span id="l5.938" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.939"></a><span id="l5.939" class="difflineplus">+          // clicking into nothing should unselect</span>
<a href="#l5.940"></a><span id="l5.940" class="difflineplus">+          if (event.originalTarget == this._scrollbox) {</span>
<a href="#l5.941"></a><span id="l5.941" class="difflineplus">+            this.clearSelection();</span>
<a href="#l5.942"></a><span id="l5.942" class="difflineplus">+            this.currentItem = null;</span>
<a href="#l5.943"></a><span id="l5.943" class="difflineplus">+          }</span>
<a href="#l5.944"></a><span id="l5.944" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.945"></a><span id="l5.945" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l5.946"></a><span id="l5.946" class="difflineplus">+</span>
<a href="#l5.947"></a><span id="l5.947" class="difflineplus">+      &lt;handler event=&quot;MozSwipeGesture&quot;&gt;</span>
<a href="#l5.948"></a><span id="l5.948" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l5.949"></a><span id="l5.949" class="difflineplus">+          // Only handle swipe gestures up and down</span>
<a href="#l5.950"></a><span id="l5.950" class="difflineplus">+          switch (event.direction) {</span>
<a href="#l5.951"></a><span id="l5.951" class="difflineplus">+            case event.DIRECTION_DOWN:</span>
<a href="#l5.952"></a><span id="l5.952" class="difflineplus">+              this._scrollbox.scrollTop = this._scrollbox.scrollHeight;</span>
<a href="#l5.953"></a><span id="l5.953" class="difflineplus">+              break;</span>
<a href="#l5.954"></a><span id="l5.954" class="difflineplus">+            case event.DIRECTION_UP:</span>
<a href="#l5.955"></a><span id="l5.955" class="difflineplus">+              this._scrollbox.scrollTop = 0;</span>
<a href="#l5.956"></a><span id="l5.956" class="difflineplus">+              break;</span>
<a href="#l5.957"></a><span id="l5.957" class="difflineplus">+          }</span>
<a href="#l5.958"></a><span id="l5.958" class="difflineplus">+        ]]&gt;</span>
<a href="#l5.959"></a><span id="l5.959" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l5.960"></a><span id="l5.960" class="difflineplus">+    &lt;/handlers&gt;</span>
<a href="#l5.961"></a><span id="l5.961" class="difflineplus">+  &lt;/binding&gt;</span>
<a href="#l5.962"></a><span id="l5.962" class="difflineplus">+&lt;/bindings&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/base/content/aboutAddonsExtra.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/base/content/aboutAddonsExtra.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -12,16 +12,21 @@ gStrings.mailExt =</span>
<a href="#l6.4"></a><span id="l6.4"> (function() {</span>
<a href="#l6.5"></a><span id="l6.5">   window.isCorrectlySigned = function() { return true; };</span>
<a href="#l6.6"></a><span id="l6.6"> </span>
<a href="#l6.7"></a><span id="l6.7">   let contentStylesheet = document.createProcessingInstruction(</span>
<a href="#l6.8"></a><span id="l6.8">     &quot;xml-stylesheet&quot;,</span>
<a href="#l6.9"></a><span id="l6.9">     'href=&quot;chrome://messenger/content/extensionsOverlay.css&quot; type=&quot;text/css&quot;');</span>
<a href="#l6.10"></a><span id="l6.10">   document.insertBefore(contentStylesheet, document.documentElement);</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+  let bindingsStylesheet = document.createProcessingInstruction(</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+    &quot;xml-stylesheet&quot;,</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+    'href=&quot;chrome://messenger/content/bindings.css&quot; type=&quot;text/css&quot;');</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+  document.insertBefore(bindingsStylesheet, document.documentElement);</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineplus">+</span>
<a href="#l6.17"></a><span id="l6.17">   // Add navigation buttons for back and forward on the addons page.</span>
<a href="#l6.18"></a><span id="l6.18">   let hbox = document.createElement(&quot;hbox&quot;);</span>
<a href="#l6.19"></a><span id="l6.19">   hbox.setAttribute(&quot;id&quot;, &quot;nav-header&quot;);</span>
<a href="#l6.20"></a><span id="l6.20">   hbox.setAttribute(&quot;align&quot;, &quot;center&quot;);</span>
<a href="#l6.21"></a><span id="l6.21">   hbox.setAttribute(&quot;pack&quot;, &quot;center&quot;);</span>
<a href="#l6.22"></a><span id="l6.22"> </span>
<a href="#l6.23"></a><span id="l6.23">   let backButton = document.createElement(&quot;toolbarbutton&quot;);</span>
<a href="#l6.24"></a><span id="l6.24">   backButton.setAttribute(&quot;id&quot;, &quot;back-btn&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/base/content/mailWidgets.xml</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/base/content/mailWidgets.xml</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -15,17 +15,17 @@</span>
<a href="#l7.4"></a><span id="l7.4"> ]&gt;</span>
<a href="#l7.5"></a><span id="l7.5"> </span>
<a href="#l7.6"></a><span id="l7.6"> &lt;bindings id=&quot;mailBindings&quot;</span>
<a href="#l7.7"></a><span id="l7.7">           xmlns=&quot;http://www.mozilla.org/xbl&quot;</span>
<a href="#l7.8"></a><span id="l7.8">           xmlns:xul=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l7.9"></a><span id="l7.9">           xmlns:nc=&quot;http://home.netscape.com/NC-rdf#&quot;</span>
<a href="#l7.10"></a><span id="l7.10">           xmlns:xbl=&quot;http://www.mozilla.org/xbl&quot;&gt;</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-  &lt;binding id=&quot;attachmentlist-base&quot; extends=&quot;chrome://global/content/bindings/richlistbox.xml#richlistbox&quot;&gt;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+  &lt;binding id=&quot;attachmentlist-base&quot; extends=&quot;chrome://messenger/content/richlistbox.xml#xbl-richlistbox&quot;&gt;</span>
<a href="#l7.14"></a><span id="l7.14">     &lt;implementation&gt;</span>
<a href="#l7.15"></a><span id="l7.15">       &lt;constructor&gt;&lt;![CDATA[</span>
<a href="#l7.16"></a><span id="l7.16">         let children = Array.from(this._childNodes);</span>
<a href="#l7.17"></a><span id="l7.17"> </span>
<a href="#l7.18"></a><span id="l7.18">         children.filter(aChild =&gt; aChild.getAttribute(&quot;selected&quot;) == &quot;true&quot;)</span>
<a href="#l7.19"></a><span id="l7.19">                 .forEach(this.selectedItems.append, this.selectedItems);</span>
<a href="#l7.20"></a><span id="l7.20"> </span>
<a href="#l7.21"></a><span id="l7.21">         children.filter(aChild =&gt; !aChild.hasAttribute(&quot;context&quot;))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/base/jar.mn</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/base/jar.mn</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -39,16 +39,17 @@ messenger.jar:</span>
<a href="#l8.4"></a><span id="l8.4"> *   content/messenger/datetimepicker.xml            (../../common/bindings/datetimepicker.xml)</span>
<a href="#l8.5"></a><span id="l8.5">     content/messenger/generalBindings.xml           (../../common/bindings/generalBindings.xml)</span>
<a href="#l8.6"></a><span id="l8.6">     content/messenger/generalBindings.js            (../../common/bindings/generalBindings.js)</span>
<a href="#l8.7"></a><span id="l8.7">     content/messenger/menubutton.xml                (../../common/bindings/menubutton.xml)</span>
<a href="#l8.8"></a><span id="l8.8">     content/messenger/menulist.css                  (../../common/bindings/menulist.css)</span>
<a href="#l8.9"></a><span id="l8.9">     content/messenger/menulist.xml                  (../../common/bindings/menulist.xml)</span>
<a href="#l8.10"></a><span id="l8.10">     content/messenger/notificationbox.xml           (../../common/bindings/notificationbox.xml)</span>
<a href="#l8.11"></a><span id="l8.11">     content/messenger/numberbox.xml                 (../../common/bindings/numberbox.xml)</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineplus">+    content/messenger/richlistbox.xml               (../../common/bindings/richlistbox.xml)</span>
<a href="#l8.13"></a><span id="l8.13">     content/messenger/spinbuttons.xml               (../../common/bindings/spinbuttons.xml)</span>
<a href="#l8.14"></a><span id="l8.14"> *   content/messenger/textbox.xml                   (../../common/bindings/textbox.xml)</span>
<a href="#l8.15"></a><span id="l8.15"> *   content/messenger/toolbar.xml                   (../../common/bindings/toolbar.xml)</span>
<a href="#l8.16"></a><span id="l8.16">     content/messenger/attachmentList.css            (content/attachmentList.css)</span>
<a href="#l8.17"></a><span id="l8.17"> *   content/messenger/bindings.css                  (content/bindings.css)</span>
<a href="#l8.18"></a><span id="l8.18">     content/messenger/nsDragAndDrop.js              (content/nsDragAndDrop.js)</span>
<a href="#l8.19"></a><span id="l8.19">     content/messenger/editContactPanel.js           (content/editContactPanel.js)</span>
<a href="#l8.20"></a><span id="l8.20">     content/messenger/msgMail3PaneWindow.js         (content/msgMail3PaneWindow.js)</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:32Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

