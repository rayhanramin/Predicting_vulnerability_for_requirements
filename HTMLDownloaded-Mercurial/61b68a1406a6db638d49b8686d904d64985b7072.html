<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 20123:61b68a1406a6db638d49b8686d904d64985b7072</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 61b68a1406a6db638d49b8686d904d64985b7072" />
<meta property="og:url" content="/comm-central/rev/61b68a1406a6db638d49b8686d904d64985b7072" />
<meta property="og:description" content="Bug 1275284 - Update twitter-text library to 1.14. r=clokep" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 61b68a1406a6db638d49b8686d904d64985b7072 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/61b68a1406a6db638d49b8686d904d64985b7072">shortlog</a> |
<a href="/comm-central/log/61b68a1406a6db638d49b8686d904d64985b7072">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/61b68a1406a6db638d49b8686d904d64985b7072">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/61b68a1406a6db638d49b8686d904d64985b7072">files</a> |
changeset |
<a href="/comm-central/raw-rev/61b68a1406a6db638d49b8686d904d64985b7072">raw</a>  | <a href="/comm-central/archive/61b68a1406a6db638d49b8686d904d64985b7072.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1275284">Bug 1275284</a> - Update twitter-text library to 1.14. r=clokep
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#97;&#108;&#101;&#116;&#104;&#32;&#60;&#97;&#108;&#101;&#116;&#104;&#64;&#105;&#110;&#115;&#116;&#97;&#110;&#116;&#98;&#105;&#114;&#100;&#46;&#111;&#114;&#103;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 21 Sep 2016 22:54:37 +0200</td></tr>

<tr>
 <td>changeset 20123</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/61b68a1406a6db638d49b8686d904d64985b7072">61b68a1406a6db638d49b8686d904d64985b7072</a></td>
</tr>



<tr>
<td>parent 20122</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/7b41f76ddf18b284e860cd741f9c2d02fbea863e">7b41f76ddf18b284e860cd741f9c2d02fbea863e</a>
</td>
</tr>

<tr>
<td>child 20124</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/fcb58e25b5820f0399dea5a9d37dc2f95513fe43">fcb58e25b5820f0399dea5a9d37dc2f95513fe43</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=61b68a1406a6db638d49b8686d904d64985b7072">12336</a></td></tr>
<tr><td>push user</td><td>aleth@instantbird.org</td></tr>
<tr><td>push date</td><td class="date age">Thu, 22 Sep 2016 14:33:58 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@61b68a1406a6 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=61b68a1406a6db638d49b8686d904d64985b7072">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=61b68a1406a6db638d49b8686d904d64985b7072&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=61b68a1406a6db638d49b8686d904d64985b7072&newProject=comm-central&newRevision=61b68a1406a6db638d49b8686d904d64985b7072&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=61b68a1406a6db638d49b8686d904d64985b7072&newProject=comm-central&newRevision=61b68a1406a6db638d49b8686d904d64985b7072&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=61b68a1406a6db638d49b8686d904d64985b7072&newProject=comm-central&newRevision=61b68a1406a6db638d49b8686d904d64985b7072&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28clokep%29&revcount=50">clokep</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1275284">1275284</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1275284">Bug 1275284</a> - Update twitter-text library to 1.14. r=clokep</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/61b68a1406a6db638d49b8686d904d64985b7072/chat/protocols/twitter/twitter-text.jsm">chat/protocols/twitter/twitter-text.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/61b68a1406a6db638d49b8686d904d64985b7072/chat/protocols/twitter/twitter-text.jsm">file</a> |
<a href="/comm-central/annotate/61b68a1406a6db638d49b8686d904d64985b7072/chat/protocols/twitter/twitter-text.jsm">annotate</a> |
<a href="/comm-central/diff/61b68a1406a6db638d49b8686d904d64985b7072/chat/protocols/twitter/twitter-text.jsm">diff</a> |
<a href="/comm-central/comparison/61b68a1406a6db638d49b8686d904d64985b7072/chat/protocols/twitter/twitter-text.jsm">comparison</a> |
<a href="/comm-central/log/61b68a1406a6db638d49b8686d904d64985b7072/chat/protocols/twitter/twitter-text.jsm">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/chat/protocols/twitter/twitter-text.jsm</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/chat/protocols/twitter/twitter-text.jsm</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -76,99 +76,44 @@ var window = {};</span>
<a href="#l1.4"></a><span id="l1.4">   function stringSupplant(str, values) {</span>
<a href="#l1.5"></a><span id="l1.5">     return str.replace(/#\{(\w+)\}/g, function(match, name) {</span>
<a href="#l1.6"></a><span id="l1.6">       return values[name] || &quot;&quot;;</span>
<a href="#l1.7"></a><span id="l1.7">     });</span>
<a href="#l1.8"></a><span id="l1.8">   }</span>
<a href="#l1.9"></a><span id="l1.9"> </span>
<a href="#l1.10"></a><span id="l1.10">   twttr.txt.stringSupplant = stringSupplant;</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-  function addCharsToCharClass(charClass, start, end) {</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineminus">-    var s = String.fromCharCode(start);</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineminus">-    if (end !== start) {</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineminus">-      s += &quot;-&quot; + String.fromCharCode(end);</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineminus">-    }</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineminus">-    charClass.push(s);</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineminus">-    return charClass;</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineminus">-  }</span>
<a href="#l1.20"></a><span id="l1.20" class="difflineminus">-</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineminus">-  twttr.txt.addCharsToCharClass = addCharsToCharClass;</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineminus">-</span>
<a href="#l1.23"></a><span id="l1.23" class="difflineminus">-  // Space is more than %20, U+3000 for example is the full-width space used with Kanji. Provide a short-hand</span>
<a href="#l1.24"></a><span id="l1.24" class="difflineminus">-  // to access both the list of characters and a pattern suitible for use with String#split</span>
<a href="#l1.25"></a><span id="l1.25" class="difflineminus">-  // Taken from: ActiveSupport::Multibyte::Handlers::UTF8Handler::UNICODE_WHITESPACE</span>
<a href="#l1.26"></a><span id="l1.26" class="difflineminus">-  var fromCode = String.fromCharCode;</span>
<a href="#l1.27"></a><span id="l1.27" class="difflineminus">-  var UNICODE_SPACES = [</span>
<a href="#l1.28"></a><span id="l1.28" class="difflineminus">-    fromCode(0x0020), // White_Space # Zs       SPACE</span>
<a href="#l1.29"></a><span id="l1.29" class="difflineminus">-    fromCode(0x0085), // White_Space # Cc       &lt;control-0085&gt;</span>
<a href="#l1.30"></a><span id="l1.30" class="difflineminus">-    fromCode(0x00A0), // White_Space # Zs       NO-BREAK SPACE</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-    fromCode(0x1680), // White_Space # Zs       OGHAM SPACE MARK</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineminus">-    fromCode(0x180E), // White_Space # Zs       MONGOLIAN VOWEL SEPARATOR</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineminus">-    fromCode(0x2028), // White_Space # Zl       LINE SEPARATOR</span>
<a href="#l1.34"></a><span id="l1.34" class="difflineminus">-    fromCode(0x2029), // White_Space # Zp       PARAGRAPH SEPARATOR</span>
<a href="#l1.35"></a><span id="l1.35" class="difflineminus">-    fromCode(0x202F), // White_Space # Zs       NARROW NO-BREAK SPACE</span>
<a href="#l1.36"></a><span id="l1.36" class="difflineminus">-    fromCode(0x205F), // White_Space # Zs       MEDIUM MATHEMATICAL SPACE</span>
<a href="#l1.37"></a><span id="l1.37" class="difflineminus">-    fromCode(0x3000)  // White_Space # Zs       IDEOGRAPHIC SPACE</span>
<a href="#l1.38"></a><span id="l1.38" class="difflineminus">-  ];</span>
<a href="#l1.39"></a><span id="l1.39" class="difflineminus">-  addCharsToCharClass(UNICODE_SPACES, 0x009, 0x00D); // White_Space # Cc   [5] &lt;control-0009&gt;..&lt;control-000D&gt;</span>
<a href="#l1.40"></a><span id="l1.40" class="difflineminus">-  addCharsToCharClass(UNICODE_SPACES, 0x2000, 0x200A); // White_Space # Zs  [11] EN QUAD..HAIR SPACE</span>
<a href="#l1.41"></a><span id="l1.41" class="difflineminus">-</span>
<a href="#l1.42"></a><span id="l1.42" class="difflineminus">-  var INVALID_CHARS = [</span>
<a href="#l1.43"></a><span id="l1.43" class="difflineminus">-    fromCode(0xFFFE),</span>
<a href="#l1.44"></a><span id="l1.44" class="difflineminus">-    fromCode(0xFEFF), // BOM</span>
<a href="#l1.45"></a><span id="l1.45" class="difflineminus">-    fromCode(0xFFFF) // Special</span>
<a href="#l1.46"></a><span id="l1.46" class="difflineminus">-  ];</span>
<a href="#l1.47"></a><span id="l1.47" class="difflineminus">-  addCharsToCharClass(INVALID_CHARS, 0x202A, 0x202E); // Directional change</span>
<a href="#l1.48"></a><span id="l1.48" class="difflineminus">-</span>
<a href="#l1.49"></a><span id="l1.49" class="difflineminus">-  twttr.txt.regexen.spaces_group = regexSupplant(UNICODE_SPACES.join(&quot;&quot;));</span>
<a href="#l1.50"></a><span id="l1.50" class="difflineminus">-  twttr.txt.regexen.spaces = regexSupplant(&quot;[&quot; + UNICODE_SPACES.join(&quot;&quot;) + &quot;]&quot;);</span>
<a href="#l1.51"></a><span id="l1.51" class="difflineminus">-  twttr.txt.regexen.invalid_chars_group = regexSupplant(INVALID_CHARS.join(&quot;&quot;));</span>
<a href="#l1.52"></a><span id="l1.52" class="difflineplus">+  twttr.txt.regexen.spaces_group = /\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000/;</span>
<a href="#l1.53"></a><span id="l1.53" class="difflineplus">+  twttr.txt.regexen.spaces = regexSupplant(/[#{spaces_group}]/);</span>
<a href="#l1.54"></a><span id="l1.54" class="difflineplus">+  twttr.txt.regexen.invalid_chars_group = /\uFFFE\uFEFF\uFFFF\u202A-\u202E/;</span>
<a href="#l1.55"></a><span id="l1.55" class="difflineplus">+  twttr.txt.regexen.invalid_chars = regexSupplant(/[#{invalid_chars_group}]/);</span>
<a href="#l1.56"></a><span id="l1.56">   twttr.txt.regexen.punct = /\!'#%&amp;'\(\)*\+,\\\-\.\/:;&lt;=&gt;\?@\[\]\^_{|}~\$/;</span>
<a href="#l1.57"></a><span id="l1.57">   twttr.txt.regexen.rtl_chars = /[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/mg;</span>
<a href="#l1.58"></a><span id="l1.58">   twttr.txt.regexen.non_bmp_code_pairs = /[\uD800-\uDBFF][\uDC00-\uDFFF]/mg;</span>
<a href="#l1.59"></a><span id="l1.59"> </span>
<a href="#l1.60"></a><span id="l1.60" class="difflineminus">-  var latinAccentChars = [];</span>
<a href="#l1.61"></a><span id="l1.61" class="difflineminus">-  // Latin accented characters (subtracted 0xD7 from the range, it's a confusable multiplication sign. Looks like &quot;x&quot;)</span>
<a href="#l1.62"></a><span id="l1.62" class="difflineminus">-  addCharsToCharClass(latinAccentChars, 0x00c0, 0x00d6);</span>
<a href="#l1.63"></a><span id="l1.63" class="difflineminus">-  addCharsToCharClass(latinAccentChars, 0x00d8, 0x00f6);</span>
<a href="#l1.64"></a><span id="l1.64" class="difflineminus">-  addCharsToCharClass(latinAccentChars, 0x00f8, 0x00ff);</span>
<a href="#l1.65"></a><span id="l1.65" class="difflineminus">-  // Latin Extended A and B</span>
<a href="#l1.66"></a><span id="l1.66" class="difflineminus">-  addCharsToCharClass(latinAccentChars, 0x0100, 0x024f);</span>
<a href="#l1.67"></a><span id="l1.67" class="difflineminus">-  // assorted IPA Extensions</span>
<a href="#l1.68"></a><span id="l1.68" class="difflineminus">-  addCharsToCharClass(latinAccentChars, 0x0253, 0x0254);</span>
<a href="#l1.69"></a><span id="l1.69" class="difflineminus">-  addCharsToCharClass(latinAccentChars, 0x0256, 0x0257);</span>
<a href="#l1.70"></a><span id="l1.70" class="difflineminus">-  addCharsToCharClass(latinAccentChars, 0x0259, 0x0259);</span>
<a href="#l1.71"></a><span id="l1.71" class="difflineminus">-  addCharsToCharClass(latinAccentChars, 0x025b, 0x025b);</span>
<a href="#l1.72"></a><span id="l1.72" class="difflineminus">-  addCharsToCharClass(latinAccentChars, 0x0263, 0x0263);</span>
<a href="#l1.73"></a><span id="l1.73" class="difflineminus">-  addCharsToCharClass(latinAccentChars, 0x0268, 0x0268);</span>
<a href="#l1.74"></a><span id="l1.74" class="difflineminus">-  addCharsToCharClass(latinAccentChars, 0x026f, 0x026f);</span>
<a href="#l1.75"></a><span id="l1.75" class="difflineminus">-  addCharsToCharClass(latinAccentChars, 0x0272, 0x0272);</span>
<a href="#l1.76"></a><span id="l1.76" class="difflineminus">-  addCharsToCharClass(latinAccentChars, 0x0289, 0x0289);</span>
<a href="#l1.77"></a><span id="l1.77" class="difflineminus">-  addCharsToCharClass(latinAccentChars, 0x028b, 0x028b);</span>
<a href="#l1.78"></a><span id="l1.78" class="difflineminus">-  // Okina for Hawaiian (it *is* a letter character)</span>
<a href="#l1.79"></a><span id="l1.79" class="difflineminus">-  addCharsToCharClass(latinAccentChars, 0x02bb, 0x02bb);</span>
<a href="#l1.80"></a><span id="l1.80" class="difflineminus">-  // Combining diacritics</span>
<a href="#l1.81"></a><span id="l1.81" class="difflineminus">-  addCharsToCharClass(latinAccentChars, 0x0300, 0x036f);</span>
<a href="#l1.82"></a><span id="l1.82" class="difflineminus">-  // Latin Extended Additional</span>
<a href="#l1.83"></a><span id="l1.83" class="difflineminus">-  addCharsToCharClass(latinAccentChars, 0x1e00, 0x1eff);</span>
<a href="#l1.84"></a><span id="l1.84" class="difflineminus">-  twttr.txt.regexen.latinAccentChars = regexSupplant(latinAccentChars.join(&quot;&quot;));</span>
<a href="#l1.85"></a><span id="l1.85" class="difflineplus">+  twttr.txt.regexen.latinAccentChars = /\xC0-\xD6\xD8-\xF6\xF8-\xFF\u0100-\u024F\u0253\u0254\u0256\u0257\u0259\u025B\u0263\u0268\u026F\u0272\u0289\u028B\u02BB\u0300-\u036F\u1E00-\u1EFF/;</span>
<a href="#l1.86"></a><span id="l1.86" class="difflineplus">+</span>
<a href="#l1.87"></a><span id="l1.87" class="difflineplus">+  // Generated from unicode_regex/unicode_regex_groups.scala, same as objective c's \p{L}\p{M}</span>
<a href="#l1.88"></a><span id="l1.88" class="difflineplus">+  twttr.txt.regexen.bmpLetterAndMarks = /A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u065f\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06ef\u06fa-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07ca-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09f0\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a70-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u103f\u1050-\u108f\u109a-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u180b-\u180d\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f\u1aa7\u1ab0-\u1abe\u1b00-\u1b4b\u1b6b-\u1b73\u1b80-\u1baf\u1bba-\u1bf3\u1c00-\u1c37\u1c4d-\u1c4f\u1c5a-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u20d0-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005\u3006\u302a-\u302f\u3031-\u3035\u303b\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua672\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6e5\ua6f0\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8e0-\ua8f7\ua8fb\ua90a-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf\ua9e0-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf870-\uf87f\uf882\uf884-\uf89f\uf8b8\uf8c1-\uf8d6\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc/;</span>
<a href="#l1.89"></a><span id="l1.89" class="difflineplus">+  twttr.txt.regexen.astralLetterAndMarks = /\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\uddfd\ude80-\ude9c\udea0-\uded0\udee0\udf00-\udf1f\udf30-\udf40\udf42-\udf49\udf50-\udf7a\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf]|\ud801[\udc00-\udc9d\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe\uddbf\ude00-\ude03\ude05\ude06\ude0c-\ude13\ude15-\ude17\ude19-\ude33\ude38-\ude3a\ude3f\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee6\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud803[\udc00-\udc48]|\ud804[\udc00-\udc46\udc7f-\udcba\udcd0-\udce8\udd00-\udd34\udd50-\udd73\udd76\udd80-\uddc4\uddda\ude00-\ude11\ude13-\ude37\udeb0-\udeea\udf01-\udf03\udf05-\udf0c\udf0f\udf10\udf13-\udf28\udf2a-\udf30\udf32\udf33\udf35-\udf39\udf3c-\udf44\udf47\udf48\udf4b-\udf4d\udf57\udf5d-\udf63\udf66-\udf6c\udf70-\udf74]|\ud805[\udc80-\udcc5\udcc7\udd80-\uddb5\uddb8-\uddc0\ude00-\ude40\ude44\ude80-\udeb7]|\ud806[\udca0-\udcdf\udcff\udec0-\udef8]|\ud808[\udc00-\udf98]|\ud80c[\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud81a[\udc00-\ude38\ude40-\ude5e\uded0-\udeed\udef0-\udef4\udf00-\udf36\udf40-\udf43\udf63-\udf77\udf7d-\udf8f]|\ud81b[\udf00-\udf44\udf50-\udf7e\udf8f-\udf9f]|\ud82c[\udc00\udc01]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99\udc9d\udc9e]|\ud834[\udd65-\udd69\udd6d-\udd72\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad\ude42-\ude44]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb]|\ud83a[\udc00-\udcc4\udcd0-\udcd6]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud840[\udc00-\udfff]|\ud841[\udc00-\udfff]|\ud842[\udc00-\udfff]|\ud843[\udc00-\udfff]|\ud844[\udc00-\udfff]|\ud845[\udc00-\udfff]|\ud846[\udc00-\udfff]|\ud847[\udc00-\udfff]|\ud848[\udc00-\udfff]|\ud849[\udc00-\udfff]|\ud84a[\udc00-\udfff]|\ud84b[\udc00-\udfff]|\ud84c[\udc00-\udfff]|\ud84d[\udc00-\udfff]|\ud84e[\udc00-\udfff]|\ud84f[\udc00-\udfff]|\ud850[\udc00-\udfff]|\ud851[\udc00-\udfff]|\ud852[\udc00-\udfff]|\ud853[\udc00-\udfff]|\ud854[\udc00-\udfff]|\ud855[\udc00-\udfff]|\ud856[\udc00-\udfff]|\ud857[\udc00-\udfff]|\ud858[\udc00-\udfff]|\ud859[\udc00-\udfff]|\ud85a[\udc00-\udfff]|\ud85b[\udc00-\udfff]|\ud85c[\udc00-\udfff]|\ud85d[\udc00-\udfff]|\ud85e[\udc00-\udfff]|\ud85f[\udc00-\udfff]|\ud860[\udc00-\udfff]|\ud861[\udc00-\udfff]|\ud862[\udc00-\udfff]|\ud863[\udc00-\udfff]|\ud864[\udc00-\udfff]|\ud865[\udc00-\udfff]|\ud866[\udc00-\udfff]|\ud867[\udc00-\udfff]|\ud868[\udc00-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud86a[\udc00-\udfff]|\ud86b[\udc00-\udfff]|\ud86c[\udc00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d]|\ud87e[\udc00-\ude1d]|\udb40[\udd00-\uddef]/;</span>
<a href="#l1.90"></a><span id="l1.90"> </span>
<a href="#l1.91"></a><span id="l1.91" class="difflineminus">-  // Some minimizers convert string escapes into their literal values, which leads to intermittent Unicode normalization bugs and</span>
<a href="#l1.92"></a><span id="l1.92" class="difflineminus">-  // increases the gzipped download size. Use RegEx literals as opposed to string literals to prevent that.</span>
<a href="#l1.93"></a><span id="l1.93" class="difflineminus">-  var unicodeLettersAndMarks = /A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E4-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8\u19C9\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2D/.source;</span>
<a href="#l1.94"></a><span id="l1.94" class="difflineminus">-  var unicodeNumbers = /0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19/.source;</span>
<a href="#l1.95"></a><span id="l1.95" class="difflineminus">-  var hashtagSpecialChars = /_\u200c\u200d\ua67e\u05be\u05f3\u05f4\uff5e\u301c\u309b\u309c\u30a0\u30fb\u3003\u0f0b\u0f0c\u00b7/.source;</span>
<a href="#l1.96"></a><span id="l1.96" class="difflineplus">+  // Generated from unicode_regex/unicode_regex_groups.scala, same as objective c's \p{Nd}</span>
<a href="#l1.97"></a><span id="l1.97" class="difflineplus">+  twttr.txt.regexen.bmpNumerals = /0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19/;</span>
<a href="#l1.98"></a><span id="l1.98" class="difflineplus">+  twttr.txt.regexen.astralNumerals = /\ud801[\udca0-\udca9]|\ud804[\udc66-\udc6f\udcf0-\udcf9\udd36-\udd3f\uddd0-\uddd9\udef0-\udef9]|\ud805[\udcd0-\udcd9\ude50-\ude59\udec0-\udec9]|\ud806[\udce0-\udce9]|\ud81a[\ude60-\ude69\udf50-\udf59]|\ud835[\udfce-\udfff]/;</span>
<a href="#l1.99"></a><span id="l1.99" class="difflineplus">+</span>
<a href="#l1.100"></a><span id="l1.100" class="difflineplus">+  twttr.txt.regexen.hashtagSpecialChars = /_\u200c\u200d\ua67e\u05be\u05f3\u05f4\uff5e\u301c\u309b\u309c\u30a0\u30fb\u3003\u0f0b\u0f0c\xb7/;</span>
<a href="#l1.101"></a><span id="l1.101"> </span>
<a href="#l1.102"></a><span id="l1.102">   // A hashtag must contain at least one unicode letter or mark, as well as numbers, underscores, and select special characters.</span>
<a href="#l1.103"></a><span id="l1.103">   twttr.txt.regexen.hashSigns = /[#＃]/;</span>
<a href="#l1.104"></a><span id="l1.104" class="difflineminus">-  twttr.txt.regexen.hashtagAlpha = new RegExp(&quot;[&quot; + unicodeLettersAndMarks + &quot;]&quot;);</span>
<a href="#l1.105"></a><span id="l1.105" class="difflineminus">-  twttr.txt.regexen.hashtagAlphaNumeric = new RegExp(&quot;[&quot; + unicodeLettersAndMarks + unicodeNumbers + hashtagSpecialChars + &quot;]&quot;);</span>
<a href="#l1.106"></a><span id="l1.106" class="difflineplus">+  twttr.txt.regexen.hashtagAlpha = regexSupplant(/(?:[#{bmpLetterAndMarks}]|(?=#{non_bmp_code_pairs})(?:#{astralLetterAndMarks}))/);</span>
<a href="#l1.107"></a><span id="l1.107" class="difflineplus">+  twttr.txt.regexen.hashtagAlphaNumeric = regexSupplant(/(?:[#{bmpLetterAndMarks}#{bmpNumerals}#{hashtagSpecialChars}]|(?=#{non_bmp_code_pairs})(?:#{astralLetterAndMarks}|#{astralNumerals}))/);</span>
<a href="#l1.108"></a><span id="l1.108">   twttr.txt.regexen.endHashtagMatch = regexSupplant(/^(?:#{hashSigns}|:\/\/)/);</span>
<a href="#l1.109"></a><span id="l1.109" class="difflineminus">-  twttr.txt.regexen.hashtagBoundary = new RegExp(&quot;(?:^|$|[^&amp;&quot; + unicodeLettersAndMarks + unicodeNumbers + hashtagSpecialChars + &quot;])&quot;);</span>
<a href="#l1.110"></a><span id="l1.110" class="difflineminus">-  twttr.txt.regexen.validHashtag = regexSupplant(/(#{hashtagBoundary})(#{hashSigns})(?!\ufe0f|\u20e3)(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi);</span>
<a href="#l1.111"></a><span id="l1.111" class="difflineplus">+  twttr.txt.regexen.codePoint = /(?:[^\uD800-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF])/;</span>
<a href="#l1.112"></a><span id="l1.112" class="difflineplus">+  twttr.txt.regexen.hashtagBoundary = regexSupplant(/(?:^|$|(?!#{hashtagAlphaNumeric}|&amp;)#{codePoint})/);</span>
<a href="#l1.113"></a><span id="l1.113" class="difflineplus">+  twttr.txt.regexen.validHashtag = regexSupplant(/(#{hashtagBoundary})(#{hashSigns})(?!\uFE0F|\u20E3)(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi);</span>
<a href="#l1.114"></a><span id="l1.114"> </span>
<a href="#l1.115"></a><span id="l1.115">   // Mention related regex collection</span>
<a href="#l1.116"></a><span id="l1.116">   twttr.txt.regexen.validMentionPrecedingChars = /(?:^|[^a-zA-Z0-9_!#$%&amp;*@＠]|(?:^|[^a-zA-Z0-9_+~.-])(?:rt|RT|rT|Rt):?)/;</span>
<a href="#l1.117"></a><span id="l1.117">   twttr.txt.regexen.atSigns = /[@＠]/;</span>
<a href="#l1.118"></a><span id="l1.118">   twttr.txt.regexen.validMentionOrList = regexSupplant(</span>
<a href="#l1.119"></a><span id="l1.119">     '(#{validMentionPrecedingChars})' +  // $1: Preceding character</span>
<a href="#l1.120"></a><span id="l1.120">     '(#{atSigns})' +                     // $2: At mark</span>
<a href="#l1.121"></a><span id="l1.121">     '([a-zA-Z0-9_]{1,20})' +             // $3: Screen name</span>
<a href="#l1.122"></a><span id="l1.122" class="difflineat">@@ -180,17 +125,17 @@ var window = {};</span>
<a href="#l1.123"></a><span id="l1.123">   // URL related regex collection</span>
<a href="#l1.124"></a><span id="l1.124">   twttr.txt.regexen.validUrlPrecedingChars = regexSupplant(/(?:[^A-Za-z0-9@＠$#＃#{invalid_chars_group}]|^)/);</span>
<a href="#l1.125"></a><span id="l1.125">   twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars = /[-_.\/]$/;</span>
<a href="#l1.126"></a><span id="l1.126">   twttr.txt.regexen.invalidDomainChars = stringSupplant(&quot;#{punct}#{spaces_group}#{invalid_chars_group}&quot;, twttr.txt.regexen);</span>
<a href="#l1.127"></a><span id="l1.127">   twttr.txt.regexen.validDomainChars = regexSupplant(/[^#{invalidDomainChars}]/);</span>
<a href="#l1.128"></a><span id="l1.128">   twttr.txt.regexen.validSubdomain = regexSupplant(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/);</span>
<a href="#l1.129"></a><span id="l1.129">   twttr.txt.regexen.validDomainName = regexSupplant(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/);</span>
<a href="#l1.130"></a><span id="l1.130">   twttr.txt.regexen.validGTLD = regexSupplant(RegExp(</span>
<a href="#l1.131"></a><span id="l1.131" class="difflineminus">-    '(?:(?:' +</span>
<a href="#l1.132"></a><span id="l1.132" class="difflineplus">+'(?:(?:' +</span>
<a href="#l1.133"></a><span id="l1.133">     '삼성|닷컴|닷넷|香格里拉|餐厅|食品|飞利浦|電訊盈科|集团|购物|谷歌|诺基亚|联通|网络|网站|网店|网址|组织机构|移动|珠宝|点看|游戏|淡马锡|机构|書籍|时尚|新闻|政府|政务|' +</span>
<a href="#l1.134"></a><span id="l1.134">     '手表|手机|我爱你|慈善|微博|广东|工行|家電|娱乐|大拿|在线|嘉里大酒店|嘉里|商标|商店|商城|公益|公司|八卦|健康|信息|佛山|企业|中文网|中信|世界|ポイント|ファッション|' +</span>
<a href="#l1.135"></a><span id="l1.135">     'セール|ストア|コム|グーグル|クラウド|みんな|คอม|संगठन|नेट|कॉम|همراه|موقع|موبايلي|كوم|شبكة|بيتك|بازار|العليان|' +</span>
<a href="#l1.136"></a><span id="l1.136">     'ارامكو|ابوظبي|קום|сайт|рус|орг|онлайн|москва|ком|дети|zuerich|zone|zippo|zip|zero|zara|zappos|' +</span>
<a href="#l1.137"></a><span id="l1.137">     'yun|youtube|you|yokohama|yoga|yodobashi|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xin|xihuan|' +</span>
<a href="#l1.138"></a><span id="l1.138">     'xfinity|xerox|xbox|wtf|wtc|world|works|work|woodside|wolterskluwer|wme|wine|windows|win|' +</span>
<a href="#l1.139"></a><span id="l1.139">     'williamhill|wiki|wien|whoswho|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|' +</span>
<a href="#l1.140"></a><span id="l1.140">     'weather|watches|watch|warman|wanggou|wang|walter|wales|vuelos|voyage|voto|voting|vote|' +</span>
<a href="#l1.141"></a><span id="l1.141" class="difflineat">@@ -257,42 +202,39 @@ var window = {};</span>
<a href="#l1.142"></a><span id="l1.142">     'boehringer|boats|bnpparibas|bnl|bmw|bms|blue|bloomberg|blog|blanco|blackfriday|black|biz|bio|' +</span>
<a href="#l1.143"></a><span id="l1.143">     'bingo|bing|bike|bid|bible|bharti|bet|best|berlin|bentley|beer|beats|bcn|bcg|bbva|bbc|bayern|' +</span>
<a href="#l1.144"></a><span id="l1.144">     'bauhaus|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|baidu|baby|azure|axa|aws|' +</span>
<a href="#l1.145"></a><span id="l1.145">     'avianca|autos|auto|author|audio|audible|audi|auction|attorney|associates|asia|arte|art|arpa|' +</span>
<a href="#l1.146"></a><span id="l1.146">     'army|archi|aramco|aquarelle|apple|app|apartments|anz|anquan|android|analytics|amsterdam|amica|' +</span>
<a href="#l1.147"></a><span id="l1.147">     'alstom|alsace|ally|allfinanz|alipay|alibaba|akdn|airtel|airforce|airbus|aig|agency|agakhan|afl|' +</span>
<a href="#l1.148"></a><span id="l1.148">     'aetna|aero|aeg|adult|ads|adac|actor|active|aco|accountants|accountant|accenture|academy|' +</span>
<a href="#l1.149"></a><span id="l1.149">     'abudhabi|abogado|able|abbvie|abbott|abb|aarp|aaa|onion' +</span>
<a href="#l1.150"></a><span id="l1.150" class="difflineminus">-    ')(?=[^0-9a-zA-Z@]|$))'));</span>
<a href="#l1.151"></a><span id="l1.151" class="difflineplus">+')(?=[^0-9a-zA-Z@]|$))'));</span>
<a href="#l1.152"></a><span id="l1.152">   twttr.txt.regexen.validCCTLD = regexSupplant(RegExp(</span>
<a href="#l1.153"></a><span id="l1.153" class="difflineminus">-    '(?:(?:' +</span>
<a href="#l1.154"></a><span id="l1.154" class="difflineplus">+'(?:(?:' +</span>
<a href="#l1.155"></a><span id="l1.155">     '한국|香港|澳門|新加坡|台灣|台湾|中國|中国|გე|ไทย|ලංකා|ഭാരതം|ಭಾರತ|భారత్|சிங்கப்பூர்|இலங்கை|இந்தியா|ଭାରତ|ભારત|ਭਾਰਤ|' +</span>
<a href="#l1.156"></a><span id="l1.156">     'ভাৰত|ভারত|বাংলা|भारत|پاکستان|مليسيا|مصر|قطر|فلسطين|عمان|عراق|سورية|سودان|تونس|بھارت|ایران|' +</span>
<a href="#l1.157"></a><span id="l1.157">     'امارات|المغرب|السعودية|الجزائر|الاردن|հայ|қаз|укр|срб|рф|мон|мкд|ею|бел|бг|ελ|zw|zm|za|yt|ye|ws|' +</span>
<a href="#l1.158"></a><span id="l1.158">     'wf|vu|vn|vi|vg|ve|vc|va|uz|uy|us|um|uk|ug|ua|tz|tw|tv|tt|tr|tp|to|tn|tm|tl|tk|tj|th|tg|tf|td|tc|' +</span>
<a href="#l1.159"></a><span id="l1.159">     'sz|sy|sx|sv|su|st|ss|sr|so|sn|sm|sl|sk|sj|si|sh|sg|se|sd|sc|sb|sa|rw|ru|rs|ro|re|qa|py|pw|pt|ps|' +</span>
<a href="#l1.160"></a><span id="l1.160">     'pr|pn|pm|pl|pk|ph|pg|pf|pe|pa|om|nz|nu|nr|np|no|nl|ni|ng|nf|ne|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|' +</span>
<a href="#l1.161"></a><span id="l1.161">     'mq|mp|mo|mn|mm|ml|mk|mh|mg|mf|me|md|mc|ma|ly|lv|lu|lt|ls|lr|lk|li|lc|lb|la|kz|ky|kw|kr|kp|kn|km|' +</span>
<a href="#l1.162"></a><span id="l1.162">     'ki|kh|kg|ke|jp|jo|jm|je|it|is|ir|iq|io|in|im|il|ie|id|hu|ht|hr|hn|hm|hk|gy|gw|gu|gt|gs|gr|gq|gp|' +</span>
<a href="#l1.163"></a><span id="l1.163">     'gn|gm|gl|gi|gh|gg|gf|ge|gd|gb|ga|fr|fo|fm|fk|fj|fi|eu|et|es|er|eh|eg|ee|ec|dz|do|dm|dk|dj|de|cz|' +</span>
<a href="#l1.164"></a><span id="l1.164">     'cy|cx|cw|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|bz|by|bw|bv|bt|bs|br|bq|bo|bn|bm|bl|bj|bi|' +</span>
<a href="#l1.165"></a><span id="l1.165">     'bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ar|aq|ao|an|am|al|ai|ag|af|ae|ad|ac' +</span>
<a href="#l1.166"></a><span id="l1.166" class="difflineminus">-    ')(?=[^0-9a-zA-Z@]|$))'));</span>
<a href="#l1.167"></a><span id="l1.167" class="difflineminus">-  twttr.txt.regexen.validPunycode = regexSupplant(/(?:xn--[0-9a-z]+)/);</span>
<a href="#l1.168"></a><span id="l1.168" class="difflineminus">-  twttr.txt.regexen.validSpecialCCTLD = regexSupplant(RegExp(</span>
<a href="#l1.169"></a><span id="l1.169" class="difflineminus">-    '(?:(?:co|tv)(?=[^0-9a-zA-Z@]|$))'));</span>
<a href="#l1.170"></a><span id="l1.170" class="difflineplus">+')(?=[^0-9a-zA-Z@]|$))'));</span>
<a href="#l1.171"></a><span id="l1.171" class="difflineplus">+  twttr.txt.regexen.validPunycode = /(?:xn--[0-9a-z]+)/;</span>
<a href="#l1.172"></a><span id="l1.172" class="difflineplus">+  twttr.txt.regexen.validSpecialCCTLD = /(?:(?:co|tv)(?=[^0-9a-zA-Z@]|$))/;</span>
<a href="#l1.173"></a><span id="l1.173">   twttr.txt.regexen.validDomain = regexSupplant(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/);</span>
<a href="#l1.174"></a><span id="l1.174">   twttr.txt.regexen.validAsciiDomain = regexSupplant(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi);</span>
<a href="#l1.175"></a><span id="l1.175">   twttr.txt.regexen.invalidShortDomain = regexSupplant(/^#{validDomainName}#{validCCTLD}$/i);</span>
<a href="#l1.176"></a><span id="l1.176">   twttr.txt.regexen.validSpecialShortDomain = regexSupplant(/^#{validDomainName}#{validSpecialCCTLD}$/i);</span>
<a href="#l1.177"></a><span id="l1.177" class="difflineminus">-</span>
<a href="#l1.178"></a><span id="l1.178" class="difflineminus">-  twttr.txt.regexen.validPortNumber = regexSupplant(/[0-9]+/);</span>
<a href="#l1.179"></a><span id="l1.179" class="difflineminus">-</span>
<a href="#l1.180"></a><span id="l1.180" class="difflineminus">-  twttr.txt.regexen.cyrillicLettersAndMarks = regexSupplant(/\u0400-\u04FF/);</span>
<a href="#l1.181"></a><span id="l1.181" class="difflineplus">+  twttr.txt.regexen.validPortNumber = /[0-9]+/;</span>
<a href="#l1.182"></a><span id="l1.182" class="difflineplus">+  twttr.txt.regexen.cyrillicLettersAndMarks = /\u0400-\u04FF/;</span>
<a href="#l1.183"></a><span id="l1.183">   twttr.txt.regexen.validGeneralUrlPathChars = regexSupplant(/[a-z#{cyrillicLettersAndMarks}0-9!\*';:=\+,\.\$\/%#\[\]\-_~@\|&amp;#{latinAccentChars}]/i);</span>
<a href="#l1.184"></a><span id="l1.184">   // Allow URL paths to contain up to two nested levels of balanced parens</span>
<a href="#l1.185"></a><span id="l1.185">   //  1. Used in Wikipedia URLs like /Primer_(film)</span>
<a href="#l1.186"></a><span id="l1.186">   //  2. Used in IIS sessions like /S(dfd346)/</span>
<a href="#l1.187"></a><span id="l1.187">   //  3. Used in Rdio URLs like /track/We_Up_(Album_Version_(Edited))/</span>
<a href="#l1.188"></a><span id="l1.188">   twttr.txt.regexen.validUrlBalancedParens = regexSupplant(</span>
<a href="#l1.189"></a><span id="l1.189">     '\\('                                   +</span>
<a href="#l1.190"></a><span id="l1.190">       '(?:'                                 +</span>
<a href="#l1.191"></a><span id="l1.191" class="difflineat">@@ -1214,33 +1156,16 @@ var window = {};</span>
<a href="#l1.192"></a><span id="l1.192">       }</span>
<a href="#l1.193"></a><span id="l1.193">     }</span>
<a href="#l1.194"></a><span id="l1.194"> </span>
<a href="#l1.195"></a><span id="l1.195">     return result;</span>
<a href="#l1.196"></a><span id="l1.196">   };</span>
<a href="#l1.197"></a><span id="l1.197"> </span>
<a href="#l1.198"></a><span id="l1.198">   var MAX_LENGTH = 140;</span>
<a href="#l1.199"></a><span id="l1.199"> </span>
<a href="#l1.200"></a><span id="l1.200" class="difflineminus">-  // Characters not allowed in Tweets</span>
<a href="#l1.201"></a><span id="l1.201" class="difflineminus">-  var INVALID_CHARACTERS = [</span>
<a href="#l1.202"></a><span id="l1.202" class="difflineminus">-    // BOM</span>
<a href="#l1.203"></a><span id="l1.203" class="difflineminus">-    fromCode(0xFFFE),</span>
<a href="#l1.204"></a><span id="l1.204" class="difflineminus">-    fromCode(0xFEFF),</span>
<a href="#l1.205"></a><span id="l1.205" class="difflineminus">-</span>
<a href="#l1.206"></a><span id="l1.206" class="difflineminus">-    // Special</span>
<a href="#l1.207"></a><span id="l1.207" class="difflineminus">-    fromCode(0xFFFF),</span>
<a href="#l1.208"></a><span id="l1.208" class="difflineminus">-</span>
<a href="#l1.209"></a><span id="l1.209" class="difflineminus">-    // Directional Change</span>
<a href="#l1.210"></a><span id="l1.210" class="difflineminus">-    fromCode(0x202A),</span>
<a href="#l1.211"></a><span id="l1.211" class="difflineminus">-    fromCode(0x202B),</span>
<a href="#l1.212"></a><span id="l1.212" class="difflineminus">-    fromCode(0x202C),</span>
<a href="#l1.213"></a><span id="l1.213" class="difflineminus">-    fromCode(0x202D),</span>
<a href="#l1.214"></a><span id="l1.214" class="difflineminus">-    fromCode(0x202E)</span>
<a href="#l1.215"></a><span id="l1.215" class="difflineminus">-  ];</span>
<a href="#l1.216"></a><span id="l1.216" class="difflineminus">-</span>
<a href="#l1.217"></a><span id="l1.217">   // Returns the length of Tweet text with consideration to t.co URL replacement</span>
<a href="#l1.218"></a><span id="l1.218">   // and chars outside the basic multilingual plane that use 2 UTF16 code points</span>
<a href="#l1.219"></a><span id="l1.219">   twttr.txt.getTweetLength = function(text, options) {</span>
<a href="#l1.220"></a><span id="l1.220">     if (!options) {</span>
<a href="#l1.221"></a><span id="l1.221">       options = {</span>
<a href="#l1.222"></a><span id="l1.222">           // These come from https://api.twitter.com/1/help/configuration.json</span>
<a href="#l1.223"></a><span id="l1.223">           // described by https://dev.twitter.com/docs/api/1/get/help/configuration</span>
<a href="#l1.224"></a><span id="l1.224">           short_url_length: 23,</span>
<a href="#l1.225"></a><span id="l1.225" class="difflineat">@@ -1289,22 +1214,17 @@ var window = {};</span>
<a href="#l1.226"></a><span id="l1.226">     if (twttr.txt.hasInvalidCharacters(text)) {</span>
<a href="#l1.227"></a><span id="l1.227">       return &quot;invalid_characters&quot;;</span>
<a href="#l1.228"></a><span id="l1.228">     }</span>
<a href="#l1.229"></a><span id="l1.229"> </span>
<a href="#l1.230"></a><span id="l1.230">     return false;</span>
<a href="#l1.231"></a><span id="l1.231">   };</span>
<a href="#l1.232"></a><span id="l1.232"> </span>
<a href="#l1.233"></a><span id="l1.233">   twttr.txt.hasInvalidCharacters = function(text) {</span>
<a href="#l1.234"></a><span id="l1.234" class="difflineminus">-    for (var i = 0; i &lt; INVALID_CHARACTERS.length; i++) {</span>
<a href="#l1.235"></a><span id="l1.235" class="difflineminus">-      if (text.indexOf(INVALID_CHARACTERS[i]) &gt;= 0) {</span>
<a href="#l1.236"></a><span id="l1.236" class="difflineminus">-        return true;</span>
<a href="#l1.237"></a><span id="l1.237" class="difflineminus">-      }</span>
<a href="#l1.238"></a><span id="l1.238" class="difflineminus">-    }</span>
<a href="#l1.239"></a><span id="l1.239" class="difflineminus">-    return false;</span>
<a href="#l1.240"></a><span id="l1.240" class="difflineplus">+    return twttr.txt.regexen.invalid_chars.test(text);</span>
<a href="#l1.241"></a><span id="l1.241">   };</span>
<a href="#l1.242"></a><span id="l1.242"> </span>
<a href="#l1.243"></a><span id="l1.243">   twttr.txt.isValidTweetText = function(text) {</span>
<a href="#l1.244"></a><span id="l1.244">     return !twttr.txt.isInvalidTweet(text);</span>
<a href="#l1.245"></a><span id="l1.245">   };</span>
<a href="#l1.246"></a><span id="l1.246"> </span>
<a href="#l1.247"></a><span id="l1.247">   twttr.txt.isValidUsername = function(username) {</span>
<a href="#l1.248"></a><span id="l1.248">     if (!username) {</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

