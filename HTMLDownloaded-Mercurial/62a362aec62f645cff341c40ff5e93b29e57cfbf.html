<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 18781:62a362aec62f645cff341c40ff5e93b29e57cfbf</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 62a362aec62f645cff341c40ff5e93b29e57cfbf" />
<meta property="og:url" content="/comm-central/rev/62a362aec62f645cff341c40ff5e93b29e57cfbf" />
<meta property="og:description" content="Bug 1233063 - Fork ProfileManager UI code broken by Bug 1232629 r=Neil" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 62a362aec62f645cff341c40ff5e93b29e57cfbf 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/62a362aec62f645cff341c40ff5e93b29e57cfbf">shortlog</a> |
<a href="/comm-central/log/62a362aec62f645cff341c40ff5e93b29e57cfbf">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/62a362aec62f645cff341c40ff5e93b29e57cfbf">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/62a362aec62f645cff341c40ff5e93b29e57cfbf">files</a> |
changeset |
<a href="/comm-central/raw-rev/62a362aec62f645cff341c40ff5e93b29e57cfbf">raw</a>  | <a href="/comm-central/archive/62a362aec62f645cff341c40ff5e93b29e57cfbf.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1233063">Bug 1233063</a> - Fork ProfileManager UI code broken by <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1232629">Bug 1232629</a> r=Neil
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#80;&#104;&#105;&#108;&#105;&#112;&#32;&#67;&#104;&#101;&#101;&#32;&#60;&#112;&#104;&#105;&#108;&#105;&#112;&#46;&#99;&#104;&#101;&#101;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Sat, 19 Dec 2015 05:58:29 +0800</td></tr>

<tr>
 <td>changeset 18781</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/62a362aec62f645cff341c40ff5e93b29e57cfbf">62a362aec62f645cff341c40ff5e93b29e57cfbf</a></td>
</tr>



<tr>
<td>parent 18780</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/f0294b55749422460b4d871e71255a35c9502a56">f0294b55749422460b4d871e71255a35c9502a56</a>
</td>
</tr>

<tr>
<td>child 18782</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/076c24f6d01d0a5f0b14fb1cc80c17ff24dc9074">076c24f6d01d0a5f0b14fb1cc80c17ff24dc9074</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=62a362aec62f645cff341c40ff5e93b29e57cfbf">11512</a></td></tr>
<tr><td>push user</td><td>philip.chee@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Fri, 18 Dec 2015 21:59:23 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@62a362aec62f [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=62a362aec62f645cff341c40ff5e93b29e57cfbf">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=62a362aec62f645cff341c40ff5e93b29e57cfbf&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=62a362aec62f645cff341c40ff5e93b29e57cfbf&newProject=comm-central&newRevision=62a362aec62f645cff341c40ff5e93b29e57cfbf&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=62a362aec62f645cff341c40ff5e93b29e57cfbf&newProject=comm-central&newRevision=62a362aec62f645cff341c40ff5e93b29e57cfbf&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=62a362aec62f645cff341c40ff5e93b29e57cfbf&newProject=comm-central&newRevision=62a362aec62f645cff341c40ff5e93b29e57cfbf&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Neil%29&revcount=50">Neil</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1233063">1233063</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1232629">1232629</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1233063">Bug 1233063</a> - Fork ProfileManager UI code broken by <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1232629">Bug 1232629</a> r=Neil</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/common/profile/profileSelection.js">suite/common/profile/profileSelection.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/common/profile/profileSelection.js">file</a> |
<a href="/comm-central/annotate/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/common/profile/profileSelection.js">annotate</a> |
<a href="/comm-central/diff/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/common/profile/profileSelection.js">diff</a> |
<a href="/comm-central/comparison/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/common/profile/profileSelection.js">comparison</a> |
<a href="/comm-central/log/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/common/profile/profileSelection.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/common/profile/profileSelection.xul">suite/common/profile/profileSelection.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/common/profile/profileSelection.xul">file</a> |
<a href="/comm-central/annotate/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/common/profile/profileSelection.xul">annotate</a> |
<a href="/comm-central/diff/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/common/profile/profileSelection.xul">diff</a> |
<a href="/comm-central/comparison/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/common/profile/profileSelection.xul">comparison</a> |
<a href="/comm-central/log/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/common/profile/profileSelection.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/locales/en-US/chrome/common/profile/profileSelection.dtd">suite/locales/en-US/chrome/common/profile/profileSelection.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/locales/en-US/chrome/common/profile/profileSelection.dtd">file</a> |
<a href="/comm-central/annotate/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/locales/en-US/chrome/common/profile/profileSelection.dtd">annotate</a> |
<a href="/comm-central/diff/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/locales/en-US/chrome/common/profile/profileSelection.dtd">diff</a> |
<a href="/comm-central/comparison/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/locales/en-US/chrome/common/profile/profileSelection.dtd">comparison</a> |
<a href="/comm-central/log/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/locales/en-US/chrome/common/profile/profileSelection.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/locales/en-US/chrome/common/profile/profileSelection.properties">suite/locales/en-US/chrome/common/profile/profileSelection.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/locales/en-US/chrome/common/profile/profileSelection.properties">file</a> |
<a href="/comm-central/annotate/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/locales/en-US/chrome/common/profile/profileSelection.properties">annotate</a> |
<a href="/comm-central/diff/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/locales/en-US/chrome/common/profile/profileSelection.properties">diff</a> |
<a href="/comm-central/comparison/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/locales/en-US/chrome/common/profile/profileSelection.properties">comparison</a> |
<a href="/comm-central/log/62a362aec62f645cff341c40ff5e93b29e57cfbf/suite/locales/en-US/chrome/common/profile/profileSelection.properties">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/suite/common/profile/profileSelection.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/suite/common/profile/profileSelection.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -1,29 +1,27 @@</span>
<a href="#l1.4"></a><span id="l1.4"> /* -*- Mode: C; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*-</span>
<a href="#l1.5"></a><span id="l1.5">  *</span>
<a href="#l1.6"></a><span id="l1.6">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l1.7"></a><span id="l1.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l1.8"></a><span id="l1.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l1.9"></a><span id="l1.9"> </span>
<a href="#l1.10"></a><span id="l1.10"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-var gMozAppsBundle;</span>
<a href="#l1.13"></a><span id="l1.13"> var gProfileBundle;</span>
<a href="#l1.14"></a><span id="l1.14"> var gBrandBundle;</span>
<a href="#l1.15"></a><span id="l1.15"> var gProfileService;</span>
<a href="#l1.16"></a><span id="l1.16"> var gPromptService = Components.classes[&quot;@mozilla.org/embedcomp/prompt-service;1&quot;]</span>
<a href="#l1.17"></a><span id="l1.17">                                .getService(Components.interfaces.nsIPromptService);</span>
<a href="#l1.18"></a><span id="l1.18"> var gProfileManagerMode = &quot;selection&quot;;</span>
<a href="#l1.19"></a><span id="l1.19"> var gDialogParams = window.arguments[0]</span>
<a href="#l1.20"></a><span id="l1.20">                           .QueryInterface(Components.interfaces.nsIDialogParamBlock);</span>
<a href="#l1.21"></a><span id="l1.21"> </span>
<a href="#l1.22"></a><span id="l1.22"> function StartUp()</span>
<a href="#l1.23"></a><span id="l1.23"> {</span>
<a href="#l1.24"></a><span id="l1.24" class="difflineminus">-  gMozAppsBundle = document.getElementById(&quot;bundle_mozapps&quot;);</span>
<a href="#l1.25"></a><span id="l1.25">   gProfileBundle = document.getElementById(&quot;bundle_profile&quot;);</span>
<a href="#l1.26"></a><span id="l1.26">   gBrandBundle = document.getElementById(&quot;bundle_brand&quot;);</span>
<a href="#l1.27"></a><span id="l1.27">   if (gDialogParams.objects) {</span>
<a href="#l1.28"></a><span id="l1.28">     document.documentElement.getButton(&quot;accept&quot;).setAttribute(&quot;label&quot;,</span>
<a href="#l1.29"></a><span id="l1.29">       document.documentElement.getAttribute(&quot;buttonlabelstart&quot;));</span>
<a href="#l1.30"></a><span id="l1.30">     document.documentElement.getButton(&quot;cancel&quot;).setAttribute(&quot;label&quot;,</span>
<a href="#l1.31"></a><span id="l1.31">       document.documentElement.getAttribute(&quot;buttonlabelexit&quot;));</span>
<a href="#l1.32"></a><span id="l1.32">     document.getElementById('intro').textContent =</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineat">@@ -170,39 +168,39 @@ function CreateProfile(aProfile)</span>
<a href="#l1.34"></a><span id="l1.34"> </span>
<a href="#l1.35"></a><span id="l1.35"> // rename the selected profile</span>
<a href="#l1.36"></a><span id="l1.36"> function RenameProfile()</span>
<a href="#l1.37"></a><span id="l1.37"> {</span>
<a href="#l1.38"></a><span id="l1.38">   var profileTree = document.getElementById(&quot;profiles&quot;);</span>
<a href="#l1.39"></a><span id="l1.39">   var selected = profileTree.view.getItemAtIndex(profileTree.currentIndex);</span>
<a href="#l1.40"></a><span id="l1.40">   var profileName = selected.profile.name;</span>
<a href="#l1.41"></a><span id="l1.41">   var newName = {value: profileName};</span>
<a href="#l1.42"></a><span id="l1.42" class="difflineminus">-  var dialogTitle = gMozAppsBundle.getString(&quot;renameProfileTitle&quot;);</span>
<a href="#l1.43"></a><span id="l1.43" class="difflineminus">-  var msg = gMozAppsBundle.getFormattedString(&quot;renameProfilePrompt&quot;, [profileName]);</span>
<a href="#l1.44"></a><span id="l1.44" class="difflineplus">+  var dialogTitle = gProfileBundle.getString(&quot;renameProfileTitle&quot;);</span>
<a href="#l1.45"></a><span id="l1.45" class="difflineplus">+  var msg = gProfileBundle.getFormattedString(&quot;renameProfilePrompt&quot;, [profileName]);</span>
<a href="#l1.46"></a><span id="l1.46">   if (gPromptService.prompt(window, dialogTitle, msg, newName, null, {value: 0}) &amp;&amp;</span>
<a href="#l1.47"></a><span id="l1.47">       newName.value != profileName) {</span>
<a href="#l1.48"></a><span id="l1.48">     if (!/\S/.test(newName.value)) {</span>
<a href="#l1.49"></a><span id="l1.49">       gPromptService.alert(window,</span>
<a href="#l1.50"></a><span id="l1.50" class="difflineminus">-                           gMozAppsBundle.getString(&quot;profileNameInvalidTitle&quot;),</span>
<a href="#l1.51"></a><span id="l1.51" class="difflineminus">-                           gMozAppsBundle.getString(&quot;profileNameEmpty&quot;));</span>
<a href="#l1.52"></a><span id="l1.52" class="difflineplus">+                           gProfileBundle.getString(&quot;profileNameInvalidTitle&quot;),</span>
<a href="#l1.53"></a><span id="l1.53" class="difflineplus">+                           gProfileBundle.getString(&quot;profileNameEmpty&quot;));</span>
<a href="#l1.54"></a><span id="l1.54">       return false;</span>
<a href="#l1.55"></a><span id="l1.55">     }</span>
<a href="#l1.56"></a><span id="l1.56"> </span>
<a href="#l1.57"></a><span id="l1.57">     if (/([\\*:?&lt;&gt;|\/\&quot;])/.test(newName.value)) {</span>
<a href="#l1.58"></a><span id="l1.58">       gPromptService.alert(window,</span>
<a href="#l1.59"></a><span id="l1.59" class="difflineminus">-                           gMozAppsBundle.getString(&quot;profileNameInvalidTitle&quot;),</span>
<a href="#l1.60"></a><span id="l1.60" class="difflineminus">-                           gMozAppsBundle.getFormattedString(&quot;invalidChar&quot;, [RegExp.$1]));</span>
<a href="#l1.61"></a><span id="l1.61" class="difflineplus">+                           gProfileBundle.getString(&quot;profileNameInvalidTitle&quot;),</span>
<a href="#l1.62"></a><span id="l1.62" class="difflineplus">+                           gProfileBundle.getFormattedString(&quot;invalidChar&quot;, [RegExp.$1]));</span>
<a href="#l1.63"></a><span id="l1.63">       return false;</span>
<a href="#l1.64"></a><span id="l1.64">     }</span>
<a href="#l1.65"></a><span id="l1.65"> </span>
<a href="#l1.66"></a><span id="l1.66">     try {</span>
<a href="#l1.67"></a><span id="l1.67">       gProfileService.getProfileByName(newName.value);</span>
<a href="#l1.68"></a><span id="l1.68">       gPromptService.alert(window,</span>
<a href="#l1.69"></a><span id="l1.69" class="difflineminus">-                           gMozAppsBundle.getString(&quot;profileExistsTitle&quot;),</span>
<a href="#l1.70"></a><span id="l1.70" class="difflineminus">-                           gMozAppsBundle.getString(&quot;profileExists&quot;));</span>
<a href="#l1.71"></a><span id="l1.71" class="difflineplus">+                           gProfileBundle.getString(&quot;profileExistsTitle&quot;),</span>
<a href="#l1.72"></a><span id="l1.72" class="difflineplus">+                           gProfileBundle.getString(&quot;profileExists&quot;));</span>
<a href="#l1.73"></a><span id="l1.73">       return false;</span>
<a href="#l1.74"></a><span id="l1.74">     }</span>
<a href="#l1.75"></a><span id="l1.75">     catch (e) {</span>
<a href="#l1.76"></a><span id="l1.76">     }</span>
<a href="#l1.77"></a><span id="l1.77"> </span>
<a href="#l1.78"></a><span id="l1.78">     selected.profile.name = newName.value;</span>
<a href="#l1.79"></a><span id="l1.79">     gProfileService.flush();</span>
<a href="#l1.80"></a><span id="l1.80">     selected.firstChild.firstChild.setAttribute(&quot;label&quot;, newName.value);</span>
<a href="#l1.81"></a><span id="l1.81" class="difflineat">@@ -215,32 +213,32 @@ function ConfirmDelete()</span>
<a href="#l1.82"></a><span id="l1.82">   var selected = profileTree.view.getItemAtIndex(profileTree.currentIndex);</span>
<a href="#l1.83"></a><span id="l1.83">   if (!selected.profile.rootDir.exists()) {</span>
<a href="#l1.84"></a><span id="l1.84">     DeleteProfile(false);</span>
<a href="#l1.85"></a><span id="l1.85">     return;</span>
<a href="#l1.86"></a><span id="l1.86">   }</span>
<a href="#l1.87"></a><span id="l1.87"> </span>
<a href="#l1.88"></a><span id="l1.88">   try {</span>
<a href="#l1.89"></a><span id="l1.89">     var profileLock = selected.profile.lock({});</span>
<a href="#l1.90"></a><span id="l1.90" class="difflineminus">-    var dialogTitle = gMozAppsBundle.getString(&quot;deleteTitle&quot;);</span>
<a href="#l1.91"></a><span id="l1.91" class="difflineplus">+    var dialogTitle = gProfileBundle.getString(&quot;deleteTitle&quot;);</span>
<a href="#l1.92"></a><span id="l1.92">     var dialogText;</span>
<a href="#l1.93"></a><span id="l1.93"> </span>
<a href="#l1.94"></a><span id="l1.94">     var path = selected.profile.rootDir.path;</span>
<a href="#l1.95"></a><span id="l1.95">     dialogText = gProfileBundle.getFormattedString(&quot;deleteProfile&quot;, [path]);</span>
<a href="#l1.96"></a><span id="l1.96">     var buttonPressed = gPromptService.confirmEx(window, dialogTitle, dialogText,</span>
<a href="#l1.97"></a><span id="l1.97">         (gPromptService.BUTTON_TITLE_IS_STRING * gPromptService.BUTTON_POS_0) +</span>
<a href="#l1.98"></a><span id="l1.98">         (gPromptService.BUTTON_TITLE_CANCEL * gPromptService.BUTTON_POS_1) +</span>
<a href="#l1.99"></a><span id="l1.99">         (gPromptService.BUTTON_TITLE_IS_STRING * gPromptService.BUTTON_POS_2),</span>
<a href="#l1.100"></a><span id="l1.100" class="difflineminus">-        gMozAppsBundle.getString(&quot;dontDeleteFiles&quot;), null,</span>
<a href="#l1.101"></a><span id="l1.101" class="difflineminus">-        gMozAppsBundle.getString(&quot;deleteFiles&quot;), null, {value: 0});</span>
<a href="#l1.102"></a><span id="l1.102" class="difflineplus">+        gProfileBundle.getString(&quot;dontDeleteFiles&quot;), null,</span>
<a href="#l1.103"></a><span id="l1.103" class="difflineplus">+        gProfileBundle.getString(&quot;deleteFiles&quot;), null, {value: 0});</span>
<a href="#l1.104"></a><span id="l1.104">     profileLock.unlock();</span>
<a href="#l1.105"></a><span id="l1.105">     if (buttonPressed != 1)</span>
<a href="#l1.106"></a><span id="l1.106">       DeleteProfile(buttonPressed == 2);</span>
<a href="#l1.107"></a><span id="l1.107">   } catch (e) {</span>
<a href="#l1.108"></a><span id="l1.108" class="difflineminus">-    var dialogTitle = gMozAppsBundle.getString(&quot;deleteTitle&quot;);</span>
<a href="#l1.109"></a><span id="l1.109" class="difflineplus">+    var dialogTitle = gProfileBundle.getString(&quot;deleteTitle&quot;);</span>
<a href="#l1.110"></a><span id="l1.110">     var brandName = gBrandBundle.getString(&quot;brandShortName&quot;);</span>
<a href="#l1.111"></a><span id="l1.111">     var dialogText = gProfileBundle.getFormattedString(&quot;deleteLocked&quot;,</span>
<a href="#l1.112"></a><span id="l1.112">                                                        [brandName, selected.profile.name]);</span>
<a href="#l1.113"></a><span id="l1.113">     gPromptService.alert(window, dialogTitle, dialogText);</span>
<a href="#l1.114"></a><span id="l1.114">   }</span>
<a href="#l1.115"></a><span id="l1.115"> }</span>
<a href="#l1.116"></a><span id="l1.116"> </span>
<a href="#l1.117"></a><span id="l1.117"> // Delete the profile, with the delete flag set as per instruction above.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/suite/common/profile/profileSelection.xul</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/suite/common/profile/profileSelection.xul</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -9,18 +9,16 @@</span>
<a href="#l2.4"></a><span id="l2.4"> &lt;?xml-stylesheet href=&quot;chrome://communicator/skin/&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l2.5"></a><span id="l2.5"> &lt;?xml-stylesheet href=&quot;chrome://communicator/skin/profile/profile.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l2.6"></a><span id="l2.6"> </span>
<a href="#l2.7"></a><span id="l2.7"> &lt;!DOCTYPE dialog [</span>
<a href="#l2.8"></a><span id="l2.8"> &lt;!ENTITY % brandDTD SYSTEM &quot;chrome://branding/locale/brand.dtd&quot;&gt;</span>
<a href="#l2.9"></a><span id="l2.9"> %brandDTD;</span>
<a href="#l2.10"></a><span id="l2.10"> &lt;!ENTITY % profileDTD SYSTEM &quot;chrome://communicator/locale/profile/profileSelection.dtd&quot;&gt;</span>
<a href="#l2.11"></a><span id="l2.11"> %profileDTD;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-&lt;!ENTITY % mozappsDTD SYSTEM &quot;chrome://mozapps/locale/profile/profileSelection.dtd&quot;&gt;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-%mozappsDTD;</span>
<a href="#l2.14"></a><span id="l2.14"> ]&gt;</span>
<a href="#l2.15"></a><span id="l2.15"> </span>
<a href="#l2.16"></a><span id="l2.16"> &lt;dialog id=&quot;profileWindow&quot;</span>
<a href="#l2.17"></a><span id="l2.17">         xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l2.18"></a><span id="l2.18">         title=&quot;&amp;windowTitle.label;&quot;</span>
<a href="#l2.19"></a><span id="l2.19">         windowtype=&quot;mozilla:profileSelection&quot;</span>
<a href="#l2.20"></a><span id="l2.20">         orient=&quot;vertical&quot;</span>
<a href="#l2.21"></a><span id="l2.21">         style=&quot;width: 42em;&quot;</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineat">@@ -29,18 +27,16 @@</span>
<a href="#l2.23"></a><span id="l2.23">         buttonlabelstart=&quot;&amp;start.label;&quot;</span>
<a href="#l2.24"></a><span id="l2.24">         buttonlabelexit=&quot;&amp;exit.label;&quot;</span>
<a href="#l2.25"></a><span id="l2.25">         buttonlabelextra2=&quot;&amp;manage.label;&quot;</span>
<a href="#l2.26"></a><span id="l2.26">         buttonaccesskeyextra2=&quot;&amp;manage.accesskey;&quot;</span>
<a href="#l2.27"></a><span id="l2.27">         ondialogaccept=&quot;return AcceptDialog();&quot;</span>
<a href="#l2.28"></a><span id="l2.28">         ondialogextra2=&quot;SwitchProfileManagerMode();&quot;</span>
<a href="#l2.29"></a><span id="l2.29">         onload=&quot;StartUp();&quot;&gt;</span>
<a href="#l2.30"></a><span id="l2.30"> </span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-  &lt;stringbundle id=&quot;bundle_mozapps&quot;</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineminus">-                src=&quot;chrome://mozapps/locale/profile/profileSelection.properties&quot;/&gt;</span>
<a href="#l2.33"></a><span id="l2.33">   &lt;stringbundle id=&quot;bundle_profile&quot;</span>
<a href="#l2.34"></a><span id="l2.34">                 src=&quot;chrome://communicator/locale/profile/profileSelection.properties&quot;/&gt;</span>
<a href="#l2.35"></a><span id="l2.35">   &lt;stringbundle id=&quot;bundle_brand&quot;</span>
<a href="#l2.36"></a><span id="l2.36">                 src=&quot;chrome://branding/locale/brand.properties&quot;/&gt;</span>
<a href="#l2.37"></a><span id="l2.37"> </span>
<a href="#l2.38"></a><span id="l2.38">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://communicator/content/profile/profileSelection.js&quot;/&gt;</span>
<a href="#l2.39"></a><span id="l2.39">   &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://mozapps/content/profile/createProfileWizard.js&quot;/&gt;</span>
<a href="#l2.40"></a><span id="l2.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/suite/locales/en-US/chrome/common/profile/profileSelection.dtd</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/common/profile/profileSelection.dtd</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -16,8 +16,20 @@</span>
<a href="#l3.4"></a><span id="l3.4"> </span>
<a href="#l3.5"></a><span id="l3.5"> &lt;!ENTITY            introStart.label         &quot;To access your personal profile, which contains your stored messages, settings and other personalized information, please choose your profile from the list, and click &amp;start.label; to begin your session.&quot;&gt;</span>
<a href="#l3.6"></a><span id="l3.6"> &lt;!ENTITY            introSwitch.label        &quot;To switch to another profile, which contains stored messages, settings and other personalized information, please choose that profile from the list, and click &amp;select.label; to begin using that profile.&quot;&gt;</span>
<a href="#l3.7"></a><span id="l3.7"> &lt;!ENTITY            profileManagerText.label &quot;&amp;brandShortName; stores information about your settings, preferences, bookmarks, stored messages and other user items in your user profile.&quot;&gt;</span>
<a href="#l3.8"></a><span id="l3.8"> </span>
<a href="#l3.9"></a><span id="l3.9"> &lt;!ENTITY            autoSelect.label         &quot;Default to this profile&quot;&gt;</span>
<a href="#l3.10"></a><span id="l3.10"> &lt;!ENTITY            autoSelect.accesskey     &quot;S&quot;&gt;</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+&lt;!ENTITY            start.label              &quot;Start &amp;brandShortName;&quot;&gt;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+&lt;!ENTITY            exit.label               &quot;Exit&quot;&gt;</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+&lt;!ENTITY            newButton.label          &quot;Create Profile…&quot;&gt;</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+&lt;!ENTITY            newButton.accesskey      &quot;C&quot;&gt;</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+&lt;!ENTITY            renameButton.label       &quot;Rename Profile…&quot;&gt;</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+&lt;!ENTITY            renameButton.accesskey   &quot;R&quot;&gt;</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+&lt;!ENTITY            deleteButton.label       &quot;Delete Profile…&quot;&gt;</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+&lt;!ENTITY            deleteButton.accesskey   &quot;D&quot;&gt;</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineplus">+</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineplus">+&lt;!ENTITY            offlineState.label       &quot;Work offline&quot;&gt;</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineplus">+&lt;!ENTITY            offlineState.accesskey   &quot;o&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/suite/locales/en-US/chrome/common/profile/profileSelection.properties</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/common/profile/profileSelection.properties</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -4,8 +4,19 @@</span>
<a href="#l4.4"></a><span id="l4.4"> </span>
<a href="#l4.5"></a><span id="l4.5"> deleteLocked=%S cannot delete the profile &quot;%S&quot; because it is in use.</span>
<a href="#l4.6"></a><span id="l4.6"> deleteProfile=Deleting a profile will remove the profile from the list of available profiles and cannot be undone.\n\nYou may also choose to delete the profile data files, including your saved mail, settings, and certificates. This option will delete the folder &quot;%S&quot; and cannot be undone.\n\nWould you like to delete the profile data files?\n\n</span>
<a href="#l4.7"></a><span id="l4.7"> </span>
<a href="#l4.8"></a><span id="l4.8"> manageTitle=Manage User Profiles</span>
<a href="#l4.9"></a><span id="l4.9"> selectTitle=Select User Profile</span>
<a href="#l4.10"></a><span id="l4.10"> </span>
<a href="#l4.11"></a><span id="l4.11"> dirLocked=%S cannot use the profile &quot;%S&quot;. It may be in use, unavailable or damaged.\n\nPlease choose another profile or create a new one.</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+renameProfileTitle=Rename Profile</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+renameProfilePrompt=Rename the profile &quot;%S&quot; to:</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+profileNameInvalidTitle=Invalid profile name</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+profileNameEmpty=An empty profile name is not allowed.</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+invalidChar=The character &quot;%S&quot; is not allowed in profile names. Please choose a different name.</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+deleteTitle=Delete Profile</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineplus">+deleteFiles=Delete Files</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineplus">+dontDeleteFiles=Don't Delete Files</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineplus">+profileExists=A profile with this name already exists. Please choose another name.</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineplus">+profileExistsTitle=Profile Exists</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

