<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 21906:46e8d4d1250d6196106c5bcf875eb0398fa59cec</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 46e8d4d1250d6196106c5bcf875eb0398fa59cec" />
<meta property="og:url" content="/comm-central/rev/46e8d4d1250d6196106c5bcf875eb0398fa59cec" />
<meta property="og:description" content="Bug 1387813 - Port bug 1375125: Replace nsILocalFile with nsIFile in C-C. r=jorgk" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 46e8d4d1250d6196106c5bcf875eb0398fa59cec 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/46e8d4d1250d6196106c5bcf875eb0398fa59cec">shortlog</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/46e8d4d1250d6196106c5bcf875eb0398fa59cec">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec">files</a> |
changeset |
<a href="/comm-central/raw-rev/46e8d4d1250d6196106c5bcf875eb0398fa59cec">raw</a>  | <a href="/comm-central/archive/46e8d4d1250d6196106c5bcf875eb0398fa59cec.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1387813">Bug 1387813</a> - Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1375125">bug 1375125</a>: Replace nsILocalFile with nsIFile in C-C. r=jorgk
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#82;&#105;&#99;&#104;&#97;&#114;&#100;&#32;&#77;&#97;&#114;&#116;&#105;&#32;&#60;&#114;&#105;&#99;&#104;&#97;&#114;&#100;&#46;&#109;&#97;&#114;&#116;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Sun, 06 Aug 2017 12:03:07 +0200</td></tr>

<tr>
 <td>changeset 21906</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/46e8d4d1250d6196106c5bcf875eb0398fa59cec">46e8d4d1250d6196106c5bcf875eb0398fa59cec</a></td>
</tr>



<tr>
<td>parent 21905</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/541587cdce4ad47952b4c0fd0283b1058d61b002">541587cdce4ad47952b4c0fd0283b1058d61b002</a>
</td>
</tr>

<tr>
<td>child 21907</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/959c482d6c7eb35510a14dbd9fdcda43a78a619c">959c482d6c7eb35510a14dbd9fdcda43a78a619c</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=46e8d4d1250d6196106c5bcf875eb0398fa59cec">13377</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Sun, 06 Aug 2017 12:38:00 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@46e8d4d1250d [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=46e8d4d1250d6196106c5bcf875eb0398fa59cec">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=46e8d4d1250d6196106c5bcf875eb0398fa59cec&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=46e8d4d1250d6196106c5bcf875eb0398fa59cec&newProject=comm-central&newRevision=46e8d4d1250d6196106c5bcf875eb0398fa59cec&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=46e8d4d1250d6196106c5bcf875eb0398fa59cec&newProject=comm-central&newRevision=46e8d4d1250d6196106c5bcf875eb0398fa59cec&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=46e8d4d1250d6196106c5bcf875eb0398fa59cec&newProject=comm-central&newRevision=46e8d4d1250d6196106c5bcf875eb0398fa59cec&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28jorgk%29&revcount=50">jorgk</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1387813">1387813</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1375125">1375125</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1387813">Bug 1387813</a> - Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1375125">bug 1375125</a>: Replace nsILocalFile with nsIFile in C-C. r=jorgk</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/calendar-dnd-listener.js">calendar/base/content/calendar-dnd-listener.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/calendar-dnd-listener.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/calendar-dnd-listener.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/calendar-dnd-listener.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/calendar-dnd-listener.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/calendar-dnd-listener.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/dialogs/calendar-migration-dialog.js">calendar/base/content/dialogs/calendar-migration-dialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/dialogs/calendar-migration-dialog.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/dialogs/calendar-migration-dialog.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/dialogs/calendar-migration-dialog.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/dialogs/calendar-migration-dialog.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/dialogs/calendar-migration-dialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/import-export.js">calendar/base/content/import-export.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/import-export.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/import-export.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/import-export.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/import-export.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/import-export.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/preferences/alarms.js">calendar/base/content/preferences/alarms.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/preferences/alarms.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/preferences/alarms.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/preferences/alarms.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/preferences/alarms.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/content/preferences/alarms.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/src/calCalendarManager.js">calendar/base/src/calCalendarManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/src/calCalendarManager.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/src/calCalendarManager.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/src/calCalendarManager.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/src/calCalendarManager.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/src/calCalendarManager.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/src/calTimezoneService.js">calendar/base/src/calTimezoneService.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/src/calTimezoneService.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/src/calTimezoneService.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/src/calTimezoneService.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/src/calTimezoneService.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/src/calTimezoneService.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/src/calUtils.js">calendar/base/src/calUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/src/calUtils.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/src/calUtils.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/src/calUtils.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/src/calUtils.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/base/src/calUtils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/lightning/content/lightning-item-iframe.js">calendar/lightning/content/lightning-item-iframe.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/lightning/content/lightning-item-iframe.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/lightning/content/lightning-item-iframe.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/lightning/content/lightning-item-iframe.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/lightning/content/lightning-item-iframe.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/lightning/content/lightning-item-iframe.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/providers/ics/calICSCalendar.js">calendar/providers/ics/calICSCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/providers/ics/calICSCalendar.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/providers/ics/calICSCalendar.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/providers/ics/calICSCalendar.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/providers/ics/calICSCalendar.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/providers/ics/calICSCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/providers/storage/calStorageCalendar.js">calendar/providers/storage/calStorageCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/providers/storage/calStorageCalendar.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/providers/storage/calStorageCalendar.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/providers/storage/calStorageCalendar.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/providers/storage/calStorageCalendar.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/providers/storage/calStorageCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/providers/wcap/calWcapUtils.js">calendar/providers/wcap/calWcapUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/providers/wcap/calWcapUtils.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/providers/wcap/calWcapUtils.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/providers/wcap/calWcapUtils.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/providers/wcap/calWcapUtils.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/calendar/providers/wcap/calWcapUtils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/chat/components/src/imAccounts.js">chat/components/src/imAccounts.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/chat/components/src/imAccounts.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/chat/components/src/imAccounts.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/chat/components/src/imAccounts.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/chat/components/src/imAccounts.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/chat/components/src/imAccounts.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/editor/ui/composer/content/ComposerCommands.js">editor/ui/composer/content/ComposerCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/editor/ui/composer/content/ComposerCommands.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/editor/ui/composer/content/ComposerCommands.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/editor/ui/composer/content/ComposerCommands.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/editor/ui/composer/content/ComposerCommands.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/editor/ui/composer/content/ComposerCommands.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/editor/ui/composer/content/editorUtilities.js">editor/ui/composer/content/editorUtilities.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/editor/ui/composer/content/editorUtilities.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/editor/ui/composer/content/editorUtilities.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/editor/ui/composer/content/editorUtilities.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/editor/ui/composer/content/editorUtilities.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/editor/ui/composer/content/editorUtilities.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/components/profileMigrator.js">im/components/profileMigrator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/components/profileMigrator.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/components/profileMigrator.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/components/profileMigrator.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/components/profileMigrator.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/components/profileMigrator.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/content/blist.js">im/content/blist.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/content/blist.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/content/blist.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/content/blist.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/content/blist.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/content/blist.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/content/preferences/privacy.js">im/content/preferences/privacy.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/content/preferences/privacy.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/content/preferences/privacy.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/content/preferences/privacy.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/content/preferences/privacy.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/content/preferences/privacy.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/content/viewlog.js">im/content/viewlog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/content/viewlog.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/content/viewlog.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/content/viewlog.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/content/viewlog.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/content/viewlog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/modules/ibWinJumpList.jsm">im/modules/ibWinJumpList.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/modules/ibWinJumpList.jsm">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/modules/ibWinJumpList.jsm">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/modules/ibWinJumpList.jsm">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/modules/ibWinJumpList.jsm">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/im/modules/ibWinJumpList.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/content/folderPane.js">mail/base/content/folderPane.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/content/folderPane.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/content/folderPane.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/content/folderPane.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/content/folderPane.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/content/folderPane.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/content/mailCore.js">mail/base/content/mailCore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/content/mailCore.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/content/mailCore.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/content/mailCore.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/content/mailCore.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/content/mailCore.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/content/msgMail3PaneWindow.js">mail/base/content/msgMail3PaneWindow.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/content/msgMail3PaneWindow.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/content/msgMail3PaneWindow.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/content/msgMail3PaneWindow.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/content/msgMail3PaneWindow.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/content/msgMail3PaneWindow.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/modules/MailUtils.js">mail/base/modules/MailUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/modules/MailUtils.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/modules/MailUtils.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/modules/MailUtils.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/modules/MailUtils.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/modules/MailUtils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/modules/mailMigrator.js">mail/base/modules/mailMigrator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/modules/mailMigrator.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/modules/mailMigrator.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/modules/mailMigrator.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/modules/mailMigrator.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/base/modules/mailMigrator.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/about-support/content/aboutSupport.js">mail/components/about-support/content/aboutSupport.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/about-support/content/aboutSupport.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/about-support/content/aboutSupport.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/about-support/content/aboutSupport.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/about-support/content/aboutSupport.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/about-support/content/aboutSupport.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/cloudfile/nsBox.js">mail/components/cloudfile/nsBox.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/cloudfile/nsBox.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/cloudfile/nsBox.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/cloudfile/nsBox.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/cloudfile/nsBox.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/cloudfile/nsBox.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/cloudfile/nsHightail.js">mail/components/cloudfile/nsHightail.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/cloudfile/nsHightail.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/cloudfile/nsHightail.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/cloudfile/nsHightail.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/cloudfile/nsHightail.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/cloudfile/nsHightail.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/compose/content/MsgComposeCommands.js">mail/components/compose/content/MsgComposeCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/compose/content/MsgComposeCommands.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/compose/content/MsgComposeCommands.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/compose/content/MsgComposeCommands.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/compose/content/MsgComposeCommands.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/compose/content/MsgComposeCommands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/nsMailDefaultHandler.js">mail/components/nsMailDefaultHandler.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/nsMailDefaultHandler.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/nsMailDefaultHandler.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/nsMailDefaultHandler.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/nsMailDefaultHandler.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/nsMailDefaultHandler.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/preferences/chat.js">mail/components/preferences/chat.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/preferences/chat.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/preferences/chat.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/preferences/chat.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/preferences/chat.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/preferences/chat.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/preferences/downloads.js">mail/components/preferences/downloads.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/preferences/downloads.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/preferences/downloads.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/preferences/downloads.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/preferences/downloads.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/preferences/downloads.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/preferences/general.js">mail/components/preferences/general.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/preferences/general.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/preferences/general.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/preferences/general.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/preferences/general.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/preferences/general.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/search/SpotlightIntegration.js">mail/components/search/SpotlightIntegration.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/search/SpotlightIntegration.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/search/SpotlightIntegration.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/search/SpotlightIntegration.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/search/SpotlightIntegration.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/search/SpotlightIntegration.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/wintaskbar/windowsJumpLists.js">mail/components/wintaskbar/windowsJumpLists.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/wintaskbar/windowsJumpLists.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/wintaskbar/windowsJumpLists.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/wintaskbar/windowsJumpLists.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/wintaskbar/windowsJumpLists.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/components/wintaskbar/windowsJumpLists.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/mozmill/cloudfile/test-cloudfile-attachment-item.js">mail/test/mozmill/cloudfile/test-cloudfile-attachment-item.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/mozmill/cloudfile/test-cloudfile-attachment-item.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/mozmill/cloudfile/test-cloudfile-attachment-item.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/mozmill/cloudfile/test-cloudfile-attachment-item.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/mozmill/cloudfile/test-cloudfile-attachment-item.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/mozmill/cloudfile/test-cloudfile-attachment-item.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/mozmill/shared-modules/test-cloudfile-helpers.js">mail/test/mozmill/shared-modules/test-cloudfile-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/mozmill/shared-modules/test-cloudfile-helpers.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/mozmill/shared-modules/test-cloudfile-helpers.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/mozmill/shared-modules/test-cloudfile-helpers.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/mozmill/shared-modules/test-cloudfile-helpers.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/mozmill/shared-modules/test-cloudfile-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">mail/test/mozmill/shared-modules/test-folder-display-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/modules/frame.js">mail/test/resources/mozmill/mozmill/extension/resource/modules/frame.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/modules/frame.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/modules/frame.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/modules/frame.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/modules/frame.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/modules/frame.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/modules/utils.js">mail/test/resources/mozmill/mozmill/extension/resource/modules/utils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/modules/utils.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/modules/utils.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/modules/utils.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/modules/utils.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/modules/utils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js">mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/os.js">mail/test/resources/mozmill/mozmill/extension/resource/stdlib/os.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/os.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/os.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/os.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/os.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/os.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/base/prefs/content/removeAccount.js">mailnews/base/prefs/content/removeAccount.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/base/prefs/content/removeAccount.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/base/prefs/content/removeAccount.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/base/prefs/content/removeAccount.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/base/prefs/content/removeAccount.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/base/prefs/content/removeAccount.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/base/test/unit/test_searchBody.js">mailnews/base/test/unit/test_searchBody.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/base/test/unit/test_searchBody.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/base/test/unit/test_searchBody.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/base/test/unit/test_searchBody.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/base/test/unit/test_searchBody.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/base/test/unit/test_searchBody.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/compose/test/unit/test_bug235432.js">mailnews/compose/test/unit/test_bug235432.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/compose/test/unit/test_bug235432.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/compose/test/unit/test_bug235432.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/compose/test/unit/test_bug235432.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/compose/test/unit/test_bug235432.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/compose/test/unit/test_bug235432.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/db/gloda/modules/datastore.js">mailnews/db/gloda/modules/datastore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/db/gloda/modules/datastore.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/db/gloda/modules/datastore.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/db/gloda/modules/datastore.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/db/gloda/modules/datastore.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/db/gloda/modules/datastore.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/extensions/bayesian-spam-filter/test/unit/resources/trainingfile.js">mailnews/extensions/bayesian-spam-filter/test/unit/resources/trainingfile.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/extensions/bayesian-spam-filter/test/unit/resources/trainingfile.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/extensions/bayesian-spam-filter/test/unit/resources/trainingfile.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/extensions/bayesian-spam-filter/test/unit/resources/trainingfile.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/extensions/bayesian-spam-filter/test/unit/resources/trainingfile.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/extensions/bayesian-spam-filter/test/unit/resources/trainingfile.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/extensions/newsblog/content/feed-subscriptions.js">mailnews/extensions/newsblog/content/feed-subscriptions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/extensions/newsblog/content/feed-subscriptions.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/extensions/newsblog/content/feed-subscriptions.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/extensions/newsblog/content/feed-subscriptions.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/extensions/newsblog/content/feed-subscriptions.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/extensions/newsblog/content/feed-subscriptions.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/local/test/unit/head_maillocal.js">mailnews/local/test/unit/head_maillocal.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/local/test/unit/head_maillocal.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/local/test/unit/head_maillocal.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/local/test/unit/head_maillocal.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/local/test/unit/head_maillocal.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/mailnews/local/test/unit/head_maillocal.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/browser/navigator.js">suite/browser/navigator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/browser/navigator.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/browser/navigator.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/browser/navigator.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/browser/navigator.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/browser/navigator.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/browser/nsBrowserContentHandler.js">suite/browser/nsBrowserContentHandler.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/browser/nsBrowserContentHandler.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/browser/nsBrowserContentHandler.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/browser/nsBrowserContentHandler.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/browser/nsBrowserContentHandler.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/browser/nsBrowserContentHandler.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/browser/pageinfo/pageInfo.js">suite/browser/pageinfo/pageInfo.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/browser/pageinfo/pageInfo.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/browser/pageinfo/pageInfo.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/browser/pageinfo/pageInfo.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/browser/pageinfo/pageInfo.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/browser/pageinfo/pageInfo.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/bookmarks/bookmarksManager.js">suite/common/bookmarks/bookmarksManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/bookmarks/bookmarksManager.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/bookmarks/bookmarksManager.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/bookmarks/bookmarksManager.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/bookmarks/bookmarksManager.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/bookmarks/bookmarksManager.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/downloads/downloadmanager.js">suite/common/downloads/downloadmanager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/downloads/downloadmanager.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/downloads/downloadmanager.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/downloads/downloadmanager.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/downloads/downloadmanager.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/downloads/downloadmanager.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/downloads/tests/chrome/test_basic_functionality.xul">suite/common/downloads/tests/chrome/test_basic_functionality.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/downloads/tests/chrome/test_basic_functionality.xul">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/downloads/tests/chrome/test_basic_functionality.xul">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/downloads/tests/chrome/test_basic_functionality.xul">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/downloads/tests/chrome/test_basic_functionality.xul">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/downloads/tests/chrome/test_basic_functionality.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/pref/pref-applications.js">suite/common/pref/pref-applications.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/pref/pref-applications.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/pref/pref-applications.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/pref/pref-applications.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/pref/pref-applications.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/pref/pref-applications.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/src/nsSessionStartup.js">suite/common/src/nsSessionStartup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/src/nsSessionStartup.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/src/nsSessionStartup.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/src/nsSessionStartup.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/src/nsSessionStartup.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/src/nsSessionStartup.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/src/nsSessionStore.js">suite/common/src/nsSessionStore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/src/nsSessionStore.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/src/nsSessionStore.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/src/nsSessionStore.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/src/nsSessionStore.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/src/nsSessionStore.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/src/nsSuiteGlue.js">suite/common/src/nsSuiteGlue.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/src/nsSuiteGlue.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/src/nsSuiteGlue.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/src/nsSuiteGlue.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/src/nsSuiteGlue.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/src/nsSuiteGlue.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/tests/browser/browser_346337.js">suite/common/tests/browser/browser_346337.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/tests/browser/browser_346337.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/tests/browser/browser_346337.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/tests/browser/browser_346337.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/tests/browser/browser_346337.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/tests/browser/browser_346337.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/tests/browser/browser_466937.js">suite/common/tests/browser/browser_466937.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/tests/browser/browser_466937.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/tests/browser/browser_466937.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/tests/browser/browser_466937.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/tests/browser/browser_466937.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/tests/browser/browser_466937.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/utilityOverlay.js">suite/common/utilityOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/utilityOverlay.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/utilityOverlay.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/utilityOverlay.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/utilityOverlay.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/common/utilityOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/feeds/src/FeedConverter.js">suite/feeds/src/FeedConverter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/feeds/src/FeedConverter.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/feeds/src/FeedConverter.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/feeds/src/FeedConverter.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/feeds/src/FeedConverter.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/feeds/src/FeedConverter.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/feeds/src/FeedWriter.js">suite/feeds/src/FeedWriter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/feeds/src/FeedWriter.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/feeds/src/FeedWriter.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/feeds/src/FeedWriter.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/feeds/src/FeedWriter.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/feeds/src/FeedWriter.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/mailnews/compose/MsgComposeCommands.js">suite/mailnews/compose/MsgComposeCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/mailnews/compose/MsgComposeCommands.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/mailnews/compose/MsgComposeCommands.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/mailnews/compose/MsgComposeCommands.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/mailnews/compose/MsgComposeCommands.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/mailnews/compose/MsgComposeCommands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/mailnews/messengerdnd.js">suite/mailnews/messengerdnd.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/mailnews/messengerdnd.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/mailnews/messengerdnd.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/mailnews/messengerdnd.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/mailnews/messengerdnd.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/mailnews/messengerdnd.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/mailnews/msgHdrViewOverlay.js">suite/mailnews/msgHdrViewOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/mailnews/msgHdrViewOverlay.js">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/mailnews/msgHdrViewOverlay.js">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/mailnews/msgHdrViewOverlay.js">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/mailnews/msgHdrViewOverlay.js">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/mailnews/msgHdrViewOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/modules/WindowsJumpLists.jsm">suite/modules/WindowsJumpLists.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/modules/WindowsJumpLists.jsm">file</a> |
<a href="/comm-central/annotate/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/modules/WindowsJumpLists.jsm">annotate</a> |
<a href="/comm-central/diff/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/modules/WindowsJumpLists.jsm">diff</a> |
<a href="/comm-central/comparison/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/modules/WindowsJumpLists.jsm">comparison</a> |
<a href="/comm-central/log/46e8d4d1250d6196106c5bcf875eb0398fa59cec/suite/modules/WindowsJumpLists.jsm">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/content/calendar-dnd-listener.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/content/calendar-dnd-listener.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -253,17 +253,17 @@ calDNDBaseObserver.prototype = {</span>
<a href="#l1.4"></a><span id="l1.4">             case &quot;text/unicode&quot;:</span>
<a href="#l1.5"></a><span id="l1.5">                 var droppedUrl = this.retrieveURLFromData(data, bestFlavor.value);</span>
<a href="#l1.6"></a><span id="l1.6">                 if (!droppedUrl)</span>
<a href="#l1.7"></a><span id="l1.7">                     return;</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9">                 var url = Services.io.newURI(droppedUrl);</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11">                 var localFileInstance = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-                                        .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+                                        .createInstance(Components.interfaces.nsIFile);</span>
<a href="#l1.14"></a><span id="l1.14">                 localFileInstance.initWithPath(url.pathQueryRef);</span>
<a href="#l1.15"></a><span id="l1.15"> </span>
<a href="#l1.16"></a><span id="l1.16">                 var inputStream = Components.classes[&quot;@mozilla.org/network/file-input-stream;1&quot;]</span>
<a href="#l1.17"></a><span id="l1.17">                                   .createInstance(Components.interfaces.nsIFileInputStream);</span>
<a href="#l1.18"></a><span id="l1.18">                 inputStream.init(localFileInstance,</span>
<a href="#l1.19"></a><span id="l1.19">                                  MODE_RDONLY,</span>
<a href="#l1.20"></a><span id="l1.20">                                  parseInt(&quot;0444&quot;, 8),</span>
<a href="#l1.21"></a><span id="l1.21">                                  {});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-migration-dialog.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-migration-dialog.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -264,17 +264,17 @@ var gDataMigrator = {</span>
<a href="#l2.4"></a><span id="l2.4">             migLOG(&quot;nodes: &quot; + nodes.length);</span>
<a href="#l2.5"></a><span id="l2.5">             for (var i = 0; i &lt; nodes.length; i++) {</span>
<a href="#l2.6"></a><span id="l2.6">                 migLOG(&quot;Beginning calendar node&quot;);</span>
<a href="#l2.7"></a><span id="l2.7">                 var calendar;</span>
<a href="#l2.8"></a><span id="l2.8">                 var node = nodes[i];</span>
<a href="#l2.9"></a><span id="l2.9">                 if (getRDFAttr(node, &quot;remote&quot;) == &quot;false&quot;) {</span>
<a href="#l2.10"></a><span id="l2.10">                     migLOG(&quot;not remote&quot;);</span>
<a href="#l2.11"></a><span id="l2.11">                     var localFile = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-                                    .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+                                    .createInstance(Components.interfaces.nsIFile);</span>
<a href="#l2.14"></a><span id="l2.14">                     localFile.initWithPath(getRDFAttr(node, &quot;path&quot;));</span>
<a href="#l2.15"></a><span id="l2.15">                     calendar = gDataMigrator.importICSToStorage(localFile);</span>
<a href="#l2.16"></a><span id="l2.16">                 } else {</span>
<a href="#l2.17"></a><span id="l2.17">                     // Remote subscription</span>
<a href="#l2.18"></a><span id="l2.18">                     // XXX check for duplicates</span>
<a href="#l2.19"></a><span id="l2.19">                     var url = Services.io.newURI(getRDFAttr(node, &quot;remotePath&quot;));</span>
<a href="#l2.20"></a><span id="l2.20">                     calendar = calManager.createCalendar(&quot;ics&quot;, url);</span>
<a href="#l2.21"></a><span id="l2.21">                 }</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineat">@@ -285,17 +285,17 @@ var gDataMigrator = {</span>
<a href="#l2.23"></a><span id="l2.23">             }</span>
<a href="#l2.24"></a><span id="l2.24">             aCallback();</span>
<a href="#l2.25"></a><span id="l2.25">         }</span>
<a href="#l2.26"></a><span id="l2.26"> </span>
<a href="#l2.27"></a><span id="l2.27">         var migrators = [];</span>
<a href="#l2.28"></a><span id="l2.28"> </span>
<a href="#l2.29"></a><span id="l2.29">         // Look in our current profile directory, in case we're upgrading in</span>
<a href="#l2.30"></a><span id="l2.30">         // place</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-        var profileDir = this.dirService.get(&quot;ProfD&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+        var profileDir = this.dirService.get(&quot;ProfD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l2.33"></a><span id="l2.33">         profileDir.append(&quot;Calendar&quot;);</span>
<a href="#l2.34"></a><span id="l2.34">         if (profileDir.exists()) {</span>
<a href="#l2.35"></a><span id="l2.35">             migLOG(&quot;Found old extension directory in current app&quot;);</span>
<a href="#l2.36"></a><span id="l2.36">             let title = &quot;Mozilla Calendar Extension&quot;;</span>
<a href="#l2.37"></a><span id="l2.37">             migrators.push(new dataMigrator(title, extMigrator, [profileDir]));</span>
<a href="#l2.38"></a><span id="l2.38">         }</span>
<a href="#l2.39"></a><span id="l2.39"> </span>
<a href="#l2.40"></a><span id="l2.40">         // Check the profiles of the various other moz-apps for calendar data</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineat">@@ -399,25 +399,25 @@ var gDataMigrator = {</span>
<a href="#l2.42"></a><span id="l2.42">                 calendar.name = &quot;iCalendar&quot;+i;</span>
<a href="#l2.43"></a><span id="l2.43">                 i++;</span>
<a href="#l2.44"></a><span id="l2.44">                 calManager.registerCalendar(calendar);</span>
<a href="#l2.45"></a><span id="l2.45">                 cal.getCompositeCalendar(window).addCalendar(calendar);</span>
<a href="#l2.46"></a><span id="l2.46">             }</span>
<a href="#l2.47"></a><span id="l2.47">             migLOG(&quot;icalMig making callback&quot;);</span>
<a href="#l2.48"></a><span id="l2.48">             aCallback();</span>
<a href="#l2.49"></a><span id="l2.49">         }</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineminus">-        var profileDir = this.dirService.get(&quot;ProfD&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineplus">+        var profileDir = this.dirService.get(&quot;ProfD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l2.52"></a><span id="l2.52">         var icalSpec = profileDir.path;</span>
<a href="#l2.53"></a><span id="l2.53">         var diverge = icalSpec.indexOf(&quot;Thunderbird&quot;);</span>
<a href="#l2.54"></a><span id="l2.54">         if (diverge == -1) {</span>
<a href="#l2.55"></a><span id="l2.55">             return [];</span>
<a href="#l2.56"></a><span id="l2.56">         }</span>
<a href="#l2.57"></a><span id="l2.57">         icalSpec = icalSpec.substr(0, diverge);</span>
<a href="#l2.58"></a><span id="l2.58">         var icalFile = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l2.59"></a><span id="l2.59" class="difflineminus">-                   .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l2.60"></a><span id="l2.60" class="difflineplus">+                   .createInstance(Components.interfaces.nsIFile);</span>
<a href="#l2.61"></a><span id="l2.61">         icalFile.initWithPath(icalSpec);</span>
<a href="#l2.62"></a><span id="l2.62">         icalFile.append(&quot;Application Support&quot;);</span>
<a href="#l2.63"></a><span id="l2.63"> </span>
<a href="#l2.64"></a><span id="l2.64">         icalFile.append(&quot;iCal&quot;);</span>
<a href="#l2.65"></a><span id="l2.65">         if (icalFile.exists()) {</span>
<a href="#l2.66"></a><span id="l2.66">             return [new dataMigrator(&quot;Apple iCal&quot;, icalMigrate, [icalFile])];</span>
<a href="#l2.67"></a><span id="l2.67">         }</span>
<a href="#l2.68"></a><span id="l2.68"> </span>
<a href="#l2.69"></a><span id="l2.69" class="difflineat">@@ -449,17 +449,17 @@ var gDataMigrator = {</span>
<a href="#l2.70"></a><span id="l2.70">                 var dataStore = dataDir.clone();</span>
<a href="#l2.71"></a><span id="l2.71">                 dataStore.append(&quot;calendar.ics&quot;);</span>
<a href="#l2.72"></a><span id="l2.72">                 evoDataMigrate(dataStore);</span>
<a href="#l2.73"></a><span id="l2.73">             }</span>
<a href="#l2.74"></a><span id="l2.74"> </span>
<a href="#l2.75"></a><span id="l2.75">             aCallback();</span>
<a href="#l2.76"></a><span id="l2.76">         }</span>
<a href="#l2.77"></a><span id="l2.77"> </span>
<a href="#l2.78"></a><span id="l2.78" class="difflineminus">-        var evoDir = this.dirService.get(&quot;Home&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l2.79"></a><span id="l2.79" class="difflineplus">+        var evoDir = this.dirService.get(&quot;Home&quot;, Components.interfaces.nsIFile);</span>
<a href="#l2.80"></a><span id="l2.80">         evoDir.append(&quot;.evolution&quot;);</span>
<a href="#l2.81"></a><span id="l2.81">         evoDir.append(&quot;calendar&quot;);</span>
<a href="#l2.82"></a><span id="l2.82">         evoDir.append(&quot;local&quot;);</span>
<a href="#l2.83"></a><span id="l2.83">         return (evoDir.exists() ? [new dataMigrator(&quot;Evolution&quot;, evoMigrate, [evoDir])] : []);</span>
<a href="#l2.84"></a><span id="l2.84">     },</span>
<a href="#l2.85"></a><span id="l2.85"> </span>
<a href="#l2.86"></a><span id="l2.86">     checkWindowsMail: function gdm_windowsMail() {</span>
<a href="#l2.87"></a><span id="l2.87">         function doMigrate(aCalendarNodes, aMailDir, aCallback) {</span>
<a href="#l2.88"></a><span id="l2.88" class="difflineat">@@ -497,17 +497,17 @@ var gDataMigrator = {</span>
<a href="#l2.89"></a><span id="l2.89">         }</span>
<a href="#l2.90"></a><span id="l2.90"> </span>
<a href="#l2.91"></a><span id="l2.91">         if (!this.dirService.has(&quot;LocalAppData&quot;)) {</span>
<a href="#l2.92"></a><span id="l2.92">             // We are probably not on windows</span>
<a href="#l2.93"></a><span id="l2.93">             return [];</span>
<a href="#l2.94"></a><span id="l2.94">         }</span>
<a href="#l2.95"></a><span id="l2.95"> </span>
<a href="#l2.96"></a><span id="l2.96">         let maildir = this.dirService.get(&quot;LocalAppData&quot;,</span>
<a href="#l2.97"></a><span id="l2.97" class="difflineminus">-                                          Components.interfaces.nsILocalFile);</span>
<a href="#l2.98"></a><span id="l2.98" class="difflineplus">+                                          Components.interfaces.nsIFile);</span>
<a href="#l2.99"></a><span id="l2.99"> </span>
<a href="#l2.100"></a><span id="l2.100">         maildir.append(&quot;Microsoft&quot;);</span>
<a href="#l2.101"></a><span id="l2.101">         maildir.append(&quot;Windows Calendar&quot;);</span>
<a href="#l2.102"></a><span id="l2.102">         maildir.append(&quot;Calendars&quot;);</span>
<a href="#l2.103"></a><span id="l2.103"> </span>
<a href="#l2.104"></a><span id="l2.104">         let settingsxml = maildir.clone();</span>
<a href="#l2.105"></a><span id="l2.105">         settingsxml.append(&quot;Settings.xml&quot;);</span>
<a href="#l2.106"></a><span id="l2.106"> </span>
<a href="#l2.107"></a><span id="l2.107" class="difflineat">@@ -596,17 +596,17 @@ var gDataMigrator = {</span>
<a href="#l2.108"></a><span id="l2.108">     getFirefoxProfile: function gdm_getFF() {</span>
<a href="#l2.109"></a><span id="l2.109">         return this.getNormalProfile(&quot;Firefox&quot;);</span>
<a href="#l2.110"></a><span id="l2.110">     },</span>
<a href="#l2.111"></a><span id="l2.111"> </span>
<a href="#l2.112"></a><span id="l2.112">     /**</span>
<a href="#l2.113"></a><span id="l2.113">      * @see getFirefoxProfile</span>
<a href="#l2.114"></a><span id="l2.114">      */</span>
<a href="#l2.115"></a><span id="l2.115">     getThunderbirdProfile: function gdm_getTB() {</span>
<a href="#l2.116"></a><span id="l2.116" class="difflineminus">-        let profileRoot = this.dirService.get(&quot;DefProfRt&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l2.117"></a><span id="l2.117" class="difflineplus">+        let profileRoot = this.dirService.get(&quot;DefProfRt&quot;, Components.interfaces.nsIFile);</span>
<a href="#l2.118"></a><span id="l2.118">         migLOG(&quot;searching for Thunderbird in &quot; + profileRoot.path);</span>
<a href="#l2.119"></a><span id="l2.119">         return profileRoot.exists() ? profileRoot : null;</span>
<a href="#l2.120"></a><span id="l2.120">     },</span>
<a href="#l2.121"></a><span id="l2.121"> </span>
<a href="#l2.122"></a><span id="l2.122">     /**</span>
<a href="#l2.123"></a><span id="l2.123">      * @see getFirefoxProfile</span>
<a href="#l2.124"></a><span id="l2.124">      */</span>
<a href="#l2.125"></a><span id="l2.125">     getSunbirdProfile: function gdm_getSB() {</span>
<a href="#l2.126"></a><span id="l2.126" class="difflineat">@@ -614,17 +614,17 @@ var gDataMigrator = {</span>
<a href="#l2.127"></a><span id="l2.127">     },</span>
<a href="#l2.128"></a><span id="l2.128"> </span>
<a href="#l2.129"></a><span id="l2.129">     /**</span>
<a href="#l2.130"></a><span id="l2.130">      * Common function to retrieve the profile directory for a given app.</span>
<a href="#l2.131"></a><span id="l2.131">      * @see getFirefoxProfile</span>
<a href="#l2.132"></a><span id="l2.132">      */</span>
<a href="#l2.133"></a><span id="l2.133">     getNormalProfile: function gdm_getNorm(aAppName) {</span>
<a href="#l2.134"></a><span id="l2.134">         var localFile;</span>
<a href="#l2.135"></a><span id="l2.135" class="difflineminus">-        var profileRoot = this.dirService.get(&quot;DefProfRt&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l2.136"></a><span id="l2.136" class="difflineplus">+        var profileRoot = this.dirService.get(&quot;DefProfRt&quot;, Components.interfaces.nsIFile);</span>
<a href="#l2.137"></a><span id="l2.137">         migLOG(&quot;profileRoot = &quot; + profileRoot.path);</span>
<a href="#l2.138"></a><span id="l2.138"> </span>
<a href="#l2.139"></a><span id="l2.139">         switch (this.mPlatform) {</span>
<a href="#l2.140"></a><span id="l2.140">             case &quot;darwin&quot;: // Mac OS X</span>
<a href="#l2.141"></a><span id="l2.141">                 localFile = profileRoot.parent.parent;</span>
<a href="#l2.142"></a><span id="l2.142">                 localFile.append(&quot;Application Support&quot;);</span>
<a href="#l2.143"></a><span id="l2.143">                 localFile.append(aAppName);</span>
<a href="#l2.144"></a><span id="l2.144">                 localFile.append(&quot;Profiles&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/content/import-export.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/content/import-export.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -281,22 +281,22 @@ function saveEventsToFile(calendarEventA</span>
<a href="#l3.4"></a><span id="l3.4">         let exporter = Components.classes[contractids[filterIndex]]</span>
<a href="#l3.5"></a><span id="l3.5">                                  .getService(Components.interfaces.calIExporter);</span>
<a href="#l3.6"></a><span id="l3.6"> </span>
<a href="#l3.7"></a><span id="l3.7">         let filePath = picker.file.path;</span>
<a href="#l3.8"></a><span id="l3.8">         if (!filePath.includes(&quot;.&quot;)) {</span>
<a href="#l3.9"></a><span id="l3.9">             filePath += &quot;.&quot; + exporter.getFileTypes({})[0].defaultExtension;</span>
<a href="#l3.10"></a><span id="l3.10">         }</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-        const nsILocalFile = Components.interfaces.nsILocalFile;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+        const nsIFile = Components.interfaces.nsIFile;</span>
<a href="#l3.14"></a><span id="l3.14">         const nsIFileOutputStream = Components.interfaces.nsIFileOutputStream;</span>
<a href="#l3.15"></a><span id="l3.15"> </span>
<a href="#l3.16"></a><span id="l3.16">         let outputStream;</span>
<a href="#l3.17"></a><span id="l3.17">         let localFileInstance = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineminus">-                                          .createInstance(nsILocalFile);</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+                                          .createInstance(nsIFile);</span>
<a href="#l3.20"></a><span id="l3.20">         localFileInstance.initWithPath(filePath);</span>
<a href="#l3.21"></a><span id="l3.21"> </span>
<a href="#l3.22"></a><span id="l3.22">         outputStream = Components.classes[&quot;@mozilla.org/network/file-output-stream;1&quot;]</span>
<a href="#l3.23"></a><span id="l3.23">                                  .createInstance(nsIFileOutputStream);</span>
<a href="#l3.24"></a><span id="l3.24">         try {</span>
<a href="#l3.25"></a><span id="l3.25">             outputStream.init(localFileInstance,</span>
<a href="#l3.26"></a><span id="l3.26">                               MODE_WRONLY | MODE_CREATE | MODE_TRUNCATE,</span>
<a href="#l3.27"></a><span id="l3.27">                               parseInt(&quot;0664&quot;, 8),</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/content/preferences/alarms.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/content/preferences/alarms.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -21,23 +21,23 @@ var gAlarmsPane = {</span>
<a href="#l4.4"></a><span id="l4.4"> </span>
<a href="#l4.5"></a><span id="l4.5">         // Set the correct singular/plural for the time units</span>
<a href="#l4.6"></a><span id="l4.6">         updateMenuLabelsPlural(&quot;eventdefalarmlen&quot;, &quot;eventdefalarmunit&quot;);</span>
<a href="#l4.7"></a><span id="l4.7">         updateMenuLabelsPlural(&quot;tododefalarmlen&quot;, &quot;tododefalarmunit&quot;);</span>
<a href="#l4.8"></a><span id="l4.8">         updateUnitLabelPlural(&quot;defaultsnoozelength&quot;, &quot;defaultsnoozelengthunit&quot;, &quot;minutes&quot;);</span>
<a href="#l4.9"></a><span id="l4.9">     },</span>
<a href="#l4.10"></a><span id="l4.10"> </span>
<a href="#l4.11"></a><span id="l4.11">     /**</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-     * Converts the given file url to a nsILocalFile</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+     * Converts the given file url to a nsIFile</span>
<a href="#l4.14"></a><span id="l4.14">      *</span>
<a href="#l4.15"></a><span id="l4.15">      * @param aFileURL    A string with a file:// url.</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineminus">-     * @return            The corresponding nsILocalFile.</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+     * @return            The corresponding nsIFile.</span>
<a href="#l4.18"></a><span id="l4.18">      */</span>
<a href="#l4.19"></a><span id="l4.19">     convertURLToLocalFile: function(aFileURL) {</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineminus">-        // Convert the file url into a nsILocalFile</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineplus">+        // Convert the file url into a nsIFile</span>
<a href="#l4.22"></a><span id="l4.22">         if (aFileURL) {</span>
<a href="#l4.23"></a><span id="l4.23">             let fph = Services.io</span>
<a href="#l4.24"></a><span id="l4.24">                          .getProtocolHandler(&quot;file&quot;)</span>
<a href="#l4.25"></a><span id="l4.25">                          .QueryInterface(Components.interfaces.nsIFileProtocolHandler);</span>
<a href="#l4.26"></a><span id="l4.26">             return fph.getFileFromURLSpec(aFileURL);</span>
<a href="#l4.27"></a><span id="l4.27">         } else {</span>
<a href="#l4.28"></a><span id="l4.28">             return null;</span>
<a href="#l4.29"></a><span id="l4.29">         }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/base/src/calCalendarManager.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/base/src/calCalendarManager.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -314,17 +314,17 @@ calCalendarManager.prototype = {</span>
<a href="#l5.4"></a><span id="l5.4">             flushPrefs();</span>
<a href="#l5.5"></a><span id="l5.5">         } finally {</span>
<a href="#l5.6"></a><span id="l5.6">             selectPrefs.reset();</span>
<a href="#l5.7"></a><span id="l5.7">             selectCalendars.reset();</span>
<a href="#l5.8"></a><span id="l5.8">         }</span>
<a href="#l5.9"></a><span id="l5.9">     },</span>
<a href="#l5.10"></a><span id="l5.10"> </span>
<a href="#l5.11"></a><span id="l5.11">     checkAndMigrateDB: function() {</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-        let storageSdb = Services.dirsvc.get(&quot;ProfD&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+        let storageSdb = Services.dirsvc.get(&quot;ProfD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l5.14"></a><span id="l5.14">         storageSdb.append(&quot;storage.sdb&quot;);</span>
<a href="#l5.15"></a><span id="l5.15">         let db = Services.storage.openDatabase(storageSdb);</span>
<a href="#l5.16"></a><span id="l5.16"> </span>
<a href="#l5.17"></a><span id="l5.17">         db.beginTransactionAs(Components.interfaces.mozIStorageConnection.TRANSACTION_EXCLUSIVE);</span>
<a href="#l5.18"></a><span id="l5.18">         try {</span>
<a href="#l5.19"></a><span id="l5.19">             if (db.tableExists(&quot;cal_calendars_prefs&quot;)) {</span>
<a href="#l5.20"></a><span id="l5.20">                 // Check if we need to upgrade:</span>
<a href="#l5.21"></a><span id="l5.21">                 let version = this.getSchemaVersion(db);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/base/src/calTimezoneService.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/base/src/calTimezoneService.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -515,17 +515,17 @@ function guessSystemTimezone() {</span>
<a href="#l6.4"></a><span id="l6.4">             return &quot;&quot;;</span>
<a href="#l6.5"></a><span id="l6.5">         }</span>
<a href="#l6.6"></a><span id="l6.6">         return varName + &quot;=&quot; + value;</span>
<a href="#l6.7"></a><span id="l6.7">     }</span>
<a href="#l6.8"></a><span id="l6.8"> </span>
<a href="#l6.9"></a><span id="l6.9">     function symbolicLinkTarget(filepath) {</span>
<a href="#l6.10"></a><span id="l6.10">         try {</span>
<a href="#l6.11"></a><span id="l6.11">             let file = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-                                 .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+                                 .createInstance(Components.interfaces.nsIFile);</span>
<a href="#l6.14"></a><span id="l6.14">             file.initWithPath(filepath);</span>
<a href="#l6.15"></a><span id="l6.15">             file.QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l6.16"></a><span id="l6.16">             if (!file.exists() || !file.isSymlink() || !file.target.match(tzRegex)) {</span>
<a href="#l6.17"></a><span id="l6.17">                 return &quot;&quot;;</span>
<a href="#l6.18"></a><span id="l6.18">             }</span>
<a href="#l6.19"></a><span id="l6.19"> </span>
<a href="#l6.20"></a><span id="l6.20">             return filepath + &quot; -&gt; &quot; + file.target;</span>
<a href="#l6.21"></a><span id="l6.21">         } catch (ex) {</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineat">@@ -534,17 +534,17 @@ function guessSystemTimezone() {</span>
<a href="#l6.23"></a><span id="l6.23">         }</span>
<a href="#l6.24"></a><span id="l6.24">     }</span>
<a href="#l6.25"></a><span id="l6.25"> </span>
<a href="#l6.26"></a><span id="l6.26">     function fileFirstZoneLineString(filepath) {</span>
<a href="#l6.27"></a><span id="l6.27">         // return first line of file that matches tzRegex (ZoneInfo id),</span>
<a href="#l6.28"></a><span id="l6.28">         // or &quot;&quot; if no file or no matching line.</span>
<a href="#l6.29"></a><span id="l6.29">         try {</span>
<a href="#l6.30"></a><span id="l6.30">             let file = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">-                                 .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+                                 .createInstance(Components.interfaces.nsIFile);</span>
<a href="#l6.33"></a><span id="l6.33">             file.initWithPath(filepath);</span>
<a href="#l6.34"></a><span id="l6.34">             file.QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l6.35"></a><span id="l6.35">             if (!file.exists()) {</span>
<a href="#l6.36"></a><span id="l6.36">                 return &quot;&quot;;</span>
<a href="#l6.37"></a><span id="l6.37">             }</span>
<a href="#l6.38"></a><span id="l6.38">             let fileInstream = Components.classes[&quot;@mozilla.org/network/file-input-stream;1&quot;]</span>
<a href="#l6.39"></a><span id="l6.39">                                          .createInstance(Components.interfaces.nsIFileInputStream);</span>
<a href="#l6.40"></a><span id="l6.40">             const PR_RDONLY = 0x1;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/base/src/calUtils.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/base/src/calUtils.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -235,17 +235,17 @@ function formatStringForCSSRule(aString)</span>
<a href="#l7.4"></a><span id="l7.4"> }</span>
<a href="#l7.5"></a><span id="l7.5"> </span>
<a href="#l7.6"></a><span id="l7.6"> /**</span>
<a href="#l7.7"></a><span id="l7.7">  * Shared dialog functions</span>
<a href="#l7.8"></a><span id="l7.8">  * Gets the calendar directory, defaults to &lt;profile-dir&gt;/calendar</span>
<a href="#l7.9"></a><span id="l7.9">  */</span>
<a href="#l7.10"></a><span id="l7.10"> function getCalendarDirectory() {</span>
<a href="#l7.11"></a><span id="l7.11">     if (getCalendarDirectory.mDir === undefined) {</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-        let dir = Services.dirsvc.get(&quot;ProfD&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+        let dir = Services.dirsvc.get(&quot;ProfD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l7.14"></a><span id="l7.14">         dir.append(&quot;calendar-data&quot;);</span>
<a href="#l7.15"></a><span id="l7.15">         if (!dir.exists()) {</span>
<a href="#l7.16"></a><span id="l7.16">             try {</span>
<a href="#l7.17"></a><span id="l7.17">                 dir.create(Components.interfaces.nsIFile.DIRECTORY_TYPE,</span>
<a href="#l7.18"></a><span id="l7.18">                            parseInt(&quot;0700&quot;, 8));</span>
<a href="#l7.19"></a><span id="l7.19">             } catch (exc) {</span>
<a href="#l7.20"></a><span id="l7.20">                 ASSERT(false, exc);</span>
<a href="#l7.21"></a><span id="l7.21">                 throw exc;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/lightning/content/lightning-item-iframe.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/lightning/content/lightning-item-iframe.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -2011,17 +2011,17 @@ function attachFile(cloudProvider) {</span>
<a href="#l8.4"></a><span id="l8.4">     filePicker.open(rv =&gt; {</span>
<a href="#l8.5"></a><span id="l8.5">         if (rv != nsIFilePicker.returnOK || !filePicker.files) {</span>
<a href="#l8.6"></a><span id="l8.6">             return;</span>
<a href="#l8.7"></a><span id="l8.7">         }</span>
<a href="#l8.8"></a><span id="l8.8">         let files = filePicker.files;</span>
<a href="#l8.9"></a><span id="l8.9"> </span>
<a href="#l8.10"></a><span id="l8.10">         // Create the attachment</span>
<a href="#l8.11"></a><span id="l8.11">         while (files.hasMoreElements()) {</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-            let file = files.getNext().QueryInterface(Components.interfaces.nsILocalFile);</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+            let file = files.getNext().QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l8.14"></a><span id="l8.14"> </span>
<a href="#l8.15"></a><span id="l8.15">             let fileHandler = Services.io.getProtocolHandler(&quot;file&quot;)</span>
<a href="#l8.16"></a><span id="l8.16">                                          .QueryInterface(Components.interfaces.nsIFileProtocolHandler);</span>
<a href="#l8.17"></a><span id="l8.17">             let uriSpec = fileHandler.getURLSpecFromFile(file);</span>
<a href="#l8.18"></a><span id="l8.18"> </span>
<a href="#l8.19"></a><span id="l8.19">             if (!(uriSpec in gAttachMap)) {</span>
<a href="#l8.20"></a><span id="l8.20">                 // If the attachment hasn't been added, then set the last display</span>
<a href="#l8.21"></a><span id="l8.21">                 // directory.</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineat">@@ -2048,17 +2048,17 @@ function attachFile(cloudProvider) {</span>
<a href="#l8.23"></a><span id="l8.23">  *                                 will be returned.</span>
<a href="#l8.24"></a><span id="l8.24">  * @return            The last directory that was set with this function.</span>
<a href="#l8.25"></a><span id="l8.25">  */</span>
<a href="#l8.26"></a><span id="l8.26"> function lastDirectory(aFileUri) {</span>
<a href="#l8.27"></a><span id="l8.27">     if (aFileUri) {</span>
<a href="#l8.28"></a><span id="l8.28">         // Act similar to a setter, save the passed uri.</span>
<a href="#l8.29"></a><span id="l8.29">         let uri = Services.io.newURI(aFileUri);</span>
<a href="#l8.30"></a><span id="l8.30">         let file = uri.QueryInterface(Components.interfaces.nsIFileURL).file;</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">-        lastDirectory.mValue = file.parent.QueryInterface(Components.interfaces.nsILocalFile);</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineplus">+        lastDirectory.mValue = file.parent.QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l8.33"></a><span id="l8.33">     }</span>
<a href="#l8.34"></a><span id="l8.34"> </span>
<a href="#l8.35"></a><span id="l8.35">     // In any case, return the value</span>
<a href="#l8.36"></a><span id="l8.36">     return (lastDirectory.mValue === undefined ? null : lastDirectory.mValue);</span>
<a href="#l8.37"></a><span id="l8.37"> }</span>
<a href="#l8.38"></a><span id="l8.38"> </span>
<a href="#l8.39"></a><span id="l8.39"> /**</span>
<a href="#l8.40"></a><span id="l8.40">  * Turns an url into a string that can be used in UI.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/providers/ics/calICSCalendar.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/providers/ics/calICSCalendar.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -677,17 +677,17 @@ calICSCalendar.prototype = {</span>
<a href="#l9.4"></a><span id="l9.4">             for (let i = 0; i &lt; filteredFiles.length - numBackupFiles; ++i) {</span>
<a href="#l9.5"></a><span id="l9.5">                 let file = backupDir.clone();</span>
<a href="#l9.6"></a><span id="l9.6">                 file.append(filteredFiles[i].name);</span>
<a href="#l9.7"></a><span id="l9.7"> </span>
<a href="#l9.8"></a><span id="l9.8">                 try {</span>
<a href="#l9.9"></a><span id="l9.9">                     file.remove(false);</span>
<a href="#l9.10"></a><span id="l9.10">                 } catch (ex) {</span>
<a href="#l9.11"></a><span id="l9.11">                     // This can fail because of some crappy code in</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-                    // nsILocalFile.  That's not the end of the world.  We can</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+                    // nsIFile.  That's not the end of the world.  We can</span>
<a href="#l9.14"></a><span id="l9.14">                     // try to remove the file the next time around.</span>
<a href="#l9.15"></a><span id="l9.15">                 }</span>
<a href="#l9.16"></a><span id="l9.16">             }</span>
<a href="#l9.17"></a><span id="l9.17">             return;</span>
<a href="#l9.18"></a><span id="l9.18">         }</span>
<a href="#l9.19"></a><span id="l9.19"> </span>
<a href="#l9.20"></a><span id="l9.20">         function purgeOldBackups() {</span>
<a href="#l9.21"></a><span id="l9.21">             // Enumerate files in the backupdir for expiry of old backups</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -204,17 +204,17 @@ calStorageCalendar.prototype = {</span>
<a href="#l10.4"></a><span id="l10.4">             // migration steps.</span>
<a href="#l10.5"></a><span id="l10.5"> </span>
<a href="#l10.6"></a><span id="l10.6">             let localDB = cal.getCalendarDirectory();</span>
<a href="#l10.7"></a><span id="l10.7">             localDB.append(&quot;local.sqlite&quot;);</span>
<a href="#l10.8"></a><span id="l10.8">             localDB = Services.storage.openDatabase(localDB);</span>
<a href="#l10.9"></a><span id="l10.9"> </span>
<a href="#l10.10"></a><span id="l10.10">             // First, we need to check if this is from 0.9, i.e we need to</span>
<a href="#l10.11"></a><span id="l10.11">             // migrate from storage.sdb to local.sqlite.</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-            let storageSdb = Services.dirsvc.get(&quot;ProfD&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+            let storageSdb = Services.dirsvc.get(&quot;ProfD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l10.14"></a><span id="l10.14">             storageSdb.append(&quot;storage.sdb&quot;);</span>
<a href="#l10.15"></a><span id="l10.15">             this.mDB = Services.storage.openDatabase(storageSdb);</span>
<a href="#l10.16"></a><span id="l10.16">             if (this.mDB.tableExists(&quot;cal_events&quot;)) {</span>
<a href="#l10.17"></a><span id="l10.17">                 cal.LOG(&quot;[calStorageCalendar] Migrating storage.sdb -&gt; local.sqlite&quot;);</span>
<a href="#l10.18"></a><span id="l10.18">                 upgradeDB(this.mDB); // upgrade schema before migating data</span>
<a href="#l10.19"></a><span id="l10.19"> </span>
<a href="#l10.20"></a><span id="l10.20">                 let attachStatement;</span>
<a href="#l10.21"></a><span id="l10.21">                 try {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/calendar/providers/wcap/calWcapUtils.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/calendar/providers/wcap/calWcapUtils.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -30,17 +30,17 @@ function initLogging() {</span>
<a href="#l11.4"></a><span id="l11.4">     }</span>
<a href="#l11.5"></a><span id="l11.5"> </span>
<a href="#l11.6"></a><span id="l11.6">     if (LOG_LEVEL &gt; 0) {</span>
<a href="#l11.7"></a><span id="l11.7">         let logFileName = getPref(&quot;calendar.wcap.log_file&quot;, null);</span>
<a href="#l11.8"></a><span id="l11.8">         if (logFileName) {</span>
<a href="#l11.9"></a><span id="l11.9">             try {</span>
<a href="#l11.10"></a><span id="l11.10">                 // set up file:</span>
<a href="#l11.11"></a><span id="l11.11">                 let logFile = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-                                        .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+                                        .createInstance(Components.interfaces.nsIFile);</span>
<a href="#l11.14"></a><span id="l11.14">                 logFile.initWithPath(logFileName);</span>
<a href="#l11.15"></a><span id="l11.15">                 // create output stream:</span>
<a href="#l11.16"></a><span id="l11.16">                 let logFileStream = Components.classes[&quot;@mozilla.org/network/file-output-stream;1&quot;]</span>
<a href="#l11.17"></a><span id="l11.17">                                               .createInstance(Components.interfaces.nsIFileOutputStream);</span>
<a href="#l11.18"></a><span id="l11.18">                 logFileStream.init(logFile,</span>
<a href="#l11.19"></a><span id="l11.19">                                    0x02 /* PR_WRONLY */ |</span>
<a href="#l11.20"></a><span id="l11.20">                                    0x08 /* PR_CREATE_FILE */ |</span>
<a href="#l11.21"></a><span id="l11.21">                                    (getPref(&quot;calendar.wcap.log_file_append&quot;, false)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/chat/components/src/imAccounts.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/chat/components/src/imAccounts.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -934,17 +934,17 @@ AccountsService.prototype = {</span>
<a href="#l12.4"></a><span id="l12.4">     if (!(&quot;nsICrashReporter&quot; in Ci))</span>
<a href="#l12.5"></a><span id="l12.5">       return;</span>
<a href="#l12.6"></a><span id="l12.6"> </span>
<a href="#l12.7"></a><span id="l12.7">     try {</span>
<a href="#l12.8"></a><span id="l12.8">       // Try to get more info with breakpad</span>
<a href="#l12.9"></a><span id="l12.9">       let lastCrashTime = 0;</span>
<a href="#l12.10"></a><span id="l12.10"> </span>
<a href="#l12.11"></a><span id="l12.11">       /* Locate the LastCrash file */</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-      let lastCrash = Services.dirsvc.get(&quot;UAppData&quot;, Ci.nsILocalFile);</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+      let lastCrash = Services.dirsvc.get(&quot;UAppData&quot;, Ci.nsIFile);</span>
<a href="#l12.14"></a><span id="l12.14">       lastCrash.append(&quot;Crash Reports&quot;);</span>
<a href="#l12.15"></a><span id="l12.15">       lastCrash.append(&quot;LastCrash&quot;);</span>
<a href="#l12.16"></a><span id="l12.16">       if (lastCrash.exists()) {</span>
<a href="#l12.17"></a><span id="l12.17">         /* Ok, the file exists, now let's try to read it */</span>
<a href="#l12.18"></a><span id="l12.18">         let is = Cc[&quot;@mozilla.org/network/file-input-stream;1&quot;]</span>
<a href="#l12.19"></a><span id="l12.19">                  .createInstance(Ci.nsIFileInputStream);</span>
<a href="#l12.20"></a><span id="l12.20">         let sis = Cc[&quot;@mozilla.org/scriptableinputstream;1&quot;]</span>
<a href="#l12.21"></a><span id="l12.21">                   .createInstance(Ci.nsIScriptableInputStream);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/editor/ui/composer/content/ComposerCommands.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/editor/ui/composer/content/ComposerCommands.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -1652,17 +1652,17 @@ async function SaveDocument(aSaveAs, aSa</span>
<a href="#l13.4"></a><span id="l13.4">     var docURI;</span>
<a href="#l13.5"></a><span id="l13.5">     if (!tempLocalFile)</span>
<a href="#l13.6"></a><span id="l13.6">     {</span>
<a href="#l13.7"></a><span id="l13.7">       docURI = Services.io.newURI(urlstring, editor.documentCharacterSet);</span>
<a href="#l13.8"></a><span id="l13.8"> </span>
<a href="#l13.9"></a><span id="l13.9">       if (docURI.schemeIs(&quot;file&quot;))</span>
<a href="#l13.10"></a><span id="l13.10">       {</span>
<a href="#l13.11"></a><span id="l13.11">         var fileHandler = GetFileProtocolHandler();</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-        tempLocalFile = fileHandler.getFileFromURLSpec(urlstring).QueryInterface(Components.interfaces.nsILocalFile);</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+        tempLocalFile = fileHandler.getFileFromURLSpec(urlstring).QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l13.14"></a><span id="l13.14">       }</span>
<a href="#l13.15"></a><span id="l13.15">     }</span>
<a href="#l13.16"></a><span id="l13.16"> </span>
<a href="#l13.17"></a><span id="l13.17">     // this is the location where the related files will go</span>
<a href="#l13.18"></a><span id="l13.18">     var relatedFilesDir = null;</span>
<a href="#l13.19"></a><span id="l13.19"> </span>
<a href="#l13.20"></a><span id="l13.20">     // Only change links or move files if pref is set</span>
<a href="#l13.21"></a><span id="l13.21">     // and we are saving to a new location</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineat">@@ -1709,17 +1709,17 @@ async function SaveDocument(aSaveAs, aSa</span>
<a href="#l13.23"></a><span id="l13.23">     success = false;</span>
<a href="#l13.24"></a><span id="l13.24">   }</span>
<a href="#l13.25"></a><span id="l13.25"> </span>
<a href="#l13.26"></a><span id="l13.26">   if (success)</span>
<a href="#l13.27"></a><span id="l13.27">   {</span>
<a href="#l13.28"></a><span id="l13.28">     try {</span>
<a href="#l13.29"></a><span id="l13.29">       if (doUpdateURI)</span>
<a href="#l13.30"></a><span id="l13.30">       {</span>
<a href="#l13.31"></a><span id="l13.31" class="difflineminus">-         // If a local file, we must create a new uri from nsILocalFile</span>
<a href="#l13.32"></a><span id="l13.32" class="difflineplus">+         // If a local file, we must create a new uri from nsIFile</span>
<a href="#l13.33"></a><span id="l13.33">         if (tempLocalFile)</span>
<a href="#l13.34"></a><span id="l13.34">           docURI = GetFileProtocolHandler().newFileURI(tempLocalFile);</span>
<a href="#l13.35"></a><span id="l13.35"> </span>
<a href="#l13.36"></a><span id="l13.36">         // We need to set new document uri before notifying listeners</span>
<a href="#l13.37"></a><span id="l13.37">         SetDocumentURI(docURI);</span>
<a href="#l13.38"></a><span id="l13.38">       }</span>
<a href="#l13.39"></a><span id="l13.39"> </span>
<a href="#l13.40"></a><span id="l13.40">       // Update window title to show possibly different filename</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/editor/ui/composer/content/editorUtilities.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/editor/ui/composer/content/editorUtilities.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -431,36 +431,36 @@ function SetFilePickerDirectory(filePick</span>
<a href="#l14.4"></a><span id="l14.4"> {</span>
<a href="#l14.5"></a><span id="l14.5">   if (filePicker)</span>
<a href="#l14.6"></a><span id="l14.6">   {</span>
<a href="#l14.7"></a><span id="l14.7">     try {</span>
<a href="#l14.8"></a><span id="l14.8">       // Save current directory so we can reset it in SaveFilePickerDirectory</span>
<a href="#l14.9"></a><span id="l14.9">       gFilePickerDirectory = filePicker.displayDirectory;</span>
<a href="#l14.10"></a><span id="l14.10"> </span>
<a href="#l14.11"></a><span id="l14.11">       let location = Services.prefs.getComplexValue(&quot;editor.lastFileLocation.&quot;+fileType,</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-                                                    Components.interfaces.nsILocalFile);</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+                                                    Components.interfaces.nsIFile);</span>
<a href="#l14.14"></a><span id="l14.14">       if (location)</span>
<a href="#l14.15"></a><span id="l14.15">         filePicker.displayDirectory = location;</span>
<a href="#l14.16"></a><span id="l14.16">     }</span>
<a href="#l14.17"></a><span id="l14.17">     catch(e) {}</span>
<a href="#l14.18"></a><span id="l14.18">   }</span>
<a href="#l14.19"></a><span id="l14.19"> }</span>
<a href="#l14.20"></a><span id="l14.20"> </span>
<a href="#l14.21"></a><span id="l14.21"> // Save the directory of the selected file to prefs</span>
<a href="#l14.22"></a><span id="l14.22"> function SaveFilePickerDirectory(filePicker, fileType)</span>
<a href="#l14.23"></a><span id="l14.23"> {</span>
<a href="#l14.24"></a><span id="l14.24">   if (filePicker &amp;&amp; filePicker.file)</span>
<a href="#l14.25"></a><span id="l14.25">   {</span>
<a href="#l14.26"></a><span id="l14.26">     try {</span>
<a href="#l14.27"></a><span id="l14.27">       var fileDir;</span>
<a href="#l14.28"></a><span id="l14.28">       if (filePicker.file.parent)</span>
<a href="#l14.29"></a><span id="l14.29" class="difflineminus">-        fileDir = filePicker.file.parent.QueryInterface(Components.interfaces.nsILocalFile);</span>
<a href="#l14.30"></a><span id="l14.30" class="difflineplus">+        fileDir = filePicker.file.parent.QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l14.31"></a><span id="l14.31"> </span>
<a href="#l14.32"></a><span id="l14.32">         Services.prefs.setComplexValue(&quot;editor.lastFileLocation.&quot; + fileType,</span>
<a href="#l14.33"></a><span id="l14.33" class="difflineminus">-                                       Components.interfaces.nsILocalFile, fileDir);</span>
<a href="#l14.34"></a><span id="l14.34" class="difflineplus">+                                       Components.interfaces.nsIFile, fileDir);</span>
<a href="#l14.35"></a><span id="l14.35"> </span>
<a href="#l14.36"></a><span id="l14.36">         Services.prefs.savePrefFile(null);</span>
<a href="#l14.37"></a><span id="l14.37">     } catch (e) {}</span>
<a href="#l14.38"></a><span id="l14.38">   }</span>
<a href="#l14.39"></a><span id="l14.39"> </span>
<a href="#l14.40"></a><span id="l14.40">   // Restore the directory used before SetFilePickerDirectory was called;</span>
<a href="#l14.41"></a><span id="l14.41">   // This reduces interference with Browser and other module directory defaults</span>
<a href="#l14.42"></a><span id="l14.42">   if (gFilePickerDirectory)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/im/components/profileMigrator.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/im/components/profileMigrator.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -33,21 +33,21 @@ InstantbirdProfileMigrator.prototype = {</span>
<a href="#l15.4"></a><span id="l15.4">         name = parser.getString(section, &quot;Name&quot;);</span>
<a href="#l15.5"></a><span id="l15.5">       } catch(e) {</span>
<a href="#l15.6"></a><span id="l15.6">         break;</span>
<a href="#l15.7"></a><span id="l15.7">       }</span>
<a href="#l15.8"></a><span id="l15.8">       var isRelative = parser.getString(section, &quot;IsRelative&quot;);</span>
<a href="#l15.9"></a><span id="l15.9">       var path = parser.getString(section, &quot;Path&quot;);</span>
<a href="#l15.10"></a><span id="l15.10">       var prof;</span>
<a href="#l15.11"></a><span id="l15.11">       if (isRelative == &quot;1&quot;) {</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-        prof = root.clone().QueryInterface(Ci.nsILocalFile);</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+        prof = root.clone().QueryInterface(Ci.nsIFile);</span>
<a href="#l15.14"></a><span id="l15.14">         prof.setRelativeDescriptor(root, path);</span>
<a href="#l15.15"></a><span id="l15.15">       }</span>
<a href="#l15.16"></a><span id="l15.16">       else {</span>
<a href="#l15.17"></a><span id="l15.17" class="difflineminus">-        prof = Cc[&quot;@mozilla.org/file/local;1&quot;].createInstance(Ci.nsILocalFile)</span>
<a href="#l15.18"></a><span id="l15.18" class="difflineplus">+        prof = Cc[&quot;@mozilla.org/file/local;1&quot;].createInstance(Ci.nsIFile)</span>
<a href="#l15.19"></a><span id="l15.19">                                               .initWithPath(path);</span>
<a href="#l15.20"></a><span id="l15.20">       }</span>
<a href="#l15.21"></a><span id="l15.21">       var currentProfile = profileService.createProfile(prof, null, name);</span>
<a href="#l15.22"></a><span id="l15.22"> </span>
<a href="#l15.23"></a><span id="l15.23">       try {</span>
<a href="#l15.24"></a><span id="l15.24">         if (parser.getString(section, &quot;Default&quot;) == &quot;1&quot;)</span>
<a href="#l15.25"></a><span id="l15.25">           profileService.selectedProfile = currentProfile;</span>
<a href="#l15.26"></a><span id="l15.26">       } catch(e) {}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/im/content/blist.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/im/content/blist.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -679,17 +679,17 @@ var buddyList = {</span>
<a href="#l16.4"></a><span id="l16.4">         // An ArrayBufferView is needed as input to OS.File.WriteAtomic. Any</span>
<a href="#l16.5"></a><span id="l16.5">         // other would have worked too.</span>
<a href="#l16.6"></a><span id="l16.6">         let view      = new Int8Array(read.result);</span>
<a href="#l16.7"></a><span id="l16.7">         let newName   = OS.Path.join(OS.Constants.Path.tmpDir, &quot;tmpUserIcon.png&quot;);</span>
<a href="#l16.8"></a><span id="l16.8">         let writeFile = OS.File.writeAtomic(newName, view);</span>
<a href="#l16.9"></a><span id="l16.9">         document.getElementById(&quot;changeUserIconPanel&quot;).hidePopup();</span>
<a href="#l16.10"></a><span id="l16.10">         writeFile.then(function() {</span>
<a href="#l16.11"></a><span id="l16.11">           let userIconFile = Cc[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-                             .createInstance(Ci.nsILocalFile);</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+                             .createInstance(Ci.nsIFile);</span>
<a href="#l16.14"></a><span id="l16.14">           userIconFile.initWithPath(newName);</span>
<a href="#l16.15"></a><span id="l16.15">           Services.core.globalUserStatus.setUserIcon(userIconFile);</span>
<a href="#l16.16"></a><span id="l16.16">           userIconFile.remove(newName);</span>
<a href="#l16.17"></a><span id="l16.17">         });</span>
<a href="#l16.18"></a><span id="l16.18">       });</span>
<a href="#l16.19"></a><span id="l16.19">       read.readAsArrayBuffer(blob);</span>
<a href="#l16.20"></a><span id="l16.20">     }, &quot;image/png&quot;, 1.0);</span>
<a href="#l16.21"></a><span id="l16.21">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/im/content/preferences/privacy.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/im/content/preferences/privacy.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -31,26 +31,26 @@ var gPrivacyPane = {</span>
<a href="#l17.4"></a><span id="l17.4">     else</span>
<a href="#l17.5"></a><span id="l17.5">       textbox.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l17.6"></a><span id="l17.6">   },</span>
<a href="#l17.7"></a><span id="l17.7"> </span>
<a href="#l17.8"></a><span id="l17.8">   openLogFolder: function ()</span>
<a href="#l17.9"></a><span id="l17.9">   {</span>
<a href="#l17.10"></a><span id="l17.10">     let Cc = Components.classes;</span>
<a href="#l17.11"></a><span id="l17.11">     let Ci = Components.interfaces;</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-    </span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+</span>
<a href="#l17.14"></a><span id="l17.14">     // Log folder is &quot;'profile directory'/logs&quot;</span>
<a href="#l17.15"></a><span id="l17.15" class="difflineminus">-    var logFolder = Services.dirsvc.get(&quot;ProfD&quot;, Ci.nsILocalFile);</span>
<a href="#l17.16"></a><span id="l17.16" class="difflineplus">+    var logFolder = Services.dirsvc.get(&quot;ProfD&quot;, Ci.nsIFile);</span>
<a href="#l17.17"></a><span id="l17.17">     logFolder.append(&quot;logs&quot;);</span>
<a href="#l17.18"></a><span id="l17.18"> </span>
<a href="#l17.19"></a><span id="l17.19">     try {</span>
<a href="#l17.20"></a><span id="l17.20">       logFolder.reveal();</span>
<a href="#l17.21"></a><span id="l17.21">     } catch (e) {</span>
<a href="#l17.22"></a><span id="l17.22">       // Adapted the workaround of Firefox' Download Manager for some *ix systems</span>
<a href="#l17.23"></a><span id="l17.23" class="difflineminus">-      let parent = logFolder.parent.QueryInterface(Ci.nsILocalFile);</span>
<a href="#l17.24"></a><span id="l17.24" class="difflineplus">+      let parent = logFolder.parent.QueryInterface(Ci.nsIFile);</span>
<a href="#l17.25"></a><span id="l17.25">       if (!parent)</span>
<a href="#l17.26"></a><span id="l17.26">        return;</span>
<a href="#l17.27"></a><span id="l17.27"> </span>
<a href="#l17.28"></a><span id="l17.28">       try {</span>
<a href="#l17.29"></a><span id="l17.29">        // &quot;Double click&quot; the parent directory to show where the file should be</span>
<a href="#l17.30"></a><span id="l17.30">        parent.launch();</span>
<a href="#l17.31"></a><span id="l17.31">       } catch (e) {</span>
<a href="#l17.32"></a><span id="l17.32">        // If launch also fails (probably because it's not implemented), let the</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/im/content/viewlog.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/im/content/viewlog.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -100,17 +100,17 @@ var logWindow = {</span>
<a href="#l18.4"></a><span id="l18.4">     else {</span>
<a href="#l18.5"></a><span id="l18.5">       // Legacy text log.</span>
<a href="#l18.6"></a><span id="l18.6">       deck.selectedIndex = 0;</span>
<a href="#l18.7"></a><span id="l18.7">       let browser = document.getElementById(&quot;text-browser&quot;);</span>
<a href="#l18.8"></a><span id="l18.8">       findbar.browser = browser;</span>
<a href="#l18.9"></a><span id="l18.9">       FullZoom.applyPrefValue();</span>
<a href="#l18.10"></a><span id="l18.10">       browser.docShell.forcedCharset =</span>
<a href="#l18.11"></a><span id="l18.11">         browser.mAtomService.getAtom(&quot;UTF-8&quot;);</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-      let file = Cc[&quot;@mozilla.org/file/local;1&quot;].createInstance(Ci.nsILocalFile);</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+      let file = Cc[&quot;@mozilla.org/file/local;1&quot;].createInstance(Ci.nsIFile);</span>
<a href="#l18.14"></a><span id="l18.14">       file.initWithPath(log.path);</span>
<a href="#l18.15"></a><span id="l18.15">       browser.loadURI(Services.io.newFileURI(file).spec);</span>
<a href="#l18.16"></a><span id="l18.16">     }</span>
<a href="#l18.17"></a><span id="l18.17">   },</span>
<a href="#l18.18"></a><span id="l18.18"> </span>
<a href="#l18.19"></a><span id="l18.19">   _colorCache: {},</span>
<a href="#l18.20"></a><span id="l18.20">   // Duplicated code from conversation.xml :-(</span>
<a href="#l18.21"></a><span id="l18.21">   _computeColor: function(aName) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/im/modules/ibWinJumpList.jsm</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/im/modules/ibWinJumpList.jsm</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -118,17 +118,17 @@ var WinJumpList = {</span>
<a href="#l19.4"></a><span id="l19.4"> </span>
<a href="#l19.5"></a><span id="l19.5">   _getSeparatorItem: function WJL__getSeparatorItem() {</span>
<a href="#l19.6"></a><span id="l19.6">     return Cc[&quot;@mozilla.org/windows-jumplistseparator;1&quot;]</span>
<a href="#l19.7"></a><span id="l19.7">               .createInstance(Ci.nsIJumpListSeparator);</span>
<a href="#l19.8"></a><span id="l19.8">   },</span>
<a href="#l19.9"></a><span id="l19.9"> </span>
<a href="#l19.10"></a><span id="l19.10">   _getHandlerAppItem: function WJL__getHandlerAppItem(aName, aDescription,</span>
<a href="#l19.11"></a><span id="l19.11">                                                       aArgs, aIconIndex) {</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-    var file = Services.dirsvc.get(&quot;XCurProcD&quot;, Ci.nsILocalFile);</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+    var file = Services.dirsvc.get(&quot;XCurProcD&quot;, Ci.nsIFile);</span>
<a href="#l19.14"></a><span id="l19.14"> </span>
<a href="#l19.15"></a><span id="l19.15">     // XXX where can we grab this from in the build? Do we need to?</span>
<a href="#l19.16"></a><span id="l19.16">     file.append(&quot;instantbird.exe&quot;);</span>
<a href="#l19.17"></a><span id="l19.17"> </span>
<a href="#l19.18"></a><span id="l19.18">     var handlerApp = Cc[&quot;@mozilla.org/uriloader/local-handler-app;1&quot;]</span>
<a href="#l19.19"></a><span id="l19.19">                         .createInstance(Ci.nsILocalHandlerApp);</span>
<a href="#l19.20"></a><span id="l19.20">     handlerApp.executable = file;</span>
<a href="#l19.21"></a><span id="l19.21">     // Handlers default to the leaf name if a name is not specified.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mail/base/content/folderPane.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mail/base/content/folderPane.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -760,17 +760,17 @@ var gFolderTreeView = {</span>
<a href="#l20.4"></a><span id="l20.4">       // Don't allow drop onto server itself.</span>
<a href="#l20.5"></a><span id="l20.5">       if (targetFolder.isServer)</span>
<a href="#l20.6"></a><span id="l20.6">         return false;</span>
<a href="#l20.7"></a><span id="l20.7">       // Don't allow drop into a folder that cannot take messages.</span>
<a href="#l20.8"></a><span id="l20.8">       if (!targetFolder.canFileMessages)</span>
<a href="#l20.9"></a><span id="l20.9">         return false;</span>
<a href="#l20.10"></a><span id="l20.10">       for (let i = 0; i &lt; dt.mozItemCount; i++) {</span>
<a href="#l20.11"></a><span id="l20.11">         let extFile = dt.mozGetDataAt(&quot;application/x-moz-file&quot;, i)</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-                        .QueryInterface(Ci.nsILocalFile);</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+                        .QueryInterface(Ci.nsIFile);</span>
<a href="#l20.14"></a><span id="l20.14">         return extFile.isFile();</span>
<a href="#l20.15"></a><span id="l20.15">       }</span>
<a href="#l20.16"></a><span id="l20.16">     }</span>
<a href="#l20.17"></a><span id="l20.17">     return false;</span>
<a href="#l20.18"></a><span id="l20.18">   },</span>
<a href="#l20.19"></a><span id="l20.19">   drop: function ftv_drop(aRow, aOrientation) {</span>
<a href="#l20.20"></a><span id="l20.20">     const Cc = Components.classes;</span>
<a href="#l20.21"></a><span id="l20.21">     const Ci = Components.interfaces;</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineat">@@ -848,17 +848,17 @@ var gFolderTreeView = {</span>
<a href="#l20.23"></a><span id="l20.23">     else if (feedUri) {</span>
<a href="#l20.24"></a><span id="l20.24">       Cc[&quot;@mozilla.org/newsblog-feed-downloader;1&quot;]</span>
<a href="#l20.25"></a><span id="l20.25">          .getService(Ci.nsINewsBlogFeedDownloader)</span>
<a href="#l20.26"></a><span id="l20.26">          .subscribeToFeed(feedUri.spec, targetFolder, msgWindow);</span>
<a href="#l20.27"></a><span id="l20.27">     }</span>
<a href="#l20.28"></a><span id="l20.28">     else if (types.includes(&quot;application/x-moz-file&quot;)) {</span>
<a href="#l20.29"></a><span id="l20.29">       for (let i = 0; i &lt; count; i++) {</span>
<a href="#l20.30"></a><span id="l20.30">         let extFile = dt.mozGetDataAt(&quot;application/x-moz-file&quot;, i)</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">-                        .QueryInterface(Ci.nsILocalFile);</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineplus">+                        .QueryInterface(Ci.nsIFile);</span>
<a href="#l20.33"></a><span id="l20.33">         if (extFile.isFile()) {</span>
<a href="#l20.34"></a><span id="l20.34">           let len = extFile.leafName.length;</span>
<a href="#l20.35"></a><span id="l20.35">           if (len &gt; 4 &amp;&amp; extFile.leafName.toLowerCase().endsWith(&quot;.eml&quot;))</span>
<a href="#l20.36"></a><span id="l20.36">             cs.CopyFileMessage(extFile, targetFolder, null, false, 1, &quot;&quot;, null, msgWindow);</span>
<a href="#l20.37"></a><span id="l20.37">         }</span>
<a href="#l20.38"></a><span id="l20.38">       }</span>
<a href="#l20.39"></a><span id="l20.39">     }</span>
<a href="#l20.40"></a><span id="l20.40">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mail/base/content/mailCore.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mail/base/content/mailCore.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -746,17 +746,17 @@ nsFlavorDataProvider.prototype =</span>
<a href="#l21.4"></a><span id="l21.4">                                     urlPrimitive, dataSize);</span>
<a href="#l21.5"></a><span id="l21.5"> </span>
<a href="#l21.6"></a><span id="l21.6">       var srcUrlPrimitive = urlPrimitive.value.QueryInterface(Components.interfaces.nsISupportsString);</span>
<a href="#l21.7"></a><span id="l21.7"> </span>
<a href="#l21.8"></a><span id="l21.8">       // now get the destination file location from kFilePromiseDirectoryMime</span>
<a href="#l21.9"></a><span id="l21.9">       var dirPrimitive = {};</span>
<a href="#l21.10"></a><span id="l21.10">       aTransferable.getTransferData(&quot;application/x-moz-file-promise-dir&quot;,</span>
<a href="#l21.11"></a><span id="l21.11">                                     dirPrimitive, dataSize);</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-      var destDirectory = dirPrimitive.value.QueryInterface(Components.interfaces.nsILocalFile);</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+      var destDirectory = dirPrimitive.value.QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l21.14"></a><span id="l21.14"> </span>
<a href="#l21.15"></a><span id="l21.15">       // now save the attachment to the specified location</span>
<a href="#l21.16"></a><span id="l21.16">       // XXX: we need more information than just the attachment url to save it,</span>
<a href="#l21.17"></a><span id="l21.17">       // fortunately, we have an array of all the current attachments so we can</span>
<a href="#l21.18"></a><span id="l21.18">       // cheat and scan through them</span>
<a href="#l21.19"></a><span id="l21.19"> </span>
<a href="#l21.20"></a><span id="l21.20">       var attachment = null;</span>
<a href="#l21.21"></a><span id="l21.21">       for (let index of currentAttachments.keys())</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mail/base/content/msgMail3PaneWindow.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mail/base/content/msgMail3PaneWindow.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -1384,17 +1384,17 @@ messageFlavorDataProvider.prototype = {</span>
<a href="#l22.4"></a><span id="l22.4">     let fileUriStr = fileUriPrimitive.value.QueryInterface(Components.interfaces.nsISupportsString);</span>
<a href="#l22.5"></a><span id="l22.5">     let fileUri = Services.io.newURI(fileUriStr.data);</span>
<a href="#l22.6"></a><span id="l22.6">     let fileUrl = fileUri.QueryInterface(Components.interfaces.nsIURL);</span>
<a href="#l22.7"></a><span id="l22.7">     let fileName = fileUrl.fileName;</span>
<a href="#l22.8"></a><span id="l22.8"> </span>
<a href="#l22.9"></a><span id="l22.9">     let destDirPrimitive = {};</span>
<a href="#l22.10"></a><span id="l22.10">     aTransferable.getTransferData(&quot;application/x-moz-file-promise-dir&quot;,</span>
<a href="#l22.11"></a><span id="l22.11">                                   destDirPrimitive, dataSize);</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-    let destDirectory = destDirPrimitive.value.QueryInterface(Components.interfaces.nsILocalFile);</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+    let destDirectory = destDirPrimitive.value.QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l22.14"></a><span id="l22.14">     let file = destDirectory.clone();</span>
<a href="#l22.15"></a><span id="l22.15">     file.append(fileName);</span>
<a href="#l22.16"></a><span id="l22.16"> </span>
<a href="#l22.17"></a><span id="l22.17">     let messageUriPrimitive = {};</span>
<a href="#l22.18"></a><span id="l22.18">     aTransferable.getTransferData(&quot;text/x-moz-message&quot;, messageUriPrimitive, dataSize);</span>
<a href="#l22.19"></a><span id="l22.19">     let messageUri = messageUriPrimitive.value.QueryInterface(Components.interfaces.nsISupportsString);</span>
<a href="#l22.20"></a><span id="l22.20"> </span>
<a href="#l22.21"></a><span id="l22.21">     messenger.saveAs(messageUri.data, true, null, decodeURIComponent(file.path), true);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mail/base/modules/MailUtils.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mail/base/modules/MailUtils.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -45,17 +45,17 @@ var MailUtils =</span>
<a href="#l23.4"></a><span id="l23.4">   /**</span>
<a href="#l23.5"></a><span id="l23.5">    * Get the nsIMsgFolder corresponding to this file. This just looks at all</span>
<a href="#l23.6"></a><span id="l23.6">    * folders and does a direct match.</span>
<a href="#l23.7"></a><span id="l23.7">    *</span>
<a href="#l23.8"></a><span id="l23.8">    * One of the places this is used is desktop search integration -- to open</span>
<a href="#l23.9"></a><span id="l23.9">    * the search result corresponding to a mozeml/wdseml file, we need to figure</span>
<a href="#l23.10"></a><span id="l23.10">    * out the folder using the file's path.</span>
<a href="#l23.11"></a><span id="l23.11">    *</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-   * @param aFile the nsILocalFile to convert to a folder</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+   * @param aFile the nsIFile to convert to a folder</span>
<a href="#l23.14"></a><span id="l23.14">    * @returns the nsIMsgFolder corresponding to aFile, or null if the folder</span>
<a href="#l23.15"></a><span id="l23.15">    *          isn't found</span>
<a href="#l23.16"></a><span id="l23.16">    */</span>
<a href="#l23.17"></a><span id="l23.17">   getFolderForFileInProfile:</span>
<a href="#l23.18"></a><span id="l23.18">       function MailUtils_getFolderForFileInProfile(aFile) {</span>
<a href="#l23.19"></a><span id="l23.19">     let folders = MailServices.accounts.allFolders;</span>
<a href="#l23.20"></a><span id="l23.20"> </span>
<a href="#l23.21"></a><span id="l23.21">     for (let folder of fixIterator(folders, Ci.nsIMsgFolder)) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mail/base/modules/mailMigrator.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mail/base/modules/mailMigrator.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -319,17 +319,17 @@ var MailMigrator = {</span>
<a href="#l24.4"></a><span id="l24.4">           Services.prefs.getBoolPref(&quot;editor.CR_creates_new_p&quot;));</span>
<a href="#l24.5"></a><span id="l24.5">         Services.prefs.clearUserPref(&quot;editor.CR_creates_new_p&quot;);</span>
<a href="#l24.6"></a><span id="l24.6">       }</span>
<a href="#l24.7"></a><span id="l24.7"> </span>
<a href="#l24.8"></a><span id="l24.8">       // Migrate remote content exceptions for email addresses which are</span>
<a href="#l24.9"></a><span id="l24.9">       // encoded as chrome URIs.</span>
<a href="#l24.10"></a><span id="l24.10">       if (currentUIVersion &lt; 14) {</span>
<a href="#l24.11"></a><span id="l24.11">         let permissionsDB =</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-          Services.dirsvc.get(&quot;ProfD&quot;,Components.interfaces.nsILocalFile);</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+          Services.dirsvc.get(&quot;ProfD&quot;,Components.interfaces.nsIFile);</span>
<a href="#l24.14"></a><span id="l24.14">         permissionsDB.append(&quot;permissions.sqlite&quot;);</span>
<a href="#l24.15"></a><span id="l24.15">         let db = Services.storage.openDatabase(permissionsDB);</span>
<a href="#l24.16"></a><span id="l24.16"> </span>
<a href="#l24.17"></a><span id="l24.17">         try {</span>
<a href="#l24.18"></a><span id="l24.18">           let statement = db.createStatement(</span>
<a href="#l24.19"></a><span id="l24.19">             &quot;select origin,permission from moz_perms where &quot; +</span>
<a href="#l24.20"></a><span id="l24.20">             // Avoid 'like' here which needs to be escaped.</span>
<a href="#l24.21"></a><span id="l24.21">             &quot;substr(origin, 1, 28)='chrome://messenger/content/?';&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mail/components/about-support/content/aboutSupport.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mail/components/about-support/content/aboutSupport.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -1182,17 +1182,17 @@ Serializer.prototype = {</span>
<a href="#l25.4"></a><span id="l25.4"> </span>
<a href="#l25.5"></a><span id="l25.5"> function openProfileDirectory() {</span>
<a href="#l25.6"></a><span id="l25.6">   // Get the profile directory.</span>
<a href="#l25.7"></a><span id="l25.7">   let currProfD = Services.dirsvc.get(&quot;ProfD&quot;, Ci.nsIFile);</span>
<a href="#l25.8"></a><span id="l25.8">   let profileDir = currProfD.path;</span>
<a href="#l25.9"></a><span id="l25.9"> </span>
<a href="#l25.10"></a><span id="l25.10">   // Show the profile directory.</span>
<a href="#l25.11"></a><span id="l25.11">   let nsLocalFile = Components.Constructor(&quot;@mozilla.org/file/local;1&quot;,</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-                                           &quot;nsILocalFile&quot;, &quot;initWithPath&quot;);</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+                                           &quot;nsIFile&quot;, &quot;initWithPath&quot;);</span>
<a href="#l25.14"></a><span id="l25.14">   new nsLocalFile(profileDir).reveal();</span>
<a href="#l25.15"></a><span id="l25.15"> }</span>
<a href="#l25.16"></a><span id="l25.16"> </span>
<a href="#l25.17"></a><span id="l25.17"> /**</span>
<a href="#l25.18"></a><span id="l25.18">  * Profile reset is only supported for the default profile if the appropriate migrator exists.</span>
<a href="#l25.19"></a><span id="l25.19">  */</span>
<a href="#l25.20"></a><span id="l25.20"> function populateActionBox() {</span>
<a href="#l25.21"></a><span id="l25.21">   if (ResetProfile.resetSupported()) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mail/components/cloudfile/nsBox.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mail/components/cloudfile/nsBox.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -173,17 +173,17 @@ nsBox.prototype = {</span>
<a href="#l26.4"></a><span id="l26.4">     }</span>
<a href="#l26.5"></a><span id="l26.5">     else</span>
<a href="#l26.6"></a><span id="l26.6">       this._uploader = null;</span>
<a href="#l26.7"></a><span id="l26.7">   },</span>
<a href="#l26.8"></a><span id="l26.8"> </span>
<a href="#l26.9"></a><span id="l26.9">   /**</span>
<a href="#l26.10"></a><span id="l26.10">    * Attempt to upload a file to Box's servers.</span>
<a href="#l26.11"></a><span id="l26.11">    *</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-   * @param aFile an nsILocalFile for uploading.</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+   * @param aFile an nsIFile for uploading.</span>
<a href="#l26.14"></a><span id="l26.14">    * @param aCallback an nsIRequestObserver for monitoring the start and</span>
<a href="#l26.15"></a><span id="l26.15">    *                  stop states of the upload procedure.</span>
<a href="#l26.16"></a><span id="l26.16">    */</span>
<a href="#l26.17"></a><span id="l26.17">   uploadFile: function nsBox_uploadFile(aFile, aCallback) {</span>
<a href="#l26.18"></a><span id="l26.18">     if (Services.io.offline)</span>
<a href="#l26.19"></a><span id="l26.19">       throw Ci.nsIMsgCloudFileProvider.offlineErr;</span>
<a href="#l26.20"></a><span id="l26.20"> </span>
<a href="#l26.21"></a><span id="l26.21">     this.log.info(&quot;uploading &quot; + aFile.leafName);</span>
<a href="#l26.22"></a><span id="l26.22" class="difflineat">@@ -233,17 +233,17 @@ nsBox.prototype = {</span>
<a href="#l26.23"></a><span id="l26.23">     onGetUserInfoSuccess();</span>
<a href="#l26.24"></a><span id="l26.24">   },</span>
<a href="#l26.25"></a><span id="l26.25"> </span>
<a href="#l26.26"></a><span id="l26.26">   /**</span>
<a href="#l26.27"></a><span id="l26.27">    * A private function called when we're almost ready to kick off the upload</span>
<a href="#l26.28"></a><span id="l26.28">    * for a file. First, ensures that the file size is not too large, and that</span>
<a href="#l26.29"></a><span id="l26.29">    * we won't exceed our storage quota, and then kicks off the upload.</span>
<a href="#l26.30"></a><span id="l26.30">    *</span>
<a href="#l26.31"></a><span id="l26.31" class="difflineminus">-   * @param aFile the nsILocalFile to upload</span>
<a href="#l26.32"></a><span id="l26.32" class="difflineplus">+   * @param aFile the nsIFile to upload</span>
<a href="#l26.33"></a><span id="l26.33">    * @param aCallback the nsIRequestObserver for monitoring the start and stop</span>
<a href="#l26.34"></a><span id="l26.34">    *                  states of the upload procedure.</span>
<a href="#l26.35"></a><span id="l26.35">    */</span>
<a href="#l26.36"></a><span id="l26.36">   _finishUpload: function nsBox__finishUpload(aFile, aCallback) {</span>
<a href="#l26.37"></a><span id="l26.37">     let exceedsFileLimit = Ci.nsIMsgCloudFileProvider.uploadExceedsFileLimit;</span>
<a href="#l26.38"></a><span id="l26.38">     let exceedsQuota = Ci.nsIMsgCloudFileProvider.uploadWouldExceedQuota;</span>
<a href="#l26.39"></a><span id="l26.39">     if (aFile.fileSize &gt; this._maxFileSize)</span>
<a href="#l26.40"></a><span id="l26.40">       return aCallback.onStopRequest(null, null, exceedsFileLimit);</span>
<a href="#l26.41"></a><span id="l26.41" class="difflineat">@@ -262,17 +262,17 @@ nsBox.prototype = {</span>
<a href="#l26.42"></a><span id="l26.42"> </span>
<a href="#l26.43"></a><span id="l26.43">     this._uploadingFile = aFile;</span>
<a href="#l26.44"></a><span id="l26.44">     this._uploader.uploadFile();</span>
<a href="#l26.45"></a><span id="l26.45">   },</span>
<a href="#l26.46"></a><span id="l26.46"> </span>
<a href="#l26.47"></a><span id="l26.47">   /**</span>
<a href="#l26.48"></a><span id="l26.48">    * Cancels an in-progress file upload.</span>
<a href="#l26.49"></a><span id="l26.49">    *</span>
<a href="#l26.50"></a><span id="l26.50" class="difflineminus">-   * @param aFile the nsILocalFile being uploaded.</span>
<a href="#l26.51"></a><span id="l26.51" class="difflineplus">+   * @param aFile the nsIFile being uploaded.</span>
<a href="#l26.52"></a><span id="l26.52">    */</span>
<a href="#l26.53"></a><span id="l26.53">   cancelFileUpload: function nsBox_cancelFileUpload(aFile) {</span>
<a href="#l26.54"></a><span id="l26.54">     if (this._uploadingFile.equals(aFile)) {</span>
<a href="#l26.55"></a><span id="l26.55">       this._uploader.cancel();</span>
<a href="#l26.56"></a><span id="l26.56">     }</span>
<a href="#l26.57"></a><span id="l26.57">     else {</span>
<a href="#l26.58"></a><span id="l26.58">       for (let i = 0; i &lt; this._uploads.length; i++)</span>
<a href="#l26.59"></a><span id="l26.59">         if (this._uploads[i].file.equals(aFile)) {</span>
<a href="#l26.60"></a><span id="l26.60" class="difflineat">@@ -374,17 +374,17 @@ nsBox.prototype = {</span>
<a href="#l26.61"></a><span id="l26.61">     return this.logon(function() {</span>
<a href="#l26.62"></a><span id="l26.62">       this._getUserInfo(aSuccessCallback, aFailureCallback);</span>
<a href="#l26.63"></a><span id="l26.63">     }.bind(this), aFailureCallback, aWithUI);</span>
<a href="#l26.64"></a><span id="l26.64">   },</span>
<a href="#l26.65"></a><span id="l26.65"> </span>
<a href="#l26.66"></a><span id="l26.66">   /**</span>
<a href="#l26.67"></a><span id="l26.67">    * Returns the sharing URL for some uploaded file.</span>
<a href="#l26.68"></a><span id="l26.68">    *</span>
<a href="#l26.69"></a><span id="l26.69" class="difflineminus">-   * @param aFile the nsILocalFile to get the URL for.</span>
<a href="#l26.70"></a><span id="l26.70" class="difflineplus">+   * @param aFile the nsIFile to get the URL for.</span>
<a href="#l26.71"></a><span id="l26.71">    */</span>
<a href="#l26.72"></a><span id="l26.72">   urlForFile: function nsBox_urlForFile(aFile) {</span>
<a href="#l26.73"></a><span id="l26.73">     return this._urlsForFiles[aFile.path];</span>
<a href="#l26.74"></a><span id="l26.74">   },</span>
<a href="#l26.75"></a><span id="l26.75"> </span>
<a href="#l26.76"></a><span id="l26.76">   /**</span>
<a href="#l26.77"></a><span id="l26.77">    * Updates the profile information for the account associated with the</span>
<a href="#l26.78"></a><span id="l26.78">    * account key.</span>
<a href="#l26.79"></a><span id="l26.79" class="difflineat">@@ -589,17 +589,17 @@ nsBox.prototype = {</span>
<a href="#l26.80"></a><span id="l26.80">    */</span>
<a href="#l26.81"></a><span id="l26.81">   get fileUploadSizeLimit() { return this._maxFileSize; },</span>
<a href="#l26.82"></a><span id="l26.82">   get remainingFileSpace() { return this._totalStorage - this._fileSpaceUsed; },</span>
<a href="#l26.83"></a><span id="l26.83">   get fileSpaceUsed() { return this._fileSpaceUsed; },</span>
<a href="#l26.84"></a><span id="l26.84"> </span>
<a href="#l26.85"></a><span id="l26.85">   /**</span>
<a href="#l26.86"></a><span id="l26.86">    * Attempts to delete an uploaded file.</span>
<a href="#l26.87"></a><span id="l26.87">    *</span>
<a href="#l26.88"></a><span id="l26.88" class="difflineminus">-   * @param aFile the nsILocalFile to delete.</span>
<a href="#l26.89"></a><span id="l26.89" class="difflineplus">+   * @param aFile the nsIFile to delete.</span>
<a href="#l26.90"></a><span id="l26.90">    * @param aCallback an nsIRequestObserver for monitoring the start and stop</span>
<a href="#l26.91"></a><span id="l26.91">    *                  states of the delete procedure.</span>
<a href="#l26.92"></a><span id="l26.92">    */</span>
<a href="#l26.93"></a><span id="l26.93">   deleteFile: function nsBox_deleteFile(aFile, aCallback) {</span>
<a href="#l26.94"></a><span id="l26.94">     this.log.info(&quot;Deleting a file&quot;);</span>
<a href="#l26.95"></a><span id="l26.95"> </span>
<a href="#l26.96"></a><span id="l26.96">     if (Services.io.offline) {</span>
<a href="#l26.97"></a><span id="l26.97">       this.log.error(&quot;We're offline - we can't delete the file.&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mail/components/cloudfile/nsHightail.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mail/components/cloudfile/nsHightail.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -159,17 +159,17 @@ nsHightail.prototype = {</span>
<a href="#l27.4"></a><span id="l27.4">     }</span>
<a href="#l27.5"></a><span id="l27.5">     else</span>
<a href="#l27.6"></a><span id="l27.6">       this._uploader = null;</span>
<a href="#l27.7"></a><span id="l27.7">   },</span>
<a href="#l27.8"></a><span id="l27.8"> </span>
<a href="#l27.9"></a><span id="l27.9">   /**</span>
<a href="#l27.10"></a><span id="l27.10">    * Attempt to upload a file to Hightail's servers.</span>
<a href="#l27.11"></a><span id="l27.11">    *</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-   * @param aFile an nsILocalFile for uploading.</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+   * @param aFile an nsIFile for uploading.</span>
<a href="#l27.14"></a><span id="l27.14">    * @param aCallback an nsIRequestObserver for monitoring the start and</span>
<a href="#l27.15"></a><span id="l27.15">    *                  stop states of the upload procedure.</span>
<a href="#l27.16"></a><span id="l27.16">    */</span>
<a href="#l27.17"></a><span id="l27.17">   uploadFile: function(aFile, aCallback) {</span>
<a href="#l27.18"></a><span id="l27.18">     if (Services.io.offline)</span>
<a href="#l27.19"></a><span id="l27.19">       throw Ci.nsIMsgCloudFileProvider.offlineErr;</span>
<a href="#l27.20"></a><span id="l27.20"> </span>
<a href="#l27.21"></a><span id="l27.21">     this.log.info(&quot;Preparing to upload a file&quot;);</span>
<a href="#l27.22"></a><span id="l27.22" class="difflineat">@@ -216,17 +216,17 @@ nsHightail.prototype = {</span>
<a href="#l27.23"></a><span id="l27.23">     onGetUserInfoSuccess();</span>
<a href="#l27.24"></a><span id="l27.24">   },</span>
<a href="#l27.25"></a><span id="l27.25"> </span>
<a href="#l27.26"></a><span id="l27.26">   /**</span>
<a href="#l27.27"></a><span id="l27.27">    * A private function called when we're almost ready to kick off the upload</span>
<a href="#l27.28"></a><span id="l27.28">    * for a file. First, ensures that the file size is not too large, and that</span>
<a href="#l27.29"></a><span id="l27.29">    * we won't exceed our storage quota, and then kicks off the upload.</span>
<a href="#l27.30"></a><span id="l27.30">    *</span>
<a href="#l27.31"></a><span id="l27.31" class="difflineminus">-   * @param aFile the nsILocalFile to upload</span>
<a href="#l27.32"></a><span id="l27.32" class="difflineplus">+   * @param aFile the nsIFile to upload</span>
<a href="#l27.33"></a><span id="l27.33">    * @param aCallback the nsIRequestObserver for monitoring the start and stop</span>
<a href="#l27.34"></a><span id="l27.34">    *                  states of the upload procedure.</span>
<a href="#l27.35"></a><span id="l27.35">    */</span>
<a href="#l27.36"></a><span id="l27.36">   _finishUpload: function(aFile, aCallback) {</span>
<a href="#l27.37"></a><span id="l27.37">     if (aFile.fileSize &gt; 2147483648)</span>
<a href="#l27.38"></a><span id="l27.38">       return this._fileExceedsLimit(aCallback, '2GB', 0);</span>
<a href="#l27.39"></a><span id="l27.39">     if (aFile.fileSize &gt; this._maxFileSize)</span>
<a href="#l27.40"></a><span id="l27.40">       return this._fileExceedsLimit(aCallback, 'Limit', 0);</span>
<a href="#l27.41"></a><span id="l27.41" class="difflineat">@@ -266,17 +266,17 @@ nsHightail.prototype = {</span>
<a href="#l27.42"></a><span id="l27.42">                            args).focus();</span>
<a href="#l27.43"></a><span id="l27.43"> </span>
<a href="#l27.44"></a><span id="l27.44">     return aCallback.onStopRequest(null, null, cancel);</span>
<a href="#l27.45"></a><span id="l27.45">   },</span>
<a href="#l27.46"></a><span id="l27.46"> </span>
<a href="#l27.47"></a><span id="l27.47">   /**</span>
<a href="#l27.48"></a><span id="l27.48">    * Cancels an in-progress file upload.</span>
<a href="#l27.49"></a><span id="l27.49">    *</span>
<a href="#l27.50"></a><span id="l27.50" class="difflineminus">-   * @param aFile the nsILocalFile being uploaded.</span>
<a href="#l27.51"></a><span id="l27.51" class="difflineplus">+   * @param aFile the nsIFile being uploaded.</span>
<a href="#l27.52"></a><span id="l27.52">    */</span>
<a href="#l27.53"></a><span id="l27.53">   cancelFileUpload: function(aFile) {</span>
<a href="#l27.54"></a><span id="l27.54">     this.log.info(&quot;in cancel upload&quot;);</span>
<a href="#l27.55"></a><span id="l27.55">     if (this._uploadingFile != null &amp;&amp; this._uploader != null &amp;&amp;</span>
<a href="#l27.56"></a><span id="l27.56">         this._uploadingFile.equals(aFile)) {</span>
<a href="#l27.57"></a><span id="l27.57">       this._uploader.cancel();</span>
<a href="#l27.58"></a><span id="l27.58">     }</span>
<a href="#l27.59"></a><span id="l27.59">     else {</span>
<a href="#l27.60"></a><span id="l27.60" class="difflineat">@@ -383,17 +383,17 @@ nsHightail.prototype = {</span>
<a href="#l27.61"></a><span id="l27.61">     req.setRequestHeader(&quot;X-Api-Key&quot;, kApiKey);</span>
<a href="#l27.62"></a><span id="l27.62">     req.setRequestHeader(&quot;Accept&quot;, &quot;application/json&quot;);</span>
<a href="#l27.63"></a><span id="l27.63">     req.send();</span>
<a href="#l27.64"></a><span id="l27.64">   },</span>
<a href="#l27.65"></a><span id="l27.65"> </span>
<a href="#l27.66"></a><span id="l27.66">   /**</span>
<a href="#l27.67"></a><span id="l27.67">    * Returns the sharing URL for some uploaded file.</span>
<a href="#l27.68"></a><span id="l27.68">    *</span>
<a href="#l27.69"></a><span id="l27.69" class="difflineminus">-   * @param aFile the nsILocalFile to get the URL for.</span>
<a href="#l27.70"></a><span id="l27.70" class="difflineplus">+   * @param aFile the nsIFile to get the URL for.</span>
<a href="#l27.71"></a><span id="l27.71">    */</span>
<a href="#l27.72"></a><span id="l27.72">   urlForFile: function(aFile) {</span>
<a href="#l27.73"></a><span id="l27.73">     return this._urlsForFiles[aFile.path];</span>
<a href="#l27.74"></a><span id="l27.74">   },</span>
<a href="#l27.75"></a><span id="l27.75"> </span>
<a href="#l27.76"></a><span id="l27.76">   /**</span>
<a href="#l27.77"></a><span id="l27.77">    * Attempts to refresh cached profile information for the account associated</span>
<a href="#l27.78"></a><span id="l27.78">    * with this instance's account key.</span>
<a href="#l27.79"></a><span id="l27.79" class="difflineat">@@ -658,17 +658,17 @@ nsHightail.prototype = {</span>
<a href="#l27.80"></a><span id="l27.80"> </span>
<a href="#l27.81"></a><span id="l27.81">   get remainingFileSpace() { return this._availableStorage; },</span>
<a href="#l27.82"></a><span id="l27.82"> </span>
<a href="#l27.83"></a><span id="l27.83">   get fileSpaceUsed() { return this._fileSpaceUsed; },</span>
<a href="#l27.84"></a><span id="l27.84"> </span>
<a href="#l27.85"></a><span id="l27.85">   /**</span>
<a href="#l27.86"></a><span id="l27.86">    * Attempts to delete an uploaded file.</span>
<a href="#l27.87"></a><span id="l27.87">    *</span>
<a href="#l27.88"></a><span id="l27.88" class="difflineminus">-   * @param aFile the nsILocalFile to delete.</span>
<a href="#l27.89"></a><span id="l27.89" class="difflineplus">+   * @param aFile the nsIFile to delete.</span>
<a href="#l27.90"></a><span id="l27.90">    * @param aCallback an nsIRequestObserver for monitoring the start and stop</span>
<a href="#l27.91"></a><span id="l27.91">    *                  states of the delete procedure.</span>
<a href="#l27.92"></a><span id="l27.92">    */</span>
<a href="#l27.93"></a><span id="l27.93">   deleteFile: function(aFile, aCallback) {</span>
<a href="#l27.94"></a><span id="l27.94">     this.log.info(&quot;Deleting a file&quot;);</span>
<a href="#l27.95"></a><span id="l27.95"> </span>
<a href="#l27.96"></a><span id="l27.96">     if (Services.io.offline) {</span>
<a href="#l27.97"></a><span id="l27.97">       this.log.error(&quot;We're offline - we can't delete the file.&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -1510,17 +1510,17 @@ function attachToCloud(aProvider)</span>
<a href="#l28.4"></a><span id="l28.4"> </span>
<a href="#l28.5"></a><span id="l28.5">   fp.appendFilters(nsIFilePicker.filterAll);</span>
<a href="#l28.6"></a><span id="l28.6">   if (fp.show() == nsIFilePicker.returnOK)</span>
<a href="#l28.7"></a><span id="l28.7">   {</span>
<a href="#l28.8"></a><span id="l28.8">     if (!fp.files)</span>
<a href="#l28.9"></a><span id="l28.9">       return;</span>
<a href="#l28.10"></a><span id="l28.10"> </span>
<a href="#l28.11"></a><span id="l28.11">     let files = Array.from(fixIterator(fp.files,</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-                             Components.interfaces.nsILocalFile))</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+                             Components.interfaces.nsIFile))</span>
<a href="#l28.14"></a><span id="l28.14">     let attachments = files.map(f =&gt; FileToAttachment(f));</span>
<a href="#l28.15"></a><span id="l28.15"> </span>
<a href="#l28.16"></a><span id="l28.16">     let i = 0;</span>
<a href="#l28.17"></a><span id="l28.17">     let items = AddAttachments(attachments, function(aItem) {</span>
<a href="#l28.18"></a><span id="l28.18">       let listener = new uploadListener(attachments[i], files[i], aProvider);</span>
<a href="#l28.19"></a><span id="l28.19">       try {</span>
<a href="#l28.20"></a><span id="l28.20">         aProvider.uploadFile(files[i], listener);</span>
<a href="#l28.21"></a><span id="l28.21">       }</span>
<a href="#l28.22"></a><span id="l28.22" class="difflineat">@@ -2522,19 +2522,19 @@ function ComposeStartup(aParams)</span>
<a href="#l28.23"></a><span id="l28.23">             Services.prompt.alert(null, title, msg);</span>
<a href="#l28.24"></a><span id="l28.24">           }</span>
<a href="#l28.25"></a><span id="l28.25">         }</span>
<a href="#l28.26"></a><span id="l28.26">       }</span>
<a href="#l28.27"></a><span id="l28.27">       if (args.newshost)</span>
<a href="#l28.28"></a><span id="l28.28">         composeFields.newshost = args.newshost;</span>
<a href="#l28.29"></a><span id="l28.29">       if (args.message) {</span>
<a href="#l28.30"></a><span id="l28.30">         let msgFile = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l28.31"></a><span id="l28.31" class="difflineminus">-                        .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l28.32"></a><span id="l28.32" class="difflineplus">+                        .createInstance(Components.interfaces.nsIFile);</span>
<a href="#l28.33"></a><span id="l28.33">         if (OS.Path.dirname(args.message) == &quot;.&quot;) {</span>
<a href="#l28.34"></a><span id="l28.34" class="difflineminus">-          let workingDir = Services.dirsvc.get(&quot;CurWorkD&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l28.35"></a><span id="l28.35" class="difflineplus">+          let workingDir = Services.dirsvc.get(&quot;CurWorkD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l28.36"></a><span id="l28.36">           args.message = OS.Path.join(workingDir.path, OS.Path.basename(args.message));</span>
<a href="#l28.37"></a><span id="l28.37">         }</span>
<a href="#l28.38"></a><span id="l28.38">         msgFile.initWithPath(args.message);</span>
<a href="#l28.39"></a><span id="l28.39"> </span>
<a href="#l28.40"></a><span id="l28.40">         if (!msgFile.exists()) {</span>
<a href="#l28.41"></a><span id="l28.41">           let title = getComposeBundle().getString(&quot;errorFileMessageTitle&quot;);</span>
<a href="#l28.42"></a><span id="l28.42">           let msg = getComposeBundle().getFormattedString(&quot;errorFileMessageMessage&quot;,</span>
<a href="#l28.43"></a><span id="l28.43">                                                           [args.message]);</span>
<a href="#l28.44"></a><span id="l28.44" class="difflineat">@@ -3996,17 +3996,17 @@ function GetLastAttachDirectory()</span>
<a href="#l28.45"></a><span id="l28.45">     // this will fail the first time we attach a file</span>
<a href="#l28.46"></a><span id="l28.46">     // as we won't have a pref value.</span>
<a href="#l28.47"></a><span id="l28.47">     lastDirectory = null;</span>
<a href="#l28.48"></a><span id="l28.48">   }</span>
<a href="#l28.49"></a><span id="l28.49"> </span>
<a href="#l28.50"></a><span id="l28.50">   return lastDirectory;</span>
<a href="#l28.51"></a><span id="l28.51"> }</span>
<a href="#l28.52"></a><span id="l28.52"> </span>
<a href="#l28.53"></a><span id="l28.53" class="difflineminus">-// attachedLocalFile must be a nsILocalFile</span>
<a href="#l28.54"></a><span id="l28.54" class="difflineplus">+// attachedLocalFile must be a nsIFile</span>
<a href="#l28.55"></a><span id="l28.55"> function SetLastAttachDirectory(attachedLocalFile)</span>
<a href="#l28.56"></a><span id="l28.56"> {</span>
<a href="#l28.57"></a><span id="l28.57">   try {</span>
<a href="#l28.58"></a><span id="l28.58">     let file = attachedLocalFile.QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l28.59"></a><span id="l28.59">     let parent = file.parent.QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l28.60"></a><span id="l28.60"> </span>
<a href="#l28.61"></a><span id="l28.61">     Services.prefs.setComplexValue(kComposeAttachDirPrefName,</span>
<a href="#l28.62"></a><span id="l28.62">                                    Components.interfaces.nsIFile, parent);</span>
<a href="#l28.63"></a><span id="l28.63" class="difflineat">@@ -4031,28 +4031,28 @@ function AttachFile()</span>
<a href="#l28.64"></a><span id="l28.64">   fp.appendFilters(nsIFilePicker.filterAll);</span>
<a href="#l28.65"></a><span id="l28.65">   if (fp.show() == nsIFilePicker.returnOK)</span>
<a href="#l28.66"></a><span id="l28.66">   {</span>
<a href="#l28.67"></a><span id="l28.67">     if (!fp.files)</span>
<a href="#l28.68"></a><span id="l28.68">       return;</span>
<a href="#l28.69"></a><span id="l28.69">     let file;</span>
<a href="#l28.70"></a><span id="l28.70">     let attachments = [];</span>
<a href="#l28.71"></a><span id="l28.71"> </span>
<a href="#l28.72"></a><span id="l28.72" class="difflineminus">-    for (file of fixIterator(fp.files, Components.interfaces.nsILocalFile))</span>
<a href="#l28.73"></a><span id="l28.73" class="difflineplus">+    for (file of fixIterator(fp.files, Components.interfaces.nsIFile))</span>
<a href="#l28.74"></a><span id="l28.74">       attachments.push(FileToAttachment(file));</span>
<a href="#l28.75"></a><span id="l28.75"> </span>
<a href="#l28.76"></a><span id="l28.76">     AddAttachments(attachments);</span>
<a href="#l28.77"></a><span id="l28.77">     SetLastAttachDirectory(file);</span>
<a href="#l28.78"></a><span id="l28.78">   }</span>
<a href="#l28.79"></a><span id="l28.79"> }</span>
<a href="#l28.80"></a><span id="l28.80"> </span>
<a href="#l28.81"></a><span id="l28.81"> /**</span>
<a href="#l28.82"></a><span id="l28.82" class="difflineminus">- * Convert an nsILocalFile instance into an nsIMsgAttachment.</span>
<a href="#l28.83"></a><span id="l28.83" class="difflineplus">+ * Convert an nsIFile instance into an nsIMsgAttachment.</span>
<a href="#l28.84"></a><span id="l28.84">  *</span>
<a href="#l28.85"></a><span id="l28.85" class="difflineminus">- * @param file the nsILocalFile</span>
<a href="#l28.86"></a><span id="l28.86" class="difflineplus">+ * @param file the nsIFile</span>
<a href="#l28.87"></a><span id="l28.87">  * @return an attachment pointing to the file</span>
<a href="#l28.88"></a><span id="l28.88">  */</span>
<a href="#l28.89"></a><span id="l28.89"> function FileToAttachment(file)</span>
<a href="#l28.90"></a><span id="l28.90"> {</span>
<a href="#l28.91"></a><span id="l28.91">   let fileHandler = Services.io.getProtocolHandler(&quot;file&quot;)</span>
<a href="#l28.92"></a><span id="l28.92">                             .QueryInterface(Components.interfaces.nsIFileProtocolHandler);</span>
<a href="#l28.93"></a><span id="l28.93">   let attachment = Components.classes[&quot;@mozilla.org/messengercompose/attachment;1&quot;]</span>
<a href="#l28.94"></a><span id="l28.94">                              .createInstance(Components.interfaces.nsIMsgAttachment);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mail/components/nsMailDefaultHandler.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mail/components/nsMailDefaultHandler.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -390,17 +390,17 @@ var nsMailDefaultHandler = {</span>
<a href="#l29.4"></a><span id="l29.4">         // This must be a regular filename. Use it to create a new message with attachment.</span>
<a href="#l29.5"></a><span id="l29.5">         let msgParams = Components.classes[&quot;@mozilla.org/messengercompose/composeparams;1&quot;]</span>
<a href="#l29.6"></a><span id="l29.6">                                   .createInstance(Components.interfaces.nsIMsgComposeParams);</span>
<a href="#l29.7"></a><span id="l29.7">         let composeFields = Components.classes[&quot;@mozilla.org/messengercompose/composefields;1&quot;]</span>
<a href="#l29.8"></a><span id="l29.8">                                       .createInstance(Components.interfaces.nsIMsgCompFields);</span>
<a href="#l29.9"></a><span id="l29.9">         let attachment = Components.classes[&quot;@mozilla.org/messengercompose/attachment;1&quot;]</span>
<a href="#l29.10"></a><span id="l29.10">                                    .createInstance(Components.interfaces.nsIMsgAttachment);</span>
<a href="#l29.11"></a><span id="l29.11">         let localFile = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-                                  .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+                                  .createInstance(Components.interfaces.nsIFile);</span>
<a href="#l29.14"></a><span id="l29.14">         let fileHandler = Services.io.getProtocolHandler(&quot;file&quot;)</span>
<a href="#l29.15"></a><span id="l29.15">                                      .QueryInterface(Components.interfaces.nsIFileProtocolHandler);</span>
<a href="#l29.16"></a><span id="l29.16"> </span>
<a href="#l29.17"></a><span id="l29.17">         try {</span>
<a href="#l29.18"></a><span id="l29.18">           // Unescape the URI so that we work with clients that escape spaces.</span>
<a href="#l29.19"></a><span id="l29.19">           localFile.initWithPath(unescape(uri));</span>
<a href="#l29.20"></a><span id="l29.20">           attachment.url = fileHandler.getURLSpecFromFile(localFile);</span>
<a href="#l29.21"></a><span id="l29.21">           composeFields.addAttachment(attachment);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mail/components/preferences/chat.js</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mail/components/preferences/chat.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -27,17 +27,17 @@ var gChatPane = {</span>
<a href="#l30.4"></a><span id="l30.4">     if (document.getElementById(&quot;messenger.status.awayWhenIdle&quot;).value)</span>
<a href="#l30.5"></a><span id="l30.5">       textbox.removeAttribute(&quot;disabled&quot;);</span>
<a href="#l30.6"></a><span id="l30.6">     else</span>
<a href="#l30.7"></a><span id="l30.7">       textbox.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l30.8"></a><span id="l30.8">   },</span>
<a href="#l30.9"></a><span id="l30.9"> </span>
<a href="#l30.10"></a><span id="l30.10">   convertURLToLocalFile: function(aFileURL)</span>
<a href="#l30.11"></a><span id="l30.11">   {</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-    // convert the file url into a nsILocalFile</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+    // convert the file url into a nsIFile</span>
<a href="#l30.14"></a><span id="l30.14">     if (aFileURL)</span>
<a href="#l30.15"></a><span id="l30.15">     {</span>
<a href="#l30.16"></a><span id="l30.16">       return Services.io.getProtocolHandler(&quot;file&quot;)</span>
<a href="#l30.17"></a><span id="l30.17">                         .QueryInterface(Ci.nsIFileProtocolHandler)</span>
<a href="#l30.18"></a><span id="l30.18">                         .getFileFromURLSpec(aFileURL);</span>
<a href="#l30.19"></a><span id="l30.19">     }</span>
<a href="#l30.20"></a><span id="l30.20">     return null;</span>
<a href="#l30.21"></a><span id="l30.21">   },</span>
<a href="#l30.22"></a><span id="l30.22" class="difflineat">@@ -96,17 +96,17 @@ var gChatPane = {</span>
<a href="#l30.23"></a><span id="l30.23">     else if (AppConstants.platform == &quot;linux&quot;)</span>
<a href="#l30.24"></a><span id="l30.24">       fp.appendFilter(soundFilesText, &quot;*.wav; *.ogg&quot;);</span>
<a href="#l30.25"></a><span id="l30.25">     else</span>
<a href="#l30.26"></a><span id="l30.26">       fp.appendFilter(soundFilesText, &quot;*.wav&quot;);</span>
<a href="#l30.27"></a><span id="l30.27"> </span>
<a href="#l30.28"></a><span id="l30.28">     let ret = fp.show();</span>
<a href="#l30.29"></a><span id="l30.29">     if (ret == nsIFilePicker.returnOK)</span>
<a href="#l30.30"></a><span id="l30.30">     {</span>
<a href="#l30.31"></a><span id="l30.31" class="difflineminus">-      // convert the nsILocalFile into a nsIFile url</span>
<a href="#l30.32"></a><span id="l30.32" class="difflineplus">+      // convert the nsIFile into a nsIFile url</span>
<a href="#l30.33"></a><span id="l30.33">       document.getElementById(&quot;mail.chat.play_sound.url&quot;).value = fp.fileURL.spec;</span>
<a href="#l30.34"></a><span id="l30.34">       this.readSoundLocation(); // XXX We shouldn't have to be doing this by hand</span>
<a href="#l30.35"></a><span id="l30.35">       this.updatePlaySound();</span>
<a href="#l30.36"></a><span id="l30.36">     }</span>
<a href="#l30.37"></a><span id="l30.37">   },</span>
<a href="#l30.38"></a><span id="l30.38"> </span>
<a href="#l30.39"></a><span id="l30.39">   updatePlaySound: function()</span>
<a href="#l30.40"></a><span id="l30.40">   {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mail/components/preferences/downloads.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mail/components/preferences/downloads.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -8,23 +8,23 @@ var gDownloadDirSection = {</span>
<a href="#l31.4"></a><span id="l31.4">   {</span>
<a href="#l31.5"></a><span id="l31.5">     const nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l31.6"></a><span id="l31.6">     var fp = Components.classes[&quot;@mozilla.org/filepicker;1&quot;]</span>
<a href="#l31.7"></a><span id="l31.7">                        .createInstance(nsIFilePicker);</span>
<a href="#l31.8"></a><span id="l31.8">     var bundlePreferences = document.getElementById(&quot;bundlePreferences&quot;);</span>
<a href="#l31.9"></a><span id="l31.9">     var title = bundlePreferences.getString(&quot;chooseAttachmentsFolderTitle&quot;);</span>
<a href="#l31.10"></a><span id="l31.10">     fp.init(window, title, nsIFilePicker.modeGetFolder);</span>
<a href="#l31.11"></a><span id="l31.11"> </span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-    const nsILocalFile = Components.interfaces.nsILocalFile;</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+    const nsIFile = Components.interfaces.nsIFile;</span>
<a href="#l31.14"></a><span id="l31.14">     var customDirPref = document.getElementById(&quot;browser.download.dir&quot;);</span>
<a href="#l31.15"></a><span id="l31.15">     if (customDirPref.value)</span>
<a href="#l31.16"></a><span id="l31.16">       fp.displayDirectory = customDirPref.value;</span>
<a href="#l31.17"></a><span id="l31.17">     fp.appendFilters(nsIFilePicker.filterAll);</span>
<a href="#l31.18"></a><span id="l31.18">     if (fp.show() == nsIFilePicker.returnOK) {</span>
<a href="#l31.19"></a><span id="l31.19" class="difflineminus">-      var file = fp.file.QueryInterface(nsILocalFile);</span>
<a href="#l31.20"></a><span id="l31.20" class="difflineplus">+      var file = fp.file.QueryInterface(nsIFile);</span>
<a href="#l31.21"></a><span id="l31.21">       var currentDirPref = document.getElementById(&quot;browser.download.downloadDir&quot;);</span>
<a href="#l31.22"></a><span id="l31.22">       customDirPref.value = currentDirPref.value = file;</span>
<a href="#l31.23"></a><span id="l31.23">       var folderListPref = document.getElementById(&quot;browser.download.folderList&quot;);</span>
<a href="#l31.24"></a><span id="l31.24">       folderListPref.value = this._fileToIndex(file);</span>
<a href="#l31.25"></a><span id="l31.25">     }</span>
<a href="#l31.26"></a><span id="l31.26">   },</span>
<a href="#l31.27"></a><span id="l31.27"> </span>
<a href="#l31.28"></a><span id="l31.28">   onReadUseDownloadDir: function ()</span>
<a href="#l31.29"></a><span id="l31.29" class="difflineat">@@ -73,17 +73,17 @@ var gDownloadDirSection = {</span>
<a href="#l31.30"></a><span id="l31.30">       return &quot;UsrDocs&quot;;</span>
<a href="#l31.31"></a><span id="l31.31"> </span>
<a href="#l31.32"></a><span id="l31.32">     return &quot;Home&quot;;</span>
<a href="#l31.33"></a><span id="l31.33">   },</span>
<a href="#l31.34"></a><span id="l31.34"> </span>
<a href="#l31.35"></a><span id="l31.35">   _getDownloadsFolder: function (aFolder)</span>
<a href="#l31.36"></a><span id="l31.36">   {</span>
<a href="#l31.37"></a><span id="l31.37">     let dir = Services.dirsvc.get(this._getSpecialFolderKey(aFolder),</span>
<a href="#l31.38"></a><span id="l31.38" class="difflineminus">-                                  Components.interfaces.nsILocalFile);</span>
<a href="#l31.39"></a><span id="l31.39" class="difflineplus">+                                  Components.interfaces.nsIFile);</span>
<a href="#l31.40"></a><span id="l31.40">     if (aFolder != &quot;Desktop&quot;)</span>
<a href="#l31.41"></a><span id="l31.41">       dir.append(&quot;My Downloads&quot;);</span>
<a href="#l31.42"></a><span id="l31.42"> </span>
<a href="#l31.43"></a><span id="l31.43">     return dir;</span>
<a href="#l31.44"></a><span id="l31.44">   },</span>
<a href="#l31.45"></a><span id="l31.45"> </span>
<a href="#l31.46"></a><span id="l31.46">   readDownloadDirPref: function ()</span>
<a href="#l31.47"></a><span id="l31.47">   {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/mail/components/preferences/general.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/mail/components/preferences/general.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -71,17 +71,17 @@ var gGeneralPane = {</span>
<a href="#l32.4"></a><span id="l32.4">       document.documentElement</span>
<a href="#l32.5"></a><span id="l32.5">               .openSubDialog(&quot;chrome://messenger/content/preferences/dockoptions.xul&quot;,</span>
<a href="#l32.6"></a><span id="l32.6">                               &quot;&quot;, null);</span>
<a href="#l32.7"></a><span id="l32.7">     }</span>
<a href="#l32.8"></a><span id="l32.8">   },</span>
<a href="#l32.9"></a><span id="l32.9"> </span>
<a href="#l32.10"></a><span id="l32.10">   convertURLToLocalFile: function(aFileURL)</span>
<a href="#l32.11"></a><span id="l32.11">   {</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-    // convert the file url into a nsILocalFile</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+    // convert the file url into a nsIFile</span>
<a href="#l32.14"></a><span id="l32.14">     if (aFileURL)</span>
<a href="#l32.15"></a><span id="l32.15">     {</span>
<a href="#l32.16"></a><span id="l32.16">       return Services.io</span>
<a href="#l32.17"></a><span id="l32.17">                      .getProtocolHandler(&quot;file&quot;)</span>
<a href="#l32.18"></a><span id="l32.18">                      .QueryInterface(Components.interfaces.nsIFileProtocolHandler)</span>
<a href="#l32.19"></a><span id="l32.19">                      .getFileFromURLSpec(aFileURL);</span>
<a href="#l32.20"></a><span id="l32.20">     }</span>
<a href="#l32.21"></a><span id="l32.21">     else</span>
<a href="#l32.22"></a><span id="l32.22" class="difflineat">@@ -143,17 +143,17 @@ var gGeneralPane = {</span>
<a href="#l32.23"></a><span id="l32.23">     else if (AppConstants.platform == &quot;linux&quot;)</span>
<a href="#l32.24"></a><span id="l32.24">       fp.appendFilter(soundFilesText, &quot;*.wav; *.ogg&quot;);</span>
<a href="#l32.25"></a><span id="l32.25">     else</span>
<a href="#l32.26"></a><span id="l32.26">       fp.appendFilter(soundFilesText, &quot;*.wav&quot;);</span>
<a href="#l32.27"></a><span id="l32.27"> </span>
<a href="#l32.28"></a><span id="l32.28">     var ret = fp.show();</span>
<a href="#l32.29"></a><span id="l32.29">     if (ret == nsIFilePicker.returnOK)</span>
<a href="#l32.30"></a><span id="l32.30">     {</span>
<a href="#l32.31"></a><span id="l32.31" class="difflineminus">-      // convert the nsILocalFile into a nsIFile url</span>
<a href="#l32.32"></a><span id="l32.32" class="difflineplus">+      // convert the nsIFile into a nsIFile url</span>
<a href="#l32.33"></a><span id="l32.33">       document.getElementById(&quot;mail.biff.play_sound.url&quot;).value = fp.fileURL.spec;</span>
<a href="#l32.34"></a><span id="l32.34">       this.readSoundLocation(); // XXX We shouldn't have to be doing this by hand</span>
<a href="#l32.35"></a><span id="l32.35">       this.updatePlaySound();</span>
<a href="#l32.36"></a><span id="l32.36">     }</span>
<a href="#l32.37"></a><span id="l32.37">   },</span>
<a href="#l32.38"></a><span id="l32.38"> </span>
<a href="#l32.39"></a><span id="l32.39">   updatePlaySound: function()</span>
<a href="#l32.40"></a><span id="l32.40">   {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mail/components/search/SpotlightIntegration.js</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mail/components/search/SpotlightIntegration.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -47,28 +47,28 @@ var SearchIntegration =</span>
<a href="#l33.4"></a><span id="l33.4">   /// Spotlight won't index files in the profile dir, but will use ~/Library/Caches/Metadata</span>
<a href="#l33.5"></a><span id="l33.5">   _getSearchPathForFolder: function spotlight_get_search_path(aFolder)</span>
<a href="#l33.6"></a><span id="l33.6">   {</span>
<a href="#l33.7"></a><span id="l33.7">     // Swap the metadata dir for the profile dir prefix in the folder's path</span>
<a href="#l33.8"></a><span id="l33.8">     let folderPath = aFolder.filePath.path;</span>
<a href="#l33.9"></a><span id="l33.9">     let fixedPath = folderPath.replace(this._profileDir.path,</span>
<a href="#l33.10"></a><span id="l33.10">                                        this._metadataDir.path);</span>
<a href="#l33.11"></a><span id="l33.11">     let searchPath = Cc[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-                       .createInstance(Ci.nsILocalFile);</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+                       .createInstance(Ci.nsIFile);</span>
<a href="#l33.14"></a><span id="l33.14">     searchPath.initWithPath(fixedPath);</span>
<a href="#l33.15"></a><span id="l33.15">     return searchPath;</span>
<a href="#l33.16"></a><span id="l33.16">   },</span>
<a href="#l33.17"></a><span id="l33.17"> </span>
<a href="#l33.18"></a><span id="l33.18">   /// Replace ~/Library/Caches/Metadata with the profile directory, then convert</span>
<a href="#l33.19"></a><span id="l33.19">   _getFolderForSearchPath: function spotlight_get_folder_for_search_path(aPath)</span>
<a href="#l33.20"></a><span id="l33.20">   {</span>
<a href="#l33.21"></a><span id="l33.21">     let folderPath = aPath.path.replace(this._metadataDir.path,</span>
<a href="#l33.22"></a><span id="l33.22">                                         this._profileDir.path);</span>
<a href="#l33.23"></a><span id="l33.23">     let folderFile = Cc[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l33.24"></a><span id="l33.24" class="difflineminus">-                      .createInstance(Ci.nsILocalFile);</span>
<a href="#l33.25"></a><span id="l33.25" class="difflineplus">+                      .createInstance(Ci.nsIFile);</span>
<a href="#l33.26"></a><span id="l33.26">     folderFile.initWithPath(folderPath);</span>
<a href="#l33.27"></a><span id="l33.27">     return MailUtils.getFolderForFileInProfile(folderFile);</span>
<a href="#l33.28"></a><span id="l33.28">   },</span>
<a href="#l33.29"></a><span id="l33.29"> </span>
<a href="#l33.30"></a><span id="l33.30">   _pathNeedsReindexing: function spotlight_pathNeedsReindexing(aPath) {</span>
<a href="#l33.31"></a><span id="l33.31">     // We used to set permissions incorrectly (see bug 670566).</span>
<a href="#l33.32"></a><span id="l33.32">     const PERM_DIRECTORY = parseInt(&quot;0755&quot;, 8);</span>
<a href="#l33.33"></a><span id="l33.33">     if (aPath.permissions != PERM_DIRECTORY) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mail/components/wintaskbar/windowsJumpLists.js</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mail/components/wintaskbar/windowsJumpLists.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -152,17 +152,17 @@ var WinTaskbarJumpList = {</span>
<a href="#l34.4"></a><span id="l34.4">     this._builder.deleteActiveList();</span>
<a href="#l34.5"></a><span id="l34.5">   },</span>
<a href="#l34.6"></a><span id="l34.6"> </span>
<a href="#l34.7"></a><span id="l34.7">   /**</span>
<a href="#l34.8"></a><span id="l34.8">    * Jump list item creation helpers</span>
<a href="#l34.9"></a><span id="l34.9">    */</span>
<a href="#l34.10"></a><span id="l34.10"> </span>
<a href="#l34.11"></a><span id="l34.11">   _createHandlerAppItem: function WTBJL__createHandlerAppItem(aTask) {</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-    let file = Services.dirsvc.get(&quot;XCurProcD&quot;, Ci.nsILocalFile);</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+    let file = Services.dirsvc.get(&quot;XCurProcD&quot;, Ci.nsIFile);</span>
<a href="#l34.14"></a><span id="l34.14"> </span>
<a href="#l34.15"></a><span id="l34.15">     // XXX where can we grab this from in the build? Do we need to?</span>
<a href="#l34.16"></a><span id="l34.16">     file.append(&quot;thunderbird.exe&quot;);</span>
<a href="#l34.17"></a><span id="l34.17"> </span>
<a href="#l34.18"></a><span id="l34.18">     let handlerApp = Cc[&quot;@mozilla.org/uriloader/local-handler-app;1&quot;]</span>
<a href="#l34.19"></a><span id="l34.19">                        .createInstance(Ci.nsILocalHandlerApp);</span>
<a href="#l34.20"></a><span id="l34.20">     handlerApp.executable = file;</span>
<a href="#l34.21"></a><span id="l34.21">     // handlers default to the leaf name if a name is not specified</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/mail/test/mozmill/cloudfile/test-cloudfile-attachment-item.js</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/mail/test/mozmill/cloudfile/test-cloudfile-attachment-item.js</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -110,17 +110,17 @@ function test_upload_multiple_and_cancel</span>
<a href="#l35.4"></a><span id="l35.4">  * ensuring that the nsIMsgCloduFileProvider.uploadCanceled status message</span>
<a href="#l35.5"></a><span id="l35.5">  * is returned to the passed in listener.</span>
<a href="#l35.6"></a><span id="l35.6">  *</span>
<a href="#l35.7"></a><span id="l35.7">  * @param aController the compose window controller to use.</span>
<a href="#l35.8"></a><span id="l35.8">  * @param aProvider a MockCloudfileAccount for which the uploads have already</span>
<a href="#l35.9"></a><span id="l35.9">  *                  started.</span>
<a href="#l35.10"></a><span id="l35.10">  * @param aListener the nsIRequestObserver passed to aProvider's uploadFile</span>
<a href="#l35.11"></a><span id="l35.11">  *                  function.</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">- * @param aTargetFile the nsILocalFile to cancel the upload for.</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+ * @param aTargetFile the nsIFile to cancel the upload for.</span>
<a href="#l35.14"></a><span id="l35.14">  */</span>
<a href="#l35.15"></a><span id="l35.15"> function assert_can_cancel_upload(aController, aProvider, aListener,</span>
<a href="#l35.16"></a><span id="l35.16">                                   aTargetFile) {</span>
<a href="#l35.17"></a><span id="l35.17">   let cancelled = false;</span>
<a href="#l35.18"></a><span id="l35.18"> </span>
<a href="#l35.19"></a><span id="l35.19">   // Override the provider's cancelFileUpload function.  We can do this because</span>
<a href="#l35.20"></a><span id="l35.20">   // it's assumed that the provider is a MockCloudfileAccount.</span>
<a href="#l35.21"></a><span id="l35.21">   aProvider.cancelFileUpload = function(aFileToCancel) {</span>
<a href="#l35.22"></a><span id="l35.22" class="difflineat">@@ -151,20 +151,20 @@ function assert_can_cancel_upload(aContr</span>
<a href="#l35.23"></a><span id="l35.23"> </span>
<a href="#l35.24"></a><span id="l35.24">   // Close the popup, and wait for the cancellation to be complete.</span>
<a href="#l35.25"></a><span id="l35.25">   close_popup(aController, aController.eid(kAttachmentItemContextID));</span>
<a href="#l35.26"></a><span id="l35.26">   aController.waitFor(() =&gt; cancelled);</span>
<a href="#l35.27"></a><span id="l35.27"> }</span>
<a href="#l35.28"></a><span id="l35.28"> </span>
<a href="#l35.29"></a><span id="l35.29"> /**</span>
<a href="#l35.30"></a><span id="l35.30">  * A helper function to find the attachment bucket index for a particular</span>
<a href="#l35.31"></a><span id="l35.31" class="difflineminus">- * nsILocalFile. Returns null if no attachmentitem is found.</span>
<a href="#l35.32"></a><span id="l35.32" class="difflineplus">+ * nsIFile. Returns null if no attachmentitem is found.</span>
<a href="#l35.33"></a><span id="l35.33">  *</span>
<a href="#l35.34"></a><span id="l35.34">  * @param aController the compose window controller to use.</span>
<a href="#l35.35"></a><span id="l35.35" class="difflineminus">- * @param aFile the nsILocalFile to search for.</span>
<a href="#l35.36"></a><span id="l35.36" class="difflineplus">+ * @param aFile the nsIFile to search for.</span>
<a href="#l35.37"></a><span id="l35.37">  */</span>
<a href="#l35.38"></a><span id="l35.38"> function get_attachmentitem_index_for_file(aController, aFile) {</span>
<a href="#l35.39"></a><span id="l35.39">   // Get the fileUrl from the file.</span>
<a href="#l35.40"></a><span id="l35.40">   let fileUrl = aController.window.FileToAttachment(aFile).url;</span>
<a href="#l35.41"></a><span id="l35.41"> </span>
<a href="#l35.42"></a><span id="l35.42">   // Get the bucket, and go through each item looking for the matching</span>
<a href="#l35.43"></a><span id="l35.43">   // attachmentitem.</span>
<a href="#l35.44"></a><span id="l35.44">   let bucket = aController.e(&quot;attachmentBucket&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-cloudfile-helpers.js</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-cloudfile-helpers.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -51,17 +51,17 @@ function installInto(module) {</span>
<a href="#l36.4"></a><span id="l36.4"> function getFile(aFilename, aRoot) {</span>
<a href="#l36.5"></a><span id="l36.5">   let path = os.getFileForPath(aRoot);</span>
<a href="#l36.6"></a><span id="l36.6">   let file = os.getFileForPath(os.abspath(aFilename, path));</span>
<a href="#l36.7"></a><span id="l36.7">   fdh.assert_true(file.exists, &quot;File &quot; + aFilename + &quot; does not exist.&quot;);</span>
<a href="#l36.8"></a><span id="l36.8">   return file;</span>
<a href="#l36.9"></a><span id="l36.9"> }</span>
<a href="#l36.10"></a><span id="l36.10"> </span>
<a href="#l36.11"></a><span id="l36.11"> /**</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">- * Helper function for getting the nsILocalFile's for some files located</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+ * Helper function for getting the nsIFile's for some files located</span>
<a href="#l36.14"></a><span id="l36.14">  * in a subdirectory of the test directory.</span>
<a href="#l36.15"></a><span id="l36.15">  *</span>
<a href="#l36.16"></a><span id="l36.16">  * @param aFiles an array of filename strings for files underneath the test</span>
<a href="#l36.17"></a><span id="l36.17">  *               file directory.</span>
<a href="#l36.18"></a><span id="l36.18">  * @param aFileRoot the file who's parent directory we should start looking</span>
<a href="#l36.19"></a><span id="l36.19">  *                  for aFiles in.</span>
<a href="#l36.20"></a><span id="l36.20">  *</span>
<a href="#l36.21"></a><span id="l36.21">  * Example:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-folder-display-helpers.js</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-folder-display-helpers.js</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -2846,17 +2846,17 @@ var SyntheticPartMultiRelated;</span>
<a href="#l37.4"></a><span id="l37.4"> function load_via_src_path(aPath, aModule) {</span>
<a href="#l37.5"></a><span id="l37.5">   let thisFilePath = os.getFileForPath(__file__);</span>
<a href="#l37.6"></a><span id="l37.6"> </span>
<a href="#l37.7"></a><span id="l37.7">   for (let i = 0; i &lt; FILE_LOAD_PATHS.length; ++i) {</span>
<a href="#l37.8"></a><span id="l37.8">     let srcPath = os.abspath(FILE_LOAD_PATHS[i], thisFilePath);</span>
<a href="#l37.9"></a><span id="l37.9">     let fullPath = os.abspath(aPath, os.getFileForPath(srcPath));</span>
<a href="#l37.10"></a><span id="l37.10"> </span>
<a href="#l37.11"></a><span id="l37.11">     let file = Cc[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-                 .createInstance(Ci.nsILocalFile);</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+                 .createInstance(Ci.nsIFile);</span>
<a href="#l37.14"></a><span id="l37.14">     file.initWithPath(fullPath);</span>
<a href="#l37.15"></a><span id="l37.15"> </span>
<a href="#l37.16"></a><span id="l37.16">     if (file.exists()) {</span>
<a href="#l37.17"></a><span id="l37.17">       try {</span>
<a href="#l37.18"></a><span id="l37.18">         let uri = Services.io.newFileURI(file).spec;</span>
<a href="#l37.19"></a><span id="l37.19">         Services.scriptloader.loadSubScript(uri, aModule);</span>
<a href="#l37.20"></a><span id="l37.20">         return;</span>
<a href="#l37.21"></a><span id="l37.21">       }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/modules/frame.js</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/modules/frame.js</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -83,17 +83,17 @@ var loadTestResources = function () {</span>
<a href="#l38.4"></a><span id="l38.4">   if (elementslib == undefined) {</span>
<a href="#l38.5"></a><span id="l38.5">     elementslib = {};</span>
<a href="#l38.6"></a><span id="l38.6">     Components.utils.import(&quot;resource://mozmill/modules/elementslib.js&quot;, elementslib);</span>
<a href="#l38.7"></a><span id="l38.7">   }</span>
<a href="#l38.8"></a><span id="l38.8"> }</span>
<a href="#l38.9"></a><span id="l38.9"> </span>
<a href="#l38.10"></a><span id="l38.10"> var loadFile = function(path, collector) {</span>
<a href="#l38.11"></a><span id="l38.11">   var file = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-                       .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+                       .createInstance(Components.interfaces.nsIFile);</span>
<a href="#l38.14"></a><span id="l38.14">   file.initWithPath(path);</span>
<a href="#l38.15"></a><span id="l38.15">   var uri = ios.newFileURI(file).spec;</span>
<a href="#l38.16"></a><span id="l38.16"> </span>
<a href="#l38.17"></a><span id="l38.17">   var module = new Components.utils.Sandbox(systemPrincipal);</span>
<a href="#l38.18"></a><span id="l38.18">   module.registeredFunctions = registeredFunctions;</span>
<a href="#l38.19"></a><span id="l38.19">   module.collector = collector</span>
<a href="#l38.20"></a><span id="l38.20">   loadTestResources();</span>
<a href="#l38.21"></a><span id="l38.21">   module.mozmill = mozmill;</span>
<a href="#l38.22"></a><span id="l38.22" class="difflineat">@@ -348,17 +348,17 @@ function Collector () {</span>
<a href="#l38.23"></a><span id="l38.23"> </span>
<a href="#l38.24"></a><span id="l38.24"> Collector.prototype.getModule = function (name) {</span>
<a href="#l38.25"></a><span id="l38.25">   return this.test_modules_by_name[name];</span>
<a href="#l38.26"></a><span id="l38.26"> }</span>
<a href="#l38.27"></a><span id="l38.27"> </span>
<a href="#l38.28"></a><span id="l38.28"> Collector.prototype.getServer = function (port, basePath) {</span>
<a href="#l38.29"></a><span id="l38.29">   if (basePath) {</span>
<a href="#l38.30"></a><span id="l38.30">     var lp = Cc[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l38.31"></a><span id="l38.31" class="difflineminus">-             .createInstance(Ci.nsILocalFile);</span>
<a href="#l38.32"></a><span id="l38.32" class="difflineplus">+             .createInstance(Ci.nsIFile);</span>
<a href="#l38.33"></a><span id="l38.33">     lp.initWithPath(basePath);</span>
<a href="#l38.34"></a><span id="l38.34">   }</span>
<a href="#l38.35"></a><span id="l38.35"> </span>
<a href="#l38.36"></a><span id="l38.36">   var srv = new HttpServer();</span>
<a href="#l38.37"></a><span id="l38.37">   if (lp) {</span>
<a href="#l38.38"></a><span id="l38.38">     srv.registerDirectory(&quot;/&quot;, lp);</span>
<a href="#l38.39"></a><span id="l38.39">   }</span>
<a href="#l38.40"></a><span id="l38.40"> </span>
<a href="#l38.41"></a><span id="l38.41" class="difflineat">@@ -396,17 +396,17 @@ Collector.prototype.addHttpResource = fu</span>
<a href="#l38.42"></a><span id="l38.42"> </span>
<a href="#l38.43"></a><span id="l38.43">   if (!ns) {</span>
<a href="#l38.44"></a><span id="l38.44">     ns = '/';</span>
<a href="#l38.45"></a><span id="l38.45">   } else {</span>
<a href="#l38.46"></a><span id="l38.46">     ns = '/' + ns + '/';</span>
<a href="#l38.47"></a><span id="l38.47">   }</span>
<a href="#l38.48"></a><span id="l38.48"> </span>
<a href="#l38.49"></a><span id="l38.49">   var lp = Components.classes[&quot;@mozilla.org/file/local;1&quot;].</span>
<a href="#l38.50"></a><span id="l38.50" class="difflineminus">-           createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l38.51"></a><span id="l38.51" class="difflineplus">+           createInstance(Components.interfaces.nsIFile);</span>
<a href="#l38.52"></a><span id="l38.52">   lp.initWithPath(os.abspath(directory, this.current_file));</span>
<a href="#l38.53"></a><span id="l38.53">   this.httpd.registerDirectory(ns, lp);</span>
<a href="#l38.54"></a><span id="l38.54"> </span>
<a href="#l38.55"></a><span id="l38.55">   return 'http://localhost:' + this.http_port + ns</span>
<a href="#l38.56"></a><span id="l38.56"> }</span>
<a href="#l38.57"></a><span id="l38.57"> </span>
<a href="#l38.58"></a><span id="l38.58"> Collector.prototype.initTestModule = function (filename) {</span>
<a href="#l38.59"></a><span id="l38.59">   var test_module = loadFile(filename, this);</span>
<a href="#l38.60"></a><span id="l38.60" class="difflineat">@@ -719,12 +719,12 @@ var getThread = function () {</span>
<a href="#l38.61"></a><span id="l38.61">   return thread;</span>
<a href="#l38.62"></a><span id="l38.62"> }</span>
<a href="#l38.63"></a><span id="l38.63"> </span>
<a href="#l38.64"></a><span id="l38.64"> function registerModule(name, path) {</span>
<a href="#l38.65"></a><span id="l38.65">   let protocolHandler = Services.io.getProtocolHandler(&quot;resource&quot;)</span>
<a href="#l38.66"></a><span id="l38.66">                                 .QueryInterface(Components.interfaces.nsIResProtocolHandler);</span>
<a href="#l38.67"></a><span id="l38.67"> </span>
<a href="#l38.68"></a><span id="l38.68">   let modulesFile = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l38.69"></a><span id="l38.69" class="difflineminus">-                              .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l38.70"></a><span id="l38.70" class="difflineplus">+                              .createInstance(Components.interfaces.nsIFile);</span>
<a href="#l38.71"></a><span id="l38.71">   modulesFile.initWithPath(path);</span>
<a href="#l38.72"></a><span id="l38.72">   protocolHandler.setSubstitution(name, ios.newFileURI(modulesFile));</span>
<a href="#l38.73"></a><span id="l38.73"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/modules/utils.js</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/modules/utils.js</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -204,17 +204,17 @@ var checkChrome = function() {</span>
<a href="#l39.4"></a><span id="l39.4">      //send it into the JS test framework to run the file</span>
<a href="#l39.5"></a><span id="l39.5">      // jstest.runFromFile(thefile.path);</span>
<a href="#l39.6"></a><span id="l39.6">    }</span>
<a href="#l39.7"></a><span id="l39.7">  };</span>
<a href="#l39.8"></a><span id="l39.8"> </span>
<a href="#l39.9"></a><span id="l39.9">  var saveFile = function(w, content, filename){</span>
<a href="#l39.10"></a><span id="l39.10">    //define the file interface</span>
<a href="#l39.11"></a><span id="l39.11">    var file = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-                        .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+                        .createInstance(Components.interfaces.nsIFile);</span>
<a href="#l39.14"></a><span id="l39.14">    //point it at the file we want to get at</span>
<a href="#l39.15"></a><span id="l39.15">    file.initWithPath(filename);</span>
<a href="#l39.16"></a><span id="l39.16"> </span>
<a href="#l39.17"></a><span id="l39.17">    // file is nsIFile, data is a string</span>
<a href="#l39.18"></a><span id="l39.18">    var foStream = Components.classes[&quot;@mozilla.org/network/file-output-stream;1&quot;]</span>
<a href="#l39.19"></a><span id="l39.19">                             .createInstance(Components.interfaces.nsIFileOutputStream);</span>
<a href="#l39.20"></a><span id="l39.20"> </span>
<a href="#l39.21"></a><span id="l39.21">    // use 0x02 | 0x10 to open file for appending.</span>
<a href="#l39.22"></a><span id="l39.22" class="difflineat">@@ -239,17 +239,17 @@ var checkChrome = function() {</span>
<a href="#l39.23"></a><span id="l39.23">      //if we got a file</span>
<a href="#l39.24"></a><span id="l39.24">      if ((res == nsIFilePicker.returnOK) || (res == nsIFilePicker.returnReplace)){</span>
<a href="#l39.25"></a><span id="l39.25">        var thefile = fp.file;</span>
<a href="#l39.26"></a><span id="l39.26"> </span>
<a href="#l39.27"></a><span id="l39.27">        //forcing the user to save as a .js file</span>
<a href="#l39.28"></a><span id="l39.28">        if (thefile.path.indexOf(&quot;.js&quot;) == -1){</span>
<a href="#l39.29"></a><span id="l39.29">          //define the file interface</span>
<a href="#l39.30"></a><span id="l39.30">          var file = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l39.31"></a><span id="l39.31" class="difflineminus">-                              .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l39.32"></a><span id="l39.32" class="difflineplus">+                              .createInstance(Components.interfaces.nsIFile);</span>
<a href="#l39.33"></a><span id="l39.33">          //point it at the file we want to get at</span>
<a href="#l39.34"></a><span id="l39.34">          file.initWithPath(thefile.path+&quot;.js&quot;);</span>
<a href="#l39.35"></a><span id="l39.35">          var thefile = file;</span>
<a href="#l39.36"></a><span id="l39.36">        }</span>
<a href="#l39.37"></a><span id="l39.37"> </span>
<a href="#l39.38"></a><span id="l39.38">        // file is nsIFile, data is a string</span>
<a href="#l39.39"></a><span id="l39.39">        var foStream = Components.classes[&quot;@mozilla.org/network/file-output-stream;1&quot;]</span>
<a href="#l39.40"></a><span id="l39.40">                                .createInstance(Components.interfaces.nsIFileOutputStream);</span>
<a href="#l39.41"></a><span id="l39.41" class="difflineat">@@ -288,17 +288,17 @@ var checkChrome = function() {</span>
<a href="#l39.42"></a><span id="l39.42">       //jsTest.runFromString(thefile.path);</span>
<a href="#l39.43"></a><span id="l39.43">       return {path:thefile.path, data:data};</span>
<a href="#l39.44"></a><span id="l39.44">     }</span>
<a href="#l39.45"></a><span id="l39.45">   };</span>
<a href="#l39.46"></a><span id="l39.46"> </span>
<a href="#l39.47"></a><span id="l39.47">  var getFile = function(path){</span>
<a href="#l39.48"></a><span id="l39.48">    //define the file interface</span>
<a href="#l39.49"></a><span id="l39.49">    var file = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l39.50"></a><span id="l39.50" class="difflineminus">-                        .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l39.51"></a><span id="l39.51" class="difflineplus">+                        .createInstance(Components.interfaces.nsIFile);</span>
<a href="#l39.52"></a><span id="l39.52">    //point it at the file we want to get at</span>
<a href="#l39.53"></a><span id="l39.53">    file.initWithPath(path);</span>
<a href="#l39.54"></a><span id="l39.54">    // define file stream interfaces</span>
<a href="#l39.55"></a><span id="l39.55">    var data = &quot;&quot;;</span>
<a href="#l39.56"></a><span id="l39.56">    var fstream = Components.classes[&quot;@mozilla.org/network/file-input-stream;1&quot;]</span>
<a href="#l39.57"></a><span id="l39.57">                            .createInstance(Components.interfaces.nsIFileInputStream);</span>
<a href="#l39.58"></a><span id="l39.58">    var sstream = Components.classes[&quot;@mozilla.org/scriptableinputstream;1&quot;]</span>
<a href="#l39.59"></a><span id="l39.59">                            .createInstance(Components.interfaces.nsIScriptableInputStream);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -2217,17 +2217,17 @@ function ServerHandler(server)</span>
<a href="#l40.4"></a><span id="l40.4">   // FIELDS</span>
<a href="#l40.5"></a><span id="l40.5"> </span>
<a href="#l40.6"></a><span id="l40.6">   /**</span>
<a href="#l40.7"></a><span id="l40.7">    * The nsHttpServer instance associated with this handler.</span>
<a href="#l40.8"></a><span id="l40.8">    */</span>
<a href="#l40.9"></a><span id="l40.9">   this._server = server;</span>
<a href="#l40.10"></a><span id="l40.10"> </span>
<a href="#l40.11"></a><span id="l40.11">   /**</span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-   * A FileMap object containing the set of path-&gt;nsILocalFile mappings for</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+   * A FileMap object containing the set of path-&gt;nsIFile mappings for</span>
<a href="#l40.14"></a><span id="l40.14">    * all directory mappings set in the server (e.g., &quot;/&quot; for /var/www/html/,</span>
<a href="#l40.15"></a><span id="l40.15">    * &quot;/foo/bar/&quot; for /local/path/, and &quot;/foo/bar/baz/&quot; for /local/path2).</span>
<a href="#l40.16"></a><span id="l40.16">    *</span>
<a href="#l40.17"></a><span id="l40.17">    * Note carefully: the leading and trailing &quot;/&quot; in each path (not file) are</span>
<a href="#l40.18"></a><span id="l40.18">    * removed before insertion to simplify the code which uses this.  You have</span>
<a href="#l40.19"></a><span id="l40.19">    * been warned!</span>
<a href="#l40.20"></a><span id="l40.20">    */</span>
<a href="#l40.21"></a><span id="l40.21">   this._pathDirectoryMap = new FileMap();</span>
<a href="#l40.22"></a><span id="l40.22" class="difflineat">@@ -2650,17 +2650,17 @@ ServerHandler.prototype =</span>
<a href="#l40.23"></a><span id="l40.23">   },</span>
<a href="#l40.24"></a><span id="l40.24"> </span>
<a href="#l40.25"></a><span id="l40.25">   /**</span>
<a href="#l40.26"></a><span id="l40.26">    * Writes an HTTP response for the given file, including setting headers for</span>
<a href="#l40.27"></a><span id="l40.27">    * file metadata.</span>
<a href="#l40.28"></a><span id="l40.28">    *</span>
<a href="#l40.29"></a><span id="l40.29">    * @param metadata : Request</span>
<a href="#l40.30"></a><span id="l40.30">    *   the Request for which a response is being generated</span>
<a href="#l40.31"></a><span id="l40.31" class="difflineminus">-   * @param file : nsILocalFile</span>
<a href="#l40.32"></a><span id="l40.32" class="difflineplus">+   * @param file : nsIFile</span>
<a href="#l40.33"></a><span id="l40.33">    *   the file which is to be sent in the response</span>
<a href="#l40.34"></a><span id="l40.34">    * @param response : Response</span>
<a href="#l40.35"></a><span id="l40.35">    *   the response to which the file should be written</span>
<a href="#l40.36"></a><span id="l40.36">    * @param offset: uint</span>
<a href="#l40.37"></a><span id="l40.37">    *   the byte offset to skip to when writing</span>
<a href="#l40.38"></a><span id="l40.38">    * @param count: uint</span>
<a href="#l40.39"></a><span id="l40.39">    *   the number of bytes to write</span>
<a href="#l40.40"></a><span id="l40.40">    */</span>
<a href="#l40.41"></a><span id="l40.41" class="difflineat">@@ -2989,27 +2989,27 @@ ServerHandler.prototype =</span>
<a href="#l40.42"></a><span id="l40.42">     }</span>
<a href="#l40.43"></a><span id="l40.43">     catch (e)</span>
<a href="#l40.44"></a><span id="l40.44">     {</span>
<a href="#l40.45"></a><span id="l40.45">       return &quot;application/octet-stream&quot;;</span>
<a href="#l40.46"></a><span id="l40.46">     }</span>
<a href="#l40.47"></a><span id="l40.47">   },</span>
<a href="#l40.48"></a><span id="l40.48"> </span>
<a href="#l40.49"></a><span id="l40.49">   /**</span>
<a href="#l40.50"></a><span id="l40.50" class="difflineminus">-   * Returns the nsILocalFile which corresponds to the path, as determined using</span>
<a href="#l40.51"></a><span id="l40.51" class="difflineplus">+   * Returns the nsIFile which corresponds to the path, as determined using</span>
<a href="#l40.52"></a><span id="l40.52">    * all registered path-&gt;directory mappings and any paths which are explicitly</span>
<a href="#l40.53"></a><span id="l40.53">    * overridden.</span>
<a href="#l40.54"></a><span id="l40.54">    *</span>
<a href="#l40.55"></a><span id="l40.55">    * @param path : string</span>
<a href="#l40.56"></a><span id="l40.56">    *   the server path for which a file should be retrieved, e.g. &quot;/foo/bar&quot;</span>
<a href="#l40.57"></a><span id="l40.57">    * @throws HttpError</span>
<a href="#l40.58"></a><span id="l40.58">    *   when the correct action is the corresponding HTTP error (i.e., because no</span>
<a href="#l40.59"></a><span id="l40.59">    *   mapping was found for a directory in path, the referenced file doesn't</span>
<a href="#l40.60"></a><span id="l40.60">    *   exist, etc.)</span>
<a href="#l40.61"></a><span id="l40.61" class="difflineminus">-   * @returns nsILocalFile</span>
<a href="#l40.62"></a><span id="l40.62" class="difflineplus">+   * @returns nsIFile</span>
<a href="#l40.63"></a><span id="l40.63">    *   the file to be sent as the response to a request for the path</span>
<a href="#l40.64"></a><span id="l40.64">    */</span>
<a href="#l40.65"></a><span id="l40.65">   _getFileForPath: function(path)</span>
<a href="#l40.66"></a><span id="l40.66">   {</span>
<a href="#l40.67"></a><span id="l40.67">     // decode and add underscores as necessary</span>
<a href="#l40.68"></a><span id="l40.68">     try</span>
<a href="#l40.69"></a><span id="l40.69">     {</span>
<a href="#l40.70"></a><span id="l40.70">       path = toInternalPath(path, true);</span>
<a href="#l40.71"></a><span id="l40.71" class="difflineat">@@ -3364,51 +3364,51 @@ ServerHandler.prototype =</span>
<a href="#l40.72"></a><span id="l40.72"> </span>
<a href="#l40.73"></a><span id="l40.73">       response.bodyOutputStream.write(body, body.length);</span>
<a href="#l40.74"></a><span id="l40.74">     }</span>
<a href="#l40.75"></a><span id="l40.75">   }</span>
<a href="#l40.76"></a><span id="l40.76"> };</span>
<a href="#l40.77"></a><span id="l40.77"> </span>
<a href="#l40.78"></a><span id="l40.78"> </span>
<a href="#l40.79"></a><span id="l40.79"> /**</span>
<a href="#l40.80"></a><span id="l40.80" class="difflineminus">- * Maps absolute paths to files on the local file system (as nsILocalFiles).</span>
<a href="#l40.81"></a><span id="l40.81" class="difflineplus">+ * Maps absolute paths to files on the local file system (as nsIFiles).</span>
<a href="#l40.82"></a><span id="l40.82">  */</span>
<a href="#l40.83"></a><span id="l40.83"> function FileMap()</span>
<a href="#l40.84"></a><span id="l40.84"> {</span>
<a href="#l40.85"></a><span id="l40.85" class="difflineminus">-  /** Hash which will map paths to nsILocalFiles. */</span>
<a href="#l40.86"></a><span id="l40.86" class="difflineplus">+  /** Hash which will map paths to nsIFiles. */</span>
<a href="#l40.87"></a><span id="l40.87">   this._map = {};</span>
<a href="#l40.88"></a><span id="l40.88"> }</span>
<a href="#l40.89"></a><span id="l40.89"> FileMap.prototype =</span>
<a href="#l40.90"></a><span id="l40.90"> {</span>
<a href="#l40.91"></a><span id="l40.91">   // PUBLIC API</span>
<a href="#l40.92"></a><span id="l40.92"> </span>
<a href="#l40.93"></a><span id="l40.93">   /**</span>
<a href="#l40.94"></a><span id="l40.94" class="difflineminus">-   * Maps key to a clone of the nsILocalFile value if value is non-null;</span>
<a href="#l40.95"></a><span id="l40.95" class="difflineplus">+   * Maps key to a clone of the nsIFile value if value is non-null;</span>
<a href="#l40.96"></a><span id="l40.96">    * otherwise, removes any extant mapping for key.</span>
<a href="#l40.97"></a><span id="l40.97">    *</span>
<a href="#l40.98"></a><span id="l40.98">    * @param key : string</span>
<a href="#l40.99"></a><span id="l40.99">    *   string to which a clone of value is mapped</span>
<a href="#l40.100"></a><span id="l40.100" class="difflineminus">-   * @param value : nsILocalFile</span>
<a href="#l40.101"></a><span id="l40.101" class="difflineplus">+   * @param value : nsIFile</span>
<a href="#l40.102"></a><span id="l40.102">    *   the file to map to key, or null to remove a mapping</span>
<a href="#l40.103"></a><span id="l40.103">    */</span>
<a href="#l40.104"></a><span id="l40.104">   put: function(key, value)</span>
<a href="#l40.105"></a><span id="l40.105">   {</span>
<a href="#l40.106"></a><span id="l40.106">     if (value)</span>
<a href="#l40.107"></a><span id="l40.107">       this._map[key] = value.clone();</span>
<a href="#l40.108"></a><span id="l40.108">     else</span>
<a href="#l40.109"></a><span id="l40.109">       delete this._map[key];</span>
<a href="#l40.110"></a><span id="l40.110">   },</span>
<a href="#l40.111"></a><span id="l40.111"> </span>
<a href="#l40.112"></a><span id="l40.112">   /**</span>
<a href="#l40.113"></a><span id="l40.113" class="difflineminus">-   * Returns a clone of the nsILocalFile mapped to key, or null if no such</span>
<a href="#l40.114"></a><span id="l40.114" class="difflineplus">+   * Returns a clone of the nsIFile mapped to key, or null if no such</span>
<a href="#l40.115"></a><span id="l40.115">    * mapping exists.</span>
<a href="#l40.116"></a><span id="l40.116">    *</span>
<a href="#l40.117"></a><span id="l40.117">    * @param key : string</span>
<a href="#l40.118"></a><span id="l40.118">    *   key to which the returned file maps</span>
<a href="#l40.119"></a><span id="l40.119" class="difflineminus">-   * @returns nsILocalFile</span>
<a href="#l40.120"></a><span id="l40.120" class="difflineplus">+   * @returns nsIFile</span>
<a href="#l40.121"></a><span id="l40.121">    *   a clone of the mapped file, or null if no mapping exists</span>
<a href="#l40.122"></a><span id="l40.122">    */</span>
<a href="#l40.123"></a><span id="l40.123">   get: function(key)</span>
<a href="#l40.124"></a><span id="l40.124">   {</span>
<a href="#l40.125"></a><span id="l40.125">     var val = this._map[key];</span>
<a href="#l40.126"></a><span id="l40.126">     return val ? val.clone() : null;</span>
<a href="#l40.127"></a><span id="l40.127">   }</span>
<a href="#l40.128"></a><span id="l40.128"> };</span>
<a href="#l40.129"></a><span id="l40.129" class="difflineat">@@ -5262,17 +5262,17 @@ var NSGetFactory = XPCOMUtils.generateNS</span>
<a href="#l40.130"></a><span id="l40.130">  *   /home/jwalden/index.html); if this is omitted, only the default URLs in</span>
<a href="#l40.131"></a><span id="l40.131">  *   this server implementation will be functional</span>
<a href="#l40.132"></a><span id="l40.132">  */</span>
<a href="#l40.133"></a><span id="l40.133"> function server(port, basePath)</span>
<a href="#l40.134"></a><span id="l40.134"> {</span>
<a href="#l40.135"></a><span id="l40.135">   if (basePath)</span>
<a href="#l40.136"></a><span id="l40.136">   {</span>
<a href="#l40.137"></a><span id="l40.137">     var lp = Cc[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l40.138"></a><span id="l40.138" class="difflineminus">-               .createInstance(Ci.nsILocalFile);</span>
<a href="#l40.139"></a><span id="l40.139" class="difflineplus">+               .createInstance(Ci.nsIFile);</span>
<a href="#l40.140"></a><span id="l40.140">     lp.initWithPath(basePath);</span>
<a href="#l40.141"></a><span id="l40.141">   }</span>
<a href="#l40.142"></a><span id="l40.142"> </span>
<a href="#l40.143"></a><span id="l40.143">   // if you're running this, you probably want to see debugging info</span>
<a href="#l40.144"></a><span id="l40.144">   DEBUG = true;</span>
<a href="#l40.145"></a><span id="l40.145"> </span>
<a href="#l40.146"></a><span id="l40.146">   var srv = new nsHttpServer();</span>
<a href="#l40.147"></a><span id="l40.147">   if (lp)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/os.js</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/os.js</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -47,17 +47,17 @@ function listDirectory (file) {</span>
<a href="#l41.4"></a><span id="l41.4">     entry.QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l41.5"></a><span id="l41.5">     array.push(entry);</span>
<a href="#l41.6"></a><span id="l41.6">   }</span>
<a href="#l41.7"></a><span id="l41.7">   return array;</span>
<a href="#l41.8"></a><span id="l41.8"> }</span>
<a href="#l41.9"></a><span id="l41.9"> </span>
<a href="#l41.10"></a><span id="l41.10"> function getFileForPath (path) {</span>
<a href="#l41.11"></a><span id="l41.11">   var file = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-                       .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+                       .createInstance(Components.interfaces.nsIFile);</span>
<a href="#l41.14"></a><span id="l41.14">   file.initWithPath(path);</span>
<a href="#l41.15"></a><span id="l41.15">   return file;</span>
<a href="#l41.16"></a><span id="l41.16"> }</span>
<a href="#l41.17"></a><span id="l41.17"> </span>
<a href="#l41.18"></a><span id="l41.18"> function abspath (rel, file) {</span>
<a href="#l41.19"></a><span id="l41.19">   var relSplit = rel.split('/');</span>
<a href="#l41.20"></a><span id="l41.20">   if (relSplit[0] == '..' &amp;&amp; !file.isDirectory()) {</span>
<a href="#l41.21"></a><span id="l41.21">     file = file.parent;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/mailnews/base/prefs/content/removeAccount.js</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/mailnews/base/prefs/content/removeAccount.js</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -55,17 +55,17 @@ function enableRemove() {</span>
<a href="#l42.4"></a><span id="l42.4">      !document.getElementById(&quot;removeData&quot;).checked);</span>
<a href="#l42.5"></a><span id="l42.5"> }</span>
<a href="#l42.6"></a><span id="l42.6"> </span>
<a href="#l42.7"></a><span id="l42.7"> /**</span>
<a href="#l42.8"></a><span id="l42.8">  * Show the local directory.</span>
<a href="#l42.9"></a><span id="l42.9">  */</span>
<a href="#l42.10"></a><span id="l42.10"> function openLocalDirectory() {</span>
<a href="#l42.11"></a><span id="l42.11">   let nsLocalFile = Components.Constructor(&quot;@mozilla.org/file/local;1&quot;,</span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-                                           &quot;nsILocalFile&quot;, &quot;initWithPath&quot;);</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+                                           &quot;nsIFile&quot;, &quot;initWithPath&quot;);</span>
<a href="#l42.14"></a><span id="l42.14">   let localDir = gServer.localPath.path;</span>
<a href="#l42.15"></a><span id="l42.15">   try {</span>
<a href="#l42.16"></a><span id="l42.16">     new nsLocalFile(localDir).reveal();</span>
<a href="#l42.17"></a><span id="l42.17">   } catch(e) {</span>
<a href="#l42.18"></a><span id="l42.18">     // Reveal may fail e.g. on Linux, then just show the path as a string.</span>
<a href="#l42.19"></a><span id="l42.19">     document.getElementById(&quot;localDirectory&quot;).value = localDir;</span>
<a href="#l42.20"></a><span id="l42.20">     document.getElementById(&quot;localDirectory&quot;).collapsed = false;</span>
<a href="#l42.21"></a><span id="l42.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/mailnews/base/test/unit/test_searchBody.js</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_searchBody.js</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -75,38 +75,38 @@ function fixFile(file) {</span>
<a href="#l43.4"></a><span id="l43.4">     data += str;</span>
<a href="#l43.5"></a><span id="l43.5">     str = sstream.read(4096);</span>
<a href="#l43.6"></a><span id="l43.6">   } while (str.length &gt; 0);</span>
<a href="#l43.7"></a><span id="l43.7"> </span>
<a href="#l43.8"></a><span id="l43.8">   sstream.close();</span>
<a href="#l43.9"></a><span id="l43.9">   fstream.close();</span>
<a href="#l43.10"></a><span id="l43.10"> </span>
<a href="#l43.11"></a><span id="l43.11">   let targetFile = Cc[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-                     .createInstance(Ci.nsILocalFile);</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineplus">+                     .createInstance(Ci.nsIFile);</span>
<a href="#l43.14"></a><span id="l43.14">   targetFile.initWithFile(do_get_profile());</span>
<a href="#l43.15"></a><span id="l43.15">   targetFile.append(file.leafName);</span>
<a href="#l43.16"></a><span id="l43.16">   let ostream = Cc[&quot;@mozilla.org/network/file-output-stream;1&quot;]</span>
<a href="#l43.17"></a><span id="l43.17">                   .createInstance(Ci.nsIFileOutputStream);</span>
<a href="#l43.18"></a><span id="l43.18">   ostream.init(targetFile, -1, -1, 0);</span>
<a href="#l43.19"></a><span id="l43.19">   ostream.write(data, data.length);</span>
<a href="#l43.20"></a><span id="l43.20">   ostream.close();</span>
<a href="#l43.21"></a><span id="l43.21">   return targetFile;</span>
<a href="#l43.22"></a><span id="l43.22"> }</span>
<a href="#l43.23"></a><span id="l43.23"> </span>
<a href="#l43.24"></a><span id="l43.24" class="difflineminus">-var copyListener = </span>
<a href="#l43.25"></a><span id="l43.25" class="difflineplus">+var copyListener =</span>
<a href="#l43.26"></a><span id="l43.26"> {</span>
<a href="#l43.27"></a><span id="l43.27">   OnStartCopy: function() {},</span>
<a href="#l43.28"></a><span id="l43.28">   OnProgress: function(aProgress, aProgressMax) {},</span>
<a href="#l43.29"></a><span id="l43.29">   SetMessageKey: function(aKey) {},</span>
<a href="#l43.30"></a><span id="l43.30">   SetMessageId: function(aMessageId) {},</span>
<a href="#l43.31"></a><span id="l43.31" class="difflineminus">-  OnStopCopy: function(aStatus) </span>
<a href="#l43.32"></a><span id="l43.32" class="difflineplus">+  OnStopCopy: function(aStatus)</span>
<a href="#l43.33"></a><span id="l43.33">   {</span>
<a href="#l43.34"></a><span id="l43.34">     var fileName = Files.shift();</span>
<a href="#l43.35"></a><span id="l43.35">     if (fileName)</span>
<a href="#l43.36"></a><span id="l43.36" class="difflineminus">-    { </span>
<a href="#l43.37"></a><span id="l43.37" class="difflineplus">+    {</span>
<a href="#l43.38"></a><span id="l43.38">       var file = fixFile(do_get_file(fileName));</span>
<a href="#l43.39"></a><span id="l43.39">       MailServices.copy.CopyFileMessage(file, localAccountUtils.inboxFolder, null,</span>
<a href="#l43.40"></a><span id="l43.40">                                         false, 0, &quot;&quot;, copyListener, null);</span>
<a href="#l43.41"></a><span id="l43.41">     }</span>
<a href="#l43.42"></a><span id="l43.42">     else</span>
<a href="#l43.43"></a><span id="l43.43">       testBodySearch();</span>
<a href="#l43.44"></a><span id="l43.44">   }</span>
<a href="#l43.45"></a><span id="l43.45"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_bug235432.js</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_bug235432.js</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -38,17 +38,17 @@ var gCopyListener =</span>
<a href="#l44.4"></a><span id="l44.4">   }</span>
<a href="#l44.5"></a><span id="l44.5"> };</span>
<a href="#l44.6"></a><span id="l44.6"> </span>
<a href="#l44.7"></a><span id="l44.7"> /**</span>
<a href="#l44.8"></a><span id="l44.8">  * copyFileMessageInLocalFolder</span>
<a href="#l44.9"></a><span id="l44.9">  * A utility wrapper of nsIMsgCopyService.CopyFileMessage to copy a message</span>
<a href="#l44.10"></a><span id="l44.10">  * into local inbox folder.</span>
<a href="#l44.11"></a><span id="l44.11">  *</span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">- * @param aMessageFile     An instance of nsILocalFile to copy.</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+ * @param aMessageFile     An instance of nsIFile to copy.</span>
<a href="#l44.14"></a><span id="l44.14">  * @param aMessageFlags    Message flags which will be set after message is</span>
<a href="#l44.15"></a><span id="l44.15">  *                         copied</span>
<a href="#l44.16"></a><span id="l44.16">  * @param aMessageKeyword  Keywords which will be set for newly copied</span>
<a href="#l44.17"></a><span id="l44.17">  *                         message</span>
<a href="#l44.18"></a><span id="l44.18">  * @param aMessageWindow   Window for notification callbacks, can be null</span>
<a href="#l44.19"></a><span id="l44.19">  * @param aCallback        Callback function which will be invoked after</span>
<a href="#l44.20"></a><span id="l44.20">  *                         message is copied</span>
<a href="#l44.21"></a><span id="l44.21">  */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/mailnews/db/gloda/modules/datastore.js</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/mailnews/db/gloda/modules/datastore.js</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -494,17 +494,17 @@ ExplainedStatementWrapper.prototype = {</span>
<a href="#l45.4"></a><span id="l45.4"> function ExplainedStatementProcessor(aDumpPath) {</span>
<a href="#l45.5"></a><span id="l45.5">   Services.obs.addObserver(this, &quot;quit-application&quot;, false);</span>
<a href="#l45.6"></a><span id="l45.6"> </span>
<a href="#l45.7"></a><span id="l45.7">   this._sqlStack = [];</span>
<a href="#l45.8"></a><span id="l45.8">   this._curOps = [];</span>
<a href="#l45.9"></a><span id="l45.9">   this._objsWritten = 0;</span>
<a href="#l45.10"></a><span id="l45.10"> </span>
<a href="#l45.11"></a><span id="l45.11">   let filePath = Cc[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-                   .createInstance(Ci.nsILocalFile);</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+                   .createInstance(Ci.nsIFile);</span>
<a href="#l45.14"></a><span id="l45.14">   filePath.initWithPath(aDumpPath);</span>
<a href="#l45.15"></a><span id="l45.15"> </span>
<a href="#l45.16"></a><span id="l45.16">   this._ostream = Cc[&quot;@mozilla.org/network/file-output-stream;1&quot;]</span>
<a href="#l45.17"></a><span id="l45.17">                  .createInstance(Ci.nsIFileOutputStream);</span>
<a href="#l45.18"></a><span id="l45.18">   this._ostream.init(filePath, -1, -1, 0);</span>
<a href="#l45.19"></a><span id="l45.19"> </span>
<a href="#l45.20"></a><span id="l45.20">   let s = '{&quot;queries&quot;: [';</span>
<a href="#l45.21"></a><span id="l45.21">   this._ostream.write(s, s.length);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/mailnews/extensions/bayesian-spam-filter/test/unit/resources/trainingfile.js</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/mailnews/extensions/bayesian-spam-filter/test/unit/resources/trainingfile.js</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -9,44 +9,44 @@ Components.utils.import(&quot;resource://gre/</span>
<a href="#l46.4"></a><span id="l46.4"> </span>
<a href="#l46.5"></a><span id="l46.5"> function TrainingData() {</span>
<a href="#l46.6"></a><span id="l46.6"> </span>
<a href="#l46.7"></a><span id="l46.7">   // local constants</span>
<a href="#l46.8"></a><span id="l46.8"> </span>
<a href="#l46.9"></a><span id="l46.9">   const Cc = Components.classes;</span>
<a href="#l46.10"></a><span id="l46.10">   const Ci = Components.interfaces;</span>
<a href="#l46.11"></a><span id="l46.11">   const CC = Components.Constructor;</span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-   </span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+</span>
<a href="#l46.14"></a><span id="l46.14">   // public methods</span>
<a href="#l46.15"></a><span id="l46.15" class="difflineminus">-  </span>
<a href="#l46.16"></a><span id="l46.16" class="difflineplus">+</span>
<a href="#l46.17"></a><span id="l46.17">   this.read = read;</span>
<a href="#l46.18"></a><span id="l46.18" class="difflineminus">-  </span>
<a href="#l46.19"></a><span id="l46.19" class="difflineplus">+</span>
<a href="#l46.20"></a><span id="l46.20">   // public variables</span>
<a href="#l46.21"></a><span id="l46.21" class="difflineminus">-  </span>
<a href="#l46.22"></a><span id="l46.22" class="difflineplus">+</span>
<a href="#l46.23"></a><span id="l46.23">   this.mGoodTokens = 0;</span>
<a href="#l46.24"></a><span id="l46.24">   this.mJunkTokens = 0;</span>
<a href="#l46.25"></a><span id="l46.25">   this.mGoodMessages = 0;</span>
<a href="#l46.26"></a><span id="l46.26">   this.mJunkMessages = 0;</span>
<a href="#l46.27"></a><span id="l46.27">   this.mGoodCounts = new Object;</span>
<a href="#l46.28"></a><span id="l46.28">   this.mJunkCounts = new Object;</span>
<a href="#l46.29"></a><span id="l46.29" class="difflineminus">-  </span>
<a href="#l46.30"></a><span id="l46.30" class="difflineplus">+</span>
<a href="#l46.31"></a><span id="l46.31">   // helper functions</span>
<a href="#l46.32"></a><span id="l46.32"> </span>
<a href="#l46.33"></a><span id="l46.33">   function getJunkStatFile() {</span>
<a href="#l46.34"></a><span id="l46.34">     var sBaseDir = Services.dirsvc.get(&quot;ProfD&quot;, Ci.nsIFile);</span>
<a href="#l46.35"></a><span id="l46.35" class="difflineminus">-    var CFileByFile = new CC(&quot;@mozilla.org/file/local;1&quot;, &quot;nsILocalFile&quot;, &quot;initWithFile&quot;);</span>
<a href="#l46.36"></a><span id="l46.36" class="difflineplus">+    var CFileByFile = new CC(&quot;@mozilla.org/file/local;1&quot;, &quot;nsIFile&quot;, &quot;initWithFile&quot;);</span>
<a href="#l46.37"></a><span id="l46.37">     var oFile = new CFileByFile(sBaseDir);</span>
<a href="#l46.38"></a><span id="l46.38">     oFile.append(&quot;training.dat&quot;);</span>
<a href="#l46.39"></a><span id="l46.39">     return oFile;</span>
<a href="#l46.40"></a><span id="l46.40">   }</span>
<a href="#l46.41"></a><span id="l46.41" class="difflineminus">-  </span>
<a href="#l46.42"></a><span id="l46.42" class="difflineplus">+</span>
<a href="#l46.43"></a><span id="l46.43">   function getBinStream(oFile) {</span>
<a href="#l46.44"></a><span id="l46.44" class="difflineminus">-  </span>
<a href="#l46.45"></a><span id="l46.45" class="difflineplus">+</span>
<a href="#l46.46"></a><span id="l46.46">     if (oFile &amp;&amp; oFile.exists())</span>
<a href="#l46.47"></a><span id="l46.47" class="difflineminus">-    { </span>
<a href="#l46.48"></a><span id="l46.48" class="difflineplus">+    {</span>
<a href="#l46.49"></a><span id="l46.49">       var oUri = Services.io.newFileURI(oFile);</span>
<a href="#l46.50"></a><span id="l46.50">       // open stream (channel)</span>
<a href="#l46.51"></a><span id="l46.51">       let channel = Services.io.newChannelFromURI2(oUri,</span>
<a href="#l46.52"></a><span id="l46.52">                                                    null,</span>
<a href="#l46.53"></a><span id="l46.53">                                                    Services.scriptSecurityManager.getSystemPrincipal(),</span>
<a href="#l46.54"></a><span id="l46.54">                                                    null,</span>
<a href="#l46.55"></a><span id="l46.55">                                                    Ci.nsILoadInfo.SEC_ALLOW_CROSS_ORIGIN_DATA_IS_NULL,</span>
<a href="#l46.56"></a><span id="l46.56">                                                    Ci.nsIContentPolicy.TYPE_OTHER);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/mailnews/extensions/newsblog/content/feed-subscriptions.js</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/mailnews/extensions/newsblog/content/feed-subscriptions.js</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -2248,33 +2248,33 @@ var FeedSubscriptions = {</span>
<a href="#l47.4"></a><span id="l47.4">     return brandBundle ? brandBundle.getString(&quot;brandShortName&quot;) : &quot;&quot;;</span>
<a href="#l47.5"></a><span id="l47.5">   },</span>
<a href="#l47.6"></a><span id="l47.6"> </span>
<a href="#l47.7"></a><span id="l47.7"> /**</span>
<a href="#l47.8"></a><span id="l47.8">  * Export feeds as opml file Save As filepicker function.</span>
<a href="#l47.9"></a><span id="l47.9">  *</span>
<a href="#l47.10"></a><span id="l47.10">  * @param  bool aList - if true, exporting as list; if false (default)</span>
<a href="#l47.11"></a><span id="l47.11">  *                      exporting feeds in folder structure - used for title.</span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">- * @return nsILocalFile or null.</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineplus">+ * @return nsIFile or null.</span>
<a href="#l47.14"></a><span id="l47.14">  */</span>
<a href="#l47.15"></a><span id="l47.15">   opmlPickSaveAsFile: function(aList)</span>
<a href="#l47.16"></a><span id="l47.16">   {</span>
<a href="#l47.17"></a><span id="l47.17">     let accountName = this.mRSSServer.rootFolder.prettyName;</span>
<a href="#l47.18"></a><span id="l47.18">     let fileName = FeedUtils.strings.formatStringFromName(</span>
<a href="#l47.19"></a><span id="l47.19">                      &quot;subscribe-OPMLExportDefaultFileName&quot;,</span>
<a href="#l47.20"></a><span id="l47.20">                      [this.brandShortName, accountName], 2);</span>
<a href="#l47.21"></a><span id="l47.21">     let title = aList ? FeedUtils.strings.formatStringFromName(</span>
<a href="#l47.22"></a><span id="l47.22">                           &quot;subscribe-OPMLExportTitleList&quot;, [accountName], 1) :</span>
<a href="#l47.23"></a><span id="l47.23">                         FeedUtils.strings.formatStringFromName(</span>
<a href="#l47.24"></a><span id="l47.24">                           &quot;subscribe-OPMLExportTitleStruct&quot;, [accountName], 1);</span>
<a href="#l47.25"></a><span id="l47.25">     let fp = Cc[&quot;@mozilla.org/filepicker;1&quot;].createInstance(Ci.nsIFilePicker);</span>
<a href="#l47.26"></a><span id="l47.26"> </span>
<a href="#l47.27"></a><span id="l47.27">     fp.defaultString = fileName;</span>
<a href="#l47.28"></a><span id="l47.28">     fp.defaultExtension = &quot;opml&quot;;</span>
<a href="#l47.29"></a><span id="l47.29" class="difflineminus">-    if (this.opmlLastSaveAsDir &amp;&amp; (this.opmlLastSaveAsDir instanceof Ci.nsILocalFile))</span>
<a href="#l47.30"></a><span id="l47.30" class="difflineplus">+    if (this.opmlLastSaveAsDir &amp;&amp; (this.opmlLastSaveAsDir instanceof Ci.nsIFile))</span>
<a href="#l47.31"></a><span id="l47.31">       fp.displayDirectory = this.opmlLastSaveAsDir;</span>
<a href="#l47.32"></a><span id="l47.32"> </span>
<a href="#l47.33"></a><span id="l47.33">     let opmlFilterText = FeedUtils.strings.GetStringFromName(</span>
<a href="#l47.34"></a><span id="l47.34">                            &quot;subscribe-OPMLExportOPMLFilesFilterText&quot;);</span>
<a href="#l47.35"></a><span id="l47.35">     fp.appendFilter(opmlFilterText, &quot;*.opml&quot;);</span>
<a href="#l47.36"></a><span id="l47.36">     fp.appendFilters(Ci.nsIFilePicker.filterAll);</span>
<a href="#l47.37"></a><span id="l47.37">     fp.filterIndex = 0;</span>
<a href="#l47.38"></a><span id="l47.38">     fp.init(window, title, Ci.nsIFilePicker.modeSave);</span>
<a href="#l47.39"></a><span id="l47.39" class="difflineat">@@ -2286,25 +2286,25 @@ var FeedSubscriptions = {</span>
<a href="#l47.40"></a><span id="l47.40">     }</span>
<a href="#l47.41"></a><span id="l47.41"> </span>
<a href="#l47.42"></a><span id="l47.42">     return null;</span>
<a href="#l47.43"></a><span id="l47.43">   },</span>
<a href="#l47.44"></a><span id="l47.44"> </span>
<a href="#l47.45"></a><span id="l47.45"> /**</span>
<a href="#l47.46"></a><span id="l47.46">  * Import feeds opml file Open filepicker function.</span>
<a href="#l47.47"></a><span id="l47.47">  *</span>
<a href="#l47.48"></a><span id="l47.48" class="difflineminus">- * @return nsILocalFile or null.</span>
<a href="#l47.49"></a><span id="l47.49" class="difflineplus">+ * @return nsIFile or null.</span>
<a href="#l47.50"></a><span id="l47.50">  */</span>
<a href="#l47.51"></a><span id="l47.51">   opmlPickOpenFile: function()</span>
<a href="#l47.52"></a><span id="l47.52">   {</span>
<a href="#l47.53"></a><span id="l47.53">     let title = FeedUtils.strings.GetStringFromName(&quot;subscribe-OPMLImportTitle&quot;);</span>
<a href="#l47.54"></a><span id="l47.54">     let fp = Cc[&quot;@mozilla.org/filepicker;1&quot;].createInstance(Ci.nsIFilePicker);</span>
<a href="#l47.55"></a><span id="l47.55"> </span>
<a href="#l47.56"></a><span id="l47.56">     fp.defaultString = &quot;&quot;;</span>
<a href="#l47.57"></a><span id="l47.57" class="difflineminus">-    if (this.opmlLastOpenDir &amp;&amp; (this.opmlLastOpenDir instanceof Ci.nsILocalFile))</span>
<a href="#l47.58"></a><span id="l47.58" class="difflineplus">+    if (this.opmlLastOpenDir &amp;&amp; (this.opmlLastOpenDir instanceof Ci.nsIFile))</span>
<a href="#l47.59"></a><span id="l47.59">       fp.displayDirectory = this.opmlLastOpenDir;</span>
<a href="#l47.60"></a><span id="l47.60"> </span>
<a href="#l47.61"></a><span id="l47.61">     let opmlFilterText = FeedUtils.strings.GetStringFromName(</span>
<a href="#l47.62"></a><span id="l47.62">                            &quot;subscribe-OPMLExportOPMLFilesFilterText&quot;);</span>
<a href="#l47.63"></a><span id="l47.63">     fp.appendFilter(opmlFilterText, &quot;*.opml&quot;);</span>
<a href="#l47.64"></a><span id="l47.64">     fp.appendFilters(Ci.nsIFilePicker.filterXML);</span>
<a href="#l47.65"></a><span id="l47.65">     fp.appendFilters(Ci.nsIFilePicker.filterAll);</span>
<a href="#l47.66"></a><span id="l47.66">     fp.init(window, title, Ci.nsIFilePicker.modeOpen);</span>
<a href="#l47.67"></a><span id="l47.67" class="difflineat">@@ -2531,17 +2531,17 @@ var FeedSubscriptions = {</span>
<a href="#l47.68"></a><span id="l47.68">       this.clearStatusInfo();</span>
<a href="#l47.69"></a><span id="l47.69">     }</span>
<a href="#l47.70"></a><span id="l47.70">   },</span>
<a href="#l47.71"></a><span id="l47.71"> </span>
<a href="#l47.72"></a><span id="l47.72"> /**</span>
<a href="#l47.73"></a><span id="l47.73">  * Import opml file into a feed account.  Used by the Subscribe dialog and</span>
<a href="#l47.74"></a><span id="l47.74">  * the Import wizard.</span>
<a href="#l47.75"></a><span id="l47.75">  *</span>
<a href="#l47.76"></a><span id="l47.76" class="difflineminus">- * @param  nsILocalFile aFile           - the opml file.</span>
<a href="#l47.77"></a><span id="l47.77" class="difflineplus">+ * @param  nsIFile aFile                - the opml file.</span>
<a href="#l47.78"></a><span id="l47.78">  * @param  nsIMsgIncomingServer aServer - the account server.</span>
<a href="#l47.79"></a><span id="l47.79">  * @param  func aCallback               - callback function.</span>
<a href="#l47.80"></a><span id="l47.80">  *</span>
<a href="#l47.81"></a><span id="l47.81">  * @return bool                         - false if error.</span>
<a href="#l47.82"></a><span id="l47.82">  */</span>
<a href="#l47.83"></a><span id="l47.83">   importOPMLFile: function(aFile, aServer, aCallback)</span>
<a href="#l47.84"></a><span id="l47.84">   {</span>
<a href="#l47.85"></a><span id="l47.85">     if (aServer &amp;&amp; (aServer instanceof Ci.nsIMsgIncomingServer))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/mailnews/local/test/unit/head_maillocal.js</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/mailnews/local/test/unit/head_maillocal.js</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -73,17 +73,17 @@ var gCopyListener =</span>
<a href="#l48.4"></a><span id="l48.4">   }</span>
<a href="#l48.5"></a><span id="l48.5"> };</span>
<a href="#l48.6"></a><span id="l48.6"> </span>
<a href="#l48.7"></a><span id="l48.7"> /**</span>
<a href="#l48.8"></a><span id="l48.8">  * copyFileMessageInLocalFolder</span>
<a href="#l48.9"></a><span id="l48.9">  * A utility wrapper of nsIMsgCopyService.CopyFileMessage to copy a message</span>
<a href="#l48.10"></a><span id="l48.10">  * into local inbox folder.</span>
<a href="#l48.11"></a><span id="l48.11">  *</span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">- * @param aMessageFile     An instance of nsILocalFile to copy.</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineplus">+ * @param aMessageFile     An instance of nsIFile to copy.</span>
<a href="#l48.14"></a><span id="l48.14">  * @param aMessageFlags    Message flags which will be set after message is</span>
<a href="#l48.15"></a><span id="l48.15">  *                         copied</span>
<a href="#l48.16"></a><span id="l48.16">  * @param aMessageKeyword  Keywords which will be set for newly copied</span>
<a href="#l48.17"></a><span id="l48.17">  *                         message</span>
<a href="#l48.18"></a><span id="l48.18">  * @param aMessageWindow   Window for notification callbacks, can be null</span>
<a href="#l48.19"></a><span id="l48.19">  * @param aCallback        Callback function which will be invoked after</span>
<a href="#l48.20"></a><span id="l48.20">  *                         message is copied</span>
<a href="#l48.21"></a><span id="l48.21">  */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/suite/browser/navigator.js</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/suite/browser/navigator.js</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -865,17 +865,17 @@ function GetTypePermFromId(aId)</span>
<a href="#l49.4"></a><span id="l49.4">   var [type, action] = aId.split(&quot;_&quot;);</span>
<a href="#l49.5"></a><span id="l49.5">   var perm = &quot;ACCESS_&quot; + action.toUpperCase();</span>
<a href="#l49.6"></a><span id="l49.6">   return [type, Components.interfaces.nsICookiePermission[perm]];</span>
<a href="#l49.7"></a><span id="l49.7"> }</span>
<a href="#l49.8"></a><span id="l49.8"> </span>
<a href="#l49.9"></a><span id="l49.9"> function CheckForVisibility(aEvent, aNode)</span>
<a href="#l49.10"></a><span id="l49.10"> {</span>
<a href="#l49.11"></a><span id="l49.11">   CheckPermissionsMenu(&quot;popup&quot;, aNode);</span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-  </span>
<a href="#l49.13"></a><span id="l49.13" class="difflineplus">+</span>
<a href="#l49.14"></a><span id="l49.14">   var uri = getBrowser().currentURI;</span>
<a href="#l49.15"></a><span id="l49.15">   var allowBlocking = Services.prefs.getBoolPref(&quot;dom.disable_open_during_load&quot;);</span>
<a href="#l49.16"></a><span id="l49.16"> </span>
<a href="#l49.17"></a><span id="l49.17">   // set enabled state for popup_ menu items.</span>
<a href="#l49.18"></a><span id="l49.18">   var items = aEvent.target.getElementsByAttribute(&quot;name&quot;, &quot;popup&quot;);</span>
<a href="#l49.19"></a><span id="l49.19">   for (let item of items) {</span>
<a href="#l49.20"></a><span id="l49.20">     if (allowBlocking)</span>
<a href="#l49.21"></a><span id="l49.21">       item.removeAttribute(&quot;disabled&quot;);</span>
<a href="#l49.22"></a><span id="l49.22" class="difflineat">@@ -1474,24 +1474,24 @@ function selectFileToOpen(label, prefRoo</span>
<a href="#l49.23"></a><span id="l49.23">   const lastDirPref = prefRoot + &quot;dir&quot;;</span>
<a href="#l49.24"></a><span id="l49.24"> </span>
<a href="#l49.25"></a><span id="l49.25">   // use a pref to remember the filterIndex selected by the user.</span>
<a href="#l49.26"></a><span id="l49.26">   fp.filterIndex = GetIntPref(filterIndexPref, 0);</span>
<a href="#l49.27"></a><span id="l49.27"> </span>
<a href="#l49.28"></a><span id="l49.28">   // use a pref to remember the displayDirectory selected by the user.</span>
<a href="#l49.29"></a><span id="l49.29">   try {</span>
<a href="#l49.30"></a><span id="l49.30">     fp.displayDirectory = Services.prefs.getComplexValue(lastDirPref,</span>
<a href="#l49.31"></a><span id="l49.31" class="difflineminus">-                              Components.interfaces.nsILocalFile);</span>
<a href="#l49.32"></a><span id="l49.32" class="difflineplus">+                              Components.interfaces.nsIFile);</span>
<a href="#l49.33"></a><span id="l49.33">   } catch (ex) {</span>
<a href="#l49.34"></a><span id="l49.34">   }</span>
<a href="#l49.35"></a><span id="l49.35"> </span>
<a href="#l49.36"></a><span id="l49.36">   if (fp.show() == nsIFilePicker.returnOK) {</span>
<a href="#l49.37"></a><span id="l49.37">     Services.prefs.setIntPref(filterIndexPref, fp.filterIndex);</span>
<a href="#l49.38"></a><span id="l49.38">     Services.prefs.setComplexValue(lastDirPref,</span>
<a href="#l49.39"></a><span id="l49.39" class="difflineminus">-                                   Components.interfaces.nsILocalFile,</span>
<a href="#l49.40"></a><span id="l49.40" class="difflineplus">+                                   Components.interfaces.nsIFile,</span>
<a href="#l49.41"></a><span id="l49.41">                                    fp.file.parent);</span>
<a href="#l49.42"></a><span id="l49.42">     fileURL = fp.fileURL;</span>
<a href="#l49.43"></a><span id="l49.43">   }</span>
<a href="#l49.44"></a><span id="l49.44"> </span>
<a href="#l49.45"></a><span id="l49.45">   return fileURL;</span>
<a href="#l49.46"></a><span id="l49.46"> }</span>
<a href="#l49.47"></a><span id="l49.47"> </span>
<a href="#l49.48"></a><span id="l49.48"> function BrowserOpenFileWindow()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/suite/browser/nsBrowserContentHandler.js</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/suite/browser/nsBrowserContentHandler.js</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -363,17 +363,17 @@ var nsBrowserContentHandler = {</span>
<a href="#l50.4"></a><span id="l50.4">     // prevent this handle all url command line flag and set the command line's</span>
<a href="#l50.5"></a><span id="l50.5">     // preventDefault to true to prevent the display of the ui. The initial</span>
<a href="#l50.6"></a><span id="l50.6">     // command line will be retained when nsAppRunner calls LaunchChild though</span>
<a href="#l50.7"></a><span id="l50.7">     // urls launched after the initial launch will be lost.</span>
<a href="#l50.8"></a><span id="l50.8">     try {</span>
<a href="#l50.9"></a><span id="l50.9">       // This will throw when a profile has not been selected.</span>
<a href="#l50.10"></a><span id="l50.10">       var fl = Components.classes[&quot;@mozilla.org/file/directory_service;1&quot;]</span>
<a href="#l50.11"></a><span id="l50.11">                          .getService(Components.interfaces.nsIProperties);</span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-      fl.get(&quot;ProfD&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineplus">+      fl.get(&quot;ProfD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l50.14"></a><span id="l50.14">     } catch (e) {</span>
<a href="#l50.15"></a><span id="l50.15">       cmdLine.preventDefault = true;</span>
<a href="#l50.16"></a><span id="l50.16">       throw Components.results.NS_ERROR_ABORT;</span>
<a href="#l50.17"></a><span id="l50.17">     }</span>
<a href="#l50.18"></a><span id="l50.18"> </span>
<a href="#l50.19"></a><span id="l50.19">     try {</span>
<a href="#l50.20"></a><span id="l50.20">       var urlParam = cmdLine.handleFlagWithParam(&quot;url&quot;, false);</span>
<a href="#l50.21"></a><span id="l50.21">       if (urlParam) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/suite/browser/pageinfo/pageInfo.js</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/suite/browser/pageinfo/pageInfo.js</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -846,17 +846,17 @@ function getSelectedImage(tree)</span>
<a href="#l51.4"></a><span id="l51.4">   // Only works if only one item is selected</span>
<a href="#l51.5"></a><span id="l51.5">   var clickedRow = tree.currentIndex;</span>
<a href="#l51.6"></a><span id="l51.6">   // image-node</span>
<a href="#l51.7"></a><span id="l51.7">   return gImageView.data[clickedRow][COL_IMAGE_NODE];</span>
<a href="#l51.8"></a><span id="l51.8"> }</span>
<a href="#l51.9"></a><span id="l51.9"> </span>
<a href="#l51.10"></a><span id="l51.10"> function selectSaveFolder()</span>
<a href="#l51.11"></a><span id="l51.11"> {</span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-  const nsILocalFile = Components.interfaces.nsILocalFile;</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineplus">+  const nsIFile = Components.interfaces.nsIFile;</span>
<a href="#l51.14"></a><span id="l51.14">   const nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l51.15"></a><span id="l51.15">   var fp = Components.classes[&quot;@mozilla.org/filepicker;1&quot;]</span>
<a href="#l51.16"></a><span id="l51.16">                      .createInstance(nsIFilePicker);</span>
<a href="#l51.17"></a><span id="l51.17"> </span>
<a href="#l51.18"></a><span id="l51.18">   var titleText = gBundle.getString(&quot;mediaSelectFolder&quot;);</span>
<a href="#l51.19"></a><span id="l51.19">   fp.init(window, titleText, nsIFilePicker.modeGetFolder);</span>
<a href="#l51.20"></a><span id="l51.20">   var initialDir = GetLocalFilePref(&quot;browser.download.lastDir&quot;);</span>
<a href="#l51.21"></a><span id="l51.21">   if (!initialDir) {</span>
<a href="#l51.22"></a><span id="l51.22" class="difflineat">@@ -865,17 +865,17 @@ function selectSaveFolder()</span>
<a href="#l51.23"></a><span id="l51.23">     initialDir = dnldMgr.userDownloadsDirectory;</span>
<a href="#l51.24"></a><span id="l51.24">   }</span>
<a href="#l51.25"></a><span id="l51.25">   fp.displayDirectory = initialDir;</span>
<a href="#l51.26"></a><span id="l51.26"> </span>
<a href="#l51.27"></a><span id="l51.27">   fp.appendFilters(nsIFilePicker.filterAll);</span>
<a href="#l51.28"></a><span id="l51.28">   var ret = fp.show();</span>
<a href="#l51.29"></a><span id="l51.29"> </span>
<a href="#l51.30"></a><span id="l51.30">   if (ret == nsIFilePicker.returnOK)</span>
<a href="#l51.31"></a><span id="l51.31" class="difflineminus">-    return fp.file.QueryInterface(nsILocalFile);</span>
<a href="#l51.32"></a><span id="l51.32" class="difflineplus">+    return fp.file.QueryInterface(nsIFile);</span>
<a href="#l51.33"></a><span id="l51.33">   return null;</span>
<a href="#l51.34"></a><span id="l51.34"> }</span>
<a href="#l51.35"></a><span id="l51.35"> </span>
<a href="#l51.36"></a><span id="l51.36"> function saveMedia()</span>
<a href="#l51.37"></a><span id="l51.37"> {</span>
<a href="#l51.38"></a><span id="l51.38">   var tree = document.getElementById(&quot;imagetree&quot;);</span>
<a href="#l51.39"></a><span id="l51.39">   var count = tree.view.selection.count;</span>
<a href="#l51.40"></a><span id="l51.40">   if (count == 1) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/suite/common/bookmarks/bookmarksManager.js</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/suite/common/bookmarks/bookmarksManager.js</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -463,17 +463,17 @@ var PlacesOrganizer = {</span>
<a href="#l52.4"></a><span id="l52.4">                        .createInstance(Components.interfaces.nsIFilePicker);</span>
<a href="#l52.5"></a><span id="l52.5">     fp.init(window, PlacesUIUtils.getString(&quot;bookmarksBackupTitle&quot;),</span>
<a href="#l52.6"></a><span id="l52.6">             Components.interfaces.nsIFilePicker.modeSave);</span>
<a href="#l52.7"></a><span id="l52.7">     fp.appendFilter(PlacesUIUtils.getString(&quot;bookmarksRestoreFilterName&quot;),</span>
<a href="#l52.8"></a><span id="l52.8">                     PlacesUIUtils.getString(&quot;bookmarksRestoreFilterExtension&quot;));</span>
<a href="#l52.9"></a><span id="l52.9"> </span>
<a href="#l52.10"></a><span id="l52.10">     var dirSvc = Components.classes[&quot;@mozilla.org/file/directory_service;1&quot;]</span>
<a href="#l52.11"></a><span id="l52.11">                            .getService(Components.interfaces.nsIProperties);</span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-    var backupsDir = dirSvc.get(&quot;Desk&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineplus">+    var backupsDir = dirSvc.get(&quot;Desk&quot;, Components.interfaces.nsIFile);</span>
<a href="#l52.14"></a><span id="l52.14">     fp.displayDirectory = backupsDir;</span>
<a href="#l52.15"></a><span id="l52.15"> </span>
<a href="#l52.16"></a><span id="l52.16">     fp.defaultString = PlacesBackups.getFilenameForDate();</span>
<a href="#l52.17"></a><span id="l52.17"> </span>
<a href="#l52.18"></a><span id="l52.18">     if (fp.show() != Components.interfaces.nsIFilePicker.returnCancel)</span>
<a href="#l52.19"></a><span id="l52.19">       PlacesBackups.saveBookmarksToJSONFile(fp.file);</span>
<a href="#l52.20"></a><span id="l52.20">   },</span>
<a href="#l52.21"></a><span id="l52.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/suite/common/downloads/downloadmanager.js</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/suite/common/downloads/downloadmanager.js</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -2,17 +2,17 @@</span>
<a href="#l53.4"></a><span id="l53.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l53.5"></a><span id="l53.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l53.6"></a><span id="l53.6"> </span>
<a href="#l53.7"></a><span id="l53.7"> Components.utils.import(&quot;resource://gre/modules/PluralForm.jsm&quot;);</span>
<a href="#l53.8"></a><span id="l53.8"> Components.utils.import(&quot;resource://gre/modules/Downloads.jsm&quot;);</span>
<a href="#l53.9"></a><span id="l53.9"> </span>
<a href="#l53.10"></a><span id="l53.10"> const nsIDownloadManager = Components.interfaces.nsIDownloadManager;</span>
<a href="#l53.11"></a><span id="l53.11"> const nsLocalFile = Components.Constructor(&quot;@mozilla.org/file/local;1&quot;,</span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-                                           Components.interfaces.nsILocalFile,</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineplus">+                                           Components.interfaces.nsIFile,</span>
<a href="#l53.14"></a><span id="l53.14">                                            &quot;initWithPath&quot;);</span>
<a href="#l53.15"></a><span id="l53.15"> </span>
<a href="#l53.16"></a><span id="l53.16"> var gDownloadTree;</span>
<a href="#l53.17"></a><span id="l53.17"> var gDownloadTreeView;</span>
<a href="#l53.18"></a><span id="l53.18"> var gDownloadList;</span>
<a href="#l53.19"></a><span id="l53.19"> var gDownloadStatus;</span>
<a href="#l53.20"></a><span id="l53.20"> var gDownloadListener;</span>
<a href="#l53.21"></a><span id="l53.21"> var gSearchBox;</span>
<a href="#l53.22"></a><span id="l53.22" class="difflineat">@@ -205,17 +205,17 @@ function showDownload(aDownload)</span>
<a href="#l53.23"></a><span id="l53.23">   var file = new nsLocalFile(aDownload.target.path);</span>
<a href="#l53.24"></a><span id="l53.24"> </span>
<a href="#l53.25"></a><span id="l53.25">   try {</span>
<a href="#l53.26"></a><span id="l53.26">     // Show the directory containing the file and select the file</span>
<a href="#l53.27"></a><span id="l53.27">     file.reveal();</span>
<a href="#l53.28"></a><span id="l53.28">   } catch (e) {</span>
<a href="#l53.29"></a><span id="l53.29">     // If reveal fails for some reason (e.g., it's not implemented on unix or</span>
<a href="#l53.30"></a><span id="l53.30">     // the file doesn't exist), try using the parent if we have it.</span>
<a href="#l53.31"></a><span id="l53.31" class="difflineminus">-    var parent = file.parent.QueryInterface(Components.interfaces.nsILocalFile);</span>
<a href="#l53.32"></a><span id="l53.32" class="difflineplus">+    var parent = file.parent.QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l53.33"></a><span id="l53.33"> </span>
<a href="#l53.34"></a><span id="l53.34">     try {</span>
<a href="#l53.35"></a><span id="l53.35">       // &quot;Double click&quot; the parent directory to show where the file should be</span>
<a href="#l53.36"></a><span id="l53.36">       parent.launch();</span>
<a href="#l53.37"></a><span id="l53.37">     } catch (e) {</span>
<a href="#l53.38"></a><span id="l53.38">       // If launch also fails (probably because it's not implemented), let the</span>
<a href="#l53.39"></a><span id="l53.39">       // OS handler try to open the parent</span>
<a href="#l53.40"></a><span id="l53.40">       var uri = Services.io.newFileURI(parent);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/suite/common/downloads/tests/chrome/test_basic_functionality.xul</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/suite/common/downloads/tests/chrome/test_basic_functionality.xul</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -201,17 +201,17 @@ function test_properDownloadData(aWin)</span>
<a href="#l54.4"></a><span id="l54.4">         break;</span>
<a href="#l54.5"></a><span id="l54.5">     }</span>
<a href="#l54.6"></a><span id="l54.6">     is(view.getCellText(i, colState), stateString,</span>
<a href="#l54.7"></a><span id="l54.7">        &quot;Download states match up&quot;);</span>
<a href="#l54.8"></a><span id="l54.8"> </span>
<a href="#l54.9"></a><span id="l54.9">     var filePath = ioSvc.newURI(DownloadData[i].target, null, null)</span>
<a href="#l54.10"></a><span id="l54.10">                         .QueryInterface(Components.interfaces.nsIFileURL)</span>
<a href="#l54.11"></a><span id="l54.11">                         .file.clone()</span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-                        .QueryInterface(Components.interfaces.nsILocalFile)</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineplus">+                        .QueryInterface(Components.interfaces.nsIFile)</span>
<a href="#l54.14"></a><span id="l54.14">                         .path;</span>
<a href="#l54.15"></a><span id="l54.15">     is(statusBar.label, filePath,</span>
<a href="#l54.16"></a><span id="l54.16">        &quot;Download targets match up&quot;);</span>
<a href="#l54.17"></a><span id="l54.17">     is(view.getCellText(i, colSource), DownloadData[i].source,</span>
<a href="#l54.18"></a><span id="l54.18">        &quot;Download sources match up&quot;);</span>
<a href="#l54.19"></a><span id="l54.19">   }</span>
<a href="#l54.20"></a><span id="l54.20"> }</span>
<a href="#l54.21"></a><span id="l54.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1" class="difflineminus">--- a/suite/common/pref/pref-applications.js</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineplus">+++ b/suite/common/pref/pref-applications.js</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineat">@@ -62,17 +62,17 @@ const PREF_HIDE_PLUGINS_WITHOUT_EXTENSIO</span>
<a href="#l55.4"></a><span id="l55.4">  *   checkbox is unchecked, corresponds to when browser.feeds.handler==&quot;ask&quot;)</span>
<a href="#l55.5"></a><span id="l55.5">  *   or more permanently (i.e., the item displayed in the dropdown in Feeds</span>
<a href="#l55.6"></a><span id="l55.6">  *   preferences)</span>
<a href="#l55.7"></a><span id="l55.7">  *</span>
<a href="#l55.8"></a><span id="l55.8">  * browser.feeds.handler.webservice</span>
<a href="#l55.9"></a><span id="l55.9">  * - the URL of the currently selected web service used to read feeds</span>
<a href="#l55.10"></a><span id="l55.10">  *</span>
<a href="#l55.11"></a><span id="l55.11">  * browser.feeds.handlers.application</span>
<a href="#l55.12"></a><span id="l55.12" class="difflineminus">- * - nsILocalFile, stores the current client-side feed reading app if one has</span>
<a href="#l55.13"></a><span id="l55.13" class="difflineplus">+ * - nsIFile, stores the current client-side feed reading app if one has</span>
<a href="#l55.14"></a><span id="l55.14">  *   been chosen</span>
<a href="#l55.15"></a><span id="l55.15">  */</span>
<a href="#l55.16"></a><span id="l55.16"> const PREF_FEED_SELECTED_APP    = &quot;browser.feeds.handlers.application&quot;;</span>
<a href="#l55.17"></a><span id="l55.17"> const PREF_FEED_SELECTED_WEB    = &quot;browser.feeds.handlers.webservice&quot;;</span>
<a href="#l55.18"></a><span id="l55.18"> const PREF_FEED_SELECTED_ACTION = &quot;browser.feeds.handler&quot;;</span>
<a href="#l55.19"></a><span id="l55.19"> const PREF_FEED_SELECTED_READER = &quot;browser.feeds.handler.default&quot;;</span>
<a href="#l55.20"></a><span id="l55.20"> </span>
<a href="#l55.21"></a><span id="l55.21"> const PREF_VIDEO_FEED_SELECTED_APP    = &quot;browser.videoFeeds.handlers.application&quot;;</span>
<a href="#l55.22"></a><span id="l55.22" class="difflineat">@@ -1239,17 +1239,17 @@ var gApplicationsPane = {</span>
<a href="#l55.23"></a><span id="l55.23">     if (aHandlerApp instanceof nsIWebContentHandlerInfo)</span>
<a href="#l55.24"></a><span id="l55.24">       return aHandlerApp.uri;</span>
<a href="#l55.25"></a><span id="l55.25"> </span>
<a href="#l55.26"></a><span id="l55.26">     return false;</span>
<a href="#l55.27"></a><span id="l55.27">   },</span>
<a href="#l55.28"></a><span id="l55.28"> </span>
<a href="#l55.29"></a><span id="l55.29">   _isValidHandlerExecutable: function(aExecutable) {</span>
<a href="#l55.30"></a><span id="l55.30">     var file = Services.dirsvc.get(&quot;XREExeF&quot;,</span>
<a href="#l55.31"></a><span id="l55.31" class="difflineminus">-                                   Components.interfaces.nsILocalFile);</span>
<a href="#l55.32"></a><span id="l55.32" class="difflineplus">+                                   Components.interfaces.nsIFile);</span>
<a href="#l55.33"></a><span id="l55.33">     return aExecutable &amp;&amp;</span>
<a href="#l55.34"></a><span id="l55.34">            aExecutable.exists() &amp;&amp;</span>
<a href="#l55.35"></a><span id="l55.35">            aExecutable.isExecutable() &amp;&amp;</span>
<a href="#l55.36"></a><span id="l55.36">            aExecutable.leafName != file.leafName;</span>
<a href="#l55.37"></a><span id="l55.37">   },</span>
<a href="#l55.38"></a><span id="l55.38"> </span>
<a href="#l55.39"></a><span id="l55.39">   /**</span>
<a href="#l55.40"></a><span id="l55.40">    * Rebuild the actions menu for the selected entry. Gets called by</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l56.1"></a><span id="l56.1" class="difflineminus">--- a/suite/common/src/nsSessionStartup.js</span>
<a href="#l56.2"></a><span id="l56.2" class="difflineplus">+++ b/suite/common/src/nsSessionStartup.js</span>
<a href="#l56.3"></a><span id="l56.3" class="difflineat">@@ -53,17 +53,17 @@ SessionStartup.prototype = {</span>
<a href="#l56.4"></a><span id="l56.4"> /* ........ Global Event Handlers .............. */</span>
<a href="#l56.5"></a><span id="l56.5"> </span>
<a href="#l56.6"></a><span id="l56.6">   /**</span>
<a href="#l56.7"></a><span id="l56.7">    * Initialize the component</span>
<a href="#l56.8"></a><span id="l56.8">    */</span>
<a href="#l56.9"></a><span id="l56.9">   init: function sss_init() {</span>
<a href="#l56.10"></a><span id="l56.10">     // get file references</span>
<a href="#l56.11"></a><span id="l56.11">     let sessionFile = Services.dirsvc.get(&quot;ProfD&quot;,</span>
<a href="#l56.12"></a><span id="l56.12" class="difflineminus">-                                          Components.interfaces.nsILocalFile);</span>
<a href="#l56.13"></a><span id="l56.13" class="difflineplus">+                                          Components.interfaces.nsIFile);</span>
<a href="#l56.14"></a><span id="l56.14">     sessionFile.append(&quot;sessionstore.json&quot;);</span>
<a href="#l56.15"></a><span id="l56.15"> </span>
<a href="#l56.16"></a><span id="l56.16">     let doResumeSession = Services.prefs.getBoolPref(&quot;browser.sessionstore.resume_session_once&quot;) ||</span>
<a href="#l56.17"></a><span id="l56.17">                           Services.prefs.getIntPref(&quot;browser.startup.page&quot;) == 3;</span>
<a href="#l56.18"></a><span id="l56.18"> </span>
<a href="#l56.19"></a><span id="l56.19">     var resumeFromCrash = Services.prefs.getBoolPref(&quot;browser.sessionstore.resume_from_crash&quot;);</span>
<a href="#l56.20"></a><span id="l56.20"> </span>
<a href="#l56.21"></a><span id="l56.21">     // only continue if the session file exists</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l57.1"></a><span id="l57.1" class="difflineminus">--- a/suite/common/src/nsSessionStore.js</span>
<a href="#l57.2"></a><span id="l57.2" class="difflineplus">+++ b/suite/common/src/nsSessionStore.js</span>
<a href="#l57.3"></a><span id="l57.3" class="difflineat">@@ -220,17 +220,17 @@ SessionStoreService.prototype = {</span>
<a href="#l57.4"></a><span id="l57.4">       this._prefBranch.getIntPref(&quot;sessionstore.max_concurrent_tabs&quot;);</span>
<a href="#l57.5"></a><span id="l57.5">     this._prefBranch.addObserver(&quot;sessionstore.max_concurrent_tabs&quot;, this, true);</span>
<a href="#l57.6"></a><span id="l57.6"> </span>
<a href="#l57.7"></a><span id="l57.7">     // Make sure gRestoreTabsProgressListener has a reference to sessionstore</span>
<a href="#l57.8"></a><span id="l57.8">     // so that it can make calls back in</span>
<a href="#l57.9"></a><span id="l57.9">     gRestoreTabsProgressListener.ss = this;</span>
<a href="#l57.10"></a><span id="l57.10"> </span>
<a href="#l57.11"></a><span id="l57.11">     // get file references</span>
<a href="#l57.12"></a><span id="l57.12" class="difflineminus">-    this._sessionFile = Services.dirsvc.get(&quot;ProfD&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l57.13"></a><span id="l57.13" class="difflineplus">+    this._sessionFile = Services.dirsvc.get(&quot;ProfD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l57.14"></a><span id="l57.14">     this._sessionFileBackup = this._sessionFile.clone();</span>
<a href="#l57.15"></a><span id="l57.15">     this._sessionFile.append(&quot;sessionstore.json&quot;);</span>
<a href="#l57.16"></a><span id="l57.16">     this._sessionFileBackup.append(&quot;sessionstore.bak&quot;);</span>
<a href="#l57.17"></a><span id="l57.17"> </span>
<a href="#l57.18"></a><span id="l57.18">     // get string containing session state</span>
<a href="#l57.19"></a><span id="l57.19">     var ss = Components.classes[&quot;@mozilla.org/suite/sessionstartup;1&quot;]</span>
<a href="#l57.20"></a><span id="l57.20">                        .getService(Components.interfaces.nsISessionStartup);</span>
<a href="#l57.21"></a><span id="l57.21">     try {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l58.1"></a><span id="l58.1" class="difflineminus">--- a/suite/common/src/nsSuiteGlue.js</span>
<a href="#l58.2"></a><span id="l58.2" class="difflineplus">+++ b/suite/common/src/nsSuiteGlue.js</span>
<a href="#l58.3"></a><span id="l58.3" class="difflineat">@@ -445,17 +445,17 @@ SuiteGlue.prototype = {</span>
<a href="#l58.4"></a><span id="l58.4">     if (currentUIVersion &lt; 1) {</span>
<a href="#l58.5"></a><span id="l58.5">       // Run any migrations due prior to 2.49.</span>
<a href="#l58.6"></a><span id="l58.6">       this._updatePrefs();</span>
<a href="#l58.7"></a><span id="l58.7">       this._migrateDownloadPrefs();</span>
<a href="#l58.8"></a><span id="l58.8"> </span>
<a href="#l58.9"></a><span id="l58.9">       // Migrate remote content exceptions for email addresses which are</span>
<a href="#l58.10"></a><span id="l58.10">       // encoded as chrome URIs.</span>
<a href="#l58.11"></a><span id="l58.11">       let permissionsDB =</span>
<a href="#l58.12"></a><span id="l58.12" class="difflineminus">-        Services.dirsvc.get(&quot;ProfD&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l58.13"></a><span id="l58.13" class="difflineplus">+        Services.dirsvc.get(&quot;ProfD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l58.14"></a><span id="l58.14">       permissionsDB.append(&quot;permissions.sqlite&quot;);</span>
<a href="#l58.15"></a><span id="l58.15">       let db = Services.storage.openDatabase(permissionsDB);</span>
<a href="#l58.16"></a><span id="l58.16"> </span>
<a href="#l58.17"></a><span id="l58.17">       try {</span>
<a href="#l58.18"></a><span id="l58.18">         let statement = db.createStatement(</span>
<a href="#l58.19"></a><span id="l58.19">           &quot;select origin, permission from moz_perms where &quot; +</span>
<a href="#l58.20"></a><span id="l58.20">           // Avoid 'like' here which needs to be escaped.</span>
<a href="#l58.21"></a><span id="l58.21">           &quot;  substr(origin, 1, 28) = 'chrome://messenger/content/?';&quot;);</span>
<a href="#l58.22"></a><span id="l58.22" class="difflineat">@@ -508,17 +508,17 @@ SuiteGlue.prototype = {</span>
<a href="#l58.23"></a><span id="l58.23">   },</span>
<a href="#l58.24"></a><span id="l58.24"> </span>
<a href="#l58.25"></a><span id="l58.25">   // Copies additional profile files from the default profile tho the current profile.</span>
<a href="#l58.26"></a><span id="l58.26">   // Only files not covered by the regular profile creation process.</span>
<a href="#l58.27"></a><span id="l58.27">   // Currently only the userchrome examples.</span>
<a href="#l58.28"></a><span id="l58.28">   _copyDefaultProfileFiles: function()</span>
<a href="#l58.29"></a><span id="l58.29">   {</span>
<a href="#l58.30"></a><span id="l58.30">     // Copy default chrome example files if they do not exist in the current profile.</span>
<a href="#l58.31"></a><span id="l58.31" class="difflineminus">-    var profileDir = Services.dirsvc.get(&quot;ProfD&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l58.32"></a><span id="l58.32" class="difflineplus">+    var profileDir = Services.dirsvc.get(&quot;ProfD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l58.33"></a><span id="l58.33">     profileDir.append(&quot;chrome&quot;);</span>
<a href="#l58.34"></a><span id="l58.34"> </span>
<a href="#l58.35"></a><span id="l58.35">     // The chrome directory in the current/new profile already exists so no copying.</span>
<a href="#l58.36"></a><span id="l58.36">     if (profileDir.exists())</span>
<a href="#l58.37"></a><span id="l58.37">       return;</span>
<a href="#l58.38"></a><span id="l58.38"> </span>
<a href="#l58.39"></a><span id="l58.39">     let defaultProfileDir = Services.dirsvc.get(&quot;DefRt&quot;,</span>
<a href="#l58.40"></a><span id="l58.40">                                                 Components.interfaces.nsIFile);</span>
<a href="#l58.41"></a><span id="l58.41" class="difflineat">@@ -965,17 +965,17 @@ SuiteGlue.prototype = {</span>
<a href="#l58.42"></a><span id="l58.42">         importBookmarks = false;</span>
<a href="#l58.43"></a><span id="l58.43">       }</span>
<a href="#l58.44"></a><span id="l58.44">       else if (dbStatus == PlacesUtils.history.DATABASE_STATUS_OK) {</span>
<a href="#l58.45"></a><span id="l58.45">         importBookmarks = false;</span>
<a href="#l58.46"></a><span id="l58.46">       }</span>
<a href="#l58.47"></a><span id="l58.47">       else {</span>
<a href="#l58.48"></a><span id="l58.48">         // We have created a new database but we don't have any backup available.</span>
<a href="#l58.49"></a><span id="l58.49">         importBookmarks = true;</span>
<a href="#l58.50"></a><span id="l58.50" class="difflineminus">-        var bookmarksHTMLFile = Services.dirsvc.get(&quot;BMarks&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l58.51"></a><span id="l58.51" class="difflineplus">+        var bookmarksHTMLFile = Services.dirsvc.get(&quot;BMarks&quot;, Components.interfaces.nsIFile);</span>
<a href="#l58.52"></a><span id="l58.52">         if (bookmarksHTMLFile.exists()) {</span>
<a href="#l58.53"></a><span id="l58.53">           // If bookmarks.html is available in current profile import it...</span>
<a href="#l58.54"></a><span id="l58.54">           importBookmarksHTML = true;</span>
<a href="#l58.55"></a><span id="l58.55">         }</span>
<a href="#l58.56"></a><span id="l58.56">         else {</span>
<a href="#l58.57"></a><span id="l58.57">           // ...otherwise we will restore defaults.</span>
<a href="#l58.58"></a><span id="l58.58">           restoreDefaultBookmarks = true;</span>
<a href="#l58.59"></a><span id="l58.59">         }</span>
<a href="#l58.60"></a><span id="l58.60" class="difflineat">@@ -1007,17 +1007,17 @@ SuiteGlue.prototype = {</span>
<a href="#l58.61"></a><span id="l58.61"> </span>
<a href="#l58.62"></a><span id="l58.62">       var bookmarksURI = null;</span>
<a href="#l58.63"></a><span id="l58.63">       if (restoreDefaultBookmarks) {</span>
<a href="#l58.64"></a><span id="l58.64">         // User wants to restore bookmarks.html file from default profile folder.</span>
<a href="#l58.65"></a><span id="l58.65">         bookmarksURI = Services.io.newURI(&quot;resource:///defaults/profile/bookmarks.html&quot;);</span>
<a href="#l58.66"></a><span id="l58.66">       }</span>
<a href="#l58.67"></a><span id="l58.67">       else {</span>
<a href="#l58.68"></a><span id="l58.68">         // Get bookmarks.html file location.</span>
<a href="#l58.69"></a><span id="l58.69" class="difflineminus">-        var bookmarksFile = Services.dirsvc.get(&quot;BMarks&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l58.70"></a><span id="l58.70" class="difflineplus">+        var bookmarksFile = Services.dirsvc.get(&quot;BMarks&quot;, Components.interfaces.nsIFile);</span>
<a href="#l58.71"></a><span id="l58.71">         if (bookmarksFile.exists())</span>
<a href="#l58.72"></a><span id="l58.72">           bookmarksURI = Services.io.newFileURI(bookmarksFile);</span>
<a href="#l58.73"></a><span id="l58.73">       }</span>
<a href="#l58.74"></a><span id="l58.74"> </span>
<a href="#l58.75"></a><span id="l58.75">       if (bookmarksURI) {</span>
<a href="#l58.76"></a><span id="l58.76">         // Import from bookmarks.html file.</span>
<a href="#l58.77"></a><span id="l58.77">         try {</span>
<a href="#l58.78"></a><span id="l58.78">           BookmarkHTMLUtils.importFromURL(bookmarksURI.spec, true).then(null,</span>
<a href="#l58.79"></a><span id="l58.79" class="difflineat">@@ -1074,17 +1074,17 @@ SuiteGlue.prototype = {</span>
<a href="#l58.80"></a><span id="l58.80">       if (Services.prefs.getBoolPref(&quot;browser.bookmarks.autoExportHTML&quot;)) {</span>
<a href="#l58.81"></a><span id="l58.81">         // Exceptionally, since this is a non-default setting and HTML format is</span>
<a href="#l58.82"></a><span id="l58.82">         // discouraged in favor of the JSON backups, we spin the event loop on</span>
<a href="#l58.83"></a><span id="l58.83">         // shutdown, to wait for the export to finish.  We cannot safely spin</span>
<a href="#l58.84"></a><span id="l58.84">         // the event loop on shutdown until we include a watchdog to prevent</span>
<a href="#l58.85"></a><span id="l58.85">         // potential hangs (bug 518683).  The asynchronous shutdown operations</span>
<a href="#l58.86"></a><span id="l58.86">         // will then be handled by a shutdown service (bug 435058).</span>
<a href="#l58.87"></a><span id="l58.87">         var shutdownComplete = false;</span>
<a href="#l58.88"></a><span id="l58.88" class="difflineminus">-        BookmarkHTMLUtils.exportToFile(Services.dirsvc.get(&quot;BMarks&quot;, Components.interfaces.nsILocalFile)).then(</span>
<a href="#l58.89"></a><span id="l58.89" class="difflineplus">+        BookmarkHTMLUtils.exportToFile(Services.dirsvc.get(&quot;BMarks&quot;, Components.interfaces.nsIFile)).then(</span>
<a href="#l58.90"></a><span id="l58.90">           function onSuccess() {</span>
<a href="#l58.91"></a><span id="l58.91">             shutdownComplete = true;</span>
<a href="#l58.92"></a><span id="l58.92">           },</span>
<a href="#l58.93"></a><span id="l58.93">           function onFailure() {</span>
<a href="#l58.94"></a><span id="l58.94">             // There is no point in reporting errors since we are shutting down.</span>
<a href="#l58.95"></a><span id="l58.95">             shutdownComplete = true;</span>
<a href="#l58.96"></a><span id="l58.96">           }</span>
<a href="#l58.97"></a><span id="l58.97">         );</span>
<a href="#l58.98"></a><span id="l58.98" class="difflineat">@@ -1168,23 +1168,23 @@ SuiteGlue.prototype = {</span>
<a href="#l58.99"></a><span id="l58.99">   {</span>
<a href="#l58.100"></a><span id="l58.100">     // Migration of download-manager preferences</span>
<a href="#l58.101"></a><span id="l58.101">     if (Services.prefs.getPrefType(&quot;browser.download.dir&quot;) == Services.prefs.PREF_INVALID ||</span>
<a href="#l58.102"></a><span id="l58.102">         Services.prefs.getPrefType(&quot;browser.download.lastDir&quot;) != Services.prefs.PREF_INVALID)</span>
<a href="#l58.103"></a><span id="l58.103">       return; //Do nothing if .dir does not exist, or if it exists and lastDir does not</span>
<a href="#l58.104"></a><span id="l58.104"> </span>
<a href="#l58.105"></a><span id="l58.105">     try {</span>
<a href="#l58.106"></a><span id="l58.106">       Services.prefs.setComplexValue(&quot;browser.download.lastDir&quot;,</span>
<a href="#l58.107"></a><span id="l58.107" class="difflineminus">-                                     Components.interfaces.nsILocalFile,</span>
<a href="#l58.108"></a><span id="l58.108" class="difflineplus">+                                     Components.interfaces.nsIFile,</span>
<a href="#l58.109"></a><span id="l58.109">                                      Services.prefs.getComplexValue(&quot;browser.download.dir&quot;,</span>
<a href="#l58.110"></a><span id="l58.110" class="difflineminus">-                                                                    Components.interfaces.nsILocalFile));</span>
<a href="#l58.111"></a><span id="l58.111" class="difflineplus">+                                                                    Components.interfaces.nsIFile));</span>
<a href="#l58.112"></a><span id="l58.112">     } catch (ex) {</span>
<a href="#l58.113"></a><span id="l58.113">       // Ensure that even if we don't end up migrating to a lastDir that we</span>
<a href="#l58.114"></a><span id="l58.114">       // don't attempt another update. This will throw when QI'ed to</span>
<a href="#l58.115"></a><span id="l58.115" class="difflineminus">-      // nsILocalFile, but it does fallback gracefully.</span>
<a href="#l58.116"></a><span id="l58.116" class="difflineplus">+      // nsIFile, but it does fallback gracefully.</span>
<a href="#l58.117"></a><span id="l58.117">       Services.prefs.setCharPref(&quot;browser.download.lastDir&quot;, &quot;&quot;);</span>
<a href="#l58.118"></a><span id="l58.118">     }</span>
<a href="#l58.119"></a><span id="l58.119"> </span>
<a href="#l58.120"></a><span id="l58.120">     try {</span>
<a href="#l58.121"></a><span id="l58.121">       Services.prefs.setBoolPref(&quot;browser.download.useDownloadDir&quot;,</span>
<a href="#l58.122"></a><span id="l58.122">                                  Services.prefs.getBoolPref(&quot;browser.download.autoDownload&quot;));</span>
<a href="#l58.123"></a><span id="l58.123">     } catch (ex) {}</span>
<a href="#l58.124"></a><span id="l58.124"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l59.1"></a><span id="l59.1" class="difflineminus">--- a/suite/common/tests/browser/browser_346337.js</span>
<a href="#l59.2"></a><span id="l59.2" class="difflineplus">+++ b/suite/common/tests/browser/browser_346337.js</span>
<a href="#l59.3"></a><span id="l59.3" class="difflineat">@@ -2,22 +2,22 @@</span>
<a href="#l59.4"></a><span id="l59.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l59.5"></a><span id="l59.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l59.6"></a><span id="l59.6"> </span>
<a href="#l59.7"></a><span id="l59.7"> function test() {</span>
<a href="#l59.8"></a><span id="l59.8">   /** Test for Bug 346337 **/</span>
<a href="#l59.9"></a><span id="l59.9"> </span>
<a href="#l59.10"></a><span id="l59.10">   var file = Components.classes[&quot;@mozilla.org/file/directory_service;1&quot;]</span>
<a href="#l59.11"></a><span id="l59.11">                .getService(Components.interfaces.nsIProperties)</span>
<a href="#l59.12"></a><span id="l59.12" class="difflineminus">-               .get(&quot;TmpD&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l59.13"></a><span id="l59.13" class="difflineplus">+               .get(&quot;TmpD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l59.14"></a><span id="l59.14">   file.append(&quot;346337_test1.file&quot;);</span>
<a href="#l59.15"></a><span id="l59.15">   let filePath1 = file.path;</span>
<a href="#l59.16"></a><span id="l59.16">   file = Components.classes[&quot;@mozilla.org/file/directory_service;1&quot;]</span>
<a href="#l59.17"></a><span id="l59.17">              .getService(Components.interfaces.nsIProperties)</span>
<a href="#l59.18"></a><span id="l59.18" class="difflineminus">-             .get(&quot;TmpD&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l59.19"></a><span id="l59.19" class="difflineplus">+             .get(&quot;TmpD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l59.20"></a><span id="l59.20">   file.append(&quot;346337_test2.file&quot;);</span>
<a href="#l59.21"></a><span id="l59.21">   let filePath2 = file.path;</span>
<a href="#l59.22"></a><span id="l59.22"> </span>
<a href="#l59.23"></a><span id="l59.23">   let fieldList = {</span>
<a href="#l59.24"></a><span id="l59.24">     &quot;//input[@name='input']&quot;:     Date.now().toString(),</span>
<a href="#l59.25"></a><span id="l59.25">     &quot;//input[@name='spaced 1']&quot;:  Math.random().toString(),</span>
<a href="#l59.26"></a><span id="l59.26">     &quot;//input[3]&quot;:                 &quot;three&quot;,</span>
<a href="#l59.27"></a><span id="l59.27">     &quot;//input[@type='checkbox']&quot;:  true,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l60.1"></a><span id="l60.1" class="difflineminus">--- a/suite/common/tests/browser/browser_466937.js</span>
<a href="#l60.2"></a><span id="l60.2" class="difflineplus">+++ b/suite/common/tests/browser/browser_466937.js</span>
<a href="#l60.3"></a><span id="l60.3" class="difflineat">@@ -4,17 +4,17 @@</span>
<a href="#l60.4"></a><span id="l60.4"> </span>
<a href="#l60.5"></a><span id="l60.5"> function test() {</span>
<a href="#l60.6"></a><span id="l60.6">   /** Test for Bug 466937 **/</span>
<a href="#l60.7"></a><span id="l60.7"> </span>
<a href="#l60.8"></a><span id="l60.8">   waitForExplicitFinish();</span>
<a href="#l60.9"></a><span id="l60.9"> </span>
<a href="#l60.10"></a><span id="l60.10">   var file = Components.classes[&quot;@mozilla.org/file/directory_service;1&quot;]</span>
<a href="#l60.11"></a><span id="l60.11">              .getService(Components.interfaces.nsIProperties)</span>
<a href="#l60.12"></a><span id="l60.12" class="difflineminus">-             .get(&quot;TmpD&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l60.13"></a><span id="l60.13" class="difflineplus">+             .get(&quot;TmpD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l60.14"></a><span id="l60.14">   file.append(&quot;466937_test.file&quot;);</span>
<a href="#l60.15"></a><span id="l60.15">   let testPath = file.path;</span>
<a href="#l60.16"></a><span id="l60.16"> </span>
<a href="#l60.17"></a><span id="l60.17">   let testURL = &quot;http://mochi.test:8888/browser/&quot; +</span>
<a href="#l60.18"></a><span id="l60.18">     &quot;suite/common/tests/browser/browser_466937_sample.html&quot;;</span>
<a href="#l60.19"></a><span id="l60.19"> </span>
<a href="#l60.20"></a><span id="l60.20">   let tab = getBrowser().addTab(testURL);</span>
<a href="#l60.21"></a><span id="l60.21">   let window = tab.ownerDocument.defaultView;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l61.1"></a><span id="l61.1" class="difflineminus">--- a/suite/common/utilityOverlay.js</span>
<a href="#l61.2"></a><span id="l61.2" class="difflineplus">+++ b/suite/common/utilityOverlay.js</span>
<a href="#l61.3"></a><span id="l61.3" class="difflineat">@@ -167,27 +167,27 @@ function GetLocalizedStringPref(aPrefNam</span>
<a href="#l61.4"></a><span id="l61.4">   }</span>
<a href="#l61.5"></a><span id="l61.5">   return aDefaultValue;</span>
<a href="#l61.6"></a><span id="l61.6"> }</span>
<a href="#l61.7"></a><span id="l61.7"> </span>
<a href="#l61.8"></a><span id="l61.8"> function GetLocalFilePref(aName)</span>
<a href="#l61.9"></a><span id="l61.9"> {</span>
<a href="#l61.10"></a><span id="l61.10">   try {</span>
<a href="#l61.11"></a><span id="l61.11">     return Services.prefs.getComplexValue(aName,</span>
<a href="#l61.12"></a><span id="l61.12" class="difflineminus">-               Components.interfaces.nsILocalFile);</span>
<a href="#l61.13"></a><span id="l61.13" class="difflineplus">+               Components.interfaces.nsIFile);</span>
<a href="#l61.14"></a><span id="l61.14">   } catch (e) {}</span>
<a href="#l61.15"></a><span id="l61.15">   return null;</span>
<a href="#l61.16"></a><span id="l61.16"> }</span>
<a href="#l61.17"></a><span id="l61.17"> </span>
<a href="#l61.18"></a><span id="l61.18"> /**</span>
<a href="#l61.19"></a><span id="l61.19">   * Returns the Desktop folder.</span>
<a href="#l61.20"></a><span id="l61.20">   */</span>
<a href="#l61.21"></a><span id="l61.21"> function GetDesktopFolder()</span>
<a href="#l61.22"></a><span id="l61.22"> {</span>
<a href="#l61.23"></a><span id="l61.23" class="difflineminus">-  return Services.dirsvc.get(&quot;Desk&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l61.24"></a><span id="l61.24" class="difflineplus">+  return Services.dirsvc.get(&quot;Desk&quot;, Components.interfaces.nsIFile);</span>
<a href="#l61.25"></a><span id="l61.25"> }</span>
<a href="#l61.26"></a><span id="l61.26"> </span>
<a href="#l61.27"></a><span id="l61.27"> /**</span>
<a href="#l61.28"></a><span id="l61.28">   * Returns the relevant nsIFile directory.</span>
<a href="#l61.29"></a><span id="l61.29">   */</span>
<a href="#l61.30"></a><span id="l61.30"> function GetSpecialDirectory(aName)</span>
<a href="#l61.31"></a><span id="l61.31"> {</span>
<a href="#l61.32"></a><span id="l61.32">   return Services.dirsvc.get(aName, Components.interfaces.nsIFile);</span>
<a href="#l61.33"></a><span id="l61.33" class="difflineat">@@ -1824,17 +1824,17 @@ function GetFileFromString(aString)</span>
<a href="#l61.34"></a><span id="l61.34">   // If empty string just return null.</span>
<a href="#l61.35"></a><span id="l61.35">   if (!aString)</span>
<a href="#l61.36"></a><span id="l61.36">     return null;</span>
<a href="#l61.37"></a><span id="l61.37"> </span>
<a href="#l61.38"></a><span id="l61.38">   let commandLine = Components.classes[&quot;@mozilla.org/toolkit/command-line;1&quot;]</span>
<a href="#l61.39"></a><span id="l61.39">                               .createInstance(Components.interfaces.nsICommandLine);</span>
<a href="#l61.40"></a><span id="l61.40">   let uri = commandLine.resolveURI(aString);</span>
<a href="#l61.41"></a><span id="l61.41">   return uri instanceof Components.interfaces.nsIFileURL ?</span>
<a href="#l61.42"></a><span id="l61.42" class="difflineminus">-         uri.file.QueryInterface(Components.interfaces.nsILocalFile) : null;</span>
<a href="#l61.43"></a><span id="l61.43" class="difflineplus">+         uri.file.QueryInterface(Components.interfaces.nsIFile) : null;</span>
<a href="#l61.44"></a><span id="l61.44"> }</span>
<a href="#l61.45"></a><span id="l61.45"> </span>
<a href="#l61.46"></a><span id="l61.46"> function CopyImage()</span>
<a href="#l61.47"></a><span id="l61.47"> {</span>
<a href="#l61.48"></a><span id="l61.48">   var param = Components.classes[&quot;@mozilla.org/embedcomp/command-params;1&quot;]</span>
<a href="#l61.49"></a><span id="l61.49">                         .createInstance(Components.interfaces.nsICommandParams);</span>
<a href="#l61.50"></a><span id="l61.50">   param.setLongValue(&quot;imageCopy&quot;,</span>
<a href="#l61.51"></a><span id="l61.51">                      Components.interfaces.nsIContentViewerEdit.COPY_IMAGE_ALL);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l62.1"></a><span id="l62.1" class="difflineminus">--- a/suite/feeds/src/FeedConverter.js</span>
<a href="#l62.2"></a><span id="l62.2" class="difflineplus">+++ b/suite/feeds/src/FeedConverter.js</span>
<a href="#l62.3"></a><span id="l62.3" class="difflineat">@@ -357,17 +357,17 @@ FeedResultService.prototype = {</span>
<a href="#l62.4"></a><span id="l62.4">   addToClientReader: function addToClientReader(spec, title, subtitle, feedType) {</span>
<a href="#l62.5"></a><span id="l62.5">     var handler = safeGetCharPref(getPrefActionForType(feedType), &quot;reader&quot;);</span>
<a href="#l62.6"></a><span id="l62.6">     if (handler == &quot;ask&quot; || handler == &quot;reader&quot;)</span>
<a href="#l62.7"></a><span id="l62.7">       handler = safeGetCharPref(getPrefReaderForType(feedType), &quot;messenger&quot;);</span>
<a href="#l62.8"></a><span id="l62.8"> </span>
<a href="#l62.9"></a><span id="l62.9">     switch (handler) {</span>
<a href="#l62.10"></a><span id="l62.10">     case &quot;client&quot;:</span>
<a href="#l62.11"></a><span id="l62.11">       var clientApp = Services.prefs.getComplexValue(getPrefAppForType(feedType),</span>
<a href="#l62.12"></a><span id="l62.12" class="difflineminus">-                                                     Components.interfaces.nsILocalFile);</span>
<a href="#l62.13"></a><span id="l62.13" class="difflineplus">+                                                     Components.interfaces.nsIFile);</span>
<a href="#l62.14"></a><span id="l62.14"> </span>
<a href="#l62.15"></a><span id="l62.15">       // For the benefit of applications that might know how to deal with more</span>
<a href="#l62.16"></a><span id="l62.16">       // URLs than just feeds, send feed: URLs in the following format:</span>
<a href="#l62.17"></a><span id="l62.17">       //</span>
<a href="#l62.18"></a><span id="l62.18">       // http urls: replace scheme with feed, e.g.</span>
<a href="#l62.19"></a><span id="l62.19">       // http://foo.com/index.rdf -&gt; feed://foo.com/index.rdf</span>
<a href="#l62.20"></a><span id="l62.20">       // other urls: prepend feed: scheme, e.g.</span>
<a href="#l62.21"></a><span id="l62.21">       // https://foo.com/index.rdf -&gt; feed:https://foo.com/index.rdf</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l63.1"></a><span id="l63.1" class="difflineminus">--- a/suite/feeds/src/FeedWriter.js</span>
<a href="#l63.2"></a><span id="l63.2" class="difflineplus">+++ b/suite/feeds/src/FeedWriter.js</span>
<a href="#l63.3"></a><span id="l63.3" class="difflineat">@@ -650,17 +650,17 @@ FeedWriter.prototype = {</span>
<a href="#l63.4"></a><span id="l63.4">       fp.init(this._window,</span>
<a href="#l63.5"></a><span id="l63.5">               this._getString(&quot;chooseApplicationDialogTitle&quot;),</span>
<a href="#l63.6"></a><span id="l63.6">               Components.interfaces.nsIFilePicker.modeOpen);</span>
<a href="#l63.7"></a><span id="l63.7">       fp.appendFilters(Components.interfaces.nsIFilePicker.filterApps);</span>
<a href="#l63.8"></a><span id="l63.8"> </span>
<a href="#l63.9"></a><span id="l63.9">       if (fp.show() == Components.interfaces.nsIFilePicker.returnOK) {</span>
<a href="#l63.10"></a><span id="l63.10">         this._selectedApp = fp.file;</span>
<a href="#l63.11"></a><span id="l63.11">         if (this._selectedApp) {</span>
<a href="#l63.12"></a><span id="l63.12" class="difflineminus">-          var file = Services.dirsvc.get(&quot;XREExeF&quot;, Components.interfaces.nsILocalFile);</span>
<a href="#l63.13"></a><span id="l63.13" class="difflineplus">+          var file = Services.dirsvc.get(&quot;XREExeF&quot;, Components.interfaces.nsIFile);</span>
<a href="#l63.14"></a><span id="l63.14">           if (fp.file.leafName != file.leafName) {</span>
<a href="#l63.15"></a><span id="l63.15">             this._initMenuItemWithFile(this._selectedAppMenuItem,</span>
<a href="#l63.16"></a><span id="l63.16">                                        this._selectedApp);</span>
<a href="#l63.17"></a><span id="l63.17"> </span>
<a href="#l63.18"></a><span id="l63.18">             // Show and select the selected application menuitem</span>
<a href="#l63.19"></a><span id="l63.19">             this._selectedAppMenuItem.hidden = false;</span>
<a href="#l63.20"></a><span id="l63.20">             this._selectedAppMenuItem.doCommand();</span>
<a href="#l63.21"></a><span id="l63.21">             return true;</span>
<a href="#l63.22"></a><span id="l63.22" class="difflineat">@@ -775,17 +775,17 @@ FeedWriter.prototype = {</span>
<a href="#l63.23"></a><span id="l63.23"> </span>
<a href="#l63.24"></a><span id="l63.24">           handlers[0].doCommand();</span>
<a href="#l63.25"></a><span id="l63.25">         }</span>
<a href="#l63.26"></a><span id="l63.26">         break;</span>
<a href="#l63.27"></a><span id="l63.27">       case &quot;client&quot;:</span>
<a href="#l63.28"></a><span id="l63.28">         try {</span>
<a href="#l63.29"></a><span id="l63.29">           this._selectedApp =</span>
<a href="#l63.30"></a><span id="l63.30">             Services.prefs.getComplexValue(getPrefAppForType(feedType),</span>
<a href="#l63.31"></a><span id="l63.31" class="difflineminus">-                                           Components.interfaces.nsILocalFile);</span>
<a href="#l63.32"></a><span id="l63.32" class="difflineplus">+                                           Components.interfaces.nsIFile);</span>
<a href="#l63.33"></a><span id="l63.33">         }</span>
<a href="#l63.34"></a><span id="l63.34">         catch(ex) {</span>
<a href="#l63.35"></a><span id="l63.35">           this._selectedApp = null;</span>
<a href="#l63.36"></a><span id="l63.36">         }</span>
<a href="#l63.37"></a><span id="l63.37"> </span>
<a href="#l63.38"></a><span id="l63.38">         if (this._selectedApp) {</span>
<a href="#l63.39"></a><span id="l63.39">           this._initMenuItemWithFile(this._selectedAppMenuItem,</span>
<a href="#l63.40"></a><span id="l63.40">                                      this._selectedApp);</span>
<a href="#l63.41"></a><span id="l63.41" class="difflineat">@@ -841,17 +841,17 @@ FeedWriter.prototype = {</span>
<a href="#l63.42"></a><span id="l63.42">     // Last-selected application</span>
<a href="#l63.43"></a><span id="l63.43">     var menuItem = liveBookmarksMenuItem.cloneNode(false);</span>
<a href="#l63.44"></a><span id="l63.44">     menuItem.removeAttribute(&quot;selected&quot;);</span>
<a href="#l63.45"></a><span id="l63.45">     menuItem.setAttribute(&quot;anonid&quot;, &quot;selectedAppMenuItem&quot;);</span>
<a href="#l63.46"></a><span id="l63.46">     menuItem.className = &quot;menuitem-iconic selectedAppMenuItem&quot;;</span>
<a href="#l63.47"></a><span id="l63.47">     menuItem.setAttribute(&quot;handlerType&quot;, &quot;client&quot;);</span>
<a href="#l63.48"></a><span id="l63.48">     try {</span>
<a href="#l63.49"></a><span id="l63.49">       this._selectedApp = Services.prefs.getComplexValue(getPrefAppForType(feedType),</span>
<a href="#l63.50"></a><span id="l63.50" class="difflineminus">-                                                         Components.interfaces.nsILocalFile);</span>
<a href="#l63.51"></a><span id="l63.51" class="difflineplus">+                                                         Components.interfaces.nsIFile);</span>
<a href="#l63.52"></a><span id="l63.52"> </span>
<a href="#l63.53"></a><span id="l63.53">       if (this._selectedApp.exists())</span>
<a href="#l63.54"></a><span id="l63.54">         this._initMenuItemWithFile(menuItem, this._selectedApp);</span>
<a href="#l63.55"></a><span id="l63.55">       else {</span>
<a href="#l63.56"></a><span id="l63.56">         // Hide the menuitem if the last selected application doesn't exist</span>
<a href="#l63.57"></a><span id="l63.57">         menuItem.hidden = true;</span>
<a href="#l63.58"></a><span id="l63.58">       }</span>
<a href="#l63.59"></a><span id="l63.59">     }</span>
<a href="#l63.60"></a><span id="l63.60" class="difflineat">@@ -1133,22 +1133,22 @@ FeedWriter.prototype = {</span>
<a href="#l63.61"></a><span id="l63.61">           wccr.setAutoHandler(this._getMimeTypeForFeedType(feedType), handler);</span>
<a href="#l63.62"></a><span id="l63.62"> </span>
<a href="#l63.63"></a><span id="l63.63">         this._window.location.href = handler.getHandlerURI(this._window.location.href);</span>
<a href="#l63.64"></a><span id="l63.64">       }</span>
<a href="#l63.65"></a><span id="l63.65">     }</span>
<a href="#l63.66"></a><span id="l63.66">     else {</span>
<a href="#l63.67"></a><span id="l63.67">       switch (selectedItem.getAttribute(&quot;anonid&quot;)) {</span>
<a href="#l63.68"></a><span id="l63.68">         case &quot;selectedAppMenuItem&quot;:</span>
<a href="#l63.69"></a><span id="l63.69" class="difflineminus">-          Services.prefs.setComplexValue(getPrefAppForType(feedType), Components.interfaces.nsILocalFile,</span>
<a href="#l63.70"></a><span id="l63.70" class="difflineplus">+          Services.prefs.setComplexValue(getPrefAppForType(feedType), Components.interfaces.nsIFile,</span>
<a href="#l63.71"></a><span id="l63.71">                                          this._selectedApp);</span>
<a href="#l63.72"></a><span id="l63.72">           Services.prefs.setCharPref(getPrefReaderForType(feedType), &quot;client&quot;);</span>
<a href="#l63.73"></a><span id="l63.73">           break;</span>
<a href="#l63.74"></a><span id="l63.74">         case &quot;defaultHandlerMenuItem&quot;:</span>
<a href="#l63.75"></a><span id="l63.75" class="difflineminus">-          Services.prefs.setComplexValue(getPrefAppForType(feedType), Components.interfaces.nsILocalFile,</span>
<a href="#l63.76"></a><span id="l63.76" class="difflineplus">+          Services.prefs.setComplexValue(getPrefAppForType(feedType), Components.interfaces.nsIFile,</span>
<a href="#l63.77"></a><span id="l63.77">                                          this._defaultSystemReader);</span>
<a href="#l63.78"></a><span id="l63.78">           Services.prefs.setCharPref(getPrefReaderForType(feedType), &quot;client&quot;);</span>
<a href="#l63.79"></a><span id="l63.79">           break;</span>
<a href="#l63.80"></a><span id="l63.80">         case &quot;liveBookmarksMenuItem&quot;:</span>
<a href="#l63.81"></a><span id="l63.81">           defaultHandler = &quot;bookmarks&quot;;</span>
<a href="#l63.82"></a><span id="l63.82">           Services.prefs.setCharPref(getPrefReaderForType(feedType), &quot;bookmarks&quot;);</span>
<a href="#l63.83"></a><span id="l63.83">           break;</span>
<a href="#l63.84"></a><span id="l63.84">         case &quot;messengerFeedsMenuItem&quot;:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l64.1"></a><span id="l64.1" class="difflineminus">--- a/suite/mailnews/compose/MsgComposeCommands.js</span>
<a href="#l64.2"></a><span id="l64.2" class="difflineplus">+++ b/suite/mailnews/compose/MsgComposeCommands.js</span>
<a href="#l64.3"></a><span id="l64.3" class="difflineat">@@ -2366,25 +2366,25 @@ function SetContentAndBodyAsUnmodified()</span>
<a href="#l64.4"></a><span id="l64.4"> function MsgComposeCloseWindow()</span>
<a href="#l64.5"></a><span id="l64.5"> {</span>
<a href="#l64.6"></a><span id="l64.6">   if (gMsgCompose)</span>
<a href="#l64.7"></a><span id="l64.7">     gMsgCompose.CloseWindow();</span>
<a href="#l64.8"></a><span id="l64.8">   else</span>
<a href="#l64.9"></a><span id="l64.9">     window.close();</span>
<a href="#l64.10"></a><span id="l64.10"> }</span>
<a href="#l64.11"></a><span id="l64.11"> </span>
<a href="#l64.12"></a><span id="l64.12" class="difflineminus">-// attachedLocalFile must be a nsILocalFile</span>
<a href="#l64.13"></a><span id="l64.13" class="difflineplus">+// attachedLocalFile must be a nsIFile</span>
<a href="#l64.14"></a><span id="l64.14"> function SetLastAttachDirectory(attachedLocalFile)</span>
<a href="#l64.15"></a><span id="l64.15"> {</span>
<a href="#l64.16"></a><span id="l64.16">   try {</span>
<a href="#l64.17"></a><span id="l64.17">     var file = attachedLocalFile.QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l64.18"></a><span id="l64.18" class="difflineminus">-    var parent = file.parent.QueryInterface(Components.interfaces.nsILocalFile);</span>
<a href="#l64.19"></a><span id="l64.19" class="difflineplus">+    var parent = file.parent.QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l64.20"></a><span id="l64.20"> </span>
<a href="#l64.21"></a><span id="l64.21">     Services.prefs.setComplexValue(kComposeAttachDirPrefName,</span>
<a href="#l64.22"></a><span id="l64.22" class="difflineminus">-                                   Components.interfaces.nsILocalFile, parent);</span>
<a href="#l64.23"></a><span id="l64.23" class="difflineplus">+                                   Components.interfaces.nsIFile, parent);</span>
<a href="#l64.24"></a><span id="l64.24">   }</span>
<a href="#l64.25"></a><span id="l64.25">   catch (ex) {</span>
<a href="#l64.26"></a><span id="l64.26">     dump(&quot;error: SetLastAttachDirectory failed: &quot; + ex + &quot;\n&quot;);</span>
<a href="#l64.27"></a><span id="l64.27">   }</span>
<a href="#l64.28"></a><span id="l64.28"> }</span>
<a href="#l64.29"></a><span id="l64.29"> </span>
<a href="#l64.30"></a><span id="l64.30"> function AttachFile()</span>
<a href="#l64.31"></a><span id="l64.31"> {</span>
<a href="#l64.32"></a><span id="l64.32" class="difflineat">@@ -2412,17 +2412,17 @@ function AttachFile()</span>
<a href="#l64.33"></a><span id="l64.33"> function AttachFiles(attachments)</span>
<a href="#l64.34"></a><span id="l64.34"> {</span>
<a href="#l64.35"></a><span id="l64.35">   if (!attachments || !attachments.hasMoreElements())</span>
<a href="#l64.36"></a><span id="l64.36">     return null;</span>
<a href="#l64.37"></a><span id="l64.37"> </span>
<a href="#l64.38"></a><span id="l64.38">   var firstAttachedFile = null;</span>
<a href="#l64.39"></a><span id="l64.39"> </span>
<a href="#l64.40"></a><span id="l64.40">   while (attachments.hasMoreElements()) {</span>
<a href="#l64.41"></a><span id="l64.41" class="difflineminus">-    var currentFile = attachments.getNext().QueryInterface(Components.interfaces.nsILocalFile);</span>
<a href="#l64.42"></a><span id="l64.42" class="difflineplus">+    var currentFile = attachments.getNext().QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l64.43"></a><span id="l64.43"> </span>
<a href="#l64.44"></a><span id="l64.44">     if (!firstAttachedFile) {</span>
<a href="#l64.45"></a><span id="l64.45">       firstAttachedFile = currentFile;</span>
<a href="#l64.46"></a><span id="l64.46">     }</span>
<a href="#l64.47"></a><span id="l64.47"> </span>
<a href="#l64.48"></a><span id="l64.48">     var fileHandler = Services.io.getProtocolHandler(&quot;file&quot;).QueryInterface(Components.interfaces.nsIFileProtocolHandler);</span>
<a href="#l64.49"></a><span id="l64.49">     var currentAttachment = fileHandler.getURLSpecFromFile(currentFile);</span>
<a href="#l64.50"></a><span id="l64.50"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l65.1"></a><span id="l65.1" class="difflineminus">--- a/suite/mailnews/messengerdnd.js</span>
<a href="#l65.2"></a><span id="l65.2" class="difflineplus">+++ b/suite/mailnews/messengerdnd.js</span>
<a href="#l65.3"></a><span id="l65.3" class="difflineat">@@ -228,17 +228,17 @@ function DropOnFolderTree(aRow, aOrienta</span>
<a href="#l65.4"></a><span id="l65.4">     gCopyService.CopyMessages(sourceFolder, array, targetFolder, isMove, null,</span>
<a href="#l65.5"></a><span id="l65.5">                               msgWindow, true);</span>
<a href="#l65.6"></a><span id="l65.6">   }</span>
<a href="#l65.7"></a><span id="l65.7">   else if (types.includes(&quot;application/x-moz-file&quot;))</span>
<a href="#l65.8"></a><span id="l65.8">   {</span>
<a href="#l65.9"></a><span id="l65.9">     for (let i = 0; i &lt; count; i++)</span>
<a href="#l65.10"></a><span id="l65.10">     {</span>
<a href="#l65.11"></a><span id="l65.11">       let extFile = dt.mozGetDataAt(&quot;application/x-moz-file&quot;, i)</span>
<a href="#l65.12"></a><span id="l65.12" class="difflineminus">-                      .QueryInterface(Components.interfaces.nsILocalFile);</span>
<a href="#l65.13"></a><span id="l65.13" class="difflineplus">+                      .QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l65.14"></a><span id="l65.14">       if (extFile.isFile() &amp;&amp; /\.eml$/i.test(extFile.leafName))</span>
<a href="#l65.15"></a><span id="l65.15">         gCopyService.CopyFileMessage(extFile, targetFolder, null, false, 1,</span>
<a href="#l65.16"></a><span id="l65.16">                                      &quot;&quot;, null, msgWindow);</span>
<a href="#l65.17"></a><span id="l65.17">     }</span>
<a href="#l65.18"></a><span id="l65.18">   }</span>
<a href="#l65.19"></a><span id="l65.19">   else if (types.includes(&quot;text/x-moz-url&quot;))</span>
<a href="#l65.20"></a><span id="l65.20">   {</span>
<a href="#l65.21"></a><span id="l65.21">     // This is a potential RSS feed to subscribe to</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l66.1"></a><span id="l66.1" class="difflineminus">--- a/suite/mailnews/msgHdrViewOverlay.js</span>
<a href="#l66.2"></a><span id="l66.2" class="difflineplus">+++ b/suite/mailnews/msgHdrViewOverlay.js</span>
<a href="#l66.3"></a><span id="l66.3" class="difflineat">@@ -1915,17 +1915,17 @@ nsFlavorDataProvider.prototype =</span>
<a href="#l66.4"></a><span id="l66.4">       var dataSize = { };</span>
<a href="#l66.5"></a><span id="l66.5">       aTransferable.getTransferData(&quot;application/x-moz-file-promise-url&quot;, urlPrimitive, dataSize);</span>
<a href="#l66.6"></a><span id="l66.6"> </span>
<a href="#l66.7"></a><span id="l66.7">       var srcUrlPrimitive = urlPrimitive.value.QueryInterface(Components.interfaces.nsISupportsString);</span>
<a href="#l66.8"></a><span id="l66.8"> </span>
<a href="#l66.9"></a><span id="l66.9">       // now get the destination file location from kFilePromiseDirectoryMime</span>
<a href="#l66.10"></a><span id="l66.10">       var dirPrimitive = {};</span>
<a href="#l66.11"></a><span id="l66.11">       aTransferable.getTransferData(&quot;application/x-moz-file-promise-dir&quot;, dirPrimitive, dataSize);</span>
<a href="#l66.12"></a><span id="l66.12" class="difflineminus">-      var destDirectory = dirPrimitive.value.QueryInterface(Components.interfaces.nsILocalFile);</span>
<a href="#l66.13"></a><span id="l66.13" class="difflineplus">+      var destDirectory = dirPrimitive.value.QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l66.14"></a><span id="l66.14"> </span>
<a href="#l66.15"></a><span id="l66.15">       // now save the attachment to the specified location</span>
<a href="#l66.16"></a><span id="l66.16">       // XXX: we need more information than just the attachment url to save it, fortunately, we have an array</span>
<a href="#l66.17"></a><span id="l66.17">       // of all the current attachments so we can cheat and scan through them</span>
<a href="#l66.18"></a><span id="l66.18"> </span>
<a href="#l66.19"></a><span id="l66.19">       var attachment = null;</span>
<a href="#l66.20"></a><span id="l66.20">       for (let index in currentAttachments)</span>
<a href="#l66.21"></a><span id="l66.21">       {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l67.1"></a><span id="l67.1" class="difflineminus">--- a/suite/modules/WindowsJumpLists.jsm</span>
<a href="#l67.2"></a><span id="l67.2" class="difflineplus">+++ b/suite/modules/WindowsJumpLists.jsm</span>
<a href="#l67.3"></a><span id="l67.3" class="difflineat">@@ -409,17 +409,17 @@ var WinTaskbarJumpList =</span>
<a href="#l67.4"></a><span id="l67.4"> </span>
<a href="#l67.5"></a><span id="l67.5">   /**</span>
<a href="#l67.6"></a><span id="l67.6">    * Jump list item creation helpers</span>
<a href="#l67.7"></a><span id="l67.7">    */</span>
<a href="#l67.8"></a><span id="l67.8"> </span>
<a href="#l67.9"></a><span id="l67.9">   _getHandlerAppItem: function WTBJL__getHandlerAppItem(name, description,</span>
<a href="#l67.10"></a><span id="l67.10">                                                         args, iconIndex,</span>
<a href="#l67.11"></a><span id="l67.11">                                                         faviconPageUri) {</span>
<a href="#l67.12"></a><span id="l67.12" class="difflineminus">-    var file = Services.dirsvc.get(&quot;XREExeF&quot;, Ci.nsILocalFile);</span>
<a href="#l67.13"></a><span id="l67.13" class="difflineplus">+    var file = Services.dirsvc.get(&quot;XREExeF&quot;, Ci.nsIFile);</span>
<a href="#l67.14"></a><span id="l67.14"> </span>
<a href="#l67.15"></a><span id="l67.15">     var handlerApp = Cc[&quot;@mozilla.org/uriloader/local-handler-app;1&quot;].</span>
<a href="#l67.16"></a><span id="l67.16">                      createInstance(Ci.nsILocalHandlerApp);</span>
<a href="#l67.17"></a><span id="l67.17">     handlerApp.executable = file;</span>
<a href="#l67.18"></a><span id="l67.18">     // handlers default to the leaf name if a name is not specified</span>
<a href="#l67.19"></a><span id="l67.19">     if (name &amp;&amp; name.length != 0)</span>
<a href="#l67.20"></a><span id="l67.20">       handlerApp.name = name;</span>
<a href="#l67.21"></a><span id="l67.21">     handlerApp.detailedDescription = description;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

