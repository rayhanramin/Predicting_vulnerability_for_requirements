<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 8961:1afd843a67b122114438dfb7f9cd3f6524bf78d1</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 1afd843a67b122114438dfb7f9cd3f6524bf78d1" />
<meta property="og:url" content="/comm-central/rev/1afd843a67b122114438dfb7f9cd3f6524bf78d1" />
<meta property="og:description" content="Bug 689437 - Drop support for migrating from old profiles (drop usages of libreg) r=Standard8 sr=Neil for landing on a CLOSED TREE" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 1afd843a67b122114438dfb7f9cd3f6524bf78d1 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/1afd843a67b122114438dfb7f9cd3f6524bf78d1">shortlog</a> |
<a href="/comm-central/log/1afd843a67b122114438dfb7f9cd3f6524bf78d1">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/1afd843a67b122114438dfb7f9cd3f6524bf78d1">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/1afd843a67b122114438dfb7f9cd3f6524bf78d1">files</a> |
changeset |
<a href="/comm-central/raw-rev/1afd843a67b122114438dfb7f9cd3f6524bf78d1">raw</a>  | <a href="/comm-central/archive/1afd843a67b122114438dfb7f9cd3f6524bf78d1.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=689437">Bug 689437</a> - Drop support for migrating from old profiles (drop usages of libreg) r=Standard8 sr=Neil for landing on a CLOSED TREE
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#74;&#117;&#115;&#116;&#105;&#110;&#32;&#87;&#111;&#111;&#100;&#32;&#60;&#98;&#117;&#103;&#115;&#112;&#97;&#109;&#46;&#67;&#97;&#108;&#108;&#101;&#107;&#62;</td></tr>
<tr><td></td><td class="date age">Mon, 12 Dec 2011 00:54:00 -0500</td></tr>

<tr>
 <td>changeset 8961</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/1afd843a67b122114438dfb7f9cd3f6524bf78d1">1afd843a67b122114438dfb7f9cd3f6524bf78d1</a></td>
</tr>



<tr>
<td>parent 8960</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/5d6b25eda12e22f97ff3165f187bedb79d426e36">5d6b25eda12e22f97ff3165f187bedb79d426e36</a>
</td>
</tr>

<tr>
<td>child 8962</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/7814c0f2732db09c21edc4784844a80bf11c918b">7814c0f2732db09c21edc4784844a80bf11c918b</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=1afd843a67b122114438dfb7f9cd3f6524bf78d1">6872</a></td></tr>
<tr><td>push user</td><td>Callek@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Mon, 12 Dec 2011 11:01:04 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@1afd843a67b1 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=1afd843a67b122114438dfb7f9cd3f6524bf78d1">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=1afd843a67b122114438dfb7f9cd3f6524bf78d1&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=1afd843a67b122114438dfb7f9cd3f6524bf78d1&newProject=comm-central&newRevision=5d6b25eda12e22f97ff3165f187bedb79d426e36&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=1afd843a67b122114438dfb7f9cd3f6524bf78d1&newProject=comm-central&newRevision=5d6b25eda12e22f97ff3165f187bedb79d426e36&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=1afd843a67b122114438dfb7f9cd3f6524bf78d1&newProject=comm-central&newRevision=5d6b25eda12e22f97ff3165f187bedb79d426e36&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Standard8%29&revcount=50">Standard8</a>, <a href="/comm-central/log?rev=reviewer%28Neil%29&revcount=50">Neil</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=689437">689437</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=689437">Bug 689437</a> - Drop support for migrating from old profiles (drop usages of libreg) r=Standard8 sr=Neil for landing on a CLOSED TREE
Touch ups on top of edmorley's WIP</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/components/migration/content/migration.xul">mail/components/migration/content/migration.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/components/migration/content/migration.xul">file</a> |
<a href="/comm-central/annotate/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/components/migration/content/migration.xul">annotate</a> |
<a href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/components/migration/content/migration.xul">diff</a> |
<a href="/comm-central/comparison/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/components/migration/content/migration.xul">comparison</a> |
<a href="/comm-central/log/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/components/migration/content/migration.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/components/migration/src/nsProfileMigrator.h">mail/components/migration/src/nsProfileMigrator.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/components/migration/src/nsProfileMigrator.h">file</a> |
<a href="/comm-central/annotate/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/components/migration/src/nsProfileMigrator.h">annotate</a> |
<a href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/components/migration/src/nsProfileMigrator.h">diff</a> |
<a href="/comm-central/comparison/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/components/migration/src/nsProfileMigrator.h">comparison</a> |
<a href="/comm-central/log/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/components/migration/src/nsProfileMigrator.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/components/migration/src/nsSeamonkeyProfileMigrator.cpp">mail/components/migration/src/nsSeamonkeyProfileMigrator.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/components/migration/src/nsSeamonkeyProfileMigrator.cpp">file</a> |
<a href="/comm-central/annotate/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/components/migration/src/nsSeamonkeyProfileMigrator.cpp">annotate</a> |
<a href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/components/migration/src/nsSeamonkeyProfileMigrator.cpp">diff</a> |
<a href="/comm-central/comparison/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/components/migration/src/nsSeamonkeyProfileMigrator.cpp">comparison</a> |
<a href="/comm-central/log/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/components/migration/src/nsSeamonkeyProfileMigrator.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/locales/en-US/chrome/messenger/importMsgs.properties">mail/locales/en-US/chrome/messenger/importMsgs.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/locales/en-US/chrome/messenger/importMsgs.properties">file</a> |
<a href="/comm-central/annotate/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/locales/en-US/chrome/messenger/importMsgs.properties">annotate</a> |
<a href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/locales/en-US/chrome/messenger/importMsgs.properties">diff</a> |
<a href="/comm-central/comparison/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/locales/en-US/chrome/messenger/importMsgs.properties">comparison</a> |
<a href="/comm-central/log/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/locales/en-US/chrome/messenger/importMsgs.properties">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/locales/en-US/chrome/messenger/migration/migration.dtd">mail/locales/en-US/chrome/messenger/migration/migration.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/locales/en-US/chrome/messenger/migration/migration.dtd">file</a> |
<a href="/comm-central/annotate/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/locales/en-US/chrome/messenger/migration/migration.dtd">annotate</a> |
<a href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/locales/en-US/chrome/messenger/migration/migration.dtd">diff</a> |
<a href="/comm-central/comparison/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/locales/en-US/chrome/messenger/migration/migration.dtd">comparison</a> |
<a href="/comm-central/log/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/locales/en-US/chrome/messenger/migration/migration.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/locales/en-US/chrome/messenger/migration/migration.properties">mail/locales/en-US/chrome/messenger/migration/migration.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/locales/en-US/chrome/messenger/migration/migration.properties">file</a> |
<a href="/comm-central/annotate/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/locales/en-US/chrome/messenger/migration/migration.properties">annotate</a> |
<a href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/locales/en-US/chrome/messenger/migration/migration.properties">diff</a> |
<a href="/comm-central/comparison/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/locales/en-US/chrome/messenger/migration/migration.properties">comparison</a> |
<a href="/comm-central/log/1afd843a67b122114438dfb7f9cd3f6524bf78d1/mail/locales/en-US/chrome/messenger/migration/migration.properties">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/build/nsSuiteModule.cpp">suite/build/nsSuiteModule.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/build/nsSuiteModule.cpp">file</a> |
<a href="/comm-central/annotate/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/build/nsSuiteModule.cpp">annotate</a> |
<a href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/build/nsSuiteModule.cpp">diff</a> |
<a href="/comm-central/comparison/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/build/nsSuiteModule.cpp">comparison</a> |
<a href="/comm-central/log/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/build/nsSuiteModule.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/locales/en-US/chrome/common/migration/migration.dtd">suite/locales/en-US/chrome/common/migration/migration.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/locales/en-US/chrome/common/migration/migration.dtd">file</a> |
<a href="/comm-central/annotate/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/locales/en-US/chrome/common/migration/migration.dtd">annotate</a> |
<a href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/locales/en-US/chrome/common/migration/migration.dtd">diff</a> |
<a href="/comm-central/comparison/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/locales/en-US/chrome/common/migration/migration.dtd">comparison</a> |
<a href="/comm-central/log/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/locales/en-US/chrome/common/migration/migration.dtd">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/locales/en-US/chrome/common/migration/migration.properties">suite/locales/en-US/chrome/common/migration/migration.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/locales/en-US/chrome/common/migration/migration.properties">file</a> |
<a href="/comm-central/annotate/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/locales/en-US/chrome/common/migration/migration.properties">annotate</a> |
<a href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/locales/en-US/chrome/common/migration/migration.properties">diff</a> |
<a href="/comm-central/comparison/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/locales/en-US/chrome/common/migration/migration.properties">comparison</a> |
<a href="/comm-central/log/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/locales/en-US/chrome/common/migration/migration.properties">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/locales/en-US/chrome/mailnews/importMsgs.properties">suite/locales/en-US/chrome/mailnews/importMsgs.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/locales/en-US/chrome/mailnews/importMsgs.properties">file</a> |
<a href="/comm-central/annotate/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/locales/en-US/chrome/mailnews/importMsgs.properties">annotate</a> |
<a href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/locales/en-US/chrome/mailnews/importMsgs.properties">diff</a> |
<a href="/comm-central/comparison/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/locales/en-US/chrome/mailnews/importMsgs.properties">comparison</a> |
<a href="/comm-central/log/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/locales/en-US/chrome/mailnews/importMsgs.properties">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration.xul">suite/profile/migration.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration.xul">file</a> |
<a href="/comm-central/annotate/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration.xul">annotate</a> |
<a href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration.xul">diff</a> |
<a href="/comm-central/comparison/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration.xul">comparison</a> |
<a href="/comm-central/log/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/Makefile.in">suite/profile/migration/src/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/Makefile.in">file</a> |
<a href="/comm-central/annotate/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/Makefile.in">annotate</a> |
<a href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/Makefile.in">diff</a> |
<a href="/comm-central/comparison/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/Makefile.in">comparison</a> |
<a href="/comm-central/log/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsProfileMigrator.cpp">suite/profile/migration/src/nsProfileMigrator.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsProfileMigrator.cpp">file</a> |
<a href="/comm-central/annotate/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsProfileMigrator.cpp">annotate</a> |
<a href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsProfileMigrator.cpp">diff</a> |
<a href="/comm-central/comparison/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsProfileMigrator.cpp">comparison</a> |
<a href="/comm-central/log/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsProfileMigrator.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsProfileMigrator.h">suite/profile/migration/src/nsProfileMigrator.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsProfileMigrator.h">file</a> |
<a href="/comm-central/annotate/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsProfileMigrator.h">annotate</a> |
<a href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsProfileMigrator.h">diff</a> |
<a href="/comm-central/comparison/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsProfileMigrator.h">comparison</a> |
<a href="/comm-central/log/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsProfileMigrator.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsSeamonkeyProfileMigrator.cpp">suite/profile/migration/src/nsSeamonkeyProfileMigrator.cpp</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsSeamonkeyProfileMigrator.cpp">diff</a> |
<a href="/comm-central/comparison/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsSeamonkeyProfileMigrator.cpp">comparison</a> |
<a href="/comm-central/log/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsSeamonkeyProfileMigrator.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsSeamonkeyProfileMigrator.h">suite/profile/migration/src/nsSeamonkeyProfileMigrator.h</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsSeamonkeyProfileMigrator.h">diff</a> |
<a href="/comm-central/comparison/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsSeamonkeyProfileMigrator.h">comparison</a> |
<a href="/comm-central/log/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsSeamonkeyProfileMigrator.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsThunderbirdProfileMigrator.cpp">suite/profile/migration/src/nsThunderbirdProfileMigrator.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsThunderbirdProfileMigrator.cpp">file</a> |
<a href="/comm-central/annotate/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsThunderbirdProfileMigrator.cpp">annotate</a> |
<a href="/comm-central/diff/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsThunderbirdProfileMigrator.cpp">diff</a> |
<a href="/comm-central/comparison/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsThunderbirdProfileMigrator.cpp">comparison</a> |
<a href="/comm-central/log/1afd843a67b122114438dfb7f9cd3f6524bf78d1/suite/profile/migration/src/nsThunderbirdProfileMigrator.cpp">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/components/migration/content/migration.xul</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/components/migration/content/migration.xul</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -59,18 +59,18 @@</span>
<a href="#l1.4"></a><span id="l1.4"> #ifdef XP_WIN</span>
<a href="#l1.5"></a><span id="l1.5">     &lt;label control=&quot;importSourceGroup&quot;&gt;&amp;importFromWin.label;&lt;/label&gt;</span>
<a href="#l1.6"></a><span id="l1.6"> #else</span>
<a href="#l1.7"></a><span id="l1.7">     &lt;label control=&quot;importSourceGroup&quot;&gt;&amp;importFromNonWin.label;&lt;/label&gt;</span>
<a href="#l1.8"></a><span id="l1.8"> #endif</span>
<a href="#l1.9"></a><span id="l1.9">     </span>
<a href="#l1.10"></a><span id="l1.10">     &lt;radiogroup id=&quot;importSourceGroup&quot;&gt;</span>
<a href="#l1.11"></a><span id="l1.11">  </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-      &lt;radio id=&quot;seamonkey&quot; label=&quot;&amp;importFromSeamonkey2.label;&quot;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineminus">-             accesskey=&quot;&amp;importFromSeamonkey2.accesskey;&quot;/&gt;</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+      &lt;radio id=&quot;seamonkey&quot; label=&quot;&amp;importFromSeamonkey3.label;&quot;</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+             accesskey=&quot;&amp;importFromSeamonkey3.accesskey;&quot;/&gt;</span>
<a href="#l1.16"></a><span id="l1.16"> </span>
<a href="#l1.17"></a><span id="l1.17"> #ifdef XP_WIN</span>
<a href="#l1.18"></a><span id="l1.18">       &lt;radio id=&quot;oexpress&quot;  label=&quot;&amp;importFromOExpress.label;&quot;  accesskey=&quot;&amp;importFromOExpress.accesskey;&quot;/&gt;</span>
<a href="#l1.19"></a><span id="l1.19">       &lt;radio id=&quot;outlook&quot;   label=&quot;&amp;importFromOutlook.label;&quot;   accesskey=&quot;&amp;importFromOutlook.accesskey;&quot;/&gt;</span>
<a href="#l1.20"></a><span id="l1.20"> #endif</span>
<a href="#l1.21"></a><span id="l1.21"> </span>
<a href="#l1.22"></a><span id="l1.22"> #ifdef XP_UNIX</span>
<a href="#l1.23"></a><span id="l1.23"> #ifdef XP_MACOSX</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/components/migration/src/nsProfileMigrator.h</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/components/migration/src/nsProfileMigrator.h</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -43,17 +43,17 @@</span>
<a href="#l2.4"></a><span id="l2.4"> #include &quot;nsIToolkitProfile.h&quot;</span>
<a href="#l2.5"></a><span id="l2.5"> #include &quot;nsIToolkitProfileService.h&quot;</span>
<a href="#l2.6"></a><span id="l2.6"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l2.7"></a><span id="l2.7"> #include &quot;nsDirectoryServiceDefs.h&quot;</span>
<a href="#l2.8"></a><span id="l2.8"> </span>
<a href="#l2.9"></a><span id="l2.9"> #include &quot;nsStringGlue.h&quot;</span>
<a href="#l2.10"></a><span id="l2.10"> </span>
<a href="#l2.11"></a><span id="l2.11"> #define NS_THUNDERBIRD_PROFILEIMPORT_CID \</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-{ 0xea05dd97, 0xb66b, 0x4305, { 0xa6, 0x58, 0xd5, 0xde, 0x7f, 0x54, 0x0c, 0xc9 } }</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+{ 0xb3c78baf, 0x3a52, 0x41d2, { 0x97, 0x18, 0xc3, 0x19, 0xbe, 0xf9, 0xaf, 0xfc } }</span>
<a href="#l2.14"></a><span id="l2.14"> </span>
<a href="#l2.15"></a><span id="l2.15"> class nsProfileMigrator : public nsIProfileMigrator</span>
<a href="#l2.16"></a><span id="l2.16"> {</span>
<a href="#l2.17"></a><span id="l2.17"> public:</span>
<a href="#l2.18"></a><span id="l2.18">   NS_DECL_NSIPROFILEMIGRATOR</span>
<a href="#l2.19"></a><span id="l2.19">   NS_DECL_ISUPPORTS</span>
<a href="#l2.20"></a><span id="l2.20"> </span>
<a href="#l2.21"></a><span id="l2.21">   nsProfileMigrator() { };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/components/migration/src/nsSeamonkeyProfileMigrator.cpp</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/components/migration/src/nsSeamonkeyProfileMigrator.cpp</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -240,46 +240,38 @@ nsSeamonkeyProfileMigrator::FillProfileD</span>
<a href="#l3.4"></a><span id="l3.4"> {</span>
<a href="#l3.5"></a><span id="l3.5">   // Find the Seamonkey Registry</span>
<a href="#l3.6"></a><span id="l3.6">   nsCOMPtr&lt;nsIProperties&gt; fileLocator(</span>
<a href="#l3.7"></a><span id="l3.7">     do_GetService(&quot;@mozilla.org/file/directory_service;1&quot;));</span>
<a href="#l3.8"></a><span id="l3.8">   nsCOMPtr&lt;nsILocalFile&gt; seamonkeyData;</span>
<a href="#l3.9"></a><span id="l3.9"> #undef EXTRA_PREPEND</span>
<a href="#l3.10"></a><span id="l3.10"> </span>
<a href="#l3.11"></a><span id="l3.11"> #ifdef XP_WIN</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-#define REGISTRY_FILE &quot;registry.dat&quot;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-#define OLD_FOLDER &quot;Mozilla&quot;</span>
<a href="#l3.14"></a><span id="l3.14"> #define NEW_FOLDER &quot;SeaMonkey&quot;</span>
<a href="#l3.15"></a><span id="l3.15"> #define EXTRA_PREPEND &quot;Mozilla&quot;</span>
<a href="#l3.16"></a><span id="l3.16"> </span>
<a href="#l3.17"></a><span id="l3.17">   fileLocator-&gt;Get(NS_WIN_APPDATA_DIR, NS_GET_IID(nsILocalFile),</span>
<a href="#l3.18"></a><span id="l3.18">                    getter_AddRefs(seamonkeyData));</span>
<a href="#l3.19"></a><span id="l3.19">   NS_ENSURE_TRUE(seamonkeyData, NS_ERROR_FAILURE);</span>
<a href="#l3.20"></a><span id="l3.20"> </span>
<a href="#l3.21"></a><span id="l3.21"> #elif defined(XP_MACOSX)</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineminus">-#define REGISTRY_FILE &quot;Application Registry&quot;</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineminus">-#define OLD_FOLDER &quot;Mozilla&quot;</span>
<a href="#l3.24"></a><span id="l3.24"> #define NEW_FOLDER &quot;SeaMonkey&quot;</span>
<a href="#l3.25"></a><span id="l3.25"> #define EXTRA_PREPEND &quot;Application Support&quot;</span>
<a href="#l3.26"></a><span id="l3.26">   fileLocator-&gt;Get(NS_MAC_USER_LIB_DIR, NS_GET_IID(nsILocalFile),</span>
<a href="#l3.27"></a><span id="l3.27">                    getter_AddRefs(seamonkeyData));</span>
<a href="#l3.28"></a><span id="l3.28">   NS_ENSURE_TRUE(seamonkeyData, NS_ERROR_FAILURE);</span>
<a href="#l3.29"></a><span id="l3.29"> </span>
<a href="#l3.30"></a><span id="l3.30"> #elif defined(XP_UNIX)</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-#define REGISTRY_FILE &quot;appreg&quot;</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineminus">-#define OLD_FOLDER &quot;.mozilla&quot;</span>
<a href="#l3.33"></a><span id="l3.33"> #define NEW_FOLDER &quot;seamonkey&quot;</span>
<a href="#l3.34"></a><span id="l3.34"> #define EXTRA_PREPEND &quot;.mozilla&quot;</span>
<a href="#l3.35"></a><span id="l3.35">   fileLocator-&gt;Get(NS_UNIX_HOME_DIR, NS_GET_IID(nsILocalFile),</span>
<a href="#l3.36"></a><span id="l3.36">                    getter_AddRefs(seamonkeyData));</span>
<a href="#l3.37"></a><span id="l3.37">   NS_ENSURE_TRUE(seamonkeyData, NS_ERROR_FAILURE);</span>
<a href="#l3.38"></a><span id="l3.38"> </span>
<a href="#l3.39"></a><span id="l3.39"> #elif defined(XP_OS2)</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineminus">-#define REGISTRY_FILE &quot;registry.dat&quot;</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineminus">-#define OLD_FOLDER &quot;Mozilla&quot;</span>
<a href="#l3.42"></a><span id="l3.42"> #define NEW_FOLDER &quot;SeaMonkey&quot;</span>
<a href="#l3.43"></a><span id="l3.43"> #define EXTRA_PREPEND &quot;Mozilla&quot;</span>
<a href="#l3.44"></a><span id="l3.44"> </span>
<a href="#l3.45"></a><span id="l3.45">   fileLocator-&gt;Get(NS_OS2_HOME_DIR, NS_GET_IID(nsILocalFile),</span>
<a href="#l3.46"></a><span id="l3.46">                    getter_AddRefs(seamonkeyData));</span>
<a href="#l3.47"></a><span id="l3.47">   NS_ENSURE_TRUE(seamonkeyData, NS_ERROR_FAILURE);</span>
<a href="#l3.48"></a><span id="l3.48"> </span>
<a href="#l3.49"></a><span id="l3.49"> #else</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/importMsgs.properties</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/importMsgs.properties</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -330,14 +330,8 @@ ImportSelectSettings=Select settings fil</span>
<a href="#l4.4"></a><span id="l4.4"> ImportSelectMailDir=Select mail directory</span>
<a href="#l4.5"></a><span id="l4.5"> ImportSelectAddrDir=Select address book directory</span>
<a href="#l4.6"></a><span id="l4.6"> ImportSelectAddrFile=Select address book file</span>
<a href="#l4.7"></a><span id="l4.7"> </span>
<a href="#l4.8"></a><span id="l4.8"> # Folder Names for imported Mail</span>
<a href="#l4.9"></a><span id="l4.9"> DefaultFolderName=Imported Mail</span>
<a href="#l4.10"></a><span id="l4.10"> # LOCALIZATION NOTE: Do not translate the word &quot;%S&quot; below.</span>
<a href="#l4.11"></a><span id="l4.11"> ImportModuleFolderName=%S Import</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">- </span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-# LOCALIZATION NOTE : &quot;Communicator 4.x&quot; is the used for previous versions of Netscape Communicator</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-# Please translate using the brandname in respective languages for Netscape Communicator 4 releases.</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineminus">-# strings profile dialog that comes up when importing mail from 4.x</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineminus">-profileTitle=Communicator 4.x profiles</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineminus">-profileText=Choose the profile that contains the Local Mail you want to import:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/migration/migration.dtd</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/migration/migration.dtd</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -1,18 +1,18 @@</span>
<a href="#l5.4"></a><span id="l5.4"> </span>
<a href="#l5.5"></a><span id="l5.5"> &lt;!ENTITY migrationWizard.title          &quot;Import Wizard&quot;&gt;</span>
<a href="#l5.6"></a><span id="l5.6"> </span>
<a href="#l5.7"></a><span id="l5.7"> &lt;!ENTITY importFromWin.label            &quot;Import Options, Account Settings, Address Book, Filters and other data from:&quot;&gt;</span>
<a href="#l5.8"></a><span id="l5.8"> &lt;!ENTITY importFromNonWin.label         &quot;Import Preferences, Account Settings, Address Book, Filters, and other data from:&quot;&gt;</span>
<a href="#l5.9"></a><span id="l5.9"> </span>
<a href="#l5.10"></a><span id="l5.10"> &lt;!ENTITY importFromNothing.label        &quot;Don't import anything&quot;&gt;</span>
<a href="#l5.11"></a><span id="l5.11"> &lt;!ENTITY importFromNothing.accesskey    &quot;D&quot;&gt;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-&lt;!ENTITY importFromSeamonkey2.label     &quot;Netscape 6, 7, Mozilla 1.x or SeaMonkey&quot;&gt;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-&lt;!ENTITY importFromSeamonkey2.accesskey &quot;s&quot;&gt;</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+&lt;!ENTITY importFromSeamonkey3.label     &quot;SeaMonkey 2 or later&quot;&gt;</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineplus">+&lt;!ENTITY importFromSeamonkey3.accesskey &quot;S&quot;&gt;</span>
<a href="#l5.16"></a><span id="l5.16"> &lt;!ENTITY importFromOExpress.label       &quot;Outlook Express&quot;&gt;</span>
<a href="#l5.17"></a><span id="l5.17"> &lt;!ENTITY importFromOExpress.accesskey   &quot;u&quot;&gt;</span>
<a href="#l5.18"></a><span id="l5.18"> &lt;!ENTITY importFromOutlook.label        &quot;Outlook&quot;&gt;</span>
<a href="#l5.19"></a><span id="l5.19"> &lt;!ENTITY importFromOutlook.accesskey    &quot;O&quot;&gt;</span>
<a href="#l5.20"></a><span id="l5.20"> &lt;!ENTITY importFromEudora.label         &quot;Eudora&quot;&gt;</span>
<a href="#l5.21"></a><span id="l5.21"> &lt;!ENTITY importFromEudora.accesskey     &quot;E&quot;&gt;</span>
<a href="#l5.22"></a><span id="l5.22"> </span>
<a href="#l5.23"></a><span id="l5.23"> &lt;!ENTITY importSource.title             &quot;Import Settings and Mail Folders&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/migration/migration.properties</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/migration/migration.properties</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -1,15 +1,10 @@</span>
<a href="#l6.4"></a><span id="l6.4"> profileName_format=%S %S</span>
<a href="#l6.5"></a><span id="l6.5"> </span>
<a href="#l6.6"></a><span id="l6.6" class="difflineminus">-# Browser Specific</span>
<a href="#l6.7"></a><span id="l6.7" class="difflineminus">-sourceNameSeamonkey=Netscape 6/7/Mozilla</span>
<a href="#l6.8"></a><span id="l6.8" class="difflineminus">-sourceNameOExpress=Outlook Express</span>
<a href="#l6.9"></a><span id="l6.9" class="difflineminus">-sourceNameOutlook=Outlook</span>
<a href="#l6.10"></a><span id="l6.10" class="difflineminus">-</span>
<a href="#l6.11"></a><span id="l6.11"> # Import Sources</span>
<a href="#l6.12"></a><span id="l6.12"> 1_seamonkey=Preferences</span>
<a href="#l6.13"></a><span id="l6.13"> </span>
<a href="#l6.14"></a><span id="l6.14"> 2_seamonkey=Account Settings</span>
<a href="#l6.15"></a><span id="l6.15"> 2_oexpress=Account Settings</span>
<a href="#l6.16"></a><span id="l6.16"> 2_outlook=Account Settings</span>
<a href="#l6.17"></a><span id="l6.17"> 2_eudora=Account Settings</span>
<a href="#l6.18"></a><span id="l6.18"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/suite/build/nsSuiteModule.cpp</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/suite/build/nsSuiteModule.cpp</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -34,17 +34,16 @@</span>
<a href="#l7.4"></a><span id="l7.4">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l7.5"></a><span id="l7.5">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l7.6"></a><span id="l7.6">  *</span>
<a href="#l7.7"></a><span id="l7.7">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l7.8"></a><span id="l7.8"> </span>
<a href="#l7.9"></a><span id="l7.9"> #include &quot;mozilla/ModuleUtils.h&quot;</span>
<a href="#l7.10"></a><span id="l7.10"> #include &quot;nsSuiteDirectoryProvider.h&quot;</span>
<a href="#l7.11"></a><span id="l7.11"> #include &quot;nsProfileMigrator.h&quot;</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-#include &quot;nsSeamonkeyProfileMigrator.h&quot;</span>
<a href="#l7.13"></a><span id="l7.13"> #include &quot;nsThunderbirdProfileMigrator.h&quot;</span>
<a href="#l7.14"></a><span id="l7.14"> #include &quot;nsNetCID.h&quot;</span>
<a href="#l7.15"></a><span id="l7.15"> #include &quot;nsRDFCID.h&quot;</span>
<a href="#l7.16"></a><span id="l7.16"> #include &quot;nsFeedSniffer.h&quot;</span>
<a href="#l7.17"></a><span id="l7.17"> </span>
<a href="#l7.18"></a><span id="l7.18"> #if defined(XP_WIN)</span>
<a href="#l7.19"></a><span id="l7.19"> #if !defined(BUILD_STATIC_SHELL)</span>
<a href="#l7.20"></a><span id="l7.20"> #include &quot;nsWindowsShellService.h&quot;</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineat">@@ -63,63 +62,59 @@ NS_GENERIC_FACTORY_CONSTRUCTOR_INIT(nsWi</span>
<a href="#l7.22"></a><span id="l7.22"> #endif</span>
<a href="#l7.23"></a><span id="l7.23"> #elif defined(XP_MACOSX) &amp;&amp; !defined(BUILD_STATIC_SHELL)</span>
<a href="#l7.24"></a><span id="l7.24"> NS_GENERIC_FACTORY_CONSTRUCTOR(nsMacShellService)</span>
<a href="#l7.25"></a><span id="l7.25"> #elif defined(MOZ_WIDGET_GTK2) &amp;&amp; !defined(BUILD_STATIC_SHELL)</span>
<a href="#l7.26"></a><span id="l7.26"> NS_GENERIC_FACTORY_CONSTRUCTOR_INIT(nsGNOMEShellService, Init)</span>
<a href="#l7.27"></a><span id="l7.27"> #endif</span>
<a href="#l7.28"></a><span id="l7.28"> NS_GENERIC_FACTORY_CONSTRUCTOR(nsSuiteDirectoryProvider)</span>
<a href="#l7.29"></a><span id="l7.29"> NS_GENERIC_FACTORY_CONSTRUCTOR(nsProfileMigrator)</span>
<a href="#l7.30"></a><span id="l7.30" class="difflineminus">-NS_GENERIC_FACTORY_CONSTRUCTOR(nsSeamonkeyProfileMigrator)</span>
<a href="#l7.31"></a><span id="l7.31"> NS_GENERIC_FACTORY_CONSTRUCTOR(nsThunderbirdProfileMigrator)</span>
<a href="#l7.32"></a><span id="l7.32"> NS_GENERIC_FACTORY_CONSTRUCTOR(nsFeedSniffer)</span>
<a href="#l7.33"></a><span id="l7.33"> </span>
<a href="#l7.34"></a><span id="l7.34"> #if defined(NS_SUITEWININTEGRATION_CID)</span>
<a href="#l7.35"></a><span id="l7.35"> NS_DEFINE_NAMED_CID(NS_SUITEWININTEGRATION_CID);</span>
<a href="#l7.36"></a><span id="l7.36"> #elif defined(NS_SUITEMACINTEGRATION_CID)</span>
<a href="#l7.37"></a><span id="l7.37"> NS_DEFINE_NAMED_CID(NS_SUITEMACINTEGRATION_CID);</span>
<a href="#l7.38"></a><span id="l7.38"> #elif defined(NS_SUITEGNOMEINTEGRATION_CID)</span>
<a href="#l7.39"></a><span id="l7.39"> NS_DEFINE_NAMED_CID(NS_SUITEGNOMEINTEGRATION_CID);</span>
<a href="#l7.40"></a><span id="l7.40"> #endif</span>
<a href="#l7.41"></a><span id="l7.41"> NS_DEFINE_NAMED_CID(NS_SUITEDIRECTORYPROVIDER_CID);</span>
<a href="#l7.42"></a><span id="l7.42"> NS_DEFINE_NAMED_CID(NS_SUITEPROFILEMIGRATOR_CID);</span>
<a href="#l7.43"></a><span id="l7.43" class="difflineminus">-NS_DEFINE_NAMED_CID(NS_SEAMONKEYPROFILEMIGRATOR_CID);</span>
<a href="#l7.44"></a><span id="l7.44"> NS_DEFINE_NAMED_CID(NS_THUNDERBIRDPROFILEMIGRATOR_CID);</span>
<a href="#l7.45"></a><span id="l7.45"> NS_DEFINE_NAMED_CID(NS_FEEDSNIFFER_CID);</span>
<a href="#l7.46"></a><span id="l7.46"> </span>
<a href="#l7.47"></a><span id="l7.47"> /////////////////////////////////////////////////////////////////////////////</span>
<a href="#l7.48"></a><span id="l7.48"> </span>
<a href="#l7.49"></a><span id="l7.49"> static const mozilla::Module::CIDEntry kSuiteCIDs[] = {</span>
<a href="#l7.50"></a><span id="l7.50"> #if defined(NS_SUITEWININTEGRATION_CID)</span>
<a href="#l7.51"></a><span id="l7.51">   { &amp;kNS_SUITEWININTEGRATION_CID, false, NULL, nsWindowsShellServiceConstructor },</span>
<a href="#l7.52"></a><span id="l7.52"> #elif defined(NS_SUITEMACINTEGRATION_CID)</span>
<a href="#l7.53"></a><span id="l7.53">   { &amp;kNS_SUITEMACINTEGRATION_CID, false, NULL, nsMacShellServiceConstructor },</span>
<a href="#l7.54"></a><span id="l7.54"> #elif defined(NS_SUITEGNOMEINTEGRATION_CID)</span>
<a href="#l7.55"></a><span id="l7.55">   { &amp;kNS_SUITEGNOMEINTEGRATION_CID, false, NULL, nsGNOMEShellServiceConstructor },</span>
<a href="#l7.56"></a><span id="l7.56"> #endif</span>
<a href="#l7.57"></a><span id="l7.57">   { &amp;kNS_SUITEDIRECTORYPROVIDER_CID, false, NULL, nsSuiteDirectoryProviderConstructor },</span>
<a href="#l7.58"></a><span id="l7.58">   { &amp;kNS_SUITEPROFILEMIGRATOR_CID, false, NULL, nsProfileMigratorConstructor },</span>
<a href="#l7.59"></a><span id="l7.59" class="difflineminus">-  { &amp;kNS_SEAMONKEYPROFILEMIGRATOR_CID, false, NULL, nsSeamonkeyProfileMigratorConstructor },</span>
<a href="#l7.60"></a><span id="l7.60">   { &amp;kNS_THUNDERBIRDPROFILEMIGRATOR_CID, false, NULL, nsThunderbirdProfileMigratorConstructor },</span>
<a href="#l7.61"></a><span id="l7.61">   { &amp;kNS_FEEDSNIFFER_CID, false, NULL, nsFeedSnifferConstructor },</span>
<a href="#l7.62"></a><span id="l7.62">   { NULL }</span>
<a href="#l7.63"></a><span id="l7.63"> };</span>
<a href="#l7.64"></a><span id="l7.64"> </span>
<a href="#l7.65"></a><span id="l7.65"> static const mozilla::Module::ContractIDEntry kSuiteContracts[] = {</span>
<a href="#l7.66"></a><span id="l7.66"> #if defined(NS_SUITEWININTEGRATION_CID)</span>
<a href="#l7.67"></a><span id="l7.67">   { NS_SUITESHELLSERVICE_CONTRACTID, &amp;kNS_SUITEWININTEGRATION_CID },</span>
<a href="#l7.68"></a><span id="l7.68">   { NS_SUITEFEEDSERVICE_CONTRACTID, &amp;kNS_SUITEWININTEGRATION_CID },</span>
<a href="#l7.69"></a><span id="l7.69"> #elif defined(NS_SUITEMACINTEGRATION_CID)</span>
<a href="#l7.70"></a><span id="l7.70">   { NS_SUITEFEEDSERVICE_CONTRACTID, &amp;kNS_SUITEMACINTEGRATION_CID },</span>
<a href="#l7.71"></a><span id="l7.71"> #elif defined(NS_SUITEGNOMEINTEGRATION_CID)</span>
<a href="#l7.72"></a><span id="l7.72">   { NS_SUITEFEEDSERVICE_CONTRACTID, &amp;kNS_SUITEGNOMEINTEGRATION_CID },</span>
<a href="#l7.73"></a><span id="l7.73"> #endif</span>
<a href="#l7.74"></a><span id="l7.74">   { NS_SUITEDIRECTORYPROVIDER_CONTRACTID, &amp;kNS_SUITEDIRECTORYPROVIDER_CID },</span>
<a href="#l7.75"></a><span id="l7.75">   { NS_PROFILEMIGRATOR_CONTRACTID, &amp;kNS_SUITEPROFILEMIGRATOR_CID },</span>
<a href="#l7.76"></a><span id="l7.76" class="difflineminus">-  { NS_SUITEPROFILEMIGRATOR_CONTRACTID_PREFIX &quot;seamonkey&quot;, &amp;kNS_SEAMONKEYPROFILEMIGRATOR_CID },</span>
<a href="#l7.77"></a><span id="l7.77">   { NS_SUITEPROFILEMIGRATOR_CONTRACTID_PREFIX &quot;thunderbird&quot;, &amp;kNS_THUNDERBIRDPROFILEMIGRATOR_CID },</span>
<a href="#l7.78"></a><span id="l7.78">   { NS_FEEDSNIFFER_CONTRACTID, &amp;kNS_FEEDSNIFFER_CID },</span>
<a href="#l7.79"></a><span id="l7.79">   { NULL }</span>
<a href="#l7.80"></a><span id="l7.80"> };</span>
<a href="#l7.81"></a><span id="l7.81"> </span>
<a href="#l7.82"></a><span id="l7.82"> static const mozilla::Module::CategoryEntry kSuiteCategories[] = {</span>
<a href="#l7.83"></a><span id="l7.83">   { XPCOM_DIRECTORY_PROVIDER_CATEGORY, &quot;suite-directory-provider&quot;, NS_SUITEDIRECTORYPROVIDER_CONTRACTID },</span>
<a href="#l7.84"></a><span id="l7.84">   { NS_CONTENT_SNIFFER_CATEGORY, &quot;Feed Sniffer&quot;, NS_FEEDSNIFFER_CONTRACTID },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/suite/locales/en-US/chrome/common/migration/migration.dtd</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/common/migration/migration.dtd</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -1,15 +1,13 @@</span>
<a href="#l8.4"></a><span id="l8.4"> &lt;!ENTITY migrationWizard.title           &quot;Import Wizard&quot;&gt;</span>
<a href="#l8.5"></a><span id="l8.5"> </span>
<a href="#l8.6"></a><span id="l8.6"> &lt;!ENTITY importAllFrom.label             &quot;Import All Items from:&quot;&gt;</span>
<a href="#l8.7"></a><span id="l8.7"> &lt;!ENTITY importBookmarksFrom.label       &quot;Import Bookmarks from:&quot;&gt;</span>
<a href="#l8.8"></a><span id="l8.8"> </span>
<a href="#l8.9"></a><span id="l8.9" class="difflineminus">-&lt;!ENTITY importFromSeamonkey.label       &quot;SeaMonkey 1.x, Netscape 6/7 or Mozilla 1.x&quot;&gt;</span>
<a href="#l8.10"></a><span id="l8.10" class="difflineminus">-&lt;!ENTITY importFromSeamonkey.accesskey   &quot;S&quot;&gt;</span>
<a href="#l8.11"></a><span id="l8.11"> &lt;!ENTITY importFromThunderbird.label     &quot;Thunderbird&quot;&gt;</span>
<a href="#l8.12"></a><span id="l8.12"> &lt;!ENTITY importFromThunderbird.accesskey &quot;T&quot;&gt;</span>
<a href="#l8.13"></a><span id="l8.13"> &lt;!ENTITY importFromFile.label            &quot;File&quot;&gt;</span>
<a href="#l8.14"></a><span id="l8.14"> &lt;!ENTITY importFromFile.accesskey        &quot;F&quot;&gt;</span>
<a href="#l8.15"></a><span id="l8.15"> &lt;!ENTITY importFromNothing.label         &quot;Don't import anything&quot;&gt;</span>
<a href="#l8.16"></a><span id="l8.16"> &lt;!ENTITY importFromNothing.accesskey     &quot;D&quot;&gt;</span>
<a href="#l8.17"></a><span id="l8.17"> </span>
<a href="#l8.18"></a><span id="l8.18"> &lt;!ENTITY importSource.title              &quot;Import Settings and Data&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/suite/locales/en-US/chrome/common/migration/migration.properties</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/common/migration/migration.properties</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -6,17 +6,16 @@ homePageStartCurrent=Current SeaMonkey H</span>
<a href="#l9.4"></a><span id="l9.4"> homePageImport=Import your home page from %S</span>
<a href="#l9.5"></a><span id="l9.5"> </span>
<a href="#l9.6"></a><span id="l9.6"> homePageMigrationPageTitle=Home Page Selection</span>
<a href="#l9.7"></a><span id="l9.7"> homePageMigrationDescription=Please select the home page you wish to use:</span>
<a href="#l9.8"></a><span id="l9.8"> # end safe-to-not-have section</span>
<a href="#l9.9"></a><span id="l9.9"> </span>
<a href="#l9.10"></a><span id="l9.10"> # note that the names of apps are in lower case to fit in with the</span>
<a href="#l9.11"></a><span id="l9.11"> # protocol specifications.</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-sourceNameseamonkey=SeaMonkey 1.x, Netscape 6/7 or Mozilla 1.x</span>
<a href="#l9.13"></a><span id="l9.13"> sourceNamethunderbird=Thunderbird</span>
<a href="#l9.14"></a><span id="l9.14"> </span>
<a href="#l9.15"></a><span id="l9.15"> importedBookmarksFolder=From %S</span>
<a href="#l9.16"></a><span id="l9.16"> </span>
<a href="#l9.17"></a><span id="l9.17"> importedSeamonkeyBookmarksTitle=SeaMonkey 1.x, Netscape 6/7 or Mozilla 1.x</span>
<a href="#l9.18"></a><span id="l9.18"> </span>
<a href="#l9.19"></a><span id="l9.19"> # Import Sources</span>
<a href="#l9.20"></a><span id="l9.20"> # These are the string names for the values given in nsISuiteProfileMigrator.idl</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/suite/locales/en-US/chrome/mailnews/importMsgs.properties</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/mailnews/importMsgs.properties</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -332,14 +332,8 @@ ImportSelectSettings=Select Settings Fil</span>
<a href="#l10.4"></a><span id="l10.4"> ImportSelectMailDir=Select Mail Directory</span>
<a href="#l10.5"></a><span id="l10.5"> ImportSelectAddrDir=Select Address Book Directory</span>
<a href="#l10.6"></a><span id="l10.6"> ImportSelectAddrFile=Select Address Book File</span>
<a href="#l10.7"></a><span id="l10.7"> </span>
<a href="#l10.8"></a><span id="l10.8"> # Folder Names for imported Mail</span>
<a href="#l10.9"></a><span id="l10.9"> DefaultFolderName=Imported Mail</span>
<a href="#l10.10"></a><span id="l10.10"> # LOCALIZATION NOTE: Do not translate the word &quot;%S&quot; below.</span>
<a href="#l10.11"></a><span id="l10.11"> ImportModuleFolderName=%S Import</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">- </span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-# LOCALIZATION NOTE : &quot;Communicator 4.x&quot; is the used for previous versions of Netscape Communicator</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineminus">-# Please translate using the brandname in respective languages for Netscape Communicator 4 releases.</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineminus">-# strings profile dialog that comes up when importing mail from 4.x</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineminus">-profileTitle=Communicator 4.x profiles</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineminus">-profileText=Choose the profile that contains the Local Mail you want to import:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/suite/profile/migration.xul</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/suite/profile/migration.xul</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -60,18 +60,16 @@</span>
<a href="#l11.4"></a><span id="l11.4">               label=&quot;&amp;importSource.title;&quot;</span>
<a href="#l11.5"></a><span id="l11.5">               onpageadvanced=&quot;return MigrationWizard.onImportSourcePageAdvanced();&quot;&gt;</span>
<a href="#l11.6"></a><span id="l11.6">     &lt;label id=&quot;importAll&quot;</span>
<a href="#l11.7"></a><span id="l11.7">                  control=&quot;importSourceGroup&quot;&gt;&amp;importAllFrom.label;&lt;/label&gt;</span>
<a href="#l11.8"></a><span id="l11.8">     &lt;label id=&quot;importBookmarks&quot; control=&quot;importSourceGroup&quot;</span>
<a href="#l11.9"></a><span id="l11.9">                  hidden=&quot;true&quot;&gt;&amp;importBookmarksFrom.label;&lt;/label&gt;</span>
<a href="#l11.10"></a><span id="l11.10"> </span>
<a href="#l11.11"></a><span id="l11.11">     &lt;radiogroup id=&quot;importSourceGroup&quot; align=&quot;start&quot;&gt;</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-      &lt;radio id=&quot;seamonkey&quot; label=&quot;&amp;importFromSeamonkey.label;&quot;</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineminus">-             accesskey=&quot;&amp;importFromSeamonkey.accesskey;&quot; value=&quot;seamonkey&quot;/&gt;</span>
<a href="#l11.14"></a><span id="l11.14">       &lt;radio id=&quot;thunderbird&quot; label=&quot;&amp;importFromThunderbird.label;&quot;</span>
<a href="#l11.15"></a><span id="l11.15">              accesskey=&quot;&amp;importFromThunderbird.accesskey;&quot;</span>
<a href="#l11.16"></a><span id="l11.16">              value=&quot;thunderbird&quot;/&gt;</span>
<a href="#l11.17"></a><span id="l11.17">       &lt;!-- fromfile is used for bookmark importing --&gt;</span>
<a href="#l11.18"></a><span id="l11.18">       &lt;radio id=&quot;fromFile&quot; label=&quot;&amp;importFromFile.label;&quot; value=&quot;fromFile&quot;</span>
<a href="#l11.19"></a><span id="l11.19">              accesskey=&quot;&amp;importFromFile.accesskey;&quot; hidden=&quot;true&quot;/&gt;</span>
<a href="#l11.20"></a><span id="l11.20">       &lt;radio id=&quot;nothing&quot; label=&quot;&amp;importFromNothing.label;&quot; value=&quot;nothing&quot;</span>
<a href="#l11.21"></a><span id="l11.21">              accesskey=&quot;&amp;importFromNothing.accesskey;&quot; hidden=&quot;true&quot;/&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/suite/profile/migration/src/Makefile.in</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/suite/profile/migration/src/Makefile.in</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -43,16 +43,15 @@ include $(DEPTH)/config/autoconf.mk</span>
<a href="#l12.4"></a><span id="l12.4"> </span>
<a href="#l12.5"></a><span id="l12.5"> MODULE		= suitemigration</span>
<a href="#l12.6"></a><span id="l12.6"> LIBRARY_NAME	= suitemigration_s</span>
<a href="#l12.7"></a><span id="l12.7"> </span>
<a href="#l12.8"></a><span id="l12.8"> CPPSRCS = \</span>
<a href="#l12.9"></a><span id="l12.9"> 		nsProfileMigrator.cpp \</span>
<a href="#l12.10"></a><span id="l12.10"> 		nsSuiteProfileMigratorUtils.cpp \</span>
<a href="#l12.11"></a><span id="l12.11"> 		nsNetscapeProfileMigratorBase.cpp \</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-		nsSeamonkeyProfileMigrator.cpp \</span>
<a href="#l12.13"></a><span id="l12.13"> 		nsThunderbirdProfileMigrator.cpp \</span>
<a href="#l12.14"></a><span id="l12.14"> 		$(NULL)</span>
<a href="#l12.15"></a><span id="l12.15"> </span>
<a href="#l12.16"></a><span id="l12.16"> # we don't want the shared lib, but we want to force the creation of a static lib.</span>
<a href="#l12.17"></a><span id="l12.17"> FORCE_STATIC_LIB = 1</span>
<a href="#l12.18"></a><span id="l12.18"> </span>
<a href="#l12.19"></a><span id="l12.19"> include $(topsrcdir)/config/rules.mk</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/suite/profile/migration/src/nsProfileMigrator.cpp</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/suite/profile/migration/src/nsProfileMigrator.cpp</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -114,22 +114,19 @@ struct sInternalNameToMigratorName {</span>
<a href="#l13.4"></a><span id="l13.4"> </span>
<a href="#l13.5"></a><span id="l13.5"> static const sInternalNameToMigratorName nameMap[] = {</span>
<a href="#l13.6"></a><span id="l13.6">   // Possiblities for migrators when/if we have them</span>
<a href="#l13.7"></a><span id="l13.7">   // (&quot;iexplore&quot;, &quot;ie&quot;),</span>
<a href="#l13.8"></a><span id="l13.8">   // (&quot;opera&quot;, &quot;opera&quot;),</span>
<a href="#l13.9"></a><span id="l13.9">   // (&quot;firebird&quot;, &quot;firefox&quot;), Note: Internally the firebird-&gt;firefox migrator</span>
<a href="#l13.10"></a><span id="l13.10">   // (&quot;firefox&quot;, &quot;firefox&quot;),  in firefox is known as phoenix.</span>
<a href="#l13.11"></a><span id="l13.11">   // (&quot;phoenix&quot;, &quot;firefox&quot;),</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-  {&quot;seamonkey&quot;, &quot;seamonkey&quot;},</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineminus">-  {&quot;apprunner&quot;, &quot;seamonkey&quot;}</span>
<a href="#l13.14"></a><span id="l13.14"> };</span>
<a href="#l13.15"></a><span id="l13.15"> </span>
<a href="#l13.16"></a><span id="l13.16"> static const char* migratorNames[] = {</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineminus">-  &quot;seamonkey&quot;,</span>
<a href="#l13.18"></a><span id="l13.18">   &quot;thunderbird&quot;</span>
<a href="#l13.19"></a><span id="l13.19"> };</span>
<a href="#l13.20"></a><span id="l13.20"> </span>
<a href="#l13.21"></a><span id="l13.21"> // The purpose of this function is to attempt to get the default item</span>
<a href="#l13.22"></a><span id="l13.22"> // to migrate from the default browser key. If for some reason we haven't</span>
<a href="#l13.23"></a><span id="l13.23"> // got a default browser (e.g. wrong os) or we haven't got a migrator for</span>
<a href="#l13.24"></a><span id="l13.24"> // the default browser, then we'll just return a migrator which has profiles</span>
<a href="#l13.25"></a><span id="l13.25"> // that we can migrate.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/suite/profile/migration/src/nsProfileMigrator.h</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/suite/profile/migration/src/nsProfileMigrator.h</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -38,17 +38,17 @@</span>
<a href="#l14.4"></a><span id="l14.4"> #ifndef ProfileMigrator_h__</span>
<a href="#l14.5"></a><span id="l14.5"> #define ProfileMigrator_h__</span>
<a href="#l14.6"></a><span id="l14.6"> </span>
<a href="#l14.7"></a><span id="l14.7"> #include &quot;nsISuiteProfileMigrator.h&quot;</span>
<a href="#l14.8"></a><span id="l14.8"> #include &quot;nsIProfileMigrator.h&quot;</span>
<a href="#l14.9"></a><span id="l14.9"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l14.10"></a><span id="l14.10"> </span>
<a href="#l14.11"></a><span id="l14.11"> #define NS_SUITEPROFILEMIGRATOR_CID \</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-{ 0x0c12a924, 0xc052, 0x4c7d, { 0x82, 0x7b, 0xba, 0x8c, 0x96, 0x32, 0xa6, 0x36 } }</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+{ 0x4ca3c946, 0x5408, 0x49f0, { 0x9e, 0xca, 0x3a, 0x97, 0xd5, 0xc6, 0x77, 0x50 } }</span>
<a href="#l14.14"></a><span id="l14.14"> </span>
<a href="#l14.15"></a><span id="l14.15"> #define NS_SUITEPROFILEMIGRATOR_CONTRACTID_PREFIX &quot;@mozilla.org/profile/migrator;1?app=suite&amp;type=&quot;</span>
<a href="#l14.16"></a><span id="l14.16"> </span>
<a href="#l14.17"></a><span id="l14.17"> class nsProfileMigrator : public nsIProfileMigrator</span>
<a href="#l14.18"></a><span id="l14.18"> {</span>
<a href="#l14.19"></a><span id="l14.19"> public:</span>
<a href="#l14.20"></a><span id="l14.20">   NS_DECL_NSIPROFILEMIGRATOR</span>
<a href="#l14.21"></a><span id="l14.21">   NS_DECL_ISUPPORTS</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1">deleted file mode 100644</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineminus">--- a/suite/profile/migration/src/nsSeamonkeyProfileMigrator.cpp</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineplus">+++ /dev/null</span>
<a href="#l15.4"></a><span id="l15.4" class="difflineat">@@ -1,673 +0,0 @@</span>
<a href="#l15.5"></a><span id="l15.5" class="difflineminus">-/* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l15.6"></a><span id="l15.6" class="difflineminus">-/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l15.7"></a><span id="l15.7" class="difflineminus">- * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l15.8"></a><span id="l15.8" class="difflineminus">- *</span>
<a href="#l15.9"></a><span id="l15.9" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l15.10"></a><span id="l15.10" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l15.11"></a><span id="l15.11" class="difflineminus">- * the License. You may obtain a copy of the License at</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">- * http://www.mozilla.org/MPL/</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineminus">- *</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineminus">- * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineminus">- * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineminus">- * for the specific language governing rights and limitations under the</span>
<a href="#l15.17"></a><span id="l15.17" class="difflineminus">- * License.</span>
<a href="#l15.18"></a><span id="l15.18" class="difflineminus">- *</span>
<a href="#l15.19"></a><span id="l15.19" class="difflineminus">- * The Original Code is The Browser Profile Migrator.</span>
<a href="#l15.20"></a><span id="l15.20" class="difflineminus">- *</span>
<a href="#l15.21"></a><span id="l15.21" class="difflineminus">- * The Initial Developer of the Original Code is Ben Goodger.</span>
<a href="#l15.22"></a><span id="l15.22" class="difflineminus">- * Portions created by the Initial Developer are Copyright (C) 2004</span>
<a href="#l15.23"></a><span id="l15.23" class="difflineminus">- * the Initial Developer. All Rights Reserved.</span>
<a href="#l15.24"></a><span id="l15.24" class="difflineminus">- *</span>
<a href="#l15.25"></a><span id="l15.25" class="difflineminus">- * Contributor(s):</span>
<a href="#l15.26"></a><span id="l15.26" class="difflineminus">- *  Ben Goodger &lt;ben@bengoodger.com&gt;</span>
<a href="#l15.27"></a><span id="l15.27" class="difflineminus">- *</span>
<a href="#l15.28"></a><span id="l15.28" class="difflineminus">- * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l15.29"></a><span id="l15.29" class="difflineminus">- * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l15.30"></a><span id="l15.30" class="difflineminus">- * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l15.31"></a><span id="l15.31" class="difflineminus">- * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l15.32"></a><span id="l15.32" class="difflineminus">- * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l15.33"></a><span id="l15.33" class="difflineminus">- * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l15.34"></a><span id="l15.34" class="difflineminus">- * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l15.35"></a><span id="l15.35" class="difflineminus">- * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l15.36"></a><span id="l15.36" class="difflineminus">- * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l15.37"></a><span id="l15.37" class="difflineminus">- * the provisions above, a recipient may use your version of this file under</span>
<a href="#l15.38"></a><span id="l15.38" class="difflineminus">- * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l15.39"></a><span id="l15.39" class="difflineminus">- *</span>
<a href="#l15.40"></a><span id="l15.40" class="difflineminus">- * ***** END LICENSE BLOCK ***** */</span>
<a href="#l15.41"></a><span id="l15.41" class="difflineminus">-</span>
<a href="#l15.42"></a><span id="l15.42" class="difflineminus">-#include &quot;nsSuiteProfileMigratorUtils.h&quot;</span>
<a href="#l15.43"></a><span id="l15.43" class="difflineminus">-#include &quot;nsCRT.h&quot;</span>
<a href="#l15.44"></a><span id="l15.44" class="difflineminus">-#include &quot;nsDirectoryServiceDefs.h&quot;</span>
<a href="#l15.45"></a><span id="l15.45" class="difflineminus">-#include &quot;nsIObserverService.h&quot;</span>
<a href="#l15.46"></a><span id="l15.46" class="difflineminus">-#include &quot;nsIPrefLocalizedString.h&quot;</span>
<a href="#l15.47"></a><span id="l15.47" class="difflineminus">-#include &quot;nsIPrefService.h&quot;</span>
<a href="#l15.48"></a><span id="l15.48" class="difflineminus">-#include &quot;nsIServiceManager.h&quot;</span>
<a href="#l15.49"></a><span id="l15.49" class="difflineminus">-#include &quot;nsISupportsArray.h&quot;</span>
<a href="#l15.50"></a><span id="l15.50" class="difflineminus">-#include &quot;nsISupportsPrimitives.h&quot;</span>
<a href="#l15.51"></a><span id="l15.51" class="difflineminus">-#include &quot;nsNetCID.h&quot;</span>
<a href="#l15.52"></a><span id="l15.52" class="difflineminus">-#include &quot;nsNetUtil.h&quot;</span>
<a href="#l15.53"></a><span id="l15.53" class="difflineminus">-#include &quot;nsSeamonkeyProfileMigrator.h&quot;</span>
<a href="#l15.54"></a><span id="l15.54" class="difflineminus">-#include &quot;prprf.h&quot;</span>
<a href="#l15.55"></a><span id="l15.55" class="difflineminus">-</span>
<a href="#l15.56"></a><span id="l15.56" class="difflineminus">-///////////////////////////////////////////////////////////////////////////////</span>
<a href="#l15.57"></a><span id="l15.57" class="difflineminus">-// nsSeamonkeyProfileMigrator</span>
<a href="#l15.58"></a><span id="l15.58" class="difflineminus">-</span>
<a href="#l15.59"></a><span id="l15.59" class="difflineminus">-#define FILE_NAME_SITEPERM_OLD    &quot;cookperm.txt&quot;</span>
<a href="#l15.60"></a><span id="l15.60" class="difflineminus">-#define FILE_NAME_SITEPERM_NEW    &quot;hostperm.1&quot;</span>
<a href="#l15.61"></a><span id="l15.61" class="difflineminus">-#define FILE_NAME_CERT8DB         &quot;cert8.db&quot;</span>
<a href="#l15.62"></a><span id="l15.62" class="difflineminus">-#define FILE_NAME_KEY3DB          &quot;key3.db&quot;</span>
<a href="#l15.63"></a><span id="l15.63" class="difflineminus">-#define FILE_NAME_SECMODDB        &quot;secmod.db&quot;</span>
<a href="#l15.64"></a><span id="l15.64" class="difflineminus">-#define FILE_NAME_HISTORY         &quot;history.dat&quot;</span>
<a href="#l15.65"></a><span id="l15.65" class="difflineminus">-#define FILE_NAME_MIMETYPES       &quot;mimeTypes.rdf&quot;</span>
<a href="#l15.66"></a><span id="l15.66" class="difflineminus">-#define FILE_NAME_USER_PREFS      &quot;user.js&quot;</span>
<a href="#l15.67"></a><span id="l15.67" class="difflineminus">-#define FILE_NAME_PERSONALDICTIONARY &quot;persdict.dat&quot;</span>
<a href="#l15.68"></a><span id="l15.68" class="difflineminus">-#define FILE_NAME_MAILVIEWS       &quot;mailViews.dat&quot;</span>
<a href="#l15.69"></a><span id="l15.69" class="difflineminus">-#define FILE_NAME_USERCHROME      &quot;userChrome.css&quot;</span>
<a href="#l15.70"></a><span id="l15.70" class="difflineminus">-</span>
<a href="#l15.71"></a><span id="l15.71" class="difflineminus">-NS_IMPL_ISUPPORTS2(nsSeamonkeyProfileMigrator, nsISuiteProfileMigrator,</span>
<a href="#l15.72"></a><span id="l15.72" class="difflineminus">-                   nsITimerCallback)</span>
<a href="#l15.73"></a><span id="l15.73" class="difflineminus">-</span>
<a href="#l15.74"></a><span id="l15.74" class="difflineminus">-nsSeamonkeyProfileMigrator::nsSeamonkeyProfileMigrator()</span>
<a href="#l15.75"></a><span id="l15.75" class="difflineminus">-{</span>
<a href="#l15.76"></a><span id="l15.76" class="difflineminus">-}</span>
<a href="#l15.77"></a><span id="l15.77" class="difflineminus">-</span>
<a href="#l15.78"></a><span id="l15.78" class="difflineminus">-nsSeamonkeyProfileMigrator::~nsSeamonkeyProfileMigrator()</span>
<a href="#l15.79"></a><span id="l15.79" class="difflineminus">-{</span>
<a href="#l15.80"></a><span id="l15.80" class="difflineminus">-}</span>
<a href="#l15.81"></a><span id="l15.81" class="difflineminus">-</span>
<a href="#l15.82"></a><span id="l15.82" class="difflineminus">-///////////////////////////////////////////////////////////////////////////////</span>
<a href="#l15.83"></a><span id="l15.83" class="difflineminus">-// nsISuiteProfileMigrator</span>
<a href="#l15.84"></a><span id="l15.84" class="difflineminus">-</span>
<a href="#l15.85"></a><span id="l15.85" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l15.86"></a><span id="l15.86" class="difflineminus">-nsSeamonkeyProfileMigrator::Migrate(PRUint16 aItems,</span>
<a href="#l15.87"></a><span id="l15.87" class="difflineminus">-                                    nsIProfileStartup* aStartup,</span>
<a href="#l15.88"></a><span id="l15.88" class="difflineminus">-                                    const PRUnichar* aProfile)</span>
<a href="#l15.89"></a><span id="l15.89" class="difflineminus">-{</span>
<a href="#l15.90"></a><span id="l15.90" class="difflineminus">-  nsresult rv = NS_OK;</span>
<a href="#l15.91"></a><span id="l15.91" class="difflineminus">-  bool aReplace = aStartup ? true : false;</span>
<a href="#l15.92"></a><span id="l15.92" class="difflineminus">-</span>
<a href="#l15.93"></a><span id="l15.93" class="difflineminus">-  if (!mTargetProfile) {</span>
<a href="#l15.94"></a><span id="l15.94" class="difflineminus">-    GetProfilePath(aStartup, getter_AddRefs(mTargetProfile));</span>
<a href="#l15.95"></a><span id="l15.95" class="difflineminus">-    if (!mTargetProfile)</span>
<a href="#l15.96"></a><span id="l15.96" class="difflineminus">-      return NS_ERROR_FILE_NOT_FOUND;</span>
<a href="#l15.97"></a><span id="l15.97" class="difflineminus">-  }</span>
<a href="#l15.98"></a><span id="l15.98" class="difflineminus">-  if (!mSourceProfile) {</span>
<a href="#l15.99"></a><span id="l15.99" class="difflineminus">-    GetSourceProfile(aProfile);</span>
<a href="#l15.100"></a><span id="l15.100" class="difflineminus">-    if (!mSourceProfile)</span>
<a href="#l15.101"></a><span id="l15.101" class="difflineminus">-      return NS_ERROR_FILE_NOT_FOUND;</span>
<a href="#l15.102"></a><span id="l15.102" class="difflineminus">-  }</span>
<a href="#l15.103"></a><span id="l15.103" class="difflineminus">-</span>
<a href="#l15.104"></a><span id="l15.104" class="difflineminus">-  NOTIFY_OBSERVERS(MIGRATION_STARTED, nsnull);</span>
<a href="#l15.105"></a><span id="l15.105" class="difflineminus">-</span>
<a href="#l15.106"></a><span id="l15.106" class="difflineminus">-  if (aItems &amp; nsISuiteProfileMigrator::HOMEPAGEDATA)</span>
<a href="#l15.107"></a><span id="l15.107" class="difflineminus">-    COPY_DATA(CopyHomePageData, aReplace,</span>
<a href="#l15.108"></a><span id="l15.108" class="difflineminus">-              nsISuiteProfileMigrator::HOMEPAGEDATA);</span>
<a href="#l15.109"></a><span id="l15.109" class="difflineminus">-</span>
<a href="#l15.110"></a><span id="l15.110" class="difflineminus">-  COPY_DATA(CopyPreferences,  aReplace, nsISuiteProfileMigrator::SETTINGS);</span>
<a href="#l15.111"></a><span id="l15.111" class="difflineminus">-  COPY_DATA(CopyCookies,      aReplace, nsISuiteProfileMigrator::COOKIES);</span>
<a href="#l15.112"></a><span id="l15.112" class="difflineminus">-  COPY_DATA(CopyHistory,      aReplace, nsISuiteProfileMigrator::HISTORY);</span>
<a href="#l15.113"></a><span id="l15.113" class="difflineminus">-  COPY_DATA(CopyPasswords,    aReplace, nsISuiteProfileMigrator::PASSWORDS);</span>
<a href="#l15.114"></a><span id="l15.114" class="difflineminus">-  COPY_DATA(CopyOtherData,    aReplace, nsISuiteProfileMigrator::OTHERDATA);</span>
<a href="#l15.115"></a><span id="l15.115" class="difflineminus">-  COPY_DATA(CopyBookmarks,    aReplace, nsISuiteProfileMigrator::BOOKMARKS);</span>
<a href="#l15.116"></a><span id="l15.116" class="difflineminus">-</span>
<a href="#l15.117"></a><span id="l15.117" class="difflineminus">-  // fake notifications for things we've already imported as part of</span>
<a href="#l15.118"></a><span id="l15.118" class="difflineminus">-  // CopyPreferences</span>
<a href="#l15.119"></a><span id="l15.119" class="difflineminus">-  nsAutoString index;</span>
<a href="#l15.120"></a><span id="l15.120" class="difflineminus">-  index.AppendInt(nsISuiteProfileMigrator::ACCOUNT_SETTINGS);</span>
<a href="#l15.121"></a><span id="l15.121" class="difflineminus">-  NOTIFY_OBSERVERS(MIGRATION_ITEMBEFOREMIGRATE, index.get());</span>
<a href="#l15.122"></a><span id="l15.122" class="difflineminus">-  NOTIFY_OBSERVERS(MIGRATION_ITEMAFTERMIGRATE, index.get());</span>
<a href="#l15.123"></a><span id="l15.123" class="difflineminus">-</span>
<a href="#l15.124"></a><span id="l15.124" class="difflineminus">-  index.Truncate();</span>
<a href="#l15.125"></a><span id="l15.125" class="difflineminus">-  index.AppendInt(nsISuiteProfileMigrator::NEWSDATA);</span>
<a href="#l15.126"></a><span id="l15.126" class="difflineminus">-  NOTIFY_OBSERVERS(MIGRATION_ITEMBEFOREMIGRATE, index.get());</span>
<a href="#l15.127"></a><span id="l15.127" class="difflineminus">-  NOTIFY_OBSERVERS(MIGRATION_ITEMAFTERMIGRATE, index.get());</span>
<a href="#l15.128"></a><span id="l15.128" class="difflineminus">-</span>
<a href="#l15.129"></a><span id="l15.129" class="difflineminus">-  // copy junk mail training file</span>
<a href="#l15.130"></a><span id="l15.130" class="difflineminus">-  COPY_DATA(CopyJunkTraining, aReplace, nsISuiteProfileMigrator::JUNKTRAINING);</span>
<a href="#l15.131"></a><span id="l15.131" class="difflineminus">-</span>
<a href="#l15.132"></a><span id="l15.132" class="difflineminus">-  if (aReplace &amp;&amp;</span>
<a href="#l15.133"></a><span id="l15.133" class="difflineminus">-      (aItems &amp; nsISuiteProfileMigrator::SETTINGS ||</span>
<a href="#l15.134"></a><span id="l15.134" class="difflineminus">-       aItems &amp; nsISuiteProfileMigrator::COOKIES ||</span>
<a href="#l15.135"></a><span id="l15.135" class="difflineminus">-       aItems &amp; nsISuiteProfileMigrator::PASSWORDS ||</span>
<a href="#l15.136"></a><span id="l15.136" class="difflineminus">-       !aItems)) {</span>
<a href="#l15.137"></a><span id="l15.137" class="difflineminus">-    // Permissions (Images, Cookies, Popups)</span>
<a href="#l15.138"></a><span id="l15.138" class="difflineminus">-    rv |= CopyFile(FILE_NAME_SITEPERM_NEW, FILE_NAME_SITEPERM_NEW);</span>
<a href="#l15.139"></a><span id="l15.139" class="difflineminus">-    rv |= CopyFile(FILE_NAME_SITEPERM_OLD, FILE_NAME_SITEPERM_OLD);</span>
<a href="#l15.140"></a><span id="l15.140" class="difflineminus">-  }</span>
<a href="#l15.141"></a><span id="l15.141" class="difflineminus">-</span>
<a href="#l15.142"></a><span id="l15.142" class="difflineminus">-  // the last thing to do is to actually copy over any mail folders we have</span>
<a href="#l15.143"></a><span id="l15.143" class="difflineminus">-  // marked for copying we want to do this last and it will be asynchronous</span>
<a href="#l15.144"></a><span id="l15.144" class="difflineminus">-  // so the UI doesn't freeze up while we perform this potentially very long</span>
<a href="#l15.145"></a><span id="l15.145" class="difflineminus">-  // operation.</span>
<a href="#l15.146"></a><span id="l15.146" class="difflineminus">-  CopyMailFolders();</span>
<a href="#l15.147"></a><span id="l15.147" class="difflineminus">-</span>
<a href="#l15.148"></a><span id="l15.148" class="difflineminus">-  return rv;</span>
<a href="#l15.149"></a><span id="l15.149" class="difflineminus">-}</span>
<a href="#l15.150"></a><span id="l15.150" class="difflineminus">-</span>
<a href="#l15.151"></a><span id="l15.151" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l15.152"></a><span id="l15.152" class="difflineminus">-nsSeamonkeyProfileMigrator::GetMigrateData(const PRUnichar* aProfile,</span>
<a href="#l15.153"></a><span id="l15.153" class="difflineminus">-                                           bool aReplace,</span>
<a href="#l15.154"></a><span id="l15.154" class="difflineminus">-                                           PRUint16* aResult)</span>
<a href="#l15.155"></a><span id="l15.155" class="difflineminus">-{</span>
<a href="#l15.156"></a><span id="l15.156" class="difflineminus">-  *aResult = 0;</span>
<a href="#l15.157"></a><span id="l15.157" class="difflineminus">-</span>
<a href="#l15.158"></a><span id="l15.158" class="difflineminus">-  if (!mSourceProfile) {</span>
<a href="#l15.159"></a><span id="l15.159" class="difflineminus">-    GetSourceProfile(aProfile);</span>
<a href="#l15.160"></a><span id="l15.160" class="difflineminus">-    if (!mSourceProfile)</span>
<a href="#l15.161"></a><span id="l15.161" class="difflineminus">-      return NS_ERROR_FILE_NOT_FOUND;</span>
<a href="#l15.162"></a><span id="l15.162" class="difflineminus">-  }</span>
<a href="#l15.163"></a><span id="l15.163" class="difflineminus">-</span>
<a href="#l15.164"></a><span id="l15.164" class="difflineminus">-  // migration fields for things we always migrate</span>
<a href="#l15.165"></a><span id="l15.165" class="difflineminus">-  *aResult =</span>
<a href="#l15.166"></a><span id="l15.166" class="difflineminus">-    nsISuiteProfileMigrator::ACCOUNT_SETTINGS |</span>
<a href="#l15.167"></a><span id="l15.167" class="difflineminus">-    nsISuiteProfileMigrator::MAILDATA |</span>
<a href="#l15.168"></a><span id="l15.168" class="difflineminus">-    nsISuiteProfileMigrator::NEWSDATA |</span>
<a href="#l15.169"></a><span id="l15.169" class="difflineminus">-    nsISuiteProfileMigrator::ADDRESSBOOK_DATA;</span>
<a href="#l15.170"></a><span id="l15.170" class="difflineminus">-</span>
<a href="#l15.171"></a><span id="l15.171" class="difflineminus">-  MigrationData data[] = { { FILE_NAME_PREFS,</span>
<a href="#l15.172"></a><span id="l15.172" class="difflineminus">-                             nsISuiteProfileMigrator::SETTINGS,</span>
<a href="#l15.173"></a><span id="l15.173" class="difflineminus">-                             PR_TRUE },</span>
<a href="#l15.174"></a><span id="l15.174" class="difflineminus">-                           { FILE_NAME_USER_PREFS,</span>
<a href="#l15.175"></a><span id="l15.175" class="difflineminus">-                             nsISuiteProfileMigrator::SETTINGS,</span>
<a href="#l15.176"></a><span id="l15.176" class="difflineminus">-                             PR_TRUE },</span>
<a href="#l15.177"></a><span id="l15.177" class="difflineminus">-                           { FILE_NAME_COOKIES,</span>
<a href="#l15.178"></a><span id="l15.178" class="difflineminus">-                             nsISuiteProfileMigrator::COOKIES,</span>
<a href="#l15.179"></a><span id="l15.179" class="difflineminus">-                             PR_FALSE },</span>
<a href="#l15.180"></a><span id="l15.180" class="difflineminus">-                           { FILE_NAME_HISTORY,</span>
<a href="#l15.181"></a><span id="l15.181" class="difflineminus">-                             nsISuiteProfileMigrator::HISTORY,</span>
<a href="#l15.182"></a><span id="l15.182" class="difflineminus">-                             PR_TRUE },</span>
<a href="#l15.183"></a><span id="l15.183" class="difflineminus">-                           { FILE_NAME_BOOKMARKS,</span>
<a href="#l15.184"></a><span id="l15.184" class="difflineminus">-                             nsISuiteProfileMigrator::BOOKMARKS,</span>
<a href="#l15.185"></a><span id="l15.185" class="difflineminus">-                             PR_FALSE },</span>
<a href="#l15.186"></a><span id="l15.186" class="difflineminus">-                           { FILE_NAME_DOWNLOADS,</span>
<a href="#l15.187"></a><span id="l15.187" class="difflineminus">-                             nsISuiteProfileMigrator::OTHERDATA,</span>
<a href="#l15.188"></a><span id="l15.188" class="difflineminus">-                             PR_TRUE },</span>
<a href="#l15.189"></a><span id="l15.189" class="difflineminus">-                           { FILE_NAME_MIMETYPES,</span>
<a href="#l15.190"></a><span id="l15.190" class="difflineminus">-                             nsISuiteProfileMigrator::OTHERDATA,</span>
<a href="#l15.191"></a><span id="l15.191" class="difflineminus">-                             PR_TRUE },</span>
<a href="#l15.192"></a><span id="l15.192" class="difflineminus">-                           { FILE_NAME_JUNKTRAINING,</span>
<a href="#l15.193"></a><span id="l15.193" class="difflineminus">-                             nsISuiteProfileMigrator::JUNKTRAINING,</span>
<a href="#l15.194"></a><span id="l15.194" class="difflineminus">-                             PR_TRUE } };</span>
<a href="#l15.195"></a><span id="l15.195" class="difflineminus">-</span>
<a href="#l15.196"></a><span id="l15.196" class="difflineminus">-  GetMigrateDataFromArray(data, sizeof(data)/sizeof(MigrationData),</span>
<a href="#l15.197"></a><span id="l15.197" class="difflineminus">-                          aReplace, mSourceProfile, aResult);</span>
<a href="#l15.198"></a><span id="l15.198" class="difflineminus">-</span>
<a href="#l15.199"></a><span id="l15.199" class="difflineminus">-  // Now locate passwords</span>
<a href="#l15.200"></a><span id="l15.200" class="difflineminus">-  nsCString signonsFileName;</span>
<a href="#l15.201"></a><span id="l15.201" class="difflineminus">-  GetSignonFileName(aReplace, getter_Copies(signonsFileName));</span>
<a href="#l15.202"></a><span id="l15.202" class="difflineminus">-</span>
<a href="#l15.203"></a><span id="l15.203" class="difflineminus">-  if (!signonsFileName.IsEmpty()) {</span>
<a href="#l15.204"></a><span id="l15.204" class="difflineminus">-    nsCOMPtr&lt;nsIFile&gt; sourcePasswordsFile;</span>
<a href="#l15.205"></a><span id="l15.205" class="difflineminus">-    mSourceProfile-&gt;Clone(getter_AddRefs(sourcePasswordsFile));</span>
<a href="#l15.206"></a><span id="l15.206" class="difflineminus">-    sourcePasswordsFile-&gt;AppendNative(signonsFileName);</span>
<a href="#l15.207"></a><span id="l15.207" class="difflineminus">-</span>
<a href="#l15.208"></a><span id="l15.208" class="difflineminus">-    bool exists;</span>
<a href="#l15.209"></a><span id="l15.209" class="difflineminus">-    sourcePasswordsFile-&gt;Exists(&amp;exists);</span>
<a href="#l15.210"></a><span id="l15.210" class="difflineminus">-    if (exists)</span>
<a href="#l15.211"></a><span id="l15.211" class="difflineminus">-      *aResult |= nsISuiteProfileMigrator::PASSWORDS;</span>
<a href="#l15.212"></a><span id="l15.212" class="difflineminus">-  }</span>
<a href="#l15.213"></a><span id="l15.213" class="difflineminus">-</span>
<a href="#l15.214"></a><span id="l15.214" class="difflineminus">-  // Now see if the homepages have anything to migrate.</span>
<a href="#l15.215"></a><span id="l15.215" class="difflineminus">-  if (GetSourceHasHomePageURL())</span>
<a href="#l15.216"></a><span id="l15.216" class="difflineminus">-    *aResult |= nsISuiteProfileMigrator::HOMEPAGEDATA;</span>
<a href="#l15.217"></a><span id="l15.217" class="difflineminus">-</span>
<a href="#l15.218"></a><span id="l15.218" class="difflineminus">-  return NS_OK;</span>
<a href="#l15.219"></a><span id="l15.219" class="difflineminus">-}</span>
<a href="#l15.220"></a><span id="l15.220" class="difflineminus">-</span>
<a href="#l15.221"></a><span id="l15.221" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l15.222"></a><span id="l15.222" class="difflineminus">-nsSeamonkeyProfileMigrator::GetSupportedItems(PRUint16 *aSupportedItems)</span>
<a href="#l15.223"></a><span id="l15.223" class="difflineminus">-{</span>
<a href="#l15.224"></a><span id="l15.224" class="difflineminus">-  NS_ENSURE_ARG_POINTER(aSupportedItems);</span>
<a href="#l15.225"></a><span id="l15.225" class="difflineminus">-</span>
<a href="#l15.226"></a><span id="l15.226" class="difflineminus">-  *aSupportedItems = nsISuiteProfileMigrator::ALL;</span>
<a href="#l15.227"></a><span id="l15.227" class="difflineminus">-</span>
<a href="#l15.228"></a><span id="l15.228" class="difflineminus">-  return NS_OK;</span>
<a href="#l15.229"></a><span id="l15.229" class="difflineminus">-}</span>
<a href="#l15.230"></a><span id="l15.230" class="difflineminus">-</span>
<a href="#l15.231"></a><span id="l15.231" class="difflineminus">-nsresult</span>
<a href="#l15.232"></a><span id="l15.232" class="difflineminus">-nsSeamonkeyProfileMigrator::FillProfileDataFromRegistry()</span>
<a href="#l15.233"></a><span id="l15.233" class="difflineminus">-{</span>
<a href="#l15.234"></a><span id="l15.234" class="difflineminus">-  return NS_ERROR_FILE_NOT_FOUND;</span>
<a href="#l15.235"></a><span id="l15.235" class="difflineminus">-}</span>
<a href="#l15.236"></a><span id="l15.236" class="difflineminus">-</span>
<a href="#l15.237"></a><span id="l15.237" class="difflineminus">-static</span>
<a href="#l15.238"></a><span id="l15.238" class="difflineminus">-nsSeamonkeyProfileMigrator::PrefTransform gTransforms[] = {</span>
<a href="#l15.239"></a><span id="l15.239" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;addressbook.throbber.url&quot;,                String),</span>
<a href="#l15.240"></a><span id="l15.240" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;advanced.mailftp&quot;,                        Bool),</span>
<a href="#l15.241"></a><span id="l15.241" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;application.use_ns_plugin_finder&quot;,        Bool),</span>
<a href="#l15.242"></a><span id="l15.242" class="difflineminus">-</span>
<a href="#l15.243"></a><span id="l15.243" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;alerts.slideIncrement&quot;,                   Int),</span>
<a href="#l15.244"></a><span id="l15.244" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;alerts.slideIncrementTime&quot;,               Int),</span>
<a href="#l15.245"></a><span id="l15.245" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;alerts.totalOpenTime&quot;,                    Int),</span>
<a href="#l15.246"></a><span id="l15.246" class="difflineminus">-</span>
<a href="#l15.247"></a><span id="l15.247" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.anchor_color&quot;,                    String),</span>
<a href="#l15.248"></a><span id="l15.248" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.active_color&quot;,                    String),</span>
<a href="#l15.249"></a><span id="l15.249" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.backspace_action&quot;,                Int),</span>
<a href="#l15.250"></a><span id="l15.250" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.blink_allowed&quot;,                   Bool),</span>
<a href="#l15.251"></a><span id="l15.251" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.cache.disk.capacity&quot;,             Int),</span>
<a href="#l15.252"></a><span id="l15.252" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.cache.check_doc_frequency&quot;,       Int),</span>
<a href="#l15.253"></a><span id="l15.253" class="difflineminus">-</span>
<a href="#l15.254"></a><span id="l15.254" class="difflineminus">-  // Note browser.download.* prefs are covered below.</span>
<a href="#l15.255"></a><span id="l15.255" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.downloadmanager.behavior&quot;,        Int),</span>
<a href="#l15.256"></a><span id="l15.256" class="difflineminus">-</span>
<a href="#l15.257"></a><span id="l15.257" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.enable_automatic_image_resizing&quot;, Bool),</span>
<a href="#l15.258"></a><span id="l15.258" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.fixup.alternate.enabled&quot;,         Bool),</span>
<a href="#l15.259"></a><span id="l15.259" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.fixup.alternate.prefix&quot;,          String),</span>
<a href="#l15.260"></a><span id="l15.260" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.fixup.alternate.suffix&quot;,          String),</span>
<a href="#l15.261"></a><span id="l15.261" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.fixup.hide_user_pass&quot;,            Bool),</span>
<a href="#l15.262"></a><span id="l15.262" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.frames.enabled&quot;,                  Bool),</span>
<a href="#l15.263"></a><span id="l15.263" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.history.grouping&quot;,                String),</span>
<a href="#l15.264"></a><span id="l15.264" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.link.open_external&quot;,              Int),</span>
<a href="#l15.265"></a><span id="l15.265" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.link.open_newwindow&quot;,             Int),</span>
<a href="#l15.266"></a><span id="l15.266" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.open.dir&quot;,                        String),</span>
<a href="#l15.267"></a><span id="l15.267" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.related.disableForDomains&quot;,       String),</span>
<a href="#l15.268"></a><span id="l15.268" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.related.provider&quot;,                String),</span>
<a href="#l15.269"></a><span id="l15.269" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.send_pings&quot;,                      Bool),</span>
<a href="#l15.270"></a><span id="l15.270" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.sessionhistory.max_entries&quot;,      Int),</span>
<a href="#l15.271"></a><span id="l15.271" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.sessionhistory.max_total_viewers&quot;,Int),</span>
<a href="#l15.272"></a><span id="l15.272" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.startup.page&quot;,                    Int),</span>
<a href="#l15.273"></a><span id="l15.273" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.throbber.url&quot;,                    String),</span>
<a href="#l15.274"></a><span id="l15.274" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.triple_click_selects_paragraph&quot;,  Bool),</span>
<a href="#l15.275"></a><span id="l15.275" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.underline_anchors&quot;,               Bool),</span>
<a href="#l15.276"></a><span id="l15.276" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.visited_color&quot;,                   String),</span>
<a href="#l15.277"></a><span id="l15.277" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;browser.windows.loadOnNewWindow&quot;,         Int),</span>
<a href="#l15.278"></a><span id="l15.278" class="difflineminus">-</span>
<a href="#l15.279"></a><span id="l15.279" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;compose.throbber.url&quot;,                    String),</span>
<a href="#l15.280"></a><span id="l15.280" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;config.use_system_prefs&quot;,                 Bool),</span>
<a href="#l15.281"></a><span id="l15.281" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;config.use_system_prefs.accessibility&quot;,   Bool),</span>
<a href="#l15.282"></a><span id="l15.282" class="difflineminus">-</span>
<a href="#l15.283"></a><span id="l15.283" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;custtoolbar.personal_toolbar_folder&quot;,     String),</span>
<a href="#l15.284"></a><span id="l15.284" class="difflineminus">-</span>
<a href="#l15.285"></a><span id="l15.285" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;dom.disable_open_during_load&quot;,            Bool),</span>
<a href="#l15.286"></a><span id="l15.286" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;dom.disable_image_src_set&quot;,               Bool),</span>
<a href="#l15.287"></a><span id="l15.287" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;dom.disable_window_flip&quot;,                 Bool),</span>
<a href="#l15.288"></a><span id="l15.288" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;dom.disable_window_move_resize&quot;,          Bool),</span>
<a href="#l15.289"></a><span id="l15.289" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;dom.disable_window_open_feature.status&quot;,  Bool),</span>
<a href="#l15.290"></a><span id="l15.290" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;dom.disable_window_status_change&quot;,        Bool),</span>
<a href="#l15.291"></a><span id="l15.291" class="difflineminus">-</span>
<a href="#l15.292"></a><span id="l15.292" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;extensions.spellcheck.inline.max-misspellings&quot;,Int),</span>
<a href="#l15.293"></a><span id="l15.293" class="difflineminus">-</span>
<a href="#l15.294"></a><span id="l15.294" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;general.autoScroll&quot;,                      Bool),</span>
<a href="#l15.295"></a><span id="l15.295" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;general.open_location.last_url&quot;,          String),</span>
<a href="#l15.296"></a><span id="l15.296" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;general.open_location.last_window_choice&quot;,Int),</span>
<a href="#l15.297"></a><span id="l15.297" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;general.smoothScroll&quot;,                    Bool),</span>
<a href="#l15.298"></a><span id="l15.298" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;general.warnOnAboutConfig&quot;,               Bool),</span>
<a href="#l15.299"></a><span id="l15.299" class="difflineminus">-</span>
<a href="#l15.300"></a><span id="l15.300" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;image.animation_mode&quot;,                    String),</span>
<a href="#l15.301"></a><span id="l15.301" class="difflineminus">-</span>
<a href="#l15.302"></a><span id="l15.302" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;intl.accept_charsets&quot;,                    String),</span>
<a href="#l15.303"></a><span id="l15.303" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;intl.accept_languages&quot;,                   String),</span>
<a href="#l15.304"></a><span id="l15.304" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;intl.charset.default&quot;,                    String),</span>
<a href="#l15.305"></a><span id="l15.305" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;intl.charsetmenu.browser.static&quot;,         String),</span>
<a href="#l15.306"></a><span id="l15.306" class="difflineminus">-</span>
<a href="#l15.307"></a><span id="l15.307" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;javascript.enabled&quot;,                      Bool),</span>
<a href="#l15.308"></a><span id="l15.308" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;javascript.options.relimit&quot;,              Bool),</span>
<a href="#l15.309"></a><span id="l15.309" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;javascript.options.showInConsole&quot;,        Bool),</span>
<a href="#l15.310"></a><span id="l15.310" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;javascript.options.strict&quot;,               Bool),</span>
<a href="#l15.311"></a><span id="l15.311" class="difflineminus">-</span>
<a href="#l15.312"></a><span id="l15.312" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;keyword.URL&quot;,                             String),</span>
<a href="#l15.313"></a><span id="l15.313" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;keyword.enabled&quot;,                         Bool),</span>
<a href="#l15.314"></a><span id="l15.314" class="difflineminus">-</span>
<a href="#l15.315"></a><span id="l15.315" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;layout.css.dpi&quot;,                          Int),</span>
<a href="#l15.316"></a><span id="l15.316" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;layout.spellcheckDefault&quot;,                Int),</span>
<a href="#l15.317"></a><span id="l15.317" class="difflineminus">-</span>
<a href="#l15.318"></a><span id="l15.318" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.accountmanager.accounts&quot;,            String),</span>
<a href="#l15.319"></a><span id="l15.319" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.accountmanager.defaultaccount&quot;,      String),</span>
<a href="#l15.320"></a><span id="l15.320" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.accountmanager.localfoldersserver&quot;,  String),</span>
<a href="#l15.321"></a><span id="l15.321" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.accountwizard.deferstorage&quot;,         Bool),</span>
<a href="#l15.322"></a><span id="l15.322" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.adaptivefilters.junk_threshold&quot;,     Int),</span>
<a href="#l15.323"></a><span id="l15.323" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.autoComplete.highlightNonMatches&quot;,   Bool),</span>
<a href="#l15.324"></a><span id="l15.324" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.biff.animate_doc_icon&quot;,              Bool),</span>
<a href="#l15.325"></a><span id="l15.325" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.biff.play_sound&quot;,                    Bool),</span>
<a href="#l15.326"></a><span id="l15.326" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.biff.play_sound.type&quot;,               Int),</span>
<a href="#l15.327"></a><span id="l15.327" class="difflineminus">-  MAKEPREFTRANSFORM(&quot;mail.biff.play_sound.url&quot;, 0, String,             File),</span>
<a href="#l15.328"></a><span id="l15.328" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.biff.show_alert&quot;,                    Bool),</span>
<a href="#l15.329"></a><span id="l15.329" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.biff.show_tray_icon&quot;,                Bool),</span>
<a href="#l15.330"></a><span id="l15.330" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.check_all_imap_folders_for_new&quot;,     Bool),</span>
<a href="#l15.331"></a><span id="l15.331" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.citation_color&quot;,                     String),</span>
<a href="#l15.332"></a><span id="l15.332" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.collect_addressbook&quot;,                String),</span>
<a href="#l15.333"></a><span id="l15.333" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.collect_email_address_incoming&quot;,     Bool),</span>
<a href="#l15.334"></a><span id="l15.334" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.collect_email_address_newsgroup&quot;,    Bool),</span>
<a href="#l15.335"></a><span id="l15.335" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.collect_email_address_outgoing&quot;,     Bool),</span>
<a href="#l15.336"></a><span id="l15.336" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.compose.add_undisclosed_recipients&quot;, Bool),</span>
<a href="#l15.337"></a><span id="l15.337" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.compose.attach.dir&quot;,                 String),</span>
<a href="#l15.338"></a><span id="l15.338" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.compose.autosave&quot;,                   Bool),</span>
<a href="#l15.339"></a><span id="l15.339" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.compose.autosaveinterval&quot;,           Int),</span>
<a href="#l15.340"></a><span id="l15.340" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.compose.dont_attach_source_of_local_network_links&quot;, Bool),</span>
<a href="#l15.341"></a><span id="l15.341" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.compose.dontWarnMail2Newsgroup&quot;,     Bool),</span>
<a href="#l15.342"></a><span id="l15.342" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.compose.max_recycled_windows&quot;,       Int),</span>
<a href="#l15.343"></a><span id="l15.343" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.compose.other.header&quot;,               String),</span>
<a href="#l15.344"></a><span id="l15.344" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.compose.wrap_to_window_width&quot;,       Bool),</span>
<a href="#l15.345"></a><span id="l15.345" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.content_disposition_type&quot;,           Int),</span>
<a href="#l15.346"></a><span id="l15.346" class="difflineminus">-</span>
<a href="#l15.347"></a><span id="l15.347" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.default_html_action&quot;,                Int),</span>
<a href="#l15.348"></a><span id="l15.348" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.default_sendlater_uri&quot;,              String),</span>
<a href="#l15.349"></a><span id="l15.349" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.delete_matches_sort_order&quot;,          Bool),</span>
<a href="#l15.350"></a><span id="l15.350" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.display_glyph&quot;,                      Bool),</span>
<a href="#l15.351"></a><span id="l15.351" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.display_struct&quot;,                     Bool),</span>
<a href="#l15.352"></a><span id="l15.352" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.enable_autocomplete&quot;,                Bool),</span>
<a href="#l15.353"></a><span id="l15.353" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.fcc_folder&quot;,                         String),</span>
<a href="#l15.354"></a><span id="l15.354" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.file_attach_binary&quot;,                 Bool),</span>
<a href="#l15.355"></a><span id="l15.355" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.fixed_width_messages&quot;,               Bool),</span>
<a href="#l15.356"></a><span id="l15.356" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.forward_message_mode&quot;,               Int),</span>
<a href="#l15.357"></a><span id="l15.357" class="difflineminus">-</span>
<a href="#l15.358"></a><span id="l15.358" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.incorporate.return_receipt&quot;,         Int),</span>
<a href="#l15.359"></a><span id="l15.359" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.inline_attachments&quot;,                 Bool),</span>
<a href="#l15.360"></a><span id="l15.360" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.label_ascii_only_mail_as_us_ascii&quot;,  Bool),</span>
<a href="#l15.361"></a><span id="l15.361" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.notification.sound&quot;,                 String),</span>
<a href="#l15.362"></a><span id="l15.362" class="difflineminus">-</span>
<a href="#l15.363"></a><span id="l15.363" class="difflineminus">-  MAKEPREFTRANSFORM(&quot;mail.pane_config&quot;, &quot;mail.pane_config.dynamic&quot;, Int, Int),</span>
<a href="#l15.364"></a><span id="l15.364" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.pane_config.dynamic&quot;,                Int),</span>
<a href="#l15.365"></a><span id="l15.365" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.password_protect_local_cache&quot;,       Bool),</span>
<a href="#l15.366"></a><span id="l15.366" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.phishing.detection.enabled&quot;,         Bool),</span>
<a href="#l15.367"></a><span id="l15.367" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.pop3.deleteFromServerOnMove&quot;,        Bool),</span>
<a href="#l15.368"></a><span id="l15.368" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.prompt_purge_threshhold&quot;,            Bool),</span>
<a href="#l15.369"></a><span id="l15.369" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.purge_threshhold&quot;,                   Int),</span>
<a href="#l15.370"></a><span id="l15.370" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.purge.ask&quot;,                          Bool),</span>
<a href="#l15.371"></a><span id="l15.371" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.purge.min_delay&quot;,                    Int),</span>
<a href="#l15.372"></a><span id="l15.372" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.purge.timer_interval&quot;,               Int),</span>
<a href="#l15.373"></a><span id="l15.373" class="difflineminus">-</span>
<a href="#l15.374"></a><span id="l15.374" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.quoteasblock&quot;,                       Bool),</span>
<a href="#l15.375"></a><span id="l15.375" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.quoted_graphical&quot;,                   Bool),</span>
<a href="#l15.376"></a><span id="l15.376" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.quoted_size&quot;,                        Int),</span>
<a href="#l15.377"></a><span id="l15.377" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.quoted_style&quot;,                       Int),</span>
<a href="#l15.378"></a><span id="l15.378" class="difflineminus">-</span>
<a href="#l15.379"></a><span id="l15.379" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.receipt.request_header_type&quot;,        Int),</span>
<a href="#l15.380"></a><span id="l15.380" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.receipt.request_return_receipt_on&quot;,  Bool),</span>
<a href="#l15.381"></a><span id="l15.381" class="difflineminus">-</span>
<a href="#l15.382"></a><span id="l15.382" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.send_struct&quot;,                        Bool),</span>
<a href="#l15.383"></a><span id="l15.383" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.show_headers&quot;,                       Int),</span>
<a href="#l15.384"></a><span id="l15.384" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.smtp.useMatchingDomainServer&quot;,       Bool),</span>
<a href="#l15.385"></a><span id="l15.385" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.smtp.useMatchingHostNameServer&quot;,     Bool),</span>
<a href="#l15.386"></a><span id="l15.386" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.smtp.defaultserver&quot;,                 String),</span>
<a href="#l15.387"></a><span id="l15.387" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.smtpservers&quot;,                        String),</span>
<a href="#l15.388"></a><span id="l15.388" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.spellcheck.inline&quot;,                  Bool),</span>
<a href="#l15.389"></a><span id="l15.389" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.SpellCheckBeforeSend&quot;,               Bool),</span>
<a href="#l15.390"></a><span id="l15.390" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.startup.enabledMailCheckOnce&quot;,       Bool),</span>
<a href="#l15.391"></a><span id="l15.391" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.strict_threading&quot;,                   Bool),</span>
<a href="#l15.392"></a><span id="l15.392" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.strictly_mime&quot;,                      Bool),</span>
<a href="#l15.393"></a><span id="l15.393" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.strictly_mime_headers&quot;,              Bool),</span>
<a href="#l15.394"></a><span id="l15.394" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.strictly_mime.parm_folding&quot;,         Bool),</span>
<a href="#l15.395"></a><span id="l15.395" class="difflineminus">-</span>
<a href="#l15.396"></a><span id="l15.396" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.thread_without_re&quot;,                  Bool),</span>
<a href="#l15.397"></a><span id="l15.397" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.trusteddomains&quot;,                     String),</span>
<a href="#l15.398"></a><span id="l15.398" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.warn_on_send_accel_key&quot;,             Bool),</span>
<a href="#l15.399"></a><span id="l15.399" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.warn_filter_changed&quot;,                Bool),</span>
<a href="#l15.400"></a><span id="l15.400" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mail.wrap_long_lines&quot;,                    Bool),</span>
<a href="#l15.401"></a><span id="l15.401" class="difflineminus">-</span>
<a href="#l15.402"></a><span id="l15.402" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.account_central_page.url&quot;,       String),</span>
<a href="#l15.403"></a><span id="l15.403" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.confirm.moveFoldersToTrash&quot;,     Bool),</span>
<a href="#l15.404"></a><span id="l15.404" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.customDBHeaders&quot;,                String),</span>
<a href="#l15.405"></a><span id="l15.405" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.customHeaders&quot;,                  String),</span>
<a href="#l15.406"></a><span id="l15.406" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.default_sort_order&quot;,             Int),</span>
<a href="#l15.407"></a><span id="l15.407" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.default_sort_type&quot;,              Int),</span>
<a href="#l15.408"></a><span id="l15.408" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.default_news_sort_order&quot;,        Int),</span>
<a href="#l15.409"></a><span id="l15.409" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.default_news_sort_type&quot;,         Int),</span>
<a href="#l15.410"></a><span id="l15.410" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.display.disable_format_flowed_support&quot;, Bool),</span>
<a href="#l15.411"></a><span id="l15.411" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.display.disallow_mime_handlers&quot;, Int),</span>
<a href="#l15.412"></a><span id="l15.412" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.display.html_as&quot;,                Int),</span>
<a href="#l15.413"></a><span id="l15.413" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.display_html_sanitzer.allowed_tags&quot;, String),</span>
<a href="#l15.414"></a><span id="l15.414" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.display.original_date&quot;,          Bool),</span>
<a href="#l15.415"></a><span id="l15.415" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.display.prefer_plaintext&quot;,       Bool),</span>
<a href="#l15.416"></a><span id="l15.416" class="difflineminus">-</span>
<a href="#l15.417"></a><span id="l15.417" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.force_ascii_search&quot;,             Bool),</span>
<a href="#l15.418"></a><span id="l15.418" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.force_charset_override&quot;,         Bool),</span>
<a href="#l15.419"></a><span id="l15.419" class="difflineminus">-</span>
<a href="#l15.420"></a><span id="l15.420" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.headers.showOrganization&quot;,       Bool),</span>
<a href="#l15.421"></a><span id="l15.421" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.headers.showUserAgent&quot;,          Bool),</span>
<a href="#l15.422"></a><span id="l15.422" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.headers.extraExpandedHeaders&quot;,   String),</span>
<a href="#l15.423"></a><span id="l15.423" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.html_domains&quot;,                   String),</span>
<a href="#l15.424"></a><span id="l15.424" class="difflineminus">-</span>
<a href="#l15.425"></a><span id="l15.425" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.mark_message_read.delay&quot;,        Bool),</span>
<a href="#l15.426"></a><span id="l15.426" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.mark_message_read.delay.interval&quot;, Int),</span>
<a href="#l15.427"></a><span id="l15.427" class="difflineminus">-</span>
<a href="#l15.428"></a><span id="l15.428" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.message_display.allow.plugins&quot;,  Bool),</span>
<a href="#l15.429"></a><span id="l15.429" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.message_display.disable_remote_image&quot;, Bool),</span>
<a href="#l15.430"></a><span id="l15.430" class="difflineminus">-</span>
<a href="#l15.431"></a><span id="l15.431" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.nav_crosses_folders&quot;,            Int),</span>
<a href="#l15.432"></a><span id="l15.432" class="difflineminus">-</span>
<a href="#l15.433"></a><span id="l15.433" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.offline_sync_mail&quot;,              Bool),</span>
<a href="#l15.434"></a><span id="l15.434" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.offline_sych_news&quot;,              Bool),</span>
<a href="#l15.435"></a><span id="l15.435" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.offline_sync_send_unsent&quot;,       Bool),</span>
<a href="#l15.436"></a><span id="l15.436" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.offline_sync_work_offline&quot;,      Bool),</span>
<a href="#l15.437"></a><span id="l15.437" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.open_window_warning&quot;,            Int),</span>
<a href="#l15.438"></a><span id="l15.438" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.plaintext_domains&quot;,              String),</span>
<a href="#l15.439"></a><span id="l15.439" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.remember_selected_message&quot;,      Bool),</span>
<a href="#l15.440"></a><span id="l15.440" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.reply_in_default_charset&quot;,       Bool),</span>
<a href="#l15.441"></a><span id="l15.441" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.reuse_message_window&quot;,           Bool),</span>
<a href="#l15.442"></a><span id="l15.442" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.scroll_to_new_message&quot;,          Bool),</span>
<a href="#l15.443"></a><span id="l15.443" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.search_date_format&quot;,             String),</span>
<a href="#l15.444"></a><span id="l15.444" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.search_date_leading_zeros&quot;,      String),</span>
<a href="#l15.445"></a><span id="l15.445" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.search_date_separator&quot;,          String),</span>
<a href="#l15.446"></a><span id="l15.446" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.send_default_charset&quot;,           String),</span>
<a href="#l15.447"></a><span id="l15.447" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.send_plaintext_flowed&quot;,          Bool),</span>
<a href="#l15.448"></a><span id="l15.448" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.show_send_progress&quot;,             String),</span>
<a href="#l15.449"></a><span id="l15.449" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.start_page.enabled&quot;,             Bool),</span>
<a href="#l15.450"></a><span id="l15.450" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.start_page.url&quot;,                 String),</span>
<a href="#l15.451"></a><span id="l15.451" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.tcptimeout&quot;,                     Int),</span>
<a href="#l15.452"></a><span id="l15.452" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.thread_pane_column_unthreads&quot;,   Bool),</span>
<a href="#l15.453"></a><span id="l15.453" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.view_default_charset&quot;,           String),</span>
<a href="#l15.454"></a><span id="l15.454" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;mailnews.wraplength&quot;,                     Int),</span>
<a href="#l15.455"></a><span id="l15.455" class="difflineminus">-</span>
<a href="#l15.456"></a><span id="l15.456" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;messenger.save.dir&quot;,                      String),</span>
<a href="#l15.457"></a><span id="l15.457" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;messenger.throbber.url&quot;,                  String),</span>
<a href="#l15.458"></a><span id="l15.458" class="difflineminus">-</span>
<a href="#l15.459"></a><span id="l15.459" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;msgcompose.background_color&quot;,             String),</span>
<a href="#l15.460"></a><span id="l15.460" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;msgcompose.font_face&quot;,                    String),</span>
<a href="#l15.461"></a><span id="l15.461" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;msgcompose.font_size&quot;,                    String),</span>
<a href="#l15.462"></a><span id="l15.462" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;msgcompose.text_color&quot;,                   String),</span>
<a href="#l15.463"></a><span id="l15.463" class="difflineminus">-</span>
<a href="#l15.464"></a><span id="l15.464" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;news.get_messages_on_select&quot;,             Bool),</span>
<a href="#l15.465"></a><span id="l15.465" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;news.show_size_in_lines&quot;,                 Bool),</span>
<a href="#l15.466"></a><span id="l15.466" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;news.update_unread_on_expand&quot;,            Bool),</span>
<a href="#l15.467"></a><span id="l15.467" class="difflineminus">-</span>
<a href="#l15.468"></a><span id="l15.468" class="difflineminus">-  // pdi is the new preference, but nii is the old one - so do nii first, and</span>
<a href="#l15.469"></a><span id="l15.469" class="difflineminus">-  // then do pdi to account for both situations</span>
<a href="#l15.470"></a><span id="l15.470" class="difflineminus">-  MAKEPREFTRANSFORM(&quot;network.image.imageBehavior&quot;, 0, Int,             Image),</span>
<a href="#l15.471"></a><span id="l15.471" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;permissions.default.image&quot;,               Int),</span>
<a href="#l15.472"></a><span id="l15.472" class="difflineminus">-</span>
<a href="#l15.473"></a><span id="l15.473" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.cookie.alwaysAcceptSessionCookies&quot;,Bool),</span>
<a href="#l15.474"></a><span id="l15.474" class="difflineminus">-  MAKEPREFTRANSFORM(&quot;network.cookie.cookieBehavior&quot;, 0, Int,           Cookie),</span>
<a href="#l15.475"></a><span id="l15.475" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.cookie.lifetime.behavior&quot;,        Int),</span>
<a href="#l15.476"></a><span id="l15.476" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.cookie.lifetime.days&quot;,            Int),</span>
<a href="#l15.477"></a><span id="l15.477" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.cookie.lifetime.enabled&quot;,         Bool),</span>
<a href="#l15.478"></a><span id="l15.478" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.cookie.lifetimePolicy&quot;,           Int),</span>
<a href="#l15.479"></a><span id="l15.479" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.cookie.warnAboutCookies&quot;,         Bool),</span>
<a href="#l15.480"></a><span id="l15.480" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.ftp.anonymous_password&quot;,          String),</span>
<a href="#l15.481"></a><span id="l15.481" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.prefetch-next&quot;,                   Bool),</span>
<a href="#l15.482"></a><span id="l15.482" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.proxy.autoconfig_url&quot;,            String),</span>
<a href="#l15.483"></a><span id="l15.483" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.proxy.ftp&quot;,                       String),</span>
<a href="#l15.484"></a><span id="l15.484" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.proxy.ftp_port&quot;,                  Int),</span>
<a href="#l15.485"></a><span id="l15.485" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.proxy.http&quot;,                      String),</span>
<a href="#l15.486"></a><span id="l15.486" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.proxy.http_port&quot;,                 Int),</span>
<a href="#l15.487"></a><span id="l15.487" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.proxy.no_proxies_on&quot;,             String),</span>
<a href="#l15.488"></a><span id="l15.488" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.proxy.socks&quot;,                     String),</span>
<a href="#l15.489"></a><span id="l15.489" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.proxy.socks_port&quot;,                Int),</span>
<a href="#l15.490"></a><span id="l15.490" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.proxy.ssl&quot;,                       String),</span>
<a href="#l15.491"></a><span id="l15.491" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.proxy.ssl_port&quot;,                  Int),</span>
<a href="#l15.492"></a><span id="l15.492" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;network.proxy.type&quot;,                      Int),</span>
<a href="#l15.493"></a><span id="l15.493" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;nglayout.enable_drag_images&quot;,             Bool),</span>
<a href="#l15.494"></a><span id="l15.494" class="difflineminus">-</span>
<a href="#l15.495"></a><span id="l15.495" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;offline.autodetect&quot;,                      Bool),</span>
<a href="#l15.496"></a><span id="l15.496" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;offline.download.download_messages&quot;,      Int),</span>
<a href="#l15.497"></a><span id="l15.497" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;offline.send.unsent_messages&quot;,            Int),</span>
<a href="#l15.498"></a><span id="l15.498" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;offline.startup_state&quot;,                   Int),</span>
<a href="#l15.499"></a><span id="l15.499" class="difflineminus">-</span>
<a href="#l15.500"></a><span id="l15.500" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;permissions.default.image&quot;,               Int),</span>
<a href="#l15.501"></a><span id="l15.501" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;plugin.override_internal_types&quot;,          Bool),</span>
<a href="#l15.502"></a><span id="l15.502" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;plugin.expose_full_path&quot;,                 Bool),</span>
<a href="#l15.503"></a><span id="l15.503" class="difflineminus">-</span>
<a href="#l15.504"></a><span id="l15.504" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;privacy.popups.disable_from_plugins&quot;,     Int),</span>
<a href="#l15.505"></a><span id="l15.505" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;privacy.popups.prefill_whitelist&quot;,        Bool),</span>
<a href="#l15.506"></a><span id="l15.506" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;privacy.popups.remove_blacklist&quot;,         Bool),</span>
<a href="#l15.507"></a><span id="l15.507" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;privacy.popups.showBrowserMessage&quot;,       Bool),</span>
<a href="#l15.508"></a><span id="l15.508" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;privacy.popups.sound_enabled&quot;,            Bool),</span>
<a href="#l15.509"></a><span id="l15.509" class="difflineminus">-  MAKEPREFTRANSFORM(&quot;privacy.popups.sound_url&quot;, &quot;privacy.popups.sound_type&quot;, String, File),</span>
<a href="#l15.510"></a><span id="l15.510" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;privacy.popups.statusbar_icon_enabled&quot;,   Bool),</span>
<a href="#l15.511"></a><span id="l15.511" class="difflineminus">-</span>
<a href="#l15.512"></a><span id="l15.512" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;security.default_personal_cert&quot;,          String),</span>
<a href="#l15.513"></a><span id="l15.513" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;security.enable_ssl2&quot;,                    Bool),</span>
<a href="#l15.514"></a><span id="l15.514" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;security.enable_ssl3&quot;,                    Bool),</span>
<a href="#l15.515"></a><span id="l15.515" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;security.enable_tls&quot;,                     Bool),</span>
<a href="#l15.516"></a><span id="l15.516" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;security.password_lifetime&quot;,              Int),</span>
<a href="#l15.517"></a><span id="l15.517" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;security.warn_entering_secure&quot;,           Bool),</span>
<a href="#l15.518"></a><span id="l15.518" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;security.warn_entering_weak&quot;,             Bool),</span>
<a href="#l15.519"></a><span id="l15.519" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;security.warn_leaving_secure&quot;,            Bool),</span>
<a href="#l15.520"></a><span id="l15.520" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;security.warn_submit_insecure&quot;,           Bool),</span>
<a href="#l15.521"></a><span id="l15.521" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;security.warn_viewing_mixed&quot;,             Bool),</span>
<a href="#l15.522"></a><span id="l15.522" class="difflineminus">-</span>
<a href="#l15.523"></a><span id="l15.523" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;signon.SignonFileName&quot;,                   String),</span>
<a href="#l15.524"></a><span id="l15.524" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;signon.rememberSignons&quot;,                  Bool),</span>
<a href="#l15.525"></a><span id="l15.525" class="difflineminus">-</span>
<a href="#l15.526"></a><span id="l15.526" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;slider.snapMultiplier&quot;,                   Int),</span>
<a href="#l15.527"></a><span id="l15.527" class="difflineminus">-</span>
<a href="#l15.528"></a><span id="l15.528" class="difflineminus">-#ifndef XP_MACOSX</span>
<a href="#l15.529"></a><span id="l15.529" class="difflineminus">-#ifdef XP_UNIX</span>
<a href="#l15.530"></a><span id="l15.530" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;ui.allow_platform_file_picker&quot;,           Bool),</span>
<a href="#l15.531"></a><span id="l15.531" class="difflineminus">-#endif</span>
<a href="#l15.532"></a><span id="l15.532" class="difflineminus">-#endif</span>
<a href="#l15.533"></a><span id="l15.533" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;ui.click_hold_context_menus&quot;,             Bool),</span>
<a href="#l15.534"></a><span id="l15.534" class="difflineminus">-</span>
<a href="#l15.535"></a><span id="l15.535" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;view_source.syntax_highlight&quot;,            Bool),</span>
<a href="#l15.536"></a><span id="l15.536" class="difflineminus">-  MAKESAMETYPEPREFTRANSFORM(&quot;view_source.wrap_long_lines&quot;,             Bool),</span>
<a href="#l15.537"></a><span id="l15.537" class="difflineminus">-</span>
<a href="#l15.538"></a><span id="l15.538" class="difflineminus">-  MAKEPREFTRANSFORM(&quot;wallet.captureForms&quot;, &quot;browser.formfill.enable&quot;, Bool, Bool),</span>
<a href="#l15.539"></a><span id="l15.539" class="difflineminus">-};</span>
<a href="#l15.540"></a><span id="l15.540" class="difflineminus">-</span>
<a href="#l15.541"></a><span id="l15.541" class="difflineminus">-nsresult</span>
<a href="#l15.542"></a><span id="l15.542" class="difflineminus">-nsSeamonkeyProfileMigrator::TransformPreferences(const char* aSourcePrefFileName,</span>
<a href="#l15.543"></a><span id="l15.543" class="difflineminus">-                                                 const char* aTargetPrefFileName)</span>
<a href="#l15.544"></a><span id="l15.544" class="difflineminus">-{</span>
<a href="#l15.545"></a><span id="l15.545" class="difflineminus">-  PrefTransform* transform;</span>
<a href="#l15.546"></a><span id="l15.546" class="difflineminus">-  PrefTransform* end = gTransforms + sizeof(gTransforms)/sizeof(PrefTransform);</span>
<a href="#l15.547"></a><span id="l15.547" class="difflineminus">-</span>
<a href="#l15.548"></a><span id="l15.548" class="difflineminus">-  // Load the source pref file</span>
<a href="#l15.549"></a><span id="l15.549" class="difflineminus">-  nsCOMPtr&lt;nsIPrefService&gt; psvc(do_GetService(NS_PREFSERVICE_CONTRACTID));</span>
<a href="#l15.550"></a><span id="l15.550" class="difflineminus">-  psvc-&gt;ResetPrefs();</span>
<a href="#l15.551"></a><span id="l15.551" class="difflineminus">-</span>
<a href="#l15.552"></a><span id="l15.552" class="difflineminus">-  nsCOMPtr&lt;nsIFile&gt; sourcePrefsFile;</span>
<a href="#l15.553"></a><span id="l15.553" class="difflineminus">-  mSourceProfile-&gt;Clone(getter_AddRefs(sourcePrefsFile));</span>
<a href="#l15.554"></a><span id="l15.554" class="difflineminus">-  sourcePrefsFile-&gt;AppendNative(nsDependentCString(aSourcePrefFileName));</span>
<a href="#l15.555"></a><span id="l15.555" class="difflineminus">-  psvc-&gt;ReadUserPrefs(sourcePrefsFile);</span>
<a href="#l15.556"></a><span id="l15.556" class="difflineminus">-</span>
<a href="#l15.557"></a><span id="l15.557" class="difflineminus">-  nsCOMPtr&lt;nsIPrefBranch&gt; branch(do_QueryInterface(psvc));</span>
<a href="#l15.558"></a><span id="l15.558" class="difflineminus">-  for (transform = gTransforms; transform &lt; end; ++transform)</span>
<a href="#l15.559"></a><span id="l15.559" class="difflineminus">-    transform-&gt;prefGetterFunc(transform, branch);</span>
<a href="#l15.560"></a><span id="l15.560" class="difflineminus">-</span>
<a href="#l15.561"></a><span id="l15.561" class="difflineminus">-  // read in the various pref branch trees for accounts, identities, servers,</span>
<a href="#l15.562"></a><span id="l15.562" class="difflineminus">-  // etc.</span>
<a href="#l15.563"></a><span id="l15.563" class="difflineminus">-  static const char* branchNames[] =</span>
<a href="#l15.564"></a><span id="l15.564" class="difflineminus">-  {</span>
<a href="#l15.565"></a><span id="l15.565" class="difflineminus">-    // Keep the three below first, or change the indexes below</span>
<a href="#l15.566"></a><span id="l15.566" class="difflineminus">-    &quot;mail.identity.&quot;,</span>
<a href="#l15.567"></a><span id="l15.567" class="difflineminus">-    &quot;mail.server.&quot;,</span>
<a href="#l15.568"></a><span id="l15.568" class="difflineminus">-    &quot;ldap_2.&quot;,</span>
<a href="#l15.569"></a><span id="l15.569" class="difflineminus">-    &quot;accessibility.&quot;,</span>
<a href="#l15.570"></a><span id="l15.570" class="difflineminus">-    &quot;applications.&quot;,</span>
<a href="#l15.571"></a><span id="l15.571" class="difflineminus">-    &quot;bidi.&quot;,</span>
<a href="#l15.572"></a><span id="l15.572" class="difflineminus">-    &quot;browser.chrome.&quot;,</span>
<a href="#l15.573"></a><span id="l15.573" class="difflineminus">-    &quot;browser.display.&quot;,</span>
<a href="#l15.574"></a><span id="l15.574" class="difflineminus">-    &quot;browser.download.&quot;,</span>
<a href="#l15.575"></a><span id="l15.575" class="difflineminus">-    &quot;browser.search.&quot;,</span>
<a href="#l15.576"></a><span id="l15.576" class="difflineminus">-    &quot;browser.tabs.&quot;,</span>
<a href="#l15.577"></a><span id="l15.577" class="difflineminus">-    &quot;browser.urlbar.&quot;,</span>
<a href="#l15.578"></a><span id="l15.578" class="difflineminus">-    &quot;dom.&quot;,</span>
<a href="#l15.579"></a><span id="l15.579" class="difflineminus">-    &quot;editor.&quot;,</span>
<a href="#l15.580"></a><span id="l15.580" class="difflineminus">-    &quot;extensions.irc.&quot;,</span>
<a href="#l15.581"></a><span id="l15.581" class="difflineminus">-    &quot;extensions.venkman.&quot;,</span>
<a href="#l15.582"></a><span id="l15.582" class="difflineminus">-    &quot;font.&quot;,</span>
<a href="#l15.583"></a><span id="l15.583" class="difflineminus">-    &quot;general.startup.&quot;,</span>
<a href="#l15.584"></a><span id="l15.584" class="difflineminus">-    &quot;helpers.&quot;,</span>
<a href="#l15.585"></a><span id="l15.585" class="difflineminus">-    &quot;inspector.&quot;,</span>
<a href="#l15.586"></a><span id="l15.586" class="difflineminus">-    &quot;mail.account.&quot;,</span>
<a href="#l15.587"></a><span id="l15.587" class="difflineminus">-    &quot;mail.addr_book.&quot;,</span>
<a href="#l15.588"></a><span id="l15.588" class="difflineminus">-    &quot;mail.imap.&quot;,</span>
<a href="#l15.589"></a><span id="l15.589" class="difflineminus">-    &quot;mail.mdn.&quot;,</span>
<a href="#l15.590"></a><span id="l15.590" class="difflineminus">-    &quot;mail.smtpserver.&quot;,</span>
<a href="#l15.591"></a><span id="l15.591" class="difflineminus">-    &quot;mail.spam.&quot;,</span>
<a href="#l15.592"></a><span id="l15.592" class="difflineminus">-    &quot;mail.toolbars.&quot;,</span>
<a href="#l15.593"></a><span id="l15.593" class="difflineminus">-    &quot;mailnews.labels.&quot;,</span>
<a href="#l15.594"></a><span id="l15.594" class="difflineminus">-    &quot;mailnews.reply_&quot;,</span>
<a href="#l15.595"></a><span id="l15.595" class="difflineminus">-    &quot;mailnews.tags.&quot;,</span>
<a href="#l15.596"></a><span id="l15.596" class="difflineminus">-    &quot;middlemouse.&quot;,</span>
<a href="#l15.597"></a><span id="l15.597" class="difflineminus">-    &quot;mousewheel.&quot;,</span>
<a href="#l15.598"></a><span id="l15.598" class="difflineminus">-    &quot;network.http.&quot;,</span>
<a href="#l15.599"></a><span id="l15.599" class="difflineminus">-    &quot;print.&quot;,</span>
<a href="#l15.600"></a><span id="l15.600" class="difflineminus">-    &quot;privacy.item.&quot;,</span>
<a href="#l15.601"></a><span id="l15.601" class="difflineminus">-    &quot;privacy.sanitize.&quot;,</span>
<a href="#l15.602"></a><span id="l15.602" class="difflineminus">-    &quot;security.OSCP.&quot;,</span>
<a href="#l15.603"></a><span id="l15.603" class="difflineminus">-    &quot;security.crl.&quot;,</span>
<a href="#l15.604"></a><span id="l15.604" class="difflineminus">-    &quot;ui.key.&quot;</span>
<a href="#l15.605"></a><span id="l15.605" class="difflineminus">-  };</span>
<a href="#l15.606"></a><span id="l15.606" class="difflineminus">-</span>
<a href="#l15.607"></a><span id="l15.607" class="difflineminus">-  PBStructArray branches[NS_ARRAY_LENGTH(branchNames)];</span>
<a href="#l15.608"></a><span id="l15.608" class="difflineminus">-  PRUint32 i;</span>
<a href="#l15.609"></a><span id="l15.609" class="difflineminus">-  for (i = 0; i &lt; NS_ARRAY_LENGTH(branchNames); ++i)</span>
<a href="#l15.610"></a><span id="l15.610" class="difflineminus">-    ReadBranch(branchNames[i], psvc, branches[i]);</span>
<a href="#l15.611"></a><span id="l15.611" class="difflineminus">-</span>
<a href="#l15.612"></a><span id="l15.612" class="difflineminus">-  // the signature file prefs may be paths to files in the seamonkey profile</span>
<a href="#l15.613"></a><span id="l15.613" class="difflineminus">-  // path so we need to copy them over and fix these paths up before we write</span>
<a href="#l15.614"></a><span id="l15.614" class="difflineminus">-  // them out to the new prefs.js</span>
<a href="#l15.615"></a><span id="l15.615" class="difflineminus">-  CopySignatureFiles(branches[0], psvc);</span>
<a href="#l15.616"></a><span id="l15.616" class="difflineminus">-</span>
<a href="#l15.617"></a><span id="l15.617" class="difflineminus">-  // certain mail prefs may actually be absolute paths instead of profile</span>
<a href="#l15.618"></a><span id="l15.618" class="difflineminus">-  // relative paths we need to fix these paths up before we write them out to</span>
<a href="#l15.619"></a><span id="l15.619" class="difflineminus">-  // the new prefs.js</span>
<a href="#l15.620"></a><span id="l15.620" class="difflineminus">-  CopyMailFolderPrefs(branches[1], psvc);</span>
<a href="#l15.621"></a><span id="l15.621" class="difflineminus">-</span>
<a href="#l15.622"></a><span id="l15.622" class="difflineminus">-  CopyAddressBookDirectories(branches[2], psvc);</span>
<a href="#l15.623"></a><span id="l15.623" class="difflineminus">-</span>
<a href="#l15.624"></a><span id="l15.624" class="difflineminus">-  // Now that we have all the pref data in memory, load the target pref file,</span>
<a href="#l15.625"></a><span id="l15.625" class="difflineminus">-  // and write it back out</span>
<a href="#l15.626"></a><span id="l15.626" class="difflineminus">-  psvc-&gt;ResetPrefs();</span>
<a href="#l15.627"></a><span id="l15.627" class="difflineminus">-</span>
<a href="#l15.628"></a><span id="l15.628" class="difflineminus">-  nsCOMPtr&lt;nsIFile&gt; targetPrefsFile;</span>
<a href="#l15.629"></a><span id="l15.629" class="difflineminus">-  mTargetProfile-&gt;Clone(getter_AddRefs(targetPrefsFile));</span>
<a href="#l15.630"></a><span id="l15.630" class="difflineminus">-  targetPrefsFile-&gt;AppendNative(nsDependentCString(aTargetPrefFileName));</span>
<a href="#l15.631"></a><span id="l15.631" class="difflineminus">-</span>
<a href="#l15.632"></a><span id="l15.632" class="difflineminus">-  // Don't use nsnull here as we're too early in the cycle for the prefs</span>
<a href="#l15.633"></a><span id="l15.633" class="difflineminus">-  // service to get its default file (because the NS_GetDirectoryService items</span>
<a href="#l15.634"></a><span id="l15.634" class="difflineminus">-  // aren't fully set up yet).</span>
<a href="#l15.635"></a><span id="l15.635" class="difflineminus">-  psvc-&gt;ReadUserPrefs(targetPrefsFile);</span>
<a href="#l15.636"></a><span id="l15.636" class="difflineminus">-</span>
<a href="#l15.637"></a><span id="l15.637" class="difflineminus">-  for (transform = gTransforms; transform &lt; end; ++transform)</span>
<a href="#l15.638"></a><span id="l15.638" class="difflineminus">-    transform-&gt;prefSetterFunc(transform, branch);</span>
<a href="#l15.639"></a><span id="l15.639" class="difflineminus">-</span>
<a href="#l15.640"></a><span id="l15.640" class="difflineminus">-  for (i = 0; i &lt; NS_ARRAY_LENGTH(branchNames); ++i)</span>
<a href="#l15.641"></a><span id="l15.641" class="difflineminus">-    WriteBranch(branchNames[i], psvc, branches[i]);</span>
<a href="#l15.642"></a><span id="l15.642" class="difflineminus">-</span>
<a href="#l15.643"></a><span id="l15.643" class="difflineminus">-  psvc-&gt;SavePrefFile(targetPrefsFile);</span>
<a href="#l15.644"></a><span id="l15.644" class="difflineminus">-</span>
<a href="#l15.645"></a><span id="l15.645" class="difflineminus">-  return NS_OK;</span>
<a href="#l15.646"></a><span id="l15.646" class="difflineminus">-}</span>
<a href="#l15.647"></a><span id="l15.647" class="difflineminus">-</span>
<a href="#l15.648"></a><span id="l15.648" class="difflineminus">-nsresult</span>
<a href="#l15.649"></a><span id="l15.649" class="difflineminus">-nsSeamonkeyProfileMigrator::CopyPreferences(bool aReplace)</span>
<a href="#l15.650"></a><span id="l15.650" class="difflineminus">-{</span>
<a href="#l15.651"></a><span id="l15.651" class="difflineminus">-  nsresult rv = NS_OK;</span>
<a href="#l15.652"></a><span id="l15.652" class="difflineminus">-  if (!aReplace)</span>
<a href="#l15.653"></a><span id="l15.653" class="difflineminus">-    return rv;</span>
<a href="#l15.654"></a><span id="l15.654" class="difflineminus">-</span>
<a href="#l15.655"></a><span id="l15.655" class="difflineminus">-  rv |= TransformPreferences(FILE_NAME_PREFS, FILE_NAME_PREFS);</span>
<a href="#l15.656"></a><span id="l15.656" class="difflineminus">-  rv |= CopyFile(FILE_NAME_USER_PREFS, FILE_NAME_USER_PREFS);</span>
<a href="#l15.657"></a><span id="l15.657" class="difflineminus">-</span>
<a href="#l15.658"></a><span id="l15.658" class="difflineminus">-  // Security Stuff</span>
<a href="#l15.659"></a><span id="l15.659" class="difflineminus">-  rv |= CopyFile(FILE_NAME_CERT8DB, FILE_NAME_CERT8DB);</span>
<a href="#l15.660"></a><span id="l15.660" class="difflineminus">-  rv |= CopyFile(FILE_NAME_KEY3DB, FILE_NAME_KEY3DB);</span>
<a href="#l15.661"></a><span id="l15.661" class="difflineminus">-  rv |= CopyFile(FILE_NAME_SECMODDB, FILE_NAME_SECMODDB);</span>
<a href="#l15.662"></a><span id="l15.662" class="difflineminus">-</span>
<a href="#l15.663"></a><span id="l15.663" class="difflineminus">-  // User MIME Type overrides</span>
<a href="#l15.664"></a><span id="l15.664" class="difflineminus">-  rv |= CopyFile(FILE_NAME_MIMETYPES, FILE_NAME_MIMETYPES);</span>
<a href="#l15.665"></a><span id="l15.665" class="difflineminus">-  rv |= CopyFile(FILE_NAME_PERSONALDICTIONARY, FILE_NAME_PERSONALDICTIONARY);</span>
<a href="#l15.666"></a><span id="l15.666" class="difflineminus">-  rv |= CopyFile(FILE_NAME_MAILVIEWS, FILE_NAME_MAILVIEWS);</span>
<a href="#l15.667"></a><span id="l15.667" class="difflineminus">-</span>
<a href="#l15.668"></a><span id="l15.668" class="difflineminus">-  // User sheets</span>
<a href="#l15.669"></a><span id="l15.669" class="difflineminus">-  rv |= CopyUserSheet(FILE_NAME_USERCHROME);</span>
<a href="#l15.670"></a><span id="l15.670" class="difflineminus">-  return rv | CopyUserSheet(FILE_NAME_USERCONTENT);</span>
<a href="#l15.671"></a><span id="l15.671" class="difflineminus">-}</span>
<a href="#l15.672"></a><span id="l15.672" class="difflineminus">-</span>
<a href="#l15.673"></a><span id="l15.673" class="difflineminus">-nsresult</span>
<a href="#l15.674"></a><span id="l15.674" class="difflineminus">-nsSeamonkeyProfileMigrator::CopyHistory(bool aReplace)</span>
<a href="#l15.675"></a><span id="l15.675" class="difflineminus">-{</span>
<a href="#l15.676"></a><span id="l15.676" class="difflineminus">-  return aReplace ? CopyFile(FILE_NAME_HISTORY, FILE_NAME_HISTORY) : NS_OK;</span>
<a href="#l15.677"></a><span id="l15.677" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1">deleted file mode 100644</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineminus">--- a/suite/profile/migration/src/nsSeamonkeyProfileMigrator.h</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineplus">+++ /dev/null</span>
<a href="#l16.4"></a><span id="l16.4" class="difflineat">@@ -1,79 +0,0 @@</span>
<a href="#l16.5"></a><span id="l16.5" class="difflineminus">-/* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l16.6"></a><span id="l16.6" class="difflineminus">-/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l16.7"></a><span id="l16.7" class="difflineminus">- * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l16.8"></a><span id="l16.8" class="difflineminus">- *</span>
<a href="#l16.9"></a><span id="l16.9" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l16.10"></a><span id="l16.10" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l16.11"></a><span id="l16.11" class="difflineminus">- * the License. You may obtain a copy of the License at</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">- * http://www.mozilla.org/MPL/</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">- *</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineminus">- * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineminus">- * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineminus">- * for the specific language governing rights and limitations under the</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineminus">- * License.</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineminus">- *</span>
<a href="#l16.19"></a><span id="l16.19" class="difflineminus">- * The Original Code is The Browser Profile Migrator.</span>
<a href="#l16.20"></a><span id="l16.20" class="difflineminus">- *</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineminus">- * The Initial Developer of the Original Code is Ben Goodger.</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineminus">- * Portions created by the Initial Developer are Copyright (C) 2004</span>
<a href="#l16.23"></a><span id="l16.23" class="difflineminus">- * the Initial Developer. All Rights Reserved.</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineminus">- *</span>
<a href="#l16.25"></a><span id="l16.25" class="difflineminus">- * Contributor(s):</span>
<a href="#l16.26"></a><span id="l16.26" class="difflineminus">- *  Ben Goodger &lt;ben@bengoodger.com&gt;</span>
<a href="#l16.27"></a><span id="l16.27" class="difflineminus">- *</span>
<a href="#l16.28"></a><span id="l16.28" class="difflineminus">- * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l16.29"></a><span id="l16.29" class="difflineminus">- * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l16.30"></a><span id="l16.30" class="difflineminus">- * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineminus">- * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineminus">- * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l16.33"></a><span id="l16.33" class="difflineminus">- * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineminus">- * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l16.35"></a><span id="l16.35" class="difflineminus">- * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l16.36"></a><span id="l16.36" class="difflineminus">- * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l16.37"></a><span id="l16.37" class="difflineminus">- * the provisions above, a recipient may use your version of this file under</span>
<a href="#l16.38"></a><span id="l16.38" class="difflineminus">- * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l16.39"></a><span id="l16.39" class="difflineminus">- *</span>
<a href="#l16.40"></a><span id="l16.40" class="difflineminus">- * ***** END LICENSE BLOCK ***** */</span>
<a href="#l16.41"></a><span id="l16.41" class="difflineminus">-</span>
<a href="#l16.42"></a><span id="l16.42" class="difflineminus">-#ifndef SeamonkeyProfileMigrator_h__</span>
<a href="#l16.43"></a><span id="l16.43" class="difflineminus">-#define SeamonkeyProfileMigrator_h__</span>
<a href="#l16.44"></a><span id="l16.44" class="difflineminus">-</span>
<a href="#l16.45"></a><span id="l16.45" class="difflineminus">-#include &quot;nsISuiteProfileMigrator.h&quot;</span>
<a href="#l16.46"></a><span id="l16.46" class="difflineminus">-#include &quot;nsILocalFile.h&quot;</span>
<a href="#l16.47"></a><span id="l16.47" class="difflineminus">-#include &quot;nsISupportsArray.h&quot;</span>
<a href="#l16.48"></a><span id="l16.48" class="difflineminus">-#include &quot;nsNetscapeProfileMigratorBase.h&quot;</span>
<a href="#l16.49"></a><span id="l16.49" class="difflineminus">-#include &quot;nsStringAPI.h&quot;</span>
<a href="#l16.50"></a><span id="l16.50" class="difflineminus">-</span>
<a href="#l16.51"></a><span id="l16.51" class="difflineminus">-class nsIFile;</span>
<a href="#l16.52"></a><span id="l16.52" class="difflineminus">-class nsIPrefBranch;</span>
<a href="#l16.53"></a><span id="l16.53" class="difflineminus">-class nsIPrefService;</span>
<a href="#l16.54"></a><span id="l16.54" class="difflineminus">-</span>
<a href="#l16.55"></a><span id="l16.55" class="difflineminus">-#define NS_SEAMONKEYPROFILEMIGRATOR_CID \</span>
<a href="#l16.56"></a><span id="l16.56" class="difflineminus">-{ 0x9a28ffa7, 0xe6ef, 0x4b52, { 0xa1, 0x27, 0x6a, 0xd9, 0x51, 0xde, 0x8e, 0x9b } }</span>
<a href="#l16.57"></a><span id="l16.57" class="difflineminus">-</span>
<a href="#l16.58"></a><span id="l16.58" class="difflineminus">-class nsSeamonkeyProfileMigrator : public nsNetscapeProfileMigratorBase</span>
<a href="#l16.59"></a><span id="l16.59" class="difflineminus">-{</span>
<a href="#l16.60"></a><span id="l16.60" class="difflineminus">-public:</span>
<a href="#l16.61"></a><span id="l16.61" class="difflineminus">-  NS_DECL_ISUPPORTS</span>
<a href="#l16.62"></a><span id="l16.62" class="difflineminus">-</span>
<a href="#l16.63"></a><span id="l16.63" class="difflineminus">-  nsSeamonkeyProfileMigrator();</span>
<a href="#l16.64"></a><span id="l16.64" class="difflineminus">-  virtual ~nsSeamonkeyProfileMigrator();</span>
<a href="#l16.65"></a><span id="l16.65" class="difflineminus">-</span>
<a href="#l16.66"></a><span id="l16.66" class="difflineminus">-  // nsISuiteProfileMigrator methods</span>
<a href="#l16.67"></a><span id="l16.67" class="difflineminus">-  NS_IMETHOD Migrate(PRUint16 aItems, nsIProfileStartup *aStartup,</span>
<a href="#l16.68"></a><span id="l16.68" class="difflineminus">-                     const PRUnichar *aProfile);</span>
<a href="#l16.69"></a><span id="l16.69" class="difflineminus">-  NS_IMETHOD GetMigrateData(const PRUnichar *aProfile, bool aDoingStartup,</span>
<a href="#l16.70"></a><span id="l16.70" class="difflineminus">-                            PRUint16 *_retval);</span>
<a href="#l16.71"></a><span id="l16.71" class="difflineminus">-  NS_IMETHOD GetSupportedItems(PRUint16 *aSupportedItems);</span>
<a href="#l16.72"></a><span id="l16.72" class="difflineminus">-</span>
<a href="#l16.73"></a><span id="l16.73" class="difflineminus">-protected:</span>
<a href="#l16.74"></a><span id="l16.74" class="difflineminus">-  nsresult FillProfileDataFromRegistry();</span>
<a href="#l16.75"></a><span id="l16.75" class="difflineminus">-  nsresult CopyPreferences(bool aReplace);</span>
<a href="#l16.76"></a><span id="l16.76" class="difflineminus">-  nsresult TransformPreferences(const char* aSourcePrefFileName,</span>
<a href="#l16.77"></a><span id="l16.77" class="difflineminus">-                                const char* aTargetPrefFileName);</span>
<a href="#l16.78"></a><span id="l16.78" class="difflineminus">-</span>
<a href="#l16.79"></a><span id="l16.79" class="difflineminus">-  nsresult CopyHistory(bool aReplace);</span>
<a href="#l16.80"></a><span id="l16.80" class="difflineminus">-  nsresult LocateSignonsFile(char** aResult);</span>
<a href="#l16.81"></a><span id="l16.81" class="difflineminus">-};</span>
<a href="#l16.82"></a><span id="l16.82" class="difflineminus">- </span>
<a href="#l16.83"></a><span id="l16.83" class="difflineminus">-#endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/suite/profile/migration/src/nsThunderbirdProfileMigrator.cpp</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/suite/profile/migration/src/nsThunderbirdProfileMigrator.cpp</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -228,60 +228,53 @@ nsThunderbirdProfileMigrator::GetSupport</span>
<a href="#l17.4"></a><span id="l17.4"> nsresult</span>
<a href="#l17.5"></a><span id="l17.5"> nsThunderbirdProfileMigrator::FillProfileDataFromRegistry()</span>
<a href="#l17.6"></a><span id="l17.6"> {</span>
<a href="#l17.7"></a><span id="l17.7">   // Find the Thunderbird Registry</span>
<a href="#l17.8"></a><span id="l17.8">   nsCOMPtr&lt;nsIProperties&gt; fileLocator(</span>
<a href="#l17.9"></a><span id="l17.9">     do_GetService(&quot;@mozilla.org/file/directory_service;1&quot;));</span>
<a href="#l17.10"></a><span id="l17.10">   nsCOMPtr&lt;nsILocalFile&gt; thunderbirdData;</span>
<a href="#l17.11"></a><span id="l17.11"> #ifdef XP_WIN</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-#define REGISTRY_FILE &quot;registry.dat&quot;</span>
<a href="#l17.13"></a><span id="l17.13">   fileLocator-&gt;Get(NS_WIN_APPDATA_DIR, NS_GET_IID(nsILocalFile),</span>
<a href="#l17.14"></a><span id="l17.14">                    getter_AddRefs(thunderbirdData));</span>
<a href="#l17.15"></a><span id="l17.15"> </span>
<a href="#l17.16"></a><span id="l17.16">   thunderbirdData-&gt;Append(NS_LITERAL_STRING(&quot;Thunderbird&quot;));</span>
<a href="#l17.17"></a><span id="l17.17"> </span>
<a href="#l17.18"></a><span id="l17.18"> #elif defined(XP_MACOSX)</span>
<a href="#l17.19"></a><span id="l17.19" class="difflineminus">-#define REGISTRY_FILE &quot;Application Registry&quot;</span>
<a href="#l17.20"></a><span id="l17.20">   fileLocator-&gt;Get(NS_MAC_USER_LIB_DIR, NS_GET_IID(nsILocalFile),</span>
<a href="#l17.21"></a><span id="l17.21">                    getter_AddRefs(thunderbirdData));</span>
<a href="#l17.22"></a><span id="l17.22">   </span>
<a href="#l17.23"></a><span id="l17.23">   thunderbirdData-&gt;Append(NS_LITERAL_STRING(&quot;Thunderbird&quot;));</span>
<a href="#l17.24"></a><span id="l17.24"> </span>
<a href="#l17.25"></a><span id="l17.25"> #elif defined(XP_UNIX)</span>
<a href="#l17.26"></a><span id="l17.26" class="difflineminus">-#define REGISTRY_FILE &quot;appreg&quot;</span>
<a href="#l17.27"></a><span id="l17.27">   fileLocator-&gt;Get(NS_UNIX_HOME_DIR, NS_GET_IID(nsILocalFile),</span>
<a href="#l17.28"></a><span id="l17.28">                    getter_AddRefs(thunderbirdData));</span>
<a href="#l17.29"></a><span id="l17.29">   </span>
<a href="#l17.30"></a><span id="l17.30">   thunderbirdData-&gt;Append(NS_LITERAL_STRING(&quot;.thunderbird&quot;));</span>
<a href="#l17.31"></a><span id="l17.31"> </span>
<a href="#l17.32"></a><span id="l17.32"> #elif defined(XP_BEOS)</span>
<a href="#l17.33"></a><span id="l17.33" class="difflineminus">-#define REGISTRY_FILE &quot;appreg&quot;</span>
<a href="#l17.34"></a><span id="l17.34">    fileLocator-&gt;Get(NS_BEOS_SETTINGS_DIR, NS_GET_IID(nsILocalFile),</span>
<a href="#l17.35"></a><span id="l17.35">                     getter_AddRefs(thunderbirdData));</span>
<a href="#l17.36"></a><span id="l17.36"> </span>
<a href="#l17.37"></a><span id="l17.37">    thunderbirdData-&gt;Append(NS_LITERAL_STRING(&quot;Thunderbird&quot;));</span>
<a href="#l17.38"></a><span id="l17.38"> </span>
<a href="#l17.39"></a><span id="l17.39"> #elif defined(XP_OS2)</span>
<a href="#l17.40"></a><span id="l17.40" class="difflineminus">-#define REGISTRY_FILE &quot;registry.dat&quot;</span>
<a href="#l17.41"></a><span id="l17.41">   fileLocator-&gt;Get(NS_OS2_HOME_DIR, NS_GET_IID(nsILocalFile),</span>
<a href="#l17.42"></a><span id="l17.42">                    getter_AddRefs(thunderbirdData));</span>
<a href="#l17.43"></a><span id="l17.43">   </span>
<a href="#l17.44"></a><span id="l17.44">   thunderbirdData-&gt;Append(NS_LITERAL_STRING(&quot;Thunderbird&quot;));</span>
<a href="#l17.45"></a><span id="l17.45"> #else</span>
<a href="#l17.46"></a><span id="l17.46">   // On other OS just abort</span>
<a href="#l17.47"></a><span id="l17.47">   return NS_ERROR_FILE_NOT_FOUND;</span>
<a href="#l17.48"></a><span id="l17.48"> #endif</span>
<a href="#l17.49"></a><span id="l17.49"> </span>
<a href="#l17.50"></a><span id="l17.50">   // Try profiles.ini first</span>
<a href="#l17.51"></a><span id="l17.51" class="difflineminus">-  nsresult rv = GetProfileDataFromProfilesIni(thunderbirdData,</span>
<a href="#l17.52"></a><span id="l17.52" class="difflineminus">-                                              mProfileNames,</span>
<a href="#l17.53"></a><span id="l17.53" class="difflineminus">-                                              mProfileLocations);</span>
<a href="#l17.54"></a><span id="l17.54" class="difflineminus">-</span>
<a href="#l17.55"></a><span id="l17.55" class="difflineminus">-  return rv;</span>
<a href="#l17.56"></a><span id="l17.56" class="difflineplus">+  return GetProfileDataFromProfilesIni(thunderbirdData,</span>
<a href="#l17.57"></a><span id="l17.57" class="difflineplus">+                                       mProfileNames,</span>
<a href="#l17.58"></a><span id="l17.58" class="difflineplus">+                                       mProfileLocations);</span>
<a href="#l17.59"></a><span id="l17.59"> }</span>
<a href="#l17.60"></a><span id="l17.60"> </span>
<a href="#l17.61"></a><span id="l17.61"> static</span>
<a href="#l17.62"></a><span id="l17.62"> nsThunderbirdProfileMigrator::PrefTransform gTransforms[] = {</span>
<a href="#l17.63"></a><span id="l17.63">   MAKESAMETYPEPREFTRANSFORM(&quot;accessibility.typeaheadfind.autostart&quot;,   Bool),</span>
<a href="#l17.64"></a><span id="l17.64">   MAKESAMETYPEPREFTRANSFORM(&quot;accessibility.typeaheadfind.linksonly&quot;,   Bool),</span>
<a href="#l17.65"></a><span id="l17.65"> </span>
<a href="#l17.66"></a><span id="l17.66">   MAKESAMETYPEPREFTRANSFORM(&quot;browser.anchor_color&quot;,                    String),</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

