<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 15:9d16a84709e32a7f65a1aefbef14f16bde2cf5cd</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 9d16a84709e32a7f65a1aefbef14f16bde2cf5cd" />
<meta property="og:url" content="/comm-central/rev/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd" />
<meta property="og:description" content="remove unused uuencode code, r=standard8, sr=neil, 216075" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 9d16a84709e32a7f65a1aefbef14f16bde2cf5cd 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd">shortlog</a> |
<a href="/comm-central/log/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd">files</a> |
changeset |
<a href="/comm-central/raw-rev/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd">raw</a>  | <a href="/comm-central/archive/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
remove unused uuencode code, r=standard8, sr=neil, 216075
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#68;&#97;&#118;&#105;&#100;&#32;&#66;&#105;&#101;&#110;&#118;&#101;&#110;&#117;&#32;&#60;&#98;&#105;&#101;&#110;&#118;&#101;&#110;&#117;&#64;&#110;&#118;&#101;&#110;&#116;&#117;&#114;&#101;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 25 Jul 2008 12:29:19 -0700</td></tr>

<tr>
 <td>changeset 15</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd">9d16a84709e32a7f65a1aefbef14f16bde2cf5cd</a></td>
</tr>



<tr>
<td>parent 13</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/0b3d633a47f7986c14269d1e7c4747d187811a9f">0b3d633a47f7986c14269d1e7c4747d187811a9f</a>
</td>
</tr>

<tr>
<td>child 16</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/fb26b673ca7ab6cc184a8b56485708f4174630a6">fb26b673ca7ab6cc184a8b56485708f4174630a6</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=9d16a84709e32a7f65a1aefbef14f16bde2cf5cd">11</a></td></tr>
<tr><td>push user</td><td>bienvenu@nventure.com</td></tr>
<tr><td>push date</td><td class="date age">Fri, 25 Jul 2008 19:33:36 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@fb26b673ca7a [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=fb26b673ca7ab6cc184a8b56485708f4174630a6">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=fb26b673ca7ab6cc184a8b56485708f4174630a6&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=fb26b673ca7ab6cc184a8b56485708f4174630a6&newProject=comm-central&newRevision=9d16a84709e32a7f65a1aefbef14f16bde2cf5cd&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=fb26b673ca7ab6cc184a8b56485708f4174630a6&newProject=comm-central&newRevision=9d16a84709e32a7f65a1aefbef14f16bde2cf5cd&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=fb26b673ca7ab6cc184a8b56485708f4174630a6&newProject=comm-central&newRevision=9d16a84709e32a7f65a1aefbef14f16bde2cf5cd&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28standard8%29&revcount=50">standard8</a>, <a href="/comm-central/log?rev=reviewer%28neil%29&revcount=50">neil</a>, <a href="/comm-central/log?rev=reviewer%28216075%29&revcount=50">216075</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=216075">216075</a></td></tr>




</table></div>

<div class="page_body description">remove unused uuencode code, r=standard8, sr=neil, 216075</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/public/nsIMsgCompFields.idl">mailnews/compose/public/nsIMsgCompFields.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/public/nsIMsgCompFields.idl">file</a> |
<a href="/comm-central/annotate/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/public/nsIMsgCompFields.idl">annotate</a> |
<a href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/public/nsIMsgCompFields.idl">diff</a> |
<a href="/comm-central/comparison/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/public/nsIMsgCompFields.idl">comparison</a> |
<a href="/comm-central/log/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/public/nsIMsgCompFields.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgAttachmentHandler.cpp">mailnews/compose/src/nsMsgAttachmentHandler.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgAttachmentHandler.cpp">file</a> |
<a href="/comm-central/annotate/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgAttachmentHandler.cpp">annotate</a> |
<a href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgAttachmentHandler.cpp">diff</a> |
<a href="/comm-central/comparison/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgAttachmentHandler.cpp">comparison</a> |
<a href="/comm-central/log/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgAttachmentHandler.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgCompFields.cpp">mailnews/compose/src/nsMsgCompFields.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgCompFields.cpp">file</a> |
<a href="/comm-central/annotate/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgCompFields.cpp">annotate</a> |
<a href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgCompFields.cpp">diff</a> |
<a href="/comm-central/comparison/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgCompFields.cpp">comparison</a> |
<a href="/comm-central/log/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgCompFields.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgCompFields.h">mailnews/compose/src/nsMsgCompFields.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgCompFields.h">file</a> |
<a href="/comm-central/annotate/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgCompFields.h">annotate</a> |
<a href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgCompFields.h">diff</a> |
<a href="/comm-central/comparison/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgCompFields.h">comparison</a> |
<a href="/comm-central/log/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgCompFields.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgCompUtils.cpp">mailnews/compose/src/nsMsgCompUtils.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgCompUtils.cpp">file</a> |
<a href="/comm-central/annotate/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgCompUtils.cpp">annotate</a> |
<a href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgCompUtils.cpp">diff</a> |
<a href="/comm-central/comparison/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgCompUtils.cpp">comparison</a> |
<a href="/comm-central/log/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgCompUtils.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgEncoders.cpp">mailnews/compose/src/nsMsgEncoders.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgEncoders.cpp">file</a> |
<a href="/comm-central/annotate/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgEncoders.cpp">annotate</a> |
<a href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgEncoders.cpp">diff</a> |
<a href="/comm-central/comparison/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgEncoders.cpp">comparison</a> |
<a href="/comm-central/log/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgEncoders.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgSend.cpp">mailnews/compose/src/nsMsgSend.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgSend.cpp">file</a> |
<a href="/comm-central/annotate/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgSend.cpp">annotate</a> |
<a href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgSend.cpp">diff</a> |
<a href="/comm-central/comparison/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgSend.cpp">comparison</a> |
<a href="/comm-central/log/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/compose/src/nsMsgSend.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">mailnews/extensions/smime/src/nsMsgComposeSecure.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">file</a> |
<a href="/comm-central/annotate/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">annotate</a> |
<a href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">diff</a> |
<a href="/comm-central/comparison/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">comparison</a> |
<a href="/comm-central/log/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/public/nsIMimeConverter.idl">mailnews/mime/public/nsIMimeConverter.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/public/nsIMimeConverter.idl">file</a> |
<a href="/comm-central/annotate/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/public/nsIMimeConverter.idl">annotate</a> |
<a href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/public/nsIMimeConverter.idl">diff</a> |
<a href="/comm-central/comparison/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/public/nsIMimeConverter.idl">comparison</a> |
<a href="/comm-central/log/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/public/nsIMimeConverter.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/src/mimedrft.cpp">mailnews/mime/src/mimedrft.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/src/mimedrft.cpp">file</a> |
<a href="/comm-central/annotate/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/src/mimedrft.cpp">annotate</a> |
<a href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/src/mimedrft.cpp">diff</a> |
<a href="/comm-central/comparison/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/src/mimedrft.cpp">comparison</a> |
<a href="/comm-central/log/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/src/mimedrft.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/src/mimeenc.cpp">mailnews/mime/src/mimeenc.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/src/mimeenc.cpp">file</a> |
<a href="/comm-central/annotate/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/src/mimeenc.cpp">annotate</a> |
<a href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/src/mimeenc.cpp">diff</a> |
<a href="/comm-central/comparison/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/src/mimeenc.cpp">comparison</a> |
<a href="/comm-central/log/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/src/mimeenc.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/src/nsMimeConverter.cpp">mailnews/mime/src/nsMimeConverter.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/src/nsMimeConverter.cpp">file</a> |
<a href="/comm-central/annotate/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/src/nsMimeConverter.cpp">annotate</a> |
<a href="/comm-central/diff/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/src/nsMimeConverter.cpp">diff</a> |
<a href="/comm-central/comparison/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/src/nsMimeConverter.cpp">comparison</a> |
<a href="/comm-central/log/9d16a84709e32a7f65a1aefbef14f16bde2cf5cd/mailnews/mime/src/nsMimeConverter.cpp">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mailnews/compose/public/nsIMsgCompFields.idl</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mailnews/compose/public/nsIMsgCompFields.idl</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -36,17 +36,17 @@</span>
<a href="#l1.4"></a><span id="l1.4">  *</span>
<a href="#l1.5"></a><span id="l1.5">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l1.6"></a><span id="l1.6"> </span>
<a href="#l1.7"></a><span id="l1.7"> #include &quot;nsISupports.idl&quot;</span>
<a href="#l1.8"></a><span id="l1.8"> #include &quot;nsIMsgRecipientArray.idl&quot;</span>
<a href="#l1.9"></a><span id="l1.9"> #include &quot;nsIMsgAttachment.idl&quot;</span>
<a href="#l1.10"></a><span id="l1.10"> #include &quot;nsISupportsArray.idl&quot;</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-[scriptable, uuid(9d9752b2-1dd0-466c-926f-2fe50a153406)]</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+[scriptable, uuid(315eb1c3-bcd0-41fc-a652-865859fc2964)]</span>
<a href="#l1.14"></a><span id="l1.14"> interface nsIMsgCompFields : nsISupports {</span>
<a href="#l1.15"></a><span id="l1.15"> </span>
<a href="#l1.16"></a><span id="l1.16">   attribute AString from;</span>
<a href="#l1.17"></a><span id="l1.17">   attribute AString replyTo;</span>
<a href="#l1.18"></a><span id="l1.18">   attribute AString to;</span>
<a href="#l1.19"></a><span id="l1.19">   attribute AString cc;</span>
<a href="#l1.20"></a><span id="l1.20">   attribute AString bcc;</span>
<a href="#l1.21"></a><span id="l1.21">   </span>
<a href="#l1.22"></a><span id="l1.22" class="difflineat">@@ -55,40 +55,32 @@ interface nsIMsgCompFields : nsISupports</span>
<a href="#l1.23"></a><span id="l1.23">   </span>
<a href="#l1.24"></a><span id="l1.24">   attribute AString newsgroups;</span>
<a href="#l1.25"></a><span id="l1.25">   attribute string  newshost;</span>
<a href="#l1.26"></a><span id="l1.26">   attribute string  newspostUrl;</span>
<a href="#l1.27"></a><span id="l1.27">   attribute string  followupTo;</span>
<a href="#l1.28"></a><span id="l1.28"> </span>
<a href="#l1.29"></a><span id="l1.29">   attribute AString subject;</span>
<a href="#l1.30"></a><span id="l1.30">   </span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-  /**</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineminus">-   * attachments</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineminus">-   *</span>
<a href="#l1.34"></a><span id="l1.34" class="difflineminus">-   * @OBSOLETE, DO NOT USE ANYMORE</span>
<a href="#l1.35"></a><span id="l1.35" class="difflineminus">-   */</span>
<a href="#l1.36"></a><span id="l1.36" class="difflineminus">-  attribute string  attachments;</span>
<a href="#l1.37"></a><span id="l1.37" class="difflineminus">-</span>
<a href="#l1.38"></a><span id="l1.38">   attribute AString organization;</span>
<a href="#l1.39"></a><span id="l1.39">   attribute string  references;</span>
<a href="#l1.40"></a><span id="l1.40">   attribute string  priority;</span>
<a href="#l1.41"></a><span id="l1.41">   attribute string  messageId;</span>
<a href="#l1.42"></a><span id="l1.42">   attribute string  characterSet;</span>
<a href="#l1.43"></a><span id="l1.43">   readonly attribute string defaultCharacterSet;</span>
<a href="#l1.44"></a><span id="l1.44"> </span>
<a href="#l1.45"></a><span id="l1.45">   attribute AString templateName;</span>
<a href="#l1.46"></a><span id="l1.46">   attribute string  draftId;</span>
<a href="#l1.47"></a><span id="l1.47"> </span>
<a href="#l1.48"></a><span id="l1.48">   attribute boolean returnReceipt;</span>
<a href="#l1.49"></a><span id="l1.49">   attribute long receiptHeaderType;</span>
<a href="#l1.50"></a><span id="l1.50">   attribute boolean DSN;</span>
<a href="#l1.51"></a><span id="l1.51">   attribute boolean attachVCard;</span>
<a href="#l1.52"></a><span id="l1.52">   attribute boolean forcePlainText;</span>
<a href="#l1.53"></a><span id="l1.53">   attribute boolean useMultipartAlternative;</span>
<a href="#l1.54"></a><span id="l1.54" class="difflineminus">-  attribute boolean uuEncodeAttachments;</span>
<a href="#l1.55"></a><span id="l1.55">   attribute boolean bodyIsAsciiOnly;</span>
<a href="#l1.56"></a><span id="l1.56">   attribute boolean forceMsgEncoding;</span>
<a href="#l1.57"></a><span id="l1.57"> </span>
<a href="#l1.58"></a><span id="l1.58">   attribute AString otherRandomHeaders;</span>
<a href="#l1.59"></a><span id="l1.59"> </span>
<a href="#l1.60"></a><span id="l1.60">   attribute AString body;</span>
<a href="#l1.61"></a><span id="l1.61"> </span>
<a href="#l1.62"></a><span id="l1.62">   /**</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgAttachmentHandler.cpp</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgAttachmentHandler.cpp</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -322,17 +322,16 @@ nsMsgAttachmentHandler::AnalyzeSnarfedFi</span>
<a href="#l2.4"></a><span id="l2.4"> // Given a content-type and some info about the contents of the document,</span>
<a href="#l2.5"></a><span id="l2.5"> // decide what encoding it should have.</span>
<a href="#l2.6"></a><span id="l2.6"> //</span>
<a href="#l2.7"></a><span id="l2.7"> int</span>
<a href="#l2.8"></a><span id="l2.8"> nsMsgAttachmentHandler::PickEncoding(const char *charset, nsIMsgSend *mime_delivery_state)</span>
<a href="#l2.9"></a><span id="l2.9"> {</span>
<a href="#l2.10"></a><span id="l2.10">   nsCOMPtr&lt;nsIPrefBranch&gt; pPrefBranch(do_GetService(NS_PREFSERVICE_CONTRACTID));</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-  // use the boolean so we only have to test for uuencode vs base64 once</span>
<a href="#l2.13"></a><span id="l2.13">   PRBool needsB64 = PR_FALSE;</span>
<a href="#l2.14"></a><span id="l2.14">   PRBool forceB64 = PR_FALSE;</span>
<a href="#l2.15"></a><span id="l2.15"> </span>
<a href="#l2.16"></a><span id="l2.16">   if (m_already_encoded_p)</span>
<a href="#l2.17"></a><span id="l2.17">     goto DONE;</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19">   AnalyzeSnarfedFile();</span>
<a href="#l2.20"></a><span id="l2.20"> </span>
<a href="#l2.21"></a><span id="l2.21" class="difflineat">@@ -435,51 +434,31 @@ nsMsgAttachmentHandler::PickEncoding(con</span>
<a href="#l2.22"></a><span id="l2.22">         PR_Free(m_encoding);</span>
<a href="#l2.23"></a><span id="l2.23">         m_encoding = PL_strdup (ENCODING_7BIT);</span>
<a href="#l2.24"></a><span id="l2.24">       }</span>
<a href="#l2.25"></a><span id="l2.25">   }</span>
<a href="#l2.26"></a><span id="l2.26"> </span>
<a href="#l2.27"></a><span id="l2.27">   if (needsB64)</span>
<a href="#l2.28"></a><span id="l2.28">   {</span>
<a href="#l2.29"></a><span id="l2.29">     //</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineminus">-    // We might have to uuencode instead of base64 the binary data.</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineplus">+    // always base64 binary data.</span>
<a href="#l2.32"></a><span id="l2.32">     //</span>
<a href="#l2.33"></a><span id="l2.33">     PR_Free(m_encoding);</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineminus">-    if (UseUUEncode_p())</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineminus">-      m_encoding = PL_strdup (ENCODING_UUENCODE);</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineminus">-    else</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineminus">-      m_encoding = PL_strdup (ENCODING_BASE64);</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineplus">+    m_encoding = PL_strdup (ENCODING_BASE64);</span>
<a href="#l2.39"></a><span id="l2.39">   }</span>
<a href="#l2.40"></a><span id="l2.40"> </span>
<a href="#l2.41"></a><span id="l2.41">   /* Now that we've picked an encoding, initialize the filter.</span>
<a href="#l2.42"></a><span id="l2.42">   */</span>
<a href="#l2.43"></a><span id="l2.43">   NS_ASSERTION(!m_encoder_data, &quot;not-null m_encoder_data&quot;);</span>
<a href="#l2.44"></a><span id="l2.44">   if (!PL_strcasecmp(m_encoding, ENCODING_BASE64))</span>
<a href="#l2.45"></a><span id="l2.45">   {</span>
<a href="#l2.46"></a><span id="l2.46">     m_encoder_data = MIME_B64EncoderInit(mime_encoder_output_fn,</span>
<a href="#l2.47"></a><span id="l2.47">       mime_delivery_state);</span>
<a href="#l2.48"></a><span id="l2.48">     if (!m_encoder_data) return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l2.49"></a><span id="l2.49">   }</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineminus">-  else if (!PL_strcasecmp(m_encoding, ENCODING_UUENCODE))</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineminus">-  {</span>
<a href="#l2.52"></a><span id="l2.52" class="difflineminus">-    nsCString tailName;</span>
<a href="#l2.53"></a><span id="l2.53" class="difflineminus">-    nsCString turl;</span>
<a href="#l2.54"></a><span id="l2.54" class="difflineminus">-    if (mURL)</span>
<a href="#l2.55"></a><span id="l2.55" class="difflineminus">-    {</span>
<a href="#l2.56"></a><span id="l2.56" class="difflineminus">-      mURL-&gt;GetSpec(turl);</span>
<a href="#l2.57"></a><span id="l2.57" class="difflineminus">-      PRInt32 tailNamePos = turl.RFindChar('/');</span>
<a href="#l2.58"></a><span id="l2.58" class="difflineminus">-      if (tailNamePos != kNotFound)</span>
<a href="#l2.59"></a><span id="l2.59" class="difflineminus">-        turl.Right(tailName, turl.Length() - tailNamePos -1);</span>
<a href="#l2.60"></a><span id="l2.60" class="difflineminus">-     }</span>
<a href="#l2.61"></a><span id="l2.61" class="difflineminus">-</span>
<a href="#l2.62"></a><span id="l2.62" class="difflineminus">-    m_encoder_data = MIME_UUEncoderInit((char *)tailName.get(),</span>
<a href="#l2.63"></a><span id="l2.63" class="difflineminus">-      mime_encoder_output_fn,</span>
<a href="#l2.64"></a><span id="l2.64" class="difflineminus">-      mime_delivery_state);</span>
<a href="#l2.65"></a><span id="l2.65" class="difflineminus">-    if (!m_encoder_data) return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l2.66"></a><span id="l2.66" class="difflineminus">-  }</span>
<a href="#l2.67"></a><span id="l2.67">   else if (!PL_strcasecmp(m_encoding, ENCODING_QUOTED_PRINTABLE))</span>
<a href="#l2.68"></a><span id="l2.68">   {</span>
<a href="#l2.69"></a><span id="l2.69">     m_encoder_data = MIME_QPEncoderInit(mime_encoder_output_fn,</span>
<a href="#l2.70"></a><span id="l2.70">       mime_delivery_state);</span>
<a href="#l2.71"></a><span id="l2.71">     if (!m_encoder_data) return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l2.72"></a><span id="l2.72">   }</span>
<a href="#l2.73"></a><span id="l2.73">   else</span>
<a href="#l2.74"></a><span id="l2.74">   {</span>
<a href="#l2.75"></a><span id="l2.75" class="difflineat">@@ -1394,24 +1373,16 @@ nsMsgAttachmentHandler::UrlExit(nsresult</span>
<a href="#l2.76"></a><span id="l2.76">       m_mime_delivery_state-&gt;Fail(status, aMsg, &amp;ignoreMe);</span>
<a href="#l2.77"></a><span id="l2.77">     }</span>
<a href="#l2.78"></a><span id="l2.78">   }</span>
<a href="#l2.79"></a><span id="l2.79"> </span>
<a href="#l2.80"></a><span id="l2.80">   SetMimeDeliveryState(nsnull);</span>
<a href="#l2.81"></a><span id="l2.81">   return NS_OK;</span>
<a href="#l2.82"></a><span id="l2.82"> }</span>
<a href="#l2.83"></a><span id="l2.83"> </span>
<a href="#l2.84"></a><span id="l2.84" class="difflineminus">-PRBool</span>
<a href="#l2.85"></a><span id="l2.85" class="difflineminus">-nsMsgAttachmentHandler::UseUUEncode_p(void)</span>
<a href="#l2.86"></a><span id="l2.86" class="difflineminus">-{</span>
<a href="#l2.87"></a><span id="l2.87" class="difflineminus">-  if (mCompFields)</span>
<a href="#l2.88"></a><span id="l2.88" class="difflineminus">-    return mCompFields-&gt;GetUuEncodeAttachments();</span>
<a href="#l2.89"></a><span id="l2.89" class="difflineminus">-  else</span>
<a href="#l2.90"></a><span id="l2.90" class="difflineminus">-    return PR_FALSE;</span>
<a href="#l2.91"></a><span id="l2.91" class="difflineminus">-}</span>
<a href="#l2.92"></a><span id="l2.92"> </span>
<a href="#l2.93"></a><span id="l2.93"> nsresult</span>
<a href="#l2.94"></a><span id="l2.94"> nsMsgAttachmentHandler::GetMimeDeliveryState(nsIMsgSend** _retval)</span>
<a href="#l2.95"></a><span id="l2.95"> {</span>
<a href="#l2.96"></a><span id="l2.96">   NS_ENSURE_ARG(_retval);</span>
<a href="#l2.97"></a><span id="l2.97">   *_retval = m_mime_delivery_state;</span>
<a href="#l2.98"></a><span id="l2.98">   NS_IF_ADDREF(*_retval);</span>
<a href="#l2.99"></a><span id="l2.99">   return NS_OK;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgCompFields.cpp</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgCompFields.cpp</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -59,17 +59,16 @@ nsMsgCompFields::nsMsgCompFields()</span>
<a href="#l3.4"></a><span id="l3.4"> </span>
<a href="#l3.5"></a><span id="l3.5">   m_body.Truncate();</span>
<a href="#l3.6"></a><span id="l3.6"> </span>
<a href="#l3.7"></a><span id="l3.7">   NS_NewISupportsArray(getter_AddRefs(m_attachments));</span>
<a href="#l3.8"></a><span id="l3.8"> </span>
<a href="#l3.9"></a><span id="l3.9">   m_attachVCard = PR_FALSE;</span>
<a href="#l3.10"></a><span id="l3.10">   m_forcePlainText = PR_FALSE;</span>
<a href="#l3.11"></a><span id="l3.11">   m_useMultipartAlternative = PR_FALSE;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-  m_uuEncodeAttachments = PR_FALSE;</span>
<a href="#l3.13"></a><span id="l3.13">   m_returnReceipt = PR_FALSE;</span>
<a href="#l3.14"></a><span id="l3.14">   m_receiptHeaderType = nsIMsgMdnGenerator::eDntType;</span>
<a href="#l3.15"></a><span id="l3.15">   m_DSN = PR_FALSE;</span>
<a href="#l3.16"></a><span id="l3.16">   m_bodyIsAsciiOnly = PR_FALSE;</span>
<a href="#l3.17"></a><span id="l3.17">   m_forceMsgEncoding = PR_FALSE;</span>
<a href="#l3.18"></a><span id="l3.18">   m_needToCheckCharset = PR_TRUE;</span>
<a href="#l3.19"></a><span id="l3.19"> </span>
<a href="#l3.20"></a><span id="l3.20">   // Get the default charset from pref, use this as a mail charset.</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineat">@@ -243,35 +242,22 @@ NS_IMETHODIMP nsMsgCompFields::SetSubjec</span>
<a href="#l3.22"></a><span id="l3.22">   return SetUnicodeHeader(MSG_SUBJECT_HEADER_ID, value);</span>
<a href="#l3.23"></a><span id="l3.23"> }</span>
<a href="#l3.24"></a><span id="l3.24"> </span>
<a href="#l3.25"></a><span id="l3.25"> NS_IMETHODIMP nsMsgCompFields::GetSubject(nsAString &amp;_retval)</span>
<a href="#l3.26"></a><span id="l3.26"> {</span>
<a href="#l3.27"></a><span id="l3.27">   return GetUnicodeHeader(MSG_SUBJECT_HEADER_ID, _retval);</span>
<a href="#l3.28"></a><span id="l3.28"> }</span>
<a href="#l3.29"></a><span id="l3.29"> </span>
<a href="#l3.30"></a><span id="l3.30" class="difflineminus">-NS_IMETHODIMP nsMsgCompFields::SetAttachments(const char *value)</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-{</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineminus">-  NS_ASSERTION(0, &quot;nsMsgCompFields::SetAttachments is not supported anymore, please use nsMsgCompFields::AddAttachment&quot;);</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineminus">-  return SetAsciiHeader(MSG_ATTACHMENTS_HEADER_ID, value);</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineminus">-}</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineminus">-</span>
<a href="#l3.36"></a><span id="l3.36"> NS_IMETHODIMP nsMsgCompFields::SetTemporaryFiles(const char *value)</span>
<a href="#l3.37"></a><span id="l3.37"> {</span>
<a href="#l3.38"></a><span id="l3.38">   NS_ASSERTION(0, &quot;nsMsgCompFields::SetTemporaryFiles is not supported anymore, please use nsMsgCompFields::AddAttachment&quot;);</span>
<a href="#l3.39"></a><span id="l3.39">   return SetAsciiHeader(MSG_TEMPORARY_FILES_HEADER_ID, value);</span>
<a href="#l3.40"></a><span id="l3.40"> }</span>
<a href="#l3.41"></a><span id="l3.41"> </span>
<a href="#l3.42"></a><span id="l3.42" class="difflineminus">-NS_IMETHODIMP nsMsgCompFields::GetAttachments(char **_retval)</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineminus">-{</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineminus">-  NS_ASSERTION(0, &quot;nsMsgCompFields::GetAttachments is not supported anymore, please use nsMsgCompFields::GetAttachmentsArray&quot;);</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineminus">-  *_retval = strdup(GetAsciiHeader(MSG_ATTACHMENTS_HEADER_ID));</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineminus">-  return *_retval ? NS_OK : NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineminus">-}</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineminus">-</span>
<a href="#l3.49"></a><span id="l3.49"> NS_IMETHODIMP nsMsgCompFields::GetTemporaryFiles(char **_retval)</span>
<a href="#l3.50"></a><span id="l3.50"> {</span>
<a href="#l3.51"></a><span id="l3.51">   *_retval = strdup(GetAsciiHeader(MSG_TEMPORARY_FILES_HEADER_ID));</span>
<a href="#l3.52"></a><span id="l3.52">   return *_retval ? NS_OK : NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l3.53"></a><span id="l3.53"> }</span>
<a href="#l3.54"></a><span id="l3.54"> </span>
<a href="#l3.55"></a><span id="l3.55"> NS_IMETHODIMP nsMsgCompFields::SetOrganization(const nsAString &amp;value)</span>
<a href="#l3.56"></a><span id="l3.56"> {</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineat">@@ -450,28 +436,16 @@ NS_IMETHODIMP nsMsgCompFields::SetUseMul</span>
<a href="#l3.58"></a><span id="l3.58"> }</span>
<a href="#l3.59"></a><span id="l3.59"> </span>
<a href="#l3.60"></a><span id="l3.60"> NS_IMETHODIMP nsMsgCompFields::GetUseMultipartAlternative(PRBool *_retval)</span>
<a href="#l3.61"></a><span id="l3.61"> {</span>
<a href="#l3.62"></a><span id="l3.62">   *_retval = m_useMultipartAlternative;</span>
<a href="#l3.63"></a><span id="l3.63">   return NS_OK;</span>
<a href="#l3.64"></a><span id="l3.64"> }</span>
<a href="#l3.65"></a><span id="l3.65"> </span>
<a href="#l3.66"></a><span id="l3.66" class="difflineminus">-NS_IMETHODIMP nsMsgCompFields::SetUuEncodeAttachments(PRBool value)</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineminus">-{</span>
<a href="#l3.68"></a><span id="l3.68" class="difflineminus">-  m_uuEncodeAttachments = value;</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineminus">-  return NS_OK;</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineminus">-}</span>
<a href="#l3.71"></a><span id="l3.71" class="difflineminus">-</span>
<a href="#l3.72"></a><span id="l3.72" class="difflineminus">-NS_IMETHODIMP nsMsgCompFields::GetUuEncodeAttachments(PRBool *_retval)</span>
<a href="#l3.73"></a><span id="l3.73" class="difflineminus">-{</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineminus">-  *_retval = m_uuEncodeAttachments;</span>
<a href="#l3.75"></a><span id="l3.75" class="difflineminus">-  return NS_OK;</span>
<a href="#l3.76"></a><span id="l3.76" class="difflineminus">-}</span>
<a href="#l3.77"></a><span id="l3.77" class="difflineminus">-</span>
<a href="#l3.78"></a><span id="l3.78"> NS_IMETHODIMP nsMsgCompFields::SetBodyIsAsciiOnly(PRBool value)</span>
<a href="#l3.79"></a><span id="l3.79"> {</span>
<a href="#l3.80"></a><span id="l3.80">   m_bodyIsAsciiOnly = value;</span>
<a href="#l3.81"></a><span id="l3.81">   return NS_OK;</span>
<a href="#l3.82"></a><span id="l3.82"> }</span>
<a href="#l3.83"></a><span id="l3.83"> </span>
<a href="#l3.84"></a><span id="l3.84"> NS_IMETHODIMP nsMsgCompFields::GetBodyIsAsciiOnly(PRBool *_retval)</span>
<a href="#l3.85"></a><span id="l3.85"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgCompFields.h</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgCompFields.h</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -179,34 +179,32 @@ public:</span>
<a href="#l4.4"></a><span id="l4.4"> </span>
<a href="#l4.5"></a><span id="l4.5">   const char* GetDraftId() {return GetAsciiHeader(MSG_DRAFT_ID_HEADER_ID);}</span>
<a href="#l4.6"></a><span id="l4.6"> </span>
<a href="#l4.7"></a><span id="l4.7">   PRBool GetReturnReceipt() {return m_returnReceipt;}</span>
<a href="#l4.8"></a><span id="l4.8">   PRBool GetDSN() {return m_DSN;}</span>
<a href="#l4.9"></a><span id="l4.9">   PRBool GetAttachVCard() {return m_attachVCard;}</span>
<a href="#l4.10"></a><span id="l4.10">   PRBool GetForcePlainText() {return m_forcePlainText;}</span>
<a href="#l4.11"></a><span id="l4.11">   PRBool GetUseMultipartAlternative() {return m_useMultipartAlternative;}</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-  PRBool GetUuEncodeAttachments() {return m_uuEncodeAttachments;}</span>
<a href="#l4.13"></a><span id="l4.13">   PRBool GetBodyIsAsciiOnly() {return m_bodyIsAsciiOnly;}</span>
<a href="#l4.14"></a><span id="l4.14">   PRBool GetForceMsgEncoding() {return m_forceMsgEncoding;}</span>
<a href="#l4.15"></a><span id="l4.15"> </span>
<a href="#l4.16"></a><span id="l4.16">   nsresult SetBody(const char *value);</span>
<a href="#l4.17"></a><span id="l4.17">   const char* GetBody();</span>
<a href="#l4.18"></a><span id="l4.18"> </span>
<a href="#l4.19"></a><span id="l4.19">   nsresult SplitRecipientsEx(const nsAString &amp;recipients,</span>
<a href="#l4.20"></a><span id="l4.20">                              nsTArray&lt;nsMsgRecipient&gt; &amp;aResult); </span>
<a href="#l4.21"></a><span id="l4.21"> </span>
<a href="#l4.22"></a><span id="l4.22"> protected:</span>
<a href="#l4.23"></a><span id="l4.23">   char*       m_headers[MSG_MAX_HEADERS];</span>
<a href="#l4.24"></a><span id="l4.24">   nsCString   m_body;</span>
<a href="#l4.25"></a><span id="l4.25">   nsCOMPtr&lt;nsISupportsArray&gt;  m_attachments;</span>
<a href="#l4.26"></a><span id="l4.26">   PRBool      m_attachVCard;</span>
<a href="#l4.27"></a><span id="l4.27">   PRBool      m_forcePlainText;</span>
<a href="#l4.28"></a><span id="l4.28">   PRBool      m_useMultipartAlternative;</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineminus">-  PRBool      m_uuEncodeAttachments;</span>
<a href="#l4.30"></a><span id="l4.30">   PRBool      m_returnReceipt;</span>
<a href="#l4.31"></a><span id="l4.31">   PRBool      m_DSN;</span>
<a href="#l4.32"></a><span id="l4.32">   PRBool      m_bodyIsAsciiOnly;</span>
<a href="#l4.33"></a><span id="l4.33">   PRBool      m_forceMsgEncoding;</span>
<a href="#l4.34"></a><span id="l4.34">   PRInt32     m_receiptHeaderType;        /* receipt header type */</span>
<a href="#l4.35"></a><span id="l4.35">   nsCString   m_DefaultCharacterSet;</span>
<a href="#l4.36"></a><span id="l4.36">   PRBool      m_needToCheckCharset;</span>
<a href="#l4.37"></a><span id="l4.37"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgCompUtils.cpp</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgCompUtils.cpp</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -469,20 +469,17 @@ mime_generate_headers (nsMsgCompFields *</span>
<a href="#l5.4"></a><span id="l5.4">     else</span>
<a href="#l5.5"></a><span id="l5.5">       PUSH_STRING(&quot;receipt=0&quot;);</span>
<a href="#l5.6"></a><span id="l5.6">     PUSH_STRING(&quot;; &quot;);</span>
<a href="#l5.7"></a><span id="l5.7">     if (fields-&gt;GetDSN())</span>
<a href="#l5.8"></a><span id="l5.8">       PUSH_STRING(&quot;DSN=1&quot;);</span>
<a href="#l5.9"></a><span id="l5.9">     else</span>
<a href="#l5.10"></a><span id="l5.10">       PUSH_STRING(&quot;DSN=0&quot;);</span>
<a href="#l5.11"></a><span id="l5.11">     PUSH_STRING(&quot;; &quot;);</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-    if (fields-&gt;GetUuEncodeAttachments())</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-      PUSH_STRING(&quot;uuencode=1&quot;);</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineminus">-    else</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineminus">-      PUSH_STRING(&quot;uuencode=0&quot;);</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+    PUSH_STRING(&quot;uuencode=0&quot;);</span>
<a href="#l5.17"></a><span id="l5.17"> </span>
<a href="#l5.18"></a><span id="l5.18">     PUSH_NEWLINE ();</span>
<a href="#l5.19"></a><span id="l5.19">   }</span>
<a href="#l5.20"></a><span id="l5.20"> </span>
<a href="#l5.21"></a><span id="l5.21"> </span>
<a href="#l5.22"></a><span id="l5.22">   nsCOMPtr&lt;nsIHttpProtocolHandler&gt; pHTTPHandler = do_GetService(NS_NETWORK_PROTOCOL_CONTRACTID_PREFIX &quot;http&quot;, &amp;rv);</span>
<a href="#l5.23"></a><span id="l5.23">   if (NS_SUCCEEDED(rv) &amp;&amp; pHTTPHandler)</span>
<a href="#l5.24"></a><span id="l5.24">   {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgEncoders.cpp</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgEncoders.cpp</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -67,30 +67,16 @@ MIME_QPEncoderInit(nsresult (*output_fn)</span>
<a href="#l6.4"></a><span id="l6.4">   if (NS_SUCCEEDED(res) &amp;&amp; nsnull != converter) </span>
<a href="#l6.5"></a><span id="l6.5">   {</span>
<a href="#l6.6"></a><span id="l6.6">     res = converter-&gt;QPEncoderInit(output_fn, closure, &amp;returnEncoderData);</span>
<a href="#l6.7"></a><span id="l6.7">     NS_RELEASE(converter);</span>
<a href="#l6.8"></a><span id="l6.8">   }</span>
<a href="#l6.9"></a><span id="l6.9">   return NS_SUCCEEDED(res) ? returnEncoderData : nsnull;</span>
<a href="#l6.10"></a><span id="l6.10"> }</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-extern &quot;C&quot; MimeEncoderData *	</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-MIME_UUEncoderInit(char *filename, nsresult (*output_fn) (const char *buf, PRInt32 size, void *closure), void *closure) </span>
<a href="#l6.14"></a><span id="l6.14" class="difflineminus">-{</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineminus">-  MimeEncoderData *returnEncoderData = nsnull;</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineminus">-  nsIMimeConverter *converter;</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineminus">-  nsresult res = CallCreateInstance(NS_MIME_CONVERTER_CONTRACTID, &amp;converter);</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineminus">-  if (NS_SUCCEEDED(res) &amp;&amp; nsnull != converter) </span>
<a href="#l6.19"></a><span id="l6.19" class="difflineminus">-  {</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineminus">-    res = converter-&gt;UUEncoderInit(filename, output_fn, closure, &amp;returnEncoderData);</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineminus">-    NS_RELEASE(converter);</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineminus">-  }</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineminus">-  return NS_SUCCEEDED(res) ? returnEncoderData : nsnull;</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineminus">-}</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineminus">-</span>
<a href="#l6.26"></a><span id="l6.26"> extern &quot;C&quot; nsresult</span>
<a href="#l6.27"></a><span id="l6.27"> MIME_EncoderDestroy(MimeEncoderData *data, PRBool abort_p) </span>
<a href="#l6.28"></a><span id="l6.28"> {</span>
<a href="#l6.29"></a><span id="l6.29">   //MimeEncoderData *returnEncoderData = nsnull;</span>
<a href="#l6.30"></a><span id="l6.30">   nsIMimeConverter *converter;</span>
<a href="#l6.31"></a><span id="l6.31">   nsresult res = CallCreateInstance(NS_MIME_CONVERTER_CONTRACTID, &amp;converter);</span>
<a href="#l6.32"></a><span id="l6.32">   if (NS_SUCCEEDED(res) &amp;&amp; nsnull != converter) </span>
<a href="#l6.33"></a><span id="l6.33">   {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgSend.cpp</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgSend.cpp</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -3067,18 +3067,16 @@ nsMsgComposeAndSend::InitCompositionFiel</span>
<a href="#l7.4"></a><span id="l7.4">   PRInt32 receiptType = nsIMsgMdnGenerator::eDntType;</span>
<a href="#l7.5"></a><span id="l7.5">   fields-&gt;GetReceiptHeaderType(&amp;receiptType);</span>
<a href="#l7.6"></a><span id="l7.6"> </span>
<a href="#l7.7"></a><span id="l7.7">   mCompFields-&gt;SetReturnReceipt(fields-&gt;GetReturnReceipt());</span>
<a href="#l7.8"></a><span id="l7.8">   mCompFields-&gt;SetReceiptHeaderType(receiptType);</span>
<a href="#l7.9"></a><span id="l7.9"> </span>
<a href="#l7.10"></a><span id="l7.10">   mCompFields-&gt;SetDSN(fields-&gt;GetDSN());</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-  mCompFields-&gt;SetUuEncodeAttachments(fields-&gt;GetUuEncodeAttachments());</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-</span>
<a href="#l7.14"></a><span id="l7.14">   mCompFields-&gt;SetBodyIsAsciiOnly(fields-&gt;GetBodyIsAsciiOnly());</span>
<a href="#l7.15"></a><span id="l7.15">   mCompFields-&gt;SetForceMsgEncoding(fields-&gt;GetForceMsgEncoding());</span>
<a href="#l7.16"></a><span id="l7.16"> </span>
<a href="#l7.17"></a><span id="l7.17">   nsCOMPtr&lt;nsISupports&gt; secInfo;</span>
<a href="#l7.18"></a><span id="l7.18">   fields-&gt;GetSecurityInfo(getter_AddRefs(secInfo));</span>
<a href="#l7.19"></a><span id="l7.19"> </span>
<a href="#l7.20"></a><span id="l7.20">   mCompFields-&gt;SetSecurityInfo(secInfo);</span>
<a href="#l7.21"></a><span id="l7.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -109,30 +109,16 @@ MIME_QPEncoderInit(nsresult (*PR_CALLBAC</span>
<a href="#l8.4"></a><span id="l8.4">   if (NS_SUCCEEDED(res) &amp;&amp; nsnull != converter) </span>
<a href="#l8.5"></a><span id="l8.5">   {</span>
<a href="#l8.6"></a><span id="l8.6">     res = converter-&gt;QPEncoderInit(output_fn, closure, &amp;returnEncoderData);</span>
<a href="#l8.7"></a><span id="l8.7">     NS_RELEASE(converter);</span>
<a href="#l8.8"></a><span id="l8.8">   }</span>
<a href="#l8.9"></a><span id="l8.9">   return NS_SUCCEEDED(res) ? returnEncoderData : nsnull;</span>
<a href="#l8.10"></a><span id="l8.10"> }</span>
<a href="#l8.11"></a><span id="l8.11"> </span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-MimeEncoderData * </span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-MIME_UUEncoderInit(char *filename, nsresult (*PR_CALLBACK output_fn) (const char *buf, PRInt32 size, void *closure), void *closure) </span>
<a href="#l8.14"></a><span id="l8.14" class="difflineminus">-{</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">-  MimeEncoderData *returnEncoderData = nsnull;</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineminus">-  nsIMimeConverter *converter;</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineminus">-  nsresult res = CallCreateInstance(NS_MIME_CONVERTER_CONTRACTID, &amp;converter);</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineminus">-  if (NS_SUCCEEDED(res) &amp;&amp; nsnull != converter) </span>
<a href="#l8.19"></a><span id="l8.19" class="difflineminus">-  {</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineminus">-    res = converter-&gt;UUEncoderInit(filename, output_fn, closure, &amp;returnEncoderData);</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineminus">-    NS_RELEASE(converter);</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineminus">-  }</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineminus">-  return NS_SUCCEEDED(res) ? returnEncoderData : nsnull;</span>
<a href="#l8.24"></a><span id="l8.24" class="difflineminus">-}</span>
<a href="#l8.25"></a><span id="l8.25" class="difflineminus">-</span>
<a href="#l8.26"></a><span id="l8.26"> nsresult</span>
<a href="#l8.27"></a><span id="l8.27"> MIME_EncoderDestroy(MimeEncoderData *data, PRBool abort_p) </span>
<a href="#l8.28"></a><span id="l8.28"> {</span>
<a href="#l8.29"></a><span id="l8.29">   //MimeEncoderData *returnEncoderData = nsnull;</span>
<a href="#l8.30"></a><span id="l8.30">   nsIMimeConverter *converter;</span>
<a href="#l8.31"></a><span id="l8.31">   nsresult res = CallCreateInstance(NS_MIME_CONVERTER_CONTRACTID, &amp;converter);</span>
<a href="#l8.32"></a><span id="l8.32">   if (NS_SUCCEEDED(res) &amp;&amp; nsnull != converter) </span>
<a href="#l8.33"></a><span id="l8.33">   {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mailnews/mime/public/nsIMimeConverter.idl</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mailnews/mime/public/nsIMimeConverter.idl</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -139,21 +139,16 @@ interface nsIMimeConverter : nsISupports</span>
<a href="#l9.4"></a><span id="l9.4">   MimeEncoderDataPtr B64EncoderInit(in MimeConverterOutputCallback output_fn,</span>
<a href="#l9.5"></a><span id="l9.5">                                     in voidPtr closure);</span>
<a href="#l9.6"></a><span id="l9.6"> </span>
<a href="#l9.7"></a><span id="l9.7">   [noscript]</span>
<a href="#l9.8"></a><span id="l9.8">   MimeEncoderDataPtr QPEncoderInit(in MimeConverterOutputCallback output_fn,</span>
<a href="#l9.9"></a><span id="l9.9">                                    in voidPtr closure);</span>
<a href="#l9.10"></a><span id="l9.10"> </span>
<a href="#l9.11"></a><span id="l9.11">   [noscript]</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-  MimeEncoderDataPtr UUEncoderInit(in string filename,</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineminus">-                                   in MimeConverterOutputCallback output_fn,</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineminus">-                                   in voidPtr closure);</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineminus">-</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineminus">-  [noscript]</span>
<a href="#l9.17"></a><span id="l9.17">   void EncoderDestroy(in MimeEncoderDataPtr data, in boolean abort_p);</span>
<a href="#l9.18"></a><span id="l9.18"> </span>
<a href="#l9.19"></a><span id="l9.19">   [noscript]</span>
<a href="#l9.20"></a><span id="l9.20">   long EncoderWrite(in MimeEncoderDataPtr data, in string buffer,</span>
<a href="#l9.21"></a><span id="l9.21">                     in long size);</span>
<a href="#l9.22"></a><span id="l9.22"> </span>
<a href="#l9.23"></a><span id="l9.23"> };</span>
<a href="#l9.24"></a><span id="l9.24"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mailnews/mime/src/mimedrft.cpp</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mailnews/mime/src/mimedrft.cpp</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -1376,19 +1376,16 @@ mime_parse_stream_complete (nsMIMESessio</span>
<a href="#l10.4"></a><span id="l10.4">         // return receipt; since the DNS is out of the picture we now use the</span>
<a href="#l10.5"></a><span id="l10.5">         // header type - 1 to tell whether user has requested the return receipt</span>
<a href="#l10.6"></a><span id="l10.6">         fields-&gt;SetReceiptHeaderType(((PRInt32)receiptType) - 1);</span>
<a href="#l10.7"></a><span id="l10.7">       }</span>
<a href="#l10.8"></a><span id="l10.8">       PR_FREEIF(parm);</span>
<a href="#l10.9"></a><span id="l10.9">       parm = MimeHeaders_get_parameter(draftInfo, &quot;DSN&quot;, NULL, NULL);</span>
<a href="#l10.10"></a><span id="l10.10">       fields-&gt;SetDSN(parm &amp;&amp; !strcmp(parm, &quot;1&quot;));</span>
<a href="#l10.11"></a><span id="l10.11">       PR_Free(parm);</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-      parm = MimeHeaders_get_parameter(draftInfo, &quot;uuencode&quot;, NULL, NULL);</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-      fields-&gt;SetUuEncodeAttachments(parm &amp;&amp; !strcmp(parm, &quot;1&quot;));</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineminus">-      PR_FREEIF(parm);</span>
<a href="#l10.15"></a><span id="l10.15">       parm = MimeHeaders_get_parameter(draftInfo, &quot;html&quot;, NULL, NULL);</span>
<a href="#l10.16"></a><span id="l10.16">       if (parm)</span>
<a href="#l10.17"></a><span id="l10.17">         sscanf(parm, &quot;%d&quot;, &amp;htmlAction);</span>
<a href="#l10.18"></a><span id="l10.18">       PR_FREEIF(parm);</span>
<a href="#l10.19"></a><span id="l10.19">       parm = MimeHeaders_get_parameter(draftInfo, &quot;linewidth&quot;, NULL, NULL);</span>
<a href="#l10.20"></a><span id="l10.20">       if (parm)</span>
<a href="#l10.21"></a><span id="l10.21">         sscanf(parm, &quot;%d&quot;, &amp;lineWidth);</span>
<a href="#l10.22"></a><span id="l10.22">       PR_FREEIF(parm);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mailnews/mime/src/mimeenc.cpp</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mailnews/mime/src/mimeenc.cpp</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -866,140 +866,16 @@ struct MimeEncoderData {</span>
<a href="#l11.4"></a><span id="l11.4"> </span>
<a href="#l11.5"></a><span id="l11.5">   char *filename; /* filename for use with uuencoding */</span>
<a href="#l11.6"></a><span id="l11.6"> </span>
<a href="#l11.7"></a><span id="l11.7">   /* Where to write the encoded data */</span>
<a href="#l11.8"></a><span id="l11.8">   nsresult (*write_buffer) (const char *buf, PRInt32 size, void *closure);</span>
<a href="#l11.9"></a><span id="l11.9">   void *closure;</span>
<a href="#l11.10"></a><span id="l11.10"> };</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-/* Use what looks like a nice, safe value for a standard uue line length */</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineminus">-#define UUENCODE_LINE_LIMIT 60</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineminus">-</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineminus">-#undef ENC</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineminus">-#define ENC(c) ((c &amp; 0x3F) + ' ')</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineminus">-</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineminus">-void</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineminus">-mime_uuencode_write_line(MimeEncoderData *data)</span>
<a href="#l11.20"></a><span id="l11.20" class="difflineminus">-{</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineminus">-  /* Set the length byte at the beginning:</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineminus">-     encoded (data-&gt;line_byte_count). */</span>
<a href="#l11.23"></a><span id="l11.23" class="difflineminus">-  data-&gt;uue_line_buf[0] = ENC(data-&gt;line_byte_count);</span>
<a href="#l11.24"></a><span id="l11.24" class="difflineminus">-</span>
<a href="#l11.25"></a><span id="l11.25" class="difflineminus">-  /* Tack a CRLF onto the end. */</span>
<a href="#l11.26"></a><span id="l11.26" class="difflineminus">-  data-&gt;uue_line_buf[data-&gt;current_column++] = '\r';</span>
<a href="#l11.27"></a><span id="l11.27" class="difflineminus">-  data-&gt;uue_line_buf[data-&gt;current_column++] = '\n';</span>
<a href="#l11.28"></a><span id="l11.28" class="difflineminus">-</span>
<a href="#l11.29"></a><span id="l11.29" class="difflineminus">-  /* Write the line to output. */</span>
<a href="#l11.30"></a><span id="l11.30" class="difflineminus">-  data-&gt;write_buffer((const char*)data-&gt;uue_line_buf, data-&gt;current_column,</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-             data-&gt;closure);</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineminus">-</span>
<a href="#l11.33"></a><span id="l11.33" class="difflineminus">-  /* Reset data based on having just written a complete line. */</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineminus">-  data-&gt;in_buffer_count = 0;</span>
<a href="#l11.35"></a><span id="l11.35" class="difflineminus">-  data-&gt;line_byte_count = 0;</span>
<a href="#l11.36"></a><span id="l11.36" class="difflineminus">-  data-&gt;current_column = 1;</span>
<a href="#l11.37"></a><span id="l11.37" class="difflineminus">-}</span>
<a href="#l11.38"></a><span id="l11.38" class="difflineminus">-</span>
<a href="#l11.39"></a><span id="l11.39" class="difflineminus">-void</span>
<a href="#l11.40"></a><span id="l11.40" class="difflineminus">-mime_uuencode_convert_triplet(MimeEncoderData *data)</span>
<a href="#l11.41"></a><span id="l11.41" class="difflineminus">-{</span>
<a href="#l11.42"></a><span id="l11.42" class="difflineminus">-  /*</span>
<a href="#l11.43"></a><span id="l11.43" class="difflineminus">-     If we have 3 bytes, encode them and add them to the current</span>
<a href="#l11.44"></a><span id="l11.44" class="difflineminus">-     line. The way we want to encode them is like this</span>
<a href="#l11.45"></a><span id="l11.45" class="difflineminus">-     (each digit corresponds to a bit in the binary source):</span>
<a href="#l11.46"></a><span id="l11.46" class="difflineminus">-     11111111 -&gt; 00111111 + ' ' (six highest bits of 1)</span>
<a href="#l11.47"></a><span id="l11.47" class="difflineminus">-     22222222    00112222 + ' ' (low 2 of 1, high 4 of 2)</span>
<a href="#l11.48"></a><span id="l11.48" class="difflineminus">-     33333333    00222233 + ' ' (low 4 of 2, high 2 of 3)</span>
<a href="#l11.49"></a><span id="l11.49" class="difflineminus">-                 00333333 + ' ' (low 6 of 3)</span>
<a href="#l11.50"></a><span id="l11.50" class="difflineminus">-  */</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineminus">-  char outData[4];</span>
<a href="#l11.52"></a><span id="l11.52" class="difflineminus">-  int i;</span>
<a href="#l11.53"></a><span id="l11.53" class="difflineminus">-</span>
<a href="#l11.54"></a><span id="l11.54" class="difflineminus">-  outData[0] = data-&gt;in_buffer[0] &gt;&gt; 2;</span>
<a href="#l11.55"></a><span id="l11.55" class="difflineminus">-</span>
<a href="#l11.56"></a><span id="l11.56" class="difflineminus">-  outData[1] = ((data-&gt;in_buffer[0] &lt;&lt; 4) &amp; 0x30);</span>
<a href="#l11.57"></a><span id="l11.57" class="difflineminus">-  outData[1] |= data-&gt;in_buffer[1] &gt;&gt; 4;</span>
<a href="#l11.58"></a><span id="l11.58" class="difflineminus">-</span>
<a href="#l11.59"></a><span id="l11.59" class="difflineminus">-  outData[2] = ((data-&gt;in_buffer[1] &lt;&lt; 2) &amp; 0x3C);</span>
<a href="#l11.60"></a><span id="l11.60" class="difflineminus">-  outData[2] |= data-&gt;in_buffer[2] &gt;&gt; 6;</span>
<a href="#l11.61"></a><span id="l11.61" class="difflineminus">-</span>
<a href="#l11.62"></a><span id="l11.62" class="difflineminus">-  outData[3] = data-&gt;in_buffer[2] &amp; 0x3F;</span>
<a href="#l11.63"></a><span id="l11.63" class="difflineminus">-</span>
<a href="#l11.64"></a><span id="l11.64" class="difflineminus">-  for(i=0;i&lt;4;i++)</span>
<a href="#l11.65"></a><span id="l11.65" class="difflineminus">-    data-&gt;uue_line_buf[data-&gt;current_column++] = ENC(outData[i]);</span>
<a href="#l11.66"></a><span id="l11.66" class="difflineminus">-</span>
<a href="#l11.67"></a><span id="l11.67" class="difflineminus">-  data-&gt;in_buffer_count = 0;</span>
<a href="#l11.68"></a><span id="l11.68" class="difflineminus">-}</span>
<a href="#l11.69"></a><span id="l11.69" class="difflineminus">-</span>
<a href="#l11.70"></a><span id="l11.70" class="difflineminus">-int</span>
<a href="#l11.71"></a><span id="l11.71" class="difflineminus">-mime_uuencode_buffer(MimeEncoderData *data,</span>
<a href="#l11.72"></a><span id="l11.72" class="difflineminus">-             const char *buffer, PRInt32 size)</span>
<a href="#l11.73"></a><span id="l11.73" class="difflineminus">-{</span>
<a href="#l11.74"></a><span id="l11.74" class="difflineminus">-  /* If this is the first time through, write a begin statement. */</span>
<a href="#l11.75"></a><span id="l11.75" class="difflineminus">-  if (!(data-&gt;uue_wrote_begin))</span>
<a href="#l11.76"></a><span id="l11.76" class="difflineminus">-  {</span>
<a href="#l11.77"></a><span id="l11.77" class="difflineminus">-    char firstLine[256];</span>
<a href="#l11.78"></a><span id="l11.78" class="difflineminus">-    PR_snprintf(firstLine, sizeof(firstLine), &quot;begin 644 %s\015\012&quot;, data-&gt;filename ? data-&gt;filename : &quot;&quot;);</span>
<a href="#l11.79"></a><span id="l11.79" class="difflineminus">-    data-&gt;write_buffer(firstLine, strlen(firstLine), data-&gt;closure);</span>
<a href="#l11.80"></a><span id="l11.80" class="difflineminus">-    data-&gt;uue_wrote_begin = PR_TRUE;</span>
<a href="#l11.81"></a><span id="l11.81" class="difflineminus">-    data-&gt;current_column = 1; /* initialization unique to uuencode */</span>
<a href="#l11.82"></a><span id="l11.82" class="difflineminus">-  }</span>
<a href="#l11.83"></a><span id="l11.83" class="difflineminus">-</span>
<a href="#l11.84"></a><span id="l11.84" class="difflineminus">-  /* Pick up where we left off. */</span>
<a href="#l11.85"></a><span id="l11.85" class="difflineminus">-  while(size &gt; 0)</span>
<a href="#l11.86"></a><span id="l11.86" class="difflineminus">-  {</span>
<a href="#l11.87"></a><span id="l11.87" class="difflineminus">-    /* If we've reached the end of a line, write the line out. */</span>
<a href="#l11.88"></a><span id="l11.88" class="difflineminus">-    if (data-&gt;current_column &gt;= UUENCODE_LINE_LIMIT)</span>
<a href="#l11.89"></a><span id="l11.89" class="difflineminus">-    {</span>
<a href="#l11.90"></a><span id="l11.90" class="difflineminus">-      /* End of a line. Write the line out. */</span>
<a href="#l11.91"></a><span id="l11.91" class="difflineminus">-      mime_uuencode_write_line(data);</span>
<a href="#l11.92"></a><span id="l11.92" class="difflineminus">-    }</span>
<a href="#l11.93"></a><span id="l11.93" class="difflineminus">-</span>
<a href="#l11.94"></a><span id="l11.94" class="difflineminus">-    /* Get the next 3 bytes if we have them, or whatever we can get. */</span>
<a href="#l11.95"></a><span id="l11.95" class="difflineminus">-    while(size &gt; 0 &amp;&amp; data-&gt;in_buffer_count &lt; 3)</span>
<a href="#l11.96"></a><span id="l11.96" class="difflineminus">-    {</span>
<a href="#l11.97"></a><span id="l11.97" class="difflineminus">-      data-&gt;in_buffer[data-&gt;in_buffer_count++] = *(buffer++);</span>
<a href="#l11.98"></a><span id="l11.98" class="difflineminus">-      size--; data-&gt;line_byte_count++;</span>
<a href="#l11.99"></a><span id="l11.99" class="difflineminus">-    }</span>
<a href="#l11.100"></a><span id="l11.100" class="difflineminus">-</span>
<a href="#l11.101"></a><span id="l11.101" class="difflineminus">-    if (data-&gt;in_buffer_count == 3)</span>
<a href="#l11.102"></a><span id="l11.102" class="difflineminus">-    {</span>
<a href="#l11.103"></a><span id="l11.103" class="difflineminus">-      mime_uuencode_convert_triplet(data);</span>
<a href="#l11.104"></a><span id="l11.104" class="difflineminus">-    }</span>
<a href="#l11.105"></a><span id="l11.105" class="difflineminus">-  }</span>
<a href="#l11.106"></a><span id="l11.106" class="difflineminus">-  return 0;</span>
<a href="#l11.107"></a><span id="l11.107" class="difflineminus">-}</span>
<a href="#l11.108"></a><span id="l11.108" class="difflineminus">-</span>
<a href="#l11.109"></a><span id="l11.109" class="difflineminus">-int</span>
<a href="#l11.110"></a><span id="l11.110" class="difflineminus">-mime_uuencode_finish(MimeEncoderData *data)</span>
<a href="#l11.111"></a><span id="l11.111" class="difflineminus">-{</span>
<a href="#l11.112"></a><span id="l11.112" class="difflineminus">-  int i;</span>
<a href="#l11.113"></a><span id="l11.113" class="difflineminus">-  static const char *endStr = &quot;end\015\012&quot;;</span>
<a href="#l11.114"></a><span id="l11.114" class="difflineminus">-</span>
<a href="#l11.115"></a><span id="l11.115" class="difflineminus">-  /* If we have converted binary data to write to output, do it now. */</span>
<a href="#l11.116"></a><span id="l11.116" class="difflineminus">-  if (data-&gt;line_byte_count &gt; 0)</span>
<a href="#l11.117"></a><span id="l11.117" class="difflineminus">-  {</span>
<a href="#l11.118"></a><span id="l11.118" class="difflineminus">-    /* If we have binary data yet to be converted,</span>
<a href="#l11.119"></a><span id="l11.119" class="difflineminus">-       pad and convert it. */</span>
<a href="#l11.120"></a><span id="l11.120" class="difflineminus">-    if (data-&gt;in_buffer_count &gt; 0)</span>
<a href="#l11.121"></a><span id="l11.121" class="difflineminus">-    {</span>
<a href="#l11.122"></a><span id="l11.122" class="difflineminus">-      for(i=data-&gt;in_buffer_count;i&lt;3;i++)</span>
<a href="#l11.123"></a><span id="l11.123" class="difflineminus">-        data-&gt;in_buffer[i] = '\0'; /* pad with zeroes */</span>
<a href="#l11.124"></a><span id="l11.124" class="difflineminus">-</span>
<a href="#l11.125"></a><span id="l11.125" class="difflineminus">-      mime_uuencode_convert_triplet(data);</span>
<a href="#l11.126"></a><span id="l11.126" class="difflineminus">-    }</span>
<a href="#l11.127"></a><span id="l11.127" class="difflineminus">-</span>
<a href="#l11.128"></a><span id="l11.128" class="difflineminus">-    mime_uuencode_write_line(data);</span>
<a href="#l11.129"></a><span id="l11.129" class="difflineminus">-  }</span>
<a href="#l11.130"></a><span id="l11.130" class="difflineminus">-</span>
<a href="#l11.131"></a><span id="l11.131" class="difflineminus">-  /* Write 'end' on a line by itself. */</span>
<a href="#l11.132"></a><span id="l11.132" class="difflineminus">-  return data-&gt;write_buffer(endStr, strlen(endStr), data-&gt;closure);</span>
<a href="#l11.133"></a><span id="l11.133" class="difflineminus">-}</span>
<a href="#l11.134"></a><span id="l11.134" class="difflineminus">-</span>
<a href="#l11.135"></a><span id="l11.135" class="difflineminus">-#undef ENC</span>
<a href="#l11.136"></a><span id="l11.136"> </span>
<a href="#l11.137"></a><span id="l11.137"> int</span>
<a href="#l11.138"></a><span id="l11.138"> mime_encode_base64_buffer (MimeEncoderData *data,</span>
<a href="#l11.139"></a><span id="l11.139">                const char *buffer, PRInt32 size)</span>
<a href="#l11.140"></a><span id="l11.140"> {</span>
<a href="#l11.141"></a><span id="l11.141">   int status = 0;</span>
<a href="#l11.142"></a><span id="l11.142">   const unsigned char *in = (unsigned char *) buffer;</span>
<a href="#l11.143"></a><span id="l11.143">   const unsigned char *end = in + size;</span>
<a href="#l11.144"></a><span id="l11.144" class="difflineat">@@ -1238,21 +1114,17 @@ HEX:</span>
<a href="#l11.145"></a><span id="l11.145"> </span>
<a href="#l11.146"></a><span id="l11.146"> </span>
<a href="#l11.147"></a><span id="l11.147"> </span>
<a href="#l11.148"></a><span id="l11.148"> int</span>
<a href="#l11.149"></a><span id="l11.149"> MimeEncoderDestroy (MimeEncoderData *data, PRBool abort_p)</span>
<a href="#l11.150"></a><span id="l11.150"> {</span>
<a href="#l11.151"></a><span id="l11.151">   int status = 0;</span>
<a href="#l11.152"></a><span id="l11.152"> </span>
<a href="#l11.153"></a><span id="l11.153" class="difflineminus">-  /* If we're uuencoding, we have our own finishing routine. */</span>
<a href="#l11.154"></a><span id="l11.154" class="difflineminus">-  if (data-&gt;encoding == mime_uuencode)</span>
<a href="#l11.155"></a><span id="l11.155" class="difflineminus">-   mime_uuencode_finish(data);</span>
<a href="#l11.156"></a><span id="l11.156" class="difflineminus">-</span>
<a href="#l11.157"></a><span id="l11.157" class="difflineminus">-  /* Since Base64 (and uuencode) output needs to do some buffering to get</span>
<a href="#l11.158"></a><span id="l11.158" class="difflineplus">+  /* Since Base64 output needs to do some buffering to get</span>
<a href="#l11.159"></a><span id="l11.159">    a multiple of three bytes on each block, there may be a few bytes</span>
<a href="#l11.160"></a><span id="l11.160">    left in the buffer after the last block has been written.  We need to</span>
<a href="#l11.161"></a><span id="l11.161">    flush those out now.</span>
<a href="#l11.162"></a><span id="l11.162">    */</span>
<a href="#l11.163"></a><span id="l11.163"> </span>
<a href="#l11.164"></a><span id="l11.164">   NS_ASSERTION (data-&gt;encoding == mime_Base64 ||</span>
<a href="#l11.165"></a><span id="l11.165">        data-&gt;in_buffer_count == 0, &quot;1.1 &lt;rhp@netscape.com&gt; 19 Mar 1999 12:00&quot;);</span>
<a href="#l11.166"></a><span id="l11.166"> </span>
<a href="#l11.167"></a><span id="l11.167" class="difflineat">@@ -1348,15 +1220,13 @@ MimeEncoderWrite (MimeEncoderData *data,</span>
<a href="#l11.168"></a><span id="l11.168">   NS_ASSERTION(data, &quot;1.1 &lt;rhp@netscape.com&gt; 19 Mar 1999 12:00&quot;);</span>
<a href="#l11.169"></a><span id="l11.169">   if (!data) return -1;</span>
<a href="#l11.170"></a><span id="l11.170">   switch(data-&gt;encoding)</span>
<a href="#l11.171"></a><span id="l11.171">   {</span>
<a href="#l11.172"></a><span id="l11.172">   case mime_Base64:</span>
<a href="#l11.173"></a><span id="l11.173">     return mime_encode_base64_buffer (data, buffer, size);</span>
<a href="#l11.174"></a><span id="l11.174">   case mime_QuotedPrintable:</span>
<a href="#l11.175"></a><span id="l11.175">     return mime_encode_qp_buffer (data, buffer, size);</span>
<a href="#l11.176"></a><span id="l11.176" class="difflineminus">-  case mime_uuencode:</span>
<a href="#l11.177"></a><span id="l11.177" class="difflineminus">-    return mime_uuencode_buffer(data, buffer, size);</span>
<a href="#l11.178"></a><span id="l11.178">   default:</span>
<a href="#l11.179"></a><span id="l11.179">     NS_ASSERTION(0, &quot;1.1 &lt;rhp@netscape.com&gt; 19 Mar 1999 12:00&quot;);</span>
<a href="#l11.180"></a><span id="l11.180">     return -1;</span>
<a href="#l11.181"></a><span id="l11.181">   }</span>
<a href="#l11.182"></a><span id="l11.182"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mailnews/mime/src/nsMimeConverter.cpp</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mailnews/mime/src/nsMimeConverter.cpp</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -167,33 +167,16 @@ MimeEncoderData   *ptr;</span>
<a href="#l12.4"></a><span id="l12.4">     *returnEncoderData = ptr;</span>
<a href="#l12.5"></a><span id="l12.5">     return NS_OK;</span>
<a href="#l12.6"></a><span id="l12.6">   }</span>
<a href="#l12.7"></a><span id="l12.7">   else</span>
<a href="#l12.8"></a><span id="l12.8">     return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l12.9"></a><span id="l12.9"> }</span>
<a href="#l12.10"></a><span id="l12.10"> </span>
<a href="#l12.11"></a><span id="l12.11"> nsresult</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-nsMimeConverter::UUEncoderInit (const char *filename, nsresult (*output_fn) </span>
<a href="#l12.13"></a><span id="l12.13" class="difflineminus">-                     (const char *buf, PRInt32 size, void *closure), void *closure, </span>
<a href="#l12.14"></a><span id="l12.14" class="difflineminus">-                     MimeEncoderData ** returnEncoderData)</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineminus">-{</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineminus">-MimeEncoderData   *ptr;</span>
<a href="#l12.17"></a><span id="l12.17" class="difflineminus">-</span>
<a href="#l12.18"></a><span id="l12.18" class="difflineminus">-  ptr = MimeUUEncoderInit(filename, output_fn, closure);</span>
<a href="#l12.19"></a><span id="l12.19" class="difflineminus">-  if (ptr)</span>
<a href="#l12.20"></a><span id="l12.20" class="difflineminus">-  {</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineminus">-    *returnEncoderData = ptr;</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineminus">-    return NS_OK;</span>
<a href="#l12.23"></a><span id="l12.23" class="difflineminus">-  }</span>
<a href="#l12.24"></a><span id="l12.24" class="difflineminus">-  else</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineminus">-    return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l12.26"></a><span id="l12.26" class="difflineminus">-}</span>
<a href="#l12.27"></a><span id="l12.27" class="difflineminus">-</span>
<a href="#l12.28"></a><span id="l12.28" class="difflineminus">-nsresult</span>
<a href="#l12.29"></a><span id="l12.29"> nsMimeConverter::EncoderDestroy(MimeEncoderData *data, PRBool abort_p) </span>
<a href="#l12.30"></a><span id="l12.30"> {</span>
<a href="#l12.31"></a><span id="l12.31">   MimeEncoderDestroy(data, abort_p);</span>
<a href="#l12.32"></a><span id="l12.32">   return NS_OK;</span>
<a href="#l12.33"></a><span id="l12.33"> }</span>
<a href="#l12.34"></a><span id="l12.34"> </span>
<a href="#l12.35"></a><span id="l12.35"> nsresult</span>
<a href="#l12.36"></a><span id="l12.36"> nsMimeConverter::EncoderWrite (MimeEncoderData *data, const char *buffer, PRInt32 size, PRInt32 *written) </span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

