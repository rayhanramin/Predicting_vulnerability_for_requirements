<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 16815:507a692b707c73939072ba86dd442e437f454d4c</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 507a692b707c73939072ba86dd442e437f454d4c" />
<meta property="og:url" content="/comm-central/rev/507a692b707c73939072ba86dd442e437f454d4c" />
<meta property="og:description" content="Bug 1054357 Part 1 Update c-c to address non-backward compatible changes to JS let semantics after bug 1001090 landed in m-c. r=Standard8 CLOSED TREE" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 507a692b707c73939072ba86dd442e437f454d4c 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/507a692b707c73939072ba86dd442e437f454d4c">shortlog</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/507a692b707c73939072ba86dd442e437f454d4c">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c">files</a> |
changeset |
<a href="/comm-central/raw-rev/507a692b707c73939072ba86dd442e437f454d4c">raw</a>  | <a href="/comm-central/archive/507a692b707c73939072ba86dd442e437f454d4c.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1054357">Bug 1054357</a> Part 1 Update c-c to address non-backward compatible changes to JS let semantics after <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1001090">bug 1001090</a> landed in m-c. r=Standard8 CLOSED TREE
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#83;&#101;&#98;&#97;&#115;&#116;&#105;&#97;&#110;&#32;&#72;&#101;&#110;&#103;&#115;&#116;&#32;&#60;&#97;&#114;&#99;&#104;&#97;&#101;&#111;&#112;&#116;&#101;&#114;&#121;&#120;&#64;&#99;&#111;&#111;&#108;&#101;&#45;&#102;&#105;&#108;&#101;&#115;&#46;&#100;&#101;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 16 Sep 2014 23:11:44 +0200</td></tr>

<tr>
 <td>changeset 16815</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/507a692b707c73939072ba86dd442e437f454d4c">507a692b707c73939072ba86dd442e437f454d4c</a></td>
</tr>



<tr>
<td>parent 16814</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/76a498138f3698ec53c3d55819cc19027162d036">76a498138f3698ec53c3d55819cc19027162d036</a>
</td>
</tr>

<tr>
<td>child 16816</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/e5a9b312e9da136804876b8f65a9a95b6171b82c">e5a9b312e9da136804876b8f65a9a95b6171b82c</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=507a692b707c73939072ba86dd442e437f454d4c">10463</a></td></tr>
<tr><td>push user</td><td>mbanner@mozilla.com</td></tr>
<tr><td>push date</td><td class="date age">Wed, 17 Sep 2014 07:33:22 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@e5a9b312e9da [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=e5a9b312e9da136804876b8f65a9a95b6171b82c">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=e5a9b312e9da136804876b8f65a9a95b6171b82c&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=e5a9b312e9da136804876b8f65a9a95b6171b82c&newProject=comm-central&newRevision=507a692b707c73939072ba86dd442e437f454d4c&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=e5a9b312e9da136804876b8f65a9a95b6171b82c&newProject=comm-central&newRevision=507a692b707c73939072ba86dd442e437f454d4c&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=e5a9b312e9da136804876b8f65a9a95b6171b82c&newProject=comm-central&newRevision=507a692b707c73939072ba86dd442e437f454d4c&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Standard8%29&revcount=50">Standard8</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1054357">1054357</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1001090">1001090</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1054357">Bug 1054357</a> Part 1 Update c-c to address non-backward compatible changes to JS let semantics after <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1001090">bug 1001090</a> landed in m-c. r=Standard8 CLOSED TREE</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/base/content/folderPane.js">mail/base/content/folderPane.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mail/base/content/folderPane.js">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mail/base/content/folderPane.js">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/base/content/folderPane.js">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mail/base/content/folderPane.js">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mail/base/content/folderPane.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/base/content/plugins.js">mail/base/content/plugins.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mail/base/content/plugins.js">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mail/base/content/plugins.js">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/base/content/plugins.js">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mail/base/content/plugins.js">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mail/base/content/plugins.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/base/content/tabmail.xml">mail/base/content/tabmail.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mail/base/content/tabmail.xml">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mail/base/content/tabmail.xml">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/base/content/tabmail.xml">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mail/base/content/tabmail.xml">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mail/base/content/tabmail.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/components/preferences/applications.js">mail/components/preferences/applications.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mail/components/preferences/applications.js">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mail/components/preferences/applications.js">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/components/preferences/applications.js">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mail/components/preferences/applications.js">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mail/components/preferences/applications.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/account/test-account-settings-infrastructure.js">mail/test/mozmill/account/test-account-settings-infrastructure.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/account/test-account-settings-infrastructure.js">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/account/test-account-settings-infrastructure.js">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/account/test-account-settings-infrastructure.js">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/account/test-account-settings-infrastructure.js">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/account/test-account-settings-infrastructure.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/attachment/test-attachment.js">mail/test/mozmill/attachment/test-attachment.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/attachment/test-attachment.js">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/attachment/test-attachment.js">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/attachment/test-attachment.js">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/attachment/test-attachment.js">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/attachment/test-attachment.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/cloudfile/test-cloudfile-attachment-urls.js">mail/test/mozmill/cloudfile/test-cloudfile-attachment-urls.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/cloudfile/test-cloudfile-attachment-urls.js">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/cloudfile/test-cloudfile-attachment-urls.js">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/cloudfile/test-cloudfile-attachment-urls.js">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/cloudfile/test-cloudfile-attachment-urls.js">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/cloudfile/test-cloudfile-attachment-urls.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/composition/test-attachment-reminder.js">mail/test/mozmill/composition/test-attachment-reminder.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/composition/test-attachment-reminder.js">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/composition/test-attachment-reminder.js">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/composition/test-attachment-reminder.js">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/composition/test-attachment-reminder.js">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/composition/test-attachment-reminder.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/composition/test-charset-edit.js">mail/test/mozmill/composition/test-charset-edit.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/composition/test-charset-edit.js">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/composition/test-charset-edit.js">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/composition/test-charset-edit.js">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/composition/test-charset-edit.js">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/composition/test-charset-edit.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/composition/test-image-insertion-dialog.js">mail/test/mozmill/composition/test-image-insertion-dialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/composition/test-image-insertion-dialog.js">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/composition/test-image-insertion-dialog.js">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/composition/test-image-insertion-dialog.js">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/composition/test-image-insertion-dialog.js">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mail/test/mozmill/composition/test-image-insertion-dialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/content/folderWidgets.xml">mailnews/base/content/folderWidgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/content/folderWidgets.xml">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/content/folderWidgets.xml">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/content/folderWidgets.xml">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/content/folderWidgets.xml">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/content/folderWidgets.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/prefs/content/aw-outgoing.js">mailnews/base/prefs/content/aw-outgoing.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/prefs/content/aw-outgoing.js">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/prefs/content/aw-outgoing.js">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/prefs/content/aw-outgoing.js">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/prefs/content/aw-outgoing.js">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/prefs/content/aw-outgoing.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/test/unit/test_autoconfigUtils.js">mailnews/base/test/unit/test_autoconfigUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/test/unit/test_autoconfigUtils.js">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/test/unit/test_autoconfigUtils.js">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/test/unit/test_autoconfigUtils.js">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/test/unit/test_autoconfigUtils.js">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/test/unit/test_autoconfigUtils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/test/unit/test_nsMsgDBView.js">mailnews/base/test/unit/test_nsMsgDBView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/test/unit/test_nsMsgDBView.js">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/test/unit/test_nsMsgDBView.js">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/test/unit/test_nsMsgDBView.js">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/test/unit/test_nsMsgDBView.js">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/test/unit/test_nsMsgDBView.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/test/unit/test_postPluginFilters.js">mailnews/base/test/unit/test_postPluginFilters.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/test/unit/test_postPluginFilters.js">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/test/unit/test_postPluginFilters.js">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/test/unit/test_postPluginFilters.js">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/test/unit/test_postPluginFilters.js">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mailnews/base/test/unit/test_postPluginFilters.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/db/gloda/test/unit/test_index_addressbook.js">mailnews/db/gloda/test/unit/test_index_addressbook.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mailnews/db/gloda/test/unit/test_index_addressbook.js">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mailnews/db/gloda/test/unit/test_index_addressbook.js">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/db/gloda/test/unit/test_index_addressbook.js">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mailnews/db/gloda/test/unit/test_index_addressbook.js">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mailnews/db/gloda/test/unit/test_index_addressbook.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/db/msgdb/test/unit/test_filter_enumerator.js">mailnews/db/msgdb/test/unit/test_filter_enumerator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mailnews/db/msgdb/test/unit/test_filter_enumerator.js">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mailnews/db/msgdb/test/unit/test_filter_enumerator.js">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/db/msgdb/test/unit/test_filter_enumerator.js">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mailnews/db/msgdb/test/unit/test_filter_enumerator.js">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mailnews/db/msgdb/test/unit/test_filter_enumerator.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/local/test/unit/test_fileName.js">mailnews/local/test/unit/test_fileName.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mailnews/local/test/unit/test_fileName.js">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mailnews/local/test/unit/test_fileName.js">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/local/test/unit/test_fileName.js">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mailnews/local/test/unit/test_fileName.js">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mailnews/local/test/unit/test_fileName.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/local/test/unit/test_nsIMsgLocalMailFolder.js">mailnews/local/test/unit/test_nsIMsgLocalMailFolder.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mailnews/local/test/unit/test_nsIMsgLocalMailFolder.js">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mailnews/local/test/unit/test_nsIMsgLocalMailFolder.js">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/local/test/unit/test_nsIMsgLocalMailFolder.js">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mailnews/local/test/unit/test_nsIMsgLocalMailFolder.js">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mailnews/local/test/unit/test_nsIMsgLocalMailFolder.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/local/test/unit/test_pop3MoveFilter2.js">mailnews/local/test/unit/test_pop3MoveFilter2.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/507a692b707c73939072ba86dd442e437f454d4c/mailnews/local/test/unit/test_pop3MoveFilter2.js">file</a> |
<a href="/comm-central/annotate/507a692b707c73939072ba86dd442e437f454d4c/mailnews/local/test/unit/test_pop3MoveFilter2.js">annotate</a> |
<a href="/comm-central/diff/507a692b707c73939072ba86dd442e437f454d4c/mailnews/local/test/unit/test_pop3MoveFilter2.js">diff</a> |
<a href="/comm-central/comparison/507a692b707c73939072ba86dd442e437f454d4c/mailnews/local/test/unit/test_pop3MoveFilter2.js">comparison</a> |
<a href="/comm-central/log/507a692b707c73939072ba86dd442e437f454d4c/mailnews/local/test/unit/test_pop3MoveFilter2.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/base/content/folderPane.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/base/content/folderPane.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -2475,17 +2475,17 @@ let gFolderTreeController = {</span>
<a href="#l1.4"></a><span id="l1.4">       return;</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6">     // Delete any subfolders this folder might have</span>
<a href="#l1.7"></a><span id="l1.7">     let iter = folder.subFolders;</span>
<a href="#l1.8"></a><span id="l1.8">     while (iter.hasMoreElements())</span>
<a href="#l1.9"></a><span id="l1.9">       folder.propagateDelete(iter.getNext(), true, msgWindow);</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11">     // Now delete the messages</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-    let iter = fixIterator(folder.messages);</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    iter = fixIterator(folder.messages);</span>
<a href="#l1.14"></a><span id="l1.14">     let messages = [m for each (m in iter)];</span>
<a href="#l1.15"></a><span id="l1.15">     let children = toXPCOMArray(messages, Ci.nsIMutableArray);</span>
<a href="#l1.16"></a><span id="l1.16">     folder.deleteMessages(children, msgWindow, true, false, null, false);</span>
<a href="#l1.17"></a><span id="l1.17">   },</span>
<a href="#l1.18"></a><span id="l1.18"> </span>
<a href="#l1.19"></a><span id="l1.19">   /**</span>
<a href="#l1.20"></a><span id="l1.20">    * Compacts either particular folder/s, or selected folders.</span>
<a href="#l1.21"></a><span id="l1.21">    *</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/base/content/plugins.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/base/content/plugins.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -735,17 +735,17 @@ var gPluginHandler = {</span>
<a href="#l2.4"></a><span id="l2.4">         accessKey: submitKey,</span>
<a href="#l2.5"></a><span id="l2.5">         popup: null,</span>
<a href="#l2.6"></a><span id="l2.6">           callback: function() { gPluginHandler.submitReport(pluginDumpID, browserDumpID); },</span>
<a href="#l2.7"></a><span id="l2.7">       };</span>
<a href="#l2.8"></a><span id="l2.8">       if (pluginDumpID)</span>
<a href="#l2.9"></a><span id="l2.9">         buttons.push(submitButton);</span>
<a href="#l2.10"></a><span id="l2.10"> #endif</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-      let notification = notificationBox.appendNotification(messageString, &quot;plugin-crashed&quot;,</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+      notification = notificationBox.appendNotification(messageString, &quot;plugin-crashed&quot;,</span>
<a href="#l2.14"></a><span id="l2.14">                                                             iconURL, priority, buttons);</span>
<a href="#l2.15"></a><span id="l2.15"> </span>
<a href="#l2.16"></a><span id="l2.16">       // Add the &quot;learn more&quot; link.</span>
<a href="#l2.17"></a><span id="l2.17">       let XULNS = &quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;;</span>
<a href="#l2.18"></a><span id="l2.18">       let link = notification.ownerDocument.createElementNS(XULNS, &quot;label&quot;);</span>
<a href="#l2.19"></a><span id="l2.19">       let crashHelpUrl = Services.urlFormatter</span>
<a href="#l2.20"></a><span id="l2.20">                                  .formatURLPref(&quot;plugins.crash.supportUrl&quot;);</span>
<a href="#l2.21"></a><span id="l2.21">       link.className = &quot;text-link&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/base/content/tabmail.xml</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/base/content/tabmail.xml</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -803,17 +803,17 @@</span>
<a href="#l3.4"></a><span id="l3.4"> </span>
<a href="#l3.5"></a><span id="l3.5">             // We use Json and session restore transfer the tab to the new window.</span>
<a href="#l3.6"></a><span id="l3.6">             tab = this.persistTab(tab);</span>
<a href="#l3.7"></a><span id="l3.7">             if (!tab)</span>
<a href="#l3.8"></a><span id="l3.8">               return null;</span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10">             // Converting to JSON and back again creates clean javascript</span>
<a href="#l3.11"></a><span id="l3.11">             // object with absolutely no references to our current window.</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-            let tab = JSON.parse(JSON.stringify(tab));</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+            tab = JSON.parse(JSON.stringify(tab));</span>
<a href="#l3.14"></a><span id="l3.14"> </span>
<a href="#l3.15"></a><span id="l3.15">             this.closeTab(aTab,true);</span>
<a href="#l3.16"></a><span id="l3.16"> </span>
<a href="#l3.17"></a><span id="l3.17">             return window.openDialog(&quot;chrome://messenger/content/&quot;, &quot;_blank&quot;,</span>
<a href="#l3.18"></a><span id="l3.18">                &quot;chrome,dialog=no,all&quot;, null,</span>
<a href="#l3.19"></a><span id="l3.19">                { action : &quot;restore&quot;, tabs: [tab] } ).focus();</span>
<a href="#l3.20"></a><span id="l3.20">           ]]&gt;</span>
<a href="#l3.21"></a><span id="l3.21">         &lt;/body&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/components/preferences/applications.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/components/preferences/applications.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -1434,17 +1434,17 @@ var gApplicationsPane = {</span>
<a href="#l4.4"></a><span id="l4.4">       let menuItem = document.createElement(&quot;menuseparator&quot;);</span>
<a href="#l4.5"></a><span id="l4.5">       menuPopup.appendChild(menuItem);</span>
<a href="#l4.6"></a><span id="l4.6">       menuItem = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l4.7"></a><span id="l4.7">       menuItem.setAttribute(&quot;oncommand&quot;, &quot;gApplicationsPane.manageApp(event)&quot;);</span>
<a href="#l4.8"></a><span id="l4.8">       menuItem.setAttribute(&quot;label&quot;, this._prefsBundle.getString(&quot;manageApp&quot;));</span>
<a href="#l4.9"></a><span id="l4.9">       menuPopup.appendChild(menuItem);</span>
<a href="#l4.10"></a><span id="l4.10">     }</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-    let menuItem = document.createElement(&quot;menuseparator&quot;);</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+    menuItem = document.createElement(&quot;menuseparator&quot;);</span>
<a href="#l4.14"></a><span id="l4.14">     menuPopup.appendChild(menuItem);</span>
<a href="#l4.15"></a><span id="l4.15">     menuItem = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l4.16"></a><span id="l4.16">     menuItem.setAttribute(&quot;oncommand&quot;, &quot;gApplicationsPane.confirmDelete(event)&quot;);</span>
<a href="#l4.17"></a><span id="l4.17">     menuItem.setAttribute(&quot;label&quot;, this._prefsBundle.getString(&quot;delete&quot;));</span>
<a href="#l4.18"></a><span id="l4.18">     menuPopup.appendChild(menuItem);</span>
<a href="#l4.19"></a><span id="l4.19"> </span>
<a href="#l4.20"></a><span id="l4.20">     // Select the item corresponding to the preferred action.  If the always</span>
<a href="#l4.21"></a><span id="l4.21">     // ask flag is set, it overrides the preferred action.  Otherwise we pick</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/test/mozmill/account/test-account-settings-infrastructure.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/test/mozmill/account/test-account-settings-infrastructure.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -102,17 +102,17 @@ function subtest_check_account_dot_IDs(a</span>
<a href="#l5.4"></a><span id="l5.4">   accountRow = get_account_tree_row(gPopAccount.key, &quot;am-server.xul&quot;, amc);</span>
<a href="#l5.5"></a><span id="l5.5">   click_account_tree_row(amc, accountRow);</span>
<a href="#l5.6"></a><span id="l5.6"> </span>
<a href="#l5.7"></a><span id="l5.7">   // Re-assign iframe.contentDocument because it was lost when changing panes</span>
<a href="#l5.8"></a><span id="l5.8">   // (uses loadURI to load a new document).</span>
<a href="#l5.9"></a><span id="l5.9">   iframe = amc.e(&quot;contentFrame&quot;).contentDocument;</span>
<a href="#l5.10"></a><span id="l5.10"> </span>
<a href="#l5.11"></a><span id="l5.11">   // Check by element properties.</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-  let loginCheck = iframe.getElementById(&quot;server.loginAtStartUp&quot;);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+  loginCheck = iframe.getElementById(&quot;server.loginAtStartUp&quot;);</span>
<a href="#l5.14"></a><span id="l5.14">   assert_true(loginCheck.checked);</span>
<a href="#l5.15"></a><span id="l5.15"> </span>
<a href="#l5.16"></a><span id="l5.16">   // Check for correct value in the accountValues array, that will be saved into prefs.</span>
<a href="#l5.17"></a><span id="l5.17">   let rawCheckValue = amc.window.getAccountValue(gPopAccount,</span>
<a href="#l5.18"></a><span id="l5.18">                                                  amc.window.getValueArrayFor(gPopAccount),</span>
<a href="#l5.19"></a><span id="l5.19">                                                  &quot;server&quot;, &quot;loginAtStartUp&quot;,</span>
<a href="#l5.20"></a><span id="l5.20">                                                  null, false);</span>
<a href="#l5.21"></a><span id="l5.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/test/mozmill/attachment/test-attachment.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/test/mozmill/attachment/test-attachment.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -33,18 +33,16 @@ const binaryAttachment = textAttachment;</span>
<a href="#l6.4"></a><span id="l6.4"> </span>
<a href="#l6.5"></a><span id="l6.5"> var setupModule = function (module) {</span>
<a href="#l6.6"></a><span id="l6.6">   let fdh = collector.getModule('folder-display-helpers');</span>
<a href="#l6.7"></a><span id="l6.7">   fdh.installInto(module);</span>
<a href="#l6.8"></a><span id="l6.8">   let wh = collector.getModule('window-helpers');</span>
<a href="#l6.9"></a><span id="l6.9">   wh.installInto(module);</span>
<a href="#l6.10"></a><span id="l6.10">   let composeHelper = collector.getModule('compose-helpers');</span>
<a href="#l6.11"></a><span id="l6.11">   composeHelper.installInto(module);</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-  let wh = collector.getModule('window-helpers');</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-  wh.installInto(module);</span>
<a href="#l6.14"></a><span id="l6.14"> </span>
<a href="#l6.15"></a><span id="l6.15">   folder = create_folder(&quot;AttachmentA&quot;);</span>
<a href="#l6.16"></a><span id="l6.16"> </span>
<a href="#l6.17"></a><span id="l6.17">   var attachedMessage = msgGen.makeMessage({</span>
<a href="#l6.18"></a><span id="l6.18">     body: { body: &quot;I'm an attached email!&quot; },</span>
<a href="#l6.19"></a><span id="l6.19">     attachments: [{ body: textAttachment,</span>
<a href="#l6.20"></a><span id="l6.20">                     filename: 'inner attachment.txt',</span>
<a href="#l6.21"></a><span id="l6.21">                     format: '' }],</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/test/mozmill/cloudfile/test-cloudfile-attachment-urls.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/test/mozmill/cloudfile/test-cloudfile-attachment-urls.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -295,17 +295,17 @@ function test_inserts_linebreak_on_empty</span>
<a href="#l7.4"></a><span id="l7.4">   assert_true(pre.classList.contains(&quot;moz-signature&quot;),</span>
<a href="#l7.5"></a><span id="l7.5">               &quot;The pre should have the moz-signature class&quot;);</span>
<a href="#l7.6"></a><span id="l7.6"> </span>
<a href="#l7.7"></a><span id="l7.7">   close_window(cw);</span>
<a href="#l7.8"></a><span id="l7.8"> </span>
<a href="#l7.9"></a><span id="l7.9">   Services.prefs.setBoolPref(kHtmlPrefKey, false);</span>
<a href="#l7.10"></a><span id="l7.10"> </span>
<a href="#l7.11"></a><span id="l7.11">   // Now let's try with plaintext mail.</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-  let cw = open_compose_new_mail();</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+  cw = open_compose_new_mail();</span>
<a href="#l7.14"></a><span id="l7.14">   cw.window.attachToCloud(provider);</span>
<a href="#l7.15"></a><span id="l7.15">   [root, list, urls] = wait_for_attachment_urls(cw, kFiles.length);</span>
<a href="#l7.16"></a><span id="l7.16"> </span>
<a href="#l7.17"></a><span id="l7.17">   br = assert_previous_nodes(&quot;br&quot;, root, 1);</span>
<a href="#l7.18"></a><span id="l7.18"> </span>
<a href="#l7.19"></a><span id="l7.19">   mailBody = get_compose_body(cw);</span>
<a href="#l7.20"></a><span id="l7.20">   assert_equals(mailBody.firstChild, br,</span>
<a href="#l7.21"></a><span id="l7.21">                 &quot;The linebreak should be the first child of the compose body&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/test/mozmill/composition/test-attachment-reminder.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/test/mozmill/composition/test-attachment-reminder.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -275,17 +275,17 @@ function test_manual_attachment_reminder</span>
<a href="#l8.4"></a><span id="l8.4">                            .getFolderWithFlags(Ci.nsMsgFolderFlags.Drafts);</span>
<a href="#l8.5"></a><span id="l8.5">   be_in_folder(drafts);</span>
<a href="#l8.6"></a><span id="l8.6"> </span>
<a href="#l8.7"></a><span id="l8.7">   // Edit it again...</span>
<a href="#l8.8"></a><span id="l8.8">   select_click_row(0);</span>
<a href="#l8.9"></a><span id="l8.9">   plan_for_new_window(&quot;msgcompose&quot;);</span>
<a href="#l8.10"></a><span id="l8.10">   // ... by clicking Edit in the draft message notification bar.</span>
<a href="#l8.11"></a><span id="l8.11">   mc.click(mc.eid(&quot;msgNotificationBar&quot;, {tagName: &quot;button&quot;, label: &quot;Edit&quot;}));</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-  let cwc = wait_for_compose_window();</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+  cwc = wait_for_compose_window();</span>
<a href="#l8.14"></a><span id="l8.14"> </span>
<a href="#l8.15"></a><span id="l8.15">   // Check the reminder enablement was preserved in the message.</span>
<a href="#l8.16"></a><span id="l8.16">   assert_manual_reminder_state(cwc, true);</span>
<a href="#l8.17"></a><span id="l8.17">   // There should be no attachment notification.</span>
<a href="#l8.18"></a><span id="l8.18">   assert_automatic_reminder_state(cwc, false);</span>
<a href="#l8.19"></a><span id="l8.19"> </span>
<a href="#l8.20"></a><span id="l8.20">   // Now try to send, make sure we get the alert.</span>
<a href="#l8.21"></a><span id="l8.21">   plan_for_modal_dialog(&quot;commonDialog&quot;, click_oh_i_did);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/test/mozmill/composition/test-charset-edit.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/test/mozmill/composition/test-charset-edit.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -111,17 +111,17 @@ function test_wrong_reply_charset() {</span>
<a href="#l9.4"></a><span id="l9.4">   let draftMsg = select_click_row(1);</span>
<a href="#l9.5"></a><span id="l9.5">   assert_equals(getMsgHeaders(draftMsg).get(&quot;&quot;).charset, &quot;windows-1252&quot;);</span>
<a href="#l9.6"></a><span id="l9.6">   press_delete(mc); // Delete message</span>
<a href="#l9.7"></a><span id="l9.7"> </span>
<a href="#l9.8"></a><span id="l9.8">   // Edit the original message. Charset should be windows-1252 now.</span>
<a href="#l9.9"></a><span id="l9.9">   msg = select_click_row(0);</span>
<a href="#l9.10"></a><span id="l9.10">   plan_for_new_window(&quot;msgcompose&quot;);</span>
<a href="#l9.11"></a><span id="l9.11">   mc.click(mc.eid(&quot;menu_editMsgAsNew&quot;));</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-  let rwc = wait_for_compose_window();</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+  rwc = wait_for_compose_window();</span>
<a href="#l9.14"></a><span id="l9.14">   rwc.keypress(null, &quot;s&quot;, {shiftKey: false, accelKey: true});</span>
<a href="#l9.15"></a><span id="l9.15">   close_compose_window(rwc);</span>
<a href="#l9.16"></a><span id="l9.16">   msg = select_click_row(0);</span>
<a href="#l9.17"></a><span id="l9.17">   assert_equals(getMsgHeaders(msg).get(&quot;&quot;).charset, &quot;windows-1252&quot;);</span>
<a href="#l9.18"></a><span id="l9.18">   press_delete(mc); // Delete message</span>
<a href="#l9.19"></a><span id="l9.19"> }</span>
<a href="#l9.20"></a><span id="l9.20"> </span>
<a href="#l9.21"></a><span id="l9.21"> /**</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineat">@@ -152,17 +152,17 @@ function test_no_mojibake() {</span>
<a href="#l9.23"></a><span id="l9.23">   if (!text.contains(nonASCII))</span>
<a href="#l9.24"></a><span id="l9.24">     throw new Error(&quot;Expected to find &quot; + nonASCII + &quot; in &quot; + text);</span>
<a href="#l9.25"></a><span id="l9.25">   press_delete(mc); // Delete message</span>
<a href="#l9.26"></a><span id="l9.26"> </span>
<a href="#l9.27"></a><span id="l9.27">   // Edit the original message. Charset should be UTF-8 now.</span>
<a href="#l9.28"></a><span id="l9.28">   msg = select_click_row(0);</span>
<a href="#l9.29"></a><span id="l9.29">   plan_for_new_window(&quot;msgcompose&quot;);</span>
<a href="#l9.30"></a><span id="l9.30">   mc.click(mc.eid(&quot;menu_editMsgAsNew&quot;));</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-  let rwc = wait_for_compose_window();</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+  rwc = wait_for_compose_window();</span>
<a href="#l9.33"></a><span id="l9.33">   rwc.keypress(null, &quot;s&quot;, {shiftKey: false, accelKey: true});</span>
<a href="#l9.34"></a><span id="l9.34">   close_compose_window(rwc);</span>
<a href="#l9.35"></a><span id="l9.35">   msg = select_click_row(0);</span>
<a href="#l9.36"></a><span id="l9.36">   assert_equals(getMsgHeaders(msg).get(&quot;&quot;).charset, &quot;UTF-8&quot;);</span>
<a href="#l9.37"></a><span id="l9.37">   assert_equals(getMsgHeaders(msg, true).get(&quot;&quot;).trim(), nonASCII);</span>
<a href="#l9.38"></a><span id="l9.38">   press_delete(mc); // Delete message</span>
<a href="#l9.39"></a><span id="l9.39"> }</span>
<a href="#l9.40"></a><span id="l9.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/test/mozmill/composition/test-image-insertion-dialog.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/test/mozmill/composition/test-image-insertion-dialog.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -104,17 +104,17 @@ function test_image_insertion_dialog_per</span>
<a href="#l10.4"></a><span id="l10.4">     // Accept the dialog</span>
<a href="#l10.5"></a><span id="l10.5">     mwc.window.document.documentElement.acceptDialog();</span>
<a href="#l10.6"></a><span id="l10.6">   });</span>
<a href="#l10.7"></a><span id="l10.7">   cwc.doubleClick(new elib.Elem(img));</span>
<a href="#l10.8"></a><span id="l10.8">   wh.wait_for_modal_dialog();</span>
<a href="#l10.9"></a><span id="l10.9">   wait_for_window_close();</span>
<a href="#l10.10"></a><span id="l10.10"> </span>
<a href="#l10.11"></a><span id="l10.11">   // Make sure next time we edit it, we still have &quot;use alt text&quot; selected.</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-  let img = cwc.e(&quot;content-frame&quot;).contentDocument.querySelector(&quot;img&quot;);</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+  img = cwc.e(&quot;content-frame&quot;).contentDocument.querySelector(&quot;img&quot;);</span>
<a href="#l10.14"></a><span id="l10.14">   wh.plan_for_modal_dialog(&quot;imageDlg&quot;, function insert_image(mwc) {</span>
<a href="#l10.15"></a><span id="l10.15">     assert_true(mwc.window.document.getElementById(&quot;altTextRadio&quot;).selected,</span>
<a href="#l10.16"></a><span id="l10.16">       &quot;We edited the image to make it have alt text, we should keep it selected&quot;);</span>
<a href="#l10.17"></a><span id="l10.17">     // Accept the dialog</span>
<a href="#l10.18"></a><span id="l10.18">     mwc.window.document.documentElement.cancelDialog();</span>
<a href="#l10.19"></a><span id="l10.19">   });</span>
<a href="#l10.20"></a><span id="l10.20">   cwc.doubleClick(new elib.Elem(img));</span>
<a href="#l10.21"></a><span id="l10.21">   wh.wait_for_modal_dialog();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mailnews/base/content/folderWidgets.xml</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mailnews/base/content/folderWidgets.xml</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -561,17 +561,17 @@</span>
<a href="#l11.4"></a><span id="l11.4">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l11.5"></a><span id="l11.5">           const Ci = Components.interfaces;</span>
<a href="#l11.6"></a><span id="l11.6"> </span>
<a href="#l11.7"></a><span id="l11.7">           // Iterate through all folders in all accounts, and find 15 (_MAXRECENT)</span>
<a href="#l11.8"></a><span id="l11.8">           // of most recently modified ones.</span>
<a href="#l11.9"></a><span id="l11.9">           let allFolders = this.toArray(</span>
<a href="#l11.10"></a><span id="l11.10">             this.fixIterator(this.MailServices.accounts.allFolders, Ci.nsIMsgFolder));</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-          let allFolders = allFolders.filter(function (f) f.canFileMessages);</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+          allFolders = allFolders.filter(function (f) f.canFileMessages);</span>
<a href="#l11.14"></a><span id="l11.14"> </span>
<a href="#l11.15"></a><span id="l11.15">           let recentFolders = this.getMostRecentFolders(allFolders,</span>
<a href="#l11.16"></a><span id="l11.16">                                                         this._MAXRECENT,</span>
<a href="#l11.17"></a><span id="l11.17">                                                         &quot;MRMTime&quot;);</span>
<a href="#l11.18"></a><span id="l11.18"> </span>
<a href="#l11.19"></a><span id="l11.19">           // Cache the pretty names so that they do not need to be fetched</span>
<a href="#l11.20"></a><span id="l11.20">           // _MAXRECENT^2 times later.</span>
<a href="#l11.21"></a><span id="l11.21">           let recentFolders = recentFolders.map(</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mailnews/base/prefs/content/aw-outgoing.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mailnews/base/prefs/content/aw-outgoing.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -78,17 +78,17 @@ function outgoingPageInit() {</span>
<a href="#l12.4"></a><span id="l12.4"> </span>
<a href="#l12.5"></a><span id="l12.5">     if (boxToHide)</span>
<a href="#l12.6"></a><span id="l12.6">       boxToHide.setAttribute(&quot;hidden&quot;, &quot;true&quot;);</span>
<a href="#l12.7"></a><span id="l12.7"> </span>
<a href="#l12.8"></a><span id="l12.8">     if (boxToShow)</span>
<a href="#l12.9"></a><span id="l12.9">       boxToShow.removeAttribute(&quot;hidden&quot;);</span>
<a href="#l12.10"></a><span id="l12.10"> </span>
<a href="#l12.11"></a><span id="l12.11">     var smtpNameInput = document.getElementById(&quot;smtpusername&quot;);</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-    let smtpServer = MailServices.smtp.defaultServer;</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+    smtpServer = MailServices.smtp.defaultServer;</span>
<a href="#l12.14"></a><span id="l12.14">     if (smtpServer &amp;&amp; smtpServer.hostname &amp;&amp; smtpServer.username) {</span>
<a href="#l12.15"></a><span id="l12.15">       // we have a default SMTP server, so modify and show the static text</span>
<a href="#l12.16"></a><span id="l12.16">       // and store the username for the default server in the textbox.</span>
<a href="#l12.17"></a><span id="l12.17">       modifyStaticText(smtpServer.username, &quot;2&quot;)</span>
<a href="#l12.18"></a><span id="l12.18">       hideShowLoginSettings(2, 1, 3);</span>
<a href="#l12.19"></a><span id="l12.19">       smtpNameInput.value = smtpServer.username;</span>
<a href="#l12.20"></a><span id="l12.20">     }</span>
<a href="#l12.21"></a><span id="l12.21">     else {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mailnews/base/test/unit/test_autoconfigUtils.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_autoconfigUtils.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -237,17 +237,17 @@ function test_getIncomingTryOrder()</span>
<a href="#l13.4"></a><span id="l13.4">                           [[IMAP, TLS, 143],</span>
<a href="#l13.5"></a><span id="l13.5">                            [IMAP, SSL, 993],</span>
<a href="#l13.6"></a><span id="l13.6">                            [POP, TLS, 110],</span>
<a href="#l13.7"></a><span id="l13.7">                            [POP, SSL, 995],</span>
<a href="#l13.8"></a><span id="l13.8">                            [IMAP, NONE, 143],</span>
<a href="#l13.9"></a><span id="l13.9">                            [POP, NONE, 110]]);</span>
<a href="#l13.10"></a><span id="l13.10"> </span>
<a href="#l13.11"></a><span id="l13.11">   port = 31337;</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-  let tryOrder = getIncomingTryOrder(domain, protocol, ssl, port);</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+  tryOrder = getIncomingTryOrder(domain, protocol, ssl, port);</span>
<a href="#l13.14"></a><span id="l13.14">   assert_equal_try_orders(tryOrder,</span>
<a href="#l13.15"></a><span id="l13.15">                           [[IMAP, TLS, port],</span>
<a href="#l13.16"></a><span id="l13.16">                            [IMAP, SSL, port],</span>
<a href="#l13.17"></a><span id="l13.17">                            [POP, TLS, port],</span>
<a href="#l13.18"></a><span id="l13.18">                            [POP, SSL, port],</span>
<a href="#l13.19"></a><span id="l13.19">                            [IMAP, NONE, port],</span>
<a href="#l13.20"></a><span id="l13.20">                            [POP, NONE, port]]);</span>
<a href="#l13.21"></a><span id="l13.21"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mailnews/base/test/unit/test_nsMsgDBView.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_nsMsgDBView.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -523,17 +523,17 @@ function test_selected_messages() {</span>
<a href="#l14.4"></a><span id="l14.4">              &quot; but should be &quot; + firstSelectedMsg.messageKey +&quot;\n&quot;);</span>
<a href="#l14.5"></a><span id="l14.5"> </span>
<a href="#l14.6"></a><span id="l14.6">   // Select all messages</span>
<a href="#l14.7"></a><span id="l14.7">   gTreeView.selection.selectAll();</span>
<a href="#l14.8"></a><span id="l14.8">   if (gDBView.numSelected != gTreeView.rowCount)</span>
<a href="#l14.9"></a><span id="l14.9">     do_throw(&quot;numSelected is &quot; + gDBView.numSelected + &quot; but should be &quot; +</span>
<a href="#l14.10"></a><span id="l14.10">              gTreeView.rowCount + &quot;\n&quot;);</span>
<a href="#l14.11"></a><span id="l14.11"> </span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-  let selectedMessages = gDBView.getSelectedMsgHdrs();</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+  selectedMessages = gDBView.getSelectedMsgHdrs();</span>
<a href="#l14.14"></a><span id="l14.14">   if (selectedMessages.length != gTestFolder.getTotalMessages(false))</span>
<a href="#l14.15"></a><span id="l14.15">     do_throw(&quot;getSelectedMsgHdrs.length is &quot; + selectedMessages.length +</span>
<a href="#l14.16"></a><span id="l14.16">              &quot; but should be &quot; + gTestFolder.getTotalMessages(false) + &quot;\n&quot;);</span>
<a href="#l14.17"></a><span id="l14.17"> </span>
<a href="#l14.18"></a><span id="l14.18">   for (let i = 0; i &lt; selectedMessages.length; i++) {</span>
<a href="#l14.19"></a><span id="l14.19">     let expectedHdr = gDBView.getMsgHdrAt(i);</span>
<a href="#l14.20"></a><span id="l14.20">     if (selectedMessages.indexOf(expectedHdr) == -1) {</span>
<a href="#l14.21"></a><span id="l14.21">       view_throw(&quot;Expected &quot; + expectedHdr.messageKey + &quot;:&quot; +</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mailnews/base/test/unit/test_postPluginFilters.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_postPluginFilters.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -83,27 +83,27 @@ function run_test()</span>
<a href="#l15.4"></a><span id="l15.4">   action.type = Ci.nsMsgFilterAction.ChangePriority;</span>
<a href="#l15.5"></a><span id="l15.5">   action.priority = kPriorityLow;</span>
<a href="#l15.6"></a><span id="l15.6">   filter.appendAction(action);</span>
<a href="#l15.7"></a><span id="l15.7">   filter.filterType = Ci.nsMsgFilterType.PostPlugin;</span>
<a href="#l15.8"></a><span id="l15.8">   filter.enabled = true;</span>
<a href="#l15.9"></a><span id="l15.9">   filterList.insertFilterAt(0, filter);</span>
<a href="#l15.10"></a><span id="l15.10"> </span>
<a href="#l15.11"></a><span id="l15.11">   // goodIsHigh filter</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-  let filter = filterList.createFilter(&quot;goodIsHigh&quot;);</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineminus">-  let searchTerm = filter.createTerm();</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineplus">+  filter = filterList.createFilter(&quot;goodIsHigh&quot;);</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineplus">+  searchTerm = filter.createTerm();</span>
<a href="#l15.16"></a><span id="l15.16">   searchTerm.attrib = Ci.nsMsgSearchAttrib.JunkStatus;</span>
<a href="#l15.17"></a><span id="l15.17" class="difflineminus">-  let value = searchTerm.value;</span>
<a href="#l15.18"></a><span id="l15.18" class="difflineplus">+  value = searchTerm.value;</span>
<a href="#l15.19"></a><span id="l15.19">   value.attrib = Ci.nsMsgSearchAttrib.JunkStatus;</span>
<a href="#l15.20"></a><span id="l15.20">   value.junkStatus = MailServices.junk.GOOD;</span>
<a href="#l15.21"></a><span id="l15.21">   searchTerm.value = value;</span>
<a href="#l15.22"></a><span id="l15.22">   searchTerm.op = Ci.nsMsgSearchOp.Is;</span>
<a href="#l15.23"></a><span id="l15.23">   searchTerm.booleanAnd = false;</span>
<a href="#l15.24"></a><span id="l15.24">   filter.appendTerm(searchTerm);</span>
<a href="#l15.25"></a><span id="l15.25" class="difflineminus">-  let action = filter.createAction();</span>
<a href="#l15.26"></a><span id="l15.26" class="difflineplus">+  action = filter.createAction();</span>
<a href="#l15.27"></a><span id="l15.27">   action.type = Ci.nsMsgFilterAction.ChangePriority;</span>
<a href="#l15.28"></a><span id="l15.28">   action.priority = kPriorityHigh;</span>
<a href="#l15.29"></a><span id="l15.29">   filter.appendAction(action);</span>
<a href="#l15.30"></a><span id="l15.30">   filter.filterType = Ci.nsMsgFilterType.PostPlugin;</span>
<a href="#l15.31"></a><span id="l15.31">   filter.enabled = true;</span>
<a href="#l15.32"></a><span id="l15.32">   filterList.insertFilterAt(1, filter);</span>
<a href="#l15.33"></a><span id="l15.33"> </span>
<a href="#l15.34"></a><span id="l15.34">   // setup a db listener to grab the message headers. There's probably an</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mailnews/db/gloda/test/unit/test_index_addressbook.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mailnews/db/gloda/test/unit/test_index_addressbook.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -20,17 +20,17 @@ function add_card(aEmailAddress, aDispla</span>
<a href="#l16.4"></a><span id="l16.4"> function get_card_for_email(aEmailAddress) {</span>
<a href="#l16.5"></a><span id="l16.5">   let books = MailServices.ab.directories;</span>
<a href="#l16.6"></a><span id="l16.6"> </span>
<a href="#l16.7"></a><span id="l16.7">   let book, card;</span>
<a href="#l16.8"></a><span id="l16.8"> </span>
<a href="#l16.9"></a><span id="l16.9">   while (books.hasMoreElements()) {</span>
<a href="#l16.10"></a><span id="l16.10">     book = books.getNext()</span>
<a href="#l16.11"></a><span id="l16.11">                   .QueryInterface(Ci.nsIAbDirectory);</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-    var card = book.cardForEmailAddress(aEmailAddress);</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+    card = book.cardForEmailAddress(aEmailAddress);</span>
<a href="#l16.14"></a><span id="l16.14">     if (card)</span>
<a href="#l16.15"></a><span id="l16.15">       return [book, card];</span>
<a href="#l16.16"></a><span id="l16.16">   }</span>
<a href="#l16.17"></a><span id="l16.17">   return [null, null];</span>
<a href="#l16.18"></a><span id="l16.18"> }</span>
<a href="#l16.19"></a><span id="l16.19"> </span>
<a href="#l16.20"></a><span id="l16.20"> function delete_card(aEmailAddress) {</span>
<a href="#l16.21"></a><span id="l16.21">   let [book, card] = get_card_for_email(aEmailAddress);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mailnews/db/msgdb/test/unit/test_filter_enumerator.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mailnews/db/msgdb/test/unit/test_filter_enumerator.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -102,17 +102,17 @@ function run_test() {</span>
<a href="#l17.4"></a><span id="l17.4">   // try it backwards, with roller skates:</span>
<a href="#l17.5"></a><span id="l17.5">   filterEnumerator = inboxDB.getFilterEnumerator(searchTerms, true);</span>
<a href="#l17.6"></a><span id="l17.6">   matchingHdrs.clear();</span>
<a href="#l17.7"></a><span id="l17.7">   do {</span>
<a href="#l17.8"></a><span id="l17.8">     keepGoing = inboxDB.nextMatchingHdrs(filterEnumerator, 5, 5, matchingHdrs, numMatches);</span>
<a href="#l17.9"></a><span id="l17.9">   }</span>
<a href="#l17.10"></a><span id="l17.10">   while (keepGoing);</span>
<a href="#l17.11"></a><span id="l17.11">   do_check_eq(kNumExpectedMatches, matchingHdrs.length);</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-  let firstMatch = matchingHdrs.queryElementAt(0, Ci.nsIMsgDBHdr);</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+  firstMatch = matchingHdrs.queryElementAt(0, Ci.nsIMsgDBHdr);</span>
<a href="#l17.14"></a><span id="l17.14">   do_check_eq(firstMatch.messageId, gMessages[12].messageId);</span>
<a href="#l17.15"></a><span id="l17.15" class="difflineminus">-  let secondMatch = matchingHdrs.queryElementAt(1, Ci.nsIMsgDBHdr);</span>
<a href="#l17.16"></a><span id="l17.16" class="difflineplus">+  secondMatch = matchingHdrs.queryElementAt(1, Ci.nsIMsgDBHdr);</span>
<a href="#l17.17"></a><span id="l17.17">   do_check_eq(secondMatch.messageId, gMessages[11].messageId);</span>
<a href="#l17.18"></a><span id="l17.18">   let tenthMatch = matchingHdrs.queryElementAt(9, Ci.nsIMsgDBHdr);</span>
<a href="#l17.19"></a><span id="l17.19">   do_check_eq(tenthMatch.messageId, gMessages[1].messageId);</span>
<a href="#l17.20"></a><span id="l17.20"> </span>
<a href="#l17.21"></a><span id="l17.21">   do_test_finished();</span>
<a href="#l17.22"></a><span id="l17.22"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mailnews/local/test/unit/test_fileName.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_fileName.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -75,18 +75,18 @@ function run_test() {</span>
<a href="#l18.4"></a><span id="l18.4">   let pop3Root = pop3Server.rootMsgFolder;</span>
<a href="#l18.5"></a><span id="l18.5"> </span>
<a href="#l18.6"></a><span id="l18.6">   // Note: Inbox is not created automatically when there is no deferred server,</span>
<a href="#l18.7"></a><span id="l18.7">   // so we need to create it.</span>
<a href="#l18.8"></a><span id="l18.8">   localAccountUtils.inboxFolder = rootFolder.createLocalSubfolder(&quot;Inbox&quot;);</span>
<a href="#l18.9"></a><span id="l18.9">   // a local inbox should have a Mail flag!</span>
<a href="#l18.10"></a><span id="l18.10">   localAccountUtils.inboxFolder.setFlag(Ci.nsMsgFolderFlags.Mail);</span>
<a href="#l18.11"></a><span id="l18.11"> </span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-  let rootFolder = localAccountUtils.incomingServer.rootMsgFolder;</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineminus">-  let bugmail = rootFolder.getChildNamed(testFolderName);</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineplus">+  rootFolder = localAccountUtils.incomingServer.rootMsgFolder;</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineplus">+  bugmail = rootFolder.getChildNamed(testFolderName);</span>
<a href="#l18.16"></a><span id="l18.16">   do_check_eq(bugmail.getTotalMessages(false), 1);</span>
<a href="#l18.17"></a><span id="l18.17">   bugmail = pop3Root.getChildNamed(testFolderName);</span>
<a href="#l18.18"></a><span id="l18.18">   do_check_eq(bugmail.getTotalMessages(false), 1);</span>
<a href="#l18.19"></a><span id="l18.19"> </span>
<a href="#l18.20"></a><span id="l18.20">   // Check if creating an empty folder returns a proper error</span>
<a href="#l18.21"></a><span id="l18.21">   // instead of crash (bug 831190).</span>
<a href="#l18.22"></a><span id="l18.22">   try {</span>
<a href="#l18.23"></a><span id="l18.23">     rootFolder.createSubfolder(&quot;&quot;, null);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mailnews/local/test/unit/test_nsIMsgLocalMailFolder.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_nsIMsgLocalMailFolder.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -199,17 +199,17 @@ function subtest_folder_operations(root)</span>
<a href="#l19.4"></a><span id="l19.4">   rootLocal.copyFolderLocal(folder1Moved, true, null, null);</span>
<a href="#l19.5"></a><span id="l19.5">   folder = root.getChildNamed(&quot;folder1&quot;);</span>
<a href="#l19.6"></a><span id="l19.6">   folder2 = folder.getChildNamed(&quot;folder2&quot;);</span>
<a href="#l19.7"></a><span id="l19.7"> </span>
<a href="#l19.8"></a><span id="l19.8">   // Test - Rename (test that .msf file is renamed as well)</span>
<a href="#l19.9"></a><span id="l19.9">   folder.rename(&quot;folder1-newname&quot;, null);</span>
<a href="#l19.10"></a><span id="l19.10">   // make sure getting the db doesn't throw an exception, and is valid</span>
<a href="#l19.11"></a><span id="l19.11">   folder = rootLocal.getChildNamed(&quot;folder1-newname&quot;);</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-  let db = folder.msgDatabase;</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+  db = folder.msgDatabase;</span>
<a href="#l19.14"></a><span id="l19.14">   do_check_true(db.summaryValid);</span>
<a href="#l19.15"></a><span id="l19.15"> </span>
<a href="#l19.16"></a><span id="l19.16">   folder.rename(&quot;folder1&quot;, null);</span>
<a href="#l19.17"></a><span id="l19.17">   folder = rootLocal.getChildNamed(&quot;folder1&quot;);</span>
<a href="#l19.18"></a><span id="l19.18"> </span>
<a href="#l19.19"></a><span id="l19.19">   // Test - propagateDelete (this tests recursiveDelete as well)</span>
<a href="#l19.20"></a><span id="l19.20">   // The folders will be removed from disk completely, not merely to Trash.</span>
<a href="#l19.21"></a><span id="l19.21"> </span>
<a href="#l19.22"></a><span id="l19.22" class="difflineat">@@ -255,17 +255,17 @@ function test_store_rename(root) {</span>
<a href="#l19.23"></a><span id="l19.23">   folder1.rename(&quot;newfolder1&quot;, null);</span>
<a href="#l19.24"></a><span id="l19.24">   do_check_true(root.containsChildNamed(&quot;newfolder1&quot;));</span>
<a href="#l19.25"></a><span id="l19.25">   folder1 = root.getChildNamed(&quot;newfolder1&quot;);</span>
<a href="#l19.26"></a><span id="l19.26">   folder2 = folder1.getChildNamed(&quot;newfolder1-sub&quot;);</span>
<a href="#l19.27"></a><span id="l19.27"> </span>
<a href="#l19.28"></a><span id="l19.28">   do_check_true(folder1.containsChildNamed(folder2.name));</span>
<a href="#l19.29"></a><span id="l19.29">   do_check_true(folder2.filePath.exists());</span>
<a href="#l19.30"></a><span id="l19.30"> </span>
<a href="#l19.31"></a><span id="l19.31" class="difflineminus">-  let folder3 = root.getChildNamed(&quot;newfolder3&quot;);</span>
<a href="#l19.32"></a><span id="l19.32" class="difflineplus">+  folder3 = root.getChildNamed(&quot;newfolder3&quot;);</span>
<a href="#l19.33"></a><span id="l19.33">   root.propagateDelete(folder3, true, null);</span>
<a href="#l19.34"></a><span id="l19.34">   do_check_false(root.containsChildNamed(&quot;newfolder3&quot;));</span>
<a href="#l19.35"></a><span id="l19.35">   folder3 = root.createLocalSubfolder(&quot;newfolder3&quot;);</span>
<a href="#l19.36"></a><span id="l19.36">   folder3SubFolder = folder3.createLocalSubfolder(&quot;newfolder3-sub&quot;);</span>
<a href="#l19.37"></a><span id="l19.37">   folder3.rename(&quot;folder3&quot;, null);</span>
<a href="#l19.38"></a><span id="l19.38"> </span>
<a href="#l19.39"></a><span id="l19.39">   do_check_true(root.containsChildNamed(&quot;folder3&quot;));</span>
<a href="#l19.40"></a><span id="l19.40">   do_check_false(root.containsChildNamed(&quot;newfolder3&quot;));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mailnews/local/test/unit/test_pop3MoveFilter2.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_pop3MoveFilter2.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -67,17 +67,17 @@ const gTestArray =</span>
<a href="#l20.4"></a><span id="l20.4">     hdrs.push(hdr);</span>
<a href="#l20.5"></a><span id="l20.5">     do_check_false(gMoveFolder.fetchMsgPreviewText(keys, keys.length,</span>
<a href="#l20.6"></a><span id="l20.6">                                                    false, null));</span>
<a href="#l20.7"></a><span id="l20.7">     do_check_eq(hdrs[0].getStringProperty('preview'), bugmail10_preview);</span>
<a href="#l20.8"></a><span id="l20.8">     // check inbox message</span>
<a href="#l20.9"></a><span id="l20.9">     hdrs = [];</span>
<a href="#l20.10"></a><span id="l20.10">     keys = [];</span>
<a href="#l20.11"></a><span id="l20.11">     enumerator = localAccountUtils.inboxFolder.msgDatabase.EnumerateMessages();</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-    let hdr = enumerator.getNext().QueryInterface(Ci.nsIMsgDBHdr);</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+    hdr = enumerator.getNext().QueryInterface(Ci.nsIMsgDBHdr);</span>
<a href="#l20.14"></a><span id="l20.14">     keys.push(hdr.messageKey);</span>
<a href="#l20.15"></a><span id="l20.15">     hdrs.push(hdr);</span>
<a href="#l20.16"></a><span id="l20.16">     do_check_false(localAccountUtils.inboxFolder</span>
<a href="#l20.17"></a><span id="l20.17">                                     .fetchMsgPreviewText(keys, keys.length,</span>
<a href="#l20.18"></a><span id="l20.18">                                                          false, null));</span>
<a href="#l20.19"></a><span id="l20.19">     do_check_eq(hdrs[0].getStringProperty('preview'), basic1_preview);</span>
<a href="#l20.20"></a><span id="l20.20">   }</span>
<a href="#l20.21"></a><span id="l20.21"> ];</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

