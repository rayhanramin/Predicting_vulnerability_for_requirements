<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 22554:4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73" />
<meta property="og:url" content="/comm-central/rev/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73" />
<meta property="og:description" content="Bug 1417319: Remove use of MOZ_PKG_MANIFEST_P for MOZ_PKG_MANIFEST; r=Fallen" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73">shortlog</a> |
<a href="/comm-central/log/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73">files</a> |
changeset |
<a href="/comm-central/raw-rev/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73">raw</a>  | <a href="/comm-central/archive/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1417319">Bug 1417319</a>: Remove use of MOZ_PKG_MANIFEST_P for MOZ_PKG_MANIFEST; r=Fallen
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#84;&#111;&#109;&#32;&#80;&#114;&#105;&#110;&#99;&#101;&#32;&#60;&#109;&#111;&#122;&#105;&#108;&#108;&#97;&#64;&#104;&#111;&#99;&#97;&#116;&#46;&#99;&#97;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 14 Nov 2017 23:34:53 -0700</td></tr>

<tr>
 <td>changeset 22554</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73">4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73</a></td>
</tr>



<tr>
<td>parent 22553</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/5a4b1f1d4e46641a8392be7dd4067adac19a35e0">5a4b1f1d4e46641a8392be7dd4067adac19a35e0</a>
</td>
</tr>

<tr>
<td>child 22555</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/c7449572b78cc092cd045f0250d9b9a311394157">c7449572b78cc092cd045f0250d9b9a311394157</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73">13755</a></td></tr>
<tr><td>push user</td><td>mozilla@hocat.ca</td></tr>
<tr><td>push date</td><td class="date age">Thu, 16 Nov 2017 04:01:20 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@4fd7237c5c2f [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73&newProject=comm-central&newRevision=5a4b1f1d4e46641a8392be7dd4067adac19a35e0&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73&newProject=comm-central&newRevision=5a4b1f1d4e46641a8392be7dd4067adac19a35e0&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73&newProject=comm-central&newRevision=5a4b1f1d4e46641a8392be7dd4067adac19a35e0&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Fallen%29&revcount=50">Fallen</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1417319">1417319</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1417319">Bug 1417319</a>: Remove use of MOZ_PKG_MANIFEST_P for MOZ_PKG_MANIFEST; r=Fallen

mozilla-central switched to handling the preprocessing in mozpack some time
ago, so we can get rid of our preprocessing step. There was some missing
dependencies that caused this to fail when building with m-c as topdir.

MozReview-Commit-ID: HglzgWaJDVv</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73/im/installer/Makefile.in">im/installer/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73/im/installer/Makefile.in">file</a> |
<a href="/comm-central/annotate/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73/im/installer/Makefile.in">annotate</a> |
<a href="/comm-central/diff/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73/im/installer/Makefile.in">diff</a> |
<a href="/comm-central/comparison/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73/im/installer/Makefile.in">comparison</a> |
<a href="/comm-central/log/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73/im/installer/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73/mail/installer/Makefile.in">mail/installer/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73/mail/installer/Makefile.in">file</a> |
<a href="/comm-central/annotate/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73/mail/installer/Makefile.in">annotate</a> |
<a href="/comm-central/diff/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73/mail/installer/Makefile.in">diff</a> |
<a href="/comm-central/comparison/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73/mail/installer/Makefile.in">comparison</a> |
<a href="/comm-central/log/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73/mail/installer/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73/suite/installer/Makefile.in">suite/installer/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73/suite/installer/Makefile.in">file</a> |
<a href="/comm-central/annotate/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73/suite/installer/Makefile.in">annotate</a> |
<a href="/comm-central/diff/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73/suite/installer/Makefile.in">diff</a> |
<a href="/comm-central/comparison/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73/suite/installer/Makefile.in">comparison</a> |
<a href="/comm-central/log/4fd7237c5c2f1569e2d1ebbdddf3be2f8f572f73/suite/installer/Makefile.in">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/im/installer/Makefile.in</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/im/installer/Makefile.in</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -3,17 +3,17 @@</span>
<a href="#l1.4"></a><span id="l1.4"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6"> STANDALONE_MAKEFILE := 1</span>
<a href="#l1.7"></a><span id="l1.7"> </span>
<a href="#l1.8"></a><span id="l1.8"> include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l1.9"></a><span id="l1.9"> </span>
<a href="#l1.10"></a><span id="l1.10"> MOZ_PKG_REMOVALS = $(srcdir)/removed-files.in</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-MOZ_PKG_MANIFEST_P = $(srcdir)/package-manifest.in</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+MOZ_PKG_MANIFEST = $(srcdir)/package-manifest.in</span>
<a href="#l1.14"></a><span id="l1.14"> # Some files have been already bundled with xulrunner</span>
<a href="#l1.15"></a><span id="l1.15"> ifndef SYSTEM_LIBXUL</span>
<a href="#l1.16"></a><span id="l1.16"> MOZ_PKG_FATAL_WARNINGS = 1</span>
<a href="#l1.17"></a><span id="l1.17"> endif</span>
<a href="#l1.18"></a><span id="l1.18"> </span>
<a href="#l1.19"></a><span id="l1.19"> DEFINES += -DPKG_LOCALE_MANIFEST=$(topobjdir)/im/installer/locale-manifest.in</span>
<a href="#l1.20"></a><span id="l1.20"> MOZ_CHROME_LOCALE_ENTRIES=@RESPATH@/chrome/</span>
<a href="#l1.21"></a><span id="l1.21"> </span>
<a href="#l1.22"></a><span id="l1.22" class="difflineat">@@ -97,25 +97,16 @@ endif</span>
<a href="#l1.23"></a><span id="l1.23"> ifdef MOZ_PURPLE</span>
<a href="#l1.24"></a><span id="l1.24"> DEFINES += -DMOZ_PURPLE</span>
<a href="#l1.25"></a><span id="l1.25"> endif</span>
<a href="#l1.26"></a><span id="l1.26"> </span>
<a href="#l1.27"></a><span id="l1.27"> ifdef MAKENSISU</span>
<a href="#l1.28"></a><span id="l1.28"> DEFINES += -DHAVE_MAKENSISU=1</span>
<a href="#l1.29"></a><span id="l1.29"> endif</span>
<a href="#l1.30"></a><span id="l1.30"> </span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-ifdef MOZ_PKG_MANIFEST_P</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineminus">-MOZ_PKG_MANIFEST = package-manifest</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineminus">-</span>
<a href="#l1.34"></a><span id="l1.34" class="difflineminus">-$(MOZ_PKG_MANIFEST): $(MOZ_PKG_MANIFEST_P) $(GLOBAL_DEPS)</span>
<a href="#l1.35"></a><span id="l1.35" class="difflineminus">-	$(call py_action,preprocessor,$(DEFINES) $(ACDEFINES) $&lt; -o $@)</span>
<a href="#l1.36"></a><span id="l1.36" class="difflineminus">-</span>
<a href="#l1.37"></a><span id="l1.37" class="difflineminus">-GARBAGE += $(MOZ_PKG_MANIFEST)</span>
<a href="#l1.38"></a><span id="l1.38" class="difflineminus">-endif</span>
<a href="#l1.39"></a><span id="l1.39" class="difflineminus">-</span>
<a href="#l1.40"></a><span id="l1.40"> ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))</span>
<a href="#l1.41"></a><span id="l1.41"> MOZ_PKG_MAC_DSSTORE=branding/dsstore</span>
<a href="#l1.42"></a><span id="l1.42"> MOZ_PKG_MAC_BACKGROUND=branding/background.png</span>
<a href="#l1.43"></a><span id="l1.43"> MOZ_PKG_MAC_ICON=branding/disk.icns</span>
<a href="#l1.44"></a><span id="l1.44"> MOZ_PKG_MAC_EXTRA=--symlink &quot;/Applications:/ &quot;</span>
<a href="#l1.45"></a><span id="l1.45"> endif</span>
<a href="#l1.46"></a><span id="l1.46"> </span>
<a href="#l1.47"></a><span id="l1.47"> NON_OMNIJAR_FILES =</span>
<a href="#l1.48"></a><span id="l1.48" class="difflineat">@@ -175,22 +166,20 @@ PKGCOMP_FIND_OPTS = -L</span>
<a href="#l1.49"></a><span id="l1.49"> endif</span>
<a href="#l1.50"></a><span id="l1.50"> ifeq (Darwin, $(OS_ARCH))</span>
<a href="#l1.51"></a><span id="l1.51"> FINDPATH = $(_APPNAME)/Contents/MacOS</span>
<a href="#l1.52"></a><span id="l1.52"> else</span>
<a href="#l1.53"></a><span id="l1.53"> FINDPATH=bin</span>
<a href="#l1.54"></a><span id="l1.54"> endif</span>
<a href="#l1.55"></a><span id="l1.55"> </span>
<a href="#l1.56"></a><span id="l1.56"> package-compare:: $(MOZ_PKG_MANIFEST)</span>
<a href="#l1.57"></a><span id="l1.57" class="difflineminus">-ifdef MOZ_PKG_MANIFEST_P</span>
<a href="#l1.58"></a><span id="l1.58"> 	cd $(DIST); find $(PKGCOMP_FIND_OPTS) $(FINDPATH) -type f | sort &gt; bin-list.txt</span>
<a href="#l1.59"></a><span id="l1.59" class="difflineminus">-	grep &quot;^$(BINPATH)&quot; $(MOZ_PKG_MANIFEST) | sed -e 's/^\///' | sort &gt; $(DIST)/pack-list.txt</span>
<a href="#l1.60"></a><span id="l1.60" class="difflineplus">+	$(call py_action,preprocessor,$(DEFINES) $(ACDEFINES) $(MOZ_PKG_MANIFEST)) | grep '^$(BINPATH)' | sed -e 's/^\///' | sort &gt; $(DIST)/pack-list.txt</span>
<a href="#l1.61"></a><span id="l1.61"> 	-diff -u $(DIST)/pack-list.txt $(DIST)/bin-list.txt</span>
<a href="#l1.62"></a><span id="l1.62"> 	rm -f $(DIST)/pack-list.txt $(DIST)/bin-list.txt</span>
<a href="#l1.63"></a><span id="l1.63" class="difflineminus">-endif</span>
<a href="#l1.64"></a><span id="l1.64"> </span>
<a href="#l1.65"></a><span id="l1.65"> installer::</span>
<a href="#l1.66"></a><span id="l1.66"> ifdef INSTALLER_DIR</span>
<a href="#l1.67"></a><span id="l1.67"> 	$(MAKE) -C $(INSTALLER_DIR)</span>
<a href="#l1.68"></a><span id="l1.68"> endif</span>
<a href="#l1.69"></a><span id="l1.69"> </span>
<a href="#l1.70"></a><span id="l1.70"> # The comm-* source stamp is already there.</span>
<a href="#l1.71"></a><span id="l1.71"> PLATFORM_SOURCE_STAMP = $(firstword $(shell hg -R &quot;$(moztopsrcdir)&quot; parent --template=&quot;{node}\n&quot; 2&gt;/dev/null))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/installer/Makefile.in</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/installer/Makefile.in</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -4,17 +4,17 @@</span>
<a href="#l2.4"></a><span id="l2.4"> </span>
<a href="#l2.5"></a><span id="l2.5"> STANDALONE_MAKEFILE := 1</span>
<a href="#l2.6"></a><span id="l2.6"> # DIST_SUBDIR := mail  # Not sure why TB is not using this</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8"> include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l2.9"></a><span id="l2.9"> </span>
<a href="#l2.10"></a><span id="l2.10"> MOZ_PKG_REMOVALS = $(srcdir)/removed-files.in</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-MOZ_PKG_MANIFEST_P = $(srcdir)/package-manifest.in</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+MOZ_PKG_MANIFEST = $(srcdir)/package-manifest.in</span>
<a href="#l2.14"></a><span id="l2.14"> # Some files have been already bundled with xulrunner</span>
<a href="#l2.15"></a><span id="l2.15"> ifndef SYSTEM_LIBXUL</span>
<a href="#l2.16"></a><span id="l2.16"> MOZ_PKG_FATAL_WARNINGS = 1</span>
<a href="#l2.17"></a><span id="l2.17"> endif</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19"> DEFINES += -DPKG_LOCALE_MANIFEST=$(commtopobjdir)/mail/installer/locale-manifest.in</span>
<a href="#l2.20"></a><span id="l2.20"> MOZ_CHROME_LOCALE_ENTRIES=@RESPATH@/chrome/</span>
<a href="#l2.21"></a><span id="l2.21"> </span>
<a href="#l2.22"></a><span id="l2.22" class="difflineat">@@ -115,23 +115,16 @@ endif</span>
<a href="#l2.23"></a><span id="l2.23"> ifdef MAKENSISU</span>
<a href="#l2.24"></a><span id="l2.24"> DEFINES += -DHAVE_MAKENSISU=1</span>
<a href="#l2.25"></a><span id="l2.25"> endif</span>
<a href="#l2.26"></a><span id="l2.26"> </span>
<a href="#l2.27"></a><span id="l2.27"> ifdef MOZ_PREF_EXTENSIONS</span>
<a href="#l2.28"></a><span id="l2.28"> DEFINES += -DMOZ_PREF_EXTENSIONS=1</span>
<a href="#l2.29"></a><span id="l2.29"> endif</span>
<a href="#l2.30"></a><span id="l2.30"> </span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-ifdef MOZ_PKG_MANIFEST_P</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineminus">-MOZ_PKG_MANIFEST = package-manifest</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineminus">-</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineminus">-$(MOZ_PKG_MANIFEST): $(MOZ_PKG_MANIFEST_P) $(GLOBAL_DEPS)</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineminus">-	$(call py_action,preprocessor,$(DEFINES) $(ACDEFINES) $&lt; -o $@)</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineminus">-endif</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineminus">-</span>
<a href="#l2.38"></a><span id="l2.38"> ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))</span>
<a href="#l2.39"></a><span id="l2.39"> MOZ_PKG_MAC_DSSTORE=branding/dsstore</span>
<a href="#l2.40"></a><span id="l2.40"> MOZ_PKG_MAC_BACKGROUND=branding/background.png</span>
<a href="#l2.41"></a><span id="l2.41"> MOZ_PKG_MAC_ICON=branding/disk.icns</span>
<a href="#l2.42"></a><span id="l2.42"> MOZ_PKG_MAC_EXTRA=--symlink '/Applications:/ '</span>
<a href="#l2.43"></a><span id="l2.43"> endif</span>
<a href="#l2.44"></a><span id="l2.44"> </span>
<a href="#l2.45"></a><span id="l2.45"> NON_OMNIJAR_FILES = defaults/messenger/mailViews.dat</span>
<a href="#l2.46"></a><span id="l2.46" class="difflineat">@@ -189,22 +182,20 @@ PKGCOMP_FIND_OPTS = -L</span>
<a href="#l2.47"></a><span id="l2.47"> endif</span>
<a href="#l2.48"></a><span id="l2.48"> ifeq (Darwin, $(OS_ARCH))</span>
<a href="#l2.49"></a><span id="l2.49"> FINDPATH = $(_APPNAME)/Contents/MacOS</span>
<a href="#l2.50"></a><span id="l2.50"> else</span>
<a href="#l2.51"></a><span id="l2.51"> FINDPATH=bin</span>
<a href="#l2.52"></a><span id="l2.52"> endif</span>
<a href="#l2.53"></a><span id="l2.53"> </span>
<a href="#l2.54"></a><span id="l2.54"> package-compare:: $(MOZ_PKG_MANIFEST)</span>
<a href="#l2.55"></a><span id="l2.55" class="difflineminus">-ifdef MOZ_PKG_MANIFEST_P</span>
<a href="#l2.56"></a><span id="l2.56"> 	cd $(DIST); find $(PKGCOMP_FIND_OPTS) $(FINDPATH) -type f | sort &gt; bin-list.txt</span>
<a href="#l2.57"></a><span id="l2.57" class="difflineminus">-	grep '^$(BINPATH)' $(MOZ_PKG_MANIFEST) | sed -e 's/^\///' | sort &gt; $(DIST)/pack-list.txt</span>
<a href="#l2.58"></a><span id="l2.58" class="difflineplus">+	$(call py_action,preprocessor,$(DEFINES) $(ACDEFINES) $(MOZ_PKG_MANIFEST)) | grep '^$(BINPATH)' | sed -e 's/^\///' | sort &gt; $(DIST)/pack-list.txt</span>
<a href="#l2.59"></a><span id="l2.59"> 	-diff -u $(DIST)/pack-list.txt $(DIST)/bin-list.txt</span>
<a href="#l2.60"></a><span id="l2.60"> 	rm -f $(DIST)/pack-list.txt $(DIST)/bin-list.txt</span>
<a href="#l2.61"></a><span id="l2.61" class="difflineminus">-endif</span>
<a href="#l2.62"></a><span id="l2.62"> </span>
<a href="#l2.63"></a><span id="l2.63"> installer::</span>
<a href="#l2.64"></a><span id="l2.64"> ifdef INSTALLER_DIR</span>
<a href="#l2.65"></a><span id="l2.65"> 	$(MAKE) -C $(INSTALLER_DIR)</span>
<a href="#l2.66"></a><span id="l2.66"> endif</span>
<a href="#l2.67"></a><span id="l2.67"> </span>
<a href="#l2.68"></a><span id="l2.68"> # The comm-* source stamp is already there.</span>
<a href="#l2.69"></a><span id="l2.69"> PLATFORM_SOURCE_STAMP = $(firstword $(shell hg -R &quot;$(moztopsrcdir)&quot; parent --template=&quot;{node}\n&quot; 2&gt;/dev/null))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/suite/installer/Makefile.in</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/suite/installer/Makefile.in</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -3,17 +3,17 @@</span>
<a href="#l3.4"></a><span id="l3.4"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l3.5"></a><span id="l3.5"> </span>
<a href="#l3.6"></a><span id="l3.6"> STANDALONE_MAKEFILE := 1</span>
<a href="#l3.7"></a><span id="l3.7"> </span>
<a href="#l3.8"></a><span id="l3.8"> include $(moztopsrcdir)/config/rules.mk</span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10"> MOZ_PKG_REMOVALS = $(srcdir)/removed-files.in</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-MOZ_PKG_MANIFEST_P = $(srcdir)/package-manifest.in</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+MOZ_PKG_MANIFEST = $(srcdir)/package-manifest.in</span>
<a href="#l3.14"></a><span id="l3.14"> # Be fatal, except when building with XULRunner which already bundles some files.</span>
<a href="#l3.15"></a><span id="l3.15"> ifndef SYSTEM_LIBXUL</span>
<a href="#l3.16"></a><span id="l3.16"> MOZ_PKG_FATAL_WARNINGS = 1</span>
<a href="#l3.17"></a><span id="l3.17"> endif</span>
<a href="#l3.18"></a><span id="l3.18"> </span>
<a href="#l3.19"></a><span id="l3.19"> DEFINES += -DPKG_LOCALE_MANIFEST=$(topobjdir)/suite/installer/locale-manifest.in</span>
<a href="#l3.20"></a><span id="l3.20"> MOZ_CHROME_LOCALE_ENTRIES=@RESPATH@/chrome/</span>
<a href="#l3.21"></a><span id="l3.21"> </span>
<a href="#l3.22"></a><span id="l3.22" class="difflineat">@@ -137,25 +137,16 @@ DEFINES += -DLOCALE_BUILD=1</span>
<a href="#l3.23"></a><span id="l3.23"> endif</span>
<a href="#l3.24"></a><span id="l3.24"> </span>
<a href="#l3.25"></a><span id="l3.25"> DEFINES += -DMOZ_CHILD_PROCESS_NAME=$(MOZ_CHILD_PROCESS_NAME)</span>
<a href="#l3.26"></a><span id="l3.26"> </span>
<a href="#l3.27"></a><span id="l3.27"> ifdef MAKENSISU</span>
<a href="#l3.28"></a><span id="l3.28"> DEFINES += -DHAVE_MAKENSISU=1</span>
<a href="#l3.29"></a><span id="l3.29"> endif</span>
<a href="#l3.30"></a><span id="l3.30"> </span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-ifdef MOZ_PKG_MANIFEST_P</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineminus">-MOZ_PKG_MANIFEST = package-manifest</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineminus">-</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineminus">-$(MOZ_PKG_MANIFEST): $(MOZ_PKG_MANIFEST_P) $(GLOBAL_DEPS)</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineminus">-	$(call py_action,preprocessor,$(DEFINES) $(ACDEFINES) $&lt; -o $@)</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineminus">-</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineminus">-GARBAGE += $(MOZ_PKG_MANIFEST)</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineminus">-endif</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineminus">-</span>
<a href="#l3.40"></a><span id="l3.40"> ifeq ($(MOZ_WIDGET_TOOLKIT),cocoa)</span>
<a href="#l3.41"></a><span id="l3.41"> MOZ_PKG_MAC_DSSTORE=branding/dsstore</span>
<a href="#l3.42"></a><span id="l3.42"> MOZ_PKG_MAC_BACKGROUND=branding/background.png</span>
<a href="#l3.43"></a><span id="l3.43"> MOZ_PKG_MAC_ICON=branding/disk.icns</span>
<a href="#l3.44"></a><span id="l3.44"> MOZ_PKG_MAC_EXTRA=--symlink &quot;/Applications:/ &quot;</span>
<a href="#l3.45"></a><span id="l3.45"> endif</span>
<a href="#l3.46"></a><span id="l3.46"> </span>
<a href="#l3.47"></a><span id="l3.47"> NON_OMNIJAR_FILES = \</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineat">@@ -221,22 +212,20 @@ PKGCOMP_FIND_OPTS = -L</span>
<a href="#l3.49"></a><span id="l3.49"> endif</span>
<a href="#l3.50"></a><span id="l3.50"> ifeq (Darwin, $(OS_ARCH))</span>
<a href="#l3.51"></a><span id="l3.51"> FINDPATH = $(_APPNAME)/Contents/MacOS</span>
<a href="#l3.52"></a><span id="l3.52"> else</span>
<a href="#l3.53"></a><span id="l3.53"> FINDPATH=bin</span>
<a href="#l3.54"></a><span id="l3.54"> endif</span>
<a href="#l3.55"></a><span id="l3.55"> </span>
<a href="#l3.56"></a><span id="l3.56"> package-compare:: $(MOZ_PKG_MANIFEST)</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineminus">-ifdef MOZ_PKG_MANIFEST_P</span>
<a href="#l3.58"></a><span id="l3.58"> 	cd $(DIST); find $(PKGCOMP_FIND_OPTS) $(FINDPATH) -type f | sort &gt; bin-list.txt</span>
<a href="#l3.59"></a><span id="l3.59" class="difflineminus">-	grep &quot;^$(BINPATH)&quot; $(MOZ_PKG_MANIFEST) | sed -e 's/^\///' | sort &gt; $(DIST)/pack-list.txt</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineplus">+	$(call py_action,preprocessor,$(DEFINES) $(ACDEFINES) $(MOZ_PKG_MANIFEST)) | grep '^$(BINPATH)' | sed -e 's/^\///' | sort &gt; $(DIST)/pack-list.txt</span>
<a href="#l3.61"></a><span id="l3.61"> 	-diff -u $(DIST)/pack-list.txt $(DIST)/bin-list.txt</span>
<a href="#l3.62"></a><span id="l3.62"> 	rm -f $(DIST)/pack-list.txt $(DIST)/bin-list.txt</span>
<a href="#l3.63"></a><span id="l3.63" class="difflineminus">-endif</span>
<a href="#l3.64"></a><span id="l3.64"> </span>
<a href="#l3.65"></a><span id="l3.65"> installer:</span>
<a href="#l3.66"></a><span id="l3.66"> ifdef INSTALLER_DIR</span>
<a href="#l3.67"></a><span id="l3.67"> 	$(MAKE) -C $(INSTALLER_DIR)</span>
<a href="#l3.68"></a><span id="l3.68"> endif</span>
<a href="#l3.69"></a><span id="l3.69"> </span>
<a href="#l3.70"></a><span id="l3.70"> # The comm-* source stamp is already there.</span>
<a href="#l3.71"></a><span id="l3.71"> PLATFORM_SOURCE_STAMP = $(firstword $(shell hg -R &quot;$(moztopsrcdir)&quot; parent --template=&quot;{node|short}\n&quot; 2&gt;/dev/null))</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

