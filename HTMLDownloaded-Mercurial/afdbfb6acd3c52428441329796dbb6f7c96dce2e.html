<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 11485:afdbfb6acd3c52428441329796dbb6f7c96dce2e</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ afdbfb6acd3c52428441329796dbb6f7c96dce2e" />
<meta property="og:url" content="/comm-central/rev/afdbfb6acd3c52428441329796dbb6f7c96dce2e" />
<meta property="og:description" content="Bug 773143 - Rename MOZ_ANGLE to MOZ_ANGLE_RENDERER [Port |Bug 772457 Remove compile-time option to disable ANGLE, replace it by an option to disable WebGL altogether (also disabling ANGLE)|]. Part 2: other changes to the ANGLE section in configure.in. r=Callek" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / afdbfb6acd3c52428441329796dbb6f7c96dce2e 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/afdbfb6acd3c52428441329796dbb6f7c96dce2e">shortlog</a> |
<a href="/comm-central/log/afdbfb6acd3c52428441329796dbb6f7c96dce2e">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/afdbfb6acd3c52428441329796dbb6f7c96dce2e">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/afdbfb6acd3c52428441329796dbb6f7c96dce2e">files</a> |
changeset |
<a href="/comm-central/raw-rev/afdbfb6acd3c52428441329796dbb6f7c96dce2e">raw</a>  | <a href="/comm-central/archive/afdbfb6acd3c52428441329796dbb6f7c96dce2e.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=773143">Bug 773143</a> - Rename MOZ_ANGLE to MOZ_ANGLE_RENDERER [Port |<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=772457">Bug 772457</a> Remove compile-time option to disable ANGLE, replace it by an option to disable WebGL altogether (also disabling ANGLE)|]. Part 2: other changes to the ANGLE section in configure.in. r=Callek
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#74;&#101;&#110;&#115;&#32;&#72;&#97;&#116;&#108;&#97;&#107;&#32;&#60;&#106;&#104;&#64;&#106;&#117;&#110;&#101;&#116;&#122;&#46;&#100;&#101;&#62;</td></tr>
<tr><td></td><td class="date age">Sat, 10 Nov 2012 16:22:26 +0100</td></tr>

<tr>
 <td>changeset 11485</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/afdbfb6acd3c52428441329796dbb6f7c96dce2e">afdbfb6acd3c52428441329796dbb6f7c96dce2e</a></td>
</tr>



<tr>
<td>parent 11484</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/84173f8837f713e42b43770e78ff0f9eed167f6a">84173f8837f713e42b43770e78ff0f9eed167f6a</a>
</td>
</tr>

<tr>
<td>child 11486</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/8c671db50bd43100c6c134ab156e7c9f0dfd9990">8c671db50bd43100c6c134ab156e7c9f0dfd9990</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=afdbfb6acd3c52428441329796dbb6f7c96dce2e">8582</a></td></tr>
<tr><td>push user</td><td>jh@junetz.de</td></tr>
<tr><td>push date</td><td class="date age">Sat, 10 Nov 2012 15:27:52 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@afdbfb6acd3c [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=afdbfb6acd3c52428441329796dbb6f7c96dce2e">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=afdbfb6acd3c52428441329796dbb6f7c96dce2e&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=afdbfb6acd3c52428441329796dbb6f7c96dce2e&newProject=comm-central&newRevision=84173f8837f713e42b43770e78ff0f9eed167f6a&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=afdbfb6acd3c52428441329796dbb6f7c96dce2e&newProject=comm-central&newRevision=84173f8837f713e42b43770e78ff0f9eed167f6a&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=afdbfb6acd3c52428441329796dbb6f7c96dce2e&newProject=comm-central&newRevision=84173f8837f713e42b43770e78ff0f9eed167f6a&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Callek%29&revcount=50">Callek</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=773143">773143</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=772457">772457</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=794472">794472</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=787653">787653</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=774062">774062</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=773143">Bug 773143</a> - Rename MOZ_ANGLE to MOZ_ANGLE_RENDERER [Port |<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=772457">Bug 772457</a> Remove compile-time option to disable ANGLE, replace it by an option to disable WebGL altogether (also disabling ANGLE)|]. Part 2: other changes to the ANGLE section in configure.in. r=Callek
* http://hg.mozilla.org/mozilla-central/rev/3391c610940b
  <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=772457">Bug 772457</a> - add --disable-webgl, remove --disable-angle, clean up configure.in
* http://hg.mozilla.org/mozilla-central/rev/6511fd29e7d8
  <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=794472">Bug 794472</a> - Add quoting for some commands to make pymake happier
* http://hg.mozilla.org/mozilla-central/rev/6eed25d2f2c9
  <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=787653">Bug 787653</a> - Allow compiling ANGLE on mingw-w64 (makefile part)
* http://hg.mozilla.org/mozilla-central/rev/8ce5250fe80f
  <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=774062">Bug 774062</a> - Make configure error out if the DirectX SDK redistributables cannot be found</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/afdbfb6acd3c52428441329796dbb6f7c96dce2e/config/rules.mk">config/rules.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/afdbfb6acd3c52428441329796dbb6f7c96dce2e/config/rules.mk">file</a> |
<a href="/comm-central/annotate/afdbfb6acd3c52428441329796dbb6f7c96dce2e/config/rules.mk">annotate</a> |
<a href="/comm-central/diff/afdbfb6acd3c52428441329796dbb6f7c96dce2e/config/rules.mk">diff</a> |
<a href="/comm-central/comparison/afdbfb6acd3c52428441329796dbb6f7c96dce2e/config/rules.mk">comparison</a> |
<a href="/comm-central/log/afdbfb6acd3c52428441329796dbb6f7c96dce2e/config/rules.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/afdbfb6acd3c52428441329796dbb6f7c96dce2e/configure.in">configure.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/afdbfb6acd3c52428441329796dbb6f7c96dce2e/configure.in">file</a> |
<a href="/comm-central/annotate/afdbfb6acd3c52428441329796dbb6f7c96dce2e/configure.in">annotate</a> |
<a href="/comm-central/diff/afdbfb6acd3c52428441329796dbb6f7c96dce2e/configure.in">diff</a> |
<a href="/comm-central/comparison/afdbfb6acd3c52428441329796dbb6f7c96dce2e/configure.in">comparison</a> |
<a href="/comm-central/log/afdbfb6acd3c52428441329796dbb6f7c96dce2e/configure.in">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/config/rules.mk</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/config/rules.mk</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -1240,17 +1240,17 @@ endif</span>
<a href="#l1.4"></a><span id="l1.4"> </span>
<a href="#l1.5"></a><span id="l1.5"> Makefile: Makefile.in</span>
<a href="#l1.6"></a><span id="l1.6"> 	@$(PYTHON) $(DEPTH)/config.status -n --file=Makefile</span>
<a href="#l1.7"></a><span id="l1.7"> 	@$(TOUCH) $@</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9"> ifdef SUBMAKEFILES</span>
<a href="#l1.10"></a><span id="l1.10"> # VPATH does not work on some machines in this case, so add $(srcdir)</span>
<a href="#l1.11"></a><span id="l1.11"> $(SUBMAKEFILES): % : $(srcdir)/%.in</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-	$(PYTHON) $(DEPTH)/config.status -n --file=$@</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+	$(PYTHON) $(DEPTH)/config.status -n --file=&quot;$@&quot;</span>
<a href="#l1.14"></a><span id="l1.14"> 	@$(TOUCH) $@</span>
<a href="#l1.15"></a><span id="l1.15"> endif</span>
<a href="#l1.16"></a><span id="l1.16"> </span>
<a href="#l1.17"></a><span id="l1.17"> ifdef AUTOUPDATE_CONFIGURE</span>
<a href="#l1.18"></a><span id="l1.18"> $(topsrcdir)/configure: $(topsrcdir)/configure.in</span>
<a href="#l1.19"></a><span id="l1.19"> 	(cd $(topsrcdir) &amp;&amp; $(AUTOCONF)) &amp;&amp; $(PYTHON) $(DEPTH)/config.status -n --recheck</span>
<a href="#l1.20"></a><span id="l1.20"> endif</span>
<a href="#l1.21"></a><span id="l1.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/configure.in</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/configure.in</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -1841,16 +1841,17 @@ ia64*-hpux*)</span>
<a href="#l2.4"></a><span id="l2.4">     i*86-*)</span>
<a href="#l2.5"></a><span id="l2.5">         if test &quot;$HAVE_64BIT_OS&quot;; then</span>
<a href="#l2.6"></a><span id="l2.6">             AC_MSG_ERROR([You are targeting i386 but using the 64-bit compiler.])</span>
<a href="#l2.7"></a><span id="l2.7">         fi</span>
<a href="#l2.8"></a><span id="l2.8"> </span>
<a href="#l2.9"></a><span id="l2.9">         if test -n &quot;$GNU_CC&quot;; then</span>
<a href="#l2.10"></a><span id="l2.10">             CFLAGS=&quot;$CFLAGS -mstackrealign -fno-keep-inline-dllexport&quot;</span>
<a href="#l2.11"></a><span id="l2.11">             CXXFLAGS=&quot;$CXXFLAGS -mstackrealign -fno-keep-inline-dllexport&quot;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+            LDFLAGS=&quot;$LDFLAGS -Wl,--enable-stdcall-fixup&quot;</span>
<a href="#l2.13"></a><span id="l2.13">         else</span>
<a href="#l2.14"></a><span id="l2.14">             AC_DEFINE(HAVE_STDCALL)</span>
<a href="#l2.15"></a><span id="l2.15">             DSO_LDOPTS=&quot;$DSO_LDOPTS -MACHINE:X86&quot;</span>
<a href="#l2.16"></a><span id="l2.16">             LDFLAGS=&quot;$LDFLAGS -SAFESEH&quot;</span>
<a href="#l2.17"></a><span id="l2.17">         fi</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19">     	AC_DEFINE(_X86_)</span>
<a href="#l2.20"></a><span id="l2.20"> 	;;</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineat">@@ -4643,74 +4644,65 @@ case &quot;${target_cpu}&quot; in</span>
<a href="#l2.22"></a><span id="l2.22"> i*86)</span>
<a href="#l2.23"></a><span id="l2.23">   MOZ_DIRECTX_SDK_CPU_SUFFIX=x86</span>
<a href="#l2.24"></a><span id="l2.24">   ;;</span>
<a href="#l2.25"></a><span id="l2.25"> x86_64)</span>
<a href="#l2.26"></a><span id="l2.26">   MOZ_DIRECTX_SDK_CPU_SUFFIX=x64</span>
<a href="#l2.27"></a><span id="l2.27">   ;;</span>
<a href="#l2.28"></a><span id="l2.28"> esac</span>
<a href="#l2.29"></a><span id="l2.29"> </span>
<a href="#l2.30"></a><span id="l2.30" class="difflineminus">-if test -n &quot;$MOZ_ANGLE_RENDERER&quot;; then</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-MOZ_ARG_DISABLE_BOOL(angle,</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineminus">-[  --disable-angle     Disable building of ANGLE for WebGL-&gt;D3D translation],</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineminus">-    MOZ_ANGLE_RENDERER=,</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineminus">-    MOZ_ANGLE_RENDERER=1)</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineminus">-</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineminus">-if test -n &quot;$MOZ_ANGLE_RENDERER&quot;; then</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineminus">-  if test -z &quot;$_WIN32_MSVC&quot;; then</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineminus">-    AC_MSG_ERROR([Building ANGLE requires MSVC.  To build without ANGLE, reconfigure with --disable-angle.])</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineminus">-  fi</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineminus">-</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(webgl,</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineplus">+[  --disable-webgl     Disable building of the WebGL implementation],</span>
<a href="#l2.43"></a><span id="l2.43" class="difflineplus">+    MOZ_WEBGL_DISABLED=1,</span>
<a href="#l2.44"></a><span id="l2.44" class="difflineplus">+    MOZ_WEBGL_DISABLED=)</span>
<a href="#l2.45"></a><span id="l2.45" class="difflineplus">+</span>
<a href="#l2.46"></a><span id="l2.46" class="difflineplus">+if test -n &quot;$MOZ_WEBGL_DISABLED&quot;; then</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineplus">+  MOZ_WEBGL=</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineplus">+  MOZ_ANGLE_RENDERER=</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineplus">+fi</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineplus">+</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineplus">+if test -n &quot;$MOZ_ANGLE_RENDERER&quot; -a -z &quot;$CROSS_COMPILE&quot;; then</span>
<a href="#l2.52"></a><span id="l2.52">   # Get the SDK path from the registry.</span>
<a href="#l2.53"></a><span id="l2.53">   # First try to get the June 2010 SDK</span>
<a href="#l2.54"></a><span id="l2.54">   MOZ_DIRECTX_SDK_REG_KEY=`reg query 'HKLM\Software\Microsoft\DirectX' //s | grep 'Microsoft DirectX SDK (June 2010)' | head -n 1`</span>
<a href="#l2.55"></a><span id="l2.55">   if test -z &quot;$MOZ_DIRECTX_SDK_REG_KEY&quot; ; then</span>
<a href="#l2.56"></a><span id="l2.56">     # Otherwise just take whatever comes first</span>
<a href="#l2.57"></a><span id="l2.57">     MOZ_DIRECTX_SDK_REG_KEY=`reg query 'HKLM\Software\Microsoft\DirectX' //s | grep 'Microsoft DirectX SDK' | head -n 1`</span>
<a href="#l2.58"></a><span id="l2.58">   fi</span>
<a href="#l2.59"></a><span id="l2.59"> </span>
<a href="#l2.60"></a><span id="l2.60">   if test -n &quot;`echo $MOZ_DIRECTX_SDK_REG_KEY | grep 'February 2010'`&quot; ; then</span>
<a href="#l2.61"></a><span id="l2.61" class="difflineminus">-    AC_MSG_ERROR([Found the February 2010 DirectX SDK. This is too old. We now require the June 2010 DirectX SDK, or newer.  Upgrade your SDK or to explicitly build without ANGLE, reconfigure with --disable-angle.])</span>
<a href="#l2.62"></a><span id="l2.62" class="difflineplus">+    AC_MSG_ERROR([Found the February 2010 DirectX SDK. Need the June 2010 DirectX SDK, or newer.  Upgrade your SDK or reconfigure with --disable-webgl.])</span>
<a href="#l2.63"></a><span id="l2.63">   else</span>
<a href="#l2.64"></a><span id="l2.64" class="difflineminus">-    MOZ_DIRECTX_SDK_PATH=`reg query &quot;$MOZ_DIRECTX_SDK_REG_KEY&quot; //v InstallPath | grep REG_SZ | sed 's/.*\([[a-zA-Z]]\)\\:\\\\/\\1\\:\\\\/'`</span>
<a href="#l2.65"></a><span id="l2.65" class="difflineplus">+    MOZ_DIRECTX_SDK_PATH=`reg query &quot;$MOZ_DIRECTX_SDK_REG_KEY&quot; //v InstallPath | grep REG_SZ | sed 's/.*\([[a-zA-Z]]\)\\:\\\\/\\1\\:\\\\/' | sed 's,\\\\,/,g'`</span>
<a href="#l2.66"></a><span id="l2.66">   fi</span>
<a href="#l2.67"></a><span id="l2.67"> </span>
<a href="#l2.68"></a><span id="l2.68" class="difflineminus">-  MOZ_ANGLE_RENDERER=</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineminus">-</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineminus">-  if test -n &quot;$MOZ_DIRECTX_SDK_PATH&quot; ; then</span>
<a href="#l2.71"></a><span id="l2.71" class="difflineminus">-    if test -f &quot;$MOZ_DIRECTX_SDK_PATH&quot;/include/d3dx9.h &amp;&amp; test -f &quot;$MOZ_DIRECTX_SDK_PATH&quot;/lib/$MOZ_DIRECTX_SDK_CPU_SUFFIX/dxguid.lib ; then</span>
<a href="#l2.72"></a><span id="l2.72" class="difflineminus">-      AC_MSG_RESULT([Found DirectX SDK via registry, using $MOZ_DIRECTX_SDK_PATH])</span>
<a href="#l2.73"></a><span id="l2.73" class="difflineminus">-      MOZ_ANGLE_RENDERER=1</span>
<a href="#l2.74"></a><span id="l2.74" class="difflineminus">-    fi</span>
<a href="#l2.75"></a><span id="l2.75" class="difflineminus">-  fi</span>
<a href="#l2.76"></a><span id="l2.76" class="difflineminus">-</span>
<a href="#l2.77"></a><span id="l2.77" class="difflineminus">-  if test -z &quot;$MOZ_ANGLE_RENDERER&quot; ; then</span>
<a href="#l2.78"></a><span id="l2.78" class="difflineminus">-    AC_MSG_WARN([Couldn't find the DirectX SDK, needed for ANGLE. Please install it (June 2010 or newer). To explicitly build without ANGLE, reconfigure with --disable-angle.])</span>
<a href="#l2.79"></a><span id="l2.79" class="difflineminus">-    AC_MSG_WARN([This will become an error in the future.])</span>
<a href="#l2.80"></a><span id="l2.80" class="difflineplus">+  if test -n &quot;$MOZ_DIRECTX_SDK_PATH&quot; &amp;&amp;</span>
<a href="#l2.81"></a><span id="l2.81" class="difflineplus">+     test -f &quot;$MOZ_DIRECTX_SDK_PATH&quot;/include/d3dx9.h &amp;&amp;</span>
<a href="#l2.82"></a><span id="l2.82" class="difflineplus">+     test -f &quot;$MOZ_DIRECTX_SDK_PATH&quot;/lib/$MOZ_DIRECTX_SDK_CPU_SUFFIX/dxguid.lib ; then</span>
<a href="#l2.83"></a><span id="l2.83" class="difflineplus">+    AC_MSG_RESULT([Found DirectX SDK via registry, using $MOZ_DIRECTX_SDK_PATH])</span>
<a href="#l2.84"></a><span id="l2.84" class="difflineplus">+  else</span>
<a href="#l2.85"></a><span id="l2.85" class="difflineplus">+    AC_MSG_ERROR([Couldn't find the DirectX SDK, needed for WebGL. Either install it (June 2010 version or newer), or reconfigure with --disable-webgl.])</span>
<a href="#l2.86"></a><span id="l2.86">   fi</span>
<a href="#l2.87"></a><span id="l2.87"> </span>
<a href="#l2.88"></a><span id="l2.88" class="difflineminus">-  if test -n &quot;$MOZ_ANGLE_RENDERER&quot; ; then</span>
<a href="#l2.89"></a><span id="l2.89" class="difflineminus">-    # Get the SDK numeric version (e.g. 43) by looking at the dependencies of d3dx9.lib</span>
<a href="#l2.90"></a><span id="l2.90" class="difflineminus">-    MOZ_D3DX9_VERSION=`dumpbin //headers &quot;$MOZ_DIRECTX_SDK_PATH&quot;/lib/$MOZ_DIRECTX_SDK_CPU_SUFFIX/d3dx9.lib | egrep d3dx9_[[0-9]][[0-9]]\.dll | head -n1 | sed 's/.*\([[0-9]][[0-9]]\).*/\\1/g'`</span>
<a href="#l2.91"></a><span id="l2.91" class="difflineminus">-</span>
<a href="#l2.92"></a><span id="l2.92" class="difflineminus">-    if test -z &quot;$MOZ_D3DX9_VERSION&quot; ; then</span>
<a href="#l2.93"></a><span id="l2.93" class="difflineminus">-      MOZ_ANGLE_RENDERER=</span>
<a href="#l2.94"></a><span id="l2.94" class="difflineminus">-      AC_MSG_WARN([Couldn't determine the D3DX9 version! Disabling ANGLE.])</span>
<a href="#l2.95"></a><span id="l2.95" class="difflineminus">-      AC_MSG_WARN([This will become an error in the future.])</span>
<a href="#l2.96"></a><span id="l2.96" class="difflineminus">-    fi</span>
<a href="#l2.97"></a><span id="l2.97" class="difflineminus">-</span>
<a href="#l2.98"></a><span id="l2.98" class="difflineminus">-    if test -n &quot;$MOZ_ANGLE_RENDERER&quot; ; then</span>
<a href="#l2.99"></a><span id="l2.99" class="difflineminus">-      MOZ_D3DX9_CAB=`find &quot;$MOZ_DIRECTX_SDK_PATH&quot;/Redist -name *d3dx9_${MOZ_D3DX9_VERSION}_${MOZ_DIRECTX_SDK_CPU_SUFFIX}.cab | head -n1`</span>
<a href="#l2.100"></a><span id="l2.100" class="difflineminus">-      MOZ_D3DCOMPILER_CAB=`find &quot;$MOZ_DIRECTX_SDK_PATH&quot;/Redist -name *D3DCompiler_${MOZ_D3DX9_VERSION}_${MOZ_DIRECTX_SDK_CPU_SUFFIX}.cab | head -n1`</span>
<a href="#l2.101"></a><span id="l2.101" class="difflineminus">-</span>
<a href="#l2.102"></a><span id="l2.102" class="difflineminus">-      MOZ_D3DX9_DLL=d3dx9_$MOZ_D3DX9_VERSION.dll</span>
<a href="#l2.103"></a><span id="l2.103" class="difflineminus">-      MOZ_D3DCOMPILER_DLL=D3DCompiler_$MOZ_D3DX9_VERSION.dll</span>
<a href="#l2.104"></a><span id="l2.104" class="difflineminus">-    fi</span>
<a href="#l2.105"></a><span id="l2.105" class="difflineplus">+  # Get the SDK numeric version (e.g. 43) by looking at the dependencies of d3dx9.lib</span>
<a href="#l2.106"></a><span id="l2.106" class="difflineplus">+  MOZ_D3DX9_VERSION=`dumpbin //headers &quot;$MOZ_DIRECTX_SDK_PATH&quot;/lib/$MOZ_DIRECTX_SDK_CPU_SUFFIX/d3dx9.lib | egrep d3dx9_[[0-9]][[0-9]]\.dll | head -n1 | sed 's/.*\([[0-9]][[0-9]]\).*/\\1/g'`</span>
<a href="#l2.107"></a><span id="l2.107" class="difflineplus">+</span>
<a href="#l2.108"></a><span id="l2.108" class="difflineplus">+  if test -z &quot;$MOZ_D3DX9_VERSION&quot; ; then</span>
<a href="#l2.109"></a><span id="l2.109" class="difflineplus">+    AC_MSG_ERROR([Couldn't determine the D3DX9 version, needed for WebGL. Either reinstall the DirectX SDK (June 2010 version or newer), or reconfigure with --disable-webgl.])</span>
<a href="#l2.110"></a><span id="l2.110">   fi</span>
<a href="#l2.111"></a><span id="l2.111" class="difflineminus">-fi</span>
<a href="#l2.112"></a><span id="l2.112" class="difflineplus">+</span>
<a href="#l2.113"></a><span id="l2.113" class="difflineplus">+  MOZ_D3DX9_CAB=`find &quot;$MOZ_DIRECTX_SDK_PATH&quot;/Redist -name *d3dx9_${MOZ_D3DX9_VERSION}_${MOZ_DIRECTX_SDK_CPU_SUFFIX}.cab | head -n1`</span>
<a href="#l2.114"></a><span id="l2.114" class="difflineplus">+  MOZ_D3DCOMPILER_CAB=`find &quot;$MOZ_DIRECTX_SDK_PATH&quot;/Redist -name *D3DCompiler_${MOZ_D3DX9_VERSION}_${MOZ_DIRECTX_SDK_CPU_SUFFIX}.cab | head -n1`</span>
<a href="#l2.115"></a><span id="l2.115" class="difflineplus">+</span>
<a href="#l2.116"></a><span id="l2.116" class="difflineplus">+  if test -z &quot;$MOZ_D3DX9_CAB&quot; -o -z &quot;$MOZ_D3DCOMPILER_CAB&quot;; then</span>
<a href="#l2.117"></a><span id="l2.117" class="difflineplus">+    AC_MSG_ERROR([Couldn't find the DirectX redistributable files. Either reinstall the DirectX SDK (making sure the &quot;DirectX Redistributable Files&quot; option is selected), or reconfigure with --disable-webgl.])</span>
<a href="#l2.118"></a><span id="l2.118" class="difflineplus">+  fi</span>
<a href="#l2.119"></a><span id="l2.119" class="difflineplus">+</span>
<a href="#l2.120"></a><span id="l2.120" class="difflineplus">+  MOZ_D3DX9_DLL=d3dx9_$MOZ_D3DX9_VERSION.dll</span>
<a href="#l2.121"></a><span id="l2.121" class="difflineplus">+  MOZ_D3DCOMPILER_DLL=D3DCompiler_$MOZ_D3DX9_VERSION.dll</span>
<a href="#l2.122"></a><span id="l2.122"> fi</span>
<a href="#l2.123"></a><span id="l2.123"> </span>
<a href="#l2.124"></a><span id="l2.124"> dnl ========================================================</span>
<a href="#l2.125"></a><span id="l2.125"> dnl = Breakpad crash reporting (on by default on supported platforms)</span>
<a href="#l2.126"></a><span id="l2.126"> dnl ========================================================</span>
<a href="#l2.127"></a><span id="l2.127"> </span>
<a href="#l2.128"></a><span id="l2.128"> case $target in</span>
<a href="#l2.129"></a><span id="l2.129"> i?86-*-mingw*|x86_64-*-mingw*)</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

