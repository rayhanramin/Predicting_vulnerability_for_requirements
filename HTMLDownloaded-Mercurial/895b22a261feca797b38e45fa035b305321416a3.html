<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 5333:895b22a261feca797b38e45fa035b305321416a3</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 895b22a261feca797b38e45fa035b305321416a3" />
<meta property="og:url" content="/comm-central/rev/895b22a261feca797b38e45fa035b305321416a3" />
<meta property="og:description" content="Bug 492026 - Port |Bug 480069 - Recursive submakes without shell loops| to comm-central; (Av1a) Just copy it." />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 895b22a261feca797b38e45fa035b305321416a3 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/895b22a261feca797b38e45fa035b305321416a3">shortlog</a> |
<a href="/comm-central/log/895b22a261feca797b38e45fa035b305321416a3">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/895b22a261feca797b38e45fa035b305321416a3">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/895b22a261feca797b38e45fa035b305321416a3">files</a> |
changeset |
<a href="/comm-central/raw-rev/895b22a261feca797b38e45fa035b305321416a3">raw</a>  | <a href="/comm-central/archive/895b22a261feca797b38e45fa035b305321416a3.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=492026">Bug 492026</a> - Port |<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=480069">Bug 480069</a> - Recursive submakes without shell loops| to comm-central; (Av1a) Just copy it.
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#83;&#101;&#114;&#103;&#101;&#32;&#71;&#97;&#117;&#116;&#104;&#101;&#114;&#105;&#101;&#32;&#60;&#115;&#103;&#97;&#117;&#116;&#104;&#101;&#114;&#105;&#101;&#46;&#98;&#122;&#64;&#102;&#114;&#101;&#101;&#46;&#102;&#114;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 31 Mar 2010 16:11:32 +0200</td></tr>

<tr>
 <td>changeset 5333</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/895b22a261feca797b38e45fa035b305321416a3">895b22a261feca797b38e45fa035b305321416a3</a></td>
</tr>



<tr>
<td>parent 5332</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/8d802c091f7cb1dcd936dbc24e6e485a3d600b52">8d802c091f7cb1dcd936dbc24e6e485a3d600b52</a>
</td>
</tr>

<tr>
<td>child 5334</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/e6abb44166bddceca5ee6b938d278ea44039e831">e6abb44166bddceca5ee6b938d278ea44039e831</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=895b22a261feca797b38e45fa035b305321416a3">4109</a></td></tr>
<tr><td>push user</td><td>sgautherie.bz@free.fr</td></tr>
<tr><td>push date</td><td class="date age">Wed, 31 Mar 2010 14:12:05 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@895b22a261fe [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=895b22a261feca797b38e45fa035b305321416a3">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=895b22a261feca797b38e45fa035b305321416a3&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=895b22a261feca797b38e45fa035b305321416a3&newProject=comm-central&newRevision=895b22a261feca797b38e45fa035b305321416a3&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=895b22a261feca797b38e45fa035b305321416a3&newProject=comm-central&newRevision=895b22a261feca797b38e45fa035b305321416a3&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=895b22a261feca797b38e45fa035b305321416a3&newProject=comm-central&newRevision=895b22a261feca797b38e45fa035b305321416a3&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>

<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=492026">492026</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=480069">480069</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=492026">Bug 492026</a> - Port |<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=480069">Bug 480069</a> - Recursive submakes without shell loops| to comm-central; (Av1a) Just copy it.
r=Callek sr=standard8.</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/895b22a261feca797b38e45fa035b305321416a3/config/autoconf.mk.in">config/autoconf.mk.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/895b22a261feca797b38e45fa035b305321416a3/config/autoconf.mk.in">file</a> |
<a href="/comm-central/annotate/895b22a261feca797b38e45fa035b305321416a3/config/autoconf.mk.in">annotate</a> |
<a href="/comm-central/diff/895b22a261feca797b38e45fa035b305321416a3/config/autoconf.mk.in">diff</a> |
<a href="/comm-central/comparison/895b22a261feca797b38e45fa035b305321416a3/config/autoconf.mk.in">comparison</a> |
<a href="/comm-central/log/895b22a261feca797b38e45fa035b305321416a3/config/autoconf.mk.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/895b22a261feca797b38e45fa035b305321416a3/config/rules.mk">config/rules.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/895b22a261feca797b38e45fa035b305321416a3/config/rules.mk">file</a> |
<a href="/comm-central/annotate/895b22a261feca797b38e45fa035b305321416a3/config/rules.mk">annotate</a> |
<a href="/comm-central/diff/895b22a261feca797b38e45fa035b305321416a3/config/rules.mk">diff</a> |
<a href="/comm-central/comparison/895b22a261feca797b38e45fa035b305321416a3/config/rules.mk">comparison</a> |
<a href="/comm-central/log/895b22a261feca797b38e45fa035b305321416a3/config/rules.mk">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/config/autoconf.mk.in</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/config/autoconf.mk.in</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -344,17 +344,16 @@ PERL		= @PERL@</span>
<a href="#l1.4"></a><span id="l1.4"> PYTHON		= @PYTHON@</span>
<a href="#l1.5"></a><span id="l1.5"> RANLIB		= @RANLIB@</span>
<a href="#l1.6"></a><span id="l1.6"> WHOAMI		= @WHOAMI@</span>
<a href="#l1.7"></a><span id="l1.7"> UNZIP		= @UNZIP@</span>
<a href="#l1.8"></a><span id="l1.8"> ZIP		= @ZIP@</span>
<a href="#l1.9"></a><span id="l1.9"> XARGS		= @XARGS@</span>
<a href="#l1.10"></a><span id="l1.10"> STRIP		= @STRIP@</span>
<a href="#l1.11"></a><span id="l1.11"> DOXYGEN		= @DOXYGEN@</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-MAKE		= @MAKE@</span>
<a href="#l1.13"></a><span id="l1.13"> PBBUILD_BIN	= @PBBUILD@</span>
<a href="#l1.14"></a><span id="l1.14"> SDP		= @SDP@</span>
<a href="#l1.15"></a><span id="l1.15"> NSINSTALL_BIN	= @NSINSTALL_BIN@</span>
<a href="#l1.16"></a><span id="l1.16"> WGET		= @WGET@</span>
<a href="#l1.17"></a><span id="l1.17"> </span>
<a href="#l1.18"></a><span id="l1.18"> ifdef MOZ_NATIVE_JPEG</span>
<a href="#l1.19"></a><span id="l1.19"> JPEG_CFLAGS	= @JPEG_CFLAGS@</span>
<a href="#l1.20"></a><span id="l1.20"> JPEG_LIBS	= @JPEG_LIBS@</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/config/rules.mk</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/config/rules.mk</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -456,45 +456,44 @@ endif</span>
<a href="#l2.4"></a><span id="l2.4"> endif</span>
<a href="#l2.5"></a><span id="l2.5"> </span>
<a href="#l2.6"></a><span id="l2.6"> XPIDL_GEN_DIR		= _xpidlgen</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8"> ifdef MOZ_UPDATE_XTERM</span>
<a href="#l2.9"></a><span id="l2.9"> # Its good not to have a newline at the end of the titlebar string because it</span>
<a href="#l2.10"></a><span id="l2.10"> # makes the make -s output easier to read.  Echo -n does not work on all</span>
<a href="#l2.11"></a><span id="l2.11"> # platforms, but we can trick sed into doing it.</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-UPDATE_TITLE = sed -e &quot;s!Y!$@ in $(shell $(BUILD_TOOLS)/print-depth-path.sh)/$(dir)!&quot; $(MOZILLA_DIR)/config/xterm.str;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-UPDATE_TITLE_export = sed -e &quot;s!Y!export in $(shell $(BUILD_TOOLS)/print-depth-path.sh)/$*!&quot; $(MOZILLA_DIR)/config/xterm.str;</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-UPDATE_TITLE_libs = sed -e &quot;s!Y!libs in $(shell $(BUILD_TOOLS)/print-depth-path.sh)/$*!&quot; $(MOZILLA_DIR)/config/xterm.str;</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineminus">-UPDATE_TITLE_tools = sed -e &quot;s!Y!tools in $(shell $(BUILD_TOOLS)/print-depth-path.sh)/$*!&quot; $(MOZILLA_DIR)/config/xterm.str;</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineplus">+UPDATE_TITLE = sed -e &quot;s!Y!$(1) in $(shell $(BUILD_TOOLS)/print-depth-path.sh)/$(2)!&quot; $(MOZILLA_DIR)/config/xterm.str;</span>
<a href="#l2.17"></a><span id="l2.17"> endif</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+define SUBMAKE # $(call SUBMAKE,target,directory)</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineplus">+@$(UPDATE_TITLE)</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineplus">++@$(MAKE) $(if $(2),-C $(2)) $(1)</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineplus">+</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineplus">+endef # The extra line is important here! don't delete it</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineplus">+</span>
<a href="#l2.25"></a><span id="l2.25"> ifneq (,$(strip $(DIRS)))</span>
<a href="#l2.26"></a><span id="l2.26"> LOOP_OVER_DIRS = \</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineminus">-    @$(EXIT_ON_ERROR) \</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineminus">-    $(foreach dir,$(DIRS),$(UPDATE_TITLE) $(MAKE) -C $(dir) $@; )</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineplus">+  $(foreach dir,$(DIRS),$(call SUBMAKE,$@,$(dir)))</span>
<a href="#l2.30"></a><span id="l2.30"> endif</span>
<a href="#l2.31"></a><span id="l2.31"> </span>
<a href="#l2.32"></a><span id="l2.32"> # we only use this for the makefiles target and other stuff that doesn't matter</span>
<a href="#l2.33"></a><span id="l2.33"> ifneq (,$(strip $(PARALLEL_DIRS)))</span>
<a href="#l2.34"></a><span id="l2.34"> LOOP_OVER_PARALLEL_DIRS = \</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineminus">-    @$(EXIT_ON_ERROR) \</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineminus">-    $(foreach dir,$(PARALLEL_DIRS),$(UPDATE_TITLE) $(MAKE) -C $(dir) $@; )</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineplus">+  $(foreach dir,$(PARALLEL_DIRS),$(call SUBMAKE,$@,$(dir)))</span>
<a href="#l2.38"></a><span id="l2.38"> endif</span>
<a href="#l2.39"></a><span id="l2.39"> </span>
<a href="#l2.40"></a><span id="l2.40"> ifneq (,$(strip $(STATIC_DIRS)))</span>
<a href="#l2.41"></a><span id="l2.41"> LOOP_OVER_STATIC_DIRS = \</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineminus">-    @$(EXIT_ON_ERROR) \</span>
<a href="#l2.43"></a><span id="l2.43" class="difflineminus">-    $(foreach dir,$(STATIC_DIRS),$(UPDATE_TITLE) $(MAKE) -C $(dir) $@; )</span>
<a href="#l2.44"></a><span id="l2.44" class="difflineplus">+  $(foreach dir,$(STATIC_DIRS),$(call SUBMAKE,$@,$(dir)))</span>
<a href="#l2.45"></a><span id="l2.45"> endif</span>
<a href="#l2.46"></a><span id="l2.46"> </span>
<a href="#l2.47"></a><span id="l2.47"> ifneq (,$(strip $(TOOL_DIRS)))</span>
<a href="#l2.48"></a><span id="l2.48"> LOOP_OVER_TOOL_DIRS = \</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineminus">-    @$(EXIT_ON_ERROR) \</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineminus">-    $(foreach dir,$(TOOL_DIRS),$(UPDATE_TITLE) $(MAKE) -C $(dir) $@; )</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineplus">+  $(foreach dir,$(TOOL_DIRS),$(call SUBMAKE,$@,$(dir)))</span>
<a href="#l2.52"></a><span id="l2.52"> endif</span>
<a href="#l2.53"></a><span id="l2.53"> </span>
<a href="#l2.54"></a><span id="l2.54"> ifdef PARALLEL_DIRS</span>
<a href="#l2.55"></a><span id="l2.55"> # create a bunch of fake targets for order-only processing</span>
<a href="#l2.56"></a><span id="l2.56"> PARALLEL_DIRS_export = $(addsuffix _export,$(PARALLEL_DIRS))</span>
<a href="#l2.57"></a><span id="l2.57"> PARALLEL_DIRS_libs = $(addsuffix _libs,$(PARALLEL_DIRS))</span>
<a href="#l2.58"></a><span id="l2.58"> PARALLEL_DIRS_tools = $(addsuffix _tools,$(PARALLEL_DIRS))</span>
<a href="#l2.59"></a><span id="l2.59"> </span>
<a href="#l2.60"></a><span id="l2.60" class="difflineat">@@ -715,24 +714,22 @@ SUBMAKEFILES += $(addsuffix /Makefile, $</span>
<a href="#l2.61"></a><span id="l2.61"> </span>
<a href="#l2.62"></a><span id="l2.62"> # The root makefile doesn't want to do a plain export/libs, because</span>
<a href="#l2.63"></a><span id="l2.63"> # of the tiers and because of libxul. Suppress the default rules in favor</span>
<a href="#l2.64"></a><span id="l2.64"> # of something else. Makefiles which use this var *must* provide a sensible</span>
<a href="#l2.65"></a><span id="l2.65"> # default rule before including rules.mk</span>
<a href="#l2.66"></a><span id="l2.66"> ifndef SUPPRESS_DEFAULT_RULES</span>
<a href="#l2.67"></a><span id="l2.67"> ifdef TIERS</span>
<a href="#l2.68"></a><span id="l2.68"> default all alldep::</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineminus">-	$(EXIT_ON_ERROR) \</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineminus">-	$(foreach tier,$(TIERS),$(MAKE) tier_$(tier); ) true</span>
<a href="#l2.71"></a><span id="l2.71" class="difflineminus">-</span>
<a href="#l2.72"></a><span id="l2.72" class="difflineplus">+	$(foreach tier,$(TIERS),$(call SUBMAKE,tier_$(tier)))</span>
<a href="#l2.73"></a><span id="l2.73"> else</span>
<a href="#l2.74"></a><span id="l2.74"> </span>
<a href="#l2.75"></a><span id="l2.75"> default all::</span>
<a href="#l2.76"></a><span id="l2.76"> ifneq (,$(strip $(STATIC_DIRS)))</span>
<a href="#l2.77"></a><span id="l2.77" class="difflineminus">-	$(foreach dir,$(STATIC_DIRS),$(MAKE) -C $(dir); )</span>
<a href="#l2.78"></a><span id="l2.78" class="difflineplus">+	$(foreach dir,$(STATIC_DIRS),$(call SUBMAKE,,$(dir)))</span>
<a href="#l2.79"></a><span id="l2.79"> endif</span>
<a href="#l2.80"></a><span id="l2.80"> 	$(MAKE) export</span>
<a href="#l2.81"></a><span id="l2.81"> 	$(MAKE) libs</span>
<a href="#l2.82"></a><span id="l2.82"> 	$(MAKE) tools</span>
<a href="#l2.83"></a><span id="l2.83"> </span>
<a href="#l2.84"></a><span id="l2.84"> # Do depend as well</span>
<a href="#l2.85"></a><span id="l2.85"> alldep:: </span>
<a href="#l2.86"></a><span id="l2.86"> 	$(MAKE) export</span>
<a href="#l2.87"></a><span id="l2.87" class="difflineat">@@ -748,96 +745,75 @@ ECHO := echo</span>
<a href="#l2.88"></a><span id="l2.88"> QUIET :=</span>
<a href="#l2.89"></a><span id="l2.89"> else</span>
<a href="#l2.90"></a><span id="l2.90"> ECHO := true</span>
<a href="#l2.91"></a><span id="l2.91"> QUIET := -q</span>
<a href="#l2.92"></a><span id="l2.92"> endif</span>
<a href="#l2.93"></a><span id="l2.93"> </span>
<a href="#l2.94"></a><span id="l2.94"> MAKE_TIER_SUBMAKEFILES = +$(if $(tier_$*_dirs),$(MAKE) $(addsuffix /Makefile,$(tier_$*_dirs)))</span>
<a href="#l2.95"></a><span id="l2.95"> </span>
<a href="#l2.96"></a><span id="l2.96" class="difflineminus">-export_tier_%: </span>
<a href="#l2.97"></a><span id="l2.97" class="difflineplus">+export_tier_%:</span>
<a href="#l2.98"></a><span id="l2.98"> 	@$(ECHO) &quot;$@&quot;</span>
<a href="#l2.99"></a><span id="l2.99"> 	@$(MAKE_TIER_SUBMAKEFILES)</span>
<a href="#l2.100"></a><span id="l2.100" class="difflineminus">-	@$(EXIT_ON_ERROR) \</span>
<a href="#l2.101"></a><span id="l2.101" class="difflineminus">-	$(foreach dir,$(tier_$*_dirs),$(MAKE) -C $(dir) export; ) true</span>
<a href="#l2.102"></a><span id="l2.102" class="difflineplus">+	$(foreach dir,$(tier_$*_dirs),$(call SUBMAKE,export,$(dir)))</span>
<a href="#l2.103"></a><span id="l2.103"> </span>
<a href="#l2.104"></a><span id="l2.104"> libs_tier_%:</span>
<a href="#l2.105"></a><span id="l2.105"> 	@$(ECHO) &quot;$@&quot;</span>
<a href="#l2.106"></a><span id="l2.106"> 	@$(MAKE_TIER_SUBMAKEFILES)</span>
<a href="#l2.107"></a><span id="l2.107" class="difflineminus">-	@$(EXIT_ON_ERROR) \</span>
<a href="#l2.108"></a><span id="l2.108" class="difflineminus">-	$(foreach dir,$(tier_$*_dirs),$(MAKE) -C $(dir) libs; ) true</span>
<a href="#l2.109"></a><span id="l2.109" class="difflineplus">+	$(foreach dir,$(tier_$*_dirs),$(call SUBMAKE,libs,$(dir)))</span>
<a href="#l2.110"></a><span id="l2.110"> </span>
<a href="#l2.111"></a><span id="l2.111"> tools_tier_%:</span>
<a href="#l2.112"></a><span id="l2.112"> 	@$(ECHO) &quot;$@&quot;</span>
<a href="#l2.113"></a><span id="l2.113"> 	@$(MAKE_TIER_SUBMAKEFILES)</span>
<a href="#l2.114"></a><span id="l2.114" class="difflineminus">-	@$(EXIT_ON_ERROR) \</span>
<a href="#l2.115"></a><span id="l2.115" class="difflineminus">-	$(foreach dir,$(tier_$*_dirs),$(MAKE) -C $(dir) tools; ) true</span>
<a href="#l2.116"></a><span id="l2.116" class="difflineplus">+	$(foreach dir,$(tier_$*_dirs),$(call SUBMAKE,tools,$(dir)))</span>
<a href="#l2.117"></a><span id="l2.117"> </span>
<a href="#l2.118"></a><span id="l2.118"> $(foreach tier,$(TIERS),tier_$(tier))::</span>
<a href="#l2.119"></a><span id="l2.119"> 	@$(ECHO) &quot;$@: $($@_staticdirs) $($@_dirs)&quot;</span>
<a href="#l2.120"></a><span id="l2.120" class="difflineminus">-	@$(EXIT_ON_ERROR) \</span>
<a href="#l2.121"></a><span id="l2.121" class="difflineminus">-	$(foreach dir,$($@_staticdirs),$(MAKE) -C $(dir); ) true</span>
<a href="#l2.122"></a><span id="l2.122" class="difflineplus">+	$(foreach dir,$($@_staticdirs),$(call SUBMAKE,,$(dir)))</span>
<a href="#l2.123"></a><span id="l2.123"> 	$(MAKE) export_$@</span>
<a href="#l2.124"></a><span id="l2.124"> 	$(MAKE) libs_$@</span>
<a href="#l2.125"></a><span id="l2.125"> </span>
<a href="#l2.126"></a><span id="l2.126"> # Do everything from scratch</span>
<a href="#l2.127"></a><span id="l2.127"> everything::</span>
<a href="#l2.128"></a><span id="l2.128"> 	$(MAKE) clean</span>
<a href="#l2.129"></a><span id="l2.129"> 	$(MAKE) alldep</span>
<a href="#l2.130"></a><span id="l2.130"> </span>
<a href="#l2.131"></a><span id="l2.131"> # Add dummy depend target for tinderboxes</span>
<a href="#l2.132"></a><span id="l2.132"> depend::</span>
<a href="#l2.133"></a><span id="l2.133"> </span>
<a href="#l2.134"></a><span id="l2.134" class="difflineminus">-ifdef ALL_PLATFORMS</span>
<a href="#l2.135"></a><span id="l2.135" class="difflineminus">-all_platforms:: $(NFSPWD)</span>
<a href="#l2.136"></a><span id="l2.136" class="difflineminus">-	@d=`$(NFSPWD)`;							\</span>
<a href="#l2.137"></a><span id="l2.137" class="difflineminus">-	if test ! -d LOGS; then rm -rf LOGS; mkdir LOGS; else true; fi;	\</span>
<a href="#l2.138"></a><span id="l2.138" class="difflineminus">-	for h in $(PLATFORM_HOSTS); do					\</span>
<a href="#l2.139"></a><span id="l2.139" class="difflineminus">-		echo &quot;On $$h: $(MAKE) $(ALL_PLATFORMS) &gt;&amp; LOGS/$$h.log&quot;;\</span>
<a href="#l2.140"></a><span id="l2.140" class="difflineminus">-		rsh $$h -n &quot;(chdir $$d;					\</span>
<a href="#l2.141"></a><span id="l2.141" class="difflineminus">-			     $(MAKE) $(ALL_PLATFORMS) &gt;&amp; LOGS/$$h.log;	\</span>
<a href="#l2.142"></a><span id="l2.142" class="difflineminus">-			     echo DONE) &amp;&quot; 2&gt;&amp;1 &gt; LOGS/$$h.pid &amp;	\</span>
<a href="#l2.143"></a><span id="l2.143" class="difflineminus">-		sleep 1;						\</span>
<a href="#l2.144"></a><span id="l2.144" class="difflineminus">-	done</span>
<a href="#l2.145"></a><span id="l2.145" class="difflineminus">-</span>
<a href="#l2.146"></a><span id="l2.146" class="difflineminus">-$(NFSPWD):</span>
<a href="#l2.147"></a><span id="l2.147" class="difflineminus">-	cd $(@D); $(MAKE) $(@F)</span>
<a href="#l2.148"></a><span id="l2.148" class="difflineminus">-endif</span>
<a href="#l2.149"></a><span id="l2.149" class="difflineminus">-</span>
<a href="#l2.150"></a><span id="l2.150"> # Target to only regenerate makefiles</span>
<a href="#l2.151"></a><span id="l2.151"> makefiles: $(SUBMAKEFILES)</span>
<a href="#l2.152"></a><span id="l2.152"> ifneq (,$(DIRS)$(TOOL_DIRS)$(PARALLEL_DIRS))</span>
<a href="#l2.153"></a><span id="l2.153" class="difflineminus">-	+$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.154"></a><span id="l2.154" class="difflineminus">-	+$(LOOP_OVER_DIRS)</span>
<a href="#l2.155"></a><span id="l2.155" class="difflineminus">-	+$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l2.156"></a><span id="l2.156" class="difflineplus">+	$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.157"></a><span id="l2.157" class="difflineplus">+	$(LOOP_OVER_DIRS)</span>
<a href="#l2.158"></a><span id="l2.158" class="difflineplus">+	$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l2.159"></a><span id="l2.159"> endif</span>
<a href="#l2.160"></a><span id="l2.160"> </span>
<a href="#l2.161"></a><span id="l2.161"> ifdef PARALLEL_DIRS</span>
<a href="#l2.162"></a><span id="l2.162"> export:: $(PARALLEL_DIRS_export)</span>
<a href="#l2.163"></a><span id="l2.163"> </span>
<a href="#l2.164"></a><span id="l2.164"> $(PARALLEL_DIRS_export): %_export: %/Makefile</span>
<a href="#l2.165"></a><span id="l2.165" class="difflineminus">-	+@$(UPDATE_TITLE_export) $(MAKE) -C $* export</span>
<a href="#l2.166"></a><span id="l2.166" class="difflineplus">+	+@$(call SUBMAKE,export,$*)</span>
<a href="#l2.167"></a><span id="l2.167"> endif</span>
<a href="#l2.168"></a><span id="l2.168"> </span>
<a href="#l2.169"></a><span id="l2.169"> export:: $(SUBMAKEFILES) $(MAKE_DIRS) $(if $(EXPORTS)$(XPIDLSRCS)$(SDK_HEADERS)$(SDK_XPIDLSRCS),$(PUBLIC)) $(if $(SDK_HEADERS)$(SDK_XPIDLSRCS),$(SDK_PUBLIC)) $(if $(XPIDLSRCS),$(IDL_DIR)) $(if $(SDK_XPIDLSRCS),$(SDK_IDL_DIR))</span>
<a href="#l2.170"></a><span id="l2.170" class="difflineminus">-	+$(LOOP_OVER_DIRS)</span>
<a href="#l2.171"></a><span id="l2.171" class="difflineminus">-	+$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l2.172"></a><span id="l2.172" class="difflineplus">+	$(LOOP_OVER_DIRS)</span>
<a href="#l2.173"></a><span id="l2.173" class="difflineplus">+	$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l2.174"></a><span id="l2.174"> </span>
<a href="#l2.175"></a><span id="l2.175"> ifdef PARALLEL_DIRS</span>
<a href="#l2.176"></a><span id="l2.176"> tools:: $(PARALLEL_DIRS_tools)</span>
<a href="#l2.177"></a><span id="l2.177"> </span>
<a href="#l2.178"></a><span id="l2.178"> $(PARALLEL_DIRS_tools): %_tools: %/Makefile</span>
<a href="#l2.179"></a><span id="l2.179" class="difflineminus">-	+@$(UPDATE_TITLE_tools) $(MAKE) -C $* tools</span>
<a href="#l2.180"></a><span id="l2.180" class="difflineplus">+	+@$(call SUBMAKE,tools,$*)</span>
<a href="#l2.181"></a><span id="l2.181"> endif</span>
<a href="#l2.182"></a><span id="l2.182"> </span>
<a href="#l2.183"></a><span id="l2.183"> tools:: $(SUBMAKEFILES) $(MAKE_DIRS)</span>
<a href="#l2.184"></a><span id="l2.184" class="difflineminus">-	+$(LOOP_OVER_DIRS)</span>
<a href="#l2.185"></a><span id="l2.185" class="difflineplus">+	$(LOOP_OVER_DIRS)</span>
<a href="#l2.186"></a><span id="l2.186"> ifneq (,$(strip $(TOOL_DIRS)))</span>
<a href="#l2.187"></a><span id="l2.187" class="difflineminus">-	@$(EXIT_ON_ERROR) \</span>
<a href="#l2.188"></a><span id="l2.188" class="difflineminus">-	$(foreach dir,$(TOOL_DIRS),$(UPDATE_TITLE) $(MAKE) -C $(dir) libs; )</span>
<a href="#l2.189"></a><span id="l2.189" class="difflineplus">+	$(foreach dir,$(TOOL_DIRS),$(call SUBMAKE,libs,$(dir)))</span>
<a href="#l2.190"></a><span id="l2.190"> endif</span>
<a href="#l2.191"></a><span id="l2.191"> </span>
<a href="#l2.192"></a><span id="l2.192"> #</span>
<a href="#l2.193"></a><span id="l2.193"> # Rule to create list of libraries for final link</span>
<a href="#l2.194"></a><span id="l2.194"> #</span>
<a href="#l2.195"></a><span id="l2.195"> export::</span>
<a href="#l2.196"></a><span id="l2.196"> ifdef LIBRARY_NAME</span>
<a href="#l2.197"></a><span id="l2.197"> ifdef EXPORT_LIBRARY</span>
<a href="#l2.198"></a><span id="l2.198" class="difflineat">@@ -893,17 +869,17 @@ endif # ! MOZILLA_1_9_2_BRANCH</span>
<a href="#l2.199"></a><span id="l2.199"> # Dependencies which, if modified, should cause everything to rebuild</span>
<a href="#l2.200"></a><span id="l2.200"> GLOBAL_DEPS += Makefile Makefile.in $(DEPTH)/config/autoconf.mk $(topsrcdir)/config/config.mk</span>
<a href="#l2.201"></a><span id="l2.201"> </span>
<a href="#l2.202"></a><span id="l2.202"> ##############################################</span>
<a href="#l2.203"></a><span id="l2.203"> ifdef PARALLEL_DIRS</span>
<a href="#l2.204"></a><span id="l2.204"> libs:: $(PARALLEL_DIRS_libs)</span>
<a href="#l2.205"></a><span id="l2.205"> </span>
<a href="#l2.206"></a><span id="l2.206"> $(PARALLEL_DIRS_libs): %_libs: %/Makefile</span>
<a href="#l2.207"></a><span id="l2.207" class="difflineminus">-	+@$(UPDATE_TITLE_libs) $(MAKE) -C $* libs</span>
<a href="#l2.208"></a><span id="l2.208" class="difflineplus">+	+@$(call SUBMAKE,libs,$*)</span>
<a href="#l2.209"></a><span id="l2.209"> endif</span>
<a href="#l2.210"></a><span id="l2.210"> </span>
<a href="#l2.211"></a><span id="l2.211"> libs:: $(SUBMAKEFILES) $(MAKE_DIRS) $(HOST_LIBRARY) $(LIBRARY) $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(HOST_PROGRAM) $(PROGRAM) $(HOST_SIMPLE_PROGRAMS) $(SIMPLE_PROGRAMS)</span>
<a href="#l2.212"></a><span id="l2.212"> ifndef NO_DIST_INSTALL</span>
<a href="#l2.213"></a><span id="l2.213"> ifdef LIBRARY</span>
<a href="#l2.214"></a><span id="l2.214"> ifdef EXPORT_LIBRARY # Stage libs that will be linked into a static build</span>
<a href="#l2.215"></a><span id="l2.215"> ifdef IS_COMPONENT</span>
<a href="#l2.216"></a><span id="l2.216"> 	$(INSTALL) $(IFLAGS1) $(LIBRARY) $(MOZDEPTH)/staticlib/components</span>
<a href="#l2.217"></a><span id="l2.217" class="difflineat">@@ -954,17 +930,17 @@ ifdef HOST_PROGRAM</span>
<a href="#l2.218"></a><span id="l2.218"> endif</span>
<a href="#l2.219"></a><span id="l2.219"> ifdef HOST_SIMPLE_PROGRAMS</span>
<a href="#l2.220"></a><span id="l2.220"> 	$(INSTALL) $(IFLAGS2) $(HOST_SIMPLE_PROGRAMS) $(DIST)/host/bin</span>
<a href="#l2.221"></a><span id="l2.221"> endif</span>
<a href="#l2.222"></a><span id="l2.222"> ifdef HOST_LIBRARY</span>
<a href="#l2.223"></a><span id="l2.223"> 	$(INSTALL) $(IFLAGS1) $(HOST_LIBRARY) $(DIST)/host/lib</span>
<a href="#l2.224"></a><span id="l2.224"> endif</span>
<a href="#l2.225"></a><span id="l2.225"> endif # !NO_DIST_INSTALL</span>
<a href="#l2.226"></a><span id="l2.226" class="difflineminus">-	+$(LOOP_OVER_DIRS)</span>
<a href="#l2.227"></a><span id="l2.227" class="difflineplus">+	$(LOOP_OVER_DIRS)</span>
<a href="#l2.228"></a><span id="l2.228"> </span>
<a href="#l2.229"></a><span id="l2.229"> ##############################################</span>
<a href="#l2.230"></a><span id="l2.230"> </span>
<a href="#l2.231"></a><span id="l2.231"> ifndef NO_PROFILE_GUIDED_OPTIMIZE</span>
<a href="#l2.232"></a><span id="l2.232"> ifdef MOZ_PROFILE_USE</span>
<a href="#l2.233"></a><span id="l2.233"> ifeq ($(OS_ARCH)_$(GNU_CC)$(INTERNAL_TOOLS), WINNT_)</span>
<a href="#l2.234"></a><span id="l2.234"> # When building with PGO, we have to make sure to re-link</span>
<a href="#l2.235"></a><span id="l2.235"> # in the MOZ_PROFILE_USE phase if we linked in the</span>
<a href="#l2.236"></a><span id="l2.236" class="difflineat">@@ -999,26 +975,20 @@ endif # NO_PROFILE_GUIDED_OPTIMIZE</span>
<a href="#l2.237"></a><span id="l2.237"> ##############################################</span>
<a href="#l2.238"></a><span id="l2.238"> </span>
<a href="#l2.239"></a><span id="l2.239"> checkout:</span>
<a href="#l2.240"></a><span id="l2.240"> 	$(PYTHON) $(topsrcdir)/client.py checkout</span>
<a href="#l2.241"></a><span id="l2.241"> </span>
<a href="#l2.242"></a><span id="l2.242"> clean clobber realclean clobber_all:: $(SUBMAKEFILES)</span>
<a href="#l2.243"></a><span id="l2.243"> 	-rm -f $(ALL_TRASH)</span>
<a href="#l2.244"></a><span id="l2.244"> 	-rm -rf $(ALL_TRASH_DIRS)</span>
<a href="#l2.245"></a><span id="l2.245" class="difflineminus">-	+-$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.246"></a><span id="l2.246" class="difflineminus">-	+-$(LOOP_OVER_DIRS)</span>
<a href="#l2.247"></a><span id="l2.247" class="difflineminus">-	+-$(LOOP_OVER_STATIC_DIRS)</span>
<a href="#l2.248"></a><span id="l2.248" class="difflineminus">-	+-$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l2.249"></a><span id="l2.249" class="difflineplus">+	$(foreach dir,$(PARALLEL_DIRS) $(DIRS) $(STATIC_DIRS) $(TOOL_DIRS),-$(call SUBMAKE,$@,$(dir)))</span>
<a href="#l2.250"></a><span id="l2.250"> </span>
<a href="#l2.251"></a><span id="l2.251"> distclean:: $(SUBMAKEFILES)</span>
<a href="#l2.252"></a><span id="l2.252" class="difflineminus">-	+-$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.253"></a><span id="l2.253" class="difflineminus">-	+-$(LOOP_OVER_DIRS)</span>
<a href="#l2.254"></a><span id="l2.254" class="difflineminus">-	+-$(LOOP_OVER_STATIC_DIRS)</span>
<a href="#l2.255"></a><span id="l2.255" class="difflineminus">-	+-$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l2.256"></a><span id="l2.256" class="difflineplus">+	$(foreach dir,$(PARALLEL_DIRS) $(DIRS) $(STATIC_DIRS) $(TOOL_DIRS),-$(call SUBMAKE,$@,$(dir)))</span>
<a href="#l2.257"></a><span id="l2.257"> 	-rm -rf $(ALL_TRASH_DIRS) </span>
<a href="#l2.258"></a><span id="l2.258"> 	-rm -f $(ALL_TRASH)  \</span>
<a href="#l2.259"></a><span id="l2.259"> 	Makefile .HSancillary \</span>
<a href="#l2.260"></a><span id="l2.260"> 	$(wildcard *.$(OBJ_SUFFIX)) $(wildcard *.ho) $(wildcard host_*.o*) \</span>
<a href="#l2.261"></a><span id="l2.261"> 	$(wildcard *.$(LIB_SUFFIX)) $(wildcard *$(DLL_SUFFIX)) \</span>
<a href="#l2.262"></a><span id="l2.262"> 	$(wildcard *.$(IMPORT_LIB_SUFFIX))</span>
<a href="#l2.263"></a><span id="l2.263"> ifeq ($(OS_ARCH),OS2)</span>
<a href="#l2.264"></a><span id="l2.264"> 	-rm -f $(PROGRAM:.exe=.map)</span>
<a href="#l2.265"></a><span id="l2.265" class="difflineat">@@ -1430,17 +1400,17 @@ host_%.$(OBJ_SUFFIX): %.cc $(GLOBAL_DEPS</span>
<a href="#l2.266"></a><span id="l2.266"> host_%.$(OBJ_SUFFIX): %.m $(GLOBAL_DEPS)</span>
<a href="#l2.267"></a><span id="l2.267"> 	$(REPORT_BUILD)</span>
<a href="#l2.268"></a><span id="l2.268"> 	$(ELOG) $(HOST_CC) $(HOST_OUTOPTION)$@ -c $(HOST_CFLAGS) $(HOST_CMFLAGS) $(INCLUDES) $(NSPR_CFLAGS) $(_VPATH_SRCS)</span>
<a href="#l2.269"></a><span id="l2.269"> </span>
<a href="#l2.270"></a><span id="l2.270"> host_%.$(OBJ_SUFFIX): %.mm $(GLOBAL_DEPS)</span>
<a href="#l2.271"></a><span id="l2.271"> 	$(REPORT_BUILD)</span>
<a href="#l2.272"></a><span id="l2.272"> 	$(ELOG) $(HOST_CXX) $(HOST_OUTOPTION)$@ -c $(HOST_CXXFLAGS) $(HOST_CMMFLAGS) $(INCLUDES) $(NSPR_CFLAGS) $(_VPATH_SRCS)</span>
<a href="#l2.273"></a><span id="l2.273"> </span>
<a href="#l2.274"></a><span id="l2.274" class="difflineminus">-%: %.c $(GLOBAL_DEPS)</span>
<a href="#l2.275"></a><span id="l2.275" class="difflineplus">+%:: %.c $(GLOBAL_DEPS)</span>
<a href="#l2.276"></a><span id="l2.276"> 	$(REPORT_BUILD)</span>
<a href="#l2.277"></a><span id="l2.277"> 	@$(MAKE_DEPS_AUTO_CC)</span>
<a href="#l2.278"></a><span id="l2.278"> 	$(ELOG) $(CC) $(CFLAGS) $(LDFLAGS) $(OUTOPTION)$@ $(_VPATH_SRCS)</span>
<a href="#l2.279"></a><span id="l2.279"> </span>
<a href="#l2.280"></a><span id="l2.280"> %.$(OBJ_SUFFIX): %.c $(GLOBAL_DEPS)</span>
<a href="#l2.281"></a><span id="l2.281"> 	$(REPORT_BUILD)</span>
<a href="#l2.282"></a><span id="l2.282"> 	@$(MAKE_DEPS_AUTO_CC)</span>
<a href="#l2.283"></a><span id="l2.283"> 	$(ELOG) $(CC) $(OUTOPTION)$@ -c $(COMPILE_CFLAGS) $(_VPATH_SRCS)</span>
<a href="#l2.284"></a><span id="l2.284" class="difflineat">@@ -1450,17 +1420,17 @@ ifdef ASFILES</span>
<a href="#l2.285"></a><span id="l2.285"> # a '-c' flag.</span>
<a href="#l2.286"></a><span id="l2.286"> %.$(OBJ_SUFFIX): %.$(ASM_SUFFIX) $(GLOBAL_DEPS)</span>
<a href="#l2.287"></a><span id="l2.287"> 	$(AS) -o $@ $(ASFLAGS) $(AS_DASH_C_FLAG) $(_VPATH_SRCS)</span>
<a href="#l2.288"></a><span id="l2.288"> endif</span>
<a href="#l2.289"></a><span id="l2.289"> </span>
<a href="#l2.290"></a><span id="l2.290"> %.$(OBJ_SUFFIX): %.S $(GLOBAL_DEPS)</span>
<a href="#l2.291"></a><span id="l2.291"> 	$(AS) -o $@ $(ASFLAGS) -c $&lt;</span>
<a href="#l2.292"></a><span id="l2.292"> </span>
<a href="#l2.293"></a><span id="l2.293" class="difflineminus">-%: %.cpp $(GLOBAL_DEPS)</span>
<a href="#l2.294"></a><span id="l2.294" class="difflineplus">+%:: %.cpp $(GLOBAL_DEPS)</span>
<a href="#l2.295"></a><span id="l2.295"> 	@$(MAKE_DEPS_AUTO_CXX)</span>
<a href="#l2.296"></a><span id="l2.296"> 	$(CCC) $(OUTOPTION)$@ $(CXXFLAGS) $(_VPATH_SRCS) $(LDFLAGS)</span>
<a href="#l2.297"></a><span id="l2.297"> </span>
<a href="#l2.298"></a><span id="l2.298"> #</span>
<a href="#l2.299"></a><span id="l2.299"> # Please keep the next two rules in sync.</span>
<a href="#l2.300"></a><span id="l2.300"> #</span>
<a href="#l2.301"></a><span id="l2.301"> %.$(OBJ_SUFFIX): %.cc $(GLOBAL_DEPS)</span>
<a href="#l2.302"></a><span id="l2.302"> 	$(REPORT_BUILD)</span>
<a href="#l2.303"></a><span id="l2.303" class="difflineat">@@ -1517,22 +1487,22 @@ else</span>
<a href="#l2.304"></a><span id="l2.304"> ifdef GNU_CC</span>
<a href="#l2.305"></a><span id="l2.305"> 	$(RC) $(RCFLAGS) $(filter-out -U%,$(DEFINES)) $(INCLUDES:-I%=--include-dir %) $(OUTOPTION)$@ $(_VPATH_SRCS)</span>
<a href="#l2.306"></a><span id="l2.306"> else</span>
<a href="#l2.307"></a><span id="l2.307"> 	$(RC) $(RCFLAGS) -r $(DEFINES) $(INCLUDES) $(OUTOPTION)$@ $(_VPATH_SRCS)</span>
<a href="#l2.308"></a><span id="l2.308"> endif</span>
<a href="#l2.309"></a><span id="l2.309"> endif</span>
<a href="#l2.310"></a><span id="l2.310"> </span>
<a href="#l2.311"></a><span id="l2.311"> # need 3 separate lines for OS/2</span>
<a href="#l2.312"></a><span id="l2.312" class="difflineminus">-%: %.pl</span>
<a href="#l2.313"></a><span id="l2.313" class="difflineplus">+%:: %.pl</span>
<a href="#l2.314"></a><span id="l2.314"> 	rm -f $@</span>
<a href="#l2.315"></a><span id="l2.315"> 	cp $&lt; $@</span>
<a href="#l2.316"></a><span id="l2.316"> 	chmod +x $@</span>
<a href="#l2.317"></a><span id="l2.317"> </span>
<a href="#l2.318"></a><span id="l2.318" class="difflineminus">-%: %.sh</span>
<a href="#l2.319"></a><span id="l2.319" class="difflineplus">+%:: %.sh</span>
<a href="#l2.320"></a><span id="l2.320"> 	rm -f $@; cp $&lt; $@; chmod +x $@</span>
<a href="#l2.321"></a><span id="l2.321"> </span>
<a href="#l2.322"></a><span id="l2.322"> # Cancel these implicit rules</span>
<a href="#l2.323"></a><span id="l2.323"> #</span>
<a href="#l2.324"></a><span id="l2.324"> %: %,v</span>
<a href="#l2.325"></a><span id="l2.325"> </span>
<a href="#l2.326"></a><span id="l2.326"> %: RCS/%,v</span>
<a href="#l2.327"></a><span id="l2.327"> </span>
<a href="#l2.328"></a><span id="l2.328" class="difflineat">@@ -1736,19 +1706,19 @@ endif # XPIDLSRCS</span>
<a href="#l2.329"></a><span id="l2.329"> export-idl:: $(SUBMAKEFILES) $(MAKE_DIRS)</span>
<a href="#l2.330"></a><span id="l2.330"> </span>
<a href="#l2.331"></a><span id="l2.331"> ifneq ($(XPIDLSRCS)$(SDK_XPIDLSRCS),)</span>
<a href="#l2.332"></a><span id="l2.332"> ifndef NO_DIST_INSTALL</span>
<a href="#l2.333"></a><span id="l2.333"> export-idl:: $(XPIDLSRCS) $(SDK_XPIDLSRCS) $(IDL_DIR)</span>
<a href="#l2.334"></a><span id="l2.334"> 	$(INSTALL) $(IFLAGS1) $^</span>
<a href="#l2.335"></a><span id="l2.335"> endif</span>
<a href="#l2.336"></a><span id="l2.336"> endif</span>
<a href="#l2.337"></a><span id="l2.337" class="difflineminus">-	+$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.338"></a><span id="l2.338" class="difflineminus">-	+$(LOOP_OVER_DIRS)</span>
<a href="#l2.339"></a><span id="l2.339" class="difflineminus">-	+$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l2.340"></a><span id="l2.340" class="difflineplus">+	$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.341"></a><span id="l2.341" class="difflineplus">+	$(LOOP_OVER_DIRS)</span>
<a href="#l2.342"></a><span id="l2.342" class="difflineplus">+	$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l2.343"></a><span id="l2.343"> </span>
<a href="#l2.344"></a><span id="l2.344"> </span>
<a href="#l2.345"></a><span id="l2.345"> </span>
<a href="#l2.346"></a><span id="l2.346"> </span>
<a href="#l2.347"></a><span id="l2.347"> ifneq ($(SDK_XPIDLSRCS),)</span>
<a href="#l2.348"></a><span id="l2.348"> # export .idl files to $(IDL_DIR) &amp; $(SDK_IDL_DIR)</span>
<a href="#l2.349"></a><span id="l2.349"> ifndef NO_DIST_INSTALL</span>
<a href="#l2.350"></a><span id="l2.350"> export:: $(SDK_XPIDLSRCS) $(IDL_DIR)</span>
<a href="#l2.351"></a><span id="l2.351" class="difflineat">@@ -1862,19 +1832,19 @@ endif # SDK_BINARY</span>
<a href="#l2.352"></a><span id="l2.352"> </span>
<a href="#l2.353"></a><span id="l2.353"> ################################################################################</span>
<a href="#l2.354"></a><span id="l2.354"> # CHROME PACKAGING</span>
<a href="#l2.355"></a><span id="l2.355"> </span>
<a href="#l2.356"></a><span id="l2.356"> JAR_MANIFEST := $(srcdir)/jar.mn</span>
<a href="#l2.357"></a><span id="l2.357"> </span>
<a href="#l2.358"></a><span id="l2.358"> chrome::</span>
<a href="#l2.359"></a><span id="l2.359"> 	$(MAKE) realchrome</span>
<a href="#l2.360"></a><span id="l2.360" class="difflineminus">-	+$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.361"></a><span id="l2.361" class="difflineminus">-	+$(LOOP_OVER_DIRS)</span>
<a href="#l2.362"></a><span id="l2.362" class="difflineminus">-	+$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l2.363"></a><span id="l2.363" class="difflineplus">+	$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.364"></a><span id="l2.364" class="difflineplus">+	$(LOOP_OVER_DIRS)</span>
<a href="#l2.365"></a><span id="l2.365" class="difflineplus">+	$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l2.366"></a><span id="l2.366"> </span>
<a href="#l2.367"></a><span id="l2.367"> $(FINAL_TARGET)/chrome:</span>
<a href="#l2.368"></a><span id="l2.368"> 	$(NSINSTALL) -D $@</span>
<a href="#l2.369"></a><span id="l2.369"> </span>
<a href="#l2.370"></a><span id="l2.370"> ifneq (,$(wildcard $(JAR_MANIFEST)))</span>
<a href="#l2.371"></a><span id="l2.371"> ifndef NO_DIST_INSTALL</span>
<a href="#l2.372"></a><span id="l2.372"> libs realchrome:: $(CHROME_DEPS) $(FINAL_TARGET)/chrome</span>
<a href="#l2.373"></a><span id="l2.373"> 	$(PYTHON) $(MOZILLA_DIR)/config/JarMaker.py \</span>
<a href="#l2.374"></a><span id="l2.374" class="difflineat">@@ -2014,25 +1984,25 @@ endef</span>
<a href="#l2.375"></a><span id="l2.375"> 	$(REPORT_BUILD)</span>
<a href="#l2.376"></a><span id="l2.376"> 	@$(MAKE_DEPS_NOAUTO)</span>
<a href="#l2.377"></a><span id="l2.377"> </span>
<a href="#l2.378"></a><span id="l2.378"> ifneq (,$(OBJS)$(XPIDLSRCS)$(SDK_XPIDLSRCS)$(SIMPLE_PROGRAMS))</span>
<a href="#l2.379"></a><span id="l2.379"> depend:: $(SUBMAKEFILES) $(MAKE_DIRS) $(MDDEPFILES)</span>
<a href="#l2.380"></a><span id="l2.380"> else</span>
<a href="#l2.381"></a><span id="l2.381"> depend:: $(SUBMAKEFILES)</span>
<a href="#l2.382"></a><span id="l2.382"> endif</span>
<a href="#l2.383"></a><span id="l2.383" class="difflineminus">-	+$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.384"></a><span id="l2.384" class="difflineminus">-	+$(LOOP_OVER_DIRS)</span>
<a href="#l2.385"></a><span id="l2.385" class="difflineminus">-	+$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l2.386"></a><span id="l2.386" class="difflineplus">+	$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.387"></a><span id="l2.387" class="difflineplus">+	$(LOOP_OVER_DIRS)</span>
<a href="#l2.388"></a><span id="l2.388" class="difflineplus">+	$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l2.389"></a><span id="l2.389"> </span>
<a href="#l2.390"></a><span id="l2.390"> dependclean:: $(SUBMAKEFILES)</span>
<a href="#l2.391"></a><span id="l2.391"> 	rm -f $(MDDEPFILES)</span>
<a href="#l2.392"></a><span id="l2.392" class="difflineminus">-	+$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.393"></a><span id="l2.393" class="difflineminus">-	+$(LOOP_OVER_DIRS)</span>
<a href="#l2.394"></a><span id="l2.394" class="difflineminus">-	+$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l2.395"></a><span id="l2.395" class="difflineplus">+	$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.396"></a><span id="l2.396" class="difflineplus">+	$(LOOP_OVER_DIRS)</span>
<a href="#l2.397"></a><span id="l2.397" class="difflineplus">+	$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l2.398"></a><span id="l2.398"> </span>
<a href="#l2.399"></a><span id="l2.399"> endif # MOZ_AUTO_DEPS</span>
<a href="#l2.400"></a><span id="l2.400"> </span>
<a href="#l2.401"></a><span id="l2.401"> endif # COMPILER_DEPEND</span>
<a href="#l2.402"></a><span id="l2.402"> </span>
<a href="#l2.403"></a><span id="l2.403"> </span>
<a href="#l2.404"></a><span id="l2.404"> #############################################################################</span>
<a href="#l2.405"></a><span id="l2.405"> # MDDEPDIR is the subdirectory where all the dependency files are placed.</span>
<a href="#l2.406"></a><span id="l2.406" class="difflineat">@@ -2114,33 +2084,33 @@ endif</span>
<a href="#l2.407"></a><span id="l2.407"> # hundreds of built-in suffix rules for stuff we don't need.</span>
<a href="#l2.408"></a><span id="l2.408"> #</span>
<a href="#l2.409"></a><span id="l2.409"> .SUFFIXES:</span>
<a href="#l2.410"></a><span id="l2.410"> </span>
<a href="#l2.411"></a><span id="l2.411"> #</span>
<a href="#l2.412"></a><span id="l2.412"> # Fake targets.  Always run these rules, even if a file/directory with that</span>
<a href="#l2.413"></a><span id="l2.413"> # name already exists.</span>
<a href="#l2.414"></a><span id="l2.414"> #</span>
<a href="#l2.415"></a><span id="l2.415" class="difflineminus">-.PHONY: all all_platforms alltags boot checkout chrome realchrome clean clobber clobber_all export install libs makefiles realclean run_apprunner tools $(DIRS) $(TOOL_DIRS) FORCE</span>
<a href="#l2.416"></a><span id="l2.416" class="difflineplus">+.PHONY: all alltags boot checkout chrome realchrome clean clobber clobber_all export install libs makefiles realclean run_apprunner tools $(DIRS) $(TOOL_DIRS) FORCE</span>
<a href="#l2.417"></a><span id="l2.417"> </span>
<a href="#l2.418"></a><span id="l2.418"> # Used as a dependency to force targets to rebuild</span>
<a href="#l2.419"></a><span id="l2.419"> FORCE:</span>
<a href="#l2.420"></a><span id="l2.420"> </span>
<a href="#l2.421"></a><span id="l2.421"> # Delete target if error occurs when building target</span>
<a href="#l2.422"></a><span id="l2.422"> .DELETE_ON_ERROR:</span>
<a href="#l2.423"></a><span id="l2.423"> </span>
<a href="#l2.424"></a><span id="l2.424"> # Properly set LIBPATTERNS for the platform</span>
<a href="#l2.425"></a><span id="l2.425"> .LIBPATTERNS = $(if $(IMPORT_LIB_SUFFIX),$(LIB_PREFIX)%.$(IMPORT_LIB_SUFFIX)) $(LIB_PREFIX)%.$(LIB_SUFFIX) $(DLL_PREFIX)%$(DLL_SUFFIX) </span>
<a href="#l2.426"></a><span id="l2.426"> </span>
<a href="#l2.427"></a><span id="l2.427"> tags: TAGS</span>
<a href="#l2.428"></a><span id="l2.428"> </span>
<a href="#l2.429"></a><span id="l2.429"> TAGS: $(SUBMAKEFILES) $(CSRCS) $(CPPSRCS) $(wildcard *.h)</span>
<a href="#l2.430"></a><span id="l2.430"> 	-etags $(CSRCS) $(CPPSRCS) $(wildcard *.h)</span>
<a href="#l2.431"></a><span id="l2.431" class="difflineminus">-	+$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.432"></a><span id="l2.432" class="difflineminus">-	+$(LOOP_OVER_DIRS)</span>
<a href="#l2.433"></a><span id="l2.433" class="difflineplus">+	$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.434"></a><span id="l2.434" class="difflineplus">+	$(LOOP_OVER_DIRS)</span>
<a href="#l2.435"></a><span id="l2.435"> </span>
<a href="#l2.436"></a><span id="l2.436"> echo-variable-%:</span>
<a href="#l2.437"></a><span id="l2.437"> 	@echo &quot;$($*)&quot;</span>
<a href="#l2.438"></a><span id="l2.438"> </span>
<a href="#l2.439"></a><span id="l2.439"> echo-tiers:</span>
<a href="#l2.440"></a><span id="l2.440"> 	@echo $(TIERS)</span>
<a href="#l2.441"></a><span id="l2.441"> </span>
<a href="#l2.442"></a><span id="l2.442"> echo-dirs:</span>
<a href="#l2.443"></a><span id="l2.443" class="difflineat">@@ -2153,18 +2123,18 @@ echo-requires:</span>
<a href="#l2.444"></a><span id="l2.444"> 	@echo $(REQUIRES)</span>
<a href="#l2.445"></a><span id="l2.445"> </span>
<a href="#l2.446"></a><span id="l2.446"> echo-requires-recursive::</span>
<a href="#l2.447"></a><span id="l2.447"> ifdef _REPORT_ALL_DIRS</span>
<a href="#l2.448"></a><span id="l2.448"> 	@echo $(subst $(topsrcdir)/,,$(srcdir)): $(MODULE): $(REQUIRES)</span>
<a href="#l2.449"></a><span id="l2.449"> else</span>
<a href="#l2.450"></a><span id="l2.450"> 	@$(if $(REQUIRES),echo $(subst $(topsrcdir)/,,$(srcdir)): $(MODULE): $(REQUIRES))</span>
<a href="#l2.451"></a><span id="l2.451"> endif</span>
<a href="#l2.452"></a><span id="l2.452" class="difflineminus">-	+$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.453"></a><span id="l2.453" class="difflineminus">-	+$(LOOP_OVER_DIRS)</span>
<a href="#l2.454"></a><span id="l2.454" class="difflineplus">+	$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.455"></a><span id="l2.455" class="difflineplus">+	$(LOOP_OVER_DIRS)</span>
<a href="#l2.456"></a><span id="l2.456"> </span>
<a href="#l2.457"></a><span id="l2.457"> echo-depth-path:</span>
<a href="#l2.458"></a><span id="l2.458"> 	@$(MOZILLA_SRCDIR)/build/unix/print-depth-path.sh</span>
<a href="#l2.459"></a><span id="l2.459"> </span>
<a href="#l2.460"></a><span id="l2.460"> echo-module-name:</span>
<a href="#l2.461"></a><span id="l2.461"> 	@$(MOZILLA_SRCDIR)/build/package/rpm/print-module-name.sh</span>
<a href="#l2.462"></a><span id="l2.462"> </span>
<a href="#l2.463"></a><span id="l2.463"> echo-module-filelist:</span>
<a href="#l2.464"></a><span id="l2.464" class="difflineat">@@ -2183,18 +2153,18 @@ ifneq (,$(filter $(PROGRAM) $(HOST_PROGR</span>
<a href="#l2.465"></a><span id="l2.465"> 	@echo &quot;IMPORT_LIBRARY      = $(IMPORT_LIBRARY)&quot;</span>
<a href="#l2.466"></a><span id="l2.466"> 	@echo &quot;STATIC_LIBS         = $(STATIC_LIBS)&quot;</span>
<a href="#l2.467"></a><span id="l2.467"> 	@echo &quot;SHARED_LIBS         = $(SHARED_LIBS)&quot;</span>
<a href="#l2.468"></a><span id="l2.468"> 	@echo &quot;EXTRA_DSO_LIBS      = $(EXTRA_DSO_LIBS)&quot;</span>
<a href="#l2.469"></a><span id="l2.469"> 	@echo &quot;EXTRA_DSO_LDOPTS    = $(EXTRA_DSO_LDOPTS)&quot;</span>
<a href="#l2.470"></a><span id="l2.470"> 	@echo &quot;DEPENDENT_LIBS      = $(DEPENDENT_LIBS)&quot;</span>
<a href="#l2.471"></a><span id="l2.471"> 	@echo --------------------------------------------------------------------------------</span>
<a href="#l2.472"></a><span id="l2.472"> endif</span>
<a href="#l2.473"></a><span id="l2.473" class="difflineminus">-	+$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.474"></a><span id="l2.474" class="difflineminus">-	+$(LOOP_OVER_DIRS)</span>
<a href="#l2.475"></a><span id="l2.475" class="difflineplus">+	$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.476"></a><span id="l2.476" class="difflineplus">+	$(LOOP_OVER_DIRS)</span>
<a href="#l2.477"></a><span id="l2.477"> </span>
<a href="#l2.478"></a><span id="l2.478"> showbuild:</span>
<a href="#l2.479"></a><span id="l2.479"> 	@echo &quot;MOZ_BUILD_ROOT     = $(MOZ_BUILD_ROOT)&quot;</span>
<a href="#l2.480"></a><span id="l2.480"> 	@echo &quot;MOZ_WIDGET_TOOLKIT = $(MOZ_WIDGET_TOOLKIT)&quot;</span>
<a href="#l2.481"></a><span id="l2.481"> 	@echo &quot;CC                 = $(CC)&quot;</span>
<a href="#l2.482"></a><span id="l2.482"> 	@echo &quot;CXX                = $(CXX)&quot;</span>
<a href="#l2.483"></a><span id="l2.483"> 	@echo &quot;CCC                = $(CCC)&quot;</span>
<a href="#l2.484"></a><span id="l2.484"> 	@echo &quot;CPP                = $(CPP)&quot;</span>
<a href="#l2.485"></a><span id="l2.485" class="difflineat">@@ -2241,25 +2211,18 @@ showhost:</span>
<a href="#l2.486"></a><span id="l2.486"> 	@echo &quot;HOST_OBJS          = $(HOST_OBJS)&quot;</span>
<a href="#l2.487"></a><span id="l2.487"> 	@echo &quot;HOST_PROGOBJS      = $(HOST_PROGOBJS)&quot;</span>
<a href="#l2.488"></a><span id="l2.488"> 	@echo &quot;HOST_LIBRARY       = $(HOST_LIBRARY)&quot;</span>
<a href="#l2.489"></a><span id="l2.489"> </span>
<a href="#l2.490"></a><span id="l2.490"> showbuildmods::</span>
<a href="#l2.491"></a><span id="l2.491"> 	@echo &quot;Build Modules	= $(BUILD_MODULES)&quot;</span>
<a href="#l2.492"></a><span id="l2.492"> 	@echo &quot;Module dirs	= $(BUILD_MODULE_DIRS)&quot;</span>
<a href="#l2.493"></a><span id="l2.493"> </span>
<a href="#l2.494"></a><span id="l2.494" class="difflineminus">-zipmakes:</span>
<a href="#l2.495"></a><span id="l2.495" class="difflineminus">-ifneq (,$(filter $(PROGRAM) $(SIMPLE_PROGRAMS) $(LIBRARY) $(SHARED_LIBRARY),$(TARGETS)))</span>
<a href="#l2.496"></a><span id="l2.496" class="difflineminus">-	zip $(DEPTH)/makefiles $(subst $(topsrcdir),$(MOZ_SRC)/mozilla,$(srcdir)/Makefile.in)</span>
<a href="#l2.497"></a><span id="l2.497" class="difflineminus">-endif</span>
<a href="#l2.498"></a><span id="l2.498" class="difflineminus">-	+$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.499"></a><span id="l2.499" class="difflineminus">-	+$(LOOP_OVER_DIRS)</span>
<a href="#l2.500"></a><span id="l2.500" class="difflineminus">-</span>
<a href="#l2.501"></a><span id="l2.501"> documentation:</span>
<a href="#l2.502"></a><span id="l2.502"> 	@cd $(DEPTH)</span>
<a href="#l2.503"></a><span id="l2.503"> 	$(DOXYGEN) $(DEPTH)/config/doxygen.cfg</span>
<a href="#l2.504"></a><span id="l2.504"> </span>
<a href="#l2.505"></a><span id="l2.505"> ifdef ENABLE_TESTS</span>
<a href="#l2.506"></a><span id="l2.506"> check:: $(SUBMAKEFILES) $(MAKE_DIRS)</span>
<a href="#l2.507"></a><span id="l2.507" class="difflineminus">-	+$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.508"></a><span id="l2.508" class="difflineminus">-	+$(LOOP_OVER_DIRS)</span>
<a href="#l2.509"></a><span id="l2.509" class="difflineminus">-	+$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l2.510"></a><span id="l2.510" class="difflineplus">+	$(LOOP_OVER_PARALLEL_DIRS)</span>
<a href="#l2.511"></a><span id="l2.511" class="difflineplus">+	$(LOOP_OVER_DIRS)</span>
<a href="#l2.512"></a><span id="l2.512" class="difflineplus">+	$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l2.513"></a><span id="l2.513"> endif</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

