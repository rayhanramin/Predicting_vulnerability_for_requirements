<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 22897:977d47e829bd0ce3cb253b459826565743400a09</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 977d47e829bd0ce3cb253b459826565743400a09" />
<meta property="og:url" content="/comm-central/rev/977d47e829bd0ce3cb253b459826565743400a09" />
<meta property="og:description" content="Bug 1421992 - script-generated patch to replace do_execute_soon, do_print and do_register_cleanup with executeSoon, info and registerCleanupFunction in C-C. rs=philipp" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 977d47e829bd0ce3cb253b459826565743400a09 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/977d47e829bd0ce3cb253b459826565743400a09">shortlog</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/977d47e829bd0ce3cb253b459826565743400a09">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09">files</a> |
changeset |
<a href="/comm-central/raw-rev/977d47e829bd0ce3cb253b459826565743400a09">raw</a>  | <a href="/comm-central/archive/977d47e829bd0ce3cb253b459826565743400a09.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1421992">Bug 1421992</a> - script-generated patch to replace do_execute_soon, do_print and do_register_cleanup with executeSoon, info and registerCleanupFunction in C-C. rs=philipp
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#70;&#108;&#111;&#114;&#105;&#97;&#110;&#32;&#81;&#117;&#195;&#168;&#122;&#101;&#32;&#60;&#102;&#108;&#111;&#114;&#105;&#97;&#110;&#64;&#113;&#117;&#101;&#122;&#101;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 20 Dec 2017 15:46:46 +0100</td></tr>

<tr>
 <td>changeset 22897</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/977d47e829bd0ce3cb253b459826565743400a09">977d47e829bd0ce3cb253b459826565743400a09</a></td>
</tr>



<tr>
<td>parent 22896</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/1f1fcc3507f3a6f8b537899802f5296ae15320b5">1f1fcc3507f3a6f8b537899802f5296ae15320b5</a>
</td>
</tr>

<tr>
<td>child 22898</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/eebd75773de62de9bc46afbbb108200fd4f73fdf">eebd75773de62de9bc46afbbb108200fd4f73fdf</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=977d47e829bd0ce3cb253b459826565743400a09">13868</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Thu, 21 Dec 2017 10:27:57 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@977d47e829bd [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=977d47e829bd0ce3cb253b459826565743400a09">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=977d47e829bd0ce3cb253b459826565743400a09&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=977d47e829bd0ce3cb253b459826565743400a09&newProject=comm-central&newRevision=1f1fcc3507f3a6f8b537899802f5296ae15320b5&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=977d47e829bd0ce3cb253b459826565743400a09&newProject=comm-central&newRevision=1f1fcc3507f3a6f8b537899802f5296ae15320b5&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=977d47e829bd0ce3cb253b459826565743400a09&newProject=comm-central&newRevision=1f1fcc3507f3a6f8b537899802f5296ae15320b5&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28philipp%29&revcount=50">philipp</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1421992">1421992</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1421992">Bug 1421992</a> - script-generated patch to replace do_execute_soon, do_print and do_register_cleanup with executeSoon, info and registerCleanupFunction in C-C. rs=philipp</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/head_consts.js">calendar/test/unit/head_consts.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/head_consts.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/head_consts.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/head_consts.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/head_consts.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/head_consts.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_gdata_provider.js">calendar/test/unit/test_gdata_provider.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_gdata_provider.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_gdata_provider.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_gdata_provider.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_gdata_provider.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_gdata_provider.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_rfc3339_parser.js">calendar/test/unit/test_rfc3339_parser.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_rfc3339_parser.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_rfc3339_parser.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_rfc3339_parser.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_rfc3339_parser.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_rfc3339_parser.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_storage.js">calendar/test/unit/test_storage.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_storage.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_storage.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_storage.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_storage.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_storage.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_timezone_definition.js">calendar/test/unit/test_timezone_definition.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_timezone_definition.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_timezone_definition.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_timezone_definition.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_timezone_definition.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/calendar/test/unit/test_timezone_definition.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/chat/components/src/test/test_commands.js">chat/components/src/test/test_commands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/chat/components/src/test/test_commands.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/chat/components/src/test/test_commands.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/chat/components/src/test/test_commands.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/chat/components/src/test/test_commands.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/chat/components/src/test/test_commands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/head_mailbase.js">mail/base/test/unit/head_mailbase.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/head_mailbase.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/head_mailbase.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/head_mailbase.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/head_mailbase.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/head_mailbase.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/head_mailbase_maildir.js">mail/base/test/unit/head_mailbase_maildir.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/head_mailbase_maildir.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/head_mailbase_maildir.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/head_mailbase_maildir.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/head_mailbase_maildir.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/head_mailbase_maildir.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/test_alertHook.js">mail/base/test/unit/test_alertHook.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/test_alertHook.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/test_alertHook.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/test_alertHook.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/test_alertHook.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/test_alertHook.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/test_mailGlue_distribution.js">mail/base/test/unit/test_mailGlue_distribution.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/test_mailGlue_distribution.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/test_mailGlue_distribution.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/test_mailGlue_distribution.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/test_mailGlue_distribution.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mail/base/test/unit/test_mailGlue_distribution.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mail/components/test/unit/head_mailcomponents.js">mail/components/test/unit/head_mailcomponents.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mail/components/test/unit/head_mailcomponents.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mail/components/test/unit/head_mailcomponents.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mail/components/test/unit/head_mailcomponents.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mail/components/test/unit/head_mailcomponents.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mail/components/test/unit/head_mailcomponents.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/addrbook/test/unit/head_addrbook.js">mailnews/addrbook/test/unit/head_addrbook.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/addrbook/test/unit/head_addrbook.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/addrbook/test/unit/head_addrbook.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/addrbook/test/unit/head_addrbook.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/addrbook/test/unit/head_addrbook.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/addrbook/test/unit/head_addrbook.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/addrbook/test/unit/test_nsAbManager3.js">mailnews/addrbook/test/unit/test_nsAbManager3.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/addrbook/test/unit/test_nsAbManager3.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/addrbook/test/unit/test_nsAbManager3.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/addrbook/test/unit/test_nsAbManager3.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/addrbook/test/unit/test_nsAbManager3.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/addrbook/test/unit/test_nsAbManager3.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/base/test/unit/head_mailbase.js">mailnews/base/test/unit/head_mailbase.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/base/test/unit/head_mailbase.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/base/test/unit/head_mailbase.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/base/test/unit/head_mailbase.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/base/test/unit/head_mailbase.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/base/test/unit/head_mailbase.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/base/test/unit/test_autoconfigFetchDisk.js">mailnews/base/test/unit/test_autoconfigFetchDisk.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/base/test/unit/test_autoconfigFetchDisk.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/base/test/unit/test_autoconfigFetchDisk.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/base/test/unit/test_autoconfigFetchDisk.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/base/test/unit/test_autoconfigFetchDisk.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/base/test/unit/test_autoconfigFetchDisk.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/base/test/unit/test_nsMsgDBView_headerValues.js">mailnews/base/test/unit/test_nsMsgDBView_headerValues.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/base/test/unit/test_nsMsgDBView_headerValues.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/base/test/unit/test_nsMsgDBView_headerValues.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/base/test/unit/test_nsMsgDBView_headerValues.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/base/test/unit/test_nsMsgDBView_headerValues.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/base/test/unit/test_nsMsgDBView_headerValues.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/head_compose.js">mailnews/compose/test/unit/head_compose.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/head_compose.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/head_compose.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/head_compose.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/head_compose.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/head_compose.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_autoReply.js">mailnews/compose/test/unit/test_autoReply.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_autoReply.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_autoReply.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_autoReply.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_autoReply.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_autoReply.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_bug235432.js">mailnews/compose/test/unit/test_bug235432.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_bug235432.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_bug235432.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_bug235432.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_bug235432.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_bug235432.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_messageHeaders.js">mailnews/compose/test/unit/test_messageHeaders.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_messageHeaders.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_messageHeaders.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_messageHeaders.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_messageHeaders.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_messageHeaders.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_staleTemporaryFileCleanup.js">mailnews/compose/test/unit/test_staleTemporaryFileCleanup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_staleTemporaryFileCleanup.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_staleTemporaryFileCleanup.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_staleTemporaryFileCleanup.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_staleTemporaryFileCleanup.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_staleTemporaryFileCleanup.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_temporaryFilesRemoved.js">mailnews/compose/test/unit/test_temporaryFilesRemoved.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_temporaryFilesRemoved.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_temporaryFilesRemoved.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_temporaryFilesRemoved.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_temporaryFilesRemoved.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/compose/test/unit/test_temporaryFilesRemoved.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/db/gloda/test/unit/head_gloda.js">mailnews/db/gloda/test/unit/head_gloda.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/db/gloda/test/unit/head_gloda.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/db/gloda/test/unit/head_gloda.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/db/gloda/test/unit/head_gloda.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/db/gloda/test/unit/head_gloda.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/db/gloda/test/unit/head_gloda.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/db/gloda/test/unit/test_mime_emitter.js">mailnews/db/gloda/test/unit/test_mime_emitter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/db/gloda/test/unit/test_mime_emitter.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/db/gloda/test/unit/test_mime_emitter.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/db/gloda/test/unit/test_mime_emitter.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/db/gloda/test/unit/test_mime_emitter.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/db/gloda/test/unit/test_mime_emitter.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/db/msgdb/test/unit/head_maildb.js">mailnews/db/msgdb/test/unit/head_maildb.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/db/msgdb/test/unit/head_maildb.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/db/msgdb/test/unit/head_maildb.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/db/msgdb/test/unit/head_maildb.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/db/msgdb/test/unit/head_maildb.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/db/msgdb/test/unit/head_maildb.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/extensions/bayesian-spam-filter/test/unit/head_bayes.js">mailnews/extensions/bayesian-spam-filter/test/unit/head_bayes.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/extensions/bayesian-spam-filter/test/unit/head_bayes.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/extensions/bayesian-spam-filter/test/unit/head_bayes.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/extensions/bayesian-spam-filter/test/unit/head_bayes.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/extensions/bayesian-spam-filter/test/unit/head_bayes.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/extensions/bayesian-spam-filter/test/unit/head_bayes.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/extensions/mdn/test/unit/head_mdn.js">mailnews/extensions/mdn/test/unit/head_mdn.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/extensions/mdn/test/unit/head_mdn.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/extensions/mdn/test/unit/head_mdn.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/extensions/mdn/test/unit/head_mdn.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/extensions/mdn/test/unit/head_mdn.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/extensions/mdn/test/unit/head_mdn.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/head_imap_maildir.js">mailnews/imap/test/unit/head_imap_maildir.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/head_imap_maildir.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/head_imap_maildir.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/head_imap_maildir.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/head_imap_maildir.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/head_imap_maildir.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/head_server.js">mailnews/imap/test/unit/head_server.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/head_server.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/head_server.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/head_server.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/head_server.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/head_server.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/test_imapContentLength.js">mailnews/imap/test/unit/test_imapContentLength.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/test_imapContentLength.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/test_imapContentLength.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/test_imapContentLength.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/test_imapContentLength.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/test_imapContentLength.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/test_largeOfflineStore.js">mailnews/imap/test/unit/test_largeOfflineStore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/test_largeOfflineStore.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/test_largeOfflineStore.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/test_largeOfflineStore.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/test_largeOfflineStore.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/test_largeOfflineStore.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js">mailnews/imap/test/unit/test_stopMovingToLocalFolder.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/import/test/unit/head_import.js">mailnews/import/test/unit/head_import.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/import/test/unit/head_import.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/import/test/unit/head_import.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/import/test/unit/head_import.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/import/test/unit/head_import.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/import/test/unit/head_import.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/import/test/unit/test_shiftjis_csv.js">mailnews/import/test/unit/test_shiftjis_csv.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/import/test/unit/test_shiftjis_csv.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/import/test/unit/test_shiftjis_csv.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/import/test/unit/test_shiftjis_csv.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/import/test/unit/test_shiftjis_csv.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/import/test/unit/test_shiftjis_csv.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/jsaccount/test/unit/head_jsaccount.js">mailnews/jsaccount/test/unit/head_jsaccount.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/jsaccount/test/unit/head_jsaccount.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/jsaccount/test/unit/head_jsaccount.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/jsaccount/test/unit/head_jsaccount.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/jsaccount/test/unit/head_jsaccount.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/jsaccount/test/unit/head_jsaccount.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/head_maillocal.js">mailnews/local/test/unit/head_maillocal.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/head_maillocal.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/head_maillocal.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/head_maillocal.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/head_maillocal.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/head_maillocal.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_over2GBMailboxes.js">mailnews/local/test/unit/test_over2GBMailboxes.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_over2GBMailboxes.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_over2GBMailboxes.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_over2GBMailboxes.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_over2GBMailboxes.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_over2GBMailboxes.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_over4GBMailboxes.js">mailnews/local/test/unit/test_over4GBMailboxes.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_over4GBMailboxes.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_over4GBMailboxes.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_over4GBMailboxes.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_over4GBMailboxes.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_over4GBMailboxes.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_pop3FilterActions.js">mailnews/local/test/unit/test_pop3FilterActions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_pop3FilterActions.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_pop3FilterActions.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_pop3FilterActions.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_pop3FilterActions.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_pop3FilterActions.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_pop3MoveFilter.js">mailnews/local/test/unit/test_pop3MoveFilter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_pop3MoveFilter.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_pop3MoveFilter.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_pop3MoveFilter.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_pop3MoveFilter.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_pop3MoveFilter.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_pop3MoveFilter2.js">mailnews/local/test/unit/test_pop3MoveFilter2.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_pop3MoveFilter2.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_pop3MoveFilter2.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_pop3MoveFilter2.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_pop3MoveFilter2.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_pop3MoveFilter2.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_saveMessage.js">mailnews/local/test/unit/test_saveMessage.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_saveMessage.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_saveMessage.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_saveMessage.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_saveMessage.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/local/test/unit/test_saveMessage.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/mime/jsmime/test/head_xpcshell_glue.js">mailnews/mime/jsmime/test/head_xpcshell_glue.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/mime/jsmime/test/head_xpcshell_glue.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/mime/jsmime/test/head_xpcshell_glue.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/mime/jsmime/test/head_xpcshell_glue.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/mime/jsmime/test/head_xpcshell_glue.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/mime/jsmime/test/head_xpcshell_glue.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/mime/test/unit/head_mime.js">mailnews/mime/test/unit/head_mime.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/mime/test/unit/head_mime.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/mime/test/unit/head_mime.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/mime/test/unit/head_mime.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/mime/test/unit/head_mime.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/mime/test/unit/head_mime.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/mime/test/unit/test_alternate_p7m_handling.js">mailnews/mime/test/unit/test_alternate_p7m_handling.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/mime/test/unit/test_alternate_p7m_handling.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/mime/test/unit/test_alternate_p7m_handling.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/mime/test/unit/test_alternate_p7m_handling.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/mime/test/unit/test_alternate_p7m_handling.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/mime/test/unit/test_alternate_p7m_handling.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/news/test/unit/head_server_setup.js">mailnews/news/test/unit/head_server_setup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/news/test/unit/head_server_setup.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/news/test/unit/head_server_setup.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/news/test/unit/head_server_setup.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/news/test/unit/head_server_setup.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/news/test/unit/head_server_setup.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/test/resources/asyncTestUtils.js">mailnews/test/resources/asyncTestUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/test/resources/asyncTestUtils.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/test/resources/asyncTestUtils.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/test/resources/asyncTestUtils.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/test/resources/asyncTestUtils.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/test/resources/asyncTestUtils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/test/resources/logHelper.js">mailnews/test/resources/logHelper.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/mailnews/test/resources/logHelper.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/mailnews/test/resources/logHelper.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/mailnews/test/resources/logHelper.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/mailnews/test/resources/logHelper.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/mailnews/test/resources/logHelper.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/autocomplete/test_tabmatches.js">suite/common/places/tests/autocomplete/test_tabmatches.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/autocomplete/test_tabmatches.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/autocomplete/test_tabmatches.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/autocomplete/test_tabmatches.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/autocomplete/test_tabmatches.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/autocomplete/test_tabmatches.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/head_common.js">suite/common/places/tests/head_common.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/head_common.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/head_common.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/head_common.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/head_common.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/head_common.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/unit/test_browserGlue_prefs.js">suite/common/places/tests/unit/test_browserGlue_prefs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/unit/test_browserGlue_prefs.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/unit/test_browserGlue_prefs.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/unit/test_browserGlue_prefs.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/unit/test_browserGlue_prefs.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/unit/test_browserGlue_prefs.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/unit/test_browserGlue_smartBookmarks.js">suite/common/places/tests/unit/test_browserGlue_smartBookmarks.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/unit/test_browserGlue_smartBookmarks.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/unit/test_browserGlue_smartBookmarks.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/unit/test_browserGlue_smartBookmarks.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/unit/test_browserGlue_smartBookmarks.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/unit/test_browserGlue_smartBookmarks.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/unit/test_clearHistory_shutdown.js">suite/common/places/tests/unit/test_clearHistory_shutdown.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/unit/test_clearHistory_shutdown.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/unit/test_clearHistory_shutdown.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/unit/test_clearHistory_shutdown.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/unit/test_clearHistory_shutdown.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/suite/common/places/tests/unit/test_clearHistory_shutdown.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/suite/modules/test/unit/test_browser_sanitizer.js">suite/modules/test/unit/test_browser_sanitizer.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/977d47e829bd0ce3cb253b459826565743400a09/suite/modules/test/unit/test_browser_sanitizer.js">file</a> |
<a href="/comm-central/annotate/977d47e829bd0ce3cb253b459826565743400a09/suite/modules/test/unit/test_browser_sanitizer.js">annotate</a> |
<a href="/comm-central/diff/977d47e829bd0ce3cb253b459826565743400a09/suite/modules/test/unit/test_browser_sanitizer.js">diff</a> |
<a href="/comm-central/comparison/977d47e829bd0ce3cb253b459826565743400a09/suite/modules/test/unit/test_browser_sanitizer.js">comparison</a> |
<a href="/comm-central/log/977d47e829bd0ce3cb253b459826565743400a09/suite/modules/test/unit/test_browser_sanitizer.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/test/unit/head_consts.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/test/unit/head_consts.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -231,17 +231,17 @@ function do_load_calmgr(callback) {</span>
<a href="#l1.4"></a><span id="l1.4">     });</span>
<a href="#l1.5"></a><span id="l1.5"> }</span>
<a href="#l1.6"></a><span id="l1.6"> </span>
<a href="#l1.7"></a><span id="l1.7"> function do_calendar_startup(callback) {</span>
<a href="#l1.8"></a><span id="l1.8">     let obs = {</span>
<a href="#l1.9"></a><span id="l1.9">         observe: function() {</span>
<a href="#l1.10"></a><span id="l1.10">             Services.obs.removeObserver(this, &quot;calendar-startup-done&quot;);</span>
<a href="#l1.11"></a><span id="l1.11">             do_test_finished();</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-            do_execute_soon(callback);</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+            executeSoon(callback);</span>
<a href="#l1.14"></a><span id="l1.14">         }</span>
<a href="#l1.15"></a><span id="l1.15">     };</span>
<a href="#l1.16"></a><span id="l1.16"> </span>
<a href="#l1.17"></a><span id="l1.17">     let startupService = Components.classes[&quot;@mozilla.org/calendar/startup-service;1&quot;]</span>
<a href="#l1.18"></a><span id="l1.18">                                    .getService(Components.interfaces.nsISupports).wrappedJSObject;</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20">     if (startupService.started) {</span>
<a href="#l1.21"></a><span id="l1.21">         callback();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/test/unit/test_gdata_provider.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/test/unit/test_gdata_provider.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -59,17 +59,17 @@ MockAlertsService.prototype = {</span>
<a href="#l2.4"></a><span id="l2.4">         Ci.nsISupports,</span>
<a href="#l2.5"></a><span id="l2.5">         Ci.nsIAlertsService</span>
<a href="#l2.6"></a><span id="l2.6">     ])</span>
<a href="#l2.7"></a><span id="l2.7"> };</span>
<a href="#l2.8"></a><span id="l2.8"> </span>
<a href="#l2.9"></a><span id="l2.9"> function replaceAlertsService() {</span>
<a href="#l2.10"></a><span id="l2.10">     let originalAlertsServiceCID =</span>
<a href="#l2.11"></a><span id="l2.11">         MockRegistrar.register(&quot;@mozilla.org/alerts-service;1&quot;, MockAlertsService);</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-    do_register_cleanup(() =&gt; {</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+    registerCleanupFunction(() =&gt; {</span>
<a href="#l2.14"></a><span id="l2.14">         MockRegistrar.unregister(originalAlertsServiceCID);</span>
<a href="#l2.15"></a><span id="l2.15">     });</span>
<a href="#l2.16"></a><span id="l2.16"> }</span>
<a href="#l2.17"></a><span id="l2.17"> </span>
<a href="#l2.18"></a><span id="l2.18"> function GDataServer(calendarId, tasksId) {</span>
<a href="#l2.19"></a><span id="l2.19">     this.server = new HttpServer();</span>
<a href="#l2.20"></a><span id="l2.20">     this.calendarId = calendarId;</span>
<a href="#l2.21"></a><span id="l2.21">     this.tasksId = tasksId;</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineat">@@ -104,17 +104,17 @@ function GDataServer(calendarId, tasksId</span>
<a href="#l2.23"></a><span id="l2.23"> </span>
<a href="#l2.24"></a><span id="l2.24"> GDataServer.prototype = {</span>
<a href="#l2.25"></a><span id="l2.25">     items: null,</span>
<a href="#l2.26"></a><span id="l2.26"> </span>
<a href="#l2.27"></a><span id="l2.27">     get baseUri() { return &quot;http://localhost:&quot; + this.server.identity.primaryPort + &quot;/&quot;; },</span>
<a href="#l2.28"></a><span id="l2.28"> </span>
<a href="#l2.29"></a><span id="l2.29">     start: function() {</span>
<a href="#l2.30"></a><span id="l2.30">         this.server.start(-1);</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-        do_register_cleanup(() =&gt; this.server.stop(() =&gt; {}));</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+        registerCleanupFunction(() =&gt; this.server.stop(() =&gt; {}));</span>
<a href="#l2.33"></a><span id="l2.33">     },</span>
<a href="#l2.34"></a><span id="l2.34"> </span>
<a href="#l2.35"></a><span id="l2.35">     resetClient: function(client) {</span>
<a href="#l2.36"></a><span id="l2.36">         this.resetRequest();</span>
<a href="#l2.37"></a><span id="l2.37">         MockConflictPrompt.unregister();</span>
<a href="#l2.38"></a><span id="l2.38">         cal.getCalendarManager().unregisterCalendar(client);</span>
<a href="#l2.39"></a><span id="l2.39">     },</span>
<a href="#l2.40"></a><span id="l2.40"> </span>
<a href="#l2.41"></a><span id="l2.41" class="difflineat">@@ -232,17 +232,17 @@ GDataServer.prototype = {</span>
<a href="#l2.42"></a><span id="l2.42">                                   request.bodyInputStream.available()));</span>
<a href="#l2.43"></a><span id="l2.43">             } catch (e) {</span>
<a href="#l2.44"></a><span id="l2.44">                 // Don't bail if json parsing failed.</span>
<a href="#l2.45"></a><span id="l2.45">             }</span>
<a href="#l2.46"></a><span id="l2.46"> </span>
<a href="#l2.47"></a><span id="l2.47">             this.lastMethod = method;</span>
<a href="#l2.48"></a><span id="l2.48">             return nextHandler(request, response, method, parameters, body);</span>
<a href="#l2.49"></a><span id="l2.49">         } catch (e) {</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineminus">-            do_print(&quot;Server Error: &quot; + e.fileName + &quot;:&quot; + e.lineNumber + &quot;: &quot; + e + &quot;\n&quot;);</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineplus">+            info(&quot;Server Error: &quot; + e.fileName + &quot;:&quot; + e.lineNumber + &quot;: &quot; + e + &quot;\n&quot;);</span>
<a href="#l2.52"></a><span id="l2.52">             return null;</span>
<a href="#l2.53"></a><span id="l2.53">         }</span>
<a href="#l2.54"></a><span id="l2.54">     },</span>
<a href="#l2.55"></a><span id="l2.55"> </span>
<a href="#l2.56"></a><span id="l2.56">     calendarListRequest: function(request, response, method, parameters, body) {</span>
<a href="#l2.57"></a><span id="l2.57">         let data = this.calendarListData;</span>
<a href="#l2.58"></a><span id="l2.58">         response.write(JSON.stringify(data));</span>
<a href="#l2.59"></a><span id="l2.59">     },</span>
<a href="#l2.60"></a><span id="l2.60" class="difflineat">@@ -709,17 +709,17 @@ add_task(function* test_JSONToDate() {</span>
<a href="#l2.61"></a><span id="l2.61"> </span>
<a href="#l2.62"></a><span id="l2.62">     // An event without specified timezone, with a calendar set to Asia/Baku</span>
<a href="#l2.63"></a><span id="l2.63">     equal(convert({ dateTime: &quot;2015-07-01T12:13:14+04:00&quot; }, &quot;Asia/Baku&quot;), &quot;20150701T121314 in Asia/Baku&quot;);</span>
<a href="#l2.64"></a><span id="l2.64"> </span>
<a href="#l2.65"></a><span id="l2.65">     // An offset matching the passed in calendar timezone. This should NOT be Africa/Algiers</span>
<a href="#l2.66"></a><span id="l2.66">     equal(convert({ dateTime: &quot;2015-01-02T03:04:05+01:00&quot; }), &quot;20150102T030405 in Europe/Berlin&quot;);</span>
<a href="#l2.67"></a><span id="l2.67"> </span>
<a href="#l2.68"></a><span id="l2.68">     // An offset that doesn't match the calendar timezone, will use the first timezone in that offset</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineminus">-    do_print(&quot;The following warning is expected: 2015-01-02T03:04:05+04:00 does not match timezone offset for Europe/Berlin&quot;);</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineplus">+    info(&quot;The following warning is expected: 2015-01-02T03:04:05+04:00 does not match timezone offset for Europe/Berlin&quot;);</span>
<a href="#l2.71"></a><span id="l2.71">     equal(convert({ dateTime: &quot;2015-01-02T03:04:05+05:00&quot; }), &quot;20150102T030405 in Antarctica/Mawson&quot;);</span>
<a href="#l2.72"></a><span id="l2.72"> });</span>
<a href="#l2.73"></a><span id="l2.73"> </span>
<a href="#l2.74"></a><span id="l2.74"> add_task(function* test_organizerCN() {</span>
<a href="#l2.75"></a><span id="l2.75">     gServer.events = [];</span>
<a href="#l2.76"></a><span id="l2.76">     let client = yield gServer.getClient();</span>
<a href="#l2.77"></a><span id="l2.77">     equal(client.getProperty(&quot;organizerCN&quot;), null);</span>
<a href="#l2.78"></a><span id="l2.78">     gServer.resetClient(client);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/test/unit/test_rfc3339_parser.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/test/unit/test_rfc3339_parser.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -24,17 +24,17 @@ function really_run_test() {</span>
<a href="#l3.4"></a><span id="l3.4">             day: aExpectedDateTime[2],</span>
<a href="#l3.5"></a><span id="l3.5">             hour: aExpectedDateTime[3],</span>
<a href="#l3.6"></a><span id="l3.6">             minute: aExpectedDateTime[4],</span>
<a href="#l3.7"></a><span id="l3.7">             second: aExpectedDateTime[5],</span>
<a href="#l3.8"></a><span id="l3.8">             timezone: aExpectedDateTime[6],</span>
<a href="#l3.9"></a><span id="l3.9">             isDate: aExpectedDateTime[7]</span>
<a href="#l3.10"></a><span id="l3.10">         };</span>
<a href="#l3.11"></a><span id="l3.11">         for (let prop in expectedDateProps) {</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-            do_print(&quot;Checking prop: &quot; + prop);</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+            info(&quot;Checking prop: &quot; + prop);</span>
<a href="#l3.14"></a><span id="l3.14">             // Object comparison fails with ical.js, and we only want to check</span>
<a href="#l3.15"></a><span id="l3.15">             // that we have the right timezone.</span>
<a href="#l3.16"></a><span id="l3.16">             if (prop == &quot;timezone&quot;) {</span>
<a href="#l3.17"></a><span id="l3.17">                 equal(dateTime[prop].tzid, expectedDateProps[prop].tzid);</span>
<a href="#l3.18"></a><span id="l3.18">             } else {</span>
<a href="#l3.19"></a><span id="l3.19">                 equal(dateTime[prop], expectedDateProps[prop]);</span>
<a href="#l3.20"></a><span id="l3.20">             }</span>
<a href="#l3.21"></a><span id="l3.21">         }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/test/unit/test_storage.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/test/unit/test_storage.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -21,17 +21,17 @@ function testAttachRoundtrip() {</span>
<a href="#l4.4"></a><span id="l4.4">         &quot;END:VEVENT&quot;</span>
<a href="#l4.5"></a><span id="l4.5">     ].join(&quot;\r\n&quot;);</span>
<a href="#l4.6"></a><span id="l4.6"> </span>
<a href="#l4.7"></a><span id="l4.7">     let storageItem = createEventFromIcalString(str);</span>
<a href="#l4.8"></a><span id="l4.8"> </span>
<a href="#l4.9"></a><span id="l4.9">     do_test_pending();</span>
<a href="#l4.10"></a><span id="l4.10">     storage.addItem(storageItem, {</span>
<a href="#l4.11"></a><span id="l4.11">         onOperationComplete: function(calendar, status, opType, id, addedItem) {</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-            do_execute_soon(() =&gt; {</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+            executeSoon(() =&gt; {</span>
<a href="#l4.14"></a><span id="l4.14">                 // Make sure the cache is cleared, otherwise we'll get the cached item.</span>
<a href="#l4.15"></a><span id="l4.15">                 delete storage.wrappedJSObject.mItemCache[addedItem.id];</span>
<a href="#l4.16"></a><span id="l4.16">                 storage.getItem(addedItem.id, retrieveItem);</span>
<a href="#l4.17"></a><span id="l4.17">             });</span>
<a href="#l4.18"></a><span id="l4.18">         }</span>
<a href="#l4.19"></a><span id="l4.19">     });</span>
<a href="#l4.20"></a><span id="l4.20"> </span>
<a href="#l4.21"></a><span id="l4.21">     let retrieveItem = {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/test/unit/test_timezone_definition.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/test/unit/test_timezone_definition.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -80,26 +80,26 @@ add_task(function* completeness_test() {</span>
<a href="#l5.4"></a><span id="l5.4">         notEqual(test.version, &quot;2.1969z&quot;, &quot;Check for dummy test data.&quot;);</span>
<a href="#l5.5"></a><span id="l5.5">         let tzs = cal.getTimezoneService();</span>
<a href="#l5.6"></a><span id="l5.6">         let comp = Services.vc.compare(test.version, tzs.version);</span>
<a href="#l5.7"></a><span id="l5.7"> </span>
<a href="#l5.8"></a><span id="l5.8">         // some checks on the test data</span>
<a href="#l5.9"></a><span id="l5.9">         if (comp != -1) {</span>
<a href="#l5.10"></a><span id="l5.10">             switch (comp) {</span>
<a href="#l5.11"></a><span id="l5.11">                 case 0:</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-                    do_print(&quot;Test data and timezone service use the same timezone version.&quot;);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+                    info(&quot;Test data and timezone service use the same timezone version.&quot;);</span>
<a href="#l5.14"></a><span id="l5.14">                     break;</span>
<a href="#l5.15"></a><span id="l5.15">                 case 1:</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineminus">-                    do_print(&quot;Test data use a newer timezone version than the timezone service.&quot;);</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineplus">+                    info(&quot;Test data use a newer timezone version than the timezone service.&quot;);</span>
<a href="#l5.18"></a><span id="l5.18">                     break;</span>
<a href="#l5.19"></a><span id="l5.19">             }</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineminus">-            do_print(&quot;test data: &quot; + test.version);</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineminus">-            do_print(&quot;tz service: &quot; + tzs.version);</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineminus">-            do_print(&quot;This indicates a problem in update-zones.py or manually additions to&quot; +</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineminus">-                     &quot;zones.json or previous.json&quot;);</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineplus">+            info(&quot;test data: &quot; + test.version);</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineplus">+            info(&quot;tz service: &quot; + tzs.version);</span>
<a href="#l5.26"></a><span id="l5.26" class="difflineplus">+            info(&quot;This indicates a problem in update-zones.py or manually additions to&quot; +</span>
<a href="#l5.27"></a><span id="l5.27" class="difflineplus">+                 &quot;zones.json or previous.json&quot;);</span>
<a href="#l5.28"></a><span id="l5.28">         }</span>
<a href="#l5.29"></a><span id="l5.29">         equal(comp, -1, &quot;timezone version of test data is older than the currently used version.&quot;);</span>
<a href="#l5.30"></a><span id="l5.30">         ok(test.aliases &amp;&amp; test.aliases.length &gt; 0, &quot;test data have aliases.&quot;);</span>
<a href="#l5.31"></a><span id="l5.31">         ok(test.zones &amp;&amp; test.zones.length &gt; 0, &quot;test data have zones.&quot;);</span>
<a href="#l5.32"></a><span id="l5.32"> </span>
<a href="#l5.33"></a><span id="l5.33">         // completeness check for aliases and zones (this covers also cases, when a previous zone</span>
<a href="#l5.34"></a><span id="l5.34">         // definition got transformed into alias linked to a valid zone - so, there's no need for</span>
<a href="#l5.35"></a><span id="l5.35">         // separate test step to cover that)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/chat/components/src/test/test_commands.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/chat/components/src/test/test_commands.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -122,25 +122,25 @@ function run_test() {</span>
<a href="#l6.4"></a><span id="l6.4">         isChat: true</span>
<a href="#l6.5"></a><span id="l6.5">       },</span>
<a href="#l6.6"></a><span id="l6.6">       cmdlist: &quot;away, back, baloney, banana, busy, dnd, help, offline, raw, say&quot;,</span>
<a href="#l6.7"></a><span id="l6.7">       results: [[], [], [], [&quot;baloney&quot;, true], [&quot;back&quot;], [&quot;help&quot;], [&quot;help&quot;], [&quot;offline&quot;], [&quot;offline&quot;]]</span>
<a href="#l6.8"></a><span id="l6.8">     }</span>
<a href="#l6.9"></a><span id="l6.9">   ];</span>
<a href="#l6.10"></a><span id="l6.10"> </span>
<a href="#l6.11"></a><span id="l6.11">   for (let test of testData) {</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-    do_print(&quot;The following tests are with: &quot; + test.desc);</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+    info(&quot;The following tests are with: &quot; + test.desc);</span>
<a href="#l6.14"></a><span id="l6.14"> </span>
<a href="#l6.15"></a><span id="l6.15">     // Check which commands are available in which context.</span>
<a href="#l6.16"></a><span id="l6.16">     let cmdlist = cmdserv.listCommandsForConversation(test.conv, {})</span>
<a href="#l6.17"></a><span id="l6.17">                          .map(aCmd =&gt; aCmd.name).sort().join(&quot;, &quot;);</span>
<a href="#l6.18"></a><span id="l6.18">     Assert.equal(cmdlist, test.cmdlist);</span>
<a href="#l6.19"></a><span id="l6.19"> </span>
<a href="#l6.20"></a><span id="l6.20">     for (let testCmd of testCmds) {</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineminus">-      do_print(&quot;Testing command found for '&quot; + testCmd + &quot;'&quot;);</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineplus">+      info(&quot;Testing command found for '&quot; + testCmd + &quot;'&quot;);</span>
<a href="#l6.23"></a><span id="l6.23">       let expectedResult = test.results.shift();</span>
<a href="#l6.24"></a><span id="l6.24">       let cmdArray = cmdserv._findCommands(test.conv, testCmd);</span>
<a href="#l6.25"></a><span id="l6.25">       // Check whether commands are only returned when appropriate.</span>
<a href="#l6.26"></a><span id="l6.26">       Assert.equal(cmdArray.length &gt; 0, expectedResult.length &gt; 0);</span>
<a href="#l6.27"></a><span id="l6.27">       if (cmdArray.length) {</span>
<a href="#l6.28"></a><span id="l6.28">         // Check if the right command was returned.</span>
<a href="#l6.29"></a><span id="l6.29">         Assert.equal(cmdArray[0].name, expectedResult[0]);</span>
<a href="#l6.30"></a><span id="l6.30">         Assert.equal(cmdArray[0].priority == Ci.imICommand.CMD_PRIORITY_PRPL,</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineat">@@ -170,14 +170,14 @@ function run_test() {</span>
<a href="#l6.32"></a><span id="l6.32">     {</span>
<a href="#l6.33"></a><span id="l6.33">       message: &quot;/notregistered&quot;,</span>
<a href="#l6.34"></a><span id="l6.34">       result: false</span>
<a href="#l6.35"></a><span id="l6.35">     }</span>
<a href="#l6.36"></a><span id="l6.36">   ];</span>
<a href="#l6.37"></a><span id="l6.37"> </span>
<a href="#l6.38"></a><span id="l6.38">   // Test command execution.</span>
<a href="#l6.39"></a><span id="l6.39">   for (let executionTest of testMessages) {</span>
<a href="#l6.40"></a><span id="l6.40" class="difflineminus">-    do_print(&quot;Testing command execution for '&quot; + executionTest.message + &quot;'&quot;);</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineplus">+    info(&quot;Testing command execution for '&quot; + executionTest.message + &quot;'&quot;);</span>
<a href="#l6.42"></a><span id="l6.42">     Assert.equal(cmdserv.executeCommand(executionTest.message, fakeConversation), executionTest.result);</span>
<a href="#l6.43"></a><span id="l6.43">   }</span>
<a href="#l6.44"></a><span id="l6.44"> </span>
<a href="#l6.45"></a><span id="l6.45">   cmdserv.unInitCommands();</span>
<a href="#l6.46"></a><span id="l6.46"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/base/test/unit/head_mailbase.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/base/test/unit/head_mailbase.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -8,11 +8,11 @@ var Ci = Components.interfaces;</span>
<a href="#l7.4"></a><span id="l7.4"> var Cr = Components.results;</span>
<a href="#l7.5"></a><span id="l7.5"> var CC = Components.Constructor;</span>
<a href="#l7.6"></a><span id="l7.6"> </span>
<a href="#l7.7"></a><span id="l7.7"> // Ensure the profile directory is set up</span>
<a href="#l7.8"></a><span id="l7.8"> do_get_profile();</span>
<a href="#l7.9"></a><span id="l7.9"> </span>
<a href="#l7.10"></a><span id="l7.10"> var gDEPTH = &quot;../../../../&quot;;</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-do_register_cleanup(function() {</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+registerCleanupFunction(function() {</span>
<a href="#l7.14"></a><span id="l7.14">   load(gDEPTH + &quot;mailnews/resources/mailShutdown.js&quot;);</span>
<a href="#l7.15"></a><span id="l7.15"> });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/base/test/unit/head_mailbase_maildir.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/base/test/unit/head_mailbase_maildir.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -1,5 +1,5 @@</span>
<a href="#l8.4"></a><span id="l8.4"> // alternate head to set maildir as default</span>
<a href="#l8.5"></a><span id="l8.5"> load(&quot;head_mailbase.js&quot;);</span>
<a href="#l8.6"></a><span id="l8.6" class="difflineminus">-do_print(&quot;Running test with maildir&quot;);</span>
<a href="#l8.7"></a><span id="l8.7" class="difflineplus">+info(&quot;Running test with maildir&quot;);</span>
<a href="#l8.8"></a><span id="l8.8"> Services.prefs.setCharPref(&quot;mail.serverDefaultStoreContractID&quot;,</span>
<a href="#l8.9"></a><span id="l8.9">                            &quot;@mozilla.org/msgstore/maildirstore;1&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/base/test/unit/test_alertHook.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/base/test/unit/test_alertHook.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -30,17 +30,17 @@ var mailnewsURL = {</span>
<a href="#l9.4"></a><span id="l9.4"> </span>
<a href="#l9.5"></a><span id="l9.5">     throw Cr.NS_ERROR_INVALID_POINTER;</span>
<a href="#l9.6"></a><span id="l9.6">   }</span>
<a href="#l9.7"></a><span id="l9.7"> };</span>
<a href="#l9.8"></a><span id="l9.8"> </span>
<a href="#l9.9"></a><span id="l9.9"> function run_test() {</span>
<a href="#l9.10"></a><span id="l9.10">   // First register the mock alerts service</span>
<a href="#l9.11"></a><span id="l9.11">   let uuid = MockFactory.register(&quot;@mozilla.org/alerts-service;1&quot;, mockAlertsService);</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-  do_register_cleanup(function() {</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+  registerCleanupFunction(function() {</span>
<a href="#l9.14"></a><span id="l9.14">     MockFactory.unregister(uuid);</span>
<a href="#l9.15"></a><span id="l9.15">   });</span>
<a href="#l9.16"></a><span id="l9.16"> </span>
<a href="#l9.17"></a><span id="l9.17">   // Just text, no url or window =&gt; expect no error shown to user</span>
<a href="#l9.18"></a><span id="l9.18">   gAlertShown = false;</span>
<a href="#l9.19"></a><span id="l9.19">   MailServices.mailSession.alertUser(&quot;test error&quot;);</span>
<a href="#l9.20"></a><span id="l9.20">   Assert.ok(!gAlertShown);</span>
<a href="#l9.21"></a><span id="l9.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/base/test/unit/test_mailGlue_distribution.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/base/test/unit/test_mailGlue_distribution.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -18,17 +18,17 @@ function run_test()</span>
<a href="#l10.4"></a><span id="l10.4"> </span>
<a href="#l10.5"></a><span id="l10.5">   // Create a descendant of iniFile</span>
<a href="#l10.6"></a><span id="l10.6">   iniFile.append(&quot;distribution.ini&quot;);</span>
<a href="#l10.7"></a><span id="l10.7">   // It's a bug if distribution.ini already exists</span>
<a href="#l10.8"></a><span id="l10.8">   if (iniFile.exists()) {</span>
<a href="#l10.9"></a><span id="l10.9">     do_throw(&quot;distribution.ini already exists in objdir/mozilla/dist/bin/distribution.&quot;);</span>
<a href="#l10.10"></a><span id="l10.10">   }</span>
<a href="#l10.11"></a><span id="l10.11"> </span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-  do_register_cleanup(function() {</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+  registerCleanupFunction(function() {</span>
<a href="#l10.14"></a><span id="l10.14">     // Remove the distribution.ini file</span>
<a href="#l10.15"></a><span id="l10.15">     let iniFile = Services.dirsvc.get(&quot;XCurProcD&quot;, Ci.nsIFile);</span>
<a href="#l10.16"></a><span id="l10.16">     iniFile.append(&quot;distribution&quot;);</span>
<a href="#l10.17"></a><span id="l10.17">     iniFile.append(&quot;distribution.ini&quot;);</span>
<a href="#l10.18"></a><span id="l10.18">     if (iniFile.exists())</span>
<a href="#l10.19"></a><span id="l10.19">       iniFile.remove(true);</span>
<a href="#l10.20"></a><span id="l10.20">   });</span>
<a href="#l10.21"></a><span id="l10.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/components/test/unit/head_mailcomponents.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/components/test/unit/head_mailcomponents.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -8,11 +8,11 @@ var Ci = Components.interfaces;</span>
<a href="#l11.4"></a><span id="l11.4"> var Cr = Components.results;</span>
<a href="#l11.5"></a><span id="l11.5"> var CC = Components.Constructor;</span>
<a href="#l11.6"></a><span id="l11.6"> </span>
<a href="#l11.7"></a><span id="l11.7"> // Ensure the profile directory is set up</span>
<a href="#l11.8"></a><span id="l11.8"> do_get_profile();</span>
<a href="#l11.9"></a><span id="l11.9"> </span>
<a href="#l11.10"></a><span id="l11.10"> var gDEPTH = &quot;../../../../&quot;;</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-do_register_cleanup(function() {</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+registerCleanupFunction(function() {</span>
<a href="#l11.14"></a><span id="l11.14">   load(gDEPTH + &quot;mailnews/resources/mailShutdown.js&quot;);</span>
<a href="#l11.15"></a><span id="l11.15"> });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mailnews/addrbook/test/unit/head_addrbook.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mailnews/addrbook/test/unit/head_addrbook.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -8,11 +8,11 @@ var Cr = Components.results;</span>
<a href="#l12.4"></a><span id="l12.4"> var CC = Components.Constructor;</span>
<a href="#l12.5"></a><span id="l12.5"> </span>
<a href="#l12.6"></a><span id="l12.6"> // Ensure the profile directory is set up</span>
<a href="#l12.7"></a><span id="l12.7"> do_get_profile();</span>
<a href="#l12.8"></a><span id="l12.8"> </span>
<a href="#l12.9"></a><span id="l12.9"> // Import the required setup scripts.</span>
<a href="#l12.10"></a><span id="l12.10"> load(&quot;../../../resources/abSetup.js&quot;);</span>
<a href="#l12.11"></a><span id="l12.11"> </span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-do_register_cleanup(function() {</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+registerCleanupFunction(function() {</span>
<a href="#l12.14"></a><span id="l12.14">   load(&quot;../../../resources/mailShutdown.js&quot;);</span>
<a href="#l12.15"></a><span id="l12.15"> });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mailnews/addrbook/test/unit/test_nsAbManager3.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mailnews/addrbook/test/unit/test_nsAbManager3.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -69,17 +69,17 @@ function removeDirectory(directory) {</span>
<a href="#l13.4"></a><span id="l13.4"> </span>
<a href="#l13.5"></a><span id="l13.5"> /**</span>
<a href="#l13.6"></a><span id="l13.6">  * Create 4 addressbooks (directories). Rename the second one and delete</span>
<a href="#l13.7"></a><span id="l13.7">  * the third one. Check if their names are still correct. (bug 745664)</span>
<a href="#l13.8"></a><span id="l13.8">  */</span>
<a href="#l13.9"></a><span id="l13.9"> function run_test() {</span>
<a href="#l13.10"></a><span id="l13.10">   gAbListener = new abListener();</span>
<a href="#l13.11"></a><span id="l13.11">   MailServices.ab.addAddressBookListener(gAbListener, Ci.nsIAbListener.all);</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-  do_register_cleanup(function() {</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+  registerCleanupFunction(function() {</span>
<a href="#l13.14"></a><span id="l13.14">     MailServices.ab.removeAddressBookListener(gAbListener);</span>
<a href="#l13.15"></a><span id="l13.15">   });</span>
<a href="#l13.16"></a><span id="l13.16"> </span>
<a href="#l13.17"></a><span id="l13.17">   let dirNames = [&quot;testAb0&quot;, &quot;testAb1&quot;, &quot;testAb2&quot;, &quot;testAb3&quot;];</span>
<a href="#l13.18"></a><span id="l13.18">   let directories = [];</span>
<a href="#l13.19"></a><span id="l13.19"> </span>
<a href="#l13.20"></a><span id="l13.20">   for (let dirName of dirNames) {</span>
<a href="#l13.21"></a><span id="l13.21">     directories.push(addDirectory(dirName));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mailnews/base/test/unit/head_mailbase.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mailnews/base/test/unit/head_mailbase.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -9,11 +9,11 @@ var Ci = Components.interfaces;</span>
<a href="#l14.4"></a><span id="l14.4"> var Cr = Components.results;</span>
<a href="#l14.5"></a><span id="l14.5"> var CC = Components.Constructor;</span>
<a href="#l14.6"></a><span id="l14.6"> </span>
<a href="#l14.7"></a><span id="l14.7"> // Ensure the profile directory is set up</span>
<a href="#l14.8"></a><span id="l14.8"> do_get_profile();</span>
<a href="#l14.9"></a><span id="l14.9"> </span>
<a href="#l14.10"></a><span id="l14.10"> var gDEPTH = &quot;../../../../&quot;;</span>
<a href="#l14.11"></a><span id="l14.11"> </span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-do_register_cleanup(function() {</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+registerCleanupFunction(function() {</span>
<a href="#l14.14"></a><span id="l14.14">   load(gDEPTH + &quot;mailnews/resources/mailShutdown.js&quot;);</span>
<a href="#l14.15"></a><span id="l14.15"> });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mailnews/base/test/unit/test_autoconfigFetchDisk.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_autoconfigFetchDisk.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -66,17 +66,17 @@ function onTestFailure(e)</span>
<a href="#l15.4"></a><span id="l15.4"> function run_test()</span>
<a href="#l15.5"></a><span id="l15.5"> {</span>
<a href="#l15.6"></a><span id="l15.6">   if (!xmlReader) {</span>
<a href="#l15.7"></a><span id="l15.7">     // if you see this and this is Thunderbird, then it's an error</span>
<a href="#l15.8"></a><span id="l15.8">     dump(&quot;INFO | test_autoconfigFetchDisk.js not running, because this is SeaMonkey.&quot;);</span>
<a href="#l15.9"></a><span id="l15.9">     return;</span>
<a href="#l15.10"></a><span id="l15.10">   }</span>
<a href="#l15.11"></a><span id="l15.11"> </span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-  do_register_cleanup(finish_test);</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+  registerCleanupFunction(finish_test);</span>
<a href="#l15.14"></a><span id="l15.14"> </span>
<a href="#l15.15"></a><span id="l15.15">   // Copy the xml file into place</span>
<a href="#l15.16"></a><span id="l15.16">   let file = do_get_file(&quot;data/&quot; + kXMLFile);</span>
<a href="#l15.17"></a><span id="l15.17"> </span>
<a href="#l15.18"></a><span id="l15.18">   copyLocation = Services.dirsvc.get(&quot;CurProcD&quot;, Ci.nsIFile);</span>
<a href="#l15.19"></a><span id="l15.19">   copyLocation.append(&quot;isp&quot;);</span>
<a href="#l15.20"></a><span id="l15.20"> </span>
<a href="#l15.21"></a><span id="l15.21">   file.copyTo(copyLocation, kXMLFile);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mailnews/base/test/unit/test_nsMsgDBView_headerValues.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_nsMsgDBView_headerValues.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -52,17 +52,17 @@ function* real_test() {</span>
<a href="#l16.4"></a><span id="l16.4">   dbView.open(folder, SortType.byDate, SortOrder.ascending, 0, outCount);</span>
<a href="#l16.5"></a><span id="l16.5"> </span>
<a href="#l16.6"></a><span id="l16.6">   // Did we add all the messages properly?</span>
<a href="#l16.7"></a><span id="l16.7">   let treeView = dbView.QueryInterface(Components.interfaces.nsITreeView);</span>
<a href="#l16.8"></a><span id="l16.8">   Assert.equal(treeView.rowCount, tests.length);</span>
<a href="#l16.9"></a><span id="l16.9"> </span>
<a href="#l16.10"></a><span id="l16.10">   // For each test, make sure that the display is correct.</span>
<a href="#l16.11"></a><span id="l16.11">   tests.forEach(function (data, i) {</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-    do_print(&quot;Checking data for &quot; + uneval(data));</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+    info(&quot;Checking data for &quot; + uneval(data));</span>
<a href="#l16.14"></a><span id="l16.14">     let expected = data[1];</span>
<a href="#l16.15"></a><span id="l16.15">     for (let column in expected) {</span>
<a href="#l16.16"></a><span id="l16.16">       Assert.equal(dbView.cellTextForColumn(i, column), expected[column]);</span>
<a href="#l16.17"></a><span id="l16.17">     }</span>
<a href="#l16.18"></a><span id="l16.18">   });</span>
<a href="#l16.19"></a><span id="l16.19"> }</span>
<a href="#l16.20"></a><span id="l16.20"> </span>
<a href="#l16.21"></a><span id="l16.21"> function run_test() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mailnews/compose/test/unit/head_compose.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mailnews/compose/test/unit/head_compose.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -206,11 +206,11 @@ function getAttachmentFromContent(aConte</span>
<a href="#l17.4"></a><span id="l17.4">                          &quot;([\\s\\S]*?)\\r\\n&quot; +</span>
<a href="#l17.5"></a><span id="l17.5">                          &quot;--&quot; + boundary + &quot;--&quot;, &quot;m&quot;);</span>
<a href="#l17.6"></a><span id="l17.6">   let attachments = aContent.match(regex);</span>
<a href="#l17.7"></a><span id="l17.7">   Assert.notEqual(attachments, null);</span>
<a href="#l17.8"></a><span id="l17.8">   Assert.equal(attachments.length, 2);</span>
<a href="#l17.9"></a><span id="l17.9">   return attachments[1];</span>
<a href="#l17.10"></a><span id="l17.10"> }</span>
<a href="#l17.11"></a><span id="l17.11"> </span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-do_register_cleanup(function() {</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+registerCleanupFunction(function() {</span>
<a href="#l17.14"></a><span id="l17.14">   load(gDEPTH + &quot;mailnews/resources/mailShutdown.js&quot;);</span>
<a href="#l17.15"></a><span id="l17.15"> });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_autoReply.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_autoReply.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -137,18 +137,18 @@ add_task(function testReplyingToMailWith</span>
<a href="#l18.4"></a><span id="l18.4"> function testReply(aHrdIdx, aTemplateHdrIdx = 0) {</span>
<a href="#l18.5"></a><span id="l18.5">   let smtpServer = getBasicSmtpServer();</span>
<a href="#l18.6"></a><span id="l18.6">   smtpServer.port = gServer.port;</span>
<a href="#l18.7"></a><span id="l18.7"> </span>
<a href="#l18.8"></a><span id="l18.8">   let identity = getSmtpIdentity(kSender, smtpServer);</span>
<a href="#l18.9"></a><span id="l18.9">   localAccountUtils.msgAccount.addIdentity(identity);</span>
<a href="#l18.10"></a><span id="l18.10"> </span>
<a href="#l18.11"></a><span id="l18.11">   let msgHdr = mailTestUtils.getMsgHdrN(localAccountUtils.inboxFolder, aHrdIdx);</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-  do_print(&quot;Msg#&quot; + aHrdIdx +  &quot; author=&quot; + msgHdr.author + &quot;, recipients=&quot; +</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineminus">-           msgHdr.recipients);</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineplus">+  info(&quot;Msg#&quot; + aHrdIdx +  &quot; author=&quot; + msgHdr.author + &quot;, recipients=&quot; +</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineplus">+       msgHdr.recipients);</span>
<a href="#l18.16"></a><span id="l18.16">   let templateHdr = mailTestUtils.getMsgHdrN(gTemplateFolder, aTemplateHdrIdx);</span>
<a href="#l18.17"></a><span id="l18.17"> </span>
<a href="#l18.18"></a><span id="l18.18">   // See &lt;method name=&quot;getTemplates&quot;&gt; in searchWidgets.xml</span>
<a href="#l18.19"></a><span id="l18.19">   let msgTemplateUri = gTemplateFolder.URI +</span>
<a href="#l18.20"></a><span id="l18.20">                        &quot;?messageId=&quot; + templateHdr.messageId +</span>
<a href="#l18.21"></a><span id="l18.21">                        &quot;&amp;subject=&quot; + templateHdr.mime2DecodedSubject;</span>
<a href="#l18.22"></a><span id="l18.22">   MailServices.compose.replyWithTemplate(msgHdr, msgTemplateUri, null,</span>
<a href="#l18.23"></a><span id="l18.23">     localAccountUtils.incomingServer);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_bug235432.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_bug235432.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -77,17 +77,17 @@ function createExpectedTemporaryFile() {</span>
<a href="#l19.4"></a><span id="l19.4">   function createTemporaryFile() {</span>
<a href="#l19.5"></a><span id="l19.5">     let file = Services.dirsvc.get(&quot;TmpD&quot;, Ci.nsIFile);</span>
<a href="#l19.6"></a><span id="l19.6">     file.append(&quot;nsmail.tmp&quot;);</span>
<a href="#l19.7"></a><span id="l19.7">     file.createUnique(Ci.nsIFile.NORMAL_FILE_TYPE, 0o600);</span>
<a href="#l19.8"></a><span id="l19.8">     return file;</span>
<a href="#l19.9"></a><span id="l19.9">   }</span>
<a href="#l19.10"></a><span id="l19.10"> </span>
<a href="#l19.11"></a><span id="l19.11">   let dummyFile = createTemporaryFile();</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-  do_register_cleanup(function() {</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+  registerCleanupFunction(function() {</span>
<a href="#l19.14"></a><span id="l19.14">     dummyFile.remove(false);</span>
<a href="#l19.15"></a><span id="l19.15">   });</span>
<a href="#l19.16"></a><span id="l19.16"> </span>
<a href="#l19.17"></a><span id="l19.17">   let expectedFile = createTemporaryFile();</span>
<a href="#l19.18"></a><span id="l19.18">   expectedFile.remove(false);</span>
<a href="#l19.19"></a><span id="l19.19"> </span>
<a href="#l19.20"></a><span id="l19.20">   return expectedFile;</span>
<a href="#l19.21"></a><span id="l19.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_messageHeaders.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_messageHeaders.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -233,23 +233,23 @@ function* testOtherHeaders() {</span>
<a href="#l20.4"></a><span id="l20.4">   // experimentation, there are a few ways you can create dates that Date.parse</span>
<a href="#l20.5"></a><span id="l20.5">   // can't handle (specifically related to how 2-digit years). However, the</span>
<a href="#l20.6"></a><span id="l20.6">   // optimal RFC 5322 form is supported by Date.parse. If Date.parse fails, we</span>
<a href="#l20.7"></a><span id="l20.7">   // have a form that we shouldn't be using anyways.</span>
<a href="#l20.8"></a><span id="l20.8">   let date = new Date(headers.getRawHeader(&quot;Date&quot;)[0]);</span>
<a href="#l20.9"></a><span id="l20.9">   // If we have clock skew within the test, then our results are going to be</span>
<a href="#l20.10"></a><span id="l20.10">   // meaningless. Hopefully, this is only rarely the case.</span>
<a href="#l20.11"></a><span id="l20.11">   if (before &gt; after) {</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-    do_print(&quot;Clock skew detected, skipping date check&quot;);</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+    info(&quot;Clock skew detected, skipping date check&quot;);</span>
<a href="#l20.14"></a><span id="l20.14">   } else {</span>
<a href="#l20.15"></a><span id="l20.15">     // In case this all took place within one second, remove sub-millisecond</span>
<a href="#l20.16"></a><span id="l20.16">     // timing (Date headers only carry second-level precision).</span>
<a href="#l20.17"></a><span id="l20.17">     before = before - before % 1000;</span>
<a href="#l20.18"></a><span id="l20.18">     after = after - after % 1000;</span>
<a href="#l20.19"></a><span id="l20.19" class="difflineminus">-    do_print(before + &quot; &lt;= &quot; + date + &quot; &lt;= &quot; + after + &quot;?&quot;);</span>
<a href="#l20.20"></a><span id="l20.20" class="difflineplus">+    info(before + &quot; &lt;= &quot; + date + &quot; &lt;= &quot; + after + &quot;?&quot;);</span>
<a href="#l20.21"></a><span id="l20.21">     Assert.ok(before &lt;= date &amp;&amp; date &lt;= after);</span>
<a href="#l20.22"></a><span id="l20.22">   }</span>
<a href="#l20.23"></a><span id="l20.23"> </span>
<a href="#l20.24"></a><span id="l20.24"> </span>
<a href="#l20.25"></a><span id="l20.25">   // We truncate too-long References. Check this.</span>
<a href="#l20.26"></a><span id="l20.26">   let references = [];</span>
<a href="#l20.27"></a><span id="l20.27">   for (let i = 0; i &lt; 100; i++)</span>
<a href="#l20.28"></a><span id="l20.28">     references.push(&quot;&lt;&quot; + i + &quot;@test.invalid&gt;&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_staleTemporaryFileCleanup.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_staleTemporaryFileCleanup.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -36,17 +36,17 @@ function collect_expected_temporary_file</span>
<a href="#l21.4"></a><span id="l21.4"> function check_files_not_exist(files) {</span>
<a href="#l21.5"></a><span id="l21.5">   files.forEach(function(file) {</span>
<a href="#l21.6"></a><span id="l21.6">     Assert.ok(!file.exists());</span>
<a href="#l21.7"></a><span id="l21.7">   });</span>
<a href="#l21.8"></a><span id="l21.8"> }</span>
<a href="#l21.9"></a><span id="l21.9"> </span>
<a href="#l21.10"></a><span id="l21.10"> function run_test() {</span>
<a href="#l21.11"></a><span id="l21.11">   gExpectedFiles = collect_expected_temporary_files();</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-  do_register_cleanup(function() {</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+  registerCleanupFunction(function() {</span>
<a href="#l21.14"></a><span id="l21.14">     gExpectedFiles.forEach(function(file) {</span>
<a href="#l21.15"></a><span id="l21.15">       if (file.exists())</span>
<a href="#l21.16"></a><span id="l21.16">         file.remove(false);</span>
<a href="#l21.17"></a><span id="l21.17">     });</span>
<a href="#l21.18"></a><span id="l21.18">   });</span>
<a href="#l21.19"></a><span id="l21.19"> </span>
<a href="#l21.20"></a><span id="l21.20">   // Ensure we have at least one mail account</span>
<a href="#l21.21"></a><span id="l21.21">   localAccountUtils.loadLocalMailAccount();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_temporaryFilesRemoved.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_temporaryFilesRemoved.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -62,17 +62,17 @@ function check_result() {</span>
<a href="#l22.4"></a><span id="l22.4">   // temp files should be deleted as soon as the draft is finished saving.</span>
<a href="#l22.5"></a><span id="l22.5">   check_files_not_exist(gExpectedFiles);</span>
<a href="#l22.6"></a><span id="l22.6"> </span>
<a href="#l22.7"></a><span id="l22.7">   do_test_finished();</span>
<a href="#l22.8"></a><span id="l22.8"> }</span>
<a href="#l22.9"></a><span id="l22.9"> </span>
<a href="#l22.10"></a><span id="l22.10"> function run_test() {</span>
<a href="#l22.11"></a><span id="l22.11">   gExpectedFiles = collect_expected_temporary_files();</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-  do_register_cleanup(function() {</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+  registerCleanupFunction(function() {</span>
<a href="#l22.14"></a><span id="l22.14">     gExpectedFiles.forEach(function(file) {</span>
<a href="#l22.15"></a><span id="l22.15">       if (file.exists())</span>
<a href="#l22.16"></a><span id="l22.16">         file.remove(false);</span>
<a href="#l22.17"></a><span id="l22.17">     });</span>
<a href="#l22.18"></a><span id="l22.18">   });</span>
<a href="#l22.19"></a><span id="l22.19"> </span>
<a href="#l22.20"></a><span id="l22.20">   // Ensure we have at least one mail account</span>
<a href="#l22.21"></a><span id="l22.21">   localAccountUtils.loadLocalMailAccount();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mailnews/db/gloda/test/unit/head_gloda.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mailnews/db/gloda/test/unit/head_gloda.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -10,11 +10,11 @@ var CC = Components.Constructor;</span>
<a href="#l23.4"></a><span id="l23.4"> </span>
<a href="#l23.5"></a><span id="l23.5"> // Ensure the profile directory is set up</span>
<a href="#l23.6"></a><span id="l23.6"> do_get_profile();</span>
<a href="#l23.7"></a><span id="l23.7"> </span>
<a href="#l23.8"></a><span id="l23.8"> var gDEPTH = &quot;../../../../../&quot;;</span>
<a href="#l23.9"></a><span id="l23.9"> </span>
<a href="#l23.10"></a><span id="l23.10"> // glodaTestHelper.js does all the rest of the imports</span>
<a href="#l23.11"></a><span id="l23.11"> </span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-do_register_cleanup(function() {</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+registerCleanupFunction(function() {</span>
<a href="#l23.14"></a><span id="l23.14">   load(gDEPTH + &quot;mailnews/resources/mailShutdown.js&quot;);</span>
<a href="#l23.15"></a><span id="l23.15"> });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mailnews/db/gloda/test/unit/test_mime_emitter.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mailnews/db/gloda/test/unit/test_mime_emitter.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -597,17 +597,17 @@ var tests = [</span>
<a href="#l24.4"></a><span id="l24.4">   test_sane_bodies,</span>
<a href="#l24.5"></a><span id="l24.5">   test_attachments_correctness,</span>
<a href="#l24.6"></a><span id="l24.6">   test_part12_not_an_attachment,</span>
<a href="#l24.7"></a><span id="l24.7"> ];</span>
<a href="#l24.8"></a><span id="l24.8"> </span>
<a href="#l24.9"></a><span id="l24.9"> var gInbox;</span>
<a href="#l24.10"></a><span id="l24.10"> </span>
<a href="#l24.11"></a><span id="l24.11"> function run_test() {</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-  do_register_cleanup(function() {</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+  registerCleanupFunction(function() {</span>
<a href="#l24.14"></a><span id="l24.14">     const Cu = Components.utils;</span>
<a href="#l24.15"></a><span id="l24.15">     Cu.import(&quot;resource:///modules/gloda/datastore.js&quot;);</span>
<a href="#l24.16"></a><span id="l24.16">     GlodaDatastore.shutdown();</span>
<a href="#l24.17"></a><span id="l24.17">   });</span>
<a href="#l24.18"></a><span id="l24.18">   // use mbox injection because the fake server chokes sometimes right now</span>
<a href="#l24.19"></a><span id="l24.19">   gInbox = configure_message_injection({mode: &quot;local&quot;});</span>
<a href="#l24.20"></a><span id="l24.20">   async_run_tests(tests);</span>
<a href="#l24.21"></a><span id="l24.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mailnews/db/msgdb/test/unit/head_maildb.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mailnews/db/msgdb/test/unit/head_maildb.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -7,11 +7,11 @@ Components.utils.import(&quot;resource://test</span>
<a href="#l25.4"></a><span id="l25.4"> var Cc = Components.classes;</span>
<a href="#l25.5"></a><span id="l25.5"> var Ci = Components.interfaces;</span>
<a href="#l25.6"></a><span id="l25.6"> var Cr = Components.results;</span>
<a href="#l25.7"></a><span id="l25.7"> var CC = Components.Constructor;</span>
<a href="#l25.8"></a><span id="l25.8"> </span>
<a href="#l25.9"></a><span id="l25.9"> // Ensure the profile directory is set up</span>
<a href="#l25.10"></a><span id="l25.10"> do_get_profile();</span>
<a href="#l25.11"></a><span id="l25.11"> </span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-do_register_cleanup(function() {</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+registerCleanupFunction(function() {</span>
<a href="#l25.14"></a><span id="l25.14">   load(&quot;../../../../../mailnews/resources/mailShutdown.js&quot;);</span>
<a href="#l25.15"></a><span id="l25.15"> });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mailnews/extensions/bayesian-spam-filter/test/unit/head_bayes.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mailnews/extensions/bayesian-spam-filter/test/unit/head_bayes.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -17,11 +17,11 @@ Components.utils.import(&quot;resource://gre/</span>
<a href="#l26.4"></a><span id="l26.4"> function getSpec(aFileName)</span>
<a href="#l26.5"></a><span id="l26.5"> {</span>
<a href="#l26.6"></a><span id="l26.6">   var file = do_get_file(&quot;resources/&quot; + aFileName);</span>
<a href="#l26.7"></a><span id="l26.7">   var uri = Services.io.newFileURI(file).QueryInterface(Ci.nsIURL);</span>
<a href="#l26.8"></a><span id="l26.8">   uri.query = &quot;type=application/x-message-display&quot;;</span>
<a href="#l26.9"></a><span id="l26.9">   return uri.spec;</span>
<a href="#l26.10"></a><span id="l26.10"> }</span>
<a href="#l26.11"></a><span id="l26.11"> </span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-do_register_cleanup(function() {</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+registerCleanupFunction(function() {</span>
<a href="#l26.14"></a><span id="l26.14">   load(&quot;../../../../resources/mailShutdown.js&quot;);</span>
<a href="#l26.15"></a><span id="l26.15"> });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mailnews/extensions/mdn/test/unit/head_mdn.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mailnews/extensions/mdn/test/unit/head_mdn.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -7,11 +7,11 @@ var Cc = Components.classes;</span>
<a href="#l27.4"></a><span id="l27.4"> var Ci = Components.interfaces;</span>
<a href="#l27.5"></a><span id="l27.5"> var Cr = Components.results;</span>
<a href="#l27.6"></a><span id="l27.6"> var CC = Components.Constructor;</span>
<a href="#l27.7"></a><span id="l27.7"> </span>
<a href="#l27.8"></a><span id="l27.8"> // Ensure the profile directory is set up</span>
<a href="#l27.9"></a><span id="l27.9"> do_get_profile();</span>
<a href="#l27.10"></a><span id="l27.10"> </span>
<a href="#l27.11"></a><span id="l27.11"> </span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-do_register_cleanup(function() {</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+registerCleanupFunction(function() {</span>
<a href="#l27.14"></a><span id="l27.14">   load(&quot;../../../../../mailnews/resources/mailShutdown.js&quot;);</span>
<a href="#l27.15"></a><span id="l27.15"> });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mailnews/imap/test/unit/head_imap_maildir.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mailnews/imap/test/unit/head_imap_maildir.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -1,6 +1,6 @@</span>
<a href="#l28.4"></a><span id="l28.4"> load(&quot;head_server.js&quot;);</span>
<a href="#l28.5"></a><span id="l28.5"> </span>
<a href="#l28.6"></a><span id="l28.6" class="difflineminus">-do_print(&quot;Running test with maildir&quot;);</span>
<a href="#l28.7"></a><span id="l28.7" class="difflineplus">+info(&quot;Running test with maildir&quot;);</span>
<a href="#l28.8"></a><span id="l28.8"> </span>
<a href="#l28.9"></a><span id="l28.9"> Services.prefs.setCharPref(&quot;mail.serverDefaultStoreContractID&quot;,</span>
<a href="#l28.10"></a><span id="l28.10">                            &quot;@mozilla.org/msgstore/maildirstore;1&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mailnews/imap/test/unit/head_server.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mailnews/imap/test/unit/head_server.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -103,11 +103,11 @@ function addImapMessage()</span>
<a href="#l29.4"></a><span id="l29.4">   let messageGenerator = new MessageGenerator();</span>
<a href="#l29.5"></a><span id="l29.5">   messages = messages.concat(messageGenerator.makeMessage());</span>
<a href="#l29.6"></a><span id="l29.6">   let dataUri = Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l29.7"></a><span id="l29.7">                   btoa(messages[0].toMessageString()));</span>
<a href="#l29.8"></a><span id="l29.8">   let imapMsg = new imapMessage(dataUri.spec, IMAPPump.mailbox.uidnext++, []);</span>
<a href="#l29.9"></a><span id="l29.9">   IMAPPump.mailbox.addMessage(imapMsg);</span>
<a href="#l29.10"></a><span id="l29.10"> }</span>
<a href="#l29.11"></a><span id="l29.11"> </span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-do_register_cleanup(function() {</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+registerCleanupFunction(function() {</span>
<a href="#l29.14"></a><span id="l29.14">   load(gDEPTH + &quot;mailnews/resources/mailShutdown.js&quot;);</span>
<a href="#l29.15"></a><span id="l29.15"> });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapContentLength.js</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapContentLength.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -35,17 +35,17 @@ function* addMessageToServer() {</span>
<a href="#l30.4"></a><span id="l30.4"> </span>
<a href="#l30.5"></a><span id="l30.5">   IMAPPump.inbox.updateFolder(null);</span>
<a href="#l30.6"></a><span id="l30.6">   yield false;</span>
<a href="#l30.7"></a><span id="l30.7"> }</span>
<a href="#l30.8"></a><span id="l30.8"> </span>
<a href="#l30.9"></a><span id="l30.9"> var msgFolderListener = {</span>
<a href="#l30.10"></a><span id="l30.10">   msgAdded: function(aMsgHdr) {</span>
<a href="#l30.11"></a><span id="l30.11">     gMsgHdr = aMsgHdr;</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-    do_execute_soon(async_driver);</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+    executeSoon(async_driver);</span>
<a href="#l30.14"></a><span id="l30.14">   },</span>
<a href="#l30.15"></a><span id="l30.15"> };</span>
<a href="#l30.16"></a><span id="l30.16"> </span>
<a href="#l30.17"></a><span id="l30.17"> function setup() {</span>
<a href="#l30.18"></a><span id="l30.18">   setupIMAPPump();</span>
<a href="#l30.19"></a><span id="l30.19"> </span>
<a href="#l30.20"></a><span id="l30.20">   // Set up nsIMsgFolderListener to get the header when it's received</span>
<a href="#l30.21"></a><span id="l30.21">   MailServices.mfn.addListener(msgFolderListener, MailServices.mfn.msgAdded);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_largeOfflineStore.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_largeOfflineStore.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -37,20 +37,20 @@ function run_test() {</span>
<a href="#l31.4"></a><span id="l31.4">   {</span>
<a href="#l31.5"></a><span id="l31.5">     dump(&quot;On Windows, this test only works on NTFS volumes.\n&quot;);</span>
<a href="#l31.6"></a><span id="l31.6">     teardown();</span>
<a href="#l31.7"></a><span id="l31.7">     return;</span>
<a href="#l31.8"></a><span id="l31.8">   }</span>
<a href="#l31.9"></a><span id="l31.9"> </span>
<a href="#l31.10"></a><span id="l31.10">   let isFileSparse = mailTestUtils.mark_file_region_sparse(inboxFile, 0, 0x10000000f);</span>
<a href="#l31.11"></a><span id="l31.11">   let freeDiskSpace = inboxFile.diskSpaceAvailable;</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-  do_print(&quot;Free disk space = &quot; + mailTestUtils.toMiBString(freeDiskSpace));</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+  info(&quot;Free disk space = &quot; + mailTestUtils.toMiBString(freeDiskSpace));</span>
<a href="#l31.14"></a><span id="l31.14">   if (!isFileSparse &amp;&amp; freeDiskSpace &lt; neededFreeSpace) {</span>
<a href="#l31.15"></a><span id="l31.15" class="difflineminus">-    do_print(&quot;This test needs &quot; + mailTestUtils.toMiBString(neededFreeSpace) +</span>
<a href="#l31.16"></a><span id="l31.16" class="difflineminus">-             &quot; free space to run. Aborting.&quot;);</span>
<a href="#l31.17"></a><span id="l31.17" class="difflineplus">+    info(&quot;This test needs &quot; + mailTestUtils.toMiBString(neededFreeSpace) +</span>
<a href="#l31.18"></a><span id="l31.18" class="difflineplus">+         &quot; free space to run. Aborting.&quot;);</span>
<a href="#l31.19"></a><span id="l31.19">     todo_check_true(false);</span>
<a href="#l31.20"></a><span id="l31.20"> </span>
<a href="#l31.21"></a><span id="l31.21">     teardown();</span>
<a href="#l31.22"></a><span id="l31.22">     return;</span>
<a href="#l31.23"></a><span id="l31.23">   }</span>
<a href="#l31.24"></a><span id="l31.24"> </span>
<a href="#l31.25"></a><span id="l31.25">   async_run_tests(tests);</span>
<a href="#l31.26"></a><span id="l31.26"> }</span>
<a href="#l31.27"></a><span id="l31.27" class="difflineat">@@ -81,48 +81,48 @@ function* setup() {</span>
<a href="#l31.28"></a><span id="l31.28">   // seek to 15 bytes past 4GB.</span>
<a href="#l31.29"></a><span id="l31.29">   outputStream.seek(0, 0x10000000f);</span>
<a href="#l31.30"></a><span id="l31.30">   // Write an empty &quot;from&quot; line.</span>
<a href="#l31.31"></a><span id="l31.31">   outputStream.write(&quot;from\r\n&quot;, 6);</span>
<a href="#l31.32"></a><span id="l31.32">   outputStream.close();</span>
<a href="#l31.33"></a><span id="l31.33"> </span>
<a href="#l31.34"></a><span id="l31.34">   // Save initial file size.</span>
<a href="#l31.35"></a><span id="l31.35">   gOfflineStoreSize = IMAPPump.inbox.filePath.fileSize;</span>
<a href="#l31.36"></a><span id="l31.36" class="difflineminus">-  do_print(&quot;Offline store size (before 1st downloadAllForOffline()) = &quot; +</span>
<a href="#l31.37"></a><span id="l31.37" class="difflineminus">-           gOfflineStoreSize);</span>
<a href="#l31.38"></a><span id="l31.38" class="difflineplus">+  info(&quot;Offline store size (before 1st downloadAllForOffline()) = &quot; +</span>
<a href="#l31.39"></a><span id="l31.39" class="difflineplus">+       gOfflineStoreSize);</span>
<a href="#l31.40"></a><span id="l31.40"> </span>
<a href="#l31.41"></a><span id="l31.41">   // Download for offline use, to append created messages to local IMAP inbox.</span>
<a href="#l31.42"></a><span id="l31.42">   IMAPPump.inbox.downloadAllForOffline(asyncUrlListener, null);</span>
<a href="#l31.43"></a><span id="l31.43">   yield false;</span>
<a href="#l31.44"></a><span id="l31.44"> }</span>
<a href="#l31.45"></a><span id="l31.45"> </span>
<a href="#l31.46"></a><span id="l31.46"> function* check_result() {</span>
<a href="#l31.47"></a><span id="l31.47">   // Call downloadAllForOffline() a second time.</span>
<a href="#l31.48"></a><span id="l31.48">   IMAPPump.inbox.downloadAllForOffline(asyncUrlListener, null);</span>
<a href="#l31.49"></a><span id="l31.49">   yield false;</span>
<a href="#l31.50"></a><span id="l31.50"> </span>
<a href="#l31.51"></a><span id="l31.51">   // Make sure offline store grew (i.e., we were not writing over data).</span>
<a href="#l31.52"></a><span id="l31.52">   let offlineStoreSize = IMAPPump.inbox.filePath.fileSize;</span>
<a href="#l31.53"></a><span id="l31.53" class="difflineminus">-  do_print(&quot;Offline store size (after 2nd downloadAllForOffline()) = &quot; +</span>
<a href="#l31.54"></a><span id="l31.54" class="difflineminus">-           offlineStoreSize + &quot;. (Msg hdr offsets should be close to it.)&quot;);</span>
<a href="#l31.55"></a><span id="l31.55" class="difflineplus">+  info(&quot;Offline store size (after 2nd downloadAllForOffline()) = &quot; +</span>
<a href="#l31.56"></a><span id="l31.56" class="difflineplus">+       offlineStoreSize + &quot;. (Msg hdr offsets should be close to it.)&quot;);</span>
<a href="#l31.57"></a><span id="l31.57">   Assert.ok(offlineStoreSize &gt; gOfflineStoreSize);</span>
<a href="#l31.58"></a><span id="l31.58"> </span>
<a href="#l31.59"></a><span id="l31.59">   // Verify that the message headers have the offline flag set.</span>
<a href="#l31.60"></a><span id="l31.60">   let msgEnumerator = IMAPPump.inbox.msgDatabase.EnumerateMessages();</span>
<a href="#l31.61"></a><span id="l31.61">   let offset = {};</span>
<a href="#l31.62"></a><span id="l31.62">   let size = {};</span>
<a href="#l31.63"></a><span id="l31.63">   while (msgEnumerator.hasMoreElements()) {</span>
<a href="#l31.64"></a><span id="l31.64">     let header = msgEnumerator.getNext();</span>
<a href="#l31.65"></a><span id="l31.65">     // Verify that each message has been downloaded and looks OK.</span>
<a href="#l31.66"></a><span id="l31.66">     if (!(header instanceof Components.interfaces.nsIMsgDBHdr &amp;&amp;</span>
<a href="#l31.67"></a><span id="l31.67">           (header.flags &amp; Ci.nsMsgMessageFlags.Offline)))</span>
<a href="#l31.68"></a><span id="l31.68">       do_throw(&quot;Message not downloaded for offline use&quot;);</span>
<a href="#l31.69"></a><span id="l31.69"> </span>
<a href="#l31.70"></a><span id="l31.70">     IMAPPump.inbox.getOfflineFileStream(header.messageKey, offset, size).close();</span>
<a href="#l31.71"></a><span id="l31.71" class="difflineminus">-    do_print(&quot;Msg hdr offset = &quot; + offset.value);</span>
<a href="#l31.72"></a><span id="l31.72" class="difflineplus">+    info(&quot;Msg hdr offset = &quot; + offset.value);</span>
<a href="#l31.73"></a><span id="l31.73">   }</span>
<a href="#l31.74"></a><span id="l31.74"> };</span>
<a href="#l31.75"></a><span id="l31.75"> </span>
<a href="#l31.76"></a><span id="l31.76"> function teardown() {</span>
<a href="#l31.77"></a><span id="l31.77">   // Free up disk space - if you want to look at the file after running</span>
<a href="#l31.78"></a><span id="l31.78">   // this test, comment out this line.</span>
<a href="#l31.79"></a><span id="l31.79">   if (IMAPPump.inbox)</span>
<a href="#l31.80"></a><span id="l31.80">     IMAPPump.inbox.filePath.remove(false);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_stopMovingToLocalFolder.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -65,17 +65,17 @@ function* move_messages() {</span>
<a href="#l32.4"></a><span id="l32.4"> </span>
<a href="#l32.5"></a><span id="l32.5"> function* check_messages() {</span>
<a href="#l32.6"></a><span id="l32.6">   Assert.equal(IMAPPump.inbox.getTotalMessages(false), 1);</span>
<a href="#l32.7"></a><span id="l32.7">   Assert.equal(localAccountUtils.inboxFolder.getTotalMessages(false), 0);</span>
<a href="#l32.8"></a><span id="l32.8">   yield true;</span>
<a href="#l32.9"></a><span id="l32.9"> }</span>
<a href="#l32.10"></a><span id="l32.10"> </span>
<a href="#l32.11"></a><span id="l32.11"> function run_test() {</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-  do_register_cleanup(function() {</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+  registerCleanupFunction(function() {</span>
<a href="#l32.14"></a><span id="l32.14">     // IMAPPump.server.performTest() brings this test to a halt,</span>
<a href="#l32.15"></a><span id="l32.15">     // so we need teardownIMAPPump() without IMAPPump.server.performTest().</span>
<a href="#l32.16"></a><span id="l32.16">     IMAPPump.inbox = null;</span>
<a href="#l32.17"></a><span id="l32.17">     IMAPPump.server.resetTest();</span>
<a href="#l32.18"></a><span id="l32.18">     try {</span>
<a href="#l32.19"></a><span id="l32.19">       IMAPPump.incomingServer.closeCachedConnections();</span>
<a href="#l32.20"></a><span id="l32.20">       let serverSink = IMAPPump.incomingServer.QueryInterface(Ci.nsIImapServerSink);</span>
<a href="#l32.21"></a><span id="l32.21">       serverSink.abortQueuedUrls();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mailnews/import/test/unit/head_import.js</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mailnews/import/test/unit/head_import.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -11,11 +11,11 @@ var CC = Components.Constructor;</span>
<a href="#l33.4"></a><span id="l33.4"> do_get_profile();</span>
<a href="#l33.5"></a><span id="l33.5"> </span>
<a href="#l33.6"></a><span id="l33.6"> // Import the required setup scripts.</span>
<a href="#l33.7"></a><span id="l33.7"> load(&quot;../../../resources/abSetup.js&quot;);</span>
<a href="#l33.8"></a><span id="l33.8"> </span>
<a href="#l33.9"></a><span id="l33.9"> // Import the script with basic import functions</span>
<a href="#l33.10"></a><span id="l33.10"> load(&quot;resources/import_helper.js&quot;);</span>
<a href="#l33.11"></a><span id="l33.11"> </span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-do_register_cleanup(function() {</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+registerCleanupFunction(function() {</span>
<a href="#l33.14"></a><span id="l33.14">   load(&quot;../../../resources/mailShutdown.js&quot;);</span>
<a href="#l33.15"></a><span id="l33.15"> });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mailnews/import/test/unit/test_shiftjis_csv.js</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mailnews/import/test/unit/test_shiftjis_csv.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -1,14 +1,14 @@</span>
<a href="#l34.4"></a><span id="l34.4"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l34.5"></a><span id="l34.5"> </span>
<a href="#l34.6"></a><span id="l34.6"> function run_test()</span>
<a href="#l34.7"></a><span id="l34.7"> {</span>
<a href="#l34.8"></a><span id="l34.8">   Services.prefs.setCharPref(&quot;intl.charset.detector&quot;, &quot;ja_parallel_state_machine&quot;);</span>
<a href="#l34.9"></a><span id="l34.9" class="difflineminus">-  do_register_cleanup(function() {</span>
<a href="#l34.10"></a><span id="l34.10" class="difflineplus">+  registerCleanupFunction(function() {</span>
<a href="#l34.11"></a><span id="l34.11">       Services.prefs.clearUserPref(&quot;intl.charset.detector&quot;);</span>
<a href="#l34.12"></a><span id="l34.12">   });</span>
<a href="#l34.13"></a><span id="l34.13"> </span>
<a href="#l34.14"></a><span id="l34.14">   // Due to the import code using nsIAbManager off the main thread, we need</span>
<a href="#l34.15"></a><span id="l34.15">   // to ensure that it is initialized before we start the main test.</span>
<a href="#l34.16"></a><span id="l34.16">   let abMgr = MailServices.ab;</span>
<a href="#l34.17"></a><span id="l34.17"> </span>
<a href="#l34.18"></a><span id="l34.18">   let file = do_get_file(&quot;resources/shiftjis_addressbook.csv&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/mailnews/jsaccount/test/unit/head_jsaccount.js</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/mailnews/jsaccount/test/unit/head_jsaccount.js</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -15,11 +15,11 @@ Cu.import(&quot;resource://gre/modules/XPCOMU</span>
<a href="#l35.4"></a><span id="l35.4"> Cu.import(&quot;resource://testing-common/mailnews/mailTestUtils.js&quot;);</span>
<a href="#l35.5"></a><span id="l35.5"> Cu.import(&quot;resource://testing-common/mailnews/localAccountUtils.js&quot;);</span>
<a href="#l35.6"></a><span id="l35.6"> </span>
<a href="#l35.7"></a><span id="l35.7"> // Load the test components.</span>
<a href="#l35.8"></a><span id="l35.8"> do_load_manifest(&quot;resources/testComponents.manifest&quot;)</span>
<a href="#l35.9"></a><span id="l35.9"> // Ensure the profile directory is set up.</span>
<a href="#l35.10"></a><span id="l35.10"> do_get_profile();</span>
<a href="#l35.11"></a><span id="l35.11"> </span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-do_register_cleanup(function() {</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+registerCleanupFunction(function() {</span>
<a href="#l35.14"></a><span id="l35.14">   load(&quot;../../../../mailnews/resources/mailShutdown.js&quot;);</span>
<a href="#l35.15"></a><span id="l35.15"> });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/mailnews/local/test/unit/head_maillocal.js</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/mailnews/local/test/unit/head_maillocal.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -162,11 +162,11 @@ function setup_mailbox(type, mailboxPath</span>
<a href="#l36.4"></a><span id="l36.4">                .generateUUID().toString();</span>
<a href="#l36.5"></a><span id="l36.5">   let incomingServer =</span>
<a href="#l36.6"></a><span id="l36.6">     MailServices.accounts.createIncomingServer(user, &quot;Local Folder&quot;, type);</span>
<a href="#l36.7"></a><span id="l36.7">   incomingServer.localPath = mailboxPath;</span>
<a href="#l36.8"></a><span id="l36.8"> </span>
<a href="#l36.9"></a><span id="l36.9">   return incomingServer.rootFolder;</span>
<a href="#l36.10"></a><span id="l36.10"> }</span>
<a href="#l36.11"></a><span id="l36.11"> </span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-do_register_cleanup(function() {</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+registerCleanupFunction(function() {</span>
<a href="#l36.14"></a><span id="l36.14">   load(gDEPTH + &quot;mailnews/resources/mailShutdown.js&quot;);</span>
<a href="#l36.15"></a><span id="l36.15"> });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/mailnews/local/test/unit/test_over2GBMailboxes.js</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_over2GBMailboxes.js</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -18,20 +18,20 @@ function run_test()</span>
<a href="#l37.4"></a><span id="l37.4">   // &quot;Master&quot; do_test_pending(), paired with a do_test_finished() at the end of</span>
<a href="#l37.5"></a><span id="l37.5">   // all the operations.</span>
<a href="#l37.6"></a><span id="l37.6">   do_test_pending();</span>
<a href="#l37.7"></a><span id="l37.7"> </span>
<a href="#l37.8"></a><span id="l37.8">   let inboxFile = localAccountUtils.inboxFolder.filePath;</span>
<a href="#l37.9"></a><span id="l37.9"> </span>
<a href="#l37.10"></a><span id="l37.10">   let neededFreeSpace = 0x100000000;</span>
<a href="#l37.11"></a><span id="l37.11">   let freeDiskSpace = inboxFile.diskSpaceAvailable;</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-  do_print(&quot;Free disk space = &quot; + mailTestUtils.toMiBString(freeDiskSpace));</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+  info(&quot;Free disk space = &quot; + mailTestUtils.toMiBString(freeDiskSpace));</span>
<a href="#l37.14"></a><span id="l37.14">   if (freeDiskSpace &lt; neededFreeSpace) {</span>
<a href="#l37.15"></a><span id="l37.15" class="difflineminus">-    do_print(&quot;This test needs &quot; + mailTestUtils.toMiBString(neededFreeSpace) +</span>
<a href="#l37.16"></a><span id="l37.16" class="difflineminus">-             &quot; free space to run. Aborting.&quot;);</span>
<a href="#l37.17"></a><span id="l37.17" class="difflineplus">+    info(&quot;This test needs &quot; + mailTestUtils.toMiBString(neededFreeSpace) +</span>
<a href="#l37.18"></a><span id="l37.18" class="difflineplus">+         &quot; free space to run. Aborting.&quot;);</span>
<a href="#l37.19"></a><span id="l37.19">     todo_check_true(false);</span>
<a href="#l37.20"></a><span id="l37.20"> </span>
<a href="#l37.21"></a><span id="l37.21">     endTest();</span>
<a href="#l37.22"></a><span id="l37.22">     return;</span>
<a href="#l37.23"></a><span id="l37.23">   }</span>
<a href="#l37.24"></a><span id="l37.24"> </span>
<a href="#l37.25"></a><span id="l37.25">   // &quot;Trash&quot; folder</span>
<a href="#l37.26"></a><span id="l37.26">   gLocalTrashFolder = localAccountUtils.incomingServer</span>
<a href="#l37.27"></a><span id="l37.27" class="difflineat">@@ -46,18 +46,18 @@ function run_test()</span>
<a href="#l37.28"></a><span id="l37.28">   // seek past 2GB.</span>
<a href="#l37.29"></a><span id="l37.29">   outputStream.seek(0, 0x80000010);</span>
<a href="#l37.30"></a><span id="l37.30">   // Write a &quot;space&quot; character.</span>
<a href="#l37.31"></a><span id="l37.31">   outputStream.write(&quot; &quot;, 1);</span>
<a href="#l37.32"></a><span id="l37.32">   outputStream.close();</span>
<a href="#l37.33"></a><span id="l37.33"> </span>
<a href="#l37.34"></a><span id="l37.34">   // Save initial file size.</span>
<a href="#l37.35"></a><span id="l37.35">   gLocalInboxSize = localAccountUtils.inboxFolder.filePath.fileSize;</span>
<a href="#l37.36"></a><span id="l37.36" class="difflineminus">-  do_print(&quot;Local inbox size (before copyFileMessageInLocalFolder()) = &quot; +</span>
<a href="#l37.37"></a><span id="l37.37" class="difflineminus">-           gLocalInboxSize);</span>
<a href="#l37.38"></a><span id="l37.38" class="difflineplus">+  info(&quot;Local inbox size (before copyFileMessageInLocalFolder()) = &quot; +</span>
<a href="#l37.39"></a><span id="l37.39" class="difflineplus">+       gLocalInboxSize);</span>
<a href="#l37.40"></a><span id="l37.40"> </span>
<a href="#l37.41"></a><span id="l37.41">   // Append mail data to over 2 GiB position for over 2 GiB msgkey.</span>
<a href="#l37.42"></a><span id="l37.42">   copyFileMessageInLocalFolder(bugmail10, 0, &quot;&quot;, null, copyMessages);</span>
<a href="#l37.43"></a><span id="l37.43"> }</span>
<a href="#l37.44"></a><span id="l37.44"> </span>
<a href="#l37.45"></a><span id="l37.45"> // Get message whose offset is over 2 GiB.</span>
<a href="#l37.46"></a><span id="l37.46"> function getMessageHdr()</span>
<a href="#l37.47"></a><span id="l37.47"> {</span>
<a href="#l37.48"></a><span id="l37.48" class="difflineat">@@ -71,18 +71,18 @@ function getMessageHdr()</span>
<a href="#l37.49"></a><span id="l37.49"> </span>
<a href="#l37.50"></a><span id="l37.50">   do_throw(&quot;Over 2 GiB msgkey was not found!&quot;);</span>
<a href="#l37.51"></a><span id="l37.51"> }</span>
<a href="#l37.52"></a><span id="l37.52"> </span>
<a href="#l37.53"></a><span id="l37.53"> function copyMessages()</span>
<a href="#l37.54"></a><span id="l37.54"> {</span>
<a href="#l37.55"></a><span id="l37.55">   // Make sure inbox file grew (i.e., we were not writing over data).</span>
<a href="#l37.56"></a><span id="l37.56">   let localInboxSize = localAccountUtils.inboxFolder.filePath.fileSize;</span>
<a href="#l37.57"></a><span id="l37.57" class="difflineminus">-  do_print(&quot;Local inbox size (after copyFileMessageInLocalFolder()) = &quot; +</span>
<a href="#l37.58"></a><span id="l37.58" class="difflineminus">-           localInboxSize);</span>
<a href="#l37.59"></a><span id="l37.59" class="difflineplus">+  info(&quot;Local inbox size (after copyFileMessageInLocalFolder()) = &quot; +</span>
<a href="#l37.60"></a><span id="l37.60" class="difflineplus">+       localInboxSize);</span>
<a href="#l37.61"></a><span id="l37.61">   Assert.ok(localInboxSize &gt; gLocalInboxSize);</span>
<a href="#l37.62"></a><span id="l37.62"> </span>
<a href="#l37.63"></a><span id="l37.63">   // Copy the message into the subfolder.</span>
<a href="#l37.64"></a><span id="l37.64">   let messages = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l37.65"></a><span id="l37.65">   messages.appendElement(getMessageHdr());</span>
<a href="#l37.66"></a><span id="l37.66">   MailServices.copy.CopyMessages(localAccountUtils.inboxFolder, messages,</span>
<a href="#l37.67"></a><span id="l37.67">                                  gLocalTrashFolder,</span>
<a href="#l37.68"></a><span id="l37.68">                                  false, copyListener2, null, false);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/mailnews/local/test/unit/test_over4GBMailboxes.js</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_over4GBMailboxes.js</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -150,18 +150,18 @@ function growInbox(aWantedSize) {</span>
<a href="#l38.4"></a><span id="l38.4"> </span>
<a href="#l38.5"></a><span id="l38.5">     // Refresh 'gInboxFile'.</span>
<a href="#l38.6"></a><span id="l38.6">     gInboxFile = gInbox.filePath;</span>
<a href="#l38.7"></a><span id="l38.7">     localSize = gInboxFile.clone().fileSize;</span>
<a href="#l38.8"></a><span id="l38.8">   }</span>
<a href="#l38.9"></a><span id="l38.9">   while (localSize &lt; aWantedSize);</span>
<a href="#l38.10"></a><span id="l38.10"> </span>
<a href="#l38.11"></a><span id="l38.11">   Assert.equal(gInboxFile.clone().fileSize, aWantedSize);</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-  do_print(&quot;Local inbox size = &quot; + localSize + &quot;bytes = &quot; +</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineminus">-           mailTestUtils.toMiBString(localSize));</span>
<a href="#l38.14"></a><span id="l38.14" class="difflineplus">+  info(&quot;Local inbox size = &quot; + localSize + &quot;bytes = &quot; +</span>
<a href="#l38.15"></a><span id="l38.15" class="difflineplus">+       mailTestUtils.toMiBString(localSize));</span>
<a href="#l38.16"></a><span id="l38.16">   Assert.equal(localSize, aWantedSize);</span>
<a href="#l38.17"></a><span id="l38.17">   return msgsAdded;</span>
<a href="#l38.18"></a><span id="l38.18"> }</span>
<a href="#l38.19"></a><span id="l38.19"> </span>
<a href="#l38.20"></a><span id="l38.20"> function run_test()</span>
<a href="#l38.21"></a><span id="l38.21"> {</span>
<a href="#l38.22"></a><span id="l38.22">   localAccountUtils.loadLocalMailAccount();</span>
<a href="#l38.23"></a><span id="l38.23"> </span>
<a href="#l38.24"></a><span id="l38.24" class="difflineat">@@ -183,20 +183,20 @@ function run_test()</span>
<a href="#l38.25"></a><span id="l38.25">   {</span>
<a href="#l38.26"></a><span id="l38.26">     dump(&quot;On Windows, this test only works on NTFS volumes.\n&quot;);</span>
<a href="#l38.27"></a><span id="l38.27"> </span>
<a href="#l38.28"></a><span id="l38.28">     endTest();</span>
<a href="#l38.29"></a><span id="l38.29">     return;</span>
<a href="#l38.30"></a><span id="l38.30">   }</span>
<a href="#l38.31"></a><span id="l38.31"> </span>
<a href="#l38.32"></a><span id="l38.32">   let freeDiskSpace = gInboxFile.diskSpaceAvailable;</span>
<a href="#l38.33"></a><span id="l38.33" class="difflineminus">-  do_print(&quot;Free disk space = &quot; + mailTestUtils.toMiBString(freeDiskSpace));</span>
<a href="#l38.34"></a><span id="l38.34" class="difflineplus">+  info(&quot;Free disk space = &quot; + mailTestUtils.toMiBString(freeDiskSpace));</span>
<a href="#l38.35"></a><span id="l38.35">   if (freeDiskSpace &lt; neededFreeSpace) {</span>
<a href="#l38.36"></a><span id="l38.36" class="difflineminus">-    do_print(&quot;This test needs &quot; + mailTestUtils.toMiBString(neededFreeSpace) +</span>
<a href="#l38.37"></a><span id="l38.37" class="difflineminus">-             &quot; free space to run. Aborting.&quot;);</span>
<a href="#l38.38"></a><span id="l38.38" class="difflineplus">+    info(&quot;This test needs &quot; + mailTestUtils.toMiBString(neededFreeSpace) +</span>
<a href="#l38.39"></a><span id="l38.39" class="difflineplus">+         &quot; free space to run. Aborting.&quot;);</span>
<a href="#l38.40"></a><span id="l38.40">     todo_check_true(false);</span>
<a href="#l38.41"></a><span id="l38.41"> </span>
<a href="#l38.42"></a><span id="l38.42">     endTest();</span>
<a href="#l38.43"></a><span id="l38.43">     return;</span>
<a href="#l38.44"></a><span id="l38.44">   }</span>
<a href="#l38.45"></a><span id="l38.45"> </span>
<a href="#l38.46"></a><span id="l38.46">   MailServices.mailSession.AddFolderListener(FListener, Ci.nsIFolderListener.all);</span>
<a href="#l38.47"></a><span id="l38.47"> </span>
<a href="#l38.48"></a><span id="l38.48" class="difflineat">@@ -332,36 +332,36 @@ function downloadOver4GiB_success_check(</span>
<a href="#l38.49"></a><span id="l38.49">  * Bug 598104</span>
<a href="#l38.50"></a><span id="l38.50">  * Check that copy operation does not allow to grow a local folder above 4 GiB.</span>
<a href="#l38.51"></a><span id="l38.51">  */</span>
<a href="#l38.52"></a><span id="l38.52"> function copyIntoOver4GiB_fail()</span>
<a href="#l38.53"></a><span id="l38.53"> {</span>
<a href="#l38.54"></a><span id="l38.54">   allow4GBFolders(false);</span>
<a href="#l38.55"></a><span id="l38.55">   // Save initial file size.</span>
<a href="#l38.56"></a><span id="l38.56">   let localInboxSize = gInboxFile.clone().fileSize;</span>
<a href="#l38.57"></a><span id="l38.57" class="difflineminus">-  do_print(&quot;Local inbox size (before copyFileMessageInLocalFolder()) = &quot; +</span>
<a href="#l38.58"></a><span id="l38.58" class="difflineminus">-           localInboxSize);</span>
<a href="#l38.59"></a><span id="l38.59" class="difflineplus">+  info(&quot;Local inbox size (before copyFileMessageInLocalFolder()) = &quot; +</span>
<a href="#l38.60"></a><span id="l38.60" class="difflineplus">+       localInboxSize);</span>
<a href="#l38.61"></a><span id="l38.61"> </span>
<a href="#l38.62"></a><span id="l38.62">   // Use copyFileMessageInLocalFolder() to (try to) append another message</span>
<a href="#l38.63"></a><span id="l38.63">   // to local inbox.</span>
<a href="#l38.64"></a><span id="l38.64">   gGotAlert = false;</span>
<a href="#l38.65"></a><span id="l38.65">   let file = do_get_file(&quot;../../../data/mime-torture&quot;);</span>
<a href="#l38.66"></a><span id="l38.66">   copyFileMessageInLocalFolder(file, 0, &quot;&quot;, gDummyMsgWindow, copyIntoOver4GiB_fail_check);</span>
<a href="#l38.67"></a><span id="l38.67"> }</span>
<a href="#l38.68"></a><span id="l38.68"> </span>
<a href="#l38.69"></a><span id="l38.69"> function copyIntoOver4GiB_fail_check(aMessageHeadersKeys, aStatus)</span>
<a href="#l38.70"></a><span id="l38.70"> {</span>
<a href="#l38.71"></a><span id="l38.71">   Assert.ok(!Components.isSuccessCode(aStatus));</span>
<a href="#l38.72"></a><span id="l38.72">   Assert.equal(aMessageHeadersKeys.length, 0);</span>
<a href="#l38.73"></a><span id="l38.73">   Assert.ok(gGotAlert);</span>
<a href="#l38.74"></a><span id="l38.74"> </span>
<a href="#l38.75"></a><span id="l38.75">   // Make sure inbox file did not grow (i.e., no data were appended).</span>
<a href="#l38.76"></a><span id="l38.76">   let newLocalInboxSize = gInboxFile.clone().fileSize;</span>
<a href="#l38.77"></a><span id="l38.77" class="difflineminus">-  do_print(&quot;Local inbox size (after copyFileMessageInLocalFolder()) = &quot; +</span>
<a href="#l38.78"></a><span id="l38.78" class="difflineminus">-           newLocalInboxSize);</span>
<a href="#l38.79"></a><span id="l38.79" class="difflineplus">+  info(&quot;Local inbox size (after copyFileMessageInLocalFolder()) = &quot; +</span>
<a href="#l38.80"></a><span id="l38.80" class="difflineplus">+       newLocalInboxSize);</span>
<a href="#l38.81"></a><span id="l38.81">   copyIntoOver4GiB_success();</span>
<a href="#l38.82"></a><span id="l38.82"> }</span>
<a href="#l38.83"></a><span id="l38.83"> </span>
<a href="#l38.84"></a><span id="l38.84"> /**</span>
<a href="#l38.85"></a><span id="l38.85">  * Bug 789679</span>
<a href="#l38.86"></a><span id="l38.86">  * Check that copy operation does allow to grow a local folder above 4 GiB.</span>
<a href="#l38.87"></a><span id="l38.87">  */</span>
<a href="#l38.88"></a><span id="l38.88"> function copyIntoOver4GiB_success()</span>
<a href="#l38.89"></a><span id="l38.89" class="difflineat">@@ -505,17 +505,17 @@ var CompactListener_compactOver4GiB =</span>
<a href="#l38.90"></a><span id="l38.90"> {</span>
<a href="#l38.91"></a><span id="l38.91">   OnStartRunningUrl: function (aUrl) {},</span>
<a href="#l38.92"></a><span id="l38.92">   OnStopRunningUrl: function (aUrl, aExitCode) {</span>
<a href="#l38.93"></a><span id="l38.93">     // Check: message successfully copied.</span>
<a href="#l38.94"></a><span id="l38.94">     Assert.equal(aExitCode, Cr.NS_OK);</span>
<a href="#l38.95"></a><span id="l38.95">     Assert.ok(gInbox.msgDatabase.summaryValid);</span>
<a href="#l38.96"></a><span id="l38.96">     // Check that folder size is still above max limit ...</span>
<a href="#l38.97"></a><span id="l38.97">     let localInboxSize = gInbox.filePath.clone().fileSize;</span>
<a href="#l38.98"></a><span id="l38.98" class="difflineminus">-    do_print(&quot;Local inbox size (after compact 1) = &quot; + localInboxSize);</span>
<a href="#l38.99"></a><span id="l38.99" class="difflineplus">+    info(&quot;Local inbox size (after compact 1) = &quot; + localInboxSize);</span>
<a href="#l38.100"></a><span id="l38.100">     Assert.ok(localInboxSize &gt; kSizeLimit);</span>
<a href="#l38.101"></a><span id="l38.101">     // ... but it got smaller by removing 1 message.</span>
<a href="#l38.102"></a><span id="l38.102">     Assert.ok(gInboxSize &gt; localInboxSize);</span>
<a href="#l38.103"></a><span id="l38.103">     Assert.equal(gInbox.sizeOnDisk, localInboxSize);</span>
<a href="#l38.104"></a><span id="l38.104"> </span>
<a href="#l38.105"></a><span id="l38.105">     compactUnder4GiB();</span>
<a href="#l38.106"></a><span id="l38.106">   }</span>
<a href="#l38.107"></a><span id="l38.107"> };</span>
<a href="#l38.108"></a><span id="l38.108" class="difflineat">@@ -525,17 +525,17 @@ var CompactListener_compactUnder4GiB =</span>
<a href="#l38.109"></a><span id="l38.109">   OnStartRunningUrl: function (aUrl) {},</span>
<a href="#l38.110"></a><span id="l38.110">   OnStopRunningUrl: function (aUrl, aExitCode) {</span>
<a href="#l38.111"></a><span id="l38.111">     // Check: message successfully copied.</span>
<a href="#l38.112"></a><span id="l38.112">     Assert.equal(aExitCode, Cr.NS_OK);</span>
<a href="#l38.113"></a><span id="l38.113">     Assert.ok(gInbox.msgDatabase.summaryValid);</span>
<a href="#l38.114"></a><span id="l38.114"> </span>
<a href="#l38.115"></a><span id="l38.115">     // Check that folder size isn't much bigger than our sparse block size, ...</span>
<a href="#l38.116"></a><span id="l38.116">     let localInboxSize = gInbox.filePath.clone().fileSize;</span>
<a href="#l38.117"></a><span id="l38.117" class="difflineminus">-    do_print(&quot;Local inbox size (after compact 2) = &quot; + localInboxSize);</span>
<a href="#l38.118"></a><span id="l38.118" class="difflineplus">+    info(&quot;Local inbox size (after compact 2) = &quot; + localInboxSize);</span>
<a href="#l38.119"></a><span id="l38.119">     Assert.equal(gInbox.sizeOnDisk, localInboxSize);</span>
<a href="#l38.120"></a><span id="l38.120">     Assert.ok(localInboxSize &lt; kSparseBlockSize + 1000);</span>
<a href="#l38.121"></a><span id="l38.121">     // ... i.e., that we just have one message.</span>
<a href="#l38.122"></a><span id="l38.122">     Assert.equal(gInbox.getTotalMessages(false), 1);</span>
<a href="#l38.123"></a><span id="l38.123">     Assert.equal(FListener.sizeHistory(0), gInbox.sizeOnDisk);</span>
<a href="#l38.124"></a><span id="l38.124">     Assert.equal(FListener.msgsHistory(0), 1);</span>
<a href="#l38.125"></a><span id="l38.125"> </span>
<a href="#l38.126"></a><span id="l38.126">     // The message has its key preserved in compact.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/mailnews/local/test/unit/test_pop3FilterActions.js</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_pop3FilterActions.js</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -143,11 +143,11 @@ function run_test()</span>
<a href="#l39.4"></a><span id="l39.4">   }</span>
<a href="#l39.5"></a><span id="l39.5"> </span>
<a href="#l39.6"></a><span id="l39.6">   add_task(exitTest);</span>
<a href="#l39.7"></a><span id="l39.7">   run_next_test();</span>
<a href="#l39.8"></a><span id="l39.8"> }</span>
<a href="#l39.9"></a><span id="l39.9"> </span>
<a href="#l39.10"></a><span id="l39.10"> function exitTest()</span>
<a href="#l39.11"></a><span id="l39.11"> {</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-  do_print(&quot;Exiting mail tests\n&quot;);</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+  info(&quot;Exiting mail tests\n&quot;);</span>
<a href="#l39.14"></a><span id="l39.14">   gPOP3Pump = null;</span>
<a href="#l39.15"></a><span id="l39.15"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/mailnews/local/test/unit/test_pop3MoveFilter.js</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_pop3MoveFilter.js</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -130,12 +130,12 @@ function run_test()</span>
<a href="#l40.4"></a><span id="l40.4"> </span>
<a href="#l40.5"></a><span id="l40.5">   add_task(exitTest);</span>
<a href="#l40.6"></a><span id="l40.6">   run_next_test();</span>
<a href="#l40.7"></a><span id="l40.7"> }</span>
<a href="#l40.8"></a><span id="l40.8"> </span>
<a href="#l40.9"></a><span id="l40.9"> function exitTest()</span>
<a href="#l40.10"></a><span id="l40.10"> {</span>
<a href="#l40.11"></a><span id="l40.11">   // Cleanup and exit the test.</span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-  do_print(&quot;Exiting mail tests\n&quot;);</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+  info(&quot;Exiting mail tests\n&quot;);</span>
<a href="#l40.14"></a><span id="l40.14">   gPOP3Pump = null;</span>
<a href="#l40.15"></a><span id="l40.15"> }</span>
<a href="#l40.16"></a><span id="l40.16"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/mailnews/local/test/unit/test_pop3MoveFilter2.js</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_pop3MoveFilter2.js</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -122,11 +122,11 @@ function run_test()</span>
<a href="#l41.4"></a><span id="l41.4"> </span>
<a href="#l41.5"></a><span id="l41.5">   add_task(exitTest);</span>
<a href="#l41.6"></a><span id="l41.6">   run_next_test();</span>
<a href="#l41.7"></a><span id="l41.7"> }</span>
<a href="#l41.8"></a><span id="l41.8"> </span>
<a href="#l41.9"></a><span id="l41.9"> function exitTest()</span>
<a href="#l41.10"></a><span id="l41.10"> {</span>
<a href="#l41.11"></a><span id="l41.11">   // Cleanup and exit the test.</span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-  do_print(&quot;Exiting mail tests\n&quot;);</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+  info(&quot;Exiting mail tests\n&quot;);</span>
<a href="#l41.14"></a><span id="l41.14">   gPOP3Pump = null;</span>
<a href="#l41.15"></a><span id="l41.15"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/mailnews/local/test/unit/test_saveMessage.js</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/mailnews/local/test/unit/test_saveMessage.js</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -7,17 +7,17 @@ Components.utils.import(&quot;resource:///mod</span>
<a href="#l42.4"></a><span id="l42.4"> var MSG_LINEBREAK = &quot;\r\n&quot;;</span>
<a href="#l42.5"></a><span id="l42.5"> var dot = do_get_file(&quot;data/dot&quot;);</span>
<a href="#l42.6"></a><span id="l42.6"> var saveFile = Services.dirsvc.get(&quot;TmpD&quot;, Ci.nsIFile);</span>
<a href="#l42.7"></a><span id="l42.7"> saveFile.append(dot.leafName + &quot;.eml&quot;);</span>
<a href="#l42.8"></a><span id="l42.8"> saveFile.createUnique(Ci.nsIFile.NORMAL_FILE_TYPE, 0o600);</span>
<a href="#l42.9"></a><span id="l42.9"> </span>
<a href="#l42.10"></a><span id="l42.10"> function run_test()</span>
<a href="#l42.11"></a><span id="l42.11"> {</span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-  do_register_cleanup(teardown);</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+  registerCleanupFunction(teardown);</span>
<a href="#l42.14"></a><span id="l42.14">   do_test_pending();</span>
<a href="#l42.15"></a><span id="l42.15">   do_timeout(10000, function() {</span>
<a href="#l42.16"></a><span id="l42.16">     do_throw('SaveMessageToDisk did not complete within 10 seconds' +</span>
<a href="#l42.17"></a><span id="l42.17">       '(incorrect messageURI?). ABORTING.');</span>
<a href="#l42.18"></a><span id="l42.18">   });</span>
<a href="#l42.19"></a><span id="l42.19">   copyFileMessageInLocalFolder(dot, 0, &quot;&quot;, null, save_message);</span>
<a href="#l42.20"></a><span id="l42.20"> }</span>
<a href="#l42.21"></a><span id="l42.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/mailnews/mime/jsmime/test/head_xpcshell_glue.js</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/mailnews/mime/jsmime/test/head_xpcshell_glue.js</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -92,31 +92,31 @@ function MochaSuite(name) {</span>
<a href="#l43.4"></a><span id="l43.4">   this.setup = [];</span>
<a href="#l43.5"></a><span id="l43.5">   this.tests = [];</span>
<a href="#l43.6"></a><span id="l43.6">   this.teardown = [];</span>
<a href="#l43.7"></a><span id="l43.7">   this.suites = [];</span>
<a href="#l43.8"></a><span id="l43.8"> }</span>
<a href="#l43.9"></a><span id="l43.9"> </span>
<a href="#l43.10"></a><span id="l43.10"> /// The real code for running a suite of tests, written as a generator.</span>
<a href="#l43.11"></a><span id="l43.11"> MochaSuite.prototype._runSuite = function *() {</span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-  do_print(&quot;Running suite &quot; + this.name);</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineplus">+  info(&quot;Running suite &quot; + this.name);</span>
<a href="#l43.14"></a><span id="l43.14">   for (let setup of this.setup) {</span>
<a href="#l43.15"></a><span id="l43.15">     yield runFunction(setup);</span>
<a href="#l43.16"></a><span id="l43.16">   }</span>
<a href="#l43.17"></a><span id="l43.17">   for (let test of this.tests) {</span>
<a href="#l43.18"></a><span id="l43.18" class="difflineminus">-    do_print(&quot;Running test &quot; + test.name);</span>
<a href="#l43.19"></a><span id="l43.19" class="difflineplus">+    info(&quot;Running test &quot; + test.name);</span>
<a href="#l43.20"></a><span id="l43.20">     yield runFunction(test.test);</span>
<a href="#l43.21"></a><span id="l43.21">   }</span>
<a href="#l43.22"></a><span id="l43.22">   for (let suite of this.suites) {</span>
<a href="#l43.23"></a><span id="l43.23">     yield suite.runSuite();</span>
<a href="#l43.24"></a><span id="l43.24">   }</span>
<a href="#l43.25"></a><span id="l43.25">   for (let fn of this.teardown) {</span>
<a href="#l43.26"></a><span id="l43.26">     yield runFunction(fn);</span>
<a href="#l43.27"></a><span id="l43.27">   }</span>
<a href="#l43.28"></a><span id="l43.28" class="difflineminus">-  do_print(&quot;Finished suite &quot; + this.name);</span>
<a href="#l43.29"></a><span id="l43.29" class="difflineplus">+  info(&quot;Finished suite &quot; + this.name);</span>
<a href="#l43.30"></a><span id="l43.30"> };</span>
<a href="#l43.31"></a><span id="l43.31"> </span>
<a href="#l43.32"></a><span id="l43.32"> /// The outer call to run a test suite, which returns a promise of completion.</span>
<a href="#l43.33"></a><span id="l43.33"> MochaSuite.prototype.runSuite = function () {</span>
<a href="#l43.34"></a><span id="l43.34">   return Task.spawn(this._runSuite.bind(this));</span>
<a href="#l43.35"></a><span id="l43.35"> };</span>
<a href="#l43.36"></a><span id="l43.36"> </span>
<a href="#l43.37"></a><span id="l43.37"> /// Run the given function, returning a promise of when the test will complete.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/mailnews/mime/test/unit/head_mime.js</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/mailnews/mime/test/unit/head_mime.js</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -8,11 +8,11 @@ var Ci = Components.interfaces;</span>
<a href="#l44.4"></a><span id="l44.4"> var Cr = Components.results;</span>
<a href="#l44.5"></a><span id="l44.5"> var CC = Components.Constructor;</span>
<a href="#l44.6"></a><span id="l44.6"> </span>
<a href="#l44.7"></a><span id="l44.7"> // Ensure the profile directory is set up</span>
<a href="#l44.8"></a><span id="l44.8"> do_get_profile();</span>
<a href="#l44.9"></a><span id="l44.9"> </span>
<a href="#l44.10"></a><span id="l44.10"> var gDEPTH = &quot;../../../../&quot;;</span>
<a href="#l44.11"></a><span id="l44.11"> </span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-do_register_cleanup(function() {</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+registerCleanupFunction(function() {</span>
<a href="#l44.14"></a><span id="l44.14">   load(gDEPTH + &quot;mailnews/resources/mailShutdown.js&quot;);</span>
<a href="#l44.15"></a><span id="l44.15"> });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/mailnews/mime/test/unit/test_alternate_p7m_handling.js</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/mailnews/mime/test/unit/test_alternate_p7m_handling.js</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -34,17 +34,17 @@ function* thunderbird_default(info) {</span>
<a href="#l45.4"></a><span id="l45.4">   let synSet = new SyntheticMessageSet([synMsg]);</span>
<a href="#l45.5"></a><span id="l45.5">   yield add_sets_to_folder(gInbox, [synSet]);</span>
<a href="#l45.6"></a><span id="l45.6"> </span>
<a href="#l45.7"></a><span id="l45.7">   let msgHdr = synSet.getMsgHdr(0);</span>
<a href="#l45.8"></a><span id="l45.8"> </span>
<a href="#l45.9"></a><span id="l45.9">   MsgHdrToMimeMessage(msgHdr, null, function (aMsgHdr, aMimeMsg) {</span>
<a href="#l45.10"></a><span id="l45.10">     try {</span>
<a href="#l45.11"></a><span id="l45.11">       Assert.ok(aMimeMsg.allUserAttachments.length == 0);</span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-      do_print(&quot;Strange p7m is discarded, so attachment number is 0 (thunderbird default behaviour)&quot;);</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+      info(&quot;Strange p7m is discarded, so attachment number is 0 (thunderbird default behaviour)&quot;);</span>
<a href="#l45.14"></a><span id="l45.14">       async_driver();</span>
<a href="#l45.15"></a><span id="l45.15">     } catch (err) {</span>
<a href="#l45.16"></a><span id="l45.16">       do_throw(err);</span>
<a href="#l45.17"></a><span id="l45.17">     }</span>
<a href="#l45.18"></a><span id="l45.18">   });</span>
<a href="#l45.19"></a><span id="l45.19"> </span>
<a href="#l45.20"></a><span id="l45.20">   yield false;</span>
<a href="#l45.21"></a><span id="l45.21"> }</span>
<a href="#l45.22"></a><span id="l45.22" class="difflineat">@@ -56,18 +56,18 @@ function* set_preference_to_true(info) {</span>
<a href="#l45.23"></a><span id="l45.23"> </span>
<a href="#l45.24"></a><span id="l45.24">   let msgHdr = synSet.getMsgHdr(0);</span>
<a href="#l45.25"></a><span id="l45.25"> </span>
<a href="#l45.26"></a><span id="l45.26">   Services.prefs.setBoolPref(&quot;mailnews.p7m_external&quot;, true);</span>
<a href="#l45.27"></a><span id="l45.27"> </span>
<a href="#l45.28"></a><span id="l45.28">   MsgHdrToMimeMessage(msgHdr, null, function (aMsgHdr, aMimeMsg) {</span>
<a href="#l45.29"></a><span id="l45.29">     try {</span>
<a href="#l45.30"></a><span id="l45.30">       Assert.ok(aMimeMsg.allUserAttachments.length == 1);</span>
<a href="#l45.31"></a><span id="l45.31" class="difflineminus">-      do_print(&quot;Setting preference mailnews.p7m_external to true&quot;);</span>
<a href="#l45.32"></a><span id="l45.32" class="difflineminus">-      do_print(&quot;Strange p7m is presented to the end user as attachment (attachment number = 1)&quot;);</span>
<a href="#l45.33"></a><span id="l45.33" class="difflineplus">+      info(&quot;Setting preference mailnews.p7m_external to true&quot;);</span>
<a href="#l45.34"></a><span id="l45.34" class="difflineplus">+      info(&quot;Strange p7m is presented to the end user as attachment (attachment number = 1)&quot;);</span>
<a href="#l45.35"></a><span id="l45.35">       async_driver();</span>
<a href="#l45.36"></a><span id="l45.36">     } catch (err) {</span>
<a href="#l45.37"></a><span id="l45.37">       do_throw(err);</span>
<a href="#l45.38"></a><span id="l45.38">     }</span>
<a href="#l45.39"></a><span id="l45.39">   });</span>
<a href="#l45.40"></a><span id="l45.40"> </span>
<a href="#l45.41"></a><span id="l45.41">   yield false;</span>
<a href="#l45.42"></a><span id="l45.42"> }</span>
<a href="#l45.43"></a><span id="l45.43" class="difflineat">@@ -79,18 +79,18 @@ function* set_preference_to_false(info) </span>
<a href="#l45.44"></a><span id="l45.44"> </span>
<a href="#l45.45"></a><span id="l45.45">   let msgHdr = synSet.getMsgHdr(0);</span>
<a href="#l45.46"></a><span id="l45.46"> </span>
<a href="#l45.47"></a><span id="l45.47">   Services.prefs.setBoolPref(&quot;mailnews.p7m_external&quot;, false);</span>
<a href="#l45.48"></a><span id="l45.48"> </span>
<a href="#l45.49"></a><span id="l45.49">   MsgHdrToMimeMessage(msgHdr, null, function (aMsgHdr, aMimeMsg) {</span>
<a href="#l45.50"></a><span id="l45.50">     try {</span>
<a href="#l45.51"></a><span id="l45.51">       Assert.ok(aMimeMsg.allUserAttachments.length == 0);</span>
<a href="#l45.52"></a><span id="l45.52" class="difflineminus">-      do_print(&quot;Setting preference mailnews.p7m_external to false&quot;);</span>
<a href="#l45.53"></a><span id="l45.53" class="difflineminus">-      do_print(&quot;Strange p7m is discarded, so attachment number is 0 (thunderbird default behaviour)&quot;);</span>
<a href="#l45.54"></a><span id="l45.54" class="difflineplus">+      info(&quot;Setting preference mailnews.p7m_external to false&quot;);</span>
<a href="#l45.55"></a><span id="l45.55" class="difflineplus">+      info(&quot;Strange p7m is discarded, so attachment number is 0 (thunderbird default behaviour)&quot;);</span>
<a href="#l45.56"></a><span id="l45.56">       async_driver();</span>
<a href="#l45.57"></a><span id="l45.57">     } catch (err) {</span>
<a href="#l45.58"></a><span id="l45.58">       do_throw(err);</span>
<a href="#l45.59"></a><span id="l45.59">     }</span>
<a href="#l45.60"></a><span id="l45.60">   });</span>
<a href="#l45.61"></a><span id="l45.61"> </span>
<a href="#l45.62"></a><span id="l45.62">   yield false;</span>
<a href="#l45.63"></a><span id="l45.63"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/mailnews/news/test/unit/head_server_setup.js</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/mailnews/news/test/unit/head_server_setup.js</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -245,12 +245,12 @@ var articleTextListener = {</span>
<a href="#l46.4"></a><span id="l46.4">                          .createInstance(Ci.nsIScriptableInputStream);</span>
<a href="#l46.5"></a><span id="l46.5"> </span>
<a href="#l46.6"></a><span id="l46.6">     scriptStream.init(aInputStream);</span>
<a href="#l46.7"></a><span id="l46.7"> </span>
<a href="#l46.8"></a><span id="l46.8">     this.data += scriptStream.read(aCount);</span>
<a href="#l46.9"></a><span id="l46.9">   }</span>
<a href="#l46.10"></a><span id="l46.10"> };</span>
<a href="#l46.11"></a><span id="l46.11"> </span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-do_register_cleanup(function() {</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+registerCleanupFunction(function() {</span>
<a href="#l46.14"></a><span id="l46.14">   load(&quot;../../../resources/mailShutdown.js&quot;);</span>
<a href="#l46.15"></a><span id="l46.15"> });</span>
<a href="#l46.16"></a><span id="l46.16"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/mailnews/test/resources/asyncTestUtils.js</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/mailnews/test/resources/asyncTestUtils.js</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -129,17 +129,17 @@ function async_run(aArgs) {</span>
<a href="#l47.4"></a><span id="l47.4">  * Note: This function actually schedules the real driver to run after a</span>
<a href="#l47.5"></a><span id="l47.5">  *  timeout. This is to ensure that if you call us from a notification event</span>
<a href="#l47.6"></a><span id="l47.6">  *  that all the other things getting notified get a chance to do their work</span>
<a href="#l47.7"></a><span id="l47.7">  *  before we actually continue execution.  It also keeps our stack traces</span>
<a href="#l47.8"></a><span id="l47.8">  *  cleaner.</span>
<a href="#l47.9"></a><span id="l47.9">  */</span>
<a href="#l47.10"></a><span id="l47.10"> function async_driver(val) {</span>
<a href="#l47.11"></a><span id="l47.11">   asyncGeneratorSendValue = val;</span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-  do_execute_soon(_async_driver);</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineplus">+  executeSoon(_async_driver);</span>
<a href="#l47.14"></a><span id="l47.14">   return false;</span>
<a href="#l47.15"></a><span id="l47.15"> }</span>
<a href="#l47.16"></a><span id="l47.16"> </span>
<a href="#l47.17"></a><span id="l47.17"> /**</span>
<a href="#l47.18"></a><span id="l47.18">  * Sentinel object that test helpers can throw to cause a generator stack to</span>
<a href="#l47.19"></a><span id="l47.19">  *  abort without triggering a test failure.  You would use this when you wrap</span>
<a href="#l47.20"></a><span id="l47.20">  *  a utility function to inject faults into the calling function so that you</span>
<a href="#l47.21"></a><span id="l47.21">  *  can control how far the logic gets.  This allows testing of multi-step logic</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/mailnews/test/resources/logHelper.js</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/mailnews/test/resources/logHelper.js</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -81,21 +81,21 @@ var _errorConsoleTunnel = {</span>
<a href="#l48.4"></a><span id="l48.4">                 XPCOMresult = result;</span>
<a href="#l48.5"></a><span id="l48.5">                 break;</span>
<a href="#l48.6"></a><span id="l48.6">               }</span>
<a href="#l48.7"></a><span id="l48.7">             }</span>
<a href="#l48.8"></a><span id="l48.8">             let message = XPCOMresult || aMessage;</span>
<a href="#l48.9"></a><span id="l48.9">             if (logHelperAllowedErrors.some(e =&gt; e == matches[1]))</span>
<a href="#l48.10"></a><span id="l48.10">             {</span>
<a href="#l48.11"></a><span id="l48.11">               if (XPCOMresult)</span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-                do_print(&quot;Ignoring XPCOM error: &quot; + message);</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineplus">+                info(&quot;Ignoring XPCOM error: &quot; + message);</span>
<a href="#l48.14"></a><span id="l48.14">               return;</span>
<a href="#l48.15"></a><span id="l48.15">             }</span>
<a href="#l48.16"></a><span id="l48.16">             else</span>
<a href="#l48.17"></a><span id="l48.17" class="difflineminus">-              do_print(&quot;Found XPCOM error: &quot; + message);</span>
<a href="#l48.18"></a><span id="l48.18" class="difflineplus">+              info(&quot;Found XPCOM error: &quot; + message);</span>
<a href="#l48.19"></a><span id="l48.19">           }</span>
<a href="#l48.20"></a><span id="l48.20">           mark_failure([&quot;Error console says&quot;, aMessage]);</span>
<a href="#l48.21"></a><span id="l48.21">         }</span>
<a href="#l48.22"></a><span id="l48.22">     }</span>
<a href="#l48.23"></a><span id="l48.23">     catch (ex) {</span>
<a href="#l48.24"></a><span id="l48.24">       // This is to avoid pathological error loops.  we definitely do not</span>
<a href="#l48.25"></a><span id="l48.25">       // want to propagate an error here.</span>
<a href="#l48.26"></a><span id="l48.26">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/suite/common/places/tests/autocomplete/test_tabmatches.js</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/suite/common/places/tests/autocomplete/test_tabmatches.js</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -1,17 +1,17 @@</span>
<a href="#l49.4"></a><span id="l49.4"> /* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-</span>
<a href="#l49.5"></a><span id="l49.5">  * vim:set ts=2 sw=2 sts=2 et:</span>
<a href="#l49.6"></a><span id="l49.6">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l49.7"></a><span id="l49.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l49.8"></a><span id="l49.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l49.9"></a><span id="l49.9"> </span>
<a href="#l49.10"></a><span id="l49.10"> var gTabRestrictChar = &quot;%&quot;;</span>
<a href="#l49.11"></a><span id="l49.11"> prefs.setCharPref(&quot;browser.urlbar.restrict.openpage&quot;, gTabRestrictChar);</span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-do_register_cleanup(() =&gt; {</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineplus">+registerCleanupFunction(() =&gt; {</span>
<a href="#l49.14"></a><span id="l49.14">   prefs.clearUserPref(&quot;browser.urlbar.restrict.openpage&quot;);</span>
<a href="#l49.15"></a><span id="l49.15"> });</span>
<a href="#l49.16"></a><span id="l49.16"> </span>
<a href="#l49.17"></a><span id="l49.17"> var kSearchParam = &quot;enable-actions&quot;;</span>
<a href="#l49.18"></a><span id="l49.18"> </span>
<a href="#l49.19"></a><span id="l49.19"> var kURIs = [</span>
<a href="#l49.20"></a><span id="l49.20">   &quot;http://abc.com/&quot;,</span>
<a href="#l49.21"></a><span id="l49.21">   &quot;moz-action:switchtab,http://abc.com/&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/suite/common/places/tests/head_common.js</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/suite/common/places/tests/head_common.js</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -374,27 +374,27 @@ function promiseTopicObserved(aTopic)</span>
<a href="#l50.4"></a><span id="l50.4">     }, aTopic);</span>
<a href="#l50.5"></a><span id="l50.5">   });</span>
<a href="#l50.6"></a><span id="l50.6"> }</span>
<a href="#l50.7"></a><span id="l50.7"> </span>
<a href="#l50.8"></a><span id="l50.8"> /**</span>
<a href="#l50.9"></a><span id="l50.9">  * Simulates a Places shutdown.</span>
<a href="#l50.10"></a><span id="l50.10">  */</span>
<a href="#l50.11"></a><span id="l50.11"> var shutdownPlaces = function() {</span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-  do_print(&quot;shutdownPlaces: starting&quot;);</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineplus">+  info(&quot;shutdownPlaces: starting&quot;);</span>
<a href="#l50.14"></a><span id="l50.14">   let promise = new Promise(resolve =&gt; {</span>
<a href="#l50.15"></a><span id="l50.15">     Services.obs.addObserver(resolve, &quot;places-connection-closed&quot;);</span>
<a href="#l50.16"></a><span id="l50.16">   });</span>
<a href="#l50.17"></a><span id="l50.17">   let hs = PlacesUtils.history.QueryInterface(Ci.nsIObserver);</span>
<a href="#l50.18"></a><span id="l50.18">   hs.observe(null, &quot;profile-change-teardown&quot;, null);</span>
<a href="#l50.19"></a><span id="l50.19" class="difflineminus">-  do_print(&quot;shutdownPlaces: sent profile-change-teardown&quot;);</span>
<a href="#l50.20"></a><span id="l50.20" class="difflineplus">+  info(&quot;shutdownPlaces: sent profile-change-teardown&quot;);</span>
<a href="#l50.21"></a><span id="l50.21">   hs.observe(null, &quot;test-simulate-places-shutdown&quot;, null);</span>
<a href="#l50.22"></a><span id="l50.22" class="difflineminus">-  do_print(&quot;shutdownPlaces: sent test-simulate-places-shutdown&quot;);</span>
<a href="#l50.23"></a><span id="l50.23" class="difflineplus">+  info(&quot;shutdownPlaces: sent test-simulate-places-shutdown&quot;);</span>
<a href="#l50.24"></a><span id="l50.24">   return promise.then(() =&gt; {</span>
<a href="#l50.25"></a><span id="l50.25" class="difflineminus">-    do_print(&quot;shutdownPlaces: complete&quot;);</span>
<a href="#l50.26"></a><span id="l50.26" class="difflineplus">+    info(&quot;shutdownPlaces: complete&quot;);</span>
<a href="#l50.27"></a><span id="l50.27">   });</span>
<a href="#l50.28"></a><span id="l50.28"> };</span>
<a href="#l50.29"></a><span id="l50.29"> </span>
<a href="#l50.30"></a><span id="l50.30"> const FILENAME_BOOKMARKS_HTML = &quot;bookmarks.html&quot;;</span>
<a href="#l50.31"></a><span id="l50.31"> const FILENAME_BOOKMARKS_JSON = &quot;bookmarks-&quot; +</span>
<a href="#l50.32"></a><span id="l50.32">   (PlacesBackups.toISODateString(new Date())) + &quot;.json&quot;;</span>
<a href="#l50.33"></a><span id="l50.33"> </span>
<a href="#l50.34"></a><span id="l50.34"> /**</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/suite/common/places/tests/unit/test_browserGlue_prefs.js</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/suite/common/places/tests/unit/test_browserGlue_prefs.js</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -29,17 +29,17 @@ const PREF_IMPORT_BOOKMARKS_HTML = &quot;brow</span>
<a href="#l51.4"></a><span id="l51.4"> const PREF_RESTORE_DEFAULT_BOOKMARKS = &quot;browser.bookmarks.restore_default_bookmarks&quot;;</span>
<a href="#l51.5"></a><span id="l51.5"> const PREF_SMART_BOOKMARKS_VERSION = &quot;browser.places.smartBookmarksVersion&quot;;</span>
<a href="#l51.6"></a><span id="l51.6"> const PREF_AUTO_EXPORT_HTML = &quot;browser.bookmarks.autoExportHTML&quot;;</span>
<a href="#l51.7"></a><span id="l51.7"> </span>
<a href="#l51.8"></a><span id="l51.8"> function waitForImportAndSmartBookmarks(aCallback) {</span>
<a href="#l51.9"></a><span id="l51.9">   Services.obs.addObserver(function waitImport() {</span>
<a href="#l51.10"></a><span id="l51.10">     Services.obs.removeObserver(waitImport, &quot;bookmarks-restore-success&quot;);</span>
<a href="#l51.11"></a><span id="l51.11">     // Delay to test eventual smart bookmarks creation.</span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-    do_execute_soon(function () {</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineplus">+    executeSoon(function () {</span>
<a href="#l51.14"></a><span id="l51.14">       promiseAsyncUpdates().then(aCallback);</span>
<a href="#l51.15"></a><span id="l51.15">     });</span>
<a href="#l51.16"></a><span id="l51.16">   }, &quot;bookmarks-restore-success&quot;);</span>
<a href="#l51.17"></a><span id="l51.17"> }</span>
<a href="#l51.18"></a><span id="l51.18"> </span>
<a href="#l51.19"></a><span id="l51.19"> var tests = [];</span>
<a href="#l51.20"></a><span id="l51.20"> //------------------------------------------------------------------------------</span>
<a href="#l51.21"></a><span id="l51.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/suite/common/places/tests/unit/test_browserGlue_smartBookmarks.js</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/suite/common/places/tests/unit/test_browserGlue_smartBookmarks.js</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -339,13 +339,13 @@ function run_test() {</span>
<a href="#l52.4"></a><span id="l52.4"> </span>
<a href="#l52.5"></a><span id="l52.5">   waitForImportAndSmartBookmarks(next_test);</span>
<a href="#l52.6"></a><span id="l52.6"> }</span>
<a href="#l52.7"></a><span id="l52.7"> </span>
<a href="#l52.8"></a><span id="l52.8"> function waitForImportAndSmartBookmarks(aCallback) {</span>
<a href="#l52.9"></a><span id="l52.9">   Services.obs.addObserver(function waitImport() {</span>
<a href="#l52.10"></a><span id="l52.10">     Services.obs.removeObserver(waitImport, &quot;bookmarks-restore-success&quot;);</span>
<a href="#l52.11"></a><span id="l52.11">     // Delay to test eventual smart bookmarks creation.</span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-    do_execute_soon(function () {</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineplus">+    executeSoon(function () {</span>
<a href="#l52.14"></a><span id="l52.14">       promiseAsyncUpdates().then(aCallback);</span>
<a href="#l52.15"></a><span id="l52.15">     });</span>
<a href="#l52.16"></a><span id="l52.16">   }, &quot;bookmarks-restore-success&quot;);</span>
<a href="#l52.17"></a><span id="l52.17"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/suite/common/places/tests/unit/test_clearHistory_shutdown.js</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/suite/common/places/tests/unit/test_clearHistory_shutdown.js</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -148,17 +148,17 @@ function storeCache(aURL, aContent) {</span>
<a href="#l53.4"></a><span id="l53.4">       var written = os.write(aContent, aContent.length);</span>
<a href="#l53.5"></a><span id="l53.5">       if (written != aContent.length) {</span>
<a href="#l53.6"></a><span id="l53.6">         do_throw(&quot;os.write has not written all data!\n&quot; +</span>
<a href="#l53.7"></a><span id="l53.7">                  &quot;  Expected: &quot; + written  + &quot;\n&quot; +</span>
<a href="#l53.8"></a><span id="l53.8">                  &quot;  Actual: &quot; + aContent.length + &quot;\n&quot;);</span>
<a href="#l53.9"></a><span id="l53.9">       }</span>
<a href="#l53.10"></a><span id="l53.10">       os.close();</span>
<a href="#l53.11"></a><span id="l53.11">       entry.close();</span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-      do_execute_soon(run_test_continue);</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineplus">+      executeSoon(run_test_continue);</span>
<a href="#l53.14"></a><span id="l53.14">     }</span>
<a href="#l53.15"></a><span id="l53.15">   };</span>
<a href="#l53.16"></a><span id="l53.16"> </span>
<a href="#l53.17"></a><span id="l53.17">   session.asyncOpenCacheEntry(aURL,</span>
<a href="#l53.18"></a><span id="l53.18">                               Ci.nsICache.ACCESS_READ_WRITE,</span>
<a href="#l53.19"></a><span id="l53.19">                               storeCacheListener);</span>
<a href="#l53.20"></a><span id="l53.20"> }</span>
<a href="#l53.21"></a><span id="l53.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/suite/modules/test/unit/test_browser_sanitizer.js</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/suite/modules/test/unit/test_browser_sanitizer.js</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -295,33 +295,33 @@ var sanTests = {</span>
<a href="#l54.4"></a><span id="l54.4">       } catch(ex) {}</span>
<a href="#l54.5"></a><span id="l54.5"> </span>
<a href="#l54.6"></a><span id="l54.6">       Assert.equal(domain.value == &quot;Foo&quot;, !aShouldBeCleared);</span>
<a href="#l54.7"></a><span id="l54.7">     }</span>
<a href="#l54.8"></a><span id="l54.8">   }</span>
<a href="#l54.9"></a><span id="l54.9"> }</span>
<a href="#l54.10"></a><span id="l54.10"> </span>
<a href="#l54.11"></a><span id="l54.11"> async function fullSanitize() {</span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-  do_print(&quot;Now doing a full sanitize run&quot;);</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineplus">+  info(&quot;Now doing a full sanitize run&quot;);</span>
<a href="#l54.14"></a><span id="l54.14">   var prefs = Services.prefs.getBranch(&quot;privacy.item.&quot;);</span>
<a href="#l54.15"></a><span id="l54.15"> </span>
<a href="#l54.16"></a><span id="l54.16">   Services.prefs.setBoolPref(&quot;privacy.sanitize.promptOnSanitize&quot;, false);</span>
<a href="#l54.17"></a><span id="l54.17"> </span>
<a href="#l54.18"></a><span id="l54.18">   for (var testName in sanTests) {</span>
<a href="#l54.19"></a><span id="l54.19">     var test = sanTests[testName];</span>
<a href="#l54.20"></a><span id="l54.20">     await test.setup();</span>
<a href="#l54.21"></a><span id="l54.21">     prefs.setBoolPref(testName, true);</span>
<a href="#l54.22"></a><span id="l54.22">   }</span>
<a href="#l54.23"></a><span id="l54.23"> </span>
<a href="#l54.24"></a><span id="l54.24">   Sanitizer.sanitize();</span>
<a href="#l54.25"></a><span id="l54.25"> </span>
<a href="#l54.26"></a><span id="l54.26">   for (var testName in sanTests) {</span>
<a href="#l54.27"></a><span id="l54.27">     var test = sanTests[testName];</span>
<a href="#l54.28"></a><span id="l54.28">     await test.check(true);</span>
<a href="#l54.29"></a><span id="l54.29" class="difflineminus">-    do_print(test.desc + &quot; data cleared by full sanitize&quot;);</span>
<a href="#l54.30"></a><span id="l54.30" class="difflineplus">+    info(test.desc + &quot; data cleared by full sanitize&quot;);</span>
<a href="#l54.31"></a><span id="l54.31">     try {</span>
<a href="#l54.32"></a><span id="l54.32">       prefs.clearUserPref(testName);</span>
<a href="#l54.33"></a><span id="l54.33">     } catch (ex) {}</span>
<a href="#l54.34"></a><span id="l54.34">   }</span>
<a href="#l54.35"></a><span id="l54.35"> </span>
<a href="#l54.36"></a><span id="l54.36">   try {</span>
<a href="#l54.37"></a><span id="l54.37">     Services.prefs.clearUserPref(&quot;privacy.sanitize.promptOnSanitize&quot;);</span>
<a href="#l54.38"></a><span id="l54.38">   } catch(ex) {}</span>
<a href="#l54.39"></a><span id="l54.39" class="difflineat">@@ -337,15 +337,15 @@ add_task(async function test_browser_san</span>
<a href="#l54.40"></a><span id="l54.40">   for (var testName in sanTests) {</span>
<a href="#l54.41"></a><span id="l54.41">     let test = sanTests[testName];</span>
<a href="#l54.42"></a><span id="l54.42">     dump(&quot;\nExecuting test: &quot; + testName + &quot;\n&quot; + &quot;*** &quot; + test.desc + &quot;\n&quot;);</span>
<a href="#l54.43"></a><span id="l54.43">     await test.setup();</span>
<a href="#l54.44"></a><span id="l54.44">     await test.check(false);</span>
<a href="#l54.45"></a><span id="l54.45"> </span>
<a href="#l54.46"></a><span id="l54.46">     Assert.ok(Sanitizer.items[testName].canClear);</span>
<a href="#l54.47"></a><span id="l54.47">     Sanitizer.items[testName].clear();</span>
<a href="#l54.48"></a><span id="l54.48" class="difflineminus">-    do_print(test.desc + &quot; data cleared&quot;);</span>
<a href="#l54.49"></a><span id="l54.49" class="difflineplus">+    info(test.desc + &quot; data cleared&quot;);</span>
<a href="#l54.50"></a><span id="l54.50"> </span>
<a href="#l54.51"></a><span id="l54.51">     await test.check(true);</span>
<a href="#l54.52"></a><span id="l54.52">   }</span>
<a href="#l54.53"></a><span id="l54.53"> });</span>
<a href="#l54.54"></a><span id="l54.54"> </span>
<a href="#l54.55"></a><span id="l54.55"> add_task(fullSanitize);</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

