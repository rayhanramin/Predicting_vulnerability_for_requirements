<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 23730:2530e8642a6199bb05de5281d1df7f91936e8b37</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 2530e8642a6199bb05de5281d1df7f91936e8b37" />
<meta property="og:url" content="/comm-central/rev/2530e8642a6199bb05de5281d1df7f91936e8b37" />
<meta property="og:description" content="Bug 1440490 - Move l10n related functions into calL10NUtils.jsm - part 3 - migrate getCalString. r=MakeMyDay" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 2530e8642a6199bb05de5281d1df7f91936e8b37 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/2530e8642a6199bb05de5281d1df7f91936e8b37">shortlog</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/2530e8642a6199bb05de5281d1df7f91936e8b37">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37">files</a> |
changeset |
<a href="/comm-central/raw-rev/2530e8642a6199bb05de5281d1df7f91936e8b37">raw</a>  | <a href="/comm-central/archive/2530e8642a6199bb05de5281d1df7f91936e8b37.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1440490">Bug 1440490</a> - Move l10n related functions into calL10NUtils.jsm - part 3 - migrate getCalString. r=MakeMyDay
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#80;&#104;&#105;&#108;&#105;&#112;&#112;&#32;&#75;&#101;&#119;&#105;&#115;&#99;&#104;&#32;&#60;&#109;&#111;&#122;&#105;&#108;&#108;&#97;&#64;&#107;&#101;&#119;&#105;&#115;&#46;&#99;&#104;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 22 Feb 2018 07:43:54 +0100</td></tr>

<tr>
 <td>changeset 23730</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/2530e8642a6199bb05de5281d1df7f91936e8b37">2530e8642a6199bb05de5281d1df7f91936e8b37</a></td>
</tr>



<tr>
<td>parent 23729</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/1c3ccf7a769f71b64aef3a9317044474e461a2f4">1c3ccf7a769f71b64aef3a9317044474e461a2f4</a>
</td>
</tr>

<tr>
<td>child 23731</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/b8fa40ac976b15f3840417a78059ec92d815eb90">b8fa40ac976b15f3840417a78059ec92d815eb90</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=2530e8642a6199bb05de5281d1df7f91936e8b37">14318</a></td></tr>
<tr><td>push user</td><td>mozilla@kewis.ch</td></tr>
<tr><td>push date</td><td class="date age">Sat, 14 Apr 2018 20:53:18 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@56a8323d4235 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=56a8323d4235bb4edbc60b455d3590100a4af34d">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=56a8323d4235bb4edbc60b455d3590100a4af34d&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=56a8323d4235bb4edbc60b455d3590100a4af34d&newProject=comm-central&newRevision=2a4475b8555b7ca273fa96b199621a4360d510f7&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=56a8323d4235bb4edbc60b455d3590100a4af34d&newProject=comm-central&newRevision=2a4475b8555b7ca273fa96b199621a4360d510f7&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=56a8323d4235bb4edbc60b455d3590100a4af34d&newProject=comm-central&newRevision=2a4475b8555b7ca273fa96b199621a4360d510f7&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28MakeMyDay%29&revcount=50">MakeMyDay</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1440490">1440490</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1440490">Bug 1440490</a> - Move l10n related functions into calL10NUtils.jsm - part 3 - migrate getCalString. r=MakeMyDay

MozReview-Commit-ID: 4rjjnuh2Du6</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-base-view.xml">calendar/base/content/calendar-base-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-base-view.xml">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-base-view.xml">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-base-view.xml">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-base-view.xml">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-base-view.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-clipboard.js">calendar/base/content/calendar-clipboard.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-clipboard.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-clipboard.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-clipboard.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-clipboard.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-clipboard.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-common-sets.js">calendar/base/content/calendar-common-sets.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-common-sets.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-common-sets.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-common-sets.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-common-sets.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-common-sets.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-extract.js">calendar/base/content/calendar-extract.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-extract.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-extract.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-extract.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-extract.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-extract.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-item-bindings.xml">calendar/base/content/calendar-item-bindings.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-item-bindings.xml">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-item-bindings.xml">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-item-bindings.xml">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-item-bindings.xml">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-item-bindings.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-management.js">calendar/base/content/calendar-management.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-management.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-management.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-management.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-management.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-management.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-month-view.xml">calendar/base/content/calendar-month-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-month-view.xml">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-month-view.xml">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-month-view.xml">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-month-view.xml">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-month-view.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-multiday-view.xml">calendar/base/content/calendar-multiday-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-multiday-view.xml">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-multiday-view.xml">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-multiday-view.xml">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-multiday-view.xml">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-multiday-view.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-statusbar.js">calendar/base/content/calendar-statusbar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-statusbar.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-statusbar.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-statusbar.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-statusbar.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-statusbar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-task-editing.js">calendar/base/content/calendar-task-editing.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-task-editing.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-task-editing.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-task-editing.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-task-editing.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-task-editing.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-task-tree.xml">calendar/base/content/calendar-task-tree.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-task-tree.xml">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-task-tree.xml">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-task-tree.xml">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-task-tree.xml">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-task-tree.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-task-view.js">calendar/base/content/calendar-task-view.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-task-view.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-task-view.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-task-view.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-task-view.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-task-view.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-ui-utils.js">calendar/base/content/calendar-ui-utils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-ui-utils.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-ui-utils.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-ui-utils.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-ui-utils.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-ui-utils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-view-core.xml">calendar/base/content/calendar-view-core.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-view-core.xml">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-view-core.xml">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-view-core.xml">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-view-core.xml">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-view-core.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-views.js">calendar/base/content/calendar-views.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-views.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-views.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-views.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-views.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-views.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-views.xml">calendar/base/content/calendar-views.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-views.xml">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-views.xml">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-views.xml">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-views.xml">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/calendar-views.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-alarm-dialog.js">calendar/base/content/dialogs/calendar-alarm-dialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-alarm-dialog.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-alarm-dialog.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-alarm-dialog.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-alarm-dialog.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-alarm-dialog.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-conflicts-dialog.xul">calendar/base/content/dialogs/calendar-conflicts-dialog.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-conflicts-dialog.xul">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-conflicts-dialog.xul">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-conflicts-dialog.xul">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-conflicts-dialog.xul">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-conflicts-dialog.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-creation.js">calendar/base/content/dialogs/calendar-creation.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-creation.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-creation.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-creation.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-creation.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-creation.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-dialog-utils.js">calendar/base/content/dialogs/calendar-dialog-utils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-dialog-utils.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-dialog-utils.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-dialog-utils.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-dialog-utils.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-dialog-utils.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-event-dialog-attendees.js">calendar/base/content/dialogs/calendar-event-dialog-attendees.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-event-dialog-attendees.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-event-dialog-attendees.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-event-dialog-attendees.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-event-dialog-attendees.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-event-dialog-attendees.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">calendar/base/content/dialogs/calendar-event-dialog-recurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-migration-dialog.js">calendar/base/content/dialogs/calendar-migration-dialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-migration-dialog.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-migration-dialog.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-migration-dialog.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-migration-dialog.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-migration-dialog.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-print-dialog.js">calendar/base/content/dialogs/calendar-print-dialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-print-dialog.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-print-dialog.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-print-dialog.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-print-dialog.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-print-dialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-properties-dialog.js">calendar/base/content/dialogs/calendar-properties-dialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-properties-dialog.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-properties-dialog.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-properties-dialog.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-properties-dialog.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-properties-dialog.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-summary-dialog.js">calendar/base/content/dialogs/calendar-summary-dialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-summary-dialog.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-summary-dialog.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-summary-dialog.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-summary-dialog.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/dialogs/calendar-summary-dialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/import-export.js">calendar/base/content/import-export.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/import-export.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/import-export.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/import-export.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/import-export.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/import-export.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/today-pane.js">calendar/base/content/today-pane.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/today-pane.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/today-pane.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/today-pane.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/today-pane.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/today-pane.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/widgets/calendar-alarm-widget.xml">calendar/base/content/widgets/calendar-alarm-widget.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/widgets/calendar-alarm-widget.xml">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/widgets/calendar-alarm-widget.xml">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/widgets/calendar-alarm-widget.xml">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/widgets/calendar-alarm-widget.xml">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/widgets/calendar-alarm-widget.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/widgets/minimonth.xml">calendar/base/content/widgets/minimonth.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/widgets/minimonth.xml">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/widgets/minimonth.xml">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/widgets/minimonth.xml">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/widgets/minimonth.xml">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/content/widgets/minimonth.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/modules/calItipUtils.jsm">calendar/base/modules/calItipUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/modules/calItipUtils.jsm">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/modules/calItipUtils.jsm">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/modules/calItipUtils.jsm">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/modules/calItipUtils.jsm">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/modules/calItipUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/modules/calPrintUtils.jsm">calendar/base/modules/calPrintUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/modules/calPrintUtils.jsm">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/modules/calPrintUtils.jsm">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/modules/calPrintUtils.jsm">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/modules/calPrintUtils.jsm">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/modules/calPrintUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/modules/calUtils.jsm">calendar/base/modules/calUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/modules/calUtils.jsm">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/modules/calUtils.jsm">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/modules/calUtils.jsm">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/modules/calUtils.jsm">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/modules/calUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calAlarm.js">calendar/base/src/calAlarm.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calAlarm.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calAlarm.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calAlarm.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calAlarm.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calAlarm.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calCalendarManager.js">calendar/base/src/calCalendarManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calCalendarManager.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calCalendarManager.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calCalendarManager.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calCalendarManager.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calCalendarManager.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calDateTimeFormatter.js">calendar/base/src/calDateTimeFormatter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calDateTimeFormatter.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calDateTimeFormatter.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calDateTimeFormatter.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calDateTimeFormatter.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calDateTimeFormatter.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calIcsParser.js">calendar/base/src/calIcsParser.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calIcsParser.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calIcsParser.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calIcsParser.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calIcsParser.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calIcsParser.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calTimezoneService.js">calendar/base/src/calTimezoneService.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calTimezoneService.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calTimezoneService.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calTimezoneService.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calTimezoneService.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/base/src/calTimezoneService.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calHtmlExport.js">calendar/import-export/calHtmlExport.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calHtmlExport.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calHtmlExport.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calHtmlExport.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calHtmlExport.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calHtmlExport.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calIcsImportExport.js">calendar/import-export/calIcsImportExport.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calIcsImportExport.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calIcsImportExport.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calIcsImportExport.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calIcsImportExport.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calIcsImportExport.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calListFormatter.js">calendar/import-export/calListFormatter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calListFormatter.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calListFormatter.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calListFormatter.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calListFormatter.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calListFormatter.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calMonthGridPrinter.js">calendar/import-export/calMonthGridPrinter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calMonthGridPrinter.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calMonthGridPrinter.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calMonthGridPrinter.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calMonthGridPrinter.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calMonthGridPrinter.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calOutlookCSVImportExport.js">calendar/import-export/calOutlookCSVImportExport.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calOutlookCSVImportExport.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calOutlookCSVImportExport.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calOutlookCSVImportExport.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calOutlookCSVImportExport.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calOutlookCSVImportExport.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calWeekPrinter.js">calendar/import-export/calWeekPrinter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calWeekPrinter.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calWeekPrinter.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calWeekPrinter.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calWeekPrinter.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/import-export/calWeekPrinter.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/lightning/content/lightning-item-iframe.js">calendar/lightning/content/lightning-item-iframe.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/lightning/content/lightning-item-iframe.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/lightning/content/lightning-item-iframe.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/lightning/content/lightning-item-iframe.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/lightning/content/lightning-item-iframe.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/lightning/content/lightning-item-iframe.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/lightning/content/messenger-overlay-sidebar.js">calendar/lightning/content/messenger-overlay-sidebar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/lightning/content/messenger-overlay-sidebar.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/lightning/content/messenger-overlay-sidebar.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/lightning/content/messenger-overlay-sidebar.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/lightning/content/messenger-overlay-sidebar.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/lightning/content/messenger-overlay-sidebar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/caldav/calDavCalendar.js">calendar/providers/caldav/calDavCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/caldav/calDavCalendar.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/caldav/calDavCalendar.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/caldav/calDavCalendar.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/caldav/calDavCalendar.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/caldav/calDavCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/composite/calCompositeCalendar.js">calendar/providers/composite/calCompositeCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/composite/calCompositeCalendar.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/composite/calCompositeCalendar.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/composite/calCompositeCalendar.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/composite/calCompositeCalendar.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/composite/calCompositeCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/ics/calICSCalendar.js">calendar/providers/ics/calICSCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/ics/calICSCalendar.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/ics/calICSCalendar.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/ics/calICSCalendar.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/ics/calICSCalendar.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/ics/calICSCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/memory/calMemoryCalendar.js">calendar/providers/memory/calMemoryCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/memory/calMemoryCalendar.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/memory/calMemoryCalendar.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/memory/calMemoryCalendar.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/memory/calMemoryCalendar.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/memory/calMemoryCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/storage/calStorageCalendar.js">calendar/providers/storage/calStorageCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/storage/calStorageCalendar.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/storage/calStorageCalendar.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/storage/calStorageCalendar.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/storage/calStorageCalendar.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/providers/storage/calStorageCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/resources/content/datetimepickers/datetimepickers.xml">calendar/resources/content/datetimepickers/datetimepickers.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/resources/content/datetimepickers/datetimepickers.xml">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/resources/content/datetimepickers/datetimepickers.xml">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/resources/content/datetimepickers/datetimepickers.xml">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/resources/content/datetimepickers/datetimepickers.xml">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/resources/content/datetimepickers/datetimepickers.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/resources/content/mouseoverPreviews.js">calendar/resources/content/mouseoverPreviews.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/resources/content/mouseoverPreviews.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/resources/content/mouseoverPreviews.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/resources/content/mouseoverPreviews.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/resources/content/mouseoverPreviews.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/resources/content/mouseoverPreviews.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/resources/content/publish.js">calendar/resources/content/publish.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/resources/content/publish.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/resources/content/publish.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/resources/content/publish.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/resources/content/publish.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/resources/content/publish.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/test/mozmill/testAlarmDefaultValue.js">calendar/test/mozmill/testAlarmDefaultValue.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/test/mozmill/testAlarmDefaultValue.js">file</a> |
<a href="/comm-central/annotate/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/test/mozmill/testAlarmDefaultValue.js">annotate</a> |
<a href="/comm-central/diff/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/test/mozmill/testAlarmDefaultValue.js">diff</a> |
<a href="/comm-central/comparison/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/test/mozmill/testAlarmDefaultValue.js">comparison</a> |
<a href="/comm-central/log/2530e8642a6199bb05de5281d1df7f91936e8b37/calendar/test/mozmill/testAlarmDefaultValue.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/content/calendar-base-view.xml</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/content/calendar-base-view.xml</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -876,22 +876,22 @@</span>
<a href="#l1.4"></a><span id="l1.4"> </span>
<a href="#l1.5"></a><span id="l1.5">       &lt;property name=&quot;date&quot;&gt;</span>
<a href="#l1.6"></a><span id="l1.6">         &lt;getter&gt;&lt;![CDATA[</span>
<a href="#l1.7"></a><span id="l1.7">             return this.mDate;</span>
<a href="#l1.8"></a><span id="l1.8">         ]]&gt;&lt;/getter&gt;</span>
<a href="#l1.9"></a><span id="l1.9">         &lt;setter&gt;&lt;![CDATA[</span>
<a href="#l1.10"></a><span id="l1.10">             this.mDate = val;</span>
<a href="#l1.11"></a><span id="l1.11">             let dateFormatter = cal.getDateFormatter();</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-            let label = cal.calGetString(&quot;calendar&quot;, &quot;dayHeaderLabel&quot;, [</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+            let label = cal.l10n.getCalString(&quot;dayHeaderLabel&quot;, [</span>
<a href="#l1.14"></a><span id="l1.14">                 dateFormatter.shortDayName(val.weekday),</span>
<a href="#l1.15"></a><span id="l1.15">                 dateFormatter.formatDateWithoutYear(val)</span>
<a href="#l1.16"></a><span id="l1.16">             ]);</span>
<a href="#l1.17"></a><span id="l1.17">             this.shortName.setAttribute(&quot;value&quot;, label);</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineminus">-            label = cal.calGetString(&quot;calendar&quot;, &quot;dayHeaderLabel&quot;, [</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineplus">+            label = cal.l10n.getCalString(&quot;dayHeaderLabel&quot;, [</span>
<a href="#l1.20"></a><span id="l1.20">                 dateFormatter.dayName(val.weekday),</span>
<a href="#l1.21"></a><span id="l1.21">                 dateFormatter.formatDateWithoutYear(val)</span>
<a href="#l1.22"></a><span id="l1.22">             ]);</span>
<a href="#l1.23"></a><span id="l1.23">             this.longName.setAttribute(&quot;value&quot;, label);</span>
<a href="#l1.24"></a><span id="l1.24">             return val;</span>
<a href="#l1.25"></a><span id="l1.25">         ]]&gt;&lt;/setter&gt;</span>
<a href="#l1.26"></a><span id="l1.26">       &lt;/property&gt;</span>
<a href="#l1.27"></a><span id="l1.27"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/content/calendar-clipboard.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/content/calendar-clipboard.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -223,29 +223,29 @@ function pasteFromClipboard() {</span>
<a href="#l2.4"></a><span id="l2.4">                                    .filter(cal.acl.userCanAddItemsToCalendar)</span>
<a href="#l2.5"></a><span id="l2.5">                                    .filter((aCal) =&gt; {</span>
<a href="#l2.6"></a><span id="l2.6">                                        let status = aCal.getProperty(&quot;currentStatus&quot;);</span>
<a href="#l2.7"></a><span id="l2.7">                                        return Components.isSuccessCode(status);</span>
<a href="#l2.8"></a><span id="l2.8">                                    });</span>
<a href="#l2.9"></a><span id="l2.9">                 if (calendars.length &gt; 1) {</span>
<a href="#l2.10"></a><span id="l2.10">                     let args = {};</span>
<a href="#l2.11"></a><span id="l2.11">                     args.calendars = calendars;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-                    args.promptText = cal.calGetString(&quot;calendar&quot;, &quot;pastePrompt&quot;);</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+                    args.promptText = cal.l10n.getCalString(&quot;pastePrompt&quot;);</span>
<a href="#l2.14"></a><span id="l2.14"> </span>
<a href="#l2.15"></a><span id="l2.15">                     if (validPasteText) {</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-                        pasteText = cal.calGetString(&quot;calendar&quot;, pasteText);</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineminus">-                        let note = cal.calGetString(&quot;calendar&quot;, &quot;pasteNotifyAbout&quot;, [pasteText]);</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineplus">+                        pasteText = cal.l10n.getCalString(pasteText);</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+                        let note = cal.l10n.getCalString(&quot;pasteNotifyAbout&quot;, pasteText);</span>
<a href="#l2.20"></a><span id="l2.20">                         args.promptNotify = note;</span>
<a href="#l2.21"></a><span id="l2.21"> </span>
<a href="#l2.22"></a><span id="l2.22" class="difflineminus">-                        args.labelExtra1 = cal.calGetString(&quot;calendar&quot;, &quot;pasteDontNotifyLabel&quot;);</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineplus">+                        args.labelExtra1 = cal.l10n.getCalString(&quot;pasteDontNotifyLabel&quot;);</span>
<a href="#l2.24"></a><span id="l2.24">                         args.onExtra1 = (aCal) =&gt; {</span>
<a href="#l2.25"></a><span id="l2.25">                             destCal = aCal;</span>
<a href="#l2.26"></a><span id="l2.26">                             notify = Ci.calIItipItem.NONE;</span>
<a href="#l2.27"></a><span id="l2.27">                         };</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineminus">-                        args.labelOk = cal.calGetString(&quot;calendar&quot;, &quot;pasteAndNotifyLabel&quot;);</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineplus">+                        args.labelOk = cal.l10n.getCalString(&quot;pasteAndNotifyLabel&quot;);</span>
<a href="#l2.30"></a><span id="l2.30">                         args.onOk = (aCal) =&gt; {</span>
<a href="#l2.31"></a><span id="l2.31">                             destCal = aCal;</span>
<a href="#l2.32"></a><span id="l2.32">                             notify = Ci.calIItipItem.AUTO;</span>
<a href="#l2.33"></a><span id="l2.33">                         };</span>
<a href="#l2.34"></a><span id="l2.34">                     } else {</span>
<a href="#l2.35"></a><span id="l2.35">                         args.onOk = (aCal) =&gt; { destCal = aCal; };</span>
<a href="#l2.36"></a><span id="l2.36">                     }</span>
<a href="#l2.37"></a><span id="l2.37"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/content/calendar-common-sets.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/content/calendar-common-sets.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -810,21 +810,21 @@ function removeCalendarCommandController</span>
<a href="#l3.4"></a><span id="l3.4">  * @return {Boolean}                        True, to show the popup menu.</span>
<a href="#l3.5"></a><span id="l3.5">  */</span>
<a href="#l3.6"></a><span id="l3.6"> function setupContextItemType(aEvent, aItems) {</span>
<a href="#l3.7"></a><span id="l3.7">     function adaptModificationMenuItem(aMenuItemId, aItemType) {</span>
<a href="#l3.8"></a><span id="l3.8">         let menuItem = document.getElementById(aMenuItemId);</span>
<a href="#l3.9"></a><span id="l3.9">         if (menuItem) {</span>
<a href="#l3.10"></a><span id="l3.10">             menuItem.setAttribute(</span>
<a href="#l3.11"></a><span id="l3.11">                 &quot;label&quot;,</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-                cal.calGetString(&quot;calendar&quot;, `delete${aItemType}Label`)</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+                cal.l10n.getCalString(`delete${aItemType}Label`)</span>
<a href="#l3.14"></a><span id="l3.14">             );</span>
<a href="#l3.15"></a><span id="l3.15">             menuItem.setAttribute(</span>
<a href="#l3.16"></a><span id="l3.16">                 &quot;accesskey&quot;,</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineminus">-                cal.calGetString(&quot;calendar&quot;, `delete${aItemType}Accesskey`)</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+                cal.l10n.getCalString(`delete${aItemType}Accesskey`)</span>
<a href="#l3.19"></a><span id="l3.19">             );</span>
<a href="#l3.20"></a><span id="l3.20">         }</span>
<a href="#l3.21"></a><span id="l3.21">     }</span>
<a href="#l3.22"></a><span id="l3.22">     if (aItems.some(cal.item.isEvent) &amp;&amp; aItems.some(cal.item.isToDo)) {</span>
<a href="#l3.23"></a><span id="l3.23">         aEvent.target.setAttribute(&quot;type&quot;, &quot;mixed&quot;);</span>
<a href="#l3.24"></a><span id="l3.24">         adaptModificationMenuItem(&quot;calendar-item-context-menu-delete-menuitem&quot;,</span>
<a href="#l3.25"></a><span id="l3.25">                                   &quot;Item&quot;);</span>
<a href="#l3.26"></a><span id="l3.26">     } else if (aItems.length &amp;&amp; cal.item.isEvent(aItems[0])) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/content/calendar-extract.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/content/calendar-extract.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -22,19 +22,19 @@ var calendarExtract = {</span>
<a href="#l4.4"></a><span id="l4.4">             let langName = localeParts[2];</span>
<a href="#l4.5"></a><span id="l4.5"> </span>
<a href="#l4.6"></a><span id="l4.6">             try {</span>
<a href="#l4.7"></a><span id="l4.7">                 langName = cal.calGetString(&quot;languageNames&quot;, langName, null, &quot;global&quot;);</span>
<a href="#l4.8"></a><span id="l4.8">             } catch (ex) {</span>
<a href="#l4.9"></a><span id="l4.9">                 // If no language name is found that is ok, keep the technical term</span>
<a href="#l4.10"></a><span id="l4.10">             }</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-            let label = cal.calGetString(&quot;calendar&quot;, &quot;extractUsing&quot;, [langName]);</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+            let label = cal.l10n.getCalString(&quot;extractUsing&quot;, [langName]);</span>
<a href="#l4.14"></a><span id="l4.14">             if (localeParts[3] != &quot;&quot;) {</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineminus">-                label = cal.calGetString(&quot;calendar&quot;, &quot;extractUsingRegion&quot;, [langName, localeParts[3]]);</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+                label = cal.l10n.getCalString(&quot;extractUsingRegion&quot;, [langName, localeParts[3]]);</span>
<a href="#l4.17"></a><span id="l4.17">             }</span>
<a href="#l4.18"></a><span id="l4.18"> </span>
<a href="#l4.19"></a><span id="l4.19">             langs.push([label, localeParts[1]]);</span>
<a href="#l4.20"></a><span id="l4.20">         }</span>
<a href="#l4.21"></a><span id="l4.21"> </span>
<a href="#l4.22"></a><span id="l4.22">         // sort</span>
<a href="#l4.23"></a><span id="l4.23">         let pref = &quot;calendar.patterns.last.used.languages&quot;;</span>
<a href="#l4.24"></a><span id="l4.24">         let lastUsedLangs = Preferences.get(pref, &quot;&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/base/content/calendar-item-bindings.xml</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/base/content/calendar-item-bindings.xml</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -84,17 +84,17 @@</span>
<a href="#l5.4"></a><span id="l5.4">                 this.setAttribute(&quot;hidden&quot;, &quot;true&quot;);</span>
<a href="#l5.5"></a><span id="l5.5">             } else {</span>
<a href="#l5.6"></a><span id="l5.6">                 const kDefaultTimezone = cal.dtz.defaultTimezone;</span>
<a href="#l5.7"></a><span id="l5.7">                 let localTime = date.getInTimezone(kDefaultTimezone);</span>
<a href="#l5.8"></a><span id="l5.8">                 let formatter = cal.getDateFormatter();</span>
<a href="#l5.9"></a><span id="l5.9">                 itemDateTimeLabel.value = formatter.formatDateTime(localTime);</span>
<a href="#l5.10"></a><span id="l5.10">                 if (!date.timezone.isFloating &amp;&amp; date.timezone.tzid != kDefaultTimezone.tzid) {</span>
<a href="#l5.11"></a><span id="l5.11">                     // we additionally display the original datetime with timezone</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-                    let orgTime = cal.calGetString(&quot;calendar&quot;, &quot;datetimeWithTimezone&quot;, [</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+                    let orgTime = cal.l10n.getCalString(&quot;datetimeWithTimezone&quot;, [</span>
<a href="#l5.14"></a><span id="l5.14">                         formatter.formatDateTime(date),</span>
<a href="#l5.15"></a><span id="l5.15">                         date.timezone.tzid</span>
<a href="#l5.16"></a><span id="l5.16">                     ]);</span>
<a href="#l5.17"></a><span id="l5.17">                     itemDateTimeLabel.value += &quot; (&quot; + orgTime + &quot;)&quot;;</span>
<a href="#l5.18"></a><span id="l5.18">                 }</span>
<a href="#l5.19"></a><span id="l5.19">                 this.removeAttribute(&quot;hidden&quot;);</span>
<a href="#l5.20"></a><span id="l5.20">             }</span>
<a href="#l5.21"></a><span id="l5.21">         ]]&gt;&lt;/setter&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/base/content/calendar-management.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/base/content/calendar-management.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -37,41 +37,41 @@ function promptDeleteCalendar(aCalendar)</span>
<a href="#l6.4"></a><span id="l6.4">     let calMgr = cal.getCalendarManager();</span>
<a href="#l6.5"></a><span id="l6.5">     let calendars = calMgr.getCalendars({});</span>
<a href="#l6.6"></a><span id="l6.6">     if (calendars.length &lt;= 1) {</span>
<a href="#l6.7"></a><span id="l6.7">         // If this is the last calendar, don't delete it.</span>
<a href="#l6.8"></a><span id="l6.8">         return;</span>
<a href="#l6.9"></a><span id="l6.9">     }</span>
<a href="#l6.10"></a><span id="l6.10"> </span>
<a href="#l6.11"></a><span id="l6.11">     let modes = new Set(aCalendar.getProperty(&quot;capabilities.removeModes&quot;) || [&quot;unsubscribe&quot;]);</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-    let title = cal.calGetString(&quot;calendar&quot;, &quot;removeCalendarTitle&quot;);</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+    let title = cal.l10n.getCalString(&quot;removeCalendarTitle&quot;);</span>
<a href="#l6.14"></a><span id="l6.14"> </span>
<a href="#l6.15"></a><span id="l6.15">     let textKey, b0text, b2text;</span>
<a href="#l6.16"></a><span id="l6.16">     let removeFlags = 0;</span>
<a href="#l6.17"></a><span id="l6.17">     let promptFlags = (nIPS.BUTTON_POS_0 * nIPS.BUTTON_TITLE_IS_STRING) +</span>
<a href="#l6.18"></a><span id="l6.18">                       (nIPS.BUTTON_POS_1 * nIPS.BUTTON_TITLE_CANCEL);</span>
<a href="#l6.19"></a><span id="l6.19"> </span>
<a href="#l6.20"></a><span id="l6.20">     if (modes.has(&quot;delete&quot;) &amp;&amp; !modes.has(&quot;unsubscribe&quot;)) {</span>
<a href="#l6.21"></a><span id="l6.21">         textKey = &quot;removeCalendarMessageDelete&quot;;</span>
<a href="#l6.22"></a><span id="l6.22">         promptFlags += nIPS.BUTTON_DELAY_ENABLE;</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineminus">-        b0text = cal.calGetString(&quot;calendar&quot;, &quot;removeCalendarButtonDelete&quot;);</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineplus">+        b0text = cal.l10n.getCalString(&quot;removeCalendarButtonDelete&quot;);</span>
<a href="#l6.25"></a><span id="l6.25">     } else if (modes.has(&quot;delete&quot;)) {</span>
<a href="#l6.26"></a><span id="l6.26">         textKey = &quot;removeCalendarMessageDeleteOrUnsubscribe&quot;;</span>
<a href="#l6.27"></a><span id="l6.27">         promptFlags += (nIPS.BUTTON_POS_2 * nIPS.BUTTON_TITLE_IS_STRING);</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineminus">-        b0text = cal.calGetString(&quot;calendar&quot;, &quot;removeCalendarButtonUnsubscribe&quot;);</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineminus">-        b2text = cal.calGetString(&quot;calendar&quot;, &quot;removeCalendarButtonDelete&quot;);</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineplus">+        b0text = cal.l10n.getCalString(&quot;removeCalendarButtonUnsubscribe&quot;);</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineplus">+        b2text = cal.l10n.getCalString(&quot;removeCalendarButtonDelete&quot;);</span>
<a href="#l6.32"></a><span id="l6.32">     } else if (modes.has(&quot;unsubscribe&quot;)) {</span>
<a href="#l6.33"></a><span id="l6.33">         textKey = &quot;removeCalendarMessageUnsubscribe&quot;;</span>
<a href="#l6.34"></a><span id="l6.34">         removeFlags |= cICM.REMOVE_NO_DELETE;</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineminus">-        b0text = cal.calGetString(&quot;calendar&quot;, &quot;removeCalendarButtonUnsubscribe&quot;);</span>
<a href="#l6.36"></a><span id="l6.36" class="difflineplus">+        b0text = cal.l10n.getCalString(&quot;removeCalendarButtonUnsubscribe&quot;);</span>
<a href="#l6.37"></a><span id="l6.37">     } else {</span>
<a href="#l6.38"></a><span id="l6.38">         return;</span>
<a href="#l6.39"></a><span id="l6.39">     }</span>
<a href="#l6.40"></a><span id="l6.40"> </span>
<a href="#l6.41"></a><span id="l6.41" class="difflineminus">-    let text = cal.calGetString(&quot;calendar&quot;, textKey, [aCalendar.name]);</span>
<a href="#l6.42"></a><span id="l6.42" class="difflineplus">+    let text = cal.l10n.getCalString(textKey, [aCalendar.name]);</span>
<a href="#l6.43"></a><span id="l6.43">     let res = Services.prompt.confirmEx(window, title, text, promptFlags,</span>
<a href="#l6.44"></a><span id="l6.44">                                         b0text, null, b2text, null, {});</span>
<a href="#l6.45"></a><span id="l6.45"> </span>
<a href="#l6.46"></a><span id="l6.46">     if (res != 1) { // Not canceled</span>
<a href="#l6.47"></a><span id="l6.47">         if (textKey == &quot;removeCalendarMessageDeleteOrUnsubscribe&quot; &amp;&amp; res == 0) {</span>
<a href="#l6.48"></a><span id="l6.48">             // Both unsubscribing and deleting is possible, but unsubscribing was</span>
<a href="#l6.49"></a><span id="l6.49">             // requested. Make sure no delete is executed.</span>
<a href="#l6.50"></a><span id="l6.50">             removeFlags |= cICM.REMOVE_NO_DELETE;</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineat">@@ -112,17 +112,17 @@ function loadCalendarManager() {</span>
<a href="#l6.52"></a><span id="l6.52"> /**</span>
<a href="#l6.53"></a><span id="l6.53">  * Creates the initial &quot;Home&quot; calendar if no calendar exists.</span>
<a href="#l6.54"></a><span id="l6.54">  */</span>
<a href="#l6.55"></a><span id="l6.55"> function initHomeCalendar() {</span>
<a href="#l6.56"></a><span id="l6.56">     let calMgr = cal.getCalendarManager();</span>
<a href="#l6.57"></a><span id="l6.57">     let composite = cal.view.getCompositeCalendar(window);</span>
<a href="#l6.58"></a><span id="l6.58">     let url = Services.io.newURI(&quot;moz-storage-calendar://&quot;);</span>
<a href="#l6.59"></a><span id="l6.59">     let homeCalendar = calMgr.createCalendar(&quot;storage&quot;, url);</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineminus">-    homeCalendar.name = cal.calGetString(&quot;calendar&quot;, &quot;homeCalendarName&quot;);</span>
<a href="#l6.61"></a><span id="l6.61" class="difflineplus">+    homeCalendar.name = cal.l10n.getCalString(&quot;homeCalendarName&quot;);</span>
<a href="#l6.62"></a><span id="l6.62">     calMgr.registerCalendar(homeCalendar);</span>
<a href="#l6.63"></a><span id="l6.63">     Preferences.set(&quot;calendar.list.sortOrder&quot;, homeCalendar.id);</span>
<a href="#l6.64"></a><span id="l6.64">     composite.addCalendar(homeCalendar);</span>
<a href="#l6.65"></a><span id="l6.65"> </span>
<a href="#l6.66"></a><span id="l6.66">     // Wrapping this in a try/catch block, as if any of the migration code</span>
<a href="#l6.67"></a><span id="l6.67">     // fails, the app may not load.</span>
<a href="#l6.68"></a><span id="l6.68">     if (Preferences.get(&quot;calendar.migrator.enabled&quot;, true)) {</span>
<a href="#l6.69"></a><span id="l6.69">         try {</span>
<a href="#l6.70"></a><span id="l6.70" class="difflineat">@@ -168,19 +168,19 @@ function updateSortOrderPref(event) {</span>
<a href="#l6.71"></a><span id="l6.71">  */</span>
<a href="#l6.72"></a><span id="l6.72"> function calendarListTooltipShowing(event) {</span>
<a href="#l6.73"></a><span id="l6.73">     let tree = document.getElementById(&quot;calendar-list-tree-widget&quot;);</span>
<a href="#l6.74"></a><span id="l6.74">     let calendar = tree.getCalendarFromEvent(event);</span>
<a href="#l6.75"></a><span id="l6.75">     let tooltipText = false;</span>
<a href="#l6.76"></a><span id="l6.76">     if (calendar) {</span>
<a href="#l6.77"></a><span id="l6.77">         let currentStatus = calendar.getProperty(&quot;currentStatus&quot;);</span>
<a href="#l6.78"></a><span id="l6.78">         if (!Components.isSuccessCode(currentStatus)) {</span>
<a href="#l6.79"></a><span id="l6.79" class="difflineminus">-            tooltipText = cal.calGetString(&quot;calendar&quot;, &quot;tooltipCalendarDisabled&quot;, [calendar.name]);</span>
<a href="#l6.80"></a><span id="l6.80" class="difflineplus">+            tooltipText = cal.l10n.getCalString(&quot;tooltipCalendarDisabled&quot;, [calendar.name]);</span>
<a href="#l6.81"></a><span id="l6.81">         } else if (calendar.readOnly) {</span>
<a href="#l6.82"></a><span id="l6.82" class="difflineminus">-            tooltipText = cal.calGetString(&quot;calendar&quot;, &quot;tooltipCalendarReadOnly&quot;, [calendar.name]);</span>
<a href="#l6.83"></a><span id="l6.83" class="difflineplus">+            tooltipText = cal.l10n.getCalString(&quot;tooltipCalendarReadOnly&quot;, [calendar.name]);</span>
<a href="#l6.84"></a><span id="l6.84">         }</span>
<a href="#l6.85"></a><span id="l6.85">     }</span>
<a href="#l6.86"></a><span id="l6.86">     setElementValue(&quot;calendar-list-tooltip&quot;, tooltipText, &quot;label&quot;);</span>
<a href="#l6.87"></a><span id="l6.87">     return (tooltipText !== false);</span>
<a href="#l6.88"></a><span id="l6.88"> }</span>
<a href="#l6.89"></a><span id="l6.89"> </span>
<a href="#l6.90"></a><span id="l6.90"> /**</span>
<a href="#l6.91"></a><span id="l6.91">  * A handler called to set up the context menu on the calendar list.</span>
<a href="#l6.92"></a><span id="l6.92" class="difflineat">@@ -225,27 +225,27 @@ function calendarListSetupContextMenu(ev</span>
<a href="#l6.93"></a><span id="l6.93">     if (calendar) {</span>
<a href="#l6.94"></a><span id="l6.94">         enableElement(&quot;list-calendars-context-edit&quot;);</span>
<a href="#l6.95"></a><span id="l6.95">         enableElement(&quot;list-calendars-context-publish&quot;);</span>
<a href="#l6.96"></a><span id="l6.96"> </span>
<a href="#l6.97"></a><span id="l6.97">         enableElement(&quot;list-calendars-context-togglevisible&quot;);</span>
<a href="#l6.98"></a><span id="l6.98">         setElementValue(&quot;list-calendars-context-togglevisible&quot;, false, &quot;collapsed&quot;);</span>
<a href="#l6.99"></a><span id="l6.99">         let stringName = composite.getCalendarById(calendar.id) ? &quot;hideCalendar&quot; : &quot;showCalendar&quot;;</span>
<a href="#l6.100"></a><span id="l6.100">         setElementValue(&quot;list-calendars-context-togglevisible&quot;,</span>
<a href="#l6.101"></a><span id="l6.101" class="difflineminus">-                        cal.calGetString(&quot;calendar&quot;, stringName, [calendar.name]),</span>
<a href="#l6.102"></a><span id="l6.102" class="difflineplus">+                        cal.l10n.getCalString(stringName, [calendar.name]),</span>
<a href="#l6.103"></a><span id="l6.103">                         &quot;label&quot;);</span>
<a href="#l6.104"></a><span id="l6.104">         let accessKey = document.getElementById(&quot;list-calendars-context-togglevisible&quot;)</span>
<a href="#l6.105"></a><span id="l6.105">                                 .getAttribute(composite.getCalendarById(calendar.id) ?</span>
<a href="#l6.106"></a><span id="l6.106">                                               &quot;accesskeyhide&quot; : &quot;accesskeyshow&quot;);</span>
<a href="#l6.107"></a><span id="l6.107">         setElementValue(&quot;list-calendars-context-togglevisible&quot;, accessKey, &quot;accesskey&quot;);</span>
<a href="#l6.108"></a><span id="l6.108"> </span>
<a href="#l6.109"></a><span id="l6.109">         enableElement(&quot;list-calendars-context-showonly&quot;);</span>
<a href="#l6.110"></a><span id="l6.110">         setElementValue(&quot;list-calendars-context-showonly&quot;, false, &quot;collapsed&quot;);</span>
<a href="#l6.111"></a><span id="l6.111">         setElementValue(&quot;list-calendars-context-showonly&quot;,</span>
<a href="#l6.112"></a><span id="l6.112" class="difflineminus">-                        cal.calGetString(&quot;calendar&quot;, &quot;showOnlyCalendar&quot;, [calendar.name]),</span>
<a href="#l6.113"></a><span id="l6.113" class="difflineplus">+                        cal.l10n.getCalString(&quot;showOnlyCalendar&quot;, [calendar.name]),</span>
<a href="#l6.114"></a><span id="l6.114">                         &quot;label&quot;);</span>
<a href="#l6.115"></a><span id="l6.115"> </span>
<a href="#l6.116"></a><span id="l6.116">         setupDeleteMenuitem(&quot;list-calendars-context-delete&quot;, calendar);</span>
<a href="#l6.117"></a><span id="l6.117">         // Only enable the delete calendars item if there is more than one</span>
<a href="#l6.118"></a><span id="l6.118">         // calendar. We don't want to have the last calendar deleted.</span>
<a href="#l6.119"></a><span id="l6.119">         setElementValue(&quot;list-calendars-context-delete&quot;, calendars.length &lt; 2 &amp;&amp; &quot;true&quot;, &quot;disabled&quot;);</span>
<a href="#l6.120"></a><span id="l6.120">     } else {</span>
<a href="#l6.121"></a><span id="l6.121">         disableElement(&quot;list-calendars-context-edit&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/base/content/calendar-month-view.xml</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/base/content/calendar-month-view.xml</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -838,17 +838,17 @@</span>
<a href="#l7.4"></a><span id="l7.4">                             if (this.mDisplayDaysOff || !isDayOff) {</span>
<a href="#l7.5"></a><span id="l7.5">                                 weekLabelColumnPos = j;</span>
<a href="#l7.6"></a><span id="l7.6">                             }</span>
<a href="#l7.7"></a><span id="l7.7">                         }</span>
<a href="#l7.8"></a><span id="l7.8">                         // Build and set the label.</span>
<a href="#l7.9"></a><span id="l7.9">                         if (j == weekLabelColumnPos) {</span>
<a href="#l7.10"></a><span id="l7.10">                             weekLabel.removeAttribute(&quot;hidden&quot;);</span>
<a href="#l7.11"></a><span id="l7.11">                             let weekNumber = cal.getWeekInfoService().getWeekTitle(date);</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-                            let weekString = cal.calGetString(&quot;calendar&quot;, &quot;abbreviationOfWeek&quot;, [weekNumber]);</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+                            let weekString = cal.l10n.getCalString(&quot;abbreviationOfWeek&quot;, [weekNumber]);</span>
<a href="#l7.14"></a><span id="l7.14">                             weekLabel.value = weekString;</span>
<a href="#l7.15"></a><span id="l7.15">                         } else {</span>
<a href="#l7.16"></a><span id="l7.16">                             weekLabel.hidden = true;</span>
<a href="#l7.17"></a><span id="l7.17">                         }</span>
<a href="#l7.18"></a><span id="l7.18">                     }</span>
<a href="#l7.19"></a><span id="l7.19"> </span>
<a href="#l7.20"></a><span id="l7.20">                     daybox.setAttribute(&quot;class&quot;, boxClass);</span>
<a href="#l7.21"></a><span id="l7.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/base/content/calendar-multiday-view.xml</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/base/content/calendar-multiday-view.xml</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -1964,19 +1964,19 @@</span>
<a href="#l8.4"></a><span id="l8.4">             let startstr = timeFormatter.formatTime(cal.dtz.jsDateToDateTime(jsTime, cal.dtz.floating));</span>
<a href="#l8.5"></a><span id="l8.5">             jsTime.setHours(endhr, endmin);</span>
<a href="#l8.6"></a><span id="l8.6">             let endstr = timeFormatter.formatTime(cal.dtz.jsDateToDateTime(jsTime, cal.dtz.floating));</span>
<a href="#l8.7"></a><span id="l8.7"> </span>
<a href="#l8.8"></a><span id="l8.8">             // Tasks without Entry or Due date have a string as first label</span>
<a href="#l8.9"></a><span id="l8.9">             // instead of the time.</span>
<a href="#l8.10"></a><span id="l8.10">             if (cal.item.isToDo(this.mDragState.dragOccurrence)) {</span>
<a href="#l8.11"></a><span id="l8.11">                 if (!this.mDragState.dragOccurrence.dueDate) {</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-                    startstr = cal.calGetString(&quot;calendar&quot;, &quot;dragLabelTasksWithOnlyEntryDate&quot;);</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+                    startstr = cal.l10n.getCalString(&quot;dragLabelTasksWithOnlyEntryDate&quot;);</span>
<a href="#l8.14"></a><span id="l8.14">                 } else if (!this.mDragState.dragOccurrence.entryDate) {</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">-                    startstr = cal.calGetString(&quot;calendar&quot;, &quot;dragLabelTasksWithOnlyDueDate&quot;);</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineplus">+                    startstr = cal.l10n.getCalString(&quot;dragLabelTasksWithOnlyDueDate&quot;);</span>
<a href="#l8.17"></a><span id="l8.17">                 }</span>
<a href="#l8.18"></a><span id="l8.18">             }</span>
<a href="#l8.19"></a><span id="l8.19">             firstColumn.fgboxes.startlabel.setAttribute(&quot;value&quot;, startstr);</span>
<a href="#l8.20"></a><span id="l8.20">             lastColumn.fgboxes.endlabel.setAttribute(&quot;value&quot;, endstr);</span>
<a href="#l8.21"></a><span id="l8.21"> </span>
<a href="#l8.22"></a><span id="l8.22">         ]]&gt;&lt;/body&gt;</span>
<a href="#l8.23"></a><span id="l8.23">       &lt;/method&gt;</span>
<a href="#l8.24"></a><span id="l8.24"> </span>
<a href="#l8.25"></a><span id="l8.25" class="difflineat">@@ -2390,17 +2390,17 @@</span>
<a href="#l8.26"></a><span id="l8.26">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l8.27"></a><span id="l8.27">             let evl = this.eventNameLabel;</span>
<a href="#l8.28"></a><span id="l8.28">             let item = this.mOccurrence;</span>
<a href="#l8.29"></a><span id="l8.29"> </span>
<a href="#l8.30"></a><span id="l8.30">             if (item.title &amp;&amp; item.title != &quot;&quot;) {</span>
<a href="#l8.31"></a><span id="l8.31">                 // Use &lt;description&gt; textContent so it can wrap.</span>
<a href="#l8.32"></a><span id="l8.32">                 evl.textContent = item.title;</span>
<a href="#l8.33"></a><span id="l8.33">             } else {</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineminus">-                evl.textContent = cal.calGetString(&quot;calendar&quot;, &quot;eventUntitled&quot;);</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineplus">+                evl.textContent = cal.l10n.getCalString(&quot;eventUntitled&quot;);</span>
<a href="#l8.36"></a><span id="l8.36">             }</span>
<a href="#l8.37"></a><span id="l8.37"> </span>
<a href="#l8.38"></a><span id="l8.38">             let gripbar = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;gripbar1&quot;).boxObject.height;</span>
<a href="#l8.39"></a><span id="l8.39">             let height = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;eventbox&quot;).boxObject.height;</span>
<a href="#l8.40"></a><span id="l8.40">             evl.setAttribute(&quot;style&quot;, &quot;max-height: &quot; + Math.max(0, height-gripbar * 2) + &quot;px&quot;);</span>
<a href="#l8.41"></a><span id="l8.41">         ]]&gt;&lt;/body&gt;</span>
<a href="#l8.42"></a><span id="l8.42">       &lt;/method&gt;</span>
<a href="#l8.43"></a><span id="l8.43">     &lt;/implementation&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/base/content/calendar-statusbar.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/base/content/calendar-statusbar.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -58,17 +58,17 @@ var gCalendarStatusFeedback = {</span>
<a href="#l9.4"></a><span id="l9.4">                 this.mCalendarStep = Math.trunc(100 / this.mCalendarCount);</span>
<a href="#l9.5"></a><span id="l9.5">             }</span>
<a href="#l9.6"></a><span id="l9.6">             this.mProgressMode = aProgressMode;</span>
<a href="#l9.7"></a><span id="l9.7">             this.mStatusProgressPanel.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l9.8"></a><span id="l9.8">             if (this.mProgressMode == Components.interfaces.calIStatusObserver.DETERMINED_PROGRESS) {</span>
<a href="#l9.9"></a><span id="l9.9">                 this.mStatusBar.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l9.10"></a><span id="l9.10">                 this.mStatusBar.setAttribute(&quot;mode&quot;, &quot;determined&quot;);</span>
<a href="#l9.11"></a><span id="l9.11">                 this.mStatusBar.value = 0;</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-                let commonStatus = cal.calGetString(&quot;calendar&quot;, &quot;gettingCalendarInfoCommon&quot;);</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+                let commonStatus = cal.l10n.getCalString(&quot;gettingCalendarInfoCommon&quot;);</span>
<a href="#l9.14"></a><span id="l9.14">                 this.showStatusString(commonStatus);</span>
<a href="#l9.15"></a><span id="l9.15">             }</span>
<a href="#l9.16"></a><span id="l9.16">             if (this.mThrobber) {</span>
<a href="#l9.17"></a><span id="l9.17">                 this.mThrobber.setAttribute(&quot;busy&quot;, true);</span>
<a href="#l9.18"></a><span id="l9.18">             }</span>
<a href="#l9.19"></a><span id="l9.19">         }</span>
<a href="#l9.20"></a><span id="l9.20">     },</span>
<a href="#l9.21"></a><span id="l9.21"> </span>
<a href="#l9.22"></a><span id="l9.22" class="difflineat">@@ -94,18 +94,18 @@ var gCalendarStatusFeedback = {</span>
<a href="#l9.23"></a><span id="l9.23">             return;</span>
<a href="#l9.24"></a><span id="l9.24">         }</span>
<a href="#l9.25"></a><span id="l9.25">         if (this.spinning != Components.interfaces.calIStatusObserver.NO_PROGRESS) {</span>
<a href="#l9.26"></a><span id="l9.26">             if (this.spinning == Components.interfaces.calIStatusObserver.DETERMINED_PROGRESS) {</span>
<a href="#l9.27"></a><span id="l9.27">                 if (!this.mCalendars[aCalendar.id] || this.mCalendars[aCalendar.id] === undefined) {</span>
<a href="#l9.28"></a><span id="l9.28">                     this.mCalendars[aCalendar.id] = true;</span>
<a href="#l9.29"></a><span id="l9.29">                     this.mStatusBar.value = parseInt(this.mStatusBar.value, 10) + this.mCalendarStep;</span>
<a href="#l9.30"></a><span id="l9.30">                     this.mCurIndex++;</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-                    let curStatus = cal.calGetString(&quot;calendar&quot;, &quot;gettingCalendarInfoDetail&quot;,</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineminus">-                                                     [this.mCurIndex, this.mCalendarCount]);</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineplus">+                    let curStatus = cal.l10n.getCalString(&quot;gettingCalendarInfoDetail&quot;,</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineplus">+                                                               [this.mCurIndex, this.mCalendarCount]);</span>
<a href="#l9.35"></a><span id="l9.35">                     this.showStatusString(curStatus);</span>
<a href="#l9.36"></a><span id="l9.36">                 }</span>
<a href="#l9.37"></a><span id="l9.37">             }</span>
<a href="#l9.38"></a><span id="l9.38">             if (this.mThrobber) {</span>
<a href="#l9.39"></a><span id="l9.39">                 this.mThrobber.setAttribute(&quot;busy&quot;, true);</span>
<a href="#l9.40"></a><span id="l9.40">             }</span>
<a href="#l9.41"></a><span id="l9.41">         }</span>
<a href="#l9.42"></a><span id="l9.42">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/calendar/base/content/calendar-task-editing.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/calendar/base/content/calendar-task-editing.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -68,24 +68,24 @@ var taskEdit = {</span>
<a href="#l10.4"></a><span id="l10.4">         }</span>
<a href="#l10.5"></a><span id="l10.5"> </span>
<a href="#l10.6"></a><span id="l10.6">         let calendar = getSelectedCalendar();</span>
<a href="#l10.7"></a><span id="l10.7">         edit.showsInstructions = true;</span>
<a href="#l10.8"></a><span id="l10.8"> </span>
<a href="#l10.9"></a><span id="l10.9">         if (calendar.getProperty(&quot;capabilities.tasks.supported&quot;) === false) {</span>
<a href="#l10.10"></a><span id="l10.10">             taskEdit.setupTaskField(edit,</span>
<a href="#l10.11"></a><span id="l10.11">                                     true,</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-                                    cal.calGetString(&quot;calendar&quot;, &quot;taskEditInstructionsCapability&quot;));</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+                                    cal.l10n.getCalString(&quot;taskEditInstructionsCapability&quot;));</span>
<a href="#l10.14"></a><span id="l10.14">         } else if (cal.acl.isCalendarWritable(calendar)) {</span>
<a href="#l10.15"></a><span id="l10.15">             edit.showsInstructions = false;</span>
<a href="#l10.16"></a><span id="l10.16">             taskEdit.setupTaskField(edit, false, edit.savedValue || &quot;&quot;);</span>
<a href="#l10.17"></a><span id="l10.17">         } else {</span>
<a href="#l10.18"></a><span id="l10.18">             taskEdit.setupTaskField(edit,</span>
<a href="#l10.19"></a><span id="l10.19">                                     true,</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineminus">-                                    cal.calGetString(&quot;calendar&quot;, &quot;taskEditInstructionsReadonly&quot;));</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineplus">+                                    cal.l10n.getCalString(&quot;taskEditInstructionsReadonly&quot;));</span>
<a href="#l10.22"></a><span id="l10.22">         }</span>
<a href="#l10.23"></a><span id="l10.23">     },</span>
<a href="#l10.24"></a><span id="l10.24"> </span>
<a href="#l10.25"></a><span id="l10.25">     /**</span>
<a href="#l10.26"></a><span id="l10.26">      * Handler function to call when the quick-add textbox loses focus.</span>
<a href="#l10.27"></a><span id="l10.27">      *</span>
<a href="#l10.28"></a><span id="l10.28">      * @param aEvent    The DOM blur event</span>
<a href="#l10.29"></a><span id="l10.29">      */</span>
<a href="#l10.30"></a><span id="l10.30" class="difflineat">@@ -102,28 +102,28 @@ var taskEdit = {</span>
<a href="#l10.31"></a><span id="l10.31">         if (!calendar) {</span>
<a href="#l10.32"></a><span id="l10.32">             // this must be a first run, we don't have a calendar yet</span>
<a href="#l10.33"></a><span id="l10.33">             return;</span>
<a href="#l10.34"></a><span id="l10.34">         }</span>
<a href="#l10.35"></a><span id="l10.35"> </span>
<a href="#l10.36"></a><span id="l10.36">         if (calendar.getProperty(&quot;capabilities.tasks.supported&quot;) === false) {</span>
<a href="#l10.37"></a><span id="l10.37">             taskEdit.setupTaskField(edit,</span>
<a href="#l10.38"></a><span id="l10.38">                                     true,</span>
<a href="#l10.39"></a><span id="l10.39" class="difflineminus">-                                    cal.calGetString(&quot;calendar&quot;, &quot;taskEditInstructionsCapability&quot;));</span>
<a href="#l10.40"></a><span id="l10.40" class="difflineplus">+                                    cal.l10n.getCalString(&quot;taskEditInstructionsCapability&quot;));</span>
<a href="#l10.41"></a><span id="l10.41">         } else if (cal.acl.isCalendarWritable(calendar)) {</span>
<a href="#l10.42"></a><span id="l10.42">             if (!edit.showsInstructions) {</span>
<a href="#l10.43"></a><span id="l10.43">                 edit.savedValue = edit.value || &quot;&quot;;</span>
<a href="#l10.44"></a><span id="l10.44">             }</span>
<a href="#l10.45"></a><span id="l10.45">             taskEdit.setupTaskField(edit,</span>
<a href="#l10.46"></a><span id="l10.46">                                     false,</span>
<a href="#l10.47"></a><span id="l10.47" class="difflineminus">-                                    cal.calGetString(&quot;calendar&quot;, &quot;taskEditInstructions&quot;));</span>
<a href="#l10.48"></a><span id="l10.48" class="difflineplus">+                                    cal.l10n.getCalString(&quot;taskEditInstructions&quot;));</span>
<a href="#l10.49"></a><span id="l10.49">         } else {</span>
<a href="#l10.50"></a><span id="l10.50">             taskEdit.setupTaskField(edit,</span>
<a href="#l10.51"></a><span id="l10.51">                                     true,</span>
<a href="#l10.52"></a><span id="l10.52" class="difflineminus">-                                    cal.calGetString(&quot;calendar&quot;, &quot;taskEditInstructionsReadonly&quot;));</span>
<a href="#l10.53"></a><span id="l10.53" class="difflineplus">+                                    cal.l10n.getCalString(&quot;taskEditInstructionsReadonly&quot;));</span>
<a href="#l10.54"></a><span id="l10.54">         }</span>
<a href="#l10.55"></a><span id="l10.55">         edit.showsInstructions = true;</span>
<a href="#l10.56"></a><span id="l10.56">     },</span>
<a href="#l10.57"></a><span id="l10.57"> </span>
<a href="#l10.58"></a><span id="l10.58">     /**</span>
<a href="#l10.59"></a><span id="l10.59">      * Handler function to call on keypress for the quick-add textbox.</span>
<a href="#l10.60"></a><span id="l10.60">      *</span>
<a href="#l10.61"></a><span id="l10.61">      * @param aEvent    The DOM keypress event</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/calendar/base/content/calendar-task-tree.xml</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/calendar/base/content/calendar-task-tree.xml</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -289,37 +289,37 @@</span>
<a href="#l11.4"></a><span id="l11.4">       &lt;method name=&quot;duration&quot;&gt;</span>
<a href="#l11.5"></a><span id="l11.5">         &lt;parameter name=&quot;aTask&quot;/&gt;</span>
<a href="#l11.6"></a><span id="l11.6">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l11.7"></a><span id="l11.7">             if (aTask &amp;&amp; aTask.dueDate &amp;&amp; aTask.dueDate.isValid) {</span>
<a href="#l11.8"></a><span id="l11.8">                 let dur = aTask.dueDate.subtractDate(cal.dtz.now());</span>
<a href="#l11.9"></a><span id="l11.9">                 if (!dur.isNegative) {</span>
<a href="#l11.10"></a><span id="l11.10">                     let minutes = Math.ceil(dur.inSeconds / 60);</span>
<a href="#l11.11"></a><span id="l11.11">                     if (minutes &gt;= 1440) { // 1 day or more</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-                        let dueIn = PluralForm.get(dur.days, cal.calGetString(&quot;calendar&quot;, &quot;dueInDays&quot;));</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+                        let dueIn = PluralForm.get(dur.days, cal.l10n.getCalString(&quot;dueInDays&quot;));</span>
<a href="#l11.14"></a><span id="l11.14">                         return dueIn.replace(&quot;#1&quot;, dur.days);</span>
<a href="#l11.15"></a><span id="l11.15">                     } else if (minutes &gt;= 60) { // 1 hour or more</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineminus">-                        let dueIn = PluralForm.get(dur.hours, cal.calGetString(&quot;calendar&quot;, &quot;dueInHours&quot;));</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineplus">+                        let dueIn = PluralForm.get(dur.hours, cal.l10n.getCalString(&quot;dueInHours&quot;));</span>
<a href="#l11.18"></a><span id="l11.18">                         return dueIn.replace(&quot;#1&quot;, dur.hours);</span>
<a href="#l11.19"></a><span id="l11.19">                     } else {</span>
<a href="#l11.20"></a><span id="l11.20">                         // Less than one hour</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineminus">-                        return cal.calGetString(&quot;calendar&quot;, &quot;dueInLessThanOneHour&quot;);</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineplus">+                        return cal.l10n.getCalString(&quot;dueInLessThanOneHour&quot;);</span>
<a href="#l11.23"></a><span id="l11.23">                     }</span>
<a href="#l11.24"></a><span id="l11.24">                 } else if (!aTask.completedDate || !aTask.completedDate.isValid) {</span>
<a href="#l11.25"></a><span id="l11.25">                     // Overdue task</span>
<a href="#l11.26"></a><span id="l11.26">                     let minutes = Math.ceil(-dur.inSeconds / 60);</span>
<a href="#l11.27"></a><span id="l11.27">                     if (minutes &gt;= 1440) { // 1 day or more</span>
<a href="#l11.28"></a><span id="l11.28" class="difflineminus">-                        let dueIn = PluralForm.get(dur.days, cal.calGetString(&quot;calendar&quot;, &quot;dueInDays&quot;));</span>
<a href="#l11.29"></a><span id="l11.29" class="difflineplus">+                        let dueIn = PluralForm.get(dur.days, cal.l10n.getCalString(&quot;dueInDays&quot;));</span>
<a href="#l11.30"></a><span id="l11.30">                         return &quot;-&quot; + dueIn.replace(&quot;#1&quot;, dur.days);</span>
<a href="#l11.31"></a><span id="l11.31">                     } else if (minutes &gt;= 60) { // 1 hour or more</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineminus">-                        let dueIn = PluralForm.get(dur.hours, cal.calGetString(&quot;calendar&quot;, &quot;dueInHours&quot;));</span>
<a href="#l11.33"></a><span id="l11.33" class="difflineplus">+                        let dueIn = PluralForm.get(dur.hours, cal.l10n.getCalString(&quot;dueInHours&quot;));</span>
<a href="#l11.34"></a><span id="l11.34">                         return &quot;-&quot; + dueIn.replace(&quot;#1&quot;, dur.hours);</span>
<a href="#l11.35"></a><span id="l11.35">                     } else {</span>
<a href="#l11.36"></a><span id="l11.36">                         // Less than one hour</span>
<a href="#l11.37"></a><span id="l11.37" class="difflineminus">-                        return cal.calGetString(&quot;calendar&quot;, &quot;dueInLessThanOneHour&quot;);</span>
<a href="#l11.38"></a><span id="l11.38" class="difflineplus">+                        return cal.l10n.getCalString(&quot;dueInLessThanOneHour&quot;);</span>
<a href="#l11.39"></a><span id="l11.39">                     }</span>
<a href="#l11.40"></a><span id="l11.40">                 }</span>
<a href="#l11.41"></a><span id="l11.41">             }</span>
<a href="#l11.42"></a><span id="l11.42">             // No due date specified</span>
<a href="#l11.43"></a><span id="l11.43">             return null;</span>
<a href="#l11.44"></a><span id="l11.44">         ]]&gt;&lt;/body&gt;</span>
<a href="#l11.45"></a><span id="l11.45">       &lt;/method&gt;</span>
<a href="#l11.46"></a><span id="l11.46">       &lt;method name=&quot;getTaskAtRow&quot;&gt;</span>
<a href="#l11.47"></a><span id="l11.47" class="difflineat">@@ -584,17 +584,21 @@</span>
<a href="#l11.48"></a><span id="l11.48">                 let task = this.binding.mTaskArray[aRow];</span>
<a href="#l11.49"></a><span id="l11.49">                 if (!task) {</span>
<a href="#l11.50"></a><span id="l11.50">                     return false;</span>
<a href="#l11.51"></a><span id="l11.51">                 }</span>
<a href="#l11.52"></a><span id="l11.52"> </span>
<a href="#l11.53"></a><span id="l11.53">                 switch (aCol.element.getAttribute(&quot;itemproperty&quot;)) {</span>
<a href="#l11.54"></a><span id="l11.54">                     case &quot;title&quot;:</span>
<a href="#l11.55"></a><span id="l11.55">                         // return title, or &quot;Untitled&quot; if empty/null</span>
<a href="#l11.56"></a><span id="l11.56" class="difflineminus">-                        return (task.title ? task.title.replace(/\n/g, &quot; &quot;) : cal.calGetString(&quot;calendar&quot;, &quot;eventUntitled&quot;));</span>
<a href="#l11.57"></a><span id="l11.57" class="difflineplus">+                        if (task.title) {</span>
<a href="#l11.58"></a><span id="l11.58" class="difflineplus">+                            return task.title.replace(/\n/g, &quot; &quot;);</span>
<a href="#l11.59"></a><span id="l11.59" class="difflineplus">+                        } else {</span>
<a href="#l11.60"></a><span id="l11.60" class="difflineplus">+                            return cal.l10n.getCalString(&quot;eventUntitled&quot;);</span>
<a href="#l11.61"></a><span id="l11.61" class="difflineplus">+                        }</span>
<a href="#l11.62"></a><span id="l11.62">                     case &quot;entryDate&quot;:</span>
<a href="#l11.63"></a><span id="l11.63">                         return task.recurrenceInfo ? cal.calGetString(&quot;dateFormat&quot;, &quot;Repeating&quot;) : this._formatDateTime(task.entryDate);</span>
<a href="#l11.64"></a><span id="l11.64">                     case &quot;dueDate&quot;:</span>
<a href="#l11.65"></a><span id="l11.65">                         return task.recurrenceInfo ? cal.calGetString(&quot;dateFormat&quot;, &quot;Repeating&quot;) : this._formatDateTime(task.dueDate);</span>
<a href="#l11.66"></a><span id="l11.66">                     case &quot;completedDate&quot;:</span>
<a href="#l11.67"></a><span id="l11.67">                         return task.recurrenceInfo ? cal.calGetString(&quot;dateFormat&quot;, &quot;Repeating&quot;) : this._formatDateTime(task.completedDate);</span>
<a href="#l11.68"></a><span id="l11.68">                     case &quot;percentComplete&quot;:</span>
<a href="#l11.69"></a><span id="l11.69">                         return (task.percentComplete &gt; 0 ? task.percentComplete + &quot;%&quot; : &quot;&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/calendar/base/content/calendar-task-view.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/calendar/base/content/calendar-task-view.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -61,47 +61,43 @@ var taskDetailsView = {</span>
<a href="#l12.4"></a><span id="l12.4">             displayElement(&quot;calendar-task-details-priority-normal&quot;, priority == 5);</span>
<a href="#l12.5"></a><span id="l12.5">             displayElement(&quot;calendar-task-details-priority-high&quot;, priority &gt;= 1 &amp;&amp; priority &lt;= 4);</span>
<a href="#l12.6"></a><span id="l12.6"> </span>
<a href="#l12.7"></a><span id="l12.7">             let status = item.getProperty(&quot;STATUS&quot;);</span>
<a href="#l12.8"></a><span id="l12.8">             if (displayElement(&quot;calendar-task-details-status-row&quot;, status &amp;&amp; status.length &gt; 0)) {</span>
<a href="#l12.9"></a><span id="l12.9">                 let statusDetails = document.getElementById(&quot;calendar-task-details-status&quot;);</span>
<a href="#l12.10"></a><span id="l12.10">                 switch (status) {</span>
<a href="#l12.11"></a><span id="l12.11">                     case &quot;NEEDS-ACTION&quot;: {</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-                        statusDetails.value = cal.calGetString(</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineminus">-                            &quot;calendar&quot;,</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineminus">-                            &quot;taskDetailsStatusNeedsAction&quot;);</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineplus">+                        statusDetails.value = cal.l10n.getCalString(&quot;taskDetailsStatusNeedsAction&quot;);</span>
<a href="#l12.16"></a><span id="l12.16">                         break;</span>
<a href="#l12.17"></a><span id="l12.17">                     }</span>
<a href="#l12.18"></a><span id="l12.18">                     case &quot;IN-PROCESS&quot;: {</span>
<a href="#l12.19"></a><span id="l12.19">                         let percent = 0;</span>
<a href="#l12.20"></a><span id="l12.20">                         let property = item.getProperty(&quot;PERCENT-COMPLETE&quot;);</span>
<a href="#l12.21"></a><span id="l12.21">                         if (property != null) {</span>
<a href="#l12.22"></a><span id="l12.22">                             percent = parseInt(property, 10);</span>
<a href="#l12.23"></a><span id="l12.23">                         }</span>
<a href="#l12.24"></a><span id="l12.24" class="difflineminus">-                        statusDetails.value = cal.calGetString(</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineminus">-                            &quot;calendar&quot;,</span>
<a href="#l12.26"></a><span id="l12.26" class="difflineminus">-                            &quot;taskDetailsStatusInProgress&quot;, [percent]);</span>
<a href="#l12.27"></a><span id="l12.27" class="difflineplus">+                        statusDetails.value = cal.l10n.getCalString(</span>
<a href="#l12.28"></a><span id="l12.28" class="difflineplus">+                            &quot;taskDetailsStatusInProgress&quot;, [percent]</span>
<a href="#l12.29"></a><span id="l12.29" class="difflineplus">+                        );</span>
<a href="#l12.30"></a><span id="l12.30">                         break;</span>
<a href="#l12.31"></a><span id="l12.31">                     }</span>
<a href="#l12.32"></a><span id="l12.32">                     case &quot;COMPLETED&quot;: {</span>
<a href="#l12.33"></a><span id="l12.33">                         if (item.completedDate) {</span>
<a href="#l12.34"></a><span id="l12.34">                             let completedDate = item.completedDate.getInTimezone(</span>
<a href="#l12.35"></a><span id="l12.35">                                                     cal.dtz.defaultTimezone);</span>
<a href="#l12.36"></a><span id="l12.36" class="difflineminus">-                            statusDetails.value = cal.calGetString(</span>
<a href="#l12.37"></a><span id="l12.37" class="difflineminus">-                                &quot;calendar&quot;,</span>
<a href="#l12.38"></a><span id="l12.38" class="difflineplus">+                            statusDetails.value = cal.l10n.getCalString(</span>
<a href="#l12.39"></a><span id="l12.39">                                 &quot;taskDetailsStatusCompletedOn&quot;,</span>
<a href="#l12.40"></a><span id="l12.40" class="difflineminus">-                                [dateFormatter.formatDateTime(completedDate)]);</span>
<a href="#l12.41"></a><span id="l12.41" class="difflineplus">+                                [dateFormatter.formatDateTime(completedDate)]</span>
<a href="#l12.42"></a><span id="l12.42" class="difflineplus">+                            );</span>
<a href="#l12.43"></a><span id="l12.43">                         }</span>
<a href="#l12.44"></a><span id="l12.44">                         break;</span>
<a href="#l12.45"></a><span id="l12.45">                     }</span>
<a href="#l12.46"></a><span id="l12.46">                     case &quot;CANCELLED&quot;: {</span>
<a href="#l12.47"></a><span id="l12.47" class="difflineminus">-                        statusDetails.value = cal.calGetString(</span>
<a href="#l12.48"></a><span id="l12.48" class="difflineminus">-                            &quot;calendar&quot;,</span>
<a href="#l12.49"></a><span id="l12.49" class="difflineminus">-                            &quot;taskDetailsStatusCancelled&quot;);</span>
<a href="#l12.50"></a><span id="l12.50" class="difflineplus">+                        statusDetails.value = cal.l10n.getCalString(&quot;taskDetailsStatusCancelled&quot;);</span>
<a href="#l12.51"></a><span id="l12.51">                         break;</span>
<a href="#l12.52"></a><span id="l12.52">                     }</span>
<a href="#l12.53"></a><span id="l12.53">                     default: {</span>
<a href="#l12.54"></a><span id="l12.54">                         displayElement(&quot;calendar-task-details-status-row&quot;, false);</span>
<a href="#l12.55"></a><span id="l12.55">                         break;</span>
<a href="#l12.56"></a><span id="l12.56">                     }</span>
<a href="#l12.57"></a><span id="l12.57">                 }</span>
<a href="#l12.58"></a><span id="l12.58">             }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/calendar/base/content/calendar-ui-utils.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/calendar/base/content/calendar-ui-utils.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -433,17 +433,17 @@ function updateListboxDeleteButton(listb</span>
<a href="#l13.4"></a><span id="l13.4"> function unitPluralForm(aLength, aUnit, aIncludeLength=true) {</span>
<a href="#l13.5"></a><span id="l13.5">     let unitProp = {</span>
<a href="#l13.6"></a><span id="l13.6">         minutes: &quot;unitMinutes&quot;,</span>
<a href="#l13.7"></a><span id="l13.7">         hours: &quot;unitHours&quot;,</span>
<a href="#l13.8"></a><span id="l13.8">         days: &quot;unitDays&quot;,</span>
<a href="#l13.9"></a><span id="l13.9">         weeks: &quot;unitWeeks&quot;</span>
<a href="#l13.10"></a><span id="l13.10">     }[aUnit] || &quot;unitMinutes&quot;;</span>
<a href="#l13.11"></a><span id="l13.11"> </span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-    return PluralForm.get(aLength, cal.calGetString(&quot;calendar&quot;, unitProp))</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+    return PluralForm.get(aLength, cal.l10n.getCalString(unitProp))</span>
<a href="#l13.14"></a><span id="l13.14">                      .replace(&quot;#1&quot;, aIncludeLength ? aLength : &quot;&quot;).trim();</span>
<a href="#l13.15"></a><span id="l13.15"> }</span>
<a href="#l13.16"></a><span id="l13.16"> </span>
<a href="#l13.17"></a><span id="l13.17"> /**</span>
<a href="#l13.18"></a><span id="l13.18">  * Update the given unit label to show the correct plural form.</span>
<a href="#l13.19"></a><span id="l13.19">  *</span>
<a href="#l13.20"></a><span id="l13.20">  * @param aLengthFieldId     The ID of the element containing the number</span>
<a href="#l13.21"></a><span id="l13.21">  * @param aLabelId           The ID of the label to update.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/calendar/base/content/calendar-view-core.xml</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/calendar/base/content/calendar-view-core.xml</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -142,17 +142,17 @@</span>
<a href="#l14.4"></a><span id="l14.4">       &lt;property name=&quot;eventNameTextbox&quot; readonly=&quot;true&quot;</span>
<a href="#l14.5"></a><span id="l14.5">         onget=&quot;return document.getAnonymousElementByAttribute(this, 'anonid', 'event-name-textbox');&quot;/&gt;</span>
<a href="#l14.6"></a><span id="l14.6"> </span>
<a href="#l14.7"></a><span id="l14.7">       &lt;method name=&quot;setEditableLabel&quot;&gt;</span>
<a href="#l14.8"></a><span id="l14.8">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l14.9"></a><span id="l14.9">             let evl = this.eventNameLabel;</span>
<a href="#l14.10"></a><span id="l14.10">             let item = this.mOccurrence;</span>
<a href="#l14.11"></a><span id="l14.11">             evl.value = (item.title ? item.title.replace(/\n/g, &quot; &quot;)</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-                                    : cal.calGetString(&quot;calendar&quot;, &quot;eventUntitled&quot;));</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+                                    : cal.l10n.getCalString(&quot;eventUntitled&quot;));</span>
<a href="#l14.14"></a><span id="l14.14">         ]]&gt;&lt;/body&gt;</span>
<a href="#l14.15"></a><span id="l14.15">       &lt;/method&gt;</span>
<a href="#l14.16"></a><span id="l14.16"> </span>
<a href="#l14.17"></a><span id="l14.17">       &lt;method name=&quot;setLocationLabel&quot;&gt;</span>
<a href="#l14.18"></a><span id="l14.18">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l14.19"></a><span id="l14.19">             let locationLabel = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;event-location&quot;);</span>
<a href="#l14.20"></a><span id="l14.20">             let location = this.mOccurrence.getProperty(&quot;LOCATION&quot;);</span>
<a href="#l14.21"></a><span id="l14.21">             let showLocation = Preferences.get(&quot;calendar.view.showLocation&quot;, false);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/calendar/base/content/calendar-views.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/calendar/base/content/calendar-views.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -33,17 +33,17 @@ var calendarViewController = {</span>
<a href="#l15.4"></a><span id="l15.4">      * Creates a new event</span>
<a href="#l15.5"></a><span id="l15.5">      * @see calICalendarViewController</span>
<a href="#l15.6"></a><span id="l15.6">      */</span>
<a href="#l15.7"></a><span id="l15.7">     createNewEvent: function(aCalendar, aStartTime, aEndTime, aForceAllday) {</span>
<a href="#l15.8"></a><span id="l15.8">         // if we're given both times, skip the dialog</span>
<a href="#l15.9"></a><span id="l15.9">         if (aStartTime &amp;&amp; aEndTime &amp;&amp; !aStartTime.isDate &amp;&amp; !aEndTime.isDate) {</span>
<a href="#l15.10"></a><span id="l15.10">             let item = cal.createEvent();</span>
<a href="#l15.11"></a><span id="l15.11">             setDefaultItemValues(item, aCalendar, aStartTime, aEndTime);</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-            item.title = cal.calGetString(&quot;calendar&quot;, &quot;newEvent&quot;);</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+            item.title = cal.l10n.getCalString(&quot;newEvent&quot;);</span>
<a href="#l15.14"></a><span id="l15.14">             doTransaction(&quot;add&quot;, item, item.calendar, null, null);</span>
<a href="#l15.15"></a><span id="l15.15">         } else {</span>
<a href="#l15.16"></a><span id="l15.16">             createEventWithDialog(aCalendar, aStartTime, null, null, null, aForceAllday);</span>
<a href="#l15.17"></a><span id="l15.17">         }</span>
<a href="#l15.18"></a><span id="l15.18">     },</span>
<a href="#l15.19"></a><span id="l15.19"> </span>
<a href="#l15.20"></a><span id="l15.20">     /**</span>
<a href="#l15.21"></a><span id="l15.21">      * Modifies the given occurrence</span>
<a href="#l15.22"></a><span id="l15.22" class="difflineat">@@ -697,21 +697,21 @@ cal.navigationBar = {</span>
<a href="#l15.23"></a><span id="l15.23">             let weekLabel = document.getElementById(&quot;calendarWeek&quot;);</span>
<a href="#l15.24"></a><span id="l15.24">             if (aStartDate.nativeTime == aEndDate.nativeTime) {</span>
<a href="#l15.25"></a><span id="l15.25">                 intervalLabel.value = cal.getDateFormatter().formatDate(aStartDate);</span>
<a href="#l15.26"></a><span id="l15.26">             } else {</span>
<a href="#l15.27"></a><span id="l15.27">                 intervalLabel.value = currentView().getRangeDescription();</span>
<a href="#l15.28"></a><span id="l15.28">                 secondWeekNo = cal.getWeekInfoService().getWeekTitle(aEndDate);</span>
<a href="#l15.29"></a><span id="l15.29">             }</span>
<a href="#l15.30"></a><span id="l15.30">             if (secondWeekNo == firstWeekNo) {</span>
<a href="#l15.31"></a><span id="l15.31" class="difflineminus">-                weekLabel.value = cal.calGetString(&quot;calendar&quot;, &quot;singleShortCalendarWeek&quot;, [firstWeekNo]);</span>
<a href="#l15.32"></a><span id="l15.32" class="difflineminus">-                weekLabel.tooltipText = cal.calGetString(&quot;calendar&quot;, &quot;singleLongCalendarWeek&quot;, [firstWeekNo]);</span>
<a href="#l15.33"></a><span id="l15.33" class="difflineplus">+                weekLabel.value = cal.l10n.getCalString(&quot;singleShortCalendarWeek&quot;, [firstWeekNo]);</span>
<a href="#l15.34"></a><span id="l15.34" class="difflineplus">+                weekLabel.tooltipText = cal.l10n.getCalString(&quot;singleLongCalendarWeek&quot;, [firstWeekNo]);</span>
<a href="#l15.35"></a><span id="l15.35">             } else {</span>
<a href="#l15.36"></a><span id="l15.36" class="difflineminus">-                weekLabel.value = cal.calGetString(&quot;calendar&quot;, &quot;severalShortCalendarWeeks&quot;, [firstWeekNo, secondWeekNo]);</span>
<a href="#l15.37"></a><span id="l15.37" class="difflineminus">-                weekLabel.tooltipText = cal.calGetString(&quot;calendar&quot;, &quot;severalLongCalendarWeeks&quot;, [firstWeekNo, secondWeekNo]);</span>
<a href="#l15.38"></a><span id="l15.38" class="difflineplus">+                weekLabel.value = cal.l10n.getCalString(&quot;severalShortCalendarWeeks&quot;, [firstWeekNo, secondWeekNo]);</span>
<a href="#l15.39"></a><span id="l15.39" class="difflineplus">+                weekLabel.tooltipText = cal.l10n.getCalString(&quot;severalLongCalendarWeeks&quot;, [firstWeekNo, secondWeekNo]);</span>
<a href="#l15.40"></a><span id="l15.40">             }</span>
<a href="#l15.41"></a><span id="l15.41">             docTitle = intervalLabel.value;</span>
<a href="#l15.42"></a><span id="l15.42">         }</span>
<a href="#l15.43"></a><span id="l15.43">         if (document.getElementById(&quot;modeBroadcaster&quot;).getAttribute(&quot;mode&quot;) == &quot;calendar&quot;) {</span>
<a href="#l15.44"></a><span id="l15.44">             document.title = (docTitle ? docTitle + &quot; - &quot; : &quot;&quot;) +</span>
<a href="#l15.45"></a><span id="l15.45">                 cal.calGetString(&quot;brand&quot;, &quot;brandFullName&quot;, null, &quot;branding&quot;);</span>
<a href="#l15.46"></a><span id="l15.46">         }</span>
<a href="#l15.47"></a><span id="l15.47">         let viewTabs = document.getElementById(&quot;view-tabs&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/calendar/base/content/calendar-views.xml</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/calendar/base/content/calendar-views.xml</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -249,17 +249,17 @@</span>
<a href="#l16.4"></a><span id="l16.4">             }</span>
<a href="#l16.5"></a><span id="l16.5">             this.showDate(aDate);</span>
<a href="#l16.6"></a><span id="l16.6">         ]]&gt;&lt;/body&gt;</span>
<a href="#l16.7"></a><span id="l16.7">       &lt;/method&gt;</span>
<a href="#l16.8"></a><span id="l16.8">       &lt;method name=&quot;getRangeDescription&quot;&gt;</span>
<a href="#l16.9"></a><span id="l16.9">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l16.10"></a><span id="l16.10">             let monthName = cal.l10n.formatMonth(this.rangeStartDate.month + 1,</span>
<a href="#l16.11"></a><span id="l16.11">                                                  &quot;calendar&quot;, &quot;monthInYear&quot;);</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-            return cal.calGetString(&quot;calendar&quot;, &quot;monthInYear&quot;, [monthName, this.rangeStartDate.year]);</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+            return cal.l10n.getCalString(&quot;monthInYear&quot;, [monthName, this.rangeStartDate.year]);</span>
<a href="#l16.14"></a><span id="l16.14">         ]]&gt;&lt;/body&gt;</span>
<a href="#l16.15"></a><span id="l16.15">        &lt;/method&gt;</span>
<a href="#l16.16"></a><span id="l16.16">       &lt;method name=&quot;moveView&quot;&gt;</span>
<a href="#l16.17"></a><span id="l16.17">         &lt;parameter name=&quot;aNumber&quot;/&gt;</span>
<a href="#l16.18"></a><span id="l16.18">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l16.19"></a><span id="l16.19">             let dates = this.getDateList({});</span>
<a href="#l16.20"></a><span id="l16.20">             this.displayDaysOff = !this.mWorkdaysOnly;</span>
<a href="#l16.21"></a><span id="l16.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-alarm-dialog.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-alarm-dialog.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -220,31 +220,31 @@ function aboveSnoozeLimit(aDuration) {</span>
<a href="#l17.4"></a><span id="l17.4">     const LIMIT = Components.interfaces.calIAlarmService.MAX_SNOOZE_MONTHS;</span>
<a href="#l17.5"></a><span id="l17.5"> </span>
<a href="#l17.6"></a><span id="l17.6">     let currentTime = cal.dtz.now().getInTimezone(cal.dtz.UTC);</span>
<a href="#l17.7"></a><span id="l17.7">     let limitTime = currentTime.clone();</span>
<a href="#l17.8"></a><span id="l17.8">     limitTime.month += LIMIT;</span>
<a href="#l17.9"></a><span id="l17.9"> </span>
<a href="#l17.10"></a><span id="l17.10">     let durationUntilLimit = limitTime.subtractDate(currentTime);</span>
<a href="#l17.11"></a><span id="l17.11">     if (aDuration.compare(durationUntilLimit) &gt; 0) {</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-        let msg = PluralForm.get(LIMIT, cal.calGetString(&quot;calendar&quot;, &quot;alarmSnoozeLimitExceeded&quot;));</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+        let msg = PluralForm.get(LIMIT, cal.l10n.getCalString(&quot;alarmSnoozeLimitExceeded&quot;));</span>
<a href="#l17.14"></a><span id="l17.14">         cal.showError(msg.replace(&quot;#1&quot;, LIMIT), window);</span>
<a href="#l17.15"></a><span id="l17.15">         return true;</span>
<a href="#l17.16"></a><span id="l17.16">     }</span>
<a href="#l17.17"></a><span id="l17.17">     return false;</span>
<a href="#l17.18"></a><span id="l17.18"> }</span>
<a href="#l17.19"></a><span id="l17.19"> </span>
<a href="#l17.20"></a><span id="l17.20"> /**</span>
<a href="#l17.21"></a><span id="l17.21">  * Sets up the window title, counting the number of alarms in the window.</span>
<a href="#l17.22"></a><span id="l17.22">  */</span>
<a href="#l17.23"></a><span id="l17.23"> function setupTitle() {</span>
<a href="#l17.24"></a><span id="l17.24">     let alarmRichlist = document.getElementById(&quot;alarm-richlist&quot;);</span>
<a href="#l17.25"></a><span id="l17.25">     let reminders = alarmRichlist.childNodes.length;</span>
<a href="#l17.26"></a><span id="l17.26"> </span>
<a href="#l17.27"></a><span id="l17.27" class="difflineminus">-    let title = PluralForm.get(reminders, cal.calGetString(&quot;calendar&quot;, &quot;alarmWindowTitle.label&quot;));</span>
<a href="#l17.28"></a><span id="l17.28" class="difflineplus">+    let title = PluralForm.get(reminders, cal.l10n.getCalString(&quot;alarmWindowTitle.label&quot;));</span>
<a href="#l17.29"></a><span id="l17.29">     document.title = title.replace(&quot;#1&quot;, reminders);</span>
<a href="#l17.30"></a><span id="l17.30"> }</span>
<a href="#l17.31"></a><span id="l17.31"> </span>
<a href="#l17.32"></a><span id="l17.32"> /**</span>
<a href="#l17.33"></a><span id="l17.33">  * Comparison function for the start date of a calendar item and</span>
<a href="#l17.34"></a><span id="l17.34">  * the start date of a calendar-alarm-widget.</span>
<a href="#l17.35"></a><span id="l17.35">  *</span>
<a href="#l17.36"></a><span id="l17.36">  * @param aItem                 A calendar item for the comparison of the start date property</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-conflicts-dialog.xul</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-conflicts-dialog.xul</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -24,28 +24,28 @@</span>
<a href="#l18.4"></a><span id="l18.4">             document.getElementById(&quot;item-box&quot;).replaceWith(vbox);</span>
<a href="#l18.5"></a><span id="l18.5">         }</span>
<a href="#l18.6"></a><span id="l18.6"> </span>
<a href="#l18.7"></a><span id="l18.7">         let descr = document.getElementById(&quot;conflicts-description&quot;);</span>
<a href="#l18.8"></a><span id="l18.8"> </span>
<a href="#l18.9"></a><span id="l18.9">         // TODO These strings should move to DTD files, but we don't want to</span>
<a href="#l18.10"></a><span id="l18.10">         // disrupt string freeze right now. For that matter, this dialog</span>
<a href="#l18.11"></a><span id="l18.11">         // should be reworked!</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-        docEl.title =  cal.calGetString(&quot;calendar&quot;, &quot;itemModifiedOnServerTitle&quot;);</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineminus">-        descr.textContent = cal.calGetString(&quot;calendar&quot;, &quot;itemModifiedOnServer&quot;);</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineplus">+        docEl.title =  cal.l10n.getCalString(&quot;itemModifiedOnServerTitle&quot;);</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineplus">+        descr.textContent = cal.l10n.getCalString(&quot;itemModifiedOnServer&quot;);</span>
<a href="#l18.16"></a><span id="l18.16"> </span>
<a href="#l18.17"></a><span id="l18.17">         if (window.arguments[0].mode == &quot;modify&quot;) {</span>
<a href="#l18.18"></a><span id="l18.18" class="difflineminus">-            descr.textContent += cal.calGetString(&quot;calendar&quot;, &quot;modifyWillLoseData&quot;);</span>
<a href="#l18.19"></a><span id="l18.19" class="difflineminus">-            docEl.getButton(&quot;accept&quot;).setAttribute(&quot;label&quot;, cal.calGetString(&quot;calendar&quot;, &quot;proceedModify&quot;));</span>
<a href="#l18.20"></a><span id="l18.20" class="difflineplus">+            descr.textContent += cal.l10n.getCalString(&quot;modifyWillLoseData&quot;);</span>
<a href="#l18.21"></a><span id="l18.21" class="difflineplus">+            docEl.getButton(&quot;accept&quot;).setAttribute(&quot;label&quot;, cal.l10n.getCalString(&quot;proceedModify&quot;));</span>
<a href="#l18.22"></a><span id="l18.22">         } else {</span>
<a href="#l18.23"></a><span id="l18.23" class="difflineminus">-            descr.textContent += cal.calGetString(&quot;calendar&quot;, &quot;deleteWillLoseData&quot;);</span>
<a href="#l18.24"></a><span id="l18.24" class="difflineminus">-            docEl.getButton(&quot;accept&quot;).setAttribute(&quot;label&quot;, cal.calGetString(&quot;calendar&quot;, &quot;proceedDelete&quot;));</span>
<a href="#l18.25"></a><span id="l18.25" class="difflineplus">+            descr.textContent += cal.l10n.getCalString(&quot;deleteWillLoseData&quot;);</span>
<a href="#l18.26"></a><span id="l18.26" class="difflineplus">+            docEl.getButton(&quot;accept&quot;).setAttribute(&quot;label&quot;, cal.l10n.getCalString(&quot;proceedDelete&quot;));</span>
<a href="#l18.27"></a><span id="l18.27">         }</span>
<a href="#l18.28"></a><span id="l18.28"> </span>
<a href="#l18.29"></a><span id="l18.29" class="difflineminus">-        docEl.getButton(&quot;cancel&quot;).setAttribute(&quot;label&quot;, cal.calGetString(&quot;calendar&quot;, &quot;updateFromServer&quot;));</span>
<a href="#l18.30"></a><span id="l18.30" class="difflineplus">+        docEl.getButton(&quot;cancel&quot;).setAttribute(&quot;label&quot;, cal.l10n.getCalString(&quot;updateFromServer&quot;));</span>
<a href="#l18.31"></a><span id="l18.31"> </span>
<a href="#l18.32"></a><span id="l18.32">         window.sizeToContent();</span>
<a href="#l18.33"></a><span id="l18.33">     }</span>
<a href="#l18.34"></a><span id="l18.34"> </span>
<a href="#l18.35"></a><span id="l18.35">     function onAccept() {</span>
<a href="#l18.36"></a><span id="l18.36">         window.arguments[0].overwrite = true;</span>
<a href="#l18.37"></a><span id="l18.37">     }</span>
<a href="#l18.38"></a><span id="l18.38"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-creation.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-creation.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -8,19 +8,19 @@ ChromeUtils.import(&quot;resource://calendar/</span>
<a href="#l19.4"></a><span id="l19.4"> </span>
<a href="#l19.5"></a><span id="l19.5"> /**</span>
<a href="#l19.6"></a><span id="l19.6">  * Shows the filepicker and creates a new calendar with a local file using the ICS</span>
<a href="#l19.7"></a><span id="l19.7">  * provider.</span>
<a href="#l19.8"></a><span id="l19.8">  */</span>
<a href="#l19.9"></a><span id="l19.9"> function openLocalCalendar() {</span>
<a href="#l19.10"></a><span id="l19.10">     const nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l19.11"></a><span id="l19.11">     let picker = Components.classes[&quot;@mozilla.org/filepicker;1&quot;].createInstance(nsIFilePicker);</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-    picker.init(window, cal.calGetString(&quot;calendar&quot;, &quot;Open&quot;), nsIFilePicker.modeOpen);</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+    picker.init(window, cal.l10n.getCalString(&quot;Open&quot;), nsIFilePicker.modeOpen);</span>
<a href="#l19.14"></a><span id="l19.14">     let wildmat = &quot;*.ics&quot;;</span>
<a href="#l19.15"></a><span id="l19.15" class="difflineminus">-    let description = cal.calGetString(&quot;calendar&quot;, &quot;filterIcs&quot;, [wildmat]);</span>
<a href="#l19.16"></a><span id="l19.16" class="difflineplus">+    let description = cal.l10n.getCalString(&quot;filterIcs&quot;, [wildmat]);</span>
<a href="#l19.17"></a><span id="l19.17">     picker.appendFilter(description, wildmat);</span>
<a href="#l19.18"></a><span id="l19.18">     picker.appendFilters(nsIFilePicker.filterAll);</span>
<a href="#l19.19"></a><span id="l19.19"> </span>
<a href="#l19.20"></a><span id="l19.20">     picker.open(rv =&gt; {</span>
<a href="#l19.21"></a><span id="l19.21">         if (rv != nsIFilePicker.returnOK || !picker.file) {</span>
<a href="#l19.22"></a><span id="l19.22">             return;</span>
<a href="#l19.23"></a><span id="l19.23">         }</span>
<a href="#l19.24"></a><span id="l19.24">         let calMgr = cal.getCalendarManager();</span>
<a href="#l19.25"></a><span id="l19.25" class="difflineat">@@ -38,15 +38,15 @@ function openLocalCalendar() {</span>
<a href="#l19.26"></a><span id="l19.26">         // calendarCreation.js</span>
<a href="#l19.27"></a><span id="l19.27">         let fullPathRegex = new RegExp(&quot;([^/:]+)[.]ics$&quot;);</span>
<a href="#l19.28"></a><span id="l19.28">         let prettyName = picker.fileURL.spec.match(fullPathRegex);</span>
<a href="#l19.29"></a><span id="l19.29">         let name;</span>
<a href="#l19.30"></a><span id="l19.30"> </span>
<a href="#l19.31"></a><span id="l19.31">         if (prettyName) {</span>
<a href="#l19.32"></a><span id="l19.32">             name = decodeURIComponent(prettyName[1]);</span>
<a href="#l19.33"></a><span id="l19.33">         } else {</span>
<a href="#l19.34"></a><span id="l19.34" class="difflineminus">-            name = cal.calGetString(&quot;calendar&quot;, &quot;untitledCalendarName&quot;);</span>
<a href="#l19.35"></a><span id="l19.35" class="difflineplus">+            name = cal.l10n.getCalString(&quot;untitledCalendarName&quot;);</span>
<a href="#l19.36"></a><span id="l19.36">         }</span>
<a href="#l19.37"></a><span id="l19.37">         openCalendar.name = name;</span>
<a href="#l19.38"></a><span id="l19.38"> </span>
<a href="#l19.39"></a><span id="l19.39">         calMgr.registerCalendar(openCalendar);</span>
<a href="#l19.40"></a><span id="l19.40">     });</span>
<a href="#l19.41"></a><span id="l19.41"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-dialog-utils.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-dialog-utils.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -608,37 +608,47 @@ function setupAttendees() {</span>
<a href="#l20.4"></a><span id="l20.4">                 let partstat = attendee.participationStatus || &quot;NEEDS-ACTION&quot;;</span>
<a href="#l20.5"></a><span id="l20.5"> </span>
<a href="#l20.6"></a><span id="l20.6">                 icon.setAttribute(&quot;partstat&quot;, partstat);</span>
<a href="#l20.7"></a><span id="l20.7">                 icon.setAttribute(&quot;usertype&quot;, userType);</span>
<a href="#l20.8"></a><span id="l20.8">                 icon.setAttribute(&quot;role&quot;, role);</span>
<a href="#l20.9"></a><span id="l20.9">                 cell.setAttribute(&quot;attendeeid&quot;, attendee.id);</span>
<a href="#l20.10"></a><span id="l20.10">                 cell.removeAttribute(&quot;hidden&quot;);</span>
<a href="#l20.11"></a><span id="l20.11"> </span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-                let userTypeString = cal.calGetString(&quot;calendar&quot;, &quot;dialog.tooltip.attendeeUserType2.&quot; + userType,</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineminus">-                                                      [attendee.toString()]);</span>
<a href="#l20.14"></a><span id="l20.14" class="difflineminus">-                let roleString = cal.calGetString(&quot;calendar&quot;, &quot;dialog.tooltip.attendeeRole2.&quot; + role,</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineminus">-                                                  [userTypeString]);</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineminus">-                let partstatString = cal.calGetString(&quot;calendar&quot;, &quot;dialog.tooltip.attendeePartStat2.&quot; + partstat,</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineminus">-                                                      [label]);</span>
<a href="#l20.18"></a><span id="l20.18" class="difflineminus">-                let tooltip = cal.calGetString(&quot;calendar&quot;, &quot;dialog.tooltip.attendee.combined&quot;,</span>
<a href="#l20.19"></a><span id="l20.19" class="difflineminus">-                                               [roleString, partstatString]);</span>
<a href="#l20.20"></a><span id="l20.20" class="difflineplus">+                let userTypeString = cal.l10n.getCalString(</span>
<a href="#l20.21"></a><span id="l20.21" class="difflineplus">+                    &quot;dialog.tooltip.attendeeUserType2.&quot; + userType,</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineplus">+                    [attendee.toString()]</span>
<a href="#l20.23"></a><span id="l20.23" class="difflineplus">+                );</span>
<a href="#l20.24"></a><span id="l20.24" class="difflineplus">+                let roleString = cal.l10n.getCalString(</span>
<a href="#l20.25"></a><span id="l20.25" class="difflineplus">+                    &quot;dialog.tooltip.attendeeRole2.&quot; + role,</span>
<a href="#l20.26"></a><span id="l20.26" class="difflineplus">+                    [userTypeString]</span>
<a href="#l20.27"></a><span id="l20.27" class="difflineplus">+                );</span>
<a href="#l20.28"></a><span id="l20.28" class="difflineplus">+                let partstatString = cal.l10n.getCalString(</span>
<a href="#l20.29"></a><span id="l20.29" class="difflineplus">+                    &quot;dialog.tooltip.attendeePartStat2.&quot; + partstat,</span>
<a href="#l20.30"></a><span id="l20.30" class="difflineplus">+                    [label]</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineplus">+                );</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineplus">+                let tooltip = cal.l10n.getCalString(</span>
<a href="#l20.33"></a><span id="l20.33" class="difflineplus">+                    &quot;dialog.tooltip.attendee.combined&quot;,</span>
<a href="#l20.34"></a><span id="l20.34" class="difflineplus">+                    [roleString, partstatString]</span>
<a href="#l20.35"></a><span id="l20.35" class="difflineplus">+                );</span>
<a href="#l20.36"></a><span id="l20.36"> </span>
<a href="#l20.37"></a><span id="l20.37">                 let del = cal.itip.resolveDelegation(attendee, window.attendees);</span>
<a href="#l20.38"></a><span id="l20.38">                 if (del.delegators != &quot;&quot;) {</span>
<a href="#l20.39"></a><span id="l20.39" class="difflineminus">-                    del.delegators = cal.calGetString(&quot;calendar&quot;,</span>
<a href="#l20.40"></a><span id="l20.40" class="difflineminus">-                                                      &quot;dialog.attendee.append.delegatedFrom&quot;,</span>
<a href="#l20.41"></a><span id="l20.41" class="difflineminus">-                                                      [del.delegators]);</span>
<a href="#l20.42"></a><span id="l20.42" class="difflineplus">+                    del.delegators = cal.l10n.getCalString(</span>
<a href="#l20.43"></a><span id="l20.43" class="difflineplus">+                        &quot;dialog.attendee.append.delegatedFrom&quot;,</span>
<a href="#l20.44"></a><span id="l20.44" class="difflineplus">+                        [del.delegators]</span>
<a href="#l20.45"></a><span id="l20.45" class="difflineplus">+                    );</span>
<a href="#l20.46"></a><span id="l20.46">                     label += &quot; &quot; + del.delegators;</span>
<a href="#l20.47"></a><span id="l20.47">                     tooltip += &quot; &quot; + del.delegators;</span>
<a href="#l20.48"></a><span id="l20.48">                 }</span>
<a href="#l20.49"></a><span id="l20.49">                 if (del.delegatees != &quot;&quot;) {</span>
<a href="#l20.50"></a><span id="l20.50" class="difflineminus">-                    del.delegatees = cal.calGetString(&quot;calendar&quot;,</span>
<a href="#l20.51"></a><span id="l20.51" class="difflineminus">-                                                      &quot;dialog.attendee.append.delegatedTo&quot;,</span>
<a href="#l20.52"></a><span id="l20.52" class="difflineminus">-                                                      [del.delegatees]);</span>
<a href="#l20.53"></a><span id="l20.53" class="difflineplus">+                    del.delegatees = cal.l10n.getCalString(</span>
<a href="#l20.54"></a><span id="l20.54" class="difflineplus">+                        &quot;dialog.attendee.append.delegatedTo&quot;,</span>
<a href="#l20.55"></a><span id="l20.55" class="difflineplus">+                        [del.delegatees]</span>
<a href="#l20.56"></a><span id="l20.56" class="difflineplus">+                    );</span>
<a href="#l20.57"></a><span id="l20.57">                     tooltip += &quot; &quot; + del.delegatees;</span>
<a href="#l20.58"></a><span id="l20.58">                 }</span>
<a href="#l20.59"></a><span id="l20.59"> </span>
<a href="#l20.60"></a><span id="l20.60">                 text.setAttribute(&quot;value&quot;, label);</span>
<a href="#l20.61"></a><span id="l20.61">                 cell.setAttribute(&quot;tooltiptext&quot;, tooltip);</span>
<a href="#l20.62"></a><span id="l20.62">                 attCount++;</span>
<a href="#l20.63"></a><span id="l20.63">             }</span>
<a href="#l20.64"></a><span id="l20.64">             // we fill the row with placeholders if required</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-attendees.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-attendees.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -419,17 +419,17 @@ function updateEndTime() {</span>
<a href="#l21.4"></a><span id="l21.4"> </span>
<a href="#l21.5"></a><span id="l21.5">     propagateDateTime();</span>
<a href="#l21.6"></a><span id="l21.6"> </span>
<a href="#l21.7"></a><span id="l21.7">     if (warning) {</span>
<a href="#l21.8"></a><span id="l21.8">         let callback = function() {</span>
<a href="#l21.9"></a><span id="l21.9">             Services.prompt.alert(</span>
<a href="#l21.10"></a><span id="l21.10">                 null,</span>
<a href="#l21.11"></a><span id="l21.11">                 document.title,</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-                cal.calGetString(&quot;calendar&quot;, &quot;warningEndBeforeStart&quot;));</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+                cal.l10n.getCalString(&quot;warningEndBeforeStart&quot;));</span>
<a href="#l21.14"></a><span id="l21.14">         };</span>
<a href="#l21.15"></a><span id="l21.15">         setTimeout(callback, 1);</span>
<a href="#l21.16"></a><span id="l21.16">     }</span>
<a href="#l21.17"></a><span id="l21.17"> }</span>
<a href="#l21.18"></a><span id="l21.18"> </span>
<a href="#l21.19"></a><span id="l21.19"> /**</span>
<a href="#l21.20"></a><span id="l21.20">  * Prompts the user to pick a new timezone for the starttime. The dialog is</span>
<a href="#l21.21"></a><span id="l21.21">  * opened modally.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -641,17 +641,17 @@ function checkUntilDate() {</span>
<a href="#l22.4"></a><span id="l22.4">         setElementValue(&quot;repeat-until-date&quot;, repeatDate);</span>
<a href="#l22.5"></a><span id="l22.5">         checkUntilDate.warning = true;</span>
<a href="#l22.6"></a><span id="l22.6">         let callback = function() {</span>
<a href="#l22.7"></a><span id="l22.7">             // No warning when the dialog is being closed with the Cancel button.</span>
<a href="#l22.8"></a><span id="l22.8">             if (!checkUntilDate.warning) {</span>
<a href="#l22.9"></a><span id="l22.9">                 return;</span>
<a href="#l22.10"></a><span id="l22.10">             }</span>
<a href="#l22.11"></a><span id="l22.11">             Services.prompt.alert(null, document.title,</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-                                  cal.calGetString(&quot;calendar&quot;, &quot;warningUntilDateBeforeStart&quot;));</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+                                  cal.l10n.getCalString(&quot;warningUntilDateBeforeStart&quot;));</span>
<a href="#l22.14"></a><span id="l22.14">             checkUntilDate.warning = false;</span>
<a href="#l22.15"></a><span id="l22.15">         };</span>
<a href="#l22.16"></a><span id="l22.16">         setTimeout(callback, 1);</span>
<a href="#l22.17"></a><span id="l22.17">     } else {</span>
<a href="#l22.18"></a><span id="l22.18">         gUntilDate = untilDate;</span>
<a href="#l22.19"></a><span id="l22.19">         updateRecurrenceControls();</span>
<a href="#l22.20"></a><span id="l22.20">     }</span>
<a href="#l22.21"></a><span id="l22.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-migration-dialog.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-migration-dialog.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -550,20 +550,20 @@ var gDataMigrator = {</span>
<a href="#l23.4"></a><span id="l23.4">         calendar.id = cal.getUUID();</span>
<a href="#l23.5"></a><span id="l23.5"> </span>
<a href="#l23.6"></a><span id="l23.6">         try {</span>
<a href="#l23.7"></a><span id="l23.7">             inputStream.init(icsFile, MODE_RDONLY, parseInt(&quot;0444&quot;, 8), {});</span>
<a href="#l23.8"></a><span id="l23.8">             items = icsImporter.importFromStream(inputStream, {});</span>
<a href="#l23.9"></a><span id="l23.9">         } catch(ex) {</span>
<a href="#l23.10"></a><span id="l23.10">             switch (ex.result) {</span>
<a href="#l23.11"></a><span id="l23.11">                 case Components.interfaces.calIErrors.INVALID_TIMEZONE:</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-                    cal.showError(cal.calGetString(&quot;calendar&quot;, &quot;timezoneError&quot;, [icsFile.path]), window);</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+                    cal.showError(cal.l10n.getCalString(&quot;timezoneError&quot;, [icsFile.path]), window);</span>
<a href="#l23.14"></a><span id="l23.14">                     break;</span>
<a href="#l23.15"></a><span id="l23.15">                 default:</span>
<a href="#l23.16"></a><span id="l23.16" class="difflineminus">-                    cal.showError(cal.calGetString(&quot;calendar&quot;, &quot;unableToRead&quot;) + icsFile.path + &quot;\n&quot;+ ex, window);</span>
<a href="#l23.17"></a><span id="l23.17" class="difflineplus">+                    cal.showError(cal.l10n.getCalString(&quot;unableToRead&quot;) + icsFile.path + &quot;\n&quot;+ ex, window);</span>
<a href="#l23.18"></a><span id="l23.18">             }</span>
<a href="#l23.19"></a><span id="l23.19">         } finally {</span>
<a href="#l23.20"></a><span id="l23.20">            inputStream.close();</span>
<a href="#l23.21"></a><span id="l23.21">         }</span>
<a href="#l23.22"></a><span id="l23.22"> </span>
<a href="#l23.23"></a><span id="l23.23">         // Defined in import-export.js</span>
<a href="#l23.24"></a><span id="l23.24">         putItemsIntoCal(calendar, items, icsFile.leafName);</span>
<a href="#l23.25"></a><span id="l23.25"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-print-dialog.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-print-dialog.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -69,17 +69,17 @@ function loadCalendarPrintDialog() {</span>
<a href="#l24.4"></a><span id="l24.4">  * settings.</span>
<a href="#l24.5"></a><span id="l24.5">  *</span>
<a href="#l24.6"></a><span id="l24.6">  * @param receiverFunc  The callback function to call on completion.</span>
<a href="#l24.7"></a><span id="l24.7">  */</span>
<a href="#l24.8"></a><span id="l24.8"> function getPrintSettings(receiverFunc) {</span>
<a href="#l24.9"></a><span id="l24.9">     let tempTitle = document.getElementById(&quot;title-field&quot;).value;</span>
<a href="#l24.10"></a><span id="l24.10">     let settings = {};</span>
<a href="#l24.11"></a><span id="l24.11">     let requiresFetch = true;</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-    settings.title = tempTitle || cal.calGetString(&quot;calendar&quot;, &quot;Untitled&quot;);</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+    settings.title = tempTitle || cal.l10n.getCalString(&quot;Untitled&quot;);</span>
<a href="#l24.14"></a><span id="l24.14">     settings.layoutCId = document.getElementById(&quot;layout-field&quot;).value;</span>
<a href="#l24.15"></a><span id="l24.15">     settings.start = null;</span>
<a href="#l24.16"></a><span id="l24.16">     settings.end = null;</span>
<a href="#l24.17"></a><span id="l24.17">     settings.eventList = [];</span>
<a href="#l24.18"></a><span id="l24.18">     settings.printEvents = document.getElementById(&quot;events&quot;).checked;</span>
<a href="#l24.19"></a><span id="l24.19">     settings.printTasks = document.getElementById(&quot;tasks&quot;).checked;</span>
<a href="#l24.20"></a><span id="l24.20">     settings.printCompletedTasks = document.getElementById(&quot;completed-tasks&quot;).checked;</span>
<a href="#l24.21"></a><span id="l24.21">     settings.printTasksWithNoDueDate = document.getElementById(&quot;tasks-with-no-due-date&quot;).checked;</span>
<a href="#l24.22"></a><span id="l24.22" class="difflineat">@@ -197,17 +197,17 @@ function getFilter(settings) {</span>
<a href="#l24.23"></a><span id="l24.23"> </span>
<a href="#l24.24"></a><span id="l24.24"> /**</span>
<a href="#l24.25"></a><span id="l24.25">  * Looks at the selections the user has made (start date, layout, etc.), and</span>
<a href="#l24.26"></a><span id="l24.26">  * updates the HTML in the iframe accordingly. This is also called when a</span>
<a href="#l24.27"></a><span id="l24.27">  * dialog UI element has changed, since we'll want to refresh the preview.</span>
<a href="#l24.28"></a><span id="l24.28">  */</span>
<a href="#l24.29"></a><span id="l24.29"> function refreshHtml(finishFunc) {</span>
<a href="#l24.30"></a><span id="l24.30">     getPrintSettings((settings) =&gt; {</span>
<a href="#l24.31"></a><span id="l24.31" class="difflineminus">-        document.title = cal.calGetString(&quot;calendar&quot;, &quot;PrintPreviewWindowTitle&quot;, [settings.title]);</span>
<a href="#l24.32"></a><span id="l24.32" class="difflineplus">+        document.title = cal.l10n.getCalString(&quot;PrintPreviewWindowTitle&quot;, [settings.title]);</span>
<a href="#l24.33"></a><span id="l24.33"> </span>
<a href="#l24.34"></a><span id="l24.34">         let printformatter = Components.classes[settings.layoutCId]</span>
<a href="#l24.35"></a><span id="l24.35">                                        .createInstance(Components.interfaces.calIPrintFormatter);</span>
<a href="#l24.36"></a><span id="l24.36">         let html = &quot;&quot;;</span>
<a href="#l24.37"></a><span id="l24.37">         try {</span>
<a href="#l24.38"></a><span id="l24.38">             let pipe = Components.classes[&quot;@mozilla.org/pipe;1&quot;]</span>
<a href="#l24.39"></a><span id="l24.39">                                  .createInstance(Components.interfaces.nsIPipe);</span>
<a href="#l24.40"></a><span id="l24.40">             const PR_UINT32_MAX = 4294967295; // signals &quot;infinite-length&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-properties-dialog.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-properties-dialog.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -130,17 +130,17 @@ function unsubscribeCalendar() {</span>
<a href="#l25.4"></a><span id="l25.4">     window.close();</span>
<a href="#l25.5"></a><span id="l25.5"> }</span>
<a href="#l25.6"></a><span id="l25.6"> </span>
<a href="#l25.7"></a><span id="l25.7"> function initRefreshInterval() {</span>
<a href="#l25.8"></a><span id="l25.8">     function createMenuItem(minutes) {</span>
<a href="#l25.9"></a><span id="l25.9">         let menuitem = createXULElement(&quot;menuitem&quot;);</span>
<a href="#l25.10"></a><span id="l25.10">         menuitem.setAttribute(&quot;value&quot;, minutes);</span>
<a href="#l25.11"></a><span id="l25.11"> </span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-        let everyMinuteString = cal.calGetString(&quot;calendar&quot;, &quot;calendarPropertiesEveryMinute&quot;);</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+        let everyMinuteString = cal.l10n.getCalString(&quot;calendarPropertiesEveryMinute&quot;);</span>
<a href="#l25.14"></a><span id="l25.14">         let label = PluralForm.get(minutes, everyMinuteString).replace(&quot;#1&quot;, minutes);</span>
<a href="#l25.15"></a><span id="l25.15">         menuitem.setAttribute(&quot;label&quot;, label);</span>
<a href="#l25.16"></a><span id="l25.16"> </span>
<a href="#l25.17"></a><span id="l25.17">         return menuitem;</span>
<a href="#l25.18"></a><span id="l25.18">     }</span>
<a href="#l25.19"></a><span id="l25.19"> </span>
<a href="#l25.20"></a><span id="l25.20">     setBooleanAttribute(&quot;calendar-refreshInterval-row&quot;, &quot;hidden&quot;, !gCalendar.canRefresh);</span>
<a href="#l25.21"></a><span id="l25.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-summary-dialog.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-summary-dialog.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -116,24 +116,32 @@ function onLoad() {</span>
<a href="#l26.4"></a><span id="l26.4">         let text = cell.getElementsByTagName(&quot;label&quot;)[0];</span>
<a href="#l26.5"></a><span id="l26.5">         let icon = cell.getElementsByTagName(&quot;img&quot;)[0];</span>
<a href="#l26.6"></a><span id="l26.6"> </span>
<a href="#l26.7"></a><span id="l26.7">         let role = organizer.role || &quot;REQ-PARTICIPANT&quot;;</span>
<a href="#l26.8"></a><span id="l26.8">         let userType = organizer.userType || &quot;INDIVIDUAL&quot;;</span>
<a href="#l26.9"></a><span id="l26.9">         let partstat = organizer.participationStatus || &quot;NEEDS-ACTION&quot;;</span>
<a href="#l26.10"></a><span id="l26.10">         let orgName = (organizer.commonName &amp;&amp; organizer.commonName.length)</span>
<a href="#l26.11"></a><span id="l26.11">                        ? organizer.commonName : organizer.toString();</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-        let userTypeString = cal.calGetString(&quot;calendar&quot;, &quot;dialog.tooltip.attendeeUserType2.&quot; + userType,</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineminus">-                                              [organizer.toString()]);</span>
<a href="#l26.14"></a><span id="l26.14" class="difflineminus">-        let roleString = cal.calGetString(&quot;calendar&quot;, &quot;dialog.tooltip.attendeeRole2.&quot; + role,</span>
<a href="#l26.15"></a><span id="l26.15" class="difflineminus">-                                          [userTypeString]);</span>
<a href="#l26.16"></a><span id="l26.16" class="difflineminus">-        let partstatString = cal.calGetString(&quot;calendar&quot;, &quot;dialog.tooltip.attendeePartStat2.&quot; + partstat,</span>
<a href="#l26.17"></a><span id="l26.17" class="difflineminus">-                                             [orgName]);</span>
<a href="#l26.18"></a><span id="l26.18" class="difflineminus">-        let tooltip = cal.calGetString(&quot;calendar&quot;, &quot;dialog.tooltip.attendee.combined&quot;,</span>
<a href="#l26.19"></a><span id="l26.19" class="difflineminus">-                                       [roleString, partstatString]);</span>
<a href="#l26.20"></a><span id="l26.20" class="difflineplus">+        let userTypeString = cal.l10n.getCalString(</span>
<a href="#l26.21"></a><span id="l26.21" class="difflineplus">+            &quot;dialog.tooltip.attendeeUserType2.&quot; + userType,</span>
<a href="#l26.22"></a><span id="l26.22" class="difflineplus">+            [organizer.toString()]</span>
<a href="#l26.23"></a><span id="l26.23" class="difflineplus">+        );</span>
<a href="#l26.24"></a><span id="l26.24" class="difflineplus">+        let roleString = cal.l10n.getCalString(</span>
<a href="#l26.25"></a><span id="l26.25" class="difflineplus">+            &quot;dialog.tooltip.attendeeRole2.&quot; + role,</span>
<a href="#l26.26"></a><span id="l26.26" class="difflineplus">+            [userTypeString]</span>
<a href="#l26.27"></a><span id="l26.27" class="difflineplus">+        );</span>
<a href="#l26.28"></a><span id="l26.28" class="difflineplus">+        let partstatString = cal.l10n.getCalString(</span>
<a href="#l26.29"></a><span id="l26.29" class="difflineplus">+            &quot;dialog.tooltip.attendeePartStat2.&quot; + partstat,</span>
<a href="#l26.30"></a><span id="l26.30" class="difflineplus">+            [orgName]</span>
<a href="#l26.31"></a><span id="l26.31" class="difflineplus">+        );</span>
<a href="#l26.32"></a><span id="l26.32" class="difflineplus">+        let tooltip = cal.l10n.getCalString(</span>
<a href="#l26.33"></a><span id="l26.33" class="difflineplus">+            &quot;dialog.tooltip.attendee.combined&quot;,</span>
<a href="#l26.34"></a><span id="l26.34" class="difflineplus">+            [roleString, partstatString]</span>
<a href="#l26.35"></a><span id="l26.35" class="difflineplus">+        );</span>
<a href="#l26.36"></a><span id="l26.36"> </span>
<a href="#l26.37"></a><span id="l26.37">         text.setAttribute(&quot;value&quot;, orgName);</span>
<a href="#l26.38"></a><span id="l26.38">         cell.setAttribute(&quot;tooltiptext&quot;, tooltip);</span>
<a href="#l26.39"></a><span id="l26.39">         icon.setAttribute(&quot;partstat&quot;, partstat);</span>
<a href="#l26.40"></a><span id="l26.40">         icon.setAttribute(&quot;usertype&quot;, userType);</span>
<a href="#l26.41"></a><span id="l26.41">         icon.setAttribute(&quot;role&quot;, role);</span>
<a href="#l26.42"></a><span id="l26.42">     }</span>
<a href="#l26.43"></a><span id="l26.43"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/calendar/base/content/import-export.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/calendar/base/content/import-export.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -20,17 +20,17 @@ var MODE_TRUNCATE = 0x20;</span>
<a href="#l27.4"></a><span id="l27.4">  *                              into the calendar</span>
<a href="#l27.5"></a><span id="l27.5">  */</span>
<a href="#l27.6"></a><span id="l27.6"> function loadEventsFromFile(aCalendar) {</span>
<a href="#l27.7"></a><span id="l27.7">     const nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l27.8"></a><span id="l27.8"> </span>
<a href="#l27.9"></a><span id="l27.9">     let picker = Components.classes[&quot;@mozilla.org/filepicker;1&quot;]</span>
<a href="#l27.10"></a><span id="l27.10">                            .createInstance(nsIFilePicker);</span>
<a href="#l27.11"></a><span id="l27.11">     picker.init(window,</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-                cal.calGetString(&quot;calendar&quot;, &quot;filepickerTitleImport&quot;),</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+                cal.l10n.getCalString(&quot;filepickerTitleImport&quot;),</span>
<a href="#l27.14"></a><span id="l27.14">                 nsIFilePicker.modeOpen);</span>
<a href="#l27.15"></a><span id="l27.15">     picker.defaultExtension = &quot;ics&quot;;</span>
<a href="#l27.16"></a><span id="l27.16"> </span>
<a href="#l27.17"></a><span id="l27.17">     // Get a list of importers</span>
<a href="#l27.18"></a><span id="l27.18">     let contractids = [];</span>
<a href="#l27.19"></a><span id="l27.19">     let catman = Components.classes[&quot;@mozilla.org/categorymanager;1&quot;]</span>
<a href="#l27.20"></a><span id="l27.20">                            .getService(Components.interfaces.nsICategoryManager);</span>
<a href="#l27.21"></a><span id="l27.21">     let catenum = catman.enumerateCategory(&quot;cal-importers&quot;);</span>
<a href="#l27.22"></a><span id="l27.22" class="difflineat">@@ -84,29 +84,29 @@ function loadEventsFromFile(aCalendar) {</span>
<a href="#l27.23"></a><span id="l27.23"> </span>
<a href="#l27.24"></a><span id="l27.24">         try {</span>
<a href="#l27.25"></a><span id="l27.25">             inputStream.init(picker.file, MODE_RDONLY, parseInt(&quot;0444&quot;, 8), {});</span>
<a href="#l27.26"></a><span id="l27.26">             items = importer.importFromStream(inputStream, {});</span>
<a href="#l27.27"></a><span id="l27.27">         } catch (ex) {</span>
<a href="#l27.28"></a><span id="l27.28">             exception = ex;</span>
<a href="#l27.29"></a><span id="l27.29">             switch (ex.result) {</span>
<a href="#l27.30"></a><span id="l27.30">                 case Components.interfaces.calIErrors.INVALID_TIMEZONE:</span>
<a href="#l27.31"></a><span id="l27.31" class="difflineminus">-                    cal.showError(cal.calGetString(&quot;calendar&quot;, &quot;timezoneError&quot;, [filePath]), window);</span>
<a href="#l27.32"></a><span id="l27.32" class="difflineplus">+                    cal.showError(cal.l10n.getCalString(&quot;timezoneError&quot;, [filePath]), window);</span>
<a href="#l27.33"></a><span id="l27.33">                     break;</span>
<a href="#l27.34"></a><span id="l27.34">                 default:</span>
<a href="#l27.35"></a><span id="l27.35" class="difflineminus">-                    cal.showError(cal.calGetString(&quot;calendar&quot;, &quot;unableToRead&quot;) + filePath + &quot;\n&quot; + ex, window);</span>
<a href="#l27.36"></a><span id="l27.36" class="difflineplus">+                    cal.showError(cal.l10n.getCalString(&quot;unableToRead&quot;) + filePath + &quot;\n&quot; + ex, window);</span>
<a href="#l27.37"></a><span id="l27.37">             }</span>
<a href="#l27.38"></a><span id="l27.38">         } finally {</span>
<a href="#l27.39"></a><span id="l27.39">             inputStream.close();</span>
<a href="#l27.40"></a><span id="l27.40">         }</span>
<a href="#l27.41"></a><span id="l27.41"> </span>
<a href="#l27.42"></a><span id="l27.42">         if (!items.length &amp;&amp; !exception) {</span>
<a href="#l27.43"></a><span id="l27.43">             // the ics did not contain any events, so there's no need to proceed. But we should</span>
<a href="#l27.44"></a><span id="l27.44">             // notify the user about it, if we haven't before.</span>
<a href="#l27.45"></a><span id="l27.45" class="difflineminus">-            cal.showError(cal.calGetString(&quot;calendar&quot;, &quot;noItemsInCalendarFile&quot;, [filePath]), window);</span>
<a href="#l27.46"></a><span id="l27.46" class="difflineplus">+            cal.showError(cal.l10n.getCalString(&quot;noItemsInCalendarFile&quot;, [filePath]), window);</span>
<a href="#l27.47"></a><span id="l27.47">             return;</span>
<a href="#l27.48"></a><span id="l27.48">         }</span>
<a href="#l27.49"></a><span id="l27.49"> </span>
<a href="#l27.50"></a><span id="l27.50">         if (aCalendar) {</span>
<a href="#l27.51"></a><span id="l27.51">             putItemsIntoCal(aCalendar, items);</span>
<a href="#l27.52"></a><span id="l27.52">             return;</span>
<a href="#l27.53"></a><span id="l27.53">         }</span>
<a href="#l27.54"></a><span id="l27.54"> </span>
<a href="#l27.55"></a><span id="l27.55" class="difflineat">@@ -117,17 +117,17 @@ function loadEventsFromFile(aCalendar) {</span>
<a href="#l27.56"></a><span id="l27.56">             // There's only one calendar, so it's silly to ask what calendar</span>
<a href="#l27.57"></a><span id="l27.57">             // the user wants to import into.</span>
<a href="#l27.58"></a><span id="l27.58">             putItemsIntoCal(calendars[0], items, filePath);</span>
<a href="#l27.59"></a><span id="l27.59">         } else if (calendars.length &gt; 1) {</span>
<a href="#l27.60"></a><span id="l27.60">             // Ask what calendar to import into</span>
<a href="#l27.61"></a><span id="l27.61">             let args = {};</span>
<a href="#l27.62"></a><span id="l27.62">             args.onOk = (aCal) =&gt; { putItemsIntoCal(aCal, items, filePath); };</span>
<a href="#l27.63"></a><span id="l27.63">             args.calendars = calendars;</span>
<a href="#l27.64"></a><span id="l27.64" class="difflineminus">-            args.promptText = cal.calGetString(&quot;calendar&quot;, &quot;importPrompt&quot;);</span>
<a href="#l27.65"></a><span id="l27.65" class="difflineplus">+            args.promptText = cal.l10n.getCalString(&quot;importPrompt&quot;);</span>
<a href="#l27.66"></a><span id="l27.66">             openDialog(&quot;chrome://calendar/content/chooseCalendarDialog.xul&quot;,</span>
<a href="#l27.67"></a><span id="l27.67">                        &quot;_blank&quot;, &quot;chrome,titlebar,modal,resizable&quot;, args);</span>
<a href="#l27.68"></a><span id="l27.68">         }</span>
<a href="#l27.69"></a><span id="l27.69">     });</span>
<a href="#l27.70"></a><span id="l27.70"> }</span>
<a href="#l27.71"></a><span id="l27.71"> </span>
<a href="#l27.72"></a><span id="l27.72"> /**</span>
<a href="#l27.73"></a><span id="l27.73">  * Put items into a certain calendar, catching errors and showing them to the</span>
<a href="#l27.74"></a><span id="l27.74" class="difflineat">@@ -168,19 +168,26 @@ function putItemsIntoCal(destCal, aItems</span>
<a href="#l27.75"></a><span id="l27.75">                     failedCount++;</span>
<a href="#l27.76"></a><span id="l27.76">                     lastError = aStatus;</span>
<a href="#l27.77"></a><span id="l27.77">                 }</span>
<a href="#l27.78"></a><span id="l27.78">             }</span>
<a href="#l27.79"></a><span id="l27.79">             // See if it is time to end the calendar's batch.</span>
<a href="#l27.80"></a><span id="l27.80">             if (count == aItems.length) {</span>
<a href="#l27.81"></a><span id="l27.81">                 destCal.endBatch();</span>
<a href="#l27.82"></a><span id="l27.82">                 if (!failedCount &amp;&amp; duplicateCount) {</span>
<a href="#l27.83"></a><span id="l27.83" class="difflineminus">-                    cal.showError(cal.calGetString(&quot;calendar&quot;, &quot;duplicateError&quot;, [duplicateCount, aFilePath]), window);</span>
<a href="#l27.84"></a><span id="l27.84" class="difflineplus">+                    cal.showError(</span>
<a href="#l27.85"></a><span id="l27.85" class="difflineplus">+                        cal.l10n.getCalString(&quot;duplicateError&quot;, [duplicateCount, aFilePath]),</span>
<a href="#l27.86"></a><span id="l27.86" class="difflineplus">+                        window</span>
<a href="#l27.87"></a><span id="l27.87" class="difflineplus">+                    );</span>
<a href="#l27.88"></a><span id="l27.88">                 } else if (failedCount) {</span>
<a href="#l27.89"></a><span id="l27.89" class="difflineminus">-                    cal.showError(cal.calGetString(&quot;calendar&quot;, &quot;importItemsFailed&quot;, [failedCount, lastError.toString()]), window);</span>
<a href="#l27.90"></a><span id="l27.90" class="difflineplus">+                    cal.showError(</span>
<a href="#l27.91"></a><span id="l27.91" class="difflineplus">+                        cal.l10n.getCalString(&quot;importItemsFailed&quot;,</span>
<a href="#l27.92"></a><span id="l27.92" class="difflineplus">+                                              [failedCount, lastError.toString()]),</span>
<a href="#l27.93"></a><span id="l27.93" class="difflineplus">+                        window</span>
<a href="#l27.94"></a><span id="l27.94" class="difflineplus">+                    );</span>
<a href="#l27.95"></a><span id="l27.95">                 }</span>
<a href="#l27.96"></a><span id="l27.96">             }</span>
<a href="#l27.97"></a><span id="l27.97">         }</span>
<a href="#l27.98"></a><span id="l27.98">     };</span>
<a href="#l27.99"></a><span id="l27.99"> </span>
<a href="#l27.100"></a><span id="l27.100">     for (let item of aItems) {</span>
<a href="#l27.101"></a><span id="l27.101">         // XXX prompt when finding a duplicate.</span>
<a href="#l27.102"></a><span id="l27.102">         try {</span>
<a href="#l27.103"></a><span id="l27.103" class="difflineat">@@ -214,25 +221,25 @@ function saveEventsToFile(calendarEventA</span>
<a href="#l27.104"></a><span id="l27.104"> </span>
<a href="#l27.105"></a><span id="l27.105">     // Show the 'Save As' dialog and ask for a filename to save to</span>
<a href="#l27.106"></a><span id="l27.106">     const nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l27.107"></a><span id="l27.107"> </span>
<a href="#l27.108"></a><span id="l27.108">     let picker = Components.classes[&quot;@mozilla.org/filepicker;1&quot;]</span>
<a href="#l27.109"></a><span id="l27.109">                        .createInstance(nsIFilePicker);</span>
<a href="#l27.110"></a><span id="l27.110"> </span>
<a href="#l27.111"></a><span id="l27.111">     picker.init(window,</span>
<a href="#l27.112"></a><span id="l27.112" class="difflineminus">-                cal.calGetString(&quot;calendar&quot;, &quot;filepickerTitleExport&quot;),</span>
<a href="#l27.113"></a><span id="l27.113" class="difflineplus">+                cal.l10n.getCalString(&quot;filepickerTitleExport&quot;),</span>
<a href="#l27.114"></a><span id="l27.114">                 nsIFilePicker.modeSave);</span>
<a href="#l27.115"></a><span id="l27.115"> </span>
<a href="#l27.116"></a><span id="l27.116">     if (aDefaultFileName &amp;&amp; aDefaultFileName.length &amp;&amp; aDefaultFileName.length &gt; 0) {</span>
<a href="#l27.117"></a><span id="l27.117">         picker.defaultString = aDefaultFileName;</span>
<a href="#l27.118"></a><span id="l27.118">     } else if (calendarEventArray.length == 1 &amp;&amp; calendarEventArray[0].title) {</span>
<a href="#l27.119"></a><span id="l27.119">         picker.defaultString = calendarEventArray[0].title;</span>
<a href="#l27.120"></a><span id="l27.120">     } else {</span>
<a href="#l27.121"></a><span id="l27.121" class="difflineminus">-        picker.defaultString = cal.calGetString(&quot;calendar&quot;, &quot;defaultFileName&quot;);</span>
<a href="#l27.122"></a><span id="l27.122" class="difflineplus">+        picker.defaultString = cal.l10n.getCalString(&quot;defaultFileName&quot;);</span>
<a href="#l27.123"></a><span id="l27.123">     }</span>
<a href="#l27.124"></a><span id="l27.124"> </span>
<a href="#l27.125"></a><span id="l27.125">     picker.defaultExtension = &quot;ics&quot;;</span>
<a href="#l27.126"></a><span id="l27.126"> </span>
<a href="#l27.127"></a><span id="l27.127">     // Get a list of exporters</span>
<a href="#l27.128"></a><span id="l27.128">     let contractids = [];</span>
<a href="#l27.129"></a><span id="l27.129">     let catman = Components.classes[&quot;@mozilla.org/categorymanager;1&quot;]</span>
<a href="#l27.130"></a><span id="l27.130">                            .getService(Components.interfaces.nsICategoryManager);</span>
<a href="#l27.131"></a><span id="l27.131" class="difflineat">@@ -302,17 +309,17 @@ function saveEventsToFile(calendarEventA</span>
<a href="#l27.132"></a><span id="l27.132">             // XXX Do the right thing with unicode and stuff. Or, again, should the</span>
<a href="#l27.133"></a><span id="l27.133">             //     exporter handle that?</span>
<a href="#l27.134"></a><span id="l27.134">             exporter.exportToStream(outputStream,</span>
<a href="#l27.135"></a><span id="l27.135">                                     calendarEventArray.length,</span>
<a href="#l27.136"></a><span id="l27.136">                                     calendarEventArray,</span>
<a href="#l27.137"></a><span id="l27.137">                                     null);</span>
<a href="#l27.138"></a><span id="l27.138">             outputStream.close();</span>
<a href="#l27.139"></a><span id="l27.139">         } catch (ex) {</span>
<a href="#l27.140"></a><span id="l27.140" class="difflineminus">-            cal.showError(cal.calGetString(&quot;calendar&quot;, &quot;unableToWrite&quot;) + filePath, window);</span>
<a href="#l27.141"></a><span id="l27.141" class="difflineplus">+            cal.showError(cal.l10n.getCalString(&quot;unableToWrite&quot;) + filePath, window);</span>
<a href="#l27.142"></a><span id="l27.142">         }</span>
<a href="#l27.143"></a><span id="l27.143">     });</span>
<a href="#l27.144"></a><span id="l27.144"> }</span>
<a href="#l27.145"></a><span id="l27.145"> </span>
<a href="#l27.146"></a><span id="l27.146"> /**</span>
<a href="#l27.147"></a><span id="l27.147">  * Exports all the events and tasks in a calendar.  If aCalendar is not specified,</span>
<a href="#l27.148"></a><span id="l27.148">  * the user will be prompted with a list of calendars to choose which one to export.</span>
<a href="#l27.149"></a><span id="l27.149">  *</span>
<a href="#l27.150"></a><span id="l27.150" class="difflineat">@@ -346,14 +353,14 @@ function exportEntireCalendar(aCalendar)</span>
<a href="#l27.151"></a><span id="l27.151">         if (count.value == 1) {</span>
<a href="#l27.152"></a><span id="l27.152">             // There's only one calendar, so it's silly to ask what calendar</span>
<a href="#l27.153"></a><span id="l27.153">             // the user wants to import into.</span>
<a href="#l27.154"></a><span id="l27.154">             getItemsFromCal(calendars[0]);</span>
<a href="#l27.155"></a><span id="l27.155">         } else {</span>
<a href="#l27.156"></a><span id="l27.156">             // Ask what calendar to import into</span>
<a href="#l27.157"></a><span id="l27.157">             let args = {};</span>
<a href="#l27.158"></a><span id="l27.158">             args.onOk = getItemsFromCal;</span>
<a href="#l27.159"></a><span id="l27.159" class="difflineminus">-            args.promptText = cal.calGetString(&quot;calendar&quot;, &quot;exportPrompt&quot;);</span>
<a href="#l27.160"></a><span id="l27.160" class="difflineplus">+            args.promptText = cal.l10n.getCalString(&quot;exportPrompt&quot;);</span>
<a href="#l27.161"></a><span id="l27.161">             openDialog(&quot;chrome://calendar/content/chooseCalendarDialog.xul&quot;,</span>
<a href="#l27.162"></a><span id="l27.162">                        &quot;_blank&quot;, &quot;chrome,titlebar,modal,resizable&quot;, args);</span>
<a href="#l27.163"></a><span id="l27.163">         }</span>
<a href="#l27.164"></a><span id="l27.164">     }</span>
<a href="#l27.165"></a><span id="l27.165"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/calendar/base/content/today-pane.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/calendar/base/content/today-pane.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -21,19 +21,19 @@ var TodayPane = {</span>
<a href="#l28.4"></a><span id="l28.4">         session: false</span>
<a href="#l28.5"></a><span id="l28.5">     },</span>
<a href="#l28.6"></a><span id="l28.6"> </span>
<a href="#l28.7"></a><span id="l28.7">     /**</span>
<a href="#l28.8"></a><span id="l28.8">      * Load Handler, sets up the today pane controls.</span>
<a href="#l28.9"></a><span id="l28.9">      */</span>
<a href="#l28.10"></a><span id="l28.10">     onLoad: function() {</span>
<a href="#l28.11"></a><span id="l28.11">         TodayPane.paneViews = [</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-            cal.calGetString(&quot;calendar&quot;, &quot;eventsandtasks&quot;),</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineminus">-            cal.calGetString(&quot;calendar&quot;, &quot;tasksonly&quot;),</span>
<a href="#l28.14"></a><span id="l28.14" class="difflineminus">-            cal.calGetString(&quot;calendar&quot;, &quot;eventsonly&quot;)</span>
<a href="#l28.15"></a><span id="l28.15" class="difflineplus">+            cal.l10n.getCalString(&quot;eventsandtasks&quot;),</span>
<a href="#l28.16"></a><span id="l28.16" class="difflineplus">+            cal.l10n.getCalString(&quot;tasksonly&quot;),</span>
<a href="#l28.17"></a><span id="l28.17" class="difflineplus">+            cal.l10n.getCalString(&quot;eventsonly&quot;)</span>
<a href="#l28.18"></a><span id="l28.18">         ];</span>
<a href="#l28.19"></a><span id="l28.19">         agendaListbox.setupCalendar();</span>
<a href="#l28.20"></a><span id="l28.20">         TodayPane.initializeMiniday();</span>
<a href="#l28.21"></a><span id="l28.21">         TodayPane.setShortWeekdays();</span>
<a href="#l28.22"></a><span id="l28.22"> </span>
<a href="#l28.23"></a><span id="l28.23">         document.getElementById(&quot;modeBroadcaster&quot;).addEventListener(&quot;DOMAttrModified&quot;, TodayPane.onModeModified);</span>
<a href="#l28.24"></a><span id="l28.24">         TodayPane.setTodayHeader();</span>
<a href="#l28.25"></a><span id="l28.25"> </span>
<a href="#l28.26"></a><span id="l28.26" class="difflineat">@@ -274,17 +274,17 @@ var TodayPane = {</span>
<a href="#l28.27"></a><span id="l28.27">      * @param aMonthLabel       The XUL node to set the month label on.</span>
<a href="#l28.28"></a><span id="l28.28">      * @param aIndex            The month number, 0-based.</span>
<a href="#l28.29"></a><span id="l28.29">      * @param aYear             The year this month should be displayed with</span>
<a href="#l28.30"></a><span id="l28.30">      * @param aCalWeek          The calendar week that should be shown.</span>
<a href="#l28.31"></a><span id="l28.31">      * @return                  The value set on aMonthLabel.</span>
<a href="#l28.32"></a><span id="l28.32">      */</span>
<a href="#l28.33"></a><span id="l28.33">     setMonthDescription: function(aMonthLabel, aIndex, aYear, aCalWeek) {</span>
<a href="#l28.34"></a><span id="l28.34">         if (this.cwlabel == null) {</span>
<a href="#l28.35"></a><span id="l28.35" class="difflineminus">-            this.cwlabel = cal.calGetString(&quot;calendar&quot;, &quot;shortcalendarweek&quot;);</span>
<a href="#l28.36"></a><span id="l28.36" class="difflineplus">+            this.cwlabel = cal.l10n.getCalString(&quot;shortcalendarweek&quot;);</span>
<a href="#l28.37"></a><span id="l28.37">         }</span>
<a href="#l28.38"></a><span id="l28.38">         document.getElementById(&quot;currentWeek-label&quot;).value = this.cwlabel + &quot; &quot; + aCalWeek;</span>
<a href="#l28.39"></a><span id="l28.39">         aMonthLabel.value = cal.getDateFormatter().shortMonthName(aIndex) + &quot; &quot; + aYear;</span>
<a href="#l28.40"></a><span id="l28.40">         return aMonthLabel.value;</span>
<a href="#l28.41"></a><span id="l28.41">     },</span>
<a href="#l28.42"></a><span id="l28.42"> </span>
<a href="#l28.43"></a><span id="l28.43">     /**</span>
<a href="#l28.44"></a><span id="l28.44">      * Cycle the view shown in the today pane (event+task, event, task).</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/calendar/base/content/widgets/calendar-alarm-widget.xml</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/calendar/base/content/widgets/calendar-alarm-widget.xml</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -87,19 +87,20 @@</span>
<a href="#l29.4"></a><span id="l29.4">             // Dates</span>
<a href="#l29.5"></a><span id="l29.5">             if (cal.item.isEvent(this.mItem)) {</span>
<a href="#l29.6"></a><span id="l29.6">                 dateLabel.textContent = formatter.formatItemInterval(this.mItem);</span>
<a href="#l29.7"></a><span id="l29.7">             } else if (cal.item.isToDo(this.mItem)) {</span>
<a href="#l29.8"></a><span id="l29.8">                 let startDate = this.mItem.entryDate || this.mItem.dueDate;</span>
<a href="#l29.9"></a><span id="l29.9">                 if (startDate) {</span>
<a href="#l29.10"></a><span id="l29.10">                     // A Task with a start or due date, show with label</span>
<a href="#l29.11"></a><span id="l29.11">                     startDate = startDate.getInTimezone(cal.dtz.defaultTimezone);</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-                    dateLabel.textContent = cal.calGetString(&quot;calendar&quot;,</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineminus">-                                                             &quot;alarmStarts&quot;,</span>
<a href="#l29.14"></a><span id="l29.14" class="difflineminus">-                                                             [formatter.formatDateTime(startDate)]);</span>
<a href="#l29.15"></a><span id="l29.15" class="difflineplus">+                    dateLabel.textContent = cal.l10n.getCalString(</span>
<a href="#l29.16"></a><span id="l29.16" class="difflineplus">+                        &quot;alarmStarts&quot;,</span>
<a href="#l29.17"></a><span id="l29.17" class="difflineplus">+                        [formatter.formatDateTime(startDate)]</span>
<a href="#l29.18"></a><span id="l29.18" class="difflineplus">+                    );</span>
<a href="#l29.19"></a><span id="l29.19">                 } else {</span>
<a href="#l29.20"></a><span id="l29.20">                     // If the task has no start date, then format the alarm date.</span>
<a href="#l29.21"></a><span id="l29.21">                     dateLabel.textContent = formatter.formatDateTime(this.mAlarm.alarmDate);</span>
<a href="#l29.22"></a><span id="l29.22">                 }</span>
<a href="#l29.23"></a><span id="l29.23">             } else {</span>
<a href="#l29.24"></a><span id="l29.24">                 throw Components.results.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l29.25"></a><span id="l29.25">             }</span>
<a href="#l29.26"></a><span id="l29.26"> </span>
<a href="#l29.27"></a><span id="l29.27" class="difflineat">@@ -148,29 +149,32 @@</span>
<a href="#l29.28"></a><span id="l29.28">                 currentDate.second = 0;</span>
<a href="#l29.29"></a><span id="l29.29">                 startDate.second = 0;</span>
<a href="#l29.30"></a><span id="l29.30"> </span>
<a href="#l29.31"></a><span id="l29.31">                 let sinceAlarm = currentDate.subtractDate(startDate).inSeconds;</span>
<a href="#l29.32"></a><span id="l29.32">                 this.mAlarmToday = (sinceAlarm &lt; sinceDayStart) &amp;&amp; (sinceAlarm &gt; sinceDayStart - 86400);</span>
<a href="#l29.33"></a><span id="l29.33"> </span>
<a href="#l29.34"></a><span id="l29.34">                 if (this.mAlarmToday) {</span>
<a href="#l29.35"></a><span id="l29.35">                     // The alarm is today</span>
<a href="#l29.36"></a><span id="l29.36" class="difflineminus">-                    relativeDateString = cal.calGetString(&quot;calendar&quot;,</span>
<a href="#l29.37"></a><span id="l29.37" class="difflineminus">-                                                          &quot;alarmTodayAt&quot;,</span>
<a href="#l29.38"></a><span id="l29.38" class="difflineminus">-                                                          [formatter.formatTime(startDate)]);</span>
<a href="#l29.39"></a><span id="l29.39" class="difflineplus">+                    relativeDateString = cal.l10n.getCalString(</span>
<a href="#l29.40"></a><span id="l29.40" class="difflineplus">+                        &quot;alarmTodayAt&quot;,</span>
<a href="#l29.41"></a><span id="l29.41" class="difflineplus">+                        [formatter.formatTime(startDate)]</span>
<a href="#l29.42"></a><span id="l29.42" class="difflineplus">+                    );</span>
<a href="#l29.43"></a><span id="l29.43">                 } else if (sinceAlarm &lt;= sinceDayStart - 86400 &amp;&amp; sinceAlarm &gt; sinceDayStart - 172800) {</span>
<a href="#l29.44"></a><span id="l29.44">                     // The alarm is tomorrow</span>
<a href="#l29.45"></a><span id="l29.45" class="difflineminus">-                    relativeDateString = cal.calGetString(&quot;calendar&quot;,</span>
<a href="#l29.46"></a><span id="l29.46" class="difflineminus">-                                                          &quot;alarmTomorrowAt&quot;,</span>
<a href="#l29.47"></a><span id="l29.47" class="difflineminus">-                                                          [formatter.formatTime(startDate)]);</span>
<a href="#l29.48"></a><span id="l29.48" class="difflineplus">+                    relativeDateString = cal.l10n.getCalString(</span>
<a href="#l29.49"></a><span id="l29.49" class="difflineplus">+                        &quot;alarmTomorrowAt&quot;,</span>
<a href="#l29.50"></a><span id="l29.50" class="difflineplus">+                        [formatter.formatTime(startDate)]</span>
<a href="#l29.51"></a><span id="l29.51" class="difflineplus">+                    );</span>
<a href="#l29.52"></a><span id="l29.52">                 } else if (sinceAlarm &lt; sinceDayStart + 86400 &amp;&amp; sinceAlarm &gt; sinceDayStart) {</span>
<a href="#l29.53"></a><span id="l29.53">                     // The alarm is yesterday</span>
<a href="#l29.54"></a><span id="l29.54" class="difflineminus">-                    relativeDateString = cal.calGetString(&quot;calendar&quot;,</span>
<a href="#l29.55"></a><span id="l29.55" class="difflineminus">-                                                          &quot;alarmYesterdayAt&quot;,</span>
<a href="#l29.56"></a><span id="l29.56" class="difflineminus">-                                                          [formatter.formatTime(startDate)]);</span>
<a href="#l29.57"></a><span id="l29.57" class="difflineplus">+                    relativeDateString = cal.l10n.getCalString(</span>
<a href="#l29.58"></a><span id="l29.58" class="difflineplus">+                        &quot;alarmYesterdayAt&quot;,</span>
<a href="#l29.59"></a><span id="l29.59" class="difflineplus">+                        [formatter.formatTime(startDate)]</span>
<a href="#l29.60"></a><span id="l29.60" class="difflineplus">+                    );</span>
<a href="#l29.61"></a><span id="l29.61">                 } else {</span>
<a href="#l29.62"></a><span id="l29.62">                     // The alarm is way back</span>
<a href="#l29.63"></a><span id="l29.63">                     relativeDateString = [formatter.formatDateTime(startDate)];</span>
<a href="#l29.64"></a><span id="l29.64">                 }</span>
<a href="#l29.65"></a><span id="l29.65">             } else {</span>
<a href="#l29.66"></a><span id="l29.66">                 // No start or end date, therefore the alarm must be absolute and</span>
<a href="#l29.67"></a><span id="l29.67">                 // have an alarm date.</span>
<a href="#l29.68"></a><span id="l29.68">                 relativeDateString = [formatter.formatDateTime(this.mAlarm.alarmDate)];</span>
<a href="#l29.69"></a><span id="l29.69" class="difflineat">@@ -342,28 +346,28 @@</span>
<a href="#l29.70"></a><span id="l29.70">             let unitPopup = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;snooze-unit-menupopup&quot;);</span>
<a href="#l29.71"></a><span id="l29.71">             let unitValue = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;snooze-value-textbox&quot;);</span>
<a href="#l29.72"></a><span id="l29.72">             let okButton = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;snooze-popup-ok&quot;);</span>
<a href="#l29.73"></a><span id="l29.73"> </span>
<a href="#l29.74"></a><span id="l29.74">             function unitName(list) {</span>
<a href="#l29.75"></a><span id="l29.75">                 return { 1: &quot;unitMinutes&quot;, 60: &quot;unitHours&quot;, 1440: &quot;unitDays&quot; }[list.value] || &quot;unitMinutes&quot;;</span>
<a href="#l29.76"></a><span id="l29.76">             }</span>
<a href="#l29.77"></a><span id="l29.77"> </span>
<a href="#l29.78"></a><span id="l29.78" class="difflineminus">-            let pluralString = cal.calGetString(&quot;calendar&quot;, unitName(unitList));</span>
<a href="#l29.79"></a><span id="l29.79" class="difflineplus">+            let pluralString = cal.l10n.getCalString(unitName(unitList));</span>
<a href="#l29.80"></a><span id="l29.80">             let unitPlural = PluralForm.get(unitValue.value, pluralString)</span>
<a href="#l29.81"></a><span id="l29.81">                                        .replace(&quot;#1&quot;, unitValue.value);</span>
<a href="#l29.82"></a><span id="l29.82"> </span>
<a href="#l29.83"></a><span id="l29.83">             let accessibleString = cal.calGetString(&quot;calendar-alarms&quot;,</span>
<a href="#l29.84"></a><span id="l29.84">                                                     &quot;reminderSnoozeOkA11y&quot;,</span>
<a href="#l29.85"></a><span id="l29.85">                                                     [unitPlural]);</span>
<a href="#l29.86"></a><span id="l29.86">             okButton.setAttribute(&quot;aria-label&quot;, accessibleString);</span>
<a href="#l29.87"></a><span id="l29.87"> </span>
<a href="#l29.88"></a><span id="l29.88">             let items = unitPopup.getElementsByTagName(&quot;xul:menuitem&quot;);</span>
<a href="#l29.89"></a><span id="l29.89">             for (let menuItem of items) {</span>
<a href="#l29.90"></a><span id="l29.90" class="difflineminus">-                pluralString = cal.calGetString(&quot;calendar&quot;, unitName(menuItem));</span>
<a href="#l29.91"></a><span id="l29.91" class="difflineplus">+                pluralString = cal.l10n.getCalString(unitName(menuItem));</span>
<a href="#l29.92"></a><span id="l29.92">                 menuItem.label = PluralForm.get(unitValue.value, pluralString)</span>
<a href="#l29.93"></a><span id="l29.93">                                            .replace(&quot;#1&quot;, &quot;&quot;).trim();</span>
<a href="#l29.94"></a><span id="l29.94">             }</span>
<a href="#l29.95"></a><span id="l29.95">         ]]&gt;&lt;/body&gt;</span>
<a href="#l29.96"></a><span id="l29.96">       &lt;/method&gt;</span>
<a href="#l29.97"></a><span id="l29.97">     &lt;/implementation&gt;</span>
<a href="#l29.98"></a><span id="l29.98">   &lt;/binding&gt;</span>
<a href="#l29.99"></a><span id="l29.99"> &lt;/bindings&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/calendar/base/content/widgets/minimonth.xml</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/calendar/base/content/widgets/minimonth.xml</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -868,33 +868,35 @@</span>
<a href="#l30.4"></a><span id="l30.4">             let today = new Date();</span>
<a href="#l30.5"></a><span id="l30.5"> </span>
<a href="#l30.6"></a><span id="l30.6">             if (aDate.getFullYear() == (this.mValue || this.mExtraDate).getFullYear()) {</span>
<a href="#l30.7"></a><span id="l30.7">                 calbox.setAttribute(&quot;aria-label&quot;, cal.calGetString(&quot;dateFormat&quot;,</span>
<a href="#l30.8"></a><span id="l30.8">                                     &quot;month.&quot; + (aDate.getMonth() + 1) + &quot;.name&quot;));</span>
<a href="#l30.9"></a><span id="l30.9">             } else {</span>
<a href="#l30.10"></a><span id="l30.10">                 let monthName = cal.l10n.formatMonth(aDate.getMonth() + 1,</span>
<a href="#l30.11"></a><span id="l30.11">                                                      &quot;calendar&quot;, &quot;monthInYear&quot;);</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-                let label = cal.calGetString(&quot;calendar&quot;, &quot;monthInYear&quot;,</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineminus">-                                         [monthName, aDate.getFullYear()]);</span>
<a href="#l30.14"></a><span id="l30.14" class="difflineplus">+                let label = cal.l10n.getCalString(</span>
<a href="#l30.15"></a><span id="l30.15" class="difflineplus">+                    &quot;monthInYear&quot;,</span>
<a href="#l30.16"></a><span id="l30.16" class="difflineplus">+                    [monthName, aDate.getFullYear()]</span>
<a href="#l30.17"></a><span id="l30.17" class="difflineplus">+                );</span>
<a href="#l30.18"></a><span id="l30.18">                 calbox.setAttribute(&quot;aria-label&quot;, label);</span>
<a href="#l30.19"></a><span id="l30.19">             }</span>
<a href="#l30.20"></a><span id="l30.20"> </span>
<a href="#l30.21"></a><span id="l30.21">             this.mDayMap = {};</span>
<a href="#l30.22"></a><span id="l30.22">             let defaultTz = cal.dtz.defaultTimezone;</span>
<a href="#l30.23"></a><span id="l30.23">             let dateFormatter =</span>
<a href="#l30.24"></a><span id="l30.24">                 new Services.intl.DateTimeFormat(undefined, { dateStyle: &quot;long&quot; });</span>
<a href="#l30.25"></a><span id="l30.25">             for (let k = 1; k &lt; 7; k++) {</span>
<a href="#l30.26"></a><span id="l30.26">                 // Set the week number.</span>
<a href="#l30.27"></a><span id="l30.27">                 let firstElement = this._getCalBoxNode(k, 0);</span>
<a href="#l30.28"></a><span id="l30.28">                 setBooleanAttribute(firstElement, &quot;hidden&quot;, !this.mShowWeekNumber);</span>
<a href="#l30.29"></a><span id="l30.29">                 if (this.mShowWeekNumber) {</span>
<a href="#l30.30"></a><span id="l30.30">                     let weekNumber = cal.getWeekInfoService()</span>
<a href="#l30.31"></a><span id="l30.31">                                         .getWeekTitle(cal.dtz.jsDateToDateTime(date, defaultTz));</span>
<a href="#l30.32"></a><span id="l30.32" class="difflineminus">-                    let weekTitle = cal.calGetString(&quot;calendar&quot;, &quot;WeekTitle&quot;, [weekNumber]);</span>
<a href="#l30.33"></a><span id="l30.33" class="difflineplus">+                    let weekTitle = cal.l10n.getCalString(&quot;WeekTitle&quot;, [weekNumber]);</span>
<a href="#l30.34"></a><span id="l30.34">                     firstElement.textContent = weekNumber;</span>
<a href="#l30.35"></a><span id="l30.35">                     firstElement.setAttribute(&quot;aria-label&quot;, weekTitle);</span>
<a href="#l30.36"></a><span id="l30.36">                 }</span>
<a href="#l30.37"></a><span id="l30.37"> </span>
<a href="#l30.38"></a><span id="l30.38">                 for (let i = 1; i &lt; 8; i++) {</span>
<a href="#l30.39"></a><span id="l30.39">                     let day = this._getCalBoxNode(k, i);</span>
<a href="#l30.40"></a><span id="l30.40">                     let ymd = date.getFullYear() + &quot;-&quot; +</span>
<a href="#l30.41"></a><span id="l30.41">                               date.getMonth() + &quot;-&quot; +</span>
<a href="#l30.42"></a><span id="l30.42" class="difflineat">@@ -1084,17 +1086,17 @@</span>
<a href="#l30.43"></a><span id="l30.43">       &lt;method name=&quot;updateAccessibleLabel&quot;&gt;</span>
<a href="#l30.44"></a><span id="l30.44">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l30.45"></a><span id="l30.45">             let label;</span>
<a href="#l30.46"></a><span id="l30.46">             if (this.mValue) {</span>
<a href="#l30.47"></a><span id="l30.47">                 let dateFormatter =</span>
<a href="#l30.48"></a><span id="l30.48">                     new Services.intl.DateTimeFormat(undefined, { dateStyle: &quot;long&quot; });</span>
<a href="#l30.49"></a><span id="l30.49">                 label = dateFormatter.format(this.mValue);</span>
<a href="#l30.50"></a><span id="l30.50">             } else {</span>
<a href="#l30.51"></a><span id="l30.51" class="difflineminus">-                label = cal.calGetString(&quot;calendar&quot;, &quot;minimonthNoSelectedDate&quot;);</span>
<a href="#l30.52"></a><span id="l30.52" class="difflineplus">+                label = cal.l10n.getCalString(&quot;minimonthNoSelectedDate&quot;);</span>
<a href="#l30.53"></a><span id="l30.53">             }</span>
<a href="#l30.54"></a><span id="l30.54">             this.setAttribute(&quot;aria-label&quot;, label);</span>
<a href="#l30.55"></a><span id="l30.55">         ]]&gt;&lt;/body&gt;</span>
<a href="#l30.56"></a><span id="l30.56">       &lt;/method&gt;</span>
<a href="#l30.57"></a><span id="l30.57"> </span>
<a href="#l30.58"></a><span id="l30.58">       &lt;method name=&quot;update&quot;&gt;</span>
<a href="#l30.59"></a><span id="l30.59">         &lt;parameter name=&quot;aValue&quot;/&gt;</span>
<a href="#l30.60"></a><span id="l30.60">         &lt;body&gt;&lt;![CDATA[</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/calendar/base/modules/calItipUtils.jsm</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/calendar/base/modules/calItipUtils.jsm</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -612,17 +612,17 @@ var calitip = {</span>
<a href="#l31.4"></a><span id="l31.4">                 // There's only one calendar, so it's silly to ask what calendar</span>
<a href="#l31.5"></a><span id="l31.5">                 // the user wants to import into.</span>
<a href="#l31.6"></a><span id="l31.6">                 targetCalendar = calendars[0];</span>
<a href="#l31.7"></a><span id="l31.7">             } else {</span>
<a href="#l31.8"></a><span id="l31.8">                 // Ask what calendar to import into</span>
<a href="#l31.9"></a><span id="l31.9">                 let args = {};</span>
<a href="#l31.10"></a><span id="l31.10">                 args.calendars = calendars;</span>
<a href="#l31.11"></a><span id="l31.11">                 args.onOk = (aCal) =&gt; { targetCalendar = aCal; };</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-                args.promptText = cal.calGetString(&quot;calendar&quot;, &quot;importPrompt&quot;);</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+                args.promptText = cal.l10n.getCalString(&quot;importPrompt&quot;);</span>
<a href="#l31.14"></a><span id="l31.14">                 aWindow.openDialog(&quot;chrome://calendar/content/chooseCalendarDialog.xul&quot;,</span>
<a href="#l31.15"></a><span id="l31.15">                                    &quot;_blank&quot;, &quot;chrome,titlebar,modal,resizable&quot;, args);</span>
<a href="#l31.16"></a><span id="l31.16">             }</span>
<a href="#l31.17"></a><span id="l31.17"> </span>
<a href="#l31.18"></a><span id="l31.18">             if (targetCalendar) {</span>
<a href="#l31.19"></a><span id="l31.19">                 aItipItem.targetCalendar = targetCalendar;</span>
<a href="#l31.20"></a><span id="l31.20">             }</span>
<a href="#l31.21"></a><span id="l31.21">         }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/calendar/base/modules/calPrintUtils.jsm</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/calendar/base/modules/calPrintUtils.jsm</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -132,17 +132,17 @@ cal.print = {</span>
<a href="#l32.4"></a><span id="l32.4">         let taskNode = document.getElementById(&quot;task-template&quot;).cloneNode(true);</span>
<a href="#l32.5"></a><span id="l32.5">         taskNode.removeAttribute(&quot;id&quot;);</span>
<a href="#l32.6"></a><span id="l32.6">         taskNode.item = item;</span>
<a href="#l32.7"></a><span id="l32.7"> </span>
<a href="#l32.8"></a><span id="l32.8">         let taskListBox = document.getElementById(&quot;tasks-list-box&quot;);</span>
<a href="#l32.9"></a><span id="l32.9">         if (taskListBox.hasAttribute(&quot;hidden&quot;)) {</span>
<a href="#l32.10"></a><span id="l32.10">             let tasksTitle = document.getElementById(&quot;tasks-title&quot;);</span>
<a href="#l32.11"></a><span id="l32.11">             taskListBox.removeAttribute(&quot;hidden&quot;);</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-            tasksTitle.textContent = cal.calGetString(&quot;calendar&quot;, &quot;tasksWithNoDueDate&quot;);</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+            tasksTitle.textContent = cal.l10n.getCalString(&quot;tasksWithNoDueDate&quot;);</span>
<a href="#l32.14"></a><span id="l32.14">         }</span>
<a href="#l32.15"></a><span id="l32.15"> </span>
<a href="#l32.16"></a><span id="l32.16">         // Fill in details of the task</span>
<a href="#l32.17"></a><span id="l32.17">         if (item.isCompleted) {</span>
<a href="#l32.18"></a><span id="l32.18">             taskNode.querySelector(&quot;.task-checkbox&quot;).setAttribute(&quot;checked&quot;, &quot;checked&quot;);</span>
<a href="#l32.19"></a><span id="l32.19">         }</span>
<a href="#l32.20"></a><span id="l32.20"> </span>
<a href="#l32.21"></a><span id="l32.21">         taskNode.querySelector(&quot;.task-title&quot;).textContent = item.title;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/calendar/base/modules/calUtils.jsm</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/calendar/base/modules/calUtils.jsm</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -98,17 +98,17 @@ var cal = {</span>
<a href="#l33.4"></a><span id="l33.4">     /**</span>
<a href="#l33.5"></a><span id="l33.5">      * Uses the prompt service to display an error message. Use this sparingly,</span>
<a href="#l33.6"></a><span id="l33.6">      * as it interrupts the user.</span>
<a href="#l33.7"></a><span id="l33.7">      *</span>
<a href="#l33.8"></a><span id="l33.8">      * @param aMsg The message to be shown</span>
<a href="#l33.9"></a><span id="l33.9">      * @param aWindow The window to show the message in, or null for any window.</span>
<a href="#l33.10"></a><span id="l33.10">      */</span>
<a href="#l33.11"></a><span id="l33.11">     showError: function(aMsg, aWindow=null) {</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-        Services.prompt.alert(aWindow, cal.calGetString(&quot;calendar&quot;, &quot;genericErrorTitle&quot;), aMsg);</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+        Services.prompt.alert(aWindow, cal.l10n.getCalString(&quot;genericErrorTitle&quot;), aMsg);</span>
<a href="#l33.14"></a><span id="l33.14">     },</span>
<a href="#l33.15"></a><span id="l33.15"> </span>
<a href="#l33.16"></a><span id="l33.16">     /**</span>
<a href="#l33.17"></a><span id="l33.17">      * Returns a string describing the current js-stack with filename and line</span>
<a href="#l33.18"></a><span id="l33.18">      * numbers.</span>
<a href="#l33.19"></a><span id="l33.19">      *</span>
<a href="#l33.20"></a><span id="l33.20">      * @param aDepth (optional) The number of frames to include. Defaults to 5.</span>
<a href="#l33.21"></a><span id="l33.21">      * @param aSkip  (optional) Number of frames to skip</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/calendar/base/src/calAlarm.js</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/calendar/base/src/calAlarm.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -436,28 +436,28 @@ calAlarm.prototype = {</span>
<a href="#l34.4"></a><span id="l34.4">             comp.addProperty(attachment.icalProperty);</span>
<a href="#l34.5"></a><span id="l34.5">         }</span>
<a href="#l34.6"></a><span id="l34.6"> </span>
<a href="#l34.7"></a><span id="l34.7">         // Set up summary (REQUIRED for EMAIL)</span>
<a href="#l34.8"></a><span id="l34.8">         if (this.summary || this.action == &quot;EMAIL&quot;) {</span>
<a href="#l34.9"></a><span id="l34.9">             let summaryProp = icssvc.createIcalProperty(&quot;SUMMARY&quot;);</span>
<a href="#l34.10"></a><span id="l34.10">             // Summary needs to have a non-empty value</span>
<a href="#l34.11"></a><span id="l34.11">             summaryProp.value = this.summary ||</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-                cal.calGetString(&quot;calendar&quot;, &quot;alarmDefaultSummary&quot;);</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+                cal.l10n.getCalString(&quot;alarmDefaultSummary&quot;);</span>
<a href="#l34.14"></a><span id="l34.14">             comp.addProperty(summaryProp);</span>
<a href="#l34.15"></a><span id="l34.15">         }</span>
<a href="#l34.16"></a><span id="l34.16"> </span>
<a href="#l34.17"></a><span id="l34.17">         // Set up the description (REQUIRED for DISPLAY and EMAIL)</span>
<a href="#l34.18"></a><span id="l34.18">         if (this.description ||</span>
<a href="#l34.19"></a><span id="l34.19">             this.action == &quot;DISPLAY&quot; ||</span>
<a href="#l34.20"></a><span id="l34.20">             this.action == &quot;EMAIL&quot;) {</span>
<a href="#l34.21"></a><span id="l34.21">             let descriptionProp = icssvc.createIcalProperty(&quot;DESCRIPTION&quot;);</span>
<a href="#l34.22"></a><span id="l34.22">             // description needs to have a non-empty value</span>
<a href="#l34.23"></a><span id="l34.23">             descriptionProp.value = this.description ||</span>
<a href="#l34.24"></a><span id="l34.24" class="difflineminus">-                cal.calGetString(&quot;calendar&quot;, &quot;alarmDefaultDescription&quot;);</span>
<a href="#l34.25"></a><span id="l34.25" class="difflineplus">+                cal.l10n.getCalString(&quot;alarmDefaultDescription&quot;);</span>
<a href="#l34.26"></a><span id="l34.26">             comp.addProperty(descriptionProp);</span>
<a href="#l34.27"></a><span id="l34.27">         }</span>
<a href="#l34.28"></a><span id="l34.28"> </span>
<a href="#l34.29"></a><span id="l34.29">         // Set up lastAck</span>
<a href="#l34.30"></a><span id="l34.30">         if (this.lastAck) {</span>
<a href="#l34.31"></a><span id="l34.31">             let lastAckProp = icssvc.createIcalProperty(&quot;X-MOZ-LASTACK&quot;);</span>
<a href="#l34.32"></a><span id="l34.32">             lastAckProp.value = this.lastAck;</span>
<a href="#l34.33"></a><span id="l34.33">             comp.addProperty(lastAckProp);</span>
<a href="#l34.34"></a><span id="l34.34" class="difflineat">@@ -656,17 +656,17 @@ calAlarm.prototype = {</span>
<a href="#l34.35"></a><span id="l34.35">                 unit = &quot;unitDays&quot;;</span>
<a href="#l34.36"></a><span id="l34.36">                 alarmlen /= 1440;</span>
<a href="#l34.37"></a><span id="l34.37">             } else if (alarmlen % 60 == 0) {</span>
<a href="#l34.38"></a><span id="l34.38">                 unit = &quot;unitHours&quot;;</span>
<a href="#l34.39"></a><span id="l34.39">                 alarmlen /= 60;</span>
<a href="#l34.40"></a><span id="l34.40">             } else {</span>
<a href="#l34.41"></a><span id="l34.41">                 unit = &quot;unitMinutes&quot;;</span>
<a href="#l34.42"></a><span id="l34.42">             }</span>
<a href="#l34.43"></a><span id="l34.43" class="difflineminus">-            let localeUnitString = cal.calGetString(&quot;calendar&quot;, unit);</span>
<a href="#l34.44"></a><span id="l34.44" class="difflineplus">+            let localeUnitString = cal.l10n.getCalString(unit);</span>
<a href="#l34.45"></a><span id="l34.45">             let unitString = PluralForm.get(alarmlen, localeUnitString)</span>
<a href="#l34.46"></a><span id="l34.46">                                        .replace(&quot;#1&quot;, alarmlen);</span>
<a href="#l34.47"></a><span id="l34.47">             let originStringName = &quot;reminderCustomOrigin&quot;;</span>
<a href="#l34.48"></a><span id="l34.48"> </span>
<a href="#l34.49"></a><span id="l34.49">             // Origin</span>
<a href="#l34.50"></a><span id="l34.50">             switch (this.related) {</span>
<a href="#l34.51"></a><span id="l34.51">                 case ALARM_RELATED_START:</span>
<a href="#l34.52"></a><span id="l34.52">                     originStringName += &quot;Begin&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/calendar/base/src/calCalendarManager.js</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/calendar/base/src/calCalendarManager.js</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -399,19 +399,19 @@ calCalendarManager.prototype = {</span>
<a href="#l35.4"></a><span id="l35.4">     // / DB migration code ends here</span>
<a href="#l35.5"></a><span id="l35.5">     //</span>
<a href="#l35.6"></a><span id="l35.6"> </span>
<a href="#l35.7"></a><span id="l35.7">     alertAndQuit: function() {</span>
<a href="#l35.8"></a><span id="l35.8">         // We want to include the extension name in the error message rather</span>
<a href="#l35.9"></a><span id="l35.9">         // than blaming Thunderbird.</span>
<a href="#l35.10"></a><span id="l35.10">         let hostAppName = cal.calGetString(&quot;brand&quot;, &quot;brandShortName&quot;, null, &quot;branding&quot;);</span>
<a href="#l35.11"></a><span id="l35.11">         let calAppName = cal.calGetString(&quot;lightning&quot;, &quot;brandShortName&quot;, null, &quot;lightning&quot;);</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-        let errorBoxTitle = cal.calGetString(&quot;calendar&quot;, &quot;tooNewSchemaErrorBoxTitle&quot;, [calAppName]);</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineminus">-        let errorBoxText = cal.calGetString(&quot;calendar&quot;, &quot;tooNewSchemaErrorBoxTextLightning&quot;, [calAppName, hostAppName]);</span>
<a href="#l35.14"></a><span id="l35.14" class="difflineminus">-        let errorBoxButtonLabel = cal.calGetString(&quot;calendar&quot;, &quot;tooNewSchemaButtonRestart&quot;, [hostAppName]);</span>
<a href="#l35.15"></a><span id="l35.15" class="difflineplus">+        let errorBoxTitle = cal.l10n.getCalString(&quot;tooNewSchemaErrorBoxTitle&quot;, [calAppName]);</span>
<a href="#l35.16"></a><span id="l35.16" class="difflineplus">+        let errorBoxText = cal.l10n.getCalString(&quot;tooNewSchemaErrorBoxTextLightning&quot;, [calAppName, hostAppName]);</span>
<a href="#l35.17"></a><span id="l35.17" class="difflineplus">+        let errorBoxButtonLabel = cal.l10n.getCalString(&quot;tooNewSchemaButtonRestart&quot;, [hostAppName]);</span>
<a href="#l35.18"></a><span id="l35.18"> </span>
<a href="#l35.19"></a><span id="l35.19">         let promptSvc = Services.prompt;</span>
<a href="#l35.20"></a><span id="l35.20"> </span>
<a href="#l35.21"></a><span id="l35.21">         let errorBoxButtonFlags = promptSvc.BUTTON_POS_0 *</span>
<a href="#l35.22"></a><span id="l35.22">                                   promptSvc.BUTTON_TITLE_IS_STRING +</span>
<a href="#l35.23"></a><span id="l35.23">                                   promptSvc.BUTTON_POS_0_DEFAULT;</span>
<a href="#l35.24"></a><span id="l35.24"> </span>
<a href="#l35.25"></a><span id="l35.25">         promptSvc.confirmEx(null,</span>
<a href="#l35.26"></a><span id="l35.26" class="difflineat">@@ -454,20 +454,20 @@ calCalendarManager.prototype = {</span>
<a href="#l35.27"></a><span id="l35.27">                 uiMessage = ex.message;</span>
<a href="#l35.28"></a><span id="l35.28">             }</span>
<a href="#l35.29"></a><span id="l35.29">             switch (rc) {</span>
<a href="#l35.30"></a><span id="l35.30">                 case Components.interfaces.calIErrors.STORAGE_UNKNOWN_SCHEMA_ERROR:</span>
<a href="#l35.31"></a><span id="l35.31">                     // For now we alert and quit on schema errors like we've done before:</span>
<a href="#l35.32"></a><span id="l35.32">                     this.alertAndQuit();</span>
<a href="#l35.33"></a><span id="l35.33">                     return null;</span>
<a href="#l35.34"></a><span id="l35.34">                 case Components.interfaces.calIErrors.STORAGE_UNKNOWN_TIMEZONES_ERROR:</span>
<a href="#l35.35"></a><span id="l35.35" class="difflineminus">-                    uiMessage = cal.calGetString(&quot;calendar&quot;, &quot;unknownTimezonesError&quot;, [uri.spec]);</span>
<a href="#l35.36"></a><span id="l35.36" class="difflineplus">+                    uiMessage = cal.l10n.getCalString(&quot;unknownTimezonesError&quot;, [uri.spec]);</span>
<a href="#l35.37"></a><span id="l35.37">                     break;</span>
<a href="#l35.38"></a><span id="l35.38">                 default:</span>
<a href="#l35.39"></a><span id="l35.39" class="difflineminus">-                    uiMessage = cal.calGetString(&quot;calendar&quot;, &quot;unableToCreateProvider&quot;, [uri.spec]);</span>
<a href="#l35.40"></a><span id="l35.40" class="difflineplus">+                    uiMessage = cal.l10n.getCalString(&quot;unableToCreateProvider&quot;, [uri.spec]);</span>
<a href="#l35.41"></a><span id="l35.41">                     break;</span>
<a href="#l35.42"></a><span id="l35.42">             }</span>
<a href="#l35.43"></a><span id="l35.43">             // Log the original exception via error console to provide more debug info</span>
<a href="#l35.44"></a><span id="l35.44">             cal.ERROR(ex);</span>
<a href="#l35.45"></a><span id="l35.45"> </span>
<a href="#l35.46"></a><span id="l35.46">             // Log the possibly translated message via the UI.</span>
<a href="#l35.47"></a><span id="l35.47">             let paramBlock = Components.classes[&quot;@mozilla.org/embedcomp/dialogparam;1&quot;]</span>
<a href="#l35.48"></a><span id="l35.48">                                        .createInstance(Components.interfaces.nsIDialogParamBlock);</span>
<a href="#l35.49"></a><span id="l35.49" class="difflineat">@@ -950,34 +950,34 @@ calMgrCalendarObserver.prototype = {</span>
<a href="#l35.50"></a><span id="l35.50">         switch (aErrNo) {</span>
<a href="#l35.51"></a><span id="l35.51">             case calIErrors.CAL_UTF8_DECODING_FAILED:</span>
<a href="#l35.52"></a><span id="l35.52">                 message = props.GetStringFromName(&quot;utf8DecodeError&quot;);</span>
<a href="#l35.53"></a><span id="l35.53">                 break;</span>
<a href="#l35.54"></a><span id="l35.54">             case calIErrors.ICS_MALFORMEDDATA:</span>
<a href="#l35.55"></a><span id="l35.55">                 message = props.GetStringFromName(&quot;icsMalformedError&quot;);</span>
<a href="#l35.56"></a><span id="l35.56">                 break;</span>
<a href="#l35.57"></a><span id="l35.57">             case calIErrors.MODIFICATION_FAILED:</span>
<a href="#l35.58"></a><span id="l35.58" class="difflineminus">-                errMsg = cal.calGetString(&quot;calendar&quot;, &quot;errorWriting2&quot;, [aCalendar.name]);</span>
<a href="#l35.59"></a><span id="l35.59" class="difflineminus">-                message = cal.calGetString(&quot;calendar&quot;, &quot;errorWritingDetails&quot;);</span>
<a href="#l35.60"></a><span id="l35.60" class="difflineplus">+                errMsg = cal.l10n.getCalString(&quot;errorWriting2&quot;, [aCalendar.name]);</span>
<a href="#l35.61"></a><span id="l35.61" class="difflineplus">+                message = cal.l10n.getCalString(&quot;errorWritingDetails&quot;);</span>
<a href="#l35.62"></a><span id="l35.62">                 if (aMessage) {</span>
<a href="#l35.63"></a><span id="l35.63">                     message = aMessage + &quot;\n&quot; + message;</span>
<a href="#l35.64"></a><span id="l35.64">                 }</span>
<a href="#l35.65"></a><span id="l35.65">                 break;</span>
<a href="#l35.66"></a><span id="l35.66">             default:</span>
<a href="#l35.67"></a><span id="l35.67">                 message = aMessage;</span>
<a href="#l35.68"></a><span id="l35.68">         }</span>
<a href="#l35.69"></a><span id="l35.69"> </span>
<a href="#l35.70"></a><span id="l35.70"> </span>
<a href="#l35.71"></a><span id="l35.71">         paramBlock.SetString(0, errMsg);</span>
<a href="#l35.72"></a><span id="l35.72">         paramBlock.SetString(1, errCode);</span>
<a href="#l35.73"></a><span id="l35.73">         paramBlock.SetString(2, message);</span>
<a href="#l35.74"></a><span id="l35.74"> </span>
<a href="#l35.75"></a><span id="l35.75">         this.storedReadOnly = this.calendar.readOnly;</span>
<a href="#l35.76"></a><span id="l35.76" class="difflineminus">-        let errorCode = cal.calGetString(&quot;calendar&quot;, &quot;errorCode&quot;, [errCode]);</span>
<a href="#l35.77"></a><span id="l35.77" class="difflineminus">-        let errorDescription = cal.calGetString(&quot;calendar&quot;, &quot;errorDescription&quot;, [message]);</span>
<a href="#l35.78"></a><span id="l35.78" class="difflineplus">+        let errorCode = cal.l10n.getCalString(&quot;errorCode&quot;, [errCode]);</span>
<a href="#l35.79"></a><span id="l35.79" class="difflineplus">+        let errorDescription = cal.l10n.getCalString(&quot;errorDescription&quot;, [message]);</span>
<a href="#l35.80"></a><span id="l35.80">         let summary = errMsg + &quot; &quot; + errorCode + &quot;. &quot; + errorDescription;</span>
<a href="#l35.81"></a><span id="l35.81"> </span>
<a href="#l35.82"></a><span id="l35.82">         // Log warnings in error console.</span>
<a href="#l35.83"></a><span id="l35.83">         // Report serious errors in both error console and in prompt window.</span>
<a href="#l35.84"></a><span id="l35.84">         if (aErrNo == calIErrors.MODIFICATION_FAILED) {</span>
<a href="#l35.85"></a><span id="l35.85">             Components.utils.reportError(summary);</span>
<a href="#l35.86"></a><span id="l35.86">             this.announceParamBlock(paramBlock);</span>
<a href="#l35.87"></a><span id="l35.87">         } else {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/calendar/base/src/calDateTimeFormatter.js</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/calendar/base/src/calDateTimeFormatter.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -95,25 +95,25 @@ calDateTimeFormatter.prototype = {</span>
<a href="#l36.4"></a><span id="l36.4">         // TODO should we check for the same day? The caller should know what</span>
<a href="#l36.5"></a><span id="l36.5">         // he is doing...</span>
<a href="#l36.6"></a><span id="l36.6">         return this.formatTime(aStartDate) + &quot;\u2013&quot; + this.formatTime(aEndDate);</span>
<a href="#l36.7"></a><span id="l36.7">     },</span>
<a href="#l36.8"></a><span id="l36.8"> </span>
<a href="#l36.9"></a><span id="l36.9">     formatInterval: function(aStartDate, aEndDate) {</span>
<a href="#l36.10"></a><span id="l36.10">         // Check for tasks without start and/or due date</span>
<a href="#l36.11"></a><span id="l36.11">         if (aEndDate == null &amp;&amp; aStartDate == null) {</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-            return cal.calGetString(&quot;calendar&quot;, &quot;datetimeIntervalTaskWithoutDate&quot;);</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+            return cal.l10n.getCalString(&quot;datetimeIntervalTaskWithoutDate&quot;);</span>
<a href="#l36.14"></a><span id="l36.14">         } else if (aEndDate == null) {</span>
<a href="#l36.15"></a><span id="l36.15">             let startDateString = this.formatDate(aStartDate);</span>
<a href="#l36.16"></a><span id="l36.16">             let startTime = this.formatTime(aStartDate);</span>
<a href="#l36.17"></a><span id="l36.17" class="difflineminus">-            return cal.calGetString(&quot;calendar&quot;, &quot;datetimeIntervalTaskWithoutDueDate&quot;, [startDateString, startTime]);</span>
<a href="#l36.18"></a><span id="l36.18" class="difflineplus">+            return cal.l10n.getCalString(&quot;datetimeIntervalTaskWithoutDueDate&quot;, [startDateString, startTime]);</span>
<a href="#l36.19"></a><span id="l36.19">         } else if (aStartDate == null) {</span>
<a href="#l36.20"></a><span id="l36.20">             let endDateString = this.formatDate(aEndDate);</span>
<a href="#l36.21"></a><span id="l36.21">             let endTime = this.formatTime(aEndDate);</span>
<a href="#l36.22"></a><span id="l36.22" class="difflineminus">-            return cal.calGetString(&quot;calendar&quot;, &quot;datetimeIntervalTaskWithoutStartDate&quot;, [endDateString, endTime]);</span>
<a href="#l36.23"></a><span id="l36.23" class="difflineplus">+            return cal.l10n.getCalString(&quot;datetimeIntervalTaskWithoutStartDate&quot;, [endDateString, endTime]);</span>
<a href="#l36.24"></a><span id="l36.24">         }</span>
<a href="#l36.25"></a><span id="l36.25">         // Here there are only events or tasks with both start and due date.</span>
<a href="#l36.26"></a><span id="l36.26">         // make sure start and end use the same timezone when formatting intervals:</span>
<a href="#l36.27"></a><span id="l36.27">         let endDate = aEndDate.getInTimezone(aStartDate.timezone);</span>
<a href="#l36.28"></a><span id="l36.28">         let testdate = aStartDate.clone();</span>
<a href="#l36.29"></a><span id="l36.29">         testdate.isDate = true;</span>
<a href="#l36.30"></a><span id="l36.30">         let sameDay = (testdate.compare(endDate) == 0);</span>
<a href="#l36.31"></a><span id="l36.31">         if (aStartDate.isDate) {</span>
<a href="#l36.32"></a><span id="l36.32" class="difflineat">@@ -125,51 +125,57 @@ calDateTimeFormatter.prototype = {</span>
<a href="#l36.33"></a><span id="l36.33">                 let startYear = aStartDate.year;</span>
<a href="#l36.34"></a><span id="l36.34">                 let endDay = this.formatDayWithOrdinal(endDate.day);</span>
<a href="#l36.35"></a><span id="l36.35">                 let endYear = endDate.year;</span>
<a href="#l36.36"></a><span id="l36.36">                 if (aStartDate.year != endDate.year) {</span>
<a href="#l36.37"></a><span id="l36.37">                     let startMonthName = cal.l10n.formatMonth(aStartDate.month + 1, &quot;calendar&quot;,</span>
<a href="#l36.38"></a><span id="l36.38">                                                               &quot;daysIntervalBetweenYears&quot;);</span>
<a href="#l36.39"></a><span id="l36.39">                     let endMonthName = cal.l10n.formatMonth(aEndDate.month + 1, &quot;calendar&quot;,</span>
<a href="#l36.40"></a><span id="l36.40">                                                             &quot;daysIntervalBetweenYears&quot;);</span>
<a href="#l36.41"></a><span id="l36.41" class="difflineminus">-                    return cal.calGetString(&quot;calendar&quot;, &quot;daysIntervalBetweenYears&quot;, [startMonthName, startDay, startYear, endMonthName, endDay, endYear]);</span>
<a href="#l36.42"></a><span id="l36.42" class="difflineplus">+                    return cal.l10n.getCalString(&quot;daysIntervalBetweenYears&quot;, [</span>
<a href="#l36.43"></a><span id="l36.43" class="difflineplus">+                        startMonthName, startDay, startYear, endMonthName, endDay, endYear</span>
<a href="#l36.44"></a><span id="l36.44" class="difflineplus">+                    ]);</span>
<a href="#l36.45"></a><span id="l36.45">                 } else if (aStartDate.month == endDate.month) {</span>
<a href="#l36.46"></a><span id="l36.46">                     let startMonthName = cal.l10n.formatMonth(aStartDate.month + 1, &quot;calendar&quot;,</span>
<a href="#l36.47"></a><span id="l36.47">                                                               &quot;daysIntervalInMonth&quot;);</span>
<a href="#l36.48"></a><span id="l36.48" class="difflineminus">-                    return cal.calGetString(&quot;calendar&quot;, &quot;daysIntervalInMonth&quot;, [startMonthName, startDay, endDay, endYear]);</span>
<a href="#l36.49"></a><span id="l36.49" class="difflineplus">+                    return cal.l10n.getCalString(&quot;daysIntervalInMonth&quot;, [</span>
<a href="#l36.50"></a><span id="l36.50" class="difflineplus">+                        startMonthName, startDay, endDay, endYear</span>
<a href="#l36.51"></a><span id="l36.51" class="difflineplus">+                    ]);</span>
<a href="#l36.52"></a><span id="l36.52">                 } else {</span>
<a href="#l36.53"></a><span id="l36.53">                     let startMonthName = cal.l10n.formatMonth(aStartDate.month + 1, &quot;calendar&quot;,</span>
<a href="#l36.54"></a><span id="l36.54">                                                               &quot;daysIntervalBetweenMonths&quot;);</span>
<a href="#l36.55"></a><span id="l36.55">                     let endMonthName = cal.l10n.formatMonth(aEndDate.month + 1, &quot;calendar&quot;,</span>
<a href="#l36.56"></a><span id="l36.56">                                                             &quot;daysIntervalBetweenMonths&quot;);</span>
<a href="#l36.57"></a><span id="l36.57" class="difflineminus">-                    return cal.calGetString(&quot;calendar&quot;, &quot;daysIntervalBetweenMonths&quot;, [startMonthName, startDay, endMonthName, endDay, endYear]);</span>
<a href="#l36.58"></a><span id="l36.58" class="difflineplus">+                    return cal.l10n.getCalString(&quot;daysIntervalBetweenMonths&quot;, [</span>
<a href="#l36.59"></a><span id="l36.59" class="difflineplus">+                        startMonthName, startDay, endMonthName, endDay, endYear</span>
<a href="#l36.60"></a><span id="l36.60" class="difflineplus">+                    ]);</span>
<a href="#l36.61"></a><span id="l36.61">                 }</span>
<a href="#l36.62"></a><span id="l36.62">             }</span>
<a href="#l36.63"></a><span id="l36.63">         } else {</span>
<a href="#l36.64"></a><span id="l36.64">             let startDateString = this.formatDate(aStartDate);</span>
<a href="#l36.65"></a><span id="l36.65">             let startTime = this.formatTime(aStartDate);</span>
<a href="#l36.66"></a><span id="l36.66">             let endDateString = this.formatDate(endDate);</span>
<a href="#l36.67"></a><span id="l36.67">             let endTime = this.formatTime(endDate);</span>
<a href="#l36.68"></a><span id="l36.68">             // non-allday, so need to return date and time</span>
<a href="#l36.69"></a><span id="l36.69">             if (sameDay) {</span>
<a href="#l36.70"></a><span id="l36.70">                 // End is on the same day as start, so we can leave out the end date</span>
<a href="#l36.71"></a><span id="l36.71">                 if (startTime == endTime) {</span>
<a href="#l36.72"></a><span id="l36.72">                     // End time is on the same time as start, so we can leave out the end time</span>
<a href="#l36.73"></a><span id="l36.73">                     // &quot;5 Jan 2006 13:00&quot;</span>
<a href="#l36.74"></a><span id="l36.74" class="difflineminus">-                    return cal.calGetString(&quot;calendar&quot;, &quot;datetimeIntervalOnSameDateTime&quot;, [startDateString, startTime]);</span>
<a href="#l36.75"></a><span id="l36.75" class="difflineplus">+                    return cal.l10n.getCalString(&quot;datetimeIntervalOnSameDateTime&quot;, [startDateString, startTime]);</span>
<a href="#l36.76"></a><span id="l36.76">                 } else {</span>
<a href="#l36.77"></a><span id="l36.77">                     // still include end time</span>
<a href="#l36.78"></a><span id="l36.78">                     // &quot;5 Jan 2006 13:00 - 17:00&quot;</span>
<a href="#l36.79"></a><span id="l36.79" class="difflineminus">-                    return cal.calGetString(&quot;calendar&quot;, &quot;datetimeIntervalOnSameDay&quot;, [startDateString, startTime, endTime]);</span>
<a href="#l36.80"></a><span id="l36.80" class="difflineplus">+                    return cal.l10n.getCalString(&quot;datetimeIntervalOnSameDay&quot;, [startDateString, startTime, endTime]);</span>
<a href="#l36.81"></a><span id="l36.81">                 }</span>
<a href="#l36.82"></a><span id="l36.82">             } else {</span>
<a href="#l36.83"></a><span id="l36.83">                 // Spanning multiple days, so need to include date and time</span>
<a href="#l36.84"></a><span id="l36.84">                 // for start and end</span>
<a href="#l36.85"></a><span id="l36.85">                 // &quot;5 Jan 2006 13:00 - 7 Jan 2006 9:00&quot;</span>
<a href="#l36.86"></a><span id="l36.86" class="difflineminus">-                return cal.calGetString(&quot;calendar&quot;, &quot;datetimeIntervalOnSeveralDays&quot;, [startDateString, startTime, endDateString, endTime]);</span>
<a href="#l36.87"></a><span id="l36.87" class="difflineplus">+                return cal.l10n.getCalString(&quot;datetimeIntervalOnSeveralDays&quot;, [startDateString, startTime, endDateString, endTime]);</span>
<a href="#l36.88"></a><span id="l36.88">             }</span>
<a href="#l36.89"></a><span id="l36.89">         }</span>
<a href="#l36.90"></a><span id="l36.90">     },</span>
<a href="#l36.91"></a><span id="l36.91"> </span>
<a href="#l36.92"></a><span id="l36.92">     formatDayWithOrdinal: function(aDay) {</span>
<a href="#l36.93"></a><span id="l36.93">         let ordinalSymbols = this.mDateStringBundle.GetStringFromName(&quot;dayOrdinalSymbol&quot;).split(&quot;,&quot;);</span>
<a href="#l36.94"></a><span id="l36.94">         let dayOrdinalSymbol = ordinalSymbols[aDay - 1] || ordinalSymbols[0];</span>
<a href="#l36.95"></a><span id="l36.95">         return aDay + dayOrdinalSymbol;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/calendar/base/src/calIcsParser.js</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/calendar/base/src/calIcsParser.js</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -97,18 +97,18 @@ calIcsParser.prototype = {</span>
<a href="#l37.4"></a><span id="l37.4">             }</span>
<a href="#l37.5"></a><span id="l37.5"> </span>
<a href="#l37.6"></a><span id="l37.6">             if (Object.keys(state.tzErrors).length &gt; 0) {</span>
<a href="#l37.7"></a><span id="l37.7">                 // Use an alert rather than a prompt because problems may appear in</span>
<a href="#l37.8"></a><span id="l37.8">                 // remote subscribed calendars the user cannot change.</span>
<a href="#l37.9"></a><span id="l37.9">                 if (Components.classes[&quot;@mozilla.org/alerts-service;1&quot;]) {</span>
<a href="#l37.10"></a><span id="l37.10">                     let notifier = Components.classes[&quot;@mozilla.org/alerts-service;1&quot;]</span>
<a href="#l37.11"></a><span id="l37.11">                                              .getService(Components.interfaces.nsIAlertsService);</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-                    let title = cal.calGetString(&quot;calendar&quot;, &quot;TimezoneErrorsAlertTitle&quot;);</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineminus">-                    let text = cal.calGetString(&quot;calendar&quot;, &quot;TimezoneErrorsSeeConsole&quot;);</span>
<a href="#l37.14"></a><span id="l37.14" class="difflineplus">+                    let title = cal.l10n.getCalString(&quot;TimezoneErrorsAlertTitle&quot;);</span>
<a href="#l37.15"></a><span id="l37.15" class="difflineplus">+                    let text = cal.l10n.getCalString(&quot;TimezoneErrorsSeeConsole&quot;);</span>
<a href="#l37.16"></a><span id="l37.16">                     try {</span>
<a href="#l37.17"></a><span id="l37.17">                         notifier.showAlertNotification(&quot;&quot;, title, text, false, null, null, title);</span>
<a href="#l37.18"></a><span id="l37.18">                     } catch (e) {</span>
<a href="#l37.19"></a><span id="l37.19">                         // The notifier may not be available, e.g. on xpcshell tests</span>
<a href="#l37.20"></a><span id="l37.20">                     }</span>
<a href="#l37.21"></a><span id="l37.21">                 }</span>
<a href="#l37.22"></a><span id="l37.22">             }</span>
<a href="#l37.23"></a><span id="l37.23"> </span>
<a href="#l37.24"></a><span id="l37.24" class="difflineat">@@ -262,17 +262,17 @@ parserState.prototype = {</span>
<a href="#l37.25"></a><span id="l37.25">             let hid = item.hashId + &quot;#&quot; + tzid;</span>
<a href="#l37.26"></a><span id="l37.26">             if (!(hid in this.tzErrors)) {</span>
<a href="#l37.27"></a><span id="l37.27">                 // For now, publish errors to console and alert user.</span>
<a href="#l37.28"></a><span id="l37.28">                 // In future, maybe make them available through an interface method</span>
<a href="#l37.29"></a><span id="l37.29">                 // so this UI code can be removed from the parser, and caller can</span>
<a href="#l37.30"></a><span id="l37.30">                 // choose whether to alert, or show user the problem items and ask</span>
<a href="#l37.31"></a><span id="l37.31">                 // for fixes, or something else.</span>
<a href="#l37.32"></a><span id="l37.32">                 let msgArgs = [tzid, item.title, cal.getDateFormatter().formatDateTime(date)];</span>
<a href="#l37.33"></a><span id="l37.33" class="difflineminus">-                let msg = cal.calGetString(&quot;calendar&quot;, &quot;unknownTimezoneInItem&quot;, msgArgs);</span>
<a href="#l37.34"></a><span id="l37.34" class="difflineplus">+                let msg = cal.l10n.getCalString(&quot;unknownTimezoneInItem&quot;, msgArgs);</span>
<a href="#l37.35"></a><span id="l37.35"> </span>
<a href="#l37.36"></a><span id="l37.36">                 cal.ERROR(msg + &quot;\n&quot; + item.icalString);</span>
<a href="#l37.37"></a><span id="l37.37">                 this.tzErrors[hid] = true;</span>
<a href="#l37.38"></a><span id="l37.38">             }</span>
<a href="#l37.39"></a><span id="l37.39">         }</span>
<a href="#l37.40"></a><span id="l37.40">     },</span>
<a href="#l37.41"></a><span id="l37.41"> </span>
<a href="#l37.42"></a><span id="l37.42">     /**</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/calendar/base/src/calTimezoneService.js</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/calendar/base/src/calTimezoneService.js</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -128,17 +128,17 @@ calTimezoneService.prototype = {</span>
<a href="#l38.4"></a><span id="l38.4">             this.UTC; // eslint-disable-line no-unused-expressions</span>
<a href="#l38.5"></a><span id="l38.5">             this.floating; // eslint-disable-line no-unused-expressions</span>
<a href="#l38.6"></a><span id="l38.6">         }).then(() =&gt; {</span>
<a href="#l38.7"></a><span id="l38.7">             if (aCompleteListener) {</span>
<a href="#l38.8"></a><span id="l38.8">                 aCompleteListener.onResult(null, Components.results.NS_OK);</span>
<a href="#l38.9"></a><span id="l38.9">             }</span>
<a href="#l38.10"></a><span id="l38.10">         }, (error) =&gt; {</span>
<a href="#l38.11"></a><span id="l38.11">             // We have to give up. Show an error and fail hard!</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-            let msg = cal.calGetString(&quot;calendar&quot;, &quot;missingCalendarTimezonesError&quot;);</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+            let msg = cal.l10n.getCalString(&quot;missingCalendarTimezonesError&quot;);</span>
<a href="#l38.14"></a><span id="l38.14">             cal.ERROR(msg);</span>
<a href="#l38.15"></a><span id="l38.15">             cal.showError(msg);</span>
<a href="#l38.16"></a><span id="l38.16">         });</span>
<a href="#l38.17"></a><span id="l38.17">     },</span>
<a href="#l38.18"></a><span id="l38.18"> </span>
<a href="#l38.19"></a><span id="l38.19">     shutdown: function(aCompleteListener) {</span>
<a href="#l38.20"></a><span id="l38.20">         Services.prefs.removeObserver(&quot;calendar.timezone.local&quot;, this);</span>
<a href="#l38.21"></a><span id="l38.21">         aCompleteListener.onResult(null, Components.results.NS_OK);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/calendar/import-export/calHtmlExport.js</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/calendar/import-export/calHtmlExport.js</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -25,29 +25,29 @@ calHtmlExporter.prototype = {</span>
<a href="#l39.4"></a><span id="l39.4">         contractID: &quot;@mozilla.org/calendar/export;1?type=html&quot;,</span>
<a href="#l39.5"></a><span id="l39.5">         classDescription: &quot;Calendar HTML Exporter&quot;,</span>
<a href="#l39.6"></a><span id="l39.6">         interfaces: calHtmlExporterInterfaces</span>
<a href="#l39.7"></a><span id="l39.7">     }),</span>
<a href="#l39.8"></a><span id="l39.8"> </span>
<a href="#l39.9"></a><span id="l39.9">     getFileTypes: function(aCount) {</span>
<a href="#l39.10"></a><span id="l39.10">         aCount.value = 1;</span>
<a href="#l39.11"></a><span id="l39.11">         let wildmat = &quot;*.html; *.htm&quot;;</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-        let label = cal.calGetString(&quot;calendar&quot;, &quot;filterHtml&quot;, [wildmat]);</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+        let label = cal.l10n.getCalString(&quot;filterHtml&quot;, [wildmat]);</span>
<a href="#l39.14"></a><span id="l39.14">         return [{</span>
<a href="#l39.15"></a><span id="l39.15">             QueryInterface: XPCOMUtils.generateQI([Components.interfaces.calIFileType]),</span>
<a href="#l39.16"></a><span id="l39.16">             defaultExtension: &quot;html&quot;,</span>
<a href="#l39.17"></a><span id="l39.17">             extensionFilter: wildmat,</span>
<a href="#l39.18"></a><span id="l39.18">             description: label</span>
<a href="#l39.19"></a><span id="l39.19">         }];</span>
<a href="#l39.20"></a><span id="l39.20">     },</span>
<a href="#l39.21"></a><span id="l39.21"> </span>
<a href="#l39.22"></a><span id="l39.22">     exportToStream: function(aStream, aCount, aItems, aTitle) {</span>
<a href="#l39.23"></a><span id="l39.23">         let document = cal.xml.parseFile(&quot;chrome://calendar-common/skin/printing/calHtmlExport.html&quot;);</span>
<a href="#l39.24"></a><span id="l39.24">         let itemContainer = document.getElementById(&quot;item-container&quot;);</span>
<a href="#l39.25"></a><span id="l39.25" class="difflineminus">-        document.getElementById(&quot;title&quot;).textContent = aTitle || cal.calGetString(&quot;calendar&quot;, &quot;HTMLTitle&quot;);</span>
<a href="#l39.26"></a><span id="l39.26" class="difflineplus">+        document.getElementById(&quot;title&quot;).textContent = aTitle || cal.l10n.getCalString(&quot;HTMLTitle&quot;);</span>
<a href="#l39.27"></a><span id="l39.27"> </span>
<a href="#l39.28"></a><span id="l39.28">         // Sort aItems</span>
<a href="#l39.29"></a><span id="l39.29">         aItems.sort((a, b) =&gt; {</span>
<a href="#l39.30"></a><span id="l39.30">             let start_a = a[cal.dtz.startDateProp(a)];</span>
<a href="#l39.31"></a><span id="l39.31">             if (!start_a) {</span>
<a href="#l39.32"></a><span id="l39.32">                 return -1;</span>
<a href="#l39.33"></a><span id="l39.33">             }</span>
<a href="#l39.34"></a><span id="l39.34">             let start_b = b[cal.dtz.startDateProp(b)];</span>
<a href="#l39.35"></a><span id="l39.35" class="difflineat">@@ -58,50 +58,50 @@ calHtmlExporter.prototype = {</span>
<a href="#l39.36"></a><span id="l39.36">         });</span>
<a href="#l39.37"></a><span id="l39.37"> </span>
<a href="#l39.38"></a><span id="l39.38">         for (let item of aItems) {</span>
<a href="#l39.39"></a><span id="l39.39">             let itemNode = document.getElementById(&quot;item-template&quot;).cloneNode(true);</span>
<a href="#l39.40"></a><span id="l39.40">             itemNode.removeAttribute(&quot;id&quot;);</span>
<a href="#l39.41"></a><span id="l39.41"> </span>
<a href="#l39.42"></a><span id="l39.42">             let setupTextRow = function(classKey, propValue, prefixKey) {</span>
<a href="#l39.43"></a><span id="l39.43">                 if (propValue) {</span>
<a href="#l39.44"></a><span id="l39.44" class="difflineminus">-                    let prefix = cal.calGetString(&quot;calendar&quot;, prefixKey);</span>
<a href="#l39.45"></a><span id="l39.45" class="difflineplus">+                    let prefix = cal.l10n.getCalString(prefixKey);</span>
<a href="#l39.46"></a><span id="l39.46">                     itemNode.querySelector(&quot;.&quot; + classKey + &quot;key&quot;).textContent = prefix;</span>
<a href="#l39.47"></a><span id="l39.47">                     itemNode.querySelector(&quot;.&quot; + classKey).textContent = propValue;</span>
<a href="#l39.48"></a><span id="l39.48">                 } else {</span>
<a href="#l39.49"></a><span id="l39.49">                     let row = itemNode.querySelector(&quot;.&quot; + classKey + &quot;row&quot;);</span>
<a href="#l39.50"></a><span id="l39.50">                     if (row.nextSibling.nodeType == row.nextSibling.TEXT_NODE ||</span>
<a href="#l39.51"></a><span id="l39.51">                         row.nextSibling.nodeType == row.nextSibling.CDATA_SECTION_NODE) {</span>
<a href="#l39.52"></a><span id="l39.52">                         row.nextSibling.remove();</span>
<a href="#l39.53"></a><span id="l39.53">                     }</span>
<a href="#l39.54"></a><span id="l39.54">                     row.remove();</span>
<a href="#l39.55"></a><span id="l39.55">                 }</span>
<a href="#l39.56"></a><span id="l39.56">             };</span>
<a href="#l39.57"></a><span id="l39.57"> </span>
<a href="#l39.58"></a><span id="l39.58">             let startDate = item[cal.dtz.startDateProp(item)];</span>
<a href="#l39.59"></a><span id="l39.59">             let endDate = item[cal.dtz.endDateProp(item)];</span>
<a href="#l39.60"></a><span id="l39.60">             if (startDate || endDate) {</span>
<a href="#l39.61"></a><span id="l39.61">                 // This is a task with a start or due date, format accordingly</span>
<a href="#l39.62"></a><span id="l39.62" class="difflineminus">-                let prefixWhen = cal.calGetString(&quot;calendar&quot;, &quot;htmlPrefixWhen&quot;);</span>
<a href="#l39.63"></a><span id="l39.63" class="difflineplus">+                let prefixWhen = cal.l10n.getCalString(&quot;htmlPrefixWhen&quot;);</span>
<a href="#l39.64"></a><span id="l39.64">                 itemNode.querySelector(&quot;.intervalkey&quot;).textContent = prefixWhen;</span>
<a href="#l39.65"></a><span id="l39.65"> </span>
<a href="#l39.66"></a><span id="l39.66">                 let startNode = itemNode.querySelector(&quot;.dtstart&quot;);</span>
<a href="#l39.67"></a><span id="l39.67">                 let dateString = cal.getDateFormatter().formatItemInterval(item);</span>
<a href="#l39.68"></a><span id="l39.68">                 startNode.setAttribute(&quot;title&quot;, startDate ? startDate.icalString : &quot;none&quot;);</span>
<a href="#l39.69"></a><span id="l39.69">                 startNode.textContent = dateString;</span>
<a href="#l39.70"></a><span id="l39.70">             } else {</span>
<a href="#l39.71"></a><span id="l39.71">                 let row = itemNode.querySelector(&quot;.intervalrow&quot;);</span>
<a href="#l39.72"></a><span id="l39.72">                 row.remove();</span>
<a href="#l39.73"></a><span id="l39.73">                 if (row.nextSibling.nodeType == row.nextSibling.TEXT_NODE ||</span>
<a href="#l39.74"></a><span id="l39.74">                     row.nextSibling.nodeType == row.nextSibling.CDATA_SECTION_NODE) {</span>
<a href="#l39.75"></a><span id="l39.75">                     row.nextSibling.remove();</span>
<a href="#l39.76"></a><span id="l39.76">                 }</span>
<a href="#l39.77"></a><span id="l39.77">             }</span>
<a href="#l39.78"></a><span id="l39.78"> </span>
<a href="#l39.79"></a><span id="l39.79" class="difflineminus">-            let itemTitle = (item.isCompleted ? cal.calGetString(&quot;calendar&quot;, &quot;htmlTaskCompleted&quot;, [item.title]) : item.title);</span>
<a href="#l39.80"></a><span id="l39.80" class="difflineplus">+            let itemTitle = (item.isCompleted ? cal.l10n.getCalString(&quot;htmlTaskCompleted&quot;, [item.title]) : item.title);</span>
<a href="#l39.81"></a><span id="l39.81">             setupTextRow(&quot;summary&quot;, itemTitle, &quot;htmlPrefixTitle&quot;);</span>
<a href="#l39.82"></a><span id="l39.82"> </span>
<a href="#l39.83"></a><span id="l39.83">             setupTextRow(&quot;location&quot;, item.getProperty(&quot;LOCATION&quot;), &quot;htmlPrefixLocation&quot;);</span>
<a href="#l39.84"></a><span id="l39.84">             setupTextRow(&quot;description&quot;, item.getProperty(&quot;DESCRIPTION&quot;), &quot;htmlPrefixDescription&quot;);</span>
<a href="#l39.85"></a><span id="l39.85"> </span>
<a href="#l39.86"></a><span id="l39.86">             itemContainer.appendChild(itemNode);</span>
<a href="#l39.87"></a><span id="l39.87">         }</span>
<a href="#l39.88"></a><span id="l39.88"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/calendar/import-export/calIcsImportExport.js</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/calendar/import-export/calIcsImportExport.js</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -11,17 +11,17 @@ ChromeUtils.import(&quot;resource://calendar/</span>
<a href="#l40.4"></a><span id="l40.4"> </span>
<a href="#l40.5"></a><span id="l40.5"> // Shared functions</span>
<a href="#l40.6"></a><span id="l40.6"> function getIcsFileTypes(aCount) {</span>
<a href="#l40.7"></a><span id="l40.7">     aCount.value = 1;</span>
<a href="#l40.8"></a><span id="l40.8">     return [{</span>
<a href="#l40.9"></a><span id="l40.9">         QueryInterface: XPCOMUtils.generateQI([Components.interfaces.calIFileType]),</span>
<a href="#l40.10"></a><span id="l40.10">         defaultExtension: &quot;ics&quot;,</span>
<a href="#l40.11"></a><span id="l40.11">         extensionFilter: &quot;*.ics&quot;,</span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-        description: cal.calGetString(&quot;calendar&quot;, &quot;filterIcs&quot;, [&quot;*.ics&quot;])</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+        description: cal.l10n.getCalString(&quot;filterIcs&quot;, [&quot;*.ics&quot;])</span>
<a href="#l40.14"></a><span id="l40.14">     }];</span>
<a href="#l40.15"></a><span id="l40.15"> }</span>
<a href="#l40.16"></a><span id="l40.16"> </span>
<a href="#l40.17"></a><span id="l40.17"> // Importer</span>
<a href="#l40.18"></a><span id="l40.18"> function calIcsImporter() {</span>
<a href="#l40.19"></a><span id="l40.19">     this.wrappedJSObject = this;</span>
<a href="#l40.20"></a><span id="l40.20"> }</span>
<a href="#l40.21"></a><span id="l40.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/calendar/import-export/calListFormatter.js</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/calendar/import-export/calListFormatter.js</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -20,16 +20,16 @@ calListFormatter.prototype = {</span>
<a href="#l41.4"></a><span id="l41.4"> </span>
<a href="#l41.5"></a><span id="l41.5">     classInfo: XPCOMUtils.generateCI({</span>
<a href="#l41.6"></a><span id="l41.6">         classID: calListFormatterClassID,</span>
<a href="#l41.7"></a><span id="l41.7">         contractID: &quot;@mozilla.org/calendar/printformatter;1?type=list&quot;,</span>
<a href="#l41.8"></a><span id="l41.8">         classDescription: &quot;Calendar List Print Formatter&quot;,</span>
<a href="#l41.9"></a><span id="l41.9">         interfaces: calListFormatterInterfaces</span>
<a href="#l41.10"></a><span id="l41.10">     }),</span>
<a href="#l41.11"></a><span id="l41.11"> </span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-    get name() { return cal.calGetString(&quot;calendar&quot;, &quot;formatListName&quot;); },</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+    get name() { return cal.l10n.getCalString(&quot;formatListName&quot;); },</span>
<a href="#l41.14"></a><span id="l41.14"> </span>
<a href="#l41.15"></a><span id="l41.15">     formatToHtml: function(aStream, aStart, aEnd, aCount, aItems, aTitle) {</span>
<a href="#l41.16"></a><span id="l41.16">         let htmlexporter = Components.classes[&quot;@mozilla.org/calendar/export;1?type=htmllist&quot;]</span>
<a href="#l41.17"></a><span id="l41.17">                                      .createInstance(Components.interfaces.calIExporter);</span>
<a href="#l41.18"></a><span id="l41.18">         htmlexporter.exportToStream(aStream, aCount, aItems, aTitle);</span>
<a href="#l41.19"></a><span id="l41.19">     }</span>
<a href="#l41.20"></a><span id="l41.20"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/calendar/import-export/calMonthGridPrinter.js</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/calendar/import-export/calMonthGridPrinter.js</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -24,17 +24,17 @@ calMonthPrinter.prototype = {</span>
<a href="#l42.4"></a><span id="l42.4"> </span>
<a href="#l42.5"></a><span id="l42.5">     classInfo: XPCOMUtils.generateCI({</span>
<a href="#l42.6"></a><span id="l42.6">         classID: calMonthPrinterClassID,</span>
<a href="#l42.7"></a><span id="l42.7">         contractID: &quot;@mozilla.org/calendar/printformatter;1?type=monthgrid&quot;,</span>
<a href="#l42.8"></a><span id="l42.8">         classDescription: &quot;Calendar Month Grid Print Formatter&quot;,</span>
<a href="#l42.9"></a><span id="l42.9">         interfaces: calMonthPrinterInterfaces</span>
<a href="#l42.10"></a><span id="l42.10">     }),</span>
<a href="#l42.11"></a><span id="l42.11"> </span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-    get name() { return cal.calGetString(&quot;calendar&quot;, &quot;monthPrinterName&quot;); },</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+    get name() { return cal.l10n.getCalString(&quot;monthPrinterName&quot;); },</span>
<a href="#l42.14"></a><span id="l42.14"> </span>
<a href="#l42.15"></a><span id="l42.15">     formatToHtml: function(aStream, aStart, aEnd, aCount, aItems, aTitle) {</span>
<a href="#l42.16"></a><span id="l42.16">         let document = cal.xml.parseFile(&quot;chrome://calendar-common/skin/printing/calMonthGridPrinter.html&quot;);</span>
<a href="#l42.17"></a><span id="l42.17">         let defaultTimezone = cal.dtz.defaultTimezone;</span>
<a href="#l42.18"></a><span id="l42.18"> </span>
<a href="#l42.19"></a><span id="l42.19">         // Set page title</span>
<a href="#l42.20"></a><span id="l42.20">         document.getElementById(&quot;title&quot;).textContent = aTitle;</span>
<a href="#l42.21"></a><span id="l42.21"> </span>
<a href="#l42.22"></a><span id="l42.22" class="difflineat">@@ -150,17 +150,17 @@ calMonthPrinter.prototype = {</span>
<a href="#l42.23"></a><span id="l42.23"> </span>
<a href="#l42.24"></a><span id="l42.24">         // Clone the template month and make sure it doesn't have an id</span>
<a href="#l42.25"></a><span id="l42.25">         let currentMonth = monthTemplate.cloneNode(true);</span>
<a href="#l42.26"></a><span id="l42.26">         currentMonth.removeAttribute(&quot;id&quot;);</span>
<a href="#l42.27"></a><span id="l42.27">         currentMonth.item = startOfMonth.clone();</span>
<a href="#l42.28"></a><span id="l42.28"> </span>
<a href="#l42.29"></a><span id="l42.29">         // Set up the month title</span>
<a href="#l42.30"></a><span id="l42.30">         let monthName = cal.l10n.formatMonth(startOfMonth.month + 1, &quot;calendar&quot;, &quot;monthInYear&quot;);</span>
<a href="#l42.31"></a><span id="l42.31" class="difflineminus">-        let monthTitle = cal.calGetString(&quot;calendar&quot;, &quot;monthInYear&quot;, [monthName, startOfMonth.year]);</span>
<a href="#l42.32"></a><span id="l42.32" class="difflineplus">+        let monthTitle = cal.l10n.getCalString(&quot;monthInYear&quot;, [monthName, startOfMonth.year]);</span>
<a href="#l42.33"></a><span id="l42.33">         currentMonth.querySelector(&quot;.month-name&quot;).textContent = monthTitle;</span>
<a href="#l42.34"></a><span id="l42.34"> </span>
<a href="#l42.35"></a><span id="l42.35">         // Set up the weekday titles</span>
<a href="#l42.36"></a><span id="l42.36">         let wkst = Preferences.get(&quot;calendar.week.start&quot;, 0);</span>
<a href="#l42.37"></a><span id="l42.37">         for (let i = 1; i &lt;= 7; i++) {</span>
<a href="#l42.38"></a><span id="l42.38">             let dayNumber = ((i + wkst - 1) % 7) + 1;</span>
<a href="#l42.39"></a><span id="l42.39">             let dayTitle = currentMonth.querySelector(&quot;.day&quot; + i + &quot;-title&quot;);</span>
<a href="#l42.40"></a><span id="l42.40">             dayTitle.textContent = cal.calGetString(&quot;dateFormat&quot;, &quot;day.&quot; + dayNumber + &quot;.Mmm&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/calendar/import-export/calOutlookCSVImportExport.js</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/calendar/import-export/calOutlookCSVImportExport.js</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -74,17 +74,17 @@ var locales = [localeEn, localeNl];</span>
<a href="#l43.4"></a><span id="l43.4"> </span>
<a href="#l43.5"></a><span id="l43.5"> // Windows line endings, CSV files with LF only can't be read by Outlook.</span>
<a href="#l43.6"></a><span id="l43.6"> var exportLineEnding = &quot;\r\n&quot;;</span>
<a href="#l43.7"></a><span id="l43.7"> </span>
<a href="#l43.8"></a><span id="l43.8"> // Shared functions</span>
<a href="#l43.9"></a><span id="l43.9"> function getOutlookCsvFileTypes(aCount) {</span>
<a href="#l43.10"></a><span id="l43.10">     aCount.value = 1;</span>
<a href="#l43.11"></a><span id="l43.11">     let wildmat = &quot;*.csv&quot;;</span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-    let label = cal.calGetString(&quot;calendar&quot;, &quot;filterOutlookCsv&quot;, [wildmat]);</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineplus">+    let label = cal.l10n.getCalString(&quot;filterOutlookCsv&quot;, [wildmat]);</span>
<a href="#l43.14"></a><span id="l43.14">     return [{</span>
<a href="#l43.15"></a><span id="l43.15">         defaultExtension: &quot;csv&quot;,</span>
<a href="#l43.16"></a><span id="l43.16">         extensionFilter: wildmat,</span>
<a href="#l43.17"></a><span id="l43.17">         description: label</span>
<a href="#l43.18"></a><span id="l43.18">     }];</span>
<a href="#l43.19"></a><span id="l43.19"> }</span>
<a href="#l43.20"></a><span id="l43.20"> </span>
<a href="#l43.21"></a><span id="l43.21"> // Importer</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/calendar/import-export/calWeekPrinter.js</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/calendar/import-export/calWeekPrinter.js</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -24,17 +24,17 @@ calWeekPrinter.prototype = {</span>
<a href="#l44.4"></a><span id="l44.4"> </span>
<a href="#l44.5"></a><span id="l44.5">     classInfo: XPCOMUtils.generateCI({</span>
<a href="#l44.6"></a><span id="l44.6">         classID: calWeekPrinterClassID,</span>
<a href="#l44.7"></a><span id="l44.7">         contractID: &quot;@mozilla.org/calendar/printformatter;1?type=weekplan&quot;,</span>
<a href="#l44.8"></a><span id="l44.8">         classDescription: &quot;Calendar Week Print Formatter&quot;,</span>
<a href="#l44.9"></a><span id="l44.9">         interfaces: calWeekPrinterInterfaces</span>
<a href="#l44.10"></a><span id="l44.10">     }),</span>
<a href="#l44.11"></a><span id="l44.11"> </span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-    get name() { return cal.calGetString(&quot;calendar&quot;, &quot;weekPrinterName&quot;); },</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+    get name() { return cal.l10n.getCalString(&quot;weekPrinterName&quot;); },</span>
<a href="#l44.14"></a><span id="l44.14"> </span>
<a href="#l44.15"></a><span id="l44.15">     formatToHtml: function(aStream, aStart, aEnd, aCount, aItems, aTitle) {</span>
<a href="#l44.16"></a><span id="l44.16">         let document = cal.xml.parseFile(&quot;chrome://calendar-common/skin/printing/calWeekPrinter.html&quot;);</span>
<a href="#l44.17"></a><span id="l44.17">         let defaultTimezone = cal.dtz.defaultTimezone;</span>
<a href="#l44.18"></a><span id="l44.18"> </span>
<a href="#l44.19"></a><span id="l44.19">         // Set page title</span>
<a href="#l44.20"></a><span id="l44.20">         document.getElementById(&quot;title&quot;).textContent = aTitle;</span>
<a href="#l44.21"></a><span id="l44.21"> </span>
<a href="#l44.22"></a><span id="l44.22" class="difflineat">@@ -105,17 +105,17 @@ calWeekPrinter.prototype = {</span>
<a href="#l44.23"></a><span id="l44.23">         let currentPage = weekTemplate.cloneNode(true);</span>
<a href="#l44.24"></a><span id="l44.24">         currentPage.removeAttribute(&quot;id&quot;);</span>
<a href="#l44.25"></a><span id="l44.25">         currentPage.item = startOfWeek.clone();</span>
<a href="#l44.26"></a><span id="l44.26"> </span>
<a href="#l44.27"></a><span id="l44.27">         // Set up the week number title</span>
<a href="#l44.28"></a><span id="l44.28">         let weekInfo = cal.getWeekInfoService();</span>
<a href="#l44.29"></a><span id="l44.29">         let dateFormatter = cal.getDateFormatter();</span>
<a href="#l44.30"></a><span id="l44.30">         let weekno = weekInfo.getWeekTitle(startOfWeek);</span>
<a href="#l44.31"></a><span id="l44.31" class="difflineminus">-        let weekTitle = cal.calGetString(&quot;calendar&quot;, &quot;WeekTitle&quot;, [weekno]);</span>
<a href="#l44.32"></a><span id="l44.32" class="difflineplus">+        let weekTitle = cal.l10n.getCalString(&quot;WeekTitle&quot;, [weekno]);</span>
<a href="#l44.33"></a><span id="l44.33">         currentPage.querySelector(&quot;.week-number&quot;).textContent = weekTitle;</span>
<a href="#l44.34"></a><span id="l44.34"> </span>
<a href="#l44.35"></a><span id="l44.35">         // Set up the day boxes</span>
<a href="#l44.36"></a><span id="l44.36">         let endOfWeek = weekInfo.getEndOfWeek(startOfWeek);</span>
<a href="#l44.37"></a><span id="l44.37">         for (let currentDate = startOfWeek.clone(); currentDate.compare(endOfWeek) &lt;= 0; currentDate.day++) {</span>
<a href="#l44.38"></a><span id="l44.38">             let weekday = currentDate.weekday;</span>
<a href="#l44.39"></a><span id="l44.39">             let weekdayName = weekdayMap[weekday];</span>
<a href="#l44.40"></a><span id="l44.40">             let dayOffPrefName = &quot;calendar.week.d&quot; + weekday + weekdayName + &quot;soff&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/calendar/lightning/content/lightning-item-iframe.js</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/calendar/lightning/content/lightning-item-iframe.js</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -80,20 +80,20 @@ var eventDialogCalendarObserver = {</span>
<a href="#l45.4"></a><span id="l45.4">         if (this.isObserving &amp;&amp; &quot;calendarItem&quot; in window &amp;&amp;</span>
<a href="#l45.5"></a><span id="l45.5">             window.calendarItem &amp;&amp; window.calendarItem.id == aOldItem.id) {</span>
<a href="#l45.6"></a><span id="l45.6">             let doUpdate = true;</span>
<a href="#l45.7"></a><span id="l45.7"> </span>
<a href="#l45.8"></a><span id="l45.8">             // The item has been modified outside the dialog. We only need to</span>
<a href="#l45.9"></a><span id="l45.9">             // prompt if there have been local changes also.</span>
<a href="#l45.10"></a><span id="l45.10">             if (isItemChanged()) {</span>
<a href="#l45.11"></a><span id="l45.11">                 let promptService = Components.interfaces.nsIPromptService;</span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-                let promptTitle = cal.calGetString(&quot;calendar&quot;, &quot;modifyConflictPromptTitle&quot;);</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineminus">-                let promptMessage = cal.calGetString(&quot;calendar&quot;, &quot;modifyConflictPromptMessage&quot;);</span>
<a href="#l45.14"></a><span id="l45.14" class="difflineminus">-                let promptButton1 = cal.calGetString(&quot;calendar&quot;, &quot;modifyConflictPromptButton1&quot;);</span>
<a href="#l45.15"></a><span id="l45.15" class="difflineminus">-                let promptButton2 = cal.calGetString(&quot;calendar&quot;, &quot;modifyConflictPromptButton2&quot;);</span>
<a href="#l45.16"></a><span id="l45.16" class="difflineplus">+                let promptTitle = cal.l10n.getCalString(&quot;modifyConflictPromptTitle&quot;);</span>
<a href="#l45.17"></a><span id="l45.17" class="difflineplus">+                let promptMessage = cal.l10n.getCalString(&quot;modifyConflictPromptMessage&quot;);</span>
<a href="#l45.18"></a><span id="l45.18" class="difflineplus">+                let promptButton1 = cal.l10n.getCalString(&quot;modifyConflictPromptButton1&quot;);</span>
<a href="#l45.19"></a><span id="l45.19" class="difflineplus">+                let promptButton2 = cal.l10n.getCalString(&quot;modifyConflictPromptButton2&quot;);</span>
<a href="#l45.20"></a><span id="l45.20">                 let flags = promptService.BUTTON_TITLE_IS_STRING *</span>
<a href="#l45.21"></a><span id="l45.21">                             promptService.BUTTON_POS_0 +</span>
<a href="#l45.22"></a><span id="l45.22">                             promptService.BUTTON_TITLE_IS_STRING *</span>
<a href="#l45.23"></a><span id="l45.23">                             promptService.BUTTON_POS_1;</span>
<a href="#l45.24"></a><span id="l45.24"> </span>
<a href="#l45.25"></a><span id="l45.25">                 let choice = Services.prompt.confirmEx(window, promptTitle, promptMessage, flags,</span>
<a href="#l45.26"></a><span id="l45.26">                                                        promptButton1, promptButton2, null, null, {});</span>
<a href="#l45.27"></a><span id="l45.27">                 if (!choice) {</span>
<a href="#l45.28"></a><span id="l45.28" class="difflineat">@@ -454,24 +454,23 @@ function onCommandCancel() {</span>
<a href="#l45.29"></a><span id="l45.29"> </span>
<a href="#l45.30"></a><span id="l45.30">     if (gInTab &amp;&amp; gTabInfoObject) {</span>
<a href="#l45.31"></a><span id="l45.31">         // Switch to the tab that the prompt refers to.</span>
<a href="#l45.32"></a><span id="l45.32">         gTabmail.switchToTab(gTabInfoObject);</span>
<a href="#l45.33"></a><span id="l45.33">     }</span>
<a href="#l45.34"></a><span id="l45.34"> </span>
<a href="#l45.35"></a><span id="l45.35">     let promptService = Components.interfaces.nsIPromptService;</span>
<a href="#l45.36"></a><span id="l45.36"> </span>
<a href="#l45.37"></a><span id="l45.37" class="difflineminus">-    let promptTitle = cal.calGetString(&quot;calendar&quot;,</span>
<a href="#l45.38"></a><span id="l45.38" class="difflineminus">-                                       cal.item.isEvent(window.calendarItem)</span>
<a href="#l45.39"></a><span id="l45.39" class="difflineminus">-                                          ? &quot;askSaveTitleEvent&quot;</span>
<a href="#l45.40"></a><span id="l45.40" class="difflineminus">-                                          : &quot;askSaveTitleTask&quot;);</span>
<a href="#l45.41"></a><span id="l45.41" class="difflineminus">-    let promptMessage = cal.calGetString(&quot;calendar&quot;,</span>
<a href="#l45.42"></a><span id="l45.42" class="difflineminus">-                                         cal.item.isEvent(window.calendarItem)</span>
<a href="#l45.43"></a><span id="l45.43" class="difflineminus">-                                            ? &quot;askSaveMessageEvent&quot;</span>
<a href="#l45.44"></a><span id="l45.44" class="difflineminus">-                                            : &quot;askSaveMessageTask&quot;);</span>
<a href="#l45.45"></a><span id="l45.45" class="difflineplus">+    let promptTitle = cal.l10n.getCalString(</span>
<a href="#l45.46"></a><span id="l45.46" class="difflineplus">+        cal.item.isEvent(window.calendarItem) ? &quot;askSaveTitleEvent&quot; : &quot;askSaveTitleTask&quot;</span>
<a href="#l45.47"></a><span id="l45.47" class="difflineplus">+    );</span>
<a href="#l45.48"></a><span id="l45.48" class="difflineplus">+    let promptMessage = cal.l10n.getCalString(</span>
<a href="#l45.49"></a><span id="l45.49" class="difflineplus">+        cal.item.isEvent(window.calendarItem) ? &quot;askSaveMessageEvent&quot; : &quot;askSaveMessageTask&quot;</span>
<a href="#l45.50"></a><span id="l45.50" class="difflineplus">+    );</span>
<a href="#l45.51"></a><span id="l45.51" class="difflineplus">+</span>
<a href="#l45.52"></a><span id="l45.52"> </span>
<a href="#l45.53"></a><span id="l45.53">     let flags = promptService.BUTTON_TITLE_SAVE *</span>
<a href="#l45.54"></a><span id="l45.54">                 promptService.BUTTON_POS_0 +</span>
<a href="#l45.55"></a><span id="l45.55">                 promptService.BUTTON_TITLE_CANCEL *</span>
<a href="#l45.56"></a><span id="l45.56">                 promptService.BUTTON_POS_1 +</span>
<a href="#l45.57"></a><span id="l45.57">                 promptService.BUTTON_TITLE_DONT_SAVE *</span>
<a href="#l45.58"></a><span id="l45.58">                 promptService.BUTTON_POS_2;</span>
<a href="#l45.59"></a><span id="l45.59"> </span>
<a href="#l45.60"></a><span id="l45.60" class="difflineat">@@ -864,21 +863,21 @@ function updateCategoryMenulist() {</span>
<a href="#l45.61"></a><span id="l45.61">     setBooleanAttribute(&quot;item-categories&quot;, &quot;hidden&quot;, (maxCount === 0));</span>
<a href="#l45.62"></a><span id="l45.62">     setBooleanAttribute(&quot;item-categories-label&quot;, &quot;hidden&quot;, (maxCount === 0));</span>
<a href="#l45.63"></a><span id="l45.63">     setBooleanAttribute(&quot;item-calendar-label&quot;, &quot;hidden&quot;, (maxCount === 0));</span>
<a href="#l45.64"></a><span id="l45.64">     setBooleanAttribute(&quot;item-calendar-aux-label&quot;, &quot;hidden&quot;, (maxCount !== 0));</span>
<a href="#l45.65"></a><span id="l45.65"> </span>
<a href="#l45.66"></a><span id="l45.66">     let label;</span>
<a href="#l45.67"></a><span id="l45.67">     let categoryList = categoryPanel.categories;</span>
<a href="#l45.68"></a><span id="l45.68">     if (categoryList.length &gt; 1) {</span>
<a href="#l45.69"></a><span id="l45.69" class="difflineminus">-        label = cal.calGetString(&quot;calendar&quot;, &quot;multipleCategories&quot;);</span>
<a href="#l45.70"></a><span id="l45.70" class="difflineplus">+        label = cal.l10n.getCalString(&quot;multipleCategories&quot;);</span>
<a href="#l45.71"></a><span id="l45.71">     } else if (categoryList.length == 1) {</span>
<a href="#l45.72"></a><span id="l45.72">         label = categoryList[0];</span>
<a href="#l45.73"></a><span id="l45.73">     } else {</span>
<a href="#l45.74"></a><span id="l45.74" class="difflineminus">-        label = cal.calGetString(&quot;calendar&quot;, &quot;None&quot;);</span>
<a href="#l45.75"></a><span id="l45.75" class="difflineplus">+        label = cal.l10n.getCalString(&quot;None&quot;);</span>
<a href="#l45.76"></a><span id="l45.76">     }</span>
<a href="#l45.77"></a><span id="l45.77">     categoryMenulist.setAttribute(&quot;label&quot;, label);</span>
<a href="#l45.78"></a><span id="l45.78"> }</span>
<a href="#l45.79"></a><span id="l45.79"> </span>
<a href="#l45.80"></a><span id="l45.80"> /**</span>
<a href="#l45.81"></a><span id="l45.81">  * Saves the selected categories into the passed item</span>
<a href="#l45.82"></a><span id="l45.82">  *</span>
<a href="#l45.83"></a><span id="l45.83">  * @param aItem     The item to set the categories on</span>
<a href="#l45.84"></a><span id="l45.84" class="difflineat">@@ -1070,17 +1069,17 @@ function dateTimeControls2State(aStartDa</span>
<a href="#l45.85"></a><span id="l45.85">     let stringWarning = &quot;&quot;;</span>
<a href="#l45.86"></a><span id="l45.86">     if (!aStartDatepicker &amp;&amp; gStartTime &amp;&amp; gEndTime) {</span>
<a href="#l45.87"></a><span id="l45.87">         if (gEndTime.compare(gStartTime) &gt;= 0) {</span>
<a href="#l45.88"></a><span id="l45.88">             gItemDuration = gEndTime.subtractDate(gStartTime);</span>
<a href="#l45.89"></a><span id="l45.89">         } else {</span>
<a href="#l45.90"></a><span id="l45.90">             gStartTime = saveStartTime;</span>
<a href="#l45.91"></a><span id="l45.91">             gEndTime = saveEndTime;</span>
<a href="#l45.92"></a><span id="l45.92">             warning = true;</span>
<a href="#l45.93"></a><span id="l45.93" class="difflineminus">-            stringWarning = cal.calGetString(&quot;calendar&quot;, &quot;warningEndBeforeStart&quot;);</span>
<a href="#l45.94"></a><span id="l45.94" class="difflineplus">+            stringWarning = cal.l10n.getCalString(&quot;warningEndBeforeStart&quot;);</span>
<a href="#l45.95"></a><span id="l45.95">         }</span>
<a href="#l45.96"></a><span id="l45.96">     }</span>
<a href="#l45.97"></a><span id="l45.97"> </span>
<a href="#l45.98"></a><span id="l45.98">     let startChanged = false;</span>
<a href="#l45.99"></a><span id="l45.99">     if (gStartTime &amp;&amp; saveStartTime) {</span>
<a href="#l45.100"></a><span id="l45.100">         startChanged = gStartTime.compare(saveStartTime) != 0;</span>
<a href="#l45.101"></a><span id="l45.101">     }</span>
<a href="#l45.102"></a><span id="l45.102">     // Preset the date in the until-datepicker's minimonth to the new start</span>
<a href="#l45.103"></a><span id="l45.103" class="difflineat">@@ -1109,17 +1108,17 @@ function dateTimeControls2State(aStartDa</span>
<a href="#l45.104"></a><span id="l45.104">             // recurrence string is going to be changed by updateDateTime() below.</span>
<a href="#l45.105"></a><span id="l45.105">             let notCustomRule = document.getElementById(&quot;repeat-deck&quot;).selectedIndex == 0;</span>
<a href="#l45.106"></a><span id="l45.106">             if (notCustomRule) {</span>
<a href="#l45.107"></a><span id="l45.107">                 setElementValue(&quot;repeat-until-datepicker&quot;,</span>
<a href="#l45.108"></a><span id="l45.108">                                 cal.dtz.dateTimeToJsDate(gUntilDate.getInTimezone(cal.dtz.floating)));</span>
<a href="#l45.109"></a><span id="l45.109">             }</span>
<a href="#l45.110"></a><span id="l45.110"> </span>
<a href="#l45.111"></a><span id="l45.111">             warning = true;</span>
<a href="#l45.112"></a><span id="l45.112" class="difflineminus">-            stringWarning = cal.calGetString(&quot;calendar&quot;, &quot;warningUntilDateBeforeStart&quot;);</span>
<a href="#l45.113"></a><span id="l45.113" class="difflineplus">+            stringWarning = cal.l10n.getCalString(&quot;warningUntilDateBeforeStart&quot;);</span>
<a href="#l45.114"></a><span id="l45.114">         }</span>
<a href="#l45.115"></a><span id="l45.115">     }</span>
<a href="#l45.116"></a><span id="l45.116"> </span>
<a href="#l45.117"></a><span id="l45.117">     updateDateTime();</span>
<a href="#l45.118"></a><span id="l45.118">     updateTimezone();</span>
<a href="#l45.119"></a><span id="l45.119">     updateAccept();</span>
<a href="#l45.120"></a><span id="l45.120"> </span>
<a href="#l45.121"></a><span id="l45.121">     if (warning) {</span>
<a href="#l45.122"></a><span id="l45.122" class="difflineat">@@ -1539,18 +1538,17 @@ function updateTitle() {</span>
<a href="#l45.123"></a><span id="l45.123">     let strName;</span>
<a href="#l45.124"></a><span id="l45.124">     if (cal.item.isEvent(window.calendarItem)) {</span>
<a href="#l45.125"></a><span id="l45.125">         strName = (window.mode == &quot;new&quot; ? &quot;newEventDialog&quot; : &quot;editEventDialog&quot;);</span>
<a href="#l45.126"></a><span id="l45.126">     } else if (cal.item.isToDo(window.calendarItem)) {</span>
<a href="#l45.127"></a><span id="l45.127">         strName = (window.mode == &quot;new&quot; ? &quot;newTaskDialog&quot; : &quot;editTaskDialog&quot;);</span>
<a href="#l45.128"></a><span id="l45.128">     } else {</span>
<a href="#l45.129"></a><span id="l45.129">         throw Components.results.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l45.130"></a><span id="l45.130">     }</span>
<a href="#l45.131"></a><span id="l45.131" class="difflineminus">-    let newTitle = cal.calGetString(&quot;calendar&quot;, strName) + &quot;: &quot; +</span>
<a href="#l45.132"></a><span id="l45.132" class="difflineminus">-                      getElementValue(&quot;item-title&quot;);</span>
<a href="#l45.133"></a><span id="l45.133" class="difflineplus">+    let newTitle = cal.l10n.getCalString(strName) + &quot;: &quot; + getElementValue(&quot;item-title&quot;);</span>
<a href="#l45.134"></a><span id="l45.134">     sendMessage({ command: &quot;updateTitle&quot;, argument: newTitle });</span>
<a href="#l45.135"></a><span id="l45.135"> }</span>
<a href="#l45.136"></a><span id="l45.136"> </span>
<a href="#l45.137"></a><span id="l45.137"> /**</span>
<a href="#l45.138"></a><span id="l45.138">  * Update the disabled status of the accept button. The button is enabled if all</span>
<a href="#l45.139"></a><span id="l45.139">  * parts of the dialog have options selected that make sense.</span>
<a href="#l45.140"></a><span id="l45.140">  * constraining factors like</span>
<a href="#l45.141"></a><span id="l45.141">  */</span>
<a href="#l45.142"></a><span id="l45.142" class="difflineat">@@ -3027,21 +3025,21 @@ function onCommandSave(aIsClosing) {</span>
<a href="#l45.143"></a><span id="l45.143">  */</span>
<a href="#l45.144"></a><span id="l45.144"> function onCommandDeleteItem() {</span>
<a href="#l45.145"></a><span id="l45.145">     // only ask for confirmation, if the User changed anything on a new item or we modify an existing item</span>
<a href="#l45.146"></a><span id="l45.146">     if (isItemChanged() || window.mode != &quot;new&quot;) {</span>
<a href="#l45.147"></a><span id="l45.147">         let promptTitle = &quot;&quot;;</span>
<a href="#l45.148"></a><span id="l45.148">         let promptMessage = &quot;&quot;;</span>
<a href="#l45.149"></a><span id="l45.149"> </span>
<a href="#l45.150"></a><span id="l45.150">         if (cal.item.isEvent(window.calendarItem)) {</span>
<a href="#l45.151"></a><span id="l45.151" class="difflineminus">-            promptTitle = cal.calGetString(&quot;calendar&quot;, &quot;deleteEventLabel&quot;);</span>
<a href="#l45.152"></a><span id="l45.152" class="difflineminus">-            promptMessage = cal.calGetString(&quot;calendar&quot;, &quot;deleteEventMessage&quot;);</span>
<a href="#l45.153"></a><span id="l45.153" class="difflineplus">+            promptTitle = cal.l10n.getCalString(&quot;deleteEventLabel&quot;);</span>
<a href="#l45.154"></a><span id="l45.154" class="difflineplus">+            promptMessage = cal.l10n.getCalString(&quot;deleteEventMessage&quot;);</span>
<a href="#l45.155"></a><span id="l45.155">         } else if (cal.item.isToDo(window.calendarItem)) {</span>
<a href="#l45.156"></a><span id="l45.156" class="difflineminus">-            promptTitle = cal.calGetString(&quot;calendar&quot;, &quot;deleteTaskLabel&quot;);</span>
<a href="#l45.157"></a><span id="l45.157" class="difflineminus">-            promptMessage = cal.calGetString(&quot;calendar&quot;, &quot;deleteTaskMessage&quot;);</span>
<a href="#l45.158"></a><span id="l45.158" class="difflineplus">+            promptTitle = cal.l10n.getCalString(&quot;deleteTaskLabel&quot;);</span>
<a href="#l45.159"></a><span id="l45.159" class="difflineplus">+            promptMessage = cal.l10n.getCalString(&quot;deleteTaskMessage&quot;);</span>
<a href="#l45.160"></a><span id="l45.160">         }</span>
<a href="#l45.161"></a><span id="l45.161"> </span>
<a href="#l45.162"></a><span id="l45.162">         let answerDelete = Services.prompt.confirm(</span>
<a href="#l45.163"></a><span id="l45.163">                                     null,</span>
<a href="#l45.164"></a><span id="l45.164">                                     promptTitle,</span>
<a href="#l45.165"></a><span id="l45.165">                                     promptMessage);</span>
<a href="#l45.166"></a><span id="l45.166">         if (!answerDelete) {</span>
<a href="#l45.167"></a><span id="l45.167">             return;</span>
<a href="#l45.168"></a><span id="l45.168" class="difflineat">@@ -3538,24 +3536,32 @@ function updateAttendees() {</span>
<a href="#l45.169"></a><span id="l45.169">             let text = cell.querySelector(&quot;label:nth-of-type(1)&quot;);</span>
<a href="#l45.170"></a><span id="l45.170"> </span>
<a href="#l45.171"></a><span id="l45.171">             let role = organizer.role || &quot;REQ-PARTICIPANT&quot;;</span>
<a href="#l45.172"></a><span id="l45.172">             let userType = organizer.userType || &quot;INDIVIDUAL&quot;;</span>
<a href="#l45.173"></a><span id="l45.173">             let partStat = organizer.participationStatus || &quot;NEEDS-ACTION&quot;;</span>
<a href="#l45.174"></a><span id="l45.174"> </span>
<a href="#l45.175"></a><span id="l45.175">             let orgName = (organizer.commonName &amp;&amp; organizer.commonName.length)</span>
<a href="#l45.176"></a><span id="l45.176">                           ? organizer.commonName : organizer.toString();</span>
<a href="#l45.177"></a><span id="l45.177" class="difflineminus">-            let userTypeString = cal.calGetString(&quot;calendar&quot;, &quot;dialog.tooltip.attendeeUserType2.&quot; + userType,</span>
<a href="#l45.178"></a><span id="l45.178" class="difflineminus">-                                            [organizer.toString()]);</span>
<a href="#l45.179"></a><span id="l45.179" class="difflineminus">-            let roleString = cal.calGetString(&quot;calendar&quot;, &quot;dialog.tooltip.attendeeRole2.&quot; + role,</span>
<a href="#l45.180"></a><span id="l45.180" class="difflineminus">-                                              [userTypeString]);</span>
<a href="#l45.181"></a><span id="l45.181" class="difflineminus">-            let partStatString = cal.calGetString(&quot;calendar&quot;, &quot;dialog.tooltip.attendeePartStat2.&quot; + partStat,</span>
<a href="#l45.182"></a><span id="l45.182" class="difflineminus">-                                            [orgName]);</span>
<a href="#l45.183"></a><span id="l45.183" class="difflineminus">-            let tooltip = cal.calGetString(&quot;calendar&quot;, &quot;dialog.tooltip.attendee.combined&quot;,</span>
<a href="#l45.184"></a><span id="l45.184" class="difflineminus">-                                           [roleString, partStatString]);</span>
<a href="#l45.185"></a><span id="l45.185" class="difflineplus">+            let userTypeString = cal.l10n.getCalString(</span>
<a href="#l45.186"></a><span id="l45.186" class="difflineplus">+                &quot;dialog.tooltip.attendeeUserType2.&quot; + userType,</span>
<a href="#l45.187"></a><span id="l45.187" class="difflineplus">+                [organizer.toString()]</span>
<a href="#l45.188"></a><span id="l45.188" class="difflineplus">+            );</span>
<a href="#l45.189"></a><span id="l45.189" class="difflineplus">+            let roleString = cal.l10n.getCalString(</span>
<a href="#l45.190"></a><span id="l45.190" class="difflineplus">+                &quot;dialog.tooltip.attendeeRole2.&quot; + role,</span>
<a href="#l45.191"></a><span id="l45.191" class="difflineplus">+                [userTypeString]</span>
<a href="#l45.192"></a><span id="l45.192" class="difflineplus">+            );</span>
<a href="#l45.193"></a><span id="l45.193" class="difflineplus">+            let partStatString = cal.l10n.getCalString(</span>
<a href="#l45.194"></a><span id="l45.194" class="difflineplus">+                &quot;dialog.tooltip.attendeePartStat2.&quot; + partStat,</span>
<a href="#l45.195"></a><span id="l45.195" class="difflineplus">+                [orgName]</span>
<a href="#l45.196"></a><span id="l45.196" class="difflineplus">+            );</span>
<a href="#l45.197"></a><span id="l45.197" class="difflineplus">+            let tooltip = cal.l10n.getCalString(</span>
<a href="#l45.198"></a><span id="l45.198" class="difflineplus">+                &quot;dialog.tooltip.attendee.combined&quot;,</span>
<a href="#l45.199"></a><span id="l45.199" class="difflineplus">+                [roleString, partStatString]</span>
<a href="#l45.200"></a><span id="l45.200" class="difflineplus">+            );</span>
<a href="#l45.201"></a><span id="l45.201"> </span>
<a href="#l45.202"></a><span id="l45.202">             text.setAttribute(&quot;value&quot;, orgName);</span>
<a href="#l45.203"></a><span id="l45.203">             cell.setAttribute(&quot;tooltiptext&quot;, tooltip);</span>
<a href="#l45.204"></a><span id="l45.204">             icon.setAttribute(&quot;partstat&quot;, partStat);</span>
<a href="#l45.205"></a><span id="l45.205">             icon.setAttribute(&quot;usertype&quot;, userType);</span>
<a href="#l45.206"></a><span id="l45.206">             icon.setAttribute(&quot;role&quot;, role);</span>
<a href="#l45.207"></a><span id="l45.207">         } else {</span>
<a href="#l45.208"></a><span id="l45.208">             setBooleanAttribute(&quot;item-organizer-row&quot;, &quot;collapsed&quot;, true);</span>
<a href="#l45.209"></a><span id="l45.209" class="difflineat">@@ -3858,17 +3864,17 @@ function checkUntilDate() {</span>
<a href="#l45.210"></a><span id="l45.210">         let callback = function() {</span>
<a href="#l45.211"></a><span id="l45.211">             // Disable the &quot;Save&quot; and &quot;Save and Close&quot; commands as long as the</span>
<a href="#l45.212"></a><span id="l45.212">             // warning dialog is showed.</span>
<a href="#l45.213"></a><span id="l45.213">             enableAcceptCommand(false);</span>
<a href="#l45.214"></a><span id="l45.214"> </span>
<a href="#l45.215"></a><span id="l45.215">             Services.prompt.alert(</span>
<a href="#l45.216"></a><span id="l45.216">                 null,</span>
<a href="#l45.217"></a><span id="l45.217">                 document.title,</span>
<a href="#l45.218"></a><span id="l45.218" class="difflineminus">-                cal.calGetString(&quot;calendar&quot;, &quot;warningUntilDateBeforeStart&quot;));</span>
<a href="#l45.219"></a><span id="l45.219" class="difflineplus">+                cal.l10n.getCalString(&quot;warningUntilDateBeforeStart&quot;));</span>
<a href="#l45.220"></a><span id="l45.220">             enableAcceptCommand(true);</span>
<a href="#l45.221"></a><span id="l45.221">             gWarning = false;</span>
<a href="#l45.222"></a><span id="l45.222">         };</span>
<a href="#l45.223"></a><span id="l45.223">         setTimeout(callback, 1);</span>
<a href="#l45.224"></a><span id="l45.224">     } else {</span>
<a href="#l45.225"></a><span id="l45.225">         // Valid date: set the time equal to start date time.</span>
<a href="#l45.226"></a><span id="l45.226">         gUntilDate = untilDate;</span>
<a href="#l45.227"></a><span id="l45.227">         updateUntildateRecRule();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/calendar/lightning/content/messenger-overlay-sidebar.js</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/calendar/lightning/content/messenger-overlay-sidebar.js</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -210,17 +210,17 @@ var calendarItemTabType = {</span>
<a href="#l46.4"></a><span id="l46.4">         if (aTab.mode.type == &quot;calendarEvent&quot;) {</span>
<a href="#l46.5"></a><span id="l46.5">             strName = aArgs.calendarEvent.title ? &quot;editEventDialog&quot; : &quot;newEventDialog&quot;;</span>
<a href="#l46.6"></a><span id="l46.6">         } else if (aTab.mode.type == &quot;calendarTask&quot;) {</span>
<a href="#l46.7"></a><span id="l46.7">             strName = aArgs.calendarEvent.title ? &quot;editTaskDialog&quot; : &quot;newTaskDialog&quot;;</span>
<a href="#l46.8"></a><span id="l46.8">         } else {</span>
<a href="#l46.9"></a><span id="l46.9">             throw Components.results.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l46.10"></a><span id="l46.10">         }</span>
<a href="#l46.11"></a><span id="l46.11">         // name is &quot;New Event&quot;, &quot;Edit Task&quot;, etc.</span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-        let name = cal.calGetString(&quot;calendar&quot;, strName);</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+        let name = cal.l10n.getCalString(strName);</span>
<a href="#l46.14"></a><span id="l46.14">         aTab.title = name + &quot;: &quot; + (aArgs.calendarEvent.title || name);</span>
<a href="#l46.15"></a><span id="l46.15"> </span>
<a href="#l46.16"></a><span id="l46.16">         // allowTabClose prevents the tab from being closed until we ask</span>
<a href="#l46.17"></a><span id="l46.17">         // the user if they want to save any unsaved changes.</span>
<a href="#l46.18"></a><span id="l46.18">         aTab.allowTabClose = false;</span>
<a href="#l46.19"></a><span id="l46.19"> </span>
<a href="#l46.20"></a><span id="l46.20">         // Put the arguments where they can be accessed easily</span>
<a href="#l46.21"></a><span id="l46.21">         // from the iframe. (window.arguments[0])</span>
<a href="#l46.22"></a><span id="l46.22" class="difflineat">@@ -524,17 +524,17 @@ function ltnIntegrationCheck() {</span>
<a href="#l46.23"></a><span id="l46.23">     // don't do anything if the opt-out pref doesn't exist or is enabled by the user or the user has</span>
<a href="#l46.24"></a><span id="l46.24">     // already decided to keep Lightning</span>
<a href="#l46.25"></a><span id="l46.25">     if (!Preferences.get(kOptOut, true) &amp;&amp; Preferences.get(kNotify, false)) {</span>
<a href="#l46.26"></a><span id="l46.26">         // action is only needed, if hasn't used Lightning before, so lets check whether this looks</span>
<a href="#l46.27"></a><span id="l46.27">         // like a default calendar setup</span>
<a href="#l46.28"></a><span id="l46.28">         let cnt = {};</span>
<a href="#l46.29"></a><span id="l46.29">         let calMgr = cal.getCalendarManager();</span>
<a href="#l46.30"></a><span id="l46.30">         let cals = calMgr.getCalendars(cnt);</span>
<a href="#l46.31"></a><span id="l46.31" class="difflineminus">-        let homeCalName = cal.calGetString(&quot;calendar&quot;, &quot;homeCalendarName&quot;, null, &quot;calendar&quot;);</span>
<a href="#l46.32"></a><span id="l46.32" class="difflineplus">+        let homeCalName = cal.l10n.getCalString(&quot;homeCalendarName&quot;);</span>
<a href="#l46.33"></a><span id="l46.33">         if (cnt.value == 1 &amp;&amp;</span>
<a href="#l46.34"></a><span id="l46.34">             calMgr.getCalendarPref_(cals[0], &quot;type&quot;) == &quot;storage&quot; &amp;&amp;</span>
<a href="#l46.35"></a><span id="l46.35">             calMgr.getCalendarPref_(cals[0], &quot;name&quot;) == homeCalName) {</span>
<a href="#l46.36"></a><span id="l46.36">             // this looks like a default setup, so let's see whether the calendar contains any items</span>
<a href="#l46.37"></a><span id="l46.37">             let pCal = cal.async.promisifyCalendar(cals[0]);</span>
<a href="#l46.38"></a><span id="l46.38">             // we look at all items at any time, but we can stop if the first item was found</span>
<a href="#l46.39"></a><span id="l46.39">             // if we've found no items, we call ltnIntegrationNotification to display the bar</span>
<a href="#l46.40"></a><span id="l46.40">             pCal.getItems(Components.interfaces.calICalendar.ITEM_FILTER_ALL_ITEMS, 1, null, null)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/calendar/providers/caldav/calDavCalendar.js</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/calendar/providers/caldav/calDavCalendar.js</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -150,17 +150,17 @@ calDavCalendar.prototype = {</span>
<a href="#l47.4"></a><span id="l47.4">     //</span>
<a href="#l47.5"></a><span id="l47.5">     // calICalendarProvider interface</span>
<a href="#l47.6"></a><span id="l47.6">     //</span>
<a href="#l47.7"></a><span id="l47.7">     get prefChromeOverlay() {</span>
<a href="#l47.8"></a><span id="l47.8">         return null;</span>
<a href="#l47.9"></a><span id="l47.9">     },</span>
<a href="#l47.10"></a><span id="l47.10"> </span>
<a href="#l47.11"></a><span id="l47.11">     get displayName() {</span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-        return cal.calGetString(&quot;calendar&quot;, &quot;caldavName&quot;);</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineplus">+        return cal.l10n.getCalString(&quot;caldavName&quot;);</span>
<a href="#l47.14"></a><span id="l47.14">     },</span>
<a href="#l47.15"></a><span id="l47.15"> </span>
<a href="#l47.16"></a><span id="l47.16">     createCalendar: function() {</span>
<a href="#l47.17"></a><span id="l47.17">         throw NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l47.18"></a><span id="l47.18">     },</span>
<a href="#l47.19"></a><span id="l47.19"> </span>
<a href="#l47.20"></a><span id="l47.20">     deleteCalendar: function(cal, listener) {</span>
<a href="#l47.21"></a><span id="l47.21">         throw NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l47.22"></a><span id="l47.22" class="difflineat">@@ -1722,20 +1722,20 @@ calDavCalendar.prototype = {</span>
<a href="#l47.23"></a><span id="l47.23"> </span>
<a href="#l47.24"></a><span id="l47.24">             if ((isText || request.URI.spec != request.originalURI.spec) &amp;&amp;</span>
<a href="#l47.25"></a><span id="l47.25">                 self.mLastRedirectStatus == 301) {</span>
<a href="#l47.26"></a><span id="l47.26">                 // The initial PROPFIND essentially goes against the calendar</span>
<a href="#l47.27"></a><span id="l47.27">                 // collection url. If a 301 Moved Permanently redirect occurred</span>
<a href="#l47.28"></a><span id="l47.28">                 // here, we want to modify the url we use in the future.</span>
<a href="#l47.29"></a><span id="l47.29">                 let nIPS = Components.interfaces.nsIPromptService;</span>
<a href="#l47.30"></a><span id="l47.30"> </span>
<a href="#l47.31"></a><span id="l47.31" class="difflineminus">-                let promptTitle = cal.calGetString(&quot;calendar&quot;, &quot;caldavRedirectTitle&quot;, [self.name]);</span>
<a href="#l47.32"></a><span id="l47.32" class="difflineminus">-                let promptText = cal.calGetString(&quot;calendar&quot;, &quot;caldavRedirectText&quot;, [self.name]) +</span>
<a href="#l47.33"></a><span id="l47.33" class="difflineplus">+                let promptTitle = cal.l10n.getCalString(&quot;caldavRedirectTitle&quot;, [self.name]);</span>
<a href="#l47.34"></a><span id="l47.34" class="difflineplus">+                let promptText = cal.l10n.getCalString(&quot;caldavRedirectText&quot;, [self.name]) +</span>
<a href="#l47.35"></a><span id="l47.35">                                  &quot;\n\n&quot; + request.URI.spec;</span>
<a href="#l47.36"></a><span id="l47.36" class="difflineminus">-                let button1Title = cal.calGetString(&quot;calendar&quot;, &quot;caldavRedirectDisableCalendar&quot;);</span>
<a href="#l47.37"></a><span id="l47.37" class="difflineplus">+                let button1Title = cal.l10n.getCalString(&quot;caldavRedirectDisableCalendar&quot;);</span>
<a href="#l47.38"></a><span id="l47.38">                 let flags = (nIPS.BUTTON_TITLE_YES * nIPS.BUTTON_POS_0) +</span>
<a href="#l47.39"></a><span id="l47.39">                             (nIPS.BUTTON_TITLE_IS_STRING * nIPS.BUTTON_POS_1);</span>
<a href="#l47.40"></a><span id="l47.40"> </span>
<a href="#l47.41"></a><span id="l47.41">                 let res = Services.prompt.confirmEx(cal.window.getCalendarWindow(),</span>
<a href="#l47.42"></a><span id="l47.42">                                                     promptTitle, promptText,</span>
<a href="#l47.43"></a><span id="l47.43">                                                     flags, null, button1Title,</span>
<a href="#l47.44"></a><span id="l47.44">                                                     null, null, {});</span>
<a href="#l47.45"></a><span id="l47.45"> </span>
<a href="#l47.46"></a><span id="l47.46" class="difflineat">@@ -2338,17 +2338,17 @@ calDavCalendar.prototype = {</span>
<a href="#l47.47"></a><span id="l47.47">         let message = mapError[aErrNo];</span>
<a href="#l47.48"></a><span id="l47.48">         let localizedMessage;</span>
<a href="#l47.49"></a><span id="l47.49">         let modificationError = mapModification[aErrNo];</span>
<a href="#l47.50"></a><span id="l47.50"> </span>
<a href="#l47.51"></a><span id="l47.51">         if (!message) {</span>
<a href="#l47.52"></a><span id="l47.52">             // Only notify if there is a message for this error</span>
<a href="#l47.53"></a><span id="l47.53">             return;</span>
<a href="#l47.54"></a><span id="l47.54">         }</span>
<a href="#l47.55"></a><span id="l47.55" class="difflineminus">-        localizedMessage = cal.calGetString(&quot;calendar&quot;, message, [this.mUri.spec]);</span>
<a href="#l47.56"></a><span id="l47.56" class="difflineplus">+        localizedMessage = cal.l10n.getCalString(message, [this.mUri.spec]);</span>
<a href="#l47.57"></a><span id="l47.57">         this.mReadOnly = true;</span>
<a href="#l47.58"></a><span id="l47.58">         this.mDisabled = true;</span>
<a href="#l47.59"></a><span id="l47.59">         this.notifyError(aErrNo, localizedMessage);</span>
<a href="#l47.60"></a><span id="l47.60">         this.notifyError(modificationError</span>
<a href="#l47.61"></a><span id="l47.61">                          ? Components.interfaces.calIErrors.MODIFICATION_FAILED</span>
<a href="#l47.62"></a><span id="l47.62">                          : Components.interfaces.calIErrors.READ_FAILED,</span>
<a href="#l47.63"></a><span id="l47.63">                          this.buildDetailedMessage(status, extraInfo));</span>
<a href="#l47.64"></a><span id="l47.64">     },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/calendar/providers/composite/calCompositeCalendar.js</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/calendar/providers/composite/calCompositeCalendar.js</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -96,17 +96,17 @@ calCompositeCalendar.prototype = {</span>
<a href="#l48.4"></a><span id="l48.4">         classDescription: &quot;Composite Calendar Provider&quot;,</span>
<a href="#l48.5"></a><span id="l48.5">         interfaces: calCompositeCalendarInterfaces,</span>
<a href="#l48.6"></a><span id="l48.6">     }),</span>
<a href="#l48.7"></a><span id="l48.7"> </span>
<a href="#l48.8"></a><span id="l48.8">     //</span>
<a href="#l48.9"></a><span id="l48.9">     // calICalendarProvider interface</span>
<a href="#l48.10"></a><span id="l48.10">     //</span>
<a href="#l48.11"></a><span id="l48.11">     get prefChromeOverlay() { return null; },</span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-    get displayName() { return cal.calGetString(&quot;calendar&quot;, &quot;compositeName&quot;); },</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineplus">+    get displayName() { return cal.l10n.getCalString(&quot;compositeName&quot;); },</span>
<a href="#l48.14"></a><span id="l48.14"> </span>
<a href="#l48.15"></a><span id="l48.15">     createCalendar: function() {</span>
<a href="#l48.16"></a><span id="l48.16">         throw NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l48.17"></a><span id="l48.17">     },</span>
<a href="#l48.18"></a><span id="l48.18"> </span>
<a href="#l48.19"></a><span id="l48.19">     deleteCalendar: function(calendar, listener) {</span>
<a href="#l48.20"></a><span id="l48.20">         // You shouldn't be able to delete from the composite calendar.</span>
<a href="#l48.21"></a><span id="l48.21">         throw NS_ERROR_NOT_IMPLEMENTED;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/calendar/providers/ics/calICSCalendar.js</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/calendar/providers/ics/calICSCalendar.js</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -76,17 +76,17 @@ calICSCalendar.prototype = {</span>
<a href="#l49.4"></a><span id="l49.4">     //</span>
<a href="#l49.5"></a><span id="l49.5">     // calICalendarProvider interface</span>
<a href="#l49.6"></a><span id="l49.6">     //</span>
<a href="#l49.7"></a><span id="l49.7">     get prefChromeOverlay() {</span>
<a href="#l49.8"></a><span id="l49.8">         return null;</span>
<a href="#l49.9"></a><span id="l49.9">     },</span>
<a href="#l49.10"></a><span id="l49.10"> </span>
<a href="#l49.11"></a><span id="l49.11">     get displayName() {</span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-        return cal.calGetString(&quot;calendar&quot;, &quot;icsName&quot;);</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineplus">+        return cal.l10n.getCalString(&quot;icsName&quot;);</span>
<a href="#l49.14"></a><span id="l49.14">     },</span>
<a href="#l49.15"></a><span id="l49.15"> </span>
<a href="#l49.16"></a><span id="l49.16">     createCalendar: function() {</span>
<a href="#l49.17"></a><span id="l49.17">         throw NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l49.18"></a><span id="l49.18">     },</span>
<a href="#l49.19"></a><span id="l49.19"> </span>
<a href="#l49.20"></a><span id="l49.20">     deleteCalendar: function(cal, listener) {</span>
<a href="#l49.21"></a><span id="l49.21">         throw NS_ERROR_NOT_IMPLEMENTED;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/calendar/providers/memory/calMemoryCalendar.js</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/calendar/providers/memory/calMemoryCalendar.js</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -53,17 +53,17 @@ calMemoryCalendar.prototype = {</span>
<a href="#l50.4"></a><span id="l50.4">     //</span>
<a href="#l50.5"></a><span id="l50.5">     // calICalendarProvider interface</span>
<a href="#l50.6"></a><span id="l50.6">     //</span>
<a href="#l50.7"></a><span id="l50.7">     get prefChromeOverlay() {</span>
<a href="#l50.8"></a><span id="l50.8">         return null;</span>
<a href="#l50.9"></a><span id="l50.9">     },</span>
<a href="#l50.10"></a><span id="l50.10"> </span>
<a href="#l50.11"></a><span id="l50.11">     get displayName() {</span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-        return cal.calGetString(&quot;calendar&quot;, &quot;memoryName&quot;);</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineplus">+        return cal.l10n.getCalString(&quot;memoryName&quot;);</span>
<a href="#l50.14"></a><span id="l50.14">     },</span>
<a href="#l50.15"></a><span id="l50.15"> </span>
<a href="#l50.16"></a><span id="l50.16">     createCalendar: function() {</span>
<a href="#l50.17"></a><span id="l50.17">         throw NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l50.18"></a><span id="l50.18">     },</span>
<a href="#l50.19"></a><span id="l50.19"> </span>
<a href="#l50.20"></a><span id="l50.20">     deleteCalendar: function(calendar, listener) {</span>
<a href="#l50.21"></a><span id="l50.21">         calendar = calendar.wrappedJSObject;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -57,17 +57,17 @@ calStorageCalendar.prototype = {</span>
<a href="#l51.4"></a><span id="l51.4">     //</span>
<a href="#l51.5"></a><span id="l51.5">     // calICalendarProvider interface</span>
<a href="#l51.6"></a><span id="l51.6">     //</span>
<a href="#l51.7"></a><span id="l51.7">     get prefChromeOverlay() {</span>
<a href="#l51.8"></a><span id="l51.8">         return null;</span>
<a href="#l51.9"></a><span id="l51.9">     },</span>
<a href="#l51.10"></a><span id="l51.10"> </span>
<a href="#l51.11"></a><span id="l51.11">     get displayName() {</span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-        return cal.calGetString(&quot;calendar&quot;, &quot;storageName&quot;);</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineplus">+        return cal.l10n.getCalString(&quot;storageName&quot;);</span>
<a href="#l51.14"></a><span id="l51.14">     },</span>
<a href="#l51.15"></a><span id="l51.15"> </span>
<a href="#l51.16"></a><span id="l51.16">     createCalendar: function() {</span>
<a href="#l51.17"></a><span id="l51.17">         throw NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l51.18"></a><span id="l51.18">     },</span>
<a href="#l51.19"></a><span id="l51.19"> </span>
<a href="#l51.20"></a><span id="l51.20">     deleteCalendar: function(aCalendar, listener) {</span>
<a href="#l51.21"></a><span id="l51.21">         aCalendar = aCalendar.wrappedJSObject;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/calendar/resources/content/datetimepickers/datetimepickers.xml</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/calendar/resources/content/datetimepickers/datetimepickers.xml</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -56,42 +56,42 @@</span>
<a href="#l52.4"></a><span id="l52.4">       &lt;field name=&quot;mDayNames&quot;&gt;[]&lt;/field&gt;</span>
<a href="#l52.5"></a><span id="l52.5">       &lt;field name=&quot;mRelationWords&quot;&gt;[]&lt;/field&gt;</span>
<a href="#l52.6"></a><span id="l52.6">       &lt;field name=&quot;mMonthLongNames&quot;&gt;[]&lt;/field&gt;</span>
<a href="#l52.7"></a><span id="l52.7">       &lt;field name=&quot;mMonthShortNames&quot;&gt;[]&lt;/field&gt;</span>
<a href="#l52.8"></a><span id="l52.8"> </span>
<a href="#l52.9"></a><span id="l52.9">       &lt;constructor&gt;&lt;![CDATA[</span>
<a href="#l52.10"></a><span id="l52.10">           ChromeUtils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l52.11"></a><span id="l52.11">           let goButton = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;date-go-button&quot;);</span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-          goButton.setAttribute(&quot;label&quot;, cal.calGetString(&quot;calendar&quot;, &quot;go&quot;));</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineplus">+          goButton.setAttribute(&quot;label&quot;, cal.l10n.getCalString(&quot;go&quot;));</span>
<a href="#l52.14"></a><span id="l52.14">           // Load the stuff we're going to use to parse written dates</span>
<a href="#l52.15"></a><span id="l52.15">           this.mRelativeDates = [</span>
<a href="#l52.16"></a><span id="l52.16" class="difflineminus">-              { word: cal.calGetString(&quot;calendar&quot;, &quot;today&quot;).toLowerCase(), offset: 0 },</span>
<a href="#l52.17"></a><span id="l52.17" class="difflineminus">-              { word: cal.calGetString(&quot;calendar&quot;, &quot;yesterday&quot;).toLowerCase(), offset: -1 },</span>
<a href="#l52.18"></a><span id="l52.18" class="difflineminus">-              { word: cal.calGetString(&quot;calendar&quot;, &quot;tomorrow&quot;).toLowerCase(), offset: 1 }];</span>
<a href="#l52.19"></a><span id="l52.19" class="difflineplus">+              { word: cal.l10n.getCalString(&quot;today&quot;).toLowerCase(), offset: 0 },</span>
<a href="#l52.20"></a><span id="l52.20" class="difflineplus">+              { word: cal.l10n.getCalString(&quot;yesterday&quot;).toLowerCase(), offset: -1 },</span>
<a href="#l52.21"></a><span id="l52.21" class="difflineplus">+              { word: cal.l10n.getCalString(&quot;tomorrow&quot;).toLowerCase(), offset: 1 }];</span>
<a href="#l52.22"></a><span id="l52.22">           for (let i = 1; i &lt;= 7; i++) {</span>
<a href="#l52.23"></a><span id="l52.23">               this.mDayNames.push(cal.calGetString(&quot;dateFormat&quot;, &quot;day.&quot; + i + &quot;.name&quot;).toLowerCase());</span>
<a href="#l52.24"></a><span id="l52.24">           }</span>
<a href="#l52.25"></a><span id="l52.25"> </span>
<a href="#l52.26"></a><span id="l52.26">           for (let i = 1; i &lt;= 12; i++) {</span>
<a href="#l52.27"></a><span id="l52.27">               this.mMonthLongNames.push(cal.calGetString(&quot;dateFormat&quot;, &quot;month.&quot; + i + &quot;.name&quot;).toLowerCase());</span>
<a href="#l52.28"></a><span id="l52.28">               this.mMonthShortNames.push(cal.calGetString(&quot;dateFormat&quot;, &quot;month.&quot; + i + &quot;.Mmm&quot;).toLowerCase());</span>
<a href="#l52.29"></a><span id="l52.29">           }</span>
<a href="#l52.30"></a><span id="l52.30"> </span>
<a href="#l52.31"></a><span id="l52.31">           // note that some languages have different conjugations of</span>
<a href="#l52.32"></a><span id="l52.32">           // next/last depending on the day</span>
<a href="#l52.33"></a><span id="l52.33">           this.mRelationWords = [</span>
<a href="#l52.34"></a><span id="l52.34" class="difflineminus">-              { word: cal.calGetString(&quot;calendar&quot;, &quot;last1&quot;), offset: -1 },</span>
<a href="#l52.35"></a><span id="l52.35" class="difflineminus">-              { word: cal.calGetString(&quot;calendar&quot;, &quot;last2&quot;), offset: -1 },</span>
<a href="#l52.36"></a><span id="l52.36" class="difflineminus">-              { word: cal.calGetString(&quot;calendar&quot;, &quot;next1&quot;), offset: 0 },</span>
<a href="#l52.37"></a><span id="l52.37" class="difflineminus">-              { word: cal.calGetString(&quot;calendar&quot;, &quot;next2&quot;), offset: 0 }];</span>
<a href="#l52.38"></a><span id="l52.38" class="difflineplus">+              { word: cal.l10n.getCalString(&quot;last1&quot;), offset: -1 },</span>
<a href="#l52.39"></a><span id="l52.39" class="difflineplus">+              { word: cal.l10n.getCalString(&quot;last2&quot;), offset: -1 },</span>
<a href="#l52.40"></a><span id="l52.40" class="difflineplus">+              { word: cal.l10n.getCalString(&quot;next1&quot;), offset: 0 },</span>
<a href="#l52.41"></a><span id="l52.41" class="difflineplus">+              { word: cal.l10n.getCalString(&quot;next2&quot;), offset: 0 }];</span>
<a href="#l52.42"></a><span id="l52.42"> </span>
<a href="#l52.43"></a><span id="l52.43">           // Set the value to today</span>
<a href="#l52.44"></a><span id="l52.44">           let text = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;date-textbox&quot;);</span>
<a href="#l52.45"></a><span id="l52.45" class="difflineminus">-          text.value = cal.calGetString(&quot;calendar&quot;, &quot;today&quot;);</span>
<a href="#l52.46"></a><span id="l52.46" class="difflineplus">+          text.value = cal.l10n.getCalString(&quot;today&quot;);</span>
<a href="#l52.47"></a><span id="l52.47">       ]]&gt;&lt;/constructor&gt;</span>
<a href="#l52.48"></a><span id="l52.48"> </span>
<a href="#l52.49"></a><span id="l52.49">       &lt;property name=&quot;value&quot;&gt;</span>
<a href="#l52.50"></a><span id="l52.50">         &lt;getter&gt;&lt;![CDATA[</span>
<a href="#l52.51"></a><span id="l52.51">             return this.mValue;</span>
<a href="#l52.52"></a><span id="l52.52">         ]]&gt;&lt;/getter&gt;</span>
<a href="#l52.53"></a><span id="l52.53">         &lt;setter&gt;&lt;![CDATA[</span>
<a href="#l52.54"></a><span id="l52.54">             let text = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;date-textbox&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/calendar/resources/content/mouseoverPreviews.js</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/calendar/resources/content/mouseoverPreviews.js</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -80,44 +80,44 @@ function getPreviewForItem(aItem, aIsToo</span>
<a href="#l53.4"></a><span id="l53.4">  *</span>
<a href="#l53.5"></a><span id="l53.5">  * @param   {calIEvent} aEvent The event</span>
<a href="#l53.6"></a><span id="l53.6">  * @returns {String}           The string for the status property of the event</span>
<a href="#l53.7"></a><span id="l53.7">  */</span>
<a href="#l53.8"></a><span id="l53.8"> function getEventStatusString(aEvent) {</span>
<a href="#l53.9"></a><span id="l53.9">     switch (aEvent.status) {</span>
<a href="#l53.10"></a><span id="l53.10">         // Event status value keywords are specified in RFC2445sec4.8.1.11</span>
<a href="#l53.11"></a><span id="l53.11">         case &quot;TENTATIVE&quot;:</span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-            return cal.calGetString(&quot;calendar&quot;, &quot;statusTentative&quot;);</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineplus">+            return cal.l10n.getCalString(&quot;statusTentative&quot;);</span>
<a href="#l53.14"></a><span id="l53.14">         case &quot;CONFIRMED&quot;:</span>
<a href="#l53.15"></a><span id="l53.15" class="difflineminus">-            return cal.calGetString(&quot;calendar&quot;, &quot;statusConfirmed&quot;);</span>
<a href="#l53.16"></a><span id="l53.16" class="difflineplus">+            return cal.l10n.getCalString(&quot;statusConfirmed&quot;);</span>
<a href="#l53.17"></a><span id="l53.17">         case &quot;CANCELLED&quot;:</span>
<a href="#l53.18"></a><span id="l53.18" class="difflineminus">-            return cal.calGetString(&quot;calendar&quot;, &quot;eventStatusCancelled&quot;);</span>
<a href="#l53.19"></a><span id="l53.19" class="difflineplus">+            return cal.l10n.getCalString(&quot;eventStatusCancelled&quot;);</span>
<a href="#l53.20"></a><span id="l53.20">         default:</span>
<a href="#l53.21"></a><span id="l53.21">             return &quot;&quot;;</span>
<a href="#l53.22"></a><span id="l53.22">     }</span>
<a href="#l53.23"></a><span id="l53.23"> }</span>
<a href="#l53.24"></a><span id="l53.24"> </span>
<a href="#l53.25"></a><span id="l53.25"> /**</span>
<a href="#l53.26"></a><span id="l53.26">  * PUBLIC: Returns the string for status (none), NeedsAction, InProcess,</span>
<a href="#l53.27"></a><span id="l53.27">  * Cancelled, orCompleted for a given ToDo</span>
<a href="#l53.28"></a><span id="l53.28">  *</span>
<a href="#l53.29"></a><span id="l53.29">  * @param   {calIToDo} aToDo   The ToDo</span>
<a href="#l53.30"></a><span id="l53.30">  * @returns {String}           The string for the status property of the event</span>
<a href="#l53.31"></a><span id="l53.31">  */</span>
<a href="#l53.32"></a><span id="l53.32"> function getToDoStatusString(aToDo) {</span>
<a href="#l53.33"></a><span id="l53.33">     switch (aToDo.status) {</span>
<a href="#l53.34"></a><span id="l53.34">         // Todo status keywords are specified in RFC2445sec4.8.1.11</span>
<a href="#l53.35"></a><span id="l53.35">         case &quot;NEEDS-ACTION&quot;:</span>
<a href="#l53.36"></a><span id="l53.36" class="difflineminus">-            return cal.calGetString(&quot;calendar&quot;, &quot;statusNeedsAction&quot;);</span>
<a href="#l53.37"></a><span id="l53.37" class="difflineplus">+            return cal.l10n.getCalString(&quot;statusNeedsAction&quot;);</span>
<a href="#l53.38"></a><span id="l53.38">         case &quot;IN-PROCESS&quot;:</span>
<a href="#l53.39"></a><span id="l53.39" class="difflineminus">-            return cal.calGetString(&quot;calendar&quot;, &quot;statusInProcess&quot;);</span>
<a href="#l53.40"></a><span id="l53.40" class="difflineplus">+            return cal.l10n.getCalString(&quot;statusInProcess&quot;);</span>
<a href="#l53.41"></a><span id="l53.41">         case &quot;CANCELLED&quot;:</span>
<a href="#l53.42"></a><span id="l53.42" class="difflineminus">-            return cal.calGetString(&quot;calendar&quot;, &quot;todoStatusCancelled&quot;);</span>
<a href="#l53.43"></a><span id="l53.43" class="difflineplus">+            return cal.l10n.getCalString(&quot;todoStatusCancelled&quot;);</span>
<a href="#l53.44"></a><span id="l53.44">         case &quot;COMPLETED&quot;:</span>
<a href="#l53.45"></a><span id="l53.45" class="difflineminus">-            return cal.calGetString(&quot;calendar&quot;, &quot;statusCompleted&quot;);</span>
<a href="#l53.46"></a><span id="l53.46" class="difflineplus">+            return cal.l10n.getCalString(&quot;statusCompleted&quot;);</span>
<a href="#l53.47"></a><span id="l53.47">         default:</span>
<a href="#l53.48"></a><span id="l53.48">             return &quot;&quot;;</span>
<a href="#l53.49"></a><span id="l53.49">     }</span>
<a href="#l53.50"></a><span id="l53.50"> }</span>
<a href="#l53.51"></a><span id="l53.51"> </span>
<a href="#l53.52"></a><span id="l53.52"> /**</span>
<a href="#l53.53"></a><span id="l53.53">  * PRIVATE: Called when a user hovers over a todo element and the text for the</span>
<a href="#l53.54"></a><span id="l53.54">  * mouse overis changed.</span>
<a href="#l53.55"></a><span id="l53.55" class="difflineat">@@ -168,21 +168,21 @@ function getPreviewForTask(toDoItem, aIs</span>
<a href="#l53.56"></a><span id="l53.56">         }</span>
<a href="#l53.57"></a><span id="l53.57"> </span>
<a href="#l53.58"></a><span id="l53.58">         if (toDoItem.priority &amp;&amp; toDoItem.priority != 0) {</span>
<a href="#l53.59"></a><span id="l53.59">             let priorityInteger = parseInt(toDoItem.priority, 10);</span>
<a href="#l53.60"></a><span id="l53.60">             let priorityString;</span>
<a href="#l53.61"></a><span id="l53.61"> </span>
<a href="#l53.62"></a><span id="l53.62">             // These cut-offs should match calendar-event-dialog.js</span>
<a href="#l53.63"></a><span id="l53.63">             if (priorityInteger &gt;= 1 &amp;&amp; priorityInteger &lt;= 4) {</span>
<a href="#l53.64"></a><span id="l53.64" class="difflineminus">-                priorityString = cal.calGetString(&quot;calendar&quot;, &quot;highPriority&quot;); // high priority</span>
<a href="#l53.65"></a><span id="l53.65" class="difflineplus">+                priorityString = cal.l10n.getCalString(&quot;highPriority&quot;);</span>
<a href="#l53.66"></a><span id="l53.66">             } else if (priorityInteger == 5) {</span>
<a href="#l53.67"></a><span id="l53.67" class="difflineminus">-                priorityString = cal.calGetString(&quot;calendar&quot;, &quot;normalPriority&quot;); // normal priority</span>
<a href="#l53.68"></a><span id="l53.68" class="difflineplus">+                priorityString = cal.l10n.getCalString(&quot;normalPriority&quot;);</span>
<a href="#l53.69"></a><span id="l53.69">             } else {</span>
<a href="#l53.70"></a><span id="l53.70" class="difflineminus">-                priorityString = cal.calGetString(&quot;calendar&quot;, &quot;lowPriority&quot;); // low priority</span>
<a href="#l53.71"></a><span id="l53.71" class="difflineplus">+                priorityString = cal.l10n.getCalString(&quot;lowPriority&quot;);</span>
<a href="#l53.72"></a><span id="l53.72">             }</span>
<a href="#l53.73"></a><span id="l53.73">             boxAppendLabeledText(vbox, &quot;tooltipPriority&quot;, priorityString);</span>
<a href="#l53.74"></a><span id="l53.74">             hasHeader = true;</span>
<a href="#l53.75"></a><span id="l53.75">         }</span>
<a href="#l53.76"></a><span id="l53.76"> </span>
<a href="#l53.77"></a><span id="l53.77">         if (toDoItem.status &amp;&amp; toDoItem.status != &quot;NONE&quot;) {</span>
<a href="#l53.78"></a><span id="l53.78">             let status = getToDoStatusString(toDoItem);</span>
<a href="#l53.79"></a><span id="l53.79">             boxAppendLabeledText(vbox, &quot;tooltipStatus&quot;, status);</span>
<a href="#l53.80"></a><span id="l53.80" class="difflineat">@@ -370,17 +370,17 @@ function boxInitializeHeaderGrid(box) {</span>
<a href="#l53.81"></a><span id="l53.81">  * PRIVATE: To headers grid, append a row containing Label: value, where label</span>
<a href="#l53.82"></a><span id="l53.82">  * is localized text for labelProperty.</span>
<a href="#l53.83"></a><span id="l53.83">  *</span>
<a href="#l53.84"></a><span id="l53.84">  * @param box               box containing headers grid</span>
<a href="#l53.85"></a><span id="l53.85">  * @param labelProperty     name of property for localized name of header</span>
<a href="#l53.86"></a><span id="l53.86">  * @param textString        value of header field.</span>
<a href="#l53.87"></a><span id="l53.87">  */</span>
<a href="#l53.88"></a><span id="l53.88"> function boxAppendLabeledText(box, labelProperty, textString) {</span>
<a href="#l53.89"></a><span id="l53.89" class="difflineminus">-    let labelText = cal.calGetString(&quot;calendar&quot;, labelProperty);</span>
<a href="#l53.90"></a><span id="l53.90" class="difflineplus">+    let labelText = cal.l10n.getCalString(labelProperty);</span>
<a href="#l53.91"></a><span id="l53.91">     let rows = box.getElementsByTagNameNS(box.namespaceURI, &quot;rows&quot;)[0];</span>
<a href="#l53.92"></a><span id="l53.92">     let row = document.createElement(&quot;row&quot;);</span>
<a href="#l53.93"></a><span id="l53.93"> </span>
<a href="#l53.94"></a><span id="l53.94">     row.appendChild(createTooltipHeaderLabel(labelText));</span>
<a href="#l53.95"></a><span id="l53.95">     row.appendChild(createTooltipHeaderDescription(textString));</span>
<a href="#l53.96"></a><span id="l53.96"> </span>
<a href="#l53.97"></a><span id="l53.97">     rows.appendChild(row);</span>
<a href="#l53.98"></a><span id="l53.98"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/calendar/resources/content/publish.js</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/calendar/resources/content/publish.js</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -50,17 +50,17 @@ function publishEntireCalendar(aCalendar</span>
<a href="#l54.4"></a><span id="l54.4">             aCalendar = calendars[0];</span>
<a href="#l54.5"></a><span id="l54.5">         } else {</span>
<a href="#l54.6"></a><span id="l54.6">             // Ask user to select the calendar that should be published.</span>
<a href="#l54.7"></a><span id="l54.7">             // publishEntireCalendar() will be called again if OK is pressed</span>
<a href="#l54.8"></a><span id="l54.8">             // in the dialog and the selected calendar will be passed in.</span>
<a href="#l54.9"></a><span id="l54.9">             // Therefore return after openDialog().</span>
<a href="#l54.10"></a><span id="l54.10">             let args = {};</span>
<a href="#l54.11"></a><span id="l54.11">             args.onOk = publishEntireCalendar;</span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-            args.promptText = cal.calGetString(&quot;calendar&quot;, &quot;publishPrompt&quot;);</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineplus">+            args.promptText = cal.l10n.getCalString(&quot;publishPrompt&quot;);</span>
<a href="#l54.14"></a><span id="l54.14">             openDialog(&quot;chrome://calendar/content/chooseCalendarDialog.xul&quot;,</span>
<a href="#l54.15"></a><span id="l54.15">                        &quot;_blank&quot;, &quot;chrome,titlebar,modal,resizable&quot;, args);</span>
<a href="#l54.16"></a><span id="l54.16">             return;</span>
<a href="#l54.17"></a><span id="l54.17">         }</span>
<a href="#l54.18"></a><span id="l54.18">     }</span>
<a href="#l54.19"></a><span id="l54.19"> </span>
<a href="#l54.20"></a><span id="l54.20">     let args = {};</span>
<a href="#l54.21"></a><span id="l54.21">     let publishObject = {};</span>
<a href="#l54.22"></a><span id="l54.22" class="difflineat">@@ -172,19 +172,18 @@ function publishItemArray(aItemArray, aP</span>
<a href="#l54.23"></a><span id="l54.23"> </span>
<a href="#l54.24"></a><span id="l54.24">     inputStream = storageStream.newInputStream(0);</span>
<a href="#l54.25"></a><span id="l54.25"> </span>
<a href="#l54.26"></a><span id="l54.26">     uploadChannel.setUploadStream(inputStream,</span>
<a href="#l54.27"></a><span id="l54.27">                                   &quot;text/calendar&quot;, -1);</span>
<a href="#l54.28"></a><span id="l54.28">     try {</span>
<a href="#l54.29"></a><span id="l54.29">         channel.asyncOpen(publishingListener, aProgressDialog);</span>
<a href="#l54.30"></a><span id="l54.30">     } catch (e) {</span>
<a href="#l54.31"></a><span id="l54.31" class="difflineminus">-        let props = Services.strings.createBundle(&quot;chrome://calendar/locale/calendar.properties&quot;);</span>
<a href="#l54.32"></a><span id="l54.32" class="difflineminus">-        Services.prompt.alert(null, cal.calGetString(&quot;calendar&quot;, &quot;genericErrorTitle&quot;),</span>
<a href="#l54.33"></a><span id="l54.33" class="difflineminus">-                              props.formatStringFromName(&quot;otherPutError&quot;, [e.message], 1));</span>
<a href="#l54.34"></a><span id="l54.34" class="difflineplus">+        Services.prompt.alert(null, cal.l10n.getCalString(&quot;genericErrorTitle&quot;),</span>
<a href="#l54.35"></a><span id="l54.35" class="difflineplus">+                              cal.l10n.getCalString(&quot;otherPutError&quot;, [e.message]));</span>
<a href="#l54.36"></a><span id="l54.36">     }</span>
<a href="#l54.37"></a><span id="l54.37"> }</span>
<a href="#l54.38"></a><span id="l54.38"> </span>
<a href="#l54.39"></a><span id="l54.39"> </span>
<a href="#l54.40"></a><span id="l54.40"> var notificationCallbacks = {</span>
<a href="#l54.41"></a><span id="l54.41">     // nsIInterfaceRequestor interface</span>
<a href="#l54.42"></a><span id="l54.42">     getInterface: function(iid, instance) {</span>
<a href="#l54.43"></a><span id="l54.43">         if (iid.equals(Components.interfaces.nsIAuthPrompt)) {</span>
<a href="#l54.44"></a><span id="l54.44" class="difflineat">@@ -202,30 +201,31 @@ var publishingListener = {</span>
<a href="#l54.45"></a><span id="l54.45"> </span>
<a href="#l54.46"></a><span id="l54.46">     onStartRequest: function(request, ctxt) {</span>
<a href="#l54.47"></a><span id="l54.47">     },</span>
<a href="#l54.48"></a><span id="l54.48"> </span>
<a href="#l54.49"></a><span id="l54.49">     onStopRequest: function(request, ctxt, status, errorMsg) {</span>
<a href="#l54.50"></a><span id="l54.50">         ctxt.wrappedJSObject.onStopUpload();</span>
<a href="#l54.51"></a><span id="l54.51"> </span>
<a href="#l54.52"></a><span id="l54.52">         let channel;</span>
<a href="#l54.53"></a><span id="l54.53" class="difflineminus">-        let props = Services.strings.createBundle(&quot;chrome://calendar/locale/calendar.properties&quot;);</span>
<a href="#l54.54"></a><span id="l54.54">         let requestSucceeded;</span>
<a href="#l54.55"></a><span id="l54.55">         try {</span>
<a href="#l54.56"></a><span id="l54.56">             channel = request.QueryInterface(Components.interfaces.nsIHttpChannel);</span>
<a href="#l54.57"></a><span id="l54.57">             requestSucceeded = channel.requestSucceeded;</span>
<a href="#l54.58"></a><span id="l54.58">         } catch (e) {</span>
<a href="#l54.59"></a><span id="l54.59">             // Don't fail if it is not a http channel, will be handled below</span>
<a href="#l54.60"></a><span id="l54.60">         }</span>
<a href="#l54.61"></a><span id="l54.61"> </span>
<a href="#l54.62"></a><span id="l54.62">         if (channel &amp;&amp; !requestSucceeded) {</span>
<a href="#l54.63"></a><span id="l54.63" class="difflineminus">-            Services.prompt.alert(null, cal.calGetString(&quot;calendar&quot;, &quot;genericErrorTitle&quot;),</span>
<a href="#l54.64"></a><span id="l54.64" class="difflineminus">-                                  props.formatStringFromName(&quot;httpPutError&quot;, [channel.responseStatus, channel.responseStatusText], 2));</span>
<a href="#l54.65"></a><span id="l54.65" class="difflineplus">+            let body = cal.l10n.getCalString(&quot;httpPutError&quot;, [</span>
<a href="#l54.66"></a><span id="l54.66" class="difflineplus">+                channel.responseStatus, channel.responseStatusText</span>
<a href="#l54.67"></a><span id="l54.67" class="difflineplus">+            ]);</span>
<a href="#l54.68"></a><span id="l54.68" class="difflineplus">+            Services.prompt.alert(null, cal.l10n.getCalString(&quot;genericErrorTitle&quot;), body);</span>
<a href="#l54.69"></a><span id="l54.69">         } else if (!channel &amp;&amp; !Components.isSuccessCode(request.status)) {</span>
<a href="#l54.70"></a><span id="l54.70">             // XXX this should be made human-readable.</span>
<a href="#l54.71"></a><span id="l54.71" class="difflineminus">-            Services.prompt.alert(null, cal.calGetString(&quot;calendar&quot;, &quot;genericErrorTitle&quot;),</span>
<a href="#l54.72"></a><span id="l54.72" class="difflineminus">-                                  props.formatStringFromName(&quot;otherPutError&quot;, [request.status.toString(16)], 1));</span>
<a href="#l54.73"></a><span id="l54.73" class="difflineplus">+            let body = cal.l10n.getCalString(&quot;otherPutError&quot;, [request.status.toString(16)]);</span>
<a href="#l54.74"></a><span id="l54.74" class="difflineplus">+            Services.prompt.alert(null, cal.l10n.getCalString(&quot;genericErrorTitle&quot;), body);</span>
<a href="#l54.75"></a><span id="l54.75">         }</span>
<a href="#l54.76"></a><span id="l54.76">     },</span>
<a href="#l54.77"></a><span id="l54.77"> </span>
<a href="#l54.78"></a><span id="l54.78">     onDataAvailable: function(request, ctxt, inStream, sourceOffset, count) {</span>
<a href="#l54.79"></a><span id="l54.79">     }</span>
<a href="#l54.80"></a><span id="l54.80"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1" class="difflineminus">--- a/calendar/test/mozmill/testAlarmDefaultValue.js</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineplus">+++ b/calendar/test/mozmill/testAlarmDefaultValue.js</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineat">@@ -26,17 +26,17 @@ function setupModule(module) {</span>
<a href="#l55.4"></a><span id="l55.4">         openLightningPrefs,</span>
<a href="#l55.5"></a><span id="l55.5">         menulistSelect</span>
<a href="#l55.6"></a><span id="l55.6">     } = collector.getModule(&quot;calendar-utils&quot;));</span>
<a href="#l55.7"></a><span id="l55.7">     collector.getModule(&quot;calendar-utils&quot;).setupModule();</span>
<a href="#l55.8"></a><span id="l55.8">     Object.assign(module, helpersForController(controller));</span>
<a href="#l55.9"></a><span id="l55.9"> }</span>
<a href="#l55.10"></a><span id="l55.10"> </span>
<a href="#l55.11"></a><span id="l55.11"> function testDefaultAlarms() {</span>
<a href="#l55.12"></a><span id="l55.12" class="difflineminus">-    let localeUnitString = cal.calGetString(&quot;calendar&quot;, &quot;unitDays&quot;);</span>
<a href="#l55.13"></a><span id="l55.13" class="difflineplus">+    let localeUnitString = cal.l10n.getCalString(&quot;unitDays&quot;);</span>
<a href="#l55.14"></a><span id="l55.14">     let unitString = PluralForm.get(DEFVALUE, localeUnitString).replace(&quot;#1&quot;, DEFVALUE);</span>
<a href="#l55.15"></a><span id="l55.15">     let alarmString = (...args) =&gt; cal.calGetString(&quot;calendar-alarms&quot;, ...args);</span>
<a href="#l55.16"></a><span id="l55.16">     let originStringEvent = alarmString(&quot;reminderCustomOriginBeginBeforeEvent&quot;);</span>
<a href="#l55.17"></a><span id="l55.17">     let originStringTask = alarmString(&quot;reminderCustomOriginBeginBeforeTask&quot;);</span>
<a href="#l55.18"></a><span id="l55.18">     let expectedEventReminder = alarmString(&quot;reminderCustomTitle&quot;, [unitString, originStringEvent]);</span>
<a href="#l55.19"></a><span id="l55.19">     let expectedTaskReminder = alarmString(&quot;reminderCustomTitle&quot;, [unitString, originStringTask]);</span>
<a href="#l55.20"></a><span id="l55.20"> </span>
<a href="#l55.21"></a><span id="l55.21">     // Configure the lightning preferences</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

